/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/modules/modales/seleccionModal.ts
var import_obsidian12, SeleccionModal;
var init_seleccionModal = __esm({
  "src/modules/modales/seleccionModal.ts"() {
    "use strict";
    import_obsidian12 = require("obsidian");
    SeleccionModal = class extends import_obsidian12.FuzzySuggestModal {
      // Flag para determinar si se ha hecho una selección.
      // Constructor de la clase.
      constructor(app2, titles, values, placeholder) {
        super(app2);
        // Objeto para mapear títulos a valores.
        this.seleccionHecha = false;
        this.titles = titles;
        this.values = values;
        this.valueMap = titles.reduce((acc, title, index) => {
          acc[title] = values[index];
          return acc;
        }, {});
        this.setPlaceholder(placeholder);
      }
      // Método para obtener los ítems (títulos) que se mostrarán en el modal.
      getItems() {
        return this.titles;
      }
      // Método para obtener el texto que se mostrará para cada ítem en el modal.
      getItemText(item) {
        return item;
      }
      // Método que se llama al cerrar el modal.
      onClose() {
        if (!this.seleccionHecha) {
          this.reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      }
      // Método para manejar la selección de un ítem.
      selectSuggestion(item, evt) {
        this.seleccionHecha = true;
        super.selectSuggestion(item, evt);
      }
      // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
      onChooseItem(item, evt) {
        const value = this.valueMap[item];
        this.resolve(value);
      }
      // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
      openAndAwaitSelection() {
        return new Promise((resolve, reject) => {
          this.resolve = resolve;
          this.reject = reject;
          this.open();
        });
      }
    };
  }
});

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian18, fuzzySelectOrCreate;
var init_fuzzySelectOrCreate = __esm({
  "src/modules/modales/fuzzySelectOrCreate.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    init_seleccionModal();
    fuzzySelectOrCreate = class {
      constructor(app2, plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.app = app2;
        this.plugin = plugin;
      }
      createModal() {
        const modal = document.createElement("div");
        modal.setAttribute("id", "fuzzySearchModal");
        modal.style.position = "fixed";
        modal.style.top = "50%";
        modal.style.left = "50%";
        modal.style.transform = "translate(-50%, -50%)";
        modal.style.zIndex = "1000";
        modal.style.padding = "20px";
        modal.style.backgroundColor = "white";
        modal.style.border = "1px solid #ccc";
        modal.style.borderRadius = "5px";
        modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
        modal.style.width = "300px";
        const closeButton = document.createElement("button");
        closeButton.textContent = "\xD7";
        closeButton.style.position = "absolute";
        closeButton.style.top = "5px";
        closeButton.style.right = "5px";
        closeButton.style.border = "none";
        closeButton.style.background = "none";
        closeButton.style.cursor = "pointer";
        closeButton.style.fontSize = "16px";
        closeButton.style.fontWeight = "bold";
        closeButton.style.padding = "0px 4px";
        closeButton.style.borderRadius = "10px";
        closeButton.style.outline = "none";
        closeButton.style.boxShadow = "none";
        closeButton.onclick = () => modal.remove();
        modal.appendChild(closeButton);
        return modal;
      }
      filterItems(query, items) {
        return items.filter(
          (item) => item.value.toLowerCase().includes(query.toLowerCase())
        );
      }
      async updateYAMLFields(tipo, selectedValue, selectedGroup) {
        try {
          debugger;
          const file = app.vault.getAbstractFileByPath(this.pathCampos);
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            debugger;
            let currentActs = frontmatter[tipo] || [];
            let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
            frontmatter[tipo] = newValueForActs;
          });
          console.log("Frontmatter actualizado con \xE9xito");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
      async showFuzzySearchModal(items, groups, tipo) {
        return new Promise((resolve, reject) => {
          let selectedValue = "";
          let selectedGroup = "";
          const modal = this.createModal();
          const title = document.createElement("h2");
          title.textContent = "Busca o crea tu actividad";
          title.style.textAlign = "center";
          modal.appendChild(title);
          const input = document.createElement("input");
          input.type = "text";
          input.placeholder = "Escribe tu actividad...";
          input.style.width = "80%";
          input.style.textAlign = "center";
          modal.style.display = "flex";
          modal.style.flexDirection = "column";
          modal.style.alignItems = "center";
          modal.appendChild(input);
          const spacer = document.createElement("div");
          spacer.style.height = "16px";
          modal.appendChild(spacer);
          const resultsDiv = document.createElement("div");
          modal.appendChild(resultsDiv);
          function updateResultsDisplay(filteredResults, menuOtro2) {
            resultsDiv.innerHTML = "";
            filteredResults.forEach((result) => {
              const div = document.createElement("div");
              div.textContent = result.value;
              div.style.cursor = "pointer";
              div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
              div.onmouseout = () => div.style.backgroundColor = "transparent";
              div.onclick = () => {
                selectedValue = result.activity;
                selectedGroup = result.group;
                modal.remove();
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(div);
            });
            if (filteredResults.length === 0 && input.value.trim() !== "") {
              const createNewDiv = document.createElement("div");
              createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
              createNewDiv.style.cursor = "pointer";
              createNewDiv.style.color = "blue";
              createNewDiv.onclick = () => {
                selectedValue = input.value;
                debugger;
                if (tipo == void 0) {
                  tipo = "actsTemas";
                }
                selectGroupForNewActivity(menuOtro2, tipo);
              };
              resultsDiv.appendChild(createNewDiv);
            }
          }
          function selectGroupForNewActivity(menuOtro2, tipo2) {
            resultsDiv.innerHTML = "";
            input.remove();
            spacer.remove();
            title.remove();
            const texto = document.createElement("p");
            texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
            ;
            texto.style.textAlign = "center";
            resultsDiv.appendChild(texto);
            groups.forEach((group) => {
              const groupDiv = document.createElement("div");
              groupDiv.textContent = group;
              groupDiv.style.cursor = "pointer";
              groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
              groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
              groupDiv.onclick = async () => {
                selectedGroup = group;
                modal.remove();
                let recurrente = await menuOtro2.esRecurrente(selectedValue);
                if (recurrente) {
                  await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
                }
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(groupDiv);
            });
          }
          function displaySelectedValue(activity, group) {
            resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
          }
          input.oninput = () => {
            const filteredItems = this.filterItems(input.value, items);
            updateResultsDisplay(filteredItems, this);
          };
          document.body.appendChild(modal);
        });
      }
      async esRecurrente(tarea) {
        const opciones = ["Si", "No"];
        const valores = [true, false];
        const placeholder = `${tarea} es tarea recurrente?`;
        const modal = new SeleccionModal(app, opciones, valores, placeholder);
        try {
          return await modal.openAndAwaitSelection();
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          return false;
        }
      }
    };
  }
});

// node_modules/luxon/src/errors.js
var LuxonError, InvalidDateTimeError, InvalidIntervalError, InvalidDurationError, ConflictingSpecificationError, InvalidUnitError, InvalidArgumentError, ZoneIsAbstractError;
var init_errors = __esm({
  "node_modules/luxon/src/errors.js"() {
    LuxonError = class extends Error {
    };
    InvalidDateTimeError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid DateTime: ${reason.toMessage()}`);
      }
    };
    InvalidIntervalError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Interval: ${reason.toMessage()}`);
      }
    };
    InvalidDurationError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Duration: ${reason.toMessage()}`);
      }
    };
    ConflictingSpecificationError = class extends LuxonError {
    };
    InvalidUnitError = class extends LuxonError {
      constructor(unit) {
        super(`Invalid unit ${unit}`);
      }
    };
    InvalidArgumentError = class extends LuxonError {
    };
    ZoneIsAbstractError = class extends LuxonError {
      constructor() {
        super("Zone is an abstract class");
      }
    };
  }
});

// node_modules/luxon/src/impl/formats.js
var n, s, l, DATE_SHORT, DATE_MED, DATE_MED_WITH_WEEKDAY, DATE_FULL, DATE_HUGE, TIME_SIMPLE, TIME_WITH_SECONDS, TIME_WITH_SHORT_OFFSET, TIME_WITH_LONG_OFFSET, TIME_24_SIMPLE, TIME_24_WITH_SECONDS, TIME_24_WITH_SHORT_OFFSET, TIME_24_WITH_LONG_OFFSET, DATETIME_SHORT, DATETIME_SHORT_WITH_SECONDS, DATETIME_MED, DATETIME_MED_WITH_SECONDS, DATETIME_MED_WITH_WEEKDAY, DATETIME_FULL, DATETIME_FULL_WITH_SECONDS, DATETIME_HUGE, DATETIME_HUGE_WITH_SECONDS;
var init_formats = __esm({
  "node_modules/luxon/src/impl/formats.js"() {
    n = "numeric";
    s = "short";
    l = "long";
    DATE_SHORT = {
      year: n,
      month: n,
      day: n
    };
    DATE_MED = {
      year: n,
      month: s,
      day: n
    };
    DATE_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s
    };
    DATE_FULL = {
      year: n,
      month: l,
      day: n
    };
    DATE_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l
    };
    TIME_SIMPLE = {
      hour: n,
      minute: n
    };
    TIME_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n
    };
    TIME_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    TIME_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
    TIME_24_SIMPLE = {
      hour: n,
      minute: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: s
    };
    TIME_24_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: l
    };
    DATETIME_SHORT = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_SHORT_WITH_SECONDS = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_MED_WITH_SECONDS = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s,
      hour: n,
      minute: n
    };
    DATETIME_FULL = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      timeZoneName: s
    };
    DATETIME_FULL_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    DATETIME_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      timeZoneName: l
    };
    DATETIME_HUGE_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
  }
});

// node_modules/luxon/src/zone.js
var Zone;
var init_zone = __esm({
  "node_modules/luxon/src/zone.js"() {
    init_errors();
    Zone = class {
      /**
       * The type of zone
       * @abstract
       * @type {string}
       */
      get type() {
        throw new ZoneIsAbstractError();
      }
      /**
       * The name of this zone.
       * @abstract
       * @type {string}
       */
      get name() {
        throw new ZoneIsAbstractError();
      }
      get ianaName() {
        return this.name;
      }
      /**
       * Returns whether the offset is known to be fixed for the whole year.
       * @abstract
       * @type {boolean}
       */
      get isUniversal() {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's common name (such as EST) at the specified timestamp
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the name
       * @param {Object} opts - Options to affect the format
       * @param {string} opts.format - What style of offset to return. Accepts 'long' or 'short'.
       * @param {string} opts.locale - What locale to return the offset name in.
       * @return {string}
       */
      offsetName(ts, opts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's value as a string
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the offset
       * @param {string} format - What style of offset to return.
       *                          Accepts 'narrow', 'short', or 'techie'. Returning '+6', '+06:00', or '+0600' respectively
       * @return {string}
       */
      formatOffset(ts, format) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return the offset in minutes for this zone at the specified timestamp.
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to compute the offset
       * @return {number}
       */
      offset(ts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is equal to another zone
       * @abstract
       * @param {Zone} otherZone - the zone to compare
       * @return {boolean}
       */
      equals(otherZone) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is valid.
       * @abstract
       * @type {boolean}
       */
      get isValid() {
        throw new ZoneIsAbstractError();
      }
    };
  }
});

// node_modules/luxon/src/zones/systemZone.js
var singleton, SystemZone;
var init_systemZone = __esm({
  "node_modules/luxon/src/zones/systemZone.js"() {
    init_util();
    init_zone();
    singleton = null;
    SystemZone = class _SystemZone extends Zone {
      /**
       * Get a singleton instance of the local zone
       * @return {SystemZone}
       */
      static get instance() {
        if (singleton === null) {
          singleton = new _SystemZone();
        }
        return singleton;
      }
      /** @override **/
      get type() {
        return "system";
      }
      /** @override **/
      get name() {
        return new Intl.DateTimeFormat().resolvedOptions().timeZone;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        return -new Date(ts).getTimezoneOffset();
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "system";
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/IANAZone.js
function makeDTF(zone) {
  if (!dtfCache[zone]) {
    dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: zone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      era: "short"
    });
  }
  return dtfCache[zone];
}
function hackyOffset(dtf, date) {
  const formatted = dtf.format(date).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;
  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
}
function partsOffset(dtf, date) {
  const formatted = dtf.formatToParts(date);
  const filled = [];
  for (let i = 0; i < formatted.length; i++) {
    const { type: type2, value } = formatted[i];
    const pos = typeToPos[type2];
    if (type2 === "era") {
      filled[pos] = value;
    } else if (!isUndefined(pos)) {
      filled[pos] = parseInt(value, 10);
    }
  }
  return filled;
}
var dtfCache, typeToPos, ianaZoneCache, IANAZone;
var init_IANAZone = __esm({
  "node_modules/luxon/src/zones/IANAZone.js"() {
    init_util();
    init_zone();
    dtfCache = {};
    typeToPos = {
      year: 0,
      month: 1,
      day: 2,
      era: 3,
      hour: 4,
      minute: 5,
      second: 6
    };
    ianaZoneCache = {};
    IANAZone = class _IANAZone extends Zone {
      /**
       * @param {string} name - Zone name
       * @return {IANAZone}
       */
      static create(name) {
        if (!ianaZoneCache[name]) {
          ianaZoneCache[name] = new _IANAZone(name);
        }
        return ianaZoneCache[name];
      }
      /**
       * Reset local caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCache() {
        ianaZoneCache = {};
        dtfCache = {};
      }
      /**
       * Returns whether the provided string is a valid specifier. This only checks the string's format, not that the specifier identifies a known zone; see isValidZone for that.
       * @param {string} s - The string to check validity on
       * @example IANAZone.isValidSpecifier("America/New_York") //=> true
       * @example IANAZone.isValidSpecifier("Sport~~blorp") //=> false
       * @deprecated This method returns false for some valid IANA names. Use isValidZone instead.
       * @return {boolean}
       */
      static isValidSpecifier(s2) {
        return this.isValidZone(s2);
      }
      /**
       * Returns whether the provided string identifies a real zone
       * @param {string} zone - The string to check
       * @example IANAZone.isValidZone("America/New_York") //=> true
       * @example IANAZone.isValidZone("Fantasia/Castle") //=> false
       * @example IANAZone.isValidZone("Sport~~blorp") //=> false
       * @return {boolean}
       */
      static isValidZone(zone) {
        if (!zone) {
          return false;
        }
        try {
          new Intl.DateTimeFormat("en-US", { timeZone: zone }).format();
          return true;
        } catch (e) {
          return false;
        }
      }
      constructor(name) {
        super();
        this.zoneName = name;
        this.valid = _IANAZone.isValidZone(name);
      }
      /** @override **/
      get type() {
        return "iana";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale, this.name);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        const date = new Date(ts);
        if (isNaN(date))
          return NaN;
        const dtf = makeDTF(this.name);
        let [year, month, day, adOrBc, hour, minute, second] = dtf.formatToParts ? partsOffset(dtf, date) : hackyOffset(dtf, date);
        if (adOrBc === "BC") {
          year = -Math.abs(year) + 1;
        }
        const adjustedHour = hour === 24 ? 0 : hour;
        const asUTC = objToLocalTS({
          year,
          month,
          day,
          hour: adjustedHour,
          minute,
          second,
          millisecond: 0
        });
        let asTS = +date;
        const over = asTS % 1e3;
        asTS -= over >= 0 ? over : 1e3 + over;
        return (asUTC - asTS) / (60 * 1e3);
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "iana" && otherZone.name === this.name;
      }
      /** @override **/
      get isValid() {
        return this.valid;
      }
    };
  }
});

// node_modules/luxon/src/impl/locale.js
function getCachedLF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlLFCache[key];
  if (!dtf) {
    dtf = new Intl.ListFormat(locString, opts);
    intlLFCache[key] = dtf;
  }
  return dtf;
}
function getCachedDTF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlDTCache[key];
  if (!dtf) {
    dtf = new Intl.DateTimeFormat(locString, opts);
    intlDTCache[key] = dtf;
  }
  return dtf;
}
function getCachedINF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let inf = intlNumCache[key];
  if (!inf) {
    inf = new Intl.NumberFormat(locString, opts);
    intlNumCache[key] = inf;
  }
  return inf;
}
function getCachedRTF(locString, opts = {}) {
  const { base, ...cacheKeyOpts } = opts;
  const key = JSON.stringify([locString, cacheKeyOpts]);
  let inf = intlRelCache[key];
  if (!inf) {
    inf = new Intl.RelativeTimeFormat(locString, opts);
    intlRelCache[key] = inf;
  }
  return inf;
}
function systemLocale() {
  if (sysLocaleCache) {
    return sysLocaleCache;
  } else {
    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
    return sysLocaleCache;
  }
}
function getCachedWeekInfo(locString) {
  let data = weekInfoCache[locString];
  if (!data) {
    const locale = new Intl.Locale(locString);
    data = "getWeekInfo" in locale ? locale.getWeekInfo() : locale.weekInfo;
    weekInfoCache[locString] = data;
  }
  return data;
}
function parseLocaleString(localeStr) {
  const xIndex = localeStr.indexOf("-x-");
  if (xIndex !== -1) {
    localeStr = localeStr.substring(0, xIndex);
  }
  const uIndex = localeStr.indexOf("-u-");
  if (uIndex === -1) {
    return [localeStr];
  } else {
    let options;
    let selectedStr;
    try {
      options = getCachedDTF(localeStr).resolvedOptions();
      selectedStr = localeStr;
    } catch (e) {
      const smaller = localeStr.substring(0, uIndex);
      options = getCachedDTF(smaller).resolvedOptions();
      selectedStr = smaller;
    }
    const { numberingSystem, calendar } = options;
    return [selectedStr, numberingSystem, calendar];
  }
}
function intlConfigString(localeStr, numberingSystem, outputCalendar) {
  if (outputCalendar || numberingSystem) {
    if (!localeStr.includes("-u-")) {
      localeStr += "-u";
    }
    if (outputCalendar) {
      localeStr += `-ca-${outputCalendar}`;
    }
    if (numberingSystem) {
      localeStr += `-nu-${numberingSystem}`;
    }
    return localeStr;
  } else {
    return localeStr;
  }
}
function mapMonths(f) {
  const ms = [];
  for (let i = 1; i <= 12; i++) {
    const dt = DateTime.utc(2009, i, 1);
    ms.push(f(dt));
  }
  return ms;
}
function mapWeekdays(f) {
  const ms = [];
  for (let i = 1; i <= 7; i++) {
    const dt = DateTime.utc(2016, 11, 13 + i);
    ms.push(f(dt));
  }
  return ms;
}
function listStuff(loc, length, englishFn, intlFn) {
  const mode = loc.listingMode();
  if (mode === "error") {
    return null;
  } else if (mode === "en") {
    return englishFn(length);
  } else {
    return intlFn(length);
  }
}
function supportsFastNumbers(loc) {
  if (loc.numberingSystem && loc.numberingSystem !== "latn") {
    return false;
  } else {
    return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
  }
}
var intlLFCache, intlDTCache, intlNumCache, intlRelCache, sysLocaleCache, weekInfoCache, PolyNumberFormatter, PolyDateFormatter, PolyRelFormatter, fallbackWeekSettings, Locale;
var init_locale = __esm({
  "node_modules/luxon/src/impl/locale.js"() {
    init_util();
    init_english();
    init_settings();
    init_datetime();
    init_IANAZone();
    intlLFCache = {};
    intlDTCache = {};
    intlNumCache = {};
    intlRelCache = {};
    sysLocaleCache = null;
    weekInfoCache = {};
    PolyNumberFormatter = class {
      constructor(intl, forceSimple, opts) {
        this.padTo = opts.padTo || 0;
        this.floor = opts.floor || false;
        const { padTo, floor, ...otherOpts } = opts;
        if (!forceSimple || Object.keys(otherOpts).length > 0) {
          const intlOpts = { useGrouping: false, ...opts };
          if (opts.padTo > 0)
            intlOpts.minimumIntegerDigits = opts.padTo;
          this.inf = getCachedINF(intl, intlOpts);
        }
      }
      format(i) {
        if (this.inf) {
          const fixed = this.floor ? Math.floor(i) : i;
          return this.inf.format(fixed);
        } else {
          const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
          return padStart(fixed, this.padTo);
        }
      }
    };
    PolyDateFormatter = class {
      constructor(dt, intl, opts) {
        this.opts = opts;
        this.originalZone = void 0;
        let z = void 0;
        if (this.opts.timeZone) {
          this.dt = dt;
        } else if (dt.zone.type === "fixed") {
          const gmtOffset = -1 * (dt.offset / 60);
          const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;
          if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
            z = offsetZ;
            this.dt = dt;
          } else {
            z = "UTC";
            this.dt = dt.offset === 0 ? dt : dt.setZone("UTC").plus({ minutes: dt.offset });
            this.originalZone = dt.zone;
          }
        } else if (dt.zone.type === "system") {
          this.dt = dt;
        } else if (dt.zone.type === "iana") {
          this.dt = dt;
          z = dt.zone.name;
        } else {
          z = "UTC";
          this.dt = dt.setZone("UTC").plus({ minutes: dt.offset });
          this.originalZone = dt.zone;
        }
        const intlOpts = { ...this.opts };
        intlOpts.timeZone = intlOpts.timeZone || z;
        this.dtf = getCachedDTF(intl, intlOpts);
      }
      format() {
        if (this.originalZone) {
          return this.formatToParts().map(({ value }) => value).join("");
        }
        return this.dtf.format(this.dt.toJSDate());
      }
      formatToParts() {
        const parts = this.dtf.formatToParts(this.dt.toJSDate());
        if (this.originalZone) {
          return parts.map((part) => {
            if (part.type === "timeZoneName") {
              const offsetName = this.originalZone.offsetName(this.dt.ts, {
                locale: this.dt.locale,
                format: this.opts.timeZoneName
              });
              return {
                ...part,
                value: offsetName
              };
            } else {
              return part;
            }
          });
        }
        return parts;
      }
      resolvedOptions() {
        return this.dtf.resolvedOptions();
      }
    };
    PolyRelFormatter = class {
      constructor(intl, isEnglish, opts) {
        this.opts = { style: "long", ...opts };
        if (!isEnglish && hasRelative()) {
          this.rtf = getCachedRTF(intl, opts);
        }
      }
      format(count, unit) {
        if (this.rtf) {
          return this.rtf.format(count, unit);
        } else {
          return formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== "long");
        }
      }
      formatToParts(count, unit) {
        if (this.rtf) {
          return this.rtf.formatToParts(count, unit);
        } else {
          return [];
        }
      }
    };
    fallbackWeekSettings = {
      firstDay: 1,
      minimalDays: 4,
      weekend: [6, 7]
    };
    Locale = class _Locale {
      static fromOpts(opts) {
        return _Locale.create(
          opts.locale,
          opts.numberingSystem,
          opts.outputCalendar,
          opts.weekSettings,
          opts.defaultToEN
        );
      }
      static create(locale, numberingSystem, outputCalendar, weekSettings, defaultToEN = false) {
        const specifiedLocale = locale || Settings.defaultLocale;
        const localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
        const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
        const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
        const weekSettingsR = validateWeekSettings(weekSettings) || Settings.defaultWeekSettings;
        return new _Locale(localeR, numberingSystemR, outputCalendarR, weekSettingsR, specifiedLocale);
      }
      static resetCache() {
        sysLocaleCache = null;
        intlDTCache = {};
        intlNumCache = {};
        intlRelCache = {};
      }
      static fromObject({ locale, numberingSystem, outputCalendar, weekSettings } = {}) {
        return _Locale.create(locale, numberingSystem, outputCalendar, weekSettings);
      }
      constructor(locale, numbering, outputCalendar, weekSettings, specifiedLocale) {
        const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale);
        this.locale = parsedLocale;
        this.numberingSystem = numbering || parsedNumberingSystem || null;
        this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
        this.weekSettings = weekSettings;
        this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
        this.weekdaysCache = { format: {}, standalone: {} };
        this.monthsCache = { format: {}, standalone: {} };
        this.meridiemCache = null;
        this.eraCache = {};
        this.specifiedLocale = specifiedLocale;
        this.fastNumbersCached = null;
      }
      get fastNumbers() {
        if (this.fastNumbersCached == null) {
          this.fastNumbersCached = supportsFastNumbers(this);
        }
        return this.fastNumbersCached;
      }
      listingMode() {
        const isActuallyEn = this.isEnglish();
        const hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
        return isActuallyEn && hasNoWeirdness ? "en" : "intl";
      }
      clone(alts) {
        if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
          return this;
        } else {
          return _Locale.create(
            alts.locale || this.specifiedLocale,
            alts.numberingSystem || this.numberingSystem,
            alts.outputCalendar || this.outputCalendar,
            validateWeekSettings(alts.weekSettings) || this.weekSettings,
            alts.defaultToEN || false
          );
        }
      }
      redefaultToEN(alts = {}) {
        return this.clone({ ...alts, defaultToEN: true });
      }
      redefaultToSystem(alts = {}) {
        return this.clone({ ...alts, defaultToEN: false });
      }
      months(length, format = false) {
        return listStuff(this, length, months, () => {
          const intl = format ? { month: length, day: "numeric" } : { month: length }, formatStr = format ? "format" : "standalone";
          if (!this.monthsCache[formatStr][length]) {
            this.monthsCache[formatStr][length] = mapMonths((dt) => this.extract(dt, intl, "month"));
          }
          return this.monthsCache[formatStr][length];
        });
      }
      weekdays(length, format = false) {
        return listStuff(this, length, weekdays, () => {
          const intl = format ? { weekday: length, year: "numeric", month: "long", day: "numeric" } : { weekday: length }, formatStr = format ? "format" : "standalone";
          if (!this.weekdaysCache[formatStr][length]) {
            this.weekdaysCache[formatStr][length] = mapWeekdays(
              (dt) => this.extract(dt, intl, "weekday")
            );
          }
          return this.weekdaysCache[formatStr][length];
        });
      }
      meridiems() {
        return listStuff(
          this,
          void 0,
          () => meridiems,
          () => {
            if (!this.meridiemCache) {
              const intl = { hour: "numeric", hourCycle: "h12" };
              this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(
                (dt) => this.extract(dt, intl, "dayperiod")
              );
            }
            return this.meridiemCache;
          }
        );
      }
      eras(length) {
        return listStuff(this, length, eras, () => {
          const intl = { era: length };
          if (!this.eraCache[length]) {
            this.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(
              (dt) => this.extract(dt, intl, "era")
            );
          }
          return this.eraCache[length];
        });
      }
      extract(dt, intlOpts, field) {
        const df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find((m) => m.type.toLowerCase() === field);
        return matching ? matching.value : null;
      }
      numberFormatter(opts = {}) {
        return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
      }
      dtFormatter(dt, intlOpts = {}) {
        return new PolyDateFormatter(dt, this.intl, intlOpts);
      }
      relFormatter(opts = {}) {
        return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
      }
      listFormatter(opts = {}) {
        return getCachedLF(this.intl, opts);
      }
      isEnglish() {
        return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
      }
      getWeekSettings() {
        if (this.weekSettings) {
          return this.weekSettings;
        } else if (!hasLocaleWeekInfo()) {
          return fallbackWeekSettings;
        } else {
          return getCachedWeekInfo(this.locale);
        }
      }
      getStartOfWeek() {
        return this.getWeekSettings().firstDay;
      }
      getMinDaysInFirstWeek() {
        return this.getWeekSettings().minimalDays;
      }
      getWeekendDays() {
        return this.getWeekSettings().weekend;
      }
      equals(other) {
        return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
      }
    };
  }
});

// node_modules/luxon/src/zones/fixedOffsetZone.js
var singleton2, FixedOffsetZone;
var init_fixedOffsetZone = __esm({
  "node_modules/luxon/src/zones/fixedOffsetZone.js"() {
    init_util();
    init_zone();
    singleton2 = null;
    FixedOffsetZone = class _FixedOffsetZone extends Zone {
      /**
       * Get a singleton instance of UTC
       * @return {FixedOffsetZone}
       */
      static get utcInstance() {
        if (singleton2 === null) {
          singleton2 = new _FixedOffsetZone(0);
        }
        return singleton2;
      }
      /**
       * Get an instance with a specified offset
       * @param {number} offset - The offset in minutes
       * @return {FixedOffsetZone}
       */
      static instance(offset2) {
        return offset2 === 0 ? _FixedOffsetZone.utcInstance : new _FixedOffsetZone(offset2);
      }
      /**
       * Get an instance of FixedOffsetZone from a UTC offset string, like "UTC+6"
       * @param {string} s - The offset string to parse
       * @example FixedOffsetZone.parseSpecifier("UTC+6")
       * @example FixedOffsetZone.parseSpecifier("UTC+06")
       * @example FixedOffsetZone.parseSpecifier("UTC-6:00")
       * @return {FixedOffsetZone}
       */
      static parseSpecifier(s2) {
        if (s2) {
          const r = s2.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
          if (r) {
            return new _FixedOffsetZone(signedOffset(r[1], r[2]));
          }
        }
        return null;
      }
      constructor(offset2) {
        super();
        this.fixed = offset2;
      }
      /** @override **/
      get type() {
        return "fixed";
      }
      /** @override **/
      get name() {
        return this.fixed === 0 ? "UTC" : `UTC${formatOffset(this.fixed, "narrow")}`;
      }
      get ianaName() {
        if (this.fixed === 0) {
          return "Etc/UTC";
        } else {
          return `Etc/GMT${formatOffset(-this.fixed, "narrow")}`;
        }
      }
      /** @override **/
      offsetName() {
        return this.name;
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.fixed, format);
      }
      /** @override **/
      get isUniversal() {
        return true;
      }
      /** @override **/
      offset() {
        return this.fixed;
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/invalidZone.js
var InvalidZone;
var init_invalidZone = __esm({
  "node_modules/luxon/src/zones/invalidZone.js"() {
    init_zone();
    InvalidZone = class extends Zone {
      constructor(zoneName) {
        super();
        this.zoneName = zoneName;
      }
      /** @override **/
      get type() {
        return "invalid";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName() {
        return null;
      }
      /** @override **/
      formatOffset() {
        return "";
      }
      /** @override **/
      offset() {
        return NaN;
      }
      /** @override **/
      equals() {
        return false;
      }
      /** @override **/
      get isValid() {
        return false;
      }
    };
  }
});

// node_modules/luxon/src/impl/zoneUtil.js
function normalizeZone(input, defaultZone2) {
  let offset2;
  if (isUndefined(input) || input === null) {
    return defaultZone2;
  } else if (input instanceof Zone) {
    return input;
  } else if (isString(input)) {
    const lowered = input.toLowerCase();
    if (lowered === "default")
      return defaultZone2;
    else if (lowered === "local" || lowered === "system")
      return SystemZone.instance;
    else if (lowered === "utc" || lowered === "gmt")
      return FixedOffsetZone.utcInstance;
    else
      return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
  } else if (isNumber(input)) {
    return FixedOffsetZone.instance(input);
  } else if (typeof input === "object" && "offset" in input && typeof input.offset === "function") {
    return input;
  } else {
    return new InvalidZone(input);
  }
}
var init_zoneUtil = __esm({
  "node_modules/luxon/src/impl/zoneUtil.js"() {
    init_zone();
    init_IANAZone();
    init_fixedOffsetZone();
    init_invalidZone();
    init_util();
    init_systemZone();
  }
});

// node_modules/luxon/src/settings.js
var now, defaultZone, defaultLocale, defaultNumberingSystem, defaultOutputCalendar, twoDigitCutoffYear, throwOnInvalid, defaultWeekSettings, Settings;
var init_settings = __esm({
  "node_modules/luxon/src/settings.js"() {
    init_systemZone();
    init_IANAZone();
    init_locale();
    init_zoneUtil();
    init_util();
    now = () => Date.now();
    defaultZone = "system";
    defaultLocale = null;
    defaultNumberingSystem = null;
    defaultOutputCalendar = null;
    twoDigitCutoffYear = 60;
    defaultWeekSettings = null;
    Settings = class {
      /**
       * Get the callback for returning the current timestamp.
       * @type {function}
       */
      static get now() {
        return now;
      }
      /**
       * Set the callback for returning the current timestamp.
       * The function should return a number, which will be interpreted as an Epoch millisecond count
       * @type {function}
       * @example Settings.now = () => Date.now() + 3000 // pretend it is 3 seconds in the future
       * @example Settings.now = () => 0 // always pretend it's Jan 1, 1970 at midnight in UTC time
       */
      static set now(n2) {
        now = n2;
      }
      /**
       * Set the default time zone to create DateTimes in. Does not affect existing instances.
       * Use the value "system" to reset this value to the system's time zone.
       * @type {string}
       */
      static set defaultZone(zone) {
        defaultZone = zone;
      }
      /**
       * Get the default time zone object currently used to create DateTimes. Does not affect existing instances.
       * The default value is the system's time zone (the one set on the machine that runs this code).
       * @type {Zone}
       */
      static get defaultZone() {
        return normalizeZone(defaultZone, SystemZone.instance);
      }
      /**
       * Get the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultLocale() {
        return defaultLocale;
      }
      /**
       * Set the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultLocale(locale) {
        defaultLocale = locale;
      }
      /**
       * Get the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultNumberingSystem() {
        return defaultNumberingSystem;
      }
      /**
       * Set the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultNumberingSystem(numberingSystem) {
        defaultNumberingSystem = numberingSystem;
      }
      /**
       * Get the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultOutputCalendar() {
        return defaultOutputCalendar;
      }
      /**
       * Set the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultOutputCalendar(outputCalendar) {
        defaultOutputCalendar = outputCalendar;
      }
      /**
       * @typedef {Object} WeekSettings
       * @property {number} firstDay
       * @property {number} minimalDays
       * @property {number[]} weekend
       */
      /**
       * @return {WeekSettings|null}
       */
      static get defaultWeekSettings() {
        return defaultWeekSettings;
      }
      /**
       * Allows overriding the default locale week settings, i.e. the start of the week, the weekend and
       * how many days are required in the first week of a year.
       * Does not affect existing instances.
       *
       * @param {WeekSettings|null} weekSettings
       */
      static set defaultWeekSettings(weekSettings) {
        defaultWeekSettings = validateWeekSettings(weekSettings);
      }
      /**
       * Get the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       */
      static get twoDigitCutoffYear() {
        return twoDigitCutoffYear;
      }
      /**
       * Set the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       * @example Settings.twoDigitCutoffYear = 0 // cut-off year is 0, so all 'yy' are interpreted as current century
       * @example Settings.twoDigitCutoffYear = 50 // '49' -> 1949; '50' -> 2050
       * @example Settings.twoDigitCutoffYear = 1950 // interpreted as 50
       * @example Settings.twoDigitCutoffYear = 2050 // ALSO interpreted as 50
       */
      static set twoDigitCutoffYear(cutoffYear) {
        twoDigitCutoffYear = cutoffYear % 100;
      }
      /**
       * Get whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static get throwOnInvalid() {
        return throwOnInvalid;
      }
      /**
       * Set whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static set throwOnInvalid(t) {
        throwOnInvalid = t;
      }
      /**
       * Reset Luxon's global caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCaches() {
        Locale.resetCache();
        IANAZone.resetCache();
      }
    };
  }
});

// node_modules/luxon/src/impl/invalid.js
var Invalid;
var init_invalid = __esm({
  "node_modules/luxon/src/impl/invalid.js"() {
    Invalid = class {
      constructor(reason, explanation) {
        this.reason = reason;
        this.explanation = explanation;
      }
      toMessage() {
        if (this.explanation) {
          return `${this.reason}: ${this.explanation}`;
        } else {
          return this.reason;
        }
      }
    };
  }
});

// node_modules/luxon/src/impl/conversions.js
function unitOutOfRange(unit, value) {
  return new Invalid(
    "unit out of range",
    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`
  );
}
function dayOfWeek(year, month, day) {
  const d = new Date(Date.UTC(year, month - 1, day));
  if (year < 100 && year >= 0) {
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  const js = d.getUTCDay();
  return js === 0 ? 7 : js;
}
function computeOrdinal(year, month, day) {
  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];
}
function uncomputeOrdinal(year, ordinal) {
  const table = isLeapYear(year) ? leapLadder : nonLeapLadder, month0 = table.findIndex((i) => i < ordinal), day = ordinal - table[month0];
  return { month: month0 + 1, day };
}
function isoWeekdayToLocal(isoWeekday, startOfWeek) {
  return (isoWeekday - startOfWeek + 7) % 7 + 1;
}
function gregorianToWeek(gregObj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { year, month, day } = gregObj, ordinal = computeOrdinal(year, month, day), weekday = isoWeekdayToLocal(dayOfWeek(year, month, day), startOfWeek);
  let weekNumber = Math.floor((ordinal - weekday + 14 - minDaysInFirstWeek) / 7), weekYear;
  if (weekNumber < 1) {
    weekYear = year - 1;
    weekNumber = weeksInWeekYear(weekYear, minDaysInFirstWeek, startOfWeek);
  } else if (weekNumber > weeksInWeekYear(year, minDaysInFirstWeek, startOfWeek)) {
    weekYear = year + 1;
    weekNumber = 1;
  } else {
    weekYear = year;
  }
  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };
}
function weekToGregorian(weekData, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { weekYear, weekNumber, weekday } = weekData, weekdayOfJan4 = isoWeekdayToLocal(dayOfWeek(weekYear, 1, minDaysInFirstWeek), startOfWeek), yearInDays = daysInYear(weekYear);
  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 7 + minDaysInFirstWeek, year;
  if (ordinal < 1) {
    year = weekYear - 1;
    ordinal += daysInYear(year);
  } else if (ordinal > yearInDays) {
    year = weekYear + 1;
    ordinal -= daysInYear(weekYear);
  } else {
    year = weekYear;
  }
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(weekData) };
}
function gregorianToOrdinal(gregData) {
  const { year, month, day } = gregData;
  const ordinal = computeOrdinal(year, month, day);
  return { year, ordinal, ...timeObject(gregData) };
}
function ordinalToGregorian(ordinalData) {
  const { year, ordinal } = ordinalData;
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(ordinalData) };
}
function usesLocalWeekValues(obj, loc) {
  const hasLocaleWeekData = !isUndefined(obj.localWeekday) || !isUndefined(obj.localWeekNumber) || !isUndefined(obj.localWeekYear);
  if (hasLocaleWeekData) {
    const hasIsoWeekData = !isUndefined(obj.weekday) || !isUndefined(obj.weekNumber) || !isUndefined(obj.weekYear);
    if (hasIsoWeekData) {
      throw new ConflictingSpecificationError(
        "Cannot mix locale-based week fields with ISO-based week fields"
      );
    }
    if (!isUndefined(obj.localWeekday))
      obj.weekday = obj.localWeekday;
    if (!isUndefined(obj.localWeekNumber))
      obj.weekNumber = obj.localWeekNumber;
    if (!isUndefined(obj.localWeekYear))
      obj.weekYear = obj.localWeekYear;
    delete obj.localWeekday;
    delete obj.localWeekNumber;
    delete obj.localWeekYear;
    return {
      minDaysInFirstWeek: loc.getMinDaysInFirstWeek(),
      startOfWeek: loc.getStartOfWeek()
    };
  } else {
    return { minDaysInFirstWeek: 4, startOfWeek: 1 };
  }
}
function hasInvalidWeekData(obj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const validYear = isInteger(obj.weekYear), validWeek = integerBetween(
    obj.weekNumber,
    1,
    weeksInWeekYear(obj.weekYear, minDaysInFirstWeek, startOfWeek)
  ), validWeekday = integerBetween(obj.weekday, 1, 7);
  if (!validYear) {
    return unitOutOfRange("weekYear", obj.weekYear);
  } else if (!validWeek) {
    return unitOutOfRange("week", obj.weekNumber);
  } else if (!validWeekday) {
    return unitOutOfRange("weekday", obj.weekday);
  } else
    return false;
}
function hasInvalidOrdinalData(obj) {
  const validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validOrdinal) {
    return unitOutOfRange("ordinal", obj.ordinal);
  } else
    return false;
}
function hasInvalidGregorianData(obj) {
  const validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validMonth) {
    return unitOutOfRange("month", obj.month);
  } else if (!validDay) {
    return unitOutOfRange("day", obj.day);
  } else
    return false;
}
function hasInvalidTimeData(obj) {
  const { hour, minute, second, millisecond } = obj;
  const validHour = integerBetween(hour, 0, 23) || hour === 24 && minute === 0 && second === 0 && millisecond === 0, validMinute = integerBetween(minute, 0, 59), validSecond = integerBetween(second, 0, 59), validMillisecond = integerBetween(millisecond, 0, 999);
  if (!validHour) {
    return unitOutOfRange("hour", hour);
  } else if (!validMinute) {
    return unitOutOfRange("minute", minute);
  } else if (!validSecond) {
    return unitOutOfRange("second", second);
  } else if (!validMillisecond) {
    return unitOutOfRange("millisecond", millisecond);
  } else
    return false;
}
var nonLeapLadder, leapLadder;
var init_conversions = __esm({
  "node_modules/luxon/src/impl/conversions.js"() {
    init_util();
    init_invalid();
    init_errors();
    nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
  }
});

// node_modules/luxon/src/impl/util.js
function isUndefined(o) {
  return typeof o === "undefined";
}
function isNumber(o) {
  return typeof o === "number";
}
function isInteger(o) {
  return typeof o === "number" && o % 1 === 0;
}
function isString(o) {
  return typeof o === "string";
}
function isDate(o) {
  return Object.prototype.toString.call(o) === "[object Date]";
}
function hasRelative() {
  try {
    return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
  } catch (e) {
    return false;
  }
}
function hasLocaleWeekInfo() {
  try {
    return typeof Intl !== "undefined" && !!Intl.Locale && ("weekInfo" in Intl.Locale.prototype || "getWeekInfo" in Intl.Locale.prototype);
  } catch (e) {
    return false;
  }
}
function maybeArray(thing) {
  return Array.isArray(thing) ? thing : [thing];
}
function bestBy(arr, by, compare) {
  if (arr.length === 0) {
    return void 0;
  }
  return arr.reduce((best, next) => {
    const pair = [by(next), next];
    if (!best) {
      return pair;
    } else if (compare(best[0], pair[0]) === best[0]) {
      return best;
    } else {
      return pair;
    }
  }, null)[1];
}
function pick(obj, keys) {
  return keys.reduce((a, k) => {
    a[k] = obj[k];
    return a;
  }, {});
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}
function validateWeekSettings(settings) {
  if (settings == null) {
    return null;
  } else if (typeof settings !== "object") {
    throw new InvalidArgumentError("Week settings must be an object");
  } else {
    if (!integerBetween(settings.firstDay, 1, 7) || !integerBetween(settings.minimalDays, 1, 7) || !Array.isArray(settings.weekend) || settings.weekend.some((v) => !integerBetween(v, 1, 7))) {
      throw new InvalidArgumentError("Invalid week settings");
    }
    return {
      firstDay: settings.firstDay,
      minimalDays: settings.minimalDays,
      weekend: Array.from(settings.weekend)
    };
  }
}
function integerBetween(thing, bottom, top) {
  return isInteger(thing) && thing >= bottom && thing <= top;
}
function floorMod(x, n2) {
  return x - n2 * Math.floor(x / n2);
}
function padStart(input, n2 = 2) {
  const isNeg = input < 0;
  let padded;
  if (isNeg) {
    padded = "-" + ("" + -input).padStart(n2, "0");
  } else {
    padded = ("" + input).padStart(n2, "0");
  }
  return padded;
}
function parseInteger(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseInt(string, 10);
  }
}
function parseFloating(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseFloat(string);
  }
}
function parseMillis(fraction) {
  if (isUndefined(fraction) || fraction === null || fraction === "") {
    return void 0;
  } else {
    const f = parseFloat("0." + fraction) * 1e3;
    return Math.floor(f);
  }
}
function roundTo(number, digits, towardZero = false) {
  const factor = 10 ** digits, rounder = towardZero ? Math.trunc : Math.round;
  return rounder(number * factor) / factor;
}
function isLeapYear(year) {
  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}
function daysInMonth(year, month) {
  const modMonth = floorMod(month - 1, 12) + 1, modYear = year + (month - modMonth) / 12;
  if (modMonth === 2) {
    return isLeapYear(modYear) ? 29 : 28;
  } else {
    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
  }
}
function objToLocalTS(obj) {
  let d = Date.UTC(
    obj.year,
    obj.month - 1,
    obj.day,
    obj.hour,
    obj.minute,
    obj.second,
    obj.millisecond
  );
  if (obj.year < 100 && obj.year >= 0) {
    d = new Date(d);
    d.setUTCFullYear(obj.year, obj.month - 1, obj.day);
  }
  return +d;
}
function firstWeekOffset(year, minDaysInFirstWeek, startOfWeek) {
  const fwdlw = isoWeekdayToLocal(dayOfWeek(year, 1, minDaysInFirstWeek), startOfWeek);
  return -fwdlw + minDaysInFirstWeek - 1;
}
function weeksInWeekYear(weekYear, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const weekOffset = firstWeekOffset(weekYear, minDaysInFirstWeek, startOfWeek);
  const weekOffsetNext = firstWeekOffset(weekYear + 1, minDaysInFirstWeek, startOfWeek);
  return (daysInYear(weekYear) - weekOffset + weekOffsetNext) / 7;
}
function untruncateYear(year) {
  if (year > 99) {
    return year;
  } else
    return year > Settings.twoDigitCutoffYear ? 1900 + year : 2e3 + year;
}
function parseZoneInfo(ts, offsetFormat, locale, timeZone = null) {
  const date = new Date(ts), intlOpts = {
    hourCycle: "h23",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  };
  if (timeZone) {
    intlOpts.timeZone = timeZone;
  }
  const modified = { timeZoneName: offsetFormat, ...intlOpts };
  const parsed = new Intl.DateTimeFormat(locale, modified).formatToParts(date).find((m) => m.type.toLowerCase() === "timezonename");
  return parsed ? parsed.value : null;
}
function signedOffset(offHourStr, offMinuteStr) {
  let offHour = parseInt(offHourStr, 10);
  if (Number.isNaN(offHour)) {
    offHour = 0;
  }
  const offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
  return offHour * 60 + offMinSigned;
}
function asNumber(value) {
  const numericValue = Number(value);
  if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
    throw new InvalidArgumentError(`Invalid unit value ${value}`);
  return numericValue;
}
function normalizeObject(obj, normalizer) {
  const normalized = {};
  for (const u in obj) {
    if (hasOwnProperty(obj, u)) {
      const v = obj[u];
      if (v === void 0 || v === null)
        continue;
      normalized[normalizer(u)] = asNumber(v);
    }
  }
  return normalized;
}
function formatOffset(offset2, format) {
  const hours = Math.trunc(Math.abs(offset2 / 60)), minutes = Math.trunc(Math.abs(offset2 % 60)), sign = offset2 >= 0 ? "+" : "-";
  switch (format) {
    case "short":
      return `${sign}${padStart(hours, 2)}:${padStart(minutes, 2)}`;
    case "narrow":
      return `${sign}${hours}${minutes > 0 ? `:${minutes}` : ""}`;
    case "techie":
      return `${sign}${padStart(hours, 2)}${padStart(minutes, 2)}`;
    default:
      throw new RangeError(`Value format ${format} is out of range for property format`);
  }
}
function timeObject(obj) {
  return pick(obj, ["hour", "minute", "second", "millisecond"]);
}
var init_util = __esm({
  "node_modules/luxon/src/impl/util.js"() {
    init_errors();
    init_settings();
    init_conversions();
  }
});

// node_modules/luxon/src/impl/english.js
function months(length) {
  switch (length) {
    case "narrow":
      return [...monthsNarrow];
    case "short":
      return [...monthsShort];
    case "long":
      return [...monthsLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
    case "2-digit":
      return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    default:
      return null;
  }
}
function weekdays(length) {
  switch (length) {
    case "narrow":
      return [...weekdaysNarrow];
    case "short":
      return [...weekdaysShort];
    case "long":
      return [...weekdaysLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7"];
    default:
      return null;
  }
}
function eras(length) {
  switch (length) {
    case "narrow":
      return [...erasNarrow];
    case "short":
      return [...erasShort];
    case "long":
      return [...erasLong];
    default:
      return null;
  }
}
function meridiemForDateTime(dt) {
  return meridiems[dt.hour < 12 ? 0 : 1];
}
function weekdayForDateTime(dt, length) {
  return weekdays(length)[dt.weekday - 1];
}
function monthForDateTime(dt, length) {
  return months(length)[dt.month - 1];
}
function eraForDateTime(dt, length) {
  return eras(length)[dt.year < 0 ? 0 : 1];
}
function formatRelativeTime(unit, count, numeric = "always", narrow = false) {
  const units = {
    years: ["year", "yr."],
    quarters: ["quarter", "qtr."],
    months: ["month", "mo."],
    weeks: ["week", "wk."],
    days: ["day", "day", "days"],
    hours: ["hour", "hr."],
    minutes: ["minute", "min."],
    seconds: ["second", "sec."]
  };
  const lastable = ["hours", "minutes", "seconds"].indexOf(unit) === -1;
  if (numeric === "auto" && lastable) {
    const isDay = unit === "days";
    switch (count) {
      case 1:
        return isDay ? "tomorrow" : `next ${units[unit][0]}`;
      case -1:
        return isDay ? "yesterday" : `last ${units[unit][0]}`;
      case 0:
        return isDay ? "today" : `this ${units[unit][0]}`;
      default:
    }
  }
  const isInPast = Object.is(count, -0) || count < 0, fmtValue = Math.abs(count), singular = fmtValue === 1, lilUnits = units[unit], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit][0] : unit;
  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;
}
var monthsLong, monthsShort, monthsNarrow, weekdaysLong, weekdaysShort, weekdaysNarrow, meridiems, erasLong, erasShort, erasNarrow;
var init_english = __esm({
  "node_modules/luxon/src/impl/english.js"() {
    init_formats();
    init_util();
    monthsLong = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ];
    monthsShort = [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ];
    monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
    weekdaysLong = [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday"
    ];
    weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
    weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
    meridiems = ["AM", "PM"];
    erasLong = ["Before Christ", "Anno Domini"];
    erasShort = ["BC", "AD"];
    erasNarrow = ["B", "A"];
  }
});

// node_modules/luxon/src/impl/formatter.js
function stringifyTokens(splits, tokenToString) {
  let s2 = "";
  for (const token of splits) {
    if (token.literal) {
      s2 += token.val;
    } else {
      s2 += tokenToString(token.val);
    }
  }
  return s2;
}
var macroTokenToFormatOpts, Formatter;
var init_formatter = __esm({
  "node_modules/luxon/src/impl/formatter.js"() {
    init_english();
    init_formats();
    init_util();
    macroTokenToFormatOpts = {
      D: DATE_SHORT,
      DD: DATE_MED,
      DDD: DATE_FULL,
      DDDD: DATE_HUGE,
      t: TIME_SIMPLE,
      tt: TIME_WITH_SECONDS,
      ttt: TIME_WITH_SHORT_OFFSET,
      tttt: TIME_WITH_LONG_OFFSET,
      T: TIME_24_SIMPLE,
      TT: TIME_24_WITH_SECONDS,
      TTT: TIME_24_WITH_SHORT_OFFSET,
      TTTT: TIME_24_WITH_LONG_OFFSET,
      f: DATETIME_SHORT,
      ff: DATETIME_MED,
      fff: DATETIME_FULL,
      ffff: DATETIME_HUGE,
      F: DATETIME_SHORT_WITH_SECONDS,
      FF: DATETIME_MED_WITH_SECONDS,
      FFF: DATETIME_FULL_WITH_SECONDS,
      FFFF: DATETIME_HUGE_WITH_SECONDS
    };
    Formatter = class _Formatter {
      static create(locale, opts = {}) {
        return new _Formatter(locale, opts);
      }
      static parseFormat(fmt) {
        let current = null, currentFull = "", bracketed = false;
        const splits = [];
        for (let i = 0; i < fmt.length; i++) {
          const c = fmt.charAt(i);
          if (c === "'") {
            if (currentFull.length > 0) {
              splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
            }
            current = null;
            currentFull = "";
            bracketed = !bracketed;
          } else if (bracketed) {
            currentFull += c;
          } else if (c === current) {
            currentFull += c;
          } else {
            if (currentFull.length > 0) {
              splits.push({ literal: /^\s+$/.test(currentFull), val: currentFull });
            }
            currentFull = c;
            current = c;
          }
        }
        if (currentFull.length > 0) {
          splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
        }
        return splits;
      }
      static macroTokenToFormatOpts(token) {
        return macroTokenToFormatOpts[token];
      }
      constructor(locale, formatOpts) {
        this.opts = formatOpts;
        this.loc = locale;
        this.systemLoc = null;
      }
      formatWithSystemDefault(dt, opts) {
        if (this.systemLoc === null) {
          this.systemLoc = this.loc.redefaultToSystem();
        }
        const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });
        return df.format();
      }
      dtFormatter(dt, opts = {}) {
        return this.loc.dtFormatter(dt, { ...this.opts, ...opts });
      }
      formatDateTime(dt, opts) {
        return this.dtFormatter(dt, opts).format();
      }
      formatDateTimeParts(dt, opts) {
        return this.dtFormatter(dt, opts).formatToParts();
      }
      formatInterval(interval, opts) {
        const df = this.dtFormatter(interval.start, opts);
        return df.dtf.formatRange(interval.start.toJSDate(), interval.end.toJSDate());
      }
      resolvedOptions(dt, opts) {
        return this.dtFormatter(dt, opts).resolvedOptions();
      }
      num(n2, p = 0) {
        if (this.opts.forceSimple) {
          return padStart(n2, p);
        }
        const opts = { ...this.opts };
        if (p > 0) {
          opts.padTo = p;
        }
        return this.loc.numberFormatter(opts).format(n2);
      }
      formatDateTimeFromString(dt, fmt) {
        const knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = (opts, extract) => this.loc.extract(dt, opts, extract), formatOffset2 = (opts) => {
          if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
            return "Z";
          }
          return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
        }, meridiem = () => knownEnglish ? meridiemForDateTime(dt) : string({ hour: "numeric", hourCycle: "h12" }, "dayperiod"), month = (length, standalone) => knownEnglish ? monthForDateTime(dt, length) : string(standalone ? { month: length } : { month: length, day: "numeric" }, "month"), weekday = (length, standalone) => knownEnglish ? weekdayForDateTime(dt, length) : string(
          standalone ? { weekday: length } : { weekday: length, month: "long", day: "numeric" },
          "weekday"
        ), maybeMacro = (token) => {
          const formatOpts = _Formatter.macroTokenToFormatOpts(token);
          if (formatOpts) {
            return this.formatWithSystemDefault(dt, formatOpts);
          } else {
            return token;
          }
        }, era = (length) => knownEnglish ? eraForDateTime(dt, length) : string({ era: length }, "era"), tokenToString = (token) => {
          switch (token) {
            case "S":
              return this.num(dt.millisecond);
            case "u":
            case "SSS":
              return this.num(dt.millisecond, 3);
            case "s":
              return this.num(dt.second);
            case "ss":
              return this.num(dt.second, 2);
            case "uu":
              return this.num(Math.floor(dt.millisecond / 10), 2);
            case "uuu":
              return this.num(Math.floor(dt.millisecond / 100));
            case "m":
              return this.num(dt.minute);
            case "mm":
              return this.num(dt.minute, 2);
            case "h":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
            case "hh":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
            case "H":
              return this.num(dt.hour);
            case "HH":
              return this.num(dt.hour, 2);
            case "Z":
              return formatOffset2({ format: "narrow", allowZ: this.opts.allowZ });
            case "ZZ":
              return formatOffset2({ format: "short", allowZ: this.opts.allowZ });
            case "ZZZ":
              return formatOffset2({ format: "techie", allowZ: this.opts.allowZ });
            case "ZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "short", locale: this.loc.locale });
            case "ZZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "long", locale: this.loc.locale });
            case "z":
              return dt.zoneName;
            case "a":
              return meridiem();
            case "d":
              return useDateTimeFormatter ? string({ day: "numeric" }, "day") : this.num(dt.day);
            case "dd":
              return useDateTimeFormatter ? string({ day: "2-digit" }, "day") : this.num(dt.day, 2);
            case "c":
              return this.num(dt.weekday);
            case "ccc":
              return weekday("short", true);
            case "cccc":
              return weekday("long", true);
            case "ccccc":
              return weekday("narrow", true);
            case "E":
              return this.num(dt.weekday);
            case "EEE":
              return weekday("short", false);
            case "EEEE":
              return weekday("long", false);
            case "EEEEE":
              return weekday("narrow", false);
            case "L":
              return useDateTimeFormatter ? string({ month: "numeric", day: "numeric" }, "month") : this.num(dt.month);
            case "LL":
              return useDateTimeFormatter ? string({ month: "2-digit", day: "numeric" }, "month") : this.num(dt.month, 2);
            case "LLL":
              return month("short", true);
            case "LLLL":
              return month("long", true);
            case "LLLLL":
              return month("narrow", true);
            case "M":
              return useDateTimeFormatter ? string({ month: "numeric" }, "month") : this.num(dt.month);
            case "MM":
              return useDateTimeFormatter ? string({ month: "2-digit" }, "month") : this.num(dt.month, 2);
            case "MMM":
              return month("short", false);
            case "MMMM":
              return month("long", false);
            case "MMMMM":
              return month("narrow", false);
            case "y":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year);
            case "yy":
              return useDateTimeFormatter ? string({ year: "2-digit" }, "year") : this.num(dt.year.toString().slice(-2), 2);
            case "yyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 4);
            case "yyyyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 6);
            case "G":
              return era("short");
            case "GG":
              return era("long");
            case "GGGGG":
              return era("narrow");
            case "kk":
              return this.num(dt.weekYear.toString().slice(-2), 2);
            case "kkkk":
              return this.num(dt.weekYear, 4);
            case "W":
              return this.num(dt.weekNumber);
            case "WW":
              return this.num(dt.weekNumber, 2);
            case "n":
              return this.num(dt.localWeekNumber);
            case "nn":
              return this.num(dt.localWeekNumber, 2);
            case "ii":
              return this.num(dt.localWeekYear.toString().slice(-2), 2);
            case "iiii":
              return this.num(dt.localWeekYear, 4);
            case "o":
              return this.num(dt.ordinal);
            case "ooo":
              return this.num(dt.ordinal, 3);
            case "q":
              return this.num(dt.quarter);
            case "qq":
              return this.num(dt.quarter, 2);
            case "X":
              return this.num(Math.floor(dt.ts / 1e3));
            case "x":
              return this.num(dt.ts);
            default:
              return maybeMacro(token);
          }
        };
        return stringifyTokens(_Formatter.parseFormat(fmt), tokenToString);
      }
      formatDurationFromString(dur, fmt) {
        const tokenToField = (token) => {
          switch (token[0]) {
            case "S":
              return "millisecond";
            case "s":
              return "second";
            case "m":
              return "minute";
            case "h":
              return "hour";
            case "d":
              return "day";
            case "w":
              return "week";
            case "M":
              return "month";
            case "y":
              return "year";
            default:
              return null;
          }
        }, tokenToString = (lildur) => (token) => {
          const mapped = tokenToField(token);
          if (mapped) {
            return this.num(lildur.get(mapped), token.length);
          } else {
            return token;
          }
        }, tokens = _Formatter.parseFormat(fmt), realTokens = tokens.reduce(
          (found, { literal, val }) => literal ? found : found.concat(val),
          []
        ), collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));
        return stringifyTokens(tokens, tokenToString(collapsed));
      }
    };
  }
});

// node_modules/luxon/src/impl/regexParser.js
function combineRegexes(...regexes) {
  const full = regexes.reduce((f, r) => f + r.source, "");
  return RegExp(`^${full}$`);
}
function combineExtractors(...extractors) {
  return (m) => extractors.reduce(
    ([mergedVals, mergedZone, cursor], ex) => {
      const [val, zone, next] = ex(m, cursor);
      return [{ ...mergedVals, ...val }, zone || mergedZone, next];
    },
    [{}, null, 1]
  ).slice(0, 2);
}
function parse(s2, ...patterns) {
  if (s2 == null) {
    return [null, null];
  }
  for (const [regex, extractor] of patterns) {
    const m = regex.exec(s2);
    if (m) {
      return extractor(m);
    }
  }
  return [null, null];
}
function simpleParse(...keys) {
  return (match2, cursor) => {
    const ret = {};
    let i;
    for (i = 0; i < keys.length; i++) {
      ret[keys[i]] = parseInteger(match2[cursor + i]);
    }
    return [ret, null, cursor + i];
  };
}
function int(match2, pos, fallback) {
  const m = match2[pos];
  return isUndefined(m) ? fallback : parseInteger(m);
}
function extractISOYmd(match2, cursor) {
  const item = {
    year: int(match2, cursor),
    month: int(match2, cursor + 1, 1),
    day: int(match2, cursor + 2, 1)
  };
  return [item, null, cursor + 3];
}
function extractISOTime(match2, cursor) {
  const item = {
    hours: int(match2, cursor, 0),
    minutes: int(match2, cursor + 1, 0),
    seconds: int(match2, cursor + 2, 0),
    milliseconds: parseMillis(match2[cursor + 3])
  };
  return [item, null, cursor + 4];
}
function extractISOOffset(match2, cursor) {
  const local = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local ? null : FixedOffsetZone.instance(fullOffset);
  return [{}, zone, cursor + 3];
}
function extractIANAZone(match2, cursor) {
  const zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
  return [{}, zone, cursor + 1];
}
function extractISODuration(match2) {
  const [s2, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] = match2;
  const hasNegativePrefix = s2[0] === "-";
  const negativeSeconds = secondStr && secondStr[0] === "-";
  const maybeNegate = (num, force = false) => num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
  return [
    {
      years: maybeNegate(parseFloating(yearStr)),
      months: maybeNegate(parseFloating(monthStr)),
      weeks: maybeNegate(parseFloating(weekStr)),
      days: maybeNegate(parseFloating(dayStr)),
      hours: maybeNegate(parseFloating(hourStr)),
      minutes: maybeNegate(parseFloating(minuteStr)),
      seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
    }
  ];
}
function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  const result = {
    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
    month: monthsShort.indexOf(monthStr) + 1,
    day: parseInteger(dayStr),
    hour: parseInteger(hourStr),
    minute: parseInteger(minuteStr)
  };
  if (secondStr)
    result.second = parseInteger(secondStr);
  if (weekdayStr) {
    result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
  }
  return result;
}
function extractRFC2822(match2) {
  const [
    ,
    weekdayStr,
    dayStr,
    monthStr,
    yearStr,
    hourStr,
    minuteStr,
    secondStr,
    obsOffset,
    milOffset,
    offHourStr,
    offMinuteStr
  ] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  let offset2;
  if (obsOffset) {
    offset2 = obsOffsets[obsOffset];
  } else if (milOffset) {
    offset2 = 0;
  } else {
    offset2 = signedOffset(offHourStr, offMinuteStr);
  }
  return [result, new FixedOffsetZone(offset2)];
}
function preprocessRFC2822(s2) {
  return s2.replace(/\([^()]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
}
function extractRFC1123Or850(match2) {
  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function extractASCII(match2) {
  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function parseISODate(s2) {
  return parse(
    s2,
    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],
    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],
    [isoTimeCombinedRegex, extractISOTimeAndOffset]
  );
}
function parseRFC2822Date(s2) {
  return parse(preprocessRFC2822(s2), [rfc2822, extractRFC2822]);
}
function parseHTTPDate(s2) {
  return parse(
    s2,
    [rfc1123, extractRFC1123Or850],
    [rfc850, extractRFC1123Or850],
    [ascii, extractASCII]
  );
}
function parseISODuration(s2) {
  return parse(s2, [isoDuration, extractISODuration]);
}
function parseISOTimeOnly(s2) {
  return parse(s2, [isoTimeOnly, extractISOTimeOnly]);
}
function parseSQL(s2) {
  return parse(
    s2,
    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]
  );
}
var ianaRegex, offsetRegex, isoExtendedZone, isoTimeBaseRegex, isoTimeRegex, isoTimeExtensionRegex, isoYmdRegex, isoWeekRegex, isoOrdinalRegex, extractISOWeekData, extractISOOrdinalData, sqlYmdRegex, sqlTimeRegex, sqlTimeExtensionRegex, isoTimeOnly, isoDuration, obsOffsets, rfc2822, rfc1123, rfc850, ascii, isoYmdWithTimeExtensionRegex, isoWeekWithTimeExtensionRegex, isoOrdinalWithTimeExtensionRegex, isoTimeCombinedRegex, extractISOYmdTimeAndOffset, extractISOWeekTimeAndOffset, extractISOOrdinalDateAndTime, extractISOTimeAndOffset, extractISOTimeOnly, sqlYmdWithTimeExtensionRegex, sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone;
var init_regexParser = __esm({
  "node_modules/luxon/src/impl/regexParser.js"() {
    init_util();
    init_english();
    init_fixedOffsetZone();
    init_IANAZone();
    ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;
    offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
    isoExtendedZone = `(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;
    isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
    isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);
    isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);
    isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
    isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
    isoOrdinalRegex = /(\d{4})-?(\d{3})/;
    extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
    extractISOOrdinalData = simpleParse("year", "ordinal");
    sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
    sqlTimeRegex = RegExp(
      `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`
    );
    sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);
    isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);
    isoDuration = /^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;
    obsOffsets = {
      GMT: 0,
      EDT: -4 * 60,
      EST: -5 * 60,
      CDT: -5 * 60,
      CST: -6 * 60,
      MDT: -6 * 60,
      MST: -7 * 60,
      PDT: -7 * 60,
      PST: -8 * 60
    };
    rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
    rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
    rfc850 = /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
    ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
    isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
    isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
    isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
    isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
    extractISOYmdTimeAndOffset = combineExtractors(
      extractISOYmd,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOWeekTimeAndOffset = combineExtractors(
      extractISOWeekData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOOrdinalDateAndTime = combineExtractors(
      extractISOOrdinalData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeAndOffset = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeOnly = combineExtractors(extractISOTime);
    sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
    sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
    extractISOTimeOffsetAndIANAZone = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
  }
});

// node_modules/luxon/src/duration.js
function clone(dur, alts, clear = false) {
  const conf = {
    values: clear ? alts.values : { ...dur.values, ...alts.values || {} },
    loc: dur.loc.clone(alts.loc),
    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,
    matrix: alts.matrix || dur.matrix
  };
  return new Duration(conf);
}
function durationToMillis(matrix, vals) {
  var _a;
  let sum = (_a = vals.milliseconds) != null ? _a : 0;
  for (const unit of reverseUnits.slice(1)) {
    if (vals[unit]) {
      sum += vals[unit] * matrix[unit]["milliseconds"];
    }
  }
  return sum;
}
function normalizeValues(matrix, vals) {
  const factor = durationToMillis(matrix, vals) < 0 ? -1 : 1;
  orderedUnits.reduceRight((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const previousVal = vals[previous] * factor;
        const conv = matrix[current][previous];
        const rollUp = Math.floor(previousVal / conv);
        vals[current] += rollUp * factor;
        vals[previous] -= rollUp * conv * factor;
      }
      return current;
    } else {
      return previous;
    }
  }, null);
  orderedUnits.reduce((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const fraction = vals[previous] % 1;
        vals[previous] -= fraction;
        vals[current] += fraction * matrix[previous][current];
      }
      return current;
    } else {
      return previous;
    }
  }, null);
}
function removeZeroes(vals) {
  const newVals = {};
  for (const [key, value] of Object.entries(vals)) {
    if (value !== 0) {
      newVals[key] = value;
    }
  }
  return newVals;
}
var INVALID, lowOrderMatrix, casualMatrix, daysInYearAccurate, daysInMonthAccurate, accurateMatrix, orderedUnits, reverseUnits, Duration;
var init_duration = __esm({
  "node_modules/luxon/src/duration.js"() {
    init_errors();
    init_formatter();
    init_invalid();
    init_locale();
    init_regexParser();
    init_util();
    init_settings();
    init_datetime();
    INVALID = "Invalid Duration";
    lowOrderMatrix = {
      weeks: {
        days: 7,
        hours: 7 * 24,
        minutes: 7 * 24 * 60,
        seconds: 7 * 24 * 60 * 60,
        milliseconds: 7 * 24 * 60 * 60 * 1e3
      },
      days: {
        hours: 24,
        minutes: 24 * 60,
        seconds: 24 * 60 * 60,
        milliseconds: 24 * 60 * 60 * 1e3
      },
      hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
      minutes: { seconds: 60, milliseconds: 60 * 1e3 },
      seconds: { milliseconds: 1e3 }
    };
    casualMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: 52,
        days: 365,
        hours: 365 * 24,
        minutes: 365 * 24 * 60,
        seconds: 365 * 24 * 60 * 60,
        milliseconds: 365 * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: 13,
        days: 91,
        hours: 91 * 24,
        minutes: 91 * 24 * 60,
        seconds: 91 * 24 * 60 * 60,
        milliseconds: 91 * 24 * 60 * 60 * 1e3
      },
      months: {
        weeks: 4,
        days: 30,
        hours: 30 * 24,
        minutes: 30 * 24 * 60,
        seconds: 30 * 24 * 60 * 60,
        milliseconds: 30 * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    daysInYearAccurate = 146097 / 400;
    daysInMonthAccurate = 146097 / 4800;
    accurateMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: daysInYearAccurate / 7,
        days: daysInYearAccurate,
        hours: daysInYearAccurate * 24,
        minutes: daysInYearAccurate * 24 * 60,
        seconds: daysInYearAccurate * 24 * 60 * 60,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: daysInYearAccurate / 28,
        days: daysInYearAccurate / 4,
        hours: daysInYearAccurate * 24 / 4,
        minutes: daysInYearAccurate * 24 * 60 / 4,
        seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
      },
      months: {
        weeks: daysInMonthAccurate / 7,
        days: daysInMonthAccurate,
        hours: daysInMonthAccurate * 24,
        minutes: daysInMonthAccurate * 24 * 60,
        seconds: daysInMonthAccurate * 24 * 60 * 60,
        milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    orderedUnits = [
      "years",
      "quarters",
      "months",
      "weeks",
      "days",
      "hours",
      "minutes",
      "seconds",
      "milliseconds"
    ];
    reverseUnits = orderedUnits.slice(0).reverse();
    Duration = class _Duration {
      /**
       * @private
       */
      constructor(config) {
        const accurate = config.conversionAccuracy === "longterm" || false;
        let matrix = accurate ? accurateMatrix : casualMatrix;
        if (config.matrix) {
          matrix = config.matrix;
        }
        this.values = config.values;
        this.loc = config.loc || Locale.create();
        this.conversionAccuracy = accurate ? "longterm" : "casual";
        this.invalid = config.invalid || null;
        this.matrix = matrix;
        this.isLuxonDuration = true;
      }
      /**
       * Create Duration from a number of milliseconds.
       * @param {number} count of milliseconds
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      static fromMillis(count, opts) {
        return _Duration.fromObject({ milliseconds: count }, opts);
      }
      /**
       * Create a Duration from a JavaScript object with keys like 'years' and 'hours'.
       * If this object is empty then a zero milliseconds duration is returned.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.years
       * @param {number} obj.quarters
       * @param {number} obj.months
       * @param {number} obj.weeks
       * @param {number} obj.days
       * @param {number} obj.hours
       * @param {number} obj.minutes
       * @param {number} obj.seconds
       * @param {number} obj.milliseconds
       * @param {Object} [opts=[]] - options for creating this Duration
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the custom conversion system to use
       * @return {Duration}
       */
      static fromObject(obj, opts = {}) {
        if (obj == null || typeof obj !== "object") {
          throw new InvalidArgumentError(
            `Duration.fromObject: argument expected to be an object, got ${obj === null ? "null" : typeof obj}`
          );
        }
        return new _Duration({
          values: normalizeObject(obj, _Duration.normalizeUnit),
          loc: Locale.fromObject(opts),
          conversionAccuracy: opts.conversionAccuracy,
          matrix: opts.matrix
        });
      }
      /**
       * Create a Duration from DurationLike.
       *
       * @param {Object | number | Duration} durationLike
       * One of:
       * - object with keys like 'years' and 'hours'.
       * - number representing milliseconds
       * - Duration instance
       * @return {Duration}
       */
      static fromDurationLike(durationLike) {
        if (isNumber(durationLike)) {
          return _Duration.fromMillis(durationLike);
        } else if (_Duration.isDuration(durationLike)) {
          return durationLike;
        } else if (typeof durationLike === "object") {
          return _Duration.fromObject(durationLike);
        } else {
          throw new InvalidArgumentError(
            `Unknown duration argument ${durationLike} of type ${typeof durationLike}`
          );
        }
      }
      /**
       * Create a Duration from an ISO 8601 duration string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the preset conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromISO('P3Y6M1W4DT12H30M5S').toObject() //=> { years: 3, months: 6, weeks: 1, days: 4, hours: 12, minutes: 30, seconds: 5 }
       * @example Duration.fromISO('PT23H').toObject() //=> { hours: 23 }
       * @example Duration.fromISO('P5Y3M').toObject() //=> { years: 5, months: 3 }
       * @return {Duration}
       */
      static fromISO(text, opts) {
        const [parsed] = parseISODuration(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create a Duration from an ISO 8601 time string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @example Duration.fromISOTime('11:22:33.444').toObject() //=> { hours: 11, minutes: 22, seconds: 33, milliseconds: 444 }
       * @example Duration.fromISOTime('11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @return {Duration}
       */
      static fromISOTime(text, opts) {
        const [parsed] = parseISOTimeOnly(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create an invalid Duration.
       * @param {string} reason - simple string of why this datetime is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Duration}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDurationError(invalid);
        } else {
          return new _Duration({ invalid });
        }
      }
      /**
       * @private
       */
      static normalizeUnit(unit) {
        const normalized = {
          year: "years",
          years: "years",
          quarter: "quarters",
          quarters: "quarters",
          month: "months",
          months: "months",
          week: "weeks",
          weeks: "weeks",
          day: "days",
          days: "days",
          hour: "hours",
          hours: "hours",
          minute: "minutes",
          minutes: "minutes",
          second: "seconds",
          seconds: "seconds",
          millisecond: "milliseconds",
          milliseconds: "milliseconds"
        }[unit ? unit.toLowerCase() : unit];
        if (!normalized)
          throw new InvalidUnitError(unit);
        return normalized;
      }
      /**
       * Check if an object is a Duration. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDuration(o) {
        return o && o.isLuxonDuration || false;
      }
      /**
       * Get  the locale of a Duration, such 'en-GB'
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a Duration, such 'beng'. The numbering system is used when formatting the Duration
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Returns a string representation of this Duration formatted according to the specified format string. You may use these tokens:
       * * `S` for milliseconds
       * * `s` for seconds
       * * `m` for minutes
       * * `h` for hours
       * * `d` for days
       * * `w` for weeks
       * * `M` for months
       * * `y` for years
       * Notes:
       * * Add padding by repeating the token, e.g. "yy" pads the years to two digits, "hhhh" pads the hours out to four digits
       * * Tokens can be escaped by wrapping with single quotes.
       * * The duration will be converted to the set of units in the format string using {@link Duration#shiftTo} and the Durations's conversion accuracy setting.
       * @param {string} fmt - the format string
       * @param {Object} opts - options
       * @param {boolean} [opts.floor=true] - floor numerical values
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("y d s") //=> "1 6 2"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("yy dd sss") //=> "01 06 002"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("M S") //=> "12 518402000"
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        const fmtOpts = {
          ...opts,
          floor: opts.round !== false && opts.floor !== false
        };
        return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID;
      }
      /**
       * Returns a string representation of a Duration with all units included.
       * To modify its behavior, use `listStyle` and any Intl.NumberFormat option, though `unitDisplay` is especially relevant.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#options
       * @param {Object} opts - Formatting options. Accepts the same keys as the options parameter of the native `Intl.NumberFormat` constructor, as well as `listStyle`.
       * @param {string} [opts.listStyle='narrow'] - How to format the merged list. Corresponds to the `style` property of the options parameter of the native `Intl.ListFormat` constructor.
       * @example
       * ```js
       * var dur = Duration.fromObject({ days: 1, hours: 5, minutes: 6 })
       * dur.toHuman() //=> '1 day, 5 hours, 6 minutes'
       * dur.toHuman({ listStyle: "long" }) //=> '1 day, 5 hours, and 6 minutes'
       * dur.toHuman({ unitDisplay: "short" }) //=> '1 day, 5 hr, 6 min'
       * ```
       */
      toHuman(opts = {}) {
        if (!this.isValid)
          return INVALID;
        const l2 = orderedUnits.map((unit) => {
          const val = this.values[unit];
          if (isUndefined(val)) {
            return null;
          }
          return this.loc.numberFormatter({ style: "unit", unitDisplay: "long", ...opts, unit: unit.slice(0, -1) }).format(val);
        }).filter((n2) => n2);
        return this.loc.listFormatter({ type: "conjunction", style: opts.listStyle || "narrow", ...opts }).format(l2);
      }
      /**
       * Returns a JavaScript object with this Duration's values.
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toObject() //=> { years: 1, days: 6, seconds: 2 }
       * @return {Object}
       */
      toObject() {
        if (!this.isValid)
          return {};
        return { ...this.values };
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromObject({ years: 3, seconds: 45 }).toISO() //=> 'P3YT45S'
       * @example Duration.fromObject({ months: 4, seconds: 45 }).toISO() //=> 'P4MT45S'
       * @example Duration.fromObject({ months: 5 }).toISO() //=> 'P5M'
       * @example Duration.fromObject({ minutes: 5 }).toISO() //=> 'PT5M'
       * @example Duration.fromObject({ milliseconds: 6 }).toISO() //=> 'PT0.006S'
       * @return {string}
       */
      toISO() {
        if (!this.isValid)
          return null;
        let s2 = "P";
        if (this.years !== 0)
          s2 += this.years + "Y";
        if (this.months !== 0 || this.quarters !== 0)
          s2 += this.months + this.quarters * 3 + "M";
        if (this.weeks !== 0)
          s2 += this.weeks + "W";
        if (this.days !== 0)
          s2 += this.days + "D";
        if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
          s2 += "T";
        if (this.hours !== 0)
          s2 += this.hours + "H";
        if (this.minutes !== 0)
          s2 += this.minutes + "M";
        if (this.seconds !== 0 || this.milliseconds !== 0)
          s2 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
        if (s2 === "P")
          s2 += "T0S";
        return s2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration, formatted as a time of day.
       * Note that this will return null if the duration is invalid, negative, or equal to or greater than 24 hours.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example Duration.fromObject({ hours: 11 }).toISOTime() //=> '11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressMilliseconds: true }) //=> '11:00:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressSeconds: true }) //=> '11:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ includePrefix: true }) //=> 'T11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ format: 'basic' }) //=> '110000.000'
       * @return {string}
       */
      toISOTime(opts = {}) {
        if (!this.isValid)
          return null;
        const millis = this.toMillis();
        if (millis < 0 || millis >= 864e5)
          return null;
        opts = {
          suppressMilliseconds: false,
          suppressSeconds: false,
          includePrefix: false,
          format: "extended",
          ...opts,
          includeOffset: false
        };
        const dateTime = DateTime.fromMillis(millis, { zone: "UTC" });
        return dateTime.toISOTime(opts);
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in debugging.
       * @return {string}
       */
      toString() {
        return this.toISO();
      }
      /**
       * Returns a string representation of this Duration appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Duration { values: ${JSON.stringify(this.values)} }`;
        } else {
          return `Duration { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns an milliseconds value of this Duration.
       * @return {number}
       */
      toMillis() {
        if (!this.isValid)
          return NaN;
        return durationToMillis(this.matrix, this.values);
      }
      /**
       * Returns an milliseconds value of this Duration. Alias of {@link toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Make this Duration longer by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration), result = {};
        for (const k of orderedUnits) {
          if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {
            result[k] = dur.get(k) + this.get(k);
          }
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Make this Duration shorter by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration);
        return this.plus(dur.negate());
      }
      /**
       * Scale this Duration by the specified amount. Return a newly-constructed Duration.
       * @param {function} fn - The function to apply to each unit. Arity is 1 or 2: the value of the unit and, optionally, the unit name. Must return a number.
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits(x => x * 2) //=> { hours: 2, minutes: 60 }
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits((x, u) => u === "hours" ? x * 2 : x) //=> { hours: 2, minutes: 30 }
       * @return {Duration}
       */
      mapUnits(fn) {
        if (!this.isValid)
          return this;
        const result = {};
        for (const k of Object.keys(this.values)) {
          result[k] = asNumber(fn(this.values[k], k));
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example Duration.fromObject({years: 2, days: 3}).get('years') //=> 2
       * @example Duration.fromObject({years: 2, days: 3}).get('months') //=> 0
       * @example Duration.fromObject({years: 2, days: 3}).get('days') //=> 3
       * @return {number}
       */
      get(unit) {
        return this[_Duration.normalizeUnit(unit)];
      }
      /**
       * "Set" the values of specified units. Return a newly-constructed Duration.
       * @param {Object} values - a mapping of units to numbers
       * @example dur.set({ years: 2017 })
       * @example dur.set({ hours: 8, minutes: 30 })
       * @return {Duration}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const mixed = { ...this.values, ...normalizeObject(values, _Duration.normalizeUnit) };
        return clone(this, { values: mixed });
      }
      /**
       * "Set" the locale and/or numberingSystem.  Returns a newly-constructed Duration.
       * @example dur.reconfigure({ locale: 'en-GB' })
       * @return {Duration}
       */
      reconfigure({ locale, numberingSystem, conversionAccuracy, matrix } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem });
        const opts = { loc, matrix, conversionAccuracy };
        return clone(this, opts);
      }
      /**
       * Return the length of the duration in the specified unit.
       * @param {string} unit - a unit such as 'minutes' or 'days'
       * @example Duration.fromObject({years: 1}).as('days') //=> 365
       * @example Duration.fromObject({years: 1}).as('months') //=> 12
       * @example Duration.fromObject({hours: 60}).as('days') //=> 2.5
       * @return {number}
       */
      as(unit) {
        return this.isValid ? this.shiftTo(unit).get(unit) : NaN;
      }
      /**
       * Reduce this Duration to its canonical representation in its current units.
       * Assuming the overall value of the Duration is positive, this means:
       * - excessive values for lower-order units are converted to higher-order units (if possible, see first and second example)
       * - negative lower-order units are converted to higher order units (there must be such a higher order unit, otherwise
       *   the overall value would be negative, see third example)
       * - fractional values for higher-order units are converted to lower-order units (if possible, see fourth example)
       *
       * If the overall value is negative, the result of this method is equivalent to `this.negate().normalize().negate()`.
       * @example Duration.fromObject({ years: 2, days: 5000 }).normalize().toObject() //=> { years: 15, days: 255 }
       * @example Duration.fromObject({ days: 5000 }).normalize().toObject() //=> { days: 5000 }
       * @example Duration.fromObject({ hours: 12, minutes: -45 }).normalize().toObject() //=> { hours: 11, minutes: 15 }
       * @example Duration.fromObject({ years: 2.5, days: 0, hours: 0 }).normalize().toObject() //=> { years: 2, days: 182, hours: 12 }
       * @return {Duration}
       */
      normalize() {
        if (!this.isValid)
          return this;
        const vals = this.toObject();
        normalizeValues(this.matrix, vals);
        return clone(this, { values: vals }, true);
      }
      /**
       * Rescale units to its largest representation
       * @example Duration.fromObject({ milliseconds: 90000 }).rescale().toObject() //=> { minutes: 1, seconds: 30 }
       * @return {Duration}
       */
      rescale() {
        if (!this.isValid)
          return this;
        const vals = removeZeroes(this.normalize().shiftToAll().toObject());
        return clone(this, { values: vals }, true);
      }
      /**
       * Convert this Duration into its representation in a different set of units.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).shiftTo('minutes', 'milliseconds').toObject() //=> { minutes: 60, milliseconds: 30000 }
       * @return {Duration}
       */
      shiftTo(...units) {
        if (!this.isValid)
          return this;
        if (units.length === 0) {
          return this;
        }
        units = units.map((u) => _Duration.normalizeUnit(u));
        const built = {}, accumulated = {}, vals = this.toObject();
        let lastUnit;
        for (const k of orderedUnits) {
          if (units.indexOf(k) >= 0) {
            lastUnit = k;
            let own = 0;
            for (const ak in accumulated) {
              own += this.matrix[ak][k] * accumulated[ak];
              accumulated[ak] = 0;
            }
            if (isNumber(vals[k])) {
              own += vals[k];
            }
            const i = Math.trunc(own);
            built[k] = i;
            accumulated[k] = (own * 1e3 - i * 1e3) / 1e3;
          } else if (isNumber(vals[k])) {
            accumulated[k] = vals[k];
          }
        }
        for (const key in accumulated) {
          if (accumulated[key] !== 0) {
            built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
          }
        }
        normalizeValues(this.matrix, built);
        return clone(this, { values: built }, true);
      }
      /**
       * Shift this Duration to all available units.
       * Same as shiftTo("years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds")
       * @return {Duration}
       */
      shiftToAll() {
        if (!this.isValid)
          return this;
        return this.shiftTo(
          "years",
          "months",
          "weeks",
          "days",
          "hours",
          "minutes",
          "seconds",
          "milliseconds"
        );
      }
      /**
       * Return the negative of this Duration.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).negate().toObject() //=> { hours: -1, seconds: -30 }
       * @return {Duration}
       */
      negate() {
        if (!this.isValid)
          return this;
        const negated = {};
        for (const k of Object.keys(this.values)) {
          negated[k] = this.values[k] === 0 ? 0 : -this.values[k];
        }
        return clone(this, { values: negated }, true);
      }
      /**
       * Get the years.
       * @type {number}
       */
      get years() {
        return this.isValid ? this.values.years || 0 : NaN;
      }
      /**
       * Get the quarters.
       * @type {number}
       */
      get quarters() {
        return this.isValid ? this.values.quarters || 0 : NaN;
      }
      /**
       * Get the months.
       * @type {number}
       */
      get months() {
        return this.isValid ? this.values.months || 0 : NaN;
      }
      /**
       * Get the weeks
       * @type {number}
       */
      get weeks() {
        return this.isValid ? this.values.weeks || 0 : NaN;
      }
      /**
       * Get the days.
       * @type {number}
       */
      get days() {
        return this.isValid ? this.values.days || 0 : NaN;
      }
      /**
       * Get the hours.
       * @type {number}
       */
      get hours() {
        return this.isValid ? this.values.hours || 0 : NaN;
      }
      /**
       * Get the minutes.
       * @type {number}
       */
      get minutes() {
        return this.isValid ? this.values.minutes || 0 : NaN;
      }
      /**
       * Get the seconds.
       * @return {number}
       */
      get seconds() {
        return this.isValid ? this.values.seconds || 0 : NaN;
      }
      /**
       * Get the milliseconds.
       * @return {number}
       */
      get milliseconds() {
        return this.isValid ? this.values.milliseconds || 0 : NaN;
      }
      /**
       * Returns whether the Duration is invalid. Invalid durations are returned by diff operations
       * on invalid DateTimes or Intervals.
       * @return {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this Duration became invalid, or null if the Duration is valid
       * @return {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Duration became invalid, or null if the Duration is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Equality check
       * Two Durations are equal iff they have the same units and the same values for each unit.
       * @param {Duration} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        if (!this.loc.equals(other.loc)) {
          return false;
        }
        function eq(v1, v2) {
          if (v1 === void 0 || v1 === 0)
            return v2 === void 0 || v2 === 0;
          return v1 === v2;
        }
        for (const u of orderedUnits) {
          if (!eq(this.values[u], other.values[u])) {
            return false;
          }
        }
        return true;
      }
    };
  }
});

// node_modules/luxon/src/interval.js
function validateStartEnd(start, end) {
  if (!start || !start.isValid) {
    return Interval.invalid("missing or invalid start");
  } else if (!end || !end.isValid) {
    return Interval.invalid("missing or invalid end");
  } else if (end < start) {
    return Interval.invalid(
      "end before start",
      `The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`
    );
  } else {
    return null;
  }
}
var INVALID2, Interval;
var init_interval = __esm({
  "node_modules/luxon/src/interval.js"() {
    init_datetime();
    init_duration();
    init_settings();
    init_errors();
    init_invalid();
    init_formatter();
    init_formats();
    INVALID2 = "Invalid Interval";
    Interval = class _Interval {
      /**
       * @private
       */
      constructor(config) {
        this.s = config.start;
        this.e = config.end;
        this.invalid = config.invalid || null;
        this.isLuxonInterval = true;
      }
      /**
       * Create an invalid Interval.
       * @param {string} reason - simple string of why this Interval is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Interval}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidIntervalError(invalid);
        } else {
          return new _Interval({ invalid });
        }
      }
      /**
       * Create an Interval from a start DateTime and an end DateTime. Inclusive of the start but not the end.
       * @param {DateTime|Date|Object} start
       * @param {DateTime|Date|Object} end
       * @return {Interval}
       */
      static fromDateTimes(start, end) {
        const builtStart = friendlyDateTime(start), builtEnd = friendlyDateTime(end);
        const validateError = validateStartEnd(builtStart, builtEnd);
        if (validateError == null) {
          return new _Interval({
            start: builtStart,
            end: builtEnd
          });
        } else {
          return validateError;
        }
      }
      /**
       * Create an Interval from a start DateTime and a Duration to extend to.
       * @param {DateTime|Date|Object} start
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static after(start, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start);
        return _Interval.fromDateTimes(dt, dt.plus(dur));
      }
      /**
       * Create an Interval from an end DateTime and a Duration to extend backwards to.
       * @param {DateTime|Date|Object} end
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static before(end, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
        return _Interval.fromDateTimes(dt.minus(dur), dt);
      }
      /**
       * Create an Interval from an ISO 8601 string.
       * Accepts `<start>/<end>`, `<start>/<duration>`, and `<duration>/<end>` formats.
       * @param {string} text - the ISO string to parse
       * @param {Object} [opts] - options to pass {@link DateTime#fromISO} and optionally {@link Duration#fromISO}
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {Interval}
       */
      static fromISO(text, opts) {
        const [s2, e] = (text || "").split("/", 2);
        if (s2 && e) {
          let start, startIsValid;
          try {
            start = DateTime.fromISO(s2, opts);
            startIsValid = start.isValid;
          } catch (e2) {
            startIsValid = false;
          }
          let end, endIsValid;
          try {
            end = DateTime.fromISO(e, opts);
            endIsValid = end.isValid;
          } catch (e2) {
            endIsValid = false;
          }
          if (startIsValid && endIsValid) {
            return _Interval.fromDateTimes(start, end);
          }
          if (startIsValid) {
            const dur = Duration.fromISO(e, opts);
            if (dur.isValid) {
              return _Interval.after(start, dur);
            }
          } else if (endIsValid) {
            const dur = Duration.fromISO(s2, opts);
            if (dur.isValid) {
              return _Interval.before(end, dur);
            }
          }
        }
        return _Interval.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
      }
      /**
       * Check if an object is an Interval. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isInterval(o) {
        return o && o.isLuxonInterval || false;
      }
      /**
       * Returns the start of the Interval
       * @type {DateTime}
       */
      get start() {
        return this.isValid ? this.s : null;
      }
      /**
       * Returns the end of the Interval
       * @type {DateTime}
       */
      get end() {
        return this.isValid ? this.e : null;
      }
      /**
       * Returns whether this Interval's end is at least its start, meaning that the Interval isn't 'backwards'.
       * @type {boolean}
       */
      get isValid() {
        return this.invalidReason === null;
      }
      /**
       * Returns an error code if this Interval is invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Interval became invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Returns the length of the Interval in the specified unit.
       * @param {string} unit - the unit (such as 'hours' or 'days') to return the length in.
       * @return {number}
       */
      length(unit = "milliseconds") {
        return this.isValid ? this.toDuration(...[unit]).get(unit) : NaN;
      }
      /**
       * Returns the count of minutes, hours, days, months, or years included in the Interval, even in part.
       * Unlike {@link Interval#length} this counts sections of the calendar, not periods of time, e.g. specifying 'day'
       * asks 'what dates are included in this interval?', not 'how many days long is this interval?'
       * @param {string} [unit='milliseconds'] - the unit of time to count.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; this operation will always use the locale of the start DateTime
       * @return {number}
       */
      count(unit = "milliseconds", opts) {
        if (!this.isValid)
          return NaN;
        const start = this.start.startOf(unit, opts);
        let end;
        if (opts == null ? void 0 : opts.useLocaleWeeks) {
          end = this.end.reconfigure({ locale: start.locale });
        } else {
          end = this.end;
        }
        end = end.startOf(unit, opts);
        return Math.floor(end.diff(start, unit).get(unit)) + (end.valueOf() !== this.end.valueOf());
      }
      /**
       * Returns whether this Interval's start and end are both in the same unit of time
       * @param {string} unit - the unit of time to check sameness on
       * @return {boolean}
       */
      hasSame(unit) {
        return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;
      }
      /**
       * Return whether this Interval has the same start and end DateTimes.
       * @return {boolean}
       */
      isEmpty() {
        return this.s.valueOf() === this.e.valueOf();
      }
      /**
       * Return whether this Interval's start is after the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isAfter(dateTime) {
        if (!this.isValid)
          return false;
        return this.s > dateTime;
      }
      /**
       * Return whether this Interval's end is before the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isBefore(dateTime) {
        if (!this.isValid)
          return false;
        return this.e <= dateTime;
      }
      /**
       * Return whether this Interval contains the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      contains(dateTime) {
        if (!this.isValid)
          return false;
        return this.s <= dateTime && this.e > dateTime;
      }
      /**
       * "Sets" the start and/or end dates. Returns a newly-constructed Interval.
       * @param {Object} values - the values to set
       * @param {DateTime} values.start - the starting DateTime
       * @param {DateTime} values.end - the ending DateTime
       * @return {Interval}
       */
      set({ start, end } = {}) {
        if (!this.isValid)
          return this;
        return _Interval.fromDateTimes(start || this.s, end || this.e);
      }
      /**
       * Split this Interval at each of the specified DateTimes
       * @param {...DateTime} dateTimes - the unit of time to count.
       * @return {Array}
       */
      splitAt(...dateTimes) {
        if (!this.isValid)
          return [];
        const sorted = dateTimes.map(friendlyDateTime).filter((d) => this.contains(d)).sort((a, b) => a.toMillis() - b.toMillis()), results = [];
        let { s: s2 } = this, i = 0;
        while (s2 < this.e) {
          const added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          i += 1;
        }
        return results;
      }
      /**
       * Split this Interval into smaller Intervals, each of the specified length.
       * Left over time is grouped into a smaller interval
       * @param {Duration|Object|number} duration - The length of each resulting interval.
       * @return {Array}
       */
      splitBy(duration) {
        const dur = Duration.fromDurationLike(duration);
        if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
          return [];
        }
        let { s: s2 } = this, idx = 1, next;
        const results = [];
        while (s2 < this.e) {
          const added = this.start.plus(dur.mapUnits((x) => x * idx));
          next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          idx += 1;
        }
        return results;
      }
      /**
       * Split this Interval into the specified number of smaller intervals.
       * @param {number} numberOfParts - The number of Intervals to divide the Interval into.
       * @return {Array}
       */
      divideEqually(numberOfParts) {
        if (!this.isValid)
          return [];
        return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
      }
      /**
       * Return whether this Interval overlaps with the specified Interval
       * @param {Interval} other
       * @return {boolean}
       */
      overlaps(other) {
        return this.e > other.s && this.s < other.e;
      }
      /**
       * Return whether this Interval's end is adjacent to the specified Interval's start.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsStart(other) {
        if (!this.isValid)
          return false;
        return +this.e === +other.s;
      }
      /**
       * Return whether this Interval's start is adjacent to the specified Interval's end.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsEnd(other) {
        if (!this.isValid)
          return false;
        return +other.e === +this.s;
      }
      /**
       * Return whether this Interval engulfs the start and end of the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      engulfs(other) {
        if (!this.isValid)
          return false;
        return this.s <= other.s && this.e >= other.e;
      }
      /**
       * Return whether this Interval has the same start and end as the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        return this.s.equals(other.s) && this.e.equals(other.e);
      }
      /**
       * Return an Interval representing the intersection of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the maximum start time and the minimum end time of the two Intervals.
       * Returns null if the intersection is empty, meaning, the intervals don't intersect.
       * @param {Interval} other
       * @return {Interval}
       */
      intersection(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
        if (s2 >= e) {
          return null;
        } else {
          return _Interval.fromDateTimes(s2, e);
        }
      }
      /**
       * Return an Interval representing the union of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the minimum start time and the maximum end time of the two Intervals.
       * @param {Interval} other
       * @return {Interval}
       */
      union(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
        return _Interval.fromDateTimes(s2, e);
      }
      /**
       * Merge an array of Intervals into a equivalent minimal set of Intervals.
       * Combines overlapping and adjacent Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static merge(intervals) {
        const [found, final] = intervals.sort((a, b) => a.s - b.s).reduce(
          ([sofar, current], item) => {
            if (!current) {
              return [sofar, item];
            } else if (current.overlaps(item) || current.abutsStart(item)) {
              return [sofar, current.union(item)];
            } else {
              return [sofar.concat([current]), item];
            }
          },
          [[], null]
        );
        if (final) {
          found.push(final);
        }
        return found;
      }
      /**
       * Return an array of Intervals representing the spans of time that only appear in one of the specified Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static xor(intervals) {
        let start = null, currentCount = 0;
        const results = [], ends = intervals.map((i) => [
          { time: i.s, type: "s" },
          { time: i.e, type: "e" }
        ]), flattened = Array.prototype.concat(...ends), arr = flattened.sort((a, b) => a.time - b.time);
        for (const i of arr) {
          currentCount += i.type === "s" ? 1 : -1;
          if (currentCount === 1) {
            start = i.time;
          } else {
            if (start && +start !== +i.time) {
              results.push(_Interval.fromDateTimes(start, i.time));
            }
            start = null;
          }
        }
        return _Interval.merge(results);
      }
      /**
       * Return an Interval representing the span of time in this Interval that doesn't overlap with any of the specified Intervals.
       * @param {...Interval} intervals
       * @return {Array}
       */
      difference(...intervals) {
        return _Interval.xor([this].concat(intervals)).map((i) => this.intersection(i)).filter((i) => i && !i.isEmpty());
      }
      /**
       * Returns a string representation of this Interval appropriate for debugging.
       * @return {string}
       */
      toString() {
        if (!this.isValid)
          return INVALID2;
        return `[${this.s.toISO()} \u2013 ${this.e.toISO()})`;
      }
      /**
       * Returns a string representation of this Interval appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`;
        } else {
          return `Interval { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns a localized string representing this Interval. Accepts the same options as the
       * Intl.DateTimeFormat constructor and any presets defined by Luxon, such as
       * {@link DateTime.DATE_FULL} or {@link DateTime.TIME_SIMPLE}. The exact behavior of this method
       * is browser-specific, but in general it will return an appropriate representation of the
       * Interval in the assigned locale. Defaults to the system's locale if no locale has been
       * specified.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {Object} [formatOpts=DateTime.DATE_SHORT] - Either a DateTime preset or
       * Intl.DateTimeFormat constructor options.
       * @param {Object} opts - Options to override the configuration of the start DateTime.
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(); //=> 11/7/2022 – 11/8/2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL); //=> November 7 – 8, 2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL, { locale: 'fr-FR' }); //=> 7–8 novembre 2022
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString(DateTime.TIME_SIMPLE); //=> 6:00 – 8:00 PM
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> Mon, Nov 07, 6:00 – 8:00 p
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.s.loc.clone(opts), formatOpts).formatInterval(this) : INVALID2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Interval.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISO(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of date of this Interval.
       * The time components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {string}
       */
      toISODate() {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISODate()}/${this.e.toISODate()}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of time of this Interval.
       * The date components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISOTime(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;
      }
      /**
       * Returns a string representation of this Interval formatted according to the specified format
       * string. **You may not want this.** See {@link Interval#toLocaleString} for a more flexible
       * formatting tool.
       * @param {string} dateFormat - The format string. This string formats the start and end time.
       * See {@link DateTime#toFormat} for details.
       * @param {Object} opts - Options.
       * @param {string} [opts.separator =  ' – '] - A separator to place between the start and end
       * representations.
       * @return {string}
       */
      toFormat(dateFormat, { separator = " \u2013 " } = {}) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;
      }
      /**
       * Return a Duration representing the time spanned by this interval.
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example Interval.fromDateTimes(dt1, dt2).toDuration().toObject() //=> { milliseconds: 88489257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('days').toObject() //=> { days: 1.0241812152777778 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes']).toObject() //=> { hours: 24, minutes: 34.82095 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes', 'seconds']).toObject() //=> { hours: 24, minutes: 34, seconds: 49.257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('seconds').toObject() //=> { seconds: 88489.257 }
       * @return {Duration}
       */
      toDuration(unit, opts) {
        if (!this.isValid) {
          return Duration.invalid(this.invalidReason);
        }
        return this.e.diff(this.s, unit, opts);
      }
      /**
       * Run mapFn on the interval start and end, returning a new Interval from the resulting DateTimes
       * @param {function} mapFn
       * @return {Interval}
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.toUTC())
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.plus({ hours: 2 }))
       */
      mapEndpoints(mapFn) {
        return _Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));
      }
    };
  }
});

// node_modules/luxon/src/info.js
var Info;
var init_info = __esm({
  "node_modules/luxon/src/info.js"() {
    init_datetime();
    init_settings();
    init_locale();
    init_IANAZone();
    init_zoneUtil();
    init_util();
    Info = class {
      /**
       * Return whether the specified zone contains a DST.
       * @param {string|Zone} [zone='local'] - Zone to check. Defaults to the environment's local zone.
       * @return {boolean}
       */
      static hasDST(zone = Settings.defaultZone) {
        const proto = DateTime.now().setZone(zone).set({ month: 12 });
        return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;
      }
      /**
       * Return whether the specified zone is a valid IANA specifier.
       * @param {string} zone - Zone to check
       * @return {boolean}
       */
      static isValidIANAZone(zone) {
        return IANAZone.isValidZone(zone);
      }
      /**
       * Converts the input into a {@link Zone} instance.
       *
       * * If `input` is already a Zone instance, it is returned unchanged.
       * * If `input` is a string containing a valid time zone name, a Zone instance
       *   with that name is returned.
       * * If `input` is a string that doesn't refer to a known time zone, a Zone
       *   instance with {@link Zone#isValid} == false is returned.
       * * If `input is a number, a Zone instance with the specified fixed offset
       *   in minutes is returned.
       * * If `input` is `null` or `undefined`, the default zone is returned.
       * @param {string|Zone|number} [input] - the value to be converted
       * @return {Zone}
       */
      static normalizeZone(input) {
        return normalizeZone(input, Settings.defaultZone);
      }
      /**
       * Get the weekday on which the week starts according to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number} the start of the week, 1 for Monday through 7 for Sunday
       */
      static getStartOfWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getStartOfWeek();
      }
      /**
       * Get the minimum number of days necessary in a week before it is considered part of the next year according
       * to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number}
       */
      static getMinimumDaysInFirstWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getMinDaysInFirstWeek();
      }
      /**
       * Get the weekdays, which are considered the weekend according to the given locale
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number[]} an array of weekdays, 1 for Monday through 7 for Sunday
       */
      static getWeekendWeekdays({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getWeekendDays().slice();
      }
      /**
       * Return an array of standalone month names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @example Info.months()[0] //=> 'January'
       * @example Info.months('short')[0] //=> 'Jan'
       * @example Info.months('numeric')[0] //=> '1'
       * @example Info.months('short', { locale: 'fr-CA' } )[0] //=> 'janv.'
       * @example Info.months('numeric', { locale: 'ar' })[0] //=> '١'
       * @example Info.months('long', { outputCalendar: 'islamic' })[0] //=> 'Rabiʻ I'
       * @return {Array}
       */
      static months(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);
      }
      /**
       * Return an array of format month names.
       * Format months differ from standalone months in that they're meant to appear next to the day of the month. In some languages, that
       * changes the string.
       * See {@link Info#months}
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @return {Array}
       */
      static monthsFormat(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);
      }
      /**
       * Return an array of standalone week names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the weekday representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @example Info.weekdays()[0] //=> 'Monday'
       * @example Info.weekdays('short')[0] //=> 'Mon'
       * @example Info.weekdays('short', { locale: 'fr-CA' })[0] //=> 'lun.'
       * @example Info.weekdays('short', { locale: 'ar' })[0] //=> 'الاثنين'
       * @return {Array}
       */
      static weekdays(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);
      }
      /**
       * Return an array of format week names.
       * Format weekdays differ from standalone weekdays in that they're meant to appear next to more date information. In some languages, that
       * changes the string.
       * See {@link Info#weekdays}
       * @param {string} [length='long'] - the length of the month representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale=null] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @return {Array}
       */
      static weekdaysFormat(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);
      }
      /**
       * Return an array of meridiems.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.meridiems() //=> [ 'AM', 'PM' ]
       * @example Info.meridiems({ locale: 'my' }) //=> [ 'နံနက်', 'ညနေ' ]
       * @return {Array}
       */
      static meridiems({ locale = null } = {}) {
        return Locale.create(locale).meridiems();
      }
      /**
       * Return an array of eras, such as ['BC', 'AD']. The locale can be specified, but the calendar system is always Gregorian.
       * @param {string} [length='short'] - the length of the era representation, such as "short" or "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.eras() //=> [ 'BC', 'AD' ]
       * @example Info.eras('long') //=> [ 'Before Christ', 'Anno Domini' ]
       * @example Info.eras('long', { locale: 'fr' }) //=> [ 'avant Jésus-Christ', 'après Jésus-Christ' ]
       * @return {Array}
       */
      static eras(length = "short", { locale = null } = {}) {
        return Locale.create(locale, null, "gregory").eras(length);
      }
      /**
       * Return the set of available features in this environment.
       * Some features of Luxon are not available in all environments. For example, on older browsers, relative time formatting support is not available. Use this function to figure out if that's the case.
       * Keys:
       * * `relative`: whether this environment supports relative time formatting
       * * `localeWeek`: whether this environment supports different weekdays for the start of the week based on the locale
       * @example Info.features() //=> { relative: false, localeWeek: true }
       * @return {Object}
       */
      static features() {
        return { relative: hasRelative(), localeWeek: hasLocaleWeekInfo() };
      }
    };
  }
});

// node_modules/luxon/src/impl/diff.js
function dayDiff(earlier, later) {
  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf("day").valueOf(), ms = utcDayStart(later) - utcDayStart(earlier);
  return Math.floor(Duration.fromMillis(ms).as("days"));
}
function highOrderDiffs(cursor, later, units) {
  const differs = [
    ["years", (a, b) => b.year - a.year],
    ["quarters", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],
    ["months", (a, b) => b.month - a.month + (b.year - a.year) * 12],
    [
      "weeks",
      (a, b) => {
        const days = dayDiff(a, b);
        return (days - days % 7) / 7;
      }
    ],
    ["days", dayDiff]
  ];
  const results = {};
  const earlier = cursor;
  let lowestOrder, highWater;
  for (const [unit, differ] of differs) {
    if (units.indexOf(unit) >= 0) {
      lowestOrder = unit;
      results[unit] = differ(cursor, later);
      highWater = earlier.plus(results);
      if (highWater > later) {
        results[unit]--;
        cursor = earlier.plus(results);
        if (cursor > later) {
          highWater = cursor;
          results[unit]--;
          cursor = earlier.plus(results);
        }
      } else {
        cursor = highWater;
      }
    }
  }
  return [cursor, results, highWater, lowestOrder];
}
function diff_default(earlier, later, units, opts) {
  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);
  const remainingMillis = later - cursor;
  const lowerOrderUnits = units.filter(
    (u) => ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0
  );
  if (lowerOrderUnits.length === 0) {
    if (highWater < later) {
      highWater = cursor.plus({ [lowestOrder]: 1 });
    }
    if (highWater !== cursor) {
      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
    }
  }
  const duration = Duration.fromObject(results, opts);
  if (lowerOrderUnits.length > 0) {
    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);
  } else {
    return duration;
  }
}
var init_diff = __esm({
  "node_modules/luxon/src/impl/diff.js"() {
    init_duration();
  }
});

// node_modules/luxon/src/impl/digits.js
function parseDigits(str) {
  let value = parseInt(str, 10);
  if (isNaN(value)) {
    value = "";
    for (let i = 0; i < str.length; i++) {
      const code = str.charCodeAt(i);
      if (str[i].search(numberingSystems.hanidec) !== -1) {
        value += hanidecChars.indexOf(str[i]);
      } else {
        for (const key in numberingSystemsUTF16) {
          const [min, max] = numberingSystemsUTF16[key];
          if (code >= min && code <= max) {
            value += code - min;
          }
        }
      }
    }
    return parseInt(value, 10);
  } else {
    return value;
  }
}
function digitRegex({ numberingSystem }, append = "") {
  return new RegExp(`${numberingSystems[numberingSystem || "latn"]}${append}`);
}
var numberingSystems, numberingSystemsUTF16, hanidecChars;
var init_digits = __esm({
  "node_modules/luxon/src/impl/digits.js"() {
    numberingSystems = {
      arab: "[\u0660-\u0669]",
      arabext: "[\u06F0-\u06F9]",
      bali: "[\u1B50-\u1B59]",
      beng: "[\u09E6-\u09EF]",
      deva: "[\u0966-\u096F]",
      fullwide: "[\uFF10-\uFF19]",
      gujr: "[\u0AE6-\u0AEF]",
      hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
      khmr: "[\u17E0-\u17E9]",
      knda: "[\u0CE6-\u0CEF]",
      laoo: "[\u0ED0-\u0ED9]",
      limb: "[\u1946-\u194F]",
      mlym: "[\u0D66-\u0D6F]",
      mong: "[\u1810-\u1819]",
      mymr: "[\u1040-\u1049]",
      orya: "[\u0B66-\u0B6F]",
      tamldec: "[\u0BE6-\u0BEF]",
      telu: "[\u0C66-\u0C6F]",
      thai: "[\u0E50-\u0E59]",
      tibt: "[\u0F20-\u0F29]",
      latn: "\\d"
    };
    numberingSystemsUTF16 = {
      arab: [1632, 1641],
      arabext: [1776, 1785],
      bali: [6992, 7001],
      beng: [2534, 2543],
      deva: [2406, 2415],
      fullwide: [65296, 65303],
      gujr: [2790, 2799],
      khmr: [6112, 6121],
      knda: [3302, 3311],
      laoo: [3792, 3801],
      limb: [6470, 6479],
      mlym: [3430, 3439],
      mong: [6160, 6169],
      mymr: [4160, 4169],
      orya: [2918, 2927],
      tamldec: [3046, 3055],
      telu: [3174, 3183],
      thai: [3664, 3673],
      tibt: [3872, 3881]
    };
    hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
  }
});

// node_modules/luxon/src/impl/tokenParser.js
function intUnit(regex, post = (i) => i) {
  return { regex, deser: ([s2]) => post(parseDigits(s2)) };
}
function fixListRegex(s2) {
  return s2.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
}
function stripInsensitivities(s2) {
  return s2.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
}
function oneOf(strings, startIndex) {
  if (strings === null) {
    return null;
  } else {
    return {
      regex: RegExp(strings.map(fixListRegex).join("|")),
      deser: ([s2]) => strings.findIndex((i) => stripInsensitivities(s2) === stripInsensitivities(i)) + startIndex
    };
  }
}
function offset(regex, groups) {
  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };
}
function simple(regex) {
  return { regex, deser: ([s2]) => s2 };
}
function escapeToken(value) {
  return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}
function unitForToken(token, loc) {
  const one = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s2]) => s2, literal: true }), unitate = (t) => {
    if (token.literal) {
      return literal(t);
    }
    switch (t.val) {
      case "G":
        return oneOf(loc.eras("short"), 0);
      case "GG":
        return oneOf(loc.eras("long"), 0);
      case "y":
        return intUnit(oneToSix);
      case "yy":
        return intUnit(twoToFour, untruncateYear);
      case "yyyy":
        return intUnit(four);
      case "yyyyy":
        return intUnit(fourToSix);
      case "yyyyyy":
        return intUnit(six);
      case "M":
        return intUnit(oneOrTwo);
      case "MM":
        return intUnit(two);
      case "MMM":
        return oneOf(loc.months("short", true), 1);
      case "MMMM":
        return oneOf(loc.months("long", true), 1);
      case "L":
        return intUnit(oneOrTwo);
      case "LL":
        return intUnit(two);
      case "LLL":
        return oneOf(loc.months("short", false), 1);
      case "LLLL":
        return oneOf(loc.months("long", false), 1);
      case "d":
        return intUnit(oneOrTwo);
      case "dd":
        return intUnit(two);
      case "o":
        return intUnit(oneToThree);
      case "ooo":
        return intUnit(three);
      case "HH":
        return intUnit(two);
      case "H":
        return intUnit(oneOrTwo);
      case "hh":
        return intUnit(two);
      case "h":
        return intUnit(oneOrTwo);
      case "mm":
        return intUnit(two);
      case "m":
        return intUnit(oneOrTwo);
      case "q":
        return intUnit(oneOrTwo);
      case "qq":
        return intUnit(two);
      case "s":
        return intUnit(oneOrTwo);
      case "ss":
        return intUnit(two);
      case "S":
        return intUnit(oneToThree);
      case "SSS":
        return intUnit(three);
      case "u":
        return simple(oneToNine);
      case "uu":
        return simple(oneOrTwo);
      case "uuu":
        return intUnit(one);
      case "a":
        return oneOf(loc.meridiems(), 0);
      case "kkkk":
        return intUnit(four);
      case "kk":
        return intUnit(twoToFour, untruncateYear);
      case "W":
        return intUnit(oneOrTwo);
      case "WW":
        return intUnit(two);
      case "E":
      case "c":
        return intUnit(one);
      case "EEE":
        return oneOf(loc.weekdays("short", false), 1);
      case "EEEE":
        return oneOf(loc.weekdays("long", false), 1);
      case "ccc":
        return oneOf(loc.weekdays("short", true), 1);
      case "cccc":
        return oneOf(loc.weekdays("long", true), 1);
      case "Z":
      case "ZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);
      case "ZZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);
      case "z":
        return simple(/[a-z_+-/]{1,256}?/i);
      case " ":
        return simple(/[^\S\n\r]/);
      default:
        return literal(t);
    }
  };
  const unit = unitate(token) || {
    invalidReason: MISSING_FTP
  };
  unit.token = token;
  return unit;
}
function tokenForPart(part, formatOpts, resolvedOpts) {
  const { type: type2, value } = part;
  if (type2 === "literal") {
    const isSpace = /^\s+$/.test(value);
    return {
      literal: !isSpace,
      val: isSpace ? " " : value
    };
  }
  const style = formatOpts[type2];
  let actualType = type2;
  if (type2 === "hour") {
    if (formatOpts.hour12 != null) {
      actualType = formatOpts.hour12 ? "hour12" : "hour24";
    } else if (formatOpts.hourCycle != null) {
      if (formatOpts.hourCycle === "h11" || formatOpts.hourCycle === "h12") {
        actualType = "hour12";
      } else {
        actualType = "hour24";
      }
    } else {
      actualType = resolvedOpts.hour12 ? "hour12" : "hour24";
    }
  }
  let val = partTypeStyleToTokenVal[actualType];
  if (typeof val === "object") {
    val = val[style];
  }
  if (val) {
    return {
      literal: false,
      val
    };
  }
  return void 0;
}
function buildRegex(units) {
  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, "");
  return [`^${re}$`, units];
}
function match(input, regex, handlers) {
  const matches = input.match(regex);
  if (matches) {
    const all = {};
    let matchIndex = 1;
    for (const i in handlers) {
      if (hasOwnProperty(handlers, i)) {
        const h = handlers[i], groups = h.groups ? h.groups + 1 : 1;
        if (!h.literal && h.token) {
          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));
        }
        matchIndex += groups;
      }
    }
    return [matches, all];
  } else {
    return [matches, {}];
  }
}
function dateTimeFromMatches(matches) {
  const toField = (token) => {
    switch (token) {
      case "S":
        return "millisecond";
      case "s":
        return "second";
      case "m":
        return "minute";
      case "h":
      case "H":
        return "hour";
      case "d":
        return "day";
      case "o":
        return "ordinal";
      case "L":
      case "M":
        return "month";
      case "y":
        return "year";
      case "E":
      case "c":
        return "weekday";
      case "W":
        return "weekNumber";
      case "k":
        return "weekYear";
      case "q":
        return "quarter";
      default:
        return null;
    }
  };
  let zone = null;
  let specificOffset;
  if (!isUndefined(matches.z)) {
    zone = IANAZone.create(matches.z);
  }
  if (!isUndefined(matches.Z)) {
    if (!zone) {
      zone = new FixedOffsetZone(matches.Z);
    }
    specificOffset = matches.Z;
  }
  if (!isUndefined(matches.q)) {
    matches.M = (matches.q - 1) * 3 + 1;
  }
  if (!isUndefined(matches.h)) {
    if (matches.h < 12 && matches.a === 1) {
      matches.h += 12;
    } else if (matches.h === 12 && matches.a === 0) {
      matches.h = 0;
    }
  }
  if (matches.G === 0 && matches.y) {
    matches.y = -matches.y;
  }
  if (!isUndefined(matches.u)) {
    matches.S = parseMillis(matches.u);
  }
  const vals = Object.keys(matches).reduce((r, k) => {
    const f = toField(k);
    if (f) {
      r[f] = matches[k];
    }
    return r;
  }, {});
  return [vals, zone, specificOffset];
}
function getDummyDateTime() {
  if (!dummyDateTimeCache) {
    dummyDateTimeCache = DateTime.fromMillis(1555555555555);
  }
  return dummyDateTimeCache;
}
function maybeExpandMacroToken(token, locale) {
  if (token.literal) {
    return token;
  }
  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);
  const tokens = formatOptsToTokens(formatOpts, locale);
  if (tokens == null || tokens.includes(void 0)) {
    return token;
  }
  return tokens;
}
function expandMacroTokens(tokens, locale) {
  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));
}
function explainFromTokens(locale, input, format) {
  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale), units = tokens.map((t) => unitForToken(t, locale)), disqualifyingUnit = units.find((t) => t.invalidReason);
  if (disqualifyingUnit) {
    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };
  } else {
    const [regexString, handlers] = buildRegex(units), regex = RegExp(regexString, "i"), [rawMatches, matches] = match(input, regex, handlers), [result, zone, specificOffset] = matches ? dateTimeFromMatches(matches) : [null, null, void 0];
    if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
      throw new ConflictingSpecificationError(
        "Can't include meridiem when specifying 24-hour format"
      );
    }
    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };
  }
}
function parseFromTokens(locale, input, format) {
  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);
  return [result, zone, specificOffset, invalidReason];
}
function formatOptsToTokens(formatOpts, locale) {
  if (!formatOpts) {
    return null;
  }
  const formatter = Formatter.create(locale, formatOpts);
  const df = formatter.dtFormatter(getDummyDateTime());
  const parts = df.formatToParts();
  const resolvedOpts = df.resolvedOptions();
  return parts.map((p) => tokenForPart(p, formatOpts, resolvedOpts));
}
var MISSING_FTP, NBSP, spaceOrNBSP, spaceOrNBSPRegExp, partTypeStyleToTokenVal, dummyDateTimeCache;
var init_tokenParser = __esm({
  "node_modules/luxon/src/impl/tokenParser.js"() {
    init_util();
    init_formatter();
    init_fixedOffsetZone();
    init_IANAZone();
    init_datetime();
    init_digits();
    init_errors();
    MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
    NBSP = String.fromCharCode(160);
    spaceOrNBSP = `[ ${NBSP}]`;
    spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
    partTypeStyleToTokenVal = {
      year: {
        "2-digit": "yy",
        numeric: "yyyyy"
      },
      month: {
        numeric: "M",
        "2-digit": "MM",
        short: "MMM",
        long: "MMMM"
      },
      day: {
        numeric: "d",
        "2-digit": "dd"
      },
      weekday: {
        short: "EEE",
        long: "EEEE"
      },
      dayperiod: "a",
      dayPeriod: "a",
      hour12: {
        numeric: "h",
        "2-digit": "hh"
      },
      hour24: {
        numeric: "H",
        "2-digit": "HH"
      },
      minute: {
        numeric: "m",
        "2-digit": "mm"
      },
      second: {
        numeric: "s",
        "2-digit": "ss"
      },
      timeZoneName: {
        long: "ZZZZZ",
        short: "ZZZ"
      }
    };
    dummyDateTimeCache = null;
  }
});

// node_modules/luxon/src/datetime.js
function unsupportedZone(zone) {
  return new Invalid("unsupported zone", `the zone "${zone.name}" is not supported`);
}
function possiblyCachedWeekData(dt) {
  if (dt.weekData === null) {
    dt.weekData = gregorianToWeek(dt.c);
  }
  return dt.weekData;
}
function possiblyCachedLocalWeekData(dt) {
  if (dt.localWeekData === null) {
    dt.localWeekData = gregorianToWeek(
      dt.c,
      dt.loc.getMinDaysInFirstWeek(),
      dt.loc.getStartOfWeek()
    );
  }
  return dt.localWeekData;
}
function clone2(inst, alts) {
  const current = {
    ts: inst.ts,
    zone: inst.zone,
    c: inst.c,
    o: inst.o,
    loc: inst.loc,
    invalid: inst.invalid
  };
  return new DateTime({ ...current, ...alts, old: current });
}
function fixOffset(localTS, o, tz) {
  let utcGuess = localTS - o * 60 * 1e3;
  const o2 = tz.offset(utcGuess);
  if (o === o2) {
    return [utcGuess, o];
  }
  utcGuess -= (o2 - o) * 60 * 1e3;
  const o3 = tz.offset(utcGuess);
  if (o2 === o3) {
    return [utcGuess, o2];
  }
  return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
}
function tsToObj(ts, offset2) {
  ts += offset2 * 60 * 1e3;
  const d = new Date(ts);
  return {
    year: d.getUTCFullYear(),
    month: d.getUTCMonth() + 1,
    day: d.getUTCDate(),
    hour: d.getUTCHours(),
    minute: d.getUTCMinutes(),
    second: d.getUTCSeconds(),
    millisecond: d.getUTCMilliseconds()
  };
}
function objToTS(obj, offset2, zone) {
  return fixOffset(objToLocalTS(obj), offset2, zone);
}
function adjustTime(inst, dur) {
  const oPre = inst.o, year = inst.c.year + Math.trunc(dur.years), month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c = {
    ...inst.c,
    year,
    month,
    day: Math.min(inst.c.day, daysInMonth(year, month)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
  }, millisToAdd = Duration.fromObject({
    years: dur.years - Math.trunc(dur.years),
    quarters: dur.quarters - Math.trunc(dur.quarters),
    months: dur.months - Math.trunc(dur.months),
    weeks: dur.weeks - Math.trunc(dur.weeks),
    days: dur.days - Math.trunc(dur.days),
    hours: dur.hours,
    minutes: dur.minutes,
    seconds: dur.seconds,
    milliseconds: dur.milliseconds
  }).as("milliseconds"), localTS = objToLocalTS(c);
  let [ts, o] = fixOffset(localTS, oPre, inst.zone);
  if (millisToAdd !== 0) {
    ts += millisToAdd;
    o = inst.zone.offset(ts);
  }
  return { ts, o };
}
function parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {
  const { setZone, zone } = opts;
  if (parsed && Object.keys(parsed).length !== 0 || parsedZone) {
    const interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, {
      ...opts,
      zone: interpretationZone,
      specificOffset
    });
    return setZone ? inst : inst.setZone(zone);
  } else {
    return DateTime.invalid(
      new Invalid("unparsable", `the input "${text}" can't be parsed as ${format}`)
    );
  }
}
function toTechFormat(dt, format, allowZ = true) {
  return dt.isValid ? Formatter.create(Locale.create("en-US"), {
    allowZ,
    forceSimple: true
  }).formatDateTimeFromString(dt, format) : null;
}
function toISODate(o, extended) {
  const longFormat = o.c.year > 9999 || o.c.year < 0;
  let c = "";
  if (longFormat && o.c.year >= 0)
    c += "+";
  c += padStart(o.c.year, longFormat ? 6 : 4);
  if (extended) {
    c += "-";
    c += padStart(o.c.month);
    c += "-";
    c += padStart(o.c.day);
  } else {
    c += padStart(o.c.month);
    c += padStart(o.c.day);
  }
  return c;
}
function toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
  let c = padStart(o.c.hour);
  if (extended) {
    c += ":";
    c += padStart(o.c.minute);
    if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
      c += ":";
    }
  } else {
    c += padStart(o.c.minute);
  }
  if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
    c += padStart(o.c.second);
    if (o.c.millisecond !== 0 || !suppressMilliseconds) {
      c += ".";
      c += padStart(o.c.millisecond, 3);
    }
  }
  if (includeOffset) {
    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
      c += "Z";
    } else if (o.o < 0) {
      c += "-";
      c += padStart(Math.trunc(-o.o / 60));
      c += ":";
      c += padStart(Math.trunc(-o.o % 60));
    } else {
      c += "+";
      c += padStart(Math.trunc(o.o / 60));
      c += ":";
      c += padStart(Math.trunc(o.o % 60));
    }
  }
  if (extendedZone) {
    c += "[" + o.zone.ianaName + "]";
  }
  return c;
}
function normalizeUnit(unit) {
  const normalized = {
    year: "year",
    years: "year",
    month: "month",
    months: "month",
    day: "day",
    days: "day",
    hour: "hour",
    hours: "hour",
    minute: "minute",
    minutes: "minute",
    quarter: "quarter",
    quarters: "quarter",
    second: "second",
    seconds: "second",
    millisecond: "millisecond",
    milliseconds: "millisecond",
    weekday: "weekday",
    weekdays: "weekday",
    weeknumber: "weekNumber",
    weeksnumber: "weekNumber",
    weeknumbers: "weekNumber",
    weekyear: "weekYear",
    weekyears: "weekYear",
    ordinal: "ordinal"
  }[unit.toLowerCase()];
  if (!normalized)
    throw new InvalidUnitError(unit);
  return normalized;
}
function normalizeUnitWithLocalWeeks(unit) {
  switch (unit.toLowerCase()) {
    case "localweekday":
    case "localweekdays":
      return "localWeekday";
    case "localweeknumber":
    case "localweeknumbers":
      return "localWeekNumber";
    case "localweekyear":
    case "localweekyears":
      return "localWeekYear";
    default:
      return normalizeUnit(unit);
  }
}
function quickDT(obj, opts) {
  const zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
  let ts, o;
  if (!isUndefined(obj.year)) {
    for (const u of orderedUnits2) {
      if (isUndefined(obj[u])) {
        obj[u] = defaultUnitValues[u];
      }
    }
    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const offsetProvis = zone.offset(tsNow);
    [ts, o] = objToTS(obj, offsetProvis, zone);
  } else {
    ts = tsNow;
  }
  return new DateTime({ ts, zone, loc, o });
}
function diffRelative(start, end, opts) {
  const round = isUndefined(opts.round) ? true : opts.round, format = (c, unit) => {
    c = roundTo(c, round || opts.calendary ? 0 : 2, true);
    const formatter = end.loc.clone(opts).relFormatter(opts);
    return formatter.format(c, unit);
  }, differ = (unit) => {
    if (opts.calendary) {
      if (!end.hasSame(start, unit)) {
        return end.startOf(unit).diff(start.startOf(unit), unit).get(unit);
      } else
        return 0;
    } else {
      return end.diff(start, unit).get(unit);
    }
  };
  if (opts.unit) {
    return format(differ(opts.unit), opts.unit);
  }
  for (const unit of opts.units) {
    const count = differ(unit);
    if (Math.abs(count) >= 1) {
      return format(count, unit);
    }
  }
  return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);
}
function lastOpts(argList) {
  let opts = {}, args;
  if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
    opts = argList[argList.length - 1];
    args = Array.from(argList).slice(0, argList.length - 1);
  } else {
    args = Array.from(argList);
  }
  return [opts, args];
}
function friendlyDateTime(dateTimeish) {
  if (DateTime.isDateTime(dateTimeish)) {
    return dateTimeish;
  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
    return DateTime.fromJSDate(dateTimeish);
  } else if (dateTimeish && typeof dateTimeish === "object") {
    return DateTime.fromObject(dateTimeish);
  } else {
    throw new InvalidArgumentError(
      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`
    );
  }
}
var INVALID3, MAX_DATE, defaultUnitValues, defaultWeekUnitValues, defaultOrdinalUnitValues, orderedUnits2, orderedWeekUnits, orderedOrdinalUnits, DateTime;
var init_datetime = __esm({
  "node_modules/luxon/src/datetime.js"() {
    init_duration();
    init_interval();
    init_settings();
    init_info();
    init_formatter();
    init_fixedOffsetZone();
    init_locale();
    init_util();
    init_zoneUtil();
    init_diff();
    init_regexParser();
    init_tokenParser();
    init_conversions();
    init_formats();
    init_errors();
    init_invalid();
    INVALID3 = "Invalid DateTime";
    MAX_DATE = 864e13;
    defaultUnitValues = {
      month: 1,
      day: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultWeekUnitValues = {
      weekNumber: 1,
      weekday: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultOrdinalUnitValues = {
      ordinal: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    orderedUnits2 = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
    orderedWeekUnits = [
      "weekYear",
      "weekNumber",
      "weekday",
      "hour",
      "minute",
      "second",
      "millisecond"
    ];
    orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
    DateTime = class _DateTime {
      /**
       * @access private
       */
      constructor(config) {
        const zone = config.zone || Settings.defaultZone;
        let invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
        this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
        let c = null, o = null;
        if (!invalid) {
          const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
          if (unchanged) {
            [c, o] = [config.old.c, config.old.o];
          } else {
            const ot = zone.offset(this.ts);
            c = tsToObj(this.ts, ot);
            invalid = Number.isNaN(c.year) ? new Invalid("invalid input") : null;
            c = invalid ? null : c;
            o = invalid ? null : ot;
          }
        }
        this._zone = zone;
        this.loc = config.loc || Locale.create();
        this.invalid = invalid;
        this.weekData = null;
        this.localWeekData = null;
        this.c = c;
        this.o = o;
        this.isLuxonDateTime = true;
      }
      // CONSTRUCT
      /**
       * Create a DateTime for the current instant, in the system's time zone.
       *
       * Use Settings to override these default values if needed.
       * @example DateTime.now().toISO() //~> now in the ISO format
       * @return {DateTime}
       */
      static now() {
        return new _DateTime({});
      }
      /**
       * Create a local DateTime
       * @param {number} [year] - The calendar year. If omitted (as in, call `local()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month, 1-indexed
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @example DateTime.local()                                  //~> now
       * @example DateTime.local({ zone: "America/New_York" })      //~> now, in US east coast time
       * @example DateTime.local(2017)                              //~> 2017-01-01T00:00:00
       * @example DateTime.local(2017, 3)                           //~> 2017-03-01T00:00:00
       * @example DateTime.local(2017, 3, 12, { locale: "fr" })     //~> 2017-03-12T00:00:00, with a French locale
       * @example DateTime.local(2017, 3, 12, 5)                    //~> 2017-03-12T05:00:00
       * @example DateTime.local(2017, 3, 12, 5, { zone: "utc" })   //~> 2017-03-12T05:00:00, in UTC
       * @example DateTime.local(2017, 3, 12, 5, 45)                //~> 2017-03-12T05:45:00
       * @example DateTime.local(2017, 3, 12, 5, 45, 10)            //~> 2017-03-12T05:45:10
       * @example DateTime.local(2017, 3, 12, 5, 45, 10, 765)       //~> 2017-03-12T05:45:10.765
       * @return {DateTime}
       */
      static local() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime in UTC
       * @param {number} [year] - The calendar year. If omitted (as in, call `utc()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @param {Object} options - configuration options for the DateTime
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} [options.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [options.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.utc()                                              //~> now
       * @example DateTime.utc(2017)                                          //~> 2017-01-01T00:00:00Z
       * @example DateTime.utc(2017, 3)                                       //~> 2017-03-01T00:00:00Z
       * @example DateTime.utc(2017, 3, 12)                                   //~> 2017-03-12T00:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5)                                //~> 2017-03-12T05:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45)                            //~> 2017-03-12T05:45:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, { locale: "fr" })          //~> 2017-03-12T05:45:00Z with a French locale
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10)                        //~> 2017-03-12T05:45:10Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10, 765, { locale: "fr" }) //~> 2017-03-12T05:45:10.765Z with a French locale
       * @return {DateTime}
       */
      static utc() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        opts.zone = FixedOffsetZone.utcInstance;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime from a JavaScript Date object. Uses the default zone.
       * @param {Date} date - a JavaScript Date object
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @return {DateTime}
       */
      static fromJSDate(date, options = {}) {
        const ts = isDate(date) ? date.valueOf() : NaN;
        if (Number.isNaN(ts)) {
          return _DateTime.invalid("invalid input");
        }
        const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        return new _DateTime({
          ts,
          zone: zoneToUse,
          loc: Locale.fromObject(options)
        });
      }
      /**
       * Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} milliseconds - a number of milliseconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromMillis(milliseconds, options = {}) {
        if (!isNumber(milliseconds)) {
          throw new InvalidArgumentError(
            `fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`
          );
        } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {
          return _DateTime.invalid("Timestamp out of range");
        } else {
          return new _DateTime({
            ts: milliseconds,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} seconds - a number of seconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromSeconds(seconds, options = {}) {
        if (!isNumber(seconds)) {
          throw new InvalidArgumentError("fromSeconds requires a numerical input");
        } else {
          return new _DateTime({
            ts: seconds * 1e3,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.year - a year, such as 1987
       * @param {number} obj.month - a month, 1-12
       * @param {number} obj.day - a day of the month, 1-31, depending on the month
       * @param {number} obj.ordinal - day of the year, 1-365 or 366
       * @param {number} obj.weekYear - an ISO week year
       * @param {number} obj.weekNumber - an ISO week number, between 1 and 52 or 53, depending on the year
       * @param {number} obj.weekday - an ISO weekday, 1-7, where 1 is Monday and 7 is Sunday
       * @param {number} obj.localWeekYear - a week year, according to the locale
       * @param {number} obj.localWeekNumber - a week number, between 1 and 52 or 53, depending on the year, according to the locale
       * @param {number} obj.localWeekday - a weekday, 1-7, where 1 is the first and 7 is the last day of the week, according to the locale
       * @param {number} obj.hour - hour of the day, 0-23
       * @param {number} obj.minute - minute of the hour, 0-59
       * @param {number} obj.second - second of the minute, 0-59
       * @param {number} obj.millisecond - millisecond of the second, 0-999
       * @param {Object} opts - options for creating this DateTime
       * @param {string|Zone} [opts.zone='local'] - interpret the numbers in the context of a particular zone. Can take any value taken as the first argument to setZone()
       * @param {string} [opts.locale='system\'s locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromObject({ year: 1982, month: 5, day: 25}).toISODate() //=> '1982-05-25'
       * @example DateTime.fromObject({ year: 1982 }).toISODate() //=> '1982-01-01'
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }) //~> today at 10:26:06
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'utc' }),
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'local' })
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'America/New_York' })
       * @example DateTime.fromObject({ weekYear: 2016, weekNumber: 2, weekday: 3 }).toISODate() //=> '2016-01-13'
       * @example DateTime.fromObject({ localWeekYear: 2022, localWeekNumber: 1, localWeekday: 1 }, { locale: "en-US" }).toISODate() //=> '2021-12-26'
       * @return {DateTime}
       */
      static fromObject(obj, opts = {}) {
        obj = obj || {};
        const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        const loc = Locale.fromObject(opts);
        const normalized = normalizeObject(obj, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, loc);
        const tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        const useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
        let units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
        if (useWeekData) {
          units = orderedWeekUnits;
          defaultValues = defaultWeekUnitValues;
          objNow = gregorianToWeek(objNow, minDaysInFirstWeek, startOfWeek);
        } else if (containsOrdinal) {
          units = orderedOrdinalUnits;
          defaultValues = defaultOrdinalUnitValues;
          objNow = gregorianToOrdinal(objNow);
        } else {
          units = orderedUnits2;
          defaultValues = defaultUnitValues;
        }
        let foundFirst = false;
        for (const u of units) {
          const v = normalized[u];
          if (!isUndefined(v)) {
            foundFirst = true;
          } else if (foundFirst) {
            normalized[u] = defaultValues[u];
          } else {
            normalized[u] = objNow[u];
          }
        }
        const higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
        if (invalid) {
          return _DateTime.invalid(invalid);
        }
        const gregorian = useWeekData ? weekToGregorian(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse), inst = new _DateTime({
          ts: tsFinal,
          zone: zoneToUse,
          o: offsetFinal,
          loc
        });
        if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
          return _DateTime.invalid(
            "mismatched weekday",
            `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`
          );
        }
        return inst;
      }
      /**
       * Create a DateTime from an ISO 8601 string
       * @param {string} text - the ISO string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the time to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} [opts.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [opts.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromISO('2016-05-25T09:08:34.123')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00', {setZone: true})
       * @example DateTime.fromISO('2016-05-25T09:08:34.123', {zone: 'utc'})
       * @example DateTime.fromISO('2016-W05-4')
       * @return {DateTime}
       */
      static fromISO(text, opts = {}) {
        const [vals, parsedZone] = parseISODate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
      }
      /**
       * Create a DateTime from an RFC 2822 string
       * @param {string} text - the RFC 2822 string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since the offset is always specified in the string itself, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23:12 GMT')
       * @example DateTime.fromRFC2822('Fri, 25 Nov 2016 13:23:12 +0600')
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23 Z')
       * @return {DateTime}
       */
      static fromRFC2822(text, opts = {}) {
        const [vals, parsedZone] = parseRFC2822Date(text);
        return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
      }
      /**
       * Create a DateTime from an HTTP header date
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @param {string} text - the HTTP header date
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since HTTP dates are always in UTC, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with the fixed-offset zone specified in the string. For HTTP dates, this is always UTC, so this option is equivalent to setting the `zone` option to 'utc', but this option is included for consistency with similar methods.
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromHTTP('Sun, 06 Nov 1994 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sunday, 06-Nov-94 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sun Nov  6 08:49:37 1994')
       * @return {DateTime}
       */
      static fromHTTP(text, opts = {}) {
        const [vals, parsedZone] = parseHTTPDate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
      }
      /**
       * Create a DateTime from an input string and format string.
       * Defaults to en-US if no locale has been specified, regardless of the system's locale. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/parsing?id=table-of-tokens).
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see the link below for the formats)
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromFormat(text, fmt, opts = {}) {
        if (isUndefined(text) || isUndefined(fmt)) {
          throw new InvalidArgumentError("fromFormat requires an input string and a format");
        }
        const { locale = null, numberingSystem = null } = opts, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        }), [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);
        if (invalid) {
          return _DateTime.invalid(invalid);
        } else {
          return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);
        }
      }
      /**
       * @deprecated use fromFormat instead
       */
      static fromString(text, fmt, opts = {}) {
        return _DateTime.fromFormat(text, fmt, opts);
      }
      /**
       * Create a DateTime from a SQL date, time, or datetime
       * Defaults to en-US if no locale has been specified, regardless of the system's locale
       * @param {string} text - the string to parse
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @example DateTime.fromSQL('2017-05-15')
       * @example DateTime.fromSQL('2017-05-15 09:12:34')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342+06:00')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles', { setZone: true })
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342', { zone: 'America/Los_Angeles' })
       * @example DateTime.fromSQL('09:12:34.342')
       * @return {DateTime}
       */
      static fromSQL(text, opts = {}) {
        const [vals, parsedZone] = parseSQL(text);
        return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
      }
      /**
       * Create an invalid DateTime.
       * @param {string} reason - simple string of why this DateTime is invalid. Should not contain parameters or anything else data-dependent.
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {DateTime}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDateTimeError(invalid);
        } else {
          return new _DateTime({ invalid });
        }
      }
      /**
       * Check if an object is an instance of DateTime. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDateTime(o) {
        return o && o.isLuxonDateTime || false;
      }
      /**
       * Produce the format string for a set of options
       * @param formatOpts
       * @param localeOpts
       * @returns {string}
       */
      static parseFormatForOpts(formatOpts, localeOpts = {}) {
        const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));
        return !tokenList ? null : tokenList.map((t) => t ? t.val : null).join("");
      }
      /**
       * Produce the the fully expanded format token for the locale
       * Does NOT quote characters, so quoted tokens will not round trip correctly
       * @param fmt
       * @param localeOpts
       * @returns {string}
       */
      static expandFormat(fmt, localeOpts = {}) {
        const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));
        return expanded.map((t) => t.val).join("");
      }
      // INFO
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example DateTime.local(2017, 7, 4).get('month'); //=> 7
       * @example DateTime.local(2017, 7, 4).get('day'); //=> 4
       * @return {number}
       */
      get(unit) {
        return this[unit];
      }
      /**
       * Returns whether the DateTime is valid. Invalid DateTimes occur when:
       * * The DateTime was created from invalid calendar information, such as the 13th month or February 30
       * * The DateTime was created by an operation on another invalid date
       * @type {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this DateTime is invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime
       *
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime
       *
       * @type {string}
       */
      get outputCalendar() {
        return this.isValid ? this.loc.outputCalendar : null;
      }
      /**
       * Get the time zone associated with this DateTime.
       * @type {Zone}
       */
      get zone() {
        return this._zone;
      }
      /**
       * Get the name of the time zone.
       * @type {string}
       */
      get zoneName() {
        return this.isValid ? this.zone.name : null;
      }
      /**
       * Get the year
       * @example DateTime.local(2017, 5, 25).year //=> 2017
       * @type {number}
       */
      get year() {
        return this.isValid ? this.c.year : NaN;
      }
      /**
       * Get the quarter
       * @example DateTime.local(2017, 5, 25).quarter //=> 2
       * @type {number}
       */
      get quarter() {
        return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
      }
      /**
       * Get the month (1-12).
       * @example DateTime.local(2017, 5, 25).month //=> 5
       * @type {number}
       */
      get month() {
        return this.isValid ? this.c.month : NaN;
      }
      /**
       * Get the day of the month (1-30ish).
       * @example DateTime.local(2017, 5, 25).day //=> 25
       * @type {number}
       */
      get day() {
        return this.isValid ? this.c.day : NaN;
      }
      /**
       * Get the hour of the day (0-23).
       * @example DateTime.local(2017, 5, 25, 9).hour //=> 9
       * @type {number}
       */
      get hour() {
        return this.isValid ? this.c.hour : NaN;
      }
      /**
       * Get the minute of the hour (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30).minute //=> 30
       * @type {number}
       */
      get minute() {
        return this.isValid ? this.c.minute : NaN;
      }
      /**
       * Get the second of the minute (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52).second //=> 52
       * @type {number}
       */
      get second() {
        return this.isValid ? this.c.second : NaN;
      }
      /**
       * Get the millisecond of the second (0-999).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52, 654).millisecond //=> 654
       * @type {number}
       */
      get millisecond() {
        return this.isValid ? this.c.millisecond : NaN;
      }
      /**
       * Get the week year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 12, 31).weekYear //=> 2015
       * @type {number}
       */
      get weekYear() {
        return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
      }
      /**
       * Get the week number of the week year (1-52ish).
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2017, 5, 25).weekNumber //=> 21
       * @type {number}
       */
      get weekNumber() {
        return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the day of the week.
       * 1 is Monday and 7 is Sunday
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 11, 31).weekday //=> 4
       * @type {number}
       */
      get weekday() {
        return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
      }
      /**
       * Returns true if this date is on a weekend according to the locale, false otherwise
       * @returns {boolean}
       */
      get isWeekend() {
        return this.isValid && this.loc.getWeekendDays().includes(this.weekday);
      }
      /**
       * Get the day of the week according to the locale.
       * 1 is the first day of the week and 7 is the last day of the week.
       * If the locale assigns Sunday as the first day of the week, then a date which is a Sunday will return 1,
       * @returns {number}
       */
      get localWeekday() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekday : NaN;
      }
      /**
       * Get the week number of the week year according to the locale. Different locales assign week numbers differently,
       * because the week can start on different days of the week (see localWeekday) and because a different number of days
       * is required for a week to count as the first week of a year.
       * @returns {number}
       */
      get localWeekNumber() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the week year according to the locale. Different locales assign week numbers (and therefor week years)
       * differently, see localWeekNumber.
       * @returns {number}
       */
      get localWeekYear() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekYear : NaN;
      }
      /**
       * Get the ordinal (meaning the day of the year)
       * @example DateTime.local(2017, 5, 25).ordinal //=> 145
       * @type {number|DateTime}
       */
      get ordinal() {
        return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
      }
      /**
       * Get the human readable short month name, such as 'Oct'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthShort //=> Oct
       * @type {string}
       */
      get monthShort() {
        return this.isValid ? Info.months("short", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable long month name, such as 'October'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthLong //=> October
       * @type {string}
       */
      get monthLong() {
        return this.isValid ? Info.months("long", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable short weekday, such as 'Mon'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayShort //=> Mon
       * @type {string}
       */
      get weekdayShort() {
        return this.isValid ? Info.weekdays("short", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the human readable long weekday, such as 'Monday'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayLong //=> Monday
       * @type {string}
       */
      get weekdayLong() {
        return this.isValid ? Info.weekdays("long", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the UTC offset of this DateTime in minutes
       * @example DateTime.now().offset //=> -240
       * @example DateTime.utc().offset //=> 0
       * @type {number}
       */
      get offset() {
        return this.isValid ? +this.o : NaN;
      }
      /**
       * Get the short human name for the zone's current offset, for example "EST" or "EDT".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameShort() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "short",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get the long human name for the zone's current offset, for example "Eastern Standard Time" or "Eastern Daylight Time".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameLong() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "long",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get whether this zone's offset ever changes, as in a DST.
       * @type {boolean}
       */
      get isOffsetFixed() {
        return this.isValid ? this.zone.isUniversal : null;
      }
      /**
       * Get whether the DateTime is in a DST.
       * @type {boolean}
       */
      get isInDST() {
        if (this.isOffsetFixed) {
          return false;
        } else {
          return this.offset > this.set({ month: 1, day: 1 }).offset || this.offset > this.set({ month: 5 }).offset;
        }
      }
      /**
       * Get those DateTimes which have the same local time as this DateTime, but a different offset from UTC
       * in this DateTime's zone. During DST changes local time can be ambiguous, for example
       * `2023-10-29T02:30:00` in `Europe/Berlin` can have offset `+01:00` or `+02:00`.
       * This method will return both possible DateTimes if this DateTime's local time is ambiguous.
       * @returns {DateTime[]}
       */
      getPossibleOffsets() {
        if (!this.isValid || this.isOffsetFixed) {
          return [this];
        }
        const dayMs = 864e5;
        const minuteMs = 6e4;
        const localTS = objToLocalTS(this.c);
        const oEarlier = this.zone.offset(localTS - dayMs);
        const oLater = this.zone.offset(localTS + dayMs);
        const o1 = this.zone.offset(localTS - oEarlier * minuteMs);
        const o2 = this.zone.offset(localTS - oLater * minuteMs);
        if (o1 === o2) {
          return [this];
        }
        const ts1 = localTS - o1 * minuteMs;
        const ts2 = localTS - o2 * minuteMs;
        const c1 = tsToObj(ts1, o1);
        const c2 = tsToObj(ts2, o2);
        if (c1.hour === c2.hour && c1.minute === c2.minute && c1.second === c2.second && c1.millisecond === c2.millisecond) {
          return [clone2(this, { ts: ts1 }), clone2(this, { ts: ts2 })];
        }
        return [this];
      }
      /**
       * Returns true if this DateTime is in a leap year, false otherwise
       * @example DateTime.local(2016).isInLeapYear //=> true
       * @example DateTime.local(2013).isInLeapYear //=> false
       * @type {boolean}
       */
      get isInLeapYear() {
        return isLeapYear(this.year);
      }
      /**
       * Returns the number of days in this DateTime's month
       * @example DateTime.local(2016, 2).daysInMonth //=> 29
       * @example DateTime.local(2016, 3).daysInMonth //=> 31
       * @type {number}
       */
      get daysInMonth() {
        return daysInMonth(this.year, this.month);
      }
      /**
       * Returns the number of days in this DateTime's year
       * @example DateTime.local(2016).daysInYear //=> 366
       * @example DateTime.local(2013).daysInYear //=> 365
       * @type {number}
       */
      get daysInYear() {
        return this.isValid ? daysInYear(this.year) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2004).weeksInWeekYear //=> 53
       * @example DateTime.local(2013).weeksInWeekYear //=> 52
       * @type {number}
       */
      get weeksInWeekYear() {
        return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's local week year
       * @example DateTime.local(2020, 6, {locale: 'en-US'}).weeksInLocalWeekYear //=> 52
       * @example DateTime.local(2020, 6, {locale: 'de-DE'}).weeksInLocalWeekYear //=> 53
       * @type {number}
       */
      get weeksInLocalWeekYear() {
        return this.isValid ? weeksInWeekYear(
          this.localWeekYear,
          this.loc.getMinDaysInFirstWeek(),
          this.loc.getStartOfWeek()
        ) : NaN;
      }
      /**
       * Returns the resolved Intl options for this DateTime.
       * This is useful in understanding the behavior of formatting methods
       * @param {Object} opts - the same options as toLocaleString
       * @return {Object}
       */
      resolvedLocaleOptions(opts = {}) {
        const { locale, numberingSystem, calendar } = Formatter.create(
          this.loc.clone(opts),
          opts
        ).resolvedOptions(this);
        return { locale, numberingSystem, outputCalendar: calendar };
      }
      // TRANSFORM
      /**
       * "Set" the DateTime's zone to UTC. Returns a newly-constructed DateTime.
       *
       * Equivalent to {@link DateTime#setZone}('utc')
       * @param {number} [offset=0] - optionally, an offset from UTC in minutes
       * @param {Object} [opts={}] - options to pass to `setZone()`
       * @return {DateTime}
       */
      toUTC(offset2 = 0, opts = {}) {
        return this.setZone(FixedOffsetZone.instance(offset2), opts);
      }
      /**
       * "Set" the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.
       *
       * Equivalent to `setZone('local')`
       * @return {DateTime}
       */
      toLocal() {
        return this.setZone(Settings.defaultZone);
      }
      /**
       * "Set" the DateTime's zone to specified zone. Returns a newly-constructed DateTime.
       *
       * By default, the setter keeps the underlying time the same (as in, the same timestamp), but the new instance will report different local times and consider DSTs when making computations, as with {@link DateTime#plus}. You may wish to use {@link DateTime#toLocal} and {@link DateTime#toUTC} which provide simple convenience wrappers for commonly used zones.
       * @param {string|Zone} [zone='local'] - a zone identifier. As a string, that can be any IANA zone supported by the host environment, or a fixed-offset name of the form 'UTC+3', or the strings 'local' or 'utc'. You may also supply an instance of a {@link DateTime#Zone} class.
       * @param {Object} opts - options
       * @param {boolean} [opts.keepLocalTime=false] - If true, adjust the underlying time so that the local time stays the same, but in the target zone. You should rarely need this.
       * @return {DateTime}
       */
      setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {
        zone = normalizeZone(zone, Settings.defaultZone);
        if (zone.equals(this.zone)) {
          return this;
        } else if (!zone.isValid) {
          return _DateTime.invalid(unsupportedZone(zone));
        } else {
          let newTS = this.ts;
          if (keepLocalTime || keepCalendarTime) {
            const offsetGuess = zone.offset(this.ts);
            const asObj = this.toObject();
            [newTS] = objToTS(asObj, offsetGuess, zone);
          }
          return clone2(this, { ts: newTS, zone });
        }
      }
      /**
       * "Set" the locale, numberingSystem, or outputCalendar. Returns a newly-constructed DateTime.
       * @param {Object} properties - the properties to set
       * @example DateTime.local(2017, 5, 25).reconfigure({ locale: 'en-GB' })
       * @return {DateTime}
       */
      reconfigure({ locale, numberingSystem, outputCalendar } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem, outputCalendar });
        return clone2(this, { loc });
      }
      /**
       * "Set" the locale. Returns a newly-constructed DateTime.
       * Just a convenient alias for reconfigure({ locale })
       * @example DateTime.local(2017, 5, 25).setLocale('en-GB')
       * @return {DateTime}
       */
      setLocale(locale) {
        return this.reconfigure({ locale });
      }
      /**
       * "Set" the values of specified units. Returns a newly-constructed DateTime.
       * You can only set units with this method; for "setting" metadata, see {@link DateTime#reconfigure} and {@link DateTime#setZone}.
       *
       * This method also supports setting locale-based week units, i.e. `localWeekday`, `localWeekNumber` and `localWeekYear`.
       * They cannot be mixed with ISO-week units like `weekday`.
       * @param {Object} values - a mapping of units to numbers
       * @example dt.set({ year: 2017 })
       * @example dt.set({ hour: 8, minute: 30 })
       * @example dt.set({ weekday: 5 })
       * @example dt.set({ year: 2005, ordinal: 234 })
       * @return {DateTime}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const normalized = normalizeObject(values, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, this.loc);
        const settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        let mixed;
        if (settingWeekStuff) {
          mixed = weekToGregorian(
            { ...gregorianToWeek(this.c, minDaysInFirstWeek, startOfWeek), ...normalized },
            minDaysInFirstWeek,
            startOfWeek
          );
        } else if (!isUndefined(normalized.ordinal)) {
          mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });
        } else {
          mixed = { ...this.toObject(), ...normalized };
          if (isUndefined(normalized.day)) {
            mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
          }
        }
        const [ts, o] = objToTS(mixed, this.o, this.zone);
        return clone2(this, { ts, o });
      }
      /**
       * Add a period of time to this DateTime and return the resulting DateTime
       *
       * Adding hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds. Adding days, months, or years shifts the calendar, accounting for DSTs and leap years along the way. Thus, `dt.plus({ hours: 24 })` may result in a different time than `dt.plus({ days: 1 })` if there's a DST shift in between.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @example DateTime.now().plus(123) //~> in 123 milliseconds
       * @example DateTime.now().plus({ minutes: 15 }) //~> in 15 minutes
       * @example DateTime.now().plus({ days: 1 }) //~> this time tomorrow
       * @example DateTime.now().plus({ days: -1 }) //~> this time yesterday
       * @example DateTime.now().plus({ hours: 3, minutes: 13 }) //~> in 3 hr, 13 min
       * @example DateTime.now().plus(Duration.fromObject({ hours: 3, minutes: 13 })) //~> in 3 hr, 13 min
       * @return {DateTime}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration);
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * Subtract a period of time to this DateTime and return the resulting DateTime
       * See {@link DateTime#plus}
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       @return {DateTime}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration).negate();
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * "Set" this DateTime to the beginning of a unit of time.
       * @param {string} unit - The unit to go to the beginning of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).startOf('month').toISODate(); //=> '2014-03-01'
       * @example DateTime.local(2014, 3, 3).startOf('year').toISODate(); //=> '2014-01-01'
       * @example DateTime.local(2014, 3, 3).startOf('week').toISODate(); //=> '2014-03-03', weeks always start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('day').toISOTime(); //=> '00:00.000-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('hour').toISOTime(); //=> '05:00:00.000-05:00'
       * @return {DateTime}
       */
      startOf(unit, { useLocaleWeeks = false } = {}) {
        if (!this.isValid)
          return this;
        const o = {}, normalizedUnit = Duration.normalizeUnit(unit);
        switch (normalizedUnit) {
          case "years":
            o.month = 1;
          case "quarters":
          case "months":
            o.day = 1;
          case "weeks":
          case "days":
            o.hour = 0;
          case "hours":
            o.minute = 0;
          case "minutes":
            o.second = 0;
          case "seconds":
            o.millisecond = 0;
            break;
          case "milliseconds":
            break;
        }
        if (normalizedUnit === "weeks") {
          if (useLocaleWeeks) {
            const startOfWeek = this.loc.getStartOfWeek();
            const { weekday } = this;
            if (weekday < startOfWeek) {
              o.weekNumber = this.weekNumber - 1;
            }
            o.weekday = startOfWeek;
          } else {
            o.weekday = 1;
          }
        }
        if (normalizedUnit === "quarters") {
          const q = Math.ceil(this.month / 3);
          o.month = (q - 1) * 3 + 1;
        }
        return this.set(o);
      }
      /**
       * "Set" this DateTime to the end (meaning the last millisecond) of a unit of time
       * @param {string} unit - The unit to go to the end of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).endOf('month').toISO(); //=> '2014-03-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('year').toISO(); //=> '2014-12-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('week').toISO(); // => '2014-03-09T23:59:59.999-05:00', weeks start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('day').toISO(); //=> '2014-03-03T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('hour').toISO(); //=> '2014-03-03T05:59:59.999-05:00'
       * @return {DateTime}
       */
      endOf(unit, opts) {
        return this.isValid ? this.plus({ [unit]: 1 }).startOf(unit, opts).minus(1) : this;
      }
      // OUTPUT
      /**
       * Returns a string representation of this DateTime formatted according to the specified format string.
       * **You may not want this.** See {@link DateTime#toLocaleString} for a more flexible formatting tool. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/formatting?id=table-of-tokens).
       * Defaults to en-US if no locale has been specified, regardless of the system's locale.
       * @param {string} fmt - the format string
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toFormat('yyyy LLL dd') //=> '2017 Apr 22'
       * @example DateTime.now().setLocale('fr').toFormat('yyyy LLL dd') //=> '2017 avr. 22'
       * @example DateTime.now().toFormat('yyyy LLL dd', { locale: "fr" }) //=> '2017 avr. 22'
       * @example DateTime.now().toFormat("HH 'hours and' mm 'minutes'") //=> '20 hours and 55 minutes'
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID3;
      }
      /**
       * Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon, such as `DateTime.DATE_FULL` or `DateTime.TIME_SIMPLE`.
       * The exact behavior of this method is browser-specific, but in general it will return an appropriate representation
       * of the DateTime in the assigned locale.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param formatOpts {Object} - Intl.DateTimeFormat constructor options and configuration options
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toLocaleString(); //=> 4/20/2017
       * @example DateTime.now().setLocale('en-gb').toLocaleString(); //=> '20/04/2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL); //=> 'April 20, 2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL, { locale: 'fr' }); //=> '28 août 2022'
       * @example DateTime.now().toLocaleString(DateTime.TIME_SIMPLE); //=> '11:32 AM'
       * @example DateTime.now().toLocaleString(DateTime.DATETIME_SHORT); //=> '4/20/2017, 11:32 AM'
       * @example DateTime.now().toLocaleString({ weekday: 'long', month: 'long', day: '2-digit' }); //=> 'Thursday, April 20'
       * @example DateTime.now().toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> 'Thu, Apr 20, 11:27 AM'
       * @example DateTime.now().toLocaleString({ hour: '2-digit', minute: '2-digit', hourCycle: 'h23' }); //=> '11:32'
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID3;
      }
      /**
       * Returns an array of format "parts", meaning individual tokens along with metadata. This is allows callers to post-process individual sections of the formatted output.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts
       * @param opts {Object} - Intl.DateTimeFormat constructor options, same as `toLocaleString`.
       * @example DateTime.now().toLocaleParts(); //=> [
       *                                   //=>   { type: 'day', value: '25' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'month', value: '05' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'year', value: '1982' }
       *                                   //=> ]
       */
      toLocaleParts(opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=false] - add the time zone format extension
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1983, 5, 25).toISO() //=> '1982-05-25T00:00:00.000Z'
       * @example DateTime.now().toISO() //=> '2017-04-22T20:47:05.335-04:00'
       * @example DateTime.now().toISO({ includeOffset: false }) //=> '2017-04-22T20:47:05.335'
       * @example DateTime.now().toISO({ format: 'basic' }) //=> '20170422T204705.335-0400'
       * @return {string}
       */
      toISO({
        format = "extended",
        suppressSeconds = false,
        suppressMilliseconds = false,
        includeOffset = true,
        extendedZone = false
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        const ext = format === "extended";
        let c = toISODate(this, ext);
        c += "T";
        c += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
        return c;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's date component
       * @param {Object} opts - options
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1982, 5, 25).toISODate() //=> '1982-05-25'
       * @example DateTime.utc(1982, 5, 25).toISODate({ format: 'basic' }) //=> '19820525'
       * @return {string}
       */
      toISODate({ format = "extended" } = {}) {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, format === "extended");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's week date
       * @example DateTime.utc(1982, 5, 25).toISOWeekDate() //=> '1982-W21-2'
       * @return {string}
       */
      toISOWeekDate() {
        return toTechFormat(this, "kkkk-'W'WW-c");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's time component
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=true] - add the time zone format extension
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime() //=> '07:34:19.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34, seconds: 0, milliseconds: 0 }).toISOTime({ suppressSeconds: true }) //=> '07:34Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ format: 'basic' }) //=> '073419.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ includePrefix: true }) //=> 'T07:34:19.361Z'
       * @return {string}
       */
      toISOTime({
        suppressMilliseconds = false,
        suppressSeconds = false,
        includeOffset = true,
        includePrefix = false,
        extendedZone = false,
        format = "extended"
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        let c = includePrefix ? "T" : "";
        return c + toISOTime(
          this,
          format === "extended",
          suppressSeconds,
          suppressMilliseconds,
          includeOffset,
          extendedZone
        );
      }
      /**
       * Returns an RFC 2822-compatible string representation of this DateTime
       * @example DateTime.utc(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 +0000'
       * @example DateTime.local(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 -0400'
       * @return {string}
       */
      toRFC2822() {
        return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in HTTP headers. The output is always expressed in GMT.
       * Specifically, the string conforms to RFC 1123.
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @example DateTime.utc(2014, 7, 13).toHTTP() //=> 'Sun, 13 Jul 2014 00:00:00 GMT'
       * @example DateTime.utc(2014, 7, 13, 19).toHTTP() //=> 'Sun, 13 Jul 2014 19:00:00 GMT'
       * @return {string}
       */
      toHTTP() {
        return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Date
       * @example DateTime.utc(2014, 7, 13).toSQLDate() //=> '2014-07-13'
       * @return {string}
       */
      toSQLDate() {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Time
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc().toSQL() //=> '05:15:16.345'
       * @example DateTime.now().toSQL() //=> '05:15:16.345 -04:00'
       * @example DateTime.now().toSQL({ includeOffset: false }) //=> '05:15:16.345'
       * @example DateTime.now().toSQL({ includeZone: false }) //=> '05:15:16.345 America/New_York'
       * @return {string}
       */
      toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {
        let fmt = "HH:mm:ss.SSS";
        if (includeZone || includeOffset) {
          if (includeOffsetSpace) {
            fmt += " ";
          }
          if (includeZone) {
            fmt += "z";
          } else if (includeOffset) {
            fmt += "ZZ";
          }
        }
        return toTechFormat(this, fmt, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 Z'
       * @example DateTime.local(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 -04:00'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeOffset: false }) //=> '2014-07-13 00:00:00.000'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeZone: true }) //=> '2014-07-13 00:00:00.000 America/New_York'
       * @return {string}
       */
      toSQL(opts = {}) {
        if (!this.isValid) {
          return null;
        }
        return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;
      }
      /**
       * Returns a string representation of this DateTime appropriate for debugging
       * @return {string}
       */
      toString() {
        return this.isValid ? this.toISO() : INVALID3;
      }
      /**
       * Returns a string representation of this DateTime appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`;
        } else {
          return `DateTime { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns the epoch milliseconds of this DateTime. Alias of {@link DateTime#toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Returns the epoch milliseconds of this DateTime.
       * @return {number}
       */
      toMillis() {
        return this.isValid ? this.ts : NaN;
      }
      /**
       * Returns the epoch seconds of this DateTime.
       * @return {number}
       */
      toSeconds() {
        return this.isValid ? this.ts / 1e3 : NaN;
      }
      /**
       * Returns the epoch seconds (as a whole number) of this DateTime.
       * @return {number}
       */
      toUnixInteger() {
        return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
      }
      /**
       * Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns a BSON serializable equivalent to this DateTime.
       * @return {Date}
       */
      toBSON() {
        return this.toJSDate();
      }
      /**
       * Returns a JavaScript object with this DateTime's year, month, day, and so on.
       * @param opts - options for generating the object
       * @param {boolean} [opts.includeConfig=false] - include configuration attributes in the output
       * @example DateTime.now().toObject() //=> { year: 2017, month: 4, day: 22, hour: 20, minute: 49, second: 42, millisecond: 268 }
       * @return {Object}
       */
      toObject(opts = {}) {
        if (!this.isValid)
          return {};
        const base = { ...this.c };
        if (opts.includeConfig) {
          base.outputCalendar = this.outputCalendar;
          base.numberingSystem = this.loc.numberingSystem;
          base.locale = this.loc.locale;
        }
        return base;
      }
      /**
       * Returns a JavaScript Date equivalent to this DateTime.
       * @return {Date}
       */
      toJSDate() {
        return new Date(this.isValid ? this.ts : NaN);
      }
      // COMPARE
      /**
       * Return the difference between two DateTimes as a Duration.
       * @param {DateTime} otherDateTime - the DateTime to compare this one to
       * @param {string|string[]} [unit=['milliseconds']] - the unit or array of units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example
       * var i1 = DateTime.fromISO('1982-05-25T09:45'),
       *     i2 = DateTime.fromISO('1983-10-14T10:30');
       * i2.diff(i1).toObject() //=> { milliseconds: 43807500000 }
       * i2.diff(i1, 'hours').toObject() //=> { hours: 12168.75 }
       * i2.diff(i1, ['months', 'days']).toObject() //=> { months: 16, days: 19.03125 }
       * i2.diff(i1, ['months', 'days', 'hours']).toObject() //=> { months: 16, days: 19, hours: 0.75 }
       * @return {Duration}
       */
      diff(otherDateTime, unit = "milliseconds", opts = {}) {
        if (!this.isValid || !otherDateTime.isValid) {
          return Duration.invalid("created by diffing an invalid DateTime");
        }
        const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };
        const units = maybeArray(unit).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = diff_default(earlier, later, units, durOpts);
        return otherIsLater ? diffed.negate() : diffed;
      }
      /**
       * Return the difference between this DateTime and right now.
       * See {@link DateTime#diff}
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units units (such as 'hours' or 'days') to include in the duration
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      diffNow(unit = "milliseconds", opts = {}) {
        return this.diff(_DateTime.now(), unit, opts);
      }
      /**
       * Return an Interval spanning between this DateTime and another DateTime
       * @param {DateTime} otherDateTime - the other end point of the Interval
       * @return {Interval}
       */
      until(otherDateTime) {
        return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
      }
      /**
       * Return whether this DateTime is in the same unit of time as another DateTime.
       * Higher-order units must also be identical for this function to return `true`.
       * Note that time zones are **ignored** in this comparison, which compares the **local** calendar time. Use {@link DateTime#setZone} to convert one of the dates if needed.
       * @param {DateTime} otherDateTime - the other DateTime
       * @param {string} unit - the unit of time to check sameness on
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; only the locale of this DateTime is used
       * @example DateTime.now().hasSame(otherDT, 'day'); //~> true if otherDT is in the same current calendar day
       * @return {boolean}
       */
      hasSame(otherDateTime, unit, opts) {
        if (!this.isValid)
          return false;
        const inputMs = otherDateTime.valueOf();
        const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });
        return adjustedToZone.startOf(unit, opts) <= inputMs && inputMs <= adjustedToZone.endOf(unit, opts);
      }
      /**
       * Equality check
       * Two DateTimes are equal if and only if they represent the same millisecond, have the same zone and location, and are both valid.
       * To compare just the millisecond values, use `+dt1 === +dt2`.
       * @param {DateTime} other - the other DateTime
       * @return {boolean}
       */
      equals(other) {
        return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
      }
      /**
       * Returns a string representation of a this time relative to now, such as "in two days". Can only internationalize if your
       * platform supports Intl.RelativeTimeFormat. Rounds down by default.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} [options.style="long"] - the style of units, must be "long", "short", or "narrow"
       * @param {string|string[]} options.unit - use a specific unit or array of units; if omitted, or an array, the method will pick the best unit. Use an array or one of "years", "quarters", "months", "weeks", "days", "hours", "minutes", or "seconds"
       * @param {boolean} [options.round=true] - whether to round the numbers in the output.
       * @param {number} [options.padding=0] - padding in milliseconds. This allows you to round up the result if it fits inside the threshold. Don't use in combination with {round: false} because the decimal output will include the padding.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelative() //=> "in 1 day"
       * @example DateTime.now().setLocale("es").toRelative({ days: 1 }) //=> "dentro de 1 día"
       * @example DateTime.now().plus({ days: 1 }).toRelative({ locale: "fr" }) //=> "dans 23 heures"
       * @example DateTime.now().minus({ days: 2 }).toRelative() //=> "2 days ago"
       * @example DateTime.now().minus({ days: 2 }).toRelative({ unit: "hours" }) //=> "48 hours ago"
       * @example DateTime.now().minus({ hours: 36 }).toRelative({ round: false }) //=> "1.5 days ago"
       */
      toRelative(options = {}) {
        if (!this.isValid)
          return null;
        const base = options.base || _DateTime.fromObject({}, { zone: this.zone }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
        let units = ["years", "months", "days", "hours", "minutes", "seconds"];
        let unit = options.unit;
        if (Array.isArray(options.unit)) {
          units = options.unit;
          unit = void 0;
        }
        return diffRelative(base, this.plus(padding), {
          ...options,
          numeric: "always",
          units,
          unit
        });
      }
      /**
       * Returns a string representation of this date relative to today, such as "yesterday" or "next month".
       * Only internationalizes on platforms that supports Intl.RelativeTimeFormat.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.unit - use a specific unit; if omitted, the method will pick the unit. Use one of "years", "quarters", "months", "weeks", or "days"
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar() //=> "tomorrow"
       * @example DateTime.now().setLocale("es").plus({ days: 1 }).toRelative() //=> ""mañana"
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar({ locale: "fr" }) //=> "demain"
       * @example DateTime.now().minus({ days: 2 }).toRelativeCalendar() //=> "2 days ago"
       */
      toRelativeCalendar(options = {}) {
        if (!this.isValid)
          return null;
        return diffRelative(options.base || _DateTime.fromObject({}, { zone: this.zone }), this, {
          ...options,
          numeric: "auto",
          units: ["years", "months", "days"],
          calendary: true
        });
      }
      /**
       * Return the min of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the minimum
       * @return {DateTime} the min DateTime, or undefined if called with no argument
       */
      static min(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("min requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.min);
      }
      /**
       * Return the max of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the maximum
       * @return {DateTime} the max DateTime, or undefined if called with no argument
       */
      static max(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("max requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.max);
      }
      // MISC
      /**
       * Explain how a string would be parsed by fromFormat()
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see description)
       * @param {Object} options - options taken by fromFormat()
       * @return {Object}
       */
      static fromFormatExplain(text, fmt, options = {}) {
        const { locale = null, numberingSystem = null } = options, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        });
        return explainFromTokens(localeToUse, text, fmt);
      }
      /**
       * @deprecated use fromFormatExplain instead
       */
      static fromStringExplain(text, fmt, options = {}) {
        return _DateTime.fromFormatExplain(text, fmt, options);
      }
      // FORMAT PRESETS
      /**
       * {@link DateTime#toLocaleString} format like 10/14/1983
       * @type {Object}
       */
      static get DATE_SHORT() {
        return DATE_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED() {
        return DATE_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED_WITH_WEEKDAY() {
        return DATE_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983'
       * @type {Object}
       */
      static get DATE_FULL() {
        return DATE_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Tuesday, October 14, 1983'
       * @type {Object}
       */
      static get DATE_HUGE() {
        return DATE_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_SIMPLE() {
        return TIME_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SECONDS() {
        return TIME_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SHORT_OFFSET() {
        return TIME_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_LONG_OFFSET() {
        return TIME_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_SIMPLE() {
        return TIME_24_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SECONDS() {
        return TIME_24_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 EDT', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SHORT_OFFSET() {
        return TIME_24_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 Eastern Daylight Time', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_LONG_OFFSET() {
        return TIME_24_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT() {
        return DATETIME_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT_WITH_SECONDS() {
        return DATETIME_SHORT_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED() {
        return DATETIME_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_SECONDS() {
        return DATETIME_MED_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, 14 Oct 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_WEEKDAY() {
        return DATETIME_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL() {
        return DATETIME_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30:33 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL_WITH_SECONDS() {
        return DATETIME_FULL_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE() {
        return DATETIME_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30:33 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE_WITH_SECONDS() {
        return DATETIME_HUGE_WITH_SECONDS;
      }
    };
  }
});

// node_modules/luxon/src/luxon.js
var init_luxon = __esm({
  "node_modules/luxon/src/luxon.js"() {
    init_datetime();
    init_duration();
    init_interval();
    init_info();
    init_zone();
    init_fixedOffsetZone();
    init_IANAZone();
    init_invalidZone();
    init_systemZone();
    init_settings();
  }
});

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian19, menuOtro;
var init_menuOtro = __esm({
  "src/modules/moduloRegistroTiempo/API/menuOtro.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_seleccionModal();
    init_fuzzySelectOrCreate();
    init_luxon();
    menuOtro = class {
      constructor(plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.selectedActivity = "";
        this.selectedGroup = "";
        this.plugin = plugin;
        this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
      }
      async menuOtro(app2, registro) {
        const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
        const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
        const placeholderOtro = "\xBFQue categoria?";
        const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
        let temaOtro;
        let siAsunto = false;
        try {
          const selectionOtro = await modalOtro.openAndAwaitSelection();
          switch (selectionOtro) {
            case "hab":
              temaOtro = await this.habitual(app2);
              break;
            case "actsAV":
            case "actsAI":
            case "actsPQ":
            case "actsPGTD":
            case "actsTI":
            case "actsRR":
              temaOtro = await this.elemSG(app2, selectionOtro);
              siAsunto = true;
              break;
            case "bus":
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          registro.detener = true;
          return error;
        }
        debugger;
        return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.grupo, areaVida: temaOtro.grupo };
      }
      async habitual(app2) {
        const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
        const actsGrupos = await this.resultYaml(app2, "actsTemas");
        let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
        return objEleccion;
      }
      async ninguno(app2) {
      }
      async elemSG(app2, tipo) {
        const actividades = await this.resultYaml(app2, tipo);
        const activeSG = await this.findMainFilesWithState(app2, tipo);
        let groups;
        debugger;
        switch (tipo) {
          case "actsAV":
            groups = activeSG.map((page) => page.frontmatter.areaVida);
            break;
          default:
            groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
            break;
        }
        let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
        const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
        let alias = foundElement == null ? void 0 : foundElement.file.path;
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
        return objEleccion;
      }
      async buscar(app2) {
      }
      async resultYaml(app2, tema) {
        var _a;
        const file = app2.vault.getAbstractFileByPath(this.pathCampos);
        try {
          if (file instanceof import_obsidian19.TFile) {
            const metadata = app2.metadataCache.getFileCache(file);
            const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
            const resultado = [];
            if (Array.isArray(arregloResult)) {
              arregloResult.forEach((item) => {
                if (Array.isArray(item) && item.length >= 2) {
                  resultado.push({ grupo: item[0], actividad: item[1] });
                }
              });
            }
            return resultado;
          }
        } catch (error) {
          console.error("Error obteniendo el archivo de campos:", error);
          throw error;
        }
        return [];
      }
      async getFrontmatterField(app2, file, field) {
        try {
          const tFile = app2.vault.getAbstractFileByPath(file);
          if (tFile instanceof import_obsidian19.TFile) {
            const cache = app2.metadataCache.getFileCache(tFile);
            const frontmatter = cache == null ? void 0 : cache.frontmatter;
            if (frontmatter && frontmatter.hasOwnProperty(field)) {
              const fieldValue = frontmatter[field];
              if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
                console.log("El campo est\xE1 vac\xEDo o no existe.");
                return null;
              } else {
                console.log("Frontmatter consultado con \xE9xito");
                return fieldValue;
              }
            } else {
              console.log("El campo no existe en el frontmatter.");
              return null;
            }
          } else {
            console.error("El archivo no existe o no es un archivo de texto.");
            return null;
          }
        } catch (err) {
          console.error("Error al consultar el frontmatter", err);
          return null;
        }
      }
      // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
      async findMainFilesWithState(app2, tipo) {
        var _a;
        const propertiesTipo = {
          actsAV: {
            folder: this.plugin.settings.folder_AreasVida,
            sameName: false,
            nameFile: this.plugin.settings.nameFile_AreasVida
          },
          actsAI: {
            folder: this.plugin.settings.folder_AreasInteres,
            sameName: true,
            nameFile: this.plugin.settings.nameFile_AreasInteres
          },
          actsPQ: {
            folder: this.plugin.settings.folder_ProyectosQ,
            sameName: false,
            nameFile: ""
          },
          actsPGTD: {
            folder: this.plugin.settings.folder_ProyectosGTD,
            sameName: false,
            nameFile: ""
          },
          actsTI: {
            folder: this.plugin.settings.folder_TemasInteres,
            sameName: false,
            nameFile: ""
          },
          actsRR: {
            folder: this.plugin.settings.folder_RecursosRecurrentes,
            sameName: false,
            nameFile: ""
          }
          // Puedes continuar añadiendo más casos aquí
        };
        debugger;
        const activeFilesWithFrontmatter = [];
        switch (tipo) {
          case "actsAV":
            const { folder, sameName, nameFile } = propertiesTipo[tipo];
            let ahora = DateTime.now().toFormat("yyyy-Qq");
            const files = app2.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && file.name.startsWith(ahora));
            for (let file of files) {
              let metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
                activeFilesWithFrontmatter.push({ file, frontmatter: metadata });
              }
            }
            break;
          default:
            if (propertiesTipo.hasOwnProperty(tipo)) {
              const { folder: folder2, sameName: sameName2, nameFile: nameFile2 } = propertiesTipo[tipo];
              const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder2));
              for (const file of filesInFolder) {
                if (sameName2 && file.basename === nameFile2 || !sameName2) {
                  const metadata = app2.metadataCache.getFileCache(file);
                  if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
                    activeFilesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
                  }
                }
              }
            } else {
              console.log("Selecci\xF3n no reconocida:", tipo);
              return [];
            }
            break;
        }
        return activeFilesWithFrontmatter;
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian20, utilsAPI;
var init_utilsAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/utilsAPI.ts"() {
    "use strict";
    import_obsidian20 = require("obsidian");
    init_seleccionModal();
    init_menuOtro();
    init_registroTiempoAPI();
    utilsAPI = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.menuOtro = new menuOtro(plugin);
      }
      // La declaración del método estaba asi: buscarRegistrosActivos(app: App, registro: any)
      // Devuelve el file del registro activo. Utilizado para cuando necesito obtener el dato solamente de si hay algún registro activo.
      async buscarRegistrosActivos(app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const folder = this.plugin.settings.folder_RegistroTiempo;
        for (let file of files) {
          if (file.path.startsWith(folder)) {
            const metadata = app2.metadataCache.getFileCache(file);
            if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
              return file;
            }
          }
        }
        return;
      }
      // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
      async crearObjetoRegistro(plugin) {
        const activo = plugin.app.workspace.getActiveFile();
        if (!activo) {
          return {
            activo: null,
            nombre: "Registro sin archivo activo",
            folder: plugin.settings.folder_RegistroTiempo,
            indice: plugin.settings.indice_RegistroTiempo,
            id: null,
            fecha: this.formatearFecha(/* @__PURE__ */ new Date()),
            indice_DVJS: `"${plugin.settings.indice_RegistroTiempo}"`,
            aliases: []
            // o incluso podrías asignar algún alias por defecto si lo deseas
          };
        }
        const folder = plugin.settings.folder_RegistroTiempo;
        const indice = plugin.settings.indice_RegistroTiempo;
        let maxId = 0;
        const files = plugin.app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter(
          (file) => file.path.startsWith(folder)
        );
        registrosExistentes.forEach((file) => {
          var _a;
          const metadata = (_a = plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        const nextId = maxId + 1;
        const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
        const metadataActivo = plugin.app.metadataCache.getFileCache(activo);
        const aliases = metadataActivo && metadataActivo.frontmatter && metadataActivo.frontmatter.aliases ? metadataActivo.frontmatter.aliases : [];
        return {
          activo,
          nombre: activo.basename,
          folder,
          indice,
          id: nextId,
          fecha: fechaCompleta,
          indice_DVJS: `"${indice}"`,
          aliases
          // Se agrega el campo aliases al registro
        };
      }
      formatearFecha(fecha) {
        const offset2 = fecha.getTimezoneOffset() * 6e4;
        const fechaLocal = new Date(fecha.getTime() - offset2);
        const fechaFormato = fechaLocal.toISOString().split("T")[0];
        const dias = [
          "Domingo",
          "Lunes",
          "Martes",
          "Mi\xE9rcoles",
          "Jueves",
          "Viernes",
          "S\xE1bado"
        ];
        const diaSemana = dias[fecha.getDay()];
        const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
        return `${fechaFormato} ${diaSemana} ${horaFormato}`;
      }
      // Método que verifica si hay registros ACtivos y pregunta si quiere cerrarlos.
      async verificarTareasActivas(registro, app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const tareasActivas = [];
        for (let file of files) {
          if (file.path.startsWith(registro.folder)) {
            const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
              tareasActivas.push({
                file,
                titulo: metadata.titulo,
                aliases: metadata.aliases || file.basename
              });
            }
          }
        }
        if (tareasActivas.length === 1) {
          const tareaActiva = tareasActivas[0];
          const deseaDetener = await this.mostrarSugerencia(
            `La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`
          );
          if (deseaDetener === void 0) {
            new import_obsidian20.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
            registro.detener = true;
            return;
          }
          if (deseaDetener) {
            debugger;
            const registroTiempoAPInstance = new registroTiempoAPI(this.plugin);
            await registroTiempoAPInstance.cerrarRegistro(tareaActiva.file);
            registro.detener = false;
          } else {
            new import_obsidian20.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
            registro.detener = true;
            return;
          }
        } else if (tareasActivas.length > 1) {
          new import_obsidian20.Notice(
            "Hay un error con la cantidad de tareas corriendo en este momento."
          );
          registro.detener = true;
        } else {
          console.log("No hay m\xE1s tareas corriendo.");
          registro.detener = false;
        }
      }
      mostrarSugerencia(mensaje) {
        return new Promise((resolve, reject) => {
          let seleccionado = false;
          const modal = new import_obsidian20.Modal(app);
          modal.contentEl.createEl("h1", { text: mensaje });
          const buttonsContainer = modal.contentEl.createEl("div");
          const hacerSeleccion = (seleccion) => {
            seleccionado = true;
            modal.close();
            resolve(seleccion);
          };
          const yesButton = buttonsContainer.createEl("button", {
            text: "S\xED"
          });
          yesButton.addEventListener("click", () => hacerSeleccion(true));
          const noButton = buttonsContainer.createEl("button", {
            text: "No"
          });
          noButton.addEventListener("click", () => hacerSeleccion(false));
          modal.onClose = () => {
            if (!seleccionado) {
              reject(new Error("Modal cerrado sin selecci\xF3n"));
            }
          };
          modal.contentEl.addEventListener("keydown", (e) => {
            var _a;
            switch (e.key) {
              case "ArrowLeft":
                yesButton.focus();
                break;
              case "ArrowRight":
                noButton.focus();
                break;
              case "Enter":
                (_a = document.activeElement) == null ? void 0 : _a.click();
                break;
            }
          });
          yesButton.focus();
          modal.open();
        });
      }
      async definirTipoRegistro(registro, app2) {
        const totTareas = await this.encontrarTareasPendientes(app2);
        let opcionesTitulo;
        let valoresOpcion;
        if (registro.activo) {
          let valorMostrar;
          if (registro.aliases && registro.aliases.length >= 2) {
            valorMostrar = registro.aliases[1];
          } else if (registro.aliases && registro.aliases.length >= 1) {
            valorMostrar = registro.aliases[0];
          } else {
            valorMostrar = registro.nombre;
          }
          if (totTareas.length > 0) {
            opcionesTitulo = [valorMostrar, "Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Nota", "Tarea", "Otro"];
          } else {
            opcionesTitulo = [valorMostrar, "Otro"];
            valoresOpcion = ["Nota", "Otro"];
          }
        } else {
          if (totTareas.length > 0) {
            opcionesTitulo = ["Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Tarea", "Otro"];
          } else {
            opcionesTitulo = ["Otro"];
            valoresOpcion = ["Otro"];
          }
        }
        const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
        const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
        try {
          const selection = await modalMenu1.openAndAwaitSelection();
          registro.tipoRegistro = selection;
          switch (registro.tipoRegistro) {
            case "Nota":
              if (registro.activo) {
                registro.titulo = registro.nombre;
                registro.siAsunto = true;
                registro = this.copiarCampos(registro);
              } else {
                new import_obsidian20.Notice("No hay nota activa para asignar");
                registro.tipoRegistro = "Otro";
              }
              break;
            case "Tarea":
              await this.elegirTareaParaRegistro(app2, registro, totTareas);
              break;
            default:
              let respuesta = await this.menuOtro.menuOtro(app2, registro);
              Object.assign(registro, respuesta);
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
        }
      }
      copiarCampos(registro) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _i;
        let nombre = registro.activo.basename;
        let nota = app.metadataCache.getFileCache(registro.activo);
        if (((_a = nota.frontmatter) == null ? void 0 : _a.type) === "PQ") {
          registro.proyectoQ = nombre;
          registro.proyectoGTD = "";
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PGTD") {
          registro.proyectoGTD = [nombre];
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = registro.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          registro.proyectoQ = "";
          if (Array.isArray(nota.frontmatter.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.proyectoQ = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          registro.proyectoGTD = "";
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        }
        registro.areaInteres = [];
        if (Array.isArray((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaInteres)) {
          registro.areaInteres = registro.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
        } else {
          if ((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres) {
            registro.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
        }
        registro.areaVida = "";
        if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            registro.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            registro.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.areaVida = "No es de ning\xFAn Area de Vida";
        }
        return registro;
      }
      async encontrarTareasPendientes(app2) {
        let tareasPendientes = [];
        const archivos = app2.vault.getMarkdownFiles();
        const archivosRelevantes = archivos.filter(
          (archivo) => !archivo.path.includes("Plantillas")
        );
        for (const archivo of archivosRelevantes) {
          const contenido = await app2.vault.read(archivo);
          const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
          const tareasConArchivo = coincidencias.map((tarea) => {
            return { tarea: tarea.trim(), archivo };
          });
          tareasPendientes = tareasPendientes.concat(tareasConArchivo);
        }
        return tareasPendientes;
      }
      async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
        const placeholder = "Elige la tarea que vas a registrar.";
        let promesasLimpias = tareasPendientes.map(
          (tareaObj) => this.limpiarTextoTarea(tareaObj.tarea)
        );
        try {
          const tareasLimpias = await Promise.all(promesasLimpias);
          const tareasLimpiasConArchivo = tareasPendientes.map(
            (tareaObj, index) => {
              return {
                tarea: tareasLimpias[index],
                // Tarea limpia
                archivo: tareaObj.archivo
                // Referencia al archivo original
              };
            }
          );
          const longitud = tareasLimpiasConArchivo.length;
          const arregloDeIndices = Array.from(
            { length: longitud },
            (_, indice) => indice
          );
          const modalMenu = new SeleccionModal(
            app2,
            tareasLimpiasConArchivo.map((b) => b.tarea),
            arregloDeIndices,
            placeholder
          );
          try {
            const selectedIndex = await modalMenu.openAndAwaitSelection();
            const seleccion = tareasLimpiasConArchivo[selectedIndex];
            registro.titulo = seleccion.tarea;
            registro.nombre = seleccion.archivo.basename;
            registro.siAsunto = true;
          } catch (error) {
            registro.detener = true;
            console.error("Error o modal cerrado sin selecci\xF3n:", error);
          }
        } catch (error) {
          console.error("Hubo un error al limpiar las tareas:", error);
        }
      }
      limpiarTextoTarea(titulo) {
        return new Promise((resolve) => {
          let textoLimpio = titulo.split("\n")[0];
          textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
          textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
          textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
          const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
          textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
          textoLimpio = textoLimpio.replace(/\s+/g, " ");
          resolve(textoLimpio.trim());
        });
      }
      async construirNombreyAlias(registro, app2) {
        let nombreBase = `${registro.folder}/RT - ${registro.id}`;
        let aliasBase = this.limpiarAlias(registro.titulo);
        aliasBase = aliasBase.length > 195 ? aliasBase.slice(0, 195) : aliasBase;
        const maxIdSec = await this.calcularUltimoIdSec(registro.titulo, registro.folder, app2);
        registro.idSec = maxIdSec + 1;
        let aliasLimpio = aliasBase;
        if (registro.idSec > 1) {
          aliasLimpio += ` - ${registro.idSec}`;
        }
        const nuevoAlias = `RT - ${aliasLimpio}`;
        if (!Array.isArray(registro.aliases)) {
          registro.aliases = [];
        }
        if (registro.idSec > 1) {
          registro.aliases = registro.aliases.filter((a) => {
            if (a.startsWith(`RT - ${aliasBase} - `) && a !== nuevoAlias) {
              return false;
            }
            return true;
          });
        }
        if (!registro.aliases.includes(nuevoAlias)) {
          registro.aliases.unshift(nuevoAlias);
        }
        if (registro.tipoRegistro === "Nota") {
          const archivoActivo = app2.workspace.getActiveFile();
          if (archivoActivo) {
            const metadatosActivo = app2.metadataCache.getFileCache(archivoActivo);
            const aliasesActivo = metadatosActivo && metadatosActivo.frontmatter ? metadatosActivo.frontmatter.aliases : void 0;
            if (aliasesActivo) {
              const additionalAliases = Array.isArray(aliasesActivo) ? aliasesActivo : [aliasesActivo];
              additionalAliases.forEach((alias) => {
                const aliasConPrefijo = `RT - ${alias}`;
                if (!registro.aliases.includes(aliasConPrefijo)) {
                  registro.aliases.push(aliasConPrefijo);
                }
              });
            }
          }
        }
        registro.nameFile = nombreBase;
      }
      /**
       * Calcula el último idSec usado para registros con el mismo título en la carpeta especificada.
       */
      async calcularUltimoIdSec(titulo, folder, app2) {
        const archivos = app2.vault.getFiles();
        let max = 0;
        for (const archivo of archivos) {
          if (archivo.path.startsWith(folder)) {
            const metadatos = app2.metadataCache.getFileCache(archivo);
            if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === titulo) {
              const idSec = metadatos.frontmatter.idSec;
              if (idSec !== void 0 && idSec > max) {
                max = idSec;
              }
            }
          }
        }
        return max;
      }
      limpiarAlias(titulo) {
        const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
        let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
        tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
        return tituloLimpio.trim();
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts
var init_RegistroTiempo = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts
var init_SesionLectura = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/API/SesionLectura.ts
var SesionLectura_exports = {};
__export(SesionLectura_exports, {
  SesionLectura: () => SesionLectura
});
var import_obsidian21, SesionLectura;
var init_SesionLectura2 = __esm({
  "src/modules/moduloRegistroTiempo/API/SesionLectura.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian21 = require("obsidian");
    init_SesionLectura();
    init_RTBase();
    init_luxon();
    SesionLectura = class extends RTBase {
      constructor(plugin, infoSubsistema) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.nota = {};
        this.infoSubsistema = infoSubsistema;
      }
      async getId() {
        var _a, _b, _c;
        let maxId = 0;
        debugger;
        const files = app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
        registrosExistentes.forEach((file) => {
          var _a2;
          const metadata = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        this.nota.id = maxId + 1;
        const currentNotePath = (_a = app.workspace.getActiveFile()) == null ? void 0 : _a.path;
        const currentNota = (_b = app.metadataCache.getFileCache(app.workspace.getActiveFile())) == null ? void 0 : _b.frontmatter;
        if (currentNota) {
          const existingSessions = registrosExistentes.filter((file) => {
            var _a2, _b2;
            return file.path !== currentNotePath && ((_b2 = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) == null ? void 0 : _b2.titulo) === currentNota.titulo;
          });
          if (existingSessions.length > 0) {
            const sortedSessions = existingSessions.sort((a, B) => parseInt(B.path.match(/[0-9]+/)[0]) - parseInt(A.path.match(/[0-9]+/)[0]));
            const lastSL = (_c = app.metadataCache.getFileCache(sortedSessions[0])) == null ? void 0 : _c.frontmatter;
            this.nota.idSec = parseInt(lastSL.idSec) + 1;
            this.nota.pagInicio = lastSL.pagFin;
          } else {
            this.nota.idSec = 1;
            this.nota.pagInicio = 1;
          }
        } else {
          this.nota.idSec = 1;
          this.nota.pagInicio = 1;
        }
        return this.nota.id;
      }
      async getNota() {
        return this.nota;
      }
      async getParametrosLibro() {
        debugger;
        const currentFile = app.workspace.getActiveFile();
        if (!currentFile || !currentFile.path)
          return;
        const metadataCache = app.metadataCache;
        const fileCache = metadataCache.getFileCache(currentFile);
        if (!fileCache || !fileCache.frontmatter || fileCache.frontmatter.type !== "LB") {
          new Notice("La nota activa debe ser de tipo Libro en la Bibloteca para poder crear una sesi\xF3n de Lectura.");
          return;
        }
        const frontMatter = fileCache.frontmatter;
        this.nota["paginas"] = frontMatter.paginas;
        this.nota["titulo"] = frontMatter.titulo;
        this.nota["palabrasPorHoja"] = frontMatter.palabrasPorHoja;
      }
      async getAsunto() {
        var _a, _b, _c, _d, _e, _f, _g;
        let padres = [];
        let activo = app.workspace.getActiveFile();
        let siAsunto = true;
        let nombre = "";
        let nota;
        if (activo != null) {
          nombre = activo.basename;
          nota = app.metadataCache.getFileCache(activo);
          nota.frontmatter = nota.frontmatter || {};
          nota.frontmatter.file = {};
          Object.assign(nota.frontmatter.file, activo);
          padres.unshift(nombre);
          debugger;
          this.nota.asuntoDefinido = true;
          this.nota.proyectoQ = "";
          if (Array.isArray((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.proyectoQ)) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.proyectoQ) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.proyectoGTD = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoGTD)) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoGTD) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.areaInteres = [];
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
          this.nota.areaVida = "";
          if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaVida) {
            if (Array.isArray(nota.frontmatter.areaVida)) {
              this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof nota.frontmatter.areaVida === "string") {
              this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          return { siAsunto, nombre: padres };
        }
      }
      async getAliases() {
        this.nota.aliases = [];
        this.nota.aliases.push(`SL - ${this.nota.idSec} / ${this.nota.titulo}`);
        return this.nota.aliases;
      }
      async getFecha() {
        let fechaActual = DateTime.now();
        fechaActual = fechaActual.setLocale("es");
        fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
        this.nota.fecha = fechaActual;
        return fechaActual;
      }
      async getRename() {
        debugger;
        const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        const file = this.tp.file.config.target_file;
        const existe = app.vault.getAbstractFileByPath(newName);
        try {
          if (existe instanceof import_obsidian21.TFile) {
            const nombreFile = newName.split("/");
            const borrar = await this.suggester(
              ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
              [true, false],
              true,
              `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
            );
            if (borrar) {
              await app.vault.delete(existe);
              if (file instanceof import_obsidian21.TFile) {
                await app.vault.rename(file, newName);
                console.log("Archivo renombrado con \xE9xito.");
                return newName;
              }
            } else {
              console.log("Cancelando la creaci\xF3n del archivo.");
              throw new Error("Proceso cancelado por el usuario.");
            }
          } else {
            if (file instanceof import_obsidian21.TFile) {
              await app.vault.rename(file, newName);
              console.log("Archivo renombrado con \xE9xito.");
              return newName;
            }
          }
        } catch (error) {
          console.error("Error al cambiar el nombre", error);
          throw error;
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/RTBase.ts
var import_obsidian22, import_obsidian23, RTBase;
var init_RTBase = __esm({
  "src/modules/moduloRegistroTiempo/API/RTBase.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian22 = require("obsidian");
    import_obsidian23 = require("obsidian");
    init_SesionLectura();
    RTBase = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.infoSubsistema = {};
      }
      async iniciarRegistro(infoSubsistema, campos) {
        debugger;
        if (typeof infoSubsistema === "object" && infoSubsistema !== null) {
          if (!campos || !Array.isArray(campos)) {
            throw new Error("Campos debe ser un array definido.");
          }
          this.nota = {};
          let nota;
          Object.assign(this.infoSubsistema, infoSubsistema);
          debugger;
          if (this.infoSubsistema.defined) {
            this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
            this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
            Object.assign(this.nota, infoSubsistema);
          }
          let fieldHandler;
          switch (this.infoSubsistema.type) {
            case "SL":
              const SesionLectura3 = await Promise.resolve().then(() => (init_SesionLectura2(), SesionLectura_exports));
              fieldHandler = new SesionLectura3.SesionLectura(this.plugin, this.infoSubsistema);
              break;
            default:
              throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
          }
          try {
            for (let campo of campos) {
              const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
              if (typeof fieldHandler[functionName] === "function") {
                this.nota[campo] = await fieldHandler[functionName]();
                nota = await fieldHandler.getNota();
                for (const key in nota) {
                  if (!(key in this.nota)) {
                    this.nota[key] = nota[key];
                  }
                }
              } else {
                console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
              }
            }
          } catch (error) {
            console.error("No se pudo crear el objeto de registro.", error);
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
          return this.nota;
        } else {
          try {
            const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
            await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
            return registro;
          } catch (error) {
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
        }
      }
      async cerrarRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          let infoNota;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else if (registro instanceof import_obsidian22.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          let infoNota = { file: registro };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          let infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var import_obsidian24, registroTiempoAPI;
var init_registroTiempoAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian24 = require("obsidian");
    init_RegistroTiempo();
    init_RTBase();
    registroTiempoAPI = class extends RTBase {
      constructor(plugin) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
      }
      // Invocado desde el template de templater Paso 3 de 3
      async retomarRegistro(id) {
        var _a, _b, _c, _d;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        try {
          let quitarDobleCorchete2 = function(str) {
            if (str.startsWith("[[") && str.endsWith("]]")) {
              return str.slice(2, -2);
            }
            return str;
          }, normalizarArray2 = function(arr) {
            return arr.map((item) => {
              if (typeof item === "string") {
                return quitarDobleCorchete2(item);
              }
              return item;
            });
          };
          var quitarDobleCorchete = quitarDobleCorchete2, normalizarArray = normalizarArray2;
          const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
          await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
          if (registro.detener) {
            return registro;
          }
          const files = this.plugin.app.vault.getMarkdownFiles();
          let registroAntiguo;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === parseInt(id)) {
                registroAntiguo = { file, frontmatter: metadata };
                break;
              }
            }
          }
          if (!registroAntiguo) {
            new Notice(`No se encontr\xF3 el registro antiguo con ID: ${id}`);
            registro.detener = true;
            return registro;
          }
          const fm = registroAntiguo.frontmatter;
          registro.titulo = (_b = fm.titulo) != null ? _b : "Sin Titulo";
          registro.asuntoRetomado = (_c = fm.asunto) != null ? _c : null;
          registro.idSec = ((_d = fm.idSec) != null ? _d : 0) + 1;
          registro.areaVida = "";
          if (typeof fm.areaVida === "string") {
            registro.areaVida = quitarDobleCorchete2(fm.areaVida);
          }
          registro.areaInteres = [];
          if (Array.isArray(fm.areaInteres)) {
            registro.areaInteres = normalizarArray2(fm.areaInteres);
          }
          registro.proyectoGTD = [];
          if (Array.isArray(fm.proyectoGTD)) {
            registro.proyectoGTD = normalizarArray2(fm.proyectoGTD);
          }
          registro.proyectoQ = [];
          if (Array.isArray(fm.proyectoQ)) {
            registro.proyectoQ = normalizarArray2(fm.proyectoQ);
          }
          registro.aliases = [];
          if (Array.isArray(fm.aliases)) {
            registro.aliases = normalizarArray2(fm.aliases);
          }
          await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
          return registro;
        } catch (error) {
          console.error(error);
          new Notice("No se pudo crear el objeto de registro al retomar.");
          return null;
        }
      }
      // Invocado para crear el template de Retomar Paso 1 de 3
      async retomarTarea(id) {
        debugger;
        const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
        const template = app.vault.getAbstractFileByPath(filePath);
        if (template instanceof import_obsidian24.TFile) {
          console.log("Archivo encontrado:", template);
        } else {
          console.log("Archivo no encontrado.");
        }
        const filename = "Retomar " + id;
        const folder = app.vault.getAbstractFileByPath("Inbox");
        let crearNota = this.tp.file.static_functions.get("create_new");
        await crearNota(template, filename, false, folder).basename;
      }
      // Implementación del método con unión de tipos para el parámetro id
      async detalleRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        let infoNota;
        debugger;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
        } else if (registro instanceof import_obsidian24.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          infoNota = { file: registro };
          Object.assign(infoNota, metadata);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
        }
        let campos = ["descripcion_RegistroTiempo"];
        debugger;
        let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(infoNota, campos);
        let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
        new Notice(`Descripci\xF3n actualizada: ${textoResultado}`);
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian70 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Archivo de Bandeja de Entrada.").setDesc("Establece la ruta de la Bandeja de entrada GTD.").addText((text) => text.setValue(this.plugin.settings.file_Inbox).onChange(async (value) => {
          this.plugin.settings.file_Inbox = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const transaccionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Transacciones"' });
        transaccionesTitle.setAttribute("data-title", 'Subsistema de "transacciones"');
        transaccionesTitle.style.cursor = "pointer";
        const transaccionesContent = tabContent.createDiv();
        transaccionesContent.style.display = "none";
        transaccionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(transaccionesContent).setName("Carpeta de Modulos del Sistema de Transacciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de las transacciones.").addText((text) => text.setValue(this.plugin.settings.folder_Transacciones).onChange(async (value) => {
          this.plugin.settings.folder_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(transaccionesContent).setName("\xCDndice de Transacciones").setDesc("Establece la ruta del \xEDndice de Transacciones.").addText((text) => text.setValue(this.plugin.settings.indice_Transacciones).onChange(async (value) => {
          this.plugin.settings.indice_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
  openTab(arg0) {
    throw new Error("Method not implemented.");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");

// src/modules/moduloBase/utils/fileLinkModal.ts
var import_obsidian3 = require("obsidian");
var FileLinkModal = class extends import_obsidian3.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    let { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.justifyContent = "center";
    contentEl.style.alignItems = "center";
    contentEl.style.height = "50%";
    contentEl.createEl("h1", {
      text: "Insertar el link de un archivo.",
      attr: { style: "text-align: center;" }
      // Asegura que el texto del título esté centrado si es más largo que una línea
    });
    const inputContainer = contentEl.createDiv();
    inputContainer.style.margin = "10px";
    const fileInput = inputContainer.createEl("input", { type: "file" });
    fileInput.style.display = "none";
    const fileButton = inputContainer.createEl("button", {
      text: "Seleccione su archivo",
      cls: "mod-cta"
    });
    fileButton.style.padding = "5px 10px";
    fileButton.style.fontSize = "16px";
    fileButton.style.marginTop = "5px";
    fileButton.style.cursor = "pointer";
    fileButton.onclick = () => fileInput.click();
    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        this.insertLinkAtCursor(file.path, file.name);
      }
      this.close();
    };
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  async insertLinkAtCursor(filePath, fileName) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (activeLeaf) {
      const editor = activeLeaf.view.sourceMode.cmEditor;
      const cursor = editor.getCursor();
      const linkText = `[${fileName}](<file://${filePath}>)`;
      editor.replaceRange(linkText, cursor);
    }
  }
};
async function insertFileLink(app2) {
  new FileLinkModal(app2).open();
}

// src/modules/moduloBase/commands.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian4 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian5.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
  const comando4 = plugin.addCommand({
    id: "crear-link-Archivo",
    name: "Crear un link a archivo del Disco.",
    callback: async () => {
      await insertFileLink(app);
    }
  });
  plugin.registeredCommandIdsMB.push(comando4.id);
  const comando5 = plugin.addCommand({
    id: "abrir-nota-activa",
    name: "Abrir Nota Activa",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-nota-activa");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-nota-activa"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-nota-activa")[0]
      );
    }
  });
  plugin.registeredCommandIdsMB.push(comando5.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian10 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian7 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian11 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian17 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian14 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian13 = require("obsidian");
init_seleccionModal();
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset2 = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset2);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian13.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian13.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian13.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian13.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian14.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian15 = require("obsidian");
var modal_Ahora = class extends import_obsidian15.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian15.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian15.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian15.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian16.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian16.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
  const id4 = plugin.addCommand({
    id: "vista-registro-tiempo-activa",
    name: "Mostrar RT Activo",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-registro-activo");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-registro-activo"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-registro-activo")[0]
      );
    }
  });
  plugin.registeredCommandIdsRT.push(id4.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian16.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  moduloGTD: true,
  moduloTabTitle: true,
  // Modulo titulo de pestañas.
  moduloTaskManager: true,
  moduloDataviewQueries: true,
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_RepositorioLibros: "Subsistemas/Libros/Repositorio",
  indice_RepositorioLibros: "Subsistemas/Libros/Indice Repositorio Libros",
  folder_Biblioteca: "Subsistemas/Libros/Biblioteca",
  indice_Biblioteca: "Subsistemas/Libros/Indice Biblioteca",
  folder_KindleNotes: "Subsistemas/Libros/Kindle",
  indice_KindleNotes: "Subsistemas/Libros/Kindle/Indice Kindle",
  //folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  //indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Transacciones: "Subsistemas/Transacciones",
  indice_Transacciones: "Subsistemas/Transacciones/Indice Transacciones",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  folder_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Contenido",
  indice_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Indice Contenido para Estudio",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes",
  folder_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_ProyectosQ: "Estructura/Proyectos de Q",
  indice_ProyectosQ: "Estructura/Proyectos de Q/Indice Proyectos de Q",
  file_Inbox: "Estructura/GTD/Bandeja de Entrada/Bandeja de Entrada",
  folder_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Estructura/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Estructura/GTD/Revision Semanal/Indice Revision Semanal",
  folder_SistemaGTD: "Estructura/GTD/Sistema GTD/Sistema",
  indice_SistemaGTD: "Estructura/GTD/Sistema GTD/Indice Sistema GTD",
  // Journal
  folder_Diario: "Estructura/Journal/Diario/Notas",
  indice_Diario: "Estructura/Journal/Diario/Indice Diario",
  folder_Semanal: "Estructura/Journal/Semanal/Notas",
  indice_Semanal: "Estructura/Journal/Semanal/Indice Semanal",
  folder_Mensual: "Estructura/Journal/Mensual/Notas",
  indice_Mensual: "Estructura/Journal/Mensual/Indice Mensual",
  folder_Trimestral: "Estructura/Journal/Trimestral/Notas",
  indice_Trimestral: "Estructura/Journal/Trimestral/Indice Trimestral",
  folder_Anual: "Estructura/Journal/Anual/Notas",
  indice_Anual: "Estructura/Journal/Anual/Indice Anual",
  // COMPASS
  folder_CompassAnual: "Estructura/Compass/Reportes/Anual",
  indice_CompassAnual: "Estructura/Compass/Reportes/Indice Compass Anual",
  folder_CompassTrimestral: "Estructura/Compass/Reportes/Trimestral",
  indice_CompassTrimestral: "Estructura/Compass/Reportes/Indice Compass trimestral",
  folder_ObjCompassAnual: "Estructura/Compass/Objetivos/Anual",
  indice_ObjCompassAnual: "Estructura/Compass/Objetivos/Indice Compass Anual",
  folder_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Trimestral",
  indice_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Indice Compass trimestral",
  // Registros Personales
  folder_Agradecimientos: "Registros Personales/Agradecimientos/Notas",
  indice_Agradecimientos: "Registros Personales/Agradecimientos/Indice Agradecimientos",
  folder_Reflexiones: "Registros Personales/Reflexiones/Notas",
  indice_Reflexiones: "Registros Personales/Reflexiones/Indice Reflexiones",
  folder_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Notas",
  indice_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Indice Registros Akashikos"
};

// src/main.ts
init_registroTiempoAPI();

// src/modules/noteLifecycleManager/API/starterAPI.ts
var import_obsidian43 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var import_obsidian27 = require("obsidian");

// src/modules/noteLifecycleManager/FieldHandlerUtils.ts
var import_obsidian25 = require("obsidian");
init_luxon();
var FieldHandlerUtils = class {
  static async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian25.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  // Esta función sale de menuOtro, de registro Tiempo. Revisar si debo sincronizarlas.
  static async findMainFilesWithState(tipo, parametro, plugin) {
    var _a, _b, _c;
    const propertiesTipo = {
      AV: {
        folder: plugin.settings.folder_AreasVida
      },
      AI: {
        folder: plugin.settings.folder_AreasInteres
      },
      PQ: {
        folder: plugin.settings.folder_ProyectosQ
      },
      PGTD: {
        folder: plugin.settings.folder_ProyectosGTD
      },
      TI: {
        folder: plugin.settings.folder_TemasInteres
      },
      RR: {
        folder: plugin.settings.folder_RecursosRecurrentes
      },
      TQ: {
        folder: plugin.settings.folder_Trimestral
      },
      AY: {
        folder: plugin.settings.folder_Anual
      }
      // Puedes continuar añadiendo más casos aquí
    };
    if (!propertiesTipo[tipo]) {
      throw new Error(`Tipo ${tipo} no es v\xE1lido.`);
    }
    const activeFilesWithFrontmatter = [];
    let files, trimestre;
    const folder = propertiesTipo[tipo].folder;
    switch (tipo) {
      case "AV":
        if (!parametro) {
          trimestre = DateTime.now().toFormat("yyyy-Qq");
        } else {
          trimestre = parametro;
        }
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo") && file.name.startsWith(trimestre));
        for (let file of files) {
          let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      case "AI":
      case "TQ":
      case "AY":
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      default:
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_c = app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
    }
    return activeFilesWithFrontmatter;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandlerBase.ts
var import_obsidian26 = require("obsidian");
var NoteFieldHandlerBase = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.plugin = plugin;
    this.nota = {};
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    return maxId + 1;
  }
  async getFecha() {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);
    const currentDay = (/* @__PURE__ */ new Date()).toLocaleDateString("es-ES", { weekday: "long" });
    const formattedDate = `${currentDate} ${currentDay}`;
    this.nota.fecha = formattedDate;
    return formattedDate;
  }
  async getAliases() {
    const id = await this.getId();
    return [`${this.infoSubsistema.typeName} ${id}`];
  }
  async getRename() {
    const fecha = this.nota.fecha;
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.typeName} ${fecha}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian26.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian26.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian26.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var AgradecimientosFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Agradecimiento")) {
      fecha = title.split("Agradecimiento ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es el agradecimiento??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getAgradecimientos() {
    let agradecimientos = [];
    let numAgradecimientos = 0;
    let otra;
    do {
      const agradecimiento = await this.prompt("\xBFDe qu\xE9 est\xE1s agradecido?", `Gracias por ${numAgradecimientos}`, false, true);
      agradecimientos.push(agradecimiento);
      numAgradecimientos += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro agradecimiento?");
    } while (otra);
    return agradecimientos;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/ReflexionesFieldHandlers.ts
var import_obsidian28 = require("obsidian");
var ReflexionesFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Reflexion")) {
      fecha = title.split("Reflexion ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es la reflexi\xF3n??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getReflexion() {
    let reflexiones = [];
    let numReflexiones = 0;
    let otra;
    do {
      const reflexion = await this.prompt("Que estas pensando?", `P${numReflexiones}`, false, true);
      reflexiones.push(reflexion);
      numReflexiones += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro p\xE1rrafo?");
    } while (otra);
    return reflexiones;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandler.ts
var import_obsidian29 = require("obsidian");
init_luxon();
var NoteFieldHandler = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.nota = {};
    this.plugin = plugin;
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    this.nota.id = maxId + 1;
    return this.nota.id;
  }
  async getFecha() {
    let fechaActual = DateTime.now();
    fechaActual = fechaActual.setLocale("es");
    fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
    this.nota.fecha = fechaActual;
    return fechaActual;
  }
  async getTitulo() {
    const title = await this.prompt(`T\xEDtulo de ${this.infoSubsistema.typeName}:`, "", false, false);
    this.nota.titulo = title;
    return title;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
      let titulo, nivel;
      let padrePGTD = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        let notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian29.Notice("Sin proyecto GTD definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.proyectoQ = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoQ)) {
            this.nota.proyectoQ = notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoQ) {
            this.nota.proyectoQ = [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getProyectoQ() {
    let notaF, titulo, nivel;
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PQ", null, this.plugin);
      let padreQ = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto Q?`);
      if (padreQ) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto Q es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian29.Notice("Sin proyecto Q definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          titulo = [notaF == null ? void 0 : notaF.titulo];
          this.nota.proyectoGTD = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            this.nota.proyectoGTD = notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            this.nota.proyectoGTD = [notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoQ;
    }
  }
  async getAreaInteres() {
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Inter\xE9s:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `\xBFQu\xE9 \xC1rea de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian29.Notice("Sin \xC1rea de Inter\xE9s");
          titulo = [];
          nivel = 0;
          return;
        } else {
          titulo = [areaInteres.titulo];
          if (Array.isArray(areaInteres == null ? void 0 : areaInteres.areaInteres)) {
            titulo = titulo.concat(areaInteres.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (areaInteres == null ? void 0 : areaInteres.areaInteres) {
            titulo.push(areaInteres.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          if (areaInteres == null ? void 0 : areaInteres.areaVida) {
            if (Array.isArray(areaInteres.areaVida)) {
              this.nota.areaVida = areaInteres.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof areaInteres.areaVida === "string") {
              this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.asuntoDefinido = true;
          nivel = parseInt(areaInteres.nivelAI);
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
  async getAreaVida() {
    let areasVida = {};
    let noAV = {
      file: {
        basename: "No es de ning\xFAn Area de Vida"
      },
      areaVida: "No es de ning\xFAn Area de Vida"
    };
    if (!this.nota.asuntoDefinido) {
      let padreAV = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Vida?`);
      if (padreAV) {
        areasVida = await FieldHandlerUtils.findMainFilesWithState("AV", null, this.plugin);
        areasVida.push(noAV);
        this.nota.areaVida = await this.suggester(areasVida.map((b) => b.file.basename), areasVida.map((b) => b.file.basename), false, `\xBFA qu\xE9 \xC1rea de Vida pertenece $${this.nota.titulo}?:`);
      } else {
        this.nota.areaVida = "No es de ning\xFAn Area de Vida";
      }
      return this.nota.areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  async getRename() {
    debugger;
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian29.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian29.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian29.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/CPEFieldHandler.ts
var ContenidoParaEstudioFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/RRFieldHandler.ts
var RecursosRecurrentesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PGTDFieldHandler.ts
var import_obsidian30 = require("obsidian");
var PGTDFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian30.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian30.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian30.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian30.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian30.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian30.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PQFieldHandler.ts
var import_obsidian31 = require("obsidian");
var PQFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian31.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian31.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian31.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    let folderAV = Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida;
    newName = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian31.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian31.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian31.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    switch (tipoSistema) {
      case "AV":
      case "PQ":
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
        break;
      case "OCA":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
        );
        break;
      case "CTI":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFDe qu\xE9 trimestre del ${this.nota.a\u00F1o} es esta planeaci\xF3n?`
        );
        break;
      default:
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.path), false, `Trimestre del ${nombreSistema}:`);
    }
    if (trimestre === null) {
      new import_obsidian31.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AnotacionesFieldHandler.ts
var import_obsidian32 = require("obsidian");
var AnotacionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getClasificacion() {
    var _a;
    let clasificacion2 = null;
    let tagClasificacion2 = null;
    let clasificacionAX = {};
    let tagsClasificacionAX = [];
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    if (!file) {
      new import_obsidian32.Notice("Archivo no encontrado.");
      return;
    }
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      const suggester = this.tp.system.static_functions.get("suggester");
      tagClasificacion2 = await suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian32.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 === "Nuevo") {
        const prompt = this.tp.system.static_functions.get("prompt");
        clasificacion2 = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian32.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian32.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 === "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        const indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          const newClasificacion = [...clasificacionAX, clasificacion2];
          const newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 !== "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/TransaccionesFieldHandler.ts
var import_obsidian33 = require("obsidian");
var TransaccionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getFecha() {
    let fecha;
    let fechaOriginal = await this.prompt(`Confirma la fecha de la transacci\xF3n: `, `${moment().format("YYYY-MM-DD HH:mm")}`, true);
    let fechaMoment = moment(fechaOriginal, "YYYY-MM-DD HH:mm");
    fecha = fechaMoment.format("YYYY-MM-DD dddd HH:mm");
    this.nota.fecha = fecha;
    return fecha;
  }
  async getRename() {
    debugger;
    let fecha = moment(this.nota.fecha, "YYYY-MM-DD dddd HH:mm");
    let fechaY = fecha.format("YYYY");
    let fechaMes = fecha.format("MM - MMMM");
    const newName = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    const folder = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian33.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian33.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian33.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreasInteresFieldHandler.ts
var import_obsidian34 = require("obsidian");
var AreasInteresFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e;
    let tipoSistema = this.infoSubsistema.type;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      let nivel;
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        this.nota.asuntoDefinido = true;
        if (((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) === "AI") {
          this.nota.areaInteres = [nota.frontmatter.file.basename];
          if (Array.isArray(nota.frontmatter.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
        }
        if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          this.nota.areaVida = "No es de ning\xFAn Area de Vida";
        }
        if (((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.type) === "AI" || ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.type) === "AV") {
          siAsunto = false;
        }
        if (!isNaN(parseInt((_e = nota.frontmatter) == null ? void 0 : _e.nivelAI))) {
          nivel = parseInt(nota.frontmatter.nivelAI) + 1;
        } else {
          nivel = 0;
        }
        this.nota.nivelAI = nivel;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    debugger;
    if (this.nota.areaVida != "No es de ning\xFAn Area de Vida") {
      this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.areaVida}/${this.nota.titulo}`);
    }
    return this.nota.aliases;
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian34.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian34.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian34.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getAreaInteres() {
    let nombreTipo = this.infoSubsistema.typeName;
    let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de otra ${nombreTipo}:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian34.Notice("Sin Area de Interes");
          titulo = "";
          nivel = 0;
          return;
        } else {
          this.nota.asuntoDefinido = true;
          if (areaInteres.areaVida === null) {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          } else {
            debugger;
            this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          titulo = areaInteres.titulo;
          nivel = parseInt(areaInteres.nivelAI) + 1;
        }
      } else {
        titulo = "";
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreaVidaFieldHandler.ts
var import_obsidian35 = require("obsidian");
var AreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getArea() {
    let area, grupo;
    let tipoArea = this.infoSubsistema.typeName;
    let nuevaArea = false;
    let areasGrupos = this.getDuplasFijas(app, tipoArea);
    let areaGrupo = await this.suggester(areasGrupos.map((b) => b.texto), areasGrupos.map((b) => b.texto), false, `\xBFCu\xE1l ${tipoArea} deseas crear?`);
    if (areaGrupo === null) {
      new import_obsidian35.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    } else if (areaGrupo == "Nuevo") {
      clasificacion = await this.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
      if (clasificacion === null) {
        new import_obsidian35.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      tagClasificacion = await this.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
      if (tagClasificacion === null) {
        new import_obsidian35.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      nuevaClasificacion = true;
    } else {
      let indice = areasGrupos.findIndex((objeto) => objeto.texto === areaGrupo);
      grupo = areasGrupos[indice].grupo;
      area = areasGrupos[indice].area;
      this.nota.grupo = grupo;
      this.nota.titulo = area;
      return { grupo, titulo: area };
    }
  }
  getDuplasFijas(app2, area) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian35.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[area]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], area: item[1], texto: item[0] + "/" + item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFilename() {
    let fileName;
    if (this.infoSubsistema.hasOwnProperty("fileName")) {
      const partes = this.infoSubsistema.fileName.split(" -- ");
      this.nota.trimestre = partes[0];
      this.nota.titulo = partes[1];
      this.nota.areaVida = partes[1];
      this.nota.grupo = partes[2];
    }
    fileName = `${this.nota.trimestre} - ${this.nota.titulo}`;
    this.nota.filename = fileName;
    return fileName;
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
    if (trimestre === null) {
      new import_obsidian35.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getNota() {
    return this.nota;
  }
  async getRename() {
    debugger;
    let newName, name, folder;
    newName = `${this.infoSubsistema.folder}/${this.nota.titulo}/${this.nota.filename}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.titulo}/`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    debugger;
    try {
      if (existe instanceof import_obsidian35.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian35.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian35.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.grupo}/${this.nota.trimestre}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/nodoAreaVidaFieldHandler.ts
var import_obsidian36 = require("obsidian");
var nodoAreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    let registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id) && metadata.type && metadata.type === this.infoSubsistema.type) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
  }
  async getRename() {
    debugger;
    const file = this.tp.file.config.target_file;
    const partes = file.basename.split(" - ");
    this.nota.grupo = partes[0];
    this.nota.areaVida = partes[1];
    const fullPath = file.path;
    const directoryPath = fullPath.substring(0, fullPath.lastIndexOf("/") + 1);
    const fileName = `${directoryPath}${partes[1]}.md`;
    debugger;
    let newName, folder;
    const existe = app.vault.getAbstractFileByPath(fileName);
    debugger;
    try {
      if (existe instanceof import_obsidian36.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian36.TFile) {
            await app.vault.rename(file, fileName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian36.TFile) {
          await app.vault.rename(file, fileName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/ObjCompassAnualFieldHandler.ts
var import_obsidian37 = require("obsidian");
var ObjCompassAnualFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getEstado() {
    return "\u{1F7E1}";
  }
  async getAreaVida() {
    let areaVida;
    if (!this.nota.asuntoDefinido) {
      let nombreArchivo = this.infoSubsistema.fileName;
      const regex = /Objetivo para (.+)\.md$/;
      const resultado = nombreArchivo.match(regex);
      if (resultado && resultado[1]) {
        areaVida = resultado[1];
      } else {
        return null;
      }
      this.nota.areaVida = areaVida;
      return areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getTitulo() {
    let titulo;
    titulo = await this.prompt(`Cual es tu objetivo en ${this.nota.a\u00F1o} para ${this.nota.areaVida}?`, `Voy a `, true, true);
    if (titulo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getA\u00F1o() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    let nombreArchivo = this.infoSubsistema.fileName;
    const regex = /\/(\d{4})/;
    const resultado = nombreArchivo.match(regex);
    if (resultado && resultado[1]) {
      a\u00F1o = resultado[1];
    } else {
      return null;
    }
    if (a\u00F1o === null) {
      new Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFQuieres agregar detalles de tu objetivo?`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getTrimestre() {
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(
      ["Q1", "Q2", "Q3", "Q4"],
      [
        `${this.nota.a\u00F1o}-Q1`,
        `${this.nota.a\u00F1o}-Q2`,
        `${this.nota.a\u00F1o}-Q3`,
        `${this.nota.a\u00F1o}-Q4`
      ],
      true,
      `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
    );
    if (trimestre === null) {
      new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.areaVida}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian37.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian37.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian37.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/CompassPlaneacionAnual_FH.ts
var import_obsidian38 = require("obsidian");
var CompassPlaneacionAnual_FH = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getA\u00F1o() {
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    a\u00F1o = await this.suggester(a\u00F1os.map((b) => b.file.basename), a\u00F1os.map((b) => b.file.basename), false, `Selecciona el a\xF1o que deseas para el ${nombreSistema}:`);
    if (a\u00F1o === null) {
      new import_obsidian38.Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getNota() {
    return this.nota;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.a\u00F1o}`);
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.id}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Planeaci\xF3n ${this.nota.a\u00F1o}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian38.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian38.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian38.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/RepositorioLibros_FH.ts
var import_obsidian39 = require("obsidian");
var RepositorioLibros_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFPorque est\xE1s agregando este libro?:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    let estado;
    estado = await this.suggester(["\u{1F535} -> Para Archivo - Leido", "\u{1F7E2} -> En Lectura - Comprado", "\u{1F7E1} -> Por Adquirir", "\u{1F534} -> Cancelado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `En que estado est\xE1 este libro?`);
    if (estado === null) {
      new import_obsidian39.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return estado;
  }
  async getTitulo() {
    const titulo = this.infoSubsistema.titulo;
    this.nota.titulo = titulo;
    return titulo;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = this.infoSubsistema.activo;
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/Biblioteca_FH.ts
var import_obsidian40 = require("obsidian");
var Biblioteca_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getParametrosLibro() {
    let archivoActivo = app.workspace.getActiveFile();
    if (!archivoActivo) {
      console.error("No se pudo obtener el archivo activo.");
      return null;
    }
    debugger;
    const campos = ["id", "titulo", "autor", "publisher", "publicado", "paginas", "isbn10", "isbn13"];
    let parametros = {};
    for (let campo of campos) {
      let valorCampo = await this.getFrontmatterField(archivoActivo.path, campo);
      this.nota[campo] = valorCampo;
      parametros[campo] = valorCampo;
    }
    return parametros;
  }
  async getFrontmatterField(file, field) {
    try {
      const tFile = app.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian40.TFile) {
        const cache = app.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          return fieldValue !== void 0 && fieldValue !== null && fieldValue !== "" ? fieldValue : null;
        } else {
          console.log(`El campo '${field}' no existe en el frontmatter.`);
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  async getFormato() {
    let campo;
    campo = await this.suggester(["Kindle", "Google Books", "PDF", "F\xEDsico"], ["Kindle", "Google Books", "PDF", "F\xEDsico"], false, `\xBFComo tienes este libro?`);
    if (campo === null) {
      new import_obsidian40.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return campo;
  }
  async getPaginas() {
    let campo, paginas;
    campo = await this.suggester(["Si", "No"], [true, false], false, `\xBFEl libro tiene ${this.nota.paginas} p\xE1ginas?`);
    if (campo === null) {
      new import_obsidian40.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    } else if (campo === false) {
      paginas = await this.prompt(`Cuantas p\xE1ginas tiene el libro?`, "", false, false);
      this.nota.paginas = paginas;
      return paginas;
    }
    return this.nota.paginas;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = true;
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/Anual_FH.ts
var import_obsidian41 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/TrimestralFieldHandler.ts
var import_obsidian42 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/API/starterAPI.ts
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async fillNote(infoSubsistema, campos) {
    this.nota = {};
    let nota;
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
      Object.assign(this.nota, infoSubsistema);
    }
    let fieldHandler;
    switch (this.infoSubsistema.type) {
      case "Agr":
        fieldHandler = new AgradecimientosFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PGTD":
        fieldHandler = new PGTDFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PQ":
        fieldHandler = new PQFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Ax":
        fieldHandler = new AnotacionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CPE":
        fieldHandler = new ContenidoParaEstudioFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RR":
        fieldHandler = new RecursosRecurrentesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Tx":
        fieldHandler = new TransaccionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AI":
        fieldHandler = new AreasInteresFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AV":
        fieldHandler = new AreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "nAV":
        fieldHandler = new nodoAreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "OCA":
        fieldHandler = new ObjCompassAnualFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CAI":
        fieldHandler = new CompassPlaneacionAnual_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RL":
        fieldHandler = new RepositorioLibros_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "LB":
        fieldHandler = new Biblioteca_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Rx":
        fieldHandler = new ReflexionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      default:
        throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
    }
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof fieldHandler[functionName] === "function") {
          this.nota[campo] = await fieldHandler[functionName]();
          nota = await fieldHandler.getNota();
          for (const key in nota) {
            if (!(key in this.nota)) {
              this.nota[key] = nota[key];
            }
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian43.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  // Crear Nota desde template
  async createNote(subsistema) {
    try {
      const templatePath = `Plantillas/${this.plugin.settings[`folder_${subsistema}`]}/Plt - ${subsistema}.md`;
      const templateFile = app.vault.getAbstractFileByPath(templatePath);
      if (!(templateFile instanceof import_obsidian43.TFile)) {
        throw new Error(`El template para "${subsistema}" no se encontr\xF3 o no es un archivo v\xE1lido.`);
      }
      const dtConseq = DateTime.now().toFormat("yyyy-MM-dd HHmmss");
      const filename = `${subsistema} ${dtConseq}`;
      const folder = app.vault.getAbstractFileByPath("Inbox");
      if (!folder) {
        throw new Error(`La carpeta "Inbox" no se encontr\xF3.`);
      }
      const tp = this.getTp();
      let crearNota = tp.file.static_functions.get("create_new");
      if (typeof crearNota !== "function") {
        throw new Error("La funci\xF3n para crear notas no est\xE1 disponible.");
      }
      await crearNota(templateFile, filename, true, folder).basename;
    } catch (error) {
      console.error(error);
      alert(`Error al crear la nota: ${error.message}`);
    }
  }
  async getOtrosAsuntos(subsistemas) {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = [];
    for (let subsistema of subsistemas) {
      let incluye = await suggester(["Si", "No"], [true, false], true, `Desea agregar algun ${subsistema} activo como origen?`);
      if (!incluye)
        continue;
      debugger;
      let recursosActivos = await this.activeStructureResources(subsistema);
      let primerAlias = recursosActivos.map((file) => {
        var _a;
        const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return metadata && metadata.aliases && metadata.aliases.length > 0 ? metadata.aliases[0] : null;
      }).filter((alias) => alias !== null);
      while (recursosActivos.length > 0) {
        let indiceSeleccionado;
        if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.path), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.path === seleccion);
        } else {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.basename), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.basename === seleccion);
        }
        if (indiceSeleccionado !== -1) {
          if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
            campo.push(recursosActivos[indiceSeleccionado].path);
          } else {
            campo.push(recursosActivos[indiceSeleccionado].basename);
          }
          recursosActivos.splice(indiceSeleccionado, 1);
          primerAlias.splice(indiceSeleccionado, 1);
        }
        if (recursosActivos.length === 0)
          break;
        let deseaAgregarOtro = await suggester(["Si", "No"], [true, false], true, `Desea agregar otro ${subsistema} como origen?`);
        debugger;
        if (!deseaAgregarOtro)
          break;
      }
    }
    return campo;
  }
  // FUNCION QUE TRAE TODAS LAS NOTAS ACTIVAS DE LOS SISTEMAS. - Revisar en que la uso...
  async activeStructureResources(typeName) {
    try {
      const files = app.vault.getMarkdownFiles();
      switch (type) {
        case "AreasInteres":
          debugger;
          break;
        default:
          let resourceFolderName = "folder_" + typeName;
          let resourceFolder = this.plugin.settings[resourceFolderName];
          if (!resourceFolder) {
            console.error(`La carpeta "${resourceFolderName}" no existe en la configuraci\xF3n del plugin.`);
            return [];
          }
          let activeResources2 = [];
          const registrosExistentes = files.filter((file) => file.path.startsWith(resourceFolder));
          registrosExistentes.forEach((file) => {
            var _a;
            const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (metadata && metadata.estado === "\u{1F7E2}") {
              activeResources2.push(file);
            }
          });
          break;
      }
      return activeResources;
    } catch (error) {
      console.error("Error al buscar recursos activos:", error);
      return [];
    }
  }
};

// src/modules/noteLifecycleManager/API/addOnsAPI.ts
var addOnsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  crearPrevNext(paginas, pagIndice, dv) {
    let pagina = dv.current();
    let indice;
    for (let a = 0; a < paginas.length; a++) {
      if (paginas[a].file.name == pagina.file.name) {
        indice = a;
      }
    }
    let links = [];
    if (indice == 0 && paginas.length == 1) {
      links[0] = "";
      links[1] = "";
    } else if (indice == 0) {
      links[0] = "";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    } else if (indice == paginas.length - 1) {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "";
    } else {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    }
    dv.paragraph(links[0] + " ==" + dv.func.link(pagIndice.file.path, pagIndice.titulo || pagIndice.file.name) + "== " + links[1]);
  }
  determinarTextoEnlace(pagina) {
    if (pagina.titulo) {
      return pagina.titulo;
    } else if (pagina.aliases && pagina.aliases.length > 0) {
      return pagina.aliases[0];
    } else {
      return pagina.file.name;
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var import_obsidian45 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/cambioHF.ts
var import_obsidian44 = require("obsidian");
var modal_cambioHF = class extends import_obsidian44.Modal {
  constructor(plugin, file) {
    super(plugin.app);
    this.plugin = plugin;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    debugger;
    this.containerEl.classList.add("modalInbox");
    const { contentEl } = this;
    debugger;
    const metadata = this.plugin.app.metadataCache.getFileCache(this.file.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaFinStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaFinal) ? window.moment(metadata.frontmatter.horaFinal, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Cambio hora cierre de registro.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases[0]}"` });
    contentEl.createEl("p", { text: "Hora de cierre registro:" });
    this.horaFinalInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaFinStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraFinalLocal = this.horaFinalInput.value;
    if (!nuevaHoraFinalLocal) {
      new import_obsidian44.Notice("Por favor, seleccione una hora de cierre.");
      return;
    }
    const nuevaHoraFinal = window.moment(nuevaHoraFinalLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      debugger;
      let campos = ["fecha", `horaFinal_${nuevaHoraFinal}`, `tiempoTrabajado_${nuevaHoraFinal}`, "estado_\u{1F535}"];
      let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(this.file, campos);
      this.close();
      new import_obsidian44.Notice("Hora de Finalizaci\xF3n actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian44.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var YAMLUpdaterAPI2 = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoNota = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async actualizarNota(infoNota, campos) {
    var _a;
    debugger;
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const partes = campo.split("_");
        let campoName, functionName;
        let parametro = null;
        if (partes.length > 1) {
          functionName = `get${partes[0].charAt(0).toUpperCase() + partes[0].slice(1)}`;
          campoName = partes[0];
          parametro = partes[1];
        } else {
          campoName = partes[0];
          functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        }
        let metadata = (_a = app.metadataCache.getFileCache(this.infoNota.file)) == null ? void 0 : _a.frontmatter;
        let valorActualCampo = metadata[campoName] || "Sin definir";
        if (typeof this[functionName] === "function") {
          if (parametro !== null) {
            this.nota[campoName] = await this[functionName](parametro, valorActualCampo);
          } else {
            this.nota[campoName] = await this[functionName]();
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      if (Object.keys(this.nota).length > 0) {
        await this.updateYAMLFields(this.nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian45.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  async archivarNota(infoNota, campos) {
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      debugger;
      nota.estado = "\u{1F535}";
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian45.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async updateYAMLFields(nota, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in nota) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = nota[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  async getFecha(flag, actual) {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getHoraFinal(parametro, actual) {
    debugger;
    if (parametro === void 0) {
      return this.formatearFecha(/* @__PURE__ */ new Date());
    } else {
      return parametro;
    }
  }
  async getTiempoTrabajado(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getSecId(flag, actual) {
  }
  async getTitulo(flag, actual) {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new import_obsidian45.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion(flag, actual) {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion;
    switch (flag) {
      case "RegistroTiempo":
        descripcion = await prompt("\xBFDetalle del Registro Tiempo:", actual, false, true);
        break;
      default:
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
        break;
    }
    if (descripcion === null) {
      new import_obsidian45.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases(flag, actual) {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto(flag, actual) {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion(flag, actual) {
    var _a;
    let clasificacion2, tagClasificacion2, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion2 = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian45.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 == "Nuevo") {
        clasificacion2 = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian45.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian45.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 == "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion2];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 != "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
  // ->
  async getEstado(parametro, actual) {
    debugger;
    let campo;
    if (parametro == void 0) {
      let suggester = this.tp.system.static_functions.get("suggester");
      campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
      if (campo === null) {
        new import_obsidian45.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename(flag, actual) {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
  async modalCambioHF(nota) {
    debugger;
    let modal = new modal_cambioHF(this.plugin, nota);
    modal.open();
  }
};

// src/modules/noteLifecycleManager/API/menuDiarioAPI.ts
var import_obsidian46 = require("obsidian");
init_luxon();
init_utilsAPI();
init_registroTiempoAPI();
var menuHoyAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA hoy";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "H\xE1bitos",
      "Balance",
      "Registro de Tareas",
      "Notas d\xEDa",
      "Personales"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Balance":
            await this.mostrarBotonBalancePersonal(dv);
            break;
          case "H\xE1bitos":
            await this.mostrarFormularioHabitos(dv);
            break;
          case "Registro de Tareas":
            await this.mostrarBotonRegistroTareas(dv);
            break;
          case "Notas d\xEDa":
            await this.mostrarBotonesNotasD\u00EDa(dv);
            break;
          case "Personales":
            await this.mostrarBotonesNotasPersonales(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian46.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian46.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian46.Notice("Error al actualizar el YAML.");
    }
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian46.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian46.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian46.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian46.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian46.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a, _b;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-registro-diario"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian46.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var import_obsidian48 = require("obsidian");
init_luxon();
init_utilsAPI();

// src/modules/noteLifecycleManager/views/vistaResumenSemanal.ts
var import_obsidian47 = require("obsidian");
init_luxon();
var VistaResumenSemanal = class extends import_obsidian47.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return "vista-resumen-semanal";
  }
  getDisplayText() {
    return "Resumen Semanal";
  }
  getIcon() {
    return "history";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    await this.actualizarVista(fileCache);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(fileCache);
    }, 1e4);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(fileCache) {
    var _a;
    this.contentEl.empty();
    const inicioWStr = (_a = fileCache.frontmatter) == null ? void 0 : _a.inicioW;
    if (!inicioWStr) {
      this.contentEl.setText("La configuraci\xF3n de inicioW no est\xE1 establecida.");
      return;
    }
    const folderDiario = "Estructura/Journal/Diario/Notas";
    const inicioW = DateTime.fromFormat(inicioWStr, "yyyy-MM-dd EEEE", { locale: "es" });
    const finW = inicioW.plus({ days: 6 });
    const archivosDiario = this.app.vault.getFiles().filter((file) => file.path.startsWith(folderDiario) && file.extension === "md");
    const bitacoras = archivosDiario.map((file) => {
      var _a2;
      const fechaArchivo = DateTime.fromISO(file.basename.substring(0, 10));
      const datos = (_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
      return {
        archivo: file.basename,
        path: file.path,
        fechaArchivo,
        datos
      };
    }).filter(({ fechaArchivo }) => fechaArchivo >= inicioW && fechaArchivo <= finW).sort((a, b) => a.fechaArchivo.toMillis() - b.fechaArchivo.toMillis());
    let trim = finW.quarter;
    let sem = finW.weekNumber - (finW.quarter - 1) * 13;
    if (sem == 0) {
      sem = 13;
    }
    const titulo = this.contentEl.createEl("h2", { text: `Resumen de la semana ${sem} - Q${trim} / W${finW.toFormat("WW")}.` });
    const subtitulo = this.contentEl.createEl("h3", { text: `Desde el ${inicioW.toFormat("EEEE, DD")} al ${finW.toFormat("EEEE, DD")}` });
    titulo.style.textAlign = "center";
    subtitulo.style.textAlign = "center";
    const table = document.createElement("table");
    table.className = "table-resumenSemanal";
    const thead = document.createElement("thead");
    const headerRow = document.createElement("tr");
    ["D\xEDa", "Resumen"].forEach((headerText) => {
      const th = document.createElement("th");
      th.textContent = headerText;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);
    const tbody = document.createElement("tbody");
    bitacoras.forEach(({ archivo, path, datos }) => {
      const tr = document.createElement("tr");
      const tdArchivo = document.createElement("td");
      const linkEl = document.createElement("a");
      linkEl.textContent = archivo;
      linkEl.href = path;
      linkEl.onclick = async (ev) => {
        ev.preventDefault();
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian47.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file, { eState: { focus: true } });
        }
      };
      tdArchivo.appendChild(linkEl);
      const tdResumen = document.createElement("td");
      const ul = document.createElement("ul");
      (datos.titulo || ["Sin t\xEDtulo"]).forEach((titulo2) => {
        const li = document.createElement("li");
        li.textContent = titulo2;
        ul.appendChild(li);
      });
      tdResumen.appendChild(ul);
      tr.appendChild(tdArchivo);
      tr.appendChild(tdResumen);
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    this.contentEl.appendChild(table);
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var menuSemanalAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA Semanal";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "Resumen diario",
      "Agradecimientos",
      "Creadas",
      "Modificadas",
      "x Fecha",
      "Tareas Cerradas"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Resumen diario":
            await this.mostrarResumenDiario(dv);
            break;
          case "Agradecimientos":
            await this.mostrarAgradecimientos(dv);
            break;
          case "Creadas":
            await this.mostrarCreadas(dv);
            break;
          case "Modificadas":
            await this.mostrarModificadas(dv);
            break;
          case "x Fecha":
            await this.mostrarxFecha(dv);
            break;
          case "Tareas Cerradas":
            await this.mostrarTareasCerradas(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian48.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian48.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian48.Notice("Error al actualizar el YAML.");
    }
  }
  async mostrarResumenDiario(dv) {
    var _a, _b;
    debugger;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-resumen-semanal"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian48.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian48.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian48.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian48.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian48.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a;
    dv.container.innerHTML = "";
    const fechaHoy = DateTime.fromFormat(app.workspace.getActiveFile().basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        const startOfDay = horaInicio.startOf("day");
        if (startOfDay.ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += metadata.tiempoTrabajado ? parseInt(metadata.tiempoTrabajado) : 0;
        }
      }
    }
    dv.header(3, "Tiempo registrado hoy: " + Duration.fromMillis(totalDia).toFormat("hh:mm:ss"));
    registrosHoy.sort((a, b) => {
      if (typeof a.frontmatter.horaInicio === "string" && typeof b.frontmatter.horaInicio === "string") {
        try {
          const millisA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          const millisB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          return millisB - millisA;
        } catch (e) {
          console.error("Error parsing dates:", e);
          return 0;
        }
      } else {
        console.warn("Invalid date format for sorting:", a.horaInicio, b.horaInicio);
        return 0;
      }
    });
    if (registrosHoy.length > 0) {
      const table = dv.container.createEl("table", { cls: "dataview table" });
      table.style.width = "100%";
      const header = dv.el("tr", "", table);
      ["Registro", "Descripci\xF3n", "Hora Inicio", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((text) => dv.el("th", text, header));
      registrosHoy.forEach((registro) => {
        const row = dv.el("tr", "", table);
        dv.el("td", dv.func.link(registro.path, registro.frontmatter.aliases[0]), row);
        dv.el("td", registro.frontmatter.descripcion ? registro.frontmatter.descripcion : "Sin descripci\xF3n", row);
        dv.el("td", DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a") + " / " + DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a"), row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          let partes = registro.frontmatter.horaInicio.split(" ");
          let fechaHoraISO = `${partes[0]}T${partes[2]}`;
          let inicio = Date.parse(fechaHoraISO);
          let ahora = Date.now();
          let diferencia = ahora - inicio;
          dv.el("td", Duration.fromMillis(diferencia).toFormat("h:mm"), row);
        } else {
          dv.el("td", Duration.fromMillis(registro.frontmatter.tiempoTrabajado).toFormat("h:mm"), row);
        }
        dv.el("td", registro.frontmatter.estado, row);
        dv.el("td", registro.frontmatter.id, row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          dv.el("td", this.createButtonTable("Cerrar", async () => {
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
          }), row);
        } else {
          dv.el("td", this.createButtonTable("Retomar", () => {
            this.retomarTarea(registro.frontmatter.id);
          }), row);
        }
      });
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian48.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/moduloRegistroTiempo/views/vistaRTActivo.ts
var import_obsidian49 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroActivo = class extends import_obsidian49.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    this.alertaEjecutada25 = false;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-activo";
  }
  getDisplayText() {
    return "Registro Activo";
  }
  getIcon() {
    return "checkmark";
  }
  async onOpen() {
    await this.actualizarVista();
    this.intervalId = setInterval(async () => {
      await this.actualizarVista();
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista() {
    var _a, _b;
    let scrollTop = 0;
    let scrollLeft = 0;
    const oldTableWrapper = this.containerEl.querySelector(".table-wrapper");
    if (oldTableWrapper) {
      scrollTop = oldTableWrapper.scrollTop;
      scrollLeft = oldTableWrapper.scrollLeft;
    }
    this.containerEl.empty();
    this.containerEl.classList.add("registro-tiempo-container");
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let registrosActivos = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        let registroActivo = { file };
        Object.assign(registroActivo, metadata);
        registrosActivos.push(registroActivo);
      }
    }
    if (registrosActivos.length === 0) {
      const messageContainer = this.containerEl.createEl("div", { cls: "message-container" });
      messageContainer.createEl("p", { text: "No hay ning\xFAn registro de tiempo ejecut\xE1ndose." });
      const botonCrear = messageContainer.createEl("button", { cls: "registro-tiempo-btn" });
      botonCrear.textContent = "+ Registro Tiempo";
      botonCrear.onclick = async () => {
        const starterAPInstance = new starterAPI(this.plugin);
        await starterAPInstance.createNote("RegistroTiempo");
      };
      this.containerEl.appendChild(messageContainer);
      this.containerEl.createEl("div", { cls: "separador" });
    } else if (registrosActivos.length > 0) {
      const registroEnEjecucion = registrosActivos[0];
      const activeContainer = this.containerEl.createEl("div", { cls: "active-time-container" });
      activeContainer.createEl("h4", { text: "Registro de Tiempo en Ejecuci\xF3n", cls: "registro-tiempo-titulo" });
      const aliasContainer = activeContainer.createEl("p", { cls: "registro-alias" });
      const aliasText = registroEnEjecucion.aliases && registroEnEjecucion.aliases[1] ? registroEnEjecucion.aliases[1] : registroEnEjecucion.aliases && registroEnEjecucion.aliases[0] ? registroEnEjecucion.aliases[0] : "Sin alias";
      aliasContainer.innerHTML = `<strong>Alias:</strong> ${aliasText}`;
      const descripcionContainer = activeContainer.createEl("p", { cls: "registro-descripcion" });
      descripcionContainer.innerHTML = `<strong>Descripci\xF3n:</strong> ${registroEnEjecucion.descripcion || "Sin descripci\xF3n"}`;
      const tiempoContainer = activeContainer.createEl("p", { cls: "tiempo-ejecucion", text: "Tiempo transcurrido: Calculando..." });
      this.actualizarTiempoEnEjecucion(tiempoContainer, registroEnEjecucion.horaInicio);
      const botonesContainer = activeContainer.createEl("div", { cls: "registro-botones-container" });
      const changeDescButton = document.createElement("button");
      changeDescButton.innerHTML = "\u270F\uFE0F <span class='button-text'>  Descripci\xF3n</span>";
      changeDescButton.classList.add("change-desc-btn");
      changeDescButton.addEventListener("click", async () => {
        var _a2;
        const nuevaDescripcion = await this.mostrarPrompt("Nueva Descripci\xF3n:", registroEnEjecucion.descripcion || "");
        if (nuevaDescripcion !== null) {
          const file = registroEnEjecucion.file;
          if (!file)
            return;
          const fileContent = await this.app.vault.read(file);
          let frontmatter = ((_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) || {};
          frontmatter.descripcion = nuevaDescripcion;
          const newContent = this.reescribirFrontmatter(fileContent, frontmatter);
          await this.app.vault.modify(file, newContent);
          this.actualizarVista();
        }
      });
      const stopButton = document.createElement("button");
      stopButton.innerHTML = "\u270B\u{1F3FC} <span class='button-text'> Detener Registro</span>";
      stopButton.classList.add("stop-time-btn");
      stopButton.addEventListener("click", async () => {
        try {
          console.log("Bot\xF3n 'Cerrar Tarea' presionado.");
          if (!registroEnEjecucion.file || !(registroEnEjecucion.file instanceof import_obsidian49.TFile)) {
            console.error("No se encontr\xF3 el archivo del registro en ejecuci\xF3n.");
            return;
          }
          await this.registroTiempoAPI.cerrarRegistro(registroEnEjecucion.file);
          console.log("Registro cerrado correctamente.");
          this.actualizarVista();
        } catch (error) {
          console.error("Error al cerrar la tarea:", error);
        }
      });
      botonesContainer.appendChild(changeDescButton);
      botonesContainer.appendChild(stopButton);
      activeContainer.appendChild(botonesContainer);
      activeContainer.appendChild(aliasContainer);
      activeContainer.appendChild(descripcionContainer);
      activeContainer.appendChild(tiempoContainer);
      this.containerEl.appendChild(activeContainer);
    }
    let registrosFinalizados = [];
    for (let file of files) {
      let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F535}") {
        let registroFinalizado = { file };
        Object.assign(registroFinalizado, metadata);
        registrosFinalizados.push(registroFinalizado);
      }
    }
    registrosFinalizados.sort((a, b) => b.id - a.id);
    let top5RegistrosActivos = registrosFinalizados.slice(0, 15);
    if (top5RegistrosActivos.length > 0) {
      const tableWrapper = this.containerEl.createEl("div", { cls: "table-wrapper" });
      const table = tableWrapper.createEl("table", { cls: "styled-table" });
      const header = table.createEl("tr");
      ["Alias", "Descripci\xF3n", "Retomar"].forEach((text) => header.createEl("th", { text }));
      top5RegistrosActivos.forEach((registro) => {
        const row = table.createEl("tr");
        const aliasCell = row.createEl("td");
        const aliasText = registro.aliases && registro.aliases[1] ? registro.aliases[1] : registro.aliases && registro.aliases[0] ? registro.aliases[0] : "Sin alias";
        const aliasLink = aliasCell.createEl("a", {
          text: aliasText,
          cls: "clickable-alias",
          href: "#"
        });
        aliasLink.addEventListener("click", async () => {
          let file = app.vault.getAbstractFileByPath(registro.file.path);
          if (file instanceof import_obsidian49.TFile) {
            await app.workspace.getLeaf(true).openFile(file);
          }
        });
        row.createEl("td", { text: registro.descripcion || "No Definida" });
        const buttonCell = row.createEl("td");
        const button = this.createButtonTable("\u23F1\uFE0F", () => {
          this.registroTiempoAPI.retomarTarea(registro.id);
        });
        button.classList.add("retomar-btn");
        button.setAttribute("aria-label", "Retomar");
        buttonCell.appendChild(button);
      });
      this.containerEl.appendChild(tableWrapper);
      tableWrapper.scrollTop = scrollTop;
      tableWrapper.scrollLeft = scrollLeft;
    } else {
      this.containerEl.createEl("p", { text: "No hay registros finalizados." });
    }
  }
  actualizarTiempoEnEjecucion(element, horaInicio) {
    const extraerHora = (fechaStr) => {
      const match2 = fechaStr.match(/(\d{4}-\d{2}-\d{2})\s+\w+\s+(\d{2}:\d{2})/);
      if (match2) {
        return /* @__PURE__ */ new Date(`${match2[1]}T${match2[2]}:00`);
      }
      return null;
    };
    const inicio = extraerHora(horaInicio);
    if (!inicio) {
      element.textContent = "Tiempo transcurrido: No disponible";
      return;
    }
    const calcularTiempo = () => {
      const ahora = /* @__PURE__ */ new Date();
      const diferencia = Math.floor((ahora.getTime() - inicio.getTime()) / 1e3);
      const horas = Math.floor(diferencia / 3600);
      const minutos = Math.floor(diferencia % 3600 / 60);
      const segundos = diferencia % 60;
      element.textContent = `Tiempo transcurrido: ${horas}h ${minutos}m ${segundos}s`;
      if (diferencia >= 1500) {
        element.classList.add("tiempo-rojo");
      } else {
        element.classList.remove("tiempo-rojo");
      }
    };
    calcularTiempo();
    setInterval(calcularTiempo, 1e3);
  }
  /**
   * Función para mostrar un prompt y obtener un nuevo valor
   */
  async mostrarPrompt(mensaje, valorActual) {
    return new Promise((resolve) => {
      const backdrop = document.createElement("div");
      backdrop.classList.add("prompt-modal-backdrop");
      const modal = document.createElement("div");
      modal.classList.add("prompt-modal");
      const label = document.createElement("label");
      label.textContent = mensaje;
      const input = document.createElement("input");
      input.type = "text";
      input.value = valorActual;
      const buttonContainer = document.createElement("div");
      const aceptar = document.createElement("button");
      aceptar.textContent = "Aceptar";
      aceptar.addEventListener("click", () => {
        resolve(input.value.trim() || null);
        modal.remove();
        backdrop.remove();
      });
      const cancelar = document.createElement("button");
      cancelar.textContent = "Cancelar";
      cancelar.addEventListener("click", () => {
        resolve(null);
        modal.remove();
        backdrop.remove();
      });
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          aceptar.click();
        }
      });
      buttonContainer.appendChild(aceptar);
      buttonContainer.appendChild(cancelar);
      modal.appendChild(label);
      modal.appendChild(input);
      modal.appendChild(buttonContainer);
      document.body.appendChild(backdrop);
      document.body.appendChild(modal);
      input.focus();
    });
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  /**
   * Reescribe el frontmatter en un archivo Markdown, preservando la estructura original.
   */
  reescribirFrontmatter(content, frontmatter) {
    const yamlStart = content.indexOf("---");
    const yamlEnd = content.indexOf("---", yamlStart + 3);
    if (yamlStart === -1 || yamlEnd === -1) {
      return content;
    }
    let nuevoFrontmatter = "---\n";
    for (const key in frontmatter) {
      const value = frontmatter[key];
      if (Array.isArray(value)) {
        nuevoFrontmatter += `${key}:
`;
        value.forEach((item) => {
          if (typeof item === "string" && item.match(/^\[\[.*\]\]$/)) {
            nuevoFrontmatter += `  - "${item}"
`;
          } else {
            nuevoFrontmatter += `  - ${JSON.stringify(item)}
`;
          }
        });
      } else if (typeof value === "string") {
        if (value.match(/^\[\[.*\]\]$/)) {
          nuevoFrontmatter += `${key}: "${value}"
`;
        } else {
          nuevoFrontmatter += `${key}: ${JSON.stringify(value)}
`;
        }
      } else {
        nuevoFrontmatter += `${key}: ${value}
`;
      }
    }
    nuevoFrontmatter += "---\n";
    let contenidoRestante = content.slice(yamlEnd + 3).trimStart();
    return nuevoFrontmatter + (contenidoRestante ? "\n" + contenidoRestante : "");
  }
};

// src/modules/moduloGTD/index.ts
var import_obsidian53 = require("obsidian");

// src/modules/moduloGTD/commands.ts
var import_obsidian52 = require("obsidian");

// src/modules/moduloGTD/inbox.ts
var import_obsidian51 = require("obsidian");
init_luxon();

// src/modules/modales/inboxModal.ts
var import_obsidian50 = require("obsidian");
var BandejaDeEntradaModal = class extends import_obsidian50.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    this.containerEl.classList.add("modalInbox");
    let { contentEl } = this;
    this.titleEl.setText("Bandeja de Entrada");
    let textAreaDiv = contentEl.createEl("div");
    this.inputArea = textAreaDiv.createEl("textarea");
    this.inputArea.setAttribute("placeholder", "Escribe tu tarea aqu\xED...");
    this.inputArea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.altKey) {
        e.preventDefault();
        this.submitForm();
      }
    });
    const activeFile = this.app.workspace.getActiveFile();
    const metadata = this.app.metadataCache.getFileCache(activeFile);
    let nameActiveFile = metadata.aliases ? metadata.aliases[0] : activeFile.basename;
    let checkBoxDiv = contentEl.createEl("div");
    this.checkBox = checkBoxDiv.createEl("input", { type: "checkbox" });
    checkBoxDiv.createEl("label", { text: `Guardar en ${nameActiveFile}` }).prepend(this.checkBox);
    const saveButton = checkBoxDiv.createEl("button", { text: "Guardar" });
    saveButton.addEventListener("click", () => this.submitForm());
  }
  submitForm() {
    const text = this.inputArea.value;
    const saveInCurrent = this.checkBox.checked;
    this.close();
    if (this.resolver) {
      this.resolver({ text, saveInCurrent });
    }
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/moduloGTD/inbox.ts
async function ingresarBandejaEntrada(plugin) {
  let inboxPath = `${plugin.settings.file_Inbox}.md`;
  let inboxFile = app.vault.getAbstractFileByPath(inboxPath);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian51.Notice("No hay archivo activo");
    return;
  }
  let inbox;
  const modal = new BandejaDeEntradaModal(plugin.app);
  modal.open();
  const { text, saveInCurrent } = await modal.waitForInput();
  if (text.length < 3) {
    new import_obsidian51.Notice("Inbox cancelada");
    return;
  }
  let destino = saveInCurrent ? activeFile : inboxFile;
  let hoy = DateTime.now().toFormat("yyyy-MM-dd");
  let hora = DateTime.now().toFormat("HH:mm");
  inbox = `- [ ] \u{1F9E0} ${text} #inbox [created:: ${hoy}] a las ${hora}
`;
  if (destino instanceof import_obsidian51.TFile) {
    if (destino === inboxFile) {
      insertAtStartUsingProcess(inbox, destino).then(() => {
        new import_obsidian51.Notice("Bandeja de entrada actualizada con \xE9xito.");
      }).catch((error) => {
        debugger;
        console.error(error);
        new import_obsidian51.Notice("Error al agregar contenido al inicio del archivo: " + error.message);
      });
    } else {
      await insertInboxAtCursor(inbox);
    }
  }
}
async function insertInboxAtCursor(inbox) {
  debugger;
  const activeLeaf = app.workspace.activeLeaf;
  if (activeLeaf) {
    const editor = activeLeaf.view.sourceMode.cmEditor;
    const cursor = editor.getCursor();
    editor.replaceRange(inbox, cursor);
  }
}
async function insertAtStartUsingProcess(inbox, file) {
  if (!(file instanceof import_obsidian51.TFile))
    return;
  await app.vault.process(file, (content) => {
    const newContent = inbox + content;
    return newContent;
  });
}

// src/modules/moduloGTD/commands.ts
function registerCommands3(plugin) {
  const inboxCommand = plugin.addCommand({
    id: "ingresar-inbox",
    name: "Ingresar Bandeja de Entrada -> Inbox",
    callback: async () => {
      await ingresarBandejaEntrada(plugin);
    }
  });
  plugin.registeredCommandIdsGTD = plugin.registeredCommandIdsGTD || [];
  plugin.registeredCommandIdsGTD.push(inboxCommand.id);
}
function deactivateCommands3(plugin) {
  if (!plugin.registeredCommandIdsGTD)
    return;
  plugin.registeredCommandIdsGTD.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredCommandIdsGTD = [];
}

// src/modules/moduloGTD/index.ts
var ModuloGTD = class {
  constructor(plugin) {
    this.moduloGTD = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloGTD)
      return;
    registerCommands3(this.plugin);
  }
  deactivate() {
    if (!this.moduloGTD)
      return;
    deactivateCommands3(this.plugin);
    this.moduloGTD = null;
  }
};

// src/modules/noteLifecycleManager/API/subsistemasAPI.ts
var import_obsidian54 = require("obsidian");
var subsistemasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearAV(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAV(dv);
    };
  }
  async mostrarBotonCrearAVTrimestral(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida del trimestre";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAVTrimestre(dv);
    };
  }
  async procesarAV(dv) {
    var _a, _b;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let q = await suggester(
      qCreados.map((b) => b.trimestre),
      qCreados.map((b) => b),
      true,
      `De que trimestre vamos a procesar tus Areas de Vida`
    );
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian54.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian54.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAV()
  async procesarAVTrimestre(dv) {
    var _a;
    let q = {};
    q.trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian54.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian54.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAVTrimestre()
  //P2 areaVida Q Existe?
  async validacionAVQ(fullFolderPath, q, areaVida) {
    const pathAVQ = `${fullFolderPath}/${q.trimestre} - ${areaVida.av}.md`;
    const fileAVQ = app.vault.getAbstractFileByPath(pathAVQ);
    debugger;
    if (fileAVQ instanceof import_obsidian54.TFile) {
      let suggester = this.plugin.tp.system.static_functions.get("suggester");
      let nextStep = await suggester(
        [
          "Actualizar estado del AV",
          "Borrar y Crear de nuevo el AV",
          "Dejar el AV como est\xE1 "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBF${q.trimestre} ${areaVida.av} ya existe. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          await this.actualizarAVQ(fileAVQ);
          break;
        case "del+cre":
          await this.borrarAVQ(fileAVQ);
          await this.agregarAVQ(areaVida, q.trimestre);
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con ${fileAVQ.basename}`);
          break;
      }
    } else {
      debugger;
      await this.agregarAVQ(areaVida, q.trimestre);
    }
  }
  // P3 Agregar nodoAreaVida?
  async agregarNodoAreaVida(areaVida) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let agregar = await suggester(
      ["Si", "No"],
      [true, false],
      true,
      `\xBFDeseas agregar ${areaVida.av} a tu sistema de gesti\xF3n?`
    );
    if (agregar) {
      const filePath = `Plantillas/${this.plugin.settings[`folder_AreasVida`]}/Plt - nodoAreasVida.md`;
      const template = app.vault.getAbstractFileByPath(filePath);
      if (template instanceof import_obsidian54.TFile) {
        console.log("Archivo nodoAreaVida template encontrado:", template);
      } else {
        console.log("Archivo template nodoAreaVida no encontrado.");
      }
      const filename = areaVida.grupo + " - " + areaVida.av;
      let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
      await this.crearCarpeta(folderPath);
      const folder = app.vault.getAbstractFileByPath(folderPath);
      let crearNota;
      crearNota = this.plugin.tp.file.static_functions.get("create_new");
      try {
        let nota = await crearNota(template, filename, false, folder);
        return true;
      } catch (error) {
        console.error("Error creando NodoAreaVida: ", error);
        return error;
      }
    } else {
      return false;
    }
  }
  async agregarAVQ(areaVida, trimestre) {
    const filePath = `Plantillas/${this.plugin.settings.folder_AreasVida}/Plt - AreasVida.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (!(template instanceof import_obsidian54.TFile)) {
      console.log("Archivo no encontrado.");
      return false;
    }
    console.log("Archivo encontrado:", template);
    const filename = `${trimestre} -- ${areaVida.av} -- ${areaVida.grupo}`;
    let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
    const folder = app.vault.getAbstractFileByPath(folderPath);
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    try {
      await crearNota(template, filename, false, folder);
      return true;
    } catch (error) {
      console.error("Error creando AreaVida: ", error);
      return false;
    }
  }
  async borrarAVQ(fileAVQ) {
    console.log(`Logica de borrado de ${fileAVQ.basename}`);
    try {
      if (fileAVQ instanceof import_obsidian54.TFile) {
        await app.vault.delete(fileAVQ);
        console.log(`${fileAVQ.basename} ha sido borrado con \xE9xito.`);
      } else {
        console.error(
          `${fileAVQ.basename} no es un archivo v\xE1lido o no existe.`
        );
      }
    } catch (err) {
      console.error(`Error al intentar borrar ${fileAVQ.basename}:`, err);
    }
  }
  async actualizarAVQ(fileAVQ) {
    console.log(`Logica de actualizaci\xF3n de estado de ${fileAVQ.basename}`);
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let metadataCache = app.metadataCache.getFileCache(fileAVQ);
    let estadoActual = "";
    let nuevoEstado = "";
    if (metadataCache.frontmatter && metadataCache.frontmatter.hasOwnProperty("estado")) {
      estadoActual = metadataCache.frontmatter.estado;
    } else {
      console.log("No se encontr\xF3 el estado actual en el frontmatter.");
      return;
    }
    try {
      nuevoEstado = await suggester(
        ["\u{1F535} -> Archivado", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"],
        // opciones para mostrar
        ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"],
        // valores a retornar
        false,
        // permite selección múltiple
        `${fileAVQ.basename} est\xE1 ${estadoActual}. Asignar estado:`
        // mensaje
      );
      if (!nuevoEstado) {
        console.log("No se seleccion\xF3 un nuevo estado.");
        return;
      }
      await app.fileManager.processFrontMatter(fileAVQ, (frontmatter) => {
        if (frontmatter.hasOwnProperty("estado")) {
          frontmatter.estado = nuevoEstado;
          console.log("Estado actualizado con \xE9xito a:", nuevoEstado);
        }
      });
    } catch (err) {
      console.error("Error al actualizar el estado en el frontmatter:", err);
    }
  }
  async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian54.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // PARA PROCESAR LOS COMPASS
  // Función para crear y mostrar el botón de procesar Objetivos de las AV anuales en el proceso de Compass.
  async mostrarBotonCompassAnual(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Anual";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassAnual(dv);
    };
  }
  async mostrarBotonCompassTrimestral(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Trimestrales";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassTrimestral(dv);
    };
  }
  async procesarCompassAnual(dv) {
    var _a;
    let a\u00F1o = dv.current().a\u00F1o;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian54.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    debugger;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian54.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoAnual(a\u00F1o, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Anual
  async procesarCompassTrimestral(dv) {
    var _a;
    debugger;
    let trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian54.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian54.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoTrimestral(trimestre, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Trimestral 
  async objetivoAnual(a\u00F1o, areaVida) {
    var _a;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if ((metadata == null ? void 0 : metadata.a\u00F1o) === a\u00F1o && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${a\u00F1o}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
        );
      }
    }
  }
  // Método objetivoAnual.
  async objetivoTrimestral(trimestre, areaVida) {
    var _a, _b;
    debugger;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if (((_b = metadata == null ? void 0 : metadata.trimestre) == null ? void 0 : _b.path) && typeof (metadata.trimestre.path === "string") && metadata.trimestre.path.includes(trimestre) && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${trimestre}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
        );
      }
    }
  }
  // Método objetivoTrimestral.
  /* 
  ----------------------------------------------------------------
  Método que crea el botón que se agrega en la tabla de proyectos en el 
  Compass Anual, para crear el proyecto a cada Objetivo.
  ----------------------------------------------------------------
  */
  createButtonTable(dv, objetivo) {
    const buttonContainer = dv.el("div", "");
    const button = dv.el("button", "Nuevo Proyecto");
    button.addEventListener("click", async (event) => {
      event.preventDefault();
      await this.crearProyectoObjetivo(dv, objetivo);
    });
    buttonContainer.appendChild(button);
    return buttonContainer;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado por el boton de la tabla del compass anual "Nuevo Proyecto" 
  para crear proyecto a un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoObjetivo(dv, objetivo) {
    debugger;
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let tipoProyecto = await suggester(
      ["Proyecto GTD", "Proyecto de Q"],
      [true, false],
      true,
      `\xBFEl proyecto ${objetivo.file.name} requiere un Proyecto GTD o Proyecto de Q?`
    );
    let proyecto;
    if (tipoProyecto) {
      proyecto = this.crearProyectoGTD(objetivo);
    } else {
      debugger;
      const regexTrim = /\[?\[?(\d{4}-Q[1-4])\]?\]?/g;
      const trimestre = objetivo.trimestre.path.match(regexTrim);
      const confirmaTrim = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFVamos a crear el proyecto ${objetivo.file.name} en el trimestre ${trimestre}?`
      );
      if (!confirmaTrim) {
        const q = await this.establecerTrimestre("objetivo del a\xF1o");
        debugger;
        await this.actualizarYAMLs({ trimestre: `[[${q.trimestre}]]` }, objetivo.file.path);
      }
      proyecto = await this.crearProyectoQ(objetivo);
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que inicializa la creación de la plantilla de objetivo Compass.
  ----------------------------------------------------------------
  */
  async crearObjetivo(areaVida, a\u00F1o) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `${a\u00F1o} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  async crearObjetivoTrimestre(areaVida, trimestre) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Trimestre ${trimestre} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado desde crearProyectoObjetivo(dv, objetivo)
  Esté método hace parte del proceso de Compass Anual.
  Facilita la creación del un proyecto de Q para un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoQ(objetivo) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosQ"]}/Plt - ProyectosQ.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  async crearProyectoGTD(objetivo) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosGTD"]}/Plt - ProyectosGTD.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado en el proceso de Compass Anual, cuando elijo volver
  a crear todos los proyectos de un area de vida para un año.
  ----------------------------------------------------------------
  */
  async borrarObjetivos(objetivos) {
    debugger;
    for (let objetivo of objetivos) {
      try {
        await app.vault.delete(objetivo.file);
        console.log(`Archivo borrado: ${objetivo.file.path}`);
      } catch (error) {
        console.error(`Error al borrar el archivo ${objetivo.file.path}: ${error}`);
      }
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que permite para cualquier caso en el que se requiera elegir 
  un trimestre para continuar un proceso, hacer la verificación sobre los
  trimestres que esten creados a partir de la nota TQ.  
  ----------------------------------------------------------------
  */
  async establecerTrimestre(temaTrimestre) {
    var _a;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    try {
      let q = await suggester(
        qCreados.map((b) => b.trimestre),
        qCreados.map((b) => b),
        true,
        `De que trimestre vamos a procesar tus ${temaTrimestre}`
      );
      if (q === void 0) {
        console.log("Operaci\xF3n cancelada por el usuario.");
        return;
      }
      console.log("El usuario seleccion\xF3:", q);
      return q;
    } catch (error) {
      console.error("Error en el suggester:", error);
    }
  }
  /* 
  ----------------------------------------------------------------
  Con este método puedo actualizar valores en las notas ya existentes.
  Lo utilizo en esta clase, para actualizar el trimestre.
  Esta función solo actualiza, no crea el campos si no existe. 
  ----------------------------------------------------------------
  */
  async actualizarYAMLs(campos, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in campos) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = campos[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
};

// src/modules/noteLifecycleManager/views/vistaRegistroDiario.ts
var import_obsidian55 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroDiario = class extends import_obsidian55.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-diario";
  }
  getDisplayText() {
    return "Registro Diario";
  }
  getIcon() {
    return "file-clock";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    await this.actualizarVista(activeFile);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(activeFile);
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(activeFile) {
    var _a;
    this.contentEl.empty();
    const fechaHoy = DateTime.fromFormat(activeFile.basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        if (horaInicio.startOf("day").ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += parseInt(metadata.tiempoTrabajado || "0");
        }
      }
    }
    registrosHoy.sort((a, b) => {
      let fechaA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      let fechaB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      return fechaA - fechaB;
    });
    const titulo = this.contentEl.createEl("h2", { text: `Registros de tiempo del ${fechaHoy.toFormat("EEEE, DD")}.` });
    titulo.style.textAlign = "center";
    const table = this.contentEl.createEl("table", { cls: "table-resumenSemanal" });
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    ["Registro", "Descripci\xF3n", "Periodo", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((header) => {
      headerRow.createEl("th", { text: header });
    });
    const tbody = table.createEl("tbody");
    registrosHoy.forEach((registro) => {
      const row = tbody.createEl("tr");
      this.fillRowWithData(row, registro);
    });
    this.contentEl.appendChild(table);
  }
  fillRowWithData(row, registro) {
    const tdArchivo = row.createEl("td");
    const linkEl = document.createElement("a");
    linkEl.textContent = registro.frontmatter.aliases[0];
    linkEl.href = "#";
    linkEl.addEventListener("click", async (ev) => {
      ev.preventDefault();
      const file = this.app.vault.getAbstractFileByPath(registro.path);
      if (file instanceof import_obsidian55.TFile) {
        await this.app.workspace.getLeaf(true).openFile(file, { focus: true });
      }
    });
    tdArchivo.appendChild(linkEl);
    row.createEl("td", { text: registro.frontmatter.descripcion });
    row.createEl("td", { text: `${DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")} / ${DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")}` });
    const tdPeriodo = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      let ahora = DateTime.local();
      let inicio = DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
      let duracion = ahora.diff(inicio, ["days", "hours", "minutes"]);
      tdPeriodo.textContent = this.formatDuration(duracion);
    } else {
      let tiempoTrabajado = this.formatDuration(registro.frontmatter.tiempoTrabajado);
      tdPeriodo.textContent = tiempoTrabajado;
    }
    row.createEl("td", { text: registro.frontmatter.estado });
    row.createEl("td", { text: registro.frontmatter.id });
    const actionCell = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      actionCell.appendChild(this.createButtonTable("Cerrar", async () => {
        await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
      }));
    } else {
      actionCell.appendChild(this.createButtonTable("Retomar", () => {
        this.retomarTarea(registro.frontmatter.id);
      }));
    }
  }
  // Función auxiliar para formatear la duración de Luxon a un formato legible
  formatDuration(ms) {
    if (ms === null || ms === void 0 || isNaN(ms)) {
      return "No definido";
    } else {
      let minutos = Math.floor(ms / (1e3 * 60));
      let horas = Math.floor(minutos / 60);
      minutos = minutos % 60;
      let dias = Math.floor(horas / 24);
      horas = horas % 24;
      if (dias > 0) {
        return `${dias} d ${horas} h ${minutos} min`;
      } else if (horas > 0) {
        return `${horas} h ${minutos} min`;
      } else {
        return `${minutos} min`;
      }
    }
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian55.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/GPThora/GPThora.ts
var import_obsidian56 = require("obsidian");
var GPThora = class {
  constructor(app2) {
    this.app = app2;
  }
  onload() {
    this.app.commands.addCommand({
      id: "show-local-time",
      name: "Mostrar Hora Local",
      callback: () => this.showLocalTimeModal()
    });
  }
  showLocalTimeModal() {
    const modal = new LocalTimeModal(this.app);
    modal.open();
  }
};
var LocalTimeModal = class extends import_obsidian56.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const now2 = /* @__PURE__ */ new Date();
    const hours = now2.getHours() % 12 || 12;
    const minutes = now2.getMinutes().toString().padStart(2, "0");
    const ampm = now2.getHours() >= 12 ? "PM" : "AM";
    const timeString = `${hours}:${minutes} ${ampm}`;
    contentEl.createEl("h1", { text: "Hora Local" });
    contentEl.createEl("p", { text: timeString });
    contentEl.style.backgroundColor = "#2E3440";
    contentEl.style.color = "#D8DEE9";
    contentEl.style.padding = "20px";
    contentEl.style.textAlign = "center";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modules/moduloLibros/librosAPI.ts
var import_obsidian57 = require("obsidian");
init_luxon();
var librosAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tp = this.plugin.tp;
  }
  async kindle(dv) {
    let folderPrincipal = this.plugin.settings["folder_KindleNotes"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian57.TFolder)) {
      new import_obsidian57.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian57.Notice("No hay una nota activa.");
      return;
    }
    const metadata = this.plugin.app.metadataCache.getFileCache(archivoActivo);
    const yamlData = (metadata == null ? void 0 : metadata.frontmatter) || {};
    if (yamlData.kindleNote) {
      const linkElement = document.createElement("a");
      linkElement.href = yamlData.kindleNote;
      linkElement.textContent = "Ver en Kindle";
      dv.container.innerHTML = "";
      dv.container.appendChild(linkElement);
    } else {
      const notesList = await this.getNotesFromFolder(folderPrincipal);
      if (notesList.length === 0) {
        new import_obsidian57.Notice("No hay notas en el folder de Kindle.");
        return;
      }
      const suggestorConfig = {
        onChooseItem: async (selectedNote, evt) => {
          yamlData.kindleNote = selectedNote.path;
          await this.plugin.app.vault.modify(archivoActivo, `---
${yamlData}
...`);
          new import_obsidian57.Notice("Se ha guardado el link de la nota Kindle en el archivo actual.");
        },
        getItems: () => notesList,
        renderSuggestion: (item, el) => {
          el.textContent = item.basename;
        }
      };
      new Suggester(this.plugin, suggestorConfig).start();
    }
  }
  async getNotesFromFolder(folderPath) {
    const folderFiles = await this.plugin.app.vault.getAllLoadedFiles();
    return folderFiles.filter((file) => file instanceof import_obsidian57.TFile && file.path.startsWith(folderPath));
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearLibro(dv) {
    let folderPrincipal = this.plugin.settings["folder_Biblioteca"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian57.TFolder)) {
      new import_obsidian57.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian57.Notice("No hay una nota activa.");
      return;
    }
    const bookExists = await this.bookExistsInLibrary(folderPrincipal, archivoActivo);
    if (bookExists) {
      const alias = await this.getAlias(bookExists);
      const texto = document.createElement("p");
      const link = document.createElement("a");
      link.href = bookExists.path;
      link.textContent = alias;
      link.dataset.href = bookExists.path;
      link.className = "internal-link";
      texto.textContent = `El libro ya est\xE1 en la biblioteca: `;
      texto.appendChild(link);
      dv.container.appendChild(texto);
    } else {
      dv.container.innerHTML = "";
      const botonCrearLibro = document.createElement("button");
      botonCrearLibro.textContent = "Ingresar a mi Biblioteca";
      dv.container.appendChild(botonCrearLibro);
      botonCrearLibro.onclick = async () => {
        await this.ingresarLibroBiblioteca();
      };
    }
  }
  async bookExistsInLibrary(folderPrincipal, archivoActivo) {
    const files = this.plugin.app.vault.getFiles();
    const activeFileName = archivoActivo.basename;
    for (let file of files) {
      if (file.path.startsWith(folderPrincipal)) {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.asunto) {
          const asunto = frontmatter.asunto;
          if (Array.isArray(asunto)) {
            for (let entry of asunto) {
              if (entry.includes(`[[${activeFileName}]]`)) {
                return file;
              }
            }
          } else if (typeof asunto === "string" && asunto.includes(`[[${activeFileName}]]`)) {
            return file;
          }
        }
      }
    }
    return false;
  }
  async getAlias(file) {
    const cache = this.plugin.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    return frontmatter && frontmatter.aliases && frontmatter.aliases[0] ? frontmatter.aliases[0] : file.basename;
  }
  async ingresarLibroBiblioteca() {
    debugger;
    const template = app.vault.getAbstractFileByPath("Plantillas/Subsistemas/Libros/Biblioteca/Plt - Libro a Biblioteca.md");
    const filename = "Nuevo Libro";
    const folder = app.vault.getAbstractFileByPath("Inbox");
    if (template instanceof import_obsidian57.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    let crearNota = this.tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
};

// src/modules/moduloRegistroTiempo/API/updateSesionLectura.ts
init_utilsAPI();
var import_obsidian58 = require("obsidian");
init_luxon();
var updateSesionLectura = class extends YAMLUpdaterAPI2 {
  constructor(plugin) {
    super(plugin);
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
    this.tp = plugin.tp;
    this.nota = {};
    this.infoNota = {};
  }
  //actualizarNota(infoNota: any, campos: any): Promise<any>;
  //getFecha(): Promise<string>;
  //getHoraFinal(): Promise<string>;
  //getTiempoLeido(): Promise<string>;
  async getTiempoLeido(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getEstado(parametro, actual) {
    let campo;
    if (parametro == void 0) {
      campo = "\u{1F535}";
      if (campo === null) {
        new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getPPM() {
    debugger;
    let palabrasPorHoja = parseInt(this.infoNota.palabrasPorHoja);
    let paginasLeidas = parseInt(this.nota.pagLeidas);
    let tiempoLeido = parseInt(this.nota.tiempoLeido);
    let PPM = palabrasPorHoja * paginasLeidas / (tiempoLeido / 6e4);
    return PPM;
  }
  async getPagLeidas() {
    debugger;
    let pagFin = parseInt(this.nota.pagFin);
    let paginasLeidas = pagFin - parseInt(this.infoNota.pagInicio);
    return parseInt(paginasLeidas);
  }
  async getPagFin() {
    debugger;
    let prompt = this.tp.system.static_functions.get("prompt");
    let pagFin = await prompt(`\xBFHasta que p\xE1gina le\xEDste?`, `${this.infoNota.pagInicio}`, true);
    return parseInt(pagFin);
  }
  async getPorLeer() {
    debugger;
    let porLeer = parseInt(this.infoNota.paginas) - parseInt(this.nota.pagFin);
    return porLeer;
  }
};

// src/modules/taskManager/api/tareasAPI.ts
var import_obsidian60 = require("obsidian");

// src/modules/taskManager/utils/taskUtils.ts
var import_obsidian59 = require("obsidian");
var TaskUtils = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  compararFechas(fecha1, fecha2) {
    if (!fecha1 && !fecha2)
      return 0;
    if (!fecha1)
      return 1;
    if (!fecha2)
      return -1;
    return fecha1.getTime() - fecha2.getTime();
  }
  normalizarHora(hora) {
    const patrones = [
      /^(\d{1,2})(?::(\d{2}))?\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})$/
    ];
    for (const patron of patrones) {
      const match2 = hora.toLowerCase().match(patron);
      if (match2) {
        let horas = parseInt(match2[1]);
        const minutos = match2[2] ? match2[2] : "00";
        const periodo = match2[3];
        if (periodo === "pm" && horas < 12)
          horas += 12;
        if (periodo === "am" && horas === 12)
          horas = 0;
        return `${horas.toString().padStart(2, "0")}:${minutos}`;
      }
    }
    return null;
  }
  extraerFechasYHoras(linea) {
    var _a, _b, _c, _d;
    const horaInicioMatch = linea.match(/\[hI:\s*([^\]]+)\]/);
    const horaFinMatch = linea.match(/\[hF:\s*([^\]]+)\]/);
    return {
      fechaCreacion: (_a = linea.match(/➕ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _a[1],
      fechaScheduled: (_b = linea.match(/⏳ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _b[1],
      fechaStart: (_c = linea.match(/🛫 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _c[1],
      fechaVencimiento: (_d = linea.match(/📅 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _d[1],
      horaInicio: horaInicioMatch ? this.normalizarHora(horaInicioMatch[1].trim()) : void 0,
      horaFin: horaFinMatch ? this.normalizarHora(horaFinMatch[1].trim()) : void 0
    };
  }
  obtenerTituloNota(file) {
    var _a;
    const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata == null ? void 0 : metadata.aliases) {
      if (Array.isArray(metadata.aliases))
        return metadata.aliases[0];
      if (typeof metadata.aliases === "string")
        return metadata.aliases;
    }
    if (metadata == null ? void 0 : metadata.titulo)
      return metadata.titulo;
    const coincidencia = file.basename.match(/(?:PGTD|PQ|AI|AV|Ax|RR|DJ|OCA|CAC) - (.+)/);
    if (coincidencia && coincidencia[1])
      return coincidencia[1];
    return file.basename;
  }
  categorizarEtiquetas(etiquetas) {
    return {
      todoist: etiquetas.filter((e) => e.startsWith("#todoist")),
      contextos: etiquetas.filter((e) => e.match(/#cx(?:[/-].+)$/)).map((e) => this.limpiarPrefijo(e, "cx")),
      personas: etiquetas.filter((e) => e.startsWith("#px-")).map((e) => this.formatearEtiquetaPersona(e)),
      otras: etiquetas.filter(
        (e) => !e.startsWith("#todoist") && !e.match(/#cx(?:[/-]|$)/) && !e.startsWith("#px-")
      )
    };
  }
  // Nuevo método para formatear etiquetas de personas
  formatearEtiquetaPersona(etiqueta) {
    const nombre = etiqueta.replace("#px-", "");
    return nombre.replace(/_/g, " ");
  }
  limpiarPrefijo(etiqueta, prefijo) {
    const sinPrefijo = etiqueta.replace(new RegExp(`#${prefijo}[/-]`), "");
    return sinPrefijo.replace(/-/g, " \u2192 ").replace(/\//g, " \u2192 ");
  }
  limpiarTextoTarea(linea) {
    let textoLimpio = linea.replace(/^- \[ \]/, "").replace(/[➕📅⏳🛫] \d{4}-\d{2}-\d{2}/g, "").replace(/\[hI:[^\]]+\]/g, "").replace(/\[hF:[^\]]+\]/g, "").replace(/\[link\]\([^\)]+\)/g, "").replace(/%%\[todoist_id:: \d+\]%%/g, "").replace(/#[\w-]+(?:\/[\w-]+)*\b/g, "").replace(/#[\w-]+(?:-[\w-]+)*\b/g, "");
    textoLimpio = textoLimpio.replace(/\s+/g, " ").trim();
    return textoLimpio;
  }
  // Método de utilidad para obtener una representación jerárquica de las etiquetas
  obtenerJerarquiaEtiquetas(etiquetas) {
    const jerarquia = /* @__PURE__ */ new Map();
    etiquetas.forEach((etiqueta) => {
      var _a;
      const partes = etiqueta.slice(1).split(/[/-]/);
      const categoria = partes[0];
      if (!jerarquia.has(categoria)) {
        jerarquia.set(categoria, /* @__PURE__ */ new Set());
      }
      if (partes.length > 1) {
        const subetiquetas = partes.slice(1).join("/");
        (_a = jerarquia.get(categoria)) == null ? void 0 : _a.add(subetiquetas);
      }
    });
    return jerarquia;
  }
  obtenerFechaLocal() {
    const ahora = /* @__PURE__ */ new Date();
    return new Date(
      ahora.getFullYear(),
      ahora.getMonth(),
      ahora.getDate(),
      0,
      0,
      0
    );
  }
  parsearFechaVencimiento(fechaStr) {
    if (!fechaStr)
      return null;
    try {
      const [a\u00F1o, mes, dia] = fechaStr.split("-").map((num) => parseInt(num));
      if (isNaN(a\u00F1o) || isNaN(mes) || isNaN(dia))
        return null;
      const fecha = new Date(a\u00F1o, mes - 1, dia, 0, 0, 0);
      return fecha;
    } catch (error) {
      console.error("Error parseando fecha:", error);
      return null;
    }
  }
  normalizarFechaAString(fecha) {
    const a\u00F1o = fecha.getFullYear();
    const mes = String(fecha.getMonth() + 1).padStart(2, "0");
    const dia = String(fecha.getDate()).padStart(2, "0");
    return `${a\u00F1o}-${mes}-${dia}`;
  }
  extraerDependenciasYIds(linea) {
    console.log("Analizando l\xEDnea para IDs:", linea);
    const resultado = {
      taskId: void 0,
      dependencyId: void 0
    };
    const taskIdMatch = linea.match(/🆔\s*([a-z0-9]{5,7})/);
    if (taskIdMatch) {
      resultado.taskId = taskIdMatch[1];
      console.log("ID encontrado:", resultado.taskId);
    }
    const dependencyMatch = linea.match(/⛔\s*([a-z0-9]{5,7})/);
    if (dependencyMatch) {
      resultado.dependencyId = dependencyMatch[1];
      console.log("Dependencia encontrada:", resultado.dependencyId);
    }
    return resultado;
  }
  async verificarEstadoTarea(taskId) {
    console.log("\nVerificando estado de tarea:", taskId);
    const todosLosArchivos = this.plugin.app.vault.getMarkdownFiles();
    const filesParaProcesar = todosLosArchivos.filter((file) => !this.debeExcluirArchivo(file));
    console.log(`Buscando en ${filesParaProcesar.length} archivos (excluidos: ${todosLosArchivos.length - filesParaProcesar.length})`);
    for (const file of filesParaProcesar) {
      try {
        const contenido = await this.plugin.app.vault.cachedRead(file);
        const lineas = contenido.split("\n");
        for (const linea of lineas) {
          if (linea.includes(`\u{1F194} ${taskId}`)) {
            const estaCompletada = linea.trim().startsWith("- [x]");
            const tituloArchivo = this.obtenerTituloNota(file);
            const textoTarea = this.limpiarTextoTarea(linea);
            console.log("Tarea encontrada en:", file.path);
            console.log("Estado completada:", estaCompletada);
            console.log("Texto de la tarea:", textoTarea);
            return {
              completada: estaCompletada,
              rutaArchivo: file.path,
              tituloArchivo,
              textoTarea
            };
          }
        }
      } catch (error) {
        console.error(`Error procesando archivo ${file.path}:`, error);
      }
    }
    console.log("Tarea no encontrada en los archivos permitidos");
    return {
      completada: false
    };
  }
  // En la clase TaskUtils
  extraerEtiquetas(linea) {
    const etiquetas = [];
    const patronesEtiquetas = [
      // Etiquetas de personas con formato #px-Nombre_Apellido 
      /#px-[A-Za-z]+(?:_[A-Za-z]+)*(?:_[A-Za-z]+)?\b/g,
      // Etiquetas simples: #todoist
      /#[\w-]+\b/g,
      // Etiquetas con jerarquía usando "/": #cx/alguna/cosa
      /#[\w-]+(?:\/[\w-]+)+\b/g,
      // Etiquetas con jerarquía usando "-": #cx-alguna-cosa
      /#[\w-]+(?:-[\w-]+)+\b/g
    ];
    patronesEtiquetas.forEach((patron) => {
      const coincidencias = linea.match(patron);
      if (coincidencias) {
        coincidencias.forEach((etiqueta) => {
          if (!etiquetas.includes(etiqueta) && this.esEtiquetaValida(etiqueta)) {
            etiquetas.push(etiqueta);
          }
        });
      }
    });
    return this.organizarEtiquetas(etiquetas);
  }
  esEtiquetaValida(etiqueta) {
    if (!etiqueta.startsWith("#"))
      return false;
    if (etiqueta.startsWith("#px-")) {
      const nombreCompleto = etiqueta.slice(4);
      return /^[A-Za-z]+(?:_[A-Za-z]+)*$/.test(nombreCompleto);
    }
    const caracteresInvalidos = /[!@$%^&*()+={}\[\]:;"'<>,.?~\\|]/;
    if (caracteresInvalidos.test(etiqueta))
      return false;
    const partesEtiqueta = etiqueta.slice(1).split(/[/-]/);
    return partesEtiqueta.every((parte) => parte.length > 0);
  }
  organizarEtiquetas(etiquetas) {
    const categoriasConocidas = {
      todoist: [],
      cx: [],
      px: [],
      otras: []
    };
    etiquetas.forEach((etiqueta) => {
      if (etiqueta.startsWith("#px-")) {
        categoriasConocidas.px.push(etiqueta);
      } else if (etiqueta.startsWith("#todoist")) {
        categoriasConocidas.todoist.push(etiqueta);
      } else if (etiqueta.match(/#cx(?:[/-]|$)/)) {
        categoriasConocidas.cx.push(etiqueta);
      } else {
        categoriasConocidas.otras.push(etiqueta);
      }
    });
    Object.values(categoriasConocidas).forEach((categoria) => {
      categoria.sort((a, b) => a.localeCompare(b));
    });
    return [
      ...categoriasConocidas.todoist,
      ...categoriasConocidas.cx,
      ...categoriasConocidas.px,
      ...categoriasConocidas.otras
    ];
  }
  // Agregar método para verificar exclusiones
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async encontrarLineasTarea(file) {
    const lineasTareas = /* @__PURE__ */ new Map();
    try {
      const contenido = await this.plugin.app.vault.cachedRead(file);
      const lineas = contenido.split("\n");
      lineas.forEach((linea, index) => {
        const textoLimpio = this.limpiarTextoTarea(linea);
        if (textoLimpio && linea.trim().startsWith("- [")) {
          lineasTareas.set(textoLimpio, {
            numero: index + 1,
            texto: linea.trim()
          });
        }
      });
    } catch (error) {
      console.error(`Error procesando l\xEDneas en ${file.path}:`, error);
    }
    return lineasTareas;
  }
};

// src/modules/taskManager/utils/taskWeightCalculator.ts
var _TaskWeightCalculator = class _TaskWeightCalculator {
  static setTaskUtils(utils) {
    _TaskWeightCalculator.taskUtils = utils;
  }
  static getFechaPrioritaria(task, tipoFecha = "any") {
    if (!task)
      return null;
    switch (tipoFecha) {
      case "start":
        return task.fechaStart || null;
      case "due":
        return task.fechaVencimiento || null;
      case "scheduled":
        return task.fechaScheduled || null;
      case "any":
        return task.fechaVencimiento || task.fechaScheduled || task.fechaStart || null;
      default:
        return null;
    }
  }
  static shouldIncludeTask(task, searchType, currentDate) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return false;
    }
    try {
      switch (searchType) {
        case "start_vencidas": {
          const fechaStart = task.fechaStart;
          if (!fechaStart)
            return false;
          const fechaStartObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaStart);
          return fechaStartObj !== null && fechaStartObj < currentDate;
        }
        case "vencidas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          return fechaVencObj !== null && fechaVencObj < currentDate;
        }
        case "hoy": {
          const fechas = [task.fechaVencimiento, task.fechaScheduled, task.fechaStart].filter((f) => f);
          return fechas.some((fecha) => {
            const fechaObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fecha);
            return (fechaObj == null ? void 0 : fechaObj.toDateString()) === currentDate.toDateString();
          });
        }
        case "proximas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          if (!fechaVencObj)
            return false;
          const diasDiferencia = Math.ceil(
            (fechaVencObj.getTime() - currentDate.getTime()) / (1e3 * 60 * 60 * 24)
          );
          return diasDiferencia >= 0 && diasDiferencia <= 7;
        }
        default:
          return false;
      }
    } catch (error) {
      console.error("Error en shouldIncludeTask:", error);
      return false;
    }
  }
  static calculateWeight(task) {
    let baseWeight = 0;
    let timeWeight = 0;
    let priorityWeight = 0;
    if (task.fechaVencimiento)
      baseWeight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      baseWeight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      baseWeight += this.WEIGHTS.START;
    if (task.horaFin)
      timeWeight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      timeWeight += this.WEIGHTS.HORA_INICIO;
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      priorityWeight += this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOWEST;
    return {
      baseWeight,
      timeWeight,
      priorityWeight,
      totalWeight: baseWeight + timeWeight + priorityWeight
    };
  }
  static sortTasks(tasks) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return tasks;
    }
    return tasks.sort((a, b) => {
      var _a, _b, _c, _d;
      try {
        const fechaA = this.getFechaPrioritaria(a, "any");
        const fechaB = this.getFechaPrioritaria(b, "any");
        if (fechaA !== fechaB) {
          const dateA = fechaA ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaA) : null;
          const dateB = fechaB ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaB) : null;
          if (dateA && dateB) {
            return dateA.getTime() - dateB.getTime();
          }
          return 0;
        }
        if (a.horaInicio && b.horaInicio) {
          if (a.horaInicio !== b.horaInicio) {
            return a.horaInicio.localeCompare(b.horaInicio);
          }
        } else if (a.horaInicio) {
          return -1;
        } else if (b.horaInicio) {
          return 1;
        }
        const weightA = (_b = (_a = a.weight) == null ? void 0 : _a.totalWeight) != null ? _b : 0;
        const weightB = (_d = (_c = b.weight) == null ? void 0 : _c.totalWeight) != null ? _d : 0;
        return weightB - weightA;
      } catch (error) {
        console.error("Error ordenando tareas:", error);
        return 0;
      }
    });
  }
  static calculateBaseWeight(task) {
    let weight = 0;
    if (task.fechaVencimiento)
      weight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      weight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      weight += this.WEIGHTS.START;
    return weight;
  }
  static calculateTimeWeight(task) {
    let weight = 0;
    if (task.horaFin)
      weight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      weight += this.WEIGHTS.HORA_INICIO;
    return weight;
  }
  static calculatePriorityWeight(task) {
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      return this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      return this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      return this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      return this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      return this.WEIGHTS.PRIORITY.LOWEST;
    return 0;
  }
  static esFechaValida(fecha) {
    try {
      const fechaObj = new Date(fecha);
      return fechaObj.toString() !== "Invalid Date";
    } catch (e) {
      return false;
    }
  }
};
_TaskWeightCalculator.WEIGHTS = {
  HORA_FIN: 5,
  HORA_INICIO: 5,
  DUE_DATE: 5,
  SCHEDULED: 4,
  START: 3,
  PRIORITY: {
    HIGHEST: 4,
    HIGH: 3,
    MEDIUM: 2,
    LOW: -1,
    LOWEST: -2
  }
};
var TaskWeightCalculator = _TaskWeightCalculator;

// src/modules/taskManager/api/tareasAPI.ts
var TareasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.taskUtils = new TaskUtils(plugin);
    TaskWeightCalculator.setTaskUtils(this.taskUtils);
  }
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async procesarTareas(files, filtro, buscarEnEjecucion = false) {
    const tareas = [];
    const errores = [];
    try {
      const filesParaProcesar = files.filter((file) => !this.debeExcluirArchivo(file));
      console.log(`
=== INICIANDO PROCESAMIENTO DE TAREAS ===`);
      console.log(`Procesando ${filesParaProcesar.length} archivos de ${files.length} totales`);
      for (const file of filesParaProcesar) {
        try {
          const contenido = await this.plugin.app.vault.cachedRead(file);
          const lineas = contenido.split("\n");
          const tituloNota = this.taskUtils.obtenerTituloNota(file);
          console.log(`
Procesando archivo: ${file.path}`);
          for (const linea of lineas) {
            const esEnEjecucion = linea.trim().startsWith("- [/]");
            const esAbierta = linea.trim().startsWith("- [ ]");
            const esCompletada = linea.trim().startsWith("- [x]");
            if (!linea.trim().startsWith("- ["))
              continue;
            if (buscarEnEjecucion) {
              if (!esEnEjecucion)
                continue;
            } else {
              if (esCompletada || esEnEjecucion)
                continue;
              if (!esAbierta)
                continue;
            }
            const textoLimpio = this.taskUtils.limpiarTextoTarea(linea);
            const textoOriginal = linea.trim();
            const fechasYHoras = this.taskUtils.extraerFechasYHoras(linea);
            const etiquetasExtraidas = this.taskUtils.extraerEtiquetas(linea);
            const etiquetasCategorizadas = this.taskUtils.categorizarEtiquetas(etiquetasExtraidas);
            const { taskId, dependencyId } = this.taskUtils.extraerDependenciasYIds(linea);
            const tarea = {
              texto: textoLimpio,
              textoOriginal,
              rutaArchivo: file.path,
              nombreArchivo: file.basename,
              titulo: tituloNota,
              estado: esEnEjecucion ? "en_ejecucion" /* EnEjecucion */ : "abierta" /* Abierta */,
              ...fechasYHoras,
              etiquetas: {
                todas: etiquetasExtraidas,
                ...etiquetasCategorizadas
              },
              taskId,
              dependencyId
            };
            tarea.weight = TaskWeightCalculator.calculateWeight(tarea);
            if (dependencyId) {
              const estadoDependencia = await this.taskUtils.verificarEstadoTarea(dependencyId);
              tarea.isBlocked = !estadoDependencia.completada;
              tarea.dependencyLocation = estadoDependencia.rutaArchivo;
              tarea.dependencyTitle = estadoDependencia.tituloArchivo;
              tarea.dependencyTexto = estadoDependencia.textoTarea;
            }
            const cumpleFiltro = await Promise.resolve(filtro(tarea));
            if (cumpleFiltro) {
              console.log(`-> Tarea agregada: ${textoLimpio.substring(0, 50)}...`);
              tareas.push(tarea);
            }
          }
        } catch (fileError) {
          errores.push(`Error procesando archivo ${file.path}: ${fileError.message}`);
          console.error(`Error en archivo ${file.path}:`, fileError);
        }
      }
    } catch (error) {
      console.error("Error general procesando tareas:", error);
      new import_obsidian60.Notice("Error procesando tareas. Revisa la consola para m\xE1s detalles.");
    }
    if (errores.length > 0) {
      console.warn("\nErrores encontrados durante el procesamiento:", errores);
    }
    console.log(`
=== PROCESAMIENTO COMPLETADO ===`);
    console.log(`Total de tareas encontradas: ${tareas.length}`);
    return buscarEnEjecucion ? this.organizarTareasEnEjecucion(tareas) : TaskWeightCalculator.sortTasks(tareas);
  }
  guardarYAbrirArchivo(nombreArchivo, contenido) {
    return new Promise(async (resolve, reject) => {
      try {
        const carpetaGTD = this.plugin.app.vault.getAbstractFileByPath(
          this.plugin.settings.folder_SistemaGTD
        );
        if (!carpetaGTD) {
          await this.plugin.app.vault.createFolder(
            this.plugin.settings.folder_SistemaGTD
          );
        }
        const archivoExistente = this.plugin.app.vault.getAbstractFileByPath(nombreArchivo);
        if (archivoExistente instanceof import_obsidian60.TFile) {
          await this.plugin.app.vault.modify(archivoExistente, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(archivoExistente);
        } else {
          const nuevoArchivo = await this.plugin.app.vault.create(nombreArchivo, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(nuevoArchivo);
        }
        resolve();
      } catch (error) {
        console.error("Error al guardar/abrir archivo:", error);
        reject(error);
      }
    });
  }
  // Métodos principales de búsqueda de tareas
  async getTareasVencidasAbiertas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasHoy() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "hoy", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasProximas(diasProximos = 7) {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "proximas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartVencidas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "start_vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaStart)
          return false;
        const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
        return fechaStart && fechaStart <= limiteFuturo && fechaStart >= hoy;
      }
    );
  }
  // Métodos de renderizado y visualización
  generarBotonActualizacion(metodo, parametros) {
    return `\`\`\`dataviewjs
const gp = app.plugins.plugins['obsidian-personal-management'];
if (!gp) {
    dv.paragraph("\u26A0\uFE0F Plugin de Gesti\xF3n Personal no encontrado");
    return;
}

const btn = this.container.createEl('button', {text: '\u{1F504} Actualizar Vista'});
btn.style.cssText = 'padding: 5px 15px; background-color: #1e1e1e; color: #ffffff; border: 1px solid #4a4a4a; border-radius: 4px; cursor: pointer; margin-bottom: 10px;';

btn.addEventListener('mouseenter', () => btn.style.backgroundColor = '#2e2e2e');
btn.addEventListener('mouseleave', () => btn.style.backgroundColor = '#1e1e1e');

btn.addEventListener('click', async () => {
    try {
        new Notice('Actualizando vista...');
        await gp.tareasAPI.${metodo}(${parametros || ""});
    } catch (error) {
        console.error('Error:', error);
        new Notice('Error al actualizar tareas');
    }
});
\`\`\`

`;
  }
  // Métodos públicos de visualización correspondientes a los comandos
  async mostrarTareasVencidas() {
    try {
      const tareas = await this.getTareasVencidasAbiertas();
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas vencidas abiertas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Vencidas",
        "mostrarTareasVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasVencidas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Pr\xF3ximas",
        "mostrarTareasProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasProximas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasHoy() {
    try {
      const tareas = await this.getTareasHoy();
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas programadas para hoy.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas para Hoy",
        "mostrarTareasHoy"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas para Hoy.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas para hoy`);
    } catch (error) {
      console.error("Error en mostrarTareasHoy:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartVencidas() {
    try {
      const tareas = await this.getTareasStartVencidas();
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas con inicio vencido.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas con Inicio Vencido",
        "mostrarTareasStartVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Inicio Vencido.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas con inicio vencido`);
    } catch (error) {
      console.error("Error en mostrarTareasStartVencidas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasStartProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas por iniciar en el per\xEDodo especificado.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas por Iniciar",
        "mostrarTareasStartProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Iniciar.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas por iniciar`);
    } catch (error) {
      console.error("Error en mostrarTareasStartProximas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Métodos de utilidad privados
  tieneFechasValidas(fechasYHoras) {
    const { fechaVencimiento, fechaScheduled, fechaStart } = fechasYHoras;
    return fechaVencimiento || fechaScheduled || fechaStart;
  }
  generarVistaCompleta(tareas, titulo, metodoActualizacion, diasProximos) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# ${titulo}

`;
    contenido += this.generarBotonActualizacion(metodoActualizacion, diasProximos);
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    if (diasProximos) {
      contenido += `> Mostrando tareas para los pr\xF3ximos ${diasProximos} d\xEDas
`;
    }
    contenido += `> Total de tareas encontradas: ${tareas.length}

`;
    contenido += this.renderizarTareasAgrupadas(tareas);
    return contenido;
  }
  renderizarTareasAgrupadas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTarea(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTarea(tarea) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    - Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} : ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} : ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  obtenerPrioridadTarea(texto) {
    if (texto.includes("\u{1F53A}"))
      return { emoji: "\u{1F53A}", nombre: "Muy Alta" };
    if (texto.includes("\u23EB"))
      return { emoji: "\u23EB", nombre: "Alta" };
    if (texto.includes("\u{1F53C}"))
      return { emoji: "\u{1F53C}", nombre: "Media" };
    if (texto.includes("\u{1F53D}"))
      return { emoji: "\u{1F53D}", nombre: "Baja" };
    if (texto.includes("\u23EC"))
      return { emoji: "\u23EC", nombre: "Muy Baja" };
    return null;
  }
  agruparTareasPorArchivo(tareas) {
    return tareas.reduce((acc, tarea) => {
      if (!acc[tarea.rutaArchivo]) {
        acc[tarea.rutaArchivo] = {
          titulo: tarea.titulo,
          tareas: []
        };
      }
      acc[tarea.rutaArchivo].tareas.push(tarea);
      return acc;
    }, {});
  }
  formatearFechaConContexto(fecha, tipo) {
    try {
      const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
      if (!fechaObj)
        return fecha;
      const hoy = this.taskUtils.obtenerFechaLocal();
      const diferenciaDias = Math.ceil(
        (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
      );
      let textoBase = "";
      switch (tipo) {
        case "due":
          textoBase = diferenciaDias < 0 ? "Venci\xF3" : "Vence";
          break;
        case "scheduled":
          textoBase = "Programada";
          break;
        case "start":
          textoBase = diferenciaDias < 0 ? "Debi\xF3 iniciar" : "Inicia";
          break;
      }
      let contexto = "";
      if (diferenciaDias === 0) {
        contexto = "hoy";
      } else if (diferenciaDias === 1) {
        contexto = "ma\xF1ana";
      } else if (diferenciaDias === -1) {
        contexto = "ayer";
      } else if (diferenciaDias < 0) {
        contexto = `hace ${Math.abs(diferenciaDias)} d\xEDas`;
      } else {
        contexto = `en ${diferenciaDias} d\xEDas`;
      }
      return `${textoBase} ${fecha} (${contexto})`;
    } catch (error) {
      console.error("Error formateando fecha:", error);
      return fecha;
    }
  }
  // Añadir nuevo método para obtener tareas futuras
  async getTareasFuturas(diasFuturos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasFuturos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const fechasRelevantes = [
          tarea.fechaVencimiento,
          tarea.fechaScheduled,
          tarea.fechaStart
        ].filter(Boolean);
        return fechasRelevantes.some((fecha) => {
          const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
          return fechaObj && fechaObj > hoy && fechaObj <= limiteFuturo;
        });
      }
    );
  }
  // Añadir método para mostrar tareas futuras
  async mostrarTareasFuturas(diasFuturos = 7) {
    try {
      const tareas = await this.getTareasFuturas(diasFuturos);
      if (tareas.length === 0) {
        new import_obsidian60.Notice(`No hay tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas.`);
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Programadas (Pr\xF3ximos ${diasFuturos} d\xEDas)`,
        "mostrarTareasFuturas",
        diasFuturos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Programadas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas`);
    } catch (error) {
      console.error("Error en mostrarTareasFuturas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Añadir nuevo método para obtener tareas en ejecución
  async getTareasEnEjecucion() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const taskLine = tarea.texto.trim();
        return taskLine.startsWith("- [/]");
      },
      true
      // nuevo parámetro para indicar que buscamos tareas en ejecución
    );
  }
  // Añadir método para mostrar tareas en ejecución
  async mostrarTareasEnEjecucion() {
    try {
      const tareas = await this.procesarTareas(
        this.plugin.app.vault.getMarkdownFiles(),
        (tarea) => true,
        // No aplicamos filtro adicional porque ya filtramos por estado en procesarTareas
        true
        // Indicar que buscamos tareas en ejecución
      );
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No se encontraron tareas en ejecuci\xF3n");
        return;
      }
      const contenido = this.generarVistaEnEjecucion(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas en Ejecuci\xF3n.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas en ejecuci\xF3n`);
    } catch (error) {
      console.error("Error en mostrarTareasEnEjecucion:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaEnEjecucion(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas en Ejecuci\xF3n

`;
    contenido += this.generarBotonActualizacion("mostrarTareasEnEjecucion");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas en ejecuci\xF3n: ${tareas.length}

`;
    const tareasConVencimiento = tareas.filter((t) => t.fechaVencimiento);
    const tareasProgramadas = tareas.filter((t) => !t.fechaVencimiento && t.fechaScheduled);
    const tareasConInicio = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && t.fechaStart);
    const tareasSinFecha = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && !t.fechaStart);
    if (tareasConVencimiento.length > 0) {
      contenido += `## Con fecha de vencimiento (${tareasConVencimiento.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConVencimiento);
    }
    if (tareasProgramadas.length > 0) {
      contenido += `## Programadas (${tareasProgramadas.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasProgramadas);
    }
    if (tareasConInicio.length > 0) {
      contenido += `## Con fecha de inicio (${tareasConInicio.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConInicio);
    }
    if (tareasSinFecha.length > 0) {
      contenido += `## Sin fecha asignada (${tareasSinFecha.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasSinFecha);
      return contenido;
    }
  }
  // Añadir método específico para renderizar grupos de tareas en ejecución
  renderizarGrupoTareasEnEjecucion(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarGrupoTareas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTareaEnEjecucion(tarea) {
    var _a, _b, _c, _d;
    let contenido = `${tarea.texto}
`;
    if (tarea.fechaVencimiento || tarea.fechaScheduled || tarea.fechaStart) {
      contenido += `    - Fechas:
`;
      if (tarea.fechaVencimiento) {
        contenido += `        - \u{1F4C5} : ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
      }
      if (tarea.fechaScheduled) {
        contenido += `        - \u23F3 : ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
      }
      if (tarea.fechaStart) {
        contenido += `        - \u{1F6EB}: ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
      }
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} Personas: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} Todoist: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  organizarTareasEnEjecucion(tareas) {
    return tareas.sort((a, b) => {
      var _a, _b;
      const fechaA = a.fechaVencimiento || a.fechaScheduled || a.fechaStart;
      const fechaB = b.fechaVencimiento || b.fechaScheduled || b.fechaStart;
      if (fechaA && fechaB) {
        const fechaObjA = this.taskUtils.parsearFechaVencimiento(fechaA);
        const fechaObjB = this.taskUtils.parsearFechaVencimiento(fechaB);
        if (fechaObjA && fechaObjB) {
          return fechaObjA.getTime() - fechaObjB.getTime();
        }
      }
      if (fechaA)
        return -1;
      if (fechaB)
        return 1;
      return (((_a = b.weight) == null ? void 0 : _a.totalWeight) || 0) - (((_b = a.weight) == null ? void 0 : _b.totalWeight) || 0);
    });
  }
  // Nuevo método para obtener tareas scheduled vencidas
  async getTareasScheduledVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled < hoy;
      }
    );
  }
  // Nuevo método para obtener tareas scheduled próximas
  async getTareasScheduledProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled >= hoy && fechaScheduled <= limiteFuturo;
      }
    );
  }
  // Método para mostrar tareas scheduled vencidas
  async mostrarTareasScheduledVencidas() {
    try {
      const tareas = await this.getTareasScheduledVencidas();
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas scheduled vencidas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Scheduled Vencidas",
        "mostrarTareasScheduledVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Vencidas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas scheduled vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledVencidas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Método para mostrar tareas scheduled próximas
  async mostrarTareasScheduledProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasScheduledProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas scheduled pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Scheduled Pr\xF3ximas (${diasProximos} d\xEDas)`,
        "mostrarTareasScheduledProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas scheduled pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledProximas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Método auxiliar para la visualización de fechas scheduled
  formatearFechaScheduled(fecha) {
    const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
    if (!fechaObj)
      return fecha;
    const hoy = this.taskUtils.obtenerFechaLocal();
    const diferenciaDias = Math.ceil(
      (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
    );
    let contexto = "";
    if (diferenciaDias < 0) {
      contexto = `(retrasada ${Math.abs(diferenciaDias)} d\xEDas)`;
    } else if (diferenciaDias === 0) {
      contexto = "(hoy)";
    } else if (diferenciaDias === 1) {
      contexto = "(ma\xF1ana)";
    } else {
      contexto = `(en ${diferenciaDias} d\xEDas)`;
    }
    return `${fecha} ${contexto}`;
  }
  // Método para obtener todas las tareas vencidas
  async getTodasTareasVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        let estaVencida = false;
        if (tarea.fechaVencimiento) {
          const fechaVenc = this.taskUtils.parsearFechaVencimiento(tarea.fechaVencimiento);
          if (fechaVenc && fechaVenc < hoy) {
            tarea.tipoVencimiento = ["due"];
            estaVencida = true;
          }
        }
        if (tarea.fechaScheduled) {
          const fechaSched = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
          if (fechaSched && fechaSched < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("scheduled");
            estaVencida = true;
          }
        }
        if (tarea.fechaStart) {
          const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
          if (fechaStart && fechaStart < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("start");
            estaVencida = true;
          }
        }
        return estaVencida;
      }
    );
  }
  // Método para mostrar todas las tareas vencidas
  async mostrarTodasTareasVencidas() {
    try {
      const tareas = await this.getTodasTareasVencidas();
      if (tareas.length === 0) {
        new import_obsidian60.Notice("No hay tareas vencidas.");
        return;
      }
      const contenido = this.generarVistaTodasVencidas(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Todas las Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTodasTareasVencidas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Método específico para generar la vista de todas las tareas vencidas
  generarVistaTodasVencidas(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Todas las Tareas Vencidas

`;
    contenido += this.generarBotonActualizacion("mostrarTodasTareasVencidas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas vencidas: ${tareas.length}

`;
    const tareasVencDue = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("due");
    });
    const tareasVencScheduled = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("scheduled");
    });
    const tareasVencStart = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("start");
    });
    if (tareasVencDue.length > 0) {
      contenido += `## Tareas con Fecha de Vencimiento Pasada (${tareasVencDue.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencDue, "due");
    }
    if (tareasVencScheduled.length > 0) {
      contenido += `## Tareas Scheduled Retrasadas (${tareasVencScheduled.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencScheduled, "scheduled");
    }
    if (tareasVencStart.length > 0) {
      contenido += `## Tareas con Inicio Retrasado (${tareasVencStart.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencStart, "start");
    }
    return contenido;
  }
  // Método auxiliar para renderizar grupos de tareas vencidas
  renderizarGrupoTareasVencidas(tareas, tipo) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaVencida(tarea, tipo);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método auxiliar para renderizar una tarea vencida
  renderizarTareaVencida(tarea, tipo) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    switch (tipo) {
      case "due":
        contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "scheduled":
        contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "start":
        contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        break;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464}: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2}: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    return contenido;
  }
  // Método principal para obtener tareas con dependencias
  async getTareasDependientes() {
    console.log("=== Iniciando b\xFAsqueda de tareas con dependencias ===");
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        console.log("DependencyId:", tarea.dependencyId);
        if (!tarea.dependencyId) {
          console.log("-> Ignorada: No tiene dependencia");
          return false;
        }
        const resultado = await this.taskUtils.verificarEstadoTarea(tarea.dependencyId);
        console.log(`-> Dependencia ${tarea.dependencyId} completada:`, resultado.completada);
        tarea.isBlocked = !resultado.completada;
        tarea.dependencyLocation = resultado.rutaArchivo;
        tarea.dependencyTitle = resultado.tituloArchivo;
        return true;
      }
    );
    return {
      ejecutables: tareas.filter((t) => !t.isBlocked),
      bloqueadas: tareas.filter((t) => t.isBlocked)
    };
  }
  // Método para mostrar las tareas dependientes
  async mostrarTareasDependientes() {
    try {
      const { ejecutables, bloqueadas } = await this.getTareasDependientes();
      if (ejecutables.length === 0 && bloqueadas.length === 0) {
        new import_obsidian60.Notice("No se encontraron tareas con dependencias.");
        return;
      }
      const contenido = this.generarVistaDependencias(ejecutables, bloqueadas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Dependencias.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${ejecutables.length + bloqueadas.length} tareas con dependencias`);
    } catch (error) {
      console.error("Error en mostrarTareasDependientes:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  // Método para generar la vista de dependencias
  generarVistaDependencias(ejecutables, bloqueadas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas con Dependencias

`;
    contenido += this.generarBotonActualizacion("mostrarTareasDependientes");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas con dependencias: ${ejecutables.length + bloqueadas.length}

`;
    if (ejecutables.length > 0) {
      contenido += `## Tareas Ejecutables (${ejecutables.length})
`;
      contenido += `> [!success] Estas tareas ya pueden ser ejecutadas porque sus dependencias est\xE1n completadas

`;
      contenido += this.renderizarGrupoDependencias(ejecutables, true);
    }
    if (bloqueadas.length > 0) {
      contenido += `
## Tareas Bloqueadas (${bloqueadas.length})
`;
      contenido += `> [!warning] Estas tareas est\xE1n esperando que se completen otras tareas

`;
      contenido += this.renderizarGrupoDependencias(bloqueadas, false);
    }
    return contenido;
  }
  // Método para renderizar grupos de tareas con dependencias
  renderizarGrupoDependencias(tareas, ejecutables) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaConDependencia(tarea, ejecutables);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método para renderizar una tarea individual con dependencia
  renderizarTareaConDependencia(tarea, esEjecutable) {
    var _a, _b;
    console.log("\nRenderizando tarea:", tarea.texto);
    console.log("Es ejecutable:", esEjecutable);
    let contenido = `- [ ] ${tarea.texto}
`;
    if (tarea.taskId) {
      contenido += `    \u{1F194} ${tarea.taskId}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: ${tarea.dependencyTitle ? `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]` : "No encontrada"}`;
      if (tarea.dependencyTexto) {
        contenido += `: "${tarea.dependencyTexto}"`;
      }
      contenido += esEjecutable ? " \u2705" : " \u23F3";
      contenido += "\n";
    }
    if (tarea.fechaVencimiento) {
      contenido += `    \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
    }
    if (tarea.fechaScheduled) {
      contenido += `    \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
    }
    if (tarea.fechaStart) {
      contenido += `    \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    return contenido;
  }
  async mostrarTareasPersonas() {
    try {
      const { personasConTareas, totalPersonas, totalTareas } = await this.getTareasPersonas();
      if (totalPersonas === 0) {
        new import_obsidian60.Notice("No se encontraron tareas asignadas a personas.");
        return;
      }
      const contenido = this.generarVistaPersonas(personasConTareas, totalPersonas, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Persona.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${totalTareas} tareas asignadas a ${totalPersonas} personas`);
    } catch (error) {
      console.error("Error en mostrarTareasPersonas:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaPersonas(personasConTareas, totalPersonas, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas Asignadas por Persona

`;
    contenido += this.generarBotonActualizacion("mostrarTareasPersonas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de personas con tareas: ${totalPersonas}
`;
    contenido += `> Total de tareas asignadas: ${totalTareas}

`;
    contenido += `## Resumen de Asignaciones
`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      const nombreFormateado = this.formatearNombrePersona(persona);
      contenido += `- [[#${nombreFormateado}|${nombreFormateado}]] (${tareas.length} tareas)
`;
    });
    contenido += "\n";
    contenido += `## Tareas por Persona

`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      contenido += `### ${this.formatearNombrePersona(persona)}
[[#Resumen de Asignaciones|\u2B06\uFE0F]]
`;
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas);
      tareasOrdenadas.forEach((tarea) => {
        contenido += this.renderizarTareaPersona(tarea);
      });
      contenido += "\n";
    });
    return contenido;
  }
  renderizarTareaPersona(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.contextos) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (tarea.weight) {
      const prioridad = this.obtenerPrioridadTarea(tarea.texto);
      if (prioridad) {
        contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
      }
    }
    return contenido;
  }
  formatearNombrePersona(tag) {
    return tag.replace("#px-", "").replace(/_/g, " ").split(" ").map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(" ");
  }
  normalizarContexto(contexto) {
    return contexto.replace(/[/-]/g, " \u2192 ").trim();
  }
  async mostrarTareasContextos() {
    try {
      const { contextosConTareas, totalContextos, totalTareas } = await this.getTareasContextos();
      if (totalContextos === 0) {
        new import_obsidian60.Notice("No se encontraron tareas con contextos asignados.");
        return;
      }
      const contenido = this.generarVistaContextos(contextosConTareas, totalContextos, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Contexto.md`,
        contenido
      );
      new import_obsidian60.Notice(`Se encontraron ${totalTareas} tareas en ${totalContextos} contextos`);
    } catch (error) {
      console.error("Error en mostrarTareasContextos:", error);
      new import_obsidian60.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaContextos(contextosConTareas, totalContextos, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas por Contexto

`;
    contenido += this.generarBotonActualizacion("mostrarTareasContextos");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de contextos con tareas: ${totalContextos}
`;
    contenido += `> Total de tareas encontradas: ${totalTareas}

`;
    const arbolContextos = this.construirArbolContextos(contextosConTareas);
    contenido += `## Resumen de Contextos
`;
    this.generarResumenContextos(arbolContextos, 0).forEach((linea) => {
      contenido += linea + "\n";
    });
    contenido += "\n";
    contenido += `## Tareas por Contexto

`;
    this.generarDetalleContextos(arbolContextos, contextosConTareas).forEach((bloque) => {
      contenido += bloque;
    });
    return contenido;
  }
  construirArbolContextos(contextosConTareas) {
    const arbol = /* @__PURE__ */ new Map();
    Array.from(contextosConTareas.keys()).forEach((contexto) => {
      const niveles = contexto.split(" \u2192 ");
      let nodoActual = arbol;
      niveles.forEach((nivel, index) => {
        if (!nodoActual.has(nivel)) {
          nodoActual.set(nivel, {
            tareas: index === niveles.length - 1 ? contextosConTareas.get(contexto) : [],
            subcontextos: /* @__PURE__ */ new Map(),
            rutaCompleta: niveles.slice(0, index + 1).join(" \u2192 ")
          });
        }
        nodoActual = nodoActual.get(nivel).subcontextos;
      });
    });
    return arbol;
  }
  generarResumenContextos(arbol, nivel) {
    const lineas = [];
    arbol.forEach((nodo, contexto) => {
      const indentacion = "  ".repeat(nivel);
      const rutaContexto = nodo.rutaCompleta;
      const cantidadTareas = nodo.tareas.length;
      if (cantidadTareas > 0) {
        lineas.push(`${indentacion}- [[#${rutaContexto}|${contexto}]] (${cantidadTareas} tareas)`);
      } else {
        lineas.push(`${indentacion}- ${contexto}`);
      }
      if (nodo.subcontextos.size > 0) {
        lineas.push(...this.generarResumenContextos(nodo.subcontextos, nivel + 1));
      }
    });
    return lineas;
  }
  generarBloqueContexto(contexto, tareas) {
    let bloque = `### ${contexto}
[[#Resumen de Contextos|\u2B06\uFE0F]]
`;
    tareas.forEach((tarea) => {
      bloque += this.renderizarTareaContexto(tarea);
    });
    return bloque + "\n";
  }
  async getTareasPersonas() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS ASIGNADAS A PERSONAS ===");
    const personasConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        if (!tarea.etiquetas.personas || tarea.etiquetas.personas.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.personas.forEach((tag) => {
          const personaTag = `#px-${tag}`;
          if (!personasConTareas.has(personaTag)) {
            personasConTareas.set(personaTag, []);
          }
          personasConTareas.get(personaTag).push(tarea);
        });
        return true;
      }
    );
    personasConTareas.forEach((tareas2, persona) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      personasConTareas.set(persona, tareasOrdenadas);
    });
    return {
      personasConTareas,
      totalPersonas: personasConTareas.size,
      totalTareas: Array.from(personasConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  async getTareasContextos() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS POR CONTEXTO ===");
    const contextosConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        if (!tarea.etiquetas.contextos || tarea.etiquetas.contextos.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.contextos.forEach((contexto) => {
          const contextoNormalizado = this.normalizarContexto(contexto);
          if (!contextosConTareas.has(contextoNormalizado)) {
            contextosConTareas.set(contextoNormalizado, []);
          }
          contextosConTareas.get(contextoNormalizado).push(tarea);
        });
        return true;
      }
    );
    contextosConTareas.forEach((tareas2, contexto) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      contextosConTareas.set(contexto, tareasOrdenadas);
    });
    return {
      contextosConTareas,
      totalContextos: contextosConTareas.size,
      totalTareas: Array.from(contextosConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  generarDetalleContextos(arbol, contextosConTareas) {
    const bloques = [];
    const procesarNodo = (nodo, rutaActual = []) => {
      nodo.forEach((info, contexto) => {
        const rutaCompleta = info.rutaCompleta;
        if (info.tareas.length > 0) {
          const tareasOrdenadas = TaskWeightCalculator.sortTasks(info.tareas);
          bloques.push(this.generarBloqueContexto(rutaCompleta, tareasOrdenadas));
        }
        if (info.subcontextos.size > 0) {
          procesarNodo(info.subcontextos, [...rutaActual, contexto]);
        }
      });
    };
    procesarNodo(arbol);
    return bloques;
  }
  renderizarTareaContexto(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    if (tarea.weight) {
      const { baseWeight, timeWeight, priorityWeight } = tarea.weight;
      if (baseWeight + timeWeight + priorityWeight > 0) {
        contenido += `    \u2696\uFE0F Peso total: ${tarea.weight.totalWeight}
`;
      }
    }
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} Asignado a: ${tarea.etiquetas.personas.map(
        (p) => this.formatearNombrePersona(`#px-${p}`)
      ).join(" | ")}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: `;
      if (tarea.dependencyTitle) {
        contenido += `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]`;
        if (tarea.dependencyTexto) {
          contenido += `: "${tarea.dependencyTexto}"`;
        }
      }
      contenido += tarea.isBlocked ? " \u23F3" : " \u2705";
      contenido += "\n";
    }
    return contenido;
  }
};

// src/modules/moduloTabTitle/index.ts
var import_obsidian64 = require("obsidian");

// src/modules/moduloTabTitle/commands.ts
var import_obsidian61 = require("obsidian");
function registerCommands4(plugin, settings) {
  plugin.addCommand({
    id: "set-tab-title-alias",
    name: "Mostrar alias en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "alias";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-title",
    name: "Mostrar t\xEDtulo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "title";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-filename",
    name: "Mostrar nombre de archivo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "filename";
      plugin.saveData(settings);
    }
  });
}

// src/modules/moduloTabTitle/TabTitleManager.ts
var import_obsidian63 = require("obsidian");

// src/modules/moduloTabTitle/views/CustomMarkdownView.ts
var import_obsidian62 = require("obsidian");

// src/modules/moduloTabTitle/utils/logger.ts
var Logger = class {
  static debug(message, ...args) {
    console.debug(`${this.PREFIX} ${message}`, ...args);
  }
  static info(message, ...args) {
    console.info(`${this.PREFIX} ${message}`, ...args);
  }
  static error(message, error) {
    console.error(`${this.PREFIX} ${message}`, error || "");
  }
  static warn(message, ...args) {
    console.warn(`${this.PREFIX} ${message}`, ...args);
  }
};
Logger.PREFIX = "\u{1F3F7}\uFE0F [TabTitle]";

// src/modules/moduloTabTitle/TabTitleManager.ts
var TabTitleManager = class {
  constructor(plugin, settings) {
    this.plugin = plugin;
    this.settings = settings;
    this.customViews = /* @__PURE__ */ new Map();
    Logger.info("TabTitleManager initialized");
  }
  updateAllTabs() {
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian63.MarkdownView) {
        this.updateTab(leaf);
      }
    }
  }
  async updateTabForFile(file) {
    var _a;
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian63.MarkdownView && ((_a = leaf.view.file) == null ? void 0 : _a.path) === file.path) {
        await this.updateTab(leaf);
      }
    }
  }
  async updateTab(leaf) {
    if (!(leaf.view instanceof import_obsidian63.MarkdownView) || !leaf.view.file)
      return;
    const { displayTitle, source } = await this.getPreferredTitleWithSource(leaf.view.file);
    if (displayTitle) {
      const formattedTitle = `${leaf.view.file.basename} / ${displayTitle}`;
      leaf.view.titleEl.innerText = formattedTitle;
      if (leaf.tabHeaderInnerTitleEl) {
        leaf.tabHeaderInnerTitleEl.innerText = formattedTitle;
      }
      Logger.debug(`Updated tab title to: ${formattedTitle} (source: ${source})`);
    }
  }
  async getPreferredTitleWithSource(file) {
    try {
      const metadata = await this.waitForMetadata(file);
      if (metadata == null ? void 0 : metadata.aliases) {
        if (Array.isArray(metadata.aliases) && metadata.aliases.length > 0) {
          return {
            displayTitle: metadata.aliases[0],
            source: "aliases"
          };
        }
        if (typeof metadata.aliases === "string") {
          return {
            displayTitle: metadata.aliases,
            source: "aliases"
          };
        }
      }
      if (metadata == null ? void 0 : metadata.titulo) {
        return {
          displayTitle: metadata.titulo,
          source: "titulo"
        };
      }
      return {
        displayTitle: null,
        source: "basename"
      };
    } catch (error) {
      Logger.error(`Error getting title for ${file.path}:`, error);
      return {
        displayTitle: null,
        source: "error"
      };
    }
  }
  async waitForMetadata(file) {
    return new Promise((resolve) => {
      const maxAttempts = 10;
      let attempts = 0;
      const checkMetadata = () => {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        if ((cache == null ? void 0 : cache.frontmatter) || attempts >= maxAttempts) {
          resolve((cache == null ? void 0 : cache.frontmatter) || {});
        } else {
          attempts++;
          setTimeout(checkMetadata, 100);
        }
      };
      checkMetadata();
    });
  }
  restoreDefaultTitles() {
    Logger.info("Restoring default titles");
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian63.MarkdownView && leaf.view.file) {
        leaf.view.titleEl.innerText = leaf.view.file.basename;
        if (leaf.tabHeaderInnerTitleEl) {
          leaf.tabHeaderInnerTitleEl.innerText = leaf.view.file.basename;
        }
      }
    }
  }
};

// src/modules/moduloTabTitle/defaults/defaultSettings.ts
var DEFAULT_TAB_SETTINGS = {
  titleDisplayMode: "filename"
};

// src/modules/moduloTabTitle/index.ts
var ModuloTabTitle = class {
  constructor(plugin) {
    this.tabManager = null;
    this.plugin = plugin;
    this.settings = DEFAULT_TAB_SETTINGS;
  }
  async activate() {
    try {
      await this.loadSettings();
      if (!this.settings.titleDisplayMode) {
        this.settings.titleDisplayMode = "alias";
        await this.saveSettings();
      }
      this.tabManager = new TabTitleManager(this.plugin, this.settings);
      registerCommands4(this.plugin, this.settings);
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          var _a;
          try {
            (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
          } catch (error) {
            Logger.error("Error updating tabs on layout change:", error);
          }
        })
      );
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("file-open", (file) => {
          try {
            if (file && this.tabManager) {
              this.tabManager.updateTabForFile(file);
            }
          } catch (error) {
            Logger.error("Error updating tab on file open:", error);
          }
        })
      );
      setTimeout(() => {
        var _a;
        (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
      }, 1e3);
    } catch (error) {
      Logger.error("Error activating TabTitle module:", error);
    }
  }
  deactivate() {
    try {
      if (this.tabManager) {
        this.tabManager.restoreDefaultTitles();
        this.tabManager = null;
      }
    } catch (error) {
      Logger.error("Error deactivating TabTitle module:", error);
    }
  }
  async loadSettings() {
    try {
      const loadedData = await this.plugin.loadData();
      this.settings = Object.assign({}, DEFAULT_TAB_SETTINGS, loadedData);
    } catch (error) {
      Logger.error("Error loading TabTitle settings:", error);
      this.settings = DEFAULT_TAB_SETTINGS;
    }
  }
  async saveSettings() {
    try {
      await this.plugin.saveData(this.settings);
    } catch (error) {
      Logger.error("Error saving TabTitle settings:", error);
    }
  }
};

// src/modules/taskManager/index.ts
var import_obsidian66 = require("obsidian");

// src/modules/taskManager/commands.ts
var import_obsidian65 = require("obsidian");
var TaskDaysModal = class extends import_obsidian65.Modal {
  constructor(pluginInstance) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.dias = 7;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas pr\xF3ximas" });
    new import_obsidian65.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue("7").onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian65.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FutureTasksModal = class extends import_obsidian65.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas futuras" });
    new import_obsidian65.Setting(contentEl).setName("N\xFAmero de d\xEDas hacia adelante").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian65.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasFuturas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ScheduledTaskDaysModal = class extends import_obsidian65.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas programadas pr\xF3ximas" });
    new import_obsidian65.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian65.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasScheduledProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function registerTaskManagerCommands(plugin) {
  const managementPlugin = plugin;
  const commandIds = [];
  const tareasVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-vencidas",
    name: "Mostrar Tareas Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasVencidas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasVencidasCommand.id);
  const tareasProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas",
    name: "Mostrar Tareas Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasProximas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCommand.id);
  const tareasProximasCustomCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas-custom",
    name: "Mostrar Tareas Pr\xF3ximas (Especificar d\xEDas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new TaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCustomCommand.id);
  const tareasHoyCommand = plugin.addCommand({
    id: "mostrar-tareas-hoy",
    name: "Mostrar Tareas para Hoy",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasHoy();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasHoyCommand.id);
  const tareasStartVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-vencidas",
    name: "Mostrar Tareas Pendientes de Iniciar",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartVencidas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartVencidasCommand.id);
  const tareasStartProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-proximas",
    name: "Mostrar Tareas por Iniciar (Vencidas y Pr\xF3ximas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartProximas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartProximasCommand.id);
  const tareasFuturasCommand = plugin.addCommand({
    id: "mostrar-tareas-futuras",
    name: "Mostrar Tareas Futuras Programadas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new FutureTasksModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasFuturasCommand.id);
  const tareasEnEjecucionCommand = plugin.addCommand({
    id: "mostrar-tareas-en-ejecucion",
    name: "Mostrar Tareas en Ejecuci\xF3n",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasEnEjecucion();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasEnEjecucionCommand.id);
  const tareasScheduledVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-vencidas",
    name: "Mostrar Tareas Scheduled Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasScheduledVencidas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledVencidasCommand.id);
  const tareasScheduledProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-proximas",
    name: "Mostrar Tareas Scheduled Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new ScheduledTaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledProximasCommand.id);
  const todasTareasVencidasCommand = plugin.addCommand({
    id: "mostrar-todas-tareas-vencidas",
    name: "Mostrar Todas las Tareas Vencidas (Due, Scheduled, Start)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTodasTareasVencidas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(todasTareasVencidasCommand.id);
  const tareasDependientesCommand = plugin.addCommand({
    id: "mostrar-tareas-dependientes",
    name: "Mostrar Tareas con Dependencias",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasDependientes();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasDependientesCommand.id);
  const tareasPersonasCommand = plugin.addCommand({
    id: "mostrar-tareas-personas",
    name: "Mostrar Tareas por Persona",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasPersonas();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasPersonasCommand.id);
  const tareasContextosCommand = plugin.addCommand({
    id: "mostrar-tareas-contextos",
    name: "Mostrar Tareas por Contexto",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasContextos();
      } else {
        new import_obsidian65.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasContextosCommand.id);
  plugin.registeredTaskManagerCommandIds = commandIds;
}
function deactivateTaskManagerCommands(plugin) {
  const commandIds = plugin.registeredTaskManagerCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian65.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredTaskManagerCommandIds = [];
}

// src/modules/taskManager/index.ts
var ModuloTaskManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    registerTaskManagerCommands(this.plugin);
  }
  deactivate() {
    deactivateTaskManagerCommands(this.plugin);
  }
};

// src/modules/dataviewQueries/index.ts
var import_obsidian69 = require("obsidian");

// src/modules/dataviewQueries/DataviewQueryManager.ts
var import_obsidian67 = require("obsidian");
var DataviewQueryManager = class extends import_obsidian67.Component {
  constructor(plugin) {
    super();
    // Cache para almacenar resultados de consultas frecuentes
    this.queryCache = /* @__PURE__ */ new Map();
    this.plugin = plugin;
  }
  // Método para ejecutar consultas con caché
  async executeQuery(queryKey, queryFn, ttl = 6e4) {
    const cached = this.queryCache.get(queryKey);
    const now2 = Date.now();
    if (cached && now2 - cached.timestamp < cached.ttl) {
      return cached.data;
    }
    const result = await queryFn();
    this.queryCache.set(queryKey, {
      data: result,
      timestamp: now2,
      ttl
    });
    return result;
  }
  // Método para limpiar caché
  clearCache(queryKey) {
    if (queryKey) {
      this.queryCache.delete(queryKey);
    } else {
      this.queryCache.clear();
    }
  }
};

// src/modules/dataviewQueries/commands.ts
var import_obsidian68 = require("obsidian");
function registerCommands5(plugin) {
  const clearCacheCommand = plugin.addCommand({
    id: "clear-dataview-queries-cache",
    name: "Limpiar cach\xE9 de consultas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.queryManager.clearCache();
          new import_obsidian68.Notice("Cach\xE9 de consultas limpiado");
        }
      } catch (error) {
        console.error("Error al limpiar cach\xE9:", error);
        new import_obsidian68.Notice("Error al limpiar cach\xE9 de consultas");
      }
    }
  });
  const reloadQueriesCommand = plugin.addCommand({
    id: "reload-dataview-queries",
    name: "Recargar consultas activas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.clearCache();
          app.workspace.trigger("dataview:refresh-views");
          new import_obsidian68.Notice("Consultas recargadas");
        }
      } catch (error) {
        console.error("Error al recargar consultas:", error);
        new import_obsidian68.Notice("Error al recargar consultas");
      }
    }
  });
  plugin.registeredDataviewQueryCommandIds = [
    clearCacheCommand.id,
    reloadQueriesCommand.id
  ];
}
function deactivateCommands4(plugin) {
  const commandIds = plugin.registeredDataviewQueryCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian68.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredDataviewQueryCommandIds = [];
}

// src/modules/dataviewQueries/QueryRenderer.ts
var QueryRenderer = class {
  async renderTaskButtons(container, options = {}) {
    const buttonContainer = container.createEl("div", {
      cls: "task-buttons-container",
      attr: { style: "display: grid; grid-gap: 8px; padding: 16px; background: var(--background-secondary); border-radius: 8px;" }
    });
    if (options.showTitle !== false) {
      buttonContainer.createEl("h4", {
        text: "\u{1F4CB} Gesti\xF3n de Tareas",
        attr: { style: "margin: 0 0 12px 0;" }
      });
    }
    const buttons = [
      {
        id: "today",
        text: "Tareas de Hoy",
        icon: "\u{1F4C5}",
        color: "#4CAF50",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasHoy()
      },
      {
        id: "overdue",
        text: "Tareas Vencidas",
        icon: "\u26A0\uFE0F",
        color: "#f44336",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasVencidas()
      },
      {
        id: "upcoming",
        text: "Tareas Pr\xF3ximas",
        icon: "\u{1F3AF}",
        color: "#2196F3",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasProximas()
      },
      {
        id: "start",
        text: "Todas las Vencidas",
        icon: "\u{1F313}",
        color: "#FF9800",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTodasTareasVencidas()
      }
    ];
    const buttonGrid = buttonContainer.createEl("div", {
      attr: { style: "display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;" }
    });
    buttons.forEach((btn) => {
      const button = buttonGrid.createEl("button", {
        attr: {
          style: `
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        padding: 8px 16px;
                        background-color: ${btn.color};
                        color: white;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    `
        }
      });
      button.createEl("span", { text: btn.icon });
      button.createEl("span", { text: btn.text });
      button.addEventListener("mouseenter", () => {
        button.style.filter = "brightness(1.1)";
        button.style.transform = "translateY(-1px)";
      });
      button.addEventListener("mouseleave", () => {
        button.style.filter = "brightness(1)";
        button.style.transform = "translateY(0)";
      });
      button.addEventListener("click", async () => {
        try {
          button.style.opacity = "0.7";
          new Notice("Actualizando vista...");
          await btn.action();
        } catch (error) {
          console.error(`Error en acci\xF3n ${btn.id}:`, error);
          new Notice(`Error: ${error.message}`);
        } finally {
          button.style.opacity = "1";
        }
      });
    });
    if (options.showTimestamp) {
      buttonContainer.createEl("div", {
        text: `\xDAltima actualizaci\xF3n: ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}`,
        attr: {
          style: "margin-top: 8px; text-align: right; font-size: 0.8em; color: var(--text-muted);"
        }
      });
    }
  }
  async renderProjectHierarchy(container, options = {}) {
  }
};

// src/modules/dataviewQueries/index.ts
var ModuloDataviewQueries = class {
  constructor(plugin) {
    this._isActive = false;
    console.log("ModuloDataviewQueries: Inicializando...");
    this.plugin = plugin;
    this.queryManager = new DataviewQueryManager(plugin);
    this.queryRenderer = new QueryRenderer();
  }
  activate() {
    console.log("ModuloDataviewQueries: Iniciando activaci\xF3n...");
    if (this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 activo");
      return;
    }
    try {
      registerCommands5(this.plugin);
      this.registerDataviewExtensions();
      this._isActive = true;
      console.log("ModuloDataviewQueries: Activaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en activaci\xF3n:", error);
      this._isActive = false;
      throw error;
    }
  }
  deactivate() {
    console.log("ModuloDataviewQueries: Iniciando desactivaci\xF3n...");
    if (!this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 inactivo");
      return;
    }
    try {
      deactivateCommands4(this.plugin);
      this.unregisterDataviewExtensions();
      this._isActive = false;
      console.log("ModuloDataviewQueries: Desactivaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en desactivaci\xF3n:", error);
      throw error;
    }
  }
  isActive() {
    return this._isActive;
  }
  async renderQuery(queryType, params) {
    if (!this._isActive) {
      throw new Error("El m\xF3dulo no est\xE1 activo");
    }
    switch (queryType) {
      case "taskButtons":
        await this.queryRenderer.renderTaskButtons(params.container, params.options);
        break;
      default:
        throw new Error(`Tipo de consulta no soportado: ${queryType}`);
    }
  }
  registerDataviewExtensions() {
    const boundFunctions = {
      renderTaskButtons: (dv, container, options) => {
        return this.queryRenderer.renderTaskButtons(container, options);
      },
      renderProjectHierarchy: (dv, container, options) => {
        return this.queryRenderer.renderProjectHierarchy(container, options);
      }
    };
    window.customQueries = boundFunctions;
    console.log("ModuloDataviewQueries: Extensions registradas");
  }
  unregisterDataviewExtensions() {
    delete window.customQueries;
    console.log("ModuloDataviewQueries: Extensions eliminadas");
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian70.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.moduloGTD = null;
    //moduloTerceros: ModuloTerceros | null = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.registeredCommandIdsGTD = [];
    this.registeredCommandIds_Terceros = [];
    this.ribbonButtonRT = null;
    this.moduloTabTitle = null;
    this.moduloTaskManager = null;
    this.moduloDataviewQueries = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    var _a, _b, _c;
    await this.loadSettings();
    this.tp = this.getTp();
    this.registerView(
      "vista-registro-activo",
      (leaf) => new VistaRegistroActivo(leaf, this)
    );
    this.registerView(
      "vista-resumen-semanal",
      (leaf) => new VistaResumenSemanal(leaf, this)
    );
    this.registerView(
      "vista-registro-diario",
      (leaf) => new VistaRegistroDiario(leaf, this)
    );
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.addOnsAPI = new addOnsAPI(this);
    this.YAMLUpdaterAPI = new YAMLUpdaterAPI2(this);
    this.updateSesionLectura = new updateSesionLectura(this);
    this.menuHoyAPI = new menuHoyAPI(this);
    this.menuSemanalAPI = new menuSemanalAPI(this);
    this.subsistemasAPI = new subsistemasAPI(this);
    this.librosAPI = new librosAPI(this);
    this.newInbox = ingresarBandejaEntrada.bind(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.moduloGTD = new ModuloGTD(this);
    this.tareasAPI = new TareasAPI(this);
    this.moduloTabTitle = new ModuloTabTitle(this);
    this.moduloTaskManager = new ModuloTaskManager(this);
    this.moduloDataviewQueries = new ModuloDataviewQueries(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
    this.registerGPThora();
    if (this.settings.moduloTabTitle) {
      (_a = this.moduloTabTitle) == null ? void 0 : _a.activate();
    } else {
      (_b = this.moduloTabTitle) == null ? void 0 : _b.deactivate();
    }
    if (this.settings.moduloTaskManager) {
      this.moduloTaskManager.activate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("ManagementPlugin: Aplicando configuraci\xF3n DataviewQueries...");
      try {
        if (!this.moduloDataviewQueries.isActive()) {
          this.moduloDataviewQueries.activate();
        }
      } catch (error) {
        console.error("Error en applyConfiguration:", error);
      }
    } else {
      (_c = this.moduloDataviewQueries) == null ? void 0 : _c.deactivate();
    }
  }
  registerGPThora() {
    const gptHora = new GPThora(this.app);
    gptHora.onload();
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
    if (this.settings.moduloGTD) {
      (_g = this.moduloGTD) == null ? void 0 : _g.activate(this);
    } else {
      (_h = this.moduloGTD) == null ? void 0 : _h.deactivate(this);
    }
    if (this.settings.moduloTaskManager) {
      (_i = this.moduloTaskManager) == null ? void 0 : _i.activate();
    } else {
      (_j = this.moduloTaskManager) == null ? void 0 : _j.deactivate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("Aplicando configuraci\xF3n: Activando DataviewQueries");
      (_k = this.moduloDataviewQueries) == null ? void 0 : _k.activate();
    } else {
      console.log("Aplicando configuraci\xF3n: Desactivando DataviewQueries");
      (_l = this.moduloDataviewQueries) == null ? void 0 : _l.deactivate();
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    if (this.moduloDataviewQueries) {
      this.moduloDataviewQueries.deactivate();
    }
    delete this.app.gpManagement;
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
  getTp() {
    debugger;
    if (!this.app || !this.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error(
        "No se pudo acceder al objeto de funciones actuales de Templater."
      );
      return;
    }
    console.log("Instancia de tp cargada satisfactoriamente en Plugin");
    return tp;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25Nb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL2Z1enp5U2VsZWN0T3JDcmVhdGUudHMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9lcnJvcnMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2Zvcm1hdHMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvem9uZXMvc3lzdGVtWm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL0lBTkFab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9sb2NhbGUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9maXhlZE9mZnNldFpvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9pbnZhbGlkWm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvem9uZVV0aWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9zZXR0aW5ncy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvaW52YWxpZC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvY29udmVyc2lvbnMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL3V0aWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2VuZ2xpc2guanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2Zvcm1hdHRlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvcmVnZXhQYXJzZXIuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9kdXJhdGlvbi5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ludGVydmFsLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW5mby5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZGlmZi5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZGlnaXRzLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC90b2tlblBhcnNlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2RhdGV0aW1lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvbHV4b24uanMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL21lbnVPdHJvLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91dGlsc0FQSS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9JbnRlcmZhY2VzL1JlZ2lzdHJvVGllbXBvLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXMvU2VzaW9uTGVjdHVyYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvU2VzaW9uTGVjdHVyYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvUlRCYXNlLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSS50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3NUYWIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL3V0aWxzL2NyZWFyQ2FycGV0YS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL3V0aWxzL2NyZWFyUGxhbnRpbGxhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvZmlsZUxpbmtNb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL2NvbW1hbmRzLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZS50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvYWN0aXZhZG9yZXMudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3VpL3JpYmJvbkJ1dHRvbi50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvdWkvbW9kYWwudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQWxpYXNTdGF0dXNCYXIvc3RhdHVzQmFyLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3JpYmJvbk1lbnUudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdXRpbHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL21vZGFsX0Fob3JhLnRzIiwgInNyYy9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvRmllbGRIYW5kbGVyVXRpbHMudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXJzLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQ1BFRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvUlJGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL1BHVERGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL1BRRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9UcmFuc2FjY2lvbmVzRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9BcmVhc0ludGVyZXNGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFWaWRhRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9ub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9PYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9Db21wYXNzUGxhbmVhY2lvbkFudWFsX0ZILnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvUmVwb3NpdG9yaW9MaWJyb3NfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9CaWJsaW90ZWNhX0ZILnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggSm91cm5hbHMvQW51YWxfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9UcmltZXN0cmFsRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9hZGRPbnNBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL21vZGFscy9jYW1iaW9IRi50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudURpYXJpb0FQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudVNlbWFuYWxBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZXN1bWVuU2VtYW5hbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby92aWV3cy92aXN0YVJUQWN0aXZvLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0dURC9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9HVEQvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvR1REL2luYm94LnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvaW5ib3hNb2RhbC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3Vic2lzdGVtYXNBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZWdpc3Ryb0RpYXJpby50cyIsICJzcmMvbW9kdWxlcy9HUFRob3JhL0dQVGhvcmEudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvTGlicm9zL2xpYnJvc0FQSS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXBkYXRlU2VzaW9uTGVjdHVyYS50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9hcGkvdGFyZWFzQVBJLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL3V0aWxzL3Rhc2tVdGlscy50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci91dGlscy90YXNrV2VpZ2h0Q2FsY3VsYXRvci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9UYWJUaXRsZU1hbmFnZXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvdmlld3MvQ3VzdG9tTWFya2Rvd25WaWV3LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3V0aWxzL2xvZ2dlci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHMiLCAic3JjL21vZHVsZXMvdGFza01hbmFnZXIvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvdGFza01hbmFnZXIvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcy9EYXRhdmlld1F1ZXJ5TWFuYWdlci50cyIsICJzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL1F1ZXJ5UmVuZGVyZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIEltcG9ydGFjaVx1MDBGM24gZGUgY2xhc2VzIG5lY2VzYXJpYXMgZGVzZGUgbGEgbGlicmVyXHUwMEVEYSBkZSBPYnNpZGlhbi5cbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gRGVmaW5pY2lcdTAwRjNuIGRlIGxhIGNsYXNlIFNlbGVjY2lvbk1vZGFsIHF1ZSBleHRpZW5kZSBkZSBGdXp6eVN1Z2dlc3RNb2RhbCBwYXJhIG1hbmVqYXIgc2VsZWNjaW9uZXMgZGUgc3RyaW5ncy5cbmV4cG9ydCBjbGFzcyBTZWxlY2Npb25Nb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuICAgIHRpdGxlczogc3RyaW5nW107IC8vIEFycmF5IGRlIHRcdTAwRUR0dWxvcyBwYXJhIGxhcyBvcGNpb25lcyBkZWwgbW9kYWwuXG4gICAgdmFsdWVzOiBzdHJpbmdbXTsgLy8gQXJyYXkgZGUgdmFsb3JlcyBhc29jaWFkb3MgYSBjYWRhIHRcdTAwRUR0dWxvLlxuICAgIHZhbHVlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+OyAvLyBPYmpldG8gcGFyYSBtYXBlYXIgdFx1MDBFRHR1bG9zIGEgdmFsb3Jlcy5cbiAgICBwcml2YXRlIHNlbGVjY2lvbkhlY2hhOiBib29sZWFuID0gZmFsc2U7IC8vIEZsYWcgcGFyYSBkZXRlcm1pbmFyIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbi5cblxuICAgIC8vIENvbnN0cnVjdG9yIGRlIGxhIGNsYXNlLlxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZXM6IHN0cmluZ1tdLCB2YWx1ZXM6IHN0cmluZ1tdLCBwbGFjZWhvbGRlcjogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7IC8vIExsYW1hZGEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgYmFzZSBjb24gbGEgaW5zdGFuY2lhIGRlIEFwcCBkZSBPYnNpZGlhbi5cbiAgICAgICAgdGhpcy50aXRsZXMgPSB0aXRsZXM7IC8vIEluaWNpYWxpemFjaVx1MDBGM24gZGVsIGFycmF5IGRlIHRcdTAwRUR0dWxvcy5cbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7IC8vIEluaWNpYWxpemFjaVx1MDBGM24gZGVsIGFycmF5IGRlIHZhbG9yZXMuXG4gICAgICAgIC8vIENyZWFjaVx1MDBGM24gZGVsIG1hcGVvIGRlIHRcdTAwRUR0dWxvcyBhIHZhbG9yZXMuXG4gICAgICAgIHRoaXMudmFsdWVNYXAgPSB0aXRsZXMucmVkdWNlKChhY2MsIHRpdGxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgYWNjW3RpdGxlXSA9IHZhbHVlc1tpbmRleF07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpOyAvLyBFc3RhYmxlY2ltaWVudG8gZGVsIHRleHRvIGRlIHBsYWNlaG9sZGVyIHBhcmEgZWwgY2FtcG8gZGUgYlx1MDBGQXNxdWVkYSBlbiBlbCBtb2RhbC5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgbG9zIFx1MDBFRHRlbXMgKHRcdTAwRUR0dWxvcykgcXVlIHNlIG1vc3RyYXJcdTAwRTFuIGVuIGVsIG1vZGFsLlxuICAgIGdldEl0ZW1zKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGVzO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciBlbCB0ZXh0byBxdWUgc2UgbW9zdHJhclx1MDBFMSBwYXJhIGNhZGEgXHUwMEVEdGVtIGVuIGVsIG1vZGFsLlxuICAgIGdldEl0ZW1UZXh0KGl0ZW06IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHF1ZSBzZSBsbGFtYSBhbCBjZXJyYXIgZWwgbW9kYWwuXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gU2kgZWwgbW9kYWwgc2UgY2llcnJhIHNpbiBxdWUgc2UgaGF5YSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24sIHNlIHJlY2hhemEgbGEgcHJvbWVzYS5cbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjY2lvbkhlY2hhKSB7XG4gICAgICAgICAgICB0aGlzLnJlamVjdChuZXcgRXJyb3IoJ01vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuJykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuIGRlIHVuIFx1MDBFRHRlbS5cbiAgICBzZWxlY3RTdWdnZXN0aW9uKGl0ZW06IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlbGVjY2lvbkhlY2hhID0gdHJ1ZTsgLy8gTWFyY2FyIHF1ZSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24uXG4gICAgICAgIHN1cGVyLnNlbGVjdFN1Z2dlc3Rpb24oaXRlbSwgZXZ0KTsgLy8gTGxhbWFyIGFsIG1cdTAwRTl0b2RvIGNvcnJlc3BvbmRpZW50ZSBkZSBsYSBjbGFzZSBiYXNlIHBhcmEgbWFuZWphciBsYSBzZWxlY2NpXHUwMEYzbi5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBxdWUgc2UgbGxhbWEgYWwgZWxlZ2lyIHVuIFx1MDBFRHRlbSwgZG9uZGUgc2UgcmVzdWVsdmUgbGEgcHJvbWVzYSBjb24gZWwgdmFsb3IgYXNvY2lhZG8gYWwgXHUwMEVEdGVtIHNlbGVjY2lvbmFkby5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZU1hcFtpdGVtXTsgLy8gT2J0ZW5lciBlbCB2YWxvciBhc29jaWFkbyBhbCBcdTAwRUR0ZW0gc2VsZWNjaW9uYWRvLlxuICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpOyAvLyBSZXNvbHZlciBsYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBzZWxlY2Npb25hZG8uXG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhYnJpciBlbCBtb2RhbCB5IGVzcGVyYXIgYSBxdWUgZWwgdXN1YXJpbyBoYWdhIHVuYSBzZWxlY2NpXHUwMEYzbiwgZGV2b2x2aWVuZG8gdW5hIHByb21lc2EgY29uIGVsIHZhbG9yIHNlbGVjY2lvbmFkby5cbiAgICBvcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTsgLy8gR3VhcmRhciBsYSBmdW5jaVx1MDBGM24gcmVzb2x2ZSBkZSBsYSBwcm9tZXNhIHBhcmEgdXNhcmxhIGFsIHNlbGVjY2lvbmFyIHVuIFx1MDBFRHRlbS5cbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0OyAvLyBHdWFyZGFyIGxhIGZ1bmNpXHUwMEYzbiByZWplY3QgZGUgbGEgcHJvbWVzYSBwYXJhIHVzYXJsYSBzaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuLlxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7IC8vIEFicmlyIGVsIG1vZGFsLlxuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuL3NlbGVjY2lvbk1vZGFsXCI7XG5cbmV4cG9ydCBjbGFzcyBmdXp6eVNlbGVjdE9yQ3JlYXRlIHtcbiAgYXBwOiBBcHA7XG4gIHBsdWdpbjogUGx1Z2luO1xuICBwYXRoQ2FtcG9zOiBzdHJpbmcgPSBcIkVzdHJ1Y3R1cmEvQ2FtcG9zIFNpc3RlbWEgR2VzdGlvbi9DYW1wb3MgUmVnaXN0cm8gVGllbXBvLm1kXCI7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBjcmVhdGVNb2RhbCgpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJmdXp6eVNlYXJjaE1vZGFsXCIpO1xuICAgIG1vZGFsLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuICAgIG1vZGFsLnN0eWxlLnRvcCA9IFwiNTAlXCI7XG4gICAgbW9kYWwuc3R5bGUubGVmdCA9IFwiNTAlXCI7XG4gICAgbW9kYWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoLTUwJSwgLTUwJSlcIjtcbiAgICBtb2RhbC5zdHlsZS56SW5kZXggPSBcIjEwMDBcIjtcbiAgICBtb2RhbC5zdHlsZS5wYWRkaW5nID0gXCIyMHB4XCI7XG4gICAgbW9kYWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIG1vZGFsLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkICNjY2NcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiO1xuICAgIG1vZGFsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCA0cHggNnB4IHJnYmEoMCwwLDAsLjEpXCI7XG4gICAgbW9kYWwuc3R5bGUud2lkdGggPSBcIjMwMHB4XCI7XG4gIFxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjbG9zZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiXHUwMEQ3XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUudG9wID0gXCI1cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5yaWdodCA9IFwiNXB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gXCIxNnB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSBcIjBweCA0cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjEwcHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5vdXRsaW5lID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm94U2hhZG93ID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLnJlbW92ZSgpO1xuICBcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG4gICAgcmV0dXJuIG1vZGFsO1xuICB9XG5cbiAgZmlsdGVySXRlbXMocXVlcnk6IHN0cmluZywgaXRlbXM6IGFueVtdKSB7XG4gICAgcmV0dXJuIGl0ZW1zLmZpbHRlcigoaXRlbTogeyB2YWx1ZTogc3RyaW5nOyB9KSA9PlxuICAgICAgaXRlbS52YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHModGlwbzogc3RyaW5nIHwgbnVtYmVyLCBzZWxlY3RlZFZhbHVlOiBhbnksIHNlbGVjdGVkR3JvdXA6IGFueSkge1xuICAgIHRyeSB7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyOiB7IFt4OiBzdHJpbmddOiBhbnlbXTsgfSkgPT4ge1xuICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBsZXQgY3VycmVudEFjdHMgPSBmcm9udG1hdHRlclt0aXBvXSB8fCBbXTtcbiAgICAgICAgICAgIGxldCBuZXdWYWx1ZUZvckFjdHMgPSBbLi4uY3VycmVudEFjdHMsIFtzZWxlY3RlZEdyb3VwLCBzZWxlY3RlZFZhbHVlXV07XG4gICAgICAgICAgICBmcm9udG1hdHRlclt0aXBvXSA9IG5ld1ZhbHVlRm9yQWN0cztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gIGFzeW5jIHNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zOiBhbnksIGdyb3VwczogYW55W10sIHRpcG86IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RlZFZhbHVlID0gXCJcIjsgLy8gVmFyaWFibGUgcGFyYSBndWFyZGFyIGxhIG9wY2lcdTAwRjNuIHNlbGVjY2lvbmFkYSBvIGluZ3Jlc2FkYSBwb3IgZWwgdXN1YXJpb1xuICAgICAgICBsZXQgc2VsZWN0ZWRHcm91cCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5jcmVhdGVNb2RhbCgpO1xuICAgICAgXG5cbiAgICAgICAgLy8gQ3JlYXIgeSBjb25maWd1cmFyIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBcIkJ1c2NhIG8gY3JlYSB0dSBhY3RpdmlkYWRcIjtcbiAgICAgICAgdGl0bGUuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgLy8gQ2VudHJhciBlbCB0XHUwMEVEdHVsbywgYWp1c3RhIGxvcyBlc3RpbG9zIHNlZ1x1MDBGQW4gc2VhIG5lY2VzYXJpb1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBcIkVzY3JpYmUgdHUgYWN0aXZpZGFkLi4uXCI7XG4gICAgICAgIC8vIEVzdGFibGVjZSBlbCBhbmNobyBkZWwgaW5wdXQgYSB1biBwb3JjZW50YWplIGRlbCBjb250ZW5lZG9yIHBhcmEgaGFjZXJsbyBtXHUwMEUxcyBhbmNoby5cbiAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSBcIjgwJVwiO1xuICAgICAgICAvLyBDZW50cmFyIGVsIHRleHRvIGRlbnRybyBkZWwgaW5wdXRcbiAgICAgICAgaW5wdXQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgLy8gQ2VudHJhciBlbCBpbnB1dCBkZW50cm8gZGVsIG1vZGFsIChzaSBlbCBtb2RhbCB0aWVuZSB1biBkaXNwbGF5IGZsZXgpXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgbW9kYWwuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG4gICAgICAgIG1vZGFsLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cblxuICAgICAgICAvLyBDcmVhciB5IGFncmVnYXIgdW4gZXNwYWNpbyBlbnRyZSBlbCBpbnB1dCB5IHJlc3VsdHNEaXZcbiAgICAgICAgY29uc3Qgc3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc3BhY2VyLnN0eWxlLmhlaWdodCA9IFwiMTZweFwiOyAvLyBBanVzdGEgZXN0YSBhbHR1cmEgc2VnXHUwMEZBbiBuZWNlc2l0ZXMgcGFyYSBlbCBlc3BhY2lvXG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHNwYWNlcik7XG4gICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0c0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHJlc3VsdHNEaXYpO1xuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlc3VsdHNEaXNwbGF5KGZpbHRlcmVkUmVzdWx0czogYW55W10sIG1lbnVPdHJvOiB0aGlzKSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIHJlc3VsdGFkb3MgcHJldmlvc1xuICAgICAgICAgIGZpbHRlcmVkUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQ6IHsgdmFsdWU6IHN0cmluZyB8IG51bGw7IGFjdGl2aXR5OiBzdHJpbmc7IGdyb3VwOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBkaXYub25tb3VzZW92ZXIgPSAoKSA9PiAoZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YwZjBmMFwiKTtcbiAgICAgICAgICAgIGRpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSByZXN1bHQuYWN0aXZpdHk7IC8vIEd1YXJkYXIgZWwgdmFsb3Igc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXAgPSByZXN1bHQuZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgc2VsZWNjaVx1MDBGM24gYWwgdXN1YXJpb1xuICAgICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZShbc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgIC8vIFNpIG5vIGhheSByZXN1bHRhZG9zIHkgZWwgdXN1YXJpbyBoYSBpbmdyZXNhZG8gdW4gdGV4dG8sIG9mcmVjZXIgbGEgY3JlYWNpXHUwMEYzbiBkZSB1bmEgbnVldmEgYWN0aXZpZGFkXG4gICAgICAgICAgaWYgKGZpbHRlcmVkUmVzdWx0cy5sZW5ndGggPT09IDAgJiYgaW5wdXQudmFsdWUudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVOZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2LnRleHRDb250ZW50ID0gYENyZWFyIG51ZXZhIGFjdGl2aWRhZDogXCIke2lucHV0LnZhbHVlfVwiYDtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jb2xvciA9IFwiYmx1ZVwiO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSBpbnB1dC52YWx1ZTsgLy8gR3VhcmRhciBsYSBudWV2YSBhY3RpdmlkYWRcbiAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgaWYgKHRpcG89PSB1bmRlZmluZWQpeyB0aXBvID0gXCJhY3RzVGVtYXNcIn1cbiAgICAgICAgICAgICAgc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybywgdGlwbyk7IC8vIFByb2NlZGVyIGEgc2VsZWNjaW9uYXIgdW4gZ3J1cG9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5ld0Rpdik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybzogeyBlc1JlY3VycmVudGU6IChhcmcwOiBzdHJpbmcpID0+IGFueTsgdXBkYXRlWUFNTEZpZWxkczogKGFyZzA6IGFueSwgYXJnMTogc3RyaW5nLCBhcmcyOiBzdHJpbmcpID0+IGFueTsgfSwgdGlwbzogYW55KSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgIGlucHV0LnJlbW92ZSgpO1xuICAgICAgICAgIHNwYWNlci5yZW1vdmUoKTtcbiAgICAgICAgICB0aXRsZS5yZW1vdmUoKTtcblxuICAgICAgICAgIGNvbnN0IHRleHRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgdGV4dG8udGV4dENvbnRlbnQgPSBgVmFtb3MgYSBjcmVhciBsYSBhY3RpdmlkYWQ6IFwiJHtzZWxlY3RlZFZhbHVlfVwiLiBTZWxlY2Npb25hIHVuIGdydXBvOmA7O1xuICAgICAgICAgIHRleHRvLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7IC8vIENlbnRyYXIgZWwgdFx1MDBFRHR1bG8sIGFqdXN0YSBsb3MgZXN0aWxvcyBzZWdcdTAwRkFuIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKHRleHRvKTsgXG4gICAgICBcbiAgICAgICAgICBncm91cHMuZm9yRWFjaCgoZ3JvdXA6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2LnRleHRDb250ZW50ID0gZ3JvdXA7XG4gICAgICAgICAgICBncm91cERpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9ubW91c2VvdmVyID0gKCkgPT4gKGdyb3VwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YwZjBmMFwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9ubW91c2VvdXQgPSAoKSA9PiAoZ3JvdXBEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXAgPSBncm91cDsgLy8gR3VhcmRhciBlbCBncnVwbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgLy9kaXNwbGF5U2VsZWN0ZWRWYWx1ZShzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTsgLy8gTW9zdHJhciBsYSBhY3RpdmlkYWQgeSBlbCBncnVwbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGxldCByZWN1cnJlbnRlID0gYXdhaXQgbWVudU90cm8uZXNSZWN1cnJlbnRlKHNlbGVjdGVkVmFsdWUpXG4gICAgICAgICAgICAgIGlmIChyZWN1cnJlbnRlKXtcbiAgICAgICAgICAgICAgICBhd2FpdCBtZW51T3Ryby51cGRhdGVZQU1MRmllbGRzKHRpcG8sIHNlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlc29sdmUoW3NlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGdyb3VwRGl2KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlTZWxlY3RlZFZhbHVlKGFjdGl2aXR5OiBhbnksIGdyb3VwOiBhbnkpIHtcbiAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IGBTZWxlY2Npb25hZG86ICR7YWN0aXZpdHl9IC8gJHtncm91cH1gO1xuICAgICAgICAgIC8vIEFxdVx1MDBFRCBwdWVkZXMgY2VycmFyIGVsIG1vZGFsIG8gcGVybWl0aXIgYWwgdXN1YXJpbyBoYWNlciBtXHUwMEUxcyBhY2Npb25lc1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtcyhpbnB1dC52YWx1ZSwgaXRlbXMpO1xuICAgICAgICAgIHVwZGF0ZVJlc3VsdHNEaXNwbGF5KGZpbHRlcmVkSXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgICAgIFxuICAgIH0pOyAgIFxufVxuXG5hc3luYyBlc1JlY3VycmVudGUodGFyZWE6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+e1xuICBjb25zdCBvcGNpb25lcyA9IFtcIlNpXCIsXCJOb1wiXSA7XG4gIGNvbnN0IHZhbG9yZXMgPSBbdHJ1ZSxmYWxzZV07XG4gIGNvbnN0IHBsYWNlaG9sZGVyID0gYCR7dGFyZWF9IGVzIHRhcmVhIHJlY3VycmVudGU/YDtcbiAgY29uc3QgbW9kYWwgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lcywgdmFsb3JlcywgcGxhY2Vob2xkZXIpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBtb2RhbC5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbn0iLCAiLy8gdGhlc2UgYXJlbid0IHJlYWxseSBwcml2YXRlLCBidXQgbm9yIGFyZSB0aGV5IHJlYWxseSB1c2VmdWwgdG8gZG9jdW1lbnRcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBMdXhvbkVycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZERhdGVUaW1lRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgc3VwZXIoYEludmFsaWQgRGF0ZVRpbWU6ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWRJbnRlcnZhbEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlYXNvbikge1xuICAgIHN1cGVyKGBJbnZhbGlkIEludGVydmFsOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkRHVyYXRpb25FcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICBzdXBlcihgSW52YWxpZCBEdXJhdGlvbjogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHt9XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWRVbml0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IodW5pdCkge1xuICAgIHN1cGVyKGBJbnZhbGlkIHVuaXQgJHt1bml0fWApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWRBcmd1bWVudEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBab25lSXNBYnN0cmFjdEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKFwiWm9uZSBpcyBhbiBhYnN0cmFjdCBjbGFzc1wiKTtcbiAgfVxufVxuIiwgIi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5jb25zdCBuID0gXCJudW1lcmljXCIsXG4gIHMgPSBcInNob3J0XCIsXG4gIGwgPSBcImxvbmdcIjtcblxuZXhwb3J0IGNvbnN0IERBVEVfU0hPUlQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURV9NRUQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURV9NRURfV0lUSF9XRUVLREFZID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBzLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfRlVMTCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FX1dJVEhfU0VDT05EUyA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9XSVRIX1NIT1JUX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FX1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IGwsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV8yNF9TSU1QTEUgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfMjRfV0lUSF9TRUNPTkRTID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9TSE9SVCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfTUVEID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgd2Vla2RheTogcyxcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX0ZVTEwgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBzLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBzLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX0hVR0UgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgdGltZVpvbmVOYW1lOiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBsLFxufTtcbiIsICJpbXBvcnQgeyBab25lSXNBYnN0cmFjdEVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5cbi8qKlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBab25lIHtcbiAgLyoqXG4gICAqIFRoZSB0eXBlIG9mIHpvbmVcbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgdHlwZSgpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoaXMgem9uZS5cbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbmFtZSgpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgZ2V0IGlhbmFOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBvZmZzZXQgaXMga25vd24gdG8gYmUgZml4ZWQgZm9yIHRoZSB3aG9sZSB5ZWFyLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyBjb21tb24gbmFtZSAoc3VjaCBhcyBFU1QpIGF0IHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgbmFtZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMgdG8gYWZmZWN0IHRoZSBmb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMuZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLiBBY2NlcHRzICdsb25nJyBvciAnc2hvcnQnLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5sb2NhbGUgLSBXaGF0IGxvY2FsZSB0byByZXR1cm4gdGhlIG9mZnNldCBuYW1lIGluLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBvZmZzZXROYW1lKHRzLCBvcHRzKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQncyB2YWx1ZSBhcyBhIHN0cmluZ1xuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBnZXQgdGhlIG9mZnNldFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm9ybWF0IC0gV2hhdCBzdHlsZSBvZiBvZmZzZXQgdG8gcmV0dXJuLlxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgQWNjZXB0cyAnbmFycm93JywgJ3Nob3J0Jywgb3IgJ3RlY2hpZScuIFJldHVybmluZyAnKzYnLCAnKzA2OjAwJywgb3IgJyswNjAwJyByZXNwZWN0aXZlbHlcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgb2Zmc2V0IGluIG1pbnV0ZXMgZm9yIHRoaXMgem9uZSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcC5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gY29tcHV0ZSB0aGUgb2Zmc2V0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIG9mZnNldCh0cykge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIGVxdWFsIHRvIGFub3RoZXIgem9uZVxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtab25lfSBvdGhlclpvbmUgLSB0aGUgem9uZSB0byBjb21wYXJlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIFpvbmUgaXMgdmFsaWQuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBmb3JtYXRPZmZzZXQsIHBhcnNlWm9uZUluZm8gfSBmcm9tIFwiLi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG5sZXQgc2luZ2xldG9uID0gbnVsbDtcblxuLyoqXG4gKiBSZXByZXNlbnRzIHRoZSBsb2NhbCB6b25lIGZvciB0aGlzIEphdmFTY3JpcHQgZW52aXJvbm1lbnQuXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3lzdGVtWm9uZSBleHRlbmRzIFpvbmUge1xuICAvKipcbiAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIHRoZSBsb2NhbCB6b25lXG4gICAqIEByZXR1cm4ge1N5c3RlbVpvbmV9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgIGlmIChzaW5nbGV0b24gPT09IG51bGwpIHtcbiAgICAgIHNpbmdsZXRvbiA9IG5ldyBTeXN0ZW1ab25lKCk7XG4gICAgfVxuICAgIHJldHVybiBzaW5nbGV0b247XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gXCJzeXN0ZW1cIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUodHMsIHsgZm9ybWF0LCBsb2NhbGUgfSkge1xuICAgIHJldHVybiBwYXJzZVpvbmVJbmZvKHRzLCBmb3JtYXQsIGxvY2FsZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBmb3JtYXRPZmZzZXQodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0KHRzKSB7XG4gICAgcmV0dXJuIC1uZXcgRGF0ZSh0cykuZ2V0VGltZXpvbmVPZmZzZXQoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwic3lzdGVtXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwgImltcG9ydCB7IGZvcm1hdE9mZnNldCwgcGFyc2Vab25lSW5mbywgaXNVbmRlZmluZWQsIG9ialRvTG9jYWxUUyB9IGZyb20gXCIuLi9pbXBsL3V0aWwuanNcIjtcbmltcG9ydCBab25lIGZyb20gXCIuLi96b25lLmpzXCI7XG5cbmxldCBkdGZDYWNoZSA9IHt9O1xuZnVuY3Rpb24gbWFrZURURih6b25lKSB7XG4gIGlmICghZHRmQ2FjaGVbem9uZV0pIHtcbiAgICBkdGZDYWNoZVt6b25lXSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tVVNcIiwge1xuICAgICAgaG91cjEyOiBmYWxzZSxcbiAgICAgIHRpbWVab25lOiB6b25lLFxuICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICBtb250aDogXCIyLWRpZ2l0XCIsXG4gICAgICBkYXk6IFwiMi1kaWdpdFwiLFxuICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxuICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICAgIGVyYTogXCJzaG9ydFwiLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBkdGZDYWNoZVt6b25lXTtcbn1cblxuY29uc3QgdHlwZVRvUG9zID0ge1xuICB5ZWFyOiAwLFxuICBtb250aDogMSxcbiAgZGF5OiAyLFxuICBlcmE6IDMsXG4gIGhvdXI6IDQsXG4gIG1pbnV0ZTogNSxcbiAgc2Vjb25kOiA2LFxufTtcblxuZnVuY3Rpb24gaGFja3lPZmZzZXQoZHRmLCBkYXRlKSB7XG4gIGNvbnN0IGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXQoZGF0ZSkucmVwbGFjZSgvXFx1MjAwRS9nLCBcIlwiKSxcbiAgICBwYXJzZWQgPSAvKFxcZCspXFwvKFxcZCspXFwvKFxcZCspIChBRHxCQyksPyAoXFxkKyk6KFxcZCspOihcXGQrKS8uZXhlYyhmb3JtYXR0ZWQpLFxuICAgIFssIGZNb250aCwgZkRheSwgZlllYXIsIGZhZE9yQmMsIGZIb3VyLCBmTWludXRlLCBmU2Vjb25kXSA9IHBhcnNlZDtcbiAgcmV0dXJuIFtmWWVhciwgZk1vbnRoLCBmRGF5LCBmYWRPckJjLCBmSG91ciwgZk1pbnV0ZSwgZlNlY29uZF07XG59XG5cbmZ1bmN0aW9uIHBhcnRzT2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICBjb25zdCBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0VG9QYXJ0cyhkYXRlKTtcbiAgY29uc3QgZmlsbGVkID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybWF0dGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gZm9ybWF0dGVkW2ldO1xuICAgIGNvbnN0IHBvcyA9IHR5cGVUb1Bvc1t0eXBlXTtcblxuICAgIGlmICh0eXBlID09PSBcImVyYVwiKSB7XG4gICAgICBmaWxsZWRbcG9zXSA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoIWlzVW5kZWZpbmVkKHBvcykpIHtcbiAgICAgIGZpbGxlZFtwb3NdID0gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZpbGxlZDtcbn1cblxubGV0IGlhbmFab25lQ2FjaGUgPSB7fTtcbi8qKlxuICogQSB6b25lIGlkZW50aWZpZWQgYnkgYW4gSUFOQSBpZGVudGlmaWVyLCBsaWtlIEFtZXJpY2EvTmV3X1lvcmtcbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJQU5BWm9uZSBleHRlbmRzIFpvbmUge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBab25lIG5hbWVcbiAgICogQHJldHVybiB7SUFOQVpvbmV9XG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKG5hbWUpIHtcbiAgICBpZiAoIWlhbmFab25lQ2FjaGVbbmFtZV0pIHtcbiAgICAgIGlhbmFab25lQ2FjaGVbbmFtZV0gPSBuZXcgSUFOQVpvbmUobmFtZSk7XG4gICAgfVxuICAgIHJldHVybiBpYW5hWm9uZUNhY2hlW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IGxvY2FsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIHJlc2V0Q2FjaGUoKSB7XG4gICAgaWFuYVpvbmVDYWNoZSA9IHt9O1xuICAgIGR0ZkNhY2hlID0ge307XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaXMgYSB2YWxpZCBzcGVjaWZpZXIuIFRoaXMgb25seSBjaGVja3MgdGhlIHN0cmluZydzIGZvcm1hdCwgbm90IHRoYXQgdGhlIHNwZWNpZmllciBpZGVudGlmaWVzIGEga25vd24gem9uZTsgc2VlIGlzVmFsaWRab25lIGZvciB0aGF0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBzdHJpbmcgdG8gY2hlY2sgdmFsaWRpdHkgb25cbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihcIkFtZXJpY2EvTmV3X1lvcmtcIikgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoXCJTcG9ydH5+YmxvcnBcIikgLy89PiBmYWxzZVxuICAgKiBAZGVwcmVjYXRlZCBUaGlzIG1ldGhvZCByZXR1cm5zIGZhbHNlIGZvciBzb21lIHZhbGlkIElBTkEgbmFtZXMuIFVzZSBpc1ZhbGlkWm9uZSBpbnN0ZWFkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRTcGVjaWZpZXIocykge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRab25lKHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJvdmlkZWQgc3RyaW5nIGlkZW50aWZpZXMgYSByZWFsIHpvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHpvbmUgLSBUaGUgc3RyaW5nIHRvIGNoZWNrXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiQW1lcmljYS9OZXdfWW9ya1wiKSAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJGYW50YXNpYS9DYXN0bGVcIikgLy89PiBmYWxzZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIlNwb3J0fn5ibG9ycFwiKSAvLz0+IGZhbHNlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNWYWxpZFpvbmUoem9uZSkge1xuICAgIGlmICghem9uZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1VU1wiLCB7IHRpbWVab25lOiB6b25lIH0pLmZvcm1hdCgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cbiAgICB0aGlzLnpvbmVOYW1lID0gbmFtZTtcbiAgICAvKiogQHByaXZhdGUgKiovXG4gICAgdGhpcy52YWxpZCA9IElBTkFab25lLmlzVmFsaWRab25lKG5hbWUpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwiaWFuYVwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuem9uZU5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0TmFtZSh0cywgeyBmb3JtYXQsIGxvY2FsZSB9KSB7XG4gICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlLCB0aGlzLm5hbWUpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMub2Zmc2V0KHRzKSwgZm9ybWF0KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCh0cykge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0cyk7XG5cbiAgICBpZiAoaXNOYU4oZGF0ZSkpIHJldHVybiBOYU47XG5cbiAgICBjb25zdCBkdGYgPSBtYWtlRFRGKHRoaXMubmFtZSk7XG4gICAgbGV0IFt5ZWFyLCBtb250aCwgZGF5LCBhZE9yQmMsIGhvdXIsIG1pbnV0ZSwgc2Vjb25kXSA9IGR0Zi5mb3JtYXRUb1BhcnRzXG4gICAgICA/IHBhcnRzT2Zmc2V0KGR0ZiwgZGF0ZSlcbiAgICAgIDogaGFja3lPZmZzZXQoZHRmLCBkYXRlKTtcblxuICAgIGlmIChhZE9yQmMgPT09IFwiQkNcIikge1xuICAgICAgeWVhciA9IC1NYXRoLmFicyh5ZWFyKSArIDE7XG4gICAgfVxuXG4gICAgLy8gYmVjYXVzZSB3ZSdyZSB1c2luZyBob3VyMTIgYW5kIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEwMjU1NjQmY2FuPTImcT0lMjIyNCUzQTAwJTIyJTIwZGF0ZXRpbWVmb3JtYXRcbiAgICBjb25zdCBhZGp1c3RlZEhvdXIgPSBob3VyID09PSAyNCA/IDAgOiBob3VyO1xuXG4gICAgY29uc3QgYXNVVEMgPSBvYmpUb0xvY2FsVFMoe1xuICAgICAgeWVhcixcbiAgICAgIG1vbnRoLFxuICAgICAgZGF5LFxuICAgICAgaG91cjogYWRqdXN0ZWRIb3VyLFxuICAgICAgbWludXRlLFxuICAgICAgc2Vjb25kLFxuICAgICAgbWlsbGlzZWNvbmQ6IDAsXG4gICAgfSk7XG5cbiAgICBsZXQgYXNUUyA9ICtkYXRlO1xuICAgIGNvbnN0IG92ZXIgPSBhc1RTICUgMTAwMDtcbiAgICBhc1RTIC09IG92ZXIgPj0gMCA/IG92ZXIgOiAxMDAwICsgb3ZlcjtcbiAgICByZXR1cm4gKGFzVVRDIC0gYXNUUykgLyAoNjAgKiAxMDAwKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwiaWFuYVwiICYmIG90aGVyWm9uZS5uYW1lID09PSB0aGlzLm5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy52YWxpZDtcbiAgfVxufVxuIiwgImltcG9ydCB7IGhhc0xvY2FsZVdlZWtJbmZvLCBoYXNSZWxhdGl2ZSwgcGFkU3RhcnQsIHJvdW5kVG8sIHZhbGlkYXRlV2Vla1NldHRpbmdzIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0ICogYXMgRW5nbGlzaCBmcm9tIFwiLi9lbmdsaXNoLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4uL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4uL2RhdGV0aW1lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4uL3pvbmVzL0lBTkFab25lLmpzXCI7XG5cbi8vIHRvZG8gLSByZW1hcCBjYWNoaW5nXG5cbmxldCBpbnRsTEZDYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkTEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHtcbiAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICBsZXQgZHRmID0gaW50bExGQ2FjaGVba2V5XTtcbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5MaXN0Rm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bExGQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuICByZXR1cm4gZHRmO1xufVxuXG5sZXQgaW50bERUQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZERURihsb2NTdHJpbmcsIG9wdHMgPSB7fSkge1xuICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIGxldCBkdGYgPSBpbnRsRFRDYWNoZVtrZXldO1xuICBpZiAoIWR0Zikge1xuICAgIGR0ZiA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bERUQ2FjaGVba2V5XSA9IGR0ZjtcbiAgfVxuICByZXR1cm4gZHRmO1xufVxuXG5sZXQgaW50bE51bUNhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWRJTkYobG9jU3RyaW5nLCBvcHRzID0ge30pIHtcbiAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICBsZXQgaW5mID0gaW50bE51bUNhY2hlW2tleV07XG4gIGlmICghaW5mKSB7XG4gICAgaW5mID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bE51bUNhY2hlW2tleV0gPSBpbmY7XG4gIH1cbiAgcmV0dXJuIGluZjtcbn1cblxubGV0IGludGxSZWxDYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkUlRGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHsgYmFzZSwgLi4uY2FjaGVLZXlPcHRzIH0gPSBvcHRzOyAvLyBleGNsdWRlIGBiYXNlYCBmcm9tIHRoZSBvcHRpb25zXG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIGNhY2hlS2V5T3B0c10pO1xuICBsZXQgaW5mID0gaW50bFJlbENhY2hlW2tleV07XG4gIGlmICghaW5mKSB7XG4gICAgaW5mID0gbmV3IEludGwuUmVsYXRpdmVUaW1lRm9ybWF0KGxvY1N0cmluZywgb3B0cyk7XG4gICAgaW50bFJlbENhY2hlW2tleV0gPSBpbmY7XG4gIH1cbiAgcmV0dXJuIGluZjtcbn1cblxubGV0IHN5c0xvY2FsZUNhY2hlID0gbnVsbDtcbmZ1bmN0aW9uIHN5c3RlbUxvY2FsZSgpIHtcbiAgaWYgKHN5c0xvY2FsZUNhY2hlKSB7XG4gICAgcmV0dXJuIHN5c0xvY2FsZUNhY2hlO1xuICB9IGVsc2Uge1xuICAgIHN5c0xvY2FsZUNhY2hlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGU7XG4gICAgcmV0dXJuIHN5c0xvY2FsZUNhY2hlO1xuICB9XG59XG5cbmxldCB3ZWVrSW5mb0NhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWRXZWVrSW5mbyhsb2NTdHJpbmcpIHtcbiAgbGV0IGRhdGEgPSB3ZWVrSW5mb0NhY2hlW2xvY1N0cmluZ107XG4gIGlmICghZGF0YSkge1xuICAgIGNvbnN0IGxvY2FsZSA9IG5ldyBJbnRsLkxvY2FsZShsb2NTdHJpbmcpO1xuICAgIC8vIGJyb3dzZXJzIGN1cnJlbnRseSBpbXBsZW1lbnQgdGhpcyBhcyBhIHByb3BlcnR5LCBidXQgc3BlYyBzYXlzIGl0IHNob3VsZCBiZSBhIGdldHRlciBmdW5jdGlvblxuICAgIGRhdGEgPSBcImdldFdlZWtJbmZvXCIgaW4gbG9jYWxlID8gbG9jYWxlLmdldFdlZWtJbmZvKCkgOiBsb2NhbGUud2Vla0luZm87XG4gICAgd2Vla0luZm9DYWNoZVtsb2NTdHJpbmddID0gZGF0YTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gcGFyc2VMb2NhbGVTdHJpbmcobG9jYWxlU3RyKSB7XG4gIC8vIEkgcmVhbGx5IHdhbnQgdG8gYXZvaWQgd3JpdGluZyBhIEJDUCA0NyBwYXJzZXJcbiAgLy8gc2VlLCBlLmcuIGh0dHBzOi8vZ2l0aHViLmNvbS93b29vcm0vYmNwLTQ3XG4gIC8vIEluc3RlYWQsIHdlJ2xsIGRvIHRoaXM6XG5cbiAgLy8gYSkgaWYgdGhlIHN0cmluZyBoYXMgbm8gLXUgZXh0ZW5zaW9ucywganVzdCBsZWF2ZSBpdCBhbG9uZVxuICAvLyBiKSBpZiBpdCBkb2VzLCB1c2UgSW50bCB0byByZXNvbHZlIGV2ZXJ5dGhpbmdcbiAgLy8gYykgaWYgSW50bCBmYWlscywgdHJ5IGFnYWluIHdpdGhvdXQgdGhlIC11XG5cbiAgLy8gcHJpdmF0ZSBzdWJ0YWdzIGFuZCB1bmljb2RlIHN1YnRhZ3MgaGF2ZSBvcmRlcmluZyByZXF1aXJlbWVudHMsXG4gIC8vIGFuZCB3ZSdyZSBub3QgcHJvcGVybHkgcGFyc2luZyB0aGlzLCBzbyBqdXN0IHN0cmlwIG91dCB0aGVcbiAgLy8gcHJpdmF0ZSBvbmVzIGlmIHRoZXkgZXhpc3QuXG4gIGNvbnN0IHhJbmRleCA9IGxvY2FsZVN0ci5pbmRleE9mKFwiLXgtXCIpO1xuICBpZiAoeEluZGV4ICE9PSAtMSkge1xuICAgIGxvY2FsZVN0ciA9IGxvY2FsZVN0ci5zdWJzdHJpbmcoMCwgeEluZGV4KTtcbiAgfVxuXG4gIGNvbnN0IHVJbmRleCA9IGxvY2FsZVN0ci5pbmRleE9mKFwiLXUtXCIpO1xuICBpZiAodUluZGV4ID09PSAtMSkge1xuICAgIHJldHVybiBbbG9jYWxlU3RyXTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgb3B0aW9ucztcbiAgICBsZXQgc2VsZWN0ZWRTdHI7XG4gICAgdHJ5IHtcbiAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYobG9jYWxlU3RyKS5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgICAgIHNlbGVjdGVkU3RyID0gbG9jYWxlU3RyO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IHNtYWxsZXIgPSBsb2NhbGVTdHIuc3Vic3RyaW5nKDAsIHVJbmRleCk7XG4gICAgICBvcHRpb25zID0gZ2V0Q2FjaGVkRFRGKHNtYWxsZXIpLnJlc29sdmVkT3B0aW9ucygpO1xuICAgICAgc2VsZWN0ZWRTdHIgPSBzbWFsbGVyO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhciB9ID0gb3B0aW9ucztcbiAgICByZXR1cm4gW3NlbGVjdGVkU3RyLCBudW1iZXJpbmdTeXN0ZW0sIGNhbGVuZGFyXTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbnRsQ29uZmlnU3RyaW5nKGxvY2FsZVN0ciwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikge1xuICBpZiAob3V0cHV0Q2FsZW5kYXIgfHwgbnVtYmVyaW5nU3lzdGVtKSB7XG4gICAgaWYgKCFsb2NhbGVTdHIuaW5jbHVkZXMoXCItdS1cIikpIHtcbiAgICAgIGxvY2FsZVN0ciArPSBcIi11XCI7XG4gICAgfVxuXG4gICAgaWYgKG91dHB1dENhbGVuZGFyKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gYC1jYS0ke291dHB1dENhbGVuZGFyfWA7XG4gICAgfVxuXG4gICAgaWYgKG51bWJlcmluZ1N5c3RlbSkge1xuICAgICAgbG9jYWxlU3RyICs9IGAtbnUtJHtudW1iZXJpbmdTeXN0ZW19YDtcbiAgICB9XG4gICAgcmV0dXJuIGxvY2FsZVN0cjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9jYWxlU3RyO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcE1vbnRocyhmKSB7XG4gIGNvbnN0IG1zID0gW107XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IDEyOyBpKyspIHtcbiAgICBjb25zdCBkdCA9IERhdGVUaW1lLnV0YygyMDA5LCBpLCAxKTtcbiAgICBtcy5wdXNoKGYoZHQpKTtcbiAgfVxuICByZXR1cm4gbXM7XG59XG5cbmZ1bmN0aW9uIG1hcFdlZWtkYXlzKGYpIHtcbiAgY29uc3QgbXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gNzsgaSsrKSB7XG4gICAgY29uc3QgZHQgPSBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzICsgaSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cbiAgcmV0dXJuIG1zO1xufVxuXG5mdW5jdGlvbiBsaXN0U3R1ZmYobG9jLCBsZW5ndGgsIGVuZ2xpc2hGbiwgaW50bEZuKSB7XG4gIGNvbnN0IG1vZGUgPSBsb2MubGlzdGluZ01vZGUoKTtcblxuICBpZiAobW9kZSA9PT0gXCJlcnJvclwiKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAobW9kZSA9PT0gXCJlblwiKSB7XG4gICAgcmV0dXJuIGVuZ2xpc2hGbihsZW5ndGgpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBpbnRsRm4obGVuZ3RoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdXBwb3J0c0Zhc3ROdW1iZXJzKGxvYykge1xuICBpZiAobG9jLm51bWJlcmluZ1N5c3RlbSAmJiBsb2MubnVtYmVyaW5nU3lzdGVtICE9PSBcImxhdG5cIikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gKFxuICAgICAgbG9jLm51bWJlcmluZ1N5c3RlbSA9PT0gXCJsYXRuXCIgfHxcbiAgICAgICFsb2MubG9jYWxlIHx8XG4gICAgICBsb2MubG9jYWxlLnN0YXJ0c1dpdGgoXCJlblwiKSB8fFxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jLmludGwpLnJlc29sdmVkT3B0aW9ucygpLm51bWJlcmluZ1N5c3RlbSA9PT0gXCJsYXRuXCJcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5jbGFzcyBQb2x5TnVtYmVyRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoaW50bCwgZm9yY2VTaW1wbGUsIG9wdHMpIHtcbiAgICB0aGlzLnBhZFRvID0gb3B0cy5wYWRUbyB8fCAwO1xuICAgIHRoaXMuZmxvb3IgPSBvcHRzLmZsb29yIHx8IGZhbHNlO1xuXG4gICAgY29uc3QgeyBwYWRUbywgZmxvb3IsIC4uLm90aGVyT3B0cyB9ID0gb3B0cztcblxuICAgIGlmICghZm9yY2VTaW1wbGUgfHwgT2JqZWN0LmtleXMob3RoZXJPcHRzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbnRsT3B0cyA9IHsgdXNlR3JvdXBpbmc6IGZhbHNlLCAuLi5vcHRzIH07XG4gICAgICBpZiAob3B0cy5wYWRUbyA+IDApIGludGxPcHRzLm1pbmltdW1JbnRlZ2VyRGlnaXRzID0gb3B0cy5wYWRUbztcbiAgICAgIHRoaXMuaW5mID0gZ2V0Q2FjaGVkSU5GKGludGwsIGludGxPcHRzKTtcbiAgICB9XG4gIH1cblxuICBmb3JtYXQoaSkge1xuICAgIGlmICh0aGlzLmluZikge1xuICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IGk7XG4gICAgICByZXR1cm4gdGhpcy5pbmYuZm9ybWF0KGZpeGVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyBudW1iZXJmb3JtYXR0ZXIgZGVmYXVsdHNcbiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5mbG9vciA/IE1hdGguZmxvb3IoaSkgOiByb3VuZFRvKGksIDMpO1xuICAgICAgcmV0dXJuIHBhZFN0YXJ0KGZpeGVkLCB0aGlzLnBhZFRvKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmNsYXNzIFBvbHlEYXRlRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoZHQsIGludGwsIG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMub3JpZ2luYWxab25lID0gdW5kZWZpbmVkO1xuXG4gICAgbGV0IHogPSB1bmRlZmluZWQ7XG4gICAgaWYgKHRoaXMub3B0cy50aW1lWm9uZSkge1xuICAgICAgLy8gRG9uJ3QgYXBwbHkgYW55IHdvcmthcm91bmRzIGlmIGEgdGltZVpvbmUgaXMgZXhwbGljaXRseSBwcm92aWRlZCBpbiBvcHRzXG4gICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwiZml4ZWRcIikge1xuICAgICAgLy8gVVRDLTggb3IgRXRjL1VUQy04IGFyZSBub3QgcGFydCBvZiB0emRhdGEsIG9ubHkgRXRjL0dNVCs4IGFuZCB0aGUgbGlrZS5cbiAgICAgIC8vIFRoYXQgaXMgd2h5IGZpeGVkLW9mZnNldCBUWiBpcyBzZXQgdG8gdGhhdCB1bmxlc3MgaXQgaXM6XG4gICAgICAvLyAxLiBSZXByZXNlbnRpbmcgb2Zmc2V0IDAgd2hlbiBVVEMgaXMgdXNlZCB0byBtYWludGFpbiBwcmV2aW91cyBiZWhhdmlvciBhbmQgZG9lcyBub3QgYmVjb21lIEdNVC5cbiAgICAgIC8vIDIuIFVuc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyOlxuICAgICAgLy8gICAgLSBzb21lIGRvIG5vdCBzdXBwb3J0IEV0Yy9cbiAgICAgIC8vICAgIC0gPCBFdGMvR01ULTE0LCA+IEV0Yy9HTVQrMTIsIGFuZCAzMC1taW51dGUgb3IgNDUtbWludXRlIG9mZnNldHMgYXJlIG5vdCBwYXJ0IG9mIHR6ZGF0YVxuICAgICAgY29uc3QgZ210T2Zmc2V0ID0gLTEgKiAoZHQub2Zmc2V0IC8gNjApO1xuICAgICAgY29uc3Qgb2Zmc2V0WiA9IGdtdE9mZnNldCA+PSAwID8gYEV0Yy9HTVQrJHtnbXRPZmZzZXR9YCA6IGBFdGMvR01UJHtnbXRPZmZzZXR9YDtcbiAgICAgIGlmIChkdC5vZmZzZXQgIT09IDAgJiYgSUFOQVpvbmUuY3JlYXRlKG9mZnNldFopLnZhbGlkKSB7XG4gICAgICAgIHogPSBvZmZzZXRaO1xuICAgICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3QgYWxsIGZpeGVkLW9mZnNldCB6b25lcyBsaWtlIEV0Yy8rNDozMCBhcmUgcHJlc2VudCBpbiB0emRhdGEgc29cbiAgICAgICAgLy8gd2UgbWFudWFsbHkgYXBwbHkgdGhlIG9mZnNldCBhbmQgc3Vic3RpdHV0ZSB0aGUgem9uZSBhcyBuZWVkZWQuXG4gICAgICAgIHogPSBcIlVUQ1wiO1xuICAgICAgICB0aGlzLmR0ID0gZHQub2Zmc2V0ID09PSAwID8gZHQgOiBkdC5zZXRab25lKFwiVVRDXCIpLnBsdXMoeyBtaW51dGVzOiBkdC5vZmZzZXQgfSk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxab25lID0gZHQuem9uZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGR0LnpvbmUudHlwZSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSBcImlhbmFcIikge1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgeiA9IGR0LnpvbmUubmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ3VzdG9tIHpvbmVzIGNhbiBoYXZlIGFueSBvZmZzZXQgLyBvZmZzZXROYW1lIHNvIHdlIGp1c3QgbWFudWFsbHlcbiAgICAgIC8vIGFwcGx5IHRoZSBvZmZzZXQgYW5kIHN1YnN0aXR1dGUgdGhlIHpvbmUgYXMgbmVlZGVkLlxuICAgICAgeiA9IFwiVVRDXCI7XG4gICAgICB0aGlzLmR0ID0gZHQuc2V0Wm9uZShcIlVUQ1wiKS5wbHVzKHsgbWludXRlczogZHQub2Zmc2V0IH0pO1xuICAgICAgdGhpcy5vcmlnaW5hbFpvbmUgPSBkdC56b25lO1xuICAgIH1cblxuICAgIGNvbnN0IGludGxPcHRzID0geyAuLi50aGlzLm9wdHMgfTtcbiAgICBpbnRsT3B0cy50aW1lWm9uZSA9IGludGxPcHRzLnRpbWVab25lIHx8IHo7XG4gICAgdGhpcy5kdGYgPSBnZXRDYWNoZWREVEYoaW50bCwgaW50bE9wdHMpO1xuICB9XG5cbiAgZm9ybWF0KCkge1xuICAgIGlmICh0aGlzLm9yaWdpbmFsWm9uZSkge1xuICAgICAgLy8gSWYgd2UgaGF2ZSB0byBzdWJzdGl0dXRlIGluIHRoZSBhY3R1YWwgem9uZSBuYW1lLCB3ZSBoYXZlIHRvIHVzZVxuICAgICAgLy8gZm9ybWF0VG9QYXJ0cyBzbyB0aGF0IHRoZSB0aW1lem9uZSBjYW4gYmUgcmVwbGFjZWQuXG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRUb1BhcnRzKClcbiAgICAgICAgLm1hcCgoeyB2YWx1ZSB9KSA9PiB2YWx1ZSlcbiAgICAgICAgLmpvaW4oXCJcIik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmR0Zi5mb3JtYXQodGhpcy5kdC50b0pTRGF0ZSgpKTtcbiAgfVxuXG4gIGZvcm1hdFRvUGFydHMoKSB7XG4gICAgY29uc3QgcGFydHMgPSB0aGlzLmR0Zi5mb3JtYXRUb1BhcnRzKHRoaXMuZHQudG9KU0RhdGUoKSk7XG4gICAgaWYgKHRoaXMub3JpZ2luYWxab25lKSB7XG4gICAgICByZXR1cm4gcGFydHMubWFwKChwYXJ0KSA9PiB7XG4gICAgICAgIGlmIChwYXJ0LnR5cGUgPT09IFwidGltZVpvbmVOYW1lXCIpIHtcbiAgICAgICAgICBjb25zdCBvZmZzZXROYW1lID0gdGhpcy5vcmlnaW5hbFpvbmUub2Zmc2V0TmFtZSh0aGlzLmR0LnRzLCB7XG4gICAgICAgICAgICBsb2NhbGU6IHRoaXMuZHQubG9jYWxlLFxuICAgICAgICAgICAgZm9ybWF0OiB0aGlzLm9wdHMudGltZVpvbmVOYW1lLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5wYXJ0LFxuICAgICAgICAgICAgdmFsdWU6IG9mZnNldE5hbWUsXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcGFydDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cztcbiAgfVxuXG4gIHJlc29sdmVkT3B0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5kdGYucmVzb2x2ZWRPcHRpb25zKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBQb2x5UmVsRm9ybWF0dGVyIHtcbiAgY29uc3RydWN0b3IoaW50bCwgaXNFbmdsaXNoLCBvcHRzKSB7XG4gICAgdGhpcy5vcHRzID0geyBzdHlsZTogXCJsb25nXCIsIC4uLm9wdHMgfTtcbiAgICBpZiAoIWlzRW5nbGlzaCAmJiBoYXNSZWxhdGl2ZSgpKSB7XG4gICAgICB0aGlzLnJ0ZiA9IGdldENhY2hlZFJURihpbnRsLCBvcHRzKTtcbiAgICB9XG4gIH1cblxuICBmb3JtYXQoY291bnQsIHVuaXQpIHtcbiAgICBpZiAodGhpcy5ydGYpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ0Zi5mb3JtYXQoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRW5nbGlzaC5mb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIHRoaXMub3B0cy5udW1lcmljLCB0aGlzLm9wdHMuc3R5bGUgIT09IFwibG9uZ1wiKTtcbiAgICB9XG4gIH1cblxuICBmb3JtYXRUb1BhcnRzKGNvdW50LCB1bml0KSB7XG4gICAgaWYgKHRoaXMucnRmKSB7XG4gICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbn1cblxuY29uc3QgZmFsbGJhY2tXZWVrU2V0dGluZ3MgPSB7XG4gIGZpcnN0RGF5OiAxLFxuICBtaW5pbWFsRGF5czogNCxcbiAgd2Vla2VuZDogWzYsIDddLFxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvY2FsZSB7XG4gIHN0YXRpYyBmcm9tT3B0cyhvcHRzKSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUoXG4gICAgICBvcHRzLmxvY2FsZSxcbiAgICAgIG9wdHMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgb3B0cy5vdXRwdXRDYWxlbmRhcixcbiAgICAgIG9wdHMud2Vla1NldHRpbmdzLFxuICAgICAgb3B0cy5kZWZhdWx0VG9FTlxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgd2Vla1NldHRpbmdzLCBkZWZhdWx0VG9FTiA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc3BlY2lmaWVkTG9jYWxlID0gbG9jYWxlIHx8IFNldHRpbmdzLmRlZmF1bHRMb2NhbGU7XG4gICAgLy8gdGhlIHN5c3RlbSBsb2NhbGUgaXMgdXNlZnVsIGZvciBodW1hbiByZWFkYWJsZSBzdHJpbmdzIGJ1dCBhbm5veWluZyBmb3IgcGFyc2luZy9mb3JtYXR0aW5nIGtub3duIGZvcm1hdHNcbiAgICBjb25zdCBsb2NhbGVSID0gc3BlY2lmaWVkTG9jYWxlIHx8IChkZWZhdWx0VG9FTiA/IFwiZW4tVVNcIiA6IHN5c3RlbUxvY2FsZSgpKTtcbiAgICBjb25zdCBudW1iZXJpbmdTeXN0ZW1SID0gbnVtYmVyaW5nU3lzdGVtIHx8IFNldHRpbmdzLmRlZmF1bHROdW1iZXJpbmdTeXN0ZW07XG4gICAgY29uc3Qgb3V0cHV0Q2FsZW5kYXJSID0gb3V0cHV0Q2FsZW5kYXIgfHwgU2V0dGluZ3MuZGVmYXVsdE91dHB1dENhbGVuZGFyO1xuICAgIGNvbnN0IHdlZWtTZXR0aW5nc1IgPSB2YWxpZGF0ZVdlZWtTZXR0aW5ncyh3ZWVrU2V0dGluZ3MpIHx8IFNldHRpbmdzLmRlZmF1bHRXZWVrU2V0dGluZ3M7XG4gICAgcmV0dXJuIG5ldyBMb2NhbGUobG9jYWxlUiwgbnVtYmVyaW5nU3lzdGVtUiwgb3V0cHV0Q2FsZW5kYXJSLCB3ZWVrU2V0dGluZ3NSLCBzcGVjaWZpZWRMb2NhbGUpO1xuICB9XG5cbiAgc3RhdGljIHJlc2V0Q2FjaGUoKSB7XG4gICAgc3lzTG9jYWxlQ2FjaGUgPSBudWxsO1xuICAgIGludGxEVENhY2hlID0ge307XG4gICAgaW50bE51bUNhY2hlID0ge307XG4gICAgaW50bFJlbENhY2hlID0ge307XG4gIH1cblxuICBzdGF0aWMgZnJvbU9iamVjdCh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgd2Vla1NldHRpbmdzIH0gPSB7fSkge1xuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciwgd2Vla1NldHRpbmdzKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxvY2FsZSwgbnVtYmVyaW5nLCBvdXRwdXRDYWxlbmRhciwgd2Vla1NldHRpbmdzLCBzcGVjaWZpZWRMb2NhbGUpIHtcbiAgICBjb25zdCBbcGFyc2VkTG9jYWxlLCBwYXJzZWROdW1iZXJpbmdTeXN0ZW0sIHBhcnNlZE91dHB1dENhbGVuZGFyXSA9IHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZSk7XG5cbiAgICB0aGlzLmxvY2FsZSA9IHBhcnNlZExvY2FsZTtcbiAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZyB8fCBwYXJzZWROdW1iZXJpbmdTeXN0ZW0gfHwgbnVsbDtcbiAgICB0aGlzLm91dHB1dENhbGVuZGFyID0gb3V0cHV0Q2FsZW5kYXIgfHwgcGFyc2VkT3V0cHV0Q2FsZW5kYXIgfHwgbnVsbDtcbiAgICB0aGlzLndlZWtTZXR0aW5ncyA9IHdlZWtTZXR0aW5ncztcbiAgICB0aGlzLmludGwgPSBpbnRsQ29uZmlnU3RyaW5nKHRoaXMubG9jYWxlLCB0aGlzLm51bWJlcmluZ1N5c3RlbSwgdGhpcy5vdXRwdXRDYWxlbmRhcik7XG5cbiAgICB0aGlzLndlZWtkYXlzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07XG4gICAgdGhpcy5tb250aHNDYWNoZSA9IHsgZm9ybWF0OiB7fSwgc3RhbmRhbG9uZToge30gfTtcbiAgICB0aGlzLm1lcmlkaWVtQ2FjaGUgPSBudWxsO1xuICAgIHRoaXMuZXJhQ2FjaGUgPSB7fTtcblxuICAgIHRoaXMuc3BlY2lmaWVkTG9jYWxlID0gc3BlY2lmaWVkTG9jYWxlO1xuICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBudWxsO1xuICB9XG5cbiAgZ2V0IGZhc3ROdW1iZXJzKCkge1xuICAgIGlmICh0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID09IG51bGwpIHtcbiAgICAgIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPSBzdXBwb3J0c0Zhc3ROdW1iZXJzKHRoaXMpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkO1xuICB9XG5cbiAgbGlzdGluZ01vZGUoKSB7XG4gICAgY29uc3QgaXNBY3R1YWxseUVuID0gdGhpcy5pc0VuZ2xpc2goKTtcbiAgICBjb25zdCBoYXNOb1dlaXJkbmVzcyA9XG4gICAgICAodGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG51bGwgfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiKSAmJlxuICAgICAgKHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IG51bGwgfHwgdGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gXCJncmVnb3J5XCIpO1xuICAgIHJldHVybiBpc0FjdHVhbGx5RW4gJiYgaGFzTm9XZWlyZG5lc3MgPyBcImVuXCIgOiBcImludGxcIjtcbiAgfVxuXG4gIGNsb25lKGFsdHMpIHtcbiAgICBpZiAoIWFsdHMgfHwgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYWx0cykubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIExvY2FsZS5jcmVhdGUoXG4gICAgICAgIGFsdHMubG9jYWxlIHx8IHRoaXMuc3BlY2lmaWVkTG9jYWxlLFxuICAgICAgICBhbHRzLm51bWJlcmluZ1N5c3RlbSB8fCB0aGlzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgYWx0cy5vdXRwdXRDYWxlbmRhciB8fCB0aGlzLm91dHB1dENhbGVuZGFyLFxuICAgICAgICB2YWxpZGF0ZVdlZWtTZXR0aW5ncyhhbHRzLndlZWtTZXR0aW5ncykgfHwgdGhpcy53ZWVrU2V0dGluZ3MsXG4gICAgICAgIGFsdHMuZGVmYXVsdFRvRU4gfHwgZmFsc2VcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmVkZWZhdWx0VG9FTihhbHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZSh7IC4uLmFsdHMsIGRlZmF1bHRUb0VOOiB0cnVlIH0pO1xuICB9XG5cbiAgcmVkZWZhdWx0VG9TeXN0ZW0oYWx0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoeyAuLi5hbHRzLCBkZWZhdWx0VG9FTjogZmFsc2UgfSk7XG4gIH1cblxuICBtb250aHMobGVuZ3RoLCBmb3JtYXQgPSBmYWxzZSkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBFbmdsaXNoLm1vbnRocywgKCkgPT4ge1xuICAgICAgY29uc3QgaW50bCA9IGZvcm1hdCA/IHsgbW9udGg6IGxlbmd0aCwgZGF5OiBcIm51bWVyaWNcIiB9IDogeyBtb250aDogbGVuZ3RoIH0sXG4gICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcbiAgICAgIGlmICghdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0gPSBtYXBNb250aHMoKGR0KSA9PiB0aGlzLmV4dHJhY3QoZHQsIGludGwsIFwibW9udGhcIikpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdO1xuICAgIH0pO1xuICB9XG5cbiAgd2Vla2RheXMobGVuZ3RoLCBmb3JtYXQgPSBmYWxzZSkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBFbmdsaXNoLndlZWtkYXlzLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnRsID0gZm9ybWF0XG4gICAgICAgICAgPyB7IHdlZWtkYXk6IGxlbmd0aCwgeWVhcjogXCJudW1lcmljXCIsIG1vbnRoOiBcImxvbmdcIiwgZGF5OiBcIm51bWVyaWNcIiB9XG4gICAgICAgICAgOiB7IHdlZWtkYXk6IGxlbmd0aCB9LFxuICAgICAgICBmb3JtYXRTdHIgPSBmb3JtYXQgPyBcImZvcm1hdFwiIDogXCJzdGFuZGFsb25lXCI7XG4gICAgICBpZiAoIXRoaXMud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0pIHtcbiAgICAgICAgdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcFdlZWtkYXlzKChkdCkgPT5cbiAgICAgICAgICB0aGlzLmV4dHJhY3QoZHQsIGludGwsIFwid2Vla2RheVwiKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF07XG4gICAgfSk7XG4gIH1cblxuICBtZXJpZGllbXMoKSB7XG4gICAgcmV0dXJuIGxpc3RTdHVmZihcbiAgICAgIHRoaXMsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICAoKSA9PiBFbmdsaXNoLm1lcmlkaWVtcyxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZXJlIGNvdWxkIGJlIGFyaWJpdHJhcnkgZGF5IHBlcmlvZHMuIFdlJ3JlIGdvbm5hIGFzc3VtZSB0aGVyZSBhcmUgZXhhY3RseSB0d29cbiAgICAgICAgLy8gZm9yIEFNIGFuZCBQTS4gVGhpcyBpcyBwcm9iYWJseSB3cm9uZywgYnV0IGl0J3MgbWFrZXMgcGFyc2luZyB3YXkgZWFzaWVyLlxuICAgICAgICBpZiAoIXRoaXMubWVyaWRpZW1DYWNoZSkge1xuICAgICAgICAgIGNvbnN0IGludGwgPSB7IGhvdXI6IFwibnVtZXJpY1wiLCBob3VyQ3ljbGU6IFwiaDEyXCIgfTtcbiAgICAgICAgICB0aGlzLm1lcmlkaWVtQ2FjaGUgPSBbRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMywgOSksIERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDE5KV0ubWFwKFxuICAgICAgICAgICAgKGR0KSA9PiB0aGlzLmV4dHJhY3QoZHQsIGludGwsIFwiZGF5cGVyaW9kXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLm1lcmlkaWVtQ2FjaGU7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGVyYXMobGVuZ3RoKSB7XG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIEVuZ2xpc2guZXJhcywgKCkgPT4ge1xuICAgICAgY29uc3QgaW50bCA9IHsgZXJhOiBsZW5ndGggfTtcblxuICAgICAgLy8gVGhpcyBpcyBwcm9ibGVtYXRpYy4gRGlmZmVyZW50IGNhbGVuZGFycyBhcmUgZ29pbmcgdG8gZGVmaW5lIGVyYXMgdG90YWxseSBkaWZmZXJlbnRseS4gV2hhdCBJIG5lZWQgaXMgdGhlIG1pbmltdW0gc2V0IG9mIGRhdGVzXG4gICAgICAvLyB0byBkZWZpbml0ZWx5IGVudW1lcmF0ZSB0aGVtLlxuICAgICAgaWYgKCF0aGlzLmVyYUNhY2hlW2xlbmd0aF0pIHtcbiAgICAgICAgdGhpcy5lcmFDYWNoZVtsZW5ndGhdID0gW0RhdGVUaW1lLnV0YygtNDAsIDEsIDEpLCBEYXRlVGltZS51dGMoMjAxNywgMSwgMSldLm1hcCgoZHQpID0+XG4gICAgICAgICAgdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcImVyYVwiKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lcmFDYWNoZVtsZW5ndGhdO1xuICAgIH0pO1xuICB9XG5cbiAgZXh0cmFjdChkdCwgaW50bE9wdHMsIGZpZWxkKSB7XG4gICAgY29uc3QgZGYgPSB0aGlzLmR0Rm9ybWF0dGVyKGR0LCBpbnRsT3B0cyksXG4gICAgICByZXN1bHRzID0gZGYuZm9ybWF0VG9QYXJ0cygpLFxuICAgICAgbWF0Y2hpbmcgPSByZXN1bHRzLmZpbmQoKG0pID0+IG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBmaWVsZCk7XG4gICAgcmV0dXJuIG1hdGNoaW5nID8gbWF0Y2hpbmcudmFsdWUgOiBudWxsO1xuICB9XG5cbiAgbnVtYmVyRm9ybWF0dGVyKG9wdHMgPSB7fSkge1xuICAgIC8vIHRoaXMgZm9yY2VzaW1wbGUgb3B0aW9uIGlzIG5ldmVyIHVzZWQgKHRoZSBvbmx5IGNhbGxlciBzaG9ydC1jaXJjdWl0cyBvbiBpdCwgYnV0IGl0IHNlZW1zIHNhZmVyIHRvIGxlYXZlKVxuICAgIC8vIChpbiBjb250cmFzdCwgdGhlIHJlc3Qgb2YgdGhlIGNvbmRpdGlvbiBpcyB1c2VkIGhlYXZpbHkpXG4gICAgcmV0dXJuIG5ldyBQb2x5TnVtYmVyRm9ybWF0dGVyKHRoaXMuaW50bCwgb3B0cy5mb3JjZVNpbXBsZSB8fCB0aGlzLmZhc3ROdW1iZXJzLCBvcHRzKTtcbiAgfVxuXG4gIGR0Rm9ybWF0dGVyKGR0LCBpbnRsT3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQb2x5RGF0ZUZvcm1hdHRlcihkdCwgdGhpcy5pbnRsLCBpbnRsT3B0cyk7XG4gIH1cblxuICByZWxGb3JtYXR0ZXIob3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBQb2x5UmVsRm9ybWF0dGVyKHRoaXMuaW50bCwgdGhpcy5pc0VuZ2xpc2goKSwgb3B0cyk7XG4gIH1cblxuICBsaXN0Rm9ybWF0dGVyKG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBnZXRDYWNoZWRMRih0aGlzLmludGwsIG9wdHMpO1xuICB9XG5cbiAgaXNFbmdsaXNoKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmxvY2FsZSA9PT0gXCJlblwiIHx8XG4gICAgICB0aGlzLmxvY2FsZS50b0xvd2VyQ2FzZSgpID09PSBcImVuLXVzXCIgfHxcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KHRoaXMuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlLnN0YXJ0c1dpdGgoXCJlbi11c1wiKVxuICAgICk7XG4gIH1cblxuICBnZXRXZWVrU2V0dGluZ3MoKSB7XG4gICAgaWYgKHRoaXMud2Vla1NldHRpbmdzKSB7XG4gICAgICByZXR1cm4gdGhpcy53ZWVrU2V0dGluZ3M7XG4gICAgfSBlbHNlIGlmICghaGFzTG9jYWxlV2Vla0luZm8oKSkge1xuICAgICAgcmV0dXJuIGZhbGxiYWNrV2Vla1NldHRpbmdzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZ2V0Q2FjaGVkV2Vla0luZm8odGhpcy5sb2NhbGUpO1xuICAgIH1cbiAgfVxuXG4gIGdldFN0YXJ0T2ZXZWVrKCkge1xuICAgIHJldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLmZpcnN0RGF5O1xuICB9XG5cbiAgZ2V0TWluRGF5c0luRmlyc3RXZWVrKCkge1xuICAgIHJldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLm1pbmltYWxEYXlzO1xuICB9XG5cbiAgZ2V0V2Vla2VuZERheXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkud2Vla2VuZDtcbiAgfVxuXG4gIGVxdWFscyhvdGhlcikge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmxvY2FsZSA9PT0gb3RoZXIubG9jYWxlICYmXG4gICAgICB0aGlzLm51bWJlcmluZ1N5c3RlbSA9PT0gb3RoZXIubnVtYmVyaW5nU3lzdGVtICYmXG4gICAgICB0aGlzLm91dHB1dENhbGVuZGFyID09PSBvdGhlci5vdXRwdXRDYWxlbmRhclxuICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBmb3JtYXRPZmZzZXQsIHNpZ25lZE9mZnNldCB9IGZyb20gXCIuLi9pbXBsL3V0aWwuanNcIjtcbmltcG9ydCBab25lIGZyb20gXCIuLi96b25lLmpzXCI7XG5cbmxldCBzaW5nbGV0b24gPSBudWxsO1xuXG4vKipcbiAqIEEgem9uZSB3aXRoIGEgZml4ZWQgb2Zmc2V0IChtZWFuaW5nIG5vIERTVClcbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaXhlZE9mZnNldFpvbmUgZXh0ZW5kcyBab25lIHtcbiAgLyoqXG4gICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBVVENcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgc3RhdGljIGdldCB1dGNJbnN0YW5jZSgpIHtcbiAgICBpZiAoc2luZ2xldG9uID09PSBudWxsKSB7XG4gICAgICBzaW5nbGV0b24gPSBuZXcgRml4ZWRPZmZzZXRab25lKDApO1xuICAgIH1cbiAgICByZXR1cm4gc2luZ2xldG9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpbnN0YW5jZSB3aXRoIGEgc3BlY2lmaWVkIG9mZnNldFxuICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IC0gVGhlIG9mZnNldCBpbiBtaW51dGVzXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBpbnN0YW5jZShvZmZzZXQpIHtcbiAgICByZXR1cm4gb2Zmc2V0ID09PSAwID8gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlIDogbmV3IEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpbnN0YW5jZSBvZiBGaXhlZE9mZnNldFpvbmUgZnJvbSBhIFVUQyBvZmZzZXQgc3RyaW5nLCBsaWtlIFwiVVRDKzZcIlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcyAtIFRoZSBvZmZzZXQgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQys2XCIpXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQyswNlwiKVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMtNjowMFwiKVxuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICBzdGF0aWMgcGFyc2VTcGVjaWZpZXIocykge1xuICAgIGlmIChzKSB7XG4gICAgICBjb25zdCByID0gcy5tYXRjaCgvXnV0Yyg/OihbKy1dXFxkezEsMn0pKD86OihcXGR7Mn0pKT8pPyQvaSk7XG4gICAgICBpZiAocikge1xuICAgICAgICByZXR1cm4gbmV3IEZpeGVkT2Zmc2V0Wm9uZShzaWduZWRPZmZzZXQoclsxXSwgclsyXSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKG9mZnNldCkge1xuICAgIHN1cGVyKCk7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuICAgIHRoaXMuZml4ZWQgPSBvZmZzZXQ7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gXCJmaXhlZFwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZml4ZWQgPT09IDAgPyBcIlVUQ1wiIDogYFVUQyR7Zm9ybWF0T2Zmc2V0KHRoaXMuZml4ZWQsIFwibmFycm93XCIpfWA7XG4gIH1cblxuICBnZXQgaWFuYU5hbWUoKSB7XG4gICAgaWYgKHRoaXMuZml4ZWQgPT09IDApIHtcbiAgICAgIHJldHVybiBcIkV0Yy9VVENcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBFdGMvR01UJHtmb3JtYXRPZmZzZXQoLXRoaXMuZml4ZWQsIFwibmFycm93XCIpfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMuZml4ZWQsIGZvcm1hdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZml4ZWQ7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcImZpeGVkXCIgJiYgb3RoZXJab25lLmZpeGVkID09PSB0aGlzLmZpeGVkO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsICJpbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG4vKipcbiAqIEEgem9uZSB0aGF0IGZhaWxlZCB0byBwYXJzZS4gWW91IHNob3VsZCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIHRoaXMuXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZFpvbmUgZXh0ZW5kcyBab25lIHtcbiAgY29uc3RydWN0b3Ioem9uZU5hbWUpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKiAgQHByaXZhdGUgKi9cbiAgICB0aGlzLnpvbmVOYW1lID0gem9uZU5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gXCJpbnZhbGlkXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy56b25lTmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXROYW1lKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZm9ybWF0T2Zmc2V0KCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0KCkge1xuICAgIHJldHVybiBOYU47XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCAiLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmltcG9ydCBab25lIGZyb20gXCIuLi96b25lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4uL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJbnZhbGlkWm9uZSBmcm9tIFwiLi4vem9uZXMvaW52YWxpZFpvbmUuanNcIjtcblxuaW1wb3J0IHsgaXNVbmRlZmluZWQsIGlzU3RyaW5nLCBpc051bWJlciB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCBTeXN0ZW1ab25lIGZyb20gXCIuLi96b25lcy9zeXN0ZW1ab25lLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVab25lKGlucHV0LCBkZWZhdWx0Wm9uZSkge1xuICBsZXQgb2Zmc2V0O1xuICBpZiAoaXNVbmRlZmluZWQoaW5wdXQpIHx8IGlucHV0ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRab25lO1xuICB9IGVsc2UgaWYgKGlucHV0IGluc3RhbmNlb2YgWm9uZSkge1xuICAgIHJldHVybiBpbnB1dDtcbiAgfSBlbHNlIGlmIChpc1N0cmluZyhpbnB1dCkpIHtcbiAgICBjb25zdCBsb3dlcmVkID0gaW5wdXQudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJlZCA9PT0gXCJkZWZhdWx0XCIpIHJldHVybiBkZWZhdWx0Wm9uZTtcbiAgICBlbHNlIGlmIChsb3dlcmVkID09PSBcImxvY2FsXCIgfHwgbG93ZXJlZCA9PT0gXCJzeXN0ZW1cIikgcmV0dXJuIFN5c3RlbVpvbmUuaW5zdGFuY2U7XG4gICAgZWxzZSBpZiAobG93ZXJlZCA9PT0gXCJ1dGNcIiB8fCBsb3dlcmVkID09PSBcImdtdFwiKSByZXR1cm4gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlO1xuICAgIGVsc2UgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihsb3dlcmVkKSB8fCBJQU5BWm9uZS5jcmVhdGUoaW5wdXQpO1xuICB9IGVsc2UgaWYgKGlzTnVtYmVyKGlucHV0KSkge1xuICAgIHJldHVybiBGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2UoaW5wdXQpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJvYmplY3RcIiAmJiBcIm9mZnNldFwiIGluIGlucHV0ICYmIHR5cGVvZiBpbnB1dC5vZmZzZXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIC8vIFRoaXMgaXMgZHVtYiwgYnV0IHRoZSBpbnN0YW5jZW9mIGNoZWNrIGFib3ZlIGRvZXNuJ3Qgc2VlbSB0byByZWFsbHkgd29ya1xuICAgIC8vIHNvIHdlJ3JlIGR1Y2sgY2hlY2tpbmcgaXRcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBJbnZhbGlkWm9uZShpbnB1dCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgU3lzdGVtWm9uZSBmcm9tIFwiLi96b25lcy9zeXN0ZW1ab25lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vaW1wbC9sb2NhbGUuanNcIjtcblxuaW1wb3J0IHsgbm9ybWFsaXplWm9uZSB9IGZyb20gXCIuL2ltcGwvem9uZVV0aWwuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRlV2Vla1NldHRpbmdzIH0gZnJvbSBcIi4vaW1wbC91dGlsLmpzXCI7XG5cbmxldCBub3cgPSAoKSA9PiBEYXRlLm5vdygpLFxuICBkZWZhdWx0Wm9uZSA9IFwic3lzdGVtXCIsXG4gIGRlZmF1bHRMb2NhbGUgPSBudWxsLFxuICBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtID0gbnVsbCxcbiAgZGVmYXVsdE91dHB1dENhbGVuZGFyID0gbnVsbCxcbiAgdHdvRGlnaXRDdXRvZmZZZWFyID0gNjAsXG4gIHRocm93T25JbnZhbGlkLFxuICBkZWZhdWx0V2Vla1NldHRpbmdzID0gbnVsbDtcblxuLyoqXG4gKiBTZXR0aW5ncyBjb250YWlucyBzdGF0aWMgZ2V0dGVycyBhbmQgc2V0dGVycyB0aGF0IGNvbnRyb2wgTHV4b24ncyBvdmVyYWxsIGJlaGF2aW9yLiBMdXhvbiBpcyBhIHNpbXBsZSBsaWJyYXJ5IHdpdGggZmV3IG9wdGlvbnMsIGJ1dCB0aGUgb25lcyBpdCBkb2VzIGhhdmUgbGl2ZSBoZXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZXR0aW5ncyB7XG4gIC8qKlxuICAgKiBHZXQgdGhlIGNhbGxiYWNrIGZvciByZXR1cm5pbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqL1xuICBzdGF0aWMgZ2V0IG5vdygpIHtcbiAgICByZXR1cm4gbm93O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAqIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyLCB3aGljaCB3aWxsIGJlIGludGVycHJldGVkIGFzIGFuIEVwb2NoIG1pbGxpc2Vjb25kIGNvdW50XG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICogQGV4YW1wbGUgU2V0dGluZ3Mubm93ID0gKCkgPT4gRGF0ZS5ub3coKSArIDMwMDAgLy8gcHJldGVuZCBpdCBpcyAzIHNlY29uZHMgaW4gdGhlIGZ1dHVyZVxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiAwIC8vIGFsd2F5cyBwcmV0ZW5kIGl0J3MgSmFuIDEsIDE5NzAgYXQgbWlkbmlnaHQgaW4gVVRDIHRpbWVcbiAgICovXG4gIHN0YXRpYyBzZXQgbm93KG4pIHtcbiAgICBub3cgPSBuO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCB0aW1lIHpvbmUgdG8gY3JlYXRlIERhdGVUaW1lcyBpbi4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogVXNlIHRoZSB2YWx1ZSBcInN5c3RlbVwiIHRvIHJlc2V0IHRoaXMgdmFsdWUgdG8gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBzZXQgZGVmYXVsdFpvbmUoem9uZSkge1xuICAgIGRlZmF1bHRab25lID0gem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgdGltZSB6b25lIG9iamVjdCBjdXJyZW50bHkgdXNlZCB0byBjcmVhdGUgRGF0ZVRpbWVzLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyB0aGUgc3lzdGVtJ3MgdGltZSB6b25lICh0aGUgb25lIHNldCBvbiB0aGUgbWFjaGluZSB0aGF0IHJ1bnMgdGhpcyBjb2RlKS5cbiAgICogQHR5cGUge1pvbmV9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRab25lKCkge1xuICAgIHJldHVybiBub3JtYWxpemVab25lKGRlZmF1bHRab25lLCBTeXN0ZW1ab25lLmluc3RhbmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgbG9jYWxlIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdExvY2FsZSgpIHtcbiAgICByZXR1cm4gZGVmYXVsdExvY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgbG9jYWxlIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBzZXQgZGVmYXVsdExvY2FsZShsb2NhbGUpIHtcbiAgICBkZWZhdWx0TG9jYWxlID0gbG9jYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSgpIHtcbiAgICByZXR1cm4gZGVmYXVsdE51bWJlcmluZ1N5c3RlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgbnVtYmVyaW5nIHN5c3RlbSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0obnVtYmVyaW5nU3lzdGVtKSB7XG4gICAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bWJlcmluZ1N5c3RlbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgb3V0cHV0IGNhbGVuZGFyIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKCkge1xuICAgIHJldHVybiBkZWZhdWx0T3V0cHV0Q2FsZW5kYXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRPdXRwdXRDYWxlbmRhcihvdXRwdXRDYWxlbmRhcikge1xuICAgIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyO1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IFdlZWtTZXR0aW5nc1xuICAgKiBAcHJvcGVydHkge251bWJlcn0gZmlyc3REYXlcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IG1pbmltYWxEYXlzXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyW119IHdlZWtlbmRcbiAgICovXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1dlZWtTZXR0aW5nc3xudWxsfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0V2Vla1NldHRpbmdzKCkge1xuICAgIHJldHVybiBkZWZhdWx0V2Vla1NldHRpbmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBvdmVycmlkaW5nIHRoZSBkZWZhdWx0IGxvY2FsZSB3ZWVrIHNldHRpbmdzLCBpLmUuIHRoZSBzdGFydCBvZiB0aGUgd2VlaywgdGhlIHdlZWtlbmQgYW5kXG4gICAqIGhvdyBtYW55IGRheXMgYXJlIHJlcXVpcmVkIGluIHRoZSBmaXJzdCB3ZWVrIG9mIGEgeWVhci5cbiAgICogRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtXZWVrU2V0dGluZ3N8bnVsbH0gd2Vla1NldHRpbmdzXG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRXZWVrU2V0dGluZ3Mod2Vla1NldHRpbmdzKSB7XG4gICAgZGVmYXVsdFdlZWtTZXR0aW5ncyA9IHZhbGlkYXRlV2Vla1NldHRpbmdzKHdlZWtTZXR0aW5ncyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjdXRvZmYgeWVhciBhZnRlciB3aGljaCBhIHN0cmluZyBlbmNvZGluZyBhIHllYXIgYXMgdHdvIGRpZ2l0cyBpcyBpbnRlcnByZXRlZCB0byBvY2N1ciBpbiB0aGUgY3VycmVudCBjZW50dXJ5LlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIGdldCB0d29EaWdpdEN1dG9mZlllYXIoKSB7XG4gICAgcmV0dXJuIHR3b0RpZ2l0Q3V0b2ZmWWVhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGN1dG9mZiB5ZWFyIGFmdGVyIHdoaWNoIGEgc3RyaW5nIGVuY29kaW5nIGEgeWVhciBhcyB0d28gZGlnaXRzIGlzIGludGVycHJldGVkIHRvIG9jY3VyIGluIHRoZSBjdXJyZW50IGNlbnR1cnkuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDAgLy8gY3V0LW9mZiB5ZWFyIGlzIDAsIHNvIGFsbCAneXknIGFyZSBpbnRlcnByZXRlZCBhcyBjdXJyZW50IGNlbnR1cnlcbiAgICogQGV4YW1wbGUgU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID0gNTAgLy8gJzQ5JyAtPiAxOTQ5OyAnNTAnIC0+IDIwNTBcbiAgICogQGV4YW1wbGUgU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID0gMTk1MCAvLyBpbnRlcnByZXRlZCBhcyA1MFxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPSAyMDUwIC8vIEFMU08gaW50ZXJwcmV0ZWQgYXMgNTBcbiAgICovXG4gIHN0YXRpYyBzZXQgdHdvRGlnaXRDdXRvZmZZZWFyKGN1dG9mZlllYXIpIHtcbiAgICB0d29EaWdpdEN1dG9mZlllYXIgPSBjdXRvZmZZZWFyICUgMTAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIEx1eG9uIHdpbGwgdGhyb3cgd2hlbiBpdCBlbmNvdW50ZXJzIGludmFsaWQgRGF0ZVRpbWVzLCBEdXJhdGlvbnMsIG9yIEludGVydmFsc1xuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBnZXQgdGhyb3dPbkludmFsaWQoKSB7XG4gICAgcmV0dXJuIHRocm93T25JbnZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB3aGV0aGVyIEx1eG9uIHdpbGwgdGhyb3cgd2hlbiBpdCBlbmNvdW50ZXJzIGludmFsaWQgRGF0ZVRpbWVzLCBEdXJhdGlvbnMsIG9yIEludGVydmFsc1xuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBzZXQgdGhyb3dPbkludmFsaWQodCkge1xuICAgIHRocm93T25JbnZhbGlkID0gdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBMdXhvbidzIGdsb2JhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyByZXNldENhY2hlcygpIHtcbiAgICBMb2NhbGUucmVzZXRDYWNoZSgpO1xuICAgIElBTkFab25lLnJlc2V0Q2FjaGUoKTtcbiAgfVxufVxuIiwgImV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWQge1xuICBjb25zdHJ1Y3RvcihyZWFzb24sIGV4cGxhbmF0aW9uKSB7XG4gICAgdGhpcy5yZWFzb24gPSByZWFzb247XG4gICAgdGhpcy5leHBsYW5hdGlvbiA9IGV4cGxhbmF0aW9uO1xuICB9XG5cbiAgdG9NZXNzYWdlKCkge1xuICAgIGlmICh0aGlzLmV4cGxhbmF0aW9uKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5yZWFzb259OiAke3RoaXMuZXhwbGFuYXRpb259YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVhc29uO1xuICAgIH1cbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIGludGVnZXJCZXR3ZWVuLFxuICBpc0xlYXBZZWFyLFxuICB0aW1lT2JqZWN0LFxuICBkYXlzSW5ZZWFyLFxuICBkYXlzSW5Nb250aCxcbiAgd2Vla3NJbldlZWtZZWFyLFxuICBpc0ludGVnZXIsXG4gIGlzVW5kZWZpbmVkLFxufSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgSW52YWxpZCBmcm9tIFwiLi9pbnZhbGlkLmpzXCI7XG5pbXBvcnQgeyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcblxuY29uc3Qgbm9uTGVhcExhZGRlciA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF0sXG4gIGxlYXBMYWRkZXIgPSBbMCwgMzEsIDYwLCA5MSwgMTIxLCAxNTIsIDE4MiwgMjEzLCAyNDQsIDI3NCwgMzA1LCAzMzVdO1xuXG5mdW5jdGlvbiB1bml0T3V0T2ZSYW5nZSh1bml0LCB2YWx1ZSkge1xuICByZXR1cm4gbmV3IEludmFsaWQoXG4gICAgXCJ1bml0IG91dCBvZiByYW5nZVwiLFxuICAgIGB5b3Ugc3BlY2lmaWVkICR7dmFsdWV9IChvZiB0eXBlICR7dHlwZW9mIHZhbHVlfSkgYXMgYSAke3VuaXR9LCB3aGljaCBpcyBpbnZhbGlkYFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoIC0gMSwgZGF5KSk7XG5cbiAgaWYgKHllYXIgPCAxMDAgJiYgeWVhciA+PSAwKSB7XG4gICAgZC5zZXRVVENGdWxsWWVhcihkLmdldFVUQ0Z1bGxZZWFyKCkgLSAxOTAwKTtcbiAgfVxuXG4gIGNvbnN0IGpzID0gZC5nZXRVVENEYXkoKTtcblxuICByZXR1cm4ganMgPT09IDAgPyA3IDoganM7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgcmV0dXJuIGRheSArIChpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIpW21vbnRoIC0gMV07XG59XG5cbmZ1bmN0aW9uIHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCkge1xuICBjb25zdCB0YWJsZSA9IGlzTGVhcFllYXIoeWVhcikgPyBsZWFwTGFkZGVyIDogbm9uTGVhcExhZGRlcixcbiAgICBtb250aDAgPSB0YWJsZS5maW5kSW5kZXgoKGkpID0+IGkgPCBvcmRpbmFsKSxcbiAgICBkYXkgPSBvcmRpbmFsIC0gdGFibGVbbW9udGgwXTtcbiAgcmV0dXJuIHsgbW9udGg6IG1vbnRoMCArIDEsIGRheSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNvV2Vla2RheVRvTG9jYWwoaXNvV2Vla2RheSwgc3RhcnRPZldlZWspIHtcbiAgcmV0dXJuICgoaXNvV2Vla2RheSAtIHN0YXJ0T2ZXZWVrICsgNykgJSA3KSArIDE7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZ3JlZ29yaWFuVG9XZWVrKGdyZWdPYmosIG1pbkRheXNJbkZpcnN0V2VlayA9IDQsIHN0YXJ0T2ZXZWVrID0gMSkge1xuICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IGdyZWdPYmosXG4gICAgb3JkaW5hbCA9IGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpLFxuICAgIHdlZWtkYXkgPSBpc29XZWVrZGF5VG9Mb2NhbChkYXlPZldlZWsoeWVhciwgbW9udGgsIGRheSksIHN0YXJ0T2ZXZWVrKTtcblxuICBsZXQgd2Vla051bWJlciA9IE1hdGguZmxvb3IoKG9yZGluYWwgLSB3ZWVrZGF5ICsgMTQgLSBtaW5EYXlzSW5GaXJzdFdlZWspIC8gNyksXG4gICAgd2Vla1llYXI7XG5cbiAgaWYgKHdlZWtOdW1iZXIgPCAxKSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyIC0gMTtcbiAgICB3ZWVrTnVtYmVyID0gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKTtcbiAgfSBlbHNlIGlmICh3ZWVrTnVtYmVyID4gd2Vla3NJbldlZWtZZWFyKHllYXIsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspKSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyICsgMTtcbiAgICB3ZWVrTnVtYmVyID0gMTtcbiAgfSBlbHNlIHtcbiAgICB3ZWVrWWVhciA9IHllYXI7XG4gIH1cblxuICByZXR1cm4geyB3ZWVrWWVhciwgd2Vla051bWJlciwgd2Vla2RheSwgLi4udGltZU9iamVjdChncmVnT2JqKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Vla1RvR3JlZ29yaWFuKHdlZWtEYXRhLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3QgeyB3ZWVrWWVhciwgd2Vla051bWJlciwgd2Vla2RheSB9ID0gd2Vla0RhdGEsXG4gICAgd2Vla2RheU9mSmFuNCA9IGlzb1dlZWtkYXlUb0xvY2FsKGRheU9mV2Vlayh3ZWVrWWVhciwgMSwgbWluRGF5c0luRmlyc3RXZWVrKSwgc3RhcnRPZldlZWspLFxuICAgIHllYXJJbkRheXMgPSBkYXlzSW5ZZWFyKHdlZWtZZWFyKTtcblxuICBsZXQgb3JkaW5hbCA9IHdlZWtOdW1iZXIgKiA3ICsgd2Vla2RheSAtIHdlZWtkYXlPZkphbjQgLSA3ICsgbWluRGF5c0luRmlyc3RXZWVrLFxuICAgIHllYXI7XG5cbiAgaWYgKG9yZGluYWwgPCAxKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyIC0gMTtcbiAgICBvcmRpbmFsICs9IGRheXNJblllYXIoeWVhcik7XG4gIH0gZWxzZSBpZiAob3JkaW5hbCA+IHllYXJJbkRheXMpIHtcbiAgICB5ZWFyID0gd2Vla1llYXIgKyAxO1xuICAgIG9yZGluYWwgLT0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG4gIH0gZWxzZSB7XG4gICAgeWVhciA9IHdlZWtZZWFyO1xuICB9XG5cbiAgY29uc3QgeyBtb250aCwgZGF5IH0gPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpO1xuICByZXR1cm4geyB5ZWFyLCBtb250aCwgZGF5LCAuLi50aW1lT2JqZWN0KHdlZWtEYXRhKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3JlZ29yaWFuVG9PcmRpbmFsKGdyZWdEYXRhKSB7XG4gIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gZ3JlZ0RhdGE7XG4gIGNvbnN0IG9yZGluYWwgPSBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KTtcbiAgcmV0dXJuIHsgeWVhciwgb3JkaW5hbCwgLi4udGltZU9iamVjdChncmVnRGF0YSkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9yZGluYWxUb0dyZWdvcmlhbihvcmRpbmFsRGF0YSkge1xuICBjb25zdCB7IHllYXIsIG9yZGluYWwgfSA9IG9yZGluYWxEYXRhO1xuICBjb25zdCB7IG1vbnRoLCBkYXkgfSA9IHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCk7XG4gIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXksIC4uLnRpbWVPYmplY3Qob3JkaW5hbERhdGEpIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgbG9jYWwgd2VlayB1bml0cyBsaWtlIGxvY2FsV2Vla2RheSBhcmUgdXNlZCBpbiBvYmouXG4gKiBJZiBzbywgdmFsaWRhdGVzIHRoYXQgdGhleSBhcmUgbm90IG1peGVkIHdpdGggSVNPIHdlZWsgdW5pdHMgYW5kIHRoZW4gY29waWVzIHRoZW0gdG8gdGhlIG5vcm1hbCB3ZWVrIHVuaXQgcHJvcGVydGllcy5cbiAqIE1vZGlmaWVzIG9iaiBpbi1wbGFjZSFcbiAqIEBwYXJhbSBvYmogdGhlIG9iamVjdCB2YWx1ZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZXNMb2NhbFdlZWtWYWx1ZXMob2JqLCBsb2MpIHtcbiAgY29uc3QgaGFzTG9jYWxlV2Vla0RhdGEgPVxuICAgICFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrZGF5KSB8fFxuICAgICFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrTnVtYmVyKSB8fFxuICAgICFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrWWVhcik7XG4gIGlmIChoYXNMb2NhbGVXZWVrRGF0YSkge1xuICAgIGNvbnN0IGhhc0lzb1dlZWtEYXRhID1cbiAgICAgICFpc1VuZGVmaW5lZChvYmoud2Vla2RheSkgfHwgIWlzVW5kZWZpbmVkKG9iai53ZWVrTnVtYmVyKSB8fCAhaXNVbmRlZmluZWQob2JqLndlZWtZZWFyKTtcblxuICAgIGlmIChoYXNJc29XZWVrRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbm5vdCBtaXggbG9jYWxlLWJhc2VkIHdlZWsgZmllbGRzIHdpdGggSVNPLWJhc2VkIHdlZWsgZmllbGRzXCJcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICghaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla2RheSkpIG9iai53ZWVrZGF5ID0gb2JqLmxvY2FsV2Vla2RheTtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtOdW1iZXIpKSBvYmoud2Vla051bWJlciA9IG9iai5sb2NhbFdlZWtOdW1iZXI7XG4gICAgaWYgKCFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrWWVhcikpIG9iai53ZWVrWWVhciA9IG9iai5sb2NhbFdlZWtZZWFyO1xuICAgIGRlbGV0ZSBvYmoubG9jYWxXZWVrZGF5O1xuICAgIGRlbGV0ZSBvYmoubG9jYWxXZWVrTnVtYmVyO1xuICAgIGRlbGV0ZSBvYmoubG9jYWxXZWVrWWVhcjtcbiAgICByZXR1cm4ge1xuICAgICAgbWluRGF5c0luRmlyc3RXZWVrOiBsb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksXG4gICAgICBzdGFydE9mV2VlazogbG9jLmdldFN0YXJ0T2ZXZWVrKCksXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyBtaW5EYXlzSW5GaXJzdFdlZWs6IDQsIHN0YXJ0T2ZXZWVrOiAxIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRXZWVrRGF0YShvYmosIG1pbkRheXNJbkZpcnN0V2VlayA9IDQsIHN0YXJ0T2ZXZWVrID0gMSkge1xuICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLndlZWtZZWFyKSxcbiAgICB2YWxpZFdlZWsgPSBpbnRlZ2VyQmV0d2VlbihcbiAgICAgIG9iai53ZWVrTnVtYmVyLFxuICAgICAgMSxcbiAgICAgIHdlZWtzSW5XZWVrWWVhcihvYmoud2Vla1llYXIsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspXG4gICAgKSxcbiAgICB2YWxpZFdlZWtkYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmoud2Vla2RheSwgMSwgNyk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ3ZWVrWWVhclwiLCBvYmoud2Vla1llYXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZFdlZWspIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ3ZWVrXCIsIG9iai53ZWVrTnVtYmVyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRXZWVrZGF5KSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla2RheVwiLCBvYmoud2Vla2RheSk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkT3JkaW5hbERhdGEob2JqKSB7XG4gIGNvbnN0IHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoueWVhciksXG4gICAgdmFsaWRPcmRpbmFsID0gaW50ZWdlckJldHdlZW4ob2JqLm9yZGluYWwsIDEsIGRheXNJblllYXIob2JqLnllYXIpKTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInllYXJcIiwgb2JqLnllYXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE9yZGluYWwpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJvcmRpbmFsXCIsIG9iai5vcmRpbmFsKTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG9iaikge1xuICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLFxuICAgIHZhbGlkTW9udGggPSBpbnRlZ2VyQmV0d2VlbihvYmoubW9udGgsIDEsIDEyKSxcbiAgICB2YWxpZERheSA9IGludGVnZXJCZXR3ZWVuKG9iai5kYXksIDEsIGRheXNJbk1vbnRoKG9iai55ZWFyLCBvYmoubW9udGgpKTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInllYXJcIiwgb2JqLnllYXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1vbnRoKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibW9udGhcIiwgb2JqLm1vbnRoKTtcbiAgfSBlbHNlIGlmICghdmFsaWREYXkpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJkYXlcIiwgb2JqLmRheSk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkVGltZURhdGEob2JqKSB7XG4gIGNvbnN0IHsgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0gPSBvYmo7XG4gIGNvbnN0IHZhbGlkSG91ciA9XG4gICAgICBpbnRlZ2VyQmV0d2Vlbihob3VyLCAwLCAyMykgfHxcbiAgICAgIChob3VyID09PSAyNCAmJiBtaW51dGUgPT09IDAgJiYgc2Vjb25kID09PSAwICYmIG1pbGxpc2Vjb25kID09PSAwKSxcbiAgICB2YWxpZE1pbnV0ZSA9IGludGVnZXJCZXR3ZWVuKG1pbnV0ZSwgMCwgNTkpLFxuICAgIHZhbGlkU2Vjb25kID0gaW50ZWdlckJldHdlZW4oc2Vjb25kLCAwLCA1OSksXG4gICAgdmFsaWRNaWxsaXNlY29uZCA9IGludGVnZXJCZXR3ZWVuKG1pbGxpc2Vjb25kLCAwLCA5OTkpO1xuXG4gIGlmICghdmFsaWRIb3VyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwiaG91clwiLCBob3VyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRNaW51dGUpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtaW51dGVcIiwgbWludXRlKTtcbiAgfSBlbHNlIGlmICghdmFsaWRTZWNvbmQpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJzZWNvbmRcIiwgc2Vjb25kKTtcbiAgfSBlbHNlIGlmICghdmFsaWRNaWxsaXNlY29uZCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1pbGxpc2Vjb25kXCIsIG1pbGxpc2Vjb25kKTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcbn1cbiIsICIvKlxuICBUaGlzIGlzIGp1c3QgYSBqdW5rIGRyYXdlciwgY29udGFpbmluZyBhbnl0aGluZyB1c2VkIGFjcm9zcyBtdWx0aXBsZSBjbGFzc2VzLlxuICBCZWNhdXNlIEx1eG9uIGlzIHNtYWxsKGlzaCksIHRoaXMgc2hvdWxkIHN0YXkgc21hbGwgYW5kIHdlIHdvbid0IHdvcnJ5IGFib3V0IHNwbGl0dGluZ1xuICBpdCB1cCBpbnRvLCBzYXksIHBhcnNpbmdVdGlsLmpzIGFuZCBiYXNpY1V0aWwuanMgYW5kIHNvIG9uLiBCdXQgdGhleSBhcmUgZGl2aWRlZCB1cCBieSBmZWF0dXJlIGFyZWEuXG4qL1xuXG5pbXBvcnQgeyBJbnZhbGlkQXJndW1lbnRFcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCB7IGRheU9mV2VlaywgaXNvV2Vla2RheVRvTG9jYWwgfSBmcm9tIFwiLi9jb252ZXJzaW9ucy5qc1wiO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuLy8gVFlQRVNcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVW5kZWZpbmVkKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcInVuZGVmaW5lZFwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVnZXIobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwibnVtYmVyXCIgJiYgbyAlIDEgPT09IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyhvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0ZShvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykgPT09IFwiW29iamVjdCBEYXRlXVwiO1xufVxuXG4vLyBDQVBBQklMSVRJRVNcblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1JlbGF0aXZlKCkge1xuICB0cnkge1xuICAgIHJldHVybiB0eXBlb2YgSW50bCAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhIUludGwuUmVsYXRpdmVUaW1lRm9ybWF0O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNMb2NhbGVXZWVrSW5mbygpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gKFxuICAgICAgdHlwZW9mIEludGwgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAgICEhSW50bC5Mb2NhbGUgJiZcbiAgICAgIChcIndlZWtJbmZvXCIgaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlIHx8IFwiZ2V0V2Vla0luZm9cIiBpbiBJbnRsLkxvY2FsZS5wcm90b3R5cGUpXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBPQkpFQ1RTIEFORCBBUlJBWVNcblxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlQXJyYXkodGhpbmcpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcpID8gdGhpbmcgOiBbdGhpbmddO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmVzdEJ5KGFyciwgYnksIGNvbXBhcmUpIHtcbiAgaWYgKGFyci5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBhcnIucmVkdWNlKChiZXN0LCBuZXh0KSA9PiB7XG4gICAgY29uc3QgcGFpciA9IFtieShuZXh0KSwgbmV4dF07XG4gICAgaWYgKCFiZXN0KSB7XG4gICAgICByZXR1cm4gcGFpcjtcbiAgICB9IGVsc2UgaWYgKGNvbXBhcmUoYmVzdFswXSwgcGFpclswXSkgPT09IGJlc3RbMF0pIHtcbiAgICAgIHJldHVybiBiZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFpcjtcbiAgICB9XG4gIH0sIG51bGwpWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGljayhvYmosIGtleXMpIHtcbiAgcmV0dXJuIGtleXMucmVkdWNlKChhLCBrKSA9PiB7XG4gICAgYVtrXSA9IG9ialtrXTtcbiAgICByZXR1cm4gYTtcbiAgfSwge30pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlV2Vla1NldHRpbmdzKHNldHRpbmdzKSB7XG4gIGlmIChzZXR0aW5ncyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHNldHRpbmdzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiV2VlayBzZXR0aW5ncyBtdXN0IGJlIGFuIG9iamVjdFwiKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoXG4gICAgICAhaW50ZWdlckJldHdlZW4oc2V0dGluZ3MuZmlyc3REYXksIDEsIDcpIHx8XG4gICAgICAhaW50ZWdlckJldHdlZW4oc2V0dGluZ3MubWluaW1hbERheXMsIDEsIDcpIHx8XG4gICAgICAhQXJyYXkuaXNBcnJheShzZXR0aW5ncy53ZWVrZW5kKSB8fFxuICAgICAgc2V0dGluZ3Mud2Vla2VuZC5zb21lKCh2KSA9PiAhaW50ZWdlckJldHdlZW4odiwgMSwgNykpXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJJbnZhbGlkIHdlZWsgc2V0dGluZ3NcIik7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBmaXJzdERheTogc2V0dGluZ3MuZmlyc3REYXksXG4gICAgICBtaW5pbWFsRGF5czogc2V0dGluZ3MubWluaW1hbERheXMsXG4gICAgICB3ZWVrZW5kOiBBcnJheS5mcm9tKHNldHRpbmdzLndlZWtlbmQpLFxuICAgIH07XG4gIH1cbn1cblxuLy8gTlVNQkVSUyBBTkQgU1RSSU5HU1xuXG5leHBvcnQgZnVuY3Rpb24gaW50ZWdlckJldHdlZW4odGhpbmcsIGJvdHRvbSwgdG9wKSB7XG4gIHJldHVybiBpc0ludGVnZXIodGhpbmcpICYmIHRoaW5nID49IGJvdHRvbSAmJiB0aGluZyA8PSB0b3A7XG59XG5cbi8vIHggJSBuIGJ1dCB0YWtlcyB0aGUgc2lnbiBvZiBuIGluc3RlYWQgb2YgeFxuZXhwb3J0IGZ1bmN0aW9uIGZsb29yTW9kKHgsIG4pIHtcbiAgcmV0dXJuIHggLSBuICogTWF0aC5mbG9vcih4IC8gbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYWRTdGFydChpbnB1dCwgbiA9IDIpIHtcbiAgY29uc3QgaXNOZWcgPSBpbnB1dCA8IDA7XG4gIGxldCBwYWRkZWQ7XG4gIGlmIChpc05lZykge1xuICAgIHBhZGRlZCA9IFwiLVwiICsgKFwiXCIgKyAtaW5wdXQpLnBhZFN0YXJ0KG4sIFwiMFwiKTtcbiAgfSBlbHNlIHtcbiAgICBwYWRkZWQgPSAoXCJcIiArIGlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH1cbiAgcmV0dXJuIHBhZGRlZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSW50ZWdlcihzdHJpbmcpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHN0cmluZywgMTApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZsb2F0aW5nKHN0cmluZykge1xuICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChzdHJpbmcpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZU1pbGxpcyhmcmFjdGlvbikge1xuICAvLyBSZXR1cm4gdW5kZWZpbmVkIChpbnN0ZWFkIG9mIDApIGluIHRoZXNlIGNhc2VzLCB3aGVyZSBmcmFjdGlvbiBpcyBub3Qgc2V0XG4gIGlmIChpc1VuZGVmaW5lZChmcmFjdGlvbikgfHwgZnJhY3Rpb24gPT09IG51bGwgfHwgZnJhY3Rpb24gPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGYgPSBwYXJzZUZsb2F0KFwiMC5cIiArIGZyYWN0aW9uKSAqIDEwMDA7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kVG8obnVtYmVyLCBkaWdpdHMsIHRvd2FyZFplcm8gPSBmYWxzZSkge1xuICBjb25zdCBmYWN0b3IgPSAxMCAqKiBkaWdpdHMsXG4gICAgcm91bmRlciA9IHRvd2FyZFplcm8gPyBNYXRoLnRydW5jIDogTWF0aC5yb3VuZDtcbiAgcmV0dXJuIHJvdW5kZXIobnVtYmVyICogZmFjdG9yKSAvIGZhY3Rvcjtcbn1cblxuLy8gREFURSBCQVNJQ1NcblxuZXhwb3J0IGZ1bmN0aW9uIGlzTGVhcFllYXIoeWVhcikge1xuICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgKHllYXIgJSAxMDAgIT09IDAgfHwgeWVhciAlIDQwMCA9PT0gMCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXlzSW5ZZWFyKHllYXIpIHtcbiAgcmV0dXJuIGlzTGVhcFllYXIoeWVhcikgPyAzNjYgOiAzNjU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICBjb25zdCBtb2RNb250aCA9IGZsb29yTW9kKG1vbnRoIC0gMSwgMTIpICsgMSxcbiAgICBtb2RZZWFyID0geWVhciArIChtb250aCAtIG1vZE1vbnRoKSAvIDEyO1xuXG4gIGlmIChtb2RNb250aCA9PT0gMikge1xuICAgIHJldHVybiBpc0xlYXBZZWFyKG1vZFllYXIpID8gMjkgOiAyODtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gWzMxLCBudWxsLCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9kTW9udGggLSAxXTtcbiAgfVxufVxuXG4vLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgbG9jYWwgdGltZXN0YW1wIChlcG9jaCwgYnV0IHdpdGggdGhlIG9mZnNldCBiYWtlZCBpbilcbmV4cG9ydCBmdW5jdGlvbiBvYmpUb0xvY2FsVFMob2JqKSB7XG4gIGxldCBkID0gRGF0ZS5VVEMoXG4gICAgb2JqLnllYXIsXG4gICAgb2JqLm1vbnRoIC0gMSxcbiAgICBvYmouZGF5LFxuICAgIG9iai5ob3VyLFxuICAgIG9iai5taW51dGUsXG4gICAgb2JqLnNlY29uZCxcbiAgICBvYmoubWlsbGlzZWNvbmRcbiAgKTtcblxuICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMsIHllYXJzIGJldHdlZW4gMCBhbmQgOTkgYXJlIGludGVycHJldGVkIGFzIDE5WFg7IHJldmVydCB0aGF0XG4gIGlmIChvYmoueWVhciA8IDEwMCAmJiBvYmoueWVhciA+PSAwKSB7XG4gICAgZCA9IG5ldyBEYXRlKGQpO1xuICAgIC8vIHNldCB0aGUgbW9udGggYW5kIGRheSBhZ2FpbiwgdGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSB5ZWFyIDIwMDAgaXMgYSBsZWFwIHllYXIsIGJ1dCB5ZWFyIDEwMCBpcyBub3RcbiAgICAvLyBzbyBpZiBvYmoueWVhciBpcyBpbiA5OSwgYnV0IG9iai5kYXkgbWFrZXMgaXQgcm9sbCBvdmVyIGludG8geWVhciAxMDAsXG4gICAgLy8gdGhlIGNhbGN1bGF0aW9ucyBkb25lIGJ5IERhdGUuVVRDIGFyZSB1c2luZyB5ZWFyIDIwMDAgLSB3aGljaCBpcyBpbmNvcnJlY3RcbiAgICBkLnNldFVUQ0Z1bGxZZWFyKG9iai55ZWFyLCBvYmoubW9udGggLSAxLCBvYmouZGF5KTtcbiAgfVxuICByZXR1cm4gK2Q7XG59XG5cbi8vIGFkYXB0ZWQgZnJvbSBtb21lbnQuanM6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2Jsb2IvMDAwYWMxODAwZTYyMGY3NzBmNGViMzFiNWFlOTA4ZjYxNjdiMGFiMi9zcmMvbGliL3VuaXRzL3dlZWstY2FsZW5kYXItdXRpbHMuanNcbmZ1bmN0aW9uIGZpcnN0V2Vla09mZnNldCh5ZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKSB7XG4gIGNvbnN0IGZ3ZGx3ID0gaXNvV2Vla2RheVRvTG9jYWwoZGF5T2ZXZWVrKHllYXIsIDEsIG1pbkRheXNJbkZpcnN0V2VlayksIHN0YXJ0T2ZXZWVrKTtcbiAgcmV0dXJuIC1md2RsdyArIG1pbkRheXNJbkZpcnN0V2VlayAtIDE7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIsIG1pbkRheXNJbkZpcnN0V2VlayA9IDQsIHN0YXJ0T2ZXZWVrID0gMSkge1xuICBjb25zdCB3ZWVrT2Zmc2V0ID0gZmlyc3RXZWVrT2Zmc2V0KHdlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKTtcbiAgY29uc3Qgd2Vla09mZnNldE5leHQgPSBmaXJzdFdlZWtPZmZzZXQod2Vla1llYXIgKyAxLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKTtcbiAgcmV0dXJuIChkYXlzSW5ZZWFyKHdlZWtZZWFyKSAtIHdlZWtPZmZzZXQgKyB3ZWVrT2Zmc2V0TmV4dCkgLyA3O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdW50cnVuY2F0ZVllYXIoeWVhcikge1xuICBpZiAoeWVhciA+IDk5KSB7XG4gICAgcmV0dXJuIHllYXI7XG4gIH0gZWxzZSByZXR1cm4geWVhciA+IFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA/IDE5MDAgKyB5ZWFyIDogMjAwMCArIHllYXI7XG59XG5cbi8vIFBBUlNJTkdcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlWm9uZUluZm8odHMsIG9mZnNldEZvcm1hdCwgbG9jYWxlLCB0aW1lWm9uZSA9IG51bGwpIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKSxcbiAgICBpbnRsT3B0cyA9IHtcbiAgICAgIGhvdXJDeWNsZTogXCJoMjNcIixcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgZGF5OiBcIjItZGlnaXRcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICB9O1xuXG4gIGlmICh0aW1lWm9uZSkge1xuICAgIGludGxPcHRzLnRpbWVab25lID0gdGltZVpvbmU7XG4gIH1cblxuICBjb25zdCBtb2RpZmllZCA9IHsgdGltZVpvbmVOYW1lOiBvZmZzZXRGb3JtYXQsIC4uLmludGxPcHRzIH07XG5cbiAgY29uc3QgcGFyc2VkID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jYWxlLCBtb2RpZmllZClcbiAgICAuZm9ybWF0VG9QYXJ0cyhkYXRlKVxuICAgIC5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJ0aW1lem9uZW5hbWVcIik7XG4gIHJldHVybiBwYXJzZWQgPyBwYXJzZWQudmFsdWUgOiBudWxsO1xufVxuXG4vLyBzaWduZWRPZmZzZXQoJy01JywgJzMwJykgLT4gLTMzMFxuZXhwb3J0IGZ1bmN0aW9uIHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpIHtcbiAgbGV0IG9mZkhvdXIgPSBwYXJzZUludChvZmZIb3VyU3RyLCAxMCk7XG5cbiAgLy8gZG9uJ3QgfHwgdGhpcyBiZWNhdXNlIHdlIHdhbnQgdG8gcHJlc2VydmUgLTBcbiAgaWYgKE51bWJlci5pc05hTihvZmZIb3VyKSkge1xuICAgIG9mZkhvdXIgPSAwO1xuICB9XG5cbiAgY29uc3Qgb2ZmTWluID0gcGFyc2VJbnQob2ZmTWludXRlU3RyLCAxMCkgfHwgMCxcbiAgICBvZmZNaW5TaWduZWQgPSBvZmZIb3VyIDwgMCB8fCBPYmplY3QuaXMob2ZmSG91ciwgLTApID8gLW9mZk1pbiA6IG9mZk1pbjtcbiAgcmV0dXJuIG9mZkhvdXIgKiA2MCArIG9mZk1pblNpZ25lZDtcbn1cblxuLy8gQ09FUkNJT05cblxuZXhwb3J0IGZ1bmN0aW9uIGFzTnVtYmVyKHZhbHVlKSB7XG4gIGNvbnN0IG51bWVyaWNWYWx1ZSA9IE51bWJlcih2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiIHx8IHZhbHVlID09PSBcIlwiIHx8IE51bWJlci5pc05hTihudW1lcmljVmFsdWUpKVxuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihgSW52YWxpZCB1bml0IHZhbHVlICR7dmFsdWV9YCk7XG4gIHJldHVybiBudW1lcmljVmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVyKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7fTtcbiAgZm9yIChjb25zdCB1IGluIG9iaikge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eShvYmosIHUpKSB7XG4gICAgICBjb25zdCB2ID0gb2JqW3VdO1xuICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCB8fCB2ID09PSBudWxsKSBjb250aW51ZTtcbiAgICAgIG5vcm1hbGl6ZWRbbm9ybWFsaXplcih1KV0gPSBhc051bWJlcih2KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRPZmZzZXQob2Zmc2V0LCBmb3JtYXQpIHtcbiAgY29uc3QgaG91cnMgPSBNYXRoLnRydW5jKE1hdGguYWJzKG9mZnNldCAvIDYwKSksXG4gICAgbWludXRlcyA9IE1hdGgudHJ1bmMoTWF0aC5hYnMob2Zmc2V0ICUgNjApKSxcbiAgICBzaWduID0gb2Zmc2V0ID49IDAgPyBcIitcIiA6IFwiLVwiO1xuXG4gIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gYCR7c2lnbn0ke3BhZFN0YXJ0KGhvdXJzLCAyKX06JHtwYWRTdGFydChtaW51dGVzLCAyKX1gO1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBgJHtzaWdufSR7aG91cnN9JHttaW51dGVzID4gMCA/IGA6JHttaW51dGVzfWAgOiBcIlwifWA7XG4gICAgY2FzZSBcInRlY2hpZVwiOlxuICAgICAgcmV0dXJuIGAke3NpZ259JHtwYWRTdGFydChob3VycywgMil9JHtwYWRTdGFydChtaW51dGVzLCAyKX1gO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVmFsdWUgZm9ybWF0ICR7Zm9ybWF0fSBpcyBvdXQgb2YgcmFuZ2UgZm9yIHByb3BlcnR5IGZvcm1hdGApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lT2JqZWN0KG9iaikge1xuICByZXR1cm4gcGljayhvYmosIFtcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXSk7XG59XG4iLCAiaW1wb3J0ICogYXMgRm9ybWF0cyBmcm9tIFwiLi9mb3JtYXRzLmpzXCI7XG5pbXBvcnQgeyBwaWNrIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuXG5mdW5jdGlvbiBzdHJpbmdpZnkob2JqKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIE9iamVjdC5rZXlzKG9iaikuc29ydCgpKTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBjb25zdCBtb250aHNMb25nID0gW1xuICBcIkphbnVhcnlcIixcbiAgXCJGZWJydWFyeVwiLFxuICBcIk1hcmNoXCIsXG4gIFwiQXByaWxcIixcbiAgXCJNYXlcIixcbiAgXCJKdW5lXCIsXG4gIFwiSnVseVwiLFxuICBcIkF1Z3VzdFwiLFxuICBcIlNlcHRlbWJlclwiLFxuICBcIk9jdG9iZXJcIixcbiAgXCJOb3ZlbWJlclwiLFxuICBcIkRlY2VtYmVyXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgbW9udGhzU2hvcnQgPSBbXG4gIFwiSmFuXCIsXG4gIFwiRmViXCIsXG4gIFwiTWFyXCIsXG4gIFwiQXByXCIsXG4gIFwiTWF5XCIsXG4gIFwiSnVuXCIsXG4gIFwiSnVsXCIsXG4gIFwiQXVnXCIsXG4gIFwiU2VwXCIsXG4gIFwiT2N0XCIsXG4gIFwiTm92XCIsXG4gIFwiRGVjXCIsXG5dO1xuXG5leHBvcnQgY29uc3QgbW9udGhzTmFycm93ID0gW1wiSlwiLCBcIkZcIiwgXCJNXCIsIFwiQVwiLCBcIk1cIiwgXCJKXCIsIFwiSlwiLCBcIkFcIiwgXCJTXCIsIFwiT1wiLCBcIk5cIiwgXCJEXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gbW9udGhzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbLi4ubW9udGhzTmFycm93XTtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbLi4ubW9udGhzU2hvcnRdO1xuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gWy4uLm1vbnRoc0xvbmddO1xuICAgIGNhc2UgXCJudW1lcmljXCI6XG4gICAgICByZXR1cm4gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiLCBcIjhcIiwgXCI5XCIsIFwiMTBcIiwgXCIxMVwiLCBcIjEyXCJdO1xuICAgIGNhc2UgXCIyLWRpZ2l0XCI6XG4gICAgICByZXR1cm4gW1wiMDFcIiwgXCIwMlwiLCBcIjAzXCIsIFwiMDRcIiwgXCIwNVwiLCBcIjA2XCIsIFwiMDdcIiwgXCIwOFwiLCBcIjA5XCIsIFwiMTBcIiwgXCIxMVwiLCBcIjEyXCJdO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgd2Vla2RheXNMb25nID0gW1xuICBcIk1vbmRheVwiLFxuICBcIlR1ZXNkYXlcIixcbiAgXCJXZWRuZXNkYXlcIixcbiAgXCJUaHVyc2RheVwiLFxuICBcIkZyaWRheVwiLFxuICBcIlNhdHVyZGF5XCIsXG4gIFwiU3VuZGF5XCIsXG5dO1xuXG5leHBvcnQgY29uc3Qgd2Vla2RheXNTaG9ydCA9IFtcIk1vblwiLCBcIlR1ZVwiLCBcIldlZFwiLCBcIlRodVwiLCBcIkZyaVwiLCBcIlNhdFwiLCBcIlN1blwiXTtcblxuZXhwb3J0IGNvbnN0IHdlZWtkYXlzTmFycm93ID0gW1wiTVwiLCBcIlRcIiwgXCJXXCIsIFwiVFwiLCBcIkZcIiwgXCJTXCIsIFwiU1wiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHdlZWtkYXlzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbLi4ud2Vla2RheXNOYXJyb3ddO1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFsuLi53ZWVrZGF5c1Nob3J0XTtcbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFsuLi53ZWVrZGF5c0xvbmddO1xuICAgIGNhc2UgXCJudW1lcmljXCI6XG4gICAgICByZXR1cm4gW1wiMVwiLCBcIjJcIiwgXCIzXCIsIFwiNFwiLCBcIjVcIiwgXCI2XCIsIFwiN1wiXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IG1lcmlkaWVtcyA9IFtcIkFNXCIsIFwiUE1cIl07XG5cbmV4cG9ydCBjb25zdCBlcmFzTG9uZyA9IFtcIkJlZm9yZSBDaHJpc3RcIiwgXCJBbm5vIERvbWluaVwiXTtcblxuZXhwb3J0IGNvbnN0IGVyYXNTaG9ydCA9IFtcIkJDXCIsIFwiQURcIl07XG5cbmV4cG9ydCBjb25zdCBlcmFzTmFycm93ID0gW1wiQlwiLCBcIkFcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBlcmFzKGxlbmd0aCkge1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgXCJuYXJyb3dcIjpcbiAgICAgIHJldHVybiBbLi4uZXJhc05hcnJvd107XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gWy4uLmVyYXNTaG9ydF07XG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbLi4uZXJhc0xvbmddO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWVyaWRpZW1Gb3JEYXRlVGltZShkdCkge1xuICByZXR1cm4gbWVyaWRpZW1zW2R0LmhvdXIgPCAxMiA/IDAgOiAxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiB3ZWVrZGF5cyhsZW5ndGgpW2R0LndlZWtkYXkgLSAxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gbW9udGhzKGxlbmd0aClbZHQubW9udGggLSAxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVyYUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGVyYXMobGVuZ3RoKVtkdC55ZWFyIDwgMCA/IDAgOiAxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlVGltZSh1bml0LCBjb3VudCwgbnVtZXJpYyA9IFwiYWx3YXlzXCIsIG5hcnJvdyA9IGZhbHNlKSB7XG4gIGNvbnN0IHVuaXRzID0ge1xuICAgIHllYXJzOiBbXCJ5ZWFyXCIsIFwieXIuXCJdLFxuICAgIHF1YXJ0ZXJzOiBbXCJxdWFydGVyXCIsIFwicXRyLlwiXSxcbiAgICBtb250aHM6IFtcIm1vbnRoXCIsIFwibW8uXCJdLFxuICAgIHdlZWtzOiBbXCJ3ZWVrXCIsIFwid2suXCJdLFxuICAgIGRheXM6IFtcImRheVwiLCBcImRheVwiLCBcImRheXNcIl0sXG4gICAgaG91cnM6IFtcImhvdXJcIiwgXCJoci5cIl0sXG4gICAgbWludXRlczogW1wibWludXRlXCIsIFwibWluLlwiXSxcbiAgICBzZWNvbmRzOiBbXCJzZWNvbmRcIiwgXCJzZWMuXCJdLFxuICB9O1xuXG4gIGNvbnN0IGxhc3RhYmxlID0gW1wiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiXS5pbmRleE9mKHVuaXQpID09PSAtMTtcblxuICBpZiAobnVtZXJpYyA9PT0gXCJhdXRvXCIgJiYgbGFzdGFibGUpIHtcbiAgICBjb25zdCBpc0RheSA9IHVuaXQgPT09IFwiZGF5c1wiO1xuICAgIHN3aXRjaCAoY291bnQpIHtcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ0b21vcnJvd1wiIDogYG5leHQgJHt1bml0c1t1bml0XVswXX1gO1xuICAgICAgY2FzZSAtMTpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ5ZXN0ZXJkYXlcIiA6IGBsYXN0ICR7dW5pdHNbdW5pdF1bMF19YDtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGlzRGF5ID8gXCJ0b2RheVwiIDogYHRoaXMgJHt1bml0c1t1bml0XVswXX1gO1xuICAgICAgZGVmYXVsdDogLy8gZmFsbCB0aHJvdWdoXG4gICAgfVxuICB9XG5cbiAgY29uc3QgaXNJblBhc3QgPSBPYmplY3QuaXMoY291bnQsIC0wKSB8fCBjb3VudCA8IDAsXG4gICAgZm10VmFsdWUgPSBNYXRoLmFicyhjb3VudCksXG4gICAgc2luZ3VsYXIgPSBmbXRWYWx1ZSA9PT0gMSxcbiAgICBsaWxVbml0cyA9IHVuaXRzW3VuaXRdLFxuICAgIGZtdFVuaXQgPSBuYXJyb3dcbiAgICAgID8gc2luZ3VsYXJcbiAgICAgICAgPyBsaWxVbml0c1sxXVxuICAgICAgICA6IGxpbFVuaXRzWzJdIHx8IGxpbFVuaXRzWzFdXG4gICAgICA6IHNpbmd1bGFyXG4gICAgICA/IHVuaXRzW3VuaXRdWzBdXG4gICAgICA6IHVuaXQ7XG4gIHJldHVybiBpc0luUGFzdCA/IGAke2ZtdFZhbHVlfSAke2ZtdFVuaXR9IGFnb2AgOiBgaW4gJHtmbXRWYWx1ZX0gJHtmbXRVbml0fWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTdHJpbmcoa25vd25Gb3JtYXQpIHtcbiAgLy8gdGhlc2UgYWxsIGhhdmUgdGhlIG9mZnNldHMgcmVtb3ZlZCBiZWNhdXNlIHdlIGRvbid0IGhhdmUgYWNjZXNzIHRvIHRoZW1cbiAgLy8gd2l0aG91dCBhbGwgdGhlIGludGwgc3R1ZmYgdGhpcyBpcyBiYWNrZmlsbGluZ1xuICBjb25zdCBmaWx0ZXJlZCA9IHBpY2soa25vd25Gb3JtYXQsIFtcbiAgICAgIFwid2Vla2RheVwiLFxuICAgICAgXCJlcmFcIixcbiAgICAgIFwieWVhclwiLFxuICAgICAgXCJtb250aFwiLFxuICAgICAgXCJkYXlcIixcbiAgICAgIFwiaG91clwiLFxuICAgICAgXCJtaW51dGVcIixcbiAgICAgIFwic2Vjb25kXCIsXG4gICAgICBcInRpbWVab25lTmFtZVwiLFxuICAgICAgXCJob3VyQ3ljbGVcIixcbiAgICBdKSxcbiAgICBrZXkgPSBzdHJpbmdpZnkoZmlsdGVyZWQpLFxuICAgIGRhdGVUaW1lSHVnZSA9IFwiRUVFRSwgTExMTCBkLCB5eXl5LCBoOm1tIGFcIjtcbiAgc3dpdGNoIChrZXkpIHtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfU0hPUlQpOlxuICAgICAgcmV0dXJuIFwiTS9kL3l5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfTUVEKTpcbiAgICAgIHJldHVybiBcIkxMTCBkLCB5eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX01FRF9XSVRIX1dFRUtEQVkpOlxuICAgICAgcmV0dXJuIFwiRUVFLCBMTEwgZCwgeXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9GVUxMKTpcbiAgICAgIHJldHVybiBcIkxMTEwgZCwgeXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9IVUdFKTpcbiAgICAgIHJldHVybiBcIkVFRUUsIExMTEwgZCwgeXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9TSU1QTEUpOlxuICAgICAgcmV0dXJuIFwiaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJoOm1tOnNzIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfV0lUSF9TSE9SVF9PRkZTRVQpOlxuICAgICAgcmV0dXJuIFwiaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FX1dJVEhfTE9OR19PRkZTRVQpOlxuICAgICAgcmV0dXJuIFwiaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1NJTVBMRSk6XG4gICAgICByZXR1cm4gXCJISDptbVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV8yNF9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiSEg6bW06c3NcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQpOlxuICAgICAgcmV0dXJuIFwiSEg6bW1cIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCk6XG4gICAgICByZXR1cm4gXCJISDptbVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfU0hPUlQpOlxuICAgICAgcmV0dXJuIFwiTS9kL3l5eXksIGg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfTUVEKTpcbiAgICAgIHJldHVybiBcIkxMTCBkLCB5eXl5LCBoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX0ZVTEwpOlxuICAgICAgcmV0dXJuIFwiTExMTCBkLCB5eXl5LCBoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX0hVR0UpOlxuICAgICAgcmV0dXJuIGRhdGVUaW1lSHVnZTtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJNL2QveXl5eSwgaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIkxMTCBkLCB5eXl5LCBoOm1tOnNzIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkpOlxuICAgICAgcmV0dXJuIFwiRUVFLCBkIExMTCB5eXl5LCBoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIkxMTEwgZCwgeXl5eSwgaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJFRUVFLCBMTExMIGQsIHl5eXksIGg6bW06c3MgYVwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZGF0ZVRpbWVIdWdlO1xuICB9XG59XG4iLCAiaW1wb3J0ICogYXMgRW5nbGlzaCBmcm9tIFwiLi9lbmdsaXNoLmpzXCI7XG5pbXBvcnQgKiBhcyBGb3JtYXRzIGZyb20gXCIuL2Zvcm1hdHMuanNcIjtcbmltcG9ydCB7IHBhZFN0YXJ0IH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuXG5mdW5jdGlvbiBzdHJpbmdpZnlUb2tlbnMoc3BsaXRzLCB0b2tlblRvU3RyaW5nKSB7XG4gIGxldCBzID0gXCJcIjtcbiAgZm9yIChjb25zdCB0b2tlbiBvZiBzcGxpdHMpIHtcbiAgICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgICAgcyArPSB0b2tlbi52YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHMgKz0gdG9rZW5Ub1N0cmluZyh0b2tlbi52YWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcztcbn1cblxuY29uc3QgbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyA9IHtcbiAgRDogRm9ybWF0cy5EQVRFX1NIT1JULFxuICBERDogRm9ybWF0cy5EQVRFX01FRCxcbiAgREREOiBGb3JtYXRzLkRBVEVfRlVMTCxcbiAgRERERDogRm9ybWF0cy5EQVRFX0hVR0UsXG4gIHQ6IEZvcm1hdHMuVElNRV9TSU1QTEUsXG4gIHR0OiBGb3JtYXRzLlRJTUVfV0lUSF9TRUNPTkRTLFxuICB0dHQ6IEZvcm1hdHMuVElNRV9XSVRIX1NIT1JUX09GRlNFVCxcbiAgdHR0dDogRm9ybWF0cy5USU1FX1dJVEhfTE9OR19PRkZTRVQsXG4gIFQ6IEZvcm1hdHMuVElNRV8yNF9TSU1QTEUsXG4gIFRUOiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9TRUNPTkRTLFxuICBUVFQ6IEZvcm1hdHMuVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCxcbiAgVFRUVDogRm9ybWF0cy5USU1FXzI0X1dJVEhfTE9OR19PRkZTRVQsXG4gIGY6IEZvcm1hdHMuREFURVRJTUVfU0hPUlQsXG4gIGZmOiBGb3JtYXRzLkRBVEVUSU1FX01FRCxcbiAgZmZmOiBGb3JtYXRzLkRBVEVUSU1FX0ZVTEwsXG4gIGZmZmY6IEZvcm1hdHMuREFURVRJTUVfSFVHRSxcbiAgRjogRm9ybWF0cy5EQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMsXG4gIEZGOiBGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMsXG4gIEZGRjogRm9ybWF0cy5EQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyxcbiAgRkZGRjogRm9ybWF0cy5EQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyxcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtYXR0ZXIge1xuICBzdGF0aWMgY3JlYXRlKGxvY2FsZSwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIG5ldyBGb3JtYXR0ZXIobG9jYWxlLCBvcHRzKTtcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZUZvcm1hdChmbXQpIHtcbiAgICAvLyB3aGl0ZS1zcGFjZSBpcyBhbHdheXMgY29uc2lkZXJlZCBhIGxpdGVyYWwgaW4gdXNlci1wcm92aWRlZCBmb3JtYXRzXG4gICAgLy8gdGhlIFwiIFwiIHRva2VuIGhhcyBhIHNwZWNpYWwgbWVhbmluZyAoc2VlIHVuaXRGb3JUb2tlbilcblxuICAgIGxldCBjdXJyZW50ID0gbnVsbCxcbiAgICAgIGN1cnJlbnRGdWxsID0gXCJcIixcbiAgICAgIGJyYWNrZXRlZCA9IGZhbHNlO1xuICAgIGNvbnN0IHNwbGl0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm10Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjID0gZm10LmNoYXJBdChpKTtcbiAgICAgIGlmIChjID09PSBcIidcIikge1xuICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogYnJhY2tldGVkIHx8IC9eXFxzKyQvLnRlc3QoY3VycmVudEZ1bGwpLCB2YWw6IGN1cnJlbnRGdWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnQgPSBudWxsO1xuICAgICAgICBjdXJyZW50RnVsbCA9IFwiXCI7XG4gICAgICAgIGJyYWNrZXRlZCA9ICFicmFja2V0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGJyYWNrZXRlZCkge1xuICAgICAgICBjdXJyZW50RnVsbCArPSBjO1xuICAgICAgfSBlbHNlIGlmIChjID09PSBjdXJyZW50KSB7XG4gICAgICAgIGN1cnJlbnRGdWxsICs9IGM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogL15cXHMrJC8udGVzdChjdXJyZW50RnVsbCksIHZhbDogY3VycmVudEZ1bGwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEZ1bGwgPSBjO1xuICAgICAgICBjdXJyZW50ID0gYztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudEZ1bGwubGVuZ3RoID4gMCkge1xuICAgICAgc3BsaXRzLnB1c2goeyBsaXRlcmFsOiBicmFja2V0ZWQgfHwgL15cXHMrJC8udGVzdChjdXJyZW50RnVsbCksIHZhbDogY3VycmVudEZ1bGwgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNwbGl0cztcbiAgfVxuXG4gIHN0YXRpYyBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKSB7XG4gICAgcmV0dXJuIG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHNbdG9rZW5dO1xuICB9XG5cbiAgY29uc3RydWN0b3IobG9jYWxlLCBmb3JtYXRPcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gZm9ybWF0T3B0cztcbiAgICB0aGlzLmxvYyA9IGxvY2FsZTtcbiAgICB0aGlzLnN5c3RlbUxvYyA9IG51bGw7XG4gIH1cblxuICBmb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgb3B0cykge1xuICAgIGlmICh0aGlzLnN5c3RlbUxvYyA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5zeXN0ZW1Mb2MgPSB0aGlzLmxvYy5yZWRlZmF1bHRUb1N5c3RlbSgpO1xuICAgIH1cbiAgICBjb25zdCBkZiA9IHRoaXMuc3lzdGVtTG9jLmR0Rm9ybWF0dGVyKGR0LCB7IC4uLnRoaXMub3B0cywgLi4ub3B0cyB9KTtcbiAgICByZXR1cm4gZGYuZm9ybWF0KCk7XG4gIH1cblxuICBkdEZvcm1hdHRlcihkdCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMubG9jLmR0Rm9ybWF0dGVyKGR0LCB7IC4uLnRoaXMub3B0cywgLi4ub3B0cyB9KTtcbiAgfVxuXG4gIGZvcm1hdERhdGVUaW1lKGR0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZHQsIG9wdHMpLmZvcm1hdCgpO1xuICB9XG5cbiAgZm9ybWF0RGF0ZVRpbWVQYXJ0cyhkdCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGR0LCBvcHRzKS5mb3JtYXRUb1BhcnRzKCk7XG4gIH1cblxuICBmb3JtYXRJbnRlcnZhbChpbnRlcnZhbCwgb3B0cykge1xuICAgIGNvbnN0IGRmID0gdGhpcy5kdEZvcm1hdHRlcihpbnRlcnZhbC5zdGFydCwgb3B0cyk7XG4gICAgcmV0dXJuIGRmLmR0Zi5mb3JtYXRSYW5nZShpbnRlcnZhbC5zdGFydC50b0pTRGF0ZSgpLCBpbnRlcnZhbC5lbmQudG9KU0RhdGUoKSk7XG4gIH1cblxuICByZXNvbHZlZE9wdGlvbnMoZHQsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihkdCwgb3B0cykucmVzb2x2ZWRPcHRpb25zKCk7XG4gIH1cblxuICBudW0obiwgcCA9IDApIHtcbiAgICAvLyB3ZSBnZXQgc29tZSBwZXJmIG91dCBvZiBkb2luZyB0aGlzIGhlcmUsIGFubm95aW5nbHlcbiAgICBpZiAodGhpcy5vcHRzLmZvcmNlU2ltcGxlKSB7XG4gICAgICByZXR1cm4gcGFkU3RhcnQobiwgcCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb3B0cyA9IHsgLi4udGhpcy5vcHRzIH07XG5cbiAgICBpZiAocCA+IDApIHtcbiAgICAgIG9wdHMucGFkVG8gPSBwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmxvYy5udW1iZXJGb3JtYXR0ZXIob3B0cykuZm9ybWF0KG4pO1xuICB9XG5cbiAgZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmbXQpIHtcbiAgICBjb25zdCBrbm93bkVuZ2xpc2ggPSB0aGlzLmxvYy5saXN0aW5nTW9kZSgpID09PSBcImVuXCIsXG4gICAgICB1c2VEYXRlVGltZUZvcm1hdHRlciA9IHRoaXMubG9jLm91dHB1dENhbGVuZGFyICYmIHRoaXMubG9jLm91dHB1dENhbGVuZGFyICE9PSBcImdyZWdvcnlcIixcbiAgICAgIHN0cmluZyA9IChvcHRzLCBleHRyYWN0KSA9PiB0aGlzLmxvYy5leHRyYWN0KGR0LCBvcHRzLCBleHRyYWN0KSxcbiAgICAgIGZvcm1hdE9mZnNldCA9IChvcHRzKSA9PiB7XG4gICAgICAgIGlmIChkdC5pc09mZnNldEZpeGVkICYmIGR0Lm9mZnNldCA9PT0gMCAmJiBvcHRzLmFsbG93Wikge1xuICAgICAgICAgIHJldHVybiBcIlpcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkdC5pc1ZhbGlkID8gZHQuem9uZS5mb3JtYXRPZmZzZXQoZHQudHMsIG9wdHMuZm9ybWF0KSA6IFwiXCI7XG4gICAgICB9LFxuICAgICAgbWVyaWRpZW0gPSAoKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2hcbiAgICAgICAgICA/IEVuZ2xpc2gubWVyaWRpZW1Gb3JEYXRlVGltZShkdClcbiAgICAgICAgICA6IHN0cmluZyh7IGhvdXI6IFwibnVtZXJpY1wiLCBob3VyQ3ljbGU6IFwiaDEyXCIgfSwgXCJkYXlwZXJpb2RcIiksXG4gICAgICBtb250aCA9IChsZW5ndGgsIHN0YW5kYWxvbmUpID0+XG4gICAgICAgIGtub3duRW5nbGlzaFxuICAgICAgICAgID8gRW5nbGlzaC5tb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpXG4gICAgICAgICAgOiBzdHJpbmcoc3RhbmRhbG9uZSA/IHsgbW9udGg6IGxlbmd0aCB9IDogeyBtb250aDogbGVuZ3RoLCBkYXk6IFwibnVtZXJpY1wiIH0sIFwibW9udGhcIiksXG4gICAgICB3ZWVrZGF5ID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT5cbiAgICAgICAga25vd25FbmdsaXNoXG4gICAgICAgICAgPyBFbmdsaXNoLndlZWtkYXlGb3JEYXRlVGltZShkdCwgbGVuZ3RoKVxuICAgICAgICAgIDogc3RyaW5nKFxuICAgICAgICAgICAgICBzdGFuZGFsb25lID8geyB3ZWVrZGF5OiBsZW5ndGggfSA6IHsgd2Vla2RheTogbGVuZ3RoLCBtb250aDogXCJsb25nXCIsIGRheTogXCJudW1lcmljXCIgfSxcbiAgICAgICAgICAgICAgXCJ3ZWVrZGF5XCJcbiAgICAgICAgICAgICksXG4gICAgICBtYXliZU1hY3JvID0gKHRva2VuKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbik7XG4gICAgICAgIGlmIChmb3JtYXRPcHRzKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZHQsIGZvcm1hdE9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGVyYSA9IChsZW5ndGgpID0+XG4gICAgICAgIGtub3duRW5nbGlzaCA/IEVuZ2xpc2guZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkgOiBzdHJpbmcoeyBlcmE6IGxlbmd0aCB9LCBcImVyYVwiKSxcbiAgICAgIHRva2VuVG9TdHJpbmcgPSAodG9rZW4pID0+IHtcbiAgICAgICAgLy8gV2hlcmUgcG9zc2libGU6IGh0dHBzOi8vY2xkci51bmljb2RlLm9yZy90cmFuc2xhdGlvbi9kYXRlLXRpbWUvZGF0ZS10aW1lLXN5bWJvbHNcbiAgICAgICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgICAgIC8vIG1zXG4gICAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taWxsaXNlY29uZCk7XG4gICAgICAgICAgY2FzZSBcInVcIjpcbiAgICAgICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICAgICAgY2FzZSBcIlNTU1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm1pbGxpc2Vjb25kLCAzKTtcbiAgICAgICAgICAvLyBzZWNvbmRzXG4gICAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5zZWNvbmQpO1xuICAgICAgICAgIGNhc2UgXCJzc1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnNlY29uZCwgMik7XG4gICAgICAgICAgLy8gZnJhY3Rpb25hbCBzZWNvbmRzXG4gICAgICAgICAgY2FzZSBcInV1XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwKSwgMik7XG4gICAgICAgICAgY2FzZSBcInV1dVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMDApKTtcbiAgICAgICAgICAvLyBtaW51dGVzXG4gICAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taW51dGUpO1xuICAgICAgICAgIGNhc2UgXCJtbVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm1pbnV0ZSwgMik7XG4gICAgICAgICAgLy8gaG91cnNcbiAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyKTtcbiAgICAgICAgICBjYXNlIFwiaGhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5ob3VyICUgMTIgPT09IDAgPyAxMiA6IGR0LmhvdXIgJSAxMiwgMik7XG4gICAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5ob3VyKTtcbiAgICAgICAgICBjYXNlIFwiSEhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5ob3VyLCAyKTtcbiAgICAgICAgICAvLyBvZmZzZXRcbiAgICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICAgICAgLy8gbGlrZSArNlxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7IGZvcm1hdDogXCJuYXJyb3dcIiwgYWxsb3daOiB0aGlzLm9wdHMuYWxsb3daIH0pO1xuICAgICAgICAgIGNhc2UgXCJaWlwiOlxuICAgICAgICAgICAgLy8gbGlrZSArMDY6MDBcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6IFwic2hvcnRcIiwgYWxsb3daOiB0aGlzLm9wdHMuYWxsb3daIH0pO1xuICAgICAgICAgIGNhc2UgXCJaWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgKzA2MDBcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6IFwidGVjaGllXCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpaWlwiOlxuICAgICAgICAgICAgLy8gbGlrZSBFU1RcbiAgICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHsgZm9ybWF0OiBcInNob3J0XCIsIGxvY2FsZTogdGhpcy5sb2MubG9jYWxlIH0pO1xuICAgICAgICAgIGNhc2UgXCJaWlpaWlwiOlxuICAgICAgICAgICAgLy8gbGlrZSBFYXN0ZXJuIFN0YW5kYXJkIFRpbWVcbiAgICAgICAgICAgIHJldHVybiBkdC56b25lLm9mZnNldE5hbWUoZHQudHMsIHsgZm9ybWF0OiBcImxvbmdcIiwgbG9jYWxlOiB0aGlzLmxvYy5sb2NhbGUgfSk7XG4gICAgICAgICAgLy8gem9uZVxuICAgICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgICAvLyBsaWtlIEFtZXJpY2EvTmV3X1lvcmtcbiAgICAgICAgICAgIHJldHVybiBkdC56b25lTmFtZTtcbiAgICAgICAgICAvLyBtZXJpZGllbXNcbiAgICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgICAgcmV0dXJuIG1lcmlkaWVtKCk7XG4gICAgICAgICAgLy8gZGF0ZXNcbiAgICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgZGF5OiBcIm51bWVyaWNcIiB9LCBcImRheVwiKSA6IHRoaXMubnVtKGR0LmRheSk7XG4gICAgICAgICAgY2FzZSBcImRkXCI6XG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoeyBkYXk6IFwiMi1kaWdpdFwiIH0sIFwiZGF5XCIpIDogdGhpcy5udW0oZHQuZGF5LCAyKTtcbiAgICAgICAgICAvLyB3ZWVrZGF5cyAtIHN0YW5kYWxvbmVcbiAgICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla2RheSk7XG4gICAgICAgICAgY2FzZSBcImNjY1wiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVHVlcydcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwic2hvcnRcIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXNkYXknXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcImxvbmdcIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSBcImNjY2NjXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUJ1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJuYXJyb3dcIiwgdHJ1ZSk7XG4gICAgICAgICAgLy8gd2Vla2RheXMgLSBmb3JtYXRcbiAgICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla2RheSk7XG4gICAgICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVHVlcydcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwic2hvcnRcIiwgZmFsc2UpO1xuICAgICAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5J1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJsb25nXCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiRUVFRUVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1QnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcIm5hcnJvd1wiLCBmYWxzZSk7XG4gICAgICAgICAgLy8gbW9udGhzIC0gc3RhbmRhbG9uZVxuICAgICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IG1vbnRoOiBcIm51bWVyaWNcIiwgZGF5OiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQubW9udGgpO1xuICAgICAgICAgIGNhc2UgXCJMTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMSwgZG9lc24ndCBzZWVtIHRvIHdvcmtcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IG1vbnRoOiBcIjItZGlnaXRcIiwgZGF5OiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQubW9udGgsIDIpO1xuICAgICAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSmFuXG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJzaG9ydFwiLCB0cnVlKTtcbiAgICAgICAgICBjYXNlIFwiTExMTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW51YXJ5XG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJsb25nXCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJMTExMTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKXG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJuYXJyb3dcIiwgdHJ1ZSk7XG4gICAgICAgICAgLy8gbW9udGhzIC0gZm9ybWF0XG4gICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6IFwibnVtZXJpY1wiIH0sIFwibW9udGhcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCk7XG4gICAgICAgICAgY2FzZSBcIk1NXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDAxXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCIyLWRpZ2l0XCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoLCAyKTtcbiAgICAgICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEphblxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwic2hvcnRcIiwgZmFsc2UpO1xuICAgICAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEphbnVhcnlcbiAgICAgICAgICAgIHJldHVybiBtb250aChcImxvbmdcIiwgZmFsc2UpO1xuICAgICAgICAgIGNhc2UgXCJNTU1NTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKXG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJuYXJyb3dcIiwgZmFsc2UpO1xuICAgICAgICAgIC8vIHllYXJzXG4gICAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMjAxNFxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgeWVhcjogXCJudW1lcmljXCIgfSwgXCJ5ZWFyXCIpIDogdGhpcy5udW0oZHQueWVhcik7XG4gICAgICAgICAgY2FzZSBcInl5XCI6XG4gICAgICAgICAgICAvLyBsaWtlIDE0XG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiBcIjItZGlnaXRcIiB9LCBcInllYXJcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcbiAgICAgICAgICBjYXNlIFwieXl5eVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMDEyXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiBcIm51bWVyaWNcIiB9LCBcInllYXJcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA0KTtcbiAgICAgICAgICBjYXNlIFwieXl5eXl5XCI6XG4gICAgICAgICAgICAvLyBsaWtlIDAwMDAxMlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogXCJudW1lcmljXCIgfSwgXCJ5ZWFyXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhciwgNik7XG4gICAgICAgICAgLy8gZXJhc1xuICAgICAgICAgIGNhc2UgXCJHXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEFEXG4gICAgICAgICAgICByZXR1cm4gZXJhKFwic2hvcnRcIik7XG4gICAgICAgICAgY2FzZSBcIkdHXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEFubm8gRG9taW5pXG4gICAgICAgICAgICByZXR1cm4gZXJhKFwibG9uZ1wiKTtcbiAgICAgICAgICBjYXNlIFwiR0dHR0dcIjpcbiAgICAgICAgICAgIHJldHVybiBlcmEoXCJuYXJyb3dcIik7XG4gICAgICAgICAgY2FzZSBcImtrXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuICAgICAgICAgIGNhc2UgXCJra2trXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla1llYXIsIDQpO1xuICAgICAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla051bWJlcik7XG4gICAgICAgICAgY2FzZSBcIldXXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQud2Vla051bWJlciwgMik7XG4gICAgICAgICAgY2FzZSBcIm5cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5sb2NhbFdlZWtOdW1iZXIpO1xuICAgICAgICAgIGNhc2UgXCJublwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmxvY2FsV2Vla051bWJlciwgMik7XG4gICAgICAgICAgY2FzZSBcImlpXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG4gICAgICAgICAgY2FzZSBcImlpaWlcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5sb2NhbFdlZWtZZWFyLCA0KTtcbiAgICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm9yZGluYWwpO1xuICAgICAgICAgIGNhc2UgXCJvb29cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5vcmRpbmFsLCAzKTtcbiAgICAgICAgICBjYXNlIFwicVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQucXVhcnRlcik7XG4gICAgICAgICAgY2FzZSBcInFxXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDAxXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQucXVhcnRlciwgMik7XG4gICAgICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGR0LnRzIC8gMTAwMCkpO1xuICAgICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQudHMpO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbWF5YmVNYWNybyh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCB0b2tlblRvU3RyaW5nKTtcbiAgfVxuXG4gIGZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyhkdXIsIGZtdCkge1xuICAgIGNvbnN0IHRva2VuVG9GaWVsZCA9ICh0b2tlbikgPT4ge1xuICAgICAgICBzd2l0Y2ggKHRva2VuWzBdKSB7XG4gICAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICAgIHJldHVybiBcIm1pbGxpc2Vjb25kXCI7XG4gICAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgIHJldHVybiBcInNlY29uZFwiO1xuICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtaW51dGVcIjtcbiAgICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiaG91clwiO1xuICAgICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJkYXlcIjtcbiAgICAgICAgICBjYXNlIFwid1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwid2Vla1wiO1xuICAgICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuICAgICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ5ZWFyXCI7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdG9rZW5Ub1N0cmluZyA9IChsaWxkdXIpID0+ICh0b2tlbikgPT4ge1xuICAgICAgICBjb25zdCBtYXBwZWQgPSB0b2tlblRvRmllbGQodG9rZW4pO1xuICAgICAgICBpZiAobWFwcGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGxpbGR1ci5nZXQobWFwcGVkKSwgdG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0b2tlbnMgPSBGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSxcbiAgICAgIHJlYWxUb2tlbnMgPSB0b2tlbnMucmVkdWNlKFxuICAgICAgICAoZm91bmQsIHsgbGl0ZXJhbCwgdmFsIH0pID0+IChsaXRlcmFsID8gZm91bmQgOiBmb3VuZC5jb25jYXQodmFsKSksXG4gICAgICAgIFtdXG4gICAgICApLFxuICAgICAgY29sbGFwc2VkID0gZHVyLnNoaWZ0VG8oLi4ucmVhbFRva2Vucy5tYXAodG9rZW5Ub0ZpZWxkKS5maWx0ZXIoKHQpID0+IHQpKTtcbiAgICByZXR1cm4gc3RyaW5naWZ5VG9rZW5zKHRva2VucywgdG9rZW5Ub1N0cmluZyhjb2xsYXBzZWQpKTtcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIHVudHJ1bmNhdGVZZWFyLFxuICBzaWduZWRPZmZzZXQsXG4gIHBhcnNlSW50ZWdlcixcbiAgcGFyc2VNaWxsaXMsXG4gIGlzVW5kZWZpbmVkLFxuICBwYXJzZUZsb2F0aW5nLFxufSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgKiBhcyBFbmdsaXNoIGZyb20gXCIuL2VuZ2xpc2guanNcIjtcbmltcG9ydCBGaXhlZE9mZnNldFpvbmUgZnJvbSBcIi4uL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuXG4vKlxuICogVGhpcyBmaWxlIGhhbmRsZXMgcGFyc2luZyBmb3Igd2VsbC1zcGVjaWZpZWQgZm9ybWF0cy4gSGVyZSdzIGhvdyBpdCB3b3JrczpcbiAqIFR3byB0aGluZ3MgZ28gaW50byBwYXJzaW5nOiBhIHJlZ2V4IHRvIG1hdGNoIHdpdGggYW5kIGFuIGV4dHJhY3RvciB0byB0YWtlIGFwYXJ0IHRoZSBncm91cHMgaW4gdGhlIG1hdGNoLlxuICogQW4gZXh0cmFjdG9yIGlzIGp1c3QgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgcmVnZXggbWF0Y2ggYXJyYXkgYW5kIHJldHVybnMgYSB7IHllYXI6IC4uLiwgbW9udGg6IC4uLiB9IG9iamVjdFxuICogcGFyc2UoKSBkb2VzIHRoZSB3b3JrIG9mIGV4ZWN1dGluZyB0aGUgcmVnZXggYW5kIGFwcGx5aW5nIHRoZSBleHRyYWN0b3IuIEl0IHRha2VzIG11bHRpcGxlIHJlZ2V4L2V4dHJhY3RvciBwYWlycyB0byB0cnkgaW4gc2VxdWVuY2UuXG4gKiBFeHRyYWN0b3JzIGNhbiB0YWtlIGEgXCJjdXJzb3JcIiByZXByZXNlbnRpbmcgdGhlIG9mZnNldCBpbiB0aGUgbWF0Y2ggdG8gbG9vayBhdC4gVGhpcyBtYWtlcyBpdCBlYXN5IHRvIGNvbWJpbmUgZXh0cmFjdG9ycy5cbiAqIGNvbWJpbmVFeHRyYWN0b3JzKCkgZG9lcyB0aGUgd29yayBvZiBjb21iaW5pbmcgdGhlbSwga2VlcGluZyB0cmFjayBvZiB0aGUgY3Vyc29yIHRocm91Z2ggbXVsdGlwbGUgZXh0cmFjdGlvbnMuXG4gKiBTb21lIGV4dHJhY3Rpb25zIGFyZSBzdXBlciBkdW1iIGFuZCBzaW1wbGVQYXJzZSBhbmQgZnJvbVN0cmluZ3MgaGVscCBEUlkgdGhlbS5cbiAqL1xuXG5jb25zdCBpYW5hUmVnZXggPSAvW0EtWmEtel8rLV17MSwyNTZ9KD86Oj9cXC9bQS1aYS16MC05XystXXsxLDI1Nn0oPzpcXC9bQS1aYS16MC05XystXXsxLDI1Nn0pPyk/LztcblxuZnVuY3Rpb24gY29tYmluZVJlZ2V4ZXMoLi4ucmVnZXhlcykge1xuICBjb25zdCBmdWxsID0gcmVnZXhlcy5yZWR1Y2UoKGYsIHIpID0+IGYgKyByLnNvdXJjZSwgXCJcIik7XG4gIHJldHVybiBSZWdFeHAoYF4ke2Z1bGx9JGApO1xufVxuXG5mdW5jdGlvbiBjb21iaW5lRXh0cmFjdG9ycyguLi5leHRyYWN0b3JzKSB7XG4gIHJldHVybiAobSkgPT5cbiAgICBleHRyYWN0b3JzXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW21lcmdlZFZhbHMsIG1lcmdlZFpvbmUsIGN1cnNvcl0sIGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgW3ZhbCwgem9uZSwgbmV4dF0gPSBleChtLCBjdXJzb3IpO1xuICAgICAgICAgIHJldHVybiBbeyAuLi5tZXJnZWRWYWxzLCAuLi52YWwgfSwgem9uZSB8fCBtZXJnZWRab25lLCBuZXh0XTtcbiAgICAgICAgfSxcbiAgICAgICAgW3t9LCBudWxsLCAxXVxuICAgICAgKVxuICAgICAgLnNsaWNlKDAsIDIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZShzLCAuLi5wYXR0ZXJucykge1xuICBpZiAocyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtudWxsLCBudWxsXTtcbiAgfVxuXG4gIGZvciAoY29uc3QgW3JlZ2V4LCBleHRyYWN0b3JdIG9mIHBhdHRlcm5zKSB7XG4gICAgY29uc3QgbSA9IHJlZ2V4LmV4ZWMocyk7XG4gICAgaWYgKG0pIHtcbiAgICAgIHJldHVybiBleHRyYWN0b3IobSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBbbnVsbCwgbnVsbF07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZVBhcnNlKC4uLmtleXMpIHtcbiAgcmV0dXJuIChtYXRjaCwgY3Vyc29yKSA9PiB7XG4gICAgY29uc3QgcmV0ID0ge307XG4gICAgbGV0IGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgcmV0W2tleXNbaV1dID0gcGFyc2VJbnRlZ2VyKG1hdGNoW2N1cnNvciArIGldKTtcbiAgICB9XG4gICAgcmV0dXJuIFtyZXQsIG51bGwsIGN1cnNvciArIGldO1xuICB9O1xufVxuXG4vLyBJU08gYW5kIFNRTCBwYXJzaW5nXG5jb25zdCBvZmZzZXRSZWdleCA9IC8oPzooWil8KFsrLV1cXGRcXGQpKD86Oj8oXFxkXFxkKSk/KS87XG5jb25zdCBpc29FeHRlbmRlZFpvbmUgPSBgKD86JHtvZmZzZXRSZWdleC5zb3VyY2V9Pyg/OlxcXFxbKCR7aWFuYVJlZ2V4LnNvdXJjZX0pXFxcXF0pPyk/YDtcbmNvbnN0IGlzb1RpbWVCYXNlUmVnZXggPSAvKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlsuLF0oXFxkezEsMzB9KSk/KT8pPy87XG5jb25zdCBpc29UaW1lUmVnZXggPSBSZWdFeHAoYCR7aXNvVGltZUJhc2VSZWdleC5zb3VyY2V9JHtpc29FeHRlbmRlZFpvbmV9YCk7XG5jb25zdCBpc29UaW1lRXh0ZW5zaW9uUmVnZXggPSBSZWdFeHAoYCg/OlQke2lzb1RpbWVSZWdleC5zb3VyY2V9KT9gKTtcbmNvbnN0IGlzb1ltZFJlZ2V4ID0gLyhbKy1dXFxkezZ9fFxcZHs0fSkoPzotPyhcXGRcXGQpKD86LT8oXFxkXFxkKSk/KT8vO1xuY29uc3QgaXNvV2Vla1JlZ2V4ID0gLyhcXGR7NH0pLT9XKFxcZFxcZCkoPzotPyhcXGQpKT8vO1xuY29uc3QgaXNvT3JkaW5hbFJlZ2V4ID0gLyhcXGR7NH0pLT8oXFxkezN9KS87XG5jb25zdCBleHRyYWN0SVNPV2Vla0RhdGEgPSBzaW1wbGVQYXJzZShcIndlZWtZZWFyXCIsIFwid2Vla051bWJlclwiLCBcIndlZWtEYXlcIik7XG5jb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGEgPSBzaW1wbGVQYXJzZShcInllYXJcIiwgXCJvcmRpbmFsXCIpO1xuY29uc3Qgc3FsWW1kUmVnZXggPSAvKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZCkvOyAvLyBkdW1iZWQtZG93biB2ZXJzaW9uIG9mIHRoZSBJU08gb25lXG5jb25zdCBzcWxUaW1lUmVnZXggPSBSZWdFeHAoXG4gIGAke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSA/KD86JHtvZmZzZXRSZWdleC5zb3VyY2V9fCgke2lhbmFSZWdleC5zb3VyY2V9KSk/YFxuKTtcbmNvbnN0IHNxbFRpbWVFeHRlbnNpb25SZWdleCA9IFJlZ0V4cChgKD86ICR7c3FsVGltZVJlZ2V4LnNvdXJjZX0pP2ApO1xuXG5mdW5jdGlvbiBpbnQobWF0Y2gsIHBvcywgZmFsbGJhY2spIHtcbiAgY29uc3QgbSA9IG1hdGNoW3Bvc107XG4gIHJldHVybiBpc1VuZGVmaW5lZChtKSA/IGZhbGxiYWNrIDogcGFyc2VJbnRlZ2VyKG0pO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPWW1kKG1hdGNoLCBjdXJzb3IpIHtcbiAgY29uc3QgaXRlbSA9IHtcbiAgICB5ZWFyOiBpbnQobWF0Y2gsIGN1cnNvciksXG4gICAgbW9udGg6IGludChtYXRjaCwgY3Vyc29yICsgMSwgMSksXG4gICAgZGF5OiBpbnQobWF0Y2gsIGN1cnNvciArIDIsIDEpLFxuICB9O1xuXG4gIHJldHVybiBbaXRlbSwgbnVsbCwgY3Vyc29yICsgM107XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09UaW1lKG1hdGNoLCBjdXJzb3IpIHtcbiAgY29uc3QgaXRlbSA9IHtcbiAgICBob3VyczogaW50KG1hdGNoLCBjdXJzb3IsIDApLFxuICAgIG1pbnV0ZXM6IGludChtYXRjaCwgY3Vyc29yICsgMSwgMCksXG4gICAgc2Vjb25kczogaW50KG1hdGNoLCBjdXJzb3IgKyAyLCAwKSxcbiAgICBtaWxsaXNlY29uZHM6IHBhcnNlTWlsbGlzKG1hdGNoW2N1cnNvciArIDNdKSxcbiAgfTtcblxuICByZXR1cm4gW2l0ZW0sIG51bGwsIGN1cnNvciArIDRdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPT2Zmc2V0KG1hdGNoLCBjdXJzb3IpIHtcbiAgY29uc3QgbG9jYWwgPSAhbWF0Y2hbY3Vyc29yXSAmJiAhbWF0Y2hbY3Vyc29yICsgMV0sXG4gICAgZnVsbE9mZnNldCA9IHNpZ25lZE9mZnNldChtYXRjaFtjdXJzb3IgKyAxXSwgbWF0Y2hbY3Vyc29yICsgMl0pLFxuICAgIHpvbmUgPSBsb2NhbCA/IG51bGwgOiBGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2UoZnVsbE9mZnNldCk7XG4gIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDNdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SUFOQVpvbmUobWF0Y2gsIGN1cnNvcikge1xuICBjb25zdCB6b25lID0gbWF0Y2hbY3Vyc29yXSA/IElBTkFab25lLmNyZWF0ZShtYXRjaFtjdXJzb3JdKSA6IG51bGw7XG4gIHJldHVybiBbe30sIHpvbmUsIGN1cnNvciArIDFdO1xufVxuXG4vLyBJU08gdGltZSBwYXJzaW5nXG5cbmNvbnN0IGlzb1RpbWVPbmx5ID0gUmVnRXhwKGBeVD8ke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSRgKTtcblxuLy8gSVNPIGR1cmF0aW9uIHBhcnNpbmdcblxuY29uc3QgaXNvRHVyYXRpb24gPVxuICAvXi0/UCg/Oig/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KVkpPyg/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KU0pPyg/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KVcpPyg/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KUQpPyg/OlQoPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylIKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylNKT8oPzooLT9cXGR7MSwyMH0pKD86Wy4sXSgtP1xcZHsxLDIwfSkpP1MpPyk/KSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0SVNPRHVyYXRpb24obWF0Y2gpIHtcbiAgY29uc3QgW3MsIHllYXJTdHIsIG1vbnRoU3RyLCB3ZWVrU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyLCBtaWxsaXNlY29uZHNTdHJdID1cbiAgICBtYXRjaDtcblxuICBjb25zdCBoYXNOZWdhdGl2ZVByZWZpeCA9IHNbMF0gPT09IFwiLVwiO1xuICBjb25zdCBuZWdhdGl2ZVNlY29uZHMgPSBzZWNvbmRTdHIgJiYgc2Vjb25kU3RyWzBdID09PSBcIi1cIjtcblxuICBjb25zdCBtYXliZU5lZ2F0ZSA9IChudW0sIGZvcmNlID0gZmFsc2UpID0+XG4gICAgbnVtICE9PSB1bmRlZmluZWQgJiYgKGZvcmNlIHx8IChudW0gJiYgaGFzTmVnYXRpdmVQcmVmaXgpKSA/IC1udW0gOiBudW07XG5cbiAgcmV0dXJuIFtcbiAgICB7XG4gICAgICB5ZWFyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh5ZWFyU3RyKSksXG4gICAgICBtb250aHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobW9udGhTdHIpKSxcbiAgICAgIHdlZWtzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHdlZWtTdHIpKSxcbiAgICAgIGRheXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoZGF5U3RyKSksXG4gICAgICBob3VyczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhob3VyU3RyKSksXG4gICAgICBtaW51dGVzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1pbnV0ZVN0cikpLFxuICAgICAgc2Vjb25kczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhzZWNvbmRTdHIpLCBzZWNvbmRTdHIgPT09IFwiLTBcIiksXG4gICAgICBtaWxsaXNlY29uZHM6IG1heWJlTmVnYXRlKHBhcnNlTWlsbGlzKG1pbGxpc2Vjb25kc1N0ciksIG5lZ2F0aXZlU2Vjb25kcyksXG4gICAgfSxcbiAgXTtcbn1cblxuLy8gVGhlc2UgYXJlIGEgbGl0dGxlIGJyYWluZGVhZC4gRURUICpzaG91bGQqIHRlbGwgdXMgdGhhdCB3ZSdyZSBpbiwgc2F5LCBBbWVyaWNhL05ld19Zb3JrXG4vLyBhbmQgbm90IGp1c3QgdGhhdCB3ZSdyZSBpbiAtMjQwICpyaWdodCBub3cqLiBCdXQgc2luY2UgSSBkb24ndCB0aGluayB0aGVzZSBhcmUgdXNlZCB0aGF0IG9mdGVuXG4vLyBJJ20ganVzdCBnb2luZyB0byBpZ25vcmUgdGhhdFxuY29uc3Qgb2JzT2Zmc2V0cyA9IHtcbiAgR01UOiAwLFxuICBFRFQ6IC00ICogNjAsXG4gIEVTVDogLTUgKiA2MCxcbiAgQ0RUOiAtNSAqIDYwLFxuICBDU1Q6IC02ICogNjAsXG4gIE1EVDogLTYgKiA2MCxcbiAgTVNUOiAtNyAqIDYwLFxuICBQRFQ6IC03ICogNjAsXG4gIFBTVDogLTggKiA2MCxcbn07XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHtcbiAgICB5ZWFyOiB5ZWFyU3RyLmxlbmd0aCA9PT0gMiA/IHVudHJ1bmNhdGVZZWFyKHBhcnNlSW50ZWdlcih5ZWFyU3RyKSkgOiBwYXJzZUludGVnZXIoeWVhclN0ciksXG4gICAgbW9udGg6IEVuZ2xpc2gubW9udGhzU2hvcnQuaW5kZXhPZihtb250aFN0cikgKyAxLFxuICAgIGRheTogcGFyc2VJbnRlZ2VyKGRheVN0ciksXG4gICAgaG91cjogcGFyc2VJbnRlZ2VyKGhvdXJTdHIpLFxuICAgIG1pbnV0ZTogcGFyc2VJbnRlZ2VyKG1pbnV0ZVN0ciksXG4gIH07XG5cbiAgaWYgKHNlY29uZFN0cikgcmVzdWx0LnNlY29uZCA9IHBhcnNlSW50ZWdlcihzZWNvbmRTdHIpO1xuICBpZiAod2Vla2RheVN0cikge1xuICAgIHJlc3VsdC53ZWVrZGF5ID1cbiAgICAgIHdlZWtkYXlTdHIubGVuZ3RoID4gM1xuICAgICAgICA/IEVuZ2xpc2gud2Vla2RheXNMb25nLmluZGV4T2Yod2Vla2RheVN0cikgKyAxXG4gICAgICAgIDogRW5nbGlzaC53ZWVrZGF5c1Nob3J0LmluZGV4T2Yod2Vla2RheVN0cikgKyAxO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gUkZDIDI4MjIvNTMyMlxuY29uc3QgcmZjMjgyMiA9XG4gIC9eKD86KE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksXFxzKT8oXFxkezEsMn0pXFxzKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKVxccyhcXGR7Miw0fSlcXHMoXFxkXFxkKTooXFxkXFxkKSg/OjooXFxkXFxkKSk/XFxzKD86KFVUfEdNVHxbRUNNUF1bU0RdVCl8KFtael0pfCg/OihbKy1dXFxkXFxkKShcXGRcXGQpKSkkLztcblxuZnVuY3Rpb24gZXh0cmFjdFJGQzI4MjIobWF0Y2gpIHtcbiAgY29uc3QgW1xuICAgICAgLFxuICAgICAgd2Vla2RheVN0cixcbiAgICAgIGRheVN0cixcbiAgICAgIG1vbnRoU3RyLFxuICAgICAgeWVhclN0cixcbiAgICAgIGhvdXJTdHIsXG4gICAgICBtaW51dGVTdHIsXG4gICAgICBzZWNvbmRTdHIsXG4gICAgICBvYnNPZmZzZXQsXG4gICAgICBtaWxPZmZzZXQsXG4gICAgICBvZmZIb3VyU3RyLFxuICAgICAgb2ZmTWludXRlU3RyLFxuICAgIF0gPSBtYXRjaCxcbiAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG5cbiAgbGV0IG9mZnNldDtcbiAgaWYgKG9ic09mZnNldCkge1xuICAgIG9mZnNldCA9IG9ic09mZnNldHNbb2JzT2Zmc2V0XTtcbiAgfSBlbHNlIGlmIChtaWxPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSAwO1xuICB9IGVsc2Uge1xuICAgIG9mZnNldCA9IHNpZ25lZE9mZnNldChvZmZIb3VyU3RyLCBvZmZNaW51dGVTdHIpO1xuICB9XG5cbiAgcmV0dXJuIFtyZXN1bHQsIG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KV07XG59XG5cbmZ1bmN0aW9uIHByZXByb2Nlc3NSRkMyODIyKHMpIHtcbiAgLy8gUmVtb3ZlIGNvbW1lbnRzIGFuZCBmb2xkaW5nIHdoaXRlc3BhY2UgYW5kIHJlcGxhY2UgbXVsdGlwbGUtc3BhY2VzIHdpdGggYSBzaW5nbGUgc3BhY2VcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvXFwoW14oKV0qXFwpfFtcXG5cXHRdL2csIFwiIFwiKVxuICAgIC5yZXBsYWNlKC8oXFxzXFxzKykvZywgXCIgXCIpXG4gICAgLnRyaW0oKTtcbn1cblxuLy8gaHR0cCBkYXRlXG5cbmNvbnN0IHJmYzExMjMgPVxuICAgIC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1biksIChcXGRcXGQpIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKFxcZHs0fSkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgR01UJC8sXG4gIHJmYzg1MCA9XG4gICAgL14oTW9uZGF5fFR1ZXNkYXl8V2VkbmVzZGF5fFRodXJzZGF5fEZyaWRheXxTYXR1cmRheXxTdW5kYXkpLCAoXFxkXFxkKS0oSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpLShcXGRcXGQpIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIEdNVCQvLFxuICBhc2NpaSA9XG4gICAgL14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpICggXFxkfFxcZFxcZCkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgKFxcZHs0fSkkLztcblxuZnVuY3Rpb24gZXh0cmFjdFJGQzExMjNPcjg1MChtYXRjaCkge1xuICBjb25zdCBbLCB3ZWVrZGF5U3RyLCBkYXlTdHIsIG1vbnRoU3RyLCB5ZWFyU3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cl0gPSBtYXRjaCxcbiAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0QVNDSUkobWF0Y2gpIHtcbiAgY29uc3QgWywgd2Vla2RheVN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIsIHllYXJTdHJdID0gbWF0Y2gsXG4gICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTtcbn1cblxuY29uc3QgaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1ltZFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xuY29uc3QgaXNvV2Vla1dpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29XZWVrUmVnZXgsIGlzb1RpbWVFeHRlbnNpb25SZWdleCk7XG5jb25zdCBpc29PcmRpbmFsV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb09yZGluYWxSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IGlzb1RpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvVGltZVJlZ2V4KTtcblxuY29uc3QgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT1ltZCxcbiAgZXh0cmFjdElTT1RpbWUsXG4gIGV4dHJhY3RJU09PZmZzZXQsXG4gIGV4dHJhY3RJQU5BWm9uZVxuKTtcbmNvbnN0IGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPV2Vla0RhdGEsXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5jb25zdCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09PcmRpbmFsRGF0YSxcbiAgZXh0cmFjdElTT1RpbWUsXG4gIGV4dHJhY3RJU09PZmZzZXQsXG4gIGV4dHJhY3RJQU5BWm9uZVxuKTtcbmNvbnN0IGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5cbi8qXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUlTT0RhdGUocykge1xuICByZXR1cm4gcGFyc2UoXG4gICAgcyxcbiAgICBbaXNvWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXRdLFxuICAgIFtpc29XZWVrV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1dlZWtUaW1lQW5kT2Zmc2V0XSxcbiAgICBbaXNvT3JkaW5hbFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09PcmRpbmFsRGF0ZUFuZFRpbWVdLFxuICAgIFtpc29UaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXRdXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVJGQzI4MjJEYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHByZXByb2Nlc3NSRkMyODIyKHMpLCBbcmZjMjgyMiwgZXh0cmFjdFJGQzI4MjJdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSFRUUERhdGUocykge1xuICByZXR1cm4gcGFyc2UoXG4gICAgcyxcbiAgICBbcmZjMTEyMywgZXh0cmFjdFJGQzExMjNPcjg1MF0sXG4gICAgW3JmYzg1MCwgZXh0cmFjdFJGQzExMjNPcjg1MF0sXG4gICAgW2FzY2lpLCBleHRyYWN0QVNDSUldXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUlTT0R1cmF0aW9uKHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtpc29EdXJhdGlvbiwgZXh0cmFjdElTT0R1cmF0aW9uXSk7XG59XG5cbmNvbnN0IGV4dHJhY3RJU09UaW1lT25seSA9IGNvbWJpbmVFeHRyYWN0b3JzKGV4dHJhY3RJU09UaW1lKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSVNPVGltZU9ubHkocykge1xuICByZXR1cm4gcGFyc2UocywgW2lzb1RpbWVPbmx5LCBleHRyYWN0SVNPVGltZU9ubHldKTtcbn1cblxuY29uc3Qgc3FsWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKHNxbFltZFJlZ2V4LCBzcWxUaW1lRXh0ZW5zaW9uUmVnZXgpO1xuY29uc3Qgc3FsVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxUaW1lUmVnZXgpO1xuXG5jb25zdCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNRTChzKSB7XG4gIHJldHVybiBwYXJzZShcbiAgICBzLFxuICAgIFtzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldF0sXG4gICAgW3NxbFRpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZU9mZnNldEFuZElBTkFab25lXVxuICApO1xufVxuIiwgImltcG9ydCB7IEludmFsaWRBcmd1bWVudEVycm9yLCBJbnZhbGlkRHVyYXRpb25FcnJvciwgSW52YWxpZFVuaXRFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IEZvcm1hdHRlciBmcm9tIFwiLi9pbXBsL2Zvcm1hdHRlci5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW1wbC9pbnZhbGlkLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUlTT0R1cmF0aW9uLCBwYXJzZUlTT1RpbWVPbmx5IH0gZnJvbSBcIi4vaW1wbC9yZWdleFBhcnNlci5qc1wiO1xuaW1wb3J0IHtcbiAgYXNOdW1iZXIsXG4gIGhhc093blByb3BlcnR5LFxuICBpc051bWJlcixcbiAgaXNVbmRlZmluZWQsXG4gIG5vcm1hbGl6ZU9iamVjdCxcbiAgcm91bmRUbyxcbn0gZnJvbSBcIi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuXG5jb25zdCBJTlZBTElEID0gXCJJbnZhbGlkIER1cmF0aW9uXCI7XG5cbi8vIHVuaXQgY29udmVyc2lvbiBjb25zdGFudHNcbmV4cG9ydCBjb25zdCBsb3dPcmRlck1hdHJpeCA9IHtcbiAgICB3ZWVrczoge1xuICAgICAgZGF5czogNyxcbiAgICAgIGhvdXJzOiA3ICogMjQsXG4gICAgICBtaW51dGVzOiA3ICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IDcgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgZGF5czoge1xuICAgICAgaG91cnM6IDI0LFxuICAgICAgbWludXRlczogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIGhvdXJzOiB7IG1pbnV0ZXM6IDYwLCBzZWNvbmRzOiA2MCAqIDYwLCBtaWxsaXNlY29uZHM6IDYwICogNjAgKiAxMDAwIH0sXG4gICAgbWludXRlczogeyBzZWNvbmRzOiA2MCwgbWlsbGlzZWNvbmRzOiA2MCAqIDEwMDAgfSxcbiAgICBzZWNvbmRzOiB7IG1pbGxpc2Vjb25kczogMTAwMCB9LFxuICB9LFxuICBjYXN1YWxNYXRyaXggPSB7XG4gICAgeWVhcnM6IHtcbiAgICAgIHF1YXJ0ZXJzOiA0LFxuICAgICAgbW9udGhzOiAxMixcbiAgICAgIHdlZWtzOiA1MixcbiAgICAgIGRheXM6IDM2NSxcbiAgICAgIGhvdXJzOiAzNjUgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IDM2NSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiAzNjUgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBxdWFydGVyczoge1xuICAgICAgbW9udGhzOiAzLFxuICAgICAgd2Vla3M6IDEzLFxuICAgICAgZGF5czogOTEsXG4gICAgICBob3VyczogOTEgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IDkxICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgIHdlZWtzOiA0LFxuICAgICAgZGF5czogMzAsXG4gICAgICBob3VyczogMzAgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IDMwICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IDMwICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcblxuICAgIC4uLmxvd09yZGVyTWF0cml4LFxuICB9LFxuICBkYXlzSW5ZZWFyQWNjdXJhdGUgPSAxNDYwOTcuMCAvIDQwMCxcbiAgZGF5c0luTW9udGhBY2N1cmF0ZSA9IDE0NjA5Ny4wIC8gNDgwMCxcbiAgYWNjdXJhdGVNYXRyaXggPSB7XG4gICAgeWVhcnM6IHtcbiAgICAgIHF1YXJ0ZXJzOiA0LFxuICAgICAgbW9udGhzOiAxMixcbiAgICAgIHdlZWtzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyA3LFxuICAgICAgZGF5czogZGF5c0luWWVhckFjY3VyYXRlLFxuICAgICAgaG91cnM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0LFxuICAgICAgbWludXRlczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIHF1YXJ0ZXJzOiB7XG4gICAgICBtb250aHM6IDMsXG4gICAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gMjgsXG4gICAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyA0LFxuICAgICAgaG91cnM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCkgLyA0LFxuICAgICAgbWludXRlczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjApIC8gNCxcbiAgICAgIHNlY29uZHM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjApIC8gNCxcbiAgICAgIG1pbGxpc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDApIC8gNCxcbiAgICB9LFxuICAgIG1vbnRoczoge1xuICAgICAgd2Vla3M6IGRheXNJbk1vbnRoQWNjdXJhdGUgLyA3LFxuICAgICAgZGF5czogZGF5c0luTW9udGhBY2N1cmF0ZSxcbiAgICAgIGhvdXJzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQsXG4gICAgICBtaW51dGVzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgLi4ubG93T3JkZXJNYXRyaXgsXG4gIH07XG5cbi8vIHVuaXRzIG9yZGVyZWQgYnkgc2l6ZVxuY29uc3Qgb3JkZXJlZFVuaXRzID0gW1xuICBcInllYXJzXCIsXG4gIFwicXVhcnRlcnNcIixcbiAgXCJtb250aHNcIixcbiAgXCJ3ZWVrc1wiLFxuICBcImRheXNcIixcbiAgXCJob3Vyc1wiLFxuICBcIm1pbnV0ZXNcIixcbiAgXCJzZWNvbmRzXCIsXG4gIFwibWlsbGlzZWNvbmRzXCIsXG5dO1xuXG5jb25zdCByZXZlcnNlVW5pdHMgPSBvcmRlcmVkVW5pdHMuc2xpY2UoMCkucmV2ZXJzZSgpO1xuXG4vLyBjbG9uZSByZWFsbHkgbWVhbnMgXCJjcmVhdGUgYW5vdGhlciBpbnN0YW5jZSBqdXN0IGxpa2UgdGhpcyBvbmUsIGJ1dCB3aXRoIHRoZXNlIGNoYW5nZXNcIlxuZnVuY3Rpb24gY2xvbmUoZHVyLCBhbHRzLCBjbGVhciA9IGZhbHNlKSB7XG4gIC8vIGRlZXAgbWVyZ2UgZm9yIHZhbHNcbiAgY29uc3QgY29uZiA9IHtcbiAgICB2YWx1ZXM6IGNsZWFyID8gYWx0cy52YWx1ZXMgOiB7IC4uLmR1ci52YWx1ZXMsIC4uLihhbHRzLnZhbHVlcyB8fCB7fSkgfSxcbiAgICBsb2M6IGR1ci5sb2MuY2xvbmUoYWx0cy5sb2MpLFxuICAgIGNvbnZlcnNpb25BY2N1cmFjeTogYWx0cy5jb252ZXJzaW9uQWNjdXJhY3kgfHwgZHVyLmNvbnZlcnNpb25BY2N1cmFjeSxcbiAgICBtYXRyaXg6IGFsdHMubWF0cml4IHx8IGR1ci5tYXRyaXgsXG4gIH07XG4gIHJldHVybiBuZXcgRHVyYXRpb24oY29uZik7XG59XG5cbmZ1bmN0aW9uIGR1cmF0aW9uVG9NaWxsaXMobWF0cml4LCB2YWxzKSB7XG4gIGxldCBzdW0gPSB2YWxzLm1pbGxpc2Vjb25kcyA/PyAwO1xuICBmb3IgKGNvbnN0IHVuaXQgb2YgcmV2ZXJzZVVuaXRzLnNsaWNlKDEpKSB7XG4gICAgaWYgKHZhbHNbdW5pdF0pIHtcbiAgICAgIHN1bSArPSB2YWxzW3VuaXRdICogbWF0cml4W3VuaXRdW1wibWlsbGlzZWNvbmRzXCJdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc3VtO1xufVxuXG4vLyBOQjogbXV0YXRlcyBwYXJhbWV0ZXJzXG5mdW5jdGlvbiBub3JtYWxpemVWYWx1ZXMobWF0cml4LCB2YWxzKSB7XG4gIC8vIHRoZSBsb2dpYyBiZWxvdyBhc3N1bWVzIHRoZSBvdmVyYWxsIHZhbHVlIG9mIHRoZSBkdXJhdGlvbiBpcyBwb3NpdGl2ZVxuICAvLyBpZiB0aGlzIGlzIG5vdCB0aGUgY2FzZSwgZmFjdG9yIGlzIHVzZWQgdG8gbWFrZSBpdCBzb1xuICBjb25zdCBmYWN0b3IgPSBkdXJhdGlvblRvTWlsbGlzKG1hdHJpeCwgdmFscykgPCAwID8gLTEgOiAxO1xuXG4gIG9yZGVyZWRVbml0cy5yZWR1Y2VSaWdodCgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbHNbY3VycmVudF0pKSB7XG4gICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNWYWwgPSB2YWxzW3ByZXZpb3VzXSAqIGZhY3RvcjtcbiAgICAgICAgY29uc3QgY29udiA9IG1hdHJpeFtjdXJyZW50XVtwcmV2aW91c107XG5cbiAgICAgICAgLy8gaWYgKHByZXZpb3VzVmFsIDwgMCk6XG4gICAgICAgIC8vIGxvd2VyIG9yZGVyIHVuaXQgaXMgbmVnYXRpdmUgKGUuZy4geyB5ZWFyczogMiwgZGF5czogLTIgfSlcbiAgICAgICAgLy8gbm9ybWFsaXplIHRoaXMgYnkgcmVkdWNpbmcgdGhlIGhpZ2hlciBvcmRlciB1bml0IGJ5IHRoZSBhcHByb3ByaWF0ZSBhbW91bnRcbiAgICAgICAgLy8gYW5kIGluY3JlYXNpbmcgdGhlIGxvd2VyIG9yZGVyIHVuaXRcbiAgICAgICAgLy8gdGhpcyBjYW4gbmV2ZXIgbWFrZSB0aGUgaGlnaGVyIG9yZGVyIHVuaXQgbmVnYXRpdmUsIGJlY2F1c2UgdGhpcyBmdW5jdGlvbiBvbmx5IG9wZXJhdGVzXG4gICAgICAgIC8vIG9uIHBvc2l0aXZlIGR1cmF0aW9ucywgc28gdGhlIGFtb3VudCBvZiB0aW1lIHJlcHJlc2VudGVkIGJ5IHRoZSBsb3dlciBvcmRlciB1bml0IGNhbm5vdFxuICAgICAgICAvLyBiZSBsYXJnZXIgdGhhbiB0aGUgaGlnaGVyIG9yZGVyIHVuaXRcbiAgICAgICAgLy8gZWxzZTpcbiAgICAgICAgLy8gbG93ZXIgb3JkZXIgdW5pdCBpcyBwb3NpdGl2ZSAoZS5nLiB7IHllYXJzOiAyLCBkYXlzOiA0NTAgfSBvciB7IHllYXJzOiAtMiwgZGF5czogNDUwIH0pXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSB3ZSBhdHRlbXB0IHRvIGNvbnZlcnQgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBsb3dlciBvcmRlciB1bml0IGludG9cbiAgICAgICAgLy8gdGhlIGhpZ2hlciBvcmRlciBvbmVcbiAgICAgICAgLy9cbiAgICAgICAgLy8gTWF0aC5mbG9vciB0YWtlcyBjYXJlIG9mIGJvdGggb2YgdGhlc2UgY2FzZXMsIHJvdW5kaW5nIGF3YXkgZnJvbSAwXG4gICAgICAgIC8vIGlmIHByZXZpb3VzVmFsIDwgMCBpdCBtYWtlcyB0aGUgYWJzb2x1dGUgdmFsdWUgbGFyZ2VyXG4gICAgICAgIC8vIGlmIHByZXZpb3VzVmFsID49IGl0IG1ha2VzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBzbWFsbGVyXG4gICAgICAgIGNvbnN0IHJvbGxVcCA9IE1hdGguZmxvb3IocHJldmlvdXNWYWwgLyBjb252KTtcbiAgICAgICAgdmFsc1tjdXJyZW50XSArPSByb2xsVXAgKiBmYWN0b3I7XG4gICAgICAgIHZhbHNbcHJldmlvdXNdIC09IHJvbGxVcCAqIGNvbnYgKiBmYWN0b3I7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH1cbiAgfSwgbnVsbCk7XG5cbiAgLy8gdHJ5IHRvIGNvbnZlcnQgYW55IGRlY2ltYWxzIGludG8gc21hbGxlciB1bml0cyBpZiBwb3NzaWJsZVxuICAvLyBmb3IgZXhhbXBsZSBmb3IgeyB5ZWFyczogMi41LCBkYXlzOiAwLCBzZWNvbmRzOiAwIH0gd2Ugd2FudCB0byBnZXQgeyB5ZWFyczogMiwgZGF5czogMTgyLCBob3VyczogMTIgfVxuICBvcmRlcmVkVW5pdHMucmVkdWNlKChwcmV2aW91cywgY3VycmVudCkgPT4ge1xuICAgIGlmICghaXNVbmRlZmluZWQodmFsc1tjdXJyZW50XSkpIHtcbiAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICBjb25zdCBmcmFjdGlvbiA9IHZhbHNbcHJldmlvdXNdICUgMTtcbiAgICAgICAgdmFsc1twcmV2aW91c10gLT0gZnJhY3Rpb247XG4gICAgICAgIHZhbHNbY3VycmVudF0gKz0gZnJhY3Rpb24gKiBtYXRyaXhbcHJldmlvdXNdW2N1cnJlbnRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcmV2aW91cztcbiAgICB9XG4gIH0sIG51bGwpO1xufVxuXG4vLyBSZW1vdmUgYWxsIHByb3BlcnRpZXMgd2l0aCBhIHZhbHVlIG9mIDAgZnJvbSBhbiBvYmplY3RcbmZ1bmN0aW9uIHJlbW92ZVplcm9lcyh2YWxzKSB7XG4gIGNvbnN0IG5ld1ZhbHMgPSB7fTtcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFscykpIHtcbiAgICBpZiAodmFsdWUgIT09IDApIHtcbiAgICAgIG5ld1ZhbHNba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3VmFscztcbn1cblxuLyoqXG4gKiBBIER1cmF0aW9uIG9iamVjdCByZXByZXNlbnRzIGEgcGVyaW9kIG9mIHRpbWUsIGxpa2UgXCIyIG1vbnRoc1wiIG9yIFwiMSBkYXksIDEgaG91clwiLiBDb25jZXB0dWFsbHksIGl0J3MganVzdCBhIG1hcCBvZiB1bml0cyB0byB0aGVpciBxdWFudGl0aWVzLCBhY2NvbXBhbmllZCBieSBzb21lIGFkZGl0aW9uYWwgY29uZmlndXJhdGlvbiBhbmQgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS4gVGhleSBjYW4gYmUgdXNlZCBvbiB0aGVpciBvd24gb3IgaW4gY29uanVuY3Rpb24gd2l0aCBvdGhlciBMdXhvbiB0eXBlczsgZm9yIGV4YW1wbGUsIHlvdSBjYW4gdXNlIHtAbGluayBEYXRlVGltZSNwbHVzfSB0byBhZGQgYSBEdXJhdGlvbiBvYmplY3QgdG8gYSBEYXRlVGltZSwgcHJvZHVjaW5nIGFub3RoZXIgRGF0ZVRpbWUuXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBhbmQgZ2V0dGVycyBpbiBEdXJhdGlvbjpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKiBUbyBjcmVhdGUgYSBEdXJhdGlvbiwgdXNlIHtAbGluayBEdXJhdGlvbi5mcm9tTWlsbGlzfSwge0BsaW5rIER1cmF0aW9uLmZyb21PYmplY3R9LCBvciB7QGxpbmsgRHVyYXRpb24uZnJvbUlTT30uXG4gKiAqICoqVW5pdCB2YWx1ZXMqKiBTZWUgdGhlIHtAbGluayBEdXJhdGlvbiN5ZWFyc30sIHtAbGluayBEdXJhdGlvbiNtb250aHN9LCB7QGxpbmsgRHVyYXRpb24jd2Vla3N9LCB7QGxpbmsgRHVyYXRpb24jZGF5c30sIHtAbGluayBEdXJhdGlvbiNob3Vyc30sIHtAbGluayBEdXJhdGlvbiNtaW51dGVzfSwge0BsaW5rIER1cmF0aW9uI3NlY29uZHN9LCB7QGxpbmsgRHVyYXRpb24jbWlsbGlzZWNvbmRzfSBhY2Nlc3NvcnMuXG4gKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSAge0BsaW5rIER1cmF0aW9uI2xvY2FsZX0gYW5kIHtAbGluayBEdXJhdGlvbiNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy5cbiAqICogKipUcmFuc2Zvcm1hdGlvbioqIFRvIGNyZWF0ZSBuZXcgRHVyYXRpb25zIG91dCBvZiBvbGQgb25lcyB1c2Uge0BsaW5rIER1cmF0aW9uI3BsdXN9LCB7QGxpbmsgRHVyYXRpb24jbWludXN9LCB7QGxpbmsgRHVyYXRpb24jbm9ybWFsaXplfSwge0BsaW5rIER1cmF0aW9uI3NldH0sIHtAbGluayBEdXJhdGlvbiNyZWNvbmZpZ3VyZX0sIHtAbGluayBEdXJhdGlvbiNzaGlmdFRvfSwgYW5kIHtAbGluayBEdXJhdGlvbiNuZWdhdGV9LlxuICogKiAqKk91dHB1dCoqIFRvIGNvbnZlcnQgdGhlIER1cmF0aW9uIGludG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCBzZWUge0BsaW5rIER1cmF0aW9uI2FzfSwge0BsaW5rIER1cmF0aW9uI3RvSVNPfSwge0BsaW5rIER1cmF0aW9uI3RvRm9ybWF0fSwgYW5kIHtAbGluayBEdXJhdGlvbiN0b0pTT059XG4gKlxuICogVGhlcmUncyBhcmUgbW9yZSBtZXRob2RzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uIGFuZCB2YWxpZGl0eSwgc2VlIHRoZSBleHRlcm5hbCBkb2N1bWVudGF0aW9uLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEdXJhdGlvbiB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgY29uc3QgYWNjdXJhdGUgPSBjb25maWcuY29udmVyc2lvbkFjY3VyYWN5ID09PSBcImxvbmd0ZXJtXCIgfHwgZmFsc2U7XG4gICAgbGV0IG1hdHJpeCA9IGFjY3VyYXRlID8gYWNjdXJhdGVNYXRyaXggOiBjYXN1YWxNYXRyaXg7XG5cbiAgICBpZiAoY29uZmlnLm1hdHJpeCkge1xuICAgICAgbWF0cml4ID0gY29uZmlnLm1hdHJpeDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnZhbHVlcyA9IGNvbmZpZy52YWx1ZXM7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sb2MgPSBjb25maWcubG9jIHx8IExvY2FsZS5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNvbnZlcnNpb25BY2N1cmFjeSA9IGFjY3VyYXRlID8gXCJsb25ndGVybVwiIDogXCJjYXN1YWxcIjtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubWF0cml4ID0gbWF0cml4O1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaXNMdXhvbkR1cmF0aW9uID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgRHVyYXRpb24gZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb3VudCBvZiBtaWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21NaWxsaXMoY291bnQsIG9wdHMpIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogY291bnQgfSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFycycgYW5kICdob3VycycuXG4gICAqIElmIHRoaXMgb2JqZWN0IGlzIGVtcHR5IHRoZW4gYSB6ZXJvIG1pbGxpc2Vjb25kcyBkdXJhdGlvbiBpcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIHRoZSBvYmplY3QgdG8gY3JlYXRlIHRoZSBEYXRlVGltZSBmcm9tXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoueWVhcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5xdWFydGVyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1vbnRoc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5c1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taWxsaXNlY29uZHNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzPVtdXSAtIG9wdGlvbnMgZm9yIGNyZWF0aW5nIHRoaXMgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5tYXRyaXg9T2JqZWN0XSAtIHRoZSBjdXN0b20gY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21PYmplY3Qob2JqLCBvcHRzID0ge30pIHtcbiAgICBpZiAob2JqID09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICBgRHVyYXRpb24uZnJvbU9iamVjdDogYXJndW1lbnQgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0LCBnb3QgJHtcbiAgICAgICAgICBvYmogPT09IG51bGwgPyBcIm51bGxcIiA6IHR5cGVvZiBvYmpcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7XG4gICAgICB2YWx1ZXM6IG5vcm1hbGl6ZU9iamVjdChvYmosIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRzKSxcbiAgICAgIGNvbnZlcnNpb25BY2N1cmFjeTogb3B0cy5jb252ZXJzaW9uQWNjdXJhY3ksXG4gICAgICBtYXRyaXg6IG9wdHMubWF0cml4LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gRHVyYXRpb25MaWtlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdCB8IG51bWJlciB8IER1cmF0aW9ufSBkdXJhdGlvbkxpa2VcbiAgICogT25lIG9mOlxuICAgKiAtIG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcnMnIGFuZCAnaG91cnMnLlxuICAgKiAtIG51bWJlciByZXByZXNlbnRpbmcgbWlsbGlzZWNvbmRzXG4gICAqIC0gRHVyYXRpb24gaW5zdGFuY2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbkxpa2UpIHtcbiAgICBpZiAoaXNOdW1iZXIoZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21NaWxsaXMoZHVyYXRpb25MaWtlKTtcbiAgICB9IGVsc2UgaWYgKER1cmF0aW9uLmlzRHVyYXRpb24oZHVyYXRpb25MaWtlKSkge1xuICAgICAgcmV0dXJuIGR1cmF0aW9uTGlrZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkdXJhdGlvbkxpa2UgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KGR1cmF0aW9uTGlrZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgYFVua25vd24gZHVyYXRpb24gYXJndW1lbnQgJHtkdXJhdGlvbkxpa2V9IG9mIHR5cGUgJHt0eXBlb2YgZHVyYXRpb25MaWtlfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYW4gSVNPIDg2MDEgZHVyYXRpb24gc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRleHQgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI0R1cmF0aW9uc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQM1k2TTFXNERUMTJIMzBNNVMnKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMywgbW9udGhzOiA2LCB3ZWVrczogMSwgZGF5czogNCwgaG91cnM6IDEyLCBtaW51dGVzOiAzMCwgc2Vjb25kczogNSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1BUMjNIJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDIzIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUDVZM00nKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogNSwgbW9udGhzOiAzIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgZnJvbUlTTyh0ZXh0LCBvcHRzKSB7XG4gICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT0R1cmF0aW9uKHRleHQpO1xuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHBhcnNlZCwgb3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIHRpbWUgc3RyaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRleHQgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBwYXJzaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZXNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExOjIyOjMzLjQ0NCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMjIsIHNlY29uZHM6IDMzLCBtaWxsaXNlY29uZHM6IDQ0NCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTowMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCdUMTEwMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21JU09UaW1lKHRleHQsIG9wdHMpIHtcbiAgICBjb25zdCBbcGFyc2VkXSA9IHBhcnNlSVNPVGltZU9ubHkodGV4dCk7XG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIGB0aGUgaW5wdXQgXCIke3RleHR9XCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBkYXRldGltZSBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkge1xuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIER1cmF0aW9uIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWREdXJhdGlvbkVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IER1cmF0aW9uKHsgaW52YWxpZCB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemVVbml0KHVuaXQpIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgICAgeWVhcjogXCJ5ZWFyc1wiLFxuICAgICAgeWVhcnM6IFwieWVhcnNcIixcbiAgICAgIHF1YXJ0ZXI6IFwicXVhcnRlcnNcIixcbiAgICAgIHF1YXJ0ZXJzOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBtb250aDogXCJtb250aHNcIixcbiAgICAgIG1vbnRoczogXCJtb250aHNcIixcbiAgICAgIHdlZWs6IFwid2Vla3NcIixcbiAgICAgIHdlZWtzOiBcIndlZWtzXCIsXG4gICAgICBkYXk6IFwiZGF5c1wiLFxuICAgICAgZGF5czogXCJkYXlzXCIsXG4gICAgICBob3VyOiBcImhvdXJzXCIsXG4gICAgICBob3VyczogXCJob3Vyc1wiLFxuICAgICAgbWludXRlOiBcIm1pbnV0ZXNcIixcbiAgICAgIG1pbnV0ZXM6IFwibWludXRlc1wiLFxuICAgICAgc2Vjb25kOiBcInNlY29uZHNcIixcbiAgICAgIHNlY29uZHM6IFwic2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRzXCIsXG4gICAgICBtaWxsaXNlY29uZHM6IFwibWlsbGlzZWNvbmRzXCIsXG4gICAgfVt1bml0ID8gdW5pdC50b0xvd2VyQ2FzZSgpIDogdW5pdF07XG5cbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHRocm93IG5ldyBJbnZhbGlkVW5pdEVycm9yKHVuaXQpO1xuXG4gICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGEgRHVyYXRpb24uIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc0R1cmF0aW9uKG8pIHtcbiAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRHVyYXRpb24pIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCAgdGhlIGxvY2FsZSBvZiBhIER1cmF0aW9uLCBzdWNoICdlbi1HQidcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBsb2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXJpbmcgc3lzdGVtIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2JlbmcnLiBUaGUgbnVtYmVyaW5nIHN5c3RlbSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRHVyYXRpb25cbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLiBZb3UgbWF5IHVzZSB0aGVzZSB0b2tlbnM6XG4gICAqICogYFNgIGZvciBtaWxsaXNlY29uZHNcbiAgICogKiBgc2AgZm9yIHNlY29uZHNcbiAgICogKiBgbWAgZm9yIG1pbnV0ZXNcbiAgICogKiBgaGAgZm9yIGhvdXJzXG4gICAqICogYGRgIGZvciBkYXlzXG4gICAqICogYHdgIGZvciB3ZWVrc1xuICAgKiAqIGBNYCBmb3IgbW9udGhzXG4gICAqICogYHlgIGZvciB5ZWFyc1xuICAgKiBOb3RlczpcbiAgICogKiBBZGQgcGFkZGluZyBieSByZXBlYXRpbmcgdGhlIHRva2VuLCBlLmcuIFwieXlcIiBwYWRzIHRoZSB5ZWFycyB0byB0d28gZGlnaXRzLCBcImhoaGhcIiBwYWRzIHRoZSBob3VycyBvdXQgdG8gZm91ciBkaWdpdHNcbiAgICogKiBUb2tlbnMgY2FuIGJlIGVzY2FwZWQgYnkgd3JhcHBpbmcgd2l0aCBzaW5nbGUgcXVvdGVzLlxuICAgKiAqIFRoZSBkdXJhdGlvbiB3aWxsIGJlIGNvbnZlcnRlZCB0byB0aGUgc2V0IG9mIHVuaXRzIGluIHRoZSBmb3JtYXQgc3RyaW5nIHVzaW5nIHtAbGluayBEdXJhdGlvbiNzaGlmdFRvfSBhbmQgdGhlIER1cmF0aW9ucydzIGNvbnZlcnNpb24gYWNjdXJhY3kgc2V0dGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsb29yPXRydWVdIC0gZmxvb3IgbnVtZXJpY2FsIHZhbHVlc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJ5IGQgc1wiKSAvLz0+IFwiMSA2IDJcIlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJ5eSBkZCBzc3NcIikgLy89PiBcIjAxIDA2IDAwMlwiXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcIk0gU1wiKSAvLz0+IFwiMTIgNTE4NDAyMDAwXCJcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Gb3JtYXQoZm10LCBvcHRzID0ge30pIHtcbiAgICAvLyByZXZlcnNlLWNvbXBhdCBzaW5jZSAxLjI7IHdlIGFsd2F5cyByb3VuZCBkb3duIG5vdywgbmV2ZXIgdXAsIGFuZCB3ZSBkbyBpdCBieSBkZWZhdWx0XG4gICAgY29uc3QgZm10T3B0cyA9IHtcbiAgICAgIC4uLm9wdHMsXG4gICAgICBmbG9vcjogb3B0cy5yb3VuZCAhPT0gZmFsc2UgJiYgb3B0cy5mbG9vciAhPT0gZmFsc2UsXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MsIGZtdE9wdHMpLmZvcm1hdER1cmF0aW9uRnJvbVN0cmluZyh0aGlzLCBmbXQpXG4gICAgICA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIER1cmF0aW9uIHdpdGggYWxsIHVuaXRzIGluY2x1ZGVkLlxuICAgKiBUbyBtb2RpZnkgaXRzIGJlaGF2aW9yLCB1c2UgYGxpc3RTdHlsZWAgYW5kIGFueSBJbnRsLk51bWJlckZvcm1hdCBvcHRpb24sIHRob3VnaCBgdW5pdERpc3BsYXlgIGlzIGVzcGVjaWFsbHkgcmVsZXZhbnQuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSW50bC9OdW1iZXJGb3JtYXQvTnVtYmVyRm9ybWF0I29wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBGb3JtYXR0aW5nIG9wdGlvbnMuIEFjY2VwdHMgdGhlIHNhbWUga2V5cyBhcyB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIgb2YgdGhlIG5hdGl2ZSBgSW50bC5OdW1iZXJGb3JtYXRgIGNvbnN0cnVjdG9yLCBhcyB3ZWxsIGFzIGBsaXN0U3R5bGVgLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubGlzdFN0eWxlPSduYXJyb3cnXSAtIEhvdyB0byBmb3JtYXQgdGhlIG1lcmdlZCBsaXN0LiBDb3JyZXNwb25kcyB0byB0aGUgYHN0eWxlYCBwcm9wZXJ0eSBvZiB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIgb2YgdGhlIG5hdGl2ZSBgSW50bC5MaXN0Rm9ybWF0YCBjb25zdHJ1Y3Rvci5cbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogdmFyIGR1ciA9IER1cmF0aW9uLmZyb21PYmplY3QoeyBkYXlzOiAxLCBob3VyczogNSwgbWludXRlczogNiB9KVxuICAgKiBkdXIudG9IdW1hbigpIC8vPT4gJzEgZGF5LCA1IGhvdXJzLCA2IG1pbnV0ZXMnXG4gICAqIGR1ci50b0h1bWFuKHsgbGlzdFN0eWxlOiBcImxvbmdcIiB9KSAvLz0+ICcxIGRheSwgNSBob3VycywgYW5kIDYgbWludXRlcydcbiAgICogZHVyLnRvSHVtYW4oeyB1bml0RGlzcGxheTogXCJzaG9ydFwiIH0pIC8vPT4gJzEgZGF5LCA1IGhyLCA2IG1pbidcbiAgICogYGBgXG4gICAqL1xuICB0b0h1bWFuKG9wdHMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcblxuICAgIGNvbnN0IGwgPSBvcmRlcmVkVW5pdHNcbiAgICAgIC5tYXAoKHVuaXQpID0+IHtcbiAgICAgICAgY29uc3QgdmFsID0gdGhpcy52YWx1ZXNbdW5pdF07XG4gICAgICAgIGlmIChpc1VuZGVmaW5lZCh2YWwpKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubG9jXG4gICAgICAgICAgLm51bWJlckZvcm1hdHRlcih7IHN0eWxlOiBcInVuaXRcIiwgdW5pdERpc3BsYXk6IFwibG9uZ1wiLCAuLi5vcHRzLCB1bml0OiB1bml0LnNsaWNlKDAsIC0xKSB9KVxuICAgICAgICAgIC5mb3JtYXQodmFsKTtcbiAgICAgIH0pXG4gICAgICAuZmlsdGVyKChuKSA9PiBuKTtcblxuICAgIHJldHVybiB0aGlzLmxvY1xuICAgICAgLmxpc3RGb3JtYXR0ZXIoeyB0eXBlOiBcImNvbmp1bmN0aW9uXCIsIHN0eWxlOiBvcHRzLmxpc3RTdHlsZSB8fCBcIm5hcnJvd1wiLCAuLi5vcHRzIH0pXG4gICAgICAuZm9ybWF0KGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRHVyYXRpb24ncyB2YWx1ZXMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvT2JqZWN0KCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307XG4gICAgcmV0dXJuIHsgLi4udGhpcy52YWx1ZXMgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAzLCBzZWNvbmRzOiA0NSB9KS50b0lTTygpIC8vPT4gJ1AzWVQ0NVMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDQsIHNlY29uZHM6IDQ1IH0pLnRvSVNPKCkgLy89PiAnUDRNVDQ1UydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNSB9KS50b0lTTygpIC8vPT4gJ1A1TSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbnV0ZXM6IDUgfSkudG9JU08oKSAvLz0+ICdQVDVNJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWlsbGlzZWNvbmRzOiA2IH0pLnRvSVNPKCkgLy89PiAnUFQwLjAwNlMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPKCkge1xuICAgIC8vIHdlIGNvdWxkIHVzZSB0aGUgZm9ybWF0dGVyLCBidXQgdGhpcyBpcyBhbiBlYXNpZXIgd2F5IHRvIGdldCB0aGUgbWluaW11bSBzdHJpbmdcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICBsZXQgcyA9IFwiUFwiO1xuICAgIGlmICh0aGlzLnllYXJzICE9PSAwKSBzICs9IHRoaXMueWVhcnMgKyBcIllcIjtcbiAgICBpZiAodGhpcy5tb250aHMgIT09IDAgfHwgdGhpcy5xdWFydGVycyAhPT0gMCkgcyArPSB0aGlzLm1vbnRocyArIHRoaXMucXVhcnRlcnMgKiAzICsgXCJNXCI7XG4gICAgaWYgKHRoaXMud2Vla3MgIT09IDApIHMgKz0gdGhpcy53ZWVrcyArIFwiV1wiO1xuICAgIGlmICh0aGlzLmRheXMgIT09IDApIHMgKz0gdGhpcy5kYXlzICsgXCJEXCI7XG4gICAgaWYgKHRoaXMuaG91cnMgIT09IDAgfHwgdGhpcy5taW51dGVzICE9PSAwIHx8IHRoaXMuc2Vjb25kcyAhPT0gMCB8fCB0aGlzLm1pbGxpc2Vjb25kcyAhPT0gMClcbiAgICAgIHMgKz0gXCJUXCI7XG4gICAgaWYgKHRoaXMuaG91cnMgIT09IDApIHMgKz0gdGhpcy5ob3VycyArIFwiSFwiO1xuICAgIGlmICh0aGlzLm1pbnV0ZXMgIT09IDApIHMgKz0gdGhpcy5taW51dGVzICsgXCJNXCI7XG4gICAgaWYgKHRoaXMuc2Vjb25kcyAhPT0gMCB8fCB0aGlzLm1pbGxpc2Vjb25kcyAhPT0gMClcbiAgICAgIC8vIHRoaXMgd2lsbCBoYW5kbGUgXCJmbG9hdGluZyBwb2ludCBtYWRuZXNzXCIgYnkgcmVtb3ZpbmcgZXh0cmEgZGVjaW1hbCBwbGFjZXNcbiAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzU4ODAwNC9pcy1mbG9hdGluZy1wb2ludC1tYXRoLWJyb2tlblxuICAgICAgcyArPSByb3VuZFRvKHRoaXMuc2Vjb25kcyArIHRoaXMubWlsbGlzZWNvbmRzIC8gMTAwMCwgMykgKyBcIlNcIjtcbiAgICBpZiAocyA9PT0gXCJQXCIpIHMgKz0gXCJUMFNcIjtcbiAgICByZXR1cm4gcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiwgZm9ybWF0dGVkIGFzIGEgdGltZSBvZiBkYXkuXG4gICAqIE5vdGUgdGhhdCB0aGlzIHdpbGwgcmV0dXJuIG51bGwgaWYgdGhlIGR1cmF0aW9uIGlzIGludmFsaWQsIG5lZ2F0aXZlLCBvciBlcXVhbCB0byBvciBncmVhdGVyIHRoYW4gMjQgaG91cnMuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoKSAvLz0+ICcxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NNaWxsaXNlY29uZHM6IHRydWUgfSkgLy89PiAnMTE6MDA6MDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IGluY2x1ZGVQcmVmaXg6IHRydWUgfSkgLy89PiAnVDExOjAwOjAwLjAwMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTEwMDAwLjAwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09UaW1lKG9wdHMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IG1pbGxpcyA9IHRoaXMudG9NaWxsaXMoKTtcbiAgICBpZiAobWlsbGlzIDwgMCB8fCBtaWxsaXMgPj0gODY0MDAwMDApIHJldHVybiBudWxsO1xuXG4gICAgb3B0cyA9IHtcbiAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzOiBmYWxzZSxcbiAgICAgIHN1cHByZXNzU2Vjb25kczogZmFsc2UsXG4gICAgICBpbmNsdWRlUHJlZml4OiBmYWxzZSxcbiAgICAgIGZvcm1hdDogXCJleHRlbmRlZFwiLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIGluY2x1ZGVPZmZzZXQ6IGZhbHNlLFxuICAgIH07XG5cbiAgICBjb25zdCBkYXRlVGltZSA9IERhdGVUaW1lLmZyb21NaWxsaXMobWlsbGlzLCB7IHpvbmU6IFwiVVRDXCIgfSk7XG4gICAgcmV0dXJuIGRhdGVUaW1lLnRvSVNPVGltZShvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBKU09OLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBkZWJ1Z2dpbmcuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB0aGUgUkVQTC5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgW1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGBEdXJhdGlvbiB7IHZhbHVlczogJHtKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlcyl9IH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYER1cmF0aW9uIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gbWlsbGlzZWNvbmRzIHZhbHVlIG9mIHRoaXMgRHVyYXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvTWlsbGlzKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gTmFOO1xuXG4gICAgcmV0dXJuIGR1cmF0aW9uVG9NaWxsaXModGhpcy5tYXRyaXgsIHRoaXMudmFsdWVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLiBBbGlhcyBvZiB7QGxpbmsgdG9NaWxsaXN9XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHZhbHVlT2YoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9NaWxsaXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIHRoaXMgRHVyYXRpb24gbG9uZ2VyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gYWRkLiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHBsdXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgZm9yIChjb25zdCBrIG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5KGR1ci52YWx1ZXMsIGspIHx8IGhhc093blByb3BlcnR5KHRoaXMudmFsdWVzLCBrKSkge1xuICAgICAgICByZXN1bHRba10gPSBkdXIuZ2V0KGspICsgdGhpcy5nZXQoayk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiByZXN1bHQgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIHNob3J0ZXIgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBtaW51cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pO1xuICAgIHJldHVybiB0aGlzLnBsdXMoZHVyLm5lZ2F0ZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FsZSB0aGlzIER1cmF0aW9uIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gLSBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCB1bml0LiBBcml0eSBpcyAxIG9yIDI6IHRoZSB2YWx1ZSBvZiB0aGUgdW5pdCBhbmQsIG9wdGlvbmFsbHksIHRoZSB1bml0IG5hbWUuIE11c3QgcmV0dXJuIGEgbnVtYmVyLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIG1pbnV0ZXM6IDMwIH0pLm1hcFVuaXRzKHggPT4geCAqIDIpIC8vPT4geyBob3VyczogMiwgbWludXRlczogNjAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIG1pbnV0ZXM6IDMwIH0pLm1hcFVuaXRzKCh4LCB1KSA9PiB1ID09PSBcImhvdXJzXCIgPyB4ICogMiA6IHgpIC8vPT4geyBob3VyczogMiwgbWludXRlczogMzAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIG1hcFVuaXRzKGZuKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykpIHtcbiAgICAgIHJlc3VsdFtrXSA9IGFzTnVtYmVyKGZuKHRoaXMudmFsdWVzW2tdLCBrKSk7XG4gICAgfVxuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogcmVzdWx0IH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5J1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMiwgZGF5czogM30pLmdldCgneWVhcnMnKSAvLz0+IDJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ21vbnRocycpIC8vPT4gMFxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMiwgZGF5czogM30pLmdldCgnZGF5cycpIC8vPT4gM1xuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW0R1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCldO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnNcbiAgICogQGV4YW1wbGUgZHVyLnNldCh7IHllYXJzOiAyMDE3IH0pXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyBob3VyczogOCwgbWludXRlczogMzAgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzZXQodmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3QgbWl4ZWQgPSB7IC4uLnRoaXMudmFsdWVzLCAuLi5ub3JtYWxpemVPYmplY3QodmFsdWVzLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSB9O1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogbWl4ZWQgfSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlIGFuZC9vciBudW1iZXJpbmdTeXN0ZW0uICBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBleGFtcGxlIGR1ci5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogJ2VuLUdCJyB9KVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHJlY29uZmlndXJlKHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGNvbnZlcnNpb25BY2N1cmFjeSwgbWF0cml4IH0gPSB7fSkge1xuICAgIGNvbnN0IGxvYyA9IHRoaXMubG9jLmNsb25lKHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0gfSk7XG4gICAgY29uc3Qgb3B0cyA9IHsgbG9jLCBtYXRyaXgsIGNvbnZlcnNpb25BY2N1cmFjeSB9O1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgZHVyYXRpb24gaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGVzJyBvciAnZGF5cydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnZGF5cycpIC8vPT4gMzY1XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ21vbnRocycpIC8vPT4gMTJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7aG91cnM6IDYwfSkuYXMoJ2RheXMnKSAvLz0+IDIuNVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBhcyh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuc2hpZnRUbyh1bml0KS5nZXQodW5pdCkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmVkdWNlIHRoaXMgRHVyYXRpb24gdG8gaXRzIGNhbm9uaWNhbCByZXByZXNlbnRhdGlvbiBpbiBpdHMgY3VycmVudCB1bml0cy5cbiAgICogQXNzdW1pbmcgdGhlIG92ZXJhbGwgdmFsdWUgb2YgdGhlIER1cmF0aW9uIGlzIHBvc2l0aXZlLCB0aGlzIG1lYW5zOlxuICAgKiAtIGV4Y2Vzc2l2ZSB2YWx1ZXMgZm9yIGxvd2VyLW9yZGVyIHVuaXRzIGFyZSBjb252ZXJ0ZWQgdG8gaGlnaGVyLW9yZGVyIHVuaXRzIChpZiBwb3NzaWJsZSwgc2VlIGZpcnN0IGFuZCBzZWNvbmQgZXhhbXBsZSlcbiAgICogLSBuZWdhdGl2ZSBsb3dlci1vcmRlciB1bml0cyBhcmUgY29udmVydGVkIHRvIGhpZ2hlciBvcmRlciB1bml0cyAodGhlcmUgbXVzdCBiZSBzdWNoIGEgaGlnaGVyIG9yZGVyIHVuaXQsIG90aGVyd2lzZVxuICAgKiAgIHRoZSBvdmVyYWxsIHZhbHVlIHdvdWxkIGJlIG5lZ2F0aXZlLCBzZWUgdGhpcmQgZXhhbXBsZSlcbiAgICogLSBmcmFjdGlvbmFsIHZhbHVlcyBmb3IgaGlnaGVyLW9yZGVyIHVuaXRzIGFyZSBjb252ZXJ0ZWQgdG8gbG93ZXItb3JkZXIgdW5pdHMgKGlmIHBvc3NpYmxlLCBzZWUgZm91cnRoIGV4YW1wbGUpXG4gICAqXG4gICAqIElmIHRoZSBvdmVyYWxsIHZhbHVlIGlzIG5lZ2F0aXZlLCB0aGUgcmVzdWx0IG9mIHRoaXMgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG8gYHRoaXMubmVnYXRlKCkubm9ybWFsaXplKCkubmVnYXRlKClgLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDIsIGRheXM6IDUwMDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDE1LCBkYXlzOiAyNTUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogNTAwMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyBkYXlzOiA1MDAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMiwgbWludXRlczogLTQ1IH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMTUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDIuNSwgZGF5czogMCwgaG91cnM6IDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDIsIGRheXM6IDE4MiwgaG91cnM6IDEyIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBub3JtYWxpemUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgbm9ybWFsaXplVmFsdWVzKHRoaXMubWF0cml4LCB2YWxzKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IHZhbHMgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVzY2FsZSB1bml0cyB0byBpdHMgbGFyZ2VzdCByZXByZXNlbnRhdGlvblxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWlsbGlzZWNvbmRzOiA5MDAwMCB9KS5yZXNjYWxlKCkudG9PYmplY3QoKSAvLz0+IHsgbWludXRlczogMSwgc2Vjb25kczogMzAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHJlc2NhbGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHZhbHMgPSByZW1vdmVaZXJvZXModGhpcy5ub3JtYWxpemUoKS5zaGlmdFRvQWxsKCkudG9PYmplY3QoKSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiB2YWxzIH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgdGhpcyBEdXJhdGlvbiBpbnRvIGl0cyByZXByZXNlbnRhdGlvbiBpbiBhIGRpZmZlcmVudCBzZXQgb2YgdW5pdHMuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkuc2hpZnRUbygnbWludXRlcycsICdtaWxsaXNlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiA2MCwgbWlsbGlzZWNvbmRzOiAzMDAwMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc2hpZnRUbyguLi51bml0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGlmICh1bml0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHVuaXRzID0gdW5pdHMubWFwKCh1KSA9PiBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHUpKTtcblxuICAgIGNvbnN0IGJ1aWx0ID0ge30sXG4gICAgICBhY2N1bXVsYXRlZCA9IHt9LFxuICAgICAgdmFscyA9IHRoaXMudG9PYmplY3QoKTtcbiAgICBsZXQgbGFzdFVuaXQ7XG5cbiAgICBmb3IgKGNvbnN0IGsgb2Ygb3JkZXJlZFVuaXRzKSB7XG4gICAgICBpZiAodW5pdHMuaW5kZXhPZihrKSA+PSAwKSB7XG4gICAgICAgIGxhc3RVbml0ID0gaztcblxuICAgICAgICBsZXQgb3duID0gMDtcblxuICAgICAgICAvLyBhbnl0aGluZyB3ZSBoYXZlbid0IGJvaWxlZCBkb3duIHlldCBzaG91bGQgZ2V0IGJvaWxlZCB0byB0aGlzIHVuaXRcbiAgICAgICAgZm9yIChjb25zdCBhayBpbiBhY2N1bXVsYXRlZCkge1xuICAgICAgICAgIG93biArPSB0aGlzLm1hdHJpeFtha11ba10gKiBhY2N1bXVsYXRlZFtha107XG4gICAgICAgICAgYWNjdW11bGF0ZWRbYWtdID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBsdXMgYW55dGhpbmcgdGhhdCdzIGFscmVhZHkgaW4gdGhpcyB1bml0XG4gICAgICAgIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICAgIG93biArPSB2YWxzW2tdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb25seSBrZWVwIHRoZSBpbnRlZ2VyIHBhcnQgZm9yIG5vdyBpbiB0aGUgaG9wZXMgb2YgcHV0dGluZyBhbnkgZGVjaW1hbCBwYXJ0XG4gICAgICAgIC8vIGludG8gYSBzbWFsbGVyIHVuaXQgbGF0ZXJcbiAgICAgICAgY29uc3QgaSA9IE1hdGgudHJ1bmMob3duKTtcbiAgICAgICAgYnVpbHRba10gPSBpO1xuICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IChvd24gKiAxMDAwIC0gaSAqIDEwMDApIC8gMTAwMDtcblxuICAgICAgICAvLyBvdGhlcndpc2UsIGtlZXAgaXQgaW4gdGhlIHdpbmdzIHRvIGJvaWwgaXQgbGF0ZXJcbiAgICAgIH0gZWxzZSBpZiAoaXNOdW1iZXIodmFsc1trXSkpIHtcbiAgICAgICAgYWNjdW11bGF0ZWRba10gPSB2YWxzW2tdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGFueXRoaW5nIGxlZnRvdmVyIGJlY29tZXMgdGhlIGRlY2ltYWwgZm9yIHRoZSBsYXN0IHVuaXRcbiAgICAvLyBsYXN0VW5pdCBtdXN0IGJlIGRlZmluZWQgc2luY2UgdW5pdHMgaXMgbm90IGVtcHR5XG4gICAgZm9yIChjb25zdCBrZXkgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgIGlmIChhY2N1bXVsYXRlZFtrZXldICE9PSAwKSB7XG4gICAgICAgIGJ1aWx0W2xhc3RVbml0XSArPVxuICAgICAgICAgIGtleSA9PT0gbGFzdFVuaXQgPyBhY2N1bXVsYXRlZFtrZXldIDogYWNjdW11bGF0ZWRba2V5XSAvIHRoaXMubWF0cml4W2xhc3RVbml0XVtrZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgYnVpbHQpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogYnVpbHQgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogU2hpZnQgdGhpcyBEdXJhdGlvbiB0byBhbGwgYXZhaWxhYmxlIHVuaXRzLlxuICAgKiBTYW1lIGFzIHNoaWZ0VG8oXCJ5ZWFyc1wiLCBcIm1vbnRoc1wiLCBcIndlZWtzXCIsIFwiZGF5c1wiLCBcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIiwgXCJtaWxsaXNlY29uZHNcIilcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzaGlmdFRvQWxsKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gdGhpcy5zaGlmdFRvKFxuICAgICAgXCJ5ZWFyc1wiLFxuICAgICAgXCJtb250aHNcIixcbiAgICAgIFwid2Vla3NcIixcbiAgICAgIFwiZGF5c1wiLFxuICAgICAgXCJob3Vyc1wiLFxuICAgICAgXCJtaW51dGVzXCIsXG4gICAgICBcInNlY29uZHNcIixcbiAgICAgIFwibWlsbGlzZWNvbmRzXCJcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbmVnYXRpdmUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5uZWdhdGUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogLTEsIHNlY29uZHM6IC0zMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbmVnYXRlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBuZWdhdGVkID0ge307XG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkge1xuICAgICAgbmVnYXRlZFtrXSA9IHRoaXMudmFsdWVzW2tdID09PSAwID8gMCA6IC10aGlzLnZhbHVlc1trXTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiBuZWdhdGVkIH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgeWVhcnMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgeWVhcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnllYXJzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWFydGVycy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBxdWFydGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMucXVhcnRlcnMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1vbnRocy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtb250aHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1vbnRocyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2Vla3NcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMud2Vla3MgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheXMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5cygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuZGF5cyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaG91cnMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgaG91cnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLmhvdXJzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtaW51dGVzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbnV0ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbnV0ZXMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNlY29uZHMuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCBzZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5zZWNvbmRzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtaWxsaXNlY29uZHMuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCBtaWxsaXNlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLm1pbGxpc2Vjb25kcyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgRHVyYXRpb24gaXMgaW52YWxpZC4gSW52YWxpZCBkdXJhdGlvbnMgYXJlIHJldHVybmVkIGJ5IGRpZmYgb3BlcmF0aW9uc1xuICAgKiBvbiBpbnZhbGlkIERhdGVUaW1lcyBvciBJbnRlcnZhbHMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZFJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEdXJhdGlvbiBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRHVyYXRpb24gaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkRXhwbGFuYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIER1cmF0aW9ucyBhcmUgZXF1YWwgaWZmIHRoZXkgaGF2ZSB0aGUgc2FtZSB1bml0cyBhbmQgdGhlIHNhbWUgdmFsdWVzIGZvciBlYWNoIHVuaXQuXG4gICAqIEBwYXJhbSB7RHVyYXRpb259IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5sb2MuZXF1YWxzKG90aGVyLmxvYykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcSh2MSwgdjIpIHtcbiAgICAgIC8vIENvbnNpZGVyIDAgYW5kIHVuZGVmaW5lZCBhcyBlcXVhbFxuICAgICAgaWYgKHYxID09PSB1bmRlZmluZWQgfHwgdjEgPT09IDApIHJldHVybiB2MiA9PT0gdW5kZWZpbmVkIHx8IHYyID09PSAwO1xuICAgICAgcmV0dXJuIHYxID09PSB2MjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHUgb2Ygb3JkZXJlZFVuaXRzKSB7XG4gICAgICBpZiAoIWVxKHRoaXMudmFsdWVzW3VdLCBvdGhlci52YWx1ZXNbdV0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsICJpbXBvcnQgRGF0ZVRpbWUsIHsgZnJpZW5kbHlEYXRlVGltZSB9IGZyb20gXCIuL2RhdGV0aW1lLmpzXCI7XG5pbXBvcnQgRHVyYXRpb24gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IHsgSW52YWxpZEFyZ3VtZW50RXJyb3IsIEludmFsaWRJbnRlcnZhbEVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgSW52YWxpZCBmcm9tIFwiLi9pbXBsL2ludmFsaWQuanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vaW1wbC9mb3JtYXR0ZXIuanNcIjtcbmltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vaW1wbC9mb3JtYXRzLmpzXCI7XG5cbmNvbnN0IElOVkFMSUQgPSBcIkludmFsaWQgSW50ZXJ2YWxcIjtcblxuLy8gY2hlY2tzIGlmIHRoZSBzdGFydCBpcyBlcXVhbCB0byBvciBiZWZvcmUgdGhlIGVuZFxuZnVuY3Rpb24gdmFsaWRhdGVTdGFydEVuZChzdGFydCwgZW5kKSB7XG4gIGlmICghc3RhcnQgfHwgIXN0YXJ0LmlzVmFsaWQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcIm1pc3Npbmcgb3IgaW52YWxpZCBzdGFydFwiKTtcbiAgfSBlbHNlIGlmICghZW5kIHx8ICFlbmQuaXNWYWxpZCkge1xuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwibWlzc2luZyBvciBpbnZhbGlkIGVuZFwiKTtcbiAgfSBlbHNlIGlmIChlbmQgPCBzdGFydCkge1xuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFxuICAgICAgXCJlbmQgYmVmb3JlIHN0YXJ0XCIsXG4gICAgICBgVGhlIGVuZCBvZiBhbiBpbnRlcnZhbCBtdXN0IGJlIGFmdGVyIGl0cyBzdGFydCwgYnV0IHlvdSBoYWQgc3RhcnQ9JHtzdGFydC50b0lTTygpfSBhbmQgZW5kPSR7ZW5kLnRvSVNPKCl9YFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBBbiBJbnRlcnZhbCBvYmplY3QgcmVwcmVzZW50cyBhIGhhbGYtb3BlbiBpbnRlcnZhbCBvZiB0aW1lLCB3aGVyZSBlYWNoIGVuZHBvaW50IGlzIGEge0BsaW5rIERhdGVUaW1lfS4gQ29uY2VwdHVhbGx5LCBpdCdzIGEgY29udGFpbmVyIGZvciB0aG9zZSB0d28gZW5kcG9pbnRzLCBhY2NvbXBhbmllZCBieSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgY29tcGFyaW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIHRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgbWV0aG9kcyBhbmQgZ2V0dGVycyBpbiBJbnRlcnZhbDpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKiBUbyBjcmVhdGUgYW4gSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwuZnJvbURhdGVUaW1lc30sIHtAbGluayBJbnRlcnZhbC5hZnRlcn0sIHtAbGluayBJbnRlcnZhbC5iZWZvcmV9LCBvciB7QGxpbmsgSW50ZXJ2YWwuZnJvbUlTT30uXG4gKiAqICoqQWNjZXNzb3JzKiogVXNlIHtAbGluayBJbnRlcnZhbCNzdGFydH0gYW5kIHtAbGluayBJbnRlcnZhbCNlbmR9IHRvIGdldCB0aGUgc3RhcnQgYW5kIGVuZC5cbiAqICogKipJbnRlcnJvZ2F0aW9uKiogVG8gYW5hbHl6ZSB0aGUgSW50ZXJ2YWwsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjY291bnR9LCB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSwge0BsaW5rIEludGVydmFsI2hhc1NhbWV9LCB7QGxpbmsgSW50ZXJ2YWwjY29udGFpbnN9LCB7QGxpbmsgSW50ZXJ2YWwjaXNBZnRlcn0sIG9yIHtAbGluayBJbnRlcnZhbCNpc0JlZm9yZX0uXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgb3RoZXIgSW50ZXJ2YWxzIG91dCBvZiB0aGlzIG9uZSwgdXNlIHtAbGluayBJbnRlcnZhbCNzZXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRBdH0sIHtAbGluayBJbnRlcnZhbCNzcGxpdEJ5fSwge0BsaW5rIEludGVydmFsI2RpdmlkZUVxdWFsbHl9LCB7QGxpbmsgSW50ZXJ2YWwubWVyZ2V9LCB7QGxpbmsgSW50ZXJ2YWwueG9yfSwge0BsaW5rIEludGVydmFsI3VuaW9ufSwge0BsaW5rIEludGVydmFsI2ludGVyc2VjdGlvbn0sIG9yIHtAbGluayBJbnRlcnZhbCNkaWZmZXJlbmNlfS5cbiAqICogKipDb21wYXJpc29uKiogVG8gY29tcGFyZSB0aGlzIEludGVydmFsIHRvIGFub3RoZXIgb25lLCB1c2Uge0BsaW5rIEludGVydmFsI2VxdWFsc30sIHtAbGluayBJbnRlcnZhbCNvdmVybGFwc30sIHtAbGluayBJbnRlcnZhbCNhYnV0c1N0YXJ0fSwge0BsaW5rIEludGVydmFsI2FidXRzRW5kfSwge0BsaW5rIEludGVydmFsI2VuZ3VsZnN9XG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgSW50ZXJ2YWwgaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9TdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9Mb2NhbGVTdHJpbmd9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU099LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09EYXRlfSwge0BsaW5rIEludGVydmFsI3RvSVNPVGltZX0sIHtAbGluayBJbnRlcnZhbCN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgSW50ZXJ2YWwjdG9EdXJhdGlvbn0uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludGVydmFsIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnMgPSBjb25maWcuc3RhcnQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lID0gY29uZmlnLmVuZDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludmFsaWQgPSBjb25maWcuaW52YWxpZCB8fCBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaXNMdXhvbkludGVydmFsID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbiA9IG51bGwpIHtcbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBJbnRlcnZhbCBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkSW50ZXJ2YWxFcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7IGludmFsaWQgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGFuIGVuZCBEYXRlVGltZS4gSW5jbHVzaXZlIG9mIHRoZSBzdGFydCBidXQgbm90IHRoZSBlbmQuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IHN0YXJ0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IGVuZFxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBmcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpIHtcbiAgICBjb25zdCBidWlsdFN0YXJ0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCksXG4gICAgICBidWlsdEVuZCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcblxuICAgIGNvbnN0IHZhbGlkYXRlRXJyb3IgPSB2YWxpZGF0ZVN0YXJ0RW5kKGJ1aWx0U3RhcnQsIGJ1aWx0RW5kKTtcblxuICAgIGlmICh2YWxpZGF0ZUVycm9yID09IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWwoe1xuICAgICAgICBzdGFydDogYnVpbHRTdGFydCxcbiAgICAgICAgZW5kOiBidWlsdEVuZCxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVFcnJvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYSBzdGFydCBEYXRlVGltZSBhbmQgYSBEdXJhdGlvbiB0byBleHRlbmQgdG8uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IHN0YXJ0XG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC5cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgYWZ0ZXIoc3RhcnQsIGR1cmF0aW9uKSB7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksXG4gICAgICBkdCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0LCBkdC5wbHVzKGR1cikpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIGVuZCBEYXRlVGltZSBhbmQgYSBEdXJhdGlvbiB0byBleHRlbmQgYmFja3dhcmRzIHRvLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmRcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsLlxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBiZWZvcmUoZW5kLCBkdXJhdGlvbikge1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQubWludXMoZHVyKSwgZHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGFuIElTTyA4NjAxIHN0cmluZy5cbiAgICogQWNjZXB0cyBgPHN0YXJ0Pi88ZW5kPmAsIGA8c3RhcnQ+LzxkdXJhdGlvbj5gLCBhbmQgYDxkdXJhdGlvbj4vPGVuZD5gIGZvcm1hdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIElTTyBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSAtIG9wdGlvbnMgdG8gcGFzcyB7QGxpbmsgRGF0ZVRpbWUjZnJvbUlTT30gYW5kIG9wdGlvbmFsbHkge0BsaW5rIER1cmF0aW9uI2Zyb21JU099XG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgZnJvbUlTTyh0ZXh0LCBvcHRzKSB7XG4gICAgY29uc3QgW3MsIGVdID0gKHRleHQgfHwgXCJcIikuc3BsaXQoXCIvXCIsIDIpO1xuICAgIGlmIChzICYmIGUpIHtcbiAgICAgIGxldCBzdGFydCwgc3RhcnRJc1ZhbGlkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgc3RhcnQgPSBEYXRlVGltZS5mcm9tSVNPKHMsIG9wdHMpO1xuICAgICAgICBzdGFydElzVmFsaWQgPSBzdGFydC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzdGFydElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGVuZCwgZW5kSXNWYWxpZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVuZCA9IERhdGVUaW1lLmZyb21JU08oZSwgb3B0cyk7XG4gICAgICAgIGVuZElzVmFsaWQgPSBlbmQuaXNWYWxpZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgZW5kSXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhcnRJc1ZhbGlkICYmIGVuZElzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQsIGVuZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydElzVmFsaWQpIHtcbiAgICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhlLCBvcHRzKTtcbiAgICAgICAgaWYgKGR1ci5pc1ZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIEludGVydmFsLmFmdGVyKHN0YXJ0LCBkdXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVuZElzVmFsaWQpIHtcbiAgICAgICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUlTTyhzLCBvcHRzKTtcbiAgICAgICAgaWYgKGR1ci5pc1ZhbGlkKSB7XG4gICAgICAgICAgcmV0dXJuIEludGVydmFsLmJlZm9yZShlbmQsIGR1cik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIGB0aGUgaW5wdXQgXCIke3RleHR9XCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIEludGVydmFsLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNJbnRlcnZhbChvKSB7XG4gICAgcmV0dXJuIChvICYmIG8uaXNMdXhvbkludGVydmFsKSB8fCBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdGFydCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgKi9cbiAgZ2V0IHN0YXJ0KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnMgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVuZCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHR5cGUge0RhdGVUaW1lfVxuICAgKi9cbiAgZ2V0IGVuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5lIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBhdCBsZWFzdCBpdHMgc3RhcnQsIG1lYW5pbmcgdGhhdCB0aGUgSW50ZXJ2YWwgaXNuJ3QgJ2JhY2t3YXJkcycuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZFJlYXNvbiA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBJbnRlcnZhbCBpcyBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRSZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgSW50ZXJ2YWwgYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIEludGVydmFsIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZEV4cGxhbmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwgaW4gdGhlIHNwZWNpZmllZCB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byByZXR1cm4gdGhlIGxlbmd0aCBpbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgbGVuZ3RoKHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9EdXJhdGlvbiguLi5bdW5pdF0pLmdldCh1bml0KSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb3VudCBvZiBtaW51dGVzLCBob3VycywgZGF5cywgbW9udGhzLCBvciB5ZWFycyBpbmNsdWRlZCBpbiB0aGUgSW50ZXJ2YWwsIGV2ZW4gaW4gcGFydC5cbiAgICogVW5saWtlIHtAbGluayBJbnRlcnZhbCNsZW5ndGh9IHRoaXMgY291bnRzIHNlY3Rpb25zIG9mIHRoZSBjYWxlbmRhciwgbm90IHBlcmlvZHMgb2YgdGltZSwgZS5nLiBzcGVjaWZ5aW5nICdkYXknXG4gICAqIGFza3MgJ3doYXQgZGF0ZXMgYXJlIGluY2x1ZGVkIGluIHRoaXMgaW50ZXJ2YWw/Jywgbm90ICdob3cgbWFueSBkYXlzIGxvbmcgaXMgdGhpcyBpbnRlcnZhbD8nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbdW5pdD0nbWlsbGlzZWNvbmRzJ10gLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWs7IHRoaXMgb3BlcmF0aW9uIHdpbGwgYWx3YXlzIHVzZSB0aGUgbG9jYWxlIG9mIHRoZSBzdGFydCBEYXRlVGltZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBjb3VudCh1bml0ID0gXCJtaWxsaXNlY29uZHNcIiwgb3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gTmFOO1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5zdGFydC5zdGFydE9mKHVuaXQsIG9wdHMpO1xuICAgIGxldCBlbmQ7XG4gICAgaWYgKG9wdHM/LnVzZUxvY2FsZVdlZWtzKSB7XG4gICAgICBlbmQgPSB0aGlzLmVuZC5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogc3RhcnQubG9jYWxlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmQgPSB0aGlzLmVuZDtcbiAgICB9XG4gICAgZW5kID0gZW5kLnN0YXJ0T2YodW5pdCwgb3B0cyk7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KSkgKyAoZW5kLnZhbHVlT2YoKSAhPT0gdGhpcy5lbmQudmFsdWVPZigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGFuZCBlbmQgYXJlIGJvdGggaW4gdGhlIHNhbWUgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvblxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzU2FtZSh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuaXNFbXB0eSgpIHx8IHRoaXMuZS5taW51cygxKS5oYXNTYW1lKHRoaXMucywgdW5pdCkgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIERhdGVUaW1lcy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMucy52YWx1ZU9mKCkgPT09IHRoaXMuZS52YWx1ZU9mKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGlzIGFmdGVyIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0FmdGVyKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5zID4gZGF0ZVRpbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBiZWZvcmUgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQmVmb3JlKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5lIDw9IGRhdGVUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgY29udGFpbnMgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGNvbnRhaW5zKGRhdGVUaW1lKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5zIDw9IGRhdGVUaW1lICYmIHRoaXMuZSA+IGRhdGVUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0c1wiIHRoZSBzdGFydCBhbmQvb3IgZW5kIGRhdGVzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSB0aGUgdmFsdWVzIHRvIHNldFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSB2YWx1ZXMuc3RhcnQgLSB0aGUgc3RhcnRpbmcgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLmVuZCAtIHRoZSBlbmRpbmcgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzZXQoeyBzdGFydCwgZW5kIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCB8fCB0aGlzLnMsIGVuZCB8fCB0aGlzLmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgYXQgZWFjaCBvZiB0aGUgc3BlY2lmaWVkIERhdGVUaW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNvdW50LlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHNwbGl0QXQoLi4uZGF0ZVRpbWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcbiAgICBjb25zdCBzb3J0ZWQgPSBkYXRlVGltZXNcbiAgICAgICAgLm1hcChmcmllbmRseURhdGVUaW1lKVxuICAgICAgICAuZmlsdGVyKChkKSA9PiB0aGlzLmNvbnRhaW5zKGQpKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYS50b01pbGxpcygpIC0gYi50b01pbGxpcygpKSxcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICBsZXQgeyBzIH0gPSB0aGlzLFxuICAgICAgaSA9IDA7XG5cbiAgICB3aGlsZSAocyA8IHRoaXMuZSkge1xuICAgICAgY29uc3QgYWRkZWQgPSBzb3J0ZWRbaV0gfHwgdGhpcy5lLFxuICAgICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkO1xuICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMocywgbmV4dCkpO1xuICAgICAgcyA9IG5leHQ7XG4gICAgICBpICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHNtYWxsZXIgSW50ZXJ2YWxzLCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgbGVuZ3RoLlxuICAgKiBMZWZ0IG92ZXIgdGltZSBpcyBncm91cGVkIGludG8gYSBzbWFsbGVyIGludGVydmFsXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgbGVuZ3RoIG9mIGVhY2ggcmVzdWx0aW5nIGludGVydmFsLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHNwbGl0QnkoZHVyYXRpb24pIHtcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcblxuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFkdXIuaXNWYWxpZCB8fCBkdXIuYXMoXCJtaWxsaXNlY29uZHNcIikgPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBsZXQgeyBzIH0gPSB0aGlzLFxuICAgICAgaWR4ID0gMSxcbiAgICAgIG5leHQ7XG5cbiAgICBjb25zdCByZXN1bHRzID0gW107XG4gICAgd2hpbGUgKHMgPCB0aGlzLmUpIHtcbiAgICAgIGNvbnN0IGFkZGVkID0gdGhpcy5zdGFydC5wbHVzKGR1ci5tYXBVbml0cygoeCkgPT4geCAqIGlkeCkpO1xuICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaWR4ICs9IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBpbnRvIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIHNtYWxsZXIgaW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbnVtYmVyT2ZQYXJ0cyAtIFRoZSBudW1iZXIgb2YgSW50ZXJ2YWxzIHRvIGRpdmlkZSB0aGUgSW50ZXJ2YWwgaW50by5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBkaXZpZGVFcXVhbGx5KG51bWJlck9mUGFydHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIFtdO1xuICAgIHJldHVybiB0aGlzLnNwbGl0QnkodGhpcy5sZW5ndGgoKSAvIG51bWJlck9mUGFydHMpLnNsaWNlKDAsIG51bWJlck9mUGFydHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgb3ZlcmxhcHMgd2l0aCB0aGUgc3BlY2lmaWVkIEludGVydmFsXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBvdmVybGFwcyhvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmUgPiBvdGhlci5zICYmIHRoaXMucyA8IG90aGVyLmU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIGVuZCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3Mgc3RhcnQuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBhYnV0c1N0YXJ0KG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gK3RoaXMuZSA9PT0gK290aGVyLnM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCdzIHN0YXJ0IGlzIGFkamFjZW50IHRvIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwncyBlbmQuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBhYnV0c0VuZChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICtvdGhlci5lID09PSArdGhpcy5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgZW5ndWxmcyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZW5ndWxmcyhvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA8PSBvdGhlci5zICYmIHRoaXMuZSA+PSBvdGhlci5lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgaGFzIHRoZSBzYW1lIHN0YXJ0IGFuZCBlbmQgYXMgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVxdWFscyhvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlci5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucy5lcXVhbHMob3RoZXIucykgJiYgdGhpcy5lLmVxdWFscyhvdGhlci5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWF4aW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWluaW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy5cbiAgICogUmV0dXJucyBudWxsIGlmIHRoZSBpbnRlcnNlY3Rpb24gaXMgZW1wdHksIG1lYW5pbmcsIHRoZSBpbnRlcnZhbHMgZG9uJ3QgaW50ZXJzZWN0LlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIGludGVyc2VjdGlvbihvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzID0gdGhpcy5zID4gb3RoZXIucyA/IHRoaXMucyA6IG90aGVyLnMsXG4gICAgICBlID0gdGhpcy5lIDwgb3RoZXIuZSA/IHRoaXMuZSA6IG90aGVyLmU7XG5cbiAgICBpZiAocyA+PSBlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHVuaW9uIG9mIHRoaXMgSW50ZXJ2YWwgYW5kIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1pbmltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1heGltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgdW5pb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcyA9IHRoaXMucyA8IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLFxuICAgICAgZSA9IHRoaXMuZSA+IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIGFuIGFycmF5IG9mIEludGVydmFscyBpbnRvIGEgZXF1aXZhbGVudCBtaW5pbWFsIHNldCBvZiBJbnRlcnZhbHMuXG4gICAqIENvbWJpbmVzIG92ZXJsYXBwaW5nIGFuZCBhZGphY2VudCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBtZXJnZShpbnRlcnZhbHMpIHtcbiAgICBjb25zdCBbZm91bmQsIGZpbmFsXSA9IGludGVydmFsc1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEucyAtIGIucylcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChbc29mYXIsIGN1cnJlbnRdLCBpdGVtKSA9PiB7XG4gICAgICAgICAgaWYgKCFjdXJyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gW3NvZmFyLCBpdGVtXTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnQub3ZlcmxhcHMoaXRlbSkgfHwgY3VycmVudC5hYnV0c1N0YXJ0KGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gW3NvZmFyLCBjdXJyZW50LnVuaW9uKGl0ZW0pXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFtzb2Zhci5jb25jYXQoW2N1cnJlbnRdKSwgaXRlbV07XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBbW10sIG51bGxdXG4gICAgICApO1xuICAgIGlmIChmaW5hbCkge1xuICAgICAgZm91bmQucHVzaChmaW5hbCk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgSW50ZXJ2YWxzIHJlcHJlc2VudGluZyB0aGUgc3BhbnMgb2YgdGltZSB0aGF0IG9ubHkgYXBwZWFyIGluIG9uZSBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFscy5cbiAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIHhvcihpbnRlcnZhbHMpIHtcbiAgICBsZXQgc3RhcnQgPSBudWxsLFxuICAgICAgY3VycmVudENvdW50ID0gMDtcbiAgICBjb25zdCByZXN1bHRzID0gW10sXG4gICAgICBlbmRzID0gaW50ZXJ2YWxzLm1hcCgoaSkgPT4gW1xuICAgICAgICB7IHRpbWU6IGkucywgdHlwZTogXCJzXCIgfSxcbiAgICAgICAgeyB0aW1lOiBpLmUsIHR5cGU6IFwiZVwiIH0sXG4gICAgICBdKSxcbiAgICAgIGZsYXR0ZW5lZCA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4uZW5kcyksXG4gICAgICBhcnIgPSBmbGF0dGVuZWQuc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTtcblxuICAgIGZvciAoY29uc3QgaSBvZiBhcnIpIHtcbiAgICAgIGN1cnJlbnRDb3VudCArPSBpLnR5cGUgPT09IFwic1wiID8gMSA6IC0xO1xuXG4gICAgICBpZiAoY3VycmVudENvdW50ID09PSAxKSB7XG4gICAgICAgIHN0YXJ0ID0gaS50aW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXJ0ICYmICtzdGFydCAhPT0gK2kudGltZSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBpLnRpbWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXJ0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gSW50ZXJ2YWwubWVyZ2UocmVzdWx0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgc3BhbiBvZiB0aW1lIGluIHRoaXMgSW50ZXJ2YWwgdGhhdCBkb2Vzbid0IG92ZXJsYXAgd2l0aCBhbnkgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7Li4uSW50ZXJ2YWx9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGRpZmZlcmVuY2UoLi4uaW50ZXJ2YWxzKSB7XG4gICAgcmV0dXJuIEludGVydmFsLnhvcihbdGhpc10uY29uY2F0KGludGVydmFscykpXG4gICAgICAubWFwKChpKSA9PiB0aGlzLmludGVyc2VjdGlvbihpKSlcbiAgICAgIC5maWx0ZXIoKGkpID0+IGkgJiYgIWkuaXNFbXB0eSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgWyR7dGhpcy5zLnRvSVNPKCl9IFx1MjAxMyAke3RoaXMuZS50b0lTTygpfSlgO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBhcHByb3ByaWF0ZSBmb3IgdGhlIFJFUEwuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBgSW50ZXJ2YWwgeyBzdGFydDogJHt0aGlzLnMudG9JU08oKX0sIGVuZDogJHt0aGlzLmUudG9JU08oKX0gfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgSW50ZXJ2YWwgeyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxvY2FsaXplZCBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgSW50ZXJ2YWwuIEFjY2VwdHMgdGhlIHNhbWUgb3B0aW9ucyBhcyB0aGVcbiAgICogSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBhbmQgYW55IHByZXNldHMgZGVmaW5lZCBieSBMdXhvbiwgc3VjaCBhc1xuICAgKiB7QGxpbmsgRGF0ZVRpbWUuREFURV9GVUxMfSBvciB7QGxpbmsgRGF0ZVRpbWUuVElNRV9TSU1QTEV9LiBUaGUgZXhhY3QgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2RcbiAgICogaXMgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGluIGdlbmVyYWwgaXQgd2lsbCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgcmVwcmVzZW50YXRpb24gb2YgdGhlXG4gICAqIEludGVydmFsIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuXG4gICAqIHNwZWNpZmllZC5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge09iamVjdH0gW2Zvcm1hdE9wdHM9RGF0ZVRpbWUuREFURV9TSE9SVF0gLSBFaXRoZXIgYSBEYXRlVGltZSBwcmVzZXQgb3JcbiAgICogSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMgdG8gb3ZlcnJpZGUgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIHN0YXJ0IERhdGVUaW1lLlxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tSVNPKCcyMDIyLTExLTA3VDA5OjAwWi8yMDIyLTExLTA4VDA5OjAwWicpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gMTEvNy8yMDIyIFx1MjAxMyAxMS84LzIwMjJcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QwOTowMFovMjAyMi0xMS0wOFQwOTowMFonKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFX0ZVTEwpOyAvLz0+IE5vdmVtYmVyIDcgXHUyMDEzIDgsIDIwMjJcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QwOTowMFovMjAyMi0xMS0wOFQwOTowMFonKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFX0ZVTEwsIHsgbG9jYWxlOiAnZnItRlInIH0pOyAvLz0+IDdcdTIwMTM4IG5vdmVtYnJlIDIwMjJcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QxNzowMFovMjAyMi0xMS0wN1QxOTowMFonKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSk7IC8vPT4gNjowMCBcdTIwMTMgODowMCBQTVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tSVNPKCcyMDIyLTExLTA3VDE3OjAwWi8yMDIyLTExLTA3VDE5OjAwWicpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ3Nob3J0JywgbW9udGg6ICdzaG9ydCcsIGRheTogJzItZGlnaXQnLCBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pOyAvLz0+IE1vbiwgTm92IDA3LCA2OjAwIFx1MjAxMyA4OjAwIHBcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Mb2NhbGVTdHJpbmcoZm9ybWF0T3B0cyA9IEZvcm1hdHMuREFURV9TSE9SVCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMucy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdEludGVydmFsKHRoaXMpXG4gICAgICA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgc2FtZSBvcHRpb25zIGFzIHtAbGluayBEYXRlVGltZSN0b0lTT31cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU08ob3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYCR7dGhpcy5zLnRvSVNPKG9wdHMpfS8ke3RoaXMuZS50b0lTTyhvcHRzKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBkYXRlIG9mIHRoaXMgSW50ZXJ2YWwuXG4gICAqIFRoZSB0aW1lIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09EYXRlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYCR7dGhpcy5zLnRvSVNPRGF0ZSgpfS8ke3RoaXMuZS50b0lTT0RhdGUoKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aW1lIG9mIHRoaXMgSW50ZXJ2YWwuXG4gICAqIFRoZSBkYXRlIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjVGltZV9pbnRlcnZhbHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBUaGUgc2FtZSBvcHRpb25zIGFzIHtAbGluayBEYXRlVGltZSN0b0lTT31cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09UaW1lKG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0lTT1RpbWUob3B0cyl9LyR7dGhpcy5lLnRvSVNPVGltZShvcHRzKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0XG4gICAqIHN0cmluZy4gKipZb3UgbWF5IG5vdCB3YW50IHRoaXMuKiogU2VlIHtAbGluayBJbnRlcnZhbCN0b0xvY2FsZVN0cmluZ30gZm9yIGEgbW9yZSBmbGV4aWJsZVxuICAgKiBmb3JtYXR0aW5nIHRvb2wuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBkYXRlRm9ybWF0IC0gVGhlIGZvcm1hdCBzdHJpbmcuIFRoaXMgc3RyaW5nIGZvcm1hdHMgdGhlIHN0YXJ0IGFuZCBlbmQgdGltZS5cbiAgICogU2VlIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0gZm9yIGRldGFpbHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gT3B0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLnNlcGFyYXRvciA9ICAnIFx1MjAxMyAnXSAtIEEgc2VwYXJhdG9yIHRvIHBsYWNlIGJldHdlZW4gdGhlIHN0YXJ0IGFuZCBlbmRcbiAgICogcmVwcmVzZW50YXRpb25zLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0Zvcm1hdChkYXRlRm9ybWF0LCB7IHNlcGFyYXRvciA9IFwiIFx1MjAxMyBcIiB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0Zvcm1hdChkYXRlRm9ybWF0KX0ke3NlcGFyYXRvcn0ke3RoaXMuZS50b0Zvcm1hdChkYXRlRm9ybWF0KX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIER1cmF0aW9uIHJlcHJlc2VudGluZyB0aGUgdGltZSBzcGFubmVkIGJ5IHRoaXMgaW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oKS50b09iamVjdCgpIC8vPT4geyBtaWxsaXNlY29uZHM6IDg4NDg5MjU3IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbignZGF5cycpLnRvT2JqZWN0KCkgLy89PiB7IGRheXM6IDEuMDI0MTgxMjE1Mjc3Nzc3OCB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oWydob3VycycsICdtaW51dGVzJ10pLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyNCwgbWludXRlczogMzQuODIwOTUgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcycsICdzZWNvbmRzJ10pLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyNCwgbWludXRlczogMzQsIHNlY29uZHM6IDQ5LjI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ3NlY29uZHMnKS50b09iamVjdCgpIC8vPT4geyBzZWNvbmRzOiA4ODQ4OS4yNTcgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHRvRHVyYXRpb24odW5pdCwgb3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZCh0aGlzLmludmFsaWRSZWFzb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5lLmRpZmYodGhpcy5zLCB1bml0LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gbWFwRm4gb24gdGhlIGludGVydmFsIHN0YXJ0IGFuZCBlbmQsIHJldHVybmluZyBhIG5ldyBJbnRlcnZhbCBmcm9tIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVzXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1hcEZuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS5tYXBFbmRwb2ludHMoZW5kcG9pbnQgPT4gZW5kcG9pbnQudG9VVEMoKSlcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnBsdXMoeyBob3VyczogMiB9KSlcbiAgICovXG4gIG1hcEVuZHBvaW50cyhtYXBGbikge1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKG1hcEZuKHRoaXMucyksIG1hcEZuKHRoaXMuZSkpO1xuICB9XG59XG4iLCAiaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuL2RhdGV0aW1lLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vaW1wbC9sb2NhbGUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplWm9uZSB9IGZyb20gXCIuL2ltcGwvem9uZVV0aWwuanNcIjtcblxuaW1wb3J0IHsgaGFzTG9jYWxlV2Vla0luZm8sIGhhc1JlbGF0aXZlIH0gZnJvbSBcIi4vaW1wbC91dGlsLmpzXCI7XG5cbi8qKlxuICogVGhlIEluZm8gY2xhc3MgY29udGFpbnMgc3RhdGljIG1ldGhvZHMgZm9yIHJldHJpZXZpbmcgZ2VuZXJhbCB0aW1lIGFuZCBkYXRlIHJlbGF0ZWQgZGF0YS4gRm9yIGV4YW1wbGUsIGl0IGhhcyBtZXRob2RzIGZvciBmaW5kaW5nIG91dCBpZiBhIHRpbWUgem9uZSBoYXMgYSBEU1QsIGZvciBsaXN0aW5nIHRoZSBtb250aHMgaW4gYW55IHN1cHBvcnRlZCBsb2NhbGUsIGFuZCBmb3IgZGlzY292ZXJpbmcgd2hpY2ggb2YgTHV4b24gZmVhdHVyZXMgYXJlIGF2YWlsYWJsZSBpbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW5mbyB7XG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIHpvbmUgY29udGFpbnMgYSBEU1QuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gWm9uZSB0byBjaGVjay4gRGVmYXVsdHMgdG8gdGhlIGVudmlyb25tZW50J3MgbG9jYWwgem9uZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBoYXNEU1Qoem9uZSA9IFNldHRpbmdzLmRlZmF1bHRab25lKSB7XG4gICAgY29uc3QgcHJvdG8gPSBEYXRlVGltZS5ub3coKS5zZXRab25lKHpvbmUpLnNldCh7IG1vbnRoOiAxMiB9KTtcblxuICAgIHJldHVybiAhem9uZS5pc1VuaXZlcnNhbCAmJiBwcm90by5vZmZzZXQgIT09IHByb3RvLnNldCh7IG1vbnRoOiA2IH0pLm9mZnNldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGUgc3BlY2lmaWVkIHpvbmUgaXMgYSB2YWxpZCBJQU5BIHNwZWNpZmllci5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHpvbmUgLSBab25lIHRvIGNoZWNrXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNWYWxpZElBTkFab25lKHpvbmUpIHtcbiAgICByZXR1cm4gSUFOQVpvbmUuaXNWYWxpZFpvbmUoem9uZSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhlIGlucHV0IGludG8gYSB7QGxpbmsgWm9uZX0gaW5zdGFuY2UuXG4gICAqXG4gICAqICogSWYgYGlucHV0YCBpcyBhbHJlYWR5IGEgWm9uZSBpbnN0YW5jZSwgaXQgaXMgcmV0dXJuZWQgdW5jaGFuZ2VkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYSBzdHJpbmcgY29udGFpbmluZyBhIHZhbGlkIHRpbWUgem9uZSBuYW1lLCBhIFpvbmUgaW5zdGFuY2VcbiAgICogICB3aXRoIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIHRoYXQgZG9lc24ndCByZWZlciB0byBhIGtub3duIHRpbWUgem9uZSwgYSBab25lXG4gICAqICAgaW5zdGFuY2Ugd2l0aCB7QGxpbmsgWm9uZSNpc1ZhbGlkfSA9PSBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXQgaXMgYSBudW1iZXIsIGEgWm9uZSBpbnN0YW5jZSB3aXRoIHRoZSBzcGVjaWZpZWQgZml4ZWQgb2Zmc2V0XG4gICAqICAgaW4gbWludXRlcyBpcyByZXR1cm5lZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGBudWxsYCBvciBgdW5kZWZpbmVkYCwgdGhlIGRlZmF1bHQgem9uZSBpcyByZXR1cm5lZC5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZXxudW1iZXJ9IFtpbnB1dF0gLSB0aGUgdmFsdWUgdG8gYmUgY29udmVydGVkXG4gICAqIEByZXR1cm4ge1pvbmV9XG4gICAqL1xuICBzdGF0aWMgbm9ybWFsaXplWm9uZShpbnB1dCkge1xuICAgIHJldHVybiBub3JtYWxpemVab25lKGlucHV0LCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrZGF5IG9uIHdoaWNoIHRoZSB3ZWVrIHN0YXJ0cyBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIGxvY2FsZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIDEgZm9yIE1vbmRheSB0aHJvdWdoIDcgZm9yIFN1bmRheVxuICAgKi9cbiAgc3RhdGljIGdldFN0YXJ0T2ZXZWVrKHsgbG9jYWxlID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSkpLmdldFN0YXJ0T2ZXZWVrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtaW5pbXVtIG51bWJlciBvZiBkYXlzIG5lY2Vzc2FyeSBpbiBhIHdlZWsgYmVmb3JlIGl0IGlzIGNvbnNpZGVyZWQgcGFydCBvZiB0aGUgbmV4dCB5ZWFyIGFjY29yZGluZ1xuICAgKiB0byB0aGUgZ2l2ZW4gbG9jYWxlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0TWluaW11bURheXNJbkZpcnN0V2Vlayh7IGxvY2FsZSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUpKS5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWtkYXlzLCB3aGljaCBhcmUgY29uc2lkZXJlZCB0aGUgd2Vla2VuZCBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIGxvY2FsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEByZXR1cm5zIHtudW1iZXJbXX0gYW4gYXJyYXkgb2Ygd2Vla2RheXMsIDEgZm9yIE1vbmRheSB0aHJvdWdoIDcgZm9yIFN1bmRheVxuICAgKi9cbiAgc3RhdGljIGdldFdlZWtlbmRXZWVrZGF5cyh7IGxvY2FsZSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9KSB7XG4gICAgLy8gY29weSB0aGUgYXJyYXksIGJlY2F1c2Ugd2UgY2FjaGUgaXQgaW50ZXJuYWxseVxuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlKSkuZ2V0V2Vla2VuZERheXMoKS5zbGljZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIG1vbnRoIG5hbWVzLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm51bWVyaWNcIiwgXCIyLWRpZ2l0XCIsIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyPSdncmVnb3J5J10gLSB0aGUgY2FsZW5kYXJcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoKVswXSAvLz0+ICdKYW51YXJ5J1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnKVswXSAvLz0+ICdKYW4nXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdudW1lcmljJylbMF0gLy89PiAnMSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSApWzBdIC8vPT4gJ2phbnYuJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ1x1MDY2MSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ2xvbmcnLCB7IG91dHB1dENhbGVuZGFyOiAnaXNsYW1pYycgfSlbMF0gLy89PiAnUmFiaVx1MDJCQiBJJ1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBtb250aHMoXG4gICAgbGVuZ3RoID0gXCJsb25nXCIsXG4gICAgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsLCBvdXRwdXRDYWxlbmRhciA9IFwiZ3JlZ29yeVwiIH0gPSB7fVxuICApIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikpLm1vbnRocyhsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBmb3JtYXQgbW9udGggbmFtZXMuXG4gICAqIEZvcm1hdCBtb250aHMgZGlmZmVyIGZyb20gc3RhbmRhbG9uZSBtb250aHMgaW4gdGhhdCB0aGV5J3JlIG1lYW50IHRvIGFwcGVhciBuZXh0IHRvIHRoZSBkYXkgb2YgdGhlIG1vbnRoLiBJbiBzb21lIGxhbmd1YWdlcywgdGhhdFxuICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuXG4gICAqIFNlZSB7QGxpbmsgSW5mbyNtb250aHN9XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm51bWVyaWNcIiwgXCIyLWRpZ2l0XCIsIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCJcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyPSdncmVnb3J5J10gLSB0aGUgY2FsZW5kYXJcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbW9udGhzRm9ybWF0KFxuICAgIGxlbmd0aCA9IFwibG9uZ1wiLFxuICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCwgb3V0cHV0Q2FsZW5kYXIgPSBcImdyZWdvcnlcIiB9ID0ge31cbiAgKSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSB3ZWVrIG5hbWVzLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSB3ZWVrZGF5IHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoKVswXSAvLz0+ICdNb25kYXknXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JylbMF0gLy89PiAnTW9uJ1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcsIHsgbG9jYWxlOiAnZnItQ0EnIH0pWzBdIC8vPT4gJ2x1bi4nXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdhcicgfSlbMF0gLy89PiAnXHUwNjI3XHUwNjQ0XHUwNjI3XHUwNjJCXHUwNjQ2XHUwNjRBXHUwNjQ2J1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyB3ZWVrZGF5cyhsZW5ndGggPSBcImxvbmdcIiwgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBmb3JtYXQgd2VlayBuYW1lcy5cbiAgICogRm9ybWF0IHdlZWtkYXlzIGRpZmZlciBmcm9tIHN0YW5kYWxvbmUgd2Vla2RheXMgaW4gdGhhdCB0aGV5J3JlIG1lYW50IHRvIGFwcGVhciBuZXh0IHRvIG1vcmUgZGF0ZSBpbmZvcm1hdGlvbi4gSW4gc29tZSBsYW5ndWFnZXMsIHRoYXRcbiAgICogY2hhbmdlcyB0aGUgc3RyaW5nLlxuICAgKiBTZWUge0BsaW5rIEluZm8jd2Vla2RheXN9XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdsb25nJ10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBtb250aCByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT1udWxsXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIHdlZWtkYXlzRm9ybWF0KFxuICAgIGxlbmd0aCA9IFwibG9uZ1wiLFxuICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge31cbiAgKSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgbnVsbCkpLndlZWtkYXlzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIG1lcmlkaWVtcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKCkgLy89PiBbICdBTScsICdQTScgXVxuICAgKiBAZXhhbXBsZSBJbmZvLm1lcmlkaWVtcyh7IGxvY2FsZTogJ215JyB9KSAvLz0+IFsgJ1x1MTAxNFx1MTAzNlx1MTAxNFx1MTAwMFx1MTAzQScsICdcdTEwMEFcdTEwMTRcdTEwMzEnIF1cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbWVyaWRpZW1zKHsgbG9jYWxlID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUpLm1lcmlkaWVtcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBlcmFzLCBzdWNoIGFzIFsnQkMnLCAnQUQnXS4gVGhlIGxvY2FsZSBjYW4gYmUgc3BlY2lmaWVkLCBidXQgdGhlIGNhbGVuZGFyIHN5c3RlbSBpcyBhbHdheXMgR3JlZ29yaWFuLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nc2hvcnQnXSAtIHRoZSBsZW5ndGggb2YgdGhlIGVyYSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcInNob3J0XCIgb3IgXCJsb25nXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoKSAvLz0+IFsgJ0JDJywgJ0FEJyBdXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygnbG9uZycpIC8vPT4gWyAnQmVmb3JlIENocmlzdCcsICdBbm5vIERvbWluaScgXVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnLCB7IGxvY2FsZTogJ2ZyJyB9KSAvLz0+IFsgJ2F2YW50IEpcdTAwRTlzdXMtQ2hyaXN0JywgJ2Fwclx1MDBFOHMgSlx1MDBFOXN1cy1DaHJpc3QnIF1cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgZXJhcyhsZW5ndGggPSBcInNob3J0XCIsIHsgbG9jYWxlID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bGwsIFwiZ3JlZ29yeVwiKS5lcmFzKGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBzZXQgb2YgYXZhaWxhYmxlIGZlYXR1cmVzIGluIHRoaXMgZW52aXJvbm1lbnQuXG4gICAqIFNvbWUgZmVhdHVyZXMgb2YgTHV4b24gYXJlIG5vdCBhdmFpbGFibGUgaW4gYWxsIGVudmlyb25tZW50cy4gRm9yIGV4YW1wbGUsIG9uIG9sZGVyIGJyb3dzZXJzLCByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmcgc3VwcG9ydCBpcyBub3QgYXZhaWxhYmxlLiBVc2UgdGhpcyBmdW5jdGlvbiB0byBmaWd1cmUgb3V0IGlmIHRoYXQncyB0aGUgY2FzZS5cbiAgICogS2V5czpcbiAgICogKiBgcmVsYXRpdmVgOiB3aGV0aGVyIHRoaXMgZW52aXJvbm1lbnQgc3VwcG9ydHMgcmVsYXRpdmUgdGltZSBmb3JtYXR0aW5nXG4gICAqICogYGxvY2FsZVdlZWtgOiB3aGV0aGVyIHRoaXMgZW52aXJvbm1lbnQgc3VwcG9ydHMgZGlmZmVyZW50IHdlZWtkYXlzIGZvciB0aGUgc3RhcnQgb2YgdGhlIHdlZWsgYmFzZWQgb24gdGhlIGxvY2FsZVxuICAgKiBAZXhhbXBsZSBJbmZvLmZlYXR1cmVzKCkgLy89PiB7IHJlbGF0aXZlOiBmYWxzZSwgbG9jYWxlV2VlazogdHJ1ZSB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4geyByZWxhdGl2ZTogaGFzUmVsYXRpdmUoKSwgbG9jYWxlV2VlazogaGFzTG9jYWxlV2Vla0luZm8oKSB9O1xuICB9XG59XG4iLCAiaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuLi9kdXJhdGlvbi5qc1wiO1xuXG5mdW5jdGlvbiBkYXlEaWZmKGVhcmxpZXIsIGxhdGVyKSB7XG4gIGNvbnN0IHV0Y0RheVN0YXJ0ID0gKGR0KSA9PiBkdC50b1VUQygwLCB7IGtlZXBMb2NhbFRpbWU6IHRydWUgfSkuc3RhcnRPZihcImRheVwiKS52YWx1ZU9mKCksXG4gICAgbXMgPSB1dGNEYXlTdGFydChsYXRlcikgLSB1dGNEYXlTdGFydChlYXJsaWVyKTtcbiAgcmV0dXJuIE1hdGguZmxvb3IoRHVyYXRpb24uZnJvbU1pbGxpcyhtcykuYXMoXCJkYXlzXCIpKTtcbn1cblxuZnVuY3Rpb24gaGlnaE9yZGVyRGlmZnMoY3Vyc29yLCBsYXRlciwgdW5pdHMpIHtcbiAgY29uc3QgZGlmZmVycyA9IFtcbiAgICBbXCJ5ZWFyc1wiLCAoYSwgYikgPT4gYi55ZWFyIC0gYS55ZWFyXSxcbiAgICBbXCJxdWFydGVyc1wiLCAoYSwgYikgPT4gYi5xdWFydGVyIC0gYS5xdWFydGVyICsgKGIueWVhciAtIGEueWVhcikgKiA0XSxcbiAgICBbXCJtb250aHNcIiwgKGEsIGIpID0+IGIubW9udGggLSBhLm1vbnRoICsgKGIueWVhciAtIGEueWVhcikgKiAxMl0sXG4gICAgW1xuICAgICAgXCJ3ZWVrc1wiLFxuICAgICAgKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgZGF5cyA9IGRheURpZmYoYSwgYik7XG4gICAgICAgIHJldHVybiAoZGF5cyAtIChkYXlzICUgNykpIC8gNztcbiAgICAgIH0sXG4gICAgXSxcbiAgICBbXCJkYXlzXCIsIGRheURpZmZdLFxuICBdO1xuXG4gIGNvbnN0IHJlc3VsdHMgPSB7fTtcbiAgY29uc3QgZWFybGllciA9IGN1cnNvcjtcbiAgbGV0IGxvd2VzdE9yZGVyLCBoaWdoV2F0ZXI7XG5cbiAgLyogVGhpcyBsb29wIHRyaWVzIHRvIGRpZmYgdXNpbmcgbGFyZ2VyIHVuaXRzIGZpcnN0LlxuICAgICBJZiB3ZSBvdmVyc2hvb3QsIHdlIGJhY2t0cmFjayBhbmQgdHJ5IHRoZSBuZXh0IHNtYWxsZXIgdW5pdC5cbiAgICAgXCJjdXJzb3JcIiBzdGFydHMgb3V0IGF0IHRoZSBlYXJsaWVyIHRpbWVzdGFtcCBhbmQgbW92ZXMgY2xvc2VyIGFuZCBjbG9zZXIgdG8gXCJsYXRlclwiXG4gICAgIGFzIHdlIHVzZSBzbWFsbGVyIGFuZCBzbWFsbGVyIHVuaXRzLlxuICAgICBoaWdoV2F0ZXIga2VlcHMgdHJhY2sgb2Ygd2hlcmUgd2Ugd291bGQgYmUgaWYgd2UgYWRkZWQgb25lIG1vcmUgb2YgdGhlIHNtYWxsZXN0IHVuaXQsXG4gICAgIHRoaXMgaXMgdXNlZCBsYXRlciB0byBwb3RlbnRpYWxseSBjb252ZXJ0IGFueSBkaWZmZXJlbmNlIHNtYWxsZXIgdGhhbiB0aGUgc21hbGxlc3QgaGlnaGVyIG9yZGVyIHVuaXRcbiAgICAgaW50byBhIGZyYWN0aW9uIG9mIHRoYXQgc21hbGxlc3QgaGlnaGVyIG9yZGVyIHVuaXRcbiAgKi9cbiAgZm9yIChjb25zdCBbdW5pdCwgZGlmZmVyXSBvZiBkaWZmZXJzKSB7XG4gICAgaWYgKHVuaXRzLmluZGV4T2YodW5pdCkgPj0gMCkge1xuICAgICAgbG93ZXN0T3JkZXIgPSB1bml0O1xuXG4gICAgICByZXN1bHRzW3VuaXRdID0gZGlmZmVyKGN1cnNvciwgbGF0ZXIpO1xuICAgICAgaGlnaFdhdGVyID0gZWFybGllci5wbHVzKHJlc3VsdHMpO1xuXG4gICAgICBpZiAoaGlnaFdhdGVyID4gbGF0ZXIpIHtcbiAgICAgICAgLy8gd2Ugb3ZlcnNob3QgdGhlIGVuZCBwb2ludCwgYmFja3RyYWNrIGN1cnNvciBieSAxXG4gICAgICAgIHJlc3VsdHNbdW5pdF0tLTtcbiAgICAgICAgY3Vyc29yID0gZWFybGllci5wbHVzKHJlc3VsdHMpO1xuXG4gICAgICAgIC8vIGlmIHdlIGFyZSBzdGlsbCBvdmVyc2hvb3Rpbmcgbm93LCB3ZSBuZWVkIHRvIGJhY2t0cmFjayBhZ2FpblxuICAgICAgICAvLyB0aGlzIGhhcHBlbnMgaW4gY2VydGFpbiBzaXR1YXRpb25zIHdoZW4gZGlmZmluZyB0aW1lcyBpbiBkaWZmZXJlbnQgem9uZXMsXG4gICAgICAgIC8vIGJlY2F1c2UgdGhpcyBjYWxjdWxhdGlvbiBpZ25vcmVzIHRpbWUgem9uZXNcbiAgICAgICAgaWYgKGN1cnNvciA+IGxhdGVyKSB7XG4gICAgICAgICAgLy8ga2VlcCB0aGUgXCJvdmVyc2hvdCBieSAxXCIgYXJvdW5kIGFzIGhpZ2hXYXRlclxuICAgICAgICAgIGhpZ2hXYXRlciA9IGN1cnNvcjtcbiAgICAgICAgICAvLyBiYWNrdHJhY2sgY3Vyc29yIGJ5IDFcbiAgICAgICAgICByZXN1bHRzW3VuaXRdLS07XG4gICAgICAgICAgY3Vyc29yID0gZWFybGllci5wbHVzKHJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJzb3IgPSBoaWdoV2F0ZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtjdXJzb3IsIHJlc3VsdHMsIGhpZ2hXYXRlciwgbG93ZXN0T3JkZXJdO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBvcHRzKSB7XG4gIGxldCBbY3Vyc29yLCByZXN1bHRzLCBoaWdoV2F0ZXIsIGxvd2VzdE9yZGVyXSA9IGhpZ2hPcmRlckRpZmZzKGVhcmxpZXIsIGxhdGVyLCB1bml0cyk7XG5cbiAgY29uc3QgcmVtYWluaW5nTWlsbGlzID0gbGF0ZXIgLSBjdXJzb3I7XG5cbiAgY29uc3QgbG93ZXJPcmRlclVuaXRzID0gdW5pdHMuZmlsdGVyKFxuICAgICh1KSA9PiBbXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCJdLmluZGV4T2YodSkgPj0gMFxuICApO1xuXG4gIGlmIChsb3dlck9yZGVyVW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgaWYgKGhpZ2hXYXRlciA8IGxhdGVyKSB7XG4gICAgICBoaWdoV2F0ZXIgPSBjdXJzb3IucGx1cyh7IFtsb3dlc3RPcmRlcl06IDEgfSk7XG4gICAgfVxuXG4gICAgaWYgKGhpZ2hXYXRlciAhPT0gY3Vyc29yKSB7XG4gICAgICByZXN1bHRzW2xvd2VzdE9yZGVyXSA9IChyZXN1bHRzW2xvd2VzdE9yZGVyXSB8fCAwKSArIHJlbWFpbmluZ01pbGxpcyAvIChoaWdoV2F0ZXIgLSBjdXJzb3IpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGR1cmF0aW9uID0gRHVyYXRpb24uZnJvbU9iamVjdChyZXN1bHRzLCBvcHRzKTtcblxuICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gRHVyYXRpb24uZnJvbU1pbGxpcyhyZW1haW5pbmdNaWxsaXMsIG9wdHMpXG4gICAgICAuc2hpZnRUbyguLi5sb3dlck9yZGVyVW5pdHMpXG4gICAgICAucGx1cyhkdXJhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG59XG4iLCAiY29uc3QgbnVtYmVyaW5nU3lzdGVtcyA9IHtcbiAgYXJhYjogXCJbXFx1MDY2MC1cXHUwNjY5XVwiLFxuICBhcmFiZXh0OiBcIltcXHUwNkYwLVxcdTA2RjldXCIsXG4gIGJhbGk6IFwiW1xcdTFCNTAtXFx1MUI1OV1cIixcbiAgYmVuZzogXCJbXFx1MDlFNi1cXHUwOUVGXVwiLFxuICBkZXZhOiBcIltcXHUwOTY2LVxcdTA5NkZdXCIsXG4gIGZ1bGx3aWRlOiBcIltcXHVGRjEwLVxcdUZGMTldXCIsXG4gIGd1anI6IFwiW1xcdTBBRTYtXFx1MEFFRl1cIixcbiAgaGFuaWRlYzogXCJbXHUzMDA3fFx1NEUwMHxcdTRFOEN8XHU0RTA5fFx1NTZEQnxcdTRFOTR8XHU1MTZEfFx1NEUwM3xcdTUxNkJ8XHU0RTVEXVwiLFxuICBraG1yOiBcIltcXHUxN0UwLVxcdTE3RTldXCIsXG4gIGtuZGE6IFwiW1xcdTBDRTYtXFx1MENFRl1cIixcbiAgbGFvbzogXCJbXFx1MEVEMC1cXHUwRUQ5XVwiLFxuICBsaW1iOiBcIltcXHUxOTQ2LVxcdTE5NEZdXCIsXG4gIG1seW06IFwiW1xcdTBENjYtXFx1MEQ2Rl1cIixcbiAgbW9uZzogXCJbXFx1MTgxMC1cXHUxODE5XVwiLFxuICBteW1yOiBcIltcXHUxMDQwLVxcdTEwNDldXCIsXG4gIG9yeWE6IFwiW1xcdTBCNjYtXFx1MEI2Rl1cIixcbiAgdGFtbGRlYzogXCJbXFx1MEJFNi1cXHUwQkVGXVwiLFxuICB0ZWx1OiBcIltcXHUwQzY2LVxcdTBDNkZdXCIsXG4gIHRoYWk6IFwiW1xcdTBFNTAtXFx1MEU1OV1cIixcbiAgdGlidDogXCJbXFx1MEYyMC1cXHUwRjI5XVwiLFxuICBsYXRuOiBcIlxcXFxkXCIsXG59O1xuXG5jb25zdCBudW1iZXJpbmdTeXN0ZW1zVVRGMTYgPSB7XG4gIGFyYWI6IFsxNjMyLCAxNjQxXSxcbiAgYXJhYmV4dDogWzE3NzYsIDE3ODVdLFxuICBiYWxpOiBbNjk5MiwgNzAwMV0sXG4gIGJlbmc6IFsyNTM0LCAyNTQzXSxcbiAgZGV2YTogWzI0MDYsIDI0MTVdLFxuICBmdWxsd2lkZTogWzY1Mjk2LCA2NTMwM10sXG4gIGd1anI6IFsyNzkwLCAyNzk5XSxcbiAga2htcjogWzYxMTIsIDYxMjFdLFxuICBrbmRhOiBbMzMwMiwgMzMxMV0sXG4gIGxhb286IFszNzkyLCAzODAxXSxcbiAgbGltYjogWzY0NzAsIDY0NzldLFxuICBtbHltOiBbMzQzMCwgMzQzOV0sXG4gIG1vbmc6IFs2MTYwLCA2MTY5XSxcbiAgbXltcjogWzQxNjAsIDQxNjldLFxuICBvcnlhOiBbMjkxOCwgMjkyN10sXG4gIHRhbWxkZWM6IFszMDQ2LCAzMDU1XSxcbiAgdGVsdTogWzMxNzQsIDMxODNdLFxuICB0aGFpOiBbMzY2NCwgMzY3M10sXG4gIHRpYnQ6IFszODcyLCAzODgxXSxcbn07XG5cbmNvbnN0IGhhbmlkZWNDaGFycyA9IG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYy5yZXBsYWNlKC9bXFxbfFxcXV0vZywgXCJcIikuc3BsaXQoXCJcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZURpZ2l0cyhzdHIpIHtcbiAgbGV0IHZhbHVlID0gcGFyc2VJbnQoc3RyLCAxMCk7XG4gIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICB2YWx1ZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcblxuICAgICAgaWYgKHN0cltpXS5zZWFyY2gobnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjKSAhPT0gLTEpIHtcbiAgICAgICAgdmFsdWUgKz0gaGFuaWRlY0NoYXJzLmluZGV4T2Yoc3RyW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIG51bWJlcmluZ1N5c3RlbXNVVEYxNikge1xuICAgICAgICAgIGNvbnN0IFttaW4sIG1heF0gPSBudW1iZXJpbmdTeXN0ZW1zVVRGMTZba2V5XTtcbiAgICAgICAgICBpZiAoY29kZSA+PSBtaW4gJiYgY29kZSA8PSBtYXgpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IGNvZGUgLSBtaW47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlnaXRSZWdleCh7IG51bWJlcmluZ1N5c3RlbSB9LCBhcHBlbmQgPSBcIlwiKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKGAke251bWJlcmluZ1N5c3RlbXNbbnVtYmVyaW5nU3lzdGVtIHx8IFwibGF0blwiXX0ke2FwcGVuZH1gKTtcbn1cbiIsICJpbXBvcnQgeyBwYXJzZU1pbGxpcywgaXNVbmRlZmluZWQsIHVudHJ1bmNhdGVZZWFyLCBzaWduZWRPZmZzZXQsIGhhc093blByb3BlcnR5IH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IEZvcm1hdHRlciBmcm9tIFwiLi9mb3JtYXR0ZXIuanNcIjtcbmltcG9ydCBGaXhlZE9mZnNldFpvbmUgZnJvbSBcIi4uL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IHsgZGlnaXRSZWdleCwgcGFyc2VEaWdpdHMgfSBmcm9tIFwiLi9kaWdpdHMuanNcIjtcbmltcG9ydCB7IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuXG5jb25zdCBNSVNTSU5HX0ZUUCA9IFwibWlzc2luZyBJbnRsLkRhdGVUaW1lRm9ybWF0LmZvcm1hdFRvUGFydHMgc3VwcG9ydFwiO1xuXG5mdW5jdGlvbiBpbnRVbml0KHJlZ2V4LCBwb3N0ID0gKGkpID0+IGkpIHtcbiAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoW3NdKSA9PiBwb3N0KHBhcnNlRGlnaXRzKHMpKSB9O1xufVxuXG5jb25zdCBOQlNQID0gU3RyaW5nLmZyb21DaGFyQ29kZSgxNjApO1xuY29uc3Qgc3BhY2VPck5CU1AgPSBgWyAke05CU1B9XWA7XG5jb25zdCBzcGFjZU9yTkJTUFJlZ0V4cCA9IG5ldyBSZWdFeHAoc3BhY2VPck5CU1AsIFwiZ1wiKTtcblxuZnVuY3Rpb24gZml4TGlzdFJlZ2V4KHMpIHtcbiAgLy8gbWFrZSBkb3RzIG9wdGlvbmFsIGFuZCBhbHNvIG1ha2UgdGhlbSBsaXRlcmFsXG4gIC8vIG1ha2Ugc3BhY2UgYW5kIG5vbiBicmVha2FibGUgc3BhY2UgY2hhcmFjdGVycyBpbnRlcmNoYW5nZWFibGVcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFwuL2csIFwiXFxcXC4/XCIpLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIHNwYWNlT3JOQlNQKTtcbn1cblxuZnVuY3Rpb24gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykge1xuICByZXR1cm4gc1xuICAgIC5yZXBsYWNlKC9cXC4vZywgXCJcIikgLy8gaWdub3JlIGRvdHMgdGhhdCB3ZXJlIG1hZGUgb3B0aW9uYWxcbiAgICAucmVwbGFjZShzcGFjZU9yTkJTUFJlZ0V4cCwgXCIgXCIpIC8vIGludGVyY2hhbmdlIHNwYWNlIGFuZCBuYnNwXG4gICAgLnRvTG93ZXJDYXNlKCk7XG59XG5cbmZ1bmN0aW9uIG9uZU9mKHN0cmluZ3MsIHN0YXJ0SW5kZXgpIHtcbiAgaWYgKHN0cmluZ3MgPT09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVnZXg6IFJlZ0V4cChzdHJpbmdzLm1hcChmaXhMaXN0UmVnZXgpLmpvaW4oXCJ8XCIpKSxcbiAgICAgIGRlc2VyOiAoW3NdKSA9PlxuICAgICAgICBzdHJpbmdzLmZpbmRJbmRleCgoaSkgPT4gc3RyaXBJbnNlbnNpdGl2aXRpZXMocykgPT09IHN0cmlwSW5zZW5zaXRpdml0aWVzKGkpKSArIHN0YXJ0SW5kZXgsXG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvZmZzZXQocmVnZXgsIGdyb3Vwcykge1xuICByZXR1cm4geyByZWdleCwgZGVzZXI6IChbLCBoLCBtXSkgPT4gc2lnbmVkT2Zmc2V0KGgsIG0pLCBncm91cHMgfTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlKHJlZ2V4KSB7XG4gIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcyB9O1xufVxuXG5mdW5jdGlvbiBlc2NhcGVUb2tlbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUucmVwbGFjZSgvW1xcLVxcW1xcXXt9KCkqKz8uLFxcXFxcXF4kfCNcXHNdL2csIFwiXFxcXCQmXCIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB0b2tlblxuICogQHBhcmFtIHtMb2NhbGV9IGxvY1xuICovXG5mdW5jdGlvbiB1bml0Rm9yVG9rZW4odG9rZW4sIGxvYykge1xuICBjb25zdCBvbmUgPSBkaWdpdFJlZ2V4KGxvYyksXG4gICAgdHdvID0gZGlnaXRSZWdleChsb2MsIFwiezJ9XCIpLFxuICAgIHRocmVlID0gZGlnaXRSZWdleChsb2MsIFwiezN9XCIpLFxuICAgIGZvdXIgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NH1cIiksXG4gICAgc2l4ID0gZGlnaXRSZWdleChsb2MsIFwiezZ9XCIpLFxuICAgIG9uZU9yVHdvID0gZGlnaXRSZWdleChsb2MsIFwiezEsMn1cIiksXG4gICAgb25lVG9UaHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDN9XCIpLFxuICAgIG9uZVRvU2l4ID0gZGlnaXRSZWdleChsb2MsIFwiezEsNn1cIiksXG4gICAgb25lVG9OaW5lID0gZGlnaXRSZWdleChsb2MsIFwiezEsOX1cIiksXG4gICAgdHdvVG9Gb3VyID0gZGlnaXRSZWdleChsb2MsIFwiezIsNH1cIiksXG4gICAgZm91clRvU2l4ID0gZGlnaXRSZWdleChsb2MsIFwiezQsNn1cIiksXG4gICAgbGl0ZXJhbCA9ICh0KSA9PiAoeyByZWdleDogUmVnRXhwKGVzY2FwZVRva2VuKHQudmFsKSksIGRlc2VyOiAoW3NdKSA9PiBzLCBsaXRlcmFsOiB0cnVlIH0pLFxuICAgIHVuaXRhdGUgPSAodCkgPT4ge1xuICAgICAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIGxpdGVyYWwodCk7XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKHQudmFsKSB7XG4gICAgICAgIC8vIGVyYVxuICAgICAgICBjYXNlIFwiR1wiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcInNob3J0XCIpLCAwKTtcbiAgICAgICAgY2FzZSBcIkdHXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5lcmFzKFwibG9uZ1wiKSwgMCk7XG4gICAgICAgIC8vIHllYXJzXG4gICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lVG9TaXgpO1xuICAgICAgICBjYXNlIFwieXlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTtcbiAgICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyKTtcbiAgICAgICAgY2FzZSBcInl5eXl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91clRvU2l4KTtcbiAgICAgICAgY2FzZSBcInl5eXl5eVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHNpeCk7XG4gICAgICAgIC8vIG1vbnRoc1xuICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcIk1NXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgdHJ1ZSksIDEpO1xuICAgICAgICBjYXNlIFwiTU1NTVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCB0cnVlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJMXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJzaG9ydFwiLCBmYWxzZSksIDEpO1xuICAgICAgICBjYXNlIFwiTExMTFwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwibG9uZ1wiLCBmYWxzZSksIDEpO1xuICAgICAgICAvLyBkYXRlc1xuICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcImRkXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgLy8gb3JkaW5hbHNcbiAgICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTtcbiAgICAgICAgY2FzZSBcIm9vb1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTtcbiAgICAgICAgLy8gdGltZVxuICAgICAgICBjYXNlIFwiSEhcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJtbVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwicVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcInFxXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJzc1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lVG9UaHJlZSk7XG4gICAgICAgIGNhc2UgXCJTU1NcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0aHJlZSk7XG4gICAgICAgIGNhc2UgXCJ1XCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVUb05pbmUpO1xuICAgICAgICBjYXNlIFwidXVcIjpcbiAgICAgICAgICByZXR1cm4gc2ltcGxlKG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcInV1dVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7XG4gICAgICAgIC8vIG1lcmlkaWVtXG4gICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tZXJpZGllbXMoKSwgMCk7XG4gICAgICAgIC8vIHdlZWtZZWFyIChrKVxuICAgICAgICBjYXNlIFwia2tra1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpO1xuICAgICAgICBjYXNlIFwia2tcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d29Ub0ZvdXIsIHVudHJ1bmNhdGVZZWFyKTtcbiAgICAgICAgLy8gd2Vla051bWJlciAoVylcbiAgICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIC8vIHdlZWtkYXlzXG4gICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lKTtcbiAgICAgICAgY2FzZSBcIkVFRVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJzaG9ydFwiLCBmYWxzZSksIDEpO1xuICAgICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJsb25nXCIsIGZhbHNlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgdHJ1ZSksIDEpO1xuICAgICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJsb25nXCIsIHRydWUpLCAxKTtcbiAgICAgICAgLy8gb2Zmc2V0L3pvbmVcbiAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgY2FzZSBcIlpaXCI6XG4gICAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKGAoWystXSR7b25lT3JUd28uc291cmNlfSkoPzo6KCR7dHdvLnNvdXJjZX0pKT9gKSwgMik7XG4gICAgICAgIGNhc2UgXCJaWlpcIjpcbiAgICAgICAgICByZXR1cm4gb2Zmc2V0KG5ldyBSZWdFeHAoYChbKy1dJHtvbmVPclR3by5zb3VyY2V9KSgke3R3by5zb3VyY2V9KT9gKSwgMik7XG4gICAgICAgIC8vIHdlIGRvbid0IHN1cHBvcnQgWlpaWiAoUFNUKSBvciBaWlpaWiAoUGFjaWZpYyBTdGFuZGFyZCBUaW1lKSBpbiBwYXJzaW5nXG4gICAgICAgIC8vIGJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBhbnkgd2F5IHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGV5IGFyZVxuICAgICAgICBjYXNlIFwielwiOlxuICAgICAgICAgIHJldHVybiBzaW1wbGUoL1thLXpfKy0vXXsxLDI1Nn0/L2kpO1xuICAgICAgICAvLyB0aGlzIHNwZWNpYWwtY2FzZSBcInRva2VuXCIgcmVwcmVzZW50cyBhIHBsYWNlIHdoZXJlIGEgbWFjcm8tdG9rZW4gZXhwYW5kZWQgaW50byBhIHdoaXRlLXNwYWNlIGxpdGVyYWxcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGFjY2VwdCBhbnkgbm9uLW5ld2xpbmUgd2hpdGUtc3BhY2VcbiAgICAgICAgY2FzZSBcIiBcIjpcbiAgICAgICAgICByZXR1cm4gc2ltcGxlKC9bXlxcU1xcblxccl0vKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gIGNvbnN0IHVuaXQgPSB1bml0YXRlKHRva2VuKSB8fCB7XG4gICAgaW52YWxpZFJlYXNvbjogTUlTU0lOR19GVFAsXG4gIH07XG5cbiAgdW5pdC50b2tlbiA9IHRva2VuO1xuXG4gIHJldHVybiB1bml0O1xufVxuXG5jb25zdCBwYXJ0VHlwZVN0eWxlVG9Ub2tlblZhbCA9IHtcbiAgeWVhcjoge1xuICAgIFwiMi1kaWdpdFwiOiBcInl5XCIsXG4gICAgbnVtZXJpYzogXCJ5eXl5eVwiLFxuICB9LFxuICBtb250aDoge1xuICAgIG51bWVyaWM6IFwiTVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIk1NXCIsXG4gICAgc2hvcnQ6IFwiTU1NXCIsXG4gICAgbG9uZzogXCJNTU1NXCIsXG4gIH0sXG4gIGRheToge1xuICAgIG51bWVyaWM6IFwiZFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImRkXCIsXG4gIH0sXG4gIHdlZWtkYXk6IHtcbiAgICBzaG9ydDogXCJFRUVcIixcbiAgICBsb25nOiBcIkVFRUVcIixcbiAgfSxcbiAgZGF5cGVyaW9kOiBcImFcIixcbiAgZGF5UGVyaW9kOiBcImFcIixcbiAgaG91cjEyOiB7XG4gICAgbnVtZXJpYzogXCJoXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwiaGhcIixcbiAgfSxcbiAgaG91cjI0OiB7XG4gICAgbnVtZXJpYzogXCJIXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwiSEhcIixcbiAgfSxcbiAgbWludXRlOiB7XG4gICAgbnVtZXJpYzogXCJtXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwibW1cIixcbiAgfSxcbiAgc2Vjb25kOiB7XG4gICAgbnVtZXJpYzogXCJzXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwic3NcIixcbiAgfSxcbiAgdGltZVpvbmVOYW1lOiB7XG4gICAgbG9uZzogXCJaWlpaWlwiLFxuICAgIHNob3J0OiBcIlpaWlwiLFxuICB9LFxufTtcblxuZnVuY3Rpb24gdG9rZW5Gb3JQYXJ0KHBhcnQsIGZvcm1hdE9wdHMsIHJlc29sdmVkT3B0cykge1xuICBjb25zdCB7IHR5cGUsIHZhbHVlIH0gPSBwYXJ0O1xuXG4gIGlmICh0eXBlID09PSBcImxpdGVyYWxcIikge1xuICAgIGNvbnN0IGlzU3BhY2UgPSAvXlxccyskLy50ZXN0KHZhbHVlKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGl0ZXJhbDogIWlzU3BhY2UsXG4gICAgICB2YWw6IGlzU3BhY2UgPyBcIiBcIiA6IHZhbHVlLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBzdHlsZSA9IGZvcm1hdE9wdHNbdHlwZV07XG5cbiAgLy8gVGhlIHVzZXIgbWlnaHQgaGF2ZSBleHBsaWNpdGx5IHNwZWNpZmllZCBob3VyMTIgb3IgaG91ckN5Y2xlXG4gIC8vIGlmIHNvLCByZXNwZWN0IHRoZWlyIGRlY2lzaW9uXG4gIC8vIGlmIG5vdCwgcmVmZXIgYmFjayB0byB0aGUgcmVzb2x2ZWRPcHRzLCB3aGljaCBhcmUgYmFzZWQgb24gdGhlIGxvY2FsZVxuICBsZXQgYWN0dWFsVHlwZSA9IHR5cGU7XG4gIGlmICh0eXBlID09PSBcImhvdXJcIikge1xuICAgIGlmIChmb3JtYXRPcHRzLmhvdXIxMiAhPSBudWxsKSB7XG4gICAgICBhY3R1YWxUeXBlID0gZm9ybWF0T3B0cy5ob3VyMTIgPyBcImhvdXIxMlwiIDogXCJob3VyMjRcIjtcbiAgICB9IGVsc2UgaWYgKGZvcm1hdE9wdHMuaG91ckN5Y2xlICE9IG51bGwpIHtcbiAgICAgIGlmIChmb3JtYXRPcHRzLmhvdXJDeWNsZSA9PT0gXCJoMTFcIiB8fCBmb3JtYXRPcHRzLmhvdXJDeWNsZSA9PT0gXCJoMTJcIikge1xuICAgICAgICBhY3R1YWxUeXBlID0gXCJob3VyMTJcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdHVhbFR5cGUgPSBcImhvdXIyNFwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0b2tlbnMgb25seSBkaWZmZXJlbnRpYXRlIGJldHdlZW4gMjQgaG91cnMgb3Igbm90LFxuICAgICAgLy8gc28gd2UgZG8gbm90IG5lZWQgdG8gY2hlY2sgaG91ckN5Y2xlIGhlcmUsIHdoaWNoIGlzIGxlc3Mgc3VwcG9ydGVkIGFueXdheXNcbiAgICAgIGFjdHVhbFR5cGUgPSByZXNvbHZlZE9wdHMuaG91cjEyID8gXCJob3VyMTJcIiA6IFwiaG91cjI0XCI7XG4gICAgfVxuICB9XG4gIGxldCB2YWwgPSBwYXJ0VHlwZVN0eWxlVG9Ub2tlblZhbFthY3R1YWxUeXBlXTtcbiAgaWYgKHR5cGVvZiB2YWwgPT09IFwib2JqZWN0XCIpIHtcbiAgICB2YWwgPSB2YWxbc3R5bGVdO1xuICB9XG5cbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiBmYWxzZSxcbiAgICAgIHZhbCxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gYnVpbGRSZWdleCh1bml0cykge1xuICBjb25zdCByZSA9IHVuaXRzLm1hcCgodSkgPT4gdS5yZWdleCkucmVkdWNlKChmLCByKSA9PiBgJHtmfSgke3Iuc291cmNlfSlgLCBcIlwiKTtcbiAgcmV0dXJuIFtgXiR7cmV9JGAsIHVuaXRzXTtcbn1cblxuZnVuY3Rpb24gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycykge1xuICBjb25zdCBtYXRjaGVzID0gaW5wdXQubWF0Y2gocmVnZXgpO1xuXG4gIGlmIChtYXRjaGVzKSB7XG4gICAgY29uc3QgYWxsID0ge307XG4gICAgbGV0IG1hdGNoSW5kZXggPSAxO1xuICAgIGZvciAoY29uc3QgaSBpbiBoYW5kbGVycykge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5KGhhbmRsZXJzLCBpKSkge1xuICAgICAgICBjb25zdCBoID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgZ3JvdXBzID0gaC5ncm91cHMgPyBoLmdyb3VwcyArIDEgOiAxO1xuICAgICAgICBpZiAoIWgubGl0ZXJhbCAmJiBoLnRva2VuKSB7XG4gICAgICAgICAgYWxsW2gudG9rZW4udmFsWzBdXSA9IGguZGVzZXIobWF0Y2hlcy5zbGljZShtYXRjaEluZGV4LCBtYXRjaEluZGV4ICsgZ3JvdXBzKSk7XG4gICAgICAgIH1cbiAgICAgICAgbWF0Y2hJbmRleCArPSBncm91cHM7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbbWF0Y2hlcywgYWxsXTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gW21hdGNoZXMsIHt9XTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkYXRlVGltZUZyb21NYXRjaGVzKG1hdGNoZXMpIHtcbiAgY29uc3QgdG9GaWVsZCA9ICh0b2tlbikgPT4ge1xuICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgIHJldHVybiBcIm1pbGxpc2Vjb25kXCI7XG4gICAgICBjYXNlIFwic1wiOlxuICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcbiAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgIHJldHVybiBcIm1pbnV0ZVwiO1xuICAgICAgY2FzZSBcImhcIjpcbiAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgIHJldHVybiBcImhvdXJcIjtcbiAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgIHJldHVybiBcImRheVwiO1xuICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgcmV0dXJuIFwib3JkaW5hbFwiO1xuICAgICAgY2FzZSBcIkxcIjpcbiAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgIHJldHVybiBcIm1vbnRoXCI7XG4gICAgICBjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gXCJ5ZWFyXCI7XG4gICAgICBjYXNlIFwiRVwiOlxuICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla2RheVwiO1xuICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla051bWJlclwiO1xuICAgICAgY2FzZSBcImtcIjpcbiAgICAgICAgcmV0dXJuIFwid2Vla1llYXJcIjtcbiAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgIHJldHVybiBcInF1YXJ0ZXJcIjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICBsZXQgem9uZSA9IG51bGw7XG4gIGxldCBzcGVjaWZpY09mZnNldDtcbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnopKSB7XG4gICAgem9uZSA9IElBTkFab25lLmNyZWF0ZShtYXRjaGVzLnopO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLlopKSB7XG4gICAgaWYgKCF6b25lKSB7XG4gICAgICB6b25lID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZShtYXRjaGVzLlopO1xuICAgIH1cbiAgICBzcGVjaWZpY09mZnNldCA9IG1hdGNoZXMuWjtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5xKSkge1xuICAgIG1hdGNoZXMuTSA9IChtYXRjaGVzLnEgLSAxKSAqIDMgKyAxO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLmgpKSB7XG4gICAgaWYgKG1hdGNoZXMuaCA8IDEyICYmIG1hdGNoZXMuYSA9PT0gMSkge1xuICAgICAgbWF0Y2hlcy5oICs9IDEyO1xuICAgIH0gZWxzZSBpZiAobWF0Y2hlcy5oID09PSAxMiAmJiBtYXRjaGVzLmEgPT09IDApIHtcbiAgICAgIG1hdGNoZXMuaCA9IDA7XG4gICAgfVxuICB9XG5cbiAgaWYgKG1hdGNoZXMuRyA9PT0gMCAmJiBtYXRjaGVzLnkpIHtcbiAgICBtYXRjaGVzLnkgPSAtbWF0Y2hlcy55O1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnUpKSB7XG4gICAgbWF0Y2hlcy5TID0gcGFyc2VNaWxsaXMobWF0Y2hlcy51KTtcbiAgfVxuXG4gIGNvbnN0IHZhbHMgPSBPYmplY3Qua2V5cyhtYXRjaGVzKS5yZWR1Y2UoKHIsIGspID0+IHtcbiAgICBjb25zdCBmID0gdG9GaWVsZChrKTtcbiAgICBpZiAoZikge1xuICAgICAgcltmXSA9IG1hdGNoZXNba107XG4gICAgfVxuXG4gICAgcmV0dXJuIHI7XG4gIH0sIHt9KTtcblxuICByZXR1cm4gW3ZhbHMsIHpvbmUsIHNwZWNpZmljT2Zmc2V0XTtcbn1cblxubGV0IGR1bW15RGF0ZVRpbWVDYWNoZSA9IG51bGw7XG5cbmZ1bmN0aW9uIGdldER1bW15RGF0ZVRpbWUoKSB7XG4gIGlmICghZHVtbXlEYXRlVGltZUNhY2hlKSB7XG4gICAgZHVtbXlEYXRlVGltZUNhY2hlID0gRGF0ZVRpbWUuZnJvbU1pbGxpcygxNTU1NTU1NTU1NTU1KTtcbiAgfVxuXG4gIHJldHVybiBkdW1teURhdGVUaW1lQ2FjaGU7XG59XG5cbmZ1bmN0aW9uIG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0b2tlbiwgbG9jYWxlKSB7XG4gIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgY29uc3QgZm9ybWF0T3B0cyA9IEZvcm1hdHRlci5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuLnZhbCk7XG4gIGNvbnN0IHRva2VucyA9IGZvcm1hdE9wdHNUb1Rva2Vucyhmb3JtYXRPcHRzLCBsb2NhbGUpO1xuXG4gIGlmICh0b2tlbnMgPT0gbnVsbCB8fCB0b2tlbnMuaW5jbHVkZXModW5kZWZpbmVkKSkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIHJldHVybiB0b2tlbnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRNYWNyb1Rva2Vucyh0b2tlbnMsIGxvY2FsZSkge1xuICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdCguLi50b2tlbnMubWFwKCh0KSA9PiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odCwgbG9jYWxlKSkpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCkge1xuICBjb25zdCB0b2tlbnMgPSBleHBhbmRNYWNyb1Rva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm9ybWF0KSwgbG9jYWxlKSxcbiAgICB1bml0cyA9IHRva2Vucy5tYXAoKHQpID0+IHVuaXRGb3JUb2tlbih0LCBsb2NhbGUpKSxcbiAgICBkaXNxdWFsaWZ5aW5nVW5pdCA9IHVuaXRzLmZpbmQoKHQpID0+IHQuaW52YWxpZFJlYXNvbik7XG5cbiAgaWYgKGRpc3F1YWxpZnlpbmdVbml0KSB7XG4gICAgcmV0dXJuIHsgaW5wdXQsIHRva2VucywgaW52YWxpZFJlYXNvbjogZGlzcXVhbGlmeWluZ1VuaXQuaW52YWxpZFJlYXNvbiB9O1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IFtyZWdleFN0cmluZywgaGFuZGxlcnNdID0gYnVpbGRSZWdleCh1bml0cyksXG4gICAgICByZWdleCA9IFJlZ0V4cChyZWdleFN0cmluZywgXCJpXCIpLFxuICAgICAgW3Jhd01hdGNoZXMsIG1hdGNoZXNdID0gbWF0Y2goaW5wdXQsIHJlZ2V4LCBoYW5kbGVycyksXG4gICAgICBbcmVzdWx0LCB6b25lLCBzcGVjaWZpY09mZnNldF0gPSBtYXRjaGVzXG4gICAgICAgID8gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKVxuICAgICAgICA6IFtudWxsLCBudWxsLCB1bmRlZmluZWRdO1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eShtYXRjaGVzLCBcImFcIikgJiYgaGFzT3duUHJvcGVydHkobWF0Y2hlcywgXCJIXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgaW5jbHVkZSBtZXJpZGllbSB3aGVuIHNwZWNpZnlpbmcgMjQtaG91ciBmb3JtYXRcIlxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaW5wdXQsIHRva2VucywgcmVnZXgsIHJhd01hdGNoZXMsIG1hdGNoZXMsIHJlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCkge1xuICBjb25zdCB7IHJlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb24gfSA9IGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZSwgaW5wdXQsIGZvcm1hdCk7XG4gIHJldHVybiBbcmVzdWx0LCB6b25lLCBzcGVjaWZpY09mZnNldCwgaW52YWxpZFJlYXNvbl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgbG9jYWxlKSB7XG4gIGlmICghZm9ybWF0T3B0cykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3QgZm9ybWF0dGVyID0gRm9ybWF0dGVyLmNyZWF0ZShsb2NhbGUsIGZvcm1hdE9wdHMpO1xuICBjb25zdCBkZiA9IGZvcm1hdHRlci5kdEZvcm1hdHRlcihnZXREdW1teURhdGVUaW1lKCkpO1xuICBjb25zdCBwYXJ0cyA9IGRmLmZvcm1hdFRvUGFydHMoKTtcbiAgY29uc3QgcmVzb2x2ZWRPcHRzID0gZGYucmVzb2x2ZWRPcHRpb25zKCk7XG4gIHJldHVybiBwYXJ0cy5tYXAoKHApID0+IHRva2VuRm9yUGFydChwLCBmb3JtYXRPcHRzLCByZXNvbHZlZE9wdHMpKTtcbn1cbiIsICJpbXBvcnQgRHVyYXRpb24gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcbmltcG9ydCBJbnRlcnZhbCBmcm9tIFwiLi9pbnRlcnZhbC5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgSW5mbyBmcm9tIFwiLi9pbmZvLmpzXCI7XG5pbXBvcnQgRm9ybWF0dGVyIGZyb20gXCIuL2ltcGwvZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qc1wiO1xuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9pbXBsL2xvY2FsZS5qc1wiO1xuaW1wb3J0IHtcbiAgaXNVbmRlZmluZWQsXG4gIG1heWJlQXJyYXksXG4gIGlzRGF0ZSxcbiAgaXNOdW1iZXIsXG4gIGJlc3RCeSxcbiAgZGF5c0luTW9udGgsXG4gIGRheXNJblllYXIsXG4gIGlzTGVhcFllYXIsXG4gIHdlZWtzSW5XZWVrWWVhcixcbiAgbm9ybWFsaXplT2JqZWN0LFxuICByb3VuZFRvLFxuICBvYmpUb0xvY2FsVFMsXG4gIHBhZFN0YXJ0LFxufSBmcm9tIFwiLi9pbXBsL3V0aWwuanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVpvbmUgfSBmcm9tIFwiLi9pbXBsL3pvbmVVdGlsLmpzXCI7XG5pbXBvcnQgZGlmZiBmcm9tIFwiLi9pbXBsL2RpZmYuanNcIjtcbmltcG9ydCB7IHBhcnNlUkZDMjgyMkRhdGUsIHBhcnNlSVNPRGF0ZSwgcGFyc2VIVFRQRGF0ZSwgcGFyc2VTUUwgfSBmcm9tIFwiLi9pbXBsL3JlZ2V4UGFyc2VyLmpzXCI7XG5pbXBvcnQge1xuICBwYXJzZUZyb21Ub2tlbnMsXG4gIGV4cGxhaW5Gcm9tVG9rZW5zLFxuICBmb3JtYXRPcHRzVG9Ub2tlbnMsXG4gIGV4cGFuZE1hY3JvVG9rZW5zLFxufSBmcm9tIFwiLi9pbXBsL3Rva2VuUGFyc2VyLmpzXCI7XG5pbXBvcnQge1xuICBncmVnb3JpYW5Ub1dlZWssXG4gIHdlZWtUb0dyZWdvcmlhbixcbiAgZ3JlZ29yaWFuVG9PcmRpbmFsLFxuICBvcmRpbmFsVG9HcmVnb3JpYW4sXG4gIGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhLFxuICBoYXNJbnZhbGlkV2Vla0RhdGEsXG4gIGhhc0ludmFsaWRPcmRpbmFsRGF0YSxcbiAgaGFzSW52YWxpZFRpbWVEYXRhLFxuICB1c2VzTG9jYWxXZWVrVmFsdWVzLFxuICBpc29XZWVrZGF5VG9Mb2NhbCxcbn0gZnJvbSBcIi4vaW1wbC9jb252ZXJzaW9ucy5qc1wiO1xuaW1wb3J0ICogYXMgRm9ybWF0cyBmcm9tIFwiLi9pbXBsL2Zvcm1hdHMuanNcIjtcbmltcG9ydCB7XG4gIEludmFsaWRBcmd1bWVudEVycm9yLFxuICBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcixcbiAgSW52YWxpZFVuaXRFcnJvcixcbiAgSW52YWxpZERhdGVUaW1lRXJyb3IsXG59IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW1wbC9pbnZhbGlkLmpzXCI7XG5cbmNvbnN0IElOVkFMSUQgPSBcIkludmFsaWQgRGF0ZVRpbWVcIjtcbmNvbnN0IE1BWF9EQVRFID0gOC42NGUxNTtcblxuZnVuY3Rpb24gdW5zdXBwb3J0ZWRab25lKHpvbmUpIHtcbiAgcmV0dXJuIG5ldyBJbnZhbGlkKFwidW5zdXBwb3J0ZWQgem9uZVwiLCBgdGhlIHpvbmUgXCIke3pvbmUubmFtZX1cIiBpcyBub3Qgc3VwcG9ydGVkYCk7XG59XG5cbi8vIHdlIGNhY2hlIHdlZWsgZGF0YSBvbiB0aGUgRFQgb2JqZWN0IGFuZCB0aGlzIGludGVybWVkaWF0ZXMgdGhlIGNhY2hlXG4vKipcbiAqIEBwYXJhbSB7RGF0ZVRpbWV9IGR0XG4gKi9cbmZ1bmN0aW9uIHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEoZHQpIHtcbiAgaWYgKGR0LndlZWtEYXRhID09PSBudWxsKSB7XG4gICAgZHQud2Vla0RhdGEgPSBncmVnb3JpYW5Ub1dlZWsoZHQuYyk7XG4gIH1cbiAgcmV0dXJuIGR0LndlZWtEYXRhO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RGF0ZVRpbWV9IGR0XG4gKi9cbmZ1bmN0aW9uIHBvc3NpYmx5Q2FjaGVkTG9jYWxXZWVrRGF0YShkdCkge1xuICBpZiAoZHQubG9jYWxXZWVrRGF0YSA9PT0gbnVsbCkge1xuICAgIGR0LmxvY2FsV2Vla0RhdGEgPSBncmVnb3JpYW5Ub1dlZWsoXG4gICAgICBkdC5jLFxuICAgICAgZHQubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLFxuICAgICAgZHQubG9jLmdldFN0YXJ0T2ZXZWVrKClcbiAgICApO1xuICB9XG4gIHJldHVybiBkdC5sb2NhbFdlZWtEYXRhO1xufVxuXG4vLyBjbG9uZSByZWFsbHkgbWVhbnMsIFwibWFrZSBhIG5ldyBvYmplY3Qgd2l0aCB0aGVzZSBtb2RpZmljYXRpb25zXCIuIGFsbCBcInNldHRlcnNcIiByZWFsbHkgdXNlIHRoaXNcbi8vIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3Qgd2hpbGUgb25seSBjaGFuZ2luZyBzb21lIG9mIHRoZSBwcm9wZXJ0aWVzXG5mdW5jdGlvbiBjbG9uZShpbnN0LCBhbHRzKSB7XG4gIGNvbnN0IGN1cnJlbnQgPSB7XG4gICAgdHM6IGluc3QudHMsXG4gICAgem9uZTogaW5zdC56b25lLFxuICAgIGM6IGluc3QuYyxcbiAgICBvOiBpbnN0Lm8sXG4gICAgbG9jOiBpbnN0LmxvYyxcbiAgICBpbnZhbGlkOiBpbnN0LmludmFsaWQsXG4gIH07XG4gIHJldHVybiBuZXcgRGF0ZVRpbWUoeyAuLi5jdXJyZW50LCAuLi5hbHRzLCBvbGQ6IGN1cnJlbnQgfSk7XG59XG5cbi8vIGZpbmQgdGhlIHJpZ2h0IG9mZnNldCBhIGdpdmVuIGxvY2FsIHRpbWUuIFRoZSBvIGlucHV0IGlzIG91ciBndWVzcywgd2hpY2ggZGV0ZXJtaW5lcyB3aGljaFxuLy8gb2Zmc2V0IHdlJ2xsIHBpY2sgaW4gYW1iaWd1b3VzIGNhc2VzIChlLmcuIHRoZXJlIGFyZSB0d28gMyBBTXMgYi9jIEZhbGxiYWNrIERTVClcbmZ1bmN0aW9uIGZpeE9mZnNldChsb2NhbFRTLCBvLCB0eikge1xuICAvLyBPdXIgVVRDIHRpbWUgaXMganVzdCBhIGd1ZXNzIGJlY2F1c2Ugb3VyIG9mZnNldCBpcyBqdXN0IGEgZ3Vlc3NcbiAgbGV0IHV0Y0d1ZXNzID0gbG9jYWxUUyAtIG8gKiA2MCAqIDEwMDA7XG5cbiAgLy8gVGVzdCB3aGV0aGVyIHRoZSB6b25lIG1hdGNoZXMgdGhlIG9mZnNldCBmb3IgdGhpcyB0c1xuICBjb25zdCBvMiA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7XG5cbiAgLy8gSWYgc28sIG9mZnNldCBkaWRuJ3QgY2hhbmdlIGFuZCB3ZSdyZSBkb25lXG4gIGlmIChvID09PSBvMikge1xuICAgIHJldHVybiBbdXRjR3Vlc3MsIG9dO1xuICB9XG5cbiAgLy8gSWYgbm90LCBjaGFuZ2UgdGhlIHRzIGJ5IHRoZSBkaWZmZXJlbmNlIGluIHRoZSBvZmZzZXRcbiAgdXRjR3Vlc3MgLT0gKG8yIC0gbykgKiA2MCAqIDEwMDA7XG5cbiAgLy8gSWYgdGhhdCBnaXZlcyB1cyB0aGUgbG9jYWwgdGltZSB3ZSB3YW50LCB3ZSdyZSBkb25lXG4gIGNvbnN0IG8zID0gdHoub2Zmc2V0KHV0Y0d1ZXNzKTtcbiAgaWYgKG8yID09PSBvMykge1xuICAgIHJldHVybiBbdXRjR3Vlc3MsIG8yXTtcbiAgfVxuXG4gIC8vIElmIGl0J3MgZGlmZmVyZW50LCB3ZSdyZSBpbiBhIGhvbGUgdGltZS4gVGhlIG9mZnNldCBoYXMgY2hhbmdlZCwgYnV0IHRoZSB3ZSBkb24ndCBhZGp1c3QgdGhlIHRpbWVcbiAgcmV0dXJuIFtsb2NhbFRTIC0gTWF0aC5taW4obzIsIG8zKSAqIDYwICogMTAwMCwgTWF0aC5tYXgobzIsIG8zKV07XG59XG5cbi8vIGNvbnZlcnQgYW4gZXBvY2ggdGltZXN0YW1wIGludG8gYSBjYWxlbmRhciBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gb2Zmc2V0XG5mdW5jdGlvbiB0c1RvT2JqKHRzLCBvZmZzZXQpIHtcbiAgdHMgKz0gb2Zmc2V0ICogNjAgKiAxMDAwO1xuXG4gIGNvbnN0IGQgPSBuZXcgRGF0ZSh0cyk7XG5cbiAgcmV0dXJuIHtcbiAgICB5ZWFyOiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgbW9udGg6IGQuZ2V0VVRDTW9udGgoKSArIDEsXG4gICAgZGF5OiBkLmdldFVUQ0RhdGUoKSxcbiAgICBob3VyOiBkLmdldFVUQ0hvdXJzKCksXG4gICAgbWludXRlOiBkLmdldFVUQ01pbnV0ZXMoKSxcbiAgICBzZWNvbmQ6IGQuZ2V0VVRDU2Vjb25kcygpLFxuICAgIG1pbGxpc2Vjb25kOiBkLmdldFVUQ01pbGxpc2Vjb25kcygpLFxuICB9O1xufVxuXG4vLyBjb252ZXJ0IGEgY2FsZW5kYXIgb2JqZWN0IHRvIGEgZXBvY2ggdGltZXN0YW1wXG5mdW5jdGlvbiBvYmpUb1RTKG9iaiwgb2Zmc2V0LCB6b25lKSB7XG4gIHJldHVybiBmaXhPZmZzZXQob2JqVG9Mb2NhbFRTKG9iaiksIG9mZnNldCwgem9uZSk7XG59XG5cbi8vIGNyZWF0ZSBhIG5ldyBEVCBpbnN0YW5jZSBieSBhZGRpbmcgYSBkdXJhdGlvbiwgYWRqdXN0aW5nIGZvciBEU1RzXG5mdW5jdGlvbiBhZGp1c3RUaW1lKGluc3QsIGR1cikge1xuICBjb25zdCBvUHJlID0gaW5zdC5vLFxuICAgIHllYXIgPSBpbnN0LmMueWVhciArIE1hdGgudHJ1bmMoZHVyLnllYXJzKSxcbiAgICBtb250aCA9IGluc3QuYy5tb250aCArIE1hdGgudHJ1bmMoZHVyLm1vbnRocykgKyBNYXRoLnRydW5jKGR1ci5xdWFydGVycykgKiAzLFxuICAgIGMgPSB7XG4gICAgICAuLi5pbnN0LmMsXG4gICAgICB5ZWFyLFxuICAgICAgbW9udGgsXG4gICAgICBkYXk6XG4gICAgICAgIE1hdGgubWluKGluc3QuYy5kYXksIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSkgK1xuICAgICAgICBNYXRoLnRydW5jKGR1ci5kYXlzKSArXG4gICAgICAgIE1hdGgudHJ1bmMoZHVyLndlZWtzKSAqIDcsXG4gICAgfSxcbiAgICBtaWxsaXNUb0FkZCA9IER1cmF0aW9uLmZyb21PYmplY3Qoe1xuICAgICAgeWVhcnM6IGR1ci55ZWFycyAtIE1hdGgudHJ1bmMoZHVyLnllYXJzKSxcbiAgICAgIHF1YXJ0ZXJzOiBkdXIucXVhcnRlcnMgLSBNYXRoLnRydW5jKGR1ci5xdWFydGVycyksXG4gICAgICBtb250aHM6IGR1ci5tb250aHMgLSBNYXRoLnRydW5jKGR1ci5tb250aHMpLFxuICAgICAgd2Vla3M6IGR1ci53ZWVrcyAtIE1hdGgudHJ1bmMoZHVyLndlZWtzKSxcbiAgICAgIGRheXM6IGR1ci5kYXlzIC0gTWF0aC50cnVuYyhkdXIuZGF5cyksXG4gICAgICBob3VyczogZHVyLmhvdXJzLFxuICAgICAgbWludXRlczogZHVyLm1pbnV0ZXMsXG4gICAgICBzZWNvbmRzOiBkdXIuc2Vjb25kcyxcbiAgICAgIG1pbGxpc2Vjb25kczogZHVyLm1pbGxpc2Vjb25kcyxcbiAgICB9KS5hcyhcIm1pbGxpc2Vjb25kc1wiKSxcbiAgICBsb2NhbFRTID0gb2JqVG9Mb2NhbFRTKGMpO1xuXG4gIGxldCBbdHMsIG9dID0gZml4T2Zmc2V0KGxvY2FsVFMsIG9QcmUsIGluc3Quem9uZSk7XG5cbiAgaWYgKG1pbGxpc1RvQWRkICE9PSAwKSB7XG4gICAgdHMgKz0gbWlsbGlzVG9BZGQ7XG4gICAgLy8gdGhhdCBjb3VsZCBoYXZlIGNoYW5nZWQgdGhlIG9mZnNldCBieSBnb2luZyBvdmVyIGEgRFNULCBidXQgd2Ugd2FudCB0byBrZWVwIHRoZSB0cyB0aGUgc2FtZVxuICAgIG8gPSBpbnN0LnpvbmUub2Zmc2V0KHRzKTtcbiAgfVxuXG4gIHJldHVybiB7IHRzLCBvIH07XG59XG5cbi8vIGhlbHBlciB1c2VmdWwgaW4gdHVybmluZyB0aGUgcmVzdWx0cyBvZiBwYXJzaW5nIGludG8gcmVhbCBkYXRlc1xuLy8gYnkgaGFuZGxpbmcgdGhlIHpvbmUgb3B0aW9uc1xuZnVuY3Rpb24gcGFyc2VEYXRhVG9EYXRlVGltZShwYXJzZWQsIHBhcnNlZFpvbmUsIG9wdHMsIGZvcm1hdCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpIHtcbiAgY29uc3QgeyBzZXRab25lLCB6b25lIH0gPSBvcHRzO1xuICBpZiAoKHBhcnNlZCAmJiBPYmplY3Qua2V5cyhwYXJzZWQpLmxlbmd0aCAhPT0gMCkgfHwgcGFyc2VkWm9uZSkge1xuICAgIGNvbnN0IGludGVycHJldGF0aW9uWm9uZSA9IHBhcnNlZFpvbmUgfHwgem9uZSxcbiAgICAgIGluc3QgPSBEYXRlVGltZS5mcm9tT2JqZWN0KHBhcnNlZCwge1xuICAgICAgICAuLi5vcHRzLFxuICAgICAgICB6b25lOiBpbnRlcnByZXRhdGlvblpvbmUsXG4gICAgICAgIHNwZWNpZmljT2Zmc2V0LFxuICAgICAgfSk7XG4gICAgcmV0dXJuIHNldFpvbmUgPyBpbnN0IDogaW5zdC5zZXRab25lKHpvbmUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFxuICAgICAgbmV3IEludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIGB0aGUgaW5wdXQgXCIke3RleHR9XCIgY2FuJ3QgYmUgcGFyc2VkIGFzICR7Zm9ybWF0fWApXG4gICAgKTtcbiAgfVxufVxuXG4vLyBpZiB5b3Ugd2FudCB0byBvdXRwdXQgYSB0ZWNobmljYWwgZm9ybWF0IChlLmcuIFJGQyAyODIyKSwgdGhpcyBoZWxwZXJcbi8vIGhlbHBzIGhhbmRsZSB0aGUgZGV0YWlsc1xuZnVuY3Rpb24gdG9UZWNoRm9ybWF0KGR0LCBmb3JtYXQsIGFsbG93WiA9IHRydWUpIHtcbiAgcmV0dXJuIGR0LmlzVmFsaWRcbiAgICA/IEZvcm1hdHRlci5jcmVhdGUoTG9jYWxlLmNyZWF0ZShcImVuLVVTXCIpLCB7XG4gICAgICAgIGFsbG93WixcbiAgICAgICAgZm9yY2VTaW1wbGU6IHRydWUsXG4gICAgICB9KS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZvcm1hdClcbiAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHRvSVNPRGF0ZShvLCBleHRlbmRlZCkge1xuICBjb25zdCBsb25nRm9ybWF0ID0gby5jLnllYXIgPiA5OTk5IHx8IG8uYy55ZWFyIDwgMDtcbiAgbGV0IGMgPSBcIlwiO1xuICBpZiAobG9uZ0Zvcm1hdCAmJiBvLmMueWVhciA+PSAwKSBjICs9IFwiK1wiO1xuICBjICs9IHBhZFN0YXJ0KG8uYy55ZWFyLCBsb25nRm9ybWF0ID8gNiA6IDQpO1xuXG4gIGlmIChleHRlbmRlZCkge1xuICAgIGMgKz0gXCItXCI7XG4gICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpO1xuICAgIGMgKz0gXCItXCI7XG4gICAgYyArPSBwYWRTdGFydChvLmMuZGF5KTtcbiAgfSBlbHNlIHtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5tb250aCk7XG4gICAgYyArPSBwYWRTdGFydChvLmMuZGF5KTtcbiAgfVxuICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gdG9JU09UaW1lKFxuICBvLFxuICBleHRlbmRlZCxcbiAgc3VwcHJlc3NTZWNvbmRzLFxuICBzdXBwcmVzc01pbGxpc2Vjb25kcyxcbiAgaW5jbHVkZU9mZnNldCxcbiAgZXh0ZW5kZWRab25lXG4pIHtcbiAgbGV0IGMgPSBwYWRTdGFydChvLmMuaG91cik7XG4gIGlmIChleHRlbmRlZCkge1xuICAgIGMgKz0gXCI6XCI7XG4gICAgYyArPSBwYWRTdGFydChvLmMubWludXRlKTtcbiAgICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8IG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykge1xuICAgICAgYyArPSBcIjpcIjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubWludXRlKTtcbiAgfVxuXG4gIGlmIChvLmMubWlsbGlzZWNvbmQgIT09IDAgfHwgby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMuc2Vjb25kKTtcblxuICAgIGlmIChvLmMubWlsbGlzZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzTWlsbGlzZWNvbmRzKSB7XG4gICAgICBjICs9IFwiLlwiO1xuICAgICAgYyArPSBwYWRTdGFydChvLmMubWlsbGlzZWNvbmQsIDMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpbmNsdWRlT2Zmc2V0KSB7XG4gICAgaWYgKG8uaXNPZmZzZXRGaXhlZCAmJiBvLm9mZnNldCA9PT0gMCAmJiAhZXh0ZW5kZWRab25lKSB7XG4gICAgICBjICs9IFwiWlwiO1xuICAgIH0gZWxzZSBpZiAoby5vIDwgMCkge1xuICAgICAgYyArPSBcIi1cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoLW8ubyAlIDYwKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMgKz0gXCIrXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vIC8gNjApKTtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoby5vICUgNjApKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZXh0ZW5kZWRab25lKSB7XG4gICAgYyArPSBcIltcIiArIG8uem9uZS5pYW5hTmFtZSArIFwiXVwiO1xuICB9XG4gIHJldHVybiBjO1xufVxuXG4vLyBkZWZhdWx0cyBmb3IgdW5zcGVjaWZpZWQgdW5pdHMgaW4gdGhlIHN1cHBvcnRlZCBjYWxlbmRhcnNcbmNvbnN0IGRlZmF1bHRVbml0VmFsdWVzID0ge1xuICAgIG1vbnRoOiAxLFxuICAgIGRheTogMSxcbiAgICBob3VyOiAwLFxuICAgIG1pbnV0ZTogMCxcbiAgICBzZWNvbmQ6IDAsXG4gICAgbWlsbGlzZWNvbmQ6IDAsXG4gIH0sXG4gIGRlZmF1bHRXZWVrVW5pdFZhbHVlcyA9IHtcbiAgICB3ZWVrTnVtYmVyOiAxLFxuICAgIHdlZWtkYXk6IDEsXG4gICAgaG91cjogMCxcbiAgICBtaW51dGU6IDAsXG4gICAgc2Vjb25kOiAwLFxuICAgIG1pbGxpc2Vjb25kOiAwLFxuICB9LFxuICBkZWZhdWx0T3JkaW5hbFVuaXRWYWx1ZXMgPSB7XG4gICAgb3JkaW5hbDogMSxcbiAgICBob3VyOiAwLFxuICAgIG1pbnV0ZTogMCxcbiAgICBzZWNvbmQ6IDAsXG4gICAgbWlsbGlzZWNvbmQ6IDAsXG4gIH07XG5cbi8vIFVuaXRzIGluIHRoZSBzdXBwb3J0ZWQgY2FsZW5kYXJzLCBzb3J0ZWQgYnkgYmlnbmVzc1xuY29uc3Qgb3JkZXJlZFVuaXRzID0gW1wieWVhclwiLCBcIm1vbnRoXCIsIFwiZGF5XCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdLFxuICBvcmRlcmVkV2Vla1VuaXRzID0gW1xuICAgIFwid2Vla1llYXJcIixcbiAgICBcIndlZWtOdW1iZXJcIixcbiAgICBcIndlZWtkYXlcIixcbiAgICBcImhvdXJcIixcbiAgICBcIm1pbnV0ZVwiLFxuICAgIFwic2Vjb25kXCIsXG4gICAgXCJtaWxsaXNlY29uZFwiLFxuICBdLFxuICBvcmRlcmVkT3JkaW5hbFVuaXRzID0gW1wieWVhclwiLCBcIm9yZGluYWxcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl07XG5cbi8vIHN0YW5kYXJkaXplIGNhc2UgYW5kIHBsdXJhbGl0eSBpbiB1bml0c1xuZnVuY3Rpb24gbm9ybWFsaXplVW5pdCh1bml0KSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWQgPSB7XG4gICAgeWVhcjogXCJ5ZWFyXCIsXG4gICAgeWVhcnM6IFwieWVhclwiLFxuICAgIG1vbnRoOiBcIm1vbnRoXCIsXG4gICAgbW9udGhzOiBcIm1vbnRoXCIsXG4gICAgZGF5OiBcImRheVwiLFxuICAgIGRheXM6IFwiZGF5XCIsXG4gICAgaG91cjogXCJob3VyXCIsXG4gICAgaG91cnM6IFwiaG91clwiLFxuICAgIG1pbnV0ZTogXCJtaW51dGVcIixcbiAgICBtaW51dGVzOiBcIm1pbnV0ZVwiLFxuICAgIHF1YXJ0ZXI6IFwicXVhcnRlclwiLFxuICAgIHF1YXJ0ZXJzOiBcInF1YXJ0ZXJcIixcbiAgICBzZWNvbmQ6IFwic2Vjb25kXCIsXG4gICAgc2Vjb25kczogXCJzZWNvbmRcIixcbiAgICBtaWxsaXNlY29uZDogXCJtaWxsaXNlY29uZFwiLFxuICAgIG1pbGxpc2Vjb25kczogXCJtaWxsaXNlY29uZFwiLFxuICAgIHdlZWtkYXk6IFwid2Vla2RheVwiLFxuICAgIHdlZWtkYXlzOiBcIndlZWtkYXlcIixcbiAgICB3ZWVrbnVtYmVyOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVrc251bWJlcjogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla251bWJlcnM6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWt5ZWFyOiBcIndlZWtZZWFyXCIsXG4gICAgd2Vla3llYXJzOiBcIndlZWtZZWFyXCIsXG4gICAgb3JkaW5hbDogXCJvcmRpbmFsXCIsXG4gIH1bdW5pdC50b0xvd2VyQ2FzZSgpXTtcblxuICBpZiAoIW5vcm1hbGl6ZWQpIHRocm93IG5ldyBJbnZhbGlkVW5pdEVycm9yKHVuaXQpO1xuXG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG5mdW5jdGlvbiBub3JtYWxpemVVbml0V2l0aExvY2FsV2Vla3ModW5pdCkge1xuICBzd2l0Y2ggKHVuaXQudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgXCJsb2NhbHdlZWtkYXlcIjpcbiAgICBjYXNlIFwibG9jYWx3ZWVrZGF5c1wiOlxuICAgICAgcmV0dXJuIFwibG9jYWxXZWVrZGF5XCI7XG4gICAgY2FzZSBcImxvY2Fsd2Vla251bWJlclwiOlxuICAgIGNhc2UgXCJsb2NhbHdlZWtudW1iZXJzXCI6XG4gICAgICByZXR1cm4gXCJsb2NhbFdlZWtOdW1iZXJcIjtcbiAgICBjYXNlIFwibG9jYWx3ZWVreWVhclwiOlxuICAgIGNhc2UgXCJsb2NhbHdlZWt5ZWFyc1wiOlxuICAgICAgcmV0dXJuIFwibG9jYWxXZWVrWWVhclwiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbm9ybWFsaXplVW5pdCh1bml0KTtcbiAgfVxufVxuXG4vLyB0aGlzIGlzIGEgZHVtYmVkIGRvd24gdmVyc2lvbiBvZiBmcm9tT2JqZWN0KCkgdGhhdCBydW5zIGFib3V0IDYwJSBmYXN0ZXJcbi8vIGJ1dCBkb2Vzbid0IGRvIGFueSB2YWxpZGF0aW9uLCBtYWtlcyBhIGJ1bmNoIG9mIGFzc3VtcHRpb25zIGFib3V0IHdoYXQgdW5pdHNcbi8vIGFyZSBwcmVzZW50LCBhbmQgc28gb24uXG5mdW5jdGlvbiBxdWlja0RUKG9iaiwgb3B0cykge1xuICBjb25zdCB6b25lID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICBsb2MgPSBMb2NhbGUuZnJvbU9iamVjdChvcHRzKSxcbiAgICB0c05vdyA9IFNldHRpbmdzLm5vdygpO1xuXG4gIGxldCB0cywgbztcblxuICAvLyBhc3N1bWUgd2UgaGF2ZSB0aGUgaGlnaGVyLW9yZGVyIHVuaXRzXG4gIGlmICghaXNVbmRlZmluZWQob2JqLnllYXIpKSB7XG4gICAgZm9yIChjb25zdCB1IG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKGlzVW5kZWZpbmVkKG9ialt1XSkpIHtcbiAgICAgICAgb2JqW3VdID0gZGVmYXVsdFVuaXRWYWx1ZXNbdV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaW52YWxpZCA9IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG9iaikgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG9iaik7XG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH1cblxuICAgIGNvbnN0IG9mZnNldFByb3ZpcyA9IHpvbmUub2Zmc2V0KHRzTm93KTtcbiAgICBbdHMsIG9dID0gb2JqVG9UUyhvYmosIG9mZnNldFByb3Zpcywgem9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdHMgPSB0c05vdztcbiAgfVxuXG4gIHJldHVybiBuZXcgRGF0ZVRpbWUoeyB0cywgem9uZSwgbG9jLCBvIH0pO1xufVxuXG5mdW5jdGlvbiBkaWZmUmVsYXRpdmUoc3RhcnQsIGVuZCwgb3B0cykge1xuICBjb25zdCByb3VuZCA9IGlzVW5kZWZpbmVkKG9wdHMucm91bmQpID8gdHJ1ZSA6IG9wdHMucm91bmQsXG4gICAgZm9ybWF0ID0gKGMsIHVuaXQpID0+IHtcbiAgICAgIGMgPSByb3VuZFRvKGMsIHJvdW5kIHx8IG9wdHMuY2FsZW5kYXJ5ID8gMCA6IDIsIHRydWUpO1xuICAgICAgY29uc3QgZm9ybWF0dGVyID0gZW5kLmxvYy5jbG9uZShvcHRzKS5yZWxGb3JtYXR0ZXIob3B0cyk7XG4gICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChjLCB1bml0KTtcbiAgICB9LFxuICAgIGRpZmZlciA9ICh1bml0KSA9PiB7XG4gICAgICBpZiAob3B0cy5jYWxlbmRhcnkpIHtcbiAgICAgICAgaWYgKCFlbmQuaGFzU2FtZShzdGFydCwgdW5pdCkpIHtcbiAgICAgICAgICByZXR1cm4gZW5kLnN0YXJ0T2YodW5pdCkuZGlmZihzdGFydC5zdGFydE9mKHVuaXQpLCB1bml0KS5nZXQodW5pdCk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgaWYgKG9wdHMudW5pdCkge1xuICAgIHJldHVybiBmb3JtYXQoZGlmZmVyKG9wdHMudW5pdCksIG9wdHMudW5pdCk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHVuaXQgb2Ygb3B0cy51bml0cykge1xuICAgIGNvbnN0IGNvdW50ID0gZGlmZmVyKHVuaXQpO1xuICAgIGlmIChNYXRoLmFicyhjb3VudCkgPj0gMSkge1xuICAgICAgcmV0dXJuIGZvcm1hdChjb3VudCwgdW5pdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmb3JtYXQoc3RhcnQgPiBlbmQgPyAtMCA6IDAsIG9wdHMudW5pdHNbb3B0cy51bml0cy5sZW5ndGggLSAxXSk7XG59XG5cbmZ1bmN0aW9uIGxhc3RPcHRzKGFyZ0xpc3QpIHtcbiAgbGV0IG9wdHMgPSB7fSxcbiAgICBhcmdzO1xuICBpZiAoYXJnTGlzdC5sZW5ndGggPiAwICYmIHR5cGVvZiBhcmdMaXN0W2FyZ0xpc3QubGVuZ3RoIC0gMV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICBvcHRzID0gYXJnTGlzdFthcmdMaXN0Lmxlbmd0aCAtIDFdO1xuICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpLnNsaWNlKDAsIGFyZ0xpc3QubGVuZ3RoIC0gMSk7XG4gIH0gZWxzZSB7XG4gICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCk7XG4gIH1cbiAgcmV0dXJuIFtvcHRzLCBhcmdzXTtcbn1cblxuLyoqXG4gKiBBIERhdGVUaW1lIGlzIGFuIGltbXV0YWJsZSBkYXRhIHN0cnVjdHVyZSByZXByZXNlbnRpbmcgYSBzcGVjaWZpYyBkYXRlIGFuZCB0aW1lIGFuZCBhY2NvbXBhbnlpbmcgbWV0aG9kcy4gSXQgY29udGFpbnMgY2xhc3MgYW5kIGluc3RhbmNlIG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uXG4gKlxuICogQSBEYXRlVGltZSBjb21wcmlzZXMgb2Y6XG4gKiAqIEEgdGltZXN0YW1wLiBFYWNoIERhdGVUaW1lIGluc3RhbmNlIHJlZmVycyB0byBhIHNwZWNpZmljIG1pbGxpc2Vjb25kIG9mIHRoZSBVbml4IGVwb2NoLlxuICogKiBBIHRpbWUgem9uZS4gRWFjaCBpbnN0YW5jZSBpcyBjb25zaWRlcmVkIGluIHRoZSBjb250ZXh0IG9mIGEgc3BlY2lmaWMgem9uZSAoYnkgZGVmYXVsdCB0aGUgbG9jYWwgc3lzdGVtJ3Mgem9uZSkuXG4gKiAqIENvbmZpZ3VyYXRpb24gcHJvcGVydGllcyB0aGF0IGVmZmVjdCBob3cgb3V0cHV0IHN0cmluZ3MgYXJlIGZvcm1hdHRlZCwgc3VjaCBhcyBgbG9jYWxlYCwgYG51bWJlcmluZ1N5c3RlbWAsIGFuZCBgb3V0cHV0Q2FsZW5kYXJgLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIGZ1bmN0aW9uYWxpdHkgaXQgcHJvdmlkZXM6XG4gKlxuICogKiAqKkNyZWF0aW9uKio6IFRvIGNyZWF0ZSBhIERhdGVUaW1lIGZyb20gaXRzIGNvbXBvbmVudHMsIHVzZSBvbmUgb2YgaXRzIGZhY3RvcnkgY2xhc3MgbWV0aG9kczoge0BsaW5rIERhdGVUaW1lLmxvY2FsfSwge0BsaW5rIERhdGVUaW1lLnV0Y30sIGFuZCAobW9zdCBmbGV4aWJseSkge0BsaW5rIERhdGVUaW1lLmZyb21PYmplY3R9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBzdGFuZGFyZCBzdHJpbmcgZm9ybWF0LCB1c2Uge0BsaW5rIERhdGVUaW1lLmZyb21JU099LCB7QGxpbmsgRGF0ZVRpbWUuZnJvbUhUVFB9LCBhbmQge0BsaW5rIERhdGVUaW1lLmZyb21SRkMyODIyfS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgY3VzdG9tIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUZvcm1hdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIG5hdGl2ZSBKUyBkYXRlLCB1c2Uge0BsaW5rIERhdGVUaW1lLmZyb21KU0RhdGV9LlxuICogKiAqKkdyZWdvcmlhbiBjYWxlbmRhciBhbmQgdGltZSoqOiBUbyBleGFtaW5lIHRoZSBHcmVnb3JpYW4gcHJvcGVydGllcyBvZiBhIERhdGVUaW1lIGluZGl2aWR1YWxseSAoaS5lIGFzIG9wcG9zZWQgdG8gY29sbGVjdGl2ZWx5IHRocm91Z2gge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSksIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbW9udGh9LFxuICoge0BsaW5rIERhdGVUaW1lI2RheX0sIHtAbGluayBEYXRlVGltZSNob3VyfSwge0BsaW5rIERhdGVUaW1lI21pbnV0ZX0sIHtAbGluayBEYXRlVGltZSNzZWNvbmR9LCB7QGxpbmsgRGF0ZVRpbWUjbWlsbGlzZWNvbmR9IGFjY2Vzc29ycy5cbiAqICogKipXZWVrIGNhbGVuZGFyKio6IEZvciBJU08gd2VlayBjYWxlbmRhciBhdHRyaWJ1dGVzLCBzZWUgdGhlIHtAbGluayBEYXRlVGltZSN3ZWVrWWVhcn0sIHtAbGluayBEYXRlVGltZSN3ZWVrTnVtYmVyfSwgYW5kIHtAbGluayBEYXRlVGltZSN3ZWVrZGF5fSBhY2Nlc3NvcnMuXG4gKiAqICoqQ29uZmlndXJhdGlvbioqIFNlZSB0aGUge0BsaW5rIERhdGVUaW1lI2xvY2FsZX0gYW5kIHtAbGluayBEYXRlVGltZSNudW1iZXJpbmdTeXN0ZW19IGFjY2Vzc29ycy5cbiAqICogKipUcmFuc2Zvcm1hdGlvbioqOiBUbyB0cmFuc2Zvcm0gdGhlIERhdGVUaW1lIGludG8gb3RoZXIgRGF0ZVRpbWVzLCB1c2Uge0BsaW5rIERhdGVUaW1lI3NldH0sIHtAbGluayBEYXRlVGltZSNyZWNvbmZpZ3VyZX0sIHtAbGluayBEYXRlVGltZSNzZXRab25lfSwge0BsaW5rIERhdGVUaW1lI3NldExvY2FsZX0sIHtAbGluayBEYXRlVGltZS5wbHVzfSwge0BsaW5rIERhdGVUaW1lI21pbnVzfSwge0BsaW5rIERhdGVUaW1lI2VuZE9mfSwge0BsaW5rIERhdGVUaW1lI3N0YXJ0T2Z9LCB7QGxpbmsgRGF0ZVRpbWUjdG9VVEN9LCBhbmQge0BsaW5rIERhdGVUaW1lI3RvTG9jYWx9LlxuICogKiAqKk91dHB1dCoqOiBUbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHVzZSB0aGUge0BsaW5rIERhdGVUaW1lI3RvUmVsYXRpdmV9LCB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZUNhbGVuZGFyfSwge0BsaW5rIERhdGVUaW1lI3RvSlNPTn0sIHtAbGluayBEYXRlVGltZSN0b0lTT30sIHtAbGluayBEYXRlVGltZSN0b0hUVFB9LCB7QGxpbmsgRGF0ZVRpbWUjdG9PYmplY3R9LCB7QGxpbmsgRGF0ZVRpbWUjdG9SRkMyODIyfSwge0BsaW5rIERhdGVUaW1lI3RvU3RyaW5nfSwge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSwge0BsaW5rIERhdGVUaW1lI3RvRm9ybWF0fSwge0BsaW5rIERhdGVUaW1lI3RvTWlsbGlzfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvSlNEYXRlfS5cbiAqXG4gKiBUaGVyZSdzIHBsZW50eSBvdGhlcnMgZG9jdW1lbnRlZCBiZWxvdy4gSW4gYWRkaXRpb24sIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN1YnRsZXIgdG9waWNzIGxpa2UgaW50ZXJuYXRpb25hbGl6YXRpb24sIHRpbWUgem9uZXMsIGFsdGVybmF0aXZlIGNhbGVuZGFycywgdmFsaWRpdHksIGFuZCBzbyBvbiwgc2VlIHRoZSBleHRlcm5hbCBkb2N1bWVudGF0aW9uLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYXRlVGltZSB7XG4gIC8qKlxuICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbnN0IHpvbmUgPSBjb25maWcuem9uZSB8fCBTZXR0aW5ncy5kZWZhdWx0Wm9uZTtcblxuICAgIGxldCBpbnZhbGlkID1cbiAgICAgIGNvbmZpZy5pbnZhbGlkIHx8XG4gICAgICAoTnVtYmVyLmlzTmFOKGNvbmZpZy50cykgPyBuZXcgSW52YWxpZChcImludmFsaWQgaW5wdXRcIikgOiBudWxsKSB8fFxuICAgICAgKCF6b25lLmlzVmFsaWQgPyB1bnN1cHBvcnRlZFpvbmUoem9uZSkgOiBudWxsKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRzID0gaXNVbmRlZmluZWQoY29uZmlnLnRzKSA/IFNldHRpbmdzLm5vdygpIDogY29uZmlnLnRzO1xuXG4gICAgbGV0IGMgPSBudWxsLFxuICAgICAgbyA9IG51bGw7XG4gICAgaWYgKCFpbnZhbGlkKSB7XG4gICAgICBjb25zdCB1bmNoYW5nZWQgPSBjb25maWcub2xkICYmIGNvbmZpZy5vbGQudHMgPT09IHRoaXMudHMgJiYgY29uZmlnLm9sZC56b25lLmVxdWFscyh6b25lKTtcblxuICAgICAgaWYgKHVuY2hhbmdlZCkge1xuICAgICAgICBbYywgb10gPSBbY29uZmlnLm9sZC5jLCBjb25maWcub2xkLm9dO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgb3QgPSB6b25lLm9mZnNldCh0aGlzLnRzKTtcbiAgICAgICAgYyA9IHRzVG9PYmoodGhpcy50cywgb3QpO1xuICAgICAgICBpbnZhbGlkID0gTnVtYmVyLmlzTmFOKGMueWVhcikgPyBuZXcgSW52YWxpZChcImludmFsaWQgaW5wdXRcIikgOiBudWxsO1xuICAgICAgICBjID0gaW52YWxpZCA/IG51bGwgOiBjO1xuICAgICAgICBvID0gaW52YWxpZCA/IG51bGwgOiBvdDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl96b25lID0gem9uZTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxvYyA9IGNvbmZpZy5sb2MgfHwgTG9jYWxlLmNyZWF0ZSgpO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaW52YWxpZCA9IGludmFsaWQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy53ZWVrRGF0YSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sb2NhbFdlZWtEYXRhID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmMgPSBjO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubyA9IG87XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pc0x1eG9uRGF0ZVRpbWUgPSB0cnVlO1xuICB9XG5cbiAgLy8gQ09OU1RSVUNUXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZvciB0aGUgY3VycmVudCBpbnN0YW50LCBpbiB0aGUgc3lzdGVtJ3MgdGltZSB6b25lLlxuICAgKlxuICAgKiBVc2UgU2V0dGluZ3MgdG8gb3ZlcnJpZGUgdGhlc2UgZGVmYXVsdCB2YWx1ZXMgaWYgbmVlZGVkLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTygpIC8vfj4gbm93IGluIHRoZSBJU08gZm9ybWF0XG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIG5vdygpIHtcbiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBsb2NhbCBEYXRlVGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGBsb2NhbCgpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RheT0xXSAtIFRoZSBkYXkgb2YgdGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWludXRlPTBdIC0gVGhlIG1pbnV0ZSBvZiB0aGUgaG91ciwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc2Vjb25kPTBdIC0gVGhlIHNlY29uZCBvZiB0aGUgbWludXRlLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3dcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoeyB6b25lOiBcIkFtZXJpY2EvTmV3X1lvcmtcIiB9KSAgICAgIC8vfj4gbm93LCBpbiBVUyBlYXN0IGNvYXN0IHRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDEtMDFUMDA6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMDFUMDA6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIHsgbG9jYWxlOiBcImZyXCIgfSkgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMCwgd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUpICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIHsgem9uZTogXCJ1dGNcIiB9KSAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMCwgaW4gVVRDXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSkgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTAsIDc2NSkgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwLjc2NVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBsb2NhbCgpIHtcbiAgICBjb25zdCBbb3B0cywgYXJnc10gPSBsYXN0T3B0cyhhcmd1bWVudHMpLFxuICAgICAgW3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF0gPSBhcmdzO1xuICAgIHJldHVybiBxdWlja0RUKHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0sIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGluIFVUQ1xuICAgKiBAcGFyYW0ge251bWJlcn0gW3llYXJdIC0gVGhlIGNhbGVuZGFyIHllYXIuIElmIG9taXR0ZWQgKGFzIGluLCBjYWxsIGB1dGMoKWAgd2l0aCBubyBhcmd1bWVudHMpLCB0aGUgY3VycmVudCB0aW1lIHdpbGwgYmUgdXNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2hvdXI9MF0gLSBUaGUgaG91ciBvZiB0aGUgZGF5LCBpbiAyNC1ob3VyIHRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaW51dGU9MF0gLSBUaGUgbWludXRlIG9mIHRoZSBob3VyLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbGxpc2Vjb25kPTBdIC0gVGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5vdXRwdXRDYWxlbmRhcl0gLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiBub3dcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMDFUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIHsgbG9jYWxlOiBcImZyXCIgfSkgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwWiB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCkgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUsIHsgbG9jYWxlOiBcImZyXCIgfSkgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwLjc2NVogd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgdXRjKCkge1xuICAgIGNvbnN0IFtvcHRzLCBhcmdzXSA9IGxhc3RPcHRzKGFyZ3VtZW50cyksXG4gICAgICBbeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kXSA9IGFyZ3M7XG5cbiAgICBvcHRzLnpvbmUgPSBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7XG4gICAgcmV0dXJuIHF1aWNrRFQoeyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmQgfSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3QuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtEYXRlfSBkYXRlIC0gYSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21KU0RhdGUoZGF0ZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdHMgPSBpc0RhdGUoZGF0ZSkgPyBkYXRlLnZhbHVlT2YoKSA6IE5hTjtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKHRzKSkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHpvbmVUb1VzZSA9IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmVUb1VzZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgdHM6IHRzLFxuICAgICAgem9uZTogem9uZVRvVXNlLFxuICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2ggKG1lYW5pbmcgc2luY2UgMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWlsbGlzZWNvbmRzIC0gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAgVVRDXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21NaWxsaXMobWlsbGlzZWNvbmRzLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIWlzTnVtYmVyKG1pbGxpc2Vjb25kcykpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgYGZyb21NaWxsaXMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXQsIGJ1dCByZWNlaXZlZCBhICR7dHlwZW9mIG1pbGxpc2Vjb25kc30gd2l0aCB2YWx1ZSAke21pbGxpc2Vjb25kc31gXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAobWlsbGlzZWNvbmRzIDwgLU1BWF9EQVRFIHx8IG1pbGxpc2Vjb25kcyA+IE1BWF9EQVRFKSB7XG4gICAgICAvLyB0aGlzIGlzbid0IHBlcmZlY3QgYmVjYXVzZSBiZWNhdXNlIHdlIGNhbiBzdGlsbCBlbmQgdXAgb3V0IG9mIHJhbmdlIGJlY2F1c2Ugb2YgYWRkaXRpb25hbCBzaGlmdGluZywgYnV0IGl0J3MgYSBzdGFydFxuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXCJUaW1lc3RhbXAgb3V0IG9mIHJhbmdlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgdHM6IG1pbGxpc2Vjb25kcyxcbiAgICAgICAgem9uZTogbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlY29uZHMgLSBhIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIDE5NzAgVVRDXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdGlvbnMuem9uZT0nbG9jYWwnXSAtIHRoZSB6b25lIHRvIHBsYWNlIHRoZSBEYXRlVGltZSBpbnRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21TZWNvbmRzKHNlY29uZHMsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghaXNOdW1iZXIoc2Vjb25kcykpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21TZWNvbmRzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0XCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgdHM6IHNlY29uZHMgKiAxMDAwLFxuICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcicgYW5kICdob3VyJyB3aXRoIHJlYXNvbmFibGUgZGVmYXVsdHMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXIgLSBhIHllYXIsIHN1Y2ggYXMgMTk4N1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1vbnRoIC0gYSBtb250aCwgMS0xMlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheSAtIGEgZGF5IG9mIHRoZSBtb250aCwgMS0zMSwgZGVwZW5kaW5nIG9uIHRoZSBtb250aFxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm9yZGluYWwgLSBkYXkgb2YgdGhlIHllYXIsIDEtMzY1IG9yIDM2NlxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtZZWFyIC0gYW4gSVNPIHdlZWsgeWVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtOdW1iZXIgLSBhbiBJU08gd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLndlZWtkYXkgLSBhbiBJU08gd2Vla2RheSwgMS03LCB3aGVyZSAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5sb2NhbFdlZWtZZWFyIC0gYSB3ZWVrIHllYXIsIGFjY29yZGluZyB0byB0aGUgbG9jYWxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubG9jYWxXZWVrTnVtYmVyIC0gYSB3ZWVrIG51bWJlciwgYmV0d2VlbiAxIGFuZCA1MiBvciA1MywgZGVwZW5kaW5nIG9uIHRoZSB5ZWFyLCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmxvY2FsV2Vla2RheSAtIGEgd2Vla2RheSwgMS03LCB3aGVyZSAxIGlzIHRoZSBmaXJzdCBhbmQgNyBpcyB0aGUgbGFzdCBkYXkgb2YgdGhlIHdlZWssIGFjY29yZGluZyB0byB0aGUgbG9jYWxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouaG91ciAtIGhvdXIgb2YgdGhlIGRheSwgMC0yM1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZSAtIG1pbnV0ZSBvZiB0aGUgaG91ciwgMC01OVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnNlY29uZCAtIHNlY29uZCBvZiB0aGUgbWludXRlLCAwLTU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmQgLSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCAwLTk5OVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIGNyZWF0aW5nIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGludGVycHJldCB0aGUgbnVtYmVycyBpbiB0aGUgY29udGV4dCBvZiBhIHBhcnRpY3VsYXIgem9uZS4gQ2FuIHRha2UgYW55IHZhbHVlIHRha2VuIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byBzZXRab25lKClcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtXFwncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiwgbW9udGg6IDUsIGRheTogMjV9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgeWVhcjogMTk4MiB9KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9KSAvL34+IHRvZGF5IGF0IDEwOjI2OjA2XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ3V0YycgfSksXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ2xvY2FsJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICdBbWVyaWNhL05ld19Zb3JrJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgd2Vla1llYXI6IDIwMTYsIHdlZWtOdW1iZXI6IDIsIHdlZWtkYXk6IDMgfSkudG9JU09EYXRlKCkgLy89PiAnMjAxNi0wMS0xMydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGxvY2FsV2Vla1llYXI6IDIwMjIsIGxvY2FsV2Vla051bWJlcjogMSwgbG9jYWxXZWVrZGF5OiAxIH0sIHsgbG9jYWxlOiBcImVuLVVTXCIgfSkudG9JU09EYXRlKCkgLy89PiAnMjAyMS0xMi0yNidcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbU9iamVjdChvYmosIG9wdHMgPSB7fSkge1xuICAgIG9iaiA9IG9iaiB8fCB7fTtcbiAgICBjb25zdCB6b25lVG9Vc2UgPSBub3JtYWxpemVab25lKG9wdHMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICAgIGlmICghem9uZVRvVXNlLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTtcbiAgICB9XG5cbiAgICBjb25zdCBsb2MgPSBMb2NhbGUuZnJvbU9iamVjdChvcHRzKTtcbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplVW5pdFdpdGhMb2NhbFdlZWtzKTtcbiAgICBjb25zdCB7IG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWsgfSA9IHVzZXNMb2NhbFdlZWtWYWx1ZXMobm9ybWFsaXplZCwgbG9jKTtcblxuICAgIGNvbnN0IHRzTm93ID0gU2V0dGluZ3Mubm93KCksXG4gICAgICBvZmZzZXRQcm92aXMgPSAhaXNVbmRlZmluZWQob3B0cy5zcGVjaWZpY09mZnNldClcbiAgICAgICAgPyBvcHRzLnNwZWNpZmljT2Zmc2V0XG4gICAgICAgIDogem9uZVRvVXNlLm9mZnNldCh0c05vdyksXG4gICAgICBjb250YWluc09yZGluYWwgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yWWVhciA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLnllYXIpLFxuICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLFxuICAgICAgY29udGFpbnNHcmVnb3IgPSBjb250YWluc0dyZWdvclllYXIgfHwgY29udGFpbnNHcmVnb3JNRCxcbiAgICAgIGRlZmluaXRlV2Vla0RlZiA9IG5vcm1hbGl6ZWQud2Vla1llYXIgfHwgbm9ybWFsaXplZC53ZWVrTnVtYmVyO1xuXG4gICAgLy8gY2FzZXM6XG4gICAgLy8ganVzdCBhIHdlZWtkYXkgLT4gdGhpcyB3ZWVrJ3MgaW5zdGFuY2Ugb2YgdGhhdCB3ZWVrZGF5LCBubyB3b3JyaWVzXG4gICAgLy8gKGdyZWdvcmlhbiBkYXRhIG9yIG9yZGluYWwpICsgKHdlZWtZZWFyIG9yIHdlZWtOdW1iZXIpIC0+IGVycm9yXG4gICAgLy8gKGdyZWdvcmlhbiBtb250aCBvciBkYXkpICsgb3JkaW5hbCAtPiBlcnJvclxuICAgIC8vIG90aGVyd2lzZSBqdXN0IHVzZSB3ZWVrcyBvciBvcmRpbmFscyBvciBncmVnb3JpYW4sIGRlcGVuZGluZyBvbiB3aGF0J3Mgc3BlY2lmaWVkXG5cbiAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChjb250YWluc0dyZWdvck1EICYmIGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXlcIik7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlV2Vla0RhdGEgPSBkZWZpbml0ZVdlZWtEZWYgfHwgKG5vcm1hbGl6ZWQud2Vla2RheSAmJiAhY29udGFpbnNHcmVnb3IpO1xuXG4gICAgLy8gY29uZmlndXJlIG91cnNlbHZlcyB0byBkZWFsIHdpdGggZ3JlZ29yaWFuIGRhdGVzIG9yIHdlZWsgc3R1ZmZcbiAgICBsZXQgdW5pdHMsXG4gICAgICBkZWZhdWx0VmFsdWVzLFxuICAgICAgb2JqTm93ID0gdHNUb09iaih0c05vdywgb2Zmc2V0UHJvdmlzKTtcbiAgICBpZiAodXNlV2Vla0RhdGEpIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZFdlZWtVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0V2Vla1VuaXRWYWx1ZXM7XG4gICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub1dlZWsob2JqTm93LCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkT3JkaW5hbFVuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlcztcbiAgICAgIG9iak5vdyA9IGdyZWdvcmlhblRvT3JkaW5hbChvYmpOb3cpO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0VW5pdFZhbHVlcztcbiAgICB9XG5cbiAgICAvLyBzZXQgZGVmYXVsdCB2YWx1ZXMgZm9yIG1pc3Npbmcgc3R1ZmZcbiAgICBsZXQgZm91bmRGaXJzdCA9IGZhbHNlO1xuICAgIGZvciAoY29uc3QgdSBvZiB1bml0cykge1xuICAgICAgY29uc3QgdiA9IG5vcm1hbGl6ZWRbdV07XG4gICAgICBpZiAoIWlzVW5kZWZpbmVkKHYpKSB7XG4gICAgICAgIGZvdW5kRmlyc3QgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChmb3VuZEZpcnN0KSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBkZWZhdWx0VmFsdWVzW3VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9ybWFsaXplZFt1XSA9IG9iak5vd1t1XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBtYWtlIHN1cmUgdGhlIHZhbHVlcyB3ZSBoYXZlIGFyZSBpbiByYW5nZVxuICAgIGNvbnN0IGhpZ2hlck9yZGVySW52YWxpZCA9IHVzZVdlZWtEYXRhXG4gICAgICAgID8gaGFzSW52YWxpZFdlZWtEYXRhKG5vcm1hbGl6ZWQsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspXG4gICAgICAgIDogY29udGFpbnNPcmRpbmFsXG4gICAgICAgID8gaGFzSW52YWxpZE9yZGluYWxEYXRhKG5vcm1hbGl6ZWQpXG4gICAgICAgIDogaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEobm9ybWFsaXplZCksXG4gICAgICBpbnZhbGlkID0gaGlnaGVyT3JkZXJJbnZhbGlkIHx8IGhhc0ludmFsaWRUaW1lRGF0YShub3JtYWxpemVkKTtcblxuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9XG5cbiAgICAvLyBjb21wdXRlIHRoZSBhY3R1YWwgdGltZVxuICAgIGNvbnN0IGdyZWdvcmlhbiA9IHVzZVdlZWtEYXRhXG4gICAgICAgID8gd2Vla1RvR3JlZ29yaWFuKG5vcm1hbGl6ZWQsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspXG4gICAgICAgIDogY29udGFpbnNPcmRpbmFsXG4gICAgICAgID8gb3JkaW5hbFRvR3JlZ29yaWFuKG5vcm1hbGl6ZWQpXG4gICAgICAgIDogbm9ybWFsaXplZCxcbiAgICAgIFt0c0ZpbmFsLCBvZmZzZXRGaW5hbF0gPSBvYmpUb1RTKGdyZWdvcmlhbiwgb2Zmc2V0UHJvdmlzLCB6b25lVG9Vc2UpLFxuICAgICAgaW5zdCA9IG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiB0c0ZpbmFsLFxuICAgICAgICB6b25lOiB6b25lVG9Vc2UsXG4gICAgICAgIG86IG9mZnNldEZpbmFsLFxuICAgICAgICBsb2MsXG4gICAgICB9KTtcblxuICAgIC8vIGdyZWdvcmlhbiBkYXRhICsgd2Vla2RheSBzZXJ2ZXMgb25seSB0byB2YWxpZGF0ZVxuICAgIGlmIChub3JtYWxpemVkLndlZWtkYXkgJiYgY29udGFpbnNHcmVnb3IgJiYgb2JqLndlZWtkYXkgIT09IGluc3Qud2Vla2RheSkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXG4gICAgICAgIFwibWlzbWF0Y2hlZCB3ZWVrZGF5XCIsXG4gICAgICAgIGB5b3UgY2FuJ3Qgc3BlY2lmeSBib3RoIGEgd2Vla2RheSBvZiAke25vcm1hbGl6ZWQud2Vla2RheX0gYW5kIGEgZGF0ZSBvZiAke2luc3QudG9JU08oKX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBpbnN0O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIElTTyBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMycpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMrMDY6MDAnLCB7c2V0Wm9uZTogdHJ1ZX0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJywge3pvbmU6ICd1dGMnfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi1XMDUtNCcpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VJU09EYXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiSVNPIDg2MDFcIiwgdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBSRkMgMjgyMiBzdHJpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgUkZDIDI4MjIgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZS4gU2luY2UgdGhlIG9mZnNldCBpcyBhbHdheXMgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gdGhlIGludGVycHJldGF0aW9uIG9mIHN0cmluZywgbWVyZWx5IHRoZSB6b25lIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaXMgZXhwcmVzc2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjM6MTIgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJ0ZyaSwgMjUgTm92IDIwMTYgMTM6MjM6MTIgKzA2MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignMjUgTm92IDIwMTYgMTM6MjMgWicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21SRkMyODIyKHRleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlUkZDMjgyMkRhdGUodGV4dCk7XG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJSRkMgMjgyMlwiLCB0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIEhUVFAgaGVhZGVyIGRhdGVcbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjFcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSFRUUCBoZWFkZXIgZGF0ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIEhUVFAgZGF0ZXMgYXJlIGFsd2F5cyBpbiBVVEMsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIHRoZSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZy4gRm9yIEhUVFAgZGF0ZXMsIHRoaXMgaXMgYWx3YXlzIFVUQywgc28gdGhpcyBvcHRpb24gaXMgZXF1aXZhbGVudCB0byBzZXR0aW5nIHRoZSBgem9uZWAgb3B0aW9uIHRvICd1dGMnLCBidXQgdGhpcyBvcHRpb24gaXMgaW5jbHVkZWQgZm9yIGNvbnNpc3RlbmN5IHdpdGggc2ltaWxhciBtZXRob2RzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuLCAwNiBOb3YgMTk5NCAwODo0OTozNyBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuZGF5LCAwNi1Ob3YtOTQgMDg6NDk6MzcgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1biBOb3YgIDYgMDg6NDk6MzcgMTk5NCcpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21IVFRQKHRleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlSFRUUERhdGUodGV4dCk7XG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJIVFRQXCIsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gaW5wdXQgc3RyaW5nIGFuZCBmb3JtYXQgc3RyaW5nLlxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGUuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL3BhcnNpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSB0aGUgbGluayBiZWxvdyBmb3IgdGhlIGZvcm1hdHMpXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIHJlc3VsdGluZyBEYXRlVGltZSB0byB0aGlzIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzID0ge30pIHtcbiAgICBpZiAoaXNVbmRlZmluZWQodGV4dCkgfHwgaXNVbmRlZmluZWQoZm10KSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiZnJvbUZvcm1hdCByZXF1aXJlcyBhbiBpbnB1dCBzdHJpbmcgYW5kIGEgZm9ybWF0XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCB9ID0gb3B0cyxcbiAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGRlZmF1bHRUb0VOOiB0cnVlLFxuICAgICAgfSksXG4gICAgICBbdmFscywgcGFyc2VkWm9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRdID0gcGFyc2VGcm9tVG9rZW5zKGxvY2FsZVRvVXNlLCB0ZXh0LCBmbXQpO1xuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgYGZvcm1hdCAke2ZtdH1gLCB0ZXh0LCBzcGVjaWZpY09mZnNldCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0IGluc3RlYWRcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nKHRleHQsIGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21Gb3JtYXQodGV4dCwgZm10LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgU1FMIGRhdGUsIHRpbWUsIG9yIGRhdGV0aW1lXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSBhIGxvY2FsZSBzdHJpbmcgdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNScpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyKzA2OjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIgQW1lcmljYS9Mb3NfQW5nZWxlcycpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnLCB7IHNldFpvbmU6IHRydWUgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDInLCB7IHpvbmU6ICdBbWVyaWNhL0xvc19BbmdlbGVzJyB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcwOToxMjozNC4zNDInKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tU1FMKHRleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlU1FMKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiU1FMXCIsIHRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBEYXRlVGltZSBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbiA9IG51bGwpIHtcbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEYXRlVGltZSBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkRGF0ZVRpbWVFcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7IGludmFsaWQgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlVGltZS4gV29ya3MgYWNyb3NzIGNvbnRleHQgYm91bmRhcmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gb1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzRGF0ZVRpbWUobykge1xuICAgIHJldHVybiAobyAmJiBvLmlzTHV4b25EYXRlVGltZSkgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgZm9ybWF0IHN0cmluZyBmb3IgYSBzZXQgb2Ygb3B0aW9uc1xuICAgKiBAcGFyYW0gZm9ybWF0T3B0c1xuICAgKiBAcGFyYW0gbG9jYWxlT3B0c1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHBhcnNlRm9ybWF0Rm9yT3B0cyhmb3JtYXRPcHRzLCBsb2NhbGVPcHRzID0ge30pIHtcbiAgICBjb25zdCB0b2tlbkxpc3QgPSBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpO1xuICAgIHJldHVybiAhdG9rZW5MaXN0ID8gbnVsbCA6IHRva2VuTGlzdC5tYXAoKHQpID0+ICh0ID8gdC52YWwgOiBudWxsKSkuam9pbihcIlwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9kdWNlIHRoZSB0aGUgZnVsbHkgZXhwYW5kZWQgZm9ybWF0IHRva2VuIGZvciB0aGUgbG9jYWxlXG4gICAqIERvZXMgTk9UIHF1b3RlIGNoYXJhY3RlcnMsIHNvIHF1b3RlZCB0b2tlbnMgd2lsbCBub3Qgcm91bmQgdHJpcCBjb3JyZWN0bHlcbiAgICogQHBhcmFtIGZtdFxuICAgKiBAcGFyYW0gbG9jYWxlT3B0c1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGV4cGFuZEZvcm1hdChmbXQsIGxvY2FsZU9wdHMgPSB7fSkge1xuICAgIGNvbnN0IGV4cGFuZGVkID0gZXhwYW5kTWFjcm9Ub2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksIExvY2FsZS5mcm9tT2JqZWN0KGxvY2FsZU9wdHMpKTtcbiAgICByZXR1cm4gZXhwYW5kZWQubWFwKCh0KSA9PiB0LnZhbCkuam9pbihcIlwiKTtcbiAgfVxuXG4gIC8vIElORk9cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGUnIG9yICdkYXknXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnbW9udGgnKTsgLy89PiA3XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDcsIDQpLmdldCgnZGF5Jyk7IC8vPT4gNFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQodW5pdCkge1xuICAgIHJldHVybiB0aGlzW3VuaXRdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgdmFsaWQuIEludmFsaWQgRGF0ZVRpbWVzIG9jY3VyIHdoZW46XG4gICAqICogVGhlIERhdGVUaW1lIHdhcyBjcmVhdGVkIGZyb20gaW52YWxpZCBjYWxlbmRhciBpbmZvcm1hdGlvbiwgc3VjaCBhcyB0aGUgMTN0aCBtb250aCBvciBGZWJydWFyeSAzMFxuICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBieSBhbiBvcGVyYXRpb24gb24gYW5vdGhlciBpbnZhbGlkIGRhdGVcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID09PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIERhdGVUaW1lIGlzIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZFJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBEYXRlVGltZSBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkRXhwbGFuYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsb2NhbGUgb2YgYSBEYXRlVGltZSwgc3VjaCAnZW4tR0InLiBUaGUgbG9jYWxlIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGxvY2FsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubG9jYWxlIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEYXRlVGltZSwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG51bWJlcmluZ1N5c3RlbSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG91dHB1dCBjYWxlbmRhciBvZiBhIERhdGVUaW1lLCBzdWNoICdpc2xhbWljJy4gVGhlIG91dHB1dCBjYWxlbmRhciBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBvdXRwdXRDYWxlbmRhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdGltZSB6b25lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIERhdGVUaW1lLlxuICAgKiBAdHlwZSB7Wm9uZX1cbiAgICovXG4gIGdldCB6b25lKCkge1xuICAgIHJldHVybiB0aGlzLl96b25lO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbmFtZSBvZiB0aGUgdGltZSB6b25lLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHpvbmVOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUubmFtZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB5ZWFyXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS55ZWFyIC8vPT4gMjAxN1xuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy55ZWFyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcXVhcnRlclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucXVhcnRlciAvLz0+IDJcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBxdWFydGVyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBNYXRoLmNlaWwodGhpcy5jLm1vbnRoIC8gMykgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtb250aCAoMS0xMikuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5tb250aCAvLz0+IDVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtb250aCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1vbnRoIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IG9mIHRoZSBtb250aCAoMS0zMGlzaCkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5kYXkgLy89PiAyNVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRheSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLmRheSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGhvdXIgb2YgdGhlIGRheSAoMC0yMykuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5KS5ob3VyIC8vPT4gOVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGhvdXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5ob3VyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWludXRlIG9mIHRoZSBob3VyICgwLTU5KS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwKS5taW51dGUgLy89PiAzMFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbnV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbnV0ZSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNlY29uZCBvZiB0aGUgbWludXRlICgwLTU5KS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1Mikuc2Vjb25kIC8vPT4gNTJcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBzZWNvbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5zZWNvbmQgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kICgwLTk5OSkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCwgNTIsIDY1NCkubWlsbGlzZWNvbmQgLy89PiA2NTRcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtaWxsaXNlY29uZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLm1pbGxpc2Vjb25kIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayB5ZWFyXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMiwgMzEpLndlZWtZZWFyIC8vPT4gMjAxNVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtZZWFyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHdlZWsgeWVhciAoMS01MmlzaCkuXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkud2Vla051bWJlciAvLz0+IDIxXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla051bWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrLlxuICAgKiAxIGlzIE1vbmRheSBhbmQgNyBpcyBTdW5kYXlcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDExLCAzMSkud2Vla2RheSAvLz0+IDRcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrZGF5KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtkYXkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZGF0ZSBpcyBvbiBhIHdlZWtlbmQgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUsIGZhbHNlIG90aGVyd2lzZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1dlZWtlbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCAmJiB0aGlzLmxvYy5nZXRXZWVrZW5kRGF5cygpLmluY2x1ZGVzKHRoaXMud2Vla2RheSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkYXkgb2YgdGhlIHdlZWsgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUuXG4gICAqIDEgaXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayBhbmQgNyBpcyB0aGUgbGFzdCBkYXkgb2YgdGhlIHdlZWsuXG4gICAqIElmIHRoZSBsb2NhbGUgYXNzaWducyBTdW5kYXkgYXMgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlaywgdGhlbiBhIGRhdGUgd2hpY2ggaXMgYSBTdW5kYXkgd2lsbCByZXR1cm4gMSxcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCBsb2NhbFdlZWtkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkTG9jYWxXZWVrRGF0YSh0aGlzKS53ZWVrZGF5IDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayBudW1iZXIgb2YgdGhlIHdlZWsgeWVhciBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZS4gRGlmZmVyZW50IGxvY2FsZXMgYXNzaWduIHdlZWsgbnVtYmVycyBkaWZmZXJlbnRseSxcbiAgICogYmVjYXVzZSB0aGUgd2VlayBjYW4gc3RhcnQgb24gZGlmZmVyZW50IGRheXMgb2YgdGhlIHdlZWsgKHNlZSBsb2NhbFdlZWtkYXkpIGFuZCBiZWNhdXNlIGEgZGlmZmVyZW50IG51bWJlciBvZiBkYXlzXG4gICAqIGlzIHJlcXVpcmVkIGZvciBhIHdlZWsgdG8gY291bnQgYXMgdGhlIGZpcnN0IHdlZWsgb2YgYSB5ZWFyLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGxvY2FsV2Vla051bWJlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRMb2NhbFdlZWtEYXRhKHRoaXMpLndlZWtOdW1iZXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrIHllYXIgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUuIERpZmZlcmVudCBsb2NhbGVzIGFzc2lnbiB3ZWVrIG51bWJlcnMgKGFuZCB0aGVyZWZvciB3ZWVrIHllYXJzKVxuICAgKiBkaWZmZXJlbnRseSwgc2VlIGxvY2FsV2Vla051bWJlci5cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCBsb2NhbFdlZWtZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEodGhpcykud2Vla1llYXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBvcmRpbmFsIChtZWFuaW5nIHRoZSBkYXkgb2YgdGhlIHllYXIpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5vcmRpbmFsIC8vPT4gMTQ1XG4gICAqIEB0eXBlIHtudW1iZXJ8RGF0ZVRpbWV9XG4gICAqL1xuICBnZXQgb3JkaW5hbCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYykub3JkaW5hbCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdCcuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLm1vbnRoU2hvcnQgLy89PiBPY3RcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBtb250aFNob3J0KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocyhcInNob3J0XCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLm1vbnRoIC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyBtb250aCBuYW1lLCBzdWNoIGFzICdPY3RvYmVyJy5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkubW9udGhMb25nIC8vPT4gT2N0b2JlclxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG1vbnRoTG9uZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby5tb250aHMoXCJsb25nXCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLm1vbnRoIC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgd2Vla2RheSwgc3VjaCBhcyAnTW9uJy5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkud2Vla2RheVNob3J0IC8vPT4gTW9uXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgd2Vla2RheVNob3J0KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwic2hvcnRcIiwgeyBsb2NPYmo6IHRoaXMubG9jIH0pW3RoaXMud2Vla2RheSAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgd2Vla2RheSwgc3VjaCBhcyAnTW9uZGF5Jy5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkud2Vla2RheUxvbmcgLy89PiBNb25kYXlcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCB3ZWVrZGF5TG9uZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cyhcImxvbmdcIiwgeyBsb2NPYmo6IHRoaXMubG9jIH0pW3RoaXMud2Vla2RheSAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIFVUQyBvZmZzZXQgb2YgdGhpcyBEYXRlVGltZSBpbiBtaW51dGVzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm9mZnNldCAvLz0+IC0yNDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkub2Zmc2V0IC8vPT4gMFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gK3RoaXMubyA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNob3J0IGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlIFwiRVNUXCIgb3IgXCJFRFRcIi5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgb2Zmc2V0TmFtZVNob3J0KCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLCB7XG4gICAgICAgIGZvcm1hdDogXCJzaG9ydFwiLFxuICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxvbmcgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgXCJFYXN0ZXJuIFN0YW5kYXJkIFRpbWVcIiBvciBcIkVhc3Rlcm4gRGF5bGlnaHQgVGltZVwiLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBvZmZzZXROYW1lTG9uZygpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywge1xuICAgICAgICBmb3JtYXQ6IFwibG9uZ1wiLFxuICAgICAgICBsb2NhbGU6IHRoaXMubG9jYWxlLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciB0aGlzIHpvbmUncyBvZmZzZXQgZXZlciBjaGFuZ2VzLCBhcyBpbiBhIERTVC5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNPZmZzZXRGaXhlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy56b25lLmlzVW5pdmVyc2FsIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciB0aGUgRGF0ZVRpbWUgaXMgaW4gYSBEU1QuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzSW5EU1QoKSB7XG4gICAgaWYgKHRoaXMuaXNPZmZzZXRGaXhlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLm9mZnNldCA+IHRoaXMuc2V0KHsgbW9udGg6IDEsIGRheTogMSB9KS5vZmZzZXQgfHxcbiAgICAgICAgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7IG1vbnRoOiA1IH0pLm9mZnNldFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRob3NlIERhdGVUaW1lcyB3aGljaCBoYXZlIHRoZSBzYW1lIGxvY2FsIHRpbWUgYXMgdGhpcyBEYXRlVGltZSwgYnV0IGEgZGlmZmVyZW50IG9mZnNldCBmcm9tIFVUQ1xuICAgKiBpbiB0aGlzIERhdGVUaW1lJ3Mgem9uZS4gRHVyaW5nIERTVCBjaGFuZ2VzIGxvY2FsIHRpbWUgY2FuIGJlIGFtYmlndW91cywgZm9yIGV4YW1wbGVcbiAgICogYDIwMjMtMTAtMjlUMDI6MzA6MDBgIGluIGBFdXJvcGUvQmVybGluYCBjYW4gaGF2ZSBvZmZzZXQgYCswMTowMGAgb3IgYCswMjowMGAuXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGJvdGggcG9zc2libGUgRGF0ZVRpbWVzIGlmIHRoaXMgRGF0ZVRpbWUncyBsb2NhbCB0aW1lIGlzIGFtYmlndW91cy5cbiAgICogQHJldHVybnMge0RhdGVUaW1lW119XG4gICAqL1xuICBnZXRQb3NzaWJsZU9mZnNldHMoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgdGhpcy5pc09mZnNldEZpeGVkKSB7XG4gICAgICByZXR1cm4gW3RoaXNdO1xuICAgIH1cbiAgICBjb25zdCBkYXlNcyA9IDg2NDAwMDAwO1xuICAgIGNvbnN0IG1pbnV0ZU1zID0gNjAwMDA7XG4gICAgY29uc3QgbG9jYWxUUyA9IG9ialRvTG9jYWxUUyh0aGlzLmMpO1xuICAgIGNvbnN0IG9FYXJsaWVyID0gdGhpcy56b25lLm9mZnNldChsb2NhbFRTIC0gZGF5TXMpO1xuICAgIGNvbnN0IG9MYXRlciA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyArIGRheU1zKTtcblxuICAgIGNvbnN0IG8xID0gdGhpcy56b25lLm9mZnNldChsb2NhbFRTIC0gb0VhcmxpZXIgKiBtaW51dGVNcyk7XG4gICAgY29uc3QgbzIgPSB0aGlzLnpvbmUub2Zmc2V0KGxvY2FsVFMgLSBvTGF0ZXIgKiBtaW51dGVNcyk7XG4gICAgaWYgKG8xID09PSBvMikge1xuICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgY29uc3QgdHMxID0gbG9jYWxUUyAtIG8xICogbWludXRlTXM7XG4gICAgY29uc3QgdHMyID0gbG9jYWxUUyAtIG8yICogbWludXRlTXM7XG4gICAgY29uc3QgYzEgPSB0c1RvT2JqKHRzMSwgbzEpO1xuICAgIGNvbnN0IGMyID0gdHNUb09iaih0czIsIG8yKTtcbiAgICBpZiAoXG4gICAgICBjMS5ob3VyID09PSBjMi5ob3VyICYmXG4gICAgICBjMS5taW51dGUgPT09IGMyLm1pbnV0ZSAmJlxuICAgICAgYzEuc2Vjb25kID09PSBjMi5zZWNvbmQgJiZcbiAgICAgIGMxLm1pbGxpc2Vjb25kID09PSBjMi5taWxsaXNlY29uZFxuICAgICkge1xuICAgICAgcmV0dXJuIFtjbG9uZSh0aGlzLCB7IHRzOiB0czEgfSksIGNsb25lKHRoaXMsIHsgdHM6IHRzMiB9KV07XG4gICAgfVxuICAgIHJldHVybiBbdGhpc107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgRGF0ZVRpbWUgaXMgaW4gYSBsZWFwIHllYXIsIGZhbHNlIG90aGVyd2lzZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5pc0luTGVhcFllYXIgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmlzSW5MZWFwWWVhciAvLz0+IGZhbHNlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzSW5MZWFwWWVhcigpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcih0aGlzLnllYXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyBtb250aFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2LCAyKS5kYXlzSW5Nb250aCAvLz0+IDI5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYsIDMpLmRheXNJbk1vbnRoIC8vPT4gMzFcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBkYXlzSW5Nb250aCgpIHtcbiAgICByZXR1cm4gZGF5c0luTW9udGgodGhpcy55ZWFyLCB0aGlzLm1vbnRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2KS5kYXlzSW5ZZWFyIC8vPT4gMzY2XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLmRheXNJblllYXIgLy89PiAzNjVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBkYXlzSW5ZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBkYXlzSW5ZZWFyKHRoaXMueWVhcikgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdlZWtzIGluIHRoaXMgRGF0ZVRpbWUncyB5ZWFyXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDA0KS53ZWVrc0luV2Vla1llYXIgLy89PiA1M1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS53ZWVrc0luV2Vla1llYXIgLy89PiA1MlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtzSW5XZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gd2Vla3NJbldlZWtZZWFyKHRoaXMud2Vla1llYXIpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgbG9jYWwgd2VlayB5ZWFyXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMjAsIDYsIHtsb2NhbGU6ICdlbi1VUyd9KS53ZWVrc0luTG9jYWxXZWVrWWVhciAvLz0+IDUyXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMjAsIDYsIHtsb2NhbGU6ICdkZS1ERSd9KS53ZWVrc0luTG9jYWxXZWVrWWVhciAvLz0+IDUzXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla3NJbkxvY2FsV2Vla1llYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyB3ZWVrc0luV2Vla1llYXIoXG4gICAgICAgICAgdGhpcy5sb2NhbFdlZWtZZWFyLFxuICAgICAgICAgIHRoaXMubG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLFxuICAgICAgICAgIHRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKClcbiAgICAgICAgKVxuICAgICAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzb2x2ZWQgSW50bCBvcHRpb25zIGZvciB0aGlzIERhdGVUaW1lLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCBpbiB1bmRlcnN0YW5kaW5nIHRoZSBiZWhhdmlvciBvZiBmb3JtYXR0aW5nIG1ldGhvZHNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSB0aGUgc2FtZSBvcHRpb25zIGFzIHRvTG9jYWxlU3RyaW5nXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHJlc29sdmVkTG9jYWxlT3B0aW9ucyhvcHRzID0ge30pIHtcbiAgICBjb25zdCB7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhciB9ID0gRm9ybWF0dGVyLmNyZWF0ZShcbiAgICAgIHRoaXMubG9jLmNsb25lKG9wdHMpLFxuICAgICAgb3B0c1xuICAgICkucmVzb2x2ZWRPcHRpb25zKHRoaXMpO1xuICAgIHJldHVybiB7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcjogY2FsZW5kYXIgfTtcbiAgfVxuXG4gIC8vIFRSQU5TRk9STVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gVVRDLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEVxdWl2YWxlbnQgdG8ge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9KCd1dGMnKVxuICAgKiBAcGFyYW0ge251bWJlcn0gW29mZnNldD0wXSAtIG9wdGlvbmFsbHksIGFuIG9mZnNldCBmcm9tIFVUQyBpbiBtaW51dGVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz17fV0gLSBvcHRpb25zIHRvIHBhc3MgdG8gYHNldFpvbmUoKWBcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICB0b1VUQyhvZmZzZXQgPSAwLCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5zZXRab25lKEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShvZmZzZXQpLCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gdGhlIGhvc3QncyBsb2NhbCB6b25lLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEVxdWl2YWxlbnQgdG8gYHNldFpvbmUoJ2xvY2FsJylgXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgdG9Mb2NhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRab25lKFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBEYXRlVGltZSdzIHpvbmUgdG8gc3BlY2lmaWVkIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIHNldHRlciBrZWVwcyB0aGUgdW5kZXJseWluZyB0aW1lIHRoZSBzYW1lIChhcyBpbiwgdGhlIHNhbWUgdGltZXN0YW1wKSwgYnV0IHRoZSBuZXcgaW5zdGFuY2Ugd2lsbCByZXBvcnQgZGlmZmVyZW50IGxvY2FsIHRpbWVzIGFuZCBjb25zaWRlciBEU1RzIHdoZW4gbWFraW5nIGNvbXB1dGF0aW9ucywgYXMgd2l0aCB7QGxpbmsgRGF0ZVRpbWUjcGx1c30uIFlvdSBtYXkgd2lzaCB0byB1c2Uge0BsaW5rIERhdGVUaW1lI3RvTG9jYWx9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9VVEN9IHdoaWNoIHByb3ZpZGUgc2ltcGxlIGNvbnZlbmllbmNlIHdyYXBwZXJzIGZvciBjb21tb25seSB1c2VkIHpvbmVzLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbem9uZT0nbG9jYWwnXSAtIGEgem9uZSBpZGVudGlmaWVyLiBBcyBhIHN0cmluZywgdGhhdCBjYW4gYmUgYW55IElBTkEgem9uZSBzdXBwb3J0ZWQgYnkgdGhlIGhvc3QgZW52aXJvbm1lbnQsIG9yIGEgZml4ZWQtb2Zmc2V0IG5hbWUgb2YgdGhlIGZvcm0gJ1VUQyszJywgb3IgdGhlIHN0cmluZ3MgJ2xvY2FsJyBvciAndXRjJy4gWW91IG1heSBhbHNvIHN1cHBseSBhbiBpbnN0YW5jZSBvZiBhIHtAbGluayBEYXRlVGltZSNab25lfSBjbGFzcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMua2VlcExvY2FsVGltZT1mYWxzZV0gLSBJZiB0cnVlLCBhZGp1c3QgdGhlIHVuZGVybHlpbmcgdGltZSBzbyB0aGF0IHRoZSBsb2NhbCB0aW1lIHN0YXlzIHRoZSBzYW1lLCBidXQgaW4gdGhlIHRhcmdldCB6b25lLiBZb3Ugc2hvdWxkIHJhcmVseSBuZWVkIHRoaXMuXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc2V0Wm9uZSh6b25lLCB7IGtlZXBMb2NhbFRpbWUgPSBmYWxzZSwga2VlcENhbGVuZGFyVGltZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIHpvbmUgPSBub3JtYWxpemVab25lKHpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgICBpZiAoem9uZS5lcXVhbHModGhpcy56b25lKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIGlmICghem9uZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZSkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgbmV3VFMgPSB0aGlzLnRzO1xuICAgICAgaWYgKGtlZXBMb2NhbFRpbWUgfHwga2VlcENhbGVuZGFyVGltZSkge1xuICAgICAgICBjb25zdCBvZmZzZXRHdWVzcyA9IHpvbmUub2Zmc2V0KHRoaXMudHMpO1xuICAgICAgICBjb25zdCBhc09iaiA9IHRoaXMudG9PYmplY3QoKTtcbiAgICAgICAgW25ld1RTXSA9IG9ialRvVFMoYXNPYmosIG9mZnNldEd1ZXNzLCB6b25lKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHRzOiBuZXdUUywgem9uZSB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG9yIG91dHB1dENhbGVuZGFyLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wZXJ0aWVzIC0gdGhlIHByb3BlcnRpZXMgdG8gc2V0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5yZWNvbmZpZ3VyZSh7IGxvY2FsZTogJ2VuLUdCJyB9KVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHJlY29uZmlndXJlKHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvYyA9IHRoaXMubG9jLmNsb25lKHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyIH0pO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IGxvYyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBsb2NhbGUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogSnVzdCBhIGNvbnZlbmllbnQgYWxpYXMgZm9yIHJlY29uZmlndXJlKHsgbG9jYWxlIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5zZXRMb2NhbGUoJ2VuLUdCJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzZXRMb2NhbGUobG9jYWxlKSB7XG4gICAgcmV0dXJuIHRoaXMucmVjb25maWd1cmUoeyBsb2NhbGUgfSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgdmFsdWVzIG9mIHNwZWNpZmllZCB1bml0cy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBZb3UgY2FuIG9ubHkgc2V0IHVuaXRzIHdpdGggdGhpcyBtZXRob2Q7IGZvciBcInNldHRpbmdcIiBtZXRhZGF0YSwgc2VlIHtAbGluayBEYXRlVGltZSNyZWNvbmZpZ3VyZX0gYW5kIHtAbGluayBEYXRlVGltZSNzZXRab25lfS5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgYWxzbyBzdXBwb3J0cyBzZXR0aW5nIGxvY2FsZS1iYXNlZCB3ZWVrIHVuaXRzLCBpLmUuIGBsb2NhbFdlZWtkYXlgLCBgbG9jYWxXZWVrTnVtYmVyYCBhbmQgYGxvY2FsV2Vla1llYXJgLlxuICAgKiBUaGV5IGNhbm5vdCBiZSBtaXhlZCB3aXRoIElTTy13ZWVrIHVuaXRzIGxpa2UgYHdlZWtkYXlgLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gYSBtYXBwaW5nIG9mIHVuaXRzIHRvIG51bWJlcnNcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgeWVhcjogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyBob3VyOiA4LCBtaW51dGU6IDMwIH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHdlZWtkYXk6IDUgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgeWVhcjogMjAwNSwgb3JkaW5hbDogMjM0IH0pXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc2V0KHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVPYmplY3QodmFsdWVzLCBub3JtYWxpemVVbml0V2l0aExvY2FsV2Vla3MpO1xuICAgIGNvbnN0IHsgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlayB9ID0gdXNlc0xvY2FsV2Vla1ZhbHVlcyhub3JtYWxpemVkLCB0aGlzLmxvYyk7XG5cbiAgICBjb25zdCBzZXR0aW5nV2Vla1N0dWZmID1cbiAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla1llYXIpIHx8XG4gICAgICAgICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtOdW1iZXIpIHx8XG4gICAgICAgICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtkYXkpLFxuICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICBjb250YWluc0dyZWdvclllYXIgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC55ZWFyKSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yTUQgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5tb250aCkgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICBkZWZpbml0ZVdlZWtEZWYgPSBub3JtYWxpemVkLndlZWtZZWFyIHx8IG5vcm1hbGl6ZWQud2Vla051bWJlcjtcblxuICAgIGlmICgoY29udGFpbnNHcmVnb3IgfHwgY29udGFpbnNPcmRpbmFsKSAmJiBkZWZpbml0ZVdlZWtEZWYpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcbiAgICAgICAgXCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheVwiKTtcbiAgICB9XG5cbiAgICBsZXQgbWl4ZWQ7XG4gICAgaWYgKHNldHRpbmdXZWVrU3R1ZmYpIHtcbiAgICAgIG1peGVkID0gd2Vla1RvR3JlZ29yaWFuKFxuICAgICAgICB7IC4uLmdyZWdvcmlhblRvV2Vlayh0aGlzLmMsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspLCAuLi5ub3JtYWxpemVkIH0sXG4gICAgICAgIG1pbkRheXNJbkZpcnN0V2VlayxcbiAgICAgICAgc3RhcnRPZldlZWtcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmICghaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSkge1xuICAgICAgbWl4ZWQgPSBvcmRpbmFsVG9HcmVnb3JpYW4oeyAuLi5ncmVnb3JpYW5Ub09yZGluYWwodGhpcy5jKSwgLi4ubm9ybWFsaXplZCB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWl4ZWQgPSB7IC4uLnRoaXMudG9PYmplY3QoKSwgLi4ubm9ybWFsaXplZCB9O1xuXG4gICAgICAvLyBpZiB3ZSBkaWRuJ3Qgc2V0IHRoZSBkYXkgYnV0IHdlIGVuZGVkIHVwIG9uIGFuIG92ZXJmbG93IGRhdGUsXG4gICAgICAvLyB1c2UgdGhlIGxhc3QgZGF5IG9mIHRoZSByaWdodCBtb250aFxuICAgICAgaWYgKGlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSkge1xuICAgICAgICBtaXhlZC5kYXkgPSBNYXRoLm1pbihkYXlzSW5Nb250aChtaXhlZC55ZWFyLCBtaXhlZC5tb250aCksIG1peGVkLmRheSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW3RzLCBvXSA9IG9ialRvVFMobWl4ZWQsIHRoaXMubywgdGhpcy56b25lKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB0cywgbyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBwZXJpb2Qgb2YgdGltZSB0byB0aGlzIERhdGVUaW1lIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBEYXRlVGltZVxuICAgKlxuICAgKiBBZGRpbmcgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIG9yIG1pbGxpc2Vjb25kcyBpbmNyZWFzZXMgdGhlIHRpbWVzdGFtcCBieSB0aGUgcmlnaHQgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy4gQWRkaW5nIGRheXMsIG1vbnRocywgb3IgeWVhcnMgc2hpZnRzIHRoZSBjYWxlbmRhciwgYWNjb3VudGluZyBmb3IgRFNUcyBhbmQgbGVhcCB5ZWFycyBhbG9uZyB0aGUgd2F5LiBUaHVzLCBgZHQucGx1cyh7IGhvdXJzOiAyNCB9KWAgbWF5IHJlc3VsdCBpbiBhIGRpZmZlcmVudCB0aW1lIHRoYW4gYGR0LnBsdXMoeyBkYXlzOiAxIH0pYCBpZiB0aGVyZSdzIGEgRFNUIHNoaWZ0IGluIGJldHdlZW4uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cygxMjMpIC8vfj4gaW4gMTIzIG1pbGxpc2Vjb25kc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgbWludXRlczogMTUgfSkgLy9+PiBpbiAxNSBtaW51dGVzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pIC8vfj4gdGhpcyB0aW1lIHRvbW9ycm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAtMSB9KSAvL34+IHRoaXMgdGltZSB5ZXN0ZXJkYXlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMywgbWludXRlczogMTMgfSkpIC8vfj4gaW4gMyBociwgMTMgbWluXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgcGx1cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdCBhIHBlcmlvZCBvZiB0aW1lIHRvIHRoaXMgRGF0ZVRpbWUgYW5kIHJldHVybiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c31cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLm5lZ2F0ZSgpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCBhZGp1c3RUaW1lKHRoaXMsIGR1cikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhpcyBEYXRlVGltZSB0byB0aGUgYmVnaW5uaW5nIG9mIGEgdW5pdCBvZiB0aW1lLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIFRoZSB1bml0IHRvIGdvIHRvIHRoZSBiZWdpbm5pbmcgb2YuIENhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsIG9yICdtaWxsaXNlY29uZCcuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnVzZUxvY2FsZVdlZWtzPWZhbHNlXSAtIElmIHRydWUsIHVzZSB3ZWVrcyBiYXNlZCBvbiB0aGUgbG9jYWxlLCBpLmUuIHVzZSB0aGUgbG9jYWxlLWRlcGVuZGVudCBzdGFydCBvZiB0aGUgd2Vla1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCdtb250aCcpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAzLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCd5ZWFyJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDEtMDEnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3dlZWsnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMycsIHdlZWtzIGFsd2F5cyBzdGFydCBvbiBNb25kYXlzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5zdGFydE9mKCdkYXknKS50b0lTT1RpbWUoKTsgLy89PiAnMDA6MDAuMDAwLTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignaG91cicpLnRvSVNPVGltZSgpOyAvLz0+ICcwNTowMDowMC4wMDAtMDU6MDAnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhcnRPZih1bml0LCB7IHVzZUxvY2FsZVdlZWtzID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3QgbyA9IHt9LFxuICAgICAgbm9ybWFsaXplZFVuaXQgPSBEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpO1xuICAgIHN3aXRjaCAobm9ybWFsaXplZFVuaXQpIHtcbiAgICAgIGNhc2UgXCJ5ZWFyc1wiOlxuICAgICAgICBvLm1vbnRoID0gMTtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJxdWFydGVyc1wiOlxuICAgICAgY2FzZSBcIm1vbnRoc1wiOlxuICAgICAgICBvLmRheSA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwid2Vla3NcIjpcbiAgICAgIGNhc2UgXCJkYXlzXCI6XG4gICAgICAgIG8uaG91ciA9IDA7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwiaG91cnNcIjpcbiAgICAgICAgby5taW51dGUgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcIm1pbnV0ZXNcIjpcbiAgICAgICAgby5zZWNvbmQgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcInNlY29uZHNcIjpcbiAgICAgICAgby5taWxsaXNlY29uZCA9IDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm1pbGxpc2Vjb25kc1wiOlxuICAgICAgICBicmVhaztcbiAgICAgIC8vIG5vIGRlZmF1bHQsIGludmFsaWQgdW5pdHMgdGhyb3cgaW4gbm9ybWFsaXplVW5pdCgpXG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSBcIndlZWtzXCIpIHtcbiAgICAgIGlmICh1c2VMb2NhbGVXZWVrcykge1xuICAgICAgICBjb25zdCBzdGFydE9mV2VlayA9IHRoaXMubG9jLmdldFN0YXJ0T2ZXZWVrKCk7XG4gICAgICAgIGNvbnN0IHsgd2Vla2RheSB9ID0gdGhpcztcbiAgICAgICAgaWYgKHdlZWtkYXkgPCBzdGFydE9mV2Vlaykge1xuICAgICAgICAgIG8ud2Vla051bWJlciA9IHRoaXMud2Vla051bWJlciAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgby53ZWVrZGF5ID0gc3RhcnRPZldlZWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLndlZWtkYXkgPSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJxdWFydGVyc1wiKSB7XG4gICAgICBjb25zdCBxID0gTWF0aC5jZWlsKHRoaXMubW9udGggLyAzKTtcbiAgICAgIG8ubW9udGggPSAocSAtIDEpICogMyArIDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2V0KG8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhpcyBEYXRlVGltZSB0byB0aGUgZW5kIChtZWFuaW5nIHRoZSBsYXN0IG1pbGxpc2Vjb25kKSBvZiBhIHVuaXQgb2YgdGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIFRoZSB1bml0IHRvIGdvIHRvIHRoZSBlbmQgb2YuIENhbiBiZSAneWVhcicsICdxdWFydGVyJywgJ21vbnRoJywgJ3dlZWsnLCAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcsIG9yICdtaWxsaXNlY29uZCcuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnVzZUxvY2FsZVdlZWtzPWZhbHNlXSAtIElmIHRydWUsIHVzZSB3ZWVrcyBiYXNlZCBvbiB0aGUgbG9jYWxlLCBpLmUuIHVzZSB0aGUgbG9jYWxlLWRlcGVuZGVudCBzdGFydCBvZiB0aGUgd2Vla1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZignbW9udGgnKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTMxVDIzOjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ3llYXInKS50b0lTTygpOyAvLz0+ICcyMDE0LTEyLTMxVDIzOjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ3dlZWsnKS50b0lTTygpOyAvLyA9PiAnMjAxNC0wMy0wOVQyMzo1OTo1OS45OTktMDU6MDAnLCB3ZWVrcyBzdGFydCBvbiBNb25kYXlzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5lbmRPZignZGF5JykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0wM1QyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5lbmRPZignaG91cicpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMDU6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIGVuZE9mKHVuaXQsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IHRoaXMucGx1cyh7IFt1bml0XTogMSB9KVxuICAgICAgICAgIC5zdGFydE9mKHVuaXQsIG9wdHMpXG4gICAgICAgICAgLm1pbnVzKDEpXG4gICAgICA6IHRoaXM7XG4gIH1cblxuICAvLyBPVVRQVVRcblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXQgc3RyaW5nLlxuICAgKiAqKllvdSBtYXkgbm90IHdhbnQgdGhpcy4qKiBTZWUge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3IgYSBtb3JlIGZsZXhpYmxlIGZvcm1hdHRpbmcgdG9vbC4gRm9yIGEgdGFibGUgb2YgdG9rZW5zIGFuZCB0aGVpciBpbnRlcnByZXRhdGlvbnMsIHNlZSBbaGVyZV0oaHR0cHM6Ly9tb21lbnQuZ2l0aHViLmlvL2x1eG9uLyMvZm9ybWF0dGluZz9pZD10YWJsZS1vZi10b2tlbnMpLlxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdHMgdG8gb3ZlcnJpZGUgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBvbiB0aGlzIERhdGVUaW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcpIC8vPT4gJzIwMTcgQXByIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2ZyJykudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBhdnIuIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnLCB7IGxvY2FsZTogXCJmclwiIH0pIC8vPT4gJzIwMTcgYXZyLiAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoXCJISCAnaG91cnMgYW5kJyBtbSAnbWludXRlcydcIikgLy89PiAnMjAgaG91cnMgYW5kIDU1IG1pbnV0ZXMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvRm9ybWF0KGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLnJlZGVmYXVsdFRvRU4ob3B0cykpLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyh0aGlzLCBmbXQpXG4gICAgICA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxvY2FsaXplZCBzdHJpbmcgcmVwcmVzZW50aW5nIHRoaXMgZGF0ZS4gQWNjZXB0cyB0aGUgc2FtZSBvcHRpb25zIGFzIHRoZSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIGFuZCBhbnkgcHJlc2V0cyBkZWZpbmVkIGJ5IEx1eG9uLCBzdWNoIGFzIGBEYXRlVGltZS5EQVRFX0ZVTExgIG9yIGBEYXRlVGltZS5USU1FX1NJTVBMRWAuXG4gICAqIFRoZSBleGFjdCBiZWhhdmlvciBvZiB0aGlzIG1ldGhvZCBpcyBicm93c2VyLXNwZWNpZmljLCBidXQgaW4gZ2VuZXJhbCBpdCB3aWxsIHJldHVybiBhbiBhcHByb3ByaWF0ZSByZXByZXNlbnRhdGlvblxuICAgKiBvZiB0aGUgRGF0ZVRpbWUgaW4gdGhlIGFzc2lnbmVkIGxvY2FsZS5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIGZvcm1hdE9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMgYW5kIGNvbmZpZ3VyYXRpb24gb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdHMgdG8gb3ZlcnJpZGUgdGhlIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBvbiB0aGlzIERhdGVUaW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gNC8yMC8yMDE3XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZSgnZW4tZ2InKS50b0xvY2FsZVN0cmluZygpOyAvLz0+ICcyMC8wNC8yMDE3J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFX0ZVTEwpOyAvLz0+ICdBcHJpbCAyMCwgMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMLCB7IGxvY2FsZTogJ2ZyJyB9KTsgLy89PiAnMjggYW9cdTAwRkJ0IDIwMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLlRJTUVfU0lNUExFKTsgLy89PiAnMTE6MzIgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVUSU1FX1NIT1JUKTsgLy89PiAnNC8yMC8yMDE3LCAxMTozMiBBTSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyB3ZWVrZGF5OiAnbG9uZycsIG1vbnRoOiAnbG9uZycsIGRheTogJzItZGlnaXQnIH0pOyAvLz0+ICdUaHVyc2RheSwgQXByaWwgMjAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ3Nob3J0JywgbW9udGg6ICdzaG9ydCcsIGRheTogJzItZGlnaXQnLCBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnIH0pOyAvLz0+ICdUaHUsIEFwciAyMCwgMTE6MjcgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JywgaG91ckN5Y2xlOiAnaDIzJyB9KTsgLy89PiAnMTE6MzInXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvTG9jYWxlU3RyaW5nKGZvcm1hdE9wdHMgPSBGb3JtYXRzLkRBVEVfU0hPUlQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgZm9ybWF0T3B0cykuZm9ybWF0RGF0ZVRpbWUodGhpcylcbiAgICAgIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGZvcm1hdCBcInBhcnRzXCIsIG1lYW5pbmcgaW5kaXZpZHVhbCB0b2tlbnMgYWxvbmcgd2l0aCBtZXRhZGF0YS4gVGhpcyBpcyBhbGxvd3MgY2FsbGVycyB0byBwb3N0LXByb2Nlc3MgaW5kaXZpZHVhbCBzZWN0aW9ucyBvZiB0aGUgZm9ybWF0dGVkIG91dHB1dC5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXQvZm9ybWF0VG9QYXJ0c1xuICAgKiBAcGFyYW0gb3B0cyB7T2JqZWN0fSAtIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucywgc2FtZSBhcyBgdG9Mb2NhbGVTdHJpbmdgLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVBhcnRzKCk7IC8vPT4gW1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2RheScsIHZhbHVlOiAnMjUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdtb250aCcsIHZhbHVlOiAnMDUnIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbGl0ZXJhbCcsIHZhbHVlOiAnLycgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICd5ZWFyJywgdmFsdWU6ICcxOTgyJyB9XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+IF1cbiAgICovXG4gIHRvTG9jYWxlUGFydHMob3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBvcHRzKS5mb3JtYXREYXRlVGltZVBhcnRzKHRoaXMpXG4gICAgICA6IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmV4dGVuZGVkWm9uZT1mYWxzZV0gLSBhZGQgdGhlIHRpbWUgem9uZSBmb3JtYXQgZXh0ZW5zaW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MywgNSwgMjUpLnRvSVNPKCkgLy89PiAnMTk4Mi0wNS0yNVQwMDowMDowMC4wMDBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTygpIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1LTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTctMDQtMjJUMjA6NDc6MDUuMzM1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0lTTyh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcyMDE3MDQyMlQyMDQ3MDUuMzM1LTA0MDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPKHtcbiAgICBmb3JtYXQgPSBcImV4dGVuZGVkXCIsXG4gICAgc3VwcHJlc3NTZWNvbmRzID0gZmFsc2UsXG4gICAgc3VwcHJlc3NNaWxsaXNlY29uZHMgPSBmYWxzZSxcbiAgICBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSxcbiAgICBleHRlbmRlZFpvbmUgPSBmYWxzZSxcbiAgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGV4dCA9IGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiO1xuXG4gICAgbGV0IGMgPSB0b0lTT0RhdGUodGhpcywgZXh0KTtcbiAgICBjICs9IFwiVFwiO1xuICAgIGMgKz0gdG9JU09UaW1lKHRoaXMsIGV4dCwgc3VwcHJlc3NTZWNvbmRzLCBzdXBwcmVzc01pbGxpc2Vjb25kcywgaW5jbHVkZU9mZnNldCwgZXh0ZW5kZWRab25lKTtcbiAgICByZXR1cm4gYztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIGRhdGUgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoKSAvLz0+ICcxOTgyLTA1LTI1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPRGF0ZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcxOTgyMDUyNSdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09EYXRlKHsgZm9ybWF0ID0gXCJleHRlbmRlZFwiIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9JU09EYXRlKHRoaXMsIGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIHdlZWsgZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPV2Vla0RhdGUoKSAvLz0+ICcxOTgyLVcyMS0yJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT1dlZWtEYXRlKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgXCJra2trLSdXJ1dXLWNcIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyB0aW1lIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9dHJ1ZV0gLSBhZGQgdGhlIHRpbWUgem9uZSBmb3JtYXQgZXh0ZW5zaW9uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVByZWZpeD1mYWxzZV0gLSBpbmNsdWRlIHRoZSBgVGAgcHJlZml4XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSgpIC8vPT4gJzA3OjM0OjE5LjM2MVonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQsIHNlY29uZHM6IDAsIG1pbGxpc2Vjb25kczogMCB9KS50b0lTT1RpbWUoeyBzdXBwcmVzc1NlY29uZHM6IHRydWUgfSkgLy89PiAnMDc6MzRaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcwNzM0MTkuMzYxWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QwNzozNDoxOS4zNjFaJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT1RpbWUoe1xuICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gZmFsc2UsXG4gICAgc3VwcHJlc3NTZWNvbmRzID0gZmFsc2UsXG4gICAgaW5jbHVkZU9mZnNldCA9IHRydWUsXG4gICAgaW5jbHVkZVByZWZpeCA9IGZhbHNlLFxuICAgIGV4dGVuZGVkWm9uZSA9IGZhbHNlLFxuICAgIGZvcm1hdCA9IFwiZXh0ZW5kZWRcIixcbiAgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBjID0gaW5jbHVkZVByZWZpeCA/IFwiVFwiIDogXCJcIjtcbiAgICByZXR1cm4gKFxuICAgICAgYyArXG4gICAgICB0b0lTT1RpbWUoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGZvcm1hdCA9PT0gXCJleHRlbmRlZFwiLFxuICAgICAgICBzdXBwcmVzc1NlY29uZHMsXG4gICAgICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzLFxuICAgICAgICBpbmNsdWRlT2Zmc2V0LFxuICAgICAgICBleHRlbmRlZFpvbmVcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gUkZDIDI4MjItY29tcGF0aWJsZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgKzAwMDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIC0wNDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1JGQzI4MjIoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCBcIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgWlpaXCIsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBIVFRQIGhlYWRlcnMuIFRoZSBvdXRwdXQgaXMgYWx3YXlzIGV4cHJlc3NlZCBpbiBHTVQuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHN0cmluZyBjb25mb3JtcyB0byBSRkMgMTEyMy5cbiAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvUHJvdG9jb2xzL3JmYzI2MTYvcmZjMjYxNi1zZWMzLmh0bWwjc2VjMy4zLjFcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwIEdNVCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzLCAxOSkudG9IVFRQKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAxOTowMDowMCBHTVQnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSFRUUCgpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMudG9VVEMoKSwgXCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzICdHTVQnXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUxEYXRlKCkgLy89PiAnMjAxNC0wNy0xMydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TUUxEYXRlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRvSVNPRGF0ZSh0aGlzLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0U3BhY2U9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBzcGFjZSBiZXR3ZWVuIHRoZSB0aW1lIGFuZCB0aGUgb2Zmc2V0LCBzdWNoIGFzICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS50b1NRTCgpIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlWm9uZTogZmFsc2UgfSkgLy89PiAnMDU6MTU6MTYuMzQ1IEFtZXJpY2EvTmV3X1lvcmsnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU1FMVGltZSh7IGluY2x1ZGVPZmZzZXQgPSB0cnVlLCBpbmNsdWRlWm9uZSA9IGZhbHNlLCBpbmNsdWRlT2Zmc2V0U3BhY2UgPSB0cnVlIH0gPSB7fSkge1xuICAgIGxldCBmbXQgPSBcIkhIOm1tOnNzLlNTU1wiO1xuXG4gICAgaWYgKGluY2x1ZGVab25lIHx8IGluY2x1ZGVPZmZzZXQpIHtcbiAgICAgIGlmIChpbmNsdWRlT2Zmc2V0U3BhY2UpIHtcbiAgICAgICAgZm10ICs9IFwiIFwiO1xuICAgICAgfVxuICAgICAgaWYgKGluY2x1ZGVab25lKSB7XG4gICAgICAgIGZtdCArPSBcInpcIjtcbiAgICAgIH0gZWxzZSBpZiAoaW5jbHVkZU9mZnNldCkge1xuICAgICAgICBmbXQgKz0gXCJaWlwiO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgZm10LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVpvbmU9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgem9uZSwgc3VjaCBhcyAnQW1lcmljYS9OZXdfWW9yaycuIE92ZXJyaWRlcyBpbmNsdWRlT2Zmc2V0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldFNwYWNlPXRydWVdIC0gaW5jbHVkZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgdGltZSBhbmQgdGhlIG9mZnNldCwgc3VjaCBhcyAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCgpIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVab25lOiB0cnVlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwIEFtZXJpY2EvTmV3X1lvcmsnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU1FMKG9wdHMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCR7dGhpcy50b1NRTERhdGUoKX0gJHt0aGlzLnRvU1FMVGltZShvcHRzKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgZGVidWdnaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvSVNPKCkgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdGhlIFJFUEwuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBgRGF0ZVRpbWUgeyB0czogJHt0aGlzLnRvSVNPKCl9LCB6b25lOiAke3RoaXMuem9uZS5uYW1lfSwgbG9jYWxlOiAke3RoaXMubG9jYWxlfSB9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBEYXRlVGltZSB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS4gQWxpYXMgb2Yge0BsaW5rIERhdGVUaW1lI3RvTWlsbGlzfVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB2YWx1ZU9mKCkge1xuICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggbWlsbGlzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvTWlsbGlzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIHNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdG9TZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIC8gMTAwMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBzZWNvbmRzIChhcyBhIHdob2xlIG51bWJlcikgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdG9Vbml4SW50ZWdlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5mbG9vcih0aGlzLnRzIC8gMTAwMCkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIEJTT04gc2VyaWFsaXphYmxlIGVxdWl2YWxlbnQgdG8gdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7RGF0ZX1cbiAgICovXG4gIHRvQlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0pTRGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIHRoaXMgRGF0ZVRpbWUncyB5ZWFyLCBtb250aCwgZGF5LCBhbmQgc28gb24uXG4gICAqIEBwYXJhbSBvcHRzIC0gb3B0aW9ucyBmb3IgZ2VuZXJhdGluZyB0aGUgb2JqZWN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZUNvbmZpZz1mYWxzZV0gLSBpbmNsdWRlIGNvbmZpZ3VyYXRpb24gYXR0cmlidXRlcyBpbiB0aGUgb3V0cHV0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvT2JqZWN0KCkgLy89PiB7IHllYXI6IDIwMTcsIG1vbnRoOiA0LCBkYXk6IDIyLCBob3VyOiAyMCwgbWludXRlOiA0OSwgc2Vjb25kOiA0MiwgbWlsbGlzZWNvbmQ6IDI2OCB9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHRvT2JqZWN0KG9wdHMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4ge307XG5cbiAgICBjb25zdCBiYXNlID0geyAuLi50aGlzLmMgfTtcblxuICAgIGlmIChvcHRzLmluY2x1ZGVDb25maWcpIHtcbiAgICAgIGJhc2Uub3V0cHV0Q2FsZW5kYXIgPSB0aGlzLm91dHB1dENhbGVuZGFyO1xuICAgICAgYmFzZS5udW1iZXJpbmdTeXN0ZW0gPSB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW07XG4gICAgICBiYXNlLmxvY2FsZSA9IHRoaXMubG9jLmxvY2FsZTtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgRGF0ZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICB0b0pTRGF0ZSgpIHtcbiAgICByZXR1cm4gbmV3IERhdGUodGhpcy5pc1ZhbGlkID8gdGhpcy50cyA6IE5hTik7XG4gIH1cblxuICAvLyBDT01QQVJFXG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHR3byBEYXRlVGltZXMgYXMgYSBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBEYXRlVGltZSB0byBjb21wYXJlIHRoaXMgb25lIHRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIGFycmF5IG9mIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBpMSA9IERhdGVUaW1lLmZyb21JU08oJzE5ODItMDUtMjVUMDk6NDUnKSxcbiAgICogICAgIGkyID0gRGF0ZVRpbWUuZnJvbUlTTygnMTk4My0xMC0xNFQxMDozMCcpO1xuICAgKiBpMi5kaWZmKGkxKS50b09iamVjdCgpIC8vPT4geyBtaWxsaXNlY29uZHM6IDQzODA3NTAwMDAwIH1cbiAgICogaTIuZGlmZihpMSwgJ2hvdXJzJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDEyMTY4Ljc1IH1cbiAgICogaTIuZGlmZihpMSwgWydtb250aHMnLCAnZGF5cyddKS50b09iamVjdCgpIC8vPT4geyBtb250aHM6IDE2LCBkYXlzOiAxOS4wMzEyNSB9XG4gICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnLCAnaG91cnMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTksIGhvdXJzOiAwLjc1IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBkaWZmKG90aGVyRGF0ZVRpbWUsIHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiLCBvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXJEYXRlVGltZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcImNyZWF0ZWQgYnkgZGlmZmluZyBhbiBpbnZhbGlkIERhdGVUaW1lXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGR1ck9wdHMgPSB7IGxvY2FsZTogdGhpcy5sb2NhbGUsIG51bWJlcmluZ1N5c3RlbTogdGhpcy5udW1iZXJpbmdTeXN0ZW0sIC4uLm9wdHMgfTtcblxuICAgIGNvbnN0IHVuaXRzID0gbWF5YmVBcnJheSh1bml0KS5tYXAoRHVyYXRpb24ubm9ybWFsaXplVW5pdCksXG4gICAgICBvdGhlcklzTGF0ZXIgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKSA+IHRoaXMudmFsdWVPZigpLFxuICAgICAgZWFybGllciA9IG90aGVySXNMYXRlciA/IHRoaXMgOiBvdGhlckRhdGVUaW1lLFxuICAgICAgbGF0ZXIgPSBvdGhlcklzTGF0ZXIgPyBvdGhlckRhdGVUaW1lIDogdGhpcyxcbiAgICAgIGRpZmZlZCA9IGRpZmYoZWFybGllciwgbGF0ZXIsIHVuaXRzLCBkdXJPcHRzKTtcblxuICAgIHJldHVybiBvdGhlcklzTGF0ZXIgPyBkaWZmZWQubmVnYXRlKCkgOiBkaWZmZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgcmlnaHQgbm93LlxuICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI2RpZmZ9XG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBbdW5pdD1bJ21pbGxpc2Vjb25kcyddXSAtIHRoZSB1bml0IG9yIHVuaXRzIHVuaXRzIChzdWNoIGFzICdob3Vycycgb3IgJ2RheXMnKSB0byBpbmNsdWRlIGluIHRoZSBkdXJhdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIGNyZWF0aW9uIG9mIHRoZSBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBkaWZmTm93KHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiLCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5kaWZmKERhdGVUaW1lLm5vdygpLCB1bml0LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgc3Bhbm5pbmcgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCBhbm90aGVyIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgb3RoZXIgZW5kIHBvaW50IG9mIHRoZSBJbnRlcnZhbFxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHVudGlsKG90aGVyRGF0ZVRpbWUpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyh0aGlzLCBvdGhlckRhdGVUaW1lKSA6IHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBEYXRlVGltZSBpcyBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWUgYXMgYW5vdGhlciBEYXRlVGltZS5cbiAgICogSGlnaGVyLW9yZGVyIHVuaXRzIG11c3QgYWxzbyBiZSBpZGVudGljYWwgZm9yIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGB0cnVlYC5cbiAgICogTm90ZSB0aGF0IHRpbWUgem9uZXMgYXJlICoqaWdub3JlZCoqIGluIHRoaXMgY29tcGFyaXNvbiwgd2hpY2ggY29tcGFyZXMgdGhlICoqbG9jYWwqKiBjYWxlbmRhciB0aW1lLiBVc2Uge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9IHRvIGNvbnZlcnQgb25lIG9mIHRoZSBkYXRlcyBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnVzZUxvY2FsZVdlZWtzPWZhbHNlXSAtIElmIHRydWUsIHVzZSB3ZWVrcyBiYXNlZCBvbiB0aGUgbG9jYWxlLCBpLmUuIHVzZSB0aGUgbG9jYWxlLWRlcGVuZGVudCBzdGFydCBvZiB0aGUgd2Vlazsgb25seSB0aGUgbG9jYWxlIG9mIHRoaXMgRGF0ZVRpbWUgaXMgdXNlZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5oYXNTYW1lKG90aGVyRFQsICdkYXknKTsgLy9+PiB0cnVlIGlmIG90aGVyRFQgaXMgaW4gdGhlIHNhbWUgY3VycmVudCBjYWxlbmRhciBkYXlcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1NhbWUob3RoZXJEYXRlVGltZSwgdW5pdCwgb3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBpbnB1dE1zID0gb3RoZXJEYXRlVGltZS52YWx1ZU9mKCk7XG4gICAgY29uc3QgYWRqdXN0ZWRUb1pvbmUgPSB0aGlzLnNldFpvbmUob3RoZXJEYXRlVGltZS56b25lLCB7IGtlZXBMb2NhbFRpbWU6IHRydWUgfSk7XG4gICAgcmV0dXJuIChcbiAgICAgIGFkanVzdGVkVG9ab25lLnN0YXJ0T2YodW5pdCwgb3B0cykgPD0gaW5wdXRNcyAmJiBpbnB1dE1zIDw9IGFkanVzdGVkVG9ab25lLmVuZE9mKHVuaXQsIG9wdHMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcXVhbGl0eSBjaGVja1xuICAgKiBUd28gRGF0ZVRpbWVzIGFyZSBlcXVhbCBpZiBhbmQgb25seSBpZiB0aGV5IHJlcHJlc2VudCB0aGUgc2FtZSBtaWxsaXNlY29uZCwgaGF2ZSB0aGUgc2FtZSB6b25lIGFuZCBsb2NhdGlvbiwgYW5kIGFyZSBib3RoIHZhbGlkLlxuICAgKiBUbyBjb21wYXJlIGp1c3QgdGhlIG1pbGxpc2Vjb25kIHZhbHVlcywgdXNlIGArZHQxID09PSArZHQyYC5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXIgLSB0aGUgb3RoZXIgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVxdWFscyhvdGhlcikge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmlzVmFsaWQgJiZcbiAgICAgIG90aGVyLmlzVmFsaWQgJiZcbiAgICAgIHRoaXMudmFsdWVPZigpID09PSBvdGhlci52YWx1ZU9mKCkgJiZcbiAgICAgIHRoaXMuem9uZS5lcXVhbHMob3RoZXIuem9uZSkgJiZcbiAgICAgIHRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgdGhpcyB0aW1lIHJlbGF0aXZlIHRvIG5vdywgc3VjaCBhcyBcImluIHR3byBkYXlzXCIuIENhbiBvbmx5IGludGVybmF0aW9uYWxpemUgaWYgeW91clxuICAgKiBwbGF0Zm9ybSBzdXBwb3J0cyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdC4gUm91bmRzIGRvd24gYnkgZGVmYXVsdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBvdXRwdXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnN0eWxlPVwibG9uZ1wiXSAtIHRoZSBzdHlsZSBvZiB1bml0cywgbXVzdCBiZSBcImxvbmdcIiwgXCJzaG9ydFwiLCBvciBcIm5hcnJvd1wiXG4gICAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0IG9yIGFycmF5IG9mIHVuaXRzOyBpZiBvbWl0dGVkLCBvciBhbiBhcnJheSwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIGJlc3QgdW5pdC4gVXNlIGFuIGFycmF5IG9yIG9uZSBvZiBcInllYXJzXCIsIFwicXVhcnRlcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgb3IgXCJzZWNvbmRzXCJcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5yb3VuZD10cnVlXSAtIHdoZXRoZXIgdG8gcm91bmQgdGhlIG51bWJlcnMgaW4gdGhlIG91dHB1dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLnBhZGRpbmc9MF0gLSBwYWRkaW5nIGluIG1pbGxpc2Vjb25kcy4gVGhpcyBhbGxvd3MgeW91IHRvIHJvdW5kIHVwIHRoZSByZXN1bHQgaWYgaXQgZml0cyBpbnNpZGUgdGhlIHRocmVzaG9sZC4gRG9uJ3QgdXNlIGluIGNvbWJpbmF0aW9uIHdpdGgge3JvdW5kOiBmYWxzZX0gYmVjYXVzZSB0aGUgZGVjaW1hbCBvdXRwdXQgd2lsbCBpbmNsdWRlIHRoZSBwYWRkaW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5sb2NhbGUgLSBvdmVycmlkZSB0aGUgbG9jYWxlIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKCkgLy89PiBcImluIDEgZGF5XCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKFwiZXNcIikudG9SZWxhdGl2ZSh7IGRheXM6IDEgfSkgLy89PiBcImRlbnRybyBkZSAxIGRcdTAwRURhXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSh7IGxvY2FsZTogXCJmclwiIH0pIC8vPT4gXCJkYW5zIDIzIGhldXJlc1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlKCkgLy89PiBcIjIgZGF5cyBhZ29cIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZSh7IHVuaXQ6IFwiaG91cnNcIiB9KSAvLz0+IFwiNDggaG91cnMgYWdvXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBob3VyczogMzYgfSkudG9SZWxhdGl2ZSh7IHJvdW5kOiBmYWxzZSB9KSAvLz0+IFwiMS41IGRheXMgYWdvXCJcbiAgICovXG4gIHRvUmVsYXRpdmUob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGJhc2UgPSBvcHRpb25zLmJhc2UgfHwgRGF0ZVRpbWUuZnJvbU9iamVjdCh7fSwgeyB6b25lOiB0aGlzLnpvbmUgfSksXG4gICAgICBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nID8gKHRoaXMgPCBiYXNlID8gLW9wdGlvbnMucGFkZGluZyA6IG9wdGlvbnMucGFkZGluZykgOiAwO1xuICAgIGxldCB1bml0cyA9IFtcInllYXJzXCIsIFwibW9udGhzXCIsIFwiZGF5c1wiLCBcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIl07XG4gICAgbGV0IHVuaXQgPSBvcHRpb25zLnVuaXQ7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy51bml0KSkge1xuICAgICAgdW5pdHMgPSBvcHRpb25zLnVuaXQ7XG4gICAgICB1bml0ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gZGlmZlJlbGF0aXZlKGJhc2UsIHRoaXMucGx1cyhwYWRkaW5nKSwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG51bWVyaWM6IFwiYWx3YXlzXCIsXG4gICAgICB1bml0cyxcbiAgICAgIHVuaXQsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGRhdGUgcmVsYXRpdmUgdG8gdG9kYXksIHN1Y2ggYXMgXCJ5ZXN0ZXJkYXlcIiBvciBcIm5leHQgbW9udGhcIi5cbiAgICogT25seSBpbnRlcm5hdGlvbmFsaXplcyBvbiBwbGF0Zm9ybXMgdGhhdCBzdXBwb3J0cyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBvdXRwdXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gW29wdGlvbnMuYmFzZT1EYXRlVGltZS5ub3coKV0gLSB0aGUgRGF0ZVRpbWUgdG8gdXNlIGFzIHRoZSBiYXNpcyB0byB3aGljaCB0aGlzIHRpbWUgaXMgY29tcGFyZWQuIERlZmF1bHRzIHRvIG5vdy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnVuaXQgLSB1c2UgYSBzcGVjaWZpYyB1bml0OyBpZiBvbWl0dGVkLCB0aGUgbWV0aG9kIHdpbGwgcGljayB0aGUgdW5pdC4gVXNlIG9uZSBvZiBcInllYXJzXCIsIFwicXVhcnRlcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBvciBcImRheXNcIlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSBvdmVycmlkZSB0aGUgbnVtYmVyaW5nU3lzdGVtIG9mIHRoaXMgRGF0ZVRpbWUuIFRoZSBJbnRsIHN5c3RlbSBtYXkgY2hvb3NlIG5vdCB0byBob25vciB0aGlzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCJ0b21vcnJvd1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoKSAvLz0+IFwiXCJtYVx1MDBGMWFuYVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmVDYWxlbmRhcih7IGxvY2FsZTogXCJmclwiIH0pIC8vPT4gXCJkZW1haW5cIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKCkgLy89PiBcIjIgZGF5cyBhZ29cIlxuICAgKi9cbiAgdG9SZWxhdGl2ZUNhbGVuZGFyKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiBkaWZmUmVsYXRpdmUob3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHsgem9uZTogdGhpcy56b25lIH0pLCB0aGlzLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgbnVtZXJpYzogXCJhdXRvXCIsXG4gICAgICB1bml0czogW1wieWVhcnNcIiwgXCJtb250aHNcIiwgXCJkYXlzXCJdLFxuICAgICAgY2FsZW5kYXJ5OiB0cnVlLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWluIG9mIHNldmVyYWwgZGF0ZSB0aW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtaW5pbXVtXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfSB0aGUgbWluIERhdGVUaW1lLCBvciB1bmRlZmluZWQgaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRcbiAgICovXG4gIHN0YXRpYyBtaW4oLi4uZGF0ZVRpbWVzKSB7XG4gICAgaWYgKCFkYXRlVGltZXMuZXZlcnkoRGF0ZVRpbWUuaXNEYXRlVGltZSkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm1pbiByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIChpKSA9PiBpLnZhbHVlT2YoKSwgTWF0aC5taW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWF4IG9mIHNldmVyYWwgZGF0ZSB0aW1lc1xuICAgKiBAcGFyYW0gey4uLkRhdGVUaW1lfSBkYXRlVGltZXMgLSB0aGUgRGF0ZVRpbWVzIGZyb20gd2hpY2ggdG8gY2hvb3NlIHRoZSBtYXhpbXVtXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfSB0aGUgbWF4IERhdGVUaW1lLCBvciB1bmRlZmluZWQgaWYgY2FsbGVkIHdpdGggbm8gYXJndW1lbnRcbiAgICovXG4gIHN0YXRpYyBtYXgoLi4uZGF0ZVRpbWVzKSB7XG4gICAgaWYgKCFkYXRlVGltZXMuZXZlcnkoRGF0ZVRpbWUuaXNEYXRlVGltZSkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm1heCByZXF1aXJlcyBhbGwgYXJndW1lbnRzIGJlIERhdGVUaW1lc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIGJlc3RCeShkYXRlVGltZXMsIChpKSA9PiBpLnZhbHVlT2YoKSwgTWF0aC5tYXgpO1xuICB9XG5cbiAgLy8gTUlTQ1xuXG4gIC8qKlxuICAgKiBFeHBsYWluIGhvdyBhIHN0cmluZyB3b3VsZCBiZSBwYXJzZWQgYnkgZnJvbUZvcm1hdCgpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgZGVzY3JpcHRpb24pXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0YWtlbiBieSBmcm9tRm9ybWF0KClcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGZyb21Gb3JtYXRFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsIH0gPSBvcHRpb25zLFxuICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoe1xuICAgICAgICBsb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsXG4gICAgICB9KTtcbiAgICByZXR1cm4gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlVG9Vc2UsIHRleHQsIGZtdCk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXRFeHBsYWluIGluc3RlYWRcbiAgICovXG4gIHN0YXRpYyBmcm9tU3RyaW5nRXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMpO1xuICB9XG5cbiAgLy8gRk9STUFUIFBSRVNFVFNcblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAxMC8xNC8xOTgzXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfU0hPUlQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9TSE9SVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3QgMTQsIDE5ODMnXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfTUVEKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfTUVEO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaSwgT2N0IDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX01FRF9XSVRIX1dFRUtEQVkoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9NRURfV0lUSF9XRUVLREFZO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMnXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfRlVMTCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX0ZVTEw7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnVHVlc2RheSwgT2N0b2JlciAxNCwgMTk4MydcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9IVUdFKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfSFVHRTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FX1NJTVBMRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FX1NJTVBMRTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FX1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FX1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9XSVRIX1NIT1JUX09GRlNFVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FX1dJVEhfU0hPUlRfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FX1dJVEhfTE9OR19PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9XSVRIX0xPTkdfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwJywgYWx3YXlzIDI0LWhvdXIuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfMjRfU0lNUExFKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfMjRfU0lNUExFO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzJywgYWx3YXlzIDI0LWhvdXIuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVEVCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRWFzdGVybiBEYXlsaWdodCBUaW1lJywgYWx3YXlzIDI0LWhvdXIuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1dJVEhfTE9OR19PRkZTRVQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9TSE9SVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9TSE9SVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcxMC8xNC8xOTgzLCA5OjMwOjMzIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX01FRCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9NRUQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzLCA5OjMwOjMzIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIDE0IE9jdCAxOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9GVUxMKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX0ZVTEw7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9IVUdFKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX0hVR0U7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpZGF5LCBPY3RvYmVyIDE0LCAxOTgzLCA5OjMwOjMzIEFNIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUztcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcmllbmRseURhdGVUaW1lKGRhdGVUaW1laXNoKSB7XG4gIGlmIChEYXRlVGltZS5pc0RhdGVUaW1lKGRhdGVUaW1laXNoKSkge1xuICAgIHJldHVybiBkYXRlVGltZWlzaDtcbiAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiBkYXRlVGltZWlzaC52YWx1ZU9mICYmIGlzTnVtYmVyKGRhdGVUaW1laXNoLnZhbHVlT2YoKSkpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUpTRGF0ZShkYXRlVGltZWlzaCk7XG4gIH0gZWxzZSBpZiAoZGF0ZVRpbWVpc2ggJiYgdHlwZW9mIGRhdGVUaW1laXNoID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21PYmplY3QoZGF0ZVRpbWVpc2gpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgIGBVbmtub3duIGRhdGV0aW1lIGFyZ3VtZW50OiAke2RhdGVUaW1laXNofSwgb2YgdHlwZSAke3R5cGVvZiBkYXRlVGltZWlzaH1gXG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcbmltcG9ydCBJbmZvIGZyb20gXCIuL2luZm8uanNcIjtcbmltcG9ydCBab25lIGZyb20gXCIuL3pvbmUuanNcIjtcbmltcG9ydCBGaXhlZE9mZnNldFpvbmUgZnJvbSBcIi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCBJbnZhbGlkWm9uZSBmcm9tIFwiLi96b25lcy9pbnZhbGlkWm9uZS5qc1wiO1xuaW1wb3J0IFN5c3RlbVpvbmUgZnJvbSBcIi4vem9uZXMvc3lzdGVtWm9uZS5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5cbmNvbnN0IFZFUlNJT04gPSBcIjMuNC40XCI7XG5cbmV4cG9ydCB7XG4gIFZFUlNJT04sXG4gIERhdGVUaW1lLFxuICBEdXJhdGlvbixcbiAgSW50ZXJ2YWwsXG4gIEluZm8sXG4gIFpvbmUsXG4gIEZpeGVkT2Zmc2V0Wm9uZSxcbiAgSUFOQVpvbmUsXG4gIEludmFsaWRab25lLFxuICBTeXN0ZW1ab25lLFxuICBTZXR0aW5ncyxcbn07XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL21lbnVPdHJvLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDUgMTQ6NDM6MDlcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQyOjMxXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxcIjtcbmltcG9ydCB7ZnV6enlTZWxlY3RPckNyZWF0ZX0gZnJvbSBcIi4uLy4uL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZVwiO1xuaW1wb3J0IHtEYXRlVGltZX0gZnJvbSAnbHV4b24nXG5cbmludGVyZmFjZSBHcnVwb0FjdGl2aWRhZCB7XG4gICAgZ3J1cG86IHN0cmluZztcbiAgICBhY3RpdmlkYWQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIG1lbnVPdHJvIHtcbiAgICBcbiAgICBwYXRoQ2FtcG9zOiBzdHJpbmcgPSBcIkVzdHJ1Y3R1cmEvQ2FtcG9zIFNpc3RlbWEgR2VzdGlvbi9DYW1wb3MgUmVnaXN0cm8gVGllbXBvLm1kXCI7XG4gICAgc2VsZWN0ZWRBY3Rpdml0eTogc3RyaW5nID1cIlwiO1xuICAgIHNlbGVjdGVkR3JvdXA6IHN0cmluZyA9IFwiXCI7XG4gICAgcGx1Z2luOiBQbHVnaW47XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZnV6enlTZWxlY3RPckMgPSBuZXcgZnV6enlTZWxlY3RPckNyZWF0ZSh0aGlzLmFwcCwgcGx1Z2luKTtcbiAgICAgIH1cbiAgICBcbiAgICAgIGFzeW5jIG1lbnVPdHJvIChhcHA6IEFwcCwgcmVnaXN0cm86IGFueSl7XG4gICAgICAgIGNvbnN0IG9wY2lvbmVzT3RybyA9IFtcIlByb3BpYXNcIiwgXCJBcmVhcyBkZSBWaWRhXCIsIFwiQXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIsIFwiUHJveWVjdG9zIGRlIFFcIiwgXCJQcm95ZWN0b3MgR1REXCIsIFwiVGVtYSBkZSBJbnRlclx1MDBFOXNcIiwgXCJSZWN1cnNvIFJlY3VycmVudGVcIl0gO1xuICAgICAgICBjb25zdCB2YWxvcmVzT3RybyA9IFtcImhhYlwiLCBcImFjdHNBVlwiLCBcImFjdHNBSVwiLCBcImFjdHNQUVwiLCBcImFjdHNQR1REXCIsIFwiYWN0c1RJXCIsIFwiYWN0c1JSXCJdO1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlck90cm8gPSBcIlx1MDBCRlF1ZSBjYXRlZ29yaWE/XCI7XG4gICAgICAgIGNvbnN0IG1vZGFsT3RybyA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIG9wY2lvbmVzT3RybywgdmFsb3Jlc090cm8sIHBsYWNlaG9sZGVyT3Rybyk7XG4gICAgICAgIGxldCB0ZW1hT3Rybzp7Z3J1cG86c3RyaW5nO2FjdGl2aWRhZDpzdHJpbmcsbm9tYnJlOnN0cmluZ307XG4gICAgICAgIGxldCBzaUFzdW50bzogYm9vbGVhbiA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0aW9uT3RybyA9IGF3YWl0IG1vZGFsT3Ryby5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIHN3aXRjaChzZWxlY3Rpb25PdHJvKSB7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlIFwiaGFiXCI6XG4gICAgICAgICAgICAgICAgICAgIHRlbWFPdHJvID0gYXdhaXQgdGhpcy5oYWJpdHVhbChhcHApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FWXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNBSVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUFFcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1BHVERcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1RJXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNSUlwiOlxuICAgICAgICAgICAgICAgICAgICB0ZW1hT3RybyA9IGF3YWl0IHRoaXMuZWxlbVNHKGFwcCxzZWxlY3Rpb25PdHJvKTsgXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImJ1c1wiOlxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIHJldHVybiB7dGl0dWxvOiB0ZW1hT3Ryby5hY3RpdmlkYWQgKyBcIiAvIFwiICsgdGVtYU90cm8uZ3J1cG8sIHNpQXN1bnRvICxub21icmU6IHRlbWFPdHJvLmdydXBvLCBhcmVhVmlkYTogdGVtYU90cm8uZ3J1cG99XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBoYWJpdHVhbCAoYXBwOiBBcHApe1xuICAgICAgICAgICAgY29uc3QgZ3J1cG9zID0gYXdhaXQgdGhpcy5nZXRGcm9udG1hdHRlckZpZWxkKGFwcCx0aGlzLnBhdGhDYW1wb3MsIFwidGVtYXNcIik7XG4gICAgICAgICAgICBjb25zdCBhY3RzR3J1cG9zID0gYXdhaXQgdGhpcy5yZXN1bHRZYW1sKGFwcCxcImFjdHNUZW1hc1wiKVxuICAgICAgICAgICAgLy8gRmlsdHJhciB5IHByZXBhcmFyIGxhcyBhY3RpdmlkYWRlcyBleGlzdGVudGVzIHBhcmEgbGEgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgbGV0IGl0ZW1zRm9yU2VhcmNoID0gYWN0c0dydXBvc1xuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gZ3J1cG9zLmluY2x1ZGVzKGl0ZW0uZ3J1cG8pKSAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogYCR7aXRlbS5hY3RpdmlkYWR9IC8gJHtpdGVtLmdydXBvfWAsIC8vIENhbWJpYSBlbCBvcmRlbiBzaSBlcyBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICBhY3Rpdml0eTogaXRlbS5hY3RpdmlkYWQsIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2FjdGl2aWRhZCcgZW4gbHVnYXIgZGUgaXRlbVsxXVxuICAgICAgICAgICAgICAgIGdyb3VwOiBpdGVtLmdydXBvLFxuICAgICAgICAgICAgICAgIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsZXQgZWxlY2Npb24gPSBhd2FpdCB0aGlzLmZ1enp5U2VsZWN0T3JDLnNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zRm9yU2VhcmNoLCBncnVwb3MpO1xuICAgICAgICAgICAgbGV0IG9iakVsZWNjaW9uID0ge2dydXBvOiBlbGVjY2lvblsxXSwgYWN0aXZpZGFkOiBlbGVjY2lvblswXSwgbm9tYnJlOiBcIlwifTtcbiAgICAgICAgICAgIHJldHVybiBvYmpFbGVjY2lvbjsgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIG5pbmd1bm8gKGFwcDogQXBwKXtcblxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgIGVsZW1TRyAoYXBwOiBBcHAsIHRpcG8gOiBzdHJpbmcpOiBQcm9taXNlPGFueT57XG4gICAgICAgICAgICBjb25zdCBhY3RpdmlkYWRlcyA9IGF3YWl0IHRoaXMucmVzdWx0WWFtbChhcHAsIHRpcG8pXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVTRyA9IGF3YWl0IHRoaXMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShhcHAsdGlwbylcbiAgICAgICAgICAgIC8vIEV4dHJhZSBlbCBwcmltZXIgYWxpYXMgZGUgY2FkYSBub3RhIGVuY29udHJhZGEgeSBsb3MgYWxtYWNlbmEgZW4gdW4gYXJyYXlcbiAgICAgICAgICAgIGxldCBncm91cHM7XG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIHN3aXRjaCAodGlwbyl7XG4gICAgICAgICAgICBjYXNlIFwiYWN0c0FWXCI6XG4gICAgICAgICAgICAgICAgZ3JvdXBzID0gYWN0aXZlU0cubWFwKHBhZ2UgPT4gcGFnZS5mcm9udG1hdHRlci5hcmVhVmlkYSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGdyb3VwcyA9IGFjdGl2ZVNHLm1hcChwYWdlID0+IHBhZ2UuZnJvbnRtYXR0ZXIuYWxpYXNlcyA/IHBhZ2UuZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA6IG51bGwpLmZpbHRlcihhbGlhcyA9PiBhbGlhcyAhPT0gbnVsbCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRyYXIgeSBwcmVwYXJhciBsYXMgYWN0aXZpZGFkZXMgZXhpc3RlbnRlcyBwYXJhIGxhIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgICAgIGxldCBpdGVtc0ZvclNlYXJjaCA9IGFjdGl2aWRhZGVzXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBncm91cHMuaW5jbHVkZXMoaXRlbS5ncnVwbykpIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtpdGVtLmFjdGl2aWRhZH0gLyAke2l0ZW0uZ3J1cG99YCwgLy8gQ2FtYmlhIGVsIG9yZGVuIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBpdGVtLmFjdGl2aWRhZCwgLy8gVXNhIGxhIHByb3BpZWRhZCAnYWN0aXZpZGFkJyBlbiBsdWdhciBkZSBpdGVtWzFdXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGl0ZW0uZ3J1cG8sXG4gICAgICAgICAgICAgICAgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIE1vc3RyYW1vcyBlbCBtb2RhbCBjb24gbGFzIG9wY2lvbmVzIGRlIGJcdTAwRkFzcXVlZGFcblxuICAgICAgICAgICAgbGV0IGVsZWNjaW9uID0gYXdhaXQgdGhpcy5mdXp6eVNlbGVjdE9yQy5zaG93RnV6enlTZWFyY2hNb2RhbChpdGVtc0ZvclNlYXJjaCwgZ3JvdXBzLCB0aXBvKTtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kRWxlbWVudCA9IGFjdGl2ZVNHLmZpbmQoYiA9PiBiLmZyb250bWF0dGVyLmFsaWFzZXNbMF0gPT09IGVsZWNjaW9uWzFdKTtcbiAgICAgICAgICAgIC8vIFNpIHNlIGVuY3VlbnRyYSBlbCBlbGVtZW50bywgZGV2b2x2ZXIgZnJvbnRtYXR0ZXIuYWxpYXNlc1sxXVxuICAgICAgICAgICAgbGV0IGFsaWFzID0gZm91bmRFbGVtZW50Py5maWxlLnBhdGg7XG4gICAgICAgICAgICBsZXQgb2JqRWxlY2Npb24gPSB7Z3J1cG86IGVsZWNjaW9uWzFdLCBhY3RpdmlkYWQ6IGVsZWNjaW9uWzBdLCBub21icmU6IGFsaWFzfTtcbiAgICAgICAgICAgIHJldHVybiBvYmpFbGVjY2lvbjsgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgYnVzY2FyIChhcHA6IEFwcCl7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jICByZXN1bHRZYW1sKGFwcDogQXBwLCB0ZW1hOiBzdHJpbmcpOiBQcm9taXNlPEdydXBvQWN0aXZpZGFkW10+IHtcbiAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBhcmNoaXZvIHBvciBzdSBydXRhXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFjY2VkZSBhbCBmcm9udCBtYXR0ZXIgKFlBTUwpIGRlbCBhcmNoaXZvIHkgb2J0aWVuZSBlbCBhcnJlZ2xvIGJhc2FkbyBlbiBlbCB0ZW1hXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmVnbG9SZXN1bHQgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/Llt0ZW1hXSB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb25zdHJ1eWUgZWwgYXJyZWdsbyBkZSBvYmpldG9zIHJlc3VsdGFkbyBiYXNhZG8gZW4gbGEgZXN0cnVjdHVyYSBkZSBHcnVwb0FjdGl2aWRhZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRhZG86IEdydXBvQWN0aXZpZGFkW10gPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyZWdsb1Jlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvLnB1c2goeyBncnVwbzogaXRlbVswXSwgYWN0aXZpZGFkOiBpdGVtWzFdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZXZ1ZWx2ZSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gc2kgbm8gc2UgZW5jdWVudHJhIGVsIGFyY2hpdm8gbyBzaSBvY3VycmUgY3VhbHF1aWVyIG90cm8gcHJvYmxlbWFcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGdldEZyb250bWF0dGVyRmllbGQoYXBwOiBBcHAsIGZpbGU6IHN0cmluZywgZmllbGQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAodEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0RmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyICYmIGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGZyb250bWF0dGVyW2ZpZWxkXTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGZpZWxkVmFsdWUgPT09IG51bGwgfHwgZmllbGRWYWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWwgY2FtcG8gZXN0XHUwMEUxIHZhY1x1MDBFRG8gbyBubyBleGlzdGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBjb25zdWx0YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlOyAvLyBEZXZ1ZWx2ZSBlbCB2YWxvciBkZWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWwgY2FtcG8gbm8gZXhpc3RlIGVuIGVsIGZyb250bWF0dGVyLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBhcmNoaXZvIG5vIGV4aXN0ZSBvIG5vIGVzIHVuIGFyY2hpdm8gZGUgdGV4dG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbnN1bHRhciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcblxuICAgICAgICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gICAgICAgIGFzeW5jIGZpbmRNYWluRmlsZXNXaXRoU3RhdGUoYXBwLCB0aXBvKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNUaXBvID0ge1xuICAgICAgICAgICAgICAgIGFjdHNBVjoge1xuICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhLFxuICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLCBcbiAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYW1lRmlsZV9BcmVhc1ZpZGFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNBSToge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc0ludGVyZXMsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MubmFtZUZpbGVfQXJlYXNJbnRlcmVzXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNQUToge1xuICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zUSxcbiAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzUEdURDoge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NHVEQsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1RJOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVGVtYXNJbnRlcmVzLFxuICAgICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNSUjoge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzLFxuICAgICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFB1ZWRlcyBjb250aW51YXIgYVx1MDBGMWFkaWVuZG8gbVx1MDBFMXMgY2Fzb3MgYXF1XHUwMEVEXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgdGlwbyBlcyB1bmEgcHJvcGllZGFkIHZcdTAwRTFsaWRhIGFudGVzIGRlIGRlc2VzdHJ1Y3R1cmFyXG4gICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlciA9IFtdO1xuICAgICAgICAgICAgIHN3aXRjaCAodGlwbyl7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNBVlwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZvbGRlciwgc2FtZU5hbWUsIG5hbWVGaWxlIH0gPSBwcm9wZXJ0aWVzVGlwb1t0aXBvXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFob3JhID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoXCJ5eXl5LVFxXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiBmaWxlLm5hbWUuc3RhcnRzV2l0aChhaG9yYSkpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKHsgZmlsZTogZmlsZSwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhIH0pOyAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzVGlwby5oYXNPd25Qcm9wZXJ0eSh0aXBvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmb2xkZXIsIHNhbWVOYW1lLCBuYW1lRmlsZSB9ID0gcHJvcGVydGllc1RpcG9bdGlwb107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlc0luRm9sZGVyID0gYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc0luRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKChzYW1lTmFtZSAmJiBmaWxlLmJhc2VuYW1lID09PSBuYW1lRmlsZSkgfHwgIXNhbWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdGEuZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKHsgZmlsZTogZmlsZSwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhLmZyb250bWF0dGVyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWNjaVx1MDBGM24gbm8gcmVjb25vY2lkYTpcIiwgdGlwbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIE1hbmVqYXIgc2VnXHUwMEZBbiB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM25cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyO1xuICAgICAgICAgfVxuXG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDUgMTc6MDI6MzRcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQzOjU4XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcbmltcG9ydCB7bWVudU90cm99IGZyb20gJy4vbWVudU90cm8nXG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuL3JlZ2lzdHJvVGllbXBvQVBJXCI7XG5cbmV4cG9ydCBjbGFzcyB1dGlsc0FQSSB7XG4gIHByaXZhdGUgbWVudU90cm86IG1lbnVPdHJvO1xuICBwbHVnaW46IFBsdWdpbjtcblxuICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMubWVudU90cm8gPSBuZXcgbWVudU90cm8ocGx1Z2luKTtcbiAgfVxuICAvLyBMYSBkZWNsYXJhY2lcdTAwRjNuIGRlbCBtXHUwMEU5dG9kbyBlc3RhYmEgYXNpOiBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwLCByZWdpc3RybzogYW55KVxuICAvLyBEZXZ1ZWx2ZSBlbCBmaWxlIGRlbCByZWdpc3RybyBhY3Rpdm8uIFV0aWxpemFkbyBwYXJhIGN1YW5kbyBuZWNlc2l0byBvYnRlbmVyIGVsIGRhdG8gc29sYW1lbnRlIGRlIHNpIGhheSBhbGdcdTAwRkFuIHJlZ2lzdHJvIGFjdGl2by5cbiAgYXN5bmMgYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHA6IEFwcCk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgICAvLyBPYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gZGVzZGUgbWV0YWRhdGFDYWNoZVxuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblxuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBTdXBvbmVtb3MgcXVlIGVzdGEgZnVuY2lcdTAwRjNuIHNlIHViaWNhclx1MDBFMSBlbiBhbGdcdTAwRkFuIGx1Z2FyIGRvbmRlIHB1ZWRhIGFjY2VkZXIgYSBgYXBwYCBkZSBPYnNpZGlhbi5cbiAgYXN5bmMgY3JlYXJPYmpldG9SZWdpc3RybyhwbHVnaW46IFBsdWdpbikge1xuICAgIGNvbnN0IGFjdGl2byA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFjdGl2bykge1xuICAgICAgLy8gUmV0b3JuYXIgdW4gb2JqZXRvIHJlZ2lzdHJvIHByZWRldGVybWluYWRvIHNpbiBhcmNoaXZvIGFjdGl2b1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aXZvOiBudWxsLFxuICAgICAgICBub21icmU6IFwiUmVnaXN0cm8gc2luIGFyY2hpdm8gYWN0aXZvXCIsXG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbyxcbiAgICAgICAgaW5kaWNlOiBwbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvLFxuICAgICAgICBpZDogbnVsbCxcbiAgICAgICAgZmVjaGE6IHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSksXG4gICAgICAgIGluZGljZV9EVkpTOiBgXCIke3BsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVnaXN0cm9UaWVtcG99XCJgLFxuICAgICAgICBhbGlhc2VzOiBbXSAvLyBvIGluY2x1c28gcG9kclx1MDBFRGFzIGFzaWduYXIgYWxnXHUwMEZBbiBhbGlhcyBwb3IgZGVmZWN0byBzaSBsbyBkZXNlYXNcbiAgICAgIH07XG4gICAgfVxuICBcbiAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIGNvbnN0IGluZGljZSA9IHBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVnaXN0cm9UaWVtcG87XG4gIFxuICAgIGxldCBtYXhJZCA9IDA7XG4gICAgY29uc3QgZmlsZXMgPSBwbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKChmaWxlOiB7IHBhdGg6IHN0cmluZyB9KSA9PlxuICAgICAgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKVxuICAgICk7XG4gIFxuICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICBjb25zdCBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgY29uc3QgZmVjaGFDb21wbGV0YSA9IHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG4gIFxuICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBhY3Rpdm8gcGFyYSBleHRyYWVyIGFsaWFzZXNcbiAgICBjb25zdCBtZXRhZGF0YUFjdGl2byA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICBjb25zdCBhbGlhc2VzID1cbiAgICAgIG1ldGFkYXRhQWN0aXZvICYmIG1ldGFkYXRhQWN0aXZvLmZyb250bWF0dGVyICYmIG1ldGFkYXRhQWN0aXZvLmZyb250bWF0dGVyLmFsaWFzZXNcbiAgICAgICAgPyBtZXRhZGF0YUFjdGl2by5mcm9udG1hdHRlci5hbGlhc2VzXG4gICAgICAgIDogW107XG4gIFxuICAgIHJldHVybiB7XG4gICAgICBhY3Rpdm8sXG4gICAgICBub21icmU6IGFjdGl2by5iYXNlbmFtZSxcbiAgICAgIGZvbGRlcixcbiAgICAgIGluZGljZSxcbiAgICAgIGlkOiBuZXh0SWQsXG4gICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgIGluZGljZV9EVkpTOiBgXCIke2luZGljZX1cImAsXG4gICAgICBhbGlhc2VzLCAvLyBTZSBhZ3JlZ2EgZWwgY2FtcG8gYWxpYXNlcyBhbCByZWdpc3Ryb1xuICAgIH07XG4gIH1cblxuICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF07XG4gICAgY29uc3QgZGlhcyA9IFtcbiAgICAgIFwiRG9taW5nb1wiLFxuICAgICAgXCJMdW5lc1wiLFxuICAgICAgXCJNYXJ0ZXNcIixcbiAgICAgIFwiTWlcdTAwRTlyY29sZXNcIixcbiAgICAgIFwiSnVldmVzXCIsXG4gICAgICBcIlZpZXJuZXNcIixcbiAgICAgIFwiU1x1MDBFMWJhZG9cIixcbiAgICBdO1xuICAgIGNvbnN0IGRpYVNlbWFuYSA9IGRpYXNbZmVjaGEuZ2V0RGF5KCldO1xuICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoXCIgXCIpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xuICB9XG5cbiAgLy8gTVx1MDBFOXRvZG8gcXVlIHZlcmlmaWNhIHNpIGhheSByZWdpc3Ryb3MgQUN0aXZvcyB5IHByZWd1bnRhIHNpIHF1aWVyZSBjZXJyYXJsb3MuXG4gIGFzeW5jIHZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm86IGFueSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgdGFyZWFzQWN0aXZhcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHJlZ2lzdHJvLmZvbGRlcikpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgIHRhcmVhc0FjdGl2YXMucHVzaCh7XG4gICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgdGl0dWxvOiBtZXRhZGF0YS50aXR1bG8sXG4gICAgICAgICAgICBhbGlhc2VzOiBtZXRhZGF0YS5hbGlhc2VzIHx8IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZWFzQWN0aXZhcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHRhcmVhQWN0aXZhID0gdGFyZWFzQWN0aXZhc1swXTtcbiAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IHRoaXMubW9zdHJhclN1Z2VyZW5jaWEoXG4gICAgICAgIGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IGVzdFx1MDBFMSBjb3JyaWVuZG8uIFx1MDBCRkRlc2VhIGRldGVuZXJsYT9gXG4gICAgICApO1xuICAgICAgaWYgKGRlc2VhRGV0ZW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLmApO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVzZWFEZXRlbmVyKSB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCByZWdpc3Ryb1RpZW1wb0FQSW5zdGFuY2UgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgICAgICBhd2FpdCByZWdpc3Ryb1RpZW1wb0FQSW5zdGFuY2UuY2VycmFyUmVnaXN0cm8odGFyZWFBY3RpdmEuZmlsZSk7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gc2VndWlyXHUwMEUxIHJlZ2lzdHJcdTAwRTFuZG9zZS5gKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID4gMSkge1xuICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgXCJIYXkgdW4gZXJyb3IgY29uIGxhIGNhbnRpZGFkIGRlIHRhcmVhcyBjb3JyaWVuZG8gZW4gZXN0ZSBtb21lbnRvLlwiXG4gICAgICApO1xuICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gaGF5IG1cdTAwRTFzIHRhcmVhcyBjb3JyaWVuZG8uXCIpO1xuICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG1vc3RyYXJTdWdlcmVuY2lhKG1lbnNhamU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgc2VsZWNjaW9uYWRvID0gZmFsc2U7IC8vIEluZGljYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cblxuICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoYXBwKTtcbiAgICAgIG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogbWVuc2FqZSB9KTtcblxuICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGJvdG9uZXNcbiAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJkaXZcIik7XG5cbiAgICAgIC8vIEZ1bmNpXHUwMEYzbiBhdXhpbGlhciBwYXJhIG1hbmVqYXIgc2VsZWNjaW9uZXMgeSBjZXJyYXIgZWwgbW9kYWwgYWRlY3VhZGFtZW50ZVxuICAgICAgY29uc3QgaGFjZXJTZWxlY2Npb24gPSAoc2VsZWNjaW9uOiBib29sZWFuKSA9PiB7XG4gICAgICAgIHNlbGVjY2lvbmFkbyA9IHRydWU7IC8vIE1hcmNhciBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgIG1vZGFsLmNsb3NlKCk7IC8vIENlcnJhciBlbCBtb2RhbFxuICAgICAgICByZXNvbHZlKHNlbGVjY2lvbik7IC8vIFJlc29sdmVyIGxhIHByb21lc2EgY29uIGxhIHNlbGVjY2lcdTAwRjNuXG4gICAgICB9O1xuXG4gICAgICAvLyBCb3RcdTAwRjNuIFNcdTAwRURcbiAgICAgIGNvbnN0IHllc0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICB0ZXh0OiBcIlNcdTAwRURcIixcbiAgICAgIH0pO1xuICAgICAgeWVzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYWNlclNlbGVjY2lvbih0cnVlKSk7XG5cbiAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgIGNvbnN0IG5vQnV0dG9uID0gYnV0dG9uc0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgIHRleHQ6IFwiTm9cIixcbiAgICAgIH0pO1xuICAgICAgbm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhY2VyU2VsZWNjaW9uKGZhbHNlKSk7XG5cbiAgICAgIG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgIGlmICghc2VsZWNjaW9uYWRvKSB7XG4gICAgICAgICAgLy8gU2kgZWwgbW9kYWwgc2UgY2llcnJhIHNpbiBxdWUgc2UgaGF5YSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24sIHJlY2hhemFyIGxhIHByb21lc2FcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiTW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM25cIikpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBBZ3JlZ2FyIGVzY3VjaGFzIGRlIGV2ZW50b3MgZGUgdGVjbGFkbyBwYXJhIHBlcm1pdGlyIGxhIG5hdmVnYWNpXHUwMEYzbiBjb24gZWwgdGVjbGFkb1xuICAgICAgbW9kYWwuY29udGVudEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlOiB7IGtleTogYW55IH0pID0+IHtcbiAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgIGNhc2UgXCJBcnJvd0xlZnRcIjpcbiAgICAgICAgICAgIHllc0J1dHRvbi5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFycm93UmlnaHRcIjpcbiAgICAgICAgICAgIG5vQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiRW50ZXJcIjpcbiAgICAgICAgICAgIC8vIFNpbXVsYSBjbGljIGVuIGVsIGJvdFx1MDBGM24gZW5mb2NhZG9cbiAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ/LmNsaWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEVuZm9jYXIgaW5pY2lhbG1lbnRlIGVsIGJvdFx1MDBGM24gJ1NcdTAwRUQnIHBhcmEgcGVybWl0aXIgbGEgbmF2ZWdhY2lcdTAwRjNuIGNvbiB0ZWNsYWRvIGRlc2RlIGVsIGluaWNpb1xuICAgICAgeWVzQnV0dG9uLmZvY3VzKCk7XG5cbiAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCB0aGlzLmVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwKTtcbiAgICBsZXQgb3BjaW9uZXNUaXR1bG86IHN0cmluZ1tdO1xuICAgIGxldCB2YWxvcmVzT3BjaW9uOiBzdHJpbmdbXTtcbiAgXG4gICAgaWYgKHJlZ2lzdHJvLmFjdGl2bykge1xuICAgICAgLy8gU2kgaGF5IGFyY2hpdm8gYWN0aXZvLCBzZSBkZXRlcm1pbmEgZWwgdmFsb3JNb3N0cmFyIGJhc2FkbyBlbiBhbGlhc2VzIG8gbm9tYnJlLlxuICAgICAgbGV0IHZhbG9yTW9zdHJhcjogc3RyaW5nO1xuICAgICAgaWYgKHJlZ2lzdHJvLmFsaWFzZXMgJiYgcmVnaXN0cm8uYWxpYXNlcy5sZW5ndGggPj0gMikge1xuICAgICAgICB2YWxvck1vc3RyYXIgPSByZWdpc3Ryby5hbGlhc2VzWzFdO1xuICAgICAgfSBlbHNlIGlmIChyZWdpc3Ryby5hbGlhc2VzICYmIHJlZ2lzdHJvLmFsaWFzZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgdmFsb3JNb3N0cmFyID0gcmVnaXN0cm8uYWxpYXNlc1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbG9yTW9zdHJhciA9IHJlZ2lzdHJvLm5vbWJyZTtcbiAgICAgIH1cbiAgICAgIGlmICh0b3RUYXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFt2YWxvck1vc3RyYXIsIFwiQWxndW5hIHRhcmVhIGVuIEVqZWN1Y2lcdTAwRjNuXCIsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJUYXJlYVwiLCBcIk90cm9cIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFt2YWxvck1vc3RyYXIsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJPdHJvXCJdO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaSBubyBoYXkgYXJjaGl2byBhY3Rpdm8sIHNlIG9taXRlIHZhbG9yTW9zdHJhci5cbiAgICAgIGlmICh0b3RUYXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtcIkFsZ3VuYSB0YXJlYSBlbiBFamVjdWNpXHUwMEYzblwiLCBcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJUYXJlYVwiLCBcIk90cm9cIl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJPdHJvXCJdO1xuICAgICAgfVxuICAgIH1cbiAgXG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIlx1MDBCRlNvYnJlIHF1XHUwMEU5IGVzIGVsIHJlZ2lzdHJvIGRlIHRpZW1wbz9cIjtcbiAgICBjb25zdCBtb2RhbE1lbnUxID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb24sIHBsYWNlaG9sZGVyKTtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICByZWdpc3Ryby50aXBvUmVnaXN0cm8gPSBzZWxlY3Rpb247XG4gIFxuICAgICAgc3dpdGNoIChyZWdpc3Ryby50aXBvUmVnaXN0cm8pIHtcbiAgICAgICAgY2FzZSBcIk5vdGFcIjpcbiAgICAgICAgICBpZiAocmVnaXN0cm8uYWN0aXZvKSB7XG4gICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSByZWdpc3Ryby5ub21icmU7XG4gICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICByZWdpc3RybyA9IHRoaXMuY29waWFyQ2FtcG9zKHJlZ2lzdHJvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBub3RhIGFjdGl2YSBwYXJhIGFzaWduYXJcIik7XG4gICAgICAgICAgICByZWdpc3Ryby50aXBvUmVnaXN0cm8gPSBcIk90cm9cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJUYXJlYVwiOlxuICAgICAgICAgIGF3YWl0IHRoaXMuZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwLCByZWdpc3RybywgdG90VGFyZWFzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgcmVzcHVlc3RhID0gYXdhaXQgdGhpcy5tZW51T3Ryby5tZW51T3RybyhhcHAsIHJlZ2lzdHJvKTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHJlZ2lzdHJvLCByZXNwdWVzdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIHNlIHBvZHJcdTAwRURhIG1hbmVqYXIgZWwgY2FzbyBkZSBjaWVycmUgc2luIHNlbGVjY2lcdTAwRjNuLCBwb3IgZWplbXBsbywgZXN0YWJsZWNpZW5kbyByZWdpc3Ryby5kZXRlbmVyLlxuICAgIH1cbiAgfVxuXG4gIGNvcGlhckNhbXBvcyhyZWdpc3Rybyl7XG4gICAgbGV0IG5vbWJyZSA9IHJlZ2lzdHJvLmFjdGl2by5iYXNlbmFtZTtcbiAgICBsZXQgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Ryby5hY3Rpdm8pO1xuICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIil7IFxuICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub21icmU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyByZWdpc3Ryby5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCByZWdpc3Ryby5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gcmVnaXN0cm8ucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gcmVnaXN0cm8ucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSByZWdpc3Ryby5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgcmVnaXN0cm8ucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgfVxuICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSByZWdpc3Ryby5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZWdpc3RybztcbiAgfVxuXG4gIGFzeW5jIGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoXG4gICAgYXBwOiBBcHBcbiAgKTogUHJvbWlzZTx7IHRhcmVhOiBzdHJpbmc7IGFyY2hpdm86IFRGaWxlIH1bXT4ge1xuICAgIGxldCB0YXJlYXNQZW5kaWVudGVzOiB7IHRhcmVhOiBzdHJpbmc7IGFyY2hpdm86IFRGaWxlIH1bXSA9IFtdO1xuICAgIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoXG4gICAgICAoYXJjaGl2bzogeyBwYXRoOiBzdHJpbmcgfSkgPT4gIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIilcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zUmVsZXZhbnRlcykge1xuICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gY29udGVuaWRvLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi9nbSkgfHwgW107XG5cbiAgICAgIC8vIFBhcmEgY2FkYSB0YXJlYSBlbmNvbnRyYWRhLCBjcmVhIHVuIG9iamV0byBjb24gbGEgdGFyZWEgbGltcGlhIHkgZWwgYXJjaGl2byBhY3R1YWwsIHkgbG8gYWdyZWdhIGFsIGFycmVnbG9cbiAgICAgIGNvbnN0IHRhcmVhc0NvbkFyY2hpdm8gPSBjb2luY2lkZW5jaWFzLm1hcCgodGFyZWE6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4geyB0YXJlYTogdGFyZWEudHJpbSgpLCBhcmNoaXZvOiBhcmNoaXZvIH07XG4gICAgICB9KTtcbiAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNDb25BcmNoaXZvKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmVhc1BlbmRpZW50ZXM7XG4gIH1cblxuICBhc3luYyBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhcbiAgICBhcHA6IEFwcCxcbiAgICByZWdpc3RybzogYW55LFxuICAgIHRhcmVhc1BlbmRpZW50ZXM6IGFueVxuICApIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiRWxpZ2UgbGEgdGFyZWEgcXVlIHZhcyBhIHJlZ2lzdHJhci5cIjtcblxuICAgIC8vIE1hcCBwYXJhIGV4dHJhZXIgeSBsaW1waWFyIHNvbG8gbGFzIHRhcmVhc1xuICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCgodGFyZWFPYmo6IHsgdGFyZWE6IHN0cmluZyB9KSA9PlxuICAgICAgdGhpcy5saW1waWFyVGV4dG9UYXJlYSh0YXJlYU9iai50YXJlYSlcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEVzcGVyYSBhIHF1ZSB0b2RhcyBsYXMgcHJvbWVzYXMgZW4gcHJvbWVzYXNMaW1waWFzIHNlIHJlc3VlbHZhblxuICAgICAgY29uc3QgdGFyZWFzTGltcGlhcyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcyk7XG5cbiAgICAgIC8vIFJlY29uc3RydWlyIGxvcyBvYmpldG9zIGNvbiBsYXMgdGFyZWFzIGxpbXBpYXMgbWFudGVuaWVuZG8gbGEgcmVmZXJlbmNpYSBhbCBhcmNoaXZvXG4gICAgICBjb25zdCB0YXJlYXNMaW1waWFzQ29uQXJjaGl2byA9IHRhcmVhc1BlbmRpZW50ZXMubWFwKFxuICAgICAgICAodGFyZWFPYmo6IHsgYXJjaGl2bzogYW55IH0sIGluZGV4OiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZWE6IHRhcmVhc0xpbXBpYXNbaW5kZXhdLCAvLyBUYXJlYSBsaW1waWFcbiAgICAgICAgICAgIGFyY2hpdm86IHRhcmVhT2JqLmFyY2hpdm8sIC8vIFJlZmVyZW5jaWEgYWwgYXJjaGl2byBvcmlnaW5hbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIEVzdGFzIGRvcyBsXHUwMEVEbmVhcyBtZSBnZW5lcmFuIHVuIGFycmVnbG8gZGUgaW5kaWNlcyBwYXJhIHN1bWluaXN0cmFyIGVsIHZhbG9yIGFsIG1vZGFsLlxuICAgICAgY29uc3QgbG9uZ2l0dWQgPSB0YXJlYXNMaW1waWFzQ29uQXJjaGl2by5sZW5ndGg7XG4gICAgICBjb25zdCBhcnJlZ2xvRGVJbmRpY2VzID0gQXJyYXkuZnJvbShcbiAgICAgICAgeyBsZW5ndGg6IGxvbmdpdHVkIH0sXG4gICAgICAgIChfLCBpbmRpY2UpID0+IGluZGljZVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbW9kYWxNZW51ID0gbmV3IFNlbGVjY2lvbk1vZGFsKFxuICAgICAgICBhcHAsXG4gICAgICAgIHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvLm1hcCgoYjogeyB0YXJlYTogYW55IH0pID0+IGIudGFyZWEpLFxuICAgICAgICBhcnJlZ2xvRGVJbmRpY2VzLFxuICAgICAgICBwbGFjZWhvbGRlclxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEVzcGVyYSBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuIGVuIGVsIG1vZGFsXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBhd2FpdCBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG5cbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHNlbGVjY2lcdTAwRjNuIGNvcnJlc3BvbmRhIGFsIFx1MDBFRG5kaWNlIGNvcnJlY3RvIGVuIHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvXG4gICAgICAgIGNvbnN0IHNlbGVjY2lvbiA9IHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvW3NlbGVjdGVkSW5kZXhdO1xuICAgICAgICByZWdpc3Ryby50aXR1bG8gPSBzZWxlY2Npb24udGFyZWE7IC8vIG8gY1x1MDBGM21vIGhheWFzIGRlY2lkaWRvIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gbGltcGlhXG4gICAgICAgIHJlZ2lzdHJvLm5vbWJyZSA9IHNlbGVjY2lvbi5hcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBvIGNpZXJyZSBkZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBlbiBsYSBsaW1waWV6YSBkZSB0YXJlYXNcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJIdWJvIHVuIGVycm9yIGFsIGxpbXBpYXIgbGFzIHRhcmVhczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGxpbXBpYXJUZXh0b1RhcmVhKHRpdHVsbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIEVsaW1pbmEgdG9kbyBkZXNwdVx1MDBFOXMgZGVsIHByaW1lciBzYWx0byBkZSBsXHUwMEVEbmVhLlxuICAgICAgbGV0IHRleHRvTGltcGlvID0gdGl0dWxvLnNwbGl0KFwiXFxuXCIpWzBdO1xuXG4gICAgICAvLyBFbGltaW5hIGxvcyB0YWdzIGRlIGVzdGlsbyBNYXJrZG93bi5cbiAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvI1tcXHctL10rL2csIFwiXCIpO1xuXG4gICAgICAvLyBFbGltaW5hIGxvcyBjYW1wb3MgZGUgZXN0aWxvIERhdGF2aWV3LlxuICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtcXHcrOjpbXlxcXV0rXFxdL2csIFwiXCIpO1xuXG4gICAgICAvLyBFbGltaW5hIGVsIHBhdHJcdTAwRjNuIFwiIC0gWy9dXCIgYWwgaW5pY2lvIGRlIGxhIGNhZGVuYSwgaW5jbHV5ZW5kbyBwb3NpYmxlcyBlc3BhY2lvcyBhbnRlcyBvIGRlc3B1XHUwMEU5cy5cbiAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCBcIlwiKTtcblxuICAgICAgLy8gUmVlbXBsYXphIGNhcmFjdGVyZXMgbm8gcGVybWl0aWRvcyBlbiBub21icmVzIGRlIGFyY2hpdm8gY29uIHVuIGd1aW9uIGJham8gbyBhbGdcdTAwRkFuIG90cm8gY2FyYWN0ZXIgc2VndXJvLlxuICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xuXG4gICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBjb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICAvLyBDb25zdHJ1aXIgbGEgcnV0YSBiYXNlIHBhcmEgZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgbGV0IG5vbWJyZUJhc2UgPSBgJHtyZWdpc3Ryby5mb2xkZXJ9L1JUIC0gJHtyZWdpc3Ryby5pZH1gO1xuICBcbiAgICAvLyBMaW1waWFyIHkgcmVjb3J0YXIgZWwgdFx1MDBFRHR1bG8gcGFyYSBmb3JtYXIgZWwgYWxpYXMgYmFzZVxuICAgIGxldCBhbGlhc0Jhc2UgPSB0aGlzLmxpbXBpYXJBbGlhcyhyZWdpc3Ryby50aXR1bG8pO1xuICAgIGFsaWFzQmFzZSA9IGFsaWFzQmFzZS5sZW5ndGggPiAxOTUgPyBhbGlhc0Jhc2Uuc2xpY2UoMCwgMTk1KSA6IGFsaWFzQmFzZTtcbiAgXG4gICAgLy8gQ2FsY3VsYXIgZWwgXHUwMEZBbHRpbW8gaWRTZWMgZXhpc3RlbnRlIHBhcmEgZXN0ZSB0XHUwMEVEdHVsbyBlbiBsYSBjYXJwZXRhXG4gICAgY29uc3QgbWF4SWRTZWMgPSBhd2FpdCB0aGlzLmNhbGN1bGFyVWx0aW1vSWRTZWMocmVnaXN0cm8udGl0dWxvLCByZWdpc3Ryby5mb2xkZXIsIGFwcCk7XG4gICAgcmVnaXN0cm8uaWRTZWMgPSBtYXhJZFNlYyArIDE7XG4gIFxuICAgIC8vIENvbnN0cnVpciBlbCBhbGlhcyBhY3R1YWwgYWdyZWdhbmRvIGVsIGlkU2VjIChzaSBlcyBtYXlvciBhIDEpXG4gICAgbGV0IGFsaWFzTGltcGlvID0gYWxpYXNCYXNlO1xuICAgIGlmIChyZWdpc3Ryby5pZFNlYyA+IDEpIHtcbiAgICAgIGFsaWFzTGltcGlvICs9IGAgLSAke3JlZ2lzdHJvLmlkU2VjfWA7XG4gICAgfVxuICAgIGNvbnN0IG51ZXZvQWxpYXMgPSBgUlQgLSAke2FsaWFzTGltcGlvfWA7XG4gIFxuICAgIC8vIFNpIHlhIGV4aXN0ZW4gYWxpYXNlcyBlbiBlbCByZWdpc3Rybywgc2UgY29uc2VydmFuOyBzaSBubywgc2UgaW5pY2lhbGl6YSBlbCBhcnJlZ2xvLlxuICAgIGlmICghQXJyYXkuaXNBcnJheShyZWdpc3Ryby5hbGlhc2VzKSkge1xuICAgICAgcmVnaXN0cm8uYWxpYXNlcyA9IFtdO1xuICAgIH1cbiAgXG4gICAgLy8gRWxpbWluYXIgZGUgcmVnaXN0cm8uYWxpYXNlcyBjdWFscXVpZXIgYWxpYXMgcXVlIHNlYSBkZWwgbWlzbW8gYWxpYXNCYXNlIGNvbiBzZXNpXHUwMEYzbiBhbnRlcmlvclxuICAgIC8vIChwb3IgZWplbXBsbywgXCJSVCAtIFBHVEQgLSA0NyAtIDJcIikgcGFyYSBldml0YXIgZHVwbGljYWRvcyxcbiAgICAvLyBkZWphbmRvIFx1MDBGQW5pY2FtZW50ZSBhcXVlbGxvcyBxdWUgbm8gY29ycmVzcG9uZGFuIGFsIG1pc21vIHBhdHJcdTAwRjNuLlxuICAgIGlmIChyZWdpc3Ryby5pZFNlYyA+IDEpIHtcbiAgICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSByZWdpc3Ryby5hbGlhc2VzLmZpbHRlcihhID0+IHtcbiAgICAgICAgLy8gU2kgZWwgYWxpYXMgaW5pY2lhIGNvbiBcIlJUIC0ge2FsaWFzQmFzZX0gLSBcIiB5IG5vIGVzIGVsIG51ZXZvQWxpYXMsIGxvIGVsaW1pbmFtb3MuXG4gICAgICAgIGlmIChhLnN0YXJ0c1dpdGgoYFJUIC0gJHthbGlhc0Jhc2V9IC0gYCkgJiYgYSAhPT0gbnVldm9BbGlhcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXG4gICAgLy8gQWdyZWdhciBlbCBhbGlhcyBwYXJhIGxhIHNlc2lcdTAwRjNuIGFjdHVhbCBzaSBubyBlc3RcdTAwRTEgeWEgcHJlc2VudGUsIGNvbG9jXHUwMEUxbmRvbG8gYWwgaW5pY2lvLlxuICAgIGlmICghcmVnaXN0cm8uYWxpYXNlcy5pbmNsdWRlcyhudWV2b0FsaWFzKSkge1xuICAgICAgcmVnaXN0cm8uYWxpYXNlcy51bnNoaWZ0KG51ZXZvQWxpYXMpO1xuICAgIH1cbiAgXG4gICAgLy8gU2kgZWwgdGlwbyBkZSByZWdpc3RybyBlcyBcIk5vdGFcIiwgaW50ZW50YXIgb2J0ZW5lciBsb3MgYWxpYXNlcyBkZWwgYXJjaGl2byBhY3Rpdm9cbiAgICAvLyB5IGFncmVnYXJsb3MgKGNvbiBwcmVmaWpvKSBzaW4gZHVwbGljYXIgbG8gcXVlIHlhIGV4aXN0ZS5cbiAgICBpZiAocmVnaXN0cm8udGlwb1JlZ2lzdHJvID09PSBcIk5vdGFcIikge1xuICAgICAgY29uc3QgYXJjaGl2b0FjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgaWYgKGFyY2hpdm9BY3Rpdm8pIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdG9zQWN0aXZvID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm9BY3Rpdm8pO1xuICAgICAgICBjb25zdCBhbGlhc2VzQWN0aXZvID1cbiAgICAgICAgICBtZXRhZGF0b3NBY3Rpdm8gJiYgbWV0YWRhdG9zQWN0aXZvLmZyb250bWF0dGVyXG4gICAgICAgICAgICA/IG1ldGFkYXRvc0FjdGl2by5mcm9udG1hdHRlci5hbGlhc2VzXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGFsaWFzZXNBY3Rpdm8pIHtcbiAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsQWxpYXNlcyA9IEFycmF5LmlzQXJyYXkoYWxpYXNlc0FjdGl2bylcbiAgICAgICAgICAgID8gYWxpYXNlc0FjdGl2b1xuICAgICAgICAgICAgOiBbYWxpYXNlc0FjdGl2b107XG4gICAgICAgICAgYWRkaXRpb25hbEFsaWFzZXMuZm9yRWFjaCgoYWxpYXMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzQ29uUHJlZmlqbyA9IGBSVCAtICR7YWxpYXN9YDtcbiAgICAgICAgICAgIGlmICghcmVnaXN0cm8uYWxpYXNlcy5pbmNsdWRlcyhhbGlhc0NvblByZWZpam8pKSB7XG4gICAgICAgICAgICAgIHJlZ2lzdHJvLmFsaWFzZXMucHVzaChhbGlhc0NvblByZWZpam8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBcbiAgICAvLyBBc2lnbmEgZWwgbm9tYnJlIGJhc2UgKHJ1dGEpIHBhcmEgZWwgYXJjaGl2b1xuICAgIHJlZ2lzdHJvLm5hbWVGaWxlID0gbm9tYnJlQmFzZTtcbiAgfVxuXG4vKipcbiAqIENhbGN1bGEgZWwgXHUwMEZBbHRpbW8gaWRTZWMgdXNhZG8gcGFyYSByZWdpc3Ryb3MgY29uIGVsIG1pc21vIHRcdTAwRUR0dWxvIGVuIGxhIGNhcnBldGEgZXNwZWNpZmljYWRhLlxuICovXG5hc3luYyBjYWxjdWxhclVsdGltb0lkU2VjKHRpdHVsbzogc3RyaW5nLCBmb2xkZXI6IHN0cmluZywgYXBwOiBBcHApOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBhcmNoaXZvcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xuICBsZXQgbWF4ID0gMDtcbiAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zKSB7XG4gICAgaWYgKGFyY2hpdm8ucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgIGNvbnN0IG1ldGFkYXRvcyA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgIGlmIChtZXRhZGF0b3MgJiYgbWV0YWRhdG9zLmZyb250bWF0dGVyICYmIG1ldGFkYXRvcy5mcm9udG1hdHRlci50aXR1bG8gPT09IHRpdHVsbykge1xuICAgICAgICBjb25zdCBpZFNlYyA9IG1ldGFkYXRvcy5mcm9udG1hdHRlci5pZFNlYztcbiAgICAgICAgaWYgKGlkU2VjICE9PSB1bmRlZmluZWQgJiYgaWRTZWMgPiBtYXgpIHtcbiAgICAgICAgICBtYXggPSBpZFNlYztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG4gIGxpbXBpYXJBbGlhcyh0aXR1bG86IHN0cmluZykge1xuICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby5cbiAgICBjb25zdCBjYXJhY3RlcmVzTm9QZXJtaXRpZG9zID0gL1s8PjpcIlxcL1xcXFx8PypcXHgwMC1cXHgxRl0vZztcbiAgICBsZXQgdGl0dWxvTGltcGlvID0gdGl0dWxvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW8gcGFyYSBldml0YXIgbm9tYnJlcyBkZSBhcmNoaXZvIGV4Y2VzaXZhbWVudGUgbGFyZ29zLlxuICAgIHRpdHVsb0xpbXBpbyA9IHRpdHVsb0xpbXBpby5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblxuICAgIHJldHVybiB0aXR1bG9MaW1waW8udHJpbSgpO1xuICB9XG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXMvUmVnaXN0cm9UaWVtcG8udHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9JbnRlcmZhY2VzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ0OjMwXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgUlRCYXNlIH0gZnJvbSBcIi4vUlRCYXNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVnaXN0cm9UaWVtcG8gZXh0ZW5kcyBSVEJhc2Uge1xuICAgIHJldG9tYXJSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTxSZWdpc3RybyB8IG51bGw+O1xuXG4gICAgcmV0b21hclRhcmVhKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgICBkZXRhbGxlUmVnaXN0cm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgZGV0YWxsZVJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgICBkZXRhbGxlUmVnaXN0cm8oKTogUHJvbWlzZTx2b2lkPjtcbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlc1xuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0NDo1M1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IFJUQmFzZSB9IGZyb20gXCIuL1JUQmFzZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc2lvbkxlY3R1cmEgZXh0ZW5kcyBSVEJhc2Uge1xuICBcbmdldElkKCk6IFByb21pc2U8bnVtYmVyPjtcbmdldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPjtcbmdldFRpdHVsbygpOiBQcm9taXNlPHN0cmluZz47XG5nZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz47XG5nZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+O1xuZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPjtcbmdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz47XG5nZXROb3RhKCk6IFByb21pc2U8YW55Pjtcbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL1Nlc2lvbkxlY3R1cmEudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6MzdcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTZXNpb25MZWN0dXJhIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhJztcbmltcG9ydCB7IFJUQmFzZSB9IGZyb20gJy4vUlRCYXNlJztcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIFNlc2lvbkxlY3R1cmEgZXh0ZW5kcyBSVEJhc2UgaW1wbGVtZW50cyBTZXNpb25MZWN0dXJhe1xuICAgIHByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByb3RlY3RlZCBub3RhOiBvYmplY3Q7XG4gICAgcHJvdGVjdGVkIGluZm9TdWJzaXN0ZW1hOiBhbnk7IFxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFBsdWdpbiwgaW5mb1N1YnNpc3RlbWE6IGFueSkge1xuICAgICAgc3VwZXIocGx1Z2luKTtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgdGhpcy50cCA9IHBsdWdpbi50cDtcbiAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYSA9IGluZm9TdWJzaXN0ZW1hO1xuICAgIH1cblxuICAgIGFzeW5jIGdldElkKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGxldCBtYXhJZCA9IDA7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubm90YS5pZCA9ICBtYXhJZCArIDE7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IGFjdGl2ZSBub3RlXG4gICAgICAgIGNvbnN0IGN1cnJlbnROb3RlUGF0aCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpPy5wYXRoO1xuICAgICAgICBjb25zdCBjdXJyZW50Tm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgIGlmIChjdXJyZW50Tm90YSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9ucyA9IHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZmlsdGVyKChmaWxlOiBhbnkpID0+IGZpbGUucGF0aCAhPT0gY3VycmVudE5vdGVQYXRoICYmIGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI/LnRpdHVsbyA9PT0gY3VycmVudE5vdGEudGl0dWxvKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Nlc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRTZXNzaW9ucyA9IGV4aXN0aW5nU2Vzc2lvbnMuc29ydCgoYTogYW55LCBCOiBhbnkpID0+IHBhcnNlSW50KEIucGF0aC5tYXRjaCgvWzAtOV0rLylbMF0pIC0gcGFyc2VJbnQoQS5wYXRoLm1hdGNoKC9bMC05XSsvKVswXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RTTCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShzb3J0ZWRTZXNzaW9uc1swXSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5pZFNlYyA9IHBhcnNlSW50KGxhc3RTTC5pZFNlYykgKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSBsYXN0U0wucGFnRmluO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuaWRTZWMgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ub3RhLmlkU2VjID0gMTtcbiAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuaWQ7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBhcmFtZXRyb3NMaWJybygpIHtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudEZpbGUgfHwgIWN1cnJlbnRGaWxlLnBhdGgpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFDYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlO1xuICAgICAgICAgICAgY29uc3QgZmlsZUNhY2hlID0gbWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudEZpbGUpO1xuICAgICAgICBpZiAoIWZpbGVDYWNoZSB8fCAhZmlsZUNhY2hlLmZyb250bWF0dGVyIHx8IGZpbGVDYWNoZS5mcm9udG1hdHRlci50eXBlICE9PSAnTEInKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMYSBub3RhIGFjdGl2YSBkZWJlIHNlciBkZSB0aXBvIExpYnJvIGVuIGxhIEJpYmxvdGVjYSBwYXJhIHBvZGVyIGNyZWFyIHVuYSBzZXNpXHUwMEYzbiBkZSBMZWN0dXJhLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gZmlsZUNhY2hlLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgdGhpcy5ub3RhWydwYWdpbmFzJ10gPSBmcm9udE1hdHRlci5wYWdpbmFzO1xuICAgICAgICAgICAgdGhpcy5ub3RhWyd0aXR1bG8nXSA9IGZyb250TWF0dGVyLnRpdHVsbztcbiAgICAgICAgICAgIHRoaXMubm90YVsncGFsYWJyYXNQb3JIb2phJ10gPSBmcm9udE1hdHRlci5wYWxhYnJhc1BvckhvamE7XG4gICAgICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpOiBQcm9taXNlPHsgc2lBc3VudG86IGJvb2xlYW4sIG5vbWJyZTogc3RyaW5nW10gfT4geyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcbiAgICAgICAgbGV0IHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBzaUFzdW50byA9IHRydWU7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICAgICAgfVxuXG4gICAgICAgXG5cblxuXG4gICAgXG4gICBcblxuICB9XG5cbiAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGBTTCAtICR7dGhpcy5ub3RhLmlkU2VjfSAvICR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbn1cblxuYXN5bmMgZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBsZXQgZmVjaGFBY3R1YWwgPSBEYXRlVGltZS5ub3coKTtcbiAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnNldExvY2FsZSgnZXMnKTtcbiAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nKTtcbiAgICB0aGlzLm5vdGEuZmVjaGEgPSBmZWNoYUFjdHVhbDtcbiAgICByZXR1cm4gZmVjaGFBY3R1YWw7XG59XG5cbmFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGRlYnVnZ2VyO1xuICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYDtcbiAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbiAgXG5cblxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvUlRCYXNlLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQzOjIwXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgdXRpbHNBUEkgfSBmcm9tICcuL3V0aWxzQVBJJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBQbHVnaW4gc2kgbm8gZXN0XHUwMEUxIGltcG9ydGFkb1xuaW1wb3J0IHsgU2VzaW9uTGVjdHVyYSB9IGZyb20gJy4uL0ludGVyZmFjZXMvU2VzaW9uTGVjdHVyYSc7XG5cbmV4cG9ydCBjbGFzcyBSVEJhc2Uge1xuICAgIHByb3RlY3RlZCB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJvdGVjdGVkIG5vdGE6IG9iamVjdDtcbiAgICBwcm90ZWN0ZWQgaW5mb1N1YnNpc3RlbWE6IGFueTsgLy8gQ2FtYmlcdTAwRTkgZWwgdGlwbyBhIGFueSBwYXJhIHBlcm1pdGlyIGN1YWxxdWllciBvYmpldG9cbiAgICBwcm90ZWN0ZWQgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJvdGVjdGVkIHRwOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgICB0aGlzLnRwID0gcGx1Z2luLnRwO1xuICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0ge307XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKGluZm9TdWJzaXN0ZW1hOiB7IGZvbGRlcjogc3RyaW5nOyBpbmRpY2U6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB9LCBjYW1wb3M6IGFueSk6IFByb21pc2U8YW55IHwgbnVsbD47XG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKCk6IFByb21pc2U8YW55IHwgbnVsbD47XG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKGluZm9TdWJzaXN0ZW1hPzogeyBmb2xkZXI6IHN0cmluZzsgaW5kaWNlOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgfSwgY2FtcG9zPzogYW55KTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAodHlwZW9mIGluZm9TdWJzaXN0ZW1hID09PSAnb2JqZWN0JyAmJiBpbmZvU3Vic2lzdGVtYSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCFjYW1wb3MgfHwgIUFycmF5LmlzQXJyYXkoY2FtcG9zKSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbXBvcyBkZWJlIHNlciB1biBhcnJheSBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgICAgIGxldCBub3RhO1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9TdWJzaXN0ZW1hLCBpbmZvU3Vic2lzdGVtYSk7XG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIGlmICh0aGlzLmluZm9TdWJzaXN0ZW1hLmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmZvbGRlcl07XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYS5pbmRpY2UgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tpbmZvU3Vic2lzdGVtYS5pbmRpY2VdO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ub3RhLCBpbmZvU3Vic2lzdGVtYSk7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBsZXQgZmllbGRIYW5kbGVyOiBTZXNpb25MZWN0dXJhO1xuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiU0xcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgU2VzaW9uTGVjdHVyYSA9IGF3YWl0IGltcG9ydCgnLi9TZXNpb25MZWN0dXJhJyk7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBTZXNpb25MZWN0dXJhLlNlc2lvbkxlY3R1cmEodGhpcy5wbHVnaW4sIHRoaXMuaW5mb1N1YnNpc3RlbWEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHNlIGhhIGRlZmluaWRvIHVuIG1hbmVqYWRvciBkZSBjYW1wb3MgcGFyYSBlbCB0aXBvICR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfWApO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gYGdldCR7Y2FtcG8uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1wby5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkSGFuZGxlcltmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFbY2FtcG9dID0gYXdhaXQgZmllbGRIYW5kbGVyW2Z1bmN0aW9uTmFtZV0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGEgPSBhd2FpdCBmaWVsZEhhbmRsZXIuZ2V0Tm90YSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbm90YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiB0aGlzLm5vdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YVtrZXldID0gbm90YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYExhIGZ1bmNpXHUwMEYzbiAke2Z1bmN0aW9uTmFtZX0gbm8gZXN0XHUwMEUxIGRlZmluaWRhLmApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIG9yaWdpbmFsIGRlIGluaWNpYXJSZWdpc3Ryb1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuY3JlYXJPYmpldG9SZWdpc3Rybyh0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS52ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3Ryby5kZXRlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RybzsgLy8gRGV2dWVsdmUgZWwgcmVnaXN0cm8gYWN0dWFsIHkgZGV0aWVuZSBsYSBlamVjdWNpXHUwMEYzbiBhcXVcdTAwRURcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS5kZWZpbmlyVGlwb1JlZ2lzdHJvKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICAgICAgICAgIGlmIChyZWdpc3Ryby5kZXRlbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RybzsgLy8gRGV2dWVsdmUgZWwgcmVnaXN0cm8gYWN0dWFsIHkgZGV0aWVuZSBsYSBlamVjdWNpXHUwMEYzbiBhcXVcdTAwRURcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS5jb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29icmVjYXJnYSBkZSBtXHUwMEU5dG9kbyBwYXJhIGxvcyBkaWZlcmVudGVzIHRpcG9zIGRlIGVudHJhZGFcbiAgICBhc3luYyBjZXJyYXJSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBhc3luYyBjZXJyYXJSZWdpc3RybyhmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD47XG4gICAgYXN5bmMgY2VycmFyUmVnaXN0cm8oKTogUHJvbWlzZTx2b2lkPjtcbiAgICBhc3luYyBjZXJyYXJSZWdpc3RybyhyZWdpc3Rybz86IG51bWJlciB8IHN0cmluZyB8IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICAgICAgaWYgKHR5cGVvZiByZWdpc3RybyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJlZ2lzdHJvID0gcGFyc2VJbnQocmVnaXN0cm8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gblx1MDBGQW1lcm8gLT4gQ3VhbmRvIGxsZWdhIGRlbCBib3RcdTAwRjNuIGRlIGxhIHRhYmxhIGRlIHJlZ2lzdHJvcyBkZWwgZFx1MDBFRGEuXG4gICAgICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBsZXQgaW5mb05vdGE7XG4gICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmlkID09PSByZWdpc3Rybykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb05vdGEgPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjYW1wb3MgPSBbXCJmZWNoYVwiLCBcImhvcmFGaW5hbFwiLCBcInRpZW1wb1RyYWJhamFkb1wiXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hcmNoaXZhck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgICAgICAgICBsZXQgdGV4dG9SZXN1bHRhZG8gPSBPYmplY3QuZW50cmllcyhyZXN1bHRhZG8pLm1hcCgoW3Byb3BpZWRhZCwgdmFsb3JdKSA9PiBgJHtwcm9waWVkYWR9OiAke3ZhbG9yfWApLmpvaW4oJywgJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBUYXJlYSBjZXJyYWRhLiBDYW1wb3MgYWN0dWFsaXphZG9zOiAke3RleHRvUmVzdWx0YWRvfWApO1xuICAgICAgICB9XG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gVEZpbGVcbiAgICAgICAgZWxzZSBpZiAocmVnaXN0cm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUocmVnaXN0cm8pPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGxldCBpbmZvTm90YSA9IHsgZmlsZTogcmVnaXN0cm8gfTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGxldCBjYW1wb3MgPSBbXCJmZWNoYVwiLCBcImhvcmFGaW5hbFwiLCBcInRpZW1wb1RyYWJhamFkb1wiXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hcmNoaXZhck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgICAgICAgICBsZXQgdGV4dG9SZXN1bHRhZG8gPSBPYmplY3QuZW50cmllcyhyZXN1bHRhZG8pLm1hcCgoW3Byb3BpZWRhZCwgdmFsb3JdKSA9PiBgJHtwcm9waWVkYWR9OiAke3ZhbG9yfWApLmpvaW4oJywgJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBUYXJlYSBjZXJyYWRhLiBDYW1wb3MgYWN0dWFsaXphZG9zOiAke3RleHRvUmVzdWx0YWRvfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBjdWFuZG8gbm8gc2UgcHJvcG9yY2lvbmEgYXJndW1lbnRvcywgc2UgYnVzY2EgbGEgdGFyZWEgYWN0aXZhIHkgc2UgY2llcnJhLlxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwKTtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBsZXQgaW5mb05vdGEgPSB7IGZpbGU6IHJlZ2lzdHJvIH07XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIiwgXCJob3JhRmluYWxcIiwgXCJ0aWVtcG9UcmFiYWphZG9cIl07XG4gICAgICAgICAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYXJjaGl2YXJOb3RhKGluZm9Ob3RhLCBjYW1wb3MpO1xuICAgICAgICAgICAgbGV0IHRleHRvUmVzdWx0YWRvID0gT2JqZWN0LmVudHJpZXMocmVzdWx0YWRvKS5tYXAoKFtwcm9waWVkYWQsIHZhbG9yXSkgPT4gYCR7cHJvcGllZGFkfTogJHt2YWxvcn1gKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFyZWEgY2VycmFkYS4gQ2FtcG9zIGFjdHVhbGl6YWRvczogJHt0ZXh0b1Jlc3VsdGFkb31gKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQzOjA5XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgUmVnaXN0cm9UaWVtcG8gfSBmcm9tICcuLi9JbnRlcmZhY2VzL1JlZ2lzdHJvVGllbXBvJztcbmltcG9ydCB7IFJUQmFzZSB9IGZyb20gJy4vUlRCYXNlJztcblxuZXhwb3J0IGNsYXNzIHJlZ2lzdHJvVGllbXBvQVBJIGV4dGVuZHMgUlRCYXNlIGltcGxlbWVudHMgUmVnaXN0cm9UaWVtcG97XG4gICAgcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICBzdXBlcihwbHVnaW4pO1xuICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICB0aGlzLnV0aWxzQXBpID0gbmV3IHV0aWxzQVBJKHBsdWdpbik7XG4gICAgICB0aGlzLnRwID0gcGx1Z2luLnRwO1xuICAgIH1cbiAgICBcbiAgICAvLyBJbnZvY2FkbyBkZXNkZSBlbCB0ZW1wbGF0ZSBkZSB0ZW1wbGF0ZXIgUGFzbyAzIGRlIDNcblxuYXN5bmMgcmV0b21hclJlZ2lzdHJvKGlkOiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgdHJ5IHtcbiAgICAgIC8vIDEuIENyZWFyIGVsIG9iamV0byByZWdpc3RybyBiYXNlXG4gICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuY3JlYXJPYmpldG9SZWdpc3Rybyh0aGlzLnBsdWdpbik7XG4gIFxuICAgICAgLy8gMi4gVmVyaWZpY2FyIHNpIGhheSByZWdpc3RybyBlbiBjdXJzb1xuICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS52ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICAgICAgfVxuICBcbiAgICAgIC8vIDMuIEJ1c2NhciBsYSBub3RhIGFudGlndWEgZW4gbGEgY2FycGV0YSBjb25maWd1cmFkYVxuICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgbGV0IHJlZ2lzdHJvQW50aWd1bzogeyBmaWxlOiBURmlsZTsgZnJvbnRtYXR0ZXI6IGFueSB9IHwgdW5kZWZpbmVkO1xuICBcbiAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgaWYgKG1ldGFkYXRhPy5pZCA9PT0gcGFyc2VJbnQoaWQgYXMgc3RyaW5nKSkge1xuICAgICAgICAgICAgcmVnaXN0cm9BbnRpZ3VvID0geyBmaWxlLCBmcm9udG1hdHRlcjogbWV0YWRhdGEgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIGlmICghcmVnaXN0cm9BbnRpZ3VvKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYE5vIHNlIGVuY29udHJcdTAwRjMgZWwgcmVnaXN0cm8gYW50aWd1byBjb24gSUQ6ICR7aWR9YCk7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICByZXR1cm4gcmVnaXN0cm87XG4gICAgICB9XG4gIFxuICAgICAgLy8gNC4gQ29waWFyIGNhbXBvcyByZWxldmFudGVzIHkgbm9ybWFsaXphciBjb3JjaGV0ZXNcbiAgICAgIGNvbnN0IGZtID0gcmVnaXN0cm9BbnRpZ3VvLmZyb250bWF0dGVyO1xuICAgICAgcmVnaXN0cm8udGl0dWxvID0gZm0udGl0dWxvID8/IFwiU2luIFRpdHVsb1wiO1xuICAgICAgcmVnaXN0cm8uYXN1bnRvUmV0b21hZG8gPSBmbS5hc3VudG8gPz8gbnVsbDtcbiAgICAgIC8vIEVqZW1wbG86IGluY3JlbWVudGEgaWRTZWMgcGFyYSBpbmRpY2FyIG51ZXZhIHNlc2lcdTAwRjNuXG4gICAgICByZWdpc3Ryby5pZFNlYyA9IChmbS5pZFNlYyA/PyAwKSArIDE7XG4gIFxuICAgICAgLy8gLS0tLSBGdW5jaW9uZXMgcGFyYSBsaW1waWFyIGNvcmNoZXRlcyAtLS0tXG4gICAgICBmdW5jdGlvbiBxdWl0YXJEb2JsZUNvcmNoZXRlKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIGlmIChzdHIuc3RhcnRzV2l0aChcIltbXCIpICYmIHN0ci5lbmRzV2l0aChcIl1dXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIHN0ci5zbGljZSgyLCAtMik7IC8vIEVsaW1pbmEgW1sgeSBdXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgICB9XG4gIFxuICAgICAgZnVuY3Rpb24gbm9ybWFsaXphckFycmF5KGFycjogYW55W10pIHtcbiAgICAgICAgcmV0dXJuIGFyci5tYXAoaXRlbSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gcXVpdGFyRG9ibGVDb3JjaGV0ZShpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgXG4gICAgICAvLyBBc2lnbmFyIHkgbm9ybWFsaXphciBjYWRhIGNhbXBvXG4gICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICBpZiAodHlwZW9mIGZtLmFyZWFWaWRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gcXVpdGFyRG9ibGVDb3JjaGV0ZShmbS5hcmVhVmlkYSk7XG4gICAgICB9XG4gIFxuICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSBbXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZtLmFyZWFJbnRlcmVzKSkge1xuICAgICAgICByZWdpc3Ryby5hcmVhSW50ZXJlcyA9IG5vcm1hbGl6YXJBcnJheShmbS5hcmVhSW50ZXJlcyk7XG4gICAgICB9XG4gIFxuICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBbXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnByb3llY3RvR1REKSkge1xuICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vcm1hbGl6YXJBcnJheShmbS5wcm95ZWN0b0dURCk7XG4gICAgICB9XG4gIFxuICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gW107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmbS5wcm95ZWN0b1EpKSB7XG4gICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vcm1hbGl6YXJBcnJheShmbS5wcm95ZWN0b1EpO1xuICAgICAgfVxuICBcbiAgICAgIC8vICoqQ29waWFtb3MgbG9zIGFsaWFzZXMgYW50aWd1b3MgdGFsIGN1YWwsIHNpbiBwZXJkZXJsb3MqKlxuICAgICAgcmVnaXN0cm8uYWxpYXNlcyA9IFtdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm0uYWxpYXNlcykpIHtcbiAgICAgICAgcmVnaXN0cm8uYWxpYXNlcyA9IG5vcm1hbGl6YXJBcnJheShmbS5hbGlhc2VzKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyA1LiBDb25zdHJ1aXIgbm9tYnJlIHkgYWxpYXNcbiAgICAgIC8vICAgIElNUE9SVEFOVEU6IGNvbnN0cnVpck5vbWJyZXlBbGlhcyBOTyBkZWJlIHNvYnJlc2NyaWJpciBwb3IgY29tcGxldG8gcmVnaXN0cm8uYWxpYXNlcyxcbiAgICAgIC8vICAgIHNpbm8gYVx1MDBGMWFkaXIgbyBhanVzdGFyIGVsIGFsaWFzIHBhcmEgZXN0YSBudWV2YSBzZXNpXHUwMEYzbi5cbiAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkuY29uc3RydWlyTm9tYnJleUFsaWFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICBcbiAgICAgIC8vIDYuIFJldG9ybmFyIGVsIG9iamV0byByZWdpc3RybyBhbCB0ZW1wbGF0ZVxuICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8gYWwgcmV0b21hci5cIik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvLyBJbnZvY2FkbyBwYXJhIGNyZWFyIGVsIHRlbXBsYXRlIGRlIFJldG9tYXIgUGFzbyAxIGRlIDNcbiAgYXN5bmMgcmV0b21hclRhcmVhKGlkKSB7IFxuICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHJlZW1wbGF6YXIgJ3J1dGEvYWwvYXJjaGl2by5tZCcgY29uIGxhIHJ1dGEgZXhhY3RhIGRlbCBhcmNoaXZvIHF1ZSBkZXNlYXMgb2J0ZW5lclxuICAgIGRlYnVnZ2VyO1xuICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX1JlZ2lzdHJvVGllbXBvYF19L1BsdCAtIFJlZ2lzdHJvVGllbXBvLm1kYDtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgfVxuICAgIGNvbnN0IGZpbGVuYW1lID0gXCJSZXRvbWFyIFwiICsgaWQ7XG4gICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgIGxldCBjcmVhck5vdGEgPSB0aGlzLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpXG4gICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICB9XG5cbiAgLy8gU29icmVjYXJnYSBkZSBtXHUwMEU5dG9kbyBwYXJhIGxvcyBkaWZlcmVudGVzIHRpcG9zIGRlIGVudHJhZGFcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICBhc3luYyBkZXRhbGxlUmVnaXN0cm8oZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+O1xuICBhc3luYyBkZXRhbGxlUmVnaXN0cm8oKTogUHJvbWlzZTx2b2lkPjtcbiAgLy8gSW1wbGVtZW50YWNpXHUwMEYzbiBkZWwgbVx1MDBFOXRvZG8gY29uIHVuaVx1MDBGM24gZGUgdGlwb3MgcGFyYSBlbCBwYXJcdTAwRTFtZXRybyBpZFxuICBhc3luYyBkZXRhbGxlUmVnaXN0cm8ocmVnaXN0cm8/OiBudW1iZXIgfCBzdHJpbmcgfCBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICBsZXQgaW5mb05vdGE7XG4gICAgZGVidWdnZXI7XG4gICAgaWYgKHR5cGVvZiByZWdpc3RybyA9PT0gJ3N0cmluZycpIHtcbiAgICByZWdpc3RybyA9IHBhcnNlSW50KHJlZ2lzdHJvKTtcbiAgICB9XG4gICAgLy8gTFx1MDBGM2dpY2Egc2kgJ2lkJyBlcyB1biBuXHUwMEZBbWVybyAtPiBDdWFuZG8gbGxlZ2EgZGVsIGJvdG9uIGRlIGxhIHRhYmxhIGRlIHJlZ2lzdHJvcyBkZWwgZFx1MDBFRGEuXG4gICAgaWYgKHR5cGVvZiByZWdpc3RybyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmlkID09PSByZWdpc3Rybykge1xuICAgICAgICAgICAgICAgICAgICBpbmZvTm90YSA9IHsgZmlsZSB9O1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBMXHUwMEYzZ2ljYSBzaSAnaWQnIGVzIHVuIFRGaWxlXG4gICAgZWxzZSBpZiAocmVnaXN0cm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUocmVnaXN0cm8pPy5mcm9udG1hdHRlcjtcbiAgICAgIGluZm9Ob3RhID0ge2ZpbGU6IHJlZ2lzdHJvfTtcbiAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIGN1YW5kbyBubyBzZSBwcm9wb3JjaW9uYSBhcmd1bWVudG9zLCBzZSBidXNjYSBsYSB0YXJlYSBhY3RpdmEgeSBzZSBjaWVycmEuXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcCk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGluZm9Ob3RhID0ge2ZpbGU6IHJlZ2lzdHJvfTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpOyBcbiAgICB9XG4gICAgbGV0IGNhbXBvcyA9IFtcImRlc2NyaXBjaW9uX1JlZ2lzdHJvVGllbXBvXCJdO1xuICAgIGRlYnVnZ2VyO1xuICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hY3R1YWxpemFyTm90YShpbmZvTm90YSwgY2FtcG9zKTtcbiAgICBsZXQgdGV4dG9SZXN1bHRhZG8gPSBPYmplY3QuZW50cmllcyhyZXN1bHRhZG8pLm1hcCgoW3Byb3BpZWRhZCwgdmFsb3JdKSA9PiBgJHtwcm9waWVkYWR9OiAke3ZhbG9yfWApLmpvaW4oJywgJyk7XG4gICAgbmV3IE5vdGljZShgRGVzY3JpcGNpXHUwMEYzbiBhY3R1YWxpemFkYTogJHt0ZXh0b1Jlc3VsdGFkb31gKTtcbiAgfVxuXG4gIH1cbiAgIiwgIi8qIGZpbGVMb2NhdGlvbjogc3JjL21haW4udHMgKi9cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUGx1Z2luTWFpblNldHRpbmdzVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NUYWJcIjtcbmltcG9ydCB7IE1vZHVsb0Jhc2UgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXhcIjtcbmltcG9ydCB7IGFjdGl2YXRlTW9kdWxvQnVzcXVlZGFBdmFuemFkYSB9IGZyb20gXCIuL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL2FjdGl2YWRvcmVzXCI7XG5pbXBvcnQgeyBTdGF0dXNCYXJFeHRlbnNpb24gfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0FsaWFzU3RhdHVzQmFyL3N0YXR1c0JhclwiO1xuaW1wb3J0IHsgTW9kdWxvUmVnaXN0cm9UaWVtcG8gfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4XCI7XG5pbXBvcnQgdHlwZSB7IFBsdWdpbk1haW5TZXR0aW5ncyB9IGZyb20gXCIuL2ludGVyZmFjZXMvcGx1Z2luTWFpblNldHRpbmdzXCI7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSBcIi4vZGVmYXVsdHMvZGVmYXVsdFNldHRpbmdzXCI7XG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJXCI7XG5pbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSVwiO1xuaW1wb3J0IHsgYWRkT25zQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvYWRkT25zQVBJXCI7XG5pbXBvcnQgeyBZQU1MVXBkYXRlckFQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJXCI7XG5pbXBvcnQgeyBtZW51SG95QVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudURpYXJpb0FQSVwiO1xuaW1wb3J0IHsgbWVudVNlbWFuYWxBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51U2VtYW5hbEFQSVwiO1xuaW1wb3J0IHsgVmlzdGFSZWdpc3Ryb0FjdGl2byB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdmlld3MvdmlzdGFSVEFjdGl2b1wiO1xuaW1wb3J0IHsgTW9kdWxvR1REIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9HVERcIjtcbi8vaW1wb3J0IHsgTW9kdWxvVGVyY2Vyb3MgfSBmcm9tICcuL21vZHVsZXMvbW9kdWxvX1RlcmNlcm9zJztcbmltcG9ydCB7IGluZ3Jlc2FyQmFuZGVqYUVudHJhZGEgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0dURC9pbmJveFwiO1xuaW1wb3J0IHsgc3Vic2lzdGVtYXNBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdWJzaXN0ZW1hc0FQSVwiO1xuaW1wb3J0IHsgVmlzdGFSZXN1bWVuU2VtYW5hbCB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZXN1bWVuU2VtYW5hbFwiO1xuaW1wb3J0IHsgVmlzdGFSZWdpc3Ryb0RpYXJpbyB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZWdpc3Ryb0RpYXJpb1wiO1xuaW1wb3J0IEdQVGhvcmEgZnJvbSBcIi4vbW9kdWxlcy9HUFRob3JhL0dQVGhvcmFcIjtcbmltcG9ydCB7IGxpYnJvc0FQSSB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvTGlicm9zL2xpYnJvc0FQSVwiO1xuaW1wb3J0IHsgdXBkYXRlU2VzaW9uTGVjdHVyYSB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3VwZGF0ZVNlc2lvbkxlY3R1cmFcIjtcbmltcG9ydCB7IFRhcmVhc0FQSSB9IGZyb20gXCIuL21vZHVsZXMvdGFza01hbmFnZXIvYXBpL3RhcmVhc0FQSVwiO1xuaW1wb3J0IHsgTW9kdWxvVGFiVGl0bGUgfSBmcm9tICcuL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUnO1xuaW1wb3J0IHsgTW9kdWxvVGFza01hbmFnZXIgfSBmcm9tICcuL21vZHVsZXMvdGFza01hbmFnZXInO1xuaW1wb3J0IHsgTW9kdWxvRGF0YXZpZXdRdWVyaWVzIH0gZnJvbSAnLi9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hbmFnZW1lbnRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogUGx1Z2luTWFpblNldHRpbmdzIHwgdW5kZWZpbmVkO1xuICAvLyBEZWNsYXJhIHVuYSBwcm9waWVkYWQgYHNldHRpbmdzYCBwYXJhIGFsbWFjZW5hciBsYSBjb25maWd1cmFjaVx1MDBGM24gZGVsIHBsdWdpbi5cbiAgc3RhdHVzQmFyRXh0ZW5zaW9uOiBTdGF0dXNCYXJFeHRlbnNpb24gfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvUmVnaXN0cm9UaWVtcG86IE1vZHVsb1JlZ2lzdHJvVGllbXBvIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb0Jhc2U6IE1vZHVsb0Jhc2UgfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvR1REOiBNb2R1bG9HVEQgfCBudWxsID0gbnVsbDtcbiAgLy9tb2R1bG9UZXJjZXJvczogTW9kdWxvVGVyY2Vyb3MgfCBudWxsID0gbnVsbDtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNSVDogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNNQjogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQ6IHN0cmluZ1tdID0gW107XG4gIHJlZ2lzdGVyZWRDb21tYW5kSWRzX1RlcmNlcm9zOiBzdHJpbmdbXSA9IFtdO1xuICByaWJib25CdXR0b25SVDogUmV0dXJuVHlwZTxQbHVnaW5bXCJhZGRSaWJib25JY29uXCJdPiB8IG51bGwgPSBudWxsO1xuICBhcHA6IGFueTtcbiAgcmVnaXN0cm9UaWVtcG9BUEk6IHJlZ2lzdHJvVGllbXBvQVBJIHwgdW5kZWZpbmVkO1xuICBzdGFydGVyQVBJOiBzdGFydGVyQVBJIHwgdW5kZWZpbmVkO1xuICBhZGRPbnNBUEk6IGFkZE9uc0FQSSB8IHVuZGVmaW5lZDtcbiAgbWVudUhveUFQSTogbWVudUhveUFQSSB8IHVuZGVmaW5lZDtcbiAgbWVudVNlbWFuYWxBUEk6IG1lbnVTZW1hbmFsQVBJIHwgdW5kZWZpbmVkO1xuICBzdWJzaXN0ZW1hc0FQSTogc3Vic2lzdGVtYXNBUEkgfCB1bmRlZmluZWQ7XG4gIGxpYnJvc0FQSTogbGlicm9zQVBJIHwgdW5kZWZpbmVkO1xuICBuZXdJbmJveDogYW55O1xuICB0cDogYW55O1xuICB0YXJlYXNBUEk6IFRhcmVhc0FQSSB8IHVuZGVmaW5lZDtcbiAgbW9kdWxvVGFiVGl0bGU6IE1vZHVsb1RhYlRpdGxlIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb1Rhc2tNYW5hZ2VyOiBNb2R1bG9UYXNrTWFuYWdlciB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9EYXRhdmlld1F1ZXJpZXM6IE1vZHVsb0RhdGF2aWV3UXVlcmllcyB8IG51bGwgPSBudWxsO1xuICAvLyBEZWNsYXJhIHVuYSBwcm9waWVkYWQgcGFyYSBtYW50ZW5lciB1bmEgaW5zdGFuY2lhIGRlIGBTdGF0dXNCYXJFeHRlbnNpb25gLlxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCIsXG4gICAgICAobGVhZikgPT4gbmV3IFZpc3RhUmVnaXN0cm9BY3Rpdm8obGVhZiwgdGhpcylcbiAgICApO1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgXCJ2aXN0YS1yZXN1bWVuLXNlbWFuYWxcIixcbiAgICAgIChsZWFmKSA9PiBuZXcgVmlzdGFSZXN1bWVuU2VtYW5hbChsZWFmLCB0aGlzKVxuICAgICk7XG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiLFxuICAgICAgKGxlYWYpID0+IG5ldyBWaXN0YVJlZ2lzdHJvRGlhcmlvKGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIGNhcmdhciBBUEkgcmVnaXN0cm8gVGllbXBvXG4gICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0ZXJBUEkgPSBuZXcgc3RhcnRlckFQSSh0aGlzKTtcbiAgICB0aGlzLmFkZE9uc0FQSSA9IG5ldyBhZGRPbnNBUEkodGhpcyk7XG4gICAgdGhpcy5ZQU1MVXBkYXRlckFQSSA9IG5ldyBZQU1MVXBkYXRlckFQSSh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVNlc2lvbkxlY3R1cmEgPSBuZXcgdXBkYXRlU2VzaW9uTGVjdHVyYSh0aGlzKTtcbiAgICB0aGlzLm1lbnVIb3lBUEkgPSBuZXcgbWVudUhveUFQSSh0aGlzKTtcbiAgICB0aGlzLm1lbnVTZW1hbmFsQVBJID0gbmV3IG1lbnVTZW1hbmFsQVBJKHRoaXMpO1xuICAgIHRoaXMuc3Vic2lzdGVtYXNBUEkgPSBuZXcgc3Vic2lzdGVtYXNBUEkodGhpcyk7XG4gICAgdGhpcy5saWJyb3NBUEkgPSBuZXcgbGlicm9zQVBJKHRoaXMpO1xuICAgIHRoaXMubmV3SW5ib3ggPSBpbmdyZXNhckJhbmRlamFFbnRyYWRhLmJpbmQodGhpcyk7XG5cbiAgICAvLyBBXHUwMEYxYWRlIGxhIHBlc3RhXHUwMEYxYSBkZSBjb25maWd1cmFjaVx1MDBGM24gLVxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGx1Z2luTWFpblNldHRpbmdzVGFiKHRoaXMpKTtcbiAgICAvLyBJbmljaWFsaXphIGxhcyBpbnN0YW5jaWFzIGRlIGxvcyBtXHUwMEYzZHVsb3NcbiAgICB0aGlzLnN0YXR1c0JhckV4dGVuc2lvbiA9IG5ldyBTdGF0dXNCYXJFeHRlbnNpb24odGhpcyk7XG4gICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IG5ldyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyh0aGlzKTtcbiAgICB0aGlzLm1vZHVsb0Jhc2UgPSBuZXcgTW9kdWxvQmFzZSh0aGlzKTtcbiAgICAvL3RoaXMubW9kdWxvVGVyY2Vyb3MgPSBuZXcgTW9kdWxvVGVyY2Vyb3ModGhpcyk7XG4gICAgdGhpcy5tb2R1bG9HVEQgPSBuZXcgTW9kdWxvR1REKHRoaXMpO1xuICAgIC8vdGhpcy5nZXRUYXJlYXNWZW5jaWRhc0FiaWVydGFzID0gKCkgPT4gZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcyh0aGlzKTtcbiAgICAvL3RoaXMubW9zdHJhclRhcmVhc1ZlbmNpZGFzID0gKCkgPT4gbW9zdHJhclRhcmVhc1ZlbmNpZGFzKHRoaXMpO1xuICAgIHRoaXMudGFyZWFzQVBJID0gbmV3IFRhcmVhc0FQSSh0aGlzKTtcbiAgICB0aGlzLm1vZHVsb1RhYlRpdGxlID0gbmV3IE1vZHVsb1RhYlRpdGxlKHRoaXMpO1xuICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXIgPSBuZXcgTW9kdWxvVGFza01hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMgPSBuZXcgTW9kdWxvRGF0YXZpZXdRdWVyaWVzKHRoaXMpO1xuICAgIC8qXG4gICAgKHRoaXMuYXBwIGFzIGFueSkuZ3BNYW5hZ2VtZW50ID0ge1xuICAgICAgZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhczogKCkgPT4gdGhpcy50YXJlYXNBUEkuZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcygpLFxuICAgICAgbW9zdHJhclRhcmVhc1ZlbmNpZGFzOiAoKSA9PiB0aGlzLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzVmVuY2lkYXMoKVxuICAgIH07XG4gICAgKi9cbiAgICB0aGlzLmFwcGx5Q29uZmlndXJhdGlvbigpO1xuICAgIC8vIEFwbGljYSBsYSBjb25maWd1cmFjaVx1MDBGM24gaW5pY2lhbCBiYXNhZGEgZW4gbG9zIGFqdXN0ZXMgY2FyZ2Fkb3MgbyBwcmVkZXRlcm1pbmFkb3MuXG4gICAgY29uc29sZS5sb2coXCJJbmljaWFuZG8gY2FyZ2EgZGUgcGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbFwiKTtcblxuICAgIHRoaXMucmVnaXN0ZXJHUFRob3JhKCk7XG4gICAgLy8gQWN0aXZhY2lcdTAwRjNuIGRlIG1vZHVsb1RhZ1RpdGxlXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvVGFiVGl0bGUpIHtcbiAgICAgIHRoaXMubW9kdWxvVGFiVGl0bGU/LmFjdGl2YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kdWxvVGFiVGl0bGU/LmRlYWN0aXZhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb1Rhc2tNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXIuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvRGF0YXZpZXdRdWVyaWVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnTWFuYWdlbWVudFBsdWdpbjogQXBsaWNhbmRvIGNvbmZpZ3VyYWNpXHUwMEYzbiBEYXRhdmlld1F1ZXJpZXMuLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzLmFjdGl2YXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBhcHBseUNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcz8uZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgXG4gIH1cblxuICByZWdpc3RlckdQVGhvcmEoKSB7XG4gICAgY29uc3QgZ3B0SG9yYSA9IG5ldyBHUFRob3JhKHRoaXMuYXBwKTsgLy8gQ3JlYXIgdW5hIGluc3RhbmNpYSBkZSBHUFRob3JhXG4gICAgZ3B0SG9yYS5vbmxvYWQoKTtcbiAgfVxuXG4gIGFwcGx5Q29uZmlndXJhdGlvbigpIHtcbiAgICAvLyBNb2R1bG8gQmFzZSBlcyBlbCBtXHUwMEYzZHVsbyBzb2JyZSBlbCBxdWUgZXN0b3kgaGFjaWVuZG8gcHJ1ZWJhcyBkZSBkZXNhcnJvbGxvLlxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb0Jhc2UpIHtcbiAgICAgIHRoaXMubW9kdWxvQmFzZT8uYWN0aXZhdGUodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9kdWxvQmFzZT8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvUmVnaXN0cm9UaWVtcG8pIHtcbiAgICAgIHRoaXMubW9kdWxvUmVnaXN0cm9UaWVtcG8/LmFjdGl2YXRlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb1JlZ2lzdHJvVGllbXBvPy5kZWFjdGl2YXRlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0Jhcikge1xuICAgICAgdGhpcy5zdGF0dXNCYXJFeHRlbnNpb24/LmFjdGl2YXRlKCk7XG4gICAgICAvLyBTaSBsYSBjb25maWd1cmFjaVx1MDBGM24gcGFyYSBgbW9kdWxvQWxpYXNTdGF0dXNCYXJgIGVzIHZlcmRhZGVyYSwgYWN0aXZhIGVsIG1cdTAwRjNkdWxvLlxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXR1c0JhckV4dGVuc2lvbj8uZGVhY3RpdmF0ZSgpO1xuICAgICAgLy8gU2kgZXMgZmFsc2EsIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsby5cbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvR1REKSB7XG4gICAgICB0aGlzLm1vZHVsb0dURD8uYWN0aXZhdGUodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9kdWxvR1REPy5kZWFjdGl2YXRlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9UYXNrTWFuYWdlcikge1xuICAgICAgdGhpcy5tb2R1bG9UYXNrTWFuYWdlcj8uYWN0aXZhdGUoKTtcbiAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXI/LmRlYWN0aXZhdGUoKTtcbiAgfVxuIFxuICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FwbGljYW5kbyBjb25maWd1cmFjaVx1MDBGM246IEFjdGl2YW5kbyBEYXRhdmlld1F1ZXJpZXMnKTtcbiAgICAgICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXM/LmFjdGl2YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FwbGljYW5kbyBjb25maWd1cmFjaVx1MDBGM246IERlc2FjdGl2YW5kbyBEYXRhdmlld1F1ZXJpZXMnKTtcbiAgICAgICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXM/LmRlYWN0aXZhdGUoKTtcbiAgICB9XG5cbiAgICAvL3RoaXMubW9kdWxvVGVyY2Vyb3M/LmFjdGl2YXRlKHRoaXMpO1xuICB9XG5cbiAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgLy8gQ1x1MDBGM2RpZ28gZGUgbGltcGllemEgYXF1XHUwMEVEXG4gICAgY29uc29sZS5sb2coXCJEZXNjYXJnYW5kbyBwbHVnaW4gR2VzdGlcdTAwRjNuIFBlcnNvbmFsXCIpO1xuICAgIGlmICh0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcykge1xuICAgICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMuZGVhY3RpdmF0ZSgpO1xuICB9XG4gICAgZGVsZXRlICh0aGlzLmFwcCBhcyBhbnkpLmdwTWFuYWdlbWVudDtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIGRlc2RlIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIC8vIEludGVudGEgY2FyZ2FyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiB5IG1lemNsYSBsb3MgdmFsb3JlcyBjYXJnYWRvcyBjb24gbG9zIHByZWRldGVybWluYWRvcy5cbiAgfVxuXG4gIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGd1YXJkYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIGFjdHVhbCBlbiBlbCBhbG1hY2VuYW1pZW50byBkZSBPYnNpZGlhbi5cbiAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIC8vIEd1YXJkYSBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsLlxuXG4gICAgdGhpcy5hcHBseUNvbmZpZ3VyYXRpb24oKTtcbiAgICAvLyBWdWVsdmUgYSBhcGxpY2FyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIGFzZWd1cmFyc2UgZGUgcXVlIGxvcyBjYW1iaW9zIHJlY2llbnRlcyBzZSByZWZsZWplbiBpbm1lZGlhdGFtZW50ZS5cbiAgfVxuXG4gIGdldFRwKCkge1xuICAgIGRlYnVnZ2VyO1xuICAgIGlmIChcbiAgICAgICF0aGlzLmFwcCB8fFxuICAgICAgIXRoaXMuYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwidGVtcGxhdGVyLW9ic2lkaWFuXCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vICBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlMgY3VhbmRvIGN1cnJlbnQgRnVuY3Rpb25zIGVzdGEgY2FyZ2Fkby5cbiAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgLy9jb25zdCB0cCA9IHRlbXBsYXRlclBsdWdpbi50ZW1wbGF0ZXIuY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgIC8vIC0+IHZlcnNpb24gcXVlIGZhbGxhIHNpIG5vIGVzdGEgYXJyaWJhIGVsIHBsdWdpbiBwb3JxdWUgaGFjZSBnZXQgZGVsIHBsdWdpbiBkaXJlY3RvLiBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbigndGVtcGxhdGVyLW9ic2lkaWFuJyk7XG4gICAgbGV0IHRwR2VuID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgbGV0IHRwID0ge307XG4gICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIG1vZHVsZXNcbiAgICB0cC5maWxlID0gdHBHZW4uZmluZCgobSkgPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKChtKSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiSW5zdGFuY2lhIGRlIHRwIGNhcmdhZGEgc2F0aXNmYWN0b3JpYW1lbnRlIGVuIFBsdWdpblwiKTtcbiAgICByZXR1cm4gdHA7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBQbHVnaW5NYWluU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbCcgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvcmVzIHBhcmEgbGFzIHBlc3RhXHUwMEYxYXMgeSBlbCBjb250ZW5pZG8gZGUgbGFzIHBlc3RhXHUwMEYxYXNcbiAgICAgICAgY29uc3QgdGFiQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndGFiLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIGNvbnN0IHRhYkNvbnRlbnRDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0YWItY29udGVudC1jb250YWluZXInIH0pO1xuXG4gICAgICAgIC8vIERlZmluZSBsb3MgdFx1MDBFRHR1bG9zIGRlIGxhcyBwZXN0YVx1MDBGMWFzXG4gICAgICAgIGNvbnN0IHRhYlRpdGxlcyA9IFsnQWN0aXZhciBNXHUwMEYzZHVsb3MnLCAnRGlyZWN0b3Jpb3MgU3Vic2lzdGVtYXMnLCAnUGVzdGFcdTAwRjFhIDMnXTtcblxuICAgICAgICAvLyBDcmVhciBwZXN0YVx1MDBGMWFzIHkgY29udGVuaWRvIGVzcGVjXHUwMEVEZmljb1xuICAgICAgICB0YWJUaXRsZXMuZm9yRWFjaCgodGl0bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhciBib3RvbmVzIGRlIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgY29uc3QgdGFiQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICB0YWJCdXR0b24udGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0YWItbGluaycpO1xuICAgICAgICAgICAgdGFiQnV0dG9uLmRhdGFzZXQudGFiID0gYHRhYiR7aW5kZXh9YDtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5vcGVuVGFiKGB0YWIke2luZGV4fWApO1xuICAgICAgICAgICAgdGFiQ29udGFpbmVyLmFwcGVuZENoaWxkKHRhYkJ1dHRvbik7XG5cbiAgICAgICAgICAgIC8vIENyZWFyIGNvbnRlbmlkbyBkZSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGNvbnN0IHRhYkNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHRhYkNvbnRlbnQuaWQgPSBgdGFiJHtpbmRleH1gO1xuICAgICAgICAgICAgdGFiQ29udGVudC5jbGFzc0xpc3QuYWRkKCd0YWItY29udGVudCcpO1xuICAgICAgICAgICAgdGFiQ29udGVudENvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJDb250ZW50KTtcblxuICAgICAgICAgICAgLy8gSW5pY2lhbG1lbnRlIG9jdWx0YXIgZWwgY29udGVuaWRvIGRlIGxhIHBlc3RhXHUwMEYxYSwgZXhjZXB0byBlbCBwcmltZXJvXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB0YWJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIC8vIENvbnRlbmlkbyBwYXJhIGxhIHByaW1lcmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKCdWZXIgQWxpYXMgZW4gZWwgU3RhdHVzIEJhcicpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VsaWdlIHNpIGRlc2VhcyB2ZXIgZWwgQWxpYXNlcyBkZSBsYXMgbm90YXMgZW4gZWwgU3RhdHVzIEJhci4nKVxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZTogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FjdGl2YXIgTVx1MDBGM2R1bG8gUmVnaXN0cm8gVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0FjdGl2YSBvIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsbyBkZSByZWdpc3RybyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvUmVnaXN0cm9UaWVtcG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdBY3RpdmFyIE1cdTAwRjNkdWxvIEJhc2UgLSBQcnVlYmFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0FjdGl2YSBvIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsbyBkZSBwcnVlYmFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZTogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0Jhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9CYXNlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnRlbmlkbyBwYXJhIGxhIHNlZ3VuZGEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBtYW5lamFyIGVsIGNsaWMgZW4gZWwgdFx1MDBFRHR1bG8gZGVsIGJsb3F1ZSBkZXNwbGVnYWJsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUNvbGxhcHNlID0gKGV2ZW50OiB7IHRhcmdldDogeyBuZXh0RWxlbWVudFNpYmxpbmc6IGFueTsgaW5uZXJIVE1MOiBzdHJpbmc7IGdldEF0dHJpYnV0ZTogKGFyZzA6IHN0cmluZykgPT4gc3RyaW5nOyB9OyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRFbGVtZW50ID0gZXZlbnQudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gJyYjOTY2MDsgJyArIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKTsgLy8gQ2FtYmlhIGVsIGljb25vIGEgXCJhYmFqb1wiXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICcmIzk2NTQ7ICcgKyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7IC8vIENhbWJpYSBlbCBpY29ubyBhIFwiZGVyZWNoYVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkFub3RhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBhbm90YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQW5vdGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkFub3RhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBhbm90YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhhbm90YWNpb25lc0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBBbm90YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIHRvZGFzIGxhcyBBbm90YWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQW5vdGFjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQW5vdGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGFub3RhY2lvbmVzQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdJbmRpY2UgZGUgQW5vdGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxhcyBBbm90YWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQW5vdGFjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQW5vdGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiJyB9KTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCInKTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2dDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBibG9nQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgYmxvZ1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJsb2dDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQXJ0XHUwMEVEY3Vsb3MgZGVsIEJsb2cnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgYXJ0XHUwMEVEY3Vsb3MgZGVsIGJsb2cuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FCbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FCbG9nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhibG9nQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdJbmRpY2UgZGUgQXJ0XHUwMEVEY3Vsb3MgZGVsIEJsb2cnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBhcnRcdTAwRURjdWxvcyBkZWwgYmxvZy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQUJsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQUJsb2cgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiRGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3NcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2Fycm9sbG9zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiRGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3NcIicpO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2Fycm9sbG9zQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIE9jdWx0YSBpbmljaWFsbWVudGUgbG9zIGFqdXN0ZXNcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIENhcnBldGEgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3NcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhkZXNhcnJvbGxvc0NvbnRlbnQpIC8vIFVzYW1vcyBgZGVzYXJyb2xsb3NDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgZGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Rlc2Fycm9sbG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Rlc2Fycm9sbG9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmFjaVx1MDBGM24gcGFyYSBcdTAwQ0RuZGljZSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRGVzYXJyb2xsb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiRXN0dWRpb1wiXG4gICAgICAgICAgICAgICAgY29uc3QgZXN0dWRpb1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiRXN0dWRpb1wiJyB9KTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJFc3R1ZGlvXCInKTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdHVkaW9Db250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhlc3R1ZGlvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgVGVtYXMgZGUgRXN0dWRpbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyB0ZW1hcyBkZSBlc3R1ZGlvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Fc3R1ZGlvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0VzdHVkaW8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVzdHVkaW9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgRXN0dWRpbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIHRlbWFzIGRlIGVzdHVkaW8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0VzdHVkaW8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJHVERcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGd0ZFRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiR1REXCInIH0pO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiR1REXCInKTtcbiAgICAgICAgICAgICAgICBndGRUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3RkQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZ3RkQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FyY2hpdm8gZGUgQmFuZGVqYSBkZSBFbnRyYWRhLicpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIEJhbmRlamEgZGUgZW50cmFkYSBHVEQuJylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfSW5ib3gpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgICAgICAgICAgLy8gUHJveWVjdG9zIEdURFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBwYXJhIHByb3llY3RvcyBHVEQuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcm95ZWN0b3MgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIHByb3llY3RvcyBHVEQuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFJldmlzaVx1MDBGM24gU2VtYW5hbFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHJldmlzaW9uZXMgc2VtYW5hbGVzIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUlNHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUlNHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZXZpc2lvbmVzIFNlbWFuYWxlcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgbGFzIHJldmlzaW9uZXMgc2VtYW5hbGVzIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUlNHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUlNHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTGVjdHVyYVwiXG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYVRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTGVjdHVyYVwiJyB9KTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInKTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlY3R1cmFDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXNpb25lcyBkZSBMZWN0dXJhXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobGVjdHVyYUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFNlc2lvbmVzIGRlIExlY3R1cmEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBwYXJhIGxhcyBzZXNpb25lcyBkZSBsZWN0dXJhLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhU2VzaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTGVjdHVyYVNlc2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFNlc2lvbmVzIGRlIExlY3R1cmEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9MZWN0dXJhU2VzaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIExpYnJvcyB5IFJlc1x1MDBGQW1lbmVzXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobGVjdHVyYUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlc1x1MDBGQW1lbmVzIGRlIExpYnJvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbG9zIHJlc1x1MDBGQW1lbmVzIGRlIGxpYnJvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTGVjdHVyYVJlc3VtZW5lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJlc1x1MDBGQW1lbmVzIGRlIExpYnJvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsb3MgcmVzXHUwMEZBbWVuZXMgZGUgbGlicm9zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9MZWN0dXJhUmVzdW1lbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSBlc3RhbW9zIGRlbnRybyBkZSBpZiAoaW5kZXggPT09IDEpIHsgLi4uIH1cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTWVudG9yXHUwMEVEYXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTWVudG9yXHUwMEVEYXNcIicgfSk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZW50b3JpYXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBTZXNpb25lcyBkZSBNZW50b3JcdTAwRURhJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIHNlc2lvbmVzIGRlIG1lbnRvclx1MDBFRGEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZW50b3JpYXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lbnRvcmlhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBNZW50b3JcdTAwRURhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbGFzIHNlc2lvbmVzIGRlIG1lbnRvclx1MDBFRGEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZW50b3JpYXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlcGl0ZSBlbCBwYXRyXHUwMEYzbiBwYXJhIFwiTWVyY2Fkb1wiLCBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiLCB5IFwiUGFnb3NcIlxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNZXJjYWRvXCJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNZXJjYWRvXCInIH0pO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicpO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVyY2Fkb0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJNZXJjYWRvXCIsIHNpZ3VpZW5kbyBlbCBwYXRyXHUwMEYzbiBkZSBsYXMgbWVudG9yXHUwMEVEYXNcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZXJjYWRvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTGlzdGFkb3MgZGUgTWVyY2FkbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyBsaXN0YXMgZGUgbWVyY2Fkby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVyY2FkbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZXJjYWRvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIGxpc3RhZG9zIGRlIG1lcmNhZG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBsaXN0YWRvcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lcmNhZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kdWxvc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCInIH0pO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiJyk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bG9zQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiXG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtb2R1bG9zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTW9kdWxvcyBkZWwgU2lzdGVtYSBkZSBHZXN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIG1cdTAwRjNkdWxvcyBkZWwgU2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01vZHVsb3NTaXN0ZW1hID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtb2R1bG9zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIGxvcyBNb2R1bG9zIGRlbCBzaXN0ZW1hIGRlIEdlc3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBNXHUwMEYzZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Nb2R1bG9zU2lzdGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Nb2R1bG9zU2lzdGVtYSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiVHJhbnNhY2Npb25lcyB5IFBhZ29zXCJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJUcmFuc2FjY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcInRyYW5zYWNjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY2Npb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJQYWdvc1wiXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodHJhbnNhY2Npb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE1vZHVsb3MgZGVsIFNpc3RlbWEgZGUgVHJhbnNhY2Npb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBjb21wcm9iYW50ZXMgZGUgbGFzIHRyYW5zYWNjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1RyYW5zYWNjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVHJhbnNhY2Npb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodHJhbnNhY2Npb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBUcmFuc2FjY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBUcmFuc2FjY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9UcmFuc2FjY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1RyYW5zYWNjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByZXNlbnRhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlByZXNlbnRhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE5vdGFzIGRlIFByZXNlbnRhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIG5vdGFzIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJlc2VudGFjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJlc2VudGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQcm95ZWN0b3MgZGUgUVwiXG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUVRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJveWVjdG9zUUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFByb3llY3RvcyBkZSBRJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByb3llY3Rvc1FDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBmdW5jaVx1MDBGM24gdG9nZ2xlQ29sbGFwc2UgZXN0XHUwMEUxIGRlZmluaWRhIGNvbW8gc2UgaW5kaWNcdTAwRjMgYW50ZXJpb3JtZW50ZS5cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUHVibGljYWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljYWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHVibGljYWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQdWJsaWNhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY2FjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBQaWV6YXMgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyBwaWV6YXMgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QdWJsaWNhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwdWJsaWNhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFB1YmxpY2FjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHB1YmxpY2FjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1B1YmxpY2FjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWNldGFzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWNldGFzXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZXRhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWNldGFzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjZXRhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWNldGFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY2V0YXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY2V0YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjZXRhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY3Vyc29zIFJlY3VycmVudGVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUmVnaXN0cm8gVGllbXBvXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb1RpZW1wb1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVnaXN0cm8gVGllbXBvXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWdpc3RybyBUaWVtcG9cIicpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlZ2lzdHJvVGllbXBvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVnaXN0cm9zIGRlIFRpZW1wbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVnaXN0cm9UaWVtcG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVnaXN0cm8gZGUgVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuXG5cblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgdGVyY2VyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gJ0ZlY2hhJztcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5wdXQgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGVJbnB1dC50eXBlID0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZXN0aWxvcyBDU1MgcGFyYSBlc3BhY2lhZG8geSBvcmdhbml6YWNpXHUwMEYzblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50IHsgZGlzcGxheTogbm9uZTsgcGFkZGluZy10b3A6IDIwcHg7IH0gLy8gQVx1MDBGMWFkaWRvIHBhZGRpbmctdG9wIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICAgICAgICAgIC50YWItY29udGVudC5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluayB7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogNXB4IDEwcHg7IG1hcmdpbi1yaWdodDogNXB4OyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICAgICAgICAgICAgICAudGFiLWxpbmsuYWN0aXZlIHsgYmFja2dyb3VuZDogI2UwZTBlMDsgfVxuICAgICAgICAgICAgICAgIC5zZXR0aW5nLWl0ZW0geyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgICAgICBcblxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYW1iaWFyIGxhIHBlc3RhXHUwMEYxYSBhY3RpdmFcbiAgICAgICAgdGhpcy5vcGVuVGFiID0gKHRhYk5hbWUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItbGluaycpLmZvckVhY2gobGluayA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYj1cIiR7dGFiTmFtZX1cIl1gKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWJDb250ZW50KSBhY3RpdmVUYWJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkxpbmspIGFjdGl2ZVRhYkxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBYnJpciBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYSBwb3IgZGVmZWN0b1xuICAgICAgICB0aGlzLm9wZW5UYWIoJ3RhYjAnKTtcbiAgICB9XG4gICAgb3BlblRhYihhcmcwOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvQmFzZSB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG4gICAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZHVsb0Jhc2UpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGFjdGl2bywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgICAgXG4gICAgfVxuXG5cbn0iLCAiXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJDYXJwZXRhKHJ1dGFDYXJwZXRhOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgeWEgZXhpc3RlXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgaWYgKGNhcnBldGFFeGlzdGVudGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKHJ1dGFDYXJwZXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDYXJwZXRhICcke3J1dGFDYXJwZXRhfScgY3JlYWRhIGV4aXRvc2FtZW50ZS5gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7cnV0YUNhcnBldGF9JzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyUGxhbnRpbGxhKGNvbnRlbmlkbzogc3RyaW5nKTogUHJvbWlzZTxURmlsZT4ge1xuICAgIC8vIERlZmluZSBsYSBydXRhIHkgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIHRlbXBvcmFsXG4gICAgY29uc3QgZm9sZGVyID0gJ1BsYW50aWxsYXMnO1xuICAgIGxldCBmaWxlbmFtZSA9IFwiQXJjaGl2byBEZSBQbGFudGlsbGFcIlxuICAgIGxldCBwYXRoVGVtcG9yYWwgPSBmb2xkZXIgKyBcIi9cIiArIGZpbGVuYW1lICsgXCIubWRcIjtcblxuICAgIC8vIENyZWEgZWwgYXJjaGl2byBlbiBsYSBiXHUwMEYzdmVkYSB5IGd1YXJkYSBlbCBhcmNoaXZvIGNyZWFkbyBlbiB1bmEgdmFyaWFibGVcbiAgICBjb25zdCBhcmNoaXZvQ3JlYWRvOiBURmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUocGF0aFRlbXBvcmFsLCBjb250ZW5pZG8pO1xuXG4gICAgLy8gQXF1XHUwMEVEIG5lY2VzaXRhclx1MDBFRGFzIHByb2Nlc2FyIGVsIGFyY2hpdm8gY29uIFRlbXBsYXRlciBzaSBlcyBuZWNlc2FyaW9cbiAgICAvLyBFc3RvIGRlcGVuZGUgZGUgY1x1MDBGM21vIFRlbXBsYXRlciBleHBvbmdhIHN1IGZ1bmNpb25hbGlkYWQgYSBvdHJvcyBwbHVnaW5zXG4gICAgLy8gUG9yIGVqZW1wbG8sIHNpIFRlbXBsYXRlciB0aWVuZSB1biBtXHUwMEU5dG9kbyBwYXJhIHByb2Nlc2FyIGFyY2hpdm9zLCBsbyB1c2FyXHUwMEVEYXMgYXF1XHUwMEVEXG5cbiAgICAvLyAoT3BjaW9uYWwpIEVsaW1pbmEgZWwgYXJjaGl2byBkZXNwdVx1MDBFOXMgZGUgcHJvY2VzYXJsbyBzaSBubyBkZXNlYXMgY29uc2VydmFybG9cbiAgICAvLyBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGFyY2hpdm9DcmVhZG8pO1xuXG4gICAgLy8gUmV0b3JuYSBlbCBhcmNoaXZvIGNyZWFkb1xuICAgIHJldHVybiBhcmNoaXZvQ3JlYWRvO1xufVxuIiwgImltcG9ydCB7TW9kYWx9IGZyb20gJ29ic2lkaWFuJztcblxuY2xhc3MgRmlsZUxpbmtNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIC8vIEFwbGljYXIgZXN0aWxvcyBmbGV4Ym94IHBhcmEgY2VudHJhciBjb250ZW5pZG9cbiAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuaGVpZ2h0ID0gJzUwJSc7ICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgbW9kYWwgb2N1cGUgdG9kbyBlbCBlc3BhY2lvIGRpc3BvbmlibGVcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnSW5zZXJ0YXIgZWwgbGluayBkZSB1biBhcmNoaXZvLicsXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyOycgfSAgLy8gQXNlZ3VyYSBxdWUgZWwgdGV4dG8gZGVsIHRcdTAwRUR0dWxvIGVzdFx1MDBFOSBjZW50cmFkbyBzaSBlcyBtXHUwMEUxcyBsYXJnbyBxdWUgdW5hIGxcdTAwRURuZWFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgZWwgaW5wdXQgeSBlbCBib3RcdTAwRjNuXG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBpbnB1dENvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnMTBweCc7XG4gICAgICAgIFxuICAgICAgICAvLyBJbnB1dCBkZSBhcmNoaXZvIG9jdWx0b1xuICAgICAgICBjb25zdCBmaWxlSW5wdXQgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9KTtcbiAgICAgICAgZmlsZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgc2VsZWNjaW9uYXIgYXJjaGl2b1xuICAgICAgICBjb25zdCBmaWxlQnV0dG9uID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdTZWxlY2Npb25lIHN1IGFyY2hpdm8nLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUucGFkZGluZyA9ICc1cHggMTBweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICBmaWxlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZW50byBwYXJhIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuIGFyY2hpdm9cbiAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRMaW5rQXRDdXJzb3IoZmlsZS5wYXRoLCBmaWxlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5zZXJ0TGlua0F0Q3Vyc29yKGZpbGVQYXRoLCBmaWxlTmFtZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgICAgIGlmIChhY3RpdmVMZWFmKSB7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVMZWFmLnZpZXcuc291cmNlTW9kZS5jbUVkaXRvcjtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYFske2ZpbGVOYW1lfV0oPGZpbGU6Ly8ke2ZpbGVQYXRofT4pYDtcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobGlua1RleHQsIGN1cnNvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuXG4vLyBGdW5jaVx1MDBGM24gcGFyYSBhYnJpciBlbCBtb2RhbCBwZXJzb25hbGl6YWRvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RmlsZUxpbmsoYXBwKSB7XG4gICAgbmV3IEZpbGVMaW5rTW9kYWwoYXBwKS5vcGVuKCk7XG59XG4iLCAiaW1wb3J0IHtjcmVhckNhcnBldGF9IGZyb20gXCIuL3V0aWxzL2NyZWFyQ2FycGV0YVwiXG5pbXBvcnQge2NyZWFyUGxhbnRpbGxhfSBmcm9tIFwiLi91dGlscy9jcmVhclBsYW50aWxsYVwiXG5pbXBvcnQge2luc2VydEZpbGVMaW5rfSBmcm9tIFwiLi91dGlscy9maWxlTGlua01vZGFsXCJcbmltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGV9IGZyb20gXCIuL3V0aWxzL2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGVcIlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuXG5cbiAgICBjb25zdCBjb21hbmRvMSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiQ3JlYWNpb24tQ2FycGV0YVwiLFxuICAgICAgICBuYW1lOiBcIkNyZWFjaVx1MDBGM24gZGUgQ2FycGV0YVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGF3YWl0IGNyZWFyQ2FycGV0YSgnTWkgQ2FycGV0YSBkZSBwbHVnaW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzEuaWQpO1xuXG5cbiAgICBjb25zdCBjb21hbmRvMyA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiY3JlYXItYXJjaGl2by10ZW1wbGF0ZVwiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIGFyY2hpdm8gZGVzZGUgdGVtcGxhdGVcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcGx1Z2luSWQgPSAndGVtcGxhdGVyLW9ic2lkaWFuJztcbiAgICAgICAgICAgIGNvbnN0IGlzUGx1Z2luSW5zdGFsbGVkID0gcGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcyhwbHVnaW5JZCk7XG4gICAgICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW3BsdWdpbklkXTtcbiAgICAgICAgICAgIC8vIEludGVudGEgb2J0ZW5lciBsYSBwbGFudGlsbGEgY29tbyBURmlsZVxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gXCJQbGFudGlsbGFzL0Fub3RhY2lvbmVzL1BsdCAtIEFub3RhY2lvbmVzLm1kXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEludGVudGEgb2J0ZW5lciBsYSBjYXJwZXRhIGNvbW8gVEZvbGRlclxuICAgICAgICAgICAgbGV0IGZvbGRlck9iaiA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgICAgICBpZiAoIShmb2xkZXJPYmogaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJMYSBjYXJwZXRhIGVzcGVjaWZpY2FkYSBubyBleGlzdGUgbyBubyBlcyB1bmEgY2FycGV0YS5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTYWxpciBzaSBubyBzZSBlbmN1ZW50cmEgbGEgY2FycGV0YSBvIG5vIGVzIHVuYSBjYXJwZXRhXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IFwidG9EZWZpbmVcIlxuICAgICAgICAgICAgbGV0IG9wZW5Ob3RlID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgYXJjaGl2byA9IGF3YWl0IGNyZWF0ZU5vdGVGcm9tVGVtcGxhdGUocGx1Z2luLCB0ZW1wbGF0ZSwgZm9sZGVyT2JqLCBmaWxlTmFtZSwgb3Blbk5vdGUpO1xuXG4gICAgICAgICAgICBpZiAoIWFyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMy5pZCk7XG5cblxuICAgIGNvbnN0IGNvbWFuZG80ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1saW5rLUFyY2hpdm9cIixcbiAgICAgICAgbmFtZTogXCJDcmVhciB1biBsaW5rIGEgYXJjaGl2byBkZWwgRGlzY28uXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaW5zZXJ0RmlsZUxpbmsoYXBwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvNC5pZCk7XG5cblxuICAgIC8vIENyZWFjaVx1MDBGM24geSByZWdpc3RybyBkZWwgY29tYW5kby5cbiAgICBjb25zdCBjb21hbmRvNSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiYWJyaXItbm90YS1hY3RpdmFcIixcbiAgICAgICAgbmFtZTogXCJBYnJpciBOb3RhIEFjdGl2YVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICBcbiAgICAgICAvLyBBc2VndXJhIHF1ZSBubyBoYXlhIGR1cGxpY2Fkb3MgZGUgbGEgdmlzdGEuXG4gICAgICAgYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1ub3RhLWFjdGl2YVwiKTtcblxuICAgICAgIC8vIEFicmUgbGEgdmlzdGEgZW4gdW5hIG51ZXZhIGhvamEuXG4gICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSkuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1ub3RhLWFjdGl2YVwiLFxuICAgICAgIH0pO1xuXG4gICAgICAgLy8gQWN0aXZhIGxhIG51ZXZhIGhvamEgcGFyYSBlbCB1c3VhcmlvLlxuICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcbiAgICAgICAgICAgYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1ub3RhLWFjdGl2YVwiKVswXVxuICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG81LmlkKTtcblxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CKSByZXR1cm47XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gcG9kclx1MDBFRGFzIG1hbmVqYXIgbGEgXCJkZXNhY3RpdmFjaVx1MDBGM25cIiBkZSBjb21hbmRvcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsICJpbXBvcnQge1RGaWxlLCBURm9sZGVyfSBmcm9tIFwib2JzaWRpYW5cIlxuLyoqXG4gKiBDcmVhIHVuYSBudWV2YSBub3RhIGEgcGFydGlyIGRlIHVuYSBwbGFudGlsbGEgdXRpbGl6YW5kbyBlbCBwbHVnaW4gVGVtcGxhdGVyLlxuICogQHBhcmFtIHRlbXBsYXRlclBsdWdpbiBSZWZlcmVuY2lhIGFsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGUgTGEgcGxhbnRpbGxhIGEgdXRpbGl6YXIsIHB1ZWRlIHNlciB1biBURmlsZSBvIGVsIHBhdGggY29tbyBzdHJpbmcuXG4gKiBAcGFyYW0gZm9sZGVyIEVsIGZvbGRlciBkb25kZSBzZSBjcmVhclx1MDBFMSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBmaWxlbmFtZSBFbCBub21icmUgZGVsIGFyY2hpdm8gZGUgbGEgbnVldmEgbm90YS4gT3BjaW9uYWwuXG4gKiBAcGFyYW0gb3Blbk5ld05vdGUgU2kgc2UgZGViZSBhYnJpciBsYSBudWV2YSBub3RhIHRyYXMgY3JlYXJsYS4gUG9yIGRlZmVjdG8gZXMgdHJ1ZS5cbiAqIEByZXR1cm5zIFByb21pc2UgcXVlIHJlc3VlbHZlIGEgVEZpbGUgc2kgbGEgbm90YSBmdWUgY3JlYWRhLCB1bmRlZmluZWQgZW4gY2FzbyBjb250cmFyaW8uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RlRnJvbVRlbXBsYXRlKFxuICAgIHBsdWdpbjogUGx1Z2luLCAvLyBFc3RhIGVzIHVuYSBzdXBvc2ljaVx1MDBGM24sIG5lY2VzaXRhclx1MDBFMXMgYWp1c3RhciBzZWdcdTAwRkFuIGNcdTAwRjNtbyBhY2NlZGFzIGEgVGVtcGxhdGVyIGVuIHR1IHBsdWdpblxuICAgIHRlbXBsYXRlOiBURmlsZSB8IHN0cmluZyxcbiAgICBmb2xkZXI/OiBURm9sZGVyLFxuICAgIGZpbGVuYW1lPzogc3RyaW5nLFxuICAgIG9wZW5OZXdOb3RlOiBib29sZWFuID0gdHJ1ZVxuKTogUHJvbWlzZTxURmlsZSB8IHVuZGVmaW5lZD4ge1xuICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIHBsdWdpbiBUZW1wbGF0ZXIgZXN0XHUwMEUxIGluc3RhbGFkbyB5IGhhYmlsaXRhZG9cbiAgICBpZiAoIXBsdWdpbiB8fCAhcGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlNcbiAgICBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSBwbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICBcblxuICAgIGlmICghdHApIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICByZXR1cm47XG59XG4gICAgLy8gdGVtcGxhdGVGaWxlIHB1ZWRlIHNlciB1biBzdHJpbmcgbyBlbCB0ZmlsZSBvYnRlbmlkbyBkZSBlc3RhIG1hbmVyYSBvIGNvbiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKClcbiAgICBkZWJ1Z2dlclxuICAgIGxldCB0ZW1wbGF0ZUZpbGUgPSB0cC5maWxlLmZpbmRfdGZpbGUodGVtcGxhdGUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld05vdGUgPSBhd2FpdCB0cC5maWxlLmNyZWF0ZV9uZXcodGVtcGxhdGVGaWxlLCBmaWxlbmFtZSwgb3Blbk5ld05vdGUsIGZvbGRlcik7XG4gICAgICAgIHJldHVybiBuZXdOb3RlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGxhIG5vdGEgZGVzZGUgbGEgcGxhbnRpbGxhOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZWdpc3RlclJpYmJvbk1lbnUgfSBmcm9tIFwiLi91aS9yaWJib25CdXR0b25cIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGVNb2R1bG9CdXNxdWVkYUF2YW56YWRhKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgcmVnaXN0ZXJSaWJib25NZW51KHBsdWdpbik7XG59IiwgImltcG9ydCB7IEFwcCwgTWVudSwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbCB9IGZyb20gXCIuL21vZGFsXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHRlbmVyIGVsIGltcG9ydCBjb3JyZWN0byBwYXJhIHR1IG1vZGFsXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBFc3RlIGVzIGVsIFx1MDBFRGNvbm8gZGVsIG1lblx1MDBGQSBlbiBlbCByaWJib24sIGNhbWJpYSBcImRpY2VcIiBwb3IgZWwgXHUwMEVEY29ubyBxdWUgcHJlZmllcmFzXG4gICAgcGx1Z2luLmFkZFJpYmJvbkljb24oXCJmb2xkZXItc2VhcmNoLTJcIiwgXCJCXHUwMEZBc3F1ZWRhIEF2YW56YWRhXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAvLyBDcmVhciBlbCBtZW5cdTAwRkEgYWwgaGFjZXIgY2xpYyBlbiBlbCBcdTAwRURjb25vXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShwbHVnaW4uYXBwKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIG9wY2lvbmVzIGFsIG1lblx1MDBGQVxuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgVmlkYVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiXHUwMEMxcmVhcyBkZSBWaWRhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3JyZWNjaVx1MDBGM246IEFzZWdcdTAwRkFyYXRlIGRlIGFicmlyIGVsIG1vZGFsIGNvcnJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwocGx1Z2luLmFwcCwgKGVzdGFkb1NlbGVjY2lvbmFkbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFc3RhZG8gc2VsZWNjaW9uYWRvOlwiLCBlc3RhZG9TZWxlY2Npb25hZG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBjb250aW51YXIgY29uIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFuZWphciBlbCBlc3RhZG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTsgLy8gQ29ycmVnaWRvOiBBXHUwMEYxYWRpZG8gLm9wZW4oKSBwYXJhIGFicmlyIGVsIG1vZGFsXG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQW5vdGFjaVx1MDBGM25cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFub3RhY2lcdTAwRjNuXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiQW5vdGFjaVx1MDBGM25cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFub3RhY2lcdTAwRjNuXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWN1cnNvIFJlY3VycmVudGVcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlY3Vyc28gUmVjdXJyZW50ZVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHZXN0aVx1MDBGM24gRGlhcmlhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUmVnaXN0cm8gZGUgVGllbXBvXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3RybyBkZSBUaWVtcG9cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJSZWdpc3RybyBkZSBUaWVtcG9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTW9zdHJhciBlbCBtZW5cdTAwRkEgZW4gbGEgcG9zaWNpXHUwMEYzbiBkZWwgY3Vyc29yXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZ1enp5Tm90ZVN1Z2dlc3RlciB9IGZyb20gXCIuLi9zZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBydXRhIGRlIGltcG9ydGFjaVx1MDBGM24gc2VhIGNvcnJlY3RhXG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgZXN0YWRvU2VsZWNjaW9uYWRvOiBzdHJpbmcgPSBcIlx1RDgzRFx1REZFMlwiOyAvLyBFc3RhZG8gcG9yIGRlZmVjdG8gY29tbyBlbW9qaSBkaXJlY3RhbWVudGVcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdEVzdGFkbzogKGVzdGFkbzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TZWxlY3RFc3RhZG8gPSBvblNlbGVjdEVzdGFkbztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkJ1c2NhciBcdTAwQzFyZWFzIGRlIFZpZGFcIiB9KTtcblxuICAgICAgICAvLyBVc2FuZG8gU2V0dGluZyBwYXJhIGNyZWFyIGVsIERyb3Bkb3duXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRXN0YWRvXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVsaWdlIGVsIGVzdGFkbzpcIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9ucyh7IFwiXHVEODNEXHVERkUyXCI6IFwiVmVyZGVcIiwgXCJcdUQ4M0RcdUREMzVcIjogXCJBenVsXCIsIFwiXHVEODNEXHVERkUxXCI6IFwiQW1hcmlsbG9cIiwgXCJcdUQ4M0RcdUREMzRcIjogXCJSb2pvXCIgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5lc3RhZG9TZWxlY2Npb25hZG8pOyAvLyBFc3RhYmxlY2UgZWwgdmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQnVzY2FyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGFzRmlsdHJhZGFzID0gYXdhaXQgdGhpcy5maWx0cmFyTm90YXNQb3JFc3RhZG9ZRGlyZWN0b3JpbyhcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYVwiLCB0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vdGFzIGZpbHRyYWRhczpcIiwgbm90YXNGaWx0cmFkYXMubGVuZ3RoLCBub3Rhc0ZpbHRyYWRhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRnV6enlOb3RlU3VnZ2VzdGVyKHRoaXMuYXBwLCBub3Rhc0ZpbHRyYWRhcykub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZmlsdHJhciBub3RhcyBwb3IgZXN0YWRvIHkgZGlyZWN0b3Jpb1xuICAgIGFzeW5jIGZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKGRpcmVjdG9yaW86IHN0cmluZywgZXN0YWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBub3Rhc0ZpbHRyYWRhcyA9IGFyY2hpdm9zLmZpbHRlcihhcmNoaXZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBhcmNoaXZvLnBhdGg7XG4gICAgICAgICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aChkaXJlY3RvcmlvKSkgcmV0dXJuIGZhbHNlOyAvLyBGaWx0cmEgcG9yIGRpcmVjdG9yaW9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZGF0b3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBwcm9jZXNhZG86XCIsIGFyY2hpdm8ucGF0aCk7XG4gICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgZXN0YWRvIGRlbCBmcm9udG1hdHRlciBjb2luY2lkZSBjb24gZWwgZXN0YWRvIHByb3BvcmNpb25hZG9cbiAgICAgICAgICAgIGlmIChkYXRvcy5mcm9udG1hdHRlciAmJiBkYXRvcy5mcm9udG1hdHRlci5lc3RhZG8gPT09IGVzdGFkbykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBpbmNsdWlkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIE9yZGVuYSBsYXMgbm90YXMgZmlsdHJhZGFzIHBvciBmZWNoYSBkZSBtb2RpZmljYWNpXHUwMEYzbiwgZGUgbGEgbVx1MDBFMXMgcmVjaWVudGUgYSBsYSBtXHUwMEUxcyBhbnRpZ3VhXG4gICAgICAgIG5vdGFzRmlsdHJhZGFzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWU7IC8vIERlc2NlbmRlbnRlXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICByZXR1cm4gbm90YXNGaWx0cmFkYXM7XG4gICAgfVxuICAgIFxufVxuIiwgIi8vIEVuIGFsZ1x1MDBGQW4gbHVnYXIgZGUgdHUgbVx1MDBGM2R1bG8sIGNvbW8gc2VhcmNoL0Z1enp5Tm90ZVN1Z2dlc3Rlci50c1xuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIEZ1enp5Tm90ZVN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgbm90YXM6IFRGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBnZXRJdGVtcygpOiBURmlsZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YXM7XG4gICAgfVxuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogVEZpbGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbS5iYXNlbmFtZTsgLy8gTyBjdWFscXVpZXIgb3RybyBmb3JtYXRvIHF1ZSBwcmVmaWVyYXNcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gQXF1XHUwMEVEIGRlZmluZXMgcXVcdTAwRTkgaGFjZXIgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW5hIG5vdGEuIFBvciBlamVtcGxvLCBhYnJpciBsYSBub3RhOlxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIGZhbHNlKTtcbiAgICAgICAgbGVhZi5vcGVuRmlsZShpdGVtKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBTdGF0dXNCYXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgU3RhdHVzQmFyRXh0ZW5zaW9uIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhciB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIgPSB0aGlzLnBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIC8vIFJlZ2lzdHJhciBldmVudG8gZmlsZS1vcGVuXG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlOiBURmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKGZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBkZXNhY3RpdmFkbywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IG51bGw7XG4gICAgICAgIC8vIE5vIG5lY2VzaXRhcyBkZXN1c2NyaWJpciBlbCBldmVudG8gYXF1XHUwMEVEIHNpIHVzYXMgcmVnaXN0ZXJFdmVudCwgT2JzaWRpYW4gbG8gbWFuZWphIGF1dG9tXHUwMEUxdGljYW1lbnRlLlxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU3RhdHVzQmFyKGZpbGU/OiBURmlsZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IGZpbGUgfHwgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghY3VycmVudEZpbGUgfHwgIXRoaXMuc3RhdHVzQmFyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhcj8uc2V0VGV4dCgnJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudEZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gZmlsZUNhY2hlLmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFtdO1xuICAgICAgICB0aGlzLnN0YXR1c0Jhci5zZXRUZXh0KGFsaWFzZXMubGVuZ3RoID4gMCA/IGBBbGlhczogJHthbGlhc2VzWzBdfWAgOiAnTm8gQWxpYXMnKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vaW5kZXgudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wb1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA0IDE3OjU4OjMwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MToyOFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJSaWJib25NZW51LCBkZWFjdGl2YXRlUmliYm9uTWVudSB9IGZyb20gXCIuL3JpYmJvbk1lbnVcIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGVsIHJpYmJvbiBzb2xvIHNlIHJlZ2lzdHJlIHNpIGFcdTAwRkFuIG5vIGhhIHNpZG8gcmVnaXN0cmFkb1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnJpYmJvbkJ1dHRvblJUKSB7XG4gICAgICAgICAgICByZWdpc3RlclJpYmJvbk1lbnUodGhpcy5wbHVnaW4pO1xuICAgICAgICB9XG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGRlYWN0aXZhdGVSaWJib25NZW51KHRoaXMucGx1Z2luKTtcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vcmliYm9uTWVudS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDQgMTc6NTg6MzBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ3OjE3XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgQXBwLCBNZW51LCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjdW1wbGVDb25kaWNpb24gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJSaWJib25NZW51KHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgLy8gRXN0ZSBlcyBlbCBcdTAwRURjb25vIGRlbCBtZW5cdTAwRkEgZW4gZWwgcmliYm9uLCBjYW1iaWEgXCJkaWNlXCIgcG9yIGVsIFx1MDBFRGNvbm8gcXVlIHByZWZpZXJhc1xuICAgIFxuICAgIHBsdWdpbi5yaWJib25CdXR0b25SVCA9IHBsdWdpbi5hZGRSaWJib25JY29uKFwiY2xvY2tcIiwgXCJSZWdpc3RybyBkZSBUaWVtcG9cIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCBtZW5cdTAwRkEgYWwgaGFjZXIgY2xpYyBlbiBlbCBcdTAwRURjb25vXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShwbHVnaW4uYXBwKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIG9wY2lvbmVzIGFsIG1lblx1MDBGQVxuICAgICAgICAvLyBMYSBvcGNpXHUwMEYzbiBhaG9yYSwgc29sbyBzZSBhY3RpdmEgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gZGUgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuLlxuICAgICAgICBpZiAoYXdhaXQgY3VtcGxlQ29uZGljaW9uKHBsdWdpbi5hcHApKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFob3JhXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWhvcmFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJhciBUaWVtcG9cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiUmVnaXN0cmFyIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cmFyIFRpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cblxuICAgICAgICAvLyBMYSBvcGNpXHUwMEYzbiBEZXRlbmVyIFJlZ2lzdHJvLCBzb2xvIHNlIGFjdGl2YSBzaSBoYXkgYWxnXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZW4gZWplY3VjaVx1MDBGM24uXG4gICAgICAgIGlmIChhd2FpdCBjdW1wbGVDb25kaWNpb24ocGx1Z2luLmFwcCkpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiRGV0ZW5lciBSZWdpc3Ryb1wiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIkRldGVuZXIgUmVnaXN0cm9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXRlbmVyIFJlZ2lzdHJvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiVGFyZWFzIGVuIHByb2dyZXNvXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlRhcmVhcyBlbiBwcm9ncmVzb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFyZWFzIGVuIHByb2dyZXNvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVnaXN0cm9zIGRlIGhveVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJSZWdpc3Ryb3MgZGUgaG95XCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3Ryb3MgZGUgaG95XCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBNb3N0cmFyIGVsIG1lblx1MDBGQSBlbiBsYSBwb3NpY2lcdTAwRjNuIGRlbCBjdXJzb3JcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVSaWJib25NZW51KHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgaWYgKHBsdWdpbi5yaWJib25CdXR0b25SVCkge1xuICAgICAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQucmVtb3ZlKCk7XG4gICAgICAgIHBsdWdpbi5yaWJib25CdXR0b25SVCA9IG51bGw7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3V0aWxzLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG9cbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNCAxODowMTowMlxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDc6MjlcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5cbi8vIExcdTAwRDNHSUNBIFBBUkEgQUNDRURFUiBBIExBUyBGVU5DSU9ORVMgREVTREUgTE9TIEJPVE9ORVMgUFJPUElPUyBERSBMQSBJTlRFUkZBWiBERSBPQlNJRElBTiAtPiBSSUJCT04sIEVUQ1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3VtcGxlQ29uZGljaW9uKGFwcDogQXBwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9SZWdpc3RybyBUaWVtcG9cIikpIHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgIFxuICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiB9XG5cblxuIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luKSB7XG4gICAgXG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8gcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4gU2UgZGVzY2FydGEgcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby5cIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb1xuICAgIFxuICAgIGxldCBtYXhJZCA9IDA7XG5cbiAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgXG4gICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBidXNjYXIgbG9zIElEcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgY29uc3QgbmV4dElkID0gbWF4SWQgKyAxO1xuXG4gICAgLy8gRm9ybWF0ZWFyIGxhIGZlY2hhIGFjdHVhbFxuICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSBmb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2byxcbiAgICAgICAgbm9tYnJlOiBhY3Rpdm8uYmFzZW5hbWUsXG4gICAgICAgIGZvbGRlcixcbiAgICAgICAgaW5kaWNlLFxuICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7aW5kaWNlfVwiYCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGNvbnN0IGRpYXMgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pXHUwMEU5cmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1NcdTAwRTFiYWRvJ107XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHRhcmVhc0FjdGl2YXMucHVzaCh7IGZpbGUsIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IG1vc3RyYXJTdWdlcmVuY2lhKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IGVzdFx1MDBFMSBjb3JyaWVuZG8uIFx1MDBCRkRlc2VhIGRldGVuZXJsYT9gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlc2VhRGV0ZW5lcikge1xuICAgICAgICAgICAgLy8gQVFVSSBWQSBMQSBJTVBMRU1FTlRBQ0lcdTAwRDNOIEFMIE5VRVZPIENcdTAwRDNESUdPIC0+IEVTVEEgTE9HSUNBIE1BTkVKQSBGVU5DSU9ORVMhICBcbiAgICAgICAgICAgIGF3YWl0IGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YSwgYXBwKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gc2VndWlyXHUwMEUxIHJlZ2lzdHJcdTAwRTFuZG9zZS5gKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gUmFzdHJlYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cblxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnU1x1MDBFRCcsXG4gICAgICAgIH0pO1xuICAgICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8nLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIGhhY2VyIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVzdWVsdmUgY29uIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7IC8vIFBhc28gYGFwcGAgY29tbyBhcmd1bWVudG9cbiAgICBsZXQgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb247XG4gICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJPdHJvXCJdO1xuICAgIH1cbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgIFxuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICAgIFxuICAgIC8vIEVzcGVyYSBhc2luY3JcdTAwRjNuaWNhbWVudGUgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYW50ZXMgZGUgY29udGludWFyLlxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgICAgICAgLy8gUHJvY2VzYXIgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYXF1XHUwMEVELlxuICAgICAgICAvLyBFbCBjXHUwMEYzZGlnbyBzdWJzaWd1aWVudGUgZGVwZW5kZSBkZWwgdGlwbyBkZSByZWdpc3RybyBzZWxlY2Npb25hZG8uXG4gICAgICAgIHN3aXRjaChyZWdpc3Ryby50aXBvUmVnaXN0cm8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIGF3YWl0IGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHJlZ2lzdHJvLnRpdHVsb0RlZmluaWRvICE9PSBcIk90cm9cIjsgLy8gQXN1bWUgcXVlIHNpIG5vIGVzIFwiT3Ryb1wiLCBlcyB1biBhc3VudG8gZXNwZWNcdTAwRURmaWNvLlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIGFkaWNpb25hbCBwYXJhIG1hbmVqYXIgXCJPdHJvXCIgbyBjYXNvcyBubyBlc3BlY2lmaWNhZG9zLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBlc3RhYmxlY2VyIHVuIHZhbG9yIHByZWRldGVybWluYWRvIHBhcmEgcmVnaXN0cm8uZGV0ZW5lciBhcXVcdTAwRUQuXG4gICAgfVxufVxuXG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoYXJjaGl2byA9PiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSk7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGNvbnRlbmlkby5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovZ20pIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgZXNwYWNpb3MgYWwgaW5pY2lvIGRlIGNhZGEgY29pbmNpZGVuY2lhIGFudGVzIGRlIGFncmVnYXJsYSBhbCBhcnJlZ2xvXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gY29pbmNpZGVuY2lhcy5tYXAodGFyZWEgPT4gdGFyZWEudHJpbSgpKTtcbiAgICAgICAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNMaW1waWFzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZWFzUGVuZGllbnRlcztcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhhcHA6IEFwcCwgcmVnaXN0cm86IGFueSwgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJFbGlnZSBsYSB0YXJlYSBxdWUgdmFzIGEgcmVnaXN0cmFyLlwiO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGFycmVnbG8gZGUgcHJvbWVzYXMgdXNhbmRvIG1hcCBwYXJhIHBhc2FyIGNhZGEgdGFyZWEgcG9yIGxpbXBpYXJUZXh0b1RhcmVhXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCh0YXJlYSA9PiBsaW1waWFyVGV4dG9UYXJlYSh0YXJlYSkpO1xuXG4gICAgICAgIC8vIFVzYXIgUHJvbWlzZS5hbGwgcGFyYSBlc3BlcmFyIGEgcXVlIHRvZGFzIGxhcyB0YXJlYXMgc2VhbiBwcm9jZXNhZGFzXG4gICAgICAgIFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcykudGhlbih0YXJlYXNMaW1waWFzID0+IHtcbiAgICAgICAgICAgIC8vIEVuIGVzdGUgcHVudG8sIHRhcmVhc0xpbXBpYXMgZXMgdW4gYXJyZWdsbyBjb24gdG9kYXMgbGFzIHRhcmVhcyBkZXNwdVx1MDBFOXMgZGUgc2VyIGxpbXBpYWRhc1xuICAgICAgICAgICAgLy8gQWhvcmEgcHVlZGVzIHVzYXIgdGFyZWFzTGltcGlhcyBlbiBvdHJhIGZ1bmNpXHUwMEYzblxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCB0YXJlYXNMaW1waWFzLCB0YXJlYXNMaW1waWFzLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCkudGhlbihzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gbGltcGlhclRleHRvVGFyZWEgKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIE1hbmVqYXIgcG9zaWJsZXMgZXJyb3Jlc1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkh1Ym8gdW4gZXJyb3IgYWwgbGltcGlhciBsYXMgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hIHRvZG8gZGVzcHVcdTAwRTlzIGRlbCBwcmltZXIgc2FsdG8gZGUgbFx1MDBFRG5lYS5cbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdCgnXFxuJylbMF07XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgdGFncyBkZSBlc3RpbG8gTWFya2Rvd24uXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyNbXFx3LS9dKy9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGluY2x1eWVuZG8gcG9zaWJsZXMgZXNwYWNpb3MgYW50ZXMgbyBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgJycpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uICAgIFxuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICAgICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgXG5cbmFzeW5jIGZ1bmN0aW9uIGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YTogeyBmaWxlOiBURmlsZTsgdGl0dWxvOiBzdHJpbmcgfSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFyY2FyIGxhIHRhcmVhIGNvbW8gbm8gYWN0aXZhLCBwcm9iYWJsZW1lbnRlIGFjdHVhbGl6YW5kbyBzdSBmcm9udG1hdHRlclxuICAgIGNvbnNvbGUubG9nKGBEZXRlbmllbmRvIGxhIHRhcmVhOiAke3RhcmVhQWN0aXZhLnRpdHVsb31gKTtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBzZSBwb2RyXHUwMEVEYSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHBhcmEgZGV0ZW5lciBsYSB0YXJlYVxuICAgIC8vIEVzdGEgZXMgdW5hIHNpbXBsaWZpY2FjaVx1MDBGM247IGxhIGltcGxlbWVudGFjaVx1MDBGM24gcmVhbCBkZXBlbmRlclx1MDBFRGEgZGUgY1x1MDBGM21vIGVzdFx1MDBFOXMgbWFuZWphbmRvIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgIGNvbnN0IG5ld0NvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoJ2VzdGFkbzogXHVEODNEXHVERkUyJywgJ2VzdGFkbzogXHVEODNEXHVERDM1Jyk7IC8vIENhbWJpYXIgYSBlc3RhZG8gbm8gYWN0aXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeSh0YXJlYUFjdGl2YS5maWxlLCBuZXdDb250ZW50cyk7XG59XG5cblxuXG5cblxuXG4gXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vY29tbWFuZHMudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wb1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA1IDE3OjAyOjM0XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MDoyNFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zLCBjcmVhck9iamV0b1JlZ2lzdHJvLCB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzLCBkZWZpbmlyVGlwb1JlZ2lzdHJvIH0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHttb2RhbF9BaG9yYX0gZnJvbSBcIi4vbW9kYWxzL21vZGFsX0Fob3JhXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBjb25zdCBpZDEgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcInJlZ2lzdHJvcy1kZS10aWVtcG8tZGVsLWRpYVwiLFxuICAgICAgICBuYW1lOiBcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIsXG4gICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3LmZpbGU/LnBhdGggfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhdGguc3RhcnRzV2l0aChcIkVzdHJ1Y3R1cmEvUGVyaW9kb3MvRGlhcmlvL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIGRlbCBjb21hbmRvXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cblxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQxLmlkKTtcblxuICAgIGNvbnN0IGlkMiA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiYWhvcmEtUmVnaXN0cm9UaWVtcG9cIixcbiAgICAgICAgbmFtZTogXCJUYXJlYSBhY3RpdmEgZW4gcmVnaXN0cm8gZGUgdGllbXBvXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmEgPSBhd2FpdCBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKHBsdWdpbi5hcHApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWFjdGl2YSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgbm90YXMgYWN0aXZhc1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYSB5IG11ZXN0cmEgZWwgbW9kYWwgcGVyc29uYWxpemFkbyBjb24gbGEgbm90YSBhY3RpdmFcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgbW9kYWxfQWhvcmEocGx1Z2luLmFwcCwgYWN0aXZhKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQyLmlkKTtcbiAgICBcbiAgICBjb25zdCBpZDMgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLXJlZ2lzdHJvLXRpZW1wb1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIFJlZ2lzdHJvIGRlIFRpZW1wb1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbik7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZWdpc3Rybykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgcGx1Z2luLmFwcClcbiAgICAgICAgICAgIGF3YWl0IGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm8scGx1Z2luLmFwcClcbiAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgc2UgdGllbmUgdW5hIGZ1bmNpXHUwMEYzbiBvIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgZWwgb2JqZXRvIGByZWdpc3Ryb2BcbiAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYSBzZXIgY3JlYXIgdW5hIG51ZXZhIG5vdGEgY29uIGxhIGluZm9ybWFjaVx1MDBGM24gZGUgYHJlZ2lzdHJvYFxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQzLmlkKTtcblxuICAgIFxuY29uc3QgaWQ0ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBcInZpc3RhLXJlZ2lzdHJvLXRpZW1wby1hY3RpdmFcIixcbiAgICBuYW1lOiBcIk1vc3RyYXIgUlQgQWN0aXZvXCIsXG4gICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gQXNlZ3VyYSBxdWUgbm8gaGF5YSBkdXBsaWNhZG9zIGRlIGxhIHZpc3RhLlxuICAgICAgICBhcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiKTtcblxuICAgICAgICAvLyBBYnJlIGxhIHZpc3RhIGVuIHVuYSBudWV2YSBob2phLlxuICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIixcbiAgICAgICAgfSk7XG4gXG4gICAgICAgIC8vIEFjdGl2YSBsYSBudWV2YSBob2phIHBhcmEgZWwgdXN1YXJpby5cbiAgICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIilbMF1cbiAgICAgICAgKTtcbiAgICAgICAgIFxuICAgICAgICBcbiAgICB9LFxufSk7XG4vLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG5wbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkNC5pZCk7XG5cbn1cblxuXG4vLyBFc3RhIHBhcnRlIGRlbCBjXHUwMEYzZGlnbyBzZXJcdTAwRURhIGhpcG90XHUwMEU5dGljYSB5IGRlcGVuZGUgZGUgY1x1MDBGM21vIGdlc3Rpb25hcyBlbCBlc3RhZG8geSBlbCBjaWNsbyBkZSB2aWRhIGRlIGxvcyBjb21hbmRvcyBlbiB0dSBwbHVnaW4uXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVCkgcmV0dXJuO1xuICAgIC8vIEVqZW1wbG8gZGUgY1x1MDBGM21vIHBvZHJcdTAwRURhcyBtYW5lamFyIGxhIFwiZGVzYWN0aXZhY2lcdTAwRjNuXCIgZGUgY29tYW5kb3MuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQuZm9yRWFjaCgoY29tbWFuZElkOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL21vZGFsX0Fob3JhLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDQgMTc6NTg6MzBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ2OjMzXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIG1vZGFsX0Fob3JhIGV4dGVuZHMgTW9kYWwge1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIGFwcDogQXBwO1xuICAgIGhvcmFJbmljaW9JbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuZmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgXCJBY3RpdmlkYWQgc2luIGFsaWFzXCI7XG4gICAgICAgIC8vIENvbnZlcnRpciBob3JhSW5pY2lvU3RyIGEgZm9ybWF0byBcIllZWVktTU0tRERUSEg6TU1cIiBwYXJhIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnN0IGhvcmFJbmljaW9TdHIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmhvcmFJbmljaW8gPyB3aW5kb3cubW9tZW50KG1ldGFkYXRhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpLmZvcm1hdChcIllZWVktTU0tRERUSEg6bW1cIikgOiAnJztcblxuICAgICAgICAvLyBDb25maWd1cmEgZWwgdFx1MDBFRHR1bG8gZGVsIG1vZGFsIHkgbXVlc3RyYSBlbCBhbGlhcyBkZSBsYSB0YXJlYVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUmVnaXN0cm8gZGUgYWN0aXZpZGFkLmAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFRhcmVhOiBcIiR7YWxpYXNlc31cImAgfSk7XG4gICAgICAgIGlmIChob3JhSW5pY2lvU3RyKSB7XG4gICAgICAgICAgICAvLyBVc2FyIG1vbWVudCBwYXJhIHBhcnNlYXIgbGEgZmVjaGEgZGUgaW5pY2lvIHkgY2FsY3VsYXIgbGEgZGlmZXJlbmNpYVxuICAgICAgICAgICAgY29uc3QgaG9yYUluaWNpbyA9IHdpbmRvdy5tb21lbnQoaG9yYUluaWNpb1N0ciwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgICAgICBjb25zdCBhaG9yYSA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBhaG9yYS5kaWZmKGhvcmFJbmljaW8pO1xuICAgICAgICAgICAgY29uc3QgZHVyYWNpb24gPSB3aW5kb3cubW9tZW50LmR1cmF0aW9uKGRpZmYpO1xuICAgICAgICAgICAgY29uc3QgZGlmZkZvcm1hdHRlZCA9IGAke2R1cmFjaW9uLmhvdXJzKCl9aCAke2R1cmFjaW9uLm1pbnV0ZXMoKX1tYDtcblxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgRXN0YSBhY3RpdmlkYWQgbGxldmEgJHtkaWZmRm9ybWF0dGVkfSBlbiBlamVjdWNpXHUwMEYzbi5gIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBcIk5vIHNlIHB1ZG8gZGV0ZXJtaW5hciBlbCB0aWVtcG8gZGUgaW5pY2lvIGRlIGxhIGFjdGl2aWRhZC5cIiB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnB1dCBwYXJhIGxhIGhvcmEgZGUgaW5pY2lvIGNvbiB0aXBvIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0hvcmEgZGUgaW5pY2lvOicgfSk7XG4gICAgICAgIHRoaXMuaG9yYUluaWNpb0lucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdkYXRldGltZS1sb2NhbCcsXG4gICAgICAgICAgICB2YWx1ZTogaG9yYUluaWNpb1N0clxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBjYW1iaW9zXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0d1YXJkYXIgY2FtYmlvcycgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZ3VhcmRhckNhbWJpb3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBndWFyZGFyQ2FtYmlvcygpIHtcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvTG9jYWwgPSB0aGlzLmhvcmFJbmljaW9JbnB1dC52YWx1ZTtcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxhIG51ZXZhIGhvcmEgdGllbmUgdmFsb3IgYW50ZXMgZGUgaW50ZW50YXIgZm9ybWF0ZWFyXG4gICAgICAgIGlmICghbnVldmFIb3JhSW5pY2lvTG9jYWwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW5hIGhvcmEgZGUgaW5pY2lvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBcIllZWVktTU0tRERUSEg6TU1cIiBhIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCJcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvID0gd2luZG93Lm1vbWVudChudWV2YUhvcmFJbmljaW9Mb2NhbCkuZm9ybWF0KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGNvbnRlbmlkbyBhY3R1YWwgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb09yaWdpbmFsID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpO1xuICAgICAgICAgICAgLy8gUmVlbXBsYXphciBsYSBsXHUwMEVEbmVhIGRlIGhvcmFJbmljaW8gY29uIGVsIG51ZXZvIHZhbG9yIGZvcm1hdGVhZG9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb0FjdHVhbGl6YWRvID0gY29udGVuaWRvT3JpZ2luYWwucmVwbGFjZSgvKGhvcmFJbmljaW86ICkuKi8sIGAkMSR7bnVldmFIb3JhSW5pY2lvfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHdWFyZGFyIGxvcyBjYW1iaW9zIGVuIGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIGNvbnRlbmlkb0FjdHVhbGl6YWRvKTtcblxuICAgICAgICAgICAgLy8gQ2VycmFyIGVsIG1vZGFsIGRlc3B1XHUwMEU5cyBkZSBndWFyZGFyIGxvcyBjYW1iaW9zXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSG9yYSBkZSBpbmljaW8gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhciBjYW1iaW9zIGVuIGxhIG5vdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBndWFyZGFyIGxvcyBjYW1iaW9zIGVuIGxhIG5vdGEuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8vIHNyYy9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHNcbmltcG9ydCB0eXBlIHsgUGx1Z2luTWFpblNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGx1Z2luTWFpblNldHRpbmdzID0ge1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogdHJ1ZSxcbiAgbW9kdWxvQWxpYXNTdGF0dXNCYXI6IHRydWUsXG4gIG1vZHVsb0Jhc2U6IHRydWUsXG4gIG1vZHVsb0dURDogdHJ1ZSxcbiAgbW9kdWxvVGFiVGl0bGU6IHRydWUsICAvLyBNb2R1bG8gdGl0dWxvIGRlIHBlc3RhXHUwMEYxYXMuXG4gIG1vZHVsb1Rhc2tNYW5hZ2VyOiB0cnVlLFxuICBtb2R1bG9EYXRhdmlld1F1ZXJpZXM6IHRydWUsXG4gIGZpbGVfY2FtcG9zQ2VudHJhbCA6XCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFNpc3RlbWEgQ2VudHJhbFwiLCBcbiAgZm9sZGVyX0Fub3RhY2lvbmVzOiBcIkFub3RhY2lvbmVzL05vdGFzXCIsXG4gIGluZGljZV9Bbm90YWNpb25lczogXCJBbm90YWNpb25lcy9JbmRpY2UgQW5vdGFjaW9uZXNcIixcbiAgZm9sZGVyX0FCbG9nOiBcIlN1YnNpc3RlbWFzL0FydGljdWxvcyBCbG9nL0FydGljdWxvc1wiLFxuICBpbmRpY2VfQUJsb2c6IFwiU3Vic2lzdGVtYXMvQXJ0aWN1bG9zIEJsb2cvSW5kaWNlIEFydGljdWxvcyBCbG9nXCIsXG4gIGZvbGRlcl9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9Db2RpZ29zXCIsXG4gIGluZGljZV9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9JbmRpY2UgRGVzYXJyb2xsb1wiLFxuICBmb2xkZXJfRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Fc3R1ZGlvL1RlbWFzXCIsXG4gIGluZGljZV9Fc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0VzdHVkaW8vSW5kaWNlIEVzdHVkaW9cIixcbiAgZm9sZGVyX1JlcG9zaXRvcmlvTGlicm9zOiBcIlN1YnNpc3RlbWFzL0xpYnJvcy9SZXBvc2l0b3Jpb1wiLFxuICBpbmRpY2VfUmVwb3NpdG9yaW9MaWJyb3M6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0luZGljZSBSZXBvc2l0b3JpbyBMaWJyb3NcIixcbiAgZm9sZGVyX0JpYmxpb3RlY2E6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0JpYmxpb3RlY2FcIixcbiAgaW5kaWNlX0JpYmxpb3RlY2E6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0luZGljZSBCaWJsaW90ZWNhXCIsXG4gIGZvbGRlcl9LaW5kbGVOb3RlczogXCJTdWJzaXN0ZW1hcy9MaWJyb3MvS2luZGxlXCIsXG4gIGluZGljZV9LaW5kbGVOb3RlczogXCJTdWJzaXN0ZW1hcy9MaWJyb3MvS2luZGxlL0luZGljZSBLaW5kbGVcIixcbiAgLy9mb2xkZXJfTGVjdHVyYVNlc2lvbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvU2VzaW9uZXMgZGUgTGVjdHVyYS9TZXNpb25lc1wiLFxuICAvL2luZGljZV9MZWN0dXJhU2VzaW9uZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9TZXNpb25lcyBkZSBMZWN0dXJhL0luZGljZSBTZXNpb25lcyBMZWN0dXJhXCIsXG4gIGZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvTGlicm9zL1Jlc3VtZW5lc1wiLFxuICBpbmRpY2VfTGVjdHVyYVJlc3VtZW5lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL0xpYnJvcy9JbmRpY2UgUmVzdW1lbmVzXCIsXG4gIGZvbGRlcl9NZW50b3JpYXM6IFwiU3Vic2lzdGVtYXMvTWVudG9yaWFzL1Nlc2lvbmVzIE1lbnRvcmlhXCIsXG4gIGluZGljZV9NZW50b3JpYXM6IFwiU3Vic2lzdGVtYXMvTWVudG9yaWFzL0luZGljZSBNZW50b3JpYXNcIixcbiAgZm9sZGVyX01lcmNhZG86IFwiU3Vic2lzdGVtYXMvTWVyY2Fkby9MaXN0YXNcIixcbiAgaW5kaWNlX01lcmNhZG86IFwiU3Vic2lzdGVtYXMvTWVyY2Fkby9JbmRpY2UgTWVyY2Fkb1wiLFxuICBmb2xkZXJfTW9kdWxvc1Npc3RlbWE6IFwiU3Vic2lzdGVtYXMvTW9kdWxvcyBTaXN0ZW1hIEdlc3Rpb24vTW9kdWxvc1wiLFxuICBpbmRpY2VfTW9kdWxvc1Npc3RlbWE6IFwiU3Vic2lzdGVtYXMvTW9kdWxvcyBTaXN0ZW1hIEdlc3Rpb24vSW5kaWNlIE1vZHVsb3NcIixcbiAgZm9sZGVyX1RyYW5zYWNjaW9uZXM6IFwiU3Vic2lzdGVtYXMvVHJhbnNhY2Npb25lc1wiLFxuICBpbmRpY2VfVHJhbnNhY2Npb25lczogXCJTdWJzaXN0ZW1hcy9UcmFuc2FjY2lvbmVzL0luZGljZSBUcmFuc2FjY2lvbmVzXCIsXG4gIGZvbGRlcl9QcmVzZW50YWNpb25lczogXCJTdWJzaXN0ZW1hcy9QcmVzZW50YWNpb25lcy9Ob3Rhc1wiLFxuICBpbmRpY2VfUHJlc2VudGFjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHJlc2VudGFjaW9uZXMvSW5kaWNlIFByZXNlbnRhY2lvbmVzXCIsXG4gIGZvbGRlcl9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvUGllemFzXCIsXG4gIGluZGljZV9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvSW5kaWNlIFB1YmxpY2FjaW9uZXNcIixcbiAgZm9sZGVyX1JlY2V0YXM6IFwiU3Vic2lzdGVtYXMvUmVjZXRhcy9SZWNldGFzXCIsXG4gIGluZGljZV9SZWNldGFzOiBcIlN1YnNpc3RlbWFzL1JlY2V0YXMvSW5kaWNlIFJlY2V0YXNcIixcbiAgZm9sZGVyX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9SZWdpc3Ryb3NcIixcbiAgaW5kaWNlX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9JbmRpY2UgUmVnaXN0cm8gVGllbXBvXCIsXG4gIGZvbGRlcl9Db250ZW5pZG9QYXJhRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Db250ZW5pZG8gcGFyYSBFc3R1ZGlvL0NvbnRlbmlkb1wiLFxuICBpbmRpY2VfQ29udGVuaWRvUGFyYUVzdHVkaW86IFwiU3Vic2lzdGVtYXMvQ29udGVuaWRvIHBhcmEgRXN0dWRpby9JbmRpY2UgQ29udGVuaWRvIHBhcmEgRXN0dWRpb1wiLFxuXG5cbiAgLy8gRXN0cnVjdHVyYVxuICBmb2xkZXJfQXJlYXNWaWRhOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYVwiLFxuICBpbmRpY2VfQXJlYXNWaWRhOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYS9JbmRpY2UgQXJlYXMgZGUgVmlkYVwiLFxuICBmb2xkZXJfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlcy9JbmRpY2UgQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBmb2xkZXJfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlcy9JbmRpY2UgVGVtYXMgZGUgSW50ZXJlc1wiLFxuICBmb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlczogXCJFc3RydWN0dXJhL1JlY3Vyc29zIFJlY3VycmVudGVzL1JlY3Vyc29zXCIsXG4gIGluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzOiBcIkVzdHJ1Y3R1cmEvUmVjdXJzb3MgUmVjdXJyZW50ZXMvSW5kaWNlIFJlY3Vyc29zIFJlY3VycmVudGVzXCIsXG4gIGZvbGRlcl9Qcm95ZWN0b3NROiBcIkVzdHJ1Y3R1cmEvUHJveWVjdG9zIGRlIFFcIixcbiAgaW5kaWNlX1Byb3llY3Rvc1E6IFwiRXN0cnVjdHVyYS9Qcm95ZWN0b3MgZGUgUS9JbmRpY2UgUHJveWVjdG9zIGRlIFFcIixcblxuXG4gIGZpbGVfSW5ib3g6IFwiRXN0cnVjdHVyYS9HVEQvQmFuZGVqYSBkZSBFbnRyYWRhL0JhbmRlamEgZGUgRW50cmFkYVwiLFxuICBmb2xkZXJfUHJveWVjdG9zR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1Byb3llY3RvcyBHVEQvUHJveWVjdG9zXCIsXG4gIGluZGljZV9Qcm95ZWN0b3NHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUHJveWVjdG9zIEdURC9JbmRpY2UgUHJveWVjdG9zIEdURFwiLFxuICBmb2xkZXJfUlNHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUmV2aXNpb24gU2VtYW5hbC9SZXZpc2lvbmVzXCIsXG4gIGluZGljZV9SU0dURDogXCJFc3RydWN0dXJhL0dURC9SZXZpc2lvbiBTZW1hbmFsL0luZGljZSBSZXZpc2lvbiBTZW1hbmFsXCIsXG4gIGZvbGRlcl9TaXN0ZW1hR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1Npc3RlbWEgR1REL1Npc3RlbWFcIixcbiAgaW5kaWNlX1Npc3RlbWFHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvU2lzdGVtYSBHVEQvSW5kaWNlIFNpc3RlbWEgR1REXCIsXG4gIFxuXG4gIC8vIEpvdXJuYWxcbiAgZm9sZGVyX0RpYXJpbzogXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCIsXG4gIGluZGljZV9EaWFyaW86IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9JbmRpY2UgRGlhcmlvXCIsXG4gIGZvbGRlcl9TZW1hbmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9TZW1hbmFsL05vdGFzXCIsXG4gIGluZGljZV9TZW1hbmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9TZW1hbmFsL0luZGljZSBTZW1hbmFsXCIsXG4gIGZvbGRlcl9NZW5zdWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9NZW5zdWFsL05vdGFzXCIsXG4gIGluZGljZV9NZW5zdWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9NZW5zdWFsL0luZGljZSBNZW5zdWFsXCIsXG4gIGZvbGRlcl9UcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9UcmltZXN0cmFsL05vdGFzXCIsXG4gIGluZGljZV9UcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9UcmltZXN0cmFsL0luZGljZSBUcmltZXN0cmFsXCIsXG4gIGZvbGRlcl9BbnVhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvQW51YWwvTm90YXNcIixcbiAgaW5kaWNlX0FudWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9BbnVhbC9JbmRpY2UgQW51YWxcIixcblxuICAvLyBDT01QQVNTXG4gIGZvbGRlcl9Db21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0FudWFsXCIsXG4gIGluZGljZV9Db21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0luZGljZSBDb21wYXNzIEFudWFsXCIsXG4gIGZvbGRlcl9Db21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvUmVwb3J0ZXMvVHJpbWVzdHJhbFwiLFxuICBpbmRpY2VfQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0luZGljZSBDb21wYXNzIHRyaW1lc3RyYWxcIixcbiAgZm9sZGVyX09iakNvbXBhc3NBbnVhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL0FudWFsXCIsXG4gIGluZGljZV9PYmpDb21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9JbmRpY2UgQ29tcGFzcyBBbnVhbFwiLFxuICBmb2xkZXJfT2JqQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9UcmltZXN0cmFsXCIsXG4gIGluZGljZV9PYmpDb21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL0luZGljZSBDb21wYXNzIHRyaW1lc3RyYWxcIixcblxuXG4gICAvLyBSZWdpc3Ryb3MgUGVyc29uYWxlc1xuICAgZm9sZGVyX0FncmFkZWNpbWllbnRvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9BZ3JhZGVjaW1pZW50b3MvTm90YXNcIixcbiAgIGluZGljZV9BZ3JhZGVjaW1pZW50b3M6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvQWdyYWRlY2ltaWVudG9zL0luZGljZSBBZ3JhZGVjaW1pZW50b3NcIixcbiAgIGZvbGRlcl9SZWZsZXhpb25lczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWZsZXhpb25lcy9Ob3Rhc1wiLFxuICAgaW5kaWNlX1JlZmxleGlvbmVzOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZmxleGlvbmVzL0luZGljZSBSZWZsZXhpb25lc1wiLFxuICAgZm9sZGVyX1JlZ2lzdHJvc0FrYXNoaWtvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWdpc3Ryb3MgQWthc2hpa29zL05vdGFzXCIsXG4gICBpbmRpY2VfUmVnaXN0cm9zQWthc2hpa29zOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZ2lzdHJvcyBBa2FzaGlrb3MvSW5kaWNlIFJlZ2lzdHJvcyBBa2FzaGlrb3NcIixcbiAgIFxufTtcblxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTI0IDAxOjE4OjM4XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbi8qIHNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJLnRzICovXG5pbXBvcnQgeyBURmlsZSwgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtEYXRlVGltZSAsIER1cmF0aW9ufSBmcm9tICdsdXhvbic7XG4vLyBJbnRlcmZhY2VzXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9Ob3RlRmllbGRIYW5kbGVyJztcbi8vIEZpbGVIYW5kbGVyc1xuaW1wb3J0IHsgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL1JlZmxleGlvbmVzRmllbGRIYW5kbGVycyc7XG5pbXBvcnQgeyBDb250ZW5pZG9QYXJhRXN0dWRpb0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQ1BFRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFJlY3Vyc29zUmVjdXJyZW50ZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL1JSRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFBHVERGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUEdUREZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBQUUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9QUUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVHJhbnNhY2Npb25lc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvVHJhbnNhY2Npb25lc0ZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBBcmVhc0ludGVyZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEFyZWFWaWRhRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFWaWRhRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9ub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL09iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBDb21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9Db21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIJztcbmltcG9ydCB7IFJlcG9zaXRvcmlvTGlicm9zX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZXBvc2l0b3Jpb0xpYnJvc19GSCc7XG5pbXBvcnQgeyBCaWJsaW90ZWNhX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9CaWJsaW90ZWNhX0ZIJztcbmltcG9ydCB7IEFudWFsX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9BbnVhbF9GSCc7XG5pbXBvcnQgeyBUcmltZXN0cmFsRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9UcmltZXN0cmFsRmllbGRIYW5kbGVyJztcbi8vIG9ic2lkaWFuXG5cbmV4cG9ydCBjbGFzcyBzdGFydGVyQVBJIHtcbiAgICAvL3ByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogb2JqZWN0OyAvLyBBc3VtaWVuZG8gcXVlIGVzIHVuIHN0cmluZ1xuICAgIHByaXZhdGUgdHA6IG9iamVjdDtcbiAgICBwcml2YXRlIG5vdGE6IG9iamVjdDtcbiAgICBwcml2YXRlIHBhdGhDYW1wb3M6IHN0cmluZzsgXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBmb2xkZXIgZSBpbmRpY2UgZ2V0Y29uIHZhbG9yZXMgcHJlZGV0ZXJtaW5hZG9zIG8gbFx1MDBGM2dpY2EgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0ge307XG4gICAgICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuICAgIFxuICAgXG5cblxuICAgIGFzeW5jIGZpbGxOb3RlKGluZm9TdWJzaXN0ZW1hOiB7IGZvbGRlcjogc3RyaW5nOyBpbmRpY2U6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB9LCBjYW1wb3M6IGFueSkge1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvU3Vic2lzdGVtYSwgaW5mb1N1YnNpc3RlbWEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuaW5mb1N1YnNpc3RlbWEuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuZm9sZGVyXTtcbiAgICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmluZGljZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmluZGljZV07XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm5vdGEsIGluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBsZXQgZmllbGRIYW5kbGVyOiBOb3RlRmllbGRIYW5kbGVyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJBZ3JcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBBZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBQR1RERmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IFBRRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEFub3RhY2lvbmVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJDUEVcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBDb250ZW5pZG9QYXJhRXN0dWRpb0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZWN1cnNvc1JlY3VycmVudGVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IFRyYW5zYWNjaW9uZXNGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEFyZWFWaWRhRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIk9DQVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IE9iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQ0FJXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQ29tcGFzc1BsYW5lYWNpb25BbnVhbF9GSCh0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUkxcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZXBvc2l0b3Jpb0xpYnJvc19GSCh0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiTEJcIjpcbiAgICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEJpYmxpb3RlY2FfRkgodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUnhcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzZSBoYSBkZWZpbmlkbyB1biBtYW5lamFkb3IgZGUgY2FtcG9zIHBhcmEgZWwgdGlwbyAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRIYW5kbGVyW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb10gPSBhd2FpdCBmaWVsZEhhbmRsZXJbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgIG5vdGEgPSBhd2FpdCBmaWVsZEhhbmRsZXIuZ2V0Tm90YSgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRoaXMubm90YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFba2V5XSA9IG5vdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG5cbiAgICAgLy8gQ3JlYXIgTm90YSBkZXNkZSB0ZW1wbGF0ZVxuICAgICBhc3luYyBjcmVhdGVOb3RlKHN1YnNpc3RlbWE6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyXyR7c3Vic2lzdGVtYX1gXX0vUGx0IC0gJHtzdWJzaXN0ZW1hfS5tZGA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciBlbCBhcmNoaXZvIHBvciBwYXRoXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBhcmNoaXZvIGVzIHVuIFRGaWxlXG4gICAgICAgICAgICBpZiAoISh0ZW1wbGF0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBURmlsZSwgbWFuZWphciBlbCBlcnJvclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRWwgdGVtcGxhdGUgcGFyYSBcIiR7c3Vic2lzdGVtYX1cIiBubyBzZSBlbmNvbnRyXHUwMEYzIG8gbm8gZXMgdW4gYXJjaGl2byB2XHUwMEUxbGlkby5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGR0Q29uc2VxID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXktTU0tZGQgSEhtbXNzJyk7XG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGAke3N1YnNpc3RlbWF9ICR7ZHRDb25zZXF9YDtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMYSBjYXJwZXRhIFwiSW5ib3hcIiBubyBzZSBlbmNvbnRyXHUwMEYzLmApO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNyZWFyTm90YSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGEgZnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgbm90YXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlRmlsZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBtYW5lamFyIGVsIGVycm9yLCBwb3IgZWplbXBsbywgbW9zdHJhbmRvIHVuIG1lbnNhamUgYWwgdXN1YXJpb1xuICAgICAgICAgICAgLy8gUHVlZGVzIHJlZW1wbGF6YXIgZXN0ZSBtZW5zYWplIGRlIGVycm9yIHBvciBjdWFscXVpZXIgYWNjaVx1MDBGM24gcXVlIGNvbnNpZGVyZXMgYWRlY3VhZGFcbiAgICAgICAgICAgIGFsZXJ0KGBFcnJvciBhbCBjcmVhciBsYSBub3RhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRPdHJvc0FzdW50b3Moc3Vic2lzdGVtYXMpIHtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgY2FtcG8gPSBbXTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgc3Vic2lzdGVtYSBvZiBzdWJzaXN0ZW1hcykge1xuICAgICAgICAgICAgLy8gUHJlZ3VudGEgaW5pY2lhbCBwYXJhIGluY2x1aXIgYWxnXHUwMEZBbiBzdWJzaXN0ZW1hIGNvbW8gb3JpZ2VuXG4gICAgICAgICAgICBsZXQgaW5jbHV5ZSA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBgRGVzZWEgYWdyZWdhciBhbGd1biAke3N1YnNpc3RlbWF9IGFjdGl2byBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgIGlmICghaW5jbHV5ZSkgY29udGludWU7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBjb250aW5cdTAwRkFhIGNvbiBlbCBzaWd1aWVudGUgc3Vic2lzdGVtYVxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGxldCByZWN1cnNvc0FjdGl2b3MgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhzdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIGxldCBwcmltZXJBbGlhcyA9IHJlY3Vyc29zQWN0aXZvcy5tYXAoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YSAmJiBtZXRhZGF0YS5hbGlhc2VzICYmIG1ldGFkYXRhLmFsaWFzZXMubGVuZ3RoID4gMCA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICBcbiAgICAgICAgICAgIHdoaWxlIChyZWN1cnNvc0FjdGl2b3MubGVuZ3RoID4gMCkgeyAvLyBDb250aW5cdTAwRkFhIG1pZW50cmFzIGhheWEgcmVjdXJzb3MgYWN0aXZvcyBwYXJhIGVsZWdpclxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2VTZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIucGF0aCksIGZhbHNlLCBgJHtzdWJzaXN0ZW1hfSBhY3Rpdm9zOmApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIHkgZWxpbWluYSBsYSBzZWxlY2NpXHUwMEYzbiBkZSBsb3MgYXJyZWdsb3MgcGFyYSBubyB2b2x2ZXIgYSBtb3N0cmFybGFcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIFx1MDBFRG5kaWNlIGRlbCBhcmNoaXZvIHNlbGVjY2lvbmFkbyBlbiByZWN1cnNvc0FjdGl2b3MgYmFzXHUwMEUxbmRvbm9zIGVuIGVsIGJhc2VuYW1lXG4gICAgICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLnBhdGggPT09IHNlbGVjY2lvbik7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIuYmFzZW5hbWUpLCBmYWxzZSwgYCR7c3Vic2lzdGVtYX0gYWN0aXZvczpgKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAvLyBFbmN1ZW50cmEgeSBlbGltaW5hIGxhIHNlbGVjY2lcdTAwRjNuIGRlIGxvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsYVxuICAgICAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBcdTAwRURuZGljZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gZW4gcmVjdXJzb3NBY3Rpdm9zIGJhc1x1MDBFMW5kb25vcyBlbiBlbCBiYXNlbmFtZVxuICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLmJhc2VuYW1lID09PSBzZWxlY2Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNlU2VsZWNjaW9uYWRvICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW1wby5wdXNoKHJlY3Vyc29zQWN0aXZvc1tpbmRpY2VTZWxlY2Npb25hZG9dLnBhdGgpOyAvLyBBZ3JlZ2EgZWwgYmFzZW5hbWUgZGVsIGFyY2hpdm8gc2VsZWNjaW9uYWRvIGFsIGNhbXBvICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2FtcG8ucHVzaChyZWN1cnNvc0FjdGl2b3NbaW5kaWNlU2VsZWNjaW9uYWRvXS5iYXNlbmFtZSk7IC8vIEFncmVnYSBlbCBiYXNlbmFtZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gYWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBFbGltaW5hIGVsIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBkZSBhbWJvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsb1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNvc0FjdGl2b3Muc3BsaWNlKGluZGljZVNlbGVjY2lvbmFkbywgMSk7XG4gICAgICAgICAgICAgICAgICAgIHByaW1lckFsaWFzLnNwbGljZShpbmRpY2VTZWxlY2Npb25hZG8sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBxdWVkYW4gbVx1MDBFMXMgcmVjdXJzb3MgYWN0aXZvcywgbm8gcHJlZ3VudGEgc2kgZGVzZWEgYWdyZWdhciBvdHJvXG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc29zQWN0aXZvcy5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFByZWd1bnRhIHNpIGRlc2VhIGFncmVnYXIgb3RybyByZWdpc3RybyBkZWwgbWlzbW8gc3Vic2lzdGVtYVxuICAgICAgICAgICAgICAgIGxldCBkZXNlYUFncmVnYXJPdHJvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIGBEZXNlYSBhZ3JlZ2FyIG90cm8gJHtzdWJzaXN0ZW1hfSBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIGlmICghZGVzZWFBZ3JlZ2FyT3RybykgYnJlYWs7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBzYWxlIGRlbCBjaWNsb1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBjYW1wbzsgLy8gUmV0b3JuYSBlbCBhcnJlZ2xvIGNhbXBvIGNvbiB0b2RhcyBsYXMgc2VsZWNjaW9uZXMgcmVhbGl6YWRhc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBGVU5DSU9OIFFVRSBUUkFFIFRPREFTIExBUyBOT1RBUyBBQ1RJVkFTIERFIExPUyBTSVNURU1BUy4gLSBSZXZpc2FyIGVuIHF1ZSBsYSB1c28uLi5cbiAgICBhc3luYyBhY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXModHlwZU5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSl7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJlYXNJbnRlcmVzXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hIGVsIG5vbWJyZSBkZSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGJhc2FkbyBlbiBlbCB0aXBvXG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyTmFtZSA9IFwiZm9sZGVyX1wiICsgdHlwZU5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbcmVzb3VyY2VGb2xkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGV4aXN0ZSBwYXJhIGV2aXRhciBlcnJvcmVzXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNvdXJjZUZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBjYXJwZXRhIFwiJHtyZXNvdXJjZUZvbGRlck5hbWV9XCIgbm8gZXhpc3RlIGVuIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIFJldG9ybmEgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIGxhIGNhcnBldGEgbm8gZXhpc3RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVSZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGaWx0cmEgbG9zIGFyY2hpdm9zIHF1ZSBlc3RcdTAwRTFuIGRlbnRybyBkZWwgZGlyZWN0b3JpbyBkZXNlYWRvIHkgdGllbmVuIGVzdGFkbyBcdUQ4M0RcdURGRTJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVzb3VyY2VGb2xkZXIpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgZXN0YWRvcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSZXNvdXJjZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IC8vIEZpbiBTd2l0Y2hcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVSZXNvdXJjZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYnVzY2FyIHJlY3Vyc29zIGFjdGl2b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0b3JuYSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gZW4gY2FzbyBkZSBlcnJvclxuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuICAiLCAiaW1wb3J0IHsgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIEFncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgLy8gZ2V0RmVjaGEgcGFyYSBkZXRlcm1pbmFyIHNpIGxhIGZlY2hhIGRlIGxhIHF1ZSBpbmljaWEgZXN0YSBlbiBlbCBhcmNoaXZvIGRlIG9yaWdlbi5cbiAgICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IGZlY2hhO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMudHAuZmlsZS5keW5hbWljX2Z1bmN0aW9ucy5nZXQoXCJ0aXRsZVwiKTtcbiAgICBcbiAgICAgICAgaWYgKHRpdGxlICYmIHRpdGxlLnN0YXJ0c1dpdGgoXCJBZ3JhZGVjaW1pZW50b1wiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJBZ3JhZGVjaW1pZW50byBcIilbMV07XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZvLnBhdGggJiYgYWN0aXZvPy5wYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCIpKSB7XG4gICAgICAgICAgZmVjaGEgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgZGRkZCcpO1xuICAgICAgICAgIGZlY2hhID0gYXdhaXQgdGhpcy5wcm9tcHQoXCJcdTAwQkZEZSBxdVx1MDBFOSBkaWEgZXMgZWwgYWdyYWRlY2ltaWVudG8/P1wiLCBjdXJyZW50RGF0ZSAsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGE7XG4gICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgIH1cblxuICBhc3luYyBnZXRBZ3JhZGVjaW1pZW50b3MoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGxldCBhZ3JhZGVjaW1pZW50b3MgPSBbXTtcbiAgICBsZXQgbnVtQWdyYWRlY2ltaWVudG9zID0gMDtcbiAgICBsZXQgb3RyYTtcbiAgICBkbyB7XG4gICAgICBjb25zdCBhZ3JhZGVjaW1pZW50byA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZXN0XHUwMEUxcyBhZ3JhZGVjaWRvP1wiLCBgR3JhY2lhcyBwb3IgJHtudW1BZ3JhZGVjaW1pZW50b3N9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgYWdyYWRlY2ltaWVudG9zLnB1c2goYWdyYWRlY2ltaWVudG8pO1xuICAgICAgbnVtQWdyYWRlY2ltaWVudG9zICs9IDE7XG4gICAgICBvdHJhID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU1x1MDBFRFwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciBvdHJvIGFncmFkZWNpbWllbnRvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gYWdyYWRlY2ltaWVudG9zO1xuICB9XG5cbn0iLCAiaW1wb3J0IHsgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgRmllbGRIYW5kbGVyVXRpbHMge1xuICBzdGF0aWMgYXN5bmMgY3JlYXJDYXJwZXRhKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZVxuICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gIC8vIEVzdGEgZnVuY2lcdTAwRjNuIHNhbGUgZGUgbWVudU90cm8sIGRlIHJlZ2lzdHJvIFRpZW1wby4gUmV2aXNhciBzaSBkZWJvIHNpbmNyb25pemFybGFzLlxuICBzdGF0aWMgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZSh0aXBvOiBzdHJpbmcsIHBhcmFtZXRybzogYW55LCBwbHVnaW46IGFueSkge1xuICAgIGNvbnN0IHByb3BlcnRpZXNUaXBvID0ge1xuICAgICAgQVY6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgIH0sXG4gICAgICBBSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFBROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgfSxcbiAgICAgIFBHVEQ6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgIH0sXG4gICAgICBUSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVGVtYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFJSOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzLFxuICAgICAgfSxcbiAgICAgIFRROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmltZXN0cmFsLFxuICAgICAgfSxcbiAgICAgIEFZOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BbnVhbCxcbiAgICAgIH0sXG4gICAgICAvLyBQdWVkZXMgY29udGludWFyIGFcdTAwRjFhZGllbmRvIG1cdTAwRTFzIGNhc29zIGFxdVx1MDBFRFxuICAgIH07XG5cbiAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgdGlwbyBlcyB1bmEgcHJvcGllZGFkIHZcdTAwRTFsaWRhIGFudGVzIGRlIGRlc2VzdHJ1Y3R1cmFyXG4gICAgaWYgKCFwcm9wZXJ0aWVzVGlwb1t0aXBvXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaXBvICR7dGlwb30gbm8gZXMgdlx1MDBFMWxpZG8uYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIgPSBbXTtcbiAgICBsZXQgZmlsZXMsIHRyaW1lc3RyZTogc3RyaW5nO1xuICAgIGNvbnN0IGZvbGRlciA9IHByb3BlcnRpZXNUaXBvW3RpcG9dLmZvbGRlcjtcbiAgICBzd2l0Y2ggKHRpcG8pIHtcbiAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICBpZiAoIXBhcmFtZXRybykgeyAvLyBwYXJhbWV0cm8gZW4gZXN0ZSBjYXNvIGVzIGVsIHRyaW1lc3RyZS4gU2luIHBhcmFtZXRybyBzZSBidXNjYSBlbCBub2RvQXJlYVZpZGFcbiAgICAgICAgICB0cmltZXN0cmUgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3VhbmRvIGVsIHRyaW1lc3RyZSBzaSBzZSBpbmdyZXNhIGVuIGxhIGZ1bmNpXHUwMEYzbiwgZW50b25jZXMgYnVzY2EgbGFzIEFyZWFzVmlkYSBkZWwgdHJpbWVzdHJlLlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0cmltZXN0cmUgPSBwYXJhbWV0cm87XG4gICAgICAgIH1cblxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSAmJiBmaWxlLm5hbWUuc3RhcnRzV2l0aCh0cmltZXN0cmUpKTtcblxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICBjYXNlIFwiVFFcIjpcbiAgICAgIGNhc2UgXCJBWVwiOlxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSk7XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpKTtcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVGaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgYWN0aXZlRmlsZS5maWxlID0gZmlsZTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goYWN0aXZlRmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gIH1cbn0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL05vdGVGaWVsZEhhbmRsZXJCYXNlJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIE5vdGVGaWVsZEhhbmRsZXJCYXNle1xuICBwcml2YXRlIHRwOiBhbnk7XG4gIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IGFueTtcbiAgcHJpdmF0ZSBzdWdnZXN0ZXI6IGFueTtcbiAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgcHJpdmF0ZSBmZWNoYUFncjogc3RyaW5nO1xuICBwcml2YXRlIHBsdWdpbjogYW55OyBcblxuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgIHRoaXMudHAgPSB0cDtcbiAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0gaW5mb1N1YnNpc3RlbWE7XG4gICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgdGhpcy5wcm9tcHQgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47IC8vIEFsbWFjZW5hciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBcbiAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICB9XG5cbiAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBsZXQgbWF4SWQgPSAwO1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtYXhJZCArIDE7XG4gIH1cblxuICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICBjb25zdCBjdXJyZW50RGF5ID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke2N1cnJlbnREYXRlfSAke2N1cnJlbnREYXl9YDtcbiAgICB0aGlzLm5vdGEuZmVjaGEgPSBmb3JtYXR0ZWREYXRlO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xufVxuXG4gIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5nZXRJZCgpO1xuICAgIHJldHVybiBbYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0gJHtpZH1gXTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGZlY2hhID0gdGhpcy5ub3RhLmZlY2hhO1xuICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfSAke2ZlY2hhfS5tZGA7XG4gICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKTtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7IC8vIExhbnphbW9zIHVuYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBMYW56YW1vcyBsYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgIH1cbiAgfVxuXG5cbiAgYXN5bmMgZ2V0RXN0YWRvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICB9XG5cbiAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm5vdGE7XG59XG5cbn0iLCAiaW1wb3J0IHsgcmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL1JlZmxleGlvbmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICAvLyBnZXRGZWNoYSBwYXJhIGRldGVybWluYXIgc2kgbGEgZmVjaGEgZGUgbGEgcXVlIGluaWNpYSBlc3RhIGVuIGVsIGFyY2hpdm8gZGUgb3JpZ2VuLlxuICAgIGFzeW5jIGdldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGE7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50cC5maWxlLmR5bmFtaWNfZnVuY3Rpb25zLmdldChcInRpdGxlXCIpO1xuICAgIFxuICAgICAgICBpZiAodGl0bGUgJiYgdGl0bGUuc3RhcnRzV2l0aChcIlJlZmxleGlvblwiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJSZWZsZXhpb24gXCIpWzFdO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGl2by5wYXRoICYmIGFjdGl2bz8ucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9Ob3Rhc1wiKSkge1xuICAgICAgICAgIGZlY2hhID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIGRkZGQnKTtcbiAgICAgICAgICBmZWNoYSA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZGlhIGVzIGxhIHJlZmxleGlcdTAwRjNuPz9cIiwgY3VycmVudERhdGUgLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS5mZWNoYSA9IGZlY2hhO1xuICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgICB9XG5cbiAgYXN5bmMgZ2V0UmVmbGV4aW9uKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBsZXQgcmVmbGV4aW9uZXMgPSBbXTtcbiAgICBsZXQgbnVtUmVmbGV4aW9uZXMgPSAwO1xuICAgIGxldCBvdHJhO1xuICAgIGRvIHtcbiAgICAgIGNvbnN0IHJlZmxleGlvbiA9IGF3YWl0IHRoaXMucHJvbXB0KFwiUXVlIGVzdGFzIHBlbnNhbmRvP1wiLCBgUCR7bnVtUmVmbGV4aW9uZXN9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgcmVmbGV4aW9uZXMucHVzaChyZWZsZXhpb24pO1xuICAgICAgbnVtUmVmbGV4aW9uZXMgKz0gMTtcbiAgICAgIG90cmEgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTXHUwMEVEXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIG90cm8gcFx1MDBFMXJyYWZvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gcmVmbGV4aW9uZXM7XG4gIH1cblxufSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9Ob3RlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRXN0YSBjbGFzZSBzaXJ2ZSBwYXJhIGN1YWxxdWllciBjbGFzZSBxdWUgc29sYW1lbnRlIGRlYmEgcHJvY2VzYXIgXG5sYXMgc2lndWllbnRlcyBwcm9waWVkYWRlczpcbiBjYW1wb3MgPSBbXCJpZFwiLFwiZmVjaGFcIixcInRpdHVsb1wiLFwiZGVzY3JpcGNpb25cIixcImVzdGFkb1wiLFwiYXN1bnRvXCIsXG4gXCJwcm95ZWN0b0dURFwiLFwiUHJveWVjdG9RXCIsXCJhcmVhSW50ZXJlc1wiLFwiYXJlYVZpZGFcIixcImFsaWFzZXNcIixcInJlbmFtZVwiXVxuUGFyYSBoZXJlZGFyIHRvZG8gZGUgZXN0YSBjbGFzZSBzaW4gbW9kaWZpY2FjaW9uZXMsIHNlIGRlYmUgaGFjZXIgXG5leHRlbmRpZW5kbyBsYSBzdWJjbGFzZSBkZSBlc3RhIHkgZGVmaW5pZW5kbyBlbCBjb25zdHJ1Y3RvcjpcblxuY2xhc3Mgc3Vic2lzdGVtYUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICB9XG59XG4uLi4gXG4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuZXhwb3J0IGNsYXNzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBOb3RlRmllbGRIYW5kbGVyIHtcbiAgICBwcml2YXRlIHRwOiBhbnk7XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogYW55O1xuICAgIHByaXZhdGUgc3VnZ2VzdGVyOiBhbnk7XG4gICAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgICBwcml2YXRlIHBsdWdpbjogYW55O1xuXG5cbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgICAgICB0aGlzLnRwID0gdHA7XG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSBpbmZvU3Vic2lzdGVtYTtcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gdHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgLy8gQWxtYWNlbmFyIGxhIGluc3RhbmNpYSBkZWwgcGx1Z2luXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgbGV0IG1heElkID0gMDtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vdGEuaWQgPSAgbWF4SWQgKyAxO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmlkO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGZlY2hhQWN0dWFsID0gRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIGZlY2hhQWN0dWFsID0gZmVjaGFBY3R1YWwuc2V0TG9jYWxlKCdlcycpO1xuICAgICAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nKTtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGFBY3R1YWw7XG4gICAgICAgIHJldHVybiBmZWNoYUFjdHVhbDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaXR1bG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnByb21wdChgVFx1MDBFRHR1bG8gZGUgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfTpgLCBcIlwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0bGU7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBEZXNjcmlwY2lcdTAwRjNuIGRlbCAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9OmAsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG4gICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICAvLzEuIHNpQXN1bnRvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpIHsgLy8gTGEgbm90YSBhY3RpdnMgZXMgdW5hOiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFBHVEQgeSBQUVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIgfHwgbm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzaUFzdW50bywgbm9tYnJlOiBwYWRyZXMgfVxuICAgIH1cbiAgICBcblxuICAgIGFzeW5jIGdldFByb3llY3RvR1REKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIGxldCBub3Rhc0YgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiUEdURFwiLCBudWxsLCB0aGlzLnBsdWdpbik7IC8vIFBhc2FyIGxhIGluc3RhbmNpYSBkZWwgcGx1Z2luIGFxdVx1MDBFRGxldCBub3RhRiwgdGl0dWxvO1xuICAgICAgICAgICAgbGV0IHRpdHVsbywgbml2ZWw7XG4gICAgICAgICAgICBsZXQgcGFkcmVQR1REID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIEdURD9gKTtcbiAgICAgICAgICAgIGlmIChwYWRyZVBHVEQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbm90YUYgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcihub3Rhc0YubWFwKGIgPT4gYi50aXR1bG8pLCBub3Rhc0YubWFwKGIgPT4gYiksIGZhbHNlLCBgXHUwMEJGUXVcdTAwRTkgUHJveWVjdG8gR1REIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIEdURCBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YUYuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGFGPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YUYuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGFGPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUYuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YUYuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGFGLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGFGLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gW25vdGFGLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRi50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSB0aXR1bG8uY29uY2F0KG5vdGFGLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5wdXNoKG5vdGFGLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnByb3llY3RvR1REO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRQcm95ZWN0b1EoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgbm90YUYsIHRpdHVsbywgbml2ZWw7XG5cbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIGxldCBub3Rhc0YgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiUFFcIiwgbnVsbCwgdGhpcy5wbHVnaW4pOyAvLyBQYXNhciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBhcXVcdTAwRURcbiAgICAgICAgICAgIGxldCBwYWRyZVEgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCBmYWxzZSwgYCAke3RoaXMubm90YS50aXR1bG99IGVzIGhpam8gZGUgdW4gUHJveWVjdG8gUT9gKTtcblxuICAgICAgICAgICAgaWYgKHBhZHJlUSkge1xuICAgICAgICAgICAgICAgIG5vdGFGID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIobm90YXNGLm1hcChiID0+IGIudGl0dWxvKSwgbm90YXNGLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFByb3llY3RvIFEgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vdGFGID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gcHJveWVjdG8gUSBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YUYuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGFGPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YUYuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGFGPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUYuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YUYuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGFGLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW25vdGFGPy50aXR1bG9dO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhRi5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEucHJveWVjdG9RO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXJlYUludGVyZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgYXJlYUludGVyZXMsIG5pdmVsLCB0aXR1bG8sIHBhZHJlQUksIGFycmF5QUk7XG5cbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIGxldCBhcmVhc0ludGVyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQUlcIiwgbnVsbCwgdGhpcy5wbHVnaW4pOyAvLyBQYXNhciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBhcXVcdTAwRURcbiAgICAgICAgICAgIHBhZHJlQUkgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCBmYWxzZSwgYCAke3RoaXMubm90YS50aXR1bG99IGVzIGhpam8gZGUgdW4gXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5czpgKTtcbiAgICAgICAgICAgIGlmIChwYWRyZUFJKSB7XG4gICAgICAgICAgICAgICAgYXJlYUludGVyZXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhcmVhc0ludGVyZXMubWFwKGIgPT4gYi50aXR1bG8pLCBhcmVhc0ludGVyZXMubWFwKGIgPT4gYiksIGZhbHNlLCBgXHUwMEJGUXVcdTAwRTkgXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5cyBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJlYUludGVyZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW2FyZWFJbnRlcmVzLnRpdHVsb107XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZWFJbnRlcmVzPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IHRpdHVsby5jb25jYXQoYXJlYUludGVyZXMuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFyZWFJbnRlcmVzPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLnB1c2goYXJlYUludGVyZXMuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYUludGVyZXM/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmVhSW50ZXJlcy5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBhcmVhSW50ZXJlcy5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXJlYUludGVyZXMuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXJlYUludGVyZXMuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChhcmVhSW50ZXJlcy5uaXZlbEFJKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFJbnRlcmVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXJlYVZpZGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGFyZWFzVmlkYSA9IHt9O1xuICAgICAgICBsZXQgbm9BViA9IHtcbiAgICAgICAgICAgIGZpbGU6IHtcbiAgICAgICAgICAgICAgICBiYXNlbmFtZTogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFyZWFWaWRhOiBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIGxldCBwYWRyZUFWID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFx1MDBDMXJlYSBkZSBWaWRhP2ApO1xuICAgICAgICAgICAgaWYgKHBhZHJlQVYpIHtcbiAgICAgICAgICAgICAgICBhcmVhc1ZpZGEgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQVZcIiwgbnVsbCwgdGhpcy5wbHVnaW4pOyAvLyBQYXNhciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBhcXVcdTAwRURcbiAgICAgICAgICAgICAgICBhcmVhc1ZpZGEucHVzaChub0FWKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhcmVhc1ZpZGEubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgYXJlYXNWaWRhLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGZhbHNlLCBgXHUwMEJGQSBxdVx1MDBFOSBcdTAwQzFyZWEgZGUgVmlkYSBwZXJ0ZW5lY2UgJCR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuYXJlYVZpZGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFWaWRhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYDtcbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKTtcblxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBDb250ZW5pZG9QYXJhRXN0dWRpb0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cbiAgfSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuXG5leHBvcnQgY2xhc3MgUmVjdXJzb3NSZWN1cnJlbnRlc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cbiAgfSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFBHVERGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKXsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG5cbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBzdWJzaXN0ZW1hcywgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIHN3aXRjaCh0aXBvU2lzdGVtYSkgeyAvLyBFc3RveSBjcmVhbmRvIHVuOiBcbiAgICAgICAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJDUEVcIjogIC8vIENvbnRlbmlkbyBwYXJhIEVzdHVkaW9cbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXsgLy8gTGEgbm90YSBhY3RpdnMgZXMgdW5hOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIil7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBQcm95ZWN0b0dURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgb3RyYSBjb3NhIHF1ZSBubyBlcyBwcm95ZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFBHVEQgeSBQUVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIGFycmVnbG8gbmkgc3RyaW5nLCBhcmVhSW50ZXJlcyBlcyBlbCBhcmVhIGludGVyZXMgcXVlIGVzdFx1MDBFMSBlbiB0aXR1bG8uICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyBSUlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6ICAvLyBFc3RveSBDcmVhbmRvIHVuIFBRIFxuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQUSByZXF1aWVyZSBvYmxpZ2F0b3JpYW1lbnRlIHRlbmVyIEFyZWEgZGUgVmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEgIT09IHVuZGVmaW5lZCAmJiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1x1MDBGM2RpZ28gYSBlamVjdXRhciBzaSBhcmVhVmlkYSBleGlzdGUgeSBubyBlcyB1bmEgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXsgLy8gdGlwbyBkZSBub3RhIGFjdGl2YSBjcmVhbmRvIHVuIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVbiBQcm95ZWN0byBkZSBRIHNvbG8gcHVlZGUgaW5pY2lhciBkZSB1biBBViwgQUkgbyBQR1RELiBBc3VudG8gbm8gZGVmaW5pZG8uXCIpOyAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICAvLyBBcmVhIGRlIHZpZGEgZGUgYWN0aXZhLCBjcmVhbmRvIFBRIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVG9kb3MgbG9zIHByb3llY3RvcyBkZSBRIHJlcXVpZXJlbiBBcmVhIGRlIFZpZGEuIEFzdW50byBubyBkZWZpbmlkby5cIik7IFxuICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBQUSAgaWYoc2lBc3VudG8pXG5cbiAgICAgICAgICAgICAgICB9ICAgICBcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyBQUVxuICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOiAvLyBDcmVhbmRvIHVuIEFJXG4gICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxBSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxBSSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxBSSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxBSSA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIENhc2UgQUkgLSBBVlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9IC8vIHN3aXRjaCBjYXNlIHNvYnJlIGVsIHRpcG8gZGUgbm90YSBhY3RpdmEuXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gdW4gQUlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAgLy8gQXN1bnRvIERlIGxhIG5vdGEgcXVlIGVzdFx1MDBFOSBjcmVhbmRvIGN1YW5kbyBlcyBjdWFscXVlaXIgY29zYVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlcGVuZGllbmRvIGRlIGxhIGVzdHJ1Y3R1cmEsIGdldEFzdW50byBkZWJlcmlhIHRlbmVyIHN1IGNsYXNpZmljYWNpXHUwMEYzbi4gQXF1aSB2YXMgYSB0ZW5lciB1biBlcnJvci5cIikgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gLy8gc3dpdGNoIHRpcG8oc2lzdGVtYSkgLT4gU29icmUgbGEgbm90YSBxdWUgZXN0XHUwMEU5IGNyZWFuZG8uXG5cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZTogcGFkcmVzfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFByb3llY3RvR1REKCkge1xuICAgICAgICBsZXQgdGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vdGFzRiA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJQR1REXCIsIG51bGwsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgbGV0IG5vdGFGLCB0aXR1bG8gPSBbXTtcbiAgICAgICAgbGV0IHBhZHJlUEdURDtcbiAgICBcbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIHBhZHJlUEdURCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIEdURD9gKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChwYWRyZVBHVEQpIHtcbiAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKG5vdGFzRi5tYXAoYiA9PiBiLnRpdHVsbyksIG5vdGFzRi5tYXAoYiA9PiBiKSwgZmFsc2UsIGBcdTAwQkZRdVx1MDBFOSBQcm95ZWN0byBHVEQgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vdGFGID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gcHJveWVjdG8gR1REIGRlZmluaWRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IEFycmF5LmlzQXJyYXkobm90YUY/LmFyZWFJbnRlcmVzKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbm90YUYuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBub3RhRj8uYXJlYUludGVyZXMgPyBbbm90YUYuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV0gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRj8uYXJlYVZpZGEgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSA/IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykgOiBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvUSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5vdGFGLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vdGFGPy5wcm95ZWN0b1EgPyBbbm90YUYucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyldIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW25vdGFGLnRpdHVsb107XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IHRpdHVsby5jb25jYXQobm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5wdXNoKG5vdGFGLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gIWlzTmFOKHBhcnNlSW50KG5vdGFGPy5uaXZlbFApKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQobm90YUYubml2ZWxQKSArIDEgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gMDtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnByb3llY3RvR1REO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCl7XG4gICAgICAgIGxldCBuZXdOYW1lLCBmb2xkZXI7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhPT09XCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIil7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9L090cmFzLyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhc2BcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9YFxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICBcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICB9IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgUFFGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL1BRRmllbGRIYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIFBRRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIFBRRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKXsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG5cbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBzdWJzaXN0ZW1hcywgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIHN3aXRjaCh0aXBvU2lzdGVtYSkgeyAvLyBFc3RveSBjcmVhbmRvIHVuOiBcbiAgICAgICAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJDUEVcIjogIC8vIENvbnRlbmlkbyBwYXJhIEVzdHVkaW9cbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXsgLy8gTGEgbm90YSBhY3RpdnMgZXMgdW5hOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIil7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBQcm95ZWN0b0dURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgb3RyYSBjb3NhIHF1ZSBubyBlcyBwcm95ZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFBHVEQgeSBQUVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIGFycmVnbG8gbmkgc3RyaW5nLCBhcmVhSW50ZXJlcyBlcyBlbCBhcmVhIGludGVyZXMgcXVlIGVzdFx1MDBFMSBlbiB0aXR1bG8uICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyBSUlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6ICAvLyBFc3RveSBDcmVhbmRvIHVuIFBRIFxuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQUSByZXF1aWVyZSBvYmxpZ2F0b3JpYW1lbnRlIHRlbmVyIEFyZWEgZGUgVmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEgIT09IHVuZGVmaW5lZCAmJiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1x1MDBGM2RpZ28gYSBlamVjdXRhciBzaSBhcmVhVmlkYSBleGlzdGUgeSBubyBlcyB1bmEgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXsgLy8gdGlwbyBkZSBub3RhIGFjdGl2YSBjcmVhbmRvIHVuIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJVbiBQcm95ZWN0byBkZSBRIHNvbG8gcHVlZGUgaW5pY2lhciBkZSB1biBBViwgQUkgbyBQR1RELiBBc3VudG8gbm8gZGVmaW5pZG8uXCIpOyAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICAvLyBBcmVhIGRlIHZpZGEgZGUgYWN0aXZhLCBjcmVhbmRvIFBRIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVG9kb3MgbG9zIHByb3llY3RvcyBkZSBRIHJlcXVpZXJlbiBBcmVhIGRlIFZpZGEuIEFzdW50byBubyBkZWZpbmlkby5cIik7IFxuICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBQUSAgaWYoc2lBc3VudG8pXG5cbiAgICAgICAgICAgICAgICB9ICAgICBcbiAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyBQUVxuICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOiAvLyBDcmVhbmRvIHVuIEFJXG4gICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5BVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxBSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxBSSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxBSSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxBSSA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgIC8vIENhc2UgQUkgLSBBVlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9IC8vIHN3aXRjaCBjYXNlIHNvYnJlIGVsIHRpcG8gZGUgbm90YSBhY3RpdmEuXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gdW4gQUlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAgLy8gQXN1bnRvIERlIGxhIG5vdGEgcXVlIGVzdFx1MDBFOSBjcmVhbmRvIGN1YW5kbyBlcyBjdWFscXVlaXIgY29zYVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlcGVuZGllbmRvIGRlIGxhIGVzdHJ1Y3R1cmEsIGdldEFzdW50byBkZWJlcmlhIHRlbmVyIHN1IGNsYXNpZmljYWNpXHUwMEYzbi4gQXF1aSB2YXMgYSB0ZW5lciB1biBlcnJvci5cIikgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0gLy8gc3dpdGNoIHRpcG8oc2lzdGVtYSkgLT4gU29icmUgbGEgbm90YSBxdWUgZXN0XHUwMEU5IGNyZWFuZG8uXG5cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZTogcGFkcmVzfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFByb3llY3RvR1REKCkge1xuICAgICAgICBsZXQgdGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vdGFzRiA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJQR1REXCIsIG51bGwsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgbGV0IG5vdGFGLCB0aXR1bG8gPSBbXTtcbiAgICAgICAgbGV0IHBhZHJlUEdURDtcbiAgICBcbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIHBhZHJlUEdURCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIEdURD9gKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChwYWRyZVBHVEQpIHtcbiAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKG5vdGFzRi5tYXAoYiA9PiBiLnRpdHVsbyksIG5vdGFzRi5tYXAoYiA9PiBiKSwgZmFsc2UsIGBcdTAwQkZRdVx1MDBFOSBQcm95ZWN0byBHVEQgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vdGFGID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gcHJveWVjdG8gR1REIGRlZmluaWRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IEFycmF5LmlzQXJyYXkobm90YUY/LmFyZWFJbnRlcmVzKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbm90YUYuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBub3RhRj8uYXJlYUludGVyZXMgPyBbbm90YUYuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV0gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRj8uYXJlYVZpZGEgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSA/IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykgOiBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvUSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5vdGFGLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vdGFGPy5wcm95ZWN0b1EgPyBbbm90YUYucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyldIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW25vdGFGLnRpdHVsb107XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IHRpdHVsby5jb25jYXQobm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5wdXNoKG5vdGFGLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gIWlzTmFOKHBhcnNlSW50KG5vdGFGPy5uaXZlbFApKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQobm90YUYubml2ZWxQKSArIDEgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gMDtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnByb3llY3RvR1REO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCl7XG4gICAgICAgIGxldCBuZXdOYW1lLCBmb2xkZXI7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgZm9sZGVyQVYgPSBBcnJheS5pc0FycmF5KHRoaXMubm90YS5hcmVhVmlkYSk/IHRoaXMubm90YS5hcmVhVmlkYVswXSA6IHRoaXMubm90YS5hcmVhVmlkYTsgXG4gICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke2ZvbGRlckFWfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7Zm9sZGVyQVZ9YFxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgICBhc3luYyBnZXRUcmltZXN0cmUoKXsgIFxuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IHRyaW1lc3RyZTtcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJUUVwiLG51bGwsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCh0aXBvU2lzdGVtYSkge1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIodHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgZmFsc2UsIGBUcmltZXN0cmUgZGVsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiT0NBXCI6IC8vIE9iamV0aXZvQ29tcGFzc0FudWFsIFxuICAgICAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcIlExXCIsIFwiUTJcIiwgXCJRM1wiLCBcIlE0XCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVExYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTNgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVE0YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1MDBCRkVuIHF1XHUwMEU5IHRyaW1lc3RyZSBkZWwgJHt0aGlzLm5vdGEuYVx1MDBGMW99IGNvbnNpZGVyYXMgcXVlIHNlIHB1ZWRlIHJlYWxpemFyIGVzZSBvYmpldGl2bz9gXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJDVElcIjogLy8gQ29tcGFzc1RyaW1lc3RyYWxJbmljaW9cbiAgICAgICAgICAgICAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTJgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RNGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTAwQkZEZSBxdVx1MDBFOSB0cmltZXN0cmUgZGVsICR7dGhpcy5ub3RhLmFcdTAwRjFvfSBlcyBlc3RhIHBsYW5lYWNpXHUwMEYzbj9gXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcih0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksdHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUucGF0aCksIGZhbHNlLCBgVHJpbWVzdHJlIGRlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuICAgICAgICAgICAgICAgIH1cblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodHJpbWVzdHJlID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gdHJpbWVzdHJlO1xuICAgICAgICByZXR1cm4gdHJpbWVzdHJlO1xuICAgIH1cbiAgfSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFub3RhY2lvbmVzRmllbGRIYW5kbGVyfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL0Fub3RhY2lvbmVzRmllbGRIYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIEFub3RhY2lvbmVzRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIEFub3RhY2lvbmVzRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Q2xhc2lmaWNhY2lvbigpOiBQcm9taXNlPHsgY2xhc2U6IHN0cmluZyB8IG51bGwsIHRhZzogc3RyaW5nIHwgbnVsbCB9IHwgdW5kZWZpbmVkPiB7XG4gICAgICAgIGxldCBjbGFzaWZpY2FjaW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IHRhZ0NsYXNpZmljYWNpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgY2xhc2lmaWNhY2lvbkFYOiB7IFt4OiBzdHJpbmddOiBhbnk7IH0gPSB7fTtcbiAgICAgICAgbGV0IHRhZ3NDbGFzaWZpY2FjaW9uQVg6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxldCBudWV2YUNsYXNpZmljYWNpb24gPSBmYWxzZTtcbiAgICBcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgY2xhc2lmaWNhY2lvbkFYID0gZnJvbnRtYXR0ZXIudGl0dWxvQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnc0NsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRhZ3NDbGFzaWZpY2FjaW9uQVggfHwgW107XG4gICAgXG4gICAgICAgICAgICBjb25zdCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCBzdWdnZXN0ZXIoY2xhc2lmaWNhY2lvbkFYLCB0YWdzQ2xhc2lmaWNhY2lvbkFYLCBmYWxzZSwgXCJcdTAwQkZDbGFzaWZpY2FyXHUwMEVEYXMgZXN0YSBub3RhIGJham8gYWxndW5hIGRlIGxhcyBzaWd1aWVudGVzIGNhdGVnb3JcdTAwRURhcz9cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gXCJOdWV2b1wiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIHRhZyBxdWUgdXRpbGl6YXJhcyBwYXJhIFwiICsgY2xhc2lmaWNhY2lvbiArIFwiPy4gTm8gdXRpbGljZXMgZXNwYWNpb3MgZW4gbGEgZGVmaW5pY2lcdTAwRjNuIGRlbCB0YWcuXCIsIFwibnVldm9UYWdcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IFwiTmluZ3VuYVwiKSB7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IFwiXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKTtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gY2xhc2lmaWNhY2lvbkFYW2luZGljZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcjogeyB0aXR1bG9DbGFzaWZpY2FjaW9uQVg6IGFueVtdLCB0YWdzQ2xhc2lmaWNhY2lvbkFYOiBhbnlbXSB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NsYXNpZmljYWNpb24gPSBbLi4uY2xhc2lmaWNhY2lvbkFYLCBjbGFzaWZpY2FjaW9uXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGl0dWxvQ2xhc2lmaWNhY2lvbkFYID0gbmV3Q2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gXCJjbC9cIiArIHRhZ0NsYXNpZmljYWNpb247XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgIHRoaXMubm90YS50YWdDbGFzaWZpY2FjaW9uQVggPSB0YWdDbGFzaWZpY2FjaW9uO1xuICAgIFxuICAgICAgICByZXR1cm4geyBjbGFzZTogY2xhc2lmaWNhY2lvbiwgdGFnOiB0YWdDbGFzaWZpY2FjaW9uIH07XG4gICAgfVxufSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2FjY2lvbmVzRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuICAgIGFzeW5jIGdldEZlY2hhKCkgOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgZmVjaGE7ICBcbiAgICAgICAgbGV0IGZlY2hhT3JpZ2luYWwgPSBhd2FpdCB0aGlzLnByb21wdChgQ29uZmlybWEgbGEgZmVjaGEgZGUgbGEgdHJhbnNhY2NpXHUwMEYzbjogYCwgYCR7bW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tJyl9YCwgdHJ1ZSlcbiAgICAgICAgLy8gUGFyc2VhbmRvIGxhIGZlY2hhIG9yaWdpbmFsIHV0aWxpemFuZG8gbW9tZW50XG4gICAgICAgIGxldCBmZWNoYU1vbWVudCA9IG1vbWVudChmZWNoYU9yaWdpbmFsLCBcIllZWVktTU0tREQgSEg6bW1cIik7XG4gICAgICAgIC8vIEZvcm1hdGVhbmRvIGxhIG51ZXZhIGZlY2hhIGFsIGZvcm1hdG8gZGVzZWFkb1xuICAgICAgICBmZWNoYSA9IGZlY2hhTW9tZW50LmZvcm1hdChcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGE7XG4gICAgICAgIHJldHVybiBmZWNoYTtcbiAgICB9XG4gICAgXG4gICAgICAgIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBsZXQgZmVjaGEgPSBtb21lbnQodGhpcy5ub3RhLmZlY2hhLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcbiAgICAgICAgICAgIGxldCBmZWNoYVkgPSBmZWNoYS5mb3JtYXQoXCJZWVlZXCIpO1xuICAgICAgICAgICAgbGV0IGZlY2hhTWVzID0gZmVjaGEuZm9ybWF0KFwiTU0gLSBNTU1NXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7ZmVjaGFZfS8ke2ZlY2hhTWVzfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHtmZWNoYVl9LyR7ZmVjaGFNZXN9YFxuICAgICAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICB9IiwgIi8qIHNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9BcmVhc0ludGVyZXNGaWVsZEhhbmRsZXIudHMgKi9cbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5cbmV4cG9ydCBjbGFzcyBBcmVhc0ludGVyZXNGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKXsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG5cbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxBSVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbEFJKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxBSSkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHtzaUFzdW50bywgbm9tYnJlOiBwYWRyZXN9XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRBbGlhc2VzKCl7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107ICBcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgaWYgKHRoaXMubm90YS5hcmVhVmlkYSAhPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiKXtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgfSAgICAgICBcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgICAgIFxuICAgIH1cbiAgICBhc3luYyBnZXRSZW5hbWUoKXtcbiAgICAgICAgbGV0IG5ld05hbWUsIGZvbGRlcjtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGlmICh0aGlzLm5vdGEuYXJlYVZpZGE9PT1cIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiKXtcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vT3RyYXMvJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9L090cmFzYFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX1gXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgIFxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXJlYUludGVyZXMoKXtcbiAgICAgICAgbGV0IG5vbWJyZVRpcG8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgYXJlYXNJbnRlcmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFJXCIsbnVsbCx0aGlzLnBsdWdpbilcbiAgICAgICAgbGV0IGFyZWFJbnRlcmVzLCBuaXZlbCwgdGl0dWxvLCBwYWRyZUFJLCBhcnJheUFJO1xuICAgICAgICBpZiAoIXRoaXMubm90YS5hc3VudG9EZWZpbmlkbykge1xuICAgICAgICAgICAgcGFkcmVBSSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIG90cmEgJHtub21icmVUaXBvfTpgKTtcbiAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgIGlmIChwYWRyZUFJKXtcbiAgICAgICAgICAgICAgICBhcmVhSW50ZXJlcyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKGFyZWFzSW50ZXJlcy5tYXAoYiA9PiBiLnRpdHVsbykgLGFyZWFzSW50ZXJlcy5tYXAoYiA9PiBiKSwgZmFsc2UsIGBRdWUgQXJlYSBkZSBJbnRlclx1MDBFOXMgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gQXJlYSBkZSBJbnRlcmVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNleyAvLyBRVUUgSEFDRSBFU1RFIEVMU0U/P1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzLmFyZWFWaWRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBhcmVhSW50ZXJlcy5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IGFyZWFJbnRlcmVzLnRpdHVsbztcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChhcmVhSW50ZXJlcy5uaXZlbEFJKSArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gXCJcIjtcbiAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICB9ICAgICAgICAgICAgICAgIFxuXHQgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcbiAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICAgfWVsc2V7XG4gICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhSW50ZXJlczsgXG4gICAgICAgfVxuICAgIH1cblxuICB9IiwgImltcG9ydCB7IEFyZWFWaWRhRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9BcmVhVmlkYUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyQmFzZSB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UnOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuXG5leHBvcnQgY2xhc3MgQXJlYVZpZGFGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIEFyZWFWaWRhRmllbGRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWEoKXtcbiAgICAgICAgbGV0IGFyZWE6IHN0cmluZyB8IG51bGwsIGdydXBvOiBzdHJpbmcgfCBudWxsO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRpcG9BcmVhID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IG51ZXZhQXJlYSA9IGZhbHNlO1xuICAgICAgICBsZXQgYXJlYXNHcnVwb3MgPSAgdGhpcy5nZXREdXBsYXNGaWphcyhhcHAsIHRpcG9BcmVhKVxuICAgICAgICBsZXQgYXJlYUdydXBvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNHcnVwb3MubWFwKGI9PiBiLnRleHRvKSwgYXJlYXNHcnVwb3MubWFwKGI9PiBiLnRleHRvKSwgZmFsc2UsIGBcdTAwQkZDdVx1MDBFMWwgJHt0aXBvQXJlYX0gZGVzZWFzIGNyZWFyP2ApXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy4gXG4gICAgICAgICAgICBpZiAoYXJlYUdydXBvID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgfSBlbHNlIGlmIChhcmVhR3J1cG89PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCBub21icmUgZGUgbGEgbnVldmEgY2xhc2lmaWNhY2lcdTAwRjNuIHF1ZSB2YXMgYSBpbmdyZXNhcj9cIiwgXCJNaUNsYXNpZmljYWNpXHUwMEYzblwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCB0aGlzLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgaW5kaWNlID0gYXJlYXNHcnVwb3MuZmluZEluZGV4KG9iamV0byA9PiBvYmpldG8udGV4dG8gPT09IGFyZWFHcnVwbyk7XG4gICAgICAgICAgICAgICAgZ3J1cG8gPSBhcmVhc0dydXBvc1tpbmRpY2VdLmdydXBvO1xuICAgICAgICAgICAgICAgIGFyZWEgPSBhcmVhc0dydXBvc1tpbmRpY2VdLmFyZWE7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmdydXBvID0gZ3J1cG87XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IGFyZWE7XG4gICAgICAgICAgICByZXR1cm4ge2dydXBvOiBncnVwbywgdGl0dWxvOiBhcmVhfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICBnZXREdXBsYXNGaWphcyhhcHA6IEFwcCwgYXJlYTogc3RyaW5nKTogUHJvbWlzZTxHcnVwb0FjdGl2aWRhZFtdPiB7XG4gICAgICAgIC8vIEVuY3VlbnRyYSBlbCBhcmNoaXZvIHBvciBzdSBydXRhXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICAvLyBBY2NlZGUgYWwgZnJvbnQgbWF0dGVyIChZQU1MKSBkZWwgYXJjaGl2byB5IG9idGllbmUgZWwgYXJyZWdsbyBiYXNhZG8gZW4gZWwgdGVtYVxuICAgICAgICAgICAgICAgIGNvbnN0IGFycmVnbG9SZXN1bHQgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LlthcmVhXSB8fCBbXTtcbiAgICAgICAgICAgICAgICAvLyBDb25zdHJ1eWUgZWwgYXJyZWdsbyBkZSBvYmpldG9zIHJlc3VsdGFkbyBiYXNhZG8gZW4gbGEgZXN0cnVjdHVyYSBkZSBHcnVwb0FjdGl2aWRhZFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJlZ2xvUmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvLnB1c2goeyBncnVwbzogaXRlbVswXSwgYXJlYTogaXRlbVsxXSwgdGV4dG86IGl0ZW1bMF0rXCIvXCIraXRlbVsxXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdGFkbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXZ1ZWx2ZSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gc2kgbm8gc2UgZW5jdWVudHJhIGVsIGFyY2hpdm8gbyBzaSBvY3VycmUgY3VhbHF1aWVyIG90cm8gcHJvYmxlbWFcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcblxuICAgIGFzeW5jIGdldEZpbGVuYW1lKCl7XG4gICAgICAgIGxldCBmaWxlTmFtZTtcbiAgICAgICAgaWYgKHRoaXMuaW5mb1N1YnNpc3RlbWEuaGFzT3duUHJvcGVydHkoXCJmaWxlTmFtZVwiKSl7XG4gICAgICAgICAgICBjb25zdCBwYXJ0ZXMgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLmZpbGVOYW1lLnNwbGl0KCcgLS0gJyk7XG4gICAgICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gcGFydGVzWzBdO1xuICAgICAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IHBhcnRlc1sxXTtcbiAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IHBhcnRlc1sxXTtcbiAgICAgICAgICAgIHRoaXMubm90YS5ncnVwbyA9IHBhcnRlc1syXTtcbiAgICAgICAgfVxuICAgICAgICBmaWxlTmFtZSA9IGAke3RoaXMubm90YS50cmltZXN0cmV9IC0gJHt0aGlzLm5vdGEudGl0dWxvfWAgICAgXG4gICAgICAgIHRoaXMubm90YS5maWxlbmFtZSA9IGZpbGVOYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgIHJldHVybiBmaWxlTmFtZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUcmltZXN0cmUoKXtcbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCB0cmltZXN0cmU7XG4gICAgICAgIC8vbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhcIlRyaW1lc3RyYWxcIik7IC8vIEZ1bmNpb25hIGVuIGxhIHZlcnNpXHUwMEYzbiAxLjAgZGUgQXJlYXMgZGUgVmlkYS5cbiAgICAgICAgbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiVFFcIixudWxsLHRoaXMucGx1Z2luKTtcbiAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIodHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgZmFsc2UsIGBUcmltZXN0cmUgZGVsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodHJpbWVzdHJlID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS50cmltZXN0cmUgPSB0cmltZXN0cmU7XG4gICAgICAgIHJldHVybiB0cmltZXN0cmU7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IG5ld05hbWUsIG5hbWUsIGZvbGRlcjsgICAgICBcbiAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50aXR1bG99LyR7dGhpcy5ub3RhLmZpbGVuYW1lfS5tZGBcbiAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vYFxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG5cbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgbGV0IG5vbWJyZUZpbGUgPSBuZXdOYW1lPy5zcGxpdChcIi9cIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVlIGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpe1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH0gIFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1jYXRjaCAoZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RGVzY3JpcGNpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcGNpb24gPSBhd2FpdCB0aGlzLnByb21wdChgRGVzY3JpcGNpXHUwMEYzbiBkZWwgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfTpgLCBcIlwiLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLmdydXBvfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyQmFzZSB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UnOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9ub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXInO1xuXG5leHBvcnQgY2xhc3Mgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2UgaW1wbGVtZW50cyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXJ7XG4gICAgXG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRJZCgpIHsgXG4gICAgICAgIGxldCBtYXhJZCA9IDA7XG4gICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoKGZpbGU6IHsgcGF0aDogc3RyaW5nOyB9KSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICAvLyBGaWx0cmEgcG9yIGxvcyBhcmNoaXZvcyBlbiBsYSBjYXJwZXRhIGRlc2VhZGFcbiAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpICYmIG1ldGFkYXRhLnR5cGUgJiYgbWV0YWRhdGEudHlwZSA9PT0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IHBhcnRlcyA9IGZpbGUuYmFzZW5hbWUuc3BsaXQoJyAtICcpO1xuICAgICAgICB0aGlzLm5vdGEuZ3J1cG8gPSBwYXJ0ZXNbMF07XG4gICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IHBhcnRlc1sxXTtcblxuICAgICAgICAvLyBPYnRlbmVyIGxhIHJ1dGEgY29tcGxldGEgZGVsIGFyY2hpdm8gYWN0dWFsXG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gZmlsZS5wYXRoO1xuXG4gICAgICAgIC8vIEV4dHJhZXIgbGEgcnV0YSBkZWwgZGlyZWN0b3JpbyBzaW4gZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IGRpcmVjdG9yeVBhdGggPSBmdWxsUGF0aC5zdWJzdHJpbmcoMCwgZnVsbFBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuXG4gICAgICAgIC8vIENvbmNhdGVuYXIgbGEgcnV0YSBkZWwgZGlyZWN0b3JpbyBjb24gZWwgbm9tYnJlIGRlbCBhcmNoaXZvIHkgbGEgZXh0ZW5zaVx1MDBGM24gLm1kXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7ZGlyZWN0b3J5UGF0aH0ke3BhcnRlc1sxXX0ubWRgO1xuICAgICAgICBcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBuZXdOYW1lLCBmb2xkZXI7ICAgICAgXG4gICAgICAgIFxuICAgICAgICAvLyBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMubm90YS5maWxlbmFtZX0ubWRgXG4gICAgICAgIC8vIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vYFxuICAgICAgICAvLyBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcblxuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVOYW1lKTtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHRyeXtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgbGV0IG5vbWJyZUZpbGUgPSBuZXdOYW1lPy5zcGxpdChcIi9cIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVlIGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpe1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9ICBcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBmaWxlTmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxufSIsICIvLyBjYW1wb3MgPSBbXCJpZFwiLFwiZmVjaGFcIixcImFyZWFWaWRhXCIsXCJhXHUwMEYxb1wiLFwidGl0dWxvXCIsXCJkZXNjcmlwY2lvblwiLFwidHJpbWVzdHJlXCIsXCJlc3RhZG9cIixcImFsaWFzZXNcIixcInJlbmFtZVwiXTtcblxuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IE9iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ludGVyZmFjZXMvT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBPYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyIGltcGxlbWVudHMgT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVye1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuICdcdUQ4M0RcdURGRTEnO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFWaWRhKCl7XG4gICAgICAgIGxldCBhcmVhVmlkYTtcbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgbGV0IG5vbWJyZUFyY2hpdm8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLmZpbGVOYW1lO1xuICAgICAgICBjb25zdCByZWdleCA9IC9PYmpldGl2byBwYXJhICguKylcXC5tZCQvO1xuICAgICAgICBjb25zdCByZXN1bHRhZG8gPSBub21icmVBcmNoaXZvLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgaWYgKHJlc3VsdGFkbyAmJiByZXN1bHRhZG9bMV0pIHtcbiAgICAgICAgICAgIC8vIFJldG9ybmFtb3MgZWwgZ3J1cG8gY2FwdHVyYWRvLCBxdWUgZXMgZWwgdmFsb3IgZGVzZWFkbyBkZSBzdWJzdHJcbiAgICAgICAgICAgIGFyZWFWaWRhID0gcmVzdWx0YWRvWzFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgbm8gc2UgZW5jdWVudHJhIHVuYSBjb2luY2lkZW5jaWEsIHBvZHJcdTAwRURhbW9zIHJldG9ybmFyIG51bGwgbyBhbGd1bmEgb3RyYSBzZVx1MDBGMWFsIGRlIG5vIGVuY29udHJhZG9cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9ICBcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBhcmVhVmlkYTtcbiAgICAgICAgcmV0dXJuIGFyZWFWaWRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhVmlkYTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0VGl0dWxvKCl7XG4gICAgICAgIGxldCB0aXR1bG87XG4gICAgICAgIHRpdHVsbyA9IGF3YWl0IHRoaXMucHJvbXB0KGBDdWFsIGVzIHR1IG9iamV0aXZvIGVuICR7dGhpcy5ub3RhLmFcdTAwRjFvfSBwYXJhICR7dGhpcy5ub3RhLmFyZWFWaWRhfT9gLCBgVm95IGEgYCwgdHJ1ZSwgdHJ1ZSkgLy8gNCBwYXJhbWV0cm8gdHJ1ZTogTXVsdGlsaW5lYS5cblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodGl0dWxvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS50aXR1bG8gPSB0aXR1bG87XG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QVx1MDBGMW8oKXtcbiAgICAgICAgIFxuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgYVx1MDBGMW87XG4gICAgICAgIC8vbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhcIlRyaW1lc3RyYWxcIik7IC8vIEZ1bmNpb25hIGVuIGxhIHZlcnNpXHUwMEYzbiAxLjAgZGUgQXJlYXMgZGUgVmlkYS5cbiAgICAgICAgbGV0IGFcdTAwRjFvcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJBWVwiLCBudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBsZXQgbm9tYnJlQXJjaGl2byA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuZmlsZU5hbWU7XG4gICAgICAgICAgICBjb25zdCByZWdleCA9IC9cXC8oXFxkezR9KS87XG4gICAgICAgICAgICBjb25zdCByZXN1bHRhZG8gPSBub21icmVBcmNoaXZvLm1hdGNoKHJlZ2V4KTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRhZG8gJiYgcmVzdWx0YWRvWzFdKSB7XG4gICAgICAgICAgICAgICAgLy8gUmV0b3JuYW1vcyBlbCBncnVwbyBjYXB0dXJhZG8sIHF1ZSBlcyBlbCB2YWxvciBkZXNlYWRvIGRlIHN1YnN0clxuICAgICAgICAgICAgICAgIGFcdTAwRjFvID0gcmVzdWx0YWRvWzFdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgdW5hIGNvaW5jaWRlbmNpYSwgcG9kclx1MDBFRGFtb3MgcmV0b3JuYXIgbnVsbCBvIGFsZ3VuYSBvdHJhIHNlXHUwMEYxYWwgZGUgbm8gZW5jb250cmFkb1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICBpZiAoYVx1MDBGMW8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5hXHUwMEYxbyA9IGFcdTAwRjFvO1xuICAgICAgICByZXR1cm4gYVx1MDBGMW87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RGVzY3JpcGNpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcGNpb24gPSBhd2FpdCB0aGlzLnByb21wdChgXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIGRldGFsbGVzIGRlIHR1IG9iamV0aXZvP2AsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUcmltZXN0cmUoKXtcbiAgICAgICAgbGV0IHRyaW1lc3RyZTtcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJUUVwiLG51bGwsdGhpcy5wbHVnaW4pO1xuICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIFtcIlExXCIsIFwiUTJcIiwgXCJRM1wiLCBcIlE0XCJdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTFgLFxuICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTJgLFxuICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTNgLFxuICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTRgLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBgXHUwMEJGRW4gcXVcdTAwRTkgdHJpbWVzdHJlIGRlbCAke3RoaXMubm90YS5hXHUwMEYxb30gY29uc2lkZXJhcyBxdWUgc2UgcHVlZGUgcmVhbGl6YXIgZXNlIG9iamV0aXZvP2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHRyaW1lc3RyZTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICBcbiAgICBhc3luYyBnZXRBbGlhc2VzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS8ke3RoaXMubm90YS5pZH1gKVxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuYVx1MDBGMW99LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMubm90YS5pZH1gKVxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICBcbiAgICAgICAgbGV0IGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb31gXG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG5cbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gIH0iLCAiLy9jYW1wb3MgPSBbXCJpZFwiLFwiZmVjaGFcIixcImFcdTAwRjFvXCIsXCJlc3RhZG9cIixcImFsaWFzZXNcIixcInJlbmFtZVwiXVxuXG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyQmFzZSB9IGZyb20gJy4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBDb21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9Db21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIJztcblxuZXhwb3J0IGNsYXNzIENvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkggZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlcntcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuICAgIGFzeW5jIGdldEFcdTAwRjFvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IGFcdTAwRjFvO1xuICAgICAgICAvL2xldCB0cmltZXN0cmVzID0gYXdhaXQgdGhpcy5hY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXMoXCJUcmltZXN0cmFsXCIpOyAvLyBGdW5jaW9uYSBlbiBsYSB2ZXJzaVx1MDBGM24gMS4wIGRlIEFyZWFzIGRlIFZpZGEuXG4gICAgICAgIGxldCBhXHUwMEYxb3MgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQVlcIixudWxsLHRoaXMucGx1Z2luKTtcbiAgICAgICAgYVx1MDBGMW8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhXHUwMEYxb3MubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxhXHUwMEYxb3MubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgZmFsc2UsIGBTZWxlY2Npb25hIGVsIGFcdTAwRjFvIHF1ZSBkZXNlYXMgcGFyYSBlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChhXHUwMEYxbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmFcdTAwRjFvID0gYVx1MDBGMW87XG4gICAgICAgIHJldHVybiBhXHUwMEYxbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0vJHt0aGlzLm5vdGEuYVx1MDBGMW99YCkgICBcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfS8ke3RoaXMubm90YS5pZH1gKSAgIFxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99YFxuICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS9QbGFuZWFjaVx1MDBGM24gJHt0aGlzLm5vdGEuYVx1MDBGMW99Lm1kYFxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcblxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBSZXBvc2l0b3Jpb0xpYnJvc19GSCBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBcdTAwQkZQb3JxdWUgZXN0XHUwMEUxcyBhZ3JlZ2FuZG8gZXN0ZSBsaWJybz86YCwgXCJcIiwgZmFsc2UsIHRydWUpO1xuICAgICAgICB0aGlzLm5vdGEuZGVzY3JpcGNpb24gPSBkZXNjcmlwY2lvbjtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXBjaW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEVzdGFkbygpe1xuICAgICAgICBsZXQgZXN0YWRvO1xuICAgICAgICAgICAgICAgIGVzdGFkbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBQYXJhIEFyY2hpdm8gLSBMZWlkb1wiLCBcIlx1RDgzRFx1REZFMiAtPiBFbiBMZWN0dXJhIC0gQ29tcHJhZG9cIixcIlx1RDgzRFx1REZFMSAtPiBQb3IgQWRxdWlyaXJcIiwgXCJcdUQ4M0RcdUREMzQgLT4gQ2FuY2VsYWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgYEVuIHF1ZSBlc3RhZG8gZXN0XHUwMEUxIGVzdGUgbGlicm8/YCk7XG4gICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGVzdGFkbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBMaWJybyBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgLy90aGlzLm5vdGEuZXN0YWRvID0gY2FtcG87XG4gICAgICAgIHJldHVybiBlc3RhZG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGl0dWxvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudGl0dWxvO1xuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpOiBQcm9taXNlPHsgc2lBc3VudG86IGJvb2xlYW4sIG5vbWJyZTogc3RyaW5nW10gfT4geyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcbiAgICAgICAgbGV0IHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5hY3Rpdm87XG4gICAgICAgIGxldCBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICBsZXQgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIG5vdGEuZnJvbnRtYXR0ZXIgZXhpc3RlIHkgYXNpZ25hciB1biBvYmpldG8gdmFjXHUwMEVEbyBhIGZpbGVcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIgPSBub3RhLmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlci5maWxlID0ge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSwgYWN0aXZvKTtcbiAgICAgICAgICAgIC8vMS4gc2lBc3VudG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgIHBhZHJlcy51bnNoaWZ0KG5vbWJyZSk7IC8vIEFcdTAwRjFhZGUgZWwgbm9tYnJlIGFsIGluaWNpbyBkZWwgYXJyZWdsbywgZGVzcGxhemFuZG8gbG9zIGRlbVx1MDBFMXMgZWxlbWVudG9zXG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSkgeyAvLyBMYSBub3RhIGFjdGl2cyBlcyB1bmE6IFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vbWJyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBQcm95ZWN0b0dURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgb3RyYSBjb3NhIHF1ZSBubyBlcyBwcm95ZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGE/LmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIGFycmVnbG8gbmkgc3RyaW5nLCBhcmVhSW50ZXJlcyBlcyBlbCBhcmVhIGludGVyZXMgcXVlIGVzdFx1MDBFMSBlbiB0aXR1bG8uICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIiB8fCBub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBSUiAtIFBHVEQgLSBQUSAgaWYoc2lBc3VudG8pXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNpQXN1bnRvLCBub21icmU6IHBhZHJlcyB9XG4gICAgfVxuXG5cblxuICAgIFxuXG59IiwgImltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgQmlibGlvdGVjYV9GSCB9IGZyb20gJy4uLy4uL0ludGVyZmFjZXMvQmlibGlvdGVjYV9GSCc7XG5cbmV4cG9ydCBjbGFzcyBCaWJsaW90ZWNhX0ZIIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIEJpYmxpb3RlY2FfRkh7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldFBhcmFtZXRyb3NMaWJybygpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICBsZXQgYXJjaGl2b0FjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIFxuICAgICAgICBpZiAoIWFyY2hpdm9BY3Rpdm8pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBvYnRlbmVyIGVsIGFyY2hpdm8gYWN0aXZvLlwiKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgY2FtcG9zID0gW1wiaWRcIiwgXCJ0aXR1bG9cIiwgXCJhdXRvclwiLCBcInB1Ymxpc2hlclwiLCBcInB1YmxpY2Fkb1wiLCBcInBhZ2luYXNcIiwgXCJpc2JuMTBcIiwgXCJpc2JuMTNcIl07XG4gICAgICAgIGxldCBwYXJhbWV0cm9zID0ge307XG4gICAgXG4gICAgICAgIGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykge1xuICAgICAgICAgIGxldCB2YWxvckNhbXBvID0gYXdhaXQgdGhpcy5nZXRGcm9udG1hdHRlckZpZWxkKGFyY2hpdm9BY3Rpdm8ucGF0aCwgY2FtcG8pO1xuICAgICAgICAgIHRoaXMubm90YVtjYW1wb10gPSB2YWxvckNhbXBvO1xuICAgICAgICAgIHBhcmFtZXRyb3NbY2FtcG9dID0gdmFsb3JDYW1wbztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gcGFyYW1ldHJvcztcbiAgICAgIH1cbiAgICBcbiAgICAgIGFzeW5jIGdldEZyb250bWF0dGVyRmllbGQoZmlsZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCB0RmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG4gICAgICAgICAgaWYgKHRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRGaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgIFxuICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyICYmIGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgICAgICAgICBjb25zdCBmaWVsZFZhbHVlID0gZnJvbnRtYXR0ZXJbZmllbGRdO1xuICAgICAgICAgICAgICByZXR1cm4gZmllbGRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGZpZWxkVmFsdWUgIT09IG51bGwgJiYgZmllbGRWYWx1ZSAhPT0gXCJcIiA/IGZpZWxkVmFsdWUgOiBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVsIGNhbXBvICcke2ZpZWxkfScgbm8gZXhpc3RlIGVuIGVsIGZyb250bWF0dGVyLmApO1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVsIGFyY2hpdm8gbm8gZXhpc3RlIG8gbm8gZXMgdW4gYXJjaGl2byBkZSB0ZXh0by5cIik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb25zdWx0YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhc3luYyBnZXRGb3JtYXRvKCl7XG4gICAgICAgIGxldCBjYW1wbztcbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIktpbmRsZVwiLCBcIkdvb2dsZSBCb29rc1wiLFwiUERGXCIsIFwiRlx1MDBFRHNpY29cIl0sW1wiS2luZGxlXCIsIFwiR29vZ2xlIEJvb2tzXCIsXCJQREZcIiwgXCJGXHUwMEVEc2ljb1wiXSwgZmFsc2UsIGBcdTAwQkZDb21vIHRpZW5lcyBlc3RlIGxpYnJvP2ApO1xuICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBMaWJybyBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgLy90aGlzLm5vdGEuZXN0YWRvID0gY2FtcG87XG4gICAgICAgIHJldHVybiBjYW1wbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYWdpbmFzKCl7XG4gICAgICAgIGxldCBjYW1wbywgcGFnaW5hcztcbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsXCJOb1wiXSxbdHJ1ZSwgZmFsc2VdLCBmYWxzZSwgYFx1MDBCRkVsIGxpYnJvIHRpZW5lICR7dGhpcy5ub3RhLnBhZ2luYXN9IHBcdTAwRTFnaW5hcz9gKTtcbiAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoY2FtcG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgTGlicm8gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9ZWxzZSBpZiAoY2FtcG8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBwYWdpbmFzID0gYXdhaXQgdGhpcy5wcm9tcHQoYEN1YW50YXMgcFx1MDBFMWdpbmFzIHRpZW5lIGVsIGxpYnJvP2AsIFwiXCIsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLm5vdGEucGFnaW5hcyA9IHBhZ2luYXM7XG4gICAgICAgIHJldHVybiBwYWdpbmFzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEucGFnaW5hcztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgYXN5bmMgZ2V0QXN1bnRvKCk6IFByb21pc2U8eyBzaUFzdW50bzogYm9vbGVhbiwgbm9tYnJlOiBzdHJpbmdbXSB9PiB7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuICAgICAgICAgICAgbGV0IHBhZHJlcyA9IFtdO1xuICAgICAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICBsZXQgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgICAgIGxldCBub3RhO1xuICAgICAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIgPSBub3RhLmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgICAgIC8vMS4gc2lBc3VudG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpIHsgLy8gTGEgbm90YSBhY3RpdnMgZXMgdW5hOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBQcm95ZWN0b0dURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIikge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFBHVEQgeSBQUVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiIHx8IG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBSUiAtIFBHVEQgLSBQUSAgaWYoc2lBc3VudG8pXG4gICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHNpQXN1bnRvLCBub21icmU6IHBhZHJlcyB9XG4gICAgICAgIH1cblxuXG59IiwgImltcG9ydCB7IFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBBbnVhbF9GSCBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgICAgICBzdXBlcih0cCwgaW5mb1N1YnNpc3RlbWEsIHBsdWdpbik7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKSB7XG4gICAgICAgIHRoaXMubm90YS5pZCA9IHRoaXMuZ2VuZXJhdGVVVUlEKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuaWQ7XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRGZWNoYSgpIHtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gRGF0ZVRpbWUubm93KCkudG9JU09EYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuZmVjaGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QVx1MDBGMW8oKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRZZWFyID0gRGF0ZVRpbWUubm93KCkueWVhcjtcbiAgICAgICAgY29uc3QgeWVhcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA3IH0sIChfLCBpKSA9PiBjdXJyZW50WWVhciAtIDMgKyBpKTtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdZZWFycyA9IGF3YWl0IHRoaXMuZ2V0RXhpc3RpbmdZZWFycygpO1xuICAgICAgICBjb25zdCBhdmFpbGFibGVZZWFycyA9IHllYXJzLmZpbHRlcih5ZWFyID0+ICFleGlzdGluZ1llYXJzLmluY2x1ZGVzKHllYXIudG9TdHJpbmcoKSkpO1xuXG4gICAgICAgIGNvbnN0IHllYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhdmFpbGFibGVZZWFycy5tYXAoU3RyaW5nKSwgYXZhaWxhYmxlWWVhcnMubWFwKFN0cmluZyksIGZhbHNlLCBcIlNlbGVjY2lvbmEgZWwgYVx1MDBGMW86XCIpO1xuICAgICAgICBpZiAoeWVhciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlNlbGVjY2lcdTAwRjNuIGRlIGFcdTAwRjFvIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmFcdTAwRjFvID0geWVhcjtcbiAgICAgICAgcmV0dXJuIHllYXI7XG4gICAgfVxuICAgICBcbiAgICBcbiAgICBhc3luYyBnZXRFc3RhZG8oKSB7XG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBcIlx1RDgzRFx1REZFMlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmVzdGFkbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKSB7XG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG5cbiAgICAgICAgY29uc3QgZXhpc3RzID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICAgaWYgKGV4aXN0cyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBvdmVyd3JpdGUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYEVsIGFyY2hpdm8gJHtuZXdOYW1lfSB5YSBleGlzdGUuIFx1MDBCRlF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKG92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RzKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0RXhpc3RpbmdZZWFycygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgeWVhckZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgY29uc3QgeWVhcnMgPSB5ZWFyRmlsZXMubWFwKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSk7XG4gICAgICAgIHJldHVybiB5ZWFycztcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJztcblxuZXhwb3J0IGNsYXNzIFRyaW1lc3RyYWxGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgaW5mb1N1YnNpc3RlbWE6IGFueSwgcGx1Z2luOiBhbnkpIHtcbiAgICAgICAgc3VwZXIodHAsIGluZm9TdWJzaXN0ZW1hLCBwbHVnaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldElkKCkge1xuICAgICAgICB0aGlzLm5vdGEuaWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmlkO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEZlY2hhKCkge1xuICAgICAgICB0aGlzLm5vdGEuZmVjaGEgPSBEYXRlVGltZS5ub3coKS50b0lTT0RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5mZWNoYTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUcmltZXN0cmUoKSB7XG4gICAgICAgIC8vIE9wY2lvbmVzIHByZWRlZmluaWRhcyBwYXJhIHRyaW1lc3RyZXNcbiAgICAgICAgY29uc3QgdHJpbWVzdHJlcyA9IFtcIlExXCIsIFwiUTJcIiwgXCJRM1wiLCBcIlE0XCJdO1xuICAgICAgICAvLyBPYnRpZW5lIGxvcyB0cmltZXN0cmVzIHlhIGV4aXN0ZW50ZXMgZW4gbGEgY2FycGV0YSBkZWZpbmlkYVxuICAgICAgICBjb25zdCBleGlzdGluZ1RyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmdldEV4aXN0aW5nVHJpbWVzdHJlcygpO1xuICAgICAgICAvLyBGaWx0cmEgcGFyYSBkZWphciBzb2xvIGxhcyBvcGNpb25lcyBxdWUgbm8gc2UgaGFuIHVzYWRvXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVRyaW1lc3RyZXMgPSB0cmltZXN0cmVzLmZpbHRlcihxID0+ICFleGlzdGluZ1RyaW1lc3RyZXMuaW5jbHVkZXMocSkpO1xuICAgICAgICBpZiAoYXZhaWxhYmxlVHJpbWVzdHJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUb2RvcyBsb3MgdHJpbWVzdHJlcyB5YSBoYW4gc2lkbyBjcmVhZG9zIGVuIGVzdGEgY2FycGV0YS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICBhdmFpbGFibGVUcmltZXN0cmVzLFxuICAgICAgICAgICAgYXZhaWxhYmxlVHJpbWVzdHJlcyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJTZWxlY2Npb25hIGVsIHRyaW1lc3RyZTpcIlxuICAgICAgICApO1xuICAgICAgICBpZiAodHJpbWVzdHJlID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgdHJpbWVzdHJlIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHRyaW1lc3RyZTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKSB7XG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBcIlx1RDgzRFx1REZFMlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmVzdGFkbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKSB7XG4gICAgICAgIC8vIENvbnN0cnV5ZSBlbCBudWV2byBub21icmUgdXNhbmRvIGVsIGZvbGRlciB5IGVsIHRyaW1lc3RyZSBzZWxlY2Npb25hZG9cbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50cmltZXN0cmV9Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgIGlmIChleGlzdHMgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcndyaXRlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBFbCBhcmNoaXZvICR7bmV3TmFtZX0geWEgZXhpc3RlLiBcdTAwQkZRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0cyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGdldEV4aXN0aW5nVHJpbWVzdHJlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgLy8gU2UgZmlsdHJhbiBsb3MgYXJjaGl2b3MgcXVlIHNlIGVuY3VlbnRyYW4gZW4gbGEgY2FycGV0YSBkZWZpbmlkYSBwYXJhIG5vdGFzIHRyaW1lc3RyYWxlc1xuICAgICAgICBjb25zdCB0cmltZXN0cmVGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKSk7XG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSB0cmltZXN0cmVGaWxlcy5tYXAoZmlsZSA9PiBmaWxlLmJhc2VuYW1lKTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZXM7XG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvYWRkT25zQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMTkgMDk6MzI6MDNcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ4OjM1XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuZXhwb3J0IGNsYXNzIGFkZE9uc0FQSSB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luKSB7XG4gICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG4gIFxuICAgIGNyZWFyUHJldk5leHQocGFnaW5hcywgcGFnSW5kaWNlLCBkdikge1xuICAgICAgICBsZXQgcGFnaW5hID0gZHYuY3VycmVudCgpO1xuICAgICAgICBsZXQgaW5kaWNlO1xuICAgICAgICBmb3IgKGxldCBhID0gMDsgYSA8IHBhZ2luYXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIGlmIChwYWdpbmFzW2FdLmZpbGUubmFtZSA9PSBwYWdpbmEuZmlsZS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgaW5kaWNlID0gYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBsZXQgbGlua3MgPSBbXTtcbiAgICAgICAgaWYgKGluZGljZSA9PSAwICYmIHBhZ2luYXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGxpbmtzWzBdID0gXCJcIjtcbiAgICAgICAgICAgIGxpbmtzWzFdID0gXCJcIjtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRpY2UgPT0gMCkge1xuICAgICAgICAgICAgbGlua3NbMF0gPSBcIlwiO1xuICAgICAgICAgICAgbGlua3NbMV0gPSBcIlx1MjdBMVx1RkUwRiBcIiArIGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSArIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgKyAxXSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGljZSA9PSAocGFnaW5hcy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgbGlua3NbMF0gPSBkdi5mdW5jLmxpbmsocGFnaW5hc1tpbmRpY2UgLSAxXS5maWxlLnBhdGgsIHRoaXMuZGV0ZXJtaW5hclRleHRvRW5sYWNlKHBhZ2luYXNbaW5kaWNlIC0gMV0pKSArIFwiIFx1MkIwNVx1RkUwRlwiO1xuICAgICAgICAgICAgbGlua3NbMV0gPSBcIlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlua3NbMF0gPSBkdi5mdW5jLmxpbmsocGFnaW5hc1tpbmRpY2UgLSAxXS5maWxlLnBhdGgsIHRoaXMuZGV0ZXJtaW5hclRleHRvRW5sYWNlKHBhZ2luYXNbaW5kaWNlIC0gMV0pKSArIFwiIFx1MkIwNVx1RkUwRlwiO1xuICAgICAgICAgICAgbGlua3NbMV0gPSBcIlx1MjdBMVx1RkUwRiBcIiArIGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSArIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgKyAxXSkpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGR2LnBhcmFncmFwaChsaW5rc1swXSArIFwiID09XCIgKyBkdi5mdW5jLmxpbmsocGFnSW5kaWNlLmZpbGUucGF0aCwgcGFnSW5kaWNlLnRpdHVsbyB8fCBwYWdJbmRpY2UuZmlsZS5uYW1lKSArIFwiPT0gXCIgKyBsaW5rc1sxXSk7XG4gICAgfVxuXG4gICAgZGV0ZXJtaW5hclRleHRvRW5sYWNlKHBhZ2luYSkge1xuICAgICAgICBpZiAocGFnaW5hLnRpdHVsbykge1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2luYS50aXR1bG87XG4gICAgICAgIH0gZWxzZSBpZiAocGFnaW5hLmFsaWFzZXMgJiYgcGFnaW5hLmFsaWFzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2luYS5hbGlhc2VzWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2luYS5maWxlLm5hbWU7XG4gICAgICAgIH1cbiAgICB9XG4gIFxuXG5cbiAgfSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDk6NDNcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuLy9pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IG1vZGFsX2NhbWJpb0hGIH0gZnJvbSBcIi4uLy4uL21vZHVsb1JlZ2lzdHJvVGllbXBvL21vZGFscy9jYW1iaW9IRlwiO1xuXG5leHBvcnQgY2xhc3MgWUFNTFVwZGF0ZXJBUEkge1xuICAgIC8vcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGluZm9TdWJzaXN0ZW1hOiBvYmplY3Q7IC8vIEFzdW1pZW5kbyBxdWUgZXMgdW4gc3RyaW5nXG4gICAgcHJpdmF0ZSB0cDogb2JqZWN0O1xuICAgIHByaXZhdGUgcGF0aENhbXBvczogc3RyaW5nOyBcbiAgICBwcml2YXRlIG5vdGE6IG9iamVjdDtcbiAgICBwcml2YXRlIGluZm9Ob3RhOiBvYmplY3Q7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBmb2xkZXIgZSBpbmRpY2UgY29uIHZhbG9yZXMgcHJlZGV0ZXJtaW5hZG9zIG8gbFx1MDBGM2dpY2EgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICB0aGlzLmluZm9Ob3RhID0ge307XG4gICAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgICB0aGlzLnRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cbiAgICBcblxuICAgIGFzeW5jIGFjdHVhbGl6YXJOb3RhKGluZm9Ob3RhOiBhbnksIGNhbXBvczogYW55KSB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAvL2xldCBub3RhID0ge307IC8vIEluaWNpYWxpemEgZWwgb2JqZXRvIG5vdGEuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvTm90YSwgaW5mb05vdGEpOyBcbiAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXZpZGUgZWwgY2FtcG8gZW4gZnVuY2lcdTAwRjNuIGRlbCBzXHUwMEVEbWJvbG8gXCJfXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGVzID0gY2FtcG8uc3BsaXQoJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhbXBvTmFtZSwgZnVuY3Rpb25OYW1lO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldHJvID0gbnVsbDsgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGhheSB1biBzXHUwMEVEbWJvbG8gXCJfXCIsIHVzYSBsYSBwYXJ0ZSBhbnRlcyBkZSBcIl9cIiBwYXJhIGVsIG5vbWJyZSBkZSBsYSBmdW5jaVx1MDBGM24sXG4gICAgICAgICAgICAgICAgICAgIC8vIHkgbGEgcGFydGUgZGVzcHVcdTAwRTlzIGRlIFwiX1wiIGNvbW8gcGFyXHUwMEUxbWV0cm8uXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gYGdldCR7cGFydGVzWzBdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydGVzWzBdLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wb05hbWUgPSBwYXJ0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0cm8gPSBwYXJ0ZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wb05hbWUgPSBwYXJ0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSAgYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuaW5mb05vdGEuZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbG9yQWN0dWFsQ2FtcG8gPSBtZXRhZGF0YVtjYW1wb05hbWVdIHx8IFwiU2luIGRlZmluaXJcIjtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYS4gU2kgZXhpc3RlIHVuIHBhclx1MDBFMW1ldHJvLCBwXHUwMEUxc2FsbyBhIGxhIGZ1bmNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0cm8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFbY2FtcG9OYW1lXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXShwYXJhbWV0cm8sdmFsb3JBY3R1YWxDYW1wbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb05hbWVdID0gYXdhaXQgdGhpc1tmdW5jdGlvbk5hbWVdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBmdW5jaVx1MDBGM24gJHtmdW5jdGlvbk5hbWV9IG5vIGVzdFx1MDBFMSBkZWZpbmlkYS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hbmVqYSBlbCBjYXNvIGVuIHF1ZSBsYSBmdW5jaVx1MDBGM24gbm8gZXN0XHUwMEU5IGRlZmluaWRhLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgbm90YVxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRWplY3V0YSB0dSBjXHUwMEYzZGlnbyBhcXVcdTAwRUQgc2kgZWwgb2JqZXRvIGBub3RhYCB0aWVuZSBtXHUwMEUxcyBkZSB1bmEgcHJvcGllZGFkXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyh0aGlzLm5vdGEsIGluZm9Ob3RhLmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy9ObyBzZSBlbmNvbnRyYXJvbiBjYW1wb3MgcGFyYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7IC8vIFJldG9ybmEgZWwgb2JqZXRvIG5vdGEgY29uIHRvZGFzIGxhcyBwcm9waWVkYWRlcyBhZ3JlZ2FkYXMuXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGFyY2hpdmFyTm90YShpbmZvTm90YTogYW55LCBjYW1wb3M6IGFueSkge1xuICAgICAgICBcbiAgICAgICAgbGV0IG5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YSBlbCBvYmpldG8gbm90YS5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9Ob3RhLCBpbmZvTm90YSk7IFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGFyYSBjb25zdHJ1aXIgZWwgbm9tYnJlIGRlIGxhIGZ1bmNpXHUwMEYzbiAocC4gZWouLCBcImdldElkXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYSB5IGFzaWduYSBlbCByZXN1bHRhZG8gYWwgY2FtcG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIG5vdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RhW2NhbXBvXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgYXNpZ25hciB1biB2YWxvciBwb3IgZGVmZWN0byBhIG5vdGFbY2FtcG9dIG8gc2ltcGxlbWVudGUgY29udGludWFyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgbm90YVxuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgbm90YS5lc3RhZG8gPSBcIlx1RDgzRFx1REQzNVwiO1xuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhub3RhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVqZWN1dGEgdHUgY1x1MDBGM2RpZ28gYXF1XHUwMEVEIHNpIGVsIG9iamV0byBgbm90YWAgdGllbmUgbVx1MDBFMXMgZGUgdW5hIHByb3BpZWRhZFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMobm90YSwgaW5mb05vdGEuZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvL05vIHNlIGVuY29udHJhcm9uIGNhbXBvcyBwYXJhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGVsIGNcdTAwRjNkaWdvIHBhcmEgcHJvY2VzYXIgZWwgb2JqZXRvIG5vdGEsIGNvbW8gZ3VhcmRhciBlbiB1biBhcmNoaXZvIGRlbnRybyBkZSAnZm9sZGVyJy5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vdGE7IC8vIFJldG9ybmEgZWwgb2JqZXRvIG5vdGEgY29uIHRvZGFzIGxhcyBwcm9waWVkYWRlcyBhZ3JlZ2FkYXMuXG4gICAgfVxuXG5cbiAgICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKG5vdGEsIHJ1dGEpIHtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhKTtcbiAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEl0ZXJhciBzb2JyZSBjYWRhIHByb3BpZWRhZCBkZWwgb2JqZXRvICdub3RhJ1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FtcG8gaW4gbm90YSkge1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KGNhbXBvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBjYW1wbyBlbiBlbCBmcm9udG1hdHRlciBjb24gZWwgdmFsb3IgY29ycmVzcG9uZGllbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW2NhbXBvXSA9IG5vdGFbY2FtcG9dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbiB8fCAhdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyAgRm9ybWEgZGUgYWNjZWRlciBhbCBvYmpldG8gdHAgbm9ybWFsIHF1ZSBoZSB1c2FkbyBkZXNkZSBEVkpTIGN1YW5kbyBjdXJyZW50IEZ1bmN0aW9ucyBlc3RhIGNhcmdhZG8uXG4gICAgICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICAgICAgLy9jb25zdCB0cCA9IHRlbXBsYXRlclBsdWdpbi50ZW1wbGF0ZXIuY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgICAgICAvLyAtPiB2ZXJzaW9uIHF1ZSBmYWxsYSBzaSBubyBlc3RhIGFycmliYSBlbCBwbHVnaW4gcG9ycXVlIGhhY2UgZ2V0IGRlbCBwbHVnaW4gZGlyZWN0by4gY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oJ3RlbXBsYXRlci1vYnNpZGlhbicpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcInRlbXBsYXRlci1vYnNpZGlhblwiXS50ZW1wbGF0ZXI7XG4gICAgICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIHRoZSBkYXRlIG1vZHVsZVxuICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgIGlmICghdHAuc3lzdGVtKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCd0cCBlbiBZQU1MVXBkYXRlckFQSSBzZSBoYSBjYXJnYWRvIHNhdGlzZmFjdG9yaWFtZW50ZScpO1xuICAgIHJldHVybiB0cDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRGZWNoYShmbGFnLCBhY3R1YWwpIHtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuICAgIH1cblxuICAgIGZvcm1hdGVhckZlY2hhKGZlY2hhOiBEYXRlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgICAgICBjb25zdCBmZWNoYUxvY2FsID0gbmV3IERhdGUoZmVjaGEuZ2V0VGltZSgpIC0gb2Zmc2V0KTtcbiAgICAgICAgY29uc3QgZmVjaGFGb3JtYXRvID0gZmVjaGFMb2NhbC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIGNvbnN0IGRpYXMgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pXHUwMEU5cmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1NcdTAwRTFiYWRvJ107XG4gICAgICAgIGNvbnN0IGRpYVNlbWFuYSA9IGRpYXNbZmVjaGEuZ2V0RGF5KCldO1xuICAgICAgICBjb25zdCBob3JhRm9ybWF0byA9IGZlY2hhLnRvVGltZVN0cmluZygpLnNwbGl0KCcgJylbMF0uc3Vic3RyaW5nKDAsIDUpO1xuICAgICAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0SG9yYUZpbmFsKHBhcmFtZXRybywgYWN0dWFsKXtcbiAgICAgICAgLy8gRXN0YSBmdW5jaVx1MDBGM24gc29sbyByZWNpYmUgZW4gZWwgcGFyXHUwMEUxbWV0cm8gbGEgaG9yYSBmaW5hbCBudWV2YSwgcGFyYSBhY3R1YWxpemFyIGVsIHZhbG9yLlxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgaWYgKHBhcmFtZXRybyA9PT0gdW5kZWZpbmVkKXtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG4gICAgICAgIH1lbHNleyBcbiAgICAgICAgICAgIHJldHVybiBwYXJhbWV0cm87XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaWVtcG9UcmFiYWphZG8ocGFyYW1ldHJvLCBhY3R1YWwpe1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBcbiAgICAgICAgbGV0IGhvcmFJbmljaW9TdHIgPSB0aGlzLmluZm9Ob3RhLmhvcmFJbmljaW87XG4gICAgICAgIGxldCBjaWVycmU7XG4gICAgICAgIC8vIFN1cG9uaWVuZG8gcXVlIGVsIGZvcm1hdG8gZXMgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIiB5IHF1aWVyZXMgY29udmVydGlybG8gYSB1biBmb3JtYXRvIHJlY29ub2NpZG8gcG9yIERhdGVcbiAgICAgICAgLy8gUHJpbWVybywgZWxpbWluYSBsYSBwYXJ0ZSBkZWwgZFx1MDBFRGEgZGUgbGEgc2VtYW5hLCB5YSBxdWUgRGF0ZSgpIG5vIGxhIG5lY2VzaXRhXG4gICAgICAgIGxldCBbZmVjaGEsICwgaG9yYV0gPSBob3JhSW5pY2lvU3RyLnNwbGl0KCcgJyk7XG4gICAgICAgIGxldCBmZWNoYUhvcmFJU08gPSBgJHtmZWNoYX1UJHtob3JhfWA7XG4gICAgICAgIC8vIENyZWFyIG9iamV0b3MgRGF0ZVxuICAgICAgICBsZXQgaG9yYUluaWNpbyA9IG5ldyBEYXRlKGZlY2hhSG9yYUlTTyk7XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT0gdW5kZWZpbmVkKXsgICAgXG4gICAgICAgIGNpZXJyZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsZXQgW2ZlY2hhQ2llcnJlLCAsaG9yYUNpZXJyZV0gPSBwYXJhbWV0cm8uc3BsaXQoJyAnKTsgICBcbiAgICAgICAgICAgIGxldCBmZWNoYUhvcmFDaWVycmVJU08gPSBgJHtmZWNoYUNpZXJyZX1UJHtob3JhQ2llcnJlfWA7XG4gICAgICAgICAgICBjaWVycmUgPSBuZXcgRGF0ZShmZWNoYUhvcmFDaWVycmVJU08pO1xuICAgICAgICB9ICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXIgbGEgZGlmZXJlbmNpYSBlbiBtaWxpc2VndW5kb3NcbiAgICAgICAgbGV0IGRpZmVyZW5jaWFFbk1pbGlzZWd1bmRvcyA9IGNpZXJyZSAtIGhvcmFJbmljaW87XG4gICAgICAgIHJldHVybiBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3M7XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRTZWNJZChmbGFnLCBhY3R1YWwpe1xuXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFRpdHVsbyhmbGFnLCBhY3R1YWwpe1xuICAgICAgICBsZXQgdGl0dWxvID0gYXdhaXQgdGhpcy50cC5zeXN0ZW0ucHJvbXB0KGBUaXR1bG8gZGUgZXN0ZShhKSAke3RoaXMuaW5mb1N1YnNpc3RlbWEubmFtZX1gLCBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLm5hbWV9IC0gJHt0aGlzLm5vdGEuaWR9YCwgdHJ1ZSlcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodGl0dWxvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS50aXR1bG8gPSB0aXR1bG87XG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RGVzY3JpcGNpb24oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IHByb21wdCA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICBsZXQgZGVzY3JpcGNpb247XG4gICAgICAgIHN3aXRjaCAoZmxhZykge1xuICAgICAgICAgICAgY2FzZSBcIlJlZ2lzdHJvVGllbXBvXCI6XG4gICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGRGV0YWxsZSBkZWwgUmVnaXN0cm8gVGllbXBvOlwiLCBhY3R1YWwsIGZhbHNlLCB0cnVlICkgICBcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIHVuYSBkZXNjcmlwY2lcdTAwRjNuP1wiLCBcIiBcIiArIGBFc3RhIG5vdGEgZXMgc29icmUgJHt0aGlzLm5vdGEudGl0dWxvfWAsIGZhbHNlLCB0cnVlIClcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoZGVzY3JpcGNpb24gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBbGlhc2VzKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107ICAgICAgXG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAvLyAwIC0+IE5vbWJyZSwgMSAtPiB0eXBlICsgTm9tYnJlXG4gICAgICAgICAgICAgICAgYnJlYWs7ICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICAgICBcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IHNpQXN1bnRvLCBub21icmU7IFxuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCl7IFxuICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgY29uc3Qgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pOyBcbiAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy50cC5zeXN0ZW0uc3VnZ2VzdGVyKFtcIlNpXCIsXCJOb1wiXSxbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG5vbWJyZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG8gPSB7fTtcbiAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG8uc2lBc3VudG8gPSBzaUFzdW50bztcbiAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG8ubm9tYnJlID0gbm9tYnJlOyAgICBcbiAgICAgICAgcmV0dXJuIHtzaUFzdW50bywgbm9tYnJlfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0Q2xhc2lmaWNhY2lvbihmbGFnLCBhY3R1YWwpe1xuICAgICAgICBsZXQgY2xhc2lmaWNhY2lvbiwgdGFnQ2xhc2lmaWNhY2lvbiwgY2xhc2lmaWNhY2lvbkFYLCB0YWdzQ2xhc2lmaWNhY2lvbkFYO1xuICAgICAgICBsZXQgbnVldmFDbGFzaWZpY2FjaW9uID0gZmFsc2U7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChmcm9udG1hdHRlcikge1xuICAgICAgICAgICAgY2xhc2lmaWNhY2lvbkFYID0gZnJvbnRtYXR0ZXIudGl0dWxvQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnc0NsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRhZ3NDbGFzaWZpY2FjaW9uQVggfHwgW107XG4gICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgdGhpcy50cC5zeXN0ZW0uc3VnZ2VzdGVyKGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWCwgZmFsc2UsIFwiXHUwMEJGQ2xhc2lmaWNhclx1MDBFRGFzIGVzdGEgbm90YSBiYWpvIGFsZ3VuYSBkZSBsYXMgc2lndWllbnRlcyBjYXRlZ29yXHUwMEVEYXM/XCIpXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy4gXG4gICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnQ2xhc2lmaWNhY2lvbj09XCJOdWV2b1wiKXtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gYXdhaXQgdGhpcy50cC5zeXN0ZW0ucHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCBub21icmUgZGUgbGEgbnVldmEgY2xhc2lmaWNhY2lcdTAwRjNuIHF1ZSB2YXMgYSBpbmdyZXNhcj9cIiwgXCJNaUNsYXNpZmljYWNpXHUwMEYzblwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgdGhpcy50cC5zeXN0ZW0ucHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCB0YWcgcXVlIHV0aWxpemFyYXMgcGFyYSBcIiArIGNsYXNpZmljYWNpb24gKyBcIj8uIE5vIHV0aWxpY2VzIGVzcGFjaW9zIGVuIGxhIGRlZmluaWNpXHUwMEYzbiBkZWwgdGFnLlwiLCBcIm51ZXZvVGFnXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbnVldmFDbGFzaWZpY2FjaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIH1lbHNlIGlmKHRhZ0NsYXNpZmljYWNpb249PVwiTmluZ3VuYVwiKXtcbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gXCJcIlxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBcIlwiXHRcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5kaWNlID0gdGFnc0NsYXNpZmljYWNpb25BWC5pbmRleE9mKHRhZ0NsYXNpZmljYWNpb24pXG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGNsYXNpZmljYWNpb25BWFtpbmRpY2VdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobnVldmFDbGFzaWZpY2FjaW9uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlICdhY3RzVGVtYXMnIGVzIGVsIGNhbXBvIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0NsYXNpZmljYWNpb24gPSBbLi4uY2xhc2lmaWNhY2lvbkFYLCBjbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGxldCBuZXdUYWdDbGFzaWZpY2FjaW9uID0gWy4uLnRhZ3NDbGFzaWZpY2FjaW9uQVgsIHRhZ0NsYXNpZmljYWNpb25dXG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGl0dWxvQ2xhc2lmaWNhY2lvbkFYID0gbmV3Q2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYID0gbmV3VGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gIT0gXCJcIil7XG4gICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gXCJjbC9cIiArIHRhZ0NsYXNpZmljYWNpb24gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGEuY2xhc2lmaWNhY2lvbkFYID0gY2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHRoaXMubm90YS50YWdDbGFzaWZpY2FjaW9uQVggPSB0YWdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgcmV0dXJuIHtjbGFzZTogY2xhc2lmaWNhY2lvbiwgdGFnOiB0YWdDbGFzaWZpY2FjaW9ufTtcbiAgICB9XG4gICAgLy8gLT5cblxuICAgIGFzeW5jIGdldEVzdGFkbyhwYXJhbWV0cm8sIGFjdHVhbCl7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgY2FtcG87XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuXHQgICAgY2FtcG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiXHVEODNEXHVERDM1IC0+IENvbXBsZXRhZG8gLSBJbmZvcm1hY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERkUyIC0+IEZpbmFsaXphZG9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBlamVjdWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIFwiU2VsZWNjaW9uZSBlbCBudWV2byBlc3RhZG86XCIpO1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGNhbXBvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNhbXBvID0gcGFyYW1ldHJvO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmlsZW5hbWUoZmxhZywgYWN0dWFsKXtcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vaW5kZXgke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH1gKVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmZpbGVOYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIG1vZGFsQ2FtYmlvSEYobm90YSl7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgbW9kYWwgPSBuZXcgbW9kYWxfY2FtYmlvSEYodGhpcy5wbHVnaW4sIG5vdGEpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxuICAgXG5cbiAgfVxuICAiLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL2NhbWJpb0hGLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMjMgMTc6MjM6MTBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ2OjIyXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFlBTUxVcGRhdGVyQVBJIH0gZnJvbSAnLi4vLi4vbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJJztcblxuZXhwb3J0IGNsYXNzIG1vZGFsX2NhbWJpb0hGIGV4dGVuZHMgTW9kYWwge1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIGFwcDogQXBwO1xuICAgIGhvcmFGaW5hbElucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4sIGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbEluYm94XCIpO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuZmlsZS5maWxlKTtcbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uYWxpYXNlcyB8fCBcIkFjdGl2aWRhZCBzaW4gYWxpYXNcIjtcbiAgICAgICAgLy8gQ29udmVydGlyIGhvcmFJbmljaW9TdHIgYSBmb3JtYXRvIFwiWVlZWS1NTS1ERFRISDpNTVwiIHBhcmEgZGF0ZXRpbWUtbG9jYWxcbiAgICAgICAgY29uc3QgaG9yYUZpblN0ciA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uaG9yYUZpbmFsID8gd2luZG93Lm1vbWVudChtZXRhZGF0YS5mcm9udG1hdHRlci5ob3JhRmluYWwsIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpLmZvcm1hdChcIllZWVktTU0tRERUSEg6bW1cIikgOiAnJztcblxuICAgICAgICAvLyBDb25maWd1cmEgZWwgdFx1MDBFRHR1bG8gZGVsIG1vZGFsIHkgbXVlc3RyYSBlbCBhbGlhcyBkZSBsYSB0YXJlYVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgQ2FtYmlvIGhvcmEgY2llcnJlIGRlIHJlZ2lzdHJvLmAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFRhcmVhOiBcIiR7YWxpYXNlc1swXX1cImAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbnB1dCBwYXJhIGxhIGhvcmEgZGUgaW5pY2lvIGNvbiB0aXBvIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0hvcmEgZGUgY2llcnJlIHJlZ2lzdHJvOicgfSk7XG4gICAgICAgIHRoaXMuaG9yYUZpbmFsSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ2RhdGV0aW1lLWxvY2FsJyxcbiAgICAgICAgICAgIHZhbHVlOiBob3JhRmluU3RyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBndWFyZGFyIGNhbWJpb3NcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR3VhcmRhciBjYW1iaW9zJyB9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5ndWFyZGFyQ2FtYmlvcygpO1xuICAgIH1cblxuICAgIGFzeW5jIGd1YXJkYXJDYW1iaW9zKCkge1xuICAgICAgICBjb25zdCBudWV2YUhvcmFGaW5hbExvY2FsID0gdGhpcy5ob3JhRmluYWxJbnB1dC52YWx1ZTtcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxhIG51ZXZhIGhvcmEgdGllbmUgdmFsb3IgYW50ZXMgZGUgaW50ZW50YXIgZm9ybWF0ZWFyXG4gICAgICAgIGlmICghbnVldmFIb3JhRmluYWxMb2NhbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlBvciBmYXZvciwgc2VsZWNjaW9uZSB1bmEgaG9yYSBkZSBjaWVycmUuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydGlyIGRlIFwiWVlZWS1NTS1ERFRISDpNTVwiIGEgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIlxuICAgICAgICBjb25zdCBudWV2YUhvcmFGaW5hbCA9IHdpbmRvdy5tb21lbnQobnVldmFIb3JhRmluYWxMb2NhbCkuZm9ybWF0KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIC8vIEVqZWN1dGFyIFlBTUwgVXBkYXRlXG4gICAgICAgICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIixgaG9yYUZpbmFsXyR7bnVldmFIb3JhRmluYWx9YCxgdGllbXBvVHJhYmFqYWRvXyR7bnVldmFIb3JhRmluYWx9YCwgXCJlc3RhZG9fXHVEODNEXHVERDM1XCJdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFjdHVhbGl6YXJOb3RhKHRoaXMuZmlsZSwgY2FtcG9zKTtcblxuXG5cblxuICAgICAgICAgICAgLy8gQ2VycmFyIGVsIG1vZGFsIGRlc3B1XHUwMEU5cyBkZSBndWFyZGFyIGxvcyBjYW1iaW9zXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSG9yYSBkZSBGaW5hbGl6YWNpXHUwMEYzbiBhY3R1YWxpemFkYSBjb3JyZWN0YW1lbnRlLlwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBndWFyZGFyIGNhbWJpb3MgZW4gbGEgbm90YTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGFsIGd1YXJkYXIgbG9zIGNhbWJpb3MgZW4gbGEgbm90YS5cIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVEaWFyaW9BUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNyAxNjowOToxNlxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDg6NTBcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge05vdGljZSwgVEZpbGV9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHtEYXRlVGltZSwgRHVyYXRpb259IGZyb20gJ2x1eG9uJ1xuaW1wb3J0IHsgc3RhcnRlckFQSSB9IGZyb20gJy4vc3RhcnRlckFQSSc7XG5pbXBvcnQgeyB1dGlsc0FQSSB9IGZyb20gJy4uLy4uL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91dGlsc0FQSSc7XG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gJy4uLy4uL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSSc7XG5cbmV4cG9ydCBjbGFzcyBtZW51SG95QVBJIHtcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwOyAgLy8gR3VhcmRhIHVuYSByZWZlcmVuY2lhIGEgbGEgYXBsaWNhY2lcdTAwRjNuIE9ic2lkaWFuIHBhcmEgYWNjZWRlciBhIHN1cyBtXHUwMEU5dG9kb3MgeSBwcm9waWVkYWRlc1xuICAgICAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBpbmljaWFsIFwiTWVuXHUwMEZBIGhveVwiXG4gICAgYXN5bmMgbW9zdHJhck1lbnUoZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgICAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25NZW51SG95LnRleHRDb250ZW50ID0gJ01lblx1MDBGQSBob3knO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25NZW51SG95KTtcblxuICAgICAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uZXMoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBtb2RpZmljYWRvIHBhcmEgYWRhcHRhcnNlIGFsIGNvbnRleHRvIGRlbCBwbHVnaW5cbiAgICBhc3luYyBtb3N0cmFyQm90b25lcyhkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBwYXJhIHJlbW92ZXIgZWwgYm90XHUwMEYzbiBkZSBtZW5cdTAwRkFcblxuICAgICAgICBjb25zdCBib3RvbmVzID0gW1xuICAgICAgICAgICAgXCJIXHUwMEUxYml0b3NcIiwgXCJCYWxhbmNlXCIsIFwiUmVnaXN0cm8gZGUgVGFyZWFzXCIsIFwiTm90YXMgZFx1MDBFRGFcIiwgXCJQZXJzb25hbGVzXCJcbiAgICAgICAgXTtcblxuICAgICAgICAvLyBDcmVhciB5IG1vc3RyYXIgY2FkYSBib3RcdTAwRjNuXG4gICAgICAgIGJvdG9uZXMuZm9yRWFjaCh0ZXh0b0JvdG9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3Rvbi50ZXh0Q29udGVudCA9IHRleHRvQm90b247XG4gICAgICAgICAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0ZXh0b0JvdG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0JhbGFuY2UnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWwoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0hcdTAwRTFiaXRvcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJGb3JtdWxhcmlvSGFiaXRvcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVnaXN0cm8gZGUgVGFyZWFzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uUmVnaXN0cm9UYXJlYXMoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ05vdGFzIGRcdTAwRURhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uZXNOb3Rhc0RcdTAwRURhKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdQZXJzb25hbGVzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uZXNOb3Rhc1BlcnNvbmFsZXMoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZXh0b0JvdG9ufSBwcmVzaW9uYWRvLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWdyZWdhciBlbCBib3RcdTAwRjNuIGRlIHJlY2FyZ2EgeSBzdSBsXHUwMEYzZ2ljYSAoRWplbXBsbyBhZGFwdGFkbylcbiAgICBhZ3JlZ2FyQm90b25TYWxpcihkdikge1xuICAgICAgICBjb25zdCBib3RvblJlY2FyZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25SZWNhcmdhLnRleHRDb250ZW50ID0gJ1NhbGlyJztcbiAgICAgICAgYm90b25SZWNhcmdhLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJNZW51KGR2KTsgLy8gUmVzdGFibGVjZXIgYSBsYSB2aXN0YSBkZWwgYm90XHUwMEYzbiBkZSBtZW5cdTAwRkEgaW5pY2lhbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYm90b25SZWNhcmdhO1xuICAgIH1cblxuICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFjdHVhbGl6YXIgY2FtcG9zIFlBTUxcbiAgICAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyhmaWxlUGF0aCwgWUFNTGZpZWxkLCB2YWxvcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gUnV0YSBhbCBhcmNoaXZvIHF1ZSBzZSB2YSBhIG1vZGlmaWNhclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIC8vIExlZXIgeSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHVzYW5kbyBwcm9jZXNzRnJvbnRNYXR0ZXJcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCB2YWxvciBkZWwgY2FtcG8gZXNwZWNpZmljYWRvXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltZQU1MZmllbGRdID0gdmFsb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gT3BjaW9uYWw6IE5vdGlmaWNhciBhbCB1c3VhcmlvIHF1ZSBsYSBhY3R1YWxpemFjaVx1MDBGM24gZnVlIGV4aXRvc2FcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdZQU1MIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvLicpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBcmNoaXZvIG5vIGVuY29udHJhZG9cIiwgZXJyKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgZWwgWUFNTC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIGFkYXB0YWRvIHBhcmEgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsKGR2KSB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgXG4gICAgICAgIC8vIE1lbnNhamUgaW5pY2lhbFxuICAgICAgICBjb25zdCBtZW5zYWplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgICAgbWVuc2FqZS50ZXh0Q29udGVudCA9ICdFdmFsXHUwMEZBYSBlbCBiYWxhbmNlIGRlIHR1IHZpZGEgaG95JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKG1lbnNhamUpO1xuICAgIFxuICAgICAgICBjb25zdCBpbnN0cnVjY2lvbmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBpbnN0cnVjY2lvbmVzLnRleHRDb250ZW50ID0gJ0V2YWxcdTAwRkFhIGRlIDEgYSA1IGNhZGEgXHUwMEUxcmVhOic7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnN0cnVjY2lvbmVzKTtcbiAgICBcbiAgICAgICAgLy8gXHUwMEMxcmVhcyBhIGV2YWx1YXJcbiAgICAgICAgY29uc3QgYXJlYXMgPSBbXG4gICAgICAgICAgICBcIlByb2R1Y3RpdmlkYWRcIiwgXCJFc3Bpcml0dWFsXCIsIFwiU2FsdWRcIiwgXCJSdXRpbmFzXCIsXG4gICAgICAgICAgICBcIlZpZGEgU29jaWFsXCIsIFwiRmFtaWxpYXJcIiwgXCJBcHJlbmRpemFqZXNcIiwgXCJDcmVhdGl2aWRhZFwiXG4gICAgICAgIF07XG4gICAgXG4gICAgICAgIC8vIE9idGVuZXIgZWwgYXJjaGl2byBhY3R1YWwgeSBzdSBtZXRhZGF0YVxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBtZXRhZGF0YTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIENyZWFyIGlucHV0IHJhbmdlIHBhcmEgY2FkYSBcdTAwRTFyZWFcbiAgICAgICAgYXJlYXMuZm9yRWFjaChhcmVhID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNhZmVOYW1lID0gYXJlYS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IG1ldGFkYXRhICYmIG1ldGFkYXRhW3NhZmVOYW1lXSA/IG1ldGFkYXRhW3NhZmVOYW1lXSA6IDA7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBjb250ZW5lZG9yQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuY2xhc3NMaXN0LmFkZCgnYXJlYS1ldmFsdWFjaW9uJyk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGFyZWEgKyAnOiAnO1xuICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IHNhZmVOYW1lO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdyYW5nZSc7XG4gICAgICAgICAgICBpbnB1dC5pZCA9IHNhZmVOYW1lO1xuICAgICAgICAgICAgaW5wdXQubmFtZSA9IHNhZmVOYW1lO1xuICAgICAgICAgICAgaW5wdXQubWluID0gJzEnO1xuICAgICAgICAgICAgaW5wdXQubWF4ID0gJzUnO1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBjdXJyZW50VmFsLnRvU3RyaW5nKCk7IC8vIFVzYXIgdmFsb3IgYWN0dWFsIG8gMFxuICAgIFxuICAgICAgICAgICAgY29uc3QgdmFsb3JMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHZhbG9yTGFiZWwudGV4dENvbnRlbnQgPSBpbnB1dC52YWx1ZTsgLy8gTW9zdHJhciBlbCB2YWxvciBhY3R1YWwgYWwgbGFkb1xuICAgIFxuICAgICAgICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHZhbG9yTGFiZWwudGV4dENvbnRlbnQgPSBpbnB1dC52YWx1ZTsgLy8gQWN0dWFsaXphciBlbCB2YWxvciBtb3N0cmFkbyBhbCBtb3ZlciBlbCByYW5nZVxuICAgIFxuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQodmFsb3JMYWJlbCk7XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGVuZWRvckFyZWEpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGd1YXJkYXIgbG9zIHZhbG9yZXNcbiAgICAgICAgY29uc3QgYm90b25HdWFyZGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uR3VhcmRhci50ZXh0Q29udGVudCA9ICdHdWFyZGFyJztcbiAgICAgICAgYm90b25HdWFyZGFyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhcmVhIG9mIGFyZWFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVOYW1lID0gYXJlYS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2FmZU5hbWUpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbG9yID0gcGFyc2VJbnQoaW5wdXRFbGVtZW50LnZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhmaWxlLnBhdGgsIHNhZmVOYW1lLCB2YWxvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0JhbGFuY2VzIGFjdHVhbGl6YWRvcyBjb24gXHUwMEU5eGl0by4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgcHVkbyBvYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25HdWFyZGFyKTtcbiAgICBcbiAgICAgICAgLy8gQWdyZWdhciBib3RcdTAwRjNuIGRlIHNhbGlyIHNpIG5lY2VzYXJpb1xuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cblxuICAgIGFzeW5jIG1vc3RyYXJGb3JtdWxhcmlvSGFiaXRvcyhkdikge1xuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaGFiaXRvcyA9IFtcbiAgICAgICAgICAgIFwiQ2x1YiA1YW1cIixcbiAgICAgICAgICAgIFwiUmVnaXN0cm8gQWtcdTAwRTFzaGlrb1wiLFxuICAgICAgICAgICAgXCJHaW1uYXNpb1wiLFxuICAgICAgICAgICAgXCJDb21lciBTYWx1ZGFibGVcIixcbiAgICAgICAgICAgIFwiTGVlciBsaWJyb1wiLFxuICAgICAgICAgICAgXCJFc2NyaWJpciBiaXRcdTAwRTFjb3JhIGVsIG1pc21vIGRcdTAwRURhXCIsXG4gICAgICAgICAgICBcIkNyZWFyIHBsYW4gZFx1MDBFRGEgc2lndWllbnRlXCIsXG4gICAgICAgICAgICBcIk1lIGZ1XHUwMEVEIGEgZG9ybWlyIGFudGVzIGRlIGxhcyAxMDozMHBtXCJcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY2FyZ2FyIHkgbWFyY2FyIGNoZWNrYm94ZXMgc2VsZWNjaW9uYWRvcyBwcmV2aWFtZW50ZVxuICAgICAgICBjb25zdCBjYXJnYXJDaGVja2JveGVzU2VsZWNjaW9uYWRvcyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIC8vIExlZXIgZWwgYXJjaGl2byBwYXJhIG9idGVuZXIgZWwgY2FtcG8gJ2hhYml0b3MnIGRlbCBZQU1MXG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIYWJpdHMgPSBmcm9udE1hdHRlcj8uaGFiaXRvcyB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgIGhhYml0b3MuZm9yRWFjaChoYWJpdG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5pZCA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5uYW1lID0gJ2hhYml0b3MnO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnZhbHVlID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBleGlzdGluZ0hhYml0cy5pbmNsdWRlcyhoYWJpdG8pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gaGFiaXRvO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBcbiAgICAgICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICBhd2FpdCBjYXJnYXJDaGVja2JveGVzU2VsZWNjaW9uYWRvcygpO1xuICAgIFxuICAgICAgICAvLyBDcmVhciB5IGNvbmZpZ3VyYXIgZWwgYm90XHUwMEYzbiBkZSBndWFyZGFyXG4gICAgICAgIGNvbnN0IGd1YXJkYXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZ3VhcmRhckJ0bi50ZXh0Q29udGVudCA9ICdHdWFyZGFyJztcbiAgICAgICAgZ3VhcmRhckJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cImhhYml0b3NcIl06Y2hlY2tlZCcpKTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSGFiaXRzID0gY2hlY2tib3hlcy5tYXAoY2hlY2tib3ggPT4gY2hlY2tib3gudmFsdWUpO1xuICAgIFxuICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBjYW1wbyAnaGFiaXRvcycgZW4gZWwgYXJjaGl2byBZQU1MIHVzYW5kbyBlbCBtXHUwMEU5dG9kbyB1cGRhdGVZQU1MRmllbGRzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMoZmlsZS5wYXRoLCAnaGFiaXRvcycsIHNlbGVjdGVkSGFiaXRzKTtcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZWwgYm90XHUwMEYzbiBkZSBndWFyZGFyIGFsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGd1YXJkYXJCdG4pO1xuXG4gICAgICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBzYWxpciBzaSBuZWNlc2FyaW9cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuICAgIFxuICAgIC8vIE1cdTAwRTl0b2RvIGFkYXB0YWRvIHBhcmEgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uUmVnaXN0cm9UYXJlYXMoZHYpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGxldCBib3RvbmVzO1xuICAgICAgICBjb25zdCB1dGlsc0FQSW5zdGFuY2UgPSBuZXcgdXRpbHNBUEkodGhpcy5wbHVnaW4pO1xuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhd2FpdCB1dGlsc0FQSW5zdGFuY2UuYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHApXG4gICAgICAgIGlmIChhY3Rpdm8gaW5zdGFuY2VvZiBURmlsZSl7IC8vIFZlcmlmaWNhIHNpIGhheSBhbGd1biBhcmNoaXZvIGFjdGl2byBcbiAgICAgICAgICAgIGJvdG9uZXMgPSBbXCJDZXJyYWRhcyBIb3lcIiwgXCJSZWdpc3Ryb3MgSG95XCIsIFwiTnVldm8gUmVnaXN0cm8gVGllbXBvXCIsIFwiQ2VycmFyIFJlZ2lzdHJvIFRpZW1wb1wiXTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBib3RvbmVzID0gW1wiQ2VycmFkYXMgSG95XCIsIFwiUmVnaXN0cm9zIEhveVwiLCBcIk51ZXZvIFJlZ2lzdHJvIFRpZW1wb1wiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2VycmFkYXMgSG95JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckNlcnJhZGFzSG95KGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZWdpc3Ryb3MgSG95JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhclJlZ2lzdHJvc0hveShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2VycmFyIFJlZ2lzdHJvIFRpZW1wbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8oYWN0aXZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdOdWV2byBSZWdpc3RybyBUaWVtcG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRlckFQSW5zdGFuY2UgPSBuZXcgc3RhcnRlckFQSSh0aGlzLnBsdWdpbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0YXJ0ZXJBUEluc3RhbmNlLmNyZWF0ZU5vdGUoXCJSZWdpc3Ryb1RpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGV4dG9Cb3Rvbn0gcHJlc2lvbmFkby5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cbiAgICBhc3luYyBtb3N0cmFyQ2VycmFkYXNIb3koZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIFxuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IGZlY2hhQWN0aXZvID0gYWN0aXZvPy5iYXNlbmFtZS5zcGxpdChcIiBcIilbMF07XG4gICAgICAgIGNvbnN0IGhveSA9IG5ldyBEYXRlKGZlY2hhQWN0aXZvKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhcmVhc1Byb21lc2FzID0gZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBsZXQgdGFyZWFzRXh0cmFpZGFzID0gZXh0cmFlclRhcmVhcyhjb250ZW5pZG8pO1xuICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gZnJvbnRNYXR0ZXI/LmFsaWFzZXMgPyBmcm9udE1hdHRlci5hbGlhc2VzWzBdIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgYWxpYXMsXG4gICAgICAgICAgICAgICAgdGFyZWFzOiB0YXJlYXNFeHRyYWlkYXMuZmlsdGVyKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZlY2hhVGFyZWEgPSBuZXcgRGF0ZSh0YXJlYS5jb21wbGV0aW9uRGF0ZSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJlYS5jb21wbGV0ZWQgJiYgdGFyZWEuY29tcGxldGlvbkRhdGUgJiYgZmVjaGFUYXJlYSA9PT0gaG95O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxldCByZXN1bHRhZG9zID0gYXdhaXQgUHJvbWlzZS5hbGwodGFyZWFzUHJvbWVzYXMpO1xuICAgICAgICBsZXQgdG90YWxUYXJlYXNDZXJyYWRhcyA9IHJlc3VsdGFkb3MucmVkdWNlKCh0b3RhbCwgeyB0YXJlYXMgfSkgPT4gdG90YWwgKyB0YXJlYXMubGVuZ3RoLCAwKTtcblxuICAgICAgICAvLyBNZW5zYWplIHNvYnJlIGVsIGVzdGFkbyBkZSBsYXMgdGFyZWFzIGNlcnJhZGFzIGhveVxuICAgICAgICBpZiAodG90YWxUYXJlYXNDZXJyYWRhcyA+IDApIHtcbiAgICAgICAgICAgIGR2LmhlYWRlcigzLCBgSG95IHNlIGhhbiBjZXJyYWRvICR7dG90YWxUYXJlYXNDZXJyYWRhc30gdGFyZWFzLmApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgLy8gQ3JlYXIgbGEgdGFibGEgSFRNTFxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoJ3RhYmxlJyk7IC8vIEFncmVnYXIgdW5hIGNsYXNlIHBhcmEgbGEgdGFibGEgcGFyYSBlbCBlc3RpbG9cbiAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVuY2FiZXphZG9zIGRlIHRhYmxhXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIGxldCBoZWFkZXJzID0gW1wiTm90YVwiLCBcIlRhcmVhcyBDZXJyYWRhc1wiXTtcbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKGhlYWRlclRleHQgPT4ge1xuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBoZWFkZXJUZXh0O1xuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKGhlYWRlcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBmaWxhcyBkZSBkYXRvcyBhIGxhIHRhYmxhXG4gICAgICAgIHJlc3VsdGFkb3MuZm9yRWFjaCgoe2ZpbGVQYXRoLCBhbGlhcywgdGFyZWFzfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uYSBkZSBlbmxhY2UgY2VudHJhZG8gdmVydGljYWxtZW50ZVxuICAgICAgICAgICAgICAgIGxldCBsaW5rQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgbGlua0NlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuICAgICAgICAgICAgICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKCdocmVmJywgYG9ic2lkaWFuOi8vb3Blbj92YXVsdD0ke2FwcC52YXVsdC5nZXROYW1lKCl9JmZpbGU9JHtlbmNvZGVVUklDb21wb25lbnQoZmlsZVBhdGgpfWApO1xuICAgICAgICAgICAgICAgIGEudGV4dENvbnRlbnQgPSBhbGlhcyB8fCBmaWxlUGF0aDtcbiAgICAgICAgICAgICAgICBsaW5rQ2VsbC5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobGlua0NlbGwpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgZGUgdGFyZWFzIGNlcnJhZGFzXG4gICAgICAgICAgICAgICAgbGV0IHRhc2tzQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgbGV0IHRhc2tzTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAgICAgdGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICBsaS50ZXh0Q29udGVudCA9IHRhcmVhLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzTGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFza3NDZWxsLmFwcGVuZENoaWxkKHRhc2tzTGlzdCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHRhc2tzQ2VsbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGxhIHRhYmxhIGFsIGNvbnRlbmVkb3IgZGUgRGF0YXZpZXdcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkdi5wYXJhZ3JhcGgoXCJObyBoYXkgdGFyZWFzIGNlcnJhZGFzIGhveS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICBcbiAgICBmdW5jdGlvbiBleHRyYWVyVGFyZWFzKGNvbnRlbmlkbykge1xuICAgICAgICBjb25zdCB0YXJlYXMgPSBbXTtcbiAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KFwiXFxuXCIpO1xuICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGxpbmVhIG9mIGxpbmVhcykge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFSZWdleCA9IC9eXFxzKi1cXHMqXFxbKHh8WHwgKVxcXVxccyooLispJC87XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRhcmVhUmVnZXguZXhlYyhsaW5lYSk7XG4gICAgXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0YWRhID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0b1RhcmVhID0gbWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgbGV0IGZlY2hhQ29tcGxldGl0dWQgPSBudWxsO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhUmVnZXggPSAvXFxbY29tcGxldGlvbjo6IChcXGR7NH0tXFxkezJ9LVxcZHsyfSlcXF0vO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhTWF0Y2ggPSBmZWNoYVJlZ2V4LmV4ZWModGV4dG9UYXJlYSk7XG4gICAgICAgICAgICAgICAgaWYgKGZlY2hhTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVjaGFDb21wbGV0aXR1ZCA9IGZlY2hhTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIHRleHRvVGFyZWEgPSB0ZXh0b1RhcmVhLnJlcGxhY2UoZmVjaGFSZWdleCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGFyZWFzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0b1RhcmVhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGNvbXBsZXRhZGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25EYXRlOiBmZWNoYUNvbXBsZXRpdHVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiB0YXJlYXM7XG4gICAgfVxuICAgIFxuICAgIFxufVxuXG5cbiAgICBhc3luYyBtb3N0cmFyUmVnaXN0cm9zSG95KGR2KSB7XG4gICAgICAgICAgIC8vIE9idGVuZXIgZWwgbGVhZiBhY3Rpdm8gYWN0dWFsXG4gICAgICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cbiAgICAgICAgICAgLy8gT2J0ZW5lciBlbCBwYXRoIGRlbCBURmlsZSBhc29jaWFkbyBjb24gZWwgbGVhZiBhY3Rpdm8sIHNpIGV4aXN0ZVxuICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsZVBhdGggPSBhY3RpdmVMZWFmLnZpZXc/LmZpbGU/LnBhdGg7XG4gICBcbiAgICAgICAgICAgLy8gQ3JlYXIgdW5hIG51ZXZhIGRpdmlzaVx1MDBGM24gYSBsYSBkZXJlY2hhIGRlbCBsZWFmIGFjdGl2b1xuICAgICAgICAgICBjb25zdCBuZXdMZWFmID0gYXdhaXQgYXBwLndvcmtzcGFjZS5zcGxpdEFjdGl2ZUxlYWYoJ3ZlcnRpY2FsJyk7XG4gICBcbiAgICAgICAgICAgLy8gQ29uZmlndXJhciBlbCBudWV2byBsZWFmIHBhcmEgbW9zdHJhciB0dSB2aXN0YSBwZXJzb25hbGl6YWRhXG4gICAgICAgICAgIC8vIHkgcGFzYXIgZWwgcGF0aCBkZWwgVEZpbGUgY29tbyBwYXJ0ZSBkZWwgZXN0YWRvXG4gICAgXG4gICAgICAgICAgIGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgIHR5cGU6IFwidmlzdGEtcmVnaXN0cm8tZGlhcmlvXCIsXG4gICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICBhcHAud29ya3NwYWNlLnJldmVhbExlYWYobmV3TGVhZik7ICAgIFxufVxuXG4gICAgY3JlYXRlQnV0dG9uVGFibGUoYnV0dG9uVGV4dCwgb25DbGlja0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbm8gc2UgZW52aWFyXHUwMEUxIHVuIGZvcm11bGFyaW8gYWwgaGFjZXIgY2xpYyBlbiBcdTAwRTlsXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpOyAvLyBBZ3JlZ2EgdW5hIGNsYXNlIHBhcmEgZWwgZXN0aWxvIGRlbCBib3RcdTAwRjNuIHNpIGVzIG5lY2VzYXJpb1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgZWwgZXZlbnRvIGRlIGNsaWMgYWwgYm90XHUwMEYzblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIENyZWEgbGEgbm90YSBkZXNkZSBlbCB0ZW1wbGF0ZXIgZGUgUmVnaXN0cm9UaWVtcG9cbiAgICBhc3luYyByZXRvbWFyVGFyZWEoaWQpIHsgXG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHJlZW1wbGF6YXIgJ3J1dGEvYWwvYXJjaGl2by5tZCcgY29uIGxhIHJ1dGEgZXhhY3RhIGRlbCBhcmNoaXZvIHF1ZSBkZXNlYXMgb2J0ZW5lclxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfUmVnaXN0cm9UaWVtcG9gXX0vUGx0IC0gUmVnaXN0cm9UaWVtcG8ubWRgO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBcIlJldG9tYXIgXCIgKyBpZDtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgICAgICBjb25zdCB0cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgbGV0IGNyZWFyTm90YSA9IHRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpXG4gICAgICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbiAgICAgIH1cblxuICAgIGdldFRwKCl7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gICBcbiAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcInRlbXBsYXRlci1vYnNpZGlhblwiXS50ZW1wbGF0ZXI7XG4gICAgICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIG1vZHVsZXNcbiAgICAgICAgdHAuZmlsZSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgIGlmICghdHAuZmlsZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCd0cCBjb24gcHJvcGllZGFkZXMgXCJmaWxlXCIgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICAgICAgcmV0dXJuIHRwO1xuICAgIH1cblxufVxuICAgIFxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51U2VtYW5hbEFQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTA0LTE1IDE1OjM3OjA5XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0ODo1OFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7Tm90aWNlLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQge0RhdGVUaW1lLCBEdXJhdGlvbn0gZnJvbSAnbHV4b24nXG5pbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSAnLi9zdGFydGVyQVBJJztcbmltcG9ydCB7IHV0aWxzQVBJIH0gZnJvbSAnLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJJztcbmltcG9ydCB7IFZpc3RhUmVzdW1lblNlbWFuYWwgfSBmcm9tICcuLi92aWV3cy92aXN0YVJlc3VtZW5TZW1hbmFsJztcblxuZXhwb3J0IGNsYXNzIG1lbnVTZW1hbmFsQVBJIHtcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwOyAgLy8gR3VhcmRhIHVuYSByZWZlcmVuY2lhIGEgbGEgYXBsaWNhY2lcdTAwRjNuIE9ic2lkaWFuIHBhcmEgYWNjZWRlciBhIHN1cyBtXHUwMEU5dG9kb3MgeSBwcm9waWVkYWRlc1xuICAgICAgICAvLyB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBpbmljaWFsIFwiTWVuXHUwMEZBIGhveVwiXG4gICAgYXN5bmMgbW9zdHJhck1lbnUoZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgICAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25NZW51SG95LnRleHRDb250ZW50ID0gJ01lblx1MDBGQSBTZW1hbmFsJztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uTWVudUhveSk7XG5cbiAgICAgICAgYm90b25NZW51SG95Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbmVzKGR2KTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gbW9kaWZpY2FkbyBwYXJhIGFkYXB0YXJzZSBhbCBjb250ZXh0byBkZWwgcGx1Z2luXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uZXMoZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3IgcGFyYSByZW1vdmVyIGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBXG5cbiAgICAgICAgY29uc3QgYm90b25lcyA9IFtcbiAgICAgICAgICAgIFwiUmVzdW1lbiBkaWFyaW9cIiwgXCJBZ3JhZGVjaW1pZW50b3NcIiwgXCJDcmVhZGFzXCIsIFwiTW9kaWZpY2FkYXNcIiwgXCJ4IEZlY2hhXCIsIFwiVGFyZWFzIENlcnJhZGFzXCJcbiAgICAgICAgXTtcblxuICAgICAgICAvLyBDcmVhciB5IG1vc3RyYXIgY2FkYSBib3RcdTAwRjNuXG4gICAgICAgIGJvdG9uZXMuZm9yRWFjaCh0ZXh0b0JvdG9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3Rvbi50ZXh0Q29udGVudCA9IHRleHRvQm90b247XG4gICAgICAgICAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0ZXh0b0JvdG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1Jlc3VtZW4gZGlhcmlvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhclJlc3VtZW5EaWFyaW8oZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FncmFkZWNpbWllbnRvcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJBZ3JhZGVjaW1pZW50b3MoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NyZWFkYXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQ3JlYWRhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTW9kaWZpY2FkYXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyTW9kaWZpY2FkYXMoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3ggRmVjaGEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyeEZlY2hhKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdUYXJlYXMgQ2VycmFkYXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyVGFyZWFzQ2VycmFkYXMoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZXh0b0JvdG9ufSBwcmVzaW9uYWRvLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWdyZWdhciBlbCBib3RcdTAwRjNuIGRlIHJlY2FyZ2EgeSBzdSBsXHUwMEYzZ2ljYSAoRWplbXBsbyBhZGFwdGFkbylcbiAgICBhZ3JlZ2FyQm90b25TYWxpcihkdikge1xuICAgICAgICBjb25zdCBib3RvblJlY2FyZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25SZWNhcmdhLnRleHRDb250ZW50ID0gJ1NhbGlyJztcbiAgICAgICAgYm90b25SZWNhcmdhLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJNZW51KGR2KTsgLy8gUmVzdGFibGVjZXIgYSBsYSB2aXN0YSBkZWwgYm90XHUwMEYzbiBkZSBtZW5cdTAwRkEgaW5pY2lhbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYm90b25SZWNhcmdhO1xuICAgIH1cblxuICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFjdHVhbGl6YXIgY2FtcG9zIFlBTUxcbiAgICAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyhmaWxlUGF0aCwgWUFNTGZpZWxkLCB2YWxvcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gUnV0YSBhbCBhcmNoaXZvIHF1ZSBzZSB2YSBhIG1vZGlmaWNhclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIC8vIExlZXIgeSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHVzYW5kbyBwcm9jZXNzRnJvbnRNYXR0ZXJcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCB2YWxvciBkZWwgY2FtcG8gZXNwZWNpZmljYWRvXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltZQU1MZmllbGRdID0gdmFsb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gT3BjaW9uYWw6IE5vdGlmaWNhciBhbCB1c3VhcmlvIHF1ZSBsYSBhY3R1YWxpemFjaVx1MDBGM24gZnVlIGV4aXRvc2FcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdZQU1MIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvLicpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBcmNoaXZvIG5vIGVuY29udHJhZG9cIiwgZXJyKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgZWwgWUFNTC4nKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG1vc3RyYXJSZXN1bWVuRGlhcmlvKGR2KXtcbiAgICAgICAgZGVidWdnZXI7XG5cbiAgICAgICAgLy8gT2J0ZW5lciBlbCBsZWFmIGFjdGl2byBhY3R1YWxcbiAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IGFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblxuICAgICAgICAvLyBPYnRlbmVyIGVsIHBhdGggZGVsIFRGaWxlIGFzb2NpYWRvIGNvbiBlbCBsZWFmIGFjdGl2bywgc2kgZXhpc3RlXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlUGF0aCA9IGFjdGl2ZUxlYWYudmlldz8uZmlsZT8ucGF0aDtcblxuICAgICAgICAvLyBDcmVhciB1bmEgbnVldmEgZGl2aXNpXHUwMEYzbiBhIGxhIGRlcmVjaGEgZGVsIGxlYWYgYWN0aXZvXG4gICAgICAgIGNvbnN0IG5ld0xlYWYgPSBhd2FpdCBhcHAud29ya3NwYWNlLnNwbGl0QWN0aXZlTGVhZigndmVydGljYWwnKTtcblxuICAgICAgICAvLyBDb25maWd1cmFyIGVsIG51ZXZvIGxlYWYgcGFyYSBtb3N0cmFyIHR1IHZpc3RhIHBlcnNvbmFsaXphZGFcbiAgICAgICAgLy8geSBwYXNhciBlbCBwYXRoIGRlbCBURmlsZSBjb21vIHBhcnRlIGRlbCBlc3RhZG9cbiBcbiAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1yZXN1bWVuLXNlbWFuYWxcIixcbiAgICAgICAgfSk7XG4gXG4gICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihuZXdMZWFmKTtcbiAgICB9XG4gICAgXG5cblxuXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWwoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgLy8gTWVuc2FqZSBpbmljaWFsXG4gICAgICAgIGNvbnN0IG1lbnNhamUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBtZW5zYWplLnRleHRDb250ZW50ID0gJ0V2YWxcdTAwRkFhIGVsIGJhbGFuY2UgZGUgdHUgdmlkYSBob3knO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgXG4gICAgICAgIGNvbnN0IGluc3RydWNjaW9uZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGluc3RydWNjaW9uZXMudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZGUgMSBhIDUgY2FkYSBcdTAwRTFyZWE6JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGluc3RydWNjaW9uZXMpO1xuICAgIFxuICAgICAgICAvLyBcdTAwQzFyZWFzIGEgZXZhbHVhclxuICAgICAgICBjb25zdCBhcmVhcyA9IFtcbiAgICAgICAgICAgIFwiUHJvZHVjdGl2aWRhZFwiLCBcIkVzcGlyaXR1YWxcIiwgXCJTYWx1ZFwiLCBcIlJ1dGluYXNcIixcbiAgICAgICAgICAgIFwiVmlkYSBTb2NpYWxcIiwgXCJGYW1pbGlhclwiLCBcIkFwcmVuZGl6YWplc1wiLCBcIkNyZWF0aXZpZGFkXCJcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbCB5IHN1IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IG1ldGFkYXRhO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgaW5wdXQgcmFuZ2UgcGFyYSBjYWRhIFx1MDBFMXJlYVxuICAgICAgICBhcmVhcy5mb3JFYWNoKGFyZWEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsID0gbWV0YWRhdGEgJiYgbWV0YWRhdGFbc2FmZU5hbWVdID8gbWV0YWRhdGFbc2FmZU5hbWVdIDogMDtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmVkb3JBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5jbGFzc0xpc3QuYWRkKCdhcmVhLWV2YWx1YWNpb24nKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gYXJlYSArICc6ICc7XG4gICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gc2FmZU5hbWU7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpbnB1dC50eXBlID0gJ3JhbmdlJztcbiAgICAgICAgICAgIGlucHV0LmlkID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5uYW1lID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5taW4gPSAnMSc7XG4gICAgICAgICAgICBpbnB1dC5tYXggPSAnNSc7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGN1cnJlbnRWYWwudG9TdHJpbmcoKTsgLy8gVXNhciB2YWxvciBhY3R1YWwgbyAwXG4gICAgXG4gICAgICAgICAgICBjb25zdCB2YWxvckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBNb3N0cmFyIGVsIHZhbG9yIGFjdHVhbCBhbCBsYWRvXG4gICAgXG4gICAgICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4gdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIG1vc3RyYWRvIGFsIG1vdmVyIGVsIHJhbmdlXG4gICAgXG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZCh2YWxvckxhYmVsKTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW5lZG9yQXJlYSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBsb3MgdmFsb3Jlc1xuICAgICAgICBjb25zdCBib3Rvbkd1YXJkYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25HdWFyZGFyLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBib3Rvbkd1YXJkYXIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzYWZlTmFtZSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUludChpbnB1dEVsZW1lbnQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgc2FmZU5hbWUsIHZhbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQmFsYW5jZXMgYWN0dWFsaXphZG9zIGNvbiBcdTAwRTl4aXRvLicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBwdWRvIG9idGVuZXIgZWwgYXJjaGl2byBhY3R1YWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbkd1YXJkYXIpO1xuICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuXG4gICAgYXN5bmMgbW9zdHJhckZvcm11bGFyaW9IYWJpdG9zKGR2KSB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYWJpdG9zID0gW1xuICAgICAgICAgICAgXCJDbHViIDVhbVwiLFxuICAgICAgICAgICAgXCJSZWdpc3RybyBBa1x1MDBFMXNoaWtvXCIsXG4gICAgICAgICAgICBcIkdpbW5hc2lvXCIsXG4gICAgICAgICAgICBcIkNvbWVyIFNhbHVkYWJsZVwiLFxuICAgICAgICAgICAgXCJMZWVyIGxpYnJvXCIsXG4gICAgICAgICAgICBcIkVzY3JpYmlyIGJpdFx1MDBFMWNvcmEgZWwgbWlzbW8gZFx1MDBFRGFcIixcbiAgICAgICAgICAgIFwiQ3JlYXIgcGxhbiBkXHUwMEVEYSBzaWd1aWVudGVcIixcbiAgICAgICAgICAgIFwiTWUgZnVcdTAwRUQgYSBkb3JtaXIgYW50ZXMgZGUgbGFzIDEwOjMwcG1cIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYXJnYXIgeSBtYXJjYXIgY2hlY2tib3hlcyBzZWxlY2Npb25hZG9zIHByZXZpYW1lbnRlXG4gICAgICAgIGNvbnN0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgLy8gTGVlciBlbCBhcmNoaXZvIHBhcmEgb2J0ZW5lciBlbCBjYW1wbyAnaGFiaXRvcycgZGVsIFlBTUxcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hhYml0cyA9IGZyb250TWF0dGVyPy5oYWJpdG9zIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgaGFiaXRvcy5mb3JFYWNoKGhhYml0byA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmlkID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94Lm5hbWUgPSAnaGFiaXRvcyc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudmFsdWUgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGV4aXN0aW5nSGFiaXRzLmluY2x1ZGVzKGhhYml0byk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBoYWJpdG87XG4gICAgXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIFxuICAgICAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIGF3YWl0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zKCk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXJcbiAgICAgICAgY29uc3QgZ3VhcmRhckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBndWFyZGFyQnRuLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBndWFyZGFyQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwiaGFiaXRvc1wiXTpjaGVja2VkJykpO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRIYWJpdHMgPSBjaGVja2JveGVzLm1hcChjaGVja2JveCA9PiBjaGVja2JveC52YWx1ZSk7XG4gICAgXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvICdoYWJpdG9zJyBlbiBlbCBhcmNoaXZvIFlBTUwgdXNhbmRvIGVsIG1cdTAwRTl0b2RvIHVwZGF0ZVlBTUxGaWVsZHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhmaWxlLnBhdGgsICdoYWJpdG9zJywgc2VsZWN0ZWRIYWJpdHMpO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXIgYWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmRhckJ0bik7XG5cbiAgICAgICAgLy8gQWdyZWdhciBib3RcdTAwRjNuIGRlIHNhbGlyIHNpIG5lY2VzYXJpb1xuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25SZWdpc3Ryb1RhcmVhcyhkdikge1xuICAgICAgICBcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgbGV0IGJvdG9uZXM7XG4gICAgICAgIGNvbnN0IHV0aWxzQVBJbnN0YW5jZSA9IG5ldyB1dGlsc0FQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGF3YWl0IHV0aWxzQVBJbnN0YW5jZS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcClcbiAgICAgICAgaWYgKGFjdGl2byBpbnN0YW5jZW9mIFRGaWxlKXsgLy8gVmVyaWZpY2Egc2kgaGF5IGFsZ3VuIGFyY2hpdm8gYWN0aXZvIFxuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIiwgXCJDZXJyYXIgUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGJvdG9uZXMgPSBbXCJDZXJyYWRhcyBIb3lcIiwgXCJSZWdpc3Ryb3MgSG95XCIsIFwiTnVldm8gUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIGNhZGEgYm90XHUwMEYzblxuICAgICAgICBib3RvbmVzLmZvckVhY2godGV4dG9Cb3RvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYm90b24udGV4dENvbnRlbnQgPSB0ZXh0b0JvdG9uO1xuICAgICAgICAgICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dG9Cb3Rvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYWRhcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQ2VycmFkYXNIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2lzdHJvcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyUmVnaXN0cm9zSG95KGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYXIgUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhhY3Rpdm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ051ZXZvIFJlZ2lzdHJvIFRpZW1wbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydGVyQVBJbnN0YW5jZSA9IG5ldyBzdGFydGVyQVBJKHRoaXMucGx1Z2luKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRlckFQSW5zdGFuY2UuY3JlYXRlTm90ZShcIlJlZ2lzdHJvVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZXh0b0JvdG9ufSBwcmVzaW9uYWRvLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuICAgIGFzeW5jIG1vc3RyYXJDZXJyYWRhc0hveShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGFBY3Rpdm8gPSBhY3Rpdm8/LmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXTtcbiAgICAgICAgY29uc3QgaG95ID0gbmV3IERhdGUoZmVjaGFBY3Rpdm8pLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIFxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFyZWFzUHJvbWVzYXMgPSBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGxldCB0YXJlYXNFeHRyYWlkYXMgPSBleHRyYWVyVGFyZWFzKGNvbnRlbmlkbyk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBmcm9udE1hdHRlcj8uYWxpYXNlcyA/IGZyb250TWF0dGVyLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBhbGlhcyxcbiAgICAgICAgICAgICAgICB0YXJlYXM6IHRhcmVhc0V4dHJhaWRhcy5maWx0ZXIodGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmVjaGFUYXJlYSA9IG5ldyBEYXRlKHRhcmVhLmNvbXBsZXRpb25EYXRlKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmVhLmNvbXBsZXRlZCAmJiB0YXJlYS5jb21wbGV0aW9uRGF0ZSAmJiBmZWNoYVRhcmVhID09PSBob3k7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbGV0IHJlc3VsdGFkb3MgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXJlYXNQcm9tZXNhcyk7XG4gICAgICAgIGxldCB0b3RhbFRhcmVhc0NlcnJhZGFzID0gcmVzdWx0YWRvcy5yZWR1Y2UoKHRvdGFsLCB7IHRhcmVhcyB9KSA9PiB0b3RhbCArIHRhcmVhcy5sZW5ndGgsIDApO1xuXG4gICAgICAgIC8vIE1lbnNhamUgc29icmUgZWwgZXN0YWRvIGRlIGxhcyB0YXJlYXMgY2VycmFkYXMgaG95XG4gICAgICAgIGlmICh0b3RhbFRhcmVhc0NlcnJhZGFzID4gMCkge1xuICAgICAgICAgICAgZHYuaGVhZGVyKDMsIGBIb3kgc2UgaGFuIGNlcnJhZG8gJHt0b3RhbFRhcmVhc0NlcnJhZGFzfSB0YXJlYXMuYCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBDcmVhciBsYSB0YWJsYSBIVE1MXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTsgLy8gQWdyZWdhciB1bmEgY2xhc2UgcGFyYSBsYSB0YWJsYSBwYXJhIGVsIGVzdGlsb1xuICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZW5jYWJlemFkb3MgZGUgdGFibGFcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBbXCJOb3RhXCIsIFwiVGFyZWFzIENlcnJhZGFzXCJdO1xuICAgICAgICBoZWFkZXJzLmZvckVhY2goaGVhZGVyVGV4dCA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IGhlYWRlclRleHQ7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGZpbGFzIGRlIGRhdG9zIGEgbGEgdGFibGFcbiAgICAgICAgcmVzdWx0YWRvcy5mb3JFYWNoKCh7ZmlsZVBhdGgsIGFsaWFzLCB0YXJlYXN9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIGVubGFjZSBjZW50cmFkbyB2ZXJ0aWNhbG1lbnRlXG4gICAgICAgICAgICAgICAgbGV0IGxpbmtDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsaW5rQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgb2JzaWRpYW46Ly9vcGVuP3ZhdWx0PSR7YXBwLnZhdWx0LmdldE5hbWUoKX0mZmlsZT0ke2VuY29kZVVSSUNvbXBvbmVudChmaWxlUGF0aCl9YCk7XG4gICAgICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IGFsaWFzIHx8IGZpbGVQYXRoO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChsaW5rQ2VsbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uYSBkZSB0YXJlYXMgY2VycmFkYXNcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgICAgICB0YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gdGFyZWEudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgdGFza3NMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YXNrc0NlbGwuYXBwZW5kQ2hpbGQodGFza3NMaXN0KTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGFza3NDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGEgdGFibGEgYWwgY29udGVuZWRvciBkZSBEYXRhdmlld1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGR2LnBhcmFncmFwaChcIk5vIGhheSB0YXJlYXMgY2VycmFkYXMgaG95LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIFxuICAgIGZ1bmN0aW9uIGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKSB7XG4gICAgICAgIGNvbnN0IHRhcmVhcyA9IFtdO1xuICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoXCJcXG5cIik7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgbGluZWEgb2YgbGluZWFzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYVJlZ2V4ID0gL15cXHMqLVxccypcXFsoeHxYfCApXFxdXFxzKiguKykkLztcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGFyZWFSZWdleC5leGVjKGxpbmVhKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRhZGEgPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRvVGFyZWEgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICBsZXQgZmVjaGFDb21wbGV0aXR1ZCA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFSZWdleCA9IC9cXFtjb21wbGV0aW9uOjogKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KVxcXS87XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFNYXRjaCA9IGZlY2hhUmVnZXguZXhlYyh0ZXh0b1RhcmVhKTtcbiAgICAgICAgICAgICAgICBpZiAoZmVjaGFNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBmZWNoYUNvbXBsZXRpdHVkID0gZmVjaGFNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9UYXJlYSA9IHRleHRvVGFyZWEucmVwbGFjZShmZWNoYVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB0YXJlYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRvVGFyZWEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogY29tcGxldGFkYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbkRhdGU6IGZlY2hhQ29tcGxldGl0dWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRhcmVhcztcbiAgICB9XG4gICAgXG4gICAgXG59XG5cblxuICAgIGFzeW5jIG1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3IgZGUgRGF0YXZpZXdcbiAgICAgICAgXG4gICAgICAgIC8vIE9idFx1MDBFOW4gbGEgZmVjaGEgYWN0dWFsIGJhc2FkYSBlbiBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgZmVjaGFIb3kgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpLmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXSwgJ3l5eXktTU0tZGQnLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICBcbiAgICAgICAgLy8gRW5jdWVudHJhIGFyY2hpdm9zIHF1ZSBjb250aWVuZW4gcmVnaXN0cm9zIGRlIHRpZW1wb1xuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG9cbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpKTtcblxuICAgICAgICAvLyBMZWUgeSBwcm9jZXNhIGVsIGNvbnRlbmlkbyBkZSBjYWRhIGFyY2hpdm8gcGFyYSBleHRyYWVyIHJlZ2lzdHJvcyBkZSB0aWVtcG9cbiAgICAgICAgbGV0IHRvdGFsRGlhID0gMDtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0hveSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICBsZXQgaG9yYUluaWNpbyA9IERhdGVUaW1lLmZyb21Gb3JtYXQobWV0YWRhdGEuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0T2ZEYXkgPSBob3JhSW5pY2lvLnN0YXJ0T2YoJ2RheScpO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChzdGFydE9mRGF5LnRzID09PSBmZWNoYUhveS5zdGFydE9mKCdkYXknKS50cykge1xuICAgICAgICAgICAgICAgICAgICByZWdpc3Ryb3NIb3kucHVzaCh7cGF0aDogZmlsZS5wYXRoLCBmcm9udG1hdHRlciA6IG1ldGFkYXRhfSk7IC8vIENvcnJlZ2lkbyBwYXJhIGFncmVnYXIgZWwgb2JqZXRvIGFyY2hpdm8gZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIGNvbnZlcnRpciB0aWVtcG9UcmFiYWphZG8gYSBuXHUwMEZBbWVybyBhbnRlcyBkZSBzdW1hclxuICAgICAgICAgICAgICAgICAgICB0b3RhbERpYSArPSBtZXRhZGF0YS50aWVtcG9UcmFiYWphZG8gPyBwYXJzZUludChtZXRhZGF0YS50aWVtcG9UcmFiYWphZG8pIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTW9zdHJhciBlbCB0b3RhbCBkZSB0aWVtcG8gdHJhYmFqYWRvIGhveVxuICAgICAgICBkdi5oZWFkZXIoMywgXCJUaWVtcG8gcmVnaXN0cmFkbyBob3k6IFwiICsgRHVyYXRpb24uZnJvbU1pbGxpcyh0b3RhbERpYSkudG9Gb3JtYXQoJ2hoOm1tOnNzJykpO1xuXG5cbiAgICAgICAgICAgIC8vIE9yZGVuYSBsb3MgcmVnaXN0cm9zIHBvciBob3JhIGRlIGluaWNpbyBhbnRlcyBkZSBnZW5lcmFyIGxhIHRhYmxhXG4gICAgICAgIHJlZ2lzdHJvc0hveS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBob3JhSW5pY2lvIGVzdFx1MDBFMSBwcmVzZW50ZSB5IGVzIHVuYSBjYWRlbmEgdlx1MDBFMWxpZGEgcGFyYSBhbWJvcyBvYmpldG9zXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhLmZyb250bWF0dGVyLmhvcmFJbmljaW8gPT09ICdzdHJpbmcnICYmIHR5cGVvZiBiLmZyb250bWF0dGVyLmhvcmFJbmljaW8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWxsaXNBID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b01pbGxpcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlsbGlzQiA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYi5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9NaWxsaXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtaWxsaXNCIC0gbWlsbGlzQTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIHBhcnNpbmcgZGF0ZXM6XCIsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBNYW5lam8gZGUgY2Fzb3MgZG9uZGUgbG9zIGRhdG9zIG5vIHNlYW4gc3RyaW5ncyB2XHUwMEUxbGlkb3NcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGRhdGUgZm9ybWF0IGZvciBzb3J0aW5nOicsIGEuaG9yYUluaWNpbywgYi5ob3JhSW5pY2lvKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG5pZiAocmVnaXN0cm9zSG95Lmxlbmd0aD4wKXtcbi8vIENyZWEgbGEgdGFibGEgSFRNTFxuY29uc3QgdGFibGUgPSBkdi5jb250YWluZXIuY3JlYXRlRWwoJ3RhYmxlJywge2NsczogJ2RhdGF2aWV3IHRhYmxlJ30pO1xudGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG5cbi8vIENyZWEgeSBhXHUwMEYxYWRlIGxvcyBlbmNhYmV6YWRvcyBkZSBsYSB0YWJsYVxuY29uc3QgaGVhZGVyID0gZHYuZWwoJ3RyJywgJycsIHRhYmxlKTtcbltcIlJlZ2lzdHJvXCIsIFwiRGVzY3JpcGNpXHUwMEYzblwiLCBcIkhvcmEgSW5pY2lvXCIsIFwiVGllbXBvXCIsIFwiRXN0YWRvXCIsIFwiSWRcIiwgXCJBY2NpXHUwMEYzblwiXS5mb3JFYWNoKHRleHQgPT4gZHYuZWwoJ3RoJywgdGV4dCwgaGVhZGVyKSk7XG5cbi8vIENyZWEgeSBhXHUwMEYxYWRlIGNhZGEgZmlsYSBkZSByZWdpc3RybyBhIGxhIHRhYmxhXG5yZWdpc3Ryb3NIb3kuZm9yRWFjaChyZWdpc3RybyA9PiB7XG4gICAgY29uc3Qgcm93ID0gZHYuZWwoJ3RyJywnJyx0YWJsZSlcbiAgICBkdi5lbCgndGQnLCBkdi5mdW5jLmxpbmsocmVnaXN0cm8ucGF0aCxyZWdpc3Ryby5mcm9udG1hdHRlci5hbGlhc2VzWzBdKSwgcm93KTtcbiAgICAgLy8gQVx1MDBGMWFkZSBsYSBjZWxkYSBkZSBkZXNjcmlwY2lcdTAwRjNuIHkgdFx1MDBFRHR1bG9cbiAgICBkdi5lbCgndGQnLCByZWdpc3Ryby5mcm9udG1hdHRlci5kZXNjcmlwY2lvbiA/IHJlZ2lzdHJvLmZyb250bWF0dGVyLmRlc2NyaXBjaW9uIDogJ1NpbiBkZXNjcmlwY2lcdTAwRjNuJywgcm93KTtcbiAgICBkdi5lbCgndGQnLCBEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b0Zvcm1hdCgnaDptbSBhJykgK1xuICAgIFwiIC8gXCIgKyBEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFGaW5hbCwgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKSwgcm93KTtcbiAgICBpZiAocmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKXtcbiAgICAvLyBTZXBhcmFtb3MgbGEgZmVjaGEgeSBsYSBob3JhLCB5IGVsaW1pbmFtb3MgZWwgZFx1MDBFRGEgZGUgbGEgc2VtYW5hXG4gICAgbGV0IHBhcnRlcyA9IHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFJbmljaW8uc3BsaXQoJyAnKTtcbiAgICAvLyBSZW9yZ2FuaXphbW9zIGxhcyBwYXJ0ZXMgcGFyYSBmb3JtYXIgdW5hIGZlY2hhIGVuIGZvcm1hdG8gXCJZWVlZLU1NLUREVEhIOm1tXCJcbiAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7cGFydGVzWzBdfVQke3BhcnRlc1syXX1gO1xuICAgIC8vIFBhcnNlYW1vcyBsYSBmZWNoYSBlbiBmb3JtYXRvIElTT1xuICAgIGxldCBpbmljaW8gPSBEYXRlLnBhcnNlKGZlY2hhSG9yYUlTTyk7XG4gICAgbGV0IGFob3JhID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgZGlmZXJlbmNpYSA9IGFob3JhIC0gaW5pY2lvOyAvLyBEaWZlcmVuY2lhIGVuIG1pbGlzZWd1bmRvc1xuICAgIGR2LmVsKCd0ZCcsIER1cmF0aW9uLmZyb21NaWxsaXMoZGlmZXJlbmNpYSkudG9Gb3JtYXQoJ2g6bW0nKSwgcm93KVxuICAgIH1lbHNle1xuICAgIGR2LmVsKCd0ZCcsIER1cmF0aW9uLmZyb21NaWxsaXMocmVnaXN0cm8uZnJvbnRtYXR0ZXIudGllbXBvVHJhYmFqYWRvKS50b0Zvcm1hdCgnaDptbScpLCByb3cpO1xuICAgIH1cbiAgICBkdi5lbCgndGQnLCByZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8sIHJvdyk7XG4gICAgZHYuZWwoJ3RkJywgcmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQsIHJvdyk7XG4gICAgaWYgKHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIil7XG4gICAgICAgIGR2LmVsKCd0ZCcsIHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ0NlcnJhcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgLy8gTFx1MDBGM2dpY2EgcXVlIG1hbmVqYXJcdTAwRTEgZWwgY2xpYyBkZWwgYm90XHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHJldG9tYXIgbGEgdGFyZWEgcmVwcmVzZW50YWRhIHBvciBgcmVnaXN0cm9gXG4gICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8ocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICAvL3RoaXMuY2VycmFyVGFyZWEocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICB9KSwgcm93KTtcbiAgICB9ZWxzZXtcbiAgICBkdi5lbCgndGQnLCB0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKCdSZXRvbWFyJywgKCkgPT4ge1xuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBxdWUgbWFuZWphclx1MDBFMSBlbCBjbGljIGRlbCBib3RcdTAwRjNuLlxuICAgICAgICAvLyBQb3IgZWplbXBsbywgcmV0b21hciBsYSB0YXJlYSByZXByZXNlbnRhZGEgcG9yIGByZWdpc3Ryb2BcbiAgICAgICAgdGhpcy5yZXRvbWFyVGFyZWEocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICB9KSwgcm93KTtcbiAgICB9XG4gICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgXG59XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBubyBzZSBlbnZpYXJcdTAwRTEgdW4gZm9ybXVsYXJpbyBhbCBoYWNlciBjbGljIGVuIFx1MDBFOWxcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lvdXItYnV0dG9uLWNsYXNzJyk7IC8vIEFncmVnYSB1bmEgY2xhc2UgcGFyYSBlbCBlc3RpbG8gZGVsIGJvdFx1MDBGM24gc2kgZXMgbmVjZXNhcmlvXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkZSBlbCBldmVudG8gZGUgY2xpYyBhbCBib3RcdTAwRjNuXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tDYWxsYmFjayk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gICAgLy8gQ3JlYSBsYSBub3RhIGRlc2RlIGVsIHRlbXBsYXRlciBkZSBSZWdpc3Ryb1RpZW1wb1xuICAgIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcmVlbXBsYXphciAncnV0YS9hbC9hcmNoaXZvLm1kJyBjb24gbGEgcnV0YSBleGFjdGEgZGVsIGFyY2hpdm8gcXVlIGRlc2VhcyBvYnRlbmVyXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICAgICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICAgICAgfVxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbiB8fCAhdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICB0cC5maWxlID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcImZpbGVcIik7XG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ3RwIGNvbiBwcm9waWVkYWRlcyBcImZpbGVcIiBzZSBoYSBjYXJnYWRvIHNhdGlzZmFjdG9yaWFtZW50ZScpO1xuICAgICAgICByZXR1cm4gdHA7XG4gICAgfVxuXG59XG4gICAgXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIFZpc3RhUmVzdW1lblNlbWFuYWwgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgaW50ZXJ2YWxJZDogbnVtYmVyO1xuIFxuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcHVibGljIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ2aXN0YS1yZXN1bWVuLXNlbWFuYWxcIjtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVzdW1lbiBTZW1hbmFsXCI7XG4gICAgfVxuXG4gICAgZ2V0SWNvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiaGlzdG9yeVwiOyAvLyBFc3RlIGVzIHVuIGVqZW1wbG8sIGNhbWJpYSBcImRvY3VtZW50b1wiIHBvciBlbCBub21icmUgZGVsIFx1MDBFRGNvbm8gcXVlIGRlc2VlcyB1c2FyXG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5zZXRUZXh0KFwiTm8gaGF5IHVuIGFyY2hpdm8gYWN0aXZvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpO1xuICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YShmaWxlQ2FjaGUpOyAvLyBQdWVkZXMgdXNhciB0aGlzLmZpbGUgZGVudHJvIGRlIGFjdHVhbGl6YXJWaXN0YVxuICAgIFxuICAgICAgICAvL2F3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKCk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBpbm1lZGlhdGFtZW50ZSBhbCBhYnJpclxuXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YShmaWxlQ2FjaGUpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgY2FkYSAxMCBzZWd1bmRvc1xuICAgICAgICB9LCAxMDAwMCk7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTsgLy8gTGltcGlhIGVsIGludGVydmFsbyBhbCBjZXJyYXIgbGEgdmlzdGFcbiAgICB9XG5cbiAgICBhc3luYyBhY3R1YWxpemFyVmlzdGEoZmlsZUNhY2hlKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7IC8vIExpbXBpYSBlbCBjb250ZW5pZG8gZXhpc3RlbnRlIGFudGVzIGRlIGFjdHVhbGl6YXJcbiAgICBcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGluaWNpb1dTdHIgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI/LmluaWNpb1c7IFxuICAgICAgICBpZiAoIWluaWNpb1dTdHIpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNldFRleHQoXCJMYSBjb25maWd1cmFjaVx1MDBGM24gZGUgaW5pY2lvVyBubyBlc3RcdTAwRTEgZXN0YWJsZWNpZGEuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvbGRlckRpYXJpbyA9IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9Ob3Rhc1wiO1xuICAgICAgICBjb25zdCBpbmljaW9XID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChpbmljaW9XU3RyLCBcInl5eXktTU0tZGQgRUVFRVwiLCB7IGxvY2FsZTogXCJlc1wiIH0pO1xuICAgICAgICBjb25zdCBmaW5XID0gaW5pY2lvVy5wbHVzKHsgZGF5czogNiB9KTsgLy8gQWp1c3RlIHBhcmEgYXNlZ3VyYXIgcXVlIGVsIGZpbiBlcyBlbCBkb21pbmdvIGRlIGxhIG1pc21hIHNlbWFuYVxuICAgIFxuICAgICAgICBjb25zdCBhcmNoaXZvc0RpYXJpbyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXJEaWFyaW8pICYmIGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKTtcbiAgICBcbiAgICAgICAgY29uc3QgYml0YWNvcmFzID0gYXJjaGl2b3NEaWFyaW9cbiAgICAgICAgICAgIC5tYXAoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFBcmNoaXZvID0gRGF0ZVRpbWUuZnJvbUlTTyhmaWxlLmJhc2VuYW1lLnN1YnN0cmluZygwLCAxMCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdG9zID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFyY2hpdm86IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgZmVjaGFBcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICBkYXRvc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlcigoeyBmZWNoYUFyY2hpdm8gfSkgPT4gZmVjaGFBcmNoaXZvID49IGluaWNpb1cgJiYgZmVjaGFBcmNoaXZvIDw9IGZpblcpXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5mZWNoYUFyY2hpdm8udG9NaWxsaXMoKSAtIGIuZmVjaGFBcmNoaXZvLnRvTWlsbGlzKCkpO1xuICAgIFxuICAgICAgICAvLyBDcmVhciB0XHUwMEVEdHVsbyBjb24gbGFzIGZlY2hhcyBkZSBsYSBzZW1hbmFcbiAgICAgICAgbGV0IHRyaW0gPSBmaW5XLnF1YXJ0ZXI7XG4gICAgICAgIGxldCBzZW0gPSAoZmluVy53ZWVrTnVtYmVyIC0gKGZpblcucXVhcnRlciAtIDEpKjEzKVxuICAgICAgICBpZiAoc2VtPT0wKXtzZW0gPSAxM31cblxuICAgICAgICBjb25zdCB0aXR1bG8gPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBSZXN1bWVuIGRlIGxhIHNlbWFuYSAke3NlbX0gLSBRJHt0cmltfSAvIFcke2ZpblcudG9Gb3JtYXQoJ1dXJyl9LmB9KTtcbiAgICAgICAgY29uc3Qgc3VidGl0dWxvID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgRGVzZGUgZWwgJHtpbmljaW9XLnRvRm9ybWF0KCdFRUVFLCBERCcpfSBhbCAke2ZpblcudG9Gb3JtYXQoJ0VFRUUsIEREJyl9YCB9KTtcbiAgICAgICAgdGl0dWxvLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBzdWJ0aXR1bG8uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIC8vIENyZWFyIHRhYmxhXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgdGFibGUuY2xhc3NOYW1lID0gJ3RhYmxlLXJlc3VtZW5TZW1hbmFsJztcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgY2FiZWNlcmEgZGUgbGEgdGFibGFcbiAgICAgICAgY29uc3QgdGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aGVhZCcpO1xuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBbJ0RcdTAwRURhJywgJ1Jlc3VtZW4nXS5mb3JFYWNoKGhlYWRlclRleHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xuICAgICAgICAgICAgdGgudGV4dENvbnRlbnQgPSBoZWFkZXJUZXh0O1xuICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKHRoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoZWFkKTtcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgY3VlcnBvIGRlIGxhIHRhYmxhXG4gICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgYml0YWNvcmFzLmZvckVhY2goKHsgYXJjaGl2bywgcGF0aCwgZGF0b3MgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGRBcmNoaXZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGxpbmtFbC50ZXh0Q29udGVudCA9IGFyY2hpdm87XG4gICAgICAgICAgICBsaW5rRWwuaHJlZiA9IHBhdGg7XG4gICAgICAgICAgICBsaW5rRWwub25jbGljayA9IGFzeW5jIChldikgPT4ge1xuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShmaWxlLCB7IGVTdGF0ZTogeyBmb2N1czogdHJ1ZSB9IH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0ZEFyY2hpdm8uYXBwZW5kQ2hpbGQobGlua0VsKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRkUmVzdW1lbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICBjb25zdCB1bCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAoZGF0b3MudGl0dWxvIHx8IFsnU2luIHRcdTAwRUR0dWxvJ10pLmZvckVhY2godGl0dWxvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSB0aXR1bG87XG4gICAgICAgICAgICAgICAgdWwuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZFJlc3VtZW4uYXBwZW5kQ2hpbGQodWwpO1xuICAgIFxuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRBcmNoaXZvKTtcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkUmVzdW1lbik7XG4gICAgXG4gICAgICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgIH0pO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgXG4gICAgICAgIC8vIEFncmVnYXIgbGEgdGFibGEgYWwgY29udGVuZWRvclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgfVxuICAgIFxuICAgIFxuXG5cbiAgICAvLyBPcGNpb25hbDogSW1wbGVtZW50YSBvbkNsb3NlIHNpIG5lY2VzaXRhcyBsaW1waWV6YSBhbCBjZXJyYXIgbGEgdmlzdGEuXG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3ZpZXdzL3Zpc3RhUlRBY3Rpdm8udHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby92aWV3c1xuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDIxOjAxOjI1XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAyMzo1ODozNFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG4vLyBpbXBvcnQgYnJlYWtBdWRpbyBmcm9tIFwiLi4vLi4vLi4vLi4vUmVjdXJzb3MvQnJlYWsubXAzXCI7XG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGF0ZVRpbWUsIER1cmF0aW9uIH0gZnJvbSBcImx1eG9uXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHRlbmVyIEx1eG9uIGRpc3BvbmlibGUgcGFyYSBtYW5pcHVsYXIgZmVjaGFzIHkgaG9yYXNcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSBcIi4uL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSVwiO1xuaW1wb3J0IHsgc3RhcnRlckFQSSB9IGZyb20gXCIuLi8uLi9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSVwiO1xuXG5leHBvcnQgY2xhc3MgVmlzdGFSZWdpc3Ryb0FjdGl2byBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBwbHVnaW4gOiBQbHVnaW47XG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCI7XG4gICAgfVxuXG4gICAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiBcIlJlZ2lzdHJvIEFjdGl2b1wiO1xuICAgIH1cblxuICAgIGdldEljb24oKSB7XG4gICAgICAgIHJldHVybiBcImNoZWNrbWFya1wiOyAvLyBDYW1iaWEgYSB1biBcdTAwRURjb25vIGFkZWN1YWRvIHBhcmEgcmVnaXN0cm9zIGFjdGl2b3NcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKCk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBpbm1lZGlhdGFtZW50ZSBhbCBhYnJpclxuICAgIFxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgY2FkYSA1IHNlZ3VuZG9zXG4gICAgICAgIH0sIDUwMDApO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7IC8vIExpbXBpYSBlbCBpbnRlcnZhbG8gYWwgY2VycmFyIGxhIHZpc3RhXG4gICAgfVxuXG5cbiAgICBhc3luYyBhY3R1YWxpemFyVmlzdGEoKSB7XG4gICAgICAgIC8vIDEuIEd1YXJkYXIgbGEgcG9zaWNpXHUwMEYzbiBkZSBzY3JvbGwgYWN0dWFsIGRlbCBjb250ZW5lZG9yIGRlIGxhIHRhYmxhLCBzaSBleGlzdGUuXG4gICAgICAgIGxldCBzY3JvbGxUb3AgPSAwO1xuICAgICAgICBsZXQgc2Nyb2xsTGVmdCA9IDA7XG4gICAgICAgIGNvbnN0IG9sZFRhYmxlV3JhcHBlciA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcihcIi50YWJsZS13cmFwcGVyXCIpO1xuICAgICAgICBpZiAob2xkVGFibGVXcmFwcGVyKSB7XG4gICAgICAgICAgICBzY3JvbGxUb3AgPSBvbGRUYWJsZVdyYXBwZXIuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgc2Nyb2xsTGVmdCA9IG9sZFRhYmxlV3JhcHBlci5zY3JvbGxMZWZ0O1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIDIuIFZhY2lhciBlbCBjb250ZW5lZG9yIHByaW5jaXBhbCB5IGNvbmZpZ3VyYXIgbGEgY2xhc2UgYmFzZS5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoXCJyZWdpc3Ryby10aWVtcG8tY29udGFpbmVyXCIpO1xuICAgIFxuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSk7XG4gICAgICAgIGxldCByZWdpc3Ryb3NBY3Rpdm9zID0gW107XG4gICAgXG4gICAgICAgIC8vIEJ1c2NhciByZWdpc3Ryb3MgYWN0aXZvcyAoZXN0YWRvIFx1RDgzRFx1REZFMilcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlZ2lzdHJvQWN0aXZvID0geyBmaWxlIH07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWdpc3Ryb0FjdGl2bywgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0FjdGl2b3MucHVzaChyZWdpc3Ryb0FjdGl2byk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgaWYgKHJlZ2lzdHJvc0FjdGl2b3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgZWwgbWVuc2FqZSB5IGVsIGJvdFx1MDBGM24gc2kgbm8gaGF5IHJlZ2lzdHJvcyBhY3Rpdm9zLlxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbWVzc2FnZS1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGhheSBuaW5nXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZWplY3V0XHUwMEUxbmRvc2UuJyB9KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uQ3JlYXIgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ3JlZ2lzdHJvLXRpZW1wby1idG4nIH0pO1xuICAgICAgICAgICAgYm90b25DcmVhci50ZXh0Q29udGVudCA9ICcrIFJlZ2lzdHJvIFRpZW1wbyc7XG4gICAgICAgICAgICBib3RvbkNyZWFyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRlckFQSW5zdGFuY2UgPSBuZXcgc3RhcnRlckFQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRlckFQSW5zdGFuY2UuY3JlYXRlTm90ZShcIlJlZ2lzdHJvVGllbXBvXCIpO1xuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQobWVzc2FnZUNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlcGFyYWRvcicgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVnaXN0cm9zQWN0aXZvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3Ryb0VuRWplY3VjaW9uID0gcmVnaXN0cm9zQWN0aXZvc1swXTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwiYWN0aXZlLXRpbWUtY29udGFpbmVyXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBUXHUwMEVEdHVsb1xuICAgICAgICAgICAgYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlJlZ2lzdHJvIGRlIFRpZW1wbyBlbiBFamVjdWNpXHUwMEYzblwiLCBjbHM6IFwicmVnaXN0cm8tdGllbXBvLXRpdHVsb1wiIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gQWxpYXNcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJyZWdpc3Ryby1hbGlhc1wiIH0pO1xuXG4gICAgICAgICAgICAvLyBQcmltZXJvIGludGVudGEgYWxpYXNlc1sxXSwgc2kgbm8gZXhpc3RlLCB1c2EgYWxpYXNlc1swXSwgeSBzaSB0YW1wb2NvIGV4aXN0ZSwgXCJTaW4gYWxpYXNcIlxuICAgICAgICAgICAgY29uc3QgYWxpYXNUZXh0ID0gcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzICYmIHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlc1sxXVxuICAgICAgICAgICAgPyByZWdpc3Ryb0VuRWplY3VjaW9uLmFsaWFzZXNbMV1cbiAgICAgICAgICAgIDogcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzICYmIHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlc1swXVxuICAgICAgICAgICAgICAgID8gcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgOiBcIlNpbiBhbGlhc1wiO1xuXG4gICAgICAgICAgICBhbGlhc0NvbnRhaW5lci5pbm5lckhUTUwgPSBgPHN0cm9uZz5BbGlhczo8L3N0cm9uZz4gJHthbGlhc1RleHR9YDtcbiAgICAgICAgICAgIC8vIERlc2NyaXBjaVx1MDBGM24gKFZpc2libGUgZW4gbGEgVmlzdGEpXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwY2lvbkNvbnRhaW5lciA9IGFjdGl2ZUNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyBjbHM6IFwicmVnaXN0cm8tZGVzY3JpcGNpb25cIiB9KTtcbiAgICAgICAgICAgIGRlc2NyaXBjaW9uQ29udGFpbmVyLmlubmVySFRNTCA9IGA8c3Ryb25nPkRlc2NyaXBjaVx1MDBGM246PC9zdHJvbmc+ICR7cmVnaXN0cm9FbkVqZWN1Y2lvbi5kZXNjcmlwY2lvbiB8fCBcIlNpbiBkZXNjcmlwY2lcdTAwRjNuXCJ9YDtcbiAgICBcbiAgICAgICAgICAgIC8vIFRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgY29uc3QgdGllbXBvQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJ0aWVtcG8tZWplY3VjaW9uXCIsIHRleHQ6IFwiVGllbXBvIHRyYW5zY3VycmlkbzogQ2FsY3VsYW5kby4uLlwiIH0pO1xuICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyVGllbXBvRW5FamVjdWNpb24odGllbXBvQ29udGFpbmVyLCByZWdpc3Ryb0VuRWplY3VjaW9uLmhvcmFJbmljaW8pO1xuICAgIFxuICAgICAgICAgICAgLy8gQ29udGVuZWRvciBkZSBib3RvbmVzIGFsaW5lYWRvc1xuICAgICAgICAgICAgY29uc3QgYm90b25lc0NvbnRhaW5lciA9IGFjdGl2ZUNvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJyZWdpc3Ryby1ib3RvbmVzLWNvbnRhaW5lclwiIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGNhbWJpYXIgbGEgZGVzY3JpcGNpXHUwMEYzblxuICAgICAgICAgICAgY29uc3QgY2hhbmdlRGVzY0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBjaGFuZ2VEZXNjQnV0dG9uLmlubmVySFRNTCA9IFwiXHUyNzBGXHVGRTBGIDxzcGFuIGNsYXNzPSdidXR0b24tdGV4dCc+ICBEZXNjcmlwY2lcdTAwRjNuPC9zcGFuPlwiO1xuICAgICAgICAgICAgY2hhbmdlRGVzY0J1dHRvbi5jbGFzc0xpc3QuYWRkKFwiY2hhbmdlLWRlc2MtYnRuXCIpO1xuICAgICAgICAgICAgY2hhbmdlRGVzY0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZhRGVzY3JpcGNpb24gPSBhd2FpdCB0aGlzLm1vc3RyYXJQcm9tcHQoXCJOdWV2YSBEZXNjcmlwY2lcdTAwRjNuOlwiLCByZWdpc3Ryb0VuRWplY3VjaW9uLmRlc2NyaXBjaW9uIHx8IFwiXCIpO1xuICAgICAgICAgICAgICAgIGlmIChudWV2YURlc2NyaXBjaW9uICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSByZWdpc3Ryb0VuRWplY3VjaW9uLmZpbGU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmcm9udG1hdHRlciA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlciB8fCB7fTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIuZGVzY3JpcGNpb24gPSBudWV2YURlc2NyaXBjaW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gdGhpcy5yZWVzY3JpYmlyRnJvbnRtYXR0ZXIoZmlsZUNvbnRlbnQsIGZyb250bWF0dGVyKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIG5ld0NvbnRlbnQpO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIHZpc3RhIHBhcmEgcmVmbGVqYXIgZWwgY2FtYmlvXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0dWFsaXphclZpc3RhKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZGV0ZW5lciBlbCByZWdpc3Ryb1xuICAgICAgICAgICAgY29uc3Qgc3RvcEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBzdG9wQnV0dG9uLmlubmVySFRNTCA9IFwiXHUyNzBCXHVEODNDXHVERkZDIDxzcGFuIGNsYXNzPSdidXR0b24tdGV4dCc+IERldGVuZXIgUmVnaXN0cm88L3NwYW4+XCI7XG4gICAgICAgICAgICBzdG9wQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJzdG9wLXRpbWUtYnRuXCIpO1xuICAgICAgICAgICAgc3RvcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQm90XHUwMEYzbiAnQ2VycmFyIFRhcmVhJyBwcmVzaW9uYWRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZWdpc3Ryb0VuRWplY3VjaW9uLmZpbGUgfHwgIShyZWdpc3Ryb0VuRWplY3VjaW9uLmZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBlbmNvbnRyXHUwMEYzIGVsIGFyY2hpdm8gZGVsIHJlZ2lzdHJvIGVuIGVqZWN1Y2lcdTAwRjNuLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm8gY2VycmFkbyBjb3JyZWN0YW1lbnRlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2VycmFyIGxhIHRhcmVhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBBZ3JlZ2FyIGJvdG9uZXMgYWwgY29udGVuZWRvclxuICAgICAgICAgICAgYm90b25lc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjaGFuZ2VEZXNjQnV0dG9uKTtcbiAgICAgICAgICAgIGJvdG9uZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RvcEJ1dHRvbik7XG4gICAgXG4gICAgICAgICAgICBhY3RpdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25lc0NvbnRhaW5lcik7XG4gICAgICAgICAgICBhY3RpdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoYWxpYXNDb250YWluZXIpO1xuICAgICAgICAgICAgYWN0aXZlQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlc2NyaXBjaW9uQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aWVtcG9Db250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChhY3RpdmVDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIE1vc3RyYXIgcmVnaXN0cm9zIGZpbmFsaXphZG9zXG4gICAgICAgIGxldCByZWdpc3Ryb3NGaW5hbGl6YWRvcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERDM1XCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cm9GaW5hbGl6YWRvID0geyBmaWxlIH07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWdpc3Ryb0ZpbmFsaXphZG8sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb3NGaW5hbGl6YWRvcy5wdXNoKHJlZ2lzdHJvRmluYWxpemFkbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmVnaXN0cm9zRmluYWxpemFkb3Muc29ydCgoYSwgYikgPT4gYi5pZCAtIGEuaWQpO1xuICAgICAgICBsZXQgdG9wNVJlZ2lzdHJvc0FjdGl2b3MgPSByZWdpc3Ryb3NGaW5hbGl6YWRvcy5zbGljZSgwLCAxNSk7XG4gICAgXG4gICAgICAgIGlmICh0b3A1UmVnaXN0cm9zQWN0aXZvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZVdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInRhYmxlLXdyYXBwZXJcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gdGFibGVXcmFwcGVyLmNyZWF0ZUVsKFwidGFibGVcIiwgeyBjbHM6IFwic3R5bGVkLXRhYmxlXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXIgPSB0YWJsZS5jcmVhdGVFbChcInRyXCIpO1xuICAgICAgICAgICAgW1wiQWxpYXNcIiwgXCJEZXNjcmlwY2lcdTAwRjNuXCIsIFwiUmV0b21hclwiXS5mb3JFYWNoKHRleHQgPT4gaGVhZGVyLmNyZWF0ZUVsKFwidGhcIiwgeyB0ZXh0OiB0ZXh0IH0pKTtcbiAgICBcbiAgICAgICAgICAgIHRvcDVSZWdpc3Ryb3NBY3Rpdm9zLmZvckVhY2gocmVnaXN0cm8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRhYmxlLmNyZWF0ZUVsKFwidHJcIik7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQWxpYXMgY29uIGVubGFjZVxuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzQ2VsbCA9IHJvdy5jcmVhdGVFbChcInRkXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzVGV4dCA9IHJlZ2lzdHJvLmFsaWFzZXMgJiYgcmVnaXN0cm8uYWxpYXNlc1sxXVxuICAgICAgICAgICAgICAgICAgICA/IHJlZ2lzdHJvLmFsaWFzZXNbMV1cbiAgICAgICAgICAgICAgICAgICAgOiByZWdpc3Ryby5hbGlhc2VzICYmIHJlZ2lzdHJvLmFsaWFzZXNbMF1cbiAgICAgICAgICAgICAgICAgICAgICAgID8gcmVnaXN0cm8uYWxpYXNlc1swXVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlNpbiBhbGlhc1wiO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzTGluayA9IGFsaWFzQ2VsbC5jcmVhdGVFbChcImFcIiwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBhbGlhc1RleHQsXG4gICAgICAgICAgICAgICAgICAgIGNsczogXCJjbGlja2FibGUtYWxpYXNcIixcbiAgICAgICAgICAgICAgICAgICAgaHJlZjogXCIjXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhbGlhc0xpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJlZ2lzdHJvLmZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogcmVnaXN0cm8uZGVzY3JpcGNpb24gfHwgXCJObyBEZWZpbmlkYVwiIH0pO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIEJvdFx1MDBGM24gXCJSZXRvbWFyXCJcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b25DZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b25UYWJsZShcIlx1MjNGMVx1RkUwRlwiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkucmV0b21hclRhcmVhKHJlZ2lzdHJvLmlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZChcInJldG9tYXItYnRuXCIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiUmV0b21hclwiKTtcbiAgICAgICAgICAgICAgICBidXR0b25DZWxsLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQodGFibGVXcmFwcGVyKTtcbiAgICBcbiAgICAgICAgICAgIC8vIDMuIFJlc3RhdXJhciBsYSBwb3NpY2lcdTAwRjNuIGRlIHNjcm9sbCBlbiBlbCBudWV2byBjb250ZW5lZG9yIGRlIHRhYmxhLlxuICAgICAgICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgICAgIHRhYmxlV3JhcHBlci5zY3JvbGxMZWZ0ID0gc2Nyb2xsTGVmdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBoYXkgcmVnaXN0cm9zIGZpbmFsaXphZG9zLlwiIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEZ1bmNpXHUwMEYzbiBwYXJhIGFjdHVhbGl6YXIgZGluXHUwMEUxbWljYW1lbnRlIGVsIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAqL1xuLyoqXG4gKiBGdW5jaVx1MDBGM24gcGFyYSBhY3R1YWxpemFyIGRpblx1MDBFMW1pY2FtZW50ZSBlbCB0aWVtcG8gZW4gZWplY3VjaVx1MDBGM25cbiAqL1xuYWxlcnRhRWplY3V0YWRhMjU6IGJvb2xlYW4gPSBmYWxzZTtcblxuYWN0dWFsaXphclRpZW1wb0VuRWplY3VjaW9uKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBob3JhSW5pY2lvOiBzdHJpbmcpIHtcbiAgICBjb25zdCBleHRyYWVySG9yYSA9IChmZWNoYVN0cjogc3RyaW5nKTogRGF0ZSB8IG51bGwgPT4ge1xuICAgICAgICBjb25zdCBtYXRjaCA9IGZlY2hhU3RyLm1hdGNoKC8oXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxzK1xcdytcXHMrKFxcZHsyfTpcXGR7Mn0pLyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGAke21hdGNoWzFdfVQke21hdGNoWzJdfTowMGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBjb25zdCBpbmljaW8gPSBleHRyYWVySG9yYShob3JhSW5pY2lvKTtcbiAgICBpZiAoIWluaWNpbykge1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gXCJUaWVtcG8gdHJhbnNjdXJyaWRvOiBObyBkaXNwb25pYmxlXCI7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYWxjdWxhclRpZW1wbyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWhvcmEgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBkaWZlcmVuY2lhID0gTWF0aC5mbG9vcigoYWhvcmEuZ2V0VGltZSgpIC0gaW5pY2lvLmdldFRpbWUoKSkgLyAxMDAwKTtcbiAgICAgICAgY29uc3QgaG9yYXMgPSBNYXRoLmZsb29yKGRpZmVyZW5jaWEgLyAzNjAwKTtcbiAgICAgICAgY29uc3QgbWludXRvcyA9IE1hdGguZmxvb3IoKGRpZmVyZW5jaWEgJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2VndW5kb3MgPSBkaWZlcmVuY2lhICUgNjA7XG5cbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGBUaWVtcG8gdHJhbnNjdXJyaWRvOiAke2hvcmFzfWggJHttaW51dG9zfW0gJHtzZWd1bmRvc31zYDtcblxuICAgICAgICAvLyBDdWFuZG8gc2UgYWxjYW56YSBvIHN1cGVyYSAyNSBtaW51dG9zICgxNTAwIHNlZ3VuZG9zKVxuICAgICAgICBpZiAoZGlmZXJlbmNpYSA+PSAxNTAwKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0aWVtcG8tcm9qb1wiKTsgICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInRpZW1wby1yb2pvXCIpO1xuICBcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBBY3R1YWxpemEgaW5tZWRpYXRhbWVudGUgeSBsdWVnbyBjYWRhIHNlZ3VuZG9cbiAgICBjYWxjdWxhclRpZW1wbygpO1xuICAgIHNldEludGVydmFsKGNhbGN1bGFyVGllbXBvLCAxMDAwKTtcbn1cbiAgICBcbi8qKlxuICogRnVuY2lcdTAwRjNuIHBhcmEgbW9zdHJhciB1biBwcm9tcHQgeSBvYnRlbmVyIHVuIG51ZXZvIHZhbG9yXG4gKi9cbmFzeW5jIG1vc3RyYXJQcm9tcHQobWVuc2FqZTogc3RyaW5nLCB2YWxvckFjdHVhbDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAvLyBDcmVhIGVsIGZvbmRvIG9zY3Vyb1xuICAgICAgY29uc3QgYmFja2Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYmFja2Ryb3AuY2xhc3NMaXN0LmFkZChcInByb21wdC1tb2RhbC1iYWNrZHJvcFwiKTtcbiAgXG4gICAgICAvLyBDcmVhIGVsIG1vZGFsXG4gICAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwicHJvbXB0LW1vZGFsXCIpO1xuXG4gICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IG1lbnNhamU7XG5cbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgaW5wdXQudmFsdWUgPSB2YWxvckFjdHVhbDsgLy8gUHJlbGxlbmFyIGNvbiBsYSBkZXNjcmlwY2lcdTAwRjNuIGFjdHVhbFxuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICAgICAgY29uc3QgYWNlcHRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGFjZXB0YXIudGV4dENvbnRlbnQgPSBcIkFjZXB0YXJcIjtcbiAgICAgICAgYWNlcHRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShpbnB1dC52YWx1ZS50cmltKCkgfHwgbnVsbCk7IC8vIFJldG9ybmEgZWwgdGV4dG8gZXNjcml0b1xuICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICBiYWNrZHJvcC5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBjYW5jZWxhci50ZXh0Q29udGVudCA9IFwiQ2FuY2VsYXJcIjtcbiAgICAgICAgY2FuY2VsYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7IC8vIENhbmNlbGFyIHNpbiBjYW1iaW9zXG4gICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQZXJtaXRpciBjb25maXJtYXIgY29uIFwiRW50ZXJcIlxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYWNlcHRhci5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYWNlcHRhcik7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxhcik7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJhY2tkcm9wKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG5cbiAgICAgICAgaW5wdXQuZm9jdXMoKTsgLy8gRW5mb2NhciBlbCBpbnB1dCBhdXRvbVx1MDBFMXRpY2FtZW50ZVxuICAgIH0pO1xufVxuXG4gICAgY3JlYXRlQnV0dG9uVGFibGUoYnV0dG9uVGV4dCwgb25DbGlja0NhbGxiYWNrKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIG5vIHNlIGVudmlhclx1MDBFMSB1biBmb3JtdWxhcmlvIGFsIGhhY2VyIGNsaWMgZW4gXHUwMEU5bFxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgneW91ci1idXR0b24tY2xhc3MnKTsgLy8gQWdyZWdhIHVuYSBjbGFzZSBwYXJhIGVsIGVzdGlsbyBkZWwgYm90XHUwMEYzbiBzaSBlcyBuZWNlc2FyaW9cblxuICAgICAgICAvLyBBXHUwMEYxYWRlIGVsIGV2ZW50byBkZSBjbGljIGFsIGJvdFx1MDBGM25cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICBcbi8qKlxuICogUmVlc2NyaWJlIGVsIGZyb250bWF0dGVyIGVuIHVuIGFyY2hpdm8gTWFya2Rvd24sIHByZXNlcnZhbmRvIGxhIGVzdHJ1Y3R1cmEgb3JpZ2luYWwuXG4gKi9cbnJlZXNjcmliaXJGcm9udG1hdHRlcihjb250ZW50OiBzdHJpbmcsIGZyb250bWF0dGVyOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nIHtcbiAgICBjb25zdCB5YW1sU3RhcnQgPSBjb250ZW50LmluZGV4T2YoJy0tLScpO1xuICAgIGNvbnN0IHlhbWxFbmQgPSBjb250ZW50LmluZGV4T2YoJy0tLScsIHlhbWxTdGFydCArIDMpO1xuXG4gICAgaWYgKHlhbWxTdGFydCA9PT0gLTEgfHwgeWFtbEVuZCA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQ7IC8vIFNpIG5vIGhheSBmcm9udG1hdHRlciwgbm8gbW9kaWZpY2FyIG5hZGEuXG4gICAgfVxuXG4gICAgLy8gQ29udmVydGlyIGVsIGZyb250bWF0dGVyIGVuIFlBTUwgZm9ybWF0ZWFkbyBjb3JyZWN0YW1lbnRlXG4gICAgbGV0IG51ZXZvRnJvbnRtYXR0ZXIgPSAnLS0tXFxuJztcblxuICAgIGZvciAoY29uc3Qga2V5IGluIGZyb250bWF0dGVyKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gZnJvbnRtYXR0ZXJba2V5XTtcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGNhbXBvIGVzIHVuYSBsaXN0YSwgYXNlZ3VyYXJzZSBkZSBxdWUgY2FkYSBlbGVtZW50byBzZSBmb3JtYXRlZSBjb3JyZWN0YW1lbnRlXG4gICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAke2tleX06XFxuYDtcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiICYmIGl0ZW0ubWF0Y2goL15cXFtcXFsuKlxcXVxcXSQvKSkge1xuICAgICAgICAgICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAgIC0gXCIke2l0ZW19XCJcXG5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCAgLSAke0pTT04uc3RyaW5naWZ5KGl0ZW0pfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUubWF0Y2goL15cXFtcXFsuKlxcXVxcXSQvKSkge1xuICAgICAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCR7a2V5fTogXCIke3ZhbHVlfVwiXFxuYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgJHtrZXl9OiAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgJHtrZXl9OiAke3ZhbHVlfVxcbmA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBudWV2b0Zyb250bWF0dGVyICs9ICctLS1cXG4nO1xuXG4gICAgLy8gT2J0ZW5lciBlbCBjb250ZW5pZG8gcG9zdGVyaW9yIGFsIGZyb250bWF0dGVyXG4gICAgbGV0IGNvbnRlbmlkb1Jlc3RhbnRlID0gY29udGVudC5zbGljZSh5YW1sRW5kICsgMykudHJpbVN0YXJ0KCk7IC8vIEVsaW1pbmFyIHNhbHRvcyBkZSBsXHUwMEVEbmVhIGV4dHJhXG5cbiAgICAvLyBBZ3JlZ2FyIHVuYSBsXHUwMEVEbmVhIGVuIGJsYW5jbyBzb2xvIHNpIGhheSBjb250ZW5pZG8gcmVzdGFudGVcbiAgICByZXR1cm4gbnVldm9Gcm9udG1hdHRlciArIChjb250ZW5pZG9SZXN0YW50ZSA/ICdcXG4nICsgY29udGVuaWRvUmVzdGFudGUgOiAnJyk7XG59XG4gICAgXG59XG4iLCAiLyogRmlsZSBMb2NhdGlvbjogIHNyYy9tb2R1bGVzL21vZHVsb0dURC9pbmRleC50cyAqL1xuaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9HVEQge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIG1vZHVsb0dURDogTW9kdWxvR1REIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kdWxvR1REKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBhY3Rpdm8sIG5vIGhhY2VyIG5hZGFcblxuICAgICAgICByZWdpc3RlckNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMubW9kdWxvR1REKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBkZXNhY3RpdmFkbywgbm8gaGFjZXIgbmFkYVxuICAgICAgICBkZWFjdGl2YXRlQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgICAgICB0aGlzLm1vZHVsb0dURCA9IG51bGw7XG4gICAgfVxuXG5cbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kdWxvR1REL2NvbW1hbmRzLnRzXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGluZ3Jlc2FyQmFuZGVqYUVudHJhZGEgfSBmcm9tIFwiLi9pbmJveFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIENvbWFuZG8gcGFyYSBpbmdyZXNhciBhIGxhIGJhbmRlamEgZGUgZW50cmFkYVxuICAgIGNvbnN0IGluYm94Q29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiaW5ncmVzYXItaW5ib3hcIixcbiAgICAgICAgbmFtZTogXCJJbmdyZXNhciBCYW5kZWphIGRlIEVudHJhZGEgLT4gSW5ib3hcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGluZ3Jlc2FyQmFuZGVqYUVudHJhZGEocGx1Z2luKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0cmFyIGxvcyBJRHMgZGUgbG9zIGNvbWFuZG9zIHBhcmEgcG9kZXIgZGVzYWN0aXZhcmxvcyBkZXNwdVx1MDBFOXNcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQgPSBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQgfHwgW107XG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1RELnB1c2goaW5ib3hDb21tYW5kLmlkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1REKSByZXR1cm47XG4gICAgXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1RELmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gTGltcGlhciBlbCBhcnJheSBkZSBjb21hbmRvcyByZWdpc3RyYWRvc1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURCA9IFtdO1xufSIsICJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldywgQWxlcnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IEJhbmRlamFEZUVudHJhZGFNb2RhbH0gZnJvbSAnLi4vbW9kYWxlcy9pbmJveE1vZGFsJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5ncmVzYXJCYW5kZWphRW50cmFkYShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGxldCBpbmJveFBhdGggPSBgJHtwbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveH0ubWRgO1xuICAgIGxldCBpbmJveEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGluYm94UGF0aCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgYXJjaGl2byBhY3Rpdm9cIik7XG4gICAgICAgIHJldHVybjsgLy8gQXNlZ3VyYSBxdWUgaGF5IHVuIGFyY2hpdm8gYWN0aXZvIGFudGVzIGRlIGNvbnRpbnVhclxuICAgIH1cbiAgICBsZXQgaW5ib3g7XG5cblxuICAgIC8vIFVzbyBkZWwgTW9kYWxcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYW5kZWphRGVFbnRyYWRhTW9kYWwocGx1Z2luLmFwcCk7XG4gICAgbW9kYWwub3BlbigpO1xuXG4gICAgY29uc3QgeyB0ZXh0LCBzYXZlSW5DdXJyZW50IH0gPSBhd2FpdCBtb2RhbC53YWl0Rm9ySW5wdXQoKTtcbiAgICBcbiAgICBpZiAodGV4dC5sZW5ndGggPCAzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJJbmJveCBjYW5jZWxhZGFcIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgIH1cbiAgICBsZXQgZGVzdGlubyA9IHNhdmVJbkN1cnJlbnQgPyBhY3RpdmVGaWxlIDogaW5ib3hGaWxlO1xuICAgIGxldCBob3kgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eS1NTS1kZCcpO1xuICAgIGxldCBob3JhID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ0hIOm1tJyk7XG4gICAgaW5ib3ggPSBgLSBbIF0gXHVEODNFXHVEREUwICR7dGV4dH0gI2luYm94IFtjcmVhdGVkOjogJHtob3l9XSBhIGxhcyAke2hvcmF9XFxuYDtcblxuICAgIFxuICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgZXNjcmliaXIgZW4gZWwgYXJjaGl2b1xuICAgIGlmIChkZXN0aW5vIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgaWYgKGRlc3Rpbm8gPT09IGluYm94RmlsZSkge1xuICAgICAgICAgICAgLy8gTWFuZWphbW9zIGxhIHByb21lc2EgY29uIC50aGVuKCkgeSAuY2F0Y2goKSBwYXJhIGVsIG1hbmVqbyBkZSBlcnJvcmVzXG4gICAgICAgICAgICBpbnNlcnRBdFN0YXJ0VXNpbmdQcm9jZXNzKGluYm94LCBkZXN0aW5vKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgcHJvbWVzYSBzZSByZXN1ZWx2ZSBzaW4gZXJyb3JlcywgbXVlc3RyYSB1biBOb3RpY2VcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkJhbmRlamEgZGUgZW50cmFkYSBhY3R1YWxpemFkYSBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgb2N1cnJlIHVuIGVycm9yLCBtdWVzdHJhIHVuIEFsZXJ0XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBhZ3JlZ2FyIGNvbnRlbmlkbyBhbCBpbmljaW8gZGVsIGFyY2hpdm86IFwiICsgZXJyb3IubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGluc2VydEluYm94QXRDdXJzb3IoaW5ib3gpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRJbmJveEF0Q3Vyc29yKGluYm94KSB7XG4gICAgZGVidWdnZXJcbiAgICBjb25zdCBhY3RpdmVMZWFmID0gYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgIGlmIChhY3RpdmVMZWFmKSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW5ib3gsIGN1cnNvcik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRBdFN0YXJ0VXNpbmdQcm9jZXNzKGluYm94LCBmaWxlKSB7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgIC8vIFV0aWxpemEgVmF1bHQucHJvY2VzcyBwYXJhIG1vZGlmaWNhciBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm9cbiAgICBhd2FpdCBhcHAudmF1bHQucHJvY2VzcyhmaWxlLCAoY29udGVudCkgPT4ge1xuICAgICAgICAvLyBDb25jYXRlbmEgZWwgdGV4dG8gZGUgZW50cmFkYSBlbiBsYSBwcmltZXJhIGxcdTAwRURuZWEgeSBlbCBjb250ZW5pZG8gb3JpZ2luYWxcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGluYm94ICsgY29udGVudDtcbiAgICAgICAgcmV0dXJuIG5ld0NvbnRlbnQ7IC8vIFJldG9ybmEgZWwgbnVldm8gY29udGVuaWRvIHBhcmEgc2VyIGd1YXJkYWRvXG4gICAgfSk7XG59XG5cblxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIEJhbmRlamFEZUVudHJhZGFNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBpbnB1dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgY2hlY2tCb3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZXNvbHZlcjogKHZhbHVlOiB7IHRleHQ6IHN0cmluZzsgc2F2ZUluQ3VycmVudDogYm9vbGVhbiB9KSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsSW5ib3hcIik7XG4gICAgICAgIGxldCB7Y29udGVudEVsfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIkJhbmRlamEgZGUgRW50cmFkYVwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVudnVlbHZlIGVsIFx1MDBFMXJlYSBkZSB0ZXh0byBlbiB1biBkaXYgcGFyYSBjb250cm9sIGRlIGZsdWpvXG4gICAgICAgIGxldCB0ZXh0QXJlYURpdiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuaW5wdXRBcmVhID0gdGV4dEFyZWFEaXYuY3JlYXRlRWwoJ3RleHRhcmVhJyk7XG4gICAgICAgIHRoaXMuaW5wdXRBcmVhLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnRXNjcmliZSB0dSB0YXJlYSBhcXVcdTAwRUQuLi4nKTtcbiAgICAgICAgLy8gQVx1MDBGMWFkZSB1biBsaXN0ZW5lciBkZSBldmVudG8gJ2tleWRvd24nIGFsIHRleHRhcmVhXG4gICAgICAgIHRoaXMuaW5wdXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgdGVjbGEgcHJlc2lvbmFkYSBlcyBFbnRlciB5IHF1ZSBubyBoYXlhIG5pbmd1bmEgbW9kaWZpY2FjaVx1MDBGM24gKHNoaWZ0LCBjdHJsLCBhbHQpXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSAmJiAhZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZpZW5lIGVsIGNvbXBvcnRhbWllbnRvIHBvciBkZWZlY3RvIHBhcmEgbm8gaW5zZXJ0YXIgdW5hIG51ZXZhIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oKTsgLy8gTGxhbWEgYSBsYSBmdW5jaVx1MDBGM24gcXVlIG1hbmVqYSBlbCBlbnZcdTAwRURvXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3RpdmVGaWxlKTtcbiAgICAgICAgbGV0IG5hbWVBY3RpdmVGaWxlID0gbWV0YWRhdGEuYWxpYXNlcyA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBhY3RpdmVGaWxlLmJhc2VuYW1lO1xuICAgICAgICBcbiAgICAgICAgLy8gRW52dWVsdmUgZWwgY2hlY2tib3ggeSBzdSBldGlxdWV0YSBlbiB1biBkaXYgcGFyYSBjb250cm9sIGRlIGZsdWpvXG4gICAgICAgIGxldCBjaGVja0JveERpdiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY2hlY2tCb3ggPSBjaGVja0JveERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuICAgICAgICBjaGVja0JveERpdi5jcmVhdGVFbCgnbGFiZWwnLCB7dGV4dDogYEd1YXJkYXIgZW4gJHtuYW1lQWN0aXZlRmlsZX1gfSkucHJlcGVuZCh0aGlzLmNoZWNrQm94KTtcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGNoZWNrQm94RGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7dGV4dDogJ0d1YXJkYXInfSk7XG4gICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN1Ym1pdEZvcm0oKSk7XG4gICAgfVxuICAgIFxuICAgIHN1Ym1pdEZvcm0oKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmlucHV0QXJlYS52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2F2ZUluQ3VycmVudCA9IHRoaXMuY2hlY2tCb3guY2hlY2tlZDtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcih7IHRleHQsIHNhdmVJbkN1cnJlbnQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICB3YWl0Rm9ySW5wdXQoKTogUHJvbWlzZTx7IHRleHQ6IHN0cmluZzsgc2F2ZUluQ3VycmVudDogYm9vbGVhbiB9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3Vic2lzdGVtYXNBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0xOSAxMzoxMToyNlxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDk6MzNcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuaW50ZXJmYWNlIEdydXBvQVYge1xuICBncnVwbzogc3RyaW5nO1xuICBhdjogc3RyaW5nO1xuICB0ZXh0bzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3Mgc3Vic2lzdGVtYXNBUEkge1xuICBjb25zdHJ1Y3RvcihwbHVnaW4pIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICB9XG5cbiAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gaW5pY2lhbCBcIk1lblx1MDBGQSBob3lcIlxuICBhc3luYyBtb3N0cmFyQm90b25DcmVhckFWKGR2KSB7XG4gICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgY29uc3QgYm90b25NZW51SG95ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSBcIlByb2Nlc2FyIEFyZWFzIGRlIFZpZGFcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25NZW51SG95KTtcblxuICAgIGJvdG9uTWVudUhveS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNhckFWKGR2KTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIG1vc3RyYXJCb3RvbkNyZWFyQVZUcmltZXN0cmFsKGR2KSB7XG4gICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgY29uc3QgYm90b25NZW51SG95ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSBcIlByb2Nlc2FyIEFyZWFzIGRlIFZpZGEgZGVsIHRyaW1lc3RyZVwiO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgYm90b25NZW51SG95Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc2FyQVZUcmltZXN0cmUoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgcHJvY2VzYXJBVihkdikge1xuICAgIC8vIE9idGVuZXIgUXMgcGFyYSBwcmVndW50YXIgZWwgUSBwYXJhIGVsIHF1ZSBkZXNlYSBjcmVhciBsYXMgXHUwMEUxcmVhcyBkZSB2aWRhLlxuICAgIGNvbnN0IGZvbGRlclEgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9UcmltZXN0cmFsXCJdO1xuICAgIGNvbnN0IGZpbGVzUSA9IGFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlclEpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgKTtcbiAgICBsZXQgcUNyZWFkb3MgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXNRKSB7XG4gICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICBpZiAobWV0YWRhdGE/LnR5cGUgPT09IFwiVFFcIiAmJiBtZXRhZGF0YT8udHJpbWVzdHJlKSB7XG4gICAgICAgIGxldCBxQWN0aXZvID0geyBmaWxlIH07IC8vIEFzdW1pZW5kbyBxdWUgcXVpZXJlcyBndWFyZGFyIGVsIHBhdGggZGVsIGFyY2hpdm9cbiAgICAgICAgT2JqZWN0LmFzc2lnbihxQWN0aXZvLCBtZXRhZGF0YSk7IC8vIEFncmVnYSBlbCBtZXRhZGF0YSBhbCBvYmpldG8gcUFjdGl2b1xuICAgICAgICBxQ3JlYWRvcy5wdXNoKHFBY3Rpdm8pOyAvLyBBXHUwMEYxYWRlIGVsIHJlZ2lzdHJvIGFjdGl2byBhbCBhcnJheVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IHEgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICBxQ3JlYWRvcy5tYXAoKGIpID0+IGIudHJpbWVzdHJlKSxcbiAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYiksXG4gICAgICB0cnVlLFxuICAgICAgYERlIHF1ZSB0cmltZXN0cmUgdmFtb3MgYSBwcm9jZXNhciB0dXMgQXJlYXMgZGUgVmlkYWBcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdGFkb0FWOiBHcnVwb0FWW10gPSBbXTtcbiAgICBjb25zdCBmaWxlQ2FtcG9zID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZUNhbXBvcyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVDYW1wb3MpO1xuICAgICAgICBjb25zdCBhcnJlZ2xvQVYgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LkFyZWFzVmlkYSB8fCBbXTtcbiAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb0FWKSkge1xuICAgICAgICAgIGFycmVnbG9BVi5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIHJlc3VsdGFkb0FWLnB1c2goe1xuICAgICAgICAgICAgICAgIGdydXBvOiBpdGVtWzBdLFxuICAgICAgICAgICAgICAgIGF2OiBpdGVtWzFdLFxuICAgICAgICAgICAgICAgIHRleHRvOiBpdGVtWzBdICsgXCIgLyBcIiArIGl0ZW1bMV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgfVxuXG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBiYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGE7XG5cbiAgICAvLyAtLi4tPiBSZXZpc2lcdTAwRjNuIGRlIGVzY2VuYXJpb3MuXG5cbiAgICBmb3IgKGxldCBhcmVhVmlkYSBvZiByZXN1bHRhZG9BVikge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBleGlzdGUgZW4gbGEgdWJpY2FjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhXG4gICAgICBjb25zdCBmdWxsRm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2FyZWFWaWRhLmF2fWA7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxGb2xkZXJQYXRoKTtcblxuICAgICAgLy9QMCAtPiBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHBhdGgvYXJlYVZpZGEgZXhpc3RlXG4gICAgICAvL1AwIC0gU0lcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYCk7XG4gICAgICAgIC8vIEFob3JhLCB2ZXJpZmljYSBzaSBsYSBub3RhIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YVxuICAgICAgICBjb25zdCBpbnN0YW5jZXNPZkFWID0gYXBwLnZhdWx0XG4gICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZ1bGxGb2xkZXJQYXRoKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgICAgICk7XG4gICAgICAgIC8vIFAxIEV4aXN0ZSBub2RlQXJlYVZpZGE/XG4gICAgICAgIGNvbnN0IG5vZGVBVkV4aXN0cyA9IGluc3RhbmNlc09mQVYuc29tZShcbiAgICAgICAgICAoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSA9PT0gYXJlYVZpZGEuYXZcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQMSBTSVxuICAgICAgICBpZiAobm9kZUFWRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMSAtIE5PIChub2RlQXJlYVZpZGEgbm8gRXhpc3RlKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAvLyBDYXNvIDMgeSA0XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgICAvL1AzIC0+IFNJXG4gICAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgICAgLy8gUDIgLi4gLT4gU2kgeSBOb1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBQTyAtPiBOTyAoTGEgQ2FycGV0YSBubyBleGlzdGUpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGFcdTAwRkFuIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gXG4gICAgICAgICk7XG4gICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAvLyBQMyAtPiBTSVxuICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgLy8gUDJcbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgfVxuICAgICAgICAvLyBQMyAtPiBFc2NhcGVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEZpbiBGb3IgQXJlYXNWaWRhIGZpbGVDYW1wb3NcbiAgfSAvLyBGaW4gcHJvY2VzYXJBVigpXG5cblxuICBhc3luYyBwcm9jZXNhckFWVHJpbWVzdHJlKGR2KSB7XG4gICAgXG4gICAgbGV0IHEgPSB7fTsgXG4gICAgcS50cmltZXN0cmUgPSBkdi5jdXJyZW50KCkudHJpbWVzdHJlO1xuICAgIGNvbnN0IHJlc3VsdGFkb0FWOiBHcnVwb0FWW10gPSBbXTtcbiAgICBjb25zdCBmaWxlQ2FtcG9zID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZUNhbXBvcyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVDYW1wb3MpO1xuICAgICAgICBjb25zdCBhcnJlZ2xvQVYgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LkFyZWFzVmlkYSB8fCBbXTtcbiAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb0FWKSkge1xuICAgICAgICAgIGFycmVnbG9BVi5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIHJlc3VsdGFkb0FWLnB1c2goe1xuICAgICAgICAgICAgICAgIGdydXBvOiBpdGVtWzBdLFxuICAgICAgICAgICAgICAgIGF2OiBpdGVtWzFdLFxuICAgICAgICAgICAgICAgIHRleHRvOiBpdGVtWzBdICsgXCIgLyBcIiArIGl0ZW1bMV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgfVxuXG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBiYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGE7XG5cbiAgICAvLyAtLi4tPiBSZXZpc2lcdTAwRjNuIGRlIGVzY2VuYXJpb3MuXG5cbiAgICBmb3IgKGxldCBhcmVhVmlkYSBvZiByZXN1bHRhZG9BVikge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBleGlzdGUgZW4gbGEgdWJpY2FjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhXG4gICAgICBjb25zdCBmdWxsRm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2FyZWFWaWRhLmF2fWA7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxGb2xkZXJQYXRoKTtcblxuICAgICAgLy9QMCAtPiBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHBhdGgvYXJlYVZpZGEgZXhpc3RlXG4gICAgICAvL1AwIC0gU0lcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYCk7XG4gICAgICAgIC8vIEFob3JhLCB2ZXJpZmljYSBzaSBsYSBub3RhIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YVxuICAgICAgICBjb25zdCBpbnN0YW5jZXNPZkFWID0gYXBwLnZhdWx0XG4gICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZ1bGxGb2xkZXJQYXRoKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgICAgICk7XG4gICAgICAgIC8vIFAxIEV4aXN0ZSBub2RlQXJlYVZpZGE/XG4gICAgICAgIGNvbnN0IG5vZGVBVkV4aXN0cyA9IGluc3RhbmNlc09mQVYuc29tZShcbiAgICAgICAgICAoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSA9PT0gYXJlYVZpZGEuYXZcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQMSBTSVxuICAgICAgICBpZiAobm9kZUFWRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMSAtIE5PIChub2RlQXJlYVZpZGEgbm8gRXhpc3RlKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAvLyBDYXNvIDMgeSA0XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgICAvL1AzIC0+IFNJXG4gICAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgICAgLy8gUDIgLi4gLT4gU2kgeSBOb1xuICAgICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBQTyAtPiBOTyAoTGEgQ2FycGV0YSBubyBleGlzdGUpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGFcdTAwRkFuIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gXG4gICAgICAgICk7XG4gICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAvLyBQMyAtPiBTSVxuICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgLy8gUDJcbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgfVxuICAgICAgICAvLyBQMyAtPiBFc2NhcGVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEZpbiBGb3IgQXJlYXNWaWRhIGZpbGVDYW1wb3NcbiAgfSAvLyBGaW4gcHJvY2VzYXJBVlRyaW1lc3RyZSgpXG5cblxuICAvL1AyIGFyZWFWaWRhIFEgRXhpc3RlP1xuICBhc3luYyB2YWxpZGFjaW9uQVZRKFxuICAgIGZ1bGxGb2xkZXJQYXRoOiBzdHJpbmcsXG4gICAgcTogYW55LFxuICAgIGFyZWFWaWRhOiBhbnlcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgcGF0aEFWUSA9IGAke2Z1bGxGb2xkZXJQYXRofS8ke3EudHJpbWVzdHJlfSAtICR7YXJlYVZpZGEuYXZ9Lm1kYDtcbiAgICBjb25zdCBmaWxlQVZRID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoQVZRKTtcbiAgICBkZWJ1Z2dlcjtcbiAgICAvLyBWZXJpZmljYXIgc2kgZWwgQVYgZGUgUSBFeGlzdGVcbiAgICAvLyBQMiBTSVxuICAgIC8vIENBU08gNFxuICAgIC8vIENBU08gNVxuICAgIGlmIChmaWxlQVZRIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICBsZXQgbmV4dFN0ZXAgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgIFtcbiAgICAgICAgICBcIkFjdHVhbGl6YXIgZXN0YWRvIGRlbCBBVlwiLFxuICAgICAgICAgIFwiQm9ycmFyIHkgQ3JlYXIgZGUgbnVldm8gZWwgQVZcIixcbiAgICAgICAgICBcIkRlamFyIGVsIEFWIGNvbW8gZXN0XHUwMEUxIFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXCJ1cGRcIiwgXCJkZWwrY3JlXCIsIFwiY29udGludWVcIl0sXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBcdTAwQkYke3EudHJpbWVzdHJlfSAke2FyZWFWaWRhLmF2fSB5YSBleGlzdGUuIEVsaWdlIHVuYSBvcGNpXHUwMEYzbjpgXG4gICAgICApO1xuICAgICAgc3dpdGNoIChuZXh0U3RlcCkge1xuICAgICAgICBjYXNlIFwidXBkXCI6XG4gICAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyQVZRKGZpbGVBVlEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZGVsK2NyZVwiOlxuICAgICAgICAgIGF3YWl0IHRoaXMuYm9ycmFyQVZRKGZpbGVBVlEpO1xuICAgICAgICAgIGF3YWl0IHRoaXMuYWdyZWdhckFWUShhcmVhVmlkYSwgcS50cmltZXN0cmUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiY29udGludWVcIjpcbiAgICAgICAgICBjb25zb2xlLmxvZyhgQ29udGludWFyIHNpbiBoYWNlciBuYWRhIGNvbiAke2ZpbGVBVlEuYmFzZW5hbWV9YCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBTaSBBViBkZSBRIGV4aXN0ZSAoMSkgbXVlc3RyYSBlbCBlc3RhZG8geSBwZXJtaXRlIGNhbWJpYXJsby5cbiAgICB9XG4gICAgLy8gUDIgTk9cbiAgICAvLyAtPj4gQ0FTTyAxXG4gICAgLy8gLT4+IENBU08gM1xuICAgIC8vIC0tPiBDQVNPIDZcbiAgICBlbHNlIHtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgLy8gU2kgQVYgZGUgUSBubyBFeGlzdGUgKDIpIEFncmVnYSBBcmVhVmlkYSBkZSBRLCBwcmVndW50YW5kbyBlbiBxdWUgZXN0YWRvIHF1aWVyZSB0ZW5lciBlc2EgQVYgZXNlIFFcbiAgICAgIGF3YWl0IHRoaXMuYWdyZWdhckFWUShhcmVhVmlkYSwgcS50cmltZXN0cmUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFAzIEFncmVnYXIgbm9kb0FyZWFWaWRhP1xuICBhc3luYyBhZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKSB7XG4gICAgLy8gcHJlZ3VudGFyIHByaW1lcm8gc2kgc2kgbG8gZGVzZWEgYWdyZWdhci5cblxuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IGFncmVnYXIgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgIHRydWUsXG4gICAgICBgXHUwMEJGRGVzZWFzIGFncmVnYXIgJHthcmVhVmlkYS5hdn0gYSB0dSBzaXN0ZW1hIGRlIGdlc3RpXHUwMEYzbj9gXG4gICAgKTtcbiAgICAvLyBQMyBTSVxuICAgIGlmIChhZ3JlZ2FyKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfQXJlYXNWaWRhYF1cbiAgICAgIH0vUGx0IC0gbm9kb0FyZWFzVmlkYS5tZGA7XG4gICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vZG9BcmVhVmlkYSB0ZW1wbGF0ZSBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gdGVtcGxhdGUgbm9kb0FyZWFWaWRhIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmaWxlbmFtZSA9IGFyZWFWaWRhLmdydXBvICsgXCIgLSBcIiArIGFyZWFWaWRhLmF2O1xuICAgICAgbGV0IGZvbGRlclBhdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX0FyZWFzVmlkYWBdfS8ke1xuICAgICAgICBhcmVhVmlkYS5hdlxuICAgICAgfWA7XG4gICAgICAvLyBTZSBhc2VndXJhIGRlIHF1ZSBsYSBjYXJwZXRhIGV4aXN0YSBwYXJhIHBvZGVyIGNyZWFyIGVsIGFyY2hpdm8gZGlyZWN0YW1lbnRlIGVuIGVzYSBjYXJwZXRhXG4gICAgICBhd2FpdCB0aGlzLmNyZWFyQ2FycGV0YShmb2xkZXJQYXRoKTtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBsZXQgY3JlYXJOb3RhOiAoXG4gICAgICAgIHRlbXBsYXRlOiBURmlsZSxcbiAgICAgICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICAgICAgb3ZlcndyaXRlOiBib29sZWFuLFxuICAgICAgICBmb2xkZXI6IFRGb2xkZXJcbiAgICAgICkgPT4gUHJvbWlzZTx2b2lkPjtcbiAgICAgIGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBsZXQgbm90YSA9IGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhbmRvIE5vZG9BcmVhVmlkYTogXCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWdyZWdhckFWUShhcmVhVmlkYTogYW55LCB0cmltZXN0cmU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhfS9QbHQgLSBBcmVhc1ZpZGEubWRgO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICBpZiAoISh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBBc2VndXJhIHF1ZSBsYSBmdW5jaVx1MDBGM24gcmV0b3JuYSB1biBib29sZWFubyBpbmNsdXNvIGVuIGNhc28gZGUgZXJyb3IuXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBgJHt0cmltZXN0cmV9IC0tICR7YXJlYVZpZGEuYXZ9IC0tICR7YXJlYVZpZGEuZ3J1cG99YDtcbiAgICBsZXQgZm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfQXJlYXNWaWRhYF19LyR7XG4gICAgICBhcmVhVmlkYS5hdlxuICAgIH1gO1xuICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCkgYXMgVEZvbGRlcjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIFwiSW5ib3hcIiByZWFsbWVudGUgZXhpc3RhIHkgc2VhIHVuIFRGb2xkZXIuXG5cbiAgICAvLyBBc3VtaWVuZG8gcXVlIGVsIHRpcG8gZGUgYGZvbGRlcmAgZXMgY29ycmVjdG8geSBxdWUgY3JlYXJOb3RhIGVzIHVuYSBmdW5jaVx1MDBGM24gYXNpbmNyXHUwMEYzbmljYSBxdWUgZGV2dWVsdmUgdm9pZC5cbiAgICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgYXMgKFxuICAgICAgdGVtcGxhdGU6IFRGaWxlLFxuICAgICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICAgIG92ZXJ3cml0ZTogYm9vbGVhbixcbiAgICAgIGZvbGRlcjogVEZvbGRlclxuICAgICkgPT4gUHJvbWlzZTx2b2lkPjtcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBjcmVhck5vdGEodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYW5kbyBBcmVhVmlkYTogXCIsIGVycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBib3JyYXJBVlEoZmlsZUFWUSkge1xuICAgIGNvbnNvbGUubG9nKGBMb2dpY2EgZGUgYm9ycmFkbyBkZSAke2ZpbGVBVlEuYmFzZW5hbWV9YCk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGZpbGVBVlEgZXMgdW4gb2JqZXRvIFRGaWxlIHZcdTAwRTFsaWRvXG4gICAgICBpZiAoZmlsZUFWUSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZmlsZUFWUSk7IC8vIEJvcnJhciBlbCBhcmNoaXZvXG4gICAgICAgIGNvbnNvbGUubG9nKGAke2ZpbGVBVlEuYmFzZW5hbWV9IGhhIHNpZG8gYm9ycmFkbyBjb24gXHUwMEU5eGl0by5gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYCR7ZmlsZUFWUS5iYXNlbmFtZX0gbm8gZXMgdW4gYXJjaGl2byB2XHUwMEUxbGlkbyBvIG5vIGV4aXN0ZS5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBpbnRlbnRhciBib3JyYXIgJHtmaWxlQVZRLmJhc2VuYW1lfTpgLCBlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdHVhbGl6YXJBVlEoZmlsZUFWUSkge1xuICAgIGNvbnNvbGUubG9nKGBMb2dpY2EgZGUgYWN0dWFsaXphY2lcdTAwRjNuIGRlIGVzdGFkbyBkZSAke2ZpbGVBVlEuYmFzZW5hbWV9YCk7XG5cbiAgICAvLyBPYnRlbmVyIGFjY2VzbyBhIGZ1bmNpb25lcyBkZWwgc2lzdGVtYSB5IG1ldGFkYXRhQ2FjaGVcbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBtZXRhZGF0YUNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVBVlEpO1xuXG4gICAgLy8gSW5pY2lhbGl6YXIgdmFyaWFibGVzXG4gICAgbGV0IGVzdGFkb0FjdHVhbCA9IFwiXCI7XG4gICAgbGV0IG51ZXZvRXN0YWRvID0gXCJcIjtcblxuICAgIC8vIE9idGVuZXIgZWwgZXN0YWRvIGFjdHVhbCBkZXNkZSBlbCBmcm9udG1hdHRlciB1c2FuZG8gbWV0YWRhdGFDYWNoZVxuICAgIGlmIChcbiAgICAgIG1ldGFkYXRhQ2FjaGUuZnJvbnRtYXR0ZXIgJiZcbiAgICAgIG1ldGFkYXRhQ2FjaGUuZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoXCJlc3RhZG9cIilcbiAgICApIHtcbiAgICAgIGVzdGFkb0FjdHVhbCA9IG1ldGFkYXRhQ2FjaGUuZnJvbnRtYXR0ZXIuZXN0YWRvO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5vIHNlIGVuY29udHJcdTAwRjMgZWwgZXN0YWRvIGFjdHVhbCBlbiBlbCBmcm9udG1hdHRlci5cIik7XG4gICAgICByZXR1cm47IC8vIFNhbGlyIHNpIG5vIGhheSBlc3RhZG8gYWN0dWFsXG4gICAgfVxuXG4gICAgLy8gTW9zdHJhciBlbCBzdWdnZXN0ZXIgcGFyYSBzZWxlY2Npb25hciBlbCBudWV2byBlc3RhZG9cbiAgICB0cnkge1xuICAgICAgbnVldm9Fc3RhZG8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgIFtcIlx1RDgzRFx1REQzNSAtPiBBcmNoaXZhZG9cIiwgXCJcdUQ4M0RcdURGRTIgLT4gQWN0aXZvXCIsIFwiXHVEODNEXHVERkUxIC0+IEVuIFBhdXNhXCIsIFwiXHVEODNEXHVERDM0IC0+IERldGVuaWRvXCJdLCAvLyBvcGNpb25lcyBwYXJhIG1vc3RyYXJcbiAgICAgICAgW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsIFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCAvLyB2YWxvcmVzIGEgcmV0b3JuYXJcbiAgICAgICAgZmFsc2UsIC8vIHBlcm1pdGUgc2VsZWNjaVx1MDBGM24gbVx1MDBGQWx0aXBsZVxuICAgICAgICBgJHtmaWxlQVZRLmJhc2VuYW1lfSBlc3RcdTAwRTEgJHtlc3RhZG9BY3R1YWx9LiBBc2lnbmFyIGVzdGFkbzpgIC8vIG1lbnNhamVcbiAgICAgICk7XG5cbiAgICAgIC8vIFZlcmlmaWNhciBzaSBzZSBzZWxlY2Npb25cdTAwRjMgdW4gbnVldm8gZXN0YWRvXG4gICAgICBpZiAoIW51ZXZvRXN0YWRvKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gc2Ugc2VsZWNjaW9uXHUwMEYzIHVuIG51ZXZvIGVzdGFkby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gU2FsaXIgc2kgbm8gc2Ugc2VsZWNjaW9uXHUwMEYzIHVuIG51ZXZvIGVzdGFkb1xuICAgICAgfVxuXG4gICAgICAvLyBBY3R1YWxpemFyIGVsIGVzdGFkbyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlQVZRLCAoZnJvbnRtYXR0ZXIpID0+IHtcbiAgICAgICAgaWYgKGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KFwiZXN0YWRvXCIpKSB7XG4gICAgICAgICAgZnJvbnRtYXR0ZXIuZXN0YWRvID0gbnVldm9Fc3RhZG87IC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvXG4gICAgICAgICAgY29uc29sZS5sb2coXCJFc3RhZG8gYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG8gYTpcIiwgbnVldm9Fc3RhZG8pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGVzdGFkbyBlbiBlbCBmcm9udG1hdHRlcjpcIiwgZXJyKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhckNhcnBldGEoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgeWEgZXhpc3RlXG5cbiAgICAgIGNvbnN0IGNhcnBldGFFeGlzdGVudGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgICAgaWYgKGNhcnBldGFFeGlzdGVudGUgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke2ZvbGRlclBhdGh9JyB5YSBleGlzdGUuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIENyZWEgbGEgY2FycGV0YVxuICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgIGNvbnNvbGUubG9nKGBDYXJwZXRhICcke2ZvbGRlclBhdGh9JyBjcmVhZGEgZXhpdG9zYW1lbnRlLmApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBjcmVhciBsYSBjYXJwZXRhICcke2ZvbGRlclBhdGh9JzpgLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLy8gUEFSQSBQUk9DRVNBUiBMT1MgQ09NUEFTU1xuXG4gIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGRlIHByb2Nlc2FyIE9iamV0aXZvcyBkZSBsYXMgQVYgYW51YWxlcyBlbiBlbCBwcm9jZXNvIGRlIENvbXBhc3MuXG4gIGFzeW5jIG1vc3RyYXJCb3RvbkNvbXBhc3NBbnVhbChkdikge1xuICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBib3Rvbi50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgT2JqZXRpdm9zIEFWIEFudWFsXCI7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcblxuICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc2FyQ29tcGFzc0FudWFsKGR2KTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIG1vc3RyYXJCb3RvbkNvbXBhc3NUcmltZXN0cmFsKGR2KSB7XG4gICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uLnRleHRDb250ZW50ID0gXCJQcm9jZXNhciBPYmpldGl2b3MgQVYgVHJpbWVzdHJhbGVzXCI7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcblxuICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc2FyQ29tcGFzc1RyaW1lc3RyYWwoZHYpOyBcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgcHJvY2VzYXJDb21wYXNzQW51YWwoZHYpIHtcbiAgXG4gICAgbGV0IGFcdTAwRjFvID0gZHYuY3VycmVudCgpLmFcdTAwRjFvO1xuICAgIGNvbnN0IHJlc3VsdGFkb0FWOiBHcnVwb0FWW10gPSBbXTtcbiAgICBjb25zdCBmaWxlQ2FtcG9zID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZUNhbXBvcyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVDYW1wb3MpO1xuICAgICAgICBjb25zdCBhcnJlZ2xvQVYgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LkFyZWFzVmlkYSB8fCBbXTtcbiAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb0FWKSkge1xuICAgICAgICAgIGFycmVnbG9BVi5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIHJlc3VsdGFkb0FWLnB1c2goe1xuICAgICAgICAgICAgICAgIGdydXBvOiBpdGVtWzBdLFxuICAgICAgICAgICAgICAgIGF2OiBpdGVtWzFdLFxuICAgICAgICAgICAgICAgIHRleHRvOiBpdGVtWzBdICsgXCIgLyBcIiArIGl0ZW1bMV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgfVxuXG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBiYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGE7XG5cbiAgICAvLyAtLi4tPiBSZXZpc2lcdTAwRjNuIGRlIGVzY2VuYXJpb3MuXG4gICAgZGVidWdnZXI7XG4gICAgZm9yIChsZXQgYXJlYVZpZGEgb2YgcmVzdWx0YWRvQVYpIHtcbiAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgZXhpc3RlIGVuIGxhIHViaWNhY2lcdTAwRjNuIGVzcGVjXHUwMEVEZmljYVxuICAgICAgY29uc3QgZnVsbEZvbGRlclBhdGggPSBgJHtiYXNlUGF0aH0vJHthcmVhVmlkYS5hdn1gO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsRm9sZGVyUGF0aCk7XG5cbiAgICAgIC8vUDAgLT4gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBwYXRoL2FyZWFWaWRhIGV4aXN0ZVxuICAgICAgLy9QMCAtIFNJXG4gICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlICR7YmFzZVBhdGh9LmApO1xuICAgICAgICAvLyBBaG9yYSwgdmVyaWZpY2Egc2kgbGEgbm90YSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGFcbiAgICAgICAgY29uc3QgaW5zdGFuY2VzT2ZBViA9IGFwcC52YXVsdFxuICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmdWxsRm9sZGVyUGF0aCkgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICAgICApO1xuICAgICAgICAvLyBQMSBFeGlzdGUgbm9kZUFyZWFWaWRhP1xuICAgICAgICBjb25zdCBub2RlQVZFeGlzdHMgPSBpbnN0YW5jZXNPZkFWLnNvbWUoXG4gICAgICAgICAgKGZpbGUpID0+IGZpbGUuYmFzZW5hbWUgPT09IGFyZWFWaWRhLmF2XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUDEgU0lcbiAgICAgICAgaWYgKG5vZGVBVkV4aXN0cykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAyIGFyZWFWaWRhIFEgRXhpc3RlP1xuICAgICAgICAgIC8vIFByZWd1bnRhciBFbCBvYmpldGl2byB5IGd1YXJkYXJsbyBlbiBlbCBub2RvIGRlIEFWLlxuICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9BbnVhbChhXHUwMEYxbywgYXJlYVZpZGEuYXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDEgLSBOTyAobm9kZUFyZWFWaWRhIG5vIEV4aXN0ZSlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gQ2FzbyAzIHkgNFxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgICAgLy9QMyAtPiBTSVxuICAgICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAgIC8vIFAyIC4uIC0+IFNpIHkgTm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9BbnVhbChhXHUwMEYxbywgYXJlYVZpZGEuYXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gUE8gLT4gTk8gKExhIENhcnBldGEgbm8gZXhpc3RlKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBhXHUwMEZBbiBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYFxuICAgICAgICApO1xuICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgLy8gUDMgLT4gU0lcbiAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgIC8vIFAyXG4gICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b0FudWFsKGFcdTAwRjFvLCBhcmVhVmlkYS5hdik7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgIH1cbiAgICAgICAgLy8gUDMgLT4gRXNjYXBlXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBGaW4gRm9yIEFyZWFzVmlkYSBmaWxlQ2FtcG9zXG4gIH0gLy8gTWV0b2RvIFByb2Nlc2FyIENvbXBhc3MgQW51YWxcblxuICBhc3luYyBwcm9jZXNhckNvbXBhc3NUcmltZXN0cmFsKGR2KSB7XG4gICAgZGVidWdnZXI7XG4gICAgbGV0IHRyaW1lc3RyZSA9IGR2LmN1cnJlbnQoKS50cmltZXN0cmU7XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cbiAgICBmb3IgKGxldCBhcmVhVmlkYSBvZiByZXN1bHRhZG9BVikge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBleGlzdGUgZW4gbGEgdWJpY2FjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhXG4gICAgICBjb25zdCBmdWxsRm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2FyZWFWaWRhLmF2fWA7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxGb2xkZXJQYXRoKTtcblxuICAgICAgLy9QMCAtPiBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHBhdGgvYXJlYVZpZGEgZXhpc3RlXG4gICAgICAvL1AwIC0gU0lcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYCk7XG4gICAgICAgIC8vIEFob3JhLCB2ZXJpZmljYSBzaSBsYSBub3RhIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YVxuICAgICAgICBjb25zdCBpbnN0YW5jZXNPZkFWID0gYXBwLnZhdWx0XG4gICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZ1bGxGb2xkZXJQYXRoKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgICAgICk7XG4gICAgICAgIC8vIFAxIEV4aXN0ZSBub2RlQXJlYVZpZGE/XG4gICAgICAgIGNvbnN0IG5vZGVBVkV4aXN0cyA9IGluc3RhbmNlc09mQVYuc29tZShcbiAgICAgICAgICAoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSA9PT0gYXJlYVZpZGEuYXZcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQMSBTSVxuICAgICAgICBpZiAobm9kZUFWRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gICAgICAgICAgLy8gUHJlZ3VudGFyIEVsIG9iamV0aXZvIHkgZ3VhcmRhcmxvIGVuIGVsIG5vZG8gZGUgQVYuXG4gICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b1RyaW1lc3RyYWwodHJpbWVzdHJlLCBhcmVhVmlkYS5hdik7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMSAtIE5PIChub2RlQXJlYVZpZGEgbm8gRXhpc3RlKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBDYXNvIDMgeSA0XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgICAvL1AzIC0+IFNJXG4gICAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgICAgLy8gUDIgLi4gLT4gU2kgeSBOb1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b1RyaW1lc3RyYWwodHJpbWVzdHJlLCBhcmVhVmlkYS5hdik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBQTyAtPiBOTyAoTGEgQ2FycGV0YSBubyBleGlzdGUpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGFcdTAwRkFuIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gXG4gICAgICAgICk7XG4gICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAvLyBQMyAtPiBTSVxuICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgLy8gUDJcbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmUsIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgfVxuICAgICAgICAvLyBQMyAtPiBFc2NhcGVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEZpbiBGb3IgQXJlYXNWaWRhIGZpbGVDYW1wb3NcbiAgfSAvLyBNZXRvZG8gUHJvY2VzYXIgQ29tcGFzcyBUcmltZXN0cmFsIFxuXG5cbiAgYXN5bmMgb2JqZXRpdm9BbnVhbChhXHUwMEYxbzogYW55LCBhcmVhVmlkYTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQnVzY2FyIHNpIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhIGVzZSBhXHUwMEYxbyB5IGVzYSBhcmVhIGRlIHZpZGEuXG5cbiAgICBjb25zdCBmb2xkZXJPYmogPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl07XG4gICAgY29uc3QgZmlsZXNPYmogPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJPYmopICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgKTtcbiAgICBsZXQgb2JqQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc09iaikge1xuICAgICAgZGVidWdnZXI7XG4gICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcmVnZXggPSAvXFxbXFxbXFxzKiguKj8pXFxzKlxcXVxcXS87XG4gICAgICBsZXQgZmlsZUFWID0gbWV0YWRhdGE/LmFyZWFWaWRhLm1hdGNoKHJlZ2V4KVsxXTtcbiAgICAgIGNvbnN0IHNhbWVBViA9IGZpbGVBViA9PT0gYXJlYVZpZGE7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8uYVx1MDBGMW8gPT09IGFcdTAwRjFvICYmIHNhbWVBVikge1xuICAgICAgICBsZXQgb2JqQWN0aXZvID0geyBmaWxlIH07IC8vIEFzdW1pZW5kbyBxdWUgcXVpZXJlcyBndWFyZGFyIGVsIHBhdGggZGVsIGFyY2hpdm9cbiAgICAgICAgT2JqZWN0LmFzc2lnbihvYmpBY3Rpdm8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byBxQWN0aXZvXG4gICAgICAgIG9iakNyZWFkb3MucHVzaChvYmpBY3Rpdm8pOyAvLyBBXHUwMEYxYWRlIGVsIHJlZ2lzdHJvIGFjdGl2byBhbCBhcnJheVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcHJvbXB0ID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IG9iamV0aXZvcyA9IFtdO1xuICAgIGxldCBkZXNlYUFncmVnYXJPYmpldGl2bztcbiAgICBpZiAob2JqQ3JlYWRvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNpIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgICAgLy8gTG9naWNhIGN1YW5kbyB5YSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICBsZXQgbmV4dFN0ZXAgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgIFtcbiAgICAgICAgICBcIkFncmVnYXIgT2JqZXRpdm9zXCIsXG4gICAgICAgICAgXCJCb3JyYXIgeSBDcmVhciBkZSBudWV2byBsb3Mgb2JqZXRpdm9zXCIsXG4gICAgICAgICAgXCJEZWphciBsb3Mgb2JqZXRpdm9zIGNvbW8gZXN0XHUwMEUxbiBcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1widXBkXCIsIFwiZGVsK2NyZVwiLCBcImNvbnRpbnVlXCJdLFxuICAgICAgICB0cnVlLFxuICAgICAgICBgXHUwMEJGWWEgaGF5ICR7b2JqQ3JlYWRvcy5sZW5ndGh9IG9iamV0aXZvcyBjcmVhZG9zIHBhcmEgJHthcmVhVmlkYX0gZW4gZWwgJHthXHUwMEYxb30uIEVsaWdlIHVuYSBvcGNpXHUwMEYzbjpgXG4gICAgICApO1xuXG4gICAgICAgIHN3aXRjaCAobmV4dFN0ZXApIHtcbiAgICAgICAgICBjYXNlIFwidXBkXCI6XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pO1xuXG4gICAgICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJkZWwrY3JlXCI6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvcnJhck9iamV0aXZvcyhvYmpDcmVhZG9zKTtcbiAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2bykge1xuICAgICAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm8oYXJlYVZpZGEsIGFcdTAwRjFvKTtcbiAgICAgICAgICAgICAgLy8gQm9ycmFyIGxvcyBvYmpldGl2b3MgYW50ZXJpb3Jlcy5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImNvbnRpbnVlXCI6XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ29udGludWFyIHNpbiBoYWNlciBuYWRhIGNvbiBsb3Mgb2JqZXRpdm9zIGRlICR7YXJlYVZpZGF9YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gTm8gaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBkZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8uXG4gICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICk7XG4gICAgICAgIHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2bykge1xuICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pO1xuICAgICAgICAgIG9iamV0aXZvcy5wdXNoKFtvYmpldGl2b10pO1xuXG4gICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gIH0gLy8gTVx1MDBFOXRvZG8gb2JqZXRpdm9BbnVhbC5cbiAgXG4gIGFzeW5jIG9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmU6IGFueSwgYXJlYVZpZGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGRlYnVnZ2VyO1xuICAgIC8vIEJ1c2NhciBzaSB5YSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MgcGFyYSBlc2UgYVx1MDBGMW8geSBlc2EgYXJlYSBkZSB2aWRhLlxuXG4gICAgY29uc3QgZm9sZGVyT2JqID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfT2JqQ29tcGFzc0FudWFsXCJdO1xuICAgIGNvbnN0IGZpbGVzT2JqID0gYXBwLnZhdWx0XG4gICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyT2JqKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICk7XG4gICAgbGV0IG9iakNyZWFkb3MgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXNPYmopIHtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcW1xcW1xccyooLio/KVxccypcXF1cXF0vO1xuICAgICAgbGV0IGZpbGVBViA9IG1ldGFkYXRhPy5hcmVhVmlkYS5tYXRjaChyZWdleClbMV07XG4gICAgICBjb25zdCBzYW1lQVYgPSBmaWxlQVYgPT09IGFyZWFWaWRhO1xuXG4gICAgICBpZiAobWV0YWRhdGE/LnRyaW1lc3RyZT8ucGF0aCAmJiB0eXBlb2YgKG1ldGFkYXRhLnRyaW1lc3RyZS5wYXRoID09PSAnc3RyaW5nJykgJiYgIG1ldGFkYXRhLnRyaW1lc3RyZS5wYXRoLmluY2x1ZGVzKHRyaW1lc3RyZSkgJiYgc2FtZUFWKSB7XG4gICAgICAgIGxldCBvYmpBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKG9iakFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgb2JqQ3JlYWRvcy5wdXNoKG9iakFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBwcm9tcHQgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgb2JqZXRpdm9zID0gW107XG4gICAgbGV0IGRlc2VhQWdyZWdhck9iamV0aXZvO1xuICAgIGlmIChvYmpDcmVhZG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2kgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgICAvLyBMb2dpY2EgY3VhbmRvIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGxldCBuZXh0U3RlcCA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1xuICAgICAgICAgIFwiQWdyZWdhciBPYmpldGl2b3NcIixcbiAgICAgICAgICBcIkJvcnJhciB5IENyZWFyIGRlIG51ZXZvIGxvcyBvYmpldGl2b3NcIixcbiAgICAgICAgICBcIkRlamFyIGxvcyBvYmpldGl2b3MgY29tbyBlc3RcdTAwRTFuIFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXCJ1cGRcIiwgXCJkZWwrY3JlXCIsIFwiY29udGludWVcIl0sXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBcdTAwQkZZYSBoYXkgJHtvYmpDcmVhZG9zLmxlbmd0aH0gb2JqZXRpdm9zIGNyZWFkb3MgcGFyYSAke2FyZWFWaWRhfSBlbiBlbCAke3RyaW1lc3RyZX0uIEVsaWdlIHVuYSBvcGNpXHUwMEYzbjpgXG4gICAgICApO1xuXG4gICAgICAgIHN3aXRjaCAobmV4dFN0ZXApIHtcbiAgICAgICAgICBjYXNlIFwidXBkXCI6XG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2b1RyaW1lc3RyZShhcmVhVmlkYSwgdHJpbWVzdHJlKTtcblxuICAgICAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke3RyaW1lc3RyZX0/YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImRlbCtjcmVcIjpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9ycmFyT2JqZXRpdm9zKG9iakNyZWFkb3MpO1xuICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke3RyaW1lc3RyZX0/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2bykge1xuICAgICAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm9UcmltZXN0cmUoYXJlYVZpZGEsIHRyaW1lc3RyZSk7XG4gICAgICAgICAgICAgIC8vIEJvcnJhciBsb3Mgb2JqZXRpdm9zIGFudGVyaW9yZXMuXG4gICAgICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiY29udGludWVcIjpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDb250aW51YXIgc2luIGhhY2VyIG5hZGEgY29uIGxvcyBvYmpldGl2b3MgZGUgJHthcmVhVmlkYX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBObyBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2by5cbiAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICk7XG4gICAgICAgIHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2bykge1xuICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2b1RyaW1lc3RyZShhcmVhVmlkYSwgdHJpbWVzdHJlKTtcbiAgICAgICAgICBvYmpldGl2b3MucHVzaChbb2JqZXRpdm9dKTtcblxuICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke3RyaW1lc3RyZX0/YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfSAvLyBNXHUwMEU5dG9kbyBvYmpldGl2b1RyaW1lc3RyYWwuXG5cblxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1cdTAwRTl0b2RvIHF1ZSBjcmVhIGVsIGJvdFx1MDBGM24gcXVlIHNlIGFncmVnYSBlbiBsYSB0YWJsYSBkZSBwcm95ZWN0b3MgZW4gZWwgXG5Db21wYXNzIEFudWFsLCBwYXJhIGNyZWFyIGVsIHByb3llY3RvIGEgY2FkYSBPYmpldGl2by5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuICBjcmVhdGVCdXR0b25UYWJsZShkdiwgb2JqZXRpdm8pIHtcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBkdi5lbChcImRpdlwiLCBcIlwiKTtcbiAgICBjb25zdCBidXR0b24gPSBkdi5lbChcImJ1dHRvblwiLCBcIk51ZXZvIFByb3llY3RvXCIpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXJQcm95ZWN0b09iamV0aXZvKGR2LCBvYmpldGl2byk7XG4gICAgfSk7XG4gICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgcmV0dXJuIGJ1dHRvbkNvbnRhaW5lcjtcbn1cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gaW52b2NhZG8gcG9yIGVsIGJvdG9uIGRlIGxhIHRhYmxhIGRlbCBjb21wYXNzIGFudWFsIFwiTnVldm8gUHJveWVjdG9cIiBcbnBhcmEgY3JlYXIgcHJveWVjdG8gYSB1biBvYmpldGl2byBhbnVhbCBlc3RhYmxlY2lkby5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuYXN5bmMgY3JlYXJQcm95ZWN0b09iamV0aXZvKGR2LCBvYmpldGl2byl7XG4gIGRlYnVnZ2VyO1xuICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICBsZXQgdGlwb1Byb3llY3RvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgIFtcIlByb3llY3RvIEdURFwiLCBcIlByb3llY3RvIGRlIFFcIl0sXG4gICAgW3RydWUsIGZhbHNlXSxcbiAgICB0cnVlLFxuICAgIGBcdTAwQkZFbCBwcm95ZWN0byAke29iamV0aXZvLmZpbGUubmFtZX0gcmVxdWllcmUgdW4gUHJveWVjdG8gR1REIG8gUHJveWVjdG8gZGUgUT9gXG4gICk7XG4gIGxldCBwcm95ZWN0bztcbiAgaWYgKHRpcG9Qcm95ZWN0byl7XG4gICAgcHJveWVjdG8gPSB0aGlzLmNyZWFyUHJveWVjdG9HVEQob2JqZXRpdm8pOy8vIENyZWFyIFByb3llY3RvIEdURFxuICB9ZWxzZXtcbiAgICAvKiBcbiAgICBCdXNjYW5kbyBvcHRpbWl6YXIgZWwgdXNvIGRlbCBtXHUwMEU5dG9kbyBjcmVhciBwcm95ZWN0b1EsIFxuICAgIHZhbW9zIGEgY29uZmlybWFyIGVsIHRyaW1lc3RyZSBkZXNkZSBjcmVhclByb3llY3RvT2JqZXRpdm87IFxuICAgICovXG4gICAgZGVidWdnZXI7XG4gICAgY29uc3QgcmVnZXhUcmltID0gL1xcWz9cXFs/KFxcZHs0fS1RWzEtNF0pXFxdP1xcXT8vZztcbiAgICBjb25zdCB0cmltZXN0cmUgPSBvYmpldGl2by50cmltZXN0cmUucGF0aC5tYXRjaChyZWdleFRyaW0pO1xuXG4gICAgY29uc3QgY29uZmlybWFUcmltID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICB0cnVlLFxuICAgICAgYFx1MDBCRlZhbW9zIGEgY3JlYXIgZWwgcHJveWVjdG8gJHtvYmpldGl2by5maWxlLm5hbWV9IGVuIGVsIHRyaW1lc3RyZSAke3RyaW1lc3RyZX0/YFxuICAgICk7XG4gICBcbiAgICBpZiAoIWNvbmZpcm1hVHJpbSl7ICBcbiAgICAgIGNvbnN0IHEgPSBhd2FpdCB0aGlzLmVzdGFibGVjZXJUcmltZXN0cmUoXCJvYmpldGl2byBkZWwgYVx1MDBGMW9cIik7XG4gICAgICAvL29iamV0aXZvLnRyaW1lc3RyZS5wYXRoID0gcS50cmltZXN0cmU7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphcllBTUxzKHt0cmltZXN0cmU6IGBbWyR7cS50cmltZXN0cmV9XV1gfSwgb2JqZXRpdm8uZmlsZS5wYXRoKTtcbiAgICAgIH1cbiAgICBwcm95ZWN0byA9IGF3YWl0IHRoaXMuY3JlYXJQcm95ZWN0b1Eob2JqZXRpdm8pO1xuICB9XG59XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIHF1ZSBpbmljaWFsaXphIGxhIGNyZWFjaVx1MDBGM24gZGUgbGEgcGxhbnRpbGxhIGRlIG9iamV0aXZvIENvbXBhc3MuXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qLyBcbmFzeW5jIGNyZWFyT2JqZXRpdm8oYXJlYVZpZGEsIGFcdTAwRjFvKXtcbiAgZGVidWdnZXI7XG4gIGNvbnN0IHRlbXBsYXRlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfT2JqQ29tcGFzc0FudWFsXCJdfS9QbHQgLSBPYmpDb21wYXNzQW51YWwubWRgO1xuICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVQYXRoKTtcbiAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgXG4gIGxldCBmaWxlbmFtZSA9IGAke2FcdTAwRjFvfSAtIE9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX1gO1xuICBsZXQgb2JqZXRpdm8gPSBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcik7XG4gIHJldHVybiBvYmpldGl2bztcbn1cblxuYXN5bmMgY3JlYXJPYmpldGl2b1RyaW1lc3RyZShhcmVhVmlkYSwgdHJpbWVzdHJlKXtcbiAgZGVidWdnZXI7XG4gIGNvbnN0IHRlbXBsYXRlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfT2JqQ29tcGFzc0FudWFsXCJdfS9QbHQgLSBPYmpDb21wYXNzQW51YWwubWRgO1xuICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVQYXRoKTtcbiAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgXG4gIGxldCBmaWxlbmFtZSA9IGBUcmltZXN0cmUgJHt0cmltZXN0cmV9IC0gT2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfWA7XG4gIGxldCBvYmpldGl2byA9IGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKTtcbiAgcmV0dXJuIG9iamV0aXZvO1xufVxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBpbnZvY2FkbyBkZXNkZSBjcmVhclByb3llY3RvT2JqZXRpdm8oZHYsIG9iamV0aXZvKVxuRXN0XHUwMEU5IG1cdTAwRTl0b2RvIGhhY2UgcGFydGUgZGVsIHByb2Nlc28gZGUgQ29tcGFzcyBBbnVhbC5cbkZhY2lsaXRhIGxhIGNyZWFjaVx1MDBGM24gZGVsIHVuIHByb3llY3RvIGRlIFEgcGFyYSB1biBvYmpldGl2byBhbnVhbCBlc3RhYmxlY2lkby5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuYXN5bmMgY3JlYXJQcm95ZWN0b1Eob2JqZXRpdm8pe1xuICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9Qcm95ZWN0b3NRXCJdfS9QbHQgLSBQcm95ZWN0b3NRLm1kYDtcbiAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIFxuICBsZXQgZmlsZW5hbWUgPSBgUHJveWVjdG8gcGFyYSBPYmpldGl2byBDb21wYXNzIEFudWFsIC0gJHtvYmpldGl2by5pZH1gO1xuICBsZXQgcHJveWVjdG8gPSBhd2FpdCBjcmVhck5vdGEodGVtcGxhdGUsIGZpbGVuYW1lLCB0cnVlLCBmb2xkZXIpO1xuICByZXR1cm4gcHJveWVjdG87XG59XG5cbmFzeW5jIGNyZWFyUHJveWVjdG9HVEQob2JqZXRpdm8pe1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9Qcm95ZWN0b3NHVERcIl19L1BsdCAtIFByb3llY3Rvc0dURC5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYFByb3llY3RvIHBhcmEgT2JqZXRpdm8gQ29tcGFzcyBBbnVhbCAtICR7b2JqZXRpdm8uaWR9YDtcbiAgbGV0IHByb3llY3RvID0gYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcik7XG4gIHJldHVybiBwcm95ZWN0bztcbn1cblxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBpbnZvY2FkbyBlbiBlbCBwcm9jZXNvIGRlIENvbXBhc3MgQW51YWwsIGN1YW5kbyBlbGlqbyB2b2x2ZXJcbmEgY3JlYXIgdG9kb3MgbG9zIHByb3llY3RvcyBkZSB1biBhcmVhIGRlIHZpZGEgcGFyYSB1biBhXHUwMEYxby5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuYXN5bmMgYm9ycmFyT2JqZXRpdm9zKG9iamV0aXZvcyl7XG4gIGRlYnVnZ2VyO1xuICBmb3IgKGxldCBvYmpldGl2byBvZiBvYmpldGl2b3MpeyBcbiAgICB0cnkge1xuICAgICAgLy8gSW50ZW50YSBib3JyYXIgZWwgYXJjaGl2byBhY3R1YWwgZGVsIGFycmVnbG9cbiAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUob2JqZXRpdm8uZmlsZSk7XG4gICAgICBjb25zb2xlLmxvZyhgQXJjaGl2byBib3JyYWRvOiAke29iamV0aXZvLmZpbGUucGF0aH1gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBib3JyYXIgZWwgYXJjaGl2byAke29iamV0aXZvLmZpbGUucGF0aH06ICR7ZXJyb3J9YCk7XG4gICAgIH1cbiAgfVxuXG4gIH1cblxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBxdWUgcGVybWl0ZSBwYXJhIGN1YWxxdWllciBjYXNvIGVuIGVsIHF1ZSBzZSByZXF1aWVyYSBlbGVnaXIgXG51biB0cmltZXN0cmUgcGFyYSBjb250aW51YXIgdW4gcHJvY2VzbywgaGFjZXIgbGEgdmVyaWZpY2FjaVx1MDBGM24gc29icmUgbG9zXG50cmltZXN0cmVzIHF1ZSBlc3RlbiBjcmVhZG9zIGEgcGFydGlyIGRlIGxhIG5vdGEgVFEuICBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG4gIGFzeW5jIGVzdGFibGVjZXJUcmltZXN0cmUodGVtYVRyaW1lc3RyZSl7XG4gICAgLy8gT2J0ZW5lciBRcyBwYXJhIHByZWd1bnRhciBlbCBRIHBhcmEgZWwgcXVlIGRlc2VhIGNyZWFyIGxhcyBcdTAwRTFyZWFzIGRlIHZpZGEuXG4gICAgY29uc3QgZm9sZGVyUSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1RyaW1lc3RyYWxcIl07XG4gICAgY29uc3QgZmlsZXNRID0gYXBwLnZhdWx0XG4gICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyUSkgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBxQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc1EpIHtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8udHlwZSA9PT0gXCJUUVwiICYmIG1ldGFkYXRhPy50cmltZXN0cmUpIHtcbiAgICAgICAgbGV0IHFBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKHFBY3Rpdm8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byBxQWN0aXZvXG4gICAgICAgIHFDcmVhZG9zLnB1c2gocUFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICB0cnkge1xuICAgICAgbGV0IHEgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYi50cmltZXN0cmUpLFxuICAgICAgICBxQ3JlYWRvcy5tYXAoKGIpID0+IGIpLFxuICAgICAgICB0cnVlLFxuICAgICAgICBgRGUgcXVlIHRyaW1lc3RyZSB2YW1vcyBhIHByb2Nlc2FyIHR1cyAke3RlbWFUcmltZXN0cmV9YFxuICAgICAgKTtcbiAgXG4gICAgICAvLyBBcXVcdTAwRUQgYXN1bWltb3MgcXVlIHNpIHEgZXMgdW5kZWZpbmVkLCBlbCB1c3VhcmlvIGNhbmNlbFx1MDBGMyBsYSBvcGVyYWNpXHUwMEYzbi5cbiAgICAgIGlmIChxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIk9wZXJhY2lcdTAwRjNuIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgLy8gTWFuZWphIGVsIGVzY2FwZSBvIGNhbmNlbGFjaVx1MDBGM24gYXF1XHUwMEVELiBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIHNhbGlyIGRlIGxhIGZ1bmNpXHUwMEYzbiBhY3R1YWwgbyBoYWNlciBvdHJhIGNvc2EuXG4gICAgICAgICAgcmV0dXJuOyAvLyBTYWxlIGRlIGxhIGZ1bmNpXHUwMEYzbiBzaSBlbCB1c3VhcmlvIGNhbmNlbGEuXG4gICAgICB9XG4gIFxuICAgICAgLy8gQ29udGludWFyIGNvbiBsYSBsXHUwMEYzZ2ljYSBkZXNwdVx1MDBFOXMgZGUgcXVlIGVsIHVzdWFyaW8gaGEgc2VsZWNjaW9uYWRvIHVuYSBvcGNpXHUwMEYzblxuICAgICAgICBjb25zb2xlLmxvZyhcIkVsIHVzdWFyaW8gc2VsZWNjaW9uXHUwMEYzOlwiLCBxKTtcbiAgICAgICAgcmV0dXJuIHE7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBlbCBzdWdnZXN0ZXI6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgfVxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkNvbiBlc3RlIG1cdTAwRTl0b2RvIHB1ZWRvIGFjdHVhbGl6YXIgdmFsb3JlcyBlbiBsYXMgbm90YXMgeWEgZXhpc3RlbnRlcy5cbkxvIHV0aWxpem8gZW4gZXN0YSBjbGFzZSwgcGFyYSBhY3R1YWxpemFyIGVsIHRyaW1lc3RyZS5cbkVzdGEgZnVuY2lcdTAwRjNuIHNvbG8gYWN0dWFsaXphLCBubyBjcmVhIGVsIGNhbXBvcyBzaSBubyBleGlzdGUuIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cbiAgYXN5bmMgYWN0dWFsaXphcllBTUxzKGNhbXBvcywgcnV0YSkge1xuICAgICAgICBcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhKTtcbiAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBmcm9udG1hdHRlciA9PiB7XG4gICAgICAgICAgICAvLyBJdGVyYXIgc29icmUgY2FkYSBwcm9waWVkYWQgZGVsIG9iamV0byAnbm90YSdcbiAgICAgICAgICAgIGZvciAoY29uc3QgY2FtcG8gaW4gY2FtcG9zKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KGNhbXBvKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvIGVuIGVsIGZyb250bWF0dGVyIGNvbiBlbCB2YWxvciBjb3JyZXNwb25kaWVudGVcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJbY2FtcG9dID0gY2FtcG9zW2NhbXBvXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgIH1cbn1cblxufVxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGF0ZVRpbWUsIER1cmF0aW9uIH0gZnJvbSAnbHV4b24nO1xuaW1wb3J0IHsgcmVnaXN0cm9UaWVtcG9BUEkgfSBmcm9tIFwiLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJXCI7XG5cbmV4cG9ydCBjbGFzcyBWaXN0YVJlZ2lzdHJvRGlhcmlvIGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIGludGVydmFsSWQ6IG51bWJlcjtcbiBcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHB1YmxpYyBwbHVnaW46IGFueSkge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ2aXN0YS1yZWdpc3Ryby1kaWFyaW9cIjtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVnaXN0cm8gRGlhcmlvXCI7XG4gICAgfVxuXG4gICAgZ2V0SWNvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiZmlsZS1jbG9ja1wiOyAvLyBFc3RlIGVzIHVuIGVqZW1wbG8sIGNhbWJpYSBcImRvY3VtZW50b1wiIHBvciBlbCBub21icmUgZGVsIFx1MDBFRGNvbm8gcXVlIGRlc2VlcyB1c2FyXG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5zZXRUZXh0KFwiTm8gaGF5IHVuIGFyY2hpdm8gYWN0aXZvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGFjdGl2ZUZpbGUpOyAvLyBQdWVkZXMgdXNhciB0aGlzLmZpbGUgZGVudHJvIGRlIGFjdHVhbGl6YXJWaXN0YVxuICAgIFxuICAgICAgICAvL2F3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKCk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBpbm1lZGlhdGFtZW50ZSBhbCBhYnJpclxuXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YShhY3RpdmVGaWxlKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGNhZGEgMTAgc2VndW5kb3NcbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTsgLy8gTGltcGlhIGVsIGludGVydmFsbyBhbCBjZXJyYXIgbGEgdmlzdGFcbiAgICB9XG5cbiAgICBhc3luYyBhY3R1YWxpemFyVmlzdGEoYWN0aXZlRmlsZSkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyAvLyBMaW1waWEgZWwgY29udGVuaWRvIGV4aXN0ZW50ZSBhbnRlcyBkZSBhY3R1YWxpemFyXG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWNoYUhveSA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYWN0aXZlRmlsZS5iYXNlbmFtZS5zcGxpdChcIiBcIilbMF0sICd5eXl5LU1NLWRkJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikpO1xuXG4gICAgICAgIGxldCB0b3RhbERpYSA9IDA7XG4gICAgICAgIGxldCByZWdpc3Ryb3NIb3kgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICBsZXQgaG9yYUluaWNpbyA9IERhdGVUaW1lLmZyb21Gb3JtYXQobWV0YWRhdGEuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgICAgICAgICAgIGlmIChob3JhSW5pY2lvLnN0YXJ0T2YoJ2RheScpLnRzID09PSBmZWNoYUhveS5zdGFydE9mKCdkYXknKS50cykge1xuICAgICAgICAgICAgICAgICAgICByZWdpc3Ryb3NIb3kucHVzaCh7IHBhdGg6IGZpbGUucGF0aCwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhIH0pO1xuICAgICAgICAgICAgICAgICAgICB0b3RhbERpYSArPSBwYXJzZUludChtZXRhZGF0YS50aWVtcG9UcmFiYWphZG8gfHwgJzAnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3Ryb3NIb3kuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgbGV0IGZlY2hhQSA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYS5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudHM7XG4gICAgICAgICAgICBsZXQgZmVjaGFCID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChiLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50cztcbiAgICAgICAgICAgIHJldHVybiBmZWNoYUEgLSBmZWNoYUI7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0aXR1bG8gPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBSZWdpc3Ryb3MgZGUgdGllbXBvIGRlbCAke2ZlY2hhSG95LnRvRm9ybWF0KCdFRUVFLCBERCcpfS5gfSk7XG4gICAgICAgIHRpdHVsby5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFjaVx1MDBGM24gZGUgZWxlbWVudG9zIEhUTUwgZGlyZWN0YW1lbnRlXG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3RhYmxlJywgeyBjbHM6ICd0YWJsZS1yZXN1bWVuU2VtYW5hbCcgfSk7XG4gICAgICAgIGNvbnN0IHRoZWFkID0gdGFibGUuY3JlYXRlRWwoJ3RoZWFkJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IHRoZWFkLmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICBbJ1JlZ2lzdHJvJywgJ0Rlc2NyaXBjaVx1MDBGM24nLCAnUGVyaW9kbycsICdUaWVtcG8nLCAnRXN0YWRvJywgJ0lkJywgJ0FjY2lcdTAwRjNuJ10uZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICAgICAgaGVhZGVyUm93LmNyZWF0ZUVsKCd0aCcsIHsgdGV4dDogaGVhZGVyIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB0Ym9keSA9IHRhYmxlLmNyZWF0ZUVsKCd0Ym9keScpO1xuICAgICAgICByZWdpc3Ryb3NIb3kuZm9yRWFjaChyZWdpc3RybyA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSB0Ym9keS5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgIC8vIEFxdVx1MDBFRCByZWxsZW5hcyBsYXMgY2VsZGFzIGRlIGxhIGZpbGFcbiAgICAgICAgICAgIHRoaXMuZmlsbFJvd1dpdGhEYXRhKHJvdywgcmVnaXN0cm8pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgfVxuXG4gICAgZmlsbFJvd1dpdGhEYXRhKHJvdywgcmVnaXN0cm8pIHtcbiAgICAgICAgY29uc3QgdGRBcmNoaXZvID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICBjb25zdCBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmtFbC50ZXh0Q29udGVudCA9IHJlZ2lzdHJvLmZyb250bWF0dGVyLmFsaWFzZXNbMF07ICAvLyBVc2EgZWwgYWxpYXMgY29tbyB0ZXh0byBkZWwgZW5sYWNlXG4gICAgICAgIGxpbmtFbC5ocmVmID0gJyMnO1xuICAgICAgICBsaW5rRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZXYpID0+IHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IC8vIEV2aXRhIGxhIG5hdmVnYWNpXHUwMEYzbiBwcmVkZXRlcm1pbmFkYSBkZWwgZW5sYWNlXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJlZ2lzdHJvLnBhdGgpO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIC8vIEFicmUgZWwgYXJjaGl2byBlbiB1bmEgbnVldmEgaG9qYSBkZSBlc3BhY2lvIGRlIHRyYWJham9cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShmaWxlLCB7IGZvY3VzOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGRBcmNoaXZvLmFwcGVuZENoaWxkKGxpbmtFbCk7XG4gICAgICAgIFxuICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiByZWdpc3Ryby5mcm9udG1hdHRlci5kZXNjcmlwY2lvbiB9KTtcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogYCR7RGF0ZVRpbWUuZnJvbUZvcm1hdChyZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9Gb3JtYXQoJ2g6bW0gYScpfSAvICR7RGF0ZVRpbWUuZnJvbUZvcm1hdChyZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhRmluYWwsICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b0Zvcm1hdCgnaDptbSBhJyl9YH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYSB5IG11ZXN0cmEgZWwgdGllbXBvIGVuIGZvcm1hdG8gZGUgZFx1MDBFRGFzLCBob3JhcyB5IG1pbnV0b3NcbiAgICAgICAgY29uc3QgdGRQZXJpb2RvID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICBpZiAocmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhIGVsIHRpZW1wbyBkZXNkZSBhaG9yYSBoYXN0YSBsYSBob3JhIGRlIGluaWNpb1xuICAgICAgICAgICAgbGV0IGFob3JhID0gRGF0ZVRpbWUubG9jYWwoKTtcbiAgICAgICAgICAgIGxldCBpbmljaW8gPSBEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICAgICAgIGxldCBkdXJhY2lvbiA9IGFob3JhLmRpZmYoaW5pY2lvLCBbJ2RheXMnLCAnaG91cnMnLCAnbWludXRlcyddKTtcbiAgICAgICAgICAgIHRkUGVyaW9kby50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0RHVyYXRpb24oZHVyYWNpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTXVlc3RyYSBlbCB0aWVtcG8gdHJhYmFqYWRvIGVuIG1pbGlzZWd1bmRvcyBjb252ZXJ0aWRvIGEgZm9ybWF0byBsZWdpYmxlXG4gICAgICAgICAgICBsZXQgdGllbXBvVHJhYmFqYWRvID0gdGhpcy5mb3JtYXREdXJhdGlvbihyZWdpc3Ryby5mcm9udG1hdHRlci50aWVtcG9UcmFiYWphZG8pO1xuICAgICAgICAgICAgdGRQZXJpb2RvLnRleHRDb250ZW50ID0gdGllbXBvVHJhYmFqYWRvO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiByZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gfSk7XG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkIH0pO1xuXG4gICAgICAgIGNvbnN0IGFjdGlvbkNlbGwgPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIGFjdGlvbkNlbGwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnQ2VycmFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8ocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWN0aW9uQ2VsbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKCdSZXRvbWFyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmV0b21hclRhcmVhKHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBhdXhpbGlhciBwYXJhIGZvcm1hdGVhciBsYSBkdXJhY2lcdTAwRjNuIGRlIEx1eG9uIGEgdW4gZm9ybWF0byBsZWdpYmxlXG4gICAgZm9ybWF0RHVyYXRpb24obXMpIHtcbiAgICAgICAgICAgIGlmIChtcyA9PT0gbnVsbCB8fCBtcyA9PT0gdW5kZWZpbmVkIHx8IGlzTmFOKG1zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIk5vIGRlZmluaWRvXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnRpciBtaWxpc2VndW5kb3MgYSBtaW51dG9zLCBob3JhcyB5IGRcdTAwRURhc1xuICAgICAgICAgICAgICAgIGxldCBtaW51dG9zID0gTWF0aC5mbG9vcihtcyAvICgxMDAwICogNjApKTtcbiAgICAgICAgICAgICAgICBsZXQgaG9yYXMgPSBNYXRoLmZsb29yKG1pbnV0b3MgLyA2MCk7XG4gICAgICAgICAgICAgICAgbWludXRvcyA9IG1pbnV0b3MgJSA2MDsgLy8gUmVzdG8gZGUgbGEgZGl2aXNpXHUwMEYzbiBwYXJhIG9idGVuZXIgbG9zIG1pbnV0b3Mgc29icmFudGVzXG4gICAgICAgICAgICAgICAgbGV0IGRpYXMgPSBNYXRoLmZsb29yKGhvcmFzIC8gMjQpO1xuICAgICAgICAgICAgICAgIGhvcmFzID0gaG9yYXMgJSAyNDsgLy8gUmVzdG8gZGUgbGEgZGl2aXNpXHUwMEYzbiBwYXJhIG9idGVuZXIgbGFzIGhvcmFzIHNvYnJhbnRlc1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGb3JtYXRlYXIgZWwgc3RyaW5nIGRlIHNhbGlkYVxuICAgICAgICAgICAgICAgIGlmIChkaWFzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7ZGlhc30gZCAke2hvcmFzfSBoICR7bWludXRvc30gbWluYDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhvcmFzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7aG9yYXN9IGggJHttaW51dG9zfSBtaW5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHttaW51dG9zfSBtaW5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7XG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpO1xuXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tDYWxsYmFjayk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgcmV0b21hclRhcmVhKGlkKSB7IFxuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX1JlZ2lzdHJvVGllbXBvYF19L1BsdCAtIFJlZ2lzdHJvVGllbXBvLm1kYDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJSZXRvbWFyIFwiICsgaWQ7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIGxldCBjcmVhck5vdGEgPSB0cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKVxuICAgICAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICB9XG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9ICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLmZpbGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygndHAgY29uIHByb3BpZWRhZGVzIFwiZmlsZVwiIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgICAgIHJldHVybiB0cDtcbiAgICB9XG4gICAgXG5cblxuICAgIC8vIE9wY2lvbmFsOiBJbXBsZW1lbnRhIG9uQ2xvc2Ugc2kgbmVjZXNpdGFzIGxpbXBpZXphIGFsIGNlcnJhciBsYSB2aXN0YS5cbn0iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR1BUaG9yYSB7XG4gICAgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBvbmxvYWQoKSB7XG4gICAgICAgIHRoaXMuYXBwLmNvbW1hbmRzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdzaG93LWxvY2FsLXRpbWUnLFxuICAgICAgICAgICAgbmFtZTogJ01vc3RyYXIgSG9yYSBMb2NhbCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5zaG93TG9jYWxUaW1lTW9kYWwoKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzaG93TG9jYWxUaW1lTW9kYWwoKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IExvY2FsVGltZU1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cbn1cblxuY2xhc3MgTG9jYWxUaW1lTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBob3VycyA9IG5vdy5nZXRIb3VycygpICUgMTIgfHwgMTI7XG4gICAgICAgIGNvbnN0IG1pbnV0ZXMgPSBub3cuZ2V0TWludXRlcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgYW1wbSA9IG5vdy5nZXRIb3VycygpID49IDEyID8gJ1BNJyA6ICdBTSc7XG4gICAgICAgIGNvbnN0IHRpbWVTdHJpbmcgPSBgJHtob3Vyc306JHttaW51dGVzfSAke2FtcG19YDtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiAnSG9yYSBMb2NhbCcgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGltZVN0cmluZyB9KTtcblxuICAgICAgICAvLyBFc3RpbG8gZGVsIG1vZGFsXG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzJFMzQ0MCc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5jb2xvciA9ICcjRDhERUU5JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtEYXRlVGltZSAsIER1cmF0aW9ufSBmcm9tICdsdXhvbic7XG5cbmV4cG9ydCBjbGFzcyBsaWJyb3NBUEkge1xuICAgIC8vcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICAgIHByaXZhdGUgdHA6IG9iamVjdDtcbiAgICBwcml2YXRlIG5vdGE6IG9iamVjdDtcbiAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIEluaWNpYWxpemEgZm9sZGVyIGUgaW5kaWNlIGdldGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvcyBvIGxcdTAwRjNnaWNhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgdGhpcy50cCA9IHRoaXMucGx1Z2luLnRwO1xuICAgIH1cblxuICAgICAgYXN5bmMga2luZGxlKGR2KSB7XG4gICAgbGV0IGZvbGRlclByaW5jaXBhbCA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX0tpbmRsZU5vdGVzXCJdO1xuICAgIGNvbnN0IGxpYnJhcnlGb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclByaW5jaXBhbCk7XG5cbiAgICBpZiAoIShsaWJyYXJ5Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgIG5ldyBOb3RpY2UoYExhIGNhcnBldGEgJHtmb2xkZXJQcmluY2lwYWx9IG5vIGV4aXN0ZS5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgYXJjaGl2b0FjdGl2byA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYXJjaGl2b0FjdGl2bykge1xuICAgICAgbmV3IE5vdGljZShcIk5vIGhheSB1bmEgbm90YSBhY3RpdmEuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm9BY3Rpdm8pO1xuICAgIGNvbnN0IHlhbWxEYXRhID0gbWV0YWRhdGE/LmZyb250bWF0dGVyIHx8IHt9O1xuXG4gICAgaWYgKHlhbWxEYXRhLmtpbmRsZU5vdGUpIHtcbiAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICBsaW5rRWxlbWVudC5ocmVmID0geWFtbERhdGEua2luZGxlTm90ZTtcbiAgICAgIGxpbmtFbGVtZW50LnRleHRDb250ZW50ID0gXCJWZXIgZW4gS2luZGxlXCI7XG4gICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQobGlua0VsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNb3N0cmFyIHN1Z2dlc3RlciBwYXJhIGVsZWdpciBsYSBub3RhIEtpbmRsZSBjb3JyZXNwb25kaWVudGVcbiAgICAgIGNvbnN0IG5vdGVzTGlzdCA9IGF3YWl0IHRoaXMuZ2V0Tm90ZXNGcm9tRm9sZGVyKGZvbGRlclByaW5jaXBhbCk7XG5cbiAgICAgIGlmIChub3Rlc0xpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgbm90YXMgZW4gZWwgZm9sZGVyIGRlIEtpbmRsZS5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgc3VnZ2VzdG9yQ29uZmlnOiBTdWdnZXN0ZXJDb25maWc8VEZpbGU+ID0ge1xuICAgICAgICBvbkNob29zZUl0ZW06IGFzeW5jIChzZWxlY3RlZE5vdGUsIGV2dCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICAgIHlhbWxEYXRhLmtpbmRsZU5vdGUgPSBzZWxlY3RlZE5vdGUucGF0aDtcbiAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGFyY2hpdm9BY3Rpdm8sIGAtLS1cXG4ke3lhbWxEYXRhfVxcbi4uLmApO1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJTZSBoYSBndWFyZGFkbyBlbCBsaW5rIGRlIGxhIG5vdGEgS2luZGxlIGVuIGVsIGFyY2hpdm8gYWN0dWFsLlwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0SXRlbXM6ICgpID0+IG5vdGVzTGlzdCxcbiAgICAgICAgcmVuZGVyU3VnZ2VzdGlvbjogKGl0ZW06IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICBlbC50ZXh0Q29udGVudCA9IGl0ZW0uYmFzZW5hbWU7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIG5ldyBTdWdnZXN0ZXIodGhpcy5wbHVnaW4sIHN1Z2dlc3RvckNvbmZpZykuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuYXN5bmMgZ2V0Tm90ZXNGcm9tRm9sZGVyKGZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8VEZpbGVbXT4ge1xuICBjb25zdCBmb2xkZXJGaWxlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpO1xuICByZXR1cm4gZm9sZGVyRmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlclBhdGgpKTtcbn1cblxuXG5cbiAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgICAgIGFzeW5jIG1vc3RyYXJCb3RvbkNyZWFyTGlicm8oZHYpIHtcbiAgICAgICAgbGV0IGZvbGRlclByaW5jaXBhbCA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX0JpYmxpb3RlY2FcIl07XG4gICAgICAgIGNvbnN0IGxpYnJhcnlGb2xkZXIgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclByaW5jaXBhbCk7XG4gICAgXG4gICAgICAgIGlmICghKGxpYnJhcnlGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYExhIGNhcnBldGEgJHtmb2xkZXJQcmluY2lwYWx9IG5vIGV4aXN0ZS5gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgbGV0IGFyY2hpdm9BY3Rpdm8gPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhcmNoaXZvQWN0aXZvKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSB1bmEgbm90YSBhY3RpdmEuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBib29rRXhpc3RzID0gYXdhaXQgdGhpcy5ib29rRXhpc3RzSW5MaWJyYXJ5KGZvbGRlclByaW5jaXBhbCwgYXJjaGl2b0FjdGl2byk7XG4gICAgXG4gICAgICAgIGlmIChib29rRXhpc3RzKSB7XG4gICAgICAgICAgY29uc3QgYWxpYXMgPSBhd2FpdCB0aGlzLmdldEFsaWFzKGJvb2tFeGlzdHMpO1xuICAgICAgICAgIGNvbnN0IHRleHRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgIGxpbmsuaHJlZiA9IGJvb2tFeGlzdHMucGF0aDtcbiAgICAgICAgICBsaW5rLnRleHRDb250ZW50ID0gYWxpYXM7XG4gICAgICAgICAgbGluay5kYXRhc2V0LmhyZWYgPSBib29rRXhpc3RzLnBhdGg7XG4gICAgICAgICAgbGluay5jbGFzc05hbWUgPSBcImludGVybmFsLWxpbmtcIjtcbiAgICAgICAgICBcbiAgICAgICAgICB0ZXh0by50ZXh0Q29udGVudCA9IGBFbCBsaWJybyB5YSBlc3RcdTAwRTEgZW4gbGEgYmlibGlvdGVjYTogYDtcbiAgICAgICAgICB0ZXh0by5hcHBlbmRDaGlsZChsaW5rKTtcbiAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dG8pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICBcbiAgICAgICAgICBjb25zdCBib3RvbkNyZWFyTGlicm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAgIGJvdG9uQ3JlYXJMaWJyby50ZXh0Q29udGVudCA9IFwiSW5ncmVzYXIgYSBtaSBCaWJsaW90ZWNhXCI7XG4gICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uQ3JlYXJMaWJybyk7XG4gICAgXG4gICAgICAgICAgYm90b25DcmVhckxpYnJvLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmluZ3Jlc2FyTGlicm9CaWJsaW90ZWNhKCk7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBcbiAgICAgIGFzeW5jIGJvb2tFeGlzdHNJbkxpYnJhcnkoZm9sZGVyUHJpbmNpcGFsLCBhcmNoaXZvQWN0aXZvKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGVOYW1lID0gYXJjaGl2b0FjdGl2by5iYXNlbmFtZTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXJQcmluY2lwYWwpKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIgJiYgZnJvbnRtYXR0ZXIuYXN1bnRvKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGFzdW50byA9IGZyb250bWF0dGVyLmFzdW50bztcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXN1bnRvKSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGVudHJ5IG9mIGFzdW50bykge1xuICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmluY2x1ZGVzKGBbWyR7YWN0aXZlRmlsZU5hbWV9XV1gKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFzdW50byA9PT0gJ3N0cmluZycgJiYgYXN1bnRvLmluY2x1ZGVzKGBbWyR7YWN0aXZlRmlsZU5hbWV9XV1gKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgYXN5bmMgZ2V0QWxpYXMoZmlsZSkge1xuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIHJldHVybiBmcm9udG1hdHRlciAmJiBmcm9udG1hdHRlci5hbGlhc2VzICYmIGZyb250bWF0dGVyLmFsaWFzZXNbMF0gPyBmcm9udG1hdHRlci5hbGlhc2VzWzBdIDogZmlsZS5iYXNlbmFtZTtcbiAgICAgIH1cblxuXG5cblxuICBhc3luYyBpbmdyZXNhckxpYnJvQmlibGlvdGVjYSgpe1xuICAgIGRlYnVnZ2VyO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIlBsYW50aWxsYXMvU3Vic2lzdGVtYXMvTGlicm9zL0JpYmxpb3RlY2EvUGx0IC0gTGlicm8gYSBCaWJsaW90ZWNhLm1kXCIpOyAgLy9PYnRlbmVyIGVsIFRGaWxlIGRlbCB0ZW1wbGF0ZVxuICAgIGNvbnN0IGZpbGVuYW1lID0gXCJOdWV2byBMaWJyb1wiXG4gICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpXG4gICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICB9IGVsc2Uge1xuICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgfVxuICAgIGxldCBjcmVhck5vdGEgPSB0aGlzLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpO1xuICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbn1cblxuXG5cblxuIFxuXG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91cGRhdGVTZXNpb25MZWN0dXJhLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQzOjQ3XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVXBkYXRlU0wgfSBmcm9tICcuLi9JbnRlcmZhY2VzL1VwZGF0ZVNMJztcbmltcG9ydCB7IFlBTUxVcGRhdGVyQVBJIH0gZnJvbSAnLi4vLi4vbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJJ1xuaW1wb3J0IHtEYXRlVGltZX0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgdXBkYXRlU2VzaW9uTGVjdHVyYSBleHRlbmRzIFlBTUxVcGRhdGVyQVBJIGltcGxlbWVudHMgVXBkYXRlU0x7XG4gICAgcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJvdGVjdGVkIG5vdGE6IG9iamVjdDtcbiAgICBwcm90ZWN0ZWQgaW5mb1N1YnNpc3RlbWE6IGFueTsgXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICBzdXBlcihwbHVnaW4pO1xuICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICB0aGlzLnV0aWxzQXBpID0gbmV3IHV0aWxzQVBJKHBsdWdpbik7XG4gICAgICB0aGlzLnRwID0gcGx1Z2luLnRwO1xuICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICB0aGlzLmluZm9Ob3RhID0ge307XG4gICAgfVxuXG5cbiAgICAvL2FjdHVhbGl6YXJOb3RhKGluZm9Ob3RhOiBhbnksIGNhbXBvczogYW55KTogUHJvbWlzZTxhbnk+O1xuICAgIC8vZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIC8vZ2V0SG9yYUZpbmFsKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBcblxuICAgIC8vZ2V0VGllbXBvTGVpZG8oKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIFxuICAgIGFzeW5jIGdldFRpZW1wb0xlaWRvKHBhcmFtZXRybywgYWN0dWFsKXsgIFxuICAgICAgICBkZWJ1Z2dlcjsgICAgICBcbiAgICAgICAgbGV0IGhvcmFJbmljaW9TdHIgPSB0aGlzLmluZm9Ob3RhLmhvcmFJbmljaW87XG4gICAgICAgIGxldCBjaWVycmU7XG4gICAgICAgIC8vIFN1cG9uaWVuZG8gcXVlIGVsIGZvcm1hdG8gZXMgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIiB5IHF1aWVyZXMgY29udmVydGlybG8gYSB1biBmb3JtYXRvIHJlY29ub2NpZG8gcG9yIERhdGVcbiAgICAgICAgLy8gUHJpbWVybywgZWxpbWluYSBsYSBwYXJ0ZSBkZWwgZFx1MDBFRGEgZGUgbGEgc2VtYW5hLCB5YSBxdWUgRGF0ZSgpIG5vIGxhIG5lY2VzaXRhXG4gICAgICAgIGxldCBbZmVjaGEsICwgaG9yYV0gPSBob3JhSW5pY2lvU3RyLnNwbGl0KCcgJyk7XG4gICAgICAgIGxldCBmZWNoYUhvcmFJU08gPSBgJHtmZWNoYX1UJHtob3JhfWA7XG4gICAgICAgIC8vIENyZWFyIG9iamV0b3MgRGF0ZVxuICAgICAgICBsZXQgaG9yYUluaWNpbyA9IG5ldyBEYXRlKGZlY2hhSG9yYUlTTyk7XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT0gdW5kZWZpbmVkKXsgICAgXG4gICAgICAgIGNpZXJyZSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsZXQgW2ZlY2hhQ2llcnJlLCAsaG9yYUNpZXJyZV0gPSBwYXJhbWV0cm8uc3BsaXQoJyAnKTsgICBcbiAgICAgICAgICAgIGxldCBmZWNoYUhvcmFDaWVycmVJU08gPSBgJHtmZWNoYUNpZXJyZX1UJHtob3JhQ2llcnJlfWA7XG4gICAgICAgICAgICBjaWVycmUgPSBuZXcgRGF0ZShmZWNoYUhvcmFDaWVycmVJU08pO1xuICAgICAgICB9ICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXIgbGEgZGlmZXJlbmNpYSBlbiBtaWxpc2VndW5kb3NcbiAgICAgICAgbGV0IGRpZmVyZW5jaWFFbk1pbGlzZWd1bmRvcyA9IGNpZXJyZSAtIGhvcmFJbmljaW87XG4gICAgICAgIHJldHVybiBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3M7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RXN0YWRvKHBhcmFtZXRybywgYWN0dWFsKXtcbiAgICAgICAgbGV0IGNhbXBvO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7XG4gICAgICAgIC8vbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuXHQgICAgLy9jYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQ29tcGxldGFkbyAtIEluZm9ybWFjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdURGRTIgLT4gRmluYWxpemFkb1wiLFwiXHVEODNEXHVERkUxIC0+IEVuIGVqZWN1Y2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERDM0IC0+IERldGVuaWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgXCJTZWxlY2Npb25lIGVsIG51ZXZvIGVzdGFkbzpcIik7XG4gICAgICAgIGNhbXBvID0gXCJcdUQ4M0RcdUREMzVcIjtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjYW1wbyA9IHBhcmFtZXRybztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGNhbXBvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBQTSgpOiBQcm9taXNlPGFueT57XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgcGFsYWJyYXNQb3JIb2phID0gcGFyc2VJbnQodGhpcy5pbmZvTm90YS5wYWxhYnJhc1BvckhvamEpO1xuICAgICAgICBsZXQgcGFnaW5hc0xlaWRhcyA9IHBhcnNlSW50KHRoaXMubm90YS5wYWdMZWlkYXMpO1xuICAgICAgICBsZXQgdGllbXBvTGVpZG8gPSBwYXJzZUludCh0aGlzLm5vdGEudGllbXBvTGVpZG8pO1xuICAgICAgICBsZXQgUFBNID0gKHBhbGFicmFzUG9ySG9qYSAqIHBhZ2luYXNMZWlkYXMpLyh0aWVtcG9MZWlkby82MDAwMCk7XG4gICAgICAgIHJldHVybiBQUE07XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGFnTGVpZGFzKCk6IFByb21pc2U8YW55PntcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBwYWdGaW4gPSBwYXJzZUludCh0aGlzLm5vdGEucGFnRmluKTtcblx0ICAgICBsZXQgcGFnaW5hc0xlaWRhcyA9IHBhZ0ZpbiAtIHBhcnNlSW50KHRoaXMuaW5mb05vdGEucGFnSW5pY2lvKTtcbiAgICAgICAgIC8vdGhpcy5ub3RhLnBhZ0xlaWRhcyA9IHBhcnNlSW50KHBhZ2luYXNMZWlkYXMpO1xuICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBhZ2luYXNMZWlkYXMpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBhZ0ZpbigpOiBQcm9taXNlPGFueT57XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGxldCBwYWdGaW4gPSBhd2FpdCBwcm9tcHQoYFx1MDBCRkhhc3RhIHF1ZSBwXHUwMEUxZ2luYSBsZVx1MDBFRHN0ZT9gLCBgJHt0aGlzLmluZm9Ob3RhLnBhZ0luaWNpb31gLCB0cnVlKVxuICAgICAgICAvL3RoaXMubm90YS5wYWdGaW4gPSBwYXJzZUludChwYWdGaW4pXG4gICAgICAgIHJldHVybiBwYXJzZUludChwYWdGaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBvckxlZXIoKTogUHJvbWlzZTxudW1iZXI+e1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IHBvckxlZXIgPSBwYXJzZUludCh0aGlzLmluZm9Ob3RhLnBhZ2luYXMpIC0gcGFyc2VJbnQodGhpcy5ub3RhLnBhZ0Zpbik7XG4gICAgICAgIC8vdGhpcy5ub3RhLnBvckxlZXIgPSBwb3JMZWVyO1xuICAgICAgICByZXR1cm4gcG9yTGVlcjtcbiAgICB9XG5cbn0iLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvYXBpL3RhcmVhc0FQSS50c1xuXG5pbXBvcnQgeyBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuaW1wb3J0IHsgVGFzaywgRXN0YWRvVGFyZWEgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Rhc2tJbnRlcmZhY2VzJztcbmltcG9ydCB7IFRhc2tVdGlscyB9IGZyb20gJy4uL3V0aWxzL3Rhc2tVdGlscyc7XG5pbXBvcnQgeyBUYXNrV2VpZ2h0Q2FsY3VsYXRvciB9IGZyb20gJy4uL3V0aWxzL3Rhc2tXZWlnaHRDYWxjdWxhdG9yJztcblxuZXhwb3J0IGNsYXNzIFRhcmVhc0FQSSB7XG4gICAgcHJpdmF0ZSB0YXNrVXRpbHM6IFRhc2tVdGlscztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBNeVBsdWdpbikge1xuICAgICAgICB0aGlzLnRhc2tVdGlscyA9IG5ldyBUYXNrVXRpbHMocGx1Z2luKTtcbiAgICAgICAgVGFza1dlaWdodENhbGN1bGF0b3Iuc2V0VGFza1V0aWxzKHRoaXMudGFza1V0aWxzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlYmVFeGNsdWlyQXJjaGl2byhmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBFeGNsdWlyIGxhIGNhcnBldGEgUGxhbnRpbGxhcyB5IHN1cyBzdWJjYXJwZXRhc1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJ1BsYW50aWxsYXMvJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXhjbHVpciBsYSBjYXJwZXRhIGRlbCBzaXN0ZW1hIEdURCB5IHN1cyBzdWJjYXJwZXRhc1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L2ApKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4Y2x1aXIgY2FycGV0YSBkZSBhcmNoaXZvcyAoc2kgZXhpc3RlKVxuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJ0FyY2hpdm8vJykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2VzYXJUYXJlYXMoXG4gICAgICAgIGZpbGVzOiBURmlsZVtdLCBcbiAgICAgICAgZmlsdHJvOiAodGFzazogVGFzaykgPT4gYm9vbGVhbiB8IFByb21pc2U8Ym9vbGVhbj4sXG4gICAgICAgIGJ1c2NhckVuRWplY3VjaW9uOiBib29sZWFuID0gZmFsc2VcbiAgICApOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICBjb25zdCB0YXJlYXM6IFRhc2tbXSA9IFtdO1xuICAgICAgICBjb25zdCBlcnJvcmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzUGFyYVByb2Nlc2FyID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gIXRoaXMuZGViZUV4Y2x1aXJBcmNoaXZvKGZpbGUpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXG49PT0gSU5JQ0lBTkRPIFBST0NFU0FNSUVOVE8gREUgVEFSRUFTID09PWApO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFByb2Nlc2FuZG8gJHtmaWxlc1BhcmFQcm9jZXNhci5sZW5ndGh9IGFyY2hpdm9zIGRlICR7ZmlsZXMubGVuZ3RofSB0b3RhbGVzYCk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1BhcmFQcm9jZXNhcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXR1bG9Ob3RhID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lclRpdHVsb05vdGEoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFxcblByb2Nlc2FuZG8gYXJjaGl2bzogJHtmaWxlLnBhdGh9YCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lYSBvZiBsaW5lYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERldGVjdGFyIGVsIHRpcG8gZGUgdGFyZWEgYmFzYWRvIGVuIGVsIGNoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc0VuRWplY3VjaW9uID0gbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gWy9dJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc0FiaWVydGEgPSBsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbIF0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzQ29tcGxldGFkYSA9IGxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFt4XScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTYWx0YXIgbFx1MDBFRG5lYXMgcXVlIG5vIHNvbiB0YXJlYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gWycpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW1wbGVtZW50YXIgbFx1MDBGM2dpY2Egc2VwYXJhZGEgcGFyYSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidXNjYXJFbkVqZWN1Y2lvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXNFbkVqZWN1Y2lvbikgY29udGludWU7IC8vIFNvbG8gcHJvY2VzYXIgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBhcmEgb3RyYXMgYlx1MDBGQXNxdWVkYXMsIGlnbm9yYXIgdGFyZWFzIGNvbXBsZXRhZGFzIHkgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXNDb21wbGV0YWRhIHx8IGVzRW5FamVjdWNpb24pIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXNBYmllcnRhKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFlciBlbCB0ZXh0byBsaW1waW8gZGUgbGEgdGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTGltcGlvID0gdGhpcy50YXNrVXRpbHMubGltcGlhclRleHRvVGFyZWEobGluZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9PcmlnaW5hbCA9IGxpbmVhLnRyaW0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFlciBtZXRhZGF0b3NcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhc1lIb3JhcyA9IHRoaXMudGFza1V0aWxzLmV4dHJhZXJGZWNoYXNZSG9yYXMobGluZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXRpcXVldGFzRXh0cmFpZGFzID0gdGhpcy50YXNrVXRpbHMuZXh0cmFlckV0aXF1ZXRhcyhsaW5lYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldGlxdWV0YXNDYXRlZ29yaXphZGFzID0gdGhpcy50YXNrVXRpbHMuY2F0ZWdvcml6YXJFdGlxdWV0YXMoZXRpcXVldGFzRXh0cmFpZGFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgdGFza0lkLCBkZXBlbmRlbmN5SWQgfSA9IHRoaXMudGFza1V0aWxzLmV4dHJhZXJEZXBlbmRlbmNpYXNZSWRzKGxpbmVhKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXIgb2JqZXRvIGRlIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJlYTogVGFzayA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0bzogdGV4dG9MaW1waW8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dG9PcmlnaW5hbDogdGV4dG9PcmlnaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydXRhQXJjaGl2bzogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZUFyY2hpdm86IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvOiB0aXR1bG9Ob3RhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVzdGFkbzogZXNFbkVqZWN1Y2lvbiA/IEVzdGFkb1RhcmVhLkVuRWplY3VjaW9uIDogRXN0YWRvVGFyZWEuQWJpZXJ0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5mZWNoYXNZSG9yYXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXRpcXVldGFzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZGFzOiBldGlxdWV0YXNFeHRyYWlkYXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmV0aXF1ZXRhc0NhdGVnb3JpemFkYXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBlbmRlbmN5SWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGN1bGFyIHBlc28geSB2ZXJpZmljYXIgZGVwZW5kZW5jaWFzXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS53ZWlnaHQgPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5jYWxjdWxhdGVXZWlnaHQodGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlcGVuZGVuY3lJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFkb0RlcGVuZGVuY2lhID0gYXdhaXQgdGhpcy50YXNrVXRpbHMudmVyaWZpY2FyRXN0YWRvVGFyZWEoZGVwZW5kZW5jeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5pc0Jsb2NrZWQgPSAhZXN0YWRvRGVwZW5kZW5jaWEuY29tcGxldGFkYTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5kZXBlbmRlbmN5TG9jYXRpb24gPSBlc3RhZG9EZXBlbmRlbmNpYS5ydXRhQXJjaGl2bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5kZXBlbmRlbmN5VGl0bGUgPSBlc3RhZG9EZXBlbmRlbmNpYS50aXR1bG9BcmNoaXZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmRlcGVuZGVuY3lUZXh0byA9IGVzdGFkb0RlcGVuZGVuY2lhLnRleHRvVGFyZWE7IC8vIEFncmVnYXIgZWwgdGV4dG8gZGUgbGEgdGFyZWEgZGVwZW5kaWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBsaWNhciBmaWx0cm9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1bXBsZUZpbHRybyA9IGF3YWl0IFByb21pc2UucmVzb2x2ZShmaWx0cm8odGFyZWEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdW1wbGVGaWx0cm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgLT4gVGFyZWEgYWdyZWdhZGE6ICR7dGV4dG9MaW1waW8uc3Vic3RyaW5nKDAsIDUwKX0uLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYXMucHVzaCh0YXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChmaWxlRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3Jlcy5wdXNoKGBFcnJvciBwcm9jZXNhbmRvIGFyY2hpdm8gJHtmaWxlLnBhdGh9OiAke2ZpbGVFcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBlbiBhcmNoaXZvICR7ZmlsZS5wYXRofTpgLCBmaWxlRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdlbmVyYWwgcHJvY2VzYW5kbyB0YXJlYXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgcHJvY2VzYW5kbyB0YXJlYXMuIFJldmlzYSBsYSBjb25zb2xhIHBhcmEgbVx1MDBFMXMgZGV0YWxsZXMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXJyb3Jlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1xcbkVycm9yZXMgZW5jb250cmFkb3MgZHVyYW50ZSBlbCBwcm9jZXNhbWllbnRvOicsIGVycm9yZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coYFxcbj09PSBQUk9DRVNBTUlFTlRPIENPTVBMRVRBRE8gPT09YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUb3RhbCBkZSB0YXJlYXMgZW5jb250cmFkYXM6ICR7dGFyZWFzLmxlbmd0aH1gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9yZGVuYXIgbGFzIHRhcmVhcyBzZWdcdTAwRkFuIGNvcnJlc3BvbmRhXG4gICAgICAgIHJldHVybiBidXNjYXJFbkVqZWN1Y2lvbiA/IFxuICAgICAgICAgICAgdGhpcy5vcmdhbml6YXJUYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXMpIDogXG4gICAgICAgICAgICBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zb3J0VGFza3ModGFyZWFzKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICBub21icmVBcmNoaXZvOiBzdHJpbmcsIFxuICAgICAgICBjb250ZW5pZG86IHN0cmluZ1xuICAgICk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBleGlzdGUgbGEgY2FycGV0YSBkZWwgc2lzdGVtYSBHVERcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJwZXRhR1REID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVERcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICghY2FycGV0YUdURCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVERcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zdCBhcmNoaXZvRXhpc3RlbnRlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub21icmVBcmNoaXZvKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYXJjaGl2b0V4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoYXJjaGl2b0V4aXN0ZW50ZSwgY29udGVuaWRvKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoYXJjaGl2b0V4aXN0ZW50ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVldm9BcmNoaXZvID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZShub21icmVBcmNoaXZvLCBjb250ZW5pZG8pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShudWV2b0FyY2hpdm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBndWFyZGFyL2FicmlyIGFyY2hpdm86XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kb3MgcHJpbmNpcGFsZXMgZGUgYlx1MDBGQXNxdWVkYSBkZSB0YXJlYXNcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcygpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNob3VsZEluY2x1ZGVUYXNrKHRhcmVhLCAndmVuY2lkYXMnLCB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNIb3koKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zaG91bGRJbmNsdWRlVGFzayh0YXJlYSwgJ2hveScsIHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1Byb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4gVGFza1dlaWdodENhbGN1bGF0b3Iuc2hvdWxkSW5jbHVkZVRhc2sodGFyZWEsICdwcm94aW1hcycsIHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1N0YXJ0VmVuY2lkYXMoKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zaG91bGRJbmNsdWRlVGFzayh0YXJlYSwgJ3N0YXJ0X3ZlbmNpZGFzJywgdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzU3RhcnRQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBjb25zdCBsaW1pdGVGdXR1cm8gPSBuZXcgRGF0ZShob3kpO1xuICAgICAgICBsaW1pdGVGdXR1cm8uc2V0RGF0ZShsaW1pdGVGdXR1cm8uZ2V0RGF0ZSgpICsgZGlhc1Byb3hpbW9zKTtcblxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmZlY2hhU3RhcnQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVN0YXJ0ID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFTdGFydCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhU3RhcnQgJiYgZmVjaGFTdGFydCA8PSBsaW1pdGVGdXR1cm8gJiYgZmVjaGFTdGFydCA+PSBob3k7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG9zIGRlIHJlbmRlcml6YWRvIHkgdmlzdWFsaXphY2lcdTAwRjNuXG4gICAgcHJpdmF0ZSBnZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKG1ldG9kbzogc3RyaW5nLCBwYXJhbWV0cm9zPzogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBcXGBcXGBcXGBkYXRhdmlld2pzXG5jb25zdCBncCA9IGFwcC5wbHVnaW5zLnBsdWdpbnNbJ29ic2lkaWFuLXBlcnNvbmFsLW1hbmFnZW1lbnQnXTtcbmlmICghZ3ApIHtcbiAgICBkdi5wYXJhZ3JhcGgoXCJcdTI2QTBcdUZFMEYgUGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbCBubyBlbmNvbnRyYWRvXCIpO1xuICAgIHJldHVybjtcbn1cblxuY29uc3QgYnRuID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHt0ZXh0OiAnXHVEODNEXHVERDA0IEFjdHVhbGl6YXIgVmlzdGEnfSk7XG5idG4uc3R5bGUuY3NzVGV4dCA9ICdwYWRkaW5nOiA1cHggMTVweDsgYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZTsgY29sb3I6ICNmZmZmZmY7IGJvcmRlcjogMXB4IHNvbGlkICM0YTRhNGE7IGJvcmRlci1yYWRpdXM6IDRweDsgY3Vyc29yOiBwb2ludGVyOyBtYXJnaW4tYm90dG9tOiAxMHB4Oyc7XG5cbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4gYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMmUyZTJlJyk7XG5idG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzFlMWUxZScpO1xuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IE5vdGljZSgnQWN0dWFsaXphbmRvIHZpc3RhLi4uJyk7XG4gICAgICAgIGF3YWl0IGdwLnRhcmVhc0FQSS4ke21ldG9kb30oJHtwYXJhbWV0cm9zIHx8ICcnfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBhbCBhY3R1YWxpemFyIHRhcmVhcycpO1xuICAgIH1cbn0pO1xuXFxgXFxgXFxgXFxuXFxuYDtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kb3MgcFx1MDBGQWJsaWNvcyBkZSB2aXN1YWxpemFjaVx1MDBGM24gY29ycmVzcG9uZGllbnRlcyBhIGxvcyBjb21hbmRvc1xuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzVmVuY2lkYXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1ZlbmNpZGFzQWJpZXJ0YXMoKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyB2ZW5jaWRhcyBhYmllcnRhcy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIFZlbmNpZGFzXCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzVmVuY2lkYXNcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIFZlbmNpZGFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyB2ZW5jaWRhc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNWZW5jaWRhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzUHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1Byb3hpbWFzKGRpYXNQcm94aW1vcyk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgcHJcdTAwRjN4aW1hcy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIFByXHUwMEYzeGltYXNcIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNQcm94aW1hc1wiLFxuICAgICAgICAgICAgICAgIGRpYXNQcm94aW1vc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIFByXHUwMEYzeGltYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHByXHUwMEYzeGltYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzUHJveGltYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc0hveSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzSG95KCk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBob3kuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBwYXJhIEhveVwiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc0hveVwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgcGFyYSBIb3kubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHBhcmEgaG95YCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0hveTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzU3RhcnRWZW5jaWRhcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzU3RhcnRWZW5jaWRhcygpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIGNvbiBpbmljaW8gdmVuY2lkby4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIGNvbiBJbmljaW8gVmVuY2lkb1wiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1N0YXJ0VmVuY2lkYXNcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIGNvbiBJbmljaW8gVmVuY2lkby5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgY29uIGluaWNpbyB2ZW5jaWRvYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1N0YXJ0VmVuY2lkYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1N0YXJ0UHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1N0YXJ0UHJveGltYXMoZGlhc1Byb3hpbW9zKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBwb3IgaW5pY2lhciBlbiBlbCBwZXJcdTAwRURvZG8gZXNwZWNpZmljYWRvLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgcG9yIEluaWNpYXJcIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNTdGFydFByb3hpbWFzXCIsXG4gICAgICAgICAgICAgICAgZGlhc1Byb3hpbW9zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgcG9yIEluaWNpYXIubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHBvciBpbmljaWFyYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1N0YXJ0UHJveGltYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kb3MgZGUgdXRpbGlkYWQgcHJpdmFkb3NcbiAgICBwcml2YXRlIHRpZW5lRmVjaGFzVmFsaWRhcyhmZWNoYXNZSG9yYXM6IGFueSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB7IGZlY2hhVmVuY2ltaWVudG8sIGZlY2hhU2NoZWR1bGVkLCBmZWNoYVN0YXJ0IH0gPSBmZWNoYXNZSG9yYXM7XG4gICAgICAgIHJldHVybiBmZWNoYVZlbmNpbWllbnRvIHx8IGZlY2hhU2NoZWR1bGVkIHx8IGZlY2hhU3RhcnQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgdGFyZWFzOiBUYXNrW10sXG4gICAgICAgIHRpdHVsbzogc3RyaW5nLFxuICAgICAgICBtZXRvZG9BY3R1YWxpemFjaW9uOiBzdHJpbmcsXG4gICAgICAgIGRpYXNQcm94aW1vcz86IG51bWJlclxuICAgICk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyAke3RpdHVsb31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihtZXRvZG9BY3R1YWxpemFjaW9uLCBkaWFzUHJveGltb3MpO1xuICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICBpZiAoZGlhc1Byb3hpbW9zKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gTW9zdHJhbmRvIHRhcmVhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zICR7ZGlhc1Byb3hpbW9zfSBkXHUwMEVEYXNcXG5gO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgZW5jb250cmFkYXM6ICR7dGFyZWFzLmxlbmd0aH1cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhc0FncnVwYWRhcyh0YXJlYXMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYXNBZ3J1cGFkYXModGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0YXJlYXNQb3JBcmNoaXZvID0gdGhpcy5hZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXMpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gJyc7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFtydXRhQXJjaGl2bywgaW5mb10gb2YgT2JqZWN0LmVudHJpZXModGFyZWFzUG9yQXJjaGl2bykpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMjIFtbJHtydXRhQXJjaGl2b318JHtpbmZvLnRpdHVsb31dXVxcblxcbmA7XG4gICAgICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWEodGFyZWEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICBcbiAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYSh0YXJlYTogVGFzayk6IHN0cmluZyB7XG4gICAgbGV0IGNvbnRlbmlkbyA9IGAtIFsgXSAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgXG4gICAgLy8gQWdydXBhciBsYXMgZmVjaGFzIHBhcmEgbWVqb3IgdmlzdWFsaXphY2lcdTAwRjNuXG4gICAgY29uc3QgZmVjaGFzID0gW107XG4gICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9YCk7XG4gICAgfVxuICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICBmZWNoYXMucHVzaChgXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9YCk7XG4gICAgfVxuICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9YCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChmZWNoYXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIEZlY2hhczpcXG4gICAgICAgICR7ZmVjaGFzLmpvaW4oJ1xcbiAgICAgICAgJyl9XFxuYDtcbiAgICB9XG5cbiAgICAgICAgLy8gSG9yYXJpb3NcbiAgICAgICAgaWYgKHRhcmVhLmhvcmFJbmljaW8gfHwgdGFyZWEuaG9yYUZpbikge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjAgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV0aXF1ZXRhc1xuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdUREQzJcdUZFMEYgQ29udGV4dG9zOiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REM2NCA6ICR7dGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy50b2RvaXN0Py5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENGMiA6ICR7dGFyZWEuZXRpcXVldGFzLnRvZG9pc3Quam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5vdHJhcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0NcdURGRjdcdUZFMEYgT3RyYXM6ICR7dGFyZWEuZXRpcXVldGFzLm90cmFzLmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJpb3JpZGFkXG4gICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IHRoaXMub2J0ZW5lclByaW9yaWRhZFRhcmVhKHRhcmVhLnRleHRvKTtcbiAgICAgICAgaWYgKHByaW9yaWRhZCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSAke3ByaW9yaWRhZC5lbW9qaX0gUHJpb3JpZGFkOiAke3ByaW9yaWRhZC5ub21icmV9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvYnRlbmVyUHJpb3JpZGFkVGFyZWEodGV4dG86IHN0cmluZyk6IHsgZW1vamk6IHN0cmluZzsgbm9tYnJlOiBzdHJpbmcgfSB8IG51bGwge1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQScpKSByZXR1cm4geyBlbW9qaTogJ1x1RDgzRFx1REQzQScsIG5vbWJyZTogJ011eSBBbHRhJyB9O1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQicpKSByZXR1cm4geyBlbW9qaTogJ1x1MjNFQicsIG5vbWJyZTogJ0FsdGEnIH07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNDJykpIHJldHVybiB7IGVtb2ppOiAnXHVEODNEXHVERDNDJywgbm9tYnJlOiAnTWVkaWEnIH07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNEJykpIHJldHVybiB7IGVtb2ppOiAnXHVEODNEXHVERDNEJywgbm9tYnJlOiAnQmFqYScgfTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUMnKSkgcmV0dXJuIHsgZW1vamk6ICdcdTIzRUMnLCBub21icmU6ICdNdXkgQmFqYScgfTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXM6IFRhc2tbXSk6IHsgW2tleTogc3RyaW5nXTogeyB0aXR1bG86IHN0cmluZzsgdGFyZWFzOiBUYXNrW10gfSB9IHtcbiAgICAgICAgcmV0dXJuIHRhcmVhcy5yZWR1Y2UoKGFjYywgdGFyZWEpID0+IHtcbiAgICAgICAgICAgIGlmICghYWNjW3RhcmVhLnJ1dGFBcmNoaXZvXSkge1xuICAgICAgICAgICAgICAgIGFjY1t0YXJlYS5ydXRhQXJjaGl2b10gPSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbzogdGFyZWEudGl0dWxvLFxuICAgICAgICAgICAgICAgICAgICB0YXJlYXM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjY1t0YXJlYS5ydXRhQXJjaGl2b10udGFyZWFzLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30gYXMgeyBba2V5OiBzdHJpbmddOiB7IHRpdHVsbzogc3RyaW5nOyB0YXJlYXM6IFRhc2tbXSB9IH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byhmZWNoYTogc3RyaW5nLCB0aXBvOiAnZHVlJyB8ICdzY2hlZHVsZWQnIHwgJ3N0YXJ0Jyk6IHN0cmluZyB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmZWNoYU9iaiA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhKTtcbiAgICAgICAgICAgIGlmICghZmVjaGFPYmopIHJldHVybiBmZWNoYTtcblxuICAgICAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmVyZW5jaWFEaWFzID0gTWF0aC5jZWlsKFxuICAgICAgICAgICAgICAgIChmZWNoYU9iai5nZXRUaW1lKCkgLSBob3kuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbGV0IHRleHRvQmFzZSA9ICcnO1xuICAgICAgICAgICAgc3dpdGNoICh0aXBvKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnZHVlJzpcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9CYXNlID0gZGlmZXJlbmNpYURpYXMgPCAwID8gJ1ZlbmNpXHUwMEYzJyA6ICdWZW5jZSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NjaGVkdWxlZCc6XG4gICAgICAgICAgICAgICAgICAgIHRleHRvQmFzZSA9ICdQcm9ncmFtYWRhJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgICAgICAgICB0ZXh0b0Jhc2UgPSBkaWZlcmVuY2lhRGlhcyA8IDAgPyAnRGViaVx1MDBGMyBpbmljaWFyJyA6ICdJbmljaWEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNvbnRleHRvID0gJyc7XG4gICAgICAgICAgICBpZiAoZGlmZXJlbmNpYURpYXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0byA9ICdob3knO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZlcmVuY2lhRGlhcyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvID0gJ21hXHUwMEYxYW5hJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZXJlbmNpYURpYXMgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dG8gPSAnYXllcic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmVyZW5jaWFEaWFzIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvID0gYGhhY2UgJHtNYXRoLmFicyhkaWZlcmVuY2lhRGlhcyl9IGRcdTAwRURhc2A7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvID0gYGVuICR7ZGlmZXJlbmNpYURpYXN9IGRcdTAwRURhc2A7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBgJHt0ZXh0b0Jhc2V9ICR7ZmVjaGF9ICgke2NvbnRleHRvfSlgO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZm9ybWF0ZWFuZG8gZmVjaGE6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZlY2hhO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQVx1MDBGMWFkaXIgbnVldm8gbVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIHRhcmVhcyBmdXR1cmFzXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc0Z1dHVyYXMoZGlhc0Z1dHVyb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgY29uc3QgbGltaXRlRnV0dXJvID0gbmV3IERhdGUoaG95KTtcbiAgICBsaW1pdGVGdXR1cm8uc2V0RGF0ZShsaW1pdGVGdXR1cm8uZ2V0RGF0ZSgpICsgZGlhc0Z1dHVyb3MpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFzUmVsZXZhbnRlcyA9IFtcbiAgICAgICAgICAgICAgICB0YXJlYS5mZWNoYVZlbmNpbWllbnRvLFxuICAgICAgICAgICAgICAgIHRhcmVhLmZlY2hhU2NoZWR1bGVkLFxuICAgICAgICAgICAgICAgIHRhcmVhLmZlY2hhU3RhcnRcbiAgICAgICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgICAgICAgICByZXR1cm4gZmVjaGFzUmVsZXZhbnRlcy5zb21lKGZlY2hhID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU9iaiA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhISk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhT2JqICYmIGZlY2hhT2JqID4gaG95ICYmIGZlY2hhT2JqIDw9IGxpbWl0ZUZ1dHVybztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgKTtcbiAgICB9XG5cbiAgICAvLyBBXHUwMEYxYWRpciBtXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGZ1dHVyYXNcbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc0Z1dHVyYXMoZGlhc0Z1dHVyb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzRnV0dXJhcyhkaWFzRnV0dXJvcyk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5vIGhheSB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyAke2RpYXNGdXR1cm9zfSBkXHUwMEVEYXMuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBgVGFyZWFzIFByb2dyYW1hZGFzIChQclx1MDBGM3hpbW9zICR7ZGlhc0Z1dHVyb3N9IGRcdTAwRURhcylgLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc0Z1dHVyYXNcIixcbiAgICAgICAgICAgICAgICBkaWFzRnV0dXJvc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIFByb2dyYW1hZGFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBwcm9ncmFtYWRhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zICR7ZGlhc0Z1dHVyb3N9IGRcdTAwRURhc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNGdXR1cmFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQVx1MDBGMWFkaXIgbnVldm8gbVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNFbkVqZWN1Y2lvbigpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBNb2RpZmljYXIgZWwgcHJvY2VzYW1pZW50byBkZSB0YXJlYXMgcGFyYSBkZXRlY3RhciBlc3RhZG8gWy9dXG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0xpbmUgPSB0YXJlYS50ZXh0by50cmltKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tMaW5lLnN0YXJ0c1dpdGgoJy0gWy9dJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB0cnVlIC8vIG51ZXZvIHBhclx1MDBFMW1ldHJvIHBhcmEgaW5kaWNhciBxdWUgYnVzY2Ftb3MgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQVx1MDBGMWFkaXIgbVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzRW5FamVjdWNpb24oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBPYnRlbmVyIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgICAgICh0YXJlYSkgPT4gdHJ1ZSwgLy8gTm8gYXBsaWNhbW9zIGZpbHRybyBhZGljaW9uYWwgcG9ycXVlIHlhIGZpbHRyYW1vcyBwb3IgZXN0YWRvIGVuIHByb2Nlc2FyVGFyZWFzXG4gICAgICAgICAgICAgICAgdHJ1ZSAvLyBJbmRpY2FyIHF1ZSBidXNjYW1vcyB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZW5lcmFyIHZpc3RhIHkgZ3VhcmRhciBhcmNoaXZvXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUVuRWplY3VjaW9uKHRhcmVhcyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgZW4gRWplY3VjaVx1MDBGM24ubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzRW5FamVjdWNpb246XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXJWaXN0YUVuRWplY3VjaW9uKHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRhcmVhcyBlbiBFamVjdWNpXHUwMEYzblxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBib3RcdTAwRjNuIGRlIGFjdHVhbGl6YWNpXHUwMEYzblxuICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRhcmVhc0VuRWplY3VjaW9uXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgaW5mb3JtYWNpXHUwMEYzbiBnZW5lcmFsXG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM246ICR7dGFyZWFzLmxlbmd0aH1cXG5cXG5gO1xuXG4gICAgICAgIC8vIFNlcGFyYXIgdGFyZWFzIHBvciBjYXRlZ29yXHUwMEVEYXNcbiAgICAgICAgY29uc3QgdGFyZWFzQ29uVmVuY2ltaWVudG8gPSB0YXJlYXMuZmlsdGVyKHQgPT4gdC5mZWNoYVZlbmNpbWllbnRvKTtcbiAgICAgICAgY29uc3QgdGFyZWFzUHJvZ3JhbWFkYXMgPSB0YXJlYXMuZmlsdGVyKHQgPT4gIXQuZmVjaGFWZW5jaW1pZW50byAmJiB0LmZlY2hhU2NoZWR1bGVkKTtcbiAgICAgICAgY29uc3QgdGFyZWFzQ29uSW5pY2lvID0gdGFyZWFzLmZpbHRlcih0ID0+ICF0LmZlY2hhVmVuY2ltaWVudG8gJiYgIXQuZmVjaGFTY2hlZHVsZWQgJiYgdC5mZWNoYVN0YXJ0KTtcbiAgICAgICAgY29uc3QgdGFyZWFzU2luRmVjaGEgPSB0YXJlYXMuZmlsdGVyKHQgPT4gIXQuZmVjaGFWZW5jaW1pZW50byAmJiAhdC5mZWNoYVNjaGVkdWxlZCAmJiAhdC5mZWNoYVN0YXJ0KTtcblxuICAgICAgICAgICAvLyBSZW5kZXJpemFyIGNhZGEgc2VjY2lcdTAwRjNuXG4gICAgICAgIGlmICh0YXJlYXNDb25WZW5jaW1pZW50by5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIENvbiBmZWNoYSBkZSB2ZW5jaW1pZW50byAoJHt0YXJlYXNDb25WZW5jaW1pZW50by5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXNDb25WZW5jaW1pZW50byk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZWFzUHJvZ3JhbWFkYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBQcm9ncmFtYWRhcyAoJHt0YXJlYXNQcm9ncmFtYWRhcy5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXNQcm9ncmFtYWRhcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZWFzQ29uSW5pY2lvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgQ29uIGZlY2hhIGRlIGluaWNpbyAoJHt0YXJlYXNDb25JbmljaW8ubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzRW5FamVjdWNpb24odGFyZWFzQ29uSW5pY2lvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJlYXNTaW5GZWNoYS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFNpbiBmZWNoYSBhc2lnbmFkYSAoJHt0YXJlYXNTaW5GZWNoYS5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXNTaW5GZWNoYSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG59XG5cblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBtXHUwMEU5dG9kbyBlc3BlY1x1MDBFRGZpY28gcGFyYSByZW5kZXJpemFyIGdydXBvcyBkZSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICBwcml2YXRlIHJlbmRlcml6YXJHcnVwb1RhcmVhc0VuRWplY3VjaW9uKHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdGFyZWFzUG9yQXJjaGl2byA9IHRoaXMuYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9ICcnO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBbcnV0YUFyY2hpdm8sIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHRhcmVhc1BvckFyY2hpdm8pKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyBbWyR7cnV0YUFyY2hpdm99fCR7aW5mby50aXR1bG99XV1cXG5cXG5gO1xuICAgICAgICAgICAgaW5mby50YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhRW5FamVjdWNpb24odGFyZWEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyR3J1cG9UYXJlYXModGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgIGNvbnN0IHRhcmVhc1BvckFyY2hpdm8gPSB0aGlzLmFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhcyk7XG4gICAgbGV0IGNvbnRlbmlkbyA9ICcnO1xuICAgIFxuICAgIGZvciAoY29uc3QgW3J1dGFBcmNoaXZvLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyh0YXJlYXNQb3JBcmNoaXZvKSkge1xuICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyBbWyR7cnV0YUFyY2hpdm99fCR7aW5mby50aXR1bG99XV1cXG5cXG5gO1xuICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYUVuRWplY3VjaW9uKHRhcmVhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9ICAgXG5cbiAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYUVuRWplY3VjaW9uKHRhcmVhOiBUYXNrKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW5kZXJpemFyIGZlY2hhcyBzaSBleGlzdGVuXG4gICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvIHx8IHRhcmVhLmZlY2hhU2NoZWR1bGVkIHx8IHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gRmVjaGFzOlxcbmA7XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgICAgICAtIFx1RDgzRFx1RENDNSA6ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgICAgIC0gXHUyM0YzIDogJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAgICAgLSBcdUQ4M0RcdURFRUI6ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXJpemFyIGhvcmFyaW9zIHNpIGV4aXN0ZW5cbiAgICAgICAgaWYgKHRhcmVhLmhvcmFJbmljaW8gfHwgdGFyZWEuaG9yYUZpbikge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjAgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV0aXF1ZXRhc1xuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdUREQzJcdUZFMEYgQ29udGV4dG9zOiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REM2NCBQZXJzb25hczogJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnRvZG9pc3Q/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0YyIFRvZG9pc3Q6ICR7dGFyZWEuZXRpcXVldGFzLnRvZG9pc3Quam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5vdHJhcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0NcdURGRjdcdUZFMEYgT3RyYXM6ICR7dGFyZWEuZXRpcXVldGFzLm90cmFzLmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJpb3JpZGFkXG4gICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IHRoaXMub2J0ZW5lclByaW9yaWRhZFRhcmVhKHRhcmVhLnRleHRvKTtcbiAgICAgICAgaWYgKHByaW9yaWRhZCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSAke3ByaW9yaWRhZC5lbW9qaX0gUHJpb3JpZGFkOiAke3ByaW9yaWRhZC5ub21icmV9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvcmdhbml6YXJUYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXM6IFRhc2tbXSk6IFRhc2tbXSB7XG4gICAgICAgIHJldHVybiB0YXJlYXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFBID0gYS5mZWNoYVZlbmNpbWllbnRvIHx8IGEuZmVjaGFTY2hlZHVsZWQgfHwgYS5mZWNoYVN0YXJ0O1xuICAgICAgICAgICAgY29uc3QgZmVjaGFCID0gYi5mZWNoYVZlbmNpbWllbnRvIHx8IGIuZmVjaGFTY2hlZHVsZWQgfHwgYi5mZWNoYVN0YXJ0O1xuXG4gICAgICAgICAgICBpZiAoZmVjaGFBICYmIGZlY2hhQikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqQSA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhQSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFPYmpCID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFCKTtcbiAgICAgICAgICAgICAgICBpZiAoZmVjaGFPYmpBICYmIGZlY2hhT2JqQikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFPYmpBLmdldFRpbWUoKSAtIGZlY2hhT2JqQi5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTaSB1bmEgdGFyZWEgdGllbmUgZmVjaGEgeSBsYSBvdHJhIG5vLCBsYSBxdWUgdGllbmUgZmVjaGEgdmEgcHJpbWVyb1xuICAgICAgICAgICAgaWYgKGZlY2hhQSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKGZlY2hhQikgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgIC8vIFNpIG5pbmd1bmEgdGllbmUgZmVjaGEsIG1hbnRlbmVyIGVsIG9yZGVuIHBvciBwZXNvXG4gICAgICAgICAgICByZXR1cm4gKGIud2VpZ2h0Py50b3RhbFdlaWdodCB8fCAwKSAtIChhLndlaWdodD8udG90YWxXZWlnaHQgfHwgMCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICAvLyBOdWV2byBtXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc1xuICAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzU2NoZWR1bGVkVmVuY2lkYXMoKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZmVjaGFTY2hlZHVsZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVNjaGVkdWxlZCA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFTY2hlZHVsZWQgIT09IG51bGwgJiYgZmVjaGFTY2hlZHVsZWQgPCBob3k7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTnVldm8gbVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIHRhcmVhcyBzY2hlZHVsZWQgcHJcdTAwRjN4aW1hc1xuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNTY2hlZHVsZWRQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBjb25zdCBsaW1pdGVGdXR1cm8gPSBuZXcgRGF0ZShob3kpO1xuICAgICAgICBsaW1pdGVGdXR1cm8uc2V0RGF0ZShsaW1pdGVGdXR1cm8uZ2V0RGF0ZSgpICsgZGlhc1Byb3hpbW9zKTtcblxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmZlY2hhU2NoZWR1bGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTY2hlZHVsZWQgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVNjaGVkdWxlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhU2NoZWR1bGVkICE9PSBudWxsICYmIFxuICAgICAgICAgICAgICAgICAgICAgICBmZWNoYVNjaGVkdWxlZCA+PSBob3kgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgIGZlY2hhU2NoZWR1bGVkIDw9IGxpbWl0ZUZ1dHVybztcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc1xuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzU2NoZWR1bGVkVmVuY2lkYXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzKCk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgc2NoZWR1bGVkIHZlbmNpZGFzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgU2NoZWR1bGVkIFZlbmNpZGFzXCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzU2NoZWR1bGVkVmVuY2lkYXNcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIFNjaGVkdWxlZCBWZW5jaWRhcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgc2NoZWR1bGVkIHZlbmNpZGFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBzY2hlZHVsZWQgcHJcdTAwRjN4aW1hc1xuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzU2NoZWR1bGVkUHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1NjaGVkdWxlZFByb3hpbWFzKGRpYXNQcm94aW1vcyk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXMuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBgVGFyZWFzIFNjaGVkdWxlZCBQclx1MDBGM3hpbWFzICgke2RpYXNQcm94aW1vc30gZFx1MDBFRGFzKWAsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzU2NoZWR1bGVkUHJveGltYXNcIixcbiAgICAgICAgICAgICAgICBkaWFzUHJveGltb3NcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBTY2hlZHVsZWQgUHJcdTAwRjN4aW1hcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzU2NoZWR1bGVkUHJveGltYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAgICAvLyBNXHUwMEU5dG9kbyBhdXhpbGlhciBwYXJhIGxhIHZpc3VhbGl6YWNpXHUwMEYzbiBkZSBmZWNoYXMgc2NoZWR1bGVkXG4gICAgcHJpdmF0ZSBmb3JtYXRlYXJGZWNoYVNjaGVkdWxlZChmZWNoYTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZmVjaGFPYmogPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYSk7XG4gICAgICAgIGlmICghZmVjaGFPYmopIHJldHVybiBmZWNoYTtcblxuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBjb25zdCBkaWZlcmVuY2lhRGlhcyA9IE1hdGguY2VpbChcbiAgICAgICAgICAgIChmZWNoYU9iai5nZXRUaW1lKCkgLSBob3kuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KVxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjb250ZXh0byA9ICcnO1xuICAgICAgICBpZiAoZGlmZXJlbmNpYURpYXMgPCAwKSB7XG4gICAgICAgICAgICBjb250ZXh0byA9IGAocmV0cmFzYWRhICR7TWF0aC5hYnMoZGlmZXJlbmNpYURpYXMpfSBkXHUwMEVEYXMpYDtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZlcmVuY2lhRGlhcyA9PT0gMCkge1xuICAgICAgICAgICAgY29udGV4dG8gPSAnKGhveSknO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAxKSB7XG4gICAgICAgICAgICBjb250ZXh0byA9ICcobWFcdTAwRjFhbmEpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHRvID0gYChlbiAke2RpZmVyZW5jaWFEaWFzfSBkXHUwMEVEYXMpYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgJHtmZWNoYX0gJHtjb250ZXh0b31gO1xuICAgIH1cblxuICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgdG9kYXMgbGFzIHRhcmVhcyB2ZW5jaWRhc1xuICAgICBwdWJsaWMgYXN5bmMgZ2V0VG9kYXNUYXJlYXNWZW5jaWRhcygpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGVzdGFWZW5jaWRhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIGRlIHZlbmNpbWllbnRvIChkdWUpXG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFWZW5jID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFWZW5jaW1pZW50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWNoYVZlbmMgJiYgZmVjaGFWZW5jIDwgaG95KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS50aXBvVmVuY2ltaWVudG8gPSBbJ2R1ZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXN0YVZlbmNpZGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBmZWNoYSBzY2hlZHVsZWRcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTY2hlZCA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlY2hhU2NoZWQgJiYgZmVjaGFTY2hlZCA8IGhveSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEudGlwb1ZlbmNpbWllbnRvID0gdGFyZWEudGlwb1ZlbmNpbWllbnRvIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEudGlwb1ZlbmNpbWllbnRvLnB1c2goJ3NjaGVkdWxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXN0YVZlbmNpZGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBmZWNoYSBkZSBpbmljaW8gKHN0YXJ0KVxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU3RhcnQgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlY2hhU3RhcnQgJiYgZmVjaGFTdGFydCA8IGhveSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEudGlwb1ZlbmNpbWllbnRvID0gdGFyZWEudGlwb1ZlbmNpbWllbnRvIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEudGlwb1ZlbmNpbWllbnRvLnB1c2goJ3N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlc3RhVmVuY2lkYSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzdGFWZW5jaWRhO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciB0b2RhcyBsYXMgdGFyZWFzIHZlbmNpZGFzXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUb2Rhc1RhcmVhc1ZlbmNpZGFzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUb2Rhc1RhcmVhc1ZlbmNpZGFzKCk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgdmVuY2lkYXMuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YVRvZGFzVmVuY2lkYXModGFyZWFzKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVG9kYXMgbGFzIFRhcmVhcyBWZW5jaWRhcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgdmVuY2lkYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVG9kYXNUYXJlYXNWZW5jaWRhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIGVzcGVjXHUwMEVEZmljbyBwYXJhIGdlbmVyYXIgbGEgdmlzdGEgZGUgdG9kYXMgbGFzIHRhcmVhcyB2ZW5jaWRhc1xuICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhVG9kYXNWZW5jaWRhcyh0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyBUb2RhcyBsYXMgVGFyZWFzIFZlbmNpZGFzXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24oXCJtb3N0cmFyVG9kYXNUYXJlYXNWZW5jaWRhc1wiKTtcbiAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyB2ZW5jaWRhczogJHt0YXJlYXMubGVuZ3RofVxcblxcbmA7XG5cbiAgICAgICAgLy8gT3JnYW5pemFyIHRhcmVhcyBwb3IgdGlwbyBkZSB2ZW5jaW1pZW50b1xuICAgICAgICBjb25zdCB0YXJlYXNWZW5jRHVlID0gdGFyZWFzLmZpbHRlcih0ID0+IHQudGlwb1ZlbmNpbWllbnRvPy5pbmNsdWRlcygnZHVlJykpO1xuICAgICAgICBjb25zdCB0YXJlYXNWZW5jU2NoZWR1bGVkID0gdGFyZWFzLmZpbHRlcih0ID0+IHQudGlwb1ZlbmNpbWllbnRvPy5pbmNsdWRlcygnc2NoZWR1bGVkJykpO1xuICAgICAgICBjb25zdCB0YXJlYXNWZW5jU3RhcnQgPSB0YXJlYXMuZmlsdGVyKHQgPT4gdC50aXBvVmVuY2ltaWVudG8/LmluY2x1ZGVzKCdzdGFydCcpKTtcblxuICAgICAgICAvLyBTZWNjaVx1MDBGM24gZGUgdGFyZWFzIGNvbiBmZWNoYSBkZSB2ZW5jaW1pZW50byAoZHVlKVxuICAgICAgICBpZiAodGFyZWFzVmVuY0R1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBjb24gRmVjaGEgZGUgVmVuY2ltaWVudG8gUGFzYWRhICgke3RhcmVhc1ZlbmNEdWUubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzVmVuY2lkYXModGFyZWFzVmVuY0R1ZSwgJ2R1ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VjY2lcdTAwRjNuIGRlIHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXNcbiAgICAgICAgaWYgKHRhcmVhc1ZlbmNTY2hlZHVsZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgU2NoZWR1bGVkIFJldHJhc2FkYXMgKCR7dGFyZWFzVmVuY1NjaGVkdWxlZC5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNWZW5jaWRhcyh0YXJlYXNWZW5jU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWNjaVx1MDBGM24gZGUgdGFyZWFzIHN0YXJ0IHZlbmNpZGFzXG4gICAgICAgIGlmICh0YXJlYXNWZW5jU3RhcnQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgY29uIEluaWNpbyBSZXRyYXNhZG8gKCR7dGFyZWFzVmVuY1N0YXJ0Lmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc1ZlbmNpZGFzKHRhcmVhc1ZlbmNTdGFydCwgJ3N0YXJ0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIGF1eGlsaWFyIHBhcmEgcmVuZGVyaXphciBncnVwb3MgZGUgdGFyZWFzIHZlbmNpZGFzXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyR3J1cG9UYXJlYXNWZW5jaWRhcyh0YXJlYXM6IFRhc2tbXSwgdGlwbzogJ2R1ZScgfCAnc2NoZWR1bGVkJyB8ICdzdGFydCcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0YXJlYXNQb3JBcmNoaXZvID0gdGhpcy5hZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXMpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gJyc7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFtydXRhQXJjaGl2bywgaW5mb10gb2YgT2JqZWN0LmVudHJpZXModGFyZWFzUG9yQXJjaGl2bykpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMjIFtbJHtydXRhQXJjaGl2b318JHtpbmZvLnRpdHVsb31dXVxcblxcbmA7XG4gICAgICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFWZW5jaWRhKHRhcmVhLCB0aXBvKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIGF1eGlsaWFyIHBhcmEgcmVuZGVyaXphciB1bmEgdGFyZWEgdmVuY2lkYVxuICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhVmVuY2lkYSh0YXJlYTogVGFzaywgdGlwbzogJ2R1ZScgfCAnc2NoZWR1bGVkJyB8ICdzdGFydCcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vc3RyYXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBmZWNoYXMgcmVsZXZhbnRlIHNlZ1x1MDBGQW4gZWwgdGlwb1xuICAgICAgICBzd2l0Y2ggKHRpcG8pIHtcbiAgICAgICAgICAgIGNhc2UgJ2R1ZSc6XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50byEsICdkdWUnKX1cXG5gO1xuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlICdzY2hlZHVsZWQnOlxuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkISwgJ3NjaGVkdWxlZCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCEsICdzdGFydCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyaXphciBob3JhcmlvcyBzaSBleGlzdGVuXG4gICAgICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YwIEhvcmFyaW86ICR7dGFyZWEuaG9yYUluaWNpbyB8fCAnLS06LS0nfSAtICR7dGFyZWEuaG9yYUZpbiB8fCAnLS06LS0nfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXJpemFyIGV0aXF1ZXRhc1xuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdUREQzJcdUZFMEYgQ29udGV4dG9zOiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REM2NDogJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnRvZG9pc3Q/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0YyOiAke3RhcmVhLmV0aXF1ZXRhcy50b2RvaXN0LmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMub3RyYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNDXHVERkY3XHVGRTBGIE90cmFzOiAke3RhcmVhLmV0aXF1ZXRhcy5vdHJhcy5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHByaW5jaXBhbCBwYXJhIG9idGVuZXIgdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXNcbiAgICAgICAgcHVibGljIGFzeW5jIGdldFRhcmVhc0RlcGVuZGllbnRlcygpOiBQcm9taXNlPHtcbiAgICAgICAgICAgIGVqZWN1dGFibGVzOiBUYXNrW10sXG4gICAgICAgICAgICBibG9xdWVhZGFzOiBUYXNrW11cbiAgICAgICAgfT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCI9PT0gSW5pY2lhbmRvIGJcdTAwRkFzcXVlZGEgZGUgdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXMgPT09XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAgICAgYXN5bmMgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFxuQW5hbGl6YW5kbyB0YXJlYTpcIiwgdGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlcGVuZGVuY3lJZDpcIiwgdGFyZWEuZGVwZW5kZW5jeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZGVwZW5kZW5jeUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIi0+IElnbm9yYWRhOiBObyB0aWVuZSBkZXBlbmRlbmNpYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy50YXNrVXRpbHMudmVyaWZpY2FyRXN0YWRvVGFyZWEodGFyZWEuZGVwZW5kZW5jeUlkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYC0+IERlcGVuZGVuY2lhICR7dGFyZWEuZGVwZW5kZW5jeUlkfSBjb21wbGV0YWRhOmAsIHJlc3VsdGFkby5jb21wbGV0YWRhKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhLmlzQmxvY2tlZCA9ICFyZXN1bHRhZG8uY29tcGxldGFkYTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWdyZWdhciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxhIHViaWNhY2lcdTAwRjNuIGRlIGxhIHRhcmVhIGRlcGVuZGllbnRlXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhLmRlcGVuZGVuY3lMb2NhdGlvbiA9IHJlc3VsdGFkby5ydXRhQXJjaGl2bztcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEuZGVwZW5kZW5jeVRpdGxlID0gcmVzdWx0YWRvLnRpdHVsb0FyY2hpdm87XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZWplY3V0YWJsZXM6IHRhcmVhcy5maWx0ZXIodCA9PiAhdC5pc0Jsb2NrZWQpLFxuICAgICAgICAgICAgICAgIGJsb3F1ZWFkYXM6IHRhcmVhcy5maWx0ZXIodCA9PiB0LmlzQmxvY2tlZClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIGxhcyB0YXJlYXMgZGVwZW5kaWVudGVzXG4gICAgICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzRGVwZW5kaWVudGVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGVqZWN1dGFibGVzLCBibG9xdWVhZGFzIH0gPSBhd2FpdCB0aGlzLmdldFRhcmVhc0RlcGVuZGllbnRlcygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChlamVjdXRhYmxlcy5sZW5ndGggPT09IDAgJiYgYmxvcXVlYWRhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXMuJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFEZXBlbmRlbmNpYXMoZWplY3V0YWJsZXMsIGJsb3F1ZWFkYXMpO1xuICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgY29uIERlcGVuZGVuY2lhcy5tZGAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHtlamVjdXRhYmxlcy5sZW5ndGggKyBibG9xdWVhZGFzLmxlbmd0aH0gdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXNgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNEZXBlbmRpZW50ZXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZ2VuZXJhciBsYSB2aXN0YSBkZSBkZXBlbmRlbmNpYXNcbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFEZXBlbmRlbmNpYXMoZWplY3V0YWJsZXM6IFRhc2tbXSwgYmxvcXVlYWRhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgVGFyZWFzIGNvbiBEZXBlbmRlbmNpYXNcXG5cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRhcmVhc0RlcGVuZGllbnRlc1wiKTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXM6ICR7ZWplY3V0YWJsZXMubGVuZ3RoICsgYmxvcXVlYWRhcy5sZW5ndGh9XFxuXFxuYDtcbiAgICBcbiAgICAgICAgICAgIGlmIChlamVjdXRhYmxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgRWplY3V0YWJsZXMgKCR7ZWplY3V0YWJsZXMubGVuZ3RofSlcXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIXN1Y2Nlc3NdIEVzdGFzIHRhcmVhcyB5YSBwdWVkZW4gc2VyIGVqZWN1dGFkYXMgcG9ycXVlIHN1cyBkZXBlbmRlbmNpYXMgZXN0XHUwMEUxbiBjb21wbGV0YWRhc1xcblxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvRGVwZW5kZW5jaWFzKGVqZWN1dGFibGVzLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGlmIChibG9xdWVhZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYFxcbiMjIFRhcmVhcyBCbG9xdWVhZGFzICgke2Jsb3F1ZWFkYXMubGVuZ3RofSlcXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIXdhcm5pbmddIEVzdGFzIHRhcmVhcyBlc3RcdTAwRTFuIGVzcGVyYW5kbyBxdWUgc2UgY29tcGxldGVuIG90cmFzIHRhcmVhc1xcblxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvRGVwZW5kZW5jaWFzKGJsb3F1ZWFkYXMsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSByZW5kZXJpemFyIGdydXBvcyBkZSB0YXJlYXMgY29uIGRlcGVuZGVuY2lhc1xuICAgICAgICBwcml2YXRlIHJlbmRlcml6YXJHcnVwb0RlcGVuZGVuY2lhcyh0YXJlYXM6IFRhc2tbXSwgZWplY3V0YWJsZXM6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzUG9yQXJjaGl2byA9IHRoaXMuYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzKTtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSAnJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCBbcnV0YUFyY2hpdm8sIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHRhcmVhc1BvckFyY2hpdm8pKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyMgW1ske3J1dGFBcmNoaXZvfXwke2luZm8udGl0dWxvfV1dXFxuXFxuYDtcbiAgICAgICAgICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhQ29uRGVwZW5kZW5jaWEodGFyZWEsIGVqZWN1dGFibGVzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSByZW5kZXJpemFyIHVuYSB0YXJlYSBpbmRpdmlkdWFsIGNvbiBkZXBlbmRlbmNpYVxuICAgICAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYUNvbkRlcGVuZGVuY2lhKHRhcmVhOiBUYXNrLCBlc0VqZWN1dGFibGU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG5SZW5kZXJpemFuZG8gdGFyZWE6XCIsIHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXMgZWplY3V0YWJsZTpcIiwgZXNFamVjdXRhYmxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAtIFsgXSAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1vc3RyYXIgSUQgZGUgbGEgdGFyZWEgc2kgZXhpc3RlXG4gICAgICAgICAgICBpZiAodGFyZWEudGFza0lkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNDXHVERDk0ICR7dGFyZWEudGFza0lkfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgXG4gICAgICAgICAgICAvLyBNb3N0cmFyIGRldGFsbGVzIGRlIGxhIGRlcGVuZGVuY2lhXG4gICAgICAgICAgICBpZiAodGFyZWEuZGVwZW5kZW5jeUlkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyMUIzIERlcGVuZGUgZGU6ICR7dGFyZWEuZGVwZW5kZW5jeVRpdGxlID8gYFtbJHt0YXJlYS5kZXBlbmRlbmN5TG9jYXRpb259fCR7dGFyZWEuZGVwZW5kZW5jeVRpdGxlfV1dYCA6ICdObyBlbmNvbnRyYWRhJ31gO1xuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5kZXBlbmRlbmN5VGV4dG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGA6IFwiJHt0YXJlYS5kZXBlbmRlbmN5VGV4dG99XCJgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gZXNFamVjdXRhYmxlID8gJyBcdTI3MDUnIDogJyBcdTIzRjMnO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXN0byBkZWwgY29udGVuaWRvLi4uXG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEREMyXHVGRTBGICR7dGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1REM2NCAke3RhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzUGVyc29uYXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcGVyc29uYXNDb25UYXJlYXMsIHRvdGFsUGVyc29uYXMsIHRvdGFsVGFyZWFzIH0gPSBhd2FpdCB0aGlzLmdldFRhcmVhc1BlcnNvbmFzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsUGVyc29uYXMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGFzaWduYWRhcyBhIHBlcnNvbmFzLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YVBlcnNvbmFzKHBlcnNvbmFzQ29uVGFyZWFzLCB0b3RhbFBlcnNvbmFzLCB0b3RhbFRhcmVhcyk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgcG9yIFBlcnNvbmEubWRgLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dG90YWxUYXJlYXN9IHRhcmVhcyBhc2lnbmFkYXMgYSAke3RvdGFsUGVyc29uYXN9IHBlcnNvbmFzYCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzUGVyc29uYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFQZXJzb25hcyhcbiAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+LFxuICAgICAgICAgICAgdG90YWxQZXJzb25hczogbnVtYmVyLFxuICAgICAgICAgICAgdG90YWxUYXJlYXM6IG51bWJlclxuICAgICAgICApOiBzdHJpbmcge1xuICAgICAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyBUYXJlYXMgQXNpZ25hZGFzIHBvciBQZXJzb25hXFxuXFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FiZWNlcmEgeSByZXN1bWVuXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRhcmVhc1BlcnNvbmFzXCIpO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSBwZXJzb25hcyBjb24gdGFyZWFzOiAke3RvdGFsUGVyc29uYXN9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgYXNpZ25hZGFzOiAke3RvdGFsVGFyZWFzfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzdW1lbiBkZSBhc2lnbmFjaW9uZXNcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgUmVzdW1lbiBkZSBBc2lnbmFjaW9uZXNcXG5gO1xuICAgICAgICAgICAgQXJyYXkuZnJvbShwZXJzb25hc0NvblRhcmVhcy5lbnRyaWVzKCkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKFssIHRhcmVhc0FdLCBbLCB0YXJlYXNCXSkgPT4gdGFyZWFzQi5sZW5ndGggLSB0YXJlYXNBLmxlbmd0aClcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoW3BlcnNvbmEsIHRhcmVhc10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRm9ybWF0ZWFkbyA9IHRoaXMuZm9ybWF0ZWFyTm9tYnJlUGVyc29uYShwZXJzb25hKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAtIFtbIyR7bm9tYnJlRm9ybWF0ZWFkb318JHtub21icmVGb3JtYXRlYWRvfV1dICgke3RhcmVhcy5sZW5ndGh9IHRhcmVhcylcXG5gO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGFsbGUgZGUgdGFyZWFzIHBvciBwZXJzb25hXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBwb3IgUGVyc29uYVxcblxcbmA7XG4gICAgICAgICAgICBBcnJheS5mcm9tKHBlcnNvbmFzQ29uVGFyZWFzLmVudHJpZXMoKSlcbiAgICAgICAgICAgICAgICAuc29ydCgoWywgdGFyZWFzQV0sIFssIHRhcmVhc0JdKSA9PiB0YXJlYXNCLmxlbmd0aCAtIHRhcmVhc0EubGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChbcGVyc29uYSwgdGFyZWFzXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyAke3RoaXMuZm9ybWF0ZWFyTm9tYnJlUGVyc29uYShwZXJzb25hKX1cXG5bWyNSZXN1bWVuIGRlIEFzaWduYWNpb25lc3xcdTJCMDZcdUZFMEZdXVxcbmA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBPcmRlbmFyIHRhcmVhcyBwb3IgcGVzbyB5IG1vc3RyYXJsYXMgZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc09yZGVuYWRhcyA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNvcnRUYXNrcyh0YXJlYXMpO1xuICAgICAgICAgICAgICAgICAgICB0YXJlYXNPcmRlbmFkYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFQZXJzb25hKHRhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYVBlcnNvbmEodGFyZWE6IFRhc2spOiBzdHJpbmcge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciB1YmljYWNpXHUwMEYzbiBkZSBsYSB0YXJlYSBjb24gblx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYSBzaSBlc3RcdTAwRTEgZGlzcG9uaWJsZVxuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEQ0NEIFtbJHt0YXJlYS5ydXRhQXJjaGl2b318JHt0YXJlYS50aXR1bG99XV1gO1xuICAgICAgICAgICAgaWYgKHRhcmVhLmxpbmVJbmZvPy5udW1lcm8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAobFx1MDBFRG5lYSAke3RhcmVhLmxpbmVJbmZvLm51bWVyb30pYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJzsgXG4gICAgICAgICAgICAvLyBGZWNoYXNcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZlY2hhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyM0YwIEZlY2hhczpcXG4gICAgICAgICR7ZmVjaGFzLmpvaW4oJ1xcbiAgICAgICAgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAvLyBIb3Jhcmlvc1xuICAgICAgICAgICAgaWYgKHRhcmVhLmhvcmFJbmljaW8gfHwgdGFyZWEuaG9yYUZpbikge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjMxQSBIb3JhcmlvOiAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIENvbnRleHRvc1xuICAgICAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdUREQzJcdUZFMEYgQ29udGV4dG9zOiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAvLyBQZXNvIHkgcHJpb3JpZGFkXG4gICAgICAgICAgICBpZiAodGFyZWEud2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJpb3JpZGFkID0gdGhpcy5vYnRlbmVyUHJpb3JpZGFkVGFyZWEodGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgIGlmIChwcmlvcmlkYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgJHtwcmlvcmlkYWQuZW1vaml9IFByaW9yaWRhZDogJHtwcmlvcmlkYWQubm9tYnJlfVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgZm9ybWF0ZWFyTm9tYnJlUGVyc29uYSh0YWc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gdGFnLnJlcGxhY2UoJyNweC0nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fL2csICcgJylcbiAgICAgICAgICAgICAgICAgICAgIC5zcGxpdCgnICcpXG4gICAgICAgICAgICAgICAgICAgICAubWFwKHdvcmQgPT4gd29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XG4gICAgICAgIH1cblxuICAgIFxuICAgICAgICBwcml2YXRlIG5vcm1hbGl6YXJDb250ZXh0byhjb250ZXh0bzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgICAgIC8vIE5vcm1hbGl6YXIgdGFudG8gZm9ybWF0b3MgI2N4LWNvbnRleHRvIGNvbW8gI2N4L2NvbnRleHRvXG4gICAgICAgICAgICByZXR1cm4gY29udGV4dG8ucmVwbGFjZSgvWy8tXS9nLCAnIFx1MjE5MiAnKS50cmltKCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNDb250ZXh0b3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgY29udGV4dG9zQ29uVGFyZWFzLCB0b3RhbENvbnRleHRvcywgdG90YWxUYXJlYXMgfSA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzQ29udGV4dG9zKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRvdGFsQ29udGV4dG9zID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIGVuY29udHJhcm9uIHRhcmVhcyBjb24gY29udGV4dG9zIGFzaWduYWRvcy4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbnRleHRvcyhjb250ZXh0b3NDb25UYXJlYXMsIHRvdGFsQ29udGV4dG9zLCB0b3RhbFRhcmVhcyk7XG4gICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBwb3IgQ29udGV4dG8ubWRgLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dG90YWxUYXJlYXN9IHRhcmVhcyBlbiAke3RvdGFsQ29udGV4dG9zfSBjb250ZXh0b3NgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNDb250ZXh0b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhQ29udGV4dG9zKFxuICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+LFxuICAgICAgICAgICAgdG90YWxDb250ZXh0b3M6IG51bWJlcixcbiAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBudW1iZXJcbiAgICAgICAgKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgVGFyZWFzIHBvciBDb250ZXh0b1xcblxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhYmVjZXJhIHkgcmVzdW1lblxuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUYXJlYXNDb250ZXh0b3NcIik7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIGNvbnRleHRvcyBjb24gdGFyZWFzOiAke3RvdGFsQ29udGV4dG9zfVxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIGVuY29udHJhZGFzOiAke3RvdGFsVGFyZWFzfVxcblxcbmA7XG4gICAgXG4gICAgICAgICAgICAvLyBDb25zdHJ1aXIgXHUwMEUxcmJvbCBkZSBjb250ZXh0b3NcbiAgICAgICAgICAgIGNvbnN0IGFyYm9sQ29udGV4dG9zID0gdGhpcy5jb25zdHJ1aXJBcmJvbENvbnRleHRvcyhjb250ZXh0b3NDb25UYXJlYXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXN1bWVuIGRlIGNvbnRleHRvc1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBSZXN1bWVuIGRlIENvbnRleHRvc1xcbmA7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXJSZXN1bWVuQ29udGV4dG9zKGFyYm9sQ29udGV4dG9zLCAwKS5mb3JFYWNoKGxpbmVhID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gbGluZWEgKyAnXFxuJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgIFxuICAgICAgICAgICAgLy8gRGV0YWxsZSBkZSB0YXJlYXMgcG9yIGNvbnRleHRvXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBwb3IgQ29udGV4dG9cXG5cXG5gO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmFyRGV0YWxsZUNvbnRleHRvcyhhcmJvbENvbnRleHRvcywgY29udGV4dG9zQ29uVGFyZWFzKS5mb3JFYWNoKGJsb3F1ZSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGJsb3F1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwcml2YXRlIGNvbnN0cnVpckFyYm9sQ29udGV4dG9zKGNvbnRleHRvc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPik6IE1hcDxzdHJpbmcsIGFueT4ge1xuICAgICAgICAgICAgY29uc3QgYXJib2wgPSBuZXcgTWFwPHN0cmluZywgYW55PigpO1xuICAgIFxuICAgICAgICAgICAgQXJyYXkuZnJvbShjb250ZXh0b3NDb25UYXJlYXMua2V5cygpKS5mb3JFYWNoKGNvbnRleHRvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuaXZlbGVzID0gY29udGV4dG8uc3BsaXQoJyBcdTIxOTIgJyk7XG4gICAgICAgICAgICAgICAgbGV0IG5vZG9BY3R1YWwgPSBhcmJvbDtcbiAgICBcbiAgICAgICAgICAgICAgICBuaXZlbGVzLmZvckVhY2goKG5pdmVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZG9BY3R1YWwuaGFzKG5pdmVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kb0FjdHVhbC5zZXQobml2ZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYXM6IGluZGV4ID09PSBuaXZlbGVzLmxlbmd0aCAtIDEgPyBjb250ZXh0b3NDb25UYXJlYXMuZ2V0KGNvbnRleHRvKSA6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YmNvbnRleHRvczogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1dGFDb21wbGV0YTogbml2ZWxlcy5zbGljZSgwLCBpbmRleCArIDEpLmpvaW4oJyBcdTIxOTIgJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZG9BY3R1YWwgPSBub2RvQWN0dWFsLmdldChuaXZlbCkuc3ViY29udGV4dG9zO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYXJib2w7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyUmVzdW1lbkNvbnRleHRvcyhhcmJvbDogTWFwPHN0cmluZywgYW55Piwgbml2ZWw6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYXJib2wuZm9yRWFjaCgobm9kbywgY29udGV4dG8pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRlbnRhY2lvbiA9ICcgICcucmVwZWF0KG5pdmVsKTtcbiAgICAgICAgICAgICAgICBjb25zdCBydXRhQ29udGV4dG8gPSBub2RvLnJ1dGFDb21wbGV0YTtcbiAgICAgICAgICAgICAgICBjb25zdCBjYW50aWRhZFRhcmVhcyA9IG5vZG8udGFyZWFzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2FudGlkYWRUYXJlYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVhcy5wdXNoKGAke2luZGVudGFjaW9ufS0gW1sjJHtydXRhQ29udGV4dG99fCR7Y29udGV4dG99XV0gKCR7Y2FudGlkYWRUYXJlYXN9IHRhcmVhcylgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaW5lYXMucHVzaChgJHtpbmRlbnRhY2lvbn0tICR7Y29udGV4dG99YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIC8vIFByb2Nlc2FyIHN1YmNvbnRleHRvc1xuICAgICAgICAgICAgICAgIGlmIChub2RvLnN1YmNvbnRleHRvcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lYXMucHVzaCguLi50aGlzLmdlbmVyYXJSZXN1bWVuQ29udGV4dG9zKG5vZG8uc3ViY29udGV4dG9zLCBuaXZlbCArIDEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBsaW5lYXM7XG4gICAgICAgIH1cbiAgICBcblxuICAgICAgICBwcml2YXRlIGdlbmVyYXJCbG9xdWVDb250ZXh0byhjb250ZXh0bzogc3RyaW5nLCB0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgICAgICBsZXQgYmxvcXVlID0gYCMjIyAke2NvbnRleHRvfVxcbltbI1Jlc3VtZW4gZGUgQ29udGV4dG9zfFx1MkIwNlx1RkUwRl1dXFxuYDtcbiAgICBcbiAgICAgICAgICAgIC8vIFVzYXIgZGlyZWN0YW1lbnRlIGxhcyB0YXJlYXMgb3JkZW5hZGFzIHBvciBlbCBUYXNrV2VpZ2h0Q2FsY3VsYXRvclxuICAgICAgICAgICAgdGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgIGJsb3F1ZSArPSB0aGlzLnJlbmRlcml6YXJUYXJlYUNvbnRleHRvKHRhcmVhKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGJsb3F1ZSArICdcXG4nO1xuICAgICAgICB9XG4gICAgXG5cbiAgICAgICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1BlcnNvbmFzKCk6IFByb21pc2U8e1xuICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT4sXG4gICAgICAgICAgICB0b3RhbFBlcnNvbmFzOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbFRhcmVhczogbnVtYmVyXG4gICAgICAgIH0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFxuPT09IElOSUNJQU5ETyBCXHUwMERBU1FVRURBIERFIFRBUkVBUyBBU0lHTkFEQVMgQSBQRVJTT05BUyA9PT1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHBlcnNvbmFzQ29uVGFyZWFzID0gbmV3IE1hcDxzdHJpbmcsIFRhc2tbXT4oKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhc1BvckFyY2hpdm8gPSBuZXcgTWFwPHN0cmluZywgTWFwPHN0cmluZywgTGluZUluZm8+PigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAgICAgYXN5bmMgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzIHx8IHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWFzIHNvbG8gY3VhbmRvIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lYXNQb3JBcmNoaXZvLmhhcyh0YXJlYS5ydXRhQXJjaGl2bykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVhc1BvckFyY2hpdm8uc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudGFza1V0aWxzLmVuY29udHJhckxpbmVhc1RhcmVhKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmVhLnJ1dGFBcmNoaXZvKSBhcyBURmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhIGEgbGEgdGFyZWFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWFzQXJjaGl2byA9IGxpbmVhc1BvckFyY2hpdm8uZ2V0KHRhcmVhLnJ1dGFBcmNoaXZvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhc0FyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVJbmZvID0gbGluZWFzQXJjaGl2by5nZXQodGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEubGluZUluZm8gPSBsaW5lSW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmZvckVhY2godGFnID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbmFUYWcgPSBgI3B4LSR7dGFnfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBlcnNvbmFzQ29uVGFyZWFzLmhhcyhwZXJzb25hVGFnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzLnNldChwZXJzb25hVGFnLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhcy5nZXQocGVyc29uYVRhZykhLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAvLyBPcmRlbmFyIGxhcyB0YXJlYXMgZGUgY2FkYSBwZXJzb25hXG4gICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhcy5mb3JFYWNoKCh0YXJlYXMsIHBlcnNvbmEpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJlYXNPcmRlbmFkYXMgPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zb3J0VGFza3ModGFyZWFzKTtcbiAgICAgICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhcy5zZXQocGVyc29uYSwgdGFyZWFzT3JkZW5hZGFzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhcyxcbiAgICAgICAgICAgICAgICB0b3RhbFBlcnNvbmFzOiBwZXJzb25hc0NvblRhcmVhcy5zaXplLFxuICAgICAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBBcnJheS5mcm9tKHBlcnNvbmFzQ29uVGFyZWFzLnZhbHVlcygpKVxuICAgICAgICAgICAgICAgICAgICAucmVkdWNlKChzdW0sIHRhcmVhcykgPT4gc3VtICsgdGFyZWFzLmxlbmd0aCwgMClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzQ29udGV4dG9zKCk6IFByb21pc2U8e1xuICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+LFxuICAgICAgICAgICAgdG90YWxDb250ZXh0b3M6IG51bWJlcixcbiAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBudW1iZXJcbiAgICAgICAgfT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG49PT0gSU5JQ0lBTkRPIEJcdTAwREFTUVVFREEgREUgVEFSRUFTIFBPUiBDT05URVhUTyA9PT1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRvc0NvblRhcmVhcyA9IG5ldyBNYXA8c3RyaW5nLCBUYXNrW10+KCk7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXNQb3JBcmNoaXZvID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIExpbmVJbmZvPj4oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgICAgIGFzeW5jICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcbkFuYWxpemFuZG8gdGFyZWE6XCIsIHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zIHx8IHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhcyBtYW50ZW5pZW5kbyBsYSBsXHUwMEYzZ2ljYSBleGlzdGVudGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lYXNQb3JBcmNoaXZvLmhhcyh0YXJlYS5ydXRhQXJjaGl2bykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVhc1BvckFyY2hpdm8uc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudGFza1V0aWxzLmVuY29udHJhckxpbmVhc1RhcmVhKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmVhLnJ1dGFBcmNoaXZvKSBhcyBURmlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhc0FyY2hpdm8gPSBsaW5lYXNQb3JBcmNoaXZvLmdldCh0YXJlYS5ydXRhQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lYXNBcmNoaXZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lSW5mbyA9IGxpbmVhc0FyY2hpdm8uZ2V0KHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmxpbmVJbmZvID0gbGluZUluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE1hbnRlbmVyIGxhIGxcdTAwRjNnaWNhIGV4aXN0ZW50ZSBkZSBwcm9jZXNhbWllbnRvIGRlIGNvbnRleHRvc1xuICAgICAgICAgICAgICAgICAgICB0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmZvckVhY2goY29udGV4dG8gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dG9Ob3JtYWxpemFkbyA9IHRoaXMubm9ybWFsaXphckNvbnRleHRvKGNvbnRleHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29udGV4dG9zQ29uVGFyZWFzLmhhcyhjb250ZXh0b05vcm1hbGl6YWRvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhcy5zZXQoY29udGV4dG9Ob3JtYWxpemFkbywgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzLmdldChjb250ZXh0b05vcm1hbGl6YWRvKSEucHVzaCh0YXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgIC8vIE1hbnRlbmVyIGxhIG9yZ2FuaXphY2lcdTAwRjNuIHkgcGVzbyBleGlzdGVudGVzXG4gICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXMuZm9yRWFjaCgodGFyZWFzLCBjb250ZXh0bykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFVzYXIgZWwgc2lzdGVtYSBkZSBwZXNvcyBleGlzdGVudGVcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJlYXNPcmRlbmFkYXMgPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zb3J0VGFza3ModGFyZWFzKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXMuc2V0KGNvbnRleHRvLCB0YXJlYXNPcmRlbmFkYXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhcyxcbiAgICAgICAgICAgICAgICB0b3RhbENvbnRleHRvczogY29udGV4dG9zQ29uVGFyZWFzLnNpemUsXG4gICAgICAgICAgICAgICAgdG90YWxUYXJlYXM6IEFycmF5LmZyb20oY29udGV4dG9zQ29uVGFyZWFzLnZhbHVlcygpKVxuICAgICAgICAgICAgICAgICAgICAucmVkdWNlKChzdW0sIHRhcmVhcykgPT4gc3VtICsgdGFyZWFzLmxlbmd0aCwgMClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyRGV0YWxsZUNvbnRleHRvcyhcbiAgICAgICAgICAgIGFyYm9sOiBNYXA8c3RyaW5nLCBhbnk+LCBcbiAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPlxuICAgICAgICApOiBzdHJpbmdbXSB7XG4gICAgICAgICAgICBjb25zdCBibG9xdWVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc2FyTm9kbyA9IChub2RvOiBNYXA8c3RyaW5nLCBhbnk+LCBydXRhQWN0dWFsOiBzdHJpbmdbXSA9IFtdKSA9PiB7XG4gICAgICAgICAgICAgICAgbm9kby5mb3JFYWNoKChpbmZvLCBjb250ZXh0bykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBydXRhQ29tcGxldGEgPSBpbmZvLnJ1dGFDb21wbGV0YTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLnRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbGFzIHRhcmVhcyBlc3RcdTAwRTluIG9yZGVuYWRhcyBwb3IgZWwgc2lzdGVtYSBkZSBwZXNvc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZWFzT3JkZW5hZGFzID0gVGFza1dlaWdodENhbGN1bGF0b3Iuc29ydFRhc2tzKGluZm8udGFyZWFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb3F1ZXMucHVzaCh0aGlzLmdlbmVyYXJCbG9xdWVDb250ZXh0byhydXRhQ29tcGxldGEsIHRhcmVhc09yZGVuYWRhcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby5zdWJjb250ZXh0b3Muc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc2FyTm9kbyhpbmZvLnN1YmNvbnRleHRvcywgWy4uLnJ1dGFBY3R1YWwsIGNvbnRleHRvXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAgICAgcHJvY2VzYXJOb2RvKGFyYm9sKTtcbiAgICAgICAgICAgIHJldHVybiBibG9xdWVzO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhQ29udGV4dG8odGFyZWE6IFRhc2spOiBzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAtIFsgXSAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIHViaWNhY2lcdTAwRjNuIGNvbiBuXHUwMEZBbWVybyBkZSBsXHUwMEVEbmVhXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURDQ0QgW1ske3RhcmVhLnJ1dGFBcmNoaXZvfXwke3RhcmVhLnRpdHVsb31dXWA7XG4gICAgICAgICAgICBpZiAodGFyZWEubGluZUluZm8/Lm51bWVybykge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIChsXHUwMEVEbmVhICR7dGFyZWEubGluZUluZm8ubnVtZXJvfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgIFxuICAgICAgICAgICAgLy8gTW9zdHJhciBlbCBwZXNvIHkgcHJpb3JpZGFkIHByaW1lcm8gKG1hbnRlbmllbmRvIGVsIHNpc3RlbWEgZXhpc3RlbnRlKVxuICAgICAgICAgICAgY29uc3QgcHJpb3JpZGFkID0gdGhpcy5vYnRlbmVyUHJpb3JpZGFkVGFyZWEodGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgaWYgKHByaW9yaWRhZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgICR7cHJpb3JpZGFkLmVtb2ppfSBQcmlvcmlkYWQ6ICR7cHJpb3JpZGFkLm5vbWJyZX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLndlaWdodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYmFzZVdlaWdodCwgdGltZVdlaWdodCwgcHJpb3JpdHlXZWlnaHQgfSA9IHRhcmVhLndlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoYmFzZVdlaWdodCArIHRpbWVXZWlnaHQgKyBwcmlvcml0eVdlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyNjk2XHVGRTBGIFBlc28gdG90YWw6ICR7dGFyZWEud2VpZ2h0LnRvdGFsV2VpZ2h0fVxcbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGZWNoYXMgKG1hbnRlbmllbmRvIGVsIGZvcm1hdG8gZXhpc3RlbnRlKVxuICAgICAgICAgICAgY29uc3QgZmVjaGFzID0gW107XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmVjaGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIzRjAgRmVjaGFzOlxcbiAgICAgICAgJHtmZWNoYXMuam9pbignXFxuICAgICAgICAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gSG9yYXJpb3NcbiAgICAgICAgICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIzMUEgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIFBlcnNvbmFzIGFzaWduYWRhc1xuICAgICAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1REM2NCBBc2lnbmFkbyBhOiAke3RhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5tYXAocCA9PiBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtYXRlYXJOb21icmVQZXJzb25hKGAjcHgtJHtwfWApXG4gICAgICAgICAgICAgICAgKS5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gRGVwZW5kZW5jaWFzXG4gICAgICAgICAgICBpZiAodGFyZWEuZGVwZW5kZW5jeUlkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyMUIzIERlcGVuZGUgZGU6IGA7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmRlcGVuZGVuY3lUaXRsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYFtbJHt0YXJlYS5kZXBlbmRlbmN5TG9jYXRpb259fCR7dGFyZWEuZGVwZW5kZW5jeVRpdGxlfV1dYDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmVhLmRlcGVuZGVuY3lUZXh0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGA6IFwiJHt0YXJlYS5kZXBlbmRlbmN5VGV4dG99XCJgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0YXJlYS5pc0Jsb2NrZWQgPyAnIFx1MjNGMycgOiAnIFx1MjcwNSc7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgICBcbn0iLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvdXRpbHMvdGFza1V0aWxzLnRzXG5cbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uLy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgVGFza1V0aWxzIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTXlQbHVnaW4pIHt9XG4gICAgXG4gICAgcHVibGljIGNvbXBhcmFyRmVjaGFzKGZlY2hhMTogRGF0ZSB8IG51bGwsIGZlY2hhMjogRGF0ZSB8IG51bGwpOiBudW1iZXIge1xuICAgICAgICBpZiAoIWZlY2hhMSAmJiAhZmVjaGEyKSByZXR1cm4gMDtcbiAgICAgICAgaWYgKCFmZWNoYTEpIHJldHVybiAxOyAgLy8gbnVsbCBzZSBjb25zaWRlcmEgbWF5b3JcbiAgICAgICAgaWYgKCFmZWNoYTIpIHJldHVybiAtMTsgLy8gbnVsbCBzZSBjb25zaWRlcmEgbWF5b3JcbiAgICAgICAgcmV0dXJuIGZlY2hhMS5nZXRUaW1lKCkgLSBmZWNoYTIuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbm9ybWFsaXphckhvcmEoaG9yYTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHBhdHJvbmVzID0gW1xuICAgICAgICAgICAgL14oXFxkezEsMn0pKD86OihcXGR7Mn0pKT9cXHMqKGFtfHBtKT8kL2ksXG4gICAgICAgICAgICAvXihcXGR7MSwyfSk6KFxcZHsyfSlcXHMqKGFtfHBtKT8kL2ksXG4gICAgICAgICAgICAvXihcXGR7MSwyfSk6KFxcZHsyfSkkL1xuICAgICAgICBdO1xuXG4gICAgICAgIGZvciAoY29uc3QgcGF0cm9uIG9mIHBhdHJvbmVzKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGhvcmEudG9Mb3dlckNhc2UoKS5tYXRjaChwYXRyb24pO1xuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhvcmFzID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0b3MgPSBtYXRjaFsyXSA/IG1hdGNoWzJdIDogJzAwJztcbiAgICAgICAgICAgICAgICBjb25zdCBwZXJpb2RvID0gbWF0Y2hbM107XG5cbiAgICAgICAgICAgICAgICBpZiAocGVyaW9kbyA9PT0gJ3BtJyAmJiBob3JhcyA8IDEyKSBob3JhcyArPSAxMjtcbiAgICAgICAgICAgICAgICBpZiAocGVyaW9kbyA9PT0gJ2FtJyAmJiBob3JhcyA9PT0gMTIpIGhvcmFzID0gMDtcblxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtob3Jhcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyl9OiR7bWludXRvc31gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBleHRyYWVyRmVjaGFzWUhvcmFzKGxpbmVhOiBzdHJpbmcpOiB7XG4gICAgICAgIGZlY2hhQ3JlYWNpb24/OiBzdHJpbmc7XG4gICAgICAgIGZlY2hhU2NoZWR1bGVkPzogc3RyaW5nO1xuICAgICAgICBmZWNoYVN0YXJ0Pzogc3RyaW5nO1xuICAgICAgICBmZWNoYVZlbmNpbWllbnRvPzogc3RyaW5nO1xuICAgICAgICBob3JhSW5pY2lvPzogc3RyaW5nO1xuICAgICAgICBob3JhRmluPzogc3RyaW5nO1xuICAgIH0ge1xuICAgICAgICBjb25zdCBob3JhSW5pY2lvTWF0Y2ggPSBsaW5lYS5tYXRjaCgvXFxbaEk6XFxzKihbXlxcXV0rKVxcXS8pO1xuICAgICAgICBjb25zdCBob3JhRmluTWF0Y2ggPSBsaW5lYS5tYXRjaCgvXFxbaEY6XFxzKihbXlxcXV0rKVxcXS8pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmZWNoYUNyZWFjaW9uOiBsaW5lYS5tYXRjaCgvXHUyNzk1IChcXGR7NH0tXFxkezJ9LVxcZHsyfSkvKT8uWzFdLFxuICAgICAgICAgICAgZmVjaGFTY2hlZHVsZWQ6IGxpbmVhLm1hdGNoKC9cdTIzRjMgKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pPy5bMV0sXG4gICAgICAgICAgICBmZWNoYVN0YXJ0OiBsaW5lYS5tYXRjaCgvXHVEODNEXHVERUVCIChcXGR7NH0tXFxkezJ9LVxcZHsyfSkvKT8uWzFdLFxuICAgICAgICAgICAgZmVjaGFWZW5jaW1pZW50bzogbGluZWEubWF0Y2goL1x1RDgzRFx1RENDNSAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pLyk/LlsxXSxcbiAgICAgICAgICAgIGhvcmFJbmljaW86IGhvcmFJbmljaW9NYXRjaCA/IHRoaXMubm9ybWFsaXphckhvcmEoaG9yYUluaWNpb01hdGNoWzFdLnRyaW0oKSkgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBob3JhRmluOiBob3JhRmluTWF0Y2ggPyB0aGlzLm5vcm1hbGl6YXJIb3JhKGhvcmFGaW5NYXRjaFsxXS50cmltKCkpIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIG9idGVuZXJUaXR1bG9Ob3RhKGZpbGU6IFRGaWxlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBcbiAgICAgICAgaWYgKG1ldGFkYXRhPy5hbGlhc2VzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YS5hbGlhc2VzKSkgcmV0dXJuIG1ldGFkYXRhLmFsaWFzZXNbMF07XG4gICAgICAgICAgICBpZiAodHlwZW9mIG1ldGFkYXRhLmFsaWFzZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gbWV0YWRhdGEuYWxpYXNlcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG1ldGFkYXRhPy50aXR1bG8pIHJldHVybiBtZXRhZGF0YS50aXR1bG87XG5cbiAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhID0gZmlsZS5iYXNlbmFtZS5tYXRjaCgvKD86UEdURHxQUXxBSXxBVnxBeHxSUnxESnxPQ0F8Q0FDKSAtICguKykvKTtcbiAgICAgICAgaWYgKGNvaW5jaWRlbmNpYSAmJiBjb2luY2lkZW5jaWFbMV0pIHJldHVybiBjb2luY2lkZW5jaWFbMV07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmlsZS5iYXNlbmFtZTtcbiAgICB9XG4gXG5cblxuICAgIHB1YmxpYyBjYXRlZ29yaXphckV0aXF1ZXRhcyhldGlxdWV0YXM6IHN0cmluZ1tdKToge1xuICAgICAgICB0b2RvaXN0OiBzdHJpbmdbXSxcbiAgICAgICAgY29udGV4dG9zOiBzdHJpbmdbXSxcbiAgICAgICAgcGVyc29uYXM6IHN0cmluZ1tdLFxuICAgICAgICBvdHJhczogc3RyaW5nW11cbiAgICB9IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvZG9pc3Q6IGV0aXF1ZXRhcy5maWx0ZXIoZSA9PiBlLnN0YXJ0c1dpdGgoJyN0b2RvaXN0JykpLFxuICAgICAgICAgICAgY29udGV4dG9zOiBldGlxdWV0YXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGUgPT4gZS5tYXRjaCgvI2N4KD86Wy8tXS4rKSQvKSlcbiAgICAgICAgICAgICAgICAubWFwKGUgPT4gdGhpcy5saW1waWFyUHJlZmlqbyhlLCAnY3gnKSksXG4gICAgICAgICAgICBwZXJzb25hczogZXRpcXVldGFzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihlID0+IGUuc3RhcnRzV2l0aCgnI3B4LScpKVxuICAgICAgICAgICAgICAgIC5tYXAoZSA9PiB0aGlzLmZvcm1hdGVhckV0aXF1ZXRhUGVyc29uYShlKSksXG4gICAgICAgICAgICBvdHJhczogZXRpcXVldGFzLmZpbHRlcihlID0+IFxuICAgICAgICAgICAgICAgICFlLnN0YXJ0c1dpdGgoJyN0b2RvaXN0JykgJiYgXG4gICAgICAgICAgICAgICAgIWUubWF0Y2goLyNjeCg/OlsvLV18JCkvKSAmJiBcbiAgICAgICAgICAgICAgICAhZS5zdGFydHNXaXRoKCcjcHgtJylcbiAgICAgICAgICAgIClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBOdWV2byBtXHUwMEU5dG9kbyBwYXJhIGZvcm1hdGVhciBldGlxdWV0YXMgZGUgcGVyc29uYXNcbiAgICBwcml2YXRlIGZvcm1hdGVhckV0aXF1ZXRhUGVyc29uYShldGlxdWV0YTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gRWxpbWluYXIgZWwgcHJlZmlqbyAjcHgtXG4gICAgICAgIGNvbnN0IG5vbWJyZSA9IGV0aXF1ZXRhLnJlcGxhY2UoJyNweC0nLCAnJyk7XG4gICAgICAgIC8vIFJlZW1wbGF6YXIgZ3Vpb25lcyBiYWpvcyBjb24gZXNwYWNpb3MgcGFyYSBtZWpvciBsZWdpYmlsaWRhZFxuICAgICAgICByZXR1cm4gbm9tYnJlLnJlcGxhY2UoL18vZywgJyAnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxpbXBpYXJQcmVmaWpvKGV0aXF1ZXRhOiBzdHJpbmcsIHByZWZpam86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHNpblByZWZpam8gPSBldGlxdWV0YS5yZXBsYWNlKG5ldyBSZWdFeHAoYCMke3ByZWZpam99Wy8tXWApLCAnJyk7XG4gICAgICAgIHJldHVybiBzaW5QcmVmaWpvXG4gICAgICAgICAgICAucmVwbGFjZSgvLS9nLCAnIFx1MjE5MiAnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCAnIFx1MjE5MiAnKTtcbiAgICB9XG5cblxuXG5cbiAgICBwdWJsaWMgbGltcGlhclRleHRvVGFyZWEobGluZWE6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IGxpbmVhXG4gICAgICAgICAgICAvLyBFbGltaW5hciBlbCBjaGVja2JveCBkZSBsYSB0YXJlYVxuICAgICAgICAgICAgLnJlcGxhY2UoL14tIFxcWyBcXF0vLCAnJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYXIgZmVjaGFzIGNvbiBlbW9qaXNcbiAgICAgICAgICAgIC5yZXBsYWNlKC9bXHUyNzk1XHVEODNEXHVEQ0M1XHUyM0YzXHVEODNEXHVERUVCXSBcXGR7NH0tXFxkezJ9LVxcZHsyfS9nLCAnJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYXIgaG9yYXMgZGUgaW5pY2lvIHkgZmluXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbaEk6W15cXF1dK1xcXS9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtoRjpbXlxcXV0rXFxdL2csICcnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciBlbmxhY2VzXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbbGlua1xcXVxcKFteXFwpXStcXCkvZywgJycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIElEcyBkZSB0b2RvaXN0XG4gICAgICAgICAgICAucmVwbGFjZSgvJSVcXFt0b2RvaXN0X2lkOjogXFxkK1xcXSUlL2csICcnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciB0b2RhcyBsYXMgZXRpcXVldGFzIChjb25zaWRlcmFuZG8gbG9zIG51ZXZvcyBmb3JtYXRvcylcbiAgICAgICAgICAgIC5yZXBsYWNlKC8jW1xcdy1dKyg/OlxcL1tcXHctXSspKlxcYi9nLCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC8jW1xcdy1dKyg/Oi1bXFx3LV0rKSpcXGIvZywgJycpO1xuXG4gICAgICAgIC8vIEVsaW1pbmFyIG1cdTAwRkFsdGlwbGVzIGVzcGFjaW9zIHkgZXNwYWNpb3MgYWwgaW5pY2lvL2ZpbmFsXG4gICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW9cbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJylcbiAgICAgICAgICAgIC50cmltKCk7XG5cbiAgICAgICAgcmV0dXJuIHRleHRvTGltcGlvO1xuICAgIH1cblxuICAgXG4gICAgLy8gTVx1MDBFOXRvZG8gZGUgdXRpbGlkYWQgcGFyYSBvYnRlbmVyIHVuYSByZXByZXNlbnRhY2lcdTAwRjNuIGplclx1MDBFMXJxdWljYSBkZSBsYXMgZXRpcXVldGFzXG4gICAgcHVibGljIG9idGVuZXJKZXJhcnF1aWFFdGlxdWV0YXMoZXRpcXVldGFzOiBzdHJpbmdbXSk6IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PiB7XG4gICAgICAgIGNvbnN0IGplcmFycXVpYSA9IG5ldyBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4oKTtcblxuICAgICAgICBldGlxdWV0YXMuZm9yRWFjaChldGlxdWV0YSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hciBlbCAjIGluaWNpYWxcbiAgICAgICAgICAgIGNvbnN0IHBhcnRlcyA9IGV0aXF1ZXRhLnNsaWNlKDEpLnNwbGl0KC9bLy1dLyk7XG4gICAgICAgICAgICBjb25zdCBjYXRlZ29yaWEgPSBwYXJ0ZXNbMF07XG5cbiAgICAgICAgICAgIGlmICghamVyYXJxdWlhLmhhcyhjYXRlZ29yaWEpKSB7XG4gICAgICAgICAgICAgICAgamVyYXJxdWlhLnNldChjYXRlZ29yaWEsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYXJ0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmV0aXF1ZXRhcyA9IHBhcnRlcy5zbGljZSgxKS5qb2luKCcvJyk7XG4gICAgICAgICAgICAgICAgamVyYXJxdWlhLmdldChjYXRlZ29yaWEpPy5hZGQoc3ViZXRpcXVldGFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGplcmFycXVpYTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBvYnRlbmVyRmVjaGFMb2NhbCgpOiBEYXRlIHtcbiAgICAgICAgY29uc3QgYWhvcmEgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBlc3RhbW9zIHRyYWJhamFuZG8gY29uIGxhIGZlY2hhIGxvY2FsXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShcbiAgICAgICAgICAgIGFob3JhLmdldEZ1bGxZZWFyKCksXG4gICAgICAgICAgICBhaG9yYS5nZXRNb250aCgpLFxuICAgICAgICAgICAgYWhvcmEuZ2V0RGF0ZSgpLFxuICAgICAgICAgICAgMCwgMCwgMFxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBwYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYVN0cjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IERhdGUgfCBudWxsIHtcbiAgICAgICAgaWYgKCFmZWNoYVN0cikgcmV0dXJuIG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgaW50ZXJwcmV0YW1vcyBsYSBmZWNoYSBlbiBsYSB6b25hIGhvcmFyaWEgbG9jYWxcbiAgICAgICAgICAgIGNvbnN0IFthXHUwMEYxbywgbWVzLCBkaWFdID0gZmVjaGFTdHIuc3BsaXQoJy0nKS5tYXAobnVtID0+IHBhcnNlSW50KG51bSkpO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGFcdTAwRjFvKSB8fCBpc05hTihtZXMpIHx8IGlzTmFOKGRpYSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhciBsYSBmZWNoYSBlbiBsYSB6b25hIGhvcmFyaWEgbG9jYWxcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhID0gbmV3IERhdGUoYVx1MDBGMW8sIG1lcyAtIDEsIGRpYSwgMCwgMCwgMCk7XG4gICAgICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzZWFuZG8gZmVjaGE6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgbm9ybWFsaXphckZlY2hhQVN0cmluZyhmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGFcdTAwRjFvID0gZmVjaGEuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbWVzID0gU3RyaW5nKGZlY2hhLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBkaWEgPSBTdHJpbmcoZmVjaGEuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICByZXR1cm4gYCR7YVx1MDBGMW99LSR7bWVzfS0ke2RpYX1gO1xuICAgIH1cblxuICAgIHB1YmxpYyBleHRyYWVyRGVwZW5kZW5jaWFzWUlkcyhsaW5lYTogc3RyaW5nKTogeyB0YXNrSWQ/OiBzdHJpbmc7IGRlcGVuZGVuY3lJZD86IHN0cmluZyB9IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBbmFsaXphbmRvIGxcdTAwRURuZWEgcGFyYSBJRHM6XCIsIGxpbmVhKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IHtcbiAgICAgICAgICAgIHRhc2tJZDogdW5kZWZpbmVkIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRlcGVuZGVuY3lJZDogdW5kZWZpbmVkIGFzIHN0cmluZyB8IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvLyBFeHRyYWVyIElEIHByb3BpbyBkZSBsYSB0YXJlYVxuICAgICAgICBjb25zdCB0YXNrSWRNYXRjaCA9IGxpbmVhLm1hdGNoKC9cdUQ4M0NcdUREOTRcXHMqKFthLXowLTldezUsN30pLyk7XG4gICAgICAgIGlmICh0YXNrSWRNYXRjaCkge1xuICAgICAgICAgICAgcmVzdWx0YWRvLnRhc2tJZCA9IHRhc2tJZE1hdGNoWzFdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJJRCBlbmNvbnRyYWRvOlwiLCByZXN1bHRhZG8udGFza0lkKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBFeHRyYWVyIElEIGRlIGRlcGVuZGVuY2lhXG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY3lNYXRjaCA9IGxpbmVhLm1hdGNoKC9cdTI2RDRcXHMqKFthLXowLTldezUsN30pLyk7XG4gICAgICAgIGlmIChkZXBlbmRlbmN5TWF0Y2gpIHtcbiAgICAgICAgICAgIHJlc3VsdGFkby5kZXBlbmRlbmN5SWQgPSBkZXBlbmRlbmN5TWF0Y2hbMV07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlcGVuZGVuY2lhIGVuY29udHJhZGE6XCIsIHJlc3VsdGFkby5kZXBlbmRlbmN5SWQpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiByZXN1bHRhZG87XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBhc3luYyB2ZXJpZmljYXJFc3RhZG9UYXJlYSh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8e1xuICAgICAgICBjb21wbGV0YWRhOiBib29sZWFuO1xuICAgICAgICBydXRhQXJjaGl2bz86IHN0cmluZztcbiAgICAgICAgdGl0dWxvQXJjaGl2bz86IHN0cmluZztcbiAgICAgICAgdGV4dG9UYXJlYT86IHN0cmluZztcbiAgICB9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFxuVmVyaWZpY2FuZG8gZXN0YWRvIGRlIHRhcmVhOlwiLCB0YXNrSWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciB0b2RvcyBsb3MgYXJjaGl2b3MgeSBmaWx0cmFyIGxvcyBleGNsdWlkb3NcbiAgICAgICAgY29uc3QgdG9kb3NMb3NBcmNoaXZvcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGZpbGVzUGFyYVByb2Nlc2FyID0gdG9kb3NMb3NBcmNoaXZvcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5kZWJlRXhjbHVpckFyY2hpdm8oZmlsZSkpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYEJ1c2NhbmRvIGVuICR7ZmlsZXNQYXJhUHJvY2VzYXIubGVuZ3RofSBhcmNoaXZvcyAoZXhjbHVpZG9zOiAke3RvZG9zTG9zQXJjaGl2b3MubGVuZ3RoIC0gZmlsZXNQYXJhUHJvY2VzYXIubGVuZ3RofSlgKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1BhcmFQcm9jZXNhcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZWEgb2YgbGluZWFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lYS5pbmNsdWRlcyhgXHVEODNDXHVERDk0ICR7dGFza0lkfWApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc3RhQ29tcGxldGFkYSA9IGxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFt4XScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0dWxvQXJjaGl2byA9IHRoaXMub2J0ZW5lclRpdHVsb05vdGEoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b1RhcmVhID0gdGhpcy5saW1waWFyVGV4dG9UYXJlYShsaW5lYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhcmVhIGVuY29udHJhZGEgZW46XCIsIGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBjb21wbGV0YWRhOlwiLCBlc3RhQ29tcGxldGFkYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRleHRvIGRlIGxhIHRhcmVhOlwiLCB0ZXh0b1RhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0YWRhOiBlc3RhQ29tcGxldGFkYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydXRhQXJjaGl2bzogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsb0FyY2hpdm86IHRpdHVsb0FyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dG9UYXJlYTogdGV4dG9UYXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2VzYW5kbyBhcmNoaXZvICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVGFyZWEgbm8gZW5jb250cmFkYSBlbiBsb3MgYXJjaGl2b3MgcGVybWl0aWRvc1wiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBsZXRhZGE6IGZhbHNlXG4gICAgICAgIH07XG4gICAgfVxuXG5cbiAgICAvLyBFbiBsYSBjbGFzZSBUYXNrVXRpbHNcblxucHVibGljIGV4dHJhZXJFdGlxdWV0YXMobGluZWE6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBldGlxdWV0YXM6IHN0cmluZ1tdID0gW107XG4gICAgXG4gICAgLy8gUGF0cm9uZXMgcGFyYSBpZGVudGlmaWNhciBkaWZlcmVudGVzIGZvcm1hdG9zIGRlIGV0aXF1ZXRhc1xuICAgIGNvbnN0IHBhdHJvbmVzRXRpcXVldGFzID0gW1xuICAgICAgICAvLyBFdGlxdWV0YXMgZGUgcGVyc29uYXMgY29uIGZvcm1hdG8gI3B4LU5vbWJyZV9BcGVsbGlkbyBcbiAgICAgICAgLyNweC1bQS1aYS16XSsoPzpfW0EtWmEtel0rKSooPzpfW0EtWmEtel0rKT9cXGIvZyxcbiAgICAgICAgXG4gICAgICAgIC8vIEV0aXF1ZXRhcyBzaW1wbGVzOiAjdG9kb2lzdFxuICAgICAgICAvI1tcXHctXStcXGIvZyxcbiAgICAgICAgXG4gICAgICAgIC8vIEV0aXF1ZXRhcyBjb24gamVyYXJxdVx1MDBFRGEgdXNhbmRvIFwiL1wiOiAjY3gvYWxndW5hL2Nvc2FcbiAgICAgICAgLyNbXFx3LV0rKD86XFwvW1xcdy1dKykrXFxiL2csXG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YXMgY29uIGplcmFycXVcdTAwRURhIHVzYW5kbyBcIi1cIjogI2N4LWFsZ3VuYS1jb3NhXG4gICAgICAgIC8jW1xcdy1dKyg/Oi1bXFx3LV0rKStcXGIvZ1xuICAgIF07XG5cbiAgICAvLyBQcm9jZXNhciBjYWRhIHBhdHJcdTAwRjNuXG4gICAgcGF0cm9uZXNFdGlxdWV0YXMuZm9yRWFjaChwYXRyb24gPT4ge1xuICAgICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gbGluZWEubWF0Y2gocGF0cm9uKTtcbiAgICAgICAgaWYgKGNvaW5jaWRlbmNpYXMpIHtcbiAgICAgICAgICAgIGNvaW5jaWRlbmNpYXMuZm9yRWFjaChldGlxdWV0YSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRXZpdGFyIGR1cGxpY2Fkb3MgeSBhc2VndXJhciBxdWUgc2VhIHVuYSBldGlxdWV0YSB2XHUwMEUxbGlkYVxuICAgICAgICAgICAgICAgIGlmICghZXRpcXVldGFzLmluY2x1ZGVzKGV0aXF1ZXRhKSAmJiB0aGlzLmVzRXRpcXVldGFWYWxpZGEoZXRpcXVldGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV0aXF1ZXRhcy5wdXNoKGV0aXF1ZXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMub3JnYW5pemFyRXRpcXVldGFzKGV0aXF1ZXRhcyk7XG59XG5cbnByaXZhdGUgZXNFdGlxdWV0YVZhbGlkYShldGlxdWV0YTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBsYSBldGlxdWV0YSBjdW1wbGEgY29uIGVsIGZvcm1hdG8gYlx1MDBFMXNpY29cbiAgICBpZiAoIWV0aXF1ZXRhLnN0YXJ0c1dpdGgoJyMnKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmFsaWRhY2lcdTAwRjNuIGVzcGVjXHUwMEVEZmljYSBwYXJhIGV0aXF1ZXRhcyBkZSBwZXJzb25hc1xuICAgIGlmIChldGlxdWV0YS5zdGFydHNXaXRoKCcjcHgtJykpIHtcbiAgICAgICAgY29uc3Qgbm9tYnJlQ29tcGxldG8gPSBldGlxdWV0YS5zbGljZSg0KTsgLy8gUmVtb3ZlciAnI3B4LSdcbiAgICAgICAgLy8gVmVyaWZpY2FyIGZvcm1hdG8gTm9tYnJlX0FwZWxsaWRvKF9FbXByZXNhKT9cbiAgICAgICAgcmV0dXJuIC9eW0EtWmEtel0rKD86X1tBLVphLXpdKykqJC8udGVzdChub21icmVDb21wbGV0byk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZpY2FyIHF1ZSBubyBjb250ZW5nYSBjYXJhY3RlcmVzIGludlx1MDBFMWxpZG9zXG4gICAgY29uc3QgY2FyYWN0ZXJlc0ludmFsaWRvcyA9IC9bIUAkJV4mKigpKz17fVxcW1xcXTo7XCInPD4sLj9+XFxcXHxdLztcbiAgICBpZiAoY2FyYWN0ZXJlc0ludmFsaWRvcy50ZXN0KGV0aXF1ZXRhKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gVmVyaWZpY2FyIGVzdHJ1Y3R1cmEgcGFyYSBldGlxdWV0YXMgY29uIGplcmFycXVcdTAwRURhXG4gICAgY29uc3QgcGFydGVzRXRpcXVldGEgPSBldGlxdWV0YS5zbGljZSgxKS5zcGxpdCgvWy8tXS8pO1xuICAgIHJldHVybiBwYXJ0ZXNFdGlxdWV0YS5ldmVyeShwYXJ0ZSA9PiBwYXJ0ZS5sZW5ndGggPiAwKTtcbn1cblxucHJpdmF0ZSBvcmdhbml6YXJFdGlxdWV0YXMoZXRpcXVldGFzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICAvLyBPcmRlbmFyIGV0aXF1ZXRhcyBwb3IgY2F0ZWdvclx1MDBFRGFzIGNvbm9jaWRhcyB5IGx1ZWdvIGFsZmFiXHUwMEU5dGljYW1lbnRlXG4gICAgY29uc3QgY2F0ZWdvcmlhc0Nvbm9jaWRhcyA9IHtcbiAgICAgICAgdG9kb2lzdDogW10gYXMgc3RyaW5nW10sXG4gICAgICAgIGN4OiBbXSBhcyBzdHJpbmdbXSxcbiAgICAgICAgcHg6IFtdIGFzIHN0cmluZ1tdLFxuICAgICAgICBvdHJhczogW10gYXMgc3RyaW5nW11cbiAgICB9O1xuXG4gICAgZXRpcXVldGFzLmZvckVhY2goZXRpcXVldGEgPT4ge1xuICAgICAgICBpZiAoZXRpcXVldGEuc3RhcnRzV2l0aCgnI3B4LScpKSB7XG4gICAgICAgICAgICBjYXRlZ29yaWFzQ29ub2NpZGFzLnB4LnB1c2goZXRpcXVldGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGV0aXF1ZXRhLnN0YXJ0c1dpdGgoJyN0b2RvaXN0JykpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpYXNDb25vY2lkYXMudG9kb2lzdC5wdXNoKGV0aXF1ZXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChldGlxdWV0YS5tYXRjaCgvI2N4KD86Wy8tXXwkKS8pKSB7XG4gICAgICAgICAgICBjYXRlZ29yaWFzQ29ub2NpZGFzLmN4LnB1c2goZXRpcXVldGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2F0ZWdvcmlhc0Nvbm9jaWRhcy5vdHJhcy5wdXNoKGV0aXF1ZXRhKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gT3JkZW5hciBjYWRhIGNhdGVnb3JcdTAwRURhIGFsZmFiXHUwMEU5dGljYW1lbnRlXG4gICAgT2JqZWN0LnZhbHVlcyhjYXRlZ29yaWFzQ29ub2NpZGFzKS5mb3JFYWNoKGNhdGVnb3JpYSA9PiB7XG4gICAgICAgIGNhdGVnb3JpYS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpO1xuICAgIH0pO1xuXG4gICAgLy8gQ29tYmluYXIgdG9kYXMgbGFzIGNhdGVnb3JcdTAwRURhcyBlbiBlbCBvcmRlbiBkZXNlYWRvXG4gICAgcmV0dXJuIFtcbiAgICAgICAgLi4uY2F0ZWdvcmlhc0Nvbm9jaWRhcy50b2RvaXN0LFxuICAgICAgICAuLi5jYXRlZ29yaWFzQ29ub2NpZGFzLmN4LFxuICAgICAgICAuLi5jYXRlZ29yaWFzQ29ub2NpZGFzLnB4LFxuICAgICAgICAuLi5jYXRlZ29yaWFzQ29ub2NpZGFzLm90cmFzXG4gICAgXTtcbn1cblxuLy8gQWdyZWdhciBtXHUwMEU5dG9kbyBwYXJhIHZlcmlmaWNhciBleGNsdXNpb25lc1xucHJpdmF0ZSBkZWJlRXhjbHVpckFyY2hpdm8oZmlsZTogVEZpbGUpOiBib29sZWFuIHtcbiAgICAvLyBFeGNsdWlyIGxhIGNhcnBldGEgUGxhbnRpbGxhcyB5IHN1cyBzdWJjYXJwZXRhc1xuICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnUGxhbnRpbGxhcy8nKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBFeGNsdWlyIGxhIGNhcnBldGEgZGVsIHNpc3RlbWEgR1REIHkgc3VzIHN1YmNhcnBldGFzXG4gICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9gKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBFeGNsdWlyIGNhcnBldGEgZGUgYXJjaGl2b3MgKHNpIGV4aXN0ZSlcbiAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJ0FyY2hpdm8vJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5wdWJsaWMgYXN5bmMgZW5jb250cmFyTGluZWFzVGFyZWEoZmlsZTogVEZpbGUpOiBQcm9taXNlPE1hcDxzdHJpbmcsIExpbmVJbmZvPj4ge1xuICAgIGNvbnN0IGxpbmVhc1RhcmVhcyA9IG5ldyBNYXA8c3RyaW5nLCBMaW5lSW5mbz4oKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW5pZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgXG4gICAgICAgIGxpbmVhcy5mb3JFYWNoKChsaW5lYSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWFyIHVuYSBjbGF2ZSBcdTAwRkFuaWNhIGJhc2FkYSBlbiBlbCB0ZXh0byBkZSBsYSB0YXJlYVxuICAgICAgICAgICAgY29uc3QgdGV4dG9MaW1waW8gPSB0aGlzLmxpbXBpYXJUZXh0b1RhcmVhKGxpbmVhKTtcbiAgICAgICAgICAgIGlmICh0ZXh0b0xpbXBpbyAmJiBsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbJykpIHtcbiAgICAgICAgICAgICAgICBsaW5lYXNUYXJlYXMuc2V0KHRleHRvTGltcGlvLCB7XG4gICAgICAgICAgICAgICAgICAgIG51bWVybzogaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0bzogbGluZWEudHJpbSgpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc2FuZG8gbFx1MDBFRG5lYXMgZW4gJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGxpbmVhc1RhcmVhcztcbn1cblxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTWFuYWdlci91dGlscy90YXNrV2VpZ2h0Q2FsY3VsYXRvci50c1xuXG5pbXBvcnQgeyBUYXNrLCBFc3RhZG9UYXJlYSB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGFza0ludGVyZmFjZXMnO1xuaW1wb3J0IHsgVGFza1V0aWxzIH0gZnJvbSAnLi90YXNrVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVGFza1dlaWdodENhbGN1bGF0b3Ige1xuICAgIHByaXZhdGUgc3RhdGljIHRhc2tVdGlsczogVGFza1V0aWxzO1xuICAgIFxuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFdFSUdIVFMgPSB7XG4gICAgICAgIEhPUkFfRklOOiA1LFxuICAgICAgICBIT1JBX0lOSUNJTzogNSxcbiAgICAgICAgRFVFX0RBVEU6IDUsXG4gICAgICAgIFNDSEVEVUxFRDogNCxcbiAgICAgICAgU1RBUlQ6IDMsXG4gICAgICAgIFBSSU9SSVRZOiB7XG4gICAgICAgICAgICBISUdIRVNUOiA0LFxuICAgICAgICAgICAgSElHSDogMyxcbiAgICAgICAgICAgIE1FRElVTTogMixcbiAgICAgICAgICAgIExPVzogLTEsXG4gICAgICAgICAgICBMT1dFU1Q6IC0yXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBzZXRUYXNrVXRpbHModXRpbHM6IFRhc2tVdGlscykge1xuICAgICAgICBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMgPSB1dGlscztcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGdldEZlY2hhUHJpb3JpdGFyaWEodGFzazogVGFzaywgdGlwb0ZlY2hhOiAnc3RhcnQnIHwgJ2R1ZScgfCAnc2NoZWR1bGVkJyB8ICdhbnknID0gJ2FueScpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgaWYgKCF0YXNrKSByZXR1cm4gbnVsbDtcblxuICAgICAgICBzd2l0Y2ggKHRpcG9GZWNoYSkge1xuICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLmZlY2hhU3RhcnQgfHwgbnVsbDtcbiAgICAgICAgICAgIGNhc2UgJ2R1ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suZmVjaGFWZW5jaW1pZW50byB8fCBudWxsO1xuICAgICAgICAgICAgY2FzZSAnc2NoZWR1bGVkJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5mZWNoYVNjaGVkdWxlZCB8fCBudWxsO1xuICAgICAgICAgICAgY2FzZSAnYW55JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5mZWNoYVZlbmNpbWllbnRvIHx8IHRhc2suZmVjaGFTY2hlZHVsZWQgfHwgdGFzay5mZWNoYVN0YXJ0IHx8IG51bGw7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzaG91bGRJbmNsdWRlVGFzayh0YXNrOiBUYXNrLCBzZWFyY2hUeXBlOiBzdHJpbmcsIGN1cnJlbnREYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUYXNrVXRpbHMgbm8gaW5pY2lhbGl6YWRvIGVuIFRhc2tXZWlnaHRDYWxjdWxhdG9yJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgc3dpdGNoIChzZWFyY2hUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhcnRfdmVuY2lkYXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU3RhcnQgPSB0YXNrLmZlY2hhU3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVjaGFTdGFydCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTdGFydE9iaiA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYVN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhU3RhcnRPYmogIT09IG51bGwgJiYgZmVjaGFTdGFydE9iaiA8IGN1cnJlbnREYXRlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhc2UgJ3ZlbmNpZGFzJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVZlbmNpbWllbnRvID0gdGFzay5mZWNoYVZlbmNpbWllbnRvO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlY2hhVmVuY2ltaWVudG8pIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVZlbmNPYmogPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFWZW5jaW1pZW50byk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYVZlbmNPYmogIT09IG51bGwgJiYgZmVjaGFWZW5jT2JqIDwgY3VycmVudERhdGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FzZSAnaG95Jzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYXMgPSBbdGFzay5mZWNoYVZlbmNpbWllbnRvLCB0YXNrLmZlY2hhU2NoZWR1bGVkLCB0YXNrLmZlY2hhU3RhcnRdLmZpbHRlcihmID0+IGYpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFzLnNvbWUoZmVjaGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFPYmogPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGEhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYU9iaj8udG9EYXRlU3RyaW5nKCkgPT09IGN1cnJlbnREYXRlLnRvRGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYXNlICdwcm94aW1hcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFWZW5jaW1pZW50byA9IHRhc2suZmVjaGFWZW5jaW1pZW50bztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWNoYVZlbmNpbWllbnRvKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFWZW5jT2JqID0gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhVmVuY2ltaWVudG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlY2hhVmVuY09iaikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpYXNEaWZlcmVuY2lhID0gTWF0aC5jZWlsKFxuICAgICAgICAgICAgICAgICAgICAgICAgKGZlY2hhVmVuY09iai5nZXRUaW1lKCkgLSBjdXJyZW50RGF0ZS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkaWFzRGlmZXJlbmNpYSA+PSAwICYmIGRpYXNEaWZlcmVuY2lhIDw9IDc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gc2hvdWxkSW5jbHVkZVRhc2s6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjYWxjdWxhdGVXZWlnaHQodGFzazogVGFzayk6IHsgYmFzZVdlaWdodDogbnVtYmVyOyB0aW1lV2VpZ2h0OiBudW1iZXI7IHByaW9yaXR5V2VpZ2h0OiBudW1iZXI7IHRvdGFsV2VpZ2h0OiBudW1iZXIgfSB7XG4gICAgICAgIGxldCBiYXNlV2VpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHRpbWVXZWlnaHQgPSAwO1xuICAgICAgICBsZXQgcHJpb3JpdHlXZWlnaHQgPSAwO1xuXG4gICAgICAgIC8vIFBlc29zIHBvciBmZWNoYXNcbiAgICAgICAgaWYgKHRhc2suZmVjaGFWZW5jaW1pZW50bykgYmFzZVdlaWdodCArPSB0aGlzLldFSUdIVFMuRFVFX0RBVEU7XG4gICAgICAgIGlmICh0YXNrLmZlY2hhU2NoZWR1bGVkKSBiYXNlV2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5TQ0hFRFVMRUQ7XG4gICAgICAgIGlmICh0YXNrLmZlY2hhU3RhcnQpIGJhc2VXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlNUQVJUO1xuXG4gICAgICAgIC8vIFBlc29zIHBvciBob3Jhc1xuICAgICAgICBpZiAodGFzay5ob3JhRmluKSB0aW1lV2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5IT1JBX0ZJTjtcbiAgICAgICAgaWYgKHRhc2suaG9yYUluaWNpbykgdGltZVdlaWdodCArPSB0aGlzLldFSUdIVFMuSE9SQV9JTklDSU87XG5cbiAgICAgICAgLy8gUGVzbyBwb3IgcHJpb3JpZGFkXG4gICAgICAgIGNvbnN0IHRleHRvID0gdGFzay50ZXh0by50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQScpKSBwcmlvcml0eVdlaWdodCArPSB0aGlzLldFSUdIVFMuUFJJT1JJVFkuSElHSEVTVDtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUInKSkgcHJpb3JpdHlXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkhJR0g7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNDJykpIHByaW9yaXR5V2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5QUklPUklUWS5NRURJVU07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNEJykpIHByaW9yaXR5V2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5QUklPUklUWS5MT1c7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VDJykpIHByaW9yaXR5V2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5QUklPUklUWS5MT1dFU1Q7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJhc2VXZWlnaHQsXG4gICAgICAgICAgICB0aW1lV2VpZ2h0LFxuICAgICAgICAgICAgcHJpb3JpdHlXZWlnaHQsXG4gICAgICAgICAgICB0b3RhbFdlaWdodDogYmFzZVdlaWdodCArIHRpbWVXZWlnaHQgKyBwcmlvcml0eVdlaWdodFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc29ydFRhc2tzKHRhc2tzOiBUYXNrW10pOiBUYXNrW10ge1xuICAgICAgICBpZiAoIVRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGFza1V0aWxzIG5vIGluaWNpYWxpemFkbyBlbiBUYXNrV2VpZ2h0Q2FsY3VsYXRvcicpO1xuICAgICAgICAgICAgcmV0dXJuIHRhc2tzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRhc2tzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gUHJpbWVybyBvcmRlbmFyIHBvciBmZWNoYVxuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhQSA9IHRoaXMuZ2V0RmVjaGFQcmlvcml0YXJpYShhLCAnYW55Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFCID0gdGhpcy5nZXRGZWNoYVByaW9yaXRhcmlhKGIsICdhbnknKTtcblxuICAgICAgICAgICAgICAgIGlmIChmZWNoYUEgIT09IGZlY2hhQikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQSA9IGZlY2hhQSA/IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYUEpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBmZWNoYUIgPyBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFCKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZUEgJiYgZGF0ZUIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlQS5nZXRUaW1lKCkgLSBkYXRlQi5nZXRUaW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2kgbGFzIGZlY2hhcyBzb24gaWd1YWxlcywgb3JkZW5hciBwb3IgaG9yYVxuICAgICAgICAgICAgICAgIGlmIChhLmhvcmFJbmljaW8gJiYgYi5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhLmhvcmFJbmljaW8gIT09IGIuaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuaG9yYUluaWNpby5sb2NhbGVDb21wYXJlKGIuaG9yYUluaWNpbyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGEuaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiLmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU2kgbGFzIGhvcmFzIHNvbiBpZ3VhbGVzIG8gbm8gZXhpc3Rlbiwgb3JkZW5hciBwb3IgcGVzb1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodEEgPSBhLndlaWdodD8udG90YWxXZWlnaHQgPz8gMDtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHRCID0gYi53ZWlnaHQ/LnRvdGFsV2VpZ2h0ID8/IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdlaWdodEIgLSB3ZWlnaHRBO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9yZGVuYW5kbyB0YXJlYXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVCYXNlV2VpZ2h0KHRhc2s6IFRhc2spOiBudW1iZXIge1xuICAgICAgICBsZXQgd2VpZ2h0ID0gMDtcblxuICAgICAgICAvLyBQZXNvcyBwb3IgZmVjaGFzXG4gICAgICAgIGlmICh0YXNrLmZlY2hhVmVuY2ltaWVudG8pIHdlaWdodCArPSB0aGlzLldFSUdIVFMuRFVFX0RBVEU7XG4gICAgICAgIGlmICh0YXNrLmZlY2hhU2NoZWR1bGVkKSB3ZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlNDSEVEVUxFRDtcbiAgICAgICAgaWYgKHRhc2suZmVjaGFTdGFydCkgd2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5TVEFSVDtcblxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZVRpbWVXZWlnaHQodGFzazogVGFzayk6IG51bWJlciB7XG4gICAgICAgIGxldCB3ZWlnaHQgPSAwO1xuXG4gICAgICAgIGlmICh0YXNrLmhvcmFGaW4pIHdlaWdodCArPSB0aGlzLldFSUdIVFMuSE9SQV9GSU47XG4gICAgICAgIGlmICh0YXNrLmhvcmFJbmljaW8pIHdlaWdodCArPSB0aGlzLldFSUdIVFMuSE9SQV9JTklDSU87XG5cbiAgICAgICAgcmV0dXJuIHdlaWdodDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVQcmlvcml0eVdlaWdodCh0YXNrOiBUYXNrKTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgdGV4dG8gPSB0YXNrLnRleHRvLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0EnKSkgcmV0dXJuIHRoaXMuV0VJR0hUUy5QUklPUklUWS5ISUdIRVNUO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQicpKSByZXR1cm4gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkhJR0g7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNDJykpIHJldHVybiB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTUVESVVNO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzRCcpKSByZXR1cm4gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkxPVztcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUMnKSkgcmV0dXJuIHRoaXMuV0VJR0hUUy5QUklPUklUWS5MT1dFU1Q7XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIHN0YXRpYyBlc0ZlY2hhVmFsaWRhKGZlY2hhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqID0gbmV3IERhdGUoZmVjaGEpO1xuICAgICAgICAgICAgcmV0dXJuIGZlY2hhT2JqLnRvU3RyaW5nKCkgIT09ICdJbnZhbGlkIERhdGUnO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL2luZGV4LnRzXG5cbmltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XG5pbXBvcnQgeyBUYWJUaXRsZU1hbmFnZXIgfSBmcm9tICcuL1RhYlRpdGxlTWFuYWdlcic7XG5pbXBvcnQgeyBUYWJUaXRsZVNldHRpbmdzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL1RhYlRpdGxlU2V0dGluZ3MnO1xuaW1wb3J0IHsgREVGQVVMVF9UQUJfU0VUVElOR1MgfSBmcm9tICcuL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9UYWJUaXRsZSB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBUYWJUaXRsZVNldHRpbmdzO1xuICAgIHByaXZhdGUgdGFiTWFuYWdlcjogVGFiVGl0bGVNYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBERUZBVUxUX1RBQl9TRVRUSU5HUztcbiAgICB9XG5cbiAgICBhc3luYyBhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIENhcmdhciBjb25maWd1cmFjaVx1MDBGM25cbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIHRpdGxlRGlzcGxheU1vZGUgZXN0XHUwMEUxIGNvbmZpZ3VyYWRvXG4gICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MudGl0bGVEaXNwbGF5TW9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MudGl0bGVEaXNwbGF5TW9kZSA9ICdhbGlhcyc7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW5pY2lhbGl6YXIgZWwgbWFuZWphZG9yIGRlIHRcdTAwRUR0dWxvc1xuICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyID0gbmV3IFRhYlRpdGxlTWFuYWdlcih0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhciBsb3MgY29tYW5kb3NcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXIgZXZlbnRvcyBwYXJhIGNhbWJpb3MgZGUgbGF5b3V0XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXI/LnVwZGF0ZUFsbFRhYnMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgdGFicyBvbiBsYXlvdXQgY2hhbmdlOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXIgZXZlbnRvIHBhcmEgY3VhbmRvIHNlIGFicmEgdW4gYXJjaGl2b1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW9wZW4nLCAoZmlsZTogVEZpbGUgfCBudWxsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSAmJiB0aGlzLnRhYk1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXIudXBkYXRlVGFiRm9yRmlsZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3IgdXBkYXRpbmcgdGFiIG9uIGZpbGUgb3BlbjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gQWN0dWFsaXphY2lcdTAwRjNuIGluaWNpYWwgZGVzcHVcdTAwRTlzIGRlIHVuIGJyZXZlIHJldHJhc29cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlcj8udXBkYXRlQWxsVGFicygpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3IgYWN0aXZhdGluZyBUYWJUaXRsZSBtb2R1bGU6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhYk1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXIucmVzdG9yZURlZmF1bHRUaXRsZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciBkZWFjdGl2YXRpbmcgVGFiVGl0bGUgbW9kdWxlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9UQUJfU0VUVElOR1MsIGxvYWRlZERhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciBsb2FkaW5nIFRhYlRpdGxlIHNldHRpbmdzOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBERUZBVUxUX1RBQl9TRVRUSU5HUztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIHNhdmluZyBUYWJUaXRsZSBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL2NvbW1hbmRzLnRzXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBUYWJUaXRsZVNldHRpbmdzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL1RhYlRpdGxlU2V0dGluZ3MnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbiwgc2V0dGluZ3M6IFRhYlRpdGxlU2V0dGluZ3MpIHtcbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2V0LXRhYi10aXRsZS1hbGlhcycsXG4gICAgICAgIG5hbWU6ICdNb3N0cmFyIGFsaWFzIGVuIHBlc3RhXHUwMEYxYXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgc2V0dGluZ3MudGl0bGVEaXNwbGF5TW9kZSA9ICdhbGlhcyc7XG4gICAgICAgICAgICBwbHVnaW4uc2F2ZURhdGEoc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2V0LXRhYi10aXRsZS10aXRsZScsXG4gICAgICAgIG5hbWU6ICdNb3N0cmFyIHRcdTAwRUR0dWxvIGVuIHBlc3RhXHUwMEYxYXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgc2V0dGluZ3MudGl0bGVEaXNwbGF5TW9kZSA9ICd0aXRsZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2F2ZURhdGEoc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAnc2V0LXRhYi10aXRsZS1maWxlbmFtZScsXG4gICAgICAgIG5hbWU6ICdNb3N0cmFyIG5vbWJyZSBkZSBhcmNoaXZvIGVuIHBlc3RhXHUwMEYxYXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgc2V0dGluZ3MudGl0bGVEaXNwbGF5TW9kZSA9ICdmaWxlbmFtZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2F2ZURhdGEoc2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgfSk7XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL1RhYlRpdGxlTWFuYWdlci50c1xuaW1wb3J0IHsgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEN1c3RvbU1hcmtkb3duVmlldyB9IGZyb20gJy4vdmlld3MvQ3VzdG9tTWFya2Rvd25WaWV3JztcbmltcG9ydCB7IFRhYlRpdGxlU2V0dGluZ3MgfSBmcm9tICcuL2ludGVyZmFjZXMvVGFiVGl0bGVTZXR0aW5ncyc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICcuL3V0aWxzL2xvZ2dlcic7XG5cbmV4cG9ydCBjbGFzcyBUYWJUaXRsZU1hbmFnZXIge1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogVGFiVGl0bGVTZXR0aW5ncztcbiAgICBwcml2YXRlIGN1c3RvbVZpZXdzOiBNYXA8c3RyaW5nLCBDdXN0b21NYXJrZG93blZpZXc+O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4sIHNldHRpbmdzOiBUYWJUaXRsZVNldHRpbmdzKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuY3VzdG9tVmlld3MgPSBuZXcgTWFwKCk7XG4gICAgICAgIExvZ2dlci5pbmZvKCdUYWJUaXRsZU1hbmFnZXIgaW5pdGlhbGl6ZWQnKTtcbiAgICB9XG5cbiAgICB1cGRhdGVBbGxUYWJzKCkge1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiKGxlYWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlVGFiRm9yRmlsZShmaWxlOiBURmlsZSkge1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiBsZWFmLnZpZXcuZmlsZT8ucGF0aCA9PT0gZmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVUYWIobGVhZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHVwZGF0ZVRhYihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgICAgIGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykgfHwgIWxlYWYudmlldy5maWxlKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgeyBkaXNwbGF5VGl0bGUsIHNvdXJjZSB9ID0gYXdhaXQgdGhpcy5nZXRQcmVmZXJyZWRUaXRsZVdpdGhTb3VyY2UobGVhZi52aWV3LmZpbGUpO1xuICAgICAgICBpZiAoZGlzcGxheVRpdGxlKSB7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRUaXRsZSA9IGAke2xlYWYudmlldy5maWxlLmJhc2VuYW1lfSAvICR7ZGlzcGxheVRpdGxlfWA7XG4gICAgICAgICAgICBsZWFmLnZpZXcudGl0bGVFbC5pbm5lclRleHQgPSBmb3JtYXR0ZWRUaXRsZTtcbiAgICAgICAgICAgIGlmIChsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbCkge1xuICAgICAgICAgICAgICAgIGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLmlubmVyVGV4dCA9IGZvcm1hdHRlZFRpdGxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKGBVcGRhdGVkIHRhYiB0aXRsZSB0bzogJHtmb3JtYXR0ZWRUaXRsZX0gKHNvdXJjZTogJHtzb3VyY2V9KWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UHJlZmVycmVkVGl0bGVXaXRoU291cmNlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx7IGRpc3BsYXlUaXRsZTogc3RyaW5nIHwgbnVsbDsgc291cmNlOiBzdHJpbmcgfT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhd2FpdCB0aGlzLndhaXRGb3JNZXRhZGF0YShmaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJpbWVybyBpbnRlbnRhIG9idGVuZXIgZWwgcHJpbWVyIGFsaWFzXG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmFsaWFzZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YS5hbGlhc2VzKSAmJiBtZXRhZGF0YS5hbGlhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG1ldGFkYXRhLmFsaWFzZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdhbGlhc2VzJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1ldGFkYXRhLmFsaWFzZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRpdGxlOiBtZXRhZGF0YS5hbGlhc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnYWxpYXNlcydcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNpIG5vIGhheSBhbGlhcywgaW50ZW50YSBvYnRlbmVyIGVsIHRcdTAwRUR0dWxvXG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LnRpdHVsbykge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG1ldGFkYXRhLnRpdHVsbyxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiAndGl0dWxvJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNpIG5vIGhheSBhbGlhcyBuaSB0XHUwMEVEdHVsbywgdXNhIHNvbG8gZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG51bGwsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnYmFzZW5hbWUnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgTG9nZ2VyLmVycm9yKGBFcnJvciBnZXR0aW5nIHRpdGxlIGZvciAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgZGlzcGxheVRpdGxlOiBudWxsLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2Vycm9yJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgd2FpdEZvck1ldGFkYXRhKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXhBdHRlbXB0cyA9IDEwO1xuICAgICAgICAgICAgbGV0IGF0dGVtcHRzID0gMDtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tNZXRhZGF0YSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGU/LmZyb250bWF0dGVyIHx8IGF0dGVtcHRzID49IG1heEF0dGVtcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY2FjaGU/LmZyb250bWF0dGVyIHx8IHt9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGNoZWNrTWV0YWRhdGEsIDEwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2hlY2tNZXRhZGF0YSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXN0b3JlRGVmYXVsdFRpdGxlcygpIHtcbiAgICAgICAgTG9nZ2VyLmluZm8oJ1Jlc3RvcmluZyBkZWZhdWx0IHRpdGxlcycpO1xuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldyAmJiBsZWFmLnZpZXcuZmlsZSkge1xuICAgICAgICAgICAgICAgIGxlYWYudmlldy50aXRsZUVsLmlubmVyVGV4dCA9IGxlYWYudmlldy5maWxlLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgIGlmIChsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbCkge1xuICAgICAgICAgICAgICAgICAgICBsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbC5pbm5lclRleHQgPSBsZWFmLnZpZXcuZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3ZpZXdzL0N1c3RvbU1hcmtkb3duVmlldy50c1xuaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tTWFya2Rvd25WaWV3IGV4dGVuZHMgTWFya2Rvd25WaWV3IHtcbiAgICBwcml2YXRlIGN1c3RvbVRpdGxlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVRpdGxlIHx8IHN1cGVyLmdldERpc3BsYXlUZXh0KCk7XG4gICAgfVxuXG4gICAgc2V0Q3VzdG9tVGl0bGUodGl0bGU6IHN0cmluZyB8IG51bGwpIHtcbiAgICAgICAgdGhpcy5jdXN0b21UaXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLnRleHRDb250ZW50ID0gdGl0bGUgfHwgdGhpcy5maWxlPy5iYXNlbmFtZSB8fCAnJztcbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3V0aWxzL2xvZ2dlci50c1xuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUFJFRklYID0gJ1x1RDgzQ1x1REZGN1x1RkUwRiBbVGFiVGl0bGVdJztcbiAgICBcbiAgICBzdGF0aWMgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS5pbmZvKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dGhpcy5QUkVGSVh9ICR7bWVzc2FnZX1gLCBlcnJvciB8fCAnJyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyB3YXJuKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHNcbmltcG9ydCB7IFRhYlRpdGxlU2V0dGluZ3MgfSBmcm9tICcuLi9pbnRlcmZhY2VzL1RhYlRpdGxlU2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9UQUJfU0VUVElOR1M6IFRhYlRpdGxlU2V0dGluZ3MgPSB7XG4gICAgdGl0bGVEaXNwbGF5TW9kZTogJ2ZpbGVuYW1lJ1xufTsiLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvaW5kZXgudHNcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzLCBkZWFjdGl2YXRlVGFza01hbmFnZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvVGFza01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHt9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBkZWFjdGl2YXRlVGFza01hbmFnZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9jb21tYW5kcy50c1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5cbmNsYXNzIFRhc2tEYXlzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBkaWFzOiBudW1iZXIgPSA3O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luSW5zdGFuY2UuYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb3N0cmFyIHRhcmVhcyBwclx1MDBGM3hpbWFzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTlx1MDBGQW1lcm8gZGUgZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNb3N0cmFyIHRhcmVhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zIFggZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSgnNycpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFzID0gcGFyc2VJbnQodmFsdWUpIHx8IDc7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdNb3N0cmFyIHRhcmVhcycpXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbkluc3RhbmNlLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkubW9zdHJhclRhcmVhc1Byb3hpbWFzKHRoaXMuZGlhcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gQVx1MDBGMWFkaXIgbnVldmEgY2xhc2UgbW9kYWwgcGFyYSBjb25maWd1cmFyIGRcdTAwRURhcyBmdXR1cm9zXG5jbGFzcyBGdXR1cmVUYXNrc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZGlhczogbnVtYmVyID0gNztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBsdWdpbkluc3RhbmNlOiBNeVBsdWdpbixcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0RGF5czogbnVtYmVyID0gN1xuICAgICkge1xuICAgICAgICBzdXBlcihwbHVnaW5JbnN0YW5jZS5hcHApO1xuICAgICAgICB0aGlzLmRpYXMgPSBkZWZhdWx0RGF5cztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb3N0cmFyIHRhcmVhcyBmdXR1cmFzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTlx1MDBGQW1lcm8gZGUgZFx1MDBFRGFzIGhhY2lhIGFkZWxhbnRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNb3N0cmFyIHRhcmVhcyBwcm9ncmFtYWRhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zIFggZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmRlZmF1bHREYXlzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFzID0gcGFyc2VJbnQodmFsdWUpIHx8IDc7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdNb3N0cmFyIHRhcmVhcycpXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbkluc3RhbmNlLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkubW9zdHJhclRhcmVhc0Z1dHVyYXModGhpcy5kaWFzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBTY2hlZHVsZWRUYXNrRGF5c01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZGlhczogbnVtYmVyID0gNztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBsdWdpbkluc3RhbmNlOiBNeVBsdWdpbiwgXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdERheXM6IG51bWJlciA9IDdcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGx1Z2luSW5zdGFuY2UuYXBwKTtcbiAgICAgICAgdGhpcy5kaWFzID0gZGVmYXVsdERheXM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTW9zdHJhciB0YXJlYXMgcHJvZ3JhbWFkYXMgcHJcdTAwRjN4aW1hcycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05cdTAwRkFtZXJvIGRlIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW9zdHJhciB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyBYIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5kZWZhdWx0RGF5cy50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhcyA9IHBhcnNlSW50KHZhbHVlKSB8fCA3O1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTW9zdHJhciB0YXJlYXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luSW5zdGFuY2UudGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTY2hlZHVsZWRQcm94aW1hcyh0aGlzLmRpYXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclRhc2tNYW5hZ2VyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBjb25zdCBtYW5hZ2VtZW50UGx1Z2luID0gcGx1Z2luIGFzIE15UGx1Z2luO1xuICAgIGNvbnN0IGNvbW1hbmRJZHM6IHN0cmluZ1tdID0gW107XG5cblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyB2ZW5jaWRhc1xuICAgIGNvbnN0IHRhcmVhc1ZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtdmVuY2lkYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBWZW5jaWRhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1ZlbmNpZGFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1ZlbmNpZGFzQ29tbWFuZC5pZCk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgcHJcdTAwRjN4aW1hc1xuICAgIGNvbnN0IHRhcmVhc1Byb3hpbWFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtcHJveGltYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBQclx1MDBGM3hpbWFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzUHJveGltYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzUHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBwclx1MDBGM3hpbWFzIGNvbiBkXHUwMEVEYXMgcGVyc29uYWxpemFkb3NcbiAgICBjb25zdCB0YXJlYXNQcm94aW1hc0N1c3RvbUNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXByb3hpbWFzLWN1c3RvbVwiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFByXHUwMEYzeGltYXMgKEVzcGVjaWZpY2FyIGRcdTAwRURhcylcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFRhc2tEYXlzTW9kYWwobWFuYWdlbWVudFBsdWdpbik7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNQcm94aW1hc0N1c3RvbUNvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGRlIGhveVxuICAgIGNvbnN0IHRhcmVhc0hveUNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWhveVwiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIHBhcmEgSG95XCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzSG95KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc0hveUNvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGNvbiBpbmljaW8gdmVuY2lkb1xuICAgIGNvbnN0IHRhcmVhc1N0YXJ0VmVuY2lkYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1zdGFydC12ZW5jaWRhc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFBlbmRpZW50ZXMgZGUgSW5pY2lhclwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1N0YXJ0VmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU3RhcnRWZW5jaWRhc0NvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHBvciBpbmljaWFyXG4gICAgY29uc3QgdGFyZWFzU3RhcnRQcm94aW1hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXN0YXJ0LXByb3hpbWFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgcG9yIEluaWNpYXIgKFZlbmNpZGFzIHkgUHJcdTAwRjN4aW1hcylcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTdGFydFByb3hpbWFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1N0YXJ0UHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgICAvLyBBXHUwMEYxYWRpciBudWV2byBjb21hbmRvIHBhcmEgdGFyZWFzIGZ1dHVyYXNcbiAgICAgY29uc3QgdGFyZWFzRnV0dXJhc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWZ1dHVyYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBGdXR1cmFzIFByb2dyYW1hZGFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGdXR1cmVUYXNrc01vZGFsKG1hbmFnZW1lbnRQbHVnaW4pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzRnV0dXJhc0NvbW1hbmQuaWQpO1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIG51ZXZvIGNvbWFuZG8gcGFyYSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgY29uc3QgdGFyZWFzRW5FamVjdWNpb25Db21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtZW4tZWplY3VjaW9uXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIGVuIEVqZWN1Y2lcdTAwRjNuXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzRW5FamVjdWNpb24oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzRW5FamVjdWNpb25Db21tYW5kLmlkKTtcblxuICAgICAgICAvLyBDb21hbmRvIHBhcmEgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc1xuICAgIGNvbnN0IHRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtc2NoZWR1bGVkLXZlbmNpZGFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgU2NoZWR1bGVkIFZlbmNpZGFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzU2NoZWR1bGVkVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU2NoZWR1bGVkVmVuY2lkYXNDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXNcbiAgICBjb25zdCB0YXJlYXNTY2hlZHVsZWRQcm94aW1hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXNjaGVkdWxlZC1wcm94aW1hc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFNjaGVkdWxlZCBQclx1MDBGM3hpbWFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBTY2hlZHVsZWRUYXNrRGF5c01vZGFsKG1hbmFnZW1lbnRQbHVnaW4pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU2NoZWR1bGVkUHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgICAgLy8gQ29tYW5kbyBwYXJhIHRvZGFzIGxhcyB0YXJlYXMgdmVuY2lkYXNcbiAgICAgIGNvbnN0IHRvZGFzVGFyZWFzVmVuY2lkYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRvZGFzLXRhcmVhcy12ZW5jaWRhc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVG9kYXMgbGFzIFRhcmVhcyBWZW5jaWRhcyAoRHVlLCBTY2hlZHVsZWQsIFN0YXJ0KVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godG9kYXNUYXJlYXNWZW5jaWRhc0NvbW1hbmQuaWQpO1xuXG4gICAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgY29uIGRlcGVuZGVuY2lhc1xuICAgICAgY29uc3QgdGFyZWFzRGVwZW5kaWVudGVzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtZGVwZW5kaWVudGVzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgY29uIERlcGVuZGVuY2lhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0RlcGVuZGllbnRlcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNEZXBlbmRpZW50ZXNDb21tYW5kLmlkKTtcblxuICAgIGNvbnN0IHRhcmVhc1BlcnNvbmFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtcGVyc29uYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBwb3IgUGVyc29uYVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1BlcnNvbmFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1BlcnNvbmFzQ29tbWFuZC5pZCk7XG5cblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBudWV2byBjb21hbmRvIHBhcmEgdGFyZWFzIHBvciBjb250ZXh0b1xuICAgICAgICBjb25zdCB0YXJlYXNDb250ZXh0b3NDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtY29udGV4dG9zXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIHBvciBDb250ZXh0b1wiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0NvbnRleHRvcygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNDb250ZXh0b3NDb21tYW5kLmlkKTtcblxuICAgIC8vIEd1YXJkYXIgbG9zIElEcyBkZSBsb3MgY29tYW5kb3MgZW4gZWwgcGx1Z2luXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWRUYXNrTWFuYWdlckNvbW1hbmRJZHMgPSBjb21tYW5kSWRzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZVRhc2tNYW5hZ2VyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBjb25zdCBjb21tYW5kSWRzID0gKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWRUYXNrTWFuYWdlckNvbW1hbmRJZHM7XG4gICAgaWYgKCFjb21tYW5kSWRzKSByZXR1cm47XG4gICAgXG4gICAgY29tbWFuZElkcy5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNhbGxiYWNrID0gKCkgPT4gbmV3IE5vdGljZShcIkVzdGUgY29tYW5kbyBoYSBzaWRvIGRlc2FjdGl2YWRvLlwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIExpbXBpYXIgZWwgYXJyYXkgZGUgY29tYW5kb3MgcmVnaXN0cmFkb3NcbiAgICAocGx1Z2luIGFzIGFueSkucmVnaXN0ZXJlZFRhc2tNYW5hZ2VyQ29tbWFuZElkcyA9IFtdO1xufSIsICIvLyBzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvaW5kZXgudHNcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGF2aWV3UXVlcnlNYW5hZ2VyIH0gZnJvbSAnLi9EYXRhdmlld1F1ZXJ5TWFuYWdlcic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tICcuL2NvbW1hbmRzJztcbmltcG9ydCB7IFF1ZXJ5UmVuZGVyZXIgfSBmcm9tICcuL1F1ZXJ5UmVuZGVyZXInO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvRGF0YXZpZXdRdWVyaWVzIHtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgcXVlcnlNYW5hZ2VyOiBEYXRhdmlld1F1ZXJ5TWFuYWdlcjtcbiAgICBwcml2YXRlIHF1ZXJ5UmVuZGVyZXI6IFF1ZXJ5UmVuZGVyZXI7XG4gICAgcHJpdmF0ZSBfaXNBY3RpdmU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEluaWNpYWxpemFuZG8uLi4nKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyID0gbmV3IERhdGF2aWV3UXVlcnlNYW5hZ2VyKHBsdWdpbik7XG4gICAgICAgIHRoaXMucXVlcnlSZW5kZXJlciA9IG5ldyBRdWVyeVJlbmRlcmVyKCk7XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEluaWNpYW5kbyBhY3RpdmFjaVx1MDBGM24uLi4nKTtcbiAgICAgICAgaWYgKHRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBZYSBlc3RcdTAwRTEgYWN0aXZvJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCk7XG4gICAgICAgICAgICB0aGlzLl9pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBBY3RpdmFjaVx1MDBGM24gZXhpdG9zYScpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBFcnJvciBlbiBhY3RpdmFjaVx1MDBGM246JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogSW5pY2lhbmRvIGRlc2FjdGl2YWNpXHUwMEYzbi4uLicpO1xuICAgICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBZYSBlc3RcdTAwRTEgaW5hY3Rpdm8nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBkZWFjdGl2YXRlQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCk7XG4gICAgICAgICAgICB0aGlzLl9pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogRGVzYWN0aXZhY2lcdTAwRjNuIGV4aXRvc2EnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vZHVsb0RhdGF2aWV3UXVlcmllczogRXJyb3IgZW4gZGVzYWN0aXZhY2lcdTAwRjNuOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaXNBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc0FjdGl2ZTtcbiAgICB9XG5cbiAgICBhc3luYyByZW5kZXJRdWVyeShxdWVyeVR5cGU6IHN0cmluZywgcGFyYW1zOiB7XG4gICAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXG4gICAgICAgIGR2OiBhbnksXG4gICAgICAgIG9wdGlvbnM/OiBhbnlcbiAgICB9KSB7XG4gICAgICAgIGlmICghdGhpcy5faXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRWwgbVx1MDBGM2R1bG8gbm8gZXN0XHUwMEUxIGFjdGl2bycpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChxdWVyeVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3Rhc2tCdXR0b25zJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnF1ZXJ5UmVuZGVyZXIucmVuZGVyVGFza0J1dHRvbnMocGFyYW1zLmNvbnRhaW5lciwgcGFyYW1zLm9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRpcG8gZGUgY29uc3VsdGEgbm8gc29wb3J0YWRvOiAke3F1ZXJ5VHlwZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJEYXRhdmlld0V4dGVuc2lvbnMoKSB7XG4gICAgICAgIC8vIENyZWFyIG9iamV0byBkZSBmdW5jaW9uZXMgYW50ZXMgZGUgcmVnaXN0cmFybGFzXG4gICAgICAgIGNvbnN0IGJvdW5kRnVuY3Rpb25zID0ge1xuICAgICAgICAgICAgcmVuZGVyVGFza0J1dHRvbnM6IChkdjogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVJlbmRlcmVyLnJlbmRlclRhc2tCdXR0b25zKGNvbnRhaW5lciwgb3B0aW9ucyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVuZGVyUHJvamVjdEhpZXJhcmNoeTogKGR2OiBhbnksIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5UmVuZGVyZXIucmVuZGVyUHJvamVjdEhpZXJhcmNoeShjb250YWluZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlZ2lzdHJhciBsYXMgZnVuY2lvbmVzIGVuIGVsIGVzcGFjaW8gZ2xvYmFsXG4gICAgICAgICh3aW5kb3cgYXMgYW55KS5jdXN0b21RdWVyaWVzID0gYm91bmRGdW5jdGlvbnM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEV4dGVuc2lvbnMgcmVnaXN0cmFkYXMnKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVucmVnaXN0ZXJEYXRhdmlld0V4dGVuc2lvbnMoKSB7XG4gICAgICAgIGRlbGV0ZSAod2luZG93IGFzIGFueSkuY3VzdG9tUXVlcmllcztcbiAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogRXh0ZW5zaW9ucyBlbGltaW5hZGFzJyk7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvRGF0YXZpZXdRdWVyeU1hbmFnZXIudHNcbmltcG9ydCB7IFBsdWdpbiwgQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRGF0YXZpZXdRdWVyeU1hbmFnZXIgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIC8vIENhY2hlIHBhcmEgYWxtYWNlbmFyIHJlc3VsdGFkb3MgZGUgY29uc3VsdGFzIGZyZWN1ZW50ZXNcbiAgICBwcml2YXRlIHF1ZXJ5Q2FjaGUgPSBuZXcgTWFwPHN0cmluZywge1xuICAgICAgICBkYXRhOiBhbnk7XG4gICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICAgICAgICB0dGw6IG51bWJlcjtcbiAgICB9PigpO1xuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBlamVjdXRhciBjb25zdWx0YXMgY29uIGNhY2hcdTAwRTlcbiAgICBhc3luYyBleGVjdXRlUXVlcnkocXVlcnlLZXk6IHN0cmluZywgcXVlcnlGbjogKCkgPT4gUHJvbWlzZTxhbnk+LCB0dGwgPSA2MDAwMCkge1xuICAgICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLnF1ZXJ5Q2FjaGUuZ2V0KHF1ZXJ5S2V5KTtcbiAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBpZiAoY2FjaGVkICYmIG5vdyAtIGNhY2hlZC50aW1lc3RhbXAgPCBjYWNoZWQudHRsKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkLmRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeUZuKCk7XG4gICAgICAgIHRoaXMucXVlcnlDYWNoZS5zZXQocXVlcnlLZXksIHtcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdCxcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbm93LFxuICAgICAgICAgICAgdHRsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBsaW1waWFyIGNhY2hcdTAwRTlcbiAgICBjbGVhckNhY2hlKHF1ZXJ5S2V5Pzogc3RyaW5nKSB7XG4gICAgICAgIGlmIChxdWVyeUtleSkge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUNhY2hlLmRlbGV0ZShxdWVyeUtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5Q2FjaGUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL2NvbW1hbmRzLnRzXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBDb21hbmRvIHBhcmEgbGltcGlhciBlbCBjYWNoXHUwMEU5IGRlIGNvbnN1bHRhc1xuICAgIGNvbnN0IGNsZWFyQ2FjaGVDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ2NsZWFyLWRhdGF2aWV3LXF1ZXJpZXMtY2FjaGUnLFxuICAgICAgICBuYW1lOiAnTGltcGlhciBjYWNoXHUwMEU5IGRlIGNvbnN1bHRhcycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsZUluc3RhbmNlID0gKHBsdWdpbiBhcyBhbnkpLm1vZHVsb0RhdGF2aWV3UXVlcmllcztcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlSW5zdGFuY2U/LnF1ZXJ5TWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVJbnN0YW5jZS5xdWVyeU1hbmFnZXIuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDYWNoXHUwMEU5IGRlIGNvbnN1bHRhcyBsaW1waWFkbycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgbGltcGlhciBjYWNoXHUwMEU5OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBhbCBsaW1waWFyIGNhY2hcdTAwRTkgZGUgY29uc3VsdGFzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSByZWNhcmdhciB0b2RhcyBsYXMgY29uc3VsdGFzIGFjdGl2YXNcbiAgICBjb25zdCByZWxvYWRRdWVyaWVzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdyZWxvYWQtZGF0YXZpZXctcXVlcmllcycsXG4gICAgICAgIG5hbWU6ICdSZWNhcmdhciBjb25zdWx0YXMgYWN0aXZhcycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsZUluc3RhbmNlID0gKHBsdWdpbiBhcyBhbnkpLm1vZHVsb0RhdGF2aWV3UXVlcmllcztcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlSW5zdGFuY2U/LnF1ZXJ5TWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGVJbnN0YW5jZS5jbGVhckNhY2hlKCk7XG4gICAgICAgICAgICAgICAgICAgIGFwcC53b3Jrc3BhY2UudHJpZ2dlcignZGF0YXZpZXc6cmVmcmVzaC12aWV3cycpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb25zdWx0YXMgcmVjYXJnYWRhcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVjYXJnYXIgY29uc3VsdGFzOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBhbCByZWNhcmdhciBjb25zdWx0YXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVnaXN0cmFyIGxvcyBJRHMgZGUgbG9zIGNvbWFuZG9zIHBhcmEgcG9kZXIgZGVzYWN0aXZhcmxvcyBkZXNwdVx1MDBFOXNcbiAgICAocGx1Z2luIGFzIGFueSkucmVnaXN0ZXJlZERhdGF2aWV3UXVlcnlDb21tYW5kSWRzID0gW1xuICAgICAgICBjbGVhckNhY2hlQ29tbWFuZC5pZCxcbiAgICAgICAgcmVsb2FkUXVlcmllc0NvbW1hbmQuaWRcbiAgICBdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZElkcyA9IChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkRGF0YXZpZXdRdWVyeUNvbW1hbmRJZHM7XG4gICAgaWYgKCFjb21tYW5kSWRzKSByZXR1cm47XG4gICAgXG4gICAgY29tbWFuZElkcy5mb3JFYWNoKChjb21tYW5kSWQ6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1waWFyIGVsIGFycmF5IGRlIGNvbWFuZG9zIHJlZ2lzdHJhZG9zXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWREYXRhdmlld1F1ZXJ5Q29tbWFuZElkcyA9IFtdO1xufSIsICIvLyBzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvUXVlcnlSZW5kZXJlci50c1xuZXhwb3J0IGNsYXNzIFF1ZXJ5UmVuZGVyZXIge1xuICAgIGFzeW5jIHJlbmRlclRhc2tCdXR0b25zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAndGFzay1idXR0b25zLWNvbnRhaW5lcicsXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnZGlzcGxheTogZ3JpZDsgZ3JpZC1nYXA6IDhweDsgcGFkZGluZzogMTZweDsgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpOyBib3JkZXItcmFkaXVzOiA4cHg7JyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNob3dUaXRsZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1RDgzRFx1RENDQiBHZXN0aVx1MDBGM24gZGUgVGFyZWFzJyxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAnbWFyZ2luOiAwIDAgMTJweCAwOycgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBidXR0b25zID0gW1xuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBpZDogJ3RvZGF5JywgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RhcmVhcyBkZSBIb3knLCBcbiAgICAgICAgICAgICAgICBpY29uOiAnXHVEODNEXHVEQ0M1JywgXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjNENBRjUwJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGFwcC5wbHVnaW5zLnBsdWdpbnNbJ29ic2lkaWFuLXBlcnNvbmFsLW1hbmFnZW1lbnQnXS50YXJlYXNBUEkubW9zdHJhclRhcmVhc0hveSgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBpZDogJ292ZXJkdWUnLCBcbiAgICAgICAgICAgICAgICB0ZXh0OiAnVGFyZWFzIFZlbmNpZGFzJywgXG4gICAgICAgICAgICAgICAgaWNvbjogJ1x1MjZBMFx1RkUwRicsIFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnI2Y0NDMzNicsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBhcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1wZXJzb25hbC1tYW5hZ2VtZW50J10udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNWZW5jaWRhcygpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBpZDogJ3VwY29taW5nJywgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RhcmVhcyBQclx1MDBGM3hpbWFzJywgXG4gICAgICAgICAgICAgICAgaWNvbjogJ1x1RDgzQ1x1REZBRicsIFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzIxOTZGMycsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBhcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1wZXJzb25hbC1tYW5hZ2VtZW50J10udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNQcm94aW1hcygpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICBpZDogJ3N0YXJ0JywgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RvZGFzIGxhcyBWZW5jaWRhcycsIFxuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0NcdURGMTMnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNGRjk4MDAnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddLnRhcmVhc0FQSS5tb3N0cmFyVG9kYXNUYXJlYXNWZW5jaWRhcygpXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG5cbiAgICAgICAgY29uc3QgYnV0dG9uR3JpZCA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KGF1dG8tZml0LCBtaW5tYXgoMjAwcHgsIDFmcikpOyBnYXA6IDhweDsnIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSBidXR0b25HcmlkLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZTogYFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2J0bi5jb2xvcn07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGJ1dHRvbi5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogYnRuLmljb24gfSk7XG4gICAgICAgICAgICBidXR0b24uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGJ0bi50ZXh0IH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFdmVudG9zIGRlIGhvdmVyXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoMS4xKSc7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0xcHgpJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUuZmlsdGVyID0gJ2JyaWdodG5lc3MoMSknO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgwKSc7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRXZlbnRvIGRlIGNsaWNrIGNvbiBmZWVkYmFjayB2aXN1YWxcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjcnO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBY3R1YWxpemFuZG8gdmlzdGEuLi4nKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYnRuLmFjdGlvbigpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGVuIGFjY2lcdTAwRjNuICR7YnRuLmlkfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFncmVnYXIgdGltZXN0YW1wIHNpIGVzdFx1MDBFMSBoYWJpbGl0YWRvXG4gICAgICAgIGlmIChvcHRpb25zLnNob3dUaW1lc3RhbXApIHtcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTAwREFsdGltYSBhY3R1YWxpemFjaVx1MDBGM246ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1gLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiAnbWFyZ2luLXRvcDogOHB4OyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC1zaXplOiAwLjhlbTsgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpOydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlbmRlclByb2plY3RIaWVyYXJjaHkoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgb3B0aW9uczogYW55ID0ge30pIHtcbiAgICAgICAgLy8gSW1wbGVtZW50YXIgY3VhbmRvIHNlYSBuZWNlc2FyaW9cbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFDQUEsbUJBR2E7QUFKYjtBQUFBO0FBQUE7QUFDQSxJQUFBQSxvQkFBK0M7QUFHeEMsSUFBTSxpQkFBTixjQUE2QixvQ0FBMEI7QUFBQTtBQUFBO0FBQUEsTUFPMUQsWUFBWUMsTUFBVSxRQUFrQixRQUFrQixhQUFxQjtBQUMzRSxjQUFNQSxJQUFHO0FBSmI7QUFBQSxhQUFRLGlCQUEwQjtBQUs5QixhQUFLLFNBQVM7QUFDZCxhQUFLLFNBQVM7QUFFZCxhQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsS0FBSyxPQUFPLFVBQVU7QUFDakQsY0FBSSxLQUFLLElBQUksT0FBTyxLQUFLO0FBQ3pCLGlCQUFPO0FBQUEsUUFDWCxHQUFHLENBQUMsQ0FBQztBQUNMLGFBQUssZUFBZSxXQUFXO0FBQUEsTUFDbkM7QUFBQTtBQUFBLE1BR0EsV0FBcUI7QUFDakIsZUFBTyxLQUFLO0FBQUEsTUFDaEI7QUFBQTtBQUFBLE1BR0EsWUFBWSxNQUFzQjtBQUM5QixlQUFP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QUFBLEVBQ3pCO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFFbkIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUUzRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBRW5CLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUdqQyxTQUFLLG1CQUFtQjtBQUFBLEVBRTFCO0FBQUEsRUFFQSxRQUFRO0FBQ047QUFDQSxRQUNFLENBQUMsS0FBSyxPQUNOLENBQUMsS0FBSyxJQUFJLFFBQVEsZUFBZSxJQUFJLG9CQUFvQixHQUN6RDtBQUNBLGNBQVEsTUFBTSw0Q0FBeUM7QUFDdkQ7QUFBQSxJQUNGO0FBS0EsUUFBSSxRQUFRLEtBQUssSUFBSSxRQUFRLFFBQVEsb0JBQW9CLEVBQUU7QUFDM0QsWUFBUSxNQUFNLG9CQUFvQixtQkFBbUI7QUFDckQsUUFBSSxLQUFLLENBQUM7QUFFVixPQUFHLE9BQU8sTUFBTSxLQUFLLENBQUMsTUFBTSxFQUFFLFFBQVEsTUFBTTtBQUM1QyxPQUFHLFNBQVMsTUFBTSxLQUFLLENBQUMsTUFBTSxFQUFFLFFBQVEsUUFBUTtBQUVoRCxRQUFJLENBQUMsR0FBRyxRQUFRO0FBQ2QsY0FBUTtBQUFBLFFBQ047QUFBQSxNQUNGO0FBQ0E7QUFBQSxJQUNGO0FBQ0EsWUFBUSxJQUFJLHNEQUFzRDtBQUNsRSxXQUFPO0FBQUEsRUFDVDtBQUNGOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAibWVudU90cm8iLCAidGlwbyIsICJ0eXBlIiwgInMiLCAic2luZ2xldG9uIiwgIm9mZnNldCIsICJzIiwgImRlZmF1bHRab25lIiwgIm9mZnNldCIsICJuIiwgIm4iLCAib2Zmc2V0IiwgInMiLCAibiIsICJmb3JtYXRPZmZzZXQiLCAicyIsICJtYXRjaCIsICJvZmZzZXQiLCAibCIsICJuIiwgInMiLCAiSU5WQUxJRCIsICJzIiwgImUiLCAicyIsICJ0eXBlIiwgImNsb25lIiwgIm9mZnNldCIsICJvcmRlcmVkVW5pdHMiLCAiSU5WQUxJRCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImFsaWFzIiwgImZvbGRlciIsICJzYW1lTmFtZSIsICJuYW1lRmlsZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm9mZnNldCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW5pdF9TZXNpb25MZWN0dXJhIiwgIl9hIiwgIl9iIiwgImltcG9ydF9vYnNpZGlhbiIsICJTZXNpb25MZWN0dXJhIiwgInJlZ2lzdHJvIiwgImltcG9ydF9vYnNpZGlhbiIsICJxdWl0YXJEb2JsZUNvcmNoZXRlIiwgIm5vcm1hbGl6YXJBcnJheSIsICJyZWdpc3RybyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAib2Zmc2V0IiwgInJlZ2lzdGVyUmliYm9uTWVudSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm5pdmVsIiwgImltcG9ydF9vYnNpZGlhbiIsICJuaXZlbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiY2xhc2lmaWNhY2lvbiIsICJ0YWdDbGFzaWZpY2FjaW9uIiwgIm51ZXZhQ2xhc2lmaWNhY2lvbiIsICJmcm9udG1hdHRlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFjdGl2ZVJlc291cmNlcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIllBTUxVcGRhdGVyQVBJIiwgIm9mZnNldCIsICJjbGFzaWZpY2FjaW9uIiwgInRhZ0NsYXNpZmljYWNpb24iLCAibnVldmFDbGFzaWZpY2FjaW9uIiwgImZyb250bWF0dGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInRpdHVsbyIsICJtYXRjaCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAibWF0Y2giLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAibm93IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiWUFNTFVwZGF0ZXJBUEkiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJ0YXJlYXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWdpc3RlckNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicmVnaXN0ZXJDb21tYW5kcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibm93IiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJZQU1MVXBkYXRlckFQSSJdCn0K
