/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/modules/modales/seleccionModal.ts
var import_obsidian12, SeleccionModal;
var init_seleccionModal = __esm({
  "src/modules/modales/seleccionModal.ts"() {
    "use strict";
    import_obsidian12 = require("obsidian");
    SeleccionModal = class extends import_obsidian12.FuzzySuggestModal {
      // Flag para determinar si se ha hecho una selección.
      // Constructor de la clase.
      constructor(app2, titles, values, placeholder) {
        super(app2);
        // Objeto para mapear títulos a valores.
        this.seleccionHecha = false;
        this.titles = titles;
        this.values = values;
        this.valueMap = titles.reduce((acc, title, index) => {
          acc[title] = values[index];
          return acc;
        }, {});
        this.setPlaceholder(placeholder);
      }
      // Método para obtener los ítems (títulos) que se mostrarán en el modal.
      getItems() {
        return this.titles;
      }
      // Método para obtener el texto que se mostrará para cada ítem en el modal.
      getItemText(item) {
        return item;
      }
      // Método que se llama al cerrar el modal.
      onClose() {
        if (!this.seleccionHecha) {
          this.reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      }
      // Método para manejar la selección de un ítem.
      selectSuggestion(item, evt) {
        this.seleccionHecha = true;
        super.selectSuggestion(item, evt);
      }
      // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
      onChooseItem(item, evt) {
        const value = this.valueMap[item];
        this.resolve(value);
      }
      // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
      openAndAwaitSelection() {
        return new Promise((resolve, reject) => {
          this.resolve = resolve;
          this.reject = reject;
          this.open();
        });
      }
    };
  }
});

// src/modules/modales/seleccionModalTareas.ts
var import_obsidian18, SeleccionModalTareas;
var init_seleccionModalTareas = __esm({
  "src/modules/modales/seleccionModalTareas.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    SeleccionModalTareas = class extends import_obsidian18.FuzzySuggestModal {
      /**
       * @param app Obsidian App
       * @param options Lista de cadenas (PUEDE INCLUIR HTML) que se mostrarán en el modal
       * @param values  Lista de valores asociados a cada opción
       * @param placeholder Texto en la barra de búsqueda
       */
      constructor(app2, options, values, placeholder) {
        super(app2);
        // Valores que se retornan al elegir
        this.seleccionHecha = false;
        this.options = options;
        this.values = values;
        this.setPlaceholder(placeholder);
      }
      /**
       * Retorna la lista de ítems (en este caso, cadenas) sobre las que se hará la búsqueda difusa.
       */
      getItems() {
        return this.options;
      }
      /**
       * Determina el texto que se usa internamente para la búsqueda difusa.
       * Aquí quitamos etiquetas HTML, para que la búsqueda sea sobre texto plano.
       */
      getItemText(item) {
        return item.replace(/<[^>]+>/g, "");
      }
      /**
       * Controla cómo se muestra cada opción en la lista de sugerencias.
       * Asignamos 'el.innerHTML' para que se renderice el HTML con estilos,
       * en lugar de mostrar las etiquetas en crudo.
       */
      renderSuggestion(result, el) {
        el.innerHTML = result.item;
      }
      /**
       * Maneja la selección de un ítem. Marcamos que se ha hecho selección y delegamos al método padre.
       */
      selectSuggestion(item, evt) {
        this.seleccionHecha = true;
        super.selectSuggestion(item, evt);
      }
      /**
       * Se llama cuando el usuario confirma la elección de un ítem de la lista.
       * Obtenemos el valor asociado y resolvemos la promesa.
       */
      onChooseItem(item, evt) {
        const index = this.options.indexOf(item);
        const value = this.values[index];
        this.resolveSelection(value);
      }
      /**
       * Si el modal se cierra sin que el usuario seleccione nada, rechazamos la promesa.
       */
      onClose() {
        if (!this.seleccionHecha) {
          this.rejectSelection(new Error("Modal cerrado sin selecci\xF3n"));
        }
      }
      /**
       * Método para abrir el modal y retornar una promesa que se resuelve cuando
       * el usuario elige un ítem o se rechaza si cierra sin elegir.
       */
      openAndAwaitSelection() {
        return new Promise((resolve, reject) => {
          this.resolveSelection = resolve;
          this.rejectSelection = reject;
          this.open();
        });
      }
    };
  }
});

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian19, fuzzySelectOrCreate;
var init_fuzzySelectOrCreate = __esm({
  "src/modules/modales/fuzzySelectOrCreate.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_seleccionModal();
    fuzzySelectOrCreate = class {
      constructor(app2, plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.app = app2;
        this.plugin = plugin;
      }
      createModal() {
        const modal = document.createElement("div");
        modal.setAttribute("id", "fuzzySearchModal");
        modal.style.position = "fixed";
        modal.style.top = "50%";
        modal.style.left = "50%";
        modal.style.transform = "translate(-50%, -50%)";
        modal.style.zIndex = "1000";
        modal.style.padding = "20px";
        modal.style.backgroundColor = "white";
        modal.style.border = "1px solid #ccc";
        modal.style.borderRadius = "5px";
        modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
        modal.style.width = "300px";
        const closeButton = document.createElement("button");
        closeButton.textContent = "\xD7";
        closeButton.style.position = "absolute";
        closeButton.style.top = "5px";
        closeButton.style.right = "5px";
        closeButton.style.border = "none";
        closeButton.style.background = "none";
        closeButton.style.cursor = "pointer";
        closeButton.style.fontSize = "16px";
        closeButton.style.fontWeight = "bold";
        closeButton.style.padding = "0px 4px";
        closeButton.style.borderRadius = "10px";
        closeButton.style.outline = "none";
        closeButton.style.boxShadow = "none";
        closeButton.onclick = () => modal.remove();
        modal.appendChild(closeButton);
        return modal;
      }
      filterItems(query, items) {
        return items.filter(
          (item) => item.value.toLowerCase().includes(query.toLowerCase())
        );
      }
      async updateYAMLFields(tipo, selectedValue, selectedGroup) {
        try {
          debugger;
          const file = app.vault.getAbstractFileByPath(this.pathCampos);
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            debugger;
            let currentActs = frontmatter[tipo] || [];
            let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
            frontmatter[tipo] = newValueForActs;
          });
          console.log("Frontmatter actualizado con \xE9xito");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
      async showFuzzySearchModal(items, groups, tipo) {
        return new Promise((resolve, reject) => {
          let selectedValue = "";
          let selectedGroup = "";
          const modal = this.createModal();
          const title = document.createElement("h2");
          title.textContent = "Busca o crea tu actividad";
          title.style.textAlign = "center";
          modal.appendChild(title);
          const input = document.createElement("input");
          input.type = "text";
          input.placeholder = "Escribe tu actividad...";
          input.style.width = "80%";
          input.style.textAlign = "center";
          modal.style.display = "flex";
          modal.style.flexDirection = "column";
          modal.style.alignItems = "center";
          modal.appendChild(input);
          const spacer = document.createElement("div");
          spacer.style.height = "16px";
          modal.appendChild(spacer);
          const resultsDiv = document.createElement("div");
          modal.appendChild(resultsDiv);
          function updateResultsDisplay(filteredResults, menuOtro2) {
            resultsDiv.innerHTML = "";
            filteredResults.forEach((result) => {
              const div = document.createElement("div");
              div.textContent = result.value;
              div.style.cursor = "pointer";
              div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
              div.onmouseout = () => div.style.backgroundColor = "transparent";
              div.onclick = () => {
                selectedValue = result.activity;
                selectedGroup = result.group;
                modal.remove();
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(div);
            });
            if (filteredResults.length === 0 && input.value.trim() !== "") {
              const createNewDiv = document.createElement("div");
              createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
              createNewDiv.style.cursor = "pointer";
              createNewDiv.style.color = "blue";
              createNewDiv.onclick = () => {
                selectedValue = input.value;
                debugger;
                if (tipo == void 0) {
                  tipo = "actsTemas";
                }
                selectGroupForNewActivity(menuOtro2, tipo);
              };
              resultsDiv.appendChild(createNewDiv);
            }
          }
          function selectGroupForNewActivity(menuOtro2, tipo2) {
            resultsDiv.innerHTML = "";
            input.remove();
            spacer.remove();
            title.remove();
            const texto = document.createElement("p");
            texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
            ;
            texto.style.textAlign = "center";
            resultsDiv.appendChild(texto);
            groups.forEach((group) => {
              const groupDiv = document.createElement("div");
              groupDiv.textContent = group;
              groupDiv.style.cursor = "pointer";
              groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
              groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
              groupDiv.onclick = async () => {
                selectedGroup = group;
                modal.remove();
                let recurrente = await menuOtro2.esRecurrente(selectedValue);
                if (recurrente) {
                  await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
                }
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(groupDiv);
            });
          }
          function displaySelectedValue(activity, group) {
            resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
          }
          input.oninput = () => {
            const filteredItems = this.filterItems(input.value, items);
            updateResultsDisplay(filteredItems, this);
          };
          document.body.appendChild(modal);
        });
      }
      async esRecurrente(tarea) {
        const opciones = ["Si", "No"];
        const valores = [true, false];
        const placeholder = `${tarea} es tarea recurrente?`;
        const modal = new SeleccionModal(app, opciones, valores, placeholder);
        try {
          return await modal.openAndAwaitSelection();
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          return false;
        }
      }
    };
  }
});

// node_modules/luxon/src/errors.js
var LuxonError, InvalidDateTimeError, InvalidIntervalError, InvalidDurationError, ConflictingSpecificationError, InvalidUnitError, InvalidArgumentError, ZoneIsAbstractError;
var init_errors = __esm({
  "node_modules/luxon/src/errors.js"() {
    LuxonError = class extends Error {
    };
    InvalidDateTimeError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid DateTime: ${reason.toMessage()}`);
      }
    };
    InvalidIntervalError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Interval: ${reason.toMessage()}`);
      }
    };
    InvalidDurationError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Duration: ${reason.toMessage()}`);
      }
    };
    ConflictingSpecificationError = class extends LuxonError {
    };
    InvalidUnitError = class extends LuxonError {
      constructor(unit) {
        super(`Invalid unit ${unit}`);
      }
    };
    InvalidArgumentError = class extends LuxonError {
    };
    ZoneIsAbstractError = class extends LuxonError {
      constructor() {
        super("Zone is an abstract class");
      }
    };
  }
});

// node_modules/luxon/src/impl/formats.js
var n, s, l, DATE_SHORT, DATE_MED, DATE_MED_WITH_WEEKDAY, DATE_FULL, DATE_HUGE, TIME_SIMPLE, TIME_WITH_SECONDS, TIME_WITH_SHORT_OFFSET, TIME_WITH_LONG_OFFSET, TIME_24_SIMPLE, TIME_24_WITH_SECONDS, TIME_24_WITH_SHORT_OFFSET, TIME_24_WITH_LONG_OFFSET, DATETIME_SHORT, DATETIME_SHORT_WITH_SECONDS, DATETIME_MED, DATETIME_MED_WITH_SECONDS, DATETIME_MED_WITH_WEEKDAY, DATETIME_FULL, DATETIME_FULL_WITH_SECONDS, DATETIME_HUGE, DATETIME_HUGE_WITH_SECONDS;
var init_formats = __esm({
  "node_modules/luxon/src/impl/formats.js"() {
    n = "numeric";
    s = "short";
    l = "long";
    DATE_SHORT = {
      year: n,
      month: n,
      day: n
    };
    DATE_MED = {
      year: n,
      month: s,
      day: n
    };
    DATE_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s
    };
    DATE_FULL = {
      year: n,
      month: l,
      day: n
    };
    DATE_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l
    };
    TIME_SIMPLE = {
      hour: n,
      minute: n
    };
    TIME_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n
    };
    TIME_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    TIME_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
    TIME_24_SIMPLE = {
      hour: n,
      minute: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: s
    };
    TIME_24_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: l
    };
    DATETIME_SHORT = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_SHORT_WITH_SECONDS = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_MED_WITH_SECONDS = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s,
      hour: n,
      minute: n
    };
    DATETIME_FULL = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      timeZoneName: s
    };
    DATETIME_FULL_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    DATETIME_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      timeZoneName: l
    };
    DATETIME_HUGE_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
  }
});

// node_modules/luxon/src/zone.js
var Zone;
var init_zone = __esm({
  "node_modules/luxon/src/zone.js"() {
    init_errors();
    Zone = class {
      /**
       * The type of zone
       * @abstract
       * @type {string}
       */
      get type() {
        throw new ZoneIsAbstractError();
      }
      /**
       * The name of this zone.
       * @abstract
       * @type {string}
       */
      get name() {
        throw new ZoneIsAbstractError();
      }
      get ianaName() {
        return this.name;
      }
      /**
       * Returns whether the offset is known to be fixed for the whole year.
       * @abstract
       * @type {boolean}
       */
      get isUniversal() {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's common name (such as EST) at the specified timestamp
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the name
       * @param {Object} opts - Options to affect the format
       * @param {string} opts.format - What style of offset to return. Accepts 'long' or 'short'.
       * @param {string} opts.locale - What locale to return the offset name in.
       * @return {string}
       */
      offsetName(ts, opts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's value as a string
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the offset
       * @param {string} format - What style of offset to return.
       *                          Accepts 'narrow', 'short', or 'techie'. Returning '+6', '+06:00', or '+0600' respectively
       * @return {string}
       */
      formatOffset(ts, format) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return the offset in minutes for this zone at the specified timestamp.
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to compute the offset
       * @return {number}
       */
      offset(ts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is equal to another zone
       * @abstract
       * @param {Zone} otherZone - the zone to compare
       * @return {boolean}
       */
      equals(otherZone) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is valid.
       * @abstract
       * @type {boolean}
       */
      get isValid() {
        throw new ZoneIsAbstractError();
      }
    };
  }
});

// node_modules/luxon/src/zones/systemZone.js
var singleton, SystemZone;
var init_systemZone = __esm({
  "node_modules/luxon/src/zones/systemZone.js"() {
    init_util();
    init_zone();
    singleton = null;
    SystemZone = class _SystemZone extends Zone {
      /**
       * Get a singleton instance of the local zone
       * @return {SystemZone}
       */
      static get instance() {
        if (singleton === null) {
          singleton = new _SystemZone();
        }
        return singleton;
      }
      /** @override **/
      get type() {
        return "system";
      }
      /** @override **/
      get name() {
        return new Intl.DateTimeFormat().resolvedOptions().timeZone;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        return -new Date(ts).getTimezoneOffset();
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "system";
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/IANAZone.js
function makeDTF(zone) {
  if (!dtfCache[zone]) {
    dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: zone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      era: "short"
    });
  }
  return dtfCache[zone];
}
function hackyOffset(dtf, date) {
  const formatted = dtf.format(date).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;
  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
}
function partsOffset(dtf, date) {
  const formatted = dtf.formatToParts(date);
  const filled = [];
  for (let i = 0; i < formatted.length; i++) {
    const { type: type2, value } = formatted[i];
    const pos = typeToPos[type2];
    if (type2 === "era") {
      filled[pos] = value;
    } else if (!isUndefined(pos)) {
      filled[pos] = parseInt(value, 10);
    }
  }
  return filled;
}
var dtfCache, typeToPos, ianaZoneCache, IANAZone;
var init_IANAZone = __esm({
  "node_modules/luxon/src/zones/IANAZone.js"() {
    init_util();
    init_zone();
    dtfCache = {};
    typeToPos = {
      year: 0,
      month: 1,
      day: 2,
      era: 3,
      hour: 4,
      minute: 5,
      second: 6
    };
    ianaZoneCache = {};
    IANAZone = class _IANAZone extends Zone {
      /**
       * @param {string} name - Zone name
       * @return {IANAZone}
       */
      static create(name) {
        if (!ianaZoneCache[name]) {
          ianaZoneCache[name] = new _IANAZone(name);
        }
        return ianaZoneCache[name];
      }
      /**
       * Reset local caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCache() {
        ianaZoneCache = {};
        dtfCache = {};
      }
      /**
       * Returns whether the provided string is a valid specifier. This only checks the string's format, not that the specifier identifies a known zone; see isValidZone for that.
       * @param {string} s - The string to check validity on
       * @example IANAZone.isValidSpecifier("America/New_York") //=> true
       * @example IANAZone.isValidSpecifier("Sport~~blorp") //=> false
       * @deprecated This method returns false for some valid IANA names. Use isValidZone instead.
       * @return {boolean}
       */
      static isValidSpecifier(s2) {
        return this.isValidZone(s2);
      }
      /**
       * Returns whether the provided string identifies a real zone
       * @param {string} zone - The string to check
       * @example IANAZone.isValidZone("America/New_York") //=> true
       * @example IANAZone.isValidZone("Fantasia/Castle") //=> false
       * @example IANAZone.isValidZone("Sport~~blorp") //=> false
       * @return {boolean}
       */
      static isValidZone(zone) {
        if (!zone) {
          return false;
        }
        try {
          new Intl.DateTimeFormat("en-US", { timeZone: zone }).format();
          return true;
        } catch (e) {
          return false;
        }
      }
      constructor(name) {
        super();
        this.zoneName = name;
        this.valid = _IANAZone.isValidZone(name);
      }
      /** @override **/
      get type() {
        return "iana";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale, this.name);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        const date = new Date(ts);
        if (isNaN(date))
          return NaN;
        const dtf = makeDTF(this.name);
        let [year, month, day, adOrBc, hour, minute, second] = dtf.formatToParts ? partsOffset(dtf, date) : hackyOffset(dtf, date);
        if (adOrBc === "BC") {
          year = -Math.abs(year) + 1;
        }
        const adjustedHour = hour === 24 ? 0 : hour;
        const asUTC = objToLocalTS({
          year,
          month,
          day,
          hour: adjustedHour,
          minute,
          second,
          millisecond: 0
        });
        let asTS = +date;
        const over = asTS % 1e3;
        asTS -= over >= 0 ? over : 1e3 + over;
        return (asUTC - asTS) / (60 * 1e3);
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "iana" && otherZone.name === this.name;
      }
      /** @override **/
      get isValid() {
        return this.valid;
      }
    };
  }
});

// node_modules/luxon/src/impl/locale.js
function getCachedLF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlLFCache[key];
  if (!dtf) {
    dtf = new Intl.ListFormat(locString, opts);
    intlLFCache[key] = dtf;
  }
  return dtf;
}
function getCachedDTF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlDTCache[key];
  if (!dtf) {
    dtf = new Intl.DateTimeFormat(locString, opts);
    intlDTCache[key] = dtf;
  }
  return dtf;
}
function getCachedINF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let inf = intlNumCache[key];
  if (!inf) {
    inf = new Intl.NumberFormat(locString, opts);
    intlNumCache[key] = inf;
  }
  return inf;
}
function getCachedRTF(locString, opts = {}) {
  const { base, ...cacheKeyOpts } = opts;
  const key = JSON.stringify([locString, cacheKeyOpts]);
  let inf = intlRelCache[key];
  if (!inf) {
    inf = new Intl.RelativeTimeFormat(locString, opts);
    intlRelCache[key] = inf;
  }
  return inf;
}
function systemLocale() {
  if (sysLocaleCache) {
    return sysLocaleCache;
  } else {
    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
    return sysLocaleCache;
  }
}
function getCachedWeekInfo(locString) {
  let data = weekInfoCache[locString];
  if (!data) {
    const locale = new Intl.Locale(locString);
    data = "getWeekInfo" in locale ? locale.getWeekInfo() : locale.weekInfo;
    weekInfoCache[locString] = data;
  }
  return data;
}
function parseLocaleString(localeStr) {
  const xIndex = localeStr.indexOf("-x-");
  if (xIndex !== -1) {
    localeStr = localeStr.substring(0, xIndex);
  }
  const uIndex = localeStr.indexOf("-u-");
  if (uIndex === -1) {
    return [localeStr];
  } else {
    let options;
    let selectedStr;
    try {
      options = getCachedDTF(localeStr).resolvedOptions();
      selectedStr = localeStr;
    } catch (e) {
      const smaller = localeStr.substring(0, uIndex);
      options = getCachedDTF(smaller).resolvedOptions();
      selectedStr = smaller;
    }
    const { numberingSystem, calendar } = options;
    return [selectedStr, numberingSystem, calendar];
  }
}
function intlConfigString(localeStr, numberingSystem, outputCalendar) {
  if (outputCalendar || numberingSystem) {
    if (!localeStr.includes("-u-")) {
      localeStr += "-u";
    }
    if (outputCalendar) {
      localeStr += `-ca-${outputCalendar}`;
    }
    if (numberingSystem) {
      localeStr += `-nu-${numberingSystem}`;
    }
    return localeStr;
  } else {
    return localeStr;
  }
}
function mapMonths(f) {
  const ms = [];
  for (let i = 1; i <= 12; i++) {
    const dt = DateTime.utc(2009, i, 1);
    ms.push(f(dt));
  }
  return ms;
}
function mapWeekdays(f) {
  const ms = [];
  for (let i = 1; i <= 7; i++) {
    const dt = DateTime.utc(2016, 11, 13 + i);
    ms.push(f(dt));
  }
  return ms;
}
function listStuff(loc, length, englishFn, intlFn) {
  const mode = loc.listingMode();
  if (mode === "error") {
    return null;
  } else if (mode === "en") {
    return englishFn(length);
  } else {
    return intlFn(length);
  }
}
function supportsFastNumbers(loc) {
  if (loc.numberingSystem && loc.numberingSystem !== "latn") {
    return false;
  } else {
    return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
  }
}
var intlLFCache, intlDTCache, intlNumCache, intlRelCache, sysLocaleCache, weekInfoCache, PolyNumberFormatter, PolyDateFormatter, PolyRelFormatter, fallbackWeekSettings, Locale;
var init_locale = __esm({
  "node_modules/luxon/src/impl/locale.js"() {
    init_util();
    init_english();
    init_settings();
    init_datetime();
    init_IANAZone();
    intlLFCache = {};
    intlDTCache = {};
    intlNumCache = {};
    intlRelCache = {};
    sysLocaleCache = null;
    weekInfoCache = {};
    PolyNumberFormatter = class {
      constructor(intl, forceSimple, opts) {
        this.padTo = opts.padTo || 0;
        this.floor = opts.floor || false;
        const { padTo, floor, ...otherOpts } = opts;
        if (!forceSimple || Object.keys(otherOpts).length > 0) {
          const intlOpts = { useGrouping: false, ...opts };
          if (opts.padTo > 0)
            intlOpts.minimumIntegerDigits = opts.padTo;
          this.inf = getCachedINF(intl, intlOpts);
        }
      }
      format(i) {
        if (this.inf) {
          const fixed = this.floor ? Math.floor(i) : i;
          return this.inf.format(fixed);
        } else {
          const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
          return padStart(fixed, this.padTo);
        }
      }
    };
    PolyDateFormatter = class {
      constructor(dt, intl, opts) {
        this.opts = opts;
        this.originalZone = void 0;
        let z = void 0;
        if (this.opts.timeZone) {
          this.dt = dt;
        } else if (dt.zone.type === "fixed") {
          const gmtOffset = -1 * (dt.offset / 60);
          const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;
          if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
            z = offsetZ;
            this.dt = dt;
          } else {
            z = "UTC";
            this.dt = dt.offset === 0 ? dt : dt.setZone("UTC").plus({ minutes: dt.offset });
            this.originalZone = dt.zone;
          }
        } else if (dt.zone.type === "system") {
          this.dt = dt;
        } else if (dt.zone.type === "iana") {
          this.dt = dt;
          z = dt.zone.name;
        } else {
          z = "UTC";
          this.dt = dt.setZone("UTC").plus({ minutes: dt.offset });
          this.originalZone = dt.zone;
        }
        const intlOpts = { ...this.opts };
        intlOpts.timeZone = intlOpts.timeZone || z;
        this.dtf = getCachedDTF(intl, intlOpts);
      }
      format() {
        if (this.originalZone) {
          return this.formatToParts().map(({ value }) => value).join("");
        }
        return this.dtf.format(this.dt.toJSDate());
      }
      formatToParts() {
        const parts = this.dtf.formatToParts(this.dt.toJSDate());
        if (this.originalZone) {
          return parts.map((part) => {
            if (part.type === "timeZoneName") {
              const offsetName = this.originalZone.offsetName(this.dt.ts, {
                locale: this.dt.locale,
                format: this.opts.timeZoneName
              });
              return {
                ...part,
                value: offsetName
              };
            } else {
              return part;
            }
          });
        }
        return parts;
      }
      resolvedOptions() {
        return this.dtf.resolvedOptions();
      }
    };
    PolyRelFormatter = class {
      constructor(intl, isEnglish, opts) {
        this.opts = { style: "long", ...opts };
        if (!isEnglish && hasRelative()) {
          this.rtf = getCachedRTF(intl, opts);
        }
      }
      format(count, unit) {
        if (this.rtf) {
          return this.rtf.format(count, unit);
        } else {
          return formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== "long");
        }
      }
      formatToParts(count, unit) {
        if (this.rtf) {
          return this.rtf.formatToParts(count, unit);
        } else {
          return [];
        }
      }
    };
    fallbackWeekSettings = {
      firstDay: 1,
      minimalDays: 4,
      weekend: [6, 7]
    };
    Locale = class _Locale {
      static fromOpts(opts) {
        return _Locale.create(
          opts.locale,
          opts.numberingSystem,
          opts.outputCalendar,
          opts.weekSettings,
          opts.defaultToEN
        );
      }
      static create(locale, numberingSystem, outputCalendar, weekSettings, defaultToEN = false) {
        const specifiedLocale = locale || Settings.defaultLocale;
        const localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
        const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
        const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
        const weekSettingsR = validateWeekSettings(weekSettings) || Settings.defaultWeekSettings;
        return new _Locale(localeR, numberingSystemR, outputCalendarR, weekSettingsR, specifiedLocale);
      }
      static resetCache() {
        sysLocaleCache = null;
        intlDTCache = {};
        intlNumCache = {};
        intlRelCache = {};
      }
      static fromObject({ locale, numberingSystem, outputCalendar, weekSettings } = {}) {
        return _Locale.create(locale, numberingSystem, outputCalendar, weekSettings);
      }
      constructor(locale, numbering, outputCalendar, weekSettings, specifiedLocale) {
        const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale);
        this.locale = parsedLocale;
        this.numberingSystem = numbering || parsedNumberingSystem || null;
        this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
        this.weekSettings = weekSettings;
        this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
        this.weekdaysCache = { format: {}, standalone: {} };
        this.monthsCache = { format: {}, standalone: {} };
        this.meridiemCache = null;
        this.eraCache = {};
        this.specifiedLocale = specifiedLocale;
        this.fastNumbersCached = null;
      }
      get fastNumbers() {
        if (this.fastNumbersCached == null) {
          this.fastNumbersCached = supportsFastNumbers(this);
        }
        return this.fastNumbersCached;
      }
      listingMode() {
        const isActuallyEn = this.isEnglish();
        const hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
        return isActuallyEn && hasNoWeirdness ? "en" : "intl";
      }
      clone(alts) {
        if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
          return this;
        } else {
          return _Locale.create(
            alts.locale || this.specifiedLocale,
            alts.numberingSystem || this.numberingSystem,
            alts.outputCalendar || this.outputCalendar,
            validateWeekSettings(alts.weekSettings) || this.weekSettings,
            alts.defaultToEN || false
          );
        }
      }
      redefaultToEN(alts = {}) {
        return this.clone({ ...alts, defaultToEN: true });
      }
      redefaultToSystem(alts = {}) {
        return this.clone({ ...alts, defaultToEN: false });
      }
      months(length, format = false) {
        return listStuff(this, length, months, () => {
          const intl = format ? { month: length, day: "numeric" } : { month: length }, formatStr = format ? "format" : "standalone";
          if (!this.monthsCache[formatStr][length]) {
            this.monthsCache[formatStr][length] = mapMonths((dt) => this.extract(dt, intl, "month"));
          }
          return this.monthsCache[formatStr][length];
        });
      }
      weekdays(length, format = false) {
        return listStuff(this, length, weekdays, () => {
          const intl = format ? { weekday: length, year: "numeric", month: "long", day: "numeric" } : { weekday: length }, formatStr = format ? "format" : "standalone";
          if (!this.weekdaysCache[formatStr][length]) {
            this.weekdaysCache[formatStr][length] = mapWeekdays(
              (dt) => this.extract(dt, intl, "weekday")
            );
          }
          return this.weekdaysCache[formatStr][length];
        });
      }
      meridiems() {
        return listStuff(
          this,
          void 0,
          () => meridiems,
          () => {
            if (!this.meridiemCache) {
              const intl = { hour: "numeric", hourCycle: "h12" };
              this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(
                (dt) => this.extract(dt, intl, "dayperiod")
              );
            }
            return this.meridiemCache;
          }
        );
      }
      eras(length) {
        return listStuff(this, length, eras, () => {
          const intl = { era: length };
          if (!this.eraCache[length]) {
            this.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(
              (dt) => this.extract(dt, intl, "era")
            );
          }
          return this.eraCache[length];
        });
      }
      extract(dt, intlOpts, field) {
        const df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find((m) => m.type.toLowerCase() === field);
        return matching ? matching.value : null;
      }
      numberFormatter(opts = {}) {
        return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
      }
      dtFormatter(dt, intlOpts = {}) {
        return new PolyDateFormatter(dt, this.intl, intlOpts);
      }
      relFormatter(opts = {}) {
        return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
      }
      listFormatter(opts = {}) {
        return getCachedLF(this.intl, opts);
      }
      isEnglish() {
        return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
      }
      getWeekSettings() {
        if (this.weekSettings) {
          return this.weekSettings;
        } else if (!hasLocaleWeekInfo()) {
          return fallbackWeekSettings;
        } else {
          return getCachedWeekInfo(this.locale);
        }
      }
      getStartOfWeek() {
        return this.getWeekSettings().firstDay;
      }
      getMinDaysInFirstWeek() {
        return this.getWeekSettings().minimalDays;
      }
      getWeekendDays() {
        return this.getWeekSettings().weekend;
      }
      equals(other) {
        return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
      }
    };
  }
});

// node_modules/luxon/src/zones/fixedOffsetZone.js
var singleton2, FixedOffsetZone;
var init_fixedOffsetZone = __esm({
  "node_modules/luxon/src/zones/fixedOffsetZone.js"() {
    init_util();
    init_zone();
    singleton2 = null;
    FixedOffsetZone = class _FixedOffsetZone extends Zone {
      /**
       * Get a singleton instance of UTC
       * @return {FixedOffsetZone}
       */
      static get utcInstance() {
        if (singleton2 === null) {
          singleton2 = new _FixedOffsetZone(0);
        }
        return singleton2;
      }
      /**
       * Get an instance with a specified offset
       * @param {number} offset - The offset in minutes
       * @return {FixedOffsetZone}
       */
      static instance(offset2) {
        return offset2 === 0 ? _FixedOffsetZone.utcInstance : new _FixedOffsetZone(offset2);
      }
      /**
       * Get an instance of FixedOffsetZone from a UTC offset string, like "UTC+6"
       * @param {string} s - The offset string to parse
       * @example FixedOffsetZone.parseSpecifier("UTC+6")
       * @example FixedOffsetZone.parseSpecifier("UTC+06")
       * @example FixedOffsetZone.parseSpecifier("UTC-6:00")
       * @return {FixedOffsetZone}
       */
      static parseSpecifier(s2) {
        if (s2) {
          const r = s2.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
          if (r) {
            return new _FixedOffsetZone(signedOffset(r[1], r[2]));
          }
        }
        return null;
      }
      constructor(offset2) {
        super();
        this.fixed = offset2;
      }
      /** @override **/
      get type() {
        return "fixed";
      }
      /** @override **/
      get name() {
        return this.fixed === 0 ? "UTC" : `UTC${formatOffset(this.fixed, "narrow")}`;
      }
      get ianaName() {
        if (this.fixed === 0) {
          return "Etc/UTC";
        } else {
          return `Etc/GMT${formatOffset(-this.fixed, "narrow")}`;
        }
      }
      /** @override **/
      offsetName() {
        return this.name;
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.fixed, format);
      }
      /** @override **/
      get isUniversal() {
        return true;
      }
      /** @override **/
      offset() {
        return this.fixed;
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/invalidZone.js
var InvalidZone;
var init_invalidZone = __esm({
  "node_modules/luxon/src/zones/invalidZone.js"() {
    init_zone();
    InvalidZone = class extends Zone {
      constructor(zoneName) {
        super();
        this.zoneName = zoneName;
      }
      /** @override **/
      get type() {
        return "invalid";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName() {
        return null;
      }
      /** @override **/
      formatOffset() {
        return "";
      }
      /** @override **/
      offset() {
        return NaN;
      }
      /** @override **/
      equals() {
        return false;
      }
      /** @override **/
      get isValid() {
        return false;
      }
    };
  }
});

// node_modules/luxon/src/impl/zoneUtil.js
function normalizeZone(input, defaultZone2) {
  let offset2;
  if (isUndefined(input) || input === null) {
    return defaultZone2;
  } else if (input instanceof Zone) {
    return input;
  } else if (isString(input)) {
    const lowered = input.toLowerCase();
    if (lowered === "default")
      return defaultZone2;
    else if (lowered === "local" || lowered === "system")
      return SystemZone.instance;
    else if (lowered === "utc" || lowered === "gmt")
      return FixedOffsetZone.utcInstance;
    else
      return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
  } else if (isNumber(input)) {
    return FixedOffsetZone.instance(input);
  } else if (typeof input === "object" && "offset" in input && typeof input.offset === "function") {
    return input;
  } else {
    return new InvalidZone(input);
  }
}
var init_zoneUtil = __esm({
  "node_modules/luxon/src/impl/zoneUtil.js"() {
    init_zone();
    init_IANAZone();
    init_fixedOffsetZone();
    init_invalidZone();
    init_util();
    init_systemZone();
  }
});

// node_modules/luxon/src/settings.js
var now, defaultZone, defaultLocale, defaultNumberingSystem, defaultOutputCalendar, twoDigitCutoffYear, throwOnInvalid, defaultWeekSettings, Settings;
var init_settings = __esm({
  "node_modules/luxon/src/settings.js"() {
    init_systemZone();
    init_IANAZone();
    init_locale();
    init_zoneUtil();
    init_util();
    now = () => Date.now();
    defaultZone = "system";
    defaultLocale = null;
    defaultNumberingSystem = null;
    defaultOutputCalendar = null;
    twoDigitCutoffYear = 60;
    defaultWeekSettings = null;
    Settings = class {
      /**
       * Get the callback for returning the current timestamp.
       * @type {function}
       */
      static get now() {
        return now;
      }
      /**
       * Set the callback for returning the current timestamp.
       * The function should return a number, which will be interpreted as an Epoch millisecond count
       * @type {function}
       * @example Settings.now = () => Date.now() + 3000 // pretend it is 3 seconds in the future
       * @example Settings.now = () => 0 // always pretend it's Jan 1, 1970 at midnight in UTC time
       */
      static set now(n2) {
        now = n2;
      }
      /**
       * Set the default time zone to create DateTimes in. Does not affect existing instances.
       * Use the value "system" to reset this value to the system's time zone.
       * @type {string}
       */
      static set defaultZone(zone) {
        defaultZone = zone;
      }
      /**
       * Get the default time zone object currently used to create DateTimes. Does not affect existing instances.
       * The default value is the system's time zone (the one set on the machine that runs this code).
       * @type {Zone}
       */
      static get defaultZone() {
        return normalizeZone(defaultZone, SystemZone.instance);
      }
      /**
       * Get the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultLocale() {
        return defaultLocale;
      }
      /**
       * Set the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultLocale(locale) {
        defaultLocale = locale;
      }
      /**
       * Get the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultNumberingSystem() {
        return defaultNumberingSystem;
      }
      /**
       * Set the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultNumberingSystem(numberingSystem) {
        defaultNumberingSystem = numberingSystem;
      }
      /**
       * Get the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultOutputCalendar() {
        return defaultOutputCalendar;
      }
      /**
       * Set the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultOutputCalendar(outputCalendar) {
        defaultOutputCalendar = outputCalendar;
      }
      /**
       * @typedef {Object} WeekSettings
       * @property {number} firstDay
       * @property {number} minimalDays
       * @property {number[]} weekend
       */
      /**
       * @return {WeekSettings|null}
       */
      static get defaultWeekSettings() {
        return defaultWeekSettings;
      }
      /**
       * Allows overriding the default locale week settings, i.e. the start of the week, the weekend and
       * how many days are required in the first week of a year.
       * Does not affect existing instances.
       *
       * @param {WeekSettings|null} weekSettings
       */
      static set defaultWeekSettings(weekSettings) {
        defaultWeekSettings = validateWeekSettings(weekSettings);
      }
      /**
       * Get the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       */
      static get twoDigitCutoffYear() {
        return twoDigitCutoffYear;
      }
      /**
       * Set the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       * @example Settings.twoDigitCutoffYear = 0 // cut-off year is 0, so all 'yy' are interpreted as current century
       * @example Settings.twoDigitCutoffYear = 50 // '49' -> 1949; '50' -> 2050
       * @example Settings.twoDigitCutoffYear = 1950 // interpreted as 50
       * @example Settings.twoDigitCutoffYear = 2050 // ALSO interpreted as 50
       */
      static set twoDigitCutoffYear(cutoffYear) {
        twoDigitCutoffYear = cutoffYear % 100;
      }
      /**
       * Get whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static get throwOnInvalid() {
        return throwOnInvalid;
      }
      /**
       * Set whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static set throwOnInvalid(t) {
        throwOnInvalid = t;
      }
      /**
       * Reset Luxon's global caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCaches() {
        Locale.resetCache();
        IANAZone.resetCache();
      }
    };
  }
});

// node_modules/luxon/src/impl/invalid.js
var Invalid;
var init_invalid = __esm({
  "node_modules/luxon/src/impl/invalid.js"() {
    Invalid = class {
      constructor(reason, explanation) {
        this.reason = reason;
        this.explanation = explanation;
      }
      toMessage() {
        if (this.explanation) {
          return `${this.reason}: ${this.explanation}`;
        } else {
          return this.reason;
        }
      }
    };
  }
});

// node_modules/luxon/src/impl/conversions.js
function unitOutOfRange(unit, value) {
  return new Invalid(
    "unit out of range",
    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`
  );
}
function dayOfWeek(year, month, day) {
  const d = new Date(Date.UTC(year, month - 1, day));
  if (year < 100 && year >= 0) {
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  const js = d.getUTCDay();
  return js === 0 ? 7 : js;
}
function computeOrdinal(year, month, day) {
  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];
}
function uncomputeOrdinal(year, ordinal) {
  const table = isLeapYear(year) ? leapLadder : nonLeapLadder, month0 = table.findIndex((i) => i < ordinal), day = ordinal - table[month0];
  return { month: month0 + 1, day };
}
function isoWeekdayToLocal(isoWeekday, startOfWeek) {
  return (isoWeekday - startOfWeek + 7) % 7 + 1;
}
function gregorianToWeek(gregObj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { year, month, day } = gregObj, ordinal = computeOrdinal(year, month, day), weekday = isoWeekdayToLocal(dayOfWeek(year, month, day), startOfWeek);
  let weekNumber = Math.floor((ordinal - weekday + 14 - minDaysInFirstWeek) / 7), weekYear;
  if (weekNumber < 1) {
    weekYear = year - 1;
    weekNumber = weeksInWeekYear(weekYear, minDaysInFirstWeek, startOfWeek);
  } else if (weekNumber > weeksInWeekYear(year, minDaysInFirstWeek, startOfWeek)) {
    weekYear = year + 1;
    weekNumber = 1;
  } else {
    weekYear = year;
  }
  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };
}
function weekToGregorian(weekData, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { weekYear, weekNumber, weekday } = weekData, weekdayOfJan4 = isoWeekdayToLocal(dayOfWeek(weekYear, 1, minDaysInFirstWeek), startOfWeek), yearInDays = daysInYear(weekYear);
  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 7 + minDaysInFirstWeek, year;
  if (ordinal < 1) {
    year = weekYear - 1;
    ordinal += daysInYear(year);
  } else if (ordinal > yearInDays) {
    year = weekYear + 1;
    ordinal -= daysInYear(weekYear);
  } else {
    year = weekYear;
  }
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(weekData) };
}
function gregorianToOrdinal(gregData) {
  const { year, month, day } = gregData;
  const ordinal = computeOrdinal(year, month, day);
  return { year, ordinal, ...timeObject(gregData) };
}
function ordinalToGregorian(ordinalData) {
  const { year, ordinal } = ordinalData;
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(ordinalData) };
}
function usesLocalWeekValues(obj, loc) {
  const hasLocaleWeekData = !isUndefined(obj.localWeekday) || !isUndefined(obj.localWeekNumber) || !isUndefined(obj.localWeekYear);
  if (hasLocaleWeekData) {
    const hasIsoWeekData = !isUndefined(obj.weekday) || !isUndefined(obj.weekNumber) || !isUndefined(obj.weekYear);
    if (hasIsoWeekData) {
      throw new ConflictingSpecificationError(
        "Cannot mix locale-based week fields with ISO-based week fields"
      );
    }
    if (!isUndefined(obj.localWeekday))
      obj.weekday = obj.localWeekday;
    if (!isUndefined(obj.localWeekNumber))
      obj.weekNumber = obj.localWeekNumber;
    if (!isUndefined(obj.localWeekYear))
      obj.weekYear = obj.localWeekYear;
    delete obj.localWeekday;
    delete obj.localWeekNumber;
    delete obj.localWeekYear;
    return {
      minDaysInFirstWeek: loc.getMinDaysInFirstWeek(),
      startOfWeek: loc.getStartOfWeek()
    };
  } else {
    return { minDaysInFirstWeek: 4, startOfWeek: 1 };
  }
}
function hasInvalidWeekData(obj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const validYear = isInteger(obj.weekYear), validWeek = integerBetween(
    obj.weekNumber,
    1,
    weeksInWeekYear(obj.weekYear, minDaysInFirstWeek, startOfWeek)
  ), validWeekday = integerBetween(obj.weekday, 1, 7);
  if (!validYear) {
    return unitOutOfRange("weekYear", obj.weekYear);
  } else if (!validWeek) {
    return unitOutOfRange("week", obj.weekNumber);
  } else if (!validWeekday) {
    return unitOutOfRange("weekday", obj.weekday);
  } else
    return false;
}
function hasInvalidOrdinalData(obj) {
  const validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validOrdinal) {
    return unitOutOfRange("ordinal", obj.ordinal);
  } else
    return false;
}
function hasInvalidGregorianData(obj) {
  const validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validMonth) {
    return unitOutOfRange("month", obj.month);
  } else if (!validDay) {
    return unitOutOfRange("day", obj.day);
  } else
    return false;
}
function hasInvalidTimeData(obj) {
  const { hour, minute, second, millisecond } = obj;
  const validHour = integerBetween(hour, 0, 23) || hour === 24 && minute === 0 && second === 0 && millisecond === 0, validMinute = integerBetween(minute, 0, 59), validSecond = integerBetween(second, 0, 59), validMillisecond = integerBetween(millisecond, 0, 999);
  if (!validHour) {
    return unitOutOfRange("hour", hour);
  } else if (!validMinute) {
    return unitOutOfRange("minute", minute);
  } else if (!validSecond) {
    return unitOutOfRange("second", second);
  } else if (!validMillisecond) {
    return unitOutOfRange("millisecond", millisecond);
  } else
    return false;
}
var nonLeapLadder, leapLadder;
var init_conversions = __esm({
  "node_modules/luxon/src/impl/conversions.js"() {
    init_util();
    init_invalid();
    init_errors();
    nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
  }
});

// node_modules/luxon/src/impl/util.js
function isUndefined(o) {
  return typeof o === "undefined";
}
function isNumber(o) {
  return typeof o === "number";
}
function isInteger(o) {
  return typeof o === "number" && o % 1 === 0;
}
function isString(o) {
  return typeof o === "string";
}
function isDate(o) {
  return Object.prototype.toString.call(o) === "[object Date]";
}
function hasRelative() {
  try {
    return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
  } catch (e) {
    return false;
  }
}
function hasLocaleWeekInfo() {
  try {
    return typeof Intl !== "undefined" && !!Intl.Locale && ("weekInfo" in Intl.Locale.prototype || "getWeekInfo" in Intl.Locale.prototype);
  } catch (e) {
    return false;
  }
}
function maybeArray(thing) {
  return Array.isArray(thing) ? thing : [thing];
}
function bestBy(arr, by, compare) {
  if (arr.length === 0) {
    return void 0;
  }
  return arr.reduce((best, next) => {
    const pair = [by(next), next];
    if (!best) {
      return pair;
    } else if (compare(best[0], pair[0]) === best[0]) {
      return best;
    } else {
      return pair;
    }
  }, null)[1];
}
function pick(obj, keys) {
  return keys.reduce((a, k) => {
    a[k] = obj[k];
    return a;
  }, {});
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}
function validateWeekSettings(settings) {
  if (settings == null) {
    return null;
  } else if (typeof settings !== "object") {
    throw new InvalidArgumentError("Week settings must be an object");
  } else {
    if (!integerBetween(settings.firstDay, 1, 7) || !integerBetween(settings.minimalDays, 1, 7) || !Array.isArray(settings.weekend) || settings.weekend.some((v) => !integerBetween(v, 1, 7))) {
      throw new InvalidArgumentError("Invalid week settings");
    }
    return {
      firstDay: settings.firstDay,
      minimalDays: settings.minimalDays,
      weekend: Array.from(settings.weekend)
    };
  }
}
function integerBetween(thing, bottom, top) {
  return isInteger(thing) && thing >= bottom && thing <= top;
}
function floorMod(x, n2) {
  return x - n2 * Math.floor(x / n2);
}
function padStart(input, n2 = 2) {
  const isNeg = input < 0;
  let padded;
  if (isNeg) {
    padded = "-" + ("" + -input).padStart(n2, "0");
  } else {
    padded = ("" + input).padStart(n2, "0");
  }
  return padded;
}
function parseInteger(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseInt(string, 10);
  }
}
function parseFloating(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseFloat(string);
  }
}
function parseMillis(fraction) {
  if (isUndefined(fraction) || fraction === null || fraction === "") {
    return void 0;
  } else {
    const f = parseFloat("0." + fraction) * 1e3;
    return Math.floor(f);
  }
}
function roundTo(number, digits, towardZero = false) {
  const factor = 10 ** digits, rounder = towardZero ? Math.trunc : Math.round;
  return rounder(number * factor) / factor;
}
function isLeapYear(year) {
  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}
function daysInMonth(year, month) {
  const modMonth = floorMod(month - 1, 12) + 1, modYear = year + (month - modMonth) / 12;
  if (modMonth === 2) {
    return isLeapYear(modYear) ? 29 : 28;
  } else {
    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
  }
}
function objToLocalTS(obj) {
  let d = Date.UTC(
    obj.year,
    obj.month - 1,
    obj.day,
    obj.hour,
    obj.minute,
    obj.second,
    obj.millisecond
  );
  if (obj.year < 100 && obj.year >= 0) {
    d = new Date(d);
    d.setUTCFullYear(obj.year, obj.month - 1, obj.day);
  }
  return +d;
}
function firstWeekOffset(year, minDaysInFirstWeek, startOfWeek) {
  const fwdlw = isoWeekdayToLocal(dayOfWeek(year, 1, minDaysInFirstWeek), startOfWeek);
  return -fwdlw + minDaysInFirstWeek - 1;
}
function weeksInWeekYear(weekYear, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const weekOffset = firstWeekOffset(weekYear, minDaysInFirstWeek, startOfWeek);
  const weekOffsetNext = firstWeekOffset(weekYear + 1, minDaysInFirstWeek, startOfWeek);
  return (daysInYear(weekYear) - weekOffset + weekOffsetNext) / 7;
}
function untruncateYear(year) {
  if (year > 99) {
    return year;
  } else
    return year > Settings.twoDigitCutoffYear ? 1900 + year : 2e3 + year;
}
function parseZoneInfo(ts, offsetFormat, locale, timeZone = null) {
  const date = new Date(ts), intlOpts = {
    hourCycle: "h23",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  };
  if (timeZone) {
    intlOpts.timeZone = timeZone;
  }
  const modified = { timeZoneName: offsetFormat, ...intlOpts };
  const parsed = new Intl.DateTimeFormat(locale, modified).formatToParts(date).find((m) => m.type.toLowerCase() === "timezonename");
  return parsed ? parsed.value : null;
}
function signedOffset(offHourStr, offMinuteStr) {
  let offHour = parseInt(offHourStr, 10);
  if (Number.isNaN(offHour)) {
    offHour = 0;
  }
  const offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
  return offHour * 60 + offMinSigned;
}
function asNumber(value) {
  const numericValue = Number(value);
  if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
    throw new InvalidArgumentError(`Invalid unit value ${value}`);
  return numericValue;
}
function normalizeObject(obj, normalizer) {
  const normalized = {};
  for (const u in obj) {
    if (hasOwnProperty(obj, u)) {
      const v = obj[u];
      if (v === void 0 || v === null)
        continue;
      normalized[normalizer(u)] = asNumber(v);
    }
  }
  return normalized;
}
function formatOffset(offset2, format) {
  const hours = Math.trunc(Math.abs(offset2 / 60)), minutes = Math.trunc(Math.abs(offset2 % 60)), sign = offset2 >= 0 ? "+" : "-";
  switch (format) {
    case "short":
      return `${sign}${padStart(hours, 2)}:${padStart(minutes, 2)}`;
    case "narrow":
      return `${sign}${hours}${minutes > 0 ? `:${minutes}` : ""}`;
    case "techie":
      return `${sign}${padStart(hours, 2)}${padStart(minutes, 2)}`;
    default:
      throw new RangeError(`Value format ${format} is out of range for property format`);
  }
}
function timeObject(obj) {
  return pick(obj, ["hour", "minute", "second", "millisecond"]);
}
var init_util = __esm({
  "node_modules/luxon/src/impl/util.js"() {
    init_errors();
    init_settings();
    init_conversions();
  }
});

// node_modules/luxon/src/impl/english.js
function months(length) {
  switch (length) {
    case "narrow":
      return [...monthsNarrow];
    case "short":
      return [...monthsShort];
    case "long":
      return [...monthsLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
    case "2-digit":
      return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    default:
      return null;
  }
}
function weekdays(length) {
  switch (length) {
    case "narrow":
      return [...weekdaysNarrow];
    case "short":
      return [...weekdaysShort];
    case "long":
      return [...weekdaysLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7"];
    default:
      return null;
  }
}
function eras(length) {
  switch (length) {
    case "narrow":
      return [...erasNarrow];
    case "short":
      return [...erasShort];
    case "long":
      return [...erasLong];
    default:
      return null;
  }
}
function meridiemForDateTime(dt) {
  return meridiems[dt.hour < 12 ? 0 : 1];
}
function weekdayForDateTime(dt, length) {
  return weekdays(length)[dt.weekday - 1];
}
function monthForDateTime(dt, length) {
  return months(length)[dt.month - 1];
}
function eraForDateTime(dt, length) {
  return eras(length)[dt.year < 0 ? 0 : 1];
}
function formatRelativeTime(unit, count, numeric = "always", narrow = false) {
  const units = {
    years: ["year", "yr."],
    quarters: ["quarter", "qtr."],
    months: ["month", "mo."],
    weeks: ["week", "wk."],
    days: ["day", "day", "days"],
    hours: ["hour", "hr."],
    minutes: ["minute", "min."],
    seconds: ["second", "sec."]
  };
  const lastable = ["hours", "minutes", "seconds"].indexOf(unit) === -1;
  if (numeric === "auto" && lastable) {
    const isDay = unit === "days";
    switch (count) {
      case 1:
        return isDay ? "tomorrow" : `next ${units[unit][0]}`;
      case -1:
        return isDay ? "yesterday" : `last ${units[unit][0]}`;
      case 0:
        return isDay ? "today" : `this ${units[unit][0]}`;
      default:
    }
  }
  const isInPast = Object.is(count, -0) || count < 0, fmtValue = Math.abs(count), singular = fmtValue === 1, lilUnits = units[unit], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit][0] : unit;
  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;
}
var monthsLong, monthsShort, monthsNarrow, weekdaysLong, weekdaysShort, weekdaysNarrow, meridiems, erasLong, erasShort, erasNarrow;
var init_english = __esm({
  "node_modules/luxon/src/impl/english.js"() {
    init_formats();
    init_util();
    monthsLong = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ];
    monthsShort = [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ];
    monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
    weekdaysLong = [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday"
    ];
    weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
    weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
    meridiems = ["AM", "PM"];
    erasLong = ["Before Christ", "Anno Domini"];
    erasShort = ["BC", "AD"];
    erasNarrow = ["B", "A"];
  }
});

// node_modules/luxon/src/impl/formatter.js
function stringifyTokens(splits, tokenToString) {
  let s2 = "";
  for (const token of splits) {
    if (token.literal) {
      s2 += token.val;
    } else {
      s2 += tokenToString(token.val);
    }
  }
  return s2;
}
var macroTokenToFormatOpts, Formatter;
var init_formatter = __esm({
  "node_modules/luxon/src/impl/formatter.js"() {
    init_english();
    init_formats();
    init_util();
    macroTokenToFormatOpts = {
      D: DATE_SHORT,
      DD: DATE_MED,
      DDD: DATE_FULL,
      DDDD: DATE_HUGE,
      t: TIME_SIMPLE,
      tt: TIME_WITH_SECONDS,
      ttt: TIME_WITH_SHORT_OFFSET,
      tttt: TIME_WITH_LONG_OFFSET,
      T: TIME_24_SIMPLE,
      TT: TIME_24_WITH_SECONDS,
      TTT: TIME_24_WITH_SHORT_OFFSET,
      TTTT: TIME_24_WITH_LONG_OFFSET,
      f: DATETIME_SHORT,
      ff: DATETIME_MED,
      fff: DATETIME_FULL,
      ffff: DATETIME_HUGE,
      F: DATETIME_SHORT_WITH_SECONDS,
      FF: DATETIME_MED_WITH_SECONDS,
      FFF: DATETIME_FULL_WITH_SECONDS,
      FFFF: DATETIME_HUGE_WITH_SECONDS
    };
    Formatter = class _Formatter {
      static create(locale, opts = {}) {
        return new _Formatter(locale, opts);
      }
      static parseFormat(fmt) {
        let current = null, currentFull = "", bracketed = false;
        const splits = [];
        for (let i = 0; i < fmt.length; i++) {
          const c = fmt.charAt(i);
          if (c === "'") {
            if (currentFull.length > 0) {
              splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
            }
            current = null;
            currentFull = "";
            bracketed = !bracketed;
          } else if (bracketed) {
            currentFull += c;
          } else if (c === current) {
            currentFull += c;
          } else {
            if (currentFull.length > 0) {
              splits.push({ literal: /^\s+$/.test(currentFull), val: currentFull });
            }
            currentFull = c;
            current = c;
          }
        }
        if (currentFull.length > 0) {
          splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
        }
        return splits;
      }
      static macroTokenToFormatOpts(token) {
        return macroTokenToFormatOpts[token];
      }
      constructor(locale, formatOpts) {
        this.opts = formatOpts;
        this.loc = locale;
        this.systemLoc = null;
      }
      formatWithSystemDefault(dt, opts) {
        if (this.systemLoc === null) {
          this.systemLoc = this.loc.redefaultToSystem();
        }
        const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });
        return df.format();
      }
      dtFormatter(dt, opts = {}) {
        return this.loc.dtFormatter(dt, { ...this.opts, ...opts });
      }
      formatDateTime(dt, opts) {
        return this.dtFormatter(dt, opts).format();
      }
      formatDateTimeParts(dt, opts) {
        return this.dtFormatter(dt, opts).formatToParts();
      }
      formatInterval(interval, opts) {
        const df = this.dtFormatter(interval.start, opts);
        return df.dtf.formatRange(interval.start.toJSDate(), interval.end.toJSDate());
      }
      resolvedOptions(dt, opts) {
        return this.dtFormatter(dt, opts).resolvedOptions();
      }
      num(n2, p = 0) {
        if (this.opts.forceSimple) {
          return padStart(n2, p);
        }
        const opts = { ...this.opts };
        if (p > 0) {
          opts.padTo = p;
        }
        return this.loc.numberFormatter(opts).format(n2);
      }
      formatDateTimeFromString(dt, fmt) {
        const knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = (opts, extract) => this.loc.extract(dt, opts, extract), formatOffset2 = (opts) => {
          if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
            return "Z";
          }
          return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
        }, meridiem = () => knownEnglish ? meridiemForDateTime(dt) : string({ hour: "numeric", hourCycle: "h12" }, "dayperiod"), month = (length, standalone) => knownEnglish ? monthForDateTime(dt, length) : string(standalone ? { month: length } : { month: length, day: "numeric" }, "month"), weekday = (length, standalone) => knownEnglish ? weekdayForDateTime(dt, length) : string(
          standalone ? { weekday: length } : { weekday: length, month: "long", day: "numeric" },
          "weekday"
        ), maybeMacro = (token) => {
          const formatOpts = _Formatter.macroTokenToFormatOpts(token);
          if (formatOpts) {
            return this.formatWithSystemDefault(dt, formatOpts);
          } else {
            return token;
          }
        }, era = (length) => knownEnglish ? eraForDateTime(dt, length) : string({ era: length }, "era"), tokenToString = (token) => {
          switch (token) {
            case "S":
              return this.num(dt.millisecond);
            case "u":
            case "SSS":
              return this.num(dt.millisecond, 3);
            case "s":
              return this.num(dt.second);
            case "ss":
              return this.num(dt.second, 2);
            case "uu":
              return this.num(Math.floor(dt.millisecond / 10), 2);
            case "uuu":
              return this.num(Math.floor(dt.millisecond / 100));
            case "m":
              return this.num(dt.minute);
            case "mm":
              return this.num(dt.minute, 2);
            case "h":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
            case "hh":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
            case "H":
              return this.num(dt.hour);
            case "HH":
              return this.num(dt.hour, 2);
            case "Z":
              return formatOffset2({ format: "narrow", allowZ: this.opts.allowZ });
            case "ZZ":
              return formatOffset2({ format: "short", allowZ: this.opts.allowZ });
            case "ZZZ":
              return formatOffset2({ format: "techie", allowZ: this.opts.allowZ });
            case "ZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "short", locale: this.loc.locale });
            case "ZZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "long", locale: this.loc.locale });
            case "z":
              return dt.zoneName;
            case "a":
              return meridiem();
            case "d":
              return useDateTimeFormatter ? string({ day: "numeric" }, "day") : this.num(dt.day);
            case "dd":
              return useDateTimeFormatter ? string({ day: "2-digit" }, "day") : this.num(dt.day, 2);
            case "c":
              return this.num(dt.weekday);
            case "ccc":
              return weekday("short", true);
            case "cccc":
              return weekday("long", true);
            case "ccccc":
              return weekday("narrow", true);
            case "E":
              return this.num(dt.weekday);
            case "EEE":
              return weekday("short", false);
            case "EEEE":
              return weekday("long", false);
            case "EEEEE":
              return weekday("narrow", false);
            case "L":
              return useDateTimeFormatter ? string({ month: "numeric", day: "numeric" }, "month") : this.num(dt.month);
            case "LL":
              return useDateTimeFormatter ? string({ month: "2-digit", day: "numeric" }, "month") : this.num(dt.month, 2);
            case "LLL":
              return month("short", true);
            case "LLLL":
              return month("long", true);
            case "LLLLL":
              return month("narrow", true);
            case "M":
              return useDateTimeFormatter ? string({ month: "numeric" }, "month") : this.num(dt.month);
            case "MM":
              return useDateTimeFormatter ? string({ month: "2-digit" }, "month") : this.num(dt.month, 2);
            case "MMM":
              return month("short", false);
            case "MMMM":
              return month("long", false);
            case "MMMMM":
              return month("narrow", false);
            case "y":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year);
            case "yy":
              return useDateTimeFormatter ? string({ year: "2-digit" }, "year") : this.num(dt.year.toString().slice(-2), 2);
            case "yyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 4);
            case "yyyyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 6);
            case "G":
              return era("short");
            case "GG":
              return era("long");
            case "GGGGG":
              return era("narrow");
            case "kk":
              return this.num(dt.weekYear.toString().slice(-2), 2);
            case "kkkk":
              return this.num(dt.weekYear, 4);
            case "W":
              return this.num(dt.weekNumber);
            case "WW":
              return this.num(dt.weekNumber, 2);
            case "n":
              return this.num(dt.localWeekNumber);
            case "nn":
              return this.num(dt.localWeekNumber, 2);
            case "ii":
              return this.num(dt.localWeekYear.toString().slice(-2), 2);
            case "iiii":
              return this.num(dt.localWeekYear, 4);
            case "o":
              return this.num(dt.ordinal);
            case "ooo":
              return this.num(dt.ordinal, 3);
            case "q":
              return this.num(dt.quarter);
            case "qq":
              return this.num(dt.quarter, 2);
            case "X":
              return this.num(Math.floor(dt.ts / 1e3));
            case "x":
              return this.num(dt.ts);
            default:
              return maybeMacro(token);
          }
        };
        return stringifyTokens(_Formatter.parseFormat(fmt), tokenToString);
      }
      formatDurationFromString(dur, fmt) {
        const tokenToField = (token) => {
          switch (token[0]) {
            case "S":
              return "millisecond";
            case "s":
              return "second";
            case "m":
              return "minute";
            case "h":
              return "hour";
            case "d":
              return "day";
            case "w":
              return "week";
            case "M":
              return "month";
            case "y":
              return "year";
            default:
              return null;
          }
        }, tokenToString = (lildur) => (token) => {
          const mapped = tokenToField(token);
          if (mapped) {
            return this.num(lildur.get(mapped), token.length);
          } else {
            return token;
          }
        }, tokens = _Formatter.parseFormat(fmt), realTokens = tokens.reduce(
          (found, { literal, val }) => literal ? found : found.concat(val),
          []
        ), collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));
        return stringifyTokens(tokens, tokenToString(collapsed));
      }
    };
  }
});

// node_modules/luxon/src/impl/regexParser.js
function combineRegexes(...regexes) {
  const full = regexes.reduce((f, r) => f + r.source, "");
  return RegExp(`^${full}$`);
}
function combineExtractors(...extractors) {
  return (m) => extractors.reduce(
    ([mergedVals, mergedZone, cursor], ex) => {
      const [val, zone, next] = ex(m, cursor);
      return [{ ...mergedVals, ...val }, zone || mergedZone, next];
    },
    [{}, null, 1]
  ).slice(0, 2);
}
function parse(s2, ...patterns) {
  if (s2 == null) {
    return [null, null];
  }
  for (const [regex, extractor] of patterns) {
    const m = regex.exec(s2);
    if (m) {
      return extractor(m);
    }
  }
  return [null, null];
}
function simpleParse(...keys) {
  return (match2, cursor) => {
    const ret = {};
    let i;
    for (i = 0; i < keys.length; i++) {
      ret[keys[i]] = parseInteger(match2[cursor + i]);
    }
    return [ret, null, cursor + i];
  };
}
function int(match2, pos, fallback) {
  const m = match2[pos];
  return isUndefined(m) ? fallback : parseInteger(m);
}
function extractISOYmd(match2, cursor) {
  const item = {
    year: int(match2, cursor),
    month: int(match2, cursor + 1, 1),
    day: int(match2, cursor + 2, 1)
  };
  return [item, null, cursor + 3];
}
function extractISOTime(match2, cursor) {
  const item = {
    hours: int(match2, cursor, 0),
    minutes: int(match2, cursor + 1, 0),
    seconds: int(match2, cursor + 2, 0),
    milliseconds: parseMillis(match2[cursor + 3])
  };
  return [item, null, cursor + 4];
}
function extractISOOffset(match2, cursor) {
  const local = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local ? null : FixedOffsetZone.instance(fullOffset);
  return [{}, zone, cursor + 3];
}
function extractIANAZone(match2, cursor) {
  const zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
  return [{}, zone, cursor + 1];
}
function extractISODuration(match2) {
  const [s2, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] = match2;
  const hasNegativePrefix = s2[0] === "-";
  const negativeSeconds = secondStr && secondStr[0] === "-";
  const maybeNegate = (num, force = false) => num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
  return [
    {
      years: maybeNegate(parseFloating(yearStr)),
      months: maybeNegate(parseFloating(monthStr)),
      weeks: maybeNegate(parseFloating(weekStr)),
      days: maybeNegate(parseFloating(dayStr)),
      hours: maybeNegate(parseFloating(hourStr)),
      minutes: maybeNegate(parseFloating(minuteStr)),
      seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
    }
  ];
}
function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  const result = {
    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
    month: monthsShort.indexOf(monthStr) + 1,
    day: parseInteger(dayStr),
    hour: parseInteger(hourStr),
    minute: parseInteger(minuteStr)
  };
  if (secondStr)
    result.second = parseInteger(secondStr);
  if (weekdayStr) {
    result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
  }
  return result;
}
function extractRFC2822(match2) {
  const [
    ,
    weekdayStr,
    dayStr,
    monthStr,
    yearStr,
    hourStr,
    minuteStr,
    secondStr,
    obsOffset,
    milOffset,
    offHourStr,
    offMinuteStr
  ] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  let offset2;
  if (obsOffset) {
    offset2 = obsOffsets[obsOffset];
  } else if (milOffset) {
    offset2 = 0;
  } else {
    offset2 = signedOffset(offHourStr, offMinuteStr);
  }
  return [result, new FixedOffsetZone(offset2)];
}
function preprocessRFC2822(s2) {
  return s2.replace(/\([^()]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
}
function extractRFC1123Or850(match2) {
  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function extractASCII(match2) {
  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function parseISODate(s2) {
  return parse(
    s2,
    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],
    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],
    [isoTimeCombinedRegex, extractISOTimeAndOffset]
  );
}
function parseRFC2822Date(s2) {
  return parse(preprocessRFC2822(s2), [rfc2822, extractRFC2822]);
}
function parseHTTPDate(s2) {
  return parse(
    s2,
    [rfc1123, extractRFC1123Or850],
    [rfc850, extractRFC1123Or850],
    [ascii, extractASCII]
  );
}
function parseISODuration(s2) {
  return parse(s2, [isoDuration, extractISODuration]);
}
function parseISOTimeOnly(s2) {
  return parse(s2, [isoTimeOnly, extractISOTimeOnly]);
}
function parseSQL(s2) {
  return parse(
    s2,
    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]
  );
}
var ianaRegex, offsetRegex, isoExtendedZone, isoTimeBaseRegex, isoTimeRegex, isoTimeExtensionRegex, isoYmdRegex, isoWeekRegex, isoOrdinalRegex, extractISOWeekData, extractISOOrdinalData, sqlYmdRegex, sqlTimeRegex, sqlTimeExtensionRegex, isoTimeOnly, isoDuration, obsOffsets, rfc2822, rfc1123, rfc850, ascii, isoYmdWithTimeExtensionRegex, isoWeekWithTimeExtensionRegex, isoOrdinalWithTimeExtensionRegex, isoTimeCombinedRegex, extractISOYmdTimeAndOffset, extractISOWeekTimeAndOffset, extractISOOrdinalDateAndTime, extractISOTimeAndOffset, extractISOTimeOnly, sqlYmdWithTimeExtensionRegex, sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone;
var init_regexParser = __esm({
  "node_modules/luxon/src/impl/regexParser.js"() {
    init_util();
    init_english();
    init_fixedOffsetZone();
    init_IANAZone();
    ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;
    offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
    isoExtendedZone = `(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;
    isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
    isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);
    isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);
    isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
    isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
    isoOrdinalRegex = /(\d{4})-?(\d{3})/;
    extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
    extractISOOrdinalData = simpleParse("year", "ordinal");
    sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
    sqlTimeRegex = RegExp(
      `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`
    );
    sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);
    isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);
    isoDuration = /^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;
    obsOffsets = {
      GMT: 0,
      EDT: -4 * 60,
      EST: -5 * 60,
      CDT: -5 * 60,
      CST: -6 * 60,
      MDT: -6 * 60,
      MST: -7 * 60,
      PDT: -7 * 60,
      PST: -8 * 60
    };
    rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
    rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
    rfc850 = /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
    ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
    isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
    isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
    isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
    isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
    extractISOYmdTimeAndOffset = combineExtractors(
      extractISOYmd,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOWeekTimeAndOffset = combineExtractors(
      extractISOWeekData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOOrdinalDateAndTime = combineExtractors(
      extractISOOrdinalData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeAndOffset = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeOnly = combineExtractors(extractISOTime);
    sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
    sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
    extractISOTimeOffsetAndIANAZone = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
  }
});

// node_modules/luxon/src/duration.js
function clone(dur, alts, clear = false) {
  const conf = {
    values: clear ? alts.values : { ...dur.values, ...alts.values || {} },
    loc: dur.loc.clone(alts.loc),
    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,
    matrix: alts.matrix || dur.matrix
  };
  return new Duration(conf);
}
function durationToMillis(matrix, vals) {
  var _a;
  let sum = (_a = vals.milliseconds) != null ? _a : 0;
  for (const unit of reverseUnits.slice(1)) {
    if (vals[unit]) {
      sum += vals[unit] * matrix[unit]["milliseconds"];
    }
  }
  return sum;
}
function normalizeValues(matrix, vals) {
  const factor = durationToMillis(matrix, vals) < 0 ? -1 : 1;
  orderedUnits.reduceRight((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const previousVal = vals[previous] * factor;
        const conv = matrix[current][previous];
        const rollUp = Math.floor(previousVal / conv);
        vals[current] += rollUp * factor;
        vals[previous] -= rollUp * conv * factor;
      }
      return current;
    } else {
      return previous;
    }
  }, null);
  orderedUnits.reduce((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const fraction = vals[previous] % 1;
        vals[previous] -= fraction;
        vals[current] += fraction * matrix[previous][current];
      }
      return current;
    } else {
      return previous;
    }
  }, null);
}
function removeZeroes(vals) {
  const newVals = {};
  for (const [key, value] of Object.entries(vals)) {
    if (value !== 0) {
      newVals[key] = value;
    }
  }
  return newVals;
}
var INVALID, lowOrderMatrix, casualMatrix, daysInYearAccurate, daysInMonthAccurate, accurateMatrix, orderedUnits, reverseUnits, Duration;
var init_duration = __esm({
  "node_modules/luxon/src/duration.js"() {
    init_errors();
    init_formatter();
    init_invalid();
    init_locale();
    init_regexParser();
    init_util();
    init_settings();
    init_datetime();
    INVALID = "Invalid Duration";
    lowOrderMatrix = {
      weeks: {
        days: 7,
        hours: 7 * 24,
        minutes: 7 * 24 * 60,
        seconds: 7 * 24 * 60 * 60,
        milliseconds: 7 * 24 * 60 * 60 * 1e3
      },
      days: {
        hours: 24,
        minutes: 24 * 60,
        seconds: 24 * 60 * 60,
        milliseconds: 24 * 60 * 60 * 1e3
      },
      hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
      minutes: { seconds: 60, milliseconds: 60 * 1e3 },
      seconds: { milliseconds: 1e3 }
    };
    casualMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: 52,
        days: 365,
        hours: 365 * 24,
        minutes: 365 * 24 * 60,
        seconds: 365 * 24 * 60 * 60,
        milliseconds: 365 * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: 13,
        days: 91,
        hours: 91 * 24,
        minutes: 91 * 24 * 60,
        seconds: 91 * 24 * 60 * 60,
        milliseconds: 91 * 24 * 60 * 60 * 1e3
      },
      months: {
        weeks: 4,
        days: 30,
        hours: 30 * 24,
        minutes: 30 * 24 * 60,
        seconds: 30 * 24 * 60 * 60,
        milliseconds: 30 * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    daysInYearAccurate = 146097 / 400;
    daysInMonthAccurate = 146097 / 4800;
    accurateMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: daysInYearAccurate / 7,
        days: daysInYearAccurate,
        hours: daysInYearAccurate * 24,
        minutes: daysInYearAccurate * 24 * 60,
        seconds: daysInYearAccurate * 24 * 60 * 60,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: daysInYearAccurate / 28,
        days: daysInYearAccurate / 4,
        hours: daysInYearAccurate * 24 / 4,
        minutes: daysInYearAccurate * 24 * 60 / 4,
        seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
      },
      months: {
        weeks: daysInMonthAccurate / 7,
        days: daysInMonthAccurate,
        hours: daysInMonthAccurate * 24,
        minutes: daysInMonthAccurate * 24 * 60,
        seconds: daysInMonthAccurate * 24 * 60 * 60,
        milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    orderedUnits = [
      "years",
      "quarters",
      "months",
      "weeks",
      "days",
      "hours",
      "minutes",
      "seconds",
      "milliseconds"
    ];
    reverseUnits = orderedUnits.slice(0).reverse();
    Duration = class _Duration {
      /**
       * @private
       */
      constructor(config) {
        const accurate = config.conversionAccuracy === "longterm" || false;
        let matrix = accurate ? accurateMatrix : casualMatrix;
        if (config.matrix) {
          matrix = config.matrix;
        }
        this.values = config.values;
        this.loc = config.loc || Locale.create();
        this.conversionAccuracy = accurate ? "longterm" : "casual";
        this.invalid = config.invalid || null;
        this.matrix = matrix;
        this.isLuxonDuration = true;
      }
      /**
       * Create Duration from a number of milliseconds.
       * @param {number} count of milliseconds
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      static fromMillis(count, opts) {
        return _Duration.fromObject({ milliseconds: count }, opts);
      }
      /**
       * Create a Duration from a JavaScript object with keys like 'years' and 'hours'.
       * If this object is empty then a zero milliseconds duration is returned.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.years
       * @param {number} obj.quarters
       * @param {number} obj.months
       * @param {number} obj.weeks
       * @param {number} obj.days
       * @param {number} obj.hours
       * @param {number} obj.minutes
       * @param {number} obj.seconds
       * @param {number} obj.milliseconds
       * @param {Object} [opts=[]] - options for creating this Duration
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the custom conversion system to use
       * @return {Duration}
       */
      static fromObject(obj, opts = {}) {
        if (obj == null || typeof obj !== "object") {
          throw new InvalidArgumentError(
            `Duration.fromObject: argument expected to be an object, got ${obj === null ? "null" : typeof obj}`
          );
        }
        return new _Duration({
          values: normalizeObject(obj, _Duration.normalizeUnit),
          loc: Locale.fromObject(opts),
          conversionAccuracy: opts.conversionAccuracy,
          matrix: opts.matrix
        });
      }
      /**
       * Create a Duration from DurationLike.
       *
       * @param {Object | number | Duration} durationLike
       * One of:
       * - object with keys like 'years' and 'hours'.
       * - number representing milliseconds
       * - Duration instance
       * @return {Duration}
       */
      static fromDurationLike(durationLike) {
        if (isNumber(durationLike)) {
          return _Duration.fromMillis(durationLike);
        } else if (_Duration.isDuration(durationLike)) {
          return durationLike;
        } else if (typeof durationLike === "object") {
          return _Duration.fromObject(durationLike);
        } else {
          throw new InvalidArgumentError(
            `Unknown duration argument ${durationLike} of type ${typeof durationLike}`
          );
        }
      }
      /**
       * Create a Duration from an ISO 8601 duration string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the preset conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromISO('P3Y6M1W4DT12H30M5S').toObject() //=> { years: 3, months: 6, weeks: 1, days: 4, hours: 12, minutes: 30, seconds: 5 }
       * @example Duration.fromISO('PT23H').toObject() //=> { hours: 23 }
       * @example Duration.fromISO('P5Y3M').toObject() //=> { years: 5, months: 3 }
       * @return {Duration}
       */
      static fromISO(text, opts) {
        const [parsed] = parseISODuration(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create a Duration from an ISO 8601 time string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @example Duration.fromISOTime('11:22:33.444').toObject() //=> { hours: 11, minutes: 22, seconds: 33, milliseconds: 444 }
       * @example Duration.fromISOTime('11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @return {Duration}
       */
      static fromISOTime(text, opts) {
        const [parsed] = parseISOTimeOnly(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create an invalid Duration.
       * @param {string} reason - simple string of why this datetime is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Duration}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDurationError(invalid);
        } else {
          return new _Duration({ invalid });
        }
      }
      /**
       * @private
       */
      static normalizeUnit(unit) {
        const normalized = {
          year: "years",
          years: "years",
          quarter: "quarters",
          quarters: "quarters",
          month: "months",
          months: "months",
          week: "weeks",
          weeks: "weeks",
          day: "days",
          days: "days",
          hour: "hours",
          hours: "hours",
          minute: "minutes",
          minutes: "minutes",
          second: "seconds",
          seconds: "seconds",
          millisecond: "milliseconds",
          milliseconds: "milliseconds"
        }[unit ? unit.toLowerCase() : unit];
        if (!normalized)
          throw new InvalidUnitError(unit);
        return normalized;
      }
      /**
       * Check if an object is a Duration. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDuration(o) {
        return o && o.isLuxonDuration || false;
      }
      /**
       * Get  the locale of a Duration, such 'en-GB'
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a Duration, such 'beng'. The numbering system is used when formatting the Duration
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Returns a string representation of this Duration formatted according to the specified format string. You may use these tokens:
       * * `S` for milliseconds
       * * `s` for seconds
       * * `m` for minutes
       * * `h` for hours
       * * `d` for days
       * * `w` for weeks
       * * `M` for months
       * * `y` for years
       * Notes:
       * * Add padding by repeating the token, e.g. "yy" pads the years to two digits, "hhhh" pads the hours out to four digits
       * * Tokens can be escaped by wrapping with single quotes.
       * * The duration will be converted to the set of units in the format string using {@link Duration#shiftTo} and the Durations's conversion accuracy setting.
       * @param {string} fmt - the format string
       * @param {Object} opts - options
       * @param {boolean} [opts.floor=true] - floor numerical values
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("y d s") //=> "1 6 2"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("yy dd sss") //=> "01 06 002"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("M S") //=> "12 518402000"
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        const fmtOpts = {
          ...opts,
          floor: opts.round !== false && opts.floor !== false
        };
        return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID;
      }
      /**
       * Returns a string representation of a Duration with all units included.
       * To modify its behavior, use `listStyle` and any Intl.NumberFormat option, though `unitDisplay` is especially relevant.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#options
       * @param {Object} opts - Formatting options. Accepts the same keys as the options parameter of the native `Intl.NumberFormat` constructor, as well as `listStyle`.
       * @param {string} [opts.listStyle='narrow'] - How to format the merged list. Corresponds to the `style` property of the options parameter of the native `Intl.ListFormat` constructor.
       * @example
       * ```js
       * var dur = Duration.fromObject({ days: 1, hours: 5, minutes: 6 })
       * dur.toHuman() //=> '1 day, 5 hours, 6 minutes'
       * dur.toHuman({ listStyle: "long" }) //=> '1 day, 5 hours, and 6 minutes'
       * dur.toHuman({ unitDisplay: "short" }) //=> '1 day, 5 hr, 6 min'
       * ```
       */
      toHuman(opts = {}) {
        if (!this.isValid)
          return INVALID;
        const l2 = orderedUnits.map((unit) => {
          const val = this.values[unit];
          if (isUndefined(val)) {
            return null;
          }
          return this.loc.numberFormatter({ style: "unit", unitDisplay: "long", ...opts, unit: unit.slice(0, -1) }).format(val);
        }).filter((n2) => n2);
        return this.loc.listFormatter({ type: "conjunction", style: opts.listStyle || "narrow", ...opts }).format(l2);
      }
      /**
       * Returns a JavaScript object with this Duration's values.
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toObject() //=> { years: 1, days: 6, seconds: 2 }
       * @return {Object}
       */
      toObject() {
        if (!this.isValid)
          return {};
        return { ...this.values };
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromObject({ years: 3, seconds: 45 }).toISO() //=> 'P3YT45S'
       * @example Duration.fromObject({ months: 4, seconds: 45 }).toISO() //=> 'P4MT45S'
       * @example Duration.fromObject({ months: 5 }).toISO() //=> 'P5M'
       * @example Duration.fromObject({ minutes: 5 }).toISO() //=> 'PT5M'
       * @example Duration.fromObject({ milliseconds: 6 }).toISO() //=> 'PT0.006S'
       * @return {string}
       */
      toISO() {
        if (!this.isValid)
          return null;
        let s2 = "P";
        if (this.years !== 0)
          s2 += this.years + "Y";
        if (this.months !== 0 || this.quarters !== 0)
          s2 += this.months + this.quarters * 3 + "M";
        if (this.weeks !== 0)
          s2 += this.weeks + "W";
        if (this.days !== 0)
          s2 += this.days + "D";
        if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
          s2 += "T";
        if (this.hours !== 0)
          s2 += this.hours + "H";
        if (this.minutes !== 0)
          s2 += this.minutes + "M";
        if (this.seconds !== 0 || this.milliseconds !== 0)
          s2 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
        if (s2 === "P")
          s2 += "T0S";
        return s2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration, formatted as a time of day.
       * Note that this will return null if the duration is invalid, negative, or equal to or greater than 24 hours.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example Duration.fromObject({ hours: 11 }).toISOTime() //=> '11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressMilliseconds: true }) //=> '11:00:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressSeconds: true }) //=> '11:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ includePrefix: true }) //=> 'T11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ format: 'basic' }) //=> '110000.000'
       * @return {string}
       */
      toISOTime(opts = {}) {
        if (!this.isValid)
          return null;
        const millis = this.toMillis();
        if (millis < 0 || millis >= 864e5)
          return null;
        opts = {
          suppressMilliseconds: false,
          suppressSeconds: false,
          includePrefix: false,
          format: "extended",
          ...opts,
          includeOffset: false
        };
        const dateTime = DateTime.fromMillis(millis, { zone: "UTC" });
        return dateTime.toISOTime(opts);
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in debugging.
       * @return {string}
       */
      toString() {
        return this.toISO();
      }
      /**
       * Returns a string representation of this Duration appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Duration { values: ${JSON.stringify(this.values)} }`;
        } else {
          return `Duration { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns an milliseconds value of this Duration.
       * @return {number}
       */
      toMillis() {
        if (!this.isValid)
          return NaN;
        return durationToMillis(this.matrix, this.values);
      }
      /**
       * Returns an milliseconds value of this Duration. Alias of {@link toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Make this Duration longer by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration), result = {};
        for (const k of orderedUnits) {
          if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {
            result[k] = dur.get(k) + this.get(k);
          }
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Make this Duration shorter by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration);
        return this.plus(dur.negate());
      }
      /**
       * Scale this Duration by the specified amount. Return a newly-constructed Duration.
       * @param {function} fn - The function to apply to each unit. Arity is 1 or 2: the value of the unit and, optionally, the unit name. Must return a number.
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits(x => x * 2) //=> { hours: 2, minutes: 60 }
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits((x, u) => u === "hours" ? x * 2 : x) //=> { hours: 2, minutes: 30 }
       * @return {Duration}
       */
      mapUnits(fn) {
        if (!this.isValid)
          return this;
        const result = {};
        for (const k of Object.keys(this.values)) {
          result[k] = asNumber(fn(this.values[k], k));
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example Duration.fromObject({years: 2, days: 3}).get('years') //=> 2
       * @example Duration.fromObject({years: 2, days: 3}).get('months') //=> 0
       * @example Duration.fromObject({years: 2, days: 3}).get('days') //=> 3
       * @return {number}
       */
      get(unit) {
        return this[_Duration.normalizeUnit(unit)];
      }
      /**
       * "Set" the values of specified units. Return a newly-constructed Duration.
       * @param {Object} values - a mapping of units to numbers
       * @example dur.set({ years: 2017 })
       * @example dur.set({ hours: 8, minutes: 30 })
       * @return {Duration}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const mixed = { ...this.values, ...normalizeObject(values, _Duration.normalizeUnit) };
        return clone(this, { values: mixed });
      }
      /**
       * "Set" the locale and/or numberingSystem.  Returns a newly-constructed Duration.
       * @example dur.reconfigure({ locale: 'en-GB' })
       * @return {Duration}
       */
      reconfigure({ locale, numberingSystem, conversionAccuracy, matrix } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem });
        const opts = { loc, matrix, conversionAccuracy };
        return clone(this, opts);
      }
      /**
       * Return the length of the duration in the specified unit.
       * @param {string} unit - a unit such as 'minutes' or 'days'
       * @example Duration.fromObject({years: 1}).as('days') //=> 365
       * @example Duration.fromObject({years: 1}).as('months') //=> 12
       * @example Duration.fromObject({hours: 60}).as('days') //=> 2.5
       * @return {number}
       */
      as(unit) {
        return this.isValid ? this.shiftTo(unit).get(unit) : NaN;
      }
      /**
       * Reduce this Duration to its canonical representation in its current units.
       * Assuming the overall value of the Duration is positive, this means:
       * - excessive values for lower-order units are converted to higher-order units (if possible, see first and second example)
       * - negative lower-order units are converted to higher order units (there must be such a higher order unit, otherwise
       *   the overall value would be negative, see third example)
       * - fractional values for higher-order units are converted to lower-order units (if possible, see fourth example)
       *
       * If the overall value is negative, the result of this method is equivalent to `this.negate().normalize().negate()`.
       * @example Duration.fromObject({ years: 2, days: 5000 }).normalize().toObject() //=> { years: 15, days: 255 }
       * @example Duration.fromObject({ days: 5000 }).normalize().toObject() //=> { days: 5000 }
       * @example Duration.fromObject({ hours: 12, minutes: -45 }).normalize().toObject() //=> { hours: 11, minutes: 15 }
       * @example Duration.fromObject({ years: 2.5, days: 0, hours: 0 }).normalize().toObject() //=> { years: 2, days: 182, hours: 12 }
       * @return {Duration}
       */
      normalize() {
        if (!this.isValid)
          return this;
        const vals = this.toObject();
        normalizeValues(this.matrix, vals);
        return clone(this, { values: vals }, true);
      }
      /**
       * Rescale units to its largest representation
       * @example Duration.fromObject({ milliseconds: 90000 }).rescale().toObject() //=> { minutes: 1, seconds: 30 }
       * @return {Duration}
       */
      rescale() {
        if (!this.isValid)
          return this;
        const vals = removeZeroes(this.normalize().shiftToAll().toObject());
        return clone(this, { values: vals }, true);
      }
      /**
       * Convert this Duration into its representation in a different set of units.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).shiftTo('minutes', 'milliseconds').toObject() //=> { minutes: 60, milliseconds: 30000 }
       * @return {Duration}
       */
      shiftTo(...units) {
        if (!this.isValid)
          return this;
        if (units.length === 0) {
          return this;
        }
        units = units.map((u) => _Duration.normalizeUnit(u));
        const built = {}, accumulated = {}, vals = this.toObject();
        let lastUnit;
        for (const k of orderedUnits) {
          if (units.indexOf(k) >= 0) {
            lastUnit = k;
            let own = 0;
            for (const ak in accumulated) {
              own += this.matrix[ak][k] * accumulated[ak];
              accumulated[ak] = 0;
            }
            if (isNumber(vals[k])) {
              own += vals[k];
            }
            const i = Math.trunc(own);
            built[k] = i;
            accumulated[k] = (own * 1e3 - i * 1e3) / 1e3;
          } else if (isNumber(vals[k])) {
            accumulated[k] = vals[k];
          }
        }
        for (const key in accumulated) {
          if (accumulated[key] !== 0) {
            built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
          }
        }
        normalizeValues(this.matrix, built);
        return clone(this, { values: built }, true);
      }
      /**
       * Shift this Duration to all available units.
       * Same as shiftTo("years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds")
       * @return {Duration}
       */
      shiftToAll() {
        if (!this.isValid)
          return this;
        return this.shiftTo(
          "years",
          "months",
          "weeks",
          "days",
          "hours",
          "minutes",
          "seconds",
          "milliseconds"
        );
      }
      /**
       * Return the negative of this Duration.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).negate().toObject() //=> { hours: -1, seconds: -30 }
       * @return {Duration}
       */
      negate() {
        if (!this.isValid)
          return this;
        const negated = {};
        for (const k of Object.keys(this.values)) {
          negated[k] = this.values[k] === 0 ? 0 : -this.values[k];
        }
        return clone(this, { values: negated }, true);
      }
      /**
       * Get the years.
       * @type {number}
       */
      get years() {
        return this.isValid ? this.values.years || 0 : NaN;
      }
      /**
       * Get the quarters.
       * @type {number}
       */
      get quarters() {
        return this.isValid ? this.values.quarters || 0 : NaN;
      }
      /**
       * Get the months.
       * @type {number}
       */
      get months() {
        return this.isValid ? this.values.months || 0 : NaN;
      }
      /**
       * Get the weeks
       * @type {number}
       */
      get weeks() {
        return this.isValid ? this.values.weeks || 0 : NaN;
      }
      /**
       * Get the days.
       * @type {number}
       */
      get days() {
        return this.isValid ? this.values.days || 0 : NaN;
      }
      /**
       * Get the hours.
       * @type {number}
       */
      get hours() {
        return this.isValid ? this.values.hours || 0 : NaN;
      }
      /**
       * Get the minutes.
       * @type {number}
       */
      get minutes() {
        return this.isValid ? this.values.minutes || 0 : NaN;
      }
      /**
       * Get the seconds.
       * @return {number}
       */
      get seconds() {
        return this.isValid ? this.values.seconds || 0 : NaN;
      }
      /**
       * Get the milliseconds.
       * @return {number}
       */
      get milliseconds() {
        return this.isValid ? this.values.milliseconds || 0 : NaN;
      }
      /**
       * Returns whether the Duration is invalid. Invalid durations are returned by diff operations
       * on invalid DateTimes or Intervals.
       * @return {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this Duration became invalid, or null if the Duration is valid
       * @return {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Duration became invalid, or null if the Duration is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Equality check
       * Two Durations are equal iff they have the same units and the same values for each unit.
       * @param {Duration} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        if (!this.loc.equals(other.loc)) {
          return false;
        }
        function eq(v1, v2) {
          if (v1 === void 0 || v1 === 0)
            return v2 === void 0 || v2 === 0;
          return v1 === v2;
        }
        for (const u of orderedUnits) {
          if (!eq(this.values[u], other.values[u])) {
            return false;
          }
        }
        return true;
      }
    };
  }
});

// node_modules/luxon/src/interval.js
function validateStartEnd(start, end) {
  if (!start || !start.isValid) {
    return Interval.invalid("missing or invalid start");
  } else if (!end || !end.isValid) {
    return Interval.invalid("missing or invalid end");
  } else if (end < start) {
    return Interval.invalid(
      "end before start",
      `The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`
    );
  } else {
    return null;
  }
}
var INVALID2, Interval;
var init_interval = __esm({
  "node_modules/luxon/src/interval.js"() {
    init_datetime();
    init_duration();
    init_settings();
    init_errors();
    init_invalid();
    init_formatter();
    init_formats();
    INVALID2 = "Invalid Interval";
    Interval = class _Interval {
      /**
       * @private
       */
      constructor(config) {
        this.s = config.start;
        this.e = config.end;
        this.invalid = config.invalid || null;
        this.isLuxonInterval = true;
      }
      /**
       * Create an invalid Interval.
       * @param {string} reason - simple string of why this Interval is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Interval}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidIntervalError(invalid);
        } else {
          return new _Interval({ invalid });
        }
      }
      /**
       * Create an Interval from a start DateTime and an end DateTime. Inclusive of the start but not the end.
       * @param {DateTime|Date|Object} start
       * @param {DateTime|Date|Object} end
       * @return {Interval}
       */
      static fromDateTimes(start, end) {
        const builtStart = friendlyDateTime(start), builtEnd = friendlyDateTime(end);
        const validateError = validateStartEnd(builtStart, builtEnd);
        if (validateError == null) {
          return new _Interval({
            start: builtStart,
            end: builtEnd
          });
        } else {
          return validateError;
        }
      }
      /**
       * Create an Interval from a start DateTime and a Duration to extend to.
       * @param {DateTime|Date|Object} start
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static after(start, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start);
        return _Interval.fromDateTimes(dt, dt.plus(dur));
      }
      /**
       * Create an Interval from an end DateTime and a Duration to extend backwards to.
       * @param {DateTime|Date|Object} end
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static before(end, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
        return _Interval.fromDateTimes(dt.minus(dur), dt);
      }
      /**
       * Create an Interval from an ISO 8601 string.
       * Accepts `<start>/<end>`, `<start>/<duration>`, and `<duration>/<end>` formats.
       * @param {string} text - the ISO string to parse
       * @param {Object} [opts] - options to pass {@link DateTime#fromISO} and optionally {@link Duration#fromISO}
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {Interval}
       */
      static fromISO(text, opts) {
        const [s2, e] = (text || "").split("/", 2);
        if (s2 && e) {
          let start, startIsValid;
          try {
            start = DateTime.fromISO(s2, opts);
            startIsValid = start.isValid;
          } catch (e2) {
            startIsValid = false;
          }
          let end, endIsValid;
          try {
            end = DateTime.fromISO(e, opts);
            endIsValid = end.isValid;
          } catch (e2) {
            endIsValid = false;
          }
          if (startIsValid && endIsValid) {
            return _Interval.fromDateTimes(start, end);
          }
          if (startIsValid) {
            const dur = Duration.fromISO(e, opts);
            if (dur.isValid) {
              return _Interval.after(start, dur);
            }
          } else if (endIsValid) {
            const dur = Duration.fromISO(s2, opts);
            if (dur.isValid) {
              return _Interval.before(end, dur);
            }
          }
        }
        return _Interval.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
      }
      /**
       * Check if an object is an Interval. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isInterval(o) {
        return o && o.isLuxonInterval || false;
      }
      /**
       * Returns the start of the Interval
       * @type {DateTime}
       */
      get start() {
        return this.isValid ? this.s : null;
      }
      /**
       * Returns the end of the Interval
       * @type {DateTime}
       */
      get end() {
        return this.isValid ? this.e : null;
      }
      /**
       * Returns whether this Interval's end is at least its start, meaning that the Interval isn't 'backwards'.
       * @type {boolean}
       */
      get isValid() {
        return this.invalidReason === null;
      }
      /**
       * Returns an error code if this Interval is invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Interval became invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Returns the length of the Interval in the specified unit.
       * @param {string} unit - the unit (such as 'hours' or 'days') to return the length in.
       * @return {number}
       */
      length(unit = "milliseconds") {
        return this.isValid ? this.toDuration(...[unit]).get(unit) : NaN;
      }
      /**
       * Returns the count of minutes, hours, days, months, or years included in the Interval, even in part.
       * Unlike {@link Interval#length} this counts sections of the calendar, not periods of time, e.g. specifying 'day'
       * asks 'what dates are included in this interval?', not 'how many days long is this interval?'
       * @param {string} [unit='milliseconds'] - the unit of time to count.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; this operation will always use the locale of the start DateTime
       * @return {number}
       */
      count(unit = "milliseconds", opts) {
        if (!this.isValid)
          return NaN;
        const start = this.start.startOf(unit, opts);
        let end;
        if (opts == null ? void 0 : opts.useLocaleWeeks) {
          end = this.end.reconfigure({ locale: start.locale });
        } else {
          end = this.end;
        }
        end = end.startOf(unit, opts);
        return Math.floor(end.diff(start, unit).get(unit)) + (end.valueOf() !== this.end.valueOf());
      }
      /**
       * Returns whether this Interval's start and end are both in the same unit of time
       * @param {string} unit - the unit of time to check sameness on
       * @return {boolean}
       */
      hasSame(unit) {
        return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;
      }
      /**
       * Return whether this Interval has the same start and end DateTimes.
       * @return {boolean}
       */
      isEmpty() {
        return this.s.valueOf() === this.e.valueOf();
      }
      /**
       * Return whether this Interval's start is after the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isAfter(dateTime) {
        if (!this.isValid)
          return false;
        return this.s > dateTime;
      }
      /**
       * Return whether this Interval's end is before the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isBefore(dateTime) {
        if (!this.isValid)
          return false;
        return this.e <= dateTime;
      }
      /**
       * Return whether this Interval contains the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      contains(dateTime) {
        if (!this.isValid)
          return false;
        return this.s <= dateTime && this.e > dateTime;
      }
      /**
       * "Sets" the start and/or end dates. Returns a newly-constructed Interval.
       * @param {Object} values - the values to set
       * @param {DateTime} values.start - the starting DateTime
       * @param {DateTime} values.end - the ending DateTime
       * @return {Interval}
       */
      set({ start, end } = {}) {
        if (!this.isValid)
          return this;
        return _Interval.fromDateTimes(start || this.s, end || this.e);
      }
      /**
       * Split this Interval at each of the specified DateTimes
       * @param {...DateTime} dateTimes - the unit of time to count.
       * @return {Array}
       */
      splitAt(...dateTimes) {
        if (!this.isValid)
          return [];
        const sorted = dateTimes.map(friendlyDateTime).filter((d) => this.contains(d)).sort((a, b) => a.toMillis() - b.toMillis()), results = [];
        let { s: s2 } = this, i = 0;
        while (s2 < this.e) {
          const added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          i += 1;
        }
        return results;
      }
      /**
       * Split this Interval into smaller Intervals, each of the specified length.
       * Left over time is grouped into a smaller interval
       * @param {Duration|Object|number} duration - The length of each resulting interval.
       * @return {Array}
       */
      splitBy(duration) {
        const dur = Duration.fromDurationLike(duration);
        if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
          return [];
        }
        let { s: s2 } = this, idx = 1, next;
        const results = [];
        while (s2 < this.e) {
          const added = this.start.plus(dur.mapUnits((x) => x * idx));
          next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          idx += 1;
        }
        return results;
      }
      /**
       * Split this Interval into the specified number of smaller intervals.
       * @param {number} numberOfParts - The number of Intervals to divide the Interval into.
       * @return {Array}
       */
      divideEqually(numberOfParts) {
        if (!this.isValid)
          return [];
        return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
      }
      /**
       * Return whether this Interval overlaps with the specified Interval
       * @param {Interval} other
       * @return {boolean}
       */
      overlaps(other) {
        return this.e > other.s && this.s < other.e;
      }
      /**
       * Return whether this Interval's end is adjacent to the specified Interval's start.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsStart(other) {
        if (!this.isValid)
          return false;
        return +this.e === +other.s;
      }
      /**
       * Return whether this Interval's start is adjacent to the specified Interval's end.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsEnd(other) {
        if (!this.isValid)
          return false;
        return +other.e === +this.s;
      }
      /**
       * Return whether this Interval engulfs the start and end of the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      engulfs(other) {
        if (!this.isValid)
          return false;
        return this.s <= other.s && this.e >= other.e;
      }
      /**
       * Return whether this Interval has the same start and end as the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        return this.s.equals(other.s) && this.e.equals(other.e);
      }
      /**
       * Return an Interval representing the intersection of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the maximum start time and the minimum end time of the two Intervals.
       * Returns null if the intersection is empty, meaning, the intervals don't intersect.
       * @param {Interval} other
       * @return {Interval}
       */
      intersection(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
        if (s2 >= e) {
          return null;
        } else {
          return _Interval.fromDateTimes(s2, e);
        }
      }
      /**
       * Return an Interval representing the union of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the minimum start time and the maximum end time of the two Intervals.
       * @param {Interval} other
       * @return {Interval}
       */
      union(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
        return _Interval.fromDateTimes(s2, e);
      }
      /**
       * Merge an array of Intervals into a equivalent minimal set of Intervals.
       * Combines overlapping and adjacent Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static merge(intervals) {
        const [found, final] = intervals.sort((a, b) => a.s - b.s).reduce(
          ([sofar, current], item) => {
            if (!current) {
              return [sofar, item];
            } else if (current.overlaps(item) || current.abutsStart(item)) {
              return [sofar, current.union(item)];
            } else {
              return [sofar.concat([current]), item];
            }
          },
          [[], null]
        );
        if (final) {
          found.push(final);
        }
        return found;
      }
      /**
       * Return an array of Intervals representing the spans of time that only appear in one of the specified Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static xor(intervals) {
        let start = null, currentCount = 0;
        const results = [], ends = intervals.map((i) => [
          { time: i.s, type: "s" },
          { time: i.e, type: "e" }
        ]), flattened = Array.prototype.concat(...ends), arr = flattened.sort((a, b) => a.time - b.time);
        for (const i of arr) {
          currentCount += i.type === "s" ? 1 : -1;
          if (currentCount === 1) {
            start = i.time;
          } else {
            if (start && +start !== +i.time) {
              results.push(_Interval.fromDateTimes(start, i.time));
            }
            start = null;
          }
        }
        return _Interval.merge(results);
      }
      /**
       * Return an Interval representing the span of time in this Interval that doesn't overlap with any of the specified Intervals.
       * @param {...Interval} intervals
       * @return {Array}
       */
      difference(...intervals) {
        return _Interval.xor([this].concat(intervals)).map((i) => this.intersection(i)).filter((i) => i && !i.isEmpty());
      }
      /**
       * Returns a string representation of this Interval appropriate for debugging.
       * @return {string}
       */
      toString() {
        if (!this.isValid)
          return INVALID2;
        return `[${this.s.toISO()} \u2013 ${this.e.toISO()})`;
      }
      /**
       * Returns a string representation of this Interval appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`;
        } else {
          return `Interval { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns a localized string representing this Interval. Accepts the same options as the
       * Intl.DateTimeFormat constructor and any presets defined by Luxon, such as
       * {@link DateTime.DATE_FULL} or {@link DateTime.TIME_SIMPLE}. The exact behavior of this method
       * is browser-specific, but in general it will return an appropriate representation of the
       * Interval in the assigned locale. Defaults to the system's locale if no locale has been
       * specified.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {Object} [formatOpts=DateTime.DATE_SHORT] - Either a DateTime preset or
       * Intl.DateTimeFormat constructor options.
       * @param {Object} opts - Options to override the configuration of the start DateTime.
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(); //=> 11/7/2022 – 11/8/2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL); //=> November 7 – 8, 2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL, { locale: 'fr-FR' }); //=> 7–8 novembre 2022
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString(DateTime.TIME_SIMPLE); //=> 6:00 – 8:00 PM
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> Mon, Nov 07, 6:00 – 8:00 p
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.s.loc.clone(opts), formatOpts).formatInterval(this) : INVALID2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Interval.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISO(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of date of this Interval.
       * The time components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {string}
       */
      toISODate() {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISODate()}/${this.e.toISODate()}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of time of this Interval.
       * The date components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISOTime(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;
      }
      /**
       * Returns a string representation of this Interval formatted according to the specified format
       * string. **You may not want this.** See {@link Interval#toLocaleString} for a more flexible
       * formatting tool.
       * @param {string} dateFormat - The format string. This string formats the start and end time.
       * See {@link DateTime#toFormat} for details.
       * @param {Object} opts - Options.
       * @param {string} [opts.separator =  ' – '] - A separator to place between the start and end
       * representations.
       * @return {string}
       */
      toFormat(dateFormat, { separator = " \u2013 " } = {}) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;
      }
      /**
       * Return a Duration representing the time spanned by this interval.
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example Interval.fromDateTimes(dt1, dt2).toDuration().toObject() //=> { milliseconds: 88489257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('days').toObject() //=> { days: 1.0241812152777778 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes']).toObject() //=> { hours: 24, minutes: 34.82095 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes', 'seconds']).toObject() //=> { hours: 24, minutes: 34, seconds: 49.257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('seconds').toObject() //=> { seconds: 88489.257 }
       * @return {Duration}
       */
      toDuration(unit, opts) {
        if (!this.isValid) {
          return Duration.invalid(this.invalidReason);
        }
        return this.e.diff(this.s, unit, opts);
      }
      /**
       * Run mapFn on the interval start and end, returning a new Interval from the resulting DateTimes
       * @param {function} mapFn
       * @return {Interval}
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.toUTC())
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.plus({ hours: 2 }))
       */
      mapEndpoints(mapFn) {
        return _Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));
      }
    };
  }
});

// node_modules/luxon/src/info.js
var Info;
var init_info = __esm({
  "node_modules/luxon/src/info.js"() {
    init_datetime();
    init_settings();
    init_locale();
    init_IANAZone();
    init_zoneUtil();
    init_util();
    Info = class {
      /**
       * Return whether the specified zone contains a DST.
       * @param {string|Zone} [zone='local'] - Zone to check. Defaults to the environment's local zone.
       * @return {boolean}
       */
      static hasDST(zone = Settings.defaultZone) {
        const proto = DateTime.now().setZone(zone).set({ month: 12 });
        return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;
      }
      /**
       * Return whether the specified zone is a valid IANA specifier.
       * @param {string} zone - Zone to check
       * @return {boolean}
       */
      static isValidIANAZone(zone) {
        return IANAZone.isValidZone(zone);
      }
      /**
       * Converts the input into a {@link Zone} instance.
       *
       * * If `input` is already a Zone instance, it is returned unchanged.
       * * If `input` is a string containing a valid time zone name, a Zone instance
       *   with that name is returned.
       * * If `input` is a string that doesn't refer to a known time zone, a Zone
       *   instance with {@link Zone#isValid} == false is returned.
       * * If `input is a number, a Zone instance with the specified fixed offset
       *   in minutes is returned.
       * * If `input` is `null` or `undefined`, the default zone is returned.
       * @param {string|Zone|number} [input] - the value to be converted
       * @return {Zone}
       */
      static normalizeZone(input) {
        return normalizeZone(input, Settings.defaultZone);
      }
      /**
       * Get the weekday on which the week starts according to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number} the start of the week, 1 for Monday through 7 for Sunday
       */
      static getStartOfWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getStartOfWeek();
      }
      /**
       * Get the minimum number of days necessary in a week before it is considered part of the next year according
       * to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number}
       */
      static getMinimumDaysInFirstWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getMinDaysInFirstWeek();
      }
      /**
       * Get the weekdays, which are considered the weekend according to the given locale
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number[]} an array of weekdays, 1 for Monday through 7 for Sunday
       */
      static getWeekendWeekdays({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getWeekendDays().slice();
      }
      /**
       * Return an array of standalone month names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @example Info.months()[0] //=> 'January'
       * @example Info.months('short')[0] //=> 'Jan'
       * @example Info.months('numeric')[0] //=> '1'
       * @example Info.months('short', { locale: 'fr-CA' } )[0] //=> 'janv.'
       * @example Info.months('numeric', { locale: 'ar' })[0] //=> '١'
       * @example Info.months('long', { outputCalendar: 'islamic' })[0] //=> 'Rabiʻ I'
       * @return {Array}
       */
      static months(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);
      }
      /**
       * Return an array of format month names.
       * Format months differ from standalone months in that they're meant to appear next to the day of the month. In some languages, that
       * changes the string.
       * See {@link Info#months}
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @return {Array}
       */
      static monthsFormat(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);
      }
      /**
       * Return an array of standalone week names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the weekday representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @example Info.weekdays()[0] //=> 'Monday'
       * @example Info.weekdays('short')[0] //=> 'Mon'
       * @example Info.weekdays('short', { locale: 'fr-CA' })[0] //=> 'lun.'
       * @example Info.weekdays('short', { locale: 'ar' })[0] //=> 'الاثنين'
       * @return {Array}
       */
      static weekdays(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);
      }
      /**
       * Return an array of format week names.
       * Format weekdays differ from standalone weekdays in that they're meant to appear next to more date information. In some languages, that
       * changes the string.
       * See {@link Info#weekdays}
       * @param {string} [length='long'] - the length of the month representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale=null] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @return {Array}
       */
      static weekdaysFormat(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);
      }
      /**
       * Return an array of meridiems.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.meridiems() //=> [ 'AM', 'PM' ]
       * @example Info.meridiems({ locale: 'my' }) //=> [ 'နံနက်', 'ညနေ' ]
       * @return {Array}
       */
      static meridiems({ locale = null } = {}) {
        return Locale.create(locale).meridiems();
      }
      /**
       * Return an array of eras, such as ['BC', 'AD']. The locale can be specified, but the calendar system is always Gregorian.
       * @param {string} [length='short'] - the length of the era representation, such as "short" or "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.eras() //=> [ 'BC', 'AD' ]
       * @example Info.eras('long') //=> [ 'Before Christ', 'Anno Domini' ]
       * @example Info.eras('long', { locale: 'fr' }) //=> [ 'avant Jésus-Christ', 'après Jésus-Christ' ]
       * @return {Array}
       */
      static eras(length = "short", { locale = null } = {}) {
        return Locale.create(locale, null, "gregory").eras(length);
      }
      /**
       * Return the set of available features in this environment.
       * Some features of Luxon are not available in all environments. For example, on older browsers, relative time formatting support is not available. Use this function to figure out if that's the case.
       * Keys:
       * * `relative`: whether this environment supports relative time formatting
       * * `localeWeek`: whether this environment supports different weekdays for the start of the week based on the locale
       * @example Info.features() //=> { relative: false, localeWeek: true }
       * @return {Object}
       */
      static features() {
        return { relative: hasRelative(), localeWeek: hasLocaleWeekInfo() };
      }
    };
  }
});

// node_modules/luxon/src/impl/diff.js
function dayDiff(earlier, later) {
  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf("day").valueOf(), ms = utcDayStart(later) - utcDayStart(earlier);
  return Math.floor(Duration.fromMillis(ms).as("days"));
}
function highOrderDiffs(cursor, later, units) {
  const differs = [
    ["years", (a, b) => b.year - a.year],
    ["quarters", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],
    ["months", (a, b) => b.month - a.month + (b.year - a.year) * 12],
    [
      "weeks",
      (a, b) => {
        const days = dayDiff(a, b);
        return (days - days % 7) / 7;
      }
    ],
    ["days", dayDiff]
  ];
  const results = {};
  const earlier = cursor;
  let lowestOrder, highWater;
  for (const [unit, differ] of differs) {
    if (units.indexOf(unit) >= 0) {
      lowestOrder = unit;
      results[unit] = differ(cursor, later);
      highWater = earlier.plus(results);
      if (highWater > later) {
        results[unit]--;
        cursor = earlier.plus(results);
        if (cursor > later) {
          highWater = cursor;
          results[unit]--;
          cursor = earlier.plus(results);
        }
      } else {
        cursor = highWater;
      }
    }
  }
  return [cursor, results, highWater, lowestOrder];
}
function diff_default(earlier, later, units, opts) {
  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);
  const remainingMillis = later - cursor;
  const lowerOrderUnits = units.filter(
    (u) => ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0
  );
  if (lowerOrderUnits.length === 0) {
    if (highWater < later) {
      highWater = cursor.plus({ [lowestOrder]: 1 });
    }
    if (highWater !== cursor) {
      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
    }
  }
  const duration = Duration.fromObject(results, opts);
  if (lowerOrderUnits.length > 0) {
    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);
  } else {
    return duration;
  }
}
var init_diff = __esm({
  "node_modules/luxon/src/impl/diff.js"() {
    init_duration();
  }
});

// node_modules/luxon/src/impl/digits.js
function parseDigits(str) {
  let value = parseInt(str, 10);
  if (isNaN(value)) {
    value = "";
    for (let i = 0; i < str.length; i++) {
      const code = str.charCodeAt(i);
      if (str[i].search(numberingSystems.hanidec) !== -1) {
        value += hanidecChars.indexOf(str[i]);
      } else {
        for (const key in numberingSystemsUTF16) {
          const [min, max] = numberingSystemsUTF16[key];
          if (code >= min && code <= max) {
            value += code - min;
          }
        }
      }
    }
    return parseInt(value, 10);
  } else {
    return value;
  }
}
function digitRegex({ numberingSystem }, append = "") {
  return new RegExp(`${numberingSystems[numberingSystem || "latn"]}${append}`);
}
var numberingSystems, numberingSystemsUTF16, hanidecChars;
var init_digits = __esm({
  "node_modules/luxon/src/impl/digits.js"() {
    numberingSystems = {
      arab: "[\u0660-\u0669]",
      arabext: "[\u06F0-\u06F9]",
      bali: "[\u1B50-\u1B59]",
      beng: "[\u09E6-\u09EF]",
      deva: "[\u0966-\u096F]",
      fullwide: "[\uFF10-\uFF19]",
      gujr: "[\u0AE6-\u0AEF]",
      hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
      khmr: "[\u17E0-\u17E9]",
      knda: "[\u0CE6-\u0CEF]",
      laoo: "[\u0ED0-\u0ED9]",
      limb: "[\u1946-\u194F]",
      mlym: "[\u0D66-\u0D6F]",
      mong: "[\u1810-\u1819]",
      mymr: "[\u1040-\u1049]",
      orya: "[\u0B66-\u0B6F]",
      tamldec: "[\u0BE6-\u0BEF]",
      telu: "[\u0C66-\u0C6F]",
      thai: "[\u0E50-\u0E59]",
      tibt: "[\u0F20-\u0F29]",
      latn: "\\d"
    };
    numberingSystemsUTF16 = {
      arab: [1632, 1641],
      arabext: [1776, 1785],
      bali: [6992, 7001],
      beng: [2534, 2543],
      deva: [2406, 2415],
      fullwide: [65296, 65303],
      gujr: [2790, 2799],
      khmr: [6112, 6121],
      knda: [3302, 3311],
      laoo: [3792, 3801],
      limb: [6470, 6479],
      mlym: [3430, 3439],
      mong: [6160, 6169],
      mymr: [4160, 4169],
      orya: [2918, 2927],
      tamldec: [3046, 3055],
      telu: [3174, 3183],
      thai: [3664, 3673],
      tibt: [3872, 3881]
    };
    hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
  }
});

// node_modules/luxon/src/impl/tokenParser.js
function intUnit(regex, post = (i) => i) {
  return { regex, deser: ([s2]) => post(parseDigits(s2)) };
}
function fixListRegex(s2) {
  return s2.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
}
function stripInsensitivities(s2) {
  return s2.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
}
function oneOf(strings, startIndex) {
  if (strings === null) {
    return null;
  } else {
    return {
      regex: RegExp(strings.map(fixListRegex).join("|")),
      deser: ([s2]) => strings.findIndex((i) => stripInsensitivities(s2) === stripInsensitivities(i)) + startIndex
    };
  }
}
function offset(regex, groups) {
  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };
}
function simple(regex) {
  return { regex, deser: ([s2]) => s2 };
}
function escapeToken(value) {
  return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}
function unitForToken(token, loc) {
  const one = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s2]) => s2, literal: true }), unitate = (t) => {
    if (token.literal) {
      return literal(t);
    }
    switch (t.val) {
      case "G":
        return oneOf(loc.eras("short"), 0);
      case "GG":
        return oneOf(loc.eras("long"), 0);
      case "y":
        return intUnit(oneToSix);
      case "yy":
        return intUnit(twoToFour, untruncateYear);
      case "yyyy":
        return intUnit(four);
      case "yyyyy":
        return intUnit(fourToSix);
      case "yyyyyy":
        return intUnit(six);
      case "M":
        return intUnit(oneOrTwo);
      case "MM":
        return intUnit(two);
      case "MMM":
        return oneOf(loc.months("short", true), 1);
      case "MMMM":
        return oneOf(loc.months("long", true), 1);
      case "L":
        return intUnit(oneOrTwo);
      case "LL":
        return intUnit(two);
      case "LLL":
        return oneOf(loc.months("short", false), 1);
      case "LLLL":
        return oneOf(loc.months("long", false), 1);
      case "d":
        return intUnit(oneOrTwo);
      case "dd":
        return intUnit(two);
      case "o":
        return intUnit(oneToThree);
      case "ooo":
        return intUnit(three);
      case "HH":
        return intUnit(two);
      case "H":
        return intUnit(oneOrTwo);
      case "hh":
        return intUnit(two);
      case "h":
        return intUnit(oneOrTwo);
      case "mm":
        return intUnit(two);
      case "m":
        return intUnit(oneOrTwo);
      case "q":
        return intUnit(oneOrTwo);
      case "qq":
        return intUnit(two);
      case "s":
        return intUnit(oneOrTwo);
      case "ss":
        return intUnit(two);
      case "S":
        return intUnit(oneToThree);
      case "SSS":
        return intUnit(three);
      case "u":
        return simple(oneToNine);
      case "uu":
        return simple(oneOrTwo);
      case "uuu":
        return intUnit(one);
      case "a":
        return oneOf(loc.meridiems(), 0);
      case "kkkk":
        return intUnit(four);
      case "kk":
        return intUnit(twoToFour, untruncateYear);
      case "W":
        return intUnit(oneOrTwo);
      case "WW":
        return intUnit(two);
      case "E":
      case "c":
        return intUnit(one);
      case "EEE":
        return oneOf(loc.weekdays("short", false), 1);
      case "EEEE":
        return oneOf(loc.weekdays("long", false), 1);
      case "ccc":
        return oneOf(loc.weekdays("short", true), 1);
      case "cccc":
        return oneOf(loc.weekdays("long", true), 1);
      case "Z":
      case "ZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);
      case "ZZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);
      case "z":
        return simple(/[a-z_+-/]{1,256}?/i);
      case " ":
        return simple(/[^\S\n\r]/);
      default:
        return literal(t);
    }
  };
  const unit = unitate(token) || {
    invalidReason: MISSING_FTP
  };
  unit.token = token;
  return unit;
}
function tokenForPart(part, formatOpts, resolvedOpts) {
  const { type: type2, value } = part;
  if (type2 === "literal") {
    const isSpace = /^\s+$/.test(value);
    return {
      literal: !isSpace,
      val: isSpace ? " " : value
    };
  }
  const style = formatOpts[type2];
  let actualType = type2;
  if (type2 === "hour") {
    if (formatOpts.hour12 != null) {
      actualType = formatOpts.hour12 ? "hour12" : "hour24";
    } else if (formatOpts.hourCycle != null) {
      if (formatOpts.hourCycle === "h11" || formatOpts.hourCycle === "h12") {
        actualType = "hour12";
      } else {
        actualType = "hour24";
      }
    } else {
      actualType = resolvedOpts.hour12 ? "hour12" : "hour24";
    }
  }
  let val = partTypeStyleToTokenVal[actualType];
  if (typeof val === "object") {
    val = val[style];
  }
  if (val) {
    return {
      literal: false,
      val
    };
  }
  return void 0;
}
function buildRegex(units) {
  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, "");
  return [`^${re}$`, units];
}
function match(input, regex, handlers) {
  const matches = input.match(regex);
  if (matches) {
    const all = {};
    let matchIndex = 1;
    for (const i in handlers) {
      if (hasOwnProperty(handlers, i)) {
        const h = handlers[i], groups = h.groups ? h.groups + 1 : 1;
        if (!h.literal && h.token) {
          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));
        }
        matchIndex += groups;
      }
    }
    return [matches, all];
  } else {
    return [matches, {}];
  }
}
function dateTimeFromMatches(matches) {
  const toField = (token) => {
    switch (token) {
      case "S":
        return "millisecond";
      case "s":
        return "second";
      case "m":
        return "minute";
      case "h":
      case "H":
        return "hour";
      case "d":
        return "day";
      case "o":
        return "ordinal";
      case "L":
      case "M":
        return "month";
      case "y":
        return "year";
      case "E":
      case "c":
        return "weekday";
      case "W":
        return "weekNumber";
      case "k":
        return "weekYear";
      case "q":
        return "quarter";
      default:
        return null;
    }
  };
  let zone = null;
  let specificOffset;
  if (!isUndefined(matches.z)) {
    zone = IANAZone.create(matches.z);
  }
  if (!isUndefined(matches.Z)) {
    if (!zone) {
      zone = new FixedOffsetZone(matches.Z);
    }
    specificOffset = matches.Z;
  }
  if (!isUndefined(matches.q)) {
    matches.M = (matches.q - 1) * 3 + 1;
  }
  if (!isUndefined(matches.h)) {
    if (matches.h < 12 && matches.a === 1) {
      matches.h += 12;
    } else if (matches.h === 12 && matches.a === 0) {
      matches.h = 0;
    }
  }
  if (matches.G === 0 && matches.y) {
    matches.y = -matches.y;
  }
  if (!isUndefined(matches.u)) {
    matches.S = parseMillis(matches.u);
  }
  const vals = Object.keys(matches).reduce((r, k) => {
    const f = toField(k);
    if (f) {
      r[f] = matches[k];
    }
    return r;
  }, {});
  return [vals, zone, specificOffset];
}
function getDummyDateTime() {
  if (!dummyDateTimeCache) {
    dummyDateTimeCache = DateTime.fromMillis(1555555555555);
  }
  return dummyDateTimeCache;
}
function maybeExpandMacroToken(token, locale) {
  if (token.literal) {
    return token;
  }
  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);
  const tokens = formatOptsToTokens(formatOpts, locale);
  if (tokens == null || tokens.includes(void 0)) {
    return token;
  }
  return tokens;
}
function expandMacroTokens(tokens, locale) {
  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));
}
function explainFromTokens(locale, input, format) {
  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale), units = tokens.map((t) => unitForToken(t, locale)), disqualifyingUnit = units.find((t) => t.invalidReason);
  if (disqualifyingUnit) {
    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };
  } else {
    const [regexString, handlers] = buildRegex(units), regex = RegExp(regexString, "i"), [rawMatches, matches] = match(input, regex, handlers), [result, zone, specificOffset] = matches ? dateTimeFromMatches(matches) : [null, null, void 0];
    if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
      throw new ConflictingSpecificationError(
        "Can't include meridiem when specifying 24-hour format"
      );
    }
    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };
  }
}
function parseFromTokens(locale, input, format) {
  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);
  return [result, zone, specificOffset, invalidReason];
}
function formatOptsToTokens(formatOpts, locale) {
  if (!formatOpts) {
    return null;
  }
  const formatter = Formatter.create(locale, formatOpts);
  const df = formatter.dtFormatter(getDummyDateTime());
  const parts = df.formatToParts();
  const resolvedOpts = df.resolvedOptions();
  return parts.map((p) => tokenForPart(p, formatOpts, resolvedOpts));
}
var MISSING_FTP, NBSP, spaceOrNBSP, spaceOrNBSPRegExp, partTypeStyleToTokenVal, dummyDateTimeCache;
var init_tokenParser = __esm({
  "node_modules/luxon/src/impl/tokenParser.js"() {
    init_util();
    init_formatter();
    init_fixedOffsetZone();
    init_IANAZone();
    init_datetime();
    init_digits();
    init_errors();
    MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
    NBSP = String.fromCharCode(160);
    spaceOrNBSP = `[ ${NBSP}]`;
    spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
    partTypeStyleToTokenVal = {
      year: {
        "2-digit": "yy",
        numeric: "yyyyy"
      },
      month: {
        numeric: "M",
        "2-digit": "MM",
        short: "MMM",
        long: "MMMM"
      },
      day: {
        numeric: "d",
        "2-digit": "dd"
      },
      weekday: {
        short: "EEE",
        long: "EEEE"
      },
      dayperiod: "a",
      dayPeriod: "a",
      hour12: {
        numeric: "h",
        "2-digit": "hh"
      },
      hour24: {
        numeric: "H",
        "2-digit": "HH"
      },
      minute: {
        numeric: "m",
        "2-digit": "mm"
      },
      second: {
        numeric: "s",
        "2-digit": "ss"
      },
      timeZoneName: {
        long: "ZZZZZ",
        short: "ZZZ"
      }
    };
    dummyDateTimeCache = null;
  }
});

// node_modules/luxon/src/datetime.js
function unsupportedZone(zone) {
  return new Invalid("unsupported zone", `the zone "${zone.name}" is not supported`);
}
function possiblyCachedWeekData(dt) {
  if (dt.weekData === null) {
    dt.weekData = gregorianToWeek(dt.c);
  }
  return dt.weekData;
}
function possiblyCachedLocalWeekData(dt) {
  if (dt.localWeekData === null) {
    dt.localWeekData = gregorianToWeek(
      dt.c,
      dt.loc.getMinDaysInFirstWeek(),
      dt.loc.getStartOfWeek()
    );
  }
  return dt.localWeekData;
}
function clone2(inst, alts) {
  const current = {
    ts: inst.ts,
    zone: inst.zone,
    c: inst.c,
    o: inst.o,
    loc: inst.loc,
    invalid: inst.invalid
  };
  return new DateTime({ ...current, ...alts, old: current });
}
function fixOffset(localTS, o, tz) {
  let utcGuess = localTS - o * 60 * 1e3;
  const o2 = tz.offset(utcGuess);
  if (o === o2) {
    return [utcGuess, o];
  }
  utcGuess -= (o2 - o) * 60 * 1e3;
  const o3 = tz.offset(utcGuess);
  if (o2 === o3) {
    return [utcGuess, o2];
  }
  return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
}
function tsToObj(ts, offset2) {
  ts += offset2 * 60 * 1e3;
  const d = new Date(ts);
  return {
    year: d.getUTCFullYear(),
    month: d.getUTCMonth() + 1,
    day: d.getUTCDate(),
    hour: d.getUTCHours(),
    minute: d.getUTCMinutes(),
    second: d.getUTCSeconds(),
    millisecond: d.getUTCMilliseconds()
  };
}
function objToTS(obj, offset2, zone) {
  return fixOffset(objToLocalTS(obj), offset2, zone);
}
function adjustTime(inst, dur) {
  const oPre = inst.o, year = inst.c.year + Math.trunc(dur.years), month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c = {
    ...inst.c,
    year,
    month,
    day: Math.min(inst.c.day, daysInMonth(year, month)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
  }, millisToAdd = Duration.fromObject({
    years: dur.years - Math.trunc(dur.years),
    quarters: dur.quarters - Math.trunc(dur.quarters),
    months: dur.months - Math.trunc(dur.months),
    weeks: dur.weeks - Math.trunc(dur.weeks),
    days: dur.days - Math.trunc(dur.days),
    hours: dur.hours,
    minutes: dur.minutes,
    seconds: dur.seconds,
    milliseconds: dur.milliseconds
  }).as("milliseconds"), localTS = objToLocalTS(c);
  let [ts, o] = fixOffset(localTS, oPre, inst.zone);
  if (millisToAdd !== 0) {
    ts += millisToAdd;
    o = inst.zone.offset(ts);
  }
  return { ts, o };
}
function parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {
  const { setZone, zone } = opts;
  if (parsed && Object.keys(parsed).length !== 0 || parsedZone) {
    const interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, {
      ...opts,
      zone: interpretationZone,
      specificOffset
    });
    return setZone ? inst : inst.setZone(zone);
  } else {
    return DateTime.invalid(
      new Invalid("unparsable", `the input "${text}" can't be parsed as ${format}`)
    );
  }
}
function toTechFormat(dt, format, allowZ = true) {
  return dt.isValid ? Formatter.create(Locale.create("en-US"), {
    allowZ,
    forceSimple: true
  }).formatDateTimeFromString(dt, format) : null;
}
function toISODate(o, extended) {
  const longFormat = o.c.year > 9999 || o.c.year < 0;
  let c = "";
  if (longFormat && o.c.year >= 0)
    c += "+";
  c += padStart(o.c.year, longFormat ? 6 : 4);
  if (extended) {
    c += "-";
    c += padStart(o.c.month);
    c += "-";
    c += padStart(o.c.day);
  } else {
    c += padStart(o.c.month);
    c += padStart(o.c.day);
  }
  return c;
}
function toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
  let c = padStart(o.c.hour);
  if (extended) {
    c += ":";
    c += padStart(o.c.minute);
    if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
      c += ":";
    }
  } else {
    c += padStart(o.c.minute);
  }
  if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
    c += padStart(o.c.second);
    if (o.c.millisecond !== 0 || !suppressMilliseconds) {
      c += ".";
      c += padStart(o.c.millisecond, 3);
    }
  }
  if (includeOffset) {
    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
      c += "Z";
    } else if (o.o < 0) {
      c += "-";
      c += padStart(Math.trunc(-o.o / 60));
      c += ":";
      c += padStart(Math.trunc(-o.o % 60));
    } else {
      c += "+";
      c += padStart(Math.trunc(o.o / 60));
      c += ":";
      c += padStart(Math.trunc(o.o % 60));
    }
  }
  if (extendedZone) {
    c += "[" + o.zone.ianaName + "]";
  }
  return c;
}
function normalizeUnit(unit) {
  const normalized = {
    year: "year",
    years: "year",
    month: "month",
    months: "month",
    day: "day",
    days: "day",
    hour: "hour",
    hours: "hour",
    minute: "minute",
    minutes: "minute",
    quarter: "quarter",
    quarters: "quarter",
    second: "second",
    seconds: "second",
    millisecond: "millisecond",
    milliseconds: "millisecond",
    weekday: "weekday",
    weekdays: "weekday",
    weeknumber: "weekNumber",
    weeksnumber: "weekNumber",
    weeknumbers: "weekNumber",
    weekyear: "weekYear",
    weekyears: "weekYear",
    ordinal: "ordinal"
  }[unit.toLowerCase()];
  if (!normalized)
    throw new InvalidUnitError(unit);
  return normalized;
}
function normalizeUnitWithLocalWeeks(unit) {
  switch (unit.toLowerCase()) {
    case "localweekday":
    case "localweekdays":
      return "localWeekday";
    case "localweeknumber":
    case "localweeknumbers":
      return "localWeekNumber";
    case "localweekyear":
    case "localweekyears":
      return "localWeekYear";
    default:
      return normalizeUnit(unit);
  }
}
function quickDT(obj, opts) {
  const zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
  let ts, o;
  if (!isUndefined(obj.year)) {
    for (const u of orderedUnits2) {
      if (isUndefined(obj[u])) {
        obj[u] = defaultUnitValues[u];
      }
    }
    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const offsetProvis = zone.offset(tsNow);
    [ts, o] = objToTS(obj, offsetProvis, zone);
  } else {
    ts = tsNow;
  }
  return new DateTime({ ts, zone, loc, o });
}
function diffRelative(start, end, opts) {
  const round = isUndefined(opts.round) ? true : opts.round, format = (c, unit) => {
    c = roundTo(c, round || opts.calendary ? 0 : 2, true);
    const formatter = end.loc.clone(opts).relFormatter(opts);
    return formatter.format(c, unit);
  }, differ = (unit) => {
    if (opts.calendary) {
      if (!end.hasSame(start, unit)) {
        return end.startOf(unit).diff(start.startOf(unit), unit).get(unit);
      } else
        return 0;
    } else {
      return end.diff(start, unit).get(unit);
    }
  };
  if (opts.unit) {
    return format(differ(opts.unit), opts.unit);
  }
  for (const unit of opts.units) {
    const count = differ(unit);
    if (Math.abs(count) >= 1) {
      return format(count, unit);
    }
  }
  return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);
}
function lastOpts(argList) {
  let opts = {}, args;
  if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
    opts = argList[argList.length - 1];
    args = Array.from(argList).slice(0, argList.length - 1);
  } else {
    args = Array.from(argList);
  }
  return [opts, args];
}
function friendlyDateTime(dateTimeish) {
  if (DateTime.isDateTime(dateTimeish)) {
    return dateTimeish;
  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
    return DateTime.fromJSDate(dateTimeish);
  } else if (dateTimeish && typeof dateTimeish === "object") {
    return DateTime.fromObject(dateTimeish);
  } else {
    throw new InvalidArgumentError(
      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`
    );
  }
}
var INVALID3, MAX_DATE, defaultUnitValues, defaultWeekUnitValues, defaultOrdinalUnitValues, orderedUnits2, orderedWeekUnits, orderedOrdinalUnits, DateTime;
var init_datetime = __esm({
  "node_modules/luxon/src/datetime.js"() {
    init_duration();
    init_interval();
    init_settings();
    init_info();
    init_formatter();
    init_fixedOffsetZone();
    init_locale();
    init_util();
    init_zoneUtil();
    init_diff();
    init_regexParser();
    init_tokenParser();
    init_conversions();
    init_formats();
    init_errors();
    init_invalid();
    INVALID3 = "Invalid DateTime";
    MAX_DATE = 864e13;
    defaultUnitValues = {
      month: 1,
      day: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultWeekUnitValues = {
      weekNumber: 1,
      weekday: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultOrdinalUnitValues = {
      ordinal: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    orderedUnits2 = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
    orderedWeekUnits = [
      "weekYear",
      "weekNumber",
      "weekday",
      "hour",
      "minute",
      "second",
      "millisecond"
    ];
    orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
    DateTime = class _DateTime {
      /**
       * @access private
       */
      constructor(config) {
        const zone = config.zone || Settings.defaultZone;
        let invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
        this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
        let c = null, o = null;
        if (!invalid) {
          const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
          if (unchanged) {
            [c, o] = [config.old.c, config.old.o];
          } else {
            const ot = zone.offset(this.ts);
            c = tsToObj(this.ts, ot);
            invalid = Number.isNaN(c.year) ? new Invalid("invalid input") : null;
            c = invalid ? null : c;
            o = invalid ? null : ot;
          }
        }
        this._zone = zone;
        this.loc = config.loc || Locale.create();
        this.invalid = invalid;
        this.weekData = null;
        this.localWeekData = null;
        this.c = c;
        this.o = o;
        this.isLuxonDateTime = true;
      }
      // CONSTRUCT
      /**
       * Create a DateTime for the current instant, in the system's time zone.
       *
       * Use Settings to override these default values if needed.
       * @example DateTime.now().toISO() //~> now in the ISO format
       * @return {DateTime}
       */
      static now() {
        return new _DateTime({});
      }
      /**
       * Create a local DateTime
       * @param {number} [year] - The calendar year. If omitted (as in, call `local()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month, 1-indexed
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @example DateTime.local()                                  //~> now
       * @example DateTime.local({ zone: "America/New_York" })      //~> now, in US east coast time
       * @example DateTime.local(2017)                              //~> 2017-01-01T00:00:00
       * @example DateTime.local(2017, 3)                           //~> 2017-03-01T00:00:00
       * @example DateTime.local(2017, 3, 12, { locale: "fr" })     //~> 2017-03-12T00:00:00, with a French locale
       * @example DateTime.local(2017, 3, 12, 5)                    //~> 2017-03-12T05:00:00
       * @example DateTime.local(2017, 3, 12, 5, { zone: "utc" })   //~> 2017-03-12T05:00:00, in UTC
       * @example DateTime.local(2017, 3, 12, 5, 45)                //~> 2017-03-12T05:45:00
       * @example DateTime.local(2017, 3, 12, 5, 45, 10)            //~> 2017-03-12T05:45:10
       * @example DateTime.local(2017, 3, 12, 5, 45, 10, 765)       //~> 2017-03-12T05:45:10.765
       * @return {DateTime}
       */
      static local() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime in UTC
       * @param {number} [year] - The calendar year. If omitted (as in, call `utc()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @param {Object} options - configuration options for the DateTime
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} [options.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [options.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.utc()                                              //~> now
       * @example DateTime.utc(2017)                                          //~> 2017-01-01T00:00:00Z
       * @example DateTime.utc(2017, 3)                                       //~> 2017-03-01T00:00:00Z
       * @example DateTime.utc(2017, 3, 12)                                   //~> 2017-03-12T00:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5)                                //~> 2017-03-12T05:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45)                            //~> 2017-03-12T05:45:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, { locale: "fr" })          //~> 2017-03-12T05:45:00Z with a French locale
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10)                        //~> 2017-03-12T05:45:10Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10, 765, { locale: "fr" }) //~> 2017-03-12T05:45:10.765Z with a French locale
       * @return {DateTime}
       */
      static utc() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        opts.zone = FixedOffsetZone.utcInstance;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime from a JavaScript Date object. Uses the default zone.
       * @param {Date} date - a JavaScript Date object
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @return {DateTime}
       */
      static fromJSDate(date, options = {}) {
        const ts = isDate(date) ? date.valueOf() : NaN;
        if (Number.isNaN(ts)) {
          return _DateTime.invalid("invalid input");
        }
        const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        return new _DateTime({
          ts,
          zone: zoneToUse,
          loc: Locale.fromObject(options)
        });
      }
      /**
       * Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} milliseconds - a number of milliseconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromMillis(milliseconds, options = {}) {
        if (!isNumber(milliseconds)) {
          throw new InvalidArgumentError(
            `fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`
          );
        } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {
          return _DateTime.invalid("Timestamp out of range");
        } else {
          return new _DateTime({
            ts: milliseconds,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} seconds - a number of seconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromSeconds(seconds, options = {}) {
        if (!isNumber(seconds)) {
          throw new InvalidArgumentError("fromSeconds requires a numerical input");
        } else {
          return new _DateTime({
            ts: seconds * 1e3,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.year - a year, such as 1987
       * @param {number} obj.month - a month, 1-12
       * @param {number} obj.day - a day of the month, 1-31, depending on the month
       * @param {number} obj.ordinal - day of the year, 1-365 or 366
       * @param {number} obj.weekYear - an ISO week year
       * @param {number} obj.weekNumber - an ISO week number, between 1 and 52 or 53, depending on the year
       * @param {number} obj.weekday - an ISO weekday, 1-7, where 1 is Monday and 7 is Sunday
       * @param {number} obj.localWeekYear - a week year, according to the locale
       * @param {number} obj.localWeekNumber - a week number, between 1 and 52 or 53, depending on the year, according to the locale
       * @param {number} obj.localWeekday - a weekday, 1-7, where 1 is the first and 7 is the last day of the week, according to the locale
       * @param {number} obj.hour - hour of the day, 0-23
       * @param {number} obj.minute - minute of the hour, 0-59
       * @param {number} obj.second - second of the minute, 0-59
       * @param {number} obj.millisecond - millisecond of the second, 0-999
       * @param {Object} opts - options for creating this DateTime
       * @param {string|Zone} [opts.zone='local'] - interpret the numbers in the context of a particular zone. Can take any value taken as the first argument to setZone()
       * @param {string} [opts.locale='system\'s locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromObject({ year: 1982, month: 5, day: 25}).toISODate() //=> '1982-05-25'
       * @example DateTime.fromObject({ year: 1982 }).toISODate() //=> '1982-01-01'
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }) //~> today at 10:26:06
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'utc' }),
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'local' })
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'America/New_York' })
       * @example DateTime.fromObject({ weekYear: 2016, weekNumber: 2, weekday: 3 }).toISODate() //=> '2016-01-13'
       * @example DateTime.fromObject({ localWeekYear: 2022, localWeekNumber: 1, localWeekday: 1 }, { locale: "en-US" }).toISODate() //=> '2021-12-26'
       * @return {DateTime}
       */
      static fromObject(obj, opts = {}) {
        obj = obj || {};
        const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        const loc = Locale.fromObject(opts);
        const normalized = normalizeObject(obj, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, loc);
        const tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        const useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
        let units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
        if (useWeekData) {
          units = orderedWeekUnits;
          defaultValues = defaultWeekUnitValues;
          objNow = gregorianToWeek(objNow, minDaysInFirstWeek, startOfWeek);
        } else if (containsOrdinal) {
          units = orderedOrdinalUnits;
          defaultValues = defaultOrdinalUnitValues;
          objNow = gregorianToOrdinal(objNow);
        } else {
          units = orderedUnits2;
          defaultValues = defaultUnitValues;
        }
        let foundFirst = false;
        for (const u of units) {
          const v = normalized[u];
          if (!isUndefined(v)) {
            foundFirst = true;
          } else if (foundFirst) {
            normalized[u] = defaultValues[u];
          } else {
            normalized[u] = objNow[u];
          }
        }
        const higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
        if (invalid) {
          return _DateTime.invalid(invalid);
        }
        const gregorian = useWeekData ? weekToGregorian(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse), inst = new _DateTime({
          ts: tsFinal,
          zone: zoneToUse,
          o: offsetFinal,
          loc
        });
        if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
          return _DateTime.invalid(
            "mismatched weekday",
            `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`
          );
        }
        return inst;
      }
      /**
       * Create a DateTime from an ISO 8601 string
       * @param {string} text - the ISO string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the time to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} [opts.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [opts.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromISO('2016-05-25T09:08:34.123')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00', {setZone: true})
       * @example DateTime.fromISO('2016-05-25T09:08:34.123', {zone: 'utc'})
       * @example DateTime.fromISO('2016-W05-4')
       * @return {DateTime}
       */
      static fromISO(text, opts = {}) {
        const [vals, parsedZone] = parseISODate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
      }
      /**
       * Create a DateTime from an RFC 2822 string
       * @param {string} text - the RFC 2822 string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since the offset is always specified in the string itself, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23:12 GMT')
       * @example DateTime.fromRFC2822('Fri, 25 Nov 2016 13:23:12 +0600')
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23 Z')
       * @return {DateTime}
       */
      static fromRFC2822(text, opts = {}) {
        const [vals, parsedZone] = parseRFC2822Date(text);
        return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
      }
      /**
       * Create a DateTime from an HTTP header date
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @param {string} text - the HTTP header date
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since HTTP dates are always in UTC, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with the fixed-offset zone specified in the string. For HTTP dates, this is always UTC, so this option is equivalent to setting the `zone` option to 'utc', but this option is included for consistency with similar methods.
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromHTTP('Sun, 06 Nov 1994 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sunday, 06-Nov-94 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sun Nov  6 08:49:37 1994')
       * @return {DateTime}
       */
      static fromHTTP(text, opts = {}) {
        const [vals, parsedZone] = parseHTTPDate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
      }
      /**
       * Create a DateTime from an input string and format string.
       * Defaults to en-US if no locale has been specified, regardless of the system's locale. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/parsing?id=table-of-tokens).
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see the link below for the formats)
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromFormat(text, fmt, opts = {}) {
        if (isUndefined(text) || isUndefined(fmt)) {
          throw new InvalidArgumentError("fromFormat requires an input string and a format");
        }
        const { locale = null, numberingSystem = null } = opts, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        }), [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);
        if (invalid) {
          return _DateTime.invalid(invalid);
        } else {
          return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);
        }
      }
      /**
       * @deprecated use fromFormat instead
       */
      static fromString(text, fmt, opts = {}) {
        return _DateTime.fromFormat(text, fmt, opts);
      }
      /**
       * Create a DateTime from a SQL date, time, or datetime
       * Defaults to en-US if no locale has been specified, regardless of the system's locale
       * @param {string} text - the string to parse
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @example DateTime.fromSQL('2017-05-15')
       * @example DateTime.fromSQL('2017-05-15 09:12:34')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342+06:00')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles', { setZone: true })
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342', { zone: 'America/Los_Angeles' })
       * @example DateTime.fromSQL('09:12:34.342')
       * @return {DateTime}
       */
      static fromSQL(text, opts = {}) {
        const [vals, parsedZone] = parseSQL(text);
        return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
      }
      /**
       * Create an invalid DateTime.
       * @param {string} reason - simple string of why this DateTime is invalid. Should not contain parameters or anything else data-dependent.
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {DateTime}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDateTimeError(invalid);
        } else {
          return new _DateTime({ invalid });
        }
      }
      /**
       * Check if an object is an instance of DateTime. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDateTime(o) {
        return o && o.isLuxonDateTime || false;
      }
      /**
       * Produce the format string for a set of options
       * @param formatOpts
       * @param localeOpts
       * @returns {string}
       */
      static parseFormatForOpts(formatOpts, localeOpts = {}) {
        const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));
        return !tokenList ? null : tokenList.map((t) => t ? t.val : null).join("");
      }
      /**
       * Produce the the fully expanded format token for the locale
       * Does NOT quote characters, so quoted tokens will not round trip correctly
       * @param fmt
       * @param localeOpts
       * @returns {string}
       */
      static expandFormat(fmt, localeOpts = {}) {
        const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));
        return expanded.map((t) => t.val).join("");
      }
      // INFO
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example DateTime.local(2017, 7, 4).get('month'); //=> 7
       * @example DateTime.local(2017, 7, 4).get('day'); //=> 4
       * @return {number}
       */
      get(unit) {
        return this[unit];
      }
      /**
       * Returns whether the DateTime is valid. Invalid DateTimes occur when:
       * * The DateTime was created from invalid calendar information, such as the 13th month or February 30
       * * The DateTime was created by an operation on another invalid date
       * @type {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this DateTime is invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime
       *
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime
       *
       * @type {string}
       */
      get outputCalendar() {
        return this.isValid ? this.loc.outputCalendar : null;
      }
      /**
       * Get the time zone associated with this DateTime.
       * @type {Zone}
       */
      get zone() {
        return this._zone;
      }
      /**
       * Get the name of the time zone.
       * @type {string}
       */
      get zoneName() {
        return this.isValid ? this.zone.name : null;
      }
      /**
       * Get the year
       * @example DateTime.local(2017, 5, 25).year //=> 2017
       * @type {number}
       */
      get year() {
        return this.isValid ? this.c.year : NaN;
      }
      /**
       * Get the quarter
       * @example DateTime.local(2017, 5, 25).quarter //=> 2
       * @type {number}
       */
      get quarter() {
        return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
      }
      /**
       * Get the month (1-12).
       * @example DateTime.local(2017, 5, 25).month //=> 5
       * @type {number}
       */
      get month() {
        return this.isValid ? this.c.month : NaN;
      }
      /**
       * Get the day of the month (1-30ish).
       * @example DateTime.local(2017, 5, 25).day //=> 25
       * @type {number}
       */
      get day() {
        return this.isValid ? this.c.day : NaN;
      }
      /**
       * Get the hour of the day (0-23).
       * @example DateTime.local(2017, 5, 25, 9).hour //=> 9
       * @type {number}
       */
      get hour() {
        return this.isValid ? this.c.hour : NaN;
      }
      /**
       * Get the minute of the hour (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30).minute //=> 30
       * @type {number}
       */
      get minute() {
        return this.isValid ? this.c.minute : NaN;
      }
      /**
       * Get the second of the minute (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52).second //=> 52
       * @type {number}
       */
      get second() {
        return this.isValid ? this.c.second : NaN;
      }
      /**
       * Get the millisecond of the second (0-999).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52, 654).millisecond //=> 654
       * @type {number}
       */
      get millisecond() {
        return this.isValid ? this.c.millisecond : NaN;
      }
      /**
       * Get the week year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 12, 31).weekYear //=> 2015
       * @type {number}
       */
      get weekYear() {
        return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
      }
      /**
       * Get the week number of the week year (1-52ish).
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2017, 5, 25).weekNumber //=> 21
       * @type {number}
       */
      get weekNumber() {
        return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the day of the week.
       * 1 is Monday and 7 is Sunday
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 11, 31).weekday //=> 4
       * @type {number}
       */
      get weekday() {
        return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
      }
      /**
       * Returns true if this date is on a weekend according to the locale, false otherwise
       * @returns {boolean}
       */
      get isWeekend() {
        return this.isValid && this.loc.getWeekendDays().includes(this.weekday);
      }
      /**
       * Get the day of the week according to the locale.
       * 1 is the first day of the week and 7 is the last day of the week.
       * If the locale assigns Sunday as the first day of the week, then a date which is a Sunday will return 1,
       * @returns {number}
       */
      get localWeekday() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekday : NaN;
      }
      /**
       * Get the week number of the week year according to the locale. Different locales assign week numbers differently,
       * because the week can start on different days of the week (see localWeekday) and because a different number of days
       * is required for a week to count as the first week of a year.
       * @returns {number}
       */
      get localWeekNumber() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the week year according to the locale. Different locales assign week numbers (and therefor week years)
       * differently, see localWeekNumber.
       * @returns {number}
       */
      get localWeekYear() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekYear : NaN;
      }
      /**
       * Get the ordinal (meaning the day of the year)
       * @example DateTime.local(2017, 5, 25).ordinal //=> 145
       * @type {number|DateTime}
       */
      get ordinal() {
        return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
      }
      /**
       * Get the human readable short month name, such as 'Oct'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthShort //=> Oct
       * @type {string}
       */
      get monthShort() {
        return this.isValid ? Info.months("short", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable long month name, such as 'October'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthLong //=> October
       * @type {string}
       */
      get monthLong() {
        return this.isValid ? Info.months("long", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable short weekday, such as 'Mon'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayShort //=> Mon
       * @type {string}
       */
      get weekdayShort() {
        return this.isValid ? Info.weekdays("short", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the human readable long weekday, such as 'Monday'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayLong //=> Monday
       * @type {string}
       */
      get weekdayLong() {
        return this.isValid ? Info.weekdays("long", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the UTC offset of this DateTime in minutes
       * @example DateTime.now().offset //=> -240
       * @example DateTime.utc().offset //=> 0
       * @type {number}
       */
      get offset() {
        return this.isValid ? +this.o : NaN;
      }
      /**
       * Get the short human name for the zone's current offset, for example "EST" or "EDT".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameShort() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "short",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get the long human name for the zone's current offset, for example "Eastern Standard Time" or "Eastern Daylight Time".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameLong() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "long",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get whether this zone's offset ever changes, as in a DST.
       * @type {boolean}
       */
      get isOffsetFixed() {
        return this.isValid ? this.zone.isUniversal : null;
      }
      /**
       * Get whether the DateTime is in a DST.
       * @type {boolean}
       */
      get isInDST() {
        if (this.isOffsetFixed) {
          return false;
        } else {
          return this.offset > this.set({ month: 1, day: 1 }).offset || this.offset > this.set({ month: 5 }).offset;
        }
      }
      /**
       * Get those DateTimes which have the same local time as this DateTime, but a different offset from UTC
       * in this DateTime's zone. During DST changes local time can be ambiguous, for example
       * `2023-10-29T02:30:00` in `Europe/Berlin` can have offset `+01:00` or `+02:00`.
       * This method will return both possible DateTimes if this DateTime's local time is ambiguous.
       * @returns {DateTime[]}
       */
      getPossibleOffsets() {
        if (!this.isValid || this.isOffsetFixed) {
          return [this];
        }
        const dayMs = 864e5;
        const minuteMs = 6e4;
        const localTS = objToLocalTS(this.c);
        const oEarlier = this.zone.offset(localTS - dayMs);
        const oLater = this.zone.offset(localTS + dayMs);
        const o1 = this.zone.offset(localTS - oEarlier * minuteMs);
        const o2 = this.zone.offset(localTS - oLater * minuteMs);
        if (o1 === o2) {
          return [this];
        }
        const ts1 = localTS - o1 * minuteMs;
        const ts2 = localTS - o2 * minuteMs;
        const c1 = tsToObj(ts1, o1);
        const c2 = tsToObj(ts2, o2);
        if (c1.hour === c2.hour && c1.minute === c2.minute && c1.second === c2.second && c1.millisecond === c2.millisecond) {
          return [clone2(this, { ts: ts1 }), clone2(this, { ts: ts2 })];
        }
        return [this];
      }
      /**
       * Returns true if this DateTime is in a leap year, false otherwise
       * @example DateTime.local(2016).isInLeapYear //=> true
       * @example DateTime.local(2013).isInLeapYear //=> false
       * @type {boolean}
       */
      get isInLeapYear() {
        return isLeapYear(this.year);
      }
      /**
       * Returns the number of days in this DateTime's month
       * @example DateTime.local(2016, 2).daysInMonth //=> 29
       * @example DateTime.local(2016, 3).daysInMonth //=> 31
       * @type {number}
       */
      get daysInMonth() {
        return daysInMonth(this.year, this.month);
      }
      /**
       * Returns the number of days in this DateTime's year
       * @example DateTime.local(2016).daysInYear //=> 366
       * @example DateTime.local(2013).daysInYear //=> 365
       * @type {number}
       */
      get daysInYear() {
        return this.isValid ? daysInYear(this.year) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2004).weeksInWeekYear //=> 53
       * @example DateTime.local(2013).weeksInWeekYear //=> 52
       * @type {number}
       */
      get weeksInWeekYear() {
        return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's local week year
       * @example DateTime.local(2020, 6, {locale: 'en-US'}).weeksInLocalWeekYear //=> 52
       * @example DateTime.local(2020, 6, {locale: 'de-DE'}).weeksInLocalWeekYear //=> 53
       * @type {number}
       */
      get weeksInLocalWeekYear() {
        return this.isValid ? weeksInWeekYear(
          this.localWeekYear,
          this.loc.getMinDaysInFirstWeek(),
          this.loc.getStartOfWeek()
        ) : NaN;
      }
      /**
       * Returns the resolved Intl options for this DateTime.
       * This is useful in understanding the behavior of formatting methods
       * @param {Object} opts - the same options as toLocaleString
       * @return {Object}
       */
      resolvedLocaleOptions(opts = {}) {
        const { locale, numberingSystem, calendar } = Formatter.create(
          this.loc.clone(opts),
          opts
        ).resolvedOptions(this);
        return { locale, numberingSystem, outputCalendar: calendar };
      }
      // TRANSFORM
      /**
       * "Set" the DateTime's zone to UTC. Returns a newly-constructed DateTime.
       *
       * Equivalent to {@link DateTime#setZone}('utc')
       * @param {number} [offset=0] - optionally, an offset from UTC in minutes
       * @param {Object} [opts={}] - options to pass to `setZone()`
       * @return {DateTime}
       */
      toUTC(offset2 = 0, opts = {}) {
        return this.setZone(FixedOffsetZone.instance(offset2), opts);
      }
      /**
       * "Set" the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.
       *
       * Equivalent to `setZone('local')`
       * @return {DateTime}
       */
      toLocal() {
        return this.setZone(Settings.defaultZone);
      }
      /**
       * "Set" the DateTime's zone to specified zone. Returns a newly-constructed DateTime.
       *
       * By default, the setter keeps the underlying time the same (as in, the same timestamp), but the new instance will report different local times and consider DSTs when making computations, as with {@link DateTime#plus}. You may wish to use {@link DateTime#toLocal} and {@link DateTime#toUTC} which provide simple convenience wrappers for commonly used zones.
       * @param {string|Zone} [zone='local'] - a zone identifier. As a string, that can be any IANA zone supported by the host environment, or a fixed-offset name of the form 'UTC+3', or the strings 'local' or 'utc'. You may also supply an instance of a {@link DateTime#Zone} class.
       * @param {Object} opts - options
       * @param {boolean} [opts.keepLocalTime=false] - If true, adjust the underlying time so that the local time stays the same, but in the target zone. You should rarely need this.
       * @return {DateTime}
       */
      setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {
        zone = normalizeZone(zone, Settings.defaultZone);
        if (zone.equals(this.zone)) {
          return this;
        } else if (!zone.isValid) {
          return _DateTime.invalid(unsupportedZone(zone));
        } else {
          let newTS = this.ts;
          if (keepLocalTime || keepCalendarTime) {
            const offsetGuess = zone.offset(this.ts);
            const asObj = this.toObject();
            [newTS] = objToTS(asObj, offsetGuess, zone);
          }
          return clone2(this, { ts: newTS, zone });
        }
      }
      /**
       * "Set" the locale, numberingSystem, or outputCalendar. Returns a newly-constructed DateTime.
       * @param {Object} properties - the properties to set
       * @example DateTime.local(2017, 5, 25).reconfigure({ locale: 'en-GB' })
       * @return {DateTime}
       */
      reconfigure({ locale, numberingSystem, outputCalendar } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem, outputCalendar });
        return clone2(this, { loc });
      }
      /**
       * "Set" the locale. Returns a newly-constructed DateTime.
       * Just a convenient alias for reconfigure({ locale })
       * @example DateTime.local(2017, 5, 25).setLocale('en-GB')
       * @return {DateTime}
       */
      setLocale(locale) {
        return this.reconfigure({ locale });
      }
      /**
       * "Set" the values of specified units. Returns a newly-constructed DateTime.
       * You can only set units with this method; for "setting" metadata, see {@link DateTime#reconfigure} and {@link DateTime#setZone}.
       *
       * This method also supports setting locale-based week units, i.e. `localWeekday`, `localWeekNumber` and `localWeekYear`.
       * They cannot be mixed with ISO-week units like `weekday`.
       * @param {Object} values - a mapping of units to numbers
       * @example dt.set({ year: 2017 })
       * @example dt.set({ hour: 8, minute: 30 })
       * @example dt.set({ weekday: 5 })
       * @example dt.set({ year: 2005, ordinal: 234 })
       * @return {DateTime}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const normalized = normalizeObject(values, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, this.loc);
        const settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        let mixed;
        if (settingWeekStuff) {
          mixed = weekToGregorian(
            { ...gregorianToWeek(this.c, minDaysInFirstWeek, startOfWeek), ...normalized },
            minDaysInFirstWeek,
            startOfWeek
          );
        } else if (!isUndefined(normalized.ordinal)) {
          mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });
        } else {
          mixed = { ...this.toObject(), ...normalized };
          if (isUndefined(normalized.day)) {
            mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
          }
        }
        const [ts, o] = objToTS(mixed, this.o, this.zone);
        return clone2(this, { ts, o });
      }
      /**
       * Add a period of time to this DateTime and return the resulting DateTime
       *
       * Adding hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds. Adding days, months, or years shifts the calendar, accounting for DSTs and leap years along the way. Thus, `dt.plus({ hours: 24 })` may result in a different time than `dt.plus({ days: 1 })` if there's a DST shift in between.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @example DateTime.now().plus(123) //~> in 123 milliseconds
       * @example DateTime.now().plus({ minutes: 15 }) //~> in 15 minutes
       * @example DateTime.now().plus({ days: 1 }) //~> this time tomorrow
       * @example DateTime.now().plus({ days: -1 }) //~> this time yesterday
       * @example DateTime.now().plus({ hours: 3, minutes: 13 }) //~> in 3 hr, 13 min
       * @example DateTime.now().plus(Duration.fromObject({ hours: 3, minutes: 13 })) //~> in 3 hr, 13 min
       * @return {DateTime}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration);
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * Subtract a period of time to this DateTime and return the resulting DateTime
       * See {@link DateTime#plus}
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       @return {DateTime}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration).negate();
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * "Set" this DateTime to the beginning of a unit of time.
       * @param {string} unit - The unit to go to the beginning of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).startOf('month').toISODate(); //=> '2014-03-01'
       * @example DateTime.local(2014, 3, 3).startOf('year').toISODate(); //=> '2014-01-01'
       * @example DateTime.local(2014, 3, 3).startOf('week').toISODate(); //=> '2014-03-03', weeks always start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('day').toISOTime(); //=> '00:00.000-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('hour').toISOTime(); //=> '05:00:00.000-05:00'
       * @return {DateTime}
       */
      startOf(unit, { useLocaleWeeks = false } = {}) {
        if (!this.isValid)
          return this;
        const o = {}, normalizedUnit = Duration.normalizeUnit(unit);
        switch (normalizedUnit) {
          case "years":
            o.month = 1;
          case "quarters":
          case "months":
            o.day = 1;
          case "weeks":
          case "days":
            o.hour = 0;
          case "hours":
            o.minute = 0;
          case "minutes":
            o.second = 0;
          case "seconds":
            o.millisecond = 0;
            break;
          case "milliseconds":
            break;
        }
        if (normalizedUnit === "weeks") {
          if (useLocaleWeeks) {
            const startOfWeek = this.loc.getStartOfWeek();
            const { weekday } = this;
            if (weekday < startOfWeek) {
              o.weekNumber = this.weekNumber - 1;
            }
            o.weekday = startOfWeek;
          } else {
            o.weekday = 1;
          }
        }
        if (normalizedUnit === "quarters") {
          const q = Math.ceil(this.month / 3);
          o.month = (q - 1) * 3 + 1;
        }
        return this.set(o);
      }
      /**
       * "Set" this DateTime to the end (meaning the last millisecond) of a unit of time
       * @param {string} unit - The unit to go to the end of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).endOf('month').toISO(); //=> '2014-03-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('year').toISO(); //=> '2014-12-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('week').toISO(); // => '2014-03-09T23:59:59.999-05:00', weeks start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('day').toISO(); //=> '2014-03-03T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('hour').toISO(); //=> '2014-03-03T05:59:59.999-05:00'
       * @return {DateTime}
       */
      endOf(unit, opts) {
        return this.isValid ? this.plus({ [unit]: 1 }).startOf(unit, opts).minus(1) : this;
      }
      // OUTPUT
      /**
       * Returns a string representation of this DateTime formatted according to the specified format string.
       * **You may not want this.** See {@link DateTime#toLocaleString} for a more flexible formatting tool. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/formatting?id=table-of-tokens).
       * Defaults to en-US if no locale has been specified, regardless of the system's locale.
       * @param {string} fmt - the format string
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toFormat('yyyy LLL dd') //=> '2017 Apr 22'
       * @example DateTime.now().setLocale('fr').toFormat('yyyy LLL dd') //=> '2017 avr. 22'
       * @example DateTime.now().toFormat('yyyy LLL dd', { locale: "fr" }) //=> '2017 avr. 22'
       * @example DateTime.now().toFormat("HH 'hours and' mm 'minutes'") //=> '20 hours and 55 minutes'
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID3;
      }
      /**
       * Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon, such as `DateTime.DATE_FULL` or `DateTime.TIME_SIMPLE`.
       * The exact behavior of this method is browser-specific, but in general it will return an appropriate representation
       * of the DateTime in the assigned locale.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param formatOpts {Object} - Intl.DateTimeFormat constructor options and configuration options
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toLocaleString(); //=> 4/20/2017
       * @example DateTime.now().setLocale('en-gb').toLocaleString(); //=> '20/04/2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL); //=> 'April 20, 2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL, { locale: 'fr' }); //=> '28 août 2022'
       * @example DateTime.now().toLocaleString(DateTime.TIME_SIMPLE); //=> '11:32 AM'
       * @example DateTime.now().toLocaleString(DateTime.DATETIME_SHORT); //=> '4/20/2017, 11:32 AM'
       * @example DateTime.now().toLocaleString({ weekday: 'long', month: 'long', day: '2-digit' }); //=> 'Thursday, April 20'
       * @example DateTime.now().toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> 'Thu, Apr 20, 11:27 AM'
       * @example DateTime.now().toLocaleString({ hour: '2-digit', minute: '2-digit', hourCycle: 'h23' }); //=> '11:32'
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID3;
      }
      /**
       * Returns an array of format "parts", meaning individual tokens along with metadata. This is allows callers to post-process individual sections of the formatted output.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts
       * @param opts {Object} - Intl.DateTimeFormat constructor options, same as `toLocaleString`.
       * @example DateTime.now().toLocaleParts(); //=> [
       *                                   //=>   { type: 'day', value: '25' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'month', value: '05' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'year', value: '1982' }
       *                                   //=> ]
       */
      toLocaleParts(opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=false] - add the time zone format extension
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1983, 5, 25).toISO() //=> '1982-05-25T00:00:00.000Z'
       * @example DateTime.now().toISO() //=> '2017-04-22T20:47:05.335-04:00'
       * @example DateTime.now().toISO({ includeOffset: false }) //=> '2017-04-22T20:47:05.335'
       * @example DateTime.now().toISO({ format: 'basic' }) //=> '20170422T204705.335-0400'
       * @return {string}
       */
      toISO({
        format = "extended",
        suppressSeconds = false,
        suppressMilliseconds = false,
        includeOffset = true,
        extendedZone = false
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        const ext = format === "extended";
        let c = toISODate(this, ext);
        c += "T";
        c += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
        return c;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's date component
       * @param {Object} opts - options
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1982, 5, 25).toISODate() //=> '1982-05-25'
       * @example DateTime.utc(1982, 5, 25).toISODate({ format: 'basic' }) //=> '19820525'
       * @return {string}
       */
      toISODate({ format = "extended" } = {}) {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, format === "extended");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's week date
       * @example DateTime.utc(1982, 5, 25).toISOWeekDate() //=> '1982-W21-2'
       * @return {string}
       */
      toISOWeekDate() {
        return toTechFormat(this, "kkkk-'W'WW-c");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's time component
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=true] - add the time zone format extension
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime() //=> '07:34:19.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34, seconds: 0, milliseconds: 0 }).toISOTime({ suppressSeconds: true }) //=> '07:34Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ format: 'basic' }) //=> '073419.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ includePrefix: true }) //=> 'T07:34:19.361Z'
       * @return {string}
       */
      toISOTime({
        suppressMilliseconds = false,
        suppressSeconds = false,
        includeOffset = true,
        includePrefix = false,
        extendedZone = false,
        format = "extended"
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        let c = includePrefix ? "T" : "";
        return c + toISOTime(
          this,
          format === "extended",
          suppressSeconds,
          suppressMilliseconds,
          includeOffset,
          extendedZone
        );
      }
      /**
       * Returns an RFC 2822-compatible string representation of this DateTime
       * @example DateTime.utc(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 +0000'
       * @example DateTime.local(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 -0400'
       * @return {string}
       */
      toRFC2822() {
        return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in HTTP headers. The output is always expressed in GMT.
       * Specifically, the string conforms to RFC 1123.
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @example DateTime.utc(2014, 7, 13).toHTTP() //=> 'Sun, 13 Jul 2014 00:00:00 GMT'
       * @example DateTime.utc(2014, 7, 13, 19).toHTTP() //=> 'Sun, 13 Jul 2014 19:00:00 GMT'
       * @return {string}
       */
      toHTTP() {
        return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Date
       * @example DateTime.utc(2014, 7, 13).toSQLDate() //=> '2014-07-13'
       * @return {string}
       */
      toSQLDate() {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Time
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc().toSQL() //=> '05:15:16.345'
       * @example DateTime.now().toSQL() //=> '05:15:16.345 -04:00'
       * @example DateTime.now().toSQL({ includeOffset: false }) //=> '05:15:16.345'
       * @example DateTime.now().toSQL({ includeZone: false }) //=> '05:15:16.345 America/New_York'
       * @return {string}
       */
      toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {
        let fmt = "HH:mm:ss.SSS";
        if (includeZone || includeOffset) {
          if (includeOffsetSpace) {
            fmt += " ";
          }
          if (includeZone) {
            fmt += "z";
          } else if (includeOffset) {
            fmt += "ZZ";
          }
        }
        return toTechFormat(this, fmt, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 Z'
       * @example DateTime.local(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 -04:00'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeOffset: false }) //=> '2014-07-13 00:00:00.000'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeZone: true }) //=> '2014-07-13 00:00:00.000 America/New_York'
       * @return {string}
       */
      toSQL(opts = {}) {
        if (!this.isValid) {
          return null;
        }
        return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;
      }
      /**
       * Returns a string representation of this DateTime appropriate for debugging
       * @return {string}
       */
      toString() {
        return this.isValid ? this.toISO() : INVALID3;
      }
      /**
       * Returns a string representation of this DateTime appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`;
        } else {
          return `DateTime { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns the epoch milliseconds of this DateTime. Alias of {@link DateTime#toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Returns the epoch milliseconds of this DateTime.
       * @return {number}
       */
      toMillis() {
        return this.isValid ? this.ts : NaN;
      }
      /**
       * Returns the epoch seconds of this DateTime.
       * @return {number}
       */
      toSeconds() {
        return this.isValid ? this.ts / 1e3 : NaN;
      }
      /**
       * Returns the epoch seconds (as a whole number) of this DateTime.
       * @return {number}
       */
      toUnixInteger() {
        return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
      }
      /**
       * Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns a BSON serializable equivalent to this DateTime.
       * @return {Date}
       */
      toBSON() {
        return this.toJSDate();
      }
      /**
       * Returns a JavaScript object with this DateTime's year, month, day, and so on.
       * @param opts - options for generating the object
       * @param {boolean} [opts.includeConfig=false] - include configuration attributes in the output
       * @example DateTime.now().toObject() //=> { year: 2017, month: 4, day: 22, hour: 20, minute: 49, second: 42, millisecond: 268 }
       * @return {Object}
       */
      toObject(opts = {}) {
        if (!this.isValid)
          return {};
        const base = { ...this.c };
        if (opts.includeConfig) {
          base.outputCalendar = this.outputCalendar;
          base.numberingSystem = this.loc.numberingSystem;
          base.locale = this.loc.locale;
        }
        return base;
      }
      /**
       * Returns a JavaScript Date equivalent to this DateTime.
       * @return {Date}
       */
      toJSDate() {
        return new Date(this.isValid ? this.ts : NaN);
      }
      // COMPARE
      /**
       * Return the difference between two DateTimes as a Duration.
       * @param {DateTime} otherDateTime - the DateTime to compare this one to
       * @param {string|string[]} [unit=['milliseconds']] - the unit or array of units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example
       * var i1 = DateTime.fromISO('1982-05-25T09:45'),
       *     i2 = DateTime.fromISO('1983-10-14T10:30');
       * i2.diff(i1).toObject() //=> { milliseconds: 43807500000 }
       * i2.diff(i1, 'hours').toObject() //=> { hours: 12168.75 }
       * i2.diff(i1, ['months', 'days']).toObject() //=> { months: 16, days: 19.03125 }
       * i2.diff(i1, ['months', 'days', 'hours']).toObject() //=> { months: 16, days: 19, hours: 0.75 }
       * @return {Duration}
       */
      diff(otherDateTime, unit = "milliseconds", opts = {}) {
        if (!this.isValid || !otherDateTime.isValid) {
          return Duration.invalid("created by diffing an invalid DateTime");
        }
        const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };
        const units = maybeArray(unit).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = diff_default(earlier, later, units, durOpts);
        return otherIsLater ? diffed.negate() : diffed;
      }
      /**
       * Return the difference between this DateTime and right now.
       * See {@link DateTime#diff}
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units units (such as 'hours' or 'days') to include in the duration
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      diffNow(unit = "milliseconds", opts = {}) {
        return this.diff(_DateTime.now(), unit, opts);
      }
      /**
       * Return an Interval spanning between this DateTime and another DateTime
       * @param {DateTime} otherDateTime - the other end point of the Interval
       * @return {Interval}
       */
      until(otherDateTime) {
        return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
      }
      /**
       * Return whether this DateTime is in the same unit of time as another DateTime.
       * Higher-order units must also be identical for this function to return `true`.
       * Note that time zones are **ignored** in this comparison, which compares the **local** calendar time. Use {@link DateTime#setZone} to convert one of the dates if needed.
       * @param {DateTime} otherDateTime - the other DateTime
       * @param {string} unit - the unit of time to check sameness on
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; only the locale of this DateTime is used
       * @example DateTime.now().hasSame(otherDT, 'day'); //~> true if otherDT is in the same current calendar day
       * @return {boolean}
       */
      hasSame(otherDateTime, unit, opts) {
        if (!this.isValid)
          return false;
        const inputMs = otherDateTime.valueOf();
        const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });
        return adjustedToZone.startOf(unit, opts) <= inputMs && inputMs <= adjustedToZone.endOf(unit, opts);
      }
      /**
       * Equality check
       * Two DateTimes are equal if and only if they represent the same millisecond, have the same zone and location, and are both valid.
       * To compare just the millisecond values, use `+dt1 === +dt2`.
       * @param {DateTime} other - the other DateTime
       * @return {boolean}
       */
      equals(other) {
        return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
      }
      /**
       * Returns a string representation of a this time relative to now, such as "in two days". Can only internationalize if your
       * platform supports Intl.RelativeTimeFormat. Rounds down by default.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} [options.style="long"] - the style of units, must be "long", "short", or "narrow"
       * @param {string|string[]} options.unit - use a specific unit or array of units; if omitted, or an array, the method will pick the best unit. Use an array or one of "years", "quarters", "months", "weeks", "days", "hours", "minutes", or "seconds"
       * @param {boolean} [options.round=true] - whether to round the numbers in the output.
       * @param {number} [options.padding=0] - padding in milliseconds. This allows you to round up the result if it fits inside the threshold. Don't use in combination with {round: false} because the decimal output will include the padding.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelative() //=> "in 1 day"
       * @example DateTime.now().setLocale("es").toRelative({ days: 1 }) //=> "dentro de 1 día"
       * @example DateTime.now().plus({ days: 1 }).toRelative({ locale: "fr" }) //=> "dans 23 heures"
       * @example DateTime.now().minus({ days: 2 }).toRelative() //=> "2 days ago"
       * @example DateTime.now().minus({ days: 2 }).toRelative({ unit: "hours" }) //=> "48 hours ago"
       * @example DateTime.now().minus({ hours: 36 }).toRelative({ round: false }) //=> "1.5 days ago"
       */
      toRelative(options = {}) {
        if (!this.isValid)
          return null;
        const base = options.base || _DateTime.fromObject({}, { zone: this.zone }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
        let units = ["years", "months", "days", "hours", "minutes", "seconds"];
        let unit = options.unit;
        if (Array.isArray(options.unit)) {
          units = options.unit;
          unit = void 0;
        }
        return diffRelative(base, this.plus(padding), {
          ...options,
          numeric: "always",
          units,
          unit
        });
      }
      /**
       * Returns a string representation of this date relative to today, such as "yesterday" or "next month".
       * Only internationalizes on platforms that supports Intl.RelativeTimeFormat.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.unit - use a specific unit; if omitted, the method will pick the unit. Use one of "years", "quarters", "months", "weeks", or "days"
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar() //=> "tomorrow"
       * @example DateTime.now().setLocale("es").plus({ days: 1 }).toRelative() //=> ""mañana"
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar({ locale: "fr" }) //=> "demain"
       * @example DateTime.now().minus({ days: 2 }).toRelativeCalendar() //=> "2 days ago"
       */
      toRelativeCalendar(options = {}) {
        if (!this.isValid)
          return null;
        return diffRelative(options.base || _DateTime.fromObject({}, { zone: this.zone }), this, {
          ...options,
          numeric: "auto",
          units: ["years", "months", "days"],
          calendary: true
        });
      }
      /**
       * Return the min of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the minimum
       * @return {DateTime} the min DateTime, or undefined if called with no argument
       */
      static min(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("min requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.min);
      }
      /**
       * Return the max of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the maximum
       * @return {DateTime} the max DateTime, or undefined if called with no argument
       */
      static max(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("max requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.max);
      }
      // MISC
      /**
       * Explain how a string would be parsed by fromFormat()
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see description)
       * @param {Object} options - options taken by fromFormat()
       * @return {Object}
       */
      static fromFormatExplain(text, fmt, options = {}) {
        const { locale = null, numberingSystem = null } = options, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        });
        return explainFromTokens(localeToUse, text, fmt);
      }
      /**
       * @deprecated use fromFormatExplain instead
       */
      static fromStringExplain(text, fmt, options = {}) {
        return _DateTime.fromFormatExplain(text, fmt, options);
      }
      // FORMAT PRESETS
      /**
       * {@link DateTime#toLocaleString} format like 10/14/1983
       * @type {Object}
       */
      static get DATE_SHORT() {
        return DATE_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED() {
        return DATE_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED_WITH_WEEKDAY() {
        return DATE_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983'
       * @type {Object}
       */
      static get DATE_FULL() {
        return DATE_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Tuesday, October 14, 1983'
       * @type {Object}
       */
      static get DATE_HUGE() {
        return DATE_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_SIMPLE() {
        return TIME_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SECONDS() {
        return TIME_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SHORT_OFFSET() {
        return TIME_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_LONG_OFFSET() {
        return TIME_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_SIMPLE() {
        return TIME_24_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SECONDS() {
        return TIME_24_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 EDT', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SHORT_OFFSET() {
        return TIME_24_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 Eastern Daylight Time', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_LONG_OFFSET() {
        return TIME_24_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT() {
        return DATETIME_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT_WITH_SECONDS() {
        return DATETIME_SHORT_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED() {
        return DATETIME_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_SECONDS() {
        return DATETIME_MED_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, 14 Oct 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_WEEKDAY() {
        return DATETIME_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL() {
        return DATETIME_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30:33 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL_WITH_SECONDS() {
        return DATETIME_FULL_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE() {
        return DATETIME_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30:33 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE_WITH_SECONDS() {
        return DATETIME_HUGE_WITH_SECONDS;
      }
    };
  }
});

// node_modules/luxon/src/luxon.js
var init_luxon = __esm({
  "node_modules/luxon/src/luxon.js"() {
    init_datetime();
    init_duration();
    init_interval();
    init_info();
    init_zone();
    init_fixedOffsetZone();
    init_IANAZone();
    init_invalidZone();
    init_systemZone();
    init_settings();
  }
});

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian20, menuOtro;
var init_menuOtro = __esm({
  "src/modules/moduloRegistroTiempo/API/menuOtro.ts"() {
    "use strict";
    import_obsidian20 = require("obsidian");
    init_seleccionModal();
    init_fuzzySelectOrCreate();
    init_luxon();
    menuOtro = class {
      constructor(plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.selectedActivity = "";
        this.selectedGroup = "";
        this.plugin = plugin;
        this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
      }
      async menuOtro(app2, registro) {
        const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
        const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
        const placeholderOtro = "\xBFQue categoria?";
        const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
        let temaOtro;
        let siAsunto = false;
        try {
          const selectionOtro = await modalOtro.openAndAwaitSelection();
          switch (selectionOtro) {
            case "hab":
              temaOtro = await this.habitual(app2);
              break;
            case "actsAV":
            case "actsAI":
            case "actsPQ":
            case "actsPGTD":
            case "actsTI":
            case "actsRR":
              temaOtro = await this.elemSG(app2, selectionOtro);
              siAsunto = true;
              break;
            case "bus":
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          registro.detener = true;
          return error;
        }
        debugger;
        return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.grupo, areaVida: temaOtro.grupo };
      }
      async habitual(app2) {
        const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
        const actsGrupos = await this.resultYaml(app2, "actsTemas");
        let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
        return objEleccion;
      }
      async ninguno(app2) {
      }
      async elemSG(app2, tipo) {
        const actividades = await this.resultYaml(app2, tipo);
        const activeSG = await this.findMainFilesWithState(app2, tipo);
        let groups;
        debugger;
        switch (tipo) {
          case "actsAV":
            groups = activeSG.map((page) => page.frontmatter.areaVida);
            break;
          default:
            groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
            break;
        }
        let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
        const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
        let alias = foundElement == null ? void 0 : foundElement.file.path;
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
        return objEleccion;
      }
      async buscar(app2) {
      }
      async resultYaml(app2, tema) {
        var _a;
        const file = app2.vault.getAbstractFileByPath(this.pathCampos);
        try {
          if (file instanceof import_obsidian20.TFile) {
            const metadata = app2.metadataCache.getFileCache(file);
            const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
            const resultado = [];
            if (Array.isArray(arregloResult)) {
              arregloResult.forEach((item) => {
                if (Array.isArray(item) && item.length >= 2) {
                  resultado.push({ grupo: item[0], actividad: item[1] });
                }
              });
            }
            return resultado;
          }
        } catch (error) {
          console.error("Error obteniendo el archivo de campos:", error);
          throw error;
        }
        return [];
      }
      async getFrontmatterField(app2, file, field) {
        try {
          const tFile = app2.vault.getAbstractFileByPath(file);
          if (tFile instanceof import_obsidian20.TFile) {
            const cache = app2.metadataCache.getFileCache(tFile);
            const frontmatter = cache == null ? void 0 : cache.frontmatter;
            if (frontmatter && frontmatter.hasOwnProperty(field)) {
              const fieldValue = frontmatter[field];
              if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
                console.log("El campo est\xE1 vac\xEDo o no existe.");
                return null;
              } else {
                console.log("Frontmatter consultado con \xE9xito");
                return fieldValue;
              }
            } else {
              console.log("El campo no existe en el frontmatter.");
              return null;
            }
          } else {
            console.error("El archivo no existe o no es un archivo de texto.");
            return null;
          }
        } catch (err) {
          console.error("Error al consultar el frontmatter", err);
          return null;
        }
      }
      // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
      async findMainFilesWithState(app2, tipo) {
        var _a;
        const propertiesTipo = {
          actsAV: {
            folder: this.plugin.settings.folder_AreasVida,
            sameName: false,
            nameFile: this.plugin.settings.nameFile_AreasVida
          },
          actsAI: {
            folder: this.plugin.settings.folder_AreasInteres,
            sameName: true,
            nameFile: this.plugin.settings.nameFile_AreasInteres
          },
          actsPQ: {
            folder: this.plugin.settings.folder_ProyectosQ,
            sameName: false,
            nameFile: ""
          },
          actsPGTD: {
            folder: this.plugin.settings.folder_ProyectosGTD,
            sameName: false,
            nameFile: ""
          },
          actsTI: {
            folder: this.plugin.settings.folder_TemasInteres,
            sameName: false,
            nameFile: ""
          },
          actsRR: {
            folder: this.plugin.settings.folder_RecursosRecurrentes,
            sameName: false,
            nameFile: ""
          }
          // Puedes continuar añadiendo más casos aquí
        };
        debugger;
        const activeFilesWithFrontmatter = [];
        switch (tipo) {
          case "actsAV":
            const { folder, sameName, nameFile } = propertiesTipo[tipo];
            let ahora = DateTime.now().toFormat("yyyy-Qq");
            const files = app2.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && file.name.startsWith(ahora));
            for (let file of files) {
              let metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
                activeFilesWithFrontmatter.push({ file, frontmatter: metadata });
              }
            }
            break;
          default:
            if (propertiesTipo.hasOwnProperty(tipo)) {
              const { folder: folder2, sameName: sameName2, nameFile: nameFile2 } = propertiesTipo[tipo];
              const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder2));
              for (const file of filesInFolder) {
                if (sameName2 && file.basename === nameFile2 || !sameName2) {
                  const metadata = app2.metadataCache.getFileCache(file);
                  if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
                    activeFilesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
                  }
                }
              }
            } else {
              console.log("Selecci\xF3n no reconocida:", tipo);
              return [];
            }
            break;
        }
        return activeFilesWithFrontmatter;
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian21, utilsAPI;
var init_utilsAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/utilsAPI.ts"() {
    "use strict";
    import_obsidian21 = require("obsidian");
    init_seleccionModalTareas();
    init_menuOtro();
    init_registroTiempoAPI();
    utilsAPI = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.menuOtro = new menuOtro(plugin);
      }
      // La declaración del método estaba asi: buscarRegistrosActivos(app: App, registro: any)
      // Devuelve el file del registro activo. Utilizado para cuando necesito obtener el dato solamente de si hay algún registro activo.
      async buscarRegistrosActivos(app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const folder = this.plugin.settings.folder_RegistroTiempo;
        for (let file of files) {
          if (file.path.startsWith(folder)) {
            const metadata = app2.metadataCache.getFileCache(file);
            if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
              return file;
            }
          }
        }
        return;
      }
      // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
      async crearObjetoRegistro(plugin) {
        const activo = plugin.app.workspace.getActiveFile();
        if (!activo) {
          return {
            activo: null,
            nombre: "Registro sin archivo activo",
            folder: plugin.settings.folder_RegistroTiempo,
            indice: plugin.settings.indice_RegistroTiempo,
            id: null,
            fecha: this.formatearFecha(/* @__PURE__ */ new Date()),
            indice_DVJS: `"${plugin.settings.indice_RegistroTiempo}"`,
            aliases: []
            // o incluso podrías asignar algún alias por defecto si lo deseas
          };
        }
        const folder = plugin.settings.folder_RegistroTiempo;
        const indice = plugin.settings.indice_RegistroTiempo;
        let maxId = 0;
        const files = plugin.app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter(
          (file) => file.path.startsWith(folder)
        );
        registrosExistentes.forEach((file) => {
          var _a;
          const metadata = (_a = plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        const nextId = maxId + 1;
        const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
        const metadataActivo = plugin.app.metadataCache.getFileCache(activo);
        const aliases = metadataActivo && metadataActivo.frontmatter && metadataActivo.frontmatter.aliases ? metadataActivo.frontmatter.aliases : [];
        return {
          activo,
          nombre: activo.basename,
          folder,
          indice,
          id: nextId,
          fecha: fechaCompleta,
          indice_DVJS: `"${indice}"`,
          aliases
          // Se agrega el campo aliases al registro
        };
      }
      formatearFecha(fecha) {
        const offset2 = fecha.getTimezoneOffset() * 6e4;
        const fechaLocal = new Date(fecha.getTime() - offset2);
        const fechaFormato = fechaLocal.toISOString().split("T")[0];
        const dias = [
          "Domingo",
          "Lunes",
          "Martes",
          "Mi\xE9rcoles",
          "Jueves",
          "Viernes",
          "S\xE1bado"
        ];
        const diaSemana = dias[fecha.getDay()];
        const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
        return `${fechaFormato} ${diaSemana} ${horaFormato}`;
      }
      // Método que verifica si hay registros ACtivos y pregunta si quiere cerrarlos.
      async verificarTareasActivas(registro, app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const tareasActivas = [];
        for (let file of files) {
          if (file.path.startsWith(registro.folder)) {
            const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
              tareasActivas.push({
                file,
                titulo: metadata.titulo,
                aliases: metadata.aliases || file.basename
              });
            }
          }
        }
        if (tareasActivas.length === 1) {
          const tareaActiva = tareasActivas[0];
          const deseaDetener = await this.mostrarSugerencia(
            `La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`
          );
          if (deseaDetener === void 0) {
            new import_obsidian21.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
            registro.detener = true;
            return;
          }
          if (deseaDetener) {
            debugger;
            const registroTiempoAPInstance = new registroTiempoAPI(this.plugin);
            await registroTiempoAPInstance.cerrarRegistro(tareaActiva.file);
            registro.detener = false;
          } else {
            new import_obsidian21.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
            registro.detener = true;
            return;
          }
        } else if (tareasActivas.length > 1) {
          new import_obsidian21.Notice(
            "Hay un error con la cantidad de tareas corriendo en este momento."
          );
          registro.detener = true;
        } else {
          console.log("No hay m\xE1s tareas corriendo.");
          registro.detener = false;
        }
      }
      mostrarSugerencia(mensaje) {
        return new Promise((resolve, reject) => {
          let seleccionado = false;
          const modal = new import_obsidian21.Modal(app);
          modal.contentEl.createEl("h1", { text: mensaje });
          const buttonsContainer = modal.contentEl.createEl("div");
          const hacerSeleccion = (seleccion) => {
            seleccionado = true;
            modal.close();
            resolve(seleccion);
          };
          const yesButton = buttonsContainer.createEl("button", {
            text: "S\xED"
          });
          yesButton.addEventListener("click", () => hacerSeleccion(true));
          const noButton = buttonsContainer.createEl("button", {
            text: "No"
          });
          noButton.addEventListener("click", () => hacerSeleccion(false));
          modal.onClose = () => {
            if (!seleccionado) {
              reject(new Error("Modal cerrado sin selecci\xF3n"));
            }
          };
          modal.contentEl.addEventListener("keydown", (e) => {
            var _a;
            switch (e.key) {
              case "ArrowLeft":
                yesButton.focus();
                break;
              case "ArrowRight":
                noButton.focus();
                break;
              case "Enter":
                (_a = document.activeElement) == null ? void 0 : _a.click();
                break;
            }
          });
          yesButton.focus();
          modal.open();
        });
      }
      async definirTipoRegistro(registro, app2) {
        const totTareas = await this.encontrarTareasPendientes(app2);
        let opcionesTitulo;
        let valoresOpcion;
        if (registro.activo) {
          let valorMostrar;
          if (registro.aliases && registro.aliases.length >= 2) {
            valorMostrar = registro.aliases[1];
          } else if (registro.aliases && registro.aliases.length >= 1) {
            valorMostrar = registro.aliases[0];
          } else {
            valorMostrar = registro.nombre;
          }
          if (totTareas.length > 0) {
            opcionesTitulo = [valorMostrar, "Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Nota", "Tarea", "Otro"];
          } else {
            opcionesTitulo = [valorMostrar, "Otro"];
            valoresOpcion = ["Nota", "Otro"];
          }
        } else {
          if (totTareas.length > 0) {
            opcionesTitulo = ["Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Tarea", "Otro"];
          } else {
            opcionesTitulo = ["Otro"];
            valoresOpcion = ["Otro"];
          }
        }
        const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
        const modalMenu1 = new SeleccionModalTareas(app2, opcionesTitulo, valoresOpcion, placeholder);
        try {
          const selection = await modalMenu1.openAndAwaitSelection();
          registro.tipoRegistro = selection;
          switch (registro.tipoRegistro) {
            case "Nota":
              if (registro.activo) {
                registro.titulo = registro.nombre;
                registro.siAsunto = true;
                registro.tarea = false;
                registro = this.copiarCampos(registro);
              } else {
                new import_obsidian21.Notice("No hay nota activa para asignar");
                registro.tipoRegistro = "Otro";
              }
              break;
            case "Tarea":
              await this.elegirTareaParaRegistro(app2, registro, totTareas);
              break;
            default:
              let respuesta = await this.menuOtro.menuOtro(app2, registro);
              Object.assign(registro, respuesta);
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
        }
      }
      copiarCampos(registro) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _i;
        let nombre = registro.activo.basename;
        let nota = app.metadataCache.getFileCache(registro.activo);
        if (((_a = nota.frontmatter) == null ? void 0 : _a.type) === "PQ") {
          registro.proyectoQ = nombre;
          registro.proyectoGTD = "";
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PGTD") {
          registro.proyectoGTD = [nombre];
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = registro.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          registro.proyectoQ = "";
          if (Array.isArray(nota.frontmatter.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.proyectoQ = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          registro.proyectoGTD = "";
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        }
        registro.areaInteres = [];
        if (Array.isArray((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaInteres)) {
          registro.areaInteres = registro.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
        } else {
          if ((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres) {
            registro.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
        }
        registro.areaVida = "";
        if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            registro.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            registro.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.areaVida = "No es de ning\xFAn Area de Vida";
        }
        return registro;
      }
      async encontrarTareasPendientes(app2) {
        let tareasPendientes = [];
        const archivos = app2.vault.getMarkdownFiles();
        const archivosRelevantes = archivos.filter((archivo) => {
          return !archivo.path.includes("Plantillas") && !archivo.path.includes("Estructura/GTD/Sistema GTD/Sistema") && !archivo.path.includes("Archivo");
        });
        for (const archivo of archivosRelevantes) {
          const contenido = await app2.vault.read(archivo);
          const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
          const tareasConArchivo = coincidencias.map((tarea) => {
            return { tarea: tarea.trim(), archivo };
          });
          tareasPendientes = tareasPendientes.concat(tareasConArchivo);
        }
        return tareasPendientes;
      }
      async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
        var _a;
        const placeholder = "Elige la tarea que vas a registrar.";
        const promesasLimpias = tareasPendientes.map(
          (tareaObj) => this.limpiarTextoTarea(tareaObj.tarea)
        );
        try {
          const tareasLimpias = await Promise.all(promesasLimpias);
          const displayOptions = [];
          const values = [];
          for (let i = 0; i < tareasPendientes.length; i++) {
            const { tarea, archivo } = tareasPendientes[i];
            const textoTarea = tareasLimpias[i];
            let aliasDisplay = "";
            const metadata = app2.metadataCache.getFileCache(archivo);
            if ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) {
              let aliases = metadata.frontmatter.aliases;
              if (!Array.isArray(aliases))
                aliases = [aliases];
              if (aliases.length >= 2) {
                aliasDisplay = aliases[1];
              } else if (aliases.length >= 1) {
                aliasDisplay = aliases[0];
              }
            }
            if (!aliasDisplay) {
              aliasDisplay = archivo.basename;
            }
            const displayText = `${aliasDisplay} / ${textoTarea}`;
            displayOptions.push(displayText);
            values.push(i);
          }
          const modalMenu = new SeleccionModalTareas(app2, displayOptions, values, placeholder);
          try {
            const selectedIndex = await modalMenu.openAndAwaitSelection();
            const seleccion = tareasPendientes[selectedIndex];
            registro.titulo = await this.limpiarTextoTarea(seleccion.tarea);
            registro.nombre = seleccion.archivo.basename;
            registro.archivoTarea = seleccion.archivo;
            registro.siAsunto = true;
            registro.tarea = true;
            registro = this.copiarCampos(registro);
          } catch (error) {
            registro.detener = true;
            console.error("Error o modal cerrado sin selecci\xF3n:", error);
          }
        } catch (error) {
          console.error("Hubo un error al limpiar las tareas:", error);
        }
      }
      limpiarTextoTarea(titulo) {
        return new Promise((resolve) => {
          let textoLimpio = titulo.split("\n")[0];
          textoLimpio = textoLimpio.replace(/#([\w-/]+)/g, (match2, p1) => {
            let transformado = p1.replace(/\//g, "_");
            transformado = transformado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            return transformado;
          });
          textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
          textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
          textoLimpio = textoLimpio.replace(
            /\p{Extended_Pictographic}\s*\d{4}-\d{2}-\d{2}(?:\s*\d{2}:\d{2}(?::\d{2})?)?/gu,
            ""
          );
          textoLimpio = textoLimpio.replace(/\p{Extended_Pictographic}/gu, "");
          textoLimpio = textoLimpio.replace(/\[[^\]]*\]/g, "");
          const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
          textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
          textoLimpio = textoLimpio.replace(/\s+/g, " ");
          resolve(textoLimpio.trim());
        });
      }
      async construirNombreyAlias(registro, app2) {
        var _a;
        const maxIdSec = await this.calcularUltimoIdSec(registro.titulo, registro.folder, app2);
        registro.idSec = maxIdSec + 1;
        const suffix = registro.idSec > 1 ? ` - ${registro.idSec}` : "";
        const originalAliases = Array.isArray(registro.aliases) ? [...registro.aliases] : [];
        function cleanPrefix(value) {
          if (!value)
            return "";
          return value.replace(/^RT -\s*/, "").trim();
        }
        if (!registro.tarea) {
          const noteName = cleanPrefix(registro.nombre || "");
          const newAliases = [
            `RT - ${noteName}${suffix}`
            // Alias 0: Nombre de la nota + sufijo
          ];
          if (originalAliases.length >= 1) {
            newAliases.push(`RT - ${cleanPrefix(originalAliases[0])}${suffix}`);
            if (originalAliases.length >= 2) {
              newAliases.push(`RT - ${cleanPrefix(originalAliases[1])}${suffix}`);
            }
          }
          registro.aliases = newAliases;
        } else {
          const metadataNota = app2.metadataCache.getFileCache(
            registro.archivoTarea
            // Este es el archivo donde está la tarea, lo tienes en `registro.nombre` o en alguna propiedad que guarde la referencia
          );
          const taskText = cleanPrefix(registro.titulo || "");
          const noteName = cleanPrefix(registro.nombre || "");
          debugger;
          let noteAliases = [];
          if ((_a = metadataNota == null ? void 0 : metadataNota.frontmatter) == null ? void 0 : _a.aliases) {
            noteAliases = Array.isArray(metadataNota.frontmatter.aliases) ? metadataNota.frontmatter.aliases : [metadataNota.frontmatter.aliases];
          }
          const newAliases = [
            `RT - ${taskText}${suffix}`,
            `RT - ${noteName} / ${taskText}${suffix}`
          ];
          if (noteAliases.length > 0) {
            newAliases.push(`RT - ${cleanPrefix(noteAliases[0])} / ${taskText}${suffix}`);
          }
          registro.aliases = newAliases;
          registro.descripcion = taskText;
        }
        if (!registro.id) {
          console.error("Error: registro.id es null o undefined");
          registro.id = Date.now();
        }
        registro.nameFile = `${registro.folder}/RT - ${registro.id}`;
      }
      /**
      * Calcula el último idSec usado para registros con el mismo título en la carpeta especificada.
      */
      async calcularUltimoIdSec(titulo, folder, app2) {
        const archivos = app2.vault.getFiles();
        let max = 0;
        for (const archivo of archivos) {
          if (archivo.path.startsWith(folder)) {
            const metadatos = app2.metadataCache.getFileCache(archivo);
            if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === titulo) {
              const idSec = metadatos.frontmatter.idSec;
              if (idSec !== void 0 && idSec > max) {
                max = idSec;
              }
            }
          }
        }
        return max;
      }
      limpiarAlias(titulo) {
        const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
        let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
        tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
        return tituloLimpio.trim();
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts
var init_RegistroTiempo = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts
var init_SesionLectura = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/API/SesionLectura.ts
var SesionLectura_exports = {};
__export(SesionLectura_exports, {
  SesionLectura: () => SesionLectura
});
var import_obsidian22, SesionLectura;
var init_SesionLectura2 = __esm({
  "src/modules/moduloRegistroTiempo/API/SesionLectura.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian22 = require("obsidian");
    init_SesionLectura();
    init_RTBase();
    init_luxon();
    SesionLectura = class extends RTBase {
      constructor(plugin, infoSubsistema) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.nota = {};
        this.infoSubsistema = infoSubsistema;
      }
      async getId() {
        var _a, _b, _c;
        let maxId = 0;
        debugger;
        const files = app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
        registrosExistentes.forEach((file) => {
          var _a2;
          const metadata = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        this.nota.id = maxId + 1;
        const currentNotePath = (_a = app.workspace.getActiveFile()) == null ? void 0 : _a.path;
        const currentNota = (_b = app.metadataCache.getFileCache(app.workspace.getActiveFile())) == null ? void 0 : _b.frontmatter;
        if (currentNota) {
          const existingSessions = registrosExistentes.filter((file) => {
            var _a2, _b2;
            return file.path !== currentNotePath && ((_b2 = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) == null ? void 0 : _b2.titulo) === currentNota.titulo;
          });
          if (existingSessions.length > 0) {
            const sortedSessions = existingSessions.sort((a, B) => parseInt(B.path.match(/[0-9]+/)[0]) - parseInt(A.path.match(/[0-9]+/)[0]));
            const lastSL = (_c = app.metadataCache.getFileCache(sortedSessions[0])) == null ? void 0 : _c.frontmatter;
            this.nota.idSec = parseInt(lastSL.idSec) + 1;
            this.nota.pagInicio = lastSL.pagFin;
          } else {
            this.nota.idSec = 1;
            this.nota.pagInicio = 1;
          }
        } else {
          this.nota.idSec = 1;
          this.nota.pagInicio = 1;
        }
        return this.nota.id;
      }
      async getNota() {
        return this.nota;
      }
      async getParametrosLibro() {
        debugger;
        const currentFile = app.workspace.getActiveFile();
        if (!currentFile || !currentFile.path)
          return;
        const metadataCache = app.metadataCache;
        const fileCache = metadataCache.getFileCache(currentFile);
        if (!fileCache || !fileCache.frontmatter || fileCache.frontmatter.type !== "LB") {
          new Notice("La nota activa debe ser de tipo Libro en la Bibloteca para poder crear una sesi\xF3n de Lectura.");
          return;
        }
        const frontMatter = fileCache.frontmatter;
        this.nota["paginas"] = frontMatter.paginas;
        this.nota["titulo"] = frontMatter.titulo;
        this.nota["palabrasPorHoja"] = frontMatter.palabrasPorHoja;
      }
      async getAsunto() {
        var _a, _b, _c, _d, _e, _f, _g;
        let padres = [];
        let activo = app.workspace.getActiveFile();
        let siAsunto = true;
        let nombre = "";
        let nota;
        if (activo != null) {
          nombre = activo.basename;
          nota = app.metadataCache.getFileCache(activo);
          nota.frontmatter = nota.frontmatter || {};
          nota.frontmatter.file = {};
          Object.assign(nota.frontmatter.file, activo);
          padres.unshift(nombre);
          debugger;
          this.nota.asuntoDefinido = true;
          this.nota.proyectoQ = "";
          if (Array.isArray((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.proyectoQ)) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.proyectoQ) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.proyectoGTD = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoGTD)) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoGTD) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.areaInteres = [];
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
          this.nota.areaVida = "";
          if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaVida) {
            if (Array.isArray(nota.frontmatter.areaVida)) {
              this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof nota.frontmatter.areaVida === "string") {
              this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          return { siAsunto, nombre: padres };
        }
      }
      async getAliases() {
        this.nota.aliases = [];
        this.nota.aliases.push(`SL - ${this.nota.idSec} / ${this.nota.titulo}`);
        return this.nota.aliases;
      }
      async getFecha() {
        let fechaActual = DateTime.now();
        fechaActual = fechaActual.setLocale("es");
        fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
        this.nota.fecha = fechaActual;
        return fechaActual;
      }
      async getRename() {
        debugger;
        const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        const file = this.tp.file.config.target_file;
        const existe = app.vault.getAbstractFileByPath(newName);
        try {
          if (existe instanceof import_obsidian22.TFile) {
            const nombreFile = newName.split("/");
            const borrar = await this.suggester(
              ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
              [true, false],
              true,
              `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
            );
            if (borrar) {
              await app.vault.delete(existe);
              if (file instanceof import_obsidian22.TFile) {
                await app.vault.rename(file, newName);
                console.log("Archivo renombrado con \xE9xito.");
                return newName;
              }
            } else {
              console.log("Cancelando la creaci\xF3n del archivo.");
              throw new Error("Proceso cancelado por el usuario.");
            }
          } else {
            if (file instanceof import_obsidian22.TFile) {
              await app.vault.rename(file, newName);
              console.log("Archivo renombrado con \xE9xito.");
              return newName;
            }
          }
        } catch (error) {
          console.error("Error al cambiar el nombre", error);
          throw error;
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/RTBase.ts
var import_obsidian23, import_obsidian24, RTBase;
var init_RTBase = __esm({
  "src/modules/moduloRegistroTiempo/API/RTBase.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian23 = require("obsidian");
    import_obsidian24 = require("obsidian");
    init_SesionLectura();
    RTBase = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.infoSubsistema = {};
      }
      async iniciarRegistro(infoSubsistema, campos) {
        if (typeof infoSubsistema === "object" && infoSubsistema !== null) {
          if (!campos || !Array.isArray(campos)) {
            throw new Error("Campos debe ser un array definido.");
          }
          this.nota = {};
          let nota;
          Object.assign(this.infoSubsistema, infoSubsistema);
          debugger;
          if (this.infoSubsistema.defined) {
            this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
            this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
            Object.assign(this.nota, infoSubsistema);
          }
          let fieldHandler;
          switch (this.infoSubsistema.type) {
            case "SL":
              const SesionLectura3 = await Promise.resolve().then(() => (init_SesionLectura2(), SesionLectura_exports));
              fieldHandler = new SesionLectura3.SesionLectura(this.plugin, this.infoSubsistema);
              break;
            default:
              throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
          }
          try {
            for (let campo of campos) {
              const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
              if (typeof fieldHandler[functionName] === "function") {
                this.nota[campo] = await fieldHandler[functionName]();
                nota = await fieldHandler.getNota();
                for (const key in nota) {
                  if (!(key in this.nota)) {
                    this.nota[key] = nota[key];
                  }
                }
              } else {
                console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
              }
            }
          } catch (error) {
            console.error("No se pudo crear el objeto de registro.", error);
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
          return this.nota;
        } else {
          try {
            const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
            await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
            return registro;
          } catch (error) {
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
        }
      }
      async cerrarRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          let infoNota;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else if (registro instanceof import_obsidian23.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          let infoNota = { file: registro };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          let infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var import_obsidian25, registroTiempoAPI;
var init_registroTiempoAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian25 = require("obsidian");
    init_RegistroTiempo();
    init_RTBase();
    registroTiempoAPI = class extends RTBase {
      constructor(plugin) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
      }
      // Invocado desde el template de templater Paso 3 de 3
      async retomarRegistro(id) {
        var _a, _b, _c, _d;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        try {
          let quitarDobleCorchete2 = function(str) {
            if (str.startsWith("[[") && str.endsWith("]]")) {
              return str.slice(2, -2);
            }
            return str;
          }, normalizarArray2 = function(arr) {
            return arr.map((item) => {
              if (typeof item === "string") {
                return quitarDobleCorchete2(item);
              }
              return item;
            });
          };
          var quitarDobleCorchete = quitarDobleCorchete2, normalizarArray = normalizarArray2;
          const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
          await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
          if (registro.detener) {
            return registro;
          }
          const files = this.plugin.app.vault.getMarkdownFiles();
          let registroAntiguo;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === parseInt(id)) {
                registroAntiguo = { file, frontmatter: metadata };
                break;
              }
            }
          }
          if (!registroAntiguo) {
            new Notice(`No se encontr\xF3 el registro antiguo con ID: ${id}`);
            registro.detener = true;
            return registro;
          }
          const fm = registroAntiguo.frontmatter;
          registro.titulo = (_b = fm.titulo) != null ? _b : "Sin Titulo";
          registro.asuntoRetomado = (_c = fm.asunto) != null ? _c : null;
          registro.idSec = ((_d = fm.idSec) != null ? _d : 0) + 1;
          registro.areaVida = "";
          if (typeof fm.areaVida === "string") {
            registro.areaVida = quitarDobleCorchete2(fm.areaVida);
          }
          registro.areaInteres = [];
          if (Array.isArray(fm.areaInteres)) {
            registro.areaInteres = normalizarArray2(fm.areaInteres);
          }
          registro.proyectoGTD = [];
          if (Array.isArray(fm.proyectoGTD)) {
            registro.proyectoGTD = normalizarArray2(fm.proyectoGTD);
          }
          registro.proyectoQ = [];
          if (Array.isArray(fm.proyectoQ)) {
            registro.proyectoQ = normalizarArray2(fm.proyectoQ);
          }
          registro.aliases = [];
          if (Array.isArray(fm.aliases)) {
            registro.aliases = normalizarArray2(fm.aliases);
          }
          await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
          return registro;
        } catch (error) {
          console.error(error);
          new Notice("No se pudo crear el objeto de registro al retomar.");
          return null;
        }
      }
      // Invocado para crear el template de Retomar Paso 1 de 3
      async retomarTarea(id) {
        debugger;
        const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
        const template = app.vault.getAbstractFileByPath(filePath);
        if (template instanceof import_obsidian25.TFile) {
          console.log("Archivo encontrado:", template);
        } else {
          console.log("Archivo no encontrado.");
        }
        const filename = "Retomar " + id;
        const folder = app.vault.getAbstractFileByPath("Inbox");
        let crearNota = this.tp.file.static_functions.get("create_new");
        await crearNota(template, filename, false, folder).basename;
      }
      // Implementación del método con unión de tipos para el parámetro id
      async detalleRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        let infoNota;
        debugger;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
        } else if (registro instanceof import_obsidian25.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          infoNota = { file: registro };
          Object.assign(infoNota, metadata);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
        }
        let campos = ["descripcion_RegistroTiempo"];
        debugger;
        let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(infoNota, campos);
        let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
        new Notice(`Descripci\xF3n actualizada: ${textoResultado}`);
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian89 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
        containerEl.createEl("h3", { text: "Navegador de Tareas" });
        new import_obsidian.Setting(containerEl).setName("Task Execution Navigator").setDesc("Permite navegar r\xE1pidamente a tareas en ejecuci\xF3n").addToggle((toggle) => toggle.setValue(this.plugin.settings.taskExecutionNavigatorModule).onChange(async (value) => {
          var _a, _b;
          this.plugin.settings.taskExecutionNavigatorModule = value;
          if (value) {
            (_a = this.plugin.taskExecutionNavigatorModule) == null ? void 0 : _a.activate();
          } else {
            (_b = this.plugin.taskExecutionNavigatorModule) == null ? void 0 : _b.deactivate();
          }
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const campa\u00F1asTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Campa\xF1as"' });
        campa\u00F1asTitle.setAttribute("data-title", 'Subsistema de "Campa\xF1as"');
        campa\u00F1asTitle.style.cursor = "pointer";
        const campa\u00F1asContent = tabContent.createDiv();
        campa\u00F1asContent.style.display = "none";
        campa\u00F1asTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(campa\u00F1asContent).setName("Carpeta de Campa\xF1as").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las campa\xF1as.").addText((text) => text.setValue(this.plugin.settings.folder_Campa\u00F1as).onChange(async (value) => {
          this.plugin.settings.folder_Campa\u00F1as = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(campa\u00F1asContent).setName("\xCDndice de Campa\xF1as").setDesc("Establece la ruta del \xEDndice de campa\xF1as.").addText((text) => text.setValue(this.plugin.settings.indice_Campa\u00F1as).onChange(async (value) => {
          this.plugin.settings.indice_Campa\u00F1as = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Archivo de Bandeja de Entrada.").setDesc("Establece la ruta de la Bandeja de entrada GTD.").addText((text) => text.setValue(this.plugin.settings.file_Inbox).onChange(async (value) => {
          this.plugin.settings.file_Inbox = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const transaccionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Transacciones"' });
        transaccionesTitle.setAttribute("data-title", 'Subsistema de "transacciones"');
        transaccionesTitle.style.cursor = "pointer";
        const transaccionesContent = tabContent.createDiv();
        transaccionesContent.style.display = "none";
        transaccionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(transaccionesContent).setName("Carpeta de Modulos del Sistema de Transacciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de las transacciones.").addText((text) => text.setValue(this.plugin.settings.folder_Transacciones).onChange(async (value) => {
          this.plugin.settings.folder_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(transaccionesContent).setName("\xCDndice de Transacciones").setDesc("Establece la ruta del \xEDndice de Transacciones.").addText((text) => text.setValue(this.plugin.settings.indice_Transacciones).onChange(async (value) => {
          this.plugin.settings.indice_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
  openTab(arg0) {
    throw new Error("Method not implemented.");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");

// src/modules/moduloBase/utils/fileLinkModal.ts
var import_obsidian3 = require("obsidian");
var FileLinkModal = class extends import_obsidian3.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    let { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.justifyContent = "center";
    contentEl.style.alignItems = "center";
    contentEl.style.height = "50%";
    contentEl.createEl("h1", {
      text: "Insertar el link de un archivo.",
      attr: { style: "text-align: center;" }
      // Asegura que el texto del título esté centrado si es más largo que una línea
    });
    const inputContainer = contentEl.createDiv();
    inputContainer.style.margin = "10px";
    const fileInput = inputContainer.createEl("input", { type: "file" });
    fileInput.style.display = "none";
    const fileButton = inputContainer.createEl("button", {
      text: "Seleccione su archivo",
      cls: "mod-cta"
    });
    fileButton.style.padding = "5px 10px";
    fileButton.style.fontSize = "16px";
    fileButton.style.marginTop = "5px";
    fileButton.style.cursor = "pointer";
    fileButton.onclick = () => fileInput.click();
    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        this.insertLinkAtCursor(file.path, file.name);
      }
      this.close();
    };
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  async insertLinkAtCursor(filePath, fileName) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (activeLeaf) {
      const editor = activeLeaf.view.sourceMode.cmEditor;
      const cursor = editor.getCursor();
      const linkText = `[${fileName}](<file://${filePath}>)`;
      editor.replaceRange(linkText, cursor);
    }
  }
};
async function insertFileLink(app2) {
  new FileLinkModal(app2).open();
}

// src/modules/moduloBase/commands.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian4 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian5.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
  const comando4 = plugin.addCommand({
    id: "crear-link-Archivo",
    name: "Crear un link a archivo del Disco.",
    callback: async () => {
      await insertFileLink(app);
    }
  });
  plugin.registeredCommandIdsMB.push(comando4.id);
  const comando5 = plugin.addCommand({
    id: "abrir-nota-activa",
    name: "Abrir Nota Activa",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-nota-activa");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-nota-activa"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-nota-activa")[0]
      );
    }
  });
  plugin.registeredCommandIdsMB.push(comando5.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian10 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian7 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian11 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian17 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian14 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian13 = require("obsidian");
init_seleccionModal();
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset2 = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset2);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian13.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian13.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian13.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian13.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian14.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian15 = require("obsidian");
var modal_Ahora = class extends import_obsidian15.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian15.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian15.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian15.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian16.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian16.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
  const id4 = plugin.addCommand({
    id: "vista-registro-tiempo-activa",
    name: "Mostrar RT Activo",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-registro-activo");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-registro-activo"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-registro-activo")[0]
      );
    }
  });
  plugin.registeredCommandIdsRT.push(id4.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian16.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  moduloGTD: true,
  moduloTabTitle: true,
  // Modulo titulo de pestañas.
  moduloTaskManager: true,
  moduloDataviewQueries: true,
  taskExecutionNavigatorModule: true,
  // Activado por defecto
  taskNavigatorModule: true,
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_RepositorioLibros: "Subsistemas/Libros/Repositorio",
  indice_RepositorioLibros: "Subsistemas/Libros/Indice Repositorio Libros",
  folder_Biblioteca: "Subsistemas/Libros/Biblioteca",
  indice_Biblioteca: "Subsistemas/Libros/Indice Biblioteca",
  folder_KindleNotes: "Subsistemas/Libros/Kindle",
  indice_KindleNotes: "Subsistemas/Libros/Kindle/Indice Kindle",
  //folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  //indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Transacciones: "Subsistemas/Transacciones",
  indice_Transacciones: "Subsistemas/Transacciones/Indice Transacciones",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  folder_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Contenido",
  indice_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Indice Contenido para Estudio",
  folder_Campa\u00F1a: "Subsistemas/Marketing/Proyectos",
  indice_Campa\u00F1a: "Subsistemas/Marketing/Indice Campa\xF1as",
  folder_Entregable: "Subsistemas/Marketing/Entregables",
  indice_Entregable: "Subsistemas/Marketing/Indice Entregables",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes",
  folder_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_ProyectosQ: "Estructura/Proyectos de Q",
  indice_ProyectosQ: "Estructura/Proyectos de Q/Indice Proyectos de Q",
  file_Inbox: "Estructura/GTD/Bandeja de Entrada/Bandeja de Entrada",
  folder_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Estructura/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Estructura/GTD/Revision Semanal/Indice Revision Semanal",
  folder_SistemaGTD: "Estructura/GTD/Sistema GTD/Sistema",
  indice_SistemaGTD: "Estructura/GTD/Sistema GTD/Indice Sistema GTD",
  // Journal
  folder_Diario: "Estructura/Journal/Diario/Notas",
  indice_Diario: "Estructura/Journal/Diario/Indice Diario",
  folder_Semanal: "Estructura/Journal/Semanal/Notas",
  indice_Semanal: "Estructura/Journal/Semanal/Indice Semanal",
  folder_Mensual: "Estructura/Journal/Mensual/Notas",
  indice_Mensual: "Estructura/Journal/Mensual/Indice Mensual",
  folder_Trimestral: "Estructura/Journal/Trimestral/Notas",
  indice_Trimestral: "Estructura/Journal/Trimestral/Indice Trimestral",
  folder_Anual: "Estructura/Journal/Anual/Notas",
  indice_Anual: "Estructura/Journal/Anual/Indice Anual",
  // COMPASS
  folder_CompassAnual: "Estructura/Compass/Reportes/Anual",
  indice_CompassAnual: "Estructura/Compass/Reportes/Indice Compass Anual",
  folder_CompassTrimestral: "Estructura/Compass/Reportes/Trimestral",
  indice_CompassTrimestral: "Estructura/Compass/Reportes/Indice Compass trimestral",
  folder_ObjCompassAnual: "Estructura/Compass/Objetivos/Anual",
  indice_ObjCompassAnual: "Estructura/Compass/Objetivos/Indice Compass Anual",
  folder_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Trimestral",
  indice_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Indice Compass trimestral",
  // Registros Personales
  folder_Agradecimientos: "Registros Personales/Agradecimientos/Notas",
  indice_Agradecimientos: "Registros Personales/Agradecimientos/Indice Agradecimientos",
  folder_Reflexiones: "Registros Personales/Reflexiones/Notas",
  indice_Reflexiones: "Registros Personales/Reflexiones/Indice Reflexiones",
  folder_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Notas",
  indice_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Indice Registros Akashikos"
};

// src/main.ts
init_registroTiempoAPI();

// src/modules/noteLifecycleManager/API/starterAPI.ts
var import_obsidian50 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var import_obsidian28 = require("obsidian");

// src/modules/noteLifecycleManager/FieldHandlerUtils.ts
var import_obsidian26 = require("obsidian");
init_luxon();
var FieldHandlerUtils = class {
  static async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian26.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  // Esta función sale de menuOtro, de registro Tiempo. Revisar si debo sincronizarlas.
  static async findMainFilesWithState(tipo, parametro, plugin) {
    var _a, _b, _c;
    const propertiesTipo = {
      AV: {
        folder: plugin.settings.folder_AreasVida
      },
      AI: {
        folder: plugin.settings.folder_AreasInteres
      },
      PQ: {
        folder: plugin.settings.folder_ProyectosQ
      },
      PGTD: {
        folder: plugin.settings.folder_ProyectosGTD
      },
      TI: {
        folder: plugin.settings.folder_TemasInteres
      },
      RR: {
        folder: plugin.settings.folder_RecursosRecurrentes
      },
      TQ: {
        folder: plugin.settings.folder_Trimestral
      },
      AY: {
        folder: plugin.settings.folder_Anual
      }
      // Puedes continuar añadiendo más casos aquí
    };
    if (!propertiesTipo[tipo]) {
      throw new Error(`Tipo ${tipo} no es v\xE1lido.`);
    }
    const activeFilesWithFrontmatter = [];
    let files, trimestre;
    const folder = propertiesTipo[tipo].folder;
    switch (tipo) {
      case "AV":
        if (!parametro) {
          trimestre = DateTime.now().toFormat("yyyy-Qq");
        } else {
          trimestre = parametro;
        }
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo") && file.name.startsWith(trimestre));
        for (let file of files) {
          let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      case "AI":
      case "TQ":
      case "AY":
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      default:
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_c = app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
    }
    return activeFilesWithFrontmatter;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandlerBase.ts
var import_obsidian27 = require("obsidian");
var NoteFieldHandlerBase = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.plugin = plugin;
    this.nota = {};
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    return maxId + 1;
  }
  async getFecha() {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);
    const currentDay = (/* @__PURE__ */ new Date()).toLocaleDateString("es-ES", { weekday: "long" });
    const formattedDate = `${currentDate} ${currentDay}`;
    this.nota.fecha = formattedDate;
    return formattedDate;
  }
  async getAliases() {
    const id = await this.getId();
    return [`${this.infoSubsistema.typeName} ${id}`];
  }
  async getRename() {
    const fecha = this.nota.fecha;
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.typeName} ${fecha}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian27.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian27.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian27.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var AgradecimientosFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Agradecimiento")) {
      fecha = title.split("Agradecimiento ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es el agradecimiento??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getAgradecimientos() {
    let agradecimientos = [];
    let numAgradecimientos = 0;
    let otra;
    do {
      const agradecimiento = await this.prompt("\xBFDe qu\xE9 est\xE1s agradecido?", `Gracias por ${numAgradecimientos}`, false, true);
      agradecimientos.push(agradecimiento);
      numAgradecimientos += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro agradecimiento?");
    } while (otra);
    return agradecimientos;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/ReflexionesFieldHandlers.ts
var import_obsidian29 = require("obsidian");
var ReflexionesFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Reflexion")) {
      fecha = title.split("Reflexion ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es la reflexi\xF3n??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getReflexion() {
    let reflexiones = [];
    let numReflexiones = 0;
    let otra;
    do {
      const reflexion = await this.prompt("Que estas pensando?", `P${numReflexiones}`, false, true);
      reflexiones.push(reflexion);
      numReflexiones += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro p\xE1rrafo?");
    } while (otra);
    return reflexiones;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandler.ts
var import_obsidian30 = require("obsidian");
init_luxon();
var NoteFieldHandler = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.nota = {};
    this.plugin = plugin;
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    this.nota.id = maxId + 1;
    return this.nota.id;
  }
  async getFecha() {
    let fechaActual = DateTime.now();
    fechaActual = fechaActual.setLocale("es");
    fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
    this.nota.fecha = fechaActual;
    return fechaActual;
  }
  async getTitulo() {
    const title = await this.prompt(`T\xEDtulo de ${this.infoSubsistema.typeName}:`, "", false, false);
    this.nota.titulo = title;
    return title;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
      let titulo, nivel;
      let padrePGTD = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        let notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian30.Notice("Sin proyecto GTD definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.proyectoQ = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoQ)) {
            this.nota.proyectoQ = notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoQ) {
            this.nota.proyectoQ = [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getProyectoQ() {
    let notaF, titulo, nivel;
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PQ", null, this.plugin);
      let padreQ = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto Q?`);
      if (padreQ) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto Q es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian30.Notice("Sin proyecto Q definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          titulo = [notaF == null ? void 0 : notaF.titulo];
          this.nota.proyectoGTD = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            this.nota.proyectoGTD = notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            this.nota.proyectoGTD = [notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoQ;
    }
  }
  async getAreaInteres() {
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Inter\xE9s:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `\xBFQu\xE9 \xC1rea de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian30.Notice("Sin \xC1rea de Inter\xE9s");
          titulo = [];
          nivel = 0;
          return;
        } else {
          titulo = [areaInteres.titulo];
          if (Array.isArray(areaInteres == null ? void 0 : areaInteres.areaInteres)) {
            titulo = titulo.concat(areaInteres.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (areaInteres == null ? void 0 : areaInteres.areaInteres) {
            titulo.push(areaInteres.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          if (areaInteres == null ? void 0 : areaInteres.areaVida) {
            if (Array.isArray(areaInteres.areaVida)) {
              this.nota.areaVida = areaInteres.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof areaInteres.areaVida === "string") {
              this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.asuntoDefinido = true;
          nivel = parseInt(areaInteres.nivelAI);
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
  async getAreaVida() {
    let areasVida = {};
    let noAV = {
      file: {
        basename: "No es de ning\xFAn Area de Vida"
      },
      areaVida: "No es de ning\xFAn Area de Vida"
    };
    if (!this.nota.asuntoDefinido) {
      let padreAV = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Vida?`);
      if (padreAV) {
        areasVida = await FieldHandlerUtils.findMainFilesWithState("AV", null, this.plugin);
        areasVida.push(noAV);
        this.nota.areaVida = await this.suggester(areasVida.map((b) => b.file.basename), areasVida.map((b) => b.file.basename), false, `\xBFA qu\xE9 \xC1rea de Vida pertenece $${this.nota.titulo}?:`);
      } else {
        this.nota.areaVida = "No es de ning\xFAn Area de Vida";
      }
      return this.nota.areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  // Actualización del método getRename en NoteFieldHandlerBase.ts
  // (Este es el método que se utilizará en la mayoría de las clases de manejo de notas)
  async getRename() {
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian30.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian30.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
            if (nuevoArchivo instanceof import_obsidian30.TFile) {
              await app.workspace.getLeaf(true).openFile(nuevoArchivo);
            }
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian30.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
          if (nuevoArchivo instanceof import_obsidian30.TFile) {
            await app.workspace.getLeaf(true).openFile(nuevoArchivo);
          }
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/CPEFieldHandler.ts
var ContenidoParaEstudioFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/RRFieldHandler.ts
var RecursosRecurrentesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PGTDFieldHandler.ts
var import_obsidian31 = require("obsidian");
var PGTDFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian31.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian31.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian31.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian31.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian31.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian31.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PQFieldHandler.ts
var import_obsidian32 = require("obsidian");
var PQFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian32.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian32.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian32.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    let folderAV = Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida;
    newName = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian32.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian32.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian32.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    switch (tipoSistema) {
      case "AV":
      case "PQ":
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
        break;
      case "OCA":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
        );
        break;
      case "CTI":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFDe qu\xE9 trimestre del ${this.nota.a\u00F1o} es esta planeaci\xF3n?`
        );
        break;
      default:
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.path), false, `Trimestre del ${nombreSistema}:`);
    }
    if (trimestre === null) {
      new import_obsidian32.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AnotacionesFieldHandler.ts
var import_obsidian33 = require("obsidian");
var AnotacionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getClasificacion() {
    var _a;
    let clasificacion2 = null;
    let tagClasificacion2 = null;
    let clasificacionAX = {};
    let tagsClasificacionAX = [];
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    if (!file) {
      new import_obsidian33.Notice("Archivo no encontrado.");
      return;
    }
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      const suggester = this.tp.system.static_functions.get("suggester");
      tagClasificacion2 = await suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 === "Nuevo") {
        const prompt = this.tp.system.static_functions.get("prompt");
        clasificacion2 = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 === "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        const indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          const newClasificacion = [...clasificacionAX, clasificacion2];
          const newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 !== "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/TransaccionesFieldHandler.ts
var import_obsidian34 = require("obsidian");
var TransaccionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getFecha() {
    let fecha;
    let fechaOriginal = await this.prompt(`Confirma la fecha de la transacci\xF3n: `, `${moment().format("YYYY-MM-DD HH:mm")}`, true);
    let fechaMoment = moment(fechaOriginal, "YYYY-MM-DD HH:mm");
    fecha = fechaMoment.format("YYYY-MM-DD dddd HH:mm");
    this.nota.fecha = fecha;
    return fecha;
  }
  async getRename() {
    debugger;
    let fecha = moment(this.nota.fecha, "YYYY-MM-DD dddd HH:mm");
    let fechaY = fecha.format("YYYY");
    let fechaMes = fecha.format("MM - MMMM");
    const newName = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    const folder = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian34.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian34.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian34.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreasInteresFieldHandler.ts
var import_obsidian35 = require("obsidian");
var AreasInteresFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e;
    let tipoSistema = this.infoSubsistema.type;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      let nivel;
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        this.nota.asuntoDefinido = true;
        if (((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) === "AI") {
          this.nota.areaInteres = [nota.frontmatter.file.basename];
          if (Array.isArray(nota.frontmatter.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
        }
        if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          this.nota.areaVida = "No es de ning\xFAn Area de Vida";
        }
        if (((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.type) === "AI" || ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.type) === "AV") {
          siAsunto = false;
        }
        if (!isNaN(parseInt((_e = nota.frontmatter) == null ? void 0 : _e.nivelAI))) {
          nivel = parseInt(nota.frontmatter.nivelAI) + 1;
        } else {
          nivel = 0;
        }
        this.nota.nivelAI = nivel;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    debugger;
    if (this.nota.areaVida != "No es de ning\xFAn Area de Vida") {
      this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.areaVida}/${this.nota.titulo}`);
    }
    return this.nota.aliases;
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian35.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian35.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian35.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getAreaInteres() {
    let nombreTipo = this.infoSubsistema.typeName;
    let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de otra ${nombreTipo}:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian35.Notice("Sin Area de Interes");
          titulo = "";
          nivel = 0;
          return;
        } else {
          this.nota.asuntoDefinido = true;
          if (areaInteres.areaVida === null) {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          } else {
            debugger;
            this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          titulo = areaInteres.titulo;
          nivel = parseInt(areaInteres.nivelAI) + 1;
        }
      } else {
        titulo = "";
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreaVidaFieldHandler.ts
var import_obsidian36 = require("obsidian");
var AreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getArea() {
    let area, grupo;
    let tipoArea = this.infoSubsistema.typeName;
    let nuevaArea = false;
    let areasGrupos = this.getDuplasFijas(app, tipoArea);
    let areaGrupo = await this.suggester(areasGrupos.map((b) => b.texto), areasGrupos.map((b) => b.texto), false, `\xBFCu\xE1l ${tipoArea} deseas crear?`);
    if (areaGrupo === null) {
      new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    } else if (areaGrupo == "Nuevo") {
      clasificacion = await this.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
      if (clasificacion === null) {
        new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      tagClasificacion = await this.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
      if (tagClasificacion === null) {
        new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      nuevaClasificacion = true;
    } else {
      let indice = areasGrupos.findIndex((objeto) => objeto.texto === areaGrupo);
      grupo = areasGrupos[indice].grupo;
      area = areasGrupos[indice].area;
      this.nota.grupo = grupo;
      this.nota.titulo = area;
      return { grupo, titulo: area };
    }
  }
  getDuplasFijas(app2, area) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian36.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[area]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], area: item[1], texto: item[0] + "/" + item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFilename() {
    let fileName;
    if (this.infoSubsistema.hasOwnProperty("fileName")) {
      const partes = this.infoSubsistema.fileName.split(" -- ");
      this.nota.trimestre = partes[0];
      this.nota.titulo = partes[1];
      this.nota.areaVida = partes[1];
      this.nota.grupo = partes[2];
    }
    fileName = `${this.nota.trimestre} - ${this.nota.titulo}`;
    this.nota.filename = fileName;
    return fileName;
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
    if (trimestre === null) {
      new import_obsidian36.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getNota() {
    return this.nota;
  }
  async getRename() {
    debugger;
    let newName, name, folder;
    newName = `${this.infoSubsistema.folder}/${this.nota.titulo}/${this.nota.filename}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.titulo}/`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    debugger;
    try {
      if (existe instanceof import_obsidian36.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian36.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian36.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.grupo}/${this.nota.trimestre}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/nodoAreaVidaFieldHandler.ts
var import_obsidian37 = require("obsidian");
var nodoAreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    let registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id) && metadata.type && metadata.type === this.infoSubsistema.type) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
  }
  async getRename() {
    debugger;
    const file = this.tp.file.config.target_file;
    const partes = file.basename.split(" - ");
    this.nota.grupo = partes[0];
    this.nota.areaVida = partes[1];
    const fullPath = file.path;
    const directoryPath = fullPath.substring(0, fullPath.lastIndexOf("/") + 1);
    const fileName = `${directoryPath}${partes[1]}.md`;
    debugger;
    let newName, folder;
    const existe = app.vault.getAbstractFileByPath(fileName);
    debugger;
    try {
      if (existe instanceof import_obsidian37.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian37.TFile) {
            await app.vault.rename(file, fileName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian37.TFile) {
          await app.vault.rename(file, fileName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/ObjCompassAnualFieldHandler.ts
var import_obsidian38 = require("obsidian");
var ObjCompassAnualFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getEstado() {
    return "\u{1F7E1}";
  }
  async getAreaVida() {
    let areaVida;
    if (!this.nota.asuntoDefinido) {
      let nombreArchivo = this.infoSubsistema.fileName;
      const regex = /Objetivo para (.+)\.md$/;
      const resultado = nombreArchivo.match(regex);
      if (resultado && resultado[1]) {
        areaVida = resultado[1];
      } else {
        return null;
      }
      this.nota.areaVida = areaVida;
      return areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getTitulo() {
    let titulo;
    titulo = await this.prompt(`Cual es tu objetivo en ${this.nota.a\u00F1o} para ${this.nota.areaVida}?`, `Voy a `, true, true);
    if (titulo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getA\u00F1o() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    let nombreArchivo = this.infoSubsistema.fileName;
    const regex = /\/(\d{4})/;
    const resultado = nombreArchivo.match(regex);
    if (resultado && resultado[1]) {
      a\u00F1o = resultado[1];
    } else {
      return null;
    }
    if (a\u00F1o === null) {
      new Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFQuieres agregar detalles de tu objetivo?`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getTrimestre() {
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(
      ["Q1", "Q2", "Q3", "Q4"],
      [
        `${this.nota.a\u00F1o}-Q1`,
        `${this.nota.a\u00F1o}-Q2`,
        `${this.nota.a\u00F1o}-Q3`,
        `${this.nota.a\u00F1o}-Q4`
      ],
      true,
      `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
    );
    if (trimestre === null) {
      new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.areaVida}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian38.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian38.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian38.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/CompassPlaneacionAnual_FH.ts
var import_obsidian39 = require("obsidian");
var CompassPlaneacionAnual_FH = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getA\u00F1o() {
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    a\u00F1o = await this.suggester(a\u00F1os.map((b) => b.file.basename), a\u00F1os.map((b) => b.file.basename), false, `Selecciona el a\xF1o que deseas para el ${nombreSistema}:`);
    if (a\u00F1o === null) {
      new import_obsidian39.Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getNota() {
    return this.nota;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.a\u00F1o}`);
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.id}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Planeaci\xF3n ${this.nota.a\u00F1o}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian39.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian39.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian39.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/RepositorioLibros_FH.ts
var import_obsidian40 = require("obsidian");
var RepositorioLibros_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFPorque est\xE1s agregando este libro?:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    let estado;
    estado = await this.suggester(["\u{1F535} -> Para Archivo - Leido", "\u{1F7E2} -> En Lectura - Comprado", "\u{1F7E1} -> Por Adquirir", "\u{1F534} -> Cancelado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `En que estado est\xE1 este libro?`);
    if (estado === null) {
      new import_obsidian40.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return estado;
  }
  async getTitulo() {
    const titulo = this.infoSubsistema.titulo;
    this.nota.titulo = titulo;
    return titulo;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = this.infoSubsistema.activo;
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/Biblioteca_FH.ts
var import_obsidian41 = require("obsidian");
var Biblioteca_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getParametrosLibro() {
    let archivoActivo = app.workspace.getActiveFile();
    if (!archivoActivo) {
      console.error("No se pudo obtener el archivo activo.");
      return null;
    }
    debugger;
    const campos = ["id", "titulo", "autor", "publisher", "publicado", "paginas", "isbn10", "isbn13"];
    let parametros = {};
    for (let campo of campos) {
      let valorCampo = await this.getFrontmatterField(archivoActivo.path, campo);
      this.nota[campo] = valorCampo;
      parametros[campo] = valorCampo;
    }
    return parametros;
  }
  async getFrontmatterField(file, field) {
    try {
      const tFile = app.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian41.TFile) {
        const cache = app.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          return fieldValue !== void 0 && fieldValue !== null && fieldValue !== "" ? fieldValue : null;
        } else {
          console.log(`El campo '${field}' no existe en el frontmatter.`);
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  async getFormato() {
    let campo;
    campo = await this.suggester(["Kindle", "Google Books", "PDF", "F\xEDsico"], ["Kindle", "Google Books", "PDF", "F\xEDsico"], false, `\xBFComo tienes este libro?`);
    if (campo === null) {
      new import_obsidian41.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return campo;
  }
  async getPaginas() {
    let campo, paginas;
    campo = await this.suggester(["Si", "No"], [true, false], false, `\xBFEl libro tiene ${this.nota.paginas} p\xE1ginas?`);
    if (campo === null) {
      new import_obsidian41.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    } else if (campo === false) {
      paginas = await this.prompt(`Cuantas p\xE1ginas tiene el libro?`, "", false, false);
      this.nota.paginas = paginas;
      return paginas;
    }
    return this.nota.paginas;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = true;
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/Anual_FH.ts
var import_obsidian42 = require("obsidian");
init_luxon();
var Anual_FH = class extends NoteFieldHandlerBase {
  constructor(tp, infoSubsistema, plugin) {
    super(tp, infoSubsistema, plugin);
  }
  /**
   * Genera un UUID para el ID de la nota
   */
  async getId() {
    this.nota.id = this.generateUUID();
    return this.nota.id;
  }
  /**
   * Obtiene la fecha actual en formato ISO
   */
  async getFecha() {
    this.nota.fecha = DateTime.now().toISODate();
    return this.nota.fecha;
  }
  /**
   * Permite seleccionar el año para la nota anual
   * Muestra años disponibles (no ocupados) en un rango de -3 a +3 del año actual
   */
  async getA\u00F1o() {
    const currentYear = DateTime.now().year;
    const years = Array.from({ length: 7 }, (_, i) => currentYear - 3 + i);
    const existingYears = await this.getExistingYears();
    const availableYears = years.filter((year2) => !existingYears.includes(year2.toString()));
    if (availableYears.length === 0) {
      new import_obsidian42.Notice("No hay a\xF1os disponibles en el rango seleccionado.");
      throw new Error("No hay a\xF1os disponibles");
    }
    const year = await this.suggester(
      availableYears.map(String),
      availableYears.map(String),
      false,
      "Selecciona el a\xF1o:"
    );
    if (year === null) {
      new import_obsidian42.Notice("Selecci\xF3n de a\xF1o cancelada por el usuario.");
      throw new Error("Selecci\xF3n cancelada");
    }
    this.nota.a\u00F1o = year;
    return year;
  }
  /**
   * Establece el estado inicial como activo
   */
  async getEstado() {
    this.nota.estado = "\u{1F7E2}";
    return this.nota.estado;
  }
  /**
   * Renombra el archivo según el año seleccionado
   */
  async getRename() {
    await this.crearCarpeta(this.infoSubsistema.folder);
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}.md`;
    const file = this.tp.file.config.target_file;
    const exists = app.vault.getAbstractFileByPath(newName);
    if (exists instanceof import_obsidian42.TFile) {
      const overwrite = await this.suggester(
        ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
        [true, false],
        true,
        `El archivo ${newName} ya existe. \xBFQu\xE9 deseas hacer?`
      );
      if (overwrite) {
        await app.vault.delete(exists);
        if (file instanceof import_obsidian42.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
          if (nuevoArchivo instanceof import_obsidian42.TFile) {
            await app.workspace.getLeaf(true).openFile(nuevoArchivo);
          }
          return true;
        }
      } else {
        console.log("Cancelando la creaci\xF3n del archivo.");
        throw new Error("Proceso cancelado por el usuario.");
      }
    } else {
      if (file instanceof import_obsidian42.TFile) {
        await app.vault.rename(file, newName);
        console.log("Archivo renombrado con \xE9xito.");
        const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
        if (nuevoArchivo instanceof import_obsidian42.TFile) {
          await app.workspace.getLeaf(true).openFile(nuevoArchivo);
        }
        return true;
      }
    }
  }
  /**
   * Retorna el objeto nota completo
   */
  async getNota() {
    return this.nota;
  }
  /**
   * Genera un UUID único para la nota
   */
  generateUUID() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
      const r = Math.random() * 16 | 0;
      const v = c === "x" ? r : r & 3 | 8;
      return v.toString(16);
    });
  }
  /**
   * Obtiene los años que ya tienen notas anuales
   */
  async getExistingYears() {
    const files = app.vault.getMarkdownFiles();
    const yearFiles = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    const years = yearFiles.map((file) => file.basename);
    return years;
  }
  /**
   * Crea la carpeta si no existe
   */
  async crearCarpeta(folderPath) {
    try {
      const existingFolder = app.vault.getAbstractFileByPath(folderPath);
      if (existingFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/TrimestralFieldHandler.ts
var import_obsidian43 = require("obsidian");
init_luxon();
var TrimestralFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, infoSubsistema, plugin) {
    super(tp, infoSubsistema, plugin);
  }
  /**
   * Genera un UUID para el ID de la nota
   */
  async getId() {
    this.nota.id = this.generateUUID();
    return this.nota.id;
  }
  /**
   * Obtiene la fecha actual en formato ISO
   */
  async getFecha() {
    this.nota.fecha = DateTime.now().toISODate();
    return this.nota.fecha;
  }
  /**
   * Permite seleccionar el trimestre para la nota
   * Muestra solo los trimestres disponibles (no utilizados)
   */
  async getTrimestre() {
    const trimestres = ["Q1", "Q2", "Q3", "Q4"];
    const existingTrimestres = await this.getExistingTrimestres();
    const availableTrimestres = trimestres.filter((q) => !existingTrimestres.includes(q));
    if (availableTrimestres.length === 0) {
      new import_obsidian43.Notice("Todos los trimestres ya han sido creados en esta carpeta.");
      throw new Error("No hay trimestres disponibles");
    }
    const trimestre = await this.suggester(
      availableTrimestres,
      availableTrimestres,
      false,
      "Selecciona el trimestre:"
    );
    if (trimestre === null) {
      new import_obsidian43.Notice("Selecci\xF3n de trimestre cancelada por el usuario.");
      throw new Error("Selecci\xF3n cancelada");
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  /**
   * Establece el estado inicial como activo
   */
  async getEstado() {
    this.nota.estado = "\u{1F7E2}";
    return this.nota.estado;
  }
  /**
   * Renombra el archivo según el trimestre seleccionado
   */
  async getRename() {
    await this.crearCarpeta(this.infoSubsistema.folder);
    const newName = `${this.infoSubsistema.folder}/${this.nota.trimestre}.md`;
    const file = this.tp.file.config.target_file;
    const exists = app.vault.getAbstractFileByPath(newName);
    if (exists instanceof import_obsidian43.TFile) {
      const overwrite = await this.suggester(
        ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
        [true, false],
        true,
        `El archivo ${newName} ya existe. \xBFQu\xE9 deseas hacer?`
      );
      if (overwrite) {
        await app.vault.delete(exists);
        if (file instanceof import_obsidian43.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
          if (nuevoArchivo instanceof import_obsidian43.TFile) {
            await app.workspace.getLeaf(true).openFile(nuevoArchivo);
          }
          return true;
        }
      } else {
        console.log("Cancelando la creaci\xF3n del archivo.");
        throw new Error("Proceso cancelado por el usuario.");
      }
    } else {
      if (file instanceof import_obsidian43.TFile) {
        await app.vault.rename(file, newName);
        console.log("Archivo renombrado con \xE9xito.");
        const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
        if (nuevoArchivo instanceof import_obsidian43.TFile) {
          await app.workspace.getLeaf(true).openFile(nuevoArchivo);
        }
        return true;
      }
    }
  }
  /**
   * Retorna el objeto nota completo
   */
  async getNota() {
    return this.nota;
  }
  /**
   * Genera un UUID único para la nota
   */
  generateUUID() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(c) {
      const r = Math.random() * 16 | 0;
      const v = c === "x" ? r : r & 3 | 8;
      return v.toString(16);
    });
  }
  /**
   * Obtiene los trimestres que ya tienen notas trimestrales
   */
  async getExistingTrimestres() {
    const files = app.vault.getMarkdownFiles();
    const trimestreFiles = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    const trimestres = trimestreFiles.map((file) => file.basename);
    return trimestres;
  }
  /**
   * Crea la carpeta si no existe
   */
  async crearCarpeta(folderPath) {
    try {
      const existingFolder = app.vault.getAbstractFileByPath(folderPath);
      if (existingFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/CampañasFieldHandler.ts
var import_obsidian44 = require("obsidian");
init_luxon();
var Campa\u00F1asFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // Obtiene el trimestre de la campaña desde las notas de trimestres existentes
  async getTrimestre() {
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    const trimestre = await this.suggester(
      trimestres.map((b) => b.file.basename),
      trimestres.map((b) => b.file.basename),
      false,
      "Trimestre al que pertenece esta campa\xF1a:"
    );
    if (trimestre === null) {
      new import_obsidian44.Notice("Selecci\xF3n de trimestre cancelada.");
      return;
    }
    this.nota.trimestre = `[[${trimestre}]]`;
    return this.nota.trimestre;
  }
  // Obtiene el estado de la campaña (status)
  async getStatus() {
    const estados = [
      "Pendiente",
      "Planificando",
      "Dise\xF1o",
      "Revisi\xF3n Interna",
      "Revisi\xF3n Cliente",
      "Publicando",
      "Recoger Indicadores",
      "En pausa",
      "Terminado",
      "Cancelado"
    ];
    const status = await this.suggester(
      estados,
      estados,
      false,
      "Estado actual de la campa\xF1a:"
    );
    if (status === null) {
      new import_obsidian44.Notice("Selecci\xF3n de estado cancelada.");
      return;
    }
    this.nota.status = status;
    return status;
  }
  // Obtiene la fecha de inicio de la campaña
  async getFechaInicio() {
    const fechaActual = DateTime.now().toFormat("yyyy-MM-dd");
    const prompt = this.tp.system.static_functions.get("prompt");
    const fechaInicio = await prompt(
      "Fecha de inicio de la campa\xF1a (YYYY-MM-DD):",
      fechaActual,
      true
    );
    if (fechaInicio === null) {
      new import_obsidian44.Notice("Selecci\xF3n de fecha de inicio cancelada.");
      return;
    }
    this.nota.fechaInicio = fechaInicio;
    return fechaInicio;
  }
  // Obtiene la fecha de fin de la campaña
  async getFechaFin() {
    const fechaInicioObj = this.nota.fechaInicio ? DateTime.fromFormat(this.nota.fechaInicio, "yyyy-MM-dd") : DateTime.now();
    const fechaSugerida = fechaInicioObj.plus({ days: 30 }).toFormat("yyyy-MM-dd");
    const prompt = this.tp.system.static_functions.get("prompt");
    const fechaFin = await prompt(
      "Fecha de fin de la campa\xF1a (YYYY-MM-DD):",
      fechaSugerida,
      true
    );
    if (fechaFin === null) {
      new import_obsidian44.Notice("Selecci\xF3n de fecha de fin cancelada.");
      return;
    }
    this.nota.fechaFin = fechaFin;
    return fechaFin;
  }
  // Obtiene la prioridad de la campaña
  async getPrioridad() {
    const prioridades = ["Baja", "Media", "Alta"];
    const prioridad = await this.suggester(
      prioridades,
      prioridades,
      false,
      "Prioridad de la campa\xF1a:"
    );
    if (prioridad === null) {
      new import_obsidian44.Notice("Selecci\xF3n de prioridad cancelada.");
      return;
    }
    this.nota.prioridad = prioridad;
    return prioridad;
  }
  // Obtiene la URL de los indicadores
  async getIndicadores() {
    const prompt = this.tp.system.static_functions.get("prompt");
    const indicadores = await prompt(
      "URL de los indicadores de la campa\xF1a:",
      "https://",
      true
    );
    if (indicadores === null) {
      new import_obsidian44.Notice("Ingreso de URL de indicadores cancelado.");
      return;
    }
    this.nota.indicadores = indicadores;
    return indicadores;
  }
  // Sobrescribe la función getAliases para ajustarla a los requerimientos específicos
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(this.nota.titulo);
    this.nota.aliases.push(`CP-${this.nota.titulo}`);
    this.nota.aliases.push(`CP-${this.nota.id}`);
    return this.nota.aliases;
  }
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  async getRename() {
    const trimestreMatch = this.nota.trimestre.match(/\[\[(.*?)\]\]/);
    const trimestre = trimestreMatch ? trimestreMatch[1] : "Sin-Trimestre";
    const basePath = "Subsistemas/Marketing/Proyectos";
    const folderPath = `${basePath}/${trimestre}`;
    await FieldHandlerUtils.crearCarpeta(folderPath);
    const newName = `${folderPath}/${this.nota.titulo}.md`;
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian44.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian44.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
            if (nuevoArchivo instanceof import_obsidian44.TFile) {
              await app.workspace.getLeaf(true).openFile(nuevoArchivo);
            }
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian44.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
          if (nuevoArchivo instanceof import_obsidian44.TFile) {
            await app.workspace.getLeaf(true).openFile(nuevoArchivo);
          }
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/EntregableFieldHandler.ts
var import_obsidian49 = require("obsidian");
init_seleccionModal();
init_seleccionModalTareas();
init_fuzzySelectOrCreate();

// src/modules/modales/seleccionMultipleModal.ts
var import_obsidian45 = require("obsidian");
var SeleccionMultipleModal = class extends import_obsidian45.Modal {
  constructor(app2, opciones, titulo) {
    super(app2);
    this.checkboxes = [];
    this.opciones = opciones;
    this.titleEl.setText(titulo);
  }
  onOpen() {
    const { contentEl } = this;
    const contenedor = contentEl.createEl("div", { cls: "seleccion-multiple-container" });
    this.opciones.forEach((opcion) => {
      const wrapper = contenedor.createEl("div", { cls: "checkbox-wrapper" });
      const checkbox = wrapper.createEl("input", {
        type: "checkbox",
        attr: { id: `opcion-${opcion.nombre}` }
      });
      checkbox.checked = opcion.seleccionado;
      this.checkboxes.push(checkbox);
      wrapper.createEl("label", {
        text: opcion.nombre,
        attr: { for: `opcion-${opcion.nombre}` }
      });
    });
    const botonesContainer = contentEl.createEl("div", { cls: "modal-button-container" });
    const seleccionarTodosBtn = botonesContainer.createEl("button", { text: "Seleccionar todos" });
    seleccionarTodosBtn.addEventListener("click", () => {
      this.checkboxes.forEach((cb) => cb.checked = true);
    });
    const deseleccionarTodosBtn = botonesContainer.createEl("button", { text: "Deseleccionar todos" });
    deseleccionarTodosBtn.addEventListener("click", () => {
      this.checkboxes.forEach((cb) => cb.checked = false);
    });
    const confirmarBtn = contentEl.createEl("button", {
      text: "Confirmar",
      cls: "mod-cta"
    });
    confirmarBtn.addEventListener("click", () => {
      this.confirmarSeleccion();
    });
    contentEl.createEl("style", {
      text: `
                .seleccion-multiple-container {
                    margin-bottom: 1rem;
                    max-height: 300px;
                    overflow-y: auto;
                    padding: 10px;
                }
                .checkbox-wrapper {
                    display: flex;
                    align-items: center;
                    margin-bottom: 8px;
                }
                .checkbox-wrapper label {
                    margin-left: 8px;
                }
                .modal-button-container {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 1rem;
                }
                button.mod-cta {
                    display: block;
                    width: 100%;
                    margin-top: 1rem;
                }
            `
    });
  }
  confirmarSeleccion() {
    const seleccionados = [];
    this.checkboxes.forEach((checkbox, index) => {
      if (checkbox.checked) {
        seleccionados.push(this.opciones[index].nombre);
      }
    });
    if (seleccionados.length === 0) {
      new import_obsidian45.Notice("Debes seleccionar al menos un canal");
      return;
    }
    this.close();
    this.resolver(seleccionados);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/modales/spinnerModal.ts
var import_obsidian46 = require("obsidian");
var SpinnerModal = class extends import_obsidian46.Modal {
  constructor(app2, initialValue = 1, max = 100) {
    super(app2);
    this.resolver = null;
    this.numberDisplay = null;
    const min = 1;
    this.initialValue = Math.max(min, Math.min(max, initialValue));
    this.currentValue = this.initialValue;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("number-selector-modal");
    const container = contentEl.createDiv({ cls: "number-selector-container" });
    container.createEl("h2", { text: "\xBFCu\xE1ntos Hits representa este entregable?" });
    const controlsContainer = container.createDiv({ cls: "controls-container" });
    const decrementBtn = controlsContainer.createEl("button", {
      text: "\u25B2",
      cls: "increment-btn"
    });
    decrementBtn.addEventListener("click", () => this.changeValue(1));
    this.numberDisplay = controlsContainer.createEl("div", {
      text: this.currentValue.toString(),
      cls: "number-display"
    });
    const incrementBtn = controlsContainer.createEl("button", {
      text: "\u25BC",
      cls: "decrement-btn"
    });
    incrementBtn.addEventListener("click", () => this.changeValue(-1));
    const confirmBtn = container.createEl("button", {
      text: "Confirmar",
      cls: "confirm-btn"
    });
    confirmBtn.addEventListener("click", () => this.confirm());
    const cancelBtn = container.createEl("button", {
      text: "Cancelar",
      cls: "cancel-btn"
    });
    cancelBtn.addEventListener("click", () => this.cancel());
    const styleEl = document.createElement("style");
    styleEl.innerHTML = `
            .number-selector-modal {
                text-align: center;
                padding: 20px;
            }
            .number-selector-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            .controls-container {
                display: flex;
                align-items: center;
                gap: 15px;
            }
            .number-display {
                font-size: 24px;
                font-weight: bold;
                width: 50px;
                text-align: center;
            }
            .increment-btn, .decrement-btn {
                background: none;
                border: 1px solid #ccc;
                padding: 5px 10px;
                cursor: pointer;
            }
            .confirm-btn, .cancel-btn {
                margin: 0 10px;
                padding: 10px 15px;
                cursor: pointer;
            }
        `;
    document.head.appendChild(styleEl);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolver && this.currentValue === null) {
      this.resolver(null);
    }
  }
  changeValue(direction) {
    if (!this.numberDisplay)
      return;
    let newValue = this.currentValue;
    if (direction > 0) {
      if (newValue < 1) {
        if (newValue === 0.33) {
          newValue = 0.5;
        } else if (newValue === 0.5) {
          newValue = 1;
        }
      } else {
        newValue = newValue + 1;
      }
    } else if (direction < 0) {
      if (newValue > 1) {
        newValue = newValue - 1;
      } else if (newValue === 1) {
        newValue = 0.5;
      } else if (newValue === 0.5) {
        newValue = 0.33;
      } else {
        newValue = 0.33;
      }
    }
    this.currentValue = newValue;
    this.numberDisplay.textContent = newValue.toString();
  }
  confirm() {
    if (this.resolver) {
      this.resolver(this.currentValue);
    }
    this.close();
  }
  cancel() {
    if (this.resolver) {
      this.resolver(null);
    }
    this.close();
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/modales/datePickerModal.ts
var import_obsidian47 = require("obsidian");
init_luxon();
var DatePickerModal = class extends import_obsidian47.Modal {
  constructor(app2, initialDate, format = "yyyy-MM-dd") {
    super(app2);
    this.format = format;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Que d\xEDa se va a publicar la pieza?" });
    this.dateInput = contentEl.createEl("input", { type: "date" });
    if (this.initialDate) {
      const date = DateTime.fromFormat(this.initialDate, this.format);
      this.dateInput.value = date.toISODate();
    } else {
      this.dateInput.value = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    }
    const buttonContainer = contentEl.createEl("div", { cls: "button-container" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancelar" });
    cancelButton.addEventListener("click", () => {
      this.close();
      this.resolver(null);
    });
    const confirmButton = buttonContainer.createEl("button", { text: "Confirmar" });
    confirmButton.addEventListener("click", () => {
      const selectedDate = this.dateInput.value;
      const formattedDate = DateTime.fromISO(selectedDate).toFormat(this.format);
      this.close();
      this.resolver(formattedDate);
    });
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/modales/pedidosClienteModal.ts
var import_obsidian48 = require("obsidian");
var PedidosClienteModal = class extends import_obsidian48.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("pedidos-cliente-modal");
    this.titleEl.setText("Pedidos al cliente");
    const container = contentEl.createDiv({ cls: "pedidos-cliente-container" });
    container.createEl("h3", { text: "\xBFHay algo que se deba pedir al cliente?" });
    this.textarea = container.createEl("textarea", {
      attr: {
        rows: "6",
        placeholder: "Escribe aqu\xED tus pedidos al cliente..."
      }
    });
    const checkboxContainer = container.createEl("div", { cls: "custom-checkbox-container" });
    this.checkbox = checkboxContainer.createEl("input", {
      attr: {
        type: "checkbox",
        id: "pendientes-checkbox",
        class: "hidden-checkbox"
      }
    });
    const customCheckbox = checkboxContainer.createEl("div", {
      cls: "custom-checkbox"
    });
    const checkboxLabel = checkboxContainer.createEl("label", {
      text: "Marcar como pendiente del cliente",
      attr: {
        for: "pendientes-checkbox",
        class: "checkbox-label"
      }
    });
    this.textarea.addEventListener("input", () => {
      if (this.textarea.value.trim() !== "") {
        this.checkbox.checked = true;
        customCheckbox.classList.add("checked");
      } else {
        this.checkbox.checked = false;
        customCheckbox.classList.remove("checked");
      }
    });
    customCheckbox.addEventListener("click", () => {
      this.checkbox.checked = !this.checkbox.checked;
      if (this.checkbox.checked) {
        customCheckbox.classList.add("checked");
      } else {
        customCheckbox.classList.remove("checked");
      }
    });
    checkboxLabel.addEventListener("click", () => {
      this.checkbox.checked = !this.checkbox.checked;
      if (this.checkbox.checked) {
        customCheckbox.classList.add("checked");
      } else {
        customCheckbox.classList.remove("checked");
      }
    });
    const buttonContainer = container.createEl("div", { cls: "button-container" });
    const cancelarBtn = buttonContainer.createEl("button", {
      text: "Cancelar",
      cls: "mod-secondary"
    });
    cancelarBtn.addEventListener("click", () => this.cancel());
    const confirmarBtn = buttonContainer.createEl("button", {
      text: "Confirmar",
      cls: "mod-cta"
    });
    confirmarBtn.addEventListener("click", () => this.confirm());
    contentEl.createEl("style", {
      text: `
                .pedidos-cliente-modal .pedidos-cliente-container {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                    padding: 16px;
                    width: 100%;
                    box-sizing: border-box;
                }
                
                .pedidos-cliente-modal h3 {
                    font-size: 16px;
                    margin: 0 0 8px 0;
                    font-weight: 500;
                }
                
                .pedidos-cliente-modal textarea {
                    width: 100%;
                    min-height: 120px;
                    resize: vertical;
                    padding: 8px;
                    font-size: 14px;
                    line-height: 1.4;
                    border-radius: 4px;
                    margin-bottom: 8px;
                }
                
                /* Estilo para el contenedor del checkbox personalizado */
                .pedidos-cliente-modal .custom-checkbox-container {
                    display: flex;
                    align-items: center;
                    padding: 4px 0;
                    margin-bottom: 8px;
                    cursor: pointer;
                }
                
                /* Ocultar el checkbox real */
                .pedidos-cliente-modal .hidden-checkbox {
                    position: absolute;
                    opacity: 0;
                    cursor: pointer;
                    height: 0;
                    width: 0;
                }
                
                /* Crear un checkbox personalizado */
                .pedidos-cliente-modal .custom-checkbox {
                    width: 18px;
                    height: 18px;
                    border: 1px solid #888;
                    border-radius: 3px;
                    margin-right: 10px;
                    position: relative;
                    flex-shrink: 0;
                    background-color: var(--background-primary, #fff);
                }
                
                /* Estilo para cuando est\xE1 marcado - crear una X */
                .pedidos-cliente-modal .custom-checkbox.checked::before,
                .pedidos-cliente-modal .custom-checkbox.checked::after {
                    content: '';
                    position: absolute;
                    width: 3px;
                    height: 12px;
                    background-color: var(--text-normal, #333);
                    top: 2px;
                }
                
                .pedidos-cliente-modal .custom-checkbox.checked::before {
                    left: 9px;
                    transform: rotate(45deg);
                }
                
                .pedidos-cliente-modal .custom-checkbox.checked::after {
                    left: 9px;
                    transform: rotate(-45deg);
                }
                
                /* Estilo para la etiqueta del checkbox */
                .pedidos-cliente-modal .checkbox-label {
                    font-size: 14px;
                    cursor: pointer;
                    user-select: none;
                    white-space: nowrap;
                }
                
                .pedidos-cliente-modal .button-container {
                    display: flex;
                    gap: 12px;
                    justify-content: flex-end;
                    margin-top: 8px;
                }
                
                .pedidos-cliente-modal .button-container button {
                    padding: 6px 12px;
                    border-radius: 4px;
                    cursor: pointer;
                }
            `
    });
  }
  confirm() {
    const pedidos = this.textarea.value.trim();
    const pendientes = this.checkbox.checked;
    const resolver = this.resolver;
    this.resolver = null;
    this.close();
    resolver({
      pedidos,
      pendientes
    });
  }
  cancel() {
    const resolver = this.resolver;
    this.resolver = null;
    this.close();
    resolver(null);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolver) {
      this.resolver(null);
      this.resolver = null;
    }
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/EntregableFieldHandler.ts
var EntregableFieldHandler = class extends NoteFieldHandler {
  constructor(tp, infoSubsistema, plugin) {
    super(tp, infoSubsistema, plugin);
  }
  // Sobrescribimos el método getAsunto para manejar NotionID
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        this.nota.asuntoDefinido = true;
        let notionID = null;
        for (const key in nota.frontmatter) {
          if (key.startsWith("NotionID-")) {
            notionID = nota.frontmatter[key];
            console.log(`Encontrado NotionID: ${notionID} con clave: ${key}`);
            break;
          }
        }
        if (notionID) {
          this.nota.proyecto = [notionID];
          console.log(`Asignado NotionID al proyecto: ${notionID}`);
        }
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getTrimestre() {
    var _a;
    const activo = app.workspace.getActiveFile();
    debugger;
    if (activo) {
      const metadata = (_a = app.metadataCache.getFileCache(activo)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.type === "Cp") {
        const esContinuacion = await this.suggester(
          ["S\xED", "No"],
          [true, false],
          false,
          `\xBFEste entregable es parte de la campa\xF1a ${activo.basename}?`
        );
        debugger;
        if (esContinuacion && metadata.trimestre) {
          this.nota.trimestre = metadata.trimestre;
          return metadata.trimestre;
        }
      }
    }
    const trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    const trimestre = await this.suggester(
      trimestres.map((t) => t.file.basename),
      trimestres.map((t) => t.file.basename),
      false,
      "Selecciona el trimestre para este entregable:"
    );
    if (!trimestre) {
      throw new Error("Debe seleccionar un trimestre para continuar");
    }
    this.nota.trimestre = `[[${trimestre}]]`;
    return `[[${trimestre}]]`;
  }
  async getTipo() {
    const tiposEntregable = [
      "Blog",
      "Correo Electr\xF3nico",
      "Dise\xF1o Personalizado",
      "Entrenamiento",
      "Estudio de caso",
      "Historia",
      "Infograf\xEDa",
      "Pauta",
      "Podcast",
      "Post",
      "Reel",
      "Tarea Avanzada",
      "Video",
      "Webinar"
    ];
    const tipo = await this.suggester(
      tiposEntregable,
      tiposEntregable,
      false,
      "Selecciona el tipo de entregable:"
    );
    if (!tipo) {
      throw new Error("Debe seleccionar un tipo de entregable para continuar");
    }
    this.nota.tipo = tipo;
    return tipo;
  }
  async getCanales() {
    const todosLosCanales = [
      "Whatsapp",
      "Instagram",
      "Facebook",
      "Tik Tok",
      "Sitio Web",
      "Email marketing",
      "Youtube",
      "Twitter",
      "LinkedIn",
      "Otro"
    ];
    let canalesPreseleccionados = [];
    switch (this.nota.tipo) {
      case "Historia":
        canalesPreseleccionados = ["Whatsapp", "Instagram", "Facebook"];
        break;
      case "Post":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Reel":
        canalesPreseleccionados = ["Instagram", "Tik Tok", "Youtube"];
        break;
      case "Video":
        canalesPreseleccionados = ["Youtube"];
        break;
      case "Blog":
        canalesPreseleccionados = ["Sitio Web", "LinkedIn"];
        break;
      case "Pauta":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Correo Electr\xF3nico":
        canalesPreseleccionados = ["Email marketing"];
        break;
      case "Infograf\xEDa":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Estudio de caso":
        canalesPreseleccionados = ["LinkedIn"];
        break;
      default:
        canalesPreseleccionados = [];
    }
    const opciones = todosLosCanales.map((canal) => {
      return {
        nombre: canal,
        seleccionado: canalesPreseleccionados.includes(canal)
      };
    });
    const multiSelectModal = new SeleccionMultipleModal(this.plugin.app, opciones, "Selecciona los canales para este entregable");
    const canalesSeleccionados = await multiSelectModal.openAndAwaitSelection();
    if (!canalesSeleccionados || canalesSeleccionados.length === 0) {
      this.nota.canales = canalesPreseleccionados;
      return canalesPreseleccionados;
    }
    this.nota.canales = canalesSeleccionados;
    return canalesSeleccionados;
  }
  async getStatus() {
    const estados = [
      "Sin empezar",
      "Dise\xF1ando - En Desarrollo",
      "Revisi\xF3n Interna",
      "Revisi\xF3n Cliente",
      "Programaci\xF3n Parrilla",
      "Publicado",
      "Completado",
      "Archivado"
    ];
    const status = await this.suggester(
      estados,
      estados,
      false,
      "Selecciona el estado actual del entregable:"
    );
    if (!status) {
      this.nota.status = "Sin empezar";
      return "Sin empezar";
    }
    this.nota.status = status;
    return status;
  }
  async getPrioridad() {
    const prioridades = ["Baja", "Media", "Alta"];
    const prioridad = await this.suggester(
      prioridades,
      prioridades,
      false,
      "Selecciona la prioridad del entregable:"
    );
    if (!prioridad) {
      this.nota.prioridad = "Media";
      return "Media";
    }
    this.nota.prioridad = prioridad;
    return prioridad;
  }
  async getPublicacion() {
    const modal = new DatePickerModal(this.plugin.app);
    modal.open();
    const selectedDate = await modal.waitForInput();
    if (selectedDate === null) {
      return "";
    }
    this.nota.publicacion = selectedDate;
    return selectedDate;
  }
  async getPiezaNube() {
    const url = await this.prompt(
      "URL de la pieza en la nube (Google Drive, Dropbox, etc.):",
      "https://",
      false,
      false
    );
    this.nota.piezaNube = url || "";
    return url || "";
  }
  async getUrlCanva() {
    const url = await this.prompt(
      "URL del dise\xF1o en Canva:",
      "https://",
      false,
      false
    );
    this.nota.urlCanva = url || "";
    return url || "";
  }
  async getHits() {
    const spinnerModal = new SpinnerModal(this.plugin.app, 1, 1, 1e3);
    const hits = await spinnerModal.openAndAwaitSelection();
    if (hits === null || hits === void 0) {
      this.nota.hits = 1;
      return 1;
    }
    this.nota.hits = hits;
    return hits;
  }
  async getPedidosAlCliente() {
    const pedidosModal = new PedidosClienteModal(this.plugin.app);
    const resultado = await pedidosModal.openAndAwaitSelection();
    if (!resultado) {
      this.nota.pedidosAlCliente = "";
      this.nota.pendientesCliente = false;
      return { pedidos: "", pendientes: false };
    }
    this.nota.pedidosAlCliente = resultado.pedidos;
    this.nota.pendientesCliente = resultado.pendientes;
    return resultado;
  }
  // Método para determinar si el entregable es facturable basado en quién lo realizará
  async getFacturable() {
    const opciones = ["Un tercero", "Andr\xE9s Juli\xE1n Borb\xF3n"];
    const valores = [false, true];
    const realizador = await this.suggester(
      opciones,
      valores,
      false,
      // No es multiselección
      "\xBFQui\xE9n realizar\xE1 este entregable?"
    );
    if (realizador === null) {
      this.nota.facturable = false;
      return false;
    }
    this.nota.facturable = realizador;
    return realizador;
  }
  async getAliases() {
    const aliases = [];
    aliases.push(`${this.nota.titulo}`);
    aliases.push(`EMkt-${this.nota.titulo}`);
    aliases.push(`EMkt-${this.nota.id}`);
    this.nota.aliases = aliases;
    return aliases;
  }
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  async getRename() {
    const folderBase = `${this.infoSubsistema.folder}`;
    const trimestreLimpio = this.nota.trimestre.replace(/\[\[|\]\]/g, "").trim();
    const folderTrimestre = `${folderBase}/${trimestreLimpio}`;
    await FieldHandlerUtils.crearCarpeta(folderBase);
    await FieldHandlerUtils.crearCarpeta(folderTrimestre);
    const newName = `${folderTrimestre}/${this.nota.titulo}.md`;
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian49.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir archivo actual", "Detener creaci\xF3n del archivo"],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. \xBFQu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian49.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            const newFile = app.vault.getAbstractFileByPath(newName);
            if (newFile instanceof import_obsidian49.TFile) {
              const leaf = app.workspace.getLeaf(true);
              await leaf.openFile(newFile);
            }
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian49.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const newFile = app.vault.getAbstractFileByPath(newName);
          if (newFile instanceof import_obsidian49.TFile) {
            const leaf = app.workspace.getLeaf(true);
            await leaf.openFile(newFile);
          }
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/API/starterAPI.ts
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async fillNote(infoSubsistema, campos) {
    this.nota = {};
    let nota;
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
      Object.assign(this.nota, infoSubsistema);
    }
    let fieldHandler;
    switch (this.infoSubsistema.type) {
      case "Agr":
        fieldHandler = new AgradecimientosFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PGTD":
        fieldHandler = new PGTDFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PQ":
        fieldHandler = new PQFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Ax":
        fieldHandler = new AnotacionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CPE":
        fieldHandler = new ContenidoParaEstudioFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RR":
        fieldHandler = new RecursosRecurrentesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Tx":
        fieldHandler = new TransaccionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AI":
        fieldHandler = new AreasInteresFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AV":
        fieldHandler = new AreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "nAV":
        fieldHandler = new nodoAreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "OCA":
        fieldHandler = new ObjCompassAnualFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CAI":
        fieldHandler = new CompassPlaneacionAnual_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RL":
        fieldHandler = new RepositorioLibros_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "LB":
        fieldHandler = new Biblioteca_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Rx":
        fieldHandler = new ReflexionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Cp":
        fieldHandler = new Campa\u00F1asFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "EMkt":
        fieldHandler = new EntregableFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "TQ":
        fieldHandler = new TrimestralFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AY":
        fieldHandler = new Anual_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      default:
        throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
    }
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof fieldHandler[functionName] === "function") {
          this.nota[campo] = await fieldHandler[functionName]();
          nota = await fieldHandler.getNota();
          for (const key in nota) {
            if (!(key in this.nota)) {
              this.nota[key] = nota[key];
            }
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian50.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  // Crear Nota desde template
  async createNote(subsistema) {
    try {
      const templatePath = `Plantillas/${this.plugin.settings[`folder_${subsistema}`]}/Plt - ${subsistema}.md`;
      const templateFile = app.vault.getAbstractFileByPath(templatePath);
      if (!(templateFile instanceof import_obsidian50.TFile)) {
        throw new Error(`El template para "${subsistema}" no se encontr\xF3 o no es un archivo v\xE1lido.`);
      }
      const dtConseq = DateTime.now().toFormat("yyyy-MM-dd HHmmss");
      const filename = `${subsistema} ${dtConseq}`;
      const folder = app.vault.getAbstractFileByPath("Inbox");
      if (!folder) {
        throw new Error(`La carpeta "Inbox" no se encontr\xF3.`);
      }
      const tp = this.getTp();
      let crearNota = tp.file.static_functions.get("create_new");
      if (typeof crearNota !== "function") {
        throw new Error("La funci\xF3n para crear notas no est\xE1 disponible.");
      }
      await crearNota(templateFile, filename, true, folder).basename;
    } catch (error) {
      console.error(error);
      alert(`Error al crear la nota: ${error.message}`);
    }
  }
  async getOtrosAsuntos(subsistemas) {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = [];
    for (let subsistema of subsistemas) {
      let incluye = await suggester(["Si", "No"], [true, false], true, `Desea agregar algun ${subsistema} activo como origen?`);
      if (!incluye)
        continue;
      debugger;
      let recursosActivos = await this.activeStructureResources(subsistema);
      let primerAlias = recursosActivos.map((file) => {
        var _a;
        const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return metadata && metadata.aliases && metadata.aliases.length > 0 ? metadata.aliases[0] : null;
      }).filter((alias) => alias !== null);
      while (recursosActivos.length > 0) {
        let indiceSeleccionado;
        if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.path), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.path === seleccion);
        } else {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.basename), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.basename === seleccion);
        }
        if (indiceSeleccionado !== -1) {
          if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
            campo.push(recursosActivos[indiceSeleccionado].path);
          } else {
            campo.push(recursosActivos[indiceSeleccionado].basename);
          }
          recursosActivos.splice(indiceSeleccionado, 1);
          primerAlias.splice(indiceSeleccionado, 1);
        }
        if (recursosActivos.length === 0)
          break;
        let deseaAgregarOtro = await suggester(["Si", "No"], [true, false], true, `Desea agregar otro ${subsistema} como origen?`);
        debugger;
        if (!deseaAgregarOtro)
          break;
      }
    }
    return campo;
  }
  // FUNCION QUE TRAE TODAS LAS NOTAS ACTIVAS DE LOS SISTEMAS. - Revisar en que la uso...
  async activeStructureResources(typeName) {
    try {
      const files = app.vault.getMarkdownFiles();
      switch (type) {
        case "AreasInteres":
          debugger;
          break;
        default:
          let resourceFolderName = "folder_" + typeName;
          let resourceFolder = this.plugin.settings[resourceFolderName];
          if (!resourceFolder) {
            console.error(`La carpeta "${resourceFolderName}" no existe en la configuraci\xF3n del plugin.`);
            return [];
          }
          let activeResources2 = [];
          const registrosExistentes = files.filter((file) => file.path.startsWith(resourceFolder));
          registrosExistentes.forEach((file) => {
            var _a;
            const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (metadata && metadata.estado === "\u{1F7E2}") {
              activeResources2.push(file);
            }
          });
          break;
      }
      return activeResources;
    } catch (error) {
      console.error("Error al buscar recursos activos:", error);
      return [];
    }
  }
};

// src/modules/noteLifecycleManager/API/utils/DOMUtils.ts
var DOMUtils = class {
  /**
   * Crea un elemento con atributos, clases y eventos opcionales
   */
  static createElement(tag, options = {}) {
    const element = document.createElement(tag);
    if (options.className) {
      element.className = options.className;
    }
    if (options.textContent) {
      element.textContent = options.textContent;
    }
    if (options.attributes) {
      Object.entries(options.attributes).forEach(([key, value]) => {
        element.setAttribute(key, value);
      });
    }
    if (options.styles) {
      Object.assign(element.style, options.styles);
    }
    if (options.children) {
      options.children.forEach((child) => element.appendChild(child));
    }
    if (options.events) {
      Object.entries(options.events).forEach(([event, listener]) => {
        element.addEventListener(event, listener);
      });
    }
    return element;
  }
  /**
   * Crea un botón con opciones comunes
   */
  static createButton(text, onClick, options = {}) {
    const buttonText = options.icon ? `${options.icon} ${text}` : text;
    return this.createElement("button", {
      className: options.className || "default-button",
      textContent: buttonText,
      styles: options.styles,
      events: { click: onClick }
    });
  }
  /**
   * Crea una sección colapsable
   */
  static createCollapsibleSection(headerContent, bodyContent, options = {}) {
    const isExpanded = options.isExpanded || false;
    const toggleIconExpanded = options.toggleIconExpanded || "\u25BC";
    const toggleIconCollapsed = options.toggleIconCollapsed || "\u25B6";
    const toggleSpan = this.createElement("span", {
      className: `toggle-icon ${isExpanded ? "open" : ""}`,
      textContent: isExpanded ? toggleIconExpanded : toggleIconCollapsed
    });
    const header = this.createElement("div", {
      className: options.headerClassName || "collapsible-header"
    });
    if (typeof headerContent === "string") {
      const headerTextSpan = this.createElement("span", {
        textContent: headerContent
      });
      header.appendChild(toggleSpan);
      header.appendChild(headerTextSpan);
    } else {
      header.appendChild(toggleSpan);
      header.appendChild(headerContent);
    }
    const body = this.createElement("div", {
      className: options.bodyClassName || "collapsible-body",
      styles: {
        display: isExpanded ? "block" : "none"
      },
      children: [bodyContent]
    });
    const container = this.createElement("div", {
      className: options.containerClassName || "collapsible-container",
      children: [header, body]
    });
    header.addEventListener("click", (event) => {
      if (event.target instanceof HTMLAnchorElement || event.target instanceof HTMLButtonElement) {
        return;
      }
      const isCurrentlyExpanded = toggleSpan.classList.contains("open");
      if (isCurrentlyExpanded) {
        toggleSpan.classList.remove("open");
        toggleSpan.textContent = toggleIconCollapsed;
        body.style.display = "none";
      } else {
        toggleSpan.classList.add("open");
        toggleSpan.textContent = toggleIconExpanded;
        body.style.display = "block";
      }
    });
    return container;
  }
  /**
   * Crea un elemento de carga (spinner)
   */
  static createLoadingIndicator(message = "Cargando...") {
    const spinner = this.createElement("div", {
      className: "spinner"
    });
    const loadingText = this.createElement("div", {
      textContent: message
    });
    return this.createElement("div", {
      className: "loading-indicator",
      children: [spinner, loadingText]
    });
  }
  /**
   * Crea un mensaje de error
   */
  static createErrorMessage(message, details) {
    const container = this.createElement("div", {
      className: "error-message",
      textContent: message
    });
    if (details) {
      const detailsElement = this.createElement("small", {
        textContent: details,
        styles: {
          display: "block",
          marginTop: "8px"
        }
      });
      container.appendChild(detailsElement);
    }
    return container;
  }
};

// src/modules/noteLifecycleManager/API/utils/NavigationUtils.ts
var NavigationUtils = class {
  /**
   * Navega a una tarea específica en una nota con resaltado de línea
   */
  static navegarATareaConResaltado(path, lineNumber, textoTarea, nuevaPesta\u00F1a = true) {
    try {
      const file = app.vault.getAbstractFileByPath(path);
      if (!file) {
        new app.Notice(`Archivo no encontrado: ${path}`);
        return;
      }
      const leaf = app.workspace.getLeaf(nuevaPesta\u00F1a);
      leaf.openFile(file).then(() => {
        setTimeout(() => {
          const editor = leaf.view.editor;
          if (!editor)
            return;
          if (lineNumber > 0) {
            editor.setCursor({ line: lineNumber - 1, ch: 0 });
            editor.scrollIntoView(
              { from: { line: lineNumber - 1, ch: 0 }, to: { line: lineNumber - 1, ch: 0 } },
              true
            );
            this.resaltarLineaTemporalmente(editor, lineNumber - 1);
          } else if (textoTarea) {
            const contenido = editor.getValue();
            const lineas = contenido.split("\n");
            for (let i = 0; i < lineas.length; i++) {
              const textoLimpio = textoTarea.replace(/^-\s*\[[^\]]+\]\s*/, "").trim();
              const lineaLimpia = lineas[i].replace(/^-\s*\[[^\]]+\]\s*/, "").trim();
              if (lineas[i].includes(textoTarea) || lineaLimpia.includes(textoLimpio)) {
                editor.setCursor({ line: i, ch: 0 });
                editor.scrollIntoView(
                  { from: { line: i, ch: 0 }, to: { line: i, ch: lineas[i].length } },
                  true
                );
                this.resaltarLineaTemporalmente(editor, i);
                break;
              }
            }
          }
        }, 300);
      });
    } catch (error) {
      console.error("Error en navegarATareaConResaltado:", error);
      new app.Notice(`Error al navegar: ${error.message}`);
    }
  }
  /**
   * Resalta temporalmente una línea en el editor
   */
  static resaltarLineaTemporalmente(editor, lineIndex) {
    try {
      if (editor.cm && editor.cm.state) {
        const lineDiv = editor.cm.dom.querySelector(".cm-content");
        if (lineDiv) {
          const lineElements = lineDiv.querySelectorAll(".cm-line");
          if (lineElements && lineElements.length > lineIndex) {
            lineElements[lineIndex].classList.add("highlighted-line");
            setTimeout(() => {
              lineElements[lineIndex].classList.remove("highlighted-line");
            }, 2e3);
          }
        }
      } else {
        const lineDiv = editor.lineDiv || editor.getScrollerElement();
        if (lineDiv) {
          const lineElements = lineDiv.querySelectorAll(".CodeMirror-line");
          if (lineElements && lineElements.length > lineIndex) {
            lineElements[lineIndex].classList.add("highlighted-line");
            setTimeout(() => {
              lineElements[lineIndex].classList.remove("highlighted-line");
            }, 2e3);
          }
        }
      }
    } catch (error) {
      console.error("Error al resaltar l\xEDnea:", error);
    }
  }
};

// src/modules/noteLifecycleManager/API/components/TareasInboxComponent.ts
var TareasInboxComponent = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Genera un componente visual para mostrar tareas con etiqueta #inbox
   */
  async generar(dv2) {
    try {
      const container = DOMUtils.createElement("div", {
        className: "tareas-inbox-container"
      });
      this.a\u00F1adirEstilos(container);
      const heading = DOMUtils.createElement("h3", {
        className: "inbox-heading",
        children: [
          DOMUtils.createElement("span", {
            textContent: "\u{1F4E5} Tareas en Bandeja de Entrada"
          })
        ]
      });
      container.appendChild(heading);
      const controlsDiv = this.crearControles(container);
      container.appendChild(controlsDiv);
      const loadingDiv = DOMUtils.createLoadingIndicator("Buscando tareas en bandeja de entrada...");
      container.appendChild(loadingDiv);
      try {
        const { tareasPorNota, totalTareas, totalNotas } = await this.plugin.tareasAPI.getTareasInbox();
        container.removeChild(loadingDiv);
        if (totalTareas === 0) {
          container.appendChild(
            DOMUtils.createElement("div", {
              className: "empty-message",
              textContent: "\xA1Bandeja de entrada vac\xEDa! No se encontraron tareas con etiqueta #inbox."
            })
          );
          return container;
        }
        heading.appendChild(
          DOMUtils.createElement("span", {
            className: "stats-badge",
            textContent: `${totalTareas} tareas en ${totalNotas} notas`
          })
        );
        const statsContainer = this.crearContenedorEstadisticas(totalTareas, totalNotas);
        container.appendChild(statsContainer);
        const notasOrdenadas = Array.from(tareasPorNota.values()).sort((a, b) => b.tareas.length - a.tareas.length);
        for (const notaInfo of notasOrdenadas) {
          const grupoTareas = this.crearGrupoTareas(notaInfo, dv2);
          container.appendChild(grupoTareas);
        }
        if (notasOrdenadas.length > 0) {
          const primerGrupo = container.querySelector(".tarea-group");
          if (primerGrupo) {
            const toggle = primerGrupo.querySelector(".tarea-group-toggle");
            const list = primerGrupo.querySelector(".tarea-list");
            if (toggle && list) {
              toggle.classList.add("open");
              toggle.textContent = "\u25BC";
              list.classList.add("open");
              list.style.display = "block";
            }
          }
        }
      } catch (error) {
        container.removeChild(loadingDiv);
        container.appendChild(
          DOMUtils.createErrorMessage(
            `Error al cargar tareas de bandeja de entrada: ${error.message}`,
            "Revisa la consola para m\xE1s detalles."
          )
        );
        console.error("Error en mostrarTareasInbox:", error);
      }
      return container;
    } catch (error) {
      console.error("Error general en mostrarTareasInbox:", error);
      return DOMUtils.createErrorMessage(
        `Error al cargar tareas de bandeja de entrada: ${error.message}`,
        "Revisa la consola para m\xE1s detalles."
      );
    }
  }
  /**
   * Crea los controles para la gestión de tareas inbox
   */
  crearControles(container) {
    const controlsDiv = DOMUtils.createElement("div", {
      className: "tareas-controls"
    });
    const expandBtn = DOMUtils.createButton(
      "Expandir Todo",
      () => this.expandirTodas(container),
      { className: "tareas-btn expand-btn", icon: "\u{1F4C2}" }
    );
    const collapseBtn = DOMUtils.createButton(
      "Colapsar Todo",
      () => this.colapsarTodas(container),
      { className: "tareas-btn collapse-btn", icon: "\u{1F4C1}" }
    );
    const refreshBtn = DOMUtils.createButton(
      "Actualizar",
      async () => {
        var _a;
        const nuevoContainer = await this.generar(dv);
        (_a = container.parentNode) == null ? void 0 : _a.replaceChild(nuevoContainer, container);
      },
      { className: "tareas-btn refresh-btn", icon: "\u{1F504}" }
    );
    const procesarBtn = DOMUtils.createButton(
      "Procesar Inbox",
      () => {
        new this.plugin.app.Notice("Para procesar una tarea, haz clic en ella para abrirla y clasificarla", 5e3);
      },
      {
        className: "tareas-btn process-btn",
        icon: "\u{1F50D}",
        styles: {
          backgroundColor: "var(--interactive-accent)",
          color: "white"
        }
      }
    );
    controlsDiv.appendChild(expandBtn);
    controlsDiv.appendChild(collapseBtn);
    controlsDiv.appendChild(refreshBtn);
    controlsDiv.appendChild(procesarBtn);
    return controlsDiv;
  }
  /**
   * Crea un contenedor con tarjetas de estadísticas
   */
  crearContenedorEstadisticas(totalTareas, totalNotas) {
    const statsContainer = DOMUtils.createElement("div", {
      className: "inbox-stats-container",
      styles: {
        display: "flex",
        flexWrap: "wrap",
        gap: "10px",
        margin: "10px 0 20px"
      }
    });
    this.crearTarjetaEstadistica(statsContainer, "\u{1F4E5}", "Tareas totales", totalTareas);
    this.crearTarjetaEstadistica(statsContainer, "\u{1F4DD}", "Notas con tareas", totalNotas);
    return statsContainer;
  }
  /**
   * Crea una tarjeta de estadística
   */
  crearTarjetaEstadistica(container, icono, titulo, valor) {
    const tarjeta = DOMUtils.createElement("div", {
      className: "stats-card",
      styles: {
        flex: "1",
        minWidth: "150px",
        backgroundColor: "var(--background-secondary)",
        padding: "15px",
        borderRadius: "8px",
        textAlign: "center",
        display: "flex",
        flexDirection: "column",
        alignItems: "center",
        justifyContent: "center"
      }
    });
    const iconoEl = DOMUtils.createElement("div", {
      textContent: icono,
      styles: {
        fontSize: "24px",
        marginBottom: "5px"
      }
    });
    const tituloEl = DOMUtils.createElement("div", {
      textContent: titulo,
      styles: {
        fontSize: "12px",
        color: "var(--text-muted)",
        marginBottom: "5px"
      }
    });
    const valorEl = DOMUtils.createElement("div", {
      textContent: valor.toString(),
      styles: {
        fontWeight: "bold",
        fontSize: "18px"
      }
    });
    tarjeta.appendChild(iconoEl);
    tarjeta.appendChild(tituloEl);
    tarjeta.appendChild(valorEl);
    container.appendChild(tarjeta);
  }
  /**
   * Crea un grupo de tareas para una nota específica
   */
  crearGrupoTareas(notaInfo, dv2) {
    const { titulo, ruta, tareas } = notaInfo;
    const tareasList = DOMUtils.createElement("div", {
      className: "tarea-list",
      styles: {
        display: "none"
      }
    });
    for (const tarea of tareas) {
      const tareaElement = this.crearTareaElement(tarea, dv2);
      tareasList.appendChild(tareaElement);
    }
    let titleElement;
    try {
      const enlaceNota = DOMUtils.createElement("a", {
        className: "internal-link",
        textContent: titulo,
        attributes: {
          "data-href": ruta
        },
        events: {
          click: (event) => {
            event.preventDefault();
            event.stopPropagation();
            this.plugin.app.workspace.openLinkText(ruta, "", true);
          }
        }
      });
      titleElement = DOMUtils.createElement("div", {
        className: "tarea-group-title",
        children: [
          DOMUtils.createElement("span", {
            className: "tarea-group-toggle",
            textContent: "\u25B6"
          }),
          enlaceNota
        ]
      });
    } catch (e) {
      titleElement = DOMUtils.createElement("div", {
        className: "tarea-group-title",
        children: [
          DOMUtils.createElement("span", {
            className: "tarea-group-toggle",
            textContent: "\u25B6"
          }),
          DOMUtils.createElement("span", {
            textContent: titulo
          })
        ]
      });
    }
    const headerDiv = DOMUtils.createElement("div", {
      className: "tarea-group-header",
      children: [
        titleElement,
        DOMUtils.createElement("span", {
          className: "tarea-group-count",
          textContent: tareas.length.toString()
        })
      ]
    });
    const grupoDiv = DOMUtils.createElement("div", {
      className: "tarea-group",
      children: [headerDiv, tareasList]
    });
    headerDiv.addEventListener("click", (event) => {
      if (event.target instanceof HTMLAnchorElement)
        return;
      const toggleSpan = titleElement.querySelector(".tarea-group-toggle");
      if (!toggleSpan)
        return;
      toggleSpan.classList.toggle("open");
      tareasList.classList.toggle("open");
      if (toggleSpan.classList.contains("open")) {
        toggleSpan.textContent = "\u25BC";
        tareasList.style.display = "block";
      } else {
        toggleSpan.textContent = "\u25B6";
        tareasList.style.display = "none";
      }
    });
    return grupoDiv;
  }
  /**
   * Crea un elemento DOM para una tarea de bandeja de entrada
   */
  crearTareaElement(tarea, dv2) {
    var _a, _b;
    const tareaDiv = DOMUtils.createElement("div", {
      className: "tarea-item",
      styles: {
        borderLeft: "4px solid #E67E22"
        // Color naranja para mostrar que está en inbox
      }
    });
    const textoDiv = DOMUtils.createElement("div", {
      className: "tarea-texto"
    });
    const checkboxSpan = DOMUtils.createElement("span", {
      className: "tarea-checkbox",
      textContent: "\u2610",
      attributes: {
        "data-path": tarea.rutaArchivo,
        "data-line": String(((_a = tarea.lineInfo) == null ? void 0 : _a.numero) || 0)
      },
      events: {
        click: () => {
          var _a2;
          NavigationUtils.navegarATareaConResaltado(
            tarea.rutaArchivo,
            ((_a2 = tarea.lineInfo) == null ? void 0 : _a2.numero) || 0,
            tarea.textoOriginal || tarea.texto,
            true
          );
        }
      }
    });
    textoDiv.appendChild(checkboxSpan);
    const contenidoSpan = DOMUtils.createElement("span", {
      className: "tarea-contenido",
      textContent: tarea.texto,
      attributes: {
        "data-path": tarea.rutaArchivo,
        "data-line": String(((_b = tarea.lineInfo) == null ? void 0 : _b.numero) || 0)
      },
      styles: {
        cursor: "pointer"
      },
      events: {
        click: () => {
          var _a2;
          NavigationUtils.navegarATareaConResaltado(
            tarea.rutaArchivo,
            ((_a2 = tarea.lineInfo) == null ? void 0 : _a2.numero) || 0,
            tarea.textoOriginal || tarea.texto,
            true
          );
        }
      }
    });
    textoDiv.appendChild(contenidoSpan);
    tareaDiv.appendChild(textoDiv);
    const metadatosDiv = DOMUtils.createElement("div", {
      className: "tarea-metadatos"
    });
    this.a\u00F1adirMetadatosUbicacion(tarea, metadatosDiv);
    this.a\u00F1adirMetadatosFechas(tarea, metadatosDiv);
    this.a\u00F1adirMetadatosPersonas(tarea, metadatosDiv);
    this.a\u00F1adirMetadatosContextos(tarea, metadatosDiv);
    this.a\u00F1adirMetadatosEtiquetas(tarea, metadatosDiv);
    this.a\u00F1adirBotonesAccion(tarea, metadatosDiv);
    tareaDiv.appendChild(metadatosDiv);
    return tareaDiv;
  }
  /**
   * Añade metadatos de ubicación a una tarea
   */
  a\u00F1adirMetadatosUbicacion(tarea, container) {
    var _a;
    const ubicacionDiv = DOMUtils.createElement("div", {
      className: "tarea-meta-item"
    });
    const iconoUbicacion = DOMUtils.createElement("span", {
      className: "metadato-icono",
      textContent: "\u{1F4CD}"
    });
    ubicacionDiv.appendChild(iconoUbicacion);
    const valorUbicacion = DOMUtils.createElement("span", {
      className: "ubicacion-valor",
      textContent: ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) ? `L\xEDnea ${tarea.lineInfo.numero}` : "Posici\xF3n desconocida"
    });
    ubicacionDiv.appendChild(valorUbicacion);
    container.appendChild(ubicacionDiv);
  }
  /**
   * Añade metadatos de fechas a una tarea
   */
  a\u00F1adirMetadatosFechas(tarea, container) {
    if (!tarea.fechaVencimiento && !tarea.fechaScheduled && !tarea.fechaStart) {
      return;
    }
    const fechasDiv = DOMUtils.createElement("div", {
      className: "tarea-meta-item"
    });
    const iconoFecha = DOMUtils.createElement("span", {
      className: "metadato-icono",
      textContent: "\u{1F4C5}"
    });
    fechasDiv.appendChild(iconoFecha);
    const valorFechas = DOMUtils.createElement("span");
    let textofechas = [];
    if (tarea.fechaVencimiento) {
      textofechas.push(`Vence: ${tarea.fechaVencimiento}`);
    }
    if (tarea.fechaScheduled) {
      textofechas.push(`Programada: ${tarea.fechaScheduled}`);
    }
    if (tarea.fechaStart) {
      textofechas.push(`Inicia: ${tarea.fechaStart}`);
    }
    valorFechas.textContent = textofechas.join(" | ");
    fechasDiv.appendChild(valorFechas);
    container.appendChild(fechasDiv);
  }
  /**
   * Añade metadatos de personas asignadas a una tarea
   */
  a\u00F1adirMetadatosPersonas(tarea, container) {
    var _a;
    if (!((_a = tarea.etiquetas.personas) == null ? void 0 : _a.length)) {
      return;
    }
    const personasDiv = DOMUtils.createElement("div", {
      className: "tarea-meta-item"
    });
    const iconoPersonas = DOMUtils.createElement("span", {
      className: "metadato-icono",
      textContent: "\u{1F464}"
    });
    personasDiv.appendChild(iconoPersonas);
    const valorPersonas = DOMUtils.createElement("span", {
      textContent: tarea.etiquetas.personas.join(" | ")
    });
    personasDiv.appendChild(valorPersonas);
    container.appendChild(personasDiv);
  }
  /**
   * Añade metadatos de contextos a una tarea
   */
  a\u00F1adirMetadatosContextos(tarea, container) {
    var _a;
    if (!((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length)) {
      return;
    }
    const contextosDiv = DOMUtils.createElement("div", {
      className: "tarea-meta-item"
    });
    const iconoContextos = DOMUtils.createElement("span", {
      className: "metadato-icono",
      textContent: "\u{1F5C2}\uFE0F"
    });
    contextosDiv.appendChild(iconoContextos);
    const valorContextos = DOMUtils.createElement("span", {
      textContent: tarea.etiquetas.contextos.join(" | ")
    });
    contextosDiv.appendChild(valorContextos);
    container.appendChild(contextosDiv);
  }
  /**
   * Añade metadatos de etiquetas (excluyendo #inbox) a una tarea
   */
  a\u00F1adirMetadatosEtiquetas(tarea, container) {
    const otrasEtiquetas = tarea.etiquetas.otras.filter((tag) => tag.toLowerCase() !== "#inbox");
    if (!otrasEtiquetas.length) {
      return;
    }
    const etiquetasDiv = DOMUtils.createElement("div", {
      className: "tarea-meta-item"
    });
    const iconoEtiquetas = DOMUtils.createElement("span", {
      className: "metadato-icono",
      textContent: "\u{1F3F7}\uFE0F"
    });
    etiquetasDiv.appendChild(iconoEtiquetas);
    const valorEtiquetas = DOMUtils.createElement("span", {
      textContent: otrasEtiquetas.join(" ")
    });
    etiquetasDiv.appendChild(valorEtiquetas);
    container.appendChild(etiquetasDiv);
  }
  /**
   * Añade botones de acción rápida para clasificar la tarea
   */
  a\u00F1adirBotonesAccion(tarea, container) {
    const accionesDiv = DOMUtils.createElement("div", {
      className: "tarea-acciones",
      styles: {
        marginTop: "8px",
        display: "flex",
        gap: "8px",
        flexWrap: "wrap"
      }
    });
    const estilosBotones = {
      fontSize: "12px",
      padding: "3px 8px",
      borderRadius: "4px",
      border: "1px solid var(--background-modifier-border)",
      backgroundColor: "var(--background-secondary)",
      cursor: "pointer"
    };
    const btnEditar = DOMUtils.createElement("button", {
      className: "tarea-accion-btn",
      textContent: "\u270F\uFE0F Editar",
      styles: estilosBotones,
      events: {
        click: () => {
          var _a;
          NavigationUtils.navegarATareaConResaltado(
            tarea.rutaArchivo,
            ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) || 0,
            tarea.textoOriginal || tarea.texto,
            true
          );
        }
      }
    });
    accionesDiv.appendChild(btnEditar);
    const contextosComunes = ["#cx/trabajo", "#cx/personal", "#cx/hogar"];
    for (const contexto of contextosComunes) {
      const btnContexto = DOMUtils.createElement("button", {
        className: "tarea-accion-btn contexto-btn",
        textContent: contexto,
        styles: estilosBotones,
        events: {
          click: () => {
            var _a;
            NavigationUtils.navegarATareaConResaltado(
              tarea.rutaArchivo,
              ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) || 0,
              tarea.textoOriginal || tarea.texto,
              true
            );
            new this.plugin.app.Notice(
              `Para a\xF1adir "${contexto}" a esta tarea, ed\xEDtala en el archivo abierto.`,
              5e3
            );
          }
        }
      });
      accionesDiv.appendChild(btnContexto);
    }
    container.appendChild(accionesDiv);
  }
  /**
   * Expande todos los grupos de tareas en el contenedor
   */
  expandirTodas(container) {
    const toggles = container.querySelectorAll(".tarea-group-toggle");
    const listas = container.querySelectorAll(".tarea-list");
    toggles.forEach((toggle, index) => {
      toggle.classList.add("open");
      toggle.textContent = "\u25BC";
      if (listas[index]) {
        listas[index].classList.add("open");
        listas[index].style.display = "block";
      }
    });
  }
  /**
   * Colapsa todos los grupos de tareas en el contenedor
   */
  colapsarTodas(container) {
    const toggles = container.querySelectorAll(".tarea-group-toggle");
    const listas = container.querySelectorAll(".tarea-list");
    toggles.forEach((toggle, index) => {
      toggle.classList.remove("open");
      toggle.textContent = "\u25B6";
      if (listas[index]) {
        listas[index].classList.remove("open");
        listas[index].style.display = "none";
      }
    });
  }
  /**
   * Añade estilos inline al contenedor (solución temporal)
   * En una refactorización completa, estos estilos deberían moverse a un archivo CSS
   */
  a\u00F1adirEstilos(container) {
    const styleEl = DOMUtils.createElement("style", {
      textContent: `
      .tareas-inbox-container {
          font-size: 0.95em;
          width: 100%;
          max-width: 100%;
          margin: 0;
          padding: 0;
      }
      
      .inbox-heading {
          margin-top: 1rem;
          margin-bottom: 0.5rem;
          border-bottom: 1px solid var(--background-modifier-border);
          padding-bottom: 6px;
          font-weight: 600;
          font-size: 1.3em;
          display: flex;
          align-items: center;
          justify-content: space-between;
      }
      
      .stats-badge {
          background-color: var(--interactive-accent);
          color: white;
          border-radius: 12px;
          padding: 2px 10px;
          font-size: 0.8em;
          font-weight: normal;
      }
      
      .tareas-controls {
          display: flex;
          gap: 10px;
          margin-bottom: 1rem;
          justify-content: center;
      }
      
      .tareas-btn {
          background-color: var(--background-secondary-alt);
          border: 1px solid var(--background-modifier-border);
          border-radius: 6px;
          padding: 6px 12px;
          cursor: pointer;
          transition: all 0.2s ease;
      }
      
      .tareas-btn:hover {
          background-color: var(--background-modifier-hover);
      }
      
      .expand-btn:hover {
          background-color: var(--interactive-accent);
          color: white;
      }
      
      .tarea-group {
          background-color: var(--background-secondary);
          border-radius: 8px;
          margin-bottom: 1rem;
          overflow: hidden;
      }
      
      .tarea-group-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 8px 12px;
          background-color: var(--background-secondary-alt);
          cursor: pointer;
          user-select: none;
      }
      
      .tarea-group-header:hover {
          background-color: var(--background-modifier-hover);
      }
      
      .tarea-group-title {
          display: flex;
          align-items: center;
          gap: 8px;
          font-weight: 500;
      }
      
      .tarea-group-toggle {
          font-family: monospace;
          transition: transform 0.2s ease;
      }
      
      .tarea-group-toggle.open {
          transform: rotate(90deg);
      }
      
      .tarea-group-count {
          background-color: var(--interactive-accent);
          color: white;
          border-radius: 12px;
          padding: 1px 8px;
          font-size: 0.85em;
      }
      
      .tarea-list {
          padding: 0 12px 12px;
      }
      
      .tarea-item {
          margin: 8px 0;
          padding: 8px;
          border-radius: 6px;
          background-color: var(--background-primary);
          border: 1px solid var(--background-modifier-border);
          transition: all 0.2s ease;
      }
      
      .tarea-item:hover {
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
          transform: translateY(-2px);
          border-color: var(--interactive-accent);
      }
      
      .tarea-texto {
          margin-bottom: 6px;
          display: flex;
          gap: 8px;
          align-items: flex-start;
      }
      
      .tarea-checkbox {
          color: var(--text-faint);
          font-size: 1.1em;
          flex-shrink: 0;
          cursor: pointer;
      }
      
      .tarea-contenido {
          flex-grow: 1;
          line-height: 1.4;
      }
      
      .tarea-metadatos {
          margin-left: 28px;
          font-size: 0.9em;
          color: var(--text-muted);
      }
      
      .tarea-meta-item {
          margin-bottom: 3px;
          display: flex;
          align-items: baseline;
      }
      
      .metadato-icono {
          margin-right: 6px;
          width: 16px;
          text-align: center;
      }
      
      .loading-indicator {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 2rem;
          color: var(--text-muted);
      }
      
      .spinner {
          border: 3px solid rgba(0, 0, 0, 0.1);
          border-radius: 50%;
          border-top: 3px solid var(--interactive-accent);
          width: 30px;
          height: 30px;
          animation: spin 1s linear infinite;
          margin-bottom: 1rem;
      }
      
      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }
      
      .error-message {
          color: var(--text-error);
          background-color: rgba(var(--text-error-rgb), 0.1);
          padding: 10px;
          border-radius: 6px;
          text-align: center;
          margin: 10px 0;
      }
      
      .empty-message {
          color: var(--text-muted);
          text-align: center;
          padding: 2rem;
          font-style: italic;
      }
      `
    });
    container.appendChild(styleEl);
  }
};

// src/modules/noteLifecycleManager/API/components/ProyectoCampanasComponent.ts
var ProyectoCampanasComponent = class {
  constructor(plugin) {
    this.plugin = plugin;
    console.log("\u{1F50D} ProyectoCampanasComponent iniciado");
  }
  /**
   * Genera un componente visual para mostrar la relación entre Proyectos GTD y Campañas
   */
  async generar(dv2, options = {}) {
    var _a, _b, _c;
    console.log("\u{1F50D} M\xE9todo generar iniciado con opciones:", options);
    try {
      const configuracion = {
        modo: options.modo || "hits",
        proyectoActualPath: options.proyectoActualPath || ((_b = (_a = dv2.current()) == null ? void 0 : _a.file) == null ? void 0 : _b.path)
      };
      console.log("\u{1F50D} Configuraci\xF3n final:", configuracion);
      const container = DOMUtils.createElement("div", {
        className: "proyecto-campanas-container"
      });
      const heading = DOMUtils.createElement("h3", {
        className: "dashboard-heading",
        textContent: "Dashboard de Proyectos y Campa\xF1as"
      });
      container.appendChild(heading);
      const controlsDiv = this.crearControles(container, configuracion, async (nuevoModo) => {
        var _a2;
        const nuevoContainer = await this.generar(dv2, {
          ...configuracion,
          modo: nuevoModo
        });
        (_a2 = container.parentNode) == null ? void 0 : _a2.replaceChild(nuevoContainer, container);
      });
      container.appendChild(controlsDiv);
      const loadingDiv = DOMUtils.createLoadingIndicator("Cargando datos de proyectos y campa\xF1as...");
      container.appendChild(loadingDiv);
      try {
        console.log("\u{1F50D} Iniciando carga de datos");
        let proyectos = [];
        let estaEnProyecto = false;
        if (configuracion.proyectoActualPath) {
          console.log("\u{1F50D} Buscando proyecto actual:", configuracion.proyectoActualPath);
          const archivoActual = this.plugin.app.vault.getAbstractFileByPath(configuracion.proyectoActualPath);
          if (archivoActual) {
            console.log("\u{1F50D} Archivo encontrado:", archivoActual.path);
            const metadataActual = (_c = this.plugin.app.metadataCache.getFileCache(archivoActual)) == null ? void 0 : _c.frontmatter;
            console.log("\u{1F50D} Frontmatter del archivo:", metadataActual);
            if (metadataActual && metadataActual.type === "PGTD") {
              console.log("\u{1F50D} La nota actual es un PGTD");
              estaEnProyecto = true;
              const proyectoInfo = await this.obtenerDatosProyecto(dv2, archivoActual, configuracion.modo);
              console.log("\u{1F50D} Proyecto info:", proyectoInfo);
              if (proyectoInfo) {
                proyectos = [proyectoInfo];
                console.log("\u{1F50D} Proyecto a\xF1adido a lista. N\xFAmero de campa\xF1as:", proyectoInfo.campanas.length);
              } else {
                console.log("\u{1F50D} No se encontr\xF3 informaci\xF3n del proyecto");
              }
            } else {
              console.log("\u{1F50D} La nota actual NO es un PGTD, es:", metadataActual == null ? void 0 : metadataActual.type);
            }
          } else {
            console.log("\u{1F50D} Archivo actual no encontrado");
          }
        }
        if (!estaEnProyecto || proyectos.length === 0) {
          console.log("\u{1F50D} Obteniendo todos los proyectos");
          proyectos = await this.obtenerTodosLosProyectos(dv2, configuracion.modo);
          console.log("\u{1F50D} Proyectos obtenidos:", proyectos.length);
        }
        container.removeChild(loadingDiv);
        if (proyectos.length === 0) {
          console.log("\u{1F50D} No se encontraron proyectos con campa\xF1as");
          container.appendChild(
            DOMUtils.createElement("div", {
              className: "empty-message",
              textContent: "No se encontraron proyectos con campa\xF1as asociadas."
            })
          );
          return container;
        }
        console.log("\u{1F50D} Proyectos para renderizar:", proyectos.length);
        proyectos.forEach((proy, idx) => {
          console.log(`\u{1F50D} Proyecto ${idx + 1}:`, {
            titulo: proy.titulo,
            path: proy.path,
            numCampanas: proy.campanas.length
          });
        });
        const statsContainer = this.crearEstadisticasGlobales(proyectos);
        container.appendChild(statsContainer);
        const jerarquiaContainer = this.crearVistaJerarquica(proyectos, configuracion.modo);
        container.appendChild(jerarquiaContainer);
      } catch (error) {
        container.removeChild(loadingDiv);
        console.error("\u{1F50D} Error al cargar datos:", error);
        container.appendChild(
          DOMUtils.createErrorMessage(
            `Error al cargar datos de proyectos y campa\xF1as: ${error.message}`,
            "Revisa la consola para m\xE1s detalles."
          )
        );
      }
      return container;
    } catch (error) {
      console.error("\u{1F50D} Error general en generar:", error);
      return DOMUtils.createErrorMessage(
        `Error al generar vista de proyectos y campa\xF1as: ${error.message}`,
        "Revisa la consola para m\xE1s detalles."
      );
    }
  }
  /**
   * Crea los controles para cambiar el modo de visualización
   */
  crearControles(container, config, onCambioModo) {
    const controlsDiv = DOMUtils.createElement("div", {
      className: "dashboard-controls"
    });
    const btnHits = DOMUtils.createButton(
      "Ver por Hits",
      () => onCambioModo("hits"),
      {
        className: `dashboard-btn mode-btn ${config.modo === "hits" ? "active" : ""}`,
        icon: "\u{1F4CA}"
      }
    );
    const btnFechas = DOMUtils.createButton(
      "Ver por Fechas",
      () => onCambioModo("fechas"),
      {
        className: `dashboard-btn mode-btn ${config.modo === "fechas" ? "active" : ""}`,
        icon: "\u{1F4C5}"
      }
    );
    const refreshBtn = DOMUtils.createButton(
      "Actualizar",
      async () => {
        var _a;
        const dv2 = window.DataviewAPI;
        if (dv2) {
          const nuevoContainer = await this.generar(dv2, config);
          (_a = container.parentNode) == null ? void 0 : _a.replaceChild(nuevoContainer, container);
        }
      },
      { className: "dashboard-btn refresh-btn", icon: "\u{1F504}" }
    );
    controlsDiv.appendChild(btnHits);
    controlsDiv.appendChild(btnFechas);
    controlsDiv.appendChild(refreshBtn);
    return controlsDiv;
  }
  /**
   * Crea un contenedor con estadísticas globales
   */
  crearEstadisticasGlobales(proyectos) {
    const statsContainer = DOMUtils.createElement("div", {
      className: "dashboard-stats-container"
    });
    const totalProyectos = proyectos.length;
    let totalProyectosActivos = 0;
    let totalProyectosSuspendidos = 0;
    let totalProyectosArchivados = 0;
    let totalProyectosCancelados = 0;
    let totalCampanas = 0;
    let totalCampanasActivas = 0;
    let totalCampanasSuspendidas = 0;
    let totalCampanasArchivadas = 0;
    let totalCampanasCanceladas = 0;
    let totalEntregables = 0;
    let totalEntregablesActivos = 0;
    let totalEntregablesSuspendidos = 0;
    let totalEntregablesArchivados = 0;
    let totalEntregablesCancelados = 0;
    let totalHits = 0;
    let totalHitsActivos = 0;
    let totalHitsArchivados = 0;
    let entregablesVencidos = 0;
    let entregablesPorVencer = 0;
    proyectos.forEach((proyecto) => {
      switch (proyecto.estado) {
        case "\u{1F7E2}":
          totalProyectosActivos++;
          break;
        case "\u{1F7E1}":
          totalProyectosSuspendidos++;
          break;
        case "\u{1F535}":
          totalProyectosArchivados++;
          break;
        case "\u{1F534}":
          totalProyectosCancelados++;
          break;
      }
      totalCampanas += proyecto.campanas.length;
      if (proyecto.estado === "\u{1F7E2}") {
        totalHitsActivos += proyecto.hits;
      } else if (proyecto.estado === "\u{1F535}") {
        totalHitsArchivados += proyecto.hits;
      }
      totalHits += proyecto.hits;
      proyecto.campanas.forEach((campana) => {
        switch (campana.estado) {
          case "\u{1F7E2}":
            totalCampanasActivas++;
            break;
          case "\u{1F7E1}":
            totalCampanasSuspendidas++;
            break;
          case "\u{1F535}":
            totalCampanasArchivadas++;
            break;
          case "\u{1F534}":
            totalCampanasCanceladas++;
            break;
        }
        totalEntregables += campana.entregables.length;
        campana.entregables.forEach((entregable) => {
          switch (entregable.estado) {
            case "\u{1F7E2}":
              totalEntregablesActivos++;
              break;
            case "\u{1F7E1}":
              totalEntregablesSuspendidos++;
              break;
            case "\u{1F535}":
              totalEntregablesArchivados++;
              break;
            case "\u{1F534}":
              totalEntregablesCancelados++;
              break;
          }
          if (entregable.diferenciaDias !== void 0) {
            if (entregable.estado === "\u{1F7E2}" || entregable.estado === "\u{1F7E1}") {
              if (entregable.diferenciaDias < 0) {
                entregablesVencidos++;
              } else if (entregable.diferenciaDias <= 3) {
                entregablesPorVencer++;
              }
            }
          }
        });
      });
    });
    console.log("\u{1F50D} Estad\xEDsticas globales:", {
      totalProyectos,
      totalCampanas,
      totalEntregables,
      totalHits,
      entregablesVencidos,
      entregablesPorVencer,
      desglose: {
        proyectos: { activos: totalProyectosActivos, suspendidos: totalProyectosSuspendidos, archivados: totalProyectosArchivados, cancelados: totalProyectosCancelados },
        campanas: { activas: totalCampanasActivas, suspendidas: totalCampanasSuspendidas, archivadas: totalCampanasArchivadas, canceladas: totalCampanasCanceladas },
        entregables: { activos: totalEntregablesActivos, suspendidos: totalEntregablesSuspendidos, archivados: totalEntregablesArchivados, cancelados: totalEntregablesCancelados },
        hits: { activos: totalHitsActivos, archivados: totalHitsArchivados }
      }
    });
    this.crearTarjetaEstadistica(statsContainer, "\u{1F4C2}", "Proyectos", totalProyectos);
    this.crearTarjetaEstadistica(statsContainer, "\u{1F4CA}", "Campa\xF1as", totalCampanas);
    this.crearTarjetaEstadistica(statsContainer, "\u{1F4C4}", "Entregables", totalEntregables);
    const etiquetaHits = `Total Hits${totalHitsArchivados > 0 ? "*" : ""}`;
    this.crearTarjetaEstadistica(statsContainer, "\u{1F441}\uFE0F", etiquetaHits, totalHits);
    if (entregablesVencidos > 0) {
      this.crearTarjetaEstadistica(statsContainer, "\u26A0\uFE0F", "Vencidos", entregablesVencidos, "#e74c3c");
    }
    if (entregablesPorVencer > 0) {
      this.crearTarjetaEstadistica(statsContainer, "\u23F0", "Por vencer", entregablesPorVencer, "#f39c12");
    }
    if (totalHitsArchivados > 0) {
      const notaHits = DOMUtils.createElement("div", {
        className: "hits-note",
        textContent: "* El total incluye hits de elementos activos y archivados",
        styles: {
          fontSize: "0.8em",
          color: "var(--text-muted)",
          textAlign: "center",
          marginTop: "8px"
        }
      });
      statsContainer.appendChild(notaHits);
    }
    return statsContainer;
  }
  /**
   * Crea una tarjeta de estadística
   */
  crearTarjetaEstadistica(container, icono, titulo, valor, colorDestacado) {
    const tarjeta = DOMUtils.createElement("div", {
      className: "stats-card"
    });
    if (colorDestacado) {
      tarjeta.style.borderLeft = `4px solid ${colorDestacado}`;
    }
    const iconoEl = DOMUtils.createElement("div", {
      className: "stats-card-icon",
      textContent: icono
    });
    const infoContainer = DOMUtils.createElement("div", {
      className: "stats-card-info"
    });
    const tituloEl = DOMUtils.createElement("div", {
      className: "stats-card-title",
      textContent: titulo
    });
    const valorEl = DOMUtils.createElement("div", {
      className: "stats-card-value",
      textContent: valor.toString()
    });
    if (colorDestacado) {
      valorEl.style.color = colorDestacado;
    }
    infoContainer.appendChild(tituloEl);
    infoContainer.appendChild(valorEl);
    tarjeta.appendChild(iconoEl);
    tarjeta.appendChild(infoContainer);
    container.appendChild(tarjeta);
  }
  /**
   * Crea la vista jerárquica de proyectos y campañas
   */
  crearVistaJerarquica(proyectos, modo) {
    const container = DOMUtils.createElement("div", {
      className: "jerarquia-container"
    });
    const proyectosOrdenados = this.ordenarProyectos(proyectos, modo);
    proyectosOrdenados.forEach((proyecto, idx) => {
      console.log(`\u{1F50D} Renderizando proyecto ${idx + 1}: ${proyecto.titulo} con ${proyecto.campanas.length} campa\xF1as`);
      const proyectoSection = this.crearSeccionProyecto(proyecto, modo);
      container.appendChild(proyectoSection);
    });
    return container;
  }
  /**
   * Crea una sección para un proyecto
   */
  crearSeccionProyecto(proyecto, modo) {
    console.log(`\u{1F50D} Creando secci\xF3n para proyecto: ${proyecto.titulo}. Campa\xF1as: ${proyecto.campanas.length}`);
    const proyectoSection = DOMUtils.createElement("details", {
      className: "proyecto-section",
      attributes: {
        "open": "true"
        // Abierto por defecto
      }
    });
    const proyectoHeader = DOMUtils.createElement("summary", {
      className: "proyecto-header"
    });
    if (proyecto.estado) {
      const estadoSpan = DOMUtils.createElement("span", {
        className: "estado-badge",
        textContent: proyecto.estado
      });
      proyectoHeader.appendChild(estadoSpan);
    }
    try {
      const tituloContainer = DOMUtils.createElement("div", {
        className: "proyecto-titulo-container"
      });
      const iconoProyecto = DOMUtils.createElement("span", {
        className: "proyecto-icono",
        textContent: "\u{1F4C2}"
      });
      tituloContainer.appendChild(iconoProyecto);
      const enlaceProyecto = DOMUtils.createElement("a", {
        className: "proyecto-link",
        textContent: proyecto.titulo || proyecto.alias || "Proyecto sin t\xEDtulo",
        attributes: {
          "data-href": proyecto.path
        },
        events: {
          click: (event) => {
            event.preventDefault();
            event.stopPropagation();
            this.plugin.app.workspace.openLinkText(proyecto.path, "", true);
          }
        }
      });
      tituloContainer.appendChild(enlaceProyecto);
      proyectoHeader.appendChild(tituloContainer);
    } catch (e) {
      console.error(`\u{1F50D} Error al crear enlace del proyecto: ${e.message}`);
      const textoProyecto = DOMUtils.createElement("span", {
        className: "proyecto-titulo",
        textContent: proyecto.titulo || proyecto.alias || "Proyecto sin t\xEDtulo"
      });
      proyectoHeader.appendChild(textoProyecto);
    }
    const metricasContainer = DOMUtils.createElement("div", {
      className: "proyecto-metricas"
    });
    const campanasCount = DOMUtils.createElement("span", {
      className: "campanas-count",
      textContent: `${proyecto.campanas.length} ${proyecto.campanas.length === 1 ? "campa\xF1a" : "campa\xF1as"}`
    });
    metricasContainer.appendChild(campanasCount);
    if (modo === "hits") {
      const hitsCount = DOMUtils.createElement("span", {
        className: "hits-count",
        textContent: `${proyecto.hits} hits`
      });
      metricasContainer.appendChild(hitsCount);
    } else {
      const proximoVencimiento = this.obtenerDiasProximoVencimiento(proyecto);
      if (proximoVencimiento !== null) {
        const vencimientoSpan = DOMUtils.createElement("span", {
          className: `vencimiento-badge ${this.obtenerClaseVencimiento(proximoVencimiento, proyecto.estado)}`,
          textContent: this.formatearDiasVencimiento(proximoVencimiento, proyecto.estado)
        });
        metricasContainer.appendChild(vencimientoSpan);
      } else {
        const vencimientoSpan = DOMUtils.createElement("span", {
          className: "vencimiento-badge",
          textContent: "Sin fechas"
        });
        metricasContainer.appendChild(vencimientoSpan);
      }
    }
    proyectoHeader.appendChild(metricasContainer);
    proyectoSection.appendChild(proyectoHeader);
    const proyectoContent = DOMUtils.createElement("div", {
      className: "proyecto-content"
    });
    const campanasOrdenadas = this.ordenarCampanas(proyecto.campanas, modo);
    if (campanasOrdenadas.length === 0) {
      console.log(`\u{1F50D} \u26A0\uFE0F El proyecto ${proyecto.titulo} no tiene campa\xF1as asociadas`);
      const infoNoData = DOMUtils.createElement("div", {
        className: "empty-message",
        textContent: "Este proyecto no tiene campa\xF1as asociadas."
      });
      proyectoContent.appendChild(infoNoData);
    } else {
      console.log(`\u{1F50D} Renderizando ${campanasOrdenadas.length} campa\xF1as para el proyecto ${proyecto.titulo}`);
      campanasOrdenadas.forEach((campana, idx) => {
        console.log(`\u{1F50D} Creando elemento para campa\xF1a ${idx + 1}: ${campana.titulo}`);
        const campanaElement = this.crearElementoCampana(campana, modo);
        proyectoContent.appendChild(campanaElement);
      });
    }
    proyectoSection.appendChild(proyectoContent);
    return proyectoSection;
  }
  /**
   * Crea un elemento para mostrar una campaña
   */
  crearElementoCampana(campana, modo) {
    const campanaElement = DOMUtils.createElement("details", {
      className: "campana-element",
      attributes: {
        "open": "true"
        // Abierto por defecto
      }
    });
    const campanaHeader = DOMUtils.createElement("summary", {
      className: "campana-header"
    });
    if (campana.estado) {
      const estadoSpan = DOMUtils.createElement("span", {
        className: "estado-badge",
        textContent: campana.estado
      });
      campanaHeader.appendChild(estadoSpan);
    }
    try {
      const tituloContainer = DOMUtils.createElement("div", {
        className: "campana-titulo-container"
      });
      const iconoCampana = DOMUtils.createElement("span", {
        className: "campana-icono",
        textContent: "\u{1F4CA}"
      });
      tituloContainer.appendChild(iconoCampana);
      const enlaceCampana = DOMUtils.createElement("a", {
        className: "campana-link",
        textContent: campana.titulo || campana.alias || "Campa\xF1a sin t\xEDtulo",
        attributes: {
          "data-href": campana.path
        },
        events: {
          click: (event) => {
            event.preventDefault();
            event.stopPropagation();
            this.plugin.app.workspace.openLinkText(campana.path, "", true);
          }
        }
      });
      tituloContainer.appendChild(enlaceCampana);
      campanaHeader.appendChild(tituloContainer);
    } catch (e) {
      console.error(`\u{1F50D} Error al crear enlace de campa\xF1a: ${e.message}`);
      const textoCampana = DOMUtils.createElement("span", {
        className: "campana-titulo",
        textContent: campana.titulo || campana.alias || "Campa\xF1a sin t\xEDtulo"
      });
      campanaHeader.appendChild(textoCampana);
    }
    const metricasContainer = DOMUtils.createElement("div", {
      className: "campana-metricas"
    });
    const entregablesCount = DOMUtils.createElement("span", {
      className: "entregables-count",
      textContent: `${campana.entregables.length} ${campana.entregables.length === 1 ? "entregable" : "entregables"}`
    });
    metricasContainer.appendChild(entregablesCount);
    if (modo === "hits") {
      const hitsCount = DOMUtils.createElement("span", {
        className: "hits-count",
        textContent: `${campana.hits} hits`
      });
      metricasContainer.appendChild(hitsCount);
    } else {
      if (campana.diferenciaDiasProximo !== void 0) {
        const vencimientoSpan = DOMUtils.createElement("span", {
          className: `vencimiento-badge ${this.obtenerClaseVencimiento(campana.diferenciaDiasProximo, campana.estado)}`,
          textContent: this.formatearDiasVencimiento(campana.diferenciaDiasProximo, campana.estado)
        });
        metricasContainer.appendChild(vencimientoSpan);
      } else {
        const vencimientoSpan = DOMUtils.createElement("span", {
          className: "vencimiento-badge",
          textContent: "Sin fechas"
        });
        metricasContainer.appendChild(vencimientoSpan);
      }
    }
    campanaHeader.appendChild(metricasContainer);
    campanaElement.appendChild(campanaHeader);
    const campanaContent = DOMUtils.createElement("div", {
      className: "campana-content"
    });
    if (campana.entregables.length === 0) {
      console.log(`\u{1F50D} \u26A0\uFE0F La campa\xF1a ${campana.titulo} no tiene entregables asociados`);
      const infoNoData = DOMUtils.createElement("div", {
        className: "empty-message",
        textContent: "Esta campa\xF1a no tiene entregables asociados."
      });
      campanaContent.appendChild(infoNoData);
    } else {
      console.log(`\u{1F50D} Renderizando ${campana.entregables.length} entregables para la campa\xF1a ${campana.titulo}`);
      const entregablesOrdenados = this.ordenarEntregables(campana.entregables, modo);
      const tablaEntregables = this.crearTablaEntregables(entregablesOrdenados, modo);
      campanaContent.appendChild(tablaEntregables);
    }
    campanaElement.appendChild(campanaContent);
    return campanaElement;
  }
  /**
   * Crea una tabla para mostrar los entregables
   */
  crearTablaEntregables(entregables, modo) {
    const tabla = DOMUtils.createElement("table", {
      className: "entregables-tabla"
    });
    const thead = DOMUtils.createElement("thead");
    const headerRow = DOMUtils.createElement("tr");
    const columnas = [
      { id: "estado", texto: "Estado", className: "col-estado", width: "40px" },
      { id: "titulo", texto: "Entregable", className: "col-titulo", width: "50%" }
    ];
    if (modo === "hits") {
      columnas.push({ id: "hits", texto: "Hits", className: "col-hits", width: "80px" });
    } else {
      columnas.push({ id: "fecha", texto: "Publicaci\xF3n", className: "col-fecha", width: "120px" });
      columnas.push({ id: "dias", texto: "D\xEDas", className: "col-dias", width: "80px" });
    }
    columnas.forEach((columna) => {
      const th = DOMUtils.createElement("th", {
        className: columna.className,
        textContent: columna.texto,
        styles: {
          width: columna.width
        }
      });
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    tabla.appendChild(thead);
    const tbody = DOMUtils.createElement("tbody");
    entregables.forEach((entregable) => {
      const row = DOMUtils.createElement("tr", {
        className: `entregable-row ${this.obtenerClaseParaEstado(entregable.estado)}`
      });
      const estadoCell = DOMUtils.createElement("td", {
        className: "col-estado"
      });
      const estadoBadge = DOMUtils.createElement("span", {
        className: "estado-badge-small",
        textContent: entregable.estado
      });
      estadoCell.appendChild(estadoBadge);
      row.appendChild(estadoCell);
      const tituloCell = DOMUtils.createElement("td", {
        className: "col-titulo"
      });
      try {
        const enlaceEntregable = DOMUtils.createElement("a", {
          className: "entregable-link",
          textContent: entregable.titulo || entregable.alias || "Entregable sin t\xEDtulo",
          attributes: {
            "data-href": entregable.path
          },
          events: {
            click: (event) => {
              event.preventDefault();
              this.plugin.app.workspace.openLinkText(entregable.path, "", true);
            }
          }
        });
        tituloCell.appendChild(enlaceEntregable);
      } catch (e) {
        console.error(`\u{1F50D} Error al crear enlace del entregable: ${e.message}`);
        const textoEntregable = DOMUtils.createElement("span", {
          textContent: entregable.titulo || entregable.alias || "Entregable sin t\xEDtulo"
        });
        tituloCell.appendChild(textoEntregable);
      }
      row.appendChild(tituloCell);
      if (modo === "hits") {
        const hitsCell = DOMUtils.createElement("td", {
          className: "col-hits",
          textContent: String(entregable.hits || 0)
        });
        row.appendChild(hitsCell);
      } else {
        const fechaCell = DOMUtils.createElement("td", {
          className: "col-fecha",
          textContent: this.formatearFechaPublicacion(entregable.fechaPublicacion)
        });
        row.appendChild(fechaCell);
        const diasCell = DOMUtils.createElement("td", {
          className: "col-dias"
        });
        if (entregable.diferenciaDias !== void 0) {
          const diasSpan = DOMUtils.createElement("span", {
            // Pasar el estado como segundo parámetro para determinar la clase adecuada
            className: `dias-badge ${this.obtenerClaseVencimiento(entregable.diferenciaDias, entregable.estado)}`,
            // Pasar el estado para formatear el texto adecuadamente
            textContent: this.formatearDiasVencimiento(entregable.diferenciaDias, entregable.estado)
          });
          diasCell.appendChild(diasSpan);
        } else {
          diasCell.textContent = "\u2014";
        }
        row.appendChild(diasCell);
      }
      tbody.appendChild(row);
    });
    tabla.appendChild(tbody);
    return tabla;
  }
  /**
   * Obtiene la clase CSS correspondiente al estado de un entregable
   */
  obtenerClaseParaEstado(estado) {
    switch (estado) {
      case "\u{1F7E2}":
        return "estado-activo";
      case "\u{1F7E1}":
        return "estado-espera";
      case "\u{1F534}":
        return "estado-detenido";
      case "\u{1F535}":
        return "estado-archivado";
      default:
        return "";
    }
  }
  /**
  * Obtiene todos los proyectos GTD con sus campañas y entregables asociados - Versión optimizada
  * Incluye todos los estados con prioridad específica
  */
  async obtenerTodosLosProyectos(dv2, modo) {
    var _a, _b, _c;
    try {
      console.log("\u{1F50D} M\xE9todo obtenerTodosLosProyectos iniciado");
      const hoy = window.moment().startOf("day");
      console.log("\u{1F50D} Consultando proyectos PGTD");
      const proyectosGTD = dv2.pages().where((p) => p.type === "PGTD").array();
      console.log(`\u{1F50D} Encontrados ${proyectosGTD.length} proyectos PGTD en total`);
      proyectosGTD.forEach((proy, idx) => {
        console.log(`\u{1F50D} Proyecto PGTD ${idx + 1}: ${proy.titulo || proy.file.basename} (Estado: ${proy.estado || "Sin estado"})`);
        console.log(`    - Path: ${proy.file.path}`);
      });
      console.log("\u{1F50D} Consultando todas las campa\xF1as");
      const todasLasCampanas = dv2.pages().where((p) => p.type === "Cp").array();
      console.log(`\u{1F50D} Encontradas ${todasLasCampanas.length} campa\xF1as en total`);
      todasLasCampanas.forEach((campana, idx) => {
        console.log(`\u{1F50D} Campa\xF1a ${idx + 1}: ${campana.titulo || campana.file.basename} (Estado: ${campana.estado || "Sin estado"})`);
        console.log(`    - Path: ${campana.file.path}`);
        console.log(`    - ProyectoGTD: ${JSON.stringify(campana.proyectoGTD)}`);
      });
      console.log("\u{1F50D} Consultando todos los entregables");
      const todosLosEntregables = dv2.pages().where((p) => p.type === "EMkt").array();
      console.log(`\u{1F50D} Encontrados ${todosLosEntregables.length} entregables en total`);
      const proyectos = [];
      const referenciaApuntaA = (ref, targetPath, targetBasename, targetTitulo) => {
        if (ref && typeof ref === "object" && ref.path) {
          const coincide = ref.path === targetPath;
          if (coincide) {
            console.log(`\u{1F50D} Coincidencia por objeto.path: ${ref.path} === ${targetPath}`);
          }
          return coincide;
        }
        if (ref && typeof ref === "string") {
          const wikiLinkMatch = ref.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
          if (wikiLinkMatch) {
            const path = wikiLinkMatch[1];
            const coincidePorPath2 = path === targetPath;
            const coincidePorNombre2 = path === targetBasename;
            const coincidePorTitulo2 = targetTitulo && path === targetTitulo;
            if (coincidePorPath2 || coincidePorNombre2 || coincidePorTitulo2) {
              console.log(`\u{1F50D} Coincidencia por wikilink: ${path} coincide con ${targetPath}, ${targetBasename} o ${targetTitulo}`);
            }
            return coincidePorPath2 || coincidePorNombre2 || coincidePorTitulo2;
          }
          const coincidePorPath = ref === targetPath;
          const coincidePorNombre = ref === targetBasename;
          const coincidePorTitulo = targetTitulo && ref === targetTitulo;
          if (coincidePorPath || coincidePorNombre || coincidePorTitulo) {
            console.log(`\u{1F50D} Coincidencia directa: ${ref} coincide con ${targetPath}, ${targetBasename} o ${targetTitulo}`);
          }
          return coincidePorPath || coincidePorNombre || coincidePorTitulo;
        }
        return false;
      };
      for (const proy of proyectosGTD) {
        console.log(`\u{1F50D} Procesando proyecto: ${proy.titulo || proy.file.basename}`);
        const campanasDelProyecto = todasLasCampanas.filter((camp) => {
          if (!camp.proyectoGTD) {
            return false;
          }
          const referencias = Array.isArray(camp.proyectoGTD) ? camp.proyectoGTD : [camp.proyectoGTD];
          for (const ref of referencias) {
            if (referenciaApuntaA(ref, proy.file.path, proy.file.basename, proy.titulo)) {
              console.log(`\u{1F50D} \u2705 La campa\xF1a ${camp.titulo || camp.file.basename} est\xE1 asociada al proyecto ${proy.titulo || proy.file.basename}`);
              return true;
            }
          }
          return false;
        });
        console.log(`\u{1F50D} Encontradas ${campanasDelProyecto.length} campa\xF1as para el proyecto ${proy.titulo || proy.file.basename}`);
        if (campanasDelProyecto.length === 0) {
          console.log(`\u{1F50D} \u26A0\uFE0F El proyecto ${proy.titulo || proy.file.basename} no tiene campa\xF1as asociadas, se omitir\xE1`);
          continue;
        }
        const campanasProcessed = [];
        let totalHitsProyecto = 0;
        for (const camp of campanasDelProyecto) {
          console.log(`\u{1F50D} Procesando campa\xF1a: ${camp.titulo || camp.file.basename}`);
          const entregablesDeCampana = todosLosEntregables.filter((ent) => {
            if (!ent.asunto) {
              return false;
            }
            const referencias = Array.isArray(ent.asunto) ? ent.asunto : [ent.asunto];
            for (const ref of referencias) {
              if (referenciaApuntaA(ref, camp.file.path, camp.file.basename, camp.titulo)) {
                console.log(`\u{1F50D} \u2705 El entregable ${ent.titulo || ent.file.basename} est\xE1 asociado a la campa\xF1a ${camp.titulo || camp.file.basename}`);
                return true;
              }
            }
            return false;
          });
          console.log(`\u{1F50D} Encontrados ${entregablesDeCampana.length} entregables para la campa\xF1a ${camp.titulo || camp.file.basename}`);
          const entregablesProcessed = [];
          let totalHitsCampana = 0;
          let minDiasCampana;
          for (const ent of entregablesDeCampana) {
            let diferenciaDias;
            if (ent.publicacion) {
              try {
                const fechaPublicacion = window.moment(ent.publicacion.toString(), "YYYY-MM-DD");
                if (fechaPublicacion.isValid()) {
                  diferenciaDias = fechaPublicacion.diff(hoy, "days");
                  console.log(`\u{1F50D} Entregable ${ent.titulo || ent.file.basename}: publicaci\xF3n ${ent.publicacion} (${diferenciaDias} d\xEDas), estado: ${ent.estado || "Sin estado"}`);
                }
              } catch (e) {
                console.warn(`\u{1F50D} Error procesando fecha para ${ent.file.path}: ${e.message}`);
              }
            }
            if (diferenciaDias !== void 0) {
              const estado = ent.estado || "\u{1F7E1}";
              if (this.entregableAConsiderarParaVencimiento(estado)) {
                if (minDiasCampana === void 0 || diferenciaDias < minDiasCampana) {
                  minDiasCampana = diferenciaDias;
                }
              }
            }
            let hits = 0;
            if (ent.hits !== void 0 && ent.hits !== null) {
              hits = typeof ent.hits === "number" ? ent.hits : parseFloat(ent.hits) || 0;
            }
            const entregableInfo = {
              id: ent.id || `ent-${entregablesProcessed.length}`,
              titulo: ent.titulo || ent.file.basename,
              path: ent.file.path,
              hits,
              estado: ent.estado || "\u{1F7E1}",
              // Por defecto amarillo si no hay estado
              fechaPublicacion: ent.publicacion,
              diferenciaDias,
              alias: (_a = ent.aliases) == null ? void 0 : _a[0]
            };
            entregablesProcessed.push(entregableInfo);
            if (ent.estado === "\u{1F7E2}" || ent.estado === "\u{1F535}") {
              totalHitsCampana += hits;
            }
          }
          const campanaInfo = {
            id: camp.id || `camp-${campanasProcessed.length}`,
            titulo: camp.titulo || camp.file.basename,
            path: camp.file.path,
            entregables: entregablesProcessed,
            hits: totalHitsCampana,
            estado: camp.estado || "\u{1F7E1}",
            // Por defecto amarillo si no hay estado
            fechaInicio: camp.fechaInicio,
            fechaFin: camp.fechaFin,
            alias: (_b = camp.aliases) == null ? void 0 : _b[0],
            diferenciaDiasProximo: minDiasCampana
          };
          campanasProcessed.push(campanaInfo);
          if (camp.estado === "\u{1F7E2}" || camp.estado === "\u{1F535}") {
            totalHitsProyecto += totalHitsCampana;
          }
          console.log(`\u{1F50D} Campa\xF1a ${campanaInfo.titulo} a\xF1adida con ${entregablesProcessed.length} entregables y ${totalHitsCampana} hits`);
        }
        const proyectoInfo = {
          id: proy.id || `proy-${proyectos.length}`,
          titulo: proy.titulo || proy.file.basename,
          path: proy.file.path,
          campanas: campanasProcessed,
          hits: totalHitsProyecto,
          estado: proy.estado || "\u{1F7E1}",
          // Por defecto amarillo si no hay estado
          alias: (_c = proy.aliases) == null ? void 0 : _c[0]
        };
        proyectos.push(proyectoInfo);
        console.log(`\u{1F50D} Proyecto ${proyectoInfo.titulo} a\xF1adido con ${campanasProcessed.length} campa\xF1as y ${totalHitsProyecto} hits`);
      }
      console.log(`\u{1F50D} Total de proyectos procesados con campa\xF1as: ${proyectos.length}`);
      return proyectos;
    } catch (error) {
      console.error("\u{1F50D} Error al obtener datos de proyectos y campa\xF1as:", error);
      throw error;
    }
  }
  /**
   * Obtiene los datos de un proyecto específico
   */
  async obtenerDatosProyecto(dv2, archivoProyecto, modo) {
    try {
      console.log(`\u{1F50D} Obteniendo datos espec\xEDficos para el proyecto: ${archivoProyecto.path}`);
      const proyectos = await this.obtenerTodosLosProyectos(dv2, modo);
      const proyectoEncontrado = proyectos.find((p) => p.path === archivoProyecto.path);
      if (proyectoEncontrado) {
        console.log(`\u{1F50D} Proyecto encontrado: ${proyectoEncontrado.titulo} con ${proyectoEncontrado.campanas.length} campa\xF1as`);
      } else {
        console.log(`\u{1F50D} \u26A0\uFE0F No se encontr\xF3 el proyecto en la lista de proyectos procesados`);
      }
      return proyectoEncontrado || null;
    } catch (error) {
      console.error(`\u{1F50D} Error al obtener datos del proyecto ${archivoProyecto.path}:`, error);
      throw error;
    }
  }
  /**
  * Formatea una fecha en formato ISO a un formato más legible
  * @param fechaStr String de fecha en formato ISO o similar
  * @returns Fecha formateada como "dddd, dd de mm del yyyy"
  */
  formatearFechaPublicacion(fechaStr) {
    if (!fechaStr)
      return "No definida";
    try {
      const fecha = window.moment(fechaStr.toString());
      if (!fecha.isValid()) {
        console.log(`\u{1F50D} Error: Fecha inv\xE1lida ${fechaStr}`);
        return fechaStr;
      }
      const locale = window.moment.locale();
      if (locale !== "es") {
        window.moment.locale("es");
      }
      const fechaFormateada = fecha.format("dddd, DD [de] MMMM [del] YYYY");
      if (locale !== "es") {
        window.moment.locale(locale);
      }
      return fechaFormateada;
    } catch (e) {
      console.warn(`\u{1F50D} Error al formatear fecha: ${e.message}`);
      return fechaStr || "No definida";
    }
  }
  /**
   * Determina la prioridad de un estado para ordenamiento
   * @param estado Emoji de estado
   * @returns Valor numérico de prioridad (menor = mayor prioridad)
   */
  getPrioridadEstado(estado) {
    switch (estado) {
      case "\u{1F7E2}":
        return 1;
      case "\u{1F7E1}":
        return 2;
      case "\u{1F535}":
        return 3;
      case "\u{1F534}":
        return 4;
      default:
        return 5;
    }
  }
  /**
   * Ordena los proyectos según el modo seleccionado y respetando la prioridad de estados
   */
  ordenarProyectos(proyectos, modo) {
    if (modo === "hits") {
      return [...proyectos].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        return b.hits - a.hits;
      });
    } else {
      return [...proyectos].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        const proximoA = this.obtenerDiasProximoVencimiento(a);
        const proximoB = this.obtenerDiasProximoVencimiento(b);
        if (proximoA === null && proximoB === null)
          return 0;
        if (proximoA === null)
          return 1;
        if (proximoB === null)
          return -1;
        return proximoA - proximoB;
      });
    }
  }
  /**
   * Ordena las campañas según el modo seleccionado y respetando la prioridad de estados
   */
  ordenarCampanas(campanas, modo) {
    if (campanas.length === 0) {
      return [];
    }
    if (modo === "hits") {
      return [...campanas].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        return b.hits - a.hits;
      });
    } else {
      return [...campanas].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        if (a.diferenciaDiasProximo === void 0 && b.diferenciaDiasProximo === void 0)
          return 0;
        if (a.diferenciaDiasProximo === void 0)
          return 1;
        if (b.diferenciaDiasProximo === void 0)
          return -1;
        return a.diferenciaDiasProximo - b.diferenciaDiasProximo;
      });
    }
  }
  /**
   * Ordena los entregables según el modo seleccionado y respetando la prioridad de estados
   */
  ordenarEntregables(entregables, modo) {
    if (entregables.length === 0) {
      return [];
    }
    if (modo === "hits") {
      return [...entregables].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        return b.hits - a.hits;
      });
    } else {
      return [...entregables].sort((a, b) => {
        const prioridadA = this.getPrioridadEstado(a.estado);
        const prioridadB = this.getPrioridadEstado(b.estado);
        if (prioridadA !== prioridadB) {
          return prioridadA - prioridadB;
        }
        if (a.diferenciaDias === void 0 && b.diferenciaDias === void 0)
          return 0;
        if (a.diferenciaDias === void 0)
          return 1;
        if (b.diferenciaDias === void 0)
          return -1;
        return a.diferenciaDias - b.diferenciaDias;
      });
    }
  }
  /**
   * Modificaciones clave al ProyectoCampanasComponent para corregir el manejo de fechas según estado
   */
  /**
   * Determina si un entregable debe considerarse para el cálculo de fechas de vencimiento
   * @param estado Estado del entregable (emoji)
   * @returns true si el entregable debe considerarse para vencimientos
   */
  entregableAConsiderarParaVencimiento(estado) {
    return estado === "\u{1F7E2}";
  }
  /**
   * Obtiene los días hasta el próximo vencimiento en un proyecto, considerando solo entregables activos
   */
  obtenerDiasProximoVencimiento(proyecto) {
    let minDias = null;
    proyecto.campanas.forEach((campana) => {
      if (campana.estado === "\u{1F7E2}") {
        if (campana.diferenciaDiasProximo !== void 0) {
          if (minDias === null || campana.diferenciaDiasProximo < minDias) {
            minDias = campana.diferenciaDiasProximo;
          }
        }
      }
    });
    return minDias;
  }
  /**
   * Obtiene la clase CSS para la celda de días según el estado del entregable y su fecha
   * @param diferenciaDias Días hasta la fecha de publicación (negativo si ya pasó)
   * @param estado Estado del entregable
   * @returns Clase CSS para aplicar
   */
  obtenerClaseVencimiento(diferenciaDias, estado = "\u{1F7E2}") {
    if (estado === "\u{1F535}") {
      return "completado";
    }
    if (estado === "\u{1F534}") {
      return "cancelado";
    }
    if (estado === "\u{1F7E1}") {
      return diferenciaDias < 0 ? "pausado-vencido" : "pausado";
    }
    if (diferenciaDias < 0)
      return "vencido";
    if (diferenciaDias <= 1)
      return "hoy";
    if (diferenciaDias <= 3)
      return "proximo";
    if (diferenciaDias <= 7)
      return "cercano";
    return "futuro";
  }
  /**
   * Formatea los días para mostrar de forma legible según el estado del entregable
   * @param diferenciaDias Días hasta la fecha de publicación
   * @param estado Estado del entregable
   * @returns Texto formateado para mostrar
   */
  formatearDiasVencimiento(diferenciaDias, estado = "\u{1F7E2}") {
    if (estado === "\u{1F535}") {
      return "Completado";
    }
    if (estado === "\u{1F534}") {
      return "Cancelado";
    }
    if (estado === "\u{1F7E1}") {
      if (diferenciaDias < 0) {
        const diasAbs = Math.abs(diferenciaDias);
        return `En pausa (${diasAbs} ${diasAbs === 1 ? "d\xEDa" : "d\xEDas"})`;
      }
      return `En pausa (${diferenciaDias} d\xEDas)`;
    }
    if (diferenciaDias === 0)
      return "Hoy";
    if (diferenciaDias === 1)
      return "Ma\xF1ana";
    if (diferenciaDias < 0) {
      const diasAbs = Math.abs(diferenciaDias);
      return `Vencido (${diasAbs} ${diasAbs === 1 ? "d\xEDa" : "d\xEDas"})`;
    }
    return `${diferenciaDias} d\xEDas`;
  }
};

// src/modules/noteLifecycleManager/API/addOnsAPI.ts
var addOnsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tareasInboxComponent = new TareasInboxComponent(plugin);
    this.proyectoCampanasComponent = new ProyectoCampanasComponent(plugin);
  }
  crearPrevNext(paginas, pagIndice, dv2) {
    let pagina = dv2.current();
    let indice;
    for (let a = 0; a < paginas.length; a++) {
      if (paginas[a].file.name == pagina.file.name) {
        indice = a;
      }
    }
    let links = [];
    if (indice == 0 && paginas.length == 1) {
      links[0] = "";
      links[1] = "";
    } else if (indice == 0) {
      links[0] = "";
      links[1] = "\u27A1\uFE0F " + dv2.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    } else if (indice == paginas.length - 1) {
      links[0] = dv2.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "";
    } else {
      links[0] = dv2.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "\u27A1\uFE0F " + dv2.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    }
    dv2.paragraph(links[0] + " ==" + dv2.func.link(pagIndice.file.path, pagIndice.titulo || pagIndice.file.name) + "== " + links[1]);
  }
  determinarTextoEnlace(pagina) {
    if (pagina.titulo) {
      return pagina.titulo;
    } else if (pagina.aliases && pagina.aliases.length > 0) {
      return pagina.aliases[0];
    } else {
      return pagina.file.name;
    }
  }
  /**
   * Genera texto de relaciones con enlaces funcionales y formateado con CSS
   * @param pagina La página actual obtenida a través de dv.current()
   * @param dv El objeto dataview para acceder a sus funciones
   * @returns Objeto HTML para ser usado con dv.paragraph()
   */
  generarTextoRelaciones(pagina, dv2) {
    var _a, _b, _c;
    let texto = `${pagina.typeName || "Entregable"} relacionado a `;
    const relaciones = [];
    if (pagina.asunto && Array.isArray(pagina.asunto)) {
      const asuntoLinks = [];
      for (const entryObj of pagina.asunto) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const asuntoPage = dv2.page(path);
            if (asuntoPage && asuntoPage.file) {
              const alias = ((_a = asuntoPage.file.aliases) == null ? void 0 : _a[0]) || asuntoPage.titulo || asuntoPage.file.name;
              asuntoLinks.push(dv2.fileLink(asuntoPage.file.path, false, alias));
            } else {
              asuntoLinks.push("asunto no encontrado");
            }
          } catch (e) {
            asuntoLinks.push("asunto no encontrado");
          }
        }
      }
      if (asuntoLinks.length > 0) {
        relaciones.push(`asunto: ${asuntoLinks.join(", ")}`);
      } else {
        relaciones.push("asunto: asunto no encontrado");
      }
    }
    if (pagina.proyectoGTD && (Array.isArray(pagina.proyectoGTD) || typeof pagina.proyectoGTD === "string")) {
      const proyectoLinks = [];
      const proyectoArray = Array.isArray(pagina.proyectoGTD) ? pagina.proyectoGTD : [pagina.proyectoGTD];
      for (const entryObj of proyectoArray) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const proyectoPage = dv2.page(path);
            if (proyectoPage && proyectoPage.file) {
              const alias = ((_b = proyectoPage.file.aliases) == null ? void 0 : _b[0]) || proyectoPage.titulo || proyectoPage.file.name;
              proyectoLinks.push(dv2.fileLink(proyectoPage.file.path, false, alias));
            }
          } catch (e) {
            if (typeof entryObj === "string" && entryObj.includes("|")) {
              const partes = entryObj.split("|");
              proyectoLinks.push(partes[partes.length - 1].replace("]]", ""));
            } else {
              const pathParts = path.split("/");
              const fileName = pathParts[pathParts.length - 1].replace(".md", "");
              proyectoLinks.push(fileName);
            }
          }
        }
      }
      if (proyectoLinks.length > 0) {
        relaciones.push(`PGTD: ${proyectoLinks.join(", ")}`);
      }
    }
    if (pagina.areaInteres && (Array.isArray(pagina.areaInteres) || typeof pagina.areaInteres === "string")) {
      const areaLinks = [];
      const areaArray = Array.isArray(pagina.areaInteres) ? pagina.areaInteres : [pagina.areaInteres];
      for (const entryObj of areaArray) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const areaPage = dv2.page(path);
            if (areaPage && areaPage.file) {
              const alias = ((_c = areaPage.file.aliases) == null ? void 0 : _c[0]) || areaPage.titulo || areaPage.file.name;
              areaLinks.push(dv2.fileLink(areaPage.file.path, false, alias));
            }
          } catch (e) {
            if (typeof entryObj === "string" && entryObj.includes("|")) {
              const partes = entryObj.split("|");
              areaLinks.push(partes[partes.length - 1].replace("]]", ""));
            } else {
              const pathParts = path.split("/");
              const fileName = pathParts[pathParts.length - 1].replace(".md", "");
              areaLinks.push(fileName);
            }
          }
        }
      }
      if (areaLinks.length > 0) {
        relaciones.push(`AI: ${areaLinks.join(", ")}`);
      }
    }
    if (pagina.areaVida) {
      let areaVidaText = pagina.areaVida;
      if (typeof pagina.areaVida === "string" && pagina.areaVida.includes("[[")) {
        const match2 = pagina.areaVida.match(/\[\[(.*?)\|(.*?)\]\]/);
        if (match2 && match2.length >= 3) {
          areaVidaText = match2[2];
        } else {
          areaVidaText = pagina.areaVida.replace(/\[\[|\]\]/g, "");
        }
      }
      relaciones.push(`AV: ${areaVidaText}`);
    }
    texto += relaciones.join(", ");
    if (pagina.estado) {
      texto += ` en estado ${pagina.estado}`;
    }
    return dv2.el("span", texto, { cls: "nota-relaciones" });
  }
  /**
   * Genera un árbol de referencias a la nota actual de forma recursiva con elementos toggle
   * @param paginaActual La página actual
   * @param dv Objeto dataview para acceder a sus funciones
   * @param profundidadMaxima Profundidad máxima de recursión (defecto: 3)
   * @param visitadas Set de IDs de páginas ya visitadas para evitar ciclos
   * @param profundidadActual Profundidad actual de recursión
   * @returns Elemento HTML con la estructura de árbol
   */
  generarArbolReferencias(paginaActual, dv2, profundidadMaxima = 3, visitadas = /* @__PURE__ */ new Set(), profundidadActual = 0) {
    if (!paginaActual || !paginaActual.file) {
      console.error("Error: paginaActual no tiene las propiedades necesarias", paginaActual);
      return dv2.el("div", "Error: No se puede generar el \xE1rbol de referencias.", { cls: "backlinks-tree-error" });
    }
    const contenedor = document.createElement("div");
    contenedor.className = "backlinks-tree";
    if (profundidadActual === 0) {
      const tipoNota = paginaActual.typeName || "Nota";
      const alias = paginaActual.file.aliases && paginaActual.file.aliases.length > 0 ? paginaActual.file.aliases[0] : paginaActual.titulo || paginaActual.file.name;
      const titulo = document.createElement("h3");
      titulo.className = "backlinks-tree-title";
      titulo.textContent = `Referencias a ${tipoNota} "${alias}"`;
      contenedor.appendChild(titulo);
    }
    if (profundidadActual >= profundidadMaxima) {
      return contenedor;
    }
    visitadas.add(paginaActual.file.path);
    let todasLasPaginas;
    try {
      todasLasPaginas = dv2.pages();
    } catch (e) {
      console.error("Error al obtener p\xE1ginas:", e);
      const errorMsg = document.createElement("p");
      errorMsg.className = "backlinks-tree-error";
      errorMsg.textContent = "Error al obtener p\xE1ginas de Dataview";
      contenedor.appendChild(errorMsg);
      return contenedor;
    }
    let referenciasDirectas = [];
    try {
      referenciasDirectas = todasLasPaginas.filter((p) => {
        if (!p.asunto)
          return false;
        const asuntos = Array.isArray(p.asunto) ? p.asunto : [p.asunto];
        for (const asunto of asuntos) {
          if (asunto && typeof asunto === "object" && asunto.path === paginaActual.file.path) {
            return true;
          }
          if (typeof asunto === "string" && asunto.includes(paginaActual.file.path)) {
            return true;
          }
          if (typeof asunto === "string") {
            const aliases = paginaActual.file.aliases || [];
            for (const alias of aliases) {
              if (asunto.includes(alias)) {
                return true;
              }
            }
            if (asunto.includes(paginaActual.file.name)) {
              return true;
            }
          }
        }
        return false;
      });
    } catch (e) {
      console.error("Error al filtrar referencias:", e);
      const errorMsg = document.createElement("p");
      errorMsg.className = "backlinks-tree-error";
      errorMsg.textContent = "Error al procesar referencias";
      contenedor.appendChild(errorMsg);
      return contenedor;
    }
    if (referenciasDirectas.length === 0) {
      if (profundidadActual === 0) {
        const mensaje = document.createElement("p");
        mensaje.className = "backlinks-tree-empty";
        mensaje.textContent = "No se encontraron referencias a esta nota";
        contenedor.appendChild(mensaje);
      }
      return contenedor;
    }
    referenciasDirectas = this.ordenarReferencias(referenciasDirectas);
    const lista = document.createElement("ul");
    lista.className = `backlinks-tree-level-${profundidadActual}`;
    for (const referencia of referenciasDirectas) {
      try {
        if (visitadas.has(referencia.file.path)) {
          continue;
        }
        const item = document.createElement("li");
        item.className = "backlinks-tree-item";
        const itemContainer = document.createElement("div");
        itemContainer.className = "backlinks-tree-item-container";
        const tipo = referencia.typeName || "Nota";
        const tipoEl = document.createElement("span");
        tipoEl.className = "backlinks-tree-type";
        tipoEl.textContent = `[${tipo}] `;
        itemContainer.appendChild(tipoEl);
        const estado = referencia.estado || "";
        if (estado) {
          const estadoEl = document.createElement("span");
          estadoEl.className = "backlinks-tree-estado";
          estadoEl.textContent = `${estado} `;
          estadoEl.style.marginRight = "4px";
          itemContainer.appendChild(estadoEl);
        }
        let nombreMostrado = "";
        try {
          nombreMostrado = referencia.file.aliases && referencia.file.aliases.length > 0 ? referencia.file.aliases[0] : referencia.titulo || referencia.file.name;
        } catch (e) {
          nombreMostrado = referencia.file.name || "Sin nombre";
        }
        const enlace = document.createElement("a");
        enlace.textContent = nombreMostrado;
        enlace.className = "internal-link";
        enlace.setAttribute("data-href", referencia.file.path);
        enlace.addEventListener("click", (event) => {
          event.preventDefault();
          const path = event.target.getAttribute("data-href");
          if (path) {
            app.workspace.openLinkText(path, "", true);
          }
        });
        itemContainer.appendChild(enlace);
        try {
          const nuevoVisitadas = /* @__PURE__ */ new Set([...visitadas]);
          nuevoVisitadas.add(referencia.file.path);
          const subReferencias = this.generarArbolReferencias(
            referencia,
            dv2,
            profundidadMaxima,
            nuevoVisitadas,
            profundidadActual + 1
          );
          if (subReferencias.children && subReferencias.children.length > 0) {
            const tieneContenidoUtil = subReferencias.children.length > 1 || subReferencias.children.length === 1 && !subReferencias.children[0].classList.contains("backlinks-tree-title");
            if (tieneContenidoUtil) {
              const toggleButton = document.createElement("span");
              toggleButton.className = "backlinks-tree-toggle";
              toggleButton.textContent = "\u25BA";
              itemContainer.insertBefore(toggleButton, itemContainer.firstChild);
              const subContainer = document.createElement("div");
              subContainer.className = "backlinks-tree-subcontainer";
              subContainer.style.display = "none";
              subContainer.appendChild(subReferencias);
              toggleButton.addEventListener("click", () => {
                if (subContainer.style.display === "none") {
                  subContainer.style.display = "block";
                  toggleButton.textContent = "\u25BC";
                  toggleButton.classList.add("open");
                } else {
                  subContainer.style.display = "none";
                  toggleButton.textContent = "\u25BA";
                  toggleButton.classList.remove("open");
                }
              });
              item.appendChild(itemContainer);
              item.appendChild(subContainer);
            } else {
              item.appendChild(itemContainer);
            }
          } else {
            item.appendChild(itemContainer);
          }
        } catch (e) {
          console.error("Error en la recursi\xF3n para " + referencia.file.path, e);
          const errorMsg = document.createElement("span");
          errorMsg.className = "backlinks-tree-error";
          errorMsg.textContent = " (Error al obtener subreferencias)";
          itemContainer.appendChild(errorMsg);
          item.appendChild(itemContainer);
        }
        lista.appendChild(item);
      } catch (e) {
        console.error("Error al procesar referencia:", e);
        continue;
      }
    }
    try {
      contenedor.appendChild(lista);
    } catch (e) {
      console.error("Error al a\xF1adir lista al contenedor:", e);
      const errorMsg = document.createElement("p");
      errorMsg.className = "backlinks-tree-error";
      errorMsg.textContent = "Error al generar estructura de \xE1rbol";
      contenedor.appendChild(errorMsg);
    }
    return contenedor;
  }
  /**
   * Ordena un array de referencias según tres criterios jerárquicos:
   * 1. Por tipo de nota (typeName)
   * 2. Por estado (sin estado → 🟢 → 🟡 → 🔴 → 🔵)
   * 3. Por fecha de creación (más reciente primero)
   * 
   * @param {Array} referencias - Array de referencias a ordenar
   * @returns {Array} - Array ordenado de referencias
   */
  ordenarReferencias(referencias) {
    const pesoEstado = (estado) => {
      if (!estado)
        return 0;
      switch (estado) {
        case "\u{1F7E2}":
          return 1;
        case "\u{1F7E1}":
          return 2;
        case "\u{1F534}":
          return 3;
        case "\u{1F535}":
          return 4;
        default:
          return 5;
      }
    };
    return [...referencias].sort((a, b) => {
      const tipoA = a.typeName || "";
      const tipoB = b.typeName || "";
      if (tipoA !== tipoB) {
        return tipoA.localeCompare(tipoB);
      }
      const estadoA = pesoEstado(a.estado);
      const estadoB = pesoEstado(b.estado);
      if (estadoA !== estadoB) {
        return estadoA - estadoB;
      }
      let fechaA = a.file && a.file.ctime ? a.file.ctime : 0;
      let fechaB = b.file && b.file.ctime ? b.file.ctime : 0;
      if (!fechaA && a.fecha) {
        try {
          fechaA = new Date(a.fecha).getTime();
        } catch (e) {
          fechaA = 0;
        }
      }
      if (!fechaB && b.fecha) {
        try {
          fechaB = new Date(b.fecha).getTime();
        } catch (e) {
          fechaB = 0;
        }
      }
      return fechaB - fechaA;
    });
  }
  /**
   * Muestra enlaces sincronizados en Notion desde el frontmatter 
   * que comienzan con el prefijo "link-"
   * @param dv El objeto dataview para acceder a sus funciones
   * @param pagina La página actual (normalmente dv.current())
   * @returns El contenedor con los resultados
   */
  mostrarEnlacesSincronizados(dv2, pagina) {
    const contenedor = dv2.el("div", "", { cls: "notion-links-container" });
    try {
      const meta = pagina.file.frontmatter;
      if (!meta) {
        return contenedor;
      }
      const typeName = meta.typeName || "Elemento";
      const isValidUrl = (url) => {
        return typeof url === "string" && url.startsWith("http") && url.length > 8;
      };
      const enlaces = [];
      Object.entries(meta).filter(([key, value]) => key.startsWith("link-") && isValidUrl(value)).forEach(([key, value]) => enlaces.push({
        label: "Notion",
        url: value
      }));
      if (typeName === "Campa\xF1a" && isValidUrl(meta.indicadores)) {
        enlaces.push({
          label: "Indicadores de campa\xF1a",
          url: meta.indicadores
        });
      }
      if (typeName === "Entregable") {
        if (isValidUrl(meta.piezaNube)) {
          enlaces.push({
            label: "Pieza en la nube",
            url: meta.piezaNube
          });
        }
        if (isValidUrl(meta.urlCanva)) {
          enlaces.push({
            label: "Dise\xF1o en Canva",
            url: meta.urlCanva
          });
        }
      }
      if (enlaces.length === 0) {
        return contenedor;
      }
      enlaces.forEach((enlace) => {
        const parrafo = document.createElement("p");
        parrafo.classList.add("notion-link-item");
        parrafo.textContent = `${typeName} - ${enlace.label} en `;
        const linkElement = document.createElement("a");
        linkElement.href = enlace.url;
        linkElement.textContent = enlace.url;
        linkElement.target = "_blank";
        linkElement.rel = "noopener noreferrer";
        parrafo.appendChild(linkElement);
        contenedor.appendChild(parrafo);
      });
    } catch (error) {
      console.error("Error al procesar enlaces sincronizados:", error);
    }
    return contenedor;
  }
  // -------
  /**
   * Procesa y prepara las estadísticas de tiempo para un proyecto
   * @param proyectoPath Ruta completa del archivo del proyecto
   * @returns Objeto con todas las estadísticas y registros procesados
   */
  async obtenerEstadisticasTiempo(proyectoPath) {
    var _a, _b, _c, _d, _e;
    try {
      const folderRT = this.plugin.settings.folder_RegistroTiempo;
      const formatDuration = (ms) => {
        if (ms === null || ms === void 0 || isNaN(ms)) {
          return "No definido";
        } else {
          let minutos = Math.floor(ms / (1e3 * 60));
          let horas = Math.floor(minutos / 60);
          minutos = minutos % 60;
          let dias = Math.floor(horas / 24);
          horas = horas % 24;
          if (dias > 0) {
            return `${dias} d ${horas} h ${minutos} min`;
          } else if (horas > 0) {
            return `${horas} h ${minutos} min`;
          } else {
            return `${minutos} min`;
          }
        }
      };
      const tiempoDesde = (fechaString) => {
        if (!fechaString)
          return "Desconocido";
        try {
          let fecha;
          if (fechaString.includes(" ")) {
            const partes = fechaString.split(" ");
            const fechaSolo = partes[0];
            const horaSolo = partes[partes.length - 1];
            fecha = /* @__PURE__ */ new Date(`${fechaSolo}T${horaSolo}`);
          } else {
            fecha = new Date(fechaString);
          }
          if (isNaN(fecha.getTime())) {
            return "Fecha inv\xE1lida";
          }
          const ahora2 = /* @__PURE__ */ new Date();
          const diferencia = ahora2.getTime() - fecha.getTime();
          const dias = Math.floor(diferencia / (1e3 * 60 * 60 * 24));
          const horas = Math.floor(diferencia % (1e3 * 60 * 60 * 24) / (1e3 * 60 * 60));
          const minutos = Math.floor(diferencia % (1e3 * 60 * 60) / (1e3 * 60));
          if (dias > 30) {
            return `hace ${Math.floor(dias / 30)} meses`;
          } else if (dias > 0) {
            return `hace ${dias} d\xEDas`;
          } else if (horas > 0) {
            return `hace ${horas} horas`;
          } else {
            return `hace ${minutos} minutos`;
          }
        } catch (e) {
          console.error("Error al procesar fecha:", e);
          return "Error en fecha";
        }
      };
      const proyectoFile = app.vault.getAbstractFileByPath(proyectoPath);
      if (!proyectoFile) {
        return { error: "Proyecto no encontrado" };
      }
      const metadataProyecto = (_a = app.metadataCache.getFileCache(proyectoFile)) == null ? void 0 : _a.frontmatter;
      const proyectoAlias = ((_b = metadataProyecto == null ? void 0 : metadataProyecto.aliases) == null ? void 0 : _b[0]) || (metadataProyecto == null ? void 0 : metadataProyecto.titulo) || proyectoFile.basename;
      const ahora = /* @__PURE__ */ new Date();
      const limite7Dias = new Date(ahora);
      limite7Dias.setDate(ahora.getDate() - 7);
      const limite30Dias = new Date(ahora);
      limite30Dias.setDate(ahora.getDate() - 30);
      let registros = [];
      const allFiles = app.vault.getMarkdownFiles().filter((file) => file.path.startsWith(folderRT + "/"));
      for (const file of allFiles) {
        try {
          const metadata = (_c = app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter;
          if (!metadata)
            continue;
          let estaRelacionado = false;
          if (metadata.proyectoGTD) {
            if (Array.isArray(metadata.proyectoGTD)) {
              for (const proyecto of metadata.proyectoGTD) {
                const proyectoLimpio = proyecto.replace(/\[\[|\]\]/g, "");
                if (proyectoLimpio.includes(proyectoPath) || proyectoLimpio.includes(proyectoFile.basename) || proyectoAlias && proyectoLimpio.includes(proyectoAlias)) {
                  estaRelacionado = true;
                  break;
                }
              }
            } else if (typeof metadata.proyectoGTD === "string") {
              const proyectoLimpio = metadata.proyectoGTD.replace(/\[\[|\]\]/g, "");
              if (proyectoLimpio.includes(proyectoPath) || proyectoLimpio.includes(proyectoFile.basename) || proyectoAlias && proyectoLimpio.includes(proyectoAlias)) {
                estaRelacionado = true;
              }
            }
          }
          if (estaRelacionado) {
            let asuntoAlias = null;
            if (metadata.asunto && metadata.asunto.length > 0) {
              try {
                const asuntoStr = metadata.asunto[0];
                const asuntoMatch = asuntoStr.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
                if (asuntoMatch) {
                  const asuntoPath = asuntoMatch[1];
                  const asuntoFile = app.vault.getAbstractFileByPath(asuntoPath + ".md");
                  if (asuntoFile) {
                    const asuntoMetadata = (_d = app.metadataCache.getFileCache(asuntoFile)) == null ? void 0 : _d.frontmatter;
                    asuntoAlias = ((_e = asuntoMetadata == null ? void 0 : asuntoMetadata.aliases) == null ? void 0 : _e[0]) || (asuntoMetadata == null ? void 0 : asuntoMetadata.titulo) || asuntoFile.basename;
                  }
                }
              } catch (e) {
                console.error("Error procesando asunto:", e);
              }
            }
            const registro = {
              path: file.path,
              basename: file.basename,
              descripcion: metadata.descripcion || "Sin descripci\xF3n",
              tiempoTrabajado: metadata.tiempoTrabajado || 0,
              estado: metadata.estado || "\u{1F504}",
              horaInicio: metadata.horaInicio || metadata.fecha || "Desconocido",
              horaFinal: metadata.horaFinal || "",
              asuntoAlias,
              aliases: metadata.aliases || []
            };
            registros.push(registro);
          }
        } catch (error) {
          console.error(`Error procesando archivo ${file.path}:`, error);
        }
      }
      registros.sort((a, b) => {
        if (a.horaFinal && b.horaFinal) {
          return new Date(b.horaFinal).getTime() - new Date(a.horaFinal).getTime();
        }
        return new Date(b.horaInicio).getTime() - new Date(a.horaInicio).getTime();
      });
      let totalTiempoTrabajado = 0;
      let ultimaActividad = registros.length > 0 ? registros[0].horaFinal || registros[0].horaInicio : null;
      let tiempoUltimos7Dias = 0;
      let tiempoUltimos30Dias = 0;
      for (let registro of registros) {
        totalTiempoTrabajado += registro.tiempoTrabajado;
        let fechaRegistro;
        if (registro.horaFinal) {
          const partes = registro.horaFinal.split(" ");
          const fechaSolo = partes[0];
          fechaRegistro = new Date(fechaSolo);
        } else if (registro.horaInicio) {
          const partesFecha = registro.horaInicio.split(" ");
          fechaRegistro = new Date(partesFecha[0]);
        }
        if (fechaRegistro) {
          if (fechaRegistro >= limite7Dias) {
            tiempoUltimos7Dias += registro.tiempoTrabajado;
          }
          if (fechaRegistro >= limite30Dias) {
            tiempoUltimos30Dias += registro.tiempoTrabajado;
          }
        }
        registro.tiempoFormateado = formatDuration(registro.tiempoTrabajado);
      }
      return {
        proyecto: {
          path: proyectoPath,
          nombre: proyectoFile.basename,
          alias: proyectoAlias
        },
        estadisticas: {
          totalTiempoTrabajado: {
            valor: totalTiempoTrabajado,
            formateado: formatDuration(totalTiempoTrabajado)
          },
          numSesiones: registros.length,
          ultimaActividad: {
            fecha: ultimaActividad,
            tiempoDesde: ultimaActividad ? tiempoDesde(ultimaActividad) : "Sin actividad"
          },
          ultimos7Dias: {
            valor: tiempoUltimos7Dias,
            formateado: formatDuration(tiempoUltimos7Dias)
          },
          ultimos30Dias: {
            valor: tiempoUltimos30Dias,
            formateado: formatDuration(tiempoUltimos30Dias)
          }
        },
        registros
      };
    } catch (error) {
      console.error("Error en obtenerEstadisticasTiempo:", error);
      return { error: "Error procesando estad\xEDsticas de tiempo: " + error.message };
    }
  }
  /**
   * Genera el HTML para mostrar las estadísticas de tiempo
   * @param dv Objeto dataview para crear elementos
   * @param datos Objeto con los datos obtenidos de obtenerEstadisticasTiempo
   * @returns Elemento HTML con las estadísticas visualizadas
   */
  mostrarEstadisticasTiempo(dv2, datos) {
    var _a, _b;
    try {
      if (datos.error) {
        const errorDiv = document.createElement("div");
        errorDiv.className = "tiempo-stats-error";
        errorDiv.textContent = datos.error;
        return errorDiv;
      }
      const { estadisticas, registros, proyecto } = datos;
      const contenedor = document.createElement("div");
      contenedor.className = "tiempo-stats-container";
      contenedor.style.padding = "16px 0";
      contenedor.style.width = "100%";
      contenedor.style.boxSizing = "border-box";
      if (!registros || registros.length === 0) {
        const mensajeVacio = document.createElement("p");
        mensajeVacio.className = "tiempo-stats-empty-message";
        mensajeVacio.textContent = "No se encontraron registros de tiempo para este proyecto.";
        contenedor.appendChild(mensajeVacio);
        return contenedor;
      }
      const statsContainer = document.createElement("div");
      statsContainer.className = "tiempo-stats-summary";
      const infoEstadisticas = [
        {
          titulo: "Tiempo Total",
          valor: estadisticas.totalTiempoTrabajado.formateado,
          icono: "\u23F1\uFE0F"
        },
        {
          titulo: "Sesiones",
          valor: estadisticas.numSesiones,
          icono: "\u{1F504}"
        },
        {
          titulo: "\xDAltima Actividad",
          valor: estadisticas.ultimaActividad.tiempoDesde,
          icono: "\u{1F552}"
        },
        {
          titulo: "\xDAltimos 7 d\xEDas",
          valor: ((_a = estadisticas.ultimos7Dias) == null ? void 0 : _a.formateado) || "N/A",
          icono: "\u{1F4C5}"
        },
        {
          titulo: "\xDAltimos 30 d\xEDas",
          valor: ((_b = estadisticas.ultimos30Dias) == null ? void 0 : _b.formateado) || "N/A",
          icono: "\u{1F4C6}"
        }
      ];
      const statsGrid = document.createElement("div");
      statsGrid.className = "tiempo-stats-grid";
      for (const stat of infoEstadisticas) {
        const tarjeta = document.createElement("div");
        tarjeta.className = "tiempo-stat-card";
        const icono = document.createElement("span");
        icono.className = "tiempo-stat-icon";
        icono.textContent = stat.icono;
        const titulo = document.createElement("div");
        titulo.className = "tiempo-stat-title";
        titulo.textContent = stat.titulo;
        const valor = document.createElement("div");
        valor.className = "tiempo-stat-value";
        valor.textContent = stat.valor;
        tarjeta.appendChild(icono);
        tarjeta.appendChild(titulo);
        tarjeta.appendChild(valor);
        statsGrid.appendChild(tarjeta);
      }
      statsContainer.appendChild(statsGrid);
      contenedor.appendChild(statsContainer);
      if (estadisticas.sesionActiva) {
        const activoContainer = document.createElement("div");
        activoContainer.className = "tiempo-sesion-activa-container";
        const tituloActivo = document.createElement("h3");
        tituloActivo.className = "tiempo-activo-title";
        tituloActivo.textContent = "Sesi\xF3n activa";
        activoContainer.appendChild(tituloActivo);
        const registroActivo = registros.find((r) => r.estado === "\u{1F7E2}");
        if (registroActivo) {
          const tarjetaActiva = document.createElement("div");
          tarjetaActiva.className = "tiempo-activo-card";
          const descActiva = document.createElement("div");
          descActiva.className = "tiempo-activo-descripcion";
          descActiva.textContent = registroActivo.descripcion;
          tarjetaActiva.appendChild(descActiva);
          const tiempoEjecucion = document.createElement("div");
          tiempoEjecucion.className = "tiempo-ejecucion";
          tiempoEjecucion.id = `tiempo-ejecucion-${estadisticas.sesionActiva.id}`;
          tiempoEjecucion.textContent = estadisticas.sesionActiva.tiempoFormateado;
          tarjetaActiva.appendChild(tiempoEjecucion);
          const enlaceRegistro = document.createElement("a");
          enlaceRegistro.className = "tiempo-activo-enlace internal-link";
          enlaceRegistro.href = registroActivo.path;
          enlaceRegistro.setAttribute("data-href", registroActivo.path);
          enlaceRegistro.textContent = "Ver registro completo";
          enlaceRegistro.addEventListener("click", (event) => {
            event.preventDefault();
            const href = enlaceRegistro.getAttribute("data-href");
            if (href) {
              app.workspace.openLinkText(href, "", false);
            }
          });
          tarjetaActiva.appendChild(enlaceRegistro);
          activoContainer.appendChild(tarjetaActiva);
        }
        contenedor.appendChild(activoContainer);
      }
      const tituloTabla = document.createElement("h3");
      tituloTabla.className = "tiempo-table-title";
      tituloTabla.textContent = "Registros de tiempo";
      contenedor.appendChild(tituloTabla);
      const tabla = document.createElement("table");
      tabla.className = "tiempo-registros-table";
      tabla.style.width = "100%";
      tabla.style.tableLayout = "fixed";
      tabla.style.borderCollapse = "collapse";
      tabla.style.margin = "0";
      tabla.style.padding = "0";
      const encabezado = document.createElement("thead");
      const filaEncabezado = document.createElement("tr");
      const encabezados = [
        { texto: "Descripci\xF3n", ancho: "60%", align: "left" },
        { texto: "Duraci\xF3n", ancho: "15%", align: "center" },
        { texto: "Fecha", ancho: "25%", align: "left" }
      ];
      for (const { texto, ancho, align } of encabezados) {
        const th = document.createElement("th");
        th.textContent = texto;
        th.style.width = ancho;
        th.style.textAlign = align;
        th.style.padding = "10px";
        if (texto === "Descripci\xF3n") {
          th.style.paddingLeft = "0";
        }
        filaEncabezado.appendChild(th);
      }
      encabezado.appendChild(filaEncabezado);
      tabla.appendChild(encabezado);
      const cuerpo = document.createElement("tbody");
      for (const registro of registros) {
        const fila = document.createElement("tr");
        const celdaDescripcion = document.createElement("td");
        celdaDescripcion.style.width = "60%";
        celdaDescripcion.style.paddingLeft = "0";
        celdaDescripcion.style.whiteSpace = "normal";
        celdaDescripcion.style.wordWrap = "break-word";
        celdaDescripcion.style.wordBreak = "break-word";
        celdaDescripcion.style.overflowWrap = "break-word";
        try {
          const descripcionDiv = document.createElement("div");
          descripcionDiv.style.display = "inline";
          descripcionDiv.style.whiteSpace = "normal";
          descripcionDiv.style.wordWrap = "break-word";
          descripcionDiv.style.wordBreak = "break-word";
          descripcionDiv.textContent = registro.descripcion || "Sin descripci\xF3n";
          celdaDescripcion.appendChild(descripcionDiv);
          const enlaceSpan = document.createElement("span");
          enlaceSpan.className = "tiempo-ver-mas";
          enlaceSpan.appendChild(document.createTextNode(" ("));
          const enlace = document.createElement("a");
          enlace.className = "internal-link";
          enlace.href = registro.path;
          enlace.setAttribute("data-href", registro.path);
          enlace.textContent = "ver";
          enlace.addEventListener("click", (event) => {
            event.preventDefault();
            const href = enlace.getAttribute("data-href");
            if (href) {
              app.workspace.openLinkText(href, "", false);
            }
          });
          enlaceSpan.appendChild(enlace);
          enlaceSpan.appendChild(document.createTextNode(")"));
          celdaDescripcion.appendChild(enlaceSpan);
        } catch (e) {
          celdaDescripcion.textContent = registro.descripcion || "Sin descripci\xF3n";
        }
        fila.appendChild(celdaDescripcion);
        const celdaDuracion = document.createElement("td");
        celdaDuracion.style.width = "15%";
        celdaDuracion.style.textAlign = "center";
        celdaDuracion.textContent = registro.tiempoFormateado;
        fila.appendChild(celdaDuracion);
        const celdaFecha = document.createElement("td");
        celdaFecha.style.width = "25%";
        celdaFecha.style.whiteSpace = "normal";
        celdaFecha.style.wordWrap = "break-word";
        celdaFecha.textContent = registro.horaFinal || registro.horaInicio;
        fila.appendChild(celdaFecha);
        cuerpo.appendChild(fila);
      }
      tabla.appendChild(cuerpo);
      contenedor.appendChild(tabla);
      return contenedor;
    } catch (error) {
      console.error("Error al mostrar estad\xEDsticas de tiempo:", error);
      const errorDiv = document.createElement("div");
      errorDiv.className = "tiempo-stats-error";
      errorDiv.textContent = "Error al mostrar estad\xEDsticas: " + error.message;
      return errorDiv;
    }
  }
  // ---- TAREAS
  /**
   * Genera un árbol de tareas pendientes y en progreso de la nota actual y sus referencias
   * @param {Object} paginaActual - La página actual obtenida a través de dv.current()
   * @param {Object} dv - El objeto dataview para acceder a sus funciones
   * @param {Number} profundidadMaxima - Profundidad máxima de recursión (defecto: 3)
   * @param {Set} visitadas - Set de IDs de páginas ya visitadas para evitar ciclos
   * @param {Number} profundidadActual - Profundidad actual de recursión
   * @param {Boolean} esReferenciaNidada - Indica si es una referencia nidada (para evitar duplicación)
   * @returns {HTMLElement} - Elemento HTML con la estructura de árbol de tareas
   */
  async generarArbolTareas(paginaActual, dv2, profundidadMaxima = 3, visitadas = /* @__PURE__ */ new Set(), profundidadActual = 0, esReferenciaNidada = false) {
    if (!paginaActual || !paginaActual.file) {
      console.error("Error: paginaActual no tiene las propiedades necesarias", paginaActual);
      return dv2.el("div", "Error: No se puede generar el \xE1rbol de tareas.", { cls: "tasks-tree-error" });
    }
    console.log(`Procesando tareas de: ${paginaActual.file.path} (profundidad: ${profundidadActual}, esReferenciaNidada: ${esReferenciaNidada})`);
    const contenedor = document.createElement("div");
    contenedor.className = "tasks-tree";
    if (profundidadActual === 0) {
      const tipoNota = paginaActual.typeName || "Nota";
      const alias = paginaActual.file.aliases && paginaActual.file.aliases.length > 0 ? paginaActual.file.aliases[0] : paginaActual.titulo || paginaActual.file.name;
      const titulo = document.createElement("h3");
      titulo.className = "tasks-tree-title";
      titulo.textContent = "Tareas pendientes";
      contenedor.appendChild(titulo);
    }
    if (profundidadActual >= profundidadMaxima) {
      return contenedor;
    }
    visitadas.add(paginaActual.file.path);
    let tareas;
    try {
      tareas = await this.extraerTareasDePagina(paginaActual, dv2);
      console.log(`Encontradas ${tareas.length} tareas en ${paginaActual.file.path}`);
    } catch (e) {
      console.error(`Error al extraer tareas de ${paginaActual.file.path}:`, e);
      tareas = [];
    }
    let todasLasPaginas;
    try {
      todasLasPaginas = dv2.pages();
    } catch (e) {
      console.error("Error al obtener p\xE1ginas:", e);
      const errorMsg = document.createElement("p");
      errorMsg.textContent = "Error al obtener p\xE1ginas de Dataview";
      errorMsg.className = "tasks-tree-error";
      contenedor.appendChild(errorMsg);
      if (tareas.length > 0) {
        this.agregarTareasAContenedor(tareas, contenedor, dv2, paginaActual);
      }
      return contenedor;
    }
    let referenciasDirectas = [];
    try {
      const referenciaAPaginaActual = (asunto) => {
        try {
          if (asunto && typeof asunto === "object" && asunto.path === paginaActual.file.path) {
            return true;
          }
          if (typeof asunto === "string") {
            if (asunto.includes(paginaActual.file.path)) {
              return true;
            }
            if (paginaActual.file.aliases && Array.isArray(paginaActual.file.aliases)) {
              for (const alias of paginaActual.file.aliases) {
                if (alias && asunto.includes(alias)) {
                  return true;
                }
              }
            }
            if (paginaActual.file.name && asunto.includes(paginaActual.file.name)) {
              return true;
            }
            const titulo = paginaActual.titulo || paginaActual.title;
            if (titulo && asunto.includes(titulo)) {
              return true;
            }
          }
          return false;
        } catch (err) {
          console.warn("Error al verificar referencia:", err);
          return false;
        }
      };
      referenciasDirectas = todasLasPaginas.filter((p) => {
        try {
          if (!p || !p.asunto)
            return false;
          const asuntos = Array.isArray(p.asunto) ? p.asunto : [p.asunto];
          for (const asunto of asuntos) {
            if (referenciaAPaginaActual(asunto)) {
              return true;
            }
          }
          return false;
        } catch (err) {
          console.warn("Error al filtrar p\xE1gina:", err, p);
          return false;
        }
      });
      console.log(`Encontradas ${referenciasDirectas.length} referencias directas a ${paginaActual.file.path}`);
    } catch (e) {
      console.error("Error al filtrar referencias:", e);
      const errorMsg = document.createElement("p");
      errorMsg.textContent = "Error al procesar referencias";
      errorMsg.className = "tasks-tree-error";
      contenedor.appendChild(errorMsg);
      if (tareas.length > 0) {
        this.agregarTareasAContenedor(tareas, contenedor, dv2, paginaActual);
      }
      return contenedor;
    }
    const hayTareasEnActual = tareas.length > 0;
    const referenciasConTareas = [];
    const referenciasConTareasHeredadas = [];
    for (const referencia of referenciasDirectas) {
      if (visitadas.has(referencia.file.path)) {
        continue;
      }
      try {
        const tareasReferencia = await this.extraerTareasDePagina(referencia, dv2);
        let tieneTareasHeredadas = false;
        let refAnidadasConTareas = [];
        const nuevoVisitadas = /* @__PURE__ */ new Set([...visitadas]);
        nuevoVisitadas.add(referencia.file.path);
        const resultadoAnidado = await this.generarArbolTareas(
          referencia,
          dv2,
          profundidadMaxima,
          nuevoVisitadas,
          profundidadActual + 1,
          true
          // Es una referencia nidada
        );
        if (resultadoAnidado && resultadoAnidado.nodeType) {
          const tareasAnidadas = resultadoAnidado.querySelectorAll(".tasks-item");
          tieneTareasHeredadas = tareasAnidadas.length > 0;
          if (tieneTareasHeredadas) {
            refAnidadasConTareas.push({
              referencia,
              resultado: resultadoAnidado
            });
          }
        }
        if (tareasReferencia.length > 0) {
          referenciasConTareas.push({
            referencia,
            tareas: tareasReferencia,
            refAnidadas: refAnidadasConTareas
          });
        } else if (tieneTareasHeredadas) {
          referenciasConTareasHeredadas.push({
            referencia,
            tareas: [],
            // No tiene tareas propias
            refAnidadas: refAnidadasConTareas
          });
        }
      } catch (e) {
        console.error(`Error al procesar referencia ${referencia.file.path}:`, e);
      }
    }
    const todasLasReferenciasConTareas = [...referenciasConTareas, ...referenciasConTareasHeredadas];
    const hayTareasEnReferencias = todasLasReferenciasConTareas.length > 0;
    if (!hayTareasEnActual && !hayTareasEnReferencias && profundidadActual > 0) {
      return contenedor;
    }
    if (hayTareasEnActual && (!esReferenciaNidada || profundidadActual === 0)) {
      const seccionActual = document.createElement("div");
      seccionActual.className = "tasks-node-current";
      if (hayTareasEnReferencias) {
        const encabezadoActual = document.createElement("div");
        encabezadoActual.className = "tasks-node-header";
        encabezadoActual.textContent = "Tareas directas";
        seccionActual.appendChild(encabezadoActual);
      }
      this.agregarTareasAContenedor(tareas, seccionActual, dv2, paginaActual);
      contenedor.appendChild(seccionActual);
    }
    if (hayTareasEnReferencias) {
      const seccionReferencias = document.createElement("div");
      seccionReferencias.className = "tasks-refs-container";
      if (hayTareasEnActual && (!esReferenciaNidada || profundidadActual === 0)) {
        const encabezadoRefs = document.createElement("div");
        encabezadoRefs.className = "tasks-refs-header";
        encabezadoRefs.textContent = "Tareas en notas relacionadas";
        seccionReferencias.appendChild(encabezadoRefs);
      }
      const listaRefs = document.createElement("ul");
      listaRefs.className = "tasks-refs-list";
      for (const { referencia, tareas: tareas2, refAnidadas } of todasLasReferenciasConTareas) {
        const itemRef = document.createElement("li");
        itemRef.className = "tasks-ref-item";
        const headerRef = this.crearEncabezadoReferencia(referencia, dv2, tareas2.length);
        itemRef.appendChild(headerRef);
        if (tareas2.length > 0) {
          const tareasContainer = document.createElement("div");
          tareasContainer.className = "tasks-container";
          tareasContainer.setAttribute("data-path", referencia.file.path);
          this.agregarTareasAContenedor(tareas2, tareasContainer, dv2, referencia);
          itemRef.appendChild(tareasContainer);
        }
        if (refAnidadas && refAnidadas.length > 0) {
          for (const { resultado } of refAnidadas) {
            if (resultado && resultado.nodeType) {
              const tituloRepetido = resultado.querySelector(".tasks-tree-title");
              if (tituloRepetido) {
                tituloRepetido.remove();
              }
              resultado.classList.add("tasks-subrefs-container");
              itemRef.appendChild(resultado);
            }
          }
        }
        listaRefs.appendChild(itemRef);
      }
      seccionReferencias.appendChild(listaRefs);
      contenedor.appendChild(seccionReferencias);
    }
    if (!hayTareasEnActual && !hayTareasEnReferencias && profundidadActual === 0) {
      const mensaje = document.createElement("p");
      mensaje.textContent = "No se encontraron tareas pendientes o en progreso";
      mensaje.className = "tasks-tree-empty";
      contenedor.appendChild(mensaje);
    }
    return contenedor;
  }
  /**
   * Extrae las tareas pendientes y en progreso de una página
   * @param {Object} pagina - La página de la que extraer tareas
   * @param {Object} dv - El objeto dataview
   * @returns {Array} - Array de objetos con las tareas extraídas
   */
  async extraerTareasDePagina(pagina, dv2) {
    var _a;
    try {
      if (!pagina || !pagina.file || !pagina.file.path) {
        console.warn("P\xE1gina o archivo no v\xE1lido:", pagina);
        return [];
      }
      let contenido;
      try {
        if (dv2 && typeof dv2.io !== "undefined" && typeof dv2.io.load === "function") {
          contenido = await dv2.io.load(pagina.file.path);
        } else {
          const archivo = app.vault.getAbstractFileByPath(pagina.file.path);
          if (archivo && archivo instanceof app.TFile) {
            contenido = await app.vault.read(archivo);
          } else {
            throw new Error("No se pudo encontrar el archivo");
          }
        }
      } catch (readError) {
        console.warn(`No se pudo leer el archivo ${pagina.file.path}:`, readError);
        return [];
      }
      if (!contenido) {
        console.warn(`No se pudo obtener contenido para ${pagina.file.path}`);
        return [];
      }
      const lineas = contenido.split("\n");
      const tareas = [];
      for (let i = 0; i < lineas.length; i++) {
        const linea = lineas[i];
        const tareaRegex = /^(\s*)-\s*\[([ \/])\]\s*(.+)$/;
        const coincidencia = tareaRegex.exec(linea);
        if (coincidencia) {
          const indentacion = coincidencia[1];
          const estado = coincidencia[2] === " " ? "pendiente" : "progreso";
          const texto = coincidencia[3].trim();
          const tarea = {
            texto,
            estado,
            indentacion: indentacion.length,
            lineaIndice: i,
            lineaOriginal: linea
          };
          tareas.push(tarea);
        }
      }
      return tareas;
    } catch (error) {
      console.error(`Error al extraer tareas de ${((_a = pagina == null ? void 0 : pagina.file) == null ? void 0 : _a.path) || "p\xE1gina desconocida"}:`, error);
      return [];
    }
  }
  /**
   * Crea el encabezado para una referencia con contador de tareas
   * @param {Object} referencia - La referencia para la que crear el encabezado
   * @param {Object} dv - El objeto dataview
   * @param {Number} numTareas - Número de tareas en esta referencia
   * @returns {HTMLElement} - Elemento HTML con el encabezado
   */
  crearEncabezadoReferencia(referencia, dv2, numTareas) {
    const header = document.createElement("div");
    header.className = "tasks-ref-header";
    const toggleBtn = document.createElement("span");
    toggleBtn.textContent = "\u25BC";
    toggleBtn.className = "tasks-toggle-btn";
    toggleBtn.setAttribute("data-state", "expanded");
    toggleBtn.setAttribute("title", "Colapsar/Expandir");
    toggleBtn.addEventListener("click", function(event) {
      const currentState = this.getAttribute("data-state");
      const newState = currentState === "expanded" ? "collapsed" : "expanded";
      this.setAttribute("data-state", newState);
      this.textContent = newState === "expanded" ? "\u25BC" : "\u25B6";
      const headerElement = this.closest(".tasks-ref-header");
      if (headerElement && headerElement.parentNode) {
        const listItem = headerElement.parentNode;
        const containers = listItem.querySelectorAll(".tasks-container, .tasks-subrefs-container");
        containers.forEach((container) => {
          container.style.display = newState === "expanded" ? "block" : "none";
        });
      }
      event.stopPropagation();
    });
    header.appendChild(toggleBtn);
    let nombreMostrado = referencia.file.aliases && referencia.file.aliases.length > 0 ? referencia.file.aliases[0] : referencia.titulo || referencia.file.name;
    const tipo = referencia.typeName;
    if (tipo) {
      const tipoSpan = document.createElement("span");
      tipoSpan.className = "tasks-ref-type";
      tipoSpan.textContent = `[${tipo}] `;
      header.appendChild(tipoSpan);
    }
    if (referencia.estado) {
      const estadoEl = document.createElement("span");
      estadoEl.className = "tasks-ref-state";
      estadoEl.textContent = `${referencia.estado} `;
      estadoEl.style.marginRight = "5px";
      header.appendChild(estadoEl);
    }
    try {
      const enlace = document.createElement("a");
      enlace.className = "internal-link tasks-ref-link";
      enlace.href = referencia.file.path;
      enlace.setAttribute("data-href", referencia.file.path);
      enlace.textContent = nombreMostrado;
      enlace.addEventListener("click", (event) => {
        event.preventDefault();
        app.workspace.openLinkText(referencia.file.path, "", true);
      });
      header.appendChild(enlace);
    } catch (e) {
      console.error("Error al crear enlace:", e);
      const textoPlano = document.createElement("span");
      textoPlano.className = "tasks-ref-name";
      textoPlano.textContent = nombreMostrado;
      header.appendChild(textoPlano);
    }
    const contador = document.createElement("span");
    contador.className = "tasks-count";
    contador.textContent = `(${numTareas})`;
    header.appendChild(contador);
    return header;
  }
  /**
   * Agrega un conjunto de tareas a un contenedor DOM
   * @param {Array} tareas - Array de objetos de tareas
   * @param {HTMLElement} contenedor - Contenedor al que añadir las tareas
   * @param {Object} dv - Objeto dataview
   * @param {Object} pagina - Página a la que pertenecen las tareas
   */
  agregarTareasAContenedor(tareas, contenedor, dv2, pagina) {
    if (!tareas || tareas.length === 0)
      return;
    const lista = document.createElement("ul");
    lista.className = "tasks-list";
    for (const tarea of tareas) {
      const item = document.createElement("li");
      item.className = `tasks-item tasks-${tarea.estado}`;
      item.setAttribute("data-linea", tarea.lineaIndice);
      const checkbox = document.createElement("span");
      checkbox.className = `tasks-checkbox tasks-checkbox-${tarea.estado}`;
      checkbox.textContent = tarea.estado === "pendiente" ? "\u2610" : "\u25D4";
      checkbox.addEventListener("click", () => {
        this.navegarATarea(pagina.file.path, tarea.lineaIndice);
      });
      const textoSpan = document.createElement("span");
      textoSpan.className = "tasks-text";
      textoSpan.textContent = tarea.texto;
      textoSpan.addEventListener("click", () => {
        this.navegarATarea(pagina.file.path, tarea.lineaIndice);
      });
      item.appendChild(checkbox);
      item.appendChild(textoSpan);
      lista.appendChild(item);
    }
    contenedor.appendChild(lista);
  }
  /**
   * Obtiene y procesa notas vinculadas a una nota actual, con opciones de ordenamiento
   * @param params Objeto con parámetros como notaActualPath y sortOrder
   * @returns Objeto con la tabla HTML y metadatos
   */
  async obtenerNotasVinculadas(params) {
    var _a, _b;
    console.log("[DEBUG] Iniciando obtenerNotasVinculadas con par\xE1metros:", params);
    try {
      const { notaActualPath, sortOrder = "hits" } = params;
      console.log("[DEBUG] notaActualPath:", notaActualPath);
      console.log("[DEBUG] sortOrder:", sortOrder);
      if (!notaActualPath) {
        console.error("[ERROR] No se proporcion\xF3 la ruta de la nota actual");
        return { error: "No se proporcion\xF3 la ruta de la nota actual" };
      }
      const currentNote = app.vault.getAbstractFileByPath(notaActualPath);
      console.log("[DEBUG] currentNote:", (currentNote == null ? void 0 : currentNote.path) || "No encontrada");
      if (!currentNote) {
        console.error("[ERROR] No se pudo encontrar la nota actual en la ruta:", notaActualPath);
        return { error: "No se pudo encontrar la nota actual" };
      }
      const today = window.moment().startOf("day");
      console.log("[DEBUG] Fecha actual:", today.format("YYYY-MM-DD"));
      const allFiles = app.vault.getMarkdownFiles();
      console.log("[DEBUG] Total de archivos markdown:", allFiles.length);
      let linkedNotes = [];
      let processingErrors = 0;
      let notesWithAsunto = 0;
      let notesTypeEntregable = 0;
      let possibleMatches = 0;
      for (const file of allFiles) {
        try {
          console.log("[DEBUG] Procesando archivo:", file.path);
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (!metadata) {
            console.log("[DEBUG] Archivo sin frontmatter:", file.path);
            continue;
          }
          console.log("[DEBUG] Metadata typeName:", metadata.typeName);
          console.log("[DEBUG] Metadata asunto:", JSON.stringify(metadata.asunto));
          if (metadata.typeName !== "Entregable") {
            console.log("[DEBUG] Archivo no es un Entregable, se salta");
            continue;
          }
          notesTypeEntregable++;
          if (!metadata.asunto) {
            console.log("[DEBUG] Entregable sin asunto, se salta");
            continue;
          }
          notesWithAsunto++;
          let isLinked = false;
          console.log("[DEBUG] Comprobando si referencia a la nota actual:", notaActualPath);
          console.log("[DEBUG] Tipo de asunto:", typeof metadata.asunto);
          if (Array.isArray(metadata.asunto)) {
            console.log("[DEBUG] asunto es un array con", metadata.asunto.length, "elementos");
            for (const asunto of metadata.asunto) {
              console.log("[DEBUG] Elemento asunto:", JSON.stringify(asunto));
              if (asunto && typeof asunto === "object" && asunto.path) {
                console.log("[DEBUG] asunto tiene path:", asunto.path);
                console.log("[DEBUG] \xBFCoincide con notaActualPath?", asunto.path === notaActualPath);
                if (asunto.path === notaActualPath) {
                  isLinked = true;
                  possibleMatches++;
                  console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en path!");
                  break;
                }
              } else if (typeof asunto === "string") {
                console.log("[DEBUG] asunto es string:", asunto);
                console.log("[DEBUG] \xBFIncluye notaActualPath?", asunto.includes(notaActualPath));
                if (asunto.includes(notaActualPath)) {
                  isLinked = true;
                  possibleMatches++;
                  console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en string!");
                  break;
                }
                const wikiLinkMatch = asunto.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
                if (wikiLinkMatch) {
                  const linkPath = wikiLinkMatch[1];
                  console.log("[DEBUG] Detectado enlace wiki, path:", linkPath);
                  if (linkPath === currentNote.basename || linkPath === notaActualPath) {
                    isLinked = true;
                    possibleMatches++;
                    console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en wikilink!");
                    break;
                  }
                }
              }
            }
          } else if (typeof metadata.asunto === "object" && metadata.asunto.path) {
            console.log("[DEBUG] asunto es un objeto con path:", metadata.asunto.path);
            console.log("[DEBUG] \xBFCoincide con notaActualPath?", metadata.asunto.path === notaActualPath);
            if (metadata.asunto.path === notaActualPath) {
              isLinked = true;
              possibleMatches++;
              console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en objeto!");
            }
          } else if (typeof metadata.asunto === "string") {
            console.log("[DEBUG] asunto es un string simple:", metadata.asunto);
            console.log("[DEBUG] \xBFIncluye notaActualPath?", metadata.asunto.includes(notaActualPath));
            if (metadata.asunto.includes(notaActualPath)) {
              isLinked = true;
              possibleMatches++;
              console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en string simple!");
            }
            const wikiLinkMatch = metadata.asunto.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
            if (wikiLinkMatch) {
              const linkPath = wikiLinkMatch[1];
              console.log("[DEBUG] Detectado enlace wiki en string simple, path:", linkPath);
              const matchesPath = linkPath === notaActualPath;
              const matchesBasename = linkPath === currentNote.basename;
              console.log("[DEBUG] \xBFCoincide con ruta completa?", matchesPath);
              console.log("[DEBUG] \xBFCoincide con nombre de archivo?", matchesBasename);
              if (matchesPath || matchesBasename) {
                isLinked = true;
                possibleMatches++;
                console.log("[DEBUG] \xA1COINCIDENCIA ENCONTRADA en wikilink simple!");
              }
            }
          }
          if (isLinked) {
            console.log("[DEBUG] \u2705 Nota vinculada encontrada:", file.path);
            let hits = parseFloat(metadata.hits);
            if (isNaN(hits)) {
              console.log("[DEBUG] hits no es un n\xFAmero, estableciendo a 0");
              hits = 0;
            }
            const alias = ((_b = metadata.aliases) == null ? void 0 : _b[0]) || file.basename;
            const estado = metadata.estado || "Sin estado";
            let diferenciaDias = null;
            if (metadata.publicacion) {
              console.log("[DEBUG] Tiene fecha de publicaci\xF3n:", metadata.publicacion);
              const pubDate = window.moment(metadata.publicacion.toString(), "YYYY-MM-DD").startOf("day");
              if (pubDate.isValid()) {
                diferenciaDias = pubDate.diff(today, "days");
                console.log("[DEBUG] diferenciaDias calculado:", diferenciaDias);
              } else {
                console.log("[DEBUG] La fecha de publicaci\xF3n no es v\xE1lida");
              }
            }
            linkedNotes.push({
              alias,
              hits,
              estado,
              diferenciaDias,
              file
            });
            console.log("[DEBUG] Nota a\xF1adida al resultado con alias:", alias);
          } else {
            console.log("[DEBUG] No est\xE1 vinculada, se omite");
          }
        } catch (error) {
          processingErrors++;
          console.error(`[ERROR] Error procesando archivo ${file.path}:`, error);
        }
      }
      console.log(`[DEBUG] Proceso completado. Notas vinculadas encontradas: ${linkedNotes.length}`);
      console.log(`[DEBUG] Estad\xEDsticas de procesamiento:`);
      console.log(`[DEBUG] - Total archivos procesados: ${allFiles.length}`);
      console.log(`[DEBUG] - Notas tipo Entregable: ${notesTypeEntregable}`);
      console.log(`[DEBUG] - Notas con asunto: ${notesWithAsunto}`);
      console.log(`[DEBUG] - Posibles coincidencias: ${possibleMatches}`);
      console.log(`[DEBUG] - Errores de procesamiento: ${processingErrors}`);
      if (linkedNotes.length === 0) {
        console.log("[DEBUG] No se encontraron notas vinculadas");
        const infoElement = document.createElement("div");
        infoElement.innerHTML = `<p>No se encontraron entregables vinculados a esta nota.</p>
                                     <p><small>Estad\xEDsticas: ${notesTypeEntregable} entregables procesados, 
                                     ${notesWithAsunto} con asunto, ${possibleMatches} posibles coincidencias.</small></p>`;
        return {
          tablaElement: infoElement,
          totalNotas: 0,
          totalHits: 0
        };
      }
      console.log("[DEBUG] Ordenando notas por:", sortOrder);
      if (sortOrder === "hits") {
        linkedNotes.sort((a, b) => b.hits - a.hits);
      } else {
        const safeDiff = (d) => d == null ? Infinity : d;
        linkedNotes.sort((a, b) => {
          if (a.estado === "\u{1F535}" && b.estado !== "\u{1F535}")
            return 1;
          if (b.estado === "\u{1F535}" && a.estado !== "\u{1F535}")
            return -1;
          return safeDiff(a.diferenciaDias) - safeDiff(b.diferenciaDias);
        });
      }
      console.log("[DEBUG] Creando tabla HTML");
      const tablaElement = this.crearTablaNotasVinculadas(linkedNotes);
      const totalHits = linkedNotes.reduce((sum, nota) => sum + nota.hits, 0);
      console.log("[DEBUG] Total hits:", totalHits);
      return {
        tablaElement,
        totalNotas: linkedNotes.length,
        totalHits
      };
    } catch (error) {
      console.error("[ERROR] Error en obtenerNotasVinculadas:", error);
      const errorElement = document.createElement("div");
      errorElement.innerHTML = `<p style="color: red;">Error al procesar notas vinculadas: ${error.message}</p>
                                 <p>Revisa la consola para m\xE1s detalles.</p>`;
      return {
        error: "Error al procesar notas vinculadas: " + error.message,
        tablaElement: errorElement
      };
    }
  }
  /**
   * Crea una tabla HTML con las notas vinculadas
   * @param notas Array de objetos con información de notas
   * @returns Elemento HTML de la tabla
   */
  crearTablaNotasVinculadas(notas) {
    const colorKey = (nota) => {
      if (nota.estado === "\u{1F535}")
        return "gray";
      if (nota.diferenciaDias == null)
        return "inherit";
      if (nota.diferenciaDias > 6)
        return "green";
      if (nota.diferenciaDias >= 3)
        return "#e6b800";
      if (nota.diferenciaDias >= 1)
        return "orange";
      return "red";
    };
    try {
      const table = document.createElement("table");
      table.className = "dataview table";
      table.style.width = "100%";
      const thead = document.createElement("thead");
      const headerRow = document.createElement("tr");
      const headers = ["Nota", "Hits", "Estado", "D\xEDas hasta Publicaci\xF3n"];
      headers.forEach((header) => {
        const th = document.createElement("th");
        th.textContent = header;
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);
      const tbody = document.createElement("tbody");
      notas.forEach((nota) => {
        const row = document.createElement("tr");
        const cellNota = document.createElement("td");
        const link = document.createElement("a");
        link.className = "internal-link";
        link.textContent = nota.alias;
        link.setAttribute("data-href", nota.file.path);
        link.addEventListener("click", (event) => {
          event.preventDefault();
          const path = event.target.getAttribute("data-href");
          if (path) {
            app.workspace.openLinkText(path, "", false);
          }
        });
        cellNota.appendChild(link);
        row.appendChild(cellNota);
        const cellHits = document.createElement("td");
        cellHits.textContent = nota.hits;
        row.appendChild(cellHits);
        const cellEstado = document.createElement("td");
        cellEstado.textContent = nota.estado;
        row.appendChild(cellEstado);
        const cellDias = document.createElement("td");
        const color = colorKey(nota);
        const diasTexto = nota.diferenciaDias != null ? `${nota.diferenciaDias} d\xEDas` : "No definido";
        const spanDias = document.createElement("span");
        spanDias.style.color = color;
        spanDias.style.fontWeight = "bold";
        spanDias.textContent = diasTexto;
        cellDias.appendChild(spanDias);
        row.appendChild(cellDias);
        tbody.appendChild(row);
      });
      const totalRow = document.createElement("tr");
      const totalLabelCell = document.createElement("td");
      const totalLabel = document.createElement("strong");
      totalLabel.textContent = "Total";
      totalLabelCell.appendChild(totalLabel);
      totalRow.appendChild(totalLabelCell);
      const totalHits = notas.reduce((sum, nota) => sum + nota.hits, 0);
      const totalValueCell = document.createElement("td");
      const totalValue = document.createElement("strong");
      totalValue.textContent = totalHits.toString();
      totalValueCell.appendChild(totalValue);
      totalRow.appendChild(totalValueCell);
      totalRow.appendChild(document.createElement("td"));
      totalRow.appendChild(document.createElement("td"));
      tbody.appendChild(totalRow);
      table.appendChild(tbody);
      return table;
    } catch (error) {
      console.error("Error al crear tabla de notas vinculadas:", error);
      const errorElement = document.createElement("div");
      errorElement.textContent = "Error al generar tabla: " + error.message;
      errorElement.style.color = "red";
      return errorElement;
    }
  }
  //--- Selector de Estado
  /**
   * Genera un selector visual de estado para la nota
   * @param params Objeto con parámetros como notaActualPath y estadoActual 
   * @returns Elemento DOM con el selector de estado
   */
  async generarSelectorEstado(params) {
    try {
      const { notaActualPath, estadoActual } = params;
      if (!notaActualPath) {
        console.error("No se proporcion\xF3 la ruta de la nota actual");
        return null;
      }
      const currentFile = app.vault.getAbstractFileByPath(notaActualPath);
      if (!currentFile) {
        console.error("No se pudo encontrar el archivo actual:", notaActualPath);
        return null;
      }
      const estados = [
        { emoji: "\u{1F7E2}", label: "Avanzando", color: "#4caf50" },
        { emoji: "\u{1F7E1}", label: "En Pausa", color: "#ffc107" },
        { emoji: "\u{1F534}", label: "Detenida", color: "#f44336" },
        { emoji: "\u{1F535}", label: "Archivada", color: "#2196f3" }
      ];
      const estadoInicial = estadoActual || "\u{1F7E1}";
      const container = document.createElement("div");
      container.className = "estado-selector-container";
      container.style.display = "flex";
      container.style.alignItems = "center";
      container.style.gap = "10px";
      container.style.maxWidth = "500px";
      container.style.margin = "0 auto";
      container.style.padding = "8px";
      container.style.borderRadius = "4px";
      container.style.backgroundColor = "var(--background-secondary-alt)";
      const labelEl = document.createElement("span");
      labelEl.className = "estado-label";
      labelEl.textContent = "Estado:";
      labelEl.style.fontWeight = "500";
      labelEl.style.fontSize = "0.9em";
      container.appendChild(labelEl);
      const optionsContainer = document.createElement("div");
      optionsContainer.className = "estado-options";
      optionsContainer.style.display = "flex";
      optionsContainer.style.gap = "6px";
      optionsContainer.style.flex = "1";
      container.appendChild(optionsContainer);
      const currentStateIndicator = document.createElement("div");
      currentStateIndicator.className = "current-state-indicator";
      currentStateIndicator.style.display = "flex";
      currentStateIndicator.style.alignItems = "center";
      currentStateIndicator.style.marginLeft = "8px";
      currentStateIndicator.style.fontSize = "0.85em";
      currentStateIndicator.style.opacity = "0.8";
      currentStateIndicator.style.whiteSpace = "nowrap";
      const estadoInfo = estados.find((e) => e.emoji === estadoInicial) || estados[0];
      currentStateIndicator.textContent = estadoInfo.label;
      container.appendChild(currentStateIndicator);
      const updateState = async (newState) => {
        try {
          await app.fileManager.processFrontMatter(currentFile, (frontmatter) => {
            frontmatter.estado = newState;
          });
          const newEstadoInfo = estados.find((e) => e.emoji === newState);
          currentStateIndicator.textContent = newEstadoInfo.label;
          optionsContainer.querySelectorAll("button").forEach((btn) => {
            const btnEstado = btn.getAttribute("data-estado");
            const estadoData = estados.find((e) => e.emoji === btnEstado);
            if (btnEstado === newState) {
              btn.style.backgroundColor = estadoData.color;
              btn.style.color = "white";
              btn.style.transform = "scale(1.1)";
              btn.style.boxShadow = "0 2px 4px rgba(0,0,0,0.2)";
            } else {
              btn.style.backgroundColor = `${estadoData.color}22`;
              btn.style.color = estadoData.color;
              btn.style.transform = "none";
              btn.style.boxShadow = "none";
            }
          });
          new Notice(`Estado cambiado a ${newEstadoInfo.label}`);
        } catch (error) {
          console.error("Error al actualizar el estado:", error);
          new Notice("Error al actualizar el estado. Consulta la consola para m\xE1s detalles.");
        }
      };
      estados.forEach((estado) => {
        const boton = document.createElement("button");
        boton.className = "estado-btn";
        boton.setAttribute("data-estado", estado.emoji);
        boton.setAttribute("title", estado.label);
        boton.style.flex = "1";
        boton.style.border = "none";
        boton.style.borderRadius = "4px";
        boton.style.padding = "6px 0";
        boton.style.cursor = "pointer";
        boton.style.transition = "all 0.2s ease";
        boton.style.display = "flex";
        boton.style.alignItems = "center";
        boton.style.justifyContent = "center";
        if (estadoInicial === estado.emoji) {
          boton.style.backgroundColor = estado.color;
          boton.style.color = "white";
          boton.style.transform = "scale(1.1)";
          boton.style.boxShadow = "0 2px 4px rgba(0,0,0,0.2)";
        } else {
          boton.style.backgroundColor = `${estado.color}22`;
          boton.style.color = estado.color;
        }
        const emojiSpan = document.createElement("span");
        emojiSpan.textContent = estado.emoji;
        emojiSpan.style.fontSize = "18px";
        boton.appendChild(emojiSpan);
        boton.addEventListener("mouseover", () => {
          if (estadoInicial !== estado.emoji) {
            boton.style.backgroundColor = `${estado.color}44`;
            boton.style.transform = "translateY(-2px)";
          }
        });
        boton.addEventListener("mouseout", () => {
          if (estadoInicial !== estado.emoji) {
            boton.style.backgroundColor = `${estado.color}22`;
            boton.style.transform = "none";
          }
        });
        boton.addEventListener("click", () => {
          updateState(estado.emoji);
        });
        optionsContainer.appendChild(boton);
      });
      return container;
    } catch (error) {
      console.error("Error en generarSelectorEstado:", error);
      return null;
    }
  }
  // -- Arbol de proyectos GTD
  /**
   * Genera un árbol jerárquico visual de proyectos organizados por Áreas de Vida y Áreas de Interés
   * @param {Object} dv - El objeto dataview para acceder a sus funciones
   * @param {Object} options - Opciones de configuración (tipo de proyectos, filtros adicionales)
   * @returns {HTMLElement} - Elemento DOM con la estructura de árbol
   */
  async generarArbolProyectos(dv2, options = {}) {
    try {
      const config = {
        tipoProyecto: options.tipoProyecto || "PGTD",
        // PGTD o PQ
        estadoFiltro: options.estadoFiltro || "\u{1F7E2}",
        // Por defecto solo muestra activos
        soloMostrarConPendientes: options.soloMostrarConPendientes || false,
        expandirPorDefecto: options.expandirPorDefecto || false
      };
      const carpetaKey = config.tipoProyecto === "PGTD" ? "folder_ProyectosGTD" : "folder_ProyectosQ";
      const carpeta = this.plugin.settings[carpetaKey];
      if (!carpeta) {
        console.error(`Carpeta para ${config.tipoProyecto} no configurada`);
        const error = document.createElement("div");
        error.className = "tree-error";
        error.textContent = `Error: Carpeta para ${config.tipoProyecto} no configurada`;
        return error;
      }
      const contenedor = document.createElement("div");
      contenedor.className = "proyectos-tree-container";
      const encabezado = document.createElement("h3");
      encabezado.className = "proyectos-tree-title";
      console.log(`Buscando proyectos en: ${carpeta}`);
      let proyectos = dv2.pages().filter((p) => p.file.path.startsWith(carpeta) && !p.file.path.includes("/Plantillas/") && !p.file.path.includes("/Archivo/"));
      const totalProyectos = proyectos.length;
      const todosLosProyectos = [...proyectos];
      let proyectosFiltrados = proyectos;
      if (config.estadoFiltro && config.estadoFiltro !== "") {
        console.log(`Aplicando filtro de estado: ${config.estadoFiltro}`);
        proyectosFiltrados = proyectos.filter((p) => p.estado === config.estadoFiltro);
      }
      encabezado.textContent = `Estructura de Proyectos ${config.tipoProyecto} ${config.estadoFiltro ? `(${proyectosFiltrados.length}/${totalProyectos})` : ""}`;
      contenedor.appendChild(encabezado);
      if (proyectosFiltrados.length === 0) {
        const mensaje = document.createElement("p");
        mensaje.className = "proyectos-tree-empty";
        mensaje.textContent = `No se encontraron proyectos ${config.tipoProyecto}${config.estadoFiltro ? ` con estado ${config.estadoFiltro}` : ""}`;
        contenedor.appendChild(mensaje);
        return contenedor;
      }
      console.log(`Proyectos encontrados: ${proyectosFiltrados.length}`);
      const proyectosAMostrar = this.determinarProyectosAMostrar(proyectosFiltrados, todosLosProyectos, config);
      const { areasVida, proyectosSinAV } = this.construirEstructuraProyectos(proyectosAMostrar, dv2);
      const arbolAV = document.createElement("div");
      arbolAV.className = "proyectos-areas-container";
      const areasVidaOrdenadas = [...areasVida.entries()].sort((a, b) => {
        const nombreA = a[1].nombre || a[0];
        const nombreB = b[1].nombre || b[0];
        return nombreA.localeCompare(nombreB);
      });
      for (const [avPath, avData] of areasVidaOrdenadas) {
        const seccionAV = this.renderizarAreaVida(avPath, avData, dv2, config);
        arbolAV.appendChild(seccionAV);
      }
      if (proyectosSinAV.length > 0) {
        const seccionSinAV = document.createElement("div");
        seccionSinAV.className = "proyectos-sin-av";
        const tituloSinAV = document.createElement("div");
        tituloSinAV.className = "proyectos-area-header sin-area";
        tituloSinAV.setAttribute("data-toggle-id", `sinav-global`);
        tituloSinAV.innerHTML = `<span class="toggle-icon">\u25BA</span> <span class="area-tipo">Sin \xC1rea de Vida</span> <span class="proyectos-contador">(${proyectosSinAV.length})</span>`;
        seccionSinAV.appendChild(tituloSinAV);
        const contenidoSinAV = document.createElement("div");
        contenidoSinAV.className = "proyectos-area-content";
        contenidoSinAV.id = `content-${tituloSinAV.getAttribute("data-toggle-id")}`;
        contenidoSinAV.style.display = "none";
        const areasPorAI = this.agruparProyectosPorAI(proyectosSinAV, dv2);
        for (const [aiPath, aiData] of areasPorAI.entries()) {
          const seccionAI = this.renderizarAreaInteres(aiPath, aiData, dv2, config);
          contenidoSinAV.appendChild(seccionAI);
        }
        const proyectosSinAI = proyectosSinAV.filter(
          (p) => !p.areaInteres || Array.isArray(p.areaInteres) && p.areaInteres.length === 0 || typeof p.areaInteres === "string" && p.areaInteres.trim() === ""
        );
        if (proyectosSinAI.length > 0) {
          const seccionSinAI = document.createElement("div");
          seccionSinAI.className = "proyectos-sin-ai";
          const tituloSinAI = document.createElement("div");
          tituloSinAI.className = "proyectos-ai-header sin-ai";
          tituloSinAI.setAttribute("data-toggle-id", `sinai-global`);
          tituloSinAI.innerHTML = `<span class="toggle-icon">\u25BA</span> <span class="ai-tipo">Sin \xC1rea de Inter\xE9s</span> <span class="proyectos-contador">(${proyectosSinAI.length})</span>`;
          seccionSinAI.appendChild(tituloSinAI);
          const contenidoSinAI = document.createElement("div");
          contenidoSinAI.className = "proyectos-ai-content";
          contenidoSinAI.id = `content-${tituloSinAI.getAttribute("data-toggle-id")}`;
          contenidoSinAI.style.display = "none";
          const listaProyectos = this.renderizarListaProyectos(proyectosSinAI, dv2, config);
          contenidoSinAI.appendChild(listaProyectos);
          seccionSinAI.appendChild(contenidoSinAI);
          contenidoSinAV.appendChild(seccionSinAI);
          tituloSinAI.addEventListener("click", (event) => {
            if (event.target.tagName !== "A") {
              this.toggleSeccionById(tituloSinAI.getAttribute("data-toggle-id"));
            }
          });
        }
        seccionSinAV.appendChild(contenidoSinAV);
        arbolAV.appendChild(seccionSinAV);
        tituloSinAV.addEventListener("click", (event) => {
          if (event.target.tagName !== "A") {
            this.toggleSeccionById(tituloSinAV.getAttribute("data-toggle-id"));
          }
        });
      }
      contenedor.appendChild(arbolAV);
      if (options.expandirPorDefecto) {
        this.expandirTodo(contenedor);
      }
      return contenedor;
    } catch (error) {
      console.error("Error en generarArbolProyectos:", error);
      const errorElement = document.createElement("div");
      errorElement.className = "proyectos-tree-error";
      errorElement.textContent = `Error al generar \xE1rbol de proyectos: ${error.message}`;
      return errorElement;
    }
  }
  /**
   * Construye la estructura jerárquica de proyectos organizados por Áreas de Vida
   * @param {Array} proyectos - Array de proyectos obtenidos de dataview
   * @param {Object} dv - Objeto dataview
   * @returns {Object} - Estructura organizada por áreas
   */
  construirEstructuraProyectos(proyectos, dv2) {
    const areasVida = /* @__PURE__ */ new Map();
    const proyectosSinAV = [];
    for (const proyecto of proyectos) {
      let asignado = false;
      if (proyecto.areaVida) {
        let areaVidaPath;
        let areaVidaNombre;
        if (typeof proyecto.areaVida === "object" && proyecto.areaVida.path) {
          areaVidaPath = proyecto.areaVida.path;
          try {
            const avPage = dv2.page(areaVidaPath);
            areaVidaNombre = avPage.titulo || avPage.file.name;
          } catch (e) {
            areaVidaNombre = "\xC1rea de Vida " + areaVidaPath;
          }
        } else if (typeof proyecto.areaVida === "string") {
          const wikiMatch = proyecto.areaVida.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
          if (wikiMatch) {
            areaVidaPath = wikiMatch[1];
            areaVidaNombre = wikiMatch[2] || wikiMatch[1];
          } else if (proyecto.areaVida !== "No es de ning\xFAn Area de Vida") {
            try {
              const avPages = dv2.pages('#"' + proyecto.areaVida + '"');
              if (avPages.length > 0) {
                areaVidaPath = avPages[0].file.path;
                areaVidaNombre = proyecto.areaVida;
              } else {
                areaVidaPath = proyecto.areaVida;
                areaVidaNombre = proyecto.areaVida;
              }
            } catch (e) {
              areaVidaPath = proyecto.areaVida;
              areaVidaNombre = proyecto.areaVida;
            }
          }
        }
        if (areaVidaPath && areaVidaPath !== "No es de ning\xFAn Area de Vida") {
          if (!areasVida.has(areaVidaPath)) {
            areasVida.set(areaVidaPath, {
              nombre: areaVidaNombre,
              proyectos: [],
              proyectosPorAI: /* @__PURE__ */ new Map()
            });
          }
          areasVida.get(areaVidaPath).proyectos.push(proyecto);
          asignado = true;
          if (proyecto.areaInteres) {
            const areasInteres = Array.isArray(proyecto.areaInteres) ? proyecto.areaInteres : [proyecto.areaInteres];
            let asignadoAI = false;
            for (const ai of areasInteres) {
              let aiPath;
              let aiNombre;
              if (typeof ai === "object" && ai.path) {
                aiPath = ai.path;
                try {
                  const aiPage = dv2.page(aiPath);
                  aiNombre = aiPage.titulo || aiPage.file.name;
                } catch (e) {
                  aiNombre = "\xC1rea de Inter\xE9s " + aiPath;
                }
              } else if (typeof ai === "string") {
                const wikiMatch = ai.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
                if (wikiMatch) {
                  aiPath = wikiMatch[1];
                  aiNombre = wikiMatch[2] || wikiMatch[1];
                } else {
                  try {
                    const aiPages = dv2.pages('#"' + ai + '"');
                    if (aiPages.length > 0) {
                      aiPath = aiPages[0].file.path;
                      aiNombre = ai;
                    } else {
                      aiPath = ai;
                      aiNombre = ai;
                    }
                  } catch (e) {
                    aiPath = ai;
                    aiNombre = ai;
                  }
                }
              }
              if (aiPath) {
                const avData = areasVida.get(areaVidaPath);
                if (!avData.proyectosPorAI.has(aiPath)) {
                  avData.proyectosPorAI.set(aiPath, {
                    nombre: aiNombre,
                    proyectos: []
                  });
                }
                avData.proyectosPorAI.get(aiPath).proyectos.push(proyecto);
                asignadoAI = true;
              }
            }
            if (!asignadoAI) {
              const avData = areasVida.get(areaVidaPath);
              if (!avData.proyectosSinAI) {
                avData.proyectosSinAI = [];
              }
              avData.proyectosSinAI.push(proyecto);
            }
          } else {
            const avData = areasVida.get(areaVidaPath);
            if (!avData.proyectosSinAI) {
              avData.proyectosSinAI = [];
            }
            avData.proyectosSinAI.push(proyecto);
          }
        }
      }
      if (!asignado) {
        proyectosSinAV.push(proyecto);
      }
    }
    return { areasVida, proyectosSinAV };
  }
  /**
   * Agrupa proyectos por Área de Interés
   * @param {Array} proyectos - Array de proyectos
   * @param {Object} dv - Objeto dataview
   * @returns {Map} - Mapa de proyectos agrupados por AI
   */
  agruparProyectosPorAI(proyectos, dv2) {
    const areasPorAI = /* @__PURE__ */ new Map();
    const proyectosSinAI = [];
    for (const proyecto of proyectos) {
      let asignado = false;
      if (proyecto.areaInteres) {
        const areasInteres = Array.isArray(proyecto.areaInteres) ? proyecto.areaInteres : [proyecto.areaInteres];
        for (const ai of areasInteres) {
          let aiPath;
          let aiNombre;
          if (typeof ai === "object" && ai.path) {
            aiPath = ai.path;
            try {
              const aiPage = dv2.page(aiPath);
              aiNombre = aiPage.titulo || aiPage.file.name;
            } catch (e) {
              aiNombre = "\xC1rea de Inter\xE9s " + aiPath;
            }
          } else if (typeof ai === "string") {
            const wikiMatch = ai.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
            if (wikiMatch) {
              aiPath = wikiMatch[1];
              aiNombre = wikiMatch[2] || wikiMatch[1];
            } else {
              try {
                const aiPages = dv2.pages('#"' + ai + '"');
                if (aiPages.length > 0) {
                  aiPath = aiPages[0].file.path;
                  aiNombre = ai;
                } else {
                  aiPath = ai;
                  aiNombre = ai;
                }
              } catch (e) {
                aiPath = ai;
                aiNombre = ai;
              }
            }
          }
          if (aiPath) {
            if (!areasPorAI.has(aiPath)) {
              areasPorAI.set(aiPath, {
                nombre: aiNombre,
                proyectos: []
              });
            }
            areasPorAI.get(aiPath).proyectos.push(proyecto);
            asignado = true;
          }
        }
      }
      if (!asignado) {
        proyectosSinAI.push(proyecto);
      }
    }
    if (proyectosSinAI.length > 0) {
      areasPorAI.set("sin-ai", {
        nombre: "Sin \xC1rea de Inter\xE9s",
        proyectos: proyectosSinAI
      });
    }
    return areasPorAI;
  }
  /**
   * Renderiza una sección de Área de Vida con sus proyectos
   * @param {string} avPath - Ruta del archivo del Área de Vida
   * @param {Object} avData - Datos del Área de Vida
   * @param {Object} dv - Objeto dataview
   * @param {Object} config - Configuración
   * @returns {HTMLElement} - Elemento DOM con la sección del AV
   */
  renderizarAreaVida(avPath, avData, dv2, config) {
    const seccionAV = document.createElement("div");
    seccionAV.className = "proyectos-area-vida";
    const totalProyectos = avData.proyectos.length;
    const tituloAV = document.createElement("div");
    tituloAV.className = "proyectos-area-header";
    tituloAV.setAttribute("data-toggle-id", `av-${avPath.replace(/\//g, "-")}`);
    const toggleIcono = document.createElement("span");
    toggleIcono.className = "toggle-icon";
    toggleIcono.textContent = "\u25BA";
    tituloAV.appendChild(toggleIcono);
    const tipoLabel = document.createElement("span");
    tipoLabel.className = "area-tipo";
    tipoLabel.textContent = "\u{1F5C2}\uFE0F \xC1rea de Vida:";
    tituloAV.appendChild(tipoLabel);
    try {
      const enlaceAV = document.createElement("a");
      enlaceAV.className = "area-link";
      enlaceAV.textContent = avData.nombre || "\xC1rea de Vida";
      enlaceAV.href = avPath;
      enlaceAV.setAttribute("data-href", avPath);
      enlaceAV.target = "_blank";
      enlaceAV.addEventListener("click", (event) => {
        event.preventDefault();
        app.workspace.openLinkText(avPath, "", true);
      });
      tituloAV.appendChild(enlaceAV);
    } catch (e) {
      const textoAV = document.createElement("span");
      textoAV.textContent = avData.nombre || "\xC1rea de Vida";
      tituloAV.appendChild(textoAV);
    }
    const contadorProyectos = document.createElement("span");
    contadorProyectos.className = "proyectos-contador";
    contadorProyectos.textContent = ` (${totalProyectos})`;
    tituloAV.appendChild(contadorProyectos);
    seccionAV.appendChild(tituloAV);
    const contenidoAV = document.createElement("div");
    contenidoAV.className = "proyectos-area-content";
    contenidoAV.id = `content-${tituloAV.getAttribute("data-toggle-id")}`;
    contenidoAV.style.display = "none";
    if (avData.proyectosPorAI && avData.proyectosPorAI.size > 0) {
      const aiOrdenadas = [...avData.proyectosPorAI.entries()].sort((a, b) => a[1].nombre.localeCompare(b[1].nombre));
      for (const [aiPath, aiData] of aiOrdenadas) {
        const seccionAI = this.renderizarAreaInteres(aiPath, aiData, dv2, config);
        contenidoAV.appendChild(seccionAI);
      }
    }
    if (avData.proyectosSinAI && avData.proyectosSinAI.length > 0) {
      const seccionSinAI = document.createElement("div");
      seccionSinAI.className = "proyectos-sin-ai";
      const tituloSinAI = document.createElement("div");
      tituloSinAI.className = "proyectos-ai-header sin-ai";
      tituloSinAI.setAttribute("data-toggle-id", `sinai-${avPath.replace(/\//g, "-")}`);
      const totalSinAI = avData.proyectosSinAI.length;
      tituloSinAI.innerHTML = `<span class="toggle-icon">\u25BA</span> <span class="ai-tipo">Sin \xC1rea de Inter\xE9s</span> <span class="proyectos-contador">(${totalSinAI})</span>`;
      seccionSinAI.appendChild(tituloSinAI);
      const contenidoSinAI = document.createElement("div");
      contenidoSinAI.className = "proyectos-ai-content";
      contenidoSinAI.id = `content-${tituloSinAI.getAttribute("data-toggle-id")}`;
      contenidoSinAI.style.display = "none";
      const listaProyectos = this.renderizarListaProyectos(avData.proyectosSinAI, dv2, config);
      contenidoSinAI.appendChild(listaProyectos);
      seccionSinAI.appendChild(contenidoSinAI);
      contenidoAV.appendChild(seccionSinAI);
      tituloSinAI.addEventListener("click", (event) => {
        if (event.target.tagName !== "A") {
          this.toggleSeccionById(tituloSinAI.getAttribute("data-toggle-id"));
        }
      });
    }
    seccionAV.appendChild(contenidoAV);
    tituloAV.addEventListener("click", (event) => {
      if (event.target.tagName !== "A") {
        this.toggleSeccionById(tituloAV.getAttribute("data-toggle-id"));
      }
    });
    return seccionAV;
  }
  /**
   * Renderiza una sección de Área de Interés con sus proyectos
   * @param {string} aiPath - Ruta del archivo del Área de Interés
   * @param {Object} aiData - Datos del Área de Interés
   * @param {Object} dv - Objeto dataview
   * @param {Object} config - Configuración
   * @returns {HTMLElement} - Elemento DOM con la sección del AI
   */
  renderizarAreaInteres(aiPath, aiData, dv2, config) {
    const seccionAI = document.createElement("div");
    seccionAI.className = "proyectos-area-interes";
    const totalProyectos = aiData.proyectos ? aiData.proyectos.length : 0;
    const tituloAI = document.createElement("div");
    tituloAI.className = "proyectos-ai-header";
    tituloAI.setAttribute("data-toggle-id", `ai-${aiPath.replace(/\//g, "-")}`);
    const toggleIcono = document.createElement("span");
    toggleIcono.className = "toggle-icon";
    toggleIcono.textContent = "\u25BA";
    tituloAI.appendChild(toggleIcono);
    const tipoLabel = document.createElement("span");
    tipoLabel.className = "ai-tipo";
    tipoLabel.textContent = "\u{1F4C1} \xC1rea de Inter\xE9s:";
    tituloAI.appendChild(tipoLabel);
    if (aiPath !== "sin-ai") {
      try {
        const enlaceAI = document.createElement("a");
        enlaceAI.className = "ai-link";
        enlaceAI.textContent = aiData.nombre || "\xC1rea de Inter\xE9s";
        enlaceAI.href = aiPath;
        enlaceAI.setAttribute("data-href", aiPath);
        enlaceAI.target = "_blank";
        enlaceAI.addEventListener("click", (event) => {
          event.preventDefault();
          app.workspace.openLinkText(aiPath, "", true);
        });
        tituloAI.appendChild(enlaceAI);
      } catch (e) {
        const textoAI = document.createElement("span");
        textoAI.textContent = aiData.nombre || "\xC1rea de Inter\xE9s";
        tituloAI.appendChild(textoAI);
      }
    } else {
      const textoAI = document.createElement("span");
      textoAI.textContent = aiData.nombre || "Sin \xC1rea de Inter\xE9s";
      tituloAI.appendChild(textoAI);
    }
    const contadorProyectos = document.createElement("span");
    contadorProyectos.className = "proyectos-contador";
    contadorProyectos.textContent = ` (${totalProyectos})`;
    tituloAI.appendChild(contadorProyectos);
    seccionAI.appendChild(tituloAI);
    const contenidoAI = document.createElement("div");
    contenidoAI.className = "proyectos-ai-content";
    contenidoAI.id = `content-${tituloAI.getAttribute("data-toggle-id")}`;
    contenidoAI.style.display = "none";
    if (aiData.proyectos && aiData.proyectos.length > 0) {
      const listaProyectos = this.renderizarListaProyectos(aiData.proyectos, dv2, config);
      contenidoAI.appendChild(listaProyectos);
    } else {
      const mensaje = document.createElement("p");
      mensaje.className = "proyectos-ai-empty";
      mensaje.textContent = "No hay proyectos en esta \xC1rea de Inter\xE9s";
      contenidoAI.appendChild(mensaje);
    }
    seccionAI.appendChild(contenidoAI);
    tituloAI.addEventListener("click", (event) => {
      if (event.target.tagName !== "A") {
        this.toggleSeccionById(tituloAI.getAttribute("data-toggle-id"));
      }
    });
    return seccionAI;
  }
  /**
   * Toggle específico para un elemento por su ID
   * @param {string} toggleId - ID único del elemento toggle
   */
  toggleSeccionById(toggleId) {
    const header = document.querySelector(`[data-toggle-id="${toggleId}"]`);
    const content = document.getElementById(`content-${toggleId}`);
    if (!header || !content)
      return;
    const toggleIcon = header.querySelector(".toggle-icon");
    const isVisible = content.style.display !== "none";
    if (isVisible) {
      content.style.display = "none";
      toggleIcon.textContent = "\u25BA";
    } else {
      content.style.display = "block";
      toggleIcon.textContent = "\u25BC";
    }
  }
  /**
   * Renderiza una lista de proyectos
   * @param {Array} proyectos - Array de proyectos
   * @param {Object} dv - Objeto dataview
   * @param {Object} config - Configuración
   * @returns {HTMLElement} - Elemento DOM con la lista de proyectos
   */
  renderizarListaProyectos(proyectos, dv2, config) {
    const lista = document.createElement("ul");
    lista.className = "proyectos-lista";
    const ordenados = [...proyectos].sort((a, b) => {
      const nivelA = a.nivelP || 0;
      const nivelB = b.nivelP || 0;
      if (nivelA !== nivelB) {
        return nivelA - nivelB;
      }
      const fechaA = a.fecha ? new Date(a.fecha) : /* @__PURE__ */ new Date(0);
      const fechaB = b.fecha ? new Date(b.fecha) : /* @__PURE__ */ new Date(0);
      return fechaB - fechaA;
    });
    const proyectosMap = /* @__PURE__ */ new Map();
    const nodosRaiz = [];
    for (const proyecto of ordenados) {
      const path = proyecto.file.path;
      proyectosMap.set(path, {
        proyecto,
        hijos: []
      });
    }
    for (const proyecto of ordenados) {
      const path = proyecto.file.path;
      const padresCampo = config.tipoProyecto === "PGTD" ? "proyectoGTD" : "proyectoQ";
      if (proyecto[padresCampo]) {
        const padres = Array.isArray(proyecto[padresCampo]) ? proyecto[padresCampo] : [proyecto[padresCampo]];
        let tieneRelacion = false;
        for (const padre of padres) {
          let padrePath;
          if (typeof padre === "object" && padre.path) {
            padrePath = padre.path;
          } else if (typeof padre === "string") {
            const wikiMatch = padre.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
            if (wikiMatch) {
              padrePath = wikiMatch[1];
            } else {
              const proyectoEncontrado = ordenados.find(
                (p) => p.titulo === padre || p.aliases && p.aliases.includes(padre) || p.file.name === padre
              );
              if (proyectoEncontrado) {
                padrePath = proyectoEncontrado.file.path;
              } else {
                padrePath = padre;
              }
            }
          }
          if (padrePath && proyectosMap.has(padrePath)) {
            proyectosMap.get(padrePath).hijos.push(proyectosMap.get(path));
            tieneRelacion = true;
          }
        }
        if (!tieneRelacion) {
          nodosRaiz.push(proyectosMap.get(path));
        }
      } else {
        nodosRaiz.push(proyectosMap.get(path));
      }
    }
    for (const nodoRaiz of nodosRaiz) {
      this.renderizarProyectoRecursivo(nodoRaiz, lista, 0, dv2, config);
    }
    if (lista.children.length === 0) {
      const mensaje = document.createElement("li");
      mensaje.className = "proyectos-lista-empty";
      mensaje.textContent = "No hay proyectos que cumplan con los criterios de filtro";
      lista.appendChild(mensaje);
    }
    return lista;
  }
  /**
   * Renderiza un proyecto y sus subproyectos de forma recursiva
   * @param {Object} nodo - Nodo del proyecto actual
   * @param {HTMLElement} lista - Elemento lista donde agregar el proyecto
   * @param {number} nivel - Nivel de indentación
   * @param {Object} dv - Objeto dataview
   * @param {Object} config - Configuración
   */
  renderizarProyectoRecursivo(nodo, lista, nivel, dv2, config) {
    const { proyecto, hijos } = nodo;
    if (config.soloMostrarConPendientes) {
      const tieneTareasPendientes = proyecto.file.tasks && proyecto.file.tasks.filter((t) => !t.completed).length > 0;
      const hijosConTareas = hijos.some((hijo) => {
        const hijoPendientes = hijo.proyecto.file.tasks && hijo.proyecto.file.tasks.filter((t) => !t.completed).length > 0;
        return hijoPendientes;
      });
      if (!tieneTareasPendientes && !hijosConTareas && hijos.length === 0) {
        return;
      }
    }
    const item = document.createElement("li");
    item.className = `proyectos-item nivel-${nivel}`;
    const indentacion = nivel > 0 ? "\u2192".repeat(nivel) + " " : "";
    const textoMostrar = proyecto.titulo || (proyecto.aliases && proyecto.aliases.length > 0 ? proyecto.aliases[0] : null) || proyecto.file.name;
    const contenido = document.createElement("div");
    contenido.className = "proyecto-contenido";
    if (proyecto.estado) {
      const estadoSpan = document.createElement("span");
      estadoSpan.className = "proyecto-estado";
      estadoSpan.textContent = proyecto.estado + " ";
      contenido.appendChild(estadoSpan);
    }
    if (indentacion) {
      const indentSpan = document.createElement("span");
      indentSpan.className = "proyecto-indent";
      indentSpan.textContent = indentacion;
      contenido.appendChild(indentSpan);
    }
    try {
      const enlace = document.createElement("a");
      enlace.className = "proyecto-link";
      enlace.textContent = textoMostrar;
      enlace.href = proyecto.file.path;
      enlace.setAttribute("data-href", proyecto.file.path);
      enlace.target = "_blank";
      enlace.addEventListener("click", (event) => {
        event.preventDefault();
        app.workspace.openLinkText(proyecto.file.path, "", true);
      });
      contenido.appendChild(enlace);
    } catch (e) {
      const texto = document.createElement("span");
      texto.textContent = textoMostrar;
      contenido.appendChild(texto);
    }
    if (proyecto.file.tasks) {
      const tareasPendientes = proyecto.file.tasks.filter((t) => !t.completed).length;
      if (tareasPendientes > 0) {
        const tareasSpan = document.createElement("span");
        tareasSpan.className = "proyecto-pendientes";
        tareasSpan.textContent = ` (${tareasPendientes} pendientes)`;
        contenido.appendChild(tareasSpan);
      }
    }
    if (proyecto.nivelP && proyecto.nivelP > 0) {
      const nivelSpan = document.createElement("span");
      nivelSpan.className = "proyecto-nivel";
      nivelSpan.textContent = ` [Nivel ${proyecto.nivelP}]`;
      contenido.appendChild(nivelSpan);
    }
    item.appendChild(contenido);
    lista.appendChild(item);
    if (hijos && hijos.length > 0) {
      const sublista = document.createElement("ul");
      sublista.className = "proyectos-sublista";
      for (const hijo of hijos) {
        this.renderizarProyectoRecursivo(hijo, sublista, nivel + 1, dv2, config);
      }
      if (sublista.children.length > 0) {
        item.appendChild(sublista);
      }
    }
  }
  /**
   * Alterna entre mostrar y ocultar una sección
   * @param {HTMLElement} header - Elemento de encabezado con el toggle
   * @param {HTMLElement} content - Elemento de contenido a mostrar/ocultar
   */
  toggleSeccion(header, content) {
    const toggleIcon = header.querySelector(".toggle-icon");
    const isVisible = content.style.display !== "none";
    if (isVisible) {
      content.style.display = "none";
      toggleIcon.textContent = "\u25BA";
    } else {
      content.style.display = "block";
      toggleIcon.textContent = "\u25BC";
    }
  }
  /**
   * Expande todas las secciones en el árbol
   * @param {HTMLElement} container - Contenedor principal
   */
  expandirTodo(container) {
    const headers = container.querySelectorAll("[data-toggle-id]");
    headers.forEach((header) => {
      const toggleId = header.getAttribute("data-toggle-id");
      const content = document.getElementById(`content-${toggleId}`);
      if (content) {
        content.style.display = "block";
        const toggleIcon = header.querySelector(".toggle-icon");
        if (toggleIcon) {
          toggleIcon.textContent = "\u25BC";
        }
      }
    });
  }
  /**
   * Colapsa todas las secciones en el árbol
   * @param {HTMLElement} container - Contenedor principal
   */
  colapsarTodo(container) {
    const headers = container.querySelectorAll("[data-toggle-id]");
    headers.forEach((header) => {
      const toggleId = header.getAttribute("data-toggle-id");
      const content = document.getElementById(`content-${toggleId}`);
      if (content) {
        content.style.display = "none";
        const toggleIcon = header.querySelector(".toggle-icon");
        if (toggleIcon) {
          toggleIcon.textContent = "\u25BA";
        }
      }
    });
  }
  /**
   * Agrega listeners para expandir/colapsar secciones
   * @param {HTMLElement} container - Contenedor principal
   */
  agregarListenersProyectos(container) {
    const headersAV = container.querySelectorAll(".proyectos-area-header");
    headersAV.forEach((header) => {
      const content = header.nextElementSibling;
      if (content && content.classList.contains("proyectos-area-content")) {
        header.addEventListener("click", (event) => {
          if (event.target.tagName !== "A") {
            this.toggleSeccion(header, content);
          }
        });
      }
    });
    const headersAI = container.querySelectorAll(".proyectos-ai-header");
    headersAI.forEach((header) => {
      const content = header.nextElementSibling;
      if (content && content.classList.contains("proyectos-ai-content")) {
        header.addEventListener("click", (event) => {
          if (event.target.tagName !== "A") {
            this.toggleSeccion(header, content);
          }
        });
      }
    });
  }
  /**
   * Determina qué proyectos deben mostrarse teniendo en cuenta la estructura jerárquica
   * @param {Array} proyectosFiltrados - Array de proyectos ya filtrados
   * @param {Array} todosLosProyectos - Array con todos los proyectos
   * @param {Object} config - Configuración
   * @returns {Array} - Array de proyectos a mostrar
   */
  determinarProyectosAMostrar(proyectosFiltrados, todosLosProyectos, config) {
    if (!config.estadoFiltro || config.estadoFiltro === "") {
      return todosLosProyectos;
    }
    const pathsAMostrar = /* @__PURE__ */ new Set();
    proyectosFiltrados.forEach((p) => pathsAMostrar.add(p.file.path));
    let cambiosRealizados = true;
    while (cambiosRealizados) {
      cambiosRealizados = false;
      for (const proyecto of todosLosProyectos) {
        if (pathsAMostrar.has(proyecto.file.path))
          continue;
        const padresCampo = config.tipoProyecto === "PGTD" ? "proyectoGTD" : "proyectoQ";
        for (const otroProyecto of todosLosProyectos) {
          if (!pathsAMostrar.has(otroProyecto.file.path))
            continue;
          const padres = otroProyecto[padresCampo];
          if (!padres)
            continue;
          const esReferenciadoComo = Array.isArray(padres) ? padres.some((p) => this.referenciaAlMismoProyecto(p, proyecto)) : this.referenciaAlMismoProyecto(padres, proyecto);
          if (esReferenciadoComo) {
            pathsAMostrar.add(proyecto.file.path);
            cambiosRealizados = true;
            break;
          }
        }
      }
    }
    for (const proyecto of proyectosFiltrados) {
      const padresCampo = config.tipoProyecto === "PGTD" ? "proyectoGTD" : "proyectoQ";
      for (const otroProyecto of todosLosProyectos) {
        if (pathsAMostrar.has(otroProyecto.file.path))
          continue;
        const padres = otroProyecto[padresCampo];
        if (!padres)
          continue;
        const esReferenciadoComo = Array.isArray(padres) ? padres.some((p) => this.referenciaAlMismoProyecto(p, proyecto)) : this.referenciaAlMismoProyecto(padres, proyecto);
        if (esReferenciadoComo) {
          pathsAMostrar.add(otroProyecto.file.path);
        }
      }
    }
    return todosLosProyectos.filter((p) => pathsAMostrar.has(p.file.path));
  }
  /**
   * Comprueba si una referencia (objeto o string) apunta al mismo proyecto
   * @param {*} referencia - Puede ser objeto con path, string con wikilink, o nombre directo
   * @param {Object} proyecto - Proyecto a comparar
   * @returns {boolean} - true si la referencia apunta al proyecto
   */
  referenciaAlMismoProyecto(referencia, proyecto) {
    if (!referencia || !proyecto)
      return false;
    if (typeof referencia === "object" && referencia.path) {
      return referencia.path === proyecto.file.path;
    }
    if (typeof referencia === "string") {
      const wikiMatch = referencia.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
      if (wikiMatch) {
        const path = wikiMatch[1];
        return path === proyecto.file.path || path === proyecto.file.basename || path === proyecto.titulo;
      }
      return referencia === proyecto.file.path || referencia === proyecto.file.basename || referencia === proyecto.titulo || proyecto.aliases && proyecto.aliases.includes(referencia);
    }
    return false;
  }
  /**
   * Navega a una tarea específica en una nota
   * @param {string} path - Ruta de la nota
   * @param {number} linea - Número de línea de la tarea
   */
  navegarATarea(path, linea) {
    if (!path) {
      console.error("No se proporcion\xF3 una ruta de archivo v\xE1lida");
      return;
    }
    try {
      const archivo = app.vault.getAbstractFileByPath(path);
      if (!archivo) {
        console.warn(`No se encontr\xF3 el archivo: ${path}`);
        return;
      }
      const canUseEState = typeof app.workspace.openLinkText === "function";
      if (canUseEState) {
        app.workspace.openLinkText(path, "", true, { eState: { line: linea } });
      } else {
        const leaf = app.workspace.getLeaf(false);
        leaf.openFile(archivo).then(() => {
          setTimeout(() => {
            if (leaf.view && leaf.view.editor) {
              const editor = leaf.view.editor;
              editor.setCursor({ line: linea, ch: 0 });
              editor.scrollIntoView({ from: { line: linea, ch: 0 }, to: { line: linea, ch: 0 } }, true);
            }
          }, 100);
        });
      }
    } catch (e) {
      console.error("Error al navegar a la tarea:", e);
      try {
        const archivo = app.vault.getAbstractFileByPath(path);
        if (archivo) {
          app.workspace.getLeaf(false).openFile(archivo);
        } else {
          new Notice("No se pudo encontrar el archivo: " + path);
        }
      } catch (err) {
        console.error("Error en el fallback de navegaci\xF3n:", err);
        new Notice("Error al abrir el archivo: " + err.message);
      }
    }
  }
  // --- Mejora de la busqueda de Contextos GTD por bloque dvjs
  /**
   * Genera una vista de tareas por contexto con navegación interactiva
   * @param dv - Objeto dataview para acceder a sus funciones
   * @returns Elemento DOM interactivo con los contextos y sus tareas
   */
  async mostrarContextosGTD(dv2) {
    try {
      const container = document.createElement("div");
      container.className = "contextos-gtd-container";
      const styleEl = document.createElement("style");
      styleEl.textContent = `
        .highlighted-line {
          background-color: rgba(var(--interactive-accent-rgb), 0.3) !important;
          transition: background-color 1s ease-out;
        }
        
        .tarea-link {
          color: var(--interactive-accent);
          text-decoration: none;
          transition: all 0.2s ease;
        }
        
        .tarea-link:hover {
          text-decoration: underline;
          color: var(--interactive-accent-hover);
        }
        
        .linea-info {
          font-size: 0.85em;
          color: var(--text-muted);
        }

        /* El resto de estilos necesarios se cargan desde el archivo CSS global */
        `;
      container.appendChild(styleEl);
      const controlsContainer = document.createElement("div");
      controlsContainer.className = "contextos-controles";
      const btnExpandir = document.createElement("button");
      btnExpandir.textContent = "\u{1F4C2} Expandir Todo";
      btnExpandir.className = "contextos-btn expandir";
      const btnColapsar = document.createElement("button");
      btnColapsar.textContent = "\u{1F4C1} Colapsar Todo";
      btnColapsar.className = "contextos-btn colapsar";
      const btnRefrescar = document.createElement("button");
      btnRefrescar.textContent = "\u{1F504} Actualizar";
      btnRefrescar.className = "contextos-btn refrescar";
      controlsContainer.appendChild(btnExpandir);
      controlsContainer.appendChild(btnColapsar);
      controlsContainer.appendChild(btnRefrescar);
      container.appendChild(controlsContainer);
      const contextosContainer = document.createElement("div");
      contextosContainer.className = "contextos-container";
      container.appendChild(contextosContainer);
      const loadingIndicator = document.createElement("div");
      loadingIndicator.className = "loading-indicator";
      const spinner = document.createElement("div");
      spinner.className = "spinner";
      loadingIndicator.appendChild(spinner);
      const loadingText = document.createElement("div");
      loadingText.textContent = "Cargando contextos...";
      loadingIndicator.appendChild(loadingText);
      contextosContainer.appendChild(loadingIndicator);
      const { contextosConTareas, totalContextos, totalTareas } = await this.plugin.tareasAPI.getTareasContextos();
      if (totalContextos === 0) {
        contextosContainer.innerHTML = "";
        const emptyMessage = document.createElement("p");
        emptyMessage.className = "error-message";
        emptyMessage.textContent = "No se encontraron tareas con contextos asignados";
        contextosContainer.appendChild(emptyMessage);
        return container;
      }
      contextosContainer.innerHTML = "";
      const statsDiv = document.createElement("div");
      statsDiv.className = "contextos-stats";
      const statTotal = document.createElement("p");
      statTotal.textContent = `Total de contextos con tareas: ${totalContextos}`;
      statsDiv.appendChild(statTotal);
      const statTareas = document.createElement("p");
      statTareas.textContent = `Total de tareas encontradas: ${totalTareas}`;
      statsDiv.appendChild(statTareas);
      contextosContainer.appendChild(statsDiv);
      const arbolContextos = this.construirArbolContextos(contextosConTareas);
      this.generarContextosHTML(arbolContextos, contextosConTareas, contextosContainer);
      btnExpandir.addEventListener("click", () => {
        container.querySelectorAll(".contexto-details").forEach((details) => {
          details.setAttribute("open", "true");
        });
      });
      btnColapsar.addEventListener("click", () => {
        container.querySelectorAll(".contexto-details").forEach((details) => {
          details.removeAttribute("open");
        });
      });
      btnRefrescar.addEventListener("click", async () => {
        const nuevoContainer = await this.mostrarContextosGTD(dv2);
        container.parentNode.replaceChild(nuevoContainer, container);
      });
      return container;
    } catch (error) {
      console.error("Error en mostrarContextosGTD:", error);
      const errorContainer = document.createElement("div");
      errorContainer.className = "error-message";
      errorContainer.textContent = `Error al cargar contextos: ${error.message}`;
      return errorContainer;
    }
  }
  /**
   * Construye la estructura de árbol de contextos
   * @param contextosConTareas Mapa de contextos con sus tareas
   * @returns Estructura jerárquica de contextos
   */
  construirArbolContextos(contextosConTareas) {
    const arbol = /* @__PURE__ */ new Map();
    Array.from(contextosConTareas.keys()).forEach((contexto) => {
      const niveles = contexto.split(" \u2192 ");
      let nodoActual = arbol;
      niveles.forEach((nivel, index) => {
        if (!nodoActual.has(nivel)) {
          nodoActual.set(nivel, {
            tareas: index === niveles.length - 1 ? contextosConTareas.get(contexto) : [],
            subcontextos: /* @__PURE__ */ new Map(),
            rutaCompleta: niveles.slice(0, index + 1).join(" \u2192 ")
          });
        }
        nodoActual = nodoActual.get(nivel).subcontextos;
      });
    });
    return arbol;
  }
  /**
   * Genera el HTML de los contextos recursivamente
   * @param arbolContextos Estructura jerárquica de contextos
   * @param contextosConTareas Mapa original de contextos con tareas
   * @param container Elemento DOM donde añadir los contextos
   */
  generarContextosHTML(arbolContextos, contextosConTareas, container) {
    const procesarNodo = (nodo, nivel = 0, parentEl) => {
      const sortedKeys = Array.from(nodo.keys()).sort((a, b) => {
        const tareasA = nodo.get(a).tareas.length;
        const tareasB = nodo.get(b).tareas.length;
        return tareasB - tareasA;
      });
      sortedKeys.forEach((contexto) => {
        const info = nodo.get(contexto);
        const cantidadTareas = info.tareas.length;
        const tieneSubcontextos = info.subcontextos.size > 0;
        if (cantidadTareas > 0 || tieneSubcontextos) {
          const detailsEl = document.createElement("details");
          detailsEl.className = `contexto-details nivel-${nivel}`;
          parentEl.appendChild(detailsEl);
          const summaryEl = document.createElement("summary");
          summaryEl.className = "contexto-summary";
          detailsEl.appendChild(summaryEl);
          const headerEl = document.createElement("div");
          headerEl.className = "contexto-header";
          const nombreEl = document.createElement("div");
          nombreEl.className = "contexto-nombre";
          nombreEl.textContent = this.formatearNombreContexto(contexto);
          headerEl.appendChild(nombreEl);
          if (cantidadTareas > 0) {
            const contadorEl = document.createElement("div");
            contadorEl.className = "contexto-contador";
            contadorEl.textContent = cantidadTareas.toString();
            headerEl.appendChild(contadorEl);
          }
          summaryEl.appendChild(headerEl);
          if (cantidadTareas > 0) {
            const tareasContainer = document.createElement("div");
            tareasContainer.className = "contexto-tareas";
            detailsEl.appendChild(tareasContainer);
            info.tareas.forEach((tarea) => {
              this.crearTareaElement(tarea, tareasContainer);
            });
          }
          if (tieneSubcontextos) {
            const subcontextosEl = document.createElement("div");
            subcontextosEl.className = "subcontextos-container";
            detailsEl.appendChild(subcontextosEl);
            procesarNodo(info.subcontextos, nivel + 1, subcontextosEl);
          }
        }
      });
    };
    procesarNodo(arbolContextos, 0, container);
  }
  // Reemplazo para crearTareaElement en la clase addOnsAPI
  crearTareaElement(tarea, container) {
    var _a, _b, _c, _d;
    const tareaEl = document.createElement("div");
    tareaEl.className = `tarea-item ${tarea.isBlocked ? "tarea-bloqueada" : ""}`;
    const textoEl = document.createElement("div");
    textoEl.className = "tarea-texto";
    const checkboxEl = document.createElement("span");
    checkboxEl.className = "tarea-checkbox";
    checkboxEl.textContent = "\u2610";
    textoEl.appendChild(checkboxEl);
    const contenidoEl = document.createElement("span");
    contenidoEl.className = "tarea-contenido";
    contenidoEl.textContent = tarea.texto;
    textoEl.appendChild(contenidoEl);
    tareaEl.appendChild(textoEl);
    const metadatosEl = document.createElement("div");
    metadatosEl.className = "tarea-metadatos";
    const ubicacionEl = document.createElement("div");
    ubicacionEl.className = "tarea-ubicacion";
    const iconoUbicacion = document.createElement("span");
    iconoUbicacion.className = "metadato-icono";
    iconoUbicacion.textContent = "\u{1F4CD}";
    ubicacionEl.appendChild(iconoUbicacion);
    const valorUbicacion = document.createElement("span");
    valorUbicacion.className = "metadato-valor";
    const enlace = document.createElement("a");
    enlace.className = "internal-link tarea-link";
    enlace.textContent = tarea.titulo;
    let rutaValida = tarea.rutaArchivo;
    if (rutaValida) {
      const wikiMatch = rutaValida.match(/\[\[(.*?)(?:\|(.*?))?\]\]/);
      if (wikiMatch) {
        rutaValida = wikiMatch[1];
      }
      if (!rutaValida.endsWith(".md") && app.vault.getAbstractFileByPath(rutaValida + ".md")) {
        rutaValida += ".md";
      }
    }
    enlace.setAttribute("data-path", rutaValida || "");
    enlace.setAttribute("data-line", ((_b = (_a = tarea.lineInfo) == null ? void 0 : _a.numero) == null ? void 0 : _b.toString()) || "0");
    enlace.setAttribute("data-texto", tarea.textoOriginal || tarea.texto || "");
    enlace.addEventListener("click", (event) => {
      event.preventDefault();
      const path = enlace.getAttribute("data-path");
      const line = parseInt(enlace.getAttribute("data-line"), 10);
      const texto = enlace.getAttribute("data-texto");
      if (!path) {
        new Notice("Ruta del archivo no disponible");
        return;
      }
      const file = app.vault.getAbstractFileByPath(path);
      if (!file) {
        new Notice(`Archivo no encontrado: ${path}`);
        return;
      }
      this.navegarATareaConResaltado(path, line, texto, true);
    });
    valorUbicacion.appendChild(enlace);
    if ((_c = tarea.lineInfo) == null ? void 0 : _c.numero) {
      const lineaInfo = document.createElement("span");
      lineaInfo.className = "linea-info";
      lineaInfo.textContent = ` (l\xEDnea ${tarea.lineInfo.numero})`;
      valorUbicacion.appendChild(lineaInfo);
    }
    ubicacionEl.appendChild(valorUbicacion);
    metadatosEl.appendChild(ubicacionEl);
    if (tarea.fechaVencimiento || tarea.fechaScheduled || tarea.fechaStart) {
      const fechasEl = document.createElement("div");
      fechasEl.className = "tarea-fechas";
      if (tarea.fechaVencimiento) {
        const fechaEl = document.createElement("div");
        fechaEl.className = "tarea-fecha vencimiento";
        const iconoFecha = document.createElement("span");
        iconoFecha.className = "metadato-icono";
        iconoFecha.textContent = "\u{1F4C5}";
        fechaEl.appendChild(iconoFecha);
        const valorFecha = document.createElement("span");
        valorFecha.className = "metadato-valor";
        valorFecha.textContent = tarea.fechaVencimiento;
        fechaEl.appendChild(valorFecha);
        fechasEl.appendChild(fechaEl);
      }
      if (tarea.fechaScheduled) {
        const fechaEl = document.createElement("div");
        fechaEl.className = "tarea-fecha scheduled";
        const iconoFecha = document.createElement("span");
        iconoFecha.className = "metadato-icono";
        iconoFecha.textContent = "\u23F3";
        fechaEl.appendChild(iconoFecha);
        const valorFecha = document.createElement("span");
        valorFecha.className = "metadato-valor";
        valorFecha.textContent = tarea.fechaScheduled;
        fechaEl.appendChild(valorFecha);
        fechasEl.appendChild(fechaEl);
      }
      if (tarea.fechaStart) {
        const fechaEl = document.createElement("div");
        fechaEl.className = "tarea-fecha start";
        const iconoFecha = document.createElement("span");
        iconoFecha.className = "metadato-icono";
        iconoFecha.textContent = "\u{1F6EB}";
        fechaEl.appendChild(iconoFecha);
        const valorFecha = document.createElement("span");
        valorFecha.className = "metadato-valor";
        valorFecha.textContent = tarea.fechaStart;
        fechaEl.appendChild(valorFecha);
        fechasEl.appendChild(fechaEl);
      }
      metadatosEl.appendChild(fechasEl);
    }
    if (tarea.horaInicio || tarea.horaFin) {
      const horarioEl = document.createElement("div");
      horarioEl.className = "tarea-horario";
      const iconoHorario = document.createElement("span");
      iconoHorario.className = "metadato-icono";
      iconoHorario.textContent = "\u23F0";
      horarioEl.appendChild(iconoHorario);
      const valorHorario = document.createElement("span");
      valorHorario.className = "metadato-valor";
      valorHorario.textContent = `${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}`;
      horarioEl.appendChild(valorHorario);
      metadatosEl.appendChild(horarioEl);
    }
    if (((_d = tarea.etiquetas.personas) == null ? void 0 : _d.length) > 0) {
      const personasEl = document.createElement("div");
      personasEl.className = "tarea-personas";
      const iconoPersonas = document.createElement("span");
      iconoPersonas.className = "metadato-icono";
      iconoPersonas.textContent = "\u{1F464}";
      personasEl.appendChild(iconoPersonas);
      const valorPersonas = document.createElement("span");
      valorPersonas.className = "metadato-valor";
      valorPersonas.textContent = tarea.etiquetas.personas.join(" | ");
      personasEl.appendChild(valorPersonas);
      metadatosEl.appendChild(personasEl);
    }
    tareaEl.appendChild(metadatosEl);
    container.appendChild(tareaEl);
  }
  // Método mejorado de navegación a tareas con validación adicional
  async navegarATareaConResaltado(path, lineNumber, textoTarea, nuevaPesta\u00F1a = true) {
    try {
      const file = app.vault.getAbstractFileByPath(path);
      if (!file) {
        new Notice(`Archivo no encontrado: ${path}`);
        return;
      }
      const leaf = app.workspace.getLeaf(nuevaPesta\u00F1a);
      await leaf.openFile(file);
      setTimeout(() => {
        const editor = leaf.view.editor;
        if (!editor)
          return;
        if (lineNumber > 0) {
          editor.setCursor({ line: lineNumber - 1, ch: 0 });
          editor.scrollIntoView(
            { from: { line: lineNumber - 1, ch: 0 }, to: { line: lineNumber - 1, ch: 0 } },
            true
          );
          this.resaltarLineaTemporalmente(editor, lineNumber - 1);
        } else if (textoTarea) {
          const contenido = editor.getValue();
          const lineas = contenido.split("\n");
          for (let i = 0; i < lineas.length; i++) {
            const textoLimpio = textoTarea.replace(/^-\s*\[[^\]]+\]\s*/, "").trim();
            const lineaLimpia = lineas[i].replace(/^-\s*\[[^\]]+\]\s*/, "").trim();
            if (lineas[i].includes(textoTarea) || lineaLimpia.includes(textoLimpio)) {
              editor.setCursor({ line: i, ch: 0 });
              editor.scrollIntoView(
                { from: { line: i, ch: 0 }, to: { line: i, ch: lineas[i].length } },
                true
              );
              this.resaltarLineaTemporalmente(editor, i);
              break;
            }
          }
        }
      }, 300);
    } catch (error) {
      console.error("Error en navegarATareaConResaltado:", error);
      new Notice(`Error al navegar: ${error.message}`);
    }
  }
  // Versión mejorada del resaltado de líneas
  resaltarLineaTemporalmente(editor, lineIndex) {
    try {
      if (editor.cm && editor.cm.state) {
        const lineDiv = editor.cm.dom.querySelector(".cm-content");
        if (lineDiv) {
          const lineElements = lineDiv.querySelectorAll(".cm-line");
          if (lineElements && lineElements.length > lineIndex) {
            lineElements[lineIndex].classList.add("highlighted-line");
            setTimeout(() => {
              lineElements[lineIndex].classList.remove("highlighted-line");
            }, 2e3);
          }
        }
      } else {
        const lineDiv = editor.lineDiv || editor.getScrollerElement();
        if (lineDiv) {
          const lineElements = lineDiv.querySelectorAll(".CodeMirror-line");
          if (lineElements && lineElements.length > lineIndex) {
            lineElements[lineIndex].classList.add("highlighted-line");
            setTimeout(() => {
              lineElements[lineIndex].classList.remove("highlighted-line");
            }, 2e3);
          }
        }
      }
    } catch (error) {
      console.error("Error al resaltar l\xEDnea:", error);
    }
  }
  /**
   * Formatea el nombre de un contexto para mejor visualización
   * @param contexto String del contexto con formato jerárquico
   * @returns Nombre formateado del contexto
   */
  formatearNombreContexto(contexto) {
    if (contexto.includes(" \u2192 ")) {
      return contexto.split(" \u2192 ").pop() || contexto;
    }
    return contexto;
  }
  // --- Taeas Huerfanas
  // Método para addOnsAPI que muestra tareas sin clasificar en un componente visual
  /**
   * Genera un componente visual para mostrar tareas sin clasificar (sin contexto, personas,
   * fechas o clasificación GTD)
   * @param dv Objeto dataview para acceder a sus funciones
   * @returns Elemento DOM con la vista de tareas sin clasificar
   */
  async mostrarTareasSinClasificar(dv2) {
    try {
      const container = document.createElement("div");
      container.className = "tareas-sin-clasificar-container";
      const styleEl = document.createElement("style");
      styleEl.textContent = `
        .tareas-sin-clasificar-container {
            font-size: 0.95em;
            width: 100%;
            max-width: 100%;
            margin: 0;
            padding: 0;
        }
        
        .tareas-heading {
            margin-top: 1rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid var(--background-modifier-border);
            padding-bottom: 6px;
            font-weight: 600;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .stats-badge {
            background-color: var(--interactive-accent);
            color: white;
            border-radius: 12px;
            padding: 2px 10px;
            font-size: 0.8em;
            font-weight: normal;
        }
        
        .tarea-group {
            background-color: var(--background-secondary);
            border-radius: 8px;
            margin-bottom: 1rem;
            overflow: hidden;
        }
        
        .tarea-group-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background-color: var(--background-secondary-alt);
            cursor: pointer;
            user-select: none;
        }
        
        .tarea-group-header:hover {
            background-color: var(--background-modifier-hover);
        }
        
        .tarea-group-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        .tarea-group-toggle {
            font-family: monospace;
            transition: transform 0.2s ease;
        }
        
        .tarea-group-toggle.open {
            transform: rotate(90deg);
        }
        
        .tarea-group-count {
            background-color: var(--interactive-accent);
            color: white;
            border-radius: 12px;
            padding: 1px 8px;
            font-size: 0.85em;
        }
        
        .tarea-list {
            padding: 0 12px 12px;
            display: none;
        }
        
        .tarea-list.open {
            display: block;
        }
        
        .tarea-item {
            margin: 8px 0;
            padding: 8px;
            border-radius: 6px;
            background-color: var(--background-primary);
            border: 1px solid var(--background-modifier-border);
            transition: all 0.2s ease;
        }
        
        .tarea-item:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
            border-color: var(--interactive-accent);
        }
        
        .tarea-texto {
            margin-bottom: 6px;
            display: flex;
            gap: 8px;
            align-items: flex-start;
        }
        
        .tarea-checkbox {
            color: var(--text-faint);
            font-size: 1.1em;
            flex-shrink: 0;
            cursor: pointer;
        }
        
        .tarea-contenido {
            flex-grow: 1;
            line-height: 1.4;
        }
        
        .tarea-metadatos {
            margin-left: 28px;
            font-size: 0.9em;
            color: var(--text-muted);
        }
        
        .tarea-meta-item {
            margin-bottom: 3px;
            display: flex;
            align-items: baseline;
        }
        
        .meta-icon {
            margin-right: 6px;
            width: 16px;
            text-align: center;
        }
        
        .loading-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            color: var(--text-muted);
        }
        
        .spinner {
            border: 3px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 3px solid var(--interactive-accent);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            color: var(--text-error);
            background-color: rgba(var(--text-error-rgb), 0.1);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            margin: 10px 0;
        }
        
        .tareas-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
            justify-content: center;
        }
        
        .tareas-btn {
            background-color: var(--background-secondary-alt);
            border: 1px solid var(--background-modifier-border);
            border-radius: 6px;
            padding: 6px 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .tareas-btn:hover {
            background-color: var(--background-modifier-hover);
        }
        
        .expand-btn:hover {
            background-color: var(--interactive-accent);
            color: white;
        }
        
        .empty-message {
            color: var(--text-muted);
            text-align: center;
            padding: 2rem;
            font-style: italic;
        }
        `;
      container.appendChild(styleEl);
      const heading = document.createElement("h3");
      heading.className = "tareas-heading";
      heading.textContent = "Tareas Sin Clasificar";
      container.appendChild(heading);
      const controlsDiv = document.createElement("div");
      controlsDiv.className = "tareas-controls";
      const expandBtn = document.createElement("button");
      expandBtn.className = "tareas-btn expand-btn";
      expandBtn.textContent = "\u{1F4C2} Expandir Todo";
      expandBtn.addEventListener("click", () => this.expandirTodasLasTareas(container));
      const collapseBtn = document.createElement("button");
      collapseBtn.className = "tareas-btn collapse-btn";
      collapseBtn.textContent = "\u{1F4C1} Colapsar Todo";
      collapseBtn.addEventListener("click", () => this.colapsarTodasLasTareas(container));
      const refreshBtn = document.createElement("button");
      refreshBtn.className = "tareas-btn refresh-btn";
      refreshBtn.textContent = "\u{1F504} Actualizar";
      refreshBtn.addEventListener("click", async () => {
        const nuevoContainer = await this.mostrarTareasSinClasificar(dv2);
        container.parentNode.replaceChild(nuevoContainer, container);
      });
      controlsDiv.appendChild(expandBtn);
      controlsDiv.appendChild(collapseBtn);
      controlsDiv.appendChild(refreshBtn);
      container.appendChild(controlsDiv);
      const loadingDiv = document.createElement("div");
      loadingDiv.className = "loading-indicator";
      const spinnerDiv = document.createElement("div");
      spinnerDiv.className = "spinner";
      loadingDiv.appendChild(spinnerDiv);
      const loadingText = document.createElement("div");
      loadingText.textContent = "Buscando tareas sin clasificar...";
      loadingDiv.appendChild(loadingText);
      container.appendChild(loadingDiv);
      try {
        const { tareasPorNota, totalTareas, totalNotas } = await this.plugin.tareasAPI.getTareasSinClasificar();
        container.removeChild(loadingDiv);
        if (totalTareas === 0) {
          const emptyMessage = document.createElement("div");
          emptyMessage.className = "empty-message";
          emptyMessage.textContent = "\xA1Felicidades! No se encontraron tareas sin clasificar.";
          container.appendChild(emptyMessage);
          return container;
        }
        const statsBadge = document.createElement("span");
        statsBadge.className = "stats-badge";
        statsBadge.textContent = `${totalTareas} tareas en ${totalNotas} notas`;
        heading.appendChild(statsBadge);
        const notasOrdenadas = Array.from(tareasPorNota.values()).sort((a, b) => b.tareas.length - a.tareas.length);
        for (const notaInfo of notasOrdenadas) {
          const grupoTareas = this.crearGrupoTareas(notaInfo, dv2);
          container.appendChild(grupoTareas);
        }
        if (notasOrdenadas.length > 0) {
          const primerGrupo = container.querySelector(".tarea-group");
          if (primerGrupo) {
            const header = primerGrupo.querySelector(".tarea-group-header");
            const toggle = primerGrupo.querySelector(".tarea-group-toggle");
            const list = primerGrupo.querySelector(".tarea-list");
            toggle.classList.add("open");
            list.classList.add("open");
          }
        }
      } catch (error) {
        container.removeChild(loadingDiv);
        const errorMessage = document.createElement("div");
        errorMessage.className = "error-message";
        errorMessage.textContent = `Error al cargar tareas sin clasificar: ${error.message}`;
        container.appendChild(errorMessage);
        console.error("Error en mostrarTareasSinClasificar:", error);
      }
      return container;
    } catch (error) {
      console.error("Error general en mostrarTareasSinClasificar:", error);
      const errorContainer = document.createElement("div");
      errorContainer.className = "error-message";
      errorContainer.textContent = `Error al cargar tareas sin clasificar: ${error.message}`;
      return errorContainer;
    }
  }
  /**
   * Crea un grupo de tareas para una nota específica
   * @param notaInfo Información de la nota y sus tareas
   * @param dv Objeto dataview
   * @returns Elemento DOM con el grupo de tareas
   */
  crearGrupoTareas(notaInfo, dv2) {
    const { titulo, ruta, tareas } = notaInfo;
    const grupoDiv = document.createElement("div");
    grupoDiv.className = "tarea-group";
    const headerDiv = document.createElement("div");
    headerDiv.className = "tarea-group-header";
    const titleDiv = document.createElement("div");
    titleDiv.className = "tarea-group-title";
    const toggleSpan = document.createElement("span");
    toggleSpan.className = "tarea-group-toggle";
    toggleSpan.textContent = "\u25B6";
    titleDiv.appendChild(toggleSpan);
    try {
      const enlaceNota = document.createElement("a");
      enlaceNota.className = "internal-link";
      enlaceNota.textContent = titulo;
      enlaceNota.href = ruta;
      enlaceNota.setAttribute("data-href", ruta);
      enlaceNota.addEventListener("click", (event) => {
        event.preventDefault();
        app.workspace.openLinkText(ruta, "", true);
      });
      titleDiv.appendChild(enlaceNota);
    } catch (e) {
      const textoNota = document.createElement("span");
      textoNota.textContent = titulo;
      titleDiv.appendChild(textoNota);
    }
    headerDiv.appendChild(titleDiv);
    const countSpan = document.createElement("span");
    countSpan.className = "tarea-group-count";
    countSpan.textContent = tareas.length.toString();
    headerDiv.appendChild(countSpan);
    grupoDiv.appendChild(headerDiv);
    const tareasList = document.createElement("div");
    tareasList.className = "tarea-list";
    for (const tarea of tareas) {
      const tareaElement = this.crearTareaElementHuerfana(tarea, dv2);
      tareasList.appendChild(tareaElement);
    }
    grupoDiv.appendChild(tareasList);
    headerDiv.addEventListener("click", (event) => {
      if (event.target.tagName === "A")
        return;
      toggleSpan.classList.toggle("open");
      tareasList.classList.toggle("open");
      if (toggleSpan.classList.contains("open")) {
        toggleSpan.textContent = "\u25BC";
      } else {
        toggleSpan.textContent = "\u25B6";
      }
    });
    return grupoDiv;
  }
  /**
   * Crea un elemento DOM para una tarea sin clasificar
   * @param tarea Objeto con la información de la tarea
   * @param dv Objeto dataview
   * @returns Elemento DOM representando la tarea
   */
  crearTareaElementHuerfana(tarea, dv2) {
    var _a, _b, _c, _d, _e;
    const tareaDiv = document.createElement("div");
    tareaDiv.className = "tarea-item";
    const textoDiv = document.createElement("div");
    textoDiv.className = "tarea-texto";
    const checkboxSpan = document.createElement("span");
    checkboxSpan.className = "tarea-checkbox";
    checkboxSpan.textContent = "\u2610";
    checkboxSpan.setAttribute("data-path", tarea.rutaArchivo);
    checkboxSpan.setAttribute("data-line", ((_b = (_a = tarea.lineInfo) == null ? void 0 : _a.numero) == null ? void 0 : _b.toString()) || "0");
    checkboxSpan.addEventListener("click", () => {
      const path = checkboxSpan.getAttribute("data-path");
      const line = parseInt(checkboxSpan.getAttribute("data-line") || "0", 10);
      this.navegarATareaConResaltado(path, line, tarea.textoOriginal || tarea.texto, true);
    });
    textoDiv.appendChild(checkboxSpan);
    const contenidoSpan = document.createElement("span");
    contenidoSpan.className = "tarea-contenido";
    contenidoSpan.textContent = tarea.texto;
    contenidoSpan.setAttribute("data-path", tarea.rutaArchivo);
    contenidoSpan.setAttribute("data-line", ((_d = (_c = tarea.lineInfo) == null ? void 0 : _c.numero) == null ? void 0 : _d.toString()) || "0");
    contenidoSpan.style.cursor = "pointer";
    contenidoSpan.addEventListener("click", () => {
      const path = contenidoSpan.getAttribute("data-path");
      const line = parseInt(contenidoSpan.getAttribute("data-line") || "0", 10);
      this.navegarATareaConResaltado(path, line, tarea.textoOriginal || tarea.texto, true);
    });
    textoDiv.appendChild(contenidoSpan);
    tareaDiv.appendChild(textoDiv);
    const metadatosDiv = document.createElement("div");
    metadatosDiv.className = "tarea-metadatos";
    const ubicacionDiv = document.createElement("div");
    ubicacionDiv.className = "tarea-meta-item";
    const iconoUbicacion = document.createElement("span");
    iconoUbicacion.className = "meta-icon";
    iconoUbicacion.textContent = "\u{1F4CD}";
    ubicacionDiv.appendChild(iconoUbicacion);
    const valorUbicacion = document.createElement("span");
    if ((_e = tarea.lineInfo) == null ? void 0 : _e.numero) {
      valorUbicacion.textContent = `L\xEDnea ${tarea.lineInfo.numero}`;
    } else {
      valorUbicacion.textContent = "Posici\xF3n desconocida";
    }
    ubicacionDiv.appendChild(valorUbicacion);
    metadatosDiv.appendChild(ubicacionDiv);
    if (tarea.etiquetas.todas.length > 0) {
      const etiquetasDiv = document.createElement("div");
      etiquetasDiv.className = "tarea-meta-item";
      const iconoEtiquetas = document.createElement("span");
      iconoEtiquetas.className = "meta-icon";
      iconoEtiquetas.textContent = "\u{1F3F7}\uFE0F";
      etiquetasDiv.appendChild(iconoEtiquetas);
      const valorEtiquetas = document.createElement("span");
      valorEtiquetas.textContent = tarea.etiquetas.todas.join(" ");
      etiquetasDiv.appendChild(valorEtiquetas);
      metadatosDiv.appendChild(etiquetasDiv);
    }
    tareaDiv.appendChild(metadatosDiv);
    return tareaDiv;
  }
  /**
   * Expande todos los grupos de tareas
   * @param container Contenedor principal
   */
  expandirTodasLasTareas(container) {
    const grupos = container.querySelectorAll(".tarea-group");
    grupos.forEach((grupo) => {
      const toggle = grupo.querySelector(".tarea-group-toggle");
      const list = grupo.querySelector(".tarea-list");
      toggle.classList.add("open");
      toggle.textContent = "\u25BC";
      list.classList.add("open");
    });
  }
  /**
   * Colapsa todos los grupos de tareas
   * @param container Contenedor principal
   */
  colapsarTodasLasTareas(container) {
    const grupos = container.querySelectorAll(".tarea-group");
    grupos.forEach((grupo) => {
      const toggle = grupo.querySelector(".tarea-group-toggle");
      const list = grupo.querySelector(".tarea-list");
      toggle.classList.remove("open");
      toggle.textContent = "\u25B6";
      list.classList.remove("open");
    });
  }
  //-- Tareas Inbox
  // Delegación para mostrarTareasInbox
  async mostrarTareasInbox(dv2) {
    return this.tareasInboxComponent.generar(dv2);
  }
  /**
   * Muestra un dashboard de proyectos GTD y sus campañas asociadas
   * @param dv Objeto dataview para acceder a sus funciones
   * @param options Opciones de configuración (modo de visualización)
   * @returns Elemento HTML con el dashboard interactivo
   */
  async mostrarDashboardProyectosCampanas(dv2, options = {}) {
    return this.proyectoCampanasComponent.generar(dv2, options);
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var import_obsidian52 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/cambioHF.ts
var import_obsidian51 = require("obsidian");
var modal_cambioHF = class extends import_obsidian51.Modal {
  constructor(plugin, file) {
    super(plugin.app);
    this.plugin = plugin;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    debugger;
    this.containerEl.classList.add("modalInbox");
    const { contentEl } = this;
    debugger;
    const metadata = this.plugin.app.metadataCache.getFileCache(this.file.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaFinStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaFinal) ? window.moment(metadata.frontmatter.horaFinal, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Cambio hora cierre de registro.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases[0]}"` });
    contentEl.createEl("p", { text: "Hora de cierre registro:" });
    this.horaFinalInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaFinStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraFinalLocal = this.horaFinalInput.value;
    if (!nuevaHoraFinalLocal) {
      new import_obsidian51.Notice("Por favor, seleccione una hora de cierre.");
      return;
    }
    const nuevaHoraFinal = window.moment(nuevaHoraFinalLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      debugger;
      let campos = ["fecha", `horaFinal_${nuevaHoraFinal}`, `tiempoTrabajado_${nuevaHoraFinal}`, "estado_\u{1F535}"];
      let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(this.file, campos);
      this.close();
      new import_obsidian51.Notice("Hora de Finalizaci\xF3n actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian51.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var YAMLUpdaterAPI2 = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoNota = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async actualizarNota(infoNota, campos) {
    var _a;
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const partes = campo.split("_");
        let campoName, functionName;
        let parametro = null;
        if (partes.length > 1) {
          functionName = `get${partes[0].charAt(0).toUpperCase() + partes[0].slice(1)}`;
          campoName = partes[0];
          parametro = partes[1];
        } else {
          campoName = partes[0];
          functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        }
        let metadata = (_a = app.metadataCache.getFileCache(this.infoNota.file)) == null ? void 0 : _a.frontmatter;
        let valorActualCampo = metadata[campoName] || "Sin definir";
        if (typeof this[functionName] === "function") {
          if (parametro !== null) {
            this.nota[campoName] = await this[functionName](parametro, valorActualCampo);
          } else {
            this.nota[campoName] = await this[functionName]();
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      if (Object.keys(this.nota).length > 0) {
        await this.updateYAMLFields(this.nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian52.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  async archivarNota(infoNota, campos) {
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      nota.estado = "\u{1F535}";
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian52.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async updateYAMLFields(nota, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in nota) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = nota[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  async getFecha(flag, actual) {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getHoraFinal(parametro, actual) {
    debugger;
    if (parametro === void 0) {
      return this.formatearFecha(/* @__PURE__ */ new Date());
    } else {
      return parametro;
    }
  }
  async getTiempoTrabajado(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getSecId(flag, actual) {
  }
  async getTitulo(flag, actual) {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion(flag, actual) {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion;
    switch (flag) {
      case "RegistroTiempo":
        descripcion = await prompt("\xBFDetalle del Registro Tiempo:", actual, false, true);
        break;
      default:
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
        break;
    }
    if (descripcion === null) {
      new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases(flag, actual) {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto(flag, actual) {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion(flag, actual) {
    var _a;
    let clasificacion2, tagClasificacion2, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion2 = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 == "Nuevo") {
        clasificacion2 = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 == "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion2];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 != "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
  // ->
  async getEstado(parametro, actual) {
    debugger;
    let campo;
    if (parametro == void 0) {
      let suggester = this.tp.system.static_functions.get("suggester");
      campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
      if (campo === null) {
        new import_obsidian52.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename(flag, actual) {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
  async modalCambioHF(nota) {
    debugger;
    let modal = new modal_cambioHF(this.plugin, nota);
    modal.open();
  }
};

// src/modules/noteLifecycleManager/API/menuDiarioAPI.ts
var import_obsidian53 = require("obsidian");
init_luxon();
init_utilsAPI();
init_registroTiempoAPI();
var menuHoyAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv2) {
    dv2.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA hoy";
    dv2.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv2);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv2) {
    dv2.container.innerHTML = "";
    const botones = [
      "H\xE1bitos",
      "Balance",
      "Registro de Tareas",
      "Notas d\xEDa",
      "Personales"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Balance":
            await this.mostrarBotonBalancePersonal(dv2);
            break;
          case "H\xE1bitos":
            await this.mostrarFormularioHabitos(dv2);
            break;
          case "Registro de Tareas":
            await this.mostrarBotonRegistroTareas(dv2);
            break;
          case "Notas d\xEDa":
            await this.mostrarBotonesNotasD\u00EDa(dv2);
            break;
          case "Personales":
            await this.mostrarBotonesNotasPersonales(dv2);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv2.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv2) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv2);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian53.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian53.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian53.Notice("Error al actualizar el YAML.");
    }
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv2) {
    var _a;
    dv2.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv2.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv2.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian53.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv2.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian53.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian53.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian53.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv2.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv2) {
    dv2.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv2.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv2.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv2) {
    dv2.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian53.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv2);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv2);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv2.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv2) {
    dv2.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv2.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv2.container.appendChild(table);
    } else {
      dv2.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv2) {
    var _a, _b;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-registro-diario"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian53.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var import_obsidian55 = require("obsidian");
init_luxon();
init_utilsAPI();

// src/modules/noteLifecycleManager/views/vistaResumenSemanal.ts
var import_obsidian54 = require("obsidian");
init_luxon();
var VistaResumenSemanal = class extends import_obsidian54.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return "vista-resumen-semanal";
  }
  getDisplayText() {
    return "Resumen Semanal";
  }
  getIcon() {
    return "history";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    await this.actualizarVista(fileCache);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(fileCache);
    }, 1e4);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(fileCache) {
    var _a;
    this.contentEl.empty();
    const inicioWStr = (_a = fileCache.frontmatter) == null ? void 0 : _a.inicioW;
    if (!inicioWStr) {
      this.contentEl.setText("La configuraci\xF3n de inicioW no est\xE1 establecida.");
      return;
    }
    const folderDiario = "Estructura/Journal/Diario/Notas";
    const inicioW = DateTime.fromFormat(inicioWStr, "yyyy-MM-dd EEEE", { locale: "es" });
    const finW = inicioW.plus({ days: 6 });
    const archivosDiario = this.app.vault.getFiles().filter((file) => file.path.startsWith(folderDiario) && file.extension === "md");
    const bitacoras = archivosDiario.map((file) => {
      var _a2;
      const fechaArchivo = DateTime.fromISO(file.basename.substring(0, 10));
      const datos = (_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
      return {
        archivo: file.basename,
        path: file.path,
        fechaArchivo,
        datos
      };
    }).filter(({ fechaArchivo }) => fechaArchivo >= inicioW && fechaArchivo <= finW).sort((a, b) => a.fechaArchivo.toMillis() - b.fechaArchivo.toMillis());
    let trim = finW.quarter;
    let sem = finW.weekNumber - (finW.quarter - 1) * 13;
    if (sem == 0) {
      sem = 13;
    }
    const titulo = this.contentEl.createEl("h2", { text: `Resumen de la semana ${sem} - Q${trim} / W${finW.toFormat("WW")}.` });
    const subtitulo = this.contentEl.createEl("h3", { text: `Desde el ${inicioW.toFormat("EEEE, DD")} al ${finW.toFormat("EEEE, DD")}` });
    titulo.style.textAlign = "center";
    subtitulo.style.textAlign = "center";
    const table = document.createElement("table");
    table.className = "table-resumenSemanal";
    const thead = document.createElement("thead");
    const headerRow = document.createElement("tr");
    ["D\xEDa", "Resumen"].forEach((headerText) => {
      const th = document.createElement("th");
      th.textContent = headerText;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);
    const tbody = document.createElement("tbody");
    bitacoras.forEach(({ archivo, path, datos }) => {
      const tr = document.createElement("tr");
      const tdArchivo = document.createElement("td");
      const linkEl = document.createElement("a");
      linkEl.textContent = archivo;
      linkEl.href = path;
      linkEl.onclick = async (ev) => {
        ev.preventDefault();
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian54.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file, { eState: { focus: true } });
        }
      };
      tdArchivo.appendChild(linkEl);
      const tdResumen = document.createElement("td");
      const ul = document.createElement("ul");
      (datos.titulo || ["Sin t\xEDtulo"]).forEach((titulo2) => {
        const li = document.createElement("li");
        li.textContent = titulo2;
        ul.appendChild(li);
      });
      tdResumen.appendChild(ul);
      tr.appendChild(tdArchivo);
      tr.appendChild(tdResumen);
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    this.contentEl.appendChild(table);
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var menuSemanalAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv2) {
    dv2.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA Semanal";
    dv2.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv2);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv2) {
    dv2.container.innerHTML = "";
    const botones = [
      "Resumen diario",
      "Agradecimientos",
      "Creadas",
      "Modificadas",
      "x Fecha",
      "Tareas Cerradas"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Resumen diario":
            await this.mostrarResumenDiario(dv2);
            break;
          case "Agradecimientos":
            await this.mostrarAgradecimientos(dv2);
            break;
          case "Creadas":
            await this.mostrarCreadas(dv2);
            break;
          case "Modificadas":
            await this.mostrarModificadas(dv2);
            break;
          case "x Fecha":
            await this.mostrarxFecha(dv2);
            break;
          case "Tareas Cerradas":
            await this.mostrarTareasCerradas(dv2);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv2.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv2) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv2);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian55.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian55.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian55.Notice("Error al actualizar el YAML.");
    }
  }
  async mostrarResumenDiario(dv2) {
    var _a, _b;
    debugger;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-resumen-semanal"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv2) {
    var _a;
    dv2.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv2.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv2.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian55.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv2.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian55.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian55.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian55.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv2.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv2) {
    dv2.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv2.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv2.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv2) {
    dv2.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian55.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv2);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv2);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv2.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv2) {
    dv2.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv2.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv2.container.appendChild(table);
    } else {
      dv2.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv2) {
    var _a;
    dv2.container.innerHTML = "";
    const fechaHoy = DateTime.fromFormat(app.workspace.getActiveFile().basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        const startOfDay = horaInicio.startOf("day");
        if (startOfDay.ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += metadata.tiempoTrabajado ? parseInt(metadata.tiempoTrabajado) : 0;
        }
      }
    }
    dv2.header(3, "Tiempo registrado hoy: " + Duration.fromMillis(totalDia).toFormat("hh:mm:ss"));
    registrosHoy.sort((a, b) => {
      if (typeof a.frontmatter.horaInicio === "string" && typeof b.frontmatter.horaInicio === "string") {
        try {
          const millisA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          const millisB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          return millisB - millisA;
        } catch (e) {
          console.error("Error parsing dates:", e);
          return 0;
        }
      } else {
        console.warn("Invalid date format for sorting:", a.horaInicio, b.horaInicio);
        return 0;
      }
    });
    if (registrosHoy.length > 0) {
      const table = dv2.container.createEl("table", { cls: "dataview table" });
      table.style.width = "100%";
      const header = dv2.el("tr", "", table);
      ["Registro", "Descripci\xF3n", "Hora Inicio", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((text) => dv2.el("th", text, header));
      registrosHoy.forEach((registro) => {
        const row = dv2.el("tr", "", table);
        dv2.el("td", dv2.func.link(registro.path, registro.frontmatter.aliases[0]), row);
        dv2.el("td", registro.frontmatter.descripcion ? registro.frontmatter.descripcion : "Sin descripci\xF3n", row);
        dv2.el("td", DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a") + " / " + DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a"), row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          let partes = registro.frontmatter.horaInicio.split(" ");
          let fechaHoraISO = `${partes[0]}T${partes[2]}`;
          let inicio = Date.parse(fechaHoraISO);
          let ahora = Date.now();
          let diferencia = ahora - inicio;
          dv2.el("td", Duration.fromMillis(diferencia).toFormat("h:mm"), row);
        } else {
          dv2.el("td", Duration.fromMillis(registro.frontmatter.tiempoTrabajado).toFormat("h:mm"), row);
        }
        dv2.el("td", registro.frontmatter.estado, row);
        dv2.el("td", registro.frontmatter.id, row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          dv2.el("td", this.createButtonTable("Cerrar", async () => {
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
          }), row);
        } else {
          dv2.el("td", this.createButtonTable("Retomar", () => {
            this.retomarTarea(registro.frontmatter.id);
          }), row);
        }
      });
    }
    const botonSalir = this.agregarBotonSalir(dv2);
    dv2.container.appendChild(botonSalir);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian55.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/moduloRegistroTiempo/views/vistaRTActivo.ts
var import_obsidian56 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroActivo = class extends import_obsidian56.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    this.alertaEjecutada25 = false;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-activo";
  }
  getDisplayText() {
    return "Registro Activo";
  }
  getIcon() {
    return "checkmark";
  }
  async onOpen() {
    await this.actualizarVista();
    this.intervalId = setInterval(async () => {
      await this.actualizarVista();
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista() {
    var _a, _b;
    let scrollTop = 0;
    let scrollLeft = 0;
    const oldTableWrapper = this.containerEl.querySelector(".table-wrapper");
    if (oldTableWrapper) {
      scrollTop = oldTableWrapper.scrollTop;
      scrollLeft = oldTableWrapper.scrollLeft;
    }
    this.containerEl.empty();
    this.containerEl.classList.add("registro-tiempo-container");
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let registrosActivos = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        let registroActivo = { file };
        Object.assign(registroActivo, metadata);
        registrosActivos.push(registroActivo);
      }
    }
    if (registrosActivos.length === 0) {
      const messageContainer = this.containerEl.createEl("div", { cls: "message-container" });
      messageContainer.createEl("p", { text: "No hay ning\xFAn registro de tiempo ejecut\xE1ndose." });
      const botonCrear = messageContainer.createEl("button", { cls: "registro-tiempo-btn" });
      botonCrear.textContent = "+ Registro Tiempo";
      botonCrear.onclick = async () => {
        const starterAPInstance = new starterAPI(this.plugin);
        await starterAPInstance.createNote("RegistroTiempo");
      };
      this.containerEl.appendChild(messageContainer);
      this.containerEl.createEl("div", { cls: "separador" });
    } else if (registrosActivos.length > 0) {
      const registroEnEjecucion = registrosActivos[0];
      const activeContainer = this.containerEl.createEl("div", { cls: "active-time-container" });
      activeContainer.createEl("h4", { text: "Registro de Tiempo en Ejecuci\xF3n", cls: "registro-tiempo-titulo" });
      const aliasContainer = activeContainer.createEl("p", { cls: "registro-alias" });
      const aliasText = registroEnEjecucion.aliases && registroEnEjecucion.aliases[1] ? registroEnEjecucion.aliases[1] : registroEnEjecucion.aliases && registroEnEjecucion.aliases[0] ? registroEnEjecucion.aliases[0] : "Sin alias";
      const aliasLabel = aliasContainer.createEl("strong", { text: "Alias: " });
      const aliasLink = aliasContainer.createEl("a", {
        text: aliasText,
        cls: "alias-link",
        href: "#"
      });
      aliasLink.addEventListener("click", async (event) => {
        event.preventDefault();
        if (registroEnEjecucion.file instanceof import_obsidian56.TFile) {
          await app.workspace.getLeaf("split").openFile(registroEnEjecucion.file);
        }
      });
      const descripcionContainer = activeContainer.createEl("p", { cls: "registro-descripcion" });
      descripcionContainer.innerHTML = `<strong>Descripci\xF3n:</strong> ${registroEnEjecucion.descripcion || "Sin descripci\xF3n"}`;
      const tiempoContainer = activeContainer.createEl("div", { cls: "tiempo-container" });
      const tiempoEjecucion = tiempoContainer.createEl("p", { cls: "tiempo-ejecucion", text: "Tiempo transcurrido: Calculando..." });
      this.actualizarTiempoEnEjecucion(tiempoEjecucion, registroEnEjecucion.horaInicio);
      const editTimeIcon = tiempoContainer.createEl("span", {
        cls: "edit-time-icon",
        attr: {
          "aria-label": "Editar hora de inicio",
          "title": "Editar hora de inicio"
        }
      });
      editTimeIcon.innerHTML = "\u23F1\uFE0F";
      editTimeIcon.addEventListener("click", () => {
        this.mostrarSelectorHoraInicio(registroEnEjecucion);
      });
      const botonesContainer = activeContainer.createEl("div", { cls: "registro-botones-container" });
      const changeDescButton = document.createElement("button");
      changeDescButton.innerHTML = "\u270F\uFE0F <span class='button-text'>  Descripci\xF3n</span>";
      changeDescButton.classList.add("change-desc-btn");
      changeDescButton.addEventListener("click", async () => {
        var _a2;
        const nuevaDescripcion = await this.mostrarPrompt("Nueva Descripci\xF3n:", registroEnEjecucion.descripcion || "");
        if (nuevaDescripcion !== null) {
          const file = registroEnEjecucion.file;
          if (!file)
            return;
          const fileContent = await this.app.vault.read(file);
          let frontmatter = ((_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) || {};
          frontmatter.descripcion = nuevaDescripcion;
          const newContent = this.reescribirFrontmatter(fileContent, frontmatter);
          await this.app.vault.modify(file, newContent);
          this.actualizarVista();
        }
      });
      const stopButton = document.createElement("button");
      stopButton.innerHTML = "\u270B\u{1F3FC} <span class='button-text'> Detener Registro</span>";
      stopButton.classList.add("stop-time-btn");
      stopButton.addEventListener("click", async () => {
        try {
          console.log("Bot\xF3n 'Cerrar Tarea' presionado.");
          if (!registroEnEjecucion.file || !(registroEnEjecucion.file instanceof import_obsidian56.TFile)) {
            console.error("No se encontr\xF3 el archivo del registro en ejecuci\xF3n.");
            return;
          }
          await this.registroTiempoAPI.cerrarRegistro(registroEnEjecucion.file);
          console.log("Registro cerrado correctamente.");
          this.actualizarVista();
        } catch (error) {
          console.error("Error al cerrar la tarea:", error);
        }
      });
      botonesContainer.appendChild(changeDescButton);
      botonesContainer.appendChild(stopButton);
      activeContainer.appendChild(botonesContainer);
      activeContainer.appendChild(aliasContainer);
      activeContainer.appendChild(descripcionContainer);
      activeContainer.appendChild(tiempoContainer);
      this.containerEl.appendChild(activeContainer);
    }
    let registrosFinalizados = [];
    for (let file of files) {
      let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F535}") {
        let registroFinalizado = { file };
        Object.assign(registroFinalizado, metadata);
        registrosFinalizados.push(registroFinalizado);
      }
    }
    registrosFinalizados.sort((a, b) => b.id - a.id);
    let top5RegistrosActivos = registrosFinalizados.slice(0, 15);
    if (top5RegistrosActivos.length > 0) {
      const tableWrapper = this.containerEl.createEl("div", { cls: "table-wrapper" });
      const table = tableWrapper.createEl("table", { cls: "styled-table" });
      const header = table.createEl("tr");
      ["Alias", "Descripci\xF3n", "Retomar"].forEach((text) => header.createEl("th", { text }));
      top5RegistrosActivos.forEach((registro) => {
        const row = table.createEl("tr");
        const aliasCell = row.createEl("td");
        const aliasText = registro.aliases && registro.aliases[1] ? registro.aliases[1] : registro.aliases && registro.aliases[0] ? registro.aliases[0] : "Sin alias";
        const aliasLink = aliasCell.createEl("a", {
          text: aliasText,
          cls: "clickable-alias",
          href: "#"
        });
        aliasLink.addEventListener("click", async () => {
          let file = app.vault.getAbstractFileByPath(registro.file.path);
          if (file instanceof import_obsidian56.TFile) {
            await app.workspace.getLeaf(true).openFile(file);
          }
        });
        row.createEl("td", { text: registro.descripcion || "No Definida" });
        const buttonCell = row.createEl("td");
        const button = this.createButtonTable("\u23F1\uFE0F", () => {
          this.registroTiempoAPI.retomarTarea(registro.id);
        });
        button.classList.add("retomar-btn");
        button.setAttribute("aria-label", "Retomar");
        buttonCell.appendChild(button);
      });
      this.containerEl.appendChild(tableWrapper);
      tableWrapper.scrollTop = scrollTop;
      tableWrapper.scrollLeft = scrollLeft;
    } else {
      this.containerEl.createEl("p", { text: "No hay registros finalizados." });
    }
  }
  /**
   * Función para actualizar dinámicamente el tiempo en ejecución
   * Modificada para soportar días con tildes como "Miércoles" y "Sábado"
   */
  actualizarTiempoEnEjecucion(element, horaInicio) {
    const extraerHora = (fechaStr) => {
      const match2 = fechaStr.match(/(\d{4}-\d{2}-\d{2})\s+\S+\s+(\d{2}:\d{2})/);
      if (match2) {
        return /* @__PURE__ */ new Date(`${match2[1]}T${match2[2]}:00`);
      }
      return null;
    };
    const inicio = extraerHora(horaInicio);
    if (!inicio) {
      element.textContent = "Tiempo transcurrido: No disponible";
      return;
    }
    const calcularTiempo = () => {
      const ahora = /* @__PURE__ */ new Date();
      const diferencia = Math.floor((ahora.getTime() - inicio.getTime()) / 1e3);
      const horas = Math.floor(diferencia / 3600);
      const minutos = Math.floor(diferencia % 3600 / 60);
      const segundos = diferencia % 60;
      element.textContent = `Tiempo transcurrido: ${horas}h ${minutos}m ${segundos}s`;
      if (diferencia >= 1500) {
        element.classList.add("tiempo-rojo");
      } else {
        element.classList.remove("tiempo-rojo");
      }
    };
    calcularTiempo();
    setInterval(calcularTiempo, 1e3);
  }
  /**
   * Función para mostrar un prompt y obtener un nuevo valor
   */
  async mostrarPrompt(mensaje, valorActual) {
    return new Promise((resolve) => {
      const backdrop = document.createElement("div");
      backdrop.classList.add("prompt-modal-backdrop");
      const modal = document.createElement("div");
      modal.classList.add("prompt-modal");
      const label = document.createElement("label");
      label.textContent = mensaje;
      const input = document.createElement("input");
      input.type = "text";
      input.value = valorActual;
      const buttonContainer = document.createElement("div");
      const aceptar = document.createElement("button");
      aceptar.textContent = "Aceptar";
      aceptar.addEventListener("click", () => {
        resolve(input.value.trim() || null);
        modal.remove();
        backdrop.remove();
      });
      const cancelar = document.createElement("button");
      cancelar.textContent = "Cancelar";
      cancelar.addEventListener("click", () => {
        resolve(null);
        modal.remove();
        backdrop.remove();
      });
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          aceptar.click();
        }
      });
      buttonContainer.appendChild(aceptar);
      buttonContainer.appendChild(cancelar);
      modal.appendChild(label);
      modal.appendChild(input);
      modal.appendChild(buttonContainer);
      document.body.appendChild(backdrop);
      document.body.appendChild(modal);
      input.focus();
    });
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  /**
   * Reescribe el frontmatter en un archivo Markdown, preservando la estructura original.
   */
  reescribirFrontmatter(content, frontmatter) {
    const yamlStart = content.indexOf("---");
    const yamlEnd = content.indexOf("---", yamlStart + 3);
    if (yamlStart === -1 || yamlEnd === -1) {
      return content;
    }
    let nuevoFrontmatter = "---\n";
    for (const key in frontmatter) {
      const value = frontmatter[key];
      if (Array.isArray(value)) {
        nuevoFrontmatter += `${key}:
`;
        value.forEach((item) => {
          if (typeof item === "string" && item.match(/^\[\[.*\]\]$/)) {
            nuevoFrontmatter += `  - "${item}"
`;
          } else {
            nuevoFrontmatter += `  - ${JSON.stringify(item)}
`;
          }
        });
      } else if (typeof value === "string") {
        if (value.match(/^\[\[.*\]\]$/)) {
          nuevoFrontmatter += `${key}: "${value}"
`;
        } else {
          nuevoFrontmatter += `${key}: ${JSON.stringify(value)}
`;
        }
      } else {
        nuevoFrontmatter += `${key}: ${value}
`;
      }
    }
    nuevoFrontmatter += "---\n";
    let contenidoRestante = content.slice(yamlEnd + 3).trimStart();
    return nuevoFrontmatter + (contenidoRestante ? "\n" + contenidoRestante : "");
  }
  /**
   * Muestra un selector de fecha y hora para modificar la hora de inicio del registro
   * Versión corregida para posicionar correctamente el modal
   */
  async mostrarSelectorHoraInicio(registro) {
    var _a;
    let horaInicio = registro.horaInicio;
    let fechaHora = this.extraerFechaHora(horaInicio);
    if (!fechaHora) {
      new Notice("No se pudo extraer correctamente la fecha y hora de inicio");
      return;
    }
    const valorInicialInput = `${fechaHora.fecha}T${fechaHora.hora}`;
    const overlay = document.createElement("div");
    overlay.classList.add("time-selector-overlay");
    document.body.appendChild(overlay);
    const modal = document.createElement("div");
    modal.classList.add("time-selector-modal");
    const titulo = document.createElement("h3");
    titulo.textContent = "Modificar hora de inicio";
    modal.appendChild(titulo);
    const infoContainer = document.createElement("div");
    infoContainer.classList.add("time-selector-info");
    infoContainer.innerHTML = `
        <p>Registro: <strong>${((_a = registro.aliases) == null ? void 0 : _a[0]) || "Sin alias"}</strong></p>
        <p>Hora actual: <strong>${horaInicio}</strong></p>
    `;
    modal.appendChild(infoContainer);
    const inputContainer = document.createElement("div");
    inputContainer.classList.add("time-selector-input-container");
    const label = document.createElement("label");
    label.textContent = "Nueva hora de inicio:";
    label.htmlFor = "new-start-time";
    const input = document.createElement("input");
    input.type = "datetime-local";
    input.id = "new-start-time";
    input.value = valorInicialInput;
    inputContainer.appendChild(label);
    inputContainer.appendChild(input);
    modal.appendChild(inputContainer);
    const buttonsContainer = document.createElement("div");
    buttonsContainer.classList.add("time-selector-buttons");
    const cancelButton = document.createElement("button");
    cancelButton.textContent = "Cancelar";
    cancelButton.classList.add("time-selector-button", "cancel-button");
    cancelButton.onclick = () => {
      document.body.removeChild(modal);
      document.body.removeChild(overlay);
    };
    const saveButton = document.createElement("button");
    saveButton.textContent = "Guardar";
    saveButton.classList.add("time-selector-button", "save-button");
    saveButton.onclick = async () => {
      const nuevaFechaHora = input.value;
      if (!nuevaFechaHora) {
        new Notice("Por favor, seleccione una fecha y hora v\xE1lida");
        return;
      }
      const fecha = new Date(nuevaFechaHora);
      const diasSemana = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
      const diaSemana = diasSemana[fecha.getDay()];
      const a\u00F1o = fecha.getFullYear();
      const mes = String(fecha.getMonth() + 1).padStart(2, "0");
      const dia = String(fecha.getDate()).padStart(2, "0");
      const horas = String(fecha.getHours()).padStart(2, "0");
      const minutos = String(fecha.getMinutes()).padStart(2, "0");
      const nuevaHoraFormateada = `${a\u00F1o}-${mes}-${dia} ${diaSemana} ${horas}:${minutos}`;
      await this.actualizarHoraInicio(registro.file, nuevaHoraFormateada);
      document.body.removeChild(modal);
      document.body.removeChild(overlay);
      this.actualizarVista();
    };
    buttonsContainer.appendChild(cancelButton);
    buttonsContainer.appendChild(saveButton);
    modal.appendChild(buttonsContainer);
    document.body.appendChild(modal);
    input.focus();
  }
  /**
   * Extrae la fecha y hora de una cadena con formato "YYYY-MM-DD dddd HH:mm"
   */
  extraerFechaHora(fechaStr) {
    const match2 = fechaStr.match(/(\d{4}-\d{2}-\d{2})\s+\S+\s+(\d{2}:\d{2})/);
    if (match2) {
      return {
        fecha: match2[1],
        hora: match2[2]
      };
    }
    return null;
  }
  /**
   * Actualiza la hora de inicio en el frontmatter del archivo
   */
  async actualizarHoraInicio(file, nuevaHoraInicio) {
    try {
      const contenido = await this.app.vault.read(file);
      const nuevoContenido = contenido.replace(
        /horaInicio:\s*.*(?=\n)/,
        `horaInicio: ${nuevaHoraInicio}`
      );
      await this.app.vault.modify(file, nuevoContenido);
      new Notice("Hora de inicio actualizada correctamente");
    } catch (error) {
      console.error("Error al actualizar la hora de inicio:", error);
      new Notice("Error al actualizar la hora de inicio");
    }
  }
};

// src/modules/moduloGTD/index.ts
var import_obsidian60 = require("obsidian");

// src/modules/moduloGTD/commands.ts
var import_obsidian59 = require("obsidian");

// src/modules/moduloGTD/inbox.ts
var import_obsidian58 = require("obsidian");
init_luxon();

// src/modules/modales/inboxModal.ts
var import_obsidian57 = require("obsidian");
var BandejaDeEntradaModal = class extends import_obsidian57.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    this.containerEl.classList.add("modalInbox");
    let { contentEl } = this;
    this.titleEl.setText("Bandeja de Entrada");
    let textAreaDiv = contentEl.createEl("div");
    this.inputArea = textAreaDiv.createEl("textarea");
    this.inputArea.setAttribute("placeholder", "Escribe tu tarea aqu\xED...");
    this.inputArea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.altKey) {
        e.preventDefault();
        this.submitForm();
      }
    });
    const activeFile = this.app.workspace.getActiveFile();
    const metadata = this.app.metadataCache.getFileCache(activeFile);
    let nameActiveFile = metadata.aliases ? metadata.aliases[0] : activeFile.basename;
    let checkBoxDiv = contentEl.createEl("div");
    this.checkBox = checkBoxDiv.createEl("input", { type: "checkbox" });
    checkBoxDiv.createEl("label", { text: `Guardar en ${nameActiveFile}` }).prepend(this.checkBox);
    const saveButton = checkBoxDiv.createEl("button", { text: "Guardar" });
    saveButton.addEventListener("click", () => this.submitForm());
  }
  submitForm() {
    const text = this.inputArea.value;
    const saveInCurrent = this.checkBox.checked;
    this.close();
    if (this.resolver) {
      this.resolver({ text, saveInCurrent });
    }
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/moduloGTD/inbox.ts
async function ingresarBandejaEntrada(plugin) {
  let inboxPath = `${plugin.settings.file_Inbox}.md`;
  let inboxFile = app.vault.getAbstractFileByPath(inboxPath);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian58.Notice("No hay archivo activo");
    return;
  }
  let inbox;
  const modal = new BandejaDeEntradaModal(plugin.app);
  modal.open();
  const { text, saveInCurrent } = await modal.waitForInput();
  if (text.length < 3) {
    new import_obsidian58.Notice("Inbox cancelada");
    return;
  }
  let destino = saveInCurrent ? activeFile : inboxFile;
  let hoy = DateTime.now().toFormat("yyyy-MM-dd");
  let hora = DateTime.now().toFormat("HH:mm");
  inbox = `- [ ] \u{1F9E0} ${text} #inbox [created:: ${hoy}] a las ${hora}
`;
  if (destino instanceof import_obsidian58.TFile) {
    if (destino === inboxFile) {
      insertAtStartUsingProcess(inbox, destino).then(() => {
        new import_obsidian58.Notice("Bandeja de entrada actualizada con \xE9xito.");
      }).catch((error) => {
        debugger;
        console.error(error);
        new import_obsidian58.Notice("Error al agregar contenido al inicio del archivo: " + error.message);
      });
    } else {
      await insertInboxAtCursor(inbox);
    }
  }
}
async function insertInboxAtCursor(inbox) {
  debugger;
  const activeLeaf = app.workspace.activeLeaf;
  if (activeLeaf) {
    const editor = activeLeaf.view.sourceMode.cmEditor;
    const cursor = editor.getCursor();
    editor.replaceRange(inbox, cursor);
  }
}
async function insertAtStartUsingProcess(inbox, file) {
  if (!(file instanceof import_obsidian58.TFile))
    return;
  await app.vault.process(file, (content) => {
    const newContent = inbox + content;
    return newContent;
  });
}

// src/modules/moduloGTD/commands.ts
function registerCommands3(plugin) {
  const inboxCommand = plugin.addCommand({
    id: "ingresar-inbox",
    name: "Ingresar Bandeja de Entrada -> Inbox",
    callback: async () => {
      await ingresarBandejaEntrada(plugin);
    }
  });
  plugin.registeredCommandIdsGTD = plugin.registeredCommandIdsGTD || [];
  plugin.registeredCommandIdsGTD.push(inboxCommand.id);
}
function deactivateCommands3(plugin) {
  if (!plugin.registeredCommandIdsGTD)
    return;
  plugin.registeredCommandIdsGTD.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredCommandIdsGTD = [];
}

// src/modules/moduloGTD/index.ts
var ModuloGTD = class {
  constructor(plugin) {
    this.moduloGTD = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloGTD)
      return;
    registerCommands3(this.plugin);
  }
  deactivate() {
    if (!this.moduloGTD)
      return;
    deactivateCommands3(this.plugin);
    this.moduloGTD = null;
  }
};

// src/modules/noteLifecycleManager/API/subsistemasAPI.ts
var import_obsidian61 = require("obsidian");
var subsistemasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearAV(dv2) {
    dv2.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida";
    dv2.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAV(dv2);
    };
  }
  async mostrarBotonCrearAVTrimestral(dv2) {
    dv2.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida del trimestre";
    dv2.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAVTrimestre(dv2);
    };
  }
  async procesarAV(dv2) {
    var _a, _b;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let q = await suggester(
      qCreados.map((b) => b.trimestre),
      qCreados.map((b) => b),
      true,
      `De que trimestre vamos a procesar tus Areas de Vida`
    );
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAV()
  async procesarAVTrimestre(dv2) {
    var _a;
    let q = {};
    q.trimestre = dv2.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAVTrimestre()
  //P2 areaVida Q Existe?
  async validacionAVQ(fullFolderPath, q, areaVida) {
    const pathAVQ = `${fullFolderPath}/${q.trimestre} - ${areaVida.av}.md`;
    const fileAVQ = app.vault.getAbstractFileByPath(pathAVQ);
    debugger;
    if (fileAVQ instanceof import_obsidian61.TFile) {
      let suggester = this.plugin.tp.system.static_functions.get("suggester");
      let nextStep = await suggester(
        [
          "Actualizar estado del AV",
          "Borrar y Crear de nuevo el AV",
          "Dejar el AV como est\xE1 "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBF${q.trimestre} ${areaVida.av} ya existe. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          await this.actualizarAVQ(fileAVQ);
          break;
        case "del+cre":
          await this.borrarAVQ(fileAVQ);
          await this.agregarAVQ(areaVida, q.trimestre);
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con ${fileAVQ.basename}`);
          break;
      }
    } else {
      debugger;
      await this.agregarAVQ(areaVida, q.trimestre);
    }
  }
  // P3 Agregar nodoAreaVida?
  async agregarNodoAreaVida(areaVida) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let agregar = await suggester(
      ["Si", "No"],
      [true, false],
      true,
      `\xBFDeseas agregar ${areaVida.av} a tu sistema de gesti\xF3n?`
    );
    if (agregar) {
      const filePath = `Plantillas/${this.plugin.settings[`folder_AreasVida`]}/Plt - nodoAreasVida.md`;
      const template = app.vault.getAbstractFileByPath(filePath);
      if (template instanceof import_obsidian61.TFile) {
        console.log("Archivo nodoAreaVida template encontrado:", template);
      } else {
        console.log("Archivo template nodoAreaVida no encontrado.");
      }
      const filename = areaVida.grupo + " - " + areaVida.av;
      let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
      await this.crearCarpeta(folderPath);
      const folder = app.vault.getAbstractFileByPath(folderPath);
      let crearNota;
      crearNota = this.plugin.tp.file.static_functions.get("create_new");
      try {
        let nota = await crearNota(template, filename, false, folder);
        return true;
      } catch (error) {
        console.error("Error creando NodoAreaVida: ", error);
        return error;
      }
    } else {
      return false;
    }
  }
  async agregarAVQ(areaVida, trimestre) {
    const filePath = `Plantillas/${this.plugin.settings.folder_AreasVida}/Plt - AreasVida.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (!(template instanceof import_obsidian61.TFile)) {
      console.log("Archivo no encontrado.");
      return false;
    }
    console.log("Archivo encontrado:", template);
    const filename = `${trimestre} -- ${areaVida.av} -- ${areaVida.grupo}`;
    let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
    const folder = app.vault.getAbstractFileByPath(folderPath);
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    try {
      await crearNota(template, filename, false, folder);
      return true;
    } catch (error) {
      console.error("Error creando AreaVida: ", error);
      return false;
    }
  }
  async borrarAVQ(fileAVQ) {
    console.log(`Logica de borrado de ${fileAVQ.basename}`);
    try {
      if (fileAVQ instanceof import_obsidian61.TFile) {
        await app.vault.delete(fileAVQ);
        console.log(`${fileAVQ.basename} ha sido borrado con \xE9xito.`);
      } else {
        console.error(
          `${fileAVQ.basename} no es un archivo v\xE1lido o no existe.`
        );
      }
    } catch (err) {
      console.error(`Error al intentar borrar ${fileAVQ.basename}:`, err);
    }
  }
  async actualizarAVQ(fileAVQ) {
    console.log(`Logica de actualizaci\xF3n de estado de ${fileAVQ.basename}`);
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let metadataCache = app.metadataCache.getFileCache(fileAVQ);
    let estadoActual = "";
    let nuevoEstado = "";
    if (metadataCache.frontmatter && metadataCache.frontmatter.hasOwnProperty("estado")) {
      estadoActual = metadataCache.frontmatter.estado;
    } else {
      console.log("No se encontr\xF3 el estado actual en el frontmatter.");
      return;
    }
    try {
      nuevoEstado = await suggester(
        ["\u{1F535} -> Archivado", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"],
        // opciones para mostrar
        ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"],
        // valores a retornar
        false,
        // permite selección múltiple
        `${fileAVQ.basename} est\xE1 ${estadoActual}. Asignar estado:`
        // mensaje
      );
      if (!nuevoEstado) {
        console.log("No se seleccion\xF3 un nuevo estado.");
        return;
      }
      await app.fileManager.processFrontMatter(fileAVQ, (frontmatter) => {
        if (frontmatter.hasOwnProperty("estado")) {
          frontmatter.estado = nuevoEstado;
          console.log("Estado actualizado con \xE9xito a:", nuevoEstado);
        }
      });
    } catch (err) {
      console.error("Error al actualizar el estado en el frontmatter:", err);
    }
  }
  async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // PARA PROCESAR LOS COMPASS
  // Función para crear y mostrar el botón de procesar Objetivos de las AV anuales en el proceso de Compass.
  async mostrarBotonCompassAnual(dv2) {
    dv2.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Anual";
    dv2.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassAnual(dv2);
    };
  }
  async mostrarBotonCompassTrimestral(dv2) {
    dv2.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Trimestrales";
    dv2.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassTrimestral(dv2);
    };
  }
  async procesarCompassAnual(dv2) {
    var _a;
    let a\u00F1o = dv2.current().a\u00F1o;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    debugger;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoAnual(a\u00F1o, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Anual
  async procesarCompassTrimestral(dv2) {
    var _a;
    debugger;
    let trimestre = dv2.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoTrimestral(trimestre, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Trimestral 
  async objetivoAnual(a\u00F1o, areaVida) {
    var _a;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if ((metadata == null ? void 0 : metadata.a\u00F1o) === a\u00F1o && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${a\u00F1o}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
        );
      }
    }
  }
  // Método objetivoAnual.
  async objetivoTrimestral(trimestre, areaVida) {
    var _a, _b;
    debugger;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if (((_b = metadata == null ? void 0 : metadata.trimestre) == null ? void 0 : _b.path) && typeof (metadata.trimestre.path === "string") && metadata.trimestre.path.includes(trimestre) && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${trimestre}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
        );
      }
    }
  }
  // Método objetivoTrimestral.
  /* 
  ----------------------------------------------------------------
  Método que crea el botón que se agrega en la tabla de proyectos en el 
  Compass Anual, para crear el proyecto a cada Objetivo.
  ----------------------------------------------------------------
  */
  createButtonTable(dv2, objetivo) {
    const buttonContainer = dv2.el("div", "");
    const button = dv2.el("button", "Nuevo Proyecto");
    button.addEventListener("click", async (event) => {
      event.preventDefault();
      await this.crearProyectoObjetivo(dv2, objetivo);
    });
    buttonContainer.appendChild(button);
    return buttonContainer;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado por el boton de la tabla del compass anual "Nuevo Proyecto" 
  para crear proyecto a un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoObjetivo(dv2, objetivo) {
    debugger;
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let tipoProyecto = await suggester(
      ["Proyecto GTD", "Proyecto de Q"],
      [true, false],
      true,
      `\xBFEl proyecto ${objetivo.file.name} requiere un Proyecto GTD o Proyecto de Q?`
    );
    let proyecto;
    if (tipoProyecto) {
      proyecto = this.crearProyectoGTD(objetivo);
    } else {
      debugger;
      const regexTrim = /\[?\[?(\d{4}-Q[1-4])\]?\]?/g;
      const trimestre = objetivo.trimestre.path.match(regexTrim);
      const confirmaTrim = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFVamos a crear el proyecto ${objetivo.file.name} en el trimestre ${trimestre}?`
      );
      if (!confirmaTrim) {
        const q = await this.establecerTrimestre("objetivo del a\xF1o");
        debugger;
        await this.actualizarYAMLs({ trimestre: `[[${q.trimestre}]]` }, objetivo.file.path);
      }
      proyecto = await this.crearProyectoQ(objetivo);
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que inicializa la creación de la plantilla de objetivo Compass.
  ----------------------------------------------------------------
  */
  async crearObjetivo(areaVida, a\u00F1o) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `${a\u00F1o} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  async crearObjetivoTrimestre(areaVida, trimestre) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Trimestre ${trimestre} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado desde crearProyectoObjetivo(dv, objetivo)
  Esté método hace parte del proceso de Compass Anual.
  Facilita la creación del un proyecto de Q para un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoQ(objetivo) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosQ"]}/Plt - ProyectosQ.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  async crearProyectoGTD(objetivo) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosGTD"]}/Plt - ProyectosGTD.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado en el proceso de Compass Anual, cuando elijo volver
  a crear todos los proyectos de un area de vida para un año.
  ----------------------------------------------------------------
  */
  async borrarObjetivos(objetivos) {
    debugger;
    for (let objetivo of objetivos) {
      try {
        await app.vault.delete(objetivo.file);
        console.log(`Archivo borrado: ${objetivo.file.path}`);
      } catch (error) {
        console.error(`Error al borrar el archivo ${objetivo.file.path}: ${error}`);
      }
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que permite para cualquier caso en el que se requiera elegir 
  un trimestre para continuar un proceso, hacer la verificación sobre los
  trimestres que esten creados a partir de la nota TQ.  
  ----------------------------------------------------------------
  */
  async establecerTrimestre(temaTrimestre) {
    var _a;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    try {
      let q = await suggester(
        qCreados.map((b) => b.trimestre),
        qCreados.map((b) => b),
        true,
        `De que trimestre vamos a procesar tus ${temaTrimestre}`
      );
      if (q === void 0) {
        console.log("Operaci\xF3n cancelada por el usuario.");
        return;
      }
      console.log("El usuario seleccion\xF3:", q);
      return q;
    } catch (error) {
      console.error("Error en el suggester:", error);
    }
  }
  /* 
  ----------------------------------------------------------------
  Con este método puedo actualizar valores en las notas ya existentes.
  Lo utilizo en esta clase, para actualizar el trimestre.
  Esta función solo actualiza, no crea el campos si no existe. 
  ----------------------------------------------------------------
  */
  async actualizarYAMLs(campos, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in campos) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = campos[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
};

// src/modules/noteLifecycleManager/views/vistaRegistroDiario.ts
var import_obsidian62 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroDiario = class extends import_obsidian62.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-diario";
  }
  getDisplayText() {
    return "Registro Diario";
  }
  getIcon() {
    return "file-clock";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    await this.actualizarVista(activeFile);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(activeFile);
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(activeFile) {
    var _a;
    this.contentEl.empty();
    const fechaHoy = DateTime.fromFormat(activeFile.basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        if (horaInicio.startOf("day").ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += parseInt(metadata.tiempoTrabajado || "0");
        }
      }
    }
    registrosHoy.sort((a, b) => {
      let fechaA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      let fechaB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      return fechaA - fechaB;
    });
    const titulo = this.contentEl.createEl("h2", { text: `Registros de tiempo del ${fechaHoy.toFormat("EEEE, DD")}.` });
    titulo.style.textAlign = "center";
    const table = this.contentEl.createEl("table", { cls: "table-resumenSemanal" });
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    ["Registro", "Descripci\xF3n", "Periodo", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((header) => {
      headerRow.createEl("th", { text: header });
    });
    const tbody = table.createEl("tbody");
    registrosHoy.forEach((registro) => {
      const row = tbody.createEl("tr");
      this.fillRowWithData(row, registro);
    });
    this.contentEl.appendChild(table);
  }
  fillRowWithData(row, registro) {
    const tdArchivo = row.createEl("td");
    const linkEl = document.createElement("a");
    linkEl.textContent = registro.frontmatter.aliases[0];
    linkEl.href = "#";
    linkEl.addEventListener("click", async (ev) => {
      ev.preventDefault();
      const file = this.app.vault.getAbstractFileByPath(registro.path);
      if (file instanceof import_obsidian62.TFile) {
        await this.app.workspace.getLeaf(true).openFile(file, { focus: true });
      }
    });
    tdArchivo.appendChild(linkEl);
    row.createEl("td", { text: registro.frontmatter.descripcion });
    row.createEl("td", { text: `${DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")} / ${DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")}` });
    const tdPeriodo = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      let ahora = DateTime.local();
      let inicio = DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
      let duracion = ahora.diff(inicio, ["days", "hours", "minutes"]);
      tdPeriodo.textContent = this.formatDuration(duracion);
    } else {
      let tiempoTrabajado = this.formatDuration(registro.frontmatter.tiempoTrabajado);
      tdPeriodo.textContent = tiempoTrabajado;
    }
    row.createEl("td", { text: registro.frontmatter.estado });
    row.createEl("td", { text: registro.frontmatter.id });
    const actionCell = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      actionCell.appendChild(this.createButtonTable("Cerrar", async () => {
        await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
      }));
    } else {
      actionCell.appendChild(this.createButtonTable("Retomar", () => {
        this.retomarTarea(registro.frontmatter.id);
      }));
    }
  }
  // Función auxiliar para formatear la duración de Luxon a un formato legible
  formatDuration(ms) {
    if (ms === null || ms === void 0 || isNaN(ms)) {
      return "No definido";
    } else {
      let minutos = Math.floor(ms / (1e3 * 60));
      let horas = Math.floor(minutos / 60);
      minutos = minutos % 60;
      let dias = Math.floor(horas / 24);
      horas = horas % 24;
      if (dias > 0) {
        return `${dias} d ${horas} h ${minutos} min`;
      } else if (horas > 0) {
        return `${horas} h ${minutos} min`;
      } else {
        return `${minutos} min`;
      }
    }
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian62.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/GPThora/GPThora.ts
var import_obsidian63 = require("obsidian");
var GPThora = class {
  constructor(app2) {
    this.app = app2;
  }
  onload() {
    this.app.commands.addCommand({
      id: "show-local-time",
      name: "Mostrar Hora Local",
      callback: () => this.showLocalTimeModal()
    });
  }
  showLocalTimeModal() {
    const modal = new LocalTimeModal(this.app);
    modal.open();
  }
};
var LocalTimeModal = class extends import_obsidian63.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const now2 = /* @__PURE__ */ new Date();
    const hours = now2.getHours() % 12 || 12;
    const minutes = now2.getMinutes().toString().padStart(2, "0");
    const ampm = now2.getHours() >= 12 ? "PM" : "AM";
    const timeString = `${hours}:${minutes} ${ampm}`;
    contentEl.createEl("h1", { text: "Hora Local" });
    contentEl.createEl("p", { text: timeString });
    contentEl.style.backgroundColor = "#2E3440";
    contentEl.style.color = "#D8DEE9";
    contentEl.style.padding = "20px";
    contentEl.style.textAlign = "center";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modules/moduloLibros/librosAPI.ts
var import_obsidian64 = require("obsidian");
init_luxon();
var librosAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tp = this.plugin.tp;
  }
  async kindle(dv2) {
    let folderPrincipal = this.plugin.settings["folder_KindleNotes"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian64.TFolder)) {
      new import_obsidian64.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian64.Notice("No hay una nota activa.");
      return;
    }
    const metadata = this.plugin.app.metadataCache.getFileCache(archivoActivo);
    const yamlData = (metadata == null ? void 0 : metadata.frontmatter) || {};
    if (yamlData.kindleNote) {
      const linkElement = document.createElement("a");
      linkElement.href = yamlData.kindleNote;
      linkElement.textContent = "Ver en Kindle";
      dv2.container.innerHTML = "";
      dv2.container.appendChild(linkElement);
    } else {
      const notesList = await this.getNotesFromFolder(folderPrincipal);
      if (notesList.length === 0) {
        new import_obsidian64.Notice("No hay notas en el folder de Kindle.");
        return;
      }
      const suggestorConfig = {
        onChooseItem: async (selectedNote, evt) => {
          yamlData.kindleNote = selectedNote.path;
          await this.plugin.app.vault.modify(archivoActivo, `---
${yamlData}
...`);
          new import_obsidian64.Notice("Se ha guardado el link de la nota Kindle en el archivo actual.");
        },
        getItems: () => notesList,
        renderSuggestion: (item, el) => {
          el.textContent = item.basename;
        }
      };
      new Suggester(this.plugin, suggestorConfig).start();
    }
  }
  async getNotesFromFolder(folderPath) {
    const folderFiles = await this.plugin.app.vault.getAllLoadedFiles();
    return folderFiles.filter((file) => file instanceof import_obsidian64.TFile && file.path.startsWith(folderPath));
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearLibro(dv2) {
    let folderPrincipal = this.plugin.settings["folder_Biblioteca"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian64.TFolder)) {
      new import_obsidian64.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian64.Notice("No hay una nota activa.");
      return;
    }
    const bookExists = await this.bookExistsInLibrary(folderPrincipal, archivoActivo);
    if (bookExists) {
      const alias = await this.getAlias(bookExists);
      const texto = document.createElement("p");
      const link = document.createElement("a");
      link.href = bookExists.path;
      link.textContent = alias;
      link.dataset.href = bookExists.path;
      link.className = "internal-link";
      texto.textContent = `El libro ya est\xE1 en la biblioteca: `;
      texto.appendChild(link);
      dv2.container.appendChild(texto);
    } else {
      dv2.container.innerHTML = "";
      const botonCrearLibro = document.createElement("button");
      botonCrearLibro.textContent = "Ingresar a mi Biblioteca";
      dv2.container.appendChild(botonCrearLibro);
      botonCrearLibro.onclick = async () => {
        await this.ingresarLibroBiblioteca();
      };
    }
  }
  async bookExistsInLibrary(folderPrincipal, archivoActivo) {
    const files = this.plugin.app.vault.getFiles();
    const activeFileName = archivoActivo.basename;
    for (let file of files) {
      if (file.path.startsWith(folderPrincipal)) {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.asunto) {
          const asunto = frontmatter.asunto;
          if (Array.isArray(asunto)) {
            for (let entry of asunto) {
              if (entry.includes(`[[${activeFileName}]]`)) {
                return file;
              }
            }
          } else if (typeof asunto === "string" && asunto.includes(`[[${activeFileName}]]`)) {
            return file;
          }
        }
      }
    }
    return false;
  }
  async getAlias(file) {
    const cache = this.plugin.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    return frontmatter && frontmatter.aliases && frontmatter.aliases[0] ? frontmatter.aliases[0] : file.basename;
  }
  async ingresarLibroBiblioteca() {
    debugger;
    const template = app.vault.getAbstractFileByPath("Plantillas/Subsistemas/Libros/Biblioteca/Plt - Libro a Biblioteca.md");
    const filename = "Nuevo Libro";
    const folder = app.vault.getAbstractFileByPath("Inbox");
    if (template instanceof import_obsidian64.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    let crearNota = this.tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
};

// src/modules/moduloRegistroTiempo/API/updateSesionLectura.ts
init_utilsAPI();
var import_obsidian65 = require("obsidian");
init_luxon();
var updateSesionLectura = class extends YAMLUpdaterAPI2 {
  constructor(plugin) {
    super(plugin);
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
    this.tp = plugin.tp;
    this.nota = {};
    this.infoNota = {};
  }
  //actualizarNota(infoNota: any, campos: any): Promise<any>;
  //getFecha(): Promise<string>;
  //getHoraFinal(): Promise<string>;
  //getTiempoLeido(): Promise<string>;
  async getTiempoLeido(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getEstado(parametro, actual) {
    let campo;
    if (parametro == void 0) {
      campo = "\u{1F535}";
      if (campo === null) {
        new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getPPM() {
    debugger;
    let palabrasPorHoja = parseInt(this.infoNota.palabrasPorHoja);
    let paginasLeidas = parseInt(this.nota.pagLeidas);
    let tiempoLeido = parseInt(this.nota.tiempoLeido);
    let PPM = palabrasPorHoja * paginasLeidas / (tiempoLeido / 6e4);
    return PPM;
  }
  async getPagLeidas() {
    debugger;
    let pagFin = parseInt(this.nota.pagFin);
    let paginasLeidas = pagFin - parseInt(this.infoNota.pagInicio);
    return parseInt(paginasLeidas);
  }
  async getPagFin() {
    debugger;
    let prompt = this.tp.system.static_functions.get("prompt");
    let pagFin = await prompt(`\xBFHasta que p\xE1gina le\xEDste?`, `${this.infoNota.pagInicio}`, true);
    return parseInt(pagFin);
  }
  async getPorLeer() {
    debugger;
    let porLeer = parseInt(this.infoNota.paginas) - parseInt(this.nota.pagFin);
    return porLeer;
  }
};

// src/modules/taskManager/api/tareasAPI.ts
var import_obsidian67 = require("obsidian");

// src/modules/taskManager/utils/taskUtils.ts
var import_obsidian66 = require("obsidian");
var TaskUtils = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  compararFechas(fecha1, fecha2) {
    if (!fecha1 && !fecha2)
      return 0;
    if (!fecha1)
      return 1;
    if (!fecha2)
      return -1;
    return fecha1.getTime() - fecha2.getTime();
  }
  normalizarHora(hora) {
    const patrones = [
      /^(\d{1,2})(?::(\d{2}))?\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})$/
    ];
    for (const patron of patrones) {
      const match2 = hora.toLowerCase().match(patron);
      if (match2) {
        let horas = parseInt(match2[1]);
        const minutos = match2[2] ? match2[2] : "00";
        const periodo = match2[3];
        if (periodo === "pm" && horas < 12)
          horas += 12;
        if (periodo === "am" && horas === 12)
          horas = 0;
        return `${horas.toString().padStart(2, "0")}:${minutos}`;
      }
    }
    return null;
  }
  extraerFechasYHoras(linea) {
    var _a, _b, _c, _d;
    const horaInicioMatch = linea.match(/\[hI:\s*([^\]]+)\]/);
    const horaFinMatch = linea.match(/\[hF:\s*([^\]]+)\]/);
    return {
      fechaCreacion: (_a = linea.match(/➕ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _a[1],
      fechaScheduled: (_b = linea.match(/⏳ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _b[1],
      fechaStart: (_c = linea.match(/🛫 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _c[1],
      fechaVencimiento: (_d = linea.match(/📅 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _d[1],
      horaInicio: horaInicioMatch ? this.normalizarHora(horaInicioMatch[1].trim()) : void 0,
      horaFin: horaFinMatch ? this.normalizarHora(horaFinMatch[1].trim()) : void 0
    };
  }
  obtenerTituloNota(file) {
    var _a;
    const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata == null ? void 0 : metadata.aliases) {
      if (Array.isArray(metadata.aliases))
        return metadata.aliases[0];
      if (typeof metadata.aliases === "string")
        return metadata.aliases;
    }
    if (metadata == null ? void 0 : metadata.titulo)
      return metadata.titulo;
    const coincidencia = file.basename.match(/(?:PGTD|PQ|AI|AV|Ax|RR|DJ|OCA|CAC) - (.+)/);
    if (coincidencia && coincidencia[1])
      return coincidencia[1];
    return file.basename;
  }
  categorizarEtiquetas(etiquetas) {
    return {
      todoist: etiquetas.filter((e) => e.startsWith("#todoist")),
      contextos: etiquetas.filter((e) => e.match(/#cx(?:[/-].+)$/)).map((e) => this.limpiarPrefijo(e, "cx")),
      personas: etiquetas.filter((e) => e.startsWith("#px-")).map((e) => this.formatearEtiquetaPersona(e)),
      otras: etiquetas.filter(
        (e) => !e.startsWith("#todoist") && !e.match(/#cx(?:[/-]|$)/) && !e.startsWith("#px-")
      )
    };
  }
  // Nuevo método para formatear etiquetas de personas
  formatearEtiquetaPersona(etiqueta) {
    const nombre = etiqueta.replace("#px-", "");
    return nombre.replace(/_/g, " ");
  }
  limpiarPrefijo(etiqueta, prefijo) {
    const sinPrefijo = etiqueta.replace(new RegExp(`#${prefijo}[/-]`), "");
    return sinPrefijo.replace(/-/g, " \u2192 ").replace(/\//g, " \u2192 ");
  }
  limpiarTextoTarea(linea) {
    let textoLimpio = linea.replace(/^- \[ \]/, "").replace(/[➕📅⏳🛫] \d{4}-\d{2}-\d{2}/g, "").replace(/\[hI:[^\]]+\]/g, "").replace(/\[hF:[^\]]+\]/g, "").replace(/\[link\]\([^\)]+\)/g, "").replace(/%%\[todoist_id:: \d+\]%%/g, "").replace(/#[\w-]+(?:\/[\w-]+)*\b/g, "").replace(/#[\w-]+(?:-[\w-]+)*\b/g, "");
    textoLimpio = textoLimpio.replace(/\s+/g, " ").trim();
    return textoLimpio;
  }
  // Método de utilidad para obtener una representación jerárquica de las etiquetas
  obtenerJerarquiaEtiquetas(etiquetas) {
    const jerarquia = /* @__PURE__ */ new Map();
    etiquetas.forEach((etiqueta) => {
      var _a;
      const partes = etiqueta.slice(1).split(/[/-]/);
      const categoria = partes[0];
      if (!jerarquia.has(categoria)) {
        jerarquia.set(categoria, /* @__PURE__ */ new Set());
      }
      if (partes.length > 1) {
        const subetiquetas = partes.slice(1).join("/");
        (_a = jerarquia.get(categoria)) == null ? void 0 : _a.add(subetiquetas);
      }
    });
    return jerarquia;
  }
  obtenerFechaLocal() {
    const ahora = /* @__PURE__ */ new Date();
    return new Date(
      ahora.getFullYear(),
      ahora.getMonth(),
      ahora.getDate(),
      0,
      0,
      0
    );
  }
  parsearFechaVencimiento(fechaStr) {
    if (!fechaStr)
      return null;
    try {
      const [a\u00F1o, mes, dia] = fechaStr.split("-").map((num) => parseInt(num));
      if (isNaN(a\u00F1o) || isNaN(mes) || isNaN(dia))
        return null;
      const fecha = new Date(a\u00F1o, mes - 1, dia, 0, 0, 0);
      return fecha;
    } catch (error) {
      console.error("Error parseando fecha:", error);
      return null;
    }
  }
  normalizarFechaAString(fecha) {
    const a\u00F1o = fecha.getFullYear();
    const mes = String(fecha.getMonth() + 1).padStart(2, "0");
    const dia = String(fecha.getDate()).padStart(2, "0");
    return `${a\u00F1o}-${mes}-${dia}`;
  }
  extraerDependenciasYIds(linea) {
    console.log("Analizando l\xEDnea para IDs:", linea);
    const resultado = {
      taskId: void 0,
      dependencyId: void 0
    };
    const taskIdMatch = linea.match(/🆔\s*([a-z0-9]{5,7})/);
    if (taskIdMatch) {
      resultado.taskId = taskIdMatch[1];
      console.log("ID encontrado:", resultado.taskId);
    }
    const dependencyMatch = linea.match(/⛔\s*([a-z0-9]{5,7})/);
    if (dependencyMatch) {
      resultado.dependencyId = dependencyMatch[1];
      console.log("Dependencia encontrada:", resultado.dependencyId);
    }
    return resultado;
  }
  async verificarEstadoTarea(taskId) {
    console.log("\nVerificando estado de tarea:", taskId);
    const todosLosArchivos = this.plugin.app.vault.getMarkdownFiles();
    const filesParaProcesar = todosLosArchivos.filter((file) => !this.debeExcluirArchivo(file));
    console.log(`Buscando en ${filesParaProcesar.length} archivos (excluidos: ${todosLosArchivos.length - filesParaProcesar.length})`);
    for (const file of filesParaProcesar) {
      try {
        const contenido = await this.plugin.app.vault.cachedRead(file);
        const lineas = contenido.split("\n");
        for (const linea of lineas) {
          if (linea.includes(`\u{1F194} ${taskId}`)) {
            const estaCompletada = linea.trim().startsWith("- [x]");
            const tituloArchivo = this.obtenerTituloNota(file);
            const textoTarea = this.limpiarTextoTarea(linea);
            console.log("Tarea encontrada en:", file.path);
            console.log("Estado completada:", estaCompletada);
            console.log("Texto de la tarea:", textoTarea);
            return {
              completada: estaCompletada,
              rutaArchivo: file.path,
              tituloArchivo,
              textoTarea
            };
          }
        }
      } catch (error) {
        console.error(`Error procesando archivo ${file.path}:`, error);
      }
    }
    console.log("Tarea no encontrada en los archivos permitidos");
    return {
      completada: false
    };
  }
  // En la clase TaskUtils
  extraerEtiquetas(linea) {
    const etiquetas = [];
    const patronesEtiquetas = [
      // Etiquetas de personas con formato #px-Nombre_Apellido 
      /#px-[A-Za-z]+(?:_[A-Za-z]+)*(?:_[A-Za-z]+)?\b/g,
      // Etiquetas simples: #todoist
      /#[\w-]+\b/g,
      // Etiquetas con jerarquía usando "/": #cx/alguna/cosa
      /#[\w-]+(?:\/[\w-]+)+\b/g,
      // Etiquetas con jerarquía usando "-": #cx-alguna-cosa
      /#[\w-]+(?:-[\w-]+)+\b/g
    ];
    patronesEtiquetas.forEach((patron) => {
      const coincidencias = linea.match(patron);
      if (coincidencias) {
        coincidencias.forEach((etiqueta) => {
          if (!etiquetas.includes(etiqueta) && this.esEtiquetaValida(etiqueta)) {
            etiquetas.push(etiqueta);
          }
        });
      }
    });
    return this.organizarEtiquetas(etiquetas);
  }
  esEtiquetaValida(etiqueta) {
    if (!etiqueta.startsWith("#"))
      return false;
    if (etiqueta.startsWith("#px-")) {
      const nombreCompleto = etiqueta.slice(4);
      return /^[A-Za-z]+(?:_[A-Za-z]+)*$/.test(nombreCompleto);
    }
    const caracteresInvalidos = /[!@$%^&*()+={}\[\]:;"'<>,.?~\\|]/;
    if (caracteresInvalidos.test(etiqueta))
      return false;
    const partesEtiqueta = etiqueta.slice(1).split(/[/-]/);
    return partesEtiqueta.every((parte) => parte.length > 0);
  }
  organizarEtiquetas(etiquetas) {
    const categoriasConocidas = {
      todoist: [],
      cx: [],
      px: [],
      otras: []
    };
    etiquetas.forEach((etiqueta) => {
      if (etiqueta.startsWith("#px-")) {
        categoriasConocidas.px.push(etiqueta);
      } else if (etiqueta.startsWith("#todoist")) {
        categoriasConocidas.todoist.push(etiqueta);
      } else if (etiqueta.match(/#cx(?:[/-]|$)/)) {
        categoriasConocidas.cx.push(etiqueta);
      } else {
        categoriasConocidas.otras.push(etiqueta);
      }
    });
    Object.values(categoriasConocidas).forEach((categoria) => {
      categoria.sort((a, b) => a.localeCompare(b));
    });
    return [
      ...categoriasConocidas.todoist,
      ...categoriasConocidas.cx,
      ...categoriasConocidas.px,
      ...categoriasConocidas.otras
    ];
  }
  // Agregar método para verificar exclusiones
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async encontrarLineasTarea(file) {
    const lineasTareas = /* @__PURE__ */ new Map();
    try {
      const contenido = await this.plugin.app.vault.cachedRead(file);
      const lineas = contenido.split("\n");
      lineas.forEach((linea, index) => {
        const textoLimpio = this.limpiarTextoTarea(linea);
        if (textoLimpio && linea.trim().startsWith("- [")) {
          lineasTareas.set(textoLimpio, {
            numero: index + 1,
            texto: linea.trim()
          });
        }
      });
    } catch (error) {
      console.error(`Error procesando l\xEDneas en ${file.path}:`, error);
    }
    return lineasTareas;
  }
};

// src/modules/taskManager/utils/taskWeightCalculator.ts
var _TaskWeightCalculator = class _TaskWeightCalculator {
  static setTaskUtils(utils) {
    _TaskWeightCalculator.taskUtils = utils;
  }
  static getFechaPrioritaria(task, tipoFecha = "any") {
    if (!task)
      return null;
    switch (tipoFecha) {
      case "start":
        return task.fechaStart || null;
      case "due":
        return task.fechaVencimiento || null;
      case "scheduled":
        return task.fechaScheduled || null;
      case "any":
        return task.fechaVencimiento || task.fechaScheduled || task.fechaStart || null;
      default:
        return null;
    }
  }
  static shouldIncludeTask(task, searchType, currentDate) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return false;
    }
    try {
      switch (searchType) {
        case "start_vencidas": {
          const fechaStart = task.fechaStart;
          if (!fechaStart)
            return false;
          const fechaStartObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaStart);
          return fechaStartObj !== null && fechaStartObj < currentDate;
        }
        case "vencidas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          return fechaVencObj !== null && fechaVencObj < currentDate;
        }
        case "hoy": {
          const fechas = [task.fechaVencimiento, task.fechaScheduled, task.fechaStart].filter((f) => f);
          return fechas.some((fecha) => {
            const fechaObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fecha);
            return (fechaObj == null ? void 0 : fechaObj.toDateString()) === currentDate.toDateString();
          });
        }
        case "proximas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          if (!fechaVencObj)
            return false;
          const diasDiferencia = Math.ceil(
            (fechaVencObj.getTime() - currentDate.getTime()) / (1e3 * 60 * 60 * 24)
          );
          return diasDiferencia >= 0 && diasDiferencia <= 7;
        }
        default:
          return false;
      }
    } catch (error) {
      console.error("Error en shouldIncludeTask:", error);
      return false;
    }
  }
  static calculateWeight(task) {
    let baseWeight = 0;
    let timeWeight = 0;
    let priorityWeight = 0;
    if (task.fechaVencimiento)
      baseWeight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      baseWeight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      baseWeight += this.WEIGHTS.START;
    if (task.horaFin)
      timeWeight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      timeWeight += this.WEIGHTS.HORA_INICIO;
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      priorityWeight += this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOWEST;
    return {
      baseWeight,
      timeWeight,
      priorityWeight,
      totalWeight: baseWeight + timeWeight + priorityWeight
    };
  }
  static sortTasks(tasks) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return tasks;
    }
    return tasks.sort((a, b) => {
      var _a, _b, _c, _d;
      try {
        const fechaA = this.getFechaPrioritaria(a, "any");
        const fechaB = this.getFechaPrioritaria(b, "any");
        if (fechaA !== fechaB) {
          const dateA = fechaA ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaA) : null;
          const dateB = fechaB ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaB) : null;
          if (dateA && dateB) {
            return dateA.getTime() - dateB.getTime();
          }
          return 0;
        }
        if (a.horaInicio && b.horaInicio) {
          if (a.horaInicio !== b.horaInicio) {
            return a.horaInicio.localeCompare(b.horaInicio);
          }
        } else if (a.horaInicio) {
          return -1;
        } else if (b.horaInicio) {
          return 1;
        }
        const weightA = (_b = (_a = a.weight) == null ? void 0 : _a.totalWeight) != null ? _b : 0;
        const weightB = (_d = (_c = b.weight) == null ? void 0 : _c.totalWeight) != null ? _d : 0;
        return weightB - weightA;
      } catch (error) {
        console.error("Error ordenando tareas:", error);
        return 0;
      }
    });
  }
  static calculateBaseWeight(task) {
    let weight = 0;
    if (task.fechaVencimiento)
      weight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      weight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      weight += this.WEIGHTS.START;
    return weight;
  }
  static calculateTimeWeight(task) {
    let weight = 0;
    if (task.horaFin)
      weight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      weight += this.WEIGHTS.HORA_INICIO;
    return weight;
  }
  static calculatePriorityWeight(task) {
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      return this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      return this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      return this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      return this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      return this.WEIGHTS.PRIORITY.LOWEST;
    return 0;
  }
  static esFechaValida(fecha) {
    try {
      const fechaObj = new Date(fecha);
      return fechaObj.toString() !== "Invalid Date";
    } catch (e) {
      return false;
    }
  }
};
_TaskWeightCalculator.WEIGHTS = {
  HORA_FIN: 5,
  HORA_INICIO: 5,
  DUE_DATE: 5,
  SCHEDULED: 4,
  START: 3,
  PRIORITY: {
    HIGHEST: 4,
    HIGH: 3,
    MEDIUM: 2,
    LOW: -1,
    LOWEST: -2
  }
};
var TaskWeightCalculator = _TaskWeightCalculator;

// src/modules/taskManager/api/tareasAPI.ts
var TareasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.taskUtils = new TaskUtils(plugin);
    TaskWeightCalculator.setTaskUtils(this.taskUtils);
  }
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async procesarTareas(files, filtro, buscarEnEjecucion = false) {
    const tareas = [];
    const errores = [];
    try {
      const filesParaProcesar = files.filter((file) => !this.debeExcluirArchivo(file));
      console.log(`
=== INICIANDO PROCESAMIENTO DE TAREAS ===`);
      console.log(`Procesando ${filesParaProcesar.length} archivos de ${files.length} totales`);
      for (const file of filesParaProcesar) {
        try {
          const contenido = await this.plugin.app.vault.cachedRead(file);
          const lineas = contenido.split("\n");
          const tituloNota = this.taskUtils.obtenerTituloNota(file);
          console.log(`
Procesando archivo: ${file.path}`);
          for (const linea of lineas) {
            const esEnEjecucion = linea.trim().startsWith("- [/]");
            const esAbierta = linea.trim().startsWith("- [ ]");
            const esCompletada = linea.trim().startsWith("- [x]");
            if (!linea.trim().startsWith("- ["))
              continue;
            if (buscarEnEjecucion) {
              if (!esEnEjecucion)
                continue;
            } else {
              if (esCompletada || esEnEjecucion)
                continue;
              if (!esAbierta)
                continue;
            }
            const textoLimpio = this.taskUtils.limpiarTextoTarea(linea);
            const textoOriginal = linea.trim();
            const fechasYHoras = this.taskUtils.extraerFechasYHoras(linea);
            const etiquetasExtraidas = this.taskUtils.extraerEtiquetas(linea);
            const etiquetasCategorizadas = this.taskUtils.categorizarEtiquetas(etiquetasExtraidas);
            const { taskId, dependencyId } = this.taskUtils.extraerDependenciasYIds(linea);
            const tarea = {
              texto: textoLimpio,
              textoOriginal,
              rutaArchivo: file.path,
              nombreArchivo: file.basename,
              titulo: tituloNota,
              estado: esEnEjecucion ? "en_ejecucion" /* EnEjecucion */ : "abierta" /* Abierta */,
              ...fechasYHoras,
              etiquetas: {
                todas: etiquetasExtraidas,
                ...etiquetasCategorizadas
              },
              taskId,
              dependencyId
            };
            tarea.weight = TaskWeightCalculator.calculateWeight(tarea);
            if (dependencyId) {
              const estadoDependencia = await this.taskUtils.verificarEstadoTarea(dependencyId);
              tarea.isBlocked = !estadoDependencia.completada;
              tarea.dependencyLocation = estadoDependencia.rutaArchivo;
              tarea.dependencyTitle = estadoDependencia.tituloArchivo;
              tarea.dependencyTexto = estadoDependencia.textoTarea;
            }
            const cumpleFiltro = await Promise.resolve(filtro(tarea));
            if (cumpleFiltro) {
              console.log(`-> Tarea agregada: ${textoLimpio.substring(0, 50)}...`);
              tareas.push(tarea);
            }
          }
        } catch (fileError) {
          errores.push(`Error procesando archivo ${file.path}: ${fileError.message}`);
          console.error(`Error en archivo ${file.path}:`, fileError);
        }
      }
    } catch (error) {
      console.error("Error general procesando tareas:", error);
      new import_obsidian67.Notice("Error procesando tareas. Revisa la consola para m\xE1s detalles.");
    }
    if (errores.length > 0) {
      console.warn("\nErrores encontrados durante el procesamiento:", errores);
    }
    console.log(`
=== PROCESAMIENTO COMPLETADO ===`);
    console.log(`Total de tareas encontradas: ${tareas.length}`);
    return buscarEnEjecucion ? this.organizarTareasEnEjecucion(tareas) : TaskWeightCalculator.sortTasks(tareas);
  }
  guardarYAbrirArchivo(nombreArchivo, contenido) {
    return new Promise(async (resolve, reject) => {
      try {
        const carpetaGTD = this.plugin.app.vault.getAbstractFileByPath(
          this.plugin.settings.folder_SistemaGTD
        );
        if (!carpetaGTD) {
          await this.plugin.app.vault.createFolder(
            this.plugin.settings.folder_SistemaGTD
          );
        }
        const archivoExistente = this.plugin.app.vault.getAbstractFileByPath(nombreArchivo);
        if (archivoExistente instanceof import_obsidian67.TFile) {
          await this.plugin.app.vault.modify(archivoExistente, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(archivoExistente);
        } else {
          const nuevoArchivo = await this.plugin.app.vault.create(nombreArchivo, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(nuevoArchivo);
        }
        resolve();
      } catch (error) {
        console.error("Error al guardar/abrir archivo:", error);
        reject(error);
      }
    });
  }
  // Métodos principales de búsqueda de tareas
  async getTareasVencidasAbiertas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasHoy() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "hoy", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasProximas(diasProximos = 7) {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "proximas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartVencidas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "start_vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaStart)
          return false;
        const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
        return fechaStart && fechaStart <= limiteFuturo && fechaStart >= hoy;
      }
    );
  }
  // Métodos de renderizado y visualización
  generarBotonActualizacion(metodo, parametros) {
    return `\`\`\`dataviewjs
const gp = app.plugins.plugins['obsidian-personal-management'];
if (!gp) {
    dv.paragraph("\u26A0\uFE0F Plugin de Gesti\xF3n Personal no encontrado");
    return;
}

const btn = this.container.createEl('button', {text: '\u{1F504} Actualizar Vista'});
btn.style.cssText = 'padding: 5px 15px; background-color: #1e1e1e; color: #ffffff; border: 1px solid #4a4a4a; border-radius: 4px; cursor: pointer; margin-bottom: 10px;';

btn.addEventListener('mouseenter', () => btn.style.backgroundColor = '#2e2e2e');
btn.addEventListener('mouseleave', () => btn.style.backgroundColor = '#1e1e1e');

btn.addEventListener('click', async () => {
    try {
        new Notice('Actualizando vista...');
        await gp.tareasAPI.${metodo}(${parametros || ""});
    } catch (error) {
        console.error('Error:', error);
        new Notice('Error al actualizar tareas');
    }
});
\`\`\`

`;
  }
  // Métodos públicos de visualización correspondientes a los comandos
  async mostrarTareasVencidas() {
    try {
      const tareas = await this.getTareasVencidasAbiertas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas vencidas abiertas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Vencidas",
        "mostrarTareasVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Pr\xF3ximas",
        "mostrarTareasProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasHoy() {
    try {
      const tareas = await this.getTareasHoy();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas programadas para hoy.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas para Hoy",
        "mostrarTareasHoy"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas para Hoy.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas para hoy`);
    } catch (error) {
      console.error("Error en mostrarTareasHoy:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartVencidas() {
    try {
      const tareas = await this.getTareasStartVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas con inicio vencido.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas con Inicio Vencido",
        "mostrarTareasStartVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Inicio Vencido.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas con inicio vencido`);
    } catch (error) {
      console.error("Error en mostrarTareasStartVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasStartProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas por iniciar en el per\xEDodo especificado.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas por Iniciar",
        "mostrarTareasStartProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Iniciar.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas por iniciar`);
    } catch (error) {
      console.error("Error en mostrarTareasStartProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Métodos de utilidad privados
  tieneFechasValidas(fechasYHoras) {
    const { fechaVencimiento, fechaScheduled, fechaStart } = fechasYHoras;
    return fechaVencimiento || fechaScheduled || fechaStart;
  }
  generarVistaCompleta(tareas, titulo, metodoActualizacion, diasProximos) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# ${titulo}

`;
    contenido += this.generarBotonActualizacion(metodoActualizacion, diasProximos);
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    if (diasProximos) {
      contenido += `> Mostrando tareas para los pr\xF3ximos ${diasProximos} d\xEDas
`;
    }
    contenido += `> Total de tareas encontradas: ${tareas.length}

`;
    contenido += this.renderizarTareasAgrupadas(tareas);
    return contenido;
  }
  renderizarTareasAgrupadas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTarea(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTarea(tarea) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    - Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} : ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} : ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  obtenerPrioridadTarea(texto) {
    if (texto.includes("\u{1F53A}"))
      return { emoji: "\u{1F53A}", nombre: "Muy Alta" };
    if (texto.includes("\u23EB"))
      return { emoji: "\u23EB", nombre: "Alta" };
    if (texto.includes("\u{1F53C}"))
      return { emoji: "\u{1F53C}", nombre: "Media" };
    if (texto.includes("\u{1F53D}"))
      return { emoji: "\u{1F53D}", nombre: "Baja" };
    if (texto.includes("\u23EC"))
      return { emoji: "\u23EC", nombre: "Muy Baja" };
    return null;
  }
  agruparTareasPorArchivo(tareas) {
    return tareas.reduce((acc, tarea) => {
      if (!acc[tarea.rutaArchivo]) {
        acc[tarea.rutaArchivo] = {
          titulo: tarea.titulo,
          tareas: []
        };
      }
      acc[tarea.rutaArchivo].tareas.push(tarea);
      return acc;
    }, {});
  }
  formatearFechaConContexto(fecha, tipo) {
    try {
      const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
      if (!fechaObj)
        return fecha;
      const hoy = this.taskUtils.obtenerFechaLocal();
      const diferenciaDias = Math.ceil(
        (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
      );
      let textoBase = "";
      switch (tipo) {
        case "due":
          textoBase = diferenciaDias < 0 ? "Venci\xF3" : "Vence";
          break;
        case "scheduled":
          textoBase = "Programada";
          break;
        case "start":
          textoBase = diferenciaDias < 0 ? "Debi\xF3 iniciar" : "Inicia";
          break;
      }
      let contexto = "";
      if (diferenciaDias === 0) {
        contexto = "hoy";
      } else if (diferenciaDias === 1) {
        contexto = "ma\xF1ana";
      } else if (diferenciaDias === -1) {
        contexto = "ayer";
      } else if (diferenciaDias < 0) {
        contexto = `hace ${Math.abs(diferenciaDias)} d\xEDas`;
      } else {
        contexto = `en ${diferenciaDias} d\xEDas`;
      }
      return `${textoBase} ${fecha} (${contexto})`;
    } catch (error) {
      console.error("Error formateando fecha:", error);
      return fecha;
    }
  }
  // Añadir nuevo método para obtener tareas futuras
  async getTareasFuturas(diasFuturos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasFuturos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const fechasRelevantes = [
          tarea.fechaVencimiento,
          tarea.fechaScheduled,
          tarea.fechaStart
        ].filter(Boolean);
        return fechasRelevantes.some((fecha) => {
          const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
          return fechaObj && fechaObj > hoy && fechaObj <= limiteFuturo;
        });
      }
    );
  }
  // Añadir método para mostrar tareas futuras
  async mostrarTareasFuturas(diasFuturos = 7) {
    try {
      const tareas = await this.getTareasFuturas(diasFuturos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice(`No hay tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas.`);
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Programadas (Pr\xF3ximos ${diasFuturos} d\xEDas)`,
        "mostrarTareasFuturas",
        diasFuturos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Programadas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas`);
    } catch (error) {
      console.error("Error en mostrarTareasFuturas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Añadir nuevo método para obtener tareas en ejecución
  async getTareasEnEjecucion() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const taskLine = tarea.texto.trim();
        return taskLine.startsWith("- [/]");
      },
      true
      // nuevo parámetro para indicar que buscamos tareas en ejecución
    );
  }
  // Añadir método para mostrar tareas en ejecución
  async mostrarTareasEnEjecucion() {
    try {
      const tareas = await this.procesarTareas(
        this.plugin.app.vault.getMarkdownFiles(),
        (tarea) => true,
        // No aplicamos filtro adicional porque ya filtramos por estado en procesarTareas
        true
        // Indicar que buscamos tareas en ejecución
      );
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No se encontraron tareas en ejecuci\xF3n");
        return;
      }
      const contenido = this.generarVistaEnEjecucion(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas en Ejecuci\xF3n.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas en ejecuci\xF3n`);
    } catch (error) {
      console.error("Error en mostrarTareasEnEjecucion:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaEnEjecucion(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas en Ejecuci\xF3n

`;
    contenido += this.generarBotonActualizacion("mostrarTareasEnEjecucion");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas en ejecuci\xF3n: ${tareas.length}

`;
    const tareasConVencimiento = tareas.filter((t) => t.fechaVencimiento);
    const tareasProgramadas = tareas.filter((t) => !t.fechaVencimiento && t.fechaScheduled);
    const tareasConInicio = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && t.fechaStart);
    const tareasSinFecha = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && !t.fechaStart);
    if (tareasConVencimiento.length > 0) {
      contenido += `## Con fecha de vencimiento (${tareasConVencimiento.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConVencimiento);
    }
    if (tareasProgramadas.length > 0) {
      contenido += `## Programadas (${tareasProgramadas.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasProgramadas);
    }
    if (tareasConInicio.length > 0) {
      contenido += `## Con fecha de inicio (${tareasConInicio.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConInicio);
    }
    if (tareasSinFecha.length > 0) {
      contenido += `## Sin fecha asignada (${tareasSinFecha.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasSinFecha);
      return contenido;
    }
  }
  // Añadir método específico para renderizar grupos de tareas en ejecución
  renderizarGrupoTareasEnEjecucion(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarGrupoTareas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTareaEnEjecucion(tarea) {
    var _a, _b, _c, _d;
    let contenido = `${tarea.texto}
`;
    if (tarea.fechaVencimiento || tarea.fechaScheduled || tarea.fechaStart) {
      contenido += `    - Fechas:
`;
      if (tarea.fechaVencimiento) {
        contenido += `        - \u{1F4C5} : ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
      }
      if (tarea.fechaScheduled) {
        contenido += `        - \u23F3 : ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
      }
      if (tarea.fechaStart) {
        contenido += `        - \u{1F6EB}: ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
      }
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} Personas: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} Todoist: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  organizarTareasEnEjecucion(tareas) {
    return tareas.sort((a, b) => {
      var _a, _b;
      const fechaA = a.fechaVencimiento || a.fechaScheduled || a.fechaStart;
      const fechaB = b.fechaVencimiento || b.fechaScheduled || b.fechaStart;
      if (fechaA && fechaB) {
        const fechaObjA = this.taskUtils.parsearFechaVencimiento(fechaA);
        const fechaObjB = this.taskUtils.parsearFechaVencimiento(fechaB);
        if (fechaObjA && fechaObjB) {
          return fechaObjA.getTime() - fechaObjB.getTime();
        }
      }
      if (fechaA)
        return -1;
      if (fechaB)
        return 1;
      return (((_a = b.weight) == null ? void 0 : _a.totalWeight) || 0) - (((_b = a.weight) == null ? void 0 : _b.totalWeight) || 0);
    });
  }
  // Nuevo método para obtener tareas scheduled vencidas
  async getTareasScheduledVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled < hoy;
      }
    );
  }
  // Nuevo método para obtener tareas scheduled próximas
  async getTareasScheduledProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled >= hoy && fechaScheduled <= limiteFuturo;
      }
    );
  }
  // Método para mostrar tareas scheduled vencidas
  async mostrarTareasScheduledVencidas() {
    try {
      const tareas = await this.getTareasScheduledVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas scheduled vencidas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Scheduled Vencidas",
        "mostrarTareasScheduledVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas scheduled vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método para mostrar tareas scheduled próximas
  async mostrarTareasScheduledProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasScheduledProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas scheduled pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Scheduled Pr\xF3ximas (${diasProximos} d\xEDas)`,
        "mostrarTareasScheduledProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas scheduled pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método auxiliar para la visualización de fechas scheduled
  formatearFechaScheduled(fecha) {
    const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
    if (!fechaObj)
      return fecha;
    const hoy = this.taskUtils.obtenerFechaLocal();
    const diferenciaDias = Math.ceil(
      (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
    );
    let contexto = "";
    if (diferenciaDias < 0) {
      contexto = `(retrasada ${Math.abs(diferenciaDias)} d\xEDas)`;
    } else if (diferenciaDias === 0) {
      contexto = "(hoy)";
    } else if (diferenciaDias === 1) {
      contexto = "(ma\xF1ana)";
    } else {
      contexto = `(en ${diferenciaDias} d\xEDas)`;
    }
    return `${fecha} ${contexto}`;
  }
  // Método para obtener todas las tareas vencidas
  async getTodasTareasVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        let estaVencida = false;
        if (tarea.fechaVencimiento) {
          const fechaVenc = this.taskUtils.parsearFechaVencimiento(tarea.fechaVencimiento);
          if (fechaVenc && fechaVenc < hoy) {
            tarea.tipoVencimiento = ["due"];
            estaVencida = true;
          }
        }
        if (tarea.fechaScheduled) {
          const fechaSched = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
          if (fechaSched && fechaSched < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("scheduled");
            estaVencida = true;
          }
        }
        if (tarea.fechaStart) {
          const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
          if (fechaStart && fechaStart < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("start");
            estaVencida = true;
          }
        }
        return estaVencida;
      }
    );
  }
  // Método para mostrar todas las tareas vencidas
  async mostrarTodasTareasVencidas() {
    try {
      const tareas = await this.getTodasTareasVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas vencidas.");
        return;
      }
      const contenido = this.generarVistaTodasVencidas(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Todas las Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTodasTareasVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método específico para generar la vista de todas las tareas vencidas
  generarVistaTodasVencidas(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Todas las Tareas Vencidas

`;
    contenido += this.generarBotonActualizacion("mostrarTodasTareasVencidas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas vencidas: ${tareas.length}

`;
    const tareasVencDue = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("due");
    });
    const tareasVencScheduled = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("scheduled");
    });
    const tareasVencStart = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("start");
    });
    if (tareasVencDue.length > 0) {
      contenido += `## Tareas con Fecha de Vencimiento Pasada (${tareasVencDue.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencDue, "due");
    }
    if (tareasVencScheduled.length > 0) {
      contenido += `## Tareas Scheduled Retrasadas (${tareasVencScheduled.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencScheduled, "scheduled");
    }
    if (tareasVencStart.length > 0) {
      contenido += `## Tareas con Inicio Retrasado (${tareasVencStart.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencStart, "start");
    }
    return contenido;
  }
  // Método auxiliar para renderizar grupos de tareas vencidas
  renderizarGrupoTareasVencidas(tareas, tipo) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaVencida(tarea, tipo);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método auxiliar para renderizar una tarea vencida
  renderizarTareaVencida(tarea, tipo) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    switch (tipo) {
      case "due":
        contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "scheduled":
        contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "start":
        contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        break;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464}: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2}: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    return contenido;
  }
  // Método principal para obtener tareas con dependencias
  async getTareasDependientes() {
    console.log("=== Iniciando b\xFAsqueda de tareas con dependencias ===");
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        console.log("DependencyId:", tarea.dependencyId);
        if (!tarea.dependencyId) {
          console.log("-> Ignorada: No tiene dependencia");
          return false;
        }
        const resultado = await this.taskUtils.verificarEstadoTarea(tarea.dependencyId);
        console.log(`-> Dependencia ${tarea.dependencyId} completada:`, resultado.completada);
        tarea.isBlocked = !resultado.completada;
        tarea.dependencyLocation = resultado.rutaArchivo;
        tarea.dependencyTitle = resultado.tituloArchivo;
        return true;
      }
    );
    return {
      ejecutables: tareas.filter((t) => !t.isBlocked),
      bloqueadas: tareas.filter((t) => t.isBlocked)
    };
  }
  // Método para mostrar las tareas dependientes
  async mostrarTareasDependientes() {
    try {
      const { ejecutables, bloqueadas } = await this.getTareasDependientes();
      if (ejecutables.length === 0 && bloqueadas.length === 0) {
        new import_obsidian67.Notice("No se encontraron tareas con dependencias.");
        return;
      }
      const contenido = this.generarVistaDependencias(ejecutables, bloqueadas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Dependencias.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${ejecutables.length + bloqueadas.length} tareas con dependencias`);
    } catch (error) {
      console.error("Error en mostrarTareasDependientes:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método para generar la vista de dependencias
  generarVistaDependencias(ejecutables, bloqueadas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas con Dependencias

`;
    contenido += this.generarBotonActualizacion("mostrarTareasDependientes");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas con dependencias: ${ejecutables.length + bloqueadas.length}

`;
    if (ejecutables.length > 0) {
      contenido += `## Tareas Ejecutables (${ejecutables.length})
`;
      contenido += `> [!success] Estas tareas ya pueden ser ejecutadas porque sus dependencias est\xE1n completadas

`;
      contenido += this.renderizarGrupoDependencias(ejecutables, true);
    }
    if (bloqueadas.length > 0) {
      contenido += `
## Tareas Bloqueadas (${bloqueadas.length})
`;
      contenido += `> [!warning] Estas tareas est\xE1n esperando que se completen otras tareas

`;
      contenido += this.renderizarGrupoDependencias(bloqueadas, false);
    }
    return contenido;
  }
  // Método para renderizar grupos de tareas con dependencias
  renderizarGrupoDependencias(tareas, ejecutables) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaConDependencia(tarea, ejecutables);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método para renderizar una tarea individual con dependencia
  renderizarTareaConDependencia(tarea, esEjecutable) {
    var _a, _b;
    console.log("\nRenderizando tarea:", tarea.texto);
    console.log("Es ejecutable:", esEjecutable);
    let contenido = `- [ ] ${tarea.texto}
`;
    if (tarea.taskId) {
      contenido += `    \u{1F194} ${tarea.taskId}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: ${tarea.dependencyTitle ? `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]` : "No encontrada"}`;
      if (tarea.dependencyTexto) {
        contenido += `: "${tarea.dependencyTexto}"`;
      }
      contenido += esEjecutable ? " \u2705" : " \u23F3";
      contenido += "\n";
    }
    if (tarea.fechaVencimiento) {
      contenido += `    \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
    }
    if (tarea.fechaScheduled) {
      contenido += `    \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
    }
    if (tarea.fechaStart) {
      contenido += `    \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    return contenido;
  }
  async mostrarTareasPersonas() {
    try {
      const { personasConTareas, totalPersonas, totalTareas } = await this.getTareasPersonas();
      if (totalPersonas === 0) {
        new import_obsidian67.Notice("No se encontraron tareas asignadas a personas.");
        return;
      }
      const contenido = this.generarVistaPersonas(personasConTareas, totalPersonas, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Persona.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas asignadas a ${totalPersonas} personas`);
    } catch (error) {
      console.error("Error en mostrarTareasPersonas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaPersonas(personasConTareas, totalPersonas, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas Asignadas por Persona

`;
    contenido += this.generarBotonActualizacion("mostrarTareasPersonas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de personas con tareas: ${totalPersonas}
`;
    contenido += `> Total de tareas asignadas: ${totalTareas}

`;
    contenido += `## Resumen de Asignaciones
`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      const nombreFormateado = this.formatearNombrePersona(persona);
      contenido += `- [[#${nombreFormateado}|${nombreFormateado}]] (${tareas.length} tareas)
`;
    });
    contenido += "\n";
    contenido += `## Tareas por Persona

`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      contenido += `### ${this.formatearNombrePersona(persona)}
[[#Resumen de Asignaciones|\u2B06\uFE0F]]
`;
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas);
      tareasOrdenadas.forEach((tarea) => {
        contenido += this.renderizarTareaPersona(tarea);
      });
      contenido += "\n";
    });
    return contenido;
  }
  renderizarTareaPersona(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.contextos) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (tarea.weight) {
      const prioridad = this.obtenerPrioridadTarea(tarea.texto);
      if (prioridad) {
        contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
      }
    }
    return contenido;
  }
  formatearNombrePersona(tag) {
    return tag.replace("#px-", "").replace(/_/g, " ").split(" ").map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(" ");
  }
  normalizarContexto(contexto) {
    return contexto.replace(/[/-]/g, " \u2192 ").trim();
  }
  async mostrarTareasContextos() {
    try {
      const { contextosConTareas, totalContextos, totalTareas } = await this.getTareasContextos();
      if (totalContextos === 0) {
        new import_obsidian67.Notice("No se encontraron tareas con contextos asignados.");
        return;
      }
      const contenido = this.generarVistaContextos(contextosConTareas, totalContextos, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Contexto.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas en ${totalContextos} contextos`);
    } catch (error) {
      console.error("Error en mostrarTareasContextos:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaContextos(contextosConTareas, totalContextos, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas por Contexto

`;
    contenido += this.generarBotonActualizacion("mostrarTareasContextos");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de contextos con tareas: ${totalContextos}
`;
    contenido += `> Total de tareas encontradas: ${totalTareas}

`;
    const arbolContextos = this.construirArbolContextos(contextosConTareas);
    contenido += `## Resumen de Contextos
`;
    this.generarResumenContextos(arbolContextos, 0).forEach((linea) => {
      contenido += linea + "\n";
    });
    contenido += "\n";
    contenido += `## Tareas por Contexto

`;
    this.generarDetalleContextos(arbolContextos, contextosConTareas).forEach((bloque) => {
      contenido += bloque;
    });
    return contenido;
  }
  construirArbolContextos(contextosConTareas) {
    const arbol = /* @__PURE__ */ new Map();
    Array.from(contextosConTareas.keys()).forEach((contexto) => {
      const niveles = contexto.split(" \u2192 ");
      let nodoActual = arbol;
      niveles.forEach((nivel, index) => {
        if (!nodoActual.has(nivel)) {
          nodoActual.set(nivel, {
            tareas: index === niveles.length - 1 ? contextosConTareas.get(contexto) : [],
            subcontextos: /* @__PURE__ */ new Map(),
            rutaCompleta: niveles.slice(0, index + 1).join(" \u2192 ")
          });
        }
        nodoActual = nodoActual.get(nivel).subcontextos;
      });
    });
    return arbol;
  }
  generarResumenContextos(arbol, nivel) {
    const lineas = [];
    arbol.forEach((nodo, contexto) => {
      const indentacion = "  ".repeat(nivel);
      const rutaContexto = nodo.rutaCompleta;
      const cantidadTareas = nodo.tareas.length;
      if (cantidadTareas > 0) {
        lineas.push(`${indentacion}- [[#${rutaContexto}|${contexto}]] (${cantidadTareas} tareas)`);
      } else {
        lineas.push(`${indentacion}- ${contexto}`);
      }
      if (nodo.subcontextos.size > 0) {
        lineas.push(...this.generarResumenContextos(nodo.subcontextos, nivel + 1));
      }
    });
    return lineas;
  }
  generarBloqueContexto(contexto, tareas) {
    let bloque = `### ${contexto}
[[#Resumen de Contextos|\u2B06\uFE0F]]
`;
    tareas.forEach((tarea) => {
      bloque += this.renderizarTareaContexto(tarea);
    });
    return bloque + "\n";
  }
  async getTareasPersonas() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS ASIGNADAS A PERSONAS ===");
    const personasConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        if (!tarea.etiquetas.personas || tarea.etiquetas.personas.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.personas.forEach((tag) => {
          const personaTag = `#px-${tag}`;
          if (!personasConTareas.has(personaTag)) {
            personasConTareas.set(personaTag, []);
          }
          personasConTareas.get(personaTag).push(tarea);
        });
        return true;
      }
    );
    personasConTareas.forEach((tareas2, persona) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      personasConTareas.set(persona, tareasOrdenadas);
    });
    return {
      personasConTareas,
      totalPersonas: personasConTareas.size,
      totalTareas: Array.from(personasConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  async getTareasContextos() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS POR CONTEXTO ===");
    const contextosConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        if (!tarea.etiquetas.contextos || tarea.etiquetas.contextos.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.contextos.forEach((contexto) => {
          const contextoNormalizado = this.normalizarContexto(contexto);
          if (!contextosConTareas.has(contextoNormalizado)) {
            contextosConTareas.set(contextoNormalizado, []);
          }
          contextosConTareas.get(contextoNormalizado).push(tarea);
        });
        return true;
      }
    );
    contextosConTareas.forEach((tareas2, contexto) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      contextosConTareas.set(contexto, tareasOrdenadas);
    });
    return {
      contextosConTareas,
      totalContextos: contextosConTareas.size,
      totalTareas: Array.from(contextosConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  generarDetalleContextos(arbol, contextosConTareas) {
    const bloques = [];
    const procesarNodo = (nodo, rutaActual = []) => {
      nodo.forEach((info, contexto) => {
        const rutaCompleta = info.rutaCompleta;
        if (info.tareas.length > 0) {
          const tareasOrdenadas = TaskWeightCalculator.sortTasks(info.tareas);
          bloques.push(this.generarBloqueContexto(rutaCompleta, tareasOrdenadas));
        }
        if (info.subcontextos.size > 0) {
          procesarNodo(info.subcontextos, [...rutaActual, contexto]);
        }
      });
    };
    procesarNodo(arbol);
    return bloques;
  }
  renderizarTareaContexto(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    if (tarea.weight) {
      const { baseWeight, timeWeight, priorityWeight } = tarea.weight;
      if (baseWeight + timeWeight + priorityWeight > 0) {
        contenido += `    \u2696\uFE0F Peso total: ${tarea.weight.totalWeight}
`;
      }
    }
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} Asignado a: ${tarea.etiquetas.personas.map(
        (p) => this.formatearNombrePersona(`#px-${p}`)
      ).join(" | ")}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: `;
      if (tarea.dependencyTitle) {
        contenido += `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]`;
        if (tarea.dependencyTexto) {
          contenido += `: "${tarea.dependencyTexto}"`;
        }
      }
      contenido += tarea.isBlocked ? " \u23F3" : " \u2705";
      contenido += "\n";
    }
    return contenido;
  }
  // -- Contextos GTD
  // Añadir este método a la clase TareasAPI en src/modules/taskManager/api/tareasAPI.ts
  // Método para verificar si un nodo o sus descendientes tienen tareas
  tieneAlgunaTarea(nodo) {
    for (const [_, info] of nodo.entries()) {
      if (info.tareas.length > 0) {
        return true;
      }
      if (info.subcontextos.size > 0 && this.tieneAlgunaTarea(info.subcontextos)) {
        return true;
      }
    }
    return false;
  }
  // Método para generar el resumen de contextos con indentación
  generarResumenContextosMarkdown(arbol, nivel, resultado) {
    let res = resultado;
    const sortedKeys = Array.from(arbol.keys()).sort((a, b) => {
      const tareasA = arbol.get(a).tareas.length;
      const tareasB = arbol.get(b).tareas.length;
      return tareasB - tareasA;
    });
    for (const contexto of sortedKeys) {
      const info = arbol.get(contexto);
      const cantidadTareas = info.tareas.length;
      const rutaCompleta = info.rutaCompleta;
      const indentacion = "    ".repeat(nivel);
      if (cantidadTareas > 0) {
        const headerId = this.crearHeaderId(rutaCompleta || contexto);
        res += `${indentacion}- [[#${headerId}|${this.formatearNombreContexto(contexto)}]] (${cantidadTareas} tareas)
`;
      } else if (this.tieneAlgunaTarea(info.subcontextos)) {
        res += `${indentacion}- **${this.formatearNombreContexto(contexto)}**
`;
      }
      if (info.subcontextos.size > 0) {
        res = this.generarResumenContextosMarkdown(info.subcontextos, nivel + 1, res);
      }
    }
    return res;
  }
  // Método para formatear el nombre del contexto de manera más legible
  formatearNombreContexto(contexto) {
    if (contexto.includes(" \u2192 ")) {
      return contexto.split(" \u2192 ").pop() || contexto;
    }
    return contexto;
  }
  // ---------- Taeas huerfanas
  // Método para TareasAPI que busca tareas sin contextos, personas, fechas o clasificación GTD
  /**
   * Obtiene todas las tareas que no tienen asignado contexto, persona, fechas o clasificación GTD
   * @returns {Promise<Object>} Objeto con tareas agrupadas por nota y contadores
   */
  async getTareasSinClasificar() {
    try {
      console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS SIN CLASIFICAR ===");
      const tareasPorNota = /* @__PURE__ */ new Map();
      const lineasPorArchivo = /* @__PURE__ */ new Map();
      const tareas = await this.procesarTareas(
        this.plugin.app.vault.getMarkdownFiles(),
        async (tarea) => {
          const sinContextos = !tarea.etiquetas.contextos || tarea.etiquetas.contextos.length === 0;
          const sinPersonas = !tarea.etiquetas.personas || tarea.etiquetas.personas.length === 0;
          const sinFechas = !tarea.fechaVencimiento && !tarea.fechaStart && !tarea.fechaScheduled;
          const sinGTD = !tarea.etiquetas.todas.some((tag) => tag.startsWith("#GTD-"));
          const noInbox = !tarea.etiquetas.todas.some((tag) => tag.toLowerCase() === "#inbox");
          const sinClasificar = sinContextos && sinPersonas && sinFechas && sinGTD && noInbox;
          if (sinClasificar) {
            if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
              try {
                const archivo = this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo);
                if (archivo) {
                  lineasPorArchivo.set(
                    tarea.rutaArchivo,
                    await this.taskUtils.encontrarLineasTarea(archivo)
                  );
                }
              } catch (error) {
                console.error(`Error al buscar l\xEDneas en ${tarea.rutaArchivo}:`, error);
              }
            }
            const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
            if (lineasArchivo) {
              const lineInfo = lineasArchivo.get(tarea.texto);
              if (lineInfo) {
                tarea.lineInfo = lineInfo;
              }
            }
            if (!tareasPorNota.has(tarea.rutaArchivo)) {
              tareasPorNota.set(tarea.rutaArchivo, {
                titulo: tarea.titulo,
                ruta: tarea.rutaArchivo,
                tareas: []
              });
            }
            tareasPorNota.get(tarea.rutaArchivo).tareas.push(tarea);
          }
          return sinClasificar;
        }
      );
      const totalTareas = tareas.length;
      const totalNotas = tareasPorNota.size;
      console.log(`=== B\xDASQUEDA COMPLETADA ===`);
      console.log(`Total de tareas sin clasificar: ${totalTareas}`);
      console.log(`Total de notas con tareas sin clasificar: ${totalNotas}`);
      return {
        tareasPorNota,
        totalTareas,
        totalNotas
      };
    } catch (error) {
      console.error("Error en getTareasSinClasificar:", error);
      throw error;
    }
  }
  /**
   * Muestra una vista con todas las tareas sin clasificar agrupadas por nota
   * @returns {Promise<void>}
   */
  async mostrarTareasSinClasificar() {
    try {
      const { tareasPorNota, totalTareas, totalNotas } = await this.getTareasSinClasificar();
      if (totalTareas === 0) {
        new import_obsidian67.Notice("No se encontraron tareas sin clasificar.");
        return;
      }
      const contenido = this.generarVistaTareasSinClasificar(tareasPorNota, totalTareas, totalNotas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Sin Clasificar.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas sin clasificar en ${totalNotas} notas`);
    } catch (error) {
      console.error("Error en mostrarTareasSinClasificar:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  /**
   * Genera el contenido de la vista de tareas sin clasificar
   * @param {Map} tareasPorNota - Mapa con las tareas agrupadas por nota
   * @param {number} totalTareas - Total de tareas sin clasificar
   * @param {number} totalNotas - Total de notas con tareas sin clasificar
   * @returns {string} - Contenido markdown para el archivo
   */
  generarVistaTareasSinClasificar(tareasPorNota, totalTareas, totalNotas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas Sin Clasificar

`;
    contenido += this.generarBotonActualizacion("mostrarTareasSinClasificar");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas sin clasificar: ${totalTareas}
`;
    contenido += `> Total de notas con tareas sin clasificar: ${totalNotas}

`;
    const notasOrdenadas = Array.from(tareasPorNota.values()).sort((a, b) => b.tareas.length - a.tareas.length);
    for (const notaInfo of notasOrdenadas) {
      contenido += `## [[${notaInfo.ruta}|${notaInfo.titulo}]] (${notaInfo.tareas.length})

`;
      for (const tarea of notaInfo.tareas) {
        contenido += this.renderizarTareaSinClasificar(tarea);
      }
      contenido += "\n";
    }
    return contenido;
  }
  /**
   * Renderiza una tarea sin clasificar en formato markdown
   * @param {Task} tarea - Tarea a renderizar
   * @returns {string} - Representación markdown de la tarea
   */
  renderizarTareaSinClasificar(tarea) {
    var _a;
    let contenido = `- [ ] ${tarea.texto}
`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += `    - \u{1F4CD} L\xEDnea: ${tarea.lineInfo.numero}
`;
    }
    if (tarea.etiquetas.todas.length > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Etiquetas: ${tarea.etiquetas.todas.join(" ")}
`;
    }
    return contenido;
  }
  // -- Tareas Inbox
  // Añadir al archivo src/modules/taskManager/api/tareasAPI.ts
  /**
   * Obtiene todas las tareas que tienen la etiqueta #inbox
   * @returns {Promise<Object>} Objeto con tareas agrupadas por nota y contadores
   */
  async getTareasInbox() {
    try {
      console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS EN BANDEJA DE ENTRADA (#inbox) ===");
      const tareasPorNota = /* @__PURE__ */ new Map();
      const lineasPorArchivo = /* @__PURE__ */ new Map();
      const tareas = await this.procesarTareas(
        this.plugin.app.vault.getMarkdownFiles(),
        async (tarea) => {
          const tieneInbox = tarea.etiquetas.todas.some((tag) => tag.toLowerCase() === "#inbox");
          if (tieneInbox) {
            if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
              try {
                const archivo = this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo);
                if (archivo) {
                  lineasPorArchivo.set(
                    tarea.rutaArchivo,
                    await this.taskUtils.encontrarLineasTarea(archivo)
                  );
                }
              } catch (error) {
                console.error(`Error al buscar l\xEDneas en ${tarea.rutaArchivo}:`, error);
              }
            }
            const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
            if (lineasArchivo) {
              const lineInfo = lineasArchivo.get(tarea.texto);
              if (lineInfo) {
                tarea.lineInfo = lineInfo;
              }
            }
            if (!tareasPorNota.has(tarea.rutaArchivo)) {
              tareasPorNota.set(tarea.rutaArchivo, {
                titulo: tarea.titulo,
                ruta: tarea.rutaArchivo,
                tareas: []
              });
            }
            tareasPorNota.get(tarea.rutaArchivo).tareas.push(tarea);
          }
          return tieneInbox;
        }
      );
      const totalTareas = tareas.length;
      const totalNotas = tareasPorNota.size;
      console.log(`=== B\xDASQUEDA COMPLETADA ===`);
      console.log(`Total de tareas en bandeja de entrada (#inbox): ${totalTareas}`);
      console.log(`Total de notas con tareas inbox: ${totalNotas}`);
      return {
        tareasPorNota,
        totalTareas,
        totalNotas
      };
    } catch (error) {
      console.error("Error en getTareasInbox:", error);
      throw error;
    }
  }
  /**
   * Muestra una vista con todas las tareas en bandeja de entrada (#inbox) agrupadas por nota
   * @returns {Promise<void>}
   */
  async mostrarTareasInbox() {
    try {
      const { tareasPorNota, totalTareas, totalNotas } = await this.getTareasInbox();
      if (totalTareas === 0) {
        new import_obsidian67.Notice("No se encontraron tareas en la bandeja de entrada (#inbox).");
        return;
      }
      const contenido = this.generarVistaTareasInbox(tareasPorNota, totalTareas, totalNotas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Bandeja de Entrada.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas en bandeja de entrada en ${totalNotas} notas`);
    } catch (error) {
      console.error("Error en mostrarTareasInbox:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  /**
   * Genera el contenido de la vista de tareas en bandeja de entrada
   * @param {Map} tareasPorNota - Mapa con las tareas agrupadas por nota
   * @param {number} totalTareas - Total de tareas en bandeja de entrada
   * @param {number} totalNotas - Total de notas con tareas en bandeja de entrada
   * @returns {string} - Contenido markdown para el archivo
   */
  generarVistaTareasInbox(tareasPorNota, totalTareas, totalNotas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas en Bandeja de Entrada (#inbox)

`;
    contenido += this.generarBotonActualizacion("mostrarTareasInbox");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas en bandeja de entrada: ${totalTareas}
`;
    contenido += `> Total de notas con tareas inbox: ${totalNotas}

`;
    const notasOrdenadas = Array.from(tareasPorNota.values()).sort((a, b) => b.tareas.length - a.tareas.length);
    for (const notaInfo of notasOrdenadas) {
      contenido += `## [[${notaInfo.ruta}|${notaInfo.titulo}]] (${notaInfo.tareas.length})

`;
      for (const tarea of notaInfo.tareas) {
        contenido += this.renderizarTareaInbox(tarea);
      }
      contenido += "\n";
    }
    return contenido;
  }
  /**
   * Renderiza una tarea de bandeja de entrada en formato markdown
   * @param {Task} tarea - Tarea a renderizar
   * @returns {string} - Representación markdown de la tarea
   */
  renderizarTareaInbox(tarea) {
    var _a, _b, _c;
    let contenido = `- [ ] ${tarea.texto}
`;
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    - Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += `    - \u{1F4CD} L\xEDnea: ${tarea.lineInfo.numero}
`;
    }
    if (((_b = tarea.etiquetas.contextos) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.personas) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F464} Personas: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    const otrasEtiquetas = tarea.etiquetas.otras.filter((tag) => tag.toLowerCase() !== "#inbox");
    if (otrasEtiquetas.length > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras etiquetas: ${otrasEtiquetas.join(" ")}
`;
    }
    return contenido;
  }
};

// src/modules/moduloTabTitle/index.ts
var import_obsidian71 = require("obsidian");

// src/modules/moduloTabTitle/commands.ts
var import_obsidian68 = require("obsidian");
function registerCommands4(plugin, settings) {
  plugin.addCommand({
    id: "set-tab-title-alias",
    name: "Mostrar alias en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "alias";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-title",
    name: "Mostrar t\xEDtulo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "title";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-filename",
    name: "Mostrar nombre de archivo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "filename";
      plugin.saveData(settings);
    }
  });
}

// src/modules/moduloTabTitle/TabTitleManager.ts
var import_obsidian70 = require("obsidian");

// src/modules/moduloTabTitle/views/CustomMarkdownView.ts
var import_obsidian69 = require("obsidian");

// src/modules/moduloTabTitle/utils/logger.ts
var Logger = class {
  static debug(message, ...args) {
    console.debug(`${this.PREFIX} ${message}`, ...args);
  }
  static info(message, ...args) {
    console.info(`${this.PREFIX} ${message}`, ...args);
  }
  static error(message, error) {
    console.error(`${this.PREFIX} ${message}`, error || "");
  }
  static warn(message, ...args) {
    console.warn(`${this.PREFIX} ${message}`, ...args);
  }
};
Logger.PREFIX = "\u{1F3F7}\uFE0F [TabTitle]";

// src/modules/moduloTabTitle/TabTitleManager.ts
var TabTitleManager = class {
  constructor(plugin, settings) {
    this.plugin = plugin;
    this.settings = settings;
    this.customViews = /* @__PURE__ */ new Map();
    Logger.info("TabTitleManager initialized");
  }
  updateAllTabs() {
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView) {
        this.updateTab(leaf);
      }
    }
  }
  async updateTabForFile(file) {
    var _a;
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView && ((_a = leaf.view.file) == null ? void 0 : _a.path) === file.path) {
        await this.updateTab(leaf);
      }
    }
  }
  async getPreferredTitleWithSource(file) {
    try {
      const metadata = await this.waitForMetadata(file);
      if (metadata == null ? void 0 : metadata.aliases) {
        if (Array.isArray(metadata.aliases) && metadata.aliases.length >= 3) {
          return {
            displayTitle: `${metadata.aliases[2]} / ${metadata.aliases[0]}`,
            source: "aliases-special"
          };
        } else if (Array.isArray(metadata.aliases) && metadata.aliases.length > 0) {
          return {
            displayTitle: metadata.aliases[0],
            source: "aliases"
          };
        } else if (typeof metadata.aliases === "string") {
          return {
            displayTitle: metadata.aliases,
            source: "aliases"
          };
        }
      }
      if (metadata == null ? void 0 : metadata.titulo) {
        return {
          displayTitle: metadata.titulo,
          source: "titulo"
        };
      }
      return {
        displayTitle: null,
        source: "basename"
      };
    } catch (error) {
      Logger.error(`Error getting title for ${file.path}:`, error);
      return {
        displayTitle: null,
        source: "error"
      };
    }
  }
  async waitForMetadata(file) {
    return new Promise((resolve) => {
      const maxAttempts = 10;
      let attempts = 0;
      const checkMetadata = () => {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        if ((cache == null ? void 0 : cache.frontmatter) || attempts >= maxAttempts) {
          resolve((cache == null ? void 0 : cache.frontmatter) || {});
        } else {
          attempts++;
          setTimeout(checkMetadata, 100);
        }
      };
      checkMetadata();
    });
  }
  // Método para aplicar scroll horizontal a un elemento de título de pestaña
  applyHorizontalScrollToTab(tabElement) {
    if (tabElement.getAttribute("data-scroll-enabled") === "true")
      return;
    const originalStyles = {
      overflow: tabElement.style.overflow,
      textOverflow: tabElement.style.textOverflow,
      whiteSpace: tabElement.style.whiteSpace,
      maxWidth: tabElement.style.maxWidth,
      transition: tabElement.style.transition
    };
    tabElement.style.overflow = "hidden";
    tabElement.style.textOverflow = "ellipsis";
    tabElement.style.whiteSpace = "nowrap";
    tabElement.style.maxWidth = "150px";
    tabElement.style.transition = "max-width 0.3s ease-in-out";
    const mouseEnterHandler = () => {
      const fullWidth = tabElement.scrollWidth;
      tabElement.style.overflow = "auto";
      tabElement.style.textOverflow = "clip";
      tabElement.style.maxWidth = Math.min(fullWidth, 300) + "px";
    };
    const mouseLeaveHandler = () => {
      tabElement.style.overflow = "hidden";
      tabElement.style.textOverflow = "ellipsis";
      tabElement.style.maxWidth = "150px";
      setTimeout(() => {
        tabElement.scrollLeft = 0;
      }, 300);
    };
    tabElement.addEventListener("mouseenter", mouseEnterHandler);
    tabElement.addEventListener("mouseleave", mouseLeaveHandler);
    tabElement.setAttribute("data-scroll-enabled", "true");
    if (!this.scrollEnabledElements)
      this.scrollEnabledElements = /* @__PURE__ */ new Map();
    this.scrollEnabledElements.set(tabElement, {
      mouseEnterHandler,
      mouseLeaveHandler,
      originalStyles
    });
  }
  // Método para limpiar el scroll de un elemento
  removeHorizontalScrollFromTab(tabElement) {
    if (!tabElement || !this.scrollEnabledElements)
      return;
    const handlers = this.scrollEnabledElements.get(tabElement);
    if (!handlers)
      return;
    tabElement.removeEventListener("mouseenter", handlers.mouseEnterHandler);
    tabElement.removeEventListener("mouseleave", handlers.mouseLeaveHandler);
    Object.assign(tabElement.style, handlers.originalStyles);
    tabElement.removeAttribute("data-scroll-enabled");
    this.scrollEnabledElements.delete(tabElement);
  }
  // Sobrescritura del método updateTab
  async updateTab(leaf) {
    if (!(leaf.view instanceof import_obsidian70.MarkdownView) || !leaf.view.file)
      return;
    const { displayTitle, source } = await this.getPreferredTitleWithSource(leaf.view.file);
    if (displayTitle) {
      let formattedTitle;
      if (source === "aliases-special" || source === "aliases-two") {
        formattedTitle = displayTitle;
      } else {
        formattedTitle = `${leaf.view.file.basename} / ${displayTitle}`;
      }
      leaf.view.titleEl.innerText = formattedTitle;
      if (leaf.tabHeaderInnerTitleEl) {
        leaf.tabHeaderInnerTitleEl.innerText = formattedTitle;
        this.applyHorizontalScrollToTab(leaf.tabHeaderInnerTitleEl);
      }
    }
  }
  // Método para limpiar recursos al desactivar
  cleanupScrollHandlers() {
    if (!this.scrollEnabledElements)
      return;
    this.scrollEnabledElements.forEach((handlers, element) => {
      this.removeHorizontalScrollFromTab(element);
    });
    this.scrollEnabledElements.clear();
  }
  // Sobrescribir restoreDefaultTitles para incluir la limpieza
  restoreDefaultTitles() {
    this.cleanupScrollHandlers();
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView && leaf.view.file) {
        leaf.view.titleEl.innerText = leaf.view.file.basename;
        if (leaf.tabHeaderInnerTitleEl) {
          leaf.tabHeaderInnerTitleEl.innerText = leaf.view.file.basename;
        }
      }
    }
  }
};

// src/modules/moduloTabTitle/defaults/defaultSettings.ts
var DEFAULT_TAB_SETTINGS = {
  titleDisplayMode: "filename"
};

// src/modules/moduloTabTitle/index.ts
var ModuloTabTitle = class {
  constructor(plugin) {
    this.tabManager = null;
    this.plugin = plugin;
    this.settings = DEFAULT_TAB_SETTINGS;
  }
  async activate() {
    try {
      await this.loadSettings();
      if (!this.settings.titleDisplayMode) {
        this.settings.titleDisplayMode = "alias";
        await this.saveSettings();
      }
      this.tabManager = new TabTitleManager(this.plugin, this.settings);
      registerCommands4(this.plugin, this.settings);
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          var _a;
          try {
            (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
          } catch (error) {
            Logger.error("Error updating tabs on layout change:", error);
          }
        })
      );
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("file-open", (file) => {
          try {
            if (file && this.tabManager) {
              this.tabManager.updateTabForFile(file);
            }
          } catch (error) {
            Logger.error("Error updating tab on file open:", error);
          }
        })
      );
      setTimeout(() => {
        var _a;
        (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
      }, 1e3);
    } catch (error) {
      Logger.error("Error activating TabTitle module:", error);
    }
  }
  deactivate() {
    try {
      if (this.tabManager) {
        this.tabManager.restoreDefaultTitles();
        this.tabManager = null;
      }
    } catch (error) {
      Logger.error("Error deactivating TabTitle module:", error);
    }
  }
  async loadSettings() {
    try {
      const loadedData = await this.plugin.loadData();
      this.settings = Object.assign({}, DEFAULT_TAB_SETTINGS, loadedData);
    } catch (error) {
      Logger.error("Error loading TabTitle settings:", error);
      this.settings = DEFAULT_TAB_SETTINGS;
    }
  }
  async saveSettings() {
    try {
      await this.plugin.saveData(this.settings);
    } catch (error) {
      Logger.error("Error saving TabTitle settings:", error);
    }
  }
};

// src/modules/taskManager/index.ts
var import_obsidian73 = require("obsidian");

// src/modules/taskManager/commands.ts
var import_obsidian72 = require("obsidian");
var TaskDaysModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.dias = 7;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas pr\xF3ximas" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue("7").onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FutureTasksModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas futuras" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas hacia adelante").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasFuturas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ScheduledTaskDaysModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas programadas pr\xF3ximas" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasScheduledProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function registerTaskManagerCommands(plugin) {
  const managementPlugin = plugin;
  const commandIds = [];
  const tareasVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-vencidas",
    name: "Mostrar Tareas Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasVencidasCommand.id);
  const tareasProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas",
    name: "Mostrar Tareas Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasProximas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCommand.id);
  const tareasProximasCustomCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas-custom",
    name: "Mostrar Tareas Pr\xF3ximas (Especificar d\xEDas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new TaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCustomCommand.id);
  const tareasHoyCommand = plugin.addCommand({
    id: "mostrar-tareas-hoy",
    name: "Mostrar Tareas para Hoy",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasHoy();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasHoyCommand.id);
  const tareasStartVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-vencidas",
    name: "Mostrar Tareas Pendientes de Iniciar",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartVencidasCommand.id);
  const tareasStartProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-proximas",
    name: "Mostrar Tareas por Iniciar (Vencidas y Pr\xF3ximas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartProximas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartProximasCommand.id);
  const tareasFuturasCommand = plugin.addCommand({
    id: "mostrar-tareas-futuras",
    name: "Mostrar Tareas Futuras Programadas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new FutureTasksModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasFuturasCommand.id);
  const tareasEnEjecucionCommand = plugin.addCommand({
    id: "mostrar-tareas-en-ejecucion",
    name: "Mostrar Tareas en Ejecuci\xF3n",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasEnEjecucion();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasEnEjecucionCommand.id);
  const tareasScheduledVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-vencidas",
    name: "Mostrar Tareas Scheduled Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasScheduledVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledVencidasCommand.id);
  const tareasScheduledProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-proximas",
    name: "Mostrar Tareas Scheduled Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new ScheduledTaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledProximasCommand.id);
  const todasTareasVencidasCommand = plugin.addCommand({
    id: "mostrar-todas-tareas-vencidas",
    name: "Mostrar Todas las Tareas Vencidas (Due, Scheduled, Start)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTodasTareasVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(todasTareasVencidasCommand.id);
  const tareasDependientesCommand = plugin.addCommand({
    id: "mostrar-tareas-dependientes",
    name: "Mostrar Tareas con Dependencias",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasDependientes();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasDependientesCommand.id);
  const tareasPersonasCommand = plugin.addCommand({
    id: "mostrar-tareas-personas",
    name: "Mostrar Tareas por Persona",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasPersonas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasPersonasCommand.id);
  const tareasContextosCommand = plugin.addCommand({
    id: "mostrar-tareas-contextos",
    name: "Mostrar Tareas por Contexto",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasContextos();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasContextosCommand.id);
  const tareasSinClasificarCommand = plugin.addCommand({
    id: "mostrar-tareas-sin-clasificar",
    name: "Mostrar Tareas Sin Clasificar",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasSinClasificar();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasSinClasificarCommand.id);
  const tareasInboxCommand = plugin.addCommand({
    id: "mostrar-tareas-inbox",
    name: "Mostrar Tareas en Bandeja de Entrada (#inbox)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasInbox();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasInboxCommand.id);
  plugin.registeredTaskManagerCommandIds = commandIds;
}
function deactivateTaskManagerCommands(plugin) {
  const commandIds = plugin.registeredTaskManagerCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian72.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredTaskManagerCommandIds = [];
}

// src/modules/taskManager/index.ts
var ModuloTaskManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    registerTaskManagerCommands(this.plugin);
  }
  deactivate() {
    deactivateTaskManagerCommands(this.plugin);
  }
};

// src/modules/dataviewQueries/index.ts
var import_obsidian76 = require("obsidian");

// src/modules/dataviewQueries/DataviewQueryManager.ts
var import_obsidian74 = require("obsidian");
var DataviewQueryManager = class extends import_obsidian74.Component {
  constructor(plugin) {
    super();
    // Cache para almacenar resultados de consultas frecuentes
    this.queryCache = /* @__PURE__ */ new Map();
    this.plugin = plugin;
  }
  // Método para ejecutar consultas con caché
  async executeQuery(queryKey, queryFn, ttl = 6e4) {
    const cached = this.queryCache.get(queryKey);
    const now2 = Date.now();
    if (cached && now2 - cached.timestamp < cached.ttl) {
      return cached.data;
    }
    const result = await queryFn();
    this.queryCache.set(queryKey, {
      data: result,
      timestamp: now2,
      ttl
    });
    return result;
  }
  // Método para limpiar caché
  clearCache(queryKey) {
    if (queryKey) {
      this.queryCache.delete(queryKey);
    } else {
      this.queryCache.clear();
    }
  }
};

// src/modules/dataviewQueries/commands.ts
var import_obsidian75 = require("obsidian");
function registerCommands5(plugin) {
  const clearCacheCommand = plugin.addCommand({
    id: "clear-dataview-queries-cache",
    name: "Limpiar cach\xE9 de consultas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.queryManager.clearCache();
          new import_obsidian75.Notice("Cach\xE9 de consultas limpiado");
        }
      } catch (error) {
        console.error("Error al limpiar cach\xE9:", error);
        new import_obsidian75.Notice("Error al limpiar cach\xE9 de consultas");
      }
    }
  });
  const reloadQueriesCommand = plugin.addCommand({
    id: "reload-dataview-queries",
    name: "Recargar consultas activas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.clearCache();
          app.workspace.trigger("dataview:refresh-views");
          new import_obsidian75.Notice("Consultas recargadas");
        }
      } catch (error) {
        console.error("Error al recargar consultas:", error);
        new import_obsidian75.Notice("Error al recargar consultas");
      }
    }
  });
  plugin.registeredDataviewQueryCommandIds = [
    clearCacheCommand.id,
    reloadQueriesCommand.id
  ];
}
function deactivateCommands4(plugin) {
  const commandIds = plugin.registeredDataviewQueryCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian75.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredDataviewQueryCommandIds = [];
}

// src/modules/dataviewQueries/QueryRenderer.ts
var QueryRenderer = class {
  async renderTaskButtons(container, options = {}) {
    const buttonContainer = container.createEl("div", {
      cls: "task-buttons-container",
      attr: { style: "display: grid; grid-gap: 8px; padding: 16px; background: var(--background-secondary); border-radius: 8px;" }
    });
    if (options.showTitle !== false) {
      buttonContainer.createEl("h4", {
        text: "\u{1F4CB} Gesti\xF3n de Tareas",
        attr: { style: "margin: 0 0 12px 0;" }
      });
    }
    const buttons = [
      {
        id: "today",
        text: "Tareas de Hoy",
        icon: "\u{1F4C5}",
        color: "#4CAF50",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasHoy()
      },
      {
        id: "overdue",
        text: "Tareas Vencidas",
        icon: "\u26A0\uFE0F",
        color: "#f44336",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasVencidas()
      },
      {
        id: "upcoming",
        text: "Tareas Pr\xF3ximas",
        icon: "\u{1F3AF}",
        color: "#2196F3",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasProximas()
      },
      {
        id: "start",
        text: "Todas las Vencidas",
        icon: "\u{1F313}",
        color: "#FF9800",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTodasTareasVencidas()
      }
    ];
    const buttonGrid = buttonContainer.createEl("div", {
      attr: { style: "display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;" }
    });
    buttons.forEach((btn) => {
      const button = buttonGrid.createEl("button", {
        attr: {
          style: `
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        padding: 8px 16px;
                        background-color: ${btn.color};
                        color: white;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    `
        }
      });
      button.createEl("span", { text: btn.icon });
      button.createEl("span", { text: btn.text });
      button.addEventListener("mouseenter", () => {
        button.style.filter = "brightness(1.1)";
        button.style.transform = "translateY(-1px)";
      });
      button.addEventListener("mouseleave", () => {
        button.style.filter = "brightness(1)";
        button.style.transform = "translateY(0)";
      });
      button.addEventListener("click", async () => {
        try {
          button.style.opacity = "0.7";
          new Notice("Actualizando vista...");
          await btn.action();
        } catch (error) {
          console.error(`Error en acci\xF3n ${btn.id}:`, error);
          new Notice(`Error: ${error.message}`);
        } finally {
          button.style.opacity = "1";
        }
      });
    });
    if (options.showTimestamp) {
      buttonContainer.createEl("div", {
        text: `\xDAltima actualizaci\xF3n: ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}`,
        attr: {
          style: "margin-top: 8px; text-align: right; font-size: 0.8em; color: var(--text-muted);"
        }
      });
    }
  }
  async renderProjectHierarchy(container, options = {}) {
  }
};

// src/modules/dataviewQueries/index.ts
var ModuloDataviewQueries = class {
  constructor(plugin) {
    this._isActive = false;
    console.log("ModuloDataviewQueries: Inicializando...");
    this.plugin = plugin;
    this.queryManager = new DataviewQueryManager(plugin);
    this.queryRenderer = new QueryRenderer();
  }
  activate() {
    console.log("ModuloDataviewQueries: Iniciando activaci\xF3n...");
    if (this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 activo");
      return;
    }
    try {
      registerCommands5(this.plugin);
      this.registerDataviewExtensions();
      this._isActive = true;
      console.log("ModuloDataviewQueries: Activaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en activaci\xF3n:", error);
      this._isActive = false;
      throw error;
    }
  }
  deactivate() {
    console.log("ModuloDataviewQueries: Iniciando desactivaci\xF3n...");
    if (!this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 inactivo");
      return;
    }
    try {
      deactivateCommands4(this.plugin);
      this.unregisterDataviewExtensions();
      this._isActive = false;
      console.log("ModuloDataviewQueries: Desactivaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en desactivaci\xF3n:", error);
      throw error;
    }
  }
  isActive() {
    return this._isActive;
  }
  async renderQuery(queryType, params) {
    if (!this._isActive) {
      throw new Error("El m\xF3dulo no est\xE1 activo");
    }
    switch (queryType) {
      case "taskButtons":
        await this.queryRenderer.renderTaskButtons(params.container, params.options);
        break;
      default:
        throw new Error(`Tipo de consulta no soportado: ${queryType}`);
    }
  }
  registerDataviewExtensions() {
    const boundFunctions = {
      renderTaskButtons: (dv2, container, options) => {
        return this.queryRenderer.renderTaskButtons(container, options);
      },
      renderProjectHierarchy: (dv2, container, options) => {
        return this.queryRenderer.renderProjectHierarchy(container, options);
      }
    };
    window.customQueries = boundFunctions;
    console.log("ModuloDataviewQueries: Extensions registradas");
  }
  unregisterDataviewExtensions() {
    delete window.customQueries;
    console.log("ModuloDataviewQueries: Extensions eliminadas");
  }
};

// src/modules/taskExecutionNavigator/index.ts
var import_obsidian79 = require("obsidian");

// src/modules/taskExecutionNavigator/commands.ts
var import_obsidian78 = require("obsidian");

// src/modules/taskExecutionNavigator/taskExecutionNavigator.ts
var import_obsidian77 = require("obsidian");
init_seleccionModalTareas();
var TaskExecutionNavigator = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Navega a la tarea seleccionada por el usuario
   */
  async navigateToTask() {
    try {
      const tasks = await this.findPendingTasks();
      if (tasks.length === 0) {
        new import_obsidian77.Notice("No se encontraron tareas en ejecuci\xF3n.");
        return;
      }
      const displayOptions = tasks.map((task) => task.displayText);
      const placeholder = "Selecciona una tarea para navegar";
      const modalMenu = new SeleccionModalTareas(
        this.app,
        displayOptions,
        tasks.map((_, index) => index.toString()),
        placeholder
      );
      try {
        const selectedIndex = parseInt(await modalMenu.openAndAwaitSelection());
        const selectedTask = tasks[selectedIndex];
        await this.openFileAtLine(selectedTask.file, selectedTask.lineNumber);
        new import_obsidian77.Notice(`Navegando a la tarea en ${selectedTask.file.basename}`);
      } catch (error) {
        console.log("Selecci\xF3n de tarea cancelada por el usuario");
      }
    } catch (error) {
      console.error("Error en navegaci\xF3n de tareas:", error);
      throw error;
    }
  }
  /**
   * Encuentra todas las tareas pendientes (con estado [/]) en los archivos
   */
  async findPendingTasks() {
    var _a;
    const tasks = [];
    const archivos = this.app.vault.getMarkdownFiles();
    const archivosRelevantes = archivos.filter((archivo) => {
      return !archivo.path.includes("Plantillas") && !archivo.path.includes("Estructura/GTD/Sistema GTD/Sistema") && !archivo.path.includes("Archivo");
    });
    for (const archivo of archivosRelevantes) {
      try {
        const contenido = await this.app.vault.read(archivo);
        const lineas = contenido.split("\n");
        const metadata = this.app.metadataCache.getFileCache(archivo);
        let aliasDisplay = "";
        if ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) {
          let aliases = metadata.frontmatter.aliases;
          if (!Array.isArray(aliases))
            aliases = [aliases];
          if (aliases.length >= 2) {
            aliasDisplay = aliases[1];
          } else if (aliases.length >= 1) {
            aliasDisplay = aliases[0];
          }
        }
        if (!aliasDisplay) {
          aliasDisplay = archivo.basename;
        }
        for (let i = 0; i < lineas.length; i++) {
          const linea = lineas[i];
          if (linea.match(/^ *- \[\/\] .*/)) {
            const textoTarea = await this.limpiarTextoTarea(linea);
            const displayText = `${aliasDisplay} / ${textoTarea}`;
            tasks.push({
              text: textoTarea,
              file: archivo,
              lineNumber: i,
              displayText
            });
          }
        }
      } catch (error) {
        console.error(`Error al procesar el archivo ${archivo.path}:`, error);
      }
    }
    return tasks;
  }
  /**
   * Limpia el texto de una tarea para mostrarla de forma legible
   * @param titulo Texto completo de la línea de la tarea
   */
  async limpiarTextoTarea(titulo) {
    return new Promise((resolve) => {
      let textoLimpio = titulo.split("\n")[0];
      textoLimpio = textoLimpio.replace(/#([\w-/]+)/g, (match2, p1) => {
        let transformado = p1.replace(/\//g, "_");
        transformado = transformado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        return transformado;
      });
      textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
      textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
      textoLimpio = textoLimpio.replace(
        /\p{Extended_Pictographic}\s*\d{4}-\d{2}-\d{2}(?:\s*\d{2}:\d{2}(?::\d{2})?)?/gu,
        ""
      );
      textoLimpio = textoLimpio.replace(/\p{Extended_Pictographic}/gu, "");
      textoLimpio = textoLimpio.replace(/\[[^\]]*\]/g, "");
      const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
      textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
      textoLimpio = textoLimpio.replace(/\s+/g, " ");
      resolve(textoLimpio.trim());
    });
  }
  /**
   * Abre un archivo y navega a una línea específica
   * @param file Archivo a abrir
   * @param line Número de línea a la que navegar
   */
  async openFileAtLine(file, line) {
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.openFile(file);
    const view = this.app.workspace.getActiveViewOfType(import_obsidian77.MarkdownView);
    if (view) {
      const editor = view.editor;
      const position = { line, ch: 0 };
      editor.setCursor(position);
      editor.scrollIntoView({ from: position, to: position }, true);
      const lineLength = editor.getLine(line).length;
      editor.setSelection(
        { line, ch: 0 },
        { line, ch: lineLength }
      );
      editor.focus();
    }
  }
};

// src/modules/taskExecutionNavigator/commands.ts
function registerCommands6(plugin) {
  const taskExecutionNavigator = new TaskExecutionNavigator(plugin);
  const navigatorCommand = plugin.addCommand({
    id: "navigate-to-execution-tasks",
    name: "Navegar a tareas en ejecuci\xF3n",
    callback: async () => {
      try {
        await taskExecutionNavigator.navigateToTask();
      } catch (error) {
        console.error("Error al navegar a la tarea:", error);
        new import_obsidian78.Notice("No se pudo navegar a la tarea seleccionada.");
      }
    }
  });
  if (!plugin.registeredTaskExecutionNavigatorIDs) {
    plugin.registeredTaskExecutionNavigatorIDs = [];
  }
  plugin.registeredTaskExecutionNavigatorIDs.push(navigatorCommand.id);
}
function deactivateCommands5(plugin) {
  if (!plugin.registeredTaskExecutionNavigatorIDs)
    return;
  plugin.registeredTaskExecutionNavigatorIDs.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian78.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredTaskExecutionNavigatorIDs = [];
}

// src/modules/taskExecutionNavigator/index.ts
var TaskExecutionNavigatorModule = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Activa el módulo registrando los comandos
   */
  activate() {
    registerCommands6(this.plugin);
  }
  /**
   * Desactiva el módulo, asegurándose de limpiar todos los comandos registrados
   */
  deactivate() {
    deactivateCommands5(this.plugin);
  }
};

// src/modules/taskNavigator/module.ts
var import_obsidian88 = require("obsidian");

// src/modules/taskNavigator/views/TaskNavigatorView.ts
var import_obsidian86 = require("obsidian");

// src/modules/taskNavigator/services/TaskHierarchyBuilder.ts
var import_obsidian84 = require("obsidian");

// src/modules/taskNavigator/services/EntityDetector.ts
var import_obsidian82 = require("obsidian");

// src/modules/taskNavigator/models/Entity.ts
var import_obsidian81 = require("obsidian");

// src/modules/taskNavigator/models/Task.ts
var import_obsidian80 = require("obsidian");
var TaskListType = /* @__PURE__ */ ((TaskListType2) => {
  TaskListType2["INBOX"] = "inbox";
  TaskListType2["NEXT_ACTIONS"] = "nextActions";
  TaskListType2["CALENDAR"] = "calendar";
  TaskListType2["HOPEFULLY_TODAY"] = "hopefullyToday";
  TaskListType2["ASSIGNED"] = "assigned";
  TaskListType2["PROJECTS"] = "projects";
  TaskListType2["SOMEDAY_MAYBE"] = "somedayMaybe";
  TaskListType2["NOT_THIS_WEEK"] = "notThisWeek";
  TaskListType2["WAITING"] = "waiting";
  return TaskListType2;
})(TaskListType || {});
var Task3 = class {
  // Razón por la que está bloqueada
  constructor(id, text, rawText, completed, file, lineInfo) {
    // Tipo de lista GTD donde se encuentra
    this.isBlocked = false;
    this.id = id;
    this.taskId = id;
    this.text = text;
    this.rawText = rawText;
    this.completed = completed;
    this.file = file;
    this.filePath = file.path;
    this.lineInfo = lineInfo;
    this.priority = "normal" /* NORMAL */;
    this.tags = {
      contexts: [],
      people: [],
      gtdTags: [],
      otherTags: [],
      all: []
    };
    this.timing = {};
    this.dependencies = [];
  }
  /**
   * Comprueba si la tarea tiene un contexto específico
   */
  hasContext(context) {
    return this.tags.contexts.some((ctx) => ctx.toLowerCase() === context.toLowerCase());
  }
  /**
   * Comprueba si la tarea está asignada a una persona específica
   */
  isAssignedTo(person) {
    return this.tags.people.some((p) => p.toLowerCase() === person.toLowerCase());
  }
  /**
   * Comprueba si la tarea tiene una etiqueta GTD específica
   */
  hasGTDTag(tag) {
    return this.tags.gtdTags.some((t) => t.toLowerCase() === tag.toLowerCase());
  }
  /**
   * Determina si una tarea está vencida
   */
  isOverdue() {
    if (!this.timing.dueDate && !this.timing.scheduledDate) {
      return false;
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    if (this.timing.dueDate) {
      const dueDate = new Date(this.timing.dueDate);
      dueDate.setHours(0, 0, 0, 0);
      if (dueDate < today) {
        return true;
      }
    }
    if (this.timing.scheduledDate) {
      const scheduledDate = new Date(this.timing.scheduledDate);
      scheduledDate.setHours(0, 0, 0, 0);
      if (scheduledDate < today) {
        return true;
      }
    }
    return false;
  }
  /**
   * Determina si una tarea está programada para hoy
   */
  isForToday() {
    if (!this.timing.dueDate && !this.timing.scheduledDate) {
      return false;
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    if (this.timing.dueDate) {
      const dueDate = new Date(this.timing.dueDate);
      dueDate.setHours(0, 0, 0, 0);
      if (dueDate.getTime() === today.getTime()) {
        return true;
      }
    }
    if (this.timing.scheduledDate) {
      const scheduledDate = new Date(this.timing.scheduledDate);
      scheduledDate.setHours(0, 0, 0, 0);
      if (scheduledDate.getTime() === today.getTime()) {
        return true;
      }
    }
    return false;
  }
  /**
   * Determina si una tarea tiene hora de inicio establecida
   */
  hasStartTime() {
    return !!this.timing.startTime;
  }
  /**
   * Determina los días hasta la fecha límite (positivo si aún hay tiempo, negativo si está vencida)
   */
  getDaysUntilDue() {
    if (!this.timing.dueDate) {
      return null;
    }
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const dueDate = new Date(this.timing.dueDate);
    dueDate.setHours(0, 0, 0, 0);
    const diffTime = dueDate.getTime() - today.getTime();
    return Math.ceil(diffTime / (1e3 * 60 * 60 * 24));
  }
};

// src/modules/taskNavigator/models/Entity.ts
var Entity = class {
  constructor(id, type2, title, description, file, state = "" /* UNKNOWN */) {
    this.tasks = [];
    this.children = [];
    this.metadata = {};
    this.id = id;
    this.type = type2;
    this.title = title;
    this.description = description;
    this.file = file;
    this.state = state;
  }
  /**
   * Añade una tarea a esta entidad
   */
  addTask(task) {
    this.tasks.push(task);
    task.parentEntity = this;
  }
  /**
   * Añade una entidad hija
   */
  addChild(child) {
    this.children.push(child);
    child.parent = this;
  }
  /**
   * Devuelve el número total de tareas (incluyendo las de entidades hijas)
   */
  getTotalTaskCount() {
    let count = this.tasks.length;
    for (const child of this.children) {
      count += child.getTotalTaskCount();
    }
    return count;
  }
  /**
   * Devuelve el número total de tareas pendientes (incluyendo las de entidades hijas)
   */
  getPendingTaskCount() {
    let count = this.tasks.filter((task) => !task.completed).length;
    for (const child of this.children) {
      count += child.getPendingTaskCount();
    }
    return count;
  }
};
var AreaVida = class extends Entity {
  constructor(id, title, description, file, state, trimestre) {
    super(id, "AV" /* AREA_VIDA */, title, description, file, state);
    this.trimestre = trimestre;
    this.metadata.trimestre = trimestre;
  }
};
var AreaInteres = class extends Entity {
  constructor(id, title, description, file, state, nivelAI = 0) {
    super(id, "AI" /* AREA_INTERES */, title, description, file, state);
    this.nivelAI = nivelAI;
    this.level = nivelAI;
    this.metadata.nivelAI = nivelAI;
  }
};
var ProyectoQ = class extends Entity {
  constructor(id, title, description, file, state, trimestres = []) {
    super(id, "PQ" /* PROYECTO_Q */, title, description, file, state);
    this.trimestres = [];
    this.trimestres = trimestres;
    this.metadata.trimestres = trimestres;
  }
};
var ProyectoGTD = class extends Entity {
  constructor(id, title, description, file, state, nivelP = 0) {
    super(id, "PGTD" /* PROYECTO_GTD */, title, description, file, state);
    this.nivelP = nivelP;
    this.level = nivelP;
    this.metadata.nivelP = nivelP;
  }
};
function createEntity(type2, id, title, description, file, state, metadata = {}) {
  switch (type2) {
    case "AV" /* AREA_VIDA */:
      return new AreaVida(id, title, description, file, state, metadata.trimestre || "");
    case "AI" /* AREA_INTERES */:
      return new AreaInteres(id, title, description, file, state, metadata.nivelAI || 0);
    case "PQ" /* PROYECTO_Q */:
      return new ProyectoQ(id, title, description, file, state, metadata.trimestres || []);
    case "PGTD" /* PROYECTO_GTD */:
      return new ProyectoGTD(id, title, description, file, state, metadata.nivelP || 0);
    default:
      const entity = new Entity(id, type2, title, description, file, state);
      entity.metadata = metadata;
      return entity;
  }
}

// src/modules/taskNavigator/services/EntityDetector.ts
var EntityDetector = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Detecta el tipo de entidad de un archivo y crea la instancia correspondiente
   */
  async detectEntityFromFile(file) {
    var _a;
    try {
      const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (!metadata) {
        return this.createGenericEntity(file);
      }
      const entityType = this.determineEntityType(metadata.type);
      const id = metadata.id || file.basename;
      const title = metadata.titulo || (metadata.aliases && metadata.aliases.length > 0 ? metadata.aliases[0] : file.basename);
      const description = metadata.descripcion || "";
      const state = this.determineEntityState(metadata.estado);
      const specificMetadata = this.extractSpecificMetadata(entityType, metadata);
      const entity = createEntity(
        entityType,
        id.toString(),
        title,
        description,
        file,
        state,
        specificMetadata
      );
      this.extractHierarchicalRelations(entity, metadata);
      return entity;
    } catch (error) {
      console.error(`Error al detectar entidad del archivo ${file.path}:`, error);
      return null;
    }
  }
  /**
   * Determina el tipo de entidad según el campo 'type' del frontmatter
   */
  determineEntityType(typeStr) {
    if (!typeStr) {
      return "UNKNOWN" /* UNKNOWN */;
    }
    switch (typeStr) {
      case "AV":
        return "AV" /* AREA_VIDA */;
      case "AI":
        return "AI" /* AREA_INTERES */;
      case "PQ":
        return "PQ" /* PROYECTO_Q */;
      case "PGTD":
        return "PGTD" /* PROYECTO_GTD */;
      case "Ax":
        return "Ax" /* ANOTACION */;
      case "Cp":
        return "Cp" /* CAMPANA */;
      case "EMkt":
        return "EMkt" /* ENTREGABLE */;
      case "RT":
        return "RT" /* REGISTRO_TIEMPO */;
      case "Tx":
        return "Tx" /* TRANSACCION */;
      default:
        return "OTHER" /* OTHER */;
    }
  }
  /**
   * Determina el estado de la entidad según el campo 'estado' del frontmatter
   */
  determineEntityState(stateStr) {
    if (!stateStr) {
      return "" /* UNKNOWN */;
    }
    switch (stateStr) {
      case "\u{1F7E2}":
        return "\u{1F7E2}" /* ACTIVE */;
      case "\u{1F7E1}":
        return "\u{1F7E1}" /* PAUSED */;
      case "\u{1F534}":
        return "\u{1F534}" /* STOPPED */;
      case "\u{1F535}":
        return "\u{1F535}" /* ARCHIVED */;
      default:
        return "" /* UNKNOWN */;
    }
  }
  /**
   * Extrae metadatos específicos según el tipo de entidad
   */
  extractSpecificMetadata(entityType, metadata) {
    const result = {};
    switch (entityType) {
      case "AV" /* AREA_VIDA */:
        result.trimestre = metadata.trimestre || "";
        break;
      case "AI" /* AREA_INTERES */:
        result.nivelAI = metadata.nivelAI || 0;
        break;
      case "PQ" /* PROYECTO_Q */:
        result.trimestres = this.normalizeArrayField(metadata.trimestre);
        break;
      case "PGTD" /* PROYECTO_GTD */:
        result.nivelP = metadata.nivelP || 0;
        break;
      case "Cp" /* CAMPANA */:
        result.indicadores = metadata.indicadores || "";
        break;
      case "EMkt" /* ENTREGABLE */:
        result.tipo = metadata.tipo || "";
        result.canales = this.normalizeArrayField(metadata.canales);
        result.estadoE = metadata.estadoE || "";
        result.prioridad = metadata.prioridad || "";
        result.publicacion = metadata.publicacion || "";
        result.urlCanva = metadata.urlCanva || "";
        result.hits = metadata.hits || 0;
        break;
    }
    return result;
  }
  /**
   * Extrae las relaciones jerárquicas de los metadatos
   */
  extractHierarchicalRelations(entity, metadata) {
    if (metadata.areaVida) {
      entity.areaVida = this.normalizeField(metadata.areaVida);
    }
    if (metadata.areaInteres) {
      entity.areaInteres = this.normalizeField(metadata.areaInteres);
    }
    if (metadata.proyectoQ) {
      entity.proyectoQ = this.normalizeField(metadata.proyectoQ);
    }
    if (metadata.proyectoGTD) {
      entity.proyectoGTD = this.normalizeField(metadata.proyectoGTD);
    }
    if (metadata.asunto) {
      entity.metadata.asunto = this.normalizeField(metadata.asunto);
    }
  }
  /**
   * Normaliza un campo que puede ser un string o un array
   */
  normalizeField(field) {
    if (Array.isArray(field)) {
      return field.map((item) => this.normalizeWikiLink(item));
    } else if (field) {
      return this.normalizeWikiLink(field);
    }
    return "";
  }
  /**
   * Normaliza un campo que debería ser un array
   */
  normalizeArrayField(field) {
    if (Array.isArray(field)) {
      return field.map((item) => this.normalizeWikiLink(item));
    } else if (field) {
      return [this.normalizeWikiLink(field)];
    }
    return [];
  }
  /**
   * Normaliza un WikiLink ([[texto|alias]]) extrayendo su contenido
   */
  normalizeWikiLink(text) {
    if (typeof text !== "string") {
      return String(text);
    }
    const wikiLinkRegex = /\[\[(.*?)(?:\|(.*?))?\]\]/;
    const match2 = text.match(wikiLinkRegex);
    if (match2) {
      return match2[1];
    }
    return text;
  }
  /**
   * Crea una entidad genérica cuando no se puede determinar el tipo
   */
  createGenericEntity(file) {
    return createEntity(
      "UNKNOWN" /* UNKNOWN */,
      file.basename,
      file.basename,
      "",
      file,
      "" /* UNKNOWN */
    );
  }
};

// src/modules/taskNavigator/services/TaskParser.ts
var import_obsidian83 = require("obsidian");
var TaskParser = class {
  /**
   * Extrae todas las tareas de un archivo
   */
  async extractTasksFromFile(file) {
    try {
      const content = await this.readFile(file);
      const lines = content.split("\n");
      const tasks = [];
      for (let i = 0; i < lines.length; i++) {
        const line = lines[i];
        const lineNumber = i + 1;
        const task = this.parseTaskLine(line, lineNumber, file);
        if (task) {
          tasks.push(task);
        }
      }
      return tasks;
    } catch (error) {
      console.error(`Error al extraer tareas del archivo ${file.path}:`, error);
      return [];
    }
  }
  /**
   * Lee el contenido de un archivo
   */
  async readFile(file) {
    try {
      return await app.vault.read(file);
    } catch (error) {
      console.error(`Error al leer el archivo ${file.path}:`, error);
      throw error;
    }
  }
  /**
   * Analiza una línea para determinar si contiene una tarea
   */
  parseTaskLine(line, lineNumber, file) {
    const taskRegex = /^(\s*)-\s*\[([ xX/])\]\s*(.+)$/;
    const match2 = line.match(taskRegex);
    if (!match2) {
      return null;
    }
    const indentation = match2[1].length;
    const isCompleted = match2[2] !== " ";
    const taskText = match2[3];
    const lineInfo = {
      number: lineNumber,
      text: line,
      indentation
    };
    const taskId = this.extractTaskId(taskText) || this.generateTaskId(file.basename, lineNumber);
    const task = new Task3(
      taskId,
      this.cleanTaskText(taskText),
      taskText,
      isCompleted,
      file,
      lineInfo
    );
    this.extractTaskMetadata(task);
    return task;
  }
  /**
   * Limpia el texto de la tarea eliminando metadatos y tags
   */
  cleanTaskText(text) {
    let cleanText = text.replace(/🆔\s+\w+/g, "").trim();
    cleanText = cleanText.replace(/#[a-zA-Z0-9_-]+/g, "").trim();
    cleanText = cleanText.replace(/[📅⏳🛫]\s*\d{4}-\d{2}-\d{2}/g, "").trim();
    cleanText = cleanText.replace(/⛔\s*\w+/g, "").trim();
    cleanText = cleanText.replace(/\[([^\]]+)\]/g, "").trim();
    cleanText = cleanText.replace(/[⏫🔼🔽⏬]/g, "").trim();
    cleanText = cleanText.replace(/\s+/g, " ").trim();
    return cleanText;
  }
  /**
   * Extrae y procesa los metadatos de la tarea
   */
  extractTaskMetadata(task) {
    const text = task.rawText;
    this.extractPriority(task, text);
    this.extractDates(task, text);
    this.extractTags(task, text);
    this.extractDependencies(task, text);
  }
  /**
   * Extrae la prioridad de la tarea
   */
  extractPriority(task, text) {
    if (text.includes("\u23EB")) {
      task.priority = "highest" /* HIGHEST */;
    } else if (text.includes("\u{1F53C}")) {
      task.priority = "high" /* HIGH */;
    } else if (text.includes("\u{1F53D}")) {
      task.priority = "low" /* LOW */;
    } else if (text.includes("\u23EC")) {
      task.priority = "lowest" /* LOWEST */;
    } else {
      task.priority = "normal" /* NORMAL */;
    }
  }
  /**
   * Extrae las fechas y horarios de la tarea
   */
  extractDates(task, text) {
    const startDateRegex = /🛫\s*(\d{4}-\d{2}-\d{2})/;
    const startDateMatch = text.match(startDateRegex);
    if (startDateMatch) {
      task.timing.startDate = startDateMatch[1];
    }
    const dueDateRegex = /📅\s*(\d{4}-\d{2}-\d{2})/;
    const dueDateMatch = text.match(dueDateRegex);
    if (dueDateMatch) {
      task.timing.dueDate = dueDateMatch[1];
    }
    const scheduledDateRegex = /⏳\s*(\d{4}-\d{2}-\d{2})/;
    const scheduledDateMatch = text.match(scheduledDateRegex);
    if (scheduledDateMatch) {
      task.timing.scheduledDate = scheduledDateMatch[1];
    }
    const startTimeRegex = /\[hI::\s*([^\]]+)\]/;
    const startTimeMatch = text.match(startTimeRegex);
    if (startTimeMatch) {
      task.timing.startTime = startTimeMatch[1];
    }
    const endTimeRegex = /\[hF::\s*([^\]]+)\]/;
    const endTimeMatch = text.match(endTimeRegex);
    if (endTimeMatch) {
      task.timing.endTime = endTimeMatch[1];
    }
    const durationMinRegex = /\[(\d+)min\]/;
    const durationMinMatch = text.match(durationMinRegex);
    if (durationMinMatch) {
      task.timing.duration = parseInt(durationMinMatch[1]);
    }
    const durationHourRegex = /\[(\d+(?:\.\d+)?)h\]/;
    const durationHourMatch = text.match(durationHourRegex);
    if (durationHourMatch) {
      task.timing.duration = Math.round(parseFloat(durationHourMatch[1]) * 60);
    }
    const weekRegex = /\[w::\s*\[\[([^\]]+)\]\]\]/;
    const weekMatch = text.match(weekRegex);
    if (weekMatch) {
      task.timing.week = weekMatch[1];
    }
  }
  /**
   * Extrae todas las etiquetas de la tarea
   */
  /**
   * Extrae todas las etiquetas de la tarea
   */
  extractTags(task, text) {
    task.tags.contexts = [];
    task.tags.people = [];
    task.tags.gtdTags = [];
    task.tags.otherTags = [];
    task.tags.all = [];
    const tagRegex = /#([a-zA-Z0-9_-]+)/g;
    let tagMatch;
    while ((tagMatch = tagRegex.exec(text)) !== null) {
      const tag = tagMatch[1];
      task.tags.all.push(tag);
      if (tag.startsWith("cx-")) {
        task.tags.contexts.push(tag);
      } else if (tag.startsWith("px-")) {
        task.tags.people.push(tag);
      } else if (tag.startsWith("GTD-")) {
        task.tags.gtdTags.push(tag);
      } else {
        task.tags.otherTags.push(tag);
      }
    }
  }
  /**
   * Extrae las dependencias de la tarea
   */
  extractDependencies(task, text) {
    const dependencyRegex = /⛔\s*(\w+)/g;
    let dependencyMatch;
    while ((dependencyMatch = dependencyRegex.exec(text)) !== null) {
      const dependencyId = dependencyMatch[1];
      task.dependencies.push(dependencyId);
    }
  }
  /**
   * Extrae el ID de la tarea del texto si existe
   */
  extractTaskId(text) {
    const idRegex = /🆔\s*(\w+)/;
    const idMatch = text.match(idRegex);
    if (idMatch) {
      return idMatch[1];
    }
    return null;
  }
  /**
   * Genera un ID único para la tarea si no tiene uno explícito
   */
  generateTaskId(filePrefix, lineNumber) {
    const timestamp = Date.now().toString(36);
    const random = Math.random().toString(36).substr(2, 5);
    return `${filePrefix.substring(0, 3)}${lineNumber}${timestamp.substring(timestamp.length - 4)}${random}`.toUpperCase();
  }
};

// src/modules/taskNavigator/models/HierarchyViewModel.ts
var HierarchyViewModel = class {
  constructor() {
    // Entidad en foco (la nota activa actual)
    this.focusEntity = null;
    // Entidades raíz para la jerarquía
    this.rootEntities = [];
    // Todas las entidades disponibles
    this.allEntities = [];
    // Todas las tareas clasificadas por tipo de lista GTD
    this.gtdLists = /* @__PURE__ */ new Map();
    // Todas las tareas sin clasificar
    this.allTasks = [];
    // Modo de visualización actual
    this.viewMode = "hierarchy" /* HIERARCHY */;
    // Resultados filtrados (para mostrar)
    this.filteredEntities = [];
    this.filteredTasks = /* @__PURE__ */ new Map();
    this.filters = {
      showCompleted: false,
      showActive: true,
      showPaused: true,
      showStopped: false,
      showArchived: false,
      showAreasVida: true,
      showAreasInteres: true,
      showProyectosQ: true,
      showProyectosGTD: true,
      showOtherEntities: true,
      contexts: [],
      people: [],
      enabledLists: Object.values(TaskListType),
      searchText: "",
      daysRange: 7
    };
  }
  /**
   * Aplica los filtros seleccionados a las entidades y tareas
   */
  applyFilters(filters) {
    this.filters = { ...this.filters, ...filters };
    this.filteredEntities = this.filterEntities(this.rootEntities);
    this.filteredTasks = /* @__PURE__ */ new Map();
    for (const listType of Object.values(TaskListType)) {
      const tasks = this.gtdLists.get(listType) || [];
      const filteredTasks = this.filterTasks(tasks);
      if (this.filters.enabledLists.includes(listType)) {
        this.filteredTasks.set(listType, filteredTasks);
      }
    }
  }
  /**
   * Filtra un conjunto de entidades y sus hijos recursivamente
   */
  filterEntities(entities) {
    const result = [];
    for (const entity of entities) {
      if (!this.isEntityTypeEnabled(entity.type)) {
        continue;
      }
      if (!this.isEntityStateEnabled(entity.state)) {
        continue;
      }
      if (this.filters.searchText && !this.matchesSearchText(entity)) {
        continue;
      }
      const filteredEntity = { ...entity };
      filteredEntity.children = this.filterEntities(entity.children);
      filteredEntity.tasks = this.filterTasks(entity.tasks);
      if (filteredEntity.children.length > 0 || filteredEntity.tasks.length > 0 || entity === this.focusEntity) {
        result.push(filteredEntity);
      }
    }
    return result;
  }
  /**
   * Filtra un conjunto de tareas según los criterios
   */
  filterTasks(tasks) {
    return tasks.filter((task) => {
      if (task.completed && !this.filters.showCompleted) {
        return false;
      }
      if (this.filters.searchText && !this.taskMatchesSearchText(task)) {
        return false;
      }
      if (this.filters.contexts.length > 0) {
        const hasMatchingContext = this.filters.contexts.some((ctx) => task.tags.contexts.includes(ctx));
        if (!hasMatchingContext) {
          return false;
        }
      }
      if (this.filters.people.length > 0) {
        const hasMatchingPerson = this.filters.people.some((person) => task.tags.people.includes(person));
        if (!hasMatchingPerson) {
          return false;
        }
      }
      if (task.timing.dueDate || task.timing.scheduledDate) {
        const daysUntilDue = task.getDaysUntilDue();
        if (daysUntilDue !== null && Math.abs(daysUntilDue) > this.filters.daysRange) {
          return false;
        }
      }
      return true;
    });
  }
  /**
   * Comprueba si el tipo de entidad está habilitado en los filtros
   */
  isEntityTypeEnabled(type2) {
    switch (type2) {
      case "AV" /* AREA_VIDA */:
        return this.filters.showAreasVida;
      case "AI" /* AREA_INTERES */:
        return this.filters.showAreasInteres;
      case "PQ" /* PROYECTO_Q */:
        return this.filters.showProyectosQ;
      case "PGTD" /* PROYECTO_GTD */:
        return this.filters.showProyectosGTD;
      default:
        return this.filters.showOtherEntities;
    }
  }
  /**
   * Comprueba si el estado de la entidad está habilitado en los filtros
   */
  isEntityStateEnabled(state) {
    switch (state) {
      case "\u{1F7E2}":
        return this.filters.showActive;
      case "\u{1F7E1}":
        return this.filters.showPaused;
      case "\u{1F534}":
        return this.filters.showStopped;
      case "\u{1F535}":
        return this.filters.showArchived;
      default:
        return true;
    }
  }
  /**
   * Comprueba si la entidad coincide con el texto de búsqueda
   */
  matchesSearchText(entity) {
    const searchText = this.filters.searchText.toLowerCase();
    return entity.title.toLowerCase().includes(searchText) || entity.description.toLowerCase().includes(searchText);
  }
  /**
   * Comprueba si la tarea coincide con el texto de búsqueda
   */
  taskMatchesSearchText(task) {
    const searchText = this.filters.searchText.toLowerCase();
    return task.text.toLowerCase().includes(searchText);
  }
};

// src/modules/taskNavigator/services/TaskHierarchyBuilder.ts
var TaskHierarchyBuilder = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.entityDetector = new EntityDetector(plugin);
    this.taskParser = new TaskParser();
  }
  /**
   * Construye la jerarquía completa de entidades y tareas
   * @param focusEntity Entidad en la que centrar la jerarquía (opcional)
   */
  async buildHierarchy(focusEntity = null) {
    const model = new HierarchyViewModel();
    try {
      model.focusEntity = focusEntity;
      const entities = await this.collectAllEntities();
      model.allEntities = entities;
      this.buildEntityRelationships(entities);
      model.rootEntities = this.determineRootEntities(entities, focusEntity);
      await this.extractAndAssignTasks(entities);
      return model;
    } catch (error) {
      console.error("Error al construir la jerarqu\xEDa:", error);
      throw error;
    }
  }
  /**
   * Recopila todas las entidades del sistema
   */
  async collectAllEntities() {
    const entities = [];
    const files = this.plugin.app.vault.getMarkdownFiles();
    for (const file of files) {
      try {
        const entity = await this.entityDetector.detectEntityFromFile(file);
        if (entity) {
          entities.push(entity);
        }
      } catch (error) {
        console.error(`Error al procesar archivo ${file.path}:`, error);
      }
    }
    return entities;
  }
  /**
   * Construye las relaciones entre entidades
   */
  buildEntityRelationships(entities) {
    const entityMap = /* @__PURE__ */ new Map();
    for (const entity of entities) {
      entityMap.set(entity.file.path, entity);
    }
    for (const entity of entities) {
      this.establishEntityRelationships(entity, entityMap);
    }
  }
  /**
   * Establece las relaciones de una entidad con otras
   */
  establishEntityRelationships(entity, entityMap) {
    var _a;
    if ((_a = entity.metadata) == null ? void 0 : _a.asunto) {
      const asunto = entity.metadata.asunto;
      let parentEntity = null;
      if (Array.isArray(asunto)) {
        if (asunto.length > 0) {
          parentEntity = this.findEntityByPathOrName(asunto[0], entityMap);
        }
      } else {
        parentEntity = this.findEntityByPathOrName(asunto, entityMap);
      }
      if (parentEntity) {
        parentEntity.addChild(entity);
      }
    } else {
      if (entity.proyectoGTD) {
        const parentEntities = this.findEntitiesByPathOrName(entity.proyectoGTD, entityMap, "PGTD" /* PROYECTO_GTD */);
        for (const parentEntity of parentEntities) {
          if (parentEntity && parentEntity !== entity) {
            parentEntity.addChild(entity);
          }
        }
      }
      if (entity.proyectoQ && !entity.parent) {
        const parentEntities = this.findEntitiesByPathOrName(entity.proyectoQ, entityMap, "PQ" /* PROYECTO_Q */);
        for (const parentEntity of parentEntities) {
          if (parentEntity && parentEntity !== entity && !entity.parent) {
            parentEntity.addChild(entity);
          }
        }
      }
      if (entity.areaInteres && !entity.parent) {
        const parentEntities = this.findEntitiesByPathOrName(entity.areaInteres, entityMap, "AI" /* AREA_INTERES */);
        for (const parentEntity of parentEntities) {
          if (parentEntity && parentEntity !== entity && !entity.parent) {
            parentEntity.addChild(entity);
          }
        }
      }
      if (entity.areaVida && !entity.parent) {
        const parentEntities = this.findEntitiesByPathOrName(entity.areaVida, entityMap, "AV" /* AREA_VIDA */);
        for (const parentEntity of parentEntities) {
          if (parentEntity && parentEntity !== entity && !entity.parent) {
            parentEntity.addChild(entity);
          }
        }
      }
    }
  }
  /**
   * Busca una entidad por su ruta o nombre
   */
  findEntityByPathOrName(pathOrName, entityMap) {
    var _a;
    if (entityMap.has(pathOrName)) {
      return entityMap.get(pathOrName);
    }
    if (entityMap.has(pathOrName + ".md")) {
      return entityMap.get(pathOrName + ".md");
    }
    for (const entity of entityMap.values()) {
      if (entity.file.basename === pathOrName || entity.title === pathOrName) {
        return entity;
      }
      if ((_a = entity.metadata) == null ? void 0 : _a.aliases) {
        const aliases = Array.isArray(entity.metadata.aliases) ? entity.metadata.aliases : [entity.metadata.aliases];
        if (aliases.includes(pathOrName)) {
          return entity;
        }
      }
    }
    return null;
  }
  /**
   * Busca entidades por su ruta o nombre, compatible con arrays
   */
  findEntitiesByPathOrName(pathsOrNames, entityMap, requiredType) {
    const result = [];
    const searchValues = Array.isArray(pathsOrNames) ? pathsOrNames : [pathsOrNames];
    for (const value of searchValues) {
      const entity = this.findEntityByPathOrName(value, entityMap);
      if (entity && (!requiredType || entity.type === requiredType)) {
        result.push(entity);
      }
    }
    return result;
  }
  /**
   * Determina las entidades raíz según la entidad de enfoque
   */
  determineRootEntities(entities, focusEntity) {
    if (!focusEntity) {
      return entities.filter((entity) => !entity.parent);
    }
    const rootEntities = [];
    rootEntities.push(focusEntity);
    if (focusEntity.parent) {
      const siblings = entities.filter((entity) => entity !== focusEntity && entity.parent === focusEntity.parent);
    }
    return rootEntities;
  }
  /**
   * Extrae y asigna tareas a cada entidad
   */
  async extractAndAssignTasks(entities) {
    for (const entity of entities) {
      try {
        const tasks = await this.taskParser.extractTasksFromFile(entity.file);
        for (const task of tasks) {
          entity.addTask(task);
        }
      } catch (error) {
        console.error(`Error al extraer tareas para ${entity.file.path}:`, error);
      }
    }
  }
};

// src/modules/taskNavigator/services/TaskClassifier.ts
var TaskClassifier = class {
  /**
   * Clasifica todas las tareas en el modelo jerárquico
   */
  async classifyTasks(model) {
    try {
      this.initializeGTDLists(model);
      const allTasks = this.getAllTasks(model);
      model.allTasks = allTasks;
      for (const task of allTasks) {
        if (task.completed) {
          continue;
        }
        const listType = this.determineTaskList(task, allTasks);
        task.listType = listType;
        const tasksInList = model.gtdLists.get(listType) || [];
        tasksInList.push(task);
        model.gtdLists.set(listType, tasksInList);
      }
      model.filteredTasks = new Map(model.gtdLists);
    } catch (error) {
      console.error("Error al clasificar tareas:", error);
      throw error;
    }
  }
  /**
   * Inicializa las listas GTD vacías
   */
  initializeGTDLists(model) {
    model.gtdLists.clear();
    for (const listType of Object.values(TaskListType)) {
      model.gtdLists.set(listType, []);
    }
  }
  /**
   * Obtiene todas las tareas del modelo jerárquico
   */
  getAllTasks(model) {
    const allTasks = [];
    const processEntity = (entity) => {
      allTasks.push(...entity.tasks);
      for (const child of entity.children) {
        processEntity(child);
      }
    };
    for (const rootEntity of model.rootEntities) {
      processEntity(rootEntity);
    }
    return allTasks;
  }
  /**
   * Determina a qué lista GTD pertenece una tarea
   */
  determineTaskList(task, allTasks) {
    if (task.hasGTDTag("AlgunDia")) {
      return "somedayMaybe" /* SOMEDAY_MAYBE */;
    }
    if (task.hasGTDTag("EstaSemanaNo")) {
      return "notThisWeek" /* NOT_THIS_WEEK */;
    }
    if (task.hasContext("ProyectoGTD") || task.hasContext("Entregable")) {
      return "projects" /* PROJECTS */;
    }
    if (task.timing.dueDate && task.timing.startTime) {
      return "calendar" /* CALENDAR */;
    }
    if (this.isTaskWaiting(task, allTasks)) {
      return "waiting" /* WAITING */;
    }
    if (this.isTaskForToday(task)) {
      return "hopefullyToday" /* HOPEFULLY_TODAY */;
    }
    if (task.tags.people.length > 0 && task.tags.contexts.length === 0) {
      return "assigned" /* ASSIGNED */;
    }
    if (task.tags.contexts.length > 0) {
      return "nextActions" /* NEXT_ACTIONS */;
    }
    return "inbox" /* INBOX */;
  }
  /**
   * Determina si una tarea está en pausa (en espera)
   */
  isTaskWaiting(task, allTasks) {
    if (task.timing.startDate) {
      const startDate = new Date(task.timing.startDate);
      const today = /* @__PURE__ */ new Date();
      today.setHours(0, 0, 0, 0);
      if (startDate > today) {
        task.isBlocked = true;
        task.blockReason = `Esperando hasta ${task.timing.startDate}`;
        return true;
      }
    }
    if (task.dependencies.length > 0) {
      const incompleteDependencies = task.dependencies.filter((depId) => {
        const dependencyTask = allTasks.find((t) => t.taskId === depId || t.id === depId);
        return dependencyTask && !dependencyTask.completed;
      });
      if (incompleteDependencies.length > 0) {
        task.isBlocked = true;
        task.blockReason = `Esperando a que se completen ${incompleteDependencies.length} tareas dependientes`;
        return true;
      }
    }
    if (task.timing.week) {
      const weekRegex = /(\d{4})-W(\d{2})/;
      const match2 = task.timing.week.match(weekRegex);
      if (match2) {
        const year = parseInt(match2[1]);
        const week = parseInt(match2[2]);
        const today = /* @__PURE__ */ new Date();
        const currentYear = today.getFullYear();
        const currentWeek = this.getWeekNumber(today);
        if (year > currentYear || year === currentYear && week > currentWeek) {
          task.isBlocked = true;
          task.blockReason = `Programado para la semana ${task.timing.week}`;
          return true;
        }
      }
    }
    return false;
  }
  /**
   * Determina si una tarea es para "Ojalá Hoy"
   */
  isTaskForToday(task) {
    const today = /* @__PURE__ */ new Date();
    today.setHours(0, 0, 0, 0);
    const todayStr = today.toISOString().split("T")[0];
    if ((task.timing.dueDate === todayStr || task.timing.scheduledDate === todayStr) && !task.timing.startTime) {
      return true;
    }
    return false;
  }
  /**
   * Obtiene el número de semana del año de una fecha
   */
  getWeekNumber(date) {
    const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
    const pastDaysOfYear = (date.getTime() - firstDayOfYear.getTime()) / 864e5;
    return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);
  }
};

// src/modules/taskNavigator/components/FilterPanel.ts
var FilterPanel = class {
  constructor(onApplyFilters) {
    this.containerShown = true;
    this.onApplyFilters = onApplyFilters;
    this.currentFilters = {
      showCompleted: false,
      showActive: true,
      showPaused: true,
      showStopped: false,
      showArchived: false,
      showAreasVida: true,
      showAreasInteres: true,
      showProyectosQ: true,
      showProyectosGTD: true,
      showOtherEntities: true,
      contexts: [],
      people: [],
      enabledLists: Object.values(TaskListType),
      searchText: "",
      daysRange: 7
    };
  }
  /**
   * Renderiza el panel de filtros en el contenedor proporcionado
   */
  render(container) {
    this.container = container;
    const filterPanel = container.createDiv({ cls: "task-navigator-filter-panel" });
    const header = filterPanel.createDiv({ cls: "filter-panel-header" });
    header.createEl("h3", { text: "Filtros", cls: "filter-panel-title" });
    const toggleButton = header.createDiv({ cls: "filter-panel-toggle" });
    toggleButton.innerHTML = this.containerShown ? "\u25BC" : "\u25B6";
    toggleButton.addEventListener("click", () => this.togglePanel(toggleButton));
    const content = filterPanel.createDiv({ cls: "filter-panel-content" });
    if (!this.containerShown) {
      content.style.display = "none";
    }
    this.createSearchSection(content);
    this.createEntityStateSection(content);
    this.createEntityTypeSection(content);
    this.createGTDListsSection(content);
    this.createContextsSection(content);
    this.createPeopleSection(content);
    this.createDateRangeSection(content);
    const actionsDiv = content.createDiv({ cls: "filter-panel-actions" });
    const applyButton = actionsDiv.createEl("button", {
      text: "Aplicar Filtros",
      cls: "filter-apply-button"
    });
    applyButton.addEventListener("click", () => this.applyFilters());
    const resetButton = actionsDiv.createEl("button", {
      text: "Restablecer",
      cls: "filter-reset-button"
    });
    resetButton.addEventListener("click", () => this.resetFilters());
  }
  /**
   * Cambia la visibilidad del panel de filtros
   */
  togglePanel(toggleButton) {
    this.containerShown = !this.containerShown;
    const content = this.container.querySelector(".filter-panel-content");
    if (this.containerShown) {
      content.style.display = "block";
      toggleButton.innerHTML = "\u25BC";
    } else {
      content.style.display = "none";
      toggleButton.innerHTML = "\u25B6";
    }
  }
  /**
   * Crea la sección de búsqueda de texto
   */
  createSearchSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "B\xFAsqueda", cls: "filter-section-title" });
    const searchInput = section.createEl("input", {
      type: "text",
      placeholder: "Buscar tareas o entidades...",
      cls: "filter-search-input"
    });
    searchInput.value = this.currentFilters.searchText;
    searchInput.addEventListener("input", (e) => {
      this.currentFilters.searchText = e.target.value;
    });
  }
  /**
   * Crea la sección de filtros por estado de entidad
   */
  createEntityStateSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Estados", cls: "filter-section-title" });
    this.createCheckbox(section, "showActive", "\u{1F7E2} Activo", this.currentFilters.showActive);
    this.createCheckbox(section, "showPaused", "\u{1F7E1} En Pausa", this.currentFilters.showPaused);
    this.createCheckbox(section, "showStopped", "\u{1F534} Detenido", this.currentFilters.showStopped);
    this.createCheckbox(section, "showArchived", "\u{1F535} Archivado", this.currentFilters.showArchived);
    this.createCheckbox(section, "showCompleted", "\u2705 Tareas Completadas", this.currentFilters.showCompleted);
  }
  /**
   * Crea la sección de filtros por tipo de entidad
   */
  createEntityTypeSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Tipos de Entidad", cls: "filter-section-title" });
    this.createCheckbox(section, "showAreasVida", "\xC1reas de Vida", this.currentFilters.showAreasVida);
    this.createCheckbox(section, "showAreasInteres", "\xC1reas de Inter\xE9s", this.currentFilters.showAreasInteres);
    this.createCheckbox(section, "showProyectosQ", "Proyectos Q", this.currentFilters.showProyectosQ);
    this.createCheckbox(section, "showProyectosGTD", "Proyectos GTD", this.currentFilters.showProyectosGTD);
    this.createCheckbox(section, "showOtherEntities", "Otras Entidades", this.currentFilters.showOtherEntities);
  }
  /**
   * Crea la sección de filtros por listas GTD
   */
  createGTDListsSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Listas GTD", cls: "filter-section-title" });
    const listLabels = {
      ["inbox" /* INBOX */]: "Bandeja de Entrada",
      ["nextActions" /* NEXT_ACTIONS */]: "Pr\xF3ximas Acciones",
      ["calendar" /* CALENDAR */]: "Calendario",
      ["hopefullyToday" /* HOPEFULLY_TODAY */]: "Ojal\xE1 Hoy",
      ["assigned" /* ASSIGNED */]: "Asignadas",
      ["projects" /* PROJECTS */]: "Proyectos",
      ["somedayMaybe" /* SOMEDAY_MAYBE */]: "Alg\xFAn D\xEDa / Tal Vez",
      ["notThisWeek" /* NOT_THIS_WEEK */]: "Esta Semana No",
      ["waiting" /* WAITING */]: "En Pausa"
    };
    for (const listType of Object.values(TaskListType)) {
      const isEnabled = this.currentFilters.enabledLists.includes(listType);
      const checkboxDiv = section.createDiv({ cls: "filter-checkbox-container" });
      const checkbox = checkboxDiv.createEl("input", {
        type: "checkbox",
        cls: "filter-checkbox"
      });
      checkbox.id = `list-${listType}`;
      checkbox.checked = isEnabled;
      checkbox.addEventListener("change", (e) => {
        const checked = e.target.checked;
        if (checked) {
          if (!this.currentFilters.enabledLists.includes(listType)) {
            this.currentFilters.enabledLists.push(listType);
          }
        } else {
          this.currentFilters.enabledLists = this.currentFilters.enabledLists.filter(
            (type2) => type2 !== listType
          );
        }
      });
      const label = checkboxDiv.createEl("label", {
        text: listLabels[listType] || listType,
        cls: "filter-checkbox-label"
      });
      label.htmlFor = checkbox.id;
    }
  }
  /**
   * Crea la sección de filtros por contextos
   */
  createContextsSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Contextos (#cx)", cls: "filter-section-title" });
    const contextInput = section.createEl("input", {
      type: "text",
      placeholder: "A\xF1adir contexto (cx-nombre)",
      cls: "filter-text-input"
    });
    const addButton = section.createEl("button", {
      text: "A\xF1adir",
      cls: "filter-add-button"
    });
    addButton.addEventListener("click", () => {
      const context = contextInput.value.trim();
      if (context && !this.currentFilters.contexts.includes(context)) {
        const formattedContext = context.startsWith("cx-") ? context : `cx-${context}`;
        this.currentFilters.contexts.push(formattedContext);
        this.updateContextTags(section);
        contextInput.value = "";
      }
    });
    contextInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addButton.click();
      }
    });
    const contextTags = section.createDiv({ cls: "filter-tags-container" });
    this.updateContextTags = (parent) => {
      const container2 = parent.querySelector(".filter-tags-container");
      container2.empty();
      for (const context of this.currentFilters.contexts) {
        const tag = container2.createDiv({ cls: "filter-tag" });
        tag.createSpan({ text: context });
        const removeButton = tag.createSpan({ cls: "filter-tag-remove", text: "\xD7" });
        removeButton.addEventListener("click", () => {
          this.currentFilters.contexts = this.currentFilters.contexts.filter((c) => c !== context);
          this.updateContextTags(parent);
        });
      }
    };
    this.updateContextTags(section);
  }
  /**
   * Crea la sección de filtros por personas asignadas
   */
  createPeopleSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Personas (#px)", cls: "filter-section-title" });
    const personInput = section.createEl("input", {
      type: "text",
      placeholder: "A\xF1adir persona (px-nombre)",
      cls: "filter-text-input"
    });
    const addButton = section.createEl("button", {
      text: "A\xF1adir",
      cls: "filter-add-button"
    });
    addButton.addEventListener("click", () => {
      const person = personInput.value.trim();
      if (person && !this.currentFilters.people.includes(person)) {
        const formattedPerson = person.startsWith("px-") ? person : `px-${person}`;
        this.currentFilters.people.push(formattedPerson);
        this.updatePeopleTags(section);
        personInput.value = "";
      }
    });
    personInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        addButton.click();
      }
    });
    const peopleTags = section.createDiv({ cls: "filter-tags-container" });
    this.updatePeopleTags = (parent) => {
      const container2 = parent.querySelector(".filter-tags-container");
      container2.empty();
      for (const person of this.currentFilters.people) {
        const tag = container2.createDiv({ cls: "filter-tag" });
        tag.createSpan({ text: person });
        const removeButton = tag.createSpan({ cls: "filter-tag-remove", text: "\xD7" });
        removeButton.addEventListener("click", () => {
          this.currentFilters.people = this.currentFilters.people.filter((p) => p !== person);
          this.updatePeopleTags(parent);
        });
      }
    };
    this.updatePeopleTags(section);
  }
  /**
   * Crea la sección de filtros por rango de fechas
   */
  createDateRangeSection(container) {
    const section = container.createDiv({ cls: "filter-section" });
    section.createEl("h4", { text: "Rango de D\xEDas", cls: "filter-section-title" });
    const sliderContainer = section.createDiv({ cls: "filter-slider-container" });
    const slider = sliderContainer.createEl("input", {
      type: "range",
      cls: "filter-slider",
      attr: {
        min: "1",
        max: "30",
        step: "1",
        value: this.currentFilters.daysRange.toString()
      }
    });
    const valueDisplay = sliderContainer.createDiv({ cls: "filter-slider-value" });
    valueDisplay.textContent = `${this.currentFilters.daysRange} d\xEDas`;
    slider.addEventListener("input", (e) => {
      const value = parseInt(e.target.value);
      this.currentFilters.daysRange = value;
      valueDisplay.textContent = `${value} d\xEDas`;
    });
  }
  /**
   * Crea un checkbox con etiqueta
   */
  createCheckbox(container, filterKey, label, isChecked) {
    const checkboxDiv = container.createDiv({ cls: "filter-checkbox-container" });
    const checkbox = checkboxDiv.createEl("input", {
      type: "checkbox",
      cls: "filter-checkbox"
    });
    checkbox.id = `filter-${filterKey}`;
    checkbox.checked = isChecked;
    checkbox.addEventListener("change", (e) => {
      this.currentFilters[filterKey] = e.target.checked;
    });
    const labelEl = checkboxDiv.createEl("label", {
      text: label,
      cls: "filter-checkbox-label"
    });
    labelEl.htmlFor = checkbox.id;
  }
  /**
   * Aplica los filtros actuales
   */
  applyFilters() {
    this.onApplyFilters({ ...this.currentFilters });
  }
  /**
   * Restablece los filtros a sus valores por defecto
   */
  resetFilters() {
    this.currentFilters = {
      showCompleted: false,
      showActive: true,
      showPaused: true,
      showStopped: false,
      showArchived: false,
      showAreasVida: true,
      showAreasInteres: true,
      showProyectosQ: true,
      showProyectosGTD: true,
      showOtherEntities: true,
      contexts: [],
      people: [],
      enabledLists: Object.values(TaskListType),
      searchText: "",
      daysRange: 7
    };
    this.updateUI();
    this.applyFilters();
  }
  /**
   * Actualiza la UI para reflejar los valores actuales de los filtros
   */
  updateUI() {
    this.updateCheckbox("showActive", this.currentFilters.showActive);
    this.updateCheckbox("showPaused", this.currentFilters.showPaused);
    this.updateCheckbox("showStopped", this.currentFilters.showStopped);
    this.updateCheckbox("showArchived", this.currentFilters.showArchived);
    this.updateCheckbox("showCompleted", this.currentFilters.showCompleted);
    this.updateCheckbox("showAreasVida", this.currentFilters.showAreasVida);
    this.updateCheckbox("showAreasInteres", this.currentFilters.showAreasInteres);
    this.updateCheckbox("showProyectosQ", this.currentFilters.showProyectosQ);
    this.updateCheckbox("showProyectosGTD", this.currentFilters.showProyectosGTD);
    this.updateCheckbox("showOtherEntities", this.currentFilters.showOtherEntities);
    for (const listType of Object.values(TaskListType)) {
      const checkbox = document.getElementById(`list-${listType}`);
      if (checkbox) {
        checkbox.checked = this.currentFilters.enabledLists.includes(listType);
      }
    }
    const searchInput = this.container.querySelector(".filter-search-input");
    if (searchInput) {
      searchInput.value = this.currentFilters.searchText;
    }
    const slider = this.container.querySelector(".filter-slider");
    const valueDisplay = this.container.querySelector(".filter-slider-value");
    if (slider && valueDisplay) {
      slider.value = this.currentFilters.daysRange.toString();
      valueDisplay.textContent = `${this.currentFilters.daysRange} d\xEDas`;
    }
    const contextSection = this.container.querySelectorAll(".filter-section")[5];
    if (contextSection) {
      this.updateContextTags(contextSection);
    }
    const peopleSection = this.container.querySelectorAll(".filter-section")[6];
    if (peopleSection) {
      this.updatePeopleTags(peopleSection);
    }
  }
  /**
   * Actualiza el estado de un checkbox
   */
  updateCheckbox(filterKey, isChecked) {
    const checkbox = document.getElementById(`filter-${filterKey}`);
    if (checkbox) {
      checkbox.checked = isChecked;
    }
  }
};

// src/modules/taskNavigator/utils/NavigationUtils.ts
var import_obsidian85 = require("obsidian");
var NavigationUtils4 = class {
  /**
   * Abre una entidad en una nueva hoja (pestaña)
   */
  openEntityInNewLeaf(file) {
    try {
      app.workspace.getLeaf(true).openFile(file);
    } catch (error) {
      console.error("Error al abrir entidad:", error);
      new Notice(`Error al abrir archivo: ${error.message}`);
    }
  }
  /**
   * Abre una entidad y navega a una tarea específica
   */
  openTaskInEntity(file, lineNumber) {
    try {
      app.workspace.getLeaf(true).openFile(file, {
        eState: { line: lineNumber - 1 }
      }).then(() => {
        this.highlightLine(lineNumber - 1);
      });
    } catch (error) {
      console.error("Error al abrir tarea:", error);
      app.workspace.getLeaf(true).openFile(file).then(() => {
        const view = app.workspace.getActiveViewOfType("markdown");
        if (view && view.editor) {
          view.editor.setCursor({ line: lineNumber - 1, ch: 0 });
          view.editor.scrollIntoView({ from: { line: lineNumber - 1, ch: 0 }, to: { line: lineNumber - 1, ch: 0 } }, true);
          this.highlightLine(lineNumber - 1);
        }
      });
    }
  }
  /**
   * Resalta visualmente una línea en el editor
   */
  highlightLine(lineNumber) {
    setTimeout(() => {
      const view = app.workspace.getActiveViewOfType("markdown");
      if (!view || !view.editor)
        return;
      if (view.editor.cm && view.editor.cm.dom) {
        const lines = view.editor.cm.dom.querySelectorAll(".cm-line");
        if (lines && lines.length > lineNumber) {
          const line = lines[lineNumber];
          line.classList.add("task-highlighted-line");
          setTimeout(() => {
            line.classList.remove("task-highlighted-line");
          }, 2e3);
        }
      } else if (view.editor.lineDiv) {
        const lines = view.editor.lineDiv.querySelectorAll(".CodeMirror-line");
        if (lines && lines.length > lineNumber) {
          const line = lines[lineNumber];
          line.classList.add("task-highlighted-line");
          setTimeout(() => {
            line.classList.remove("task-highlighted-line");
          }, 2e3);
        }
      }
    }, 100);
  }
};

// src/modules/taskNavigator/components/ViewRenderer.ts
var ViewRenderer = class {
  constructor() {
    this.navigationUtils = new NavigationUtils4();
  }
  /**
   * Renderiza la vista completa del navegador de tareas
   */
  render(containerEl, model, filterPanel) {
    containerEl.empty();
    containerEl.addClass("task-navigator-container");
    const header = this.createHeader(containerEl, model);
    const viewOptions = this.createViewOptions(containerEl, model);
    const contentContainer = containerEl.createDiv({ cls: "task-navigator-content" });
    const filterContainer = containerEl.createDiv({ cls: "task-navigator-filter-container" });
    filterPanel.render(filterContainer);
    switch (model.viewMode) {
      case "hierarchy" /* HIERARCHY */:
        this.renderHierarchyView(contentContainer, model);
        break;
      case "gtdLists" /* GTD_LISTS */:
        this.renderGTDListsView(contentContainer, model);
        break;
      case "combined" /* COMBINED */:
        this.renderCombinedView(contentContainer, model);
        break;
    }
  }
  /**
   * Crea el encabezado de la vista
   */
  createHeader(containerEl, model) {
    const header = containerEl.createDiv({ cls: "task-navigator-header" });
    header.createEl("h1", {
      text: "Navegador de Tareas GTD",
      cls: "task-navigator-title"
    });
    const subtitle = header.createEl("div", { cls: "task-navigator-subtitle" });
    if (model.focusEntity) {
      const entityName = model.focusEntity.title;
      const entityType = this.getEntityTypeLabel(model.focusEntity.type);
      subtitle.createSpan({ text: `Contexto: ${entityType} - ${entityName}` });
      const openButton = subtitle.createEl("button", {
        cls: "task-navigator-open-button",
        text: "Abrir"
      });
      openButton.addEventListener("click", () => {
        this.navigationUtils.openEntityInNewLeaf(model.focusEntity.file);
      });
    } else {
      subtitle.createSpan({ text: "Mostrando vista global" });
    }
    const stats = header.createDiv({ cls: "task-navigator-stats" });
    const totalEntities = model.allEntities.length;
    const totalTasks = model.allTasks.length;
    const completedTasks = model.allTasks.filter((task) => task.completed).length;
    const pendingTasks = totalTasks - completedTasks;
    stats.createEl("span", {
      text: `${totalEntities} entidades | ${pendingTasks}/${totalTasks} tareas pendientes`,
      cls: "task-navigator-stats-text"
    });
    const refreshButton = header.createEl("button", {
      cls: "task-navigator-refresh-button",
      text: "Actualizar"
    });
    refreshButton.addEventListener("click", () => {
      containerEl.dispatchEvent(new CustomEvent("task-navigator-refresh"));
    });
    return header;
  }
  /**
   * Crea los botones de opciones de vista
   */
  createViewOptions(containerEl, model) {
    const viewOptions = containerEl.createDiv({ cls: "task-navigator-view-options" });
    const hierarchyButton = viewOptions.createEl("button", {
      cls: `task-navigator-view-button ${model.viewMode === "hierarchy" /* HIERARCHY */ ? "active" : ""}`,
      text: "Vista Jer\xE1rquica"
    });
    hierarchyButton.addEventListener("click", () => {
      containerEl.dispatchEvent(new CustomEvent("task-navigator-view-change", {
        detail: { viewMode: "hierarchy" /* HIERARCHY */ }
      }));
    });
    const gtdListsButton = viewOptions.createEl("button", {
      cls: `task-navigator-view-button ${model.viewMode === "gtdLists" /* GTD_LISTS */ ? "active" : ""}`,
      text: "Listas GTD"
    });
    gtdListsButton.addEventListener("click", () => {
      containerEl.dispatchEvent(new CustomEvent("task-navigator-view-change", {
        detail: { viewMode: "gtdLists" /* GTD_LISTS */ }
      }));
    });
    const combinedButton = viewOptions.createEl("button", {
      cls: `task-navigator-view-button ${model.viewMode === "combined" /* COMBINED */ ? "active" : ""}`,
      text: "Vista Combinada"
    });
    combinedButton.addEventListener("click", () => {
      containerEl.dispatchEvent(new CustomEvent("task-navigator-view-change", {
        detail: { viewMode: "combined" /* COMBINED */ }
      }));
    });
    return viewOptions;
  }
  /**
   * Renderiza la vista jerárquica
   */
  renderHierarchyView(containerEl, model) {
    const hierarchyTree = containerEl.createDiv({ cls: "hierarchy-tree-container" });
    if (model.filteredEntities.length === 0) {
      hierarchyTree.createEl("div", {
        cls: "hierarchy-tree-empty",
        text: "No hay entidades que coincidan con los filtros aplicados."
      });
      return;
    }
    this.renderEntityTree(hierarchyTree, model.filteredEntities, 0);
  }
  /**
   * Renderiza la vista de listas GTD
   */
  renderGTDListsView(containerEl, model) {
    const gtdListsContainer = containerEl.createDiv({ cls: "gtd-lists-container" });
    if (model.filters.enabledLists.length === 0) {
      gtdListsContainer.createEl("div", {
        cls: "gtd-lists-empty",
        text: "No hay listas GTD habilitadas en los filtros."
      });
      return;
    }
    for (const listType of model.filters.enabledLists) {
      const tasks = model.filteredTasks.get(listType) || [];
      this.renderGTDList(gtdListsContainer, listType, tasks);
    }
  }
  /**
   * Renderiza la vista combinada (jerarquía + listas GTD)
   */
  renderCombinedView(containerEl, model) {
    const combinedContainer = containerEl.createDiv({ cls: "combined-view-container" });
    const hierarchyColumn = combinedContainer.createDiv({ cls: "combined-view-column hierarchy-column" });
    hierarchyColumn.createEl("h2", { text: "Jerarqu\xEDa", cls: "combined-view-title" });
    this.renderHierarchyView(hierarchyColumn, model);
    const gtdColumn = combinedContainer.createDiv({ cls: "combined-view-column gtd-column" });
    gtdColumn.createEl("h2", { text: "Listas GTD", cls: "combined-view-title" });
    this.renderGTDListsView(gtdColumn, model);
  }
  /**
   * Renderiza recursivamente el árbol de entidades
   */
  renderEntityTree(container, entities, level) {
    const treeList = container.createEl("ul", { cls: `hierarchy-tree-list level-${level}` });
    for (const entity of entities) {
      const treeItem = treeList.createEl("li", { cls: "hierarchy-tree-item" });
      const header = treeItem.createDiv({ cls: `hierarchy-tree-entity entity-type-${entity.type.toLowerCase()}` });
      const entityInfo = header.createDiv({ cls: "hierarchy-tree-entity-info" });
      const expandIcon = entityInfo.createSpan({ cls: "hierarchy-tree-expand-icon", text: "\u25BC" });
      expandIcon.setAttribute("aria-expanded", "true");
      expandIcon.addEventListener("click", (e) => {
        e.stopPropagation();
        const isExpanded = expandIcon.getAttribute("aria-expanded") === "true";
        expandIcon.setAttribute("aria-expanded", isExpanded ? "false" : "true");
        expandIcon.textContent = isExpanded ? "\u25B6" : "\u25BC";
        const content2 = treeItem.querySelector(".hierarchy-tree-content");
        if (content2) {
          content2.toggleClass("collapsed", !isExpanded);
        }
      });
      if (entity.state) {
        entityInfo.createSpan({
          cls: `entity-state state-${this.getEntityStateClass(entity.state)}`,
          text: entity.state
        });
      }
      entityInfo.createSpan({
        cls: "entity-type",
        text: this.getEntityTypeLabel(entity.type)
      });
      const titleLink = entityInfo.createEl("a", {
        cls: "entity-title",
        text: entity.title
      });
      titleLink.addEventListener("click", () => {
        this.navigationUtils.openEntityInNewLeaf(entity.file);
      });
      const taskCount = entity.tasks.filter((task) => !task.completed).length;
      if (taskCount > 0) {
        entityInfo.createSpan({
          cls: "entity-task-count",
          text: `${taskCount}`
        });
      }
      const content = treeItem.createDiv({ cls: "hierarchy-tree-content" });
      if (entity.tasks.length > 0) {
        this.renderTasksList(content, entity.tasks, entity);
      }
      if (entity.children && entity.children.length > 0) {
        this.renderEntityTree(content, entity.children, level + 1);
      }
    }
  }
  /**
   * Renderiza una lista de tareas para una entidad
   */
  renderTasksList(container, tasks, parentEntity) {
    const tasksContainer = container.createDiv({ cls: "entity-tasks-container" });
    tasksContainer.createEl("h3", {
      cls: "entity-tasks-title",
      text: "Tareas"
    });
    const filteredTasks = tasks.filter((task) => !task.completed);
    if (filteredTasks.length === 0) {
      tasksContainer.createEl("div", {
        cls: "entity-tasks-empty",
        text: "No hay tareas pendientes"
      });
      return;
    }
    const tasksList = tasksContainer.createEl("ul", { cls: "entity-tasks-list" });
    for (const task of filteredTasks) {
      this.renderTaskItem(tasksList, task, parentEntity);
    }
  }
  /**
   * Renderiza un elemento de tarea
   */
  renderTaskItem(container, task, parentEntity) {
    const taskItem = container.createEl("li", {
      cls: `task-item ${task.completed ? "task-completed" : ""} ${task.isBlocked ? "task-blocked" : ""}`
    });
    const taskInfo = taskItem.createDiv({ cls: "task-info" });
    taskInfo.createSpan({
      cls: `task-checkbox ${task.completed ? "checked" : ""}`,
      text: task.completed ? "\u2713" : " "
    });
    if (task.priority !== "normal" /* NORMAL */) {
      taskInfo.createSpan({
        cls: `task-priority priority-${task.priority}`,
        text: this.getPriorityIcon(task.priority)
      });
    }
    const taskText = taskInfo.createSpan({
      cls: "task-text",
      text: task.text
    });
    taskItem.addEventListener("click", () => {
      this.navigationUtils.openTaskInEntity(task.file, task.lineInfo.number);
    });
    if (task.timing.dueDate || task.timing.scheduledDate) {
      const dateClass = task.isOverdue() ? "task-date-overdue" : task.isForToday() ? "task-date-today" : "task-date-future";
      let dateText = "";
      if (task.timing.dueDate) {
        dateText = `\u{1F4C5} ${task.timing.dueDate}`;
      } else if (task.timing.scheduledDate) {
        dateText = `\u23F3 ${task.timing.scheduledDate}`;
      }
      taskInfo.createSpan({
        cls: `task-date ${dateClass}`,
        text: dateText
      });
    }
    const taskMeta = taskItem.createDiv({ cls: "task-meta" });
    if (task.listType) {
      taskMeta.createSpan({
        cls: `task-list-type list-${task.listType}`,
        text: this.getListTypeLabel(task.listType)
      });
    }
    if (task.tags.contexts.length > 0) {
      const contextsContainer = taskMeta.createDiv({ cls: "task-contexts" });
      contextsContainer.createSpan({ cls: "task-meta-label", text: "Contextos:" });
      for (const context of task.tags.contexts) {
        contextsContainer.createSpan({
          cls: "task-context-tag",
          text: context
        });
      }
    }
    if (task.tags.people.length > 0) {
      const peopleContainer = taskMeta.createDiv({ cls: "task-people" });
      peopleContainer.createSpan({ cls: "task-meta-label", text: "Asignada a:" });
      for (const person of task.tags.people) {
        peopleContainer.createSpan({
          cls: "task-person-tag",
          text: person
        });
      }
    }
    if (task.isBlocked && task.blockReason) {
      taskMeta.createDiv({
        cls: "task-block-reason",
        text: task.blockReason
      });
    }
  }
  /**
   * Renderiza una lista GTD
   */
  renderGTDList(container, listType, tasks) {
    const listContainer = container.createDiv({ cls: `gtd-list gtd-list-${listType}` });
    const listHeader = listContainer.createDiv({ cls: "gtd-list-header" });
    listHeader.createEl("h2", {
      cls: "gtd-list-title",
      text: `${this.getListTypeLabel(listType)} (${tasks.length})`
    });
    listHeader.createEl("div", {
      cls: "gtd-list-description",
      text: this.getListTypeDescription(listType)
    });
    if (tasks.length === 0) {
      listContainer.createEl("div", {
        cls: "gtd-list-empty",
        text: "No hay tareas en esta lista"
      });
      return;
    }
    const tasksList = listContainer.createEl("ul", { cls: "gtd-tasks-list" });
    const sortedTasks = this.sortTasksForList(tasks, listType);
    for (const task of sortedTasks) {
      this.renderGTDTaskItem(tasksList, task);
    }
  }
  /**
   * Renderiza un elemento de tarea para una lista GTD
   */
  renderGTDTaskItem(container, task) {
    const taskItem = container.createEl("li", {
      cls: `gtd-task-item ${task.completed ? "task-completed" : ""} ${task.isBlocked ? "task-blocked" : ""}`
    });
    if (task.parentEntity) {
      const entityInfo = taskItem.createDiv({ cls: "gtd-task-entity-info" });
      if (task.parentEntity.state) {
        entityInfo.createSpan({
          cls: `entity-state state-${this.getEntityStateClass(task.parentEntity.state)}`,
          text: task.parentEntity.state
        });
      }
      const entityLink = entityInfo.createEl("a", {
        cls: "entity-link",
        text: `${this.getEntityTypeLabel(task.parentEntity.type)}: ${task.parentEntity.title}`
      });
      entityLink.addEventListener("click", () => {
        this.navigationUtils.openEntityInNewLeaf(task.parentEntity.file);
      });
    }
    const taskInfo = taskItem.createDiv({ cls: "gtd-task-info" });
    taskInfo.createSpan({
      cls: `task-checkbox ${task.completed ? "checked" : ""}`,
      text: task.completed ? "\u2713" : " "
    });
    if (task.priority !== "normal" /* NORMAL */) {
      taskInfo.createSpan({
        cls: `task-priority priority-${task.priority}`,
        text: this.getPriorityIcon(task.priority)
      });
    }
    const taskText = taskInfo.createSpan({
      cls: "task-text",
      text: task.text
    });
    taskItem.addEventListener("click", () => {
      this.navigationUtils.openTaskInEntity(task.file, task.lineInfo.number);
    });
    const timingInfo = taskItem.createDiv({ cls: "gtd-task-timing" });
    if (task.timing.dueDate) {
      const dateClass = task.isOverdue() ? "task-date-overdue" : task.isForToday() ? "task-date-today" : "task-date-future";
      timingInfo.createSpan({
        cls: `task-date ${dateClass}`,
        text: `\u{1F4C5} ${task.timing.dueDate}`
      });
    }
    if (task.timing.scheduledDate && !task.timing.dueDate) {
      const dateClass = task.isOverdue() ? "task-date-overdue" : task.isForToday() ? "task-date-today" : "task-date-future";
      timingInfo.createSpan({
        cls: `task-date ${dateClass}`,
        text: `\u23F3 ${task.timing.scheduledDate}`
      });
    }
    if (task.timing.startTime) {
      timingInfo.createSpan({
        cls: "task-time",
        text: `${task.timing.startTime}${task.timing.endTime ? ` - ${task.timing.endTime}` : ""}`
      });
    }
    if (task.timing.duration) {
      let durationText = "";
      if (task.timing.duration >= 60) {
        const hours = Math.floor(task.timing.duration / 60);
        const minutes = task.timing.duration % 60;
        durationText = `${hours}h${minutes > 0 ? ` ${minutes}min` : ""}`;
      } else {
        durationText = `${task.timing.duration}min`;
      }
      timingInfo.createSpan({
        cls: "task-duration",
        text: durationText
      });
    }
    if (task.timing.week) {
      timingInfo.createSpan({
        cls: "task-week",
        text: `Semana: ${task.timing.week}`
      });
    }
    const tagsInfo = taskItem.createDiv({ cls: "gtd-task-tags" });
    for (const context of task.tags.contexts) {
      tagsInfo.createSpan({
        cls: "task-context-tag",
        text: context
      });
    }
    for (const person of task.tags.people) {
      tagsInfo.createSpan({
        cls: "task-person-tag",
        text: person
      });
    }
    for (const tag of task.tags.gtdTags.concat(task.tags.otherTags)) {
      tagsInfo.createSpan({
        cls: "task-other-tag",
        text: tag
      });
    }
    if (task.isBlocked && task.blockReason) {
      taskItem.createDiv({
        cls: "gtd-task-block-reason",
        text: task.blockReason
      });
    }
  }
  /**
   * Ordena las tareas según el tipo de lista GTD
   */
  sortTasksForList(tasks, listType) {
    const tasksCopy = [...tasks];
    switch (listType) {
      case "inbox" /* INBOX */:
        return tasksCopy;
      case "nextActions" /* NEXT_ACTIONS */:
        return tasksCopy.sort((a, b) => {
          const contextA = a.tags.contexts[0] || "";
          const contextB = b.tags.contexts[0] || "";
          const contextComp = contextA.localeCompare(contextB);
          if (contextComp !== 0)
            return contextComp;
          return this.comparePriorities(b.priority, a.priority);
        });
      case "calendar" /* CALENDAR */:
        return tasksCopy.sort((a, b) => {
          const dateA = a.timing.dueDate || "";
          const dateB = b.timing.dueDate || "";
          const dateComp = dateA.localeCompare(dateB);
          if (dateComp !== 0)
            return dateComp;
          const timeA = a.timing.startTime || "";
          const timeB = b.timing.startTime || "";
          return timeA.localeCompare(timeB);
        });
      case "hopefullyToday" /* HOPEFULLY_TODAY */:
        return tasksCopy.sort((a, b) => {
          const hasLimitA = !!a.timing.dueDate;
          const hasLimitB = !!b.timing.dueDate;
          if (hasLimitA !== hasLimitB)
            return hasLimitB ? 1 : -1;
          return this.comparePriorities(b.priority, a.priority);
        });
      case "assigned" /* ASSIGNED */:
        return tasksCopy.sort((a, b) => {
          const personA = a.tags.people[0] || "";
          const personB = b.tags.people[0] || "";
          const personComp = personA.localeCompare(personB);
          if (personComp !== 0)
            return personComp;
          const dateA = a.timing.dueDate || "9999-99-99";
          const dateB = b.timing.dueDate || "9999-99-99";
          return dateA.localeCompare(dateB);
        });
      case "waiting" /* WAITING */:
        return tasksCopy.sort((a, b) => {
          const blockTypeA = this.getBlockType(a);
          const blockTypeB = this.getBlockType(b);
          if (blockTypeA !== blockTypeB)
            return blockTypeA - blockTypeB;
          if (blockTypeA === 1) {
            const dateA = a.timing.startDate || "";
            const dateB = b.timing.startDate || "";
            return dateA.localeCompare(dateB);
          } else if (blockTypeA === 3) {
            const weekA = a.timing.week || "";
            const weekB = b.timing.week || "";
            return weekA.localeCompare(weekB);
          }
          return 0;
        });
      default:
        return tasksCopy.sort((a, b) => {
          return this.comparePriorities(b.priority, a.priority);
        });
    }
  }
  /**
   * Obtiene el tipo de bloqueo para ordenar tareas en pausa
   * 1: Fecha futura, 2: Dependencia, 3: Semana futura
   */
  getBlockType(task) {
    if (task.timing.startDate)
      return 1;
    if (task.dependencies.length > 0)
      return 2;
    if (task.timing.week)
      return 3;
    return 0;
  }
  /**
   * Compara dos prioridades para ordenar (del más alto al más bajo)
   */
  comparePriorities(a, b) {
    const priorityValues = {
      ["highest" /* HIGHEST */]: 4,
      ["high" /* HIGH */]: 3,
      ["normal" /* NORMAL */]: 2,
      ["low" /* LOW */]: 1,
      ["lowest" /* LOWEST */]: 0
    };
    return priorityValues[a] - priorityValues[b];
  }
  /**
   * Obtiene la etiqueta para un tipo de entidad
   */
  getEntityTypeLabel(type2) {
    switch (type2) {
      case "AV" /* AREA_VIDA */:
        return "\xC1rea de Vida";
      case "AI" /* AREA_INTERES */:
        return "\xC1rea de Inter\xE9s";
      case "PQ" /* PROYECTO_Q */:
        return "Proyecto Q";
      case "PGTD" /* PROYECTO_GTD */:
        return "Proyecto GTD";
      case "Ax" /* ANOTACION */:
        return "Anotaci\xF3n";
      case "Cp" /* CAMPANA */:
        return "Campa\xF1a";
      case "EMkt" /* ENTREGABLE */:
        return "Entregable";
      case "RT" /* REGISTRO_TIEMPO */:
        return "Registro Tiempo";
      case "Tx" /* TRANSACCION */:
        return "Transacci\xF3n";
      case "OTHER" /* OTHER */:
        return "Otra Entidad";
      case "UNKNOWN" /* UNKNOWN */:
      default:
        return "Entidad";
    }
  }
  /**
   * Obtiene la clase CSS para un estado de entidad
   */
  getEntityStateClass(state) {
    switch (state) {
      case "\u{1F7E2}" /* ACTIVE */:
        return "active";
      case "\u{1F7E1}" /* PAUSED */:
        return "paused";
      case "\u{1F534}" /* STOPPED */:
        return "stopped";
      case "\u{1F535}" /* ARCHIVED */:
        return "archived";
      default:
        return "unknown";
    }
  }
  /**
   * Obtiene el icono para una prioridad
   */
  getPriorityIcon(priority) {
    switch (priority) {
      case "highest" /* HIGHEST */:
        return "\u23EB";
      case "high" /* HIGH */:
        return "\u{1F53C}";
      case "low" /* LOW */:
        return "\u{1F53D}";
      case "lowest" /* LOWEST */:
        return "\u23EC";
      case "normal" /* NORMAL */:
      default:
        return "";
    }
  }
  /**
   * Obtiene la etiqueta para un tipo de lista GTD
   */
  getListTypeLabel(listType) {
    switch (listType) {
      case "inbox" /* INBOX */:
        return "Bandeja de Entrada";
      case "nextActions" /* NEXT_ACTIONS */:
        return "Pr\xF3ximas Acciones";
      case "calendar" /* CALENDAR */:
        return "Calendario";
      case "hopefullyToday" /* HOPEFULLY_TODAY */:
        return "Ojal\xE1 Hoy";
      case "assigned" /* ASSIGNED */:
        return "Asignadas";
      case "projects" /* PROJECTS */:
        return "Proyectos";
      case "somedayMaybe" /* SOMEDAY_MAYBE */:
        return "Alg\xFAn D\xEDa / Tal Vez";
      case "notThisWeek" /* NOT_THIS_WEEK */:
        return "Esta Semana No";
      case "waiting" /* WAITING */:
        return "En Pausa";
      default:
        return "Lista Desconocida";
    }
  }
  /**
   * Obtiene la descripción para un tipo de lista GTD
   */
  getListTypeDescription(listType) {
    switch (listType) {
      case "inbox" /* INBOX */:
        return "Tareas que necesitan ser procesadas o clasificadas.";
      case "nextActions" /* NEXT_ACTIONS */:
        return "Acciones listas para ejecutar en contextos espec\xEDficos.";
      case "calendar" /* CALENDAR */:
        return "Compromisos con fecha y hora espec\xEDfica.";
      case "hopefullyToday" /* HOPEFULLY_TODAY */:
        return "Tareas que se desean completar hoy, sin hora espec\xEDfica.";
      case "assigned" /* ASSIGNED */:
        return "Tareas delegadas a otras personas.";
      case "projects" /* PROJECTS */:
        return "Resultados que requieren m\xFAltiples acciones.";
      case "somedayMaybe" /* SOMEDAY_MAYBE */:
        return "Ideas para considerar en el futuro.";
      case "notThisWeek" /* NOT_THIS_WEEK */:
        return "Tareas pospuestas para despu\xE9s de esta semana.";
      case "waiting" /* WAITING */:
        return "Tareas bloqueadas por dependencias o fechas futuras.";
      default:
        return "";
    }
  }
};

// src/modules/taskNavigator/views/TaskNavigatorView.ts
var TaskNavigatorView = class extends import_obsidian86.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentModel = null;
    this.activeFile = null;
    this.refreshInterval = null;
    this.plugin = plugin;
    this.taskParser = new TaskParser();
    this.hierarchyBuilder = new TaskHierarchyBuilder(this.plugin);
    this.taskClassifier = new TaskClassifier();
    this.entityDetector = new EntityDetector(this.plugin);
    this.viewRenderer = new ViewRenderer();
    this.filterPanel = new FilterPanel((filters) => this.applyFilters(filters));
  }
  getViewType() {
    return "task-navigator-view";
  }
  getDisplayText() {
    return "Navegador de Tareas GTD";
  }
  getIcon() {
    return "checkmark";
  }
  /**
   * Se ejecuta cuando la vista se abre
   */
  async onOpen() {
    this.contentEl.empty();
    this.contentEl.addClass("task-navigator-container");
    this.contentEl.createEl("div", { text: "Cargando navegador de tareas...", cls: "task-navigator-loading" });
    this.activeFile = this.app.workspace.getActiveFile();
    await this.refreshView();
    this.refreshInterval = window.setInterval(() => {
      this.refreshView();
    }, 12e4);
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", async () => {
        const newActiveFile = this.app.workspace.getActiveFile();
        if (newActiveFile && newActiveFile !== this.activeFile) {
          this.activeFile = newActiveFile;
          await this.refreshView();
        }
      })
    );
  }
  /**
   * Se ejecuta cuando la vista se cierra
   */
  onClose() {
    if (this.refreshInterval) {
      clearInterval(this.refreshInterval);
      this.refreshInterval = null;
    }
  }
  /**
   * Actualiza la vista con los datos más recientes
   */
  async refreshView() {
    try {
      const loadingIndicator = this.contentEl.createEl("div", {
        cls: "task-navigator-loading",
        text: "Actualizando datos..."
      });
      let entityContext = null;
      if (this.activeFile) {
        entityContext = await this.entityDetector.detectEntityFromFile(this.activeFile);
      }
      this.currentModel = await this.hierarchyBuilder.buildHierarchy(entityContext);
      if (this.currentModel) {
        await this.taskClassifier.classifyTasks(this.currentModel);
      }
      this.contentEl.empty();
      this.viewRenderer.render(this.contentEl, this.currentModel, this.filterPanel);
    } catch (error) {
      console.error("Error al actualizar vista de TaskNavigator:", error);
      this.contentEl.empty();
      this.contentEl.createEl("div", {
        cls: "task-navigator-error",
        text: `Error al cargar el navegador de tareas: ${error.message}`
      });
    }
  }
  /**
   * Aplica los filtros seleccionados por el usuario
   */
  applyFilters(filters) {
    if (!this.currentModel)
      return;
    this.currentModel.applyFilters(filters);
    this.contentEl.empty();
    this.viewRenderer.render(this.contentEl, this.currentModel, this.filterPanel);
  }
};

// src/modules/taskNavigator/services/TaskManagerIntegration.ts
var import_obsidian87 = require("obsidian");
var TaskManagerIntegration = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tareasAPI = plugin.tareasAPI;
  }
  /**
   * Carga tareas vencidas desde el TaskManager
   */
  async loadOverdueTasks() {
    try {
      if (!this.tareasAPI) {
        console.warn("TareasAPI no est\xE1 disponible");
        return [];
      }
      const overdueTasks = await this.tareasAPI.getTareasVencidasAbiertas();
      return this.convertTareasToNavigatorTasks(overdueTasks);
    } catch (error) {
      console.error("Error al cargar tareas vencidas:", error);
      return [];
    }
  }
  /**
   * Convierte tareas del formato de TareasAPI al formato de TaskNavigator
   */
  convertTareasToNavigatorTasks(tareas) {
    const tasks = [];
    for (const tarea of tareas) {
      try {
        const lineInfo = {
          number: tarea.line || 0,
          text: tarea.rawText || "",
          indentation: 0
        };
        const task = new Task3(
          tarea.id || "",
          tarea.text || "",
          tarea.rawText || "",
          false,
          // Asumimos que no está completada ya que son tareas vencidas abiertas
          tarea.file,
          // TFile
          lineInfo
        );
        task.timing.dueDate = tarea.dueDate || "";
        task.timing.scheduledDate = tarea.scheduledDate || "";
        task.timing.startDate = tarea.startDate || "";
        if (tarea.contexts && tarea.contexts.length > 0) {
          task.tags.contexts = tarea.contexts;
          task.listType = "nextActions" /* NEXT_ACTIONS */;
        } else if (tarea.people && tarea.people.length > 0) {
          task.tags.people = tarea.people;
          task.listType = "assigned" /* ASSIGNED */;
        } else {
          task.listType = "inbox" /* INBOX */;
        }
        if (tarea.dueDate || tarea.scheduledDate) {
          task.isOverdue = () => true;
        }
        tasks.push(task);
      } catch (error) {
        console.error("Error al convertir tarea:", error);
      }
    }
    return tasks;
  }
  /**
   * Actualiza el estado de una tarea en el sistema
   */
  async updateTaskStatus(task, completed) {
    try {
      if (!this.tareasAPI) {
        console.warn("TareasAPI no est\xE1 disponible");
        return false;
      }
      return true;
    } catch (error) {
      console.error("Error al actualizar estado de tarea:", error);
      return false;
    }
  }
  /**
   * Obtiene estadísticas de tareas desde el TaskManager
   */
  async getTaskStats() {
    try {
      if (!this.tareasAPI) {
        console.warn("TareasAPI no est\xE1 disponible");
        return {};
      }
      return {};
    } catch (error) {
      console.error("Error al obtener estad\xEDsticas de tareas:", error);
      return {};
    }
  }
};

// src/modules/taskNavigator/module.ts
var TaskNavigatorModule = class {
  constructor(plugin) {
    this.VIEW_TYPE = "task-navigator-view";
    this.isActivated = false;
    this.plugin = plugin;
    this.taskParser = new TaskParser();
    this.entityDetector = new EntityDetector(plugin);
    this.hierarchyBuilder = new TaskHierarchyBuilder(plugin);
    this.taskClassifier = new TaskClassifier();
    this.navigationUtils = new NavigationUtils4();
    this.taskManagerIntegration = new TaskManagerIntegration(plugin);
  }
  /**
   * Activa el módulo TaskNavigator
   */
  activate() {
    if (this.isActivated)
      return;
    console.log("Activando m\xF3dulo TaskNavigator");
    this.plugin.registerView(
      this.VIEW_TYPE,
      (leaf) => new TaskNavigatorView(leaf, this.plugin)
    );
    this.registerCommands();
    this.isActivated = true;
  }
  /**
   * Desactiva el módulo TaskNavigator
   */
  deactivate() {
    if (!this.isActivated)
      return;
    console.log("Desactivando m\xF3dulo TaskNavigator");
    this.plugin.app.workspace.detachLeavesOfType(this.VIEW_TYPE);
    this.isActivated = false;
  }
  /**
   * Comprueba si el módulo está activo
   */
  isActive() {
    return this.isActivated;
  }
  /**
   * Registra los comandos para el módulo
   */
  registerCommands() {
    this.plugin.addCommand({
      id: "open-task-navigator",
      name: "Abrir Navegador de Tareas GTD",
      callback: () => this.openTaskNavigatorView()
    });
    this.plugin.addCommand({
      id: "show-current-note-tasks",
      name: "Mostrar Tareas de la Nota Actual",
      callback: () => this.openTaskNavigatorWithCurrentNote()
    });
    this.plugin.addCommand({
      id: "show-overdue-tasks",
      name: "Mostrar Tareas Vencidas",
      callback: async () => {
        await this.openTaskNavigatorView();
        document.dispatchEvent(new CustomEvent("task-navigator-show-overdue"));
      }
    });
  }
  /**
   * Abre la vista del navegador de tareas
   */
  async openTaskNavigatorView() {
    const workspace = this.plugin.app.workspace;
    const existingLeaves = workspace.getLeavesOfType(this.VIEW_TYPE);
    if (existingLeaves.length > 0) {
      workspace.revealLeaf(existingLeaves[0]);
      return;
    }
    const leaf = workspace.getRightLeaf(false);
    await leaf.setViewState({
      type: this.VIEW_TYPE,
      active: true
    });
    workspace.revealLeaf(leaf);
  }
  /**
   * Abre la vista del navegador centrada en la nota actual
   */
  async openTaskNavigatorWithCurrentNote() {
    await this.openTaskNavigatorView();
    const currentFile = this.plugin.app.workspace.getActiveFile();
    if (currentFile) {
      document.dispatchEvent(new CustomEvent("task-navigator-focus-entity", {
        detail: { filePath: currentFile.path }
      }));
    }
  }
  /**
   * Proporciona el constructor de jerarquía a otros componentes
   */
  getHierarchyBuilder() {
    return this.hierarchyBuilder;
  }
  /**
   * Proporciona el clasificador de tareas a otros componentes
   */
  getTaskClassifier() {
    return this.taskClassifier;
  }
  /**
   * Proporciona el analizador de tareas a otros componentes
   */
  getTaskParser() {
    return this.taskParser;
  }
  /**
   * Proporciona el detector de entidades a otros componentes
   */
  getEntityDetector() {
    return this.entityDetector;
  }
  /**
   * Proporciona las utilidades de navegación a otros componentes
   */
  getNavigationUtils() {
    return this.navigationUtils;
  }
  /**
   * Proporciona la integración con el gestor de tareas a otros componentes
   */
  getTaskManagerIntegration() {
    return this.taskManagerIntegration;
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian89.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.moduloGTD = null;
    //moduloTerceros: ModuloTerceros | null = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.registeredCommandIdsGTD = [];
    this.registeredCommandIds_Terceros = [];
    this.ribbonButtonRT = null;
    this.moduloTabTitle = null;
    this.moduloTaskManager = null;
    this.moduloDataviewQueries = null;
    this.taskExecutionNavigatorModule = null;
    this.taskNavigatorModule = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    var _a, _b, _c, _d, _e;
    await this.loadSettings();
    this.tp = this.getTp();
    this.registerView(
      "vista-registro-activo",
      (leaf) => new VistaRegistroActivo(leaf, this)
    );
    this.registerView(
      "vista-resumen-semanal",
      (leaf) => new VistaResumenSemanal(leaf, this)
    );
    this.registerView(
      "vista-registro-diario",
      (leaf) => new VistaRegistroDiario(leaf, this)
    );
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.addOnsAPI = new addOnsAPI(this);
    this.YAMLUpdaterAPI = new YAMLUpdaterAPI2(this);
    this.updateSesionLectura = new updateSesionLectura(this);
    this.menuHoyAPI = new menuHoyAPI(this);
    this.menuSemanalAPI = new menuSemanalAPI(this);
    this.subsistemasAPI = new subsistemasAPI(this);
    this.librosAPI = new librosAPI(this);
    this.newInbox = ingresarBandejaEntrada.bind(this);
    this.taskExecutionNavigatorModule = new TaskExecutionNavigatorModule(this);
    this.taskNavigatorModule = new TaskNavigatorModule(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.moduloGTD = new ModuloGTD(this);
    this.tareasAPI = new TareasAPI(this);
    this.moduloTabTitle = new ModuloTabTitle(this);
    this.moduloTaskManager = new ModuloTaskManager(this);
    this.moduloDataviewQueries = new ModuloDataviewQueries(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
    this.registerGPThora();
    if (this.settings.moduloTabTitle) {
      (_a = this.moduloTabTitle) == null ? void 0 : _a.activate();
    } else {
      (_b = this.moduloTabTitle) == null ? void 0 : _b.deactivate();
    }
    if (this.settings.moduloTaskManager) {
      this.moduloTaskManager.activate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("ManagementPlugin: Aplicando configuraci\xF3n DataviewQueries...");
      try {
        if (!this.moduloDataviewQueries.isActive()) {
          this.moduloDataviewQueries.activate();
        }
      } catch (error) {
        console.error("Error en applyConfiguration:", error);
      }
    } else {
      (_c = this.moduloDataviewQueries) == null ? void 0 : _c.deactivate();
    }
    if (this.settings.taskExecutionNavigatorModule) {
      (_d = this.taskExecutionNavigatorModule) == null ? void 0 : _d.activate();
    }
    if (this.settings.taskNavigatorModule) {
      (_e = this.taskNavigatorModule) == null ? void 0 : _e.activate();
    }
  }
  registerGPThora() {
    const gptHora = new GPThora(this.app);
    gptHora.onload();
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
    if (this.settings.moduloGTD) {
      (_g = this.moduloGTD) == null ? void 0 : _g.activate(this);
    } else {
      (_h = this.moduloGTD) == null ? void 0 : _h.deactivate(this);
    }
    if (this.settings.moduloTaskManager) {
      (_i = this.moduloTaskManager) == null ? void 0 : _i.activate();
    } else {
      (_j = this.moduloTaskManager) == null ? void 0 : _j.deactivate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("Aplicando configuraci\xF3n: Activando DataviewQueries");
      (_k = this.moduloDataviewQueries) == null ? void 0 : _k.activate();
    } else {
      console.log("Aplicando configuraci\xF3n: Desactivando DataviewQueries");
      (_l = this.moduloDataviewQueries) == null ? void 0 : _l.deactivate();
    }
    if (this.settings.taskExecutionNavigatorModule) {
      (_m = this.taskExecutionNavigatorModule) == null ? void 0 : _m.activate();
    } else {
      (_n = this.taskExecutionNavigatorModule) == null ? void 0 : _n.deactivate();
    }
    if (this.settings.taskNavigatorModule) {
      (_o = this.taskNavigatorModule) == null ? void 0 : _o.activate();
    } else {
      (_p = this.taskNavigatorModule) == null ? void 0 : _p.deactivate();
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    if (this.moduloDataviewQueries) {
      this.moduloDataviewQueries.deactivate();
    }
    if (this.taskExecutionNavigatorModule) {
      this.taskExecutionNavigatorModule.deactivate();
    }
    if (this.taskNavigatorModule) {
      this.taskNavigatorModule.deactivate();
    }
    delete this.app.gpManagement;
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
  getTp() {
    if (!this.app || !this.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error(
        "No se pudo acceder al objeto de funciones actuales de Templater."
      );
      return;
    }
    console.log("Instancia de tp cargada satisfactoriamente en Plugin");
    return tp;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25Nb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsVGFyZWFzLnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZS50cyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2Vycm9ycy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZm9ybWF0cy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9zeXN0ZW1ab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvem9uZXMvSUFOQVpvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2xvY2FsZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL2ludmFsaWRab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC96b25lVXRpbC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3NldHRpbmdzLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9pbnZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9jb252ZXJzaW9ucy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvdXRpbC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZW5nbGlzaC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZm9ybWF0dGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9yZWdleFBhcnNlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2R1cmF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW50ZXJ2YWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbmZvLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9kaWZmLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9kaWdpdHMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL3Rva2VuUGFyc2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvZGF0ZXRpbWUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9sdXhvbi5qcyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvbWVudU90cm8udHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXMvUmVnaXN0cm9UaWVtcG8udHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9TZXNpb25MZWN0dXJhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9SVEJhc2UudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJLnRzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5nc1RhYi50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXJDYXJwZXRhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXJQbGFudGlsbGEudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9maWxlTGlua01vZGFsLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhdGVOb3RlRnJvbVRlbXBsYXRlLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS9hY3RpdmFkb3Jlcy50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvdWkvcmliYm9uQnV0dG9uLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS91aS9tb2RhbC50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvc2VhcmNoL0Z1enp5Tm90ZVN1Z2dlc3Rlci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9BbGlhc1N0YXR1c0Jhci9zdGF0dXNCYXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vcmliYm9uTWVudS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby91dGlscy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvbW9kYWxfQWhvcmEudHMiLCAic3JjL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0FncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9GaWVsZEhhbmRsZXJVdGlscy50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZWZsZXhpb25lc0ZpZWxkSGFuZGxlcnMudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DUEVGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9SUkZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUEdUREZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUFFGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9Bbm90YWNpb25lc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL1RyYW5zYWNjaW9uZXNGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYVZpZGFGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL25vZG9BcmVhVmlkYUZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL09iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0NvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZXBvc2l0b3Jpb0xpYnJvc19GSC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0JpYmxpb3RlY2FfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9BbnVhbF9GSC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEpvdXJuYWxzL1RyaW1lc3RyYWxGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DYW1wYVx1MDBGMWFzRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9zcGlubmVyTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9kYXRlUGlja2VyTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9wZWRpZG9zQ2xpZW50ZU1vZGFsLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS91dGlscy9ET01VdGlscy50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvdXRpbHMvTmF2aWdhdGlvblV0aWxzLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9jb21wb25lbnRzL1RhcmVhc0luYm94Q29tcG9uZW50LnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9jb21wb25lbnRzL1Byb3llY3RvQ2FtcGFuYXNDb21wb25lbnQudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2FkZE9uc0FQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUEkudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL2NhbWJpb0hGLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51RGlhcmlvQVBJLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51U2VtYW5hbEFQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci92aWV3cy92aXN0YVJlc3VtZW5TZW1hbmFsLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3ZpZXdzL3Zpc3RhUlRBY3Rpdm8udHMiLCAic3JjL21vZHVsZXMvbW9kdWxvR1REL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0dURC9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9HVEQvaW5ib3gudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9pbmJveE1vZGFsLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdWJzaXN0ZW1hc0FQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci92aWV3cy92aXN0YVJlZ2lzdHJvRGlhcmlvLnRzIiwgInNyYy9tb2R1bGVzL0dQVGhvcmEvR1BUaG9yYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9MaWJyb3MvbGlicm9zQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91cGRhdGVTZXNpb25MZWN0dXJhLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUEkudHMiLCAic3JjL21vZHVsZXMvdGFza01hbmFnZXIvdXRpbHMvdGFza1V0aWxzLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL3V0aWxzL3Rhc2tXZWlnaHRDYWxjdWxhdG9yLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL2NvbW1hbmRzLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL1RhYlRpdGxlTWFuYWdlci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS92aWV3cy9DdXN0b21NYXJrZG93blZpZXcudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvdXRpbHMvbG9nZ2VyLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9pbmRleC50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL0RhdGF2aWV3UXVlcnlNYW5hZ2VyLnRzIiwgInNyYy9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcy9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvUXVlcnlSZW5kZXJlci50cyIsICJzcmMvbW9kdWxlcy90YXNrRXhlY3V0aW9uTmF2aWdhdG9yL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tFeGVjdXRpb25OYXZpZ2F0b3IvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvdGFza0V4ZWN1dGlvbk5hdmlnYXRvci90YXNrRXhlY3V0aW9uTmF2aWdhdG9yLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvbW9kdWxlLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3Ivdmlld3MvVGFza05hdmlnYXRvclZpZXcudHMiLCAic3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9zZXJ2aWNlcy9UYXNrSGllcmFyY2h5QnVpbGRlci50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3NlcnZpY2VzL0VudGl0eURldGVjdG9yLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvbW9kZWxzL0VudGl0eS50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL21vZGVscy9UYXNrLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3Ivc2VydmljZXMvVGFza1BhcnNlci50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL21vZGVscy9IaWVyYXJjaHlWaWV3TW9kZWwudHMiLCAic3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9zZXJ2aWNlcy9UYXNrQ2xhc3NpZmllci50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL2NvbXBvbmVudHMvRmlsdGVyUGFuZWwudHMiLCAic3JjL21vZHVsZXMvdGFza05hdmlnYXRvci91dGlscy9OYXZpZ2F0aW9uVXRpbHMudHMiLCAic3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9jb21wb25lbnRzL1ZpZXdSZW5kZXJlci50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3NlcnZpY2VzL1Rhc2tNYW5hZ2VySW50ZWdyYXRpb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8vIEltcG9ydGFjaVx1MDBGM24gZGUgY2xhc2VzIG5lY2VzYXJpYXMgZGVzZGUgbGEgbGlicmVyXHUwMEVEYSBkZSBPYnNpZGlhbi5cbmltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gRGVmaW5pY2lcdTAwRjNuIGRlIGxhIGNsYXNlIFNlbGVjY2lvbk1vZGFsIHF1ZSBleHRpZW5kZSBkZSBGdXp6eVN1Z2dlc3RNb2RhbCBwYXJhIG1hbmVqYXIgc2VsZWNjaW9uZXMgZGUgc3RyaW5ncy5cbmV4cG9ydCBjbGFzcyBTZWxlY2Npb25Nb2RhbCBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPHN0cmluZz4ge1xuICAgIHRpdGxlczogc3RyaW5nW107IC8vIEFycmF5IGRlIHRcdTAwRUR0dWxvcyBwYXJhIGxhcyBvcGNpb25lcyBkZWwgbW9kYWwuXG4gICAgdmFsdWVzOiBzdHJpbmdbXTsgLy8gQXJyYXkgZGUgdmFsb3JlcyBhc29jaWFkb3MgYSBjYWRhIHRcdTAwRUR0dWxvLlxuICAgIHZhbHVlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+OyAvLyBPYmpldG8gcGFyYSBtYXBlYXIgdFx1MDBFRHR1bG9zIGEgdmFsb3Jlcy5cbiAgICBwcml2YXRlIHNlbGVjY2lvbkhlY2hhOiBib29sZWFuID0gZmFsc2U7IC8vIEZsYWcgcGFyYSBkZXRlcm1pbmFyIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbi5cblxuICAgIC8vIENvbnN0cnVjdG9yIGRlIGxhIGNsYXNlLlxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZXM6IHN0cmluZ1tdLCB2YWx1ZXM6IHN0cmluZ1tdLCBwbGFjZWhvbGRlcjogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7IC8vIExsYW1hZGEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgYmFzZSBjb24gbGEgaW5zdGFuY2lhIGRlIEFwcCBkZSBPYnNpZGlhbi5cbiAgICAgICAgdGhpcy50aXRsZXMgPSB0aXRsZXM7IC8vIEluaWNpYWxpemFjaVx1MDBGM24gZGVsIGFycmF5IGRlIHRcdTAwRUR0dWxvcy5cbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7IC8vIEluaWNpYWxpemFjaVx1MDBGM24gZGVsIGFycmF5IGRlIHZhbG9yZXMuXG4gICAgICAgIC8vIENyZWFjaVx1MDBGM24gZGVsIG1hcGVvIGRlIHRcdTAwRUR0dWxvcyBhIHZhbG9yZXMuXG4gICAgICAgIHRoaXMudmFsdWVNYXAgPSB0aXRsZXMucmVkdWNlKChhY2MsIHRpdGxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgYWNjW3RpdGxlXSA9IHZhbHVlc1tpbmRleF07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpOyAvLyBFc3RhYmxlY2ltaWVudG8gZGVsIHRleHRvIGRlIHBsYWNlaG9sZGVyIHBhcmEgZWwgY2FtcG8gZGUgYlx1MDBGQXNxdWVkYSBlbiBlbCBtb2RhbC5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgbG9zIFx1MDBFRHRlbXMgKHRcdTAwRUR0dWxvcykgcXVlIHNlIG1vc3RyYXJcdTAwRTFuIGVuIGVsIG1vZGFsLlxuICAgIGdldEl0ZW1zKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGVzO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciBlbCB0ZXh0byBxdWUgc2UgbW9zdHJhclx1MDBFMSBwYXJhIGNhZGEgXHUwMEVEdGVtIGVuIGVsIG1vZGFsLlxuICAgIGdldEl0ZW1UZXh0KGl0ZW06IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHF1ZSBzZSBsbGFtYSBhbCBjZXJyYXIgZWwgbW9kYWwuXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gU2kgZWwgbW9kYWwgc2UgY2llcnJhIHNpbiBxdWUgc2UgaGF5YSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24sIHNlIHJlY2hhemEgbGEgcHJvbWVzYS5cbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjY2lvbkhlY2hhKSB7XG4gICAgICAgICAgICB0aGlzLnJlamVjdChuZXcgRXJyb3IoJ01vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuJykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuIGRlIHVuIFx1MDBFRHRlbS5cbiAgICBzZWxlY3RTdWdnZXN0aW9uKGl0ZW06IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlbGVjY2lvbkhlY2hhID0gdHJ1ZTsgLy8gTWFyY2FyIHF1ZSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24uXG4gICAgICAgIHN1cGVyLnNlbGVjdFN1Z2dlc3Rpb24oaXRlbSwgZXZ0KTsgLy8gTGxhbWFyIGFsIG1cdTAwRTl0b2RvIGNvcnJlc3BvbmRpZW50ZSBkZSBsYSBjbGFzZSBiYXNlIHBhcmEgbWFuZWphciBsYSBzZWxlY2NpXHUwMEYzbi5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBxdWUgc2UgbGxhbWEgYWwgZWxlZ2lyIHVuIFx1MDBFRHRlbSwgZG9uZGUgc2UgcmVzdWVsdmUgbGEgcHJvbWVzYSBjb24gZWwgdmFsb3IgYXNvY2lhZG8gYWwgXHUwMEVEdGVtIHNlbGVjY2lvbmFkby5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZU1hcFtpdGVtXTsgLy8gT2J0ZW5lciBlbCB2YWxvciBhc29jaWFkbyBhbCBcdTAwRUR0ZW0gc2VsZWNjaW9uYWRvLlxuICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpOyAvLyBSZXNvbHZlciBsYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBzZWxlY2Npb25hZG8uXG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhYnJpciBlbCBtb2RhbCB5IGVzcGVyYXIgYSBxdWUgZWwgdXN1YXJpbyBoYWdhIHVuYSBzZWxlY2NpXHUwMEYzbiwgZGV2b2x2aWVuZG8gdW5hIHByb21lc2EgY29uIGVsIHZhbG9yIHNlbGVjY2lvbmFkby5cbiAgICBvcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTsgLy8gR3VhcmRhciBsYSBmdW5jaVx1MDBGM24gcmVzb2x2ZSBkZSBsYSBwcm9tZXNhIHBhcmEgdXNhcmxhIGFsIHNlbGVjY2lvbmFyIHVuIFx1MDBFRHRlbS5cbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0OyAvLyBHdWFyZGFyIGxhIGZ1bmNpXHUwMEYzbiByZWplY3QgZGUgbGEgcHJvbWVzYSBwYXJhIHVzYXJsYSBzaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuLlxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7IC8vIEFicmlyIGVsIG1vZGFsLlxuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2ggfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIFNlbGVjY2lvbk1vZGFsVGFyZWFzIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XG4gICAgcHJpdmF0ZSBvcHRpb25zOiBzdHJpbmdbXTsgLy8gQXF1XHUwMEVEIGd1YXJkYW1vcyBsYXMgY2FkZW5hcyBIVE1MIHF1ZSBzZSBtb3N0cmFyXHUwMEUxblxuICAgIHByaXZhdGUgdmFsdWVzOiBzdHJpbmdbXTsgIC8vIFZhbG9yZXMgcXVlIHNlIHJldG9ybmFuIGFsIGVsZWdpclxuICAgIHByaXZhdGUgc2VsZWNjaW9uSGVjaGEgPSBmYWxzZTtcbiAgICBwcml2YXRlIHJlc29sdmVTZWxlY3Rpb24hOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgICBwcml2YXRlIHJlamVjdFNlbGVjdGlvbiE6IChyZWFzb24/OiBhbnkpID0+IHZvaWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gYXBwIE9ic2lkaWFuIEFwcFxuICAgICAqIEBwYXJhbSBvcHRpb25zIExpc3RhIGRlIGNhZGVuYXMgKFBVRURFIElOQ0xVSVIgSFRNTCkgcXVlIHNlIG1vc3RyYXJcdTAwRTFuIGVuIGVsIG1vZGFsXG4gICAgICogQHBhcmFtIHZhbHVlcyAgTGlzdGEgZGUgdmFsb3JlcyBhc29jaWFkb3MgYSBjYWRhIG9wY2lcdTAwRjNuXG4gICAgICogQHBhcmFtIHBsYWNlaG9sZGVyIFRleHRvIGVuIGxhIGJhcnJhIGRlIGJcdTAwRkFzcXVlZGFcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb3B0aW9uczogc3RyaW5nW10sIHZhbHVlczogc3RyaW5nW10sIHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgICAgIHRoaXMuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldG9ybmEgbGEgbGlzdGEgZGUgXHUwMEVEdGVtcyAoZW4gZXN0ZSBjYXNvLCBjYWRlbmFzKSBzb2JyZSBsYXMgcXVlIHNlIGhhclx1MDBFMSBsYSBiXHUwMEZBc3F1ZWRhIGRpZnVzYS5cbiAgICAgKi9cbiAgICBnZXRJdGVtcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5hIGVsIHRleHRvIHF1ZSBzZSB1c2EgaW50ZXJuYW1lbnRlIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkaWZ1c2EuXG4gICAgICogQXF1XHUwMEVEIHF1aXRhbW9zIGV0aXF1ZXRhcyBIVE1MLCBwYXJhIHF1ZSBsYSBiXHUwMEZBc3F1ZWRhIHNlYSBzb2JyZSB0ZXh0byBwbGFuby5cbiAgICAgKi9cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBFbGltaW5hciBldGlxdWV0YXMgSFRNTFxuICAgICAgICByZXR1cm4gaXRlbS5yZXBsYWNlKC88W14+XSs+L2csIFwiXCIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnRyb2xhIGNcdTAwRjNtbyBzZSBtdWVzdHJhIGNhZGEgb3BjaVx1MDBGM24gZW4gbGEgbGlzdGEgZGUgc3VnZXJlbmNpYXMuXG4gICAgICogQXNpZ25hbW9zICdlbC5pbm5lckhUTUwnIHBhcmEgcXVlIHNlIHJlbmRlcmljZSBlbCBIVE1MIGNvbiBlc3RpbG9zLFxuICAgICAqIGVuIGx1Z2FyIGRlIG1vc3RyYXIgbGFzIGV0aXF1ZXRhcyBlbiBjcnVkby5cbiAgICAgKi9cbiAgICByZW5kZXJTdWdnZXN0aW9uKHJlc3VsdDogRnV6enlNYXRjaDxzdHJpbmc+LCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgZWwuaW5uZXJIVE1MID0gcmVzdWx0Lml0ZW07IFxuICAgICAgICAvLyBTaSBxdWlzaWVyYXMgcmVzYWx0YXIgY29pbmNpZGVuY2lhcyBtYW51YWxtZW50ZSwgaGFiclx1MDBFRGEgcXVlIG1vZGlmaWNhciBhcXVcdTAwRUQuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWFuZWphIGxhIHNlbGVjY2lcdTAwRjNuIGRlIHVuIFx1MDBFRHRlbS4gTWFyY2Ftb3MgcXVlIHNlIGhhIGhlY2hvIHNlbGVjY2lcdTAwRjNuIHkgZGVsZWdhbW9zIGFsIG1cdTAwRTl0b2RvIHBhZHJlLlxuICAgICAqL1xuICAgIHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VsZWNjaW9uSGVjaGEgPSB0cnVlO1xuICAgICAgICBzdXBlci5zZWxlY3RTdWdnZXN0aW9uKGl0ZW0sIGV2dCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2UgbGxhbWEgY3VhbmRvIGVsIHVzdWFyaW8gY29uZmlybWEgbGEgZWxlY2NpXHUwMEYzbiBkZSB1biBcdTAwRUR0ZW0gZGUgbGEgbGlzdGEuXG4gICAgICogT2J0ZW5lbW9zIGVsIHZhbG9yIGFzb2NpYWRvIHkgcmVzb2x2ZW1vcyBsYSBwcm9tZXNhLlxuICAgICAqL1xuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm9wdGlvbnMuaW5kZXhPZihpdGVtKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlc1tpbmRleF07XG4gICAgICAgIHRoaXMucmVzb2x2ZVNlbGVjdGlvbih2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2kgZWwgbW9kYWwgc2UgY2llcnJhIHNpbiBxdWUgZWwgdXN1YXJpbyBzZWxlY2Npb25lIG5hZGEsIHJlY2hhemFtb3MgbGEgcHJvbWVzYS5cbiAgICAgKi9cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWNjaW9uSGVjaGEpIHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0U2VsZWN0aW9uKG5ldyBFcnJvcihcIk1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuXCIpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1cdTAwRTl0b2RvIHBhcmEgYWJyaXIgZWwgbW9kYWwgeSByZXRvcm5hciB1bmEgcHJvbWVzYSBxdWUgc2UgcmVzdWVsdmUgY3VhbmRvXG4gICAgICogZWwgdXN1YXJpbyBlbGlnZSB1biBcdTAwRUR0ZW0gbyBzZSByZWNoYXphIHNpIGNpZXJyYSBzaW4gZWxlZ2lyLlxuICAgICAqL1xuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlU2VsZWN0aW9uID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0U2VsZWN0aW9uID0gcmVqZWN0O1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4vc2VsZWNjaW9uTW9kYWxcIjtcblxuZXhwb3J0IGNsYXNzIGZ1enp5U2VsZWN0T3JDcmVhdGUge1xuICBhcHA6IEFwcDtcbiAgcGx1Z2luOiBQbHVnaW47XG4gIHBhdGhDYW1wb3M6IHN0cmluZyA9IFwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBSZWdpc3RybyBUaWVtcG8ubWRcIjtcblxuICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuXG4gIGNyZWF0ZU1vZGFsKCkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtb2RhbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImZ1enp5U2VhcmNoTW9kYWxcIik7XG4gICAgbW9kYWwuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgbW9kYWwuc3R5bGUudG9wID0gXCI1MCVcIjtcbiAgICBtb2RhbC5zdHlsZS5sZWZ0ID0gXCI1MCVcIjtcbiAgICBtb2RhbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiO1xuICAgIG1vZGFsLnN0eWxlLnpJbmRleCA9IFwiMTAwMFwiO1xuICAgIG1vZGFsLnN0eWxlLnBhZGRpbmcgPSBcIjIwcHhcIjtcbiAgICBtb2RhbC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIndoaXRlXCI7XG4gICAgbW9kYWwuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgI2NjY1wiO1xuICAgIG1vZGFsLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiNXB4XCI7XG4gICAgbW9kYWwuc3R5bGUuYm94U2hhZG93ID0gXCIwIDRweCA2cHggcmdiYSgwLDAsMCwuMSlcIjtcbiAgICBtb2RhbC5zdHlsZS53aWR0aCA9IFwiMzAwcHhcIjtcbiAgXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gXCJcdTAwRDdcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS50b3AgPSBcIjVweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnJpZ2h0ID0gXCI1cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuZm9udFNpemUgPSBcIjE2cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5mb250V2VpZ2h0ID0gXCJib2xkXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucGFkZGluZyA9IFwiMHB4IDRweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9IFwiMTBweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLm91dGxpbmUgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3hTaGFkb3cgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gbW9kYWwucmVtb3ZlKCk7XG4gIFxuICAgIG1vZGFsLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTtcbiAgICByZXR1cm4gbW9kYWw7XG4gIH1cblxuICBmaWx0ZXJJdGVtcyhxdWVyeTogc3RyaW5nLCBpdGVtczogYW55W10pIHtcbiAgICByZXR1cm4gaXRlbXMuZmlsdGVyKChpdGVtOiB7IHZhbHVlOiBzdHJpbmc7IH0pID0+XG4gICAgICBpdGVtLnZhbHVlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkudG9Mb3dlckNhc2UoKSlcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyh0aXBvOiBzdHJpbmcgfCBudW1iZXIsIHNlbGVjdGVkVmFsdWU6IGFueSwgc2VsZWN0ZWRHcm91cDogYW55KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXI6IHsgW3g6IHN0cmluZ106IGFueVtdOyB9KSA9PiB7XG4gICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlICdhY3RzVGVtYXMnIGVzIGVsIGNhbXBvIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIGxldCBjdXJyZW50QWN0cyA9IGZyb250bWF0dGVyW3RpcG9dIHx8IFtdO1xuICAgICAgICAgICAgbGV0IG5ld1ZhbHVlRm9yQWN0cyA9IFsuLi5jdXJyZW50QWN0cywgW3NlbGVjdGVkR3JvdXAsIHNlbGVjdGVkVmFsdWVdXTtcbiAgICAgICAgICAgIGZyb250bWF0dGVyW3RpcG9dID0gbmV3VmFsdWVGb3JBY3RzO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgYXN5bmMgc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXM6IGFueSwgZ3JvdXBzOiBhbnlbXSwgdGlwbzogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgbGV0IHNlbGVjdGVkVmFsdWUgPSBcIlwiOyAvLyBWYXJpYWJsZSBwYXJhIGd1YXJkYXIgbGEgb3BjaVx1MDBGM24gc2VsZWNjaW9uYWRhIG8gaW5ncmVzYWRhIHBvciBlbCB1c3VhcmlvXG4gICAgICAgIGxldCBzZWxlY3RlZEdyb3VwID0gXCJcIjtcbiAgICAgICAgY29uc3QgbW9kYWwgPSB0aGlzLmNyZWF0ZU1vZGFsKCk7XG4gICAgICBcblxuICAgICAgICAvLyBDcmVhciB5IGNvbmZpZ3VyYXIgZWwgdFx1MDBFRHR1bG8gZGVsIG1vZGFsXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgyXCIpO1xuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IFwiQnVzY2EgbyBjcmVhIHR1IGFjdGl2aWRhZFwiO1xuICAgICAgICB0aXRsZS5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAvLyBDZW50cmFyIGVsIHRcdTAwRUR0dWxvLCBhanVzdGEgbG9zIGVzdGlsb3Mgc2VnXHUwMEZBbiBzZWEgbmVjZXNhcmlvXG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IFwiRXNjcmliZSB0dSBhY3RpdmlkYWQuLi5cIjtcbiAgICAgICAgLy8gRXN0YWJsZWNlIGVsIGFuY2hvIGRlbCBpbnB1dCBhIHVuIHBvcmNlbnRhamUgZGVsIGNvbnRlbmVkb3IgcGFyYSBoYWNlcmxvIG1cdTAwRTFzIGFuY2hvLlxuICAgICAgICBpbnB1dC5zdHlsZS53aWR0aCA9IFwiODAlXCI7XG4gICAgICAgIC8vIENlbnRyYXIgZWwgdGV4dG8gZGVudHJvIGRlbCBpbnB1dFxuICAgICAgICBpbnB1dC5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICAvLyBDZW50cmFyIGVsIGlucHV0IGRlbnRybyBkZWwgbW9kYWwgKHNpIGVsIG1vZGFsIHRpZW5lIHVuIGRpc3BsYXkgZmxleClcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICBtb2RhbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gXCJjb2x1bW5cIjtcbiAgICAgICAgbW9kYWwuc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKGlucHV0KTtcblxuXG4gICAgICAgIC8vIENyZWFyIHkgYWdyZWdhciB1biBlc3BhY2lvIGVudHJlIGVsIGlucHV0IHkgcmVzdWx0c0RpdlxuICAgICAgICBjb25zdCBzcGFjZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzcGFjZXIuc3R5bGUuaGVpZ2h0ID0gXCIxNnB4XCI7IC8vIEFqdXN0YSBlc3RhIGFsdHVyYSBzZWdcdTAwRkFuIG5lY2VzaXRlcyBwYXJhIGVsIGVzcGFjaW9cbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoc3BhY2VyKTtcbiAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHRzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQocmVzdWx0c0Rpdik7XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUmVzdWx0c0Rpc3BsYXkoZmlsdGVyZWRSZXN1bHRzOiBhbnlbXSwgbWVudU90cm86IHRoaXMpIHtcbiAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgcmVzdWx0YWRvcyBwcmV2aW9zXG4gICAgICAgICAgZmlsdGVyZWRSZXN1bHRzLmZvckVhY2goKHJlc3VsdDogeyB2YWx1ZTogc3RyaW5nIHwgbnVsbDsgYWN0aXZpdHk6IHN0cmluZzsgZ3JvdXA6IHN0cmluZzsgfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdi50ZXh0Q29udGVudCA9IHJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgIGRpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGRpdi5vbm1vdXNlb3ZlciA9ICgpID0+IChkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjBmMGYwXCIpO1xuICAgICAgICAgICAgZGl2Lm9ubW91c2VvdXQgPSAoKSA9PiAoZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIik7XG4gICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9IHJlc3VsdC5hY3Rpdml0eTsgLy8gR3VhcmRhciBlbCB2YWxvciBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cCA9IHJlc3VsdC5ncm91cDsgLy8gR3VhcmRhciBlbCBncnVwbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgLy9kaXNwbGF5U2VsZWN0ZWRWYWx1ZShzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTsgLy8gTW9zdHJhciBsYSBzZWxlY2NpXHUwMEYzbiBhbCB1c3VhcmlvXG4gICAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICByZXNvbHZlKFtzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgICAgLy8gU2kgbm8gaGF5IHJlc3VsdGFkb3MgeSBlbCB1c3VhcmlvIGhhIGluZ3Jlc2FkbyB1biB0ZXh0bywgb2ZyZWNlciBsYSBjcmVhY2lcdTAwRjNuIGRlIHVuYSBudWV2YSBhY3RpdmlkYWRcbiAgICAgICAgICBpZiAoZmlsdGVyZWRSZXN1bHRzLmxlbmd0aCA9PT0gMCAmJiBpbnB1dC52YWx1ZS50cmltKCkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNyZWF0ZU5ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYudGV4dENvbnRlbnQgPSBgQ3JlYXIgbnVldmEgYWN0aXZpZGFkOiBcIiR7aW5wdXQudmFsdWV9XCJgO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2LnN0eWxlLmNvbG9yID0gXCJibHVlXCI7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRWYWx1ZSA9IGlucHV0LnZhbHVlOyAvLyBHdWFyZGFyIGxhIG51ZXZhIGFjdGl2aWRhZFxuICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICBpZiAodGlwbz09IHVuZGVmaW5lZCl7IHRpcG8gPSBcImFjdHNUZW1hc1wifVxuICAgICAgICAgICAgICBzZWxlY3RHcm91cEZvck5ld0FjdGl2aXR5KG1lbnVPdHJvLCB0aXBvKTsgLy8gUHJvY2VkZXIgYSBzZWxlY2Npb25hciB1biBncnVwb1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQoY3JlYXRlTmV3RGl2KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RHcm91cEZvck5ld0FjdGl2aXR5KG1lbnVPdHJvOiB7IGVzUmVjdXJyZW50ZTogKGFyZzA6IHN0cmluZykgPT4gYW55OyB1cGRhdGVZQU1MRmllbGRzOiAoYXJnMDogYW55LCBhcmcxOiBzdHJpbmcsIGFyZzI6IHN0cmluZykgPT4gYW55OyB9LCB0aXBvOiBhbnkpIHtcbiAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgICAgaW5wdXQucmVtb3ZlKCk7XG4gICAgICAgICAgc3BhY2VyLnJlbW92ZSgpO1xuICAgICAgICAgIHRpdGxlLnJlbW92ZSgpO1xuXG4gICAgICAgICAgY29uc3QgdGV4dG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICB0ZXh0by50ZXh0Q29udGVudCA9IGBWYW1vcyBhIGNyZWFyIGxhIGFjdGl2aWRhZDogXCIke3NlbGVjdGVkVmFsdWV9XCIuIFNlbGVjY2lvbmEgdW4gZ3J1cG86YDs7XG4gICAgICAgICAgdGV4dG8uc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgLy8gQ2VudHJhciBlbCB0XHUwMEVEdHVsbywgYWp1c3RhIGxvcyBlc3RpbG9zIHNlZ1x1MDBGQW4gc2VhIG5lY2VzYXJpb1xuICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQodGV4dG8pOyBcbiAgICAgIFxuICAgICAgICAgIGdyb3Vwcy5mb3JFYWNoKChncm91cDogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZ3JvdXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZ3JvdXBEaXYudGV4dENvbnRlbnQgPSBncm91cDtcbiAgICAgICAgICAgIGdyb3VwRGl2LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgZ3JvdXBEaXYub25tb3VzZW92ZXIgPSAoKSA9PiAoZ3JvdXBEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZjBmMGYwXCIpO1xuICAgICAgICAgICAgZ3JvdXBEaXYub25tb3VzZW91dCA9ICgpID0+IChncm91cERpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgICAgICAgZ3JvdXBEaXYub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRHcm91cCA9IGdyb3VwOyAvLyBHdWFyZGFyIGVsIGdydXBvIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICAvL2Rpc3BsYXlTZWxlY3RlZFZhbHVlKHNlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXApOyAvLyBNb3N0cmFyIGxhIGFjdGl2aWRhZCB5IGVsIGdydXBvIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgbGV0IHJlY3VycmVudGUgPSBhd2FpdCBtZW51T3Ryby5lc1JlY3VycmVudGUoc2VsZWN0ZWRWYWx1ZSlcbiAgICAgICAgICAgICAgaWYgKHJlY3VycmVudGUpe1xuICAgICAgICAgICAgICAgIGF3YWl0IG1lbnVPdHJvLnVwZGF0ZVlBTUxGaWVsZHModGlwbywgc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmVzb2x2ZShbc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQoZ3JvdXBEaXYpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24gZGlzcGxheVNlbGVjdGVkVmFsdWUoYWN0aXZpdHk6IGFueSwgZ3JvdXA6IGFueSkge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gYFNlbGVjY2lvbmFkbzogJHthY3Rpdml0eX0gLyAke2dyb3VwfWA7XG4gICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBjZXJyYXIgZWwgbW9kYWwgbyBwZXJtaXRpciBhbCB1c3VhcmlvIGhhY2VyIG1cdTAwRTFzIGFjY2lvbmVzXG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkSXRlbXMgPSB0aGlzLmZpbHRlckl0ZW1zKGlucHV0LnZhbHVlLCBpdGVtcyk7XG4gICAgICAgICAgdXBkYXRlUmVzdWx0c0Rpc3BsYXkoZmlsdGVyZWRJdGVtcywgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgICAgXG4gICAgfSk7ICAgXG59XG5cbmFzeW5jIGVzUmVjdXJyZW50ZSh0YXJlYTpzdHJpbmcpOlByb21pc2U8Ym9vbGVhbj57XG4gIGNvbnN0IG9wY2lvbmVzID0gW1wiU2lcIixcIk5vXCJdIDtcbiAgY29uc3QgdmFsb3JlcyA9IFt0cnVlLGZhbHNlXTtcbiAgY29uc3QgcGxhY2Vob2xkZXIgPSBgJHt0YXJlYX0gZXMgdGFyZWEgcmVjdXJyZW50ZT9gO1xuICBjb25zdCBtb2RhbCA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIG9wY2lvbmVzLCB2YWxvcmVzLCBwbGFjZWhvbGRlcik7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IG1vZGFsLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxufSIsICIvLyB0aGVzZSBhcmVuJ3QgcmVhbGx5IHByaXZhdGUsIGJ1dCBub3IgYXJlIHRoZXkgcmVhbGx5IHVzZWZ1bCB0byBkb2N1bWVudFxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEx1eG9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkRGF0ZVRpbWVFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICBzdXBlcihgSW52YWxpZCBEYXRlVGltZTogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZEludGVydmFsRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgc3VwZXIoYEludmFsaWQgSW50ZXJ2YWw6ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWREdXJhdGlvbkVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlYXNvbikge1xuICAgIHN1cGVyKGBJbnZhbGlkIER1cmF0aW9uOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige31cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZFVuaXRFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih1bml0KSB7XG4gICAgc3VwZXIoYEludmFsaWQgdW5pdCAke3VuaXR9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZEFyZ3VtZW50RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHt9XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIFpvbmVJc0Fic3RyYWN0RXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoXCJab25lIGlzIGFuIGFic3RyYWN0IGNsYXNzXCIpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmNvbnN0IG4gPSBcIm51bWVyaWNcIixcbiAgcyA9IFwic2hvcnRcIixcbiAgbCA9IFwibG9uZ1wiO1xuXG5leHBvcnQgY29uc3QgREFURV9TSE9SVCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IG4sXG4gIGRheTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFX01FRCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFX01FRF9XSVRIX1dFRUtEQVkgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgREFURV9GVUxMID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfSFVHRSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbCxcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FX1NJTVBMRSA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfV0lUSF9TRUNPTkRTID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBzLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfV0lUSF9MT05HX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1NJTVBMRSA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV8yNF9XSVRIX1NFQ09ORFMgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICBob3VyQ3ljbGU6IFwiaDIzXCIsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbiAgdGltZVpvbmVOYW1lOiBzLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbiAgdGltZVpvbmVOYW1lOiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX1NIT1JUID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9NRUQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBzLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfRlVMTCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfSFVHRSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbCxcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICB0aW1lWm9uZU5hbWU6IGwsXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IGwsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IGwsXG59O1xuIiwgImltcG9ydCB7IFpvbmVJc0Fic3RyYWN0RXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcblxuLyoqXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFpvbmUge1xuICAvKipcbiAgICogVGhlIHR5cGUgb2Ygem9uZVxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCB0eXBlKCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhpcyB6b25lLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBuYW1lKCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICBnZXQgaWFuYU5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIG9mZnNldCBpcyBrbm93biB0byBiZSBmaXhlZCBmb3IgdGhlIHdob2xlIHllYXIuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9mZnNldCdzIGNvbW1vbiBuYW1lIChzdWNoIGFzIEVTVCkgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBuYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gT3B0aW9ucyB0byBhZmZlY3QgdGhlIGZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5mb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uIEFjY2VwdHMgJ2xvbmcnIG9yICdzaG9ydCcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmxvY2FsZSAtIFdoYXQgbG9jYWxlIHRvIHJldHVybiB0aGUgb2Zmc2V0IG5hbWUgaW4uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIG9mZnNldE5hbWUodHMsIG9wdHMpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9mZnNldCdzIHZhbHVlIGFzIGEgc3RyaW5nXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGdldCB0aGUgb2Zmc2V0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXQgLSBXaGF0IHN0eWxlIG9mIG9mZnNldCB0byByZXR1cm4uXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICBBY2NlcHRzICduYXJyb3cnLCAnc2hvcnQnLCBvciAndGVjaGllJy4gUmV0dXJuaW5nICcrNicsICcrMDY6MDAnLCBvciAnKzA2MDAnIHJlc3BlY3RpdmVseVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmb3JtYXRPZmZzZXQodHMsIGZvcm1hdCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvZmZzZXQgaW4gbWludXRlcyBmb3IgdGhpcyB6b25lIGF0IHRoZSBzcGVjaWZpZWQgdGltZXN0YW1wLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBjb21wdXRlIHRoZSBvZmZzZXRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgb2Zmc2V0KHRzKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIFpvbmUgaXMgZXF1YWwgdG8gYW5vdGhlciB6b25lXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge1pvbmV9IG90aGVyWm9uZSAtIHRoZSB6b25lIHRvIGNvbXBhcmVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyB2YWxpZC5cbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IGZvcm1hdE9mZnNldCwgcGFyc2Vab25lSW5mbyB9IGZyb20gXCIuLi9pbXBsL3V0aWwuanNcIjtcbmltcG9ydCBab25lIGZyb20gXCIuLi96b25lLmpzXCI7XG5cbmxldCBzaW5nbGV0b24gPSBudWxsO1xuXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGxvY2FsIHpvbmUgZm9yIHRoaXMgSmF2YVNjcmlwdCBlbnZpcm9ubWVudC5cbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTeXN0ZW1ab25lIGV4dGVuZHMgWm9uZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhlIGxvY2FsIHpvbmVcbiAgICogQHJldHVybiB7U3lzdGVtWm9uZX1cbiAgICovXG4gIHN0YXRpYyBnZXQgaW5zdGFuY2UoKSB7XG4gICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkge1xuICAgICAgc2luZ2xldG9uID0gbmV3IFN5c3RlbVpvbmUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZXRvbjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiBcInN5c3RlbVwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0TmFtZSh0cywgeyBmb3JtYXQsIGxvY2FsZSB9KSB7XG4gICAgcmV0dXJuIHBhcnNlWm9uZUluZm8odHMsIGZvcm1hdCwgbG9jYWxlKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXQodHMpIHtcbiAgICByZXR1cm4gLW5ldyBEYXRlKHRzKS5nZXRUaW1lem9uZU9mZnNldCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJzeXN0ZW1cIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZm9ybWF0T2Zmc2V0LCBwYXJzZVpvbmVJbmZvLCBpc1VuZGVmaW5lZCwgb2JqVG9Mb2NhbFRTIH0gZnJvbSBcIi4uL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxubGV0IGR0ZkNhY2hlID0ge307XG5mdW5jdGlvbiBtYWtlRFRGKHpvbmUpIHtcbiAgaWYgKCFkdGZDYWNoZVt6b25lXSkge1xuICAgIGR0ZkNhY2hlW3pvbmVdID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1VU1wiLCB7XG4gICAgICBob3VyMTI6IGZhbHNlLFxuICAgICAgdGltZVpvbmU6IHpvbmUsXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiLFxuICAgICAgZXJhOiBcInNob3J0XCIsXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGR0ZkNhY2hlW3pvbmVdO1xufVxuXG5jb25zdCB0eXBlVG9Qb3MgPSB7XG4gIHllYXI6IDAsXG4gIG1vbnRoOiAxLFxuICBkYXk6IDIsXG4gIGVyYTogMyxcbiAgaG91cjogNCxcbiAgbWludXRlOiA1LFxuICBzZWNvbmQ6IDYsXG59O1xuXG5mdW5jdGlvbiBoYWNreU9mZnNldChkdGYsIGRhdGUpIHtcbiAgY29uc3QgZm9ybWF0dGVkID0gZHRmLmZvcm1hdChkYXRlKS5yZXBsYWNlKC9cXHUyMDBFL2csIFwiXCIpLFxuICAgIHBhcnNlZCA9IC8oXFxkKylcXC8oXFxkKylcXC8oXFxkKykgKEFEfEJDKSw/IChcXGQrKTooXFxkKyk6KFxcZCspLy5leGVjKGZvcm1hdHRlZCksXG4gICAgWywgZk1vbnRoLCBmRGF5LCBmWWVhciwgZmFkT3JCYywgZkhvdXIsIGZNaW51dGUsIGZTZWNvbmRdID0gcGFyc2VkO1xuICByZXR1cm4gW2ZZZWFyLCBmTW9udGgsIGZEYXksIGZhZE9yQmMsIGZIb3VyLCBmTWludXRlLCBmU2Vjb25kXTtcbn1cblxuZnVuY3Rpb24gcGFydHNPZmZzZXQoZHRmLCBkYXRlKSB7XG4gIGNvbnN0IGZvcm1hdHRlZCA9IGR0Zi5mb3JtYXRUb1BhcnRzKGRhdGUpO1xuICBjb25zdCBmaWxsZWQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtYXR0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB7IHR5cGUsIHZhbHVlIH0gPSBmb3JtYXR0ZWRbaV07XG4gICAgY29uc3QgcG9zID0gdHlwZVRvUG9zW3R5cGVdO1xuXG4gICAgaWYgKHR5cGUgPT09IFwiZXJhXCIpIHtcbiAgICAgIGZpbGxlZFtwb3NdID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICghaXNVbmRlZmluZWQocG9zKSkge1xuICAgICAgZmlsbGVkW3Bvc10gPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmlsbGVkO1xufVxuXG5sZXQgaWFuYVpvbmVDYWNoZSA9IHt9O1xuLyoqXG4gKiBBIHpvbmUgaWRlbnRpZmllZCBieSBhbiBJQU5BIGlkZW50aWZpZXIsIGxpa2UgQW1lcmljYS9OZXdfWW9ya1xuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElBTkFab25lIGV4dGVuZHMgWm9uZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFpvbmUgbmFtZVxuICAgKiBAcmV0dXJuIHtJQU5BWm9uZX1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGUobmFtZSkge1xuICAgIGlmICghaWFuYVpvbmVDYWNoZVtuYW1lXSkge1xuICAgICAgaWFuYVpvbmVDYWNoZVtuYW1lXSA9IG5ldyBJQU5BWm9uZShuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuIGlhbmFab25lQ2FjaGVbbmFtZV07XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgbG9jYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgcmVzZXRDYWNoZSgpIHtcbiAgICBpYW5hWm9uZUNhY2hlID0ge307XG4gICAgZHRmQ2FjaGUgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpcyBhIHZhbGlkIHNwZWNpZmllci4gVGhpcyBvbmx5IGNoZWNrcyB0aGUgc3RyaW5nJ3MgZm9ybWF0LCBub3QgdGhhdCB0aGUgc3BlY2lmaWVyIGlkZW50aWZpZXMgYSBrbm93biB6b25lOyBzZWUgaXNWYWxpZFpvbmUgZm9yIHRoYXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzIC0gVGhlIHN0cmluZyB0byBjaGVjayB2YWxpZGl0eSBvblxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiQW1lcmljYS9OZXdfWW9ya1wiKSAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFNwZWNpZmllcihcIlNwb3J0fn5ibG9ycFwiKSAvLz0+IGZhbHNlXG4gICAqIEBkZXByZWNhdGVkIFRoaXMgbWV0aG9kIHJldHVybnMgZmFsc2UgZm9yIHNvbWUgdmFsaWQgSUFOQSBuYW1lcy4gVXNlIGlzVmFsaWRab25lIGluc3RlYWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNWYWxpZFNwZWNpZmllcihzKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFpvbmUocyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBwcm92aWRlZCBzdHJpbmcgaWRlbnRpZmllcyBhIHJlYWwgem9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gem9uZSAtIFRoZSBzdHJpbmcgdG8gY2hlY2tcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJBbWVyaWNhL05ld19Zb3JrXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIkZhbnRhc2lhL0Nhc3RsZVwiKSAvLz0+IGZhbHNlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiU3BvcnR+fmJsb3JwXCIpIC8vPT4gZmFsc2VcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1ZhbGlkWm9uZSh6b25lKSB7XG4gICAgaWYgKCF6b25lKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHsgdGltZVpvbmU6IHpvbmUgfSkuZm9ybWF0KCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IobmFtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuICAgIHRoaXMuem9uZU5hbWUgPSBuYW1lO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cbiAgICB0aGlzLnZhbGlkID0gSUFOQVpvbmUuaXNWYWxpZFpvbmUobmFtZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gXCJpYW5hXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy56b25lTmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXROYW1lKHRzLCB7IGZvcm1hdCwgbG9jYWxlIH0pIHtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUsIHRoaXMubmFtZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBmb3JtYXRPZmZzZXQodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5vZmZzZXQodHMpLCBmb3JtYXQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0KHRzKSB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRzKTtcblxuICAgIGlmIChpc05hTihkYXRlKSkgcmV0dXJuIE5hTjtcblxuICAgIGNvbnN0IGR0ZiA9IG1ha2VEVEYodGhpcy5uYW1lKTtcbiAgICBsZXQgW3llYXIsIG1vbnRoLCBkYXksIGFkT3JCYywgaG91ciwgbWludXRlLCBzZWNvbmRdID0gZHRmLmZvcm1hdFRvUGFydHNcbiAgICAgID8gcGFydHNPZmZzZXQoZHRmLCBkYXRlKVxuICAgICAgOiBoYWNreU9mZnNldChkdGYsIGRhdGUpO1xuXG4gICAgaWYgKGFkT3JCYyA9PT0gXCJCQ1wiKSB7XG4gICAgICB5ZWFyID0gLU1hdGguYWJzKHllYXIpICsgMTtcbiAgICB9XG5cbiAgICAvLyBiZWNhdXNlIHdlJ3JlIHVzaW5nIGhvdXIxMiBhbmQgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTAyNTU2NCZjYW49MiZxPSUyMjI0JTNBMDAlMjIlMjBkYXRldGltZWZvcm1hdFxuICAgIGNvbnN0IGFkanVzdGVkSG91ciA9IGhvdXIgPT09IDI0ID8gMCA6IGhvdXI7XG5cbiAgICBjb25zdCBhc1VUQyA9IG9ialRvTG9jYWxUUyh7XG4gICAgICB5ZWFyLFxuICAgICAgbW9udGgsXG4gICAgICBkYXksXG4gICAgICBob3VyOiBhZGp1c3RlZEhvdXIsXG4gICAgICBtaW51dGUsXG4gICAgICBzZWNvbmQsXG4gICAgICBtaWxsaXNlY29uZDogMCxcbiAgICB9KTtcblxuICAgIGxldCBhc1RTID0gK2RhdGU7XG4gICAgY29uc3Qgb3ZlciA9IGFzVFMgJSAxMDAwO1xuICAgIGFzVFMgLT0gb3ZlciA+PSAwID8gb3ZlciA6IDEwMDAgKyBvdmVyO1xuICAgIHJldHVybiAoYXNVVEMgLSBhc1RTKSAvICg2MCAqIDEwMDApO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJpYW5hXCIgJiYgb3RoZXJab25lLm5hbWUgPT09IHRoaXMubmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLnZhbGlkO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgaGFzTG9jYWxlV2Vla0luZm8sIGhhc1JlbGF0aXZlLCBwYWRTdGFydCwgcm91bmRUbywgdmFsaWRhdGVXZWVrU2V0dGluZ3MgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgKiBhcyBFbmdsaXNoIGZyb20gXCIuL2VuZ2xpc2guanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcblxuLy8gdG9kbyAtIHJlbWFwIGNhY2hpbmdcblxubGV0IGludGxMRkNhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWRMRihsb2NTdHJpbmcsIG9wdHMgPSB7fSkge1xuICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIGxldCBkdGYgPSBpbnRsTEZDYWNoZVtrZXldO1xuICBpZiAoIWR0Zikge1xuICAgIGR0ZiA9IG5ldyBJbnRsLkxpc3RGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsTEZDYWNoZVtrZXldID0gZHRmO1xuICB9XG4gIHJldHVybiBkdGY7XG59XG5cbmxldCBpbnRsRFRDYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkRFRGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgbGV0IGR0ZiA9IGludGxEVENhY2hlW2tleV07XG4gIGlmICghZHRmKSB7XG4gICAgZHRmID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsRFRDYWNoZVtrZXldID0gZHRmO1xuICB9XG4gIHJldHVybiBkdGY7XG59XG5cbmxldCBpbnRsTnVtQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZElORihsb2NTdHJpbmcsIG9wdHMgPSB7fSkge1xuICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBvcHRzXSk7XG4gIGxldCBpbmYgPSBpbnRsTnVtQ2FjaGVba2V5XTtcbiAgaWYgKCFpbmYpIHtcbiAgICBpbmYgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsTnVtQ2FjaGVba2V5XSA9IGluZjtcbiAgfVxuICByZXR1cm4gaW5mO1xufVxuXG5sZXQgaW50bFJlbENhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWRSVEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHtcbiAgY29uc3QgeyBiYXNlLCAuLi5jYWNoZUtleU9wdHMgfSA9IG9wdHM7IC8vIGV4Y2x1ZGUgYGJhc2VgIGZyb20gdGhlIG9wdGlvbnNcbiAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgY2FjaGVLZXlPcHRzXSk7XG4gIGxldCBpbmYgPSBpbnRsUmVsQ2FjaGVba2V5XTtcbiAgaWYgKCFpbmYpIHtcbiAgICBpbmYgPSBuZXcgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQobG9jU3RyaW5nLCBvcHRzKTtcbiAgICBpbnRsUmVsQ2FjaGVba2V5XSA9IGluZjtcbiAgfVxuICByZXR1cm4gaW5mO1xufVxuXG5sZXQgc3lzTG9jYWxlQ2FjaGUgPSBudWxsO1xuZnVuY3Rpb24gc3lzdGVtTG9jYWxlKCkge1xuICBpZiAoc3lzTG9jYWxlQ2FjaGUpIHtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH0gZWxzZSB7XG4gICAgc3lzTG9jYWxlQ2FjaGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZTtcbiAgICByZXR1cm4gc3lzTG9jYWxlQ2FjaGU7XG4gIH1cbn1cblxubGV0IHdlZWtJbmZvQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZFdlZWtJbmZvKGxvY1N0cmluZykge1xuICBsZXQgZGF0YSA9IHdlZWtJbmZvQ2FjaGVbbG9jU3RyaW5nXTtcbiAgaWYgKCFkYXRhKSB7XG4gICAgY29uc3QgbG9jYWxlID0gbmV3IEludGwuTG9jYWxlKGxvY1N0cmluZyk7XG4gICAgLy8gYnJvd3NlcnMgY3VycmVudGx5IGltcGxlbWVudCB0aGlzIGFzIGEgcHJvcGVydHksIGJ1dCBzcGVjIHNheXMgaXQgc2hvdWxkIGJlIGEgZ2V0dGVyIGZ1bmN0aW9uXG4gICAgZGF0YSA9IFwiZ2V0V2Vla0luZm9cIiBpbiBsb2NhbGUgPyBsb2NhbGUuZ2V0V2Vla0luZm8oKSA6IGxvY2FsZS53ZWVrSW5mbztcbiAgICB3ZWVrSW5mb0NhY2hlW2xvY1N0cmluZ10gPSBkYXRhO1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGVTdHIpIHtcbiAgLy8gSSByZWFsbHkgd2FudCB0byBhdm9pZCB3cml0aW5nIGEgQkNQIDQ3IHBhcnNlclxuICAvLyBzZWUsIGUuZy4gaHR0cHM6Ly9naXRodWIuY29tL3dvb29ybS9iY3AtNDdcbiAgLy8gSW5zdGVhZCwgd2UnbGwgZG8gdGhpczpcblxuICAvLyBhKSBpZiB0aGUgc3RyaW5nIGhhcyBubyAtdSBleHRlbnNpb25zLCBqdXN0IGxlYXZlIGl0IGFsb25lXG4gIC8vIGIpIGlmIGl0IGRvZXMsIHVzZSBJbnRsIHRvIHJlc29sdmUgZXZlcnl0aGluZ1xuICAvLyBjKSBpZiBJbnRsIGZhaWxzLCB0cnkgYWdhaW4gd2l0aG91dCB0aGUgLXVcblxuICAvLyBwcml2YXRlIHN1YnRhZ3MgYW5kIHVuaWNvZGUgc3VidGFncyBoYXZlIG9yZGVyaW5nIHJlcXVpcmVtZW50cyxcbiAgLy8gYW5kIHdlJ3JlIG5vdCBwcm9wZXJseSBwYXJzaW5nIHRoaXMsIHNvIGp1c3Qgc3RyaXAgb3V0IHRoZVxuICAvLyBwcml2YXRlIG9uZXMgaWYgdGhleSBleGlzdC5cbiAgY29uc3QgeEluZGV4ID0gbG9jYWxlU3RyLmluZGV4T2YoXCIteC1cIik7XG4gIGlmICh4SW5kZXggIT09IC0xKSB7XG4gICAgbG9jYWxlU3RyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB4SW5kZXgpO1xuICB9XG5cbiAgY29uc3QgdUluZGV4ID0gbG9jYWxlU3RyLmluZGV4T2YoXCItdS1cIik7XG4gIGlmICh1SW5kZXggPT09IC0xKSB7XG4gICAgcmV0dXJuIFtsb2NhbGVTdHJdO1xuICB9IGVsc2Uge1xuICAgIGxldCBvcHRpb25zO1xuICAgIGxldCBzZWxlY3RlZFN0cjtcbiAgICB0cnkge1xuICAgICAgb3B0aW9ucyA9IGdldENhY2hlZERURihsb2NhbGVTdHIpLnJlc29sdmVkT3B0aW9ucygpO1xuICAgICAgc2VsZWN0ZWRTdHIgPSBsb2NhbGVTdHI7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc3Qgc21hbGxlciA9IGxvY2FsZVN0ci5zdWJzdHJpbmcoMCwgdUluZGV4KTtcbiAgICAgIG9wdGlvbnMgPSBnZXRDYWNoZWREVEYoc21hbGxlcikucmVzb2x2ZWRPcHRpb25zKCk7XG4gICAgICBzZWxlY3RlZFN0ciA9IHNtYWxsZXI7XG4gICAgfVxuXG4gICAgY29uc3QgeyBudW1iZXJpbmdTeXN0ZW0sIGNhbGVuZGFyIH0gPSBvcHRpb25zO1xuICAgIHJldHVybiBbc2VsZWN0ZWRTdHIsIG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXJdO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludGxDb25maWdTdHJpbmcobG9jYWxlU3RyLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSB7XG4gIGlmIChvdXRwdXRDYWxlbmRhciB8fCBudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICBpZiAoIWxvY2FsZVN0ci5pbmNsdWRlcyhcIi11LVwiKSkge1xuICAgICAgbG9jYWxlU3RyICs9IFwiLXVcIjtcbiAgICB9XG5cbiAgICBpZiAob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICAgIGxvY2FsZVN0ciArPSBgLWNhLSR7b3V0cHV0Q2FsZW5kYXJ9YDtcbiAgICB9XG5cbiAgICBpZiAobnVtYmVyaW5nU3lzdGVtKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gYC1udS0ke251bWJlcmluZ1N5c3RlbX1gO1xuICAgIH1cbiAgICByZXR1cm4gbG9jYWxlU3RyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsb2NhbGVTdHI7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWFwTW9udGhzKGYpIHtcbiAgY29uc3QgbXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPD0gMTI7IGkrKykge1xuICAgIGNvbnN0IGR0ID0gRGF0ZVRpbWUudXRjKDIwMDksIGksIDEpO1xuICAgIG1zLnB1c2goZihkdCkpO1xuICB9XG4gIHJldHVybiBtcztcbn1cblxuZnVuY3Rpb24gbWFwV2Vla2RheXMoZikge1xuICBjb25zdCBtcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSA3OyBpKyspIHtcbiAgICBjb25zdCBkdCA9IERhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMgKyBpKTtcbiAgICBtcy5wdXNoKGYoZHQpKTtcbiAgfVxuICByZXR1cm4gbXM7XG59XG5cbmZ1bmN0aW9uIGxpc3RTdHVmZihsb2MsIGxlbmd0aCwgZW5nbGlzaEZuLCBpbnRsRm4pIHtcbiAgY29uc3QgbW9kZSA9IGxvYy5saXN0aW5nTW9kZSgpO1xuXG4gIGlmIChtb2RlID09PSBcImVycm9yXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmIChtb2RlID09PSBcImVuXCIpIHtcbiAgICByZXR1cm4gZW5nbGlzaEZuKGxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGludGxGbihsZW5ndGgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHN1cHBvcnRzRmFzdE51bWJlcnMobG9jKSB7XG4gIGlmIChsb2MubnVtYmVyaW5nU3lzdGVtICYmIGxvYy5udW1iZXJpbmdTeXN0ZW0gIT09IFwibGF0blwiKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICBsb2MubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIiB8fFxuICAgICAgIWxvYy5sb2NhbGUgfHxcbiAgICAgIGxvYy5sb2NhbGUuc3RhcnRzV2l0aChcImVuXCIpIHx8XG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2MuaW50bCkucmVzb2x2ZWRPcHRpb25zKCkubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIlxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmNsYXNzIFBvbHlOdW1iZXJGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcihpbnRsLCBmb3JjZVNpbXBsZSwgb3B0cykge1xuICAgIHRoaXMucGFkVG8gPSBvcHRzLnBhZFRvIHx8IDA7XG4gICAgdGhpcy5mbG9vciA9IG9wdHMuZmxvb3IgfHwgZmFsc2U7XG5cbiAgICBjb25zdCB7IHBhZFRvLCBmbG9vciwgLi4ub3RoZXJPcHRzIH0gPSBvcHRzO1xuXG4gICAgaWYgKCFmb3JjZVNpbXBsZSB8fCBPYmplY3Qua2V5cyhvdGhlck9wdHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGludGxPcHRzID0geyB1c2VHcm91cGluZzogZmFsc2UsIC4uLm9wdHMgfTtcbiAgICAgIGlmIChvcHRzLnBhZFRvID4gMCkgaW50bE9wdHMubWluaW11bUludGVnZXJEaWdpdHMgPSBvcHRzLnBhZFRvO1xuICAgICAgdGhpcy5pbmYgPSBnZXRDYWNoZWRJTkYoaW50bCwgaW50bE9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1hdChpKSB7XG4gICAgaWYgKHRoaXMuaW5mKSB7XG4gICAgICBjb25zdCBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogaTtcbiAgICAgIHJldHVybiB0aGlzLmluZi5mb3JtYXQoZml4ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0byBtYXRjaCB0aGUgYnJvd3NlcidzIG51bWJlcmZvcm1hdHRlciBkZWZhdWx0c1xuICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZsb29yID8gTWF0aC5mbG9vcihpKSA6IHJvdW5kVG8oaSwgMyk7XG4gICAgICByZXR1cm4gcGFkU3RhcnQoZml4ZWQsIHRoaXMucGFkVG8pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuY2xhc3MgUG9seURhdGVGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcihkdCwgaW50bCwgb3B0cykge1xuICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgdGhpcy5vcmlnaW5hbFpvbmUgPSB1bmRlZmluZWQ7XG5cbiAgICBsZXQgeiA9IHVuZGVmaW5lZDtcbiAgICBpZiAodGhpcy5vcHRzLnRpbWVab25lKSB7XG4gICAgICAvLyBEb24ndCBhcHBseSBhbnkgd29ya2Fyb3VuZHMgaWYgYSB0aW1lWm9uZSBpcyBleHBsaWNpdGx5IHByb3ZpZGVkIGluIG9wdHNcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICB9IGVsc2UgaWYgKGR0LnpvbmUudHlwZSA9PT0gXCJmaXhlZFwiKSB7XG4gICAgICAvLyBVVEMtOCBvciBFdGMvVVRDLTggYXJlIG5vdCBwYXJ0IG9mIHR6ZGF0YSwgb25seSBFdGMvR01UKzggYW5kIHRoZSBsaWtlLlxuICAgICAgLy8gVGhhdCBpcyB3aHkgZml4ZWQtb2Zmc2V0IFRaIGlzIHNldCB0byB0aGF0IHVubGVzcyBpdCBpczpcbiAgICAgIC8vIDEuIFJlcHJlc2VudGluZyBvZmZzZXQgMCB3aGVuIFVUQyBpcyB1c2VkIHRvIG1haW50YWluIHByZXZpb3VzIGJlaGF2aW9yIGFuZCBkb2VzIG5vdCBiZWNvbWUgR01ULlxuICAgICAgLy8gMi4gVW5zdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXI6XG4gICAgICAvLyAgICAtIHNvbWUgZG8gbm90IHN1cHBvcnQgRXRjL1xuICAgICAgLy8gICAgLSA8IEV0Yy9HTVQtMTQsID4gRXRjL0dNVCsxMiwgYW5kIDMwLW1pbnV0ZSBvciA0NS1taW51dGUgb2Zmc2V0cyBhcmUgbm90IHBhcnQgb2YgdHpkYXRhXG4gICAgICBjb25zdCBnbXRPZmZzZXQgPSAtMSAqIChkdC5vZmZzZXQgLyA2MCk7XG4gICAgICBjb25zdCBvZmZzZXRaID0gZ210T2Zmc2V0ID49IDAgPyBgRXRjL0dNVCske2dtdE9mZnNldH1gIDogYEV0Yy9HTVQke2dtdE9mZnNldH1gO1xuICAgICAgaWYgKGR0Lm9mZnNldCAhPT0gMCAmJiBJQU5BWm9uZS5jcmVhdGUob2Zmc2V0WikudmFsaWQpIHtcbiAgICAgICAgeiA9IG9mZnNldFo7XG4gICAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vdCBhbGwgZml4ZWQtb2Zmc2V0IHpvbmVzIGxpa2UgRXRjLys0OjMwIGFyZSBwcmVzZW50IGluIHR6ZGF0YSBzb1xuICAgICAgICAvLyB3ZSBtYW51YWxseSBhcHBseSB0aGUgb2Zmc2V0IGFuZCBzdWJzdGl0dXRlIHRoZSB6b25lIGFzIG5lZWRlZC5cbiAgICAgICAgeiA9IFwiVVRDXCI7XG4gICAgICAgIHRoaXMuZHQgPSBkdC5vZmZzZXQgPT09IDAgPyBkdCA6IGR0LnNldFpvbmUoXCJVVENcIikucGx1cyh7IG1pbnV0ZXM6IGR0Lm9mZnNldCB9KTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFpvbmUgPSBkdC56b25lO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwiaWFuYVwiKSB7XG4gICAgICB0aGlzLmR0ID0gZHQ7XG4gICAgICB6ID0gZHQuem9uZS5uYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDdXN0b20gem9uZXMgY2FuIGhhdmUgYW55IG9mZnNldCAvIG9mZnNldE5hbWUgc28gd2UganVzdCBtYW51YWxseVxuICAgICAgLy8gYXBwbHkgdGhlIG9mZnNldCBhbmQgc3Vic3RpdHV0ZSB0aGUgem9uZSBhcyBuZWVkZWQuXG4gICAgICB6ID0gXCJVVENcIjtcbiAgICAgIHRoaXMuZHQgPSBkdC5zZXRab25lKFwiVVRDXCIpLnBsdXMoeyBtaW51dGVzOiBkdC5vZmZzZXQgfSk7XG4gICAgICB0aGlzLm9yaWdpbmFsWm9uZSA9IGR0LnpvbmU7XG4gICAgfVxuXG4gICAgY29uc3QgaW50bE9wdHMgPSB7IC4uLnRoaXMub3B0cyB9O1xuICAgIGludGxPcHRzLnRpbWVab25lID0gaW50bE9wdHMudGltZVpvbmUgfHwgejtcbiAgICB0aGlzLmR0ZiA9IGdldENhY2hlZERURihpbnRsLCBpbnRsT3B0cyk7XG4gIH1cblxuICBmb3JtYXQoKSB7XG4gICAgaWYgKHRoaXMub3JpZ2luYWxab25lKSB7XG4gICAgICAvLyBJZiB3ZSBoYXZlIHRvIHN1YnN0aXR1dGUgaW4gdGhlIGFjdHVhbCB6b25lIG5hbWUsIHdlIGhhdmUgdG8gdXNlXG4gICAgICAvLyBmb3JtYXRUb1BhcnRzIHNvIHRoYXQgdGhlIHRpbWV6b25lIGNhbiBiZSByZXBsYWNlZC5cbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFRvUGFydHMoKVxuICAgICAgICAubWFwKCh7IHZhbHVlIH0pID0+IHZhbHVlKVxuICAgICAgICAuam9pbihcIlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZHRmLmZvcm1hdCh0aGlzLmR0LnRvSlNEYXRlKCkpO1xuICB9XG5cbiAgZm9ybWF0VG9QYXJ0cygpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMuZHRmLmZvcm1hdFRvUGFydHModGhpcy5kdC50b0pTRGF0ZSgpKTtcbiAgICBpZiAodGhpcy5vcmlnaW5hbFpvbmUpIHtcbiAgICAgIHJldHVybiBwYXJ0cy5tYXAoKHBhcnQpID0+IHtcbiAgICAgICAgaWYgKHBhcnQudHlwZSA9PT0gXCJ0aW1lWm9uZU5hbWVcIikge1xuICAgICAgICAgIGNvbnN0IG9mZnNldE5hbWUgPSB0aGlzLm9yaWdpbmFsWm9uZS5vZmZzZXROYW1lKHRoaXMuZHQudHMsIHtcbiAgICAgICAgICAgIGxvY2FsZTogdGhpcy5kdC5sb2NhbGUsXG4gICAgICAgICAgICBmb3JtYXQ6IHRoaXMub3B0cy50aW1lWm9uZU5hbWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnBhcnQsXG4gICAgICAgICAgICB2YWx1ZTogb2Zmc2V0TmFtZSxcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBwYXJ0O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG5cbiAgcmVzb2x2ZWRPcHRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmR0Zi5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIFBvbHlSZWxGb3JtYXR0ZXIge1xuICBjb25zdHJ1Y3RvcihpbnRsLCBpc0VuZ2xpc2gsIG9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSB7IHN0eWxlOiBcImxvbmdcIiwgLi4ub3B0cyB9O1xuICAgIGlmICghaXNFbmdsaXNoICYmIGhhc1JlbGF0aXZlKCkpIHtcbiAgICAgIHRoaXMucnRmID0gZ2V0Q2FjaGVkUlRGKGludGwsIG9wdHMpO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1hdChjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdChjb3VudCwgdW5pdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBFbmdsaXNoLmZvcm1hdFJlbGF0aXZlVGltZSh1bml0LCBjb3VudCwgdGhpcy5vcHRzLm51bWVyaWMsIHRoaXMub3B0cy5zdHlsZSAhPT0gXCJsb25nXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpIHtcbiAgICBpZiAodGhpcy5ydGYpIHtcbiAgICAgIHJldHVybiB0aGlzLnJ0Zi5mb3JtYXRUb1BhcnRzKGNvdW50LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBmYWxsYmFja1dlZWtTZXR0aW5ncyA9IHtcbiAgZmlyc3REYXk6IDEsXG4gIG1pbmltYWxEYXlzOiA0LFxuICB3ZWVrZW5kOiBbNiwgN10sXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9jYWxlIHtcbiAgc3RhdGljIGZyb21PcHRzKG9wdHMpIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShcbiAgICAgIG9wdHMubG9jYWxlLFxuICAgICAgb3B0cy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICBvcHRzLm91dHB1dENhbGVuZGFyLFxuICAgICAgb3B0cy53ZWVrU2V0dGluZ3MsXG4gICAgICBvcHRzLmRlZmF1bHRUb0VOXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyLCB3ZWVrU2V0dGluZ3MsIGRlZmF1bHRUb0VOID0gZmFsc2UpIHtcbiAgICBjb25zdCBzcGVjaWZpZWRMb2NhbGUgPSBsb2NhbGUgfHwgU2V0dGluZ3MuZGVmYXVsdExvY2FsZTtcbiAgICAvLyB0aGUgc3lzdGVtIGxvY2FsZSBpcyB1c2VmdWwgZm9yIGh1bWFuIHJlYWRhYmxlIHN0cmluZ3MgYnV0IGFubm95aW5nIGZvciBwYXJzaW5nL2Zvcm1hdHRpbmcga25vd24gZm9ybWF0c1xuICAgIGNvbnN0IGxvY2FsZVIgPSBzcGVjaWZpZWRMb2NhbGUgfHwgKGRlZmF1bHRUb0VOID8gXCJlbi1VU1wiIDogc3lzdGVtTG9jYWxlKCkpO1xuICAgIGNvbnN0IG51bWJlcmluZ1N5c3RlbVIgPSBudW1iZXJpbmdTeXN0ZW0gfHwgU2V0dGluZ3MuZGVmYXVsdE51bWJlcmluZ1N5c3RlbTtcbiAgICBjb25zdCBvdXRwdXRDYWxlbmRhclIgPSBvdXRwdXRDYWxlbmRhciB8fCBTZXR0aW5ncy5kZWZhdWx0T3V0cHV0Q2FsZW5kYXI7XG4gICAgY29uc3Qgd2Vla1NldHRpbmdzUiA9IHZhbGlkYXRlV2Vla1NldHRpbmdzKHdlZWtTZXR0aW5ncykgfHwgU2V0dGluZ3MuZGVmYXVsdFdlZWtTZXR0aW5ncztcbiAgICByZXR1cm4gbmV3IExvY2FsZShsb2NhbGVSLCBudW1iZXJpbmdTeXN0ZW1SLCBvdXRwdXRDYWxlbmRhclIsIHdlZWtTZXR0aW5nc1IsIHNwZWNpZmllZExvY2FsZSk7XG4gIH1cblxuICBzdGF0aWMgcmVzZXRDYWNoZSgpIHtcbiAgICBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG4gICAgaW50bERUQ2FjaGUgPSB7fTtcbiAgICBpbnRsTnVtQ2FjaGUgPSB7fTtcbiAgICBpbnRsUmVsQ2FjaGUgPSB7fTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tT2JqZWN0KHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyLCB3ZWVrU2V0dGluZ3MgfSA9IHt9KSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyLCB3ZWVrU2V0dGluZ3MpO1xuICB9XG5cbiAgY29uc3RydWN0b3IobG9jYWxlLCBudW1iZXJpbmcsIG91dHB1dENhbGVuZGFyLCB3ZWVrU2V0dGluZ3MsIHNwZWNpZmllZExvY2FsZSkge1xuICAgIGNvbnN0IFtwYXJzZWRMb2NhbGUsIHBhcnNlZE51bWJlcmluZ1N5c3RlbSwgcGFyc2VkT3V0cHV0Q2FsZW5kYXJdID0gcGFyc2VMb2NhbGVTdHJpbmcobG9jYWxlKTtcblxuICAgIHRoaXMubG9jYWxlID0gcGFyc2VkTG9jYWxlO1xuICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID0gbnVtYmVyaW5nIHx8IHBhcnNlZE51bWJlcmluZ1N5c3RlbSB8fCBudWxsO1xuICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhciB8fCBwYXJzZWRPdXRwdXRDYWxlbmRhciB8fCBudWxsO1xuICAgIHRoaXMud2Vla1NldHRpbmdzID0gd2Vla1NldHRpbmdzO1xuICAgIHRoaXMuaW50bCA9IGludGxDb25maWdTdHJpbmcodGhpcy5sb2NhbGUsIHRoaXMubnVtYmVyaW5nU3lzdGVtLCB0aGlzLm91dHB1dENhbGVuZGFyKTtcblxuICAgIHRoaXMud2Vla2RheXNDYWNoZSA9IHsgZm9ybWF0OiB7fSwgc3RhbmRhbG9uZToge30gfTtcbiAgICB0aGlzLm1vbnRoc0NhY2hlID0geyBmb3JtYXQ6IHt9LCBzdGFuZGFsb25lOiB7fSB9O1xuICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IG51bGw7XG4gICAgdGhpcy5lcmFDYWNoZSA9IHt9O1xuXG4gICAgdGhpcy5zcGVjaWZpZWRMb2NhbGUgPSBzcGVjaWZpZWRMb2NhbGU7XG4gICAgdGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9IG51bGw7XG4gIH1cblxuICBnZXQgZmFzdE51bWJlcnMoKSB7XG4gICAgaWYgKHRoaXMuZmFzdE51bWJlcnNDYWNoZWQgPT0gbnVsbCkge1xuICAgICAgdGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9IHN1cHBvcnRzRmFzdE51bWJlcnModGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmFzdE51bWJlcnNDYWNoZWQ7XG4gIH1cblxuICBsaXN0aW5nTW9kZSgpIHtcbiAgICBjb25zdCBpc0FjdHVhbGx5RW4gPSB0aGlzLmlzRW5nbGlzaCgpO1xuICAgIGNvbnN0IGhhc05vV2VpcmRuZXNzID1cbiAgICAgICh0aGlzLm51bWJlcmluZ1N5c3RlbSA9PT0gbnVsbCB8fCB0aGlzLm51bWJlcmluZ1N5c3RlbSA9PT0gXCJsYXRuXCIpICYmXG4gICAgICAodGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gbnVsbCB8fCB0aGlzLm91dHB1dENhbGVuZGFyID09PSBcImdyZWdvcnlcIik7XG4gICAgcmV0dXJuIGlzQWN0dWFsbHlFbiAmJiBoYXNOb1dlaXJkbmVzcyA/IFwiZW5cIiA6IFwiaW50bFwiO1xuICB9XG5cbiAgY2xvbmUoYWx0cykge1xuICAgIGlmICghYWx0cyB8fCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhbHRzKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShcbiAgICAgICAgYWx0cy5sb2NhbGUgfHwgdGhpcy5zcGVjaWZpZWRMb2NhbGUsXG4gICAgICAgIGFsdHMubnVtYmVyaW5nU3lzdGVtIHx8IHRoaXMubnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBhbHRzLm91dHB1dENhbGVuZGFyIHx8IHRoaXMub3V0cHV0Q2FsZW5kYXIsXG4gICAgICAgIHZhbGlkYXRlV2Vla1NldHRpbmdzKGFsdHMud2Vla1NldHRpbmdzKSB8fCB0aGlzLndlZWtTZXR0aW5ncyxcbiAgICAgICAgYWx0cy5kZWZhdWx0VG9FTiB8fCBmYWxzZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZWRlZmF1bHRUb0VOKGFsdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IHRydWUgfSk7XG4gIH1cblxuICByZWRlZmF1bHRUb1N5c3RlbShhbHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5jbG9uZSh7IC4uLmFsdHMsIGRlZmF1bHRUb0VOOiBmYWxzZSB9KTtcbiAgfVxuXG4gIG1vbnRocyhsZW5ndGgsIGZvcm1hdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIEVuZ2xpc2gubW9udGhzLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnRsID0gZm9ybWF0ID8geyBtb250aDogbGVuZ3RoLCBkYXk6IFwibnVtZXJpY1wiIH0gOiB7IG1vbnRoOiBsZW5ndGggfSxcbiAgICAgICAgZm9ybWF0U3RyID0gZm9ybWF0ID8gXCJmb3JtYXRcIiA6IFwic3RhbmRhbG9uZVwiO1xuICAgICAgaWYgKCF0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSkge1xuICAgICAgICB0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSA9IG1hcE1vbnRocygoZHQpID0+IHRoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJtb250aFwiKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5tb250aHNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF07XG4gICAgfSk7XG4gIH1cblxuICB3ZWVrZGF5cyhsZW5ndGgsIGZvcm1hdCA9IGZhbHNlKSB7XG4gICAgcmV0dXJuIGxpc3RTdHVmZih0aGlzLCBsZW5ndGgsIEVuZ2xpc2gud2Vla2RheXMsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGwgPSBmb3JtYXRcbiAgICAgICAgICA/IHsgd2Vla2RheTogbGVuZ3RoLCB5ZWFyOiBcIm51bWVyaWNcIiwgbW9udGg6IFwibG9uZ1wiLCBkYXk6IFwibnVtZXJpY1wiIH1cbiAgICAgICAgICA6IHsgd2Vla2RheTogbGVuZ3RoIH0sXG4gICAgICAgIGZvcm1hdFN0ciA9IGZvcm1hdCA/IFwiZm9ybWF0XCIgOiBcInN0YW5kYWxvbmVcIjtcbiAgICAgIGlmICghdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXSkge1xuICAgICAgICB0aGlzLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwV2Vla2RheXMoKGR0KSA9PlxuICAgICAgICAgIHRoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJ3ZWVrZGF5XCIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy53ZWVrZGF5c0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfVxuXG4gIG1lcmlkaWVtcygpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKFxuICAgICAgdGhpcyxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgICgpID0+IEVuZ2xpc2gubWVyaWRpZW1zLFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgYXJpYml0cmFyeSBkYXkgcGVyaW9kcy4gV2UncmUgZ29ubmEgYXNzdW1lIHRoZXJlIGFyZSBleGFjdGx5IHR3b1xuICAgICAgICAvLyBmb3IgQU0gYW5kIFBNLiBUaGlzIGlzIHByb2JhYmx5IHdyb25nLCBidXQgaXQncyBtYWtlcyBwYXJzaW5nIHdheSBlYXNpZXIuXG4gICAgICAgIGlmICghdGhpcy5tZXJpZGllbUNhY2hlKSB7XG4gICAgICAgICAgY29uc3QgaW50bCA9IHsgaG91cjogXCJudW1lcmljXCIsIGhvdXJDeWNsZTogXCJoMTJcIiB9O1xuICAgICAgICAgIHRoaXMubWVyaWRpZW1DYWNoZSA9IFtEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCA5KSwgRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMywgMTkpXS5tYXAoXG4gICAgICAgICAgICAoZHQpID0+IHRoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJkYXlwZXJpb2RcIilcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMubWVyaWRpZW1DYWNoZTtcbiAgICAgIH1cbiAgICApO1xuICB9XG5cbiAgZXJhcyhsZW5ndGgpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgRW5nbGlzaC5lcmFzLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbnRsID0geyBlcmE6IGxlbmd0aCB9O1xuXG4gICAgICAvLyBUaGlzIGlzIHByb2JsZW1hdGljLiBEaWZmZXJlbnQgY2FsZW5kYXJzIGFyZSBnb2luZyB0byBkZWZpbmUgZXJhcyB0b3RhbGx5IGRpZmZlcmVudGx5LiBXaGF0IEkgbmVlZCBpcyB0aGUgbWluaW11bSBzZXQgb2YgZGF0ZXNcbiAgICAgIC8vIHRvIGRlZmluaXRlbHkgZW51bWVyYXRlIHRoZW0uXG4gICAgICBpZiAoIXRoaXMuZXJhQ2FjaGVbbGVuZ3RoXSkge1xuICAgICAgICB0aGlzLmVyYUNhY2hlW2xlbmd0aF0gPSBbRGF0ZVRpbWUudXRjKC00MCwgMSwgMSksIERhdGVUaW1lLnV0YygyMDE3LCAxLCAxKV0ubWFwKChkdCkgPT5cbiAgICAgICAgICB0aGlzLmV4dHJhY3QoZHQsIGludGwsIFwiZXJhXCIpXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmVyYUNhY2hlW2xlbmd0aF07XG4gICAgfSk7XG4gIH1cblxuICBleHRyYWN0KGR0LCBpbnRsT3B0cywgZmllbGQpIHtcbiAgICBjb25zdCBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoZHQsIGludGxPcHRzKSxcbiAgICAgIHJlc3VsdHMgPSBkZi5mb3JtYXRUb1BhcnRzKCksXG4gICAgICBtYXRjaGluZyA9IHJlc3VsdHMuZmluZCgobSkgPT4gbS50eXBlLnRvTG93ZXJDYXNlKCkgPT09IGZpZWxkKTtcbiAgICByZXR1cm4gbWF0Y2hpbmcgPyBtYXRjaGluZy52YWx1ZSA6IG51bGw7XG4gIH1cblxuICBudW1iZXJGb3JtYXR0ZXIob3B0cyA9IHt9KSB7XG4gICAgLy8gdGhpcyBmb3JjZXNpbXBsZSBvcHRpb24gaXMgbmV2ZXIgdXNlZCAodGhlIG9ubHkgY2FsbGVyIHNob3J0LWNpcmN1aXRzIG9uIGl0LCBidXQgaXQgc2VlbXMgc2FmZXIgdG8gbGVhdmUpXG4gICAgLy8gKGluIGNvbnRyYXN0LCB0aGUgcmVzdCBvZiB0aGUgY29uZGl0aW9uIGlzIHVzZWQgaGVhdmlseSlcbiAgICByZXR1cm4gbmV3IFBvbHlOdW1iZXJGb3JtYXR0ZXIodGhpcy5pbnRsLCBvcHRzLmZvcmNlU2ltcGxlIHx8IHRoaXMuZmFzdE51bWJlcnMsIG9wdHMpO1xuICB9XG5cbiAgZHRGb3JtYXR0ZXIoZHQsIGludGxPcHRzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFBvbHlEYXRlRm9ybWF0dGVyKGR0LCB0aGlzLmludGwsIGludGxPcHRzKTtcbiAgfVxuXG4gIHJlbEZvcm1hdHRlcihvcHRzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IFBvbHlSZWxGb3JtYXR0ZXIodGhpcy5pbnRsLCB0aGlzLmlzRW5nbGlzaCgpLCBvcHRzKTtcbiAgfVxuXG4gIGxpc3RGb3JtYXR0ZXIob3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIGdldENhY2hlZExGKHRoaXMuaW50bCwgb3B0cyk7XG4gIH1cblxuICBpc0VuZ2xpc2goKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubG9jYWxlID09PSBcImVuXCIgfHxcbiAgICAgIHRoaXMubG9jYWxlLnRvTG93ZXJDYXNlKCkgPT09IFwiZW4tdXNcIiB8fFxuICAgICAgbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQodGhpcy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGUuc3RhcnRzV2l0aChcImVuLXVzXCIpXG4gICAgKTtcbiAgfVxuXG4gIGdldFdlZWtTZXR0aW5ncygpIHtcbiAgICBpZiAodGhpcy53ZWVrU2V0dGluZ3MpIHtcbiAgICAgIHJldHVybiB0aGlzLndlZWtTZXR0aW5ncztcbiAgICB9IGVsc2UgaWYgKCFoYXNMb2NhbGVXZWVrSW5mbygpKSB7XG4gICAgICByZXR1cm4gZmFsbGJhY2tXZWVrU2V0dGluZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBnZXRDYWNoZWRXZWVrSW5mbyh0aGlzLmxvY2FsZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U3RhcnRPZldlZWsoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkuZmlyc3REYXk7XG4gIH1cblxuICBnZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0V2Vla1NldHRpbmdzKCkubWluaW1hbERheXM7XG4gIH1cblxuICBnZXRXZWVrZW5kRGF5cygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS53ZWVrZW5kO1xuICB9XG5cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubG9jYWxlID09PSBvdGhlci5sb2NhbGUgJiZcbiAgICAgIHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBvdGhlci5udW1iZXJpbmdTeXN0ZW0gJiZcbiAgICAgIHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IG90aGVyLm91dHB1dENhbGVuZGFyXG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IGZvcm1hdE9mZnNldCwgc2lnbmVkT2Zmc2V0IH0gZnJvbSBcIi4uL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxubGV0IHNpbmdsZXRvbiA9IG51bGw7XG5cbi8qKlxuICogQSB6b25lIHdpdGggYSBmaXhlZCBvZmZzZXQgKG1lYW5pbmcgbm8gRFNUKVxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZpeGVkT2Zmc2V0Wm9uZSBleHRlbmRzIFpvbmUge1xuICAvKipcbiAgICogR2V0IGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIFVUQ1xuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHV0Y0luc3RhbmNlKCkge1xuICAgIGlmIChzaW5nbGV0b24gPT09IG51bGwpIHtcbiAgICAgIHNpbmdsZXRvbiA9IG5ldyBGaXhlZE9mZnNldFpvbmUoMCk7XG4gICAgfVxuICAgIHJldHVybiBzaW5nbGV0b247XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGluc3RhbmNlIHdpdGggYSBzcGVjaWZpZWQgb2Zmc2V0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgLSBUaGUgb2Zmc2V0IGluIG1pbnV0ZXNcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgc3RhdGljIGluc3RhbmNlKG9mZnNldCkge1xuICAgIHJldHVybiBvZmZzZXQgPT09IDAgPyBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2UgOiBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFuIGluc3RhbmNlIG9mIEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIGEgVVRDIG9mZnNldCBzdHJpbmcsIGxpa2UgXCJVVEMrNlwiXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzIC0gVGhlIG9mZnNldCBzdHJpbmcgdG8gcGFyc2VcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDKzZcIilcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDKzA2XCIpXG4gICAqIEBleGFtcGxlIEZpeGVkT2Zmc2V0Wm9uZS5wYXJzZVNwZWNpZmllcihcIlVUQy02OjAwXCIpXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBwYXJzZVNwZWNpZmllcihzKSB7XG4gICAgaWYgKHMpIHtcbiAgICAgIGNvbnN0IHIgPSBzLm1hdGNoKC9edXRjKD86KFsrLV1cXGR7MSwyfSkoPzo6KFxcZHsyfSkpPyk/JC9pKTtcbiAgICAgIGlmIChyKSB7XG4gICAgICAgIHJldHVybiBuZXcgRml4ZWRPZmZzZXRab25lKHNpZ25lZE9mZnNldChyWzFdLCByWzJdKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY29uc3RydWN0b3Iob2Zmc2V0KSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogQHByaXZhdGUgKiovXG4gICAgdGhpcy5maXhlZCA9IG9mZnNldDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiBcImZpeGVkXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5maXhlZCA9PT0gMCA/IFwiVVRDXCIgOiBgVVRDJHtmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgXCJuYXJyb3dcIil9YDtcbiAgfVxuXG4gIGdldCBpYW5hTmFtZSgpIHtcbiAgICBpZiAodGhpcy5maXhlZCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFwiRXRjL1VUQ1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYEV0Yy9HTVQke2Zvcm1hdE9mZnNldCgtdGhpcy5maXhlZCwgXCJuYXJyb3dcIil9YDtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBmb3JtYXRPZmZzZXQodHMsIGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXRPZmZzZXQodGhpcy5maXhlZCwgZm9ybWF0KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCgpIHtcbiAgICByZXR1cm4gdGhpcy5maXhlZDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGVxdWFscyhvdGhlclpvbmUpIHtcbiAgICByZXR1cm4gb3RoZXJab25lLnR5cGUgPT09IFwiZml4ZWRcIiAmJiBvdGhlclpvbmUuZml4ZWQgPT09IHRoaXMuZml4ZWQ7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwgImltcG9ydCBab25lIGZyb20gXCIuLi96b25lLmpzXCI7XG5cbi8qKlxuICogQSB6b25lIHRoYXQgZmFpbGVkIHRvIHBhcnNlLiBZb3Ugc2hvdWxkIG5ldmVyIG5lZWQgdG8gaW5zdGFudGlhdGUgdGhpcy5cbiAqIEBpbXBsZW1lbnRzIHtab25lfVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkWm9uZSBleHRlbmRzIFpvbmUge1xuICBjb25zdHJ1Y3Rvcih6b25lTmFtZSkge1xuICAgIHN1cGVyKCk7XG4gICAgLyoqICBAcHJpdmF0ZSAqL1xuICAgIHRoaXMuem9uZU5hbWUgPSB6b25lTmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiBcImludmFsaWRcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnpvbmVOYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBmb3JtYXRPZmZzZXQoKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGVxdWFscygpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIsICIvKipcbiAqIEBwcml2YXRlXG4gKi9cblxuaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCBGaXhlZE9mZnNldFpvbmUgZnJvbSBcIi4uL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qc1wiO1xuaW1wb3J0IEludmFsaWRab25lIGZyb20gXCIuLi96b25lcy9pbnZhbGlkWm9uZS5qc1wiO1xuXG5pbXBvcnQgeyBpc1VuZGVmaW5lZCwgaXNTdHJpbmcsIGlzTnVtYmVyIH0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IFN5c3RlbVpvbmUgZnJvbSBcIi4uL3pvbmVzL3N5c3RlbVpvbmUuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIGRlZmF1bHRab25lKSB7XG4gIGxldCBvZmZzZXQ7XG4gIGlmIChpc1VuZGVmaW5lZChpbnB1dCkgfHwgaW5wdXQgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZGVmYXVsdFpvbmU7XG4gIH0gZWxzZSBpZiAoaW5wdXQgaW5zdGFuY2VvZiBab25lKSB7XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2UgaWYgKGlzU3RyaW5nKGlucHV0KSkge1xuICAgIGNvbnN0IGxvd2VyZWQgPSBpbnB1dC50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcmVkID09PSBcImRlZmF1bHRcIikgcmV0dXJuIGRlZmF1bHRab25lO1xuICAgIGVsc2UgaWYgKGxvd2VyZWQgPT09IFwibG9jYWxcIiB8fCBsb3dlcmVkID09PSBcInN5c3RlbVwiKSByZXR1cm4gU3lzdGVtWm9uZS5pbnN0YW5jZTtcbiAgICBlbHNlIGlmIChsb3dlcmVkID09PSBcInV0Y1wiIHx8IGxvd2VyZWQgPT09IFwiZ210XCIpIHJldHVybiBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2U7XG4gICAgZWxzZSByZXR1cm4gRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKGxvd2VyZWQpIHx8IElBTkFab25lLmNyZWF0ZShpbnB1dCk7XG4gIH0gZWxzZSBpZiAoaXNOdW1iZXIoaW5wdXQpKSB7XG4gICAgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShpbnB1dCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcIm9iamVjdFwiICYmIFwib2Zmc2V0XCIgaW4gaW5wdXQgJiYgdHlwZW9mIGlucHV0Lm9mZnNldCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgLy8gVGhpcyBpcyBkdW1iLCBidXQgdGhlIGluc3RhbmNlb2YgY2hlY2sgYWJvdmUgZG9lc24ndCBzZWVtIHRvIHJlYWxseSB3b3JrXG4gICAgLy8gc28gd2UncmUgZHVjayBjaGVja2luZyBpdFxuICAgIHJldHVybiBpbnB1dDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEludmFsaWRab25lKGlucHV0KTtcbiAgfVxufVxuIiwgImltcG9ydCBTeXN0ZW1ab25lIGZyb20gXCIuL3pvbmVzL3N5c3RlbVpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9pbXBsL2xvY2FsZS5qc1wiO1xuXG5pbXBvcnQgeyBub3JtYWxpemVab25lIH0gZnJvbSBcIi4vaW1wbC96b25lVXRpbC5qc1wiO1xuaW1wb3J0IHsgdmFsaWRhdGVXZWVrU2V0dGluZ3MgfSBmcm9tIFwiLi9pbXBsL3V0aWwuanNcIjtcblxubGV0IG5vdyA9ICgpID0+IERhdGUubm93KCksXG4gIGRlZmF1bHRab25lID0gXCJzeXN0ZW1cIixcbiAgZGVmYXVsdExvY2FsZSA9IG51bGwsXG4gIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBudWxsLFxuICBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIgPSBudWxsLFxuICB0d29EaWdpdEN1dG9mZlllYXIgPSA2MCxcbiAgdGhyb3dPbkludmFsaWQsXG4gIGRlZmF1bHRXZWVrU2V0dGluZ3MgPSBudWxsO1xuXG4vKipcbiAqIFNldHRpbmdzIGNvbnRhaW5zIHN0YXRpYyBnZXR0ZXJzIGFuZCBzZXR0ZXJzIHRoYXQgY29udHJvbCBMdXhvbidzIG92ZXJhbGwgYmVoYXZpb3IuIEx1eG9uIGlzIGEgc2ltcGxlIGxpYnJhcnkgd2l0aCBmZXcgb3B0aW9ucywgYnV0IHRoZSBvbmVzIGl0IGRvZXMgaGF2ZSBsaXZlIGhlcmUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNldHRpbmdzIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgY2FsbGJhY2sgZm9yIHJldHVybmluZyB0aGUgY3VycmVudCB0aW1lc3RhbXAuXG4gICAqIEB0eXBlIHtmdW5jdGlvbn1cbiAgICovXG4gIHN0YXRpYyBnZXQgbm93KCkge1xuICAgIHJldHVybiBub3c7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjYWxsYmFjayBmb3IgcmV0dXJuaW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcC5cbiAgICogVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXIsIHdoaWNoIHdpbGwgYmUgaW50ZXJwcmV0ZWQgYXMgYW4gRXBvY2ggbWlsbGlzZWNvbmQgY291bnRcbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy5ub3cgPSAoKSA9PiBEYXRlLm5vdygpICsgMzAwMCAvLyBwcmV0ZW5kIGl0IGlzIDMgc2Vjb25kcyBpbiB0aGUgZnV0dXJlXG4gICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IDAgLy8gYWx3YXlzIHByZXRlbmQgaXQncyBKYW4gMSwgMTk3MCBhdCBtaWRuaWdodCBpbiBVVEMgdGltZVxuICAgKi9cbiAgc3RhdGljIHNldCBub3cobikge1xuICAgIG5vdyA9IG47XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSB0byBjcmVhdGUgRGF0ZVRpbWVzIGluLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBVc2UgdGhlIHZhbHVlIFwic3lzdGVtXCIgdG8gcmVzZXQgdGhpcyB2YWx1ZSB0byB0aGUgc3lzdGVtJ3MgdGltZSB6b25lLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0Wm9uZSh6b25lKSB7XG4gICAgZGVmYXVsdFpvbmUgPSB6b25lO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCB0aW1lIHpvbmUgb2JqZWN0IGN1cnJlbnRseSB1c2VkIHRvIGNyZWF0ZSBEYXRlVGltZXMuIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUgKHRoZSBvbmUgc2V0IG9uIHRoZSBtYWNoaW5lIHRoYXQgcnVucyB0aGlzIGNvZGUpLlxuICAgKiBAdHlwZSB7Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdFpvbmUoKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVpvbmUoZGVmYXVsdFpvbmUsIFN5c3RlbVpvbmUuaW5zdGFuY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0TG9jYWxlKCkge1xuICAgIHJldHVybiBkZWZhdWx0TG9jYWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBsb2NhbGUgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0TG9jYWxlKGxvY2FsZSkge1xuICAgIGRlZmF1bHRMb2NhbGUgPSBsb2NhbGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKCkge1xuICAgIHJldHVybiBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBudW1iZXJpbmcgc3lzdGVtIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBzZXQgZGVmYXVsdE51bWJlcmluZ1N5c3RlbShudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtID0gbnVtYmVyaW5nU3lzdGVtO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIoKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRPdXRwdXRDYWxlbmRhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgb3V0cHV0IGNhbGVuZGFyIHRvIGNyZWF0ZSBEYXRlVGltZXMgd2l0aC4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBzZXQgZGVmYXVsdE91dHB1dENhbGVuZGFyKG91dHB1dENhbGVuZGFyKSB7XG4gICAgZGVmYXVsdE91dHB1dENhbGVuZGFyID0gb3V0cHV0Q2FsZW5kYXI7XG4gIH1cblxuICAvKipcbiAgICogQHR5cGVkZWYge09iamVjdH0gV2Vla1NldHRpbmdzXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBmaXJzdERheVxuICAgKiBAcHJvcGVydHkge251bWJlcn0gbWluaW1hbERheXNcbiAgICogQHByb3BlcnR5IHtudW1iZXJbXX0gd2Vla2VuZFxuICAgKi9cblxuICAvKipcbiAgICogQHJldHVybiB7V2Vla1NldHRpbmdzfG51bGx9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRXZWVrU2V0dGluZ3MoKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRXZWVrU2V0dGluZ3M7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3dzIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHQgbG9jYWxlIHdlZWsgc2V0dGluZ3MsIGkuZS4gdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrLCB0aGUgd2Vla2VuZCBhbmRcbiAgICogaG93IG1hbnkgZGF5cyBhcmUgcmVxdWlyZWQgaW4gdGhlIGZpcnN0IHdlZWsgb2YgYSB5ZWFyLlxuICAgKiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1dlZWtTZXR0aW5nc3xudWxsfSB3ZWVrU2V0dGluZ3NcbiAgICovXG4gIHN0YXRpYyBzZXQgZGVmYXVsdFdlZWtTZXR0aW5ncyh3ZWVrU2V0dGluZ3MpIHtcbiAgICBkZWZhdWx0V2Vla1NldHRpbmdzID0gdmFsaWRhdGVXZWVrU2V0dGluZ3Mod2Vla1NldHRpbmdzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1dG9mZiB5ZWFyIGFmdGVyIHdoaWNoIGEgc3RyaW5nIGVuY29kaW5nIGEgeWVhciBhcyB0d28gZGlnaXRzIGlzIGludGVycHJldGVkIHRvIG9jY3VyIGluIHRoZSBjdXJyZW50IGNlbnR1cnkuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZ2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcigpIHtcbiAgICByZXR1cm4gdHdvRGlnaXRDdXRvZmZZZWFyO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY3V0b2ZmIHllYXIgYWZ0ZXIgd2hpY2ggYSBzdHJpbmcgZW5jb2RpbmcgYSB5ZWFyIGFzIHR3byBkaWdpdHMgaXMgaW50ZXJwcmV0ZWQgdG8gb2NjdXIgaW4gdGhlIGN1cnJlbnQgY2VudHVyeS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQGV4YW1wbGUgU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID0gMCAvLyBjdXQtb2ZmIHllYXIgaXMgMCwgc28gYWxsICd5eScgYXJlIGludGVycHJldGVkIGFzIGN1cnJlbnQgY2VudHVyeVxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPSA1MCAvLyAnNDknIC0+IDE5NDk7ICc1MCcgLT4gMjA1MFxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPSAxOTUwIC8vIGludGVycHJldGVkIGFzIDUwXG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDIwNTAgLy8gQUxTTyBpbnRlcnByZXRlZCBhcyA1MFxuICAgKi9cbiAgc3RhdGljIHNldCB0d29EaWdpdEN1dG9mZlllYXIoY3V0b2ZmWWVhcikge1xuICAgIHR3b0RpZ2l0Q3V0b2ZmWWVhciA9IGN1dG9mZlllYXIgJSAxMDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGdldCB0aHJvd09uSW52YWxpZCgpIHtcbiAgICByZXR1cm4gdGhyb3dPbkludmFsaWQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgTHV4b24gd2lsbCB0aHJvdyB3aGVuIGl0IGVuY291bnRlcnMgaW52YWxpZCBEYXRlVGltZXMsIER1cmF0aW9ucywgb3IgSW50ZXJ2YWxzXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIHNldCB0aHJvd09uSW52YWxpZCh0KSB7XG4gICAgdGhyb3dPbkludmFsaWQgPSB0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IEx1eG9uJ3MgZ2xvYmFsIGNhY2hlcy4gU2hvdWxkIG9ubHkgYmUgbmVjZXNzYXJ5IGluIHRlc3Rpbmcgc2NlbmFyaW9zLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIHJlc2V0Q2FjaGVzKCkge1xuICAgIExvY2FsZS5yZXNldENhY2hlKCk7XG4gICAgSUFOQVpvbmUucmVzZXRDYWNoZSgpO1xuICB9XG59XG4iLCAiZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW52YWxpZCB7XG4gIGNvbnN0cnVjdG9yKHJlYXNvbiwgZXhwbGFuYXRpb24pIHtcbiAgICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgICB0aGlzLmV4cGxhbmF0aW9uID0gZXhwbGFuYXRpb247XG4gIH1cblxuICB0b01lc3NhZ2UoKSB7XG4gICAgaWYgKHRoaXMuZXhwbGFuYXRpb24pIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnJlYXNvbn06ICR7dGhpcy5leHBsYW5hdGlvbn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5yZWFzb247XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgaW50ZWdlckJldHdlZW4sXG4gIGlzTGVhcFllYXIsXG4gIHRpbWVPYmplY3QsXG4gIGRheXNJblllYXIsXG4gIGRheXNJbk1vbnRoLFxuICB3ZWVrc0luV2Vla1llYXIsXG4gIGlzSW50ZWdlcixcbiAgaXNVbmRlZmluZWQsXG59IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ludmFsaWQuanNcIjtcbmltcG9ydCB7IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuXG5jb25zdCBub25MZWFwTGFkZGVyID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XSxcbiAgbGVhcExhZGRlciA9IFswLCAzMSwgNjAsIDkxLCAxMjEsIDE1MiwgMTgyLCAyMTMsIDI0NCwgMjc0LCAzMDUsIDMzNV07XG5cbmZ1bmN0aW9uIHVuaXRPdXRPZlJhbmdlKHVuaXQsIHZhbHVlKSB7XG4gIHJldHVybiBuZXcgSW52YWxpZChcbiAgICBcInVuaXQgb3V0IG9mIHJhbmdlXCIsXG4gICAgYHlvdSBzcGVjaWZpZWQgJHt2YWx1ZX0gKG9mIHR5cGUgJHt0eXBlb2YgdmFsdWV9KSBhcyBhICR7dW5pdH0sIHdoaWNoIGlzIGludmFsaWRgXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkYXlPZldlZWsoeWVhciwgbW9udGgsIGRheSkge1xuICBjb25zdCBkID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGggLSAxLCBkYXkpKTtcblxuICBpZiAoeWVhciA8IDEwMCAmJiB5ZWFyID49IDApIHtcbiAgICBkLnNldFVUQ0Z1bGxZZWFyKGQuZ2V0VVRDRnVsbFllYXIoKSAtIDE5MDApO1xuICB9XG5cbiAgY29uc3QganMgPSBkLmdldFVUQ0RheSgpO1xuXG4gIHJldHVybiBqcyA9PT0gMCA/IDcgOiBqcztcbn1cblxuZnVuY3Rpb24gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSkge1xuICByZXR1cm4gZGF5ICsgKGlzTGVhcFllYXIoeWVhcikgPyBsZWFwTGFkZGVyIDogbm9uTGVhcExhZGRlcilbbW9udGggLSAxXTtcbn1cblxuZnVuY3Rpb24gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKSB7XG4gIGNvbnN0IHRhYmxlID0gaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyLFxuICAgIG1vbnRoMCA9IHRhYmxlLmZpbmRJbmRleCgoaSkgPT4gaSA8IG9yZGluYWwpLFxuICAgIGRheSA9IG9yZGluYWwgLSB0YWJsZVttb250aDBdO1xuICByZXR1cm4geyBtb250aDogbW9udGgwICsgMSwgZGF5IH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc29XZWVrZGF5VG9Mb2NhbChpc29XZWVrZGF5LCBzdGFydE9mV2Vlaykge1xuICByZXR1cm4gKChpc29XZWVrZGF5IC0gc3RhcnRPZldlZWsgKyA3KSAlIDcpICsgMTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBncmVnb3JpYW5Ub1dlZWsoZ3JlZ09iaiwgbWluRGF5c0luRmlyc3RXZWVrID0gNCwgc3RhcnRPZldlZWsgPSAxKSB7XG4gIGNvbnN0IHsgeWVhciwgbW9udGgsIGRheSB9ID0gZ3JlZ09iaixcbiAgICBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSksXG4gICAgd2Vla2RheSA9IGlzb1dlZWtkYXlUb0xvY2FsKGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSwgc3RhcnRPZldlZWspO1xuXG4gIGxldCB3ZWVrTnVtYmVyID0gTWF0aC5mbG9vcigob3JkaW5hbCAtIHdlZWtkYXkgKyAxNCAtIG1pbkRheXNJbkZpcnN0V2VlaykgLyA3KSxcbiAgICB3ZWVrWWVhcjtcblxuICBpZiAod2Vla051bWJlciA8IDEpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgLSAxO1xuICAgIHdlZWtOdW1iZXIgPSB3ZWVrc0luV2Vla1llYXIod2Vla1llYXIsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspO1xuICB9IGVsc2UgaWYgKHdlZWtOdW1iZXIgPiB3ZWVrc0luV2Vla1llYXIoeWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlaykpIHtcbiAgICB3ZWVrWWVhciA9IHllYXIgKyAxO1xuICAgIHdlZWtOdW1iZXIgPSAxO1xuICB9IGVsc2Uge1xuICAgIHdlZWtZZWFyID0geWVhcjtcbiAgfVxuXG4gIHJldHVybiB7IHdlZWtZZWFyLCB3ZWVrTnVtYmVyLCB3ZWVrZGF5LCAuLi50aW1lT2JqZWN0KGdyZWdPYmopIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrVG9HcmVnb3JpYW4od2Vla0RhdGEsIG1pbkRheXNJbkZpcnN0V2VlayA9IDQsIHN0YXJ0T2ZXZWVrID0gMSkge1xuICBjb25zdCB7IHdlZWtZZWFyLCB3ZWVrTnVtYmVyLCB3ZWVrZGF5IH0gPSB3ZWVrRGF0YSxcbiAgICB3ZWVrZGF5T2ZKYW40ID0gaXNvV2Vla2RheVRvTG9jYWwoZGF5T2ZXZWVrKHdlZWtZZWFyLCAxLCBtaW5EYXlzSW5GaXJzdFdlZWspLCBzdGFydE9mV2VlayksXG4gICAgeWVhckluRGF5cyA9IGRheXNJblllYXIod2Vla1llYXIpO1xuXG4gIGxldCBvcmRpbmFsID0gd2Vla051bWJlciAqIDcgKyB3ZWVrZGF5IC0gd2Vla2RheU9mSmFuNCAtIDcgKyBtaW5EYXlzSW5GaXJzdFdlZWssXG4gICAgeWVhcjtcblxuICBpZiAob3JkaW5hbCA8IDEpIHtcbiAgICB5ZWFyID0gd2Vla1llYXIgLSAxO1xuICAgIG9yZGluYWwgKz0gZGF5c0luWWVhcih5ZWFyKTtcbiAgfSBlbHNlIGlmIChvcmRpbmFsID4geWVhckluRGF5cykge1xuICAgIHllYXIgPSB3ZWVrWWVhciArIDE7XG4gICAgb3JkaW5hbCAtPSBkYXlzSW5ZZWFyKHdlZWtZZWFyKTtcbiAgfSBlbHNlIHtcbiAgICB5ZWFyID0gd2Vla1llYXI7XG4gIH1cblxuICBjb25zdCB7IG1vbnRoLCBkYXkgfSA9IHVuY29tcHV0ZU9yZGluYWwoeWVhciwgb3JkaW5hbCk7XG4gIHJldHVybiB7IHllYXIsIG1vbnRoLCBkYXksIC4uLnRpbWVPYmplY3Qod2Vla0RhdGEpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBncmVnb3JpYW5Ub09yZGluYWwoZ3JlZ0RhdGEpIHtcbiAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSBncmVnRGF0YTtcbiAgY29uc3Qgb3JkaW5hbCA9IGNvbXB1dGVPcmRpbmFsKHllYXIsIG1vbnRoLCBkYXkpO1xuICByZXR1cm4geyB5ZWFyLCBvcmRpbmFsLCAuLi50aW1lT2JqZWN0KGdyZWdEYXRhKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3JkaW5hbFRvR3JlZ29yaWFuKG9yZGluYWxEYXRhKSB7XG4gIGNvbnN0IHsgeWVhciwgb3JkaW5hbCB9ID0gb3JkaW5hbERhdGE7XG4gIGNvbnN0IHsgbW9udGgsIGRheSB9ID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKTtcbiAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSwgLi4udGltZU9iamVjdChvcmRpbmFsRGF0YSkgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBsb2NhbCB3ZWVrIHVuaXRzIGxpa2UgbG9jYWxXZWVrZGF5IGFyZSB1c2VkIGluIG9iai5cbiAqIElmIHNvLCB2YWxpZGF0ZXMgdGhhdCB0aGV5IGFyZSBub3QgbWl4ZWQgd2l0aCBJU08gd2VlayB1bml0cyBhbmQgdGhlbiBjb3BpZXMgdGhlbSB0byB0aGUgbm9ybWFsIHdlZWsgdW5pdCBwcm9wZXJ0aWVzLlxuICogTW9kaWZpZXMgb2JqIGluLXBsYWNlIVxuICogQHBhcmFtIG9iaiB0aGUgb2JqZWN0IHZhbHVlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlc0xvY2FsV2Vla1ZhbHVlcyhvYmosIGxvYykge1xuICBjb25zdCBoYXNMb2NhbGVXZWVrRGF0YSA9XG4gICAgIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtkYXkpIHx8XG4gICAgIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtOdW1iZXIpIHx8XG4gICAgIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtZZWFyKTtcbiAgaWYgKGhhc0xvY2FsZVdlZWtEYXRhKSB7XG4gICAgY29uc3QgaGFzSXNvV2Vla0RhdGEgPVxuICAgICAgIWlzVW5kZWZpbmVkKG9iai53ZWVrZGF5KSB8fCAhaXNVbmRlZmluZWQob2JqLndlZWtOdW1iZXIpIHx8ICFpc1VuZGVmaW5lZChvYmoud2Vla1llYXIpO1xuXG4gICAgaWYgKGhhc0lzb1dlZWtEYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IG1peCBsb2NhbGUtYmFzZWQgd2VlayBmaWVsZHMgd2l0aCBJU08tYmFzZWQgd2VlayBmaWVsZHNcIlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKCFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrZGF5KSkgb2JqLndlZWtkYXkgPSBvYmoubG9jYWxXZWVrZGF5O1xuICAgIGlmICghaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla051bWJlcikpIG9iai53ZWVrTnVtYmVyID0gb2JqLmxvY2FsV2Vla051bWJlcjtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtZZWFyKSkgb2JqLndlZWtZZWFyID0gb2JqLmxvY2FsV2Vla1llYXI7XG4gICAgZGVsZXRlIG9iai5sb2NhbFdlZWtkYXk7XG4gICAgZGVsZXRlIG9iai5sb2NhbFdlZWtOdW1iZXI7XG4gICAgZGVsZXRlIG9iai5sb2NhbFdlZWtZZWFyO1xuICAgIHJldHVybiB7XG4gICAgICBtaW5EYXlzSW5GaXJzdFdlZWs6IGxvYy5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxcbiAgICAgIHN0YXJ0T2ZXZWVrOiBsb2MuZ2V0U3RhcnRPZldlZWsoKSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IG1pbkRheXNJbkZpcnN0V2VlazogNCwgc3RhcnRPZldlZWs6IDEgfTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZFdlZWtEYXRhKG9iaiwgbWluRGF5c0luRmlyc3RXZWVrID0gNCwgc3RhcnRPZldlZWsgPSAxKSB7XG4gIGNvbnN0IHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoud2Vla1llYXIpLFxuICAgIHZhbGlkV2VlayA9IGludGVnZXJCZXR3ZWVuKFxuICAgICAgb2JqLndlZWtOdW1iZXIsXG4gICAgICAxLFxuICAgICAgd2Vla3NJbldlZWtZZWFyKG9iai53ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlaylcbiAgICApLFxuICAgIHZhbGlkV2Vla2RheSA9IGludGVnZXJCZXR3ZWVuKG9iai53ZWVrZGF5LCAxLCA3KTtcblxuICBpZiAoIXZhbGlkWWVhcikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtZZWFyXCIsIG9iai53ZWVrWWVhcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vlaykge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtcIiwgb2JqLndlZWtOdW1iZXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZFdlZWtkYXkpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ3ZWVrZGF5XCIsIG9iai53ZWVrZGF5KTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRPcmRpbmFsRGF0YShvYmopIHtcbiAgY29uc3QgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai55ZWFyKSxcbiAgICB2YWxpZE9yZGluYWwgPSBpbnRlZ2VyQmV0d2VlbihvYmoub3JkaW5hbCwgMSwgZGF5c0luWWVhcihvYmoueWVhcikpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwieWVhclwiLCBvYmoueWVhcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkT3JkaW5hbCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm9yZGluYWxcIiwgb2JqLm9yZGluYWwpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB7XG4gIGNvbnN0IHZhbGlkWWVhciA9IGlzSW50ZWdlcihvYmoueWVhciksXG4gICAgdmFsaWRNb250aCA9IGludGVnZXJCZXR3ZWVuKG9iai5tb250aCwgMSwgMTIpLFxuICAgIHZhbGlkRGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLmRheSwgMSwgZGF5c0luTW9udGgob2JqLnllYXIsIG9iai5tb250aCkpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwieWVhclwiLCBvYmoueWVhcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTW9udGgpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtb250aFwiLCBvYmoubW9udGgpO1xuICB9IGVsc2UgaWYgKCF2YWxpZERheSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcImRheVwiLCBvYmouZGF5KTtcbiAgfSBlbHNlIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRUaW1lRGF0YShvYmopIHtcbiAgY29uc3QgeyBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmQgfSA9IG9iajtcbiAgY29uc3QgdmFsaWRIb3VyID1cbiAgICAgIGludGVnZXJCZXR3ZWVuKGhvdXIsIDAsIDIzKSB8fFxuICAgICAgKGhvdXIgPT09IDI0ICYmIG1pbnV0ZSA9PT0gMCAmJiBzZWNvbmQgPT09IDAgJiYgbWlsbGlzZWNvbmQgPT09IDApLFxuICAgIHZhbGlkTWludXRlID0gaW50ZWdlckJldHdlZW4obWludXRlLCAwLCA1OSksXG4gICAgdmFsaWRTZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihzZWNvbmQsIDAsIDU5KSxcbiAgICB2YWxpZE1pbGxpc2Vjb25kID0gaW50ZWdlckJldHdlZW4obWlsbGlzZWNvbmQsIDAsIDk5OSk7XG5cbiAgaWYgKCF2YWxpZEhvdXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJob3VyXCIsIGhvdXIpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1pbnV0ZSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1pbnV0ZVwiLCBtaW51dGUpO1xuICB9IGVsc2UgaWYgKCF2YWxpZFNlY29uZCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcInNlY29uZFwiLCBzZWNvbmQpO1xuICB9IGVsc2UgaWYgKCF2YWxpZE1pbGxpc2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWlsbGlzZWNvbmRcIiwgbWlsbGlzZWNvbmQpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuIiwgIi8qXG4gIFRoaXMgaXMganVzdCBhIGp1bmsgZHJhd2VyLCBjb250YWluaW5nIGFueXRoaW5nIHVzZWQgYWNyb3NzIG11bHRpcGxlIGNsYXNzZXMuXG4gIEJlY2F1c2UgTHV4b24gaXMgc21hbGwoaXNoKSwgdGhpcyBzaG91bGQgc3RheSBzbWFsbCBhbmQgd2Ugd29uJ3Qgd29ycnkgYWJvdXQgc3BsaXR0aW5nXG4gIGl0IHVwIGludG8sIHNheSwgcGFyc2luZ1V0aWwuanMgYW5kIGJhc2ljVXRpbC5qcyBhbmQgc28gb24uIEJ1dCB0aGV5IGFyZSBkaXZpZGVkIHVwIGJ5IGZlYXR1cmUgYXJlYS5cbiovXG5cbmltcG9ydCB7IEludmFsaWRBcmd1bWVudEVycm9yIH0gZnJvbSBcIi4uL2Vycm9ycy5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IHsgZGF5T2ZXZWVrLCBpc29XZWVrZGF5VG9Mb2NhbCB9IGZyb20gXCIuL2NvbnZlcnNpb25zLmpzXCI7XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG4vLyBUWVBFU1xuXG5leHBvcnQgZnVuY3Rpb24gaXNVbmRlZmluZWQobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwidW5kZWZpbmVkXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcihvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJudW1iZXJcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzSW50ZWdlcihvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJudW1iZXJcIiAmJiBvICUgMSA9PT0gMDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcInN0cmluZ1wiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSA9PT0gXCJbb2JqZWN0IERhdGVdXCI7XG59XG5cbi8vIENBUEFCSUxJVElFU1xuXG5leHBvcnQgZnVuY3Rpb24gaGFzUmVsYXRpdmUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHR5cGVvZiBJbnRsICE9PSBcInVuZGVmaW5lZFwiICYmICEhSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0xvY2FsZVdlZWtJbmZvKCkge1xuICB0cnkge1xuICAgIHJldHVybiAoXG4gICAgICB0eXBlb2YgSW50bCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgISFJbnRsLkxvY2FsZSAmJlxuICAgICAgKFwid2Vla0luZm9cIiBpbiBJbnRsLkxvY2FsZS5wcm90b3R5cGUgfHwgXCJnZXRXZWVrSW5mb1wiIGluIEludGwuTG9jYWxlLnByb3RvdHlwZSlcbiAgICApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIE9CSkVDVFMgQU5EIEFSUkFZU1xuXG5leHBvcnQgZnVuY3Rpb24gbWF5YmVBcnJheSh0aGluZykge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGluZykgPyB0aGluZyA6IFt0aGluZ107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiZXN0QnkoYXJyLCBieSwgY29tcGFyZSkge1xuICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGFyci5yZWR1Y2UoKGJlc3QsIG5leHQpID0+IHtcbiAgICBjb25zdCBwYWlyID0gW2J5KG5leHQpLCBuZXh0XTtcbiAgICBpZiAoIWJlc3QpIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH0gZWxzZSBpZiAoY29tcGFyZShiZXN0WzBdLCBwYWlyWzBdKSA9PT0gYmVzdFswXSkge1xuICAgICAgcmV0dXJuIGJlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYWlyO1xuICAgIH1cbiAgfSwgbnVsbClbMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwaWNrKG9iaiwga2V5cykge1xuICByZXR1cm4ga2V5cy5yZWR1Y2UoKGEsIGspID0+IHtcbiAgICBhW2tdID0gb2JqW2tdO1xuICAgIHJldHVybiBhO1xuICB9LCB7fSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVXZWVrU2V0dGluZ3Moc2V0dGluZ3MpIHtcbiAgaWYgKHNldHRpbmdzID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc2V0dGluZ3MgIT09IFwib2JqZWN0XCIpIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJXZWVrIHNldHRpbmdzIG11c3QgYmUgYW4gb2JqZWN0XCIpO1xuICB9IGVsc2Uge1xuICAgIGlmIChcbiAgICAgICFpbnRlZ2VyQmV0d2VlbihzZXR0aW5ncy5maXJzdERheSwgMSwgNykgfHxcbiAgICAgICFpbnRlZ2VyQmV0d2VlbihzZXR0aW5ncy5taW5pbWFsRGF5cywgMSwgNykgfHxcbiAgICAgICFBcnJheS5pc0FycmF5KHNldHRpbmdzLndlZWtlbmQpIHx8XG4gICAgICBzZXR0aW5ncy53ZWVrZW5kLnNvbWUoKHYpID0+ICFpbnRlZ2VyQmV0d2Vlbih2LCAxLCA3KSlcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIkludmFsaWQgd2VlayBzZXR0aW5nc1wiKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpcnN0RGF5OiBzZXR0aW5ncy5maXJzdERheSxcbiAgICAgIG1pbmltYWxEYXlzOiBzZXR0aW5ncy5taW5pbWFsRGF5cyxcbiAgICAgIHdlZWtlbmQ6IEFycmF5LmZyb20oc2V0dGluZ3Mud2Vla2VuZCksXG4gICAgfTtcbiAgfVxufVxuXG4vLyBOVU1CRVJTIEFORCBTVFJJTkdTXG5cbmV4cG9ydCBmdW5jdGlvbiBpbnRlZ2VyQmV0d2Vlbih0aGluZywgYm90dG9tLCB0b3ApIHtcbiAgcmV0dXJuIGlzSW50ZWdlcih0aGluZykgJiYgdGhpbmcgPj0gYm90dG9tICYmIHRoaW5nIDw9IHRvcDtcbn1cblxuLy8geCAlIG4gYnV0IHRha2VzIHRoZSBzaWduIG9mIG4gaW5zdGVhZCBvZiB4XG5leHBvcnQgZnVuY3Rpb24gZmxvb3JNb2QoeCwgbikge1xuICByZXR1cm4geCAtIG4gKiBNYXRoLmZsb29yKHggLyBuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhZFN0YXJ0KGlucHV0LCBuID0gMikge1xuICBjb25zdCBpc05lZyA9IGlucHV0IDwgMDtcbiAgbGV0IHBhZGRlZDtcbiAgaWYgKGlzTmVnKSB7XG4gICAgcGFkZGVkID0gXCItXCIgKyAoXCJcIiArIC1pbnB1dCkucGFkU3RhcnQobiwgXCIwXCIpO1xuICB9IGVsc2Uge1xuICAgIHBhZGRlZCA9IChcIlwiICsgaW5wdXQpLnBhZFN0YXJ0KG4sIFwiMFwiKTtcbiAgfVxuICByZXR1cm4gcGFkZGVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJbnRlZ2VyKHN0cmluZykge1xuICBpZiAoaXNVbmRlZmluZWQoc3RyaW5nKSB8fCBzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoc3RyaW5nLCAxMCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRmxvYXRpbmcoc3RyaW5nKSB7XG4gIGlmIChpc1VuZGVmaW5lZChzdHJpbmcpIHx8IHN0cmluZyA9PT0gbnVsbCB8fCBzdHJpbmcgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KHN0cmluZyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTWlsbGlzKGZyYWN0aW9uKSB7XG4gIC8vIFJldHVybiB1bmRlZmluZWQgKGluc3RlYWQgb2YgMCkgaW4gdGhlc2UgY2FzZXMsIHdoZXJlIGZyYWN0aW9uIGlzIG5vdCBzZXRcbiAgaWYgKGlzVW5kZWZpbmVkKGZyYWN0aW9uKSB8fCBmcmFjdGlvbiA9PT0gbnVsbCB8fCBmcmFjdGlvbiA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZiA9IHBhcnNlRmxvYXQoXCIwLlwiICsgZnJhY3Rpb24pICogMTAwMDtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihmKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcm91bmRUbyhudW1iZXIsIGRpZ2l0cywgdG93YXJkWmVybyA9IGZhbHNlKSB7XG4gIGNvbnN0IGZhY3RvciA9IDEwICoqIGRpZ2l0cyxcbiAgICByb3VuZGVyID0gdG93YXJkWmVybyA/IE1hdGgudHJ1bmMgOiBNYXRoLnJvdW5kO1xuICByZXR1cm4gcm91bmRlcihudW1iZXIgKiBmYWN0b3IpIC8gZmFjdG9yO1xufVxuXG4vLyBEQVRFIEJBU0lDU1xuXG5leHBvcnQgZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7XG4gIHJldHVybiB5ZWFyICUgNCA9PT0gMCAmJiAoeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRheXNJblllYXIoeWVhcikge1xuICByZXR1cm4gaXNMZWFwWWVhcih5ZWFyKSA/IDM2NiA6IDM2NTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gIGNvbnN0IG1vZE1vbnRoID0gZmxvb3JNb2QobW9udGggLSAxLCAxMikgKyAxLFxuICAgIG1vZFllYXIgPSB5ZWFyICsgKG1vbnRoIC0gbW9kTW9udGgpIC8gMTI7XG5cbiAgaWYgKG1vZE1vbnRoID09PSAyKSB7XG4gICAgcmV0dXJuIGlzTGVhcFllYXIobW9kWWVhcikgPyAyOSA6IDI4O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbMzEsIG51bGwsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXVttb2RNb250aCAtIDFdO1xuICB9XG59XG5cbi8vIGNvbnZlcnQgYSBjYWxlbmRhciBvYmplY3QgdG8gYSBsb2NhbCB0aW1lc3RhbXAgKGVwb2NoLCBidXQgd2l0aCB0aGUgb2Zmc2V0IGJha2VkIGluKVxuZXhwb3J0IGZ1bmN0aW9uIG9ialRvTG9jYWxUUyhvYmopIHtcbiAgbGV0IGQgPSBEYXRlLlVUQyhcbiAgICBvYmoueWVhcixcbiAgICBvYmoubW9udGggLSAxLFxuICAgIG9iai5kYXksXG4gICAgb2JqLmhvdXIsXG4gICAgb2JqLm1pbnV0ZSxcbiAgICBvYmouc2Vjb25kLFxuICAgIG9iai5taWxsaXNlY29uZFxuICApO1xuXG4gIC8vIGZvciBsZWdhY3kgcmVhc29ucywgeWVhcnMgYmV0d2VlbiAwIGFuZCA5OSBhcmUgaW50ZXJwcmV0ZWQgYXMgMTlYWDsgcmV2ZXJ0IHRoYXRcbiAgaWYgKG9iai55ZWFyIDwgMTAwICYmIG9iai55ZWFyID49IDApIHtcbiAgICBkID0gbmV3IERhdGUoZCk7XG4gICAgLy8gc2V0IHRoZSBtb250aCBhbmQgZGF5IGFnYWluLCB0aGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHllYXIgMjAwMCBpcyBhIGxlYXAgeWVhciwgYnV0IHllYXIgMTAwIGlzIG5vdFxuICAgIC8vIHNvIGlmIG9iai55ZWFyIGlzIGluIDk5LCBidXQgb2JqLmRheSBtYWtlcyBpdCByb2xsIG92ZXIgaW50byB5ZWFyIDEwMCxcbiAgICAvLyB0aGUgY2FsY3VsYXRpb25zIGRvbmUgYnkgRGF0ZS5VVEMgYXJlIHVzaW5nIHllYXIgMjAwMCAtIHdoaWNoIGlzIGluY29ycmVjdFxuICAgIGQuc2V0VVRDRnVsbFllYXIob2JqLnllYXIsIG9iai5tb250aCAtIDEsIG9iai5kYXkpO1xuICB9XG4gIHJldHVybiArZDtcbn1cblxuLy8gYWRhcHRlZCBmcm9tIG1vbWVudC5qczogaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvYmxvYi8wMDBhYzE4MDBlNjIwZjc3MGY0ZWIzMWI1YWU5MDhmNjE2N2IwYWIyL3NyYy9saWIvdW5pdHMvd2Vlay1jYWxlbmRhci11dGlscy5qc1xuZnVuY3Rpb24gZmlyc3RXZWVrT2Zmc2V0KHllYXIsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspIHtcbiAgY29uc3QgZndkbHcgPSBpc29XZWVrZGF5VG9Mb2NhbChkYXlPZldlZWsoeWVhciwgMSwgbWluRGF5c0luRmlyc3RXZWVrKSwgc3RhcnRPZldlZWspO1xuICByZXR1cm4gLWZ3ZGx3ICsgbWluRGF5c0luRmlyc3RXZWVrIC0gMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrID0gNCwgc3RhcnRPZldlZWsgPSAxKSB7XG4gIGNvbnN0IHdlZWtPZmZzZXQgPSBmaXJzdFdlZWtPZmZzZXQod2Vla1llYXIsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspO1xuICBjb25zdCB3ZWVrT2Zmc2V0TmV4dCA9IGZpcnN0V2Vla09mZnNldCh3ZWVrWWVhciArIDEsIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspO1xuICByZXR1cm4gKGRheXNJblllYXIod2Vla1llYXIpIC0gd2Vla09mZnNldCArIHdlZWtPZmZzZXROZXh0KSAvIDc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnRydW5jYXRlWWVhcih5ZWFyKSB7XG4gIGlmICh5ZWFyID4gOTkpIHtcbiAgICByZXR1cm4geWVhcjtcbiAgfSBlbHNlIHJldHVybiB5ZWFyID4gU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID8gMTkwMCArIHllYXIgOiAyMDAwICsgeWVhcjtcbn1cblxuLy8gUEFSU0lOR1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2Vab25lSW5mbyh0cywgb2Zmc2V0Rm9ybWF0LCBsb2NhbGUsIHRpbWVab25lID0gbnVsbCkge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUodHMpLFxuICAgIGludGxPcHRzID0ge1xuICAgICAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICAgICAgeWVhcjogXCJudW1lcmljXCIsXG4gICAgICBtb250aDogXCIyLWRpZ2l0XCIsXG4gICAgICBkYXk6IFwiMi1kaWdpdFwiLFxuICAgICAgaG91cjogXCIyLWRpZ2l0XCIsXG4gICAgICBtaW51dGU6IFwiMi1kaWdpdFwiLFxuICAgIH07XG5cbiAgaWYgKHRpbWVab25lKSB7XG4gICAgaW50bE9wdHMudGltZVpvbmUgPSB0aW1lWm9uZTtcbiAgfVxuXG4gIGNvbnN0IG1vZGlmaWVkID0geyB0aW1lWm9uZU5hbWU6IG9mZnNldEZvcm1hdCwgLi4uaW50bE9wdHMgfTtcblxuICBjb25zdCBwYXJzZWQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIG1vZGlmaWVkKVxuICAgIC5mb3JtYXRUb1BhcnRzKGRhdGUpXG4gICAgLmZpbmQoKG0pID0+IG0udHlwZS50b0xvd2VyQ2FzZSgpID09PSBcInRpbWV6b25lbmFtZVwiKTtcbiAgcmV0dXJuIHBhcnNlZCA/IHBhcnNlZC52YWx1ZSA6IG51bGw7XG59XG5cbi8vIHNpZ25lZE9mZnNldCgnLTUnLCAnMzAnKSAtPiAtMzMwXG5leHBvcnQgZnVuY3Rpb24gc2lnbmVkT2Zmc2V0KG9mZkhvdXJTdHIsIG9mZk1pbnV0ZVN0cikge1xuICBsZXQgb2ZmSG91ciA9IHBhcnNlSW50KG9mZkhvdXJTdHIsIDEwKTtcblxuICAvLyBkb24ndCB8fCB0aGlzIGJlY2F1c2Ugd2Ugd2FudCB0byBwcmVzZXJ2ZSAtMFxuICBpZiAoTnVtYmVyLmlzTmFOKG9mZkhvdXIpKSB7XG4gICAgb2ZmSG91ciA9IDA7XG4gIH1cblxuICBjb25zdCBvZmZNaW4gPSBwYXJzZUludChvZmZNaW51dGVTdHIsIDEwKSB8fCAwLFxuICAgIG9mZk1pblNpZ25lZCA9IG9mZkhvdXIgPCAwIHx8IE9iamVjdC5pcyhvZmZIb3VyLCAtMCkgPyAtb2ZmTWluIDogb2ZmTWluO1xuICByZXR1cm4gb2ZmSG91ciAqIDYwICsgb2ZmTWluU2lnbmVkO1xufVxuXG4vLyBDT0VSQ0lPTlxuXG5leHBvcnQgZnVuY3Rpb24gYXNOdW1iZXIodmFsdWUpIHtcbiAgY29uc3QgbnVtZXJpY1ZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIgfHwgdmFsdWUgPT09IFwiXCIgfHwgTnVtYmVyLmlzTmFOKG51bWVyaWNWYWx1ZSkpXG4gICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKGBJbnZhbGlkIHVuaXQgdmFsdWUgJHt2YWx1ZX1gKTtcbiAgcmV0dXJuIG51bWVyaWNWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZU9iamVjdChvYmosIG5vcm1hbGl6ZXIpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHt9O1xuICBmb3IgKGNvbnN0IHUgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwgdSkpIHtcbiAgICAgIGNvbnN0IHYgPSBvYmpbdV07XG4gICAgICBpZiAodiA9PT0gdW5kZWZpbmVkIHx8IHYgPT09IG51bGwpIGNvbnRpbnVlO1xuICAgICAgbm9ybWFsaXplZFtub3JtYWxpemVyKHUpXSA9IGFzTnVtYmVyKHYpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE9mZnNldChvZmZzZXQsIGZvcm1hdCkge1xuICBjb25zdCBob3VycyA9IE1hdGgudHJ1bmMoTWF0aC5hYnMob2Zmc2V0IC8gNjApKSxcbiAgICBtaW51dGVzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgJSA2MCkpLFxuICAgIHNpZ24gPSBvZmZzZXQgPj0gMCA/IFwiK1wiIDogXCItXCI7XG5cbiAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBgJHtzaWdufSR7cGFkU3RhcnQoaG91cnMsIDIpfToke3BhZFN0YXJ0KG1pbnV0ZXMsIDIpfWA7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIGAke3NpZ259JHtob3Vyc30ke21pbnV0ZXMgPiAwID8gYDoke21pbnV0ZXN9YCA6IFwiXCJ9YDtcbiAgICBjYXNlIFwidGVjaGllXCI6XG4gICAgICByZXR1cm4gYCR7c2lnbn0ke3BhZFN0YXJ0KGhvdXJzLCAyKX0ke3BhZFN0YXJ0KG1pbnV0ZXMsIDIpfWA7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBWYWx1ZSBmb3JtYXQgJHtmb3JtYXR9IGlzIG91dCBvZiByYW5nZSBmb3IgcHJvcGVydHkgZm9ybWF0YCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRpbWVPYmplY3Qob2JqKSB7XG4gIHJldHVybiBwaWNrKG9iaiwgW1wiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdKTtcbn1cbiIsICJpbXBvcnQgKiBhcyBGb3JtYXRzIGZyb20gXCIuL2Zvcm1hdHMuanNcIjtcbmltcG9ydCB7IHBpY2sgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeShvYmopIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaiwgT2JqZWN0LmtleXMob2JqKS5zb3J0KCkpO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGNvbnN0IG1vbnRoc0xvbmcgPSBbXG4gIFwiSmFudWFyeVwiLFxuICBcIkZlYnJ1YXJ5XCIsXG4gIFwiTWFyY2hcIixcbiAgXCJBcHJpbFwiLFxuICBcIk1heVwiLFxuICBcIkp1bmVcIixcbiAgXCJKdWx5XCIsXG4gIFwiQXVndXN0XCIsXG4gIFwiU2VwdGVtYmVyXCIsXG4gIFwiT2N0b2JlclwiLFxuICBcIk5vdmVtYmVyXCIsXG4gIFwiRGVjZW1iZXJcIixcbl07XG5cbmV4cG9ydCBjb25zdCBtb250aHNTaG9ydCA9IFtcbiAgXCJKYW5cIixcbiAgXCJGZWJcIixcbiAgXCJNYXJcIixcbiAgXCJBcHJcIixcbiAgXCJNYXlcIixcbiAgXCJKdW5cIixcbiAgXCJKdWxcIixcbiAgXCJBdWdcIixcbiAgXCJTZXBcIixcbiAgXCJPY3RcIixcbiAgXCJOb3ZcIixcbiAgXCJEZWNcIixcbl07XG5cbmV4cG9ydCBjb25zdCBtb250aHNOYXJyb3cgPSBbXCJKXCIsIFwiRlwiLCBcIk1cIiwgXCJBXCIsIFwiTVwiLCBcIkpcIiwgXCJKXCIsIFwiQVwiLCBcIlNcIiwgXCJPXCIsIFwiTlwiLCBcIkRcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiBtb250aHMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFsuLi5tb250aHNOYXJyb3ddO1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFsuLi5tb250aHNTaG9ydF07XG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbLi4ubW9udGhzTG9uZ107XG4gICAgY2FzZSBcIm51bWVyaWNcIjpcbiAgICAgIHJldHVybiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCIxMFwiLCBcIjExXCIsIFwiMTJcIl07XG4gICAgY2FzZSBcIjItZGlnaXRcIjpcbiAgICAgIHJldHVybiBbXCIwMVwiLCBcIjAyXCIsIFwiMDNcIiwgXCIwNFwiLCBcIjA1XCIsIFwiMDZcIiwgXCIwN1wiLCBcIjA4XCIsIFwiMDlcIiwgXCIxMFwiLCBcIjExXCIsIFwiMTJcIl07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB3ZWVrZGF5c0xvbmcgPSBbXG4gIFwiTW9uZGF5XCIsXG4gIFwiVHVlc2RheVwiLFxuICBcIldlZG5lc2RheVwiLFxuICBcIlRodXJzZGF5XCIsXG4gIFwiRnJpZGF5XCIsXG4gIFwiU2F0dXJkYXlcIixcbiAgXCJTdW5kYXlcIixcbl07XG5cbmV4cG9ydCBjb25zdCB3ZWVrZGF5c1Nob3J0ID0gW1wiTW9uXCIsIFwiVHVlXCIsIFwiV2VkXCIsIFwiVGh1XCIsIFwiRnJpXCIsIFwiU2F0XCIsIFwiU3VuXCJdO1xuXG5leHBvcnQgY29uc3Qgd2Vla2RheXNOYXJyb3cgPSBbXCJNXCIsIFwiVFwiLCBcIldcIiwgXCJUXCIsIFwiRlwiLCBcIlNcIiwgXCJTXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gd2Vla2RheXMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFsuLi53ZWVrZGF5c05hcnJvd107XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gWy4uLndlZWtkYXlzU2hvcnRdO1xuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gWy4uLndlZWtkYXlzTG9uZ107XG4gICAgY2FzZSBcIm51bWVyaWNcIjpcbiAgICAgIHJldHVybiBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCJdO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgbWVyaWRpZW1zID0gW1wiQU1cIiwgXCJQTVwiXTtcblxuZXhwb3J0IGNvbnN0IGVyYXNMb25nID0gW1wiQmVmb3JlIENocmlzdFwiLCBcIkFubm8gRG9taW5pXCJdO1xuXG5leHBvcnQgY29uc3QgZXJhc1Nob3J0ID0gW1wiQkNcIiwgXCJBRFwiXTtcblxuZXhwb3J0IGNvbnN0IGVyYXNOYXJyb3cgPSBbXCJCXCIsIFwiQVwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGVyYXMobGVuZ3RoKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSBcIm5hcnJvd1wiOlxuICAgICAgcmV0dXJuIFsuLi5lcmFzTmFycm93XTtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbLi4uZXJhc1Nob3J0XTtcbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFsuLi5lcmFzTG9uZ107XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJpZGllbUZvckRhdGVUaW1lKGR0KSB7XG4gIHJldHVybiBtZXJpZGllbXNbZHQuaG91ciA8IDEyID8gMCA6IDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Vla2RheUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIHdlZWtkYXlzKGxlbmd0aClbZHQud2Vla2RheSAtIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW9udGhGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiBtb250aHMobGVuZ3RoKVtkdC5tb250aCAtIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXJhRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gZXJhcyhsZW5ndGgpW2R0LnllYXIgPCAwID8gMCA6IDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCBudW1lcmljID0gXCJhbHdheXNcIiwgbmFycm93ID0gZmFsc2UpIHtcbiAgY29uc3QgdW5pdHMgPSB7XG4gICAgeWVhcnM6IFtcInllYXJcIiwgXCJ5ci5cIl0sXG4gICAgcXVhcnRlcnM6IFtcInF1YXJ0ZXJcIiwgXCJxdHIuXCJdLFxuICAgIG1vbnRoczogW1wibW9udGhcIiwgXCJtby5cIl0sXG4gICAgd2Vla3M6IFtcIndlZWtcIiwgXCJ3ay5cIl0sXG4gICAgZGF5czogW1wiZGF5XCIsIFwiZGF5XCIsIFwiZGF5c1wiXSxcbiAgICBob3VyczogW1wiaG91clwiLCBcImhyLlwiXSxcbiAgICBtaW51dGVzOiBbXCJtaW51dGVcIiwgXCJtaW4uXCJdLFxuICAgIHNlY29uZHM6IFtcInNlY29uZFwiLCBcInNlYy5cIl0sXG4gIH07XG5cbiAgY29uc3QgbGFzdGFibGUgPSBbXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCJdLmluZGV4T2YodW5pdCkgPT09IC0xO1xuXG4gIGlmIChudW1lcmljID09PSBcImF1dG9cIiAmJiBsYXN0YWJsZSkge1xuICAgIGNvbnN0IGlzRGF5ID0gdW5pdCA9PT0gXCJkYXlzXCI7XG4gICAgc3dpdGNoIChjb3VudCkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInRvbW9ycm93XCIgOiBgbmV4dCAke3VuaXRzW3VuaXRdWzBdfWA7XG4gICAgICBjYXNlIC0xOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInllc3RlcmRheVwiIDogYGxhc3QgJHt1bml0c1t1bml0XVswXX1gO1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gaXNEYXkgPyBcInRvZGF5XCIgOiBgdGhpcyAke3VuaXRzW3VuaXRdWzBdfWA7XG4gICAgICBkZWZhdWx0OiAvLyBmYWxsIHRocm91Z2hcbiAgICB9XG4gIH1cblxuICBjb25zdCBpc0luUGFzdCA9IE9iamVjdC5pcyhjb3VudCwgLTApIHx8IGNvdW50IDwgMCxcbiAgICBmbXRWYWx1ZSA9IE1hdGguYWJzKGNvdW50KSxcbiAgICBzaW5ndWxhciA9IGZtdFZhbHVlID09PSAxLFxuICAgIGxpbFVuaXRzID0gdW5pdHNbdW5pdF0sXG4gICAgZm10VW5pdCA9IG5hcnJvd1xuICAgICAgPyBzaW5ndWxhclxuICAgICAgICA/IGxpbFVuaXRzWzFdXG4gICAgICAgIDogbGlsVW5pdHNbMl0gfHwgbGlsVW5pdHNbMV1cbiAgICAgIDogc2luZ3VsYXJcbiAgICAgID8gdW5pdHNbdW5pdF1bMF1cbiAgICAgIDogdW5pdDtcbiAgcmV0dXJuIGlzSW5QYXN0ID8gYCR7Zm10VmFsdWV9ICR7Zm10VW5pdH0gYWdvYCA6IGBpbiAke2ZtdFZhbHVlfSAke2ZtdFVuaXR9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFN0cmluZyhrbm93bkZvcm1hdCkge1xuICAvLyB0aGVzZSBhbGwgaGF2ZSB0aGUgb2Zmc2V0cyByZW1vdmVkIGJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8gdGhlbVxuICAvLyB3aXRob3V0IGFsbCB0aGUgaW50bCBzdHVmZiB0aGlzIGlzIGJhY2tmaWxsaW5nXG4gIGNvbnN0IGZpbHRlcmVkID0gcGljayhrbm93bkZvcm1hdCwgW1xuICAgICAgXCJ3ZWVrZGF5XCIsXG4gICAgICBcImVyYVwiLFxuICAgICAgXCJ5ZWFyXCIsXG4gICAgICBcIm1vbnRoXCIsXG4gICAgICBcImRheVwiLFxuICAgICAgXCJob3VyXCIsXG4gICAgICBcIm1pbnV0ZVwiLFxuICAgICAgXCJzZWNvbmRcIixcbiAgICAgIFwidGltZVpvbmVOYW1lXCIsXG4gICAgICBcImhvdXJDeWNsZVwiLFxuICAgIF0pLFxuICAgIGtleSA9IHN0cmluZ2lmeShmaWx0ZXJlZCksXG4gICAgZGF0ZVRpbWVIdWdlID0gXCJFRUVFLCBMTExMIGQsIHl5eXksIGg6bW0gYVwiO1xuICBzd2l0Y2ggKGtleSkge1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9TSE9SVCk6XG4gICAgICByZXR1cm4gXCJNL2QveXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9NRUQpOlxuICAgICAgcmV0dXJuIFwiTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfTUVEX1dJVEhfV0VFS0RBWSk6XG4gICAgICByZXR1cm4gXCJFRUUsIExMTCBkLCB5eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX0ZVTEwpOlxuICAgICAgcmV0dXJuIFwiTExMTCBkLCB5eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX0hVR0UpOlxuICAgICAgcmV0dXJuIFwiRUVFRSwgTExMTCBkLCB5eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FX1NJTVBMRSk6XG4gICAgICByZXR1cm4gXCJoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcImg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9XSVRIX1NIT1JUX09GRlNFVCk6XG4gICAgICByZXR1cm4gXCJoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfV0lUSF9MT05HX09GRlNFVCk6XG4gICAgICByZXR1cm4gXCJoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfMjRfU0lNUExFKTpcbiAgICAgIHJldHVybiBcIkhIOm1tXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJISDptbTpzc1wiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCk6XG4gICAgICByZXR1cm4gXCJISDptbVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcIkhIOm1tXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9TSE9SVCk6XG4gICAgICByZXR1cm4gXCJNL2QveXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9NRUQpOlxuICAgICAgcmV0dXJuIFwiTExMIGQsIHl5eXksIGg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfRlVMTCk6XG4gICAgICByZXR1cm4gXCJMTExMIGQsIHl5eXksIGg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfSFVHRSk6XG4gICAgICByZXR1cm4gZGF0ZVRpbWVIdWdlO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIk0vZC95eXl5LCBoOm1tOnNzIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiTExMIGQsIHl5eXksIGg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSk6XG4gICAgICByZXR1cm4gXCJFRUUsIGQgTExMIHl5eXksIGg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiTExMTCBkLCB5eXl5LCBoOm1tOnNzIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIkVFRUUsIExMTEwgZCwgeXl5eSwgaDptbTpzcyBhXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkYXRlVGltZUh1Z2U7XG4gIH1cbn1cbiIsICJpbXBvcnQgKiBhcyBFbmdsaXNoIGZyb20gXCIuL2VuZ2xpc2guanNcIjtcbmltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vZm9ybWF0cy5qc1wiO1xuaW1wb3J0IHsgcGFkU3RhcnQgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVRva2VucyhzcGxpdHMsIHRva2VuVG9TdHJpbmcpIHtcbiAgbGV0IHMgPSBcIlwiO1xuICBmb3IgKGNvbnN0IHRva2VuIG9mIHNwbGl0cykge1xuICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICBzICs9IHRva2VuLnZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgcyArPSB0b2tlblRvU3RyaW5nKHRva2VuLnZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzO1xufVxuXG5jb25zdCBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzID0ge1xuICBEOiBGb3JtYXRzLkRBVEVfU0hPUlQsXG4gIEREOiBGb3JtYXRzLkRBVEVfTUVELFxuICBEREQ6IEZvcm1hdHMuREFURV9GVUxMLFxuICBEREREOiBGb3JtYXRzLkRBVEVfSFVHRSxcbiAgdDogRm9ybWF0cy5USU1FX1NJTVBMRSxcbiAgdHQ6IEZvcm1hdHMuVElNRV9XSVRIX1NFQ09ORFMsXG4gIHR0dDogRm9ybWF0cy5USU1FX1dJVEhfU0hPUlRfT0ZGU0VULFxuICB0dHR0OiBGb3JtYXRzLlRJTUVfV0lUSF9MT05HX09GRlNFVCxcbiAgVDogRm9ybWF0cy5USU1FXzI0X1NJTVBMRSxcbiAgVFQ6IEZvcm1hdHMuVElNRV8yNF9XSVRIX1NFQ09ORFMsXG4gIFRUVDogRm9ybWF0cy5USU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VULFxuICBUVFRUOiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9MT05HX09GRlNFVCxcbiAgZjogRm9ybWF0cy5EQVRFVElNRV9TSE9SVCxcbiAgZmY6IEZvcm1hdHMuREFURVRJTUVfTUVELFxuICBmZmY6IEZvcm1hdHMuREFURVRJTUVfRlVMTCxcbiAgZmZmZjogRm9ybWF0cy5EQVRFVElNRV9IVUdFLFxuICBGOiBGb3JtYXRzLkRBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUyxcbiAgRkY6IEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyxcbiAgRkZGOiBGb3JtYXRzLkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTLFxuICBGRkZGOiBGb3JtYXRzLkRBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTLFxufTtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1hdHRlciB7XG4gIHN0YXRpYyBjcmVhdGUobG9jYWxlLCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gbmV3IEZvcm1hdHRlcihsb2NhbGUsIG9wdHMpO1xuICB9XG5cbiAgc3RhdGljIHBhcnNlRm9ybWF0KGZtdCkge1xuICAgIC8vIHdoaXRlLXNwYWNlIGlzIGFsd2F5cyBjb25zaWRlcmVkIGEgbGl0ZXJhbCBpbiB1c2VyLXByb3ZpZGVkIGZvcm1hdHNcbiAgICAvLyB0aGUgXCIgXCIgdG9rZW4gaGFzIGEgc3BlY2lhbCBtZWFuaW5nIChzZWUgdW5pdEZvclRva2VuKVxuXG4gICAgbGV0IGN1cnJlbnQgPSBudWxsLFxuICAgICAgY3VycmVudEZ1bGwgPSBcIlwiLFxuICAgICAgYnJhY2tldGVkID0gZmFsc2U7XG4gICAgY29uc3Qgc3BsaXRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGMgPSBmbXQuY2hhckF0KGkpO1xuICAgICAgaWYgKGMgPT09IFwiJ1wiKSB7XG4gICAgICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc3BsaXRzLnB1c2goeyBsaXRlcmFsOiBicmFja2V0ZWQgfHwgL15cXHMrJC8udGVzdChjdXJyZW50RnVsbCksIHZhbDogY3VycmVudEZ1bGwgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudCA9IG51bGw7XG4gICAgICAgIGN1cnJlbnRGdWxsID0gXCJcIjtcbiAgICAgICAgYnJhY2tldGVkID0gIWJyYWNrZXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoYnJhY2tldGVkKSB7XG4gICAgICAgIGN1cnJlbnRGdWxsICs9IGM7XG4gICAgICB9IGVsc2UgaWYgKGMgPT09IGN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudEZ1bGwgKz0gYztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgc3BsaXRzLnB1c2goeyBsaXRlcmFsOiAvXlxccyskLy50ZXN0KGN1cnJlbnRGdWxsKSwgdmFsOiBjdXJyZW50RnVsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50RnVsbCA9IGM7XG4gICAgICAgIGN1cnJlbnQgPSBjO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50RnVsbC5sZW5ndGggPiAwKSB7XG4gICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGJyYWNrZXRlZCB8fCAvXlxccyskLy50ZXN0KGN1cnJlbnRGdWxsKSwgdmFsOiBjdXJyZW50RnVsbCB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3BsaXRzO1xuICB9XG5cbiAgc3RhdGljIG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4pIHtcbiAgICByZXR1cm4gbWFjcm9Ub2tlblRvRm9ybWF0T3B0c1t0b2tlbl07XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihsb2NhbGUsIGZvcm1hdE9wdHMpIHtcbiAgICB0aGlzLm9wdHMgPSBmb3JtYXRPcHRzO1xuICAgIHRoaXMubG9jID0gbG9jYWxlO1xuICAgIHRoaXMuc3lzdGVtTG9jID0gbnVsbDtcbiAgfVxuXG4gIGZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGR0LCBvcHRzKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtTG9jID09PSBudWxsKSB7XG4gICAgICB0aGlzLnN5c3RlbUxvYyA9IHRoaXMubG9jLnJlZGVmYXVsdFRvU3lzdGVtKCk7XG4gICAgfVxuICAgIGNvbnN0IGRmID0gdGhpcy5zeXN0ZW1Mb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pO1xuICAgIHJldHVybiBkZi5mb3JtYXQoKTtcbiAgfVxuXG4gIGR0Rm9ybWF0dGVyKGR0LCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5sb2MuZHRGb3JtYXR0ZXIoZHQsIHsgLi4udGhpcy5vcHRzLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgZm9ybWF0RGF0ZVRpbWUoZHQsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihkdCwgb3B0cykuZm9ybWF0KCk7XG4gIH1cblxuICBmb3JtYXREYXRlVGltZVBhcnRzKGR0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZHQsIG9wdHMpLmZvcm1hdFRvUGFydHMoKTtcbiAgfVxuXG4gIGZvcm1hdEludGVydmFsKGludGVydmFsLCBvcHRzKSB7XG4gICAgY29uc3QgZGYgPSB0aGlzLmR0Rm9ybWF0dGVyKGludGVydmFsLnN0YXJ0LCBvcHRzKTtcbiAgICByZXR1cm4gZGYuZHRmLmZvcm1hdFJhbmdlKGludGVydmFsLnN0YXJ0LnRvSlNEYXRlKCksIGludGVydmFsLmVuZC50b0pTRGF0ZSgpKTtcbiAgfVxuXG4gIHJlc29sdmVkT3B0aW9ucyhkdCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGR0LCBvcHRzKS5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgfVxuXG4gIG51bShuLCBwID0gMCkge1xuICAgIC8vIHdlIGdldCBzb21lIHBlcmYgb3V0IG9mIGRvaW5nIHRoaXMgaGVyZSwgYW5ub3lpbmdseVxuICAgIGlmICh0aGlzLm9wdHMuZm9yY2VTaW1wbGUpIHtcbiAgICAgIHJldHVybiBwYWRTdGFydChuLCBwKTtcbiAgICB9XG5cbiAgICBjb25zdCBvcHRzID0geyAuLi50aGlzLm9wdHMgfTtcblxuICAgIGlmIChwID4gMCkge1xuICAgICAgb3B0cy5wYWRUbyA9IHA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubG9jLm51bWJlckZvcm1hdHRlcihvcHRzKS5mb3JtYXQobik7XG4gIH1cblxuICBmb3JtYXREYXRlVGltZUZyb21TdHJpbmcoZHQsIGZtdCkge1xuICAgIGNvbnN0IGtub3duRW5nbGlzaCA9IHRoaXMubG9jLmxpc3RpbmdNb2RlKCkgPT09IFwiZW5cIixcbiAgICAgIHVzZURhdGVUaW1lRm9ybWF0dGVyID0gdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgJiYgdGhpcy5sb2Mub3V0cHV0Q2FsZW5kYXIgIT09IFwiZ3JlZ29yeVwiLFxuICAgICAgc3RyaW5nID0gKG9wdHMsIGV4dHJhY3QpID0+IHRoaXMubG9jLmV4dHJhY3QoZHQsIG9wdHMsIGV4dHJhY3QpLFxuICAgICAgZm9ybWF0T2Zmc2V0ID0gKG9wdHMpID0+IHtcbiAgICAgICAgaWYgKGR0LmlzT2Zmc2V0Rml4ZWQgJiYgZHQub2Zmc2V0ID09PSAwICYmIG9wdHMuYWxsb3daKSB7XG4gICAgICAgICAgcmV0dXJuIFwiWlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGR0LmlzVmFsaWQgPyBkdC56b25lLmZvcm1hdE9mZnNldChkdC50cywgb3B0cy5mb3JtYXQpIDogXCJcIjtcbiAgICAgIH0sXG4gICAgICBtZXJpZGllbSA9ICgpID0+XG4gICAgICAgIGtub3duRW5nbGlzaFxuICAgICAgICAgID8gRW5nbGlzaC5tZXJpZGllbUZvckRhdGVUaW1lKGR0KVxuICAgICAgICAgIDogc3RyaW5nKHsgaG91cjogXCJudW1lcmljXCIsIGhvdXJDeWNsZTogXCJoMTJcIiB9LCBcImRheXBlcmlvZFwiKSxcbiAgICAgIG1vbnRoID0gKGxlbmd0aCwgc3RhbmRhbG9uZSkgPT5cbiAgICAgICAga25vd25FbmdsaXNoXG4gICAgICAgICAgPyBFbmdsaXNoLm1vbnRoRm9yRGF0ZVRpbWUoZHQsIGxlbmd0aClcbiAgICAgICAgICA6IHN0cmluZyhzdGFuZGFsb25lID8geyBtb250aDogbGVuZ3RoIH0gOiB7IG1vbnRoOiBsZW5ndGgsIGRheTogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKSxcbiAgICAgIHdlZWtkYXkgPSAobGVuZ3RoLCBzdGFuZGFsb25lKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2hcbiAgICAgICAgICA/IEVuZ2xpc2gud2Vla2RheUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpXG4gICAgICAgICAgOiBzdHJpbmcoXG4gICAgICAgICAgICAgIHN0YW5kYWxvbmUgPyB7IHdlZWtkYXk6IGxlbmd0aCB9IDogeyB3ZWVrZGF5OiBsZW5ndGgsIG1vbnRoOiBcImxvbmdcIiwgZGF5OiBcIm51bWVyaWNcIiB9LFxuICAgICAgICAgICAgICBcIndlZWtkYXlcIlxuICAgICAgICAgICAgKSxcbiAgICAgIG1heWJlTWFjcm8gPSAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3QgZm9ybWF0T3B0cyA9IEZvcm1hdHRlci5tYWNyb1Rva2VuVG9Gb3JtYXRPcHRzKHRva2VuKTtcbiAgICAgICAgaWYgKGZvcm1hdE9wdHMpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRXaXRoU3lzdGVtRGVmYXVsdChkdCwgZm9ybWF0T3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZXJhID0gKGxlbmd0aCkgPT5cbiAgICAgICAga25vd25FbmdsaXNoID8gRW5nbGlzaC5lcmFGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSA6IHN0cmluZyh7IGVyYTogbGVuZ3RoIH0sIFwiZXJhXCIpLFxuICAgICAgdG9rZW5Ub1N0cmluZyA9ICh0b2tlbikgPT4ge1xuICAgICAgICAvLyBXaGVyZSBwb3NzaWJsZTogaHR0cHM6Ly9jbGRyLnVuaWNvZGUub3JnL3RyYW5zbGF0aW9uL2RhdGUtdGltZS9kYXRlLXRpbWUtc3ltYm9sc1xuICAgICAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICAgICAgLy8gbXNcbiAgICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm1pbGxpc2Vjb25kKTtcbiAgICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWlsbGlzZWNvbmQsIDMpO1xuICAgICAgICAgIC8vIHNlY29uZHNcbiAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnNlY29uZCk7XG4gICAgICAgICAgY2FzZSBcInNzXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuc2Vjb25kLCAyKTtcbiAgICAgICAgICAvLyBmcmFjdGlvbmFsIHNlY29uZHNcbiAgICAgICAgICBjYXNlIFwidXVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGR0Lm1pbGxpc2Vjb25kIC8gMTApLCAyKTtcbiAgICAgICAgICBjYXNlIFwidXV1XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC5taWxsaXNlY29uZCAvIDEwMCkpO1xuICAgICAgICAgIC8vIG1pbnV0ZXNcbiAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm1pbnV0ZSk7XG4gICAgICAgICAgY2FzZSBcIm1tXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWludXRlLCAyKTtcbiAgICAgICAgICAvLyBob3Vyc1xuICAgICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIpO1xuICAgICAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIgJSAxMiA9PT0gMCA/IDEyIDogZHQuaG91ciAlIDEyLCAyKTtcbiAgICAgICAgICBjYXNlIFwiSFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIpO1xuICAgICAgICAgIGNhc2UgXCJISFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmhvdXIsIDIpO1xuICAgICAgICAgIC8vIG9mZnNldFxuICAgICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgICAgICAvLyBsaWtlICs2XG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHsgZm9ybWF0OiBcIm5hcnJvd1wiLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7XG4gICAgICAgICAgY2FzZSBcIlpaXCI6XG4gICAgICAgICAgICAvLyBsaWtlICswNjowMFxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7IGZvcm1hdDogXCJzaG9ydFwiLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7XG4gICAgICAgICAgY2FzZSBcIlpaWlwiOlxuICAgICAgICAgICAgLy8gbGlrZSArMDYwMFxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdE9mZnNldCh7IGZvcm1hdDogXCJ0ZWNoaWVcIiwgYWxsb3daOiB0aGlzLm9wdHMuYWxsb3daIH0pO1xuICAgICAgICAgIGNhc2UgXCJaWlpaXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEVTVFxuICAgICAgICAgICAgcmV0dXJuIGR0LnpvbmUub2Zmc2V0TmFtZShkdC50cywgeyBmb3JtYXQ6IFwic2hvcnRcIiwgbG9jYWxlOiB0aGlzLmxvYy5sb2NhbGUgfSk7XG4gICAgICAgICAgY2FzZSBcIlpaWlpaXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEVhc3Rlcm4gU3RhbmRhcmQgVGltZVxuICAgICAgICAgICAgcmV0dXJuIGR0LnpvbmUub2Zmc2V0TmFtZShkdC50cywgeyBmb3JtYXQ6IFwibG9uZ1wiLCBsb2NhbGU6IHRoaXMubG9jLmxvY2FsZSB9KTtcbiAgICAgICAgICAvLyB6b25lXG4gICAgICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgQW1lcmljYS9OZXdfWW9ya1xuICAgICAgICAgICAgcmV0dXJuIGR0LnpvbmVOYW1lO1xuICAgICAgICAgIC8vIG1lcmlkaWVtc1xuICAgICAgICAgIGNhc2UgXCJhXCI6XG4gICAgICAgICAgICByZXR1cm4gbWVyaWRpZW0oKTtcbiAgICAgICAgICAvLyBkYXRlc1xuICAgICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoeyBkYXk6IFwibnVtZXJpY1wiIH0sIFwiZGF5XCIpIDogdGhpcy5udW0oZHQuZGF5KTtcbiAgICAgICAgICBjYXNlIFwiZGRcIjpcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7IGRheTogXCIyLWRpZ2l0XCIgfSwgXCJkYXlcIikgOiB0aGlzLm51bShkdC5kYXksIDIpO1xuICAgICAgICAgIC8vIHdlZWtkYXlzIC0gc3RhbmRhbG9uZVxuICAgICAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrZGF5KTtcbiAgICAgICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUdWVzJ1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJzaG9ydFwiLCB0cnVlKTtcbiAgICAgICAgICBjYXNlIFwiY2NjY1wiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVHVlc2RheSdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibG9uZ1wiLCB0cnVlKTtcbiAgICAgICAgICBjYXNlIFwiY2NjY2NcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1QnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcIm5hcnJvd1wiLCB0cnVlKTtcbiAgICAgICAgICAvLyB3ZWVrZGF5cyAtIGZvcm1hdFxuICAgICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrZGF5KTtcbiAgICAgICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUdWVzJ1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJzaG9ydFwiLCBmYWxzZSk7XG4gICAgICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXNkYXknXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcImxvbmdcIiwgZmFsc2UpO1xuICAgICAgICAgIGNhc2UgXCJFRUVFRVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVCdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibmFycm93XCIsIGZhbHNlKTtcbiAgICAgICAgICAvLyBtb250aHMgLSBzdGFuZGFsb25lXG4gICAgICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6IFwibnVtZXJpY1wiLCBkYXk6IFwibnVtZXJpY1wiIH0sIFwibW9udGhcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCk7XG4gICAgICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDAxLCBkb2Vzbid0IHNlZW0gdG8gd29ya1xuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6IFwiMi1kaWdpdFwiLCBkYXk6IFwibnVtZXJpY1wiIH0sIFwibW9udGhcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7XG4gICAgICAgICAgY2FzZSBcIkxMTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW5cbiAgICAgICAgICAgIHJldHVybiBtb250aChcInNob3J0XCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEphbnVhcnlcbiAgICAgICAgICAgIHJldHVybiBtb250aChcImxvbmdcIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSBcIkxMTExMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEpcbiAgICAgICAgICAgIHJldHVybiBtb250aChcIm5hcnJvd1wiLCB0cnVlKTtcbiAgICAgICAgICAvLyBtb250aHMgLSBmb3JtYXRcbiAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoKTtcbiAgICAgICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDFcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IG1vbnRoOiBcIjItZGlnaXRcIiB9LCBcIm1vbnRoXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQubW9udGgsIDIpO1xuICAgICAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSmFuXG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJzaG9ydFwiLCBmYWxzZSk7XG4gICAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSmFudWFyeVxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibG9uZ1wiLCBmYWxzZSk7XG4gICAgICAgICAgY2FzZSBcIk1NTU1NXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEpcbiAgICAgICAgICAgIHJldHVybiBtb250aChcIm5hcnJvd1wiLCBmYWxzZSk7XG4gICAgICAgICAgLy8geWVhcnNcbiAgICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAyMDE0XG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPyBzdHJpbmcoeyB5ZWFyOiBcIm51bWVyaWNcIiB9LCBcInllYXJcIikgOiB0aGlzLm51bShkdC55ZWFyKTtcbiAgICAgICAgICBjYXNlIFwieXlcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMTRcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IHllYXI6IFwiMi1kaWdpdFwiIH0sIFwieWVhclwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0LnllYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuICAgICAgICAgIGNhc2UgXCJ5eXl5XCI6XG4gICAgICAgICAgICAvLyBsaWtlIDAwMTJcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IHllYXI6IFwibnVtZXJpY1wiIH0sIFwieWVhclwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0LnllYXIsIDQpO1xuICAgICAgICAgIGNhc2UgXCJ5eXl5eXlcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDAwMDEyXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyB5ZWFyOiBcIm51bWVyaWNcIiB9LCBcInllYXJcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC55ZWFyLCA2KTtcbiAgICAgICAgICAvLyBlcmFzXG4gICAgICAgICAgY2FzZSBcIkdcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgQURcbiAgICAgICAgICAgIHJldHVybiBlcmEoXCJzaG9ydFwiKTtcbiAgICAgICAgICBjYXNlIFwiR0dcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgQW5ubyBEb21pbmlcbiAgICAgICAgICAgIHJldHVybiBlcmEoXCJsb25nXCIpO1xuICAgICAgICAgIGNhc2UgXCJHR0dHR1wiOlxuICAgICAgICAgICAgcmV0dXJuIGVyYShcIm5hcnJvd1wiKTtcbiAgICAgICAgICBjYXNlIFwia2tcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG4gICAgICAgICAgY2FzZSBcImtra2tcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrWWVhciwgNCk7XG4gICAgICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyKTtcbiAgICAgICAgICBjYXNlIFwiV1dcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC53ZWVrTnVtYmVyLCAyKTtcbiAgICAgICAgICBjYXNlIFwiblwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmxvY2FsV2Vla051bWJlcik7XG4gICAgICAgICAgY2FzZSBcIm5uXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrTnVtYmVyLCAyKTtcbiAgICAgICAgICBjYXNlIFwiaWlcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5sb2NhbFdlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcbiAgICAgICAgICBjYXNlIFwiaWlpaVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmxvY2FsV2Vla1llYXIsIDQpO1xuICAgICAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQub3JkaW5hbCk7XG4gICAgICAgICAgY2FzZSBcIm9vb1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0Lm9yZGluYWwsIDMpO1xuICAgICAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5xdWFydGVyKTtcbiAgICAgICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDFcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5xdWFydGVyLCAyKTtcbiAgICAgICAgICBjYXNlIFwiWFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQudHMgLyAxMDAwKSk7XG4gICAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC50cyk7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBtYXliZU1hY3JvKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgIHJldHVybiBzdHJpbmdpZnlUb2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksIHRva2VuVG9TdHJpbmcpO1xuICB9XG5cbiAgZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKGR1ciwgZm10KSB7XG4gICAgY29uc3QgdG9rZW5Ub0ZpZWxkID0gKHRva2VuKSA9PiB7XG4gICAgICAgIHN3aXRjaCAodG9rZW5bMF0pIHtcbiAgICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwibWlsbGlzZWNvbmRcIjtcbiAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XG4gICAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm1pbnV0ZVwiO1xuICAgICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJob3VyXCI7XG4gICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgIHJldHVybiBcImRheVwiO1xuICAgICAgICAgIGNhc2UgXCJ3XCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ3ZWVrXCI7XG4gICAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICAgIHJldHVybiBcIm1vbnRoXCI7XG4gICAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICAgIHJldHVybiBcInllYXJcIjtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0b2tlblRvU3RyaW5nID0gKGxpbGR1cikgPT4gKHRva2VuKSA9PiB7XG4gICAgICAgIGNvbnN0IG1hcHBlZCA9IHRva2VuVG9GaWVsZCh0b2tlbik7XG4gICAgICAgIGlmIChtYXBwZWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5udW0obGlsZHVyLmdldChtYXBwZWQpLCB0b2tlbi5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRva2VucyA9IEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLFxuICAgICAgcmVhbFRva2VucyA9IHRva2Vucy5yZWR1Y2UoXG4gICAgICAgIChmb3VuZCwgeyBsaXRlcmFsLCB2YWwgfSkgPT4gKGxpdGVyYWwgPyBmb3VuZCA6IGZvdW5kLmNvbmNhdCh2YWwpKSxcbiAgICAgICAgW11cbiAgICAgICksXG4gICAgICBjb2xsYXBzZWQgPSBkdXIuc2hpZnRUbyguLi5yZWFsVG9rZW5zLm1hcCh0b2tlblRvRmllbGQpLmZpbHRlcigodCkgPT4gdCkpO1xuICAgIHJldHVybiBzdHJpbmdpZnlUb2tlbnModG9rZW5zLCB0b2tlblRvU3RyaW5nKGNvbGxhcHNlZCkpO1xuICB9XG59XG4iLCAiaW1wb3J0IHtcbiAgdW50cnVuY2F0ZVllYXIsXG4gIHNpZ25lZE9mZnNldCxcbiAgcGFyc2VJbnRlZ2VyLFxuICBwYXJzZU1pbGxpcyxcbiAgaXNVbmRlZmluZWQsXG4gIHBhcnNlRmxvYXRpbmcsXG59IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCAqIGFzIEVuZ2xpc2ggZnJvbSBcIi4vZW5nbGlzaC5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4uL3pvbmVzL0lBTkFab25lLmpzXCI7XG5cbi8qXG4gKiBUaGlzIGZpbGUgaGFuZGxlcyBwYXJzaW5nIGZvciB3ZWxsLXNwZWNpZmllZCBmb3JtYXRzLiBIZXJlJ3MgaG93IGl0IHdvcmtzOlxuICogVHdvIHRoaW5ncyBnbyBpbnRvIHBhcnNpbmc6IGEgcmVnZXggdG8gbWF0Y2ggd2l0aCBhbmQgYW4gZXh0cmFjdG9yIHRvIHRha2UgYXBhcnQgdGhlIGdyb3VwcyBpbiB0aGUgbWF0Y2guXG4gKiBBbiBleHRyYWN0b3IgaXMganVzdCBhIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSByZWdleCBtYXRjaCBhcnJheSBhbmQgcmV0dXJucyBhIHsgeWVhcjogLi4uLCBtb250aDogLi4uIH0gb2JqZWN0XG4gKiBwYXJzZSgpIGRvZXMgdGhlIHdvcmsgb2YgZXhlY3V0aW5nIHRoZSByZWdleCBhbmQgYXBwbHlpbmcgdGhlIGV4dHJhY3Rvci4gSXQgdGFrZXMgbXVsdGlwbGUgcmVnZXgvZXh0cmFjdG9yIHBhaXJzIHRvIHRyeSBpbiBzZXF1ZW5jZS5cbiAqIEV4dHJhY3RvcnMgY2FuIHRha2UgYSBcImN1cnNvclwiIHJlcHJlc2VudGluZyB0aGUgb2Zmc2V0IGluIHRoZSBtYXRjaCB0byBsb29rIGF0LiBUaGlzIG1ha2VzIGl0IGVhc3kgdG8gY29tYmluZSBleHRyYWN0b3JzLlxuICogY29tYmluZUV4dHJhY3RvcnMoKSBkb2VzIHRoZSB3b3JrIG9mIGNvbWJpbmluZyB0aGVtLCBrZWVwaW5nIHRyYWNrIG9mIHRoZSBjdXJzb3IgdGhyb3VnaCBtdWx0aXBsZSBleHRyYWN0aW9ucy5cbiAqIFNvbWUgZXh0cmFjdGlvbnMgYXJlIHN1cGVyIGR1bWIgYW5kIHNpbXBsZVBhcnNlIGFuZCBmcm9tU3RyaW5ncyBoZWxwIERSWSB0aGVtLlxuICovXG5cbmNvbnN0IGlhbmFSZWdleCA9IC9bQS1aYS16XystXXsxLDI1Nn0oPzo6P1xcL1tBLVphLXowLTlfKy1dezEsMjU2fSg/OlxcL1tBLVphLXowLTlfKy1dezEsMjU2fSk/KT8vO1xuXG5mdW5jdGlvbiBjb21iaW5lUmVnZXhlcyguLi5yZWdleGVzKSB7XG4gIGNvbnN0IGZ1bGwgPSByZWdleGVzLnJlZHVjZSgoZiwgcikgPT4gZiArIHIuc291cmNlLCBcIlwiKTtcbiAgcmV0dXJuIFJlZ0V4cChgXiR7ZnVsbH0kYCk7XG59XG5cbmZ1bmN0aW9uIGNvbWJpbmVFeHRyYWN0b3JzKC4uLmV4dHJhY3RvcnMpIHtcbiAgcmV0dXJuIChtKSA9PlxuICAgIGV4dHJhY3RvcnNcbiAgICAgIC5yZWR1Y2UoXG4gICAgICAgIChbbWVyZ2VkVmFscywgbWVyZ2VkWm9uZSwgY3Vyc29yXSwgZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBbdmFsLCB6b25lLCBuZXh0XSA9IGV4KG0sIGN1cnNvcik7XG4gICAgICAgICAgcmV0dXJuIFt7IC4uLm1lcmdlZFZhbHMsIC4uLnZhbCB9LCB6b25lIHx8IG1lcmdlZFpvbmUsIG5leHRdO1xuICAgICAgICB9LFxuICAgICAgICBbe30sIG51bGwsIDFdXG4gICAgICApXG4gICAgICAuc2xpY2UoMCwgMik7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKHMsIC4uLnBhdHRlcm5zKSB7XG4gIGlmIChzID09IG51bGwpIHtcbiAgICByZXR1cm4gW251bGwsIG51bGxdO1xuICB9XG5cbiAgZm9yIChjb25zdCBbcmVnZXgsIGV4dHJhY3Rvcl0gb2YgcGF0dGVybnMpIHtcbiAgICBjb25zdCBtID0gcmVnZXguZXhlYyhzKTtcbiAgICBpZiAobSkge1xuICAgICAgcmV0dXJuIGV4dHJhY3RvcihtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtudWxsLCBudWxsXTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlUGFyc2UoLi4ua2V5cykge1xuICByZXR1cm4gKG1hdGNoLCBjdXJzb3IpID0+IHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBsZXQgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICByZXRba2V5c1tpXV0gPSBwYXJzZUludGVnZXIobWF0Y2hbY3Vyc29yICsgaV0pO1xuICAgIH1cbiAgICByZXR1cm4gW3JldCwgbnVsbCwgY3Vyc29yICsgaV07XG4gIH07XG59XG5cbi8vIElTTyBhbmQgU1FMIHBhcnNpbmdcbmNvbnN0IG9mZnNldFJlZ2V4ID0gLyg/OihaKXwoWystXVxcZFxcZCkoPzo6PyhcXGRcXGQpKT8pLztcbmNvbnN0IGlzb0V4dGVuZGVkWm9uZSA9IGAoPzoke29mZnNldFJlZ2V4LnNvdXJjZX0/KD86XFxcXFsoJHtpYW5hUmVnZXguc291cmNlfSlcXFxcXSk/KT9gO1xuY29uc3QgaXNvVGltZUJhc2VSZWdleCA9IC8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Wy4sXShcXGR7MSwzMH0pKT8pPyk/LztcbmNvbnN0IGlzb1RpbWVSZWdleCA9IFJlZ0V4cChgJHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0ke2lzb0V4dGVuZGVkWm9uZX1gKTtcbmNvbnN0IGlzb1RpbWVFeHRlbnNpb25SZWdleCA9IFJlZ0V4cChgKD86VCR7aXNvVGltZVJlZ2V4LnNvdXJjZX0pP2ApO1xuY29uc3QgaXNvWW1kUmVnZXggPSAvKFsrLV1cXGR7Nn18XFxkezR9KSg/Oi0/KFxcZFxcZCkoPzotPyhcXGRcXGQpKT8pPy87XG5jb25zdCBpc29XZWVrUmVnZXggPSAvKFxcZHs0fSktP1coXFxkXFxkKSg/Oi0/KFxcZCkpPy87XG5jb25zdCBpc29PcmRpbmFsUmVnZXggPSAvKFxcZHs0fSktPyhcXGR7M30pLztcbmNvbnN0IGV4dHJhY3RJU09XZWVrRGF0YSA9IHNpbXBsZVBhcnNlKFwid2Vla1llYXJcIiwgXCJ3ZWVrTnVtYmVyXCIsIFwid2Vla0RheVwiKTtcbmNvbnN0IGV4dHJhY3RJU09PcmRpbmFsRGF0YSA9IHNpbXBsZVBhcnNlKFwieWVhclwiLCBcIm9yZGluYWxcIik7XG5jb25zdCBzcWxZbWRSZWdleCA9IC8oXFxkezR9KS0oXFxkXFxkKS0oXFxkXFxkKS87IC8vIGR1bWJlZC1kb3duIHZlcnNpb24gb2YgdGhlIElTTyBvbmVcbmNvbnN0IHNxbFRpbWVSZWdleCA9IFJlZ0V4cChcbiAgYCR7aXNvVGltZUJhc2VSZWdleC5zb3VyY2V9ID8oPzoke29mZnNldFJlZ2V4LnNvdXJjZX18KCR7aWFuYVJlZ2V4LnNvdXJjZX0pKT9gXG4pO1xuY29uc3Qgc3FsVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzogJHtzcWxUaW1lUmVnZXguc291cmNlfSk/YCk7XG5cbmZ1bmN0aW9uIGludChtYXRjaCwgcG9zLCBmYWxsYmFjaykge1xuICBjb25zdCBtID0gbWF0Y2hbcG9zXTtcbiAgcmV0dXJuIGlzVW5kZWZpbmVkKG0pID8gZmFsbGJhY2sgOiBwYXJzZUludGVnZXIobSk7XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09ZbWQobWF0Y2gsIGN1cnNvcikge1xuICBjb25zdCBpdGVtID0ge1xuICAgIHllYXI6IGludChtYXRjaCwgY3Vyc29yKSxcbiAgICBtb250aDogaW50KG1hdGNoLCBjdXJzb3IgKyAxLCAxKSxcbiAgICBkYXk6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMSksXG4gIH07XG5cbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyAzXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1RpbWUobWF0Y2gsIGN1cnNvcikge1xuICBjb25zdCBpdGVtID0ge1xuICAgIGhvdXJzOiBpbnQobWF0Y2gsIGN1cnNvciwgMCksXG4gICAgbWludXRlczogaW50KG1hdGNoLCBjdXJzb3IgKyAxLCAwKSxcbiAgICBzZWNvbmRzOiBpbnQobWF0Y2gsIGN1cnNvciArIDIsIDApLFxuICAgIG1pbGxpc2Vjb25kczogcGFyc2VNaWxsaXMobWF0Y2hbY3Vyc29yICsgM10pLFxuICB9O1xuXG4gIHJldHVybiBbaXRlbSwgbnVsbCwgY3Vyc29yICsgNF07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09PZmZzZXQobWF0Y2gsIGN1cnNvcikge1xuICBjb25zdCBsb2NhbCA9ICFtYXRjaFtjdXJzb3JdICYmICFtYXRjaFtjdXJzb3IgKyAxXSxcbiAgICBmdWxsT2Zmc2V0ID0gc2lnbmVkT2Zmc2V0KG1hdGNoW2N1cnNvciArIDFdLCBtYXRjaFtjdXJzb3IgKyAyXSksXG4gICAgem9uZSA9IGxvY2FsID8gbnVsbCA6IEZpeGVkT2Zmc2V0Wm9uZS5pbnN0YW5jZShmdWxsT2Zmc2V0KTtcbiAgcmV0dXJuIFt7fSwgem9uZSwgY3Vyc29yICsgM107XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RJQU5BWm9uZShtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IHpvbmUgPSBtYXRjaFtjdXJzb3JdID8gSUFOQVpvbmUuY3JlYXRlKG1hdGNoW2N1cnNvcl0pIDogbnVsbDtcbiAgcmV0dXJuIFt7fSwgem9uZSwgY3Vyc29yICsgMV07XG59XG5cbi8vIElTTyB0aW1lIHBhcnNpbmdcblxuY29uc3QgaXNvVGltZU9ubHkgPSBSZWdFeHAoYF5UPyR7aXNvVGltZUJhc2VSZWdleC5zb3VyY2V9JGApO1xuXG4vLyBJU08gZHVyYXRpb24gcGFyc2luZ1xuXG5jb25zdCBpc29EdXJhdGlvbiA9XG4gIC9eLT9QKD86KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pWSk/KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pTSk/KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pVyk/KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pRCk/KD86VCg/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KUgpPyg/OigtP1xcZHsxLDIwfSg/OlxcLlxcZHsxLDIwfSk/KU0pPyg/OigtP1xcZHsxLDIwfSkoPzpbLixdKC0/XFxkezEsMjB9KSk/Uyk/KT8pJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RJU09EdXJhdGlvbihtYXRjaCkge1xuICBjb25zdCBbcywgeWVhclN0ciwgbW9udGhTdHIsIHdlZWtTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIsIG1pbGxpc2Vjb25kc1N0cl0gPVxuICAgIG1hdGNoO1xuXG4gIGNvbnN0IGhhc05lZ2F0aXZlUHJlZml4ID0gc1swXSA9PT0gXCItXCI7XG4gIGNvbnN0IG5lZ2F0aXZlU2Vjb25kcyA9IHNlY29uZFN0ciAmJiBzZWNvbmRTdHJbMF0gPT09IFwiLVwiO1xuXG4gIGNvbnN0IG1heWJlTmVnYXRlID0gKG51bSwgZm9yY2UgPSBmYWxzZSkgPT5cbiAgICBudW0gIT09IHVuZGVmaW5lZCAmJiAoZm9yY2UgfHwgKG51bSAmJiBoYXNOZWdhdGl2ZVByZWZpeCkpID8gLW51bSA6IG51bTtcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHllYXJzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHllYXJTdHIpKSxcbiAgICAgIG1vbnRoczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtb250aFN0cikpLFxuICAgICAgd2Vla3M6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcod2Vla1N0cikpLFxuICAgICAgZGF5czogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhkYXlTdHIpKSxcbiAgICAgIGhvdXJzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKGhvdXJTdHIpKSxcbiAgICAgIG1pbnV0ZXM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcobWludXRlU3RyKSksXG4gICAgICBzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKHNlY29uZFN0ciksIHNlY29uZFN0ciA9PT0gXCItMFwiKSxcbiAgICAgIG1pbGxpc2Vjb25kczogbWF5YmVOZWdhdGUocGFyc2VNaWxsaXMobWlsbGlzZWNvbmRzU3RyKSwgbmVnYXRpdmVTZWNvbmRzKSxcbiAgICB9LFxuICBdO1xufVxuXG4vLyBUaGVzZSBhcmUgYSBsaXR0bGUgYnJhaW5kZWFkLiBFRFQgKnNob3VsZCogdGVsbCB1cyB0aGF0IHdlJ3JlIGluLCBzYXksIEFtZXJpY2EvTmV3X1lvcmtcbi8vIGFuZCBub3QganVzdCB0aGF0IHdlJ3JlIGluIC0yNDAgKnJpZ2h0IG5vdyouIEJ1dCBzaW5jZSBJIGRvbid0IHRoaW5rIHRoZXNlIGFyZSB1c2VkIHRoYXQgb2Z0ZW5cbi8vIEknbSBqdXN0IGdvaW5nIHRvIGlnbm9yZSB0aGF0XG5jb25zdCBvYnNPZmZzZXRzID0ge1xuICBHTVQ6IDAsXG4gIEVEVDogLTQgKiA2MCxcbiAgRVNUOiAtNSAqIDYwLFxuICBDRFQ6IC01ICogNjAsXG4gIENTVDogLTYgKiA2MCxcbiAgTURUOiAtNiAqIDYwLFxuICBNU1Q6IC03ICogNjAsXG4gIFBEVDogLTcgKiA2MCxcbiAgUFNUOiAtOCAqIDYwLFxufTtcblxuZnVuY3Rpb24gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpIHtcbiAgY29uc3QgcmVzdWx0ID0ge1xuICAgIHllYXI6IHllYXJTdHIubGVuZ3RoID09PSAyID8gdW50cnVuY2F0ZVllYXIocGFyc2VJbnRlZ2VyKHllYXJTdHIpKSA6IHBhcnNlSW50ZWdlcih5ZWFyU3RyKSxcbiAgICBtb250aDogRW5nbGlzaC5tb250aHNTaG9ydC5pbmRleE9mKG1vbnRoU3RyKSArIDEsXG4gICAgZGF5OiBwYXJzZUludGVnZXIoZGF5U3RyKSxcbiAgICBob3VyOiBwYXJzZUludGVnZXIoaG91clN0ciksXG4gICAgbWludXRlOiBwYXJzZUludGVnZXIobWludXRlU3RyKSxcbiAgfTtcblxuICBpZiAoc2Vjb25kU3RyKSByZXN1bHQuc2Vjb25kID0gcGFyc2VJbnRlZ2VyKHNlY29uZFN0cik7XG4gIGlmICh3ZWVrZGF5U3RyKSB7XG4gICAgcmVzdWx0LndlZWtkYXkgPVxuICAgICAgd2Vla2RheVN0ci5sZW5ndGggPiAzXG4gICAgICAgID8gRW5nbGlzaC53ZWVrZGF5c0xvbmcuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDFcbiAgICAgICAgOiBFbmdsaXNoLndlZWtkYXlzU2hvcnQuaW5kZXhPZih3ZWVrZGF5U3RyKSArIDE7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBSRkMgMjgyMi81MzIyXG5jb25zdCByZmMyODIyID1cbiAgL14oPzooTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSxcXHMpPyhcXGR7MSwyfSlcXHMoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpXFxzKFxcZHsyLDR9KVxccyhcXGRcXGQpOihcXGRcXGQpKD86OihcXGRcXGQpKT9cXHMoPzooVVR8R01UfFtFQ01QXVtTRF1UKXwoW1p6XSl8KD86KFsrLV1cXGRcXGQpKFxcZFxcZCkpKSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0UkZDMjgyMihtYXRjaCkge1xuICBjb25zdCBbXG4gICAgICAsXG4gICAgICB3ZWVrZGF5U3RyLFxuICAgICAgZGF5U3RyLFxuICAgICAgbW9udGhTdHIsXG4gICAgICB5ZWFyU3RyLFxuICAgICAgaG91clN0cixcbiAgICAgIG1pbnV0ZVN0cixcbiAgICAgIHNlY29uZFN0cixcbiAgICAgIG9ic09mZnNldCxcbiAgICAgIG1pbE9mZnNldCxcbiAgICAgIG9mZkhvdXJTdHIsXG4gICAgICBvZmZNaW51dGVTdHIsXG4gICAgXSA9IG1hdGNoLFxuICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTtcblxuICBsZXQgb2Zmc2V0O1xuICBpZiAob2JzT2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gb2JzT2Zmc2V0c1tvYnNPZmZzZXRdO1xuICB9IGVsc2UgaWYgKG1pbE9mZnNldCkge1xuICAgIG9mZnNldCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgb2Zmc2V0ID0gc2lnbmVkT2Zmc2V0KG9mZkhvdXJTdHIsIG9mZk1pbnV0ZVN0cik7XG4gIH1cblxuICByZXR1cm4gW3Jlc3VsdCwgbmV3IEZpeGVkT2Zmc2V0Wm9uZShvZmZzZXQpXTtcbn1cblxuZnVuY3Rpb24gcHJlcHJvY2Vzc1JGQzI4MjIocykge1xuICAvLyBSZW1vdmUgY29tbWVudHMgYW5kIGZvbGRpbmcgd2hpdGVzcGFjZSBhbmQgcmVwbGFjZSBtdWx0aXBsZS1zcGFjZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuICByZXR1cm4gc1xuICAgIC5yZXBsYWNlKC9cXChbXigpXSpcXCl8W1xcblxcdF0vZywgXCIgXCIpXG4gICAgLnJlcGxhY2UoLyhcXHNcXHMrKS9nLCBcIiBcIilcbiAgICAudHJpbSgpO1xufVxuXG4vLyBodHRwIGRhdGVcblxuY29uc3QgcmZjMTEyMyA9XG4gICAgL14oTW9ufFR1ZXxXZWR8VGh1fEZyaXxTYXR8U3VuKSwgKFxcZFxcZCkgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoXFxkezR9KSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSBHTVQkLyxcbiAgcmZjODUwID1cbiAgICAvXihNb25kYXl8VHVlc2RheXxXZWRuZXNkYXl8VGh1cnNkYXl8RnJpZGF5fFNhdHVyZGF5fFN1bmRheSksIChcXGRcXGQpLShKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYyktKFxcZFxcZCkgKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkgR01UJC8sXG4gIGFzY2lpID1cbiAgICAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pIChKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYykgKCBcXGR8XFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSAoXFxkezR9KSQvO1xuXG5mdW5jdGlvbiBleHRyYWN0UkZDMTEyM09yODUwKG1hdGNoKSB7XG4gIGNvbnN0IFssIHdlZWtkYXlTdHIsIGRheVN0ciwgbW9udGhTdHIsIHllYXJTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyXSA9IG1hdGNoLFxuICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTtcbiAgcmV0dXJuIFtyZXN1bHQsIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZV07XG59XG5cbmZ1bmN0aW9uIGV4dHJhY3RBU0NJSShtYXRjaCkge1xuICBjb25zdCBbLCB3ZWVrZGF5U3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0ciwgeWVhclN0cl0gPSBtYXRjaCxcbiAgICByZXN1bHQgPSBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cik7XG4gIHJldHVybiBbcmVzdWx0LCBGaXhlZE9mZnNldFpvbmUudXRjSW5zdGFuY2VdO1xufVxuXG5jb25zdCBpc29ZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvWW1kUmVnZXgsIGlzb1RpbWVFeHRlbnNpb25SZWdleCk7XG5jb25zdCBpc29XZWVrV2l0aFRpbWVFeHRlbnNpb25SZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1dlZWtSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IGlzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvT3JkaW5hbFJlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xuY29uc3QgaXNvVGltZUNvbWJpbmVkUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29UaW1lUmVnZXgpO1xuXG5jb25zdCBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPWW1kLFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuY29uc3QgZXh0cmFjdElTT1dlZWtUaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09XZWVrRGF0YSxcbiAgZXh0cmFjdElTT1RpbWUsXG4gIGV4dHJhY3RJU09PZmZzZXQsXG4gIGV4dHJhY3RJQU5BWm9uZVxuKTtcbmNvbnN0IGV4dHJhY3RJU09PcmRpbmFsRGF0ZUFuZFRpbWUgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT09yZGluYWxEYXRhLFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuY29uc3QgZXh0cmFjdElTT1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT1RpbWUsXG4gIGV4dHJhY3RJU09PZmZzZXQsXG4gIGV4dHJhY3RJQU5BWm9uZVxuKTtcblxuLypcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSVNPRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShcbiAgICBzLFxuICAgIFtpc29ZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPWW1kVGltZUFuZE9mZnNldF0sXG4gICAgW2lzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXRdLFxuICAgIFtpc29PcmRpbmFsV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZV0sXG4gICAgW2lzb1RpbWVDb21iaW5lZFJlZ2V4LCBleHRyYWN0SVNPVGltZUFuZE9mZnNldF1cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUkZDMjgyMkRhdGUocykge1xuICByZXR1cm4gcGFyc2UocHJlcHJvY2Vzc1JGQzI4MjIocyksIFtyZmMyODIyLCBleHRyYWN0UkZDMjgyMl0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VIVFRQRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShcbiAgICBzLFxuICAgIFtyZmMxMTIzLCBleHRyYWN0UkZDMTEyM09yODUwXSxcbiAgICBbcmZjODUwLCBleHRyYWN0UkZDMTEyM09yODUwXSxcbiAgICBbYXNjaWksIGV4dHJhY3RBU0NJSV1cbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSVNPRHVyYXRpb24ocykge1xuICByZXR1cm4gcGFyc2UocywgW2lzb0R1cmF0aW9uLCBleHRyYWN0SVNPRHVyYXRpb25dKTtcbn1cblxuY29uc3QgZXh0cmFjdElTT1RpbWVPbmx5ID0gY29tYmluZUV4dHJhY3RvcnMoZXh0cmFjdElTT1RpbWUpO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU09UaW1lT25seShzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvVGltZU9ubHksIGV4dHJhY3RJU09UaW1lT25seV0pO1xufVxuXG5jb25zdCBzcWxZbWRXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsWW1kUmVnZXgsIHNxbFRpbWVFeHRlbnNpb25SZWdleCk7XG5jb25zdCBzcWxUaW1lQ29tYmluZWRSZWdleCA9IGNvbWJpbmVSZWdleGVzKHNxbFRpbWVSZWdleCk7XG5cbmNvbnN0IGV4dHJhY3RJU09UaW1lT2Zmc2V0QW5kSUFOQVpvbmUgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT1RpbWUsXG4gIGV4dHJhY3RJU09PZmZzZXQsXG4gIGV4dHJhY3RJQU5BWm9uZVxuKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU1FMKHMpIHtcbiAgcmV0dXJuIHBhcnNlKFxuICAgIHMsXG4gICAgW3NxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSxcbiAgICBbc3FsVGltZUNvbWJpbmVkUmVnZXgsIGV4dHJhY3RJU09UaW1lT2Zmc2V0QW5kSUFOQVpvbmVdXG4gICk7XG59XG4iLCAiaW1wb3J0IHsgSW52YWxpZEFyZ3VtZW50RXJyb3IsIEludmFsaWREdXJhdGlvbkVycm9yLCBJbnZhbGlkVW5pdEVycm9yIH0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgRm9ybWF0dGVyIGZyb20gXCIuL2ltcGwvZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgSW52YWxpZCBmcm9tIFwiLi9pbXBsL2ludmFsaWQuanNcIjtcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vaW1wbC9sb2NhbGUuanNcIjtcbmltcG9ydCB7IHBhcnNlSVNPRHVyYXRpb24sIHBhcnNlSVNPVGltZU9ubHkgfSBmcm9tIFwiLi9pbXBsL3JlZ2V4UGFyc2VyLmpzXCI7XG5pbXBvcnQge1xuICBhc051bWJlcixcbiAgaGFzT3duUHJvcGVydHksXG4gIGlzTnVtYmVyLFxuICBpc1VuZGVmaW5lZCxcbiAgbm9ybWFsaXplT2JqZWN0LFxuICByb3VuZFRvLFxufSBmcm9tIFwiLi9pbXBsL3V0aWwuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuL2RhdGV0aW1lLmpzXCI7XG5cbmNvbnN0IElOVkFMSUQgPSBcIkludmFsaWQgRHVyYXRpb25cIjtcblxuLy8gdW5pdCBjb252ZXJzaW9uIGNvbnN0YW50c1xuZXhwb3J0IGNvbnN0IGxvd09yZGVyTWF0cml4ID0ge1xuICAgIHdlZWtzOiB7XG4gICAgICBkYXlzOiA3LFxuICAgICAgaG91cnM6IDcgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IDcgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBkYXlzOiB7XG4gICAgICBob3VyczogMjQsXG4gICAgICBtaW51dGVzOiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgaG91cnM6IHsgbWludXRlczogNjAsIHNlY29uZHM6IDYwICogNjAsIG1pbGxpc2Vjb25kczogNjAgKiA2MCAqIDEwMDAgfSxcbiAgICBtaW51dGVzOiB7IHNlY29uZHM6IDYwLCBtaWxsaXNlY29uZHM6IDYwICogMTAwMCB9LFxuICAgIHNlY29uZHM6IHsgbWlsbGlzZWNvbmRzOiAxMDAwIH0sXG4gIH0sXG4gIGNhc3VhbE1hdHJpeCA9IHtcbiAgICB5ZWFyczoge1xuICAgICAgcXVhcnRlcnM6IDQsXG4gICAgICBtb250aHM6IDEyLFxuICAgICAgd2Vla3M6IDUyLFxuICAgICAgZGF5czogMzY1LFxuICAgICAgaG91cnM6IDM2NSAqIDI0LFxuICAgICAgbWludXRlczogMzY1ICogMjQgKiA2MCxcbiAgICAgIHNlY29uZHM6IDM2NSAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIHF1YXJ0ZXJzOiB7XG4gICAgICBtb250aHM6IDMsXG4gICAgICB3ZWVrczogMTMsXG4gICAgICBkYXlzOiA5MSxcbiAgICAgIGhvdXJzOiA5MSAqIDI0LFxuICAgICAgbWludXRlczogOTEgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogOTEgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDkxICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIG1vbnRoczoge1xuICAgICAgd2Vla3M6IDQsXG4gICAgICBkYXlzOiAzMCxcbiAgICAgIGhvdXJzOiAzMCAqIDI0LFxuICAgICAgbWludXRlczogMzAgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDMwICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuXG4gICAgLi4ubG93T3JkZXJNYXRyaXgsXG4gIH0sXG4gIGRheXNJblllYXJBY2N1cmF0ZSA9IDE0NjA5Ny4wIC8gNDAwLFxuICBkYXlzSW5Nb250aEFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0ODAwLFxuICBhY2N1cmF0ZU1hdHJpeCA9IHtcbiAgICB5ZWFyczoge1xuICAgICAgcXVhcnRlcnM6IDQsXG4gICAgICBtb250aHM6IDEyLFxuICAgICAgd2Vla3M6IGRheXNJblllYXJBY2N1cmF0ZSAvIDcsXG4gICAgICBkYXlzOiBkYXlzSW5ZZWFyQWNjdXJhdGUsXG4gICAgICBob3VyczogZGF5c0luWWVhckFjY3VyYXRlICogMjQsXG4gICAgICBtaW51dGVzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgcXVhcnRlcnM6IHtcbiAgICAgIG1vbnRoczogMyxcbiAgICAgIHdlZWtzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgLyAyOCxcbiAgICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSAvIDQsXG4gICAgICBob3VyczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0KSAvIDQsXG4gICAgICBtaW51dGVzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCkgLyA0LFxuICAgICAgc2Vjb25kczogKGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCkgLyA0LFxuICAgICAgbWlsbGlzZWNvbmRzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCkgLyA0LFxuICAgIH0sXG4gICAgbW9udGhzOiB7XG4gICAgICB3ZWVrczogZGF5c0luTW9udGhBY2N1cmF0ZSAvIDcsXG4gICAgICBkYXlzOiBkYXlzSW5Nb250aEFjY3VyYXRlLFxuICAgICAgaG91cnM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IGRheXNJbk1vbnRoQWNjdXJhdGUgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICAuLi5sb3dPcmRlck1hdHJpeCxcbiAgfTtcblxuLy8gdW5pdHMgb3JkZXJlZCBieSBzaXplXG5jb25zdCBvcmRlcmVkVW5pdHMgPSBbXG4gIFwieWVhcnNcIixcbiAgXCJxdWFydGVyc1wiLFxuICBcIm1vbnRoc1wiLFxuICBcIndlZWtzXCIsXG4gIFwiZGF5c1wiLFxuICBcImhvdXJzXCIsXG4gIFwibWludXRlc1wiLFxuICBcInNlY29uZHNcIixcbiAgXCJtaWxsaXNlY29uZHNcIixcbl07XG5cbmNvbnN0IHJldmVyc2VVbml0cyA9IG9yZGVyZWRVbml0cy5zbGljZSgwKS5yZXZlcnNlKCk7XG5cbi8vIGNsb25lIHJlYWxseSBtZWFucyBcImNyZWF0ZSBhbm90aGVyIGluc3RhbmNlIGp1c3QgbGlrZSB0aGlzIG9uZSwgYnV0IHdpdGggdGhlc2UgY2hhbmdlc1wiXG5mdW5jdGlvbiBjbG9uZShkdXIsIGFsdHMsIGNsZWFyID0gZmFsc2UpIHtcbiAgLy8gZGVlcCBtZXJnZSBmb3IgdmFsc1xuICBjb25zdCBjb25mID0ge1xuICAgIHZhbHVlczogY2xlYXIgPyBhbHRzLnZhbHVlcyA6IHsgLi4uZHVyLnZhbHVlcywgLi4uKGFsdHMudmFsdWVzIHx8IHt9KSB9LFxuICAgIGxvYzogZHVyLmxvYy5jbG9uZShhbHRzLmxvYyksXG4gICAgY29udmVyc2lvbkFjY3VyYWN5OiBhbHRzLmNvbnZlcnNpb25BY2N1cmFjeSB8fCBkdXIuY29udmVyc2lvbkFjY3VyYWN5LFxuICAgIG1hdHJpeDogYWx0cy5tYXRyaXggfHwgZHVyLm1hdHJpeCxcbiAgfTtcbiAgcmV0dXJuIG5ldyBEdXJhdGlvbihjb25mKTtcbn1cblxuZnVuY3Rpb24gZHVyYXRpb25Ub01pbGxpcyhtYXRyaXgsIHZhbHMpIHtcbiAgbGV0IHN1bSA9IHZhbHMubWlsbGlzZWNvbmRzID8/IDA7XG4gIGZvciAoY29uc3QgdW5pdCBvZiByZXZlcnNlVW5pdHMuc2xpY2UoMSkpIHtcbiAgICBpZiAodmFsc1t1bml0XSkge1xuICAgICAgc3VtICs9IHZhbHNbdW5pdF0gKiBtYXRyaXhbdW5pdF1bXCJtaWxsaXNlY29uZHNcIl07XG4gICAgfVxuICB9XG4gIHJldHVybiBzdW07XG59XG5cbi8vIE5COiBtdXRhdGVzIHBhcmFtZXRlcnNcbmZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlcyhtYXRyaXgsIHZhbHMpIHtcbiAgLy8gdGhlIGxvZ2ljIGJlbG93IGFzc3VtZXMgdGhlIG92ZXJhbGwgdmFsdWUgb2YgdGhlIGR1cmF0aW9uIGlzIHBvc2l0aXZlXG4gIC8vIGlmIHRoaXMgaXMgbm90IHRoZSBjYXNlLCBmYWN0b3IgaXMgdXNlZCB0byBtYWtlIGl0IHNvXG4gIGNvbnN0IGZhY3RvciA9IGR1cmF0aW9uVG9NaWxsaXMobWF0cml4LCB2YWxzKSA8IDAgPyAtMSA6IDE7XG5cbiAgb3JkZXJlZFVuaXRzLnJlZHVjZVJpZ2h0KChwcmV2aW91cywgY3VycmVudCkgPT4ge1xuICAgIGlmICghaXNVbmRlZmluZWQodmFsc1tjdXJyZW50XSkpIHtcbiAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICBjb25zdCBwcmV2aW91c1ZhbCA9IHZhbHNbcHJldmlvdXNdICogZmFjdG9yO1xuICAgICAgICBjb25zdCBjb252ID0gbWF0cml4W2N1cnJlbnRdW3ByZXZpb3VzXTtcblxuICAgICAgICAvLyBpZiAocHJldmlvdXNWYWwgPCAwKTpcbiAgICAgICAgLy8gbG93ZXIgb3JkZXIgdW5pdCBpcyBuZWdhdGl2ZSAoZS5nLiB7IHllYXJzOiAyLCBkYXlzOiAtMiB9KVxuICAgICAgICAvLyBub3JtYWxpemUgdGhpcyBieSByZWR1Y2luZyB0aGUgaGlnaGVyIG9yZGVyIHVuaXQgYnkgdGhlIGFwcHJvcHJpYXRlIGFtb3VudFxuICAgICAgICAvLyBhbmQgaW5jcmVhc2luZyB0aGUgbG93ZXIgb3JkZXIgdW5pdFxuICAgICAgICAvLyB0aGlzIGNhbiBuZXZlciBtYWtlIHRoZSBoaWdoZXIgb3JkZXIgdW5pdCBuZWdhdGl2ZSwgYmVjYXVzZSB0aGlzIGZ1bmN0aW9uIG9ubHkgb3BlcmF0ZXNcbiAgICAgICAgLy8gb24gcG9zaXRpdmUgZHVyYXRpb25zLCBzbyB0aGUgYW1vdW50IG9mIHRpbWUgcmVwcmVzZW50ZWQgYnkgdGhlIGxvd2VyIG9yZGVyIHVuaXQgY2Fubm90XG4gICAgICAgIC8vIGJlIGxhcmdlciB0aGFuIHRoZSBoaWdoZXIgb3JkZXIgdW5pdFxuICAgICAgICAvLyBlbHNlOlxuICAgICAgICAvLyBsb3dlciBvcmRlciB1bml0IGlzIHBvc2l0aXZlIChlLmcuIHsgeWVhcnM6IDIsIGRheXM6IDQ1MCB9IG9yIHsgeWVhcnM6IC0yLCBkYXlzOiA0NTAgfSlcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGF0dGVtcHQgdG8gY29udmVydCBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gdGhlIGxvd2VyIG9yZGVyIHVuaXQgaW50b1xuICAgICAgICAvLyB0aGUgaGlnaGVyIG9yZGVyIG9uZVxuICAgICAgICAvL1xuICAgICAgICAvLyBNYXRoLmZsb29yIHRha2VzIGNhcmUgb2YgYm90aCBvZiB0aGVzZSBjYXNlcywgcm91bmRpbmcgYXdheSBmcm9tIDBcbiAgICAgICAgLy8gaWYgcHJldmlvdXNWYWwgPCAwIGl0IG1ha2VzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBsYXJnZXJcbiAgICAgICAgLy8gaWYgcHJldmlvdXNWYWwgPj0gaXQgbWFrZXMgdGhlIGFic29sdXRlIHZhbHVlIHNtYWxsZXJcbiAgICAgICAgY29uc3Qgcm9sbFVwID0gTWF0aC5mbG9vcihwcmV2aW91c1ZhbCAvIGNvbnYpO1xuICAgICAgICB2YWxzW2N1cnJlbnRdICs9IHJvbGxVcCAqIGZhY3RvcjtcbiAgICAgICAgdmFsc1twcmV2aW91c10gLT0gcm9sbFVwICogY29udiAqIGZhY3RvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJldmlvdXM7XG4gICAgfVxuICB9LCBudWxsKTtcblxuICAvLyB0cnkgdG8gY29udmVydCBhbnkgZGVjaW1hbHMgaW50byBzbWFsbGVyIHVuaXRzIGlmIHBvc3NpYmxlXG4gIC8vIGZvciBleGFtcGxlIGZvciB7IHllYXJzOiAyLjUsIGRheXM6IDAsIHNlY29uZHM6IDAgfSB3ZSB3YW50IHRvIGdldCB7IHllYXJzOiAyLCBkYXlzOiAxODIsIGhvdXJzOiAxMiB9XG4gIG9yZGVyZWRVbml0cy5yZWR1Y2UoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh2YWxzW2N1cnJlbnRdKSkge1xuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgIGNvbnN0IGZyYWN0aW9uID0gdmFsc1twcmV2aW91c10gJSAxO1xuICAgICAgICB2YWxzW3ByZXZpb3VzXSAtPSBmcmFjdGlvbjtcbiAgICAgICAgdmFsc1tjdXJyZW50XSArPSBmcmFjdGlvbiAqIG1hdHJpeFtwcmV2aW91c11bY3VycmVudF07XG4gICAgICB9XG4gICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHByZXZpb3VzO1xuICAgIH1cbiAgfSwgbnVsbCk7XG59XG5cbi8vIFJlbW92ZSBhbGwgcHJvcGVydGllcyB3aXRoIGEgdmFsdWUgb2YgMCBmcm9tIGFuIG9iamVjdFxuZnVuY3Rpb24gcmVtb3ZlWmVyb2VzKHZhbHMpIHtcbiAgY29uc3QgbmV3VmFscyA9IHt9O1xuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWxzKSkge1xuICAgIGlmICh2YWx1ZSAhPT0gMCkge1xuICAgICAgbmV3VmFsc1trZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdWYWxzO1xufVxuXG4vKipcbiAqIEEgRHVyYXRpb24gb2JqZWN0IHJlcHJlc2VudHMgYSBwZXJpb2Qgb2YgdGltZSwgbGlrZSBcIjIgbW9udGhzXCIgb3IgXCIxIGRheSwgMSBob3VyXCIuIENvbmNlcHR1YWxseSwgaXQncyBqdXN0IGEgbWFwIG9mIHVuaXRzIHRvIHRoZWlyIHF1YW50aXRpZXMsIGFjY29tcGFuaWVkIGJ5IHNvbWUgYWRkaXRpb25hbCBjb25maWd1cmF0aW9uIGFuZCBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLiBUaGV5IGNhbiBiZSB1c2VkIG9uIHRoZWlyIG93biBvciBpbiBjb25qdW5jdGlvbiB3aXRoIG90aGVyIEx1eG9uIHR5cGVzOyBmb3IgZXhhbXBsZSwgeW91IGNhbiB1c2Uge0BsaW5rIERhdGVUaW1lI3BsdXN9IHRvIGFkZCBhIER1cmF0aW9uIG9iamVjdCB0byBhIERhdGVUaW1lLCBwcm9kdWNpbmcgYW5vdGhlciBEYXRlVGltZS5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIER1cmF0aW9uOlxuICpcbiAqICogKipDcmVhdGlvbioqIFRvIGNyZWF0ZSBhIER1cmF0aW9uLCB1c2Uge0BsaW5rIER1cmF0aW9uLmZyb21NaWxsaXN9LCB7QGxpbmsgRHVyYXRpb24uZnJvbU9iamVjdH0sIG9yIHtAbGluayBEdXJhdGlvbi5mcm9tSVNPfS5cbiAqICogKipVbml0IHZhbHVlcyoqIFNlZSB0aGUge0BsaW5rIER1cmF0aW9uI3llYXJzfSwge0BsaW5rIER1cmF0aW9uI21vbnRoc30sIHtAbGluayBEdXJhdGlvbiN3ZWVrc30sIHtAbGluayBEdXJhdGlvbiNkYXlzfSwge0BsaW5rIER1cmF0aW9uI2hvdXJzfSwge0BsaW5rIER1cmF0aW9uI21pbnV0ZXN9LCB7QGxpbmsgRHVyYXRpb24jc2Vjb25kc30sIHtAbGluayBEdXJhdGlvbiNtaWxsaXNlY29uZHN9IGFjY2Vzc29ycy5cbiAqICogKipDb25maWd1cmF0aW9uKiogU2VlICB7QGxpbmsgRHVyYXRpb24jbG9jYWxlfSBhbmQge0BsaW5rIER1cmF0aW9uI251bWJlcmluZ1N5c3RlbX0gYWNjZXNzb3JzLlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG5ldyBEdXJhdGlvbnMgb3V0IG9mIG9sZCBvbmVzIHVzZSB7QGxpbmsgRHVyYXRpb24jcGx1c30sIHtAbGluayBEdXJhdGlvbiNtaW51c30sIHtAbGluayBEdXJhdGlvbiNub3JtYWxpemV9LCB7QGxpbmsgRHVyYXRpb24jc2V0fSwge0BsaW5rIER1cmF0aW9uI3JlY29uZmlndXJlfSwge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99LCBhbmQge0BsaW5rIER1cmF0aW9uI25lZ2F0ZX0uXG4gKiAqICoqT3V0cHV0KiogVG8gY29udmVydCB0aGUgRHVyYXRpb24gaW50byBvdGhlciByZXByZXNlbnRhdGlvbnMsIHNlZSB7QGxpbmsgRHVyYXRpb24jYXN9LCB7QGxpbmsgRHVyYXRpb24jdG9JU099LCB7QGxpbmsgRHVyYXRpb24jdG9Gb3JtYXR9LCBhbmQge0BsaW5rIER1cmF0aW9uI3RvSlNPTn1cbiAqXG4gKiBUaGVyZSdzIGFyZSBtb3JlIG1ldGhvZHMgZG9jdW1lbnRlZCBiZWxvdy4gSW4gYWRkaXRpb24sIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHN1YnRsZXIgdG9waWNzIGxpa2UgaW50ZXJuYXRpb25hbGl6YXRpb24gYW5kIHZhbGlkaXR5LCBzZWUgdGhlIGV4dGVybmFsIGRvY3VtZW50YXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER1cmF0aW9uIHtcbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCBhY2N1cmF0ZSA9IGNvbmZpZy5jb252ZXJzaW9uQWNjdXJhY3kgPT09IFwibG9uZ3Rlcm1cIiB8fCBmYWxzZTtcbiAgICBsZXQgbWF0cml4ID0gYWNjdXJhdGUgPyBhY2N1cmF0ZU1hdHJpeCA6IGNhc3VhbE1hdHJpeDtcblxuICAgIGlmIChjb25maWcubWF0cml4KSB7XG4gICAgICBtYXRyaXggPSBjb25maWcubWF0cml4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudmFsdWVzID0gY29uZmlnLnZhbHVlcztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxvYyA9IGNvbmZpZy5sb2MgfHwgTG9jYWxlLmNyZWF0ZSgpO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY29udmVyc2lvbkFjY3VyYWN5ID0gYWNjdXJhdGUgPyBcImxvbmd0ZXJtXCIgOiBcImNhc3VhbFwiO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXRyaXggPSBtYXRyaXg7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pc0x1eG9uRHVyYXRpb24gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBEdXJhdGlvbiBmcm9tIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvdW50IG9mIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgZnJvbU1pbGxpcyhjb3VudCwgb3B0cykge1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWlsbGlzZWNvbmRzOiBjb3VudCB9LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy5cbiAgICogSWYgdGhpcyBvYmplY3QgaXMgZW1wdHkgdGhlbiBhIHplcm8gbWlsbGlzZWNvbmRzIGR1cmF0aW9uIGlzIHJldHVybmVkLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gdGhlIG9iamVjdCB0byBjcmVhdGUgdGhlIERhdGVUaW1lIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnF1YXJ0ZXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubW9udGhzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla3NcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5kYXlzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouaG91cnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGVzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouc2Vjb25kc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9W11dIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIGN1c3RvbSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgZnJvbU9iamVjdChvYmosIG9wdHMgPSB7fSkge1xuICAgIGlmIChvYmogPT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgIGBEdXJhdGlvbi5mcm9tT2JqZWN0OiBhcmd1bWVudCBleHBlY3RlZCB0byBiZSBhbiBvYmplY3QsIGdvdCAke1xuICAgICAgICAgIG9iaiA9PT0gbnVsbCA/IFwibnVsbFwiIDogdHlwZW9mIG9ialxuICAgICAgICB9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IER1cmF0aW9uKHtcbiAgICAgIHZhbHVlczogbm9ybWFsaXplT2JqZWN0KG9iaiwgRHVyYXRpb24ubm9ybWFsaXplVW5pdCksXG4gICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLFxuICAgICAgY29udmVyc2lvbkFjY3VyYWN5OiBvcHRzLmNvbnZlcnNpb25BY2N1cmFjeSxcbiAgICAgIG1hdHJpeDogb3B0cy5tYXRyaXgsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBEdXJhdGlvbkxpa2UuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0IHwgbnVtYmVyIHwgRHVyYXRpb259IGR1cmF0aW9uTGlrZVxuICAgKiBPbmUgb2Y6XG4gICAqIC0gb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFycycgYW5kICdob3VycycuXG4gICAqIC0gbnVtYmVyIHJlcHJlc2VudGluZyBtaWxsaXNlY29uZHNcbiAgICogLSBEdXJhdGlvbiBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uTGlrZSkge1xuICAgIGlmIChpc051bWJlcihkdXJhdGlvbkxpa2UpKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU1pbGxpcyhkdXJhdGlvbkxpa2UpO1xuICAgIH0gZWxzZSBpZiAoRHVyYXRpb24uaXNEdXJhdGlvbihkdXJhdGlvbkxpa2UpKSB7XG4gICAgICByZXR1cm4gZHVyYXRpb25MaWtlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGR1cmF0aW9uTGlrZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QoZHVyYXRpb25MaWtlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICBgVW5rbm93biBkdXJhdGlvbiBhcmd1bWVudCAke2R1cmF0aW9uTGlrZX0gb2YgdHlwZSAke3R5cGVvZiBkdXJhdGlvbkxpa2V9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhbiBJU08gODYwMSBkdXJhdGlvbiBzdHJpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGV4dCB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5tYXRyaXg9T2JqZWN0XSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1AzWTZNMVc0RFQxMkgzME01UycpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAzLCBtb250aHM6IDYsIHdlZWtzOiAxLCBkYXlzOiA0LCBob3VyczogMTIsIG1pbnV0ZXM6IDMwLCBzZWNvbmRzOiA1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUFQyM0gnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjMgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQNVkzTScpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiA1LCBtb250aHM6IDMgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMpIHtcbiAgICBjb25zdCBbcGFyc2VkXSA9IHBhcnNlSVNPRHVyYXRpb24odGV4dCk7XG4gICAgaWYgKHBhcnNlZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QocGFyc2VkLCBvcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJ1bnBhcnNhYmxlXCIsIGB0aGUgaW5wdXQgXCIke3RleHR9XCIgY2FuJ3QgYmUgcGFyc2VkIGFzIElTTyA4NjAxYCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYW4gSVNPIDg2MDEgdGltZSBzdHJpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGV4dCB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgZm9yIHBhcnNpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIHRoZSBsb2NhbGUgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBwcmVzZXQgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5tYXRyaXg9T2JqZWN0XSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MjI6MzMuNDQ0JykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAyMiwgc2Vjb25kczogMzMsIG1pbGxpc2Vjb25kczogNDQ0IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJ1QxMTowMCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMSwgbWludXRlczogMCwgc2Vjb25kczogMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMTAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJ1QxMTAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzdGF0aWMgZnJvbUlTT1RpbWUodGV4dCwgb3B0cykge1xuICAgIGNvbnN0IFtwYXJzZWRdID0gcGFyc2VJU09UaW1lT25seSh0ZXh0KTtcbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChwYXJzZWQsIG9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcInVucGFyc2FibGVcIiwgYHRoZSBpbnB1dCBcIiR7dGV4dH1cIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIGRhdGV0aW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRHVyYXRpb24gaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZER1cmF0aW9uRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRHVyYXRpb24oeyBpbnZhbGlkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIG5vcm1hbGl6ZVVuaXQodW5pdCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB7XG4gICAgICB5ZWFyOiBcInllYXJzXCIsXG4gICAgICB5ZWFyczogXCJ5ZWFyc1wiLFxuICAgICAgcXVhcnRlcjogXCJxdWFydGVyc1wiLFxuICAgICAgcXVhcnRlcnM6IFwicXVhcnRlcnNcIixcbiAgICAgIG1vbnRoOiBcIm1vbnRoc1wiLFxuICAgICAgbW9udGhzOiBcIm1vbnRoc1wiLFxuICAgICAgd2VlazogXCJ3ZWVrc1wiLFxuICAgICAgd2Vla3M6IFwid2Vla3NcIixcbiAgICAgIGRheTogXCJkYXlzXCIsXG4gICAgICBkYXlzOiBcImRheXNcIixcbiAgICAgIGhvdXI6IFwiaG91cnNcIixcbiAgICAgIGhvdXJzOiBcImhvdXJzXCIsXG4gICAgICBtaW51dGU6IFwibWludXRlc1wiLFxuICAgICAgbWludXRlczogXCJtaW51dGVzXCIsXG4gICAgICBzZWNvbmQ6IFwic2Vjb25kc1wiLFxuICAgICAgc2Vjb25kczogXCJzZWNvbmRzXCIsXG4gICAgICBtaWxsaXNlY29uZDogXCJtaWxsaXNlY29uZHNcIixcbiAgICAgIG1pbGxpc2Vjb25kczogXCJtaWxsaXNlY29uZHNcIixcbiAgICB9W3VuaXQgPyB1bml0LnRvTG93ZXJDYXNlKCkgOiB1bml0XTtcblxuICAgIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7XG5cbiAgICByZXR1cm4gbm9ybWFsaXplZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYSBEdXJhdGlvbi4gV29ya3MgYWNyb3NzIGNvbnRleHQgYm91bmRhcmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gb1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzRHVyYXRpb24obykge1xuICAgIHJldHVybiAobyAmJiBvLmlzTHV4b25EdXJhdGlvbikgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0ICB0aGUgbG9jYWxlIG9mIGEgRHVyYXRpb24sIHN1Y2ggJ2VuLUdCJ1xuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGxvY2FsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubG9jYWxlIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG51bWJlcmluZyBzeXN0ZW0gb2YgYSBEdXJhdGlvbiwgc3VjaCAnYmVuZycuIFRoZSBudW1iZXJpbmcgc3lzdGVtIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEdXJhdGlvblxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG51bWJlcmluZ1N5c3RlbSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuIFlvdSBtYXkgdXNlIHRoZXNlIHRva2VuczpcbiAgICogKiBgU2AgZm9yIG1pbGxpc2Vjb25kc1xuICAgKiAqIGBzYCBmb3Igc2Vjb25kc1xuICAgKiAqIGBtYCBmb3IgbWludXRlc1xuICAgKiAqIGBoYCBmb3IgaG91cnNcbiAgICogKiBgZGAgZm9yIGRheXNcbiAgICogKiBgd2AgZm9yIHdlZWtzXG4gICAqICogYE1gIGZvciBtb250aHNcbiAgICogKiBgeWAgZm9yIHllYXJzXG4gICAqIE5vdGVzOlxuICAgKiAqIEFkZCBwYWRkaW5nIGJ5IHJlcGVhdGluZyB0aGUgdG9rZW4sIGUuZy4gXCJ5eVwiIHBhZHMgdGhlIHllYXJzIHRvIHR3byBkaWdpdHMsIFwiaGhoaFwiIHBhZHMgdGhlIGhvdXJzIG91dCB0byBmb3VyIGRpZ2l0c1xuICAgKiAqIFRva2VucyBjYW4gYmUgZXNjYXBlZCBieSB3cmFwcGluZyB3aXRoIHNpbmdsZSBxdW90ZXMuXG4gICAqICogVGhlIGR1cmF0aW9uIHdpbGwgYmUgY29udmVydGVkIHRvIHRoZSBzZXQgb2YgdW5pdHMgaW4gdGhlIGZvcm1hdCBzdHJpbmcgdXNpbmcge0BsaW5rIER1cmF0aW9uI3NoaWZ0VG99IGFuZCB0aGUgRHVyYXRpb25zJ3MgY29udmVyc2lvbiBhY2N1cmFjeSBzZXR0aW5nLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmxvb3I9dHJ1ZV0gLSBmbG9vciBudW1lcmljYWwgdmFsdWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcInkgZCBzXCIpIC8vPT4gXCIxIDYgMlwiXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMSwgZGF5czogNiwgc2Vjb25kczogMiB9KS50b0Zvcm1hdChcInl5IGRkIHNzc1wiKSAvLz0+IFwiMDEgMDYgMDAyXCJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwiTSBTXCIpIC8vPT4gXCIxMiA1MTg0MDIwMDBcIlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkge1xuICAgIC8vIHJldmVyc2UtY29tcGF0IHNpbmNlIDEuMjsgd2UgYWx3YXlzIHJvdW5kIGRvd24gbm93LCBuZXZlciB1cCwgYW5kIHdlIGRvIGl0IGJ5IGRlZmF1bHRcbiAgICBjb25zdCBmbXRPcHRzID0ge1xuICAgICAgLi4ub3B0cyxcbiAgICAgIGZsb29yOiBvcHRzLnJvdW5kICE9PSBmYWxzZSAmJiBvcHRzLmZsb29yICE9PSBmYWxzZSxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYywgZm10T3B0cykuZm9ybWF0RHVyYXRpb25Gcm9tU3RyaW5nKHRoaXMsIGZtdClcbiAgICAgIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGEgRHVyYXRpb24gd2l0aCBhbGwgdW5pdHMgaW5jbHVkZWQuXG4gICAqIFRvIG1vZGlmeSBpdHMgYmVoYXZpb3IsIHVzZSBgbGlzdFN0eWxlYCBhbmQgYW55IEludGwuTnVtYmVyRm9ybWF0IG9wdGlvbiwgdGhvdWdoIGB1bml0RGlzcGxheWAgaXMgZXNwZWNpYWxseSByZWxldmFudC5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9JbnRsL051bWJlckZvcm1hdC9OdW1iZXJGb3JtYXQjb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIEZvcm1hdHRpbmcgb3B0aW9ucy4gQWNjZXB0cyB0aGUgc2FtZSBrZXlzIGFzIHRoZSBvcHRpb25zIHBhcmFtZXRlciBvZiB0aGUgbmF0aXZlIGBJbnRsLk51bWJlckZvcm1hdGAgY29uc3RydWN0b3IsIGFzIHdlbGwgYXMgYGxpc3RTdHlsZWAuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5saXN0U3R5bGU9J25hcnJvdyddIC0gSG93IHRvIGZvcm1hdCB0aGUgbWVyZ2VkIGxpc3QuIENvcnJlc3BvbmRzIHRvIHRoZSBgc3R5bGVgIHByb3BlcnR5IG9mIHRoZSBvcHRpb25zIHBhcmFtZXRlciBvZiB0aGUgbmF0aXZlIGBJbnRsLkxpc3RGb3JtYXRgIGNvbnN0cnVjdG9yLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBqc1xuICAgKiB2YXIgZHVyID0gRHVyYXRpb24uZnJvbU9iamVjdCh7IGRheXM6IDEsIGhvdXJzOiA1LCBtaW51dGVzOiA2IH0pXG4gICAqIGR1ci50b0h1bWFuKCkgLy89PiAnMSBkYXksIDUgaG91cnMsIDYgbWludXRlcydcbiAgICogZHVyLnRvSHVtYW4oeyBsaXN0U3R5bGU6IFwibG9uZ1wiIH0pIC8vPT4gJzEgZGF5LCA1IGhvdXJzLCBhbmQgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IHVuaXREaXNwbGF5OiBcInNob3J0XCIgfSkgLy89PiAnMSBkYXksIDUgaHIsIDYgbWluJ1xuICAgKiBgYGBcbiAgICovXG4gIHRvSHVtYW4ob3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuXG4gICAgY29uc3QgbCA9IG9yZGVyZWRVbml0c1xuICAgICAgLm1hcCgodW5pdCkgPT4ge1xuICAgICAgICBjb25zdCB2YWwgPSB0aGlzLnZhbHVlc1t1bml0XTtcbiAgICAgICAgaWYgKGlzVW5kZWZpbmVkKHZhbCkpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5sb2NcbiAgICAgICAgICAubnVtYmVyRm9ybWF0dGVyKHsgc3R5bGU6IFwidW5pdFwiLCB1bml0RGlzcGxheTogXCJsb25nXCIsIC4uLm9wdHMsIHVuaXQ6IHVuaXQuc2xpY2UoMCwgLTEpIH0pXG4gICAgICAgICAgLmZvcm1hdCh2YWwpO1xuICAgICAgfSlcbiAgICAgIC5maWx0ZXIoKG4pID0+IG4pO1xuXG4gICAgcmV0dXJuIHRoaXMubG9jXG4gICAgICAubGlzdEZvcm1hdHRlcih7IHR5cGU6IFwiY29uanVuY3Rpb25cIiwgc3R5bGU6IG9wdHMubGlzdFN0eWxlIHx8IFwibmFycm93XCIsIC4uLm9wdHMgfSlcbiAgICAgIC5mb3JtYXQobCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggdGhpcyBEdXJhdGlvbidzIHZhbHVlcy5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9PYmplY3QoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB7fTtcbiAgICByZXR1cm4geyAuLi50aGlzLnZhbHVlcyB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI0R1cmF0aW9uc1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDMsIHNlY29uZHM6IDQ1IH0pLnRvSVNPKCkgLy89PiAnUDNZVDQ1UydcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1vbnRoczogNCwgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQNE1UNDVTJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbW9udGhzOiA1IH0pLnRvSVNPKCkgLy89PiAnUDVNJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbWludXRlczogNSB9KS50b0lTTygpIC8vPT4gJ1BUNU0nXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IDYgfSkudG9JU08oKSAvLz0+ICdQVDAuMDA2UydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU08oKSB7XG4gICAgLy8gd2UgY291bGQgdXNlIHRoZSBmb3JtYXR0ZXIsIGJ1dCB0aGlzIGlzIGFuIGVhc2llciB3YXkgdG8gZ2V0IHRoZSBtaW5pbXVtIHN0cmluZ1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBzID0gXCJQXCI7XG4gICAgaWYgKHRoaXMueWVhcnMgIT09IDApIHMgKz0gdGhpcy55ZWFycyArIFwiWVwiO1xuICAgIGlmICh0aGlzLm1vbnRocyAhPT0gMCB8fCB0aGlzLnF1YXJ0ZXJzICE9PSAwKSBzICs9IHRoaXMubW9udGhzICsgdGhpcy5xdWFydGVycyAqIDMgKyBcIk1cIjtcbiAgICBpZiAodGhpcy53ZWVrcyAhPT0gMCkgcyArPSB0aGlzLndlZWtzICsgXCJXXCI7XG4gICAgaWYgKHRoaXMuZGF5cyAhPT0gMCkgcyArPSB0aGlzLmRheXMgKyBcIkRcIjtcbiAgICBpZiAodGhpcy5ob3VycyAhPT0gMCB8fCB0aGlzLm1pbnV0ZXMgIT09IDAgfHwgdGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKVxuICAgICAgcyArPSBcIlRcIjtcbiAgICBpZiAodGhpcy5ob3VycyAhPT0gMCkgcyArPSB0aGlzLmhvdXJzICsgXCJIXCI7XG4gICAgaWYgKHRoaXMubWludXRlcyAhPT0gMCkgcyArPSB0aGlzLm1pbnV0ZXMgKyBcIk1cIjtcbiAgICBpZiAodGhpcy5zZWNvbmRzICE9PSAwIHx8IHRoaXMubWlsbGlzZWNvbmRzICE9PSAwKVxuICAgICAgLy8gdGhpcyB3aWxsIGhhbmRsZSBcImZsb2F0aW5nIHBvaW50IG1hZG5lc3NcIiBieSByZW1vdmluZyBleHRyYSBkZWNpbWFsIHBsYWNlc1xuICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTg4MDA0L2lzLWZsb2F0aW5nLXBvaW50LW1hdGgtYnJva2VuXG4gICAgICBzICs9IHJvdW5kVG8odGhpcy5zZWNvbmRzICsgdGhpcy5taWxsaXNlY29uZHMgLyAxMDAwLCAzKSArIFwiU1wiO1xuICAgIGlmIChzID09PSBcIlBcIikgcyArPSBcIlQwU1wiO1xuICAgIHJldHVybiBzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uLCBmb3JtYXR0ZWQgYXMgYSB0aW1lIG9mIGRheS5cbiAgICogTm90ZSB0aGF0IHRoaXMgd2lsbCByZXR1cm4gbnVsbCBpZiB0aGUgZHVyYXRpb24gaXMgaW52YWxpZCwgbmVnYXRpdmUsIG9yIGVxdWFsIHRvIG9yIGdyZWF0ZXIgdGhhbiAyNCBob3Vycy5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVByZWZpeD1mYWxzZV0gLSBpbmNsdWRlIHRoZSBgVGAgcHJlZml4XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSgpIC8vPT4gJzExOjAwOjAwLjAwMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBzdXBwcmVzc01pbGxpc2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMDowMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBzdXBwcmVzc1NlY29uZHM6IHRydWUgfSkgLy89PiAnMTE6MDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgaW5jbHVkZVByZWZpeDogdHJ1ZSB9KSAvLz0+ICdUMTE6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IGZvcm1hdDogJ2Jhc2ljJyB9KSAvLz0+ICcxMTAwMDAuMDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT1RpbWUob3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgbWlsbGlzID0gdGhpcy50b01pbGxpcygpO1xuICAgIGlmIChtaWxsaXMgPCAwIHx8IG1pbGxpcyA+PSA4NjQwMDAwMCkgcmV0dXJuIG51bGw7XG5cbiAgICBvcHRzID0ge1xuICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHM6IGZhbHNlLFxuICAgICAgc3VwcHJlc3NTZWNvbmRzOiBmYWxzZSxcbiAgICAgIGluY2x1ZGVQcmVmaXg6IGZhbHNlLFxuICAgICAgZm9ybWF0OiBcImV4dGVuZGVkXCIsXG4gICAgICAuLi5vcHRzLFxuICAgICAgaW5jbHVkZU9mZnNldDogZmFsc2UsXG4gICAgfTtcblxuICAgIGNvbnN0IGRhdGVUaW1lID0gRGF0ZVRpbWUuZnJvbU1pbGxpcyhtaWxsaXMsIHsgem9uZTogXCJVVENcIiB9KTtcbiAgICByZXR1cm4gZGF0ZVRpbWUudG9JU09UaW1lKG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIGRlYnVnZ2luZy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24gYXBwcm9wcmlhdGUgZm9yIHRoZSBSRVBMLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gYER1cmF0aW9uIHsgdmFsdWVzOiAke0pTT04uc3RyaW5naWZ5KHRoaXMudmFsdWVzKX0gfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgRHVyYXRpb24geyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdG9NaWxsaXMoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBOYU47XG5cbiAgICByZXR1cm4gZHVyYXRpb25Ub01pbGxpcyh0aGlzLm1hdHJpeCwgdGhpcy52YWx1ZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gbWlsbGlzZWNvbmRzIHZhbHVlIG9mIHRoaXMgRHVyYXRpb24uIEFsaWFzIG9mIHtAbGluayB0b01pbGxpc31cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy50b01pbGxpcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBEdXJhdGlvbiBsb25nZXIgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgcGx1cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgcmVzdWx0ID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGsgb2Ygb3JkZXJlZFVuaXRzKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkoZHVyLnZhbHVlcywgaykgfHwgaGFzT3duUHJvcGVydHkodGhpcy52YWx1ZXMsIGspKSB7XG4gICAgICAgIHJlc3VsdFtrXSA9IGR1ci5nZXQoaykgKyB0aGlzLmdldChrKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IHJlc3VsdCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIHRoaXMgRHVyYXRpb24gc2hvcnRlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIHN1YnRyYWN0LiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIG1pbnVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG4gICAgcmV0dXJuIHRoaXMucGx1cyhkdXIubmVnYXRlKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNjYWxlIHRoaXMgRHVyYXRpb24gYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuIFJldHVybiBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmbiAtIFRoZSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIHVuaXQuIEFyaXR5IGlzIDEgb3IgMjogdGhlIHZhbHVlIG9mIHRoZSB1bml0IGFuZCwgb3B0aW9uYWxseSwgdGhlIHVuaXQgbmFtZS4gTXVzdCByZXR1cm4gYSBudW1iZXIuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoeCA9PiB4ICogMikgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiA2MCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgbWludXRlczogMzAgfSkubWFwVW5pdHMoKHgsIHUpID0+IHUgPT09IFwiaG91cnNcIiA/IHggKiAyIDogeCkgLy89PiB7IGhvdXJzOiAyLCBtaW51dGVzOiAzMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbWFwVW5pdHMoZm4pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzKSkge1xuICAgICAgcmVzdWx0W2tdID0gYXNOdW1iZXIoZm4odGhpcy52YWx1ZXNba10sIGspKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiByZXN1bHQgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBvZiB1bml0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIGEgdW5pdCBzdWNoIGFzICdtaW51dGUnIG9yICdkYXknXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCd5ZWFycycpIC8vPT4gMlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMiwgZGF5czogM30pLmdldCgnbW9udGhzJykgLy89PiAwXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCdkYXlzJykgLy89PiAzXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXNbRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KV07XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgdmFsdWVzIG9mIHNwZWNpZmllZCB1bml0cy4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSBhIG1hcHBpbmcgb2YgdW5pdHMgdG8gbnVtYmVyc1xuICAgKiBAZXhhbXBsZSBkdXIuc2V0KHsgeWVhcnM6IDIwMTcgfSlcbiAgICogQGV4YW1wbGUgZHVyLnNldCh7IGhvdXJzOiA4LCBtaW51dGVzOiAzMCB9KVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBtaXhlZCA9IHsgLi4udGhpcy52YWx1ZXMsIC4uLm5vcm1hbGl6ZU9iamVjdCh2YWx1ZXMsIER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpIH07XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiBtaXhlZCB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBsb2NhbGUgYW5kL29yIG51bWJlcmluZ1N5c3RlbS4gIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQGV4YW1wbGUgZHVyLnJlY29uZmlndXJlKHsgbG9jYWxlOiAnZW4tR0InIH0pXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgcmVjb25maWd1cmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgY29udmVyc2lvbkFjY3VyYWN5LCBtYXRyaXggfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSB9KTtcbiAgICBjb25zdCBvcHRzID0geyBsb2MsIG1hdHJpeCwgY29udmVyc2lvbkFjY3VyYWN5IH07XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBkdXJhdGlvbiBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZXMnIG9yICdkYXlzJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMX0pLmFzKCdkYXlzJykgLy89PiAzNjVcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDF9KS5hcygnbW9udGhzJykgLy89PiAxMlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtob3VyczogNjB9KS5hcygnZGF5cycpIC8vPT4gMi41XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGFzKHVuaXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5zaGlmdFRvKHVuaXQpLmdldCh1bml0KSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWR1Y2UgdGhpcyBEdXJhdGlvbiB0byBpdHMgY2Fub25pY2FsIHJlcHJlc2VudGF0aW9uIGluIGl0cyBjdXJyZW50IHVuaXRzLlxuICAgKiBBc3N1bWluZyB0aGUgb3ZlcmFsbCB2YWx1ZSBvZiB0aGUgRHVyYXRpb24gaXMgcG9zaXRpdmUsIHRoaXMgbWVhbnM6XG4gICAqIC0gZXhjZXNzaXZlIHZhbHVlcyBmb3IgbG93ZXItb3JkZXIgdW5pdHMgYXJlIGNvbnZlcnRlZCB0byBoaWdoZXItb3JkZXIgdW5pdHMgKGlmIHBvc3NpYmxlLCBzZWUgZmlyc3QgYW5kIHNlY29uZCBleGFtcGxlKVxuICAgKiAtIG5lZ2F0aXZlIGxvd2VyLW9yZGVyIHVuaXRzIGFyZSBjb252ZXJ0ZWQgdG8gaGlnaGVyIG9yZGVyIHVuaXRzICh0aGVyZSBtdXN0IGJlIHN1Y2ggYSBoaWdoZXIgb3JkZXIgdW5pdCwgb3RoZXJ3aXNlXG4gICAqICAgdGhlIG92ZXJhbGwgdmFsdWUgd291bGQgYmUgbmVnYXRpdmUsIHNlZSB0aGlyZCBleGFtcGxlKVxuICAgKiAtIGZyYWN0aW9uYWwgdmFsdWVzIGZvciBoaWdoZXItb3JkZXIgdW5pdHMgYXJlIGNvbnZlcnRlZCB0byBsb3dlci1vcmRlciB1bml0cyAoaWYgcG9zc2libGUsIHNlZSBmb3VydGggZXhhbXBsZSlcbiAgICpcbiAgICogSWYgdGhlIG92ZXJhbGwgdmFsdWUgaXMgbmVnYXRpdmUsIHRoZSByZXN1bHQgb2YgdGhpcyBtZXRob2QgaXMgZXF1aXZhbGVudCB0byBgdGhpcy5uZWdhdGUoKS5ub3JtYWxpemUoKS5uZWdhdGUoKWAuXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMiwgZGF5czogNTAwMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMTUsIGRheXM6IDI1NSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBkYXlzOiA1MDAwIH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IGRheXM6IDUwMDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEyLCBtaW51dGVzOiAtNDUgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAxNSB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMi41LCBkYXlzOiAwLCBob3VyczogMCB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyB5ZWFyczogMiwgZGF5czogMTgyLCBob3VyczogMTIgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIG5vcm1hbGl6ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgdmFscyA9IHRoaXMudG9PYmplY3QoKTtcbiAgICBub3JtYWxpemVWYWx1ZXModGhpcy5tYXRyaXgsIHZhbHMpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogdmFscyB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNjYWxlIHVuaXRzIHRvIGl0cyBsYXJnZXN0IHJlcHJlc2VudGF0aW9uXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IDkwMDAwIH0pLnJlc2NhbGUoKS50b09iamVjdCgpIC8vPT4geyBtaW51dGVzOiAxLCBzZWNvbmRzOiAzMCB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgcmVzY2FsZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgdmFscyA9IHJlbW92ZVplcm9lcyh0aGlzLm5vcm1hbGl6ZSgpLnNoaWZ0VG9BbGwoKS50b09iamVjdCgpKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IHZhbHMgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydCB0aGlzIER1cmF0aW9uIGludG8gaXRzIHJlcHJlc2VudGF0aW9uIGluIGEgZGlmZmVyZW50IHNldCBvZiB1bml0cy5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBzZWNvbmRzOiAzMCB9KS5zaGlmdFRvKCdtaW51dGVzJywgJ21pbGxpc2Vjb25kcycpLnRvT2JqZWN0KCkgLy89PiB7IG1pbnV0ZXM6IDYwLCBtaWxsaXNlY29uZHM6IDMwMDAwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBzaGlmdFRvKC4uLnVuaXRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKHVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdW5pdHMgPSB1bml0cy5tYXAoKHUpID0+IER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodSkpO1xuXG4gICAgY29uc3QgYnVpbHQgPSB7fSxcbiAgICAgIGFjY3VtdWxhdGVkID0ge30sXG4gICAgICB2YWxzID0gdGhpcy50b09iamVjdCgpO1xuICAgIGxldCBsYXN0VW5pdDtcblxuICAgIGZvciAoY29uc3QgayBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmICh1bml0cy5pbmRleE9mKGspID49IDApIHtcbiAgICAgICAgbGFzdFVuaXQgPSBrO1xuXG4gICAgICAgIGxldCBvd24gPSAwO1xuXG4gICAgICAgIC8vIGFueXRoaW5nIHdlIGhhdmVuJ3QgYm9pbGVkIGRvd24geWV0IHNob3VsZCBnZXQgYm9pbGVkIHRvIHRoaXMgdW5pdFxuICAgICAgICBmb3IgKGNvbnN0IGFrIGluIGFjY3VtdWxhdGVkKSB7XG4gICAgICAgICAgb3duICs9IHRoaXMubWF0cml4W2FrXVtrXSAqIGFjY3VtdWxhdGVkW2FrXTtcbiAgICAgICAgICBhY2N1bXVsYXRlZFtha10gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGx1cyBhbnl0aGluZyB0aGF0J3MgYWxyZWFkeSBpbiB0aGlzIHVuaXRcbiAgICAgICAgaWYgKGlzTnVtYmVyKHZhbHNba10pKSB7XG4gICAgICAgICAgb3duICs9IHZhbHNba107XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvbmx5IGtlZXAgdGhlIGludGVnZXIgcGFydCBmb3Igbm93IGluIHRoZSBob3BlcyBvZiBwdXR0aW5nIGFueSBkZWNpbWFsIHBhcnRcbiAgICAgICAgLy8gaW50byBhIHNtYWxsZXIgdW5pdCBsYXRlclxuICAgICAgICBjb25zdCBpID0gTWF0aC50cnVuYyhvd24pO1xuICAgICAgICBidWlsdFtrXSA9IGk7XG4gICAgICAgIGFjY3VtdWxhdGVkW2tdID0gKG93biAqIDEwMDAgLSBpICogMTAwMCkgLyAxMDAwO1xuXG4gICAgICAgIC8vIG90aGVyd2lzZSwga2VlcCBpdCBpbiB0aGUgd2luZ3MgdG8gYm9pbCBpdCBsYXRlclxuICAgICAgfSBlbHNlIGlmIChpc051bWJlcih2YWxzW2tdKSkge1xuICAgICAgICBhY2N1bXVsYXRlZFtrXSA9IHZhbHNba107XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gYW55dGhpbmcgbGVmdG92ZXIgYmVjb21lcyB0aGUgZGVjaW1hbCBmb3IgdGhlIGxhc3QgdW5pdFxuICAgIC8vIGxhc3RVbml0IG11c3QgYmUgZGVmaW5lZCBzaW5jZSB1bml0cyBpcyBub3QgZW1wdHlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhY2N1bXVsYXRlZCkge1xuICAgICAgaWYgKGFjY3VtdWxhdGVkW2tleV0gIT09IDApIHtcbiAgICAgICAgYnVpbHRbbGFzdFVuaXRdICs9XG4gICAgICAgICAga2V5ID09PSBsYXN0VW5pdCA/IGFjY3VtdWxhdGVkW2tleV0gOiBhY2N1bXVsYXRlZFtrZXldIC8gdGhpcy5tYXRyaXhbbGFzdFVuaXRdW2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgbm9ybWFsaXplVmFsdWVzKHRoaXMubWF0cml4LCBidWlsdCk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiBidWlsdCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaGlmdCB0aGlzIER1cmF0aW9uIHRvIGFsbCBhdmFpbGFibGUgdW5pdHMuXG4gICAqIFNhbWUgYXMgc2hpZnRUbyhcInllYXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiKVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHNoaWZ0VG9BbGwoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHJldHVybiB0aGlzLnNoaWZ0VG8oXG4gICAgICBcInllYXJzXCIsXG4gICAgICBcIm1vbnRoc1wiLFxuICAgICAgXCJ3ZWVrc1wiLFxuICAgICAgXCJkYXlzXCIsXG4gICAgICBcImhvdXJzXCIsXG4gICAgICBcIm1pbnV0ZXNcIixcbiAgICAgIFwic2Vjb25kc1wiLFxuICAgICAgXCJtaWxsaXNlY29uZHNcIlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBuZWdhdGl2ZSBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIHNlY29uZHM6IDMwIH0pLm5lZ2F0ZSgpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAtMSwgc2Vjb25kczogLTMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBuZWdhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IG5lZ2F0ZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKSB7XG4gICAgICBuZWdhdGVkW2tdID0gdGhpcy52YWx1ZXNba10gPT09IDAgPyAwIDogLXRoaXMudmFsdWVzW2tdO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IG5lZ2F0ZWQgfSwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB5ZWFycy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB5ZWFycygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMueWVhcnMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1YXJ0ZXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHF1YXJ0ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5xdWFydGVycyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW9udGhzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1vbnRocygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubW9udGhzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrc1xuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy53ZWVrcyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5cy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBkYXlzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5kYXlzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBob3Vycy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBob3VycygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuaG91cnMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbnV0ZXMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWludXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWludXRlcyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2Vjb25kcy5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHNlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnNlY29uZHMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbGxpc2Vjb25kcy5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbGxpc2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMubWlsbGlzZWNvbmRzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkLiBJbnZhbGlkIGR1cmF0aW9ucyBhcmUgcmV0dXJuZWQgYnkgZGlmZiBvcGVyYXRpb25zXG4gICAqIG9uIGludmFsaWQgRGF0ZVRpbWVzIG9yIEludGVydmFscy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkUmVhc29uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIER1cmF0aW9uIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEdXJhdGlvbiBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBFcXVhbGl0eSBjaGVja1xuICAgKiBUd28gRHVyYXRpb25zIGFyZSBlcXVhbCBpZmYgdGhleSBoYXZlIHRoZSBzYW1lIHVuaXRzIGFuZCB0aGUgc2FtZSB2YWx1ZXMgZm9yIGVhY2ggdW5pdC5cbiAgICogQHBhcmFtIHtEdXJhdGlvbn0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVxdWFscyhvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlci5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmxvYy5lcXVhbHMob3RoZXIubG9jKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVxKHYxLCB2Mikge1xuICAgICAgLy8gQ29uc2lkZXIgMCBhbmQgdW5kZWZpbmVkIGFzIGVxdWFsXG4gICAgICBpZiAodjEgPT09IHVuZGVmaW5lZCB8fCB2MSA9PT0gMCkgcmV0dXJuIHYyID09PSB1bmRlZmluZWQgfHwgdjIgPT09IDA7XG4gICAgICByZXR1cm4gdjEgPT09IHYyO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgdSBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmICghZXEodGhpcy52YWx1ZXNbdV0sIG90aGVyLnZhbHVlc1t1XSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRlVGltZSwgeyBmcmllbmRseURhdGVUaW1lIH0gZnJvbSBcIi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCBEdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgeyBJbnZhbGlkQXJndW1lbnRFcnJvciwgSW52YWxpZEludGVydmFsRXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ltcGwvaW52YWxpZC5qc1wiO1xuaW1wb3J0IEZvcm1hdHRlciBmcm9tIFwiLi9pbXBsL2Zvcm1hdHRlci5qc1wiO1xuaW1wb3J0ICogYXMgRm9ybWF0cyBmcm9tIFwiLi9pbXBsL2Zvcm1hdHMuanNcIjtcblxuY29uc3QgSU5WQUxJRCA9IFwiSW52YWxpZCBJbnRlcnZhbFwiO1xuXG4vLyBjaGVja3MgaWYgdGhlIHN0YXJ0IGlzIGVxdWFsIHRvIG9yIGJlZm9yZSB0aGUgZW5kXG5mdW5jdGlvbiB2YWxpZGF0ZVN0YXJ0RW5kKHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCB8fCAhc3RhcnQuaXNWYWxpZCkge1xuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwibWlzc2luZyBvciBpbnZhbGlkIHN0YXJ0XCIpO1xuICB9IGVsc2UgaWYgKCFlbmQgfHwgIWVuZC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kXCIpO1xuICB9IGVsc2UgaWYgKGVuZCA8IHN0YXJ0KSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXG4gICAgICBcImVuZCBiZWZvcmUgc3RhcnRcIixcbiAgICAgIGBUaGUgZW5kIG9mIGFuIGludGVydmFsIG11c3QgYmUgYWZ0ZXIgaXRzIHN0YXJ0LCBidXQgeW91IGhhZCBzdGFydD0ke3N0YXJ0LnRvSVNPKCl9IGFuZCBlbmQ9JHtlbmQudG9JU08oKX1gXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEFuIEludGVydmFsIG9iamVjdCByZXByZXNlbnRzIGEgaGFsZi1vcGVuIGludGVydmFsIG9mIHRpbWUsIHdoZXJlIGVhY2ggZW5kcG9pbnQgaXMgYSB7QGxpbmsgRGF0ZVRpbWV9LiBDb25jZXB0dWFsbHksIGl0J3MgYSBjb250YWluZXIgZm9yIHRob3NlIHR3byBlbmRwb2ludHMsIGFjY29tcGFuaWVkIGJ5IG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCBjb21wYXJpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBtZXRob2RzIGFuZCBnZXR0ZXJzIGluIEludGVydmFsOlxuICpcbiAqICogKipDcmVhdGlvbioqIFRvIGNyZWF0ZSBhbiBJbnRlcnZhbCwgdXNlIHtAbGluayBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzfSwge0BsaW5rIEludGVydmFsLmFmdGVyfSwge0BsaW5rIEludGVydmFsLmJlZm9yZX0sIG9yIHtAbGluayBJbnRlcnZhbC5mcm9tSVNPfS5cbiAqICogKipBY2Nlc3NvcnMqKiBVc2Uge0BsaW5rIEludGVydmFsI3N0YXJ0fSBhbmQge0BsaW5rIEludGVydmFsI2VuZH0gdG8gZ2V0IHRoZSBzdGFydCBhbmQgZW5kLlxuICogKiAqKkludGVycm9nYXRpb24qKiBUbyBhbmFseXplIHRoZSBJbnRlcnZhbCwgdXNlIHtAbGluayBJbnRlcnZhbCNjb3VudH0sIHtAbGluayBJbnRlcnZhbCNsZW5ndGh9LCB7QGxpbmsgSW50ZXJ2YWwjaGFzU2FtZX0sIHtAbGluayBJbnRlcnZhbCNjb250YWluc30sIHtAbGluayBJbnRlcnZhbCNpc0FmdGVyfSwgb3Ige0BsaW5rIEludGVydmFsI2lzQmVmb3JlfS5cbiAqICogKipUcmFuc2Zvcm1hdGlvbioqIFRvIGNyZWF0ZSBvdGhlciBJbnRlcnZhbHMgb3V0IG9mIHRoaXMgb25lLCB1c2Uge0BsaW5rIEludGVydmFsI3NldH0sIHtAbGluayBJbnRlcnZhbCNzcGxpdEF0fSwge0BsaW5rIEludGVydmFsI3NwbGl0Qnl9LCB7QGxpbmsgSW50ZXJ2YWwjZGl2aWRlRXF1YWxseX0sIHtAbGluayBJbnRlcnZhbC5tZXJnZX0sIHtAbGluayBJbnRlcnZhbC54b3J9LCB7QGxpbmsgSW50ZXJ2YWwjdW5pb259LCB7QGxpbmsgSW50ZXJ2YWwjaW50ZXJzZWN0aW9ufSwgb3Ige0BsaW5rIEludGVydmFsI2RpZmZlcmVuY2V9LlxuICogKiAqKkNvbXBhcmlzb24qKiBUbyBjb21wYXJlIHRoaXMgSW50ZXJ2YWwgdG8gYW5vdGhlciBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjZXF1YWxzfSwge0BsaW5rIEludGVydmFsI292ZXJsYXBzfSwge0BsaW5rIEludGVydmFsI2FidXRzU3RhcnR9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNFbmR9LCB7QGxpbmsgSW50ZXJ2YWwjZW5ndWxmc31cbiAqICogKipPdXRwdXQqKiBUbyBjb252ZXJ0IHRoZSBJbnRlcnZhbCBpbnRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgc2VlIHtAbGluayBJbnRlcnZhbCN0b1N0cmluZ30sIHtAbGluayBJbnRlcnZhbCN0b0xvY2FsZVN0cmluZ30sIHtAbGluayBJbnRlcnZhbCN0b0lTT30sIHtAbGluayBJbnRlcnZhbCN0b0lTT0RhdGV9LCB7QGxpbmsgSW50ZXJ2YWwjdG9JU09UaW1lfSwge0BsaW5rIEludGVydmFsI3RvRm9ybWF0fSwgYW5kIHtAbGluayBJbnRlcnZhbCN0b0R1cmF0aW9ufS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW50ZXJ2YWwge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucyA9IGNvbmZpZy5zdGFydDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmUgPSBjb25maWcuZW5kO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaW52YWxpZCA9IGNvbmZpZy5pbnZhbGlkIHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pc0x1eG9uSW50ZXJ2YWwgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpbnZhbGlkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVhc29uIC0gc2ltcGxlIHN0cmluZyBvZiB3aHkgdGhpcyBJbnRlcnZhbCBpcyBpbnZhbGlkLiBTaG91bGQgbm90IGNvbnRhaW4gcGFyYW1ldGVycyBvciBhbnl0aGluZyBlbHNlIGRhdGEtZGVwZW5kZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkge1xuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIEludGVydmFsIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRJbnRlcnZhbEVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IEludGVydmFsKHsgaW52YWxpZCB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYSBzdGFydCBEYXRlVGltZSBhbmQgYW4gZW5kIERhdGVUaW1lLiBJbmNsdXNpdmUgb2YgdGhlIHN0YXJ0IGJ1dCBub3QgdGhlIGVuZC5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGZyb21EYXRlVGltZXMoc3RhcnQsIGVuZCkge1xuICAgIGNvbnN0IGJ1aWx0U3RhcnQgPSBmcmllbmRseURhdGVUaW1lKHN0YXJ0KSxcbiAgICAgIGJ1aWx0RW5kID0gZnJpZW5kbHlEYXRlVGltZShlbmQpO1xuXG4gICAgY29uc3QgdmFsaWRhdGVFcnJvciA9IHZhbGlkYXRlU3RhcnRFbmQoYnVpbHRTdGFydCwgYnVpbHRFbmQpO1xuXG4gICAgaWYgKHZhbGlkYXRlRXJyb3IgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh7XG4gICAgICAgIHN0YXJ0OiBidWlsdFN0YXJ0LFxuICAgICAgICBlbmQ6IGJ1aWx0RW5kLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gc3RhcnRcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsLlxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBhZnRlcihzdGFydCwgZHVyYXRpb24pIHtcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShzdGFydCk7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQsIGR0LnBsdXMoZHVyKSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gZW5kIERhdGVUaW1lIGFuZCBhIER1cmF0aW9uIHRvIGV4dGVuZCBiYWNrd2FyZHMgdG8uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV8RGF0ZXxPYmplY3R9IGVuZFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGJlZm9yZShlbmQsIGR1cmF0aW9uKSB7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksXG4gICAgICBkdCA9IGZyaWVuZGx5RGF0ZVRpbWUoZW5kKTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdC5taW51cyhkdXIpLCBkdCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIEludGVydmFsIGZyb20gYW4gSVNPIDg2MDEgc3RyaW5nLlxuICAgKiBBY2NlcHRzIGA8c3RhcnQ+LzxlbmQ+YCwgYDxzdGFydD4vPGR1cmF0aW9uPmAsIGFuZCBgPGR1cmF0aW9uPi88ZW5kPmAgZm9ybWF0cy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIC0gb3B0aW9ucyB0byBwYXNzIHtAbGluayBEYXRlVGltZSNmcm9tSVNPfSBhbmQgb3B0aW9uYWxseSB7QGxpbmsgRHVyYXRpb24jZnJvbUlTT31cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMpIHtcbiAgICBjb25zdCBbcywgZV0gPSAodGV4dCB8fCBcIlwiKS5zcGxpdChcIi9cIiwgMik7XG4gICAgaWYgKHMgJiYgZSkge1xuICAgICAgbGV0IHN0YXJ0LCBzdGFydElzVmFsaWQ7XG4gICAgICB0cnkge1xuICAgICAgICBzdGFydCA9IERhdGVUaW1lLmZyb21JU08ocywgb3B0cyk7XG4gICAgICAgIHN0YXJ0SXNWYWxpZCA9IHN0YXJ0LmlzVmFsaWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHN0YXJ0SXNWYWxpZCA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBsZXQgZW5kLCBlbmRJc1ZhbGlkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZW5kID0gRGF0ZVRpbWUuZnJvbUlTTyhlLCBvcHRzKTtcbiAgICAgICAgZW5kSXNWYWxpZCA9IGVuZC5pc1ZhbGlkO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlbmRJc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGFydElzVmFsaWQgJiYgZW5kSXNWYWxpZCkge1xuICAgICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCwgZW5kKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCkge1xuICAgICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tSVNPKGUsIG9wdHMpO1xuICAgICAgICBpZiAoZHVyLmlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYWZ0ZXIoc3RhcnQsIGR1cik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZW5kSXNWYWxpZCkge1xuICAgICAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tSVNPKHMsIG9wdHMpO1xuICAgICAgICBpZiAoZHVyLmlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4gSW50ZXJ2YWwuYmVmb3JlKGVuZCwgZHVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcInVucGFyc2FibGVcIiwgYHRoZSBpbnB1dCBcIiR7dGV4dH1cIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYW4gSW50ZXJ2YWwuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc0ludGVydmFsKG8pIHtcbiAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uSW50ZXJ2YWwpIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHN0YXJ0IG9mIHRoZSBJbnRlcnZhbFxuICAgKiBAdHlwZSB7RGF0ZVRpbWV9XG4gICAqL1xuICBnZXQgc3RhcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMucyA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZW5kIG9mIHRoZSBJbnRlcnZhbFxuICAgKiBAdHlwZSB7RGF0ZVRpbWV9XG4gICAqL1xuICBnZXQgZW5kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGF0IGxlYXN0IGl0cyBzdGFydCwgbWVhbmluZyB0aGF0IHRoZSBJbnRlcnZhbCBpc24ndCAnYmFja3dhcmRzJy5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkUmVhc29uID09PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXJyb3IgY29kZSBpZiB0aGlzIEludGVydmFsIGlzIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIEludGVydmFsIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZFJlYXNvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLnJlYXNvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBleHBsYW5hdGlvbiBvZiB3aHkgdGhpcyBJbnRlcnZhbCBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkRXhwbGFuYXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5leHBsYW5hdGlvbiA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbCBpbiB0aGUgc3BlY2lmaWVkIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIHJldHVybiB0aGUgbGVuZ3RoIGluLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBsZW5ndGgodW5pdCA9IFwibWlsbGlzZWNvbmRzXCIpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50b0R1cmF0aW9uKC4uLlt1bml0XSkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNvdW50IG9mIG1pbnV0ZXMsIGhvdXJzLCBkYXlzLCBtb250aHMsIG9yIHllYXJzIGluY2x1ZGVkIGluIHRoZSBJbnRlcnZhbCwgZXZlbiBpbiBwYXJ0LlxuICAgKiBVbmxpa2Uge0BsaW5rIEludGVydmFsI2xlbmd0aH0gdGhpcyBjb3VudHMgc2VjdGlvbnMgb2YgdGhlIGNhbGVuZGFyLCBub3QgcGVyaW9kcyBvZiB0aW1lLCBlLmcuIHNwZWNpZnlpbmcgJ2RheSdcbiAgICogYXNrcyAnd2hhdCBkYXRlcyBhcmUgaW5jbHVkZWQgaW4gdGhpcyBpbnRlcnZhbD8nLCBub3QgJ2hvdyBtYW55IGRheXMgbG9uZyBpcyB0aGlzIGludGVydmFsPydcbiAgICogQHBhcmFtIHtzdHJpbmd9IFt1bml0PSdtaWxsaXNlY29uZHMnXSAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY291bnQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnVzZUxvY2FsZVdlZWtzPWZhbHNlXSAtIElmIHRydWUsIHVzZSB3ZWVrcyBiYXNlZCBvbiB0aGUgbG9jYWxlLCBpLmUuIHVzZSB0aGUgbG9jYWxlLWRlcGVuZGVudCBzdGFydCBvZiB0aGUgd2VlazsgdGhpcyBvcGVyYXRpb24gd2lsbCBhbHdheXMgdXNlIHRoZSBsb2NhbGUgb2YgdGhlIHN0YXJ0IERhdGVUaW1lXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGNvdW50KHVuaXQgPSBcIm1pbGxpc2Vjb25kc1wiLCBvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBOYU47XG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLnN0YXJ0LnN0YXJ0T2YodW5pdCwgb3B0cyk7XG4gICAgbGV0IGVuZDtcbiAgICBpZiAob3B0cz8udXNlTG9jYWxlV2Vla3MpIHtcbiAgICAgIGVuZCA9IHRoaXMuZW5kLnJlY29uZmlndXJlKHsgbG9jYWxlOiBzdGFydC5sb2NhbGUgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVuZCA9IHRoaXMuZW5kO1xuICAgIH1cbiAgICBlbmQgPSBlbmQuc3RhcnRPZih1bml0LCBvcHRzKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihlbmQuZGlmZihzdGFydCwgdW5pdCkuZ2V0KHVuaXQpKSArIChlbmQudmFsdWVPZigpICE9PSB0aGlzLmVuZC52YWx1ZU9mKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgYW5kIGVuZCBhcmUgYm90aCBpbiB0aGUgc2FtZSB1bml0IG9mIHRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCBvZiB0aW1lIHRvIGNoZWNrIHNhbWVuZXNzIG9uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTYW1lKHVuaXQpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5pc0VtcHR5KCkgfHwgdGhpcy5lLm1pbnVzKDEpLmhhc1NhbWUodGhpcy5zLCB1bml0KSA6IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwgaGFzIHRoZSBzYW1lIHN0YXJ0IGFuZCBlbmQgRGF0ZVRpbWVzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5zLnZhbHVlT2YoKSA9PT0gdGhpcy5lLnZhbHVlT2YoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWZ0ZXIgdGhlIHNwZWNpZmllZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gZGF0ZVRpbWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQWZ0ZXIoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPiBkYXRlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGJlZm9yZSB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNCZWZvcmUoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmUgPD0gZGF0ZVRpbWU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBjb250YWlucyB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgY29udGFpbnMoZGF0ZVRpbWUpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gZGF0ZVRpbWUgJiYgdGhpcy5lID4gZGF0ZVRpbWU7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRzXCIgdGhlIHN0YXJ0IGFuZC9vciBlbmQgZGF0ZXMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIHRoZSB2YWx1ZXMgdG8gc2V0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5zdGFydCAtIHRoZSBzdGFydGluZyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSB2YWx1ZXMuZW5kIC0gdGhlIGVuZGluZyBEYXRlVGltZVxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHNldCh7IHN0YXJ0LCBlbmQgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0IHx8IHRoaXMucywgZW5kIHx8IHRoaXMuZSk7XG4gIH1cblxuICAvKipcbiAgICogU3BsaXQgdGhpcyBJbnRlcnZhbCBhdCBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWVzXG4gICAqIEBwYXJhbSB7Li4uRGF0ZVRpbWV9IGRhdGVUaW1lcyAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY291bnQuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3BsaXRBdCguLi5kYXRlVGltZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIFtdO1xuICAgIGNvbnN0IHNvcnRlZCA9IGRhdGVUaW1lc1xuICAgICAgICAubWFwKGZyaWVuZGx5RGF0ZVRpbWUpXG4gICAgICAgIC5maWx0ZXIoKGQpID0+IHRoaXMuY29udGFpbnMoZCkpXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnRvTWlsbGlzKCkgLSBiLnRvTWlsbGlzKCkpLFxuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgIGxldCB7IHMgfSA9IHRoaXMsXG4gICAgICBpID0gMDtcblxuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICBjb25zdCBhZGRlZCA9IHNvcnRlZFtpXSB8fCB0aGlzLmUsXG4gICAgICAgIG5leHQgPSArYWRkZWQgPiArdGhpcy5lID8gdGhpcy5lIDogYWRkZWQ7XG4gICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBuZXh0KSk7XG4gICAgICBzID0gbmV4dDtcbiAgICAgIGkgKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGludG8gc21hbGxlciBJbnRlcnZhbHMsIGVhY2ggb2YgdGhlIHNwZWNpZmllZCBsZW5ndGguXG4gICAqIExlZnQgb3ZlciB0aW1lIGlzIGdyb3VwZWQgaW50byBhIHNtYWxsZXIgaW50ZXJ2YWxcbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBsZW5ndGggb2YgZWFjaCByZXN1bHRpbmcgaW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3BsaXRCeShkdXJhdGlvbikge1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pO1xuXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIWR1ci5pc1ZhbGlkIHx8IGR1ci5hcyhcIm1pbGxpc2Vjb25kc1wiKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGxldCB7IHMgfSA9IHRoaXMsXG4gICAgICBpZHggPSAxLFxuICAgICAgbmV4dDtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICB3aGlsZSAocyA8IHRoaXMuZSkge1xuICAgICAgY29uc3QgYWRkZWQgPSB0aGlzLnN0YXJ0LnBsdXMoZHVyLm1hcFVuaXRzKCh4KSA9PiB4ICogaWR4KSk7XG4gICAgICBuZXh0ID0gK2FkZGVkID4gK3RoaXMuZSA/IHRoaXMuZSA6IGFkZGVkO1xuICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMocywgbmV4dCkpO1xuICAgICAgcyA9IG5leHQ7XG4gICAgICBpZHggKz0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGludG8gdGhlIHNwZWNpZmllZCBudW1iZXIgb2Ygc21hbGxlciBpbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJPZlBhcnRzIC0gVGhlIG51bWJlciBvZiBJbnRlcnZhbHMgdG8gZGl2aWRlIHRoZSBJbnRlcnZhbCBpbnRvLlxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGRpdmlkZUVxdWFsbHkobnVtYmVyT2ZQYXJ0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHRoaXMuc3BsaXRCeSh0aGlzLmxlbmd0aCgpIC8gbnVtYmVyT2ZQYXJ0cykuc2xpY2UoMCwgbnVtYmVyT2ZQYXJ0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBvdmVybGFwcyB3aXRoIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxcbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIG92ZXJsYXBzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuZSA+IG90aGVyLnMgJiYgdGhpcy5zIDwgb3RoZXIuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3MgZW5kIGlzIGFkamFjZW50IHRvIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwncyBzdGFydC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGFidXRzU3RhcnQob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiArdGhpcy5lID09PSArb3RoZXIucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsJ3Mgc3RhcnQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIGVuZC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGFidXRzRW5kKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gK290aGVyLmUgPT09ICt0aGlzLnM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBlbmd1bGZzIHRoZSBzdGFydCBhbmQgZW5kIG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbmd1bGZzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5zIDw9IG90aGVyLnMgJiYgdGhpcy5lID49IG90aGVyLmU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBhcyB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zLmVxdWFscyhvdGhlci5zKSAmJiB0aGlzLmUuZXF1YWxzKG90aGVyLmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIGludGVyc2VjdGlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtYXhpbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtaW5pbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBSZXR1cm5zIG51bGwgaWYgdGhlIGludGVyc2VjdGlvbiBpcyBlbXB0eSwgbWVhbmluZywgdGhlIGludGVydmFscyBkb24ndCBpbnRlcnNlY3QuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgaW50ZXJzZWN0aW9uKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHMgPSB0aGlzLnMgPiBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgIGUgPSB0aGlzLmUgPCBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTtcblxuICAgIGlmIChzID49IGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgdW5pb24gb2YgdGhpcyBJbnRlcnZhbCBhbmQgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgcmVzdWx0aW5nIEludGVydmFsIGhhcyB0aGUgbWluaW11bSBzdGFydCB0aW1lIGFuZCB0aGUgbWF4aW11bSBlbmQgdGltZSBvZiB0aGUgdHdvIEludGVydmFscy5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICB1bmlvbihvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBzID0gdGhpcy5zIDwgb3RoZXIucyA/IHRoaXMucyA6IG90aGVyLnMsXG4gICAgICBlID0gdGhpcy5lID4gb3RoZXIuZSA/IHRoaXMuZSA6IG90aGVyLmU7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMocywgZSk7XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2UgYW4gYXJyYXkgb2YgSW50ZXJ2YWxzIGludG8gYSBlcXVpdmFsZW50IG1pbmltYWwgc2V0IG9mIEludGVydmFscy5cbiAgICogQ29tYmluZXMgb3ZlcmxhcHBpbmcgYW5kIGFkamFjZW50IEludGVydmFscy5cbiAgICogQHBhcmFtIHtBcnJheX0gaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1lcmdlKGludGVydmFscykge1xuICAgIGNvbnN0IFtmb3VuZCwgZmluYWxdID0gaW50ZXJ2YWxzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5zIC0gYi5zKVxuICAgICAgLnJlZHVjZShcbiAgICAgICAgKFtzb2ZhciwgY3VycmVudF0sIGl0ZW0pID0+IHtcbiAgICAgICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBbc29mYXIsIGl0ZW1dO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudC5vdmVybGFwcyhpdGVtKSB8fCBjdXJyZW50LmFidXRzU3RhcnQoaXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBbc29mYXIsIGN1cnJlbnQudW5pb24oaXRlbSldO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW3NvZmFyLmNvbmNhdChbY3VycmVudF0pLCBpdGVtXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFtbXSwgbnVsbF1cbiAgICAgICk7XG4gICAgaWYgKGZpbmFsKSB7XG4gICAgICBmb3VuZC5wdXNoKGZpbmFsKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBJbnRlcnZhbHMgcmVwcmVzZW50aW5nIHRoZSBzcGFucyBvZiB0aW1lIHRoYXQgb25seSBhcHBlYXIgaW4gb25lIG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgeG9yKGludGVydmFscykge1xuICAgIGxldCBzdGFydCA9IG51bGwsXG4gICAgICBjdXJyZW50Q291bnQgPSAwO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbXSxcbiAgICAgIGVuZHMgPSBpbnRlcnZhbHMubWFwKChpKSA9PiBbXG4gICAgICAgIHsgdGltZTogaS5zLCB0eXBlOiBcInNcIiB9LFxuICAgICAgICB7IHRpbWU6IGkuZSwgdHlwZTogXCJlXCIgfSxcbiAgICAgIF0pLFxuICAgICAgZmxhdHRlbmVkID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdCguLi5lbmRzKSxcbiAgICAgIGFyciA9IGZsYXR0ZW5lZC5zb3J0KChhLCBiKSA9PiBhLnRpbWUgLSBiLnRpbWUpO1xuXG4gICAgZm9yIChjb25zdCBpIG9mIGFycikge1xuICAgICAgY3VycmVudENvdW50ICs9IGkudHlwZSA9PT0gXCJzXCIgPyAxIDogLTE7XG5cbiAgICAgIGlmIChjdXJyZW50Q291bnQgPT09IDEpIHtcbiAgICAgICAgc3RhcnQgPSBpLnRpbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc3RhcnQgJiYgK3N0YXJ0ICE9PSAraS50aW1lKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQsIGkudGltZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhcnQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBJbnRlcnZhbC5tZXJnZShyZXN1bHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSBzcGFuIG9mIHRpbWUgaW4gdGhpcyBJbnRlcnZhbCB0aGF0IGRvZXNuJ3Qgb3ZlcmxhcCB3aXRoIGFueSBvZiB0aGUgc3BlY2lmaWVkIEludGVydmFscy5cbiAgICogQHBhcmFtIHsuLi5JbnRlcnZhbH0gaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZGlmZmVyZW5jZSguLi5pbnRlcnZhbHMpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwueG9yKFt0aGlzXS5jb25jYXQoaW50ZXJ2YWxzKSlcbiAgICAgIC5tYXAoKGkpID0+IHRoaXMuaW50ZXJzZWN0aW9uKGkpKVxuICAgICAgLmZpbHRlcigoaSkgPT4gaSAmJiAhaS5pc0VtcHR5KCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbCBhcHByb3ByaWF0ZSBmb3IgZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGBbJHt0aGlzLnMudG9JU08oKX0gXHUyMDEzICR7dGhpcy5lLnRvSVNPKCl9KWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGFwcHJvcHJpYXRlIGZvciB0aGUgUkVQTC5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgW1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGBJbnRlcnZhbCB7IHN0YXJ0OiAke3RoaXMucy50b0lTTygpfSwgZW5kOiAke3RoaXMuZS50b0lTTygpfSB9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBJbnRlcnZhbCB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbG9jYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBJbnRlcnZhbC4gQWNjZXB0cyB0aGUgc2FtZSBvcHRpb25zIGFzIHRoZVxuICAgKiBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIGFuZCBhbnkgcHJlc2V0cyBkZWZpbmVkIGJ5IEx1eG9uLCBzdWNoIGFzXG4gICAqIHtAbGluayBEYXRlVGltZS5EQVRFX0ZVTEx9IG9yIHtAbGluayBEYXRlVGltZS5USU1FX1NJTVBMRX0uIFRoZSBleGFjdCBiZWhhdmlvciBvZiB0aGlzIG1ldGhvZFxuICAgKiBpcyBicm93c2VyLXNwZWNpZmljLCBidXQgaW4gZ2VuZXJhbCBpdCB3aWxsIHJldHVybiBhbiBhcHByb3ByaWF0ZSByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICogSW50ZXJ2YWwgaW4gdGhlIGFzc2lnbmVkIGxvY2FsZS4gRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW5cbiAgICogc3BlY2lmaWVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZm9ybWF0T3B0cz1EYXRlVGltZS5EQVRFX1NIT1JUXSAtIEVpdGhlciBhIERhdGVUaW1lIHByZXNldCBvclxuICAgKiBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gT3B0aW9ucyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGUgc3RhcnQgRGF0ZVRpbWUuXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMDk6MDBaLzIwMjItMTEtMDhUMDk6MDBaJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAxMS83LzIwMjIgXHUyMDEzIDExLzgvMjAyMlxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tSVNPKCcyMDIyLTExLTA3VDA5OjAwWi8yMDIyLTExLTA4VDA5OjAwWicpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gTm92ZW1iZXIgNyBcdTIwMTMgOCwgMjAyMlxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tSVNPKCcyMDIyLTExLTA3VDA5OjAwWi8yMDIyLTExLTA4VDA5OjAwWicpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCwgeyBsb2NhbGU6ICdmci1GUicgfSk7IC8vPT4gN1x1MjAxMzggbm92ZW1icmUgMjAyMlxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tSVNPKCcyMDIyLTExLTA3VDE3OjAwWi8yMDIyLTExLTA3VDE5OjAwWicpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLlRJTUVfU0lNUExFKTsgLy89PiA2OjAwIFx1MjAxMyA4OjAwIFBNXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMTc6MDBaLzIwMjItMTEtMDdUMTk6MDBaJykudG9Mb2NhbGVTdHJpbmcoeyB3ZWVrZGF5OiAnc2hvcnQnLCBtb250aDogJ3Nob3J0JywgZGF5OiAnMi1kaWdpdCcsIGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7IC8vPT4gTW9uLCBOb3YgMDcsIDY6MDAgXHUyMDEzIDg6MDAgcFxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0xvY2FsZVN0cmluZyhmb3JtYXRPcHRzID0gRm9ybWF0cy5EQVRFX1NIT1JULCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5zLmxvYy5jbG9uZShvcHRzKSwgZm9ybWF0T3B0cykuZm9ybWF0SW50ZXJ2YWwodGhpcylcbiAgICAgIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBJbnRlcnZhbC5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBzYW1lIG9wdGlvbnMgYXMge0BsaW5rIERhdGVUaW1lI3RvSVNPfVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTTyhvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9JU08ob3B0cyl9LyR7dGhpcy5lLnRvSVNPKG9wdHMpfWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGRhdGUgb2YgdGhpcyBJbnRlcnZhbC5cbiAgICogVGhlIHRpbWUgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT0RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9JU09EYXRlKCl9LyR7dGhpcy5lLnRvSVNPRGF0ZSgpfWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRpbWUgb2YgdGhpcyBJbnRlcnZhbC5cbiAgICogVGhlIGRhdGUgY29tcG9uZW50cyBhcmUgaWdub3JlZC5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNUaW1lX2ludGVydmFsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIFRoZSBzYW1lIG9wdGlvbnMgYXMge0BsaW5rIERhdGVUaW1lI3RvSVNPfVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT1RpbWUob3B0cykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYCR7dGhpcy5zLnRvSVNPVGltZShvcHRzKX0vJHt0aGlzLmUudG9JU09UaW1lKG9wdHMpfWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGZvcm1hdHRlZCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBmb3JtYXRcbiAgICogc3RyaW5nLiAqKllvdSBtYXkgbm90IHdhbnQgdGhpcy4qKiBTZWUge0BsaW5rIEludGVydmFsI3RvTG9jYWxlU3RyaW5nfSBmb3IgYSBtb3JlIGZsZXhpYmxlXG4gICAqIGZvcm1hdHRpbmcgdG9vbC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGRhdGVGb3JtYXQgLSBUaGUgZm9ybWF0IHN0cmluZy4gVGhpcyBzdHJpbmcgZm9ybWF0cyB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lLlxuICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI3RvRm9ybWF0fSBmb3IgZGV0YWlscy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuc2VwYXJhdG9yID0gICcgXHUyMDEzICddIC0gQSBzZXBhcmF0b3IgdG8gcGxhY2UgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZFxuICAgKiByZXByZXNlbnRhdGlvbnMuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvRm9ybWF0KGRhdGVGb3JtYXQsIHsgc2VwYXJhdG9yID0gXCIgXHUyMDEzIFwiIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYCR7dGhpcy5zLnRvRm9ybWF0KGRhdGVGb3JtYXQpfSR7c2VwYXJhdG9yfSR7dGhpcy5lLnRvRm9ybWF0KGRhdGVGb3JtYXQpfWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgRHVyYXRpb24gcmVwcmVzZW50aW5nIHRoZSB0aW1lIHNwYW5uZWQgYnkgdGhpcyBpbnRlcnZhbC5cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIGNyZWF0aW9uIG9mIHRoZSBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbigpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogODg0ODkyNTcgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCdkYXlzJykudG9PYmplY3QoKSAvLz0+IHsgZGF5czogMS4wMjQxODEyMTUyNzc3Nzc4IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbihbJ2hvdXJzJywgJ21pbnV0ZXMnXSkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDI0LCBtaW51dGVzOiAzNC44MjA5NSB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oWydob3VycycsICdtaW51dGVzJywgJ3NlY29uZHMnXSkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDI0LCBtaW51dGVzOiAzNCwgc2Vjb25kczogNDkuMjU3IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbignc2Vjb25kcycpLnRvT2JqZWN0KCkgLy89PiB7IHNlY29uZHM6IDg4NDg5LjI1NyB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgdG9EdXJhdGlvbih1bml0LCBvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKHRoaXMuaW52YWxpZFJlYXNvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmUuZGlmZih0aGlzLnMsIHVuaXQsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBtYXBGbiBvbiB0aGUgaW50ZXJ2YWwgc3RhcnQgYW5kIGVuZCwgcmV0dXJuaW5nIGEgbmV3IEludGVydmFsIGZyb20gdGhlIHJlc3VsdGluZyBEYXRlVGltZXNcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWFwRm5cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC50b1VUQygpKVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS5tYXBFbmRwb2ludHMoZW5kcG9pbnQgPT4gZW5kcG9pbnQucGx1cyh7IGhvdXJzOiAyIH0pKVxuICAgKi9cbiAgbWFwRW5kcG9pbnRzKG1hcEZuKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMobWFwRm4odGhpcy5zKSwgbWFwRm4odGhpcy5lKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9pbXBsL2xvY2FsZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVab25lIH0gZnJvbSBcIi4vaW1wbC96b25lVXRpbC5qc1wiO1xuXG5pbXBvcnQgeyBoYXNMb2NhbGVXZWVrSW5mbywgaGFzUmVsYXRpdmUgfSBmcm9tIFwiLi9pbXBsL3V0aWwuanNcIjtcblxuLyoqXG4gKiBUaGUgSW5mbyBjbGFzcyBjb250YWlucyBzdGF0aWMgbWV0aG9kcyBmb3IgcmV0cmlldmluZyBnZW5lcmFsIHRpbWUgYW5kIGRhdGUgcmVsYXRlZCBkYXRhLiBGb3IgZXhhbXBsZSwgaXQgaGFzIG1ldGhvZHMgZm9yIGZpbmRpbmcgb3V0IGlmIGEgdGltZSB6b25lIGhhcyBhIERTVCwgZm9yIGxpc3RpbmcgdGhlIG1vbnRocyBpbiBhbnkgc3VwcG9ydGVkIGxvY2FsZSwgYW5kIGZvciBkaXNjb3ZlcmluZyB3aGljaCBvZiBMdXhvbiBmZWF0dXJlcyBhcmUgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbmZvIHtcbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBjb250YWlucyBhIERTVC5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW3pvbmU9J2xvY2FsJ10gLSBab25lIHRvIGNoZWNrLiBEZWZhdWx0cyB0byB0aGUgZW52aXJvbm1lbnQncyBsb2NhbCB6b25lLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGhhc0RTVCh6b25lID0gU2V0dGluZ3MuZGVmYXVsdFpvbmUpIHtcbiAgICBjb25zdCBwcm90byA9IERhdGVUaW1lLm5vdygpLnNldFpvbmUoem9uZSkuc2V0KHsgbW9udGg6IDEyIH0pO1xuXG4gICAgcmV0dXJuICF6b25lLmlzVW5pdmVyc2FsICYmIHByb3RvLm9mZnNldCAhPT0gcHJvdG8uc2V0KHsgbW9udGg6IDYgfSkub2Zmc2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgem9uZSBpcyBhIHZhbGlkIElBTkEgc3BlY2lmaWVyLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gem9uZSAtIFpvbmUgdG8gY2hlY2tcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1ZhbGlkSUFOQVpvbmUoem9uZSkge1xuICAgIHJldHVybiBJQU5BWm9uZS5pc1ZhbGlkWm9uZSh6b25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgaW5wdXQgaW50byBhIHtAbGluayBab25lfSBpbnN0YW5jZS5cbiAgICpcbiAgICogKiBJZiBgaW5wdXRgIGlzIGFscmVhZHkgYSBab25lIGluc3RhbmNlLCBpdCBpcyByZXR1cm5lZCB1bmNoYW5nZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBhIHN0cmluZyBjb250YWluaW5nIGEgdmFsaWQgdGltZSB6b25lIG5hbWUsIGEgWm9uZSBpbnN0YW5jZVxuICAgKiAgIHdpdGggdGhhdCBuYW1lIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYSBzdHJpbmcgdGhhdCBkb2Vzbid0IHJlZmVyIHRvIGEga25vd24gdGltZSB6b25lLCBhIFpvbmVcbiAgICogICBpbnN0YW5jZSB3aXRoIHtAbGluayBab25lI2lzVmFsaWR9ID09IGZhbHNlIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dCBpcyBhIG51bWJlciwgYSBab25lIGluc3RhbmNlIHdpdGggdGhlIHNwZWNpZmllZCBmaXhlZCBvZmZzZXRcbiAgICogICBpbiBtaW51dGVzIGlzIHJldHVybmVkLlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLCB0aGUgZGVmYXVsdCB6b25lIGlzIHJldHVybmVkLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfG51bWJlcn0gW2lucHV0XSAtIHRoZSB2YWx1ZSB0byBiZSBjb252ZXJ0ZWRcbiAgICogQHJldHVybiB7Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBub3JtYWxpemVab25lKGlucHV0KSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZVpvbmUoaW5wdXQsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWtkYXkgb24gd2hpY2ggdGhlIHdlZWsgc3RhcnRzIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gbG9jYWxlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IHRoZSBzdGFydCBvZiB0aGUgd2VlaywgMSBmb3IgTW9uZGF5IHRocm91Z2ggNyBmb3IgU3VuZGF5XG4gICAqL1xuICBzdGF0aWMgZ2V0U3RhcnRPZldlZWsoeyBsb2NhbGUgPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlKSkuZ2V0U3RhcnRPZldlZWsoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGRheXMgbmVjZXNzYXJ5IGluIGEgd2VlayBiZWZvcmUgaXQgaXMgY29uc2lkZXJlZCBwYXJ0IG9mIHRoZSBuZXh0IHllYXIgYWNjb3JkaW5nXG4gICAqIHRvIHRoZSBnaXZlbiBsb2NhbGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIHN0YXRpYyBnZXRNaW5pbXVtRGF5c0luRmlyc3RXZWVrKHsgbG9jYWxlID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSkpLmdldE1pbkRheXNJbkZpcnN0V2VlaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2Vla2RheXMsIHdoaWNoIGFyZSBjb25zaWRlcmVkIHRoZSB3ZWVrZW5kIGFjY29yZGluZyB0byB0aGUgZ2l2ZW4gbG9jYWxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybnMge251bWJlcltdfSBhbiBhcnJheSBvZiB3ZWVrZGF5cywgMSBmb3IgTW9uZGF5IHRocm91Z2ggNyBmb3IgU3VuZGF5XG4gICAqL1xuICBzdGF0aWMgZ2V0V2Vla2VuZFdlZWtkYXlzKHsgbG9jYWxlID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge30pIHtcbiAgICAvLyBjb3B5IHRoZSBhcnJheSwgYmVjYXVzZSB3ZSBjYWNoZSBpdCBpbnRlcm5hbGx5XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUpKS5nZXRXZWVrZW5kRGF5cygpLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIHN0YW5kYWxvbmUgbW9udGggbmFtZXMuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibnVtZXJpY1wiLCBcIjItZGlnaXRcIiwgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXI9J2dyZWdvcnknXSAtIHRoZSBjYWxlbmRhclxuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygpWzBdIC8vPT4gJ0phbnVhcnknXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdzaG9ydCcpWzBdIC8vPT4gJ0phbidcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ251bWVyaWMnKVswXSAvLz0+ICcxJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9IClbMF0gLy89PiAnamFudi4nXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdudW1lcmljJywgeyBsb2NhbGU6ICdhcicgfSlbMF0gLy89PiAnXHUwNjYxJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbG9uZycsIHsgb3V0cHV0Q2FsZW5kYXI6ICdpc2xhbWljJyB9KVswXSAvLz0+ICdSYWJpXHUwMkJCIEknXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1vbnRocyhcbiAgICBsZW5ndGggPSBcImxvbmdcIixcbiAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwsIG91dHB1dENhbGVuZGFyID0gXCJncmVnb3J5XCIgfSA9IHt9XG4gICkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGZvcm1hdCBtb250aCBuYW1lcy5cbiAgICogRm9ybWF0IG1vbnRocyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIG1vbnRocyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gdGhlIGRheSBvZiB0aGUgbW9udGguIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI21vbnRoc31cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibnVtZXJpY1wiLCBcIjItZGlnaXRcIiwgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXI9J2dyZWdvcnknXSAtIHRoZSBjYWxlbmRhclxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBtb250aHNGb3JtYXQoXG4gICAgbGVuZ3RoID0gXCJsb25nXCIsXG4gICAgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsLCBvdXRwdXRDYWxlbmRhciA9IFwiZ3JlZ29yeVwiIH0gPSB7fVxuICApIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhcikpLm1vbnRocyhsZW5ndGgsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBzdGFuZGFsb25lIHdlZWsgbmFtZXMuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIHdlZWtkYXkgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygpWzBdIC8vPT4gJ01vbmRheSdcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnKVswXSAvLz0+ICdNb24nXG4gICAqIEBleGFtcGxlIEluZm8ud2Vla2RheXMoJ3Nob3J0JywgeyBsb2NhbGU6ICdmci1DQScgfSlbMF0gLy89PiAnbHVuLidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICdcdTA2MjdcdTA2NDRcdTA2MjdcdTA2MkJcdTA2NDZcdTA2NEFcdTA2NDYnXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIHdlZWtkYXlzKGxlbmd0aCA9IFwibG9uZ1wiLCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgbnVsbCkpLndlZWtkYXlzKGxlbmd0aCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGZvcm1hdCB3ZWVrIG5hbWVzLlxuICAgKiBGb3JtYXQgd2Vla2RheXMgZGlmZmVyIGZyb20gc3RhbmRhbG9uZSB3ZWVrZGF5cyBpbiB0aGF0IHRoZXkncmUgbWVhbnQgdG8gYXBwZWFyIG5leHQgdG8gbW9yZSBkYXRlIGluZm9ybWF0aW9uLiBJbiBzb21lIGxhbmd1YWdlcywgdGhhdFxuICAgKiBjaGFuZ2VzIHRoZSBzdHJpbmcuXG4gICAqIFNlZSB7QGxpbmsgSW5mbyN3ZWVrZGF5c31cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J2xvbmcnXSAtIHRoZSBsZW5ndGggb2YgdGhlIG1vbnRoIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwibmFycm93XCIsIFwic2hvcnRcIiwgXCJsb25nXCIuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPW51bGxdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW09bnVsbF0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgd2Vla2RheXNGb3JtYXQoXG4gICAgbGVuZ3RoID0gXCJsb25nXCIsXG4gICAgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoLCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgbWVyaWRpZW1zLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoKSAvLz0+IFsgJ0FNJywgJ1BNJyBdXG4gICAqIEBleGFtcGxlIEluZm8ubWVyaWRpZW1zKHsgbG9jYWxlOiAnbXknIH0pIC8vPT4gWyAnXHUxMDE0XHUxMDM2XHUxMDE0XHUxMDAwXHUxMDNBJywgJ1x1MTAwQVx1MTAxNFx1MTAzMScgXVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBtZXJpZGllbXMoeyBsb2NhbGUgPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSkubWVyaWRpZW1zKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIGVyYXMsIHN1Y2ggYXMgWydCQycsICdBRCddLiBUaGUgbG9jYWxlIGNhbiBiZSBzcGVjaWZpZWQsIGJ1dCB0aGUgY2FsZW5kYXIgc3lzdGVtIGlzIGFsd2F5cyBHcmVnb3JpYW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbbGVuZ3RoPSdzaG9ydCddIC0gdGhlIGxlbmd0aCBvZiB0aGUgZXJhIHJlcHJlc2VudGF0aW9uLCBzdWNoIGFzIFwic2hvcnRcIiBvciBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygpIC8vPT4gWyAnQkMnLCAnQUQnIF1cbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJykgLy89PiBbICdCZWZvcmUgQ2hyaXN0JywgJ0Fubm8gRG9taW5pJyBdXG4gICAqIEBleGFtcGxlIEluZm8uZXJhcygnbG9uZycsIHsgbG9jYWxlOiAnZnInIH0pIC8vPT4gWyAnYXZhbnQgSlx1MDBFOXN1cy1DaHJpc3QnLCAnYXByXHUwMEU4cyBKXHUwMEU5c3VzLUNocmlzdCcgXVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyBlcmFzKGxlbmd0aCA9IFwic2hvcnRcIiwgeyBsb2NhbGUgPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVsbCwgXCJncmVnb3J5XCIpLmVyYXMobGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHNldCBvZiBhdmFpbGFibGUgZmVhdHVyZXMgaW4gdGhpcyBlbnZpcm9ubWVudC5cbiAgICogU29tZSBmZWF0dXJlcyBvZiBMdXhvbiBhcmUgbm90IGF2YWlsYWJsZSBpbiBhbGwgZW52aXJvbm1lbnRzLiBGb3IgZXhhbXBsZSwgb24gb2xkZXIgYnJvd3NlcnMsIHJlbGF0aXZlIHRpbWUgZm9ybWF0dGluZyBzdXBwb3J0IGlzIG5vdCBhdmFpbGFibGUuIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgaWYgdGhhdCdzIHRoZSBjYXNlLlxuICAgKiBLZXlzOlxuICAgKiAqIGByZWxhdGl2ZWA6IHdoZXRoZXIgdGhpcyBlbnZpcm9ubWVudCBzdXBwb3J0cyByZWxhdGl2ZSB0aW1lIGZvcm1hdHRpbmdcbiAgICogKiBgbG9jYWxlV2Vla2A6IHdoZXRoZXIgdGhpcyBlbnZpcm9ubWVudCBzdXBwb3J0cyBkaWZmZXJlbnQgd2Vla2RheXMgZm9yIHRoZSBzdGFydCBvZiB0aGUgd2VlayBiYXNlZCBvbiB0aGUgbG9jYWxlXG4gICAqIEBleGFtcGxlIEluZm8uZmVhdHVyZXMoKSAvLz0+IHsgcmVsYXRpdmU6IGZhbHNlLCBsb2NhbGVXZWVrOiB0cnVlIH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGZlYXR1cmVzKCkge1xuICAgIHJldHVybiB7IHJlbGF0aXZlOiBoYXNSZWxhdGl2ZSgpLCBsb2NhbGVXZWVrOiBoYXNMb2NhbGVXZWVrSW5mbygpIH07XG4gIH1cbn1cbiIsICJpbXBvcnQgRHVyYXRpb24gZnJvbSBcIi4uL2R1cmF0aW9uLmpzXCI7XG5cbmZ1bmN0aW9uIGRheURpZmYoZWFybGllciwgbGF0ZXIpIHtcbiAgY29uc3QgdXRjRGF5U3RhcnQgPSAoZHQpID0+IGR0LnRvVVRDKDAsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KS5zdGFydE9mKFwiZGF5XCIpLnZhbHVlT2YoKSxcbiAgICBtcyA9IHV0Y0RheVN0YXJ0KGxhdGVyKSAtIHV0Y0RheVN0YXJ0KGVhcmxpZXIpO1xuICByZXR1cm4gTWF0aC5mbG9vcihEdXJhdGlvbi5mcm9tTWlsbGlzKG1zKS5hcyhcImRheXNcIikpO1xufVxuXG5mdW5jdGlvbiBoaWdoT3JkZXJEaWZmcyhjdXJzb3IsIGxhdGVyLCB1bml0cykge1xuICBjb25zdCBkaWZmZXJzID0gW1xuICAgIFtcInllYXJzXCIsIChhLCBiKSA9PiBiLnllYXIgLSBhLnllYXJdLFxuICAgIFtcInF1YXJ0ZXJzXCIsIChhLCBiKSA9PiBiLnF1YXJ0ZXIgLSBhLnF1YXJ0ZXIgKyAoYi55ZWFyIC0gYS55ZWFyKSAqIDRdLFxuICAgIFtcIm1vbnRoc1wiLCAoYSwgYikgPT4gYi5tb250aCAtIGEubW9udGggKyAoYi55ZWFyIC0gYS55ZWFyKSAqIDEyXSxcbiAgICBbXG4gICAgICBcIndlZWtzXCIsXG4gICAgICAoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBkYXlzID0gZGF5RGlmZihhLCBiKTtcbiAgICAgICAgcmV0dXJuIChkYXlzIC0gKGRheXMgJSA3KSkgLyA3O1xuICAgICAgfSxcbiAgICBdLFxuICAgIFtcImRheXNcIiwgZGF5RGlmZl0sXG4gIF07XG5cbiAgY29uc3QgcmVzdWx0cyA9IHt9O1xuICBjb25zdCBlYXJsaWVyID0gY3Vyc29yO1xuICBsZXQgbG93ZXN0T3JkZXIsIGhpZ2hXYXRlcjtcblxuICAvKiBUaGlzIGxvb3AgdHJpZXMgdG8gZGlmZiB1c2luZyBsYXJnZXIgdW5pdHMgZmlyc3QuXG4gICAgIElmIHdlIG92ZXJzaG9vdCwgd2UgYmFja3RyYWNrIGFuZCB0cnkgdGhlIG5leHQgc21hbGxlciB1bml0LlxuICAgICBcImN1cnNvclwiIHN0YXJ0cyBvdXQgYXQgdGhlIGVhcmxpZXIgdGltZXN0YW1wIGFuZCBtb3ZlcyBjbG9zZXIgYW5kIGNsb3NlciB0byBcImxhdGVyXCJcbiAgICAgYXMgd2UgdXNlIHNtYWxsZXIgYW5kIHNtYWxsZXIgdW5pdHMuXG4gICAgIGhpZ2hXYXRlciBrZWVwcyB0cmFjayBvZiB3aGVyZSB3ZSB3b3VsZCBiZSBpZiB3ZSBhZGRlZCBvbmUgbW9yZSBvZiB0aGUgc21hbGxlc3QgdW5pdCxcbiAgICAgdGhpcyBpcyB1c2VkIGxhdGVyIHRvIHBvdGVudGlhbGx5IGNvbnZlcnQgYW55IGRpZmZlcmVuY2Ugc21hbGxlciB0aGFuIHRoZSBzbWFsbGVzdCBoaWdoZXIgb3JkZXIgdW5pdFxuICAgICBpbnRvIGEgZnJhY3Rpb24gb2YgdGhhdCBzbWFsbGVzdCBoaWdoZXIgb3JkZXIgdW5pdFxuICAqL1xuICBmb3IgKGNvbnN0IFt1bml0LCBkaWZmZXJdIG9mIGRpZmZlcnMpIHtcbiAgICBpZiAodW5pdHMuaW5kZXhPZih1bml0KSA+PSAwKSB7XG4gICAgICBsb3dlc3RPcmRlciA9IHVuaXQ7XG5cbiAgICAgIHJlc3VsdHNbdW5pdF0gPSBkaWZmZXIoY3Vyc29yLCBsYXRlcik7XG4gICAgICBoaWdoV2F0ZXIgPSBlYXJsaWVyLnBsdXMocmVzdWx0cyk7XG5cbiAgICAgIGlmIChoaWdoV2F0ZXIgPiBsYXRlcikge1xuICAgICAgICAvLyB3ZSBvdmVyc2hvdCB0aGUgZW5kIHBvaW50LCBiYWNrdHJhY2sgY3Vyc29yIGJ5IDFcbiAgICAgICAgcmVzdWx0c1t1bml0XS0tO1xuICAgICAgICBjdXJzb3IgPSBlYXJsaWVyLnBsdXMocmVzdWx0cyk7XG5cbiAgICAgICAgLy8gaWYgd2UgYXJlIHN0aWxsIG92ZXJzaG9vdGluZyBub3csIHdlIG5lZWQgdG8gYmFja3RyYWNrIGFnYWluXG4gICAgICAgIC8vIHRoaXMgaGFwcGVucyBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgd2hlbiBkaWZmaW5nIHRpbWVzIGluIGRpZmZlcmVudCB6b25lcyxcbiAgICAgICAgLy8gYmVjYXVzZSB0aGlzIGNhbGN1bGF0aW9uIGlnbm9yZXMgdGltZSB6b25lc1xuICAgICAgICBpZiAoY3Vyc29yID4gbGF0ZXIpIHtcbiAgICAgICAgICAvLyBrZWVwIHRoZSBcIm92ZXJzaG90IGJ5IDFcIiBhcm91bmQgYXMgaGlnaFdhdGVyXG4gICAgICAgICAgaGlnaFdhdGVyID0gY3Vyc29yO1xuICAgICAgICAgIC8vIGJhY2t0cmFjayBjdXJzb3IgYnkgMVxuICAgICAgICAgIHJlc3VsdHNbdW5pdF0tLTtcbiAgICAgICAgICBjdXJzb3IgPSBlYXJsaWVyLnBsdXMocmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnNvciA9IGhpZ2hXYXRlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChlYXJsaWVyLCBsYXRlciwgdW5pdHMsIG9wdHMpIHtcbiAgbGV0IFtjdXJzb3IsIHJlc3VsdHMsIGhpZ2hXYXRlciwgbG93ZXN0T3JkZXJdID0gaGlnaE9yZGVyRGlmZnMoZWFybGllciwgbGF0ZXIsIHVuaXRzKTtcblxuICBjb25zdCByZW1haW5pbmdNaWxsaXMgPSBsYXRlciAtIGN1cnNvcjtcblxuICBjb25zdCBsb3dlck9yZGVyVW5pdHMgPSB1bml0cy5maWx0ZXIoXG4gICAgKHUpID0+IFtcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIiwgXCJtaWxsaXNlY29uZHNcIl0uaW5kZXhPZih1KSA+PSAwXG4gICk7XG5cbiAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaGlnaFdhdGVyIDwgbGF0ZXIpIHtcbiAgICAgIGhpZ2hXYXRlciA9IGN1cnNvci5wbHVzKHsgW2xvd2VzdE9yZGVyXTogMSB9KTtcbiAgICB9XG5cbiAgICBpZiAoaGlnaFdhdGVyICE9PSBjdXJzb3IpIHtcbiAgICAgIHJlc3VsdHNbbG93ZXN0T3JkZXJdID0gKHJlc3VsdHNbbG93ZXN0T3JkZXJdIHx8IDApICsgcmVtYWluaW5nTWlsbGlzIC8gKGhpZ2hXYXRlciAtIGN1cnNvcik7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgZHVyYXRpb24gPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHJlc3VsdHMsIG9wdHMpO1xuXG4gIGlmIChsb3dlck9yZGVyVW5pdHMubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKHJlbWFpbmluZ01pbGxpcywgb3B0cylcbiAgICAgIC5zaGlmdFRvKC4uLmxvd2VyT3JkZXJVbml0cylcbiAgICAgIC5wbHVzKGR1cmF0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZHVyYXRpb247XG4gIH1cbn1cbiIsICJjb25zdCBudW1iZXJpbmdTeXN0ZW1zID0ge1xuICBhcmFiOiBcIltcXHUwNjYwLVxcdTA2NjldXCIsXG4gIGFyYWJleHQ6IFwiW1xcdTA2RjAtXFx1MDZGOV1cIixcbiAgYmFsaTogXCJbXFx1MUI1MC1cXHUxQjU5XVwiLFxuICBiZW5nOiBcIltcXHUwOUU2LVxcdTA5RUZdXCIsXG4gIGRldmE6IFwiW1xcdTA5NjYtXFx1MDk2Rl1cIixcbiAgZnVsbHdpZGU6IFwiW1xcdUZGMTAtXFx1RkYxOV1cIixcbiAgZ3VqcjogXCJbXFx1MEFFNi1cXHUwQUVGXVwiLFxuICBoYW5pZGVjOiBcIltcdTMwMDd8XHU0RTAwfFx1NEU4Q3xcdTRFMDl8XHU1NkRCfFx1NEU5NHxcdTUxNkR8XHU0RTAzfFx1NTE2QnxcdTRFNURdXCIsXG4gIGtobXI6IFwiW1xcdTE3RTAtXFx1MTdFOV1cIixcbiAga25kYTogXCJbXFx1MENFNi1cXHUwQ0VGXVwiLFxuICBsYW9vOiBcIltcXHUwRUQwLVxcdTBFRDldXCIsXG4gIGxpbWI6IFwiW1xcdTE5NDYtXFx1MTk0Rl1cIixcbiAgbWx5bTogXCJbXFx1MEQ2Ni1cXHUwRDZGXVwiLFxuICBtb25nOiBcIltcXHUxODEwLVxcdTE4MTldXCIsXG4gIG15bXI6IFwiW1xcdTEwNDAtXFx1MTA0OV1cIixcbiAgb3J5YTogXCJbXFx1MEI2Ni1cXHUwQjZGXVwiLFxuICB0YW1sZGVjOiBcIltcXHUwQkU2LVxcdTBCRUZdXCIsXG4gIHRlbHU6IFwiW1xcdTBDNjYtXFx1MEM2Rl1cIixcbiAgdGhhaTogXCJbXFx1MEU1MC1cXHUwRTU5XVwiLFxuICB0aWJ0OiBcIltcXHUwRjIwLVxcdTBGMjldXCIsXG4gIGxhdG46IFwiXFxcXGRcIixcbn07XG5cbmNvbnN0IG51bWJlcmluZ1N5c3RlbXNVVEYxNiA9IHtcbiAgYXJhYjogWzE2MzIsIDE2NDFdLFxuICBhcmFiZXh0OiBbMTc3NiwgMTc4NV0sXG4gIGJhbGk6IFs2OTkyLCA3MDAxXSxcbiAgYmVuZzogWzI1MzQsIDI1NDNdLFxuICBkZXZhOiBbMjQwNiwgMjQxNV0sXG4gIGZ1bGx3aWRlOiBbNjUyOTYsIDY1MzAzXSxcbiAgZ3VqcjogWzI3OTAsIDI3OTldLFxuICBraG1yOiBbNjExMiwgNjEyMV0sXG4gIGtuZGE6IFszMzAyLCAzMzExXSxcbiAgbGFvbzogWzM3OTIsIDM4MDFdLFxuICBsaW1iOiBbNjQ3MCwgNjQ3OV0sXG4gIG1seW06IFszNDMwLCAzNDM5XSxcbiAgbW9uZzogWzYxNjAsIDYxNjldLFxuICBteW1yOiBbNDE2MCwgNDE2OV0sXG4gIG9yeWE6IFsyOTE4LCAyOTI3XSxcbiAgdGFtbGRlYzogWzMwNDYsIDMwNTVdLFxuICB0ZWx1OiBbMzE3NCwgMzE4M10sXG4gIHRoYWk6IFszNjY0LCAzNjczXSxcbiAgdGlidDogWzM4NzIsIDM4ODFdLFxufTtcblxuY29uc3QgaGFuaWRlY0NoYXJzID0gbnVtYmVyaW5nU3lzdGVtcy5oYW5pZGVjLnJlcGxhY2UoL1tcXFt8XFxdXS9nLCBcIlwiKS5zcGxpdChcIlwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGlnaXRzKHN0cikge1xuICBsZXQgdmFsdWUgPSBwYXJzZUludChzdHIsIDEwKTtcbiAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgIHZhbHVlID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICBpZiAoc3RyW2ldLnNlYXJjaChudW1iZXJpbmdTeXN0ZW1zLmhhbmlkZWMpICE9PSAtMSkge1xuICAgICAgICB2YWx1ZSArPSBoYW5pZGVjQ2hhcnMuaW5kZXhPZihzdHJbaV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbnVtYmVyaW5nU3lzdGVtc1VURjE2KSB7XG4gICAgICAgICAgY29uc3QgW21pbiwgbWF4XSA9IG51bWJlcmluZ1N5c3RlbXNVVEYxNltrZXldO1xuICAgICAgICAgIGlmIChjb2RlID49IG1pbiAmJiBjb2RlIDw9IG1heCkge1xuICAgICAgICAgICAgdmFsdWUgKz0gY29kZSAtIG1pbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWdpdFJlZ2V4KHsgbnVtYmVyaW5nU3lzdGVtIH0sIGFwcGVuZCA9IFwiXCIpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7bnVtYmVyaW5nU3lzdGVtc1tudW1iZXJpbmdTeXN0ZW0gfHwgXCJsYXRuXCJdfSR7YXBwZW5kfWApO1xufVxuIiwgImltcG9ydCB7IHBhcnNlTWlsbGlzLCBpc1VuZGVmaW5lZCwgdW50cnVuY2F0ZVllYXIsIHNpZ25lZE9mZnNldCwgaGFzT3duUHJvcGVydHkgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgRm9ybWF0dGVyIGZyb20gXCIuL2Zvcm1hdHRlci5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4uL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4uL2RhdGV0aW1lLmpzXCI7XG5pbXBvcnQgeyBkaWdpdFJlZ2V4LCBwYXJzZURpZ2l0cyB9IGZyb20gXCIuL2RpZ2l0cy5qc1wiO1xuaW1wb3J0IHsgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5cbmNvbnN0IE1JU1NJTkdfRlRQID0gXCJtaXNzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXQuZm9ybWF0VG9QYXJ0cyBzdXBwb3J0XCI7XG5cbmZ1bmN0aW9uIGludFVuaXQocmVnZXgsIHBvc3QgPSAoaSkgPT4gaSkge1xuICByZXR1cm4geyByZWdleCwgZGVzZXI6IChbc10pID0+IHBvc3QocGFyc2VEaWdpdHMocykpIH07XG59XG5cbmNvbnN0IE5CU1AgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG5jb25zdCBzcGFjZU9yTkJTUCA9IGBbICR7TkJTUH1dYDtcbmNvbnN0IHNwYWNlT3JOQlNQUmVnRXhwID0gbmV3IFJlZ0V4cChzcGFjZU9yTkJTUCwgXCJnXCIpO1xuXG5mdW5jdGlvbiBmaXhMaXN0UmVnZXgocykge1xuICAvLyBtYWtlIGRvdHMgb3B0aW9uYWwgYW5kIGFsc28gbWFrZSB0aGVtIGxpdGVyYWxcbiAgLy8gbWFrZSBzcGFjZSBhbmQgbm9uIGJyZWFrYWJsZSBzcGFjZSBjaGFyYWN0ZXJzIGludGVyY2hhbmdlYWJsZVxuICByZXR1cm4gcy5yZXBsYWNlKC9cXC4vZywgXCJcXFxcLj9cIikucmVwbGFjZShzcGFjZU9yTkJTUFJlZ0V4cCwgc3BhY2VPck5CU1ApO1xufVxuXG5mdW5jdGlvbiBzdHJpcEluc2Vuc2l0aXZpdGllcyhzKSB7XG4gIHJldHVybiBzXG4gICAgLnJlcGxhY2UoL1xcLi9nLCBcIlwiKSAvLyBpZ25vcmUgZG90cyB0aGF0IHdlcmUgbWFkZSBvcHRpb25hbFxuICAgIC5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBcIiBcIikgLy8gaW50ZXJjaGFuZ2Ugc3BhY2UgYW5kIG5ic3BcbiAgICAudG9Mb3dlckNhc2UoKTtcbn1cblxuZnVuY3Rpb24gb25lT2Yoc3RyaW5ncywgc3RhcnRJbmRleCkge1xuICBpZiAoc3RyaW5ncyA9PT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7XG4gICAgICByZWdleDogUmVnRXhwKHN0cmluZ3MubWFwKGZpeExpc3RSZWdleCkuam9pbihcInxcIikpLFxuICAgICAgZGVzZXI6IChbc10pID0+XG4gICAgICAgIHN0cmluZ3MuZmluZEluZGV4KChpKSA9PiBzdHJpcEluc2Vuc2l0aXZpdGllcyhzKSA9PT0gc3RyaXBJbnNlbnNpdGl2aXRpZXMoaSkpICsgc3RhcnRJbmRleCxcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIG9mZnNldChyZWdleCwgZ3JvdXBzKSB7XG4gIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFssIGgsIG1dKSA9PiBzaWduZWRPZmZzZXQoaCwgbSksIGdyb3VwcyB9O1xufVxuXG5mdW5jdGlvbiBzaW1wbGUocmVnZXgpIHtcbiAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoW3NdKSA9PiBzIH07XG59XG5cbmZ1bmN0aW9uIGVzY2FwZVRva2VuKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9bXFwtXFxbXFxde30oKSorPy4sXFxcXFxcXiR8I1xcc10vZywgXCJcXFxcJCZcIik7XG59XG5cbi8qKlxuICogQHBhcmFtIHRva2VuXG4gKiBAcGFyYW0ge0xvY2FsZX0gbG9jXG4gKi9cbmZ1bmN0aW9uIHVuaXRGb3JUb2tlbih0b2tlbiwgbG9jKSB7XG4gIGNvbnN0IG9uZSA9IGRpZ2l0UmVnZXgobG9jKSxcbiAgICB0d28gPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Mn1cIiksXG4gICAgdGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7M31cIiksXG4gICAgZm91ciA9IGRpZ2l0UmVnZXgobG9jLCBcIns0fVwiKSxcbiAgICBzaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Nn1cIiksXG4gICAgb25lT3JUd28gPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSwyfVwiKSxcbiAgICBvbmVUb1RocmVlID0gZGlnaXRSZWdleChsb2MsIFwiezEsM31cIiksXG4gICAgb25lVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSw2fVwiKSxcbiAgICBvbmVUb05pbmUgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSw5fVwiKSxcbiAgICB0d29Ub0ZvdXIgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7Miw0fVwiKSxcbiAgICBmb3VyVG9TaXggPSBkaWdpdFJlZ2V4KGxvYywgXCJ7NCw2fVwiKSxcbiAgICBsaXRlcmFsID0gKHQpID0+ICh7IHJlZ2V4OiBSZWdFeHAoZXNjYXBlVG9rZW4odC52YWwpKSwgZGVzZXI6IChbc10pID0+IHMsIGxpdGVyYWw6IHRydWUgfSksXG4gICAgdW5pdGF0ZSA9ICh0KSA9PiB7XG4gICAgICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgICAgICByZXR1cm4gbGl0ZXJhbCh0KTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAodC52YWwpIHtcbiAgICAgICAgLy8gZXJhXG4gICAgICAgIGNhc2UgXCJHXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5lcmFzKFwic2hvcnRcIiksIDApO1xuICAgICAgICBjYXNlIFwiR0dcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLmVyYXMoXCJsb25nXCIpLCAwKTtcbiAgICAgICAgLy8geWVhcnNcbiAgICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1NpeCk7XG4gICAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3b1RvRm91ciwgdW50cnVuY2F0ZVllYXIpO1xuICAgICAgICBjYXNlIFwieXl5eVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXIpO1xuICAgICAgICBjYXNlIFwieXl5eXlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyVG9TaXgpO1xuICAgICAgICBjYXNlIFwieXl5eXl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQoc2l4KTtcbiAgICAgICAgLy8gbW9udGhzXG4gICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiTU1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiTU1NXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJzaG9ydFwiLCB0cnVlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJNTU1NXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJsb25nXCIsIHRydWUpLCAxKTtcbiAgICAgICAgY2FzZSBcIkxcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJMTFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJMTExcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcInNob3J0XCIsIGZhbHNlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJMTExMXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy5tb250aHMoXCJsb25nXCIsIGZhbHNlKSwgMSk7XG4gICAgICAgIC8vIGRhdGVzXG4gICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiZGRcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICAvLyBvcmRpbmFsc1xuICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuICAgICAgICBjYXNlIFwib29vXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpO1xuICAgICAgICAvLyB0aW1lXG4gICAgICAgIGNhc2UgXCJISFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiaGhcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiaFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcIm1tXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJxXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwicXFcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcInNzXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVUb1RocmVlKTtcbiAgICAgICAgY2FzZSBcIlNTU1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHRocmVlKTtcbiAgICAgICAgY2FzZSBcInVcIjpcbiAgICAgICAgICByZXR1cm4gc2ltcGxlKG9uZVRvTmluZSk7XG4gICAgICAgIGNhc2UgXCJ1dVwiOlxuICAgICAgICAgIHJldHVybiBzaW1wbGUob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwidXV1XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lKTtcbiAgICAgICAgLy8gbWVyaWRpZW1cbiAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1lcmlkaWVtcygpLCAwKTtcbiAgICAgICAgLy8gd2Vla1llYXIgKGspXG4gICAgICAgIGNhc2UgXCJra2trXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG4gICAgICAgIGNhc2UgXCJra1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3b1RvRm91ciwgdW50cnVuY2F0ZVllYXIpO1xuICAgICAgICAvLyB3ZWVrTnVtYmVyIChXKVxuICAgICAgICBjYXNlIFwiV1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcIldXXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgLy8gd2Vla2RheXNcbiAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpO1xuICAgICAgICBjYXNlIFwiRUVFXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcInNob3J0XCIsIGZhbHNlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJFRUVFXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcImxvbmdcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgY2FzZSBcImNjY1wiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2Mud2Vla2RheXMoXCJzaG9ydFwiLCB0cnVlKSwgMSk7XG4gICAgICAgIGNhc2UgXCJjY2NjXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcImxvbmdcIiwgdHJ1ZSksIDEpO1xuICAgICAgICAvLyBvZmZzZXQvem9uZVxuICAgICAgICBjYXNlIFwiWlwiOlxuICAgICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgICByZXR1cm4gb2Zmc2V0KG5ldyBSZWdFeHAoYChbKy1dJHtvbmVPclR3by5zb3VyY2V9KSg/OjooJHt0d28uc291cmNlfSkpP2ApLCAyKTtcbiAgICAgICAgY2FzZSBcIlpaWlwiOlxuICAgICAgICAgIHJldHVybiBvZmZzZXQobmV3IFJlZ0V4cChgKFsrLV0ke29uZU9yVHdvLnNvdXJjZX0pKCR7dHdvLnNvdXJjZX0pP2ApLCAyKTtcbiAgICAgICAgLy8gd2UgZG9uJ3Qgc3VwcG9ydCBaWlpaIChQU1QpIG9yIFpaWlpaIChQYWNpZmljIFN0YW5kYXJkIFRpbWUpIGluIHBhcnNpbmdcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFueSB3YXkgdG8gZmlndXJlIG91dCB3aGF0IHRoZXkgYXJlXG4gICAgICAgIGNhc2UgXCJ6XCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZSgvW2Etel8rLS9dezEsMjU2fT8vaSk7XG4gICAgICAgIC8vIHRoaXMgc3BlY2lhbC1jYXNlIFwidG9rZW5cIiByZXByZXNlbnRzIGEgcGxhY2Ugd2hlcmUgYSBtYWNyby10b2tlbiBleHBhbmRlZCBpbnRvIGEgd2hpdGUtc3BhY2UgbGl0ZXJhbFxuICAgICAgICAvLyBpbiB0aGlzIGNhc2Ugd2UgYWNjZXB0IGFueSBub24tbmV3bGluZSB3aGl0ZS1zcGFjZVxuICAgICAgICBjYXNlIFwiIFwiOlxuICAgICAgICAgIHJldHVybiBzaW1wbGUoL1teXFxTXFxuXFxyXS8pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBsaXRlcmFsKHQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgY29uc3QgdW5pdCA9IHVuaXRhdGUodG9rZW4pIHx8IHtcbiAgICBpbnZhbGlkUmVhc29uOiBNSVNTSU5HX0ZUUCxcbiAgfTtcblxuICB1bml0LnRva2VuID0gdG9rZW47XG5cbiAgcmV0dXJuIHVuaXQ7XG59XG5cbmNvbnN0IHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsID0ge1xuICB5ZWFyOiB7XG4gICAgXCIyLWRpZ2l0XCI6IFwieXlcIixcbiAgICBudW1lcmljOiBcInl5eXl5XCIsXG4gIH0sXG4gIG1vbnRoOiB7XG4gICAgbnVtZXJpYzogXCJNXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwiTU1cIixcbiAgICBzaG9ydDogXCJNTU1cIixcbiAgICBsb25nOiBcIk1NTU1cIixcbiAgfSxcbiAgZGF5OiB7XG4gICAgbnVtZXJpYzogXCJkXCIsXG4gICAgXCIyLWRpZ2l0XCI6IFwiZGRcIixcbiAgfSxcbiAgd2Vla2RheToge1xuICAgIHNob3J0OiBcIkVFRVwiLFxuICAgIGxvbmc6IFwiRUVFRVwiLFxuICB9LFxuICBkYXlwZXJpb2Q6IFwiYVwiLFxuICBkYXlQZXJpb2Q6IFwiYVwiLFxuICBob3VyMTI6IHtcbiAgICBudW1lcmljOiBcImhcIixcbiAgICBcIjItZGlnaXRcIjogXCJoaFwiLFxuICB9LFxuICBob3VyMjQ6IHtcbiAgICBudW1lcmljOiBcIkhcIixcbiAgICBcIjItZGlnaXRcIjogXCJISFwiLFxuICB9LFxuICBtaW51dGU6IHtcbiAgICBudW1lcmljOiBcIm1cIixcbiAgICBcIjItZGlnaXRcIjogXCJtbVwiLFxuICB9LFxuICBzZWNvbmQ6IHtcbiAgICBudW1lcmljOiBcInNcIixcbiAgICBcIjItZGlnaXRcIjogXCJzc1wiLFxuICB9LFxuICB0aW1lWm9uZU5hbWU6IHtcbiAgICBsb25nOiBcIlpaWlpaXCIsXG4gICAgc2hvcnQ6IFwiWlpaXCIsXG4gIH0sXG59O1xuXG5mdW5jdGlvbiB0b2tlbkZvclBhcnQocGFydCwgZm9ybWF0T3B0cywgcmVzb2x2ZWRPcHRzKSB7XG4gIGNvbnN0IHsgdHlwZSwgdmFsdWUgfSA9IHBhcnQ7XG5cbiAgaWYgKHR5cGUgPT09IFwibGl0ZXJhbFwiKSB7XG4gICAgY29uc3QgaXNTcGFjZSA9IC9eXFxzKyQvLnRlc3QodmFsdWUpO1xuICAgIHJldHVybiB7XG4gICAgICBsaXRlcmFsOiAhaXNTcGFjZSxcbiAgICAgIHZhbDogaXNTcGFjZSA/IFwiIFwiIDogdmFsdWUsXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHN0eWxlID0gZm9ybWF0T3B0c1t0eXBlXTtcblxuICAvLyBUaGUgdXNlciBtaWdodCBoYXZlIGV4cGxpY2l0bHkgc3BlY2lmaWVkIGhvdXIxMiBvciBob3VyQ3ljbGVcbiAgLy8gaWYgc28sIHJlc3BlY3QgdGhlaXIgZGVjaXNpb25cbiAgLy8gaWYgbm90LCByZWZlciBiYWNrIHRvIHRoZSByZXNvbHZlZE9wdHMsIHdoaWNoIGFyZSBiYXNlZCBvbiB0aGUgbG9jYWxlXG4gIGxldCBhY3R1YWxUeXBlID0gdHlwZTtcbiAgaWYgKHR5cGUgPT09IFwiaG91clwiKSB7XG4gICAgaWYgKGZvcm1hdE9wdHMuaG91cjEyICE9IG51bGwpIHtcbiAgICAgIGFjdHVhbFR5cGUgPSBmb3JtYXRPcHRzLmhvdXIxMiA/IFwiaG91cjEyXCIgOiBcImhvdXIyNFwiO1xuICAgIH0gZWxzZSBpZiAoZm9ybWF0T3B0cy5ob3VyQ3ljbGUgIT0gbnVsbCkge1xuICAgICAgaWYgKGZvcm1hdE9wdHMuaG91ckN5Y2xlID09PSBcImgxMVwiIHx8IGZvcm1hdE9wdHMuaG91ckN5Y2xlID09PSBcImgxMlwiKSB7XG4gICAgICAgIGFjdHVhbFR5cGUgPSBcImhvdXIxMlwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0dWFsVHlwZSA9IFwiaG91cjI0XCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRva2VucyBvbmx5IGRpZmZlcmVudGlhdGUgYmV0d2VlbiAyNCBob3VycyBvciBub3QsXG4gICAgICAvLyBzbyB3ZSBkbyBub3QgbmVlZCB0byBjaGVjayBob3VyQ3ljbGUgaGVyZSwgd2hpY2ggaXMgbGVzcyBzdXBwb3J0ZWQgYW55d2F5c1xuICAgICAgYWN0dWFsVHlwZSA9IHJlc29sdmVkT3B0cy5ob3VyMTIgPyBcImhvdXIxMlwiIDogXCJob3VyMjRcIjtcbiAgICB9XG4gIH1cbiAgbGV0IHZhbCA9IHBhcnRUeXBlU3R5bGVUb1Rva2VuVmFsW2FjdHVhbFR5cGVdO1xuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIHZhbCA9IHZhbFtzdHlsZV07XG4gIH1cblxuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpdGVyYWw6IGZhbHNlLFxuICAgICAgdmFsLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBidWlsZFJlZ2V4KHVuaXRzKSB7XG4gIGNvbnN0IHJlID0gdW5pdHMubWFwKCh1KSA9PiB1LnJlZ2V4KS5yZWR1Y2UoKGYsIHIpID0+IGAke2Z9KCR7ci5zb3VyY2V9KWAsIFwiXCIpO1xuICByZXR1cm4gW2BeJHtyZX0kYCwgdW5pdHNdO1xufVxuXG5mdW5jdGlvbiBtYXRjaChpbnB1dCwgcmVnZXgsIGhhbmRsZXJzKSB7XG4gIGNvbnN0IG1hdGNoZXMgPSBpbnB1dC5tYXRjaChyZWdleCk7XG5cbiAgaWYgKG1hdGNoZXMpIHtcbiAgICBjb25zdCBhbGwgPSB7fTtcbiAgICBsZXQgbWF0Y2hJbmRleCA9IDE7XG4gICAgZm9yIChjb25zdCBpIGluIGhhbmRsZXJzKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkoaGFuZGxlcnMsIGkpKSB7XG4gICAgICAgIGNvbnN0IGggPSBoYW5kbGVyc1tpXSxcbiAgICAgICAgICBncm91cHMgPSBoLmdyb3VwcyA/IGguZ3JvdXBzICsgMSA6IDE7XG4gICAgICAgIGlmICghaC5saXRlcmFsICYmIGgudG9rZW4pIHtcbiAgICAgICAgICBhbGxbaC50b2tlbi52YWxbMF1dID0gaC5kZXNlcihtYXRjaGVzLnNsaWNlKG1hdGNoSW5kZXgsIG1hdGNoSW5kZXggKyBncm91cHMpKTtcbiAgICAgICAgfVxuICAgICAgICBtYXRjaEluZGV4ICs9IGdyb3VwcztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFttYXRjaGVzLCBhbGxdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbbWF0Y2hlcywge31dO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRhdGVUaW1lRnJvbU1hdGNoZXMobWF0Y2hlcykge1xuICBjb25zdCB0b0ZpZWxkID0gKHRva2VuKSA9PiB7XG4gICAgc3dpdGNoICh0b2tlbikge1xuICAgICAgY2FzZSBcIlNcIjpcbiAgICAgICAgcmV0dXJuIFwibWlsbGlzZWNvbmRcIjtcbiAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgIHJldHVybiBcInNlY29uZFwiO1xuICAgICAgY2FzZSBcIm1cIjpcbiAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG4gICAgICBjYXNlIFwiaFwiOlxuICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgcmV0dXJuIFwiaG91clwiO1xuICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgcmV0dXJuIFwiZGF5XCI7XG4gICAgICBjYXNlIFwib1wiOlxuICAgICAgICByZXR1cm4gXCJvcmRpbmFsXCI7XG4gICAgICBjYXNlIFwiTFwiOlxuICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgcmV0dXJuIFwibW9udGhcIjtcbiAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgIHJldHVybiBcInllYXJcIjtcbiAgICAgIGNhc2UgXCJFXCI6XG4gICAgICBjYXNlIFwiY1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrZGF5XCI7XG4gICAgICBjYXNlIFwiV1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrTnVtYmVyXCI7XG4gICAgICBjYXNlIFwia1wiOlxuICAgICAgICByZXR1cm4gXCJ3ZWVrWWVhclwiO1xuICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgcmV0dXJuIFwicXVhcnRlclwiO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9O1xuXG4gIGxldCB6b25lID0gbnVsbDtcbiAgbGV0IHNwZWNpZmljT2Zmc2V0O1xuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMueikpIHtcbiAgICB6b25lID0gSUFOQVpvbmUuY3JlYXRlKG1hdGNoZXMueik7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuWikpIHtcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHpvbmUgPSBuZXcgRml4ZWRPZmZzZXRab25lKG1hdGNoZXMuWik7XG4gICAgfVxuICAgIHNwZWNpZmljT2Zmc2V0ID0gbWF0Y2hlcy5aO1xuICB9XG5cbiAgaWYgKCFpc1VuZGVmaW5lZChtYXRjaGVzLnEpKSB7XG4gICAgbWF0Y2hlcy5NID0gKG1hdGNoZXMucSAtIDEpICogMyArIDE7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMuaCkpIHtcbiAgICBpZiAobWF0Y2hlcy5oIDwgMTIgJiYgbWF0Y2hlcy5hID09PSAxKSB7XG4gICAgICBtYXRjaGVzLmggKz0gMTI7XG4gICAgfSBlbHNlIGlmIChtYXRjaGVzLmggPT09IDEyICYmIG1hdGNoZXMuYSA9PT0gMCkge1xuICAgICAgbWF0Y2hlcy5oID0gMDtcbiAgICB9XG4gIH1cblxuICBpZiAobWF0Y2hlcy5HID09PSAwICYmIG1hdGNoZXMueSkge1xuICAgIG1hdGNoZXMueSA9IC1tYXRjaGVzLnk7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMudSkpIHtcbiAgICBtYXRjaGVzLlMgPSBwYXJzZU1pbGxpcyhtYXRjaGVzLnUpO1xuICB9XG5cbiAgY29uc3QgdmFscyA9IE9iamVjdC5rZXlzKG1hdGNoZXMpLnJlZHVjZSgociwgaykgPT4ge1xuICAgIGNvbnN0IGYgPSB0b0ZpZWxkKGspO1xuICAgIGlmIChmKSB7XG4gICAgICByW2ZdID0gbWF0Y2hlc1trXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfSwge30pO1xuXG4gIHJldHVybiBbdmFscywgem9uZSwgc3BlY2lmaWNPZmZzZXRdO1xufVxuXG5sZXQgZHVtbXlEYXRlVGltZUNhY2hlID0gbnVsbDtcblxuZnVuY3Rpb24gZ2V0RHVtbXlEYXRlVGltZSgpIHtcbiAgaWYgKCFkdW1teURhdGVUaW1lQ2FjaGUpIHtcbiAgICBkdW1teURhdGVUaW1lQ2FjaGUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKDE1NTU1NTU1NTU1NTUpO1xuICB9XG5cbiAgcmV0dXJuIGR1bW15RGF0ZVRpbWVDYWNoZTtcbn1cblxuZnVuY3Rpb24gbWF5YmVFeHBhbmRNYWNyb1Rva2VuKHRva2VuLCBsb2NhbGUpIHtcbiAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICBjb25zdCBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4udmFsKTtcbiAgY29uc3QgdG9rZW5zID0gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSk7XG5cbiAgaWYgKHRva2VucyA9PSBudWxsIHx8IHRva2Vucy5pbmNsdWRlcyh1bmRlZmluZWQpKSB7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG5cbiAgcmV0dXJuIHRva2Vucztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZE1hY3JvVG9rZW5zKHRva2VucywgbG9jYWxlKSB7XG4gIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLnRva2Vucy5tYXAoKHQpID0+IG1heWJlRXhwYW5kTWFjcm9Ub2tlbih0LCBsb2NhbGUpKSk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSB7XG4gIGNvbnN0IHRva2VucyA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmb3JtYXQpLCBsb2NhbGUpLFxuICAgIHVuaXRzID0gdG9rZW5zLm1hcCgodCkgPT4gdW5pdEZvclRva2VuKHQsIGxvY2FsZSkpLFxuICAgIGRpc3F1YWxpZnlpbmdVbml0ID0gdW5pdHMuZmluZCgodCkgPT4gdC5pbnZhbGlkUmVhc29uKTtcblxuICBpZiAoZGlzcXVhbGlmeWluZ1VuaXQpIHtcbiAgICByZXR1cm4geyBpbnB1dCwgdG9rZW5zLCBpbnZhbGlkUmVhc29uOiBkaXNxdWFsaWZ5aW5nVW5pdC5pbnZhbGlkUmVhc29uIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgW3JlZ2V4U3RyaW5nLCBoYW5kbGVyc10gPSBidWlsZFJlZ2V4KHVuaXRzKSxcbiAgICAgIHJlZ2V4ID0gUmVnRXhwKHJlZ2V4U3RyaW5nLCBcImlcIiksXG4gICAgICBbcmF3TWF0Y2hlcywgbWF0Y2hlc10gPSBtYXRjaChpbnB1dCwgcmVnZXgsIGhhbmRsZXJzKSxcbiAgICAgIFtyZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0XSA9IG1hdGNoZXNcbiAgICAgICAgPyBkYXRlVGltZUZyb21NYXRjaGVzKG1hdGNoZXMpXG4gICAgICAgIDogW251bGwsIG51bGwsIHVuZGVmaW5lZF07XG4gICAgaWYgKGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiYVwiKSAmJiBoYXNPd25Qcm9wZXJ0eShtYXRjaGVzLCBcIkhcIikpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcbiAgICAgICAgXCJDYW4ndCBpbmNsdWRlIG1lcmlkaWVtIHdoZW4gc3BlY2lmeWluZyAyNC1ob3VyIGZvcm1hdFwiXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4geyBpbnB1dCwgdG9rZW5zLCByZWdleCwgcmF3TWF0Y2hlcywgbWF0Y2hlcywgcmVzdWx0LCB6b25lLCBzcGVjaWZpY09mZnNldCB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KSB7XG4gIGNvbnN0IHsgcmVzdWx0LCB6b25lLCBzcGVjaWZpY09mZnNldCwgaW52YWxpZFJlYXNvbiB9ID0gZXhwbGFpbkZyb21Ub2tlbnMobG9jYWxlLCBpbnB1dCwgZm9ybWF0KTtcbiAgcmV0dXJuIFtyZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkUmVhc29uXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdE9wdHNUb1Rva2Vucyhmb3JtYXRPcHRzLCBsb2NhbGUpIHtcbiAgaWYgKCFmb3JtYXRPcHRzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBmb3JtYXR0ZXIgPSBGb3JtYXR0ZXIuY3JlYXRlKGxvY2FsZSwgZm9ybWF0T3B0cyk7XG4gIGNvbnN0IGRmID0gZm9ybWF0dGVyLmR0Rm9ybWF0dGVyKGdldER1bW15RGF0ZVRpbWUoKSk7XG4gIGNvbnN0IHBhcnRzID0gZGYuZm9ybWF0VG9QYXJ0cygpO1xuICBjb25zdCByZXNvbHZlZE9wdHMgPSBkZi5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgcmV0dXJuIHBhcnRzLm1hcCgocCkgPT4gdG9rZW5Gb3JQYXJ0KHAsIGZvcm1hdE9wdHMsIHJlc29sdmVkT3B0cykpO1xufVxuIiwgImltcG9ydCBEdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IEludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCBJbmZvIGZyb20gXCIuL2luZm8uanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vaW1wbC9mb3JtYXR0ZXIuanNcIjtcbmltcG9ydCBGaXhlZE9mZnNldFpvbmUgZnJvbSBcIi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5pbXBvcnQge1xuICBpc1VuZGVmaW5lZCxcbiAgbWF5YmVBcnJheSxcbiAgaXNEYXRlLFxuICBpc051bWJlcixcbiAgYmVzdEJ5LFxuICBkYXlzSW5Nb250aCxcbiAgZGF5c0luWWVhcixcbiAgaXNMZWFwWWVhcixcbiAgd2Vla3NJbldlZWtZZWFyLFxuICBub3JtYWxpemVPYmplY3QsXG4gIHJvdW5kVG8sXG4gIG9ialRvTG9jYWxUUyxcbiAgcGFkU3RhcnQsXG59IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IHsgbm9ybWFsaXplWm9uZSB9IGZyb20gXCIuL2ltcGwvem9uZVV0aWwuanNcIjtcbmltcG9ydCBkaWZmIGZyb20gXCIuL2ltcGwvZGlmZi5qc1wiO1xuaW1wb3J0IHsgcGFyc2VSRkMyODIyRGF0ZSwgcGFyc2VJU09EYXRlLCBwYXJzZUhUVFBEYXRlLCBwYXJzZVNRTCB9IGZyb20gXCIuL2ltcGwvcmVnZXhQYXJzZXIuanNcIjtcbmltcG9ydCB7XG4gIHBhcnNlRnJvbVRva2VucyxcbiAgZXhwbGFpbkZyb21Ub2tlbnMsXG4gIGZvcm1hdE9wdHNUb1Rva2VucyxcbiAgZXhwYW5kTWFjcm9Ub2tlbnMsXG59IGZyb20gXCIuL2ltcGwvdG9rZW5QYXJzZXIuanNcIjtcbmltcG9ydCB7XG4gIGdyZWdvcmlhblRvV2VlayxcbiAgd2Vla1RvR3JlZ29yaWFuLFxuICBncmVnb3JpYW5Ub09yZGluYWwsXG4gIG9yZGluYWxUb0dyZWdvcmlhbixcbiAgaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEsXG4gIGhhc0ludmFsaWRXZWVrRGF0YSxcbiAgaGFzSW52YWxpZE9yZGluYWxEYXRhLFxuICBoYXNJbnZhbGlkVGltZURhdGEsXG4gIHVzZXNMb2NhbFdlZWtWYWx1ZXMsXG4gIGlzb1dlZWtkYXlUb0xvY2FsLFxufSBmcm9tIFwiLi9pbXBsL2NvbnZlcnNpb25zLmpzXCI7XG5pbXBvcnQgKiBhcyBGb3JtYXRzIGZyb20gXCIuL2ltcGwvZm9ybWF0cy5qc1wiO1xuaW1wb3J0IHtcbiAgSW52YWxpZEFyZ3VtZW50RXJyb3IsXG4gIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yLFxuICBJbnZhbGlkVW5pdEVycm9yLFxuICBJbnZhbGlkRGF0ZVRpbWVFcnJvcixcbn0gZnJvbSBcIi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgSW52YWxpZCBmcm9tIFwiLi9pbXBsL2ludmFsaWQuanNcIjtcblxuY29uc3QgSU5WQUxJRCA9IFwiSW52YWxpZCBEYXRlVGltZVwiO1xuY29uc3QgTUFYX0RBVEUgPSA4LjY0ZTE1O1xuXG5mdW5jdGlvbiB1bnN1cHBvcnRlZFpvbmUoem9uZSkge1xuICByZXR1cm4gbmV3IEludmFsaWQoXCJ1bnN1cHBvcnRlZCB6b25lXCIsIGB0aGUgem9uZSBcIiR7em9uZS5uYW1lfVwiIGlzIG5vdCBzdXBwb3J0ZWRgKTtcbn1cblxuLy8gd2UgY2FjaGUgd2VlayBkYXRhIG9uIHRoZSBEVCBvYmplY3QgYW5kIHRoaXMgaW50ZXJtZWRpYXRlcyB0aGUgY2FjaGVcbi8qKlxuICogQHBhcmFtIHtEYXRlVGltZX0gZHRcbiAqL1xuZnVuY3Rpb24gcG9zc2libHlDYWNoZWRXZWVrRGF0YShkdCkge1xuICBpZiAoZHQud2Vla0RhdGEgPT09IG51bGwpIHtcbiAgICBkdC53ZWVrRGF0YSA9IGdyZWdvcmlhblRvV2VlayhkdC5jKTtcbiAgfVxuICByZXR1cm4gZHQud2Vla0RhdGE7XG59XG5cbi8qKlxuICogQHBhcmFtIHtEYXRlVGltZX0gZHRcbiAqL1xuZnVuY3Rpb24gcG9zc2libHlDYWNoZWRMb2NhbFdlZWtEYXRhKGR0KSB7XG4gIGlmIChkdC5sb2NhbFdlZWtEYXRhID09PSBudWxsKSB7XG4gICAgZHQubG9jYWxXZWVrRGF0YSA9IGdyZWdvcmlhblRvV2VlayhcbiAgICAgIGR0LmMsXG4gICAgICBkdC5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksXG4gICAgICBkdC5sb2MuZ2V0U3RhcnRPZldlZWsoKVxuICAgICk7XG4gIH1cbiAgcmV0dXJuIGR0LmxvY2FsV2Vla0RhdGE7XG59XG5cbi8vIGNsb25lIHJlYWxseSBtZWFucywgXCJtYWtlIGEgbmV3IG9iamVjdCB3aXRoIHRoZXNlIG1vZGlmaWNhdGlvbnNcIi4gYWxsIFwic2V0dGVyc1wiIHJlYWxseSB1c2UgdGhpc1xuLy8gdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB3aGlsZSBvbmx5IGNoYW5naW5nIHNvbWUgb2YgdGhlIHByb3BlcnRpZXNcbmZ1bmN0aW9uIGNsb25lKGluc3QsIGFsdHMpIHtcbiAgY29uc3QgY3VycmVudCA9IHtcbiAgICB0czogaW5zdC50cyxcbiAgICB6b25lOiBpbnN0LnpvbmUsXG4gICAgYzogaW5zdC5jLFxuICAgIG86IGluc3QubyxcbiAgICBsb2M6IGluc3QubG9jLFxuICAgIGludmFsaWQ6IGluc3QuaW52YWxpZCxcbiAgfTtcbiAgcmV0dXJuIG5ldyBEYXRlVGltZSh7IC4uLmN1cnJlbnQsIC4uLmFsdHMsIG9sZDogY3VycmVudCB9KTtcbn1cblxuLy8gZmluZCB0aGUgcmlnaHQgb2Zmc2V0IGEgZ2l2ZW4gbG9jYWwgdGltZS4gVGhlIG8gaW5wdXQgaXMgb3VyIGd1ZXNzLCB3aGljaCBkZXRlcm1pbmVzIHdoaWNoXG4vLyBvZmZzZXQgd2UnbGwgcGljayBpbiBhbWJpZ3VvdXMgY2FzZXMgKGUuZy4gdGhlcmUgYXJlIHR3byAzIEFNcyBiL2MgRmFsbGJhY2sgRFNUKVxuZnVuY3Rpb24gZml4T2Zmc2V0KGxvY2FsVFMsIG8sIHR6KSB7XG4gIC8vIE91ciBVVEMgdGltZSBpcyBqdXN0IGEgZ3Vlc3MgYmVjYXVzZSBvdXIgb2Zmc2V0IGlzIGp1c3QgYSBndWVzc1xuICBsZXQgdXRjR3Vlc3MgPSBsb2NhbFRTIC0gbyAqIDYwICogMTAwMDtcblxuICAvLyBUZXN0IHdoZXRoZXIgdGhlIHpvbmUgbWF0Y2hlcyB0aGUgb2Zmc2V0IGZvciB0aGlzIHRzXG4gIGNvbnN0IG8yID0gdHoub2Zmc2V0KHV0Y0d1ZXNzKTtcblxuICAvLyBJZiBzbywgb2Zmc2V0IGRpZG4ndCBjaGFuZ2UgYW5kIHdlJ3JlIGRvbmVcbiAgaWYgKG8gPT09IG8yKSB7XG4gICAgcmV0dXJuIFt1dGNHdWVzcywgb107XG4gIH1cblxuICAvLyBJZiBub3QsIGNoYW5nZSB0aGUgdHMgYnkgdGhlIGRpZmZlcmVuY2UgaW4gdGhlIG9mZnNldFxuICB1dGNHdWVzcyAtPSAobzIgLSBvKSAqIDYwICogMTAwMDtcblxuICAvLyBJZiB0aGF0IGdpdmVzIHVzIHRoZSBsb2NhbCB0aW1lIHdlIHdhbnQsIHdlJ3JlIGRvbmVcbiAgY29uc3QgbzMgPSB0ei5vZmZzZXQodXRjR3Vlc3MpO1xuICBpZiAobzIgPT09IG8zKSB7XG4gICAgcmV0dXJuIFt1dGNHdWVzcywgbzJdO1xuICB9XG5cbiAgLy8gSWYgaXQncyBkaWZmZXJlbnQsIHdlJ3JlIGluIGEgaG9sZSB0aW1lLiBUaGUgb2Zmc2V0IGhhcyBjaGFuZ2VkLCBidXQgdGhlIHdlIGRvbid0IGFkanVzdCB0aGUgdGltZVxuICByZXR1cm4gW2xvY2FsVFMgLSBNYXRoLm1pbihvMiwgbzMpICogNjAgKiAxMDAwLCBNYXRoLm1heChvMiwgbzMpXTtcbn1cblxuLy8gY29udmVydCBhbiBlcG9jaCB0aW1lc3RhbXAgaW50byBhIGNhbGVuZGFyIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBvZmZzZXRcbmZ1bmN0aW9uIHRzVG9PYmoodHMsIG9mZnNldCkge1xuICB0cyArPSBvZmZzZXQgKiA2MCAqIDEwMDA7XG5cbiAgY29uc3QgZCA9IG5ldyBEYXRlKHRzKTtcblxuICByZXR1cm4ge1xuICAgIHllYXI6IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICBtb250aDogZC5nZXRVVENNb250aCgpICsgMSxcbiAgICBkYXk6IGQuZ2V0VVRDRGF0ZSgpLFxuICAgIGhvdXI6IGQuZ2V0VVRDSG91cnMoKSxcbiAgICBtaW51dGU6IGQuZ2V0VVRDTWludXRlcygpLFxuICAgIHNlY29uZDogZC5nZXRVVENTZWNvbmRzKCksXG4gICAgbWlsbGlzZWNvbmQ6IGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCksXG4gIH07XG59XG5cbi8vIGNvbnZlcnQgYSBjYWxlbmRhciBvYmplY3QgdG8gYSBlcG9jaCB0aW1lc3RhbXBcbmZ1bmN0aW9uIG9ialRvVFMob2JqLCBvZmZzZXQsIHpvbmUpIHtcbiAgcmV0dXJuIGZpeE9mZnNldChvYmpUb0xvY2FsVFMob2JqKSwgb2Zmc2V0LCB6b25lKTtcbn1cblxuLy8gY3JlYXRlIGEgbmV3IERUIGluc3RhbmNlIGJ5IGFkZGluZyBhIGR1cmF0aW9uLCBhZGp1c3RpbmcgZm9yIERTVHNcbmZ1bmN0aW9uIGFkanVzdFRpbWUoaW5zdCwgZHVyKSB7XG4gIGNvbnN0IG9QcmUgPSBpbnN0Lm8sXG4gICAgeWVhciA9IGluc3QuYy55ZWFyICsgTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgIG1vbnRoID0gaW5zdC5jLm1vbnRoICsgTWF0aC50cnVuYyhkdXIubW9udGhzKSArIE1hdGgudHJ1bmMoZHVyLnF1YXJ0ZXJzKSAqIDMsXG4gICAgYyA9IHtcbiAgICAgIC4uLmluc3QuYyxcbiAgICAgIHllYXIsXG4gICAgICBtb250aCxcbiAgICAgIGRheTpcbiAgICAgICAgTWF0aC5taW4oaW5zdC5jLmRheSwgZGF5c0luTW9udGgoeWVhciwgbW9udGgpKSArXG4gICAgICAgIE1hdGgudHJ1bmMoZHVyLmRheXMpICtcbiAgICAgICAgTWF0aC50cnVuYyhkdXIud2Vla3MpICogNyxcbiAgICB9LFxuICAgIG1pbGxpc1RvQWRkID0gRHVyYXRpb24uZnJvbU9iamVjdCh7XG4gICAgICB5ZWFyczogZHVyLnllYXJzIC0gTWF0aC50cnVuYyhkdXIueWVhcnMpLFxuICAgICAgcXVhcnRlcnM6IGR1ci5xdWFydGVycyAtIE1hdGgudHJ1bmMoZHVyLnF1YXJ0ZXJzKSxcbiAgICAgIG1vbnRoczogZHVyLm1vbnRocyAtIE1hdGgudHJ1bmMoZHVyLm1vbnRocyksXG4gICAgICB3ZWVrczogZHVyLndlZWtzIC0gTWF0aC50cnVuYyhkdXIud2Vla3MpLFxuICAgICAgZGF5czogZHVyLmRheXMgLSBNYXRoLnRydW5jKGR1ci5kYXlzKSxcbiAgICAgIGhvdXJzOiBkdXIuaG91cnMsXG4gICAgICBtaW51dGVzOiBkdXIubWludXRlcyxcbiAgICAgIHNlY29uZHM6IGR1ci5zZWNvbmRzLFxuICAgICAgbWlsbGlzZWNvbmRzOiBkdXIubWlsbGlzZWNvbmRzLFxuICAgIH0pLmFzKFwibWlsbGlzZWNvbmRzXCIpLFxuICAgIGxvY2FsVFMgPSBvYmpUb0xvY2FsVFMoYyk7XG5cbiAgbGV0IFt0cywgb10gPSBmaXhPZmZzZXQobG9jYWxUUywgb1ByZSwgaW5zdC56b25lKTtcblxuICBpZiAobWlsbGlzVG9BZGQgIT09IDApIHtcbiAgICB0cyArPSBtaWxsaXNUb0FkZDtcbiAgICAvLyB0aGF0IGNvdWxkIGhhdmUgY2hhbmdlZCB0aGUgb2Zmc2V0IGJ5IGdvaW5nIG92ZXIgYSBEU1QsIGJ1dCB3ZSB3YW50IHRvIGtlZXAgdGhlIHRzIHRoZSBzYW1lXG4gICAgbyA9IGluc3Quem9uZS5vZmZzZXQodHMpO1xuICB9XG5cbiAgcmV0dXJuIHsgdHMsIG8gfTtcbn1cblxuLy8gaGVscGVyIHVzZWZ1bCBpbiB0dXJuaW5nIHRoZSByZXN1bHRzIG9mIHBhcnNpbmcgaW50byByZWFsIGRhdGVzXG4vLyBieSBoYW5kbGluZyB0aGUgem9uZSBvcHRpb25zXG5mdW5jdGlvbiBwYXJzZURhdGFUb0RhdGVUaW1lKHBhcnNlZCwgcGFyc2VkWm9uZSwgb3B0cywgZm9ybWF0LCB0ZXh0LCBzcGVjaWZpY09mZnNldCkge1xuICBjb25zdCB7IHNldFpvbmUsIHpvbmUgfSA9IG9wdHM7XG4gIGlmICgocGFyc2VkICYmIE9iamVjdC5rZXlzKHBhcnNlZCkubGVuZ3RoICE9PSAwKSB8fCBwYXJzZWRab25lKSB7XG4gICAgY29uc3QgaW50ZXJwcmV0YXRpb25ab25lID0gcGFyc2VkWm9uZSB8fCB6b25lLFxuICAgICAgaW5zdCA9IERhdGVUaW1lLmZyb21PYmplY3QocGFyc2VkLCB7XG4gICAgICAgIC4uLm9wdHMsXG4gICAgICAgIHpvbmU6IGludGVycHJldGF0aW9uWm9uZSxcbiAgICAgICAgc3BlY2lmaWNPZmZzZXQsXG4gICAgICB9KTtcbiAgICByZXR1cm4gc2V0Wm9uZSA/IGluc3QgOiBpbnN0LnNldFpvbmUoem9uZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoXG4gICAgICBuZXcgSW52YWxpZChcInVucGFyc2FibGVcIiwgYHRoZSBpbnB1dCBcIiR7dGV4dH1cIiBjYW4ndCBiZSBwYXJzZWQgYXMgJHtmb3JtYXR9YClcbiAgICApO1xuICB9XG59XG5cbi8vIGlmIHlvdSB3YW50IHRvIG91dHB1dCBhIHRlY2huaWNhbCBmb3JtYXQgKGUuZy4gUkZDIDI4MjIpLCB0aGlzIGhlbHBlclxuLy8gaGVscHMgaGFuZGxlIHRoZSBkZXRhaWxzXG5mdW5jdGlvbiB0b1RlY2hGb3JtYXQoZHQsIGZvcm1hdCwgYWxsb3daID0gdHJ1ZSkge1xuICByZXR1cm4gZHQuaXNWYWxpZFxuICAgID8gRm9ybWF0dGVyLmNyZWF0ZShMb2NhbGUuY3JlYXRlKFwiZW4tVVNcIiksIHtcbiAgICAgICAgYWxsb3daLFxuICAgICAgICBmb3JjZVNpbXBsZTogdHJ1ZSxcbiAgICAgIH0pLmZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhkdCwgZm9ybWF0KVxuICAgIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gdG9JU09EYXRlKG8sIGV4dGVuZGVkKSB7XG4gIGNvbnN0IGxvbmdGb3JtYXQgPSBvLmMueWVhciA+IDk5OTkgfHwgby5jLnllYXIgPCAwO1xuICBsZXQgYyA9IFwiXCI7XG4gIGlmIChsb25nRm9ybWF0ICYmIG8uYy55ZWFyID49IDApIGMgKz0gXCIrXCI7XG4gIGMgKz0gcGFkU3RhcnQoby5jLnllYXIsIGxvbmdGb3JtYXQgPyA2IDogNCk7XG5cbiAgaWYgKGV4dGVuZGVkKSB7XG4gICAgYyArPSBcIi1cIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5tb250aCk7XG4gICAgYyArPSBcIi1cIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpO1xuICB9IGVsc2Uge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5kYXkpO1xuICB9XG4gIHJldHVybiBjO1xufVxuXG5mdW5jdGlvbiB0b0lTT1RpbWUoXG4gIG8sXG4gIGV4dGVuZGVkLFxuICBzdXBwcmVzc1NlY29uZHMsXG4gIHN1cHByZXNzTWlsbGlzZWNvbmRzLFxuICBpbmNsdWRlT2Zmc2V0LFxuICBleHRlbmRlZFpvbmVcbikge1xuICBsZXQgYyA9IHBhZFN0YXJ0KG8uYy5ob3VyKTtcbiAgaWYgKGV4dGVuZGVkKSB7XG4gICAgYyArPSBcIjpcIjtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpO1xuICAgIGlmIChvLmMubWlsbGlzZWNvbmQgIT09IDAgfHwgby5jLnNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NTZWNvbmRzKSB7XG4gICAgICBjICs9IFwiOlwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5taW51dGUpO1xuICB9XG5cbiAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCBvLmMuc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc1NlY29uZHMpIHtcbiAgICBjICs9IHBhZFN0YXJ0KG8uYy5zZWNvbmQpO1xuXG4gICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCAhc3VwcHJlc3NNaWxsaXNlY29uZHMpIHtcbiAgICAgIGMgKz0gXCIuXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KG8uYy5taWxsaXNlY29uZCwgMyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICBpZiAoby5pc09mZnNldEZpeGVkICYmIG8ub2Zmc2V0ID09PSAwICYmICFleHRlbmRlZFpvbmUpIHtcbiAgICAgIGMgKz0gXCJaXCI7XG4gICAgfSBlbHNlIGlmIChvLm8gPCAwKSB7XG4gICAgICBjICs9IFwiLVwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gLyA2MCkpO1xuICAgICAgYyArPSBcIjpcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYygtby5vICUgNjApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYyArPSBcIitcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYyhvLm8gLyA2MCkpO1xuICAgICAgYyArPSBcIjpcIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoTWF0aC50cnVuYyhvLm8gJSA2MCkpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChleHRlbmRlZFpvbmUpIHtcbiAgICBjICs9IFwiW1wiICsgby56b25lLmlhbmFOYW1lICsgXCJdXCI7XG4gIH1cbiAgcmV0dXJuIGM7XG59XG5cbi8vIGRlZmF1bHRzIGZvciB1bnNwZWNpZmllZCB1bml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFyc1xuY29uc3QgZGVmYXVsdFVuaXRWYWx1ZXMgPSB7XG4gICAgbW9udGg6IDEsXG4gICAgZGF5OiAxLFxuICAgIGhvdXI6IDAsXG4gICAgbWludXRlOiAwLFxuICAgIHNlY29uZDogMCxcbiAgICBtaWxsaXNlY29uZDogMCxcbiAgfSxcbiAgZGVmYXVsdFdlZWtVbml0VmFsdWVzID0ge1xuICAgIHdlZWtOdW1iZXI6IDEsXG4gICAgd2Vla2RheTogMSxcbiAgICBob3VyOiAwLFxuICAgIG1pbnV0ZTogMCxcbiAgICBzZWNvbmQ6IDAsXG4gICAgbWlsbGlzZWNvbmQ6IDAsXG4gIH0sXG4gIGRlZmF1bHRPcmRpbmFsVW5pdFZhbHVlcyA9IHtcbiAgICBvcmRpbmFsOiAxLFxuICAgIGhvdXI6IDAsXG4gICAgbWludXRlOiAwLFxuICAgIHNlY29uZDogMCxcbiAgICBtaWxsaXNlY29uZDogMCxcbiAgfTtcblxuLy8gVW5pdHMgaW4gdGhlIHN1cHBvcnRlZCBjYWxlbmRhcnMsIHNvcnRlZCBieSBiaWduZXNzXG5jb25zdCBvcmRlcmVkVW5pdHMgPSBbXCJ5ZWFyXCIsIFwibW9udGhcIiwgXCJkYXlcIiwgXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0sXG4gIG9yZGVyZWRXZWVrVW5pdHMgPSBbXG4gICAgXCJ3ZWVrWWVhclwiLFxuICAgIFwid2Vla051bWJlclwiLFxuICAgIFwid2Vla2RheVwiLFxuICAgIFwiaG91clwiLFxuICAgIFwibWludXRlXCIsXG4gICAgXCJzZWNvbmRcIixcbiAgICBcIm1pbGxpc2Vjb25kXCIsXG4gIF0sXG4gIG9yZGVyZWRPcmRpbmFsVW5pdHMgPSBbXCJ5ZWFyXCIsIFwib3JkaW5hbFwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXTtcblxuLy8gc3RhbmRhcmRpemUgY2FzZSBhbmQgcGx1cmFsaXR5IGluIHVuaXRzXG5mdW5jdGlvbiBub3JtYWxpemVVbml0KHVuaXQpIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICB5ZWFyOiBcInllYXJcIixcbiAgICB5ZWFyczogXCJ5ZWFyXCIsXG4gICAgbW9udGg6IFwibW9udGhcIixcbiAgICBtb250aHM6IFwibW9udGhcIixcbiAgICBkYXk6IFwiZGF5XCIsXG4gICAgZGF5czogXCJkYXlcIixcbiAgICBob3VyOiBcImhvdXJcIixcbiAgICBob3VyczogXCJob3VyXCIsXG4gICAgbWludXRlOiBcIm1pbnV0ZVwiLFxuICAgIG1pbnV0ZXM6IFwibWludXRlXCIsXG4gICAgcXVhcnRlcjogXCJxdWFydGVyXCIsXG4gICAgcXVhcnRlcnM6IFwicXVhcnRlclwiLFxuICAgIHNlY29uZDogXCJzZWNvbmRcIixcbiAgICBzZWNvbmRzOiBcInNlY29uZFwiLFxuICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kXCIsXG4gICAgd2Vla2RheTogXCJ3ZWVrZGF5XCIsXG4gICAgd2Vla2RheXM6IFwid2Vla2RheVwiLFxuICAgIHdlZWtudW1iZXI6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWtzbnVtYmVyOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVrbnVtYmVyczogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla3llYXI6IFwid2Vla1llYXJcIixcbiAgICB3ZWVreWVhcnM6IFwid2Vla1llYXJcIixcbiAgICBvcmRpbmFsOiBcIm9yZGluYWxcIixcbiAgfVt1bml0LnRvTG93ZXJDYXNlKCldO1xuXG4gIGlmICghbm9ybWFsaXplZCkgdGhyb3cgbmV3IEludmFsaWRVbml0RXJyb3IodW5pdCk7XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZWQ7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXRXaXRoTG9jYWxXZWVrcyh1bml0KSB7XG4gIHN3aXRjaCAodW5pdC50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSBcImxvY2Fsd2Vla2RheVwiOlxuICAgIGNhc2UgXCJsb2NhbHdlZWtkYXlzXCI6XG4gICAgICByZXR1cm4gXCJsb2NhbFdlZWtkYXlcIjtcbiAgICBjYXNlIFwibG9jYWx3ZWVrbnVtYmVyXCI6XG4gICAgY2FzZSBcImxvY2Fsd2Vla251bWJlcnNcIjpcbiAgICAgIHJldHVybiBcImxvY2FsV2Vla051bWJlclwiO1xuICAgIGNhc2UgXCJsb2NhbHdlZWt5ZWFyXCI6XG4gICAgY2FzZSBcImxvY2Fsd2Vla3llYXJzXCI6XG4gICAgICByZXR1cm4gXCJsb2NhbFdlZWtZZWFyXCI7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBub3JtYWxpemVVbml0KHVuaXQpO1xuICB9XG59XG5cbi8vIHRoaXMgaXMgYSBkdW1iZWQgZG93biB2ZXJzaW9uIG9mIGZyb21PYmplY3QoKSB0aGF0IHJ1bnMgYWJvdXQgNjAlIGZhc3RlclxuLy8gYnV0IGRvZXNuJ3QgZG8gYW55IHZhbGlkYXRpb24sIG1ha2VzIGEgYnVuY2ggb2YgYXNzdW1wdGlvbnMgYWJvdXQgd2hhdCB1bml0c1xuLy8gYXJlIHByZXNlbnQsIGFuZCBzbyBvbi5cbmZ1bmN0aW9uIHF1aWNrRFQob2JqLCBvcHRzKSB7XG4gIGNvbnN0IHpvbmUgPSBub3JtYWxpemVab25lKG9wdHMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgIGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpLFxuICAgIHRzTm93ID0gU2V0dGluZ3Mubm93KCk7XG5cbiAgbGV0IHRzLCBvO1xuXG4gIC8vIGFzc3VtZSB3ZSBoYXZlIHRoZSBoaWdoZXItb3JkZXIgdW5pdHNcbiAgaWYgKCFpc1VuZGVmaW5lZChvYmoueWVhcikpIHtcbiAgICBmb3IgKGNvbnN0IHUgb2Ygb3JkZXJlZFVuaXRzKSB7XG4gICAgICBpZiAoaXNVbmRlZmluZWQob2JqW3VdKSkge1xuICAgICAgICBvYmpbdV0gPSBkZWZhdWx0VW5pdFZhbHVlc1t1XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gaGFzSW52YWxpZEdyZWdvcmlhbkRhdGEob2JqKSB8fCBoYXNJbnZhbGlkVGltZURhdGEob2JqKTtcbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb2Zmc2V0UHJvdmlzID0gem9uZS5vZmZzZXQodHNOb3cpO1xuICAgIFt0cywgb10gPSBvYmpUb1RTKG9iaiwgb2Zmc2V0UHJvdmlzLCB6b25lKTtcbiAgfSBlbHNlIHtcbiAgICB0cyA9IHRzTm93O1xuICB9XG5cbiAgcmV0dXJuIG5ldyBEYXRlVGltZSh7IHRzLCB6b25lLCBsb2MsIG8gfSk7XG59XG5cbmZ1bmN0aW9uIGRpZmZSZWxhdGl2ZShzdGFydCwgZW5kLCBvcHRzKSB7XG4gIGNvbnN0IHJvdW5kID0gaXNVbmRlZmluZWQob3B0cy5yb3VuZCkgPyB0cnVlIDogb3B0cy5yb3VuZCxcbiAgICBmb3JtYXQgPSAoYywgdW5pdCkgPT4ge1xuICAgICAgYyA9IHJvdW5kVG8oYywgcm91bmQgfHwgb3B0cy5jYWxlbmRhcnkgPyAwIDogMiwgdHJ1ZSk7XG4gICAgICBjb25zdCBmb3JtYXR0ZXIgPSBlbmQubG9jLmNsb25lKG9wdHMpLnJlbEZvcm1hdHRlcihvcHRzKTtcbiAgICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KGMsIHVuaXQpO1xuICAgIH0sXG4gICAgZGlmZmVyID0gKHVuaXQpID0+IHtcbiAgICAgIGlmIChvcHRzLmNhbGVuZGFyeSkge1xuICAgICAgICBpZiAoIWVuZC5oYXNTYW1lKHN0YXJ0LCB1bml0KSkge1xuICAgICAgICAgIHJldHVybiBlbmQuc3RhcnRPZih1bml0KS5kaWZmKHN0YXJ0LnN0YXJ0T2YodW5pdCksIHVuaXQpLmdldCh1bml0KTtcbiAgICAgICAgfSBlbHNlIHJldHVybiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCk7XG4gICAgICB9XG4gICAgfTtcblxuICBpZiAob3B0cy51bml0KSB7XG4gICAgcmV0dXJuIGZvcm1hdChkaWZmZXIob3B0cy51bml0KSwgb3B0cy51bml0KTtcbiAgfVxuXG4gIGZvciAoY29uc3QgdW5pdCBvZiBvcHRzLnVuaXRzKSB7XG4gICAgY29uc3QgY291bnQgPSBkaWZmZXIodW5pdCk7XG4gICAgaWYgKE1hdGguYWJzKGNvdW50KSA+PSAxKSB7XG4gICAgICByZXR1cm4gZm9ybWF0KGNvdW50LCB1bml0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZvcm1hdChzdGFydCA+IGVuZCA/IC0wIDogMCwgb3B0cy51bml0c1tvcHRzLnVuaXRzLmxlbmd0aCAtIDFdKTtcbn1cblxuZnVuY3Rpb24gbGFzdE9wdHMoYXJnTGlzdCkge1xuICBsZXQgb3B0cyA9IHt9LFxuICAgIGFyZ3M7XG4gIGlmIChhcmdMaXN0Lmxlbmd0aCA+IDAgJiYgdHlwZW9mIGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXSA9PT0gXCJvYmplY3RcIikge1xuICAgIG9wdHMgPSBhcmdMaXN0W2FyZ0xpc3QubGVuZ3RoIC0gMV07XG4gICAgYXJncyA9IEFycmF5LmZyb20oYXJnTGlzdCkuc2xpY2UoMCwgYXJnTGlzdC5sZW5ndGggLSAxKTtcbiAgfSBlbHNlIHtcbiAgICBhcmdzID0gQXJyYXkuZnJvbShhcmdMaXN0KTtcbiAgfVxuICByZXR1cm4gW29wdHMsIGFyZ3NdO1xufVxuXG4vKipcbiAqIEEgRGF0ZVRpbWUgaXMgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIHJlcHJlc2VudGluZyBhIHNwZWNpZmljIGRhdGUgYW5kIHRpbWUgYW5kIGFjY29tcGFueWluZyBtZXRob2RzLiBJdCBjb250YWlucyBjbGFzcyBhbmQgaW5zdGFuY2UgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIHRyYW5zZm9ybWluZywgYW5kIGZvcm1hdHRpbmcgdGhlbS5cbiAqXG4gKiBBIERhdGVUaW1lIGNvbXByaXNlcyBvZjpcbiAqICogQSB0aW1lc3RhbXAuIEVhY2ggRGF0ZVRpbWUgaW5zdGFuY2UgcmVmZXJzIHRvIGEgc3BlY2lmaWMgbWlsbGlzZWNvbmQgb2YgdGhlIFVuaXggZXBvY2guXG4gKiAqIEEgdGltZSB6b25lLiBFYWNoIGluc3RhbmNlIGlzIGNvbnNpZGVyZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBzcGVjaWZpYyB6b25lIChieSBkZWZhdWx0IHRoZSBsb2NhbCBzeXN0ZW0ncyB6b25lKS5cbiAqICogQ29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIHRoYXQgZWZmZWN0IGhvdyBvdXRwdXQgc3RyaW5ncyBhcmUgZm9ybWF0dGVkLCBzdWNoIGFzIGBsb2NhbGVgLCBgbnVtYmVyaW5nU3lzdGVtYCwgYW5kIGBvdXRwdXRDYWxlbmRhcmAuXG4gKlxuICogSGVyZSBpcyBhIGJyaWVmIG92ZXJ2aWV3IG9mIHRoZSBtb3N0IGNvbW1vbmx5IHVzZWQgZnVuY3Rpb25hbGl0eSBpdCBwcm92aWRlczpcbiAqXG4gKiAqICoqQ3JlYXRpb24qKjogVG8gY3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBpdHMgY29tcG9uZW50cywgdXNlIG9uZSBvZiBpdHMgZmFjdG9yeSBjbGFzcyBtZXRob2RzOiB7QGxpbmsgRGF0ZVRpbWUubG9jYWx9LCB7QGxpbmsgRGF0ZVRpbWUudXRjfSwgYW5kIChtb3N0IGZsZXhpYmx5KSB7QGxpbmsgRGF0ZVRpbWUuZnJvbU9iamVjdH0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIHN0YW5kYXJkIHN0cmluZyBmb3JtYXQsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUlTT30sIHtAbGluayBEYXRlVGltZS5mcm9tSFRUUH0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUuZnJvbVJGQzI4MjJ9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBjdXN0b20gc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tRm9ybWF0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgbmF0aXZlIEpTIGRhdGUsIHVzZSB7QGxpbmsgRGF0ZVRpbWUuZnJvbUpTRGF0ZX0uXG4gKiAqICoqR3JlZ29yaWFuIGNhbGVuZGFyIGFuZCB0aW1lKio6IFRvIGV4YW1pbmUgdGhlIEdyZWdvcmlhbiBwcm9wZXJ0aWVzIG9mIGEgRGF0ZVRpbWUgaW5kaXZpZHVhbGx5IChpLmUgYXMgb3Bwb3NlZCB0byBjb2xsZWN0aXZlbHkgdGhyb3VnaCB7QGxpbmsgRGF0ZVRpbWUjdG9PYmplY3R9KSwgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjeWVhcn0sIHtAbGluayBEYXRlVGltZSNtb250aH0sXG4gKiB7QGxpbmsgRGF0ZVRpbWUjZGF5fSwge0BsaW5rIERhdGVUaW1lI2hvdXJ9LCB7QGxpbmsgRGF0ZVRpbWUjbWludXRlfSwge0BsaW5rIERhdGVUaW1lI3NlY29uZH0sIHtAbGluayBEYXRlVGltZSNtaWxsaXNlY29uZH0gYWNjZXNzb3JzLlxuICogKiAqKldlZWsgY2FsZW5kYXIqKjogRm9yIElTTyB3ZWVrIGNhbGVuZGFyIGF0dHJpYnV0ZXMsIHNlZSB0aGUge0BsaW5rIERhdGVUaW1lI3dlZWtZZWFyfSwge0BsaW5rIERhdGVUaW1lI3dlZWtOdW1iZXJ9LCBhbmQge0BsaW5rIERhdGVUaW1lI3dlZWtkYXl9IGFjY2Vzc29ycy5cbiAqICogKipDb25maWd1cmF0aW9uKiogU2VlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjbG9jYWxlfSBhbmQge0BsaW5rIERhdGVUaW1lI251bWJlcmluZ1N5c3RlbX0gYWNjZXNzb3JzLlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKio6IFRvIHRyYW5zZm9ybSB0aGUgRGF0ZVRpbWUgaW50byBvdGhlciBEYXRlVGltZXMsIHVzZSB7QGxpbmsgRGF0ZVRpbWUjc2V0fSwge0BsaW5rIERhdGVUaW1lI3JlY29uZmlndXJlfSwge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0TG9jYWxlfSwge0BsaW5rIERhdGVUaW1lLnBsdXN9LCB7QGxpbmsgRGF0ZVRpbWUjbWludXN9LCB7QGxpbmsgRGF0ZVRpbWUjZW5kT2Z9LCB7QGxpbmsgRGF0ZVRpbWUjc3RhcnRPZn0sIHtAbGluayBEYXRlVGltZSN0b1VUQ30sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbH0uXG4gKiAqICoqT3V0cHV0Kio6IFRvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgdXNlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjdG9SZWxhdGl2ZX0sIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlQ2FsZW5kYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9KU09OfSwge0BsaW5rIERhdGVUaW1lI3RvSVNPfSwge0BsaW5rIERhdGVUaW1lI3RvSFRUUH0sIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0sIHtAbGluayBEYXRlVGltZSN0b1JGQzI4MjJ9LCB7QGxpbmsgRGF0ZVRpbWUjdG9TdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9LCB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9LCB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjdG9KU0RhdGV9LlxuICpcbiAqIFRoZXJlJ3MgcGxlbnR5IG90aGVycyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiwgdGltZSB6b25lcywgYWx0ZXJuYXRpdmUgY2FsZW5kYXJzLCB2YWxpZGl0eSwgYW5kIHNvIG9uLCBzZWUgdGhlIGV4dGVybmFsIGRvY3VtZW50YXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhdGVUaW1lIHtcbiAgLyoqXG4gICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgY29uc3Qgem9uZSA9IGNvbmZpZy56b25lIHx8IFNldHRpbmdzLmRlZmF1bHRab25lO1xuXG4gICAgbGV0IGludmFsaWQgPVxuICAgICAgY29uZmlnLmludmFsaWQgfHxcbiAgICAgIChOdW1iZXIuaXNOYU4oY29uZmlnLnRzKSA/IG5ldyBJbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKSA6IG51bGwpIHx8XG4gICAgICAoIXpvbmUuaXNWYWxpZCA/IHVuc3VwcG9ydGVkWm9uZSh6b25lKSA6IG51bGwpO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudHMgPSBpc1VuZGVmaW5lZChjb25maWcudHMpID8gU2V0dGluZ3Mubm93KCkgOiBjb25maWcudHM7XG5cbiAgICBsZXQgYyA9IG51bGwsXG4gICAgICBvID0gbnVsbDtcbiAgICBpZiAoIWludmFsaWQpIHtcbiAgICAgIGNvbnN0IHVuY2hhbmdlZCA9IGNvbmZpZy5vbGQgJiYgY29uZmlnLm9sZC50cyA9PT0gdGhpcy50cyAmJiBjb25maWcub2xkLnpvbmUuZXF1YWxzKHpvbmUpO1xuXG4gICAgICBpZiAodW5jaGFuZ2VkKSB7XG4gICAgICAgIFtjLCBvXSA9IFtjb25maWcub2xkLmMsIGNvbmZpZy5vbGQub107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvdCA9IHpvbmUub2Zmc2V0KHRoaXMudHMpO1xuICAgICAgICBjID0gdHNUb09iaih0aGlzLnRzLCBvdCk7XG4gICAgICAgIGludmFsaWQgPSBOdW1iZXIuaXNOYU4oYy55ZWFyKSA/IG5ldyBJbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKSA6IG51bGw7XG4gICAgICAgIGMgPSBpbnZhbGlkID8gbnVsbCA6IGM7XG4gICAgICAgIG8gPSBpbnZhbGlkID8gbnVsbCA6IG90O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3pvbmUgPSB6b25lO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnZhbGlkID0gaW52YWxpZDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLndlZWtEYXRhID0gbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmxvY2FsV2Vla0RhdGEgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYyA9IGM7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vID0gbztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlzTHV4b25EYXRlVGltZSA9IHRydWU7XG4gIH1cblxuICAvLyBDT05TVFJVQ1RcblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZm9yIHRoZSBjdXJyZW50IGluc3RhbnQsIGluIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuXG4gICAqXG4gICAqIFVzZSBTZXR0aW5ncyB0byBvdmVycmlkZSB0aGVzZSBkZWZhdWx0IHZhbHVlcyBpZiBuZWVkZWQuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy9+PiBub3cgaW4gdGhlIElTTyBmb3JtYXRcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgbm93KCkge1xuICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe30pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGxvY2FsIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbeWVhcl0gLSBUaGUgY2FsZW5kYXIgeWVhci4gSWYgb21pdHRlZCAoYXMgaW4sIGNhbGwgYGxvY2FsKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb250aD0xXSAtIFRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2hvdXI9MF0gLSBUaGUgaG91ciBvZiB0aGUgZGF5LCBpbiAyNC1ob3VyIHRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaW51dGU9MF0gLSBUaGUgbWludXRlIG9mIHRoZSBob3VyLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzZWNvbmQ9MF0gLSBUaGUgc2Vjb25kIG9mIHRoZSBtaW51dGUsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbGxpc2Vjb25kPTBdIC0gVGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA5OTlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IG5vd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCh7IHpvbmU6IFwiQW1lcmljYS9OZXdfWW9ya1wiIH0pICAgICAgLy9+PiBub3csIGluIFVTIGVhc3QgY29hc3QgdGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgeyBsb2NhbGU6IFwiZnJcIiB9KSAgICAgLy9+PiAyMDE3LTAzLTEyVDAwOjAwOjAwLCB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgeyB6b25lOiBcInV0Y1wiIH0pICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwLCBpbiBVVENcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1KSAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCkgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTBcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCwgNzY1KSAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTAuNzY1XG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGxvY2FsKCkge1xuICAgIGNvbnN0IFtvcHRzLCBhcmdzXSA9IGxhc3RPcHRzKGFyZ3VtZW50cyksXG4gICAgICBbeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kXSA9IGFyZ3M7XG4gICAgcmV0dXJuIHF1aWNrRFQoeyB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmQgfSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgaW4gVVRDXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbeWVhcl0gLSBUaGUgY2FsZW5kYXIgeWVhci4gSWYgb21pdHRlZCAoYXMgaW4sIGNhbGwgYHV0YygpYCB3aXRoIG5vIGFyZ3VtZW50cyksIHRoZSBjdXJyZW50IHRpbWUgd2lsbCBiZSB1c2VkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbW9udGg9MV0gLSBUaGUgbW9udGgsIDEtaW5kZXhlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RheT0xXSAtIFRoZSBkYXkgb2YgdGhlIG1vbnRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaG91cj0wXSAtIFRoZSBob3VyIG9mIHRoZSBkYXksIGluIDI0LWhvdXIgdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZD0wXSAtIFRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWlsbGlzZWNvbmQ9MF0gLSBUaGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sb2NhbGVdIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm91dHB1dENhbGVuZGFyXSAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLm51bWJlcmluZ1N5c3RlbV0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IG5vd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDEtMDFUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0wMVQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgeyBsb2NhbGU6IFwiZnJcIiB9KSAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDU6NDU6MDBaIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTAsIDc2NSwgeyBsb2NhbGU6IFwiZnJcIiB9KSAvL34+IDIwMTctMDMtMTJUMDU6NDU6MTAuNzY1WiB3aXRoIGEgRnJlbmNoIGxvY2FsZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyB1dGMoKSB7XG4gICAgY29uc3QgW29wdHMsIGFyZ3NdID0gbGFzdE9wdHMoYXJndW1lbnRzKSxcbiAgICAgIFt5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmRdID0gYXJncztcblxuICAgIG9wdHMuem9uZSA9IEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtcbiAgICByZXR1cm4gcXVpY2tEVCh7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdC4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge0RhdGV9IGRhdGUgLSBhIEphdmFTY3JpcHQgRGF0ZSBvYmplY3RcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbUpTRGF0ZShkYXRlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0cyA9IGlzRGF0ZShkYXRlKSA/IGRhdGUudmFsdWVPZigpIDogTmFOO1xuICAgIGlmIChOdW1iZXIuaXNOYU4odHMpKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcImludmFsaWQgaW5wdXRcIik7XG4gICAgfVxuXG4gICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgICBpZiAoIXpvbmVUb1VzZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZVRvVXNlKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICB0czogdHMsXG4gICAgICB6b25lOiB6b25lVG9Vc2UsXG4gICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaWxsaXNlY29uZHMgLSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMTk3MCBVVENcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbU1pbGxpcyhtaWxsaXNlY29uZHMsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghaXNOdW1iZXIobWlsbGlzZWNvbmRzKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgICBgZnJvbU1pbGxpcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dCwgYnV0IHJlY2VpdmVkIGEgJHt0eXBlb2YgbWlsbGlzZWNvbmRzfSB3aXRoIHZhbHVlICR7bWlsbGlzZWNvbmRzfWBcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChtaWxsaXNlY29uZHMgPCAtTUFYX0RBVEUgfHwgbWlsbGlzZWNvbmRzID4gTUFYX0RBVEUpIHtcbiAgICAgIC8vIHRoaXMgaXNuJ3QgcGVyZmVjdCBiZWNhdXNlIGJlY2F1c2Ugd2UgY2FuIHN0aWxsIGVuZCB1cCBvdXQgb2YgcmFuZ2UgYmVjYXVzZSBvZiBhZGRpdGlvbmFsIHNoaWZ0aW5nLCBidXQgaXQncyBhIHN0YXJ0XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcIlRpbWVzdGFtcCBvdXQgb2YgcmFuZ2VcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogbWlsbGlzZWNvbmRzLFxuICAgICAgICB6b25lOiBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpLFxuICAgICAgICBsb2M6IExvY2FsZS5mcm9tT2JqZWN0KG9wdGlvbnMpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSB0aGUgZXBvY2ggKG1lYW5pbmcgc2luY2UgMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS4gVXNlcyB0aGUgZGVmYXVsdCB6b25lLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc2Vjb25kcyAtIGEgbnVtYmVyIG9mIHNlY29uZHMgc2luY2UgMTk3MCBVVENcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBjb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHRoZSBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0aW9ucy56b25lPSdsb2NhbCddIC0gdGhlIHpvbmUgdG8gcGxhY2UgdGhlIERhdGVUaW1lIGludG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbVNlY29uZHMoc2Vjb25kcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFpc051bWJlcihzZWNvbmRzKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiZnJvbVNlY29uZHMgcmVxdWlyZXMgYSBudW1lcmljYWwgaW5wdXRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogc2Vjb25kcyAqIDEwMDAsXG4gICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucyksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGgga2V5cyBsaWtlICd5ZWFyJyBhbmQgJ2hvdXInIHdpdGggcmVhc29uYWJsZSBkZWZhdWx0cy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIHRoZSBvYmplY3QgdG8gY3JlYXRlIHRoZSBEYXRlVGltZSBmcm9tXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoueWVhciAtIGEgeWVhciwgc3VjaCBhcyAxOTg3XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubW9udGggLSBhIG1vbnRoLCAxLTEyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouZGF5IC0gYSBkYXkgb2YgdGhlIG1vbnRoLCAxLTMxLCBkZXBlbmRpbmcgb24gdGhlIG1vbnRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoub3JkaW5hbCAtIGRheSBvZiB0aGUgeWVhciwgMS0zNjUgb3IgMzY2XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla1llYXIgLSBhbiBJU08gd2VlayB5ZWFyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla051bWJlciAtIGFuIElTTyB3ZWVrIG51bWJlciwgYmV0d2VlbiAxIGFuZCA1MiBvciA1MywgZGVwZW5kaW5nIG9uIHRoZSB5ZWFyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoud2Vla2RheSAtIGFuIElTTyB3ZWVrZGF5LCAxLTcsIHdoZXJlIDEgaXMgTW9uZGF5IGFuZCA3IGlzIFN1bmRheVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmxvY2FsV2Vla1llYXIgLSBhIHdlZWsgeWVhciwgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5sb2NhbFdlZWtOdW1iZXIgLSBhIHdlZWsgbnVtYmVyLCBiZXR3ZWVuIDEgYW5kIDUyIG9yIDUzLCBkZXBlbmRpbmcgb24gdGhlIHllYXIsIGFjY29yZGluZyB0byB0aGUgbG9jYWxlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubG9jYWxXZWVrZGF5IC0gYSB3ZWVrZGF5LCAxLTcsIHdoZXJlIDEgaXMgdGhlIGZpcnN0IGFuZCA3IGlzIHRoZSBsYXN0IGRheSBvZiB0aGUgd2VlaywgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3VyIC0gaG91ciBvZiB0aGUgZGF5LCAwLTIzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWludXRlIC0gbWludXRlIG9mIHRoZSBob3VyLCAwLTU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmouc2Vjb25kIC0gc2Vjb25kIG9mIHRoZSBtaW51dGUsIDAtNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taWxsaXNlY29uZCAtIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQsIDAtOTk5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgY3JlYXRpbmcgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gaW50ZXJwcmV0IHRoZSBudW1iZXJzIGluIHRoZSBjb250ZXh0IG9mIGEgcGFydGljdWxhciB6b25lLiBDYW4gdGFrZSBhbnkgdmFsdWUgdGFrZW4gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHNldFpvbmUoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW1cXCdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyLCBtb250aDogNSwgZGF5OiAyNX0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB5ZWFyOiAxOTgyIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDEtMDEnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0pIC8vfj4gdG9kYXkgYXQgMTA6MjY6MDZcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAndXRjJyB9KSxcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnbG9jYWwnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBob3VyOiAxMCwgbWludXRlOiAyNiwgc2Vjb25kOiA2IH0sIHsgem9uZTogJ0FtZXJpY2EvTmV3X1lvcmsnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyB3ZWVrWWVhcjogMjAxNiwgd2Vla051bWJlcjogMiwgd2Vla2RheTogMyB9KS50b0lTT0RhdGUoKSAvLz0+ICcyMDE2LTAxLTEzJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgbG9jYWxXZWVrWWVhcjogMjAyMiwgbG9jYWxXZWVrTnVtYmVyOiAxLCBsb2NhbFdlZWtkYXk6IDEgfSwgeyBsb2NhbGU6IFwiZW4tVVNcIiB9KS50b0lTT0RhdGUoKSAvLz0+ICcyMDIxLTEyLTI2J1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tT2JqZWN0KG9iaiwgb3B0cyA9IHt9KSB7XG4gICAgb2JqID0gb2JqIHx8IHt9O1xuICAgIGNvbnN0IHpvbmVUb1VzZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gICAgaWYgKCF6b25lVG9Vc2UuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmVUb1VzZSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGxvYyA9IExvY2FsZS5mcm9tT2JqZWN0KG9wdHMpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBub3JtYWxpemVPYmplY3Qob2JqLCBub3JtYWxpemVVbml0V2l0aExvY2FsV2Vla3MpO1xuICAgIGNvbnN0IHsgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlayB9ID0gdXNlc0xvY2FsV2Vla1ZhbHVlcyhub3JtYWxpemVkLCBsb2MpO1xuXG4gICAgY29uc3QgdHNOb3cgPSBTZXR0aW5ncy5ub3coKSxcbiAgICAgIG9mZnNldFByb3ZpcyA9ICFpc1VuZGVmaW5lZChvcHRzLnNwZWNpZmljT2Zmc2V0KVxuICAgICAgICA/IG9wdHMuc3BlY2lmaWNPZmZzZXRcbiAgICAgICAgOiB6b25lVG9Vc2Uub2Zmc2V0KHRzTm93KSxcbiAgICAgIGNvbnRhaW5zT3JkaW5hbCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpLFxuICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksXG4gICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICBjb250YWluc0dyZWdvciA9IGNvbnRhaW5zR3JlZ29yWWVhciB8fCBjb250YWluc0dyZWdvck1ELFxuICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXI7XG5cbiAgICAvLyBjYXNlczpcbiAgICAvLyBqdXN0IGEgd2Vla2RheSAtPiB0aGlzIHdlZWsncyBpbnN0YW5jZSBvZiB0aGF0IHdlZWtkYXksIG5vIHdvcnJpZXNcbiAgICAvLyAoZ3JlZ29yaWFuIGRhdGEgb3Igb3JkaW5hbCkgKyAod2Vla1llYXIgb3Igd2Vla051bWJlcikgLT4gZXJyb3JcbiAgICAvLyAoZ3JlZ29yaWFuIG1vbnRoIG9yIGRheSkgKyBvcmRpbmFsIC0+IGVycm9yXG4gICAgLy8gb3RoZXJ3aXNlIGp1c3QgdXNlIHdlZWtzIG9yIG9yZGluYWxzIG9yIGdyZWdvcmlhbiwgZGVwZW5kaW5nIG9uIHdoYXQncyBzcGVjaWZpZWRcblxuICAgIGlmICgoY29udGFpbnNHcmVnb3IgfHwgY29udGFpbnNPcmRpbmFsKSAmJiBkZWZpbml0ZVdlZWtEZWYpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcbiAgICAgICAgXCJDYW4ndCBtaXggd2Vla1llYXIvd2Vla051bWJlciB1bml0cyB3aXRoIHllYXIvbW9udGgvZGF5IG9yIG9yZGluYWxzXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRhaW5zR3JlZ29yTUQgJiYgY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXCJDYW4ndCBtaXggb3JkaW5hbCBkYXRlcyB3aXRoIG1vbnRoL2RheVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VXZWVrRGF0YSA9IGRlZmluaXRlV2Vla0RlZiB8fCAobm9ybWFsaXplZC53ZWVrZGF5ICYmICFjb250YWluc0dyZWdvcik7XG5cbiAgICAvLyBjb25maWd1cmUgb3Vyc2VsdmVzIHRvIGRlYWwgd2l0aCBncmVnb3JpYW4gZGF0ZXMgb3Igd2VlayBzdHVmZlxuICAgIGxldCB1bml0cyxcbiAgICAgIGRlZmF1bHRWYWx1ZXMsXG4gICAgICBvYmpOb3cgPSB0c1RvT2JqKHRzTm93LCBvZmZzZXRQcm92aXMpO1xuICAgIGlmICh1c2VXZWVrRGF0YSkge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkV2Vla1VuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRXZWVrVW5pdFZhbHVlcztcbiAgICAgIG9iak5vdyA9IGdyZWdvcmlhblRvV2VlayhvYmpOb3csIG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWspO1xuICAgIH0gZWxzZSBpZiAoY29udGFpbnNPcmRpbmFsKSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRPcmRpbmFsVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzO1xuICAgICAgb2JqTm93ID0gZ3JlZ29yaWFuVG9PcmRpbmFsKG9iak5vdyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZFVuaXRzO1xuICAgICAgZGVmYXVsdFZhbHVlcyA9IGRlZmF1bHRVbml0VmFsdWVzO1xuICAgIH1cblxuICAgIC8vIHNldCBkZWZhdWx0IHZhbHVlcyBmb3IgbWlzc2luZyBzdHVmZlxuICAgIGxldCBmb3VuZEZpcnN0ID0gZmFsc2U7XG4gICAgZm9yIChjb25zdCB1IG9mIHVuaXRzKSB7XG4gICAgICBjb25zdCB2ID0gbm9ybWFsaXplZFt1XTtcbiAgICAgIGlmICghaXNVbmRlZmluZWQodikpIHtcbiAgICAgICAgZm91bmRGaXJzdCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGZvdW5kRmlyc3QpIHtcbiAgICAgICAgbm9ybWFsaXplZFt1XSA9IGRlZmF1bHRWYWx1ZXNbdV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub3JtYWxpemVkW3VdID0gb2JqTm93W3VdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG1ha2Ugc3VyZSB0aGUgdmFsdWVzIHdlIGhhdmUgYXJlIGluIHJhbmdlXG4gICAgY29uc3QgaGlnaGVyT3JkZXJJbnZhbGlkID0gdXNlV2Vla0RhdGFcbiAgICAgICAgPyBoYXNJbnZhbGlkV2Vla0RhdGEobm9ybWFsaXplZCwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlaylcbiAgICAgICAgOiBjb250YWluc09yZGluYWxcbiAgICAgICAgPyBoYXNJbnZhbGlkT3JkaW5hbERhdGEobm9ybWFsaXplZClcbiAgICAgICAgOiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShub3JtYWxpemVkKSxcbiAgICAgIGludmFsaWQgPSBoaWdoZXJPcmRlckludmFsaWQgfHwgaGFzSW52YWxpZFRpbWVEYXRhKG5vcm1hbGl6ZWQpO1xuXG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH1cblxuICAgIC8vIGNvbXB1dGUgdGhlIGFjdHVhbCB0aW1lXG4gICAgY29uc3QgZ3JlZ29yaWFuID0gdXNlV2Vla0RhdGFcbiAgICAgICAgPyB3ZWVrVG9HcmVnb3JpYW4obm9ybWFsaXplZCwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlaylcbiAgICAgICAgOiBjb250YWluc09yZGluYWxcbiAgICAgICAgPyBvcmRpbmFsVG9HcmVnb3JpYW4obm9ybWFsaXplZClcbiAgICAgICAgOiBub3JtYWxpemVkLFxuICAgICAgW3RzRmluYWwsIG9mZnNldEZpbmFsXSA9IG9ialRvVFMoZ3JlZ29yaWFuLCBvZmZzZXRQcm92aXMsIHpvbmVUb1VzZSksXG4gICAgICBpbnN0ID0gbmV3IERhdGVUaW1lKHtcbiAgICAgICAgdHM6IHRzRmluYWwsXG4gICAgICAgIHpvbmU6IHpvbmVUb1VzZSxcbiAgICAgICAgbzogb2Zmc2V0RmluYWwsXG4gICAgICAgIGxvYyxcbiAgICAgIH0pO1xuXG4gICAgLy8gZ3JlZ29yaWFuIGRhdGEgKyB3ZWVrZGF5IHNlcnZlcyBvbmx5IHRvIHZhbGlkYXRlXG4gICAgaWYgKG5vcm1hbGl6ZWQud2Vla2RheSAmJiBjb250YWluc0dyZWdvciAmJiBvYmoud2Vla2RheSAhPT0gaW5zdC53ZWVrZGF5KSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcbiAgICAgICAgXCJtaXNtYXRjaGVkIHdlZWtkYXlcIixcbiAgICAgICAgYHlvdSBjYW4ndCBzcGVjaWZ5IGJvdGggYSB3ZWVrZGF5IG9mICR7bm9ybWFsaXplZC53ZWVrZGF5fSBhbmQgYSBkYXRlIG9mICR7aW5zdC50b0lTTygpfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluc3Q7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBJU08gODYwMSBzdHJpbmdcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgSVNPIHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMrMDY6MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMyswNjowMCcsIHtzZXRab25lOiB0cnVlfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnLCB7em9uZTogJ3V0Yyd9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LVcwNS00JylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbUlTTyh0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZUlTT0RhdGUodGV4dCk7XG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJJU08gODYwMVwiLCB0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIFJGQyAyODIyIHN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBSRkMgMjgyMiBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSB0aGUgb2Zmc2V0IGlzIGFsd2F5cyBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIHRoaXMgaGFzIG5vIGVmZmVjdCBvbiB0aGUgaW50ZXJwcmV0YXRpb24gb2Ygc3RyaW5nLCBtZXJlbHkgdGhlIHpvbmUgdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpcyBleHByZXNzZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCcyNSBOb3YgMjAxNiAxMzoyMzoxMiBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tUkZDMjgyMignRnJpLCAyNSBOb3YgMjAxNiAxMzoyMzoxMiArMDYwMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCcyNSBOb3YgMjAxNiAxMzoyMyBaJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbVJGQzI4MjIodGV4dCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VSRkMyODIyRGF0ZSh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIlJGQyAyODIyXCIsIHRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gSFRUUCBoZWFkZXIgZGF0ZVxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBIVFRQIGhlYWRlciBkYXRlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZS4gU2luY2UgSFRUUCBkYXRlcyBhcmUgYWx3YXlzIGluIFVUQywgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHRoZSBpbnRlcnByZXRhdGlvbiBvZiBzdHJpbmcsIG1lcmVseSB0aGUgem9uZSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGlzIGV4cHJlc3NlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggdGhlIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nLiBGb3IgSFRUUCBkYXRlcywgdGhpcyBpcyBhbHdheXMgVVRDLCBzbyB0aGlzIG9wdGlvbiBpcyBlcXVpdmFsZW50IHRvIHNldHRpbmcgdGhlIGB6b25lYCBvcHRpb24gdG8gJ3V0YycsIGJ1dCB0aGlzIG9wdGlvbiBpcyBpbmNsdWRlZCBmb3IgY29uc2lzdGVuY3kgd2l0aCBzaW1pbGFyIG1ldGhvZHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbSdzIGxvY2FsZSddIC0gYSBsb2NhbGUgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4sIDA2IE5vdiAxOTk0IDA4OjQ5OjM3IEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW5kYXksIDA2LU5vdi05NCAwODo0OTozNyBHTVQnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSFRUUCgnU3VuIE5vdiAgNiAwODo0OTozNyAxOTk0JylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbUhUVFAodGV4dCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VIVFRQRGF0ZSh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIkhUVFBcIiwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBpbnB1dCBzdHJpbmcgYW5kIGZvcm1hdCBzdHJpbmcuXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS4gRm9yIGEgdGFibGUgb2YgdG9rZW5zIGFuZCB0aGVpciBpbnRlcnByZXRhdGlvbnMsIHNlZSBbaGVyZV0oaHR0cHM6Ly9tb21lbnQuZ2l0aHViLmlvL2x1eG9uLyMvcGFyc2luZz9pZD10YWJsZS1vZi10b2tlbnMpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIHRoZSBsaW5rIGJlbG93IGZvciB0aGUgZm9ybWF0cylcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIHVzZSB0aGlzIHpvbmUgaWYgbm8gb2Zmc2V0IGlzIHNwZWNpZmllZCBpbiB0aGUgaW5wdXQgc3RyaW5nIGl0c2VsZi4gV2lsbCBhbHNvIGNvbnZlcnQgdGhlIERhdGVUaW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcgaXRzZWxmLCBpZiBpdCBzcGVjaWZpZXMgb25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSBhIGxvY2FsZSBzdHJpbmcgdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlIHdoZW4gcGFyc2luZy4gV2lsbCBhbHNvIHNldCB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIHRvIHRoaXMgbnVtYmVyaW5nIHN5c3RlbVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMgPSB7fSkge1xuICAgIGlmIChpc1VuZGVmaW5lZCh0ZXh0KSB8fCBpc1VuZGVmaW5lZChmbXQpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tRm9ybWF0IHJlcXVpcmVzIGFuIGlucHV0IHN0cmluZyBhbmQgYSBmb3JtYXRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgeyBsb2NhbGUgPSBudWxsLCBudW1iZXJpbmdTeXN0ZW0gPSBudWxsIH0gPSBvcHRzLFxuICAgICAgbG9jYWxlVG9Vc2UgPSBMb2NhbGUuZnJvbU9wdHMoe1xuICAgICAgICBsb2NhbGUsXG4gICAgICAgIG51bWJlcmluZ1N5c3RlbSxcbiAgICAgICAgZGVmYXVsdFRvRU46IHRydWUsXG4gICAgICB9KSxcbiAgICAgIFt2YWxzLCBwYXJzZWRab25lLCBzcGVjaWZpY09mZnNldCwgaW52YWxpZF0gPSBwYXJzZUZyb21Ub2tlbnMobG9jYWxlVG9Vc2UsIHRleHQsIGZtdCk7XG4gICAgaWYgKGludmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBgZm9ybWF0ICR7Zm10fWAsIHRleHQsIHNwZWNpZmljT2Zmc2V0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGZyb21Gb3JtYXQgaW5zdGVhZFxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmcodGV4dCwgZm10LCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0ZXh0LCBmbXQsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBTUUwgZGF0ZSwgdGltZSwgb3IgZGF0ZXRpbWVcbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1JylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIrMDY6MDAnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDIgQW1lcmljYS9Mb3NfQW5nZWxlcycsIHsgc2V0Wm9uZTogdHJ1ZSB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MicsIHsgem9uZTogJ0FtZXJpY2EvTG9zX0FuZ2VsZXMnIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzA5OjEyOjM0LjM0MicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21TUUwodGV4dCwgb3B0cyA9IHt9KSB7XG4gICAgY29uc3QgW3ZhbHMsIHBhcnNlZFpvbmVdID0gcGFyc2VTUUwodGV4dCk7XG4gICAgcmV0dXJuIHBhcnNlRGF0YVRvRGF0ZVRpbWUodmFscywgcGFyc2VkWm9uZSwgb3B0cywgXCJTUUxcIiwgdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIERhdGVUaW1lIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZXhwbGFuYXRpb249bnVsbF0gLSBsb25nZXIgZXhwbGFuYXRpb24sIG1heSBpbmNsdWRlIHBhcmFtZXRlcnMgYW5kIG90aGVyIHVzZWZ1bCBkZWJ1Z2dpbmcgaW5mb3JtYXRpb25cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgaW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uID0gbnVsbCkge1xuICAgIGlmICghcmVhc29uKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJuZWVkIHRvIHNwZWNpZnkgYSByZWFzb24gdGhlIERhdGVUaW1lIGlzIGludmFsaWRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgaW52YWxpZCA9IHJlYXNvbiBpbnN0YW5jZW9mIEludmFsaWQgPyByZWFzb24gOiBuZXcgSW52YWxpZChyZWFzb24sIGV4cGxhbmF0aW9uKTtcblxuICAgIGlmIChTZXR0aW5ncy50aHJvd09uSW52YWxpZCkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWREYXRlVGltZUVycm9yKGludmFsaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERhdGVUaW1lKHsgaW52YWxpZCB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIGFuIGluc3RhbmNlIG9mIERhdGVUaW1lLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNEYXRlVGltZShvKSB7XG4gICAgcmV0dXJuIChvICYmIG8uaXNMdXhvbkRhdGVUaW1lKSB8fCBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9kdWNlIHRoZSBmb3JtYXQgc3RyaW5nIGZvciBhIHNldCBvZiBvcHRpb25zXG4gICAqIEBwYXJhbSBmb3JtYXRPcHRzXG4gICAqIEBwYXJhbSBsb2NhbGVPcHRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgcGFyc2VGb3JtYXRGb3JPcHRzKGZvcm1hdE9wdHMsIGxvY2FsZU9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHRva2VuTGlzdCA9IGZvcm1hdE9wdHNUb1Rva2Vucyhmb3JtYXRPcHRzLCBMb2NhbGUuZnJvbU9iamVjdChsb2NhbGVPcHRzKSk7XG4gICAgcmV0dXJuICF0b2tlbkxpc3QgPyBudWxsIDogdG9rZW5MaXN0Lm1hcCgodCkgPT4gKHQgPyB0LnZhbCA6IG51bGwpKS5qb2luKFwiXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIHRoZSBmdWxseSBleHBhbmRlZCBmb3JtYXQgdG9rZW4gZm9yIHRoZSBsb2NhbGVcbiAgICogRG9lcyBOT1QgcXVvdGUgY2hhcmFjdGVycywgc28gcXVvdGVkIHRva2VucyB3aWxsIG5vdCByb3VuZCB0cmlwIGNvcnJlY3RseVxuICAgKiBAcGFyYW0gZm10XG4gICAqIEBwYXJhbSBsb2NhbGVPcHRzXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZXhwYW5kRm9ybWF0KGZtdCwgbG9jYWxlT3B0cyA9IHt9KSB7XG4gICAgY29uc3QgZXhwYW5kZWQgPSBleHBhbmRNYWNyb1Rva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgTG9jYWxlLmZyb21PYmplY3QobG9jYWxlT3B0cykpO1xuICAgIHJldHVybiBleHBhbmRlZC5tYXAoKHQpID0+IHQudmFsKS5qb2luKFwiXCIpO1xuICB9XG5cbiAgLy8gSU5GT1xuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdtb250aCcpOyAvLz0+IDdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNywgNCkuZ2V0KCdkYXknKTsgLy89PiA0XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCh1bml0KSB7XG4gICAgcmV0dXJuIHRoaXNbdW5pdF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBEYXRlVGltZSBpcyB2YWxpZC4gSW52YWxpZCBEYXRlVGltZXMgb2NjdXIgd2hlbjpcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgZnJvbSBpbnZhbGlkIGNhbGVuZGFyIGluZm9ybWF0aW9uLCBzdWNoIGFzIHRoZSAxM3RoIG1vbnRoIG9yIEZlYnJ1YXJ5IDMwXG4gICAqICogVGhlIERhdGVUaW1lIHdhcyBjcmVhdGVkIGJ5IGFuIG9wZXJhdGlvbiBvbiBhbm90aGVyIGludmFsaWQgZGF0ZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRGF0ZVRpbWUgaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkUmVhc29uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIERhdGVUaW1lIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxvY2FsZSBvZiBhIERhdGVUaW1lLCBzdWNoICdlbi1HQicuIFRoZSBsb2NhbGUgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbG9jYWxlKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5sb2NhbGUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyaW5nIHN5c3RlbSBvZiBhIERhdGVUaW1lLCBzdWNoICdiZW5nJy4gVGhlIG51bWJlcmluZyBzeXN0ZW0gaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbnVtYmVyaW5nU3lzdGVtKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3V0cHV0IGNhbGVuZGFyIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2lzbGFtaWMnLiBUaGUgb3V0cHV0IGNhbGVuZGFyIGlzIHVzZWQgd2hlbiBmb3JtYXR0aW5nIHRoZSBEYXRlVGltZVxuICAgKlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG91dHB1dENhbGVuZGFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aW1lIHpvbmUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEB0eXBlIHtab25lfVxuICAgKi9cbiAgZ2V0IHpvbmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3pvbmU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBuYW1lIG9mIHRoZSB0aW1lIHpvbmUuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgem9uZU5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5uYW1lIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHllYXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnllYXIgLy89PiAyMDE3XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgeWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLnllYXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBxdWFydGVyXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS5xdWFydGVyIC8vPT4gMlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHF1YXJ0ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IE1hdGguY2VpbCh0aGlzLmMubW9udGggLyAzKSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1vbnRoICgxLTEyKS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm1vbnRoIC8vPT4gNVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1vbnRoKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubW9udGggOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkYXkgb2YgdGhlIG1vbnRoICgxLTMwaXNoKS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLmRheSAvLz0+IDI1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuZGF5IDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaG91ciBvZiB0aGUgZGF5ICgwLTIzKS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDkpLmhvdXIgLy89PiA5XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgaG91cigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLmhvdXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtaW51dGUgb2YgdGhlIGhvdXIgKDAtNTkpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzApLm1pbnV0ZSAvLz0+IDMwXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWludXRlKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWludXRlIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2Vjb25kIG9mIHRoZSBtaW51dGUgKDAtNTkpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyKS5zZWNvbmQgLy89PiA1MlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHNlY29uZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5jLnNlY29uZCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbGxpc2Vjb25kIG9mIHRoZSBzZWNvbmQgKDAtOTk5KS5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUsIDksIDMwLCA1MiwgNjU0KS5taWxsaXNlY29uZCAvLz0+IDY1NFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IG1pbGxpc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMubWlsbGlzZWNvbmQgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrIHllYXJcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDEyLCAzMSkud2Vla1llYXIgLy89PiAyMDE1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla1llYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla1llYXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrIG51bWJlciBvZiB0aGUgd2VlayB5ZWFyICgxLTUyaXNoKS5cbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1KS53ZWVrTnVtYmVyIC8vPT4gMjFcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKHRoaXMpLndlZWtOdW1iZXIgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkYXkgb2YgdGhlIHdlZWsuXG4gICAqIDEgaXMgTW9uZGF5IGFuZCA3IGlzIFN1bmRheVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMTEsIDMxKS53ZWVrZGF5IC8vPT4gNFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla2RheSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBkYXRlIGlzIG9uIGEgd2Vla2VuZCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZSwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzV2Vla2VuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkICYmIHRoaXMubG9jLmdldFdlZWtlbmREYXlzKCkuaW5jbHVkZXModGhpcy53ZWVrZGF5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgd2VlayBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZS5cbiAgICogMSBpcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrIGFuZCA3IGlzIHRoZSBsYXN0IGRheSBvZiB0aGUgd2Vlay5cbiAgICogSWYgdGhlIGxvY2FsZSBhc3NpZ25zIFN1bmRheSBhcyB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrLCB0aGVuIGEgZGF0ZSB3aGljaCBpcyBhIFN1bmRheSB3aWxsIHJldHVybiAxLFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGxvY2FsV2Vla2RheSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRMb2NhbFdlZWtEYXRhKHRoaXMpLndlZWtkYXkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrIG51bWJlciBvZiB0aGUgd2VlayB5ZWFyIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLiBEaWZmZXJlbnQgbG9jYWxlcyBhc3NpZ24gd2VlayBudW1iZXJzIGRpZmZlcmVudGx5LFxuICAgKiBiZWNhdXNlIHRoZSB3ZWVrIGNhbiBzdGFydCBvbiBkaWZmZXJlbnQgZGF5cyBvZiB0aGUgd2VlayAoc2VlIGxvY2FsV2Vla2RheSkgYW5kIGJlY2F1c2UgYSBkaWZmZXJlbnQgbnVtYmVyIG9mIGRheXNcbiAgICogaXMgcmVxdWlyZWQgZm9yIGEgd2VlayB0byBjb3VudCBhcyB0aGUgZmlyc3Qgd2VlayBvZiBhIHllYXIuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbG9jYWxXZWVrTnVtYmVyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEodGhpcykud2Vla051bWJlciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgeWVhciBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZS4gRGlmZmVyZW50IGxvY2FsZXMgYXNzaWduIHdlZWsgbnVtYmVycyAoYW5kIHRoZXJlZm9yIHdlZWsgeWVhcnMpXG4gICAqIGRpZmZlcmVudGx5LCBzZWUgbG9jYWxXZWVrTnVtYmVyLlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGxvY2FsV2Vla1llYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkTG9jYWxXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG9yZGluYWwgKG1lYW5pbmcgdGhlIGRheSBvZiB0aGUgeWVhcilcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLm9yZGluYWwgLy89PiAxNDVcbiAgICogQHR5cGUge251bWJlcnxEYXRlVGltZX1cbiAgICovXG4gIGdldCBvcmRpbmFsKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBncmVnb3JpYW5Ub09yZGluYWwodGhpcy5jKS5vcmRpbmFsIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgc2hvcnQgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0Jy5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDEwLCAzMCkubW9udGhTaG9ydCAvLz0+IE9jdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG1vbnRoU2hvcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwic2hvcnRcIiwgeyBsb2NPYmo6IHRoaXMubG9jIH0pW3RoaXMubW9udGggLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBsb25nIG1vbnRoIG5hbWUsIHN1Y2ggYXMgJ09jdG9iZXInLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aExvbmcgLy89PiBPY3RvYmVyXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbW9udGhMb25nKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLm1vbnRocyhcImxvbmdcIiwgeyBsb2NPYmo6IHRoaXMubG9jIH0pW3RoaXMubW9udGggLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBzaG9ydCB3ZWVrZGF5LCBzdWNoIGFzICdNb24nLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5U2hvcnQgLy89PiBNb25cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCB3ZWVrZGF5U2hvcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ud2Vla2RheXMoXCJzaG9ydFwiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy53ZWVrZGF5IC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaHVtYW4gcmVhZGFibGUgbG9uZyB3ZWVrZGF5LCBzdWNoIGFzICdNb25kYXknLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS53ZWVrZGF5TG9uZyAvLz0+IE1vbmRheVxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHdlZWtkYXlMb25nKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbmZvLndlZWtkYXlzKFwibG9uZ1wiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy53ZWVrZGF5IC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgVVRDIG9mZnNldCBvZiB0aGlzIERhdGVUaW1lIGluIG1pbnV0ZXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkub2Zmc2V0IC8vPT4gLTI0MFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5vZmZzZXQgLy89PiAwXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgb2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyArdGhpcy5vIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc2hvcnQgaHVtYW4gbmFtZSBmb3IgdGhlIHpvbmUncyBjdXJyZW50IG9mZnNldCwgZm9yIGV4YW1wbGUgXCJFU1RcIiBvciBcIkVEVFwiLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBvZmZzZXROYW1lU2hvcnQoKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMsIHtcbiAgICAgICAgZm9ybWF0OiBcInNob3J0XCIsXG4gICAgICAgIGxvY2FsZTogdGhpcy5sb2NhbGUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbG9uZyBodW1hbiBuYW1lIGZvciB0aGUgem9uZSdzIGN1cnJlbnQgb2Zmc2V0LCBmb3IgZXhhbXBsZSBcIkVhc3Rlcm4gU3RhbmRhcmQgVGltZVwiIG9yIFwiRWFzdGVybiBEYXlsaWdodCBUaW1lXCIuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9mZnNldE5hbWVMb25nKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnpvbmUub2Zmc2V0TmFtZSh0aGlzLnRzLCB7XG4gICAgICAgIGZvcm1hdDogXCJsb25nXCIsXG4gICAgICAgIGxvY2FsZTogdGhpcy5sb2NhbGUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoaXMgem9uZSdzIG9mZnNldCBldmVyIGNoYW5nZXMsIGFzIGluIGEgRFNULlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc09mZnNldEZpeGVkKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnpvbmUuaXNVbml2ZXJzYWwgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB3aGV0aGVyIHRoZSBEYXRlVGltZSBpcyBpbiBhIERTVC5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNJbkRTVCgpIHtcbiAgICBpZiAodGhpcy5pc09mZnNldEZpeGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoeyBtb250aDogMSwgZGF5OiAxIH0pLm9mZnNldCB8fFxuICAgICAgICB0aGlzLm9mZnNldCA+IHRoaXMuc2V0KHsgbW9udGg6IDUgfSkub2Zmc2V0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhvc2UgRGF0ZVRpbWVzIHdoaWNoIGhhdmUgdGhlIHNhbWUgbG9jYWwgdGltZSBhcyB0aGlzIERhdGVUaW1lLCBidXQgYSBkaWZmZXJlbnQgb2Zmc2V0IGZyb20gVVRDXG4gICAqIGluIHRoaXMgRGF0ZVRpbWUncyB6b25lLiBEdXJpbmcgRFNUIGNoYW5nZXMgbG9jYWwgdGltZSBjYW4gYmUgYW1iaWd1b3VzLCBmb3IgZXhhbXBsZVxuICAgKiBgMjAyMy0xMC0yOVQwMjozMDowMGAgaW4gYEV1cm9wZS9CZXJsaW5gIGNhbiBoYXZlIG9mZnNldCBgKzAxOjAwYCBvciBgKzAyOjAwYC5cbiAgICogVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gYm90aCBwb3NzaWJsZSBEYXRlVGltZXMgaWYgdGhpcyBEYXRlVGltZSdzIGxvY2FsIHRpbWUgaXMgYW1iaWd1b3VzLlxuICAgKiBAcmV0dXJucyB7RGF0ZVRpbWVbXX1cbiAgICovXG4gIGdldFBvc3NpYmxlT2Zmc2V0cygpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCB0aGlzLmlzT2Zmc2V0Rml4ZWQpIHtcbiAgICAgIHJldHVybiBbdGhpc107XG4gICAgfVxuICAgIGNvbnN0IGRheU1zID0gODY0MDAwMDA7XG4gICAgY29uc3QgbWludXRlTXMgPSA2MDAwMDtcbiAgICBjb25zdCBsb2NhbFRTID0gb2JqVG9Mb2NhbFRTKHRoaXMuYyk7XG4gICAgY29uc3Qgb0VhcmxpZXIgPSB0aGlzLnpvbmUub2Zmc2V0KGxvY2FsVFMgLSBkYXlNcyk7XG4gICAgY29uc3Qgb0xhdGVyID0gdGhpcy56b25lLm9mZnNldChsb2NhbFRTICsgZGF5TXMpO1xuXG4gICAgY29uc3QgbzEgPSB0aGlzLnpvbmUub2Zmc2V0KGxvY2FsVFMgLSBvRWFybGllciAqIG1pbnV0ZU1zKTtcbiAgICBjb25zdCBvMiA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyAtIG9MYXRlciAqIG1pbnV0ZU1zKTtcbiAgICBpZiAobzEgPT09IG8yKSB7XG4gICAgICByZXR1cm4gW3RoaXNdO1xuICAgIH1cbiAgICBjb25zdCB0czEgPSBsb2NhbFRTIC0gbzEgKiBtaW51dGVNcztcbiAgICBjb25zdCB0czIgPSBsb2NhbFRTIC0gbzIgKiBtaW51dGVNcztcbiAgICBjb25zdCBjMSA9IHRzVG9PYmoodHMxLCBvMSk7XG4gICAgY29uc3QgYzIgPSB0c1RvT2JqKHRzMiwgbzIpO1xuICAgIGlmIChcbiAgICAgIGMxLmhvdXIgPT09IGMyLmhvdXIgJiZcbiAgICAgIGMxLm1pbnV0ZSA9PT0gYzIubWludXRlICYmXG4gICAgICBjMS5zZWNvbmQgPT09IGMyLnNlY29uZCAmJlxuICAgICAgYzEubWlsbGlzZWNvbmQgPT09IGMyLm1pbGxpc2Vjb25kXG4gICAgKSB7XG4gICAgICByZXR1cm4gW2Nsb25lKHRoaXMsIHsgdHM6IHRzMSB9KSwgY2xvbmUodGhpcywgeyB0czogdHMyIH0pXTtcbiAgICB9XG4gICAgcmV0dXJuIFt0aGlzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbiBhIGxlYXAgeWVhciwgZmFsc2Ugb3RoZXJ3aXNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYpLmlzSW5MZWFwWWVhciAvLz0+IHRydWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykuaXNJbkxlYXBZZWFyIC8vPT4gZmFsc2VcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNJbkxlYXBZZWFyKCkge1xuICAgIHJldHVybiBpc0xlYXBZZWFyKHRoaXMueWVhcik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIG1vbnRoXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYsIDIpLmRheXNJbk1vbnRoIC8vPT4gMjlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMykuZGF5c0luTW9udGggLy89PiAzMVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRheXNJbk1vbnRoKCkge1xuICAgIHJldHVybiBkYXlzSW5Nb250aCh0aGlzLnllYXIsIHRoaXMubW9udGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBkYXlzIGluIHRoaXMgRGF0ZVRpbWUncyB5ZWFyXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTYpLmRheXNJblllYXIgLy89PiAzNjZcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykuZGF5c0luWWVhciAvLz0+IDM2NVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRheXNJblllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGRheXNJblllYXIodGhpcy55ZWFyKSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fd2Vla19kYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMDQpLndlZWtzSW5XZWVrWWVhciAvLz0+IDUzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTMpLndlZWtzSW5XZWVrWWVhciAvLz0+IDUyXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla3NJbldlZWtZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB3ZWVrc0luV2Vla1llYXIodGhpcy53ZWVrWWVhcikgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHdlZWtzIGluIHRoaXMgRGF0ZVRpbWUncyBsb2NhbCB3ZWVrIHllYXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAyMCwgNiwge2xvY2FsZTogJ2VuLVVTJ30pLndlZWtzSW5Mb2NhbFdlZWtZZWFyIC8vPT4gNTJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAyMCwgNiwge2xvY2FsZTogJ2RlLURFJ30pLndlZWtzSW5Mb2NhbFdlZWtZZWFyIC8vPT4gNTNcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrc0luTG9jYWxXZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IHdlZWtzSW5XZWVrWWVhcihcbiAgICAgICAgICB0aGlzLmxvY2FsV2Vla1llYXIsXG4gICAgICAgICAgdGhpcy5sb2MuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCksXG4gICAgICAgICAgdGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKVxuICAgICAgICApXG4gICAgICA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSByZXNvbHZlZCBJbnRsIG9wdGlvbnMgZm9yIHRoaXMgRGF0ZVRpbWUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGluIHVuZGVyc3RhbmRpbmcgdGhlIGJlaGF2aW9yIG9mIGZvcm1hdHRpbmcgbWV0aG9kc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIHRoZSBzYW1lIG9wdGlvbnMgYXMgdG9Mb2NhbGVTdHJpbmdcbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgcmVzb2x2ZWRMb2NhbGVPcHRpb25zKG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIGNhbGVuZGFyIH0gPSBGb3JtYXR0ZXIuY3JlYXRlKFxuICAgICAgdGhpcy5sb2MuY2xvbmUob3B0cyksXG4gICAgICBvcHRzXG4gICAgKS5yZXNvbHZlZE9wdGlvbnModGhpcyk7XG4gICAgcmV0dXJuIHsgbG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyOiBjYWxlbmRhciB9O1xuICB9XG5cbiAgLy8gVFJBTlNGT1JNXG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBVVEMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICpcbiAgICogRXF1aXZhbGVudCB0byB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0oJ3V0YycpXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb2Zmc2V0PTBdIC0gb3B0aW9uYWxseSwgYW4gb2Zmc2V0IGZyb20gVVRDIGluIG1pbnV0ZXNcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzPXt9XSAtIG9wdGlvbnMgdG8gcGFzcyB0byBgc2V0Wm9uZSgpYFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHRvVVRDKG9mZnNldCA9IDAsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLnNldFpvbmUoRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKG9mZnNldCksIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byB0aGUgaG9zdCdzIGxvY2FsIHpvbmUuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICpcbiAgICogRXF1aXZhbGVudCB0byBgc2V0Wm9uZSgnbG9jYWwnKWBcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICB0b0xvY2FsKCkge1xuICAgIHJldHVybiB0aGlzLnNldFpvbmUoU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIERhdGVUaW1lJ3Mgem9uZSB0byBzcGVjaWZpZWQgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgc2V0dGVyIGtlZXBzIHRoZSB1bmRlcmx5aW5nIHRpbWUgdGhlIHNhbWUgKGFzIGluLCB0aGUgc2FtZSB0aW1lc3RhbXApLCBidXQgdGhlIG5ldyBpbnN0YW5jZSB3aWxsIHJlcG9ydCBkaWZmZXJlbnQgbG9jYWwgdGltZXMgYW5kIGNvbnNpZGVyIERTVHMgd2hlbiBtYWtpbmcgY29tcHV0YXRpb25zLCBhcyB3aXRoIHtAbGluayBEYXRlVGltZSNwbHVzfS4gWW91IG1heSB3aXNoIHRvIHVzZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbH0gYW5kIHtAbGluayBEYXRlVGltZSN0b1VUQ30gd2hpY2ggcHJvdmlkZSBzaW1wbGUgY29udmVuaWVuY2Ugd3JhcHBlcnMgZm9yIGNvbW1vbmx5IHVzZWQgem9uZXMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFt6b25lPSdsb2NhbCddIC0gYSB6b25lIGlkZW50aWZpZXIuIEFzIGEgc3RyaW5nLCB0aGF0IGNhbiBiZSBhbnkgSUFOQSB6b25lIHN1cHBvcnRlZCBieSB0aGUgaG9zdCBlbnZpcm9ubWVudCwgb3IgYSBmaXhlZC1vZmZzZXQgbmFtZSBvZiB0aGUgZm9ybSAnVVRDKzMnLCBvciB0aGUgc3RyaW5ncyAnbG9jYWwnIG9yICd1dGMnLiBZb3UgbWF5IGFsc28gc3VwcGx5IGFuIGluc3RhbmNlIG9mIGEge0BsaW5rIERhdGVUaW1lI1pvbmV9IGNsYXNzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5rZWVwTG9jYWxUaW1lPWZhbHNlXSAtIElmIHRydWUsIGFkanVzdCB0aGUgdW5kZXJseWluZyB0aW1lIHNvIHRoYXQgdGhlIGxvY2FsIHRpbWUgc3RheXMgdGhlIHNhbWUsIGJ1dCBpbiB0aGUgdGFyZ2V0IHpvbmUuIFlvdSBzaG91bGQgcmFyZWx5IG5lZWQgdGhpcy5cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzZXRab25lKHpvbmUsIHsga2VlcExvY2FsVGltZSA9IGZhbHNlLCBrZWVwQ2FsZW5kYXJUaW1lID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgem9uZSA9IG5vcm1hbGl6ZVpvbmUoem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICAgIGlmICh6b25lLmVxdWFscyh0aGlzLnpvbmUpKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2UgaWYgKCF6b25lLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBuZXdUUyA9IHRoaXMudHM7XG4gICAgICBpZiAoa2VlcExvY2FsVGltZSB8fCBrZWVwQ2FsZW5kYXJUaW1lKSB7XG4gICAgICAgIGNvbnN0IG9mZnNldEd1ZXNzID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIGNvbnN0IGFzT2JqID0gdGhpcy50b09iamVjdCgpO1xuICAgICAgICBbbmV3VFNdID0gb2JqVG9UUyhhc09iaiwgb2Zmc2V0R3Vlc3MsIHpvbmUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdHM6IG5ld1RTLCB6b25lIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3Igb3V0cHV0Q2FsZW5kYXIuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BlcnRpZXMgLSB0aGUgcHJvcGVydGllcyB0byBzZXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnJlY29uZmlndXJlKHsgbG9jYWxlOiAnZW4tR0InIH0pXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgcmVjb25maWd1cmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jID0gdGhpcy5sb2MuY2xvbmUoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIgfSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgbG9jIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBKdXN0IGEgY29udmVuaWVudCBhbGlhcyBmb3IgcmVjb25maWd1cmUoeyBsb2NhbGUgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnNldExvY2FsZSgnZW4tR0InKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHNldExvY2FsZShsb2NhbGUpIHtcbiAgICByZXR1cm4gdGhpcy5yZWNvbmZpZ3VyZSh7IGxvY2FsZSB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIFlvdSBjYW4gb25seSBzZXQgdW5pdHMgd2l0aCB0aGlzIG1ldGhvZDsgZm9yIFwic2V0dGluZ1wiIG1ldGFkYXRhLCBzZWUge0BsaW5rIERhdGVUaW1lI3JlY29uZmlndXJlfSBhbmQge0BsaW5rIERhdGVUaW1lI3NldFpvbmV9LlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBhbHNvIHN1cHBvcnRzIHNldHRpbmcgbG9jYWxlLWJhc2VkIHdlZWsgdW5pdHMsIGkuZS4gYGxvY2FsV2Vla2RheWAsIGBsb2NhbFdlZWtOdW1iZXJgIGFuZCBgbG9jYWxXZWVrWWVhcmAuXG4gICAqIFRoZXkgY2Fubm90IGJlIG1peGVkIHdpdGggSVNPLXdlZWsgdW5pdHMgbGlrZSBgd2Vla2RheWAuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZXMgLSBhIG1hcHBpbmcgb2YgdW5pdHMgdG8gbnVtYmVyc1xuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDE3IH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IGhvdXI6IDgsIG1pbnV0ZTogMzAgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgd2Vla2RheTogNSB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB5ZWFyOiAyMDA1LCBvcmRpbmFsOiAyMzQgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzZXQodmFsdWVzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdCh2YWx1ZXMsIG5vcm1hbGl6ZVVuaXRXaXRoTG9jYWxXZWVrcyk7XG4gICAgY29uc3QgeyBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrIH0gPSB1c2VzTG9jYWxXZWVrVmFsdWVzKG5vcm1hbGl6ZWQsIHRoaXMubG9jKTtcblxuICAgIGNvbnN0IHNldHRpbmdXZWVrU3R1ZmYgPVxuICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrWWVhcikgfHxcbiAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla051bWJlcikgfHxcbiAgICAgICAgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQud2Vla2RheSksXG4gICAgICBjb250YWluc09yZGluYWwgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5vcmRpbmFsKSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yWWVhciA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLnllYXIpLFxuICAgICAgY29udGFpbnNHcmVnb3JNRCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm1vbnRoKSB8fCAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpLFxuICAgICAgY29udGFpbnNHcmVnb3IgPSBjb250YWluc0dyZWdvclllYXIgfHwgY29udGFpbnNHcmVnb3JNRCxcbiAgICAgIGRlZmluaXRlV2Vla0RlZiA9IG5vcm1hbGl6ZWQud2Vla1llYXIgfHwgbm9ybWFsaXplZC53ZWVrTnVtYmVyO1xuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIGxldCBtaXhlZDtcbiAgICBpZiAoc2V0dGluZ1dlZWtTdHVmZikge1xuICAgICAgbWl4ZWQgPSB3ZWVrVG9HcmVnb3JpYW4oXG4gICAgICAgIHsgLi4uZ3JlZ29yaWFuVG9XZWVrKHRoaXMuYywgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2VlayksIC4uLm5vcm1hbGl6ZWQgfSxcbiAgICAgICAgbWluRGF5c0luRmlyc3RXZWVrLFxuICAgICAgICBzdGFydE9mV2Vla1xuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpKSB7XG4gICAgICBtaXhlZCA9IG9yZGluYWxUb0dyZWdvcmlhbih7IC4uLmdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLCAuLi5ub3JtYWxpemVkIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBtaXhlZCA9IHsgLi4udGhpcy50b09iamVjdCgpLCAuLi5ub3JtYWxpemVkIH07XG5cbiAgICAgIC8vIGlmIHdlIGRpZG4ndCBzZXQgdGhlIGRheSBidXQgd2UgZW5kZWQgdXAgb24gYW4gb3ZlcmZsb3cgZGF0ZSxcbiAgICAgIC8vIHVzZSB0aGUgbGFzdCBkYXkgb2YgdGhlIHJpZ2h0IG1vbnRoXG4gICAgICBpZiAoaXNVbmRlZmluZWQobm9ybWFsaXplZC5kYXkpKSB7XG4gICAgICAgIG1peGVkLmRheSA9IE1hdGgubWluKGRheXNJbk1vbnRoKG1peGVkLnllYXIsIG1peGVkLm1vbnRoKSwgbWl4ZWQuZGF5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbdHMsIG9dID0gb2JqVG9UUyhtaXhlZCwgdGhpcy5vLCB0aGlzLnpvbmUpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHRzLCBvIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIHBlcmlvZCBvZiB0aW1lIHRvIHRoaXMgRGF0ZVRpbWUgYW5kIHJldHVybiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lXG4gICAqXG4gICAqIEFkZGluZyBob3VycywgbWludXRlcywgc2Vjb25kcywgb3IgbWlsbGlzZWNvbmRzIGluY3JlYXNlcyB0aGUgdGltZXN0YW1wIGJ5IHRoZSByaWdodCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLiBBZGRpbmcgZGF5cywgbW9udGhzLCBvciB5ZWFycyBzaGlmdHMgdGhlIGNhbGVuZGFyLCBhY2NvdW50aW5nIGZvciBEU1RzIGFuZCBsZWFwIHllYXJzIGFsb25nIHRoZSB3YXkuIFRodXMsIGBkdC5wbHVzKHsgaG91cnM6IDI0IH0pYCBtYXkgcmVzdWx0IGluIGEgZGlmZmVyZW50IHRpbWUgdGhhbiBgZHQucGx1cyh7IGRheXM6IDEgfSlgIGlmIHRoZXJlJ3MgYSBEU1Qgc2hpZnQgaW4gYmV0d2Vlbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gYWRkLiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKDEyMykgLy9+PiBpbiAxMjMgbWlsbGlzZWNvbmRzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBtaW51dGVzOiAxNSB9KSAvL34+IGluIDE1IG1pbnV0ZXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkgLy9+PiB0aGlzIHRpbWUgdG9tb3Jyb3dcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IC0xIH0pIC8vfj4gdGhpcyB0aW1lIHllc3RlcmRheVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pIC8vfj4gaW4gMyBociwgMTMgbWluXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAzLCBtaW51dGVzOiAxMyB9KSkgLy9+PiBpbiAzIGhyLCAxMyBtaW5cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBwbHVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCBhZGp1c3RUaW1lKHRoaXMsIGR1cikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0IGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNwbHVzfVxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBzdWJ0cmFjdC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgbWludXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbikubmVnYXRlKCk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBiZWdpbm5pbmcgb2YgYSB1bml0IG9mIHRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGJlZ2lubmluZyBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXNlTG9jYWxlV2Vla3M9ZmFsc2VdIC0gSWYgdHJ1ZSwgdXNlIHdlZWtzIGJhc2VkIG9uIHRoZSBsb2NhbGUsIGkuZS4gdXNlIHRoZSBsb2NhbGUtZGVwZW5kZW50IHN0YXJ0IG9mIHRoZSB3ZWVrXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ21vbnRoJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDEnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLnN0YXJ0T2YoJ3llYXInKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMS0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignd2VlaycpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAzLTAzJywgd2Vla3MgYWx3YXlzIHN0YXJ0IG9uIE1vbmRheXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2RheScpLnRvSVNPVGltZSgpOyAvLz0+ICcwMDowMC4wMDAtMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMsIDUsIDMwKS5zdGFydE9mKCdob3VyJykudG9JU09UaW1lKCk7IC8vPT4gJzA1OjAwOjAwLjAwMC0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGFydE9mKHVuaXQsIHsgdXNlTG9jYWxlV2Vla3MgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBvID0ge30sXG4gICAgICBub3JtYWxpemVkVW5pdCA9IER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQodW5pdCk7XG4gICAgc3dpdGNoIChub3JtYWxpemVkVW5pdCkge1xuICAgICAgY2FzZSBcInllYXJzXCI6XG4gICAgICAgIG8ubW9udGggPSAxO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcInF1YXJ0ZXJzXCI6XG4gICAgICBjYXNlIFwibW9udGhzXCI6XG4gICAgICAgIG8uZGF5ID0gMTtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJ3ZWVrc1wiOlxuICAgICAgY2FzZSBcImRheXNcIjpcbiAgICAgICAgby5ob3VyID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJob3Vyc1wiOlxuICAgICAgICBvLm1pbnV0ZSA9IDA7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwibWludXRlc1wiOlxuICAgICAgICBvLnNlY29uZCA9IDA7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwic2Vjb25kc1wiOlxuICAgICAgICBvLm1pbGxpc2Vjb25kID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwibWlsbGlzZWNvbmRzXCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gbm8gZGVmYXVsdCwgaW52YWxpZCB1bml0cyB0aHJvdyBpbiBub3JtYWxpemVVbml0KClcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZFVuaXQgPT09IFwid2Vla3NcIikge1xuICAgICAgaWYgKHVzZUxvY2FsZVdlZWtzKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZXZWVrID0gdGhpcy5sb2MuZ2V0U3RhcnRPZldlZWsoKTtcbiAgICAgICAgY29uc3QgeyB3ZWVrZGF5IH0gPSB0aGlzO1xuICAgICAgICBpZiAod2Vla2RheSA8IHN0YXJ0T2ZXZWVrKSB7XG4gICAgICAgICAgby53ZWVrTnVtYmVyID0gdGhpcy53ZWVrTnVtYmVyIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBvLndlZWtkYXkgPSBzdGFydE9mV2VlaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG8ud2Vla2RheSA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRVbml0ID09PSBcInF1YXJ0ZXJzXCIpIHtcbiAgICAgIGNvbnN0IHEgPSBNYXRoLmNlaWwodGhpcy5tb250aCAvIDMpO1xuICAgICAgby5tb250aCA9IChxIC0gMSkgKiAzICsgMTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZXQobyk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGlzIERhdGVUaW1lIHRvIHRoZSBlbmQgKG1lYW5pbmcgdGhlIGxhc3QgbWlsbGlzZWNvbmQpIG9mIGEgdW5pdCBvZiB0aW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gVGhlIHVuaXQgdG8gZ28gdG8gdGhlIGVuZCBvZi4gQ2FuIGJlICd5ZWFyJywgJ3F1YXJ0ZXInLCAnbW9udGgnLCAnd2VlaycsICdkYXknLCAnaG91cicsICdtaW51dGUnLCAnc2Vjb25kJywgb3IgJ21pbGxpc2Vjb25kJy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXNlTG9jYWxlV2Vla3M9ZmFsc2VdIC0gSWYgdHJ1ZSwgdXNlIHdlZWtzIGJhc2VkIG9uIHRoZSBsb2NhbGUsIGkuZS4gdXNlIHRoZSBsb2NhbGUtZGVwZW5kZW50IHN0YXJ0IG9mIHRoZSB3ZWVrXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCdtb250aCcpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMzFUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZigneWVhcicpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMTItMzFUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5lbmRPZignd2VlaycpLnRvSVNPKCk7IC8vID0+ICcyMDE0LTAzLTA5VDIzOjU5OjU5Ljk5OS0wNTowMCcsIHdlZWtzIHN0YXJ0IG9uIE1vbmRheXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdkYXknKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDIzOjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLmVuZE9mKCdob3VyJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0wM1QwNTo1OTo1OS45OTktMDU6MDAnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgZW5kT2YodW5pdCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gdGhpcy5wbHVzKHsgW3VuaXRdOiAxIH0pXG4gICAgICAgICAgLnN0YXJ0T2YodW5pdCwgb3B0cylcbiAgICAgICAgICAubWludXMoMSlcbiAgICAgIDogdGhpcztcbiAgfVxuXG4gIC8vIE9VVFBVVFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdCBzdHJpbmcuXG4gICAqICoqWW91IG1heSBub3Qgd2FudCB0aGlzLioqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvciBhIG1vcmUgZmxleGlibGUgZm9ybWF0dGluZyB0b29sLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9mb3JtYXR0aW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIERlZmF1bHRzIHRvIGVuLVVTIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWQsIHJlZ2FyZGxlc3Mgb2YgdGhlIHN5c3RlbSdzIGxvY2FsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJykgLy89PiAnMjAxNyBBcHIgMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZSgnZnInKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnKSAvLz0+ICcyMDE3IGF2ci4gMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcsIHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiAnMjAxNyBhdnIuIDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcIkhIICdob3VycyBhbmQnIG1tICdtaW51dGVzJ1wiKSAvLz0+ICcyMCBob3VycyBhbmQgNTUgbWludXRlcydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Gb3JtYXQoZm10LCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MucmVkZWZhdWx0VG9FTihvcHRzKSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKHRoaXMsIGZtdClcbiAgICAgIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbG9jYWxpemVkIHN0cmluZyByZXByZXNlbnRpbmcgdGhpcyBkYXRlLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXMgYERhdGVUaW1lLkRBVEVfRlVMTGAgb3IgYERhdGVUaW1lLlRJTUVfU0lNUExFYC5cbiAgICogVGhlIGV4YWN0IGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kIGlzIGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBpbiBnZW5lcmFsIGl0IHdpbGwgcmV0dXJuIGFuIGFwcHJvcHJpYXRlIHJlcHJlc2VudGF0aW9uXG4gICAqIG9mIHRoZSBEYXRlVGltZSBpbiB0aGUgYXNzaWduZWQgbG9jYWxlLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0gZm9ybWF0T3B0cyB7T2JqZWN0fSAtIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucyBhbmQgY29uZmlndXJhdGlvbiBvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0cyB0byBvdmVycmlkZSB0aGUgY29uZmlndXJhdGlvbiBvcHRpb25zIG9uIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiA0LzIwLzIwMTdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCdlbi1nYicpLnRvTG9jYWxlU3RyaW5nKCk7IC8vPT4gJzIwLzA0LzIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCk7IC8vPT4gJ0FwcmlsIDIwLCAyMDE3J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFX0ZVTEwsIHsgbG9jYWxlOiAnZnInIH0pOyAvLz0+ICcyOCBhb1x1MDBGQnQgMjAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpOyAvLz0+ICcxMTozMiBBTSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURVRJTUVfU0hPUlQpOyAvLz0+ICc0LzIwLzIwMTcsIDExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdsb25nJywgbW9udGg6ICdsb25nJywgZGF5OiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodXJzZGF5LCBBcHJpbCAyMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyB3ZWVrZGF5OiAnc2hvcnQnLCBtb250aDogJ3Nob3J0JywgZGF5OiAnMi1kaWdpdCcsIGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcgfSk7IC8vPT4gJ1RodSwgQXByIDIwLCAxMToyNyBBTSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoeyBob3VyOiAnMi1kaWdpdCcsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyQ3ljbGU6ICdoMjMnIH0pOyAvLz0+ICcxMTozMidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Mb2NhbGVTdHJpbmcoZm9ybWF0T3B0cyA9IEZvcm1hdHMuREFURV9TSE9SVCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLmNsb25lKG9wdHMpLCBmb3JtYXRPcHRzKS5mb3JtYXREYXRlVGltZSh0aGlzKVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZm9ybWF0IFwicGFydHNcIiwgbWVhbmluZyBpbmRpdmlkdWFsIHRva2VucyBhbG9uZyB3aXRoIG1ldGFkYXRhLiBUaGlzIGlzIGFsbG93cyBjYWxsZXJzIHRvIHBvc3QtcHJvY2VzcyBpbmRpdmlkdWFsIHNlY3Rpb25zIG9mIHRoZSBmb3JtYXR0ZWQgb3V0cHV0LlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdC9mb3JtYXRUb1BhcnRzXG4gICAqIEBwYXJhbSBvcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zLCBzYW1lIGFzIGB0b0xvY2FsZVN0cmluZ2AuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlUGFydHMoKTsgLy89PiBbXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnZGF5JywgdmFsdWU6ICcyNScgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdsaXRlcmFsJywgdmFsdWU6ICcvJyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ21vbnRoJywgdmFsdWU6ICcwNScgfSxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdsaXRlcmFsJywgdmFsdWU6ICcvJyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ3llYXInLCB2YWx1ZTogJzE5ODInIH1cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gXVxuICAgKi9cbiAgdG9Mb2NhbGVQYXJ0cyhvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIG9wdHMpLmZvcm1hdERhdGVUaW1lUGFydHModGhpcylcbiAgICAgIDogW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPWZhbHNlXSAtIGFkZCB0aGUgdGltZSB6b25lIGZvcm1hdCBleHRlbnNpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgzLCA1LCAyNSkudG9JU08oKSAvLz0+ICcxOTgyLTA1LTI1VDAwOjAwOjAwLjAwMFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKCkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKHsgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgLy89PiAnMjAxNy0wNC0yMlQyMDo0NzowNS4zMzUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvSVNPKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzIwMTcwNDIyVDIwNDcwNS4zMzUtMDQwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU08oe1xuICAgIGZvcm1hdCA9IFwiZXh0ZW5kZWRcIixcbiAgICBzdXBwcmVzc1NlY29uZHMgPSBmYWxzZSxcbiAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLFxuICAgIGluY2x1ZGVPZmZzZXQgPSB0cnVlLFxuICAgIGV4dGVuZGVkWm9uZSA9IGZhbHNlLFxuICB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ID0gZm9ybWF0ID09PSBcImV4dGVuZGVkXCI7XG5cbiAgICBsZXQgYyA9IHRvSVNPRGF0ZSh0aGlzLCBleHQpO1xuICAgIGMgKz0gXCJUXCI7XG4gICAgYyArPSB0b0lTT1RpbWUodGhpcywgZXh0LCBzdXBwcmVzc1NlY29uZHMsIHN1cHByZXNzTWlsbGlzZWNvbmRzLCBpbmNsdWRlT2Zmc2V0LCBleHRlbmRlZFpvbmUpO1xuICAgIHJldHVybiBjO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgZGF0ZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5mb3JtYXQ9J2V4dGVuZGVkJ10gLSBjaG9vc2UgYmV0d2VlbiB0aGUgYmFzaWMgYW5kIGV4dGVuZGVkIGZvcm1hdFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMTk4MiwgNSwgMjUpLnRvSVNPRGF0ZSgpIC8vPT4gJzE5ODItMDUtMjUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09EYXRlKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzE5ODIwNTI1J1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTT0RhdGUoeyBmb3JtYXQgPSBcImV4dGVuZGVkXCIgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgZm9ybWF0ID09PSBcImV4dGVuZGVkXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3Mgd2VlayBkYXRlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09XZWVrRGF0ZSgpIC8vPT4gJzE5ODItVzIxLTInXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPV2Vla0RhdGUoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCBcImtra2stJ1cnV1ctY1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSdzIHRpbWUgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmV4dGVuZGVkWm9uZT10cnVlXSAtIGFkZCB0aGUgdGltZSB6b25lIGZvcm1hdCBleHRlbnNpb25cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKCkgLy89PiAnMDc6MzQ6MTkuMzYxWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCwgc2Vjb25kczogMCwgbWlsbGlzZWNvbmRzOiAwIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcwNzozNFonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzA3MzQxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0IH0pLnRvSVNPVGltZSh7IGluY2x1ZGVQcmVmaXg6IHRydWUgfSkgLy89PiAnVDA3OjM0OjE5LjM2MVonXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPVGltZSh7XG4gICAgc3VwcHJlc3NNaWxsaXNlY29uZHMgPSBmYWxzZSxcbiAgICBzdXBwcmVzc1NlY29uZHMgPSBmYWxzZSxcbiAgICBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSxcbiAgICBpbmNsdWRlUHJlZml4ID0gZmFsc2UsXG4gICAgZXh0ZW5kZWRab25lID0gZmFsc2UsXG4gICAgZm9ybWF0ID0gXCJleHRlbmRlZFwiLFxuICB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IGMgPSBpbmNsdWRlUHJlZml4ID8gXCJUXCIgOiBcIlwiO1xuICAgIHJldHVybiAoXG4gICAgICBjICtcbiAgICAgIHRvSVNPVGltZShcbiAgICAgICAgdGhpcyxcbiAgICAgICAgZm9ybWF0ID09PSBcImV4dGVuZGVkXCIsXG4gICAgICAgIHN1cHByZXNzU2Vjb25kcyxcbiAgICAgICAgc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gICAgICAgIGluY2x1ZGVPZmZzZXQsXG4gICAgICAgIGV4dGVuZGVkWm9uZVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBSRkMgMjgyMi1jb21wYXRpYmxlIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9SRkMyODIyKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCArMDAwMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvUkZDMjgyMigpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgLTA0MDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvUkZDMjgyMigpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyBaWlpcIiwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEhUVFAgaGVhZGVycy4gVGhlIG91dHB1dCBpcyBhbHdheXMgZXhwcmVzc2VkIGluIEdNVC5cbiAgICogU3BlY2lmaWNhbGx5LCB0aGUgc3RyaW5nIGNvbmZvcm1zIHRvIFJGQyAxMTIzLlxuICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9Qcm90b2NvbHMvcmZjMjYxNi9yZmMyNjE2LXNlYzMuaHRtbCNzZWMzLjMuMVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMDA6MDA6MDAgR01UJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMsIDE5KS50b0hUVFAoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDE5OjAwOjAwIEdNVCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9IVFRQKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcy50b1VUQygpLCBcIkVFRSwgZGQgTExMIHl5eXkgSEg6bW06c3MgJ0dNVCdcIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1NRTERhdGUoKSAvLz0+ICcyMDE0LTA3LTEzJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1NRTERhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdG9JU09EYXRlKHRoaXMsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBUaW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXRTcGFjZT10cnVlXSAtIGluY2x1ZGUgdGhlIHNwYWNlIGJldHdlZW4gdGhlIHRpbWUgYW5kIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJzA1OjE1OjE2LjM0NSAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCgpIC8vPT4gJzA1OjE1OjE2LjM0NSAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKHsgaW5jbHVkZU9mZnNldDogZmFsc2UgfSkgLy89PiAnMDU6MTU6MTYuMzQ1J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b1NRTCh7IGluY2x1ZGVab25lOiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUgQW1lcmljYS9OZXdfWW9yaydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TUUxUaW1lKHsgaW5jbHVkZU9mZnNldCA9IHRydWUsIGluY2x1ZGVab25lID0gZmFsc2UsIGluY2x1ZGVPZmZzZXRTcGFjZSA9IHRydWUgfSA9IHt9KSB7XG4gICAgbGV0IGZtdCA9IFwiSEg6bW06c3MuU1NTXCI7XG5cbiAgICBpZiAoaW5jbHVkZVpvbmUgfHwgaW5jbHVkZU9mZnNldCkge1xuICAgICAgaWYgKGluY2x1ZGVPZmZzZXRTcGFjZSkge1xuICAgICAgICBmbXQgKz0gXCIgXCI7XG4gICAgICB9XG4gICAgICBpZiAoaW5jbHVkZVpvbmUpIHtcbiAgICAgICAgZm10ICs9IFwielwiO1xuICAgICAgfSBlbHNlIGlmIChpbmNsdWRlT2Zmc2V0KSB7XG4gICAgICAgIGZtdCArPSBcIlpaXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLCBmbXQsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIFNRTCBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlWm9uZT1mYWxzZV0gLSBpbmNsdWRlIHRoZSB6b25lLCBzdWNoIGFzICdBbWVyaWNhL05ld19Zb3JrJy4gT3ZlcnJpZGVzIGluY2x1ZGVPZmZzZXQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0U3BhY2U9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBzcGFjZSBiZXR3ZWVuIHRoZSB0aW1lIGFuZCB0aGUgb2Zmc2V0LCBzdWNoIGFzICcwNToxNToxNi4zNDUgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKCkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgLTA0OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgNywgMTMpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IHRydWUgfSkgLy89PiAnMjAxNC0wNy0xMyAwMDowMDowMC4wMDAgQW1lcmljYS9OZXdfWW9yaydcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TUUwob3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBgJHt0aGlzLnRvU1FMRGF0ZSgpfSAke3RoaXMudG9TUUxUaW1lKG9wdHMpfWA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudG9JU08oKSA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB0aGUgUkVQTC5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgW1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKV0oKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGBEYXRlVGltZSB7IHRzOiAke3RoaXMudG9JU08oKX0sIHpvbmU6ICR7dGhpcy56b25lLm5hbWV9LCBsb2NhbGU6ICR7dGhpcy5sb2NhbGV9IH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYERhdGVUaW1lIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLiBBbGlhcyBvZiB7QGxpbmsgRGF0ZVRpbWUjdG9NaWxsaXN9XG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHZhbHVlT2YoKSB7XG4gICAgcmV0dXJuIHRoaXMudG9NaWxsaXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBtaWxsaXNlY29uZHMgb2YgdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdG9NaWxsaXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b1NlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgLyAxMDAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIHNlY29uZHMgKGFzIGEgd2hvbGUgbnVtYmVyKSBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b1VuaXhJbnRlZ2VyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBNYXRoLmZsb29yKHRoaXMudHMgLyAxMDAwKSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBKU09OLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9JU08oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgQlNPTiBzZXJpYWxpemFibGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9CU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSlNEYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIEphdmFTY3JpcHQgb2JqZWN0IHdpdGggdGhpcyBEYXRlVGltZSdzIHllYXIsIG1vbnRoLCBkYXksIGFuZCBzbyBvbi5cbiAgICogQHBhcmFtIG9wdHMgLSBvcHRpb25zIGZvciBnZW5lcmF0aW5nIHRoZSBvYmplY3RcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlQ29uZmlnPWZhbHNlXSAtIGluY2x1ZGUgY29uZmlndXJhdGlvbiBhdHRyaWJ1dGVzIGluIHRoZSBvdXRwdXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9PYmplY3QoKSAvLz0+IHsgeWVhcjogMjAxNywgbW9udGg6IDQsIGRheTogMjIsIGhvdXI6IDIwLCBtaW51dGU6IDQ5LCBzZWNvbmQ6IDQyLCBtaWxsaXNlY29uZDogMjY4IH1cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgdG9PYmplY3Qob3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB7fTtcblxuICAgIGNvbnN0IGJhc2UgPSB7IC4uLnRoaXMuYyB9O1xuXG4gICAgaWYgKG9wdHMuaW5jbHVkZUNvbmZpZykge1xuICAgICAgYmFzZS5vdXRwdXRDYWxlbmRhciA9IHRoaXMub3V0cHV0Q2FsZW5kYXI7XG4gICAgICBiYXNlLm51bWJlcmluZ1N5c3RlbSA9IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbTtcbiAgICAgIGJhc2UubG9jYWxlID0gdGhpcy5sb2MubG9jYWxlO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBEYXRlIGVxdWl2YWxlbnQgdG8gdGhpcyBEYXRlVGltZS5cbiAgICogQHJldHVybiB7RGF0ZX1cbiAgICovXG4gIHRvSlNEYXRlKCkge1xuICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLmlzVmFsaWQgPyB0aGlzLnRzIDogTmFOKTtcbiAgfVxuXG4gIC8vIENPTVBBUkVcblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdHdvIERhdGVUaW1lcyBhcyBhIER1cmF0aW9uLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIERhdGVUaW1lIHRvIGNvbXBhcmUgdGhpcyBvbmUgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgYXJyYXkgb2YgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIGNyZWF0aW9uIG9mIHRoZSBEdXJhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuY29udmVyc2lvbkFjY3VyYWN5PSdjYXN1YWwnXSAtIHRoZSBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIGkxID0gRGF0ZVRpbWUuZnJvbUlTTygnMTk4Mi0wNS0yNVQwOTo0NScpLFxuICAgKiAgICAgaTIgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgzLTEwLTE0VDEwOjMwJyk7XG4gICAqIGkyLmRpZmYoaTEpLnRvT2JqZWN0KCkgLy89PiB7IG1pbGxpc2Vjb25kczogNDM4MDc1MDAwMDAgfVxuICAgKiBpMi5kaWZmKGkxLCAnaG91cnMnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTIxNjguNzUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LjAzMTI1IH1cbiAgICogaTIuZGlmZihpMSwgWydtb250aHMnLCAnZGF5cycsICdob3VycyddKS50b09iamVjdCgpIC8vPT4geyBtb250aHM6IDE2LCBkYXlzOiAxOSwgaG91cnM6IDAuNzUgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIGRpZmYob3RoZXJEYXRlVGltZSwgdW5pdCA9IFwibWlsbGlzZWNvbmRzXCIsIG9wdHMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8ICFvdGhlckRhdGVUaW1lLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwiY3JlYXRlZCBieSBkaWZmaW5nIGFuIGludmFsaWQgRGF0ZVRpbWVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZHVyT3B0cyA9IHsgbG9jYWxlOiB0aGlzLmxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtOiB0aGlzLm51bWJlcmluZ1N5c3RlbSwgLi4ub3B0cyB9O1xuXG4gICAgY29uc3QgdW5pdHMgPSBtYXliZUFycmF5KHVuaXQpLm1hcChEdXJhdGlvbi5ub3JtYWxpemVVbml0KSxcbiAgICAgIG90aGVySXNMYXRlciA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpID4gdGhpcy52YWx1ZU9mKCksXG4gICAgICBlYXJsaWVyID0gb3RoZXJJc0xhdGVyID8gdGhpcyA6IG90aGVyRGF0ZVRpbWUsXG4gICAgICBsYXRlciA9IG90aGVySXNMYXRlciA/IG90aGVyRGF0ZVRpbWUgOiB0aGlzLFxuICAgICAgZGlmZmVkID0gZGlmZihlYXJsaWVyLCBsYXRlciwgdW5pdHMsIGR1ck9wdHMpO1xuXG4gICAgcmV0dXJuIG90aGVySXNMYXRlciA/IGRpZmZlZC5uZWdhdGUoKSA6IGRpZmZlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGlzIERhdGVUaW1lIGFuZCByaWdodCBub3cuXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjZGlmZn1cbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IFt1bml0PVsnbWlsbGlzZWNvbmRzJ11dIC0gdGhlIHVuaXQgb3IgdW5pdHMgdW5pdHMgKHN1Y2ggYXMgJ2hvdXJzJyBvciAnZGF5cycpIHRvIGluY2x1ZGUgaW4gdGhlIGR1cmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIGRpZmZOb3codW5pdCA9IFwibWlsbGlzZWNvbmRzXCIsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmRpZmYoRGF0ZVRpbWUubm93KCksIHVuaXQsIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCBzcGFubmluZyBiZXR3ZWVuIHRoaXMgRGF0ZVRpbWUgYW5kIGFub3RoZXIgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBlbmQgcG9pbnQgb2YgdGhlIEludGVydmFsXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgdW50aWwob3RoZXJEYXRlVGltZSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHRoaXMsIG90aGVyRGF0ZVRpbWUpIDogdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIERhdGVUaW1lIGlzIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZSBhcyBhbm90aGVyIERhdGVUaW1lLlxuICAgKiBIaWdoZXItb3JkZXIgdW5pdHMgbXVzdCBhbHNvIGJlIGlkZW50aWNhbCBmb3IgdGhpcyBmdW5jdGlvbiB0byByZXR1cm4gYHRydWVgLlxuICAgKiBOb3RlIHRoYXQgdGltZSB6b25lcyBhcmUgKippZ25vcmVkKiogaW4gdGhpcyBjb21wYXJpc29uLCB3aGljaCBjb21wYXJlcyB0aGUgKipsb2NhbCoqIGNhbGVuZGFyIHRpbWUuIFVzZSB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0gdG8gY29udmVydCBvbmUgb2YgdGhlIGRhdGVzIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHtEYXRlVGltZX0gb3RoZXJEYXRlVGltZSAtIHRoZSBvdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY2hlY2sgc2FtZW5lc3Mgb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXNlTG9jYWxlV2Vla3M9ZmFsc2VdIC0gSWYgdHJ1ZSwgdXNlIHdlZWtzIGJhc2VkIG9uIHRoZSBsb2NhbGUsIGkuZS4gdXNlIHRoZSBsb2NhbGUtZGVwZW5kZW50IHN0YXJ0IG9mIHRoZSB3ZWVrOyBvbmx5IHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZSBpcyB1c2VkXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLmhhc1NhbWUob3RoZXJEVCwgJ2RheScpOyAvL34+IHRydWUgaWYgb3RoZXJEVCBpcyBpbiB0aGUgc2FtZSBjdXJyZW50IGNhbGVuZGFyIGRheVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaGFzU2FtZShvdGhlckRhdGVUaW1lLCB1bml0LCBvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGlucHV0TXMgPSBvdGhlckRhdGVUaW1lLnZhbHVlT2YoKTtcbiAgICBjb25zdCBhZGp1c3RlZFRvWm9uZSA9IHRoaXMuc2V0Wm9uZShvdGhlckRhdGVUaW1lLnpvbmUsIHsga2VlcExvY2FsVGltZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gKFxuICAgICAgYWRqdXN0ZWRUb1pvbmUuc3RhcnRPZih1bml0LCBvcHRzKSA8PSBpbnB1dE1zICYmIGlucHV0TXMgPD0gYWRqdXN0ZWRUb1pvbmUuZW5kT2YodW5pdCwgb3B0cylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEVxdWFsaXR5IGNoZWNrXG4gICAqIFR3byBEYXRlVGltZXMgYXJlIGVxdWFsIGlmIGFuZCBvbmx5IGlmIHRoZXkgcmVwcmVzZW50IHRoZSBzYW1lIG1pbGxpc2Vjb25kLCBoYXZlIHRoZSBzYW1lIHpvbmUgYW5kIGxvY2F0aW9uLCBhbmQgYXJlIGJvdGggdmFsaWQuXG4gICAqIFRvIGNvbXBhcmUganVzdCB0aGUgbWlsbGlzZWNvbmQgdmFsdWVzLCB1c2UgYCtkdDEgPT09ICtkdDJgLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlciAtIHRoZSBvdGhlciBEYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuaXNWYWxpZCAmJlxuICAgICAgb3RoZXIuaXNWYWxpZCAmJlxuICAgICAgdGhpcy52YWx1ZU9mKCkgPT09IG90aGVyLnZhbHVlT2YoKSAmJlxuICAgICAgdGhpcy56b25lLmVxdWFscyhvdGhlci56b25lKSAmJlxuICAgICAgdGhpcy5sb2MuZXF1YWxzKG90aGVyLmxvYylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSB0aGlzIHRpbWUgcmVsYXRpdmUgdG8gbm93LCBzdWNoIGFzIFwiaW4gdHdvIGRheXNcIi4gQ2FuIG9ubHkgaW50ZXJuYXRpb25hbGl6ZSBpZiB5b3VyXG4gICAqIHBsYXRmb3JtIHN1cHBvcnRzIEludGwuUmVsYXRpdmVUaW1lRm9ybWF0LiBSb3VuZHMgZG93biBieSBkZWZhdWx0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBbb3B0aW9ucy5iYXNlPURhdGVUaW1lLm5vdygpXSAtIHRoZSBEYXRlVGltZSB0byB1c2UgYXMgdGhlIGJhc2lzIHRvIHdoaWNoIHRoaXMgdGltZSBpcyBjb21wYXJlZC4gRGVmYXVsdHMgdG8gbm93LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc3R5bGU9XCJsb25nXCJdIC0gdGhlIHN0eWxlIG9mIHVuaXRzLCBtdXN0IGJlIFwibG9uZ1wiLCBcInNob3J0XCIsIG9yIFwibmFycm93XCJcbiAgICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IG9wdGlvbnMudW5pdCAtIHVzZSBhIHNwZWNpZmljIHVuaXQgb3IgYXJyYXkgb2YgdW5pdHM7IGlmIG9taXR0ZWQsIG9yIGFuIGFycmF5LCB0aGUgbWV0aG9kIHdpbGwgcGljayB0aGUgYmVzdCB1bml0LiBVc2UgYW4gYXJyYXkgb3Igb25lIG9mIFwieWVhcnNcIiwgXCJxdWFydGVyc1wiLCBcIm1vbnRoc1wiLCBcIndlZWtzXCIsIFwiZGF5c1wiLCBcImhvdXJzXCIsIFwibWludXRlc1wiLCBvciBcInNlY29uZHNcIlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnJvdW5kPXRydWVdIC0gd2hldGhlciB0byByb3VuZCB0aGUgbnVtYmVycyBpbiB0aGUgb3V0cHV0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMucGFkZGluZz0wXSAtIHBhZGRpbmcgaW4gbWlsbGlzZWNvbmRzLiBUaGlzIGFsbG93cyB5b3UgdG8gcm91bmQgdXAgdGhlIHJlc3VsdCBpZiBpdCBmaXRzIGluc2lkZSB0aGUgdGhyZXNob2xkLiBEb24ndCB1c2UgaW4gY29tYmluYXRpb24gd2l0aCB7cm91bmQ6IGZhbHNlfSBiZWNhdXNlIHRoZSBkZWNpbWFsIG91dHB1dCB3aWxsIGluY2x1ZGUgdGhlIHBhZGRpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSBvdmVycmlkZSB0aGUgbnVtYmVyaW5nU3lzdGVtIG9mIHRoaXMgRGF0ZVRpbWUuIFRoZSBJbnRsIHN5c3RlbSBtYXkgY2hvb3NlIG5vdCB0byBob25vciB0aGlzXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoKSAvLz0+IFwiaW4gMSBkYXlcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoXCJlc1wiKS50b1JlbGF0aXZlKHsgZGF5czogMSB9KSAvLz0+IFwiZGVudHJvIGRlIDEgZFx1MDBFRGFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiBcImRhbnMgMjMgaGV1cmVzXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoKSAvLz0+IFwiMiBkYXlzIGFnb1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlKHsgdW5pdDogXCJob3Vyc1wiIH0pIC8vPT4gXCI0OCBob3VycyBhZ29cIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGhvdXJzOiAzNiB9KS50b1JlbGF0aXZlKHsgcm91bmQ6IGZhbHNlIH0pIC8vPT4gXCIxLjUgZGF5cyBhZ29cIlxuICAgKi9cbiAgdG9SZWxhdGl2ZShvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYmFzZSA9IG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7IHpvbmU6IHRoaXMuem9uZSB9KSxcbiAgICAgIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgPyAodGhpcyA8IGJhc2UgPyAtb3B0aW9ucy5wYWRkaW5nIDogb3B0aW9ucy5wYWRkaW5nKSA6IDA7XG4gICAgbGV0IHVuaXRzID0gW1wieWVhcnNcIiwgXCJtb250aHNcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiXTtcbiAgICBsZXQgdW5pdCA9IG9wdGlvbnMudW5pdDtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLnVuaXQpKSB7XG4gICAgICB1bml0cyA9IG9wdGlvbnMudW5pdDtcbiAgICAgIHVuaXQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiBkaWZmUmVsYXRpdmUoYmFzZSwgdGhpcy5wbHVzKHBhZGRpbmcpLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgbnVtZXJpYzogXCJhbHdheXNcIixcbiAgICAgIHVuaXRzLFxuICAgICAgdW5pdCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgZGF0ZSByZWxhdGl2ZSB0byB0b2RheSwgc3VjaCBhcyBcInllc3RlcmRheVwiIG9yIFwibmV4dCBtb250aFwiLlxuICAgKiBPbmx5IGludGVybmF0aW9uYWxpemVzIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnRzIEludGwuUmVsYXRpdmVUaW1lRm9ybWF0LlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGhhdCBhZmZlY3QgdGhlIG91dHB1dFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBbb3B0aW9ucy5iYXNlPURhdGVUaW1lLm5vdygpXSAtIHRoZSBEYXRlVGltZSB0byB1c2UgYXMgdGhlIGJhc2lzIHRvIHdoaWNoIHRoaXMgdGltZSBpcyBjb21wYXJlZC4gRGVmYXVsdHMgdG8gbm93LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5sb2NhbGUgLSBvdmVycmlkZSB0aGUgbG9jYWxlIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMudW5pdCAtIHVzZSBhIHNwZWNpZmljIHVuaXQ7IGlmIG9taXR0ZWQsIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSB1bml0LiBVc2Ugb25lIG9mIFwieWVhcnNcIiwgXCJxdWFydGVyc1wiLCBcIm1vbnRoc1wiLCBcIndlZWtzXCIsIG9yIFwiZGF5c1wiXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKCkgLy89PiBcInRvbW9ycm93XCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKFwiZXNcIikucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJcIm1hXHUwMEYxYW5hXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZUNhbGVuZGFyKHsgbG9jYWxlOiBcImZyXCIgfSkgLy89PiBcImRlbWFpblwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgZGF5czogMiB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoKSAvLz0+IFwiMiBkYXlzIGFnb1wiXG4gICAqL1xuICB0b1JlbGF0aXZlQ2FsZW5kYXIob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuXG4gICAgcmV0dXJuIGRpZmZSZWxhdGl2ZShvcHRpb25zLmJhc2UgfHwgRGF0ZVRpbWUuZnJvbU9iamVjdCh7fSwgeyB6b25lOiB0aGlzLnpvbmUgfSksIHRoaXMsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBudW1lcmljOiBcImF1dG9cIixcbiAgICAgIHVuaXRzOiBbXCJ5ZWFyc1wiLCBcIm1vbnRoc1wiLCBcImRheXNcIl0sXG4gICAgICBjYWxlbmRhcnk6IHRydWUsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtaW4gb2Ygc2V2ZXJhbCBkYXRlIHRpbWVzXG4gICAqIEBwYXJhbSB7Li4uRGF0ZVRpbWV9IGRhdGVUaW1lcyAtIHRoZSBEYXRlVGltZXMgZnJvbSB3aGljaCB0byBjaG9vc2UgdGhlIG1pbmltdW1cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9IHRoZSBtaW4gRGF0ZVRpbWUsIG9yIHVuZGVmaW5lZCBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudFxuICAgKi9cbiAgc3RhdGljIG1pbiguLi5kYXRlVGltZXMpIHtcbiAgICBpZiAoIWRhdGVUaW1lcy5ldmVyeShEYXRlVGltZS5pc0RhdGVUaW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibWluIHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgKGkpID0+IGkudmFsdWVPZigpLCBNYXRoLm1pbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtYXggb2Ygc2V2ZXJhbCBkYXRlIHRpbWVzXG4gICAqIEBwYXJhbSB7Li4uRGF0ZVRpbWV9IGRhdGVUaW1lcyAtIHRoZSBEYXRlVGltZXMgZnJvbSB3aGljaCB0byBjaG9vc2UgdGhlIG1heGltdW1cbiAgICogQHJldHVybiB7RGF0ZVRpbWV9IHRoZSBtYXggRGF0ZVRpbWUsIG9yIHVuZGVmaW5lZCBpZiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudFxuICAgKi9cbiAgc3RhdGljIG1heCguLi5kYXRlVGltZXMpIHtcbiAgICBpZiAoIWRhdGVUaW1lcy5ldmVyeShEYXRlVGltZS5pc0RhdGVUaW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibWF4IHJlcXVpcmVzIGFsbCBhcmd1bWVudHMgYmUgRGF0ZVRpbWVzXCIpO1xuICAgIH1cbiAgICByZXR1cm4gYmVzdEJ5KGRhdGVUaW1lcywgKGkpID0+IGkudmFsdWVPZigpLCBNYXRoLm1heCk7XG4gIH1cblxuICAvLyBNSVNDXG5cbiAgLyoqXG4gICAqIEV4cGxhaW4gaG93IGEgc3RyaW5nIHdvdWxkIGJlIHBhcnNlZCBieSBmcm9tRm9ybWF0KClcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHRoZSBzdHJpbmcgaXMgZXhwZWN0ZWQgdG8gYmUgaW4gKHNlZSBkZXNjcmlwdGlvbilcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBvcHRpb25zIHRha2VuIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdGlvbnMsXG4gICAgICBsb2NhbGVUb1VzZSA9IExvY2FsZS5mcm9tT3B0cyh7XG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBkZWZhdWx0VG9FTjogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIHJldHVybiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgZnJvbUZvcm1hdEV4cGxhaW4gaW5zdGVhZFxuICAgKi9cbiAgc3RhdGljIGZyb21TdHJpbmdFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21Gb3JtYXRFeHBsYWluKHRleHQsIGZtdCwgb3B0aW9ucyk7XG4gIH1cblxuICAvLyBGT1JNQVQgUFJFU0VUU1xuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlIDEwLzE0LzE5ODNcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9TSE9SVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX1NIT1JUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MydcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9NRUQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9NRUQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCBPY3QgMTQsIDE5ODMnXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX01FRF9XSVRIX1dFRUtEQVk7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MydcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9GVUxMKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfRlVMTDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdUdWVzZGF5LCBPY3RvYmVyIDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX0hVR0UoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9IVUdFO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfU0lNUExFKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfU0lNUExFO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FX1dJVEhfU0hPUlRfT0ZGU0VUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfV0lUSF9TSE9SVF9PRkZTRVQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9MT05HX09GRlNFVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FX1dJVEhfTE9OR19PRkZTRVQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzAnLCBhbHdheXMgMjQtaG91ci5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV8yNF9TSU1QTEUoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV8yNF9TSU1QTEU7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMnLCBhbHdheXMgMjQtaG91ci5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV8yNF9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgRURUJywgYWx3YXlzIDI0LWhvdXIuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLCBhbHdheXMgMjQtaG91ci5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9MT05HX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcxMC8xNC8xOTgzLCA5OjMwIEFNJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX1NIT1JUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX1NIT1JUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzA6MzMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX1NIT1JUX1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3QgMTQsIDE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfTUVEKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX01FRDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3QgMTQsIDE5ODMsIDk6MzA6MzMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaSwgMTQgT2N0IDE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfTUVEX1dJVEhfV0VFS0RBWSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9XRUVLREFZO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzAgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTEwoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfRlVMTDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzLCA5OjMwOjMzIEFNIEVEVCcuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmlkYXksIE9jdG9iZXIgMTQsIDE5ODMsIDk6MzAgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0UoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfSFVHRTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmlkYXksIE9jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRWFzdGVybiBEYXlsaWdodCBUaW1lJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX0hVR0VfV0lUSF9TRUNPTkRTO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyaWVuZGx5RGF0ZVRpbWUoZGF0ZVRpbWVpc2gpIHtcbiAgaWYgKERhdGVUaW1lLmlzRGF0ZVRpbWUoZGF0ZVRpbWVpc2gpKSB7XG4gICAgcmV0dXJuIGRhdGVUaW1laXNoO1xuICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIGRhdGVUaW1laXNoLnZhbHVlT2YgJiYgaXNOdW1iZXIoZGF0ZVRpbWVpc2gudmFsdWVPZigpKSkge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tSlNEYXRlKGRhdGVUaW1laXNoKTtcbiAgfSBlbHNlIGlmIChkYXRlVGltZWlzaCAmJiB0eXBlb2YgZGF0ZVRpbWVpc2ggPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbU9iamVjdChkYXRlVGltZWlzaCk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFxuICAgICAgYFVua25vd24gZGF0ZXRpbWUgYXJndW1lbnQ6ICR7ZGF0ZVRpbWVpc2h9LCBvZiB0eXBlICR7dHlwZW9mIGRhdGVUaW1laXNofWBcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuL2RhdGV0aW1lLmpzXCI7XG5pbXBvcnQgRHVyYXRpb24gZnJvbSBcIi4vZHVyYXRpb24uanNcIjtcbmltcG9ydCBJbnRlcnZhbCBmcm9tIFwiLi9pbnRlcnZhbC5qc1wiO1xuaW1wb3J0IEluZm8gZnJvbSBcIi4vaW5mby5qc1wiO1xuaW1wb3J0IFpvbmUgZnJvbSBcIi4vem9uZS5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IEludmFsaWRab25lIGZyb20gXCIuL3pvbmVzL2ludmFsaWRab25lLmpzXCI7XG5pbXBvcnQgU3lzdGVtWm9uZSBmcm9tIFwiLi96b25lcy9zeXN0ZW1ab25lLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcblxuY29uc3QgVkVSU0lPTiA9IFwiMy40LjRcIjtcblxuZXhwb3J0IHtcbiAgVkVSU0lPTixcbiAgRGF0ZVRpbWUsXG4gIER1cmF0aW9uLFxuICBJbnRlcnZhbCxcbiAgSW5mbyxcbiAgWm9uZSxcbiAgRml4ZWRPZmZzZXRab25lLFxuICBJQU5BWm9uZSxcbiAgSW52YWxpZFpvbmUsXG4gIFN5c3RlbVpvbmUsXG4gIFNldHRpbmdzLFxufTtcbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvbWVudU90cm8udHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNSAxNDo0MzowOVxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDI6MzFcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5cbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE1vZGFsLCBGdXp6eVN1Z2dlc3RNb2RhbCwgRnV6enlNYXRjaCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbFwiO1xuaW1wb3J0IHtmdXp6eVNlbGVjdE9yQ3JlYXRlfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9mdXp6eVNlbGVjdE9yQ3JlYXRlXCI7XG5pbXBvcnQge0RhdGVUaW1lfSBmcm9tICdsdXhvbidcblxuaW50ZXJmYWNlIEdydXBvQWN0aXZpZGFkIHtcbiAgICBncnVwbzogc3RyaW5nO1xuICAgIGFjdGl2aWRhZDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgbWVudU90cm8ge1xuICAgIFxuICAgIHBhdGhDYW1wb3M6IHN0cmluZyA9IFwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBSZWdpc3RybyBUaWVtcG8ubWRcIjtcbiAgICBzZWxlY3RlZEFjdGl2aXR5OiBzdHJpbmcgPVwiXCI7XG4gICAgc2VsZWN0ZWRHcm91cDogc3RyaW5nID0gXCJcIjtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5mdXp6eVNlbGVjdE9yQyA9IG5ldyBmdXp6eVNlbGVjdE9yQ3JlYXRlKHRoaXMuYXBwLCBwbHVnaW4pO1xuICAgICAgfVxuICAgIFxuICAgICAgYXN5bmMgbWVudU90cm8gKGFwcDogQXBwLCByZWdpc3RybzogYW55KXtcbiAgICAgICAgY29uc3Qgb3BjaW9uZXNPdHJvID0gW1wiUHJvcGlhc1wiLCBcIkFyZWFzIGRlIFZpZGFcIiwgXCJBcmVhcyBkZSBJbnRlclx1MDBFOXNcIiwgXCJQcm95ZWN0b3MgZGUgUVwiLCBcIlByb3llY3RvcyBHVERcIiwgXCJUZW1hIGRlIEludGVyXHUwMEU5c1wiLCBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXSA7XG4gICAgICAgIGNvbnN0IHZhbG9yZXNPdHJvID0gW1wiaGFiXCIsIFwiYWN0c0FWXCIsIFwiYWN0c0FJXCIsIFwiYWN0c1BRXCIsIFwiYWN0c1BHVERcIiwgXCJhY3RzVElcIiwgXCJhY3RzUlJcIl07XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyT3RybyA9IFwiXHUwMEJGUXVlIGNhdGVnb3JpYT9cIjtcbiAgICAgICAgY29uc3QgbW9kYWxPdHJvID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXNPdHJvLCB2YWxvcmVzT3RybywgcGxhY2Vob2xkZXJPdHJvKTtcbiAgICAgICAgbGV0IHRlbWFPdHJvOntncnVwbzpzdHJpbmc7YWN0aXZpZGFkOnN0cmluZyxub21icmU6c3RyaW5nfTtcbiAgICAgICAgbGV0IHNpQXN1bnRvOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25PdHJvID0gYXdhaXQgbW9kYWxPdHJvLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgc3dpdGNoKHNlbGVjdGlvbk90cm8pIHtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJoYWJcIjpcbiAgICAgICAgICAgICAgICAgICAgdGVtYU90cm8gPSBhd2FpdCB0aGlzLmhhYml0dWFsKGFwcCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FJXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNQUVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzVElcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1JSXCI6XG4gICAgICAgICAgICAgICAgICAgIHRlbWFPdHJvID0gYXdhaXQgdGhpcy5lbGVtU0coYXBwLHNlbGVjdGlvbk90cm8pOyBcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYnVzXCI6XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgcmV0dXJuIHt0aXR1bG86IHRlbWFPdHJvLmFjdGl2aWRhZCArIFwiIC8gXCIgKyB0ZW1hT3Ryby5ncnVwbywgc2lBc3VudG8gLG5vbWJyZTogdGVtYU90cm8uZ3J1cG8sIGFyZWFWaWRhOiB0ZW1hT3Ryby5ncnVwb31cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGhhYml0dWFsIChhcHA6IEFwcCl7XG4gICAgICAgICAgICBjb25zdCBncnVwb3MgPSBhd2FpdCB0aGlzLmdldEZyb250bWF0dGVyRmllbGQoYXBwLHRoaXMucGF0aENhbXBvcywgXCJ0ZW1hc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdHNHcnVwb3MgPSBhd2FpdCB0aGlzLnJlc3VsdFlhbWwoYXBwLFwiYWN0c1RlbWFzXCIpXG4gICAgICAgICAgICAvLyBGaWx0cmFyIHkgcHJlcGFyYXIgbGFzIGFjdGl2aWRhZGVzIGV4aXN0ZW50ZXMgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhXG4gICAgICAgICAgICBsZXQgaXRlbXNGb3JTZWFyY2ggPSBhY3RzR3J1cG9zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBncnVwb3MuaW5jbHVkZXMoaXRlbS5ncnVwbykpIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtpdGVtLmFjdGl2aWRhZH0gLyAke2l0ZW0uZ3J1cG99YCwgLy8gQ2FtYmlhIGVsIG9yZGVuIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBpdGVtLmFjdGl2aWRhZCwgLy8gVXNhIGxhIHByb3BpZWRhZCAnYWN0aXZpZGFkJyBlbiBsdWdhciBkZSBpdGVtWzFdXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGl0ZW0uZ3J1cG8sXG4gICAgICAgICAgICAgICAgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGxldCBlbGVjY2lvbiA9IGF3YWl0IHRoaXMuZnV6enlTZWxlY3RPckMuc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXNGb3JTZWFyY2gsIGdydXBvcyk7XG4gICAgICAgICAgICBsZXQgb2JqRWxlY2Npb24gPSB7Z3J1cG86IGVsZWNjaW9uWzFdLCBhY3RpdmlkYWQ6IGVsZWNjaW9uWzBdLCBub21icmU6IFwiXCJ9O1xuICAgICAgICAgICAgcmV0dXJuIG9iakVsZWNjaW9uOyAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgbmluZ3VubyAoYXBwOiBBcHApe1xuXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyAgZWxlbVNHIChhcHA6IEFwcCwgdGlwbyA6IHN0cmluZyk6IFByb21pc2U8YW55PntcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2aWRhZGVzID0gYXdhaXQgdGhpcy5yZXN1bHRZYW1sKGFwcCwgdGlwbylcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVNHID0gYXdhaXQgdGhpcy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKGFwcCx0aXBvKVxuICAgICAgICAgICAgLy8gRXh0cmFlIGVsIHByaW1lciBhbGlhcyBkZSBjYWRhIG5vdGEgZW5jb250cmFkYSB5IGxvcyBhbG1hY2VuYSBlbiB1biBhcnJheVxuICAgICAgICAgICAgbGV0IGdyb3VwcztcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgc3dpdGNoICh0aXBvKXtcbiAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICBncm91cHMgPSBhY3RpdmVTRy5tYXAocGFnZSA9PiBwYWdlLmZyb250bWF0dGVyLmFyZWFWaWRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZ3JvdXBzID0gYWN0aXZlU0cubWFwKHBhZ2UgPT4gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzID8gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzWzBdIDogbnVsbCkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdHJhciB5IHByZXBhcmFyIGxhcyBhY3RpdmlkYWRlcyBleGlzdGVudGVzIHBhcmEgbGEgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgbGV0IGl0ZW1zRm9yU2VhcmNoID0gYWN0aXZpZGFkZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGdyb3Vwcy5pbmNsdWRlcyhpdGVtLmdydXBvKSkgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGAke2l0ZW0uYWN0aXZpZGFkfSAvICR7aXRlbS5ncnVwb31gLCAvLyBDYW1iaWEgZWwgb3JkZW4gc2kgZXMgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgYWN0aXZpdHk6IGl0ZW0uYWN0aXZpZGFkLCAvLyBVc2EgbGEgcHJvcGllZGFkICdhY3RpdmlkYWQnIGVuIGx1Z2FyIGRlIGl0ZW1bMV1cbiAgICAgICAgICAgICAgICBncm91cDogaXRlbS5ncnVwbyxcbiAgICAgICAgICAgICAgICAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gTW9zdHJhbW9zIGVsIG1vZGFsIGNvbiBsYXMgb3BjaW9uZXMgZGUgYlx1MDBGQXNxdWVkYVxuXG4gICAgICAgICAgICBsZXQgZWxlY2Npb24gPSBhd2FpdCB0aGlzLmZ1enp5U2VsZWN0T3JDLnNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zRm9yU2VhcmNoLCBncm91cHMsIHRpcG8pO1xuICAgICAgICAgICAgY29uc3QgZm91bmRFbGVtZW50ID0gYWN0aXZlU0cuZmluZChiID0+IGIuZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA9PT0gZWxlY2Npb25bMV0pO1xuICAgICAgICAgICAgLy8gU2kgc2UgZW5jdWVudHJhIGVsIGVsZW1lbnRvLCBkZXZvbHZlciBmcm9udG1hdHRlci5hbGlhc2VzWzFdXG4gICAgICAgICAgICBsZXQgYWxpYXMgPSBmb3VuZEVsZW1lbnQ/LmZpbGUucGF0aDtcbiAgICAgICAgICAgIGxldCBvYmpFbGVjY2lvbiA9IHtncnVwbzogZWxlY2Npb25bMV0sIGFjdGl2aWRhZDogZWxlY2Npb25bMF0sIG5vbWJyZTogYWxpYXN9O1xuICAgICAgICAgICAgcmV0dXJuIG9iakVsZWNjaW9uOyAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBidXNjYXIgKGFwcDogQXBwKXtcblxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgIHJlc3VsdFlhbWwoYXBwOiBBcHAsIHRlbWE6IHN0cmluZyk6IFByb21pc2U8R3J1cG9BY3RpdmlkYWRbXT4ge1xuICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIGFyY2hpdm8gcG9yIHN1IHJ1dGFcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWNjZWRlIGFsIGZyb250IG1hdHRlciAoWUFNTCkgZGVsIGFyY2hpdm8geSBvYnRpZW5lIGVsIGFycmVnbG8gYmFzYWRvIGVuIGVsIHRlbWFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyZWdsb1Jlc3VsdCA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uW3RlbWFdIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnN0cnV5ZSBlbCBhcnJlZ2xvIGRlIG9iamV0b3MgcmVzdWx0YWRvIGJhc2FkbyBlbiBsYSBlc3RydWN0dXJhIGRlIEdydXBvQWN0aXZpZGFkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbzogR3J1cG9BY3RpdmlkYWRbXSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9SZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJlZ2xvUmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRhZG8ucHVzaCh7IGdydXBvOiBpdGVtWzBdLCBhY3RpdmlkYWQ6IGl0ZW1bMV0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRhZG87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERldnVlbHZlIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBzaSBubyBzZSBlbmN1ZW50cmEgZWwgYXJjaGl2byBvIHNpIG9jdXJyZSBjdWFscXVpZXIgb3RybyBwcm9ibGVtYVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2V0RnJvbnRtYXR0ZXJGaWVsZChhcHA6IEFwcCwgZmlsZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGlmICh0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIgJiYgZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFZhbHVlID0gZnJvbnRtYXR0ZXJbZmllbGRdO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09PSB1bmRlZmluZWQgfHwgZmllbGRWYWx1ZSA9PT0gbnVsbCB8fCBmaWVsZFZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbCBjYW1wbyBlc3RcdTAwRTEgdmFjXHUwMEVEbyBvIG5vIGV4aXN0ZS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGNvbnN1bHRhZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7IC8vIERldnVlbHZlIGVsIHZhbG9yIGRlbCBjYW1wb1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbCBjYW1wbyBubyBleGlzdGUgZW4gZWwgZnJvbnRtYXR0ZXIuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVsIGFyY2hpdm8gbm8gZXhpc3RlIG8gbm8gZXMgdW4gYXJjaGl2byBkZSB0ZXh0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY29uc3VsdGFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgICAgIC8vIEVzdGEgZnVuY2lcdTAwRjNuIGVuY3VlbnRyYSBsb3MgYXJjaGl2b3MgZGUgc3Vic2lzdGVtYXMgeSBjdXlvIGVzdGFkbyBlcyBcdUQ4M0RcdURGRTJcbiAgICAgICAgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZShhcHAsIHRpcG8pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1RpcG8gPSB7XG4gICAgICAgICAgICAgICAgYWN0c0FWOiB7XG4gICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGEsXG4gICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsIFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWVGaWxlX0FyZWFzVmlkYVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c0FJOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzSW50ZXJlcyxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYW1lRmlsZV9BcmVhc0ludGVyZXNcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1BROiB7XG4gICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNQR1REOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzVEk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UZW1hc0ludGVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1JSOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHVlZGVzIGNvbnRpbnVhciBhXHUwMEYxYWRpZW5kbyBtXHUwMEUxcyBjYXNvcyBhcXVcdTAwRURcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSB0aXBvIGVzIHVuYSBwcm9waWVkYWQgdlx1MDBFMWxpZGEgYW50ZXMgZGUgZGVzZXN0cnVjdHVyYXJcbiAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyID0gW107XG4gICAgICAgICAgICAgc3dpdGNoICh0aXBvKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FWXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZm9sZGVyLCBzYW1lTmFtZSwgbmFtZUZpbGUgfSA9IHByb3BlcnRpZXNUaXBvW3RpcG9dO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWhvcmEgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmIGZpbGUubmFtZS5zdGFydHNXaXRoKGFob3JhKSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goeyBmaWxlOiBmaWxlLCBmcm9udG1hdHRlcjogbWV0YWRhdGEgfSk7ICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNUaXBvLmhhc093blByb3BlcnR5KHRpcG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZvbGRlciwgc2FtZU5hbWUsIG5hbWVGaWxlIH0gPSBwcm9wZXJ0aWVzVGlwb1t0aXBvXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzSW5Gb2xkZXIgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzSW5Gb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNhbWVOYW1lICYmIGZpbGUuYmFzZW5hbWUgPT09IG5hbWVGaWxlKSB8fCAhc2FtZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mcm9udG1hdHRlciAmJiBtZXRhZGF0YS5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goeyBmaWxlOiBmaWxlLCBmcm9udG1hdHRlcjogbWV0YWRhdGEuZnJvbnRtYXR0ZXIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZWxlY2NpXHUwMEYzbiBubyByZWNvbm9jaWRhOlwiLCB0aXBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsgLy8gTWFuZWphciBzZWdcdTAwRkFuIHR1IGxcdTAwRjNnaWNhIGRlIGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gICAgICAgICB9XG5cbn1cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNSAxNzowMjozNFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6NThcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbFRhcmVhc30gZnJvbSBcIi4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxUYXJlYXNcIlxuaW1wb3J0IHttZW51T3Ryb30gZnJvbSAnLi9tZW51T3RybydcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSBcIi4vcmVnaXN0cm9UaWVtcG9BUElcIjtcblxuZXhwb3J0IGNsYXNzIHV0aWxzQVBJIHtcbiAgcHJpdmF0ZSBtZW51T3RybzogbWVudU90cm87XG4gIHBsdWdpbjogUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5tZW51T3RybyA9IG5ldyBtZW51T3RybyhwbHVnaW4pO1xuICB9XG4gIC8vIExhIGRlY2xhcmFjaVx1MDBGM24gZGVsIG1cdTAwRTl0b2RvIGVzdGFiYSBhc2k6IGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpXG4gIC8vIERldnVlbHZlIGVsIGZpbGUgZGVsIHJlZ2lzdHJvIGFjdGl2by4gVXRpbGl6YWRvIHBhcmEgY3VhbmRvIG5lY2VzaXRvIG9idGVuZXIgZWwgZGF0byBzb2xhbWVudGUgZGUgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gYWN0aXZvLlxuICBhc3luYyBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSB7XG4gICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBmcm9udG1hdHRlciBjb250aWVuZSBlbCBjYW1wbyBcImVzdGFkb1wiIGNvbiBlbCB2YWxvciBcIlx1RDgzRFx1REZFMlwiXG4gICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuICBhc3luYyBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAvLyBSZXRvcm5hciB1biBvYmpldG8gcmVnaXN0cm8gcHJlZGV0ZXJtaW5hZG8gc2luIGFyY2hpdm8gYWN0aXZvXG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpdm86IG51bGwsXG4gICAgICAgIG5vbWJyZTogXCJSZWdpc3RybyBzaW4gYXJjaGl2byBhY3Rpdm9cIixcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvLFxuICAgICAgICBpbmRpY2U6IHBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVnaXN0cm9UaWVtcG8sXG4gICAgICAgIGlkOiBudWxsLFxuICAgICAgICBmZWNoYTogdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKSxcbiAgICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7cGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb31cImAsXG4gICAgICAgIGFsaWFzZXM6IFtdIC8vIG8gaW5jbHVzbyBwb2RyXHUwMEVEYXMgYXNpZ25hciBhbGdcdTAwRkFuIGFsaWFzIHBvciBkZWZlY3RvIHNpIGxvIGRlc2Vhc1xuICAgICAgfTtcbiAgICB9XG4gIFxuICAgIGNvbnN0IGZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbztcbiAgXG4gICAgbGV0IG1heElkID0gMDtcbiAgICBjb25zdCBmaWxlcyA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoKGZpbGU6IHsgcGF0aDogc3RyaW5nIH0pID0+XG4gICAgICBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpXG4gICAgKTtcbiAgXG4gICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICB9XG4gICAgfSk7XG4gIFxuICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcbiAgICBjb25zdCBmZWNoYUNvbXBsZXRhID0gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgXG4gICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGFjdGl2byBwYXJhIGV4dHJhZXIgYWxpYXNlc1xuICAgIGNvbnN0IG1ldGFkYXRhQWN0aXZvID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgIGNvbnN0IGFsaWFzZXMgPVxuICAgICAgbWV0YWRhdGFBY3Rpdm8gJiYgbWV0YWRhdGFBY3Rpdm8uZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdGFBY3Rpdm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1xuICAgICAgICA/IG1ldGFkYXRhQWN0aXZvLmZyb250bWF0dGVyLmFsaWFzZXNcbiAgICAgICAgOiBbXTtcbiAgXG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2byxcbiAgICAgIG5vbWJyZTogYWN0aXZvLmJhc2VuYW1lLFxuICAgICAgZm9sZGVyLFxuICAgICAgaW5kaWNlLFxuICAgICAgaWQ6IG5leHRJZCxcbiAgICAgIGZlY2hhOiBmZWNoYUNvbXBsZXRhLFxuICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7aW5kaWNlfVwiYCxcbiAgICAgIGFsaWFzZXMsIC8vIFNlIGFncmVnYSBlbCBjYW1wbyBhbGlhc2VzIGFsIHJlZ2lzdHJvXG4gICAgfTtcbiAgfVxuXG4gIGZvcm1hdGVhckZlY2hhKGZlY2hhOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgY29uc3QgZmVjaGFGb3JtYXRvID0gZmVjaGFMb2NhbC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcbiAgICBjb25zdCBkaWFzID0gW1xuICAgICAgXCJEb21pbmdvXCIsXG4gICAgICBcIkx1bmVzXCIsXG4gICAgICBcIk1hcnRlc1wiLFxuICAgICAgXCJNaVx1MDBFOXJjb2xlc1wiLFxuICAgICAgXCJKdWV2ZXNcIixcbiAgICAgIFwiVmllcm5lc1wiLFxuICAgICAgXCJTXHUwMEUxYmFkb1wiLFxuICAgIF07XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdChcIiBcIilbMF0uc3Vic3RyaW5nKDAsIDUpO1xuICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gIH1cblxuICAvLyBNXHUwMEU5dG9kbyBxdWUgdmVyaWZpY2Egc2kgaGF5IHJlZ2lzdHJvcyBBQ3Rpdm9zIHkgcHJlZ3VudGEgc2kgcXVpZXJlIGNlcnJhcmxvcy5cbiAgYXN5bmMgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVnaXN0cm8uZm9sZGVyKSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgdGFyZWFzQWN0aXZhcy5wdXNoKHtcbiAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICB0aXR1bG86IG1ldGFkYXRhLnRpdHVsbyxcbiAgICAgICAgICAgIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgdGFyZWFBY3RpdmEgPSB0YXJlYXNBY3RpdmFzWzBdO1xuICAgICAgY29uc3QgZGVzZWFEZXRlbmVyID0gYXdhaXQgdGhpcy5tb3N0cmFyU3VnZXJlbmNpYShcbiAgICAgICAgYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gZXN0XHUwMEUxIGNvcnJpZW5kby4gXHUwMEJGRGVzZWEgZGV0ZW5lcmxhP2BcbiAgICAgICk7XG4gICAgICBpZiAoZGVzZWFEZXRlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkZXNlYURldGVuZXIpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvQVBJbnN0YW5jZSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGF3YWl0IHJlZ2lzdHJvVGllbXBvQVBJbnN0YW5jZS5jZXJyYXJSZWdpc3Rybyh0YXJlYUFjdGl2YS5maWxlKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBzZWd1aXJcdTAwRTEgcmVnaXN0clx1MDBFMW5kb3NlLmApO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGFyZWFzQWN0aXZhcy5sZW5ndGggPiAxKSB7XG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCJcbiAgICAgICk7XG4gICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJObyBoYXkgbVx1MDBFMXMgdGFyZWFzIGNvcnJpZW5kby5cIik7XG4gICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gSW5kaWNhIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuXG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAvLyBDcmVhciBjb250ZW5lZG9yIHBhcmEgYm90b25lc1xuICAgICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKTtcblxuICAgICAgLy8gRnVuY2lcdTAwRjNuIGF1eGlsaWFyIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyB5IGNlcnJhciBlbCBtb2RhbCBhZGVjdWFkYW1lbnRlXG4gICAgICBjb25zdCBoYWNlclNlbGVjY2lvbiA9IChzZWxlY2Npb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2VsZWNjaW9uYWRvID0gdHJ1ZTsgLy8gTWFyY2FyIHF1ZSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cbiAgICAgICAgbW9kYWwuY2xvc2UoKTsgLy8gQ2VycmFyIGVsIG1vZGFsXG4gICAgICAgIHJlc29sdmUoc2VsZWNjaW9uKTsgLy8gUmVzb2x2ZXIgbGEgcHJvbWVzYSBjb24gbGEgc2VsZWNjaVx1MDBGM25cbiAgICAgIH07XG5cbiAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgY29uc3QgeWVzQnV0dG9uID0gYnV0dG9uc0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgIHRleHQ6IFwiU1x1MDBFRFwiLFxuICAgICAgfSk7XG4gICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhY2VyU2VsZWNjaW9uKHRydWUpKTtcblxuICAgICAgLy8gQm90XHUwMEYzbiBOb1xuICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdGV4dDogXCJOb1wiLFxuICAgICAgfSk7XG4gICAgICBub0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFjZXJTZWxlY2Npb24oZmFsc2UpKTtcblxuICAgICAgbW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAvLyBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBzZSBoYXlhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVjaGF6YXIgbGEgcHJvbWVzYVxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJNb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzblwiKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFncmVnYXIgZXNjdWNoYXMgZGUgZXZlbnRvcyBkZSB0ZWNsYWRvIHBhcmEgcGVybWl0aXIgbGEgbmF2ZWdhY2lcdTAwRjNuIGNvbiBlbCB0ZWNsYWRvXG4gICAgICBtb2RhbC5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGU6IHsga2V5OiBhbnkgfSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgeWVzQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICAgICAgbm9CdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJFbnRlclwiOlxuICAgICAgICAgICAgLy8gU2ltdWxhIGNsaWMgZW4gZWwgYm90XHUwMEYzbiBlbmZvY2Fkb1xuICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uY2xpY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRW5mb2NhciBpbmljaWFsbWVudGUgZWwgYm90XHUwMEYzbiAnU1x1MDBFRCcgcGFyYSBwZXJtaXRpciBsYSBuYXZlZ2FjaVx1MDBGM24gY29uIHRlY2xhZG8gZGVzZGUgZWwgaW5pY2lvXG4gICAgICB5ZXNCdXR0b24uZm9jdXMoKTtcblxuICAgICAgbW9kYWwub3BlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAgIGNvbnN0IHRvdFRhcmVhcyA9IGF3YWl0IHRoaXMuZW5jb250cmFyVGFyZWFzUGVuZGllbnRlcyhhcHApO1xuICAgIGxldCBvcGNpb25lc1RpdHVsbzogc3RyaW5nW107XG4gICAgbGV0IHZhbG9yZXNPcGNpb246IHN0cmluZ1tdO1xuICBcbiAgICBpZiAocmVnaXN0cm8uYWN0aXZvKSB7XG4gICAgICAvLyBTaSBoYXkgYXJjaGl2byBhY3Rpdm8sIHNlIGRldGVybWluYSBlbCB2YWxvck1vc3RyYXIgYmFzYWRvIGVuIGFsaWFzZXMgbyBub21icmUuXG4gICAgICBsZXQgdmFsb3JNb3N0cmFyOiBzdHJpbmc7XG4gICAgICBpZiAocmVnaXN0cm8uYWxpYXNlcyAmJiByZWdpc3Ryby5hbGlhc2VzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHZhbG9yTW9zdHJhciA9IHJlZ2lzdHJvLmFsaWFzZXNbMV07XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJvLmFsaWFzZXMgJiYgcmVnaXN0cm8uYWxpYXNlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICB2YWxvck1vc3RyYXIgPSByZWdpc3Ryby5hbGlhc2VzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsb3JNb3N0cmFyID0gcmVnaXN0cm8ubm9tYnJlO1xuICAgICAgfVxuICAgICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3ZhbG9yTW9zdHJhciwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3ZhbG9yTW9zdHJhciwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIk90cm9cIl07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpIG5vIGhheSBhcmNoaXZvIGFjdGl2bywgc2Ugb21pdGUgdmFsb3JNb3N0cmFyLlxuICAgICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW1wiQWxndW5hIHRhcmVhIGVuIEVqZWN1Y2lcdTAwRjNuXCIsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW1wiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk90cm9cIl07XG4gICAgICB9XG4gICAgfVxuICBcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWxUYXJlYXMoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICBcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgbW9kYWxNZW51MS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgXG4gICAgICBzd2l0Y2ggKHJlZ2lzdHJvLnRpcG9SZWdpc3Rybykge1xuICAgICAgICBjYXNlIFwiTm90YVwiOlxuICAgICAgICAgIGlmIChyZWdpc3Ryby5hY3Rpdm8pIHtcbiAgICAgICAgICAgIHJlZ2lzdHJvLnRpdHVsbyA9IHJlZ2lzdHJvLm5vbWJyZTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLnRhcmVhID0gZmFsc2U7XG4gICAgICAgICAgICByZWdpc3RybyA9IHRoaXMuY29waWFyQ2FtcG9zKHJlZ2lzdHJvKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBub3RhIGFjdGl2YSBwYXJhIGFzaWduYXJcIik7XG4gICAgICAgICAgICByZWdpc3Ryby50aXBvUmVnaXN0cm8gPSBcIk90cm9cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJUYXJlYVwiOlxuICAgICAgICAgIGF3YWl0IHRoaXMuZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwLCByZWdpc3RybywgdG90VGFyZWFzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsZXQgcmVzcHVlc3RhID0gYXdhaXQgdGhpcy5tZW51T3Ryby5tZW51T3RybyhhcHAsIHJlZ2lzdHJvKTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHJlZ2lzdHJvLCByZXNwdWVzdGEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIHNlIHBvZHJcdTAwRURhIG1hbmVqYXIgZWwgY2FzbyBkZSBjaWVycmUgc2luIHNlbGVjY2lcdTAwRjNuLCBwb3IgZWplbXBsbywgZXN0YWJsZWNpZW5kbyByZWdpc3Ryby5kZXRlbmVyLlxuICAgIH1cbiAgfVxuXG4gIGNvcGlhckNhbXBvcyhyZWdpc3Rybyl7XG4gICAgbGV0IG5vbWJyZSA9IHJlZ2lzdHJvLmFjdGl2by5iYXNlbmFtZTtcbiAgICBsZXQgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Ryby5hY3Rpdm8pO1xuICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIil7IFxuICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub21icmU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyByZWdpc3Ryby5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCByZWdpc3Ryby5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gcmVnaXN0cm8ucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gcmVnaXN0cm8ucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSByZWdpc3Ryby5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgcmVnaXN0cm8ucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgfVxuICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSByZWdpc3Ryby5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZWdpc3RybztcbiAgfVxuXG4gIGFzeW5jIGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwOiBBcHApOiBQcm9taXNlPHsgdGFyZWE6IHN0cmluZzsgYXJjaGl2bzogVEZpbGUgfVtdPiB7XG4gICAgbGV0IHRhcmVhc1BlbmRpZW50ZXM6IHsgdGFyZWE6IHN0cmluZzsgYXJjaGl2bzogVEZpbGUgfVtdID0gW107XG4gICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIC8vIEV4Y2x1aXIgYXJjaGl2b3MgcXVlIGVzdFx1MDBFMW4gZW4gY2FycGV0YXMgaW5kZXNlYWRhc1xuICAgIGNvbnN0IGFyY2hpdm9zUmVsZXZhbnRlcyA9IGFyY2hpdm9zLmZpbHRlcigoYXJjaGl2bzogVEZpbGUpID0+IHtcbiAgICAgIHJldHVybiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiRXN0cnVjdHVyYS9HVEQvU2lzdGVtYSBHVEQvU2lzdGVtYVwiKSAmJiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKTtcbiAgICB9KTtcbiAgXG4gICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zUmVsZXZhbnRlcykge1xuICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gY29udGVuaWRvLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi9nbSkgfHwgW107XG4gIFxuICAgICAgLy8gUG9yIGNhZGEgdGFyZWEgZW5jb250cmFkYSwgc2UgY3JlYSB1biBvYmpldG8gY29uIGxhIHRhcmVhIGxpbXBpYSB5IGVsIGFyY2hpdm8gYWN0dWFsLlxuICAgICAgY29uc3QgdGFyZWFzQ29uQXJjaGl2byA9IGNvaW5jaWRlbmNpYXMubWFwKCh0YXJlYTogc3RyaW5nKSA9PiB7XG4gICAgICAgIHJldHVybiB7IHRhcmVhOiB0YXJlYS50cmltKCksIGFyY2hpdm86IGFyY2hpdm8gfTtcbiAgICAgIH0pO1xuICAgICAgdGFyZWFzUGVuZGllbnRlcyA9IHRhcmVhc1BlbmRpZW50ZXMuY29uY2F0KHRhcmVhc0NvbkFyY2hpdm8pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZWFzUGVuZGllbnRlcztcbiAgfVxuXG5hc3luYyBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhcbiAgYXBwOiBBcHAsXG4gIHJlZ2lzdHJvOiBhbnksXG4gIHRhcmVhc1BlbmRpZW50ZXM6IHsgdGFyZWE6IHN0cmluZzsgYXJjaGl2bzogVEZpbGUgfVtdXG4pIHtcbiAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIkVsaWdlIGxhIHRhcmVhIHF1ZSB2YXMgYSByZWdpc3RyYXIuXCI7XG5cbiAgLy8gTGltcGlhIGVsIHRleHRvIGRlIGNhZGEgdGFyZWFcbiAgY29uc3QgcHJvbWVzYXNMaW1waWFzID0gdGFyZWFzUGVuZGllbnRlcy5tYXAoKHRhcmVhT2JqKSA9PlxuICAgIHRoaXMubGltcGlhclRleHRvVGFyZWEodGFyZWFPYmoudGFyZWEpXG4gICk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWVzYXNMaW1waWFzKTtcblxuICAgIC8vIENvbnN0cnV5ZSBlbCBsaXN0YWRvIHBhcmEgZWwgbW9kYWw6IGNhZGEgb3BjaVx1MDBGM24gZXMgZWwgYWxpYXMgKG8gbm9tYnJlKSBjb25jYXRlbmFkbyBjb24gZWwgdGV4dG8gbGltcGlvIGRlIGxhIHRhcmVhXG4gICAgY29uc3QgZGlzcGxheU9wdGlvbnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdmFsdWVzOiBudW1iZXJbXSA9IFtdOyAvLyBzZSB1c2FyXHUwMEUxIGVsIFx1MDBFRG5kaWNlIG8gYWxnXHUwMEZBbiB2YWxvciBpZGVudGlmaWNhZG9yXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmVhc1BlbmRpZW50ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHsgdGFyZWEsIGFyY2hpdm8gfSA9IHRhcmVhc1BlbmRpZW50ZXNbaV07XG4gICAgICBjb25zdCB0ZXh0b1RhcmVhID0gdGFyZWFzTGltcGlhc1tpXTtcblxuICAgICAgbGV0IGFsaWFzRGlzcGxheSA9IFwiXCI7XG4gICAgICAvLyBPYnRlbmVyIGxhIG1ldGFkYXRhIGRlbCBhcmNoaXZvIHBhcmEgdmVyIHNpIHRpZW5lIGFsaWFzZXMgZW4gZWwgZnJvbnRtYXR0ZXJcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uYWxpYXNlcykge1xuICAgICAgICBsZXQgYWxpYXNlcyA9IG1ldGFkYXRhLmZyb250bWF0dGVyLmFsaWFzZXM7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhbGlhc2VzKSkgYWxpYXNlcyA9IFthbGlhc2VzXTtcbiAgICAgICAgaWYgKGFsaWFzZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICBhbGlhc0Rpc3BsYXkgPSBhbGlhc2VzWzFdO1xuICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICBhbGlhc0Rpc3BsYXkgPSBhbGlhc2VzWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTaSBubyBzZSBlbmNvbnRyXHUwMEYzIG5pbmdcdTAwRkFuIGFsaWFzLCBzZSB1c2EgZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgICBpZiAoIWFsaWFzRGlzcGxheSkge1xuICAgICAgICBhbGlhc0Rpc3BsYXkgPSBhcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgfVxuXG4gICAgICAvLyBDb25jYXRlbmFyIGVsIGFsaWFzRGlzcGxheSAobyBub21icmUpIGNvbiBlbCB0ZXh0byBkZSBsYSB0YXJlYSwgc2VwYXJhZG8gcG9yIFwiIC8gXCJcbiAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gYCR7YWxpYXNEaXNwbGF5fSAvICR7dGV4dG9UYXJlYX1gO1xuICAgICAgZGlzcGxheU9wdGlvbnMucHVzaChkaXNwbGF5VGV4dCk7XG4gICAgICB2YWx1ZXMucHVzaChpKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhciBlbCBtb2RhbCBwYXNhbmRvIGxhcyBvcGNpb25lcyBjb25jYXRlbmFkYXMgeSB1c2FuZG8gbG9zIFx1MDBFRG5kaWNlcyBjb21vIHZhbG9yZXMgZGUgc2VsZWNjaVx1MDBGM25cbiAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWxUYXJlYXMoYXBwLCBkaXNwbGF5T3B0aW9ucywgdmFsdWVzLCBwbGFjZWhvbGRlcik7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBhd2FpdCBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAvLyBTZSBvYnRpZW5lIGxhIHRhcmVhIGNvcnJlc3BvbmRpZW50ZSBhIGxhIG9wY2lcdTAwRjNuIHNlbGVjY2lvbmFkYVxuICAgICAgY29uc3Qgc2VsZWNjaW9uID0gdGFyZWFzUGVuZGllbnRlc1tzZWxlY3RlZEluZGV4XTtcbiAgICAgIHJlZ2lzdHJvLnRpdHVsbyA9IGF3YWl0IHRoaXMubGltcGlhclRleHRvVGFyZWEoc2VsZWNjaW9uLnRhcmVhKTtcbiAgICAgIHJlZ2lzdHJvLm5vbWJyZSA9IHNlbGVjY2lvbi5hcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgcmVnaXN0cm8uYXJjaGl2b1RhcmVhID0gc2VsZWNjaW9uLmFyY2hpdm87XG4gICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICByZWdpc3Ryby50YXJlYSA9IHRydWU7XG4gICAgICByZWdpc3RybyA9IHRoaXMuY29waWFyQ2FtcG9zKHJlZ2lzdHJvKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiSHVibyB1biBlcnJvciBhbCBsaW1waWFyIGxhcyB0YXJlYXM6XCIsIGVycm9yKTtcbiAgfVxufVxuXG5saW1waWFyVGV4dG9UYXJlYSh0aXR1bG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIC8vIFNlIHRvbWEgc29sbyBsYSBwcmltZXJhIGxcdTAwRURuZWFcbiAgICBsZXQgdGV4dG9MaW1waW8gPSB0aXR1bG8uc3BsaXQoXCJcXG5cIilbMF07XG5cbiAgICAvLyBUcmFuc2Zvcm1hIGxhcyBzZWNjaW9uZXMgcXVlIGVtcGllemFuIHBvciBcIiNcIjpcbiAgICAvLyBQb3IgZWplbXBsbzogXCIjY3gvR2VzdGlcdTAwRjNuUGVyc29uYWwvUGxhblNlbWFuYWxcIiBzZSB0cmFuc2Zvcm1hIGVuIFwiY3hfR2VzdGlvblBlcnNvbmFsX1BsYW5TZW1hbmFsXCJcbiAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyMoW1xcdy0vXSspL2csIChtYXRjaCwgcDEpID0+IHtcbiAgICAgIGxldCB0cmFuc2Zvcm1hZG8gPSBwMS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICAgICAgLy8gRWxpbWluYSBhY2VudG9zIHVzYW5kbyBub3JtYWxpemFjaVx1MDBGM24gVW5pY29kZVxuICAgICAgdHJhbnNmb3JtYWRvID0gdHJhbnNmb3JtYWRvLm5vcm1hbGl6ZShcIk5GRFwiKS5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiKTtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1hZG87XG4gICAgfSk7XG5cbiAgICAvLyBFbGltaW5hIGxvcyBjYW1wb3MgZGUgZXN0aWxvIERhdGF2aWV3LCBwb3IgZWplbXBsbyBbY2FtcG86OnZhbG9yXVxuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCBcIlwiKTtcblxuICAgIC8vIEVsaW1pbmEgZWwgcGF0clx1MDBGM24gXCIgLSBbL11cIiBhbCBpbmljaW8gZGUgbGEgY2FkZW5hLCBjb24gcG9zaWJsZXMgZXNwYWNpb3NcbiAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgXCJcIik7XG5cbiAgICAvLyBFbGltaW5hIGxvcyBlbW9qaXMgZGUgVGFza3MganVudG8gY29uIGxhIGZlY2hhIHF1ZSB2aWVuZSBpbm1lZGlhdGFtZW50ZSBkZXNwdVx1MDBFOXMuXG4gICAgLy8gU2UgYXN1bWUgcXVlIGxhIGZlY2hhIHRpZW5lIGZvcm1hdG8gWVlZWS1NTS1ERCwgb3BjaW9uYWxtZW50ZSBzZWd1aWRhIGRlIGhvcmEuXG4gICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKFxuICAgICAgL1xccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9XFxzKlxcZHs0fS1cXGR7Mn0tXFxkezJ9KD86XFxzKlxcZHsyfTpcXGR7Mn0oPzo6XFxkezJ9KT8pPy9ndSxcbiAgICAgIFwiXCJcbiAgICApO1xuXG4gICAgLy8gRWxpbWluYSBjdWFscXVpZXIgb3RybyBlbW9qaSBxdWUgcXVlZGVcbiAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9L2d1LCBcIlwiKTtcblxuICAgIC8vIEVsaW1pbmEgY3VhbHF1aWVyIGNvbnRlbmlkbyBxdWUgZXN0XHUwMEU5IGVudHJlIGNvcmNoZXRlcyBjdWFkcmFkb3MgKGluY2x1eWVuZG8gbG9zIGNvcmNoZXRlcylcbiAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xcW1teXFxdXSpcXF0vZywgXCJcIik7XG5cbiAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqb1xuICAgIGNvbnN0IGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MgPSAvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nO1xuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZShjYXJhY3RlcmVzTm9QZXJtaXRpZG9zLCBcIl9cIik7XG5cbiAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpb1xuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG5cbiAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gIH0pO1xufVxuXG5hc3luYyBjb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgLy8gMS4gQ2FsY3VsYXIgZWwgXHUwMEZBbHRpbW8gaWRTZWMgZXhpc3RlbnRlIHBhcmEgZXN0ZSB0XHUwMEVEdHVsb1xuICBjb25zdCBtYXhJZFNlYyA9IGF3YWl0IHRoaXMuY2FsY3VsYXJVbHRpbW9JZFNlYyhyZWdpc3Ryby50aXR1bG8sIHJlZ2lzdHJvLmZvbGRlciwgYXBwKTtcbiAgcmVnaXN0cm8uaWRTZWMgPSBtYXhJZFNlYyArIDE7XG4gIFxuICAvLyAyLiBEZWZpbmlyIGVsIHN1ZmlqbzogcGFyYSBpZFNlYyA+IDEgc2UgYVx1MDBGMWFkZSBcIiAtIGlkU2VjXCIsIHNpbm8gcXVlZGEgdmFjXHUwMEVEb1xuICBjb25zdCBzdWZmaXggPSByZWdpc3Ryby5pZFNlYyA+IDEgPyBgIC0gJHtyZWdpc3Ryby5pZFNlY31gIDogXCJcIjtcbiAgXG4gIC8vIDMuIEd1YXJkYXIgdW5hIGNvcGlhIGRlIGxvcyBhbGlhc2VzIG9yaWdpbmFsZXMgZGUgbGEgbm90YVxuICBjb25zdCBvcmlnaW5hbEFsaWFzZXMgPSBBcnJheS5pc0FycmF5KHJlZ2lzdHJvLmFsaWFzZXMpID8gWy4uLnJlZ2lzdHJvLmFsaWFzZXNdIDogW107XG4gIFxuICAvLyA0LiBMaW1waWFyIGN1YWxxdWllciBwcmVmaWpvIFJUIHBhcmEgZXZpdGFyIGR1cGxpY2FjaW9uZXNcbiAgZnVuY3Rpb24gY2xlYW5QcmVmaXgodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gXCJcIjtcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXlJUIC1cXHMqLywgXCJcIikudHJpbSgpO1xuICB9XG4gIFxuICAvLyA1LiBDcmVhciBudWV2b3MgYWxpYXNlcyBzZWdcdTAwRkFuIGVsIHRpcG8gZGUgcmVnaXN0cm9cbiAgaWYgKCFyZWdpc3Ryby50YXJlYSkge1xuICAgIC8vIENBU08gMTogUmVnaXN0cm8gZGlyZWN0byBzb2JyZSBsYSBub3RhXG4gICAgY29uc3Qgbm90ZU5hbWUgPSBjbGVhblByZWZpeChyZWdpc3Ryby5ub21icmUgfHwgXCJcIik7XG4gICAgXG4gICAgLy8gQ3JlYXIgYXJyYXkgZGUgbnVldm9zIGFsaWFzZXNcbiAgICBjb25zdCBuZXdBbGlhc2VzID0gW1xuICAgICAgYFJUIC0gJHtub3RlTmFtZX0ke3N1ZmZpeH1gIC8vIEFsaWFzIDA6IE5vbWJyZSBkZSBsYSBub3RhICsgc3VmaWpvXG4gICAgXTtcbiAgICBcbiAgICAvLyBTaSBoYXkgYWxpYXNlcyBvcmlnaW5hbGVzLCB1c2FybG9zIHBhcmEgZWwgc2VndW5kbyB5IHRlcmNlciBhbGlhc1xuICAgIGlmIChvcmlnaW5hbEFsaWFzZXMubGVuZ3RoID49IDEpIHtcbiAgICAgIG5ld0FsaWFzZXMucHVzaChgUlQgLSAke2NsZWFuUHJlZml4KG9yaWdpbmFsQWxpYXNlc1swXSl9JHtzdWZmaXh9YCk7IC8vIEFsaWFzIDE6IFByaW1lciBhbGlhcyBkZSBsYSBub3RhXG4gICAgICBcbiAgICAgIGlmIChvcmlnaW5hbEFsaWFzZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgbmV3QWxpYXNlcy5wdXNoKGBSVCAtICR7Y2xlYW5QcmVmaXgob3JpZ2luYWxBbGlhc2VzWzFdKX0ke3N1ZmZpeH1gKTsgLy8gQWxpYXMgMjogU2VndW5kbyBhbGlhcyBkZSBsYSBub3RhXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSBuZXdBbGlhc2VzO1xuICB9IGVsc2Uge1xuICAgIC8vIENBU08gMjogUmVnaXN0cm8gc29icmUgdW5hIHRhcmVhXG4gICAgLy8gMS4gT2J0ZW5lciBtZXRhZGF0b3MgZGUgbGEgbm90YSBkb25kZSBlc3RcdTAwRTEgbGEgdGFyZWFcbiAgICBjb25zdCBtZXRhZGF0YU5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUocmVnaXN0cm8uYXJjaGl2b1RhcmVhXG4gICAgICAvLyBFc3RlIGVzIGVsIGFyY2hpdm8gZG9uZGUgZXN0XHUwMEUxIGxhIHRhcmVhLCBsbyB0aWVuZXMgZW4gYHJlZ2lzdHJvLm5vbWJyZWAgbyBlbiBhbGd1bmEgcHJvcGllZGFkIHF1ZSBndWFyZGUgbGEgcmVmZXJlbmNpYVxuICAgICk7XG4gICAgY29uc3QgdGFza1RleHQgPSBjbGVhblByZWZpeChyZWdpc3Ryby50aXR1bG8gfHwgXCJcIik7XG4gICAgY29uc3Qgbm90ZU5hbWUgPSBjbGVhblByZWZpeChyZWdpc3Ryby5ub21icmUgfHwgXCJcIik7XG4gICAgZGVidWdnZXI7XG4gICAgLy8gMi4gRXh0cmFlciBhbGlhc2VzIGRlbCBmcm9udG1hdHRlciBkZSBsYSBub3RhXG4gICAgbGV0IG5vdGVBbGlhc2VzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmIChtZXRhZGF0YU5vdGE/LmZyb250bWF0dGVyPy5hbGlhc2VzKSB7XG4gICAgICBub3RlQWxpYXNlcyA9IEFycmF5LmlzQXJyYXkobWV0YWRhdGFOb3RhLmZyb250bWF0dGVyLmFsaWFzZXMpXG4gICAgICAgID8gbWV0YWRhdGFOb3RhLmZyb250bWF0dGVyLmFsaWFzZXNcbiAgICAgICAgOiBbbWV0YWRhdGFOb3RhLmZyb250bWF0dGVyLmFsaWFzZXNdO1xuICAgIH1cblxuICAgIC8vIDMuIENvbnN0cnVpciBuZXdBbGlhc2VzIHVzYW5kbyBlc29zIGFsaWFzZXMgY29tbyBiYXNlXG4gICAgY29uc3QgbmV3QWxpYXNlcyA9IFtcbiAgICAgIGBSVCAtICR7dGFza1RleHR9JHtzdWZmaXh9YCxcbiAgICAgIGBSVCAtICR7bm90ZU5hbWV9IC8gJHt0YXNrVGV4dH0ke3N1ZmZpeH1gLFxuICAgIF07XG5cbiAgICAvLyBTaSBsYSBub3RhIG9yaWdpbmFsIHRpZW5lIGFsIG1lbm9zIHVuIGFsaWFzLCBsbyB1c2FzIHBhcmEgZWwgdGVyY2VyIGFsaWFzXG4gICAgaWYgKG5vdGVBbGlhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ld0FsaWFzZXMucHVzaChgUlQgLSAke2NsZWFuUHJlZml4KG5vdGVBbGlhc2VzWzBdKX0gLyAke3Rhc2tUZXh0fSR7c3VmZml4fWApO1xuICAgIH1cblxuICAgIC8vIDQuIEZpbmFsbWVudGUsIGFzaWduYXMgYHJlZ2lzdHJvLmFsaWFzZXMgPSBuZXdBbGlhc2VzO2BcbiAgICByZWdpc3Ryby5hbGlhc2VzID0gbmV3QWxpYXNlcztcbiAgICByZWdpc3Ryby5kZXNjcmlwY2lvbiA9IHRhc2tUZXh0O1xuICB9XG4gIFxuICAvLyA2LiBEZWZpbmlyIGVsIG5vbWJyZSBmaW5hbCBkZWwgYXJjaGl2byBkZSByZWdpc3RybyAoYXNlZ3VyYXJzZSBkZSBxdWUgaWQgbm8gc2VhIG51bGwpXG4gIGlmICghcmVnaXN0cm8uaWQpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3I6IHJlZ2lzdHJvLmlkIGVzIG51bGwgbyB1bmRlZmluZWRcIik7XG4gICAgcmVnaXN0cm8uaWQgPSBEYXRlLm5vdygpOyAvLyBBc2lnbmFyIHVuIHZhbG9yIHRlbXBvcmFsIGJhc2FkbyBlbiB0aW1lc3RhbXAgcGFyYSBldml0YXIgZXJyb3Jlc1xuICB9XG4gIHJlZ2lzdHJvLm5hbWVGaWxlID0gYCR7cmVnaXN0cm8uZm9sZGVyfS9SVCAtICR7cmVnaXN0cm8uaWR9YDtcbn1cblxuICAvKipcbiAqIENhbGN1bGEgZWwgXHUwMEZBbHRpbW8gaWRTZWMgdXNhZG8gcGFyYSByZWdpc3Ryb3MgY29uIGVsIG1pc21vIHRcdTAwRUR0dWxvIGVuIGxhIGNhcnBldGEgZXNwZWNpZmljYWRhLlxuICovXG5hc3luYyBjYWxjdWxhclVsdGltb0lkU2VjKHRpdHVsbzogc3RyaW5nLCBmb2xkZXI6IHN0cmluZywgYXBwOiBBcHApOiBQcm9taXNlPG51bWJlcj4ge1xuICBjb25zdCBhcmNoaXZvcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xuICBsZXQgbWF4ID0gMDtcbiAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zKSB7XG4gICAgaWYgKGFyY2hpdm8ucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgIGNvbnN0IG1ldGFkYXRvcyA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgIGlmIChtZXRhZGF0b3MgJiYgbWV0YWRhdG9zLmZyb250bWF0dGVyICYmIG1ldGFkYXRvcy5mcm9udG1hdHRlci50aXR1bG8gPT09IHRpdHVsbykge1xuICAgICAgICBjb25zdCBpZFNlYyA9IG1ldGFkYXRvcy5mcm9udG1hdHRlci5pZFNlYztcbiAgICAgICAgaWYgKGlkU2VjICE9PSB1bmRlZmluZWQgJiYgaWRTZWMgPiBtYXgpIHtcbiAgICAgICAgICBtYXggPSBpZFNlYztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG4gIGxpbXBpYXJBbGlhcyh0aXR1bG86IHN0cmluZykge1xuICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby5cbiAgICBjb25zdCBjYXJhY3RlcmVzTm9QZXJtaXRpZG9zID0gL1s8PjpcIlxcL1xcXFx8PypcXHgwMC1cXHgxRl0vZztcbiAgICBsZXQgdGl0dWxvTGltcGlvID0gdGl0dWxvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW8gcGFyYSBldml0YXIgbm9tYnJlcyBkZSBhcmNoaXZvIGV4Y2VzaXZhbWVudGUgbGFyZ29zLlxuICAgIHRpdHVsb0xpbXBpbyA9IHRpdHVsb0xpbXBpby5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblxuICAgIHJldHVybiB0aXR1bG9MaW1waW8udHJpbSgpO1xuICB9XG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXMvUmVnaXN0cm9UaWVtcG8udHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9JbnRlcmZhY2VzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ0OjMwXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgUlRCYXNlIH0gZnJvbSBcIi4vUlRCYXNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVnaXN0cm9UaWVtcG8gZXh0ZW5kcyBSVEJhc2Uge1xuICAgIHJldG9tYXJSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTxSZWdpc3RybyB8IG51bGw+O1xuXG4gICAgcmV0b21hclRhcmVhKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICBcbiAgICBkZXRhbGxlUmVnaXN0cm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgZGV0YWxsZVJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgICBkZXRhbGxlUmVnaXN0cm8oKTogUHJvbWlzZTx2b2lkPjtcbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlc1xuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0NDo1M1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IFJUQmFzZSB9IGZyb20gXCIuL1JUQmFzZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc2lvbkxlY3R1cmEgZXh0ZW5kcyBSVEJhc2Uge1xuICBcbmdldElkKCk6IFByb21pc2U8bnVtYmVyPjtcbmdldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPjtcbmdldFRpdHVsbygpOiBQcm9taXNlPHN0cmluZz47XG5nZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz47XG5nZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+O1xuZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPjtcbmdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz47XG5nZXROb3RhKCk6IFByb21pc2U8YW55Pjtcbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL1Nlc2lvbkxlY3R1cmEudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6MzdcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTZXNpb25MZWN0dXJhIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhJztcbmltcG9ydCB7IFJUQmFzZSB9IGZyb20gJy4vUlRCYXNlJztcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIFNlc2lvbkxlY3R1cmEgZXh0ZW5kcyBSVEJhc2UgaW1wbGVtZW50cyBTZXNpb25MZWN0dXJhe1xuICAgIHByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByb3RlY3RlZCBub3RhOiBvYmplY3Q7XG4gICAgcHJvdGVjdGVkIGluZm9TdWJzaXN0ZW1hOiBhbnk7IFxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFBsdWdpbiwgaW5mb1N1YnNpc3RlbWE6IGFueSkge1xuICAgICAgc3VwZXIocGx1Z2luKTtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgdGhpcy50cCA9IHBsdWdpbi50cDtcbiAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYSA9IGluZm9TdWJzaXN0ZW1hO1xuICAgIH1cblxuICAgIGFzeW5jIGdldElkKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gICAgICAgIGxldCBtYXhJZCA9IDA7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubm90YS5pZCA9ICBtYXhJZCArIDE7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IGFjdGl2ZSBub3RlXG4gICAgICAgIGNvbnN0IGN1cnJlbnROb3RlUGF0aCA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpPy5wYXRoO1xuICAgICAgICBjb25zdCBjdXJyZW50Tm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgIGlmIChjdXJyZW50Tm90YSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTZXNzaW9ucyA9IHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZmlsdGVyKChmaWxlOiBhbnkpID0+IGZpbGUucGF0aCAhPT0gY3VycmVudE5vdGVQYXRoICYmIGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI/LnRpdHVsbyA9PT0gY3VycmVudE5vdGEudGl0dWxvKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ1Nlc3Npb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWRTZXNzaW9ucyA9IGV4aXN0aW5nU2Vzc2lvbnMuc29ydCgoYTogYW55LCBCOiBhbnkpID0+IHBhcnNlSW50KEIucGF0aC5tYXRjaCgvWzAtOV0rLylbMF0pIC0gcGFyc2VJbnQoQS5wYXRoLm1hdGNoKC9bMC05XSsvKVswXSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RTTCA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShzb3J0ZWRTZXNzaW9uc1swXSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5pZFNlYyA9IHBhcnNlSW50KGxhc3RTTC5pZFNlYykgKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSBsYXN0U0wucGFnRmluO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuaWRTZWMgPSAxO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5ub3RhLmlkU2VjID0gMTtcbiAgICAgICAgICAgIHRoaXMubm90YS5wYWdJbmljaW8gPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuaWQ7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBhcmFtZXRyb3NMaWJybygpIHtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGlmICghY3VycmVudEZpbGUgfHwgIWN1cnJlbnRGaWxlLnBhdGgpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFDYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlO1xuICAgICAgICAgICAgY29uc3QgZmlsZUNhY2hlID0gbWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudEZpbGUpO1xuICAgICAgICBpZiAoIWZpbGVDYWNoZSB8fCAhZmlsZUNhY2hlLmZyb250bWF0dGVyIHx8IGZpbGVDYWNoZS5mcm9udG1hdHRlci50eXBlICE9PSAnTEInKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdMYSBub3RhIGFjdGl2YSBkZWJlIHNlciBkZSB0aXBvIExpYnJvIGVuIGxhIEJpYmxvdGVjYSBwYXJhIHBvZGVyIGNyZWFyIHVuYSBzZXNpXHUwMEYzbiBkZSBMZWN0dXJhLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gZmlsZUNhY2hlLmZyb250bWF0dGVyO1xuICAgICAgICAgICAgdGhpcy5ub3RhWydwYWdpbmFzJ10gPSBmcm9udE1hdHRlci5wYWdpbmFzO1xuICAgICAgICAgICAgdGhpcy5ub3RhWyd0aXR1bG8nXSA9IGZyb250TWF0dGVyLnRpdHVsbztcbiAgICAgICAgICAgIHRoaXMubm90YVsncGFsYWJyYXNQb3JIb2phJ10gPSBmcm9udE1hdHRlci5wYWxhYnJhc1BvckhvamE7XG4gICAgICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpOiBQcm9taXNlPHsgc2lBc3VudG86IGJvb2xlYW4sIG5vbWJyZTogc3RyaW5nW10gfT4geyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcbiAgICAgICAgbGV0IHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBzaUFzdW50byA9IHRydWU7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICAgICAgfVxuXG4gICAgICAgXG5cblxuXG4gICAgXG4gICBcblxuICB9XG5cbiAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGBTTCAtICR7dGhpcy5ub3RhLmlkU2VjfSAvICR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbn1cblxuYXN5bmMgZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBsZXQgZmVjaGFBY3R1YWwgPSBEYXRlVGltZS5ub3coKTtcbiAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnNldExvY2FsZSgnZXMnKTtcbiAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nKTtcbiAgICB0aGlzLm5vdGEuZmVjaGEgPSBmZWNoYUFjdHVhbDtcbiAgICByZXR1cm4gZmVjaGFBY3R1YWw7XG59XG5cbmFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGRlYnVnZ2VyO1xuICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYDtcbiAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cbiAgXG5cblxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvUlRCYXNlLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQzOjIwXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgdXRpbHNBUEkgfSBmcm9tICcuL3V0aWxzQVBJJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBQbHVnaW4gc2kgbm8gZXN0XHUwMEUxIGltcG9ydGFkb1xuaW1wb3J0IHsgU2VzaW9uTGVjdHVyYSB9IGZyb20gJy4uL0ludGVyZmFjZXMvU2VzaW9uTGVjdHVyYSc7XG5cbmV4cG9ydCBjbGFzcyBSVEJhc2Uge1xuICAgIHByb3RlY3RlZCB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJvdGVjdGVkIG5vdGE6IG9iamVjdDtcbiAgICBwcm90ZWN0ZWQgaW5mb1N1YnNpc3RlbWE6IGFueTsgLy8gQ2FtYmlcdTAwRTkgZWwgdGlwbyBhIGFueSBwYXJhIHBlcm1pdGlyIGN1YWxxdWllciBvYmpldG9cbiAgICBwcm90ZWN0ZWQgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJvdGVjdGVkIHRwOiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgICB0aGlzLnRwID0gcGx1Z2luLnRwO1xuICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0ge307XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKGluZm9TdWJzaXN0ZW1hOiB7IGZvbGRlcjogc3RyaW5nOyBpbmRpY2U6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB9LCBjYW1wb3M6IGFueSk6IFByb21pc2U8YW55IHwgbnVsbD47XG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKCk6IFByb21pc2U8YW55IHwgbnVsbD47XG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKGluZm9TdWJzaXN0ZW1hPzogeyBmb2xkZXI6IHN0cmluZzsgaW5kaWNlOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgfSwgY2FtcG9zPzogYW55KTogUHJvbWlzZTxhbnkgfCBudWxsPiB7XG4gICAgXG4gICAgICAgIGlmICh0eXBlb2YgaW5mb1N1YnNpc3RlbWEgPT09ICdvYmplY3QnICYmIGluZm9TdWJzaXN0ZW1hICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoIWNhbXBvcyB8fCAhQXJyYXkuaXNBcnJheShjYW1wb3MpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FtcG9zIGRlYmUgc2VyIHVuIGFycmF5IGRlZmluaWRvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuaW5mb1N1YnNpc3RlbWEsIGluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5mb1N1YnNpc3RlbWEuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuZm9sZGVyXTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmluZGljZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmluZGljZV07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm5vdGEsIGluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGxldCBmaWVsZEhhbmRsZXI6IFNlc2lvbkxlY3R1cmE7XG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTTFwiOlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBTZXNpb25MZWN0dXJhID0gYXdhaXQgaW1wb3J0KCcuL1Nlc2lvbkxlY3R1cmEnKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IFNlc2lvbkxlY3R1cmEuU2VzaW9uTGVjdHVyYSh0aGlzLnBsdWdpbiwgdGhpcy5pbmZvU3Vic2lzdGVtYSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gc2UgaGEgZGVmaW5pZG8gdW4gbWFuZWphZG9yIGRlIGNhbXBvcyBwYXJhIGVsIHRpcG8gJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRIYW5kbGVyW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb10gPSBhd2FpdCBmaWVsZEhhbmRsZXJbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90YSA9IGF3YWl0IGZpZWxkSGFuZGxlci5nZXROb3RhKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3RhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRoaXMubm90YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhW2tleV0gPSBub3RhW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2Egb3JpZ2luYWwgZGUgaW5pY2lhclJlZ2lzdHJvXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5jcmVhck9iamV0b1JlZ2lzdHJvKHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLnZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvOyAvLyBEZXZ1ZWx2ZSBlbCByZWdpc3RybyBhY3R1YWwgeSBkZXRpZW5lIGxhIGVqZWN1Y2lcdTAwRjNuIGFxdVx1MDBFRFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvOyAvLyBEZXZ1ZWx2ZSBlbCByZWdpc3RybyBhY3R1YWwgeSBkZXRpZW5lIGxhIGVqZWN1Y2lcdTAwRjNuIGFxdVx1MDBFRFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmNvbnN0cnVpck5vbWJyZXlBbGlhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0cm87XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb2JyZWNhcmdhIGRlIG1cdTAwRTl0b2RvIHBhcmEgbG9zIGRpZmVyZW50ZXMgdGlwb3MgZGUgZW50cmFkYVxuICAgIGFzeW5jIGNlcnJhclJlZ2lzdHJvKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGFzeW5jIGNlcnJhclJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgICBhc3luYyBjZXJyYXJSZWdpc3RybygpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGFzeW5jIGNlcnJhclJlZ2lzdHJvKHJlZ2lzdHJvPzogbnVtYmVyIHwgc3RyaW5nIHwgVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgICAgICBpZiAodHlwZW9mIHJlZ2lzdHJvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVnaXN0cm8gPSBwYXJzZUludChyZWdpc3Rybyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTFx1MDBGM2dpY2Egc2kgJ2lkJyBlcyB1biBuXHUwMEZBbWVybyAtPiBDdWFuZG8gbGxlZ2EgZGVsIGJvdFx1MDBGM24gZGUgbGEgdGFibGEgZGUgcmVnaXN0cm9zIGRlbCBkXHUwMEVEYS5cbiAgICAgICAgaWYgKHR5cGVvZiByZWdpc3RybyA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIGxldCBpbmZvTm90YTtcbiAgICAgICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaWQgPT09IHJlZ2lzdHJvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvTm90YSA9IHsgZmlsZSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNhbXBvcyA9IFtcImZlY2hhXCIsIFwiaG9yYUZpbmFsXCIsIFwidGllbXBvVHJhYmFqYWRvXCJdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFyY2hpdmFyTm90YShpbmZvTm90YSwgY2FtcG9zKTtcbiAgICAgICAgICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhcmVhIGNlcnJhZGEuIENhbXBvcyBhY3R1YWxpemFkb3M6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTFx1MDBGM2dpY2Egc2kgJ2lkJyBlcyB1biBURmlsZVxuICAgICAgICBlbHNlIGlmIChyZWdpc3RybyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgbGV0IGluZm9Ob3RhID0geyBmaWxlOiByZWdpc3RybyB9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgbGV0IGNhbXBvcyA9IFtcImZlY2hhXCIsIFwiaG9yYUZpbmFsXCIsIFwidGllbXBvVHJhYmFqYWRvXCJdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFyY2hpdmFyTm90YShpbmZvTm90YSwgY2FtcG9zKTtcbiAgICAgICAgICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhcmVhIGNlcnJhZGEuIENhbXBvcyBhY3R1YWxpemFkb3M6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIGN1YW5kbyBubyBzZSBwcm9wb3JjaW9uYSBhcmd1bWVudG9zLCBzZSBidXNjYSBsYSB0YXJlYSBhY3RpdmEgeSBzZSBjaWVycmEuXG4gICAgICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHApO1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUocmVnaXN0cm8pPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGxldCBpbmZvTm90YSA9IHsgZmlsZTogcmVnaXN0cm8gfTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGxldCBjYW1wb3MgPSBbXCJmZWNoYVwiLCBcImhvcmFGaW5hbFwiLCBcInRpZW1wb1RyYWJhamFkb1wiXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hcmNoaXZhck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgICAgICAgICBsZXQgdGV4dG9SZXN1bHRhZG8gPSBPYmplY3QuZW50cmllcyhyZXN1bHRhZG8pLm1hcCgoW3Byb3BpZWRhZCwgdmFsb3JdKSA9PiBgJHtwcm9waWVkYWR9OiAke3ZhbG9yfWApLmpvaW4oJywgJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBUYXJlYSBjZXJyYWRhLiBDYW1wb3MgYWN0dWFsaXphZG9zOiAke3RleHRvUmVzdWx0YWRvfWApO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6MDlcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBSZWdpc3Ryb1RpZW1wbyB9IGZyb20gJy4uL0ludGVyZmFjZXMvUmVnaXN0cm9UaWVtcG8nO1xuaW1wb3J0IHsgUlRCYXNlIH0gZnJvbSAnLi9SVEJhc2UnO1xuXG5leHBvcnQgY2xhc3MgcmVnaXN0cm9UaWVtcG9BUEkgZXh0ZW5kcyBSVEJhc2UgaW1wbGVtZW50cyBSZWdpc3Ryb1RpZW1wb3tcbiAgICBwcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgIHN1cGVyKHBsdWdpbik7XG4gICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgIHRoaXMudXRpbHNBcGkgPSBuZXcgdXRpbHNBUEkocGx1Z2luKTtcbiAgICAgIHRoaXMudHAgPSBwbHVnaW4udHA7XG4gICAgfVxuICAgIFxuICAgIC8vIEludm9jYWRvIGRlc2RlIGVsIHRlbXBsYXRlIGRlIHRlbXBsYXRlciBQYXNvIDMgZGUgM1xuXG5hc3luYyByZXRvbWFyUmVnaXN0cm8oaWQ6IHN0cmluZyB8IG51bWJlcikge1xuICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICB0cnkge1xuICAgICAgLy8gMS4gQ3JlYXIgZWwgb2JqZXRvIHJlZ2lzdHJvIGJhc2VcbiAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5jcmVhck9iamV0b1JlZ2lzdHJvKHRoaXMucGx1Z2luKTtcbiAgXG4gICAgICAvLyAyLiBWZXJpZmljYXIgc2kgaGF5IHJlZ2lzdHJvIGVuIGN1cnNvXG4gICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLnZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICBpZiAocmVnaXN0cm8uZGV0ZW5lcikge1xuICAgICAgICByZXR1cm4gcmVnaXN0cm87XG4gICAgICB9XG4gIFxuICAgICAgLy8gMy4gQnVzY2FyIGxhIG5vdGEgYW50aWd1YSBlbiBsYSBjYXJwZXRhIGNvbmZpZ3VyYWRhXG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgcmVnaXN0cm9BbnRpZ3VvOiB7IGZpbGU6IFRGaWxlOyBmcm9udG1hdHRlcjogYW55IH0gfCB1bmRlZmluZWQ7XG4gIFxuICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICBpZiAobWV0YWRhdGE/LmlkID09PSBwYXJzZUludChpZCBhcyBzdHJpbmcpKSB7XG4gICAgICAgICAgICByZWdpc3Ryb0FudGlndW8gPSB7IGZpbGUsIGZyb250bWF0dGVyOiBtZXRhZGF0YSB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gIFxuICAgICAgaWYgKCFyZWdpc3Ryb0FudGlndW8pIHtcbiAgICAgICAgbmV3IE5vdGljZShgTm8gc2UgZW5jb250clx1MDBGMyBlbCByZWdpc3RybyBhbnRpZ3VvIGNvbiBJRDogJHtpZH1gKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgIHJldHVybiByZWdpc3RybztcbiAgICAgIH1cbiAgXG4gICAgICAvLyA0LiBDb3BpYXIgY2FtcG9zIHJlbGV2YW50ZXMgeSBub3JtYWxpemFyIGNvcmNoZXRlc1xuICAgICAgY29uc3QgZm0gPSByZWdpc3Ryb0FudGlndW8uZnJvbnRtYXR0ZXI7XG4gICAgICByZWdpc3Ryby50aXR1bG8gPSBmbS50aXR1bG8gPz8gXCJTaW4gVGl0dWxvXCI7XG4gICAgICByZWdpc3Ryby5hc3VudG9SZXRvbWFkbyA9IGZtLmFzdW50byA/PyBudWxsO1xuICAgICAgLy8gRWplbXBsbzogaW5jcmVtZW50YSBpZFNlYyBwYXJhIGluZGljYXIgbnVldmEgc2VzaVx1MDBGM25cbiAgICAgIHJlZ2lzdHJvLmlkU2VjID0gKGZtLmlkU2VjID8/IDApICsgMTtcbiAgXG4gICAgICAvLyAtLS0tIEZ1bmNpb25lcyBwYXJhIGxpbXBpYXIgY29yY2hldGVzIC0tLS1cbiAgICAgIGZ1bmN0aW9uIHF1aXRhckRvYmxlQ29yY2hldGUoc3RyOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHN0ci5zdGFydHNXaXRoKFwiW1tcIikgJiYgc3RyLmVuZHNXaXRoKFwiXV1cIikpIHtcbiAgICAgICAgICByZXR1cm4gc3RyLnNsaWNlKDIsIC0yKTsgLy8gRWxpbWluYSBbWyB5IF1dXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgIH1cbiAgXG4gICAgICBmdW5jdGlvbiBub3JtYWxpemFyQXJyYXkoYXJyOiBhbnlbXSkge1xuICAgICAgICByZXR1cm4gYXJyLm1hcChpdGVtID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBxdWl0YXJEb2JsZUNvcmNoZXRlKGl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICBcbiAgICAgIC8vIEFzaWduYXIgeSBub3JtYWxpemFyIGNhZGEgY2FtcG9cbiAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgIGlmICh0eXBlb2YgZm0uYXJlYVZpZGEgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBxdWl0YXJEb2JsZUNvcmNoZXRlKGZtLmFyZWFWaWRhKTtcbiAgICAgIH1cbiAgXG4gICAgICByZWdpc3Ryby5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm0uYXJlYUludGVyZXMpKSB7XG4gICAgICAgIHJlZ2lzdHJvLmFyZWFJbnRlcmVzID0gbm9ybWFsaXphckFycmF5KGZtLmFyZWFJbnRlcmVzKTtcbiAgICAgIH1cbiAgXG4gICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFtdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm0ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gbm9ybWFsaXphckFycmF5KGZtLnByb3llY3RvR1REKTtcbiAgICAgIH1cbiAgXG4gICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBbXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZtLnByb3llY3RvUSkpIHtcbiAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm9ybWFsaXphckFycmF5KGZtLnByb3llY3RvUSk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gKipDb3BpYW1vcyBsb3MgYWxpYXNlcyBhbnRpZ3VvcyB0YWwgY3VhbCwgc2luIHBlcmRlcmxvcyoqXG4gICAgICByZWdpc3Ryby5hbGlhc2VzID0gW107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmbS5hbGlhc2VzKSkge1xuICAgICAgICByZWdpc3Ryby5hbGlhc2VzID0gbm9ybWFsaXphckFycmF5KGZtLmFsaWFzZXMpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIDUuIENvbnN0cnVpciBub21icmUgeSBhbGlhc1xuICAgICAgLy8gICAgSU1QT1JUQU5URTogY29uc3RydWlyTm9tYnJleUFsaWFzIE5PIGRlYmUgc29icmVzY3JpYmlyIHBvciBjb21wbGV0byByZWdpc3Ryby5hbGlhc2VzLFxuICAgICAgLy8gICAgc2lubyBhXHUwMEYxYWRpciBvIGFqdXN0YXIgZWwgYWxpYXMgcGFyYSBlc3RhIG51ZXZhIHNlc2lcdTAwRjNuLlxuICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS5jb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gIFxuICAgICAgLy8gNi4gUmV0b3JuYXIgZWwgb2JqZXRvIHJlZ2lzdHJvIGFsIHRlbXBsYXRlXG4gICAgICByZXR1cm4gcmVnaXN0cm87XG4gIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3RybyBhbCByZXRvbWFyLlwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIEludm9jYWRvIHBhcmEgY3JlYXIgZWwgdGVtcGxhdGUgZGUgUmV0b21hciBQYXNvIDEgZGUgM1xuICBhc3luYyByZXRvbWFyVGFyZWEoaWQpIHsgXG4gICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcmVlbXBsYXphciAncnV0YS9hbC9hcmNoaXZvLm1kJyBjb24gbGEgcnV0YSBleGFjdGEgZGVsIGFyY2hpdm8gcXVlIGRlc2VhcyBvYnRlbmVyXG4gICAgZGVidWdnZXI7XG4gICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfUmVnaXN0cm9UaWVtcG9gXX0vUGx0IC0gUmVnaXN0cm9UaWVtcG8ubWRgO1xuICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICB9XG4gICAgY29uc3QgZmlsZW5hbWUgPSBcIlJldG9tYXIgXCIgKyBpZDtcbiAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgbGV0IGNyZWFyTm90YSA9IHRoaXMudHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gIH1cblxuICAvLyBTb2JyZWNhcmdhIGRlIG1cdTAwRTl0b2RvIHBhcmEgbG9zIGRpZmVyZW50ZXMgdGlwb3MgZGUgZW50cmFkYVxuICBhc3luYyBkZXRhbGxlUmVnaXN0cm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGFzeW5jIGRldGFsbGVSZWdpc3RybyhmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD47XG4gIGFzeW5jIGRldGFsbGVSZWdpc3RybygpOiBQcm9taXNlPHZvaWQ+O1xuICAvLyBJbXBsZW1lbnRhY2lcdTAwRjNuIGRlbCBtXHUwMEU5dG9kbyBjb24gdW5pXHUwMEYzbiBkZSB0aXBvcyBwYXJhIGVsIHBhclx1MDBFMW1ldHJvIGlkXG4gIGFzeW5jIGRldGFsbGVSZWdpc3RybyhyZWdpc3Rybz86IG51bWJlciB8IHN0cmluZyB8IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIGxldCBpbmZvTm90YTtcbiAgICBkZWJ1Z2dlcjtcbiAgICBpZiAodHlwZW9mIHJlZ2lzdHJvID09PSAnc3RyaW5nJykge1xuICAgIHJlZ2lzdHJvID0gcGFyc2VJbnQocmVnaXN0cm8pO1xuICAgIH1cbiAgICAvLyBMXHUwMEYzZ2ljYSBzaSAnaWQnIGVzIHVuIG5cdTAwRkFtZXJvIC0+IEN1YW5kbyBsbGVnYSBkZWwgYm90b24gZGUgbGEgdGFibGEgZGUgcmVnaXN0cm9zIGRlbCBkXHUwMEVEYS5cbiAgICBpZiAodHlwZW9mIHJlZ2lzdHJvID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaWQgPT09IHJlZ2lzdHJvKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZm9Ob3RhID0geyBmaWxlIH07XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gVEZpbGVcbiAgICBlbHNlIGlmIChyZWdpc3RybyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgaW5mb05vdGEgPSB7ZmlsZTogcmVnaXN0cm99O1xuICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpOyBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgY3VhbmRvIG5vIHNlIHByb3BvcmNpb25hIGFyZ3VtZW50b3MsIHNlIGJ1c2NhIGxhIHRhcmVhIGFjdGl2YSB5IHNlIGNpZXJyYS5cbiAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwKTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUocmVnaXN0cm8pPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaW5mb05vdGEgPSB7ZmlsZTogcmVnaXN0cm99O1xuICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7IFxuICAgIH1cbiAgICBsZXQgY2FtcG9zID0gW1wiZGVzY3JpcGNpb25fUmVnaXN0cm9UaWVtcG9cIl07XG4gICAgZGVidWdnZXI7XG4gICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFjdHVhbGl6YXJOb3RhKGluZm9Ob3RhLCBjYW1wb3MpO1xuICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICBuZXcgTm90aWNlKGBEZXNjcmlwY2lcdTAwRjNuIGFjdHVhbGl6YWRhOiAke3RleHRvUmVzdWx0YWRvfWApO1xuICB9XG5cbiAgfVxuICAiLCAiLyogZmlsZUxvY2F0aW9uOiBzcmMvbWFpbi50cyAqL1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBQbHVnaW5NYWluU2V0dGluZ3NUYWIgfSBmcm9tIFwiLi9zZXR0aW5nc1RhYlwiO1xuaW1wb3J0IHsgTW9kdWxvQmFzZSB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvQmFzZS9pbmRleFwiO1xuaW1wb3J0IHsgYWN0aXZhdGVNb2R1bG9CdXNxdWVkYUF2YW56YWRhIH0gZnJvbSBcIi4vbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvYWN0aXZhZG9yZXNcIjtcbmltcG9ydCB7IFN0YXR1c0JhckV4dGVuc2lvbiB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvQWxpYXNTdGF0dXNCYXIvc3RhdHVzQmFyXCI7XG5pbXBvcnQgeyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vaW5kZXhcIjtcbmltcG9ydCB0eXBlIHsgUGx1Z2luTWFpblNldHRpbmdzIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3NcIjtcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3NcIjtcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUElcIjtcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJXCI7XG5pbXBvcnQgeyBhZGRPbnNBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9hZGRPbnNBUElcIjtcbmltcG9ydCB7IFlBTUxVcGRhdGVyQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUElcIjtcbmltcG9ydCB7IG1lbnVIb3lBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51RGlhcmlvQVBJXCI7XG5pbXBvcnQgeyBtZW51U2VtYW5hbEFQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVTZW1hbmFsQVBJXCI7XG5pbXBvcnQgeyBWaXN0YVJlZ2lzdHJvQWN0aXZvIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby92aWV3cy92aXN0YVJUQWN0aXZvXCI7XG5pbXBvcnQgeyBNb2R1bG9HVEQgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0dURFwiO1xuLy9pbXBvcnQgeyBNb2R1bG9UZXJjZXJvcyB9IGZyb20gJy4vbW9kdWxlcy9tb2R1bG9fVGVyY2Vyb3MnO1xuaW1wb3J0IHsgaW5ncmVzYXJCYW5kZWphRW50cmFkYSB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvR1REL2luYm94XCI7XG5pbXBvcnQgeyBzdWJzaXN0ZW1hc0FQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N1YnNpc3RlbWFzQVBJXCI7XG5pbXBvcnQgeyBWaXN0YVJlc3VtZW5TZW1hbmFsIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci92aWV3cy92aXN0YVJlc3VtZW5TZW1hbmFsXCI7XG5pbXBvcnQgeyBWaXN0YVJlZ2lzdHJvRGlhcmlvIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci92aWV3cy92aXN0YVJlZ2lzdHJvRGlhcmlvXCI7XG5pbXBvcnQgR1BUaG9yYSBmcm9tIFwiLi9tb2R1bGVzL0dQVGhvcmEvR1BUaG9yYVwiO1xuaW1wb3J0IHsgbGlicm9zQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9MaWJyb3MvbGlicm9zQVBJXCI7XG5pbXBvcnQgeyB1cGRhdGVTZXNpb25MZWN0dXJhIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXBkYXRlU2VzaW9uTGVjdHVyYVwiO1xuaW1wb3J0IHsgVGFyZWFzQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy90YXNrTWFuYWdlci9hcGkvdGFyZWFzQVBJXCI7XG5pbXBvcnQgeyBNb2R1bG9UYWJUaXRsZSB9IGZyb20gJy4vbW9kdWxlcy9tb2R1bG9UYWJUaXRsZSc7XG5pbXBvcnQgeyBNb2R1bG9UYXNrTWFuYWdlciB9IGZyb20gJy4vbW9kdWxlcy90YXNrTWFuYWdlcic7XG5pbXBvcnQgeyBNb2R1bG9EYXRhdmlld1F1ZXJpZXMgfSBmcm9tICcuL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzJztcbmltcG9ydCB7IFRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvdGFza0V4ZWN1dGlvbk5hdmlnYXRvcic7XG5pbXBvcnQgeyBUYXNrTmF2aWdhdG9yTW9kdWxlIH0gZnJvbSBcIi4vbW9kdWxlcy90YXNrTmF2aWdhdG9yL21vZHVsZVwiO1xuaW1wb3J0IHsgRW50cmVnYWJsZUZpZWxkSGFuZGxlciB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9FbnRyZWdhYmxlRmllbGRIYW5kbGVyXCI7XG5pbXBvcnQgeyBTZWxlY2Npb25NdWx0aXBsZU1vZGFsIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWxcIjtcbmltcG9ydCB7IERhdGVQaWNrZXJNb2RhbCB9IGZyb20gXCIuL21vZHVsZXMvbW9kYWxlcy9kYXRlUGlja2VyTW9kYWxcIjtcbmltcG9ydCB7IFNwaW5uZXJNb2RhbCB9IGZyb20gXCIuL21vZHVsZXMvbW9kYWxlcy9zcGlubmVyTW9kYWxcIjtcbmltcG9ydCB7IFBlZGlkb3NDbGllbnRlTW9kYWwgfSBmcm9tIFwiLi9tb2R1bGVzL21vZGFsZXMvcGVkaWRvc0NsaWVudGVNb2RhbFwiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFuYWdlbWVudFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBQbHVnaW5NYWluU2V0dGluZ3MgfCB1bmRlZmluZWQ7XG4gIC8vIERlY2xhcmEgdW5hIHByb3BpZWRhZCBgc2V0dGluZ3NgIHBhcmEgYWxtYWNlbmFyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLlxuICBzdGF0dXNCYXJFeHRlbnNpb246IFN0YXR1c0JhckV4dGVuc2lvbiB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogTW9kdWxvUmVnaXN0cm9UaWVtcG8gfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9HVEQ6IE1vZHVsb0dURCB8IG51bGwgPSBudWxsO1xuICAvL21vZHVsb1RlcmNlcm9zOiBNb2R1bG9UZXJjZXJvcyB8IG51bGwgPSBudWxsO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc1JUOiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc01COiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc0dURDogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNfVGVyY2Vyb3M6IHN0cmluZ1tdID0gW107XG4gIHJpYmJvbkJ1dHRvblJUOiBSZXR1cm5UeXBlPFBsdWdpbltcImFkZFJpYmJvbkljb25cIl0+IHwgbnVsbCA9IG51bGw7XG4gIGFwcDogYW55O1xuICByZWdpc3Ryb1RpZW1wb0FQSTogcmVnaXN0cm9UaWVtcG9BUEkgfCB1bmRlZmluZWQ7XG4gIHN0YXJ0ZXJBUEk6IHN0YXJ0ZXJBUEkgfCB1bmRlZmluZWQ7XG4gIGFkZE9uc0FQSTogYWRkT25zQVBJIHwgdW5kZWZpbmVkO1xuICBtZW51SG95QVBJOiBtZW51SG95QVBJIHwgdW5kZWZpbmVkO1xuICBtZW51U2VtYW5hbEFQSTogbWVudVNlbWFuYWxBUEkgfCB1bmRlZmluZWQ7XG4gIHN1YnNpc3RlbWFzQVBJOiBzdWJzaXN0ZW1hc0FQSSB8IHVuZGVmaW5lZDtcbiAgbGlicm9zQVBJOiBsaWJyb3NBUEkgfCB1bmRlZmluZWQ7XG4gIG5ld0luYm94OiBhbnk7XG4gIHRwOiBhbnk7XG4gIHRhcmVhc0FQSTogVGFyZWFzQVBJIHwgdW5kZWZpbmVkO1xuICBtb2R1bG9UYWJUaXRsZTogTW9kdWxvVGFiVGl0bGUgfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvVGFza01hbmFnZXI6IE1vZHVsb1Rhc2tNYW5hZ2VyIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb0RhdGF2aWV3UXVlcmllczogTW9kdWxvRGF0YXZpZXdRdWVyaWVzIHwgbnVsbCA9IG51bGw7XG4gIHRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGU6IFRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGUgfCBudWxsID0gbnVsbDtcbiAgdGFza05hdmlnYXRvck1vZHVsZTogVGFza05hdmlnYXRvck1vZHVsZSB8IG51bGwgPSBudWxsO1xuICAvLyBEZWNsYXJhIHVuYSBwcm9waWVkYWQgcGFyYSBtYW50ZW5lciB1bmEgaW5zdGFuY2lhIGRlIGBTdGF0dXNCYXJFeHRlbnNpb25gLlxuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG5cbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCIsXG4gICAgICAobGVhZikgPT4gbmV3IFZpc3RhUmVnaXN0cm9BY3Rpdm8obGVhZiwgdGhpcylcbiAgICApO1xuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgXCJ2aXN0YS1yZXN1bWVuLXNlbWFuYWxcIixcbiAgICAgIChsZWFmKSA9PiBuZXcgVmlzdGFSZXN1bWVuU2VtYW5hbChsZWFmLCB0aGlzKVxuICAgICk7XG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiLFxuICAgICAgKGxlYWYpID0+IG5ldyBWaXN0YVJlZ2lzdHJvRGlhcmlvKGxlYWYsIHRoaXMpXG4gICAgKTtcblxuICAgIC8vIGNhcmdhciBBUEkgcmVnaXN0cm8gVGllbXBvXG4gICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzKTtcbiAgICB0aGlzLnN0YXJ0ZXJBUEkgPSBuZXcgc3RhcnRlckFQSSh0aGlzKTtcbiAgICB0aGlzLmFkZE9uc0FQSSA9IG5ldyBhZGRPbnNBUEkodGhpcyk7XG4gICAgdGhpcy5ZQU1MVXBkYXRlckFQSSA9IG5ldyBZQU1MVXBkYXRlckFQSSh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZVNlc2lvbkxlY3R1cmEgPSBuZXcgdXBkYXRlU2VzaW9uTGVjdHVyYSh0aGlzKTtcbiAgICB0aGlzLm1lbnVIb3lBUEkgPSBuZXcgbWVudUhveUFQSSh0aGlzKTtcbiAgICB0aGlzLm1lbnVTZW1hbmFsQVBJID0gbmV3IG1lbnVTZW1hbmFsQVBJKHRoaXMpO1xuICAgIHRoaXMuc3Vic2lzdGVtYXNBUEkgPSBuZXcgc3Vic2lzdGVtYXNBUEkodGhpcyk7XG4gICAgdGhpcy5saWJyb3NBUEkgPSBuZXcgbGlicm9zQVBJKHRoaXMpO1xuICAgIHRoaXMubmV3SW5ib3ggPSBpbmdyZXNhckJhbmRlamFFbnRyYWRhLmJpbmQodGhpcyk7XG4gICAgdGhpcy50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlID0gbmV3IFRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGUodGhpcyk7XG4gICAgdGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlID0gbmV3IFRhc2tOYXZpZ2F0b3JNb2R1bGUodGhpcyk7XG4gICAgLy8gQVx1MDBGMWFkZSBsYSBwZXN0YVx1MDBGMWEgZGUgY29uZmlndXJhY2lcdTAwRjNuIC1cbiAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFBsdWdpbk1haW5TZXR0aW5nc1RhYih0aGlzKSk7XG4gICAgLy8gSW5pY2lhbGl6YSBsYXMgaW5zdGFuY2lhcyBkZSBsb3MgbVx1MDBGM2R1bG9zXG4gICAgdGhpcy5zdGF0dXNCYXJFeHRlbnNpb24gPSBuZXcgU3RhdHVzQmFyRXh0ZW5zaW9uKHRoaXMpO1xuICAgIHRoaXMubW9kdWxvUmVnaXN0cm9UaWVtcG8gPSBuZXcgTW9kdWxvUmVnaXN0cm9UaWVtcG8odGhpcyk7XG4gICAgdGhpcy5tb2R1bG9CYXNlID0gbmV3IE1vZHVsb0Jhc2UodGhpcyk7XG4gICAgLy90aGlzLm1vZHVsb1RlcmNlcm9zID0gbmV3IE1vZHVsb1RlcmNlcm9zKHRoaXMpO1xuICAgIHRoaXMubW9kdWxvR1REID0gbmV3IE1vZHVsb0dURCh0aGlzKTtcbiAgICAvL3RoaXMuZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcyA9ICgpID0+IGdldFRhcmVhc1ZlbmNpZGFzQWJpZXJ0YXModGhpcyk7XG4gICAgLy90aGlzLm1vc3RyYXJUYXJlYXNWZW5jaWRhcyA9ICgpID0+IG1vc3RyYXJUYXJlYXNWZW5jaWRhcyh0aGlzKTtcbiAgICB0aGlzLnRhcmVhc0FQSSA9IG5ldyBUYXJlYXNBUEkodGhpcyk7XG4gICAgdGhpcy5tb2R1bG9UYWJUaXRsZSA9IG5ldyBNb2R1bG9UYWJUaXRsZSh0aGlzKTtcbiAgICB0aGlzLm1vZHVsb1Rhc2tNYW5hZ2VyID0gbmV3IE1vZHVsb1Rhc2tNYW5hZ2VyKHRoaXMpO1xuICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzID0gbmV3IE1vZHVsb0RhdGF2aWV3UXVlcmllcyh0aGlzKTtcbiAgICAvKlxuICAgICh0aGlzLmFwcCBhcyBhbnkpLmdwTWFuYWdlbWVudCA9IHtcbiAgICAgIGdldFRhcmVhc1ZlbmNpZGFzQWJpZXJ0YXM6ICgpID0+IHRoaXMudGFyZWFzQVBJLmdldFRhcmVhc1ZlbmNpZGFzQWJpZXJ0YXMoKSxcbiAgICAgIG1vc3RyYXJUYXJlYXNWZW5jaWRhczogKCkgPT4gdGhpcy50YXJlYXNBUEkubW9zdHJhclRhcmVhc1ZlbmNpZGFzKClcbiAgICB9O1xuICAgICovXG4gICAgdGhpcy5hcHBseUNvbmZpZ3VyYXRpb24oKTtcbiAgICAvLyBBcGxpY2EgbGEgY29uZmlndXJhY2lcdTAwRjNuIGluaWNpYWwgYmFzYWRhIGVuIGxvcyBhanVzdGVzIGNhcmdhZG9zIG8gcHJlZGV0ZXJtaW5hZG9zLlxuICAgIGNvbnNvbGUubG9nKFwiSW5pY2lhbmRvIGNhcmdhIGRlIHBsdWdpbiBkZSBHZXN0aVx1MDBGM24gUGVyc29uYWxcIik7XG5cbiAgICB0aGlzLnJlZ2lzdGVyR1BUaG9yYSgpO1xuICAgIC8vIEFjdGl2YWNpXHUwMEYzbiBkZSBtb2R1bG9UYWdUaXRsZVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb1RhYlRpdGxlKSB7XG4gICAgICB0aGlzLm1vZHVsb1RhYlRpdGxlPy5hY3RpdmF0ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm1vZHVsb1RhYlRpdGxlPy5kZWFjdGl2YXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9UYXNrTWFuYWdlcikge1xuICAgICAgICB0aGlzLm1vZHVsb1Rhc2tNYW5hZ2VyLmFjdGl2YXRlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb0RhdGF2aWV3UXVlcmllcykge1xuICAgICAgY29uc29sZS5sb2coJ01hbmFnZW1lbnRQbHVnaW46IEFwbGljYW5kbyBjb25maWd1cmFjaVx1MDBGM24gRGF0YXZpZXdRdWVyaWVzLi4uJyk7XG4gICAgICB0cnkge1xuICAgICAgICAgIGlmICghdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMuaXNBY3RpdmUoKSkge1xuICAgICAgICAgICAgICB0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcy5hY3RpdmF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gYXBwbHlDb25maWd1cmF0aW9uOicsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXM/LmRlYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgICAgIC8vIEFjdGl2YXIgZWwgbVx1MDBGM2R1bG8gc2kgZXN0XHUwMEUxIGNvbmZpZ3VyYWRvIGVuIHNldHRpbmdzIChvcGNpb25hbClcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFza0V4ZWN1dGlvbk5hdmlnYXRvck1vZHVsZSkge1xuICAgICAgICAgIHRoaXMudGFza0V4ZWN1dGlvbk5hdmlnYXRvck1vZHVsZT8uYWN0aXZhdGUoKTtcbiAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YXNrTmF2aWdhdG9yTW9kdWxlKSB7XG4gICAgICAgICAgdGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlPy5hY3RpdmF0ZSgpO1xuICAgICAgfVxuXG4gICAgXG4gIFxuICB9XG5cbiAgcmVnaXN0ZXJHUFRob3JhKCkge1xuICAgIGNvbnN0IGdwdEhvcmEgPSBuZXcgR1BUaG9yYSh0aGlzLmFwcCk7IC8vIENyZWFyIHVuYSBpbnN0YW5jaWEgZGUgR1BUaG9yYVxuICAgIGdwdEhvcmEub25sb2FkKCk7XG4gIH1cblxuICBhcHBseUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgLy8gTW9kdWxvIEJhc2UgZXMgZWwgbVx1MDBGM2R1bG8gc29icmUgZWwgcXVlIGVzdG95IGhhY2llbmRvIHBydWViYXMgZGUgZGVzYXJyb2xsby5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9CYXNlKSB7XG4gICAgICB0aGlzLm1vZHVsb0Jhc2U/LmFjdGl2YXRlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0Jhc2U/LmRlYWN0aXZhdGUodGhpcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvKSB7XG4gICAgICB0aGlzLm1vZHVsb1JlZ2lzdHJvVGllbXBvPy5hY3RpdmF0ZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbz8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIpIHtcbiAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uPy5hY3RpdmF0ZSgpO1xuICAgICAgLy8gU2kgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYG1vZHVsb0FsaWFzU3RhdHVzQmFyYCBlcyB2ZXJkYWRlcmEsIGFjdGl2YSBlbCBtXHUwMEYzZHVsby5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0dXNCYXJFeHRlbnNpb24/LmRlYWN0aXZhdGUoKTtcbiAgICAgIC8vIFNpIGVzIGZhbHNhLCBkZXNhY3RpdmEgZWwgbVx1MDBGM2R1bG8uXG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb0dURCkge1xuICAgICAgdGhpcy5tb2R1bG9HVEQ/LmFjdGl2YXRlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0dURD8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvVGFza01hbmFnZXIpIHtcbiAgICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXI/LmFjdGl2YXRlKCk7XG4gIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb1Rhc2tNYW5hZ2VyPy5kZWFjdGl2YXRlKCk7XG4gIH1cbiBcbiAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvRGF0YXZpZXdRdWVyaWVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBcGxpY2FuZG8gY29uZmlndXJhY2lcdTAwRjNuOiBBY3RpdmFuZG8gRGF0YXZpZXdRdWVyaWVzJyk7XG4gICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzPy5hY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBcGxpY2FuZG8gY29uZmlndXJhY2lcdTAwRjNuOiBEZXNhY3RpdmFuZG8gRGF0YXZpZXdRdWVyaWVzJyk7XG4gICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzPy5kZWFjdGl2YXRlKCk7XG4gICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MudGFza0V4ZWN1dGlvbk5hdmlnYXRvck1vZHVsZSkge1xuICAgICAgICAgICAgdGhpcy50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlPy5hY3RpdmF0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlPy5kZWFjdGl2YXRlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbmZpZ3VyYXIgZWwgbVx1MDBGM2R1bG8gVGFza05hdmlnYXRvclxuICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnRhc2tOYXZpZ2F0b3JNb2R1bGUpIHtcbiAgICAgICAgICAgIHRoaXMudGFza05hdmlnYXRvck1vZHVsZT8uYWN0aXZhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFza05hdmlnYXRvck1vZHVsZT8uZGVhY3RpdmF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAvL3RoaXMubW9kdWxvVGVyY2Vyb3M/LmFjdGl2YXRlKHRoaXMpO1xuICB9XG5cbiAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgLy8gQ1x1MDBGM2RpZ28gZGUgbGltcGllemEgYXF1XHUwMEVEXG4gICAgY29uc29sZS5sb2coXCJEZXNjYXJnYW5kbyBwbHVnaW4gR2VzdGlcdTAwRjNuIFBlcnNvbmFsXCIpO1xuICAgIGlmICh0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcykge1xuICAgICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMuZGVhY3RpdmF0ZSgpO1xuICB9XG5cbiAgICAgIGlmICh0aGlzLnRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGUpIHtcbiAgICAgICAgdGhpcy50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlLmRlYWN0aXZhdGUoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlKSB7XG4gICAgICB0aGlzLnRhc2tOYXZpZ2F0b3JNb2R1bGUuZGVhY3RpdmF0ZSgpO1xuICB9XG5cbiAgICBkZWxldGUgKHRoaXMuYXBwIGFzIGFueSkuZ3BNYW5hZ2VtZW50O1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGNhcmdhciBsYSBjb25maWd1cmFjaVx1MDBGM24gZGVzZGUgZWwgYWxtYWNlbmFtaWVudG8gZGUgT2JzaWRpYW4uXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgLy8gSW50ZW50YSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHkgbWV6Y2xhIGxvcyB2YWxvcmVzIGNhcmdhZG9zIGNvbiBsb3MgcHJlZGV0ZXJtaW5hZG9zLlxuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZ3VhcmRhciBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsIGVuIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgLy8gR3VhcmRhIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBhY3R1YWwuXG5cbiAgICB0aGlzLmFwcGx5Q29uZmlndXJhdGlvbigpO1xuICAgIC8vIFZ1ZWx2ZSBhIGFwbGljYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYXNlZ3VyYXJzZSBkZSBxdWUgbG9zIGNhbWJpb3MgcmVjaWVudGVzIHNlIHJlZmxlamVuIGlubWVkaWF0YW1lbnRlLlxuICB9XG5cbiAgZ2V0VHAoKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuYXBwIHx8XG4gICAgICAhdGhpcy5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIilcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICBsZXQgdHBHZW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICBsZXQgdHAgPSB7fTtcbiAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKChtKSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQoKG0pID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgIGlmICghdHAuc3lzdGVtKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJJbnN0YW5jaWEgZGUgdHAgY2FyZ2FkYSBzYXRpc2ZhY3RvcmlhbWVudGUgZW4gUGx1Z2luXCIpO1xuICAgIHJldHVybiB0cDtcbiAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFBsdWdpbk1haW5TZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29uZmlndXJhY2lcdTAwRjNuIGRlbCBwbHVnaW4gZGUgR2VzdGlcdTAwRjNuIFBlcnNvbmFsJyB9KTtcblxuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yZXMgcGFyYSBsYXMgcGVzdGFcdTAwRjFhcyB5IGVsIGNvbnRlbmlkbyBkZSBsYXMgcGVzdGFcdTAwRjFhc1xuICAgICAgICBjb25zdCB0YWJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0YWItY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3QgdGFiQ29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RhYi1jb250ZW50LWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgLy8gRGVmaW5lIGxvcyB0XHUwMEVEdHVsb3MgZGUgbGFzIHBlc3RhXHUwMEYxYXNcbiAgICAgICAgY29uc3QgdGFiVGl0bGVzID0gWydBY3RpdmFyIE1cdTAwRjNkdWxvcycsICdEaXJlY3RvcmlvcyBTdWJzaXN0ZW1hcycsICdQZXN0YVx1MDBGMWEgMyddO1xuXG4gICAgICAgIC8vIENyZWFyIHBlc3RhXHUwMEYxYXMgeSBjb250ZW5pZG8gZXNwZWNcdTAwRURmaWNvXG4gICAgICAgIHRhYlRpdGxlcy5mb3JFYWNoKCh0aXRsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWFyIGJvdG9uZXMgZGUgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RhYi1saW5rJyk7XG4gICAgICAgICAgICB0YWJCdXR0b24uZGF0YXNldC50YWIgPSBgdGFiJHtpbmRleH1gO1xuICAgICAgICAgICAgdGFiQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9wZW5UYWIoYHRhYiR7aW5kZXh9YCk7XG4gICAgICAgICAgICB0YWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQnV0dG9uKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXIgY29udGVuaWRvIGRlIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgY29uc3QgdGFiQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFiQ29udGVudC5pZCA9IGB0YWIke2luZGV4fWA7XG4gICAgICAgICAgICB0YWJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3RhYi1jb250ZW50Jyk7XG4gICAgICAgICAgICB0YWJDb250ZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHRhYkNvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyBJbmljaWFsbWVudGUgb2N1bHRhciBlbCBjb250ZW5pZG8gZGUgbGEgcGVzdGFcdTAwRjFhLCBleGNlcHRvIGVsIHByaW1lcm9cbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHRhYkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgcHJpbWVyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1ZlciBBbGlhcyBlbiBlbCBTdGF0dXMgQmFyJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRWxpZ2Ugc2kgZGVzZWFzIHZlciBlbCBBbGlhc2VzIGRlIGxhcyBub3RhcyBlbiBlbCBTdGF0dXMgQmFyLicpXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBNXHUwMEYzZHVsbyBSZWdpc3RybyBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FjdGl2YXIgTVx1MDBGM2R1bG8gQmFzZSAtIFBydWViYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHBydWViYXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQmFzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0Jhc2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7dGV4dDogJ05hdmVnYWRvciBkZSBUYXJlYXMnfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdUYXNrIEV4ZWN1dGlvbiBOYXZpZ2F0b3InKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnUGVybWl0ZSBuYXZlZ2FyIHJcdTAwRTFwaWRhbWVudGUgYSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM24nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udGFza0V4ZWN1dGlvbk5hdmlnYXRvck1vZHVsZT8uYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50YXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlPy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSBzZWd1bmRhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgbWFuZWphciBlbCBjbGljIGVuIGVsIHRcdTAwRUR0dWxvIGRlbCBibG9xdWUgZGVzcGxlZ2FibGVcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVDb2xsYXBzZSA9IChldmVudDogeyB0YXJnZXQ6IHsgbmV4dEVsZW1lbnRTaWJsaW5nOiBhbnk7IGlubmVySFRNTDogc3RyaW5nOyBnZXRBdHRyaWJ1dGU6IChhcmcwOiBzdHJpbmcpID0+IHN0cmluZzsgfTsgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RWxlbWVudCA9IGV2ZW50LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICcmIzk2NjA7ICcgKyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7IC8vIENhbWJpYSBlbCBpY29ubyBhIFwiYWJham9cIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAnJiM5NjU0OyAnICsgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpOyAvLyBDYW1iaWEgZWwgaWNvbm8gYSBcImRlcmVjaGFcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJBbm90YWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkFub3RhY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBbm90YWNpb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYW5vdGFjaW9uZXNDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQW5vdGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiB0b2RhcyBsYXMgQW5vdGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Fub3RhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Fub3RhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhhbm90YWNpb25lc0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnSW5kaWNlIGRlIEFub3RhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsYXMgQW5vdGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Fub3RhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Fub3RhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciB1biBibG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkNhbXBhXHUwMEYxYXNcIiBlbiBlbCBtXHUwMEU5dG9kbyBkaXNwbGF5KClcbiAgICAgICAgICAgICAgICAvLyBFc3RvIGlyXHUwMEVEYSBlbiBsYSBzZWNjaVx1MDBGM24gZG9uZGUgZXN0XHUwMEUxbiBsb3MgZGVtXHUwMEUxcyBzdWJzaXN0ZW1hc1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FtcGFcdTAwRjFhc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQ2FtcGFcdTAwRjFhc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBjYW1wYVx1MDBGMWFzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJDYW1wYVx1MDBGMWFzXCInKTtcbiAgICAgICAgICAgICAgICBjYW1wYVx1MDBGMWFzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbXBhXHUwMEYxYXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBjYW1wYVx1MDBGMWFzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgY2FtcGFcdTAwRjFhc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNhbXBhXHUwMEYxYXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBDYW1wYVx1MDBGMWFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIGNhbXBhXHUwMEYxYXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQ2FtcGFcdTAwRjFhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQ2FtcGFcdTAwRjFhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY2FtcGFcdTAwRjFhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBDYW1wYVx1MDBGMWFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBjYW1wYVx1MDBGMWFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0NhbXBhXHUwMEYxYXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0NhbXBhXHUwMEYxYXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiJyB9KTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCInKTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2dDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBibG9nQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgYmxvZ1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJsb2dDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQXJ0XHUwMEVEY3Vsb3MgZGVsIEJsb2cnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgYXJ0XHUwMEVEY3Vsb3MgZGVsIGJsb2cuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FCbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FCbG9nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhibG9nQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdJbmRpY2UgZGUgQXJ0XHUwMEVEY3Vsb3MgZGVsIEJsb2cnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBhcnRcdTAwRURjdWxvcyBkZWwgYmxvZy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQUJsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQUJsb2cgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiRGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3NcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2Fycm9sbG9zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiRGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3NcIicpO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlc2Fycm9sbG9zQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIE9jdWx0YSBpbmljaWFsbWVudGUgbG9zIGFqdXN0ZXNcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIENhcnBldGEgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3NcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhkZXNhcnJvbGxvc0NvbnRlbnQpIC8vIFVzYW1vcyBgZGVzYXJyb2xsb3NDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgZGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Rlc2Fycm9sbG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Rlc2Fycm9sbG9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmFjaVx1MDBGM24gcGFyYSBcdTAwQ0RuZGljZSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRGVzYXJyb2xsb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiRXN0dWRpb1wiXG4gICAgICAgICAgICAgICAgY29uc3QgZXN0dWRpb1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiRXN0dWRpb1wiJyB9KTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJFc3R1ZGlvXCInKTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdHVkaW9Db250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBlc3R1ZGlvQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhlc3R1ZGlvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgVGVtYXMgZGUgRXN0dWRpbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyB0ZW1hcyBkZSBlc3R1ZGlvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Fc3R1ZGlvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0VzdHVkaW8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVzdHVkaW9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgRXN0dWRpbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIHRlbWFzIGRlIGVzdHVkaW8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0VzdHVkaW8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJHVERcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGd0ZFRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiR1REXCInIH0pO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiR1REXCInKTtcbiAgICAgICAgICAgICAgICBndGRUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3RkQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZ3RkQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FyY2hpdm8gZGUgQmFuZGVqYSBkZSBFbnRyYWRhLicpXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIEJhbmRlamEgZGUgZW50cmFkYSBHVEQuJylcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfSW5ib3gpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgICAgICAgICAgLy8gUHJveWVjdG9zIEdURFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBwYXJhIHByb3llY3RvcyBHVEQuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcm95ZWN0b3MgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIHByb3llY3RvcyBHVEQuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFJldmlzaVx1MDBGM24gU2VtYW5hbFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHJldmlzaW9uZXMgc2VtYW5hbGVzIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUlNHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUlNHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZXZpc2lvbmVzIFNlbWFuYWxlcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgbGFzIHJldmlzaW9uZXMgc2VtYW5hbGVzIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUlNHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUlNHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTGVjdHVyYVwiXG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYVRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTGVjdHVyYVwiJyB9KTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInKTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlY3R1cmFDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBsZWN0dXJhQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXNpb25lcyBkZSBMZWN0dXJhXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobGVjdHVyYUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFNlc2lvbmVzIGRlIExlY3R1cmEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBwYXJhIGxhcyBzZXNpb25lcyBkZSBsZWN0dXJhLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhU2VzaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTGVjdHVyYVNlc2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFNlc2lvbmVzIGRlIExlY3R1cmEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9MZWN0dXJhU2VzaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIExpYnJvcyB5IFJlc1x1MDBGQW1lbmVzXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobGVjdHVyYUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlc1x1MDBGQW1lbmVzIGRlIExpYnJvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbG9zIHJlc1x1MDBGQW1lbmVzIGRlIGxpYnJvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTGVjdHVyYVJlc3VtZW5lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJlc1x1MDBGQW1lbmVzIGRlIExpYnJvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsb3MgcmVzXHUwMEZBbWVuZXMgZGUgbGlicm9zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9MZWN0dXJhUmVzdW1lbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSBlc3RhbW9zIGRlbnRybyBkZSBpZiAoaW5kZXggPT09IDEpIHsgLi4uIH1cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTWVudG9yXHUwMEVEYXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTWVudG9yXHUwMEVEYXNcIicgfSk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZW50b3JpYXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBTZXNpb25lcyBkZSBNZW50b3JcdTAwRURhJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIHNlc2lvbmVzIGRlIG1lbnRvclx1MDBFRGEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZW50b3JpYXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lbnRvcmlhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBNZW50b3JcdTAwRURhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbGFzIHNlc2lvbmVzIGRlIG1lbnRvclx1MDBFRGEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZW50b3JpYXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlcGl0ZSBlbCBwYXRyXHUwMEYzbiBwYXJhIFwiTWVyY2Fkb1wiLCBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiLCB5IFwiUGFnb3NcIlxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNZXJjYWRvXCJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNZXJjYWRvXCInIH0pO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicpO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVyY2Fkb0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1lcmNhZG9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJNZXJjYWRvXCIsIHNpZ3VpZW5kbyBlbCBwYXRyXHUwMEYzbiBkZSBsYXMgbWVudG9yXHUwMEVEYXNcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZXJjYWRvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTGlzdGFkb3MgZGUgTWVyY2FkbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyBsaXN0YXMgZGUgbWVyY2Fkby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVyY2FkbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZXJjYWRvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIGxpc3RhZG9zIGRlIG1lcmNhZG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBsaXN0YWRvcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lcmNhZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kdWxvc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCInIH0pO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiJyk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bG9zQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiXG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtb2R1bG9zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTW9kdWxvcyBkZWwgU2lzdGVtYSBkZSBHZXN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIG1cdTAwRjNkdWxvcyBkZWwgU2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01vZHVsb3NTaXN0ZW1hID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtb2R1bG9zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIGxvcyBNb2R1bG9zIGRlbCBzaXN0ZW1hIGRlIEdlc3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBNXHUwMEYzZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Nb2R1bG9zU2lzdGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Nb2R1bG9zU2lzdGVtYSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiVHJhbnNhY2Npb25lcyB5IFBhZ29zXCJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJUcmFuc2FjY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcInRyYW5zYWNjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgdHJhbnNhY2Npb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHRyYW5zYWNjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJQYWdvc1wiXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodHJhbnNhY2Npb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE1vZHVsb3MgZGVsIFNpc3RlbWEgZGUgVHJhbnNhY2Npb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBjb21wcm9iYW50ZXMgZGUgbGFzIHRyYW5zYWNjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1RyYW5zYWNjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVHJhbnNhY2Npb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodHJhbnNhY2Npb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBUcmFuc2FjY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBUcmFuc2FjY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9UcmFuc2FjY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1RyYW5zYWNjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByZXNlbnRhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlByZXNlbnRhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE5vdGFzIGRlIFByZXNlbnRhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIG5vdGFzIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJlc2VudGFjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJlc2VudGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQcm95ZWN0b3MgZGUgUVwiXG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUVRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJveWVjdG9zUUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFByb3llY3RvcyBkZSBRJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByb3llY3Rvc1FDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBmdW5jaVx1MDBGM24gdG9nZ2xlQ29sbGFwc2UgZXN0XHUwMEUxIGRlZmluaWRhIGNvbW8gc2UgaW5kaWNcdTAwRjMgYW50ZXJpb3JtZW50ZS5cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUHVibGljYWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljYWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHVibGljYWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQdWJsaWNhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY2FjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBQaWV6YXMgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyBwaWV6YXMgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QdWJsaWNhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwdWJsaWNhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFB1YmxpY2FjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHB1YmxpY2FjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1B1YmxpY2FjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWNldGFzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWNldGFzXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZXRhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWNldGFzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjZXRhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWNldGFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY2V0YXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY2V0YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjZXRhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY3Vyc29zIFJlY3VycmVudGVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUmVnaXN0cm8gVGllbXBvXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb1RpZW1wb1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVnaXN0cm8gVGllbXBvXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWdpc3RybyBUaWVtcG9cIicpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlZ2lzdHJvVGllbXBvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVnaXN0cm9zIGRlIFRpZW1wbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVnaXN0cm9UaWVtcG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVnaXN0cm8gZGUgVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuXG5cblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgdGVyY2VyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gJ0ZlY2hhJztcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5wdXQgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGVJbnB1dC50eXBlID0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZXN0aWxvcyBDU1MgcGFyYSBlc3BhY2lhZG8geSBvcmdhbml6YWNpXHUwMEYzblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50IHsgZGlzcGxheTogbm9uZTsgcGFkZGluZy10b3A6IDIwcHg7IH0gLy8gQVx1MDBGMWFkaWRvIHBhZGRpbmctdG9wIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICAgICAgICAgIC50YWItY29udGVudC5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluayB7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogNXB4IDEwcHg7IG1hcmdpbi1yaWdodDogNXB4OyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICAgICAgICAgICAgICAudGFiLWxpbmsuYWN0aXZlIHsgYmFja2dyb3VuZDogI2UwZTBlMDsgfVxuICAgICAgICAgICAgICAgIC5zZXR0aW5nLWl0ZW0geyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgICAgICBcblxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYW1iaWFyIGxhIHBlc3RhXHUwMEYxYSBhY3RpdmFcbiAgICAgICAgdGhpcy5vcGVuVGFiID0gKHRhYk5hbWUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItbGluaycpLmZvckVhY2gobGluayA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYj1cIiR7dGFiTmFtZX1cIl1gKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWJDb250ZW50KSBhY3RpdmVUYWJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkxpbmspIGFjdGl2ZVRhYkxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBYnJpciBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYSBwb3IgZGVmZWN0b1xuICAgICAgICB0aGlzLm9wZW5UYWIoJ3RhYjAnKTtcbiAgICB9XG4gICAgb3BlblRhYihhcmcwOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvQmFzZSB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG4gICAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZHVsb0Jhc2UpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGFjdGl2bywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgICAgXG4gICAgfVxuXG5cbn0iLCAiXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJDYXJwZXRhKHJ1dGFDYXJwZXRhOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgeWEgZXhpc3RlXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgaWYgKGNhcnBldGFFeGlzdGVudGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKHJ1dGFDYXJwZXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDYXJwZXRhICcke3J1dGFDYXJwZXRhfScgY3JlYWRhIGV4aXRvc2FtZW50ZS5gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7cnV0YUNhcnBldGF9JzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyUGxhbnRpbGxhKGNvbnRlbmlkbzogc3RyaW5nKTogUHJvbWlzZTxURmlsZT4ge1xuICAgIC8vIERlZmluZSBsYSBydXRhIHkgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIHRlbXBvcmFsXG4gICAgY29uc3QgZm9sZGVyID0gJ1BsYW50aWxsYXMnO1xuICAgIGxldCBmaWxlbmFtZSA9IFwiQXJjaGl2byBEZSBQbGFudGlsbGFcIlxuICAgIGxldCBwYXRoVGVtcG9yYWwgPSBmb2xkZXIgKyBcIi9cIiArIGZpbGVuYW1lICsgXCIubWRcIjtcblxuICAgIC8vIENyZWEgZWwgYXJjaGl2byBlbiBsYSBiXHUwMEYzdmVkYSB5IGd1YXJkYSBlbCBhcmNoaXZvIGNyZWFkbyBlbiB1bmEgdmFyaWFibGVcbiAgICBjb25zdCBhcmNoaXZvQ3JlYWRvOiBURmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUocGF0aFRlbXBvcmFsLCBjb250ZW5pZG8pO1xuXG4gICAgLy8gQXF1XHUwMEVEIG5lY2VzaXRhclx1MDBFRGFzIHByb2Nlc2FyIGVsIGFyY2hpdm8gY29uIFRlbXBsYXRlciBzaSBlcyBuZWNlc2FyaW9cbiAgICAvLyBFc3RvIGRlcGVuZGUgZGUgY1x1MDBGM21vIFRlbXBsYXRlciBleHBvbmdhIHN1IGZ1bmNpb25hbGlkYWQgYSBvdHJvcyBwbHVnaW5zXG4gICAgLy8gUG9yIGVqZW1wbG8sIHNpIFRlbXBsYXRlciB0aWVuZSB1biBtXHUwMEU5dG9kbyBwYXJhIHByb2Nlc2FyIGFyY2hpdm9zLCBsbyB1c2FyXHUwMEVEYXMgYXF1XHUwMEVEXG5cbiAgICAvLyAoT3BjaW9uYWwpIEVsaW1pbmEgZWwgYXJjaGl2byBkZXNwdVx1MDBFOXMgZGUgcHJvY2VzYXJsbyBzaSBubyBkZXNlYXMgY29uc2VydmFybG9cbiAgICAvLyBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGFyY2hpdm9DcmVhZG8pO1xuXG4gICAgLy8gUmV0b3JuYSBlbCBhcmNoaXZvIGNyZWFkb1xuICAgIHJldHVybiBhcmNoaXZvQ3JlYWRvO1xufVxuIiwgImltcG9ydCB7TW9kYWx9IGZyb20gJ29ic2lkaWFuJztcblxuY2xhc3MgRmlsZUxpbmtNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIC8vIEFwbGljYXIgZXN0aWxvcyBmbGV4Ym94IHBhcmEgY2VudHJhciBjb250ZW5pZG9cbiAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuaGVpZ2h0ID0gJzUwJSc7ICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgbW9kYWwgb2N1cGUgdG9kbyBlbCBlc3BhY2lvIGRpc3BvbmlibGVcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnSW5zZXJ0YXIgZWwgbGluayBkZSB1biBhcmNoaXZvLicsXG4gICAgICAgICAgICBhdHRyOiB7IHN0eWxlOiAndGV4dC1hbGlnbjogY2VudGVyOycgfSAgLy8gQXNlZ3VyYSBxdWUgZWwgdGV4dG8gZGVsIHRcdTAwRUR0dWxvIGVzdFx1MDBFOSBjZW50cmFkbyBzaSBlcyBtXHUwMEUxcyBsYXJnbyBxdWUgdW5hIGxcdTAwRURuZWFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgZWwgaW5wdXQgeSBlbCBib3RcdTAwRjNuXG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBpbnB1dENvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnMTBweCc7XG4gICAgICAgIFxuICAgICAgICAvLyBJbnB1dCBkZSBhcmNoaXZvIG9jdWx0b1xuICAgICAgICBjb25zdCBmaWxlSW5wdXQgPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9KTtcbiAgICAgICAgZmlsZUlucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgc2VsZWNjaW9uYXIgYXJjaGl2b1xuICAgICAgICBjb25zdCBmaWxlQnV0dG9uID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdTZWxlY2Npb25lIHN1IGFyY2hpdm8nLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUucGFkZGluZyA9ICc1cHggMTBweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUubWFyZ2luVG9wID0gJzVweCc7XG4gICAgICAgIGZpbGVCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICBmaWxlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBmaWxlSW5wdXQuY2xpY2soKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZW50byBwYXJhIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuIGFyY2hpdm9cbiAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXTtcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRMaW5rQXRDdXJzb3IoZmlsZS5wYXRoLCBmaWxlLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5zZXJ0TGlua0F0Q3Vyc29yKGZpbGVQYXRoLCBmaWxlTmFtZSkge1xuICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgICAgIGlmIChhY3RpdmVMZWFmKSB7XG4gICAgICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVMZWFmLnZpZXcuc291cmNlTW9kZS5jbUVkaXRvcjtcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gYFske2ZpbGVOYW1lfV0oPGZpbGU6Ly8ke2ZpbGVQYXRofT4pYDtcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UobGlua1RleHQsIGN1cnNvcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuXG4vLyBGdW5jaVx1MDBGM24gcGFyYSBhYnJpciBlbCBtb2RhbCBwZXJzb25hbGl6YWRvXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RmlsZUxpbmsoYXBwKSB7XG4gICAgbmV3IEZpbGVMaW5rTW9kYWwoYXBwKS5vcGVuKCk7XG59XG4iLCAiaW1wb3J0IHtjcmVhckNhcnBldGF9IGZyb20gXCIuL3V0aWxzL2NyZWFyQ2FycGV0YVwiXG5pbXBvcnQge2NyZWFyUGxhbnRpbGxhfSBmcm9tIFwiLi91dGlscy9jcmVhclBsYW50aWxsYVwiXG5pbXBvcnQge2luc2VydEZpbGVMaW5rfSBmcm9tIFwiLi91dGlscy9maWxlTGlua01vZGFsXCJcbmltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGV9IGZyb20gXCIuL3V0aWxzL2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGVcIlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuXG5cbiAgICBjb25zdCBjb21hbmRvMSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiQ3JlYWNpb24tQ2FycGV0YVwiLFxuICAgICAgICBuYW1lOiBcIkNyZWFjaVx1MDBGM24gZGUgQ2FycGV0YVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGF3YWl0IGNyZWFyQ2FycGV0YSgnTWkgQ2FycGV0YSBkZSBwbHVnaW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzEuaWQpO1xuXG5cbiAgICBjb25zdCBjb21hbmRvMyA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiY3JlYXItYXJjaGl2by10ZW1wbGF0ZVwiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIGFyY2hpdm8gZGVzZGUgdGVtcGxhdGVcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcGx1Z2luSWQgPSAndGVtcGxhdGVyLW9ic2lkaWFuJztcbiAgICAgICAgICAgIGNvbnN0IGlzUGx1Z2luSW5zdGFsbGVkID0gcGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcyhwbHVnaW5JZCk7XG4gICAgICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW3BsdWdpbklkXTtcbiAgICAgICAgICAgIC8vIEludGVudGEgb2J0ZW5lciBsYSBwbGFudGlsbGEgY29tbyBURmlsZVxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlID0gXCJQbGFudGlsbGFzL0Fub3RhY2lvbmVzL1BsdCAtIEFub3RhY2lvbmVzLm1kXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEludGVudGEgb2J0ZW5lciBsYSBjYXJwZXRhIGNvbW8gVEZvbGRlclxuICAgICAgICAgICAgbGV0IGZvbGRlck9iaiA9IHBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgICAgICBpZiAoIShmb2xkZXJPYmogaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJMYSBjYXJwZXRhIGVzcGVjaWZpY2FkYSBubyBleGlzdGUgbyBubyBlcyB1bmEgY2FycGV0YS5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTYWxpciBzaSBubyBzZSBlbmN1ZW50cmEgbGEgY2FycGV0YSBvIG5vIGVzIHVuYSBjYXJwZXRhXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBmaWxlTmFtZSA9IFwidG9EZWZpbmVcIlxuICAgICAgICAgICAgbGV0IG9wZW5Ob3RlID0gdHJ1ZVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgYXJjaGl2byA9IGF3YWl0IGNyZWF0ZU5vdGVGcm9tVGVtcGxhdGUocGx1Z2luLCB0ZW1wbGF0ZSwgZm9sZGVyT2JqLCBmaWxlTmFtZSwgb3Blbk5vdGUpO1xuXG4gICAgICAgICAgICBpZiAoIWFyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMy5pZCk7XG5cblxuICAgIGNvbnN0IGNvbWFuZG80ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1saW5rLUFyY2hpdm9cIixcbiAgICAgICAgbmFtZTogXCJDcmVhciB1biBsaW5rIGEgYXJjaGl2byBkZWwgRGlzY28uXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaW5zZXJ0RmlsZUxpbmsoYXBwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvNC5pZCk7XG5cblxuICAgIC8vIENyZWFjaVx1MDBGM24geSByZWdpc3RybyBkZWwgY29tYW5kby5cbiAgICBjb25zdCBjb21hbmRvNSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiYWJyaXItbm90YS1hY3RpdmFcIixcbiAgICAgICAgbmFtZTogXCJBYnJpciBOb3RhIEFjdGl2YVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICBcbiAgICAgICAvLyBBc2VndXJhIHF1ZSBubyBoYXlhIGR1cGxpY2Fkb3MgZGUgbGEgdmlzdGEuXG4gICAgICAgYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1ub3RhLWFjdGl2YVwiKTtcblxuICAgICAgIC8vIEFicmUgbGEgdmlzdGEgZW4gdW5hIG51ZXZhIGhvamEuXG4gICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSkuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1ub3RhLWFjdGl2YVwiLFxuICAgICAgIH0pO1xuXG4gICAgICAgLy8gQWN0aXZhIGxhIG51ZXZhIGhvamEgcGFyYSBlbCB1c3VhcmlvLlxuICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcbiAgICAgICAgICAgYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1ub3RhLWFjdGl2YVwiKVswXVxuICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG81LmlkKTtcblxuXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CKSByZXR1cm47XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gcG9kclx1MDBFRGFzIG1hbmVqYXIgbGEgXCJkZXNhY3RpdmFjaVx1MDBGM25cIiBkZSBjb21hbmRvcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsICJpbXBvcnQge1RGaWxlLCBURm9sZGVyfSBmcm9tIFwib2JzaWRpYW5cIlxuLyoqXG4gKiBDcmVhIHVuYSBudWV2YSBub3RhIGEgcGFydGlyIGRlIHVuYSBwbGFudGlsbGEgdXRpbGl6YW5kbyBlbCBwbHVnaW4gVGVtcGxhdGVyLlxuICogQHBhcmFtIHRlbXBsYXRlclBsdWdpbiBSZWZlcmVuY2lhIGFsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGUgTGEgcGxhbnRpbGxhIGEgdXRpbGl6YXIsIHB1ZWRlIHNlciB1biBURmlsZSBvIGVsIHBhdGggY29tbyBzdHJpbmcuXG4gKiBAcGFyYW0gZm9sZGVyIEVsIGZvbGRlciBkb25kZSBzZSBjcmVhclx1MDBFMSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBmaWxlbmFtZSBFbCBub21icmUgZGVsIGFyY2hpdm8gZGUgbGEgbnVldmEgbm90YS4gT3BjaW9uYWwuXG4gKiBAcGFyYW0gb3Blbk5ld05vdGUgU2kgc2UgZGViZSBhYnJpciBsYSBudWV2YSBub3RhIHRyYXMgY3JlYXJsYS4gUG9yIGRlZmVjdG8gZXMgdHJ1ZS5cbiAqIEByZXR1cm5zIFByb21pc2UgcXVlIHJlc3VlbHZlIGEgVEZpbGUgc2kgbGEgbm90YSBmdWUgY3JlYWRhLCB1bmRlZmluZWQgZW4gY2FzbyBjb250cmFyaW8uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RlRnJvbVRlbXBsYXRlKFxuICAgIHBsdWdpbjogUGx1Z2luLCAvLyBFc3RhIGVzIHVuYSBzdXBvc2ljaVx1MDBGM24sIG5lY2VzaXRhclx1MDBFMXMgYWp1c3RhciBzZWdcdTAwRkFuIGNcdTAwRjNtbyBhY2NlZGFzIGEgVGVtcGxhdGVyIGVuIHR1IHBsdWdpblxuICAgIHRlbXBsYXRlOiBURmlsZSB8IHN0cmluZyxcbiAgICBmb2xkZXI/OiBURm9sZGVyLFxuICAgIGZpbGVuYW1lPzogc3RyaW5nLFxuICAgIG9wZW5OZXdOb3RlOiBib29sZWFuID0gdHJ1ZVxuKTogUHJvbWlzZTxURmlsZSB8IHVuZGVmaW5lZD4ge1xuICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIHBsdWdpbiBUZW1wbGF0ZXIgZXN0XHUwMEUxIGluc3RhbGFkbyB5IGhhYmlsaXRhZG9cbiAgICBpZiAoIXBsdWdpbiB8fCAhcGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlNcbiAgICBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSBwbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICBcblxuICAgIGlmICghdHApIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICByZXR1cm47XG59XG4gICAgLy8gdGVtcGxhdGVGaWxlIHB1ZWRlIHNlciB1biBzdHJpbmcgbyBlbCB0ZmlsZSBvYnRlbmlkbyBkZSBlc3RhIG1hbmVyYSBvIGNvbiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKClcbiAgICBkZWJ1Z2dlclxuICAgIGxldCB0ZW1wbGF0ZUZpbGUgPSB0cC5maWxlLmZpbmRfdGZpbGUodGVtcGxhdGUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld05vdGUgPSBhd2FpdCB0cC5maWxlLmNyZWF0ZV9uZXcodGVtcGxhdGVGaWxlLCBmaWxlbmFtZSwgb3Blbk5ld05vdGUsIGZvbGRlcik7XG4gICAgICAgIHJldHVybiBuZXdOb3RlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGxhIG5vdGEgZGVzZGUgbGEgcGxhbnRpbGxhOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZWdpc3RlclJpYmJvbk1lbnUgfSBmcm9tIFwiLi91aS9yaWJib25CdXR0b25cIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGVNb2R1bG9CdXNxdWVkYUF2YW56YWRhKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgcmVnaXN0ZXJSaWJib25NZW51KHBsdWdpbik7XG59IiwgImltcG9ydCB7IEFwcCwgTWVudSwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbCB9IGZyb20gXCIuL21vZGFsXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHRlbmVyIGVsIGltcG9ydCBjb3JyZWN0byBwYXJhIHR1IG1vZGFsXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBFc3RlIGVzIGVsIFx1MDBFRGNvbm8gZGVsIG1lblx1MDBGQSBlbiBlbCByaWJib24sIGNhbWJpYSBcImRpY2VcIiBwb3IgZWwgXHUwMEVEY29ubyBxdWUgcHJlZmllcmFzXG4gICAgcGx1Z2luLmFkZFJpYmJvbkljb24oXCJmb2xkZXItc2VhcmNoLTJcIiwgXCJCXHUwMEZBc3F1ZWRhIEF2YW56YWRhXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAvLyBDcmVhciBlbCBtZW5cdTAwRkEgYWwgaGFjZXIgY2xpYyBlbiBlbCBcdTAwRURjb25vXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShwbHVnaW4uYXBwKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIG9wY2lvbmVzIGFsIG1lblx1MDBGQVxuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgVmlkYVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiXHUwMEMxcmVhcyBkZSBWaWRhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3JyZWNjaVx1MDBGM246IEFzZWdcdTAwRkFyYXRlIGRlIGFicmlyIGVsIG1vZGFsIGNvcnJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwocGx1Z2luLmFwcCwgKGVzdGFkb1NlbGVjY2lvbmFkbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFc3RhZG8gc2VsZWNjaW9uYWRvOlwiLCBlc3RhZG9TZWxlY2Npb25hZG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBjb250aW51YXIgY29uIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFuZWphciBlbCBlc3RhZG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTsgLy8gQ29ycmVnaWRvOiBBXHUwMEYxYWRpZG8gLm9wZW4oKSBwYXJhIGFicmlyIGVsIG1vZGFsXG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQW5vdGFjaVx1MDBGM25cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFub3RhY2lcdTAwRjNuXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiQW5vdGFjaVx1MDBGM25cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFub3RhY2lcdTAwRjNuXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWN1cnNvIFJlY3VycmVudGVcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlY3Vyc28gUmVjdXJyZW50ZVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHZXN0aVx1MDBGM24gRGlhcmlhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUmVnaXN0cm8gZGUgVGllbXBvXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3RybyBkZSBUaWVtcG9cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJSZWdpc3RybyBkZSBUaWVtcG9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTW9zdHJhciBlbCBtZW5cdTAwRkEgZW4gbGEgcG9zaWNpXHUwMEYzbiBkZWwgY3Vyc29yXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZ1enp5Tm90ZVN1Z2dlc3RlciB9IGZyb20gXCIuLi9zZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBydXRhIGRlIGltcG9ydGFjaVx1MDBGM24gc2VhIGNvcnJlY3RhXG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgZXN0YWRvU2VsZWNjaW9uYWRvOiBzdHJpbmcgPSBcIlx1RDgzRFx1REZFMlwiOyAvLyBFc3RhZG8gcG9yIGRlZmVjdG8gY29tbyBlbW9qaSBkaXJlY3RhbWVudGVcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdEVzdGFkbzogKGVzdGFkbzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TZWxlY3RFc3RhZG8gPSBvblNlbGVjdEVzdGFkbztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkJ1c2NhciBcdTAwQzFyZWFzIGRlIFZpZGFcIiB9KTtcblxuICAgICAgICAvLyBVc2FuZG8gU2V0dGluZyBwYXJhIGNyZWFyIGVsIERyb3Bkb3duXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRXN0YWRvXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVsaWdlIGVsIGVzdGFkbzpcIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9ucyh7IFwiXHVEODNEXHVERkUyXCI6IFwiVmVyZGVcIiwgXCJcdUQ4M0RcdUREMzVcIjogXCJBenVsXCIsIFwiXHVEODNEXHVERkUxXCI6IFwiQW1hcmlsbG9cIiwgXCJcdUQ4M0RcdUREMzRcIjogXCJSb2pvXCIgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5lc3RhZG9TZWxlY2Npb25hZG8pOyAvLyBFc3RhYmxlY2UgZWwgdmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQnVzY2FyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGFzRmlsdHJhZGFzID0gYXdhaXQgdGhpcy5maWx0cmFyTm90YXNQb3JFc3RhZG9ZRGlyZWN0b3JpbyhcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYVwiLCB0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vdGFzIGZpbHRyYWRhczpcIiwgbm90YXNGaWx0cmFkYXMubGVuZ3RoLCBub3Rhc0ZpbHRyYWRhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRnV6enlOb3RlU3VnZ2VzdGVyKHRoaXMuYXBwLCBub3Rhc0ZpbHRyYWRhcykub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZmlsdHJhciBub3RhcyBwb3IgZXN0YWRvIHkgZGlyZWN0b3Jpb1xuICAgIGFzeW5jIGZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKGRpcmVjdG9yaW86IHN0cmluZywgZXN0YWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBub3Rhc0ZpbHRyYWRhcyA9IGFyY2hpdm9zLmZpbHRlcihhcmNoaXZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBhcmNoaXZvLnBhdGg7XG4gICAgICAgICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aChkaXJlY3RvcmlvKSkgcmV0dXJuIGZhbHNlOyAvLyBGaWx0cmEgcG9yIGRpcmVjdG9yaW9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZGF0b3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBwcm9jZXNhZG86XCIsIGFyY2hpdm8ucGF0aCk7XG4gICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgZXN0YWRvIGRlbCBmcm9udG1hdHRlciBjb2luY2lkZSBjb24gZWwgZXN0YWRvIHByb3BvcmNpb25hZG9cbiAgICAgICAgICAgIGlmIChkYXRvcy5mcm9udG1hdHRlciAmJiBkYXRvcy5mcm9udG1hdHRlci5lc3RhZG8gPT09IGVzdGFkbykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBpbmNsdWlkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIE9yZGVuYSBsYXMgbm90YXMgZmlsdHJhZGFzIHBvciBmZWNoYSBkZSBtb2RpZmljYWNpXHUwMEYzbiwgZGUgbGEgbVx1MDBFMXMgcmVjaWVudGUgYSBsYSBtXHUwMEUxcyBhbnRpZ3VhXG4gICAgICAgIG5vdGFzRmlsdHJhZGFzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWU7IC8vIERlc2NlbmRlbnRlXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICByZXR1cm4gbm90YXNGaWx0cmFkYXM7XG4gICAgfVxuICAgIFxufVxuIiwgIi8vIEVuIGFsZ1x1MDBGQW4gbHVnYXIgZGUgdHUgbVx1MDBGM2R1bG8sIGNvbW8gc2VhcmNoL0Z1enp5Tm90ZVN1Z2dlc3Rlci50c1xuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIEZ1enp5Tm90ZVN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgbm90YXM6IFRGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBnZXRJdGVtcygpOiBURmlsZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YXM7XG4gICAgfVxuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogVEZpbGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbS5iYXNlbmFtZTsgLy8gTyBjdWFscXVpZXIgb3RybyBmb3JtYXRvIHF1ZSBwcmVmaWVyYXNcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gQXF1XHUwMEVEIGRlZmluZXMgcXVcdTAwRTkgaGFjZXIgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW5hIG5vdGEuIFBvciBlamVtcGxvLCBhYnJpciBsYSBub3RhOlxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIGZhbHNlKTtcbiAgICAgICAgbGVhZi5vcGVuRmlsZShpdGVtKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBTdGF0dXNCYXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgU3RhdHVzQmFyRXh0ZW5zaW9uIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhciB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIgPSB0aGlzLnBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIC8vIFJlZ2lzdHJhciBldmVudG8gZmlsZS1vcGVuXG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlOiBURmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKGZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBkZXNhY3RpdmFkbywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IG51bGw7XG4gICAgICAgIC8vIE5vIG5lY2VzaXRhcyBkZXN1c2NyaWJpciBlbCBldmVudG8gYXF1XHUwMEVEIHNpIHVzYXMgcmVnaXN0ZXJFdmVudCwgT2JzaWRpYW4gbG8gbWFuZWphIGF1dG9tXHUwMEUxdGljYW1lbnRlLlxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU3RhdHVzQmFyKGZpbGU/OiBURmlsZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IGZpbGUgfHwgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghY3VycmVudEZpbGUgfHwgIXRoaXMuc3RhdHVzQmFyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhcj8uc2V0VGV4dCgnJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudEZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gZmlsZUNhY2hlLmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFtdO1xuICAgICAgICB0aGlzLnN0YXR1c0Jhci5zZXRUZXh0KGFsaWFzZXMubGVuZ3RoID4gMCA/IGBBbGlhczogJHthbGlhc2VzWzBdfWAgOiAnTm8gQWxpYXMnKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vaW5kZXgudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wb1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA0IDE3OjU4OjMwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MToyOFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJSaWJib25NZW51LCBkZWFjdGl2YXRlUmliYm9uTWVudSB9IGZyb20gXCIuL3JpYmJvbk1lbnVcIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGVsIHJpYmJvbiBzb2xvIHNlIHJlZ2lzdHJlIHNpIGFcdTAwRkFuIG5vIGhhIHNpZG8gcmVnaXN0cmFkb1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnJpYmJvbkJ1dHRvblJUKSB7XG4gICAgICAgICAgICByZWdpc3RlclJpYmJvbk1lbnUodGhpcy5wbHVnaW4pO1xuICAgICAgICB9XG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGRlYWN0aXZhdGVSaWJib25NZW51KHRoaXMucGx1Z2luKTtcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vcmliYm9uTWVudS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDQgMTc6NTg6MzBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ3OjE3XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgQXBwLCBNZW51LCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBjdW1wbGVDb25kaWNpb24gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJSaWJib25NZW51KHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgLy8gRXN0ZSBlcyBlbCBcdTAwRURjb25vIGRlbCBtZW5cdTAwRkEgZW4gZWwgcmliYm9uLCBjYW1iaWEgXCJkaWNlXCIgcG9yIGVsIFx1MDBFRGNvbm8gcXVlIHByZWZpZXJhc1xuICAgIFxuICAgIHBsdWdpbi5yaWJib25CdXR0b25SVCA9IHBsdWdpbi5hZGRSaWJib25JY29uKFwiY2xvY2tcIiwgXCJSZWdpc3RybyBkZSBUaWVtcG9cIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCBtZW5cdTAwRkEgYWwgaGFjZXIgY2xpYyBlbiBlbCBcdTAwRURjb25vXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShwbHVnaW4uYXBwKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIG9wY2lvbmVzIGFsIG1lblx1MDBGQVxuICAgICAgICAvLyBMYSBvcGNpXHUwMEYzbiBhaG9yYSwgc29sbyBzZSBhY3RpdmEgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gZGUgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuLlxuICAgICAgICBpZiAoYXdhaXQgY3VtcGxlQ29uZGljaW9uKHBsdWdpbi5hcHApKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFob3JhXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQWhvcmFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJhciBUaWVtcG9cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiUmVnaXN0cmFyIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cmFyIFRpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cblxuICAgICAgICAvLyBMYSBvcGNpXHUwMEYzbiBEZXRlbmVyIFJlZ2lzdHJvLCBzb2xvIHNlIGFjdGl2YSBzaSBoYXkgYWxnXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZW4gZWplY3VjaVx1MDBGM24uXG4gICAgICAgIGlmIChhd2FpdCBjdW1wbGVDb25kaWNpb24ocGx1Z2luLmFwcCkpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiRGV0ZW5lciBSZWdpc3Ryb1wiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIkRldGVuZXIgUmVnaXN0cm9cIlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXRlbmVyIFJlZ2lzdHJvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiVGFyZWFzIGVuIHByb2dyZXNvXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlRhcmVhcyBlbiBwcm9ncmVzb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFyZWFzIGVuIHByb2dyZXNvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVnaXN0cm9zIGRlIGhveVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJSZWdpc3Ryb3MgZGUgaG95XCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3Ryb3MgZGUgaG95XCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBNb3N0cmFyIGVsIG1lblx1MDBGQSBlbiBsYSBwb3NpY2lcdTAwRjNuIGRlbCBjdXJzb3JcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVSaWJib25NZW51KHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgaWYgKHBsdWdpbi5yaWJib25CdXR0b25SVCkge1xuICAgICAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQucmVtb3ZlKCk7XG4gICAgICAgIHBsdWdpbi5yaWJib25CdXR0b25SVCA9IG51bGw7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3V0aWxzLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG9cbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNCAxODowMTowMlxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDc6MjlcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5cbi8vIExcdTAwRDNHSUNBIFBBUkEgQUNDRURFUiBBIExBUyBGVU5DSU9ORVMgREVTREUgTE9TIEJPVE9ORVMgUFJPUElPUyBERSBMQSBJTlRFUkZBWiBERSBPQlNJRElBTiAtPiBSSUJCT04sIEVUQ1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3VtcGxlQ29uZGljaW9uKGFwcDogQXBwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9SZWdpc3RybyBUaWVtcG9cIikpIHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgIFxuICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiB9XG5cblxuIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luKSB7XG4gICAgXG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8gcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4gU2UgZGVzY2FydGEgcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby5cIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb1xuICAgIFxuICAgIGxldCBtYXhJZCA9IDA7XG5cbiAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgXG4gICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBidXNjYXIgbG9zIElEcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgY29uc3QgbmV4dElkID0gbWF4SWQgKyAxO1xuXG4gICAgLy8gRm9ybWF0ZWFyIGxhIGZlY2hhIGFjdHVhbFxuICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSBmb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2byxcbiAgICAgICAgbm9tYnJlOiBhY3Rpdm8uYmFzZW5hbWUsXG4gICAgICAgIGZvbGRlcixcbiAgICAgICAgaW5kaWNlLFxuICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7aW5kaWNlfVwiYCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGNvbnN0IGRpYXMgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pXHUwMEU5cmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1NcdTAwRTFiYWRvJ107XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHRhcmVhc0FjdGl2YXMucHVzaCh7IGZpbGUsIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IG1vc3RyYXJTdWdlcmVuY2lhKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IGVzdFx1MDBFMSBjb3JyaWVuZG8uIFx1MDBCRkRlc2VhIGRldGVuZXJsYT9gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlc2VhRGV0ZW5lcikge1xuICAgICAgICAgICAgLy8gQVFVSSBWQSBMQSBJTVBMRU1FTlRBQ0lcdTAwRDNOIEFMIE5VRVZPIENcdTAwRDNESUdPIC0+IEVTVEEgTE9HSUNBIE1BTkVKQSBGVU5DSU9ORVMhICBcbiAgICAgICAgICAgIGF3YWl0IGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YSwgYXBwKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gc2VndWlyXHUwMEUxIHJlZ2lzdHJcdTAwRTFuZG9zZS5gKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gUmFzdHJlYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cblxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnU1x1MDBFRCcsXG4gICAgICAgIH0pO1xuICAgICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8nLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIGhhY2VyIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVzdWVsdmUgY29uIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7IC8vIFBhc28gYGFwcGAgY29tbyBhcmd1bWVudG9cbiAgICBsZXQgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb247XG4gICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJPdHJvXCJdO1xuICAgIH1cbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgIFxuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICAgIFxuICAgIC8vIEVzcGVyYSBhc2luY3JcdTAwRjNuaWNhbWVudGUgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYW50ZXMgZGUgY29udGludWFyLlxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgICAgICAgLy8gUHJvY2VzYXIgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYXF1XHUwMEVELlxuICAgICAgICAvLyBFbCBjXHUwMEYzZGlnbyBzdWJzaWd1aWVudGUgZGVwZW5kZSBkZWwgdGlwbyBkZSByZWdpc3RybyBzZWxlY2Npb25hZG8uXG4gICAgICAgIHN3aXRjaChyZWdpc3Ryby50aXBvUmVnaXN0cm8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIGF3YWl0IGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHJlZ2lzdHJvLnRpdHVsb0RlZmluaWRvICE9PSBcIk90cm9cIjsgLy8gQXN1bWUgcXVlIHNpIG5vIGVzIFwiT3Ryb1wiLCBlcyB1biBhc3VudG8gZXNwZWNcdTAwRURmaWNvLlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIGFkaWNpb25hbCBwYXJhIG1hbmVqYXIgXCJPdHJvXCIgbyBjYXNvcyBubyBlc3BlY2lmaWNhZG9zLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBlc3RhYmxlY2VyIHVuIHZhbG9yIHByZWRldGVybWluYWRvIHBhcmEgcmVnaXN0cm8uZGV0ZW5lciBhcXVcdTAwRUQuXG4gICAgfVxufVxuXG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoYXJjaGl2byA9PiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSk7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGNvbnRlbmlkby5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovZ20pIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgZXNwYWNpb3MgYWwgaW5pY2lvIGRlIGNhZGEgY29pbmNpZGVuY2lhIGFudGVzIGRlIGFncmVnYXJsYSBhbCBhcnJlZ2xvXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gY29pbmNpZGVuY2lhcy5tYXAodGFyZWEgPT4gdGFyZWEudHJpbSgpKTtcbiAgICAgICAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNMaW1waWFzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZWFzUGVuZGllbnRlcztcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhhcHA6IEFwcCwgcmVnaXN0cm86IGFueSwgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJFbGlnZSBsYSB0YXJlYSBxdWUgdmFzIGEgcmVnaXN0cmFyLlwiO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGFycmVnbG8gZGUgcHJvbWVzYXMgdXNhbmRvIG1hcCBwYXJhIHBhc2FyIGNhZGEgdGFyZWEgcG9yIGxpbXBpYXJUZXh0b1RhcmVhXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCh0YXJlYSA9PiBsaW1waWFyVGV4dG9UYXJlYSh0YXJlYSkpO1xuXG4gICAgICAgIC8vIFVzYXIgUHJvbWlzZS5hbGwgcGFyYSBlc3BlcmFyIGEgcXVlIHRvZGFzIGxhcyB0YXJlYXMgc2VhbiBwcm9jZXNhZGFzXG4gICAgICAgIFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcykudGhlbih0YXJlYXNMaW1waWFzID0+IHtcbiAgICAgICAgICAgIC8vIEVuIGVzdGUgcHVudG8sIHRhcmVhc0xpbXBpYXMgZXMgdW4gYXJyZWdsbyBjb24gdG9kYXMgbGFzIHRhcmVhcyBkZXNwdVx1MDBFOXMgZGUgc2VyIGxpbXBpYWRhc1xuICAgICAgICAgICAgLy8gQWhvcmEgcHVlZGVzIHVzYXIgdGFyZWFzTGltcGlhcyBlbiBvdHJhIGZ1bmNpXHUwMEYzblxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCB0YXJlYXNMaW1waWFzLCB0YXJlYXNMaW1waWFzLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCkudGhlbihzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gbGltcGlhclRleHRvVGFyZWEgKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIE1hbmVqYXIgcG9zaWJsZXMgZXJyb3Jlc1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkh1Ym8gdW4gZXJyb3IgYWwgbGltcGlhciBsYXMgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hIHRvZG8gZGVzcHVcdTAwRTlzIGRlbCBwcmltZXIgc2FsdG8gZGUgbFx1MDBFRG5lYS5cbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdCgnXFxuJylbMF07XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgdGFncyBkZSBlc3RpbG8gTWFya2Rvd24uXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyNbXFx3LS9dKy9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGluY2x1eWVuZG8gcG9zaWJsZXMgZXNwYWNpb3MgYW50ZXMgbyBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgJycpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uICAgIFxuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICAgICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgXG5cbmFzeW5jIGZ1bmN0aW9uIGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YTogeyBmaWxlOiBURmlsZTsgdGl0dWxvOiBzdHJpbmcgfSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFyY2FyIGxhIHRhcmVhIGNvbW8gbm8gYWN0aXZhLCBwcm9iYWJsZW1lbnRlIGFjdHVhbGl6YW5kbyBzdSBmcm9udG1hdHRlclxuICAgIGNvbnNvbGUubG9nKGBEZXRlbmllbmRvIGxhIHRhcmVhOiAke3RhcmVhQWN0aXZhLnRpdHVsb31gKTtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBzZSBwb2RyXHUwMEVEYSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHBhcmEgZGV0ZW5lciBsYSB0YXJlYVxuICAgIC8vIEVzdGEgZXMgdW5hIHNpbXBsaWZpY2FjaVx1MDBGM247IGxhIGltcGxlbWVudGFjaVx1MDBGM24gcmVhbCBkZXBlbmRlclx1MDBFRGEgZGUgY1x1MDBGM21vIGVzdFx1MDBFOXMgbWFuZWphbmRvIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgIGNvbnN0IG5ld0NvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoJ2VzdGFkbzogXHVEODNEXHVERkUyJywgJ2VzdGFkbzogXHVEODNEXHVERDM1Jyk7IC8vIENhbWJpYXIgYSBlc3RhZG8gbm8gYWN0aXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeSh0YXJlYUFjdGl2YS5maWxlLCBuZXdDb250ZW50cyk7XG59XG5cblxuXG5cblxuXG4gXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vY29tbWFuZHMudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wb1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA1IDE3OjAyOjM0XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MDoyNFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zLCBjcmVhck9iamV0b1JlZ2lzdHJvLCB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzLCBkZWZpbmlyVGlwb1JlZ2lzdHJvIH0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHttb2RhbF9BaG9yYX0gZnJvbSBcIi4vbW9kYWxzL21vZGFsX0Fob3JhXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBjb25zdCBpZDEgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcInJlZ2lzdHJvcy1kZS10aWVtcG8tZGVsLWRpYVwiLFxuICAgICAgICBuYW1lOiBcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIsXG4gICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3LmZpbGU/LnBhdGggfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhdGguc3RhcnRzV2l0aChcIkVzdHJ1Y3R1cmEvUGVyaW9kb3MvRGlhcmlvL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIGRlbCBjb21hbmRvXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cblxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQxLmlkKTtcblxuICAgIGNvbnN0IGlkMiA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiYWhvcmEtUmVnaXN0cm9UaWVtcG9cIixcbiAgICAgICAgbmFtZTogXCJUYXJlYSBhY3RpdmEgZW4gcmVnaXN0cm8gZGUgdGllbXBvXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmEgPSBhd2FpdCBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKHBsdWdpbi5hcHApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWFjdGl2YSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgbm90YXMgYWN0aXZhc1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYSB5IG11ZXN0cmEgZWwgbW9kYWwgcGVyc29uYWxpemFkbyBjb24gbGEgbm90YSBhY3RpdmFcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgbW9kYWxfQWhvcmEocGx1Z2luLmFwcCwgYWN0aXZhKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQyLmlkKTtcbiAgICBcbiAgICBjb25zdCBpZDMgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLXJlZ2lzdHJvLXRpZW1wb1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIFJlZ2lzdHJvIGRlIFRpZW1wb1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbik7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZWdpc3Rybykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgcGx1Z2luLmFwcClcbiAgICAgICAgICAgIGF3YWl0IGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm8scGx1Z2luLmFwcClcbiAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgc2UgdGllbmUgdW5hIGZ1bmNpXHUwMEYzbiBvIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgZWwgb2JqZXRvIGByZWdpc3Ryb2BcbiAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYSBzZXIgY3JlYXIgdW5hIG51ZXZhIG5vdGEgY29uIGxhIGluZm9ybWFjaVx1MDBGM24gZGUgYHJlZ2lzdHJvYFxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQzLmlkKTtcblxuICAgIFxuY29uc3QgaWQ0ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgIGlkOiBcInZpc3RhLXJlZ2lzdHJvLXRpZW1wby1hY3RpdmFcIixcbiAgICBuYW1lOiBcIk1vc3RyYXIgUlQgQWN0aXZvXCIsXG4gICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgLy8gQXNlZ3VyYSBxdWUgbm8gaGF5YSBkdXBsaWNhZG9zIGRlIGxhIHZpc3RhLlxuICAgICAgICBhcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiKTtcblxuICAgICAgICAvLyBBYnJlIGxhIHZpc3RhIGVuIHVuYSBudWV2YSBob2phLlxuICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIixcbiAgICAgICAgfSk7XG4gXG4gICAgICAgIC8vIEFjdGl2YSBsYSBudWV2YSBob2phIHBhcmEgZWwgdXN1YXJpby5cbiAgICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIilbMF1cbiAgICAgICAgKTtcbiAgICAgICAgIFxuICAgICAgICBcbiAgICB9LFxufSk7XG4vLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG5wbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkNC5pZCk7XG5cbn1cblxuXG4vLyBFc3RhIHBhcnRlIGRlbCBjXHUwMEYzZGlnbyBzZXJcdTAwRURhIGhpcG90XHUwMEU5dGljYSB5IGRlcGVuZGUgZGUgY1x1MDBGM21vIGdlc3Rpb25hcyBlbCBlc3RhZG8geSBlbCBjaWNsbyBkZSB2aWRhIGRlIGxvcyBjb21hbmRvcyBlbiB0dSBwbHVnaW4uXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVCkgcmV0dXJuO1xuICAgIC8vIEVqZW1wbG8gZGUgY1x1MDBGM21vIHBvZHJcdTAwRURhcyBtYW5lamFyIGxhIFwiZGVzYWN0aXZhY2lcdTAwRjNuXCIgZGUgY29tYW5kb3MuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQuZm9yRWFjaCgoY29tbWFuZElkOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL21vZGFsX0Fob3JhLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDQgMTc6NTg6MzBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ2OjMzXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgTW9kYWwsIEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIG1vZGFsX0Fob3JhIGV4dGVuZHMgTW9kYWwge1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIGFwcDogQXBwO1xuICAgIGhvcmFJbmljaW9JbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuZmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgXCJBY3RpdmlkYWQgc2luIGFsaWFzXCI7XG4gICAgICAgIC8vIENvbnZlcnRpciBob3JhSW5pY2lvU3RyIGEgZm9ybWF0byBcIllZWVktTU0tRERUSEg6TU1cIiBwYXJhIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnN0IGhvcmFJbmljaW9TdHIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmhvcmFJbmljaW8gPyB3aW5kb3cubW9tZW50KG1ldGFkYXRhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpLmZvcm1hdChcIllZWVktTU0tRERUSEg6bW1cIikgOiAnJztcblxuICAgICAgICAvLyBDb25maWd1cmEgZWwgdFx1MDBFRHR1bG8gZGVsIG1vZGFsIHkgbXVlc3RyYSBlbCBhbGlhcyBkZSBsYSB0YXJlYVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUmVnaXN0cm8gZGUgYWN0aXZpZGFkLmAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFRhcmVhOiBcIiR7YWxpYXNlc31cImAgfSk7XG4gICAgICAgIGlmIChob3JhSW5pY2lvU3RyKSB7XG4gICAgICAgICAgICAvLyBVc2FyIG1vbWVudCBwYXJhIHBhcnNlYXIgbGEgZmVjaGEgZGUgaW5pY2lvIHkgY2FsY3VsYXIgbGEgZGlmZXJlbmNpYVxuICAgICAgICAgICAgY29uc3QgaG9yYUluaWNpbyA9IHdpbmRvdy5tb21lbnQoaG9yYUluaWNpb1N0ciwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgICAgICBjb25zdCBhaG9yYSA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBhaG9yYS5kaWZmKGhvcmFJbmljaW8pO1xuICAgICAgICAgICAgY29uc3QgZHVyYWNpb24gPSB3aW5kb3cubW9tZW50LmR1cmF0aW9uKGRpZmYpO1xuICAgICAgICAgICAgY29uc3QgZGlmZkZvcm1hdHRlZCA9IGAke2R1cmFjaW9uLmhvdXJzKCl9aCAke2R1cmFjaW9uLm1pbnV0ZXMoKX1tYDtcblxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgRXN0YSBhY3RpdmlkYWQgbGxldmEgJHtkaWZmRm9ybWF0dGVkfSBlbiBlamVjdWNpXHUwMEYzbi5gIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBcIk5vIHNlIHB1ZG8gZGV0ZXJtaW5hciBlbCB0aWVtcG8gZGUgaW5pY2lvIGRlIGxhIGFjdGl2aWRhZC5cIiB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnB1dCBwYXJhIGxhIGhvcmEgZGUgaW5pY2lvIGNvbiB0aXBvIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0hvcmEgZGUgaW5pY2lvOicgfSk7XG4gICAgICAgIHRoaXMuaG9yYUluaWNpb0lucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdkYXRldGltZS1sb2NhbCcsXG4gICAgICAgICAgICB2YWx1ZTogaG9yYUluaWNpb1N0clxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBjYW1iaW9zXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0d1YXJkYXIgY2FtYmlvcycgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZ3VhcmRhckNhbWJpb3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBndWFyZGFyQ2FtYmlvcygpIHtcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvTG9jYWwgPSB0aGlzLmhvcmFJbmljaW9JbnB1dC52YWx1ZTtcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxhIG51ZXZhIGhvcmEgdGllbmUgdmFsb3IgYW50ZXMgZGUgaW50ZW50YXIgZm9ybWF0ZWFyXG4gICAgICAgIGlmICghbnVldmFIb3JhSW5pY2lvTG9jYWwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW5hIGhvcmEgZGUgaW5pY2lvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBcIllZWVktTU0tRERUSEg6TU1cIiBhIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCJcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvID0gd2luZG93Lm1vbWVudChudWV2YUhvcmFJbmljaW9Mb2NhbCkuZm9ybWF0KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGNvbnRlbmlkbyBhY3R1YWwgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb09yaWdpbmFsID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpO1xuICAgICAgICAgICAgLy8gUmVlbXBsYXphciBsYSBsXHUwMEVEbmVhIGRlIGhvcmFJbmljaW8gY29uIGVsIG51ZXZvIHZhbG9yIGZvcm1hdGVhZG9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb0FjdHVhbGl6YWRvID0gY29udGVuaWRvT3JpZ2luYWwucmVwbGFjZSgvKGhvcmFJbmljaW86ICkuKi8sIGAkMSR7bnVldmFIb3JhSW5pY2lvfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHdWFyZGFyIGxvcyBjYW1iaW9zIGVuIGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIGNvbnRlbmlkb0FjdHVhbGl6YWRvKTtcblxuICAgICAgICAgICAgLy8gQ2VycmFyIGVsIG1vZGFsIGRlc3B1XHUwMEU5cyBkZSBndWFyZGFyIGxvcyBjYW1iaW9zXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSG9yYSBkZSBpbmljaW8gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhciBjYW1iaW9zIGVuIGxhIG5vdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBndWFyZGFyIGxvcyBjYW1iaW9zIGVuIGxhIG5vdGEuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8vIHNyYy9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHNcbmltcG9ydCB0eXBlIHsgUGx1Z2luTWFpblNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGx1Z2luTWFpblNldHRpbmdzID0ge1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogdHJ1ZSxcbiAgbW9kdWxvQWxpYXNTdGF0dXNCYXI6IHRydWUsXG4gIG1vZHVsb0Jhc2U6IHRydWUsXG4gIG1vZHVsb0dURDogdHJ1ZSxcbiAgbW9kdWxvVGFiVGl0bGU6IHRydWUsICAvLyBNb2R1bG8gdGl0dWxvIGRlIHBlc3RhXHUwMEYxYXMuXG4gIG1vZHVsb1Rhc2tNYW5hZ2VyOiB0cnVlLFxuICBtb2R1bG9EYXRhdmlld1F1ZXJpZXM6IHRydWUsXG4gIHRhc2tFeGVjdXRpb25OYXZpZ2F0b3JNb2R1bGU6IHRydWUsICAvLyBBY3RpdmFkbyBwb3IgZGVmZWN0b1xuICB0YXNrTmF2aWdhdG9yTW9kdWxlOiB0cnVlLFxuICBmaWxlX2NhbXBvc0NlbnRyYWwgOlwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBTaXN0ZW1hIENlbnRyYWxcIiwgXG4gIGZvbGRlcl9Bbm90YWNpb25lczogXCJBbm90YWNpb25lcy9Ob3Rhc1wiLFxuICBpbmRpY2VfQW5vdGFjaW9uZXM6IFwiQW5vdGFjaW9uZXMvSW5kaWNlIEFub3RhY2lvbmVzXCIsXG4gIGZvbGRlcl9BQmxvZzogXCJTdWJzaXN0ZW1hcy9BcnRpY3Vsb3MgQmxvZy9BcnRpY3Vsb3NcIixcbiAgaW5kaWNlX0FCbG9nOiBcIlN1YnNpc3RlbWFzL0FydGljdWxvcyBCbG9nL0luZGljZSBBcnRpY3Vsb3MgQmxvZ1wiLFxuICBmb2xkZXJfRGVzYXJyb2xsb3M6IFwiU3Vic2lzdGVtYXMvRGVzYXJyb2xsb3MvQ29kaWdvc1wiLFxuICBpbmRpY2VfRGVzYXJyb2xsb3M6IFwiU3Vic2lzdGVtYXMvRGVzYXJyb2xsb3MvSW5kaWNlIERlc2Fycm9sbG9cIixcbiAgZm9sZGVyX0VzdHVkaW86IFwiU3Vic2lzdGVtYXMvRXN0dWRpby9UZW1hc1wiLFxuICBpbmRpY2VfRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Fc3R1ZGlvL0luZGljZSBFc3R1ZGlvXCIsXG4gIGZvbGRlcl9SZXBvc2l0b3Jpb0xpYnJvczogXCJTdWJzaXN0ZW1hcy9MaWJyb3MvUmVwb3NpdG9yaW9cIixcbiAgaW5kaWNlX1JlcG9zaXRvcmlvTGlicm9zOiBcIlN1YnNpc3RlbWFzL0xpYnJvcy9JbmRpY2UgUmVwb3NpdG9yaW8gTGlicm9zXCIsXG4gIGZvbGRlcl9CaWJsaW90ZWNhOiBcIlN1YnNpc3RlbWFzL0xpYnJvcy9CaWJsaW90ZWNhXCIsXG4gIGluZGljZV9CaWJsaW90ZWNhOiBcIlN1YnNpc3RlbWFzL0xpYnJvcy9JbmRpY2UgQmlibGlvdGVjYVwiLFxuICBmb2xkZXJfS2luZGxlTm90ZXM6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0tpbmRsZVwiLFxuICBpbmRpY2VfS2luZGxlTm90ZXM6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0tpbmRsZS9JbmRpY2UgS2luZGxlXCIsXG4gIC8vZm9sZGVyX0xlY3R1cmFTZXNpb25lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL1Nlc2lvbmVzIGRlIExlY3R1cmEvU2VzaW9uZXNcIixcbiAgLy9pbmRpY2VfTGVjdHVyYVNlc2lvbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvU2VzaW9uZXMgZGUgTGVjdHVyYS9JbmRpY2UgU2VzaW9uZXMgTGVjdHVyYVwiLFxuICBmb2xkZXJfTGVjdHVyYVJlc3VtZW5lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL0xpYnJvcy9SZXN1bWVuZXNcIixcbiAgaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9MaWJyb3MvSW5kaWNlIFJlc3VtZW5lc1wiLFxuICBmb2xkZXJfTWVudG9yaWFzOiBcIlN1YnNpc3RlbWFzL01lbnRvcmlhcy9TZXNpb25lcyBNZW50b3JpYVwiLFxuICBpbmRpY2VfTWVudG9yaWFzOiBcIlN1YnNpc3RlbWFzL01lbnRvcmlhcy9JbmRpY2UgTWVudG9yaWFzXCIsXG4gIGZvbGRlcl9NZXJjYWRvOiBcIlN1YnNpc3RlbWFzL01lcmNhZG8vTGlzdGFzXCIsXG4gIGluZGljZV9NZXJjYWRvOiBcIlN1YnNpc3RlbWFzL01lcmNhZG8vSW5kaWNlIE1lcmNhZG9cIixcbiAgZm9sZGVyX01vZHVsb3NTaXN0ZW1hOiBcIlN1YnNpc3RlbWFzL01vZHVsb3MgU2lzdGVtYSBHZXN0aW9uL01vZHVsb3NcIixcbiAgaW5kaWNlX01vZHVsb3NTaXN0ZW1hOiBcIlN1YnNpc3RlbWFzL01vZHVsb3MgU2lzdGVtYSBHZXN0aW9uL0luZGljZSBNb2R1bG9zXCIsXG4gIGZvbGRlcl9UcmFuc2FjY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1RyYW5zYWNjaW9uZXNcIixcbiAgaW5kaWNlX1RyYW5zYWNjaW9uZXM6IFwiU3Vic2lzdGVtYXMvVHJhbnNhY2Npb25lcy9JbmRpY2UgVHJhbnNhY2Npb25lc1wiLFxuICBmb2xkZXJfUHJlc2VudGFjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHJlc2VudGFjaW9uZXMvTm90YXNcIixcbiAgaW5kaWNlX1ByZXNlbnRhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1ByZXNlbnRhY2lvbmVzL0luZGljZSBQcmVzZW50YWNpb25lc1wiLFxuICBmb2xkZXJfUHVibGljYWNpb25lczogXCJTdWJzaXN0ZW1hcy9QdWJsaWNhY2lvbmVzL1BpZXphc1wiLFxuICBpbmRpY2VfUHVibGljYWNpb25lczogXCJTdWJzaXN0ZW1hcy9QdWJsaWNhY2lvbmVzL0luZGljZSBQdWJsaWNhY2lvbmVzXCIsXG4gIGZvbGRlcl9SZWNldGFzOiBcIlN1YnNpc3RlbWFzL1JlY2V0YXMvUmVjZXRhc1wiLFxuICBpbmRpY2VfUmVjZXRhczogXCJTdWJzaXN0ZW1hcy9SZWNldGFzL0luZGljZSBSZWNldGFzXCIsXG4gIGZvbGRlcl9SZWdpc3Ryb1RpZW1wbzogXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIsXG4gIGluZGljZV9SZWdpc3Ryb1RpZW1wbzogXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vSW5kaWNlIFJlZ2lzdHJvIFRpZW1wb1wiLFxuICBmb2xkZXJfQ29udGVuaWRvUGFyYUVzdHVkaW86IFwiU3Vic2lzdGVtYXMvQ29udGVuaWRvIHBhcmEgRXN0dWRpby9Db250ZW5pZG9cIixcbiAgaW5kaWNlX0NvbnRlbmlkb1BhcmFFc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0NvbnRlbmlkbyBwYXJhIEVzdHVkaW8vSW5kaWNlIENvbnRlbmlkbyBwYXJhIEVzdHVkaW9cIixcbiAgZm9sZGVyX0NhbXBhXHUwMEYxYTogXCJTdWJzaXN0ZW1hcy9NYXJrZXRpbmcvUHJveWVjdG9zXCIsXG4gIGluZGljZV9DYW1wYVx1MDBGMWE6IFwiU3Vic2lzdGVtYXMvTWFya2V0aW5nL0luZGljZSBDYW1wYVx1MDBGMWFzXCIsXG4gIGZvbGRlcl9FbnRyZWdhYmxlOiBcIlN1YnNpc3RlbWFzL01hcmtldGluZy9FbnRyZWdhYmxlc1wiLFxuICBpbmRpY2VfRW50cmVnYWJsZTogXCJTdWJzaXN0ZW1hcy9NYXJrZXRpbmcvSW5kaWNlIEVudHJlZ2FibGVzXCIsXG5cbiAgLy8gRXN0cnVjdHVyYVxuICBmb2xkZXJfQXJlYXNWaWRhOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYVwiLFxuICBpbmRpY2VfQXJlYXNWaWRhOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYS9JbmRpY2UgQXJlYXMgZGUgVmlkYVwiLFxuICBmb2xkZXJfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlcy9JbmRpY2UgQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBmb2xkZXJfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlcy9JbmRpY2UgVGVtYXMgZGUgSW50ZXJlc1wiLFxuICBmb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlczogXCJFc3RydWN0dXJhL1JlY3Vyc29zIFJlY3VycmVudGVzL1JlY3Vyc29zXCIsXG4gIGluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzOiBcIkVzdHJ1Y3R1cmEvUmVjdXJzb3MgUmVjdXJyZW50ZXMvSW5kaWNlIFJlY3Vyc29zIFJlY3VycmVudGVzXCIsXG4gIGZvbGRlcl9Qcm95ZWN0b3NROiBcIkVzdHJ1Y3R1cmEvUHJveWVjdG9zIGRlIFFcIixcbiAgaW5kaWNlX1Byb3llY3Rvc1E6IFwiRXN0cnVjdHVyYS9Qcm95ZWN0b3MgZGUgUS9JbmRpY2UgUHJveWVjdG9zIGRlIFFcIixcblxuXG4gIGZpbGVfSW5ib3g6IFwiRXN0cnVjdHVyYS9HVEQvQmFuZGVqYSBkZSBFbnRyYWRhL0JhbmRlamEgZGUgRW50cmFkYVwiLFxuICBmb2xkZXJfUHJveWVjdG9zR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1Byb3llY3RvcyBHVEQvUHJveWVjdG9zXCIsXG4gIGluZGljZV9Qcm95ZWN0b3NHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUHJveWVjdG9zIEdURC9JbmRpY2UgUHJveWVjdG9zIEdURFwiLFxuICBmb2xkZXJfUlNHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUmV2aXNpb24gU2VtYW5hbC9SZXZpc2lvbmVzXCIsXG4gIGluZGljZV9SU0dURDogXCJFc3RydWN0dXJhL0dURC9SZXZpc2lvbiBTZW1hbmFsL0luZGljZSBSZXZpc2lvbiBTZW1hbmFsXCIsXG4gIGZvbGRlcl9TaXN0ZW1hR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1Npc3RlbWEgR1REL1Npc3RlbWFcIixcbiAgaW5kaWNlX1Npc3RlbWFHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvU2lzdGVtYSBHVEQvSW5kaWNlIFNpc3RlbWEgR1REXCIsXG4gIFxuXG4gIC8vIEpvdXJuYWxcbiAgZm9sZGVyX0RpYXJpbzogXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCIsXG4gIGluZGljZV9EaWFyaW86IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9JbmRpY2UgRGlhcmlvXCIsXG4gIGZvbGRlcl9TZW1hbmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9TZW1hbmFsL05vdGFzXCIsXG4gIGluZGljZV9TZW1hbmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9TZW1hbmFsL0luZGljZSBTZW1hbmFsXCIsXG4gIGZvbGRlcl9NZW5zdWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9NZW5zdWFsL05vdGFzXCIsXG4gIGluZGljZV9NZW5zdWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9NZW5zdWFsL0luZGljZSBNZW5zdWFsXCIsXG4gIGZvbGRlcl9UcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9UcmltZXN0cmFsL05vdGFzXCIsXG4gIGluZGljZV9UcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9UcmltZXN0cmFsL0luZGljZSBUcmltZXN0cmFsXCIsXG4gIGZvbGRlcl9BbnVhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvQW51YWwvTm90YXNcIixcbiAgaW5kaWNlX0FudWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9BbnVhbC9JbmRpY2UgQW51YWxcIixcblxuICAvLyBDT01QQVNTXG4gIGZvbGRlcl9Db21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0FudWFsXCIsXG4gIGluZGljZV9Db21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0luZGljZSBDb21wYXNzIEFudWFsXCIsXG4gIGZvbGRlcl9Db21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvUmVwb3J0ZXMvVHJpbWVzdHJhbFwiLFxuICBpbmRpY2VfQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL0luZGljZSBDb21wYXNzIHRyaW1lc3RyYWxcIixcbiAgZm9sZGVyX09iakNvbXBhc3NBbnVhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL0FudWFsXCIsXG4gIGluZGljZV9PYmpDb21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9JbmRpY2UgQ29tcGFzcyBBbnVhbFwiLFxuICBmb2xkZXJfT2JqQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9UcmltZXN0cmFsXCIsXG4gIGluZGljZV9PYmpDb21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL0luZGljZSBDb21wYXNzIHRyaW1lc3RyYWxcIixcblxuXG4gICAvLyBSZWdpc3Ryb3MgUGVyc29uYWxlc1xuICAgZm9sZGVyX0FncmFkZWNpbWllbnRvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9BZ3JhZGVjaW1pZW50b3MvTm90YXNcIixcbiAgIGluZGljZV9BZ3JhZGVjaW1pZW50b3M6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvQWdyYWRlY2ltaWVudG9zL0luZGljZSBBZ3JhZGVjaW1pZW50b3NcIixcbiAgIGZvbGRlcl9SZWZsZXhpb25lczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWZsZXhpb25lcy9Ob3Rhc1wiLFxuICAgaW5kaWNlX1JlZmxleGlvbmVzOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZmxleGlvbmVzL0luZGljZSBSZWZsZXhpb25lc1wiLFxuICAgZm9sZGVyX1JlZ2lzdHJvc0FrYXNoaWtvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWdpc3Ryb3MgQWthc2hpa29zL05vdGFzXCIsXG4gICBpbmRpY2VfUmVnaXN0cm9zQWthc2hpa29zOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZ2lzdHJvcyBBa2FzaGlrb3MvSW5kaWNlIFJlZ2lzdHJvcyBBa2FzaGlrb3NcIixcbiAgIFxufTtcblxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTI0IDAxOjE4OjM4XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbi8qIHNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJLnRzICovXG5pbXBvcnQgeyBURmlsZSwgTm90aWNlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHtEYXRlVGltZSAsIER1cmF0aW9ufSBmcm9tICdsdXhvbic7XG4vLyBJbnRlcmZhY2VzXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9Ob3RlRmllbGRIYW5kbGVyJztcbi8vIEZpbGVIYW5kbGVyc1xuaW1wb3J0IHsgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL1JlZmxleGlvbmVzRmllbGRIYW5kbGVycyc7XG5pbXBvcnQgeyBDb250ZW5pZG9QYXJhRXN0dWRpb0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQ1BFRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFJlY3Vyc29zUmVjdXJyZW50ZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL1JSRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFBHVERGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUEdUREZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBQUUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9QUUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVHJhbnNhY2Npb25lc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvVHJhbnNhY2Npb25lc0ZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBBcmVhc0ludGVyZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEFyZWFWaWRhRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFWaWRhRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9ub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL09iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBDb21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9Db21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIJztcbmltcG9ydCB7IFJlcG9zaXRvcmlvTGlicm9zX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZXBvc2l0b3Jpb0xpYnJvc19GSCc7XG5pbXBvcnQgeyBCaWJsaW90ZWNhX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9CaWJsaW90ZWNhX0ZIJztcbmltcG9ydCB7IEFudWFsX0ZIIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9BbnVhbF9GSCc7XG5pbXBvcnQgeyBUcmltZXN0cmFsRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9UcmltZXN0cmFsRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IENhbXBhXHUwMEYxYXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0NhbXBhXHUwMEYxYXNGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgRW50cmVnYWJsZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlcic7XG4vLyBvYnNpZGlhblxuXG5leHBvcnQgY2xhc3Mgc3RhcnRlckFQSSB7XG4gICAgLy9wcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IG9iamVjdDsgLy8gQXN1bWllbmRvIHF1ZSBlcyB1biBzdHJpbmdcbiAgICBwcml2YXRlIHRwOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBub3RhOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBwYXRoQ2FtcG9zOiBzdHJpbmc7IFxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIEluaWNpYWxpemEgZm9sZGVyIGUgaW5kaWNlIGdldGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvcyBvIGxcdTAwRjNnaWNhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYSA9IHt9O1xuICAgICAgICB0aGlzLnRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cbiAgICBcbiAgIFxuXG5cbiAgICBhc3luYyBmaWxsTm90ZShpbmZvU3Vic2lzdGVtYTogeyBmb2xkZXI6IHN0cmluZzsgaW5kaWNlOiBzdHJpbmc7IHR5cGU6IHN0cmluZzsgfSwgY2FtcG9zOiBhbnkpIHtcbiAgICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuaW5mb1N1YnNpc3RlbWEsIGluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmluZm9TdWJzaXN0ZW1hLmRlZmluZWQpIHtcbiAgICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmZvbGRlcl07XG4gICAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYS5pbmRpY2UgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tpbmZvU3Vic2lzdGVtYS5pbmRpY2VdO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ub3RhLCBpbmZvU3Vic2lzdGVtYSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgbGV0IGZpZWxkSGFuZGxlcjogTm90ZUZpZWxkSGFuZGxlcjtcbiAgICAgICAgc3dpdGNoICh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiQWdyXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgUEdUREZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBQUUZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQ1BFXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQ29udGVuaWRvUGFyYUVzdHVkaW9GaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlJSXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgUmVjdXJzb3NSZWN1cnJlbnRlc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiVHhcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBUcmFuc2FjY2lvbmVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEFyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBBcmVhVmlkYUZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJPQ0FcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBPYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkNBSVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IENvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkgodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlJMXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgUmVwb3NpdG9yaW9MaWJyb3NfRkgodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkxCXCI6XG4gICAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBCaWJsaW90ZWNhX0ZIKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlJ4XCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkNwXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQ2FtcGFcdTAwRjFhc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiRU1rdFwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEVudHJlZ2FibGVGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlRRXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgVHJpbWVzdHJhbEZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQVlcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBBbnVhbF9GSCh0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzZSBoYSBkZWZpbmlkbyB1biBtYW5lamFkb3IgZGUgY2FtcG9zIHBhcmEgZWwgdGlwbyAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRIYW5kbGVyW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb10gPSBhd2FpdCBmaWVsZEhhbmRsZXJbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgIG5vdGEgPSBhd2FpdCBmaWVsZEhhbmRsZXIuZ2V0Tm90YSgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRoaXMubm90YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFba2V5XSA9IG5vdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG5cbiAgICAgLy8gQ3JlYXIgTm90YSBkZXNkZSB0ZW1wbGF0ZVxuICAgICBhc3luYyBjcmVhdGVOb3RlKHN1YnNpc3RlbWE6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyXyR7c3Vic2lzdGVtYX1gXX0vUGx0IC0gJHtzdWJzaXN0ZW1hfS5tZGA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciBlbCBhcmNoaXZvIHBvciBwYXRoXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBhcmNoaXZvIGVzIHVuIFRGaWxlXG4gICAgICAgICAgICBpZiAoISh0ZW1wbGF0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBURmlsZSwgbWFuZWphciBlbCBlcnJvclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRWwgdGVtcGxhdGUgcGFyYSBcIiR7c3Vic2lzdGVtYX1cIiBubyBzZSBlbmNvbnRyXHUwMEYzIG8gbm8gZXMgdW4gYXJjaGl2byB2XHUwMEUxbGlkby5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGR0Q29uc2VxID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXktTU0tZGQgSEhtbXNzJyk7XG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGAke3N1YnNpc3RlbWF9ICR7ZHRDb25zZXF9YDtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMYSBjYXJwZXRhIFwiSW5ib3hcIiBubyBzZSBlbmNvbnRyXHUwMEYzLmApO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNyZWFyTm90YSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGEgZnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgbm90YXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlRmlsZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBtYW5lamFyIGVsIGVycm9yLCBwb3IgZWplbXBsbywgbW9zdHJhbmRvIHVuIG1lbnNhamUgYWwgdXN1YXJpb1xuICAgICAgICAgICAgLy8gUHVlZGVzIHJlZW1wbGF6YXIgZXN0ZSBtZW5zYWplIGRlIGVycm9yIHBvciBjdWFscXVpZXIgYWNjaVx1MDBGM24gcXVlIGNvbnNpZGVyZXMgYWRlY3VhZGFcbiAgICAgICAgICAgIGFsZXJ0KGBFcnJvciBhbCBjcmVhciBsYSBub3RhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRPdHJvc0FzdW50b3Moc3Vic2lzdGVtYXMpIHtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgY2FtcG8gPSBbXTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgc3Vic2lzdGVtYSBvZiBzdWJzaXN0ZW1hcykge1xuICAgICAgICAgICAgLy8gUHJlZ3VudGEgaW5pY2lhbCBwYXJhIGluY2x1aXIgYWxnXHUwMEZBbiBzdWJzaXN0ZW1hIGNvbW8gb3JpZ2VuXG4gICAgICAgICAgICBsZXQgaW5jbHV5ZSA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBgRGVzZWEgYWdyZWdhciBhbGd1biAke3N1YnNpc3RlbWF9IGFjdGl2byBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgIGlmICghaW5jbHV5ZSkgY29udGludWU7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBjb250aW5cdTAwRkFhIGNvbiBlbCBzaWd1aWVudGUgc3Vic2lzdGVtYVxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGxldCByZWN1cnNvc0FjdGl2b3MgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhzdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIGxldCBwcmltZXJBbGlhcyA9IHJlY3Vyc29zQWN0aXZvcy5tYXAoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YSAmJiBtZXRhZGF0YS5hbGlhc2VzICYmIG1ldGFkYXRhLmFsaWFzZXMubGVuZ3RoID4gMCA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICBcbiAgICAgICAgICAgIHdoaWxlIChyZWN1cnNvc0FjdGl2b3MubGVuZ3RoID4gMCkgeyAvLyBDb250aW5cdTAwRkFhIG1pZW50cmFzIGhheWEgcmVjdXJzb3MgYWN0aXZvcyBwYXJhIGVsZWdpclxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2VTZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIucGF0aCksIGZhbHNlLCBgJHtzdWJzaXN0ZW1hfSBhY3Rpdm9zOmApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIHkgZWxpbWluYSBsYSBzZWxlY2NpXHUwMEYzbiBkZSBsb3MgYXJyZWdsb3MgcGFyYSBubyB2b2x2ZXIgYSBtb3N0cmFybGFcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIFx1MDBFRG5kaWNlIGRlbCBhcmNoaXZvIHNlbGVjY2lvbmFkbyBlbiByZWN1cnNvc0FjdGl2b3MgYmFzXHUwMEUxbmRvbm9zIGVuIGVsIGJhc2VuYW1lXG4gICAgICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLnBhdGggPT09IHNlbGVjY2lvbik7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIuYmFzZW5hbWUpLCBmYWxzZSwgYCR7c3Vic2lzdGVtYX0gYWN0aXZvczpgKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAvLyBFbmN1ZW50cmEgeSBlbGltaW5hIGxhIHNlbGVjY2lcdTAwRjNuIGRlIGxvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsYVxuICAgICAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBcdTAwRURuZGljZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gZW4gcmVjdXJzb3NBY3Rpdm9zIGJhc1x1MDBFMW5kb25vcyBlbiBlbCBiYXNlbmFtZVxuICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLmJhc2VuYW1lID09PSBzZWxlY2Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNlU2VsZWNjaW9uYWRvICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW1wby5wdXNoKHJlY3Vyc29zQWN0aXZvc1tpbmRpY2VTZWxlY2Npb25hZG9dLnBhdGgpOyAvLyBBZ3JlZ2EgZWwgYmFzZW5hbWUgZGVsIGFyY2hpdm8gc2VsZWNjaW9uYWRvIGFsIGNhbXBvICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2FtcG8ucHVzaChyZWN1cnNvc0FjdGl2b3NbaW5kaWNlU2VsZWNjaW9uYWRvXS5iYXNlbmFtZSk7IC8vIEFncmVnYSBlbCBiYXNlbmFtZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gYWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBFbGltaW5hIGVsIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBkZSBhbWJvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsb1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNvc0FjdGl2b3Muc3BsaWNlKGluZGljZVNlbGVjY2lvbmFkbywgMSk7XG4gICAgICAgICAgICAgICAgICAgIHByaW1lckFsaWFzLnNwbGljZShpbmRpY2VTZWxlY2Npb25hZG8sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBxdWVkYW4gbVx1MDBFMXMgcmVjdXJzb3MgYWN0aXZvcywgbm8gcHJlZ3VudGEgc2kgZGVzZWEgYWdyZWdhciBvdHJvXG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc29zQWN0aXZvcy5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFByZWd1bnRhIHNpIGRlc2VhIGFncmVnYXIgb3RybyByZWdpc3RybyBkZWwgbWlzbW8gc3Vic2lzdGVtYVxuICAgICAgICAgICAgICAgIGxldCBkZXNlYUFncmVnYXJPdHJvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIGBEZXNlYSBhZ3JlZ2FyIG90cm8gJHtzdWJzaXN0ZW1hfSBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIGlmICghZGVzZWFBZ3JlZ2FyT3RybykgYnJlYWs7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBzYWxlIGRlbCBjaWNsb1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBjYW1wbzsgLy8gUmV0b3JuYSBlbCBhcnJlZ2xvIGNhbXBvIGNvbiB0b2RhcyBsYXMgc2VsZWNjaW9uZXMgcmVhbGl6YWRhc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBGVU5DSU9OIFFVRSBUUkFFIFRPREFTIExBUyBOT1RBUyBBQ1RJVkFTIERFIExPUyBTSVNURU1BUy4gLSBSZXZpc2FyIGVuIHF1ZSBsYSB1c28uLi5cbiAgICBhc3luYyBhY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXModHlwZU5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSl7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJlYXNJbnRlcmVzXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hIGVsIG5vbWJyZSBkZSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGJhc2FkbyBlbiBlbCB0aXBvXG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyTmFtZSA9IFwiZm9sZGVyX1wiICsgdHlwZU5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbcmVzb3VyY2VGb2xkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGV4aXN0ZSBwYXJhIGV2aXRhciBlcnJvcmVzXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNvdXJjZUZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBjYXJwZXRhIFwiJHtyZXNvdXJjZUZvbGRlck5hbWV9XCIgbm8gZXhpc3RlIGVuIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIFJldG9ybmEgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIGxhIGNhcnBldGEgbm8gZXhpc3RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVSZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGaWx0cmEgbG9zIGFyY2hpdm9zIHF1ZSBlc3RcdTAwRTFuIGRlbnRybyBkZWwgZGlyZWN0b3JpbyBkZXNlYWRvIHkgdGllbmVuIGVzdGFkbyBcdUQ4M0RcdURGRTJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVzb3VyY2VGb2xkZXIpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgZXN0YWRvcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSZXNvdXJjZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IC8vIEZpbiBTd2l0Y2hcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVSZXNvdXJjZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYnVzY2FyIHJlY3Vyc29zIGFjdGl2b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0b3JuYSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gZW4gY2FzbyBkZSBlcnJvclxuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuICAiLCAiaW1wb3J0IHsgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIEFncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgLy8gZ2V0RmVjaGEgcGFyYSBkZXRlcm1pbmFyIHNpIGxhIGZlY2hhIGRlIGxhIHF1ZSBpbmljaWEgZXN0YSBlbiBlbCBhcmNoaXZvIGRlIG9yaWdlbi5cbiAgICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IGZlY2hhO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMudHAuZmlsZS5keW5hbWljX2Z1bmN0aW9ucy5nZXQoXCJ0aXRsZVwiKTtcbiAgICBcbiAgICAgICAgaWYgKHRpdGxlICYmIHRpdGxlLnN0YXJ0c1dpdGgoXCJBZ3JhZGVjaW1pZW50b1wiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJBZ3JhZGVjaW1pZW50byBcIilbMV07XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZvLnBhdGggJiYgYWN0aXZvPy5wYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCIpKSB7XG4gICAgICAgICAgZmVjaGEgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgZGRkZCcpO1xuICAgICAgICAgIGZlY2hhID0gYXdhaXQgdGhpcy5wcm9tcHQoXCJcdTAwQkZEZSBxdVx1MDBFOSBkaWEgZXMgZWwgYWdyYWRlY2ltaWVudG8/P1wiLCBjdXJyZW50RGF0ZSAsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGE7XG4gICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgIH1cblxuICBhc3luYyBnZXRBZ3JhZGVjaW1pZW50b3MoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGxldCBhZ3JhZGVjaW1pZW50b3MgPSBbXTtcbiAgICBsZXQgbnVtQWdyYWRlY2ltaWVudG9zID0gMDtcbiAgICBsZXQgb3RyYTtcbiAgICBkbyB7XG4gICAgICBjb25zdCBhZ3JhZGVjaW1pZW50byA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZXN0XHUwMEUxcyBhZ3JhZGVjaWRvP1wiLCBgR3JhY2lhcyBwb3IgJHtudW1BZ3JhZGVjaW1pZW50b3N9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgYWdyYWRlY2ltaWVudG9zLnB1c2goYWdyYWRlY2ltaWVudG8pO1xuICAgICAgbnVtQWdyYWRlY2ltaWVudG9zICs9IDE7XG4gICAgICBvdHJhID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU1x1MDBFRFwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciBvdHJvIGFncmFkZWNpbWllbnRvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gYWdyYWRlY2ltaWVudG9zO1xuICB9XG5cbn0iLCAiaW1wb3J0IHsgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgRmllbGRIYW5kbGVyVXRpbHMge1xuICBzdGF0aWMgYXN5bmMgY3JlYXJDYXJwZXRhKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZVxuICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gIC8vIEVzdGEgZnVuY2lcdTAwRjNuIHNhbGUgZGUgbWVudU90cm8sIGRlIHJlZ2lzdHJvIFRpZW1wby4gUmV2aXNhciBzaSBkZWJvIHNpbmNyb25pemFybGFzLlxuICBzdGF0aWMgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZSh0aXBvOiBzdHJpbmcsIHBhcmFtZXRybzogYW55LCBwbHVnaW46IGFueSkge1xuICAgIGNvbnN0IHByb3BlcnRpZXNUaXBvID0ge1xuICAgICAgQVY6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgIH0sXG4gICAgICBBSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFBROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgfSxcbiAgICAgIFBHVEQ6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgIH0sXG4gICAgICBUSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVGVtYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFJSOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzLFxuICAgICAgfSxcbiAgICAgIFRROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmltZXN0cmFsLFxuICAgICAgfSxcbiAgICAgIEFZOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BbnVhbCxcbiAgICAgIH0sXG4gICAgICAvLyBQdWVkZXMgY29udGludWFyIGFcdTAwRjFhZGllbmRvIG1cdTAwRTFzIGNhc29zIGFxdVx1MDBFRFxuICAgIH07XG5cbiAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgdGlwbyBlcyB1bmEgcHJvcGllZGFkIHZcdTAwRTFsaWRhIGFudGVzIGRlIGRlc2VzdHJ1Y3R1cmFyXG4gICAgaWYgKCFwcm9wZXJ0aWVzVGlwb1t0aXBvXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaXBvICR7dGlwb30gbm8gZXMgdlx1MDBFMWxpZG8uYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIgPSBbXTtcbiAgICBsZXQgZmlsZXMsIHRyaW1lc3RyZTogc3RyaW5nO1xuICAgIGNvbnN0IGZvbGRlciA9IHByb3BlcnRpZXNUaXBvW3RpcG9dLmZvbGRlcjtcbiAgICBzd2l0Y2ggKHRpcG8pIHtcbiAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICBpZiAoIXBhcmFtZXRybykgeyAvLyBwYXJhbWV0cm8gZW4gZXN0ZSBjYXNvIGVzIGVsIHRyaW1lc3RyZS4gU2luIHBhcmFtZXRybyBzZSBidXNjYSBlbCBub2RvQXJlYVZpZGFcbiAgICAgICAgICB0cmltZXN0cmUgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3VhbmRvIGVsIHRyaW1lc3RyZSBzaSBzZSBpbmdyZXNhIGVuIGxhIGZ1bmNpXHUwMEYzbiwgZW50b25jZXMgYnVzY2EgbGFzIEFyZWFzVmlkYSBkZWwgdHJpbWVzdHJlLlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0cmltZXN0cmUgPSBwYXJhbWV0cm87XG4gICAgICAgIH1cblxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSAmJiBmaWxlLm5hbWUuc3RhcnRzV2l0aCh0cmltZXN0cmUpKTtcblxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICBjYXNlIFwiVFFcIjpcbiAgICAgIGNhc2UgXCJBWVwiOlxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSk7XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpKTtcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVGaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgYWN0aXZlRmlsZS5maWxlID0gZmlsZTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goYWN0aXZlRmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gIH1cbn0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL05vdGVGaWVsZEhhbmRsZXJCYXNlJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIE5vdGVGaWVsZEhhbmRsZXJCYXNle1xuICBwcml2YXRlIHRwOiBhbnk7XG4gIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IGFueTtcbiAgcHJpdmF0ZSBzdWdnZXN0ZXI6IGFueTtcbiAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgcHJpdmF0ZSBmZWNoYUFncjogc3RyaW5nO1xuICBwcml2YXRlIHBsdWdpbjogYW55OyBcblxuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgIHRoaXMudHAgPSB0cDtcbiAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0gaW5mb1N1YnNpc3RlbWE7XG4gICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgdGhpcy5wcm9tcHQgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47IC8vIEFsbWFjZW5hciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBcbiAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICB9XG5cbiAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBsZXQgbWF4SWQgPSAwO1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtYXhJZCArIDE7XG4gIH1cblxuICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICBjb25zdCBjdXJyZW50RGF5ID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke2N1cnJlbnREYXRlfSAke2N1cnJlbnREYXl9YDtcbiAgICB0aGlzLm5vdGEuZmVjaGEgPSBmb3JtYXR0ZWREYXRlO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xufVxuXG4gIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5nZXRJZCgpO1xuICAgIHJldHVybiBbYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0gJHtpZH1gXTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGZlY2hhID0gdGhpcy5ub3RhLmZlY2hhO1xuICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfSAke2ZlY2hhfS5tZGA7XG4gICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKTtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7IC8vIExhbnphbW9zIHVuYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBMYW56YW1vcyBsYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgIH1cbiAgfVxuXG5cbiAgYXN5bmMgZ2V0RXN0YWRvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICB9XG5cbiAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm5vdGE7XG59XG5cbn0iLCAiaW1wb3J0IHsgcmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL1JlZmxleGlvbmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICAvLyBnZXRGZWNoYSBwYXJhIGRldGVybWluYXIgc2kgbGEgZmVjaGEgZGUgbGEgcXVlIGluaWNpYSBlc3RhIGVuIGVsIGFyY2hpdm8gZGUgb3JpZ2VuLlxuICAgIGFzeW5jIGdldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGE7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50cC5maWxlLmR5bmFtaWNfZnVuY3Rpb25zLmdldChcInRpdGxlXCIpO1xuICAgIFxuICAgICAgICBpZiAodGl0bGUgJiYgdGl0bGUuc3RhcnRzV2l0aChcIlJlZmxleGlvblwiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJSZWZsZXhpb24gXCIpWzFdO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGl2by5wYXRoICYmIGFjdGl2bz8ucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9Ob3Rhc1wiKSkge1xuICAgICAgICAgIGZlY2hhID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIGRkZGQnKTtcbiAgICAgICAgICBmZWNoYSA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZGlhIGVzIGxhIHJlZmxleGlcdTAwRjNuPz9cIiwgY3VycmVudERhdGUgLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS5mZWNoYSA9IGZlY2hhO1xuICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgICB9XG5cbiAgYXN5bmMgZ2V0UmVmbGV4aW9uKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBsZXQgcmVmbGV4aW9uZXMgPSBbXTtcbiAgICBsZXQgbnVtUmVmbGV4aW9uZXMgPSAwO1xuICAgIGxldCBvdHJhO1xuICAgIGRvIHtcbiAgICAgIGNvbnN0IHJlZmxleGlvbiA9IGF3YWl0IHRoaXMucHJvbXB0KFwiUXVlIGVzdGFzIHBlbnNhbmRvP1wiLCBgUCR7bnVtUmVmbGV4aW9uZXN9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgcmVmbGV4aW9uZXMucHVzaChyZWZsZXhpb24pO1xuICAgICAgbnVtUmVmbGV4aW9uZXMgKz0gMTtcbiAgICAgIG90cmEgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTXHUwMEVEXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIG90cm8gcFx1MDBFMXJyYWZvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gcmVmbGV4aW9uZXM7XG4gIH1cblxufSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9Ob3RlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRXN0YSBjbGFzZSBzaXJ2ZSBwYXJhIGN1YWxxdWllciBjbGFzZSBxdWUgc29sYW1lbnRlIGRlYmEgcHJvY2VzYXIgXG5sYXMgc2lndWllbnRlcyBwcm9waWVkYWRlczpcbiBjYW1wb3MgPSBbXCJpZFwiLFwiZmVjaGFcIixcInRpdHVsb1wiLFwiZGVzY3JpcGNpb25cIixcImVzdGFkb1wiLFwiYXN1bnRvXCIsXG4gXCJwcm95ZWN0b0dURFwiLFwiUHJveWVjdG9RXCIsXCJhcmVhSW50ZXJlc1wiLFwiYXJlYVZpZGFcIixcImFsaWFzZXNcIixcInJlbmFtZVwiXVxuUGFyYSBoZXJlZGFyIHRvZG8gZGUgZXN0YSBjbGFzZSBzaW4gbW9kaWZpY2FjaW9uZXMsIHNlIGRlYmUgaGFjZXIgXG5leHRlbmRpZW5kbyBsYSBzdWJjbGFzZSBkZSBlc3RhIHkgZGVmaW5pZW5kbyBlbCBjb25zdHJ1Y3RvcjpcblxuY2xhc3Mgc3Vic2lzdGVtYUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICB9XG59XG4uLi4gXG4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuZXhwb3J0IGNsYXNzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBOb3RlRmllbGRIYW5kbGVyIHtcbiAgICBwcml2YXRlIHRwOiBhbnk7XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogYW55O1xuICAgIHByaXZhdGUgc3VnZ2VzdGVyOiBhbnk7XG4gICAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgICBwcml2YXRlIHBsdWdpbjogYW55O1xuXG5cbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgICAgICB0aGlzLnRwID0gdHA7XG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSBpbmZvU3Vic2lzdGVtYTtcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gdHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgLy8gQWxtYWNlbmFyIGxhIGluc3RhbmNpYSBkZWwgcGx1Z2luXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgbGV0IG1heElkID0gMDtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vdGEuaWQgPSAgbWF4SWQgKyAxO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmlkO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGZlY2hhQWN0dWFsID0gRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIGZlY2hhQWN0dWFsID0gZmVjaGFBY3R1YWwuc2V0TG9jYWxlKCdlcycpO1xuICAgICAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nKTtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGFBY3R1YWw7XG4gICAgICAgIHJldHVybiBmZWNoYUFjdHVhbDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaXR1bG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnByb21wdChgVFx1MDBFRHR1bG8gZGUgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfTpgLCBcIlwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0bGU7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBEZXNjcmlwY2lcdTAwRjNuIGRlbCAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9OmAsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG4gICAgICAgIFxuICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKSB7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiIHx8IG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRQcm95ZWN0b0dURCgpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBHVERcIiwgbnVsbCwgdGhpcy5wbHVnaW4pOyAvLyBQYXNhciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBhcXVcdTAwRURsZXQgbm90YUYsIHRpdHVsbztcbiAgICAgICAgICAgIGxldCB0aXR1bG8sIG5pdmVsO1xuICAgICAgICAgICAgbGV0IHBhZHJlUEdURCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBQcm95ZWN0byBHVEQ/YCk7XG4gICAgICAgICAgICBpZiAocGFkcmVQR1REKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vdGFGID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIobm90YXNGLm1hcChiID0+IGIudGl0dWxvKSwgbm90YXNGLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFByb3llY3RvIEdURCBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAobm90YUYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBwcm95ZWN0byBHVEQgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RhRj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhRi5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhRi5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFtub3RhRi5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbbm90YUYudGl0dWxvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gdGl0dWxvLmNvbmNhdChub3RhRi5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ucHVzaChub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wcm95ZWN0b0dURDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0UHJveWVjdG9RKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgbGV0IG5vdGFGLCB0aXR1bG8sIG5pdmVsO1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBRXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICBsZXQgcGFkcmVRID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIFE/YCk7XG5cbiAgICAgICAgICAgIGlmIChwYWRyZVEpIHtcbiAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKG5vdGFzRi5tYXAoYiA9PiBiLnRpdHVsbyksIG5vdGFzRi5tYXAoYiA9PiBiKSwgZmFsc2UsIGBcdTAwQkZRdVx1MDBFOSBQcm95ZWN0byBRIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIFEgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RhRj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhRi5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRj8udGl0dWxvXTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm90YUYucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnByb3llY3RvUTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFJbnRlcmVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgbGV0IGFyZWFJbnRlcmVzLCBuaXZlbCwgdGl0dWxvLCBwYWRyZUFJLCBhcnJheUFJO1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgYXJlYXNJbnRlcmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFJXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICBwYWRyZUFJID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXM6YCk7XG4gICAgICAgICAgICBpZiAocGFkcmVBSSkge1xuICAgICAgICAgICAgICAgIGFyZWFJbnRlcmVzID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNJbnRlcmVzLm1hcChiID0+IGIudGl0dWxvKSwgYXJlYXNJbnRlcmVzLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXMgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFthcmVhSW50ZXJlcy50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmVhSW50ZXJlcz8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSB0aXR1bG8uY29uY2F0KGFyZWFJbnRlcmVzLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmVhSW50ZXJlcz8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5wdXNoKGFyZWFJbnRlcmVzLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJlYUludGVyZXMuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXJlYUludGVyZXMuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZWFJbnRlcmVzLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFJbnRlcmVzLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQoYXJlYUludGVyZXMubml2ZWxBSSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhSW50ZXJlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFWaWRhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBhcmVhc1ZpZGEgPSB7fTtcbiAgICAgICAgbGV0IG5vQVYgPSB7XG4gICAgICAgICAgICBmaWxlOiB7XG4gICAgICAgICAgICAgICAgYmFzZW5hbWU6IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhcmVhVmlkYTogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgcGFkcmVBViA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBcdTAwQzFyZWEgZGUgVmlkYT9gKTtcbiAgICAgICAgICAgIGlmIChwYWRyZUFWKSB7XG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFWXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhLnB1c2gobm9BVik7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNWaWRhLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGFyZWFzVmlkYS5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYFx1MDBCRkEgcXVcdTAwRTkgXHUwMEMxcmVhIGRlIFZpZGEgcGVydGVuZWNlICQke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFWaWRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhVmlkYTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgfVxuXG4vLyBBY3R1YWxpemFjaVx1MDBGM24gZGVsIG1cdTAwRTl0b2RvIGdldFJlbmFtZSBlbiBOb3RlRmllbGRIYW5kbGVyQmFzZS50c1xuLy8gKEVzdGUgZXMgZWwgbVx1MDBFOXRvZG8gcXVlIHNlIHV0aWxpemFyXHUwMEUxIGVuIGxhIG1heW9yXHUwMEVEYSBkZSBsYXMgY2xhc2VzIGRlIG1hbmVqbyBkZSBub3RhcylcblxuYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgO1xuICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YSh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcik7XG4gIFxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gIFxuICAgIHRyeSB7XG4gICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICApO1xuICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE5VRVZBIEZVTkNJT05BTElEQUQ6IEFicmlyIGVsIGFyY2hpdm8gcmVub21icmFkbyBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgaWYgKG51ZXZvQXJjaGl2byBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShudWV2b0FyY2hpdm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTsgLy8gTGFuemFtb3MgdW5hIGV4Y2VwY2lcdTAwRjNuIHBhcmEgZGV0ZW5lciBsYSBjcmVhY2lcdTAwRjNuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBOVUVWQSBGVU5DSU9OQUxJREFEOiBBYnJpciBlbCBhcmNoaXZvIHJlbm9tYnJhZG8gZW4gdW5hIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgaWYgKG51ZXZvQXJjaGl2byBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUobnVldm9BcmNoaXZvKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBMYW56YW1vcyBsYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgIH1cbiAgfVxufSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIENvbnRlbmlkb1BhcmFFc3R1ZGlvRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuICB9IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBSZWN1cnNvc1JlY3VycmVudGVzRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuICB9IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgUEdUREZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpeyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcblxuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IHN1YnNpc3RlbWFzLCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgc3dpdGNoKHRpcG9TaXN0ZW1hKSB7IC8vIEVzdG95IGNyZWFuZG8gdW46IFxuICAgICAgICAgICAgICAgIGNhc2UgXCJSUlwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIkNQRVwiOiAgLy8gQ29udGVuaWRvIHBhcmEgRXN0dWRpb1xuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpeyAvLyBMYSBub3RhIGFjdGl2cyBlcyB1bmE6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vbWJyZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1lbHNleyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIFJSXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjogIC8vIEVzdG95IENyZWFuZG8gdW4gUFEgXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBRIHJlcXVpZXJlIG9ibGlnYXRvcmlhbWVudGUgdGVuZXIgQXJlYSBkZSBWaWRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSAhPT0gdW5kZWZpbmVkICYmIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDXHUwMEYzZGlnbyBhIGVqZWN1dGFyIHNpIGFyZWFWaWRhIGV4aXN0ZSB5IG5vIGVzIHVuYSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpeyAvLyB0aXBvIGRlIG5vdGEgYWN0aXZhIGNyZWFuZG8gdW4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlVuIFByb3llY3RvIGRlIFEgc29sbyBwdWVkZSBpbmljaWFyIGRlIHVuIEFWLCBBSSBvIFBHVEQuIEFzdW50byBubyBkZWZpbmlkby5cIik7ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIC8vIEFyZWEgZGUgdmlkYSBkZSBhY3RpdmEsIGNyZWFuZG8gUFEgTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUb2RvcyBsb3MgcHJveWVjdG9zIGRlIFEgcmVxdWllcmVuIEFyZWEgZGUgVmlkYS4gQXN1bnRvIG5vIGRlZmluaWRvLlwiKTsgXG4gICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgIH0gICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIFBRXG4gICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6IC8vIENyZWFuZG8gdW4gQUlcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTEFJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbEFJKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbEFJKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgLy8gQ2FzZSBBSSAtIEFWXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0gLy8gc3dpdGNoIGNhc2Ugc29icmUgZWwgdGlwbyBkZSBub3RhIGFjdGl2YS5cbiAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyB1biBBSVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICAvLyBBc3VudG8gRGUgbGEgbm90YSBxdWUgZXN0XHUwMEU5IGNyZWFuZG8gY3VhbmRvIGVzIGN1YWxxdWVpciBjb3NhXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGVwZW5kaWVuZG8gZGUgbGEgZXN0cnVjdHVyYSwgZ2V0QXN1bnRvIGRlYmVyaWEgdGVuZXIgc3UgY2xhc2lmaWNhY2lcdTAwRjNuLiBBcXVpIHZhcyBhIHRlbmVyIHVuIGVycm9yLlwiKSBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSAvLyBzd2l0Y2ggdGlwbyhzaXN0ZW1hKSAtPiBTb2JyZSBsYSBub3RhIHF1ZSBlc3RcdTAwRTkgY3JlYW5kby5cblxuICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHtzaUFzdW50bywgbm9tYnJlOiBwYWRyZXN9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UHJveWVjdG9HVEQoKSB7XG4gICAgICAgIGxldCB0aXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBHVERcIiwgbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICBsZXQgbm90YUYsIHRpdHVsbyA9IFtdO1xuICAgICAgICBsZXQgcGFkcmVQR1REO1xuICAgIFxuICAgICAgICBpZiAoIXRoaXMubm90YS5hc3VudG9EZWZpbmlkbykge1xuICAgICAgICAgICAgcGFkcmVQR1REID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAke3RoaXMubm90YS50aXR1bG99IGVzIGhpam8gZGUgdW4gUHJveWVjdG8gR1REP2ApO1xuICAgIFxuICAgICAgICAgICAgaWYgKHBhZHJlUEdURCkge1xuICAgICAgICAgICAgICAgIG5vdGFGID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIobm90YXNGLm1hcChiID0+IGIudGl0dWxvKSwgbm90YXNGLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFByb3llY3RvIEdURCBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAobm90YUYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBwcm95ZWN0byBHVEQgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBub3RhRi5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vdGFGPy5hcmVhSW50ZXJlcyA/IFtub3RhRi5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGPy5hcmVhVmlkYSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKEFycmF5LmlzQXJyYXkobm90YUYuYXJlYVZpZGEpID8gbm90YUYuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSA6IG5vdGFGLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9RKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbm90YUYucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm90YUY/LnByb3llY3RvUSA/IFtub3RhRi5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV0gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbbm90YUYudGl0dWxvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gdGl0dWxvLmNvbmNhdChub3RhRi5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGFGPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLnB1c2gobm90YUYucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSAhaXNOYU4ocGFyc2VJbnQobm90YUY/Lm5pdmVsUCkpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChub3RhRi5uaXZlbFApICsgMSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSAwO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEucHJveWVjdG9HVEQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKXtcbiAgICAgICAgbGV0IG5ld05hbWUsIGZvbGRlcjtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGlmICh0aGlzLm5vdGEuYXJlYVZpZGE9PT1cIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiKXtcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vT3RyYXMvJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9L090cmFzYFxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX1gXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgIFxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gIH0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBQUUZpZWxkSGFuZGxlciB9IGZyb20gJy4uLy4uL0ludGVyZmFjZXMvUFFGaWVsZEhhbmRsZXInO1xuXG5leHBvcnQgY2xhc3MgUFFGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyIGltcGxlbWVudHMgUFFGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpeyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcblxuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IHN1YnNpc3RlbWFzLCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgc3dpdGNoKHRpcG9TaXN0ZW1hKSB7IC8vIEVzdG95IGNyZWFuZG8gdW46IFxuICAgICAgICAgICAgICAgIGNhc2UgXCJSUlwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlR4XCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIkNQRVwiOiAgLy8gQ29udGVuaWRvIHBhcmEgRXN0dWRpb1xuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpeyAvLyBMYSBub3RhIGFjdGl2cyBlcyB1bmE6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vbWJyZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSB0aGlzLm5vdGEucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1lbHNleyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIFJSXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjogIC8vIEVzdG95IENyZWFuZG8gdW4gUFEgXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBRIHJlcXVpZXJlIG9ibGlnYXRvcmlhbWVudGUgdGVuZXIgQXJlYSBkZSBWaWRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSAhPT0gdW5kZWZpbmVkICYmIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDXHUwMEYzZGlnbyBhIGVqZWN1dGFyIHNpIGFyZWFWaWRhIGV4aXN0ZSB5IG5vIGVzIHVuYSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuaXZlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpeyAvLyB0aXBvIGRlIG5vdGEgYWN0aXZhIGNyZWFuZG8gdW4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlVuIFByb3llY3RvIGRlIFEgc29sbyBwdWVkZSBpbmljaWFyIGRlIHVuIEFWLCBBSSBvIFBHVEQuIEFzdW50byBubyBkZWZpbmlkby5cIik7ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgICAgIC8vIEFyZWEgZGUgdmlkYSBkZSBhY3RpdmEsIGNyZWFuZG8gUFEgTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJUb2RvcyBsb3MgcHJveWVjdG9zIGRlIFEgcmVxdWllcmVuIEFyZWEgZGUgVmlkYS4gQXN1bnRvIG5vIGRlZmluaWRvLlwiKTsgXG4gICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgIH0gICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIFBRXG4gICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6IC8vIENyZWFuZG8gdW4gQUlcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTEFJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbEFJKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbEFJKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgLy8gQ2FzZSBBSSAtIEFWXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0gLy8gc3dpdGNoIGNhc2Ugc29icmUgZWwgdGlwbyBkZSBub3RhIGFjdGl2YS5cbiAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyB1biBBSVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICAvLyBBc3VudG8gRGUgbGEgbm90YSBxdWUgZXN0XHUwMEU5IGNyZWFuZG8gY3VhbmRvIGVzIGN1YWxxdWVpciBjb3NhXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGVwZW5kaWVuZG8gZGUgbGEgZXN0cnVjdHVyYSwgZ2V0QXN1bnRvIGRlYmVyaWEgdGVuZXIgc3UgY2xhc2lmaWNhY2lcdTAwRjNuLiBBcXVpIHZhcyBhIHRlbmVyIHVuIGVycm9yLlwiKSBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSAvLyBzd2l0Y2ggdGlwbyhzaXN0ZW1hKSAtPiBTb2JyZSBsYSBub3RhIHF1ZSBlc3RcdTAwRTkgY3JlYW5kby5cblxuICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgfSBcbiAgICAgICAgcmV0dXJuIHtzaUFzdW50bywgbm9tYnJlOiBwYWRyZXN9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UHJveWVjdG9HVEQoKSB7XG4gICAgICAgIGxldCB0aXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBHVERcIiwgbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICBsZXQgbm90YUYsIHRpdHVsbyA9IFtdO1xuICAgICAgICBsZXQgcGFkcmVQR1REO1xuICAgIFxuICAgICAgICBpZiAoIXRoaXMubm90YS5hc3VudG9EZWZpbmlkbykge1xuICAgICAgICAgICAgcGFkcmVQR1REID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAke3RoaXMubm90YS50aXR1bG99IGVzIGhpam8gZGUgdW4gUHJveWVjdG8gR1REP2ApO1xuICAgIFxuICAgICAgICAgICAgaWYgKHBhZHJlUEdURCkge1xuICAgICAgICAgICAgICAgIG5vdGFGID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIobm90YXNGLm1hcChiID0+IGIudGl0dWxvKSwgbm90YXNGLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFByb3llY3RvIEdURCBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAobm90YUYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBwcm95ZWN0byBHVEQgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBub3RhRi5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5vdGFGPy5hcmVhSW50ZXJlcyA/IFtub3RhRi5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGPy5hcmVhVmlkYSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKEFycmF5LmlzQXJyYXkobm90YUYuYXJlYVZpZGEpID8gbm90YUYuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSA6IG5vdGFGLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9RKSBcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbm90YUYucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm90YUY/LnByb3llY3RvUSA/IFtub3RhRi5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV0gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFtdO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbbm90YUYudGl0dWxvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gdGl0dWxvLmNvbmNhdChub3RhRi5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGFGPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLnB1c2gobm90YUYucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSAhaXNOYU4ocGFyc2VJbnQobm90YUY/Lm5pdmVsUCkpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBwYXJzZUludChub3RhRi5uaXZlbFApICsgMSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSAwO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEucHJveWVjdG9HVEQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKXtcbiAgICAgICAgbGV0IG5ld05hbWUsIGZvbGRlcjtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBmb2xkZXJBViA9IEFycmF5LmlzQXJyYXkodGhpcy5ub3RhLmFyZWFWaWRhKT8gdGhpcy5ub3RhLmFyZWFWaWRhWzBdIDogdGhpcy5ub3RhLmFyZWFWaWRhOyBcbiAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7Zm9sZGVyQVZ9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHtmb2xkZXJBVn1gXG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICBcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpeyAgXG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgdHJpbWVzdHJlO1xuICAgICAgICAvL2xldCB0cmltZXN0cmVzID0gYXdhaXQgdGhpcy5hY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXMoXCJUcmltZXN0cmFsXCIpOyAvLyBGdW5jaW9uYSBlbiBsYSB2ZXJzaVx1MDBGM24gMS4wIGRlIEFyZWFzIGRlIFZpZGEuXG4gICAgICAgIGxldCB0cmltZXN0cmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlRRXCIsbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoKHRpcG9TaXN0ZW1hKSB7XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcih0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksdHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYFRyaW1lc3RyZSBkZWwgJHtub21icmVTaXN0ZW1hfTpgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJPQ0FcIjogLy8gT2JqZXRpdm9Db21wYXNzQW51YWwgXG4gICAgICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTFgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEyYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RM2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBgXHUwMEJGRW4gcXVcdTAwRTkgdHJpbWVzdHJlIGRlbCAke3RoaXMubm90YS5hXHUwMEYxb30gY29uc2lkZXJhcyBxdWUgc2UgcHVlZGUgcmVhbGl6YXIgZXNlIG9iamV0aXZvP2BcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkNUSVwiOiAvLyBDb21wYXNzVHJpbWVzdHJhbEluaWNpb1xuICAgICAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcIlExXCIsIFwiUTJcIiwgXCJRM1wiLCBcIlE0XCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVExYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTNgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVE0YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1MDBCRkRlIHF1XHUwMEU5IHRyaW1lc3RyZSBkZWwgJHt0aGlzLm5vdGEuYVx1MDBGMW99IGVzIGVzdGEgcGxhbmVhY2lcdTAwRjNuP2BcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSx0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5wYXRoKSwgZmFsc2UsIGBUcmltZXN0cmUgZGVsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgICAgICAgICAgfVxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0cmltZXN0cmUgPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk1vZGlmaWNhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS50cmltZXN0cmUgPSB0cmltZXN0cmU7XG4gICAgICAgIHJldHVybiB0cmltZXN0cmU7XG4gICAgfVxuICB9IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXJ9IGZyb20gJy4uLy4uL0ludGVyZmFjZXMvQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXInO1xuXG5leHBvcnQgY2xhc3MgQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyIGltcGxlbWVudHMgQW5vdGFjaW9uZXNGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRDbGFzaWZpY2FjaW9uKCk6IFByb21pc2U8eyBjbGFzZTogc3RyaW5nIHwgbnVsbCwgdGFnOiBzdHJpbmcgfCBudWxsIH0gfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgdGFnQ2xhc2lmaWNhY2lvbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGxldCBjbGFzaWZpY2FjaW9uQVg6IHsgW3g6IHN0cmluZ106IGFueTsgfSA9IHt9O1xuICAgICAgICBsZXQgdGFnc0NsYXNpZmljYWNpb25BWDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgIFxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICBjbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50aXR1bG9DbGFzaWZpY2FjaW9uQVggfHwgW107XG4gICAgICAgICAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYID0gZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBcIk51ZXZvXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCBub21icmUgZGUgbGEgbnVldmEgY2xhc2lmaWNhY2lcdTAwRjNuIHF1ZSB2YXMgYSBpbmdyZXNhcj9cIiwgXCJNaUNsYXNpZmljYWNpXHUwMEYzblwiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbnVldmFDbGFzaWZpY2FjaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gXCJOaW5ndW5hXCIpIHtcbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gXCJcIjtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kaWNlID0gdGFnc0NsYXNpZmljYWNpb25BWC5pbmRleE9mKHRhZ0NsYXNpZmljYWNpb24pO1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAobnVldmFDbGFzaWZpY2FjaW9uKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyOiB7IHRpdHVsb0NsYXNpZmljYWNpb25BWDogYW55W10sIHRhZ3NDbGFzaWZpY2FjaW9uQVg6IGFueVtdIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q2xhc2lmaWNhY2lvbiA9IFsuLi5jbGFzaWZpY2FjaW9uQVgsIGNsYXNpZmljYWNpb25dO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWdDbGFzaWZpY2FjaW9uID0gWy4uLnRhZ3NDbGFzaWZpY2FjaW9uQVgsIHRhZ0NsYXNpZmljYWNpb25dO1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlci50aXR1bG9DbGFzaWZpY2FjaW9uQVggPSBuZXdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYID0gbmV3VGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gIT09IFwiXCIpIHtcbiAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBcImNsL1wiICsgdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLm5vdGEuY2xhc2lmaWNhY2lvbkFYID0gY2xhc2lmaWNhY2lvbjtcbiAgICAgICAgdGhpcy5ub3RhLnRhZ0NsYXNpZmljYWNpb25BWCA9IHRhZ0NsYXNpZmljYWNpb247XG4gICAgXG4gICAgICAgIHJldHVybiB7IGNsYXNlOiBjbGFzaWZpY2FjaW9uLCB0YWc6IHRhZ0NsYXNpZmljYWNpb24gfTtcbiAgICB9XG59IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zYWNjaW9uZXNGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG4gICAgYXN5bmMgZ2V0RmVjaGEoKSA6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBmZWNoYTsgIFxuICAgICAgICBsZXQgZmVjaGFPcmlnaW5hbCA9IGF3YWl0IHRoaXMucHJvbXB0KGBDb25maXJtYSBsYSBmZWNoYSBkZSBsYSB0cmFuc2FjY2lcdTAwRjNuOiBgLCBgJHttb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW0nKX1gLCB0cnVlKVxuICAgICAgICAvLyBQYXJzZWFuZG8gbGEgZmVjaGEgb3JpZ2luYWwgdXRpbGl6YW5kbyBtb21lbnRcbiAgICAgICAgbGV0IGZlY2hhTW9tZW50ID0gbW9tZW50KGZlY2hhT3JpZ2luYWwsIFwiWVlZWS1NTS1ERCBISDptbVwiKTtcbiAgICAgICAgLy8gRm9ybWF0ZWFuZG8gbGEgbnVldmEgZmVjaGEgYWwgZm9ybWF0byBkZXNlYWRvXG4gICAgICAgIGZlY2hhID0gZmVjaGFNb21lbnQuZm9ybWF0KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuICAgICAgICB0aGlzLm5vdGEuZmVjaGEgPSBmZWNoYTtcbiAgICAgICAgcmV0dXJuIGZlY2hhO1xuICAgIH1cbiAgICBcbiAgICAgICAgYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIGxldCBmZWNoYSA9IG1vbWVudCh0aGlzLm5vdGEuZmVjaGEsIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuICAgICAgICAgICAgbGV0IGZlY2hhWSA9IGZlY2hhLmZvcm1hdChcIllZWVlcIik7XG4gICAgICAgICAgICBsZXQgZmVjaGFNZXMgPSBmZWNoYS5mb3JtYXQoXCJNTSAtIE1NTU1cIik7XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHtmZWNoYVl9LyR7ZmVjaGFNZXN9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke2ZlY2hhWX0vJHtmZWNoYU1lc31gXG4gICAgICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gIH0iLCAiLyogc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlci50cyAqL1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cblxuZXhwb3J0IGNsYXNzIEFyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50bygpeyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcblxuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICAvLzEuIHNpQXN1bnRvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTEFJXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsQUkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbEFJKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4ge3NpQXN1bnRvLCBub21icmU6IHBhZHJlc31cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoKXtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTsgIFxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhICE9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCIpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICB9ICAgICAgIFxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBsZXQgbmV3TmFtZSwgZm9sZGVyO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgaWYgKHRoaXMubm90YS5hcmVhVmlkYT09PVwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCIpe1xuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhcy8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vT3RyYXNgXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfWBcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRBcmVhSW50ZXJlcygpe1xuICAgICAgICBsZXQgbm9tYnJlVGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhcmVhc0ludGVyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQUlcIixudWxsLHRoaXMucGx1Z2luKVxuICAgICAgICBsZXQgYXJlYUludGVyZXMsIG5pdmVsLCB0aXR1bG8sIHBhZHJlQUksIGFycmF5QUk7XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBwYWRyZUFJID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsZmFsc2VdLCBmYWxzZSwgYCAke3RoaXMubm90YS50aXR1bG99IGVzIGhpam8gZGUgb3RyYSAke25vbWJyZVRpcG99OmApO1xuICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgaWYgKHBhZHJlQUkpe1xuICAgICAgICAgICAgICAgIGFyZWFJbnRlcmVzID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNJbnRlcmVzLm1hcChiID0+IGIudGl0dWxvKSAsYXJlYXNJbnRlcmVzLm1hcChiID0+IGIpLCBmYWxzZSwgYFF1ZSBBcmVhIGRlIEludGVyXHUwMEU5cyBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAoYXJlYUludGVyZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBBcmVhIGRlIEludGVyZXNcIik7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7IC8vIFFVRSBIQUNFIEVTVEUgRUxTRT8/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYUludGVyZXMuYXJlYVZpZGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFJbnRlcmVzLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gYXJlYUludGVyZXMudGl0dWxvO1xuICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KGFyZWFJbnRlcmVzLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXG5cdCAgICB0aGlzLm5vdGEubml2ZWxBSSA9IG5pdmVsO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICB9ZWxzZXtcbiAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFJbnRlcmVzOyBcbiAgICAgICB9XG4gICAgfVxuXG4gIH0iLCAiaW1wb3J0IHsgQXJlYVZpZGFGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL0FyZWFWaWRhRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBBcmVhVmlkYUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgQXJlYVZpZGFGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXJlYSgpe1xuICAgICAgICBsZXQgYXJlYTogc3RyaW5nIHwgbnVsbCwgZ3J1cG86IHN0cmluZyB8IG51bGw7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGlwb0FyZWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgbnVldmFBcmVhID0gZmFsc2U7XG4gICAgICAgIGxldCBhcmVhc0dydXBvcyA9ICB0aGlzLmdldER1cGxhc0ZpamFzKGFwcCwgdGlwb0FyZWEpXG4gICAgICAgIGxldCBhcmVhR3J1cG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhcmVhc0dydXBvcy5tYXAoYj0+IGIudGV4dG8pLCBhcmVhc0dydXBvcy5tYXAoYj0+IGIudGV4dG8pLCBmYWxzZSwgYFx1MDBCRkN1XHUwMEUxbCAke3RpcG9BcmVhfSBkZXNlYXMgY3JlYXI/YClcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLiBcbiAgICAgICAgICAgIGlmIChhcmVhR3J1cG8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZWFHcnVwbz09XCJOdWV2b1wiKXtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gYXdhaXQgdGhpcy5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIG5vbWJyZSBkZSBsYSBudWV2YSBjbGFzaWZpY2FjaVx1MDBGM24gcXVlIHZhcyBhIGluZ3Jlc2FyP1wiLCBcIk1pQ2xhc2lmaWNhY2lcdTAwRjNuXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCB0YWcgcXVlIHV0aWxpemFyYXMgcGFyYSBcIiArIGNsYXNpZmljYWNpb24gKyBcIj8uIE5vIHV0aWxpY2VzIGVzcGFjaW9zIGVuIGxhIGRlZmluaWNpXHUwMEYzbiBkZWwgdGFnLlwiLCBcIm51ZXZvVGFnXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbnVldmFDbGFzaWZpY2FjaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2UgPSBhcmVhc0dydXBvcy5maW5kSW5kZXgob2JqZXRvID0+IG9iamV0by50ZXh0byA9PT0gYXJlYUdydXBvKTtcbiAgICAgICAgICAgICAgICBncnVwbyA9IGFyZWFzR3J1cG9zW2luZGljZV0uZ3J1cG87XG4gICAgICAgICAgICAgICAgYXJlYSA9IGFyZWFzR3J1cG9zW2luZGljZV0uYXJlYTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZ3J1cG8gPSBncnVwbztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gYXJlYTtcbiAgICAgICAgICAgIHJldHVybiB7Z3J1cG86IGdydXBvLCB0aXR1bG86IGFyZWF9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgIGdldER1cGxhc0ZpamFzKGFwcDogQXBwLCBhcmVhOiBzdHJpbmcpOiBQcm9taXNlPEdydXBvQWN0aXZpZGFkW10+IHtcbiAgICAgICAgLy8gRW5jdWVudHJhIGVsIGFyY2hpdm8gcG9yIHN1IHJ1dGFcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgIC8vIEFjY2VkZSBhbCBmcm9udCBtYXR0ZXIgKFlBTUwpIGRlbCBhcmNoaXZvIHkgb2J0aWVuZSBlbCBhcnJlZ2xvIGJhc2FkbyBlbiBlbCB0ZW1hXG4gICAgICAgICAgICAgICAgY29uc3QgYXJyZWdsb1Jlc3VsdCA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uW2FyZWFdIHx8IFtdO1xuICAgICAgICAgICAgICAgIC8vIENvbnN0cnV5ZSBlbCBhcnJlZ2xvIGRlIG9iamV0b3MgcmVzdWx0YWRvIGJhc2FkbyBlbiBsYSBlc3RydWN0dXJhIGRlIEdydXBvQWN0aXZpZGFkXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvID0gW107XG5cbiAgICAgICAgICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9SZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycmVnbG9SZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRhZG8ucHVzaCh7IGdydXBvOiBpdGVtWzBdLCBhcmVhOiBpdGVtWzFdLCB0ZXh0bzogaXRlbVswXStcIi9cIitpdGVtWzFdfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldnVlbHZlIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBzaSBubyBzZSBlbmN1ZW50cmEgZWwgYXJjaGl2byBvIHNpIG9jdXJyZSBjdWFscXVpZXIgb3RybyBwcm9ibGVtYVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgZ2V0RmlsZW5hbWUoKXtcbiAgICAgICAgbGV0IGZpbGVOYW1lO1xuICAgICAgICBpZiAodGhpcy5pbmZvU3Vic2lzdGVtYS5oYXNPd25Qcm9wZXJ0eShcImZpbGVOYW1lXCIpKXtcbiAgICAgICAgICAgIGNvbnN0IHBhcnRlcyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuZmlsZU5hbWUuc3BsaXQoJyAtLSAnKTtcbiAgICAgICAgICAgIHRoaXMubm90YS50cmltZXN0cmUgPSBwYXJ0ZXNbMF07XG4gICAgICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gcGFydGVzWzFdO1xuICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gcGFydGVzWzFdO1xuICAgICAgICAgICAgdGhpcy5ub3RhLmdydXBvID0gcGFydGVzWzJdO1xuICAgICAgICB9XG4gICAgICAgIGZpbGVOYW1lID0gYCR7dGhpcy5ub3RhLnRyaW1lc3RyZX0gLSAke3RoaXMubm90YS50aXR1bG99YCAgICBcbiAgICAgICAgdGhpcy5ub3RhLmZpbGVuYW1lID0gZmlsZU5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZpbGVOYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpe1xuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IHRyaW1lc3RyZTtcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJUUVwiLG51bGwsdGhpcy5wbHVnaW4pO1xuICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcih0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksdHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYFRyaW1lc3RyZSBkZWwgJHtub21icmVTaXN0ZW1hfTpgKTtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0cmltZXN0cmUgPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk1vZGlmaWNhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHRyaW1lc3RyZTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCl7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgbmV3TmFtZSwgbmFtZSwgZm9sZGVyOyAgICAgIFxuICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vJHt0aGlzLm5vdGEuZmlsZW5hbWV9Lm1kYFxuICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudGl0dWxvfS9gXG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcblxuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICBsZXQgbm9tYnJlRmlsZSA9IG5ld05hbWU/LnNwbGl0KFwiL1wiKTtcblxuICAgICAgICAgICAgICAgIGxldCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdWUgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcil7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKVxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBEZXNjcmlwY2lcdTAwRjNuIGRlbCAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9OmAsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBbGlhc2VzKCl7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuZ3J1cG99LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL25vZG9BcmVhVmlkYUZpZWxkSGFuZGxlcic7XG5cbmV4cG9ydCBjbGFzcyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlcntcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cblxuICAgIGFzeW5jIGdldElkKCkgeyBcbiAgICAgICAgbGV0IG1heElkID0gMDtcbiAgICAgICAgLy8gT2J0XHUwMEU5biB0b2RvcyBsb3MgYXJjaGl2b3MgTWFya2Rvd25cbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBsZXQgcmVnaXN0cm9zRXhpc3RlbnRlcyA9IGZpbGVzLmZpbHRlcigoZmlsZTogeyBwYXRoOiBzdHJpbmc7IH0pID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKSk7XG4gICAgICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkgJiYgbWV0YWRhdGEudHlwZSAmJiBtZXRhZGF0YS50eXBlID09PSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCl7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgcGFydGVzID0gZmlsZS5iYXNlbmFtZS5zcGxpdCgnIC0gJyk7XG4gICAgICAgIHRoaXMubm90YS5ncnVwbyA9IHBhcnRlc1swXTtcbiAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gcGFydGVzWzFdO1xuXG4gICAgICAgIC8vIE9idGVuZXIgbGEgcnV0YSBjb21wbGV0YSBkZWwgYXJjaGl2byBhY3R1YWxcbiAgICAgICAgY29uc3QgZnVsbFBhdGggPSBmaWxlLnBhdGg7XG5cbiAgICAgICAgLy8gRXh0cmFlciBsYSBydXRhIGRlbCBkaXJlY3RvcmlvIHNpbiBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgZGlyZWN0b3J5UGF0aCA9IGZ1bGxQYXRoLnN1YnN0cmluZygwLCBmdWxsUGF0aC5sYXN0SW5kZXhPZignLycpICsgMSk7XG5cbiAgICAgICAgLy8gQ29uY2F0ZW5hciBsYSBydXRhIGRlbCBkaXJlY3RvcmlvIGNvbiBlbCBub21icmUgZGVsIGFyY2hpdm8geSBsYSBleHRlbnNpXHUwMEYzbiAubWRcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtkaXJlY3RvcnlQYXRofSR7cGFydGVzWzFdfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IG5ld05hbWUsIGZvbGRlcjsgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLmZpbGVuYW1lfS5tZGBcbiAgICAgICAgLy8gZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS9gXG4gICAgICAgIC8vIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuXG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZU5hbWUpO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICBsZXQgbm9tYnJlRmlsZSA9IG5ld05hbWU/LnNwbGl0KFwiL1wiKTtcblxuICAgICAgICAgICAgICAgIGxldCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdWUgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcil7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH0gIFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG59IiwgIi8vIGNhbXBvcyA9IFtcImlkXCIsXCJmZWNoYVwiLFwiYXJlYVZpZGFcIixcImFcdTAwRjFvXCIsXCJ0aXR1bG9cIixcImRlc2NyaXBjaW9uXCIsXCJ0cmltZXN0cmVcIixcImVzdGFkb1wiLFwiYWxpYXNlc1wiLFwicmVuYW1lXCJdO1xuXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9PYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIE9iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBPYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXJ7XG4gICAgXG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldEVzdGFkbygpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gJ1x1RDgzRFx1REZFMSc7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXJlYVZpZGEoKXtcbiAgICAgICAgbGV0IGFyZWFWaWRhO1xuICAgICAgICBpZiAoIXRoaXMubm90YS5hc3VudG9EZWZpbmlkbykge1xuICAgICAgICBsZXQgbm9tYnJlQXJjaGl2byA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuZmlsZU5hbWU7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL09iamV0aXZvIHBhcmEgKC4rKVxcLm1kJC87XG4gICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IG5vbWJyZUFyY2hpdm8ubWF0Y2gocmVnZXgpO1xuICAgICAgICBpZiAocmVzdWx0YWRvICYmIHJlc3VsdGFkb1sxXSkge1xuICAgICAgICAgICAgLy8gUmV0b3JuYW1vcyBlbCBncnVwbyBjYXB0dXJhZG8sIHF1ZSBlcyBlbCB2YWxvciBkZXNlYWRvIGRlIHN1YnN0clxuICAgICAgICAgICAgYXJlYVZpZGEgPSByZXN1bHRhZG9bMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaSBubyBzZSBlbmN1ZW50cmEgdW5hIGNvaW5jaWRlbmNpYSwgcG9kclx1MDBFRGFtb3MgcmV0b3JuYXIgbnVsbCBvIGFsZ3VuYSBvdHJhIHNlXHUwMEYxYWwgZGUgbm8gZW5jb250cmFkb1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gIFxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFWaWRhO1xuICAgICAgICByZXR1cm4gYXJlYVZpZGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFWaWRhO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRUaXR1bG8oKXtcbiAgICAgICAgbGV0IHRpdHVsbztcbiAgICAgICAgdGl0dWxvID0gYXdhaXQgdGhpcy5wcm9tcHQoYEN1YWwgZXMgdHUgb2JqZXRpdm8gZW4gJHt0aGlzLm5vdGEuYVx1MDBGMW99IHBhcmEgJHt0aGlzLm5vdGEuYXJlYVZpZGF9P2AsIGBWb3kgYSBgLCB0cnVlLCB0cnVlKSAvLyA0IHBhcmFtZXRybyB0cnVlOiBNdWx0aWxpbmVhLlxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0aXR1bG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IHRpdHVsbztcbiAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBXHUwMEYxbygpe1xuICAgICAgICAgXG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhXHUwMEYxbztcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgYVx1MDBGMW9zID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFZXCIsIG51bGwsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGxldCBub21icmVBcmNoaXZvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5maWxlTmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcLyhcXGR7NH0pLztcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IG5vbWJyZUFyY2hpdm8ubWF0Y2gocmVnZXgpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdGFkbyAmJiByZXN1bHRhZG9bMV0pIHtcbiAgICAgICAgICAgICAgICAvLyBSZXRvcm5hbW9zIGVsIGdydXBvIGNhcHR1cmFkbywgcXVlIGVzIGVsIHZhbG9yIGRlc2VhZG8gZGUgc3Vic3RyXG4gICAgICAgICAgICAgICAgYVx1MDBGMW8gPSByZXN1bHRhZG9bMV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNpIG5vIHNlIGVuY3VlbnRyYSB1bmEgY29pbmNpZGVuY2lhLCBwb2RyXHUwMEVEYW1vcyByZXRvcm5hciBudWxsIG8gYWxndW5hIG90cmEgc2VcdTAwRjFhbCBkZSBubyBlbmNvbnRyYWRvXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIGlmIChhXHUwMEYxbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmFcdTAwRjFvID0gYVx1MDBGMW87XG4gICAgICAgIHJldHVybiBhXHUwMEYxbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBcdTAwQkZRdWllcmVzIGFncmVnYXIgZGV0YWxsZXMgZGUgdHUgb2JqZXRpdm8/YCwgXCJcIiwgZmFsc2UsIHRydWUpO1xuICAgICAgICB0aGlzLm5vdGEuZGVzY3JpcGNpb24gPSBkZXNjcmlwY2lvbjtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXBjaW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpe1xuICAgICAgICBsZXQgdHJpbWVzdHJlO1xuICAgICAgICAvL2xldCB0cmltZXN0cmVzID0gYXdhaXQgdGhpcy5hY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXMoXCJUcmltZXN0cmFsXCIpOyAvLyBGdW5jaW9uYSBlbiBsYSB2ZXJzaVx1MDBGM24gMS4wIGRlIEFyZWFzIGRlIFZpZGEuXG4gICAgICAgIGxldCB0cmltZXN0cmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlRRXCIsbnVsbCx0aGlzLnBsdWdpbik7XG4gICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMWAsXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMmAsXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RM2AsXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RNGAsXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIGBcdTAwQkZFbiBxdVx1MDBFOSB0cmltZXN0cmUgZGVsICR7dGhpcy5ub3RhLmFcdTAwRjFvfSBjb25zaWRlcmFzIHF1ZSBzZSBwdWVkZSByZWFsaXphciBlc2Ugb2JqZXRpdm8/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICBcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodHJpbWVzdHJlID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gdHJpbWVzdHJlO1xuICAgICAgICByZXR1cm4gdHJpbWVzdHJlO1xuICAgIH1cblxuICAgIFxuICAgIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuYVx1MDBGMW99LyR7dGhpcy5ub3RhLmlkfWApXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS5hXHUwMEYxb30vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLmlkfWApXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgIFxuICAgICAgICBsZXQgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfWBcbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb30vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcblxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgfSIsICIvL2NhbXBvcyA9IFtcImlkXCIsXCJmZWNoYVwiLFwiYVx1MDBGMW9cIixcImVzdGFkb1wiLFwiYWxpYXNlc1wiLFwicmVuYW1lXCJdXG5cbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IENvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkggfSBmcm9tICcuLi9JbnRlcmZhY2VzL0NvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkgnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGFzc1BsYW5lYWNpb25BbnVhbF9GSCBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVye1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG4gICAgYXN5bmMgZ2V0QVx1MDBGMW8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgYVx1MDBGMW87XG4gICAgICAgIC8vbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhcIlRyaW1lc3RyYWxcIik7IC8vIEZ1bmNpb25hIGVuIGxhIHZlcnNpXHUwMEYzbiAxLjAgZGUgQXJlYXMgZGUgVmlkYS5cbiAgICAgICAgbGV0IGFcdTAwRjFvcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJBWVwiLG51bGwsdGhpcy5wbHVnaW4pO1xuICAgICAgICBhXHUwMEYxbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKGFcdTAwRjFvcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLGFcdTAwRjFvcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYFNlbGVjY2lvbmEgZWwgYVx1MDBGMW8gcXVlIGRlc2VhcyBwYXJhIGVsICR7bm9tYnJlU2lzdGVtYX06YCk7XG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGFcdTAwRjFvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEuYVx1MDBGMW8gPSBhXHUwMEYxbztcbiAgICAgICAgcmV0dXJuIGFcdTAwRjFvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBbGlhc2VzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfS8ke3RoaXMubm90YS5hXHUwMEYxb31gKSAgIFxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9LyR7dGhpcy5ub3RhLmlkfWApICAgXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb31gXG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99L1BsYW5lYWNpXHUwMEYzbiAke3RoaXMubm90YS5hXHUwMEYxb30ubWRgXG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIFJlcG9zaXRvcmlvTGlicm9zX0ZIIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXBjaW9uID0gYXdhaXQgdGhpcy5wcm9tcHQoYFx1MDBCRlBvcnF1ZSBlc3RcdTAwRTFzIGFncmVnYW5kbyBlc3RlIGxpYnJvPzpgLCBcIlwiLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RXN0YWRvKCl7XG4gICAgICAgIGxldCBlc3RhZG87XG4gICAgICAgICAgICAgICAgZXN0YWRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiXHVEODNEXHVERDM1IC0+IFBhcmEgQXJjaGl2byAtIExlaWRvXCIsIFwiXHVEODNEXHVERkUyIC0+IEVuIExlY3R1cmEgLSBDb21wcmFkb1wiLFwiXHVEODNEXHVERkUxIC0+IFBvciBBZHF1aXJpclwiLCBcIlx1RDgzRFx1REQzNCAtPiBDYW5jZWxhZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBgRW4gcXVlIGVzdGFkbyBlc3RcdTAwRTEgZXN0ZSBsaWJybz9gKTtcbiAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoZXN0YWRvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIExpYnJvIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICAvL3RoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGVzdGFkbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaXR1bG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0dWxvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50aXR1bG87XG4gICAgICAgIHRoaXMubm90YS50aXR1bG8gPSB0aXR1bG87XG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCk6IFByb21pc2U8eyBzaUFzdW50bzogYm9vbGVhbiwgbm9tYnJlOiBzdHJpbmdbXSB9PiB7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLmFjdGl2bztcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKSB7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiIHx8IG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICB9XG5cblxuXG4gICAgXG5cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBCaWJsaW90ZWNhX0ZIIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9CaWJsaW90ZWNhX0ZIJztcblxuZXhwb3J0IGNsYXNzIEJpYmxpb3RlY2FfRkggZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyIGltcGxlbWVudHMgQmlibGlvdGVjYV9GSHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGFyYW1ldHJvc0xpYnJvKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIGxldCBhcmNoaXZvQWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgXG4gICAgICAgIGlmICghYXJjaGl2b0FjdGl2bykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIG9idGVuZXIgZWwgYXJjaGl2byBhY3Rpdm8uXCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBjYW1wb3MgPSBbXCJpZFwiLCBcInRpdHVsb1wiLCBcImF1dG9yXCIsIFwicHVibGlzaGVyXCIsIFwicHVibGljYWRvXCIsIFwicGFnaW5hc1wiLCBcImlzYm4xMFwiLCBcImlzYm4xM1wiXTtcbiAgICAgICAgbGV0IHBhcmFtZXRyb3MgPSB7fTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgY2FtcG8gb2YgY2FtcG9zKSB7XG4gICAgICAgICAgbGV0IHZhbG9yQ2FtcG8gPSBhd2FpdCB0aGlzLmdldEZyb250bWF0dGVyRmllbGQoYXJjaGl2b0FjdGl2by5wYXRoLCBjYW1wbyk7XG4gICAgICAgICAgdGhpcy5ub3RhW2NhbXBvXSA9IHZhbG9yQ2FtcG87XG4gICAgICAgICAgcGFyYW1ldHJvc1tjYW1wb10gPSB2YWxvckNhbXBvO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBwYXJhbWV0cm9zO1xuICAgICAgfVxuICAgIFxuICAgICAgYXN5bmMgZ2V0RnJvbnRtYXR0ZXJGaWVsZChmaWxlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcbiAgICAgICAgICBpZiAodEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodEZpbGUpO1xuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgXG4gICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIgJiYgZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoZmllbGQpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBmcm9udG1hdHRlcltmaWVsZF07XG4gICAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlICE9PSB1bmRlZmluZWQgJiYgZmllbGRWYWx1ZSAhPT0gbnVsbCAmJiBmaWVsZFZhbHVlICE9PSBcIlwiID8gZmllbGRWYWx1ZSA6IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRWwgY2FtcG8gJyR7ZmllbGR9JyBubyBleGlzdGUgZW4gZWwgZnJvbnRtYXR0ZXIuYCk7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRWwgYXJjaGl2byBubyBleGlzdGUgbyBubyBlcyB1biBhcmNoaXZvIGRlIHRleHRvLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbnN1bHRhciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFzeW5jIGdldEZvcm1hdG8oKXtcbiAgICAgICAgbGV0IGNhbXBvO1xuICAgICAgICAgICAgICAgIGNhbXBvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiS2luZGxlXCIsIFwiR29vZ2xlIEJvb2tzXCIsXCJQREZcIiwgXCJGXHUwMEVEc2ljb1wiXSxbXCJLaW5kbGVcIiwgXCJHb29nbGUgQm9va3NcIixcIlBERlwiLCBcIkZcdTAwRURzaWNvXCJdLCBmYWxzZSwgYFx1MDBCRkNvbW8gdGllbmVzIGVzdGUgbGlicm8/YCk7XG4gICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGNhbXBvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIExpYnJvIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICAvL3RoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGNhbXBvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBhZ2luYXMoKXtcbiAgICAgICAgbGV0IGNhbXBvLCBwYWdpbmFzO1xuICAgICAgICAgICAgICAgIGNhbXBvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIixcIk5vXCJdLFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgXHUwMEJGRWwgbGlicm8gdGllbmUgJHt0aGlzLm5vdGEucGFnaW5hc30gcFx1MDBFMWdpbmFzP2ApO1xuICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBMaWJybyBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1lbHNlIGlmIChjYW1wbyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHBhZ2luYXMgPSBhd2FpdCB0aGlzLnByb21wdChgQ3VhbnRhcyBwXHUwMEUxZ2luYXMgdGllbmUgZWwgbGlicm8/YCwgXCJcIiwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMubm90YS5wYWdpbmFzID0gcGFnaW5hcztcbiAgICAgICAgcmV0dXJuIHBhZ2luYXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wYWdpbmFzO1xuICAgICAgICB9XG5cblxuICAgICAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG4gICAgICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICAgICAgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgICAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlci5maWxlID0ge307XG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgIHBhZHJlcy51bnNoaWZ0KG5vbWJyZSk7IC8vIEFcdTAwRjFhZGUgZWwgbm9tYnJlIGFsIGluaWNpbyBkZWwgYXJyZWdsbywgZGVzcGxhemFuZG8gbG9zIGRlbVx1MDBFMXMgZWxlbWVudG9zXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSkgeyAvLyBMYSBub3RhIGFjdGl2cyBlcyB1bmE6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICBcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50by5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIGFycmVnbG8gbmkgc3RyaW5nLCBhcmVhSW50ZXJlcyBlcyBlbCBhcmVhIGludGVyZXMgcXVlIGVzdFx1MDBFMSBlbiB0aXR1bG8uICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIgfHwgbm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICAgICAgfVxuXG5cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJztcblxuZXhwb3J0IGNsYXNzIEFudWFsX0ZIIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGluZm9TdWJzaXN0ZW1hOiBhbnksIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKHRwLCBpbmZvU3Vic2lzdGVtYSwgcGx1Z2luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmEgdW4gVVVJRCBwYXJhIGVsIElEIGRlIGxhIG5vdGFcbiAgICAgKi9cbiAgICBhc3luYyBnZXRJZCgpIHtcbiAgICAgICAgLy8gVXNhciBVVUlEIHBhcmEgbm90YXMgZGUgdGlwbyBKb3VybmFsXG4gICAgICAgIHRoaXMubm90YS5pZCA9IHRoaXMuZ2VuZXJhdGVVVUlEKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2J0aWVuZSBsYSBmZWNoYSBhY3R1YWwgZW4gZm9ybWF0byBJU09cbiAgICAgKi9cbiAgICBhc3luYyBnZXRGZWNoYSgpIHtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gRGF0ZVRpbWUubm93KCkudG9JU09EYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuZmVjaGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGVybWl0ZSBzZWxlY2Npb25hciBlbCBhXHUwMEYxbyBwYXJhIGxhIG5vdGEgYW51YWxcbiAgICAgKiBNdWVzdHJhIGFcdTAwRjFvcyBkaXNwb25pYmxlcyAobm8gb2N1cGFkb3MpIGVuIHVuIHJhbmdvIGRlIC0zIGEgKzMgZGVsIGFcdTAwRjFvIGFjdHVhbFxuICAgICAqL1xuICAgIGFzeW5jIGdldEFcdTAwRjFvKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IERhdGVUaW1lLm5vdygpLnllYXI7XG4gICAgICAgIGNvbnN0IHllYXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNyB9LCAoXywgaSkgPT4gY3VycmVudFllYXIgLSAzICsgaSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nWWVhcnMgPSBhd2FpdCB0aGlzLmdldEV4aXN0aW5nWWVhcnMoKTtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlWWVhcnMgPSB5ZWFycy5maWx0ZXIoeWVhciA9PiAhZXhpc3RpbmdZZWFycy5pbmNsdWRlcyh5ZWFyLnRvU3RyaW5nKCkpKTtcblxuICAgICAgICAvLyBTaSBubyBoYXkgYVx1MDBGMW9zIGRpc3BvbmlibGVzLCBtb3N0cmFyIG1lbnNhamVcbiAgICAgICAgaWYgKGF2YWlsYWJsZVllYXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBhXHUwMEYxb3MgZGlzcG9uaWJsZXMgZW4gZWwgcmFuZ28gc2VsZWNjaW9uYWRvLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGhheSBhXHUwMEYxb3MgZGlzcG9uaWJsZXNcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB5ZWFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICBhdmFpbGFibGVZZWFycy5tYXAoU3RyaW5nKSwgXG4gICAgICAgICAgICBhdmFpbGFibGVZZWFycy5tYXAoU3RyaW5nKSwgXG4gICAgICAgICAgICBmYWxzZSwgXG4gICAgICAgICAgICBcIlNlbGVjY2lvbmEgZWwgYVx1MDBGMW86XCJcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoeWVhciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlNlbGVjY2lcdTAwRjNuIGRlIGFcdTAwRjFvIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZWxlY2NpXHUwMEYzbiBjYW5jZWxhZGFcIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vdGEuYVx1MDBGMW8gPSB5ZWFyO1xuICAgICAgICByZXR1cm4geWVhcjtcbiAgICB9XG4gICAgIFxuICAgIC8qKlxuICAgICAqIEVzdGFibGVjZSBlbCBlc3RhZG8gaW5pY2lhbCBjb21vIGFjdGl2b1xuICAgICAqL1xuICAgIGFzeW5jIGdldEVzdGFkbygpIHtcbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IFwiXHVEODNEXHVERkUyXCI7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuZXN0YWRvO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbm9tYnJhIGVsIGFyY2hpdm8gc2VnXHUwMEZBbiBlbCBhXHUwMEYxbyBzZWxlY2Npb25hZG9cbiAgICAgKi9cbiAgICBhc3luYyBnZXRSZW5hbWUoKSB7XG4gICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxhIGNhcnBldGEgZXhpc3RlXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXJDYXJwZXRhKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKTtcblxuICAgICAgICAvLyBDb25zdHJ1aXIgZWwgbnVldm8gbm9tYnJlIGRlIGFyY2hpdm8gY29uIGVsIGFcdTAwRjFvXG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99Lm1kYDtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG5cbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGFyY2hpdm8geWEgZXhpc3RlXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgIGlmIChleGlzdHMgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcndyaXRlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBFbCBhcmNoaXZvICR7bmV3TmFtZX0geWEgZXhpc3RlLiBcdTAwQkZRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG92ZXJ3cml0ZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RzKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFicmlyIGVsIGFyY2hpdm8gcmVjaVx1MDBFOW4gY3JlYWRvXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKG51ZXZvQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBYnJpciBlbCBhcmNoaXZvIHJlY2lcdTAwRTluIGNyZWFkb1xuICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51ZXZvQXJjaGl2byBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShudWV2b0FyY2hpdm8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldG9ybmEgZWwgb2JqZXRvIG5vdGEgY29tcGxldG9cbiAgICAgKi9cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2VuZXJhIHVuIFVVSUQgXHUwMEZBbmljbyBwYXJhIGxhIG5vdGFcbiAgICAgKi9cbiAgICBnZW5lcmF0ZVVVSUQoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xuICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7XG4gICAgICAgICAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcbiAgICAgICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT2J0aWVuZSBsb3MgYVx1MDBGMW9zIHF1ZSB5YSB0aWVuZW4gbm90YXMgYW51YWxlc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZ2V0RXhpc3RpbmdZZWFycygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgeWVhckZpbGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgY29uc3QgeWVhcnMgPSB5ZWFyRmlsZXMubWFwKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSk7XG4gICAgICAgIHJldHVybiB5ZWFycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhIGxhIGNhcnBldGEgc2kgbm8gZXhpc3RlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBjcmVhckNhcnBldGEoZm9sZGVyUGF0aDogc3RyaW5nKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nRm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0ZvbGRlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke2ZvbGRlclBhdGh9JyB5YSBleGlzdGUuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhciBsYSBjYXJwZXRhXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBjcmVhciBsYSBjYXJwZXRhICcke2ZvbGRlclBhdGh9JzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBUcmltZXN0cmFsRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGluZm9TdWJzaXN0ZW1hOiBhbnksIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKHRwLCBpbmZvU3Vic2lzdGVtYSwgcGx1Z2luKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmEgdW4gVVVJRCBwYXJhIGVsIElEIGRlIGxhIG5vdGFcbiAgICAgKi9cbiAgICBhc3luYyBnZXRJZCgpIHtcbiAgICAgICAgdGhpcy5ub3RhLmlkID0gdGhpcy5nZW5lcmF0ZVVVSUQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPYnRpZW5lIGxhIGZlY2hhIGFjdHVhbCBlbiBmb3JtYXRvIElTT1xuICAgICAqL1xuICAgIGFzeW5jIGdldEZlY2hhKCkge1xuICAgICAgICB0aGlzLm5vdGEuZmVjaGEgPSBEYXRlVGltZS5ub3coKS50b0lTT0RhdGUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5mZWNoYTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJtaXRlIHNlbGVjY2lvbmFyIGVsIHRyaW1lc3RyZSBwYXJhIGxhIG5vdGFcbiAgICAgKiBNdWVzdHJhIHNvbG8gbG9zIHRyaW1lc3RyZXMgZGlzcG9uaWJsZXMgKG5vIHV0aWxpemFkb3MpXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCkge1xuICAgICAgICAvLyBPcGNpb25lcyBwcmVkZWZpbmlkYXMgcGFyYSB0cmltZXN0cmVzXG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9idGllbmUgbG9zIHRyaW1lc3RyZXMgeWEgZXhpc3RlbnRlcyBlbiBsYSBjYXJwZXRhIGRlZmluaWRhXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuZ2V0RXhpc3RpbmdUcmltZXN0cmVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0cmEgcGFyYSBkZWphciBzb2xvIGxhcyBvcGNpb25lcyBxdWUgbm8gc2UgaGFuIHVzYWRvXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVRyaW1lc3RyZXMgPSB0cmltZXN0cmVzLmZpbHRlcihxID0+ICFleGlzdGluZ1RyaW1lc3RyZXMuaW5jbHVkZXMocSkpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGF2YWlsYWJsZVRyaW1lc3RyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiVG9kb3MgbG9zIHRyaW1lc3RyZXMgeWEgaGFuIHNpZG8gY3JlYWRvcyBlbiBlc3RhIGNhcnBldGEuXCIpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gaGF5IHRyaW1lc3RyZXMgZGlzcG9uaWJsZXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgYXZhaWxhYmxlVHJpbWVzdHJlcyxcbiAgICAgICAgICAgIGF2YWlsYWJsZVRyaW1lc3RyZXMsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFwiU2VsZWNjaW9uYSBlbCB0cmltZXN0cmU6XCJcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0cmltZXN0cmUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTZWxlY2NpXHUwMEYzbiBkZSB0cmltZXN0cmUgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlbGVjY2lcdTAwRjNuIGNhbmNlbGFkYVwiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHRyaW1lc3RyZTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFc3RhYmxlY2UgZWwgZXN0YWRvIGluaWNpYWwgY29tbyBhY3Rpdm9cbiAgICAgKi9cbiAgICBhc3luYyBnZXRFc3RhZG8oKSB7XG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBcIlx1RDgzRFx1REZFMlwiO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmVzdGFkbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW5vbWJyYSBlbCBhcmNoaXZvIHNlZ1x1MDBGQW4gZWwgdHJpbWVzdHJlIHNlbGVjY2lvbmFkb1xuICAgICAqL1xuICAgIGFzeW5jIGdldFJlbmFtZSgpIHtcbiAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgbGEgY2FycGV0YSBleGlzdGVcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29uc3RydXllIGVsIG51ZXZvIG5vbWJyZSB1c2FuZG8gZWwgZm9sZGVyIHkgZWwgdHJpbWVzdHJlIHNlbGVjY2lvbmFkb1xuICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0ubWRgO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhIHNpIGVsIGFyY2hpdm8geWEgZXhpc3RlXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpc3RzIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJ3cml0ZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgRWwgYXJjaGl2byAke25ld05hbWV9IHlhIGV4aXN0ZS4gXHUwMEJGUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0cyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBYnJpciBlbCBhcmNoaXZvIHJlY2lcdTAwRTluIGNyZWFkb1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVldm9BcmNoaXZvIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShudWV2b0FyY2hpdm8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQWJyaXIgZWwgYXJjaGl2byByZWNpXHUwMEU5biBjcmVhZG9cbiAgICAgICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUobnVldm9BcmNoaXZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbXBsZXRvXG4gICAgICovXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYSB1biBVVUlEIFx1MDBGQW5pY28gcGFyYSBsYSBub3RhXG4gICAgICovXG4gICAgZ2VuZXJhdGVVVUlEKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwO1xuICAgICAgICAgICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCk7XG4gICAgICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9idGllbmUgbG9zIHRyaW1lc3RyZXMgcXVlIHlhIHRpZW5lbiBub3RhcyB0cmltZXN0cmFsZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGdldEV4aXN0aW5nVHJpbWVzdHJlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgLy8gU2UgZmlsdHJhbiBsb3MgYXJjaGl2b3MgcXVlIHNlIGVuY3VlbnRyYW4gZW4gbGEgY2FycGV0YSBkZWZpbmlkYSBwYXJhIG5vdGFzIHRyaW1lc3RyYWxlc1xuICAgICAgICBjb25zdCB0cmltZXN0cmVGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKSk7XG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSB0cmltZXN0cmVGaWxlcy5tYXAoZmlsZSA9PiBmaWxlLmJhc2VuYW1lKTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZXM7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgY2FycGV0YSBzaSBubyBleGlzdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGNyZWFyQ2FycGV0YShmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdGb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGxhIGNhcnBldGFcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ2FycGV0YSAnJHtmb2xkZXJQYXRofScgY3JlYWRhIGV4aXRvc2FtZW50ZS5gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DYW1wYVx1MDBGMWFzRmllbGRIYW5kbGVyLnRzXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgQ2FtcGFcdTAwRjFhc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIE9idGllbmUgZWwgdHJpbWVzdHJlIGRlIGxhIGNhbXBhXHUwMEYxYSBkZXNkZSBsYXMgbm90YXMgZGUgdHJpbWVzdHJlcyBleGlzdGVudGVzXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCkge1xuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJUUVwiLCBudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJUcmltZXN0cmUgYWwgcXVlIHBlcnRlbmVjZSBlc3RhIGNhbXBhXHUwMEYxYTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlNlbGVjY2lcdTAwRjNuIGRlIHRyaW1lc3RyZSBjYW5jZWxhZGEuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICAvLyBPYnRpZW5lIGVsIGVzdGFkbyBkZSBsYSBjYW1wYVx1MDBGMWEgKHN0YXR1cylcbiAgICBhc3luYyBnZXRTdGF0dXMoKSB7XG4gICAgICAgIGNvbnN0IGVzdGFkb3MgPSBbXG4gICAgICAgICAgICBcIlBlbmRpZW50ZVwiLFxuICAgICAgICAgICAgXCJQbGFuaWZpY2FuZG9cIixcbiAgICAgICAgICAgIFwiRGlzZVx1MDBGMW9cIixcbiAgICAgICAgICAgIFwiUmV2aXNpXHUwMEYzbiBJbnRlcm5hXCIsXG4gICAgICAgICAgICBcIlJldmlzaVx1MDBGM24gQ2xpZW50ZVwiLFxuICAgICAgICAgICAgXCJQdWJsaWNhbmRvXCIsXG4gICAgICAgICAgICBcIlJlY29nZXIgSW5kaWNhZG9yZXNcIixcbiAgICAgICAgICAgIFwiRW4gcGF1c2FcIixcbiAgICAgICAgICAgIFwiVGVybWluYWRvXCIsXG4gICAgICAgICAgICBcIkNhbmNlbGFkb1wiXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIGVzdGFkb3MsXG4gICAgICAgICAgICBlc3RhZG9zLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIkVzdGFkbyBhY3R1YWwgZGUgbGEgY2FtcGFcdTAwRjFhOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RhdHVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgZXN0YWRvIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBmZWNoYSBkZSBpbmljaW8gZGUgbGEgY2FtcGFcdTAwRjFhXG4gICAgYXN5bmMgZ2V0RmVjaGFJbmljaW8oKSB7XG4gICAgICAgIC8vIFVzYW1vcyBlbCBwcm9tcHQgZXN0XHUwMEUxdGljb1xuICAgICAgICBjb25zdCBmZWNoYUFjdHVhbCA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5LU1NLWRkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ftb3MgbGEgZnVuY2lcdTAwRjNuIHByb21wdCBjb3JyZWN0YW1lbnRlIGRlc2RlIHN0YXRpY19mdW5jdGlvbnNcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGNvbnN0IGZlY2hhSW5pY2lvID0gYXdhaXQgcHJvbXB0KFxuICAgICAgICAgICAgXCJGZWNoYSBkZSBpbmljaW8gZGUgbGEgY2FtcGFcdTAwRjFhIChZWVlZLU1NLUREKTpcIixcbiAgICAgICAgICAgIGZlY2hhQWN0dWFsLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZlY2hhSW5pY2lvID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgZmVjaGEgZGUgaW5pY2lvIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5mZWNoYUluaWNpbyA9IGZlY2hhSW5pY2lvO1xuICAgICAgICByZXR1cm4gZmVjaGFJbmljaW87XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBmZWNoYSBkZSBmaW4gZGUgbGEgY2FtcGFcdTAwRjFhXG4gICAgYXN5bmMgZ2V0RmVjaGFGaW4oKSB7XG4gICAgICAgIC8vIEZlY2hhIHN1Z2VyaWRhOiAzMCBkXHUwMEVEYXMgZGVzcHVcdTAwRTlzIGRlIGxhIGZlY2hhIGRlIGluaWNpbywgbyBsYSBmZWNoYSBhY3R1YWwgc2kgbm8gaGF5IGZlY2hhIGRlIGluaWNpb1xuICAgICAgICBjb25zdCBmZWNoYUluaWNpb09iaiA9IHRoaXMubm90YS5mZWNoYUluaWNpbyBcbiAgICAgICAgICAgID8gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0aGlzLm5vdGEuZmVjaGFJbmljaW8sICd5eXl5LU1NLWRkJylcbiAgICAgICAgICAgIDogRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWNoYVN1Z2VyaWRhID0gZmVjaGFJbmljaW9PYmoucGx1cyh7IGRheXM6IDMwIH0pLnRvRm9ybWF0KCd5eXl5LU1NLWRkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ftb3MgbGEgZnVuY2lcdTAwRjNuIHByb21wdCBjb3JyZWN0YW1lbnRlIGRlc2RlIHN0YXRpY19mdW5jdGlvbnNcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGNvbnN0IGZlY2hhRmluID0gYXdhaXQgcHJvbXB0KFxuICAgICAgICAgICAgXCJGZWNoYSBkZSBmaW4gZGUgbGEgY2FtcGFcdTAwRjFhIChZWVlZLU1NLUREKTpcIixcbiAgICAgICAgICAgIGZlY2hhU3VnZXJpZGEsXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZmVjaGFGaW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTZWxlY2NpXHUwMEYzbiBkZSBmZWNoYSBkZSBmaW4gY2FuY2VsYWRhLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhRmluID0gZmVjaGFGaW47XG4gICAgICAgIHJldHVybiBmZWNoYUZpbjtcbiAgICB9XG5cbiAgICAvLyBPYnRpZW5lIGxhIHByaW9yaWRhZCBkZSBsYSBjYW1wYVx1MDBGMWFcbiAgICBhc3luYyBnZXRQcmlvcmlkYWQoKSB7XG4gICAgICAgIGNvbnN0IHByaW9yaWRhZGVzID0gW1wiQmFqYVwiLCBcIk1lZGlhXCIsIFwiQWx0YVwiXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgcHJpb3JpZGFkZXMsXG4gICAgICAgICAgICBwcmlvcmlkYWRlcyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJQcmlvcmlkYWQgZGUgbGEgY2FtcGFcdTAwRjFhOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAocHJpb3JpZGFkID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgcHJpb3JpZGFkIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5wcmlvcmlkYWQgPSBwcmlvcmlkYWQ7XG4gICAgICAgIHJldHVybiBwcmlvcmlkYWQ7XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBVUkwgZGUgbG9zIGluZGljYWRvcmVzXG4gICAgYXN5bmMgZ2V0SW5kaWNhZG9yZXMoKSB7XG4gICAgICAgIC8vIFVzYW1vcyBsYSBmdW5jaVx1MDBGM24gcHJvbXB0IGNvcnJlY3RhbWVudGUgZGVzZGUgc3RhdGljX2Z1bmN0aW9uc1xuICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgY29uc3QgaW5kaWNhZG9yZXMgPSBhd2FpdCBwcm9tcHQoXG4gICAgICAgICAgICBcIlVSTCBkZSBsb3MgaW5kaWNhZG9yZXMgZGUgbGEgY2FtcGFcdTAwRjFhOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL1wiLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluZGljYWRvcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSW5ncmVzbyBkZSBVUkwgZGUgaW5kaWNhZG9yZXMgY2FuY2VsYWRvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmluZGljYWRvcmVzID0gaW5kaWNhZG9yZXM7XG4gICAgICAgIHJldHVybiBpbmRpY2Fkb3JlcztcbiAgICB9XG5cbiAgICAvLyBTb2JyZXNjcmliZSBsYSBmdW5jaVx1MDBGM24gZ2V0QWxpYXNlcyBwYXJhIGFqdXN0YXJsYSBhIGxvcyByZXF1ZXJpbWllbnRvcyBlc3BlY1x1MDBFRGZpY29zXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpIHtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaCh0aGlzLm5vdGEudGl0dWxvKTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgQ1AtJHt0aGlzLm5vdGEudGl0dWxvfWApO1xuICAgICAgICAvLyBGb3JtYXRvOiBDUC1pZFxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGBDUC0ke3RoaXMubm90YS5pZH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgIH1cblxuICAgIC8vIEltcGxlbWVudGFjaVx1MDBGM24gZGUgZ2V0UmVuYW1lIHBhcmEgbGEgZXN0cnVjdHVyYSBkZSBjYXJwZXRhcyBiYXNhZGEgZW4gdHJpbWVzdHJlc1xuLy8gSW1wbGVtZW50YWNpXHUwMEYzbiBkZSBnZXRSZW5hbWUgcGFyYSBsYSBlc3RydWN0dXJhIGRlIGNhcnBldGFzIGJhc2FkYSBlbiB0cmltZXN0cmVzXG5hc3luYyBnZXRSZW5hbWUoKSB7XG4gICAgLy8gRWwgdHJpbWVzdHJlIHZpZW5lIGNvbiBmb3JtYXRvIFtbdHJpbWVzdHJlXV0sIGFzXHUwMEVEIHF1ZSBleHRyYWVtb3MgZWwgdmFsb3JcbiAgICBjb25zdCB0cmltZXN0cmVNYXRjaCA9IHRoaXMubm90YS50cmltZXN0cmUubWF0Y2goL1xcW1xcWyguKj8pXFxdXFxdLyk7XG4gICAgY29uc3QgdHJpbWVzdHJlID0gdHJpbWVzdHJlTWF0Y2ggPyB0cmltZXN0cmVNYXRjaFsxXSA6IFwiU2luLVRyaW1lc3RyZVwiO1xuICAgIFxuICAgIC8vIENvbnN0cnVpbW9zIGxhIHJ1dGEgY29uIGxhIGVzdHJ1Y3R1cmEgc29saWNpdGFkYVxuICAgIGNvbnN0IGJhc2VQYXRoID0gXCJTdWJzaXN0ZW1hcy9NYXJrZXRpbmcvUHJveWVjdG9zXCI7XG4gICAgY29uc3QgZm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke3RyaW1lc3RyZX1gO1xuICAgIFxuICAgIC8vIENyZWFtb3MgbGEgY2FycGV0YSBkZWwgdHJpbWVzdHJlIHNpIG5vIGV4aXN0ZVxuICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXJQYXRoKTtcbiAgICBcbiAgICAvLyBDb25zdHJ1aW1vcyBlbCBub21icmUgY29tcGxldG8gZGVsIGFyY2hpdm9cbiAgICBjb25zdCBuZXdOYW1lID0gYCR7Zm9sZGVyUGF0aH0vJHt0aGlzLm5vdGEudGl0dWxvfS5tZGA7XG4gICAgXG4gICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWJyaXIgbGEgbm90YSBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKG51ZXZvQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBYnJpciBsYSBub3RhIGVuIHVuYSBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUobnVldm9BcmNoaXZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG59IiwgIi8vIHNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlci50c1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBFbnRyZWdhYmxlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9FbnRyZWdhYmxlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFNlbGVjY2lvbk1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbCc7XG5pbXBvcnQgeyBTZWxlY2Npb25Nb2RhbFRhcmVhcyB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxUYXJlYXMnO1xuaW1wb3J0IHsgZnV6enlTZWxlY3RPckNyZWF0ZSB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZSc7XG5pbXBvcnQgeyBTZWxlY2Npb25NdWx0aXBsZU1vZGFsfSBmcm9tICcuLi8uLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWwnO1xuaW1wb3J0IHsgU3Bpbm5lck1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9zcGlubmVyTW9kYWwnO1xuaW1wb3J0IHsgRGF0ZVBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9kYXRlUGlja2VyTW9kYWwnO1xuaW1wb3J0IHsgUGVkaWRvc0NsaWVudGVNb2RhbCB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvcGVkaWRvc0NsaWVudGVNb2RhbCc7XG5cbmV4cG9ydCBjbGFzcyBFbnRyZWdhYmxlRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIEVudHJlZ2FibGVGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGluZm9TdWJzaXN0ZW1hOiBhbnksIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKHRwLCBpbmZvU3Vic2lzdGVtYSwgcGx1Z2luKTtcbiAgICB9XG4gICAgXG4gICAgICAvLyBTb2JyZXNjcmliaW1vcyBlbCBtXHUwMEU5dG9kbyBnZXRBc3VudG8gcGFyYSBtYW5lamFyIE5vdGlvbklEXG4gICAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgXG4gICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBleGlzdGUgdW4gY2FtcG8gcXVlIGNvbWllbmNlIGNvbiBcIk5vdGlvbklELVwiIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGlvbklEID0gbnVsbDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3RhLmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIk5vdGlvbklELVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aW9uSUQgPSBub3RhLmZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRW5jb250cmFkbyBOb3Rpb25JRDogJHtub3Rpb25JRH0gY29uIGNsYXZlOiAke2tleX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpIGVuY29udHJhbW9zIHVuIE5vdGlvbklELCBsbyBndWFyZGFtb3MgZW4gZWwgY2FtcG8gcHJveWVjdG9cbiAgICAgICAgICAgICAgICBpZiAobm90aW9uSUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvID0gW25vdGlvbklEXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFzaWduYWRvIE5vdGlvbklEIGFsIHByb3llY3RvOiAke25vdGlvbklEfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSkgeyAvLyBMYSBub3RhIGFjdGl2YSBlcyB1bmE6XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIiB8fCBub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNpQXN1bnRvLCBub21icmU6IHBhZHJlcyB9XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZXMgdW5hIGNvbnRpbnVhY2lcdTAwRjNuIGRlc2RlIHVuYSBDYW1wYVx1MDBGMWFcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAoYWN0aXZvKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLnR5cGUgPT09ICdDcCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlc0NvbnRpbnVhY2lvbiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTXHUwMEVEXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGRXN0ZSBlbnRyZWdhYmxlIGVzIHBhcnRlIGRlIGxhIGNhbXBhXHUwMEYxYSAke2FjdGl2by5iYXNlbmFtZX0/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgaWYgKGVzQ29udGludWFjaW9uICYmIG1ldGFkYXRhLnRyaW1lc3RyZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gbWV0YWRhdGEudHJpbWVzdHJlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGEudHJpbWVzdHJlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gZXMgY29udGludWFjaVx1MDBGM24sIGJ1c2NhciB0cmltZXN0cmVzIGRpc3BvbmlibGVzXG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiVFFcIiwgbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICBjb25zdCB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKHQgPT4gdC5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKHQgPT4gdC5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJTZWxlY2Npb25hIGVsIHRyaW1lc3RyZSBwYXJhIGVzdGUgZW50cmVnYWJsZTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0cmltZXN0cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlYmUgc2VsZWNjaW9uYXIgdW4gdHJpbWVzdHJlIHBhcmEgY29udGludWFyXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgICAgICByZXR1cm4gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXBvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHRpcG9zRW50cmVnYWJsZSA9IFtcbiAgICAgICAgICAgIFwiQmxvZ1wiLCBcbiAgICAgICAgICAgIFwiQ29ycmVvIEVsZWN0clx1MDBGM25pY29cIiwgXG4gICAgICAgICAgICBcIkRpc2VcdTAwRjFvIFBlcnNvbmFsaXphZG9cIixcbiAgICAgICAgICAgIFwiRW50cmVuYW1pZW50b1wiLFxuICAgICAgICAgICAgXCJFc3R1ZGlvIGRlIGNhc29cIixcbiAgICAgICAgICAgIFwiSGlzdG9yaWFcIixcbiAgICAgICAgICAgIFwiSW5mb2dyYWZcdTAwRURhXCIsXG4gICAgICAgICAgICBcIlBhdXRhXCIsXG4gICAgICAgICAgICBcIlBvZGNhc3RcIixcbiAgICAgICAgICAgIFwiUG9zdFwiLFxuICAgICAgICAgICAgXCJSZWVsXCIsXG4gICAgICAgICAgICBcIlRhcmVhIEF2YW56YWRhXCIsXG4gICAgICAgICAgICBcIlZpZGVvXCIsXG4gICAgICAgICAgICBcIldlYmluYXJcIlxuICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGlwbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgdGlwb3NFbnRyZWdhYmxlLFxuICAgICAgICAgICAgdGlwb3NFbnRyZWdhYmxlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIlNlbGVjY2lvbmEgZWwgdGlwbyBkZSBlbnRyZWdhYmxlOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRpcG8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlYmUgc2VsZWNjaW9uYXIgdW4gdGlwbyBkZSBlbnRyZWdhYmxlIHBhcmEgY29udGludWFyXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudGlwbyA9IHRpcG87XG4gICAgICAgIHJldHVybiB0aXBvO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRDYW5hbGVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgdG9kb3NMb3NDYW5hbGVzID0gW1xuICAgICAgICAgICAgXCJXaGF0c2FwcFwiLFxuICAgICAgICAgICAgXCJJbnN0YWdyYW1cIixcbiAgICAgICAgICAgIFwiRmFjZWJvb2tcIixcbiAgICAgICAgICAgIFwiVGlrIFRva1wiLFxuICAgICAgICAgICAgXCJTaXRpbyBXZWJcIixcbiAgICAgICAgICAgIFwiRW1haWwgbWFya2V0aW5nXCIsXG4gICAgICAgICAgICBcIllvdXR1YmVcIixcbiAgICAgICAgICAgIFwiVHdpdHRlclwiLFxuICAgICAgICAgICAgXCJMaW5rZWRJblwiLFxuICAgICAgICAgICAgXCJPdHJvXCJcbiAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByZXNlbGVjY2lvbmFyIGNhbmFsZXMgc2VnXHUwMEZBbiBlbCB0aXBvXG4gICAgICAgIGxldCBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAodGhpcy5ub3RhLnRpcG8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJIaXN0b3JpYVwiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiV2hhdHNhcHBcIiwgXCJJbnN0YWdyYW1cIiwgXCJGYWNlYm9va1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQb3N0XCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJJbnN0YWdyYW1cIiwgXCJGYWNlYm9va1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSZWVsXCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJJbnN0YWdyYW1cIiwgXCJUaWsgVG9rXCIsIFwiWW91dHViZVwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJWaWRlb1wiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiWW91dHViZVwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJCbG9nXCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJTaXRpbyBXZWJcIiwgXCJMaW5rZWRJblwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQYXV0YVwiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiSW5zdGFncmFtXCIsIFwiRmFjZWJvb2tcIl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ29ycmVvIEVsZWN0clx1MDBGM25pY29cIjpcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtcIkVtYWlsIG1hcmtldGluZ1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJJbmZvZ3JhZlx1MDBFRGFcIjpcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtcIkluc3RhZ3JhbVwiLCBcIkZhY2Vib29rXCJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkVzdHVkaW8gZGUgY2Fzb1wiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiTGlua2VkSW5cIl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFBhcmEgbG9zIG90cm9zIHRpcG9zIG5vIGhheSBwcmVzZWxlY2Npb25hZG9zIGVzcGVjXHUwMEVEZmljb3NcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBvcGNpb25lcyBwYXJhIGVsIHNlbGVjdG9yIG1cdTAwRkFsdGlwbGVcbiAgICAgICAgY29uc3Qgb3BjaW9uZXMgPSB0b2Rvc0xvc0NhbmFsZXMubWFwKGNhbmFsID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9tYnJlOiBjYW5hbCxcbiAgICAgICAgICAgICAgICBzZWxlY2Npb25hZG86IGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zLmluY2x1ZGVzKGNhbmFsKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3N0cmFyIHNlbGVjY2lcdTAwRjNuIG1cdTAwRkFsdGlwbGUgcGVyc29uYWxpemFkYVxuICAgICAgICBjb25zdCBtdWx0aVNlbGVjdE1vZGFsID0gbmV3IFNlbGVjY2lvbk11bHRpcGxlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBvcGNpb25lcywgXCJTZWxlY2Npb25hIGxvcyBjYW5hbGVzIHBhcmEgZXN0ZSBlbnRyZWdhYmxlXCIpO1xuICAgICAgICBjb25zdCBjYW5hbGVzU2VsZWNjaW9uYWRvcyA9IGF3YWl0IG11bHRpU2VsZWN0TW9kYWwub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNhbmFsZXNTZWxlY2Npb25hZG9zIHx8IGNhbmFsZXNTZWxlY2Npb25hZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gUHJvcG9yY2lvbmEgYWwgbWVub3MgbG9zIGNhbmFsZXMgcHJlc2VsZWNjaW9uYWRvcyBzaSBlbCB1c3VhcmlvIG5vIHNlbGVjY2lvbmEgbmluZ3Vub1xuICAgICAgICAgICAgdGhpcy5ub3RhLmNhbmFsZXMgPSBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcztcbiAgICAgICAgICAgIHJldHVybiBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmNhbmFsZXMgPSBjYW5hbGVzU2VsZWNjaW9uYWRvcztcbiAgICAgICAgcmV0dXJuIGNhbmFsZXNTZWxlY2Npb25hZG9zO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZXN0YWRvcyA9IFtcbiAgICAgICAgICAgIFwiU2luIGVtcGV6YXJcIixcbiAgICAgICAgICAgIFwiRGlzZVx1MDBGMWFuZG8gLSBFbiBEZXNhcnJvbGxvXCIsXG4gICAgICAgICAgICBcIlJldmlzaVx1MDBGM24gSW50ZXJuYVwiLFxuICAgICAgICAgICAgXCJSZXZpc2lcdTAwRjNuIENsaWVudGVcIixcbiAgICAgICAgICAgIFwiUHJvZ3JhbWFjaVx1MDBGM24gUGFycmlsbGFcIixcbiAgICAgICAgICAgIFwiUHVibGljYWRvXCIsXG4gICAgICAgICAgICBcIkNvbXBsZXRhZG9cIixcbiAgICAgICAgICAgIFwiQXJjaGl2YWRvXCJcbiAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgZXN0YWRvcyxcbiAgICAgICAgICAgIGVzdGFkb3MsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFwiU2VsZWNjaW9uYSBlbCBlc3RhZG8gYWN0dWFsIGRlbCBlbnRyZWdhYmxlOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXN0YXR1cykge1xuICAgICAgICAgICAgLy8gVmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgIHRoaXMubm90YS5zdGF0dXMgPSBcIlNpbiBlbXBlemFyXCI7XG4gICAgICAgICAgICByZXR1cm4gXCJTaW4gZW1wZXphclwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEuc3RhdHVzID0gc3RhdHVzO1xuICAgICAgICByZXR1cm4gc3RhdHVzO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRQcmlvcmlkYWQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgcHJpb3JpZGFkZXMgPSBbXCJCYWphXCIsIFwiTWVkaWFcIiwgXCJBbHRhXCJdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcHJpb3JpZGFkID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICBwcmlvcmlkYWRlcyxcbiAgICAgICAgICAgIHByaW9yaWRhZGVzLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIlNlbGVjY2lvbmEgbGEgcHJpb3JpZGFkIGRlbCBlbnRyZWdhYmxlOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXByaW9yaWRhZCkge1xuICAgICAgICAgICAgLy8gVmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgIHRoaXMubm90YS5wcmlvcmlkYWQgPSBcIk1lZGlhXCI7XG4gICAgICAgICAgICByZXR1cm4gXCJNZWRpYVwiO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEucHJpb3JpZGFkID0gcHJpb3JpZGFkO1xuICAgICAgICByZXR1cm4gcHJpb3JpZGFkO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRQdWJsaWNhY2lvbigpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRGF0ZVBpY2tlck1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IGF3YWl0IG1vZGFsLndhaXRGb3JJbnB1dCgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWREYXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjsgLy8gU2kgc2UgY2FuY2VsYSwgZGV2b2x2ZXIgc3RyaW5nIHZhY1x1MDBFRG9cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnB1YmxpY2FjaW9uID0gc2VsZWN0ZWREYXRlO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWREYXRlO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRQaWV6YU51YmUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgdGhpcy5wcm9tcHQoXG4gICAgICAgICAgICBcIlVSTCBkZSBsYSBwaWV6YSBlbiBsYSBudWJlIChHb29nbGUgRHJpdmUsIERyb3Bib3gsIGV0Yy4pOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL1wiLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnBpZXphTnViZSA9IHVybCB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gdXJsIHx8IFwiXCI7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFVybENhbnZhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMucHJvbXB0KFxuICAgICAgICAgICAgXCJVUkwgZGVsIGRpc2VcdTAwRjFvIGVuIENhbnZhOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL1wiLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnVybENhbnZhID0gdXJsIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiB1cmwgfHwgXCJcIjtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0SGl0cygpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgICAgICAvLyBJbXBsZW1lbnRhbW9zIHVuIHNlbGVjdG9yIG51bVx1MDBFOXJpY28gdGlwbyBzcGlubmVyXG4gICAgICAgIGNvbnN0IHNwaW5uZXJNb2RhbCA9IG5ldyBTcGlubmVyTW9kYWwodGhpcy5wbHVnaW4uYXBwLCAxLCAxLCAxMDAwKTtcbiAgICAgICAgY29uc3QgaGl0cyA9IGF3YWl0IHNwaW5uZXJNb2RhbC5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoaXRzID09PSBudWxsIHx8IGhpdHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gVmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgIHRoaXMubm90YS5oaXRzID0gMTtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEuaGl0cyA9IGhpdHM7XG4gICAgICAgIHJldHVybiBoaXRzO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRQZWRpZG9zQWxDbGllbnRlKCk6IFByb21pc2U8eyBwZWRpZG9zOiBzdHJpbmcsIHBlbmRpZW50ZXM6IGJvb2xlYW4gfT4ge1xuICAgICAgICAvLyBJbXBsZW1lbnRhbW9zIHVuIG1vZGFsIHBlcnNvbmFsaXphZG8gY29uIHRleHRhcmVhIHkgY2hlY2tib3hcbiAgICAgICAgY29uc3QgcGVkaWRvc01vZGFsID0gbmV3IFBlZGlkb3NDbGllbnRlTW9kYWwodGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgY29uc3QgcmVzdWx0YWRvID0gYXdhaXQgcGVkaWRvc01vZGFsLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZXN1bHRhZG8pIHtcbiAgICAgICAgICAgIHRoaXMubm90YS5wZWRpZG9zQWxDbGllbnRlID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMubm90YS5wZW5kaWVudGVzQ2xpZW50ZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHsgcGVkaWRvczogXCJcIiwgcGVuZGllbnRlczogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnBlZGlkb3NBbENsaWVudGUgPSByZXN1bHRhZG8ucGVkaWRvcztcbiAgICAgICAgdGhpcy5ub3RhLnBlbmRpZW50ZXNDbGllbnRlID0gcmVzdWx0YWRvLnBlbmRpZW50ZXM7XG4gICAgICAgIHJldHVybiByZXN1bHRhZG87XG4gICAgfVxuICAgIFxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZGV0ZXJtaW5hciBzaSBlbCBlbnRyZWdhYmxlIGVzIGZhY3R1cmFibGUgYmFzYWRvIGVuIHF1aVx1MDBFOW4gbG8gcmVhbGl6YXJcdTAwRTFcbiAgICBhc3luYyBnZXRGYWN0dXJhYmxlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBPcGNpb25lcyBkaXNwb25pYmxlc1xuICAgICAgICBjb25zdCBvcGNpb25lcyA9IFtcIlVuIHRlcmNlcm9cIiwgXCJBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblwiXTtcbiAgICAgICAgY29uc3QgdmFsb3JlcyA9IFtmYWxzZSwgdHJ1ZV07XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ftb3MgZWwgbVx1MDBFOXRvZG8gc3VnZ2VzdGVyIG5hdGl2bywgcXVlIHlhIG1hbmVqYSBsYSBuYXZlZ2FjaVx1MDBGM24gcG9yIHRlY2xhZG9cbiAgICAgICAgY29uc3QgcmVhbGl6YWRvciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgb3BjaW9uZXMsXG4gICAgICAgICAgICB2YWxvcmVzLFxuICAgICAgICAgICAgZmFsc2UsIC8vIE5vIGVzIG11bHRpc2VsZWNjaVx1MDBGM25cbiAgICAgICAgICAgIFwiXHUwMEJGUXVpXHUwMEU5biByZWFsaXphclx1MDBFMSBlc3RlIGVudHJlZ2FibGU/XCJcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gY2FuY2VsYSwgYXN1bWltb3MgXCJVbiB0ZXJjZXJvXCIgKG5vIGZhY3R1cmFibGUpXG4gICAgICAgIGlmIChyZWFsaXphZG9yID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm5vdGEuZmFjdHVyYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEuZmFjdHVyYWJsZSA9IHJlYWxpemFkb3I7XG4gICAgICAgIHJldHVybiByZWFsaXphZG9yO1xuICAgIH1cbiAgICBhc3luYyBnZXRBbGlhc2VzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgICBcbiAgICAgICAgLy8gRm9ybWF0bzogTm9tYnJlXG4gICAgICAgIGFsaWFzZXMucHVzaChgJHt0aGlzLm5vdGEudGl0dWxvfWApO1xuICAgICAgIFxuICAgICAgICAvLyBGb3JtYXRvOiBFTWt0LU5vbWJyZVxuICAgICAgICBhbGlhc2VzLnB1c2goYEVNa3QtJHt0aGlzLm5vdGEudGl0dWxvfWApO1xuICAgICAgIFxuICAgICAgICAgLy8gRm9ybWF0bzogRU1rdC1pZFxuICAgICAgICAgYWxpYXNlcy5wdXNoKGBFTWt0LSR7dGhpcy5ub3RhLmlkfWApO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBhbGlhc2VzO1xuICAgICAgICByZXR1cm4gYWxpYXNlcztcbiAgICB9XG4gICAgXG4vLyBJbXBsZW1lbnRhY2lcdTAwRjNuIGRlIGdldFJlbmFtZSBwYXJhIGxhIGVzdHJ1Y3R1cmEgZGUgY2FycGV0YXMgYmFzYWRhIGVuIHRyaW1lc3RyZXNcblxuYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgLy8gQ3JlYXIgbGEgZXN0cnVjdHVyYSBkZSBjYXJwZXRhcyBwb3IgdHJpbWVzdHJlXG4gICAgY29uc3QgZm9sZGVyQmFzZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfWA7XG4gICAgLy8gQXBsaWNhciBmaWx0cm8gcGFyYSBlbGltaW5hciBbWyB5IF1dXG4gICAgY29uc3QgdHJpbWVzdHJlTGltcGlvID0gdGhpcy5ub3RhLnRyaW1lc3RyZS5yZXBsYWNlKC9cXFtcXFt8XFxdXFxdL2csICcnKS50cmltKCk7ICAgICAgICAgXG4gICAgY29uc3QgZm9sZGVyVHJpbWVzdHJlID0gYCR7Zm9sZGVyQmFzZX0vJHt0cmltZXN0cmVMaW1waW99YDtcblxuICAgIC8vIEFzZWd1cmFyIHF1ZSBsYXMgY2FycGV0YXMgZXhpc3RhblxuICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXJCYXNlKTtcbiAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyVHJpbWVzdHJlKTtcblxuICAgIC8vIFJ1dGEgY29tcGxldGEgZGVsIGFyY2hpdm9cbiAgICBjb25zdCBuZXdOYW1lID0gYCR7Zm9sZGVyVHJpbWVzdHJlfS8ke3RoaXMubm90YS50aXR1bG99Lm1kYDtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgYXJjaGl2byBhY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gXHUwMEJGUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWJyaXIgZWwgYXJjaGl2byBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShuZXdGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG5cbiAgICAgICAgICAgICAgICAvLyBBYnJpciBlbCBhcmNoaXZvIGVuIHVuYSBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobmV3RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobmV3RmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuXG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZGFsZXMvc2VsZWNjaW9uTXVsdGlwbGVNb2RhbC50c1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgT3BjaW9uQ2FuYWwge1xuICAgIG5vbWJyZTogc3RyaW5nO1xuICAgIHNlbGVjY2lvbmFkbzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFNlbGVjY2lvbk11bHRpcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBvcGNpb25lczogT3BjaW9uQ2FuYWxbXTtcbiAgICBwcml2YXRlIHJlc29sdmVyOiAodmFsdWU6IHN0cmluZ1tdIHwgbnVsbCkgPT4gdm9pZDtcbiAgICBwcml2YXRlIGNoZWNrYm94ZXM6IEhUTUxJbnB1dEVsZW1lbnRbXSA9IFtdO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvcGNpb25lczogT3BjaW9uQ2FuYWxbXSwgdGl0dWxvOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vcGNpb25lcyA9IG9wY2lvbmVzO1xuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCh0aXR1bG8pO1xuICAgIH1cbiAgICBcbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGNvbnRlbmVkb3IgcGFyYSBsb3MgY2hlY2tib3hlc1xuICAgICAgICBjb25zdCBjb250ZW5lZG9yID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnc2VsZWNjaW9uLW11bHRpcGxlLWNvbnRhaW5lcid9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGNoZWNrYm94IHBhcmEgY2FkYSBvcGNpXHUwMEYzblxuICAgICAgICB0aGlzLm9wY2lvbmVzLmZvckVhY2gob3BjaW9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXIgPSBjb250ZW5lZG9yLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnY2hlY2tib3gtd3JhcHBlcid9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSB3cmFwcGVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgaWQ6IGBvcGNpb24tJHtvcGNpb24ubm9tYnJlfWAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gb3BjaW9uLnNlbGVjY2lvbmFkbztcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3hlcy5wdXNoKGNoZWNrYm94KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd3JhcHBlci5jcmVhdGVFbCgnbGFiZWwnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogb3BjaW9uLm5vbWJyZSxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IGZvcjogYG9wY2lvbi0ke29wY2lvbi5ub21icmV9YCB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RvbmVzIGRlIGFjY2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IGJvdG9uZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJ30pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VsZWNjaW9uYXJUb2Rvc0J0biA9IGJvdG9uZXNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHt0ZXh0OiAnU2VsZWNjaW9uYXIgdG9kb3MnfSk7XG4gICAgICAgIHNlbGVjY2lvbmFyVG9kb3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94ZXMuZm9yRWFjaChjYiA9PiBjYi5jaGVja2VkID0gdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZGVzZWxlY2Npb25hclRvZG9zQnRuID0gYm90b25lc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge3RleHQ6ICdEZXNlbGVjY2lvbmFyIHRvZG9zJ30pO1xuICAgICAgICBkZXNlbGVjY2lvbmFyVG9kb3NCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94ZXMuZm9yRWFjaChjYiA9PiBjYi5jaGVja2VkID0gZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hckJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ0NvbmZpcm1hcicsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jb25maXJtYXJTZWxlY2Npb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnNlbGVjY2lvbi1tdWx0aXBsZS1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLmNoZWNrYm94LXdyYXBwZXIge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5jaGVja2JveC13cmFwcGVyIGxhYmVsIHtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDhweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1dHRvbi5tb2QtY3RhIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxcmVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbmZpcm1hclNlbGVjY2lvbigpIHtcbiAgICAgICAgY29uc3Qgc2VsZWNjaW9uYWRvczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgc2VsZWNjaW9uYWRvcy5wdXNoKHRoaXMub3BjaW9uZXNbaW5kZXhdLm5vbWJyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHNlbGVjY2lvbmFkb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRGViZXMgc2VsZWNjaW9uYXIgYWwgbWVub3MgdW4gY2FuYWxcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5yZXNvbHZlcihzZWxlY2Npb25hZG9zKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG4gICAgXG4gICAgb3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk6IFByb21pc2U8c3RyaW5nW10gfCBudWxsPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFNwaW5uZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGluaXRpYWxWYWx1ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByZXNvbHZlcjogKCh2YWx1ZTogbnVtYmVyIHwgbnVsbCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIG51bWJlckRpc3BsYXk6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5pdGlhbFZhbHVlOiBudW1iZXIgPSAxLCBtYXg6IG51bWJlciA9IDEwMCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICBjb25zdCBtaW4gPSAxO1xuICAgICAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCBpbml0aWFsVmFsdWUpKTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWUgPSB0aGlzLmluaXRpYWxWYWx1ZTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ251bWJlci1zZWxlY3Rvci1tb2RhbCcpO1xuXG4gICAgICAgIC8vIENvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdudW1iZXItc2VsZWN0b3ItY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyBUXHUwMEVEdHVsb1xuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHUwMEJGQ3VcdTAwRTFudG9zIEhpdHMgcmVwcmVzZW50YSBlc3RlIGVudHJlZ2FibGU/JyB9KTtcblxuICAgICAgICAvLyBDb250ZW5lZG9yIGRlIGNvbnRyb2xlc1xuICAgICAgICBjb25zdCBjb250cm9sc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb250cm9scy1jb250YWluZXInIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgZGVjcmVtZW50b1xuICAgICAgICBjb25zdCBkZWNyZW1lbnRCdG4gPSBjb250cm9sc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTI1QjInLCBcbiAgICAgICAgICAgIGNsczogJ2luY3JlbWVudC1idG4nIFxuICAgICAgICB9KTtcbiAgICAgICAgZGVjcmVtZW50QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jaGFuZ2VWYWx1ZSgxKSk7XG5cbiAgICAgICAgLy8gRGlzcGxheSBkZSBuXHUwMEZBbWVyb1xuICAgICAgICB0aGlzLm51bWJlckRpc3BsYXkgPSBjb250cm9sc0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgICAgICAgIHRleHQ6IHRoaXMuY3VycmVudFZhbHVlLnRvU3RyaW5nKCksIFxuICAgICAgICAgICAgY2xzOiAnbnVtYmVyLWRpc3BsYXknIFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGluY3JlbWVudG9cbiAgICAgICAgY29uc3QgaW5jcmVtZW50QnRuID0gY29udHJvbHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHUyNUJDJywgXG4gICAgICAgICAgICBjbHM6ICdkZWNyZW1lbnQtYnRuJyBcbiAgICAgICAgfSk7XG4gICAgICAgIGluY3JlbWVudEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2hhbmdlVmFsdWUoLTEpKTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGNvbmZpcm1hY2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdG4gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnQ29uZmlybWFyJywgXG4gICAgICAgICAgICBjbHM6ICdjb25maXJtLWJ0bicgXG4gICAgICAgIH0pO1xuICAgICAgICBjb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jb25maXJtKCkpO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgY2FuY2VsYXJcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ0NhbmNlbGFyJywgXG4gICAgICAgICAgICBjbHM6ICdjYW5jZWwtYnRuJyBcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2FuY2VsKCkpO1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVzdGlsb3MgQ1NTXG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIC5udW1iZXItc2VsZWN0b3ItbW9kYWwge1xuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm51bWJlci1zZWxlY3Rvci1jb250YWluZXIge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogMTVweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5jb250cm9scy1jb250YWluZXIge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubnVtYmVyLWRpc3BsYXkge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgICAgICB3aWR0aDogNTBweDtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuaW5jcmVtZW50LWJ0biwgLmRlY3JlbWVudC1idG4ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcbiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuY29uZmlybS1idG4sIC5jYW5jZWwtYnRuIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAgMTBweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDE1cHg7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXIgJiYgdGhpcy5jdXJyZW50VmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGNoYW5nZVZhbHVlKGRpcmVjdGlvbjogbnVtYmVyKSB7XG4gICAgICAgIGlmICghdGhpcy5udW1iZXJEaXNwbGF5KSByZXR1cm47XG4gICAgXG4gICAgICAgIGxldCBuZXdWYWx1ZSA9IHRoaXMuY3VycmVudFZhbHVlO1xuICAgIFxuICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCkgeyAvLyBJbmNyZW1lbnRhclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlIDwgMSkge1xuICAgICAgICAgICAgICAgIC8vIERlIDAuMzMgYSAwLjUgeSBkZSAwLjUgYSAxXG4gICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSAwLjMzKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gMC41O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPT09IDAuNSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTaSB5YSBlcyAxIG8gbWF5b3IsIGluY3JlbWVudGEgZGUgMSBlbiAxXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkgeyAvLyBEZWNyZW1lbnRhclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID4gMSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGVzIG1heW9yIGEgMSwgZGVjcmVtZW50YSBkZSAxIGVuIDFcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlIC0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBEZSAxIHBhc2EgYSAwLjVcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IDAuNTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3VmFsdWUgPT09IDAuNSkge1xuICAgICAgICAgICAgICAgIC8vIERlIDAuNSBwYXNhIGEgMC4zM1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gMC4zMztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTm8gc2UgcGVybWl0ZSBiYWphciBkZSAwLjMzXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSAwLjMzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgIHRoaXMubnVtYmVyRGlzcGxheS50ZXh0Q29udGVudCA9IG5ld1ZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb25maXJtKCkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcih0aGlzLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcihudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgb3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk6IFByb21pc2U8bnVtYmVyIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kYWxlcy9kYXRlUGlja2VyTW9kYWwudHNcbmltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIERhdGVQaWNrZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHJlc29sdmVyOiAodmFsdWU6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBkYXRlSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBmb3JtYXQ6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpbml0aWFsRGF0ZT86IHN0cmluZywgZm9ybWF0OiBzdHJpbmcgPSAneXl5eS1NTS1kZCcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5mb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdRdWUgZFx1MDBFRGEgc2UgdmEgYSBwdWJsaWNhciBsYSBwaWV6YT8nIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5kYXRlSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnZGF0ZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBoYXkgdW5hIGZlY2hhIGluaWNpYWwsIGVzdGFibGVjZXJsYVxuICAgICAgICBpZiAodGhpcy5pbml0aWFsRGF0ZSkge1xuICAgICAgICAgICAgLy8gQ29udmVydGlyIGRlc2RlIGVsIGZvcm1hdG8gZXNwZWNpZmljYWRvIGEgZm9ybWF0byBJU08gcGFyYSBpbnB1dCBkYXRlXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0aGlzLmluaXRpYWxEYXRlLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICB0aGlzLmRhdGVJbnB1dC52YWx1ZSA9IGRhdGUudG9JU09EYXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBVc2FyIGxhIGZlY2hhIGFjdHVhbFxuICAgICAgICAgICAgdGhpcy5kYXRlSW5wdXQudmFsdWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2J1dHRvbi1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWxhcicgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIobnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ29uZmlybWFyJyB9KTtcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkRGF0ZSA9IHRoaXMuZGF0ZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgLy8gQ29udmVydGlyIGRlIGZvcm1hdG8gSVNPIGEgZm9ybWF0byBwcmVmZXJpZG9cbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBEYXRlVGltZS5mcm9tSVNPKHNlbGVjdGVkRGF0ZSkudG9Gb3JtYXQodGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcihmb3JtYXR0ZWREYXRlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFc3RpbG9zIGJcdTAwRTFzaWNvc1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgd2FpdEZvcklucHV0KCk6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBQZWRpZG9zQ2xpZW50ZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgcmVzb2x2ZXI6ICh2YWx1ZTogeyBwZWRpZG9zOiBzdHJpbmcsIHBlbmRpZW50ZXM6IGJvb2xlYW4gfSB8IG51bGwpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBwcml2YXRlIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgfVxuICAgIFxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3BlZGlkb3MtY2xpZW50ZS1tb2RhbCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gVFx1MDBFRHR1bG9cbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJQZWRpZG9zIGFsIGNsaWVudGVcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250ZW5lZG9yIHByaW5jaXBhbFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAncGVkaWRvcy1jbGllbnRlLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUXHUwMEVEdHVsbyBkZXNjcmlwdGl2b1xuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHUwMEJGSGF5IGFsZ28gcXVlIHNlIGRlYmEgcGVkaXIgYWwgY2xpZW50ZT8nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHUwMEMxcmVhIGRlIHRleHRvIHBhcmEgbG9zIHBlZGlkb3NcbiAgICAgICAgdGhpcy50ZXh0YXJlYSA9IGNvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgcm93czogJzYnLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnRXNjcmliZSBhcXVcdTAwRUQgdHVzIHBlZGlkb3MgYWwgY2xpZW50ZS4uLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250ZW5lZG9yIGRlbCBjaGVja2JveCBwZXJzb25hbGl6YWRvXG4gICAgICAgIGNvbnN0IGNoZWNrYm94Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2N1c3RvbS1jaGVja2JveC1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2tib3ggb2N1bHRvIChwYXJhIGZ1bmNpb25hbGlkYWQpXG4gICAgICAgIHRoaXMuY2hlY2tib3ggPSBjaGVja2JveENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICBpZDogJ3BlbmRpZW50ZXMtY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAnaGlkZGVuLWNoZWNrYm94J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrYm94IHZpc3VhbCBwZXJzb25hbGl6YWRvXG4gICAgICAgIGNvbnN0IGN1c3RvbUNoZWNrYm94ID0gY2hlY2tib3hDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdjdXN0b20tY2hlY2tib3gnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTGFiZWwgcGFyYSBlbCBjaGVja2JveFxuICAgICAgICBjb25zdCBjaGVja2JveExhYmVsID0gY2hlY2tib3hDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICAgICAgdGV4dDogJ01hcmNhciBjb21vIHBlbmRpZW50ZSBkZWwgY2xpZW50ZScsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgZm9yOiAncGVuZGllbnRlcy1jaGVja2JveCcsXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdjaGVja2JveC1sYWJlbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBdXRvLWFjdGl2YXIgZWwgY2hlY2tib3ggY3VhbmRvIHNlIGVzY3JpYmUgZW4gZWwgdGV4dGFyZWFcbiAgICAgICAgdGhpcy50ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRleHRhcmVhLnZhbHVlLnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrYm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGN1c3RvbUNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2JveC5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY3VzdG9tQ2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhY2VyIHF1ZSBlbCBjaGVja2JveCBwZXJzb25hbGl6YWRvIHJlc3BvbmRhIGEgbG9zIGNsaWNzXG4gICAgICAgIGN1c3RvbUNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveC5jaGVja2VkID0gIXRoaXMuY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgICAgIGlmICh0aGlzLmNoZWNrYm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjdXN0b21DaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1c3RvbUNoZWNrYm94LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUYW1iaVx1MDBFOW4gaGFjZXIgcXVlIGVsIGxhYmVsIGFjdGl2ZS9kZXNhY3RpdmUgZWwgY2hlY2tib3hcbiAgICAgICAgY2hlY2tib3hMYWJlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3guY2hlY2tlZCA9ICF0aGlzLmNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tQ2hlY2tib3guY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b21DaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBkZSBib3RvbmVzXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgY2FuY2VsYXJcbiAgICAgICAgY29uc3QgY2FuY2VsYXJCdG4gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdDYW5jZWxhcicsXG4gICAgICAgICAgICBjbHM6ICdtb2Qtc2Vjb25kYXJ5J1xuICAgICAgICB9KTtcbiAgICAgICAgY2FuY2VsYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNhbmNlbCgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgY29uZmlybWFjaVx1MDBGM25cbiAgICAgICAgY29uc3QgY29uZmlybWFyQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnQ29uZmlybWFyJyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBjb25maXJtYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNvbmZpcm0oKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBcGxpY2Ftb3MgZXN0aWxvcyBlbiBsXHUwMEVEbmVhIHBhcmEgZ2FyYW50aXphciBxdWUgZnVuY2lvbmVuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAucGVkaWRvcy1jbGllbnRlLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgICAgIGdhcDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMTZweDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgaDMge1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCAwIDhweCAwO1xuICAgICAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIHRleHRhcmVhIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDEyMHB4O1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8qIEVzdGlsbyBwYXJhIGVsIGNvbnRlbmVkb3IgZGVsIGNoZWNrYm94IHBlcnNvbmFsaXphZG8gKi9cbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5jdXN0b20tY2hlY2tib3gtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNHB4IDA7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKiBPY3VsdGFyIGVsIGNoZWNrYm94IHJlYWwgKi9cbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5oaWRkZW4tY2hlY2tib3gge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyogQ3JlYXIgdW4gY2hlY2tib3ggcGVyc29uYWxpemFkbyAqL1xuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmN1c3RvbS1jaGVja2JveCB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE4cHg7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM4ODg7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnksICNmZmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKiBFc3RpbG8gcGFyYSBjdWFuZG8gZXN0XHUwMEUxIG1hcmNhZG8gLSBjcmVhciB1bmEgWCAqL1xuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmN1c3RvbS1jaGVja2JveC5jaGVja2VkOjpiZWZvcmUsXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuY3VzdG9tLWNoZWNrYm94LmNoZWNrZWQ6OmFmdGVyIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDNweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCwgIzMzMyk7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogMnB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5jdXN0b20tY2hlY2tib3guY2hlY2tlZDo6YmVmb3JlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogOXB4O1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmN1c3RvbS1jaGVja2JveC5jaGVja2VkOjphZnRlciB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDlweDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyogRXN0aWxvIHBhcmEgbGEgZXRpcXVldGEgZGVsIGNoZWNrYm94ICovXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuY2hlY2tib3gtbGFiZWwge1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmJ1dHRvbi1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuYnV0dG9uLWNvbnRhaW5lciBidXR0b24ge1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBjb25maXJtKCkge1xuICAgICAgICAvLyBPYnRlbmVtb3MgbG9zIHZhbG9yZXMgYWN0dWFsZXNcbiAgICAgICAgY29uc3QgcGVkaWRvcyA9IHRoaXMudGV4dGFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgICBjb25zdCBwZW5kaWVudGVzID0gdGhpcy5jaGVja2JveC5jaGVja2VkO1xuICAgICAgICBcbiAgICAgICAgLy8gR3VhcmRhbW9zIHkgXCJsaW1waWFtb3NcIiBlbCByZXNvbHZlciBwYXJhIHF1ZSBvbkNsb3NlIG5vIGxvIGludm9xdWVcbiAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLnJlc29sdmVyO1xuICAgICAgICB0aGlzLnJlc29sdmVyID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8vIENlcnJhbW9zIGVsIG1vZGFsIHkgcmVzb2x2ZW1vcyBsYSBwcm9tZXNhIGNvbiBsb3MgZGF0b3NcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICByZXNvbHZlcih7XG4gICAgICAgICAgICBwZWRpZG9zOiBwZWRpZG9zLFxuICAgICAgICAgICAgcGVuZGllbnRlczogcGVuZGllbnRlc1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBjYW5jZWwoKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5yZXNvbHZlcjtcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgcmVzb2x2ZXIobnVsbCk7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGVsIHJlc29sdmVyIHNpZ3VlIGFjdGl2byAocG9yIGVqZW1wbG8sIHNpIHNlIGNpZXJyYSBlbCBtb2RhbCBkZSBmb3JtYSBpbmVzcGVyYWRhKSwgbG8gcmVzb2x2ZW1vcyBjb24gbnVsbFxuICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcihudWxsKTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHsgcGVkaWRvczogc3RyaW5nLCBwZW5kaWVudGVzOiBib29sZWFuIH0gfCBudWxsPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvdXRpbHMvRE9NVXRpbHMudHNcblxuLyoqXG4gKiBVdGlsaWRhZGVzIHBhcmEgY3JlYXIgeSBtYW5pcHVsYXIgZWxlbWVudG9zIERPTSBkZSBtYW5lcmEgcmV1dGlsaXphYmxlXG4gKi9cbmV4cG9ydCBjbGFzcyBET01VdGlscyB7XG4gICAgLyoqXG4gICAgICogQ3JlYSB1biBlbGVtZW50byBjb24gYXRyaWJ1dG9zLCBjbGFzZXMgeSBldmVudG9zIG9wY2lvbmFsZXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPihcbiAgICAgIHRhZzogSyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgICAgICB0ZXh0Q29udGVudD86IHN0cmluZztcbiAgICAgICAgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgICAgIHN0eWxlcz86IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj47XG4gICAgICAgIGNoaWxkcmVuPzogSFRNTEVsZW1lbnRbXTtcbiAgICAgICAgZXZlbnRzPzogUmVjb3JkPHN0cmluZywgRXZlbnRMaXN0ZW5lcj47XG4gICAgICB9ID0ge31cbiAgICApOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnKTtcbiAgICAgIFxuICAgICAgaWYgKG9wdGlvbnMuY2xhc3NOYW1lKSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcHRpb25zLnRleHRDb250ZW50KSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBvcHRpb25zLnRleHRDb250ZW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgIE9iamVjdC5lbnRyaWVzKG9wdGlvbnMuYXR0cmlidXRlcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3B0aW9ucy5zdHlsZXMpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbGVtZW50LnN0eWxlLCBvcHRpb25zLnN0eWxlcyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcHRpb25zLmNoaWxkcmVuKSB7XG4gICAgICAgIG9wdGlvbnMuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcHRpb25zLmV2ZW50cykge1xuICAgICAgICBPYmplY3QuZW50cmllcyhvcHRpb25zLmV2ZW50cykuZm9yRWFjaCgoW2V2ZW50LCBsaXN0ZW5lcl0pID0+IHtcbiAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhIHVuIGJvdFx1MDBGM24gY29uIG9wY2lvbmVzIGNvbXVuZXNcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlQnV0dG9uKFxuICAgICAgdGV4dDogc3RyaW5nLCBcbiAgICAgIG9uQ2xpY2s6IEV2ZW50TGlzdGVuZXIsIFxuICAgICAgb3B0aW9uczoge1xuICAgICAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgICAgIGljb24/OiBzdHJpbmc7XG4gICAgICAgIHN0eWxlcz86IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj47XG4gICAgICB9ID0ge31cbiAgICApOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICBjb25zdCBidXR0b25UZXh0ID0gb3B0aW9ucy5pY29uIFxuICAgICAgICA/IGAke29wdGlvbnMuaWNvbn0gJHt0ZXh0fWBcbiAgICAgICAgOiB0ZXh0O1xuICAgICAgICBcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnZGVmYXVsdC1idXR0b24nLFxuICAgICAgICB0ZXh0Q29udGVudDogYnV0dG9uVGV4dCxcbiAgICAgICAgc3R5bGVzOiBvcHRpb25zLnN0eWxlcyxcbiAgICAgICAgZXZlbnRzOiB7IGNsaWNrOiBvbkNsaWNrIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhIHVuYSBzZWNjaVx1MDBGM24gY29sYXBzYWJsZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVDb2xsYXBzaWJsZVNlY3Rpb24oXG4gICAgICBoZWFkZXJDb250ZW50OiBzdHJpbmcgfCBIVE1MRWxlbWVudCxcbiAgICAgIGJvZHlDb250ZW50OiBIVE1MRWxlbWVudCxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgaXNFeHBhbmRlZD86IGJvb2xlYW47XG4gICAgICAgIGhlYWRlckNsYXNzTmFtZT86IHN0cmluZztcbiAgICAgICAgYm9keUNsYXNzTmFtZT86IHN0cmluZztcbiAgICAgICAgY29udGFpbmVyQ2xhc3NOYW1lPzogc3RyaW5nO1xuICAgICAgICB0b2dnbGVJY29uRXhwYW5kZWQ/OiBzdHJpbmc7XG4gICAgICAgIHRvZ2dsZUljb25Db2xsYXBzZWQ/OiBzdHJpbmc7XG4gICAgICB9ID0ge31cbiAgICApOiBIVE1MRWxlbWVudCB7XG4gICAgICBjb25zdCBpc0V4cGFuZGVkID0gb3B0aW9ucy5pc0V4cGFuZGVkIHx8IGZhbHNlO1xuICAgICAgY29uc3QgdG9nZ2xlSWNvbkV4cGFuZGVkID0gb3B0aW9ucy50b2dnbGVJY29uRXhwYW5kZWQgfHwgXCJcdTI1QkNcIjtcbiAgICAgIGNvbnN0IHRvZ2dsZUljb25Db2xsYXBzZWQgPSBvcHRpb25zLnRvZ2dsZUljb25Db2xsYXBzZWQgfHwgXCJcdTI1QjZcIjtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgZWwgdG9nZ2xlXG4gICAgICBjb25zdCB0b2dnbGVTcGFuID0gdGhpcy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6IGB0b2dnbGUtaWNvbiAke2lzRXhwYW5kZWQgPyAnb3BlbicgOiAnJ31gLFxuICAgICAgICB0ZXh0Q29udGVudDogaXNFeHBhbmRlZCA/IHRvZ2dsZUljb25FeHBhbmRlZCA6IHRvZ2dsZUljb25Db2xsYXBzZWRcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDcmVhciBlbCBoZWFkZXJcbiAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6IG9wdGlvbnMuaGVhZGVyQ2xhc3NOYW1lIHx8ICdjb2xsYXBzaWJsZS1oZWFkZXInXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHR5cGVvZiBoZWFkZXJDb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCBoZWFkZXJUZXh0U3BhbiA9IHRoaXMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICB0ZXh0Q29udGVudDogaGVhZGVyQ29udGVudFxuICAgICAgICB9KTtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKHRvZ2dsZVNwYW4pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyVGV4dFNwYW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKHRvZ2dsZVNwYW4pO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoaGVhZGVyQ29udGVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgZGVsIGJvZHlcbiAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmJvZHlDbGFzc05hbWUgfHwgJ2NvbGxhcHNpYmxlLWJvZHknLFxuICAgICAgICBzdHlsZXM6IHtcbiAgICAgICAgICBkaXNwbGF5OiBpc0V4cGFuZGVkID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgICB9LFxuICAgICAgICBjaGlsZHJlbjogW2JvZHlDb250ZW50XVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNvbnRhaW5lckNsYXNzTmFtZSB8fCAnY29sbGFwc2libGUtY29udGFpbmVyJyxcbiAgICAgICAgY2hpbGRyZW46IFtoZWFkZXIsIGJvZHldXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQVx1MDBGMWFkaXIgZnVuY2lvbmFsaWRhZCBkZSB0b2dnbGVcbiAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAvLyBObyBjb2xhcHNhciBzaSBzZSBoaXpvIGNsaWMgZW4gdW4gZW5sYWNlIHUgb3RybyBlbGVtZW50byBpbnRlcmFjdGl2b1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0IGluc3RhbmNlb2YgSFRNTEFuY2hvckVsZW1lbnQgfHwgXG4gICAgICAgICAgICBldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNDdXJyZW50bHlFeHBhbmRlZCA9IHRvZ2dsZVNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaXNDdXJyZW50bHlFeHBhbmRlZCkge1xuICAgICAgICAgIHRvZ2dsZVNwYW4uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICAgICAgICAgIHRvZ2dsZVNwYW4udGV4dENvbnRlbnQgPSB0b2dnbGVJY29uQ29sbGFwc2VkO1xuICAgICAgICAgIGJvZHkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2dnbGVTcGFuLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICB0b2dnbGVTcGFuLnRleHRDb250ZW50ID0gdG9nZ2xlSWNvbkV4cGFuZGVkO1xuICAgICAgICAgIGJvZHkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhIHVuIGVsZW1lbnRvIGRlIGNhcmdhIChzcGlubmVyKVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVMb2FkaW5nSW5kaWNhdG9yKG1lc3NhZ2U6IHN0cmluZyA9IFwiQ2FyZ2FuZG8uLi5cIik6IEhUTUxFbGVtZW50IHtcbiAgICAgIGNvbnN0IHNwaW5uZXIgPSB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnc3Bpbm5lcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBsb2FkaW5nVGV4dCA9IHRoaXMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICB0ZXh0Q29udGVudDogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbG9hZGluZy1pbmRpY2F0b3InLFxuICAgICAgICBjaGlsZHJlbjogW3NwaW5uZXIsIGxvYWRpbmdUZXh0XVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgdW4gbWVuc2FqZSBkZSBlcnJvclxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVFcnJvck1lc3NhZ2UobWVzc2FnZTogc3RyaW5nLCBkZXRhaWxzPzogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2Vycm9yLW1lc3NhZ2UnLFxuICAgICAgICB0ZXh0Q29udGVudDogbWVzc2FnZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChkZXRhaWxzKSB7XG4gICAgICAgIGNvbnN0IGRldGFpbHNFbGVtZW50ID0gdGhpcy5jcmVhdGVFbGVtZW50KCdzbWFsbCcsIHtcbiAgICAgICAgICB0ZXh0Q29udGVudDogZGV0YWlscyxcbiAgICAgICAgICBzdHlsZXM6IHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgICBtYXJnaW5Ub3A6ICc4cHgnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRldGFpbHNFbGVtZW50KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG4gIH0iLCAiLy8gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3V0aWxzL05hdmlnYXRpb25VdGlscy50c1xuXG4vKipcbiAqIFV0aWxpZGFkZXMgcGFyYSBuYXZlZ2FjaVx1MDBGM24gZW4gT2JzaWRpYW5cbiAqL1xuZXhwb3J0IGNsYXNzIE5hdmlnYXRpb25VdGlscyB7XG4gICAgLyoqXG4gICAgICogTmF2ZWdhIGEgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYSBlbiB1bmEgbm90YSBjb24gcmVzYWx0YWRvIGRlIGxcdTAwRURuZWFcbiAgICAgKi9cbiAgICBzdGF0aWMgbmF2ZWdhckFUYXJlYUNvblJlc2FsdGFkbyhcbiAgICAgIHBhdGg6IHN0cmluZyxcbiAgICAgIGxpbmVOdW1iZXI6IG51bWJlcixcbiAgICAgIHRleHRvVGFyZWE/OiBzdHJpbmcsXG4gICAgICBudWV2YVBlc3RhXHUwMEYxYTogYm9vbGVhbiA9IHRydWVcbiAgICApOiB2b2lkIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBxdWUgbGEgcnV0YSBlcyB2XHUwMEUxbGlkYVxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgbmV3IGFwcC5Ob3RpY2UoYEFyY2hpdm8gbm8gZW5jb250cmFkbzogJHtwYXRofWApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSW50ZW50YXIgYWJyaXIgZWwgYXJjaGl2bywgb3BjaW9uYWxtZW50ZSBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgIGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmdldExlYWYobnVldmFQZXN0YVx1MDBGMWEpO1xuICAgICAgICBsZWFmLm9wZW5GaWxlKGZpbGUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIC8vIEFwbGljYXIgcmVzYWx0YWRvIGRlc3B1XHUwMEU5cyBkZSBxdWUgZWwgYXJjaGl2byBzZSBoYXlhIGFiaWVydG8gY29tcGxldGFtZW50ZVxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gbGVhZi52aWV3LmVkaXRvcjtcbiAgICAgICAgICAgIGlmICghZWRpdG9yKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChsaW5lTnVtYmVyID4gMCkge1xuICAgICAgICAgICAgICAvLyBNb3ZlciBjdXJzb3IgeSBwYW50YWxsYSBhIGxhIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxpbmVOdW1iZXIgLSAxLCBjaDogMCB9KTtcbiAgICAgICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuICAgICAgICAgICAgICAgIHsgZnJvbTogeyBsaW5lOiBsaW5lTnVtYmVyIC0gMSwgY2g6IDAgfSwgdG86IHsgbGluZTogbGluZU51bWJlciAtIDEsIGNoOiAwIH0gfSxcbiAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBcGxpY2FyIHJlc2FsdGFkbyB2aXN1YWwgXG4gICAgICAgICAgICAgIHRoaXMucmVzYWx0YXJMaW5lYVRlbXBvcmFsbWVudGUoZWRpdG9yLCBsaW5lTnVtYmVyIC0gMSk7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgLy8gU2kgbm8gdGVuZW1vcyBuXHUwMEZBbWVybyBkZSBsXHUwMEVEbmVhIHBlcm8gdGVuZW1vcyB0ZXh0bywgYnVzY2Ftb3MgZWwgdGV4dG9cbiAgICAgICAgICAgIGVsc2UgaWYgKHRleHRvVGFyZWEpIHtcbiAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gZWRpdG9yLmdldFZhbHVlKCk7XG4gICAgICAgICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIC8vIEJ1c2NhciB0ZXh0byBsaW1waW8gbyBjb24gbWFyY2Fkb3JlcyBkZSB0YXJlYVxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTGltcGlvID0gdGV4dG9UYXJlYS5yZXBsYWNlKC9eLVxccypcXFtbXlxcXV0rXFxdXFxzKi8sICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZWFMaW1waWEgPSBsaW5lYXNbaV0ucmVwbGFjZSgvXi1cXHMqXFxbW15cXF1dK1xcXVxccyovLCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChsaW5lYXNbaV0uaW5jbHVkZXModGV4dG9UYXJlYSkgfHwgbGluZWFMaW1waWEuaW5jbHVkZXModGV4dG9MaW1waW8pKSB7XG4gICAgICAgICAgICAgICAgICAvLyBNb3ZlciBjdXJzb3IgeSBwYW50YWxsYSBhIGxhIGxcdTAwRURuZWEgZW5jb250cmFkYVxuICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGksIGNoOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuICAgICAgICAgICAgICAgICAgICB7IGZyb206IHsgbGluZTogaSwgY2g6IDAgfSwgdG86IHsgbGluZTogaSwgY2g6IGxpbmVhc1tpXS5sZW5ndGggfSB9LFxuICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBBcGxpY2FyIHJlc2FsdGFkbyB2aXN1YWxcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVzYWx0YXJMaW5lYVRlbXBvcmFsbWVudGUoZWRpdG9yLCBpKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gbmF2ZWdhckFUYXJlYUNvblJlc2FsdGFkbzonLCBlcnJvcik7XG4gICAgICAgIG5ldyBhcHAuTm90aWNlKGBFcnJvciBhbCBuYXZlZ2FyOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJlc2FsdGEgdGVtcG9yYWxtZW50ZSB1bmEgbFx1MDBFRG5lYSBlbiBlbCBlZGl0b3JcbiAgICAgKi9cbiAgICBwcml2YXRlIHN0YXRpYyByZXNhbHRhckxpbmVhVGVtcG9yYWxtZW50ZShlZGl0b3I6IGFueSwgbGluZUluZGV4OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzYXIgQ002IG8gQ001IGRlcGVuZGllbmRvIGRlbCBlZGl0b3JcbiAgICAgICAgaWYgKGVkaXRvci5jbSAmJiBlZGl0b3IuY20uc3RhdGUpIHtcbiAgICAgICAgICAvLyBFZGl0b3IgbW9kZXJubyAoQ002KVxuICAgICAgICAgIGNvbnN0IGxpbmVEaXYgPSBlZGl0b3IuY20uZG9tLnF1ZXJ5U2VsZWN0b3IoJy5jbS1jb250ZW50Jyk7XG4gICAgICAgICAgaWYgKGxpbmVEaXYpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVFbGVtZW50cyA9IGxpbmVEaXYucXVlcnlTZWxlY3RvckFsbCgnLmNtLWxpbmUnKTtcbiAgICAgICAgICAgIGlmIChsaW5lRWxlbWVudHMgJiYgbGluZUVsZW1lbnRzLmxlbmd0aCA+IGxpbmVJbmRleCkge1xuICAgICAgICAgICAgICBsaW5lRWxlbWVudHNbbGluZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHRlZC1saW5lJyk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBsaW5lRWxlbWVudHNbbGluZUluZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHRlZC1saW5lJyk7XG4gICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBFZGl0b3IgY2xcdTAwRTFzaWNvIChDTTUpXG4gICAgICAgICAgY29uc3QgbGluZURpdiA9IGVkaXRvci5saW5lRGl2IHx8IGVkaXRvci5nZXRTY3JvbGxlckVsZW1lbnQoKTtcbiAgICAgICAgICBpZiAobGluZURpdikge1xuICAgICAgICAgICAgY29uc3QgbGluZUVsZW1lbnRzID0gbGluZURpdi5xdWVyeVNlbGVjdG9yQWxsKCcuQ29kZU1pcnJvci1saW5lJyk7XG4gICAgICAgICAgICBpZiAobGluZUVsZW1lbnRzICYmIGxpbmVFbGVtZW50cy5sZW5ndGggPiBsaW5lSW5kZXgpIHtcbiAgICAgICAgICAgICAgbGluZUVsZW1lbnRzW2xpbmVJbmRleF0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0ZWQtbGluZScpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGluZUVsZW1lbnRzW2xpbmVJbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnaGlnaGxpZ2h0ZWQtbGluZScpO1xuICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHJlc2FsdGFyIGxcdTAwRURuZWE6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSIsICIvLyBzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvY29tcG9uZW50cy9UYXJlYXNJbmJveENvbXBvbmVudC50c1xuXG5pbXBvcnQgeyBET01VdGlscyB9IGZyb20gJy4uL3V0aWxzL0RPTVV0aWxzJztcbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4uL3V0aWxzL05hdmlnYXRpb25VdGlscyc7XG5cbmludGVyZmFjZSBUYXJlYUluYm94IHtcbiAgcnV0YUFyY2hpdm86IHN0cmluZztcbiAgdGV4dG86IHN0cmluZztcbiAgdGV4dG9PcmlnaW5hbD86IHN0cmluZztcbiAgbGluZUluZm8/OiB7XG4gICAgbnVtZXJvPzogbnVtYmVyO1xuICB9O1xuICBmZWNoYVZlbmNpbWllbnRvPzogc3RyaW5nO1xuICBmZWNoYVNjaGVkdWxlZD86IHN0cmluZztcbiAgZmVjaGFTdGFydD86IHN0cmluZztcbiAgZXRpcXVldGFzOiB7XG4gICAgY29udGV4dG9zPzogc3RyaW5nW107XG4gICAgcGVyc29uYXM/OiBzdHJpbmdbXTtcbiAgICBvdHJhczogc3RyaW5nW107XG4gIH07XG59XG5cbmludGVyZmFjZSBOb3RhQ29uVGFyZWFzIHtcbiAgdGl0dWxvOiBzdHJpbmc7XG4gIHJ1dGE6IHN0cmluZztcbiAgdGFyZWFzOiBUYXJlYUluYm94W107XG59XG5cbi8qKlxuICogQ29tcG9uZW50ZSBwYXJhIGdlc3Rpb25hciB5IG1vc3RyYXIgdGFyZWFzIGVuIGxhIGJhbmRlamEgZGUgZW50cmFkYVxuICovXG5leHBvcnQgY2xhc3MgVGFyZWFzSW5ib3hDb21wb25lbnQge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBcbiAgY29uc3RydWN0b3IocGx1Z2luOiBhbnkpIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEdlbmVyYSB1biBjb21wb25lbnRlIHZpc3VhbCBwYXJhIG1vc3RyYXIgdGFyZWFzIGNvbiBldGlxdWV0YSAjaW5ib3hcbiAgICovXG4gIGFzeW5jIGdlbmVyYXIoZHY6IGFueSk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ3JlYXIgZWwgY29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgIGNvbnN0IGNvbnRhaW5lciA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAndGFyZWFzLWluYm94LWNvbnRhaW5lcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zIGlubGluZSBjb21vIHNvbHVjaVx1MDBGM24gdGVtcG9yYWxcbiAgICAgIC8vIEVuIHVuYSByZWZhY3Rvcml6YWNpXHUwMEYzbiBtXHUwMEUxcyBwcm9mdW5kYSwgZGViZXJcdTAwRURhbiBtb3ZlcnNlIGEgdW4gYXJjaGl2byBDU1NcbiAgICAgIHRoaXMuYVx1MDBGMWFkaXJFc3RpbG9zKGNvbnRhaW5lcik7XG4gICAgICBcbiAgICAgIC8vIEFcdTAwRjFhZGlyIGVuY2FiZXphZG8gcHJpbmNpcGFsXG4gICAgICBjb25zdCBoZWFkaW5nID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnaDMnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2luYm94LWhlYWRpbmcnLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0Q29udGVudDogJ1x1RDgzRFx1RENFNSBUYXJlYXMgZW4gQmFuZGVqYSBkZSBFbnRyYWRhJ1xuICAgICAgICAgIH0pXG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGhlYWRpbmcpO1xuICAgICAgXG4gICAgICAvLyBBZ3JlZ2FyIGNvbnRyb2xlc1xuICAgICAgY29uc3QgY29udHJvbHNEaXYgPSB0aGlzLmNyZWFyQ29udHJvbGVzKGNvbnRhaW5lcik7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udHJvbHNEaXYpO1xuICAgICAgXG4gICAgICAvLyBBXHUwMEYxYWRpciBpbmRpY2Fkb3IgZGUgY2FyZ2FcbiAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBET01VdGlscy5jcmVhdGVMb2FkaW5nSW5kaWNhdG9yKFwiQnVzY2FuZG8gdGFyZWFzIGVuIGJhbmRlamEgZGUgZW50cmFkYS4uLlwiKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsb2FkaW5nRGl2KTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gT2J0ZW5lciBkYXRvcyBkZSB0YXJlYXMgaW5ib3ggYSB0cmF2XHUwMEU5cyBkZSBsYSBBUElcbiAgICAgICAgY29uc3QgeyB0YXJlYXNQb3JOb3RhLCB0b3RhbFRhcmVhcywgdG90YWxOb3RhcyB9ID0gYXdhaXQgdGhpcy5wbHVnaW4udGFyZWFzQVBJLmdldFRhcmVhc0luYm94KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbGltaW5hciBlbCBpbmRpY2Fkb3IgZGUgY2FyZ2FcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGxvYWRpbmdEaXYpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gaGF5IHRhcmVhcyBlbiBiYW5kZWphIGRlIGVudHJhZGFcbiAgICAgICAgaWYgKHRvdGFsVGFyZWFzID09PSAwKSB7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlbXB0eS1tZXNzYWdlJyxcbiAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IFwiXHUwMEExQmFuZGVqYSBkZSBlbnRyYWRhIHZhY1x1MDBFRGEhIE5vIHNlIGVuY29udHJhcm9uIHRhcmVhcyBjb24gZXRpcXVldGEgI2luYm94LlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWN0dWFsaXphciBlbCBlbmNhYmV6YWRvIGNvbiBlbCBjb250YWRvclxuICAgICAgICBoZWFkaW5nLmFwcGVuZENoaWxkKFxuICAgICAgICAgIERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdzdGF0cy1iYWRnZScsXG4gICAgICAgICAgICB0ZXh0Q29udGVudDogYCR7dG90YWxUYXJlYXN9IHRhcmVhcyBlbiAke3RvdGFsTm90YXN9IG5vdGFzYFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yIGRlIGVzdGFkXHUwMEVEc3RpY2FzXG4gICAgICAgIGNvbnN0IHN0YXRzQ29udGFpbmVyID0gdGhpcy5jcmVhckNvbnRlbmVkb3JFc3RhZGlzdGljYXModG90YWxUYXJlYXMsIHRvdGFsTm90YXMpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHNDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gT3JkZW5hciBub3RhcyBwb3IgY2FudGlkYWQgZGUgdGFyZWFzIChkZXNjZW5kZW50ZSlcbiAgICAgICAgY29uc3Qgbm90YXNPcmRlbmFkYXMgPSBBcnJheS5mcm9tKHRhcmVhc1Bvck5vdGEudmFsdWVzKCkpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudGFyZWFzLmxlbmd0aCAtIGEudGFyZWFzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBncnVwb3MgZGUgdGFyZWFzIHBvciBub3RhXG4gICAgICAgIGZvciAoY29uc3Qgbm90YUluZm8gb2Ygbm90YXNPcmRlbmFkYXMpIHtcbiAgICAgICAgICBjb25zdCBncnVwb1RhcmVhcyA9IHRoaXMuY3JlYXJHcnVwb1RhcmVhcyhub3RhSW5mbywgZHYpO1xuICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChncnVwb1RhcmVhcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4cGFuZGlyIGVsIHByaW1lciBncnVwbyBhdXRvbVx1MDBFMXRpY2FtZW50ZVxuICAgICAgICBpZiAobm90YXNPcmRlbmFkYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHByaW1lckdydXBvID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy50YXJlYS1ncm91cCcpO1xuICAgICAgICAgIGlmIChwcmltZXJHcnVwbykge1xuICAgICAgICAgICAgY29uc3QgdG9nZ2xlID0gcHJpbWVyR3J1cG8ucXVlcnlTZWxlY3RvcignLnRhcmVhLWdyb3VwLXRvZ2dsZScpO1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IHByaW1lckdydXBvLnF1ZXJ5U2VsZWN0b3IoJy50YXJlYS1saXN0Jyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0b2dnbGUgJiYgbGlzdCkge1xuICAgICAgICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgICAgICAodG9nZ2xlIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IFwiXHUyNUJDXCI7XG4gICAgICAgICAgICAgIChsaXN0IGFzIEhUTUxFbGVtZW50KS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG4gICAgICAgICAgICAgIChsaXN0IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFbGltaW5hciBlbCBpbmRpY2Fkb3IgZGUgY2FyZ2FcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGxvYWRpbmdEaXYpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9zdHJhciBtZW5zYWplIGRlIGVycm9yXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChcbiAgICAgICAgICBET01VdGlscy5jcmVhdGVFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgICBgRXJyb3IgYWwgY2FyZ2FyIHRhcmVhcyBkZSBiYW5kZWphIGRlIGVudHJhZGE6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgICAgXCJSZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLlwiXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNJbmJveDpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2VuZXJhbCBlbiBtb3N0cmFyVGFyZWFzSW5ib3g6XCIsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gRGV2b2x2ZXIgdW4gbWVuc2FqZSBkZSBlcnJvclxuICAgICAgcmV0dXJuIERPTVV0aWxzLmNyZWF0ZUVycm9yTWVzc2FnZShcbiAgICAgICAgYEVycm9yIGFsIGNhcmdhciB0YXJlYXMgZGUgYmFuZGVqYSBkZSBlbnRyYWRhOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgXCJSZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuICBcbiAgLyoqXG4gICAqIENyZWEgbG9zIGNvbnRyb2xlcyBwYXJhIGxhIGdlc3RpXHUwMEYzbiBkZSB0YXJlYXMgaW5ib3hcbiAgICovXG4gIHByaXZhdGUgY3JlYXJDb250cm9sZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250cm9sc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhcy1jb250cm9scydcbiAgICB9KTtcbiAgICBcbiAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZXhwYW5kaXIgdG9kb1xuICAgIGNvbnN0IGV4cGFuZEJ0biA9IERPTVV0aWxzLmNyZWF0ZUJ1dHRvbihcIkV4cGFuZGlyIFRvZG9cIiwgXG4gICAgICAoKSA9PiB0aGlzLmV4cGFuZGlyVG9kYXMoY29udGFpbmVyKSxcbiAgICAgIHsgY2xhc3NOYW1lOiAndGFyZWFzLWJ0biBleHBhbmQtYnRuJywgaWNvbjogJ1x1RDgzRFx1RENDMicgfVxuICAgICk7XG4gICAgXG4gICAgLy8gQm90XHUwMEYzbiBwYXJhIGNvbGFwc2FyIHRvZG9cbiAgICBjb25zdCBjb2xsYXBzZUJ0biA9IERPTVV0aWxzLmNyZWF0ZUJ1dHRvbihcIkNvbGFwc2FyIFRvZG9cIiwgXG4gICAgICAoKSA9PiB0aGlzLmNvbGFwc2FyVG9kYXMoY29udGFpbmVyKSxcbiAgICAgIHsgY2xhc3NOYW1lOiAndGFyZWFzLWJ0biBjb2xsYXBzZS1idG4nLCBpY29uOiAnXHVEODNEXHVEQ0MxJyB9XG4gICAgKTtcbiAgICBcbiAgICAvLyBCb3RcdTAwRjNuIHBhcmEgcmVmcmVzY2FyXG4gICAgY29uc3QgcmVmcmVzaEJ0biA9IERPTVV0aWxzLmNyZWF0ZUJ1dHRvbihcIkFjdHVhbGl6YXJcIixcbiAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgbnVldm9Db250YWluZXIgPSBhd2FpdCB0aGlzLmdlbmVyYXIoZHYpO1xuICAgICAgICBjb250YWluZXIucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG51ZXZvQ29udGFpbmVyLCBjb250YWluZXIpO1xuICAgICAgfSxcbiAgICAgIHsgY2xhc3NOYW1lOiAndGFyZWFzLWJ0biByZWZyZXNoLWJ0bicsIGljb246ICdcdUQ4M0RcdUREMDQnIH1cbiAgICApO1xuICAgIFxuICAgIC8vIEJvdFx1MDBGM24gcGFyYSBwcm9jZXNhciBpbmJveFxuICAgIGNvbnN0IHByb2Nlc2FyQnRuID0gRE9NVXRpbHMuY3JlYXRlQnV0dG9uKFwiUHJvY2VzYXIgSW5ib3hcIiwgXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIE1vc3RyYXIgaW5kaWNhY2lcdTAwRjNuIHBhcmEgcHJvY2VzYXIgbGFzIHRhcmVhc1xuICAgICAgICBuZXcgdGhpcy5wbHVnaW4uYXBwLk5vdGljZShcIlBhcmEgcHJvY2VzYXIgdW5hIHRhcmVhLCBoYXogY2xpYyBlbiBlbGxhIHBhcmEgYWJyaXJsYSB5IGNsYXNpZmljYXJsYVwiLCA1MDAwKTtcbiAgICAgIH0sXG4gICAgICB7IFxuICAgICAgICBjbGFzc05hbWU6ICd0YXJlYXMtYnRuIHByb2Nlc3MtYnRuJywgXG4gICAgICAgIGljb246ICdcdUQ4M0RcdUREMEQnLFxuICAgICAgICBzdHlsZXM6IHtcbiAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJyxcbiAgICAgICAgICBjb2xvcjogJ3doaXRlJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgICBcbiAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChleHBhbmRCdG4pO1xuICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKGNvbGxhcHNlQnRuKTtcbiAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChyZWZyZXNoQnRuKTtcbiAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChwcm9jZXNhckJ0bik7XG4gICAgXG4gICAgcmV0dXJuIGNvbnRyb2xzRGl2O1xuICB9XG4gIFxuICAvKipcbiAgICogQ3JlYSB1biBjb250ZW5lZG9yIGNvbiB0YXJqZXRhcyBkZSBlc3RhZFx1MDBFRHN0aWNhc1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhckNvbnRlbmVkb3JFc3RhZGlzdGljYXModG90YWxUYXJlYXM6IG51bWJlciwgdG90YWxOb3RhczogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHN0YXRzQ29udGFpbmVyID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnaW5ib3gtc3RhdHMtY29udGFpbmVyJyxcbiAgICAgIHN0eWxlczoge1xuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhXcmFwOiAnd3JhcCcsXG4gICAgICAgIGdhcDogJzEwcHgnLFxuICAgICAgICBtYXJnaW46ICcxMHB4IDAgMjBweCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBBZ3JlZ2FyIHRhcmpldGFzIGRlIGVzdGFkXHUwMEVEc3RpY2FzXG4gICAgdGhpcy5jcmVhclRhcmpldGFFc3RhZGlzdGljYShzdGF0c0NvbnRhaW5lciwgXCJcdUQ4M0RcdURDRTVcIiwgXCJUYXJlYXMgdG90YWxlc1wiLCB0b3RhbFRhcmVhcyk7XG4gICAgdGhpcy5jcmVhclRhcmpldGFFc3RhZGlzdGljYShzdGF0c0NvbnRhaW5lciwgXCJcdUQ4M0RcdURDRERcIiwgXCJOb3RhcyBjb24gdGFyZWFzXCIsIHRvdGFsTm90YXMpO1xuICAgIFxuICAgIHJldHVybiBzdGF0c0NvbnRhaW5lcjtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENyZWEgdW5hIHRhcmpldGEgZGUgZXN0YWRcdTAwRURzdGljYVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhclRhcmpldGFFc3RhZGlzdGljYShcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgICBpY29ubzogc3RyaW5nLCBcbiAgICB0aXR1bG86IHN0cmluZywgXG4gICAgdmFsb3I6IG51bWJlciB8IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB0YXJqZXRhID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnc3RhdHMtY2FyZCcsXG4gICAgICBzdHlsZXM6IHtcbiAgICAgICAgZmxleDogJzEnLFxuICAgICAgICBtaW5XaWR0aDogJzE1MHB4JyxcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJyxcbiAgICAgICAgcGFkZGluZzogJzE1cHgnLFxuICAgICAgICBib3JkZXJSYWRpdXM6ICc4cHgnLFxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgaWNvbm9FbCA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIHRleHRDb250ZW50OiBpY29ubyxcbiAgICAgIHN0eWxlczoge1xuICAgICAgICBmb250U2l6ZTogJzI0cHgnLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICc1cHgnXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgdGl0dWxvRWwgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICB0ZXh0Q29udGVudDogdGl0dWxvLFxuICAgICAgc3R5bGVzOiB7XG4gICAgICAgIGZvbnRTaXplOiAnMTJweCcsXG4gICAgICAgIGNvbG9yOiAndmFyKC0tdGV4dC1tdXRlZCknLFxuICAgICAgICBtYXJnaW5Cb3R0b206ICc1cHgnXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgdmFsb3JFbCA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIHRleHRDb250ZW50OiB2YWxvci50b1N0cmluZygpLFxuICAgICAgc3R5bGVzOiB7XG4gICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgZm9udFNpemU6ICcxOHB4J1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHRhcmpldGEuYXBwZW5kQ2hpbGQoaWNvbm9FbCk7XG4gICAgdGFyamV0YS5hcHBlbmRDaGlsZCh0aXR1bG9FbCk7XG4gICAgdGFyamV0YS5hcHBlbmRDaGlsZCh2YWxvckVsKTtcbiAgICBcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGFyamV0YSk7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBDcmVhIHVuIGdydXBvIGRlIHRhcmVhcyBwYXJhIHVuYSBub3RhIGVzcGVjXHUwMEVEZmljYVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhckdydXBvVGFyZWFzKG5vdGFJbmZvOiBOb3RhQ29uVGFyZWFzLCBkdjogYW55KTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHsgdGl0dWxvLCBydXRhLCB0YXJlYXMgfSA9IG5vdGFJbmZvO1xuICAgIFxuICAgIC8vIENvbnRlbmVkb3IgcGFyYSBsYSBsaXN0YSBkZSB0YXJlYXMgKGluaWNpYWxtZW50ZSBvY3VsdG8pXG4gICAgY29uc3QgdGFyZWFzTGlzdCA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWxpc3QnLFxuICAgICAgc3R5bGVzOiB7XG4gICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGNhZGEgdGFyZWFcbiAgICBmb3IgKGNvbnN0IHRhcmVhIG9mIHRhcmVhcykge1xuICAgICAgY29uc3QgdGFyZWFFbGVtZW50ID0gdGhpcy5jcmVhclRhcmVhRWxlbWVudCh0YXJlYSwgZHYpO1xuICAgICAgdGFyZWFzTGlzdC5hcHBlbmRDaGlsZCh0YXJlYUVsZW1lbnQpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhciBlbCB0XHUwMEVEdHVsbyBjb24gZW5sYWNlXG4gICAgbGV0IHRpdGxlRWxlbWVudDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZW5sYWNlTm90YSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2ludGVybmFsLWxpbmsnLFxuICAgICAgICB0ZXh0Q29udGVudDogdGl0dWxvLFxuICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgJ2RhdGEtaHJlZic6IHJ1dGFcbiAgICAgICAgfSxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgY2xpY2s6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocnV0YSwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdGl0bGVFbGVtZW50ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICd0YXJlYS1ncm91cC10aXRsZScsXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAgRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWdyb3VwLXRvZ2dsZScsXG4gICAgICAgICAgICB0ZXh0Q29udGVudDogJ1x1MjVCNidcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBlbmxhY2VOb3RhXG4gICAgICAgIF1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIFNpIGZhbGxhIGxhIGNyZWFjaVx1MDBGM24gZGVsIGVubGFjZSwgbW9zdHJhciBzb2xvIHRleHRvXG4gICAgICB0aXRsZUVsZW1lbnQgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWdyb3VwLXRpdGxlJyxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAndGFyZWEtZ3JvdXAtdG9nZ2xlJyxcbiAgICAgICAgICAgIHRleHRDb250ZW50OiAnXHUyNUI2J1xuICAgICAgICAgIH0pLFxuICAgICAgICAgIERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0Q29udGVudDogdGl0dWxvXG4gICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIGVsIGhlYWRlciBjb24gY29udGFkb3JcbiAgICBjb25zdCBoZWFkZXJEaXYgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXJlYS1ncm91cC1oZWFkZXInLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgdGl0bGVFbGVtZW50LFxuICAgICAgICBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWdyb3VwLWNvdW50JyxcbiAgICAgICAgICB0ZXh0Q29udGVudDogdGFyZWFzLmxlbmd0aC50b1N0cmluZygpXG4gICAgICAgIH0pXG4gICAgICBdXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ3JlYXIgY29udGVuZWRvciBkZWwgZ3J1cG9cbiAgICBjb25zdCBncnVwb0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWdyb3VwJyxcbiAgICAgIGNoaWxkcmVuOiBbaGVhZGVyRGl2LCB0YXJlYXNMaXN0XVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFncmVnYXIgZXZlbnRvIHBhcmEgbW9zdHJhci9vY3VsdGFyIGxpc3RhIGRlIHRhcmVhc1xuICAgIGhlYWRlckRpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgLy8gTm8gY29sYXBzYXIgc2kgc2UgaGl6byBjbGljIGVuIHVuIGVubGFjZVxuICAgICAgaWYgKGV2ZW50LnRhcmdldCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50KSByZXR1cm47XG4gICAgICBcbiAgICAgIGNvbnN0IHRvZ2dsZVNwYW4gPSB0aXRsZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhcmVhLWdyb3VwLXRvZ2dsZScpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgaWYgKCF0b2dnbGVTcGFuKSByZXR1cm47XG4gICAgICBcbiAgICAgIHRvZ2dsZVNwYW4uY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpO1xuICAgICAgdGFyZWFzTGlzdC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICBcbiAgICAgIGlmICh0b2dnbGVTcGFuLmNsYXNzTGlzdC5jb250YWlucygnb3BlbicpKSB7XG4gICAgICAgIHRvZ2dsZVNwYW4udGV4dENvbnRlbnQgPSBcIlx1MjVCQ1wiO1xuICAgICAgICB0YXJlYXNMaXN0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b2dnbGVTcGFuLnRleHRDb250ZW50ID0gXCJcdTI1QjZcIjtcbiAgICAgICAgdGFyZWFzTGlzdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIGdydXBvRGl2O1xuICB9XG4gIFxuICAvKipcbiAgICogQ3JlYSB1biBlbGVtZW50byBET00gcGFyYSB1bmEgdGFyZWEgZGUgYmFuZGVqYSBkZSBlbnRyYWRhXG4gICAqL1xuICBwcml2YXRlIGNyZWFyVGFyZWFFbGVtZW50KHRhcmVhOiBUYXJlYUluYm94LCBkdjogYW55KTogSFRNTEVsZW1lbnQge1xuICAgIC8vIEVsZW1lbnRvIHByaW5jaXBhbFxuICAgIGNvbnN0IHRhcmVhRGl2ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAndGFyZWEtaXRlbScsXG4gICAgICBzdHlsZXM6IHtcbiAgICAgICAgYm9yZGVyTGVmdDogJzRweCBzb2xpZCAjRTY3RTIyJyAvLyBDb2xvciBuYXJhbmphIHBhcmEgbW9zdHJhciBxdWUgZXN0XHUwMEUxIGVuIGluYm94XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gVGV4dG8gZGUgbGEgdGFyZWFcbiAgICBjb25zdCB0ZXh0b0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLXRleHRvJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENoZWNrYm94ICh2aXN1YWwsIG5vIGZ1bmNpb25hbClcbiAgICBjb25zdCBjaGVja2JveFNwYW4gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFyZWEtY2hlY2tib3gnLFxuICAgICAgdGV4dENvbnRlbnQ6ICdcdTI2MTAnLFxuICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAnZGF0YS1wYXRoJzogdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICdkYXRhLWxpbmUnOiBTdHJpbmcodGFyZWEubGluZUluZm8/Lm51bWVybyB8fCAwKVxuICAgICAgfSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBjbGljazogKCkgPT4ge1xuICAgICAgICAgIE5hdmlnYXRpb25VdGlscy5uYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvKFxuICAgICAgICAgICAgdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICAgICB0YXJlYS5saW5lSW5mbz8ubnVtZXJvIHx8IDAsXG4gICAgICAgICAgICB0YXJlYS50ZXh0b09yaWdpbmFsIHx8IHRhcmVhLnRleHRvLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB0ZXh0b0Rpdi5hcHBlbmRDaGlsZChjaGVja2JveFNwYW4pO1xuICAgIFxuICAgIC8vIENvbnRlbmlkbyBkZSBsYSB0YXJlYVxuICAgIGNvbnN0IGNvbnRlbmlkb1NwYW4gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFyZWEtY29udGVuaWRvJyxcbiAgICAgIHRleHRDb250ZW50OiB0YXJlYS50ZXh0byxcbiAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgJ2RhdGEtcGF0aCc6IHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAnZGF0YS1saW5lJzogU3RyaW5nKHRhcmVhLmxpbmVJbmZvPy5udW1lcm8gfHwgMClcbiAgICAgIH0sXG4gICAgICBzdHlsZXM6IHtcbiAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgIH0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgY2xpY2s6ICgpID0+IHtcbiAgICAgICAgICBOYXZpZ2F0aW9uVXRpbHMubmF2ZWdhckFUYXJlYUNvblJlc2FsdGFkbyhcbiAgICAgICAgICAgIHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAgICAgdGFyZWEubGluZUluZm8/Lm51bWVybyB8fCAwLFxuICAgICAgICAgICAgdGFyZWEudGV4dG9PcmlnaW5hbCB8fCB0YXJlYS50ZXh0byxcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGV4dG9EaXYuYXBwZW5kQ2hpbGQoY29udGVuaWRvU3Bhbik7XG4gICAgdGFyZWFEaXYuYXBwZW5kQ2hpbGQodGV4dG9EaXYpO1xuICAgIFxuICAgIC8vIE1ldGFkYXRvc1xuICAgIGNvbnN0IG1ldGFkYXRvc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLW1ldGFkYXRvcydcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBtZXRhZGF0b3NcbiAgICB0aGlzLmFcdTAwRjFhZGlyTWV0YWRhdG9zVWJpY2FjaW9uKHRhcmVhLCBtZXRhZGF0b3NEaXYpO1xuICAgIHRoaXMuYVx1MDBGMWFkaXJNZXRhZGF0b3NGZWNoYXModGFyZWEsIG1ldGFkYXRvc0Rpdik7XG4gICAgdGhpcy5hXHUwMEYxYWRpck1ldGFkYXRvc1BlcnNvbmFzKHRhcmVhLCBtZXRhZGF0b3NEaXYpO1xuICAgIHRoaXMuYVx1MDBGMWFkaXJNZXRhZGF0b3NDb250ZXh0b3ModGFyZWEsIG1ldGFkYXRvc0Rpdik7XG4gICAgdGhpcy5hXHUwMEYxYWRpck1ldGFkYXRvc0V0aXF1ZXRhcyh0YXJlYSwgbWV0YWRhdG9zRGl2KTtcbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBib3RvbmVzIGRlIGFjY2lcdTAwRjNuIHBhcmEgY2xhc2lmaWNhciBsYSB0YXJlYVxuICAgIHRoaXMuYVx1MDBGMWFkaXJCb3RvbmVzQWNjaW9uKHRhcmVhLCBtZXRhZGF0b3NEaXYpO1xuICAgIFxuICAgIHRhcmVhRGl2LmFwcGVuZENoaWxkKG1ldGFkYXRvc0Rpdik7XG4gICAgXG4gICAgcmV0dXJuIHRhcmVhRGl2O1xuICB9XG4gIFxuICAvKipcbiAgICogQVx1MDBGMWFkZSBtZXRhZGF0b3MgZGUgdWJpY2FjaVx1MDBGM24gYSB1bmEgdGFyZWFcbiAgICovXG4gIHByaXZhdGUgYVx1MDBGMWFkaXJNZXRhZGF0b3NVYmljYWNpb24odGFyZWE6IFRhcmVhSW5ib3gsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCB1YmljYWNpb25EaXYgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXJlYS1tZXRhLWl0ZW0nXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgaWNvbm9VYmljYWNpb24gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAnbWV0YWRhdG8taWNvbm8nLFxuICAgICAgdGV4dENvbnRlbnQ6ICdcdUQ4M0RcdURDQ0QnXG4gICAgfSk7XG4gICAgdWJpY2FjaW9uRGl2LmFwcGVuZENoaWxkKGljb25vVWJpY2FjaW9uKTtcbiAgICBcbiAgICBjb25zdCB2YWxvclViaWNhY2lvbiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICd1YmljYWNpb24tdmFsb3InLFxuICAgICAgdGV4dENvbnRlbnQ6IHRhcmVhLmxpbmVJbmZvPy5udW1lcm8gXG4gICAgICAgID8gYExcdTAwRURuZWEgJHt0YXJlYS5saW5lSW5mby5udW1lcm99YCBcbiAgICAgICAgOiBcIlBvc2ljaVx1MDBGM24gZGVzY29ub2NpZGFcIlxuICAgIH0pO1xuICAgIFxuICAgIHViaWNhY2lvbkRpdi5hcHBlbmRDaGlsZCh2YWxvclViaWNhY2lvbik7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHViaWNhY2lvbkRpdik7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBBXHUwMEYxYWRlIG1ldGFkYXRvcyBkZSBmZWNoYXMgYSB1bmEgdGFyZWFcbiAgICovXG4gIHByaXZhdGUgYVx1MDBGMWFkaXJNZXRhZGF0b3NGZWNoYXModGFyZWE6IFRhcmVhSW5ib3gsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRhcmVhLmZlY2hhVmVuY2ltaWVudG8gJiYgIXRhcmVhLmZlY2hhU2NoZWR1bGVkICYmICF0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGZlY2hhc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLW1ldGEtaXRlbSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBpY29ub0ZlY2hhID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ21ldGFkYXRvLWljb25vJyxcbiAgICAgIHRleHRDb250ZW50OiAnXHVEODNEXHVEQ0M1J1xuICAgIH0pO1xuICAgIGZlY2hhc0Rpdi5hcHBlbmRDaGlsZChpY29ub0ZlY2hhKTtcbiAgICBcbiAgICBjb25zdCB2YWxvckZlY2hhcyA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBcbiAgICBsZXQgdGV4dG9mZWNoYXMgPSBbXTtcbiAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgdGV4dG9mZWNoYXMucHVzaChgVmVuY2U6ICR7dGFyZWEuZmVjaGFWZW5jaW1pZW50b31gKTtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICB0ZXh0b2ZlY2hhcy5wdXNoKGBQcm9ncmFtYWRhOiAke3RhcmVhLmZlY2hhU2NoZWR1bGVkfWApO1xuICAgIH1cbiAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgdGV4dG9mZWNoYXMucHVzaChgSW5pY2lhOiAke3RhcmVhLmZlY2hhU3RhcnR9YCk7XG4gICAgfVxuICAgIFxuICAgIHZhbG9yRmVjaGFzLnRleHRDb250ZW50ID0gdGV4dG9mZWNoYXMuam9pbignIHwgJyk7XG4gICAgZmVjaGFzRGl2LmFwcGVuZENoaWxkKHZhbG9yRmVjaGFzKTtcbiAgICBcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZmVjaGFzRGl2KTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIEFcdTAwRjFhZGUgbWV0YWRhdG9zIGRlIHBlcnNvbmFzIGFzaWduYWRhcyBhIHVuYSB0YXJlYVxuICAgKi9cbiAgcHJpdmF0ZSBhXHUwMEYxYWRpck1ldGFkYXRvc1BlcnNvbmFzKHRhcmVhOiBUYXJlYUluYm94LCBjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCF0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwZXJzb25hc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLW1ldGEtaXRlbSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBpY29ub1BlcnNvbmFzID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ21ldGFkYXRvLWljb25vJyxcbiAgICAgIHRleHRDb250ZW50OiAnXHVEODNEXHVEQzY0J1xuICAgIH0pO1xuICAgIHBlcnNvbmFzRGl2LmFwcGVuZENoaWxkKGljb25vUGVyc29uYXMpO1xuICAgIFxuICAgIGNvbnN0IHZhbG9yUGVyc29uYXMgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgdGV4dENvbnRlbnQ6IHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5qb2luKCcgfCAnKVxuICAgIH0pO1xuICAgIHBlcnNvbmFzRGl2LmFwcGVuZENoaWxkKHZhbG9yUGVyc29uYXMpO1xuICAgIFxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwZXJzb25hc0Rpdik7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBBXHUwMEYxYWRlIG1ldGFkYXRvcyBkZSBjb250ZXh0b3MgYSB1bmEgdGFyZWFcbiAgICovXG4gIHByaXZhdGUgYVx1MDBGMWFkaXJNZXRhZGF0b3NDb250ZXh0b3ModGFyZWE6IFRhcmVhSW5ib3gsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBpZiAoIXRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb250ZXh0b3NEaXYgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd0YXJlYS1tZXRhLWl0ZW0nXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgaWNvbm9Db250ZXh0b3MgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgY2xhc3NOYW1lOiAnbWV0YWRhdG8taWNvbm8nLFxuICAgICAgdGV4dENvbnRlbnQ6ICdcdUQ4M0RcdUREQzJcdUZFMEYnXG4gICAgfSk7XG4gICAgY29udGV4dG9zRGl2LmFwcGVuZENoaWxkKGljb25vQ29udGV4dG9zKTtcbiAgICBcbiAgICBjb25zdCB2YWxvckNvbnRleHRvcyA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICB0ZXh0Q29udGVudDogdGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKVxuICAgIH0pO1xuICAgIGNvbnRleHRvc0Rpdi5hcHBlbmRDaGlsZCh2YWxvckNvbnRleHRvcyk7XG4gICAgXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRleHRvc0Rpdik7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBBXHUwMEYxYWRlIG1ldGFkYXRvcyBkZSBldGlxdWV0YXMgKGV4Y2x1eWVuZG8gI2luYm94KSBhIHVuYSB0YXJlYVxuICAgKi9cbiAgcHJpdmF0ZSBhXHUwMEYxYWRpck1ldGFkYXRvc0V0aXF1ZXRhcyh0YXJlYTogVGFyZWFJbmJveCwgY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgIC8vIE90cmFzIGV0aXF1ZXRhcyAoZXhjbHV5ZW5kbyAjaW5ib3gpXG4gICAgY29uc3Qgb3RyYXNFdGlxdWV0YXMgPSB0YXJlYS5ldGlxdWV0YXMub3RyYXMuZmlsdGVyKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKSAhPT0gJyNpbmJveCcpO1xuICAgIGlmICghb3RyYXNFdGlxdWV0YXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGV0aXF1ZXRhc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLW1ldGEtaXRlbSdcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBpY29ub0V0aXF1ZXRhcyA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICdtZXRhZGF0by1pY29ubycsXG4gICAgICB0ZXh0Q29udGVudDogJ1x1RDgzQ1x1REZGN1x1RkUwRidcbiAgICB9KTtcbiAgICBldGlxdWV0YXNEaXYuYXBwZW5kQ2hpbGQoaWNvbm9FdGlxdWV0YXMpO1xuICAgIFxuICAgIGNvbnN0IHZhbG9yRXRpcXVldGFzID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIHRleHRDb250ZW50OiBvdHJhc0V0aXF1ZXRhcy5qb2luKCcgJylcbiAgICB9KTtcbiAgICBldGlxdWV0YXNEaXYuYXBwZW5kQ2hpbGQodmFsb3JFdGlxdWV0YXMpO1xuICAgIFxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChldGlxdWV0YXNEaXYpO1xuICB9XG4gIFxuICAvKipcbiAgICogQVx1MDBGMWFkZSBib3RvbmVzIGRlIGFjY2lcdTAwRjNuIHJcdTAwRTFwaWRhIHBhcmEgY2xhc2lmaWNhciBsYSB0YXJlYVxuICAgKi9cbiAgcHJpdmF0ZSBhXHUwMEYxYWRpckJvdG9uZXNBY2Npb24odGFyZWE6IFRhcmVhSW5ib3gsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBhY2Npb25lc0RpdiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3RhcmVhLWFjY2lvbmVzJyxcbiAgICAgIHN0eWxlczoge1xuICAgICAgICBtYXJnaW5Ub3A6ICc4cHgnLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGdhcDogJzhweCcsXG4gICAgICAgIGZsZXhXcmFwOiAnd3JhcCdcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBFc3RpbG9zIGNvbXVuZXMgcGFyYSBib3RvbmVzXG4gICAgY29uc3QgZXN0aWxvc0JvdG9uZXMgPSB7XG4gICAgICBmb250U2l6ZTogJzEycHgnLFxuICAgICAgcGFkZGluZzogJzNweCA4cHgnLFxuICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknLFxuICAgICAgYmFja2dyb3VuZENvbG9yOiAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJyxcbiAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgfTtcbiAgICBcbiAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZWRpdGFyL2FicmlyIGxhIHRhcmVhXG4gICAgY29uc3QgYnRuRWRpdGFyID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgY2xhc3NOYW1lOiAndGFyZWEtYWNjaW9uLWJ0bicsXG4gICAgICB0ZXh0Q29udGVudDogJ1x1MjcwRlx1RkUwRiBFZGl0YXInLFxuICAgICAgc3R5bGVzOiBlc3RpbG9zQm90b25lcyxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBjbGljazogKCkgPT4ge1xuICAgICAgICAgIE5hdmlnYXRpb25VdGlscy5uYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvKFxuICAgICAgICAgICAgdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICAgICB0YXJlYS5saW5lSW5mbz8ubnVtZXJvIHx8IDAsXG4gICAgICAgICAgICB0YXJlYS50ZXh0b09yaWdpbmFsIHx8IHRhcmVhLnRleHRvLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBhY2Npb25lc0Rpdi5hcHBlbmRDaGlsZChidG5FZGl0YXIpO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGJvdG9uZXMgZGUgYWNjaVx1MDBGM24gclx1MDBFMXBpZGEgcGFyYSBjbGFzaWZpY2FyIHBvciBjb250ZXh0b3MgY29tdW5lc1xuICAgIGNvbnN0IGNvbnRleHRvc0NvbXVuZXMgPSBbXCIjY3gvdHJhYmFqb1wiLCBcIiNjeC9wZXJzb25hbFwiLCBcIiNjeC9ob2dhclwiXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGNvbnRleHRvIG9mIGNvbnRleHRvc0NvbXVuZXMpIHtcbiAgICAgIGNvbnN0IGJ0bkNvbnRleHRvID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICBjbGFzc05hbWU6ICd0YXJlYS1hY2Npb24tYnRuIGNvbnRleHRvLWJ0bicsXG4gICAgICAgIHRleHRDb250ZW50OiBjb250ZXh0byxcbiAgICAgICAgc3R5bGVzOiBlc3RpbG9zQm90b25lcyxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgY2xpY2s6ICgpID0+IHtcbiAgICAgICAgICAgIC8vIERlIG1vbWVudG8sIHNpbXBsZW1lbnRlIGFicmlyIGxhIHRhcmVhIC0gdW5hIGltcGxlbWVudGFjaVx1MDBGM24gbVx1MDBFMXMgY29tcGxldGEgcG9kclx1MDBFRGEgYVx1MDBGMWFkaXJcbiAgICAgICAgICAgIC8vIGVsIGNvbnRleHRvIGRpcmVjdGFtZW50ZSBhIGxhIHRhcmVhLCBwZXJvIHJlcXVlcmlyXHUwMEVEYSBtXHUwMEUxcyBpbnRlZ3JhY2lcdTAwRjNuIGNvbiBlbCBwbHVnaW5cbiAgICAgICAgICAgIE5hdmlnYXRpb25VdGlscy5uYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvKFxuICAgICAgICAgICAgICB0YXJlYS5ydXRhQXJjaGl2byxcbiAgICAgICAgICAgICAgdGFyZWEubGluZUluZm8/Lm51bWVybyB8fCAwLFxuICAgICAgICAgICAgICB0YXJlYS50ZXh0b09yaWdpbmFsIHx8IHRhcmVhLnRleHRvLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgdGhpcy5wbHVnaW4uYXBwLk5vdGljZShcbiAgICAgICAgICAgICAgYFBhcmEgYVx1MDBGMWFkaXIgXCIke2NvbnRleHRvfVwiIGEgZXN0YSB0YXJlYSwgZWRcdTAwRUR0YWxhIGVuIGVsIGFyY2hpdm8gYWJpZXJ0by5gLCBcbiAgICAgICAgICAgICAgNTAwMFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhY2Npb25lc0Rpdi5hcHBlbmRDaGlsZChidG5Db250ZXh0byk7XG4gICAgfVxuICAgIFxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChhY2Npb25lc0Rpdik7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBFeHBhbmRlIHRvZG9zIGxvcyBncnVwb3MgZGUgdGFyZWFzIGVuIGVsIGNvbnRlbmVkb3JcbiAgICovXG4gIHByaXZhdGUgZXhwYW5kaXJUb2Rhcyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgLy8gT2J0ZW5lciB0b2RvcyBsb3MgdG9nZ2xlcyBkZSBncnVwb3MgZGUgdGFyZWFzXG4gICAgY29uc3QgdG9nZ2xlcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZWEtZ3JvdXAtdG9nZ2xlJyk7XG4gICAgY29uc3QgbGlzdGFzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJlYS1saXN0Jyk7XG4gICAgXG4gICAgLy8gRXhwYW5kaXIgY2FkYSB1bm9cbiAgICB0b2dnbGVzLmZvckVhY2goKHRvZ2dsZSwgaW5kZXgpID0+IHtcbiAgICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG4gICAgICAodG9nZ2xlIGFzIEhUTUxFbGVtZW50KS50ZXh0Q29udGVudCA9IFwiXHUyNUJDXCI7XG4gICAgICBcbiAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGxhIGxpc3RhIGNvcnJlc3BvbmRpZW50ZSBlc3RcdTAwRTkgdmlzaWJsZVxuICAgICAgaWYgKGxpc3Rhc1tpbmRleF0pIHtcbiAgICAgICAgbGlzdGFzW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG4gICAgICAgIChsaXN0YXNbaW5kZXhdIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiOyAvLyBBc2VndXJhciB2aXNpYmlsaWRhZCBkaXJlY3RhbWVudGVcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgLyoqXG4gICAqIENvbGFwc2EgdG9kb3MgbG9zIGdydXBvcyBkZSB0YXJlYXMgZW4gZWwgY29udGVuZWRvclxuICAgKi9cbiAgcHJpdmF0ZSBjb2xhcHNhclRvZGFzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAvLyBPYnRlbmVyIHRvZG9zIGxvcyB0b2dnbGVzIGRlIGdydXBvcyBkZSB0YXJlYXNcbiAgICBjb25zdCB0b2dnbGVzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJlYS1ncm91cC10b2dnbGUnKTtcbiAgICBjb25zdCBsaXN0YXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhcmVhLWxpc3QnKTtcbiAgICBcbiAgICAvLyBDb2xhcHNhciBjYWRhIHVub1xuICAgIHRvZ2dsZXMuZm9yRWFjaCgodG9nZ2xlLCBpbmRleCkgPT4ge1xuICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICh0b2dnbGUgYXMgSFRNTEVsZW1lbnQpLnRleHRDb250ZW50ID0gXCJcdTI1QjZcIjtcbiAgICAgIFxuICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgbGEgbGlzdGEgY29ycmVzcG9uZGllbnRlIGVzdFx1MDBFOSBvY3VsdGFcbiAgICAgIGlmIChsaXN0YXNbaW5kZXhdKSB7XG4gICAgICAgIGxpc3Rhc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICAgICAgICAobGlzdGFzW2luZGV4XSBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBPY3VsdGFyIGRpcmVjdGFtZW50ZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvKipcbiAgICogQVx1MDBGMWFkZSBlc3RpbG9zIGlubGluZSBhbCBjb250ZW5lZG9yIChzb2x1Y2lcdTAwRjNuIHRlbXBvcmFsKVxuICAgKiBFbiB1bmEgcmVmYWN0b3JpemFjaVx1MDBGM24gY29tcGxldGEsIGVzdG9zIGVzdGlsb3MgZGViZXJcdTAwRURhbiBtb3ZlcnNlIGEgdW4gYXJjaGl2byBDU1NcbiAgICovXG4gIHByaXZhdGUgYVx1MDBGMWFkaXJFc3RpbG9zKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICBjb25zdCBzdHlsZUVsID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3R5bGUnLCB7XG4gICAgICB0ZXh0Q29udGVudDogYFxuICAgICAgLnRhcmVhcy1pbmJveC1jb250YWluZXIge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLmluYm94LWhlYWRpbmcge1xuICAgICAgICAgIG1hcmdpbi10b3A6IDFyZW07XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDZweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS4zZW07XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnN0YXRzLWJhZGdlIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICAgIHBhZGRpbmc6IDJweCAxMHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44ZW07XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnRhcmVhcy1jb250cm9scyB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnRhcmVhcy1idG4ge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5LWFsdCk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICBwYWRkaW5nOiA2cHggMTJweDtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnRhcmVhcy1idG46aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZXhwYW5kLWJ0bjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1ncm91cCB7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1ncm91cC1oZWFkZXIge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1ncm91cC1oZWFkZXI6aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAudGFyZWEtZ3JvdXAtdGl0bGUge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICAudGFyZWEtZ3JvdXAtdG9nZ2xlIHtcbiAgICAgICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xuICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjJzIGVhc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1ncm91cC10b2dnbGUub3BlbiB7XG4gICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAudGFyZWEtZ3JvdXAtY291bnQge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgcGFkZGluZzogMXB4IDhweDtcbiAgICAgICAgICBmb250LXNpemU6IDAuODVlbTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnRhcmVhLWxpc3Qge1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweCAxMnB4O1xuICAgICAgfVxuICAgICAgXG4gICAgICAudGFyZWEtaXRlbSB7XG4gICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1pdGVtOmhvdmVyIHtcbiAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS10ZXh0byB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZ2FwOiA4cHg7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1jaGVja2JveCB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMS4xZW07XG4gICAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgfVxuICAgICAgXG4gICAgICAudGFyZWEtY29udGVuaWRvIHtcbiAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLnRhcmVhLW1ldGFkYXRvcyB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDI4cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjllbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC50YXJlYS1tZXRhLWl0ZW0ge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDNweDtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLm1ldGFkYXRvLWljb25vIHtcbiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDZweDtcbiAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5sb2FkaW5nLWluZGljYXRvciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5zcGlubmVyIHtcbiAgICAgICAgICBib3JkZXI6IDNweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgIGJvcmRlci10b3A6IDNweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgIHdpZHRoOiAzMHB4O1xuICAgICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgICBhbmltYXRpb246IHNwaW4gMXMgbGluZWFyIGluZmluaXRlO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICB9XG4gICAgICBcbiAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC5lcnJvci1tZXNzYWdlIHtcbiAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1lcnJvcik7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS10ZXh0LWVycm9yLXJnYiksIDAuMSk7XG4gICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgfVxuICAgICAgXG4gICAgICAuZW1wdHktbWVzc2FnZSB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICBwYWRkaW5nOiAycmVtO1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgIH1cbiAgICAgIGBcbiAgICB9KTtcbiAgICBcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3R5bGVFbCk7XG4gIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2NvbXBvbmVudHMvUHJveWVjdG9DYW1wYW5hc0NvbXBvbmVudC50c1xuXG5pbXBvcnQgeyBET01VdGlscyB9IGZyb20gJy4uL3V0aWxzL0RPTVV0aWxzJztcbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4uL3V0aWxzL05hdmlnYXRpb25VdGlscyc7XG5cbi8qKlxuICogSW50ZXJmYXogcGFyYSBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIHVuIGVudHJlZ2FibGVcbiAqL1xuaW50ZXJmYWNlIEVudHJlZ2FibGUge1xuICBpZDogc3RyaW5nO1xuICB0aXR1bG86IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBoaXRzOiBudW1iZXI7XG4gIGVzdGFkbzogc3RyaW5nO1xuICBmZWNoYVB1YmxpY2FjaW9uPzogc3RyaW5nO1xuICBkaWZlcmVuY2lhRGlhcz86IG51bWJlcjtcbiAgYWxpYXM/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW50ZXJmYXogcGFyYSBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIHVuYSBjYW1wYVx1MDBGMWFcbiAqL1xuaW50ZXJmYWNlIENhbXBhbmEge1xuICBpZDogc3RyaW5nO1xuICB0aXR1bG86IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBlbnRyZWdhYmxlczogRW50cmVnYWJsZVtdO1xuICBoaXRzOiBudW1iZXI7XG4gIGVzdGFkbzogc3RyaW5nO1xuICBmZWNoYUluaWNpbz86IHN0cmluZztcbiAgZmVjaGFGaW4/OiBzdHJpbmc7XG4gIGFsaWFzPzogc3RyaW5nO1xuICBkaWZlcmVuY2lhRGlhc1Byb3hpbW8/OiBudW1iZXI7XG59XG5cbi8qKlxuICogSW50ZXJmYXogcGFyYSBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIHVuIHByb3llY3RvIEdURFxuICovXG5pbnRlcmZhY2UgUHJveWVjdG9HVEQge1xuICBpZDogc3RyaW5nO1xuICB0aXR1bG86IHN0cmluZztcbiAgcGF0aDogc3RyaW5nO1xuICBjYW1wYW5hczogQ2FtcGFuYVtdO1xuICBoaXRzOiBudW1iZXI7XG4gIGVzdGFkbzogc3RyaW5nO1xuICBhbGlhcz86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDb21wb25lbnRlIHBhcmEgZ2VzdGlvbmFyIHkgbW9zdHJhciBsYSBqZXJhcnF1XHUwMEVEYSBkZSBQcm95ZWN0b3MgR1REIHkgc3VzIENhbXBhXHUwMEYxYXNcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3llY3RvQ2FtcGFuYXNDb21wb25lbnQge1xuICBwcml2YXRlIHBsdWdpbjogYW55O1xuICBcbiAgY29uc3RydWN0b3IocGx1Z2luOiBhbnkpIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBQcm95ZWN0b0NhbXBhbmFzQ29tcG9uZW50IGluaWNpYWRvXCIpO1xuICB9XG4gIFxuICAvKipcbiAgICogR2VuZXJhIHVuIGNvbXBvbmVudGUgdmlzdWFsIHBhcmEgbW9zdHJhciBsYSByZWxhY2lcdTAwRjNuIGVudHJlIFByb3llY3RvcyBHVEQgeSBDYW1wYVx1MDBGMWFzXG4gICAqL1xuICBhc3luYyBnZW5lcmFyKGR2OiBhbnksIG9wdGlvbnM6IHtcbiAgICBtb2RvPzogJ2hpdHMnIHwgJ2ZlY2hhcycsXG4gICAgcHJveWVjdG9BY3R1YWxQYXRoPzogc3RyaW5nXG4gIH0gPSB7fSk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcbiAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBNXHUwMEU5dG9kbyBnZW5lcmFyIGluaWNpYWRvIGNvbiBvcGNpb25lczpcIiwgb3B0aW9ucyk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlc29sdmVyIG9wY2lvbmVzIGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvc1xuICAgICAgY29uc3QgY29uZmlndXJhY2lvbiA9IHtcbiAgICAgICAgbW9kbzogb3B0aW9ucy5tb2RvIHx8ICdoaXRzJyxcbiAgICAgICAgcHJveWVjdG9BY3R1YWxQYXRoOiBvcHRpb25zLnByb3llY3RvQWN0dWFsUGF0aCB8fCBkdi5jdXJyZW50KCk/LmZpbGU/LnBhdGhcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIENvbmZpZ3VyYWNpXHUwMEYzbiBmaW5hbDpcIiwgY29uZmlndXJhY2lvbik7XG5cbiAgICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgICBjb25zdCBjb250YWluZXIgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ3Byb3llY3RvLWNhbXBhbmFzLWNvbnRhaW5lcidcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBBXHUwMEYxYWRpciBlbmNhYmV6YWRvIHByaW5jaXBhbFxuICAgICAgY29uc3QgaGVhZGluZyA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2gzJywge1xuICAgICAgICBjbGFzc05hbWU6ICdkYXNoYm9hcmQtaGVhZGluZycsXG4gICAgICAgIHRleHRDb250ZW50OiAnRGFzaGJvYXJkIGRlIFByb3llY3RvcyB5IENhbXBhXHUwMEYxYXMnXG4gICAgICB9KTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkaW5nKTtcbiAgICAgIFxuICAgICAgLy8gQWdyZWdhciBjb250cm9sZXNcbiAgICAgIGNvbnN0IGNvbnRyb2xzRGl2ID0gdGhpcy5jcmVhckNvbnRyb2xlcyhjb250YWluZXIsIGNvbmZpZ3VyYWNpb24sIGFzeW5jIChudWV2b01vZG8pID0+IHtcbiAgICAgICAgY29uc3QgbnVldm9Db250YWluZXIgPSBhd2FpdCB0aGlzLmdlbmVyYXIoZHYsIHsgXG4gICAgICAgICAgLi4uY29uZmlndXJhY2lvbixcbiAgICAgICAgICBtb2RvOiBudWV2b01vZG8gYXMgJ2hpdHMnIHwgJ2ZlY2hhcydcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobnVldm9Db250YWluZXIsIGNvbnRhaW5lcik7XG4gICAgICB9KTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250cm9sc0Rpdik7XG4gICAgICBcbiAgICAgIC8vIEFcdTAwRjFhZGlyIGluZGljYWRvciBkZSBjYXJnYVxuICAgICAgY29uc3QgbG9hZGluZ0RpdiA9IERPTVV0aWxzLmNyZWF0ZUxvYWRpbmdJbmRpY2F0b3IoXCJDYXJnYW5kbyBkYXRvcyBkZSBwcm95ZWN0b3MgeSBjYW1wYVx1MDBGMWFzLi4uXCIpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdEaXYpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBJbmljaWFuZG8gY2FyZ2EgZGUgZGF0b3NcIik7XG4gICAgICAgIC8vIFNpIGVzdGFtb3MgdmllbmRvIHVuIHByb3llY3RvIGVzcGVjXHUwMEVEZmljbywgc29sbyBtb3N0cmFyIGVzZVxuICAgICAgICBsZXQgcHJveWVjdG9zOiBQcm95ZWN0b0dURFtdID0gW107XG4gICAgICAgIGxldCBlc3RhRW5Qcm95ZWN0byA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbmZpZ3VyYWNpb24ucHJveWVjdG9BY3R1YWxQYXRoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdUREMEQgQnVzY2FuZG8gcHJveWVjdG8gYWN0dWFsOlwiLCBjb25maWd1cmFjaW9uLnByb3llY3RvQWN0dWFsUGF0aCk7XG4gICAgICAgICAgY29uc3QgYXJjaGl2b0FjdHVhbCA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY29uZmlndXJhY2lvbi5wcm95ZWN0b0FjdHVhbFBhdGgpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChhcmNoaXZvQWN0dWFsKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBBcmNoaXZvIGVuY29udHJhZG86XCIsIGFyY2hpdm9BY3R1YWwucGF0aCk7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YUFjdHVhbCA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvQWN0dWFsKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBGcm9udG1hdHRlciBkZWwgYXJjaGl2bzpcIiwgbWV0YWRhdGFBY3R1YWwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgbGEgbm90YSBhY3R1YWwgZXMgdW4gUHJveWVjdG8gR1REXG4gICAgICAgICAgICBpZiAobWV0YWRhdGFBY3R1YWwgJiYgbWV0YWRhdGFBY3R1YWwudHlwZSA9PT0gXCJQR1REXCIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdUREMEQgTGEgbm90YSBhY3R1YWwgZXMgdW4gUEdURFwiKTtcbiAgICAgICAgICAgICAgZXN0YUVuUHJveWVjdG8gPSB0cnVlO1xuICAgICAgICAgICAgICAvLyBPYnRlbmVyIHNvbG8gZXN0ZSBwcm95ZWN0b1xuICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b0luZm8gPSBhd2FpdCB0aGlzLm9idGVuZXJEYXRvc1Byb3llY3RvKGR2LCBhcmNoaXZvQWN0dWFsLCBjb25maWd1cmFjaW9uLm1vZG8pO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBQcm95ZWN0byBpbmZvOlwiLCBwcm95ZWN0b0luZm8pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKHByb3llY3RvSW5mbykge1xuICAgICAgICAgICAgICAgIHByb3llY3RvcyA9IFtwcm95ZWN0b0luZm9dO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIFByb3llY3RvIGFcdTAwRjFhZGlkbyBhIGxpc3RhLiBOXHUwMEZBbWVybyBkZSBjYW1wYVx1MDBGMWFzOlwiLCBwcm95ZWN0b0luZm8uY2FtcGFuYXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBObyBzZSBlbmNvbnRyXHUwMEYzIGluZm9ybWFjaVx1MDBGM24gZGVsIHByb3llY3RvXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBMYSBub3RhIGFjdHVhbCBOTyBlcyB1biBQR1RELCBlczpcIiwgbWV0YWRhdGFBY3R1YWw/LnR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBBcmNoaXZvIGFjdHVhbCBubyBlbmNvbnRyYWRvXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gZXN0YW1vcyBlbiB1biBwcm95ZWN0byBvIG5vIHNlIHB1ZG8gb2J0ZW5lciBsYSBpbmZvcm1hY2lcdTAwRjNuLCBvYnRlbmVyIHRvZG9zXG4gICAgICAgIGlmICghZXN0YUVuUHJveWVjdG8gfHwgcHJveWVjdG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIE9idGVuaWVuZG8gdG9kb3MgbG9zIHByb3llY3Rvc1wiKTtcbiAgICAgICAgICBwcm95ZWN0b3MgPSBhd2FpdCB0aGlzLm9idGVuZXJUb2Rvc0xvc1Byb3llY3RvcyhkdiwgY29uZmlndXJhY2lvbi5tb2RvKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBQcm95ZWN0b3Mgb2J0ZW5pZG9zOlwiLCBwcm95ZWN0b3MubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRWxpbWluYXIgZWwgaW5kaWNhZG9yIGRlIGNhcmdhXG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChsb2FkaW5nRGl2KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGhheSBwcm95ZWN0b3NcbiAgICAgICAgaWYgKHByb3llY3Rvcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBObyBzZSBlbmNvbnRyYXJvbiBwcm95ZWN0b3MgY29uIGNhbXBhXHUwMEYxYXNcIik7XG4gICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6ICdlbXB0eS1tZXNzYWdlJyxcbiAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IFwiTm8gc2UgZW5jb250cmFyb24gcHJveWVjdG9zIGNvbiBjYW1wYVx1MDBGMWFzIGFzb2NpYWRhcy5cIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIFByb3llY3RvcyBwYXJhIHJlbmRlcml6YXI6XCIsIHByb3llY3Rvcy5sZW5ndGgpO1xuICAgICAgICAvLyBSZXN1bWVuIGRlIHByb3llY3RvcyB5IGNhbXBhXHUwMEYxYXNcbiAgICAgICAgcHJveWVjdG9zLmZvckVhY2goKHByb3ksIGlkeCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgUHJveWVjdG8gJHtpZHggKyAxfTpgLCB7XG4gICAgICAgICAgICB0aXR1bG86IHByb3kudGl0dWxvLFxuICAgICAgICAgICAgcGF0aDogcHJveS5wYXRoLFxuICAgICAgICAgICAgbnVtQ2FtcGFuYXM6IHByb3kuY2FtcGFuYXMubGVuZ3RoXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBkZSBlc3RhZFx1MDBFRHN0aWNhcyBnbG9iYWxlc1xuICAgICAgICBjb25zdCBzdGF0c0NvbnRhaW5lciA9IHRoaXMuY3JlYXJFc3RhZGlzdGljYXNHbG9iYWxlcyhwcm95ZWN0b3MpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHNDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIFx1MDBFMXJib2wgamVyXHUwMEUxcnF1aWNvIGRlIHByb3llY3RvcyB5IGNhbXBhXHUwMEYxYXNcbiAgICAgICAgY29uc3QgamVyYXJxdWlhQ29udGFpbmVyID0gdGhpcy5jcmVhclZpc3RhSmVyYXJxdWljYShwcm95ZWN0b3MsIGNvbmZpZ3VyYWNpb24ubW9kbyk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChqZXJhcnF1aWFDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIEVsaW1pbmFyIGVsIGluZGljYWRvciBkZSBjYXJnYVxuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQobG9hZGluZ0Rpdik7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmVycm9yKFwiXHVEODNEXHVERDBEIEVycm9yIGFsIGNhcmdhciBkYXRvczpcIiwgZXJyb3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9zdHJhciBtZW5zYWplIGRlIGVycm9yXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChcbiAgICAgICAgICBET01VdGlscy5jcmVhdGVFcnJvck1lc3NhZ2UoXG4gICAgICAgICAgICBgRXJyb3IgYWwgY2FyZ2FyIGRhdG9zIGRlIHByb3llY3RvcyB5IGNhbXBhXHUwMEYxYXM6ICR7ZXJyb3IubWVzc2FnZX1gLFxuICAgICAgICAgICAgXCJSZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLlwiXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiXHVEODNEXHVERDBEIEVycm9yIGdlbmVyYWwgZW4gZ2VuZXJhcjpcIiwgZXJyb3IpO1xuICAgICAgXG4gICAgICAvLyBEZXZvbHZlciB1biBtZW5zYWplIGRlIGVycm9yXG4gICAgICByZXR1cm4gRE9NVXRpbHMuY3JlYXRlRXJyb3JNZXNzYWdlKFxuICAgICAgICBgRXJyb3IgYWwgZ2VuZXJhciB2aXN0YSBkZSBwcm95ZWN0b3MgeSBjYW1wYVx1MDBGMWFzOiAke2Vycm9yLm1lc3NhZ2V9YCxcbiAgICAgICAgXCJSZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhIGxvcyBjb250cm9sZXMgcGFyYSBjYW1iaWFyIGVsIG1vZG8gZGUgdmlzdWFsaXphY2lcdTAwRjNuXG4gICAqL1xuICBwcml2YXRlIGNyZWFyQ29udHJvbGVzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNvbmZpZzogYW55LCBvbkNhbWJpb01vZG86IChtb2RvOiBzdHJpbmcpID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3QgY29udHJvbHNEaXYgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdkYXNoYm9hcmQtY29udHJvbHMnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQm90XHUwMEYzbiBkZSBtb2RvIEhpdHNcbiAgICBjb25zdCBidG5IaXRzID0gRE9NVXRpbHMuY3JlYXRlQnV0dG9uKFwiVmVyIHBvciBIaXRzXCIsIFxuICAgICAgKCkgPT4gb25DYW1iaW9Nb2RvKCdoaXRzJyksXG4gICAgICB7IFxuICAgICAgICBjbGFzc05hbWU6IGBkYXNoYm9hcmQtYnRuIG1vZGUtYnRuICR7Y29uZmlnLm1vZG8gPT09ICdoaXRzJyA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgaWNvbjogJ1x1RDgzRFx1RENDQSdcbiAgICAgIH1cbiAgICApO1xuICAgIFxuICAgIC8vIEJvdFx1MDBGM24gZGUgbW9kbyBGZWNoYXNcbiAgICBjb25zdCBidG5GZWNoYXMgPSBET01VdGlscy5jcmVhdGVCdXR0b24oXCJWZXIgcG9yIEZlY2hhc1wiLCBcbiAgICAgICgpID0+IG9uQ2FtYmlvTW9kbygnZmVjaGFzJyksXG4gICAgICB7IFxuICAgICAgICBjbGFzc05hbWU6IGBkYXNoYm9hcmQtYnRuIG1vZGUtYnRuICR7Y29uZmlnLm1vZG8gPT09ICdmZWNoYXMnID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgICAgICBpY29uOiAnXHVEODNEXHVEQ0M1J1xuICAgICAgfVxuICAgICk7XG4gICAgXG4gICAgLy8gQm90XHUwMEYzbiBwYXJhIHJlZnJlc2NhclxuICAgIGNvbnN0IHJlZnJlc2hCdG4gPSBET01VdGlscy5jcmVhdGVCdXR0b24oXCJBY3R1YWxpemFyXCIsXG4gICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGR2ID0gd2luZG93LkRhdGF2aWV3QVBJOyAvLyBBY2NlZGVyIGEgbGEgQVBJIGRlIGRhdGF2aWV3IHNpIGVzdFx1MDBFMSBkaXNwb25pYmxlXG4gICAgICAgIGlmIChkdikge1xuICAgICAgICAgIGNvbnN0IG51ZXZvQ29udGFpbmVyID0gYXdhaXQgdGhpcy5nZW5lcmFyKGR2LCBjb25maWcpO1xuICAgICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobnVldm9Db250YWluZXIsIGNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IGNsYXNzTmFtZTogJ2Rhc2hib2FyZC1idG4gcmVmcmVzaC1idG4nLCBpY29uOiAnXHVEODNEXHVERDA0JyB9XG4gICAgKTtcbiAgICBcbiAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChidG5IaXRzKTtcbiAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChidG5GZWNoYXMpO1xuICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKHJlZnJlc2hCdG4pO1xuICAgIFxuICAgIHJldHVybiBjb250cm9sc0RpdjtcbiAgfVxuXG4vKipcbiAqIENyZWEgdW4gY29udGVuZWRvciBjb24gZXN0YWRcdTAwRURzdGljYXMgZ2xvYmFsZXNcbiAqL1xucHJpdmF0ZSBjcmVhckVzdGFkaXN0aWNhc0dsb2JhbGVzKHByb3llY3RvczogUHJveWVjdG9HVERbXSk6IEhUTUxFbGVtZW50IHtcbiAgY29uc3Qgc3RhdHNDb250YWluZXIgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAnZGFzaGJvYXJkLXN0YXRzLWNvbnRhaW5lcidcbiAgfSk7XG4gIFxuICAvLyBDYWxjdWxhciBlc3RhZFx1MDBFRHN0aWNhcyBnbG9iYWxlc1xuICBjb25zdCB0b3RhbFByb3llY3RvcyA9IHByb3llY3Rvcy5sZW5ndGg7XG4gIFxuICAvLyBDb250YXIgZWxlbWVudG9zIHBvciBlc3RhZG9cbiAgbGV0IHRvdGFsUHJveWVjdG9zQWN0aXZvcyA9IDA7XG4gIGxldCB0b3RhbFByb3llY3Rvc1N1c3BlbmRpZG9zID0gMDtcbiAgbGV0IHRvdGFsUHJveWVjdG9zQXJjaGl2YWRvcyA9IDA7XG4gIGxldCB0b3RhbFByb3llY3Rvc0NhbmNlbGFkb3MgPSAwO1xuICBcbiAgbGV0IHRvdGFsQ2FtcGFuYXMgPSAwO1xuICBsZXQgdG90YWxDYW1wYW5hc0FjdGl2YXMgPSAwO1xuICBsZXQgdG90YWxDYW1wYW5hc1N1c3BlbmRpZGFzID0gMDtcbiAgbGV0IHRvdGFsQ2FtcGFuYXNBcmNoaXZhZGFzID0gMDtcbiAgbGV0IHRvdGFsQ2FtcGFuYXNDYW5jZWxhZGFzID0gMDtcbiAgXG4gIGxldCB0b3RhbEVudHJlZ2FibGVzID0gMDtcbiAgbGV0IHRvdGFsRW50cmVnYWJsZXNBY3Rpdm9zID0gMDtcbiAgbGV0IHRvdGFsRW50cmVnYWJsZXNTdXNwZW5kaWRvcyA9IDA7XG4gIGxldCB0b3RhbEVudHJlZ2FibGVzQXJjaGl2YWRvcyA9IDA7XG4gIGxldCB0b3RhbEVudHJlZ2FibGVzQ2FuY2VsYWRvcyA9IDA7XG4gIFxuICBsZXQgdG90YWxIaXRzID0gMDtcbiAgbGV0IHRvdGFsSGl0c0FjdGl2b3MgPSAwO1xuICBsZXQgdG90YWxIaXRzQXJjaGl2YWRvcyA9IDA7XG4gIFxuICBsZXQgZW50cmVnYWJsZXNWZW5jaWRvcyA9IDA7XG4gIGxldCBlbnRyZWdhYmxlc1BvclZlbmNlciA9IDA7IC8vIFByXHUwMEYzeGltb3MgYSB2ZW5jZXIgKDMgZFx1MDBFRGFzIG8gbWVub3MpXG4gIFxuICBwcm95ZWN0b3MuZm9yRWFjaChwcm95ZWN0byA9PiB7XG4gICAgLy8gQ29udGFiaWxpemFyIHByb3llY3RvcyBwb3IgZXN0YWRvXG4gICAgc3dpdGNoKHByb3llY3RvLmVzdGFkbykge1xuICAgICAgY2FzZSBcIlx1RDgzRFx1REZFMlwiOiB0b3RhbFByb3llY3Rvc0FjdGl2b3MrKzsgYnJlYWs7XG4gICAgICBjYXNlIFwiXHVEODNEXHVERkUxXCI6IHRvdGFsUHJveWVjdG9zU3VzcGVuZGlkb3MrKzsgYnJlYWs7XG4gICAgICBjYXNlIFwiXHVEODNEXHVERDM1XCI6IHRvdGFsUHJveWVjdG9zQXJjaGl2YWRvcysrOyBicmVhaztcbiAgICAgIGNhc2UgXCJcdUQ4M0RcdUREMzRcIjogdG90YWxQcm95ZWN0b3NDYW5jZWxhZG9zKys7IGJyZWFrO1xuICAgIH1cbiAgICBcbiAgICB0b3RhbENhbXBhbmFzICs9IHByb3llY3RvLmNhbXBhbmFzLmxlbmd0aDtcbiAgICBcbiAgICAvLyBDb250YWJpbGl6YXIgaGl0cyBkZSBwcm95ZWN0b3MgYWN0aXZvcyB5IGFyY2hpdmFkb3NcbiAgICBpZiAocHJveWVjdG8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICB0b3RhbEhpdHNBY3Rpdm9zICs9IHByb3llY3RvLmhpdHM7XG4gICAgfSBlbHNlIGlmIChwcm95ZWN0by5lc3RhZG8gPT09IFwiXHVEODNEXHVERDM1XCIpIHtcbiAgICAgIHRvdGFsSGl0c0FyY2hpdmFkb3MgKz0gcHJveWVjdG8uaGl0cztcbiAgICB9XG4gICAgXG4gICAgdG90YWxIaXRzICs9IHByb3llY3RvLmhpdHM7XG4gICAgXG4gICAgcHJveWVjdG8uY2FtcGFuYXMuZm9yRWFjaChjYW1wYW5hID0+IHtcbiAgICAgIC8vIENvbnRhYmlsaXphciBjYW1wYVx1MDBGMWFzIHBvciBlc3RhZG9cbiAgICAgIHN3aXRjaChjYW1wYW5hLmVzdGFkbykge1xuICAgICAgICBjYXNlIFwiXHVEODNEXHVERkUyXCI6IHRvdGFsQ2FtcGFuYXNBY3RpdmFzKys7IGJyZWFrO1xuICAgICAgICBjYXNlIFwiXHVEODNEXHVERkUxXCI6IHRvdGFsQ2FtcGFuYXNTdXNwZW5kaWRhcysrOyBicmVhaztcbiAgICAgICAgY2FzZSBcIlx1RDgzRFx1REQzNVwiOiB0b3RhbENhbXBhbmFzQXJjaGl2YWRhcysrOyBicmVhaztcbiAgICAgICAgY2FzZSBcIlx1RDgzRFx1REQzNFwiOiB0b3RhbENhbXBhbmFzQ2FuY2VsYWRhcysrOyBicmVhaztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdG90YWxFbnRyZWdhYmxlcyArPSBjYW1wYW5hLmVudHJlZ2FibGVzLmxlbmd0aDtcbiAgICAgIFxuICAgICAgY2FtcGFuYS5lbnRyZWdhYmxlcy5mb3JFYWNoKGVudHJlZ2FibGUgPT4ge1xuICAgICAgICAvLyBDb250YWJpbGl6YXIgZW50cmVnYWJsZXMgcG9yIGVzdGFkb1xuICAgICAgICBzd2l0Y2goZW50cmVnYWJsZS5lc3RhZG8pIHtcbiAgICAgICAgICBjYXNlIFwiXHVEODNEXHVERkUyXCI6IHRvdGFsRW50cmVnYWJsZXNBY3Rpdm9zKys7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJcdUQ4M0RcdURGRTFcIjogdG90YWxFbnRyZWdhYmxlc1N1c3BlbmRpZG9zKys7IGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJcdUQ4M0RcdUREMzVcIjogdG90YWxFbnRyZWdhYmxlc0FyY2hpdmFkb3MrKzsgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlx1RDgzRFx1REQzNFwiOiB0b3RhbEVudHJlZ2FibGVzQ2FuY2VsYWRvcysrOyBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAvLyBDb250YWJpbGl6YXIgZW50cmVnYWJsZXMgdmVuY2lkb3MgbyBwb3IgdmVuY2VyIHNlZ1x1MDBGQW4gZXN0YWRvXG4gICAgICBpZiAoZW50cmVnYWJsZS5kaWZlcmVuY2lhRGlhcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIFNvbG8gbG9zIGVudHJlZ2FibGVzIGFjdGl2b3MgKFx1RDgzRFx1REZFMikgbyBwYXVzYWRvcyAoXHVEODNEXHVERkUxKSBwdWVkZW4gZXN0YXIgdmVuY2lkb3NcbiAgICAgICAgaWYgKGVudHJlZ2FibGUuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiIHx8IGVudHJlZ2FibGUuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMVwiKSB7XG4gICAgICAgICAgaWYgKGVudHJlZ2FibGUuZGlmZXJlbmNpYURpYXMgPCAwKSB7XG4gICAgICAgICAgICBlbnRyZWdhYmxlc1ZlbmNpZG9zKys7XG4gICAgICAgICAgfSBlbHNlIGlmIChlbnRyZWdhYmxlLmRpZmVyZW5jaWFEaWFzIDw9IDMpIHtcbiAgICAgICAgICAgIGVudHJlZ2FibGVzUG9yVmVuY2VyKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIExvcyBlbnRyZWdhYmxlcyBhcmNoaXZhZG9zIChcdUQ4M0RcdUREMzUpIG8gY2FuY2VsYWRvcyAoXHVEODNEXHVERDM0KSBudW5jYSBjdWVudGFuIGNvbW8gdmVuY2lkb3NcbiAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIEVzdGFkXHUwMEVEc3RpY2FzIGdsb2JhbGVzOlwiLCB7XG4gICAgdG90YWxQcm95ZWN0b3MsXG4gICAgdG90YWxDYW1wYW5hcyxcbiAgICB0b3RhbEVudHJlZ2FibGVzLFxuICAgIHRvdGFsSGl0cyxcbiAgICBlbnRyZWdhYmxlc1ZlbmNpZG9zLFxuICAgIGVudHJlZ2FibGVzUG9yVmVuY2VyLFxuICAgIGRlc2dsb3NlOiB7XG4gICAgICBwcm95ZWN0b3M6IHsgYWN0aXZvczogdG90YWxQcm95ZWN0b3NBY3Rpdm9zLCBzdXNwZW5kaWRvczogdG90YWxQcm95ZWN0b3NTdXNwZW5kaWRvcywgYXJjaGl2YWRvczogdG90YWxQcm95ZWN0b3NBcmNoaXZhZG9zLCBjYW5jZWxhZG9zOiB0b3RhbFByb3llY3Rvc0NhbmNlbGFkb3MgfSxcbiAgICAgIGNhbXBhbmFzOiB7IGFjdGl2YXM6IHRvdGFsQ2FtcGFuYXNBY3RpdmFzLCBzdXNwZW5kaWRhczogdG90YWxDYW1wYW5hc1N1c3BlbmRpZGFzLCBhcmNoaXZhZGFzOiB0b3RhbENhbXBhbmFzQXJjaGl2YWRhcywgY2FuY2VsYWRhczogdG90YWxDYW1wYW5hc0NhbmNlbGFkYXMgfSxcbiAgICAgIGVudHJlZ2FibGVzOiB7IGFjdGl2b3M6IHRvdGFsRW50cmVnYWJsZXNBY3Rpdm9zLCBzdXNwZW5kaWRvczogdG90YWxFbnRyZWdhYmxlc1N1c3BlbmRpZG9zLCBhcmNoaXZhZG9zOiB0b3RhbEVudHJlZ2FibGVzQXJjaGl2YWRvcywgY2FuY2VsYWRvczogdG90YWxFbnRyZWdhYmxlc0NhbmNlbGFkb3MgfSxcbiAgICAgIGhpdHM6IHsgYWN0aXZvczogdG90YWxIaXRzQWN0aXZvcywgYXJjaGl2YWRvczogdG90YWxIaXRzQXJjaGl2YWRvcyB9XG4gICAgfVxuICB9KTtcbiAgXG4gIC8vIENyZWFyIHRhcmpldGFzIGRlIGVzdGFkXHUwMEVEc3RpY2FzIHByaW5jaXBhbGVzXG4gIHRoaXMuY3JlYXJUYXJqZXRhRXN0YWRpc3RpY2Eoc3RhdHNDb250YWluZXIsIFwiXHVEODNEXHVEQ0MyXCIsIFwiUHJveWVjdG9zXCIsIHRvdGFsUHJveWVjdG9zKTtcbiAgdGhpcy5jcmVhclRhcmpldGFFc3RhZGlzdGljYShzdGF0c0NvbnRhaW5lciwgXCJcdUQ4M0RcdURDQ0FcIiwgXCJDYW1wYVx1MDBGMWFzXCIsIHRvdGFsQ2FtcGFuYXMpO1xuICB0aGlzLmNyZWFyVGFyamV0YUVzdGFkaXN0aWNhKHN0YXRzQ29udGFpbmVyLCBcIlx1RDgzRFx1RENDNFwiLCBcIkVudHJlZ2FibGVzXCIsIHRvdGFsRW50cmVnYWJsZXMpO1xuICBcbiAgLy8gQ0FNQklPOiBNb3N0cmFyIHRvdGFsIGRlIGhpdHMgZGUgYWN0aXZvcyB5IGFyY2hpdmFkb3NcbiAgY29uc3QgZXRpcXVldGFIaXRzID0gYFRvdGFsIEhpdHMke3RvdGFsSGl0c0FyY2hpdmFkb3MgPiAwID8gJyonIDogJyd9YDtcbiAgdGhpcy5jcmVhclRhcmpldGFFc3RhZGlzdGljYShzdGF0c0NvbnRhaW5lciwgXCJcdUQ4M0RcdURDNDFcdUZFMEZcIiwgZXRpcXVldGFIaXRzLCB0b3RhbEhpdHMpO1xuICBcbiAgaWYgKGVudHJlZ2FibGVzVmVuY2lkb3MgPiAwKSB7XG4gICAgdGhpcy5jcmVhclRhcmpldGFFc3RhZGlzdGljYShzdGF0c0NvbnRhaW5lciwgXCJcdTI2QTBcdUZFMEZcIiwgXCJWZW5jaWRvc1wiLCBlbnRyZWdhYmxlc1ZlbmNpZG9zLCBcIiNlNzRjM2NcIik7XG4gIH1cbiAgXG4gIGlmIChlbnRyZWdhYmxlc1BvclZlbmNlciA+IDApIHtcbiAgICB0aGlzLmNyZWFyVGFyamV0YUVzdGFkaXN0aWNhKHN0YXRzQ29udGFpbmVyLCBcIlx1MjNGMFwiLCBcIlBvciB2ZW5jZXJcIiwgZW50cmVnYWJsZXNQb3JWZW5jZXIsIFwiI2YzOWMxMlwiKTtcbiAgfVxuICBcbiAgLy8gQ0FNQklPOiBBZ3JlZ2FyIG5vdGEgc29icmUgZWwgY1x1MDBFMWxjdWxvIGRlIGhpdHMgc2kgYXBsaWNhXG4gIGlmICh0b3RhbEhpdHNBcmNoaXZhZG9zID4gMCkge1xuICAgIGNvbnN0IG5vdGFIaXRzID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnaGl0cy1ub3RlJyxcbiAgICAgIHRleHRDb250ZW50OiBcIiogRWwgdG90YWwgaW5jbHV5ZSBoaXRzIGRlIGVsZW1lbnRvcyBhY3Rpdm9zIHkgYXJjaGl2YWRvc1wiLFxuICAgICAgc3R5bGVzOiB7XG4gICAgICAgIGZvbnRTaXplOiAnMC44ZW0nLFxuICAgICAgICBjb2xvcjogJ3ZhcigtLXRleHQtbXV0ZWQpJyxcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgbWFyZ2luVG9wOiAnOHB4J1xuICAgICAgfVxuICAgIH0pO1xuICAgIHN0YXRzQ29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGFIaXRzKTtcbiAgfVxuICBcbiAgcmV0dXJuIHN0YXRzQ29udGFpbmVyO1xufVxuICBcbiAgLyoqXG4gICAqIENyZWEgdW5hIHRhcmpldGEgZGUgZXN0YWRcdTAwRURzdGljYVxuICAgKi9cbiAgcHJpdmF0ZSBjcmVhclRhcmpldGFFc3RhZGlzdGljYShcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LCBcbiAgICBpY29ubzogc3RyaW5nLCBcbiAgICB0aXR1bG86IHN0cmluZywgXG4gICAgdmFsb3I6IG51bWJlciB8IHN0cmluZyxcbiAgICBjb2xvckRlc3RhY2Fkbz86IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBjb25zdCB0YXJqZXRhID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnc3RhdHMtY2FyZCdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTaSBoYXkgY29sb3IgZGVzdGFjYWRvLCBhcGxpY2FybG9cbiAgICBpZiAoY29sb3JEZXN0YWNhZG8pIHtcbiAgICAgIHRhcmpldGEuc3R5bGUuYm9yZGVyTGVmdCA9IGA0cHggc29saWQgJHtjb2xvckRlc3RhY2Fkb31gO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBpY29ub0VsID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnc3RhdHMtY2FyZC1pY29uJyxcbiAgICAgIHRleHRDb250ZW50OiBpY29ub1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IGluZm9Db250YWluZXIgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdzdGF0cy1jYXJkLWluZm8nXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgdGl0dWxvRWwgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdzdGF0cy1jYXJkLXRpdGxlJyxcbiAgICAgIHRleHRDb250ZW50OiB0aXR1bG9cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCB2YWxvckVsID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnc3RhdHMtY2FyZC12YWx1ZScsXG4gICAgICB0ZXh0Q29udGVudDogdmFsb3IudG9TdHJpbmcoKVxuICAgIH0pO1xuICAgIFxuICAgIC8vIFNpIGhheSBjb2xvciBkZXN0YWNhZG8sIGFwbGljYXJsbyB0YW1iaVx1MDBFOW4gYWwgdmFsb3JcbiAgICBpZiAoY29sb3JEZXN0YWNhZG8pIHtcbiAgICAgIHZhbG9yRWwuc3R5bGUuY29sb3IgPSBjb2xvckRlc3RhY2FkbztcbiAgICB9XG4gICAgXG4gICAgaW5mb0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aXR1bG9FbCk7XG4gICAgaW5mb0NvbnRhaW5lci5hcHBlbmRDaGlsZCh2YWxvckVsKTtcbiAgICBcbiAgICB0YXJqZXRhLmFwcGVuZENoaWxkKGljb25vRWwpO1xuICAgIHRhcmpldGEuYXBwZW5kQ2hpbGQoaW5mb0NvbnRhaW5lcik7XG4gICAgXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhcmpldGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWEgbGEgdmlzdGEgamVyXHUwMEUxcnF1aWNhIGRlIHByb3llY3RvcyB5IGNhbXBhXHUwMEYxYXNcbiAgICovXG4gIHByaXZhdGUgY3JlYXJWaXN0YUplcmFycXVpY2EocHJveWVjdG9zOiBQcm95ZWN0b0dURFtdLCBtb2RvOiAnaGl0cycgfCAnZmVjaGFzJyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdqZXJhcnF1aWEtY29udGFpbmVyJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIE9yZGVuYXIgcHJveWVjdG9zIHNlZ1x1MDBGQW4gZWwgbW9kb1xuICAgIGNvbnN0IHByb3llY3Rvc09yZGVuYWRvcyA9IHRoaXMub3JkZW5hclByb3llY3Rvcyhwcm95ZWN0b3MsIG1vZG8pO1xuICAgIFxuICAgIC8vIENyZWFyIHNlY2NpXHUwMEYzbiBwYXJhIGNhZGEgcHJveWVjdG9cbiAgICBwcm95ZWN0b3NPcmRlbmFkb3MuZm9yRWFjaCgocHJveWVjdG8sIGlkeCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBSZW5kZXJpemFuZG8gcHJveWVjdG8gJHtpZHggKyAxfTogJHtwcm95ZWN0by50aXR1bG99IGNvbiAke3Byb3llY3RvLmNhbXBhbmFzLmxlbmd0aH0gY2FtcGFcdTAwRjFhc2ApO1xuICAgICAgY29uc3QgcHJveWVjdG9TZWN0aW9uID0gdGhpcy5jcmVhclNlY2Npb25Qcm95ZWN0byhwcm95ZWN0bywgbW9kbyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocHJveWVjdG9TZWN0aW9uKTtcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG4gIFxuXG4gIC8qKlxuICAgKiBDcmVhIHVuYSBzZWNjaVx1MDBGM24gcGFyYSB1biBwcm95ZWN0b1xuICAgKi9cbiAgcHJpdmF0ZSBjcmVhclNlY2Npb25Qcm95ZWN0byhwcm95ZWN0bzogUHJveWVjdG9HVEQsIG1vZG86ICdoaXRzJyB8ICdmZWNoYXMnKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgQ3JlYW5kbyBzZWNjaVx1MDBGM24gcGFyYSBwcm95ZWN0bzogJHtwcm95ZWN0by50aXR1bG99LiBDYW1wYVx1MDBGMWFzOiAke3Byb3llY3RvLmNhbXBhbmFzLmxlbmd0aH1gKTtcbiAgICBcbiAgICBjb25zdCBwcm95ZWN0b1NlY3Rpb24gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkZXRhaWxzJywge1xuICAgICAgY2xhc3NOYW1lOiAncHJveWVjdG8tc2VjdGlvbicsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdvcGVuJzogJ3RydWUnIC8vIEFiaWVydG8gcG9yIGRlZmVjdG9cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDcmVhciBlbmNhYmV6YWRvIGRlbCBwcm95ZWN0byAoc3VtbWFyeSlcbiAgICBjb25zdCBwcm95ZWN0b0hlYWRlciA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3N1bW1hcnknLCB7XG4gICAgICBjbGFzc05hbWU6ICdwcm95ZWN0by1oZWFkZXInXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgZXN0YWRvXG4gICAgaWYgKHByb3llY3RvLmVzdGFkbykge1xuICAgICAgY29uc3QgZXN0YWRvU3BhbiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2VzdGFkby1iYWRnZScsXG4gICAgICAgIHRleHRDb250ZW50OiBwcm95ZWN0by5lc3RhZG9cbiAgICAgIH0pO1xuICAgICAgcHJveWVjdG9IZWFkZXIuYXBwZW5kQ2hpbGQoZXN0YWRvU3Bhbik7XG4gICAgfVxuICAgIFxuICAgIC8vIFRcdTAwRUR0dWxvIGNvbiBlbmxhY2VcbiAgICB0cnkge1xuICAgICAgY29uc3QgdGl0dWxvQ29udGFpbmVyID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICBjbGFzc05hbWU6ICdwcm95ZWN0by10aXR1bG8tY29udGFpbmVyJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGljb25vUHJveWVjdG8gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6ICdwcm95ZWN0by1pY29ubycsXG4gICAgICAgIHRleHRDb250ZW50OiAnXHVEODNEXHVEQ0MyJ1xuICAgICAgfSk7XG4gICAgICB0aXR1bG9Db250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbm9Qcm95ZWN0byk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVubGFjZVByb3llY3RvID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAncHJveWVjdG8tbGluaycsXG4gICAgICAgIHRleHRDb250ZW50OiBwcm95ZWN0by50aXR1bG8gfHwgcHJveWVjdG8uYWxpYXMgfHwgJ1Byb3llY3RvIHNpbiB0XHUwMEVEdHVsbycsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAnZGF0YS1ocmVmJzogcHJveWVjdG8ucGF0aFxuICAgICAgICB9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBjbGljazogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChwcm95ZWN0by5wYXRoLCBcIlwiLCB0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGl0dWxvQ29udGFpbmVyLmFwcGVuZENoaWxkKGVubGFjZVByb3llY3RvKTtcbiAgICAgIFxuICAgICAgcHJveWVjdG9IZWFkZXIuYXBwZW5kQ2hpbGQodGl0dWxvQ29udGFpbmVyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUQ4M0RcdUREMEQgRXJyb3IgYWwgY3JlYXIgZW5sYWNlIGRlbCBwcm95ZWN0bzogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICBjb25zdCB0ZXh0b1Byb3llY3RvID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAncHJveWVjdG8tdGl0dWxvJyxcbiAgICAgICAgdGV4dENvbnRlbnQ6IHByb3llY3RvLnRpdHVsbyB8fCBwcm95ZWN0by5hbGlhcyB8fCAnUHJveWVjdG8gc2luIHRcdTAwRUR0dWxvJ1xuICAgICAgfSk7XG4gICAgICBwcm95ZWN0b0hlYWRlci5hcHBlbmRDaGlsZCh0ZXh0b1Byb3llY3RvKTtcbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRyaWNhcyBkZWwgcHJveWVjdG9cbiAgICBjb25zdCBtZXRyaWNhc0NvbnRhaW5lciA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Byb3llY3RvLW1ldHJpY2FzJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIENvbnRhZG9yIGRlIGNhbXBhXHUwMEYxYXNcbiAgICBjb25zdCBjYW1wYW5hc0NvdW50ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmFzLWNvdW50JyxcbiAgICAgIHRleHRDb250ZW50OiBgJHtwcm95ZWN0by5jYW1wYW5hcy5sZW5ndGh9ICR7cHJveWVjdG8uY2FtcGFuYXMubGVuZ3RoID09PSAxID8gJ2NhbXBhXHUwMEYxYScgOiAnY2FtcGFcdTAwRjFhcyd9YFxuICAgIH0pO1xuICAgIG1ldHJpY2FzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbXBhbmFzQ291bnQpO1xuICAgIFxuICAgIC8vIE1vc3RyYXIgaGl0cyBvIGZlY2hhcyBzZWdcdTAwRkFuIGVsIG1vZG9cbiAgICBpZiAobW9kbyA9PT0gJ2hpdHMnKSB7XG4gICAgICBjb25zdCBoaXRzQ291bnQgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6ICdoaXRzLWNvdW50JyxcbiAgICAgICAgdGV4dENvbnRlbnQ6IGAke3Byb3llY3RvLmhpdHN9IGhpdHNgXG4gICAgICB9KTtcbiAgICAgIG1ldHJpY2FzQ29udGFpbmVyLmFwcGVuZENoaWxkKGhpdHNDb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1vc3RyYXIgZWwgcHJcdTAwRjN4aW1vIHZlbmNpbWllbnRvIHNpIGV4aXN0ZVxuICAgICAgY29uc3QgcHJveGltb1ZlbmNpbWllbnRvID0gdGhpcy5vYnRlbmVyRGlhc1Byb3hpbW9WZW5jaW1pZW50byhwcm95ZWN0byk7XG4gICAgICBpZiAocHJveGltb1ZlbmNpbWllbnRvICE9PSBudWxsKSB7XG4gICAgICAgIC8vIENBTUJJQURPOiBVc2FyIGVsIGVzdGFkbyBkZWwgcHJveWVjdG8gcGFyYSBkZXRlcm1pbmFyIGxhIGNsYXNlIHZpc3VhbFxuICAgICAgICBjb25zdCB2ZW5jaW1pZW50b1NwYW4gPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgIGNsYXNzTmFtZTogYHZlbmNpbWllbnRvLWJhZGdlICR7dGhpcy5vYnRlbmVyQ2xhc2VWZW5jaW1pZW50byhwcm94aW1vVmVuY2ltaWVudG8sIHByb3llY3RvLmVzdGFkbyl9YCxcbiAgICAgICAgICB0ZXh0Q29udGVudDogdGhpcy5mb3JtYXRlYXJEaWFzVmVuY2ltaWVudG8ocHJveGltb1ZlbmNpbWllbnRvLCBwcm95ZWN0by5lc3RhZG8pXG4gICAgICAgIH0pO1xuICAgICAgICBtZXRyaWNhc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh2ZW5jaW1pZW50b1NwYW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgbm8gaGF5IGZlY2hhcyByZWxldmFudGVzLCBtb3N0cmFyIHVuIGluZGljYWRvciBuZXV0cm9cbiAgICAgICAgY29uc3QgdmVuY2ltaWVudG9TcGFuID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICBjbGFzc05hbWU6ICd2ZW5jaW1pZW50by1iYWRnZScsXG4gICAgICAgICAgdGV4dENvbnRlbnQ6ICdTaW4gZmVjaGFzJ1xuICAgICAgICB9KTtcbiAgICAgICAgbWV0cmljYXNDb250YWluZXIuYXBwZW5kQ2hpbGQodmVuY2ltaWVudG9TcGFuKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcHJveWVjdG9IZWFkZXIuYXBwZW5kQ2hpbGQobWV0cmljYXNDb250YWluZXIpO1xuICAgIHByb3llY3RvU2VjdGlvbi5hcHBlbmRDaGlsZChwcm95ZWN0b0hlYWRlcik7XG4gICAgXG4gICAgLy8gQ29udGVuaWRvIGRlbCBwcm95ZWN0byAoY2FtcGFcdTAwRjFhcylcbiAgICBjb25zdCBwcm95ZWN0b0NvbnRlbnQgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICdwcm95ZWN0by1jb250ZW50J1xuICAgIH0pO1xuICAgIFxuICAgIC8vIE9yZGVuYXIgY2FtcGFcdTAwRjFhcyBzZWdcdTAwRkFuIGVsIG1vZG9cbiAgICBjb25zdCBjYW1wYW5hc09yZGVuYWRhcyA9IHRoaXMub3JkZW5hckNhbXBhbmFzKHByb3llY3RvLmNhbXBhbmFzLCBtb2RvKTtcbiAgICBcbiAgICBpZiAoY2FtcGFuYXNPcmRlbmFkYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIFx1MjZBMFx1RkUwRiBFbCBwcm95ZWN0byAke3Byb3llY3RvLnRpdHVsb30gbm8gdGllbmUgY2FtcGFcdTAwRjFhcyBhc29jaWFkYXNgKTtcbiAgICAgIGNvbnN0IGluZm9Ob0RhdGEgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2VtcHR5LW1lc3NhZ2UnLFxuICAgICAgICB0ZXh0Q29udGVudDogXCJFc3RlIHByb3llY3RvIG5vIHRpZW5lIGNhbXBhXHUwMEYxYXMgYXNvY2lhZGFzLlwiXG4gICAgICB9KTtcbiAgICAgIHByb3llY3RvQ29udGVudC5hcHBlbmRDaGlsZChpbmZvTm9EYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBSZW5kZXJpemFuZG8gJHtjYW1wYW5hc09yZGVuYWRhcy5sZW5ndGh9IGNhbXBhXHUwMEYxYXMgcGFyYSBlbCBwcm95ZWN0byAke3Byb3llY3RvLnRpdHVsb31gKTtcbiAgICBcbiAgICAgIC8vIENyZWFyIHNlY2NpXHUwMEYzbiBwYXJhIGNhZGEgY2FtcGFcdTAwRjFhXG4gICAgICBjYW1wYW5hc09yZGVuYWRhcy5mb3JFYWNoKChjYW1wYW5hLCBpZHgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBDcmVhbmRvIGVsZW1lbnRvIHBhcmEgY2FtcGFcdTAwRjFhICR7aWR4ICsgMX06ICR7Y2FtcGFuYS50aXR1bG99YCk7XG4gICAgICAgIGNvbnN0IGNhbXBhbmFFbGVtZW50ID0gdGhpcy5jcmVhckVsZW1lbnRvQ2FtcGFuYShjYW1wYW5hLCBtb2RvKTtcbiAgICAgICAgcHJveWVjdG9Db250ZW50LmFwcGVuZENoaWxkKGNhbXBhbmFFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBwcm95ZWN0b1NlY3Rpb24uYXBwZW5kQ2hpbGQocHJveWVjdG9Db250ZW50KTtcbiAgICBcbiAgICByZXR1cm4gcHJveWVjdG9TZWN0aW9uO1xuICB9XG4gIFxuXG4gIC8qKlxuICAgKiBDcmVhIHVuIGVsZW1lbnRvIHBhcmEgbW9zdHJhciB1bmEgY2FtcGFcdTAwRjFhXG4gICAqL1xuICBwcml2YXRlIGNyZWFyRWxlbWVudG9DYW1wYW5hKGNhbXBhbmE6IENhbXBhbmEsIG1vZG86ICdoaXRzJyB8ICdmZWNoYXMnKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGNhbXBhbmFFbGVtZW50ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGV0YWlscycsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmEtZWxlbWVudCcsXG4gICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICdvcGVuJzogJ3RydWUnIC8vIEFiaWVydG8gcG9yIGRlZmVjdG9cbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBDcmVhciBlbmNhYmV6YWRvIGRlIGxhIGNhbXBhXHUwMEYxYSAoc3VtbWFyeSlcbiAgICBjb25zdCBjYW1wYW5hSGVhZGVyID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3VtbWFyeScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmEtaGVhZGVyJ1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGVzdGFkb1xuICAgIGlmIChjYW1wYW5hLmVzdGFkbykge1xuICAgICAgY29uc3QgZXN0YWRvU3BhbiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2VzdGFkby1iYWRnZScsXG4gICAgICAgIHRleHRDb250ZW50OiBjYW1wYW5hLmVzdGFkb1xuICAgICAgfSk7XG4gICAgICBjYW1wYW5hSGVhZGVyLmFwcGVuZENoaWxkKGVzdGFkb1NwYW4pO1xuICAgIH1cbiAgICBcbiAgICAvLyBUXHUwMEVEdHVsbyBjb24gZW5sYWNlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHRpdHVsb0NvbnRhaW5lciA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY2FtcGFuYS10aXR1bG8tY29udGFpbmVyJ1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGljb25vQ2FtcGFuYSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmEtaWNvbm8nLFxuICAgICAgICB0ZXh0Q29udGVudDogJ1x1RDgzRFx1RENDQSdcbiAgICAgIH0pO1xuICAgICAgdGl0dWxvQ29udGFpbmVyLmFwcGVuZENoaWxkKGljb25vQ2FtcGFuYSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVubGFjZUNhbXBhbmEgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICBjbGFzc05hbWU6ICdjYW1wYW5hLWxpbmsnLFxuICAgICAgICB0ZXh0Q29udGVudDogY2FtcGFuYS50aXR1bG8gfHwgY2FtcGFuYS5hbGlhcyB8fCAnQ2FtcGFcdTAwRjFhIHNpbiB0XHUwMEVEdHVsbycsXG4gICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAnZGF0YS1ocmVmJzogY2FtcGFuYS5wYXRoXG4gICAgICAgIH0sXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgIGNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGNhbXBhbmEucGF0aCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRpdHVsb0NvbnRhaW5lci5hcHBlbmRDaGlsZChlbmxhY2VDYW1wYW5hKTtcbiAgICAgIFxuICAgICAgY2FtcGFuYUhlYWRlci5hcHBlbmRDaGlsZCh0aXR1bG9Db250YWluZXIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFx1RDgzRFx1REQwRCBFcnJvciBhbCBjcmVhciBlbmxhY2UgZGUgY2FtcGFcdTAwRjFhOiAke2UubWVzc2FnZX1gKTtcbiAgICAgIGNvbnN0IHRleHRvQ2FtcGFuYSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmEtdGl0dWxvJyxcbiAgICAgICAgdGV4dENvbnRlbnQ6IGNhbXBhbmEudGl0dWxvIHx8IGNhbXBhbmEuYWxpYXMgfHwgJ0NhbXBhXHUwMEYxYSBzaW4gdFx1MDBFRHR1bG8nXG4gICAgICB9KTtcbiAgICAgIGNhbXBhbmFIZWFkZXIuYXBwZW5kQ2hpbGQodGV4dG9DYW1wYW5hKTtcbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRyaWNhcyBkZSBsYSBjYW1wYVx1MDBGMWFcbiAgICBjb25zdCBtZXRyaWNhc0NvbnRhaW5lciA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2NhbXBhbmEtbWV0cmljYXMnXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ29udGFkb3IgZGUgZW50cmVnYWJsZXNcbiAgICBjb25zdCBlbnRyZWdhYmxlc0NvdW50ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ2VudHJlZ2FibGVzLWNvdW50JyxcbiAgICAgIHRleHRDb250ZW50OiBgJHtjYW1wYW5hLmVudHJlZ2FibGVzLmxlbmd0aH0gJHtjYW1wYW5hLmVudHJlZ2FibGVzLmxlbmd0aCA9PT0gMSA/ICdlbnRyZWdhYmxlJyA6ICdlbnRyZWdhYmxlcyd9YFxuICAgIH0pO1xuICAgIG1ldHJpY2FzQ29udGFpbmVyLmFwcGVuZENoaWxkKGVudHJlZ2FibGVzQ291bnQpO1xuICAgIFxuICAgIC8vIE1vc3RyYXIgaGl0cyBvIGZlY2hhcyBzZWdcdTAwRkFuIGVsIG1vZG9cbiAgICBpZiAobW9kbyA9PT0gJ2hpdHMnKSB7XG4gICAgICBjb25zdCBoaXRzQ291bnQgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6ICdoaXRzLWNvdW50JyxcbiAgICAgICAgdGV4dENvbnRlbnQ6IGAke2NhbXBhbmEuaGl0c30gaGl0c2BcbiAgICAgIH0pO1xuICAgICAgbWV0cmljYXNDb250YWluZXIuYXBwZW5kQ2hpbGQoaGl0c0NvdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTW9zdHJhciBlbCBwclx1MDBGM3hpbW8gdmVuY2ltaWVudG8gc2kgZXhpc3RlXG4gICAgICBpZiAoY2FtcGFuYS5kaWZlcmVuY2lhRGlhc1Byb3hpbW8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBDQU1CSUFETzogUGFzYXIgZWwgZXN0YWRvIGRlIGxhIGNhbXBhXHUwMEYxYSBwYXJhIGRldGVybWluYXIgY29ycmVjdGFtZW50ZSBsYSBjbGFzZSB2aXN1YWxcbiAgICAgICAgY29uc3QgdmVuY2ltaWVudG9TcGFuID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIHtcbiAgICAgICAgICBjbGFzc05hbWU6IGB2ZW5jaW1pZW50by1iYWRnZSAke3RoaXMub2J0ZW5lckNsYXNlVmVuY2ltaWVudG8oY2FtcGFuYS5kaWZlcmVuY2lhRGlhc1Byb3hpbW8sIGNhbXBhbmEuZXN0YWRvKX1gLFxuICAgICAgICAgIHRleHRDb250ZW50OiB0aGlzLmZvcm1hdGVhckRpYXNWZW5jaW1pZW50byhjYW1wYW5hLmRpZmVyZW5jaWFEaWFzUHJveGltbywgY2FtcGFuYS5lc3RhZG8pXG4gICAgICAgIH0pO1xuICAgICAgICBtZXRyaWNhc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh2ZW5jaW1pZW50b1NwYW4pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgbm8gaGF5IGZlY2hhcyBkZSBlbnRyZWdhYmxlcywgbW9zdHJhciB1biBpbmRpY2Fkb3IgbmV1dHJvXG4gICAgICAgIGNvbnN0IHZlbmNpbWllbnRvU3BhbiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAndmVuY2ltaWVudG8tYmFkZ2UnLFxuICAgICAgICAgIHRleHRDb250ZW50OiAnU2luIGZlY2hhcydcbiAgICAgICAgfSk7XG4gICAgICAgIG1ldHJpY2FzQ29udGFpbmVyLmFwcGVuZENoaWxkKHZlbmNpbWllbnRvU3Bhbik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNhbXBhbmFIZWFkZXIuYXBwZW5kQ2hpbGQobWV0cmljYXNDb250YWluZXIpO1xuICAgIGNhbXBhbmFFbGVtZW50LmFwcGVuZENoaWxkKGNhbXBhbmFIZWFkZXIpO1xuICAgIFxuICAgIC8vIENvbnRlbmlkbyBkZSBsYSBjYW1wYVx1MDBGMWEgKGVudHJlZ2FibGVzKVxuICAgIGNvbnN0IGNhbXBhbmFDb250ZW50ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgY2xhc3NOYW1lOiAnY2FtcGFuYS1jb250ZW50J1xuICAgIH0pO1xuICAgIFxuICAgIGlmIChjYW1wYW5hLmVudHJlZ2FibGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBcdTI2QTBcdUZFMEYgTGEgY2FtcGFcdTAwRjFhICR7Y2FtcGFuYS50aXR1bG99IG5vIHRpZW5lIGVudHJlZ2FibGVzIGFzb2NpYWRvc2ApO1xuICAgICAgY29uc3QgaW5mb05vRGF0YSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnZW1wdHktbWVzc2FnZScsXG4gICAgICAgIHRleHRDb250ZW50OiBcIkVzdGEgY2FtcGFcdTAwRjFhIG5vIHRpZW5lIGVudHJlZ2FibGVzIGFzb2NpYWRvcy5cIlxuICAgICAgfSk7XG4gICAgICBjYW1wYW5hQ29udGVudC5hcHBlbmRDaGlsZChpbmZvTm9EYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBSZW5kZXJpemFuZG8gJHtjYW1wYW5hLmVudHJlZ2FibGVzLmxlbmd0aH0gZW50cmVnYWJsZXMgcGFyYSBsYSBjYW1wYVx1MDBGMWEgJHtjYW1wYW5hLnRpdHVsb31gKTtcbiAgICAgIFxuICAgICAgLy8gT3JkZW5hciBlbnRyZWdhYmxlcyBzZWdcdTAwRkFuIGVsIG1vZG9cbiAgICAgIGNvbnN0IGVudHJlZ2FibGVzT3JkZW5hZG9zID0gdGhpcy5vcmRlbmFyRW50cmVnYWJsZXMoY2FtcGFuYS5lbnRyZWdhYmxlcywgbW9kbyk7XG4gICAgICBcbiAgICAgIC8vIENyZWFyIHRhYmxhIGRlIGVudHJlZ2FibGVzXG4gICAgICBjb25zdCB0YWJsYUVudHJlZ2FibGVzID0gdGhpcy5jcmVhclRhYmxhRW50cmVnYWJsZXMoZW50cmVnYWJsZXNPcmRlbmFkb3MsIG1vZG8pO1xuICAgICAgY2FtcGFuYUNvbnRlbnQuYXBwZW5kQ2hpbGQodGFibGFFbnRyZWdhYmxlcyk7XG4gICAgfVxuICAgIFxuICAgIGNhbXBhbmFFbGVtZW50LmFwcGVuZENoaWxkKGNhbXBhbmFDb250ZW50KTtcbiAgICBcbiAgICByZXR1cm4gY2FtcGFuYUVsZW1lbnQ7XG4gIH1cbiAgXG4gXG5cbiAgLyoqXG4gICAqIENyZWEgdW5hIHRhYmxhIHBhcmEgbW9zdHJhciBsb3MgZW50cmVnYWJsZXNcbiAgICovXG4gIHByaXZhdGUgY3JlYXJUYWJsYUVudHJlZ2FibGVzKGVudHJlZ2FibGVzOiBFbnRyZWdhYmxlW10sIG1vZG86ICdoaXRzJyB8ICdmZWNoYXMnKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IHRhYmxhID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICBjbGFzc05hbWU6ICdlbnRyZWdhYmxlcy10YWJsYSdcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDcmVhciBlbmNhYmV6YWRvIGRlIGxhIHRhYmxhXG4gICAgY29uc3QgdGhlYWQgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCd0aGVhZCcpO1xuICAgIGNvbnN0IGhlYWRlclJvdyA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgXG4gICAgLy8gQ29sdW1uYXMgY29tdW5lc1xuICAgIGNvbnN0IGNvbHVtbmFzID0gW1xuICAgICAgeyBpZDogJ2VzdGFkbycsIHRleHRvOiAnRXN0YWRvJywgY2xhc3NOYW1lOiAnY29sLWVzdGFkbycsIHdpZHRoOiAnNDBweCcgfSxcbiAgICAgIHsgaWQ6ICd0aXR1bG8nLCB0ZXh0bzogJ0VudHJlZ2FibGUnLCBjbGFzc05hbWU6ICdjb2wtdGl0dWxvJywgd2lkdGg6ICc1MCUnIH1cbiAgICBdO1xuICAgIFxuICAgIC8vIENvbHVtbmFzIGVzcGVjXHUwMEVEZmljYXMgc2VnXHUwMEZBbiBlbCBtb2RvXG4gICAgaWYgKG1vZG8gPT09ICdoaXRzJykge1xuICAgICAgY29sdW1uYXMucHVzaCh7IGlkOiAnaGl0cycsIHRleHRvOiAnSGl0cycsIGNsYXNzTmFtZTogJ2NvbC1oaXRzJywgd2lkdGg6ICc4MHB4JyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29sdW1uYXMucHVzaCh7IGlkOiAnZmVjaGEnLCB0ZXh0bzogJ1B1YmxpY2FjaVx1MDBGM24nLCBjbGFzc05hbWU6ICdjb2wtZmVjaGEnLCB3aWR0aDogJzEyMHB4JyB9KTtcbiAgICAgIGNvbHVtbmFzLnB1c2goeyBpZDogJ2RpYXMnLCB0ZXh0bzogJ0RcdTAwRURhcycsIGNsYXNzTmFtZTogJ2NvbC1kaWFzJywgd2lkdGg6ICc4MHB4JyB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXIgY2VsZGFzIGRlIGVuY2FiZXphZG9cbiAgICBjb2x1bW5hcy5mb3JFYWNoKGNvbHVtbmEgPT4ge1xuICAgICAgY29uc3QgdGggPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCd0aCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiBjb2x1bW5hLmNsYXNzTmFtZSxcbiAgICAgICAgdGV4dENvbnRlbnQ6IGNvbHVtbmEudGV4dG8sXG4gICAgICAgIHN0eWxlczoge1xuICAgICAgICAgIHdpZHRoOiBjb2x1bW5hLndpZHRoXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKHRoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgIHRhYmxhLmFwcGVuZENoaWxkKHRoZWFkKTtcbiAgICBcbiAgICAvLyBDcmVhciBjdWVycG8gZGUgbGEgdGFibGFcbiAgICBjb25zdCB0Ym9keSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgXG4gICAgLy8gQ3JlYXIgZmlsYXMgcGFyYSBjYWRhIGVudHJlZ2FibGVcbiAgICBlbnRyZWdhYmxlcy5mb3JFYWNoKGVudHJlZ2FibGUgPT4ge1xuICAgICAgY29uc3Qgcm93ID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgndHInLCB7XG4gICAgICAgIGNsYXNzTmFtZTogYGVudHJlZ2FibGUtcm93ICR7dGhpcy5vYnRlbmVyQ2xhc2VQYXJhRXN0YWRvKGVudHJlZ2FibGUuZXN0YWRvKX1gXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ29sdW1uYXMgY29tdW5lc1xuICAgICAgXG4gICAgICAvLyBFc3RhZG9cbiAgICAgIGNvbnN0IGVzdGFkb0NlbGwgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29sLWVzdGFkbydcbiAgICAgIH0pO1xuICAgICAgY29uc3QgZXN0YWRvQmFkZ2UgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICBjbGFzc05hbWU6ICdlc3RhZG8tYmFkZ2Utc21hbGwnLFxuICAgICAgICB0ZXh0Q29udGVudDogZW50cmVnYWJsZS5lc3RhZG9cbiAgICAgIH0pO1xuICAgICAgZXN0YWRvQ2VsbC5hcHBlbmRDaGlsZChlc3RhZG9CYWRnZSk7XG4gICAgICByb3cuYXBwZW5kQ2hpbGQoZXN0YWRvQ2VsbCk7XG4gICAgICBcbiAgICAgIC8vIFRcdTAwRUR0dWxvIGNvbiBlbmxhY2VcbiAgICAgIGNvbnN0IHRpdHVsb0NlbGwgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29sLXRpdHVsbydcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlbmxhY2VFbnRyZWdhYmxlID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgnYScsIHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdlbnRyZWdhYmxlLWxpbmsnLFxuICAgICAgICAgIHRleHRDb250ZW50OiBlbnRyZWdhYmxlLnRpdHVsbyB8fCBlbnRyZWdhYmxlLmFsaWFzIHx8ICdFbnRyZWdhYmxlIHNpbiB0XHUwMEVEdHVsbycsXG4gICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgJ2RhdGEtaHJlZic6IGVudHJlZ2FibGUucGF0aFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICBjbGljazogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGVudHJlZ2FibGUucGF0aCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGl0dWxvQ2VsbC5hcHBlbmRDaGlsZChlbmxhY2VFbnRyZWdhYmxlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgXHVEODNEXHVERDBEIEVycm9yIGFsIGNyZWFyIGVubGFjZSBkZWwgZW50cmVnYWJsZTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICAgIGNvbnN0IHRleHRvRW50cmVnYWJsZSA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgdGV4dENvbnRlbnQ6IGVudHJlZ2FibGUudGl0dWxvIHx8IGVudHJlZ2FibGUuYWxpYXMgfHwgJ0VudHJlZ2FibGUgc2luIHRcdTAwRUR0dWxvJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGl0dWxvQ2VsbC5hcHBlbmRDaGlsZCh0ZXh0b0VudHJlZ2FibGUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICByb3cuYXBwZW5kQ2hpbGQodGl0dWxvQ2VsbCk7XG4gICAgICBcbiAgICAgIC8vIENvbHVtbmFzIGVzcGVjXHUwMEVEZmljYXMgc2VnXHUwMEZBbiBlbCBtb2RvXG4gICAgICBpZiAobW9kbyA9PT0gJ2hpdHMnKSB7XG4gICAgICAgIGNvbnN0IGhpdHNDZWxsID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnY29sLWhpdHMnLFxuICAgICAgICAgIHRleHRDb250ZW50OiBTdHJpbmcoZW50cmVnYWJsZS5oaXRzIHx8IDApXG4gICAgICAgIH0pO1xuICAgICAgICByb3cuYXBwZW5kQ2hpbGQoaGl0c0NlbGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmVjaGEgZGUgcHVibGljYWNpXHUwMEYzblxuICAgICAgICAvLyBGZWNoYSBkZSBwdWJsaWNhY2lcdTAwRjNuIGZvcm1hdGVhZGFcbiAgICAgICAgY29uc3QgZmVjaGFDZWxsID0gRE9NVXRpbHMuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnY29sLWZlY2hhJyxcbiAgICAgICAgICB0ZXh0Q29udGVudDogdGhpcy5mb3JtYXRlYXJGZWNoYVB1YmxpY2FjaW9uKGVudHJlZ2FibGUuZmVjaGFQdWJsaWNhY2lvbilcbiAgICAgICAgfSk7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChmZWNoYUNlbGwpO1xuICAgICAgICBcbiAgICAgIC8vIERcdTAwRURhcyBoYXN0YS9kZXNkZSBsYSBmZWNoYVxuICAgICAgY29uc3QgZGlhc0NlbGwgPSBET01VdGlscy5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgY2xhc3NOYW1lOiAnY29sLWRpYXMnXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVudHJlZ2FibGUuZGlmZXJlbmNpYURpYXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBkaWFzU3BhbiA9IERPTVV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgLy8gUGFzYXIgZWwgZXN0YWRvIGNvbW8gc2VndW5kbyBwYXJcdTAwRTFtZXRybyBwYXJhIGRldGVybWluYXIgbGEgY2xhc2UgYWRlY3VhZGFcbiAgICAgICAgICBjbGFzc05hbWU6IGBkaWFzLWJhZGdlICR7dGhpcy5vYnRlbmVyQ2xhc2VWZW5jaW1pZW50byhlbnRyZWdhYmxlLmRpZmVyZW5jaWFEaWFzLCBlbnRyZWdhYmxlLmVzdGFkbyl9YCxcbiAgICAgICAgICAvLyBQYXNhciBlbCBlc3RhZG8gcGFyYSBmb3JtYXRlYXIgZWwgdGV4dG8gYWRlY3VhZGFtZW50ZVxuICAgICAgICAgIHRleHRDb250ZW50OiB0aGlzLmZvcm1hdGVhckRpYXNWZW5jaW1pZW50byhlbnRyZWdhYmxlLmRpZmVyZW5jaWFEaWFzLCBlbnRyZWdhYmxlLmVzdGFkbylcbiAgICAgICAgfSk7XG4gICAgICAgIGRpYXNDZWxsLmFwcGVuZENoaWxkKGRpYXNTcGFuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpYXNDZWxsLnRleHRDb250ZW50ID0gXCJcdTIwMTRcIjtcbiAgICAgIH1cblxuICAgICAgcm93LmFwcGVuZENoaWxkKGRpYXNDZWxsKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQocm93KTtcbiAgICB9KTtcbiAgICBcbiAgICB0YWJsYS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgcmV0dXJuIHRhYmxhO1xuICB9XG5cbiAgLyoqXG4gICAqIE9idGllbmUgbGEgY2xhc2UgQ1NTIGNvcnJlc3BvbmRpZW50ZSBhbCBlc3RhZG8gZGUgdW4gZW50cmVnYWJsZVxuICAgKi9cbiAgcHJpdmF0ZSBvYnRlbmVyQ2xhc2VQYXJhRXN0YWRvKGVzdGFkbzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKGVzdGFkbykge1xuICAgICAgY2FzZSBcIlx1RDgzRFx1REZFMlwiOiByZXR1cm4gXCJlc3RhZG8tYWN0aXZvXCI7XG4gICAgICBjYXNlIFwiXHVEODNEXHVERkUxXCI6IHJldHVybiBcImVzdGFkby1lc3BlcmFcIjtcbiAgICAgIGNhc2UgXCJcdUQ4M0RcdUREMzRcIjogcmV0dXJuIFwiZXN0YWRvLWRldGVuaWRvXCI7XG4gICAgICBjYXNlIFwiXHVEODNEXHVERDM1XCI6IHJldHVybiBcImVzdGFkby1hcmNoaXZhZG9cIjtcbiAgICAgIGRlZmF1bHQ6IHJldHVybiBcIlwiO1xuICAgIH1cbiAgfVxuXG5cblxuICBcblxuICAvKipcbiAqIE9idGllbmUgdG9kb3MgbG9zIHByb3llY3RvcyBHVEQgY29uIHN1cyBjYW1wYVx1MDBGMWFzIHkgZW50cmVnYWJsZXMgYXNvY2lhZG9zIC0gVmVyc2lcdTAwRjNuIG9wdGltaXphZGFcbiAqIEluY2x1eWUgdG9kb3MgbG9zIGVzdGFkb3MgY29uIHByaW9yaWRhZCBlc3BlY1x1MDBFRGZpY2FcbiAqL1xucHJpdmF0ZSBhc3luYyBvYnRlbmVyVG9kb3NMb3NQcm95ZWN0b3MoZHY6IGFueSwgbW9kbzogJ2hpdHMnIHwgJ2ZlY2hhcycpOiBQcm9taXNlPFByb3llY3RvR1REW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlx1RDgzRFx1REQwRCBNXHUwMEU5dG9kbyBvYnRlbmVyVG9kb3NMb3NQcm95ZWN0b3MgaW5pY2lhZG9cIik7XG4gICAgXG4gICAgLy8gT2J0ZW5lciBmZWNoYSBhY3R1YWwgcGFyYSBjYWxjdWxhciBkaWZlcmVuY2lhc1xuICAgIGNvbnN0IGhveSA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKTtcbiAgICBcbiAgICAvLyAxLiBPYnRlbmVyIHRvZG9zIGxvcyBwcm95ZWN0b3MgR1REIGNvbiBjdWFscXVpZXIgZXN0YWRvXG4gICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdUREMEQgQ29uc3VsdGFuZG8gcHJveWVjdG9zIFBHVERcIik7XG4gICAgY29uc3QgcHJveWVjdG9zR1REID0gZHYucGFnZXMoKVxuICAgICAgLndoZXJlKHAgPT4gcC50eXBlID09PSBcIlBHVERcIilcbiAgICAgIC5hcnJheSgpO1xuICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgRW5jb250cmFkb3MgJHtwcm95ZWN0b3NHVEQubGVuZ3RofSBwcm95ZWN0b3MgUEdURCBlbiB0b3RhbGApO1xuICAgIFxuICAgIC8vIE1vc3RyYXIgcmVzdW1lbiBkZSBwcm95ZWN0b3MgZW5jb250cmFkb3MgcGFyYSBkaWFnblx1MDBGM3N0aWNvXG4gICAgcHJveWVjdG9zR1RELmZvckVhY2goKHByb3ksIGlkeCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBQcm95ZWN0byBQR1REICR7aWR4ICsgMX06ICR7cHJveS50aXR1bG8gfHwgcHJveS5maWxlLmJhc2VuYW1lfSAoRXN0YWRvOiAke3Byb3kuZXN0YWRvIHx8IFwiU2luIGVzdGFkb1wifSlgKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICAgLSBQYXRoOiAke3Byb3kuZmlsZS5wYXRofWApO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIDIuIE9idGVuZXIgdG9kYXMgbGFzIGNhbXBhXHUwMEYxYXMgY29uIGN1YWxxdWllciBlc3RhZG8gXG4gICAgY29uc29sZS5sb2coXCJcdUQ4M0RcdUREMEQgQ29uc3VsdGFuZG8gdG9kYXMgbGFzIGNhbXBhXHUwMEYxYXNcIik7XG4gICAgY29uc3QgdG9kYXNMYXNDYW1wYW5hcyA9IGR2LnBhZ2VzKClcbiAgICAgIC53aGVyZShwID0+IHAudHlwZSA9PT0gXCJDcFwiKVxuICAgICAgLmFycmF5KCk7XG4gICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBFbmNvbnRyYWRhcyAke3RvZGFzTGFzQ2FtcGFuYXMubGVuZ3RofSBjYW1wYVx1MDBGMWFzIGVuIHRvdGFsYCk7XG4gICAgXG4gICAgLy8gRGlhZ25cdTAwRjNzdGljbzogbW9zdHJhciB0b2RhcyBsYXMgY2FtcGFcdTAwRjFhcyBlbmNvbnRyYWRhc1xuICAgIHRvZGFzTGFzQ2FtcGFuYXMuZm9yRWFjaCgoY2FtcGFuYSwgaWR4KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENhbXBhXHUwMEYxYSAke2lkeCArIDF9OiAke2NhbXBhbmEudGl0dWxvIHx8IGNhbXBhbmEuZmlsZS5iYXNlbmFtZX0gKEVzdGFkbzogJHtjYW1wYW5hLmVzdGFkbyB8fCBcIlNpbiBlc3RhZG9cIn0pYCk7XG4gICAgICBjb25zb2xlLmxvZyhgICAgIC0gUGF0aDogJHtjYW1wYW5hLmZpbGUucGF0aH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGAgICAgLSBQcm95ZWN0b0dURDogJHtKU09OLnN0cmluZ2lmeShjYW1wYW5hLnByb3llY3RvR1REKX1gKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyAzLiBPYnRlbmVyIHRvZG9zIGxvcyBlbnRyZWdhYmxlcyBjb24gY3VhbHF1aWVyIGVzdGFkb1xuICAgIGNvbnNvbGUubG9nKFwiXHVEODNEXHVERDBEIENvbnN1bHRhbmRvIHRvZG9zIGxvcyBlbnRyZWdhYmxlc1wiKTtcbiAgICBjb25zdCB0b2Rvc0xvc0VudHJlZ2FibGVzID0gZHYucGFnZXMoKVxuICAgICAgLndoZXJlKHAgPT4gcC50eXBlID09PSBcIkVNa3RcIilcbiAgICAgIC5hcnJheSgpO1xuICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgRW5jb250cmFkb3MgJHt0b2Rvc0xvc0VudHJlZ2FibGVzLmxlbmd0aH0gZW50cmVnYWJsZXMgZW4gdG90YWxgKTtcbiAgICBcbiAgICAvLyA0LiBNYXBlYXIgbG9zIGRhdG9zIGEgbnVlc3RyYXMgaW50ZXJmYWNlc1xuICAgIGNvbnN0IHByb3llY3RvczogUHJveWVjdG9HVERbXSA9IFtdO1xuICAgIFxuICAgIC8vIEZ1bmNpXHUwMEYzbiBtZWpvcmFkYSBwYXJhIHZlcmlmaWNhciBzaSB1bmEgcmVmZXJlbmNpYSBhcHVudGEgYSB1biBwcm95ZWN0b1xuICAgIGNvbnN0IHJlZmVyZW5jaWFBcHVudGFBID0gKHJlZjogYW55LCB0YXJnZXRQYXRoOiBzdHJpbmcsIHRhcmdldEJhc2VuYW1lOiBzdHJpbmcsIHRhcmdldFRpdHVsbz86IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgLy8gQ2FzbyAxOiByZWZlcmVuY2lhIGVzIHVuIG9iamV0byBjb24gcGF0aFxuICAgICAgaWYgKHJlZiAmJiB0eXBlb2YgcmVmID09PSAnb2JqZWN0JyAmJiByZWYucGF0aCkge1xuICAgICAgICBjb25zdCBjb2luY2lkZSA9IHJlZi5wYXRoID09PSB0YXJnZXRQYXRoO1xuICAgICAgICBpZiAoY29pbmNpZGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENvaW5jaWRlbmNpYSBwb3Igb2JqZXRvLnBhdGg6ICR7cmVmLnBhdGh9ID09PSAke3RhcmdldFBhdGh9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvaW5jaWRlO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDYXNvIDI6IHJlZmVyZW5jaWEgZXMgdW5hIGNhZGVuYVxuICAgICAgaWYgKHJlZiAmJiB0eXBlb2YgcmVmID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBDYXNvIDIuMTogRXMgdW4gd2lraWxpbmsgW1tydXRhfGFsaWFzXV1cbiAgICAgICAgY29uc3Qgd2lraUxpbmtNYXRjaCA9IHJlZi5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgIGlmICh3aWtpTGlua01hdGNoKSB7XG4gICAgICAgICAgY29uc3QgcGF0aCA9IHdpa2lMaW5rTWF0Y2hbMV07XG4gICAgICAgICAgLy8gSW50ZW50YSBjb2luY2lkaXIgY29uIGxhIHJ1dGEsIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBvIGVsIHRcdTAwRUR0dWxvXG4gICAgICAgICAgY29uc3QgY29pbmNpZGVQb3JQYXRoID0gcGF0aCA9PT0gdGFyZ2V0UGF0aDtcbiAgICAgICAgICBjb25zdCBjb2luY2lkZVBvck5vbWJyZSA9IHBhdGggPT09IHRhcmdldEJhc2VuYW1lO1xuICAgICAgICAgIGNvbnN0IGNvaW5jaWRlUG9yVGl0dWxvID0gdGFyZ2V0VGl0dWxvICYmIHBhdGggPT09IHRhcmdldFRpdHVsbztcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY29pbmNpZGVQb3JQYXRoIHx8IGNvaW5jaWRlUG9yTm9tYnJlIHx8IGNvaW5jaWRlUG9yVGl0dWxvKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENvaW5jaWRlbmNpYSBwb3Igd2lraWxpbms6ICR7cGF0aH0gY29pbmNpZGUgY29uICR7dGFyZ2V0UGF0aH0sICR7dGFyZ2V0QmFzZW5hbWV9IG8gJHt0YXJnZXRUaXR1bG99YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiBjb2luY2lkZVBvclBhdGggfHwgY29pbmNpZGVQb3JOb21icmUgfHwgY29pbmNpZGVQb3JUaXR1bG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhc28gMi4yOiBFcyBzb2xvIGVsIG5vbWJyZSBkZWwgYXJjaGl2byBvIHRcdTAwRUR0dWxvIHNpbiBmb3JtYXRvIHdpa2lsaW5rXG4gICAgICAgIGNvbnN0IGNvaW5jaWRlUG9yUGF0aCA9IHJlZiA9PT0gdGFyZ2V0UGF0aDtcbiAgICAgICAgY29uc3QgY29pbmNpZGVQb3JOb21icmUgPSByZWYgPT09IHRhcmdldEJhc2VuYW1lO1xuICAgICAgICBjb25zdCBjb2luY2lkZVBvclRpdHVsbyA9IHRhcmdldFRpdHVsbyAmJiByZWYgPT09IHRhcmdldFRpdHVsbztcbiAgICAgICAgXG4gICAgICAgIGlmIChjb2luY2lkZVBvclBhdGggfHwgY29pbmNpZGVQb3JOb21icmUgfHwgY29pbmNpZGVQb3JUaXR1bG8pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENvaW5jaWRlbmNpYSBkaXJlY3RhOiAke3JlZn0gY29pbmNpZGUgY29uICR7dGFyZ2V0UGF0aH0sICR7dGFyZ2V0QmFzZW5hbWV9IG8gJHt0YXJnZXRUaXR1bG99YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb2luY2lkZVBvclBhdGggfHwgY29pbmNpZGVQb3JOb21icmUgfHwgY29pbmNpZGVQb3JUaXR1bG87XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFxuICAgIC8vIFBhcmEgY2FkYSBwcm95ZWN0bywgZW5jb250cmFyIHN1cyBjYW1wYVx1MDBGMWFzIHkgZW50cmVnYWJsZXNcbiAgICBmb3IgKGNvbnN0IHByb3kgb2YgcHJveWVjdG9zR1REKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIFByb2Nlc2FuZG8gcHJveWVjdG86ICR7cHJveS50aXR1bG8gfHwgcHJveS5maWxlLmJhc2VuYW1lfWApO1xuICAgICAgXG4gICAgICAvLyBFbmNvbnRyYXIgY2FtcGFcdTAwRjFhcyBhc29jaWFkYXMgYSBlc3RlIHByb3llY3RvXG4gICAgICBjb25zdCBjYW1wYW5hc0RlbFByb3llY3RvID0gdG9kYXNMYXNDYW1wYW5hcy5maWx0ZXIoY2FtcCA9PiB7XG4gICAgICAgIGlmICghY2FtcC5wcm95ZWN0b0dURCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gTm8gdGllbmUgcmVmZXJlbmNpYSBhIHByb3llY3RvXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE5vcm1hbGl6YXIgYSBhcnJheSAocG9kclx1MDBFRGEgc2VyIHN0cmluZyB1IG9iamV0bylcbiAgICAgICAgY29uc3QgcmVmZXJlbmNpYXMgPSBBcnJheS5pc0FycmF5KGNhbXAucHJveWVjdG9HVEQpID8gY2FtcC5wcm95ZWN0b0dURCA6IFtjYW1wLnByb3llY3RvR1REXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBhbGd1bmEgcmVmZXJlbmNpYSBhcHVudGEgYSBlc3RlIHByb3llY3RvXG4gICAgICAgIGZvciAoY29uc3QgcmVmIG9mIHJlZmVyZW5jaWFzKSB7XG4gICAgICAgICAgaWYgKHJlZmVyZW5jaWFBcHVudGFBKHJlZiwgcHJveS5maWxlLnBhdGgsIHByb3kuZmlsZS5iYXNlbmFtZSwgcHJveS50aXR1bG8pKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIFx1MjcwNSBMYSBjYW1wYVx1MDBGMWEgJHtjYW1wLnRpdHVsbyB8fCBjYW1wLmZpbGUuYmFzZW5hbWV9IGVzdFx1MDBFMSBhc29jaWFkYSBhbCBwcm95ZWN0byAke3Byb3kudGl0dWxvIHx8IHByb3kuZmlsZS5iYXNlbmFtZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgRW5jb250cmFkYXMgJHtjYW1wYW5hc0RlbFByb3llY3RvLmxlbmd0aH0gY2FtcGFcdTAwRjFhcyBwYXJhIGVsIHByb3llY3RvICR7cHJveS50aXR1bG8gfHwgcHJveS5maWxlLmJhc2VuYW1lfWApO1xuICAgICAgXG4gICAgICAvLyBTaSBubyB0aWVuZSBjYW1wYVx1MDBGMWFzIGFzb2NpYWRhcywgcGFzYXIgYWwgc2lndWllbnRlIHByb3llY3RvXG4gICAgICBpZiAoY2FtcGFuYXNEZWxQcm95ZWN0by5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBcdTI2QTBcdUZFMEYgRWwgcHJveWVjdG8gJHtwcm95LnRpdHVsbyB8fCBwcm95LmZpbGUuYmFzZW5hbWV9IG5vIHRpZW5lIGNhbXBhXHUwMEYxYXMgYXNvY2lhZGFzLCBzZSBvbWl0aXJcdTAwRTFgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFByb2Nlc2FyIGNhbXBhXHUwMEYxYXMgeSBlbnRyZWdhYmxlc1xuICAgICAgY29uc3QgY2FtcGFuYXNQcm9jZXNzZWQ6IENhbXBhbmFbXSA9IFtdO1xuICAgICAgbGV0IHRvdGFsSGl0c1Byb3llY3RvID0gMDtcbiAgICAgIFxuICAgICAgZm9yIChjb25zdCBjYW1wIG9mIGNhbXBhbmFzRGVsUHJveWVjdG8pIHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBQcm9jZXNhbmRvIGNhbXBhXHUwMEYxYTogJHtjYW1wLnRpdHVsbyB8fCBjYW1wLmZpbGUuYmFzZW5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbmNvbnRyYXIgZW50cmVnYWJsZXMgYXNvY2lhZG9zIGEgZXN0YSBjYW1wYVx1MDBGMWEgdXNhbmRvIGVsIGNhbXBvIGFzdW50b1xuICAgICAgICBjb25zdCBlbnRyZWdhYmxlc0RlQ2FtcGFuYSA9IHRvZG9zTG9zRW50cmVnYWJsZXMuZmlsdGVyKGVudCA9PiB7XG4gICAgICAgICAgaWYgKCFlbnQuYXN1bnRvKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE5vIHRpZW5lIHJlZmVyZW5jaWEgYSBjYW1wYVx1MDBGMWFcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTm9ybWFsaXphciBhIGFycmF5XG4gICAgICAgICAgY29uc3QgcmVmZXJlbmNpYXMgPSBBcnJheS5pc0FycmF5KGVudC5hc3VudG8pID8gZW50LmFzdW50byA6IFtlbnQuYXN1bnRvXTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgYWxndW5hIHJlZmVyZW5jaWEgYXB1bnRhIGEgZXN0YSBjYW1wYVx1MDBGMWFcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlZiBvZiByZWZlcmVuY2lhcykge1xuICAgICAgICAgICAgaWYgKHJlZmVyZW5jaWFBcHVudGFBKHJlZiwgY2FtcC5maWxlLnBhdGgsIGNhbXAuZmlsZS5iYXNlbmFtZSwgY2FtcC50aXR1bG8pKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgXHUyNzA1IEVsIGVudHJlZ2FibGUgJHtlbnQudGl0dWxvIHx8IGVudC5maWxlLmJhc2VuYW1lfSBlc3RcdTAwRTEgYXNvY2lhZG8gYSBsYSBjYW1wYVx1MDBGMWEgJHtjYW1wLnRpdHVsbyB8fCBjYW1wLmZpbGUuYmFzZW5hbWV9YCk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBFbmNvbnRyYWRvcyAke2VudHJlZ2FibGVzRGVDYW1wYW5hLmxlbmd0aH0gZW50cmVnYWJsZXMgcGFyYSBsYSBjYW1wYVx1MDBGMWEgJHtjYW1wLnRpdHVsbyB8fCBjYW1wLmZpbGUuYmFzZW5hbWV9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNhciBlbnRyZWdhYmxlc1xuICAgICAgICBjb25zdCBlbnRyZWdhYmxlc1Byb2Nlc3NlZDogRW50cmVnYWJsZVtdID0gW107XG4gICAgICAgIGxldCB0b3RhbEhpdHNDYW1wYW5hID0gMDtcbiAgICAgICBcbiAgICAgICAgbGV0IG1pbkRpYXNDYW1wYW5hOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgICAgICAgZm9yIChjb25zdCBlbnQgb2YgZW50cmVnYWJsZXNEZUNhbXBhbmEpIHtcbiAgICAgICAgICAvLyBDYWxjdWxhciBkXHUwMEVEYXMgaGFzdGEgcHVibGljYWNpXHUwMEYzblxuICAgICAgICAgIGxldCBkaWZlcmVuY2lhRGlhczogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChlbnQucHVibGljYWNpb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IGZlY2hhUHVibGljYWNpb24gPSB3aW5kb3cubW9tZW50KGVudC5wdWJsaWNhY2lvbi50b1N0cmluZygpLCBcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICAgIGlmIChmZWNoYVB1YmxpY2FjaW9uLmlzVmFsaWQoKSkge1xuICAgICAgICAgICAgICAgIGRpZmVyZW5jaWFEaWFzID0gZmVjaGFQdWJsaWNhY2lvbi5kaWZmKGhveSwgJ2RheXMnKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIEVudHJlZ2FibGUgJHtlbnQudGl0dWxvIHx8IGVudC5maWxlLmJhc2VuYW1lfTogcHVibGljYWNpXHUwMEYzbiAke2VudC5wdWJsaWNhY2lvbn0gKCR7ZGlmZXJlbmNpYURpYXN9IGRcdTAwRURhcyksIGVzdGFkbzogJHtlbnQuZXN0YWRvIHx8IFwiU2luIGVzdGFkb1wifWApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihgXHVEODNEXHVERDBEIEVycm9yIHByb2Nlc2FuZG8gZmVjaGEgcGFyYSAke2VudC5maWxlLnBhdGh9OiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ0FNQklBRE86IEFjdHVhbGl6YXIgbVx1MDBFRG5pbW8gcGFyYSBsYSBjYW1wYVx1MDBGMWEgU09MTyBzaSBlbCBlbnRyZWdhYmxlIGVzdFx1MDBFMSBhY3Rpdm8gKFx1RDgzRFx1REZFMilcbiAgICAgICAgICBpZiAoZGlmZXJlbmNpYURpYXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZXN0YWRvID0gZW50LmVzdGFkbyB8fCBcIlx1RDgzRFx1REZFMVwiOyAvLyBQb3IgZGVmZWN0bywgc2kgbm8gdGllbmUgZXN0YWRvLCBzZSBjb25zaWRlcmEgZW4gcGF1c2FcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU29sbyBjb25zaWRlcmFyIGVudHJlZ2FibGVzIGFjdGl2b3MgcGFyYSBlbCBjXHUwMEUxbGN1bG8gZGUgdmVuY2ltaWVudG9zXG4gICAgICAgICAgICBpZiAodGhpcy5lbnRyZWdhYmxlQUNvbnNpZGVyYXJQYXJhVmVuY2ltaWVudG8oZXN0YWRvKSkge1xuICAgICAgICAgICAgICBpZiAobWluRGlhc0NhbXBhbmEgPT09IHVuZGVmaW5lZCB8fCBkaWZlcmVuY2lhRGlhcyA8IG1pbkRpYXNDYW1wYW5hKSB7XG4gICAgICAgICAgICAgICAgbWluRGlhc0NhbXBhbmEgPSBkaWZlcmVuY2lhRGlhcztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcm9jZXNhciBoaXRzXG4gICAgICAgICAgbGV0IGhpdHMgPSAwO1xuICAgICAgICAgIGlmIChlbnQuaGl0cyAhPT0gdW5kZWZpbmVkICYmIGVudC5oaXRzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyBJbnRlbnRhciBjb252ZXJ0aXIgYSBuXHUwMEZBbWVyb1xuICAgICAgICAgICAgaGl0cyA9IHR5cGVvZiBlbnQuaGl0cyA9PT0gJ251bWJlcidcbiAgICAgICAgICAgICAgPyBlbnQuaGl0c1xuICAgICAgICAgICAgICA6IHBhcnNlRmxvYXQoZW50LmhpdHMpIHx8IDA7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWFyIG9iamV0byBlbnRyZWdhYmxlXG4gICAgICAgICAgY29uc3QgZW50cmVnYWJsZUluZm86IEVudHJlZ2FibGUgPSB7XG4gICAgICAgICAgICBpZDogZW50LmlkIHx8IGBlbnQtJHtlbnRyZWdhYmxlc1Byb2Nlc3NlZC5sZW5ndGh9YCxcbiAgICAgICAgICAgIHRpdHVsbzogZW50LnRpdHVsbyB8fCBlbnQuZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgIHBhdGg6IGVudC5maWxlLnBhdGgsXG4gICAgICAgICAgICBoaXRzOiBoaXRzLFxuICAgICAgICAgICAgZXN0YWRvOiBlbnQuZXN0YWRvIHx8IFwiXHVEODNEXHVERkUxXCIsIC8vIFBvciBkZWZlY3RvIGFtYXJpbGxvIHNpIG5vIGhheSBlc3RhZG9cbiAgICAgICAgICAgIGZlY2hhUHVibGljYWNpb246IGVudC5wdWJsaWNhY2lvbixcbiAgICAgICAgICAgIGRpZmVyZW5jaWFEaWFzLFxuICAgICAgICAgICAgYWxpYXM6IGVudC5hbGlhc2VzPy5bMF1cbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIGVudHJlZ2FibGVzUHJvY2Vzc2VkLnB1c2goZW50cmVnYWJsZUluZm8pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENBTUJJTzogU29sbyBzdW1hciBoaXRzIGRlIGVzdGFkb3MgYWN0aXZvcyB5IGFyY2hpdmFkb3NcbiAgICAgICAgICBpZiAoZW50LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIiB8fCBlbnQuZXN0YWRvID09PSBcIlx1RDgzRFx1REQzNVwiKSB7XG4gICAgICAgICAgICB0b3RhbEhpdHNDYW1wYW5hICs9IGhpdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBvYmpldG8gY2FtcGFcdTAwRjFhXG4gICAgICAgIGNvbnN0IGNhbXBhbmFJbmZvOiBDYW1wYW5hID0ge1xuICAgICAgICAgIGlkOiBjYW1wLmlkIHx8IGBjYW1wLSR7Y2FtcGFuYXNQcm9jZXNzZWQubGVuZ3RofWAsXG4gICAgICAgICAgdGl0dWxvOiBjYW1wLnRpdHVsbyB8fCBjYW1wLmZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgcGF0aDogY2FtcC5maWxlLnBhdGgsXG4gICAgICAgICAgZW50cmVnYWJsZXM6IGVudHJlZ2FibGVzUHJvY2Vzc2VkLFxuICAgICAgICAgIGhpdHM6IHRvdGFsSGl0c0NhbXBhbmEsXG4gICAgICAgICAgZXN0YWRvOiBjYW1wLmVzdGFkbyB8fCBcIlx1RDgzRFx1REZFMVwiLCAvLyBQb3IgZGVmZWN0byBhbWFyaWxsbyBzaSBubyBoYXkgZXN0YWRvXG4gICAgICAgICAgZmVjaGFJbmljaW86IGNhbXAuZmVjaGFJbmljaW8sXG4gICAgICAgICAgZmVjaGFGaW46IGNhbXAuZmVjaGFGaW4sXG4gICAgICAgICAgYWxpYXM6IGNhbXAuYWxpYXNlcz8uWzBdLFxuICAgICAgICAgIGRpZmVyZW5jaWFEaWFzUHJveGltbzogbWluRGlhc0NhbXBhbmFcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGNhbXBhbmFzUHJvY2Vzc2VkLnB1c2goY2FtcGFuYUluZm8pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ0FNQklPOiBTb2xvIHN1bWFyIGhpdHMgZGUgY2FtcGFcdTAwRjFhcyBhY3RpdmFzIHkgYXJjaGl2YWRhc1xuICAgICAgICBpZiAoY2FtcC5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIgfHwgY2FtcC5lc3RhZG8gPT09IFwiXHVEODNEXHVERDM1XCIpIHtcbiAgICAgICAgICB0b3RhbEhpdHNQcm95ZWN0byArPSB0b3RhbEhpdHNDYW1wYW5hO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIENhbXBhXHUwMEYxYSAke2NhbXBhbmFJbmZvLnRpdHVsb30gYVx1MDBGMWFkaWRhIGNvbiAke2VudHJlZ2FibGVzUHJvY2Vzc2VkLmxlbmd0aH0gZW50cmVnYWJsZXMgeSAke3RvdGFsSGl0c0NhbXBhbmF9IGhpdHNgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgb2JqZXRvIHByb3llY3RvXG4gICAgICBjb25zdCBwcm95ZWN0b0luZm86IFByb3llY3RvR1REID0ge1xuICAgICAgICBpZDogcHJveS5pZCB8fCBgcHJveS0ke3Byb3llY3Rvcy5sZW5ndGh9YCxcbiAgICAgICAgdGl0dWxvOiBwcm95LnRpdHVsbyB8fCBwcm95LmZpbGUuYmFzZW5hbWUsXG4gICAgICAgIHBhdGg6IHByb3kuZmlsZS5wYXRoLFxuICAgICAgICBjYW1wYW5hczogY2FtcGFuYXNQcm9jZXNzZWQsXG4gICAgICAgIGhpdHM6IHRvdGFsSGl0c1Byb3llY3RvLFxuICAgICAgICBlc3RhZG86IHByb3kuZXN0YWRvIHx8IFwiXHVEODNEXHVERkUxXCIsIC8vIFBvciBkZWZlY3RvIGFtYXJpbGxvIHNpIG5vIGhheSBlc3RhZG9cbiAgICAgICAgYWxpYXM6IHByb3kuYWxpYXNlcz8uWzBdXG4gICAgICB9O1xuICAgICAgXG4gICAgICBwcm95ZWN0b3MucHVzaChwcm95ZWN0b0luZm8pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIFByb3llY3RvICR7cHJveWVjdG9JbmZvLnRpdHVsb30gYVx1MDBGMWFkaWRvIGNvbiAke2NhbXBhbmFzUHJvY2Vzc2VkLmxlbmd0aH0gY2FtcGFcdTAwRjFhcyB5ICR7dG90YWxIaXRzUHJveWVjdG99IGhpdHNgKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBUb3RhbCBkZSBwcm95ZWN0b3MgcHJvY2VzYWRvcyBjb24gY2FtcGFcdTAwRjFhczogJHtwcm95ZWN0b3MubGVuZ3RofWApO1xuICAgIFxuICAgIHJldHVybiBwcm95ZWN0b3M7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlx1RDgzRFx1REQwRCBFcnJvciBhbCBvYnRlbmVyIGRhdG9zIGRlIHByb3llY3RvcyB5IGNhbXBhXHUwMEYxYXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5cbiAgLyoqXG4gICAqIE9idGllbmUgbG9zIGRhdG9zIGRlIHVuIHByb3llY3RvIGVzcGVjXHUwMEVEZmljb1xuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBvYnRlbmVyRGF0b3NQcm95ZWN0byhkdjogYW55LCBhcmNoaXZvUHJveWVjdG86IGFueSwgbW9kbzogJ2hpdHMnIHwgJ2ZlY2hhcycpOiBQcm9taXNlPFByb3llY3RvR1REIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIE9idGVuaWVuZG8gZGF0b3MgZXNwZWNcdTAwRURmaWNvcyBwYXJhIGVsIHByb3llY3RvOiAke2FyY2hpdm9Qcm95ZWN0by5wYXRofWApO1xuICAgICAgXG4gICAgICBjb25zdCBwcm95ZWN0b3MgPSBhd2FpdCB0aGlzLm9idGVuZXJUb2Rvc0xvc1Byb3llY3RvcyhkdiwgbW9kbyk7XG4gICAgICBcbiAgICAgIC8vIEJ1c2NhciBlbCBwcm95ZWN0byBlc3BlY1x1MDBFRGZpY29cbiAgICAgIGNvbnN0IHByb3llY3RvRW5jb250cmFkbyA9IHByb3llY3Rvcy5maW5kKHAgPT4gcC5wYXRoID09PSBhcmNoaXZvUHJveWVjdG8ucGF0aCk7XG4gICAgICBcbiAgICAgIGlmIChwcm95ZWN0b0VuY29udHJhZG8pIHtcbiAgICAgICAgY29uc29sZS5sb2coYFx1RDgzRFx1REQwRCBQcm95ZWN0byBlbmNvbnRyYWRvOiAke3Byb3llY3RvRW5jb250cmFkby50aXR1bG99IGNvbiAke3Byb3llY3RvRW5jb250cmFkby5jYW1wYW5hcy5sZW5ndGh9IGNhbXBhXHUwMEYxYXNgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBcdUQ4M0RcdUREMEQgXHUyNkEwXHVGRTBGIE5vIHNlIGVuY29udHJcdTAwRjMgZWwgcHJveWVjdG8gZW4gbGEgbGlzdGEgZGUgcHJveWVjdG9zIHByb2Nlc2Fkb3NgKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHByb3llY3RvRW5jb250cmFkbyB8fCBudWxsO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcdUQ4M0RcdUREMEQgRXJyb3IgYWwgb2J0ZW5lciBkYXRvcyBkZWwgcHJveWVjdG8gJHthcmNoaXZvUHJveWVjdG8ucGF0aH06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAqIEZvcm1hdGVhIHVuYSBmZWNoYSBlbiBmb3JtYXRvIElTTyBhIHVuIGZvcm1hdG8gbVx1MDBFMXMgbGVnaWJsZVxuICogQHBhcmFtIGZlY2hhU3RyIFN0cmluZyBkZSBmZWNoYSBlbiBmb3JtYXRvIElTTyBvIHNpbWlsYXJcbiAqIEByZXR1cm5zIEZlY2hhIGZvcm1hdGVhZGEgY29tbyBcImRkZGQsIGRkIGRlIG1tIGRlbCB5eXl5XCJcbiAqL1xucHJpdmF0ZSBmb3JtYXRlYXJGZWNoYVB1YmxpY2FjaW9uKGZlY2hhU3RyOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICBpZiAoIWZlY2hhU3RyKSByZXR1cm4gJ05vIGRlZmluaWRhJztcbiAgXG4gIHRyeSB7XG4gICAgLy8gSW50ZW50YXIgcGFyc2VhciBsYSBmZWNoYSBjb24gbW9tZW50XG4gICAgY29uc3QgZmVjaGEgPSB3aW5kb3cubW9tZW50KGZlY2hhU3RyLnRvU3RyaW5nKCkpO1xuICAgIFxuICAgIGlmICghZmVjaGEuaXNWYWxpZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZyhgXHVEODNEXHVERDBEIEVycm9yOiBGZWNoYSBpbnZcdTAwRTFsaWRhICR7ZmVjaGFTdHJ9YCk7XG4gICAgICByZXR1cm4gZmVjaGFTdHI7IC8vIERldm9sdmVyIG9yaWdpbmFsIHNpIG5vIGVzIHZcdTAwRTFsaWRhXG4gICAgfVxuICAgIFxuICAgIC8vIENvbmZpZ3VyYXIgbW9tZW50IHBhcmEgdXNhciBlc3BhXHUwMEYxb2xcbiAgICBjb25zdCBsb2NhbGUgPSB3aW5kb3cubW9tZW50LmxvY2FsZSgpO1xuICAgIGlmIChsb2NhbGUgIT09ICdlcycpIHtcbiAgICAgIHdpbmRvdy5tb21lbnQubG9jYWxlKCdlcycpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGb3JtYXRlYXIgbGEgZmVjaGEgYWwgZXN0aWxvIFwic1x1MDBFMWJhZG8sIDIyIGRlIG1hcnpvIGRlbCAyMDI1XCJcbiAgICAvLyBFbCBmb3JtYXRvIGVuIG1vbWVudC5qcyB1c2E6XG4gICAgLy8gZGRkZCA9IG5vbWJyZSBkXHUwMEVEYSBzZW1hbmEsIEREID0gZFx1MDBFRGEgKG5cdTAwRkFtZXJvKSwgTU1NTSA9IG1lcyAobm9tYnJlKSwgWVlZWSA9IGFcdTAwRjFvIGNvbXBsZXRvXG4gICAgY29uc3QgZmVjaGFGb3JtYXRlYWRhID0gZmVjaGEuZm9ybWF0KCdkZGRkLCBERCBbZGVdIE1NTU0gW2RlbF0gWVlZWScpO1xuICAgIFxuICAgIC8vIFJlc3RhdXJhciBlbCBsb2NhbGUgb3JpZ2luYWwgc2kgZnVlIGNhbWJpYWRvXG4gICAgaWYgKGxvY2FsZSAhPT0gJ2VzJykge1xuICAgICAgd2luZG93Lm1vbWVudC5sb2NhbGUobG9jYWxlKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZlY2hhRm9ybWF0ZWFkYTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihgXHVEODNEXHVERDBEIEVycm9yIGFsIGZvcm1hdGVhciBmZWNoYTogJHtlLm1lc3NhZ2V9YCk7XG4gICAgcmV0dXJuIGZlY2hhU3RyIHx8ICdObyBkZWZpbmlkYSc7XG4gIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmEgbGEgcHJpb3JpZGFkIGRlIHVuIGVzdGFkbyBwYXJhIG9yZGVuYW1pZW50b1xuICogQHBhcmFtIGVzdGFkbyBFbW9qaSBkZSBlc3RhZG9cbiAqIEByZXR1cm5zIFZhbG9yIG51bVx1MDBFOXJpY28gZGUgcHJpb3JpZGFkIChtZW5vciA9IG1heW9yIHByaW9yaWRhZClcbiAqL1xucHJpdmF0ZSBnZXRQcmlvcmlkYWRFc3RhZG8oZXN0YWRvOiBzdHJpbmcpOiBudW1iZXIge1xuICBzd2l0Y2ggKGVzdGFkbykge1xuICAgIGNhc2UgXCJcdUQ4M0RcdURGRTJcIjogcmV0dXJuIDE7IC8vIEFjdGl2byAobWF5b3IgcHJpb3JpZGFkKVxuICAgIGNhc2UgXCJcdUQ4M0RcdURGRTFcIjogcmV0dXJuIDI7IC8vIFN1c3BlbmRpZG9cbiAgICBjYXNlIFwiXHVEODNEXHVERDM1XCI6IHJldHVybiAzOyAvLyBBcmNoaXZhZG9cbiAgICBjYXNlIFwiXHVEODNEXHVERDM0XCI6IHJldHVybiA0OyAvLyBDYW5jZWxhZG8gKG1lbm9yIHByaW9yaWRhZClcbiAgICBkZWZhdWx0OiByZXR1cm4gNTsgICAvLyBFc3RhZG9zIG5vIHJlY29ub2NpZG9zIGFsIGZpbmFsXG4gIH1cbn1cblxuLyoqXG4gKiBPcmRlbmEgbG9zIHByb3llY3RvcyBzZWdcdTAwRkFuIGVsIG1vZG8gc2VsZWNjaW9uYWRvIHkgcmVzcGV0YW5kbyBsYSBwcmlvcmlkYWQgZGUgZXN0YWRvc1xuICovXG5wcml2YXRlIG9yZGVuYXJQcm95ZWN0b3MocHJveWVjdG9zOiBQcm95ZWN0b0dURFtdLCBtb2RvOiAnaGl0cycgfCAnZmVjaGFzJyk6IFByb3llY3RvR1REW10ge1xuICBpZiAobW9kbyA9PT0gJ2hpdHMnKSB7XG4gICAgLy8gT3JkZW5hciBwcmltZXJvIHBvciBlc3RhZG8geSBsdWVnbyBwb3IgaGl0cyAobWF5b3IgYSBtZW5vcilcbiAgICByZXR1cm4gWy4uLnByb3llY3Rvc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgcHJpb3JpZGFkQSA9IHRoaXMuZ2V0UHJpb3JpZGFkRXN0YWRvKGEuZXN0YWRvKTtcbiAgICAgIGNvbnN0IHByaW9yaWRhZEIgPSB0aGlzLmdldFByaW9yaWRhZEVzdGFkbyhiLmVzdGFkbyk7XG4gICAgICBcbiAgICAgIGlmIChwcmlvcmlkYWRBICE9PSBwcmlvcmlkYWRCKSB7XG4gICAgICAgIHJldHVybiBwcmlvcmlkYWRBIC0gcHJpb3JpZGFkQjsgLy8gT3JkZW5hciBwcmltZXJvIHBvciBwcmlvcmlkYWQgZGUgZXN0YWRvXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBiLmhpdHMgLSBhLmhpdHM7IC8vIEx1ZWdvIHBvciBoaXRzIGRlc2NlbmRlbnRlc1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIE9yZGVuYXIgcG9yIGZlY2hhIGRlbCBlbnRyZWdhYmxlIG1cdTAwRTFzIHByXHUwMEYzeGltbyBhIHZlbmNlciB5IHJlc3BldGFuZG8gcHJpb3JpZGFkIGRlIGVzdGFkb1xuICAgIHJldHVybiBbLi4ucHJveWVjdG9zXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBwcmlvcmlkYWRBID0gdGhpcy5nZXRQcmlvcmlkYWRFc3RhZG8oYS5lc3RhZG8pO1xuICAgICAgY29uc3QgcHJpb3JpZGFkQiA9IHRoaXMuZ2V0UHJpb3JpZGFkRXN0YWRvKGIuZXN0YWRvKTtcbiAgICAgIFxuICAgICAgaWYgKHByaW9yaWRhZEEgIT09IHByaW9yaWRhZEIpIHtcbiAgICAgICAgcmV0dXJuIHByaW9yaWRhZEEgLSBwcmlvcmlkYWRCOyAvLyBPcmRlbmFyIHByaW1lcm8gcG9yIHByaW9yaWRhZCBkZSBlc3RhZG9cbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcHJveGltb0EgPSB0aGlzLm9idGVuZXJEaWFzUHJveGltb1ZlbmNpbWllbnRvKGEpO1xuICAgICAgY29uc3QgcHJveGltb0IgPSB0aGlzLm9idGVuZXJEaWFzUHJveGltb1ZlbmNpbWllbnRvKGIpO1xuICAgICAgXG4gICAgICAvLyBTaSBhbGd1bm8gbm8gdGllbmUgZmVjaGFzLCBwb25lcmxvIGFsIGZpbmFsIGRlbnRybyBkZSBzdSBjYXRlZ29yXHUwMEVEYSBkZSBlc3RhZG9cbiAgICAgIGlmIChwcm94aW1vQSA9PT0gbnVsbCAmJiBwcm94aW1vQiA9PT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgICBpZiAocHJveGltb0EgPT09IG51bGwpIHJldHVybiAxO1xuICAgICAgaWYgKHByb3hpbW9CID09PSBudWxsKSByZXR1cm4gLTE7XG4gICAgICBcbiAgICAgIC8vIE9yZGVuYXIgcG9yIHByb3hpbWlkYWQgKG1lbm9yIG5cdTAwRkFtZXJvIGRlIGRcdTAwRURhcyBwcmltZXJvKVxuICAgICAgcmV0dXJuIHByb3hpbW9BIC0gcHJveGltb0I7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBPcmRlbmEgbGFzIGNhbXBhXHUwMEYxYXMgc2VnXHUwMEZBbiBlbCBtb2RvIHNlbGVjY2lvbmFkbyB5IHJlc3BldGFuZG8gbGEgcHJpb3JpZGFkIGRlIGVzdGFkb3NcbiAqL1xucHJpdmF0ZSBvcmRlbmFyQ2FtcGFuYXMoY2FtcGFuYXM6IENhbXBhbmFbXSwgbW9kbzogJ2hpdHMnIHwgJ2ZlY2hhcycpOiBDYW1wYW5hW10ge1xuICBpZiAoY2FtcGFuYXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIFtdOyAvLyBObyBoYXkgY2FtcGFcdTAwRjFhcyBwYXJhIG9yZGVuYXJcbiAgfVxuICBcbiAgaWYgKG1vZG8gPT09ICdoaXRzJykge1xuICAgIC8vIE9yZGVuYXIgcHJpbWVybyBwb3IgZXN0YWRvIHkgbHVlZ28gcG9yIGhpdHMgKG1heW9yIGEgbWVub3IpXG4gICAgcmV0dXJuIFsuLi5jYW1wYW5hc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgY29uc3QgcHJpb3JpZGFkQSA9IHRoaXMuZ2V0UHJpb3JpZGFkRXN0YWRvKGEuZXN0YWRvKTtcbiAgICAgIGNvbnN0IHByaW9yaWRhZEIgPSB0aGlzLmdldFByaW9yaWRhZEVzdGFkbyhiLmVzdGFkbyk7XG4gICAgICBcbiAgICAgIGlmIChwcmlvcmlkYWRBICE9PSBwcmlvcmlkYWRCKSB7XG4gICAgICAgIHJldHVybiBwcmlvcmlkYWRBIC0gcHJpb3JpZGFkQjsgLy8gT3JkZW5hciBwcmltZXJvIHBvciBwcmlvcmlkYWQgZGUgZXN0YWRvXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBiLmhpdHMgLSBhLmhpdHM7IC8vIEx1ZWdvIHBvciBoaXRzIGRlc2NlbmRlbnRlc1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIC8vIE9yZGVuYXIgcG9yIGZlY2hhIGRlbCBlbnRyZWdhYmxlIG1cdTAwRTFzIHByXHUwMEYzeGltbyB5IHJlc3BldGFuZG8gcHJpb3JpZGFkIGRlIGVzdGFkb1xuICAgIHJldHVybiBbLi4uY2FtcGFuYXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IHByaW9yaWRhZEEgPSB0aGlzLmdldFByaW9yaWRhZEVzdGFkbyhhLmVzdGFkbyk7XG4gICAgICBjb25zdCBwcmlvcmlkYWRCID0gdGhpcy5nZXRQcmlvcmlkYWRFc3RhZG8oYi5lc3RhZG8pO1xuICAgICAgXG4gICAgICBpZiAocHJpb3JpZGFkQSAhPT0gcHJpb3JpZGFkQikge1xuICAgICAgICByZXR1cm4gcHJpb3JpZGFkQSAtIHByaW9yaWRhZEI7IC8vIE9yZGVuYXIgcHJpbWVybyBwb3IgcHJpb3JpZGFkIGRlIGVzdGFkb1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoYS5kaWZlcmVuY2lhRGlhc1Byb3hpbW8gPT09IHVuZGVmaW5lZCAmJiBiLmRpZmVyZW5jaWFEaWFzUHJveGltbyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMDtcbiAgICAgIGlmIChhLmRpZmVyZW5jaWFEaWFzUHJveGltbyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMTtcbiAgICAgIGlmIChiLmRpZmVyZW5jaWFEaWFzUHJveGltbyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gLTE7XG4gICAgICBcbiAgICAgIC8vIE9yZGVuYXIgcG9yIHByb3hpbWlkYWQgKG1lbm9yIG5cdTAwRkFtZXJvIGRlIGRcdTAwRURhcyBwcmltZXJvKVxuICAgICAgcmV0dXJuIGEuZGlmZXJlbmNpYURpYXNQcm94aW1vIC0gYi5kaWZlcmVuY2lhRGlhc1Byb3hpbW87XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBPcmRlbmEgbG9zIGVudHJlZ2FibGVzIHNlZ1x1MDBGQW4gZWwgbW9kbyBzZWxlY2Npb25hZG8geSByZXNwZXRhbmRvIGxhIHByaW9yaWRhZCBkZSBlc3RhZG9zXG4gKi9cbnByaXZhdGUgb3JkZW5hckVudHJlZ2FibGVzKGVudHJlZ2FibGVzOiBFbnRyZWdhYmxlW10sIG1vZG86ICdoaXRzJyB8ICdmZWNoYXMnKTogRW50cmVnYWJsZVtdIHtcbiAgaWYgKGVudHJlZ2FibGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXTsgLy8gTm8gaGF5IGVudHJlZ2FibGVzIHBhcmEgb3JkZW5hclxuICB9XG4gIFxuICBpZiAobW9kbyA9PT0gJ2hpdHMnKSB7XG4gICAgLy8gT3JkZW5hciBwcmltZXJvIHBvciBlc3RhZG8geSBsdWVnbyBwb3IgaGl0cyAobWF5b3IgYSBtZW5vcilcbiAgICByZXR1cm4gWy4uLmVudHJlZ2FibGVzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBwcmlvcmlkYWRBID0gdGhpcy5nZXRQcmlvcmlkYWRFc3RhZG8oYS5lc3RhZG8pO1xuICAgICAgY29uc3QgcHJpb3JpZGFkQiA9IHRoaXMuZ2V0UHJpb3JpZGFkRXN0YWRvKGIuZXN0YWRvKTtcbiAgICAgIFxuICAgICAgaWYgKHByaW9yaWRhZEEgIT09IHByaW9yaWRhZEIpIHtcbiAgICAgICAgcmV0dXJuIHByaW9yaWRhZEEgLSBwcmlvcmlkYWRCOyAvLyBPcmRlbmFyIHByaW1lcm8gcG9yIHByaW9yaWRhZCBkZSBlc3RhZG9cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGIuaGl0cyAtIGEuaGl0czsgLy8gTHVlZ28gcG9yIGhpdHMgZGVzY2VuZGVudGVzXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gT3JkZW5hciBwb3IgZmVjaGEgZGUgcHVibGljYWNpXHUwMEYzbiB5IHJlc3BldGFuZG8gcHJpb3JpZGFkIGRlIGVzdGFkb1xuICAgIHJldHVybiBbLi4uZW50cmVnYWJsZXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGNvbnN0IHByaW9yaWRhZEEgPSB0aGlzLmdldFByaW9yaWRhZEVzdGFkbyhhLmVzdGFkbyk7XG4gICAgICBjb25zdCBwcmlvcmlkYWRCID0gdGhpcy5nZXRQcmlvcmlkYWRFc3RhZG8oYi5lc3RhZG8pO1xuICAgICAgXG4gICAgICBpZiAocHJpb3JpZGFkQSAhPT0gcHJpb3JpZGFkQikge1xuICAgICAgICByZXR1cm4gcHJpb3JpZGFkQSAtIHByaW9yaWRhZEI7IC8vIE9yZGVuYXIgcHJpbWVybyBwb3IgcHJpb3JpZGFkIGRlIGVzdGFkb1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoYS5kaWZlcmVuY2lhRGlhcyA9PT0gdW5kZWZpbmVkICYmIGIuZGlmZXJlbmNpYURpYXMgPT09IHVuZGVmaW5lZCkgcmV0dXJuIDA7XG4gICAgICBpZiAoYS5kaWZlcmVuY2lhRGlhcyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gMTtcbiAgICAgIGlmIChiLmRpZmVyZW5jaWFEaWFzID09PSB1bmRlZmluZWQpIHJldHVybiAtMTtcbiAgICAgIFxuICAgICAgLy8gT3JkZW5hciBwb3IgcHJveGltaWRhZCAobWVub3Igblx1MDBGQW1lcm8gZGUgZFx1MDBFRGFzIHByaW1lcm8pXG4gICAgICByZXR1cm4gYS5kaWZlcmVuY2lhRGlhcyAtIGIuZGlmZXJlbmNpYURpYXM7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBNb2RpZmljYWNpb25lcyBjbGF2ZSBhbCBQcm95ZWN0b0NhbXBhbmFzQ29tcG9uZW50IHBhcmEgY29ycmVnaXIgZWwgbWFuZWpvIGRlIGZlY2hhcyBzZWdcdTAwRkFuIGVzdGFkb1xuICovXG5cbi8qKlxuICogRGV0ZXJtaW5hIHNpIHVuIGVudHJlZ2FibGUgZGViZSBjb25zaWRlcmFyc2UgcGFyYSBlbCBjXHUwMEUxbGN1bG8gZGUgZmVjaGFzIGRlIHZlbmNpbWllbnRvXG4gKiBAcGFyYW0gZXN0YWRvIEVzdGFkbyBkZWwgZW50cmVnYWJsZSAoZW1vamkpXG4gKiBAcmV0dXJucyB0cnVlIHNpIGVsIGVudHJlZ2FibGUgZGViZSBjb25zaWRlcmFyc2UgcGFyYSB2ZW5jaW1pZW50b3NcbiAqL1xucHJpdmF0ZSBlbnRyZWdhYmxlQUNvbnNpZGVyYXJQYXJhVmVuY2ltaWVudG8oZXN0YWRvOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gU29sbyBsb3MgZW50cmVnYWJsZXMgYWN0aXZvcyAoXHVEODNEXHVERkUyKSBkZWJlbiBhZmVjdGFyIGVsIGNcdTAwRTFsY3VsbyBkZSB2ZW5jaW1pZW50b3NcbiAgLy8gTG9zIGVudHJlZ2FibGVzIGVuIHBhdXNhIChcdUQ4M0RcdURGRTEpLCBhcmNoaXZhZG9zIChcdUQ4M0RcdUREMzUpIG8gY2FuY2VsYWRvcyAoXHVEODNEXHVERDM0KSBubyBkZWJlbiBhZmVjdGFyXG4gIHJldHVybiBlc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCI7XG59XG5cbi8qKlxuICogT2J0aWVuZSBsb3MgZFx1MDBFRGFzIGhhc3RhIGVsIHByXHUwMEYzeGltbyB2ZW5jaW1pZW50byBlbiB1biBwcm95ZWN0bywgY29uc2lkZXJhbmRvIHNvbG8gZW50cmVnYWJsZXMgYWN0aXZvc1xuICovXG5wcml2YXRlIG9idGVuZXJEaWFzUHJveGltb1ZlbmNpbWllbnRvKHByb3llY3RvOiBQcm95ZWN0b0dURCk6IG51bWJlciB8IG51bGwge1xuICBsZXQgbWluRGlhczogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIFxuICBwcm95ZWN0by5jYW1wYW5hcy5mb3JFYWNoKGNhbXBhbmEgPT4ge1xuICAgIC8vIFNvbG8gY29uc2lkZXJhciBjYW1wYVx1MDBGMWFzIGFjdGl2YXMgKFx1RDgzRFx1REZFMikgcGFyYSBsb3MgdmVuY2ltaWVudG9zIGRlbCBwcm95ZWN0b1xuICAgIGlmIChjYW1wYW5hLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgLy8gU2kgbGEgY2FtcGFcdTAwRjFhIHRpZW5lIHVuIHZhbG9yIGRpZmVyZW5jaWFEaWFzUHJveGltbyBkZWZpbmlkby4uLlxuICAgICAgaWYgKGNhbXBhbmEuZGlmZXJlbmNpYURpYXNQcm94aW1vICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKG1pbkRpYXMgPT09IG51bGwgfHwgY2FtcGFuYS5kaWZlcmVuY2lhRGlhc1Byb3hpbW8gPCBtaW5EaWFzKSB7XG4gICAgICAgICAgbWluRGlhcyA9IGNhbXBhbmEuZGlmZXJlbmNpYURpYXNQcm94aW1vO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgXG4gIHJldHVybiBtaW5EaWFzO1xufVxuXG4vKipcbiAqIE9idGllbmUgbGEgY2xhc2UgQ1NTIHBhcmEgbGEgY2VsZGEgZGUgZFx1MDBFRGFzIHNlZ1x1MDBGQW4gZWwgZXN0YWRvIGRlbCBlbnRyZWdhYmxlIHkgc3UgZmVjaGFcbiAqIEBwYXJhbSBkaWZlcmVuY2lhRGlhcyBEXHUwMEVEYXMgaGFzdGEgbGEgZmVjaGEgZGUgcHVibGljYWNpXHUwMEYzbiAobmVnYXRpdm8gc2kgeWEgcGFzXHUwMEYzKVxuICogQHBhcmFtIGVzdGFkbyBFc3RhZG8gZGVsIGVudHJlZ2FibGVcbiAqIEByZXR1cm5zIENsYXNlIENTUyBwYXJhIGFwbGljYXJcbiAqL1xucHJpdmF0ZSBvYnRlbmVyQ2xhc2VWZW5jaW1pZW50byhkaWZlcmVuY2lhRGlhczogbnVtYmVyLCBlc3RhZG86IHN0cmluZyA9IFwiXHVEODNEXHVERkUyXCIpOiBzdHJpbmcge1xuICAvLyBQYXJhIGVudHJlZ2FibGVzIGFyY2hpdmFkb3MgKFx1RDgzRFx1REQzNSkgc2llbXByZSBtb3N0cmFyIGNvbW8gY29tcGxldGFkb3NcbiAgaWYgKGVzdGFkbyA9PT0gXCJcdUQ4M0RcdUREMzVcIikge1xuICAgIHJldHVybiBcImNvbXBsZXRhZG9cIjtcbiAgfVxuICBcbiAgLy8gUGFyYSBlbnRyZWdhYmxlcyBjYW5jZWxhZG9zIChcdUQ4M0RcdUREMzQpIHNpZW1wcmUgbW9zdHJhciBjb21vIGNhbmNlbGFkb3NcbiAgaWYgKGVzdGFkbyA9PT0gXCJcdUQ4M0RcdUREMzRcIikge1xuICAgIHJldHVybiBcImNhbmNlbGFkb1wiO1xuICB9XG4gIFxuICAvLyBQYXJhIGVudHJlZ2FibGVzIGVuIHBhdXNhIChcdUQ4M0RcdURGRTEpIG1vc3RyYXIgdW4gZXN0YWRvIGVzcGVjaWFsXG4gIGlmIChlc3RhZG8gPT09IFwiXHVEODNEXHVERkUxXCIpIHtcbiAgICByZXR1cm4gZGlmZXJlbmNpYURpYXMgPCAwID8gXCJwYXVzYWRvLXZlbmNpZG9cIiA6IFwicGF1c2Fkb1wiO1xuICB9XG4gIFxuICAvLyBQYXJhIGVudHJlZ2FibGVzIGFjdGl2b3MgKFx1RDgzRFx1REZFMiksIHVzYXIgbGEgbFx1MDBGM2dpY2Egbm9ybWFsIGRlIGZlY2hhc1xuICBpZiAoZGlmZXJlbmNpYURpYXMgPCAwKSByZXR1cm4gXCJ2ZW5jaWRvXCI7IC8vIFlhIHZlbmNpZG9cbiAgaWYgKGRpZmVyZW5jaWFEaWFzIDw9IDEpIHJldHVybiBcImhveVwiOyAvLyBIb3kgbyBtYVx1MDBGMWFuYVxuICBpZiAoZGlmZXJlbmNpYURpYXMgPD0gMykgcmV0dXJuIFwicHJveGltb1wiOyAvLyBQclx1MDBGM3hpbW9zIDMgZFx1MDBFRGFzXG4gIGlmIChkaWZlcmVuY2lhRGlhcyA8PSA3KSByZXR1cm4gXCJjZXJjYW5vXCI7IC8vIFByXHUwMEYzeGltYSBzZW1hbmFcbiAgcmV0dXJuIFwiZnV0dXJvXCI7IC8vIE1cdTAwRTFzIGRlIHVuYSBzZW1hbmFcbn1cblxuLyoqXG4gKiBGb3JtYXRlYSBsb3MgZFx1MDBFRGFzIHBhcmEgbW9zdHJhciBkZSBmb3JtYSBsZWdpYmxlIHNlZ1x1MDBGQW4gZWwgZXN0YWRvIGRlbCBlbnRyZWdhYmxlXG4gKiBAcGFyYW0gZGlmZXJlbmNpYURpYXMgRFx1MDBFRGFzIGhhc3RhIGxhIGZlY2hhIGRlIHB1YmxpY2FjaVx1MDBGM25cbiAqIEBwYXJhbSBlc3RhZG8gRXN0YWRvIGRlbCBlbnRyZWdhYmxlXG4gKiBAcmV0dXJucyBUZXh0byBmb3JtYXRlYWRvIHBhcmEgbW9zdHJhclxuICovXG5wcml2YXRlIGZvcm1hdGVhckRpYXNWZW5jaW1pZW50byhkaWZlcmVuY2lhRGlhczogbnVtYmVyLCBlc3RhZG86IHN0cmluZyA9IFwiXHVEODNEXHVERkUyXCIpOiBzdHJpbmcge1xuICAvLyBNZW5zYWplIGVzcGVjXHUwMEVEZmljbyBzZWdcdTAwRkFuIGVsIGVzdGFkb1xuICBpZiAoZXN0YWRvID09PSBcIlx1RDgzRFx1REQzNVwiKSB7XG4gICAgcmV0dXJuIFwiQ29tcGxldGFkb1wiO1xuICB9XG4gIFxuICBpZiAoZXN0YWRvID09PSBcIlx1RDgzRFx1REQzNFwiKSB7XG4gICAgcmV0dXJuIFwiQ2FuY2VsYWRvXCI7XG4gIH1cbiAgXG4gIGlmIChlc3RhZG8gPT09IFwiXHVEODNEXHVERkUxXCIpIHtcbiAgICBpZiAoZGlmZXJlbmNpYURpYXMgPCAwKSB7XG4gICAgICBjb25zdCBkaWFzQWJzID0gTWF0aC5hYnMoZGlmZXJlbmNpYURpYXMpO1xuICAgICAgcmV0dXJuIGBFbiBwYXVzYSAoJHtkaWFzQWJzfSAke2RpYXNBYnMgPT09IDEgPyAnZFx1MDBFRGEnIDogJ2RcdTAwRURhcyd9KWA7XG4gICAgfVxuICAgIHJldHVybiBgRW4gcGF1c2EgKCR7ZGlmZXJlbmNpYURpYXN9IGRcdTAwRURhcylgO1xuICB9XG4gIFxuICAvLyBMXHUwMEYzZ2ljYSBub3JtYWwgcGFyYSBlc3RhZG9zIGFjdGl2b3NcbiAgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAwKSByZXR1cm4gXCJIb3lcIjtcbiAgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAxKSByZXR1cm4gXCJNYVx1MDBGMWFuYVwiO1xuICBpZiAoZGlmZXJlbmNpYURpYXMgPCAwKSB7XG4gICAgY29uc3QgZGlhc0FicyA9IE1hdGguYWJzKGRpZmVyZW5jaWFEaWFzKTtcbiAgICByZXR1cm4gYFZlbmNpZG8gKCR7ZGlhc0Fic30gJHtkaWFzQWJzID09PSAxID8gJ2RcdTAwRURhJyA6ICdkXHUwMEVEYXMnfSlgO1xuICB9XG4gIHJldHVybiBgJHtkaWZlcmVuY2lhRGlhc30gZFx1MDBFRGFzYDtcbn1cblxuXG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9hZGRPbnNBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0xOSAwOTozMjowM1xuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDg6MzVcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuaW1wb3J0IHsgVGFyZWFzSW5ib3hDb21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvVGFyZWFzSW5ib3hDb21wb25lbnQnO1xuaW1wb3J0IHsgUHJveWVjdG9DYW1wYW5hc0NvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50cy9Qcm95ZWN0b0NhbXBhbmFzQ29tcG9uZW50JztcbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4vdXRpbHMvTmF2aWdhdGlvblV0aWxzJztcblxuZXhwb3J0IGNsYXNzIGFkZE9uc0FQSSB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgICBwcml2YXRlIHRhcmVhc0luYm94Q29tcG9uZW50OiBUYXJlYXNJbmJveENvbXBvbmVudDtcbiAgICAvLyBOdWV2byBjb21wb25lbnRlIC0gYXNlZ1x1MDBGQXJhdGUgZGUgcXVlIHNlIGRlY2xhcmUgYXF1XHUwMEVEXG4gICAgcHJpdmF0ZSBwcm95ZWN0b0NhbXBhbmFzQ29tcG9uZW50OiBQcm95ZWN0b0NhbXBhbmFzQ29tcG9uZW50O1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogYW55KSB7XG4gICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgIHRoaXMudGFyZWFzSW5ib3hDb21wb25lbnQgPSBuZXcgVGFyZWFzSW5ib3hDb21wb25lbnQocGx1Z2luKTtcbiAgICAgICAvLyBJbmljaWFsaXphY2lcdTAwRjNuIGRlbCBjb21wb25lbnRlIC0gYXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGVzdGEgbFx1MDBFRG5lYSBleGlzdGVcbiAgICAgICB0aGlzLnByb3llY3RvQ2FtcGFuYXNDb21wb25lbnQgPSBuZXcgUHJveWVjdG9DYW1wYW5hc0NvbXBvbmVudChwbHVnaW4pOyAvL1xuICAgIH1cbiAgXG4gICAgY3JlYXJQcmV2TmV4dChwYWdpbmFzLCBwYWdJbmRpY2UsIGR2KSB7XG4gICAgICAgIGxldCBwYWdpbmEgPSBkdi5jdXJyZW50KCk7XG4gICAgICAgIGxldCBpbmRpY2U7XG4gICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDwgcGFnaW5hcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgaWYgKHBhZ2luYXNbYV0uZmlsZS5uYW1lID09IHBhZ2luYS5maWxlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBpbmRpY2UgPSBhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGxldCBsaW5rcyA9IFtdO1xuICAgICAgICBpZiAoaW5kaWNlID09IDAgJiYgcGFnaW5hcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgbGlua3NbMF0gPSBcIlwiO1xuICAgICAgICAgICAgbGlua3NbMV0gPSBcIlwiO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGljZSA9PSAwKSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IFwiXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXHUyN0ExXHVGRTBGIFwiICsgZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlICsgMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSArIDFdKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5kaWNlID09IChwYWdpbmFzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSAtIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgLSAxXSkpICsgXCIgXHUyQjA1XHVGRTBGXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSAtIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgLSAxXSkpICsgXCIgXHUyQjA1XHVGRTBGXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXHUyN0ExXHVGRTBGIFwiICsgZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlICsgMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSArIDFdKSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZHYucGFyYWdyYXBoKGxpbmtzWzBdICsgXCIgPT1cIiArIGR2LmZ1bmMubGluayhwYWdJbmRpY2UuZmlsZS5wYXRoLCBwYWdJbmRpY2UudGl0dWxvIHx8IHBhZ0luZGljZS5maWxlLm5hbWUpICsgXCI9PSBcIiArIGxpbmtzWzFdKTtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hKSB7XG4gICAgICAgIGlmIChwYWdpbmEudGl0dWxvKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLnRpdHVsbztcbiAgICAgICAgfSBlbHNlIGlmIChwYWdpbmEuYWxpYXNlcyAmJiBwYWdpbmEuYWxpYXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLmFsaWFzZXNbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLmZpbGUubmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgXG5cblxuLyoqXG4gKiBHZW5lcmEgdGV4dG8gZGUgcmVsYWNpb25lcyBjb24gZW5sYWNlcyBmdW5jaW9uYWxlcyB5IGZvcm1hdGVhZG8gY29uIENTU1xuICogQHBhcmFtIHBhZ2luYSBMYSBwXHUwMEUxZ2luYSBhY3R1YWwgb2J0ZW5pZGEgYSB0cmF2XHUwMEU5cyBkZSBkdi5jdXJyZW50KClcbiAqIEBwYXJhbSBkdiBFbCBvYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHJldHVybnMgT2JqZXRvIEhUTUwgcGFyYSBzZXIgdXNhZG8gY29uIGR2LnBhcmFncmFwaCgpXG4gKi9cbmdlbmVyYXJUZXh0b1JlbGFjaW9uZXMocGFnaW5hLCBkdikge1xuICAgIC8vIFByaW1lcm8gZ2VuZXJhbW9zIGVsIHRleHRvIGNvbiBlbmxhY2VzIGZ1bmNpb25hbGVzXG4gICAgbGV0IHRleHRvID0gYCR7cGFnaW5hLnR5cGVOYW1lIHx8IFwiRW50cmVnYWJsZVwifSByZWxhY2lvbmFkbyBhIGA7XG4gICAgY29uc3QgcmVsYWNpb25lcyA9IFtdO1xuICAgIFxuICAgIC8vIEFzdW50b1xuICAgIGlmIChwYWdpbmEuYXN1bnRvICYmIEFycmF5LmlzQXJyYXkocGFnaW5hLmFzdW50bykpIHtcbiAgICAgICAgY29uc3QgYXN1bnRvTGlua3MgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeU9iaiBvZiBwYWdpbmEuYXN1bnRvKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoID0gZW50cnlPYmoucGF0aCB8fCBlbnRyeU9iajtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycgJiYgcGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXN1bnRvUGFnZSA9IGR2LnBhZ2UocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3VudG9QYWdlICYmIGFzdW50b1BhZ2UuZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBhc3VudG9QYWdlLmZpbGUuYWxpYXNlcz8uWzBdIHx8IGFzdW50b1BhZ2UudGl0dWxvIHx8IGFzdW50b1BhZ2UuZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXN1bnRvTGlua3MucHVzaChkdi5maWxlTGluayhhc3VudG9QYWdlLmZpbGUucGF0aCwgZmFsc2UsIGFsaWFzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3VudG9MaW5rcy5wdXNoKFwiYXN1bnRvIG5vIGVuY29udHJhZG9cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGFzdW50b0xpbmtzLnB1c2goXCJhc3VudG8gbm8gZW5jb250cmFkb1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChhc3VudG9MaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZWxhY2lvbmVzLnB1c2goYGFzdW50bzogJHthc3VudG9MaW5rcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWxhY2lvbmVzLnB1c2goXCJhc3VudG86IGFzdW50byBubyBlbmNvbnRyYWRvXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJveWVjdG9zIEdURFxuICAgIGlmIChwYWdpbmEucHJveWVjdG9HVEQgJiYgKEFycmF5LmlzQXJyYXkocGFnaW5hLnByb3llY3RvR1REKSB8fCB0eXBlb2YgcGFnaW5hLnByb3llY3RvR1REID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgY29uc3QgcHJveWVjdG9MaW5rcyA9IFtdO1xuICAgICAgICBjb25zdCBwcm95ZWN0b0FycmF5ID0gQXJyYXkuaXNBcnJheShwYWdpbmEucHJveWVjdG9HVEQpIFxuICAgICAgICAgICAgPyBwYWdpbmEucHJveWVjdG9HVEQgXG4gICAgICAgICAgICA6IFtwYWdpbmEucHJveWVjdG9HVERdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeU9iaiBvZiBwcm95ZWN0b0FycmF5KSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoID0gZW50cnlPYmoucGF0aCB8fCBlbnRyeU9iajtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycgJiYgcGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9QYWdlID0gZHYucGFnZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3llY3RvUGFnZSAmJiBwcm95ZWN0b1BhZ2UuZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBwcm95ZWN0b1BhZ2UuZmlsZS5hbGlhc2VzPy5bMF0gfHwgcHJveWVjdG9QYWdlLnRpdHVsbyB8fCBwcm95ZWN0b1BhZ2UuZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveWVjdG9MaW5rcy5wdXNoKGR2LmZpbGVMaW5rKHByb3llY3RvUGFnZS5maWxlLnBhdGgsIGZhbHNlLCBhbGlhcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaSBsYSBwXHUwMEUxZ2luYSBubyBzZSBlbmN1ZW50cmEsIHBvZGVtb3MgZXh0cmFlciBlbCB0XHUwMEVEdHVsbyBkZWwgcGF0aCBvIGxhIGVudHJhZGEgb3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbnRyeU9iaiA9PT0gJ3N0cmluZycgJiYgZW50cnlPYmouaW5jbHVkZXMoJ3wnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGVzID0gZW50cnlPYmouc3BsaXQoJ3wnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3llY3RvTGlua3MucHVzaChwYXJ0ZXNbcGFydGVzLmxlbmd0aCAtIDFdLnJlcGxhY2UoJ11dJywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVudGFtb3MgZW5jb250cmFyIGVsIG5vbWJyZSBkZXNkZSBlbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0ucmVwbGFjZSgnLm1kJywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveWVjdG9MaW5rcy5wdXNoKGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHByb3llY3RvTGlua3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVsYWNpb25lcy5wdXNoKGBQR1REOiAke3Byb3llY3RvTGlua3Muam9pbihcIiwgXCIpfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHUwMEMxcmVhcyBkZSBpbnRlclx1MDBFOXNcbiAgICBpZiAocGFnaW5hLmFyZWFJbnRlcmVzICYmIChBcnJheS5pc0FycmF5KHBhZ2luYS5hcmVhSW50ZXJlcykgfHwgdHlwZW9mIHBhZ2luYS5hcmVhSW50ZXJlcyA9PT0gJ3N0cmluZycpKSB7XG4gICAgICAgIGNvbnN0IGFyZWFMaW5rcyA9IFtdO1xuICAgICAgICBjb25zdCBhcmVhQXJyYXkgPSBBcnJheS5pc0FycmF5KHBhZ2luYS5hcmVhSW50ZXJlcykgXG4gICAgICAgICAgICA/IHBhZ2luYS5hcmVhSW50ZXJlcyBcbiAgICAgICAgICAgIDogW3BhZ2luYS5hcmVhSW50ZXJlc107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5T2JqIG9mIGFyZWFBcnJheSkge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGVudHJ5T2JqLnBhdGggfHwgZW50cnlPYmo7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnICYmIHBhdGgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZWFQYWdlID0gZHYucGFnZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFQYWdlICYmIGFyZWFQYWdlLmZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gYXJlYVBhZ2UuZmlsZS5hbGlhc2VzPy5bMF0gfHwgYXJlYVBhZ2UudGl0dWxvIHx8IGFyZWFQYWdlLmZpbGUubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFMaW5rcy5wdXNoKGR2LmZpbGVMaW5rKGFyZWFQYWdlLmZpbGUucGF0aCwgZmFsc2UsIGFsaWFzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGxhIHBcdTAwRTFnaW5hIG5vIHNlIGVuY3VlbnRyYSwgcG9kZW1vcyBleHRyYWVyIGVsIHRcdTAwRUR0dWxvIGRlbCBwYXRoIG8gbGEgZW50cmFkYSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5T2JqID09PSAnc3RyaW5nJyAmJiBlbnRyeU9iai5pbmNsdWRlcygnfCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ZXMgPSBlbnRyeU9iai5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYUxpbmtzLnB1c2gocGFydGVzW3BhcnRlcy5sZW5ndGggLSAxXS5yZXBsYWNlKCddXScsICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnRlbnRhbW9zIGVuY29udHJhciBlbCBub21icmUgZGVzZGUgZWwgcGF0aFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGF0aFBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdLnJlcGxhY2UoJy5tZCcsICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFMaW5rcy5wdXNoKGZpbGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFyZWFMaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZWxhY2lvbmVzLnB1c2goYEFJOiAke2FyZWFMaW5rcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTAwQzFyZWEgZGUgdmlkYVxuICAgIGlmIChwYWdpbmEuYXJlYVZpZGEpIHtcbiAgICAgICAgbGV0IGFyZWFWaWRhVGV4dCA9IHBhZ2luYS5hcmVhVmlkYTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGVsIFx1MDBFMXJlYSBkZSB2aWRhIGVzIHVuYSByZWZlcmVuY2lhLCBwcm9jZXNhciBkZSBtYW5lcmEgc2ltaWxhclxuICAgICAgICBpZiAodHlwZW9mIHBhZ2luYS5hcmVhVmlkYSA9PT0gJ3N0cmluZycgJiYgcGFnaW5hLmFyZWFWaWRhLmluY2x1ZGVzKCdbWycpKSB7XG4gICAgICAgICAgICAvLyBFcyB1bmEgcmVmZXJlbmNpYSB3aWtpLCBvYnRlbmVyIGVsIG5vbWJyZSBhbWlnYWJsZVxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBwYWdpbmEuYXJlYVZpZGEubWF0Y2goL1xcW1xcWyguKj8pXFx8KC4qPylcXF1cXF0vKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPj0gMykge1xuICAgICAgICAgICAgICAgIGFyZWFWaWRhVGV4dCA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcmVhVmlkYVRleHQgPSBwYWdpbmEuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbfFxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJlbGFjaW9uZXMucHVzaChgQVY6ICR7YXJlYVZpZGFUZXh0fWApO1xuICAgIH1cblxuICAgIC8vIFVuaXIgdG9kYXMgbGFzIHJlbGFjaW9uZXNcbiAgICB0ZXh0byArPSByZWxhY2lvbmVzLmpvaW4oXCIsIFwiKTtcbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBlbCBlc3RhZG8gYWwgZmluYWxcbiAgICBpZiAocGFnaW5hLmVzdGFkbykge1xuICAgICAgICB0ZXh0byArPSBgIGVuIGVzdGFkbyAke3BhZ2luYS5lc3RhZG99YDtcbiAgICB9XG4gICAgXG4gICAgLy8gRW52b2x2ZXIgZWwgY29udGVuaWRvIGVuIHVuIHNwYW4gY29uIGNsYXNlIHBhcmEgZXN0aWxvcyBDU1NcbiAgICAvLyBDcmVhbW9zIHVuIGVsZW1lbnRvIEhUTUwgdXRpbGl6YW5kbyBsYXMgZnVuY2lvbmVzIGRlIERhdGF2aWV3XG4gICAgcmV0dXJuIGR2LmVsKFwic3BhblwiLCB0ZXh0bywgeyBjbHM6IFwibm90YS1yZWxhY2lvbmVzXCIgfSk7XG59XG5cblxuLyoqXG4gKiBHZW5lcmEgdW4gXHUwMEUxcmJvbCBkZSByZWZlcmVuY2lhcyBhIGxhIG5vdGEgYWN0dWFsIGRlIGZvcm1hIHJlY3Vyc2l2YSBjb24gZWxlbWVudG9zIHRvZ2dsZVxuICogQHBhcmFtIHBhZ2luYUFjdHVhbCBMYSBwXHUwMEUxZ2luYSBhY3R1YWxcbiAqIEBwYXJhbSBkdiBPYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHBhcmFtIHByb2Z1bmRpZGFkTWF4aW1hIFByb2Z1bmRpZGFkIG1cdTAwRTF4aW1hIGRlIHJlY3Vyc2lcdTAwRjNuIChkZWZlY3RvOiAzKVxuICogQHBhcmFtIHZpc2l0YWRhcyBTZXQgZGUgSURzIGRlIHBcdTAwRTFnaW5hcyB5YSB2aXNpdGFkYXMgcGFyYSBldml0YXIgY2ljbG9zXG4gKiBAcGFyYW0gcHJvZnVuZGlkYWRBY3R1YWwgUHJvZnVuZGlkYWQgYWN0dWFsIGRlIHJlY3Vyc2lcdTAwRjNuXG4gKiBAcmV0dXJucyBFbGVtZW50byBIVE1MIGNvbiBsYSBlc3RydWN0dXJhIGRlIFx1MDBFMXJib2xcbiAqL1xuXG5nZW5lcmFyQXJib2xSZWZlcmVuY2lhcyhwYWdpbmFBY3R1YWwsIGR2LCBwcm9mdW5kaWRhZE1heGltYSA9IDMsIHZpc2l0YWRhcyA9IG5ldyBTZXQoKSwgcHJvZnVuZGlkYWRBY3R1YWwgPSAwKSB7XG4gICAgLy8gVmFsaWRhciBxdWUgcGFnaW5hQWN0dWFsIHRlbmdhIGxhcyBwcm9waWVkYWRlcyBuZWNlc2FyaWFzXG4gICAgaWYgKCFwYWdpbmFBY3R1YWwgfHwgIXBhZ2luYUFjdHVhbC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjogcGFnaW5hQWN0dWFsIG5vIHRpZW5lIGxhcyBwcm9waWVkYWRlcyBuZWNlc2FyaWFzXCIsIHBhZ2luYUFjdHVhbCk7XG4gICAgICAgIHJldHVybiBkdi5lbChcImRpdlwiLCBcIkVycm9yOiBObyBzZSBwdWVkZSBnZW5lcmFyIGVsIFx1MDBFMXJib2wgZGUgcmVmZXJlbmNpYXMuXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlLWVycm9yXCIgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgY29uc3QgY29udGVuZWRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVuZWRvci5jbGFzc05hbWUgPSBcImJhY2tsaW5rcy10cmVlXCI7XG4gICAgXG4gICAgaWYgKHByb2Z1bmRpZGFkQWN0dWFsID09PSAwKSB7XG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIHRcdTAwRUR0dWxvIHBlcnNvbmFsaXphZG8gc29sbyBlbiBsYSByYVx1MDBFRHpcbiAgICAgICAgY29uc3QgdGlwb05vdGEgPSBwYWdpbmFBY3R1YWwudHlwZU5hbWUgfHwgXCJOb3RhXCI7XG4gICAgICAgIGNvbnN0IGFsaWFzID0gcGFnaW5hQWN0dWFsLmZpbGUuYWxpYXNlcyAmJiBwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgICA/IHBhZ2luYUFjdHVhbC5maWxlLmFsaWFzZXNbMF0gXG4gICAgICAgICAgICA6IChwYWdpbmFBY3R1YWwudGl0dWxvIHx8IHBhZ2luYUFjdHVhbC5maWxlLm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgdGl0dWxvLmNsYXNzTmFtZSA9IFwiYmFja2xpbmtzLXRyZWUtdGl0bGVcIjtcbiAgICAgICAgdGl0dWxvLnRleHRDb250ZW50ID0gYFJlZmVyZW5jaWFzIGEgJHt0aXBvTm90YX0gXCIke2FsaWFzfVwiYDtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZCh0aXR1bG8pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBoZW1vcyBsbGVnYWRvIGEgbGEgcHJvZnVuZGlkYWQgbVx1MDBFMXhpbWEsIG5vIHNlZ3VpbW9zIGV4cGxvcmFuZG9cbiAgICBpZiAocHJvZnVuZGlkYWRBY3R1YWwgPj0gcHJvZnVuZGlkYWRNYXhpbWEpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmNhciBlc3RhIHBcdTAwRTFnaW5hIGNvbW8gdmlzaXRhZGEgcGFyYSBldml0YXIgY2ljbG9zXG4gICAgdmlzaXRhZGFzLmFkZChwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKTtcbiAgICBcbiAgICAvLyBPYnRlbmVyIHRvZGFzIGxhcyBwXHUwMEUxZ2luYXMgcXVlIGhhY2VuIHJlZmVyZW5jaWEgZGlyZWN0YSBhIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgIGxldCB0b2Rhc0xhc1BhZ2luYXM7XG4gICAgdHJ5IHtcbiAgICAgICAgdG9kYXNMYXNQYWdpbmFzID0gZHYucGFnZXMoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHBcdTAwRTFnaW5hczpcIiwgZSk7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIGVycm9yTXNnLmNsYXNzTmFtZSA9IFwiYmFja2xpbmtzLXRyZWUtZXJyb3JcIjtcbiAgICAgICAgZXJyb3JNc2cudGV4dENvbnRlbnQgPSBcIkVycm9yIGFsIG9idGVuZXIgcFx1MDBFMWdpbmFzIGRlIERhdGF2aWV3XCI7XG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoZXJyb3JNc2cpO1xuICAgICAgICByZXR1cm4gY29udGVuZWRvcjtcbiAgICB9XG4gICAgXG4gICAgLy8gRmlsdHJhciBsYXMgcFx1MDBFMWdpbmFzIHF1ZSByZWZlcmVuY2lhbiBhIGxhIGFjdHVhbCBhIHRyYXZcdTAwRTlzIGRlICdhc3VudG8nXG4gICAgbGV0IHJlZmVyZW5jaWFzRGlyZWN0YXMgPSBbXTtcbiAgICB0cnkge1xuICAgICAgICByZWZlcmVuY2lhc0RpcmVjdGFzID0gdG9kYXNMYXNQYWdpbmFzLmZpbHRlcihwID0+IHtcbiAgICAgICAgICAgIGlmICghcC5hc3VudG8pIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTm9ybWFsaXphciBhc3VudG8gYSBhcnJheVxuICAgICAgICAgICAgY29uc3QgYXN1bnRvcyA9IEFycmF5LmlzQXJyYXkocC5hc3VudG8pID8gcC5hc3VudG8gOiBbcC5hc3VudG9dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFzdW50byBvZiBhc3VudG9zKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgYXN1bnRvIGVzIHVuIG9iamV0byBjb24gcGF0aCB5IGNvaW5jaWRlIGNvbiBsYSBwXHUwMEUxZ2luYSBhY3R1YWxcbiAgICAgICAgICAgICAgICBpZiAoYXN1bnRvICYmIHR5cGVvZiBhc3VudG8gPT09ICdvYmplY3QnICYmIGFzdW50by5wYXRoID09PSBwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBhc3VudG8gZXMgdW5hIGNhZGVuYSBjb24gZWwgZm9ybWF0byBbW3J1dGF8YWxpYXNdXVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXN1bnRvID09PSAnc3RyaW5nJyAmJiBhc3VudG8uaW5jbHVkZXMocGFnaW5hQWN0dWFsLmZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpIGFzdW50byBlcyB1bmEgY2FkZW5hIHkgY29pbmNpZGUgY29uIGVsIGFsaWFzIG8gbm9tYnJlIGRlIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXN1bnRvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgY29pbmNpZGVuY2lhIGNvbiBhbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzZXMgPSBwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFsaWFzIG9mIGFsaWFzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhc3VudG8uaW5jbHVkZXMoYWxpYXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBjb2luY2lkZW5jaWEgY29uIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXN1bnRvLmluY2x1ZGVzKHBhZ2luYUFjdHVhbC5maWxlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBmaWx0cmFyIHJlZmVyZW5jaWFzOlwiLCBlKTtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgZXJyb3JNc2cuY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS1lcnJvclwiO1xuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IFwiRXJyb3IgYWwgcHJvY2VzYXIgcmVmZXJlbmNpYXNcIjtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChlcnJvck1zZyk7XG4gICAgICAgIHJldHVybiBjb250ZW5lZG9yO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBubyBoYXkgcmVmZXJlbmNpYXMsIG1vc3RyYXIgbWVuc2FqZVxuICAgIGlmIChyZWZlcmVuY2lhc0RpcmVjdGFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAocHJvZnVuZGlkYWRBY3R1YWwgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG1lbnNhamUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIG1lbnNhamUuY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS1lbXB0eVwiO1xuICAgICAgICAgICAgbWVuc2FqZS50ZXh0Q29udGVudCA9IFwiTm8gc2UgZW5jb250cmFyb24gcmVmZXJlbmNpYXMgYSBlc3RhIG5vdGFcIjtcbiAgICAgICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIE5VRVZPOiBPcmRlbmFyIGxhcyByZWZlcmVuY2lhcyBzZWdcdTAwRkFuIGxvcyBjcml0ZXJpb3MgZXNwZWNpZmljYWRvc1xuICAgIHJlZmVyZW5jaWFzRGlyZWN0YXMgPSB0aGlzLm9yZGVuYXJSZWZlcmVuY2lhcyhyZWZlcmVuY2lhc0RpcmVjdGFzKTtcbiAgICBcbiAgICAvLyBDcmVhciBsaXN0YSBwYXJhIG1vc3RyYXIgcmVmZXJlbmNpYXNcbiAgICBjb25zdCBsaXN0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ1bFwiKTtcbiAgICBsaXN0YS5jbGFzc05hbWUgPSBgYmFja2xpbmtzLXRyZWUtbGV2ZWwtJHtwcm9mdW5kaWRhZEFjdHVhbH1gO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGNhZGEgcmVmZXJlbmNpYSBhIGxhIGxpc3RhXG4gICAgZm9yIChjb25zdCByZWZlcmVuY2lhIG9mIHJlZmVyZW5jaWFzRGlyZWN0YXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEV2aXRhciBjaWNsb3NcbiAgICAgICAgICAgIGlmICh2aXNpdGFkYXMuaGFzKHJlZmVyZW5jaWEuZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhciBlbGVtZW50byBkZSBsaXN0YVxuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS1pdGVtXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBlbCBlbGVtZW50byB0b2dnbGUgeSBzdSBjb250ZW5pZG9cbiAgICAgICAgICAgIGNvbnN0IGl0ZW1Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5jbGFzc05hbWUgPSBcImJhY2tsaW5rcy10cmVlLWl0ZW0tY29udGFpbmVyXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIHRpcG8geSBlbmxhY2UgYWwgY29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgICAgICAgIGNvbnN0IHRpcG8gPSByZWZlcmVuY2lhLnR5cGVOYW1lIHx8IFwiTm90YVwiO1xuICAgICAgICAgICAgY29uc3QgdGlwb0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICB0aXBvRWwuY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS10eXBlXCI7XG4gICAgICAgICAgICB0aXBvRWwudGV4dENvbnRlbnQgPSBgWyR7dGlwb31dIGA7XG4gICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpcG9FbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGVsIGVzdGFkbyBlbnRyZSBlbCB0aXBvIHkgZWwgZW5sYWNlXG4gICAgICAgICAgICBjb25zdCBlc3RhZG8gPSByZWZlcmVuY2lhLmVzdGFkbyB8fCBcIlwiO1xuICAgICAgICAgICAgaWYgKGVzdGFkbykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFkb0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgZXN0YWRvRWwuY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS1lc3RhZG9cIjtcbiAgICAgICAgICAgICAgICBlc3RhZG9FbC50ZXh0Q29udGVudCA9IGAke2VzdGFkb30gYDtcbiAgICAgICAgICAgICAgICBlc3RhZG9FbC5zdHlsZS5tYXJnaW5SaWdodCA9IFwiNHB4XCI7XG4gICAgICAgICAgICAgICAgaXRlbUNvbnRhaW5lci5hcHBlbmRDaGlsZChlc3RhZG9FbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGVybWluYXIgZWwgdGV4dG8gcGFyYSBtb3N0cmFyIGVuIGVsIGVubGFjZVxuICAgICAgICAgICAgbGV0IG5vbWJyZU1vc3RyYWRvID0gXCJcIjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbm9tYnJlTW9zdHJhZG8gPSByZWZlcmVuY2lhLmZpbGUuYWxpYXNlcyAmJiByZWZlcmVuY2lhLmZpbGUuYWxpYXNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gcmVmZXJlbmNpYS5maWxlLmFsaWFzZXNbMF0gXG4gICAgICAgICAgICAgICAgICAgIDogKHJlZmVyZW5jaWEudGl0dWxvIHx8IHJlZmVyZW5jaWEuZmlsZS5uYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBub21icmVNb3N0cmFkbyA9IHJlZmVyZW5jaWEuZmlsZS5uYW1lIHx8IFwiU2luIG5vbWJyZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgIC8vIE1hbmVqbyBkZSBlbmxhY2VzIHBhcmEgYWJyaXIgZW4gbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCBlbmxhY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICAgIGVubGFjZS50ZXh0Q29udGVudCA9IG5vbWJyZU1vc3RyYWRvO1xuICAgICAgICAgICAgZW5sYWNlLmNsYXNzTmFtZSA9IFwiaW50ZXJuYWwtbGlua1wiO1xuXG4gICAgICAgICAgICAvLyBFbiBsdWdhciBkZSBjb25zdHJ1aXIgdW5hIFVSTCBvYnNpZGlhbjovLywgdXNhbW9zIGRhdGEtaHJlZiBwYXJhIGFsbWFjZW5hciBsYSBydXRhIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICBlbmxhY2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIsIHJlZmVyZW5jaWEuZmlsZS5wYXRoKTtcblxuICAgICAgICAgICAgLy8gVXNhbW9zIGxhIEFQSSBkZSBPYnNpZGlhbiBwYXJhIG1hbmVqYXIgZWwgY2xpYyB5IGxhIGFwZXJ0dXJhIGRlbCBhcmNoaXZvIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgZW5sYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGggPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIpO1xuICAgICAgICAgICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVsIHRlcmNlciBwYXJcdTAwRTFtZXRybyBlbiAndHJ1ZScgbGUgaW5kaWNhIGEgT2JzaWRpYW4gcXVlIGFicmEgZW4gdW5hIG51ZXZhIGhvamFcbiAgICAgICAgICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocGF0aCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGl0ZW1Db250YWluZXIuYXBwZW5kQ2hpbGQoZW5sYWNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciByZWN1cnNpdmFtZW50ZSByZWZlcmVuY2lhcyBhIGVzdGEgcmVmZXJlbmNpYVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBOdWV2byBjb25qdW50byBkZSB2aXNpdGFkYXMgcGFyYSBubyBhZmVjdGFyIG90cm9zIG5pdmVsZXNcbiAgICAgICAgICAgICAgICBjb25zdCBudWV2b1Zpc2l0YWRhcyA9IG5ldyBTZXQoWy4uLnZpc2l0YWRhc10pO1xuICAgICAgICAgICAgICAgIG51ZXZvVmlzaXRhZGFzLmFkZChyZWZlcmVuY2lhLmZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGhheSBzdWJyZWZlcmVuY2lhcyBhbnRlcyBkZSBjcmVhciBlbCB0b2dnbGVcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJSZWZlcmVuY2lhcyA9IHRoaXMuZ2VuZXJhckFyYm9sUmVmZXJlbmNpYXMoXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jaWEsIGR2LCBwcm9mdW5kaWRhZE1heGltYSwgXG4gICAgICAgICAgICAgICAgICAgIG51ZXZvVmlzaXRhZGFzLCBwcm9mdW5kaWRhZEFjdHVhbCArIDFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpIGhheSBjb250ZW5pZG8gXHUwMEZBdGlsIGVuIGxhcyBzdWJyZWZlcmVuY2lhc1xuICAgICAgICAgICAgICAgIGlmIChzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbiAmJiBzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBoYXkgbVx1MDBFMXMgcXVlIHNvbG8gZWwgdFx1MDBFRHR1bG9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGllbmVDb250ZW5pZG9VdGlsID0gc3ViUmVmZXJlbmNpYXMuY2hpbGRyZW4ubGVuZ3RoID4gMSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgIChzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIXN1YlJlZmVyZW5jaWFzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcImJhY2tsaW5rcy10cmVlLXRpdGxlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWVuZUNvbnRlbmlkb1V0aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWFyIGVsIGVsZW1lbnRvIHRvZ2dsZSAoYm90XHUwMEYzbiBxdWUgaW5kaWNhIHNpIGhheSBzdWJyZWZlcmVuY2lhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9IFwiYmFja2xpbmtzLXRyZWUtdG9nZ2xlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlx1MjVCQVwiOyAvLyBUcmlcdTAwRTFuZ3VsbyBhIGxhIGRlcmVjaGEgKGNlcnJhZG8pXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydGFyIGVsIHRvZ2dsZSBhbCBpbmljaW8gZGVsIGl0ZW1Db250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1Db250YWluZXIuaW5zZXJ0QmVmb3JlKHRvZ2dsZUJ1dHRvbiwgaXRlbUNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgY29udGVuZWRvciBwYXJhIHN1YnJlZmVyZW5jaWFzIHF1ZSBzZXJcdTAwRTEgdG9nZ2xlYWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRhaW5lci5jbGFzc05hbWUgPSBcImJhY2tsaW5rcy10cmVlLXN1YmNvbnRhaW5lclwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8gT2N1bHRvIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJDb250YWluZXIuYXBwZW5kQ2hpbGQoc3ViUmVmZXJlbmNpYXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBldmVudG8gYWwgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlx1MjVCQ1wiOyAvLyBUcmlcdTAwRTFuZ3VsbyBoYWNpYSBhYmFqbyAoYWJpZXJ0bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiXHUyNUJBXCI7IC8vIFRyaVx1MDBFMW5ndWxvIGEgbGEgZGVyZWNoYSAoY2VycmFkbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBzdWJjb250YWluZXIgZGVzcHVcdTAwRTlzIGRlbCBpdGVtQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGl0ZW1Db250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChzdWJDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gaGF5IHN1YnJlZmVyZW5jaWFzIFx1MDBGQXRpbGVzLCBzb2xvIGFcdTAwRjFhZGlyIGVsIGl0ZW1Db250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoaXRlbUNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBoYXkgbmluZ3VuYSBzdWJyZWZlcmVuY2lhLCBzb2xvIGFcdTAwRjFhZGlyIGVsIGl0ZW1Db250YWluZXJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChpdGVtQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGxhIHJlY3Vyc2lcdTAwRjNuIHBhcmEgXCIgKyByZWZlcmVuY2lhLmZpbGUucGF0aCwgZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICBlcnJvck1zZy5jbGFzc05hbWUgPSBcImJhY2tsaW5rcy10cmVlLWVycm9yXCI7XG4gICAgICAgICAgICAgICAgZXJyb3JNc2cudGV4dENvbnRlbnQgPSBcIiAoRXJyb3IgYWwgb2J0ZW5lciBzdWJyZWZlcmVuY2lhcylcIjtcbiAgICAgICAgICAgICAgICBpdGVtQ29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yTXNnKTtcbiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGl0ZW1Db250YWluZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBpdGVtIGNvbXBsZXRvIGEgbGEgbGlzdGFcbiAgICAgICAgICAgIGxpc3RhLmFwcGVuZENoaWxkKGl0ZW0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciByZWZlcmVuY2lhOlwiLCBlKTtcbiAgICAgICAgICAgIC8vIENvbnRpbnVhciBjb24gbGEgc2lndWllbnRlIHJlZmVyZW5jaWFcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGxhIGxpc3RhIGFsIGNvbnRlbmVkb3JcbiAgICB0cnkge1xuICAgICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKGxpc3RhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhXHUwMEYxYWRpciBsaXN0YSBhbCBjb250ZW5lZG9yOlwiLCBlKTtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgZXJyb3JNc2cuY2xhc3NOYW1lID0gXCJiYWNrbGlua3MtdHJlZS1lcnJvclwiO1xuICAgICAgICBlcnJvck1zZy50ZXh0Q29udGVudCA9IFwiRXJyb3IgYWwgZ2VuZXJhciBlc3RydWN0dXJhIGRlIFx1MDBFMXJib2xcIjtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChlcnJvck1zZyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb250ZW5lZG9yO1xufVxuXG4vKipcbiAqIE9yZGVuYSB1biBhcnJheSBkZSByZWZlcmVuY2lhcyBzZWdcdTAwRkFuIHRyZXMgY3JpdGVyaW9zIGplclx1MDBFMXJxdWljb3M6XG4gKiAxLiBQb3IgdGlwbyBkZSBub3RhICh0eXBlTmFtZSlcbiAqIDIuIFBvciBlc3RhZG8gKHNpbiBlc3RhZG8gXHUyMTkyIFx1RDgzRFx1REZFMiBcdTIxOTIgXHVEODNEXHVERkUxIFx1MjE5MiBcdUQ4M0RcdUREMzQgXHUyMTkyIFx1RDgzRFx1REQzNSlcbiAqIDMuIFBvciBmZWNoYSBkZSBjcmVhY2lcdTAwRjNuIChtXHUwMEUxcyByZWNpZW50ZSBwcmltZXJvKVxuICogXG4gKiBAcGFyYW0ge0FycmF5fSByZWZlcmVuY2lhcyAtIEFycmF5IGRlIHJlZmVyZW5jaWFzIGEgb3JkZW5hclxuICogQHJldHVybnMge0FycmF5fSAtIEFycmF5IG9yZGVuYWRvIGRlIHJlZmVyZW5jaWFzXG4gKi9cbm9yZGVuYXJSZWZlcmVuY2lhcyhyZWZlcmVuY2lhcykge1xuICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIG9idGVuZXIgZWwgcGVzbyBkZWwgZXN0YWRvIHBhcmEgb3JkZW5hbWllbnRvXG4gICAgY29uc3QgcGVzb0VzdGFkbyA9IChlc3RhZG8pID0+IHtcbiAgICAgICAgaWYgKCFlc3RhZG8pIHJldHVybiAwOyAvLyBTaW4gZXN0YWRvIChwcmltZXJvKVxuICAgICAgICBzd2l0Y2ggKGVzdGFkbykge1xuICAgICAgICAgICAgY2FzZSAnXHVEODNEXHVERkUyJzogcmV0dXJuIDE7XG4gICAgICAgICAgICBjYXNlICdcdUQ4M0RcdURGRTEnOiByZXR1cm4gMjtcbiAgICAgICAgICAgIGNhc2UgJ1x1RDgzRFx1REQzNCc6IHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSAnXHVEODNEXHVERDM1JzogcmV0dXJuIDQ7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gNTsgLy8gQ3VhbHF1aWVyIG90cm8gZXN0YWRvXG4gICAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIE9yZGVuYXIgcmVmZXJlbmNpYXMgcG9yIGxvcyB0cmVzIGNyaXRlcmlvc1xuICAgIHJldHVybiBbLi4ucmVmZXJlbmNpYXNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgLy8gMS4gT3JkZW5hciBwb3IgdHlwZU5hbWUgKHRpcG8gZGUgbm90YSlcbiAgICAgICAgY29uc3QgdGlwb0EgPSBhLnR5cGVOYW1lIHx8ICcnO1xuICAgICAgICBjb25zdCB0aXBvQiA9IGIudHlwZU5hbWUgfHwgJyc7XG4gICAgICAgIGlmICh0aXBvQSAhPT0gdGlwb0IpIHtcbiAgICAgICAgICAgIHJldHVybiB0aXBvQS5sb2NhbGVDb21wYXJlKHRpcG9CKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMi4gT3JkZW5hciBwb3IgZXN0YWRvXG4gICAgICAgIGNvbnN0IGVzdGFkb0EgPSBwZXNvRXN0YWRvKGEuZXN0YWRvKTtcbiAgICAgICAgY29uc3QgZXN0YWRvQiA9IHBlc29Fc3RhZG8oYi5lc3RhZG8pO1xuICAgICAgICBpZiAoZXN0YWRvQSAhPT0gZXN0YWRvQikge1xuICAgICAgICAgICAgcmV0dXJuIGVzdGFkb0EgLSBlc3RhZG9CO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiBPcmRlbmFyIHBvciBmZWNoYSBkZSBjcmVhY2lcdTAwRjNuIChtXHUwMEUxcyByZWNpZW50ZSBwcmltZXJvKVxuICAgICAgICAvLyBJbnRlbnRhciBvYnRlbmVyIGZlY2hhIGRlIGNyZWFjaVx1MDBGM24gZGVsIGZpbGUuY3RpbWUgKHRpbWVzdGFtcCBkZSBjcmVhY2lcdTAwRjNuKVxuICAgICAgICBsZXQgZmVjaGFBID0gYS5maWxlICYmIGEuZmlsZS5jdGltZSA/IGEuZmlsZS5jdGltZSA6IDA7XG4gICAgICAgIGxldCBmZWNoYUIgPSBiLmZpbGUgJiYgYi5maWxlLmN0aW1lID8gYi5maWxlLmN0aW1lIDogMDtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGhheSBjdGltZSwgaW50ZW50YSBvYnRlbmVyIGxhIGZlY2hhIGRlbCBmcm9udG1hdHRlclxuICAgICAgICBpZiAoIWZlY2hhQSAmJiBhLmZlY2hhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZlY2hhQSA9IG5ldyBEYXRlKGEuZmVjaGEpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBmZWNoYUEgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZlY2hhQiAmJiBiLmZlY2hhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZlY2hhQiA9IG5ldyBEYXRlKGIuZmVjaGEpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBmZWNoYUIgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPcmRlbmFyIGRlc2NlbmRlbnRlIChtXHUwMEUxcyByZWNpZW50ZSBwcmltZXJvKVxuICAgICAgICByZXR1cm4gZmVjaGFCIC0gZmVjaGFBO1xuICAgIH0pO1xufVxuXG5cbi8qKlxuICogTXVlc3RyYSBlbmxhY2VzIHNpbmNyb25pemFkb3MgZW4gTm90aW9uIGRlc2RlIGVsIGZyb250bWF0dGVyIFxuICogcXVlIGNvbWllbnphbiBjb24gZWwgcHJlZmlqbyBcImxpbmstXCJcbiAqIEBwYXJhbSBkdiBFbCBvYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHBhcmFtIHBhZ2luYSBMYSBwXHUwMEUxZ2luYSBhY3R1YWwgKG5vcm1hbG1lbnRlIGR2LmN1cnJlbnQoKSlcbiAqIEByZXR1cm5zIEVsIGNvbnRlbmVkb3IgY29uIGxvcyByZXN1bHRhZG9zXG4gKi9cbm1vc3RyYXJFbmxhY2VzU2luY3Jvbml6YWRvcyhkdiwgcGFnaW5hKSB7XG4gICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGxvcyByZXN1bHRhZG9zXG4gICAgY29uc3QgY29udGVuZWRvciA9IGR2LmVsKFwiZGl2XCIsIFwiXCIsIHsgY2xzOiBcIm5vdGlvbi1saW5rcy1jb250YWluZXJcIiB9KTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICAvLyBPYnRlbmVyIGVsIGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IG1ldGEgPSBwYWdpbmEuZmlsZS5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKCFtZXRhKSB7XG4gICAgICAgICAgICAvLyBTaSBubyBoYXkgZnJvbnRtYXR0ZXIsIG5vIG1vc3RyYW1vcyBuYWRhIHBhcmEgYWhvcnJhciBlc3BhY2lvXG4gICAgICAgICAgICByZXR1cm4gY29udGVuZWRvcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCB2YWxvciBkZSB0eXBlTmFtZSBzaSBleGlzdGVcbiAgICAgICAgY29uc3QgdHlwZU5hbWUgPSBtZXRhLnR5cGVOYW1lIHx8IFwiRWxlbWVudG9cIjtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIHZlcmlmaWNhciBzaSB1bmEgVVJMIGVzIHZcdTAwRTFsaWRhIChtXHUwMEUxcyBxdWUgc29sbyBodHRwczovLylcbiAgICAgICAgY29uc3QgaXNWYWxpZFVybCA9ICh1cmwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiBcbiAgICAgICAgICAgICAgICAgICB1cmwuc3RhcnRzV2l0aCgnaHR0cCcpICYmIFxuICAgICAgICAgICAgICAgICAgIHVybC5sZW5ndGggPiA4OyAvLyBNXHUwMEUxcyBsYXJnbyBxdWUgc29sbyBcImh0dHBzOi8vXCJcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlY29waWxhbW9zIHRvZG9zIGxvcyBlbmxhY2VzIHJlbGV2YW50ZXNcbiAgICAgICAgY29uc3QgZW5sYWNlcyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gMS4gRW5sYWNlcyBxdWUgY29taWVuemFuIGNvbiBcImxpbmstXCIgKE5vdGlvbilcbiAgICAgICAgT2JqZWN0LmVudHJpZXMobWV0YSlcbiAgICAgICAgICAgIC5maWx0ZXIoKFtrZXksIHZhbHVlXSkgPT4ga2V5LnN0YXJ0c1dpdGgoXCJsaW5rLVwiKSAmJiBpc1ZhbGlkVXJsKHZhbHVlKSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IGVubGFjZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IFwiTm90aW9uXCIsXG4gICAgICAgICAgICAgICAgdXJsOiB2YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gMi4gRW5sYWNlcyBlc3BlY1x1MDBFRGZpY29zIHNlZ1x1MDBGQW4gZWwgdGlwbyBkZSBlbGVtZW50b1xuICAgICAgICBpZiAodHlwZU5hbWUgPT09IFwiQ2FtcGFcdTAwRjFhXCIgJiYgaXNWYWxpZFVybChtZXRhLmluZGljYWRvcmVzKSkge1xuICAgICAgICAgICAgZW5sYWNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogXCJJbmRpY2Fkb3JlcyBkZSBjYW1wYVx1MDBGMWFcIixcbiAgICAgICAgICAgICAgICB1cmw6IG1ldGEuaW5kaWNhZG9yZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodHlwZU5hbWUgPT09IFwiRW50cmVnYWJsZVwiKSB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZFVybChtZXRhLnBpZXphTnViZSkpIHtcbiAgICAgICAgICAgICAgICBlbmxhY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJQaWV6YSBlbiBsYSBudWJlXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogbWV0YS5waWV6YU51YmVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGlzVmFsaWRVcmwobWV0YS51cmxDYW52YSkpIHtcbiAgICAgICAgICAgICAgICBlbmxhY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJEaXNlXHUwMEYxbyBlbiBDYW52YVwiLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IG1ldGEudXJsQ2FudmFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gaGF5IGVubGFjZXMsIG5vIG1vc3RyYW1vcyBuYWRhXG4gICAgICAgIGlmIChlbmxhY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1vc3RyYXIgY2FkYSBlbmxhY2VcbiAgICAgICAgZW5sYWNlcy5mb3JFYWNoKGVubGFjZSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhciB1biBwXHUwMEUxcnJhZm8gcGFyYSBjYWRhIGVubGFjZVxuICAgICAgICAgICAgY29uc3QgcGFycmFmbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgcGFycmFmby5jbGFzc0xpc3QuYWRkKFwibm90aW9uLWxpbmstaXRlbVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgdGV4dG8gY29uIGxhIGV0aXF1ZXRhIGVzcGVjXHUwMEVEZmljYVxuICAgICAgICAgICAgcGFycmFmby50ZXh0Q29udGVudCA9IGAke3R5cGVOYW1lfSAtICR7ZW5sYWNlLmxhYmVsfSBlbiBgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhciBlbmxhY2VcbiAgICAgICAgICAgIGNvbnN0IGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgICBsaW5rRWxlbWVudC5ocmVmID0gZW5sYWNlLnVybDtcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnRleHRDb250ZW50ID0gZW5sYWNlLnVybDtcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnRhcmdldCA9IFwiX2JsYW5rXCI7IC8vIEFicmlyIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgbGlua0VsZW1lbnQucmVsID0gXCJub29wZW5lciBub3JlZmVycmVyXCI7IC8vIFNlZ3VyaWRhZCBwYXJhIGVubGFjZXMgZXh0ZXJub3NcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgZWwgZW5sYWNlIGFsIHBcdTAwRTFycmFmb1xuICAgICAgICAgICAgcGFycmFmby5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGVsIHBcdTAwRTFycmFmbyBhbCBjb250ZW5lZG9yXG4gICAgICAgICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKHBhcnJhZm8pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIHByb2Nlc2FyIGVubGFjZXMgc2luY3Jvbml6YWRvczpcIiwgZXJyb3IpO1xuICAgICAgICAvLyBObyBtb3N0cmFtb3MgbWVuc2FqZSBkZSBlcnJvciBwYXJhIGFob3JyYXIgZXNwYWNpb1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVuZWRvcjtcbn1cbi8vIC0tLS0tLS1cblxuLyoqXG4gKiBQcm9jZXNhIHkgcHJlcGFyYSBsYXMgZXN0YWRcdTAwRURzdGljYXMgZGUgdGllbXBvIHBhcmEgdW4gcHJveWVjdG9cbiAqIEBwYXJhbSBwcm95ZWN0b1BhdGggUnV0YSBjb21wbGV0YSBkZWwgYXJjaGl2byBkZWwgcHJveWVjdG9cbiAqIEByZXR1cm5zIE9iamV0byBjb24gdG9kYXMgbGFzIGVzdGFkXHUwMEVEc3RpY2FzIHkgcmVnaXN0cm9zIHByb2Nlc2Fkb3NcbiAqL1xuYXN5bmMgb2J0ZW5lckVzdGFkaXN0aWNhc1RpZW1wbyhwcm95ZWN0b1BhdGgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gT2J0ZW5lciBjYXJwZXRhIGRlIHJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVzZGUgbGEgY29uZmlndXJhY2lcdTAwRjNuXG4gICAgICBjb25zdCBmb2xkZXJSVCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICAgIFxuICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgZm9ybWF0ZWFyIGR1cmFjaVx1MDBGM24gZW4gbWlsaXNlZ3VuZG9zIGEgZm9ybWF0byBsZWdpYmxlXG4gICAgICBjb25zdCBmb3JtYXREdXJhdGlvbiA9IChtcykgPT4ge1xuICAgICAgICBpZiAobXMgPT09IG51bGwgfHwgbXMgPT09IHVuZGVmaW5lZCB8fCBpc05hTihtcykpIHtcbiAgICAgICAgICByZXR1cm4gXCJObyBkZWZpbmlkb1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIENvbnZlcnRpciBtaWxpc2VndW5kb3MgYSBtaW51dG9zLCBob3JhcyB5IGRcdTAwRURhc1xuICAgICAgICAgIGxldCBtaW51dG9zID0gTWF0aC5mbG9vcihtcyAvICgxMDAwICogNjApKTtcbiAgICAgICAgICBsZXQgaG9yYXMgPSBNYXRoLmZsb29yKG1pbnV0b3MgLyA2MCk7XG4gICAgICAgICAgbWludXRvcyA9IG1pbnV0b3MgJSA2MDtcbiAgICAgICAgICBsZXQgZGlhcyA9IE1hdGguZmxvb3IoaG9yYXMgLyAyNCk7XG4gICAgICAgICAgaG9yYXMgPSBob3JhcyAlIDI0O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEZvcm1hdGVhciBlbCBzdHJpbmcgZGUgc2FsaWRhXG4gICAgICAgICAgaWYgKGRpYXMgPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7ZGlhc30gZCAke2hvcmFzfSBoICR7bWludXRvc30gbWluYDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGhvcmFzID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke2hvcmFzfSBoICR7bWludXRvc30gbWluYDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYWxjdWxhciB0aWVtcG8gdHJhbnNjdXJyaWRvIGRlc2RlIHVuYSBmZWNoYVxuICAgICAgY29uc3QgdGllbXBvRGVzZGUgPSAoZmVjaGFTdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKCFmZWNoYVN0cmluZykgcmV0dXJuIFwiRGVzY29ub2NpZG9cIjtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gRXh0cmFlciBmZWNoYSB5IGhvcmEgZGUgZm9ybWF0b3MgY29tdW5lc1xuICAgICAgICAgIGxldCBmZWNoYTtcbiAgICAgICAgICBpZiAoZmVjaGFTdHJpbmcuaW5jbHVkZXMoJyAnKSkge1xuICAgICAgICAgICAgLy8gRm9ybWF0byBcIllZWVktTU0tREQgZFx1MDBFRGEgSEg6bW1cIlxuICAgICAgICAgICAgY29uc3QgcGFydGVzID0gZmVjaGFTdHJpbmcuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhU29sbyA9IHBhcnRlc1swXTsgLy8gWVlZWS1NTS1ERFxuICAgICAgICAgICAgY29uc3QgaG9yYVNvbG8gPSBwYXJ0ZXNbcGFydGVzLmxlbmd0aCAtIDFdOyAvLyBISDptbVxuICAgICAgICAgICAgZmVjaGEgPSBuZXcgRGF0ZShgJHtmZWNoYVNvbG99VCR7aG9yYVNvbG99YCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZlY2hhID0gbmV3IERhdGUoZmVjaGFTdHJpbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaXNOYU4oZmVjaGEuZ2V0VGltZSgpKSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiRmVjaGEgaW52XHUwMEUxbGlkYVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBhaG9yYSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgY29uc3QgZGlmZXJlbmNpYSA9IGFob3JhLmdldFRpbWUoKSAtIGZlY2hhLmdldFRpbWUoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDb252ZXJ0aXIgYSBkXHUwMEVEYXMvaG9yYXMvbWludXRvc1xuICAgICAgICAgIGNvbnN0IGRpYXMgPSBNYXRoLmZsb29yKGRpZmVyZW5jaWEgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgICAgICAgIGNvbnN0IGhvcmFzID0gTWF0aC5mbG9vcigoZGlmZXJlbmNpYSAlICgxMDAwICogNjAgKiA2MCAqIDI0KSkgLyAoMTAwMCAqIDYwICogNjApKTtcbiAgICAgICAgICBjb25zdCBtaW51dG9zID0gTWF0aC5mbG9vcigoZGlmZXJlbmNpYSAlICgxMDAwICogNjAgKiA2MCkpIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkaWFzID4gMzApIHtcbiAgICAgICAgICAgIHJldHVybiBgaGFjZSAke01hdGguZmxvb3IoZGlhcyAvIDMwKX0gbWVzZXNgO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZGlhcyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBgaGFjZSAke2RpYXN9IGRcdTAwRURhc2A7XG4gICAgICAgICAgfSBlbHNlIGlmIChob3JhcyA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBgaGFjZSAke2hvcmFzfSBob3Jhc2A7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBgaGFjZSAke21pbnV0b3N9IG1pbnV0b3NgO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBmZWNoYTpcIiwgZSk7XG4gICAgICAgICAgcmV0dXJuIFwiRXJyb3IgZW4gZmVjaGFcIjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gT2J0ZW5lciBlbCBwcm95ZWN0byB5IHN1IGFsaWFzL3RcdTAwRUR0dWxvXG4gICAgICBjb25zdCBwcm95ZWN0b0ZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHByb3llY3RvUGF0aCk7XG4gICAgICBpZiAoIXByb3llY3RvRmlsZSkge1xuICAgICAgICByZXR1cm4geyBlcnJvcjogXCJQcm95ZWN0byBubyBlbmNvbnRyYWRvXCIgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbWV0YWRhdGFQcm95ZWN0byA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShwcm95ZWN0b0ZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IHByb3llY3RvQWxpYXMgPSBtZXRhZGF0YVByb3llY3RvPy5hbGlhc2VzPy5bMF0gfHwgbWV0YWRhdGFQcm95ZWN0bz8udGl0dWxvIHx8IHByb3llY3RvRmlsZS5iYXNlbmFtZTtcbiAgICAgIFxuICAgICAgLy8gRmVjaGEgYWN0dWFsIHkgbFx1MDBFRG1pdGVzIHBhcmEgbG9zIHBlclx1MDBFRG9kb3NcbiAgICAgIGNvbnN0IGFob3JhID0gbmV3IERhdGUoKTtcbiAgICAgIGNvbnN0IGxpbWl0ZTdEaWFzID0gbmV3IERhdGUoYWhvcmEpO1xuICAgICAgbGltaXRlN0RpYXMuc2V0RGF0ZShhaG9yYS5nZXREYXRlKCkgLSA3KTtcbiAgICAgIGNvbnN0IGxpbWl0ZTMwRGlhcyA9IG5ldyBEYXRlKGFob3JhKTtcbiAgICAgIGxpbWl0ZTMwRGlhcy5zZXREYXRlKGFob3JhLmdldERhdGUoKSAtIDMwKTtcbiAgICAgIFxuICAgICAgLy8gQnVzY2FyIHRvZG9zIGxvcyByZWdpc3Ryb3MgZGUgdGllbXBvIHJlbGFjaW9uYWRvcyBjb24gZXN0ZSBwcm95ZWN0b1xuICAgICAgLy8gRXN0byBlcyBsbyBtXHUwMEUxcyBwZXNhZG8geSBsbyBoYWNlbW9zIHVuYSBzb2xhIHZleiBlbiBlbCBwbHVnaW5cbiAgICAgIGxldCByZWdpc3Ryb3MgPSBbXTtcbiAgICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyUlQgKyBcIi9cIikpO1xuICAgICAgXG4gICAgICAvLyBQcm9jZXNhciBjYWRhIGFyY2hpdm8gZGUgcmVnaXN0cm8gZGUgdGllbXBvXG4gICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWxsRmlsZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgaWYgKCFtZXRhZGF0YSkgY29udGludWU7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVzdGUgcmVnaXN0cm8gZXN0XHUwMEUxIHJlbGFjaW9uYWRvIGNvbiBlbCBwcm95ZWN0byBhY3R1YWxcbiAgICAgICAgICBsZXQgZXN0YVJlbGFjaW9uYWRvID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ29tcHJvYmFyIHByb3llY3RvR1REXG4gICAgICAgICAgaWYgKG1ldGFkYXRhLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YS5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgLy8gUGFyYSBjYWRhIGVsZW1lbnRvIGRlbCBhcnJheSBwcm95ZWN0b0dURFxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHByb3llY3RvIG9mIG1ldGFkYXRhLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgLy8gRWxpbWluYXIgY29yY2hldGVzIGRlIHdpa2xpbmtzXG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9MaW1waW8gPSBwcm95ZWN0by5yZXBsYWNlKC9cXFtcXFt8XFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDb21wcm9iYXIgc2kgY29udGllbmUgbGEgcnV0YSBvIGVsIG5vbWJyZSBkZWwgcHJveWVjdG9cbiAgICAgICAgICAgICAgICBpZiAocHJveWVjdG9MaW1waW8uaW5jbHVkZXMocHJveWVjdG9QYXRoKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgcHJveWVjdG9MaW1waW8uaW5jbHVkZXMocHJveWVjdG9GaWxlLmJhc2VuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgICAocHJveWVjdG9BbGlhcyAmJiBwcm95ZWN0b0xpbXBpby5pbmNsdWRlcyhwcm95ZWN0b0FsaWFzKSkpIHtcbiAgICAgICAgICAgICAgICAgIGVzdGFSZWxhY2lvbmFkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGFkYXRhLnByb3llY3RvR1REID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAvLyBTaSBlcyB1biBzdHJpbmcsIGhhY2VyIGxhIG1pc21hIGNvbXByb2JhY2lcdTAwRjNuXG4gICAgICAgICAgICAgIGNvbnN0IHByb3llY3RvTGltcGlvID0gbWV0YWRhdGEucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbfFxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIGlmIChwcm95ZWN0b0xpbXBpby5pbmNsdWRlcyhwcm95ZWN0b1BhdGgpIHx8IFxuICAgICAgICAgICAgICAgICAgcHJveWVjdG9MaW1waW8uaW5jbHVkZXMocHJveWVjdG9GaWxlLmJhc2VuYW1lKSB8fFxuICAgICAgICAgICAgICAgICAgKHByb3llY3RvQWxpYXMgJiYgcHJveWVjdG9MaW1waW8uaW5jbHVkZXMocHJveWVjdG9BbGlhcykpKSB7XG4gICAgICAgICAgICAgICAgZXN0YVJlbGFjaW9uYWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTaSBlc3RcdTAwRTEgcmVsYWNpb25hZG8sIGFcdTAwRjFhZGlybG8gYSBsb3MgcmVnaXN0cm9zXG4gICAgICAgICAgaWYgKGVzdGFSZWxhY2lvbmFkbykge1xuICAgICAgICAgICAgLy8gT2J0ZW5lciBpbmZvcm1hY2lcdTAwRjNuIGRlIGFzdW50byBzaSBleGlzdGVcbiAgICAgICAgICAgIGxldCBhc3VudG9BbGlhcyA9IG51bGw7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGEuYXN1bnRvICYmIG1ldGFkYXRhLmFzdW50by5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSW50ZW50YXIgZXh0cmFlciBlbCBhc3VudG8gKGZvcm1hdG8gd2lraSlcbiAgICAgICAgICAgICAgICBjb25zdCBhc3VudG9TdHIgPSBtZXRhZGF0YS5hc3VudG9bMF07XG4gICAgICAgICAgICAgICAgLy8gRXh0cmFlciBsYSBydXRhIGRlbCBhc3VudG8gZGUgZm9ybWF0byBbW3J1dGF8YWxpYXNdXVxuICAgICAgICAgICAgICAgIGNvbnN0IGFzdW50b01hdGNoID0gYXN1bnRvU3RyLm1hdGNoKC9cXFtcXFsoLio/KSg/OlxcfCguKj8pKT9cXF1cXF0vKTtcbiAgICAgICAgICAgICAgICBpZiAoYXN1bnRvTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFzdW50b1BhdGggPSBhc3VudG9NYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFzdW50b0ZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGFzdW50b1BhdGggKyBcIi5tZFwiKTtcbiAgICAgICAgICAgICAgICAgIGlmIChhc3VudG9GaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzdW50b01ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFzdW50b0ZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICAgICAgYXN1bnRvQWxpYXMgPSBhc3VudG9NZXRhZGF0YT8uYWxpYXNlcz8uWzBdIHx8IGFzdW50b01ldGFkYXRhPy50aXR1bG8gfHwgYXN1bnRvRmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHJvY2VzYW5kbyBhc3VudG86XCIsIGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIG9iamV0byBkZSByZWdpc3RybyBjb24gdG9kYSBsYSBpbmZvcm1hY2lcdTAwRjNuIG5lY2VzYXJpYVxuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSB7XG4gICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgYmFzZW5hbWU6IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICAgIGRlc2NyaXBjaW9uOiBtZXRhZGF0YS5kZXNjcmlwY2lvbiB8fCBcIlNpbiBkZXNjcmlwY2lcdTAwRjNuXCIsXG4gICAgICAgICAgICAgIHRpZW1wb1RyYWJhamFkbzogbWV0YWRhdGEudGllbXBvVHJhYmFqYWRvIHx8IDAsXG4gICAgICAgICAgICAgIGVzdGFkbzogbWV0YWRhdGEuZXN0YWRvIHx8IFwiXHVEODNEXHVERDA0XCIsXG4gICAgICAgICAgICAgIGhvcmFJbmljaW86IG1ldGFkYXRhLmhvcmFJbmljaW8gfHwgbWV0YWRhdGEuZmVjaGEgfHwgXCJEZXNjb25vY2lkb1wiLFxuICAgICAgICAgICAgICBob3JhRmluYWw6IG1ldGFkYXRhLmhvcmFGaW5hbCB8fCBcIlwiLFxuICAgICAgICAgICAgICBhc3VudG9BbGlhczogYXN1bnRvQWxpYXMsXG4gICAgICAgICAgICAgIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgW10sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZWdpc3Ryb3MucHVzaChyZWdpc3Rybyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc2FuZG8gYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE9yZGVuYXIgcmVnaXN0cm9zIHBvciBob3JhRmluYWwgZGVzY2VuZGVudGVcbiAgICAgIHJlZ2lzdHJvcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIC8vIFByaW1lcm8gaW50ZW50YW1vcyBvcmRlbmFyIHBvciBob3JhRmluYWxcbiAgICAgICAgaWYgKGEuaG9yYUZpbmFsICYmIGIuaG9yYUZpbmFsKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGIuaG9yYUZpbmFsKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmhvcmFGaW5hbCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNpIG5vIGhheSBob3JhRmluYWwsIG9yZGVuYW1vcyBwb3IgaG9yYUluaWNpb1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoYi5ob3JhSW5pY2lvKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmhvcmFJbmljaW8pLmdldFRpbWUoKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBDYWxjdWxhciBlc3RhZFx1MDBFRHN0aWNhc1xuICAgICAgbGV0IHRvdGFsVGllbXBvVHJhYmFqYWRvID0gMDtcbiAgICAgIGxldCB1bHRpbWFBY3RpdmlkYWQgPSByZWdpc3Ryb3MubGVuZ3RoID4gMCA/IChyZWdpc3Ryb3NbMF0uaG9yYUZpbmFsIHx8IHJlZ2lzdHJvc1swXS5ob3JhSW5pY2lvKSA6IG51bGw7XG4gICAgICBsZXQgdGllbXBvVWx0aW1vczdEaWFzID0gMDtcbiAgICAgIGxldCB0aWVtcG9VbHRpbW9zMzBEaWFzID0gMDtcbiAgICAgIFxuICAgICAgLy8gUHJvY2VzYXIgY2FkYSByZWdpc3RybyBwYXJhIGNhbGN1bGFyIGVzdGFkXHUwMEVEc3RpY2FzXG4gICAgICBmb3IgKGxldCByZWdpc3RybyBvZiByZWdpc3Ryb3MpIHtcbiAgICAgICAgLy8gU3VtYXIgdGllbXBvIHRvdGFsXG4gICAgICAgIHRvdGFsVGllbXBvVHJhYmFqYWRvICs9IHJlZ2lzdHJvLnRpZW1wb1RyYWJhamFkbztcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlc3RcdTAwRTEgZW4gbG9zIFx1MDBGQWx0aW1vcyBwZXJcdTAwRURvZG9zXG4gICAgICAgIGxldCBmZWNoYVJlZ2lzdHJvO1xuICAgICAgICBpZiAocmVnaXN0cm8uaG9yYUZpbmFsKSB7XG4gICAgICAgICAgLy8gRXh0cmFlciBmZWNoYSBkZSBmb3JtYXRvIFwiWVlZWS1NTS1ERCBkXHUwMEVEYSBISDptbVwiXG4gICAgICAgICAgY29uc3QgcGFydGVzID0gcmVnaXN0cm8uaG9yYUZpbmFsLnNwbGl0KCcgJyk7XG4gICAgICAgICAgY29uc3QgZmVjaGFTb2xvID0gcGFydGVzWzBdOyAvLyBZWVlZLU1NLUREXG4gICAgICAgICAgZmVjaGFSZWdpc3RybyA9IG5ldyBEYXRlKGZlY2hhU29sbyk7XG4gICAgICAgIH0gZWxzZSBpZiAocmVnaXN0cm8uaG9yYUluaWNpbykge1xuICAgICAgICAgIC8vIEV4dHJhZXIgZmVjaGEgZGUgb3Ryb3MgZm9ybWF0b3MgcG9zaWJsZXNcbiAgICAgICAgICBjb25zdCBwYXJ0ZXNGZWNoYSA9IHJlZ2lzdHJvLmhvcmFJbmljaW8uc3BsaXQoJyAnKTtcbiAgICAgICAgICBmZWNoYVJlZ2lzdHJvID0gbmV3IERhdGUocGFydGVzRmVjaGFbMF0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZmVjaGFSZWdpc3Rybykge1xuICAgICAgICAgIGlmIChmZWNoYVJlZ2lzdHJvID49IGxpbWl0ZTdEaWFzKSB7XG4gICAgICAgICAgICB0aWVtcG9VbHRpbW9zN0RpYXMgKz0gcmVnaXN0cm8udGllbXBvVHJhYmFqYWRvO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZmVjaGFSZWdpc3RybyA+PSBsaW1pdGUzMERpYXMpIHtcbiAgICAgICAgICAgIHRpZW1wb1VsdGltb3MzMERpYXMgKz0gcmVnaXN0cm8udGllbXBvVHJhYmFqYWRvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgcHJvcGllZGFkIGZvcm1hdGVhZGEgcGFyYSBtb3N0cmFyIGVuIGxhIHRhYmxhXG4gICAgICAgIHJlZ2lzdHJvLnRpZW1wb0Zvcm1hdGVhZG8gPSBmb3JtYXREdXJhdGlvbihyZWdpc3Ryby50aWVtcG9UcmFiYWphZG8pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhciB5IHJldG9ybmFyIG9iamV0byBjb24gdG9kYSBsYSBpbmZvcm1hY2lcdTAwRjNuIHByb2Nlc2FkYVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJveWVjdG86IHtcbiAgICAgICAgICBwYXRoOiBwcm95ZWN0b1BhdGgsXG4gICAgICAgICAgbm9tYnJlOiBwcm95ZWN0b0ZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgYWxpYXM6IHByb3llY3RvQWxpYXNcbiAgICAgICAgfSxcbiAgICAgICAgZXN0YWRpc3RpY2FzOiB7XG4gICAgICAgICAgdG90YWxUaWVtcG9UcmFiYWphZG86IHtcbiAgICAgICAgICAgIHZhbG9yOiB0b3RhbFRpZW1wb1RyYWJhamFkbyxcbiAgICAgICAgICAgIGZvcm1hdGVhZG86IGZvcm1hdER1cmF0aW9uKHRvdGFsVGllbXBvVHJhYmFqYWRvKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbnVtU2VzaW9uZXM6IHJlZ2lzdHJvcy5sZW5ndGgsXG4gICAgICAgICAgdWx0aW1hQWN0aXZpZGFkOiB7XG4gICAgICAgICAgICBmZWNoYTogdWx0aW1hQWN0aXZpZGFkLFxuICAgICAgICAgICAgdGllbXBvRGVzZGU6IHVsdGltYUFjdGl2aWRhZCA/IHRpZW1wb0Rlc2RlKHVsdGltYUFjdGl2aWRhZCkgOiBcIlNpbiBhY3RpdmlkYWRcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdWx0aW1vczdEaWFzOiB7XG4gICAgICAgICAgICB2YWxvcjogdGllbXBvVWx0aW1vczdEaWFzLFxuICAgICAgICAgICAgZm9ybWF0ZWFkbzogZm9ybWF0RHVyYXRpb24odGllbXBvVWx0aW1vczdEaWFzKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdWx0aW1vczMwRGlhczoge1xuICAgICAgICAgICAgdmFsb3I6IHRpZW1wb1VsdGltb3MzMERpYXMsXG4gICAgICAgICAgICBmb3JtYXRlYWRvOiBmb3JtYXREdXJhdGlvbih0aWVtcG9VbHRpbW9zMzBEaWFzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVnaXN0cm9zOiByZWdpc3Ryb3NcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBvYnRlbmVyRXN0YWRpc3RpY2FzVGllbXBvOlwiLCBlcnJvcik7XG4gICAgICByZXR1cm4geyBlcnJvcjogXCJFcnJvciBwcm9jZXNhbmRvIGVzdGFkXHUwMEVEc3RpY2FzIGRlIHRpZW1wbzogXCIgKyBlcnJvci5tZXNzYWdlIH07XG4gICAgfVxuICB9XG4gIFxuICAvKipcbiAgICogR2VuZXJhIGVsIEhUTUwgcGFyYSBtb3N0cmFyIGxhcyBlc3RhZFx1MDBFRHN0aWNhcyBkZSB0aWVtcG9cbiAgICogQHBhcmFtIGR2IE9iamV0byBkYXRhdmlldyBwYXJhIGNyZWFyIGVsZW1lbnRvc1xuICAgKiBAcGFyYW0gZGF0b3MgT2JqZXRvIGNvbiBsb3MgZGF0b3Mgb2J0ZW5pZG9zIGRlIG9idGVuZXJFc3RhZGlzdGljYXNUaWVtcG9cbiAgICogQHJldHVybnMgRWxlbWVudG8gSFRNTCBjb24gbGFzIGVzdGFkXHUwMEVEc3RpY2FzIHZpc3VhbGl6YWRhc1xuICAgKi9cblxuICBtb3N0cmFyRXN0YWRpc3RpY2FzVGllbXBvKGR2LCBkYXRvcykge1xuICAgIHRyeSB7XG4gICAgICAvLyBTaSBoYXkgZXJyb3IsIG1vc3RyYXIgbWVuc2FqZVxuICAgICAgaWYgKGRhdG9zLmVycm9yKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZXJyb3JEaXYuY2xhc3NOYW1lID0gXCJ0aWVtcG8tc3RhdHMtZXJyb3JcIjtcbiAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSBkYXRvcy5lcnJvcjtcbiAgICAgICAgcmV0dXJuIGVycm9yRGl2O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBPYnRlbmVyIGVzdGFkXHUwMEVEc3RpY2FzIHkgcmVnaXN0cm9zXG4gICAgICBjb25zdCB7IGVzdGFkaXN0aWNhcywgcmVnaXN0cm9zLCBwcm95ZWN0byB9ID0gZGF0b3M7XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgICBjb25zdCBjb250ZW5lZG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnRlbmVkb3IuY2xhc3NOYW1lID0gXCJ0aWVtcG8tc3RhdHMtY29udGFpbmVyXCI7XG4gICAgICBjb250ZW5lZG9yLnN0eWxlLnBhZGRpbmcgPSBcIjE2cHggMFwiOyAvLyBNYW50ZW5lciBwYWRkaW5nIHZlcnRpY2FsLCBlbGltaW5hciBob3Jpem9udGFsXG4gICAgICBjb250ZW5lZG9yLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgICBjb250ZW5lZG9yLnN0eWxlLmJveFNpemluZyA9IFwiYm9yZGVyLWJveFwiO1xuICAgICAgXG4gICAgICAvLyBTaSBubyBoYXkgcmVnaXN0cm9zLCBtb3N0cmFyIG1lbnNhamUgeSBzYWxpclxuICAgICAgaWYgKCFyZWdpc3Ryb3MgfHwgcmVnaXN0cm9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBtZW5zYWplVmFjaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgbWVuc2FqZVZhY2lvLmNsYXNzTmFtZSA9IFwidGllbXBvLXN0YXRzLWVtcHR5LW1lc3NhZ2VcIjtcbiAgICAgICAgbWVuc2FqZVZhY2lvLnRleHRDb250ZW50ID0gXCJObyBzZSBlbmNvbnRyYXJvbiByZWdpc3Ryb3MgZGUgdGllbXBvIHBhcmEgZXN0ZSBwcm95ZWN0by5cIjtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChtZW5zYWplVmFjaW8pO1xuICAgICAgICByZXR1cm4gY29udGVuZWRvcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gPT09IFNFQ0NJXHUwMEQzTiAxOiBFU1RBRFx1MDBDRFNUSUNBUyBQUklOQ0lQQUxFUyA9PT1cbiAgICAgIGNvbnN0IHN0YXRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHN0YXRzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGllbXBvLXN0YXRzLXN1bW1hcnlcIjtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgdGFyamV0YXMgZGUgZXN0YWRcdTAwRURzdGljYXNcbiAgICAgIGNvbnN0IGluZm9Fc3RhZGlzdGljYXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICB0aXR1bG86IFwiVGllbXBvIFRvdGFsXCIsXG4gICAgICAgICAgdmFsb3I6IGVzdGFkaXN0aWNhcy50b3RhbFRpZW1wb1RyYWJhamFkby5mb3JtYXRlYWRvLFxuICAgICAgICAgIGljb25vOiBcIlx1MjNGMVx1RkUwRlwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXR1bG86IFwiU2VzaW9uZXNcIixcbiAgICAgICAgICB2YWxvcjogZXN0YWRpc3RpY2FzLm51bVNlc2lvbmVzLFxuICAgICAgICAgIGljb25vOiBcIlx1RDgzRFx1REQwNFwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXR1bG86IFwiXHUwMERBbHRpbWEgQWN0aXZpZGFkXCIsXG4gICAgICAgICAgdmFsb3I6IGVzdGFkaXN0aWNhcy51bHRpbWFBY3RpdmlkYWQudGllbXBvRGVzZGUsXG4gICAgICAgICAgaWNvbm86IFwiXHVEODNEXHVERDUyXCJcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpdHVsbzogXCJcdTAwREFsdGltb3MgNyBkXHUwMEVEYXNcIixcbiAgICAgICAgICB2YWxvcjogZXN0YWRpc3RpY2FzLnVsdGltb3M3RGlhcz8uZm9ybWF0ZWFkbyB8fCBcIk4vQVwiLFxuICAgICAgICAgIGljb25vOiBcIlx1RDgzRFx1RENDNVwiXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0aXR1bG86IFwiXHUwMERBbHRpbW9zIDMwIGRcdTAwRURhc1wiLFxuICAgICAgICAgIHZhbG9yOiBlc3RhZGlzdGljYXMudWx0aW1vczMwRGlhcz8uZm9ybWF0ZWFkbyB8fCBcIk4vQVwiLFxuICAgICAgICAgIGljb25vOiBcIlx1RDgzRFx1RENDNlwiXG4gICAgICAgIH1cbiAgICAgIF07XG4gICAgICBcbiAgICAgIC8vIENyZWFyIGdyaWQgcGFyYSBsYXMgdGFyamV0YXNcbiAgICAgIGNvbnN0IHN0YXRzR3JpZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBzdGF0c0dyaWQuY2xhc3NOYW1lID0gXCJ0aWVtcG8tc3RhdHMtZ3JpZFwiO1xuICAgICAgXG4gICAgICAvLyBBXHUwMEYxYWRpciBjYWRhIHRhcmpldGEgYWwgZ3JpZFxuICAgICAgZm9yIChjb25zdCBzdGF0IG9mIGluZm9Fc3RhZGlzdGljYXMpIHtcbiAgICAgICAgY29uc3QgdGFyamV0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRhcmpldGEuY2xhc3NOYW1lID0gXCJ0aWVtcG8tc3RhdC1jYXJkXCI7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpY29ubyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBpY29uby5jbGFzc05hbWUgPSBcInRpZW1wby1zdGF0LWljb25cIjtcbiAgICAgICAgaWNvbm8udGV4dENvbnRlbnQgPSBzdGF0Lmljb25vO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGl0dWxvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGl0dWxvLmNsYXNzTmFtZSA9IFwidGllbXBvLXN0YXQtdGl0bGVcIjtcbiAgICAgICAgdGl0dWxvLnRleHRDb250ZW50ID0gc3RhdC50aXR1bG87XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2YWxvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHZhbG9yLmNsYXNzTmFtZSA9IFwidGllbXBvLXN0YXQtdmFsdWVcIjtcbiAgICAgICAgdmFsb3IudGV4dENvbnRlbnQgPSBzdGF0LnZhbG9yO1xuICAgICAgICBcbiAgICAgICAgdGFyamV0YS5hcHBlbmRDaGlsZChpY29ubyk7XG4gICAgICAgIHRhcmpldGEuYXBwZW5kQ2hpbGQodGl0dWxvKTtcbiAgICAgICAgdGFyamV0YS5hcHBlbmRDaGlsZCh2YWxvcik7XG4gICAgICAgIFxuICAgICAgICBzdGF0c0dyaWQuYXBwZW5kQ2hpbGQodGFyamV0YSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHN0YXRzQ29udGFpbmVyLmFwcGVuZENoaWxkKHN0YXRzR3JpZCk7XG4gICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKHN0YXRzQ29udGFpbmVyKTtcbiAgICAgIFxuICAgICAgLy8gPT09IFNFQ0NJXHUwMEQzTiAyOiBTRVNJXHUwMEQzTiBBQ1RJVkEgKHNpIGV4aXN0ZSkgPT09XG4gICAgICBpZiAoZXN0YWRpc3RpY2FzLnNlc2lvbkFjdGl2YSkge1xuICAgICAgICBjb25zdCBhY3Rpdm9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBhY3Rpdm9Db250YWluZXIuY2xhc3NOYW1lID0gXCJ0aWVtcG8tc2VzaW9uLWFjdGl2YS1jb250YWluZXJcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIGRlIGxhIHNlY2NpXHUwMEYzblxuICAgICAgICBjb25zdCB0aXR1bG9BY3Rpdm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgICAgIHRpdHVsb0FjdGl2by5jbGFzc05hbWUgPSBcInRpZW1wby1hY3Rpdm8tdGl0bGVcIjtcbiAgICAgICAgdGl0dWxvQWN0aXZvLnRleHRDb250ZW50ID0gXCJTZXNpXHUwMEYzbiBhY3RpdmFcIjtcbiAgICAgICAgYWN0aXZvQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpdHVsb0FjdGl2byk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbmNvbnRyYXIgZWwgcmVnaXN0cm8gYWN0aXZvXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvQWN0aXZvID0gcmVnaXN0cm9zLmZpbmQociA9PiByLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAocmVnaXN0cm9BY3Rpdm8pIHtcbiAgICAgICAgICAvLyBDcmVhciB0YXJqZXRhIGRlIHNlc2lcdTAwRjNuIGFjdGl2YVxuICAgICAgICAgIGNvbnN0IHRhcmpldGFBY3RpdmEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHRhcmpldGFBY3RpdmEuY2xhc3NOYW1lID0gXCJ0aWVtcG8tYWN0aXZvLWNhcmRcIjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBEZXNjcmlwY2lcdTAwRjNuXG4gICAgICAgICAgY29uc3QgZGVzY0FjdGl2YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZGVzY0FjdGl2YS5jbGFzc05hbWUgPSBcInRpZW1wby1hY3Rpdm8tZGVzY3JpcGNpb25cIjtcbiAgICAgICAgICBkZXNjQWN0aXZhLnRleHRDb250ZW50ID0gcmVnaXN0cm9BY3Rpdm8uZGVzY3JpcGNpb247XG4gICAgICAgICAgdGFyamV0YUFjdGl2YS5hcHBlbmRDaGlsZChkZXNjQWN0aXZhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUaWVtcG8gZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICBjb25zdCB0aWVtcG9FamVjdWNpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgIHRpZW1wb0VqZWN1Y2lvbi5jbGFzc05hbWUgPSBcInRpZW1wby1lamVjdWNpb25cIjtcbiAgICAgICAgICB0aWVtcG9FamVjdWNpb24uaWQgPSBgdGllbXBvLWVqZWN1Y2lvbi0ke2VzdGFkaXN0aWNhcy5zZXNpb25BY3RpdmEuaWR9YDtcbiAgICAgICAgICB0aWVtcG9FamVjdWNpb24udGV4dENvbnRlbnQgPSBlc3RhZGlzdGljYXMuc2VzaW9uQWN0aXZhLnRpZW1wb0Zvcm1hdGVhZG87XG4gICAgICAgICAgdGFyamV0YUFjdGl2YS5hcHBlbmRDaGlsZCh0aWVtcG9FamVjdWNpb24pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBpciBhbCByZWdpc3Ryb1xuICAgICAgICAgIGNvbnN0IGVubGFjZVJlZ2lzdHJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgZW5sYWNlUmVnaXN0cm8uY2xhc3NOYW1lID0gXCJ0aWVtcG8tYWN0aXZvLWVubGFjZSBpbnRlcm5hbC1saW5rXCI7XG4gICAgICAgICAgZW5sYWNlUmVnaXN0cm8uaHJlZiA9IHJlZ2lzdHJvQWN0aXZvLnBhdGg7XG4gICAgICAgICAgZW5sYWNlUmVnaXN0cm8uc2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIsIHJlZ2lzdHJvQWN0aXZvLnBhdGgpO1xuICAgICAgICAgIGVubGFjZVJlZ2lzdHJvLnRleHRDb250ZW50ID0gXCJWZXIgcmVnaXN0cm8gY29tcGxldG9cIjtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBIYWNlciBjbGljYWJsZSBlbCBlbmxhY2VcbiAgICAgICAgICBlbmxhY2VSZWdpc3Ryby5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgaHJlZiA9IGVubGFjZVJlZ2lzdHJvLmdldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiKTtcbiAgICAgICAgICAgIGlmIChocmVmKSB7XG4gICAgICAgICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGhyZWYsIFwiXCIsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICB0YXJqZXRhQWN0aXZhLmFwcGVuZENoaWxkKGVubGFjZVJlZ2lzdHJvKTtcbiAgICAgICAgICBhY3Rpdm9Db250YWluZXIuYXBwZW5kQ2hpbGQodGFyamV0YUFjdGl2YSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoYWN0aXZvQ29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gPT09IFNFQ0NJXHUwMEQzTiAzOiBUQUJMQSBERSBSRUdJU1RST1MgPT09XG4gICAgICAvLyBUXHUwMEVEdHVsbyBkZSBsYSBzZWNjaVx1MDBGM25cbiAgICAgIGNvbnN0IHRpdHVsb1RhYmxhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgdGl0dWxvVGFibGEuY2xhc3NOYW1lID0gXCJ0aWVtcG8tdGFibGUtdGl0bGVcIjtcbiAgICAgIHRpdHVsb1RhYmxhLnRleHRDb250ZW50ID0gXCJSZWdpc3Ryb3MgZGUgdGllbXBvXCI7XG4gICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKHRpdHVsb1RhYmxhKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgbGEgdGFibGEgY29uIGVzdGlsb3MgZGlyZWN0b3MgcGFyYSBldml0YXIgZXNwYWNpb3Mgbm8gZGVzZWFkb3NcbiAgICAgIGNvbnN0IHRhYmxhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpO1xuICAgICAgdGFibGEuY2xhc3NOYW1lID0gXCJ0aWVtcG8tcmVnaXN0cm9zLXRhYmxlXCI7XG4gICAgICB0YWJsYS5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgdGFibGEuc3R5bGUudGFibGVMYXlvdXQgPSBcImZpeGVkXCI7XG4gICAgICB0YWJsYS5zdHlsZS5ib3JkZXJDb2xsYXBzZSA9IFwiY29sbGFwc2VcIjtcbiAgICAgIHRhYmxhLnN0eWxlLm1hcmdpbiA9IFwiMFwiO1xuICAgICAgdGFibGEuc3R5bGUucGFkZGluZyA9IFwiMFwiO1xuICAgICAgXG4gICAgICAvLyBDcmVhciBlbmNhYmV6YWRvc1xuICAgICAgY29uc3QgZW5jYWJlemFkbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiKTtcbiAgICAgIGNvbnN0IGZpbGFFbmNhYmV6YWRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgICAgXG4gICAgICAvLyBEZWZpbmlyIGVuY2FiZXphZG9zIHkgc3VzIGVzdGlsb3NcbiAgICAgIGNvbnN0IGVuY2FiZXphZG9zID0gW1xuICAgICAgICB7IHRleHRvOiBcIkRlc2NyaXBjaVx1MDBGM25cIiwgYW5jaG86IFwiNjAlXCIsIGFsaWduOiBcImxlZnRcIiB9LFxuICAgICAgICB7IHRleHRvOiBcIkR1cmFjaVx1MDBGM25cIiwgYW5jaG86IFwiMTUlXCIsIGFsaWduOiBcImNlbnRlclwiIH0sXG4gICAgICAgIHsgdGV4dG86IFwiRmVjaGFcIiwgYW5jaG86IFwiMjUlXCIsIGFsaWduOiBcImxlZnRcIiB9XG4gICAgICBdO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IHsgdGV4dG8sIGFuY2hvLCBhbGlnbiB9IG9mIGVuY2FiZXphZG9zKSB7XG4gICAgICAgIGNvbnN0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgICB0aC50ZXh0Q29udGVudCA9IHRleHRvO1xuICAgICAgICB0aC5zdHlsZS53aWR0aCA9IGFuY2hvO1xuICAgICAgICB0aC5zdHlsZS50ZXh0QWxpZ24gPSBhbGlnbjtcbiAgICAgICAgdGguc3R5bGUucGFkZGluZyA9IFwiMTBweFwiO1xuICAgICAgICBpZiAodGV4dG8gPT09IFwiRGVzY3JpcGNpXHUwMEYzblwiKSB7XG4gICAgICAgICAgdGguc3R5bGUucGFkZGluZ0xlZnQgPSBcIjBcIjsgLy8gRWxpbWluYXIgcGFkZGluZyBpenF1aWVyZG8gZGVsIHByaW1lciBlbmNhYmV6YWRvXG4gICAgICAgIH1cbiAgICAgICAgZmlsYUVuY2FiZXphZG8uYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBlbmNhYmV6YWRvLmFwcGVuZENoaWxkKGZpbGFFbmNhYmV6YWRvKTtcbiAgICAgIHRhYmxhLmFwcGVuZENoaWxkKGVuY2FiZXphZG8pO1xuICAgICAgXG4gICAgICAvLyBDcmVhciBjdWVycG8gZGUgbGEgdGFibGFcbiAgICAgIGNvbnN0IGN1ZXJwbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKTtcbiAgICAgIFxuICAgICAgLy8gQVx1MDBGMWFkaXIgZmlsYXMgY29uIGxvcyBkYXRvc1xuICAgICAgZm9yIChjb25zdCByZWdpc3RybyBvZiByZWdpc3Ryb3MpIHtcbiAgICAgICAgY29uc3QgZmlsYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbHVtbmE6IERlc2NyaXBjaVx1MDBGM24gY29uIGVubGFjZSBhIGxhIG5vdGFcbiAgICAgICAgY29uc3QgY2VsZGFEZXNjcmlwY2lvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY2VsZGFEZXNjcmlwY2lvbi5zdHlsZS53aWR0aCA9IFwiNjAlXCI7XG4gICAgICAgIGNlbGRhRGVzY3JpcGNpb24uc3R5bGUucGFkZGluZ0xlZnQgPSBcIjBcIjsgLy8gRWxpbWluYXIgcGFkZGluZyBpenF1aWVyZG9cbiAgICAgICAgY2VsZGFEZXNjcmlwY2lvbi5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3JtYWxcIjtcbiAgICAgICAgY2VsZGFEZXNjcmlwY2lvbi5zdHlsZS53b3JkV3JhcCA9IFwiYnJlYWstd29yZFwiO1xuICAgICAgICBjZWxkYURlc2NyaXBjaW9uLnN0eWxlLndvcmRCcmVhayA9IFwiYnJlYWstd29yZFwiO1xuICAgICAgICBjZWxkYURlc2NyaXBjaW9uLnN0eWxlLm92ZXJmbG93V3JhcCA9IFwiYnJlYWstd29yZFwiO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgbGEgZGVzY3JpcGNpXHUwMEYzbiBxdWUgZnVlcmNlIGVsIHNhbHRvIGRlIGxcdTAwRURuZWFcbiAgICAgICAgICBjb25zdCBkZXNjcmlwY2lvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgZGVzY3JpcGNpb25EaXYuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG4gICAgICAgICAgZGVzY3JpcGNpb25EaXYuc3R5bGUud2hpdGVTcGFjZSA9IFwibm9ybWFsXCI7XG4gICAgICAgICAgZGVzY3JpcGNpb25EaXYuc3R5bGUud29yZFdyYXAgPSBcImJyZWFrLXdvcmRcIjtcbiAgICAgICAgICBkZXNjcmlwY2lvbkRpdi5zdHlsZS53b3JkQnJlYWsgPSBcImJyZWFrLXdvcmRcIjtcbiAgICAgICAgICBkZXNjcmlwY2lvbkRpdi50ZXh0Q29udGVudCA9IHJlZ2lzdHJvLmRlc2NyaXBjaW9uIHx8IFwiU2luIGRlc2NyaXBjaVx1MDBGM25cIjtcbiAgICAgICAgICBjZWxkYURlc2NyaXBjaW9uLmFwcGVuZENoaWxkKGRlc2NyaXBjaW9uRGl2KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZ3JlZ2FyIGVubGFjZVxuICAgICAgICAgIGNvbnN0IGVubGFjZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICBlbmxhY2VTcGFuLmNsYXNzTmFtZSA9IFwidGllbXBvLXZlci1tYXNcIjtcbiAgICAgICAgICBlbmxhY2VTcGFuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiIChcIikpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWFyIGVubGFjZVxuICAgICAgICAgIGNvbnN0IGVubGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgIGVubGFjZS5jbGFzc05hbWUgPSBcImludGVybmFsLWxpbmtcIjtcbiAgICAgICAgICBlbmxhY2UuaHJlZiA9IHJlZ2lzdHJvLnBhdGg7XG4gICAgICAgICAgZW5sYWNlLnNldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiLCByZWdpc3Ryby5wYXRoKTtcbiAgICAgICAgICBlbmxhY2UudGV4dENvbnRlbnQgPSBcInZlclwiO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEhhY2VyIGNsaWNhYmxlIGVsIGVubGFjZVxuICAgICAgICAgIGVubGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgaHJlZiA9IGVubGFjZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIik7XG4gICAgICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgICAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChocmVmLCBcIlwiLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgZW5sYWNlU3Bhbi5hcHBlbmRDaGlsZChlbmxhY2UpO1xuICAgICAgICAgIGVubGFjZVNwYW4uYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCIpXCIpKTtcbiAgICAgICAgICBjZWxkYURlc2NyaXBjaW9uLmFwcGVuZENoaWxkKGVubGFjZVNwYW4pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY2VsZGFEZXNjcmlwY2lvbi50ZXh0Q29udGVudCA9IHJlZ2lzdHJvLmRlc2NyaXBjaW9uIHx8IFwiU2luIGRlc2NyaXBjaVx1MDBGM25cIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZmlsYS5hcHBlbmRDaGlsZChjZWxkYURlc2NyaXBjaW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbHVtbmE6IER1cmFjaVx1MDBGM24gKGNlbnRyYWRhKVxuICAgICAgICBjb25zdCBjZWxkYUR1cmFjaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICBjZWxkYUR1cmFjaW9uLnN0eWxlLndpZHRoID0gXCIxNSVcIjtcbiAgICAgICAgY2VsZGFEdXJhY2lvbi5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgICAgICBjZWxkYUR1cmFjaW9uLnRleHRDb250ZW50ID0gcmVnaXN0cm8udGllbXBvRm9ybWF0ZWFkbztcbiAgICAgICAgZmlsYS5hcHBlbmRDaGlsZChjZWxkYUR1cmFjaW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbHVtbmE6IEZlY2hhXG4gICAgICAgIGNvbnN0IGNlbGRhRmVjaGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGNlbGRhRmVjaGEuc3R5bGUud2lkdGggPSBcIjI1JVwiO1xuICAgICAgICBjZWxkYUZlY2hhLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vcm1hbFwiO1xuICAgICAgICBjZWxkYUZlY2hhLnN0eWxlLndvcmRXcmFwID0gXCJicmVhay13b3JkXCI7XG4gICAgICAgIGNlbGRhRmVjaGEudGV4dENvbnRlbnQgPSByZWdpc3Ryby5ob3JhRmluYWwgfHwgcmVnaXN0cm8uaG9yYUluaWNpbztcbiAgICAgICAgZmlsYS5hcHBlbmRDaGlsZChjZWxkYUZlY2hhKTtcbiAgICAgICAgXG4gICAgICAgIGN1ZXJwby5hcHBlbmRDaGlsZChmaWxhKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgdGFibGEuYXBwZW5kQ2hpbGQoY3VlcnBvKTtcbiAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQodGFibGEpO1xuICAgICAgXG4gICAgICByZXR1cm4gY29udGVuZWRvcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG1vc3RyYXIgZXN0YWRcdTAwRURzdGljYXMgZGUgdGllbXBvOlwiLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBlcnJvckRpdi5jbGFzc05hbWUgPSBcInRpZW1wby1zdGF0cy1lcnJvclwiO1xuICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSBcIkVycm9yIGFsIG1vc3RyYXIgZXN0YWRcdTAwRURzdGljYXM6IFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgIHJldHVybiBlcnJvckRpdjtcbiAgICB9XG4gIH1cblxuLy8gLS0tLSBUQVJFQVNcblxuLyoqXG4gKiBHZW5lcmEgdW4gXHUwMEUxcmJvbCBkZSB0YXJlYXMgcGVuZGllbnRlcyB5IGVuIHByb2dyZXNvIGRlIGxhIG5vdGEgYWN0dWFsIHkgc3VzIHJlZmVyZW5jaWFzXG4gKiBAcGFyYW0ge09iamVjdH0gcGFnaW5hQWN0dWFsIC0gTGEgcFx1MDBFMWdpbmEgYWN0dWFsIG9idGVuaWRhIGEgdHJhdlx1MDBFOXMgZGUgZHYuY3VycmVudCgpXG4gKiBAcGFyYW0ge09iamVjdH0gZHYgLSBFbCBvYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHBhcmFtIHtOdW1iZXJ9IHByb2Z1bmRpZGFkTWF4aW1hIC0gUHJvZnVuZGlkYWQgbVx1MDBFMXhpbWEgZGUgcmVjdXJzaVx1MDBGM24gKGRlZmVjdG86IDMpXG4gKiBAcGFyYW0ge1NldH0gdmlzaXRhZGFzIC0gU2V0IGRlIElEcyBkZSBwXHUwMEUxZ2luYXMgeWEgdmlzaXRhZGFzIHBhcmEgZXZpdGFyIGNpY2xvc1xuICogQHBhcmFtIHtOdW1iZXJ9IHByb2Z1bmRpZGFkQWN0dWFsIC0gUHJvZnVuZGlkYWQgYWN0dWFsIGRlIHJlY3Vyc2lcdTAwRjNuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGVzUmVmZXJlbmNpYU5pZGFkYSAtIEluZGljYSBzaSBlcyB1bmEgcmVmZXJlbmNpYSBuaWRhZGEgKHBhcmEgZXZpdGFyIGR1cGxpY2FjaVx1MDBGM24pXG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IC0gRWxlbWVudG8gSFRNTCBjb24gbGEgZXN0cnVjdHVyYSBkZSBcdTAwRTFyYm9sIGRlIHRhcmVhc1xuICovXG5hc3luYyBnZW5lcmFyQXJib2xUYXJlYXMocGFnaW5hQWN0dWFsLCBkdiwgcHJvZnVuZGlkYWRNYXhpbWEgPSAzLCB2aXNpdGFkYXMgPSBuZXcgU2V0KCksIHByb2Z1bmRpZGFkQWN0dWFsID0gMCwgZXNSZWZlcmVuY2lhTmlkYWRhID0gZmFsc2UpIHtcbiAgICAvLyBWYWxpZGFyIHF1ZSBwYWdpbmFBY3R1YWwgdGVuZ2EgbGFzIHByb3BpZWRhZGVzIG5lY2VzYXJpYXNcbiAgICBpZiAoIXBhZ2luYUFjdHVhbCB8fCAhcGFnaW5hQWN0dWFsLmZpbGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yOiBwYWdpbmFBY3R1YWwgbm8gdGllbmUgbGFzIHByb3BpZWRhZGVzIG5lY2VzYXJpYXNcIiwgcGFnaW5hQWN0dWFsKTtcbiAgICAgICAgcmV0dXJuIGR2LmVsKFwiZGl2XCIsIFwiRXJyb3I6IE5vIHNlIHB1ZWRlIGdlbmVyYXIgZWwgXHUwMEUxcmJvbCBkZSB0YXJlYXMuXCIsIHsgY2xzOiBcInRhc2tzLXRyZWUtZXJyb3JcIiB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYFByb2Nlc2FuZG8gdGFyZWFzIGRlOiAke3BhZ2luYUFjdHVhbC5maWxlLnBhdGh9IChwcm9mdW5kaWRhZDogJHtwcm9mdW5kaWRhZEFjdHVhbH0sIGVzUmVmZXJlbmNpYU5pZGFkYTogJHtlc1JlZmVyZW5jaWFOaWRhZGF9KWApO1xuICAgIFxuICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgY29uc3QgY29udGVuZWRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVuZWRvci5jbGFzc05hbWUgPSBcInRhc2tzLXRyZWVcIjtcbiAgICBcbiAgICBpZiAocHJvZnVuZGlkYWRBY3R1YWwgPT09IDApIHtcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgdFx1MDBFRHR1bG8gcGVyc29uYWxpemFkbyBzb2xvIGVuIGxhIHJhXHUwMEVEelxuICAgICAgICBjb25zdCB0aXBvTm90YSA9IHBhZ2luYUFjdHVhbC50eXBlTmFtZSB8fCBcIk5vdGFcIjtcbiAgICAgICAgY29uc3QgYWxpYXMgPSBwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzICYmIHBhZ2luYUFjdHVhbC5maWxlLmFsaWFzZXMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgID8gcGFnaW5hQWN0dWFsLmZpbGUuYWxpYXNlc1swXSBcbiAgICAgICAgICAgIDogKHBhZ2luYUFjdHVhbC50aXR1bG8gfHwgcGFnaW5hQWN0dWFsLmZpbGUubmFtZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgdGl0dWxvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xuICAgICAgICB0aXR1bG8uY2xhc3NOYW1lID0gXCJ0YXNrcy10cmVlLXRpdGxlXCI7XG4gICAgICAgIHRpdHVsby50ZXh0Q29udGVudCA9IFwiVGFyZWFzIHBlbmRpZW50ZXNcIjtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZCh0aXR1bG8pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBoZW1vcyBsbGVnYWRvIGEgbGEgcHJvZnVuZGlkYWQgbVx1MDBFMXhpbWEsIG5vIHNlZ3VpbW9zIGV4cGxvcmFuZG9cbiAgICBpZiAocHJvZnVuZGlkYWRBY3R1YWwgPj0gcHJvZnVuZGlkYWRNYXhpbWEpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmNhciBlc3RhIHBcdTAwRTFnaW5hIGNvbW8gdmlzaXRhZGEgcGFyYSBldml0YXIgY2ljbG9zXG4gICAgdmlzaXRhZGFzLmFkZChwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKTtcbiAgICBcbiAgICAvLyBFeHRyYWVyIHRhcmVhcyBkZSBsYSBwXHUwMEUxZ2luYSBhY3R1YWxcbiAgICBsZXQgdGFyZWFzO1xuICAgIHRyeSB7XG4gICAgICAgIHRhcmVhcyA9IGF3YWl0IHRoaXMuZXh0cmFlclRhcmVhc0RlUGFnaW5hKHBhZ2luYUFjdHVhbCwgZHYpO1xuICAgICAgICBjb25zb2xlLmxvZyhgRW5jb250cmFkYXMgJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgZW4gJHtwYWdpbmFBY3R1YWwuZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgZXh0cmFlciB0YXJlYXMgZGUgJHtwYWdpbmFBY3R1YWwuZmlsZS5wYXRofTpgLCBlKTtcbiAgICAgICAgdGFyZWFzID0gW107XG4gICAgfVxuICAgIFxuICAgIC8vIE9idGVuZXIgdG9kYXMgbGFzIHBcdTAwRTFnaW5hcyBxdWUgaGFjZW4gcmVmZXJlbmNpYSBkaXJlY3RhIGEgbGEgcFx1MDBFMWdpbmEgYWN0dWFsXG4gICAgbGV0IHRvZGFzTGFzUGFnaW5hcztcbiAgICB0cnkge1xuICAgICAgICB0b2Rhc0xhc1BhZ2luYXMgPSBkdi5wYWdlcygpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIG9idGVuZXIgcFx1MDBFMWdpbmFzOlwiLCBlKTtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgZXJyb3JNc2cudGV4dENvbnRlbnQgPSBcIkVycm9yIGFsIG9idGVuZXIgcFx1MDBFMWdpbmFzIGRlIERhdGF2aWV3XCI7XG4gICAgICAgIGVycm9yTXNnLmNsYXNzTmFtZSA9IFwidGFza3MtdHJlZS1lcnJvclwiO1xuICAgICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKGVycm9yTXNnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRkFuIGFzXHUwMEVELCBtb3N0cmFtb3MgbGFzIHRhcmVhcyBkZSBsYSBwXHUwMEUxZ2luYSBhY3R1YWwgc2kgbGFzIGhheVxuICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWdyZWdhclRhcmVhc0FDb250ZW5lZG9yKHRhcmVhcywgY29udGVuZWRvciwgZHYsIHBhZ2luYUFjdHVhbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250ZW5lZG9yO1xuICAgIH1cbiAgICBcbiAgICAvLyBGaWx0cmFyIGxhcyBwXHUwMEUxZ2luYXMgcXVlIHJlZmVyZW5jaWFuIGEgbGEgYWN0dWFsIGEgdHJhdlx1MDBFOXMgZGUgJ2FzdW50bydcbiAgICBsZXQgcmVmZXJlbmNpYXNEaXJlY3RhcyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBzZWd1cmEgcGFyYSB2ZXJpZmljYXIgc2kgdW4gYXN1bnRvIGhhY2UgcmVmZXJlbmNpYSBhIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgICAgICBjb25zdCByZWZlcmVuY2lhQVBhZ2luYUFjdHVhbCA9IChhc3VudG8pID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgYXN1bnRvIGVzIHVuIG9iamV0byBjb24gcGF0aCB5IGNvaW5jaWRlIGNvbiBsYSBwXHUwMEUxZ2luYSBhY3R1YWxcbiAgICAgICAgICAgICAgICBpZiAoYXN1bnRvICYmIHR5cGVvZiBhc3VudG8gPT09ICdvYmplY3QnICYmIGFzdW50by5wYXRoID09PSBwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBhc3VudG8gZXMgdW5hIGNhZGVuYVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXN1bnRvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgY29udGllbmUgbGEgcnV0YSBjb21wbGV0YVxuICAgICAgICAgICAgICAgICAgICBpZiAoYXN1bnRvLmluY2x1ZGVzKHBhZ2luYUFjdHVhbC5maWxlLnBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGNvaW5jaWRlbmNpYSBjb24gYWxpYXNlcyAoc2kgZXhpc3RlbilcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2luYUFjdHVhbC5maWxlLmFsaWFzZXMgJiYgQXJyYXkuaXNBcnJheShwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhbGlhcyBvZiBwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFsaWFzICYmIGFzdW50by5pbmNsdWRlcyhhbGlhcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgY29pbmNpZGVuY2lhIGNvbiBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2luYUFjdHVhbC5maWxlLm5hbWUgJiYgYXN1bnRvLmluY2x1ZGVzKHBhZ2luYUFjdHVhbC5maWxlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgZWwgYXJjaGl2byB0aWVuZSB0aXR1bG8gbyBhbGlhc2VzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdHVsbyA9IHBhZ2luYUFjdHVhbC50aXR1bG8gfHwgcGFnaW5hQWN0dWFsLnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGl0dWxvICYmIGFzdW50by5pbmNsdWRlcyh0aXR1bG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBhbCB2ZXJpZmljYXIgcmVmZXJlbmNpYTpcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0cmFyIGxhcyBwXHUwMEUxZ2luYXMgY29uIG1hbmVqbyBkZSBlcnJvcmVzIG1lam9yYWRvXG4gICAgICAgIHJlZmVyZW5jaWFzRGlyZWN0YXMgPSB0b2Rhc0xhc1BhZ2luYXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIXAgfHwgIXAuYXN1bnRvKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsaXphciBhc3VudG8gYSBhcnJheVxuICAgICAgICAgICAgICAgIGNvbnN0IGFzdW50b3MgPSBBcnJheS5pc0FycmF5KHAuYXN1bnRvKSA/IHAuYXN1bnRvIDogW3AuYXN1bnRvXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgY2FkYSBhc3VudG9cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFzdW50byBvZiBhc3VudG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWZlcmVuY2lhQVBhZ2luYUFjdHVhbChhc3VudG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFcnJvciBhbCBmaWx0cmFyIHBcdTAwRTFnaW5hOlwiLCBlcnIsIHApO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgRW5jb250cmFkYXMgJHtyZWZlcmVuY2lhc0RpcmVjdGFzLmxlbmd0aH0gcmVmZXJlbmNpYXMgZGlyZWN0YXMgYSAke3BhZ2luYUFjdHVhbC5maWxlLnBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZmlsdHJhciByZWZlcmVuY2lhczpcIiwgZSk7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIGVycm9yTXNnLnRleHRDb250ZW50ID0gXCJFcnJvciBhbCBwcm9jZXNhciByZWZlcmVuY2lhc1wiO1xuICAgICAgICBlcnJvck1zZy5jbGFzc05hbWUgPSBcInRhc2tzLXRyZWUtZXJyb3JcIjtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChlcnJvck1zZyk7XG5cbiAgICAgICAgLy8gQVx1MDBGQW4gYXNcdTAwRUQsIG1vc3RyYW1vcyBsYXMgdGFyZWFzIGRlIGxhIHBcdTAwRTFnaW5hIGFjdHVhbCBzaSBsYXMgaGF5XG4gICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hZ3JlZ2FyVGFyZWFzQUNvbnRlbmVkb3IodGFyZWFzLCBjb250ZW5lZG9yLCBkdiwgcGFnaW5hQWN0dWFsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIFZlcmlmaWNhciBzaSB0ZW5lbW9zIHRhcmVhcyBlbiBsYSBwXHUwMEUxZ2luYSBhY3R1YWwgbyBlbiByZWZlcmVuY2lhc1xuICAgIGNvbnN0IGhheVRhcmVhc0VuQWN0dWFsID0gdGFyZWFzLmxlbmd0aCA+IDA7XG4gICAgXG4gICAgLy8gUHJpbWVybyB2ZXJpZmljYW1vcyBzaSBhbGd1bmEgcmVmZXJlbmNpYSB0aWVuZSB0YXJlYXNcbiAgICBjb25zdCByZWZlcmVuY2lhc0NvblRhcmVhcyA9IFtdO1xuICAgIGNvbnN0IHJlZmVyZW5jaWFzQ29uVGFyZWFzSGVyZWRhZGFzID0gW107IC8vIE51ZXZvIGFycmF5IHBhcmEgcmVmZXJlbmNpYXMgc2luIHRhcmVhcyBwcm9waWFzIHBlcm8gY29uIHRhcmVhcyBoZXJlZGFkYXNcbiAgICBcbiAgICAvLyBQcm9jZXNhciB0b2RhcyBsYXMgcmVmZXJlbmNpYXMgZGlyZWN0YXMsIGluY2x1c28gc2kgbm8gdGllbmVuIHRhcmVhcyBwcm9waWFzXG4gICAgZm9yIChjb25zdCByZWZlcmVuY2lhIG9mIHJlZmVyZW5jaWFzRGlyZWN0YXMpIHtcbiAgICAgICAgLy8gRXZpdGFyIGNpY2xvc1xuICAgICAgICBpZiAodmlzaXRhZGFzLmhhcyhyZWZlcmVuY2lhLmZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRXh0cmFlciB0YXJlYXMgcHJvcGlhcyBkZSBsYSByZWZlcmVuY2lhXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNSZWZlcmVuY2lhID0gYXdhaXQgdGhpcy5leHRyYWVyVGFyZWFzRGVQYWdpbmEocmVmZXJlbmNpYSwgZHYpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDQU1CSU8gQVFVXHUwMENEOiBDb21wcm9iYXIgc2kgZXN0YSByZWZlcmVuY2lhIHRpZW5lIHJlZmVyZW5jaWFzIGFuaWRhZGFzIGNvbiB0YXJlYXNcbiAgICAgICAgICAgIC8vIEF1bnF1ZSBubyB0ZW5nYSB0YXJlYXMgcHJvcGlhcywgbmVjZXNpdGFtb3MgZXhwbG9yYXIgbVx1MDBFMXMgcHJvZnVuZG9cbiAgICAgICAgICAgIGxldCB0aWVuZVRhcmVhc0hlcmVkYWRhcyA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHJlZkFuaWRhZGFzQ29uVGFyZWFzID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGNvcGlhIGRlbCBjb25qdW50byB2aXNpdGFkYXMgcGFyYSBldml0YXIgYWZlY3RhciBhIG90cmFzIHJhbWFzXG4gICAgICAgICAgICBjb25zdCBudWV2b1Zpc2l0YWRhcyA9IG5ldyBTZXQoWy4uLnZpc2l0YWRhc10pO1xuICAgICAgICAgICAgbnVldm9WaXNpdGFkYXMuYWRkKHJlZmVyZW5jaWEuZmlsZS5wYXRoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQnVzY2FyIHJlY3Vyc2l2YW1lbnRlIGVuIHByb2Z1bmRpZGFkXG4gICAgICAgICAgICBjb25zdCByZXN1bHRhZG9BbmlkYWRvID0gYXdhaXQgdGhpcy5nZW5lcmFyQXJib2xUYXJlYXMoXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNpYSwgZHYsIHByb2Z1bmRpZGFkTWF4aW1hLCBcbiAgICAgICAgICAgICAgICBudWV2b1Zpc2l0YWRhcywgcHJvZnVuZGlkYWRBY3R1YWwgKyAxLFxuICAgICAgICAgICAgICAgIHRydWUgLy8gRXMgdW5hIHJlZmVyZW5jaWEgbmlkYWRhXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgcmVzdWx0YWRvIGFuaWRhZG8gY29udGllbmUgdGFyZWFzIChidXNjYW5kbyBlbGVtZW50b3MgY29uIGNsYXNlIC50YXNrcy1pdGVtKVxuICAgICAgICAgICAgaWYgKHJlc3VsdGFkb0FuaWRhZG8gJiYgcmVzdWx0YWRvQW5pZGFkby5ub2RlVHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc0FuaWRhZGFzID0gcmVzdWx0YWRvQW5pZGFkby5xdWVyeVNlbGVjdG9yQWxsKCcudGFza3MtaXRlbScpO1xuICAgICAgICAgICAgICAgIHRpZW5lVGFyZWFzSGVyZWRhZGFzID0gdGFyZWFzQW5pZGFkYXMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGllbmVUYXJlYXNIZXJlZGFkYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR3VhcmRhciBlbCByZXN1bHRhZG8gYW5pZGFkbyBwYXJhIHVzYXJsbyBkZXNwdVx1MDBFOXNcbiAgICAgICAgICAgICAgICAgICAgcmVmQW5pZGFkYXNDb25UYXJlYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2lhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvOiByZXN1bHRhZG9BbmlkYWRvXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhcmVhc1JlZmVyZW5jaWEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIEVzdGEgcmVmZXJlbmNpYSB0aWVuZSB0YXJlYXMgcHJvcGlhc1xuICAgICAgICAgICAgICAgIHJlZmVyZW5jaWFzQ29uVGFyZWFzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2lhLFxuICAgICAgICAgICAgICAgICAgICB0YXJlYXM6IHRhcmVhc1JlZmVyZW5jaWEsXG4gICAgICAgICAgICAgICAgICAgIHJlZkFuaWRhZGFzOiByZWZBbmlkYWRhc0NvblRhcmVhc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aWVuZVRhcmVhc0hlcmVkYWRhcykge1xuICAgICAgICAgICAgICAgIC8vIEVzdGEgcmVmZXJlbmNpYSBubyB0aWVuZSB0YXJlYXMgcHJvcGlhcywgcGVybyB0aWVuZSBzdWJyZWZlcmVuY2lhcyBjb24gdGFyZWFzXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNpYXNDb25UYXJlYXNIZXJlZGFkYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jaWEsXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhczogW10sIC8vIE5vIHRpZW5lIHRhcmVhcyBwcm9waWFzXG4gICAgICAgICAgICAgICAgICAgIHJlZkFuaWRhZGFzOiByZWZBbmlkYWRhc0NvblRhcmVhc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBwcm9jZXNhciByZWZlcmVuY2lhICR7cmVmZXJlbmNpYS5maWxlLnBhdGh9OmAsIGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENvbWJpbmFyIGFtYm9zIHRpcG9zIGRlIHJlZmVyZW5jaWFzIHBhcmEgcHJvY2VzYXJsYXMganVudGFzXG4gICAgY29uc3QgdG9kYXNMYXNSZWZlcmVuY2lhc0NvblRhcmVhcyA9IFsuLi5yZWZlcmVuY2lhc0NvblRhcmVhcywgLi4ucmVmZXJlbmNpYXNDb25UYXJlYXNIZXJlZGFkYXNdO1xuICAgIGNvbnN0IGhheVRhcmVhc0VuUmVmZXJlbmNpYXMgPSB0b2Rhc0xhc1JlZmVyZW5jaWFzQ29uVGFyZWFzLmxlbmd0aCA+IDA7XG4gICAgXG4gICAgLy8gU2kgbm8gaGF5IHRhcmVhcyBlbiBsYSBwXHUwMEUxZ2luYSBhY3R1YWwgbmkgZW4gcmVmZXJlbmNpYXMsIHkgbm8gZXN0YW1vcyBlbiBsYSByYVx1MDBFRHosXG4gICAgLy8gbm8gbW9zdHJhbW9zIG5hZGEgKHBhcmEgb3B0aW1pemFyIGVzcGFjaW8pXG4gICAgaWYgKCFoYXlUYXJlYXNFbkFjdHVhbCAmJiAhaGF5VGFyZWFzRW5SZWZlcmVuY2lhcyAmJiBwcm9mdW5kaWRhZEFjdHVhbCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIFNpIHRlbmVtb3MgdGFyZWFzIGVuIGxhIHBcdTAwRTFnaW5hIGFjdHVhbCwgbGFzIG1vc3RyYW1vcywgcGVybyBzb2xvIHNpIG5vIGVzIHVuYSByZWZlcmVuY2lhIG5pZGFkYVxuICAgIC8vIG8gc2kgZXMgbGEgcmFcdTAwRUR6IChwcm9mdW5kaWRhZEFjdHVhbCA9PT0gMClcbiAgICBpZiAoaGF5VGFyZWFzRW5BY3R1YWwgJiYgKCFlc1JlZmVyZW5jaWFOaWRhZGEgfHwgcHJvZnVuZGlkYWRBY3R1YWwgPT09IDApKSB7XG4gICAgICAgIC8vIENyZWFyIHNlY2NpXHUwMEYzbiBwYXJhIGxhcyB0YXJlYXMgZGUgbGEgcFx1MDBFMWdpbmEgYWN0dWFsXG4gICAgICAgIGNvbnN0IHNlY2Npb25BY3R1YWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzZWNjaW9uQWN0dWFsLmNsYXNzTmFtZSA9IFwidGFza3Mtbm9kZS1jdXJyZW50XCI7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbmNhYmV6YWRvIHNvbG8gc2kgaGF5IHJlZmVyZW5jaWFzIGRpcmVjdGFzIChwYXJhIGRpZmVyZW5jaWFyKVxuICAgICAgICBpZiAoaGF5VGFyZWFzRW5SZWZlcmVuY2lhcykge1xuICAgICAgICAgICAgY29uc3QgZW5jYWJlemFkb0FjdHVhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlbmNhYmV6YWRvQWN0dWFsLmNsYXNzTmFtZSA9IFwidGFza3Mtbm9kZS1oZWFkZXJcIjtcbiAgICAgICAgICAgIGVuY2FiZXphZG9BY3R1YWwudGV4dENvbnRlbnQgPSBcIlRhcmVhcyBkaXJlY3Rhc1wiO1xuICAgICAgICAgICAgc2VjY2lvbkFjdHVhbC5hcHBlbmRDaGlsZChlbmNhYmV6YWRvQWN0dWFsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWdyZWdhciBsYXMgdGFyZWFzIGRlIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgICAgICB0aGlzLmFncmVnYXJUYXJlYXNBQ29udGVuZWRvcih0YXJlYXMsIHNlY2Npb25BY3R1YWwsIGR2LCBwYWdpbmFBY3R1YWwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGEgc2VjY2lcdTAwRjNuIGFsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoc2VjY2lvbkFjdHVhbCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNpIHRlbmVtb3MgcmVmZXJlbmNpYXMgY29uIHRhcmVhcyAocHJvcGlhcyBvIGhlcmVkYWRhcyksIHByb2Nlc2Ftb3MgY2FkYSB1bmFcbiAgICBpZiAoaGF5VGFyZWFzRW5SZWZlcmVuY2lhcykge1xuICAgICAgICAvLyBDcmVhciBzZWNjaVx1MDBGM24gcGFyYSBsYXMgdGFyZWFzIGRlIHJlZmVyZW5jaWFzXG4gICAgICAgIGNvbnN0IHNlY2Npb25SZWZlcmVuY2lhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNlY2Npb25SZWZlcmVuY2lhcy5jbGFzc05hbWUgPSBcInRhc2tzLXJlZnMtY29udGFpbmVyXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBTb2xvIGFcdTAwRjFhZGltb3MgZW5jYWJlemFkbyBzaSBoYXkgdGFyZWFzIHRhbnRvIGVuIGFjdHVhbCBjb21vIGVuIHJlZmVyZW5jaWFzXG4gICAgICAgIGlmIChoYXlUYXJlYXNFbkFjdHVhbCAmJiAoIWVzUmVmZXJlbmNpYU5pZGFkYSB8fCBwcm9mdW5kaWRhZEFjdHVhbCA9PT0gMCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuY2FiZXphZG9SZWZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVuY2FiZXphZG9SZWZzLmNsYXNzTmFtZSA9IFwidGFza3MtcmVmcy1oZWFkZXJcIjtcbiAgICAgICAgICAgIGVuY2FiZXphZG9SZWZzLnRleHRDb250ZW50ID0gXCJUYXJlYXMgZW4gbm90YXMgcmVsYWNpb25hZGFzXCI7XG4gICAgICAgICAgICBzZWNjaW9uUmVmZXJlbmNpYXMuYXBwZW5kQ2hpbGQoZW5jYWJlemFkb1JlZnMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBsaXN0YSBwYXJhIGxhcyByZWZlcmVuY2lhc1xuICAgICAgICBjb25zdCBsaXN0YVJlZnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgICAgIGxpc3RhUmVmcy5jbGFzc05hbWUgPSBcInRhc2tzLXJlZnMtbGlzdFwiO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzYXIgY2FkYSByZWZlcmVuY2lhIGNvbiB0YXJlYXMgKHByb3BpYXMgbyBoZXJlZGFkYXMpXG4gICAgICAgIGZvciAoY29uc3QgeyByZWZlcmVuY2lhLCB0YXJlYXMsIHJlZkFuaWRhZGFzIH0gb2YgdG9kYXNMYXNSZWZlcmVuY2lhc0NvblRhcmVhcykge1xuICAgICAgICAgICAgLy8gQ3JlYXIgZWxlbWVudG8gcGFyYSBlc3RhIHJlZmVyZW5jaWFcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1SZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICAgICAgICBpdGVtUmVmLmNsYXNzTmFtZSA9IFwidGFza3MtcmVmLWl0ZW1cIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgZW5jYWJlemFkbyBjb24gaW5mb3JtYWNpXHUwMEYzbiBkZSBsYSByZWZlcmVuY2lhXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJSZWYgPSB0aGlzLmNyZWFyRW5jYWJlemFkb1JlZmVyZW5jaWEocmVmZXJlbmNpYSwgZHYsIHRhcmVhcy5sZW5ndGgpO1xuICAgICAgICAgICAgaXRlbVJlZi5hcHBlbmRDaGlsZChoZWFkZXJSZWYpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaSB0aWVuZSB0YXJlYXMgcHJvcGlhcywgbW9zdHJhcmxhc1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBjb2xhcHNhYmxlIHBhcmEgbGFzIHRhcmVhc1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgdGFyZWFzQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGFza3MtY29udGFpbmVyXCI7XG4gICAgICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgYXRyaWJ1dG8gZGUgZGF0b3MgcGFyYSBpZGVudGlmaWNhciBhIHF1XHUwMEU5IG5vdGEgcGVydGVuZWNlIGVzdGUgY29udGVuZWRvclxuICAgICAgICAgICAgICAgIHRhcmVhc0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBhdGhcIiwgcmVmZXJlbmNpYS5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgbGFzIHRhcmVhcyBkZSBlc3RhIHJlZmVyZW5jaWFcbiAgICAgICAgICAgICAgICB0aGlzLmFncmVnYXJUYXJlYXNBQ29udGVuZWRvcih0YXJlYXMsIHRhcmVhc0NvbnRhaW5lciwgZHYsIHJlZmVyZW5jaWEpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgZWwgY29udGVuZWRvciBkZSB0YXJlYXMgYWwgZWxlbWVudG8gZGUgcmVmZXJlbmNpYVxuICAgICAgICAgICAgICAgIGl0ZW1SZWYuYXBwZW5kQ2hpbGQodGFyZWFzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgdGllbmUgc3VicmVmZXJlbmNpYXMgY29uIHRhcmVhcywgbW9zdHJhcmxhc1xuICAgICAgICAgICAgaWYgKHJlZkFuaWRhZGFzICYmIHJlZkFuaWRhZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHsgcmVzdWx0YWRvIH0gb2YgcmVmQW5pZGFkYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdGFkbyAmJiByZXN1bHRhZG8ubm9kZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFF1aXRhciBlbCB0XHUwMEVEdHVsbyByZXBldGlkbyBzaSBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdHVsb1JlcGV0aWRvID0gcmVzdWx0YWRvLnF1ZXJ5U2VsZWN0b3IoJy50YXNrcy10cmVlLXRpdGxlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0dWxvUmVwZXRpZG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG9SZXBldGlkby5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBsaWNhciBjbGFzZSBlc3BlY2lhbCBwYXJhIHN1Yi1yZWZlcmVuY2lhc1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvLmNsYXNzTGlzdC5hZGQoJ3Rhc2tzLXN1YnJlZnMtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgc3ViLXJlZmVyZW5jaWFzIGFsIGVsZW1lbnRvIGFjdHVhbFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVJlZi5hcHBlbmRDaGlsZChyZXN1bHRhZG8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBlbGVtZW50byBkZSByZWZlcmVuY2lhIGEgbGEgbGlzdGFcbiAgICAgICAgICAgIGxpc3RhUmVmcy5hcHBlbmRDaGlsZChpdGVtUmVmKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGEgbGlzdGEgZGUgcmVmZXJlbmNpYXMgYSBsYSBzZWNjaVx1MDBGM25cbiAgICAgICAgc2VjY2lvblJlZmVyZW5jaWFzLmFwcGVuZENoaWxkKGxpc3RhUmVmcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSBzZWNjaVx1MDBGM24gYWwgY29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChzZWNjaW9uUmVmZXJlbmNpYXMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBubyBoYXkgdGFyZWFzIGVuIGFic29sdXRvIHkgZXN0YW1vcyBlbiBsYSByYVx1MDBFRHosIG1vc3RyYXIgbWVuc2FqZVxuICAgIGlmICghaGF5VGFyZWFzRW5BY3R1YWwgJiYgIWhheVRhcmVhc0VuUmVmZXJlbmNpYXMgJiYgcHJvZnVuZGlkYWRBY3R1YWwgPT09IDApIHtcbiAgICAgICAgY29uc3QgbWVuc2FqZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBtZW5zYWplLnRleHRDb250ZW50ID0gXCJObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgcGVuZGllbnRlcyBvIGVuIHByb2dyZXNvXCI7XG4gICAgICAgIG1lbnNhamUuY2xhc3NOYW1lID0gXCJ0YXNrcy10cmVlLWVtcHR5XCI7XG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb250ZW5lZG9yO1xufVxuXG4vKipcbiAqIEV4dHJhZSBsYXMgdGFyZWFzIHBlbmRpZW50ZXMgeSBlbiBwcm9ncmVzbyBkZSB1bmEgcFx1MDBFMWdpbmFcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYWdpbmEgLSBMYSBwXHUwMEUxZ2luYSBkZSBsYSBxdWUgZXh0cmFlciB0YXJlYXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkdiAtIEVsIG9iamV0byBkYXRhdmlld1xuICogQHJldHVybnMge0FycmF5fSAtIEFycmF5IGRlIG9iamV0b3MgY29uIGxhcyB0YXJlYXMgZXh0cmFcdTAwRURkYXNcbiAqL1xuYXN5bmMgZXh0cmFlclRhcmVhc0RlUGFnaW5hKHBhZ2luYSwgZHYpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBWZXJpZmljYXIgcXVlIHBhZ2luYS5maWxlIGV4aXN0ZVxuICAgICAgICBpZiAoIXBhZ2luYSB8fCAhcGFnaW5hLmZpbGUgfHwgIXBhZ2luYS5maWxlLnBhdGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIlBcdTAwRTFnaW5hIG8gYXJjaGl2byBubyB2XHUwMEUxbGlkbzpcIiwgcGFnaW5hKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm8gZGUgbWFuZXJhIHNlZ3VyYVxuICAgICAgICBsZXQgY29udGVuaWRvO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gUHJpbWVybyBpbnRlbnRhbW9zIGNvbiBlbCBtXHUwMEU5dG9kbyBkZSBEYXRhdmlldyBzaSBlc3RcdTAwRTEgZGlzcG9uaWJsZVxuICAgICAgICAgICAgaWYgKGR2ICYmIHR5cGVvZiBkdi5pbyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGR2LmlvLmxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gPSBhd2FpdCBkdi5pby5sb2FkKHBhZ2luYS5maWxlLnBhdGgpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIC8vIFNpIG5vIGZ1bmNpb25hLCB1c2Ftb3MgZWwgbVx1MDBFOXRvZG8gZGUgT2JzaWRpYW5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhZ2luYS5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChhcmNoaXZvICYmIGFyY2hpdm8gaW5zdGFuY2VvZiBhcHAuVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2UgcHVkbyBlbmNvbnRyYXIgZWwgYXJjaGl2b1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHJlYWRFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBObyBzZSBwdWRvIGxlZXIgZWwgYXJjaGl2byAke3BhZ2luYS5maWxlLnBhdGh9OmAsIHJlYWRFcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIHB1ZGltb3Mgb2J0ZW5lciBlbCBjb250ZW5pZG8sIHJldG9ybmFtb3MgYXJyYXkgdmFjXHUwMEVEb1xuICAgICAgICBpZiAoIWNvbnRlbmlkbykge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBObyBzZSBwdWRvIG9idGVuZXIgY29udGVuaWRvIHBhcmEgJHtwYWdpbmEuZmlsZS5wYXRofWApO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBEaXZpZGlyIGVsIGNvbnRlbmlkbyBlbiBsXHUwMEVEbmVhc1xuICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoJ1xcbicpO1xuICAgICAgICBcbiAgICAgICAgLy8gQXJyYXkgcGFyYSBhbG1hY2VuYXIgbGFzIHRhcmVhcyBlbmNvbnRyYWRhc1xuICAgICAgICBjb25zdCB0YXJlYXMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFuYWxpemFyIGNhZGEgbFx1MDBFRG5lYSBidXNjYW5kbyB0YXJlYXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhID0gbGluZWFzW2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFeHByZXNpXHUwMEYzbiByZWd1bGFyIHBhcmEgZGV0ZWN0YXIgdGFyZWFzIHBlbmRpZW50ZXMgKC0gWyBdKSBvIGVuIHByb2dyZXNvICgtIFsvXSlcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhUmVnZXggPSAvXihcXHMqKS1cXHMqXFxbKFsgXFwvXSlcXF1cXHMqKC4rKSQvO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhID0gdGFyZWFSZWdleC5leGVjKGxpbmVhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGNvaW5jaWRlbmNpYSkge1xuICAgICAgICAgICAgICAgIC8vIEV4dHJhZXIgbGFzIHBhcnRlcyBkZSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGVudGFjaW9uID0gY29pbmNpZGVuY2lhWzFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFkbyA9IGNvaW5jaWRlbmNpYVsyXSA9PT0gJyAnID8gJ3BlbmRpZW50ZScgOiAncHJvZ3Jlc28nO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvID0gY29pbmNpZGVuY2lhWzNdLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhciBvYmpldG8gcGFyYSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhID0ge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0byxcbiAgICAgICAgICAgICAgICAgICAgZXN0YWRvLFxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRhY2lvbjogaW5kZW50YWNpb24ubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBsaW5lYUluZGljZTogaSxcbiAgICAgICAgICAgICAgICAgICAgbGluZWFPcmlnaW5hbDogbGluZWFcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGxhIHRhcmVhIGFsIGFycmF5XG4gICAgICAgICAgICAgICAgdGFyZWFzLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFyZWFzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGV4dHJhZXIgdGFyZWFzIGRlICR7cGFnaW5hPy5maWxlPy5wYXRoIHx8ICdwXHUwMEUxZ2luYSBkZXNjb25vY2lkYSd9OmAsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdOyAvLyBSZXRvcm5hciBhcnJheSB2YWNcdTAwRURvIGVuIGNhc28gZGUgZXJyb3JcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYSBlbCBlbmNhYmV6YWRvIHBhcmEgdW5hIHJlZmVyZW5jaWEgY29uIGNvbnRhZG9yIGRlIHRhcmVhc1xuICogQHBhcmFtIHtPYmplY3R9IHJlZmVyZW5jaWEgLSBMYSByZWZlcmVuY2lhIHBhcmEgbGEgcXVlIGNyZWFyIGVsIGVuY2FiZXphZG9cbiAqIEBwYXJhbSB7T2JqZWN0fSBkdiAtIEVsIG9iamV0byBkYXRhdmlld1xuICogQHBhcmFtIHtOdW1iZXJ9IG51bVRhcmVhcyAtIE5cdTAwRkFtZXJvIGRlIHRhcmVhcyBlbiBlc3RhIHJlZmVyZW5jaWFcbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBFbGVtZW50byBIVE1MIGNvbiBlbCBlbmNhYmV6YWRvXG4gKi9cbmNyZWFyRW5jYWJlemFkb1JlZmVyZW5jaWEocmVmZXJlbmNpYSwgZHYsIG51bVRhcmVhcykge1xuICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgZGVsIGVuY2FiZXphZG9cbiAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhlYWRlci5jbGFzc05hbWUgPSBcInRhc2tzLXJlZi1oZWFkZXJcIjtcblxuICAgIC8vIEFcdTAwRjFhZGlyIGJvdFx1MDBGM24gZGUgZXhwYW5zaVx1MDBGM24vY29sYXBzb1xuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRvZ2dsZUJ0bi50ZXh0Q29udGVudCA9IFwiXHUyNUJDXCI7XG4gICAgdG9nZ2xlQnRuLmNsYXNzTmFtZSA9IFwidGFza3MtdG9nZ2xlLWJ0blwiO1xuICAgIHRvZ2dsZUJ0bi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXN0YXRlXCIsIFwiZXhwYW5kZWRcIik7XG4gICAgdG9nZ2xlQnRuLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiQ29sYXBzYXIvRXhwYW5kaXJcIik7XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgaGFuZGxlciBwYXJhIGNvbGFwc2FyL2V4cGFuZGlyXG4gICAgdG9nZ2xlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBjb25zdCBjdXJyZW50U3RhdGUgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtc3RhdGVcIik7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gY3VycmVudFN0YXRlID09PSBcImV4cGFuZGVkXCIgPyBcImNvbGxhcHNlZFwiIDogXCJleHBhbmRlZFwiO1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcImRhdGEtc3RhdGVcIiwgbmV3U3RhdGUpO1xuICAgICAgICB0aGlzLnRleHRDb250ZW50ID0gbmV3U3RhdGUgPT09IFwiZXhwYW5kZWRcIiA/IFwiXHUyNUJDXCIgOiBcIlx1MjVCNlwiO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBlbGVtZW50byBwYWRyZSBkZWwgYm90XHUwMEYzbiAoaGVhZGVyKSB5IGx1ZWdvIGVsIGVsZW1lbnRvIHBhZHJlIGRlbCBoZWFkZXIgKGxpKVxuICAgICAgICBjb25zdCBoZWFkZXJFbGVtZW50ID0gdGhpcy5jbG9zZXN0KFwiLnRhc2tzLXJlZi1oZWFkZXJcIik7XG4gICAgICAgIGlmIChoZWFkZXJFbGVtZW50ICYmIGhlYWRlckVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSBoZWFkZXJFbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9idGVuZXIgdG9kb3MgbG9zIGNvbnRlbmVkb3JlcyBzZWN1bmRhcmlvcyAtIHRhbnRvIHRhc2tzLWNvbnRhaW5lciBjb21vIHRhc2tzLXN1YnJlZnMtY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJzID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvckFsbCgnLnRhc2tzLWNvbnRhaW5lciwgLnRhc2tzLXN1YnJlZnMtY29udGFpbmVyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhbWJpYXIgbGEgdmlzaWJpbGlkYWQgZGUgdG9kb3MgbG9zIGNvbnRlbmVkb3JlcyBlbmNvbnRyYWRvc1xuICAgICAgICAgICAgY29udGFpbmVycy5mb3JFYWNoKGNvbnRhaW5lciA9PiB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBuZXdTdGF0ZSA9PT0gXCJleHBhbmRlZFwiID8gXCJibG9ja1wiIDogXCJub25lXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRGV0ZW5lciBwcm9wYWdhY2lcdTAwRjNuIHBhcmEgcXVlIG5vIGludGVyZmllcmEgY29uIG90cm9zIGNsaWNzXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGJvdFx1MDBGM24gZGUgZXhwYW5zaVx1MDBGM24gYWwgZW5jYWJlemFkb1xuICAgIGhlYWRlci5hcHBlbmRDaGlsZCh0b2dnbGVCdG4pO1xuICAgIFxuICAgIC8vIERldGVybWluYXIgZWwgdGV4dG8gcGFyYSBtb3N0cmFyXG4gICAgbGV0IG5vbWJyZU1vc3RyYWRvID0gcmVmZXJlbmNpYS5maWxlLmFsaWFzZXMgJiYgcmVmZXJlbmNpYS5maWxlLmFsaWFzZXMubGVuZ3RoID4gMFxuICAgICAgICA/IHJlZmVyZW5jaWEuZmlsZS5hbGlhc2VzWzBdXG4gICAgICAgIDogKHJlZmVyZW5jaWEudGl0dWxvIHx8IHJlZmVyZW5jaWEuZmlsZS5uYW1lKTtcbiAgICAgICAgXG4gICAgLy8gVGlwbyBkZSBsYSBub3RhIChzaSBlc3RcdTAwRTEgZGlzcG9uaWJsZSlcbiAgICBjb25zdCB0aXBvID0gcmVmZXJlbmNpYS50eXBlTmFtZTtcbiAgICBpZiAodGlwbykge1xuICAgICAgICBjb25zdCB0aXBvU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB0aXBvU3Bhbi5jbGFzc05hbWUgPSBcInRhc2tzLXJlZi10eXBlXCI7XG4gICAgICAgIHRpcG9TcGFuLnRleHRDb250ZW50ID0gYFske3RpcG99XSBgO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQodGlwb1NwYW4pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBlbCBlbW9qaSBkZSBlc3RhZG8gc2kgZXhpc3RlXG4gICAgaWYgKHJlZmVyZW5jaWEuZXN0YWRvKSB7XG4gICAgICAgIGNvbnN0IGVzdGFkb0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGVzdGFkb0VsLmNsYXNzTmFtZSA9IFwidGFza3MtcmVmLXN0YXRlXCI7XG4gICAgICAgIGVzdGFkb0VsLnRleHRDb250ZW50ID0gYCR7cmVmZXJlbmNpYS5lc3RhZG99IGA7XG4gICAgICAgIGVzdGFkb0VsLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCI1cHhcIjtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGVzdGFkb0VsKTtcbiAgICB9XG5cblxuICAgIC8vIENyZWFyIGVsIGVubGFjZSBhIGxhIG5vdGFcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlbmxhY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgZW5sYWNlLmNsYXNzTmFtZSA9IFwiaW50ZXJuYWwtbGluayB0YXNrcy1yZWYtbGlua1wiO1xuICAgICAgICBlbmxhY2UuaHJlZiA9IHJlZmVyZW5jaWEuZmlsZS5wYXRoO1xuICAgICAgICBlbmxhY2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIsIHJlZmVyZW5jaWEuZmlsZS5wYXRoKTtcbiAgICAgICAgZW5sYWNlLnRleHRDb250ZW50ID0gbm9tYnJlTW9zdHJhZG87XG4gICAgICAgIFxuICAgICAgICAvLyBBc2VndXJhciBxdWUgZWwgZW5sYWNlIGVzIGNsaWNhYmxlIHVzYW5kbyBsYSBBUEkgZGUgT2JzaWRpYW5cbiAgICAgICAgZW5sYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChyZWZlcmVuY2lhLmZpbGUucGF0aCwgXCJcIiwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGVubGFjZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY3JlYXIgZW5sYWNlOlwiLCBlKTtcbiAgICAgICAgY29uc3QgdGV4dG9QbGFubyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB0ZXh0b1BsYW5vLmNsYXNzTmFtZSA9IFwidGFza3MtcmVmLW5hbWVcIjtcbiAgICAgICAgdGV4dG9QbGFuby50ZXh0Q29udGVudCA9IG5vbWJyZU1vc3RyYWRvO1xuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQodGV4dG9QbGFubyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGNvbnRhZG9yIGRlIHRhcmVhc1xuICAgIGNvbnN0IGNvbnRhZG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgY29udGFkb3IuY2xhc3NOYW1lID0gXCJ0YXNrcy1jb3VudFwiO1xuICAgIGNvbnRhZG9yLnRleHRDb250ZW50ID0gYCgke251bVRhcmVhc30pYDtcbiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGFkb3IpO1xuICAgIFxuICAgIHJldHVybiBoZWFkZXI7XG59XG5cbi8qKlxuICogQWdyZWdhIHVuIGNvbmp1bnRvIGRlIHRhcmVhcyBhIHVuIGNvbnRlbmVkb3IgRE9NXG4gKiBAcGFyYW0ge0FycmF5fSB0YXJlYXMgLSBBcnJheSBkZSBvYmpldG9zIGRlIHRhcmVhc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGVuZWRvciAtIENvbnRlbmVkb3IgYWwgcXVlIGFcdTAwRjFhZGlyIGxhcyB0YXJlYXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkdiAtIE9iamV0byBkYXRhdmlld1xuICogQHBhcmFtIHtPYmplY3R9IHBhZ2luYSAtIFBcdTAwRTFnaW5hIGEgbGEgcXVlIHBlcnRlbmVjZW4gbGFzIHRhcmVhc1xuICovXG5hZ3JlZ2FyVGFyZWFzQUNvbnRlbmVkb3IodGFyZWFzLCBjb250ZW5lZG9yLCBkdiwgcGFnaW5hKSB7XG4gICAgaWYgKCF0YXJlYXMgfHwgdGFyZWFzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIENyZWFyIGxpc3RhIHBhcmEgbGFzIHRhcmVhc1xuICAgIGNvbnN0IGxpc3RhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgIGxpc3RhLmNsYXNzTmFtZSA9IFwidGFza3MtbGlzdFwiO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGNhZGEgdGFyZWEgY29tbyBcdTAwRUR0ZW0gZGUgbGlzdGFcbiAgICBmb3IgKGNvbnN0IHRhcmVhIG9mIHRhcmVhcykge1xuICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICBpdGVtLmNsYXNzTmFtZSA9IGB0YXNrcy1pdGVtIHRhc2tzLSR7dGFyZWEuZXN0YWRvfWA7XG4gICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKFwiZGF0YS1saW5lYVwiLCB0YXJlYS5saW5lYUluZGljZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCBpbmRpY2Fkb3IgZGUgZXN0YWRvIChjaGVja2JveClcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgY2hlY2tib3guY2xhc3NOYW1lID0gYHRhc2tzLWNoZWNrYm94IHRhc2tzLWNoZWNrYm94LSR7dGFyZWEuZXN0YWRvfWA7XG4gICAgICAgIGNoZWNrYm94LnRleHRDb250ZW50ID0gdGFyZWEuZXN0YWRvID09PSAncGVuZGllbnRlJyA/IFwiXHUyNjEwXCIgOiBcIlx1MjVENFwiO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGlzdGVuZXIgYWwgY2hlY2tib3ggcGFyYSBuYXZlZ2FyIGEgbGEgdGFyZWFcbiAgICAgICAgY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmF2ZWdhckFUYXJlYShwYWdpbmEuZmlsZS5wYXRoLCB0YXJlYS5saW5lYUluZGljZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGVsIHRleHRvIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnN0IHRleHRvU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB0ZXh0b1NwYW4uY2xhc3NOYW1lID0gXCJ0YXNrcy10ZXh0XCI7XG4gICAgICAgIHRleHRvU3Bhbi50ZXh0Q29udGVudCA9IHRhcmVhLnRleHRvO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGlzdGVuZXIgYWwgdGV4dG8gcGFyYSBuYXZlZ2FyIGEgbGEgdGFyZWFcbiAgICAgICAgdGV4dG9TcGFuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5hdmVnYXJBVGFyZWEocGFnaW5hLmZpbGUucGF0aCwgdGFyZWEubGluZWFJbmRpY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgYWwgXHUwMEVEdGVtXG4gICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgICAgICBpdGVtLmFwcGVuZENoaWxkKHRleHRvU3Bhbik7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBcdTAwRUR0ZW0gYSBsYSBsaXN0YVxuICAgICAgICBsaXN0YS5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgbGEgbGlzdGEgYWwgY29udGVuZWRvclxuICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQobGlzdGEpO1xufVxuXG5cbi8qKlxuICogT2J0aWVuZSB5IHByb2Nlc2Egbm90YXMgdmluY3VsYWRhcyBhIHVuYSBub3RhIGFjdHVhbCwgY29uIG9wY2lvbmVzIGRlIG9yZGVuYW1pZW50b1xuICogQHBhcmFtIHBhcmFtcyBPYmpldG8gY29uIHBhclx1MDBFMW1ldHJvcyBjb21vIG5vdGFBY3R1YWxQYXRoIHkgc29ydE9yZGVyXG4gKiBAcmV0dXJucyBPYmpldG8gY29uIGxhIHRhYmxhIEhUTUwgeSBtZXRhZGF0b3NcbiAqL1xuYXN5bmMgb2J0ZW5lck5vdGFzVmluY3VsYWRhcyhwYXJhbXMpIHtcbiAgICBjb25zb2xlLmxvZyhcIltERUJVR10gSW5pY2lhbmRvIG9idGVuZXJOb3Rhc1ZpbmN1bGFkYXMgY29uIHBhclx1MDBFMW1ldHJvczpcIiwgcGFyYW1zKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICAvLyBFeHRyYWVyIHBhclx1MDBFMW1ldHJvc1xuICAgICAgICBjb25zdCB7IG5vdGFBY3R1YWxQYXRoLCBzb3J0T3JkZXIgPSBcImhpdHNcIiB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gbm90YUFjdHVhbFBhdGg6XCIsIG5vdGFBY3R1YWxQYXRoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIHNvcnRPcmRlcjpcIiwgc29ydE9yZGVyKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghbm90YUFjdHVhbFBhdGgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbRVJST1JdIE5vIHNlIHByb3BvcmNpb25cdTAwRjMgbGEgcnV0YSBkZSBsYSBub3RhIGFjdHVhbFwiKTtcbiAgICAgICAgICAgIHJldHVybiB7IGVycm9yOiBcIk5vIHNlIHByb3BvcmNpb25cdTAwRjMgbGEgcnV0YSBkZSBsYSBub3RhIGFjdHVhbFwiIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE9idGVuZXIgbGEgbm90YSBhY3R1YWxcbiAgICAgICAgY29uc3QgY3VycmVudE5vdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vdGFBY3R1YWxQYXRoKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIGN1cnJlbnROb3RlOlwiLCBjdXJyZW50Tm90ZT8ucGF0aCB8fCBcIk5vIGVuY29udHJhZGFcIik7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWN1cnJlbnROb3RlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiW0VSUk9SXSBObyBzZSBwdWRvIGVuY29udHJhciBsYSBub3RhIGFjdHVhbCBlbiBsYSBydXRhOlwiLCBub3RhQWN0dWFsUGF0aCk7XG4gICAgICAgICAgICByZXR1cm4geyBlcnJvcjogXCJObyBzZSBwdWRvIGVuY29udHJhciBsYSBub3RhIGFjdHVhbFwiIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGFyIGxhIGZlY2hhIGFjdHVhbCAoaW5pY2lvIGRlbCBkXHUwMEVEYSlcbiAgICAgICAgY29uc3QgdG9kYXkgPSB3aW5kb3cubW9tZW50KCkuc3RhcnRPZihcImRheVwiKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIEZlY2hhIGFjdHVhbDpcIiwgdG9kYXkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0cmFyIG5vdGFzIHZpbmN1bGFkYXNcbiAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gVG90YWwgZGUgYXJjaGl2b3MgbWFya2Rvd246XCIsIGFsbEZpbGVzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgbGlua2VkTm90ZXMgPSBbXTtcbiAgICAgICAgbGV0IHByb2Nlc3NpbmdFcnJvcnMgPSAwO1xuICAgICAgICBsZXQgbm90ZXNXaXRoQXN1bnRvID0gMDtcbiAgICAgICAgbGV0IG5vdGVzVHlwZUVudHJlZ2FibGUgPSAwO1xuICAgICAgICBsZXQgcG9zc2libGVNYXRjaGVzID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBhbGxGaWxlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gUHJvY2VzYW5kbyBhcmNoaXZvOlwiLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIW1ldGFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBBcmNoaXZvIHNpbiBmcm9udG1hdHRlcjpcIiwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBNZXRhZGF0YSB0eXBlTmFtZTpcIiwgbWV0YWRhdGEudHlwZU5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBNZXRhZGF0YSBhc3VudG86XCIsIEpTT04uc3RyaW5naWZ5KG1ldGFkYXRhLmFzdW50bykpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS50eXBlTmFtZSAhPT0gXCJFbnRyZWdhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIEFyY2hpdm8gbm8gZXMgdW4gRW50cmVnYWJsZSwgc2Ugc2FsdGFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3Rlc1R5cGVFbnRyZWdhYmxlKys7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCFtZXRhZGF0YS5hc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIEVudHJlZ2FibGUgc2luIGFzdW50bywgc2Ugc2FsdGFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3Rlc1dpdGhBc3VudG8rKztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZXN0YSBub3RhIGhhY2UgcmVmZXJlbmNpYSBhIGxhIG5vdGEgYWN0dWFsXG4gICAgICAgICAgICAgICAgbGV0IGlzTGlua2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIENvbXByb2JhbmRvIHNpIHJlZmVyZW5jaWEgYSBsYSBub3RhIGFjdHVhbDpcIiwgbm90YUFjdHVhbFBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBUaXBvIGRlIGFzdW50bzpcIiwgdHlwZW9mIG1ldGFkYXRhLmFzdW50byk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWV0YWRhdGEuYXN1bnRvKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gYXN1bnRvIGVzIHVuIGFycmF5IGNvblwiLCBtZXRhZGF0YS5hc3VudG8ubGVuZ3RoLCBcImVsZW1lbnRvc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFBhcmEgY2FkYSBlbGVtZW50byBlbiBlbCBhcnJheSBhc3VudG9cbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBhc3VudG8gb2YgbWV0YWRhdGEuYXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gRWxlbWVudG8gYXN1bnRvOlwiLCBKU09OLnN0cmluZ2lmeShhc3VudG8pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzdW50byAmJiB0eXBlb2YgYXN1bnRvID09PSAnb2JqZWN0JyAmJiBhc3VudG8ucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBhc3VudG8gdGllbmUgcGF0aDpcIiwgYXN1bnRvLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBcdTAwQkZDb2luY2lkZSBjb24gbm90YUFjdHVhbFBhdGg/XCIsIGFzdW50by5wYXRoID09PSBub3RhQWN0dWFsUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzdW50by5wYXRoID09PSBub3RhQWN0dWFsUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpbmtlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlTWF0Y2hlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gXHUwMEExQ09JTkNJREVOQ0lBIEVOQ09OVFJBREEgZW4gcGF0aCFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFzdW50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gYXN1bnRvIGVzIHN0cmluZzpcIiwgYXN1bnRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gXHUwMEJGSW5jbHV5ZSBub3RhQWN0dWFsUGF0aD9cIiwgYXN1bnRvLmluY2x1ZGVzKG5vdGFBY3R1YWxQYXRoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzdW50by5pbmNsdWRlcyhub3RhQWN0dWFsUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMaW5rZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZU1hdGNoZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBBMUNPSU5DSURFTkNJQSBFTkNPTlRSQURBIGVuIHN0cmluZyFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUYW1iaVx1MDBFOW4gYnVzY2FyIGVuIGVsIGNvbnRlbmlkbyBkZWwgZW5sYWNlIHdpa2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWtpTGlua01hdGNoID0gYXN1bnRvLm1hdGNoKC9cXFtcXFsoLio/KSg/OlxcfCguKj8pKT9cXF1cXF0vKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2lraUxpbmtNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rUGF0aCA9IHdpa2lMaW5rTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBEZXRlY3RhZG8gZW5sYWNlIHdpa2ksIHBhdGg6XCIsIGxpbmtQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5rUGF0aCA9PT0gY3VycmVudE5vdGUuYmFzZW5hbWUgfHwgbGlua1BhdGggPT09IG5vdGFBY3R1YWxQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpbmtlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZU1hdGNoZXMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBcdTAwQTFDT0lOQ0lERU5DSUEgRU5DT05UUkFEQSBlbiB3aWtpbGluayFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG1ldGFkYXRhLmFzdW50byA9PT0gJ29iamVjdCcgJiYgbWV0YWRhdGEuYXN1bnRvLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIGFzdW50byBlcyB1biBvYmpldG8gY29uIHBhdGg6XCIsIG1ldGFkYXRhLmFzdW50by5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBCRkNvaW5jaWRlIGNvbiBub3RhQWN0dWFsUGF0aD9cIiwgbWV0YWRhdGEuYXN1bnRvLnBhdGggPT09IG5vdGFBY3R1YWxQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5hc3VudG8ucGF0aCA9PT0gbm90YUFjdHVhbFBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlua2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlTWF0Y2hlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBBMUNPSU5DSURFTkNJQSBFTkNPTlRSQURBIGVuIG9iamV0byFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRhZGF0YS5hc3VudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBhc3VudG8gZXMgdW4gc3RyaW5nIHNpbXBsZTpcIiwgbWV0YWRhdGEuYXN1bnRvKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBCRkluY2x1eWUgbm90YUFjdHVhbFBhdGg/XCIsIG1ldGFkYXRhLmFzdW50by5pbmNsdWRlcyhub3RhQWN0dWFsUGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLmFzdW50by5pbmNsdWRlcyhub3RhQWN0dWFsUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGlua2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlTWF0Y2hlcysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBBMUNPSU5DSURFTkNJQSBFTkNPTlRSQURBIGVuIHN0cmluZyBzaW1wbGUhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBUYW1iaVx1MDBFOW4gYnVzY2FyIGVuIGVsIGNvbnRlbmlkbyBkZWwgZW5sYWNlIHdpa2lcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lraUxpbmtNYXRjaCA9IG1ldGFkYXRhLmFzdW50by5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWtpTGlua01hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5rUGF0aCA9IHdpa2lMaW5rTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gRGV0ZWN0YWRvIGVubGFjZSB3aWtpIGVuIHN0cmluZyBzaW1wbGUsIHBhdGg6XCIsIGxpbmtQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyYXIgdGFudG8gY29uIGVsIG5vbWJyZSBkZSBhcmNoaXZvIGNvbW8gY29uIGxhIHJ1dGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXNQYXRoID0gbGlua1BhdGggPT09IG5vdGFBY3R1YWxQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlc0Jhc2VuYW1lID0gbGlua1BhdGggPT09IGN1cnJlbnROb3RlLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gXHUwMEJGQ29pbmNpZGUgY29uIHJ1dGEgY29tcGxldGE/XCIsIG1hdGNoZXNQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBcdTAwQkZDb2luY2lkZSBjb24gbm9tYnJlIGRlIGFyY2hpdm8/XCIsIG1hdGNoZXNCYXNlbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzUGF0aCB8fCBtYXRjaGVzQmFzZW5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0xpbmtlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zc2libGVNYXRjaGVzKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIFx1MDBBMUNPSU5DSURFTkNJQSBFTkNPTlRSQURBIGVuIHdpa2lsaW5rIHNpbXBsZSFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGlzTGlua2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBcdTI3MDUgTm90YSB2aW5jdWxhZGEgZW5jb250cmFkYTpcIiwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc2FyIGxhIG5vdGFcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhpdHMgPSBwYXJzZUZsb2F0KG1ldGFkYXRhLmhpdHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oaGl0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBoaXRzIG5vIGVzIHVuIG5cdTAwRkFtZXJvLCBlc3RhYmxlY2llbmRvIGEgMFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpdHMgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlhcyA9IG1ldGFkYXRhLmFsaWFzZXM/LlswXSB8fCBmaWxlLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlc3RhZG8gPSBtZXRhZGF0YS5lc3RhZG8gfHwgXCJTaW4gZXN0YWRvXCI7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgZGlmZXJlbmNpYURpYXMgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEucHVibGljYWNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBUaWVuZSBmZWNoYSBkZSBwdWJsaWNhY2lcdTAwRjNuOlwiLCBtZXRhZGF0YS5wdWJsaWNhY2lvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwdWJEYXRlID0gd2luZG93Lm1vbWVudChtZXRhZGF0YS5wdWJsaWNhY2lvbi50b1N0cmluZygpLCBcIllZWVktTU0tRERcIikuc3RhcnRPZihcImRheVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHB1YkRhdGUuaXNWYWxpZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZXJlbmNpYURpYXMgPSBwdWJEYXRlLmRpZmYodG9kYXksIFwiZGF5c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gZGlmZXJlbmNpYURpYXMgY2FsY3VsYWRvOlwiLCBkaWZlcmVuY2lhRGlhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBMYSBmZWNoYSBkZSBwdWJsaWNhY2lcdTAwRjNuIG5vIGVzIHZcdTAwRTFsaWRhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsaW5rZWROb3Rlcy5wdXNoKHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlhcywgXG4gICAgICAgICAgICAgICAgICAgICAgICBoaXRzLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGVzdGFkbywgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZlcmVuY2lhRGlhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gTm90YSBhXHUwMEYxYWRpZGEgYWwgcmVzdWx0YWRvIGNvbiBhbGlhczpcIiwgYWxpYXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBObyBlc3RcdTAwRTEgdmluY3VsYWRhLCBzZSBvbWl0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NpbmdFcnJvcnMrKztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbRVJST1JdIEVycm9yIHByb2Nlc2FuZG8gYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBQcm9jZXNvIGNvbXBsZXRhZG8uIE5vdGFzIHZpbmN1bGFkYXMgZW5jb250cmFkYXM6ICR7bGlua2VkTm90ZXMubGVuZ3RofWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBFc3RhZFx1MDBFRHN0aWNhcyBkZSBwcm9jZXNhbWllbnRvOmApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSAtIFRvdGFsIGFyY2hpdm9zIHByb2Nlc2Fkb3M6ICR7YWxsRmlsZXMubGVuZ3RofWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSAtIE5vdGFzIHRpcG8gRW50cmVnYWJsZTogJHtub3Rlc1R5cGVFbnRyZWdhYmxlfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSAtIE5vdGFzIGNvbiBhc3VudG86ICR7bm90ZXNXaXRoQXN1bnRvfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSAtIFBvc2libGVzIGNvaW5jaWRlbmNpYXM6ICR7cG9zc2libGVNYXRjaGVzfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSAtIEVycm9yZXMgZGUgcHJvY2VzYW1pZW50bzogJHtwcm9jZXNzaW5nRXJyb3JzfWApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxpbmtlZE5vdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIE5vIHNlIGVuY29udHJhcm9uIG5vdGFzIHZpbmN1bGFkYXNcIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIG1lbnNhamUgZGUgaW5mb3JtYWNpXHUwMEYzblxuICAgICAgICAgICAgY29uc3QgaW5mb0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgaW5mb0VsZW1lbnQuaW5uZXJIVE1MID0gYDxwPk5vIHNlIGVuY29udHJhcm9uIGVudHJlZ2FibGVzIHZpbmN1bGFkb3MgYSBlc3RhIG5vdGEuPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxzbWFsbD5Fc3RhZFx1MDBFRHN0aWNhczogJHtub3Rlc1R5cGVFbnRyZWdhYmxlfSBlbnRyZWdhYmxlcyBwcm9jZXNhZG9zLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke25vdGVzV2l0aEFzdW50b30gY29uIGFzdW50bywgJHtwb3NzaWJsZU1hdGNoZXN9IHBvc2libGVzIGNvaW5jaWRlbmNpYXMuPC9zbWFsbD48L3A+YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0YWJsYUVsZW1lbnQ6IGluZm9FbGVtZW50LFxuICAgICAgICAgICAgICAgIHRvdGFsTm90YXM6IDAsXG4gICAgICAgICAgICAgICAgdG90YWxIaXRzOiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPcmRlbmFyIG5vdGFzIHNlZ1x1MDBGQW4gZWwgY3JpdGVyaW9cbiAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddIE9yZGVuYW5kbyBub3RhcyBwb3I6XCIsIHNvcnRPcmRlcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoc29ydE9yZGVyID09PSBcImhpdHNcIikge1xuICAgICAgICAgICAgbGlua2VkTm90ZXMuc29ydCgoYSwgYikgPT4gYi5oaXRzIC0gYS5oaXRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHNhZmVEaWZmID0gZCA9PiBkID09IG51bGwgPyBJbmZpbml0eSA6IGQ7XG4gICAgICAgICAgICBsaW5rZWROb3Rlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGEuZXN0YWRvID09PSBcIlx1RDgzRFx1REQzNVwiICYmIGIuZXN0YWRvICE9PSBcIlx1RDgzRFx1REQzNVwiKSByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICBpZiAoYi5lc3RhZG8gPT09IFwiXHVEODNEXHVERDM1XCIgJiYgYS5lc3RhZG8gIT09IFwiXHVEODNEXHVERDM1XCIpIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2FmZURpZmYoYS5kaWZlcmVuY2lhRGlhcykgLSBzYWZlRGlmZihiLmRpZmVyZW5jaWFEaWFzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR10gQ3JlYW5kbyB0YWJsYSBIVE1MXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgbGEgdGFibGEgSFRNTFxuICAgICAgICBjb25zdCB0YWJsYUVsZW1lbnQgPSB0aGlzLmNyZWFyVGFibGFOb3Rhc1ZpbmN1bGFkYXMobGlua2VkTm90ZXMpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdG90YWxIaXRzID0gbGlua2VkTm90ZXMucmVkdWNlKChzdW0sIG5vdGEpID0+IHN1bSArIG5vdGEuaGl0cywgMCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW0RFQlVHXSBUb3RhbCBoaXRzOlwiLCB0b3RhbEhpdHMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhYmxhRWxlbWVudCxcbiAgICAgICAgICAgIHRvdGFsTm90YXM6IGxpbmtlZE5vdGVzLmxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsSGl0c1xuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJbRVJST1JdIEVycm9yIGVuIG9idGVuZXJOb3Rhc1ZpbmN1bGFkYXM6XCIsIGVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsZW1lbnRvIGRlIGVycm9yXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGVycm9yRWxlbWVudC5pbm5lckhUTUwgPSBgPHAgc3R5bGU9XCJjb2xvcjogcmVkO1wiPkVycm9yIGFsIHByb2Nlc2FyIG5vdGFzIHZpbmN1bGFkYXM6ICR7ZXJyb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5SZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLjwvcD5gO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBlcnJvcjogXCJFcnJvciBhbCBwcm9jZXNhciBub3RhcyB2aW5jdWxhZGFzOiBcIiArIGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICB0YWJsYUVsZW1lbnQ6IGVycm9yRWxlbWVudFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhIHVuYSB0YWJsYSBIVE1MIGNvbiBsYXMgbm90YXMgdmluY3VsYWRhc1xuICogQHBhcmFtIG5vdGFzIEFycmF5IGRlIG9iamV0b3MgY29uIGluZm9ybWFjaVx1MDBGM24gZGUgbm90YXNcbiAqIEByZXR1cm5zIEVsZW1lbnRvIEhUTUwgZGUgbGEgdGFibGFcbiAqL1xuY3JlYXJUYWJsYU5vdGFzVmluY3VsYWRhcyhub3Rhcykge1xuICAgIC8vIEZ1bmNpXHUwMEYzbiBhdXhpbGlhciBwYXJhIGRldGVybWluYXIgZWwgY29sb3Igc2VnXHUwMEZBbiBsb3MgZFx1MDBFRGFzIGhhc3RhIHB1YmxpY2FjaVx1MDBGM25cbiAgICBjb25zdCBjb2xvcktleSA9IChub3RhKSA9PiB7XG4gICAgICAgIGlmIChub3RhLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdUREMzVcIikgcmV0dXJuIFwiZ3JheVwiO1xuICAgICAgICBpZiAobm90YS5kaWZlcmVuY2lhRGlhcyA9PSBudWxsKSByZXR1cm4gXCJpbmhlcml0XCI7XG4gICAgICAgIGlmIChub3RhLmRpZmVyZW5jaWFEaWFzID4gNikgcmV0dXJuIFwiZ3JlZW5cIjtcbiAgICAgICAgaWYgKG5vdGEuZGlmZXJlbmNpYURpYXMgPj0gMykgcmV0dXJuIFwiI2U2YjgwMFwiO1xuICAgICAgICBpZiAobm90YS5kaWZlcmVuY2lhRGlhcyA+PSAxKSByZXR1cm4gXCJvcmFuZ2VcIjtcbiAgICAgICAgcmV0dXJuIFwicmVkXCI7XG4gICAgfTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICAvLyBDcmVhciBlbCBlbGVtZW50byB0YWJsYVxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICdkYXRhdmlldyB0YWJsZSc7XG4gICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgZW5jYWJlemFkb1xuICAgICAgICBjb25zdCB0aGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoZWFkZXJzID0gW1wiTm90YVwiLCBcIkhpdHNcIiwgXCJFc3RhZG9cIiwgXCJEXHUwMEVEYXMgaGFzdGEgUHVibGljYWNpXHUwMEYzblwiXTtcbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICB0aC50ZXh0Q29udGVudCA9IGhlYWRlcjtcbiAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZCh0aCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgY3VlcnBvIGRlIGxhIHRhYmxhXG4gICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFncmVnYXIgZmlsYXMgZGUgZGF0b3NcbiAgICAgICAgbm90YXMuZm9yRWFjaChub3RhID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENlbGRhIHBhcmEgZWwgZW5sYWNlIGRlIGxhIG5vdGEgLSBTT0xVQ0lcdTAwRDNOIENPUlJFR0lEQVxuICAgICAgICAgICAgY29uc3QgY2VsbE5vdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGxpbmsuY2xhc3NOYW1lID0gJ2ludGVybmFsLWxpbmsnO1xuICAgICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IG5vdGEuYWxpYXM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVzYXIgZGF0YS1ocmVmIGVuIGx1Z2FyIGRlIGhyZWYgY29uIG9ic2lkaWFuOi8vXG4gICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgbm90YS5maWxlLnBhdGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYWNlciBjbGljYWJsZSBlbCBlbmxhY2UgY29uIGVsIG1cdTAwRTl0b2RvIHNlZ3VybyBkZSBPYnNpZGlhblxuICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGF0aCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicpO1xuICAgICAgICAgICAgICAgIGlmIChwYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHBhdGgsIFwiXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2VsbE5vdGEuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbE5vdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDZWxkYSBwYXJhIGhpdHNcbiAgICAgICAgICAgIGNvbnN0IGNlbGxIaXRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIGNlbGxIaXRzLnRleHRDb250ZW50ID0gbm90YS5oaXRzO1xuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGxIaXRzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2VsZGEgcGFyYSBlc3RhZG9cbiAgICAgICAgICAgIGNvbnN0IGNlbGxFc3RhZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgY2VsbEVzdGFkby50ZXh0Q29udGVudCA9IG5vdGEuZXN0YWRvO1xuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGxFc3RhZG8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDZWxkYSBwYXJhIGRcdTAwRURhcyBoYXN0YSBwdWJsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICBjb25zdCBjZWxsRGlhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IGNvbG9yS2V5KG5vdGEpO1xuICAgICAgICAgICAgY29uc3QgZGlhc1RleHRvID0gKG5vdGEuZGlmZXJlbmNpYURpYXMgIT0gbnVsbCkgXG4gICAgICAgICAgICAgICAgPyBgJHtub3RhLmRpZmVyZW5jaWFEaWFzfSBkXHUwMEVEYXNgIFxuICAgICAgICAgICAgICAgIDogXCJObyBkZWZpbmlkb1wiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBzcGFuRGlhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHNwYW5EaWFzLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gICAgICAgICAgICBzcGFuRGlhcy5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgc3BhbkRpYXMudGV4dENvbnRlbnQgPSBkaWFzVGV4dG87XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNlbGxEaWFzLmFwcGVuZENoaWxkKHNwYW5EaWFzKTtcbiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsRGlhcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWdyZWdhciBmaWxhIGRlIHRvdGFsZXNcbiAgICAgICAgY29uc3QgdG90YWxSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdG90YWxMYWJlbENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICBjb25zdCB0b3RhbExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3Ryb25nJyk7XG4gICAgICAgIHRvdGFsTGFiZWwudGV4dENvbnRlbnQgPSAnVG90YWwnO1xuICAgICAgICB0b3RhbExhYmVsQ2VsbC5hcHBlbmRDaGlsZCh0b3RhbExhYmVsKTtcbiAgICAgICAgdG90YWxSb3cuYXBwZW5kQ2hpbGQodG90YWxMYWJlbENlbGwpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdG90YWxIaXRzID0gbm90YXMucmVkdWNlKChzdW0sIG5vdGEpID0+IHN1bSArIG5vdGEuaGl0cywgMCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b3RhbFZhbHVlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHJvbmcnKTtcbiAgICAgICAgdG90YWxWYWx1ZS50ZXh0Q29udGVudCA9IHRvdGFsSGl0cy50b1N0cmluZygpO1xuICAgICAgICB0b3RhbFZhbHVlQ2VsbC5hcHBlbmRDaGlsZCh0b3RhbFZhbHVlKTtcbiAgICAgICAgdG90YWxSb3cuYXBwZW5kQ2hpbGQodG90YWxWYWx1ZUNlbGwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2VsZGFzIHZhY1x1MDBFRGFzIHBhcmEgY29tcGxldGFyIGxhIGZpbGFcbiAgICAgICAgdG90YWxSb3cuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKSk7IC8vIGVzdGFkb1xuICAgICAgICB0b3RhbFJvdy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpKTsgLy8gZFx1MDBFRGFzXG4gICAgICAgIFxuICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0b3RhbFJvdyk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YWJsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY3JlYXIgdGFibGEgZGUgbm90YXMgdmluY3VsYWRhczpcIiwgZXJyb3IpO1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIkVycm9yIGFsIGdlbmVyYXIgdGFibGE6IFwiICsgZXJyb3IubWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnN0eWxlLmNvbG9yID0gXCJyZWRcIjtcbiAgICAgICAgcmV0dXJuIGVycm9yRWxlbWVudDtcbiAgICB9XG59XG5cbi8vLS0tIFNlbGVjdG9yIGRlIEVzdGFkb1xuXG4vKipcbiAqIEdlbmVyYSB1biBzZWxlY3RvciB2aXN1YWwgZGUgZXN0YWRvIHBhcmEgbGEgbm90YVxuICogQHBhcmFtIHBhcmFtcyBPYmpldG8gY29uIHBhclx1MDBFMW1ldHJvcyBjb21vIG5vdGFBY3R1YWxQYXRoIHkgZXN0YWRvQWN0dWFsIFxuICogQHJldHVybnMgRWxlbWVudG8gRE9NIGNvbiBlbCBzZWxlY3RvciBkZSBlc3RhZG9cbiAqL1xuYXN5bmMgZ2VuZXJhclNlbGVjdG9yRXN0YWRvKHBhcmFtcykge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEV4dHJhZXIgcGFyXHUwMEUxbWV0cm9zXG4gICAgICAgIGNvbnN0IHsgbm90YUFjdHVhbFBhdGgsIGVzdGFkb0FjdHVhbCB9ID0gcGFyYW1zO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFub3RhQWN0dWFsUGF0aCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHByb3BvcmNpb25cdTAwRjMgbGEgcnV0YSBkZSBsYSBub3RhIGFjdHVhbFwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsXG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChub3RhQWN0dWFsUGF0aCk7XG4gICAgICAgIGlmICghY3VycmVudEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGVuY29udHJhciBlbCBhcmNoaXZvIGFjdHVhbDpcIiwgbm90YUFjdHVhbFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIGxvcyBlc3RhZG9zXG4gICAgICAgIGNvbnN0IGVzdGFkb3MgPSBbXG4gICAgICAgICAgICB7IGVtb2ppOiBcIlx1RDgzRFx1REZFMlwiLCBsYWJlbDogXCJBdmFuemFuZG9cIiwgY29sb3I6IFwiIzRjYWY1MFwiIH0sXG4gICAgICAgICAgICB7IGVtb2ppOiBcIlx1RDgzRFx1REZFMVwiLCBsYWJlbDogXCJFbiBQYXVzYVwiLCBjb2xvcjogXCIjZmZjMTA3XCIgfSxcbiAgICAgICAgICAgIHsgZW1vamk6IFwiXHVEODNEXHVERDM0XCIsIGxhYmVsOiBcIkRldGVuaWRhXCIsIGNvbG9yOiBcIiNmNDQzMzZcIiB9LFxuICAgICAgICAgICAgeyBlbW9qaTogXCJcdUQ4M0RcdUREMzVcIiwgbGFiZWw6IFwiQXJjaGl2YWRhXCIsIGNvbG9yOiBcIiMyMTk2ZjNcIiB9XG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmFyIGVsIGVzdGFkbyBhY3R1YWwgZGUgbGEgbm90YVxuICAgICAgICBjb25zdCBlc3RhZG9JbmljaWFsID0gZXN0YWRvQWN0dWFsIHx8IFwiXHVEODNEXHVERkUxXCI7IC8vIFZhbG9yIHBvciBkZWZlY3RvXG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCBjb21wb25lbnRlIHByaW5jaXBhbFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJlc3RhZG8tc2VsZWN0b3ItY29udGFpbmVyXCI7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgY29udGFpbmVyLnN0eWxlLmdhcCA9IFwiMTBweFwiO1xuICAgICAgICBjb250YWluZXIuc3R5bGUubWF4V2lkdGggPSBcIjUwMHB4XCI7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSBcIjAgYXV0b1wiO1xuICAgICAgICBjb250YWluZXIuc3R5bGUucGFkZGluZyA9IFwiOHB4XCI7XG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuICAgICAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YSBcIkVzdGFkbzpcIlxuICAgICAgICBjb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGxhYmVsRWwuY2xhc3NOYW1lID0gXCJlc3RhZG8tbGFiZWxcIjtcbiAgICAgICAgbGFiZWxFbC50ZXh0Q29udGVudCA9IFwiRXN0YWRvOlwiO1xuICAgICAgICBsYWJlbEVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcIjUwMFwiO1xuICAgICAgICBsYWJlbEVsLnN0eWxlLmZvbnRTaXplID0gXCIwLjllbVwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWxFbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yIHBhcmEgbG9zIGJvdG9uZXNcbiAgICAgICAgY29uc3Qgb3B0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG9wdGlvbnNDb250YWluZXIuY2xhc3NOYW1lID0gXCJlc3RhZG8tb3B0aW9uc1wiO1xuICAgICAgICBvcHRpb25zQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5zdHlsZS5nYXAgPSBcIjZweFwiO1xuICAgICAgICBvcHRpb25zQ29udGFpbmVyLnN0eWxlLmZsZXggPSBcIjFcIjtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbnNDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5kaWNhZG9yIGRlbCBlc3RhZG8gYWN0dWFsIChhcGFyZWNlIGEgbGEgZGVyZWNoYSlcbiAgICAgICAgY29uc3QgY3VycmVudFN0YXRlSW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY3VycmVudFN0YXRlSW5kaWNhdG9yLmNsYXNzTmFtZSA9IFwiY3VycmVudC1zdGF0ZS1pbmRpY2F0b3JcIjtcbiAgICAgICAgY3VycmVudFN0YXRlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgY3VycmVudFN0YXRlSW5kaWNhdG9yLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICBjdXJyZW50U3RhdGVJbmRpY2F0b3Iuc3R5bGUubWFyZ2luTGVmdCA9IFwiOHB4XCI7XG4gICAgICAgIGN1cnJlbnRTdGF0ZUluZGljYXRvci5zdHlsZS5mb250U2l6ZSA9IFwiMC44NWVtXCI7XG4gICAgICAgIGN1cnJlbnRTdGF0ZUluZGljYXRvci5zdHlsZS5vcGFjaXR5ID0gXCIwLjhcIjtcbiAgICAgICAgY3VycmVudFN0YXRlSW5kaWNhdG9yLnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXN0YWRvSW5mbyA9IGVzdGFkb3MuZmluZChlID0+IGUuZW1vamkgPT09IGVzdGFkb0luaWNpYWwpIHx8IGVzdGFkb3NbMF07XG4gICAgICAgIGN1cnJlbnRTdGF0ZUluZGljYXRvci50ZXh0Q29udGVudCA9IGVzdGFkb0luZm8ubGFiZWw7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjdXJyZW50U3RhdGVJbmRpY2F0b3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgYWN0dWFsaXphciBlbCBlc3RhZG8gdXNhbmRvIGxhIEFQSSBuYXRpdmEgZGUgT2JzaWRpYW5cbiAgICAgICAgY29uc3QgdXBkYXRlU3RhdGUgPSBhc3luYyAobmV3U3RhdGUpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gVXRpbGl6YXIgbGEgQVBJIGRlIE9ic2lkaWFuIHBhcmEgbW9kaWZpY2FyIGVsIGZyb250bWF0dGVyXG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihjdXJyZW50RmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlci5lc3RhZG8gPSBuZXdTdGF0ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIHZpc3VhbGl6YWNpXHUwMEYzbiBkZWwgZXN0YWRvIGFjdHVhbFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VzdGFkb0luZm8gPSBlc3RhZG9zLmZpbmQoZSA9PiBlLmVtb2ppID09PSBuZXdTdGF0ZSk7XG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXRlSW5kaWNhdG9yLnRleHRDb250ZW50ID0gbmV3RXN0YWRvSW5mby5sYWJlbDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVzdGlsb3MgZGUgYm90b25lc1xuICAgICAgICAgICAgICAgIG9wdGlvbnNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcImJ1dHRvblwiKS5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJ0bkVzdGFkbyA9IGJ0bi5nZXRBdHRyaWJ1dGUoXCJkYXRhLWVzdGFkb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0YWRvRGF0YSA9IGVzdGFkb3MuZmluZChlID0+IGUuZW1vamkgPT09IGJ0bkVzdGFkbyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoYnRuRXN0YWRvID09PSBuZXdTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGVzdGFkb0RhdGEuY29sb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgxLjEpXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYm94U2hhZG93ID0gXCIwIDJweCA0cHggcmdiYSgwLDAsMCwwLjIpXCI7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYCR7ZXN0YWRvRGF0YS5jb2xvcn0yMmA7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uc3R5bGUuY29sb3IgPSBlc3RhZG9EYXRhLmNvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLnRyYW5zZm9ybSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gTW9zdHJhciBub3RpZmljYWNpXHUwMEYzbiBkZSBcdTAwRTl4aXRvXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXN0YWRvIGNhbWJpYWRvIGEgJHtuZXdFc3RhZG9JbmZvLmxhYmVsfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBlc3RhZG86XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBlc3RhZG8uIENvbnN1bHRhIGxhIGNvbnNvbGEgcGFyYSBtXHUwMEUxcyBkZXRhbGxlcy5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBib3RvbmVzIHBhcmEgY2FkYSBlc3RhZG9cbiAgICAgICAgZXN0YWRvcy5mb3JFYWNoKGVzdGFkbyA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgICBib3Rvbi5jbGFzc05hbWUgPSBcImVzdGFkby1idG5cIjtcbiAgICAgICAgICAgIGJvdG9uLnNldEF0dHJpYnV0ZShcImRhdGEtZXN0YWRvXCIsIGVzdGFkby5lbW9qaSk7XG4gICAgICAgICAgICBib3Rvbi5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBlc3RhZG8ubGFiZWwpO1xuICAgICAgICAgICAgYm90b24uc3R5bGUuZmxleCA9IFwiMVwiO1xuICAgICAgICAgICAgYm90b24uc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgICAgICAgICBib3Rvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjRweFwiO1xuICAgICAgICAgICAgYm90b24uc3R5bGUucGFkZGluZyA9IFwiNnB4IDBcIjtcbiAgICAgICAgICAgIGJvdG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgYm90b24uc3R5bGUudHJhbnNpdGlvbiA9IFwiYWxsIDAuMnMgZWFzZVwiO1xuICAgICAgICAgICAgYm90b24uc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICAgICAgICAgICAgYm90b24uc3R5bGUuYWxpZ25JdGVtcyA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICBib3Rvbi5zdHlsZS5qdXN0aWZ5Q29udGVudCA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVzdGFibGVjZXIgY29sb3Igc2VnXHUwMEZBbiBlc3RhZG8gYWN0dWFsXG4gICAgICAgICAgICBpZiAoZXN0YWRvSW5pY2lhbCA9PT0gZXN0YWRvLmVtb2ppKSB7XG4gICAgICAgICAgICAgICAgYm90b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZXN0YWRvLmNvbG9yO1xuICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xuICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoMS4xKVwiO1xuICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAycHggNHB4IHJnYmEoMCwwLDAsMC4yKVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBib3Rvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBgJHtlc3RhZG8uY29sb3J9MjJgO1xuICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLmNvbG9yID0gZXN0YWRvLmNvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBlbW9qaVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGVtb2ppU3Bhbi50ZXh0Q29udGVudCA9IGVzdGFkby5lbW9qaTtcbiAgICAgICAgICAgIGVtb2ppU3Bhbi5zdHlsZS5mb250U2l6ZSA9IFwiMThweFwiO1xuICAgICAgICAgICAgYm90b24uYXBwZW5kQ2hpbGQoZW1vamlTcGFuKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXZlbnRvcyBkZSByYXRcdTAwRjNuXG4gICAgICAgICAgICBib3Rvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXN0YWRvSW5pY2lhbCAhPT0gZXN0YWRvLmVtb2ppKSB7XG4gICAgICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGAke2VzdGFkby5jb2xvcn00NGA7XG4gICAgICAgICAgICAgICAgICAgIGJvdG9uLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWSgtMnB4KVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBib3Rvbi5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlc3RhZG9JbmljaWFsICE9PSBlc3RhZG8uZW1vamkpIHtcbiAgICAgICAgICAgICAgICAgICAgYm90b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYCR7ZXN0YWRvLmNvbG9yfTIyYDtcbiAgICAgICAgICAgICAgICAgICAgYm90b24uc3R5bGUudHJhbnNmb3JtID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV2ZW50byBkZSBjbGljXG4gICAgICAgICAgICBib3Rvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVN0YXRlKGVzdGFkby5lbW9qaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgb3B0aW9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gZ2VuZXJhclNlbGVjdG9yRXN0YWRvOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuXG4vLyAtLSBBcmJvbCBkZSBwcm95ZWN0b3MgR1REXG5cblxuLyoqXG4gKiBHZW5lcmEgdW4gXHUwMEUxcmJvbCBqZXJcdTAwRTFycXVpY28gdmlzdWFsIGRlIHByb3llY3RvcyBvcmdhbml6YWRvcyBwb3IgXHUwMEMxcmVhcyBkZSBWaWRhIHkgXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBkdiAtIEVsIG9iamV0byBkYXRhdmlldyBwYXJhIGFjY2VkZXIgYSBzdXMgZnVuY2lvbmVzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIE9wY2lvbmVzIGRlIGNvbmZpZ3VyYWNpXHUwMEYzbiAodGlwbyBkZSBwcm95ZWN0b3MsIGZpbHRyb3MgYWRpY2lvbmFsZXMpXG4gKiBAcmV0dXJucyB7SFRNTEVsZW1lbnR9IC0gRWxlbWVudG8gRE9NIGNvbiBsYSBlc3RydWN0dXJhIGRlIFx1MDBFMXJib2xcbiAqL1xuYXN5bmMgZ2VuZXJhckFyYm9sUHJveWVjdG9zKGR2LCBvcHRpb25zID0ge30pIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBPcGNpb25lcyBwb3IgZGVmZWN0b1xuICAgICAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICAgICAgICB0aXBvUHJveWVjdG86IG9wdGlvbnMudGlwb1Byb3llY3RvIHx8IFwiUEdURFwiLCAvLyBQR1REIG8gUFFcbiAgICAgICAgICAgIGVzdGFkb0ZpbHRybzogb3B0aW9ucy5lc3RhZG9GaWx0cm8gfHwgXCJcdUQ4M0RcdURGRTJcIiwgICAvLyBQb3IgZGVmZWN0byBzb2xvIG11ZXN0cmEgYWN0aXZvc1xuICAgICAgICAgICAgc29sb01vc3RyYXJDb25QZW5kaWVudGVzOiBvcHRpb25zLnNvbG9Nb3N0cmFyQ29uUGVuZGllbnRlcyB8fCBmYWxzZSxcbiAgICAgICAgICAgIGV4cGFuZGlyUG9yRGVmZWN0bzogb3B0aW9ucy5leHBhbmRpclBvckRlZmVjdG8gfHwgZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBEZXRlcm1pbmFyIGxhIGNhcnBldGEgY29ycmVjdGEgYmFzYWRhIGVuIGVsIHRpcG8gZGUgcHJveWVjdG9cbiAgICAgICAgY29uc3QgY2FycGV0YUtleSA9IGNvbmZpZy50aXBvUHJveWVjdG8gPT09IFwiUEdURFwiID8gXCJmb2xkZXJfUHJveWVjdG9zR1REXCIgOiBcImZvbGRlcl9Qcm95ZWN0b3NRXCI7XG4gICAgICAgIGNvbnN0IGNhcnBldGEgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tjYXJwZXRhS2V5XTtcbiAgICAgICAgXG4gICAgICAgIGlmICghY2FycGV0YSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ2FycGV0YSBwYXJhICR7Y29uZmlnLnRpcG9Qcm95ZWN0b30gbm8gY29uZmlndXJhZGFgKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVycm9yLmNsYXNzTmFtZSA9IFwidHJlZS1lcnJvclwiO1xuICAgICAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSBgRXJyb3I6IENhcnBldGEgcGFyYSAke2NvbmZpZy50aXBvUHJveWVjdG99IG5vIGNvbmZpZ3VyYWRhYDtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgZWwgY29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgICAgY29uc3QgY29udGVuZWRvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbnRlbmVkb3IuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtdHJlZS1jb250YWluZXJcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsIGVuY2FiZXphZG9cbiAgICAgICAgY29uc3QgZW5jYWJlemFkbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgZW5jYWJlemFkby5jbGFzc05hbWUgPSBcInByb3llY3Rvcy10cmVlLXRpdGxlXCI7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiBPYnRlbmVyIHRvZG9zIGxvcyBwcm95ZWN0b3MgZGVsIHRpcG8gc29saWNpdGFkb1xuICAgICAgICBjb25zb2xlLmxvZyhgQnVzY2FuZG8gcHJveWVjdG9zIGVuOiAke2NhcnBldGF9YCk7XG4gICAgICAgIGxldCBwcm95ZWN0b3MgPSBkdi5wYWdlcygpXG4gICAgICAgICAgICAuZmlsdGVyKHAgPT4gcC5maWxlLnBhdGguc3RhcnRzV2l0aChjYXJwZXRhKSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAhcC5maWxlLnBhdGguaW5jbHVkZXMoXCIvUGxhbnRpbGxhcy9cIikgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAhcC5maWxlLnBhdGguaW5jbHVkZXMoXCIvQXJjaGl2by9cIikpO1xuICAgICAgICBcbiAgICAgICAgLy8gR3VhcmRhciBlbCB0b3RhbCBhbnRlcyBkZSBmaWx0cmFyICAgICAgICAgICAgICAgICBcbiAgICAgICAgY29uc3QgdG90YWxQcm95ZWN0b3MgPSBwcm95ZWN0b3MubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyBHdWFyZGFyIHRvZG9zIGxvcyBwcm95ZWN0b3MgZW4gdW5hIHZhcmlhYmxlIHBhcmEgcG9kZXIgZmlsdHJhciBwZXJvIG1hbnRlbmVyIGxhIGVzdHJ1Y3R1cmFcbiAgICAgICAgY29uc3QgdG9kb3NMb3NQcm95ZWN0b3MgPSBbLi4ucHJveWVjdG9zXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgLy8gQXBsaWNhciBmaWx0cm8gZGUgZXN0YWRvIHNpIGVzdFx1MDBFMSBlc3BlY2lmaWNhZG8geSBubyBlcyBcInRvZG9zXCJcbiAgICAgICAgbGV0IHByb3llY3Rvc0ZpbHRyYWRvcyA9IHByb3llY3RvcztcbiAgICAgICAgaWYgKGNvbmZpZy5lc3RhZG9GaWx0cm8gJiYgY29uZmlnLmVzdGFkb0ZpbHRybyAhPT0gXCJcIikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYEFwbGljYW5kbyBmaWx0cm8gZGUgZXN0YWRvOiAke2NvbmZpZy5lc3RhZG9GaWx0cm99YCk7XG4gICAgICAgICAgICBwcm95ZWN0b3NGaWx0cmFkb3MgPSBwcm95ZWN0b3MuZmlsdGVyKHAgPT4gcC5lc3RhZG8gPT09IGNvbmZpZy5lc3RhZG9GaWx0cm8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGVuY2FiZXphZG8gY29uIGxhIGN1ZW50YSB0b3RhbFxuICAgICAgICBlbmNhYmV6YWRvLnRleHRDb250ZW50ID0gYEVzdHJ1Y3R1cmEgZGUgUHJveWVjdG9zICR7Y29uZmlnLnRpcG9Qcm95ZWN0b30gJHtjb25maWcuZXN0YWRvRmlsdHJvID8gYCgke3Byb3llY3Rvc0ZpbHRyYWRvcy5sZW5ndGh9LyR7dG90YWxQcm95ZWN0b3N9KWAgOiAnJ31gO1xuICAgICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKGVuY2FiZXphZG8pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gaGF5IHByb3llY3RvcyBkZXNwdVx1MDBFOXMgZGUgZmlsdHJhclxuICAgICAgICBpZiAocHJveWVjdG9zRmlsdHJhZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgbWVuc2FqZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgICAgbWVuc2FqZS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy10cmVlLWVtcHR5XCI7XG4gICAgICAgICAgICBtZW5zYWplLnRleHRDb250ZW50ID0gYE5vIHNlIGVuY29udHJhcm9uIHByb3llY3RvcyAke2NvbmZpZy50aXBvUHJveWVjdG99JHtjb25maWcuZXN0YWRvRmlsdHJvID8gYCBjb24gZXN0YWRvICR7Y29uZmlnLmVzdGFkb0ZpbHRyb31gIDogXCJcIn1gO1xuICAgICAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5lZG9yO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgUHJveWVjdG9zIGVuY29udHJhZG9zOiAke3Byb3llY3Rvc0ZpbHRyYWRvcy5sZW5ndGh9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiBDb25zdHJ1aXIgbGEgZXN0cnVjdHVyYSBqZXJcdTAwRTFycXVpY2EgcGFyYSBzYWJlciBxdVx1MDBFOSBwcm95ZWN0b3Mgc2UgZGViZW4gbW9zdHJhclxuICAgICAgICBjb25zdCBwcm95ZWN0b3NBTW9zdHJhciA9IHRoaXMuZGV0ZXJtaW5hclByb3llY3Rvc0FNb3N0cmFyKHByb3llY3Rvc0ZpbHRyYWRvcywgdG9kb3NMb3NQcm95ZWN0b3MsIGNvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICAvLyAzLiBDb25zdHJ1aXIgbGEgZXN0cnVjdHVyYSBqZXJcdTAwRTFycXVpY2EgZGUgcHJveWVjdG9zIGNvbiBsb3MgcXVlIHNlIHZhbiBhIG1vc3RyYXJcbiAgICAgICAgY29uc3QgeyBhcmVhc1ZpZGEsIHByb3llY3Rvc1NpbkFWIH0gPSB0aGlzLmNvbnN0cnVpckVzdHJ1Y3R1cmFQcm95ZWN0b3MocHJveWVjdG9zQU1vc3RyYXIsIGR2KTtcbiAgICAgICAgXG4gICAgICAgIC8vIDQuIFJlbmRlcml6YXIgZWwgXHUwMEUxcmJvbCBkZSBcdTAwQzFyZWFzIGRlIFZpZGFcbiAgICAgICAgY29uc3QgYXJib2xBViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGFyYm9sQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYXMtY29udGFpbmVyXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBPcmRlbmFyIGxhcyBcdTAwQzFyZWFzIGRlIFZpZGEgcG9yIG5vbWJyZVxuICAgICAgICBjb25zdCBhcmVhc1ZpZGFPcmRlbmFkYXMgPSBbLi4uYXJlYXNWaWRhLmVudHJpZXMoKV1cbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlQSA9IGFbMV0ubm9tYnJlIHx8IGFbMF07XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlQiA9IGJbMV0ubm9tYnJlIHx8IGJbMF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vbWJyZUEubG9jYWxlQ29tcGFyZShub21icmVCKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVuZGVyaXphciBjYWRhIFx1MDBDMXJlYSBkZSBWaWRhIHkgc3UgY29udGVuaWRvXG4gICAgICAgIGZvciAoY29uc3QgW2F2UGF0aCwgYXZEYXRhXSBvZiBhcmVhc1ZpZGFPcmRlbmFkYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNlY2Npb25BViA9IHRoaXMucmVuZGVyaXphckFyZWFWaWRhKGF2UGF0aCwgYXZEYXRhLCBkdiwgY29uZmlnKTtcbiAgICAgICAgICAgIGFyYm9sQVYuYXBwZW5kQ2hpbGQoc2VjY2lvbkFWKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gNS4gUmVuZGVyaXphciBwcm95ZWN0b3Mgc2luIFx1MDBDMXJlYSBkZSBWaWRhIHNpIGV4aXN0ZW5cbiAgICAgICAgaWYgKHByb3llY3Rvc1NpbkFWLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNlY2Npb25TaW5BViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBzZWNjaW9uU2luQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3Mtc2luLWF2XCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRpdHVsb1NpbkFWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHRpdHVsb1NpbkFWLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLWFyZWEtaGVhZGVyIHNpbi1hcmVhXCI7XG4gICAgICAgICAgICB0aXR1bG9TaW5BVi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiLCBgc2luYXYtZ2xvYmFsYCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGNvbnRhZG9yIGRlIHByb3llY3RvcyBzaW4gQVZcbiAgICAgICAgICAgIHRpdHVsb1NpbkFWLmlubmVySFRNTCA9IGA8c3BhbiBjbGFzcz1cInRvZ2dsZS1pY29uXCI+XHUyNUJBPC9zcGFuPiA8c3BhbiBjbGFzcz1cImFyZWEtdGlwb1wiPlNpbiBcdTAwQzFyZWEgZGUgVmlkYTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJwcm95ZWN0b3MtY29udGFkb3JcIj4oJHtwcm95ZWN0b3NTaW5BVi5sZW5ndGh9KTwvc3Bhbj5gO1xuICAgICAgICAgICAgc2VjY2lvblNpbkFWLmFwcGVuZENoaWxkKHRpdHVsb1NpbkFWKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvU2luQVYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY29udGVuaWRvU2luQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYS1jb250ZW50XCI7XG4gICAgICAgICAgICBjb250ZW5pZG9TaW5BVi5pZCA9IGBjb250ZW50LSR7dGl0dWxvU2luQVYuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtaWRcIil9YDtcbiAgICAgICAgICAgIGNvbnRlbmlkb1NpbkFWLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjsgLy8gSW5pY2lhbG1lbnRlIGNlcnJhZG9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWdydXBhciBwcm95ZWN0b3Mgc2luIEFWIHBvciBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzXG4gICAgICAgICAgICBjb25zdCBhcmVhc1BvckFJID0gdGhpcy5hZ3J1cGFyUHJveWVjdG9zUG9yQUkocHJveWVjdG9zU2luQVYsIGR2KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVuZGVyaXphciBjYWRhIGdydXBvIGRlIEFJXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFthaVBhdGgsIGFpRGF0YV0gb2YgYXJlYXNQb3JBSS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNjaW9uQUkgPSB0aGlzLnJlbmRlcml6YXJBcmVhSW50ZXJlcyhhaVBhdGgsIGFpRGF0YSwgZHYsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvU2luQVYuYXBwZW5kQ2hpbGQoc2VjY2lvbkFJKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJveWVjdG9zIHNpbiBBSSBkZW50cm8gZGUgbG9zIHNpbiBBVlxuICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zU2luQUkgPSBwcm95ZWN0b3NTaW5BVi5maWx0ZXIocCA9PiBcbiAgICAgICAgICAgICAgICAhcC5hcmVhSW50ZXJlcyB8fCBcbiAgICAgICAgICAgICAgICAoQXJyYXkuaXNBcnJheShwLmFyZWFJbnRlcmVzKSAmJiBwLmFyZWFJbnRlcmVzLmxlbmd0aCA9PT0gMCkgfHxcbiAgICAgICAgICAgICAgICAodHlwZW9mIHAuYXJlYUludGVyZXMgPT09ICdzdHJpbmcnICYmIHAuYXJlYUludGVyZXMudHJpbSgpID09PSAnJylcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwcm95ZWN0b3NTaW5BSS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VjY2lvblNpbkFJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBzZWNjaW9uU2luQUkuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3Mtc2luLWFpXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGl0dWxvU2luQUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgIHRpdHVsb1NpbkFJLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLWFpLWhlYWRlciBzaW4tYWlcIjtcbiAgICAgICAgICAgICAgICB0aXR1bG9TaW5BSS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiLCBgc2luYWktZ2xvYmFsYCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgY29udGFkb3IgYWwgdFx1MDBFRHR1bG9cbiAgICAgICAgICAgICAgICB0aXR1bG9TaW5BSS5pbm5lckhUTUwgPSBgPHNwYW4gY2xhc3M9XCJ0b2dnbGUtaWNvblwiPlx1MjVCQTwvc3Bhbj4gPHNwYW4gY2xhc3M9XCJhaS10aXBvXCI+U2luIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXM8L3NwYW4+IDxzcGFuIGNsYXNzPVwicHJveWVjdG9zLWNvbnRhZG9yXCI+KCR7cHJveWVjdG9zU2luQUkubGVuZ3RofSk8L3NwYW4+YDtcbiAgICAgICAgICAgICAgICBzZWNjaW9uU2luQUkuYXBwZW5kQ2hpbGQodGl0dWxvU2luQUkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb1NpbkFJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9TaW5BSS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1haS1jb250ZW50XCI7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvU2luQUkuaWQgPSBgY29udGVudC0ke3RpdHVsb1NpbkFJLmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLWlkXCIpfWA7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvU2luQUkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBJbmljaWFsbWVudGUgY2VycmFkb1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSBwcm95ZWN0byBzaW4gQUlcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0YVByb3llY3RvcyA9IHRoaXMucmVuZGVyaXphckxpc3RhUHJveWVjdG9zKHByb3llY3Rvc1NpbkFJLCBkdiwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9TaW5BSS5hcHBlbmRDaGlsZChsaXN0YVByb3llY3Rvcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc2VjY2lvblNpbkFJLmFwcGVuZENoaWxkKGNvbnRlbmlkb1NpbkFJKTtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9TaW5BVi5hcHBlbmRDaGlsZChzZWNjaW9uU2luQUkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGxpc3RlbmVyIHBhcmEgdG9nZ2xlXG4gICAgICAgICAgICAgICAgdGl0dWxvU2luQUkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWNjaW9uQnlJZCh0aXR1bG9TaW5BSS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2VjY2lvblNpbkFWLmFwcGVuZENoaWxkKGNvbnRlbmlkb1NpbkFWKTtcbiAgICAgICAgICAgIGFyYm9sQVYuYXBwZW5kQ2hpbGQoc2VjY2lvblNpbkFWKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWdyZWdhciBsaXN0ZW5lciBwYXJhIGNvbGFwc2FyL2V4cGFuZGlyXG4gICAgICAgICAgICB0aXR1bG9TaW5BVi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWNjaW9uQnlJZCh0aXR1bG9TaW5BVi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoYXJib2xBVik7XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBzZSBlc3BlY2lmaWNcdTAwRjMgZXhwYW5kaXIgcG9yIGRlZmVjdG9cbiAgICAgICAgaWYgKG9wdGlvbnMuZXhwYW5kaXJQb3JEZWZlY3RvKSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZGlyVG9kbyhjb250ZW5lZG9yKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGdlbmVyYXJBcmJvbFByb3llY3RvczpcIiwgZXJyb3IpO1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtdHJlZS1lcnJvclwiO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBgRXJyb3IgYWwgZ2VuZXJhciBcdTAwRTFyYm9sIGRlIHByb3llY3RvczogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgIHJldHVybiBlcnJvckVsZW1lbnQ7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnN0cnV5ZSBsYSBlc3RydWN0dXJhIGplclx1MDBFMXJxdWljYSBkZSBwcm95ZWN0b3Mgb3JnYW5pemFkb3MgcG9yIFx1MDBDMXJlYXMgZGUgVmlkYVxuICogQHBhcmFtIHtBcnJheX0gcHJveWVjdG9zIC0gQXJyYXkgZGUgcHJveWVjdG9zIG9idGVuaWRvcyBkZSBkYXRhdmlld1xuICogQHBhcmFtIHtPYmplY3R9IGR2IC0gT2JqZXRvIGRhdGF2aWV3XG4gKiBAcmV0dXJucyB7T2JqZWN0fSAtIEVzdHJ1Y3R1cmEgb3JnYW5pemFkYSBwb3IgXHUwMEUxcmVhc1xuICovXG5jb25zdHJ1aXJFc3RydWN0dXJhUHJveWVjdG9zKHByb3llY3RvcywgZHYpIHtcbiAgICBjb25zdCBhcmVhc1ZpZGEgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgcHJveWVjdG9zU2luQVYgPSBbXTtcbiAgICBcbiAgICAvLyBQcm9jZXNhciBjYWRhIHByb3llY3RvIHBhcmEgb3JnYW5pemFybG8gamVyXHUwMEUxcnF1aWNhbWVudGVcbiAgICBmb3IgKGNvbnN0IHByb3llY3RvIG9mIHByb3llY3Rvcykge1xuICAgICAgICBsZXQgYXNpZ25hZG8gPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluYXIgYSBxdVx1MDBFOSBcdTAwRTFyZWEgZGUgdmlkYSBwZXJ0ZW5lY2VcbiAgICAgICAgaWYgKHByb3llY3RvLmFyZWFWaWRhKSB7XG4gICAgICAgICAgICBsZXQgYXJlYVZpZGFQYXRoO1xuICAgICAgICAgICAgbGV0IGFyZWFWaWRhTm9tYnJlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNYW5lamFyIGRpZmVyZW50ZXMgZm9ybWF0b3MgZGUgYXJlYVZpZGFcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJveWVjdG8uYXJlYVZpZGEgPT09ICdvYmplY3QnICYmIHByb3llY3RvLmFyZWFWaWRhLnBhdGgpIHtcbiAgICAgICAgICAgICAgICBhcmVhVmlkYVBhdGggPSBwcm95ZWN0by5hcmVhVmlkYS5wYXRoO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2UGFnZSA9IGR2LnBhZ2UoYXJlYVZpZGFQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgYXJlYVZpZGFOb21icmUgPSBhdlBhZ2UudGl0dWxvIHx8IGF2UGFnZS5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBhcmVhVmlkYU5vbWJyZSA9IFwiXHUwMEMxcmVhIGRlIFZpZGEgXCIgKyBhcmVhVmlkYVBhdGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHJveWVjdG8uYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgLy8gTWFuZWphciBmb3JtYXRvIGRlIFx1MDBFMXJlYSBkZSB2aWRhIGNvbW8gc3RyaW5nLCBwb2RyXHUwMEVEYSBzZXIgdW4gd2lraWxpbmtcbiAgICAgICAgICAgICAgICBjb25zdCB3aWtpTWF0Y2ggPSBwcm95ZWN0by5hcmVhVmlkYS5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgaWYgKHdpa2lNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBhcmVhVmlkYVBhdGggPSB3aWtpTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhTm9tYnJlID0gd2lraU1hdGNoWzJdIHx8IHdpa2lNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByb3llY3RvLmFyZWFWaWRhICE9PSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1c2NhciBsYSBwXHUwMEUxZ2luYSBwb3Igbm9tYnJlXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdlBhZ2VzID0gZHYucGFnZXMoJyNcIicgKyBwcm95ZWN0by5hcmVhVmlkYSArICdcIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGF2UGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhUGF0aCA9IGF2UGFnZXNbMF0uZmlsZS5wYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhTm9tYnJlID0gcHJveWVjdG8uYXJlYVZpZGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhUGF0aCA9IHByb3llY3RvLmFyZWFWaWRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhTm9tYnJlID0gcHJveWVjdG8uYXJlYVZpZGE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhUGF0aCA9IHByb3llY3RvLmFyZWFWaWRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYVZpZGFOb21icmUgPSBwcm95ZWN0by5hcmVhVmlkYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgaGF5IHVuIFx1MDBFMXJlYSBkZSB2aWRhIHZcdTAwRTFsaWRhIHF1ZSBubyBzZWEgXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIlxuICAgICAgICAgICAgaWYgKGFyZWFWaWRhUGF0aCAmJiBhcmVhVmlkYVBhdGggIT09IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWFyZWFzVmlkYS5oYXMoYXJlYVZpZGFQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICBhcmVhc1ZpZGEuc2V0KGFyZWFWaWRhUGF0aCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBhcmVhVmlkYU5vbWJyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3llY3RvczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b3NQb3JBSTogbmV3IE1hcCgpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZ3JlZ2FyIGVsIHByb3llY3RvIGFsIFx1MDBFMXJlYSBjb3JyZXNwb25kaWVudGVcbiAgICAgICAgICAgICAgICBhcmVhc1ZpZGEuZ2V0KGFyZWFWaWRhUGF0aCkucHJveWVjdG9zLnB1c2gocHJveWVjdG8pO1xuICAgICAgICAgICAgICAgIGFzaWduYWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBPcmdhbml6YXIgcG9yIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXMgZGVudHJvIGRlbCBcdTAwQzFyZWEgZGUgVmlkYVxuICAgICAgICAgICAgICAgIGlmIChwcm95ZWN0by5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmVhc0ludGVyZXMgPSBBcnJheS5pc0FycmF5KHByb3llY3RvLmFyZWFJbnRlcmVzKSA/IFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJveWVjdG8uYXJlYUludGVyZXMgOiBbcHJveWVjdG8uYXJlYUludGVyZXNdO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFzaWduYWRvQUkgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWkgb2YgYXJlYXNJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWlQYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFpTm9tYnJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamFyIGRpZmVyZW50ZXMgZm9ybWF0b3MgZGUgYXJlYUludGVyZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWkgPT09ICdvYmplY3QnICYmIGFpLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaS5wYXRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFpUGFnZSA9IGR2LnBhZ2UoYWlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlOb21icmUgPSBhaVBhZ2UudGl0dWxvIHx8IGFpUGFnZS5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU5vbWJyZSA9IFwiXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5cyBcIiArIGFpUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhaSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWtpTWF0Y2ggPSBhaS5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpa2lNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSB3aWtpTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFpTm9tYnJlID0gd2lraU1hdGNoWzJdIHx8IHdpa2lNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCdXNjYXIgbGEgcFx1MDBFMWdpbmEgcG9yIG5vbWJyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWlQYWdlcyA9IGR2LnBhZ2VzKCcjXCInICsgYWkgKyAnXCInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhaVBhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaVBhZ2VzWzBdLmZpbGUucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU5vbWJyZSA9IGFpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaU5vbWJyZSA9IGFpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFpTm9tYnJlID0gYWk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhaVBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdkRhdGEgPSBhcmVhc1ZpZGEuZ2V0KGFyZWFWaWRhUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhdkRhdGEucHJveWVjdG9zUG9yQUkuaGFzKGFpUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZEYXRhLnByb3llY3Rvc1BvckFJLnNldChhaVBhdGgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbWJyZTogYWlOb21icmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b3M6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdkRhdGEucHJveWVjdG9zUG9yQUkuZ2V0KGFpUGF0aCkucHJveWVjdG9zLnB1c2gocHJveWVjdG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzaWduYWRvQUkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBzZSBhc2lnblx1MDBGMyBhIG5pbmdcdTAwRkFuIEFJLCBhZ3JlZ2FyIGEgcHJveWVjdG9zIHNpbiBBSVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFzaWduYWRvQUkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF2RGF0YSA9IGFyZWFzVmlkYS5nZXQoYXJlYVZpZGFQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXZEYXRhLnByb3llY3Rvc1NpbkFJKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZEYXRhLnByb3llY3Rvc1NpbkFJID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhdkRhdGEucHJveWVjdG9zU2luQUkucHVzaChwcm95ZWN0byk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcm95ZWN0byBzaW4gQUlcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXZEYXRhID0gYXJlYXNWaWRhLmdldChhcmVhVmlkYVBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWF2RGF0YS5wcm95ZWN0b3NTaW5BSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXZEYXRhLnByb3llY3Rvc1NpbkFJID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYXZEYXRhLnByb3llY3Rvc1NpbkFJLnB1c2gocHJveWVjdG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFhc2lnbmFkbykge1xuICAgICAgICAgICAgcHJveWVjdG9zU2luQVYucHVzaChwcm95ZWN0byk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgYXJlYXNWaWRhLCBwcm95ZWN0b3NTaW5BViB9O1xufVxuXG4vKipcbiAqIEFncnVwYSBwcm95ZWN0b3MgcG9yIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXNcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3llY3RvcyAtIEFycmF5IGRlIHByb3llY3Rvc1xuICogQHBhcmFtIHtPYmplY3R9IGR2IC0gT2JqZXRvIGRhdGF2aWV3XG4gKiBAcmV0dXJucyB7TWFwfSAtIE1hcGEgZGUgcHJveWVjdG9zIGFncnVwYWRvcyBwb3IgQUlcbiAqL1xuYWdydXBhclByb3llY3Rvc1BvckFJKHByb3llY3RvcywgZHYpIHtcbiAgICBjb25zdCBhcmVhc1BvckFJID0gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHByb3llY3Rvc1NpbkFJID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBwcm95ZWN0byBvZiBwcm95ZWN0b3MpIHtcbiAgICAgICAgbGV0IGFzaWduYWRvID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAocHJveWVjdG8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFyZWFzSW50ZXJlcyA9IEFycmF5LmlzQXJyYXkocHJveWVjdG8uYXJlYUludGVyZXMpID8gXG4gICAgICAgICAgICAgICAgcHJveWVjdG8uYXJlYUludGVyZXMgOiBbcHJveWVjdG8uYXJlYUludGVyZXNdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFpIG9mIGFyZWFzSW50ZXJlcykge1xuICAgICAgICAgICAgICAgIGxldCBhaVBhdGg7XG4gICAgICAgICAgICAgICAgbGV0IGFpTm9tYnJlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE1hbmVqYXIgZGlmZXJlbnRlcyBmb3JtYXRvcyBkZSBhcmVhSW50ZXJlc1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWkgPT09ICdvYmplY3QnICYmIGFpLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYWlQYXRoID0gYWkucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFpUGFnZSA9IGR2LnBhZ2UoYWlQYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpTm9tYnJlID0gYWlQYWdlLnRpdHVsbyB8fCBhaVBhZ2UuZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhaU5vbWJyZSA9IFwiXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5cyBcIiArIGFpUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFpID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWtpTWF0Y2ggPSBhaS5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh3aWtpTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpUGF0aCA9IHdpa2lNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFpTm9tYnJlID0gd2lraU1hdGNoWzJdIHx8IHdpa2lNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJ1c2NhciBsYSBwXHUwMEUxZ2luYSBwb3Igbm9tYnJlXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFpUGFnZXMgPSBkdi5wYWdlcygnI1wiJyArIGFpICsgJ1wiJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFpUGFnZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaVBhZ2VzWzBdLmZpbGUucGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlOb21icmUgPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaVBhdGggPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlOb21icmUgPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlQYXRoID0gYWk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlOb21icmUgPSBhaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWlQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJlYXNQb3JBSS5oYXMoYWlQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYXNQb3JBSS5zZXQoYWlQYXRoLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlOiBhaU5vbWJyZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b3M6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgYXJlYXNQb3JBSS5nZXQoYWlQYXRoKS5wcm95ZWN0b3MucHVzaChwcm95ZWN0byk7XG4gICAgICAgICAgICAgICAgICAgIGFzaWduYWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghYXNpZ25hZG8pIHtcbiAgICAgICAgICAgIHByb3llY3Rvc1NpbkFJLnB1c2gocHJveWVjdG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFncmVnYXIgcHJveWVjdG9zIHNpbiBBSSBjb21vIHVuYSBjYXRlZ29yXHUwMEVEYSBlc3BlY2lhbFxuICAgIGlmIChwcm95ZWN0b3NTaW5BSS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFyZWFzUG9yQUkuc2V0KFwic2luLWFpXCIsIHtcbiAgICAgICAgICAgIG5vbWJyZTogXCJTaW4gXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5c1wiLFxuICAgICAgICAgICAgcHJveWVjdG9zOiBwcm95ZWN0b3NTaW5BSVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGFyZWFzUG9yQUk7XG59XG5cblxuLyoqXG4gKiBSZW5kZXJpemEgdW5hIHNlY2NpXHUwMEYzbiBkZSBcdTAwQzFyZWEgZGUgVmlkYSBjb24gc3VzIHByb3llY3Rvc1xuICogQHBhcmFtIHtzdHJpbmd9IGF2UGF0aCAtIFJ1dGEgZGVsIGFyY2hpdm8gZGVsIFx1MDBDMXJlYSBkZSBWaWRhXG4gKiBAcGFyYW0ge09iamVjdH0gYXZEYXRhIC0gRGF0b3MgZGVsIFx1MDBDMXJlYSBkZSBWaWRhXG4gKiBAcGFyYW0ge09iamVjdH0gZHYgLSBPYmpldG8gZGF0YXZpZXdcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBDb25maWd1cmFjaVx1MDBGM25cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBFbGVtZW50byBET00gY29uIGxhIHNlY2NpXHUwMEYzbiBkZWwgQVZcbiAqL1xucmVuZGVyaXphckFyZWFWaWRhKGF2UGF0aCwgYXZEYXRhLCBkdiwgY29uZmlnKSB7XG4gICAgY29uc3Qgc2VjY2lvbkFWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzZWNjaW9uQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYS12aWRhXCI7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXIgZWwgdG90YWwgZGUgcHJveWVjdG9zIGVuIGVzdGEgXHUwMEUxcmVhIHBhcmEgbW9zdHJhciBlbiBlbCB0XHUwMEVEdHVsb1xuICAgIGNvbnN0IHRvdGFsUHJveWVjdG9zID0gYXZEYXRhLnByb3llY3Rvcy5sZW5ndGg7XG4gICAgXG4gICAgLy8gRW5jYWJlemFkbyBkZWwgXHUwMEMxcmVhIGRlIFZpZGFcbiAgICBjb25zdCB0aXR1bG9BViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGl0dWxvQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYS1oZWFkZXJcIjtcbiAgICB0aXR1bG9BVi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiLCBgYXYtJHthdlBhdGgucmVwbGFjZSgvXFwvL2csIFwiLVwiKX1gKTtcbiAgICBcbiAgICAvLyBJY29ubyBkZSB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVJY29ubyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRvZ2dsZUljb25vLmNsYXNzTmFtZSA9IFwidG9nZ2xlLWljb25cIjtcbiAgICB0b2dnbGVJY29uby50ZXh0Q29udGVudCA9IFwiXHUyNUJBXCI7IC8vIFBvciBkZWZlY3RvIGNlcnJhZG9cbiAgICB0aXR1bG9BVi5hcHBlbmRDaGlsZCh0b2dnbGVJY29ubyk7XG4gICAgXG4gICAgLy8gRXRpcXVldGEgZGUgdGlwb1xuICAgIGNvbnN0IHRpcG9MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRpcG9MYWJlbC5jbGFzc05hbWUgPSBcImFyZWEtdGlwb1wiO1xuICAgIHRpcG9MYWJlbC50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEREMyXHVGRTBGIFx1MDBDMXJlYSBkZSBWaWRhOlwiO1xuICAgIHRpdHVsb0FWLmFwcGVuZENoaWxkKHRpcG9MYWJlbCk7XG4gICAgXG4gICAgLy8gRW5sYWNlIGRlbCBBVlxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVubGFjZUFWID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgIGVubGFjZUFWLmNsYXNzTmFtZSA9IFwiYXJlYS1saW5rXCI7XG4gICAgICAgIGVubGFjZUFWLnRleHRDb250ZW50ID0gYXZEYXRhLm5vbWJyZSB8fCBcIlx1MDBDMXJlYSBkZSBWaWRhXCI7XG4gICAgICAgIGVubGFjZUFWLmhyZWYgPSBhdlBhdGg7XG4gICAgICAgIGVubGFjZUFWLnNldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiLCBhdlBhdGgpO1xuICAgICAgICBlbmxhY2VBVi50YXJnZXQgPSBcIl9ibGFua1wiOyAvLyBBYnJpciBlbiBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgXG4gICAgICAgIC8vIEhhY2VyIGNsaWNhYmxlIGVsIGVubGFjZSB1c2FuZG8gbGEgQVBJIGRlIE9ic2lkaWFuXG4gICAgICAgIGVubGFjZUFWLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBhcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChhdlBhdGgsIFwiXCIsIHRydWUpOyAvLyBFbCB0cnVlIGhhY2UgcXVlIHNlIGFicmEgZW4gbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgdGl0dWxvQVYuYXBwZW5kQ2hpbGQoZW5sYWNlQVYpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc3QgdGV4dG9BViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB0ZXh0b0FWLnRleHRDb250ZW50ID0gYXZEYXRhLm5vbWJyZSB8fCBcIlx1MDBDMXJlYSBkZSBWaWRhXCI7XG4gICAgICAgIHRpdHVsb0FWLmFwcGVuZENoaWxkKHRleHRvQVYpO1xuICAgIH1cbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBjb250YWRvciBkZSBwcm95ZWN0b3NcbiAgICBjb25zdCBjb250YWRvclByb3llY3RvcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGNvbnRhZG9yUHJveWVjdG9zLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLWNvbnRhZG9yXCI7XG4gICAgY29udGFkb3JQcm95ZWN0b3MudGV4dENvbnRlbnQgPSBgICgke3RvdGFsUHJveWVjdG9zfSlgO1xuICAgIHRpdHVsb0FWLmFwcGVuZENoaWxkKGNvbnRhZG9yUHJveWVjdG9zKTtcbiAgICBcbiAgICBzZWNjaW9uQVYuYXBwZW5kQ2hpbGQodGl0dWxvQVYpO1xuICAgIFxuICAgIC8vIENvbnRlbmlkbyBkZWwgQVYgKEFJcyB5IHByb3llY3RvcylcbiAgICBjb25zdCBjb250ZW5pZG9BViA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVuaWRvQVYuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYS1jb250ZW50XCI7XG4gICAgY29udGVuaWRvQVYuaWQgPSBgY29udGVudC0ke3RpdHVsb0FWLmdldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLWlkXCIpfWA7XG4gICAgY29udGVuaWRvQVYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBQb3IgZGVmZWN0byBjZXJyYWRvXG4gICAgXG4gICAgLy8gUmVuZGVyaXphciBcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5cyBkZW50cm8gZGUgZXN0YSBBVlxuICAgIGlmIChhdkRhdGEucHJveWVjdG9zUG9yQUkgJiYgYXZEYXRhLnByb3llY3Rvc1BvckFJLnNpemUgPiAwKSB7XG4gICAgICAgIC8vIE9yZGVuYXIgQUlzIGFsZmFiXHUwMEU5dGljYW1lbnRlXG4gICAgICAgIGNvbnN0IGFpT3JkZW5hZGFzID0gWy4uLmF2RGF0YS5wcm95ZWN0b3NQb3JBSS5lbnRyaWVzKCldXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYVsxXS5ub21icmUubG9jYWxlQ29tcGFyZShiWzFdLm5vbWJyZSkpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBbYWlQYXRoLCBhaURhdGFdIG9mIGFpT3JkZW5hZGFzKSB7XG4gICAgICAgICAgICBjb25zdCBzZWNjaW9uQUkgPSB0aGlzLnJlbmRlcml6YXJBcmVhSW50ZXJlcyhhaVBhdGgsIGFpRGF0YSwgZHYsIGNvbmZpZyk7XG4gICAgICAgICAgICBjb250ZW5pZG9BVi5hcHBlbmRDaGlsZChzZWNjaW9uQUkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFJlbmRlcml6YXIgcHJveWVjdG9zIHNpbiBBSVxuICAgIGlmIChhdkRhdGEucHJveWVjdG9zU2luQUkgJiYgYXZEYXRhLnByb3llY3Rvc1NpbkFJLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc2VjY2lvblNpbkFJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc2VjY2lvblNpbkFJLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLXNpbi1haVwiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGl0dWxvU2luQUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aXR1bG9TaW5BSS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1haS1oZWFkZXIgc2luLWFpXCI7XG4gICAgICAgIHRpdHVsb1NpbkFJLnNldEF0dHJpYnV0ZShcImRhdGEtdG9nZ2xlLWlkXCIsIGBzaW5haS0ke2F2UGF0aC5yZXBsYWNlKC9cXC8vZywgXCItXCIpfWApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGFkb3IgZGUgcHJveWVjdG9zIHNpbiBBSVxuICAgICAgICBjb25zdCB0b3RhbFNpbkFJID0gYXZEYXRhLnByb3llY3Rvc1NpbkFJLmxlbmd0aDtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsIEhUTUwgY29uIGVsIGJvdFx1MDBGM24gdG9nZ2xlIHkgZWwgY29udGFkb3JcbiAgICAgICAgdGl0dWxvU2luQUkuaW5uZXJIVE1MID0gYDxzcGFuIGNsYXNzPVwidG9nZ2xlLWljb25cIj5cdTI1QkE8L3NwYW4+IDxzcGFuIGNsYXNzPVwiYWktdGlwb1wiPlNpbiBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzPC9zcGFuPiA8c3BhbiBjbGFzcz1cInByb3llY3Rvcy1jb250YWRvclwiPigke3RvdGFsU2luQUl9KTwvc3Bhbj5gO1xuICAgICAgICBzZWNjaW9uU2luQUkuYXBwZW5kQ2hpbGQodGl0dWxvU2luQUkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY29udGVuaWRvU2luQUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250ZW5pZG9TaW5BSS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1haS1jb250ZW50XCI7XG4gICAgICAgIGNvbnRlbmlkb1NpbkFJLmlkID0gYGNvbnRlbnQtJHt0aXR1bG9TaW5BSS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKX1gO1xuICAgICAgICBjb250ZW5pZG9TaW5BSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IC8vIFBvciBkZWZlY3RvIGNlcnJhZG9cbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSBwcm95ZWN0byBzaW4gQUlcbiAgICAgICAgY29uc3QgbGlzdGFQcm95ZWN0b3MgPSB0aGlzLnJlbmRlcml6YXJMaXN0YVByb3llY3RvcyhhdkRhdGEucHJveWVjdG9zU2luQUksIGR2LCBjb25maWcpO1xuICAgICAgICBjb250ZW5pZG9TaW5BSS5hcHBlbmRDaGlsZChsaXN0YVByb3llY3Rvcyk7XG4gICAgICAgIFxuICAgICAgICBzZWNjaW9uU2luQUkuYXBwZW5kQ2hpbGQoY29udGVuaWRvU2luQUkpO1xuICAgICAgICBjb250ZW5pZG9BVi5hcHBlbmRDaGlsZChzZWNjaW9uU2luQUkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWdyZWdhciBsaXN0ZW5lciBwYXJhIGNvbGFwc2FyL2V4cGFuZGlyXG4gICAgICAgIHRpdHVsb1NpbkFJLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSAhPT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWNjaW9uQnlJZCh0aXR1bG9TaW5BSS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBzZWNjaW9uQVYuYXBwZW5kQ2hpbGQoY29udGVuaWRvQVYpO1xuICAgIFxuICAgIC8vIEFncmVnYXIgbGlzdGVuZXIgcGFyYSBjb2xhcHNhci9leHBhbmRpclxuICAgIHRpdHVsb0FWLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VjY2lvbkJ5SWQodGl0dWxvQVYuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtaWRcIikpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHNlY2Npb25BVjtcbn1cblxuLyoqXG4gKiBSZW5kZXJpemEgdW5hIHNlY2NpXHUwMEYzbiBkZSBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzIGNvbiBzdXMgcHJveWVjdG9zXG4gKiBAcGFyYW0ge3N0cmluZ30gYWlQYXRoIC0gUnV0YSBkZWwgYXJjaGl2byBkZWwgXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5c1xuICogQHBhcmFtIHtPYmplY3R9IGFpRGF0YSAtIERhdG9zIGRlbCBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzXG4gKiBAcGFyYW0ge09iamVjdH0gZHYgLSBPYmpldG8gZGF0YXZpZXdcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBDb25maWd1cmFjaVx1MDBGM25cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBFbGVtZW50byBET00gY29uIGxhIHNlY2NpXHUwMEYzbiBkZWwgQUlcbiAqL1xucmVuZGVyaXphckFyZWFJbnRlcmVzKGFpUGF0aCwgYWlEYXRhLCBkdiwgY29uZmlnKSB7XG4gICAgY29uc3Qgc2VjY2lvbkFJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzZWNjaW9uQUkuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYXJlYS1pbnRlcmVzXCI7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXIgdG90YWwgZGUgcHJveWVjdG9zIHBhcmEgbW9zdHJhciBlbiB0XHUwMEVEdHVsb1xuICAgIGNvbnN0IHRvdGFsUHJveWVjdG9zID0gYWlEYXRhLnByb3llY3RvcyA/IGFpRGF0YS5wcm95ZWN0b3MubGVuZ3RoIDogMDtcbiAgICBcbiAgICAvLyBFbmNhYmV6YWRvIGRlbCBBSVxuICAgIGNvbnN0IHRpdHVsb0FJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aXR1bG9BSS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1haS1oZWFkZXJcIjtcbiAgICB0aXR1bG9BSS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiLCBgYWktJHthaVBhdGgucmVwbGFjZSgvXFwvL2csIFwiLVwiKX1gKTtcbiAgICBcbiAgICAvLyBJY29ubyBkZSB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVJY29ubyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRvZ2dsZUljb25vLmNsYXNzTmFtZSA9IFwidG9nZ2xlLWljb25cIjtcbiAgICB0b2dnbGVJY29uby50ZXh0Q29udGVudCA9IFwiXHUyNUJBXCI7IC8vIFBvciBkZWZlY3RvIGNlcnJhZG9cbiAgICB0aXR1bG9BSS5hcHBlbmRDaGlsZCh0b2dnbGVJY29ubyk7XG4gICAgXG4gICAgLy8gRXRpcXVldGEgZGUgdGlwb1xuICAgIGNvbnN0IHRpcG9MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIHRpcG9MYWJlbC5jbGFzc05hbWUgPSBcImFpLXRpcG9cIjtcbiAgICB0aXBvTGFiZWwudGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1RENDMSBcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzOlwiO1xuICAgIHRpdHVsb0FJLmFwcGVuZENoaWxkKHRpcG9MYWJlbCk7XG4gICAgXG4gICAgLy8gRW5sYWNlIGRlbCBBSVxuICAgIGlmIChhaVBhdGggIT09IFwic2luLWFpXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGVubGFjZUFJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgICBlbmxhY2VBSS5jbGFzc05hbWUgPSBcImFpLWxpbmtcIjtcbiAgICAgICAgICAgIGVubGFjZUFJLnRleHRDb250ZW50ID0gYWlEYXRhLm5vbWJyZSB8fCBcIlx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXNcIjtcbiAgICAgICAgICAgIGVubGFjZUFJLmhyZWYgPSBhaVBhdGg7XG4gICAgICAgICAgICBlbmxhY2VBSS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIiwgYWlQYXRoKTtcbiAgICAgICAgICAgIGVubGFjZUFJLnRhcmdldCA9IFwiX2JsYW5rXCI7IC8vIEFicmlyIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYWNlciBjbGljYWJsZSBlbCBlbmxhY2UgdXNhbmRvIGxhIEFQSSBkZSBPYnNpZGlhblxuICAgICAgICAgICAgZW5sYWNlQUkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoYWlQYXRoLCBcIlwiLCB0cnVlKTsgLy8gRWwgdHJ1ZSBoYWNlIHF1ZSBzZSBhYnJhIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpdHVsb0FJLmFwcGVuZENoaWxkKGVubGFjZUFJKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgdGV4dG9BSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgdGV4dG9BSS50ZXh0Q29udGVudCA9IGFpRGF0YS5ub21icmUgfHwgXCJcdTAwQzFyZWEgZGUgSW50ZXJcdTAwRTlzXCI7XG4gICAgICAgICAgICB0aXR1bG9BSS5hcHBlbmRDaGlsZCh0ZXh0b0FJKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHRvQUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgdGV4dG9BSS50ZXh0Q29udGVudCA9IGFpRGF0YS5ub21icmUgfHwgXCJTaW4gXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5c1wiO1xuICAgICAgICB0aXR1bG9BSS5hcHBlbmRDaGlsZCh0ZXh0b0FJKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgY29udGFkb3IgZGUgcHJveWVjdG9zXG4gICAgY29uc3QgY29udGFkb3JQcm95ZWN0b3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjb250YWRvclByb3llY3Rvcy5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1jb250YWRvclwiO1xuICAgIGNvbnRhZG9yUHJveWVjdG9zLnRleHRDb250ZW50ID0gYCAoJHt0b3RhbFByb3llY3Rvc30pYDtcbiAgICB0aXR1bG9BSS5hcHBlbmRDaGlsZChjb250YWRvclByb3llY3Rvcyk7XG4gICAgXG4gICAgc2VjY2lvbkFJLmFwcGVuZENoaWxkKHRpdHVsb0FJKTtcbiAgICBcbiAgICAvLyBDb250ZW5pZG8gZGVsIEFJIChwcm95ZWN0b3MpXG4gICAgY29uc3QgY29udGVuaWRvQUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnRlbmlkb0FJLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLWFpLWNvbnRlbnRcIjtcbiAgICBjb250ZW5pZG9BSS5pZCA9IGBjb250ZW50LSR7dGl0dWxvQUkuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2dnbGUtaWRcIil9YDtcbiAgICBjb250ZW5pZG9BSS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IC8vIFBvciBkZWZlY3RvIGNlcnJhZG9cbiAgICBcbiAgICAvLyBSZW5kZXJpemFyIHByb3llY3RvcyBkZSBlc3RhIEFJXG4gICAgaWYgKGFpRGF0YS5wcm95ZWN0b3MgJiYgYWlEYXRhLnByb3llY3Rvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IGxpc3RhUHJveWVjdG9zID0gdGhpcy5yZW5kZXJpemFyTGlzdGFQcm95ZWN0b3MoYWlEYXRhLnByb3llY3RvcywgZHYsIGNvbmZpZyk7XG4gICAgICAgIGNvbnRlbmlkb0FJLmFwcGVuZENoaWxkKGxpc3RhUHJveWVjdG9zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBtZW5zYWplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIG1lbnNhamUuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtYWktZW1wdHlcIjtcbiAgICAgICAgbWVuc2FqZS50ZXh0Q29udGVudCA9IFwiTm8gaGF5IHByb3llY3RvcyBlbiBlc3RhIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXNcIjtcbiAgICAgICAgY29udGVuaWRvQUkuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgfVxuICAgIFxuICAgIHNlY2Npb25BSS5hcHBlbmRDaGlsZChjb250ZW5pZG9BSSk7XG4gICAgXG4gICAgLy8gQWdyZWdhciBsaXN0ZW5lciBwYXJhIGNvbGFwc2FyL2V4cGFuZGlyXG4gICAgdGl0dWxvQUkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTZWNjaW9uQnlJZCh0aXR1bG9BSS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gc2VjY2lvbkFJO1xufVxuXG4vKipcbiAqIFRvZ2dsZSBlc3BlY1x1MDBFRGZpY28gcGFyYSB1biBlbGVtZW50byBwb3Igc3UgSURcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b2dnbGVJZCAtIElEIFx1MDBGQW5pY28gZGVsIGVsZW1lbnRvIHRvZ2dsZVxuICovXG50b2dnbGVTZWNjaW9uQnlJZCh0b2dnbGVJZCkge1xuICAgIC8vIEJ1c2NhciBlbCBoZWFkZXIgeSBlbCBjb250ZW5pZG8gY29ycmVzcG9uZGllbnRlXG4gICAgY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdG9nZ2xlLWlkPVwiJHt0b2dnbGVJZH1cIl1gKTtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGNvbnRlbnQtJHt0b2dnbGVJZH1gKTtcbiAgICBcbiAgICBpZiAoIWhlYWRlciB8fCAhY29udGVudCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZUljb24gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1pY29uJyk7XG4gICAgY29uc3QgaXNWaXNpYmxlID0gY29udGVudC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRvZ2dsZUljb24udGV4dENvbnRlbnQgPSAnXHUyNUJBJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0b2dnbGVJY29uLnRleHRDb250ZW50ID0gJ1x1MjVCQyc7XG4gICAgfVxufVxuXG5cblxuLyoqXG4gKiBSZW5kZXJpemEgdW5hIGxpc3RhIGRlIHByb3llY3Rvc1xuICogQHBhcmFtIHtBcnJheX0gcHJveWVjdG9zIC0gQXJyYXkgZGUgcHJveWVjdG9zXG4gKiBAcGFyYW0ge09iamVjdH0gZHYgLSBPYmpldG8gZGF0YXZpZXdcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBDb25maWd1cmFjaVx1MDBGM25cbiAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH0gLSBFbGVtZW50byBET00gY29uIGxhIGxpc3RhIGRlIHByb3llY3Rvc1xuICovXG5yZW5kZXJpemFyTGlzdGFQcm95ZWN0b3MocHJveWVjdG9zLCBkdiwgY29uZmlnKSB7XG4gICAgY29uc3QgbGlzdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidWxcIik7XG4gICAgbGlzdGEuY2xhc3NOYW1lID0gXCJwcm95ZWN0b3MtbGlzdGFcIjtcbiAgICBcbiAgICAvLyBPcmRlbmFyIHByb3llY3RvczogcHJpbWVybyBwb3Igbml2ZWwgKG5pdmVsUCksIGx1ZWdvIHBvciBmZWNoYSAobVx1MDBFMXMgcmVjaWVudGUgcHJpbWVybylcbiAgICBjb25zdCBvcmRlbmFkb3MgPSBbLi4ucHJveWVjdG9zXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IG5pdmVsQSA9IGEubml2ZWxQIHx8IDA7XG4gICAgICAgIGNvbnN0IG5pdmVsQiA9IGIubml2ZWxQIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBpZiAobml2ZWxBICE9PSBuaXZlbEIpIHtcbiAgICAgICAgICAgIHJldHVybiBuaXZlbEEgLSBuaXZlbEI7IC8vIEFzY2VuZGVudGUgcG9yIG5pdmVsXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGxvcyBuaXZlbGVzIHNvbiBpZ3VhbGVzLCBvcmRlbmFyIHBvciBmZWNoYSAoZGVzY2VuZGVudGUpXG4gICAgICAgIGNvbnN0IGZlY2hhQSA9IGEuZmVjaGEgPyBuZXcgRGF0ZShhLmZlY2hhKSA6IG5ldyBEYXRlKDApO1xuICAgICAgICBjb25zdCBmZWNoYUIgPSBiLmZlY2hhID8gbmV3IERhdGUoYi5mZWNoYSkgOiBuZXcgRGF0ZSgwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmZWNoYUIgLSBmZWNoYUE7XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ29uc3RydWlyIHVuIG1hcGEgcGFyYSByZWxhY2lvbmFyIHByb3llY3RvcyBwYWRyZXMgZSBoaWpvc1xuICAgIGNvbnN0IHByb3llY3Rvc01hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBub2Rvc1JhaXogPSBbXTtcbiAgICBcbiAgICAvLyBQcmltZXJvIG1hcGVhciB0b2RvcyBsb3MgcHJveWVjdG9zXG4gICAgZm9yIChjb25zdCBwcm95ZWN0byBvZiBvcmRlbmFkb3MpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHByb3llY3RvLmZpbGUucGF0aDtcbiAgICAgICAgXG4gICAgICAgIHByb3llY3Rvc01hcC5zZXQocGF0aCwge1xuICAgICAgICAgICAgcHJveWVjdG8sXG4gICAgICAgICAgICBoaWpvczogW11cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFNlZ3VuZG8gcGFzbzogZXN0YWJsZWNlciByZWxhY2lvbmVzIHBhZHJlLWhpam9cbiAgICBmb3IgKGNvbnN0IHByb3llY3RvIG9mIG9yZGVuYWRvcykge1xuICAgICAgICBjb25zdCBwYXRoID0gcHJveWVjdG8uZmlsZS5wYXRoO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgdGllbmUgcHJveWVjdG9HVEQvcHJveWVjdG9RIGNvbW8gcGFkcmVcbiAgICAgICAgY29uc3QgcGFkcmVzQ2FtcG8gPSBjb25maWcudGlwb1Byb3llY3RvID09PSBcIlBHVERcIiA/IFwicHJveWVjdG9HVERcIiA6IFwicHJveWVjdG9RXCI7XG4gICAgICAgIFxuICAgICAgICBpZiAocHJveWVjdG9bcGFkcmVzQ2FtcG9dKSB7XG4gICAgICAgICAgICBjb25zdCBwYWRyZXMgPSBBcnJheS5pc0FycmF5KHByb3llY3RvW3BhZHJlc0NhbXBvXSkgPyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b1twYWRyZXNDYW1wb10gOiBbcHJveWVjdG9bcGFkcmVzQ2FtcG9dXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHRpZW5lUmVsYWNpb24gPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChjb25zdCBwYWRyZSBvZiBwYWRyZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFkcmVQYXRoO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcGFkcmUgPT09ICdvYmplY3QnICYmIHBhZHJlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkcmVQYXRoID0gcGFkcmUucGF0aDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYWRyZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lraU1hdGNoID0gcGFkcmUubWF0Y2goL1xcW1xcWyguKj8pKD86XFx8KC4qPykpP1xcXVxcXS8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAod2lraU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRyZVBhdGggPSB3aWtpTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCdXNjYXIgcHJveWVjdG8gcG9yIG5vbWJyZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9FbmNvbnRyYWRvID0gb3JkZW5hZG9zLmZpbmQocCA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnRpdHVsbyA9PT0gcGFkcmUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHAuYWxpYXNlcyAmJiBwLmFsaWFzZXMuaW5jbHVkZXMocGFkcmUpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZmlsZS5uYW1lID09PSBwYWRyZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByb3llY3RvRW5jb250cmFkbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZHJlUGF0aCA9IHByb3llY3RvRW5jb250cmFkby5maWxlLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZHJlUGF0aCA9IHBhZHJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChwYWRyZVBhdGggJiYgcHJveWVjdG9zTWFwLmhhcyhwYWRyZVBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3llY3Rvc01hcC5nZXQocGFkcmVQYXRoKS5oaWpvcy5wdXNoKHByb3llY3Rvc01hcC5nZXQocGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICB0aWVuZVJlbGFjaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGllbmVSZWxhY2lvbikge1xuICAgICAgICAgICAgICAgIG5vZG9zUmFpei5wdXNoKHByb3llY3Rvc01hcC5nZXQocGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kb3NSYWl6LnB1c2gocHJveWVjdG9zTWFwLmdldChwYXRoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gUmVuZGVyaXphciBwcm95ZWN0b3MgamVyXHUwMEUxcnF1aWNhbWVudGVcbiAgICBmb3IgKGNvbnN0IG5vZG9SYWl6IG9mIG5vZG9zUmFpeikge1xuICAgICAgICB0aGlzLnJlbmRlcml6YXJQcm95ZWN0b1JlY3Vyc2l2byhub2RvUmFpeiwgbGlzdGEsIDAsIGR2LCBjb25maWcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBubyBoYXkgcHJveWVjdG9zIGRlc3B1XHUwMEU5cyBkZSBmaWx0cmFyXG4gICAgaWYgKGxpc3RhLmNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBtZW5zYWplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICBtZW5zYWplLmNsYXNzTmFtZSA9IFwicHJveWVjdG9zLWxpc3RhLWVtcHR5XCI7XG4gICAgICAgIG1lbnNhamUudGV4dENvbnRlbnQgPSBcIk5vIGhheSBwcm95ZWN0b3MgcXVlIGN1bXBsYW4gY29uIGxvcyBjcml0ZXJpb3MgZGUgZmlsdHJvXCI7XG4gICAgICAgIGxpc3RhLmFwcGVuZENoaWxkKG1lbnNhamUpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGlzdGE7XG59XG5cbi8qKlxuICogUmVuZGVyaXphIHVuIHByb3llY3RvIHkgc3VzIHN1YnByb3llY3RvcyBkZSBmb3JtYSByZWN1cnNpdmFcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RvIC0gTm9kbyBkZWwgcHJveWVjdG8gYWN0dWFsXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBsaXN0YSAtIEVsZW1lbnRvIGxpc3RhIGRvbmRlIGFncmVnYXIgZWwgcHJveWVjdG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBuaXZlbCAtIE5pdmVsIGRlIGluZGVudGFjaVx1MDBGM25cbiAqIEBwYXJhbSB7T2JqZWN0fSBkdiAtIE9iamV0byBkYXRhdmlld1xuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIENvbmZpZ3VyYWNpXHUwMEYzblxuICovXG5yZW5kZXJpemFyUHJveWVjdG9SZWN1cnNpdm8obm9kbywgbGlzdGEsIG5pdmVsLCBkdiwgY29uZmlnKSB7XG4gICAgY29uc3QgeyBwcm95ZWN0bywgaGlqb3MgfSA9IG5vZG87XG4gICAgXG4gICAgLy8gRmlsdHJhciBzaSBzZSBkZWJlIG1vc3RyYXIgc29sbyBjb24gdGFyZWFzIHBlbmRpZW50ZXNcbiAgICBpZiAoY29uZmlnLnNvbG9Nb3N0cmFyQ29uUGVuZGllbnRlcykge1xuICAgICAgICBjb25zdCB0aWVuZVRhcmVhc1BlbmRpZW50ZXMgPSAoXG4gICAgICAgICAgICBwcm95ZWN0by5maWxlLnRhc2tzICYmIFxuICAgICAgICAgICAgcHJveWVjdG8uZmlsZS50YXNrcy5maWx0ZXIodCA9PiAhdC5jb21wbGV0ZWQpLmxlbmd0aCA+IDBcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbXByb2JhciBzaSBhbGd1bm8gZGUgc3VzIGhpam9zIHRpZW5lIHRhcmVhcyBwZW5kaWVudGVzXG4gICAgICAgIGNvbnN0IGhpam9zQ29uVGFyZWFzID0gaGlqb3Muc29tZShoaWpvID0+IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciB0YXJlYXMgZW4gZXN0ZSBoaWpvXG4gICAgICAgICAgICBjb25zdCBoaWpvUGVuZGllbnRlcyA9IGhpam8ucHJveWVjdG8uZmlsZS50YXNrcyAmJiBcbiAgICAgICAgICAgICAgICBoaWpvLnByb3llY3RvLmZpbGUudGFza3MuZmlsdGVyKHQgPT4gIXQuY29tcGxldGVkKS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgcmV0dXJuIGhpam9QZW5kaWVudGVzO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGllbmVUYXJlYXNQZW5kaWVudGVzICYmICFoaWpvc0NvblRhcmVhcyAmJiBoaWpvcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gTm8gbW9zdHJhciBlc3RlIHByb3llY3RvIG5pIHN1cyBoaWpvc1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIGl0ZW0gZGUgbGlzdGEgcGFyYSBlc3RlIHByb3llY3RvXG4gICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICBpdGVtLmNsYXNzTmFtZSA9IGBwcm95ZWN0b3MtaXRlbSBuaXZlbC0ke25pdmVsfWA7XG4gICAgXG4gICAgLy8gQWdyZWdhciBpbmRlbnRhY2lcdTAwRjNuIHZpc3VhbFxuICAgIGNvbnN0IGluZGVudGFjaW9uID0gbml2ZWwgPiAwID8gJ1x1MjE5MicucmVwZWF0KG5pdmVsKSArICcgJyA6ICcnO1xuICAgIFxuICAgIC8vIERldGVybWluYXIgZWwgdGV4dG8gYSBtb3N0cmFyIChhbGlhcyBvIG5vbWJyZSBkZWwgYXJjaGl2bylcbiAgICBjb25zdCB0ZXh0b01vc3RyYXIgPSBwcm95ZWN0by50aXR1bG8gfHwgXG4gICAgICAgICAgICAgICAgICAgICAgIChwcm95ZWN0by5hbGlhc2VzICYmIHByb3llY3RvLmFsaWFzZXMubGVuZ3RoID4gMCA/IHByb3llY3RvLmFsaWFzZXNbMF0gOiBudWxsKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgcHJveWVjdG8uZmlsZS5uYW1lO1xuICAgIFxuICAgIC8vIENvbnN0cnVpciBlbCBjb250ZW5pZG8gZGVsIGl0ZW1cbiAgICBjb25zdCBjb250ZW5pZG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnRlbmlkby5jbGFzc05hbWUgPSBcInByb3llY3RvLWNvbnRlbmlkb1wiO1xuICAgIFxuICAgIC8vIEFncmVnYXIgZXN0YWRvIGNvbW8gZW1vamlcbiAgICBpZiAocHJveWVjdG8uZXN0YWRvKSB7XG4gICAgICAgIGNvbnN0IGVzdGFkb1NwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgZXN0YWRvU3Bhbi5jbGFzc05hbWUgPSBcInByb3llY3RvLWVzdGFkb1wiO1xuICAgICAgICBlc3RhZG9TcGFuLnRleHRDb250ZW50ID0gcHJveWVjdG8uZXN0YWRvICsgXCIgXCI7XG4gICAgICAgIGNvbnRlbmlkby5hcHBlbmRDaGlsZChlc3RhZG9TcGFuKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWdyZWdhciBpbmRlbnRhY2lcdTAwRjNuIGNvbW8gdGV4dG9cbiAgICBpZiAoaW5kZW50YWNpb24pIHtcbiAgICAgICAgY29uc3QgaW5kZW50U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBpbmRlbnRTcGFuLmNsYXNzTmFtZSA9IFwicHJveWVjdG8taW5kZW50XCI7XG4gICAgICAgIGluZGVudFNwYW4udGV4dENvbnRlbnQgPSBpbmRlbnRhY2lvbjtcbiAgICAgICAgY29udGVuaWRvLmFwcGVuZENoaWxkKGluZGVudFNwYW4pO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhciBlbmxhY2UgYWwgcHJveWVjdG9cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBlbmxhY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgZW5sYWNlLmNsYXNzTmFtZSA9IFwicHJveWVjdG8tbGlua1wiO1xuICAgICAgICBlbmxhY2UudGV4dENvbnRlbnQgPSB0ZXh0b01vc3RyYXI7XG4gICAgICAgIGVubGFjZS5ocmVmID0gcHJveWVjdG8uZmlsZS5wYXRoO1xuICAgICAgICBlbmxhY2Uuc2V0QXR0cmlidXRlKFwiZGF0YS1ocmVmXCIsIHByb3llY3RvLmZpbGUucGF0aCk7XG4gICAgICAgIGVubGFjZS50YXJnZXQgPSBcIl9ibGFua1wiOyAvLyBBYnJpciBlbiBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgXG4gICAgICAgIC8vIEhhY2VyIGNsaWNhYmxlIGVsIGVubGFjZVxuICAgICAgICBlbmxhY2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHByb3llY3RvLmZpbGUucGF0aCwgXCJcIiwgdHJ1ZSk7IC8vIEVsIHRydWUgaGFjZSBxdWUgc2UgYWJyYSBlbiBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb250ZW5pZG8uYXBwZW5kQ2hpbGQoZW5sYWNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnN0IHRleHRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRleHRvLnRleHRDb250ZW50ID0gdGV4dG9Nb3N0cmFyO1xuICAgICAgICBjb250ZW5pZG8uYXBwZW5kQ2hpbGQodGV4dG8pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZ3JlZ2FyIGluZm8gYWRpY2lvbmFsIGNvbW8gdGFyZWFzIHBlbmRpZW50ZXNcbiAgICBpZiAocHJveWVjdG8uZmlsZS50YXNrcykge1xuICAgICAgICBjb25zdCB0YXJlYXNQZW5kaWVudGVzID0gcHJveWVjdG8uZmlsZS50YXNrcy5maWx0ZXIodCA9PiAhdC5jb21wbGV0ZWQpLmxlbmd0aDtcbiAgICAgICAgaWYgKHRhcmVhc1BlbmRpZW50ZXMgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXNTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICB0YXJlYXNTcGFuLmNsYXNzTmFtZSA9IFwicHJveWVjdG8tcGVuZGllbnRlc1wiO1xuICAgICAgICAgICAgdGFyZWFzU3Bhbi50ZXh0Q29udGVudCA9IGAgKCR7dGFyZWFzUGVuZGllbnRlc30gcGVuZGllbnRlcylgO1xuICAgICAgICAgICAgY29udGVuaWRvLmFwcGVuZENoaWxkKHRhcmVhc1NwYW4pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFncmVnYXIgbml2ZWwgc2kgZXMgPiAwXG4gICAgaWYgKHByb3llY3RvLm5pdmVsUCAmJiBwcm95ZWN0by5uaXZlbFAgPiAwKSB7XG4gICAgICAgIGNvbnN0IG5pdmVsU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBuaXZlbFNwYW4uY2xhc3NOYW1lID0gXCJwcm95ZWN0by1uaXZlbFwiO1xuICAgICAgICBuaXZlbFNwYW4udGV4dENvbnRlbnQgPSBgIFtOaXZlbCAke3Byb3llY3RvLm5pdmVsUH1dYDtcbiAgICAgICAgY29udGVuaWRvLmFwcGVuZENoaWxkKG5pdmVsU3Bhbik7XG4gICAgfVxuICAgIFxuICAgIGl0ZW0uYXBwZW5kQ2hpbGQoY29udGVuaWRvKTtcbiAgICBcbiAgICAvLyBBZ3JlZ2FyIGEgbGEgbGlzdGFcbiAgICBsaXN0YS5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICBcbiAgICAvLyBQcm9jZXNhciBoaWpvcyByZWN1cnNpdmFtZW50ZSBzaSB0aWVuZVxuICAgIGlmIChoaWpvcyAmJiBoaWpvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1Ymxpc3RhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInVsXCIpO1xuICAgICAgICBzdWJsaXN0YS5jbGFzc05hbWUgPSBcInByb3llY3Rvcy1zdWJsaXN0YVwiO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzYXIgY2FkYSBoaWpvXG4gICAgICAgIGZvciAoY29uc3QgaGlqbyBvZiBoaWpvcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJpemFyUHJveWVjdG9SZWN1cnNpdm8oaGlqbywgc3VibGlzdGEsIG5pdmVsICsgMSwgZHYsIGNvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNvbG8gYWdyZWdhciBsYSBzdWJsaXN0YSBzaSB0aWVuZSBoaWpvcyBkZXNwdVx1MDBFOXMgZGVsIGZpbHRyYWRvXG4gICAgICAgIGlmIChzdWJsaXN0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKHN1Ymxpc3RhKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBbHRlcm5hIGVudHJlIG1vc3RyYXIgeSBvY3VsdGFyIHVuYSBzZWNjaVx1MDBGM25cbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGhlYWRlciAtIEVsZW1lbnRvIGRlIGVuY2FiZXphZG8gY29uIGVsIHRvZ2dsZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGVudCAtIEVsZW1lbnRvIGRlIGNvbnRlbmlkbyBhIG1vc3RyYXIvb2N1bHRhclxuICovXG50b2dnbGVTZWNjaW9uKGhlYWRlciwgY29udGVudCkge1xuICAgIGNvbnN0IHRvZ2dsZUljb24gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1pY29uJyk7XG4gICAgY29uc3QgaXNWaXNpYmxlID0gY29udGVudC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgXG4gICAgaWYgKGlzVmlzaWJsZSkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRvZ2dsZUljb24udGV4dENvbnRlbnQgPSAnXHUyNUJBJztcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0b2dnbGVJY29uLnRleHRDb250ZW50ID0gJ1x1MjVCQyc7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4cGFuZGUgdG9kYXMgbGFzIHNlY2Npb25lcyBlbiBlbCBcdTAwRTFyYm9sXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBDb250ZW5lZG9yIHByaW5jaXBhbFxuICovXG5leHBhbmRpclRvZG8oY29udGFpbmVyKSB7XG4gICAgLy8gT2J0ZW5lciB0b2RvcyBsb3MgZWxlbWVudG9zIHRvZ2dsYWJsZXNcbiAgICBjb25zdCBoZWFkZXJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRvZ2dsZS1pZF0nKTtcbiAgICBcbiAgICAvLyBSZWNvcnJlciBjYWRhIGhlYWRlciB5IGV4cGFuZGlyIHN1IGNvbnRlbmlkb1xuICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICBjb25zdCB0b2dnbGVJZCA9IGhlYWRlci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjb250ZW50LSR7dG9nZ2xlSWR9YCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUljb24gPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnRvZ2dsZS1pY29uJyk7XG4gICAgICAgICAgICBpZiAodG9nZ2xlSWNvbikge1xuICAgICAgICAgICAgICAgIHRvZ2dsZUljb24udGV4dENvbnRlbnQgPSAnXHUyNUJDJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4vKipcbiAqIENvbGFwc2EgdG9kYXMgbGFzIHNlY2Npb25lcyBlbiBlbCBcdTAwRTFyYm9sXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjb250YWluZXIgLSBDb250ZW5lZG9yIHByaW5jaXBhbFxuICovXG5jb2xhcHNhclRvZG8oY29udGFpbmVyKSB7XG4gICAgLy8gT2J0ZW5lciB0b2RvcyBsb3MgZWxlbWVudG9zIHRvZ2dsYWJsZXNcbiAgICBjb25zdCBoZWFkZXJzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRvZ2dsZS1pZF0nKTtcbiAgICBcbiAgICAvLyBSZWNvcnJlciBjYWRhIGhlYWRlciB5IGNvbGFwc2FyIHN1IGNvbnRlbmlkb1xuICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICBjb25zdCB0b2dnbGVJZCA9IGhlYWRlci5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZ2dsZS1pZFwiKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBjb250ZW50LSR7dG9nZ2xlSWR9YCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgY29uc3QgdG9nZ2xlSWNvbiA9IGhlYWRlci5xdWVyeVNlbGVjdG9yKCcudG9nZ2xlLWljb24nKTtcbiAgICAgICAgICAgIGlmICh0b2dnbGVJY29uKSB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlSWNvbi50ZXh0Q29udGVudCA9ICdcdTI1QkEnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogQWdyZWdhIGxpc3RlbmVycyBwYXJhIGV4cGFuZGlyL2NvbGFwc2FyIHNlY2Npb25lc1xuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGFpbmVyIC0gQ29udGVuZWRvciBwcmluY2lwYWxcbiAqL1xuYWdyZWdhckxpc3RlbmVyc1Byb3llY3Rvcyhjb250YWluZXIpIHtcbiAgICAvLyBBZ3JlZ2FyIGxpc3RlbmVycyBwYXJhIGxvcyBoZWFkZXJzIGRlIFx1MDBDMXJlYXMgZGUgVmlkYVxuICAgIGNvbnN0IGhlYWRlcnNBViA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJveWVjdG9zLWFyZWEtaGVhZGVyJyk7XG4gICAgaGVhZGVyc0FWLmZvckVhY2goaGVhZGVyID0+IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGhlYWRlci5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIGlmIChjb250ZW50ICYmIGNvbnRlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm95ZWN0b3MtYXJlYS1jb250ZW50JykpIHtcbiAgICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSAhPT0gJ0EnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlU2VjY2lvbihoZWFkZXIsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQWdyZWdhciBsaXN0ZW5lcnMgcGFyYSBsb3MgaGVhZGVycyBkZSBcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1xuICAgIGNvbnN0IGhlYWRlcnNBSSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJveWVjdG9zLWFpLWhlYWRlcicpO1xuICAgIGhlYWRlcnNBSS5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBoZWFkZXIubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICBpZiAoY29udGVudCAmJiBjb250ZW50LmNsYXNzTGlzdC5jb250YWlucygncHJveWVjdG9zLWFpLWNvbnRlbnQnKSkge1xuICAgICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b2dnbGVTZWNjaW9uKGhlYWRlciwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vKipcbiAqIERldGVybWluYSBxdVx1MDBFOSBwcm95ZWN0b3MgZGViZW4gbW9zdHJhcnNlIHRlbmllbmRvIGVuIGN1ZW50YSBsYSBlc3RydWN0dXJhIGplclx1MDBFMXJxdWljYVxuICogQHBhcmFtIHtBcnJheX0gcHJveWVjdG9zRmlsdHJhZG9zIC0gQXJyYXkgZGUgcHJveWVjdG9zIHlhIGZpbHRyYWRvc1xuICogQHBhcmFtIHtBcnJheX0gdG9kb3NMb3NQcm95ZWN0b3MgLSBBcnJheSBjb24gdG9kb3MgbG9zIHByb3llY3Rvc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyAtIENvbmZpZ3VyYWNpXHUwMEYzblxuICogQHJldHVybnMge0FycmF5fSAtIEFycmF5IGRlIHByb3llY3RvcyBhIG1vc3RyYXJcbiAqL1xuZGV0ZXJtaW5hclByb3llY3Rvc0FNb3N0cmFyKHByb3llY3Rvc0ZpbHRyYWRvcywgdG9kb3NMb3NQcm95ZWN0b3MsIGNvbmZpZykge1xuICAgIC8vIFNpIG5vIGhheSBmaWx0cm8gZXNwZWNcdTAwRURmaWNvLCBtb3N0cmFyIHRvZG9zXG4gICAgaWYgKCFjb25maWcuZXN0YWRvRmlsdHJvIHx8IGNvbmZpZy5lc3RhZG9GaWx0cm8gPT09IFwiXCIpIHtcbiAgICAgICAgcmV0dXJuIHRvZG9zTG9zUHJveWVjdG9zO1xuICAgIH1cbiAgICBcbiAgICAvLyBDb25qdW50byBwYXJhIGFsbWFjZW5hciBwYXRocyBkZSBwcm95ZWN0b3MgYSBtb3N0cmFyXG4gICAgY29uc3QgcGF0aHNBTW9zdHJhciA9IG5ldyBTZXQoKTtcbiAgICBcbiAgICAvLyBQcmltZXJvIGFncmVnYW1vcyBsb3MgcHJveWVjdG9zIGZpbHRyYWRvc1xuICAgIHByb3llY3Rvc0ZpbHRyYWRvcy5mb3JFYWNoKHAgPT4gcGF0aHNBTW9zdHJhci5hZGQocC5maWxlLnBhdGgpKTtcbiAgICBcbiAgICAvLyBMdWVnbyBpZGVudGlmaWNhbW9zIHByb3llY3RvcyBwYWRyZXMgbmVjZXNhcmlvcyBwYXJhIG1hbnRlbmVyIGxhIGVzdHJ1Y3R1cmFcbiAgICBsZXQgY2FtYmlvc1JlYWxpemFkb3MgPSB0cnVlO1xuICAgIFxuICAgIC8vIFBhc2FkYSAxOiBJZGVudGlmaWNhciBwYWRyZXMgZGlyZWN0b3MgZGUgbG9zIHByb3llY3RvcyBmaWx0cmFkb3NcbiAgICB3aGlsZSAoY2FtYmlvc1JlYWxpemFkb3MpIHtcbiAgICAgICAgY2FtYmlvc1JlYWxpemFkb3MgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcHJveWVjdG8gb2YgdG9kb3NMb3NQcm95ZWN0b3MpIHtcbiAgICAgICAgICAgIC8vIFNpIGVzdGUgcHJveWVjdG8geWEgZXN0XHUwMEUxIGVuIGxhIGxpc3RhLCBwYXNhbW9zIGFsIHNpZ3VpZW50ZVxuICAgICAgICAgICAgaWYgKHBhdGhzQU1vc3RyYXIuaGFzKHByb3llY3RvLmZpbGUucGF0aCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYW1wbyBkZSBwcm95ZWN0b3MgcGFkcmVzIHNlZ1x1MDBGQW4gZWwgdGlwb1xuICAgICAgICAgICAgY29uc3QgcGFkcmVzQ2FtcG8gPSBjb25maWcudGlwb1Byb3llY3RvID09PSBcIlBHVERcIiA/IFwicHJveWVjdG9HVERcIiA6IFwicHJveWVjdG9RXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJldmlzYXIgc2kgYWxndW5vIGRlIHN1cyBoaWpvcyBlc3RcdTAwRTEgZW4gbGEgbGlzdGFcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3Ryb1Byb3llY3RvIG9mIHRvZG9zTG9zUHJveWVjdG9zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXRoc0FNb3N0cmFyLmhhcyhvdHJvUHJveWVjdG8uZmlsZS5wYXRoKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVzdGUgcHJveWVjdG8gZXMgcGFkcmUgZGVsIG90cm9cbiAgICAgICAgICAgICAgICBjb25zdCBwYWRyZXMgPSBvdHJvUHJveWVjdG9bcGFkcmVzQ2FtcG9dO1xuICAgICAgICAgICAgICAgIGlmICghcGFkcmVzKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBlc1JlZmVyZW5jaWFkb0NvbW8gPSBBcnJheS5pc0FycmF5KHBhZHJlcykgPyBcbiAgICAgICAgICAgICAgICAgICAgcGFkcmVzLnNvbWUocCA9PiB0aGlzLnJlZmVyZW5jaWFBbE1pc21vUHJveWVjdG8ocCwgcHJveWVjdG8pKSA6IFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZmVyZW5jaWFBbE1pc21vUHJveWVjdG8ocGFkcmVzLCBwcm95ZWN0byk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGVzUmVmZXJlbmNpYWRvQ29tbykge1xuICAgICAgICAgICAgICAgICAgICBwYXRoc0FNb3N0cmFyLmFkZChwcm95ZWN0by5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjYW1iaW9zUmVhbGl6YWRvcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBQYXNhZGEgMjogSWRlbnRpZmljYXIgaGlqb3MgZGlyZWN0b3MgZGUgbG9zIHByb3llY3RvcyBmaWx0cmFkb3NcbiAgICBmb3IgKGNvbnN0IHByb3llY3RvIG9mIHByb3llY3Rvc0ZpbHRyYWRvcykge1xuICAgICAgICAvLyBDYW1wbyBkZSBwcm95ZWN0b3MgcGFkcmVzIHNlZ1x1MDBGQW4gZWwgdGlwb1xuICAgICAgICBjb25zdCBwYWRyZXNDYW1wbyA9IGNvbmZpZy50aXBvUHJveWVjdG8gPT09IFwiUEdURFwiID8gXCJwcm95ZWN0b0dURFwiIDogXCJwcm95ZWN0b1FcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1c2NhciBwcm95ZWN0b3MgcXVlIHRlbmdhbiBhIGVzdGUgY29tbyBwYWRyZVxuICAgICAgICBmb3IgKGNvbnN0IG90cm9Qcm95ZWN0byBvZiB0b2Rvc0xvc1Byb3llY3Rvcykge1xuICAgICAgICAgICAgaWYgKHBhdGhzQU1vc3RyYXIuaGFzKG90cm9Qcm95ZWN0by5maWxlLnBhdGgpKSBjb250aW51ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIHByb3llY3RvIGVzIHBhZHJlIGRlIG90cm9Qcm95ZWN0b1xuICAgICAgICAgICAgY29uc3QgcGFkcmVzID0gb3Ryb1Byb3llY3RvW3BhZHJlc0NhbXBvXTtcbiAgICAgICAgICAgIGlmICghcGFkcmVzKSBjb250aW51ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZXNSZWZlcmVuY2lhZG9Db21vID0gQXJyYXkuaXNBcnJheShwYWRyZXMpID8gXG4gICAgICAgICAgICAgICAgcGFkcmVzLnNvbWUocCA9PiB0aGlzLnJlZmVyZW5jaWFBbE1pc21vUHJveWVjdG8ocCwgcHJveWVjdG8pKSA6IFxuICAgICAgICAgICAgICAgIHRoaXMucmVmZXJlbmNpYUFsTWlzbW9Qcm95ZWN0byhwYWRyZXMsIHByb3llY3RvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGVzUmVmZXJlbmNpYWRvQ29tbykge1xuICAgICAgICAgICAgICAgIHBhdGhzQU1vc3RyYXIuYWRkKG90cm9Qcm95ZWN0by5maWxlLnBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFJldG9ybmFyIGxvcyBwcm95ZWN0b3MgcXVlIGRlYmVuIG1vc3RyYXJzZVxuICAgIHJldHVybiB0b2Rvc0xvc1Byb3llY3Rvcy5maWx0ZXIocCA9PiBwYXRoc0FNb3N0cmFyLmhhcyhwLmZpbGUucGF0aCkpO1xufVxuXG5cblxuLyoqXG4gKiBDb21wcnVlYmEgc2kgdW5hIHJlZmVyZW5jaWEgKG9iamV0byBvIHN0cmluZykgYXB1bnRhIGFsIG1pc21vIHByb3llY3RvXG4gKiBAcGFyYW0geyp9IHJlZmVyZW5jaWEgLSBQdWVkZSBzZXIgb2JqZXRvIGNvbiBwYXRoLCBzdHJpbmcgY29uIHdpa2lsaW5rLCBvIG5vbWJyZSBkaXJlY3RvXG4gKiBAcGFyYW0ge09iamVjdH0gcHJveWVjdG8gLSBQcm95ZWN0byBhIGNvbXBhcmFyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSB0cnVlIHNpIGxhIHJlZmVyZW5jaWEgYXB1bnRhIGFsIHByb3llY3RvXG4gKi9cbnJlZmVyZW5jaWFBbE1pc21vUHJveWVjdG8ocmVmZXJlbmNpYSwgcHJveWVjdG8pIHtcbiAgICBpZiAoIXJlZmVyZW5jaWEgfHwgIXByb3llY3RvKSByZXR1cm4gZmFsc2U7XG4gICAgXG4gICAgLy8gU2kgZXMgdW4gb2JqZXRvIGNvbiBwYXRoXG4gICAgaWYgKHR5cGVvZiByZWZlcmVuY2lhID09PSAnb2JqZWN0JyAmJiByZWZlcmVuY2lhLnBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHJlZmVyZW5jaWEucGF0aCA9PT0gcHJveWVjdG8uZmlsZS5wYXRoO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBlcyB1biBzdHJpbmcsIHBvZHJcdTAwRURhIHNlciB1biB3aWtpbGluayBvIHVuIG5vbWJyZSBkaXJlY3RvXG4gICAgaWYgKHR5cGVvZiByZWZlcmVuY2lhID09PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZXMgdW4gd2lraWxpbmsgW1twYXRofGFsaWFzXV1cbiAgICAgICAgY29uc3Qgd2lraU1hdGNoID0gcmVmZXJlbmNpYS5tYXRjaCgvXFxbXFxbKC4qPykoPzpcXHwoLio/KSk/XFxdXFxdLyk7XG4gICAgICAgIGlmICh3aWtpTWF0Y2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSB3aWtpTWF0Y2hbMV07XG4gICAgICAgICAgICByZXR1cm4gcGF0aCA9PT0gcHJveWVjdG8uZmlsZS5wYXRoIHx8IFxuICAgICAgICAgICAgICAgICAgIHBhdGggPT09IHByb3llY3RvLmZpbGUuYmFzZW5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgcGF0aCA9PT0gcHJveWVjdG8udGl0dWxvO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb21wYXJhciBjb24gbm9tYnJlLCB0XHUwMEVEdHVsbyBvIGFsaWFzXG4gICAgICAgIHJldHVybiByZWZlcmVuY2lhID09PSBwcm95ZWN0by5maWxlLnBhdGggfHxcbiAgICAgICAgICAgICAgIHJlZmVyZW5jaWEgPT09IHByb3llY3RvLmZpbGUuYmFzZW5hbWUgfHxcbiAgICAgICAgICAgICAgIHJlZmVyZW5jaWEgPT09IHByb3llY3RvLnRpdHVsbyB8fFxuICAgICAgICAgICAgICAgKHByb3llY3RvLmFsaWFzZXMgJiYgcHJveWVjdG8uYWxpYXNlcy5pbmNsdWRlcyhyZWZlcmVuY2lhKSk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBOYXZlZ2EgYSB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhIGVuIHVuYSBub3RhXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFJ1dGEgZGUgbGEgbm90YVxuICogQHBhcmFtIHtudW1iZXJ9IGxpbmVhIC0gTlx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYSBkZSBsYSB0YXJlYVxuICovXG5uYXZlZ2FyQVRhcmVhKHBhdGgsIGxpbmVhKSB7XG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwcm9wb3JjaW9uXHUwMEYzIHVuYSBydXRhIGRlIGFyY2hpdm8gdlx1MDBFMWxpZGFcIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gTmF2ZWdhciBhIGxhIG5vdGEgeSBwb3NpY2lvbmFyIGVuIGxhIGxcdTAwRURuZWEgZGUgbGEgdGFyZWFcbiAgICB0cnkge1xuICAgICAgICAvLyBPYnRlbmVyIGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgYXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWFyY2hpdm8pIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgTm8gc2UgZW5jb250clx1MDBGMyBlbCBhcmNoaXZvOiAke3BhdGh9YCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBwb2RlbW9zIHVzYXIgZVN0YXRlIHBhcmEgcG9zaWNpb25hcnNlIGVuIHVuYSBsXHUwMEVEbmVhIGVzcGVjXHUwMEVEZmljYVxuICAgICAgICBjb25zdCBjYW5Vc2VFU3RhdGUgPSB0eXBlb2YgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQgPT09ICdmdW5jdGlvbic7XG4gICAgICAgIFxuICAgICAgICBpZiAoY2FuVXNlRVN0YXRlKSB7XG4gICAgICAgICAgICAvLyBFc3RhIGVzIGxhIGZvcm1hIG1cdTAwRTFzIG1vZGVybmEgZGUgYWJyaXIgYXJjaGl2b3MgZW4gT2JzaWRpYW5cbiAgICAgICAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KHBhdGgsIFwiXCIsIHRydWUsIHsgZVN0YXRlOiB7IGxpbmU6IGxpbmVhIH0gfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBbHRlcm5hdGl2YTogYWJyaXIgZWwgYXJjaGl2byB5IGx1ZWdvIGludGVudGFyIGlyIGEgbGEgbFx1MDBFRG5lYVxuICAgICAgICAgICAgY29uc3QgbGVhZiA9IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICBsZWFmLm9wZW5GaWxlKGFyY2hpdm8pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEludGVudGFyIHBvc2ljaW9uYXIgZW4gbGEgbFx1MDBFRG5lYSBkZXNwdVx1MDBFOXMgZGUgcXVlIHNlIGFicmEgZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3ICYmIGxlYWYudmlldy5lZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGxlYWYudmlldy5lZGl0b3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogbGluZWEsIGNoOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KHsgZnJvbTogeyBsaW5lOiBsaW5lYSwgY2g6IDAgfSwgdG86IHsgbGluZTogbGluZWEsIGNoOiAwIH0gfSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBuYXZlZ2FyIGEgbGEgdGFyZWE6XCIsIGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmFsbGJhY2sgbVx1MDBFMXMgcm9idXN0byAtIG1vc3RyYXIgbWVuc2FqZSBhbCB1c3VhcmlvXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbnRlbnRhciBhYnJpciBlbCBhcmNoaXZvIHNpbiBwb3NpY2lvbmFyc2UgZW4gdW5hIGxcdTAwRURuZWEgZXNwZWNcdTAwRURmaWNhXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZvID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgICAgIGlmIChhcmNoaXZvKSB7XG4gICAgICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5nZXRMZWFmKGZhbHNlKS5vcGVuRmlsZShhcmNoaXZvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gZW5jb250cmFyIGVsIGFyY2hpdm86IFwiICsgcGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGVsIGZhbGxiYWNrIGRlIG5hdmVnYWNpXHUwMEYzbjpcIiwgZXJyKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBhYnJpciBlbCBhcmNoaXZvOiBcIiArIGVyci5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyAtLS0gTWVqb3JhIGRlIGxhIGJ1c3F1ZWRhIGRlIENvbnRleHRvcyBHVEQgcG9yIGJsb3F1ZSBkdmpzXG4vKipcbiAqIEdlbmVyYSB1bmEgdmlzdGEgZGUgdGFyZWFzIHBvciBjb250ZXh0byBjb24gbmF2ZWdhY2lcdTAwRjNuIGludGVyYWN0aXZhXG4gKiBAcGFyYW0gZHYgLSBPYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHJldHVybnMgRWxlbWVudG8gRE9NIGludGVyYWN0aXZvIGNvbiBsb3MgY29udGV4dG9zIHkgc3VzIHRhcmVhc1xuICovXG5hc3luYyBtb3N0cmFyQ29udGV4dG9zR1REKGR2KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQ3JlYXIgZWwgY29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY29udGV4dG9zLWd0ZC1jb250YWluZXJcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVzdGlsb3MgaW5saW5lIG5lY2VzYXJpb3NcbiAgICAgICAgY29uc3Qgc3R5bGVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgc3R5bGVFbC50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgLmhpZ2hsaWdodGVkLWxpbmUge1xuICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LXJnYiksIDAuMykgIWltcG9ydGFudDtcbiAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDFzIGVhc2Utb3V0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtbGluayB7XG4gICAgICAgICAgY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1saW5rOmhvdmVyIHtcbiAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgICBjb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxpbmVhLWluZm8ge1xuICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEVsIHJlc3RvIGRlIGVzdGlsb3MgbmVjZXNhcmlvcyBzZSBjYXJnYW4gZGVzZGUgZWwgYXJjaGl2byBDU1MgZ2xvYmFsICovXG4gICAgICAgIGA7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGNvbnRyb2xlcyBwYXJhIGV4cGFuZGlyL2NvbGFwc2FyL2FjdHVhbGl6YXJcbiAgICAgICAgY29uc3QgY29udHJvbHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250cm9sc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcImNvbnRleHRvcy1jb250cm9sZXNcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdG9uZXMgY29uIGVzdGlsb3MgZGlyZWN0b3NcbiAgICAgICAgY29uc3QgYnRuRXhwYW5kaXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICBidG5FeHBhbmRpci50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQ0MyIEV4cGFuZGlyIFRvZG9cIjtcbiAgICAgICAgYnRuRXhwYW5kaXIuY2xhc3NOYW1lID0gXCJjb250ZXh0b3MtYnRuIGV4cGFuZGlyXCI7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBidG5Db2xhcHNhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGJ0bkNvbGFwc2FyLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQzEgQ29sYXBzYXIgVG9kb1wiO1xuICAgICAgICBidG5Db2xhcHNhci5jbGFzc05hbWUgPSBcImNvbnRleHRvcy1idG4gY29sYXBzYXJcIjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ0blJlZnJlc2NhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGJ0blJlZnJlc2Nhci50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVERDA0IEFjdHVhbGl6YXJcIjtcbiAgICAgICAgYnRuUmVmcmVzY2FyLmNsYXNzTmFtZSA9IFwiY29udGV4dG9zLWJ0biByZWZyZXNjYXJcIjtcbiAgICAgICAgXG4gICAgICAgIGNvbnRyb2xzQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ0bkV4cGFuZGlyKTtcbiAgICAgICAgY29udHJvbHNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnRuQ29sYXBzYXIpO1xuICAgICAgICBjb250cm9sc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidG5SZWZyZXNjYXIpO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udHJvbHNDb250YWluZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIGxvcyBjb250ZXh0b3NcbiAgICAgICAgY29uc3QgY29udGV4dG9zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgY29udGV4dG9zQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwiY29udGV4dG9zLWNvbnRhaW5lclwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGV4dG9zQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vc3RyYXIgaW5pY2lhbG1lbnRlIHVuIGluZGljYWRvciBkZSBjYXJnYVxuICAgICAgICBjb25zdCBsb2FkaW5nSW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgbG9hZGluZ0luZGljYXRvci5jbGFzc05hbWUgPSBcImxvYWRpbmctaW5kaWNhdG9yXCI7XG4gICAgICAgIGNvbnN0IHNwaW5uZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzcGlubmVyLmNsYXNzTmFtZSA9IFwic3Bpbm5lclwiO1xuICAgICAgICBsb2FkaW5nSW5kaWNhdG9yLmFwcGVuZENoaWxkKHNwaW5uZXIpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbG9hZGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBsb2FkaW5nVGV4dC50ZXh0Q29udGVudCA9IFwiQ2FyZ2FuZG8gY29udGV4dG9zLi4uXCI7XG4gICAgICAgIGxvYWRpbmdJbmRpY2F0b3IuYXBwZW5kQ2hpbGQobG9hZGluZ1RleHQpO1xuICAgICAgICBcbiAgICAgICAgY29udGV4dG9zQ29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdJbmRpY2F0b3IpO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBkYXRvcyBkZSBjb250ZXh0b3MgYSB0cmF2XHUwMEU5cyBkZSBsYSBBUEkgZGUgdGFyZWFzXG4gICAgICAgIGNvbnN0IHsgY29udGV4dG9zQ29uVGFyZWFzLCB0b3RhbENvbnRleHRvcywgdG90YWxUYXJlYXMgfSA9IGF3YWl0IHRoaXMucGx1Z2luLnRhcmVhc0FQSS5nZXRUYXJlYXNDb250ZXh0b3MoKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0b3RhbENvbnRleHRvcyA9PT0gMCkge1xuICAgICAgICAgICAgY29udGV4dG9zQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBlbXB0eU1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIGVtcHR5TWVzc2FnZS5jbGFzc05hbWUgPSBcImVycm9yLW1lc3NhZ2VcIjtcbiAgICAgICAgICAgIGVtcHR5TWVzc2FnZS50ZXh0Q29udGVudCA9IFwiTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGNvbiBjb250ZXh0b3MgYXNpZ25hZG9zXCI7XG4gICAgICAgICAgICBjb250ZXh0b3NDb250YWluZXIuYXBwZW5kQ2hpbGQoZW1wdHlNZXNzYWdlKTtcbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBkZSBjYXJnYVxuICAgICAgICBjb250ZXh0b3NDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vc3RyYXIgZXN0YWRcdTAwRURzdGljYXNcbiAgICAgICAgY29uc3Qgc3RhdHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzdGF0c0Rpdi5jbGFzc05hbWUgPSBcImNvbnRleHRvcy1zdGF0c1wiO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdFRvdGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgIHN0YXRUb3RhbC50ZXh0Q29udGVudCA9IGBUb3RhbCBkZSBjb250ZXh0b3MgY29uIHRhcmVhczogJHt0b3RhbENvbnRleHRvc31gO1xuICAgICAgICBzdGF0c0Rpdi5hcHBlbmRDaGlsZChzdGF0VG90YWwpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdFRhcmVhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICBzdGF0VGFyZWFzLnRleHRDb250ZW50ID0gYFRvdGFsIGRlIHRhcmVhcyBlbmNvbnRyYWRhczogJHt0b3RhbFRhcmVhc31gO1xuICAgICAgICBzdGF0c0Rpdi5hcHBlbmRDaGlsZChzdGF0VGFyZWFzKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRleHRvc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0c0Rpdik7XG4gICAgICAgIFxuICAgICAgICAvLyBDb25zdHJ1aXIgXHUwMEUxcmJvbCBkZSBjb250ZXh0b3NcbiAgICAgICAgY29uc3QgYXJib2xDb250ZXh0b3MgPSB0aGlzLmNvbnN0cnVpckFyYm9sQ29udGV4dG9zKGNvbnRleHRvc0NvblRhcmVhcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZW5lcmFyIGVsIEhUTUwgZGUgbG9zIGNvbnRleHRvc1xuICAgICAgICB0aGlzLmdlbmVyYXJDb250ZXh0b3NIVE1MKGFyYm9sQ29udGV4dG9zLCBjb250ZXh0b3NDb25UYXJlYXMsIGNvbnRleHRvc0NvbnRhaW5lcik7XG4gICAgICAgIFxuICAgICAgICAvLyBDb25maWd1cmFyIGV2ZW50b3MgcGFyYSBsb3MgYm90b25lc1xuICAgICAgICBidG5FeHBhbmRpci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGV4dG8tZGV0YWlsc1wiKS5mb3JFYWNoKGRldGFpbHMgPT4ge1xuICAgICAgICAgICAgICAgIGRldGFpbHMuc2V0QXR0cmlidXRlKFwib3BlblwiLCBcInRydWVcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBidG5Db2xhcHNhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29udGV4dG8tZGV0YWlsc1wiKS5mb3JFYWNoKGRldGFpbHMgPT4ge1xuICAgICAgICAgICAgICAgIGRldGFpbHMucmVtb3ZlQXR0cmlidXRlKFwib3BlblwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGJ0blJlZnJlc2Nhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVlbXBsYXphciBlbCBjb250ZW5lZG9yIGFjdHVhbCBwb3IgdW5hIHZlcnNpXHUwMEYzbiBhY3R1YWxpemFkYVxuICAgICAgICAgICAgY29uc3QgbnVldm9Db250YWluZXIgPSBhd2FpdCB0aGlzLm1vc3RyYXJDb250ZXh0b3NHVEQoZHYpO1xuICAgICAgICAgICAgY29udGFpbmVyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG51ZXZvQ29udGFpbmVyLCBjb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyQ29udGV4dG9zR1REOlwiLCBlcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXZvbHZlciB1biBtZW5zYWplIGRlIGVycm9yXG4gICAgICAgIGNvbnN0IGVycm9yQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZXJyb3JDb250YWluZXIuY2xhc3NOYW1lID0gXCJlcnJvci1tZXNzYWdlXCI7XG4gICAgICAgIGVycm9yQ29udGFpbmVyLnRleHRDb250ZW50ID0gYEVycm9yIGFsIGNhcmdhciBjb250ZXh0b3M6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgICByZXR1cm4gZXJyb3JDb250YWluZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnN0cnV5ZSBsYSBlc3RydWN0dXJhIGRlIFx1MDBFMXJib2wgZGUgY29udGV4dG9zXG4gKiBAcGFyYW0gY29udGV4dG9zQ29uVGFyZWFzIE1hcGEgZGUgY29udGV4dG9zIGNvbiBzdXMgdGFyZWFzXG4gKiBAcmV0dXJucyBFc3RydWN0dXJhIGplclx1MDBFMXJxdWljYSBkZSBjb250ZXh0b3NcbiAqL1xuY29uc3RydWlyQXJib2xDb250ZXh0b3MoY29udGV4dG9zQ29uVGFyZWFzKSB7XG4gICAgY29uc3QgYXJib2wgPSBuZXcgTWFwKCk7XG5cbiAgICBBcnJheS5mcm9tKGNvbnRleHRvc0NvblRhcmVhcy5rZXlzKCkpLmZvckVhY2goY29udGV4dG8gPT4ge1xuICAgICAgICBjb25zdCBuaXZlbGVzID0gY29udGV4dG8uc3BsaXQoJyBcdTIxOTIgJyk7XG4gICAgICAgIGxldCBub2RvQWN0dWFsID0gYXJib2w7XG5cbiAgICAgICAgbml2ZWxlcy5mb3JFYWNoKChuaXZlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kb0FjdHVhbC5oYXMobml2ZWwpKSB7XG4gICAgICAgICAgICAgICAgbm9kb0FjdHVhbC5zZXQobml2ZWwsIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZWFzOiBpbmRleCA9PT0gbml2ZWxlcy5sZW5ndGggLSAxID8gY29udGV4dG9zQ29uVGFyZWFzLmdldChjb250ZXh0bykgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgc3ViY29udGV4dG9zOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIHJ1dGFDb21wbGV0YTogbml2ZWxlcy5zbGljZSgwLCBpbmRleCArIDEpLmpvaW4oJyBcdTIxOTIgJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZG9BY3R1YWwgPSBub2RvQWN0dWFsLmdldChuaXZlbCkuc3ViY29udGV4dG9zO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHJldHVybiBhcmJvbDtcbn1cblxuLyoqXG4gKiBHZW5lcmEgZWwgSFRNTCBkZSBsb3MgY29udGV4dG9zIHJlY3Vyc2l2YW1lbnRlXG4gKiBAcGFyYW0gYXJib2xDb250ZXh0b3MgRXN0cnVjdHVyYSBqZXJcdTAwRTFycXVpY2EgZGUgY29udGV4dG9zXG4gKiBAcGFyYW0gY29udGV4dG9zQ29uVGFyZWFzIE1hcGEgb3JpZ2luYWwgZGUgY29udGV4dG9zIGNvbiB0YXJlYXNcbiAqIEBwYXJhbSBjb250YWluZXIgRWxlbWVudG8gRE9NIGRvbmRlIGFcdTAwRjFhZGlyIGxvcyBjb250ZXh0b3NcbiAqL1xuZ2VuZXJhckNvbnRleHRvc0hUTUwoYXJib2xDb250ZXh0b3MsIGNvbnRleHRvc0NvblRhcmVhcywgY29udGFpbmVyKSB7XG4gICAgY29uc3QgcHJvY2VzYXJOb2RvID0gKG5vZG8sIG5pdmVsID0gMCwgcGFyZW50RWwpID0+IHtcbiAgICAgICAgLy8gT3JkZW5hciBjb250ZXh0b3MgcG9yIGNhbnRpZGFkIGRlIHRhcmVhc1xuICAgICAgICBjb25zdCBzb3J0ZWRLZXlzID0gQXJyYXkuZnJvbShub2RvLmtleXMoKSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzQSA9IG5vZG8uZ2V0KGEpLnRhcmVhcy5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXNCID0gbm9kby5nZXQoYikudGFyZWFzLmxlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiB0YXJlYXNCIC0gdGFyZWFzQTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ydGVkS2V5cy5mb3JFYWNoKGNvbnRleHRvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBub2RvLmdldChjb250ZXh0byk7XG4gICAgICAgICAgICBjb25zdCBjYW50aWRhZFRhcmVhcyA9IGluZm8udGFyZWFzLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IHRpZW5lU3ViY29udGV4dG9zID0gaW5mby5zdWJjb250ZXh0b3Muc2l6ZSA+IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNvbG8gY3JlYXIgZWxlbWVudG9zIHNpIGhheSB0YXJlYXMgbyBzdWJjb250ZXh0b3NcbiAgICAgICAgICAgIGlmIChjYW50aWRhZFRhcmVhcyA+IDAgfHwgdGllbmVTdWJjb250ZXh0b3MpIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhciBlbGVtZW50byBkZXRhaWxzXG4gICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsc0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRldGFpbHNcIik7XG4gICAgICAgICAgICAgICAgZGV0YWlsc0VsLmNsYXNzTmFtZSA9IGBjb250ZXh0by1kZXRhaWxzIG5pdmVsLSR7bml2ZWx9YDtcbiAgICAgICAgICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChkZXRhaWxzRWwpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWFyIHN1bW1hcnlcbiAgICAgICAgICAgICAgICBjb25zdCBzdW1tYXJ5RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3VtbWFyeVwiKTtcbiAgICAgICAgICAgICAgICBzdW1tYXJ5RWwuY2xhc3NOYW1lID0gXCJjb250ZXh0by1zdW1tYXJ5XCI7XG4gICAgICAgICAgICAgICAgZGV0YWlsc0VsLmFwcGVuZENoaWxkKHN1bW1hcnlFbCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRW5jYWJlemFkbyBjb24gbm9tYnJlIHkgY29udGFkb3JcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgaGVhZGVyRWwuY2xhc3NOYW1lID0gXCJjb250ZXh0by1oZWFkZXJcIjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgbm9tYnJlRWwuY2xhc3NOYW1lID0gXCJjb250ZXh0by1ub21icmVcIjtcbiAgICAgICAgICAgICAgICBub21icmVFbC50ZXh0Q29udGVudCA9IHRoaXMuZm9ybWF0ZWFyTm9tYnJlQ29udGV4dG8oY29udGV4dG8pO1xuICAgICAgICAgICAgICAgIGhlYWRlckVsLmFwcGVuZENoaWxkKG5vbWJyZUVsKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDb250YWRvciBkZSB0YXJlYXNcbiAgICAgICAgICAgICAgICBpZiAoY2FudGlkYWRUYXJlYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhZG9yRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250YWRvckVsLmNsYXNzTmFtZSA9IFwiY29udGV4dG8tY29udGFkb3JcIjtcbiAgICAgICAgICAgICAgICAgICAgY29udGFkb3JFbC50ZXh0Q29udGVudCA9IGNhbnRpZGFkVGFyZWFzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckVsLmFwcGVuZENoaWxkKGNvbnRhZG9yRWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzdW1tYXJ5RWwuYXBwZW5kQ2hpbGQoaGVhZGVyRWwpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbnRlbmlkbyBkZSB0YXJlYXNcbiAgICAgICAgICAgICAgICBpZiAoY2FudGlkYWRUYXJlYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHRhcmVhc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcImNvbnRleHRvLXRhcmVhc1wiO1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzRWwuYXBwZW5kQ2hpbGQodGFyZWFzQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE9yZGVuYXIgeSByZW5kZXJpemFyIHRhcmVhc1xuICAgICAgICAgICAgICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXJUYXJlYUVsZW1lbnQodGFyZWEsIHRhcmVhc0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNhciBzdWJjb250ZXh0b3NcbiAgICAgICAgICAgICAgICBpZiAodGllbmVTdWJjb250ZXh0b3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViY29udGV4dG9zRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBzdWJjb250ZXh0b3NFbC5jbGFzc05hbWUgPSBcInN1YmNvbnRleHRvcy1jb250YWluZXJcIjtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsc0VsLmFwcGVuZENoaWxkKHN1YmNvbnRleHRvc0VsKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc2FyTm9kbyhpbmZvLnN1YmNvbnRleHRvcywgbml2ZWwgKyAxLCBzdWJjb250ZXh0b3NFbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFxuICAgIC8vIEluaWNpYXIgcHJvY2VzYW1pZW50byByZWN1cnNpdm8gZGVzZGUgZWwgbml2ZWwgMFxuICAgIHByb2Nlc2FyTm9kbyhhcmJvbENvbnRleHRvcywgMCwgY29udGFpbmVyKTtcbn1cblxuLy8gUmVlbXBsYXpvIHBhcmEgY3JlYXJUYXJlYUVsZW1lbnQgZW4gbGEgY2xhc2UgYWRkT25zQVBJXG5jcmVhclRhcmVhRWxlbWVudCh0YXJlYSwgY29udGFpbmVyKSB7XG4gICAgLy8gRWxlbWVudG8gcHJpbmNpcGFsIGRlIGxhIHRhcmVhXG4gICAgY29uc3QgdGFyZWFFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFyZWFFbC5jbGFzc05hbWUgPSBgdGFyZWEtaXRlbSAke3RhcmVhLmlzQmxvY2tlZCA/ICd0YXJlYS1ibG9xdWVhZGEnIDogJyd9YDtcbiAgICBcbiAgICAvLyBUZXh0byBkZSBsYSB0YXJlYVxuICAgIGNvbnN0IHRleHRvRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHRleHRvRWwuY2xhc3NOYW1lID0gXCJ0YXJlYS10ZXh0b1wiO1xuICAgIFxuICAgIGNvbnN0IGNoZWNrYm94RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjaGVja2JveEVsLmNsYXNzTmFtZSA9IFwidGFyZWEtY2hlY2tib3hcIjtcbiAgICBjaGVja2JveEVsLnRleHRDb250ZW50ID0gXCJcdTI2MTBcIjtcbiAgICB0ZXh0b0VsLmFwcGVuZENoaWxkKGNoZWNrYm94RWwpO1xuICAgIFxuICAgIGNvbnN0IGNvbnRlbmlkb0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgY29udGVuaWRvRWwuY2xhc3NOYW1lID0gXCJ0YXJlYS1jb250ZW5pZG9cIjtcbiAgICBjb250ZW5pZG9FbC50ZXh0Q29udGVudCA9IHRhcmVhLnRleHRvO1xuICAgIHRleHRvRWwuYXBwZW5kQ2hpbGQoY29udGVuaWRvRWwpO1xuICAgIFxuICAgIHRhcmVhRWwuYXBwZW5kQ2hpbGQodGV4dG9FbCk7XG4gICAgXG4gICAgLy8gTWV0YWRhdG9zXG4gICAgY29uc3QgbWV0YWRhdG9zRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1ldGFkYXRvc0VsLmNsYXNzTmFtZSA9IFwidGFyZWEtbWV0YWRhdG9zXCI7XG4gICAgXG4gICAgLy8gVWJpY2FjaVx1MDBGM24gY29uIG5hdmVnYWNpXHUwMEYzblxuICAgIGNvbnN0IHViaWNhY2lvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB1YmljYWNpb25FbC5jbGFzc05hbWUgPSBcInRhcmVhLXViaWNhY2lvblwiO1xuICAgIFxuICAgIGNvbnN0IGljb25vVWJpY2FjaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgaWNvbm9VYmljYWNpb24uY2xhc3NOYW1lID0gXCJtZXRhZGF0by1pY29ub1wiO1xuICAgIGljb25vVWJpY2FjaW9uLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQ0RcIjtcbiAgICB1YmljYWNpb25FbC5hcHBlbmRDaGlsZChpY29ub1ViaWNhY2lvbik7XG4gICAgXG4gICAgY29uc3QgdmFsb3JVYmljYWNpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICB2YWxvclViaWNhY2lvbi5jbGFzc05hbWUgPSBcIm1ldGFkYXRvLXZhbG9yXCI7XG4gICAgXG4gICAgLy8gRW5sYWNlIHBhcmEgbmF2ZWdhY2lcdTAwRjNuXG4gICAgY29uc3QgZW5sYWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgZW5sYWNlLmNsYXNzTmFtZSA9IFwiaW50ZXJuYWwtbGluayB0YXJlYS1saW5rXCI7XG4gICAgZW5sYWNlLnRleHRDb250ZW50ID0gdGFyZWEudGl0dWxvO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhciBzaSBsYSBydXRhIGRlbCBhcmNoaXZvIGVzIHZcdTAwRTFsaWRhXG4gICAgbGV0IHJ1dGFWYWxpZGEgPSB0YXJlYS5ydXRhQXJjaGl2bztcbiAgICBcbiAgICAvLyBFbGltaW5hciBjdWFscXVpZXIgY2FyXHUwMEUxY3RlciB3aWtpXG4gICAgaWYgKHJ1dGFWYWxpZGEpIHtcbiAgICAgICAgLy8gTGltcGlhciBwb3NpYmxlcyBmb3JtYXRvcyB3aWtpIFtbcnV0YXxhbGlhc11dXG4gICAgICAgIGNvbnN0IHdpa2lNYXRjaCA9IHJ1dGFWYWxpZGEubWF0Y2goL1xcW1xcWyguKj8pKD86XFx8KC4qPykpP1xcXVxcXS8pO1xuICAgICAgICBpZiAod2lraU1hdGNoKSB7XG4gICAgICAgICAgICBydXRhVmFsaWRhID0gd2lraU1hdGNoWzFdOyAvLyBVc2FyIHNvbG8gbGEgcnV0YSwgbm8gZWwgYWxpYXNcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgbGEgcnV0YSB0ZXJtaW5hIGVuIC5tZCBzaSBlcyB1biBhcmNoaXZvIG1hcmtkb3duXG4gICAgICAgIGlmICghcnV0YVZhbGlkYS5lbmRzV2l0aCgnLm1kJykgJiYgYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhVmFsaWRhICsgJy5tZCcpKSB7XG4gICAgICAgICAgICBydXRhVmFsaWRhICs9ICcubWQnO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFsbWFjZW5hciBkYXRvcyBzZWd1cm9zIHBhcmEgbmF2ZWdhY2lcdTAwRjNuXG4gICAgZW5sYWNlLnNldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJywgcnV0YVZhbGlkYSB8fCAnJyk7XG4gICAgZW5sYWNlLnNldEF0dHJpYnV0ZSgnZGF0YS1saW5lJywgdGFyZWEubGluZUluZm8/Lm51bWVybz8udG9TdHJpbmcoKSB8fCAnMCcpO1xuICAgIGVubGFjZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGV4dG8nLCB0YXJlYS50ZXh0b09yaWdpbmFsIHx8IHRhcmVhLnRleHRvIHx8ICcnKTtcbiAgICBcbiAgICAvLyBVc2FyIGVsIG1cdTAwRTl0b2RvIHNlZ3VybyBkZSBPYnNpZGlhbiBwYXJhIGxhIG5hdmVnYWNpXHUwMEYzblxuICAgIGVubGFjZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYXRoID0gZW5sYWNlLmdldEF0dHJpYnV0ZSgnZGF0YS1wYXRoJyk7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBwYXJzZUludChlbmxhY2UuZ2V0QXR0cmlidXRlKCdkYXRhLWxpbmUnKSwgMTApO1xuICAgICAgICBjb25zdCB0ZXh0byA9IGVubGFjZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGV4dG8nKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUnV0YSBkZWwgYXJjaGl2byBubyBkaXNwb25pYmxlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBxdWUgZWwgYXJjaGl2byBleGlzdGUgYW50ZXMgZGUgaW50ZW50YXIgYWJyaXJsb1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBBcmNoaXZvIG5vIGVuY29udHJhZG86ICR7cGF0aH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXNhciBlbCBtXHUwMEU5dG9kbyBkZSBuYXZlZ2FjaVx1MDBGM24gY29uIHJlc2FsdGFkbyB5IGFicmlyIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICB0aGlzLm5hdmVnYXJBVGFyZWFDb25SZXNhbHRhZG8ocGF0aCwgbGluZSwgdGV4dG8sIHRydWUpOyAvLyBQYXNhbW9zIHRydWUgcGFyYSBpbmRpY2FyIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgIH0pO1xuICAgIFxuICAgIHZhbG9yVWJpY2FjaW9uLmFwcGVuZENoaWxkKGVubGFjZSk7XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgblx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYSBzaSBleGlzdGVcbiAgICBpZiAodGFyZWEubGluZUluZm8/Lm51bWVybykge1xuICAgICAgICBjb25zdCBsaW5lYUluZm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgbGluZWFJbmZvLmNsYXNzTmFtZSA9IFwibGluZWEtaW5mb1wiO1xuICAgICAgICBsaW5lYUluZm8udGV4dENvbnRlbnQgPSBgIChsXHUwMEVEbmVhICR7dGFyZWEubGluZUluZm8ubnVtZXJvfSlgO1xuICAgICAgICB2YWxvclViaWNhY2lvbi5hcHBlbmRDaGlsZChsaW5lYUluZm8pO1xuICAgIH1cbiAgICBcbiAgICB1YmljYWNpb25FbC5hcHBlbmRDaGlsZCh2YWxvclViaWNhY2lvbik7XG4gICAgbWV0YWRhdG9zRWwuYXBwZW5kQ2hpbGQodWJpY2FjaW9uRWwpO1xuICAgIFxuICAgIC8vIEZlY2hhc1xuICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvIHx8IHRhcmVhLmZlY2hhU2NoZWR1bGVkIHx8IHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgY29uc3QgZmVjaGFzRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBmZWNoYXNFbC5jbGFzc05hbWUgPSBcInRhcmVhLWZlY2hhc1wiO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZmVjaGFFbC5jbGFzc05hbWUgPSBcInRhcmVhLWZlY2hhIHZlbmNpbWllbnRvXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGljb25vRmVjaGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGljb25vRmVjaGEuY2xhc3NOYW1lID0gXCJtZXRhZGF0by1pY29ub1wiO1xuICAgICAgICAgICAgaWNvbm9GZWNoYS50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQ0M1XCI7XG4gICAgICAgICAgICBmZWNoYUVsLmFwcGVuZENoaWxkKGljb25vRmVjaGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2YWxvckZlY2hhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICB2YWxvckZlY2hhLmNsYXNzTmFtZSA9IFwibWV0YWRhdG8tdmFsb3JcIjtcbiAgICAgICAgICAgIHZhbG9yRmVjaGEudGV4dENvbnRlbnQgPSB0YXJlYS5mZWNoYVZlbmNpbWllbnRvO1xuICAgICAgICAgICAgZmVjaGFFbC5hcHBlbmRDaGlsZCh2YWxvckZlY2hhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZmVjaGFzRWwuYXBwZW5kQ2hpbGQoZmVjaGFFbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBmZWNoYUVsLmNsYXNzTmFtZSA9IFwidGFyZWEtZmVjaGEgc2NoZWR1bGVkXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGljb25vRmVjaGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIGljb25vRmVjaGEuY2xhc3NOYW1lID0gXCJtZXRhZGF0by1pY29ub1wiO1xuICAgICAgICAgICAgaWNvbm9GZWNoYS50ZXh0Q29udGVudCA9IFwiXHUyM0YzXCI7XG4gICAgICAgICAgICBmZWNoYUVsLmFwcGVuZENoaWxkKGljb25vRmVjaGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB2YWxvckZlY2hhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICB2YWxvckZlY2hhLmNsYXNzTmFtZSA9IFwibWV0YWRhdG8tdmFsb3JcIjtcbiAgICAgICAgICAgIHZhbG9yRmVjaGEudGV4dENvbnRlbnQgPSB0YXJlYS5mZWNoYVNjaGVkdWxlZDtcbiAgICAgICAgICAgIGZlY2hhRWwuYXBwZW5kQ2hpbGQodmFsb3JGZWNoYSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZlY2hhc0VsLmFwcGVuZENoaWxkKGZlY2hhRWwpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBmZWNoYUVsLmNsYXNzTmFtZSA9IFwidGFyZWEtZmVjaGEgc3RhcnRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaWNvbm9GZWNoYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgaWNvbm9GZWNoYS5jbGFzc05hbWUgPSBcIm1ldGFkYXRvLWljb25vXCI7XG4gICAgICAgICAgICBpY29ub0ZlY2hhLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURFRUJcIjtcbiAgICAgICAgICAgIGZlY2hhRWwuYXBwZW5kQ2hpbGQoaWNvbm9GZWNoYSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHZhbG9yRmVjaGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIHZhbG9yRmVjaGEuY2xhc3NOYW1lID0gXCJtZXRhZGF0by12YWxvclwiO1xuICAgICAgICAgICAgdmFsb3JGZWNoYS50ZXh0Q29udGVudCA9IHRhcmVhLmZlY2hhU3RhcnQ7XG4gICAgICAgICAgICBmZWNoYUVsLmFwcGVuZENoaWxkKHZhbG9yRmVjaGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmZWNoYXNFbC5hcHBlbmRDaGlsZChmZWNoYUVsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgbWV0YWRhdG9zRWwuYXBwZW5kQ2hpbGQoZmVjaGFzRWwpO1xuICAgIH1cbiAgICBcbiAgICAvLyBIb3Jhcmlvc1xuICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgY29uc3QgaG9yYXJpb0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgaG9yYXJpb0VsLmNsYXNzTmFtZSA9IFwidGFyZWEtaG9yYXJpb1wiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaWNvbm9Ib3JhcmlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIGljb25vSG9yYXJpby5jbGFzc05hbWUgPSBcIm1ldGFkYXRvLWljb25vXCI7XG4gICAgICAgIGljb25vSG9yYXJpby50ZXh0Q29udGVudCA9IFwiXHUyM0YwXCI7XG4gICAgICAgIGhvcmFyaW9FbC5hcHBlbmRDaGlsZChpY29ub0hvcmFyaW8pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdmFsb3JIb3JhcmlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHZhbG9ySG9yYXJpby5jbGFzc05hbWUgPSBcIm1ldGFkYXRvLXZhbG9yXCI7XG4gICAgICAgIHZhbG9ySG9yYXJpby50ZXh0Q29udGVudCA9IGAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31gO1xuICAgICAgICBob3JhcmlvRWwuYXBwZW5kQ2hpbGQodmFsb3JIb3JhcmlvKTtcbiAgICAgICAgXG4gICAgICAgIG1ldGFkYXRvc0VsLmFwcGVuZENoaWxkKGhvcmFyaW9FbCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFBlcnNvbmFzIGFzaWduYWRhc1xuICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgcGVyc29uYXNFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHBlcnNvbmFzRWwuY2xhc3NOYW1lID0gXCJ0YXJlYS1wZXJzb25hc1wiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaWNvbm9QZXJzb25hcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBpY29ub1BlcnNvbmFzLmNsYXNzTmFtZSA9IFwibWV0YWRhdG8taWNvbm9cIjtcbiAgICAgICAgaWNvbm9QZXJzb25hcy50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQzY0XCI7XG4gICAgICAgIHBlcnNvbmFzRWwuYXBwZW5kQ2hpbGQoaWNvbm9QZXJzb25hcyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2YWxvclBlcnNvbmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHZhbG9yUGVyc29uYXMuY2xhc3NOYW1lID0gXCJtZXRhZGF0by12YWxvclwiO1xuICAgICAgICB2YWxvclBlcnNvbmFzLnRleHRDb250ZW50ID0gdGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmpvaW4oJyB8ICcpO1xuICAgICAgICBwZXJzb25hc0VsLmFwcGVuZENoaWxkKHZhbG9yUGVyc29uYXMpO1xuICAgICAgICBcbiAgICAgICAgbWV0YWRhdG9zRWwuYXBwZW5kQ2hpbGQocGVyc29uYXNFbCk7XG4gICAgfVxuICAgIFxuICAgIHRhcmVhRWwuYXBwZW5kQ2hpbGQobWV0YWRhdG9zRWwpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXJlYUVsKTtcbn1cblxuLy8gTVx1MDBFOXRvZG8gbWVqb3JhZG8gZGUgbmF2ZWdhY2lcdTAwRjNuIGEgdGFyZWFzIGNvbiB2YWxpZGFjaVx1MDBGM24gYWRpY2lvbmFsXG5hc3luYyBuYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvKHBhdGgsIGxpbmVOdW1iZXIsIHRleHRvVGFyZWEsIG51ZXZhUGVzdGFcdTAwRjFhID0gdHJ1ZSkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBxdWUgbGEgcnV0YSBlcyB2XHUwMEUxbGlkYVxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBBcmNoaXZvIG5vIGVuY29udHJhZG86ICR7cGF0aH1gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSW50ZW50YXIgYWJyaXIgZWwgYXJjaGl2bywgb3BjaW9uYWxtZW50ZSBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgIGNvbnN0IGxlYWYgPSBhcHAud29ya3NwYWNlLmdldExlYWYobnVldmFQZXN0YVx1MDBGMWEpOyAvLyAndHJ1ZScgaW5kaWNhIGNyZWFyIHVuYSBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFwbGljYXIgcmVzYWx0YWRvIGRlc3B1XHUwMEU5cyBkZSBxdWUgZWwgYXJjaGl2byBzZSBoYXlhIGFiaWVydG8gY29tcGxldGFtZW50ZVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGxlYWYudmlldy5lZGl0b3I7XG4gICAgICAgICAgICBpZiAoIWVkaXRvcikgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGluZU51bWJlciA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlciBjdXJzb3IgeSBwYW50YWxsYSBhIGxhIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHsgbGluZTogbGluZU51bWJlciAtIDEsIGNoOiAwIH0pO1xuICAgICAgICAgICAgICAgIGVkaXRvci5zY3JvbGxJbnRvVmlldyhcbiAgICAgICAgICAgICAgICAgICAgeyBmcm9tOiB7IGxpbmU6IGxpbmVOdW1iZXIgLSAxLCBjaDogMCB9LCB0bzogeyBsaW5lOiBsaW5lTnVtYmVyIC0gMSwgY2g6IDAgfSB9LFxuICAgICAgICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBcGxpY2FyIHJlc2FsdGFkbyB2aXN1YWwgXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNhbHRhckxpbmVhVGVtcG9yYWxtZW50ZShlZGl0b3IsIGxpbmVOdW1iZXIgLSAxKTtcbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAvLyBTaSBubyB0ZW5lbW9zIG5cdTAwRkFtZXJvIGRlIGxcdTAwRURuZWEgcGVybyB0ZW5lbW9zIHRleHRvLCBidXNjYW1vcyBlbCB0ZXh0b1xuICAgICAgICAgICAgZWxzZSBpZiAodGV4dG9UYXJlYSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnVzY2FyIHRleHRvIGxpbXBpbyBvIGNvbiBtYXJjYWRvcmVzIGRlIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvTGltcGlvID0gdGV4dG9UYXJlYS5yZXBsYWNlKC9eLVxccypcXFtbXlxcXV0rXFxdXFxzKi8sICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhTGltcGlhID0gbGluZWFzW2ldLnJlcGxhY2UoL14tXFxzKlxcW1teXFxdXStcXF1cXHMqLywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lYXNbaV0uaW5jbHVkZXModGV4dG9UYXJlYSkgfHwgbGluZWFMaW1waWEuaW5jbHVkZXModGV4dG9MaW1waW8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlciBjdXJzb3IgeSBwYW50YWxsYSBhIGxhIGxcdTAwRURuZWEgZW5jb250cmFkYVxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGksIGNoOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZnJvbTogeyBsaW5lOiBpLCBjaDogMCB9LCB0bzogeyBsaW5lOiBpLCBjaDogbGluZWFzW2ldLmxlbmd0aCB9IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBsaWNhciByZXNhbHRhZG8gdmlzdWFsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2FsdGFyTGluZWFUZW1wb3JhbG1lbnRlKGVkaXRvciwgaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMzAwKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBuYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgYWwgbmF2ZWdhcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbn1cblxuLy8gVmVyc2lcdTAwRjNuIG1lam9yYWRhIGRlbCByZXNhbHRhZG8gZGUgbFx1MDBFRG5lYXNcbnJlc2FsdGFyTGluZWFUZW1wb3JhbG1lbnRlKGVkaXRvciwgbGluZUluZGV4KSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gVXNhciBDTTYgbyBDTTUgZGVwZW5kaWVuZG8gZGVsIGVkaXRvclxuICAgICAgICBpZiAoZWRpdG9yLmNtICYmIGVkaXRvci5jbS5zdGF0ZSkge1xuICAgICAgICAgICAgLy8gRWRpdG9yIG1vZGVybm8gKENNNilcbiAgICAgICAgICAgIGNvbnN0IGxpbmVEaXYgPSBlZGl0b3IuY20uZG9tLnF1ZXJ5U2VsZWN0b3IoJy5jbS1jb250ZW50Jyk7XG4gICAgICAgICAgICBpZiAobGluZURpdikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVFbGVtZW50cyA9IGxpbmVEaXYucXVlcnlTZWxlY3RvckFsbCgnLmNtLWxpbmUnKTtcbiAgICAgICAgICAgICAgICBpZiAobGluZUVsZW1lbnRzICYmIGxpbmVFbGVtZW50cy5sZW5ndGggPiBsaW5lSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZUVsZW1lbnRzW2xpbmVJbmRleF0uY2xhc3NMaXN0LmFkZCgnaGlnaGxpZ2h0ZWQtbGluZScpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lRWxlbWVudHNbbGluZUluZGV4XS5jbGFzc0xpc3QucmVtb3ZlKCdoaWdobGlnaHRlZC1saW5lJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVkaXRvciBjbFx1MDBFMXNpY28gKENNNSlcbiAgICAgICAgICAgIGNvbnN0IGxpbmVEaXYgPSBlZGl0b3IubGluZURpdiB8fCBlZGl0b3IuZ2V0U2Nyb2xsZXJFbGVtZW50KCk7XG4gICAgICAgICAgICBpZiAobGluZURpdikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVFbGVtZW50cyA9IGxpbmVEaXYucXVlcnlTZWxlY3RvckFsbCgnLkNvZGVNaXJyb3ItbGluZScpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lRWxlbWVudHMgJiYgbGluZUVsZW1lbnRzLmxlbmd0aCA+IGxpbmVJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lRWxlbWVudHNbbGluZUluZGV4XS5jbGFzc0xpc3QuYWRkKCdoaWdobGlnaHRlZC1saW5lJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVFbGVtZW50c1tsaW5lSW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZ2hsaWdodGVkLWxpbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVzYWx0YXIgbFx1MDBFRG5lYTonLCBlcnJvcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEZvcm1hdGVhIGVsIG5vbWJyZSBkZSB1biBjb250ZXh0byBwYXJhIG1lam9yIHZpc3VhbGl6YWNpXHUwMEYzblxuICogQHBhcmFtIGNvbnRleHRvIFN0cmluZyBkZWwgY29udGV4dG8gY29uIGZvcm1hdG8gamVyXHUwMEUxcnF1aWNvXG4gKiBAcmV0dXJucyBOb21icmUgZm9ybWF0ZWFkbyBkZWwgY29udGV4dG9cbiAqL1xuZm9ybWF0ZWFyTm9tYnJlQ29udGV4dG8oY29udGV4dG8pIHtcbiAgICBpZiAoY29udGV4dG8uaW5jbHVkZXMoJyBcdTIxOTIgJykpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHRvLnNwbGl0KCcgXHUyMTkyICcpLnBvcCgpIHx8IGNvbnRleHRvO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dG87XG59XG5cblxuXG4vLyAtLS0gVGFlYXMgSHVlcmZhbmFzXG5cbi8vIE1cdTAwRTl0b2RvIHBhcmEgYWRkT25zQVBJIHF1ZSBtdWVzdHJhIHRhcmVhcyBzaW4gY2xhc2lmaWNhciBlbiB1biBjb21wb25lbnRlIHZpc3VhbFxuXG4vKipcbiAqIEdlbmVyYSB1biBjb21wb25lbnRlIHZpc3VhbCBwYXJhIG1vc3RyYXIgdGFyZWFzIHNpbiBjbGFzaWZpY2FyIChzaW4gY29udGV4dG8sIHBlcnNvbmFzLFxuICogZmVjaGFzIG8gY2xhc2lmaWNhY2lcdTAwRjNuIEdURClcbiAqIEBwYXJhbSBkdiBPYmpldG8gZGF0YXZpZXcgcGFyYSBhY2NlZGVyIGEgc3VzIGZ1bmNpb25lc1xuICogQHJldHVybnMgRWxlbWVudG8gRE9NIGNvbiBsYSB2aXN0YSBkZSB0YXJlYXMgc2luIGNsYXNpZmljYXJcbiAqL1xuYXN5bmMgbW9zdHJhclRhcmVhc1NpbkNsYXNpZmljYXIoZHYpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBDcmVhciBlbCBjb250ZW5lZG9yIHByaW5jaXBhbFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJ0YXJlYXMtc2luLWNsYXNpZmljYXItY29udGFpbmVyXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zIHBlcnNvbmFsaXphZG9zIHBhcmEgbGEgdmlzdWFsaXphY2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IHN0eWxlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlRWwudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIC50YXJlYXMtc2luLWNsYXNpZmljYXItY29udGFpbmVyIHtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC45NWVtO1xuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWFzLWhlYWRpbmcge1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogNnB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4zZW07XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnN0YXRzLWJhZGdlIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICAgICAgcGFkZGluZzogMnB4IDEwcHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLWdyb3VwIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtZ3JvdXAtaGVhZGVyIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1hbHQpO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1ncm91cC1oZWFkZXI6aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1ncm91cC10aXRsZSB7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGdhcDogOHB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLWdyb3VwLXRvZ2dsZSB7XG4gICAgICAgICAgICBmb250LWZhbWlseTogbW9ub3NwYWNlO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMnMgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLWdyb3VwLXRvZ2dsZS5vcGVuIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLWdyb3VwLWNvdW50IHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICAgICAgcGFkZGluZzogMXB4IDhweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NWVtO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtbGlzdCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwIDEycHggMTJweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1saXN0Lm9wZW4ge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1pdGVtIHtcbiAgICAgICAgICAgIG1hcmdpbjogOHB4IDA7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLWl0ZW06aG92ZXIge1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTtcbiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhLXRleHRvIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDZweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtY2hlY2tib3gge1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZmFpbnQpO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxLjFlbTtcbiAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtY29udGVuaWRvIHtcbiAgICAgICAgICAgIGZsZXgtZ3JvdzogMTtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYS1tZXRhZGF0b3Mge1xuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDI4cHg7XG4gICAgICAgICAgICBmb250LXNpemU6IDAuOWVtO1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAudGFyZWEtbWV0YS1pdGVtIHtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDNweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBhbGlnbi1pdGVtczogYmFzZWxpbmU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5tZXRhLWljb24ge1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA2cHg7XG4gICAgICAgICAgICB3aWR0aDogMTZweDtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmxvYWRpbmctaW5kaWNhdG9yIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnNwaW5uZXIge1xuICAgICAgICAgICAgYm9yZGVyOiAzcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgYm9yZGVyLXRvcDogM3B4IHNvbGlkIHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICB3aWR0aDogMzBweDtcbiAgICAgICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgICAgIGFuaW1hdGlvbjogc3BpbiAxcyBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxuICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLmVycm9yLW1lc3NhZ2Uge1xuICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS10ZXh0LWVycm9yLXJnYiksIDAuMSk7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC50YXJlYXMtY29udHJvbHMge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDFyZW07XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhcy1idG4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnktYWx0KTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIHBhZGRpbmc6IDZweCAxMnB4O1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLnRhcmVhcy1idG46aG92ZXIge1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3Zlcik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5leHBhbmQtYnRuOmhvdmVyIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC5lbXB0eS1tZXNzYWdlIHtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIHBhZGRpbmc6IDJyZW07XG4gICAgICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHN0eWxlRWwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZW5jYWJlemFkbyBwcmluY2lwYWxcbiAgICAgICAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKTtcbiAgICAgICAgaGVhZGluZy5jbGFzc05hbWUgPSBcInRhcmVhcy1oZWFkaW5nXCI7XG4gICAgICAgIGhlYWRpbmcudGV4dENvbnRlbnQgPSBcIlRhcmVhcyBTaW4gQ2xhc2lmaWNhclwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaGVhZGluZyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGNvbnRyb2xlcyBwYXJhIGV4cGFuZGlyL2NvbGFwc2FyIHRvZG9cbiAgICAgICAgY29uc3QgY29udHJvbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjb250cm9sc0Rpdi5jbGFzc05hbWUgPSBcInRhcmVhcy1jb250cm9sc1wiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhwYW5kQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgZXhwYW5kQnRuLmNsYXNzTmFtZSA9IFwidGFyZWFzLWJ0biBleHBhbmQtYnRuXCI7XG4gICAgICAgIGV4cGFuZEJ0bi50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVEQ0MyIEV4cGFuZGlyIFRvZG9cIjtcbiAgICAgICAgZXhwYW5kQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmV4cGFuZGlyVG9kYXNMYXNUYXJlYXMoY29udGFpbmVyKSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb2xsYXBzZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNvbGxhcHNlQnRuLmNsYXNzTmFtZSA9IFwidGFyZWFzLWJ0biBjb2xsYXBzZS1idG5cIjtcbiAgICAgICAgY29sbGFwc2VCdG4udGV4dENvbnRlbnQgPSBcIlx1RDgzRFx1RENDMSBDb2xhcHNhciBUb2RvXCI7XG4gICAgICAgIGNvbGxhcHNlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNvbGFwc2FyVG9kYXNMYXNUYXJlYXMoY29udGFpbmVyKSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZWZyZXNoQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgcmVmcmVzaEJ0bi5jbGFzc05hbWUgPSBcInRhcmVhcy1idG4gcmVmcmVzaC1idG5cIjtcbiAgICAgICAgcmVmcmVzaEJ0bi50ZXh0Q29udGVudCA9IFwiXHVEODNEXHVERDA0IEFjdHVhbGl6YXJcIjtcbiAgICAgICAgcmVmcmVzaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbnVldm9Db250YWluZXIgPSBhd2FpdCB0aGlzLm1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyKGR2KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChudWV2b0NvbnRhaW5lciwgY29udGFpbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChleHBhbmRCdG4pO1xuICAgICAgICBjb250cm9sc0Rpdi5hcHBlbmRDaGlsZChjb2xsYXBzZUJ0bik7XG4gICAgICAgIGNvbnRyb2xzRGl2LmFwcGVuZENoaWxkKHJlZnJlc2hCdG4pO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29udHJvbHNEaXYpO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgaW5kaWNhZG9yIGRlIGNhcmdhXG4gICAgICAgIGNvbnN0IGxvYWRpbmdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBsb2FkaW5nRGl2LmNsYXNzTmFtZSA9IFwibG9hZGluZy1pbmRpY2F0b3JcIjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNwaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBzcGlubmVyRGl2LmNsYXNzTmFtZSA9IFwic3Bpbm5lclwiO1xuICAgICAgICBsb2FkaW5nRGl2LmFwcGVuZENoaWxkKHNwaW5uZXJEaXYpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbG9hZGluZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBsb2FkaW5nVGV4dC50ZXh0Q29udGVudCA9IFwiQnVzY2FuZG8gdGFyZWFzIHNpbiBjbGFzaWZpY2FyLi4uXCI7XG4gICAgICAgIGxvYWRpbmdEaXYuYXBwZW5kQ2hpbGQobG9hZGluZ1RleHQpO1xuICAgICAgICBcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdEaXYpO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgZGF0b3MgZGUgdGFyZWFzIHNpbiBjbGFzaWZpY2FyIGEgdHJhdlx1MDBFOXMgZGUgbGEgQVBJXG4gICAgICAgICAgICBjb25zdCB7IHRhcmVhc1Bvck5vdGEsIHRvdGFsVGFyZWFzLCB0b3RhbE5vdGFzIH0gPSBhd2FpdCB0aGlzLnBsdWdpbi50YXJlYXNBUEkuZ2V0VGFyZWFzU2luQ2xhc2lmaWNhcigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciBlbCBpbmRpY2Fkb3IgZGUgY2FyZ2FcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChsb2FkaW5nRGl2KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgbm8gaGF5IHRhcmVhcyBzaW4gY2xhc2lmaWNhclxuICAgICAgICAgICAgaWYgKHRvdGFsVGFyZWFzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW1wdHlNZXNzYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICBlbXB0eU1lc3NhZ2UuY2xhc3NOYW1lID0gXCJlbXB0eS1tZXNzYWdlXCI7XG4gICAgICAgICAgICAgICAgZW1wdHlNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcdTAwQTFGZWxpY2lkYWRlcyEgTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIHNpbiBjbGFzaWZpY2FyLlwiO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbXB0eU1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgZW5jYWJlemFkbyBjb24gZWwgY29udGFkb3JcbiAgICAgICAgICAgIGNvbnN0IHN0YXRzQmFkZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgIHN0YXRzQmFkZ2UuY2xhc3NOYW1lID0gXCJzdGF0cy1iYWRnZVwiO1xuICAgICAgICAgICAgc3RhdHNCYWRnZS50ZXh0Q29udGVudCA9IGAke3RvdGFsVGFyZWFzfSB0YXJlYXMgZW4gJHt0b3RhbE5vdGFzfSBub3Rhc2A7XG4gICAgICAgICAgICBoZWFkaW5nLmFwcGVuZENoaWxkKHN0YXRzQmFkZ2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPcmRlbmFyIG5vdGFzIHBvciBjYW50aWRhZCBkZSB0YXJlYXMgKGRlc2NlbmRlbnRlKVxuICAgICAgICAgICAgY29uc3Qgbm90YXNPcmRlbmFkYXMgPSBBcnJheS5mcm9tKHRhcmVhc1Bvck5vdGEudmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudGFyZWFzLmxlbmd0aCAtIGEudGFyZWFzLmxlbmd0aCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGdydXBvcyBkZSB0YXJlYXMgcG9yIG5vdGFcbiAgICAgICAgICAgIGZvciAoY29uc3Qgbm90YUluZm8gb2Ygbm90YXNPcmRlbmFkYXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBncnVwb1RhcmVhcyA9IHRoaXMuY3JlYXJHcnVwb1RhcmVhcyhub3RhSW5mbywgZHYpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChncnVwb1RhcmVhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV4cGFuZGlyIGVsIHByaW1lciBncnVwbyBhdXRvbVx1MDBFMXRpY2FtZW50ZVxuICAgICAgICAgICAgaWYgKG5vdGFzT3JkZW5hZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmltZXJHcnVwbyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcudGFyZWEtZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICBpZiAocHJpbWVyR3J1cG8pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gcHJpbWVyR3J1cG8ucXVlcnlTZWxlY3RvcignLnRhcmVhLWdyb3VwLWhlYWRlcicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGUgPSBwcmltZXJHcnVwby5xdWVyeVNlbGVjdG9yKCcudGFyZWEtZ3JvdXAtdG9nZ2xlJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBwcmltZXJHcnVwby5xdWVyeVNlbGVjdG9yKCcudGFyZWEtbGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBFbGltaW5hciBlbCBpbmRpY2Fkb3IgZGUgY2FyZ2FcbiAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChsb2FkaW5nRGl2KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9zdHJhciBtZW5zYWplIGRlIGVycm9yXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTmFtZSA9IFwiZXJyb3ItbWVzc2FnZVwiO1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gYEVycm9yIGFsIGNhcmdhciB0YXJlYXMgc2luIGNsYXNpZmljYXI6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzU2luQ2xhc2lmaWNhcjpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZW5lcmFsIGVuIG1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyOlwiLCBlcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXZvbHZlciB1biBtZW5zYWplIGRlIGVycm9yXG4gICAgICAgIGNvbnN0IGVycm9yQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZXJyb3JDb250YWluZXIuY2xhc3NOYW1lID0gXCJlcnJvci1tZXNzYWdlXCI7XG4gICAgICAgIGVycm9yQ29udGFpbmVyLnRleHRDb250ZW50ID0gYEVycm9yIGFsIGNhcmdhciB0YXJlYXMgc2luIGNsYXNpZmljYXI6ICR7ZXJyb3IubWVzc2FnZX1gO1xuICAgICAgICByZXR1cm4gZXJyb3JDb250YWluZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWEgdW4gZ3J1cG8gZGUgdGFyZWFzIHBhcmEgdW5hIG5vdGEgZXNwZWNcdTAwRURmaWNhXG4gKiBAcGFyYW0gbm90YUluZm8gSW5mb3JtYWNpXHUwMEYzbiBkZSBsYSBub3RhIHkgc3VzIHRhcmVhc1xuICogQHBhcmFtIGR2IE9iamV0byBkYXRhdmlld1xuICogQHJldHVybnMgRWxlbWVudG8gRE9NIGNvbiBlbCBncnVwbyBkZSB0YXJlYXNcbiAqL1xuY3JlYXJHcnVwb1RhcmVhcyhub3RhSW5mbywgZHYpIHtcbiAgICBjb25zdCB7IHRpdHVsbywgcnV0YSwgdGFyZWFzIH0gPSBub3RhSW5mbztcbiAgICBcbiAgICAvLyBDcmVhciBjb250ZW5lZG9yIGRlbCBncnVwb1xuICAgIGNvbnN0IGdydXBvRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBncnVwb0Rpdi5jbGFzc05hbWUgPSBcInRhcmVhLWdyb3VwXCI7XG4gICAgXG4gICAgLy8gQ3JlYXIgZW5jYWJlemFkbyBjb24gdG9nZ2xlXG4gICAgY29uc3QgaGVhZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBoZWFkZXJEaXYuY2xhc3NOYW1lID0gXCJ0YXJlYS1ncm91cC1oZWFkZXJcIjtcbiAgICBcbiAgICAvLyBUXHUwMEVEdHVsbyBjb24gXHUwMEVEY29ubyBkZSB0b2dnbGVcbiAgICBjb25zdCB0aXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGl0bGVEaXYuY2xhc3NOYW1lID0gXCJ0YXJlYS1ncm91cC10aXRsZVwiO1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICB0b2dnbGVTcGFuLmNsYXNzTmFtZSA9IFwidGFyZWEtZ3JvdXAtdG9nZ2xlXCI7XG4gICAgdG9nZ2xlU3Bhbi50ZXh0Q29udGVudCA9IFwiXHUyNUI2XCI7XG4gICAgdGl0bGVEaXYuYXBwZW5kQ2hpbGQodG9nZ2xlU3Bhbik7XG4gICAgXG4gICAgLy8gRW5sYWNlIGEgbGEgbm90YVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVubGFjZU5vdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgZW5sYWNlTm90YS5jbGFzc05hbWUgPSBcImludGVybmFsLWxpbmtcIjtcbiAgICAgICAgZW5sYWNlTm90YS50ZXh0Q29udGVudCA9IHRpdHVsbztcbiAgICAgICAgZW5sYWNlTm90YS5ocmVmID0gcnV0YTtcbiAgICAgICAgZW5sYWNlTm90YS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWhyZWZcIiwgcnV0YSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGV2ZW50byBwYXJhIGFicmlyIGxhIG5vdGFcbiAgICAgICAgZW5sYWNlTm90YS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQocnV0YSwgXCJcIiwgdHJ1ZSk7IC8vIEFicmlyIGVuIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRpdGxlRGl2LmFwcGVuZENoaWxkKGVubGFjZU5vdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gU2kgZmFsbGEgbGEgY3JlYWNpXHUwMEYzbiBkZWwgZW5sYWNlLCBtb3N0cmFyIHNvbG8gdGV4dG9cbiAgICAgICAgY29uc3QgdGV4dG9Ob3RhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHRleHRvTm90YS50ZXh0Q29udGVudCA9IHRpdHVsbztcbiAgICAgICAgdGl0bGVEaXYuYXBwZW5kQ2hpbGQodGV4dG9Ob3RhKTtcbiAgICB9XG4gICAgXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRpdGxlRGl2KTtcbiAgICBcbiAgICAvLyBDb250YWRvciBkZSB0YXJlYXNcbiAgICBjb25zdCBjb3VudFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjb3VudFNwYW4uY2xhc3NOYW1lID0gXCJ0YXJlYS1ncm91cC1jb3VudFwiO1xuICAgIGNvdW50U3Bhbi50ZXh0Q29udGVudCA9IHRhcmVhcy5sZW5ndGgudG9TdHJpbmcoKTtcbiAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQoY291bnRTcGFuKTtcbiAgICBcbiAgICBncnVwb0Rpdi5hcHBlbmRDaGlsZChoZWFkZXJEaXYpO1xuICAgIFxuICAgIC8vIExpc3RhIGRlIHRhcmVhcyAoaW5pY2lhbG1lbnRlIG9jdWx0YSlcbiAgICBjb25zdCB0YXJlYXNMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0YXJlYXNMaXN0LmNsYXNzTmFtZSA9IFwidGFyZWEtbGlzdFwiO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGNhZGEgdGFyZWFcbiAgICBmb3IgKGNvbnN0IHRhcmVhIG9mIHRhcmVhcykge1xuICAgICAgICBjb25zdCB0YXJlYUVsZW1lbnQgPSB0aGlzLmNyZWFyVGFyZWFFbGVtZW50SHVlcmZhbmEodGFyZWEsIGR2KTtcbiAgICAgICAgdGFyZWFzTGlzdC5hcHBlbmRDaGlsZCh0YXJlYUVsZW1lbnQpO1xuICAgIH1cbiAgICBcbiAgICBncnVwb0Rpdi5hcHBlbmRDaGlsZCh0YXJlYXNMaXN0KTtcbiAgICBcbiAgICAvLyBBZ3JlZ2FyIGV2ZW50byBwYXJhIG1vc3RyYXIvb2N1bHRhciBsaXN0YSBkZSB0YXJlYXNcbiAgICBoZWFkZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICAvLyBObyBjb2xhcHNhciBzaSBzZSBoaXpvIGNsaWMgZW4gdW4gZW5sYWNlXG4gICAgICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PT0gJ0EnKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICB0b2dnbGVTcGFuLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTtcbiAgICAgICAgdGFyZWFzTGlzdC5jbGFzc0xpc3QudG9nZ2xlKCdvcGVuJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAodG9nZ2xlU3Bhbi5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkge1xuICAgICAgICAgICAgdG9nZ2xlU3Bhbi50ZXh0Q29udGVudCA9IFwiXHUyNUJDXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2dnbGVTcGFuLnRleHRDb250ZW50ID0gXCJcdTI1QjZcIjtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBncnVwb0Rpdjtcbn1cblxuLyoqXG4gKiBDcmVhIHVuIGVsZW1lbnRvIERPTSBwYXJhIHVuYSB0YXJlYSBzaW4gY2xhc2lmaWNhclxuICogQHBhcmFtIHRhcmVhIE9iamV0byBjb24gbGEgaW5mb3JtYWNpXHUwMEYzbiBkZSBsYSB0YXJlYVxuICogQHBhcmFtIGR2IE9iamV0byBkYXRhdmlld1xuICogQHJldHVybnMgRWxlbWVudG8gRE9NIHJlcHJlc2VudGFuZG8gbGEgdGFyZWFcbiAqL1xuY3JlYXJUYXJlYUVsZW1lbnRIdWVyZmFuYSh0YXJlYSwgZHYpIHtcbiAgICAvLyBFbGVtZW50byBwcmluY2lwYWxcbiAgICBjb25zdCB0YXJlYURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGFyZWFEaXYuY2xhc3NOYW1lID0gXCJ0YXJlYS1pdGVtXCI7XG4gICAgXG4gICAgLy8gVGV4dG8gZGUgbGEgdGFyZWFcbiAgICBjb25zdCB0ZXh0b0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGV4dG9EaXYuY2xhc3NOYW1lID0gXCJ0YXJlYS10ZXh0b1wiO1xuICAgIFxuICAgIC8vIENoZWNrYm94ICh2aXN1YWwsIG5vIGZ1bmNpb25hbClcbiAgICBjb25zdCBjaGVja2JveFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBjaGVja2JveFNwYW4uY2xhc3NOYW1lID0gXCJ0YXJlYS1jaGVja2JveFwiO1xuICAgIGNoZWNrYm94U3Bhbi50ZXh0Q29udGVudCA9IFwiXHUyNjEwXCI7XG4gICAgY2hlY2tib3hTcGFuLnNldEF0dHJpYnV0ZShcImRhdGEtcGF0aFwiLCB0YXJlYS5ydXRhQXJjaGl2byk7XG4gICAgY2hlY2tib3hTcGFuLnNldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiLCB0YXJlYS5saW5lSW5mbz8ubnVtZXJvPy50b1N0cmluZygpIHx8IFwiMFwiKTtcbiAgICBcbiAgICAvLyBIYWNlciBlbCBjaGVja2JveCBjbGljYWJsZSBwYXJhIG5hdmVnYXIgYSBsYSB0YXJlYVxuICAgIGNoZWNrYm94U3Bhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gY2hlY2tib3hTcGFuLmdldEF0dHJpYnV0ZShcImRhdGEtcGF0aFwiKTtcbiAgICAgICAgY29uc3QgbGluZSA9IHBhcnNlSW50KGNoZWNrYm94U3Bhbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxpbmVcIikgfHwgXCIwXCIsIDEwKTtcbiAgICAgICAgdGhpcy5uYXZlZ2FyQVRhcmVhQ29uUmVzYWx0YWRvKHBhdGgsIGxpbmUsIHRhcmVhLnRleHRvT3JpZ2luYWwgfHwgdGFyZWEudGV4dG8sIHRydWUpO1xuICAgIH0pO1xuICAgIFxuICAgIHRleHRvRGl2LmFwcGVuZENoaWxkKGNoZWNrYm94U3Bhbik7XG4gICAgXG4gICAgLy8gQ29udGVuaWRvIGRlIGxhIHRhcmVhXG4gICAgY29uc3QgY29udGVuaWRvU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIGNvbnRlbmlkb1NwYW4uY2xhc3NOYW1lID0gXCJ0YXJlYS1jb250ZW5pZG9cIjtcbiAgICBjb250ZW5pZG9TcGFuLnRleHRDb250ZW50ID0gdGFyZWEudGV4dG87XG4gICAgXG4gICAgLy8gSGFjZXIgZWwgY29udGVuaWRvIGNsaWNhYmxlIHBhcmEgbmF2ZWdhciBhIGxhIHRhcmVhXG4gICAgY29udGVuaWRvU3Bhbi5zZXRBdHRyaWJ1dGUoXCJkYXRhLXBhdGhcIiwgdGFyZWEucnV0YUFyY2hpdm8pO1xuICAgIGNvbnRlbmlkb1NwYW4uc2V0QXR0cmlidXRlKFwiZGF0YS1saW5lXCIsIHRhcmVhLmxpbmVJbmZvPy5udW1lcm8/LnRvU3RyaW5nKCkgfHwgXCIwXCIpO1xuICAgIGNvbnRlbmlkb1NwYW4uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgXG4gICAgY29udGVuaWRvU3Bhbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gY29udGVuaWRvU3Bhbi5nZXRBdHRyaWJ1dGUoXCJkYXRhLXBhdGhcIik7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBwYXJzZUludChjb250ZW5pZG9TcGFuLmdldEF0dHJpYnV0ZShcImRhdGEtbGluZVwiKSB8fCBcIjBcIiwgMTApO1xuICAgICAgICB0aGlzLm5hdmVnYXJBVGFyZWFDb25SZXNhbHRhZG8ocGF0aCwgbGluZSwgdGFyZWEudGV4dG9PcmlnaW5hbCB8fCB0YXJlYS50ZXh0bywgdHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGV4dG9EaXYuYXBwZW5kQ2hpbGQoY29udGVuaWRvU3Bhbik7XG4gICAgdGFyZWFEaXYuYXBwZW5kQ2hpbGQodGV4dG9EaXYpO1xuICAgIFxuICAgIC8vIE1ldGFkYXRvc1xuICAgIGNvbnN0IG1ldGFkYXRvc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWV0YWRhdG9zRGl2LmNsYXNzTmFtZSA9IFwidGFyZWEtbWV0YWRhdG9zXCI7XG4gICAgXG4gICAgLy8gVWJpY2FjaVx1MDBGM24gKHJ1dGEgeSBsXHUwMEVEbmVhKVxuICAgIGNvbnN0IHViaWNhY2lvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdWJpY2FjaW9uRGl2LmNsYXNzTmFtZSA9IFwidGFyZWEtbWV0YS1pdGVtXCI7XG4gICAgXG4gICAgY29uc3QgaWNvbm9VYmljYWNpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBpY29ub1ViaWNhY2lvbi5jbGFzc05hbWUgPSBcIm1ldGEtaWNvblwiO1xuICAgIGljb25vVWJpY2FjaW9uLnRleHRDb250ZW50ID0gXCJcdUQ4M0RcdURDQ0RcIjtcbiAgICB1YmljYWNpb25EaXYuYXBwZW5kQ2hpbGQoaWNvbm9VYmljYWNpb24pO1xuICAgIFxuICAgIGNvbnN0IHZhbG9yVWJpY2FjaW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgXG4gICAgLy8gU2kgdGVuZW1vcyBuXHUwMEZBbWVybyBkZSBsXHUwMEVEbmVhLCBtb3N0cmFybG9cbiAgICBpZiAodGFyZWEubGluZUluZm8/Lm51bWVybykge1xuICAgICAgICB2YWxvclViaWNhY2lvbi50ZXh0Q29udGVudCA9IGBMXHUwMEVEbmVhICR7dGFyZWEubGluZUluZm8ubnVtZXJvfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFsb3JVYmljYWNpb24udGV4dENvbnRlbnQgPSBcIlBvc2ljaVx1MDBGM24gZGVzY29ub2NpZGFcIjtcbiAgICB9XG4gICAgXG4gICAgdWJpY2FjaW9uRGl2LmFwcGVuZENoaWxkKHZhbG9yVWJpY2FjaW9uKTtcbiAgICBtZXRhZGF0b3NEaXYuYXBwZW5kQ2hpbGQodWJpY2FjaW9uRGl2KTtcbiAgICBcbiAgICAvLyBTaSB0aWVuZSBldGlxdWV0YXMgbW9zdHJhcmxhcyAoYXVucXVlIG5vIHNlYW4gZGUgbGFzIGNhdGVnb3JcdTAwRURhcyBidXNjYWRhcylcbiAgICBpZiAodGFyZWEuZXRpcXVldGFzLnRvZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgZXRpcXVldGFzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZXRpcXVldGFzRGl2LmNsYXNzTmFtZSA9IFwidGFyZWEtbWV0YS1pdGVtXCI7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpY29ub0V0aXF1ZXRhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICBpY29ub0V0aXF1ZXRhcy5jbGFzc05hbWUgPSBcIm1ldGEtaWNvblwiO1xuICAgICAgICBpY29ub0V0aXF1ZXRhcy50ZXh0Q29udGVudCA9IFwiXHVEODNDXHVERkY3XHVGRTBGXCI7XG4gICAgICAgIGV0aXF1ZXRhc0Rpdi5hcHBlbmRDaGlsZChpY29ub0V0aXF1ZXRhcyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB2YWxvckV0aXF1ZXRhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICB2YWxvckV0aXF1ZXRhcy50ZXh0Q29udGVudCA9IHRhcmVhLmV0aXF1ZXRhcy50b2Rhcy5qb2luKCcgJyk7XG4gICAgICAgIGV0aXF1ZXRhc0Rpdi5hcHBlbmRDaGlsZCh2YWxvckV0aXF1ZXRhcyk7XG4gICAgICAgIFxuICAgICAgICBtZXRhZGF0b3NEaXYuYXBwZW5kQ2hpbGQoZXRpcXVldGFzRGl2KTtcbiAgICB9XG4gICAgXG4gICAgdGFyZWFEaXYuYXBwZW5kQ2hpbGQobWV0YWRhdG9zRGl2KTtcbiAgICBcbiAgICByZXR1cm4gdGFyZWFEaXY7XG59XG5cbi8qKlxuICogRXhwYW5kZSB0b2RvcyBsb3MgZ3J1cG9zIGRlIHRhcmVhc1xuICogQHBhcmFtIGNvbnRhaW5lciBDb250ZW5lZG9yIHByaW5jaXBhbFxuICovXG5leHBhbmRpclRvZGFzTGFzVGFyZWFzKGNvbnRhaW5lcikge1xuICAgIGNvbnN0IGdydXBvcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZWEtZ3JvdXAnKTtcbiAgICBcbiAgICBncnVwb3MuZm9yRWFjaChncnVwbyA9PiB7XG4gICAgICAgIGNvbnN0IHRvZ2dsZSA9IGdydXBvLnF1ZXJ5U2VsZWN0b3IoJy50YXJlYS1ncm91cC10b2dnbGUnKTtcbiAgICAgICAgY29uc3QgbGlzdCA9IGdydXBvLnF1ZXJ5U2VsZWN0b3IoJy50YXJlYS1saXN0Jyk7XG4gICAgICAgIFxuICAgICAgICB0b2dnbGUuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICB0b2dnbGUudGV4dENvbnRlbnQgPSBcIlx1MjVCQ1wiO1xuICAgICAgICBsaXN0LmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDb2xhcHNhIHRvZG9zIGxvcyBncnVwb3MgZGUgdGFyZWFzXG4gKiBAcGFyYW0gY29udGFpbmVyIENvbnRlbmVkb3IgcHJpbmNpcGFsXG4gKi9cbmNvbGFwc2FyVG9kYXNMYXNUYXJlYXMoY29udGFpbmVyKSB7XG4gICAgY29uc3QgZ3J1cG9zID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJlYS1ncm91cCcpO1xuICAgIFxuICAgIGdydXBvcy5mb3JFYWNoKGdydXBvID0+IHtcbiAgICAgICAgY29uc3QgdG9nZ2xlID0gZ3J1cG8ucXVlcnlTZWxlY3RvcignLnRhcmVhLWdyb3VwLXRvZ2dsZScpO1xuICAgICAgICBjb25zdCBsaXN0ID0gZ3J1cG8ucXVlcnlTZWxlY3RvcignLnRhcmVhLWxpc3QnKTtcbiAgICAgICAgXG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgICAgIHRvZ2dsZS50ZXh0Q29udGVudCA9IFwiXHUyNUI2XCI7XG4gICAgICAgIGxpc3QuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICAgIH0pO1xufVxuXG5cbi8vLS0gVGFyZWFzIEluYm94XG5cbi8vIERlbGVnYWNpXHUwMEYzbiBwYXJhIG1vc3RyYXJUYXJlYXNJbmJveFxuYXN5bmMgbW9zdHJhclRhcmVhc0luYm94KGR2OiBhbnkpOiBQcm9taXNlPEhUTUxFbGVtZW50PiB7XG4gICAgcmV0dXJuIHRoaXMudGFyZWFzSW5ib3hDb21wb25lbnQuZ2VuZXJhcihkdik7XG4gIH1cblxuICBcbiAgICAvKipcbiAgICAgKiBNdWVzdHJhIHVuIGRhc2hib2FyZCBkZSBwcm95ZWN0b3MgR1REIHkgc3VzIGNhbXBhXHUwMEYxYXMgYXNvY2lhZGFzXG4gICAgICogQHBhcmFtIGR2IE9iamV0byBkYXRhdmlldyBwYXJhIGFjY2VkZXIgYSBzdXMgZnVuY2lvbmVzXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3BjaW9uZXMgZGUgY29uZmlndXJhY2lcdTAwRjNuIChtb2RvIGRlIHZpc3VhbGl6YWNpXHUwMEYzbilcbiAgICAgKiBAcmV0dXJucyBFbGVtZW50byBIVE1MIGNvbiBlbCBkYXNoYm9hcmQgaW50ZXJhY3Rpdm9cbiAgICAgKi9cbiAgICBhc3luYyBtb3N0cmFyRGFzaGJvYXJkUHJveWVjdG9zQ2FtcGFuYXMoZHY6IGFueSwgb3B0aW9uczoge1xuICAgICAgICBtb2RvPzogJ2hpdHMnIHwgJ2ZlY2hhcycsXG4gICAgICAgIHByb3llY3RvQWN0dWFsUGF0aD86IHN0cmluZ1xuICAgIH0gPSB7fSk6IFByb21pc2U8SFRNTEVsZW1lbnQ+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJveWVjdG9DYW1wYW5hc0NvbXBvbmVudC5nZW5lcmFyKGR2LCBvcHRpb25zKTtcbiAgICB9XG4gIH0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ5OjQzXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbi8vaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBtb2RhbF9jYW1iaW9IRiB9IGZyb20gXCIuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvY2FtYmlvSEZcIjtcblxuZXhwb3J0IGNsYXNzIFlBTUxVcGRhdGVyQVBJIHtcbiAgICAvL3ByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogb2JqZWN0OyAvLyBBc3VtaWVuZG8gcXVlIGVzIHVuIHN0cmluZ1xuICAgIHByaXZhdGUgdHA6IG9iamVjdDtcbiAgICBwcml2YXRlIHBhdGhDYW1wb3M6IHN0cmluZzsgXG4gICAgcHJpdmF0ZSBub3RhOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBpbmZvTm90YTogb2JqZWN0O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIEluaWNpYWxpemEgZm9sZGVyIGUgaW5kaWNlIGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvcyBvIGxcdTAwRjNnaWNhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgdGhpcy5pbmZvTm90YSA9IHt9O1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgdGhpcy50cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBhY3R1YWxpemFyTm90YShpbmZvTm90YTogYW55LCBjYW1wb3M6IGFueSkge1xuICAgICAgIFxuICAgICAgICAvL2xldCBub3RhID0ge307IC8vIEluaWNpYWxpemEgZWwgb2JqZXRvIG5vdGEuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvTm90YSwgaW5mb05vdGEpOyBcbiAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBEaXZpZGUgZWwgY2FtcG8gZW4gZnVuY2lcdTAwRjNuIGRlbCBzXHUwMEVEbWJvbG8gXCJfXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGVzID0gY2FtcG8uc3BsaXQoJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhbXBvTmFtZSwgZnVuY3Rpb25OYW1lO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldHJvID0gbnVsbDsgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGhheSB1biBzXHUwMEVEbWJvbG8gXCJfXCIsIHVzYSBsYSBwYXJ0ZSBhbnRlcyBkZSBcIl9cIiBwYXJhIGVsIG5vbWJyZSBkZSBsYSBmdW5jaVx1MDBGM24sXG4gICAgICAgICAgICAgICAgICAgIC8vIHkgbGEgcGFydGUgZGVzcHVcdTAwRTlzIGRlIFwiX1wiIGNvbW8gcGFyXHUwMEUxbWV0cm8uXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gYGdldCR7cGFydGVzWzBdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcGFydGVzWzBdLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wb05hbWUgPSBwYXJ0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0cm8gPSBwYXJ0ZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYW1wb05hbWUgPSBwYXJ0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSAgYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuaW5mb05vdGEuZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZhbG9yQWN0dWFsQ2FtcG8gPSBtZXRhZGF0YVtjYW1wb05hbWVdIHx8IFwiU2luIGRlZmluaXJcIjtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYS4gU2kgZXhpc3RlIHVuIHBhclx1MDBFMW1ldHJvLCBwXHUwMEUxc2FsbyBhIGxhIGZ1bmNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbWV0cm8gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFbY2FtcG9OYW1lXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXShwYXJhbWV0cm8sdmFsb3JBY3R1YWxDYW1wbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb05hbWVdID0gYXdhaXQgdGhpc1tmdW5jdGlvbk5hbWVdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBmdW5jaVx1MDBGM24gJHtmdW5jdGlvbk5hbWV9IG5vIGVzdFx1MDBFMSBkZWZpbmlkYS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hbmVqYSBlbCBjYXNvIGVuIHF1ZSBsYSBmdW5jaVx1MDBGM24gbm8gZXN0XHUwMEU5IGRlZmluaWRhLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgbm90YVxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRWplY3V0YSB0dSBjXHUwMEYzZGlnbyBhcXVcdTAwRUQgc2kgZWwgb2JqZXRvIGBub3RhYCB0aWVuZSBtXHUwMEUxcyBkZSB1bmEgcHJvcGllZGFkXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyh0aGlzLm5vdGEsIGluZm9Ob3RhLmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy9ObyBzZSBlbmNvbnRyYXJvbiBjYW1wb3MgcGFyYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7IC8vIFJldG9ybmEgZWwgb2JqZXRvIG5vdGEgY29uIHRvZGFzIGxhcyBwcm9waWVkYWRlcyBhZ3JlZ2FkYXMuXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGFyY2hpdmFyTm90YShpbmZvTm90YTogYW55LCBjYW1wb3M6IGFueSkge1xuICAgICAgICBcbiAgICAgICAgbGV0IG5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YSBlbCBvYmpldG8gbm90YS5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9Ob3RhLCBpbmZvTm90YSk7IFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGFyYSBjb25zdHJ1aXIgZWwgbm9tYnJlIGRlIGxhIGZ1bmNpXHUwMEYzbiAocC4gZWouLCBcImdldElkXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYSB5IGFzaWduYSBlbCByZXN1bHRhZG8gYWwgY2FtcG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIG5vdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RhW2NhbXBvXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgYXNpZ25hciB1biB2YWxvciBwb3IgZGVmZWN0byBhIG5vdGFbY2FtcG9dIG8gc2ltcGxlbWVudGUgY29udGludWFyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgbm90YVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5vdGEuZXN0YWRvID0gXCJcdUQ4M0RcdUREMzVcIjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobm90YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFamVjdXRhIHR1IGNcdTAwRjNkaWdvIGFxdVx1MDBFRCBzaSBlbCBvYmpldG8gYG5vdGFgIHRpZW5lIG1cdTAwRTFzIGRlIHVuYSBwcm9waWVkYWRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKG5vdGEsIGluZm9Ob3RhLmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy9ObyBzZSBlbmNvbnRyYXJvbiBjYW1wb3MgcGFyYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cblxuXG4gICAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyhub3RhLCBydXRhKSB7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YSk7XG4gICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJdGVyYXIgc29icmUgY2FkYSBwcm9waWVkYWQgZGVsIG9iamV0byAnbm90YSdcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbXBvIGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShjYW1wbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gZW4gZWwgZnJvbnRtYXR0ZXIgY29uIGVsIHZhbG9yIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltjYW1wb10gPSBub3RhW2NhbXBvXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiB0aGUgZGF0ZSBtb2R1bGVcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoZmxhZywgYWN0dWFsKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICB9XG5cbiAgICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICAgICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgICB9XG5cblxuICAgIGFzeW5jIGdldEhvcmFGaW5hbChwYXJhbWV0cm8sIGFjdHVhbCl7XG4gICAgICAgIC8vIEVzdGEgZnVuY2lcdTAwRjNuIHNvbG8gcmVjaWJlIGVuIGVsIHBhclx1MDBFMW1ldHJvIGxhIGhvcmEgZmluYWwgbnVldmEsIHBhcmEgYWN0dWFsaXphciBlbCB2YWxvci5cbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT09IHVuZGVmaW5lZCl7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuICAgICAgICB9ZWxzZXsgXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1ldHJvO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGllbXBvVHJhYmFqYWRvKHBhcmFtZXRybywgYWN0dWFsKXtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgXG4gICAgICAgIGxldCBob3JhSW5pY2lvU3RyID0gdGhpcy5pbmZvTm90YS5ob3JhSW5pY2lvO1xuICAgICAgICBsZXQgY2llcnJlO1xuICAgICAgICAvLyBTdXBvbmllbmRvIHF1ZSBlbCBmb3JtYXRvIGVzIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIgeSBxdWllcmVzIGNvbnZlcnRpcmxvIGEgdW4gZm9ybWF0byByZWNvbm9jaWRvIHBvciBEYXRlXG4gICAgICAgIC8vIFByaW1lcm8sIGVsaW1pbmEgbGEgcGFydGUgZGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYSwgeWEgcXVlIERhdGUoKSBubyBsYSBuZWNlc2l0YVxuICAgICAgICBsZXQgW2ZlY2hhLCAsIGhvcmFdID0gaG9yYUluaWNpb1N0ci5zcGxpdCgnICcpO1xuICAgICAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7ZmVjaGF9VCR7aG9yYX1gO1xuICAgICAgICAvLyBDcmVhciBvYmpldG9zIERhdGVcbiAgICAgICAgbGV0IGhvcmFJbmljaW8gPSBuZXcgRGF0ZShmZWNoYUhvcmFJU08pO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7ICAgIFxuICAgICAgICBjaWVycmUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IFtmZWNoYUNpZXJyZSwgLGhvcmFDaWVycmVdID0gcGFyYW1ldHJvLnNwbGl0KCcgJyk7ICAgXG4gICAgICAgICAgICBsZXQgZmVjaGFIb3JhQ2llcnJlSVNPID0gYCR7ZmVjaGFDaWVycmV9VCR7aG9yYUNpZXJyZX1gO1xuICAgICAgICAgICAgY2llcnJlID0gbmV3IERhdGUoZmVjaGFIb3JhQ2llcnJlSVNPKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGFyIGxhIGRpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgICAgIGxldCBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3MgPSBjaWVycmUgLSBob3JhSW5pY2lvO1xuICAgICAgICByZXR1cm4gZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0U2VjSWQoZmxhZywgYWN0dWFsKXtcblxuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXR1bG8oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IHRpdHVsbyA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChgVGl0dWxvIGRlIGVzdGUoYSkgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLm5hbWV9YCwgYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgbGV0IGRlc2NyaXBjaW9uO1xuICAgICAgICBzd2l0Y2ggKGZsYWcpIHtcbiAgICAgICAgICAgIGNhc2UgXCJSZWdpc3Ryb1RpZW1wb1wiOlxuICAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkRldGFsbGUgZGVsIFJlZ2lzdHJvIFRpZW1wbzpcIiwgYWN0dWFsLCBmYWxzZSwgdHJ1ZSApICAgXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGRlc2NyaXBjaW9uID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcyhmbGFnLCBhY3R1YWwpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgICAgIFxuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgLy8gMCAtPiBOb21icmUsIDEgLT4gdHlwZSArIE5vbWJyZVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCBzaUFzdW50bywgbm9tYnJlOyBcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpeyBcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTsgXG4gICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvID0ge307XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLnNpQXN1bnRvID0gc2lBc3VudG87XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLm5vbWJyZSA9IG5vbWJyZTsgICAgXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZX1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb24sIHRhZ0NsYXNpZmljYWNpb24sIGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWDtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb249PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIlx0XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIGxldCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBsZXQgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7Y2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbn07XG4gICAgfVxuICAgIC8vIC0+XG5cbiAgICBhc3luYyBnZXRFc3RhZG8ocGFyYW1ldHJvLCBhY3R1YWwpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IGNhbXBvO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7XG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcblx0ICAgIGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gSW5mb3JtYWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REZFMiAtPiBGaW5hbGl6YWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gZWplY3VjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgbnVldm8gZXN0YWRvOlwiKTtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjYW1wbyA9IHBhcmFtZXRybztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGNhbXBvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEZpbGVuYW1lKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50aXR1bG99L2luZGV4JHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5maWxlTmFtZSA9IChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgICAgICAgICBicmVhazsgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5maWxlTmFtZTtcbiAgICB9XG5cbiAgICBhc3luYyBtb2RhbENhbWJpb0hGKG5vdGEpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IG1vZGFsID0gbmV3IG1vZGFsX2NhbWJpb0hGKHRoaXMucGx1Z2luLCBub3RhKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cbiAgIFxuXG4gIH1cbiAgIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL21vZGFscy9jYW1iaW9IRi50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL21vZGFsc1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTIzIDE3OjIzOjEwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0NjoyMlxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IE1vZGFsLCBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBZQU1MVXBkYXRlckFQSSB9IGZyb20gJy4uLy4uL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSSc7XG5cbmV4cG9ydCBjbGFzcyBtb2RhbF9jYW1iaW9IRiBleHRlbmRzIE1vZGFsIHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBhcHA6IEFwcDtcbiAgICBob3JhRmluYWxJbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxJbmJveFwiKTtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmZpbGUuZmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgXCJBY3RpdmlkYWQgc2luIGFsaWFzXCI7XG4gICAgICAgIC8vIENvbnZlcnRpciBob3JhSW5pY2lvU3RyIGEgZm9ybWF0byBcIllZWVktTU0tRERUSEg6TU1cIiBwYXJhIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnN0IGhvcmFGaW5TdHIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmhvcmFGaW5hbCA/IHdpbmRvdy5tb21lbnQobWV0YWRhdGEuZnJvbnRtYXR0ZXIuaG9yYUZpbmFsLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpIDogJyc7XG5cbiAgICAgICAgLy8gQ29uZmlndXJhIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbCB5IG11ZXN0cmEgZWwgYWxpYXMgZGUgbGEgdGFyZWFcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYENhbWJpbyBob3JhIGNpZXJyZSBkZSByZWdpc3Ryby5gIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUYXJlYTogXCIke2FsaWFzZXNbMF19XCJgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5wdXQgcGFyYSBsYSBob3JhIGRlIGluaWNpbyBjb24gdGlwbyBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdIb3JhIGRlIGNpZXJyZSByZWdpc3RybzonIH0pO1xuICAgICAgICB0aGlzLmhvcmFGaW5hbElucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdkYXRldGltZS1sb2NhbCcsXG4gICAgICAgICAgICB2YWx1ZTogaG9yYUZpblN0clxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBjYW1iaW9zXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0d1YXJkYXIgY2FtYmlvcycgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZ3VhcmRhckNhbWJpb3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBndWFyZGFyQ2FtYmlvcygpIHtcbiAgICAgICAgY29uc3QgbnVldmFIb3JhRmluYWxMb2NhbCA9IHRoaXMuaG9yYUZpbmFsSW5wdXQudmFsdWU7XG4gICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBsYSBudWV2YSBob3JhIHRpZW5lIHZhbG9yIGFudGVzIGRlIGludGVudGFyIGZvcm1hdGVhclxuICAgICAgICBpZiAoIW51ZXZhSG9yYUZpbmFsTG9jYWwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW5hIGhvcmEgZGUgY2llcnJlLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBcIllZWVktTU0tRERUSEg6TU1cIiBhIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCJcbiAgICAgICAgY29uc3QgbnVldmFIb3JhRmluYWwgPSB3aW5kb3cubW9tZW50KG51ZXZhSG9yYUZpbmFsTG9jYWwpLmZvcm1hdChcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAvLyBFamVjdXRhciBZQU1MIFVwZGF0ZVxuICAgICAgICAgICAgbGV0IGNhbXBvcyA9IFtcImZlY2hhXCIsYGhvcmFGaW5hbF8ke251ZXZhSG9yYUZpbmFsfWAsYHRpZW1wb1RyYWJhamFkb18ke251ZXZhSG9yYUZpbmFsfWAsIFwiZXN0YWRvX1x1RDgzRFx1REQzNVwiXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hY3R1YWxpemFyTm90YSh0aGlzLmZpbGUsIGNhbXBvcyk7XG5cblxuXG5cbiAgICAgICAgICAgIC8vIENlcnJhciBlbCBtb2RhbCBkZXNwdVx1MDBFOXMgZGUgZ3VhcmRhciBsb3MgY2FtYmlvc1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhvcmEgZGUgRmluYWxpemFjaVx1MDBGM24gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhciBjYW1iaW9zIGVuIGxhIG5vdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBndWFyZGFyIGxvcyBjYW1iaW9zIGVuIGxhIG5vdGEuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51RGlhcmlvQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDcgMTY6MDk6MTZcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ4OjUwXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHtOb3RpY2UsIFRGaWxlfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7RGF0ZVRpbWUsIER1cmF0aW9ufSBmcm9tICdsdXhvbidcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tICcuL3N0YXJ0ZXJBUEknO1xuaW1wb3J0IHsgdXRpbHNBUEkgfSBmcm9tICcuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEknO1xuaW1wb3J0IHsgcmVnaXN0cm9UaWVtcG9BUEkgfSBmcm9tICcuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUEknO1xuXG5leHBvcnQgY2xhc3MgbWVudUhveUFQSSB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDsgIC8vIEd1YXJkYSB1bmEgcmVmZXJlbmNpYSBhIGxhIGFwbGljYWNpXHUwMEYzbiBPYnNpZGlhbiBwYXJhIGFjY2VkZXIgYSBzdXMgbVx1MDBFOXRvZG9zIHkgcHJvcGllZGFkZXNcbiAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gaW5pY2lhbCBcIk1lblx1MDBGQSBob3lcIlxuICAgIGFzeW5jIG1vc3RyYXJNZW51KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICAgICAgY29uc3QgYm90b25NZW51SG95ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9ICdNZW5cdTAwRkEgaG95JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uTWVudUhveSk7XG5cbiAgICAgICAgYm90b25NZW51SG95Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbmVzKGR2KTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gbW9kaWZpY2FkbyBwYXJhIGFkYXB0YXJzZSBhbCBjb250ZXh0byBkZWwgcGx1Z2luXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uZXMoZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3IgcGFyYSByZW1vdmVyIGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBXG5cbiAgICAgICAgY29uc3QgYm90b25lcyA9IFtcbiAgICAgICAgICAgIFwiSFx1MDBFMWJpdG9zXCIsIFwiQmFsYW5jZVwiLCBcIlJlZ2lzdHJvIGRlIFRhcmVhc1wiLCBcIk5vdGFzIGRcdTAwRURhXCIsIFwiUGVyc29uYWxlc1wiXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIGNhZGEgYm90XHUwMEYzblxuICAgICAgICBib3RvbmVzLmZvckVhY2godGV4dG9Cb3RvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYm90b24udGV4dENvbnRlbnQgPSB0ZXh0b0JvdG9uO1xuICAgICAgICAgICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dG9Cb3Rvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdCYWxhbmNlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdIXHUwMEUxYml0b3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyRm9ybXVsYXJpb0hhYml0b3MoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2lzdHJvIGRlIFRhcmVhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvblJlZ2lzdHJvVGFyZWFzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdOb3RhcyBkXHUwMEVEYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbmVzTm90YXNEXHUwMEVEYShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUGVyc29uYWxlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbmVzTm90YXNQZXJzb25hbGVzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGV4dG9Cb3Rvbn0gcHJlc2lvbmFkby5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFncmVnYXIgZWwgYm90XHUwMEYzbiBkZSByZWNhcmdhIHkgc3UgbFx1MDBGM2dpY2EgKEVqZW1wbG8gYWRhcHRhZG8pXG4gICAgYWdyZWdhckJvdG9uU2FsaXIoZHYpIHtcbiAgICAgICAgY29uc3QgYm90b25SZWNhcmdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uUmVjYXJnYS50ZXh0Q29udGVudCA9ICdTYWxpcic7XG4gICAgICAgIGJvdG9uUmVjYXJnYS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyTWVudShkdik7IC8vIFJlc3RhYmxlY2VyIGEgbGEgdmlzdGEgZGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBIGluaWNpYWxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJvdG9uUmVjYXJnYTtcbiAgICB9XG5cbiAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhY3R1YWxpemFyIGNhbXBvcyBZQU1MXG4gICAgIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHMoZmlsZVBhdGgsIFlBTUxmaWVsZCwgdmFsb3IpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFJ1dGEgYWwgYXJjaGl2byBxdWUgc2UgdmEgYSBtb2RpZmljYXJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBMZWVyIHkgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlciB1c2FuZG8gcHJvY2Vzc0Zyb250TWF0dGVyXG4gICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBmcm9udG1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgdmFsb3IgZGVsIGNhbXBvIGVzcGVjaWZpY2Fkb1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJbWUFNTGZpZWxkXSA9IHZhbG9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wY2lvbmFsOiBOb3RpZmljYXIgYWwgdXN1YXJpbyBxdWUgbGEgYWN0dWFsaXphY2lcdTAwRjNuIGZ1ZSBleGl0b3NhXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnWUFNTCBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0by4nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvXCIsIGVycik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBhbCBhY3R1YWxpemFyIGVsIFlBTUwuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbChkdikge1xuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIFxuICAgICAgICAvLyBNZW5zYWplIGluaWNpYWxcbiAgICAgICAgY29uc3QgbWVuc2FqZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIG1lbnNhamUudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZWwgYmFsYW5jZSBkZSB0dSB2aWRhIGhveSc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICBcbiAgICAgICAgY29uc3QgaW5zdHJ1Y2Npb25lcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgaW5zdHJ1Y2Npb25lcy50ZXh0Q29udGVudCA9ICdFdmFsXHUwMEZBYSBkZSAxIGEgNSBjYWRhIFx1MDBFMXJlYTonO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoaW5zdHJ1Y2Npb25lcyk7XG4gICAgXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgYSBldmFsdWFyXG4gICAgICAgIGNvbnN0IGFyZWFzID0gW1xuICAgICAgICAgICAgXCJQcm9kdWN0aXZpZGFkXCIsIFwiRXNwaXJpdHVhbFwiLCBcIlNhbHVkXCIsIFwiUnV0aW5hc1wiLFxuICAgICAgICAgICAgXCJWaWRhIFNvY2lhbFwiLCBcIkZhbWlsaWFyXCIsIFwiQXByZW5kaXphamVzXCIsIFwiQ3JlYXRpdmlkYWRcIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBPYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsIHkgc3UgbWV0YWRhdGFcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgbWV0YWRhdGE7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhciBpbnB1dCByYW5nZSBwYXJhIGNhZGEgXHUwMEUxcmVhXG4gICAgICAgIGFyZWFzLmZvckVhY2goYXJlYSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBtZXRhZGF0YSAmJiBtZXRhZGF0YVtzYWZlTmFtZV0gPyBtZXRhZGF0YVtzYWZlTmFtZV0gOiAwO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgY29udGVuZWRvckFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmNsYXNzTGlzdC5hZGQoJ2FyZWEtZXZhbHVhY2lvbicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBhcmVhICsgJzogJztcbiAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBzYWZlTmFtZTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAncmFuZ2UnO1xuICAgICAgICAgICAgaW5wdXQuaWQgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm1pbiA9ICcxJztcbiAgICAgICAgICAgIGlucHV0Lm1heCA9ICc1JztcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gY3VycmVudFZhbC50b1N0cmluZygpOyAvLyBVc2FyIHZhbG9yIGFjdHVhbCBvIDBcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHZhbG9yTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIE1vc3RyYXIgZWwgdmFsb3IgYWN0dWFsIGFsIGxhZG9cbiAgICBcbiAgICAgICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIEFjdHVhbGl6YXIgZWwgdmFsb3IgbW9zdHJhZG8gYWwgbW92ZXIgZWwgcmFuZ2VcbiAgICBcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKHZhbG9yTGFiZWwpO1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbmVkb3JBcmVhKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBndWFyZGFyIGxvcyB2YWxvcmVzXG4gICAgICAgIGNvbnN0IGJvdG9uR3VhcmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbkd1YXJkYXIudGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGJvdG9uR3VhcmRhci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNhZmVOYW1lKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxvciA9IHBhcnNlSW50KGlucHV0RWxlbWVudC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMoZmlsZS5wYXRoLCBzYWZlTmFtZSwgdmFsb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdCYWxhbmNlcyBhY3R1YWxpemFkb3MgY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIHB1ZG8gb2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uR3VhcmRhcik7XG4gICAgXG4gICAgICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBzYWxpciBzaSBuZWNlc2FyaW9cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG5cbiAgICBhc3luYyBtb3N0cmFyRm9ybXVsYXJpb0hhYml0b3MoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhhYml0b3MgPSBbXG4gICAgICAgICAgICBcIkNsdWIgNWFtXCIsXG4gICAgICAgICAgICBcIlJlZ2lzdHJvIEFrXHUwMEUxc2hpa29cIixcbiAgICAgICAgICAgIFwiR2ltbmFzaW9cIixcbiAgICAgICAgICAgIFwiQ29tZXIgU2FsdWRhYmxlXCIsXG4gICAgICAgICAgICBcIkxlZXIgbGlicm9cIixcbiAgICAgICAgICAgIFwiRXNjcmliaXIgYml0XHUwMEUxY29yYSBlbCBtaXNtbyBkXHUwMEVEYVwiLFxuICAgICAgICAgICAgXCJDcmVhciBwbGFuIGRcdTAwRURhIHNpZ3VpZW50ZVwiLFxuICAgICAgICAgICAgXCJNZSBmdVx1MDBFRCBhIGRvcm1pciBhbnRlcyBkZSBsYXMgMTA6MzBwbVwiXG4gICAgICAgIF07XG4gICAgXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNhcmdhciB5IG1hcmNhciBjaGVja2JveGVzIHNlbGVjY2lvbmFkb3MgcHJldmlhbWVudGVcbiAgICAgICAgY29uc3QgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGFyY2hpdm8gcGFyYSBvYnRlbmVyIGVsIGNhbXBvICdoYWJpdG9zJyBkZWwgWUFNTFxuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGFiaXRzID0gZnJvbnRNYXR0ZXI/LmhhYml0b3MgfHwgW107XG4gICAgXG4gICAgICAgICAgICBoYWJpdG9zLmZvckVhY2goaGFiaXRvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guaWQgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3gubmFtZSA9ICdoYWJpdG9zJztcbiAgICAgICAgICAgICAgICBjaGVja2JveC52YWx1ZSA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZXhpc3RpbmdIYWJpdHMuaW5jbHVkZXMoaGFiaXRvKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGhhYml0bztcbiAgICBcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgYXdhaXQgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MoKTtcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgeSBjb25maWd1cmFyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhclxuICAgICAgICBjb25zdCBndWFyZGFyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGd1YXJkYXJCdG4udGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGd1YXJkYXJCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJoYWJpdG9zXCJdOmNoZWNrZWQnKSk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEhhYml0cyA9IGNoZWNrYm94ZXMubWFwKGNoZWNrYm94ID0+IGNoZWNrYm94LnZhbHVlKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gJ2hhYml0b3MnIGVuIGVsIGFyY2hpdm8gWUFNTCB1c2FuZG8gZWwgbVx1MDBFOXRvZG8gdXBkYXRlWUFNTEZpZWxkc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgJ2hhYml0b3MnLCBzZWxlY3RlZEhhYml0cyk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhciBhbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChndWFyZGFyQnRuKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvblJlZ2lzdHJvVGFyZWFzKGR2KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBsZXQgYm90b25lcztcbiAgICAgICAgY29uc3QgdXRpbHNBUEluc3RhbmNlID0gbmV3IHV0aWxzQVBJKHRoaXMucGx1Z2luKTtcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXdhaXQgdXRpbHNBUEluc3RhbmNlLmJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwKVxuICAgICAgICBpZiAoYWN0aXZvIGluc3RhbmNlb2YgVEZpbGUpeyAvLyBWZXJpZmljYSBzaSBoYXkgYWxndW4gYXJjaGl2byBhY3Rpdm8gXG4gICAgICAgICAgICBib3RvbmVzID0gW1wiQ2VycmFkYXMgSG95XCIsIFwiUmVnaXN0cm9zIEhveVwiLCBcIk51ZXZvIFJlZ2lzdHJvIFRpZW1wb1wiLCBcIkNlcnJhciBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhciB5IG1vc3RyYXIgY2FkYSBib3RcdTAwRjNuXG4gICAgICAgIGJvdG9uZXMuZm9yRWFjaCh0ZXh0b0JvdG9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3Rvbi50ZXh0Q29udGVudCA9IHRleHRvQm90b247XG4gICAgICAgICAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0ZXh0b0JvdG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhZGFzIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJDZXJyYWRhc0hveShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVnaXN0cm9zIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhciBSZWdpc3RybyBUaWVtcG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKGFjdGl2byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVldm8gUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZXJBUEluc3RhbmNlID0gbmV3IHN0YXJ0ZXJBUEkodGhpcy5wbHVnaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGFydGVyQVBJbnN0YW5jZS5jcmVhdGVOb3RlKFwiUmVnaXN0cm9UaWVtcG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgYXN5bmMgbW9zdHJhckNlcnJhZGFzSG95KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBmZWNoYUFjdGl2byA9IGFjdGl2bz8uYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdO1xuICAgICAgICBjb25zdCBob3kgPSBuZXcgRGF0ZShmZWNoYUFjdGl2bykuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXJlYXNQcm9tZXNhcyA9IGZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgbGV0IHRhcmVhc0V4dHJhaWRhcyA9IGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBhbGlhcyA9IGZyb250TWF0dGVyPy5hbGlhc2VzID8gZnJvbnRNYXR0ZXIuYWxpYXNlc1swXSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgIGFsaWFzLFxuICAgICAgICAgICAgICAgIHRhcmVhczogdGFyZWFzRXh0cmFpZGFzLmZpbHRlcih0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWNoYVRhcmVhID0gbmV3IERhdGUodGFyZWEuY29tcGxldGlvbkRhdGUpLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZWEuY29tcGxldGVkICYmIHRhcmVhLmNvbXBsZXRpb25EYXRlICYmIGZlY2hhVGFyZWEgPT09IGhveTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgcmVzdWx0YWRvcyA9IGF3YWl0IFByb21pc2UuYWxsKHRhcmVhc1Byb21lc2FzKTtcbiAgICAgICAgbGV0IHRvdGFsVGFyZWFzQ2VycmFkYXMgPSByZXN1bHRhZG9zLnJlZHVjZSgodG90YWwsIHsgdGFyZWFzIH0pID0+IHRvdGFsICsgdGFyZWFzLmxlbmd0aCwgMCk7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBzb2JyZSBlbCBlc3RhZG8gZGUgbGFzIHRhcmVhcyBjZXJyYWRhcyBob3lcbiAgICAgICAgaWYgKHRvdGFsVGFyZWFzQ2VycmFkYXMgPiAwKSB7XG4gICAgICAgICAgICBkdi5oZWFkZXIoMywgYEhveSBzZSBoYW4gY2VycmFkbyAke3RvdGFsVGFyZWFzQ2VycmFkYXN9IHRhcmVhcy5gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIENyZWFyIGxhIHRhYmxhIEhUTUxcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpOyAvLyBBZ3JlZ2FyIHVuYSBjbGFzZSBwYXJhIGxhIHRhYmxhIHBhcmEgZWwgZXN0aWxvXG4gICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbmNhYmV6YWRvcyBkZSB0YWJsYVxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBsZXQgaGVhZGVycyA9IFtcIk5vdGFcIiwgXCJUYXJlYXMgQ2VycmFkYXNcIl07XG4gICAgICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXJUZXh0ID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xuICAgICAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGhlYWRlci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZmlsYXMgZGUgZGF0b3MgYSBsYSB0YWJsYVxuICAgICAgICByZXN1bHRhZG9zLmZvckVhY2goKHtmaWxlUGF0aCwgYWxpYXMsIHRhcmVhc30pID0+IHtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgZGUgZW5sYWNlIGNlbnRyYWRvIHZlcnRpY2FsbWVudGVcbiAgICAgICAgICAgICAgICBsZXQgbGlua0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnaHJlZicsIGBvYnNpZGlhbjovL29wZW4/dmF1bHQ9JHthcHAudmF1bHQuZ2V0TmFtZSgpfSZmaWxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVQYXRoKX1gKTtcbiAgICAgICAgICAgICAgICBhLnRleHRDb250ZW50ID0gYWxpYXMgfHwgZmlsZVBhdGg7XG4gICAgICAgICAgICAgICAgbGlua0NlbGwuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGxpbmtDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIHRhcmVhcyBjZXJyYWRhc1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgICAgIHRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSB0YXJlYS50ZXh0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrc0xpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRhc2tzQ2VsbC5hcHBlbmRDaGlsZCh0YXNrc0xpc3QpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0YXNrc0NlbGwpO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSB0YWJsYSBhbCBjb250ZW5lZG9yIGRlIERhdGF2aWV3XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHYucGFyYWdyYXBoKFwiTm8gaGF5IHRhcmVhcyBjZXJyYWRhcyBob3kuXCIpO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgXG4gICAgZnVuY3Rpb24gZXh0cmFlclRhcmVhcyhjb250ZW5pZG8pIHtcbiAgICAgICAgY29uc3QgdGFyZWFzID0gW107XG4gICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdChcIlxcblwiKTtcbiAgICBcbiAgICAgICAgZm9yIChjb25zdCBsaW5lYSBvZiBsaW5lYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhUmVnZXggPSAvXlxccyotXFxzKlxcWyh4fFh8IClcXF1cXHMqKC4rKSQvO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0YXJlYVJlZ2V4LmV4ZWMobGluZWEpO1xuICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGFkYSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgICAgICBsZXQgdGV4dG9UYXJlYSA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIGxldCBmZWNoYUNvbXBsZXRpdHVkID0gbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVJlZ2V4ID0gL1xcW2NvbXBsZXRpb246OiAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxdLztcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU1hdGNoID0gZmVjaGFSZWdleC5leGVjKHRleHRvVGFyZWEpO1xuICAgICAgICAgICAgICAgIGlmIChmZWNoYU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlY2hhQ29tcGxldGl0dWQgPSBmZWNoYU1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0b1RhcmVhID0gdGV4dG9UYXJlYS5yZXBsYWNlKGZlY2hhUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRhcmVhcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dG9UYXJlYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiBjb21wbGV0YWRhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uRGF0ZTogZmVjaGFDb21wbGV0aXR1ZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGFyZWFzO1xuICAgIH1cbiAgICBcbiAgICBcbn1cblxuXG4gICAgYXN5bmMgbW9zdHJhclJlZ2lzdHJvc0hveShkdikge1xuICAgICAgICAgICAvLyBPYnRlbmVyIGVsIGxlYWYgYWN0aXZvIGFjdHVhbFxuICAgICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuXG4gICAgICAgICAgIC8vIE9idGVuZXIgZWwgcGF0aCBkZWwgVEZpbGUgYXNvY2lhZG8gY29uIGVsIGxlYWYgYWN0aXZvLCBzaSBleGlzdGVcbiAgICAgICAgICAgY29uc3QgY3VycmVudEZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3Py5maWxlPy5wYXRoO1xuICAgXG4gICAgICAgICAgIC8vIENyZWFyIHVuYSBudWV2YSBkaXZpc2lcdTAwRjNuIGEgbGEgZGVyZWNoYSBkZWwgbGVhZiBhY3Rpdm9cbiAgICAgICAgICAgY29uc3QgbmV3TGVhZiA9IGF3YWl0IGFwcC53b3Jrc3BhY2Uuc3BsaXRBY3RpdmVMZWFmKCd2ZXJ0aWNhbCcpO1xuICAgXG4gICAgICAgICAgIC8vIENvbmZpZ3VyYXIgZWwgbnVldm8gbGVhZiBwYXJhIG1vc3RyYXIgdHUgdmlzdGEgcGVyc29uYWxpemFkYVxuICAgICAgICAgICAvLyB5IHBhc2FyIGVsIHBhdGggZGVsIFRGaWxlIGNvbW8gcGFydGUgZGVsIGVzdGFkb1xuICAgIFxuICAgICAgICAgICBhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICB0eXBlOiBcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiLFxuICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKG5ld0xlYWYpOyAgICBcbn1cblxuICAgIGNyZWF0ZUJ1dHRvblRhYmxlKGJ1dHRvblRleHQsIG9uQ2xpY2tDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIG5vIHNlIGVudmlhclx1MDBFMSB1biBmb3JtdWxhcmlvIGFsIGhhY2VyIGNsaWMgZW4gXHUwMEU5bFxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgneW91ci1idXR0b24tY2xhc3MnKTsgLy8gQWdyZWdhIHVuYSBjbGFzZSBwYXJhIGVsIGVzdGlsbyBkZWwgYm90XHUwMEYzbiBzaSBlcyBuZWNlc2FyaW9cblxuICAgICAgICAvLyBBXHUwMEYxYWRlIGVsIGV2ZW50byBkZSBjbGljIGFsIGJvdFx1MDBGM25cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBDcmVhIGxhIG5vdGEgZGVzZGUgZWwgdGVtcGxhdGVyIGRlIFJlZ2lzdHJvVGllbXBvXG4gICAgYXN5bmMgcmV0b21hclRhcmVhKGlkKSB7IFxuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX1JlZ2lzdHJvVGllbXBvYF19L1BsdCAtIFJlZ2lzdHJvVGllbXBvLm1kYDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJSZXRvbWFyIFwiICsgaWQ7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIGxldCBjcmVhck5vdGEgPSB0cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKVxuICAgICAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICB9XG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9ICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLmZpbGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygndHAgY29uIHByb3BpZWRhZGVzIFwiZmlsZVwiIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgICAgIHJldHVybiB0cDtcbiAgICB9XG5cbn1cbiAgICBcbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudVNlbWFuYWxBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wNC0xNSAxNTozNzowOVxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDg6NThcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge05vdGljZSwgVEZpbGV9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHtEYXRlVGltZSwgRHVyYXRpb259IGZyb20gJ2x1eG9uJ1xuaW1wb3J0IHsgc3RhcnRlckFQSSB9IGZyb20gJy4vc3RhcnRlckFQSSc7XG5pbXBvcnQgeyB1dGlsc0FQSSB9IGZyb20gJy4uLy4uL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91dGlsc0FQSSc7XG5pbXBvcnQgeyBWaXN0YVJlc3VtZW5TZW1hbmFsIH0gZnJvbSAnLi4vdmlld3MvdmlzdGFSZXN1bWVuU2VtYW5hbCc7XG5cbmV4cG9ydCBjbGFzcyBtZW51U2VtYW5hbEFQSSB7XG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYXBwID0gcGx1Z2luLmFwcDsgIC8vIEd1YXJkYSB1bmEgcmVmZXJlbmNpYSBhIGxhIGFwbGljYWNpXHUwMEYzbiBPYnNpZGlhbiBwYXJhIGFjY2VkZXIgYSBzdXMgbVx1MDBFOXRvZG9zIHkgcHJvcGllZGFkZXNcbiAgICAgICAgLy8gdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gaW5pY2lhbCBcIk1lblx1MDBGQSBob3lcIlxuICAgIGFzeW5jIG1vc3RyYXJNZW51KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICAgICAgY29uc3QgYm90b25NZW51SG95ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9ICdNZW5cdTAwRkEgU2VtYW5hbCc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgICAgIGJvdG9uTWVudUhveS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lcyhkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIG1vZGlmaWNhZG8gcGFyYSBhZGFwdGFyc2UgYWwgY29udGV4dG8gZGVsIHBsdWdpblxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbmVzKGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yIHBhcmEgcmVtb3ZlciBlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQVxuXG4gICAgICAgIGNvbnN0IGJvdG9uZXMgPSBbXG4gICAgICAgICAgICBcIlJlc3VtZW4gZGlhcmlvXCIsIFwiQWdyYWRlY2ltaWVudG9zXCIsIFwiQ3JlYWRhc1wiLCBcIk1vZGlmaWNhZGFzXCIsIFwieCBGZWNoYVwiLCBcIlRhcmVhcyBDZXJyYWRhc1wiXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIGNhZGEgYm90XHUwMEYzblxuICAgICAgICBib3RvbmVzLmZvckVhY2godGV4dG9Cb3RvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYm90b24udGV4dENvbnRlbnQgPSB0ZXh0b0JvdG9uO1xuICAgICAgICAgICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dG9Cb3Rvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZXN1bWVuIGRpYXJpbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJSZXN1bWVuRGlhcmlvKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBZ3JhZGVjaW1pZW50b3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQWdyYWRlY2ltaWVudG9zKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDcmVhZGFzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckNyZWFkYXMoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01vZGlmaWNhZGFzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhck1vZGlmaWNhZGFzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd4IEZlY2hhJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhcnhGZWNoYShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnVGFyZWFzIENlcnJhZGFzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhclRhcmVhc0NlcnJhZGFzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGV4dG9Cb3Rvbn0gcHJlc2lvbmFkby5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFncmVnYXIgZWwgYm90XHUwMEYzbiBkZSByZWNhcmdhIHkgc3UgbFx1MDBGM2dpY2EgKEVqZW1wbG8gYWRhcHRhZG8pXG4gICAgYWdyZWdhckJvdG9uU2FsaXIoZHYpIHtcbiAgICAgICAgY29uc3QgYm90b25SZWNhcmdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uUmVjYXJnYS50ZXh0Q29udGVudCA9ICdTYWxpcic7XG4gICAgICAgIGJvdG9uUmVjYXJnYS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyTWVudShkdik7IC8vIFJlc3RhYmxlY2VyIGEgbGEgdmlzdGEgZGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBIGluaWNpYWxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJvdG9uUmVjYXJnYTtcbiAgICB9XG5cbiAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhY3R1YWxpemFyIGNhbXBvcyBZQU1MXG4gICAgIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHMoZmlsZVBhdGgsIFlBTUxmaWVsZCwgdmFsb3IpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFJ1dGEgYWwgYXJjaGl2byBxdWUgc2UgdmEgYSBtb2RpZmljYXJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBMZWVyIHkgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlciB1c2FuZG8gcHJvY2Vzc0Zyb250TWF0dGVyXG4gICAgICAgICAgICAgICAgdHJ5e1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBmcm9udG1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgdmFsb3IgZGVsIGNhbXBvIGVzcGVjaWZpY2Fkb1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJbWUFNTGZpZWxkXSA9IHZhbG9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIE9wY2lvbmFsOiBOb3RpZmljYXIgYWwgdXN1YXJpbyBxdWUgbGEgYWN0dWFsaXphY2lcdTAwRjNuIGZ1ZSBleGl0b3NhXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnWUFNTCBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0by4nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvXCIsIGVycik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBhbCBhY3R1YWxpemFyIGVsIFlBTUwuJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBtb3N0cmFyUmVzdW1lbkRpYXJpbyhkdil7XG4gICAgICAgIGRlYnVnZ2VyO1xuXG4gICAgICAgIC8vIE9idGVuZXIgZWwgbGVhZiBhY3Rpdm8gYWN0dWFsXG4gICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG5cbiAgICAgICAgLy8gT2J0ZW5lciBlbCBwYXRoIGRlbCBURmlsZSBhc29jaWFkbyBjb24gZWwgbGVhZiBhY3Rpdm8sIHNpIGV4aXN0ZVxuICAgICAgICBjb25zdCBjdXJyZW50RmlsZVBhdGggPSBhY3RpdmVMZWFmLnZpZXc/LmZpbGU/LnBhdGg7XG5cbiAgICAgICAgLy8gQ3JlYXIgdW5hIG51ZXZhIGRpdmlzaVx1MDBGM24gYSBsYSBkZXJlY2hhIGRlbCBsZWFmIGFjdGl2b1xuICAgICAgICBjb25zdCBuZXdMZWFmID0gYXdhaXQgYXBwLndvcmtzcGFjZS5zcGxpdEFjdGl2ZUxlYWYoJ3ZlcnRpY2FsJyk7XG5cbiAgICAgICAgLy8gQ29uZmlndXJhciBlbCBudWV2byBsZWFmIHBhcmEgbW9zdHJhciB0dSB2aXN0YSBwZXJzb25hbGl6YWRhXG4gICAgICAgIC8vIHkgcGFzYXIgZWwgcGF0aCBkZWwgVEZpbGUgY29tbyBwYXJ0ZSBkZWwgZXN0YWRvXG4gXG4gICAgICAgIGF3YWl0IG5ld0xlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IFwidmlzdGEtcmVzdW1lbi1zZW1hbmFsXCIsXG4gICAgICAgIH0pO1xuIFxuICAgICAgICBhcHAud29ya3NwYWNlLnJldmVhbExlYWYobmV3TGVhZik7XG4gICAgfVxuICAgIFxuXG5cblxuICAgIC8vIE1cdTAwRTl0b2RvIGFkYXB0YWRvIHBhcmEgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsKGR2KSB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgXG4gICAgICAgIC8vIE1lbnNhamUgaW5pY2lhbFxuICAgICAgICBjb25zdCBtZW5zYWplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICAgICAgbWVuc2FqZS50ZXh0Q29udGVudCA9ICdFdmFsXHUwMEZBYSBlbCBiYWxhbmNlIGRlIHR1IHZpZGEgaG95JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKG1lbnNhamUpO1xuICAgIFxuICAgICAgICBjb25zdCBpbnN0cnVjY2lvbmVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgICAgICBpbnN0cnVjY2lvbmVzLnRleHRDb250ZW50ID0gJ0V2YWxcdTAwRkFhIGRlIDEgYSA1IGNhZGEgXHUwMEUxcmVhOic7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnN0cnVjY2lvbmVzKTtcbiAgICBcbiAgICAgICAgLy8gXHUwMEMxcmVhcyBhIGV2YWx1YXJcbiAgICAgICAgY29uc3QgYXJlYXMgPSBbXG4gICAgICAgICAgICBcIlByb2R1Y3RpdmlkYWRcIiwgXCJFc3Bpcml0dWFsXCIsIFwiU2FsdWRcIiwgXCJSdXRpbmFzXCIsXG4gICAgICAgICAgICBcIlZpZGEgU29jaWFsXCIsIFwiRmFtaWxpYXJcIiwgXCJBcHJlbmRpemFqZXNcIiwgXCJDcmVhdGl2aWRhZFwiXG4gICAgICAgIF07XG4gICAgXG4gICAgICAgIC8vIE9idGVuZXIgZWwgYXJjaGl2byBhY3R1YWwgeSBzdSBtZXRhZGF0YVxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBtZXRhZGF0YTtcbiAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIENyZWFyIGlucHV0IHJhbmdlIHBhcmEgY2FkYSBcdTAwRTFyZWFcbiAgICAgICAgYXJlYXMuZm9yRWFjaChhcmVhID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNhZmVOYW1lID0gYXJlYS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY3VycmVudFZhbCA9IG1ldGFkYXRhICYmIG1ldGFkYXRhW3NhZmVOYW1lXSA/IG1ldGFkYXRhW3NhZmVOYW1lXSA6IDA7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBjb250ZW5lZG9yQXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuY2xhc3NMaXN0LmFkZCgnYXJlYS1ldmFsdWFjaW9uJyk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGFyZWEgKyAnOiAnO1xuICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IHNhZmVOYW1lO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgaW5wdXQudHlwZSA9ICdyYW5nZSc7XG4gICAgICAgICAgICBpbnB1dC5pZCA9IHNhZmVOYW1lO1xuICAgICAgICAgICAgaW5wdXQubmFtZSA9IHNhZmVOYW1lO1xuICAgICAgICAgICAgaW5wdXQubWluID0gJzEnO1xuICAgICAgICAgICAgaW5wdXQubWF4ID0gJzUnO1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBjdXJyZW50VmFsLnRvU3RyaW5nKCk7IC8vIFVzYXIgdmFsb3IgYWN0dWFsIG8gMFxuICAgIFxuICAgICAgICAgICAgY29uc3QgdmFsb3JMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIHZhbG9yTGFiZWwudGV4dENvbnRlbnQgPSBpbnB1dC52YWx1ZTsgLy8gTW9zdHJhciBlbCB2YWxvciBhY3R1YWwgYWwgbGFkb1xuICAgIFxuICAgICAgICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHZhbG9yTGFiZWwudGV4dENvbnRlbnQgPSBpbnB1dC52YWx1ZTsgLy8gQWN0dWFsaXphciBlbCB2YWxvciBtb3N0cmFkbyBhbCBtb3ZlciBlbCByYW5nZVxuICAgIFxuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgICAgICAgICAgY29udGVuZWRvckFyZWEuYXBwZW5kQ2hpbGQodmFsb3JMYWJlbCk7XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGVuZWRvckFyZWEpO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGd1YXJkYXIgbG9zIHZhbG9yZXNcbiAgICAgICAgY29uc3QgYm90b25HdWFyZGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJvdG9uR3VhcmRhci50ZXh0Q29udGVudCA9ICdHdWFyZGFyJztcbiAgICAgICAgYm90b25HdWFyZGFyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBhcmVhIG9mIGFyZWFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhZmVOYW1lID0gYXJlYS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyAvZywgJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2FmZU5hbWUpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbG9yID0gcGFyc2VJbnQoaW5wdXRFbGVtZW50LnZhbHVlLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhmaWxlLnBhdGgsIHNhZmVOYW1lLCB2YWxvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0JhbGFuY2VzIGFjdHVhbGl6YWRvcyBjb24gXHUwMEU5eGl0by4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgcHVkbyBvYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25HdWFyZGFyKTtcbiAgICBcbiAgICAgICAgLy8gQWdyZWdhciBib3RcdTAwRjNuIGRlIHNhbGlyIHNpIG5lY2VzYXJpb1xuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cblxuICAgIGFzeW5jIG1vc3RyYXJGb3JtdWxhcmlvSGFiaXRvcyhkdikge1xuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaGFiaXRvcyA9IFtcbiAgICAgICAgICAgIFwiQ2x1YiA1YW1cIixcbiAgICAgICAgICAgIFwiUmVnaXN0cm8gQWtcdTAwRTFzaGlrb1wiLFxuICAgICAgICAgICAgXCJHaW1uYXNpb1wiLFxuICAgICAgICAgICAgXCJDb21lciBTYWx1ZGFibGVcIixcbiAgICAgICAgICAgIFwiTGVlciBsaWJyb1wiLFxuICAgICAgICAgICAgXCJFc2NyaWJpciBiaXRcdTAwRTFjb3JhIGVsIG1pc21vIGRcdTAwRURhXCIsXG4gICAgICAgICAgICBcIkNyZWFyIHBsYW4gZFx1MDBFRGEgc2lndWllbnRlXCIsXG4gICAgICAgICAgICBcIk1lIGZ1XHUwMEVEIGEgZG9ybWlyIGFudGVzIGRlIGxhcyAxMDozMHBtXCJcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY2FyZ2FyIHkgbWFyY2FyIGNoZWNrYm94ZXMgc2VsZWNjaW9uYWRvcyBwcmV2aWFtZW50ZVxuICAgICAgICBjb25zdCBjYXJnYXJDaGVja2JveGVzU2VsZWNjaW9uYWRvcyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIC8vIExlZXIgZWwgYXJjaGl2byBwYXJhIG9idGVuZXIgZWwgY2FtcG8gJ2hhYml0b3MnIGRlbCBZQU1MXG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIYWJpdHMgPSBmcm9udE1hdHRlcj8uaGFiaXRvcyB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgIGhhYml0b3MuZm9yRWFjaChoYWJpdG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICBjaGVja2JveC50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5pZCA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5uYW1lID0gJ2hhYml0b3MnO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnZhbHVlID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBleGlzdGluZ0hhYml0cy5pbmNsdWRlcyhoYWJpdG8pO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gaGFiaXRvO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBcbiAgICAgICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICBhd2FpdCBjYXJnYXJDaGVja2JveGVzU2VsZWNjaW9uYWRvcygpO1xuICAgIFxuICAgICAgICAvLyBDcmVhciB5IGNvbmZpZ3VyYXIgZWwgYm90XHUwMEYzbiBkZSBndWFyZGFyXG4gICAgICAgIGNvbnN0IGd1YXJkYXJCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgZ3VhcmRhckJ0bi50ZXh0Q29udGVudCA9ICdHdWFyZGFyJztcbiAgICAgICAgZ3VhcmRhckJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT1cImhhYml0b3NcIl06Y2hlY2tlZCcpKTtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSGFiaXRzID0gY2hlY2tib3hlcy5tYXAoY2hlY2tib3ggPT4gY2hlY2tib3gudmFsdWUpO1xuICAgIFxuICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBjYW1wbyAnaGFiaXRvcycgZW4gZWwgYXJjaGl2byBZQU1MIHVzYW5kbyBlbCBtXHUwMEU5dG9kbyB1cGRhdGVZQU1MRmllbGRzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMoZmlsZS5wYXRoLCAnaGFiaXRvcycsIHNlbGVjdGVkSGFiaXRzKTtcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZWwgYm90XHUwMEYzbiBkZSBndWFyZGFyIGFsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGd1YXJkYXJCdG4pO1xuXG4gICAgICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBzYWxpciBzaSBuZWNlc2FyaW9cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuICAgIFxuICAgIC8vIE1cdTAwRTl0b2RvIGFkYXB0YWRvIHBhcmEgbW9zdHJhckJvdG9uQmFsYW5jZVBlcnNvbmFsXG4gICAgYXN5bmMgbW9zdHJhckJvdG9uUmVnaXN0cm9UYXJlYXMoZHYpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGxldCBib3RvbmVzO1xuICAgICAgICBjb25zdCB1dGlsc0FQSW5zdGFuY2UgPSBuZXcgdXRpbHNBUEkodGhpcy5wbHVnaW4pO1xuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhd2FpdCB1dGlsc0FQSW5zdGFuY2UuYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHApXG4gICAgICAgIGlmIChhY3Rpdm8gaW5zdGFuY2VvZiBURmlsZSl7IC8vIFZlcmlmaWNhIHNpIGhheSBhbGd1biBhcmNoaXZvIGFjdGl2byBcbiAgICAgICAgICAgIGJvdG9uZXMgPSBbXCJDZXJyYWRhcyBIb3lcIiwgXCJSZWdpc3Ryb3MgSG95XCIsIFwiTnVldm8gUmVnaXN0cm8gVGllbXBvXCIsIFwiQ2VycmFyIFJlZ2lzdHJvIFRpZW1wb1wiXTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBib3RvbmVzID0gW1wiQ2VycmFkYXMgSG95XCIsIFwiUmVnaXN0cm9zIEhveVwiLCBcIk51ZXZvIFJlZ2lzdHJvIFRpZW1wb1wiXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2VycmFkYXMgSG95JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckNlcnJhZGFzSG95KGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZWdpc3Ryb3MgSG95JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhclJlZ2lzdHJvc0hveShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2VycmFyIFJlZ2lzdHJvIFRpZW1wbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8oYWN0aXZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdOdWV2byBSZWdpc3RybyBUaWVtcG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRlckFQSW5zdGFuY2UgPSBuZXcgc3RhcnRlckFQSSh0aGlzLnBsdWdpbilcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHN0YXJ0ZXJBUEluc3RhbmNlLmNyZWF0ZU5vdGUoXCJSZWdpc3Ryb1RpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGV4dG9Cb3Rvbn0gcHJlc2lvbmFkby5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG5cbiAgICBhc3luYyBtb3N0cmFyQ2VycmFkYXNIb3koZHYpIHtcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIFxuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IGZlY2hhQWN0aXZvID0gYWN0aXZvPy5iYXNlbmFtZS5zcGxpdChcIiBcIilbMF07XG4gICAgICAgIGNvbnN0IGhveSA9IG5ldyBEYXRlKGZlY2hhQWN0aXZvKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBcbiAgICAgICAgbGV0IHRhcmVhc1Byb21lc2FzID0gZmlsZXMubWFwKGFzeW5jIChmaWxlKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBsZXQgdGFyZWFzRXh0cmFpZGFzID0gZXh0cmFlclRhcmVhcyhjb250ZW5pZG8pO1xuICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gZnJvbnRNYXR0ZXI/LmFsaWFzZXMgPyBmcm9udE1hdHRlci5hbGlhc2VzWzBdIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gZmlsZS5wYXRoO1xuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmlsZVBhdGgsXG4gICAgICAgICAgICAgICAgYWxpYXMsXG4gICAgICAgICAgICAgICAgdGFyZWFzOiB0YXJlYXNFeHRyYWlkYXMuZmlsdGVyKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZlY2hhVGFyZWEgPSBuZXcgRGF0ZSh0YXJlYS5jb21wbGV0aW9uRGF0ZSkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJlYS5jb21wbGV0ZWQgJiYgdGFyZWEuY29tcGxldGlvbkRhdGUgJiYgZmVjaGFUYXJlYSA9PT0gaG95O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGxldCByZXN1bHRhZG9zID0gYXdhaXQgUHJvbWlzZS5hbGwodGFyZWFzUHJvbWVzYXMpO1xuICAgICAgICBsZXQgdG90YWxUYXJlYXNDZXJyYWRhcyA9IHJlc3VsdGFkb3MucmVkdWNlKCh0b3RhbCwgeyB0YXJlYXMgfSkgPT4gdG90YWwgKyB0YXJlYXMubGVuZ3RoLCAwKTtcblxuICAgICAgICAvLyBNZW5zYWplIHNvYnJlIGVsIGVzdGFkbyBkZSBsYXMgdGFyZWFzIGNlcnJhZGFzIGhveVxuICAgICAgICBpZiAodG90YWxUYXJlYXNDZXJyYWRhcyA+IDApIHtcbiAgICAgICAgICAgIGR2LmhlYWRlcigzLCBgSG95IHNlIGhhbiBjZXJyYWRvICR7dG90YWxUYXJlYXNDZXJyYWRhc30gdGFyZWFzLmApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgLy8gQ3JlYXIgbGEgdGFibGEgSFRNTFxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIHRhYmxlLmNsYXNzTGlzdC5hZGQoJ3RhYmxlJyk7IC8vIEFncmVnYXIgdW5hIGNsYXNlIHBhcmEgbGEgdGFibGEgcGFyYSBlbCBlc3RpbG9cbiAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVuY2FiZXphZG9zIGRlIHRhYmxhXG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIGxldCBoZWFkZXJzID0gW1wiTm90YVwiLCBcIlRhcmVhcyBDZXJyYWRhc1wiXTtcbiAgICAgICAgaGVhZGVycy5mb3JFYWNoKGhlYWRlclRleHQgPT4ge1xuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICBoZWFkZXIudGV4dENvbnRlbnQgPSBoZWFkZXJUZXh0O1xuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKGhlYWRlcik7XG4gICAgICAgIH0pO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBmaWxhcyBkZSBkYXRvcyBhIGxhIHRhYmxhXG4gICAgICAgIHJlc3VsdGFkb3MuZm9yRWFjaCgoe2ZpbGVQYXRoLCBhbGlhcywgdGFyZWFzfSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uYSBkZSBlbmxhY2UgY2VudHJhZG8gdmVydGljYWxtZW50ZVxuICAgICAgICAgICAgICAgIGxldCBsaW5rQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgbGlua0NlbGwuc3R5bGUudmVydGljYWxBbGlnbiA9ICdtaWRkbGUnO1xuICAgICAgICAgICAgICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgIGEuc2V0QXR0cmlidXRlKCdocmVmJywgYG9ic2lkaWFuOi8vb3Blbj92YXVsdD0ke2FwcC52YXVsdC5nZXROYW1lKCl9JmZpbGU9JHtlbmNvZGVVUklDb21wb25lbnQoZmlsZVBhdGgpfWApO1xuICAgICAgICAgICAgICAgIGEudGV4dENvbnRlbnQgPSBhbGlhcyB8fCBmaWxlUGF0aDtcbiAgICAgICAgICAgICAgICBsaW5rQ2VsbC5hcHBlbmRDaGlsZChhKTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobGlua0NlbGwpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgZGUgdGFyZWFzIGNlcnJhZGFzXG4gICAgICAgICAgICAgICAgbGV0IHRhc2tzQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgbGV0IHRhc2tzTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgICAgICAgICAgdGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgICAgICBsaS50ZXh0Q29udGVudCA9IHRhcmVhLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tzTGlzdC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGFza3NDZWxsLmFwcGVuZENoaWxkKHRhc2tzTGlzdCk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHRhc2tzQ2VsbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGxhIHRhYmxhIGFsIGNvbnRlbmVkb3IgZGUgRGF0YXZpZXdcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkdi5wYXJhZ3JhcGgoXCJObyBoYXkgdGFyZWFzIGNlcnJhZGFzIGhveS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICBcbiAgICBmdW5jdGlvbiBleHRyYWVyVGFyZWFzKGNvbnRlbmlkbykge1xuICAgICAgICBjb25zdCB0YXJlYXMgPSBbXTtcbiAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KFwiXFxuXCIpO1xuICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGxpbmVhIG9mIGxpbmVhcykge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFSZWdleCA9IC9eXFxzKi1cXHMqXFxbKHh8WHwgKVxcXVxccyooLispJC87XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRhcmVhUmVnZXguZXhlYyhsaW5lYSk7XG4gICAgXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb21wbGV0YWRhID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKSA9PT0gJ3gnO1xuICAgICAgICAgICAgICAgIGxldCB0ZXh0b1RhcmVhID0gbWF0Y2hbMl07XG4gICAgICAgICAgICAgICAgbGV0IGZlY2hhQ29tcGxldGl0dWQgPSBudWxsO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhUmVnZXggPSAvXFxbY29tcGxldGlvbjo6IChcXGR7NH0tXFxkezJ9LVxcZHsyfSlcXF0vO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhTWF0Y2ggPSBmZWNoYVJlZ2V4LmV4ZWModGV4dG9UYXJlYSk7XG4gICAgICAgICAgICAgICAgaWYgKGZlY2hhTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVjaGFDb21wbGV0aXR1ZCA9IGZlY2hhTWF0Y2hbMV07XG4gICAgICAgICAgICAgICAgICAgIHRleHRvVGFyZWEgPSB0ZXh0b1RhcmVhLnJlcGxhY2UoZmVjaGFSZWdleCwgJycpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgdGFyZWFzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0b1RhcmVhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IGNvbXBsZXRhZGEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25EYXRlOiBmZWNoYUNvbXBsZXRpdHVkLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiB0YXJlYXM7XG4gICAgfVxuICAgIFxuICAgIFxufVxuXG5cbiAgICBhc3luYyBtb3N0cmFyUmVnaXN0cm9zSG95KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yIGRlIERhdGF2aWV3XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRcdTAwRTluIGxhIGZlY2hhIGFjdHVhbCBiYXNhZGEgZW4gZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IGZlY2hhSG95ID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKS5iYXNlbmFtZS5zcGxpdChcIiBcIilbMF0sICd5eXl5LU1NLWRkJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgXG4gICAgICAgIC8vIEVuY3VlbnRyYSBhcmNoaXZvcyBxdWUgY29udGllbmVuIHJlZ2lzdHJvcyBkZSB0aWVtcG9cbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSk7XG5cbiAgICAgICAgLy8gTGVlIHkgcHJvY2VzYSBlbCBjb250ZW5pZG8gZGUgY2FkYSBhcmNoaXZvIHBhcmEgZXh0cmFlciByZWdpc3Ryb3MgZGUgdGllbXBvXG4gICAgICAgIGxldCB0b3RhbERpYSA9IDA7XG4gICAgICAgIGxldCByZWdpc3Ryb3NIb3kgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhvcmFJbmljaW8gPSBEYXRlVGltZS5mcm9tRm9ybWF0KG1ldGFkYXRhLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydE9mRGF5ID0gaG9yYUluaWNpby5zdGFydE9mKCdkYXknKTtcbiAgICBcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRPZkRheS50cyA9PT0gZmVjaGFIb3kuc3RhcnRPZignZGF5JykudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm9zSG95LnB1c2goe3BhdGg6IGZpbGUucGF0aCwgZnJvbnRtYXR0ZXIgOiBtZXRhZGF0YX0pOyAvLyBDb3JyZWdpZG8gcGFyYSBhZ3JlZ2FyIGVsIG9iamV0byBhcmNoaXZvIGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBjb252ZXJ0aXIgdGllbXBvVHJhYmFqYWRvIGEgblx1MDBGQW1lcm8gYW50ZXMgZGUgc3VtYXJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEaWEgKz0gbWV0YWRhdGEudGllbXBvVHJhYmFqYWRvID8gcGFyc2VJbnQobWV0YWRhdGEudGllbXBvVHJhYmFqYWRvKSA6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIE1vc3RyYXIgZWwgdG90YWwgZGUgdGllbXBvIHRyYWJhamFkbyBob3lcbiAgICAgICAgZHYuaGVhZGVyKDMsIFwiVGllbXBvIHJlZ2lzdHJhZG8gaG95OiBcIiArIER1cmF0aW9uLmZyb21NaWxsaXModG90YWxEaWEpLnRvRm9ybWF0KCdoaDptbTpzcycpKTtcblxuXG4gICAgICAgICAgICAvLyBPcmRlbmEgbG9zIHJlZ2lzdHJvcyBwb3IgaG9yYSBkZSBpbmljaW8gYW50ZXMgZGUgZ2VuZXJhciBsYSB0YWJsYVxuICAgICAgICByZWdpc3Ryb3NIb3kuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgaG9yYUluaWNpbyBlc3RcdTAwRTEgcHJlc2VudGUgeSBlcyB1bmEgY2FkZW5hIHZcdTAwRTFsaWRhIHBhcmEgYW1ib3Mgb2JqZXRvc1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYS5mcm9udG1hdHRlci5ob3JhSW5pY2lvID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgYi5mcm9udG1hdHRlci5ob3JhSW5pY2lvID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWlsbGlzQSA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYS5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9NaWxsaXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbGxpc0IgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGIuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvTWlsbGlzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlsbGlzQiAtIG1pbGxpc0E7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIGRhdGVzOlwiLCBlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFuZWpvIGRlIGNhc29zIGRvbmRlIGxvcyBkYXRvcyBubyBzZWFuIHN0cmluZ3Mgdlx1MDBFMWxpZG9zXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignSW52YWxpZCBkYXRlIGZvcm1hdCBmb3Igc29ydGluZzonLCBhLmhvcmFJbmljaW8sIGIuaG9yYUluaWNpbyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuaWYgKHJlZ2lzdHJvc0hveS5sZW5ndGg+MCl7XG4vLyBDcmVhIGxhIHRhYmxhIEhUTUxcbmNvbnN0IHRhYmxlID0gZHYuY29udGFpbmVyLmNyZWF0ZUVsKCd0YWJsZScsIHtjbHM6ICdkYXRhdmlldyB0YWJsZSd9KTtcbnRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG4vLyBDcmVhIHkgYVx1MDBGMWFkZSBsb3MgZW5jYWJlemFkb3MgZGUgbGEgdGFibGFcbmNvbnN0IGhlYWRlciA9IGR2LmVsKCd0cicsICcnLCB0YWJsZSk7XG5bXCJSZWdpc3Ryb1wiLCBcIkRlc2NyaXBjaVx1MDBGM25cIiwgXCJIb3JhIEluaWNpb1wiLCBcIlRpZW1wb1wiLCBcIkVzdGFkb1wiLCBcIklkXCIsIFwiQWNjaVx1MDBGM25cIl0uZm9yRWFjaCh0ZXh0ID0+IGR2LmVsKCd0aCcsIHRleHQsIGhlYWRlcikpO1xuXG4vLyBDcmVhIHkgYVx1MDBGMWFkZSBjYWRhIGZpbGEgZGUgcmVnaXN0cm8gYSBsYSB0YWJsYVxucmVnaXN0cm9zSG95LmZvckVhY2gocmVnaXN0cm8gPT4ge1xuICAgIGNvbnN0IHJvdyA9IGR2LmVsKCd0cicsJycsdGFibGUpXG4gICAgZHYuZWwoJ3RkJywgZHYuZnVuYy5saW5rKHJlZ2lzdHJvLnBhdGgscmVnaXN0cm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSksIHJvdyk7XG4gICAgIC8vIEFcdTAwRjFhZGUgbGEgY2VsZGEgZGUgZGVzY3JpcGNpXHUwMEYzbiB5IHRcdTAwRUR0dWxvXG4gICAgZHYuZWwoJ3RkJywgcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZGVzY3JpcGNpb24gPyByZWdpc3Ryby5mcm9udG1hdHRlci5kZXNjcmlwY2lvbiA6ICdTaW4gZGVzY3JpcGNpXHUwMEYzbicsIHJvdyk7XG4gICAgZHYuZWwoJ3RkJywgRGF0ZVRpbWUuZnJvbUZvcm1hdChyZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9Gb3JtYXQoJ2g6bW0gYScpICtcbiAgICBcIiAvIFwiICsgRGF0ZVRpbWUuZnJvbUZvcm1hdChyZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhRmluYWwsICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b0Zvcm1hdCgnaDptbSBhJyksIHJvdyk7XG4gICAgaWYgKHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIil7XG4gICAgLy8gU2VwYXJhbW9zIGxhIGZlY2hhIHkgbGEgaG9yYSwgeSBlbGltaW5hbW9zIGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYVxuICAgIGxldCBwYXJ0ZXMgPSByZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhSW5pY2lvLnNwbGl0KCcgJyk7XG4gICAgLy8gUmVvcmdhbml6YW1vcyBsYXMgcGFydGVzIHBhcmEgZm9ybWFyIHVuYSBmZWNoYSBlbiBmb3JtYXRvIFwiWVlZWS1NTS1ERFRISDptbVwiXG4gICAgbGV0IGZlY2hhSG9yYUlTTyA9IGAke3BhcnRlc1swXX1UJHtwYXJ0ZXNbMl19YDtcbiAgICAvLyBQYXJzZWFtb3MgbGEgZmVjaGEgZW4gZm9ybWF0byBJU09cbiAgICBsZXQgaW5pY2lvID0gRGF0ZS5wYXJzZShmZWNoYUhvcmFJU08pO1xuICAgIGxldCBhaG9yYSA9IERhdGUubm93KCk7XG4gICAgbGV0IGRpZmVyZW5jaWEgPSBhaG9yYSAtIGluaWNpbzsgLy8gRGlmZXJlbmNpYSBlbiBtaWxpc2VndW5kb3NcbiAgICBkdi5lbCgndGQnLCBEdXJhdGlvbi5mcm9tTWlsbGlzKGRpZmVyZW5jaWEpLnRvRm9ybWF0KCdoOm1tJyksIHJvdylcbiAgICB9ZWxzZXtcbiAgICBkdi5lbCgndGQnLCBEdXJhdGlvbi5mcm9tTWlsbGlzKHJlZ2lzdHJvLmZyb250bWF0dGVyLnRpZW1wb1RyYWJhamFkbykudG9Gb3JtYXQoJ2g6bW0nKSwgcm93KTtcbiAgICB9XG4gICAgZHYuZWwoJ3RkJywgcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvLCByb3cpO1xuICAgIGR2LmVsKCd0ZCcsIHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkLCByb3cpO1xuICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpe1xuICAgICAgICBkdi5lbCgndGQnLCB0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKCdDZXJyYXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHF1ZSBtYW5lamFyXHUwMEUxIGVsIGNsaWMgZGVsIGJvdFx1MDBGM24uXG4gICAgICAgIC8vIFBvciBlamVtcGxvLCByZXRvbWFyIGxhIHRhcmVhIHJlcHJlc2VudGFkYSBwb3IgYHJlZ2lzdHJvYFxuICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkKTtcbiAgICAgICAgLy90aGlzLmNlcnJhclRhcmVhKHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkKTtcbiAgICAgICAgfSksIHJvdyk7XG4gICAgfWVsc2V7XG4gICAgZHYuZWwoJ3RkJywgdGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnUmV0b21hcicsICgpID0+IHtcbiAgICAgICAgLy8gTFx1MDBGM2dpY2EgcXVlIG1hbmVqYXJcdTAwRTEgZWwgY2xpYyBkZWwgYm90XHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHJldG9tYXIgbGEgdGFyZWEgcmVwcmVzZW50YWRhIHBvciBgcmVnaXN0cm9gXG4gICAgICAgIHRoaXMucmV0b21hclRhcmVhKHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkKTtcbiAgICAgICAgfSksIHJvdyk7XG4gICAgfVxuICAgIH0pO1xuICAgIH1cbiAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIFxufVxuXG4gICAgY3JlYXRlQnV0dG9uVGFibGUoYnV0dG9uVGV4dCwgb25DbGlja0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbm8gc2UgZW52aWFyXHUwMEUxIHVuIGZvcm11bGFyaW8gYWwgaGFjZXIgY2xpYyBlbiBcdTAwRTlsXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpOyAvLyBBZ3JlZ2EgdW5hIGNsYXNlIHBhcmEgZWwgZXN0aWxvIGRlbCBib3RcdTAwRjNuIHNpIGVzIG5lY2VzYXJpb1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgZWwgZXZlbnRvIGRlIGNsaWMgYWwgYm90XHUwMEYzblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIENyZWEgbGEgbm90YSBkZXNkZSBlbCB0ZW1wbGF0ZXIgZGUgUmVnaXN0cm9UaWVtcG9cbiAgICBhc3luYyByZXRvbWFyVGFyZWEoaWQpIHsgXG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHJlZW1wbGF6YXIgJ3J1dGEvYWwvYXJjaGl2by5tZCcgY29uIGxhIHJ1dGEgZXhhY3RhIGRlbCBhcmNoaXZvIHF1ZSBkZXNlYXMgb2J0ZW5lclxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfUmVnaXN0cm9UaWVtcG9gXX0vUGx0IC0gUmVnaXN0cm9UaWVtcG8ubWRgO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBcIlJldG9tYXIgXCIgKyBpZDtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgICAgICBjb25zdCB0cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgbGV0IGNyZWFyTm90YSA9IHRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpXG4gICAgICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbiAgICAgIH1cblxuICAgIGdldFRwKCl7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gICBcbiAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcInRlbXBsYXRlci1vYnNpZGlhblwiXS50ZW1wbGF0ZXI7XG4gICAgICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIG1vZHVsZXNcbiAgICAgICAgdHAuZmlsZSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgIGlmICghdHAuZmlsZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCd0cCBjb24gcHJvcGllZGFkZXMgXCJmaWxlXCIgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICAgICAgcmV0dXJuIHRwO1xuICAgIH1cblxufVxuICAgIFxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7XG5cbmV4cG9ydCBjbGFzcyBWaXN0YVJlc3VtZW5TZW1hbmFsIGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIGludGVydmFsSWQ6IG51bWJlcjtcbiBcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHB1YmxpYyBwbHVnaW46IGFueSkge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidmlzdGEtcmVzdW1lbi1zZW1hbmFsXCI7XG4gICAgfVxuXG4gICAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiBcIlJlc3VtZW4gU2VtYW5hbFwiO1xuICAgIH1cblxuICAgIGdldEljb24oKSB7XG4gICAgICAgIHJldHVybiBcImhpc3RvcnlcIjsgLy8gRXN0ZSBlcyB1biBlamVtcGxvLCBjYW1iaWEgXCJkb2N1bWVudG9cIiBwb3IgZWwgbm9tYnJlIGRlbCBcdTAwRURjb25vIHF1ZSBkZXNlZXMgdXNhclxuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuc2V0VGV4dChcIk5vIGhheSB1biBhcmNoaXZvIGFjdGl2by5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3RpdmVGaWxlKTtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoZmlsZUNhY2hlKTsgLy8gUHVlZGVzIHVzYXIgdGhpcy5maWxlIGRlbnRybyBkZSBhY3R1YWxpemFyVmlzdGFcbiAgICBcbiAgICAgICAgLy9hd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgaW5tZWRpYXRhbWVudGUgYWwgYWJyaXJcblxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoZmlsZUNhY2hlKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGNhZGEgMTAgc2VndW5kb3NcbiAgICAgICAgfSwgMTAwMDApO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7IC8vIExpbXBpYSBlbCBpbnRlcnZhbG8gYWwgY2VycmFyIGxhIHZpc3RhXG4gICAgfVxuXG4gICAgYXN5bmMgYWN0dWFsaXphclZpc3RhKGZpbGVDYWNoZSkge1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyAvLyBMaW1waWEgZWwgY29udGVuaWRvIGV4aXN0ZW50ZSBhbnRlcyBkZSBhY3R1YWxpemFyXG4gICAgXG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbmljaW9XU3RyID0gZmlsZUNhY2hlLmZyb250bWF0dGVyPy5pbmljaW9XOyBcbiAgICAgICAgaWYgKCFpbmljaW9XU3RyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5zZXRUZXh0KFwiTGEgY29uZmlndXJhY2lcdTAwRjNuIGRlIGluaWNpb1cgbm8gZXN0XHUwMEUxIGVzdGFibGVjaWRhLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2xkZXJEaWFyaW8gPSBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9EaWFyaW8vTm90YXNcIjtcbiAgICAgICAgY29uc3QgaW5pY2lvVyA9IERhdGVUaW1lLmZyb21Gb3JtYXQoaW5pY2lvV1N0ciwgXCJ5eXl5LU1NLWRkIEVFRUVcIiwgeyBsb2NhbGU6IFwiZXNcIiB9KTtcbiAgICAgICAgY29uc3QgZmluVyA9IGluaWNpb1cucGx1cyh7IGRheXM6IDYgfSk7IC8vIEFqdXN0ZSBwYXJhIGFzZWd1cmFyIHF1ZSBlbCBmaW4gZXMgZWwgZG9taW5nbyBkZSBsYSBtaXNtYSBzZW1hbmFcbiAgICBcbiAgICAgICAgY29uc3QgYXJjaGl2b3NEaWFyaW8gPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyRGlhcmlvKSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJyk7XG4gICAgXG4gICAgICAgIGNvbnN0IGJpdGFjb3JhcyA9IGFyY2hpdm9zRGlhcmlvXG4gICAgICAgICAgICAubWFwKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhQXJjaGl2byA9IERhdGVUaW1lLmZyb21JU08oZmlsZS5iYXNlbmFtZS5zdWJzdHJpbmcoMCwgMTApKTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRvcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhcmNoaXZvOiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGZlY2hhQXJjaGl2byxcbiAgICAgICAgICAgICAgICAgICAgZGF0b3NcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maWx0ZXIoKHsgZmVjaGFBcmNoaXZvIH0pID0+IGZlY2hhQXJjaGl2byA+PSBpbmljaW9XICYmIGZlY2hhQXJjaGl2byA8PSBmaW5XKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZmVjaGFBcmNoaXZvLnRvTWlsbGlzKCkgLSBiLmZlY2hhQXJjaGl2by50b01pbGxpcygpKTtcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgdFx1MDBFRHR1bG8gY29uIGxhcyBmZWNoYXMgZGUgbGEgc2VtYW5hXG4gICAgICAgIGxldCB0cmltID0gZmluVy5xdWFydGVyO1xuICAgICAgICBsZXQgc2VtID0gKGZpblcud2Vla051bWJlciAtIChmaW5XLnF1YXJ0ZXIgLSAxKSoxMylcbiAgICAgICAgaWYgKHNlbT09MCl7c2VtID0gMTN9XG5cbiAgICAgICAgY29uc3QgdGl0dWxvID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUmVzdW1lbiBkZSBsYSBzZW1hbmEgJHtzZW19IC0gUSR7dHJpbX0gLyBXJHtmaW5XLnRvRm9ybWF0KCdXVycpfS5gfSk7XG4gICAgICAgIGNvbnN0IHN1YnRpdHVsbyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogYERlc2RlIGVsICR7aW5pY2lvVy50b0Zvcm1hdCgnRUVFRSwgREQnKX0gYWwgJHtmaW5XLnRvRm9ybWF0KCdFRUVFLCBERCcpfWAgfSk7XG4gICAgICAgIHRpdHVsby5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgc3VidGl0dWxvLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAvLyBDcmVhciB0YWJsYVxuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIHRhYmxlLmNsYXNzTmFtZSA9ICd0YWJsZS1yZXN1bWVuU2VtYW5hbCc7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIGNhYmVjZXJhIGRlIGxhIHRhYmxhXG4gICAgICAgIGNvbnN0IHRoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGhlYWQnKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgWydEXHUwMEVEYScsICdSZXN1bWVuJ10uZm9yRWFjaChoZWFkZXJUZXh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgICAgIHRoLnRleHRDb250ZW50ID0gaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZCh0aCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0aGVhZCk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIGN1ZXJwbyBkZSBsYSB0YWJsYVxuICAgICAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3Rib2R5Jyk7XG4gICAgICAgIGJpdGFjb3Jhcy5mb3JFYWNoKCh7IGFyY2hpdm8sIHBhdGgsIGRhdG9zIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRkQXJjaGl2byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICBjb25zdCBsaW5rRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICBsaW5rRWwudGV4dENvbnRlbnQgPSBhcmNoaXZvO1xuICAgICAgICAgICAgbGlua0VsLmhyZWYgPSBwYXRoO1xuICAgICAgICAgICAgbGlua0VsLm9uY2xpY2sgPSBhc3luYyAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZihmYWxzZSkub3BlbkZpbGUoZmlsZSwgeyBlU3RhdGU6IHsgZm9jdXM6IHRydWUgfSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGRBcmNoaXZvLmFwcGVuZENoaWxkKGxpbmtFbCk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCB0ZFJlc3VtZW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgY29uc3QgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgKGRhdG9zLnRpdHVsbyB8fCBbJ1NpbiB0XHUwMEVEdHVsbyddKS5mb3JFYWNoKHRpdHVsbyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gdGl0dWxvO1xuICAgICAgICAgICAgICAgIHVsLmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGRSZXN1bWVuLmFwcGVuZENoaWxkKHVsKTtcbiAgICBcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkQXJjaGl2byk7XG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZFJlc3VtZW4pO1xuICAgIFxuICAgICAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGJvZHkpO1xuICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGxhIHRhYmxhIGFsIGNvbnRlbmVkb3JcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgIH1cbiAgICBcbiAgICBcblxuXG4gICAgLy8gT3BjaW9uYWw6IEltcGxlbWVudGEgb25DbG9zZSBzaSBuZWNlc2l0YXMgbGltcGllemEgYWwgY2VycmFyIGxhIHZpc3RhLlxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby92aWV3cy92aXN0YVJUQWN0aXZvLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdmlld3NcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAyMTowMToyNVxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMjM6NTg6MzRcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuLy8gaW1wb3J0IGJyZWFrQXVkaW8gZnJvbSBcIi4uLy4uLy4uLy4uL1JlY3Vyc29zL0JyZWFrLm1wM1wiO1xuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFBsdWdpbiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSB0ZW5lciBMdXhvbiBkaXNwb25pYmxlIHBhcmEgbWFuaXB1bGFyIGZlY2hhcyB5IGhvcmFzXG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuLi9BUEkvcmVnaXN0cm9UaWVtcG9BUElcIjtcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tIFwiLi4vLi4vbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUElcIjtcblxuZXhwb3J0IGNsYXNzIFZpc3RhUmVnaXN0cm9BY3Rpdm8gZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcGx1Z2luIDogUGx1Z2luO1xuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZWdpc3RybyBBY3Rpdm9cIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJjaGVja21hcmtcIjsgLy8gQ2FtYmlhIGEgdW4gXHUwMEVEY29ubyBhZGVjdWFkbyBwYXJhIHJlZ2lzdHJvcyBhY3Rpdm9zXG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgaW5tZWRpYXRhbWVudGUgYWwgYWJyaXJcbiAgICBcbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGNhZGEgNSBzZWd1bmRvc1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuXG4gICAgYXN5bmMgYWN0dWFsaXphclZpc3RhKCkge1xuICAgICAgICAvLyAxLiBHdWFyZGFyIGxhIHBvc2ljaVx1MDBGM24gZGUgc2Nyb2xsIGFjdHVhbCBkZWwgY29udGVuZWRvciBkZSBsYSB0YWJsYSwgc2kgZXhpc3RlLlxuICAgICAgICBsZXQgc2Nyb2xsVG9wID0gMDtcbiAgICAgICAgbGV0IHNjcm9sbExlZnQgPSAwO1xuICAgICAgICBjb25zdCBvbGRUYWJsZVdyYXBwZXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoXCIudGFibGUtd3JhcHBlclwiKTtcbiAgICAgICAgaWYgKG9sZFRhYmxlV3JhcHBlcikge1xuICAgICAgICAgICAgc2Nyb2xsVG9wID0gb2xkVGFibGVXcmFwcGVyLnNjcm9sbFRvcDtcbiAgICAgICAgICAgIHNjcm9sbExlZnQgPSBvbGRUYWJsZVdyYXBwZXIuc2Nyb2xsTGVmdDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyAyLiBWYWNpYXIgZWwgY29udGVuZWRvciBwcmluY2lwYWwgeSBjb25maWd1cmFyIGxhIGNsYXNlIGJhc2UuXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwicmVnaXN0cm8tdGllbXBvLWNvbnRhaW5lclwiKTtcbiAgICBcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikpO1xuICAgICAgICBsZXQgcmVnaXN0cm9zQWN0aXZvcyA9IFtdO1xuICAgIFxuICAgICAgICAvLyBCdXNjYXIgcmVnaXN0cm9zIGFjdGl2b3MgKGVzdGFkbyBcdUQ4M0RcdURGRTIpXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIGxldCByZWdpc3Ryb0FjdGl2byA9IHsgZmlsZSB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVnaXN0cm9BY3Rpdm8sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb3NBY3Rpdm9zLnB1c2gocmVnaXN0cm9BY3Rpdm8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGlmIChyZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIGVsIG1lbnNhamUgeSBlbCBib3RcdTAwRjNuIHNpIG5vIGhheSByZWdpc3Ryb3MgYWN0aXZvcy5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21lc3NhZ2UtY29udGFpbmVyJyB9KTtcbiAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdObyBoYXkgbmluZ1x1MDBGQW4gcmVnaXN0cm8gZGUgdGllbXBvIGVqZWN1dFx1MDBFMW5kb3NlLicgfSk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBib3RvbkNyZWFyID0gbWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdyZWdpc3Ryby10aWVtcG8tYnRuJyB9KTtcbiAgICAgICAgICAgIGJvdG9uQ3JlYXIudGV4dENvbnRlbnQgPSAnKyBSZWdpc3RybyBUaWVtcG8nO1xuICAgICAgICAgICAgYm90b25DcmVhci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZXJBUEluc3RhbmNlID0gbmV3IHN0YXJ0ZXJBUEkodGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHN0YXJ0ZXJBUEluc3RhbmNlLmNyZWF0ZU5vdGUoXCJSZWdpc3Ryb1RpZW1wb1wiKTtcbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKG1lc3NhZ2VDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZXBhcmFkb3InIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJvc0FjdGl2b3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm9FbkVqZWN1Y2lvbiA9IHJlZ2lzdHJvc0FjdGl2b3NbMF07XG4gICAgXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcImFjdGl2ZS10aW1lLWNvbnRhaW5lclwiIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gVFx1MDBFRHR1bG9cbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJSZWdpc3RybyBkZSBUaWVtcG8gZW4gRWplY3VjaVx1MDBGM25cIiwgY2xzOiBcInJlZ2lzdHJvLXRpZW1wby10aXR1bG9cIiB9KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJyZWdpc3Ryby1hbGlhc1wiIH0pO1xuICAgICAgICAgICAgY29uc3QgYWxpYXNUZXh0ID0gcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzICYmIHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlc1sxXVxuICAgICAgICAgICAgICA/IHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlc1sxXVxuICAgICAgICAgICAgICA6IHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlcyAmJiByZWdpc3Ryb0VuRWplY3VjaW9uLmFsaWFzZXNbMF1cbiAgICAgICAgICAgICAgICAgID8gcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgICA6IFwiU2luIGFsaWFzXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIHVuIHNwYW4gcGFyYSBcIkFsaWFzOlwiIHkgZWwgZW5sYWNlIHBhcmEgZWwgdGV4dG8gZGVsIGFsaWFzXG4gICAgICAgICAgICBjb25zdCBhbGlhc0xhYmVsID0gYWxpYXNDb250YWluZXIuY3JlYXRlRWwoXCJzdHJvbmdcIiwgeyB0ZXh0OiBcIkFsaWFzOiBcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzTGluayA9IGFsaWFzQ29udGFpbmVyLmNyZWF0ZUVsKFwiYVwiLCB7XG4gICAgICAgICAgICAgIHRleHQ6IGFsaWFzVGV4dCxcbiAgICAgICAgICAgICAgY2xzOiBcImFsaWFzLWxpbmtcIixcbiAgICAgICAgICAgICAgaHJlZjogXCIjXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZ3JlZ2FyIGVsIGV2ZW50byBkZSBjbGljIHBhcmEgYWJyaXIgbGEgbm90YSBlbiB1bmEgbnVldmEgdmVudGFuYVxuICAgICAgICAgICAgYWxpYXNMaW5rLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaWYgKHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gQWJyaXIgZW4gdW5hIG51ZXZhIGhvamFcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUocmVnaXN0cm9FbkVqZWN1Y2lvbi5maWxlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIERlc2NyaXBjaVx1MDBGM24gKFZpc2libGUgZW4gbGEgVmlzdGEpXG4gICAgICAgICAgICBjb25zdCBkZXNjcmlwY2lvbkNvbnRhaW5lciA9IGFjdGl2ZUNvbnRhaW5lci5jcmVhdGVFbChcInBcIiwgeyBjbHM6IFwicmVnaXN0cm8tZGVzY3JpcGNpb25cIiB9KTtcbiAgICAgICAgICAgIGRlc2NyaXBjaW9uQ29udGFpbmVyLmlubmVySFRNTCA9IGA8c3Ryb25nPkRlc2NyaXBjaVx1MDBGM246PC9zdHJvbmc+ICR7cmVnaXN0cm9FbkVqZWN1Y2lvbi5kZXNjcmlwY2lvbiB8fCBcIlNpbiBkZXNjcmlwY2lcdTAwRjNuXCJ9YDtcbiAgICBcbiAgICAgICAgICAgIC8vIFRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgLy8gVGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuIGNvbiBcdTAwRURjb25vIHBhcmEgZWRpdGFyIGhvcmEgZGUgaW5pY2lvXG4gICAgICAgICAgICBjb25zdCB0aWVtcG9Db250YWluZXIgPSBhY3RpdmVDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGllbXBvLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGllbXBvRWplY3VjaW9uID0gdGllbXBvQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJ0aWVtcG8tZWplY3VjaW9uXCIsIHRleHQ6IFwiVGllbXBvIHRyYW5zY3VycmlkbzogQ2FsY3VsYW5kby4uLlwiIH0pO1xuICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyVGllbXBvRW5FamVjdWNpb24odGllbXBvRWplY3VjaW9uLCByZWdpc3Ryb0VuRWplY3VjaW9uLmhvcmFJbmljaW8pO1xuXG4gICAgICAgICAgICAvLyBcdTAwQ0Rjb25vIHBhcmEgZWRpdGFyIGxhIGhvcmEgZGUgaW5pY2lvXG4gICAgICAgICAgICBjb25zdCBlZGl0VGltZUljb24gPSB0aWVtcG9Db250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiBcImVkaXQtdGltZS1pY29uXCIsIFxuICAgICAgICAgICAgICAgIGF0dHI6IHsgXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogJ0VkaXRhciBob3JhIGRlIGluaWNpbycsXG4gICAgICAgICAgICAgICAgICAgICd0aXRsZSc6ICdFZGl0YXIgaG9yYSBkZSBpbmljaW8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlZGl0VGltZUljb24uaW5uZXJIVE1MID0gXCJcdTIzRjFcdUZFMEZcIjsgLy8gXHUwMENEY29ubyBkZSByZWxvalxuICAgICAgICAgICAgZWRpdFRpbWVJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3N0cmFyU2VsZWN0b3JIb3JhSW5pY2lvKHJlZ2lzdHJvRW5FamVjdWNpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBDb250ZW5lZG9yIGRlIGJvdG9uZXMgYWxpbmVhZG9zXG4gICAgICAgICAgICBjb25zdCBib3RvbmVzQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInJlZ2lzdHJvLWJvdG9uZXMtY29udGFpbmVyXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgY2FtYmlhciBsYSBkZXNjcmlwY2lcdTAwRjNuXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VEZXNjQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIGNoYW5nZURlc2NCdXR0b24uaW5uZXJIVE1MID0gXCJcdTI3MEZcdUZFMEYgPHNwYW4gY2xhc3M9J2J1dHRvbi10ZXh0Jz4gIERlc2NyaXBjaVx1MDBGM248L3NwYW4+XCI7XG4gICAgICAgICAgICBjaGFuZ2VEZXNjQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjaGFuZ2UtZGVzYy1idG5cIik7XG4gICAgICAgICAgICBjaGFuZ2VEZXNjQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVldmFEZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMubW9zdHJhclByb21wdChcIk51ZXZhIERlc2NyaXBjaVx1MDBGM246XCIsIHJlZ2lzdHJvRW5FamVjdWNpb24uZGVzY3JpcGNpb24gfHwgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51ZXZhRGVzY3JpcGNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb250bWF0dGVyID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlci5kZXNjcmlwY2lvbiA9IG51ZXZhRGVzY3JpcGNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLnJlZXNjcmliaXJGcm9udG1hdHRlcihmaWxlQ29udGVudCwgZnJvbnRtYXR0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgdmlzdGEgcGFyYSByZWZsZWphciBlbCBjYW1iaW9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBkZXRlbmVyIGVsIHJlZ2lzdHJvXG4gICAgICAgICAgICBjb25zdCBzdG9wQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIHN0b3BCdXR0b24uaW5uZXJIVE1MID0gXCJcdTI3MEJcdUQ4M0NcdURGRkMgPHNwYW4gY2xhc3M9J2J1dHRvbi10ZXh0Jz4gRGV0ZW5lciBSZWdpc3Rybzwvc3Bhbj5cIjtcbiAgICAgICAgICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0b3AtdGltZS1idG5cIik7XG4gICAgICAgICAgICBzdG9wQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCb3RcdTAwRjNuICdDZXJyYXIgVGFyZWEnIHByZXNpb25hZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSB8fCAhKHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIGVuY29udHJcdTAwRjMgZWwgYXJjaGl2byBkZWwgcmVnaXN0cm8gZW4gZWplY3VjaVx1MDBGM24uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8ocmVnaXN0cm9FbkVqZWN1Y2lvbi5maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3RybyBjZXJyYWRvIGNvcnJlY3RhbWVudGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjZXJyYXIgbGEgdGFyZWE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFncmVnYXIgYm90b25lcyBhbCBjb250ZW5lZG9yXG4gICAgICAgICAgICBib3RvbmVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoYW5nZURlc2NCdXR0b24pO1xuICAgICAgICAgICAgYm90b25lc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdG9wQnV0dG9uKTtcbiAgICBcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvbmVzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChhbGlhc0NvbnRhaW5lcik7XG4gICAgICAgICAgICBhY3RpdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcGNpb25Db250YWluZXIpO1xuICAgICAgICAgICAgYWN0aXZlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpZW1wb0NvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGFjdGl2ZUNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTW9zdHJhciByZWdpc3Ryb3MgZmluYWxpemFkb3NcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0ZpbmFsaXphZG9zID0gW107XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdUREMzVcIikge1xuICAgICAgICAgICAgICAgIGxldCByZWdpc3Ryb0ZpbmFsaXphZG8gPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlZ2lzdHJvRmluYWxpemFkbywgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0ZpbmFsaXphZG9zLnB1c2gocmVnaXN0cm9GaW5hbGl6YWRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZWdpc3Ryb3NGaW5hbGl6YWRvcy5zb3J0KChhLCBiKSA9PiBiLmlkIC0gYS5pZCk7XG4gICAgICAgIGxldCB0b3A1UmVnaXN0cm9zQWN0aXZvcyA9IHJlZ2lzdHJvc0ZpbmFsaXphZG9zLnNsaWNlKDAsIDE1KTtcbiAgICBcbiAgICAgICAgaWYgKHRvcDVSZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlV3JhcHBlciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFibGUtd3JhcHBlclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0YWJsZVdyYXBwZXIuY3JlYXRlRWwoXCJ0YWJsZVwiLCB7IGNsczogXCJzdHlsZWQtdGFibGVcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZUVsKFwidHJcIik7XG4gICAgICAgICAgICBbXCJBbGlhc1wiLCBcIkRlc2NyaXBjaVx1MDBGM25cIiwgXCJSZXRvbWFyXCJdLmZvckVhY2godGV4dCA9PiBoZWFkZXIuY3JlYXRlRWwoXCJ0aFwiLCB7IHRleHQ6IHRleHQgfSkpO1xuICAgIFxuICAgICAgICAgICAgdG9wNVJlZ2lzdHJvc0FjdGl2b3MuZm9yRWFjaChyZWdpc3RybyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGFibGUuY3JlYXRlRWwoXCJ0clwiKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBBbGlhcyBjb24gZW5sYWNlXG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNUZXh0ID0gcmVnaXN0cm8uYWxpYXNlcyAmJiByZWdpc3Ryby5hbGlhc2VzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gcmVnaXN0cm8uYWxpYXNlc1sxXVxuICAgICAgICAgICAgICAgICAgICA6IHJlZ2lzdHJvLmFsaWFzZXMgJiYgcmVnaXN0cm8uYWxpYXNlc1swXVxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWdpc3Ryby5hbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiU2luIGFsaWFzXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNMaW5rID0gYWxpYXNDZWxsLmNyZWF0ZUVsKFwiYVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGFsaWFzVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiBcImNsaWNrYWJsZS1hbGlhc1wiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFsaWFzTGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocmVnaXN0cm8uZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByZWdpc3Ryby5kZXNjcmlwY2lvbiB8fCBcIk5vIERlZmluaWRhXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQm90XHUwMEYzbiBcIlJldG9tYXJcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKFwiXHUyM0YxXHVGRTBGXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5yZXRvbWFyVGFyZWEocmVnaXN0cm8uaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicmV0b21hci1idG5cIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJSZXRvbWFyXCIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNlbGwuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZCh0YWJsZVdyYXBwZXIpO1xuICAgIFxuICAgICAgICAgICAgLy8gMy4gUmVzdGF1cmFyIGxhIHBvc2ljaVx1MDBGM24gZGUgc2Nyb2xsIGVuIGVsIG51ZXZvIGNvbnRlbmVkb3IgZGUgdGFibGEuXG4gICAgICAgICAgICB0YWJsZVdyYXBwZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGhheSByZWdpc3Ryb3MgZmluYWxpemFkb3MuXCIgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRnVuY2lcdTAwRjNuIHBhcmEgYWN0dWFsaXphciBkaW5cdTAwRTFtaWNhbWVudGUgZWwgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICovXG4vKipcbiAqIEZ1bmNpXHUwMEYzbiBwYXJhIGFjdHVhbGl6YXIgZGluXHUwMEUxbWljYW1lbnRlIGVsIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICovXG5hbGVydGFFamVjdXRhZGEyNTogYm9vbGVhbiA9IGZhbHNlO1xuXG4vKipcbiAqIEZ1bmNpXHUwMEYzbiBwYXJhIGFjdHVhbGl6YXIgZGluXHUwMEUxbWljYW1lbnRlIGVsIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICogTW9kaWZpY2FkYSBwYXJhIHNvcG9ydGFyIGRcdTAwRURhcyBjb24gdGlsZGVzIGNvbW8gXCJNaVx1MDBFOXJjb2xlc1wiIHkgXCJTXHUwMEUxYmFkb1wiXG4gKi9cbmFjdHVhbGl6YXJUaWVtcG9FbkVqZWN1Y2lvbihlbGVtZW50OiBIVE1MRWxlbWVudCwgaG9yYUluaWNpbzogc3RyaW5nKSB7XG4gICAgY29uc3QgZXh0cmFlckhvcmEgPSAoZmVjaGFTdHI6IHN0cmluZyk6IERhdGUgfCBudWxsID0+IHtcbiAgICAgICAgLy8gUmVnZXggbW9kaWZpY2FkbyBwYXJhIGlnbm9yYXIgZWwgbm9tYnJlIGRlbCBkXHUwMEVEYSAoY29uIG8gc2luIHRpbGRlcylcbiAgICAgICAgLy8gQ2FwdHVyYSBzb2xvIGxhIGZlY2hhIHkgbGEgaG9yYVxuICAgICAgICBjb25zdCBtYXRjaCA9IGZlY2hhU3RyLm1hdGNoKC8oXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxzK1xcUytcXHMrKFxcZHsyfTpcXGR7Mn0pLyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGAke21hdGNoWzFdfVQke21hdGNoWzJdfTowMGApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICBjb25zdCBpbmljaW8gPSBleHRyYWVySG9yYShob3JhSW5pY2lvKTtcbiAgICBpZiAoIWluaWNpbykge1xuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gXCJUaWVtcG8gdHJhbnNjdXJyaWRvOiBObyBkaXNwb25pYmxlXCI7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjYWxjdWxhclRpZW1wbyA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYWhvcmEgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCBkaWZlcmVuY2lhID0gTWF0aC5mbG9vcigoYWhvcmEuZ2V0VGltZSgpIC0gaW5pY2lvLmdldFRpbWUoKSkgLyAxMDAwKTtcbiAgICAgICAgY29uc3QgaG9yYXMgPSBNYXRoLmZsb29yKGRpZmVyZW5jaWEgLyAzNjAwKTtcbiAgICAgICAgY29uc3QgbWludXRvcyA9IE1hdGguZmxvb3IoKGRpZmVyZW5jaWEgJSAzNjAwKSAvIDYwKTtcbiAgICAgICAgY29uc3Qgc2VndW5kb3MgPSBkaWZlcmVuY2lhICUgNjA7XG5cbiAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGBUaWVtcG8gdHJhbnNjdXJyaWRvOiAke2hvcmFzfWggJHttaW51dG9zfW0gJHtzZWd1bmRvc31zYDtcblxuICAgICAgICAvLyBDdWFuZG8gc2UgYWxjYW56YSBvIHN1cGVyYSAyNSBtaW51dG9zICgxNTAwIHNlZ3VuZG9zKVxuICAgICAgICBpZiAoZGlmZXJlbmNpYSA+PSAxNTAwKSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJ0aWVtcG8tcm9qb1wiKTsgICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInRpZW1wby1yb2pvXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEFjdHVhbGl6YSBpbm1lZGlhdGFtZW50ZSB5IGx1ZWdvIGNhZGEgc2VndW5kb1xuICAgIGNhbGN1bGFyVGllbXBvKCk7XG4gICAgc2V0SW50ZXJ2YWwoY2FsY3VsYXJUaWVtcG8sIDEwMDApO1xufVxuICAgIFxuLyoqXG4gKiBGdW5jaVx1MDBGM24gcGFyYSBtb3N0cmFyIHVuIHByb21wdCB5IG9idGVuZXIgdW4gbnVldm8gdmFsb3JcbiAqL1xuYXN5bmMgbW9zdHJhclByb21wdChtZW5zYWplOiBzdHJpbmcsIHZhbG9yQWN0dWFsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIENyZWEgZWwgZm9uZG8gb3NjdXJvXG4gICAgICBjb25zdCBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBiYWNrZHJvcC5jbGFzc0xpc3QuYWRkKFwicHJvbXB0LW1vZGFsLWJhY2tkcm9wXCIpO1xuICBcbiAgICAgIC8vIENyZWEgZWwgbW9kYWxcbiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJwcm9tcHQtbW9kYWxcIik7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbWVuc2FqZTtcblxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbG9yQWN0dWFsOyAvLyBQcmVsbGVuYXIgY29uIGxhIGRlc2NyaXBjaVx1MDBGM24gYWN0dWFsXG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgICBjb25zdCBhY2VwdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYWNlcHRhci50ZXh0Q29udGVudCA9IFwiQWNlcHRhclwiO1xuICAgICAgICBhY2VwdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGlucHV0LnZhbHVlLnRyaW0oKSB8fCBudWxsKTsgLy8gUmV0b3JuYSBlbCB0ZXh0byBlc2NyaXRvXG4gICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNhbmNlbGFyLnRleHRDb250ZW50ID0gXCJDYW5jZWxhclwiO1xuICAgICAgICBjYW5jZWxhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTsgLy8gQ2FuY2VsYXIgc2luIGNhbWJpb3NcbiAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgYmFja2Ryb3AucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBlcm1pdGlyIGNvbmZpcm1hciBjb24gXCJFbnRlclwiXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhY2VwdGFyLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChhY2VwdGFyKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbGFyKTtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcblxuICAgICAgICBpbnB1dC5mb2N1cygpOyAvLyBFbmZvY2FyIGVsIGlucHV0IGF1dG9tXHUwMEUxdGljYW1lbnRlXG4gICAgfSk7XG59XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbm8gc2UgZW52aWFyXHUwMEUxIHVuIGZvcm11bGFyaW8gYWwgaGFjZXIgY2xpYyBlbiBcdTAwRTlsXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpOyAvLyBBZ3JlZ2EgdW5hIGNsYXNlIHBhcmEgZWwgZXN0aWxvIGRlbCBib3RcdTAwRjNuIHNpIGVzIG5lY2VzYXJpb1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgZWwgZXZlbnRvIGRlIGNsaWMgYWwgYm90XHUwMEYzblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIFxuLyoqXG4gKiBSZWVzY3JpYmUgZWwgZnJvbnRtYXR0ZXIgZW4gdW4gYXJjaGl2byBNYXJrZG93biwgcHJlc2VydmFuZG8gbGEgZXN0cnVjdHVyYSBvcmlnaW5hbC5cbiAqL1xucmVlc2NyaWJpckZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZywgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHlhbWxTdGFydCA9IGNvbnRlbnQuaW5kZXhPZignLS0tJyk7XG4gICAgY29uc3QgeWFtbEVuZCA9IGNvbnRlbnQuaW5kZXhPZignLS0tJywgeWFtbFN0YXJ0ICsgMyk7XG5cbiAgICBpZiAoeWFtbFN0YXJ0ID09PSAtMSB8fCB5YW1sRW5kID09PSAtMSkge1xuICAgICAgICByZXR1cm4gY29udGVudDsgLy8gU2kgbm8gaGF5IGZyb250bWF0dGVyLCBubyBtb2RpZmljYXIgbmFkYS5cbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0aXIgZWwgZnJvbnRtYXR0ZXIgZW4gWUFNTCBmb3JtYXRlYWRvIGNvcnJlY3RhbWVudGVcbiAgICBsZXQgbnVldm9Gcm9udG1hdHRlciA9ICctLS1cXG4nO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9udG1hdHRlcltrZXldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgLy8gU2kgZWwgY2FtcG8gZXMgdW5hIGxpc3RhLCBhc2VndXJhcnNlIGRlIHF1ZSBjYWRhIGVsZW1lbnRvIHNlIGZvcm1hdGVlIGNvcnJlY3RhbWVudGVcbiAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCR7a2V5fTpcXG5gO1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgJiYgaXRlbS5tYXRjaCgvXlxcW1xcWy4qXFxdXFxdJC8pKSB7XG4gICAgICAgICAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCAgLSBcIiR7aXRlbX1cIlxcbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgICAtICR7SlNPTi5zdHJpbmdpZnkoaXRlbSl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5tYXRjaCgvXlxcW1xcWy4qXFxdXFxdJC8pKSB7XG4gICAgICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgJHtrZXl9OiBcIiR7dmFsdWV9XCJcXG5gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAke2tleX06ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAke2tleX06ICR7dmFsdWV9XFxuYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gJy0tLVxcbic7XG5cbiAgICAvLyBPYnRlbmVyIGVsIGNvbnRlbmlkbyBwb3N0ZXJpb3IgYWwgZnJvbnRtYXR0ZXJcbiAgICBsZXQgY29udGVuaWRvUmVzdGFudGUgPSBjb250ZW50LnNsaWNlKHlhbWxFbmQgKyAzKS50cmltU3RhcnQoKTsgLy8gRWxpbWluYXIgc2FsdG9zIGRlIGxcdTAwRURuZWEgZXh0cmFcblxuICAgIC8vIEFncmVnYXIgdW5hIGxcdTAwRURuZWEgZW4gYmxhbmNvIHNvbG8gc2kgaGF5IGNvbnRlbmlkbyByZXN0YW50ZVxuICAgIHJldHVybiBudWV2b0Zyb250bWF0dGVyICsgKGNvbnRlbmlkb1Jlc3RhbnRlID8gJ1xcbicgKyBjb250ZW5pZG9SZXN0YW50ZSA6ICcnKTtcbn1cblxuLyoqXG4gKiBNdWVzdHJhIHVuIHNlbGVjdG9yIGRlIGZlY2hhIHkgaG9yYSBwYXJhIG1vZGlmaWNhciBsYSBob3JhIGRlIGluaWNpbyBkZWwgcmVnaXN0cm9cbiAqIFZlcnNpXHUwMEYzbiBjb3JyZWdpZGEgcGFyYSBwb3NpY2lvbmFyIGNvcnJlY3RhbWVudGUgZWwgbW9kYWxcbiAqL1xuYXN5bmMgbW9zdHJhclNlbGVjdG9ySG9yYUluaWNpbyhyZWdpc3RybzogYW55KSB7XG4gICAgLy8gRXh0cmFlciBsYSBmZWNoYSB5IGhvcmEgZGVsIGZvcm1hdG8gYWN0dWFsXG4gICAgbGV0IGhvcmFJbmljaW8gPSByZWdpc3Ryby5ob3JhSW5pY2lvO1xuICAgIGxldCBmZWNoYUhvcmEgPSB0aGlzLmV4dHJhZXJGZWNoYUhvcmEoaG9yYUluaWNpbyk7XG4gICAgXG4gICAgaWYgKCFmZWNoYUhvcmEpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gZXh0cmFlciBjb3JyZWN0YW1lbnRlIGxhIGZlY2hhIHkgaG9yYSBkZSBpbmljaW9cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gRm9ybWF0ZWFyIHBhcmEgZWwgaW5wdXQgZGF0ZXRpbWUtbG9jYWxcbiAgICBjb25zdCB2YWxvckluaWNpYWxJbnB1dCA9IGAke2ZlY2hhSG9yYS5mZWNoYX1UJHtmZWNoYUhvcmEuaG9yYX1gO1xuICAgIFxuICAgIC8vIENyZWFtb3MgdW4gb3ZlcmxheSBwYXJhIGVsIGZvbmRvIG9zY3Vyb1xuICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcInRpbWUtc2VsZWN0b3Itb3ZlcmxheVwiKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgIFxuICAgIC8vIENyZWFtb3MgZWwgbW9kYWxcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcInRpbWUtc2VsZWN0b3ItbW9kYWxcIik7XG4gICAgXG4gICAgLy8gVFx1MDBFRHR1bG9cbiAgICBjb25zdCB0aXR1bG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XG4gICAgdGl0dWxvLnRleHRDb250ZW50ID0gXCJNb2RpZmljYXIgaG9yYSBkZSBpbmljaW9cIjtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZCh0aXR1bG8pO1xuICAgIFxuICAgIC8vIENvbnRlbmVkb3IgZGUgaW5mb3JtYWNpXHUwMEYzblxuICAgIGNvbnN0IGluZm9Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGluZm9Db250YWluZXIuY2xhc3NMaXN0LmFkZChcInRpbWUtc2VsZWN0b3ItaW5mb1wiKTtcbiAgICBpbmZvQ29udGFpbmVyLmlubmVySFRNTCA9IGBcbiAgICAgICAgPHA+UmVnaXN0cm86IDxzdHJvbmc+JHtyZWdpc3Ryby5hbGlhc2VzPy5bMF0gfHwgXCJTaW4gYWxpYXNcIn08L3N0cm9uZz48L3A+XG4gICAgICAgIDxwPkhvcmEgYWN0dWFsOiA8c3Ryb25nPiR7aG9yYUluaWNpb308L3N0cm9uZz48L3A+XG4gICAgYDtcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChpbmZvQ29udGFpbmVyKTtcbiAgICBcbiAgICAvLyBJbnB1dCBwYXJhIHNlbGVjY2lvbmFyIG51ZXZhIGZlY2hhIHkgaG9yYVxuICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpbnB1dENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwidGltZS1zZWxlY3Rvci1pbnB1dC1jb250YWluZXJcIik7XG4gICAgXG4gICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgbGFiZWwudGV4dENvbnRlbnQgPSBcIk51ZXZhIGhvcmEgZGUgaW5pY2lvOlwiO1xuICAgIGxhYmVsLmh0bWxGb3IgPSBcIm5ldy1zdGFydC10aW1lXCI7XG4gICAgXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgaW5wdXQudHlwZSA9IFwiZGF0ZXRpbWUtbG9jYWxcIjtcbiAgICBpbnB1dC5pZCA9IFwibmV3LXN0YXJ0LXRpbWVcIjtcbiAgICBpbnB1dC52YWx1ZSA9IHZhbG9ySW5pY2lhbElucHV0O1xuICAgIFxuICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoaW5wdXRDb250YWluZXIpO1xuICAgIFxuICAgIC8vIEJvdG9uZXNcbiAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBidXR0b25zQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJ0aW1lLXNlbGVjdG9yLWJ1dHRvbnNcIik7XG4gICAgXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSBcIkNhbmNlbGFyXCI7XG4gICAgY2FuY2VsQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJ0aW1lLXNlbGVjdG9yLWJ1dHRvblwiLCBcImNhbmNlbC1idXR0b25cIik7XG4gICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobW9kYWwpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG92ZXJsYXkpO1xuICAgIH07XG4gICAgXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgc2F2ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiR3VhcmRhclwiO1xuICAgIHNhdmVCdXR0b24uY2xhc3NMaXN0LmFkZChcInRpbWUtc2VsZWN0b3ItYnV0dG9uXCIsIFwic2F2ZS1idXR0b25cIik7XG4gICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBudWV2YUZlY2hhSG9yYSA9IGlucHV0LnZhbHVlO1xuICAgICAgICBpZiAoIW51ZXZhRmVjaGFIb3JhKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBmZWNoYSB5IGhvcmEgdlx1MDBFMWxpZGFcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBmb3JtYXRvIElTTyBhIGZvcm1hdG8gcGVyc29uYWxpemFkbyB1c2FkbyBlbiBlbCByZWdpc3Ryb1xuICAgICAgICAvLyBGb3JtYXRvOiBcIllZWVktTU0tREQgZGRkZCBISDptbVwiXG4gICAgICAgIGNvbnN0IGZlY2hhID0gbmV3IERhdGUobnVldmFGZWNoYUhvcmEpO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBub21icmUgZGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYSBlbiBlc3BhXHUwMEYxb2xcbiAgICAgICAgY29uc3QgZGlhc1NlbWFuYSA9IFtcIkRvbWluZ29cIiwgXCJMdW5lc1wiLCBcIk1hcnRlc1wiLCBcIk1pXHUwMEU5cmNvbGVzXCIsIFwiSnVldmVzXCIsIFwiVmllcm5lc1wiLCBcIlNcdTAwRTFiYWRvXCJdO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzU2VtYW5hW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnN0cnVpciBsYSBjYWRlbmEgY29uIGVsIGZvcm1hdG8gcmVxdWVyaWRvXG4gICAgICAgIGNvbnN0IGFcdTAwRjFvID0gZmVjaGEuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgY29uc3QgbWVzID0gU3RyaW5nKGZlY2hhLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBkaWEgPSBTdHJpbmcoZmVjaGEuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBob3JhcyA9IFN0cmluZyhmZWNoYS5nZXRIb3VycygpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBtaW51dG9zID0gU3RyaW5nKGZlY2hhLmdldE1pbnV0ZXMoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUZvcm1hdGVhZGEgPSBgJHthXHUwMEYxb30tJHttZXN9LSR7ZGlhfSAke2RpYVNlbWFuYX0gJHtob3Jhc306JHttaW51dG9zfWA7XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGxhIGhvcmEgZGUgaW5pY2lvIGVuIGVsIGFyY2hpdm9cbiAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFySG9yYUluaWNpbyhyZWdpc3Ryby5maWxlLCBudWV2YUhvcmFGb3JtYXRlYWRhKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENlcnJhciBlbCBtb2RhbFxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1vZGFsKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChvdmVybGF5KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZnJlc2NhciBsYSB2aXN0YVxuICAgICAgICB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpO1xuICAgIH07XG4gICAgXG4gICAgYnV0dG9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xuICAgIGJ1dHRvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoc2F2ZUJ1dHRvbik7XG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoYnV0dG9uc0NvbnRhaW5lcik7XG4gICAgXG4gICAgLy8gQVx1MDBGMWFkaXIgZWwgbW9kYWwgYWwgRE9NXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtb2RhbCk7XG4gICAgXG4gICAgLy8gQ09SUkVHSURPOiBZYSBubyB0cmF0YW1vcyBkZSBjYWxjdWxhciBsYSBwb3NpY2lcdTAwRjNuIG1hbnVhbG1lbnRlXG4gICAgLy8gRWwgbW9kYWwgc2UgY2VudHJhclx1MDBFMSBhdXRvbVx1MDBFMXRpY2FtZW50ZSBjb24gdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSlcbiAgICBcbiAgICAvLyBFbmZvY2FyIGVsIGlucHV0XG4gICAgaW5wdXQuZm9jdXMoKTtcbn1cblxuLyoqXG4gKiBFeHRyYWUgbGEgZmVjaGEgeSBob3JhIGRlIHVuYSBjYWRlbmEgY29uIGZvcm1hdG8gXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIlxuICovXG5leHRyYWVyRmVjaGFIb3JhKGZlY2hhU3RyOiBzdHJpbmcpOiB7IGZlY2hhOiBzdHJpbmcsIGhvcmE6IHN0cmluZyB9IHwgbnVsbCB7XG4gICAgLy8gUmVnZXggcGFyYSBleHRyYWVyIGxhIGZlY2hhIHkgbGEgaG9yYVxuICAgIGNvbnN0IG1hdGNoID0gZmVjaGFTdHIubWF0Y2goLyhcXGR7NH0tXFxkezJ9LVxcZHsyfSlcXHMrXFxTK1xccysoXFxkezJ9OlxcZHsyfSkvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZlY2hhOiBtYXRjaFsxXSxcbiAgICAgICAgICAgIGhvcmE6IG1hdGNoWzJdXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEFjdHVhbGl6YSBsYSBob3JhIGRlIGluaWNpbyBlbiBlbCBmcm9udG1hdHRlciBkZWwgYXJjaGl2b1xuICovXG5hc3luYyBhY3R1YWxpemFySG9yYUluaWNpbyhmaWxlOiBURmlsZSwgbnVldmFIb3JhSW5pY2lvOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBMZWVyIGVsIGNvbnRlbmlkbyBhY3R1YWwgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1c2NhciB5IHJlZW1wbGF6YXIgbGEgbFx1MDBFRG5lYSBob3JhSW5pY2lvIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IG51ZXZvQ29udGVuaWRvID0gY29udGVuaWRvLnJlcGxhY2UoXG4gICAgICAgICAgICAvaG9yYUluaWNpbzpcXHMqLiooPz1cXG4pLyxcbiAgICAgICAgICAgIGBob3JhSW5pY2lvOiAke251ZXZhSG9yYUluaWNpb31gXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBHdWFyZGFyIGVsIGFyY2hpdm8gbW9kaWZpY2Fkb1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbnVldm9Db250ZW5pZG8pO1xuICAgICAgICBcbiAgICAgICAgbmV3IE5vdGljZShcIkhvcmEgZGUgaW5pY2lvIGFjdHVhbGl6YWRhIGNvcnJlY3RhbWVudGVcIik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgbGEgaG9yYSBkZSBpbmljaW86XCIsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGFsIGFjdHVhbGl6YXIgbGEgaG9yYSBkZSBpbmljaW9cIik7XG4gICAgfVxufVxuICAgIFxufVxuIiwgIi8qIEZpbGUgTG9jYXRpb246ICBzcmMvbW9kdWxlcy9tb2R1bG9HVEQvaW5kZXgudHMgKi9cbmltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvR1REIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBtb2R1bG9HVEQ6IE1vZHVsb0dURCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZHVsb0dURCkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vZHVsb0dURCkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgZGVzYWN0aXZhZG8sIG5vIGhhY2VyIG5hZGFcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICAgdGhpcy5tb2R1bG9HVEQgPSBudWxsO1xuICAgIH1cblxuXG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb0dURC9jb21tYW5kcy50c1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBpbmdyZXNhckJhbmRlamFFbnRyYWRhIH0gZnJvbSBcIi4vaW5ib3hcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBDb21hbmRvIHBhcmEgaW5ncmVzYXIgYSBsYSBiYW5kZWphIGRlIGVudHJhZGFcbiAgICBjb25zdCBpbmJveENvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImluZ3Jlc2FyLWluYm94XCIsXG4gICAgICAgIG5hbWU6IFwiSW5ncmVzYXIgQmFuZGVqYSBkZSBFbnRyYWRhIC0+IEluYm94XCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBpbmdyZXNhckJhbmRlamFFbnRyYWRhKHBsdWdpbik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdHJhciBsb3MgSURzIGRlIGxvcyBjb21hbmRvcyBwYXJhIHBvZGVyIGRlc2FjdGl2YXJsb3MgZGVzcHVcdTAwRTlzXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1REID0gcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1REIHx8IFtdO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURC5wdXNoKGluYm94Q29tbWFuZC5pZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURCkgcmV0dXJuO1xuICAgIFxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURC5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICBjb21tYW5kLmNhbGxiYWNrID0gKCkgPT4gbmV3IE5vdGljZShcIkVzdGUgY29tYW5kbyBoYSBzaWRvIGRlc2FjdGl2YWRvLlwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIExpbXBpYXIgZWwgYXJyYXkgZGUgY29tYW5kb3MgcmVnaXN0cmFkb3NcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQgPSBbXTtcbn0iLCAiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4sIFRGaWxlLCBNYXJrZG93blZpZXcsIEFsZXJ0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7XG5pbXBvcnQgeyBCYW5kZWphRGVFbnRyYWRhTW9kYWx9IGZyb20gJy4uL21vZGFsZXMvaW5ib3hNb2RhbCdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluZ3Jlc2FyQmFuZGVqYUVudHJhZGEocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBsZXQgaW5ib3hQYXRoID0gYCR7cGx1Z2luLnNldHRpbmdzLmZpbGVfSW5ib3h9Lm1kYDtcbiAgICBsZXQgaW5ib3hGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChpbmJveFBhdGgpO1xuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblxuICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IGFyY2hpdm8gYWN0aXZvXCIpO1xuICAgICAgICByZXR1cm47IC8vIEFzZWd1cmEgcXVlIGhheSB1biBhcmNoaXZvIGFjdGl2byBhbnRlcyBkZSBjb250aW51YXJcbiAgICB9XG4gICAgbGV0IGluYm94O1xuXG5cbiAgICAvLyBVc28gZGVsIE1vZGFsXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQmFuZGVqYURlRW50cmFkYU1vZGFsKHBsdWdpbi5hcHApO1xuICAgIG1vZGFsLm9wZW4oKTtcblxuICAgIGNvbnN0IHsgdGV4dCwgc2F2ZUluQ3VycmVudCB9ID0gYXdhaXQgbW9kYWwud2FpdEZvcklucHV0KCk7XG4gICAgXG4gICAgaWYgKHRleHQubGVuZ3RoIDwgMykge1xuICAgICAgICBuZXcgTm90aWNlKFwiSW5ib3ggY2FuY2VsYWRhXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICB9XG4gICAgbGV0IGRlc3Rpbm8gPSBzYXZlSW5DdXJyZW50ID8gYWN0aXZlRmlsZSA6IGluYm94RmlsZTtcbiAgICBsZXQgaG95ID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXktTU0tZGQnKTtcbiAgICBsZXQgaG9yYSA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCdISDptbScpO1xuICAgIGluYm94ID0gYC0gWyBdIFx1RDgzRVx1RERFMCAke3RleHR9ICNpbmJveCBbY3JlYXRlZDo6ICR7aG95fV0gYSBsYXMgJHtob3JhfVxcbmA7XG5cbiAgICBcbiAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIGVzY3JpYmlyIGVuIGVsIGFyY2hpdm9cbiAgICBpZiAoZGVzdGlubyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGlmIChkZXN0aW5vID09PSBpbmJveEZpbGUpIHtcbiAgICAgICAgICAgIC8vIE1hbmVqYW1vcyBsYSBwcm9tZXNhIGNvbiAudGhlbigpIHkgLmNhdGNoKCkgcGFyYSBlbCBtYW5lam8gZGUgZXJyb3Jlc1xuICAgICAgICAgICAgaW5zZXJ0QXRTdGFydFVzaW5nUHJvY2VzcyhpbmJveCwgZGVzdGlubylcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGxhIHByb21lc2Egc2UgcmVzdWVsdmUgc2luIGVycm9yZXMsIG11ZXN0cmEgdW4gTm90aWNlXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJCYW5kZWphIGRlIGVudHJhZGEgYWN0dWFsaXphZGEgY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIG9jdXJyZSB1biBlcnJvciwgbXVlc3RyYSB1biBBbGVydFxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgYWwgYWdyZWdhciBjb250ZW5pZG8gYWwgaW5pY2lvIGRlbCBhcmNoaXZvOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCBpbnNlcnRJbmJveEF0Q3Vyc29yKGluYm94KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0SW5ib3hBdEN1cnNvcihpbmJveCkge1xuICAgIGRlYnVnZ2VyXG4gICAgY29uc3QgYWN0aXZlTGVhZiA9IGFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICBpZiAoYWN0aXZlTGVhZikge1xuICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVMZWFmLnZpZXcuc291cmNlTW9kZS5jbUVkaXRvcjtcbiAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGluYm94LCBjdXJzb3IpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0QXRTdGFydFVzaW5nUHJvY2VzcyhpbmJveCwgZmlsZSkge1xuICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHJldHVybjtcbiAgICAvLyBVdGlsaXphIFZhdWx0LnByb2Nlc3MgcGFyYSBtb2RpZmljYXIgZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0LnByb2Nlc3MoZmlsZSwgKGNvbnRlbnQpID0+IHtcbiAgICAgICAgLy8gQ29uY2F0ZW5hIGVsIHRleHRvIGRlIGVudHJhZGEgZW4gbGEgcHJpbWVyYSBsXHUwMEVEbmVhIHkgZWwgY29udGVuaWRvIG9yaWdpbmFsXG4gICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSBpbmJveCArIGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBuZXdDb250ZW50OyAvLyBSZXRvcm5hIGVsIG51ZXZvIGNvbnRlbmlkbyBwYXJhIHNlciBndWFyZGFkb1xuICAgIH0pO1xufVxuXG5cblxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBCYW5kZWphRGVFbnRyYWRhTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgaW5wdXRBcmVhOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIGNoZWNrQm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgcmVzb2x2ZXI6ICh2YWx1ZTogeyB0ZXh0OiBzdHJpbmc7IHNhdmVJbkN1cnJlbnQ6IGJvb2xlYW4gfSkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbEluYm94XCIpO1xuICAgICAgICBsZXQge2NvbnRlbnRFbH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoXCJCYW5kZWphIGRlIEVudHJhZGFcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnZ1ZWx2ZSBlbCBcdTAwRTFyZWEgZGUgdGV4dG8gZW4gdW4gZGl2IHBhcmEgY29udHJvbCBkZSBmbHVqb1xuICAgICAgICBsZXQgdGV4dEFyZWFEaXYgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICB0aGlzLmlucHV0QXJlYSA9IHRleHRBcmVhRGl2LmNyZWF0ZUVsKCd0ZXh0YXJlYScpO1xuICAgICAgICB0aGlzLmlucHV0QXJlYS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ0VzY3JpYmUgdHUgdGFyZWEgYXF1XHUwMEVELi4uJyk7XG4gICAgICAgIC8vIEFcdTAwRjFhZGUgdW4gbGlzdGVuZXIgZGUgZXZlbnRvICdrZXlkb3duJyBhbCB0ZXh0YXJlYVxuICAgICAgICB0aGlzLmlucHV0QXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIHRlY2xhIHByZXNpb25hZGEgZXMgRW50ZXIgeSBxdWUgbm8gaGF5YSBuaW5ndW5hIG1vZGlmaWNhY2lcdTAwRjNuIChzaGlmdCwgY3RybCwgYWx0KVxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5ICYmICFlLmN0cmxLZXkgJiYgIWUuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2aWVuZSBlbCBjb21wb3J0YW1pZW50byBwb3IgZGVmZWN0byBwYXJhIG5vIGluc2VydGFyIHVuYSBudWV2YSBsXHUwMEVEbmVhXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRGb3JtKCk7IC8vIExsYW1hIGEgbGEgZnVuY2lcdTAwRjNuIHF1ZSBtYW5lamEgZWwgZW52XHUwMEVEb1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XG4gICAgICAgIGxldCBuYW1lQWN0aXZlRmlsZSA9IG1ldGFkYXRhLmFsaWFzZXMgPyBtZXRhZGF0YS5hbGlhc2VzWzBdIDogYWN0aXZlRmlsZS5iYXNlbmFtZTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVudnVlbHZlIGVsIGNoZWNrYm94IHkgc3UgZXRpcXVldGEgZW4gdW4gZGl2IHBhcmEgY29udHJvbCBkZSBmbHVqb1xuICAgICAgICBsZXQgY2hlY2tCb3hEaXYgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICB0aGlzLmNoZWNrQm94ID0gY2hlY2tCb3hEaXYuY3JlYXRlRWwoJ2lucHV0Jywge3R5cGU6ICdjaGVja2JveCd9KTtcbiAgICAgICAgY2hlY2tCb3hEaXYuY3JlYXRlRWwoJ2xhYmVsJywge3RleHQ6IGBHdWFyZGFyIGVuICR7bmFtZUFjdGl2ZUZpbGV9YH0pLnByZXBlbmQodGhpcy5jaGVja0JveCk7XG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjaGVja0JveERpdi5jcmVhdGVFbCgnYnV0dG9uJywge3RleHQ6ICdHdWFyZGFyJ30pO1xuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zdWJtaXRGb3JtKCkpO1xuICAgIH1cbiAgICBcbiAgICBzdWJtaXRGb3JtKCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5pbnB1dEFyZWEudmFsdWU7XG4gICAgICAgIGNvbnN0IHNhdmVJbkN1cnJlbnQgPSB0aGlzLmNoZWNrQm94LmNoZWNrZWQ7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIoeyB0ZXh0LCBzYXZlSW5DdXJyZW50IH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgd2FpdEZvcklucHV0KCk6IFByb21pc2U8eyB0ZXh0OiBzdHJpbmc7IHNhdmVJbkN1cnJlbnQ6IGJvb2xlYW4gfT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N1YnNpc3RlbWFzQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMTkgMTM6MTE6MjZcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ5OjMzXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmludGVyZmFjZSBHcnVwb0FWIHtcbiAgZ3J1cG86IHN0cmluZztcbiAgYXY6IHN0cmluZztcbiAgdGV4dG86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIHN1YnNpc3RlbWFzQVBJIHtcbiAgY29uc3RydWN0b3IocGx1Z2luKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgfVxuXG4gIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgYXN5bmMgbW9zdHJhckJvdG9uQ3JlYXJBVihkdikge1xuICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYm90b25NZW51SG95LnRleHRDb250ZW50ID0gXCJQcm9jZXNhciBBcmVhcyBkZSBWaWRhXCI7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uTWVudUhveSk7XG5cbiAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJBVihkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgIH07XG4gIH1cblxuICBhc3luYyBtb3N0cmFyQm90b25DcmVhckFWVHJpbWVzdHJhbChkdikge1xuICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYm90b25NZW51SG95LnRleHRDb250ZW50ID0gXCJQcm9jZXNhciBBcmVhcyBkZSBWaWRhIGRlbCB0cmltZXN0cmVcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25NZW51SG95KTtcblxuICAgIGJvdG9uTWVudUhveS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNhckFWVHJpbWVzdHJlKGR2KTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHByb2Nlc2FyQVYoZHYpIHtcbiAgICAvLyBPYnRlbmVyIFFzIHBhcmEgcHJlZ3VudGFyIGVsIFEgcGFyYSBlbCBxdWUgZGVzZWEgY3JlYXIgbGFzIFx1MDBFMXJlYXMgZGUgdmlkYS5cbiAgICBjb25zdCBmb2xkZXJRID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfVHJpbWVzdHJhbFwiXTtcbiAgICBjb25zdCBmaWxlc1EgPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJRKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICk7XG4gICAgbGV0IHFDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzUSkge1xuICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgaWYgKG1ldGFkYXRhPy50eXBlID09PSBcIlRRXCIgJiYgbWV0YWRhdGE/LnRyaW1lc3RyZSkge1xuICAgICAgICBsZXQgcUFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ocUFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgcUNyZWFkb3MucHVzaChxQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBxID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiLnRyaW1lc3RyZSksXG4gICAgICBxQ3JlYWRvcy5tYXAoKGIpID0+IGIpLFxuICAgICAgdHJ1ZSxcbiAgICAgIGBEZSBxdWUgdHJpbWVzdHJlIHZhbW9zIGEgcHJvY2VzYXIgdHVzIEFyZWFzIGRlIFZpZGFgXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHRhZG9BVjogR3J1cG9BVltdID0gW107XG4gICAgY29uc3QgZmlsZUNhbXBvcyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGVDYW1wb3MgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQ2FtcG9zKTtcbiAgICAgICAgY29uc3QgYXJyZWdsb0FWID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5BcmVhc1ZpZGEgfHwgW107XG4gICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9BVikpIHtcbiAgICAgICAgICBhcnJlZ2xvQVYuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICByZXN1bHRhZG9BVi5wdXNoKHtcbiAgICAgICAgICAgICAgICBncnVwbzogaXRlbVswXSxcbiAgICAgICAgICAgICAgICBhdjogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICB0ZXh0bzogaXRlbVswXSArIFwiIC8gXCIgKyBpdGVtWzFdLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgYmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhO1xuXG4gICAgLy8gLS4uLT4gUmV2aXNpXHUwMEYzbiBkZSBlc2NlbmFyaW9zLlxuXG4gICAgZm9yIChsZXQgYXJlYVZpZGEgb2YgcmVzdWx0YWRvQVYpIHtcbiAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgZXhpc3RlIGVuIGxhIHViaWNhY2lcdTAwRjNuIGVzcGVjXHUwMEVEZmljYVxuICAgICAgY29uc3QgZnVsbEZvbGRlclBhdGggPSBgJHtiYXNlUGF0aH0vJHthcmVhVmlkYS5hdn1gO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsRm9sZGVyUGF0aCk7XG5cbiAgICAgIC8vUDAgLT4gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBwYXRoL2FyZWFWaWRhIGV4aXN0ZVxuICAgICAgLy9QMCAtIFNJXG4gICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlICR7YmFzZVBhdGh9LmApO1xuICAgICAgICAvLyBBaG9yYSwgdmVyaWZpY2Egc2kgbGEgbm90YSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGFcbiAgICAgICAgY29uc3QgaW5zdGFuY2VzT2ZBViA9IGFwcC52YXVsdFxuICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmdWxsRm9sZGVyUGF0aCkgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICAgICApO1xuICAgICAgICAvLyBQMSBFeGlzdGUgbm9kZUFyZWFWaWRhP1xuICAgICAgICBjb25zdCBub2RlQVZFeGlzdHMgPSBpbnN0YW5jZXNPZkFWLnNvbWUoXG4gICAgICAgICAgKGZpbGUpID0+IGZpbGUuYmFzZW5hbWUgPT09IGFyZWFWaWRhLmF2XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUDEgU0lcbiAgICAgICAgaWYgKG5vZGVBVkV4aXN0cykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAyIGFyZWFWaWRhIFEgRXhpc3RlP1xuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDEgLSBOTyAobm9kZUFyZWFWaWRhIG5vIEV4aXN0ZSlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgLy8gQ2FzbyAzIHkgNFxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgICAgLy9QMyAtPiBTSVxuICAgICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAgIC8vIFAyIC4uIC0+IFNpIHkgTm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gUE8gLT4gTk8gKExhIENhcnBldGEgbm8gZXhpc3RlKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBhXHUwMEZBbiBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYFxuICAgICAgICApO1xuICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgLy8gUDMgLT4gU0lcbiAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgIC8vIFAyXG4gICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgIH1cbiAgICAgICAgLy8gUDMgLT4gRXNjYXBlXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBGaW4gRm9yIEFyZWFzVmlkYSBmaWxlQ2FtcG9zXG4gIH0gLy8gRmluIHByb2Nlc2FyQVYoKVxuXG5cbiAgYXN5bmMgcHJvY2VzYXJBVlRyaW1lc3RyZShkdikge1xuICAgIFxuICAgIGxldCBxID0ge307IFxuICAgIHEudHJpbWVzdHJlID0gZHYuY3VycmVudCgpLnRyaW1lc3RyZTtcbiAgICBjb25zdCByZXN1bHRhZG9BVjogR3J1cG9BVltdID0gW107XG4gICAgY29uc3QgZmlsZUNhbXBvcyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGVDYW1wb3MgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQ2FtcG9zKTtcbiAgICAgICAgY29uc3QgYXJyZWdsb0FWID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5BcmVhc1ZpZGEgfHwgW107XG4gICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9BVikpIHtcbiAgICAgICAgICBhcnJlZ2xvQVYuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICByZXN1bHRhZG9BVi5wdXNoKHtcbiAgICAgICAgICAgICAgICBncnVwbzogaXRlbVswXSxcbiAgICAgICAgICAgICAgICBhdjogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICB0ZXh0bzogaXRlbVswXSArIFwiIC8gXCIgKyBpdGVtWzFdLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgYmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhO1xuXG4gICAgLy8gLS4uLT4gUmV2aXNpXHUwMEYzbiBkZSBlc2NlbmFyaW9zLlxuXG4gICAgZm9yIChsZXQgYXJlYVZpZGEgb2YgcmVzdWx0YWRvQVYpIHtcbiAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgZXhpc3RlIGVuIGxhIHViaWNhY2lcdTAwRjNuIGVzcGVjXHUwMEVEZmljYVxuICAgICAgY29uc3QgZnVsbEZvbGRlclBhdGggPSBgJHtiYXNlUGF0aH0vJHthcmVhVmlkYS5hdn1gO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsRm9sZGVyUGF0aCk7XG5cbiAgICAgIC8vUDAgLT4gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBwYXRoL2FyZWFWaWRhIGV4aXN0ZVxuICAgICAgLy9QMCAtIFNJXG4gICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlICR7YmFzZVBhdGh9LmApO1xuICAgICAgICAvLyBBaG9yYSwgdmVyaWZpY2Egc2kgbGEgbm90YSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGFcbiAgICAgICAgY29uc3QgaW5zdGFuY2VzT2ZBViA9IGFwcC52YXVsdFxuICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmdWxsRm9sZGVyUGF0aCkgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICAgICApO1xuICAgICAgICAvLyBQMSBFeGlzdGUgbm9kZUFyZWFWaWRhP1xuICAgICAgICBjb25zdCBub2RlQVZFeGlzdHMgPSBpbnN0YW5jZXNPZkFWLnNvbWUoXG4gICAgICAgICAgKGZpbGUpID0+IGZpbGUuYmFzZW5hbWUgPT09IGFyZWFWaWRhLmF2XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUDEgU0lcbiAgICAgICAgaWYgKG5vZGVBVkV4aXN0cykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAyIGFyZWFWaWRhIFEgRXhpc3RlP1xuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDEgLSBOTyAobm9kZUFyZWFWaWRhIG5vIEV4aXN0ZSlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgLy8gQ2FzbyAzIHkgNFxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgICAgLy9QMyAtPiBTSVxuICAgICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAgIC8vIFAyIC4uIC0+IFNpIHkgTm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gUE8gLT4gTk8gKExhIENhcnBldGEgbm8gZXhpc3RlKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBhXHUwMEZBbiBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYFxuICAgICAgICApO1xuICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgLy8gUDMgLT4gU0lcbiAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgIC8vIFAyXG4gICAgICAgICAgYXdhaXQgdGhpcy52YWxpZGFjaW9uQVZRKGZ1bGxGb2xkZXJQYXRoLCBxLCBhcmVhVmlkYSk7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgIH1cbiAgICAgICAgLy8gUDMgLT4gRXNjYXBlXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBGaW4gRm9yIEFyZWFzVmlkYSBmaWxlQ2FtcG9zXG4gIH0gLy8gRmluIHByb2Nlc2FyQVZUcmltZXN0cmUoKVxuXG5cbiAgLy9QMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgYXN5bmMgdmFsaWRhY2lvbkFWUShcbiAgICBmdWxsRm9sZGVyUGF0aDogc3RyaW5nLFxuICAgIHE6IGFueSxcbiAgICBhcmVhVmlkYTogYW55XG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHBhdGhBVlEgPSBgJHtmdWxsRm9sZGVyUGF0aH0vJHtxLnRyaW1lc3RyZX0gLSAke2FyZWFWaWRhLmF2fS5tZGA7XG4gICAgY29uc3QgZmlsZUFWUSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aEFWUSk7XG4gICAgZGVidWdnZXI7XG4gICAgLy8gVmVyaWZpY2FyIHNpIGVsIEFWIGRlIFEgRXhpc3RlXG4gICAgLy8gUDIgU0lcbiAgICAvLyBDQVNPIDRcbiAgICAvLyBDQVNPIDVcbiAgICBpZiAoZmlsZUFWUSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgbGV0IG5leHRTdGVwID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBbXG4gICAgICAgICAgXCJBY3R1YWxpemFyIGVzdGFkbyBkZWwgQVZcIixcbiAgICAgICAgICBcIkJvcnJhciB5IENyZWFyIGRlIG51ZXZvIGVsIEFWXCIsXG4gICAgICAgICAgXCJEZWphciBlbCBBViBjb21vIGVzdFx1MDBFMSBcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1widXBkXCIsIFwiZGVsK2NyZVwiLCBcImNvbnRpbnVlXCJdLFxuICAgICAgICB0cnVlLFxuICAgICAgICBgXHUwMEJGJHtxLnRyaW1lc3RyZX0gJHthcmVhVmlkYS5hdn0geWEgZXhpc3RlLiBFbGlnZSB1bmEgb3BjaVx1MDBGM246YFxuICAgICAgKTtcbiAgICAgIHN3aXRjaCAobmV4dFN0ZXApIHtcbiAgICAgICAgY2FzZSBcInVwZFwiOlxuICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphckFWUShmaWxlQVZRKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImRlbCtjcmVcIjpcbiAgICAgICAgICBhd2FpdCB0aGlzLmJvcnJhckFWUShmaWxlQVZRKTtcbiAgICAgICAgICBhd2FpdCB0aGlzLmFncmVnYXJBVlEoYXJlYVZpZGEsIHEudHJpbWVzdHJlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImNvbnRpbnVlXCI6XG4gICAgICAgICAgY29uc29sZS5sb2coYENvbnRpbnVhciBzaW4gaGFjZXIgbmFkYSBjb24gJHtmaWxlQVZRLmJhc2VuYW1lfWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy8gU2kgQVYgZGUgUSBleGlzdGUgKDEpIG11ZXN0cmEgZWwgZXN0YWRvIHkgcGVybWl0ZSBjYW1iaWFybG8uXG4gICAgfVxuICAgIC8vIFAyIE5PXG4gICAgLy8gLT4+IENBU08gMVxuICAgIC8vIC0+PiBDQVNPIDNcbiAgICAvLyAtLT4gQ0FTTyA2XG4gICAgZWxzZSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIC8vIFNpIEFWIGRlIFEgbm8gRXhpc3RlICgyKSBBZ3JlZ2EgQXJlYVZpZGEgZGUgUSwgcHJlZ3VudGFuZG8gZW4gcXVlIGVzdGFkbyBxdWllcmUgdGVuZXIgZXNhIEFWIGVzZSBRXG4gICAgICBhd2FpdCB0aGlzLmFncmVnYXJBVlEoYXJlYVZpZGEsIHEudHJpbWVzdHJlKTtcbiAgICB9XG4gIH1cblxuICAvLyBQMyBBZ3JlZ2FyIG5vZG9BcmVhVmlkYT9cbiAgYXN5bmMgYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSkge1xuICAgIC8vIHByZWd1bnRhciBwcmltZXJvIHNpIHNpIGxvIGRlc2VhIGFncmVnYXIuXG5cbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBhZ3JlZ2FyID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICB0cnVlLFxuICAgICAgYFx1MDBCRkRlc2VhcyBhZ3JlZ2FyICR7YXJlYVZpZGEuYXZ9IGEgdHUgc2lzdGVtYSBkZSBnZXN0aVx1MDBGM24/YFxuICAgICk7XG4gICAgLy8gUDMgU0lcbiAgICBpZiAoYWdyZWdhcikge1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX0FyZWFzVmlkYWBdXG4gICAgICB9L1BsdCAtIG5vZG9BcmVhc1ZpZGEubWRgO1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBub2RvQXJlYVZpZGEgdGVtcGxhdGUgZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHRlbXBsYXRlIG5vZG9BcmVhVmlkYSBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmlsZW5hbWUgPSBhcmVhVmlkYS5ncnVwbyArIFwiIC0gXCIgKyBhcmVhVmlkYS5hdjtcbiAgICAgIGxldCBmb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9BcmVhc1ZpZGFgXX0vJHtcbiAgICAgICAgYXJlYVZpZGEuYXZcbiAgICAgIH1gO1xuICAgICAgLy8gU2UgYXNlZ3VyYSBkZSBxdWUgbGEgY2FycGV0YSBleGlzdGEgcGFyYSBwb2RlciBjcmVhciBlbCBhcmNoaXZvIGRpcmVjdGFtZW50ZSBlbiBlc2EgY2FycGV0YVxuICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyUGF0aCk7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgICAgbGV0IGNyZWFyTm90YTogKFxuICAgICAgICB0ZW1wbGF0ZTogVEZpbGUsXG4gICAgICAgIGZpbGVuYW1lOiBzdHJpbmcsXG4gICAgICAgIG92ZXJ3cml0ZTogYm9vbGVhbixcbiAgICAgICAgZm9sZGVyOiBURm9sZGVyXG4gICAgICApID0+IFByb21pc2U8dm9pZD47XG4gICAgICBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IG5vdGEgPSBhd2FpdCBjcmVhck5vdGEodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY3JlYW5kbyBOb2RvQXJlYVZpZGE6IFwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFncmVnYXJBVlEoYXJlYVZpZGE6IGFueSwgdHJpbWVzdHJlOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYX0vUGx0IC0gQXJlYXNWaWRhLm1kYDtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgaWYgKCEodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgIHJldHVybiBmYWxzZTsgLy8gQXNlZ3VyYSBxdWUgbGEgZnVuY2lcdTAwRjNuIHJldG9ybmEgdW4gYm9vbGVhbm8gaW5jbHVzbyBlbiBjYXNvIGRlIGVycm9yLlxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gYCR7dHJpbWVzdHJlfSAtLSAke2FyZWFWaWRhLmF2fSAtLSAke2FyZWFWaWRhLmdydXBvfWA7XG4gICAgbGV0IGZvbGRlclBhdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX0FyZWFzVmlkYWBdfS8ke1xuICAgICAgYXJlYVZpZGEuYXZcbiAgICB9YDtcbiAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpIGFzIFRGb2xkZXI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBcIkluYm94XCIgcmVhbG1lbnRlIGV4aXN0YSB5IHNlYSB1biBURm9sZGVyLlxuXG4gICAgLy8gQXN1bWllbmRvIHF1ZSBlbCB0aXBvIGRlIGBmb2xkZXJgIGVzIGNvcnJlY3RvIHkgcXVlIGNyZWFyTm90YSBlcyB1bmEgZnVuY2lcdTAwRjNuIGFzaW5jclx1MDBGM25pY2EgcXVlIGRldnVlbHZlIHZvaWQuXG4gICAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIGFzIChcbiAgICAgIHRlbXBsYXRlOiBURmlsZSxcbiAgICAgIGZpbGVuYW1lOiBzdHJpbmcsXG4gICAgICBvdmVyd3JpdGU6IGJvb2xlYW4sXG4gICAgICBmb2xkZXI6IFRGb2xkZXJcbiAgICApID0+IFByb21pc2U8dm9pZD47XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWFuZG8gQXJlYVZpZGE6IFwiLCBlcnJvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYm9ycmFyQVZRKGZpbGVBVlEpIHtcbiAgICBjb25zb2xlLmxvZyhgTG9naWNhIGRlIGJvcnJhZG8gZGUgJHtmaWxlQVZRLmJhc2VuYW1lfWApO1xuICAgIHRyeSB7XG4gICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSBmaWxlQVZRIGVzIHVuIG9iamV0byBURmlsZSB2XHUwMEUxbGlkb1xuICAgICAgaWYgKGZpbGVBVlEgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGZpbGVBVlEpOyAvLyBCb3JyYXIgZWwgYXJjaGl2b1xuICAgICAgICBjb25zb2xlLmxvZyhgJHtmaWxlQVZRLmJhc2VuYW1lfSBoYSBzaWRvIGJvcnJhZG8gY29uIFx1MDBFOXhpdG8uYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgIGAke2ZpbGVBVlEuYmFzZW5hbWV9IG5vIGVzIHVuIGFyY2hpdm8gdlx1MDBFMWxpZG8gbyBubyBleGlzdGUuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgaW50ZW50YXIgYm9ycmFyICR7ZmlsZUFWUS5iYXNlbmFtZX06YCwgZXJyKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3R1YWxpemFyQVZRKGZpbGVBVlEpIHtcbiAgICBjb25zb2xlLmxvZyhgTG9naWNhIGRlIGFjdHVhbGl6YWNpXHUwMEYzbiBkZSBlc3RhZG8gZGUgJHtmaWxlQVZRLmJhc2VuYW1lfWApO1xuXG4gICAgLy8gT2J0ZW5lciBhY2Nlc28gYSBmdW5jaW9uZXMgZGVsIHNpc3RlbWEgeSBtZXRhZGF0YUNhY2hlXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgbWV0YWRhdGFDYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQVZRKTtcblxuICAgIC8vIEluaWNpYWxpemFyIHZhcmlhYmxlc1xuICAgIGxldCBlc3RhZG9BY3R1YWwgPSBcIlwiO1xuICAgIGxldCBudWV2b0VzdGFkbyA9IFwiXCI7XG5cbiAgICAvLyBPYnRlbmVyIGVsIGVzdGFkbyBhY3R1YWwgZGVzZGUgZWwgZnJvbnRtYXR0ZXIgdXNhbmRvIG1ldGFkYXRhQ2FjaGVcbiAgICBpZiAoXG4gICAgICBtZXRhZGF0YUNhY2hlLmZyb250bWF0dGVyICYmXG4gICAgICBtZXRhZGF0YUNhY2hlLmZyb250bWF0dGVyLmhhc093blByb3BlcnR5KFwiZXN0YWRvXCIpXG4gICAgKSB7XG4gICAgICBlc3RhZG9BY3R1YWwgPSBtZXRhZGF0YUNhY2hlLmZyb250bWF0dGVyLmVzdGFkbztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJObyBzZSBlbmNvbnRyXHUwMEYzIGVsIGVzdGFkbyBhY3R1YWwgZW4gZWwgZnJvbnRtYXR0ZXIuXCIpO1xuICAgICAgcmV0dXJuOyAvLyBTYWxpciBzaSBubyBoYXkgZXN0YWRvIGFjdHVhbFxuICAgIH1cblxuICAgIC8vIE1vc3RyYXIgZWwgc3VnZ2VzdGVyIHBhcmEgc2VsZWNjaW9uYXIgZWwgbnVldm8gZXN0YWRvXG4gICAgdHJ5IHtcbiAgICAgIG51ZXZvRXN0YWRvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBbXCJcdUQ4M0RcdUREMzUgLT4gQXJjaGl2YWRvXCIsIFwiXHVEODNEXHVERkUyIC0+IEFjdGl2b1wiLCBcIlx1RDgzRFx1REZFMSAtPiBFbiBQYXVzYVwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSwgLy8gb3BjaW9uZXMgcGFyYSBtb3N0cmFyXG4gICAgICAgIFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLCBcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgLy8gdmFsb3JlcyBhIHJldG9ybmFyXG4gICAgICAgIGZhbHNlLCAvLyBwZXJtaXRlIHNlbGVjY2lcdTAwRjNuIG1cdTAwRkFsdGlwbGVcbiAgICAgICAgYCR7ZmlsZUFWUS5iYXNlbmFtZX0gZXN0XHUwMEUxICR7ZXN0YWRvQWN0dWFsfS4gQXNpZ25hciBlc3RhZG86YCAvLyBtZW5zYWplXG4gICAgICApO1xuXG4gICAgICAvLyBWZXJpZmljYXIgc2kgc2Ugc2VsZWNjaW9uXHUwMEYzIHVuIG51ZXZvIGVzdGFkb1xuICAgICAgaWYgKCFudWV2b0VzdGFkbykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNlIHNlbGVjY2lvblx1MDBGMyB1biBudWV2byBlc3RhZG8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFNhbGlyIHNpIG5vIHNlIHNlbGVjY2lvblx1MDBGMyB1biBudWV2byBlc3RhZG9cbiAgICAgIH1cblxuICAgICAgLy8gQWN0dWFsaXphciBlbCBlc3RhZG8gZW4gZWwgZnJvbnRtYXR0ZXJcbiAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZUFWUSwgKGZyb250bWF0dGVyKSA9PiB7XG4gICAgICAgIGlmIChmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShcImVzdGFkb1wiKSkge1xuICAgICAgICAgIGZyb250bWF0dGVyLmVzdGFkbyA9IG51ZXZvRXN0YWRvOyAvLyBBY3R1YWxpemFyIGVsIGVzdGFkb1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXN0YWRvIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvIGE6XCIsIG51ZXZvRXN0YWRvKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBlc3RhZG8gZW4gZWwgZnJvbnRtYXR0ZXI6XCIsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXJDYXJwZXRhKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZVxuXG4gICAgICBjb25zdCBjYXJwZXRhRXhpc3RlbnRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGlmIChjYXJwZXRhRXhpc3RlbnRlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAnJHtmb2xkZXJQYXRofScgeWEgZXhpc3RlLmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBDcmVhIGxhIGNhcnBldGFcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICBjb25zb2xlLmxvZyhgQ2FycGV0YSAnJHtmb2xkZXJQYXRofScgY3JlYWRhIGV4aXRvc2FtZW50ZS5gKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgY3JlYXIgbGEgY2FycGV0YSAnJHtmb2xkZXJQYXRofSc6YCwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBBUkEgUFJPQ0VTQVIgTE9TIENPTVBBU1NcblxuICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBkZSBwcm9jZXNhciBPYmpldGl2b3MgZGUgbGFzIEFWIGFudWFsZXMgZW4gZWwgcHJvY2VzbyBkZSBDb21wYXNzLlxuICBhc3luYyBtb3N0cmFyQm90b25Db21wYXNzQW51YWwoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYm90b24udGV4dENvbnRlbnQgPSBcIlByb2Nlc2FyIE9iamV0aXZvcyBBViBBbnVhbFwiO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG5cbiAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNhckNvbXBhc3NBbnVhbChkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgIH07XG4gIH1cblxuICBhc3luYyBtb3N0cmFyQm90b25Db21wYXNzVHJpbWVzdHJhbChkdikge1xuICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcblxuICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBib3Rvbi50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgT2JqZXRpdm9zIEFWIFRyaW1lc3RyYWxlc1wiO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG5cbiAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdGhpcy5wcm9jZXNhckNvbXBhc3NUcmltZXN0cmFsKGR2KTsgXG4gICAgfTtcbiAgfVxuXG4gIGFzeW5jIHByb2Nlc2FyQ29tcGFzc0FudWFsKGR2KSB7XG4gIFxuICAgIGxldCBhXHUwMEYxbyA9IGR2LmN1cnJlbnQoKS5hXHUwMEYxbztcbiAgICBjb25zdCByZXN1bHRhZG9BVjogR3J1cG9BVltdID0gW107XG4gICAgY29uc3QgZmlsZUNhbXBvcyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGVDYW1wb3MgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQ2FtcG9zKTtcbiAgICAgICAgY29uc3QgYXJyZWdsb0FWID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5BcmVhc1ZpZGEgfHwgW107XG4gICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9BVikpIHtcbiAgICAgICAgICBhcnJlZ2xvQVYuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICByZXN1bHRhZG9BVi5wdXNoKHtcbiAgICAgICAgICAgICAgICBncnVwbzogaXRlbVswXSxcbiAgICAgICAgICAgICAgICBhdjogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICB0ZXh0bzogaXRlbVswXSArIFwiIC8gXCIgKyBpdGVtWzFdLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgYmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhO1xuXG4gICAgLy8gLS4uLT4gUmV2aXNpXHUwMEYzbiBkZSBlc2NlbmFyaW9zLlxuICAgIGRlYnVnZ2VyO1xuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICAvLyBQcmVndW50YXIgRWwgb2JqZXRpdm8geSBndWFyZGFybG8gZW4gZWwgbm9kbyBkZSBBVi5cbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvQW51YWwoYVx1MDBGMW8sIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvQW51YWwoYVx1MDBGMW8sIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9BbnVhbChhXHUwMEYxbywgYXJlYVZpZGEuYXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIE1ldG9kbyBQcm9jZXNhciBDb21wYXNzIEFudWFsXG5cbiAgYXN5bmMgcHJvY2VzYXJDb21wYXNzVHJpbWVzdHJhbChkdikge1xuICAgIGRlYnVnZ2VyO1xuICAgIGxldCB0cmltZXN0cmUgPSBkdi5jdXJyZW50KCkudHJpbWVzdHJlO1xuICAgIGNvbnN0IHJlc3VsdGFkb0FWOiBHcnVwb0FWW10gPSBbXTtcbiAgICBjb25zdCBmaWxlQ2FtcG9zID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgIHRyeSB7XG4gICAgICBpZiAoZmlsZUNhbXBvcyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGVDYW1wb3MpO1xuICAgICAgICBjb25zdCBhcnJlZ2xvQVYgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LkFyZWFzVmlkYSB8fCBbXTtcbiAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb0FWKSkge1xuICAgICAgICAgIGFycmVnbG9BVi5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIHJlc3VsdGFkb0FWLnB1c2goe1xuICAgICAgICAgICAgICAgIGdydXBvOiBpdGVtWzBdLFxuICAgICAgICAgICAgICAgIGF2OiBpdGVtWzFdLFxuICAgICAgICAgICAgICAgIHRleHRvOiBpdGVtWzBdICsgXCIgLyBcIiArIGl0ZW1bMV0sXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgfVxuXG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGxldCBiYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGE7XG5cbiAgICAvLyAtLi4tPiBSZXZpc2lcdTAwRjNuIGRlIGVzY2VuYXJpb3MuXG4gICAgZm9yIChsZXQgYXJlYVZpZGEgb2YgcmVzdWx0YWRvQVYpIHtcbiAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgZXhpc3RlIGVuIGxhIHViaWNhY2lcdTAwRjNuIGVzcGVjXHUwMEVEZmljYVxuICAgICAgY29uc3QgZnVsbEZvbGRlclBhdGggPSBgJHtiYXNlUGF0aH0vJHthcmVhVmlkYS5hdn1gO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmdWxsRm9sZGVyUGF0aCk7XG5cbiAgICAgIC8vUDAgLT4gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBwYXRoL2FyZWFWaWRhIGV4aXN0ZVxuICAgICAgLy9QMCAtIFNJXG4gICAgICBpZiAoZm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlICR7YmFzZVBhdGh9LmApO1xuICAgICAgICAvLyBBaG9yYSwgdmVyaWZpY2Egc2kgbGEgbm90YSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGFcbiAgICAgICAgY29uc3QgaW5zdGFuY2VzT2ZBViA9IGFwcC52YXVsdFxuICAgICAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAuZmlsdGVyKFxuICAgICAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmdWxsRm9sZGVyUGF0aCkgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICAgICApO1xuICAgICAgICAvLyBQMSBFeGlzdGUgbm9kZUFyZWFWaWRhP1xuICAgICAgICBjb25zdCBub2RlQVZFeGlzdHMgPSBpbnN0YW5jZXNPZkFWLnNvbWUoXG4gICAgICAgICAgKGZpbGUpID0+IGZpbGUuYmFzZW5hbWUgPT09IGFyZWFWaWRhLmF2XG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gUDEgU0lcbiAgICAgICAgaWYgKG5vZGVBVkV4aXN0cykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAyIGFyZWFWaWRhIFEgRXhpc3RlP1xuICAgICAgICAgIC8vIFByZWd1bnRhciBFbCBvYmpldGl2byB5IGd1YXJkYXJsbyBlbiBlbCBub2RvIGRlIEFWLlxuICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZSwgYXJlYVZpZGEuYXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDEgLSBOTyAobm9kZUFyZWFWaWRhIG5vIEV4aXN0ZSlcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gQ2FzbyAzIHkgNFxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgYExhIG5vdGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgICAgLy9QMyAtPiBTSVxuICAgICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAgIC8vIFAyIC4uIC0+IFNpIHkgTm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZSwgYXJlYVZpZGEuYXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gUE8gLT4gTk8gKExhIENhcnBldGEgbm8gZXhpc3RlKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBhXHUwMEZBbiBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYFxuICAgICAgICApO1xuICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgLy8gUDMgLT4gU0lcbiAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgIC8vIFAyXG4gICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b1RyaW1lc3RyYWwodHJpbWVzdHJlLCBhcmVhVmlkYS5hdik7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICBjb250aW51ZTsgLy9TZW50ZW5jaWEgcXVlIGRlYmUgcGFzYXIgYWwgc2lndWllbnRlIGVsZW1lbnRvIGRlbCBjaWNsbyBmb3IuXG4gICAgICAgIH1cbiAgICAgICAgLy8gUDMgLT4gRXNjYXBlXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybjsgLy8gRW4gY2FzbyBkZSBxdWUgc2UgZGUgZXNjYXBlLlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBGaW4gRm9yIEFyZWFzVmlkYSBmaWxlQ2FtcG9zXG4gIH0gLy8gTWV0b2RvIFByb2Nlc2FyIENvbXBhc3MgVHJpbWVzdHJhbCBcblxuXG4gIGFzeW5jIG9iamV0aXZvQW51YWwoYVx1MDBGMW86IGFueSwgYXJlYVZpZGE6IGFueSk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEJ1c2NhciBzaSB5YSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MgcGFyYSBlc2UgYVx1MDBGMW8geSBlc2EgYXJlYSBkZSB2aWRhLlxuXG4gICAgY29uc3QgZm9sZGVyT2JqID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfT2JqQ29tcGFzc0FudWFsXCJdO1xuICAgIGNvbnN0IGZpbGVzT2JqID0gYXBwLnZhdWx0XG4gICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyT2JqKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICk7XG4gICAgbGV0IG9iakNyZWFkb3MgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXNPYmopIHtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gL1xcW1xcW1xccyooLio/KVxccypcXF1cXF0vO1xuICAgICAgbGV0IGZpbGVBViA9IG1ldGFkYXRhPy5hcmVhVmlkYS5tYXRjaChyZWdleClbMV07XG4gICAgICBjb25zdCBzYW1lQVYgPSBmaWxlQVYgPT09IGFyZWFWaWRhO1xuXG4gICAgICBpZiAobWV0YWRhdGE/LmFcdTAwRjFvID09PSBhXHUwMEYxbyAmJiBzYW1lQVYpIHtcbiAgICAgICAgbGV0IG9iakFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ob2JqQWN0aXZvLCBtZXRhZGF0YSk7IC8vIEFncmVnYSBlbCBtZXRhZGF0YSBhbCBvYmpldG8gcUFjdGl2b1xuICAgICAgICBvYmpDcmVhZG9zLnB1c2gob2JqQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHByb21wdCA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBvYmpldGl2b3MgPSBbXTtcbiAgICBsZXQgZGVzZWFBZ3JlZ2FyT2JqZXRpdm87XG4gICAgaWYgKG9iakNyZWFkb3MubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICAgIC8vIExvZ2ljYSBjdWFuZG8geWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgbGV0IG5leHRTdGVwID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBbXG4gICAgICAgICAgXCJBZ3JlZ2FyIE9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiQm9ycmFyIHkgQ3JlYXIgZGUgbnVldm8gbG9zIG9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiRGVqYXIgbG9zIG9iamV0aXZvcyBjb21vIGVzdFx1MDBFMW4gXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcInVwZFwiLCBcImRlbCtjcmVcIiwgXCJjb250aW51ZVwiXSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYFx1MDBCRllhIGhheSAke29iakNyZWFkb3MubGVuZ3RofSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhICR7YXJlYVZpZGF9IGVuIGVsICR7YVx1MDBGMW99LiBFbGlnZSB1bmEgb3BjaVx1MDBGM246YFxuICAgICAgKTtcblxuICAgICAgICBzd2l0Y2ggKG5leHRTdGVwKSB7XG4gICAgICAgICAgY2FzZSBcInVwZFwiOlxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm8oYXJlYVZpZGEsIGFcdTAwRjFvKTtcblxuICAgICAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2byk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZGVsK2NyZVwiOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib3JyYXJPYmpldGl2b3Mob2JqQ3JlYWRvcyk7XG4gICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyk7XG4gICAgICAgICAgICAgIC8vIEJvcnJhciBsb3Mgb2JqZXRpdm9zIGFudGVyaW9yZXMuXG4gICAgICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJjb250aW51ZVwiOlxuICAgICAgICAgICAgY29uc29sZS5sb2coYENvbnRpbnVhciBzaW4gaGFjZXIgbmFkYSBjb24gbG9zIG9iamV0aXZvcyBkZSAke2FyZWFWaWRhfWApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE5vIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvLlxuICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICApO1xuICAgICAgICB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pIHtcbiAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm8oYXJlYVZpZGEsIGFcdTAwRjFvKTtcbiAgICAgICAgICBvYmpldGl2b3MucHVzaChbb2JqZXRpdm9dKTtcblxuICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9IC8vIE1cdTAwRTl0b2RvIG9iamV0aXZvQW51YWwuXG4gIFxuICBhc3luYyBvYmpldGl2b1RyaW1lc3RyYWwodHJpbWVzdHJlOiBhbnksIGFyZWFWaWRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBkZWJ1Z2dlcjtcbiAgICAvLyBCdXNjYXIgc2kgeWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zIHBhcmEgZXNlIGFcdTAwRjFvIHkgZXNhIGFyZWEgZGUgdmlkYS5cblxuICAgIGNvbnN0IGZvbGRlck9iaiA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX09iakNvbXBhc3NBbnVhbFwiXTtcbiAgICBjb25zdCBmaWxlc09iaiA9IGFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlck9iaikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBvYmpDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzT2JqKSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCByZWdleCA9IC9cXFtcXFtcXHMqKC4qPylcXHMqXFxdXFxdLztcbiAgICAgIGxldCBmaWxlQVYgPSBtZXRhZGF0YT8uYXJlYVZpZGEubWF0Y2gocmVnZXgpWzFdO1xuICAgICAgY29uc3Qgc2FtZUFWID0gZmlsZUFWID09PSBhcmVhVmlkYTtcblxuICAgICAgaWYgKG1ldGFkYXRhPy50cmltZXN0cmU/LnBhdGggJiYgdHlwZW9mIChtZXRhZGF0YS50cmltZXN0cmUucGF0aCA9PT0gJ3N0cmluZycpICYmICBtZXRhZGF0YS50cmltZXN0cmUucGF0aC5pbmNsdWRlcyh0cmltZXN0cmUpICYmIHNhbWVBVikge1xuICAgICAgICBsZXQgb2JqQWN0aXZvID0geyBmaWxlIH07IC8vIEFzdW1pZW5kbyBxdWUgcXVpZXJlcyBndWFyZGFyIGVsIHBhdGggZGVsIGFyY2hpdm9cbiAgICAgICAgT2JqZWN0LmFzc2lnbihvYmpBY3Rpdm8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byBxQWN0aXZvXG4gICAgICAgIG9iakNyZWFkb3MucHVzaChvYmpBY3Rpdm8pOyAvLyBBXHUwMEYxYWRlIGVsIHJlZ2lzdHJvIGFjdGl2byBhbCBhcnJheVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgcHJvbXB0ID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IG9iamV0aXZvcyA9IFtdO1xuICAgIGxldCBkZXNlYUFncmVnYXJPYmpldGl2bztcbiAgICBpZiAob2JqQ3JlYWRvcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFNpIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgICAgLy8gTG9naWNhIGN1YW5kbyB5YSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICBsZXQgbmV4dFN0ZXAgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgIFtcbiAgICAgICAgICBcIkFncmVnYXIgT2JqZXRpdm9zXCIsXG4gICAgICAgICAgXCJCb3JyYXIgeSBDcmVhciBkZSBudWV2byBsb3Mgb2JqZXRpdm9zXCIsXG4gICAgICAgICAgXCJEZWphciBsb3Mgb2JqZXRpdm9zIGNvbW8gZXN0XHUwMEUxbiBcIixcbiAgICAgICAgXSxcbiAgICAgICAgW1widXBkXCIsIFwiZGVsK2NyZVwiLCBcImNvbnRpbnVlXCJdLFxuICAgICAgICB0cnVlLFxuICAgICAgICBgXHUwMEJGWWEgaGF5ICR7b2JqQ3JlYWRvcy5sZW5ndGh9IG9iamV0aXZvcyBjcmVhZG9zIHBhcmEgJHthcmVhVmlkYX0gZW4gZWwgJHt0cmltZXN0cmV9LiBFbGlnZSB1bmEgb3BjaVx1MDBGM246YFxuICAgICAgKTtcblxuICAgICAgICBzd2l0Y2ggKG5leHRTdGVwKSB7XG4gICAgICAgICAgY2FzZSBcInVwZFwiOlxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm9UcmltZXN0cmUoYXJlYVZpZGEsIHRyaW1lc3RyZSk7XG5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJkZWwrY3JlXCI6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmJvcnJhck9iamV0aXZvcyhvYmpDcmVhZG9zKTtcbiAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpO1xuICAgICAgICAgICAgICAvLyBCb3JyYXIgbG9zIG9iamV0aXZvcyBhbnRlcmlvcmVzLlxuICAgICAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke3RyaW1lc3RyZX0/YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImNvbnRpbnVlXCI6XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ29udGludWFyIHNpbiBoYWNlciBuYWRhIGNvbiBsb3Mgb2JqZXRpdm9zIGRlICR7YXJlYVZpZGF9YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gTm8gaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgZWxzZSB7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBkZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8uXG4gICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke3RyaW1lc3RyZX0/YFxuICAgICAgICApO1xuICAgICAgICB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pIHtcbiAgICAgICAgICBsZXQgb2JqZXRpdm8gPSBhd2FpdCB0aGlzLmNyZWFyT2JqZXRpdm9UcmltZXN0cmUoYXJlYVZpZGEsIHRyaW1lc3RyZSk7XG4gICAgICAgICAgb2JqZXRpdm9zLnB1c2goW29iamV0aXZvXSk7XG5cbiAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gIH0gLy8gTVx1MDBFOXRvZG8gb2JqZXRpdm9UcmltZXN0cmFsLlxuXG5cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NXHUwMEU5dG9kbyBxdWUgY3JlYSBlbCBib3RcdTAwRjNuIHF1ZSBzZSBhZ3JlZ2EgZW4gbGEgdGFibGEgZGUgcHJveWVjdG9zIGVuIGVsIFxuQ29tcGFzcyBBbnVhbCwgcGFyYSBjcmVhciBlbCBwcm95ZWN0byBhIGNhZGEgT2JqZXRpdm8uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qLyBcbiAgY3JlYXRlQnV0dG9uVGFibGUoZHYsIG9iamV0aXZvKSB7XG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZHYuZWwoXCJkaXZcIiwgXCJcIik7XG4gICAgY29uc3QgYnV0dG9uID0gZHYuZWwoXCJidXR0b25cIiwgXCJOdWV2byBQcm95ZWN0b1wiKTtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWFyUHJveWVjdG9PYmpldGl2byhkdiwgb2JqZXRpdm8pO1xuICAgIH0pO1xuICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgIHJldHVybiBidXR0b25Db250YWluZXI7XG59XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIGludm9jYWRvIHBvciBlbCBib3RvbiBkZSBsYSB0YWJsYSBkZWwgY29tcGFzcyBhbnVhbCBcIk51ZXZvIFByb3llY3RvXCIgXG5wYXJhIGNyZWFyIHByb3llY3RvIGEgdW4gb2JqZXRpdm8gYW51YWwgZXN0YWJsZWNpZG8uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qLyBcbmFzeW5jIGNyZWFyUHJveWVjdG9PYmpldGl2byhkdiwgb2JqZXRpdm8pe1xuICBkZWJ1Z2dlcjtcbiAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgbGV0IHRpcG9Qcm95ZWN0byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICBbXCJQcm95ZWN0byBHVERcIiwgXCJQcm95ZWN0byBkZSBRXCJdLFxuICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgdHJ1ZSxcbiAgICBgXHUwMEJGRWwgcHJveWVjdG8gJHtvYmpldGl2by5maWxlLm5hbWV9IHJlcXVpZXJlIHVuIFByb3llY3RvIEdURCBvIFByb3llY3RvIGRlIFE/YFxuICApO1xuICBsZXQgcHJveWVjdG87XG4gIGlmICh0aXBvUHJveWVjdG8pe1xuICAgIHByb3llY3RvID0gdGhpcy5jcmVhclByb3llY3RvR1REKG9iamV0aXZvKTsvLyBDcmVhciBQcm95ZWN0byBHVERcbiAgfWVsc2V7XG4gICAgLyogXG4gICAgQnVzY2FuZG8gb3B0aW1pemFyIGVsIHVzbyBkZWwgbVx1MDBFOXRvZG8gY3JlYXIgcHJveWVjdG9RLCBcbiAgICB2YW1vcyBhIGNvbmZpcm1hciBlbCB0cmltZXN0cmUgZGVzZGUgY3JlYXJQcm95ZWN0b09iamV0aXZvOyBcbiAgICAqL1xuICAgIGRlYnVnZ2VyO1xuICAgIGNvbnN0IHJlZ2V4VHJpbSA9IC9cXFs/XFxbPyhcXGR7NH0tUVsxLTRdKVxcXT9cXF0/L2c7XG4gICAgY29uc3QgdHJpbWVzdHJlID0gb2JqZXRpdm8udHJpbWVzdHJlLnBhdGgubWF0Y2gocmVnZXhUcmltKTtcblxuICAgIGNvbnN0IGNvbmZpcm1hVHJpbSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgdHJ1ZSxcbiAgICAgIGBcdTAwQkZWYW1vcyBhIGNyZWFyIGVsIHByb3llY3RvICR7b2JqZXRpdm8uZmlsZS5uYW1lfSBlbiBlbCB0cmltZXN0cmUgJHt0cmltZXN0cmV9P2BcbiAgICApO1xuICAgXG4gICAgaWYgKCFjb25maXJtYVRyaW0peyAgXG4gICAgICBjb25zdCBxID0gYXdhaXQgdGhpcy5lc3RhYmxlY2VyVHJpbWVzdHJlKFwib2JqZXRpdm8gZGVsIGFcdTAwRjFvXCIpO1xuICAgICAgLy9vYmpldGl2by50cmltZXN0cmUucGF0aCA9IHEudHJpbWVzdHJlO1xuICAgICAgZGVidWdnZXI7XG4gICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJZQU1Mcyh7dHJpbWVzdHJlOiBgW1ske3EudHJpbWVzdHJlfV1dYH0sIG9iamV0aXZvLmZpbGUucGF0aCk7XG4gICAgICB9XG4gICAgcHJveWVjdG8gPSBhd2FpdCB0aGlzLmNyZWFyUHJveWVjdG9RKG9iamV0aXZvKTtcbiAgfVxufVxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBxdWUgaW5pY2lhbGl6YSBsYSBjcmVhY2lcdTAwRjNuIGRlIGxhIHBsYW50aWxsYSBkZSBvYmpldGl2byBDb21wYXNzLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBjcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyl7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX09iakNvbXBhc3NBbnVhbFwiXX0vUGx0IC0gT2JqQ29tcGFzc0FudWFsLm1kYDtcbiAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIFxuICBsZXQgZmlsZW5hbWUgPSBgJHthXHUwMEYxb30gLSBPYmpldGl2byBwYXJhICR7YXJlYVZpZGF9YDtcbiAgbGV0IG9iamV0aXZvID0gYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICByZXR1cm4gb2JqZXRpdm87XG59XG5cbmFzeW5jIGNyZWFyT2JqZXRpdm9UcmltZXN0cmUoYXJlYVZpZGEsIHRyaW1lc3RyZSl7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX09iakNvbXBhc3NBbnVhbFwiXX0vUGx0IC0gT2JqQ29tcGFzc0FudWFsLm1kYDtcbiAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIFxuICBsZXQgZmlsZW5hbWUgPSBgVHJpbWVzdHJlICR7dHJpbWVzdHJlfSAtIE9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX1gO1xuICBsZXQgb2JqZXRpdm8gPSBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcik7XG4gIHJldHVybiBvYmpldGl2bztcbn1cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gaW52b2NhZG8gZGVzZGUgY3JlYXJQcm95ZWN0b09iamV0aXZvKGR2LCBvYmpldGl2bylcbkVzdFx1MDBFOSBtXHUwMEU5dG9kbyBoYWNlIHBhcnRlIGRlbCBwcm9jZXNvIGRlIENvbXBhc3MgQW51YWwuXG5GYWNpbGl0YSBsYSBjcmVhY2lcdTAwRjNuIGRlbCB1biBwcm95ZWN0byBkZSBRIHBhcmEgdW4gb2JqZXRpdm8gYW51YWwgZXN0YWJsZWNpZG8uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qLyBcbmFzeW5jIGNyZWFyUHJveWVjdG9RKG9iamV0aXZvKXtcbiAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgZGVidWdnZXI7XG4gIGNvbnN0IHRlbXBsYXRlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfUHJveWVjdG9zUVwiXX0vUGx0IC0gUHJveWVjdG9zUS5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYFByb3llY3RvIHBhcmEgT2JqZXRpdm8gQ29tcGFzcyBBbnVhbCAtICR7b2JqZXRpdm8uaWR9YDtcbiAgbGV0IHByb3llY3RvID0gYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlLCBmaWxlbmFtZSwgdHJ1ZSwgZm9sZGVyKTtcbiAgcmV0dXJuIHByb3llY3RvO1xufVxuXG5hc3luYyBjcmVhclByb3llY3RvR1REKG9iamV0aXZvKXtcbiAgZGVidWdnZXI7XG4gIGNvbnN0IHRlbXBsYXRlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfUHJveWVjdG9zR1REXCJdfS9QbHQgLSBQcm95ZWN0b3NHVEQubWRgO1xuICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVQYXRoKTtcbiAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgXG4gIGxldCBmaWxlbmFtZSA9IGBQcm95ZWN0byBwYXJhIE9iamV0aXZvIENvbXBhc3MgQW51YWwgLSAke29iamV0aXZvLmlkfWA7XG4gIGxldCBwcm95ZWN0byA9IGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCB0cnVlLCBmb2xkZXIpO1xuICByZXR1cm4gcHJveWVjdG87XG59XG5cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gaW52b2NhZG8gZW4gZWwgcHJvY2VzbyBkZSBDb21wYXNzIEFudWFsLCBjdWFuZG8gZWxpam8gdm9sdmVyXG5hIGNyZWFyIHRvZG9zIGxvcyBwcm95ZWN0b3MgZGUgdW4gYXJlYSBkZSB2aWRhIHBhcmEgdW4gYVx1MDBGMW8uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qLyBcbmFzeW5jIGJvcnJhck9iamV0aXZvcyhvYmpldGl2b3Mpe1xuICBkZWJ1Z2dlcjtcbiAgZm9yIChsZXQgb2JqZXRpdm8gb2Ygb2JqZXRpdm9zKXsgXG4gICAgdHJ5IHtcbiAgICAgIC8vIEludGVudGEgYm9ycmFyIGVsIGFyY2hpdm8gYWN0dWFsIGRlbCBhcnJlZ2xvXG4gICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKG9iamV0aXZvLmZpbGUpO1xuICAgICAgY29uc29sZS5sb2coYEFyY2hpdm8gYm9ycmFkbzogJHtvYmpldGl2by5maWxlLnBhdGh9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgYm9ycmFyIGVsIGFyY2hpdm8gJHtvYmpldGl2by5maWxlLnBhdGh9OiAke2Vycm9yfWApO1xuICAgICB9XG4gIH1cblxuICB9XG5cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gcXVlIHBlcm1pdGUgcGFyYSBjdWFscXVpZXIgY2FzbyBlbiBlbCBxdWUgc2UgcmVxdWllcmEgZWxlZ2lyIFxudW4gdHJpbWVzdHJlIHBhcmEgY29udGludWFyIHVuIHByb2Nlc28sIGhhY2VyIGxhIHZlcmlmaWNhY2lcdTAwRjNuIHNvYnJlIGxvc1xudHJpbWVzdHJlcyBxdWUgZXN0ZW4gY3JlYWRvcyBhIHBhcnRpciBkZSBsYSBub3RhIFRRLiAgXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuICBhc3luYyBlc3RhYmxlY2VyVHJpbWVzdHJlKHRlbWFUcmltZXN0cmUpe1xuICAgIC8vIE9idGVuZXIgUXMgcGFyYSBwcmVndW50YXIgZWwgUSBwYXJhIGVsIHF1ZSBkZXNlYSBjcmVhciBsYXMgXHUwMEUxcmVhcyBkZSB2aWRhLlxuICAgIGNvbnN0IGZvbGRlclEgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9UcmltZXN0cmFsXCJdO1xuICAgIGNvbnN0IGZpbGVzUSA9IGFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlclEpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgKTtcbiAgICBsZXQgcUNyZWFkb3MgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXNRKSB7XG4gICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICBpZiAobWV0YWRhdGE/LnR5cGUgPT09IFwiVFFcIiAmJiBtZXRhZGF0YT8udHJpbWVzdHJlKSB7XG4gICAgICAgIGxldCBxQWN0aXZvID0geyBmaWxlIH07IC8vIEFzdW1pZW5kbyBxdWUgcXVpZXJlcyBndWFyZGFyIGVsIHBhdGggZGVsIGFyY2hpdm9cbiAgICAgICAgT2JqZWN0LmFzc2lnbihxQWN0aXZvLCBtZXRhZGF0YSk7IC8vIEFncmVnYSBlbCBtZXRhZGF0YSBhbCBvYmpldG8gcUFjdGl2b1xuICAgICAgICBxQ3JlYWRvcy5wdXNoKHFBY3Rpdm8pOyAvLyBBXHUwMEYxYWRlIGVsIHJlZ2lzdHJvIGFjdGl2byBhbCBhcnJheVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgdHJ5IHtcbiAgICAgIGxldCBxID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBxQ3JlYWRvcy5tYXAoKGIpID0+IGIudHJpbWVzdHJlKSxcbiAgICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiKSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYERlIHF1ZSB0cmltZXN0cmUgdmFtb3MgYSBwcm9jZXNhciB0dXMgJHt0ZW1hVHJpbWVzdHJlfWBcbiAgICAgICk7XG4gIFxuICAgICAgLy8gQXF1XHUwMEVEIGFzdW1pbW9zIHF1ZSBzaSBxIGVzIHVuZGVmaW5lZCwgZWwgdXN1YXJpbyBjYW5jZWxcdTAwRjMgbGEgb3BlcmFjaVx1MDBGM24uXG4gICAgICBpZiAocSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJPcGVyYWNpXHUwMEYzbiBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgIC8vIE1hbmVqYSBlbCBlc2NhcGUgbyBjYW5jZWxhY2lcdTAwRjNuIGFxdVx1MDBFRC4gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBzYWxpciBkZSBsYSBmdW5jaVx1MDBGM24gYWN0dWFsIG8gaGFjZXIgb3RyYSBjb3NhLlxuICAgICAgICAgIHJldHVybjsgLy8gU2FsZSBkZSBsYSBmdW5jaVx1MDBGM24gc2kgZWwgdXN1YXJpbyBjYW5jZWxhLlxuICAgICAgfVxuICBcbiAgICAgIC8vIENvbnRpbnVhciBjb24gbGEgbFx1MDBGM2dpY2EgZGVzcHVcdTAwRTlzIGRlIHF1ZSBlbCB1c3VhcmlvIGhhIHNlbGVjY2lvbmFkbyB1bmEgb3BjaVx1MDBGM25cbiAgICAgICAgY29uc29sZS5sb2coXCJFbCB1c3VhcmlvIHNlbGVjY2lvblx1MDBGMzpcIiwgcSk7XG4gICAgICAgIHJldHVybiBxO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gZWwgc3VnZ2VzdGVyOlwiLCBlcnJvcik7XG4gICAgICB9XG4gIH1cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5Db24gZXN0ZSBtXHUwMEU5dG9kbyBwdWVkbyBhY3R1YWxpemFyIHZhbG9yZXMgZW4gbGFzIG5vdGFzIHlhIGV4aXN0ZW50ZXMuXG5MbyB1dGlsaXpvIGVuIGVzdGEgY2xhc2UsIHBhcmEgYWN0dWFsaXphciBlbCB0cmltZXN0cmUuXG5Fc3RhIGZ1bmNpXHUwMEYzbiBzb2xvIGFjdHVhbGl6YSwgbm8gY3JlYSBlbCBjYW1wb3Mgc2kgbm8gZXhpc3RlLiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovXG4gIGFzeW5jIGFjdHVhbGl6YXJZQU1McyhjYW1wb3MsIHJ1dGEpIHtcbiAgICAgICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YSk7XG4gICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgLy8gSXRlcmFyIHNvYnJlIGNhZGEgcHJvcGllZGFkIGRlbCBvYmpldG8gJ25vdGEnXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNhbXBvIGluIGNhbXBvcykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShjYW1wbykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWN0dWFsaXphciBlbCBjYW1wbyBlbiBlbCBmcm9udG1hdHRlciBjb24gZWwgdmFsb3IgY29ycmVzcG9uZGllbnRlXG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW2NhbXBvXSA9IGNhbXBvc1tjYW1wb107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICB9XG59XG5cbn1cbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSBcIi4uLy4uL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSVwiO1xuXG5leHBvcnQgY2xhc3MgVmlzdGFSZWdpc3Ryb0RpYXJpbyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBpbnRlcnZhbElkOiBudW1iZXI7XG4gXG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwdWJsaWMgcGx1Z2luOiBhbnkpIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidmlzdGEtcmVnaXN0cm8tZGlhcmlvXCI7XG4gICAgfVxuXG4gICAgZ2V0RGlzcGxheVRleHQoKSB7XG4gICAgICAgIHJldHVybiBcIlJlZ2lzdHJvIERpYXJpb1wiO1xuICAgIH1cblxuICAgIGdldEljb24oKSB7XG4gICAgICAgIHJldHVybiBcImZpbGUtY2xvY2tcIjsgLy8gRXN0ZSBlcyB1biBlamVtcGxvLCBjYW1iaWEgXCJkb2N1bWVudG9cIiBwb3IgZWwgbm9tYnJlIGRlbCBcdTAwRURjb25vIHF1ZSBkZXNlZXMgdXNhclxuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuc2V0VGV4dChcIk5vIGhheSB1biBhcmNoaXZvIGFjdGl2by5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YShhY3RpdmVGaWxlKTsgLy8gUHVlZGVzIHVzYXIgdGhpcy5maWxlIGRlbnRybyBkZSBhY3R1YWxpemFyVmlzdGFcbiAgICBcbiAgICAgICAgLy9hd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgaW5tZWRpYXRhbWVudGUgYWwgYWJyaXJcblxuICAgICAgICB0aGlzLmludGVydmFsSWQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoYWN0aXZlRmlsZSk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBjYWRhIDEwIHNlZ3VuZG9zXG4gICAgICAgIH0sIDUwMDApO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxJZCk7IC8vIExpbXBpYSBlbCBpbnRlcnZhbG8gYWwgY2VycmFyIGxhIHZpc3RhXG4gICAgfVxuXG4gICAgYXN5bmMgYWN0dWFsaXphclZpc3RhKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgLy8gTGltcGlhIGVsIGNvbnRlbmlkbyBleGlzdGVudGUgYW50ZXMgZGUgYWN0dWFsaXphclxuICAgICAgICBcbiAgICAgICAgY29uc3QgZmVjaGFIb3kgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGFjdGl2ZUZpbGUuYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdLCAneXl5eS1NTS1kZCcsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpKTtcblxuICAgICAgICBsZXQgdG90YWxEaWEgPSAwO1xuICAgICAgICBsZXQgcmVnaXN0cm9zSG95ID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgbGV0IGhvcmFJbmljaW8gPSBEYXRlVGltZS5mcm9tRm9ybWF0KG1ldGFkYXRhLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICAgICAgICAgICBpZiAoaG9yYUluaWNpby5zdGFydE9mKCdkYXknKS50cyA9PT0gZmVjaGFIb3kuc3RhcnRPZignZGF5JykudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm9zSG95LnB1c2goeyBwYXRoOiBmaWxlLnBhdGgsIGZyb250bWF0dGVyOiBtZXRhZGF0YSB9KTtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEaWEgKz0gcGFyc2VJbnQobWV0YWRhdGEudGllbXBvVHJhYmFqYWRvIHx8ICcwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0cm9zSG95LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGxldCBmZWNoYUEgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRzO1xuICAgICAgICAgICAgbGV0IGZlY2hhQiA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYi5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudHM7XG4gICAgICAgICAgICByZXR1cm4gZmVjaGFBIC0gZmVjaGFCO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgdGl0dWxvID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUmVnaXN0cm9zIGRlIHRpZW1wbyBkZWwgJHtmZWNoYUhveS50b0Zvcm1hdCgnRUVFRSwgREQnKX0uYH0pO1xuICAgICAgICB0aXR1bG8uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhY2lcdTAwRjNuIGRlIGVsZW1lbnRvcyBIVE1MIGRpcmVjdGFtZW50ZVxuICAgICAgICBjb25zdCB0YWJsZSA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCd0YWJsZScsIHsgY2xzOiAndGFibGUtcmVzdW1lblNlbWFuYWwnIH0pO1xuICAgICAgICBjb25zdCB0aGVhZCA9IHRhYmxlLmNyZWF0ZUVsKCd0aGVhZCcpO1xuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSB0aGVhZC5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgWydSZWdpc3RybycsICdEZXNjcmlwY2lcdTAwRjNuJywgJ1BlcmlvZG8nLCAnVGllbXBvJywgJ0VzdGFkbycsICdJZCcsICdBY2NpXHUwMEYzbiddLmZvckVhY2goaGVhZGVyID0+IHtcbiAgICAgICAgICAgIGhlYWRlclJvdy5jcmVhdGVFbCgndGgnLCB7IHRleHQ6IGhlYWRlciB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgdGJvZHkgPSB0YWJsZS5jcmVhdGVFbCgndGJvZHknKTtcbiAgICAgICAgcmVnaXN0cm9zSG95LmZvckVhY2gocmVnaXN0cm8gPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gdGJvZHkuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgICAgICAvLyBBcXVcdTAwRUQgcmVsbGVuYXMgbGFzIGNlbGRhcyBkZSBsYSBmaWxhXG4gICAgICAgICAgICB0aGlzLmZpbGxSb3dXaXRoRGF0YShyb3csIHJlZ2lzdHJvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgIH1cblxuICAgIGZpbGxSb3dXaXRoRGF0YShyb3csIHJlZ2lzdHJvKSB7XG4gICAgICAgIGNvbnN0IHRkQXJjaGl2byA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgY29uc3QgbGlua0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBsaW5rRWwudGV4dENvbnRlbnQgPSByZWdpc3Ryby5mcm9udG1hdHRlci5hbGlhc2VzWzBdOyAgLy8gVXNhIGVsIGFsaWFzIGNvbW8gdGV4dG8gZGVsIGVubGFjZVxuICAgICAgICBsaW5rRWwuaHJlZiA9ICcjJztcbiAgICAgICAgbGlua0VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGV2KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyAvLyBFdml0YSBsYSBuYXZlZ2FjaVx1MDBGM24gcHJlZGV0ZXJtaW5hZGEgZGVsIGVubGFjZVxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyZWdpc3Ryby5wYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAvLyBBYnJlIGVsIGFyY2hpdm8gZW4gdW5hIG51ZXZhIGhvamEgZGUgZXNwYWNpbyBkZSB0cmFiYWpvXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUoZmlsZSwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRkQXJjaGl2by5hcHBlbmRDaGlsZChsaW5rRWwpO1xuICAgICAgICBcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZGVzY3JpcGNpb24gfSk7XG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IGAke0RhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKX0gLyAke0RhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUZpbmFsLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9Gb3JtYXQoJ2g6bW0gYScpfWB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGEgeSBtdWVzdHJhIGVsIHRpZW1wbyBlbiBmb3JtYXRvIGRlIGRcdTAwRURhcywgaG9yYXMgeSBtaW51dG9zXG4gICAgICAgIGNvbnN0IHRkUGVyaW9kbyA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgaWYgKHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYSBlbCB0aWVtcG8gZGVzZGUgYWhvcmEgaGFzdGEgbGEgaG9yYSBkZSBpbmljaW9cbiAgICAgICAgICAgIGxldCBhaG9yYSA9IERhdGVUaW1lLmxvY2FsKCk7XG4gICAgICAgICAgICBsZXQgaW5pY2lvID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChyZWdpc3Ryby5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgICAgICBsZXQgZHVyYWNpb24gPSBhaG9yYS5kaWZmKGluaWNpbywgWydkYXlzJywgJ2hvdXJzJywgJ21pbnV0ZXMnXSk7XG4gICAgICAgICAgICB0ZFBlcmlvZG8udGV4dENvbnRlbnQgPSB0aGlzLmZvcm1hdER1cmF0aW9uKGR1cmFjaW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE11ZXN0cmEgZWwgdGllbXBvIHRyYWJhamFkbyBlbiBtaWxpc2VndW5kb3MgY29udmVydGlkbyBhIGZvcm1hdG8gbGVnaWJsZVxuICAgICAgICAgICAgbGV0IHRpZW1wb1RyYWJhamFkbyA9IHRoaXMuZm9ybWF0RHVyYXRpb24ocmVnaXN0cm8uZnJvbnRtYXR0ZXIudGllbXBvVHJhYmFqYWRvKTtcbiAgICAgICAgICAgIHRkUGVyaW9kby50ZXh0Q29udGVudCA9IHRpZW1wb1RyYWJhamFkbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvIH0pO1xuICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiByZWdpc3Ryby5mcm9udG1hdHRlci5pZCB9KTtcblxuICAgICAgICBjb25zdCBhY3Rpb25DZWxsID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICBpZiAocmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBhY3Rpb25DZWxsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ0NlcnJhcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKHJlZ2lzdHJvLmZyb250bWF0dGVyLmlkKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFjdGlvbkNlbGwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnUmV0b21hcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnJldG9tYXJUYXJlYShyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGdW5jaVx1MDBGM24gYXV4aWxpYXIgcGFyYSBmb3JtYXRlYXIgbGEgZHVyYWNpXHUwMEYzbiBkZSBMdXhvbiBhIHVuIGZvcm1hdG8gbGVnaWJsZVxuICAgIGZvcm1hdER1cmF0aW9uKG1zKSB7XG4gICAgICAgICAgICBpZiAobXMgPT09IG51bGwgfHwgbXMgPT09IHVuZGVmaW5lZCB8fCBpc05hTihtcykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJObyBkZWZpbmlkb1wiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0aXIgbWlsaXNlZ3VuZG9zIGEgbWludXRvcywgaG9yYXMgeSBkXHUwMEVEYXNcbiAgICAgICAgICAgICAgICBsZXQgbWludXRvcyA9IE1hdGguZmxvb3IobXMgLyAoMTAwMCAqIDYwKSk7XG4gICAgICAgICAgICAgICAgbGV0IGhvcmFzID0gTWF0aC5mbG9vcihtaW51dG9zIC8gNjApO1xuICAgICAgICAgICAgICAgIG1pbnV0b3MgPSBtaW51dG9zICUgNjA7IC8vIFJlc3RvIGRlIGxhIGRpdmlzaVx1MDBGM24gcGFyYSBvYnRlbmVyIGxvcyBtaW51dG9zIHNvYnJhbnRlc1xuICAgICAgICAgICAgICAgIGxldCBkaWFzID0gTWF0aC5mbG9vcihob3JhcyAvIDI0KTtcbiAgICAgICAgICAgICAgICBob3JhcyA9IGhvcmFzICUgMjQ7IC8vIFJlc3RvIGRlIGxhIGRpdmlzaVx1MDBGM24gcGFyYSBvYnRlbmVyIGxhcyBob3JhcyBzb2JyYW50ZXNcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRm9ybWF0ZWFyIGVsIHN0cmluZyBkZSBzYWxpZGFcbiAgICAgICAgICAgICAgICBpZiAoZGlhcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2RpYXN9IGQgJHtob3Jhc30gaCAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChob3JhcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2hvcmFzfSBoICR7bWludXRvc30gbWluYDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYCR7bWludXRvc30gbWluYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlQnV0dG9uVGFibGUoYnV0dG9uVGV4dCwgb25DbGlja0NhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgneW91ci1idXR0b24tY2xhc3MnKTtcblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcmVlbXBsYXphciAncnV0YS9hbC9hcmNoaXZvLm1kJyBjb24gbGEgcnV0YSBleGFjdGEgZGVsIGFyY2hpdm8gcXVlIGRlc2VhcyBvYnRlbmVyXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICAgICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICAgICAgfVxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbiB8fCAhdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICB0cC5maWxlID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcImZpbGVcIik7XG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ3RwIGNvbiBwcm9waWVkYWRlcyBcImZpbGVcIiBzZSBoYSBjYXJnYWRvIHNhdGlzZmFjdG9yaWFtZW50ZScpO1xuICAgICAgICByZXR1cm4gdHA7XG4gICAgfVxuICAgIFxuXG5cbiAgICAvLyBPcGNpb25hbDogSW1wbGVtZW50YSBvbkNsb3NlIHNpIG5lY2VzaXRhcyBsaW1waWV6YSBhbCBjZXJyYXIgbGEgdmlzdGEuXG59IiwgImltcG9ydCB7IEFwcCwgTW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdQVGhvcmEge1xuICAgIGFwcDogQXBwO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgb25sb2FkKCkge1xuICAgICAgICB0aGlzLmFwcC5jb21tYW5kcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc2hvdy1sb2NhbC10aW1lJyxcbiAgICAgICAgICAgIG5hbWU6ICdNb3N0cmFyIEhvcmEgTG9jYWwnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuc2hvd0xvY2FsVGltZU1vZGFsKClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2hvd0xvY2FsVGltZU1vZGFsKCkge1xuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBMb2NhbFRpbWVNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG59XG5cbmNsYXNzIExvY2FsVGltZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgaG91cnMgPSBub3cuZ2V0SG91cnMoKSAlIDEyIHx8IDEyO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gbm93LmdldE1pbnV0ZXMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGFtcG0gPSBub3cuZ2V0SG91cnMoKSA+PSAxMiA/ICdQTScgOiAnQU0nO1xuICAgICAgICBjb25zdCB0aW1lU3RyaW5nID0gYCR7aG91cnN9OiR7bWludXRlc30gJHthbXBtfWA7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ0hvcmEgTG9jYWwnIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IHRpbWVTdHJpbmcgfSk7XG5cbiAgICAgICAgLy8gRXN0aWxvIGRlbCBtb2RhbFxuICAgICAgICBjb250ZW50RWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMyRTM0NDAnO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuY29sb3IgPSAnI0Q4REVFOSc7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5wYWRkaW5nID0gJzIwcHgnO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIE5vdGljZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7RGF0ZVRpbWUgLCBEdXJhdGlvbn0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgbGlicm9zQVBJIHtcbiAgICAvL3ByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgICBwcml2YXRlIHRwOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBub3RhOiBvYmplY3Q7XG4gIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICAvLyBJbmljaWFsaXphIGZvbGRlciBlIGluZGljZSBnZXRjb24gdmFsb3JlcyBwcmVkZXRlcm1pbmFkb3MgbyBsXHUwMEYzZ2ljYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgIHRoaXMudHAgPSB0aGlzLnBsdWdpbi50cDtcbiAgICB9XG5cbiAgICAgIGFzeW5jIGtpbmRsZShkdikge1xuICAgIGxldCBmb2xkZXJQcmluY2lwYWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9LaW5kbGVOb3Rlc1wiXTtcbiAgICBjb25zdCBsaWJyYXJ5Rm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQcmluY2lwYWwpO1xuXG4gICAgaWYgKCEobGlicmFyeUZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICBuZXcgTm90aWNlKGBMYSBjYXJwZXRhICR7Zm9sZGVyUHJpbmNpcGFsfSBubyBleGlzdGUuYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGFyY2hpdm9BY3Rpdm8gPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFyY2hpdm9BY3Rpdm8pIHtcbiAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgdW5hIG5vdGEgYWN0aXZhLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvQWN0aXZvKTtcbiAgICBjb25zdCB5YW1sRGF0YSA9IG1ldGFkYXRhPy5mcm9udG1hdHRlciB8fCB7fTtcblxuICAgIGlmICh5YW1sRGF0YS5raW5kbGVOb3RlKSB7XG4gICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgbGlua0VsZW1lbnQuaHJlZiA9IHlhbWxEYXRhLmtpbmRsZU5vdGU7XG4gICAgICBsaW5rRWxlbWVudC50ZXh0Q29udGVudCA9IFwiVmVyIGVuIEtpbmRsZVwiO1xuICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGxpbmtFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTW9zdHJhciBzdWdnZXN0ZXIgcGFyYSBlbGVnaXIgbGEgbm90YSBLaW5kbGUgY29ycmVzcG9uZGllbnRlXG4gICAgICBjb25zdCBub3Rlc0xpc3QgPSBhd2FpdCB0aGlzLmdldE5vdGVzRnJvbUZvbGRlcihmb2xkZXJQcmluY2lwYWwpO1xuXG4gICAgICBpZiAobm90ZXNMaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IG5vdGFzIGVuIGVsIGZvbGRlciBkZSBLaW5kbGUuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN1Z2dlc3RvckNvbmZpZzogU3VnZ2VzdGVyQ29uZmlnPFRGaWxlPiA9IHtcbiAgICAgICAgb25DaG9vc2VJdGVtOiBhc3luYyAoc2VsZWN0ZWROb3RlLCBldnQpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgICAgICB5YW1sRGF0YS5raW5kbGVOb3RlID0gc2VsZWN0ZWROb3RlLnBhdGg7XG4gICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShhcmNoaXZvQWN0aXZvLCBgLS0tXFxuJHt5YW1sRGF0YX1cXG4uLi5gKTtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiU2UgaGEgZ3VhcmRhZG8gZWwgbGluayBkZSBsYSBub3RhIEtpbmRsZSBlbiBlbCBhcmNoaXZvIGFjdHVhbC5cIik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEl0ZW1zOiAoKSA9PiBub3Rlc0xpc3QsXG4gICAgICAgIHJlbmRlclN1Z2dlc3Rpb246IChpdGVtOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWwudGV4dENvbnRlbnQgPSBpdGVtLmJhc2VuYW1lO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBuZXcgU3VnZ2VzdGVyKHRoaXMucGx1Z2luLCBzdWdnZXN0b3JDb25maWcpLnN0YXJ0KCk7XG4gICAgfVxuICB9XG5cbmFzeW5jIGdldE5vdGVzRnJvbUZvbGRlcihmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgY29uc3QgZm9sZGVyRmlsZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKTtcbiAgcmV0dXJuIGZvbGRlckZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXJQYXRoKSk7XG59XG5cblxuXG4gICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBpbmljaWFsIFwiTWVuXHUwMEZBIGhveVwiXG4gICAgICBhc3luYyBtb3N0cmFyQm90b25DcmVhckxpYnJvKGR2KSB7XG4gICAgICAgIGxldCBmb2xkZXJQcmluY2lwYWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9CaWJsaW90ZWNhXCJdO1xuICAgICAgICBjb25zdCBsaWJyYXJ5Rm9sZGVyID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQcmluY2lwYWwpO1xuICAgIFxuICAgICAgICBpZiAoIShsaWJyYXJ5Rm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBMYSBjYXJwZXRhICR7Zm9sZGVyUHJpbmNpcGFsfSBubyBleGlzdGUuYCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGxldCBhcmNoaXZvQWN0aXZvID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYXJjaGl2b0FjdGl2bykge1xuICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgdW5hIG5vdGEgYWN0aXZhLlwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgYm9va0V4aXN0cyA9IGF3YWl0IHRoaXMuYm9va0V4aXN0c0luTGlicmFyeShmb2xkZXJQcmluY2lwYWwsIGFyY2hpdm9BY3Rpdm8pO1xuICAgIFxuICAgICAgICBpZiAoYm9va0V4aXN0cykge1xuICAgICAgICAgIGNvbnN0IGFsaWFzID0gYXdhaXQgdGhpcy5nZXRBbGlhcyhib29rRXhpc3RzKTtcbiAgICAgICAgICBjb25zdCB0ZXh0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgICAgICBsaW5rLmhyZWYgPSBib29rRXhpc3RzLnBhdGg7XG4gICAgICAgICAgbGluay50ZXh0Q29udGVudCA9IGFsaWFzO1xuICAgICAgICAgIGxpbmsuZGF0YXNldC5ocmVmID0gYm9va0V4aXN0cy5wYXRoO1xuICAgICAgICAgIGxpbmsuY2xhc3NOYW1lID0gXCJpbnRlcm5hbC1saW5rXCI7XG4gICAgICAgICAgXG4gICAgICAgICAgdGV4dG8udGV4dENvbnRlbnQgPSBgRWwgbGlicm8geWEgZXN0XHUwMEUxIGVuIGxhIGJpYmxpb3RlY2E6IGA7XG4gICAgICAgICAgdGV4dG8uYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKHRleHRvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgXG4gICAgICAgICAgY29uc3QgYm90b25DcmVhckxpYnJvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICBib3RvbkNyZWFyTGlicm8udGV4dENvbnRlbnQgPSBcIkluZ3Jlc2FyIGEgbWkgQmlibGlvdGVjYVwiO1xuICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvbkNyZWFyTGlicm8pO1xuICAgIFxuICAgICAgICAgIGJvdG9uQ3JlYXJMaWJyby5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbmdyZXNhckxpYnJvQmlibGlvdGVjYSgpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXG4gICAgICBhc3luYyBib29rRXhpc3RzSW5MaWJyYXJ5KGZvbGRlclByaW5jaXBhbCwgYXJjaGl2b0FjdGl2bykge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRGaWxlcygpO1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlTmFtZSA9IGFyY2hpdm9BY3Rpdm8uYmFzZW5hbWU7XG4gICAgXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyUHJpbmNpcGFsKSkge1xuICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyICYmIGZyb250bWF0dGVyLmFzdW50bykge1xuICAgICAgICAgICAgICBjb25zdCBhc3VudG8gPSBmcm9udG1hdHRlci5hc3VudG87XG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFzdW50bykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlbnRyeSBvZiBhc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pbmNsdWRlcyhgW1ske2FjdGl2ZUZpbGVOYW1lfV1dYCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhc3VudG8gPT09ICdzdHJpbmcnICYmIGFzdW50by5pbmNsdWRlcyhgW1ske2FjdGl2ZUZpbGVOYW1lfV1dYCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGFzeW5jIGdldEFsaWFzKGZpbGUpIHtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgICAgICByZXR1cm4gZnJvbnRtYXR0ZXIgJiYgZnJvbnRtYXR0ZXIuYWxpYXNlcyAmJiBmcm9udG1hdHRlci5hbGlhc2VzWzBdID8gZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA6IGZpbGUuYmFzZW5hbWU7XG4gICAgICB9XG5cblxuXG5cbiAgYXN5bmMgaW5ncmVzYXJMaWJyb0JpYmxpb3RlY2EoKXtcbiAgICBkZWJ1Z2dlcjtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJQbGFudGlsbGFzL1N1YnNpc3RlbWFzL0xpYnJvcy9CaWJsaW90ZWNhL1BsdCAtIExpYnJvIGEgQmlibGlvdGVjYS5tZFwiKTsgIC8vT2J0ZW5lciBlbCBURmlsZSBkZWwgdGVtcGxhdGVcbiAgICBjb25zdCBmaWxlbmFtZSA9IFwiTnVldm8gTGlicm9cIlxuICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKVxuICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgIH1cbiAgICBsZXQgY3JlYXJOb3RhID0gdGhpcy50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKTtcbiAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG59XG5cblxuXG5cbiBcblxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXBkYXRlU2VzaW9uTGVjdHVyYS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0Mzo0N1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7dXRpbHNBUEl9IGZyb20gJy4vdXRpbHNBUEknXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFVwZGF0ZVNMIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9VcGRhdGVTTCc7XG5pbXBvcnQgeyBZQU1MVXBkYXRlckFQSSB9IGZyb20gJy4uLy4uL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSSdcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIHVwZGF0ZVNlc2lvbkxlY3R1cmEgZXh0ZW5kcyBZQU1MVXBkYXRlckFQSSBpbXBsZW1lbnRzIFVwZGF0ZVNMe1xuICAgIHByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByb3RlY3RlZCBub3RhOiBvYmplY3Q7XG4gICAgcHJvdGVjdGVkIGluZm9TdWJzaXN0ZW1hOiBhbnk7IFxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFBsdWdpbikge1xuICAgICAgc3VwZXIocGx1Z2luKTtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgdGhpcy50cCA9IHBsdWdpbi50cDtcbiAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgdGhpcy5pbmZvTm90YSA9IHt9O1xuICAgIH1cblxuXG4gICAgLy9hY3R1YWxpemFyTm90YShpbmZvTm90YTogYW55LCBjYW1wb3M6IGFueSk6IFByb21pc2U8YW55PjtcbiAgICAvL2dldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICAvL2dldEhvcmFGaW5hbCgpOiBQcm9taXNlPHN0cmluZz47XG4gICAgXG5cbiAgICAvL2dldFRpZW1wb0xlaWRvKCk6IFByb21pc2U8c3RyaW5nPjtcbiAgICBcbiAgICBhc3luYyBnZXRUaWVtcG9MZWlkbyhwYXJhbWV0cm8sIGFjdHVhbCl7ICBcbiAgICAgICAgZGVidWdnZXI7ICAgICAgXG4gICAgICAgIGxldCBob3JhSW5pY2lvU3RyID0gdGhpcy5pbmZvTm90YS5ob3JhSW5pY2lvO1xuICAgICAgICBsZXQgY2llcnJlO1xuICAgICAgICAvLyBTdXBvbmllbmRvIHF1ZSBlbCBmb3JtYXRvIGVzIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIgeSBxdWllcmVzIGNvbnZlcnRpcmxvIGEgdW4gZm9ybWF0byByZWNvbm9jaWRvIHBvciBEYXRlXG4gICAgICAgIC8vIFByaW1lcm8sIGVsaW1pbmEgbGEgcGFydGUgZGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYSwgeWEgcXVlIERhdGUoKSBubyBsYSBuZWNlc2l0YVxuICAgICAgICBsZXQgW2ZlY2hhLCAsIGhvcmFdID0gaG9yYUluaWNpb1N0ci5zcGxpdCgnICcpO1xuICAgICAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7ZmVjaGF9VCR7aG9yYX1gO1xuICAgICAgICAvLyBDcmVhciBvYmpldG9zIERhdGVcbiAgICAgICAgbGV0IGhvcmFJbmljaW8gPSBuZXcgRGF0ZShmZWNoYUhvcmFJU08pO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7ICAgIFxuICAgICAgICBjaWVycmUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IFtmZWNoYUNpZXJyZSwgLGhvcmFDaWVycmVdID0gcGFyYW1ldHJvLnNwbGl0KCcgJyk7ICAgXG4gICAgICAgICAgICBsZXQgZmVjaGFIb3JhQ2llcnJlSVNPID0gYCR7ZmVjaGFDaWVycmV9VCR7aG9yYUNpZXJyZX1gO1xuICAgICAgICAgICAgY2llcnJlID0gbmV3IERhdGUoZmVjaGFIb3JhQ2llcnJlSVNPKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGFyIGxhIGRpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgICAgIGxldCBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3MgPSBjaWVycmUgLSBob3JhSW5pY2lvO1xuICAgICAgICByZXR1cm4gZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEVzdGFkbyhwYXJhbWV0cm8sIGFjdHVhbCl7XG4gICAgICAgIGxldCBjYW1wbztcbiAgICAgICAgaWYgKHBhcmFtZXRybyA9PSB1bmRlZmluZWQpe1xuICAgICAgICAvL2xldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcblx0ICAgIC8vY2FtcG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiXHVEODNEXHVERDM1IC0+IENvbXBsZXRhZG8gLSBJbmZvcm1hY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERkUyIC0+IEZpbmFsaXphZG9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBlamVjdWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIFwiU2VsZWNjaW9uZSBlbCBudWV2byBlc3RhZG86XCIpO1xuICAgICAgICBjYW1wbyA9IFwiXHVEODNEXHVERDM1XCI7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoY2FtcG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk1vZGlmaWNhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY2FtcG8gPSBwYXJhbWV0cm87XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vdGEuZXN0YWRvID0gY2FtcG87XG4gICAgICAgIHJldHVybiBjYW1wbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQUE0oKTogUHJvbWlzZTxhbnk+e1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IHBhbGFicmFzUG9ySG9qYSA9IHBhcnNlSW50KHRoaXMuaW5mb05vdGEucGFsYWJyYXNQb3JIb2phKTtcbiAgICAgICAgbGV0IHBhZ2luYXNMZWlkYXMgPSBwYXJzZUludCh0aGlzLm5vdGEucGFnTGVpZGFzKTtcbiAgICAgICAgbGV0IHRpZW1wb0xlaWRvID0gcGFyc2VJbnQodGhpcy5ub3RhLnRpZW1wb0xlaWRvKTtcbiAgICAgICAgbGV0IFBQTSA9IChwYWxhYnJhc1BvckhvamEgKiBwYWdpbmFzTGVpZGFzKS8odGllbXBvTGVpZG8vNjAwMDApO1xuICAgICAgICByZXR1cm4gUFBNO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFBhZ0xlaWRhcygpOiBQcm9taXNlPGFueT57XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgcGFnRmluID0gcGFyc2VJbnQodGhpcy5ub3RhLnBhZ0Zpbik7XG5cdCAgICAgbGV0IHBhZ2luYXNMZWlkYXMgPSBwYWdGaW4gLSBwYXJzZUludCh0aGlzLmluZm9Ob3RhLnBhZ0luaWNpbyk7XG4gICAgICAgICAvL3RoaXMubm90YS5wYWdMZWlkYXMgPSBwYXJzZUludChwYWdpbmFzTGVpZGFzKTtcbiAgICAgICAgIHJldHVybiBwYXJzZUludChwYWdpbmFzTGVpZGFzKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYWdGaW4oKTogUHJvbWlzZTxhbnk+e1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IHByb21wdCA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICBsZXQgcGFnRmluID0gYXdhaXQgcHJvbXB0KGBcdTAwQkZIYXN0YSBxdWUgcFx1MDBFMWdpbmEgbGVcdTAwRURzdGU/YCwgYCR7dGhpcy5pbmZvTm90YS5wYWdJbmljaW99YCwgdHJ1ZSlcbiAgICAgICAgLy90aGlzLm5vdGEucGFnRmluID0gcGFyc2VJbnQocGFnRmluKVxuICAgICAgICByZXR1cm4gcGFyc2VJbnQocGFnRmluKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQb3JMZWVyKCk6IFByb21pc2U8bnVtYmVyPntcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBwb3JMZWVyID0gcGFyc2VJbnQodGhpcy5pbmZvTm90YS5wYWdpbmFzKSAtIHBhcnNlSW50KHRoaXMubm90YS5wYWdGaW4pO1xuICAgICAgICAvL3RoaXMubm90YS5wb3JMZWVyID0gcG9yTGVlcjtcbiAgICAgICAgcmV0dXJuIHBvckxlZXI7XG4gICAgfVxuXG59IiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUEkudHNcblxuaW1wb3J0IHsgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcbmltcG9ydCB7IFRhc2ssIEVzdGFkb1RhcmVhIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90YXNrSW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBUYXNrVXRpbHMgfSBmcm9tICcuLi91dGlscy90YXNrVXRpbHMnO1xuaW1wb3J0IHsgVGFza1dlaWdodENhbGN1bGF0b3IgfSBmcm9tICcuLi91dGlscy90YXNrV2VpZ2h0Q2FsY3VsYXRvcic7XG5cbmV4cG9ydCBjbGFzcyBUYXJlYXNBUEkge1xuICAgIHByaXZhdGUgdGFza1V0aWxzOiBUYXNrVXRpbHM7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogTXlQbHVnaW4pIHtcbiAgICAgICAgdGhpcy50YXNrVXRpbHMgPSBuZXcgVGFza1V0aWxzKHBsdWdpbik7XG4gICAgICAgIFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNldFRhc2tVdGlscyh0aGlzLnRhc2tVdGlscyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBkZWJlRXhjbHVpckFyY2hpdm8oZmlsZTogVEZpbGUpOiBib29sZWFuIHtcbiAgICAgICAgLy8gRXhjbHVpciBsYSBjYXJwZXRhIFBsYW50aWxsYXMgeSBzdXMgc3ViY2FycGV0YXNcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCdQbGFudGlsbGFzLycpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEV4Y2x1aXIgbGEgY2FycGV0YSBkZWwgc2lzdGVtYSBHVEQgeSBzdXMgc3ViY2FycGV0YXNcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9gKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeGNsdWlyIGNhcnBldGEgZGUgYXJjaGl2b3MgKHNpIGV4aXN0ZSlcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCdBcmNoaXZvLycpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc2FyVGFyZWFzKFxuICAgICAgICBmaWxlczogVEZpbGVbXSwgXG4gICAgICAgIGZpbHRybzogKHRhc2s6IFRhc2spID0+IGJvb2xlYW4gfCBQcm9taXNlPGJvb2xlYW4+LFxuICAgICAgICBidXNjYXJFbkVqZWN1Y2lvbjogYm9vbGVhbiA9IGZhbHNlXG4gICAgKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgY29uc3QgdGFyZWFzOiBUYXNrW10gPSBbXTtcbiAgICAgICAgY29uc3QgZXJyb3Jlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlc1BhcmFQcm9jZXNhciA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICF0aGlzLmRlYmVFeGNsdWlyQXJjaGl2byhmaWxlKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXFxuPT09IElOSUNJQU5ETyBQUk9DRVNBTUlFTlRPIERFIFRBUkVBUyA9PT1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm9jZXNhbmRvICR7ZmlsZXNQYXJhUHJvY2VzYXIubGVuZ3RofSBhcmNoaXZvcyBkZSAke2ZpbGVzLmxlbmd0aH0gdG90YWxlc2ApO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNQYXJhUHJvY2VzYXIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0dWxvTm90YSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJUaXR1bG9Ob3RhKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcXG5Qcm9jZXNhbmRvIGFyY2hpdm86ICR7ZmlsZS5wYXRofWApO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZWEgb2YgbGluZWFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZXRlY3RhciBlbCB0aXBvIGRlIHRhcmVhIGJhc2FkbyBlbiBlbCBjaGVja2JveFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNFbkVqZWN1Y2lvbiA9IGxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFsvXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNBYmllcnRhID0gbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gWyBdJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc0NvbXBsZXRhZGEgPSBsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbeF0nKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FsdGFyIGxcdTAwRURuZWFzIHF1ZSBubyBzb24gdGFyZWFzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFsnKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEltcGxlbWVudGFyIGxcdTAwRjNnaWNhIHNlcGFyYWRhIHBhcmEgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVzY2FyRW5FamVjdWNpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVzRW5FamVjdWNpb24pIGNvbnRpbnVlOyAvLyBTb2xvIHByb2Nlc2FyIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYXJhIG90cmFzIGJcdTAwRkFzcXVlZGFzLCBpZ25vcmFyIHRhcmVhcyBjb21wbGV0YWRhcyB5IGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVzQ29tcGxldGFkYSB8fCBlc0VuRWplY3VjaW9uKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVzQWJpZXJ0YSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhZXIgZWwgdGV4dG8gbGltcGlvIGRlIGxhIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b0xpbXBpbyA9IHRoaXMudGFza1V0aWxzLmxpbXBpYXJUZXh0b1RhcmVhKGxpbmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvT3JpZ2luYWwgPSBsaW5lYS50cmltKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV4dHJhZXIgbWV0YWRhdG9zXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYXNZSG9yYXMgPSB0aGlzLnRhc2tVdGlscy5leHRyYWVyRmVjaGFzWUhvcmFzKGxpbmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV0aXF1ZXRhc0V4dHJhaWRhcyA9IHRoaXMudGFza1V0aWxzLmV4dHJhZXJFdGlxdWV0YXMobGluZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXRpcXVldGFzQ2F0ZWdvcml6YWRhcyA9IHRoaXMudGFza1V0aWxzLmNhdGVnb3JpemFyRXRpcXVldGFzKGV0aXF1ZXRhc0V4dHJhaWRhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHRhc2tJZCwgZGVwZW5kZW5jeUlkIH0gPSB0aGlzLnRhc2tVdGlscy5leHRyYWVyRGVwZW5kZW5jaWFzWUlkcyhsaW5lYSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWFyIG9iamV0byBkZSB0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZWE6IFRhc2sgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dG86IHRleHRvTGltcGlvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRvT3JpZ2luYWw6IHRleHRvT3JpZ2luYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnV0YUFyY2hpdm86IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub21icmVBcmNoaXZvOiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzogdGl0dWxvTm90YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RhZG86IGVzRW5FamVjdWNpb24gPyBFc3RhZG9UYXJlYS5FbkVqZWN1Y2lvbiA6IEVzdGFkb1RhcmVhLkFiaWVydGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZmVjaGFzWUhvcmFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV0aXF1ZXRhczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2RhczogZXRpcXVldGFzRXh0cmFpZGFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5ldGlxdWV0YXNDYXRlZ29yaXphZGFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXNrSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVwZW5kZW5jeUlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxjdWxhciBwZXNvIHkgdmVyaWZpY2FyIGRlcGVuZGVuY2lhc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEud2VpZ2h0ID0gVGFza1dlaWdodENhbGN1bGF0b3IuY2FsY3VsYXRlV2VpZ2h0KHRhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXBlbmRlbmN5SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlc3RhZG9EZXBlbmRlbmNpYSA9IGF3YWl0IHRoaXMudGFza1V0aWxzLnZlcmlmaWNhckVzdGFkb1RhcmVhKGRlcGVuZGVuY3lJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEuaXNCbG9ja2VkID0gIWVzdGFkb0RlcGVuZGVuY2lhLmNvbXBsZXRhZGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEuZGVwZW5kZW5jeUxvY2F0aW9uID0gZXN0YWRvRGVwZW5kZW5jaWEucnV0YUFyY2hpdm87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEuZGVwZW5kZW5jeVRpdGxlID0gZXN0YWRvRGVwZW5kZW5jaWEudGl0dWxvQXJjaGl2bztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5kZXBlbmRlbmN5VGV4dG8gPSBlc3RhZG9EZXBlbmRlbmNpYS50ZXh0b1RhcmVhOyAvLyBBZ3JlZ2FyIGVsIHRleHRvIGRlIGxhIHRhcmVhIGRlcGVuZGllbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwbGljYXIgZmlsdHJvXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdW1wbGVGaWx0cm8gPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoZmlsdHJvKHRhcmVhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VtcGxlRmlsdHJvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYC0+IFRhcmVhIGFncmVnYWRhOiAke3RleHRvTGltcGlvLnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWFzLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZmlsZUVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yZXMucHVzaChgRXJyb3IgcHJvY2VzYW5kbyBhcmNoaXZvICR7ZmlsZS5wYXRofTogJHtmaWxlRXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZW4gYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZmlsZUVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmFsIHByb2Nlc2FuZG8gdGFyZWFzOicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIHByb2Nlc2FuZG8gdGFyZWFzLiBSZXZpc2EgbGEgY29uc29sYSBwYXJhIG1cdTAwRTFzIGRldGFsbGVzLicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVycm9yZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdcXG5FcnJvcmVzIGVuY29udHJhZG9zIGR1cmFudGUgZWwgcHJvY2VzYW1pZW50bzonLCBlcnJvcmVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGBcXG49PT0gUFJPQ0VTQU1JRU5UTyBDT01QTEVUQURPID09PWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgVG90YWwgZGUgdGFyZWFzIGVuY29udHJhZGFzOiAke3RhcmVhcy5sZW5ndGh9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBPcmRlbmFyIGxhcyB0YXJlYXMgc2VnXHUwMEZBbiBjb3JyZXNwb25kYVxuICAgICAgICByZXR1cm4gYnVzY2FyRW5FamVjdWNpb24gPyBcbiAgICAgICAgICAgIHRoaXMub3JnYW5pemFyVGFyZWFzRW5FamVjdWNpb24odGFyZWFzKSA6IFxuICAgICAgICAgICAgVGFza1dlaWdodENhbGN1bGF0b3Iuc29ydFRhc2tzKHRhcmVhcyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgbm9tYnJlQXJjaGl2bzogc3RyaW5nLCBcbiAgICAgICAgY29udGVuaWRvOiBzdHJpbmdcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZXhpc3RlIGxhIGNhcnBldGEgZGVsIHNpc3RlbWEgR1REXG4gICAgICAgICAgICAgICAgY29uc3QgY2FycGV0YUdURCA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIWNhcnBldGFHVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgYXJjaGl2b0V4aXN0ZW50ZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobm9tYnJlQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGFyY2hpdm9FeGlzdGVudGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGFyY2hpdm9FeGlzdGVudGUsIGNvbnRlbmlkbyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGFyY2hpdm9FeGlzdGVudGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGUobm9tYnJlQXJjaGl2bywgY29udGVuaWRvKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUobnVldm9BcmNoaXZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhci9hYnJpciBhcmNoaXZvOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG9zIHByaW5jaXBhbGVzIGRlIGJcdTAwRkFzcXVlZGEgZGUgdGFyZWFzXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1ZlbmNpZGFzQWJpZXJ0YXMoKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zaG91bGRJbmNsdWRlVGFzayh0YXJlYSwgJ3ZlbmNpZGFzJywgdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzSG95KCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4gVGFza1dlaWdodENhbGN1bGF0b3Iuc2hvdWxkSW5jbHVkZVRhc2sodGFyZWEsICdob3knLCB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNob3VsZEluY2x1ZGVUYXNrKHRhcmVhLCAncHJveGltYXMnLCB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNTdGFydFZlbmNpZGFzKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4gVGFza1dlaWdodENhbGN1bGF0b3Iuc2hvdWxkSW5jbHVkZVRhc2sodGFyZWEsICdzdGFydF92ZW5jaWRhcycsIHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1N0YXJ0UHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgY29uc3QgbGltaXRlRnV0dXJvID0gbmV3IERhdGUoaG95KTtcbiAgICAgICAgbGltaXRlRnV0dXJvLnNldERhdGUobGltaXRlRnV0dXJvLmdldERhdGUoKSArIGRpYXNQcm94aW1vcyk7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5mZWNoYVN0YXJ0KSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTdGFydCA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhU3RhcnQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYVN0YXJ0ICYmIGZlY2hhU3RhcnQgPD0gbGltaXRlRnV0dXJvICYmIGZlY2hhU3RhcnQgPj0gaG95O1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvcyBkZSByZW5kZXJpemFkbyB5IHZpc3VhbGl6YWNpXHUwMEYzblxuICAgIHByaXZhdGUgZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihtZXRvZG86IHN0cmluZywgcGFyYW1ldHJvcz86IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgXFxgXFxgXFxgZGF0YXZpZXdqc1xuY29uc3QgZ3AgPSBhcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1wZXJzb25hbC1tYW5hZ2VtZW50J107XG5pZiAoIWdwKSB7XG4gICAgZHYucGFyYWdyYXBoKFwiXHUyNkEwXHVGRTBGIFBsdWdpbiBkZSBHZXN0aVx1MDBGM24gUGVyc29uYWwgbm8gZW5jb250cmFkb1wiKTtcbiAgICByZXR1cm47XG59XG5cbmNvbnN0IGJ0biA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7dGV4dDogJ1x1RDgzRFx1REQwNCBBY3R1YWxpemFyIFZpc3RhJ30pO1xuYnRuLnN0eWxlLmNzc1RleHQgPSAncGFkZGluZzogNXB4IDE1cHg7IGJhY2tncm91bmQtY29sb3I6ICMxZTFlMWU7IGNvbG9yOiAjZmZmZmZmOyBib3JkZXI6IDFweCBzb2xpZCAjNGE0YTRhOyBib3JkZXItcmFkaXVzOiA0cHg7IGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luLWJvdHRvbTogMTBweDsnO1xuXG5idG4uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IGJ0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzJlMmUyZScpO1xuYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMxZTFlMWUnKTtcblxuYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0FjdHVhbGl6YW5kbyB2aXN0YS4uLicpO1xuICAgICAgICBhd2FpdCBncC50YXJlYXNBUEkuJHttZXRvZG99KCR7cGFyYW1ldHJvcyB8fCAnJ30pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcbiAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgYWN0dWFsaXphciB0YXJlYXMnKTtcbiAgICB9XG59KTtcblxcYFxcYFxcYFxcblxcbmA7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG9zIHBcdTAwRkFibGljb3MgZGUgdmlzdWFsaXphY2lcdTAwRjNuIGNvcnJlc3BvbmRpZW50ZXMgYSBsb3MgY29tYW5kb3NcbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1ZlbmNpZGFzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNWZW5jaWRhc0FiaWVydGFzKCk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgdmVuY2lkYXMgYWJpZXJ0YXMuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBWZW5jaWRhc1wiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1ZlbmNpZGFzXCJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBWZW5jaWRhcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgdmVuY2lkYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzVmVuY2lkYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1Byb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNQcm94aW1hcyhkaWFzUHJveGltb3MpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHByXHUwMEYzeGltYXMuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBQclx1MDBGM3hpbWFzXCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzUHJveGltYXNcIixcbiAgICAgICAgICAgICAgICBkaWFzUHJveGltb3NcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBQclx1MDBGM3hpbWFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBwclx1MDBGM3hpbWFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1Byb3hpbWFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNIb3koKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc0hveSgpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHByb2dyYW1hZGFzIHBhcmEgaG95LicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgcGFyYSBIb3lcIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNIb3lcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIHBhcmEgSG95Lm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBwYXJhIGhveWApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNIb3k6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1N0YXJ0VmVuY2lkYXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc1N0YXJ0VmVuY2lkYXMoKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBjb24gaW5pY2lvIHZlbmNpZG8uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBjb24gSW5pY2lvIFZlbmNpZG9cIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNTdGFydFZlbmNpZGFzXCJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBjb24gSW5pY2lvIFZlbmNpZG8ubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIGNvbiBpbmljaW8gdmVuY2lkb2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNTdGFydFZlbmNpZGFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNTdGFydFByb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNTdGFydFByb3hpbWFzKGRpYXNQcm94aW1vcyk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgcG9yIGluaWNpYXIgZW4gZWwgcGVyXHUwMEVEb2RvIGVzcGVjaWZpY2Fkby4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIHBvciBJbmljaWFyXCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzU3RhcnRQcm94aW1hc1wiLFxuICAgICAgICAgICAgICAgIGRpYXNQcm94aW1vc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIHBvciBJbmljaWFyLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBwb3IgaW5pY2lhcmApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNTdGFydFByb3hpbWFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG9zIGRlIHV0aWxpZGFkIHByaXZhZG9zXG4gICAgcHJpdmF0ZSB0aWVuZUZlY2hhc1ZhbGlkYXMoZmVjaGFzWUhvcmFzOiBhbnkpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgeyBmZWNoYVZlbmNpbWllbnRvLCBmZWNoYVNjaGVkdWxlZCwgZmVjaGFTdGFydCB9ID0gZmVjaGFzWUhvcmFzO1xuICAgICAgICByZXR1cm4gZmVjaGFWZW5jaW1pZW50byB8fCBmZWNoYVNjaGVkdWxlZCB8fCBmZWNoYVN0YXJ0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgIHRhcmVhczogVGFza1tdLFxuICAgICAgICB0aXR1bG86IHN0cmluZyxcbiAgICAgICAgbWV0b2RvQWN0dWFsaXphY2lvbjogc3RyaW5nLFxuICAgICAgICBkaWFzUHJveGltb3M/OiBudW1iZXJcbiAgICApOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgJHt0aXR1bG99XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24obWV0b2RvQWN0dWFsaXphY2lvbiwgZGlhc1Byb3hpbW9zKTtcbiAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgaWYgKGRpYXNQcm94aW1vcykge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IE1vc3RyYW5kbyB0YXJlYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyAke2RpYXNQcm94aW1vc30gZFx1MDBFRGFzXFxuYDtcbiAgICAgICAgfVxuICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIGVuY29udHJhZGFzOiAke3RhcmVhcy5sZW5ndGh9XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYXNBZ3J1cGFkYXModGFyZWFzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFzQWdydXBhZGFzKHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdGFyZWFzUG9yQXJjaGl2byA9IHRoaXMuYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9ICcnO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBbcnV0YUFyY2hpdm8sIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHRhcmVhc1BvckFyY2hpdm8pKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyBbWyR7cnV0YUFyY2hpdm99fCR7aW5mby50aXR1bG99XV1cXG5cXG5gO1xuICAgICAgICAgICAgaW5mby50YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhKHRhcmVhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWEodGFyZWE6IFRhc2spOiBzdHJpbmcge1xuICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgIFxuICAgIC8vIEFncnVwYXIgbGFzIGZlY2hhcyBwYXJhIG1lam9yIHZpc3VhbGl6YWNpXHUwMEYzblxuICAgIGNvbnN0IGZlY2hhcyA9IFtdO1xuICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfWApO1xuICAgIH1cbiAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgZmVjaGFzLnB1c2goYFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfWApO1xuICAgIH1cbiAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfWApO1xuICAgIH1cbiAgICBcbiAgICBpZiAoZmVjaGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBGZWNoYXM6XFxuICAgICAgICAke2ZlY2hhcy5qb2luKCdcXG4gICAgICAgICcpfVxcbmA7XG4gICAgfVxuXG4gICAgICAgIC8vIEhvcmFyaW9zXG4gICAgICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YwIEhvcmFyaW86ICR7dGFyZWEuaG9yYUluaWNpbyB8fCAnLS06LS0nfSAtICR7dGFyZWEuaG9yYUZpbiB8fCAnLS06LS0nfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdGlxdWV0YXNcbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEREMyXHVGRTBGIENvbnRleHRvczogJHt0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDNjQgOiAke3RhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMudG9kb2lzdD8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDRjIgOiAke3RhcmVhLmV0aXF1ZXRhcy50b2RvaXN0LmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMub3RyYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNDXHVERkY3XHVGRTBGIE90cmFzOiAke3RhcmVhLmV0aXF1ZXRhcy5vdHJhcy5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByaW9yaWRhZFxuICAgICAgICBjb25zdCBwcmlvcmlkYWQgPSB0aGlzLm9idGVuZXJQcmlvcmlkYWRUYXJlYSh0YXJlYS50ZXh0byk7XG4gICAgICAgIGlmIChwcmlvcmlkYWQpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gJHtwcmlvcmlkYWQuZW1vaml9IFByaW9yaWRhZDogJHtwcmlvcmlkYWQubm9tYnJlfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIHByaXZhdGUgb2J0ZW5lclByaW9yaWRhZFRhcmVhKHRleHRvOiBzdHJpbmcpOiB7IGVtb2ppOiBzdHJpbmc7IG5vbWJyZTogc3RyaW5nIH0gfCBudWxsIHtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0EnKSkgcmV0dXJuIHsgZW1vamk6ICdcdUQ4M0RcdUREM0EnLCBub21icmU6ICdNdXkgQWx0YScgfTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUInKSkgcmV0dXJuIHsgZW1vamk6ICdcdTIzRUInLCBub21icmU6ICdBbHRhJyB9O1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQycpKSByZXR1cm4geyBlbW9qaTogJ1x1RDgzRFx1REQzQycsIG5vbWJyZTogJ01lZGlhJyB9O1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzRCcpKSByZXR1cm4geyBlbW9qaTogJ1x1RDgzRFx1REQzRCcsIG5vbWJyZTogJ0JhamEnIH07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VDJykpIHJldHVybiB7IGVtb2ppOiAnXHUyM0VDJywgbm9tYnJlOiAnTXV5IEJhamEnIH07XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzOiBUYXNrW10pOiB7IFtrZXk6IHN0cmluZ106IHsgdGl0dWxvOiBzdHJpbmc7IHRhcmVhczogVGFza1tdIH0gfSB7XG4gICAgICAgIHJldHVybiB0YXJlYXMucmVkdWNlKChhY2MsIHRhcmVhKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWFjY1t0YXJlYS5ydXRhQXJjaGl2b10pIHtcbiAgICAgICAgICAgICAgICBhY2NbdGFyZWEucnV0YUFyY2hpdm9dID0ge1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG86IHRhcmVhLnRpdHVsbyxcbiAgICAgICAgICAgICAgICAgICAgdGFyZWFzOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY2NbdGFyZWEucnV0YUFyY2hpdm9dLnRhcmVhcy5wdXNoKHRhcmVhKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9IGFzIHsgW2tleTogc3RyaW5nXTogeyB0aXR1bG86IHN0cmluZzsgdGFyZWFzOiBUYXNrW10gfSB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8oZmVjaGE6IHN0cmluZywgdGlwbzogJ2R1ZScgfCAnc2NoZWR1bGVkJyB8ICdzdGFydCcpOiBzdHJpbmcge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFPYmogPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYSk7XG4gICAgICAgICAgICBpZiAoIWZlY2hhT2JqKSByZXR1cm4gZmVjaGE7XG5cbiAgICAgICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgICAgICBjb25zdCBkaWZlcmVuY2lhRGlhcyA9IE1hdGguY2VpbChcbiAgICAgICAgICAgICAgICAoZmVjaGFPYmouZ2V0VGltZSgpIC0gaG95LmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGxldCB0ZXh0b0Jhc2UgPSAnJztcbiAgICAgICAgICAgIHN3aXRjaCAodGlwbykge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2R1ZSc6XG4gICAgICAgICAgICAgICAgICAgIHRleHRvQmFzZSA9IGRpZmVyZW5jaWFEaWFzIDwgMCA/ICdWZW5jaVx1MDBGMycgOiAnVmVuY2UnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzY2hlZHVsZWQnOlxuICAgICAgICAgICAgICAgICAgICB0ZXh0b0Jhc2UgPSAnUHJvZ3JhbWFkYSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9CYXNlID0gZGlmZXJlbmNpYURpYXMgPCAwID8gJ0RlYmlcdTAwRjMgaW5pY2lhcicgOiAnSW5pY2lhJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjb250ZXh0byA9ICcnO1xuICAgICAgICAgICAgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dG8gPSAnaG95JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZXJlbmNpYURpYXMgPT09IDEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0byA9ICdtYVx1MDBGMWFuYSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvID0gJ2F5ZXInO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZlcmVuY2lhRGlhcyA8IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0byA9IGBoYWNlICR7TWF0aC5hYnMoZGlmZXJlbmNpYURpYXMpfSBkXHUwMEVEYXNgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0byA9IGBlbiAke2RpZmVyZW5jaWFEaWFzfSBkXHUwMEVEYXNgO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYCR7dGV4dG9CYXNlfSAke2ZlY2hhfSAoJHtjb250ZXh0b30pYDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZvcm1hdGVhbmRvIGZlY2hhOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFcdTAwRjFhZGlyIG51ZXZvIG1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciB0YXJlYXMgZnV0dXJhc1xuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNGdXR1cmFzKGRpYXNGdXR1cm9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgIGNvbnN0IGxpbWl0ZUZ1dHVybyA9IG5ldyBEYXRlKGhveSk7XG4gICAgbGltaXRlRnV0dXJvLnNldERhdGUobGltaXRlRnV0dXJvLmdldERhdGUoKSArIGRpYXNGdXR1cm9zKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhc1JlbGV2YW50ZXMgPSBbXG4gICAgICAgICAgICAgICAgdGFyZWEuZmVjaGFWZW5jaW1pZW50byxcbiAgICAgICAgICAgICAgICB0YXJlYS5mZWNoYVNjaGVkdWxlZCxcbiAgICAgICAgICAgICAgICB0YXJlYS5mZWNoYVN0YXJ0XG4gICAgICAgICAgICBdLmZpbHRlcihCb29sZWFuKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZlY2hhc1JlbGV2YW50ZXMuc29tZShmZWNoYSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFPYmogPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYSEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYU9iaiAmJiBmZWNoYU9iaiA+IGhveSAmJiBmZWNoYU9iaiA8PSBsaW1pdGVGdXR1cm87XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICk7XG4gICAgfVxuXG4gICAgLy8gQVx1MDBGMWFkaXIgbVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBmdXR1cmFzXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNGdXR1cmFzKGRpYXNGdXR1cm9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRhcmVhc0Z1dHVyYXMoZGlhc0Z1dHVyb3MpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBObyBoYXkgdGFyZWFzIHByb2dyYW1hZGFzIHBhcmEgbG9zIHByXHUwMEYzeGltb3MgJHtkaWFzRnV0dXJvc30gZFx1MDBFRGFzLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgYFRhcmVhcyBQcm9ncmFtYWRhcyAoUHJcdTAwRjN4aW1vcyAke2RpYXNGdXR1cm9zfSBkXHUwMEVEYXMpYCxcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNGdXR1cmFzXCIsXG4gICAgICAgICAgICAgICAgZGlhc0Z1dHVyb3NcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBQcm9ncmFtYWRhcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyAke2RpYXNGdXR1cm9zfSBkXHUwMEVEYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzRnV0dXJhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFcdTAwRjFhZGlyIG51ZXZvIG1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzRW5FamVjdWNpb24oKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gTW9kaWZpY2FyIGVsIHByb2Nlc2FtaWVudG8gZGUgdGFyZWFzIHBhcmEgZGV0ZWN0YXIgZXN0YWRvIFsvXVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tMaW5lID0gdGFyZWEudGV4dG8udHJpbSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrTGluZS5zdGFydHNXaXRoKCctIFsvXScpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgdHJ1ZSAvLyBudWV2byBwYXJcdTAwRTFtZXRybyBwYXJhIGluZGljYXIgcXVlIGJ1c2NhbW9zIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIEFcdTAwRjFhZGlyIG1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc0VuRWplY3VjaW9uKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gT2J0ZW5lciB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICAgICAodGFyZWEpID0+IHRydWUsIC8vIE5vIGFwbGljYW1vcyBmaWx0cm8gYWRpY2lvbmFsIHBvcnF1ZSB5YSBmaWx0cmFtb3MgcG9yIGVzdGFkbyBlbiBwcm9jZXNhclRhcmVhc1xuICAgICAgICAgICAgICAgIHRydWUgLy8gSW5kaWNhciBxdWUgYnVzY2Ftb3MgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIGVuY29udHJhcm9uIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzbicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2VuZXJhciB2aXN0YSB5IGd1YXJkYXIgYXJjaGl2b1xuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFFbkVqZWN1Y2lvbih0YXJlYXMpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIGVuIEVqZWN1Y2lcdTAwRjNuLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0VuRWplY3VjaW9uOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFFbkVqZWN1Y2lvbih0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyBUYXJlYXMgZW4gRWplY3VjaVx1MDBGM25cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgYm90XHUwMEYzbiBkZSBhY3R1YWxpemFjaVx1MDBGM25cbiAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUYXJlYXNFbkVqZWN1Y2lvblwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGluZm9ybWFjaVx1MDBGM24gZ2VuZXJhbFxuICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuOiAke3RhcmVhcy5sZW5ndGh9XFxuXFxuYDtcblxuICAgICAgICAvLyBTZXBhcmFyIHRhcmVhcyBwb3IgY2F0ZWdvclx1MDBFRGFzXG4gICAgICAgIGNvbnN0IHRhcmVhc0NvblZlbmNpbWllbnRvID0gdGFyZWFzLmZpbHRlcih0ID0+IHQuZmVjaGFWZW5jaW1pZW50byk7XG4gICAgICAgIGNvbnN0IHRhcmVhc1Byb2dyYW1hZGFzID0gdGFyZWFzLmZpbHRlcih0ID0+ICF0LmZlY2hhVmVuY2ltaWVudG8gJiYgdC5mZWNoYVNjaGVkdWxlZCk7XG4gICAgICAgIGNvbnN0IHRhcmVhc0NvbkluaWNpbyA9IHRhcmVhcy5maWx0ZXIodCA9PiAhdC5mZWNoYVZlbmNpbWllbnRvICYmICF0LmZlY2hhU2NoZWR1bGVkICYmIHQuZmVjaGFTdGFydCk7XG4gICAgICAgIGNvbnN0IHRhcmVhc1NpbkZlY2hhID0gdGFyZWFzLmZpbHRlcih0ID0+ICF0LmZlY2hhVmVuY2ltaWVudG8gJiYgIXQuZmVjaGFTY2hlZHVsZWQgJiYgIXQuZmVjaGFTdGFydCk7XG5cbiAgICAgICAgICAgLy8gUmVuZGVyaXphciBjYWRhIHNlY2NpXHUwMEYzblxuICAgICAgICBpZiAodGFyZWFzQ29uVmVuY2ltaWVudG8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBDb24gZmVjaGEgZGUgdmVuY2ltaWVudG8gKCR7dGFyZWFzQ29uVmVuY2ltaWVudG8ubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzRW5FamVjdWNpb24odGFyZWFzQ29uVmVuY2ltaWVudG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmVhc1Byb2dyYW1hZGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgUHJvZ3JhbWFkYXMgKCR7dGFyZWFzUHJvZ3JhbWFkYXMubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzRW5FamVjdWNpb24odGFyZWFzUHJvZ3JhbWFkYXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmVhc0NvbkluaWNpby5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIENvbiBmZWNoYSBkZSBpbmljaW8gKCR7dGFyZWFzQ29uSW5pY2lvLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc0VuRWplY3VjaW9uKHRhcmVhc0NvbkluaWNpbyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZWFzU2luRmVjaGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBTaW4gZmVjaGEgYXNpZ25hZGEgKCR7dGFyZWFzU2luRmVjaGEubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzRW5FamVjdWNpb24odGFyZWFzU2luRmVjaGEpO1xuXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxufVxuXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbVx1MDBFOXRvZG8gZXNwZWNcdTAwRURmaWNvIHBhcmEgcmVuZGVyaXphciBncnVwb3MgZGUgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyR3J1cG9UYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRhcmVhc1BvckFyY2hpdm8gPSB0aGlzLmFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhcyk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSAnJztcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgW3J1dGFBcmNoaXZvLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyh0YXJlYXNQb3JBcmNoaXZvKSkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyMgW1ske3J1dGFBcmNoaXZvfXwke2luZm8udGl0dWxvfV1dXFxuXFxuYDtcbiAgICAgICAgICAgIGluZm8udGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYUVuRWplY3VjaW9uKHRhcmVhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyaXphckdydXBvVGFyZWFzKHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICBjb25zdCB0YXJlYXNQb3JBcmNoaXZvID0gdGhpcy5hZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXMpO1xuICAgIGxldCBjb250ZW5pZG8gPSAnJztcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtydXRhQXJjaGl2bywgaW5mb10gb2YgT2JqZWN0LmVudHJpZXModGFyZWFzUG9yQXJjaGl2bykpIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAjIyMgW1ske3J1dGFBcmNoaXZvfXwke2luZm8udGl0dWxvfV1dXFxuXFxuYDtcbiAgICAgICAgaW5mby50YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFFbkVqZWN1Y2lvbih0YXJlYSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfSAgIFxuXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFFbkVqZWN1Y2lvbih0YXJlYTogVGFzayk6IHN0cmluZyB7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSBgJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVuZGVyaXphciBmZWNoYXMgc2kgZXhpc3RlblxuICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50byB8fCB0YXJlYS5mZWNoYVNjaGVkdWxlZCB8fCB0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIEZlY2hhczpcXG5gO1xuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAgICAgLSBcdUQ4M0RcdURDQzUgOiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgICAgICAtIFx1MjNGMyA6ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgICAgIC0gXHVEODNEXHVERUVCOiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyaXphciBob3JhcmlvcyBzaSBleGlzdGVuXG4gICAgICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YwIEhvcmFyaW86ICR7dGFyZWEuaG9yYUluaWNpbyB8fCAnLS06LS0nfSAtICR7dGFyZWEuaG9yYUZpbiB8fCAnLS06LS0nfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFdGlxdWV0YXNcbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEREMyXHVGRTBGIENvbnRleHRvczogJHt0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDNjQgUGVyc29uYXM6ICR7dGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy50b2RvaXN0Py5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENGMiBUb2RvaXN0OiAke3RhcmVhLmV0aXF1ZXRhcy50b2RvaXN0LmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMub3RyYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNDXHVERkY3XHVGRTBGIE90cmFzOiAke3RhcmVhLmV0aXF1ZXRhcy5vdHJhcy5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByaW9yaWRhZFxuICAgICAgICBjb25zdCBwcmlvcmlkYWQgPSB0aGlzLm9idGVuZXJQcmlvcmlkYWRUYXJlYSh0YXJlYS50ZXh0byk7XG4gICAgICAgIGlmIChwcmlvcmlkYWQpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gJHtwcmlvcmlkYWQuZW1vaml9IFByaW9yaWRhZDogJHtwcmlvcmlkYWQubm9tYnJlfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIHByaXZhdGUgb3JnYW5pemFyVGFyZWFzRW5FamVjdWNpb24odGFyZWFzOiBUYXNrW10pOiBUYXNrW10ge1xuICAgICAgICByZXR1cm4gdGFyZWFzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhQSA9IGEuZmVjaGFWZW5jaW1pZW50byB8fCBhLmZlY2hhU2NoZWR1bGVkIHx8IGEuZmVjaGFTdGFydDtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhQiA9IGIuZmVjaGFWZW5jaW1pZW50byB8fCBiLmZlY2hhU2NoZWR1bGVkIHx8IGIuZmVjaGFTdGFydDtcblxuICAgICAgICAgICAgaWYgKGZlY2hhQSAmJiBmZWNoYUIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU9iakEgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYUEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqQiA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhQik7XG4gICAgICAgICAgICAgICAgaWYgKGZlY2hhT2JqQSAmJiBmZWNoYU9iakIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhT2JqQS5nZXRUaW1lKCkgLSBmZWNoYU9iakIuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2kgdW5hIHRhcmVhIHRpZW5lIGZlY2hhIHkgbGEgb3RyYSBubywgbGEgcXVlIHRpZW5lIGZlY2hhIHZhIHByaW1lcm9cbiAgICAgICAgICAgIGlmIChmZWNoYUEpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChmZWNoYUIpIHJldHVybiAxO1xuXG4gICAgICAgICAgICAvLyBTaSBuaW5ndW5hIHRpZW5lIGZlY2hhLCBtYW50ZW5lciBlbCBvcmRlbiBwb3IgcGVzb1xuICAgICAgICAgICAgcmV0dXJuIChiLndlaWdodD8udG90YWxXZWlnaHQgfHwgMCkgLSAoYS53ZWlnaHQ/LnRvdGFsV2VpZ2h0IHx8IDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAgLy8gTnVldm8gbVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXNcbiAgICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmZlY2hhU2NoZWR1bGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTY2hlZHVsZWQgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVNjaGVkdWxlZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhU2NoZWR1bGVkICE9PSBudWxsICYmIGZlY2hhU2NoZWR1bGVkIDwgaG95O1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIE51ZXZvIG1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXNcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzU2NoZWR1bGVkUHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgY29uc3QgbGltaXRlRnV0dXJvID0gbmV3IERhdGUoaG95KTtcbiAgICAgICAgbGltaXRlRnV0dXJvLnNldERhdGUobGltaXRlRnV0dXJvLmdldERhdGUoKSArIGRpYXNQcm94aW1vcyk7XG5cbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5mZWNoYVNjaGVkdWxlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU2NoZWR1bGVkID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFTY2hlZHVsZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYVNjaGVkdWxlZCAhPT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgZmVjaGFTY2hlZHVsZWQgPj0gaG95ICYmIFxuICAgICAgICAgICAgICAgICAgICAgICBmZWNoYVNjaGVkdWxlZCA8PSBsaW1pdGVGdXR1cm87XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXNcbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNTY2hlZHVsZWRWZW5jaWRhcygpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhcy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIFNjaGVkdWxlZCBWZW5jaWRhc1wiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzXCJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBTY2hlZHVsZWQgVmVuY2lkYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNTY2hlZHVsZWRWZW5jaWRhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXNcbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1NjaGVkdWxlZFByb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNTY2hlZHVsZWRQcm94aW1hcyhkaWFzUHJveGltb3MpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHNjaGVkdWxlZCBwclx1MDBGM3hpbWFzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgYFRhcmVhcyBTY2hlZHVsZWQgUHJcdTAwRjN4aW1hcyAoJHtkaWFzUHJveGltb3N9IGRcdTAwRURhcylgLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1NjaGVkdWxlZFByb3hpbWFzXCIsXG4gICAgICAgICAgICAgICAgZGlhc1Byb3hpbW9zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgU2NoZWR1bGVkIFByXHUwMEYzeGltYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHNjaGVkdWxlZCBwclx1MDBGM3hpbWFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1NjaGVkdWxlZFByb3hpbWFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgICAgLy8gTVx1MDBFOXRvZG8gYXV4aWxpYXIgcGFyYSBsYSB2aXN1YWxpemFjaVx1MDBGM24gZGUgZmVjaGFzIHNjaGVkdWxlZFxuICAgIHByaXZhdGUgZm9ybWF0ZWFyRmVjaGFTY2hlZHVsZWQoZmVjaGE6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGZlY2hhT2JqID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGEpO1xuICAgICAgICBpZiAoIWZlY2hhT2JqKSByZXR1cm4gZmVjaGE7XG5cbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgY29uc3QgZGlmZXJlbmNpYURpYXMgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgICAoZmVjaGFPYmouZ2V0VGltZSgpIC0gaG95LmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcbiAgICAgICAgKTtcblxuICAgICAgICBsZXQgY29udGV4dG8gPSAnJztcbiAgICAgICAgaWYgKGRpZmVyZW5jaWFEaWFzIDwgMCkge1xuICAgICAgICAgICAgY29udGV4dG8gPSBgKHJldHJhc2FkYSAke01hdGguYWJzKGRpZmVyZW5jaWFEaWFzKX0gZFx1MDBFRGFzKWA7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZXJlbmNpYURpYXMgPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRleHRvID0gJyhob3kpJztcbiAgICAgICAgfSBlbHNlIGlmIChkaWZlcmVuY2lhRGlhcyA9PT0gMSkge1xuICAgICAgICAgICAgY29udGV4dG8gPSAnKG1hXHUwMEYxYW5hKSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0byA9IGAoZW4gJHtkaWZlcmVuY2lhRGlhc30gZFx1MDBFRGFzKWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYCR7ZmVjaGF9ICR7Y29udGV4dG99YDtcbiAgICB9XG5cbiAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIHRvZGFzIGxhcyB0YXJlYXMgdmVuY2lkYXNcbiAgICAgcHVibGljIGFzeW5jIGdldFRvZGFzVGFyZWFzVmVuY2lkYXMoKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBlc3RhVmVuY2lkYSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBmZWNoYSBkZSB2ZW5jaW1pZW50byAoZHVlKVxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhVmVuYyA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVjaGFWZW5jICYmIGZlY2hhVmVuYyA8IGhveSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEudGlwb1ZlbmNpbWllbnRvID0gWydkdWUnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVzdGFWZW5jaWRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgZmVjaGEgc2NoZWR1bGVkXG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU2NoZWQgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVNjaGVkdWxlZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWNoYVNjaGVkICYmIGZlY2hhU2NoZWQgPCBob3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnRpcG9WZW5jaW1pZW50byA9IHRhcmVhLnRpcG9WZW5jaW1pZW50byB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnRpcG9WZW5jaW1pZW50by5wdXNoKCdzY2hlZHVsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVzdGFWZW5jaWRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgZmVjaGEgZGUgaW5pY2lvIChzdGFydClcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVN0YXJ0ID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFTdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWNoYVN0YXJ0ICYmIGZlY2hhU3RhcnQgPCBob3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnRpcG9WZW5jaW1pZW50byA9IHRhcmVhLnRpcG9WZW5jaW1pZW50byB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnRpcG9WZW5jaW1pZW50by5wdXNoKCdzdGFydCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXN0YVZlbmNpZGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBlc3RhVmVuY2lkYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgdG9kYXMgbGFzIHRhcmVhcyB2ZW5jaWRhc1xuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVG9kYXNUYXJlYXNWZW5jaWRhcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VG9kYXNUYXJlYXNWZW5jaWRhcygpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHZlbmNpZGFzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFUb2Rhc1ZlbmNpZGFzKHRhcmVhcyk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RvZGFzIGxhcyBUYXJlYXMgVmVuY2lkYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHZlbmNpZGFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBlc3BlY1x1MDBFRGZpY28gcGFyYSBnZW5lcmFyIGxhIHZpc3RhIGRlIHRvZGFzIGxhcyB0YXJlYXMgdmVuY2lkYXNcbiAgICBwcml2YXRlIGdlbmVyYXJWaXN0YVRvZGFzVmVuY2lkYXModGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgVG9kYXMgbGFzIFRhcmVhcyBWZW5jaWRhc1xcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXNcIik7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgdmVuY2lkYXM6ICR7dGFyZWFzLmxlbmd0aH1cXG5cXG5gO1xuXG4gICAgICAgIC8vIE9yZ2FuaXphciB0YXJlYXMgcG9yIHRpcG8gZGUgdmVuY2ltaWVudG9cbiAgICAgICAgY29uc3QgdGFyZWFzVmVuY0R1ZSA9IHRhcmVhcy5maWx0ZXIodCA9PiB0LnRpcG9WZW5jaW1pZW50bz8uaW5jbHVkZXMoJ2R1ZScpKTtcbiAgICAgICAgY29uc3QgdGFyZWFzVmVuY1NjaGVkdWxlZCA9IHRhcmVhcy5maWx0ZXIodCA9PiB0LnRpcG9WZW5jaW1pZW50bz8uaW5jbHVkZXMoJ3NjaGVkdWxlZCcpKTtcbiAgICAgICAgY29uc3QgdGFyZWFzVmVuY1N0YXJ0ID0gdGFyZWFzLmZpbHRlcih0ID0+IHQudGlwb1ZlbmNpbWllbnRvPy5pbmNsdWRlcygnc3RhcnQnKSk7XG5cbiAgICAgICAgLy8gU2VjY2lcdTAwRjNuIGRlIHRhcmVhcyBjb24gZmVjaGEgZGUgdmVuY2ltaWVudG8gKGR1ZSlcbiAgICAgICAgaWYgKHRhcmVhc1ZlbmNEdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgY29uIEZlY2hhIGRlIFZlbmNpbWllbnRvIFBhc2FkYSAoJHt0YXJlYXNWZW5jRHVlLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc1ZlbmNpZGFzKHRhcmVhc1ZlbmNEdWUsICdkdWUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlY2NpXHUwMEYzbiBkZSB0YXJlYXMgc2NoZWR1bGVkIHZlbmNpZGFzXG4gICAgICAgIGlmICh0YXJlYXNWZW5jU2NoZWR1bGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIFNjaGVkdWxlZCBSZXRyYXNhZGFzICgke3RhcmVhc1ZlbmNTY2hlZHVsZWQubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzVmVuY2lkYXModGFyZWFzVmVuY1NjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2VjY2lcdTAwRjNuIGRlIHRhcmVhcyBzdGFydCB2ZW5jaWRhc1xuICAgICAgICBpZiAodGFyZWFzVmVuY1N0YXJ0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIGNvbiBJbmljaW8gUmV0cmFzYWRvICgke3RhcmVhc1ZlbmNTdGFydC5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNWZW5jaWRhcyh0YXJlYXNWZW5jU3RhcnQsICdzdGFydCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBhdXhpbGlhciBwYXJhIHJlbmRlcml6YXIgZ3J1cG9zIGRlIHRhcmVhcyB2ZW5jaWRhc1xuICAgIHByaXZhdGUgcmVuZGVyaXphckdydXBvVGFyZWFzVmVuY2lkYXModGFyZWFzOiBUYXNrW10sIHRpcG86ICdkdWUnIHwgJ3NjaGVkdWxlZCcgfCAnc3RhcnQnKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgdGFyZWFzUG9yQXJjaGl2byA9IHRoaXMuYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9ICcnO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBbcnV0YUFyY2hpdm8sIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHRhcmVhc1BvckFyY2hpdm8pKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyBbWyR7cnV0YUFyY2hpdm99fCR7aW5mby50aXR1bG99XV1cXG5cXG5gO1xuICAgICAgICAgICAgaW5mby50YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhVmVuY2lkYSh0YXJlYSwgdGlwbyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBhdXhpbGlhciBwYXJhIHJlbmRlcml6YXIgdW5hIHRhcmVhIHZlbmNpZGFcbiAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYVZlbmNpZGEodGFyZWE6IFRhc2ssIHRpcG86ICdkdWUnIHwgJ3NjaGVkdWxlZCcgfCAnc3RhcnQnKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAtIFsgXSAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3N0cmFyIGluZm9ybWFjaVx1MDBGM24gZGUgZmVjaGFzIHJlbGV2YW50ZSBzZWdcdTAwRkFuIGVsIHRpcG9cbiAgICAgICAgc3dpdGNoICh0aXBvKSB7XG4gICAgICAgICAgICBjYXNlICdkdWUnOlxuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8hLCAnZHVlJyl9XFxuYDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSAnc2NoZWR1bGVkJzpcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCEsICdzY2hlZHVsZWQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSAnc3RhcnQnOlxuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQhLCAnc3RhcnQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlcml6YXIgaG9yYXJpb3Mgc2kgZXhpc3RlblxuICAgICAgICBpZiAodGFyZWEuaG9yYUluaWNpbyB8fCB0YXJlYS5ob3JhRmluKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMCBIb3JhcmlvOiAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyaXphciBldGlxdWV0YXNcbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEREMyXHVGRTBGIENvbnRleHRvczogJHt0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDNjQ6ICR7dGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy50b2RvaXN0Py5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENGMjogJHt0YXJlYS5ldGlxdWV0YXMudG9kb2lzdC5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLm90cmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzQ1x1REZGN1x1RkUwRiBPdHJhczogJHt0YXJlYS5ldGlxdWV0YXMub3RyYXMuam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwcmluY2lwYWwgcGFyYSBvYnRlbmVyIHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzXG4gICAgICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNEZXBlbmRpZW50ZXMoKTogUHJvbWlzZTx7XG4gICAgICAgICAgICBlamVjdXRhYmxlczogVGFza1tdLFxuICAgICAgICAgICAgYmxvcXVlYWRhczogVGFza1tdXG4gICAgICAgIH0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09IEluaWNpYW5kbyBiXHUwMEZBc3F1ZWRhIGRlIHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzID09PVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgICAgIGFzeW5jICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcbkFuYWxpemFuZG8gdGFyZWE6XCIsIHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXBlbmRlbmN5SWQ6XCIsIHRhcmVhLmRlcGVuZGVuY3lJZCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmRlcGVuZGVuY3lJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItPiBJZ25vcmFkYTogTm8gdGllbmUgZGVwZW5kZW5jaWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMudGFza1V0aWxzLnZlcmlmaWNhckVzdGFkb1RhcmVhKHRhcmVhLmRlcGVuZGVuY3lJZCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAtPiBEZXBlbmRlbmNpYSAke3RhcmVhLmRlcGVuZGVuY3lJZH0gY29tcGxldGFkYTpgLCByZXN1bHRhZG8uY29tcGxldGFkYSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0YXJlYS5pc0Jsb2NrZWQgPSAhcmVzdWx0YWRvLmNvbXBsZXRhZGE7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsYSB1YmljYWNpXHUwMEYzbiBkZSBsYSB0YXJlYSBkZXBlbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICB0YXJlYS5kZXBlbmRlbmN5TG9jYXRpb24gPSByZXN1bHRhZG8ucnV0YUFyY2hpdm87XG4gICAgICAgICAgICAgICAgICAgIHRhcmVhLmRlcGVuZGVuY3lUaXRsZSA9IHJlc3VsdGFkby50aXR1bG9BcmNoaXZvO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGVqZWN1dGFibGVzOiB0YXJlYXMuZmlsdGVyKHQgPT4gIXQuaXNCbG9ja2VkKSxcbiAgICAgICAgICAgICAgICBibG9xdWVhZGFzOiB0YXJlYXMuZmlsdGVyKHQgPT4gdC5pc0Jsb2NrZWQpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciBsYXMgdGFyZWFzIGRlcGVuZGllbnRlc1xuICAgICAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc0RlcGVuZGllbnRlcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBlamVjdXRhYmxlcywgYmxvcXVlYWRhcyB9ID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNEZXBlbmRpZW50ZXMoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZWplY3V0YWJsZXMubGVuZ3RoID09PSAwICYmIGJsb3F1ZWFkYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIGVuY29udHJhcm9uIHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhRGVwZW5kZW5jaWFzKGVqZWN1dGFibGVzLCBibG9xdWVhZGFzKTtcbiAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIGNvbiBEZXBlbmRlbmNpYXMubWRgLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7ZWplY3V0YWJsZXMubGVuZ3RoICsgYmxvcXVlYWRhcy5sZW5ndGh9IHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzYCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzRGVwZW5kaWVudGVzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGdlbmVyYXIgbGEgdmlzdGEgZGUgZGVwZW5kZW5jaWFzXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhRGVwZW5kZW5jaWFzKGVqZWN1dGFibGVzOiBUYXNrW10sIGJsb3F1ZWFkYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRhcmVhcyBjb24gRGVwZW5kZW5jaWFzXFxuXFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUYXJlYXNEZXBlbmRpZW50ZXNcIik7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzOiAke2VqZWN1dGFibGVzLmxlbmd0aCArIGJsb3F1ZWFkYXMubGVuZ3RofVxcblxcbmA7XG4gICAgXG4gICAgICAgICAgICBpZiAoZWplY3V0YWJsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIEVqZWN1dGFibGVzICgke2VqZWN1dGFibGVzLmxlbmd0aH0pXFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFzdWNjZXNzXSBFc3RhcyB0YXJlYXMgeWEgcHVlZGVuIHNlciBlamVjdXRhZGFzIHBvcnF1ZSBzdXMgZGVwZW5kZW5jaWFzIGVzdFx1MDBFMW4gY29tcGxldGFkYXNcXG5cXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb0RlcGVuZGVuY2lhcyhlamVjdXRhYmxlcywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICBpZiAoYmxvcXVlYWRhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGBcXG4jIyBUYXJlYXMgQmxvcXVlYWRhcyAoJHtibG9xdWVhZGFzLmxlbmd0aH0pXFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyF3YXJuaW5nXSBFc3RhcyB0YXJlYXMgZXN0XHUwMEUxbiBlc3BlcmFuZG8gcXVlIHNlIGNvbXBsZXRlbiBvdHJhcyB0YXJlYXNcXG5cXG5gO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb0RlcGVuZGVuY2lhcyhibG9xdWVhZGFzLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgcmVuZGVyaXphciBncnVwb3MgZGUgdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXNcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJpemFyR3J1cG9EZXBlbmRlbmNpYXModGFyZWFzOiBUYXNrW10sIGVqZWN1dGFibGVzOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc1BvckFyY2hpdm8gPSB0aGlzLmFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhcyk7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3QgW3J1dGFBcmNoaXZvLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyh0YXJlYXNQb3JBcmNoaXZvKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMjIFtbJHtydXRhQXJjaGl2b318JHtpbmZvLnRpdHVsb31dXVxcblxcbmA7XG4gICAgICAgICAgICAgICAgaW5mby50YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYUNvbkRlcGVuZGVuY2lhKHRhcmVhLCBlamVjdXRhYmxlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgcmVuZGVyaXphciB1bmEgdGFyZWEgaW5kaXZpZHVhbCBjb24gZGVwZW5kZW5jaWFcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFDb25EZXBlbmRlbmNpYSh0YXJlYTogVGFzaywgZXNFamVjdXRhYmxlOiBib29sZWFuKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFxuUmVuZGVyaXphbmRvIHRhcmVhOlwiLCB0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzIGVqZWN1dGFibGU6XCIsIGVzRWplY3V0YWJsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb3N0cmFyIElEIGRlIGxhIHRhcmVhIHNpIGV4aXN0ZVxuICAgICAgICAgICAgaWYgKHRhcmVhLnRhc2tJZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzQ1x1REQ5NCAke3RhcmVhLnRhc2tJZH1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gIFxuICAgICAgICAgICAgLy8gTW9zdHJhciBkZXRhbGxlcyBkZSBsYSBkZXBlbmRlbmNpYVxuICAgICAgICAgICAgaWYgKHRhcmVhLmRlcGVuZGVuY3lJZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjFCMyBEZXBlbmRlIGRlOiAke3RhcmVhLmRlcGVuZGVuY3lUaXRsZSA/IGBbWyR7dGFyZWEuZGVwZW5kZW5jeUxvY2F0aW9ufXwke3RhcmVhLmRlcGVuZGVuY3lUaXRsZX1dXWAgOiAnTm8gZW5jb250cmFkYSd9YDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZGVwZW5kZW5jeVRleHRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgOiBcIiR7dGFyZWEuZGVwZW5kZW5jeVRleHRvfVwiYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGVzRWplY3V0YWJsZSA/ICcgXHUyNzA1JyA6ICcgXHUyM0YzJztcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzdG8gZGVsIGNvbnRlbmlkby4uLlxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1RERDMlx1RkUwRiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURDNjQgJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc1BlcnNvbmFzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IHBlcnNvbmFzQ29uVGFyZWFzLCB0b3RhbFBlcnNvbmFzLCB0b3RhbFRhcmVhcyB9ID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNQZXJzb25hcygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0b3RhbFBlcnNvbmFzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIGVuY29udHJhcm9uIHRhcmVhcyBhc2lnbmFkYXMgYSBwZXJzb25hcy4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFQZXJzb25hcyhwZXJzb25hc0NvblRhcmVhcywgdG90YWxQZXJzb25hcywgdG90YWxUYXJlYXMpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIHBvciBQZXJzb25hLm1kYCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RvdGFsVGFyZWFzfSB0YXJlYXMgYXNpZ25hZGFzIGEgJHt0b3RhbFBlcnNvbmFzfSBwZXJzb25hc2ApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1BlcnNvbmFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhUGVyc29uYXMoXG4gICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPixcbiAgICAgICAgICAgIHRvdGFsUGVyc29uYXM6IG51bWJlcixcbiAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBudW1iZXJcbiAgICAgICAgKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgVGFyZWFzIEFzaWduYWRhcyBwb3IgUGVyc29uYVxcblxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhYmVjZXJhIHkgcmVzdW1lblxuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUYXJlYXNQZXJzb25hc1wiKTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgcGVyc29uYXMgY29uIHRhcmVhczogJHt0b3RhbFBlcnNvbmFzfVxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIGFzaWduYWRhczogJHt0b3RhbFRhcmVhc31cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3VtZW4gZGUgYXNpZ25hY2lvbmVzXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFJlc3VtZW4gZGUgQXNpZ25hY2lvbmVzXFxuYDtcbiAgICAgICAgICAgIEFycmF5LmZyb20ocGVyc29uYXNDb25UYXJlYXMuZW50cmllcygpKVxuICAgICAgICAgICAgICAgIC5zb3J0KChbLCB0YXJlYXNBXSwgWywgdGFyZWFzQl0pID0+IHRhcmVhc0IubGVuZ3RoIC0gdGFyZWFzQS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtwZXJzb25hLCB0YXJlYXNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZvcm1hdGVhZG8gPSB0aGlzLmZvcm1hdGVhck5vbWJyZVBlcnNvbmEocGVyc29uYSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgLSBbWyMke25vbWJyZUZvcm1hdGVhZG99fCR7bm9tYnJlRm9ybWF0ZWFkb31dXSAoJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMpXFxuYDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBEZXRhbGxlIGRlIHRhcmVhcyBwb3IgcGVyc29uYVxuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgcG9yIFBlcnNvbmFcXG5cXG5gO1xuICAgICAgICAgICAgQXJyYXkuZnJvbShwZXJzb25hc0NvblRhcmVhcy5lbnRyaWVzKCkpXG4gICAgICAgICAgICAgICAgLnNvcnQoKFssIHRhcmVhc0FdLCBbLCB0YXJlYXNCXSkgPT4gdGFyZWFzQi5sZW5ndGggLSB0YXJlYXNBLmxlbmd0aClcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoW3BlcnNvbmEsIHRhcmVhc10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyMgJHt0aGlzLmZvcm1hdGVhck5vbWJyZVBlcnNvbmEocGVyc29uYSl9XFxuW1sjUmVzdW1lbiBkZSBBc2lnbmFjaW9uZXN8XHUyQjA2XHVGRTBGXV1cXG5gO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3JkZW5hciB0YXJlYXMgcG9yIHBlc28geSBtb3N0cmFybGFzIGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJlYXNPcmRlbmFkYXMgPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zb3J0VGFza3ModGFyZWFzKTtcbiAgICAgICAgICAgICAgICAgICAgdGFyZWFzT3JkZW5hZGFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhUGVyc29uYSh0YXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFQZXJzb25hKHRhcmVhOiBUYXNrKTogc3RyaW5nIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAtIFsgXSAke3RhcmVhLnRleHRvfVxcbmA7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgdWJpY2FjaVx1MDBGM24gZGUgbGEgdGFyZWEgY29uIG5cdTAwRkFtZXJvIGRlIGxcdTAwRURuZWEgc2kgZXN0XHUwMEUxIGRpc3BvbmlibGVcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1RENDRCBbWyR7dGFyZWEucnV0YUFyY2hpdm99fCR7dGFyZWEudGl0dWxvfV1dYDtcbiAgICAgICAgICAgIGlmICh0YXJlYS5saW5lSW5mbz8ubnVtZXJvKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgKGxcdTAwRURuZWEgJHt0YXJlYS5saW5lSW5mby5udW1lcm99KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7IFxuICAgICAgICAgICAgLy8gRmVjaGFzXG4gICAgICAgICAgICBjb25zdCBmZWNoYXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmZWNoYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjNGMCBGZWNoYXM6XFxuICAgICAgICAke2ZlY2hhcy5qb2luKCdcXG4gICAgICAgICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gSG9yYXJpb3NcbiAgICAgICAgICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIzMUEgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAvLyBDb250ZXh0b3NcbiAgICAgICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEREMyXHVGRTBGIENvbnRleHRvczogJHt0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gUGVzbyB5IHByaW9yaWRhZFxuICAgICAgICAgICAgaWYgKHRhcmVhLndlaWdodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IHRoaXMub2J0ZW5lclByaW9yaWRhZFRhcmVhKHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpZGFkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgICR7cHJpb3JpZGFkLmVtb2ppfSBQcmlvcmlkYWQ6ICR7cHJpb3JpZGFkLm5vbWJyZX1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIGZvcm1hdGVhck5vbWJyZVBlcnNvbmEodGFnOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHRhZy5yZXBsYWNlKCcjcHgtJywgJycpXG4gICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXy9nLCAnICcpXG4gICAgICAgICAgICAgICAgICAgICAuc3BsaXQoJyAnKVxuICAgICAgICAgICAgICAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xuICAgICAgICB9XG5cbiAgICBcbiAgICAgICAgcHJpdmF0ZSBub3JtYWxpemFyQ29udGV4dG8oY29udGV4dG86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgICAgICAvLyBOb3JtYWxpemFyIHRhbnRvIGZvcm1hdG9zICNjeC1jb250ZXh0byBjb21vICNjeC9jb250ZXh0b1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHRvLnJlcGxhY2UoL1svLV0vZywgJyBcdTIxOTIgJykudHJpbSgpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzQ29udGV4dG9zKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGNvbnRleHRvc0NvblRhcmVhcywgdG90YWxDb250ZXh0b3MsIHRvdGFsVGFyZWFzIH0gPSBhd2FpdCB0aGlzLmdldFRhcmVhc0NvbnRleHRvcygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0b3RhbENvbnRleHRvcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgY29uIGNvbnRleHRvcyBhc2lnbmFkb3MuJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb250ZXh0b3MoY29udGV4dG9zQ29uVGFyZWFzLCB0b3RhbENvbnRleHRvcywgdG90YWxUYXJlYXMpO1xuICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgcG9yIENvbnRleHRvLm1kYCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RvdGFsVGFyZWFzfSB0YXJlYXMgZW4gJHt0b3RhbENvbnRleHRvc30gY29udGV4dG9zYCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzQ29udGV4dG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwcml2YXRlIGdlbmVyYXJWaXN0YUNvbnRleHRvcyhcbiAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPixcbiAgICAgICAgICAgIHRvdGFsQ29udGV4dG9zOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbFRhcmVhczogbnVtYmVyXG4gICAgICAgICk6IHN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRhcmVhcyBwb3IgQ29udGV4dG9cXG5cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWJlY2VyYSB5IHJlc3VtZW5cbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24oXCJtb3N0cmFyVGFyZWFzQ29udGV4dG9zXCIpO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSBjb250ZXh0b3MgY29uIHRhcmVhczogJHt0b3RhbENvbnRleHRvc31cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBlbmNvbnRyYWRhczogJHt0b3RhbFRhcmVhc31cXG5cXG5gO1xuICAgIFxuICAgICAgICAgICAgLy8gQ29uc3RydWlyIFx1MDBFMXJib2wgZGUgY29udGV4dG9zXG4gICAgICAgICAgICBjb25zdCBhcmJvbENvbnRleHRvcyA9IHRoaXMuY29uc3RydWlyQXJib2xDb250ZXh0b3MoY29udGV4dG9zQ29uVGFyZWFzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzdW1lbiBkZSBjb250ZXh0b3NcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgUmVzdW1lbiBkZSBDb250ZXh0b3NcXG5gO1xuICAgICAgICAgICAgdGhpcy5nZW5lcmFyUmVzdW1lbkNvbnRleHRvcyhhcmJvbENvbnRleHRvcywgMCkuZm9yRWFjaChsaW5lYSA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGxpbmVhICsgJ1xcbic7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICBcbiAgICAgICAgICAgIC8vIERldGFsbGUgZGUgdGFyZWFzIHBvciBjb250ZXh0b1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBUYXJlYXMgcG9yIENvbnRleHRvXFxuXFxuYDtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhckRldGFsbGVDb250ZXh0b3MoYXJib2xDb250ZXh0b3MsIGNvbnRleHRvc0NvblRhcmVhcykuZm9yRWFjaChibG9xdWUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBibG9xdWU7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHJpdmF0ZSBjb25zdHJ1aXJBcmJvbENvbnRleHRvcyhjb250ZXh0b3NDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT4pOiBNYXA8c3RyaW5nLCBhbnk+IHtcbiAgICAgICAgICAgIGNvbnN0IGFyYm9sID0gbmV3IE1hcDxzdHJpbmcsIGFueT4oKTtcbiAgICBcbiAgICAgICAgICAgIEFycmF5LmZyb20oY29udGV4dG9zQ29uVGFyZWFzLmtleXMoKSkuZm9yRWFjaChjb250ZXh0byA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbml2ZWxlcyA9IGNvbnRleHRvLnNwbGl0KCcgXHUyMTkyICcpO1xuICAgICAgICAgICAgICAgIGxldCBub2RvQWN0dWFsID0gYXJib2w7XG4gICAgXG4gICAgICAgICAgICAgICAgbml2ZWxlcy5mb3JFYWNoKChuaXZlbCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RvQWN0dWFsLmhhcyhuaXZlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZG9BY3R1YWwuc2V0KG5pdmVsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWFzOiBpbmRleCA9PT0gbml2ZWxlcy5sZW5ndGggLSAxID8gY29udGV4dG9zQ29uVGFyZWFzLmdldChjb250ZXh0bykgOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJjb250ZXh0b3M6IG5ldyBNYXAoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydXRhQ29tcGxldGE6IG5pdmVsZXMuc2xpY2UoMCwgaW5kZXggKyAxKS5qb2luKCcgXHUyMTkyICcpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBub2RvQWN0dWFsID0gbm9kb0FjdHVhbC5nZXQobml2ZWwpLnN1YmNvbnRleHRvcztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGFyYm9sO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhclJlc3VtZW5Db250ZXh0b3MoYXJib2w6IE1hcDxzdHJpbmcsIGFueT4sIG5pdmVsOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFyYm9sLmZvckVhY2goKG5vZG8sIGNvbnRleHRvKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZW50YWNpb24gPSAnICAnLnJlcGVhdChuaXZlbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcnV0YUNvbnRleHRvID0gbm9kby5ydXRhQ29tcGxldGE7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FudGlkYWRUYXJlYXMgPSBub2RvLnRhcmVhcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNhbnRpZGFkVGFyZWFzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lYXMucHVzaChgJHtpbmRlbnRhY2lvbn0tIFtbIyR7cnV0YUNvbnRleHRvfXwke2NvbnRleHRvfV1dICgke2NhbnRpZGFkVGFyZWFzfSB0YXJlYXMpYCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZWFzLnB1c2goYCR7aW5kZW50YWNpb259LSAke2NvbnRleHRvfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBQcm9jZXNhciBzdWJjb250ZXh0b3NcbiAgICAgICAgICAgICAgICBpZiAobm9kby5zdWJjb250ZXh0b3Muc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZWFzLnB1c2goLi4udGhpcy5nZW5lcmFyUmVzdW1lbkNvbnRleHRvcyhub2RvLnN1YmNvbnRleHRvcywgbml2ZWwgKyAxKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gbGluZWFzO1xuICAgICAgICB9XG4gICAgXG5cbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyQmxvcXVlQ29udGV4dG8oY29udGV4dG86IHN0cmluZywgdGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGJsb3F1ZSA9IGAjIyMgJHtjb250ZXh0b31cXG5bWyNSZXN1bWVuIGRlIENvbnRleHRvc3xcdTJCMDZcdUZFMEZdXVxcbmA7XG4gICAgXG4gICAgICAgICAgICAvLyBVc2FyIGRpcmVjdGFtZW50ZSBsYXMgdGFyZWFzIG9yZGVuYWRhcyBwb3IgZWwgVGFza1dlaWdodENhbGN1bGF0b3JcbiAgICAgICAgICAgIHRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICBibG9xdWUgKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFDb250ZXh0byh0YXJlYSk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBibG9xdWUgKyAnXFxuJztcbiAgICAgICAgfVxuICAgIFxuXG4gICAgICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNQZXJzb25hcygpOiBQcm9taXNlPHtcbiAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+LFxuICAgICAgICAgICAgdG90YWxQZXJzb25hczogbnVtYmVyLFxuICAgICAgICAgICAgdG90YWxUYXJlYXM6IG51bWJlclxuICAgICAgICB9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcbj09PSBJTklDSUFORE8gQlx1MDBEQVNRVUVEQSBERSBUQVJFQVMgQVNJR05BREFTIEEgUEVSU09OQVMgPT09XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwZXJzb25hc0NvblRhcmVhcyA9IG5ldyBNYXA8c3RyaW5nLCBUYXNrW10+KCk7XG4gICAgICAgICAgICBjb25zdCBsaW5lYXNQb3JBcmNoaXZvID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIExpbmVJbmZvPj4oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgICAgIGFzeW5jICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcyB8fCB0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhcyBzb2xvIGN1YW5kbyBzZWEgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluZWFzUG9yQXJjaGl2by5oYXModGFyZWEucnV0YUFyY2hpdm8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lYXNQb3JBcmNoaXZvLnNldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5ydXRhQXJjaGl2byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRhc2tVdGlscy5lbmNvbnRyYXJMaW5lYXNUYXJlYShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0YXJlYS5ydXRhQXJjaGl2bykgYXMgVEZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBZ3JlZ2FyIGluZm9ybWFjaVx1MDBGM24gZGUgbFx1MDBFRG5lYSBhIGxhIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhc0FyY2hpdm8gPSBsaW5lYXNQb3JBcmNoaXZvLmdldCh0YXJlYS5ydXRhQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lYXNBcmNoaXZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lSW5mbyA9IGxpbmVhc0FyY2hpdm8uZ2V0KHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaW5lSW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmxpbmVJbmZvID0gbGluZUluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25hVGFnID0gYCNweC0ke3RhZ31gO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwZXJzb25hc0NvblRhcmVhcy5oYXMocGVyc29uYVRhZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhcy5zZXQocGVyc29uYVRhZywgW10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXMuZ2V0KHBlcnNvbmFUYWcpIS5wdXNoKHRhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgLy8gT3JkZW5hciBsYXMgdGFyZWFzIGRlIGNhZGEgcGVyc29uYVxuICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXMuZm9yRWFjaCgodGFyZWFzLCBwZXJzb25hKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZWFzT3JkZW5hZGFzID0gVGFza1dlaWdodENhbGN1bGF0b3Iuc29ydFRhc2tzKHRhcmVhcyk7XG4gICAgICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXMuc2V0KHBlcnNvbmEsIHRhcmVhc09yZGVuYWRhcyk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXMsXG4gICAgICAgICAgICAgICAgdG90YWxQZXJzb25hczogcGVyc29uYXNDb25UYXJlYXMuc2l6ZSxcbiAgICAgICAgICAgICAgICB0b3RhbFRhcmVhczogQXJyYXkuZnJvbShwZXJzb25hc0NvblRhcmVhcy52YWx1ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCB0YXJlYXMpID0+IHN1bSArIHRhcmVhcy5sZW5ndGgsIDApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGFzeW5jIGdldFRhcmVhc0NvbnRleHRvcygpOiBQcm9taXNlPHtcbiAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPixcbiAgICAgICAgICAgIHRvdGFsQ29udGV4dG9zOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbFRhcmVhczogbnVtYmVyXG4gICAgICAgIH0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFxuPT09IElOSUNJQU5ETyBCXHUwMERBU1FVRURBIERFIFRBUkVBUyBQT1IgQ09OVEVYVE8gPT09XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0b3NDb25UYXJlYXMgPSBuZXcgTWFwPHN0cmluZywgVGFza1tdPigpO1xuICAgICAgICAgICAgY29uc3QgbGluZWFzUG9yQXJjaGl2byA9IG5ldyBNYXA8c3RyaW5nLCBNYXA8c3RyaW5nLCBMaW5lSW5mbz4+KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICAgICBhc3luYyAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG5BbmFsaXphbmRvIHRhcmVhOlwiLCB0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcyB8fCB0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIGluZm9ybWFjaVx1MDBGM24gZGUgbFx1MDBFRG5lYXMgbWFudGVuaWVuZG8gbGEgbFx1MDBGM2dpY2EgZXhpc3RlbnRlXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluZWFzUG9yQXJjaGl2by5oYXModGFyZWEucnV0YUFyY2hpdm8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lYXNQb3JBcmNoaXZvLnNldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5ydXRhQXJjaGl2byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRhc2tVdGlscy5lbmNvbnRyYXJMaW5lYXNUYXJlYShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0YXJlYS5ydXRhQXJjaGl2bykgYXMgVEZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXNBcmNoaXZvID0gbGluZWFzUG9yQXJjaGl2by5nZXQodGFyZWEucnV0YUFyY2hpdm8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZWFzQXJjaGl2bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUluZm8gPSBsaW5lYXNBcmNoaXZvLmdldCh0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5saW5lSW5mbyA9IGxpbmVJbmZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYW50ZW5lciBsYSBsXHUwMEYzZ2ljYSBleGlzdGVudGUgZGUgcHJvY2VzYW1pZW50byBkZSBjb250ZXh0b3NcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5mb3JFYWNoKGNvbnRleHRvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRvTm9ybWFsaXphZG8gPSB0aGlzLm5vcm1hbGl6YXJDb250ZXh0byhjb250ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHRvc0NvblRhcmVhcy5oYXMoY29udGV4dG9Ob3JtYWxpemFkbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXMuc2V0KGNvbnRleHRvTm9ybWFsaXphZG8sIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhcy5nZXQoY29udGV4dG9Ob3JtYWxpemFkbykhLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgXG4gICAgICAgICAgICAvLyBNYW50ZW5lciBsYSBvcmdhbml6YWNpXHUwMEYzbiB5IHBlc28gZXhpc3RlbnRlc1xuICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzLmZvckVhY2goKHRhcmVhcywgY29udGV4dG8pID0+IHtcbiAgICAgICAgICAgICAgICAvLyBVc2FyIGVsIHNpc3RlbWEgZGUgcGVzb3MgZXhpc3RlbnRlXG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZWFzT3JkZW5hZGFzID0gVGFza1dlaWdodENhbGN1bGF0b3Iuc29ydFRhc2tzKHRhcmVhcyk7XG4gICAgICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzLnNldChjb250ZXh0bywgdGFyZWFzT3JkZW5hZGFzKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXMsXG4gICAgICAgICAgICAgICAgdG90YWxDb250ZXh0b3M6IGNvbnRleHRvc0NvblRhcmVhcy5zaXplLFxuICAgICAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBBcnJheS5mcm9tKGNvbnRleHRvc0NvblRhcmVhcy52YWx1ZXMoKSlcbiAgICAgICAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCB0YXJlYXMpID0+IHN1bSArIHRhcmVhcy5sZW5ndGgsIDApXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhckRldGFsbGVDb250ZXh0b3MoXG4gICAgICAgICAgICBhcmJvbDogTWFwPHN0cmluZywgYW55PiwgXG4gICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT5cbiAgICAgICAgKTogc3RyaW5nW10ge1xuICAgICAgICAgICAgY29uc3QgYmxvcXVlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwcm9jZXNhck5vZG8gPSAobm9kbzogTWFwPHN0cmluZywgYW55PiwgcnV0YUFjdHVhbDogc3RyaW5nW10gPSBbXSkgPT4ge1xuICAgICAgICAgICAgICAgIG5vZG8uZm9yRWFjaCgoaW5mbywgY29udGV4dG8pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcnV0YUNvbXBsZXRhID0gaW5mby5ydXRhQ29tcGxldGE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mby50YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxhcyB0YXJlYXMgZXN0XHUwMEU5biBvcmRlbmFkYXMgcG9yIGVsIHNpc3RlbWEgZGUgcGVzb3NcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc09yZGVuYWRhcyA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNvcnRUYXNrcyhpbmZvLnRhcmVhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBibG9xdWVzLnB1c2godGhpcy5nZW5lcmFyQmxvcXVlQ29udGV4dG8ocnV0YUNvbXBsZXRhLCB0YXJlYXNPcmRlbmFkYXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8uc3ViY29udGV4dG9zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNhck5vZG8oaW5mby5zdWJjb250ZXh0b3MsIFsuLi5ydXRhQWN0dWFsLCBjb250ZXh0b10pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgICAgIHByb2Nlc2FyTm9kbyhhcmJvbCk7XG4gICAgICAgICAgICByZXR1cm4gYmxvcXVlcztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwcml2YXRlIHJlbmRlcml6YXJUYXJlYUNvbnRleHRvKHRhcmVhOiBUYXNrKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciB1YmljYWNpXHUwMEYzbiBjb24gblx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYVxuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEQ0NEIFtbJHt0YXJlYS5ydXRhQXJjaGl2b318JHt0YXJlYS50aXR1bG99XV1gO1xuICAgICAgICAgICAgaWYgKHRhcmVhLmxpbmVJbmZvPy5udW1lcm8pIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAobFx1MDBFRG5lYSAke3RhcmVhLmxpbmVJbmZvLm51bWVyb30pYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICBcbiAgICAgICAgICAgIC8vIE1vc3RyYXIgZWwgcGVzbyB5IHByaW9yaWRhZCBwcmltZXJvIChtYW50ZW5pZW5kbyBlbCBzaXN0ZW1hIGV4aXN0ZW50ZSlcbiAgICAgICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IHRoaXMub2J0ZW5lclByaW9yaWRhZFRhcmVhKHRhcmVhLnRleHRvKTtcbiAgICAgICAgICAgIGlmIChwcmlvcmlkYWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAke3ByaW9yaWRhZC5lbW9qaX0gUHJpb3JpZGFkOiAke3ByaW9yaWRhZC5ub21icmV9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS53ZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGJhc2VXZWlnaHQsIHRpbWVXZWlnaHQsIHByaW9yaXR5V2VpZ2h0IH0gPSB0YXJlYS53ZWlnaHQ7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2VXZWlnaHQgKyB0aW1lV2VpZ2h0ICsgcHJpb3JpdHlXZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjY5Nlx1RkUwRiBQZXNvIHRvdGFsOiAke3RhcmVhLndlaWdodC50b3RhbFdlaWdodH1cXG5gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmVjaGFzIChtYW50ZW5pZW5kbyBlbCBmb3JtYXRvIGV4aXN0ZW50ZSlcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8pIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZlY2hhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyM0YwIEZlY2hhczpcXG4gICAgICAgICR7ZmVjaGFzLmpvaW4oJ1xcbiAgICAgICAgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIEhvcmFyaW9zXG4gICAgICAgICAgICBpZiAodGFyZWEuaG9yYUluaWNpbyB8fCB0YXJlYS5ob3JhRmluKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyMzFBIEhvcmFyaW86ICR7dGFyZWEuaG9yYUluaWNpbyB8fCAnLS06LS0nfSAtICR7dGFyZWEuaG9yYUZpbiB8fCAnLS06LS0nfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBQZXJzb25hcyBhc2lnbmFkYXNcbiAgICAgICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURDNjQgQXNpZ25hZG8gYTogJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMubWFwKHAgPT4gXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybWF0ZWFyTm9tYnJlUGVyc29uYShgI3B4LSR7cH1gKVxuICAgICAgICAgICAgICAgICkuam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIC8vIERlcGVuZGVuY2lhc1xuICAgICAgICAgICAgaWYgKHRhcmVhLmRlcGVuZGVuY3lJZCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjFCMyBEZXBlbmRlIGRlOiBgO1xuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5kZXBlbmRlbmN5VGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGBbWyR7dGFyZWEuZGVwZW5kZW5jeUxvY2F0aW9ufXwke3RhcmVhLmRlcGVuZGVuY3lUaXRsZX1dXWA7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJlYS5kZXBlbmRlbmN5VGV4dG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgOiBcIiR7dGFyZWEuZGVwZW5kZW5jeVRleHRvfVwiYDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGFyZWEuaXNCbG9ja2VkID8gJyBcdTIzRjMnIDogJyBcdTI3MDUnO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vIC0tIENvbnRleHRvcyBHVERcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RlIG1cdTAwRTl0b2RvIGEgbGEgY2xhc2UgVGFyZWFzQVBJIGVuIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUEkudHNcblxuXG4vLyBNXHUwMEU5dG9kbyBwYXJhIHZlcmlmaWNhciBzaSB1biBub2RvIG8gc3VzIGRlc2NlbmRpZW50ZXMgdGllbmVuIHRhcmVhc1xucHJpdmF0ZSB0aWVuZUFsZ3VuYVRhcmVhKG5vZG86IE1hcDxzdHJpbmcsIGFueT4pOiBib29sZWFuIHtcbiAgICBmb3IgKGNvbnN0IFtfLCBpbmZvXSBvZiBub2RvLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAoaW5mby50YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChpbmZvLnN1YmNvbnRleHRvcy5zaXplID4gMCAmJiB0aGlzLnRpZW5lQWxndW5hVGFyZWEoaW5mby5zdWJjb250ZXh0b3MpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIE1cdTAwRTl0b2RvIHBhcmEgZ2VuZXJhciBlbCByZXN1bWVuIGRlIGNvbnRleHRvcyBjb24gaW5kZW50YWNpXHUwMEYzblxucHJpdmF0ZSBnZW5lcmFyUmVzdW1lbkNvbnRleHRvc01hcmtkb3duKGFyYm9sOiBNYXA8c3RyaW5nLCBhbnk+LCBuaXZlbDogbnVtYmVyLCByZXN1bHRhZG86IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IHJlcyA9IHJlc3VsdGFkbztcbiAgICBcbiAgICAvLyBPcmRlbmFyIGNvbnRleHRvcyBwb3IgY2FudGlkYWQgZGUgdGFyZWFzXG4gICAgY29uc3Qgc29ydGVkS2V5cyA9IEFycmF5LmZyb20oYXJib2wua2V5cygpKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IHRhcmVhc0EgPSBhcmJvbC5nZXQoYSkudGFyZWFzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdGFyZWFzQiA9IGFyYm9sLmdldChiKS50YXJlYXMubGVuZ3RoO1xuICAgICAgICByZXR1cm4gdGFyZWFzQiAtIHRhcmVhc0E7XG4gICAgfSk7XG4gICAgXG4gICAgZm9yIChjb25zdCBjb250ZXh0byBvZiBzb3J0ZWRLZXlzKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBhcmJvbC5nZXQoY29udGV4dG8pO1xuICAgICAgICBjb25zdCBjYW50aWRhZFRhcmVhcyA9IGluZm8udGFyZWFzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcnV0YUNvbXBsZXRhID0gaW5mby5ydXRhQ29tcGxldGE7XG4gICAgICAgIFxuICAgICAgICAvLyBJbmRlbnRhY2lcdTAwRjNuIGNvbiBlc3BhY2lvc1xuICAgICAgICBjb25zdCBpbmRlbnRhY2lvbiA9IFwiICAgIFwiLnJlcGVhdChuaXZlbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGb3JtYXRvIGRlIGVsZW1lbnRvIGRlIGxpc3RhXG4gICAgICAgIGlmIChjYW50aWRhZFRhcmVhcyA+IDApIHtcbiAgICAgICAgICAgIC8vIENyZWFyIGlkZW50aWZpY2Fkb3IgZGUgZW5jYWJlemFkbyB1c2FuZG8gbGEgcnV0YSBjb21wbGV0YVxuICAgICAgICAgICAgY29uc3QgaGVhZGVySWQgPSB0aGlzLmNyZWFySGVhZGVySWQocnV0YUNvbXBsZXRhIHx8IGNvbnRleHRvKTtcbiAgICAgICAgICAgIHJlcyArPSBgJHtpbmRlbnRhY2lvbn0tIFtbIyR7aGVhZGVySWR9fCR7dGhpcy5mb3JtYXRlYXJOb21icmVDb250ZXh0byhjb250ZXh0byl9XV0gKCR7Y2FudGlkYWRUYXJlYXN9IHRhcmVhcylcXG5gO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudGllbmVBbGd1bmFUYXJlYShpbmZvLnN1YmNvbnRleHRvcykpIHtcbiAgICAgICAgICAgIHJlcyArPSBgJHtpbmRlbnRhY2lvbn0tICoqJHt0aGlzLmZvcm1hdGVhck5vbWJyZUNvbnRleHRvKGNvbnRleHRvKX0qKlxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc2FyIHN1YmNvbnRleHRvcyBzaSB0aWVuZW4gdGFyZWFzXG4gICAgICAgIGlmIChpbmZvLnN1YmNvbnRleHRvcy5zaXplID4gMCkge1xuICAgICAgICAgICAgcmVzID0gdGhpcy5nZW5lcmFyUmVzdW1lbkNvbnRleHRvc01hcmtkb3duKGluZm8uc3ViY29udGV4dG9zLCBuaXZlbCArIDEsIHJlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlcztcbn1cblxuXG4vLyBNXHUwMEU5dG9kbyBwYXJhIGZvcm1hdGVhciBlbCBub21icmUgZGVsIGNvbnRleHRvIGRlIG1hbmVyYSBtXHUwMEUxcyBsZWdpYmxlXG5wcml2YXRlIGZvcm1hdGVhck5vbWJyZUNvbnRleHRvKGNvbnRleHRvOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNpIGVzIHVuIGNvbnRleHRvIGNvbiBqZXJhcnF1XHUwMEVEYSAodGllbmUgXHUyMTkyKSwgb2J0ZW5lciBzb2xvIGxhIFx1MDBGQWx0aW1hIHBhcnRlXG4gICAgaWYgKGNvbnRleHRvLmluY2x1ZGVzKCcgXHUyMTkyICcpKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0by5zcGxpdCgnIFx1MjE5MiAnKS5wb3AoKSB8fCBjb250ZXh0bztcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRleHRvO1xufVxuXG5cblxuLy8gLS0tLS0tLS0tLSBUYWVhcyBodWVyZmFuYXNcblxuLy8gTVx1MDBFOXRvZG8gcGFyYSBUYXJlYXNBUEkgcXVlIGJ1c2NhIHRhcmVhcyBzaW4gY29udGV4dG9zLCBwZXJzb25hcywgZmVjaGFzIG8gY2xhc2lmaWNhY2lcdTAwRjNuIEdURFxuXG4vKipcbiAqIE9idGllbmUgdG9kYXMgbGFzIHRhcmVhcyBxdWUgbm8gdGllbmVuIGFzaWduYWRvIGNvbnRleHRvLCBwZXJzb25hLCBmZWNoYXMgbyBjbGFzaWZpY2FjaVx1MDBGM24gR1REXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBPYmpldG8gY29uIHRhcmVhcyBhZ3J1cGFkYXMgcG9yIG5vdGEgeSBjb250YWRvcmVzXG4gKi9cbnB1YmxpYyBhc3luYyBnZXRUYXJlYXNTaW5DbGFzaWZpY2FyKCk6IFByb21pc2U8e1xuICAgIHRhcmVhc1Bvck5vdGE6IE1hcDxzdHJpbmcsIHtcbiAgICAgICAgdGl0dWxvOiBzdHJpbmcsXG4gICAgICAgIHJ1dGE6IHN0cmluZyxcbiAgICAgICAgdGFyZWFzOiBUYXNrW11cbiAgICB9PixcbiAgICB0b3RhbFRhcmVhczogbnVtYmVyLFxuICAgIHRvdGFsTm90YXM6IG51bWJlclxufT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFxuPT09IElOSUNJQU5ETyBCXHUwMERBU1FVRURBIERFIFRBUkVBUyBTSU4gQ0xBU0lGSUNBUiA9PT1cIik7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXBhIHBhcmEgYWdydXBhciB0YXJlYXMgcG9yIGFyY2hpdm9cbiAgICAgICAgY29uc3QgdGFyZWFzUG9yTm90YSA9IG5ldyBNYXA8c3RyaW5nLCB7XG4gICAgICAgICAgICB0aXR1bG86IHN0cmluZyxcbiAgICAgICAgICAgIHJ1dGE6IHN0cmluZyxcbiAgICAgICAgICAgIHRhcmVhczogVGFza1tdXG4gICAgICAgIH0+KCk7XG5cbiAgICAgICAgLy8gTWFwYSBwYXJhIGd1YXJkYXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhcyBwb3IgYXJjaGl2byAob3B0aW1pemFjaVx1MDBGM24pXG4gICAgICAgIGNvbnN0IGxpbmVhc1BvckFyY2hpdm8gPSBuZXcgTWFwPHN0cmluZywgTWFwPHN0cmluZywgTGluZUluZm8+PigpO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciB0b2RhcyBsYXMgdGFyZWFzIHNpbiBmaWx0cm8gaW5pY2lhbFxuICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgIGFzeW5jICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBxdWUgbGEgdGFyZWEgbm8gdGVuZ2E6XG4gICAgICAgICAgICAgICAgLy8gMS4gQ29udGV4dG9zICgjY3gtKVxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbkNvbnRleHRvcyA9ICF0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zIHx8IHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3MubGVuZ3RoID09PSAwO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDIuIFBlcnNvbmFzIGFzaWduYWRhcyAoI3B4LSlcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5QZXJzb25hcyA9ICF0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMgfHwgdGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyAzLiBGZWNoYXMgKER1ZSwgU3RhcnQsIFNjaGVkdWxlZClcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5GZWNoYXMgPSAhdGFyZWEuZmVjaGFWZW5jaW1pZW50byAmJiAhdGFyZWEuZmVjaGFTdGFydCAmJiAhdGFyZWEuZmVjaGFTY2hlZHVsZWQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gNC4gQ2xhc2lmaWNhY2lcdTAwRjNuIEdURCAoI0dURC0pXG4gICAgICAgICAgICAgICAgY29uc3Qgc2luR1REID0gIXRhcmVhLmV0aXF1ZXRhcy50b2Rhcy5zb21lKHRhZyA9PiB0YWcuc3RhcnRzV2l0aCgnI0dURC0nKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gNS4gTm8gZXN0XHUwMEUxIGNsYXNpZmljYWRhIHBhcmEgaW5ib3ggKCNpbmJveClcbiAgICAgICAgICAgICAgICBjb25zdCBub0luYm94ID0gIXRhcmVhLmV0aXF1ZXRhcy50b2Rhcy5zb21lKHRhZyA9PiB0YWcudG9Mb3dlckNhc2UoKSA9PT0gJyNpbmJveCcpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbXByb2JhciBzaSBjdW1wbGUgdG9kb3MgbG9zIGNyaXRlcmlvcyAoc2luIGNsYXNpZmljYWNpb25lcylcbiAgICAgICAgICAgICAgICBjb25zdCBzaW5DbGFzaWZpY2FyID0gc2luQ29udGV4dG9zICYmIHNpblBlcnNvbmFzICYmIHNpbkZlY2hhcyAmJiBzaW5HVEQgJiYgbm9JbmJveDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBsYSB0YXJlYSBjdW1wbGUgbG9zIGNyaXRlcmlvcywgYWdyZWdhciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgICBpZiAoc2luQ2xhc2lmaWNhcikge1xuICAgICAgICAgICAgICAgICAgICAvLyBPcHRpbWl6YWNpXHUwMEYzbjogb2J0ZW5lciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWFzIHNvbG8gY3VhbmRvIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lYXNQb3JBcmNoaXZvLmhhcyh0YXJlYS5ydXRhQXJjaGl2bykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJjaGl2byA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGFyZWEucnV0YUFyY2hpdm8pIGFzIFRGaWxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmNoaXZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVhc1BvckFyY2hpdm8uc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnRhc2tVdGlscy5lbmNvbnRyYXJMaW5lYXNUYXJlYShhcmNoaXZvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgYnVzY2FyIGxcdTAwRURuZWFzIGVuICR7dGFyZWEucnV0YUFyY2hpdm99OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWdyZWdhciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWEgYSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXNBcmNoaXZvID0gbGluZWFzUG9yQXJjaGl2by5nZXQodGFyZWEucnV0YUFyY2hpdm8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZWFzQXJjaGl2bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUluZm8gPSBsaW5lYXNBcmNoaXZvLmdldCh0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5saW5lSW5mbyA9IGxpbmVJbmZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBZ3J1cGFyIHBvciBhcmNoaXZvXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZWFzUG9yTm90YS5oYXModGFyZWEucnV0YUFyY2hpdm8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYXNQb3JOb3RhLnNldCh0YXJlYS5ydXRhQXJjaGl2bywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbzogdGFyZWEudGl0dWxvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1dGE6IHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhczogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0YXJlYXNQb3JOb3RhLmdldCh0YXJlYS5ydXRhQXJjaGl2bykudGFyZWFzLnB1c2godGFyZWEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gc2luQ2xhc2lmaWNhcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRhciB0b3RhbGVzXG4gICAgICAgIGNvbnN0IHRvdGFsVGFyZWFzID0gdGFyZWFzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG90YWxOb3RhcyA9IHRhcmVhc1Bvck5vdGEuc2l6ZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGA9PT0gQlx1MDBEQVNRVUVEQSBDT01QTEVUQURBID09PWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgVG90YWwgZGUgdGFyZWFzIHNpbiBjbGFzaWZpY2FyOiAke3RvdGFsVGFyZWFzfWApO1xuICAgICAgICBjb25zb2xlLmxvZyhgVG90YWwgZGUgbm90YXMgY29uIHRhcmVhcyBzaW4gY2xhc2lmaWNhcjogJHt0b3RhbE5vdGFzfWApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhcmVhc1Bvck5vdGEsXG4gICAgICAgICAgICB0b3RhbFRhcmVhcyxcbiAgICAgICAgICAgIHRvdGFsTm90YXNcbiAgICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gZ2V0VGFyZWFzU2luQ2xhc2lmaWNhcjpcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8qKlxuICogTXVlc3RyYSB1bmEgdmlzdGEgY29uIHRvZGFzIGxhcyB0YXJlYXMgc2luIGNsYXNpZmljYXIgYWdydXBhZGFzIHBvciBub3RhXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAqL1xucHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIE9idGVuZXIgdGFyZWFzIHNpbiBjbGFzaWZpY2FyXG4gICAgICAgIGNvbnN0IHsgdGFyZWFzUG9yTm90YSwgdG90YWxUYXJlYXMsIHRvdGFsTm90YXMgfSA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzU2luQ2xhc2lmaWNhcigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRvdGFsVGFyZWFzID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgc2luIGNsYXNpZmljYXIuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdlbmVyYXIgY29udGVuaWRvIGRlbCBhcmNoaXZvXG4gICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhVGFyZWFzU2luQ2xhc2lmaWNhcih0YXJlYXNQb3JOb3RhLCB0b3RhbFRhcmVhcywgdG90YWxOb3Rhcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBHdWFyZGFyIHkgYWJyaXIgYXJjaGl2b1xuICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBTaW4gQ2xhc2lmaWNhci5tZGAsXG4gICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dG90YWxUYXJlYXN9IHRhcmVhcyBzaW4gY2xhc2lmaWNhciBlbiAke3RvdGFsTm90YXN9IG5vdGFzYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyOlwiLCBlcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEdlbmVyYSBlbCBjb250ZW5pZG8gZGUgbGEgdmlzdGEgZGUgdGFyZWFzIHNpbiBjbGFzaWZpY2FyXG4gKiBAcGFyYW0ge01hcH0gdGFyZWFzUG9yTm90YSAtIE1hcGEgY29uIGxhcyB0YXJlYXMgYWdydXBhZGFzIHBvciBub3RhXG4gKiBAcGFyYW0ge251bWJlcn0gdG90YWxUYXJlYXMgLSBUb3RhbCBkZSB0YXJlYXMgc2luIGNsYXNpZmljYXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3RhbE5vdGFzIC0gVG90YWwgZGUgbm90YXMgY29uIHRhcmVhcyBzaW4gY2xhc2lmaWNhclxuICogQHJldHVybnMge3N0cmluZ30gLSBDb250ZW5pZG8gbWFya2Rvd24gcGFyYSBlbCBhcmNoaXZvXG4gKi9cbnByaXZhdGUgZ2VuZXJhclZpc3RhVGFyZWFzU2luQ2xhc2lmaWNhcihcbiAgICB0YXJlYXNQb3JOb3RhOiBNYXA8c3RyaW5nLCB7XG4gICAgICAgIHRpdHVsbzogc3RyaW5nLFxuICAgICAgICBydXRhOiBzdHJpbmcsXG4gICAgICAgIHRhcmVhczogVGFza1tdXG4gICAgfT4sXG4gICAgdG90YWxUYXJlYXM6IG51bWJlcixcbiAgICB0b3RhbE5vdGFzOiBudW1iZXJcbik6IHN0cmluZyB7XG4gICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICBsZXQgY29udGVuaWRvID0gYCMgVGFyZWFzIFNpbiBDbGFzaWZpY2FyXFxuXFxuYDtcbiAgICBcbiAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgYWN0dWFsaXphY2lcdTAwRjNuXG4gICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyXCIpO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGluZm9ybWFjaVx1MDBGM24gZ2VuZXJhbFxuICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBzaW4gY2xhc2lmaWNhcjogJHt0b3RhbFRhcmVhc31cXG5gO1xuICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSBub3RhcyBjb24gdGFyZWFzIHNpbiBjbGFzaWZpY2FyOiAke3RvdGFsTm90YXN9XFxuXFxuYDtcbiAgICBcbiAgICAvLyBPcmRlbmFyIG5vdGFzIHBvciBjYW50aWRhZCBkZSB0YXJlYXMgKGRlc2NlbmRlbnRlKVxuICAgIGNvbnN0IG5vdGFzT3JkZW5hZGFzID0gQXJyYXkuZnJvbSh0YXJlYXNQb3JOb3RhLnZhbHVlcygpKVxuICAgICAgICAuc29ydCgoYSwgYikgPT4gYi50YXJlYXMubGVuZ3RoIC0gYS50YXJlYXMubGVuZ3RoKTtcbiAgICBcbiAgICAvLyBHZW5lcmFyIHNlY2Npb25lcyBwb3Igbm90YVxuICAgIGZvciAoY29uc3Qgbm90YUluZm8gb2Ygbm90YXNPcmRlbmFkYXMpIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAjIyBbWyR7bm90YUluZm8ucnV0YX18JHtub3RhSW5mby50aXR1bG99XV0gKCR7bm90YUluZm8udGFyZWFzLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSB0YXJlYVxuICAgICAgICBmb3IgKGNvbnN0IHRhcmVhIG9mIG5vdGFJbmZvLnRhcmVhcykge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhU2luQ2xhc2lmaWNhcih0YXJlYSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGNvbnRlbmlkbztcbn1cblxuLyoqXG4gKiBSZW5kZXJpemEgdW5hIHRhcmVhIHNpbiBjbGFzaWZpY2FyIGVuIGZvcm1hdG8gbWFya2Rvd25cbiAqIEBwYXJhbSB7VGFza30gdGFyZWEgLSBUYXJlYSBhIHJlbmRlcml6YXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gUmVwcmVzZW50YWNpXHUwMEYzbiBtYXJrZG93biBkZSBsYSB0YXJlYVxuICovXG5wcml2YXRlIHJlbmRlcml6YXJUYXJlYVNpbkNsYXNpZmljYXIodGFyZWE6IFRhc2spOiBzdHJpbmcge1xuICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgIFxuICAgIC8vIEFncmVnYXIgbWV0YWluZm9ybWFjaVx1MDBGM25cbiAgICBpZiAodGFyZWEubGluZUluZm8/Lm51bWVybykge1xuICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENDRCBMXHUwMEVEbmVhOiAke3RhcmVhLmxpbmVJbmZvLm51bWVyb31cXG5gO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZ3JlZ2FyIGV0aXF1ZXRhcyBzaSB0aWVuZSBhbGd1bmEgKGF1bnF1ZSBubyBzZWFuIGRlIGxhcyBjYXRlZ29yXHUwMEVEYXMgYnVzY2FkYXMpXG4gICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy50b2Rhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNDXHVERkY3XHVGRTBGIEV0aXF1ZXRhczogJHt0YXJlYS5ldGlxdWV0YXMudG9kYXMuam9pbignICcpfVxcbmA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb250ZW5pZG87XG59XG5cbi8vIC0tIFRhcmVhcyBJbmJveFxuXG4vLyBBXHUwMEYxYWRpciBhbCBhcmNoaXZvIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUEkudHNcblxuLyoqXG4gKiBPYnRpZW5lIHRvZGFzIGxhcyB0YXJlYXMgcXVlIHRpZW5lbiBsYSBldGlxdWV0YSAjaW5ib3hcbiAqIEByZXR1cm5zIHtQcm9taXNlPE9iamVjdD59IE9iamV0byBjb24gdGFyZWFzIGFncnVwYWRhcyBwb3Igbm90YSB5IGNvbnRhZG9yZXNcbiAqL1xucHVibGljIGFzeW5jIGdldFRhcmVhc0luYm94KCk6IFByb21pc2U8e1xuICAgIHRhcmVhc1Bvck5vdGE6IE1hcDxzdHJpbmcsIHtcbiAgICAgICAgdGl0dWxvOiBzdHJpbmcsXG4gICAgICAgIHJ1dGE6IHN0cmluZyxcbiAgICAgICAgdGFyZWFzOiBUYXNrW11cbiAgICB9PixcbiAgICB0b3RhbFRhcmVhczogbnVtYmVyLFxuICAgIHRvdGFsTm90YXM6IG51bWJlclxufT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiXFxuPT09IElOSUNJQU5ETyBCXHUwMERBU1FVRURBIERFIFRBUkVBUyBFTiBCQU5ERUpBIERFIEVOVFJBREEgKCNpbmJveCkgPT09XCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFwYSBwYXJhIGFncnVwYXIgdGFyZWFzIHBvciBhcmNoaXZvXG4gICAgICAgIGNvbnN0IHRhcmVhc1Bvck5vdGEgPSBuZXcgTWFwPHN0cmluZywge1xuICAgICAgICAgICAgdGl0dWxvOiBzdHJpbmcsXG4gICAgICAgICAgICBydXRhOiBzdHJpbmcsXG4gICAgICAgICAgICB0YXJlYXM6IFRhc2tbXVxuICAgICAgICB9PigpO1xuXG4gICAgICAgIC8vIE1hcGEgcGFyYSBndWFyZGFyIGluZm9ybWFjaVx1MDBGM24gZGUgbFx1MDBFRG5lYXMgcG9yIGFyY2hpdm8gKG9wdGltaXphY2lcdTAwRjNuKVxuICAgICAgICBjb25zdCBsaW5lYXNQb3JBcmNoaXZvID0gbmV3IE1hcDxzdHJpbmcsIE1hcDxzdHJpbmcsIExpbmVJbmZvPj4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9idGVuZXIgdG9kYXMgbGFzIHRhcmVhcyBmaWx0cmFuZG8gbGFzIHF1ZSB0ZW5nYW4gI2luYm94XG4gICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgYXN5bmMgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIHRpZW5lIGxhIGV0aXF1ZXRhICNpbmJveFxuICAgICAgICAgICAgICAgIGNvbnN0IHRpZW5lSW5ib3ggPSB0YXJlYS5ldGlxdWV0YXMudG9kYXMuc29tZSh0YWcgPT4gXG4gICAgICAgICAgICAgICAgICAgIHRhZy50b0xvd2VyQ2FzZSgpID09PSAnI2luYm94Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKHRpZW5lSW5ib3gpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT3B0aW1pemFjaVx1MDBGM246IG9idGVuZXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhcyBzb2xvIGN1YW5kbyBzZWEgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluZWFzUG9yQXJjaGl2by5oYXModGFyZWEucnV0YUFyY2hpdm8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyY2hpdm8gPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmVhLnJ1dGFBcmNoaXZvKSBhcyBURmlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJjaGl2bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lYXNQb3JBcmNoaXZvLnNldChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnJ1dGFBcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrVXRpbHMuZW5jb250cmFyTGluZWFzVGFyZWEoYXJjaGl2bylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGJ1c2NhciBsXHUwMEVEbmVhcyBlbiAke3RhcmVhLnJ1dGFBcmNoaXZvfTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFncmVnYXIgaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhIGEgbGEgdGFyZWFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWFzQXJjaGl2byA9IGxpbmVhc1BvckFyY2hpdm8uZ2V0KHRhcmVhLnJ1dGFBcmNoaXZvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhc0FyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVJbmZvID0gbGluZWFzQXJjaGl2by5nZXQodGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEubGluZUluZm8gPSBsaW5lSW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWdydXBhciBwb3IgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmVhc1Bvck5vdGEuaGFzKHRhcmVhLnJ1dGFBcmNoaXZvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWFzUG9yTm90YS5zZXQodGFyZWEucnV0YUFyY2hpdm8sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG86IHRhcmVhLnRpdHVsbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydXRhOiB0YXJlYS5ydXRhQXJjaGl2byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYXM6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGFyZWFzUG9yTm90YS5nZXQodGFyZWEucnV0YUFyY2hpdm8pLnRhcmVhcy5wdXNoKHRhcmVhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpZW5lSW5ib3g7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb250YXIgdG90YWxlc1xuICAgICAgICBjb25zdCB0b3RhbFRhcmVhcyA9IHRhcmVhcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsTm90YXMgPSB0YXJlYXNQb3JOb3RhLnNpemU7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgPT09IEJcdTAwREFTUVVFREEgQ09NUExFVEFEQSA9PT1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYFRvdGFsIGRlIHRhcmVhcyBlbiBiYW5kZWphIGRlIGVudHJhZGEgKCNpbmJveCk6ICR7dG90YWxUYXJlYXN9YCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBUb3RhbCBkZSBub3RhcyBjb24gdGFyZWFzIGluYm94OiAke3RvdGFsTm90YXN9YCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZWFzUG9yTm90YSxcbiAgICAgICAgICAgIHRvdGFsVGFyZWFzLFxuICAgICAgICAgICAgdG90YWxOb3Rhc1xuICAgICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBnZXRUYXJlYXNJbmJveDpcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG5cbi8qKlxuICogTXVlc3RyYSB1bmEgdmlzdGEgY29uIHRvZGFzIGxhcyB0YXJlYXMgZW4gYmFuZGVqYSBkZSBlbnRyYWRhICgjaW5ib3gpIGFncnVwYWRhcyBwb3Igbm90YVxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbnB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzSW5ib3goKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gT2J0ZW5lciB0YXJlYXMgZGUgbGEgYmFuZGVqYSBkZSBlbnRyYWRhXG4gICAgICAgIGNvbnN0IHsgdGFyZWFzUG9yTm90YSwgdG90YWxUYXJlYXMsIHRvdGFsTm90YXMgfSA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzSW5ib3goKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0b3RhbFRhcmVhcyA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGVuIGxhIGJhbmRlamEgZGUgZW50cmFkYSAoI2luYm94KS4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gR2VuZXJhciBjb250ZW5pZG8gZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFUYXJlYXNJbmJveCh0YXJlYXNQb3JOb3RhLCB0b3RhbFRhcmVhcywgdG90YWxOb3Rhcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBHdWFyZGFyIHkgYWJyaXIgYXJjaGl2b1xuICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBCYW5kZWphIGRlIEVudHJhZGEubWRgLFxuICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RvdGFsVGFyZWFzfSB0YXJlYXMgZW4gYmFuZGVqYSBkZSBlbnRyYWRhIGVuICR7dG90YWxOb3Rhc30gbm90YXNgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0luYm94OlwiLCBlcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEdlbmVyYSBlbCBjb250ZW5pZG8gZGUgbGEgdmlzdGEgZGUgdGFyZWFzIGVuIGJhbmRlamEgZGUgZW50cmFkYVxuICogQHBhcmFtIHtNYXB9IHRhcmVhc1Bvck5vdGEgLSBNYXBhIGNvbiBsYXMgdGFyZWFzIGFncnVwYWRhcyBwb3Igbm90YVxuICogQHBhcmFtIHtudW1iZXJ9IHRvdGFsVGFyZWFzIC0gVG90YWwgZGUgdGFyZWFzIGVuIGJhbmRlamEgZGUgZW50cmFkYVxuICogQHBhcmFtIHtudW1iZXJ9IHRvdGFsTm90YXMgLSBUb3RhbCBkZSBub3RhcyBjb24gdGFyZWFzIGVuIGJhbmRlamEgZGUgZW50cmFkYVxuICogQHJldHVybnMge3N0cmluZ30gLSBDb250ZW5pZG8gbWFya2Rvd24gcGFyYSBlbCBhcmNoaXZvXG4gKi9cbnByaXZhdGUgZ2VuZXJhclZpc3RhVGFyZWFzSW5ib3goXG4gICAgdGFyZWFzUG9yTm90YTogTWFwPHN0cmluZywge1xuICAgICAgICB0aXR1bG86IHN0cmluZyxcbiAgICAgICAgcnV0YTogc3RyaW5nLFxuICAgICAgICB0YXJlYXM6IFRhc2tbXVxuICAgIH0+LFxuICAgIHRvdGFsVGFyZWFzOiBudW1iZXIsXG4gICAgdG90YWxOb3RhczogbnVtYmVyXG4pOiBzdHJpbmcge1xuICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRhcmVhcyBlbiBCYW5kZWphIGRlIEVudHJhZGEgKCNpbmJveClcXG5cXG5gO1xuICAgIFxuICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBhY3R1YWxpemFjaVx1MDBGM25cbiAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRhcmVhc0luYm94XCIpO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGluZm9ybWFjaVx1MDBGM24gZ2VuZXJhbFxuICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBlbiBiYW5kZWphIGRlIGVudHJhZGE6ICR7dG90YWxUYXJlYXN9XFxuYDtcbiAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgbm90YXMgY29uIHRhcmVhcyBpbmJveDogJHt0b3RhbE5vdGFzfVxcblxcbmA7XG4gICAgXG4gICAgLy8gT3JkZW5hciBub3RhcyBwb3IgY2FudGlkYWQgZGUgdGFyZWFzIChkZXNjZW5kZW50ZSlcbiAgICBjb25zdCBub3Rhc09yZGVuYWRhcyA9IEFycmF5LmZyb20odGFyZWFzUG9yTm90YS52YWx1ZXMoKSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudGFyZWFzLmxlbmd0aCAtIGEudGFyZWFzLmxlbmd0aCk7XG4gICAgXG4gICAgLy8gR2VuZXJhciBzZWNjaW9uZXMgcG9yIG5vdGFcbiAgICBmb3IgKGNvbnN0IG5vdGFJbmZvIG9mIG5vdGFzT3JkZW5hZGFzKSB7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgIyMgW1ske25vdGFJbmZvLnJ1dGF9fCR7bm90YUluZm8udGl0dWxvfV1dICgke25vdGFJbmZvLnRhcmVhcy5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW5kZXJpemFyIGNhZGEgdGFyZWFcbiAgICAgICAgZm9yIChjb25zdCB0YXJlYSBvZiBub3RhSW5mby50YXJlYXMpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYUluYm94KHRhcmVhKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVuaWRvO1xufVxuXG4vKipcbiAqIFJlbmRlcml6YSB1bmEgdGFyZWEgZGUgYmFuZGVqYSBkZSBlbnRyYWRhIGVuIGZvcm1hdG8gbWFya2Rvd25cbiAqIEBwYXJhbSB7VGFza30gdGFyZWEgLSBUYXJlYSBhIHJlbmRlcml6YXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gUmVwcmVzZW50YWNpXHUwMEYzbiBtYXJrZG93biBkZSBsYSB0YXJlYVxuICovXG5wcml2YXRlIHJlbmRlcml6YXJUYXJlYUluYm94KHRhcmVhOiBUYXNrKTogc3RyaW5nIHtcbiAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICBcbiAgICAvLyBGZWNoYXNcbiAgICBjb25zdCBmZWNoYXMgPSBbXTtcbiAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1gKTtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgIGZlY2hhcy5wdXNoKGBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1gKTtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGZlY2hhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gRmVjaGFzOlxcbiAgICAgICAgJHtmZWNoYXMuam9pbignXFxuICAgICAgICAnKX1cXG5gO1xuICAgIH1cbiAgICBcbiAgICAvLyBIb3Jhcmlvc1xuICAgIGlmICh0YXJlYS5ob3JhSW5pY2lvIHx8IHRhcmVhLmhvcmFGaW4pIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjAgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICB9XG4gICAgXG4gICAgLy8gQWdyZWdhciB1YmljYWNpXHUwMEYzbiBjb24gaW5mb3JtYWNpXHUwMEYzbiBkZSBsXHUwMEVEbmVhXG4gICAgaWYgKHRhcmVhLmxpbmVJbmZvPy5udW1lcm8pIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDQ0QgTFx1MDBFRG5lYTogJHt0YXJlYS5saW5lSW5mby5udW1lcm99XFxuYDtcbiAgICB9XG4gICAgXG4gICAgLy8gRXRpcXVldGFzXG4gICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdUREQzJcdUZFMEYgQ29udGV4dG9zOiAke3RhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3Muam9pbignIHwgJyl9XFxuYDtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REM2NCBQZXJzb25hczogJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuam9pbignIHwgJyl9XFxuYDtcbiAgICB9XG4gICAgXG4gICAgLy8gTW9zdHJhciBvdHJhcyBldGlxdWV0YXMsIGV4Y2x1eWVuZG8gI2luYm94IHF1ZSB5YSBzYWJlbW9zIHF1ZSB0aWVuZVxuICAgIGNvbnN0IG90cmFzRXRpcXVldGFzID0gdGFyZWEuZXRpcXVldGFzLm90cmFzLmZpbHRlcih0YWcgPT4gdGFnLnRvTG93ZXJDYXNlKCkgIT09ICcjaW5ib3gnKTtcbiAgICBpZiAob3RyYXNFdGlxdWV0YXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzQ1x1REZGN1x1RkUwRiBPdHJhcyBldGlxdWV0YXM6ICR7b3RyYXNFdGlxdWV0YXMuam9pbignICcpfVxcbmA7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBjb250ZW5pZG87XG59XG5cbiAgICAgXG59IiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL3V0aWxzL3Rhc2tVdGlscy50c1xuXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi8uLi8uLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIFRhc2tVdGlscyB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE15UGx1Z2luKSB7fVxuICAgIFxuICAgIHB1YmxpYyBjb21wYXJhckZlY2hhcyhmZWNoYTE6IERhdGUgfCBudWxsLCBmZWNoYTI6IERhdGUgfCBudWxsKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKCFmZWNoYTEgJiYgIWZlY2hhMikgcmV0dXJuIDA7XG4gICAgICAgIGlmICghZmVjaGExKSByZXR1cm4gMTsgIC8vIG51bGwgc2UgY29uc2lkZXJhIG1heW9yXG4gICAgICAgIGlmICghZmVjaGEyKSByZXR1cm4gLTE7IC8vIG51bGwgc2UgY29uc2lkZXJhIG1heW9yXG4gICAgICAgIHJldHVybiBmZWNoYTEuZ2V0VGltZSgpIC0gZmVjaGEyLmdldFRpbWUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG5vcm1hbGl6YXJIb3JhKGhvcmE6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBjb25zdCBwYXRyb25lcyA9IFtcbiAgICAgICAgICAgIC9eKFxcZHsxLDJ9KSg/OjooXFxkezJ9KSk/XFxzKihhbXxwbSk/JC9pLFxuICAgICAgICAgICAgL14oXFxkezEsMn0pOihcXGR7Mn0pXFxzKihhbXxwbSk/JC9pLFxuICAgICAgICAgICAgL14oXFxkezEsMn0pOihcXGR7Mn0pJC9cbiAgICAgICAgXTtcblxuICAgICAgICBmb3IgKGNvbnN0IHBhdHJvbiBvZiBwYXRyb25lcykge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBob3JhLnRvTG93ZXJDYXNlKCkubWF0Y2gocGF0cm9uKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCBob3JhcyA9IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dG9zID0gbWF0Y2hbMl0gPyBtYXRjaFsyXSA6ICcwMCc7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVyaW9kbyA9IG1hdGNoWzNdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBlcmlvZG8gPT09ICdwbScgJiYgaG9yYXMgPCAxMikgaG9yYXMgKz0gMTI7XG4gICAgICAgICAgICAgICAgaWYgKHBlcmlvZG8gPT09ICdhbScgJiYgaG9yYXMgPT09IDEyKSBob3JhcyA9IDA7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7aG9yYXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke21pbnV0b3N9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXh0cmFlckZlY2hhc1lIb3JhcyhsaW5lYTogc3RyaW5nKToge1xuICAgICAgICBmZWNoYUNyZWFjaW9uPzogc3RyaW5nO1xuICAgICAgICBmZWNoYVNjaGVkdWxlZD86IHN0cmluZztcbiAgICAgICAgZmVjaGFTdGFydD86IHN0cmluZztcbiAgICAgICAgZmVjaGFWZW5jaW1pZW50bz86IHN0cmluZztcbiAgICAgICAgaG9yYUluaWNpbz86IHN0cmluZztcbiAgICAgICAgaG9yYUZpbj86IHN0cmluZztcbiAgICB9IHtcbiAgICAgICAgY29uc3QgaG9yYUluaWNpb01hdGNoID0gbGluZWEubWF0Y2goL1xcW2hJOlxccyooW15cXF1dKylcXF0vKTtcbiAgICAgICAgY29uc3QgaG9yYUZpbk1hdGNoID0gbGluZWEubWF0Y2goL1xcW2hGOlxccyooW15cXF1dKylcXF0vKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZmVjaGFDcmVhY2lvbjogbGluZWEubWF0Y2goL1x1Mjc5NSAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pLyk/LlsxXSxcbiAgICAgICAgICAgIGZlY2hhU2NoZWR1bGVkOiBsaW5lYS5tYXRjaCgvXHUyM0YzIChcXGR7NH0tXFxkezJ9LVxcZHsyfSkvKT8uWzFdLFxuICAgICAgICAgICAgZmVjaGFTdGFydDogbGluZWEubWF0Y2goL1x1RDgzRFx1REVFQiAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pLyk/LlsxXSxcbiAgICAgICAgICAgIGZlY2hhVmVuY2ltaWVudG86IGxpbmVhLm1hdGNoKC9cdUQ4M0RcdURDQzUgKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pPy5bMV0sXG4gICAgICAgICAgICBob3JhSW5pY2lvOiBob3JhSW5pY2lvTWF0Y2ggPyB0aGlzLm5vcm1hbGl6YXJIb3JhKGhvcmFJbmljaW9NYXRjaFsxXS50cmltKCkpIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgaG9yYUZpbjogaG9yYUZpbk1hdGNoID8gdGhpcy5ub3JtYWxpemFySG9yYShob3JhRmluTWF0Y2hbMV0udHJpbSgpKSA6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHB1YmxpYyBvYnRlbmVyVGl0dWxvTm90YShmaWxlOiBURmlsZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgXG4gICAgICAgIGlmIChtZXRhZGF0YT8uYWxpYXNlcykge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWV0YWRhdGEuYWxpYXNlcykpIHJldHVybiBtZXRhZGF0YS5hbGlhc2VzWzBdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRhZGF0YS5hbGlhc2VzID09PSAnc3RyaW5nJykgcmV0dXJuIG1ldGFkYXRhLmFsaWFzZXM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChtZXRhZGF0YT8udGl0dWxvKSByZXR1cm4gbWV0YWRhdGEudGl0dWxvO1xuXG4gICAgICAgIGNvbnN0IGNvaW5jaWRlbmNpYSA9IGZpbGUuYmFzZW5hbWUubWF0Y2goLyg/OlBHVER8UFF8QUl8QVZ8QXh8UlJ8REp8T0NBfENBQykgLSAoLispLyk7XG4gICAgICAgIGlmIChjb2luY2lkZW5jaWEgJiYgY29pbmNpZGVuY2lhWzFdKSByZXR1cm4gY29pbmNpZGVuY2lhWzFdO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZpbGUuYmFzZW5hbWU7XG4gICAgfVxuIFxuXG5cbiAgICBwdWJsaWMgY2F0ZWdvcml6YXJFdGlxdWV0YXMoZXRpcXVldGFzOiBzdHJpbmdbXSk6IHtcbiAgICAgICAgdG9kb2lzdDogc3RyaW5nW10sXG4gICAgICAgIGNvbnRleHRvczogc3RyaW5nW10sXG4gICAgICAgIHBlcnNvbmFzOiBzdHJpbmdbXSxcbiAgICAgICAgb3RyYXM6IHN0cmluZ1tdXG4gICAgfSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2RvaXN0OiBldGlxdWV0YXMuZmlsdGVyKGUgPT4gZS5zdGFydHNXaXRoKCcjdG9kb2lzdCcpKSxcbiAgICAgICAgICAgIGNvbnRleHRvczogZXRpcXVldGFzXG4gICAgICAgICAgICAgICAgLmZpbHRlcihlID0+IGUubWF0Y2goLyNjeCg/OlsvLV0uKykkLykpXG4gICAgICAgICAgICAgICAgLm1hcChlID0+IHRoaXMubGltcGlhclByZWZpam8oZSwgJ2N4JykpLFxuICAgICAgICAgICAgcGVyc29uYXM6IGV0aXF1ZXRhc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZSA9PiBlLnN0YXJ0c1dpdGgoJyNweC0nKSlcbiAgICAgICAgICAgICAgICAubWFwKGUgPT4gdGhpcy5mb3JtYXRlYXJFdGlxdWV0YVBlcnNvbmEoZSkpLFxuICAgICAgICAgICAgb3RyYXM6IGV0aXF1ZXRhcy5maWx0ZXIoZSA9PiBcbiAgICAgICAgICAgICAgICAhZS5zdGFydHNXaXRoKCcjdG9kb2lzdCcpICYmIFxuICAgICAgICAgICAgICAgICFlLm1hdGNoKC8jY3goPzpbLy1dfCQpLykgJiYgXG4gICAgICAgICAgICAgICAgIWUuc3RhcnRzV2l0aCgnI3B4LScpXG4gICAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTnVldm8gbVx1MDBFOXRvZG8gcGFyYSBmb3JtYXRlYXIgZXRpcXVldGFzIGRlIHBlcnNvbmFzXG4gICAgcHJpdmF0ZSBmb3JtYXRlYXJFdGlxdWV0YVBlcnNvbmEoZXRpcXVldGE6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIEVsaW1pbmFyIGVsIHByZWZpam8gI3B4LVxuICAgICAgICBjb25zdCBub21icmUgPSBldGlxdWV0YS5yZXBsYWNlKCcjcHgtJywgJycpO1xuICAgICAgICAvLyBSZWVtcGxhemFyIGd1aW9uZXMgYmFqb3MgY29uIGVzcGFjaW9zIHBhcmEgbWVqb3IgbGVnaWJpbGlkYWRcbiAgICAgICAgcmV0dXJuIG5vbWJyZS5yZXBsYWNlKC9fL2csICcgJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsaW1waWFyUHJlZmlqbyhldGlxdWV0YTogc3RyaW5nLCBwcmVmaWpvOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBzaW5QcmVmaWpvID0gZXRpcXVldGEucmVwbGFjZShuZXcgUmVnRXhwKGAjJHtwcmVmaWpvfVsvLV1gKSwgJycpO1xuICAgICAgICByZXR1cm4gc2luUHJlZmlqb1xuICAgICAgICAgICAgLnJlcGxhY2UoLy0vZywgJyBcdTIxOTIgJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXC8vZywgJyBcdTIxOTIgJyk7XG4gICAgfVxuXG5cblxuXG4gICAgcHVibGljIGxpbXBpYXJUZXh0b1RhcmVhKGxpbmVhOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdGV4dG9MaW1waW8gPSBsaW5lYVxuICAgICAgICAgICAgLy8gRWxpbWluYXIgZWwgY2hlY2tib3ggZGUgbGEgdGFyZWFcbiAgICAgICAgICAgIC5yZXBsYWNlKC9eLSBcXFsgXFxdLywgJycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIGZlY2hhcyBjb24gZW1vamlzXG4gICAgICAgICAgICAucmVwbGFjZSgvW1x1Mjc5NVx1RDgzRFx1RENDNVx1MjNGM1x1RDgzRFx1REVFQl0gXFxkezR9LVxcZHsyfS1cXGR7Mn0vZywgJycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIGhvcmFzIGRlIGluaWNpbyB5IGZpblxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW2hJOlteXFxdXStcXF0vZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxbaEY6W15cXF1dK1xcXS9nLCAnJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYXIgZW5sYWNlc1xuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW2xpbmtcXF1cXChbXlxcKV0rXFwpL2csICcnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciBJRHMgZGUgdG9kb2lzdFxuICAgICAgICAgICAgLnJlcGxhY2UoLyUlXFxbdG9kb2lzdF9pZDo6IFxcZCtcXF0lJS9nLCAnJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYXIgdG9kYXMgbGFzIGV0aXF1ZXRhcyAoY29uc2lkZXJhbmRvIGxvcyBudWV2b3MgZm9ybWF0b3MpXG4gICAgICAgICAgICAucmVwbGFjZSgvI1tcXHctXSsoPzpcXC9bXFx3LV0rKSpcXGIvZywgJycpXG4gICAgICAgICAgICAucmVwbGFjZSgvI1tcXHctXSsoPzotW1xcdy1dKykqXFxiL2csICcnKTtcblxuICAgICAgICAvLyBFbGltaW5hciBtXHUwMEZBbHRpcGxlcyBlc3BhY2lvcyB5IGVzcGFjaW9zIGFsIGluaWNpby9maW5hbFxuICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvXG4gICAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpXG4gICAgICAgICAgICAudHJpbSgpO1xuXG4gICAgICAgIHJldHVybiB0ZXh0b0xpbXBpbztcbiAgICB9XG5cbiAgIFxuICAgIC8vIE1cdTAwRTl0b2RvIGRlIHV0aWxpZGFkIHBhcmEgb2J0ZW5lciB1bmEgcmVwcmVzZW50YWNpXHUwMEYzbiBqZXJcdTAwRTFycXVpY2EgZGUgbGFzIGV0aXF1ZXRhc1xuICAgIHB1YmxpYyBvYnRlbmVySmVyYXJxdWlhRXRpcXVldGFzKGV0aXF1ZXRhczogc3RyaW5nW10pOiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4ge1xuICAgICAgICBjb25zdCBqZXJhcnF1aWEgPSBuZXcgTWFwPHN0cmluZywgU2V0PHN0cmluZz4+KCk7XG5cbiAgICAgICAgZXRpcXVldGFzLmZvckVhY2goZXRpcXVldGEgPT4ge1xuICAgICAgICAgICAgLy8gRWxpbWluYXIgZWwgIyBpbmljaWFsXG4gICAgICAgICAgICBjb25zdCBwYXJ0ZXMgPSBldGlxdWV0YS5zbGljZSgxKS5zcGxpdCgvWy8tXS8pO1xuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcmlhID0gcGFydGVzWzBdO1xuXG4gICAgICAgICAgICBpZiAoIWplcmFycXVpYS5oYXMoY2F0ZWdvcmlhKSkge1xuICAgICAgICAgICAgICAgIGplcmFycXVpYS5zZXQoY2F0ZWdvcmlhLCBuZXcgU2V0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGFydGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJldGlxdWV0YXMgPSBwYXJ0ZXMuc2xpY2UoMSkuam9pbignLycpO1xuICAgICAgICAgICAgICAgIGplcmFycXVpYS5nZXQoY2F0ZWdvcmlhKT8uYWRkKHN1YmV0aXF1ZXRhcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBqZXJhcnF1aWE7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgb2J0ZW5lckZlY2hhTG9jYWwoKTogRGF0ZSB7XG4gICAgICAgIGNvbnN0IGFob3JhID0gbmV3IERhdGUoKTtcblxuICAgICAgICAvLyBBc2VndXJhciBxdWUgZXN0YW1vcyB0cmFiYWphbmRvIGNvbiBsYSBmZWNoYSBsb2NhbFxuICAgICAgICByZXR1cm4gbmV3IERhdGUoXG4gICAgICAgICAgICBhaG9yYS5nZXRGdWxsWWVhcigpLFxuICAgICAgICAgICAgYWhvcmEuZ2V0TW9udGgoKSxcbiAgICAgICAgICAgIGFob3JhLmdldERhdGUoKSxcbiAgICAgICAgICAgIDAsIDAsIDBcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFTdHI6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBEYXRlIHwgbnVsbCB7XG4gICAgICAgIGlmICghZmVjaGFTdHIpIHJldHVybiBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGludGVycHJldGFtb3MgbGEgZmVjaGEgZW4gbGEgem9uYSBob3JhcmlhIGxvY2FsXG4gICAgICAgICAgICBjb25zdCBbYVx1MDBGMW8sIG1lcywgZGlhXSA9IGZlY2hhU3RyLnNwbGl0KCctJykubWFwKG51bSA9PiBwYXJzZUludChudW0pKTtcbiAgICAgICAgICAgIGlmIChpc05hTihhXHUwMEYxbykgfHwgaXNOYU4obWVzKSB8fCBpc05hTihkaWEpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgbGEgZmVjaGEgZW4gbGEgem9uYSBob3JhcmlhIGxvY2FsXG4gICAgICAgICAgICBjb25zdCBmZWNoYSA9IG5ldyBEYXRlKGFcdTAwRjFvLCBtZXMgLSAxLCBkaWEsIDAsIDAsIDApO1xuICAgICAgICAgICAgcmV0dXJuIGZlY2hhO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2VhbmRvIGZlY2hhOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG5vcm1hbGl6YXJGZWNoYUFTdHJpbmcoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBhXHUwMEYxbyA9IGZlY2hhLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGNvbnN0IG1lcyA9IFN0cmluZyhmZWNoYS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgZGlhID0gU3RyaW5nKGZlY2hhLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgcmV0dXJuIGAke2FcdTAwRjFvfS0ke21lc30tJHtkaWF9YDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXh0cmFlckRlcGVuZGVuY2lhc1lJZHMobGluZWE6IHN0cmluZyk6IHsgdGFza0lkPzogc3RyaW5nOyBkZXBlbmRlbmN5SWQ/OiBzdHJpbmcgfSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQW5hbGl6YW5kbyBsXHUwMEVEbmVhIHBhcmEgSURzOlwiLCBsaW5lYSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHRhZG8gPSB7XG4gICAgICAgICAgICB0YXNrSWQ6IHVuZGVmaW5lZCBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgICAgICAgICBkZXBlbmRlbmN5SWQ6IHVuZGVmaW5lZCBhcyBzdHJpbmcgfCB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gRXh0cmFlciBJRCBwcm9waW8gZGUgbGEgdGFyZWFcbiAgICAgICAgY29uc3QgdGFza0lkTWF0Y2ggPSBsaW5lYS5tYXRjaCgvXHVEODNDXHVERDk0XFxzKihbYS16MC05XXs1LDd9KS8pO1xuICAgICAgICBpZiAodGFza0lkTWF0Y2gpIHtcbiAgICAgICAgICAgIHJlc3VsdGFkby50YXNrSWQgPSB0YXNrSWRNYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSUQgZW5jb250cmFkbzpcIiwgcmVzdWx0YWRvLnRhc2tJZCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gRXh0cmFlciBJRCBkZSBkZXBlbmRlbmNpYVxuICAgICAgICBjb25zdCBkZXBlbmRlbmN5TWF0Y2ggPSBsaW5lYS5tYXRjaCgvXHUyNkQ0XFxzKihbYS16MC05XXs1LDd9KS8pO1xuICAgICAgICBpZiAoZGVwZW5kZW5jeU1hdGNoKSB7XG4gICAgICAgICAgICByZXN1bHRhZG8uZGVwZW5kZW5jeUlkID0gZGVwZW5kZW5jeU1hdGNoWzFdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXBlbmRlbmNpYSBlbmNvbnRyYWRhOlwiLCByZXN1bHRhZG8uZGVwZW5kZW5jeUlkKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgYXN5bmMgdmVyaWZpY2FyRXN0YWRvVGFyZWEodGFza0lkOiBzdHJpbmcpOiBQcm9taXNlPHtcbiAgICAgICAgY29tcGxldGFkYTogYm9vbGVhbjtcbiAgICAgICAgcnV0YUFyY2hpdm8/OiBzdHJpbmc7XG4gICAgICAgIHRpdHVsb0FyY2hpdm8/OiBzdHJpbmc7XG4gICAgICAgIHRleHRvVGFyZWE/OiBzdHJpbmc7XG4gICAgfT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlxcblZlcmlmaWNhbmRvIGVzdGFkbyBkZSB0YXJlYTpcIiwgdGFza0lkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9idGVuZXIgdG9kb3MgbG9zIGFyY2hpdm9zIHkgZmlsdHJhciBsb3MgZXhjbHVpZG9zXG4gICAgICAgIGNvbnN0IHRvZG9zTG9zQXJjaGl2b3MgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBmaWxlc1BhcmFQcm9jZXNhciA9IHRvZG9zTG9zQXJjaGl2b3MuZmlsdGVyKGZpbGUgPT4gIXRoaXMuZGViZUV4Y2x1aXJBcmNoaXZvKGZpbGUpKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBCdXNjYW5kbyBlbiAke2ZpbGVzUGFyYVByb2Nlc2FyLmxlbmd0aH0gYXJjaGl2b3MgKGV4Y2x1aWRvczogJHt0b2Rvc0xvc0FyY2hpdm9zLmxlbmd0aCAtIGZpbGVzUGFyYVByb2Nlc2FyLmxlbmd0aH0pYCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNQYXJhUHJvY2VzYXIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmVhIG9mIGxpbmVhcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZWEuaW5jbHVkZXMoYFx1RDgzQ1x1REQ5NCAke3Rhc2tJZH1gKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0YUNvbXBsZXRhZGEgPSBsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbeF0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdHVsb0FyY2hpdm8gPSB0aGlzLm9idGVuZXJUaXR1bG9Ob3RhKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9UYXJlYSA9IHRoaXMubGltcGlhclRleHRvVGFyZWEobGluZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXJlYSBlbmNvbnRyYWRhIGVuOlwiLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFc3RhZG8gY29tcGxldGFkYTpcIiwgZXN0YUNvbXBsZXRhZGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUZXh0byBkZSBsYSB0YXJlYTpcIiwgdGV4dG9UYXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGFkYTogZXN0YUNvbXBsZXRhZGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnV0YUFyY2hpdm86IGZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG9BcmNoaXZvOiB0aXR1bG9BcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRvVGFyZWE6IHRleHRvVGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHByb2Nlc2FuZG8gYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhcIlRhcmVhIG5vIGVuY29udHJhZGEgZW4gbG9zIGFyY2hpdm9zIHBlcm1pdGlkb3NcIik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb21wbGV0YWRhOiBmYWxzZVxuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgLy8gRW4gbGEgY2xhc2UgVGFza1V0aWxzXG5cbnB1YmxpYyBleHRyYWVyRXRpcXVldGFzKGxpbmVhOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZXRpcXVldGFzOiBzdHJpbmdbXSA9IFtdO1xuICAgIFxuICAgIC8vIFBhdHJvbmVzIHBhcmEgaWRlbnRpZmljYXIgZGlmZXJlbnRlcyBmb3JtYXRvcyBkZSBldGlxdWV0YXNcbiAgICBjb25zdCBwYXRyb25lc0V0aXF1ZXRhcyA9IFtcbiAgICAgICAgLy8gRXRpcXVldGFzIGRlIHBlcnNvbmFzIGNvbiBmb3JtYXRvICNweC1Ob21icmVfQXBlbGxpZG8gXG4gICAgICAgIC8jcHgtW0EtWmEtel0rKD86X1tBLVphLXpdKykqKD86X1tBLVphLXpdKyk/XFxiL2csXG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YXMgc2ltcGxlczogI3RvZG9pc3RcbiAgICAgICAgLyNbXFx3LV0rXFxiL2csXG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YXMgY29uIGplcmFycXVcdTAwRURhIHVzYW5kbyBcIi9cIjogI2N4L2FsZ3VuYS9jb3NhXG4gICAgICAgIC8jW1xcdy1dKyg/OlxcL1tcXHctXSspK1xcYi9nLFxuICAgICAgICBcbiAgICAgICAgLy8gRXRpcXVldGFzIGNvbiBqZXJhcnF1XHUwMEVEYSB1c2FuZG8gXCItXCI6ICNjeC1hbGd1bmEtY29zYVxuICAgICAgICAvI1tcXHctXSsoPzotW1xcdy1dKykrXFxiL2dcbiAgICBdO1xuXG4gICAgLy8gUHJvY2VzYXIgY2FkYSBwYXRyXHUwMEYzblxuICAgIHBhdHJvbmVzRXRpcXVldGFzLmZvckVhY2gocGF0cm9uID0+IHtcbiAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGxpbmVhLm1hdGNoKHBhdHJvbik7XG4gICAgICAgIGlmIChjb2luY2lkZW5jaWFzKSB7XG4gICAgICAgICAgICBjb2luY2lkZW5jaWFzLmZvckVhY2goZXRpcXVldGEgPT4ge1xuICAgICAgICAgICAgICAgIC8vIEV2aXRhciBkdXBsaWNhZG9zIHkgYXNlZ3VyYXIgcXVlIHNlYSB1bmEgZXRpcXVldGEgdlx1MDBFMWxpZGFcbiAgICAgICAgICAgICAgICBpZiAoIWV0aXF1ZXRhcy5pbmNsdWRlcyhldGlxdWV0YSkgJiYgdGhpcy5lc0V0aXF1ZXRhVmFsaWRhKGV0aXF1ZXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBldGlxdWV0YXMucHVzaChldGlxdWV0YSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLm9yZ2FuaXphckV0aXF1ZXRhcyhldGlxdWV0YXMpO1xufVxuXG5wcml2YXRlIGVzRXRpcXVldGFWYWxpZGEoZXRpcXVldGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIFZlcmlmaWNhciBxdWUgbGEgZXRpcXVldGEgY3VtcGxhIGNvbiBlbCBmb3JtYXRvIGJcdTAwRTFzaWNvXG4gICAgaWYgKCFldGlxdWV0YS5zdGFydHNXaXRoKCcjJykpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFZhbGlkYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2EgcGFyYSBldGlxdWV0YXMgZGUgcGVyc29uYXNcbiAgICBpZiAoZXRpcXVldGEuc3RhcnRzV2l0aCgnI3B4LScpKSB7XG4gICAgICAgIGNvbnN0IG5vbWJyZUNvbXBsZXRvID0gZXRpcXVldGEuc2xpY2UoNCk7IC8vIFJlbW92ZXIgJyNweC0nXG4gICAgICAgIC8vIFZlcmlmaWNhciBmb3JtYXRvIE5vbWJyZV9BcGVsbGlkbyhfRW1wcmVzYSk/XG4gICAgICAgIHJldHVybiAvXltBLVphLXpdKyg/Ol9bQS1aYS16XSspKiQvLnRlc3Qobm9tYnJlQ29tcGxldG8pO1xuICAgIH1cblxuICAgIC8vIFZlcmlmaWNhciBxdWUgbm8gY29udGVuZ2EgY2FyYWN0ZXJlcyBpbnZcdTAwRTFsaWRvc1xuICAgIGNvbnN0IGNhcmFjdGVyZXNJbnZhbGlkb3MgPSAvWyFAJCVeJiooKSs9e31cXFtcXF06O1wiJzw+LC4/flxcXFx8XS87XG4gICAgaWYgKGNhcmFjdGVyZXNJbnZhbGlkb3MudGVzdChldGlxdWV0YSkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFZlcmlmaWNhciBlc3RydWN0dXJhIHBhcmEgZXRpcXVldGFzIGNvbiBqZXJhcnF1XHUwMEVEYVxuICAgIGNvbnN0IHBhcnRlc0V0aXF1ZXRhID0gZXRpcXVldGEuc2xpY2UoMSkuc3BsaXQoL1svLV0vKTtcbiAgICByZXR1cm4gcGFydGVzRXRpcXVldGEuZXZlcnkocGFydGUgPT4gcGFydGUubGVuZ3RoID4gMCk7XG59XG5cbnByaXZhdGUgb3JnYW5pemFyRXRpcXVldGFzKGV0aXF1ZXRhczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgLy8gT3JkZW5hciBldGlxdWV0YXMgcG9yIGNhdGVnb3JcdTAwRURhcyBjb25vY2lkYXMgeSBsdWVnbyBhbGZhYlx1MDBFOXRpY2FtZW50ZVxuICAgIGNvbnN0IGNhdGVnb3JpYXNDb25vY2lkYXMgPSB7XG4gICAgICAgIHRvZG9pc3Q6IFtdIGFzIHN0cmluZ1tdLFxuICAgICAgICBjeDogW10gYXMgc3RyaW5nW10sXG4gICAgICAgIHB4OiBbXSBhcyBzdHJpbmdbXSxcbiAgICAgICAgb3RyYXM6IFtdIGFzIHN0cmluZ1tdXG4gICAgfTtcblxuICAgIGV0aXF1ZXRhcy5mb3JFYWNoKGV0aXF1ZXRhID0+IHtcbiAgICAgICAgaWYgKGV0aXF1ZXRhLnN0YXJ0c1dpdGgoJyNweC0nKSkge1xuICAgICAgICAgICAgY2F0ZWdvcmlhc0Nvbm9jaWRhcy5weC5wdXNoKGV0aXF1ZXRhKTtcbiAgICAgICAgfSBlbHNlIGlmIChldGlxdWV0YS5zdGFydHNXaXRoKCcjdG9kb2lzdCcpKSB7XG4gICAgICAgICAgICBjYXRlZ29yaWFzQ29ub2NpZGFzLnRvZG9pc3QucHVzaChldGlxdWV0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXRpcXVldGEubWF0Y2goLyNjeCg/OlsvLV18JCkvKSkge1xuICAgICAgICAgICAgY2F0ZWdvcmlhc0Nvbm9jaWRhcy5jeC5wdXNoKGV0aXF1ZXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhdGVnb3JpYXNDb25vY2lkYXMub3RyYXMucHVzaChldGlxdWV0YSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIE9yZGVuYXIgY2FkYSBjYXRlZ29yXHUwMEVEYSBhbGZhYlx1MDBFOXRpY2FtZW50ZVxuICAgIE9iamVjdC52YWx1ZXMoY2F0ZWdvcmlhc0Nvbm9jaWRhcykuZm9yRWFjaChjYXRlZ29yaWEgPT4ge1xuICAgICAgICBjYXRlZ29yaWEuc29ydCgoYSwgYikgPT4gYS5sb2NhbGVDb21wYXJlKGIpKTtcbiAgICB9KTtcblxuICAgIC8vIENvbWJpbmFyIHRvZGFzIGxhcyBjYXRlZ29yXHUwMEVEYXMgZW4gZWwgb3JkZW4gZGVzZWFkb1xuICAgIHJldHVybiBbXG4gICAgICAgIC4uLmNhdGVnb3JpYXNDb25vY2lkYXMudG9kb2lzdCxcbiAgICAgICAgLi4uY2F0ZWdvcmlhc0Nvbm9jaWRhcy5jeCxcbiAgICAgICAgLi4uY2F0ZWdvcmlhc0Nvbm9jaWRhcy5weCxcbiAgICAgICAgLi4uY2F0ZWdvcmlhc0Nvbm9jaWRhcy5vdHJhc1xuICAgIF07XG59XG5cbi8vIEFncmVnYXIgbVx1MDBFOXRvZG8gcGFyYSB2ZXJpZmljYXIgZXhjbHVzaW9uZXNcbnByaXZhdGUgZGViZUV4Y2x1aXJBcmNoaXZvKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgLy8gRXhjbHVpciBsYSBjYXJwZXRhIFBsYW50aWxsYXMgeSBzdXMgc3ViY2FycGV0YXNcbiAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoJ1BsYW50aWxsYXMvJykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRXhjbHVpciBsYSBjYXJwZXRhIGRlbCBzaXN0ZW1hIEdURCB5IHN1cyBzdWJjYXJwZXRhc1xuICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vYCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRXhjbHVpciBjYXJwZXRhIGRlIGFyY2hpdm9zIChzaSBleGlzdGUpXG4gICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCdBcmNoaXZvLycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxucHVibGljIGFzeW5jIGVuY29udHJhckxpbmVhc1RhcmVhKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxNYXA8c3RyaW5nLCBMaW5lSW5mbz4+IHtcbiAgICBjb25zdCBsaW5lYXNUYXJlYXMgPSBuZXcgTWFwPHN0cmluZywgTGluZUluZm8+KCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdCgnXFxuJyk7XG4gICAgICAgIFxuICAgICAgICBsaW5lYXMuZm9yRWFjaCgobGluZWEsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhciB1bmEgY2xhdmUgXHUwMEZBbmljYSBiYXNhZGEgZW4gZWwgdGV4dG8gZGUgbGEgdGFyZWFcbiAgICAgICAgICAgIGNvbnN0IHRleHRvTGltcGlvID0gdGhpcy5saW1waWFyVGV4dG9UYXJlYShsaW5lYSk7XG4gICAgICAgICAgICBpZiAodGV4dG9MaW1waW8gJiYgbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gWycpKSB7XG4gICAgICAgICAgICAgICAgbGluZWFzVGFyZWFzLnNldCh0ZXh0b0xpbXBpbywge1xuICAgICAgICAgICAgICAgICAgICBudW1lcm86IGluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dG86IGxpbmVhLnRyaW0oKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNhbmRvIGxcdTAwRURuZWFzIGVuICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgfVxuICAgIHJldHVybiBsaW5lYXNUYXJlYXM7XG59XG5cbn0iLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvdXRpbHMvdGFza1dlaWdodENhbGN1bGF0b3IudHNcblxuaW1wb3J0IHsgVGFzaywgRXN0YWRvVGFyZWEgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Rhc2tJbnRlcmZhY2VzJztcbmltcG9ydCB7IFRhc2tVdGlscyB9IGZyb20gJy4vdGFza1V0aWxzJztcblxuZXhwb3J0IGNsYXNzIFRhc2tXZWlnaHRDYWxjdWxhdG9yIHtcbiAgICBwcml2YXRlIHN0YXRpYyB0YXNrVXRpbHM6IFRhc2tVdGlscztcbiAgICBcbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBXRUlHSFRTID0ge1xuICAgICAgICBIT1JBX0ZJTjogNSxcbiAgICAgICAgSE9SQV9JTklDSU86IDUsXG4gICAgICAgIERVRV9EQVRFOiA1LFxuICAgICAgICBTQ0hFRFVMRUQ6IDQsXG4gICAgICAgIFNUQVJUOiAzLFxuICAgICAgICBQUklPUklUWToge1xuICAgICAgICAgICAgSElHSEVTVDogNCxcbiAgICAgICAgICAgIEhJR0g6IDMsXG4gICAgICAgICAgICBNRURJVU06IDIsXG4gICAgICAgICAgICBMT1c6IC0xLFxuICAgICAgICAgICAgTE9XRVNUOiAtMlxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHB1YmxpYyBzdGF0aWMgc2V0VGFza1V0aWxzKHV0aWxzOiBUYXNrVXRpbHMpIHtcbiAgICAgICAgVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzID0gdXRpbHM7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBnZXRGZWNoYVByaW9yaXRhcmlhKHRhc2s6IFRhc2ssIHRpcG9GZWNoYTogJ3N0YXJ0JyB8ICdkdWUnIHwgJ3NjaGVkdWxlZCcgfCAnYW55JyA9ICdhbnknKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGlmICghdGFzaykgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgc3dpdGNoICh0aXBvRmVjaGEpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5mZWNoYVN0YXJ0IHx8IG51bGw7XG4gICAgICAgICAgICBjYXNlICdkdWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLmZlY2hhVmVuY2ltaWVudG8gfHwgbnVsbDtcbiAgICAgICAgICAgIGNhc2UgJ3NjaGVkdWxlZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suZmVjaGFTY2hlZHVsZWQgfHwgbnVsbDtcbiAgICAgICAgICAgIGNhc2UgJ2FueSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suZmVjaGFWZW5jaW1pZW50byB8fCB0YXNrLmZlY2hhU2NoZWR1bGVkIHx8IHRhc2suZmVjaGFTdGFydCB8fCBudWxsO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgc2hvdWxkSW5jbHVkZVRhc2sodGFzazogVGFzaywgc2VhcmNoVHlwZTogc3RyaW5nLCBjdXJyZW50RGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIVRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGFza1V0aWxzIG5vIGluaWNpYWxpemFkbyBlbiBUYXNrV2VpZ2h0Q2FsY3VsYXRvcicpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHN3aXRjaCAoc2VhcmNoVHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3N0YXJ0X3ZlbmNpZGFzJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVN0YXJ0ID0gdGFzay5mZWNoYVN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlY2hhU3RhcnQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU3RhcnRPYmogPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFTdGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYVN0YXJ0T2JqICE9PSBudWxsICYmIGZlY2hhU3RhcnRPYmogPCBjdXJyZW50RGF0ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYXNlICd2ZW5jaWRhcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFWZW5jaW1pZW50byA9IHRhc2suZmVjaGFWZW5jaW1pZW50bztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWNoYVZlbmNpbWllbnRvKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFWZW5jT2JqID0gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhVmVuY2ltaWVudG8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFWZW5jT2JqICE9PSBudWxsICYmIGZlY2hhVmVuY09iaiA8IGN1cnJlbnREYXRlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhc2UgJ2hveSc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFzID0gW3Rhc2suZmVjaGFWZW5jaW1pZW50bywgdGFzay5mZWNoYVNjaGVkdWxlZCwgdGFzay5mZWNoYVN0YXJ0XS5maWx0ZXIoZiA9PiBmKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhcy5zb21lKGZlY2hhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqID0gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhISk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFPYmo/LnRvRGF0ZVN0cmluZygpID09PSBjdXJyZW50RGF0ZS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FzZSAncHJveGltYXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhVmVuY2ltaWVudG8gPSB0YXNrLmZlY2hhVmVuY2ltaWVudG87XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVjaGFWZW5jaW1pZW50bykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhVmVuY09iaiA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYVZlbmNpbWllbnRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWNoYVZlbmNPYmopIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkaWFzRGlmZXJlbmNpYSA9IE1hdGguY2VpbChcbiAgICAgICAgICAgICAgICAgICAgICAgIChmZWNoYVZlbmNPYmouZ2V0VGltZSgpIC0gY3VycmVudERhdGUuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGlhc0RpZmVyZW5jaWEgPj0gMCAmJiBkaWFzRGlmZXJlbmNpYSA8PSA3O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIHNob3VsZEluY2x1ZGVUYXNrOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgY2FsY3VsYXRlV2VpZ2h0KHRhc2s6IFRhc2spOiB7IGJhc2VXZWlnaHQ6IG51bWJlcjsgdGltZVdlaWdodDogbnVtYmVyOyBwcmlvcml0eVdlaWdodDogbnVtYmVyOyB0b3RhbFdlaWdodDogbnVtYmVyIH0ge1xuICAgICAgICBsZXQgYmFzZVdlaWdodCA9IDA7XG4gICAgICAgIGxldCB0aW1lV2VpZ2h0ID0gMDtcbiAgICAgICAgbGV0IHByaW9yaXR5V2VpZ2h0ID0gMDtcblxuICAgICAgICAvLyBQZXNvcyBwb3IgZmVjaGFzXG4gICAgICAgIGlmICh0YXNrLmZlY2hhVmVuY2ltaWVudG8pIGJhc2VXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkRVRV9EQVRFO1xuICAgICAgICBpZiAodGFzay5mZWNoYVNjaGVkdWxlZCkgYmFzZVdlaWdodCArPSB0aGlzLldFSUdIVFMuU0NIRURVTEVEO1xuICAgICAgICBpZiAodGFzay5mZWNoYVN0YXJ0KSBiYXNlV2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5TVEFSVDtcblxuICAgICAgICAvLyBQZXNvcyBwb3IgaG9yYXNcbiAgICAgICAgaWYgKHRhc2suaG9yYUZpbikgdGltZVdlaWdodCArPSB0aGlzLldFSUdIVFMuSE9SQV9GSU47XG4gICAgICAgIGlmICh0YXNrLmhvcmFJbmljaW8pIHRpbWVXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkhPUkFfSU5JQ0lPO1xuXG4gICAgICAgIC8vIFBlc28gcG9yIHByaW9yaWRhZFxuICAgICAgICBjb25zdCB0ZXh0byA9IHRhc2sudGV4dG8udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0EnKSkgcHJpb3JpdHlXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkhJR0hFU1Q7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VCJykpIHByaW9yaXR5V2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5QUklPUklUWS5ISUdIO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQycpKSBwcmlvcml0eVdlaWdodCArPSB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTUVESVVNO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzRCcpKSBwcmlvcml0eVdlaWdodCArPSB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTE9XO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQycpKSBwcmlvcml0eVdlaWdodCArPSB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTE9XRVNUO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBiYXNlV2VpZ2h0LFxuICAgICAgICAgICAgdGltZVdlaWdodCxcbiAgICAgICAgICAgIHByaW9yaXR5V2VpZ2h0LFxuICAgICAgICAgICAgdG90YWxXZWlnaHQ6IGJhc2VXZWlnaHQgKyB0aW1lV2VpZ2h0ICsgcHJpb3JpdHlXZWlnaHRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNvcnRUYXNrcyh0YXNrczogVGFza1tdKTogVGFza1tdIHtcbiAgICAgICAgaWYgKCFUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rhc2tVdGlscyBubyBpbmljaWFsaXphZG8gZW4gVGFza1dlaWdodENhbGN1bGF0b3InKTtcbiAgICAgICAgICAgIHJldHVybiB0YXNrcztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0YXNrcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFByaW1lcm8gb3JkZW5hciBwb3IgZmVjaGFcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYUEgPSB0aGlzLmdldEZlY2hhUHJpb3JpdGFyaWEoYSwgJ2FueScpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhQiA9IHRoaXMuZ2V0RmVjaGFQcmlvcml0YXJpYShiLCAnYW55Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmVjaGFBICE9PSBmZWNoYUIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUEgPSBmZWNoYUEgPyBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFBKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVCID0gZmVjaGFCID8gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhQikgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVBICYmIGRhdGVCKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUEuZ2V0VGltZSgpIC0gZGF0ZUIuZ2V0VGltZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNpIGxhcyBmZWNoYXMgc29uIGlndWFsZXMsIG9yZGVuYXIgcG9yIGhvcmFcbiAgICAgICAgICAgICAgICBpZiAoYS5ob3JhSW5pY2lvICYmIGIuaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYS5ob3JhSW5pY2lvICE9PSBiLmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhLmhvcmFJbmljaW8ubG9jYWxlQ29tcGFyZShiLmhvcmFJbmljaW8pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhLmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYi5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNpIGxhcyBob3JhcyBzb24gaWd1YWxlcyBvIG5vIGV4aXN0ZW4sIG9yZGVuYXIgcG9yIHBlc29cbiAgICAgICAgICAgICAgICBjb25zdCB3ZWlnaHRBID0gYS53ZWlnaHQ/LnRvdGFsV2VpZ2h0ID8/IDA7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2VpZ2h0QiA9IGIud2VpZ2h0Py50b3RhbFdlaWdodCA/PyAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB3ZWlnaHRCIC0gd2VpZ2h0QTtcblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvcmRlbmFuZG8gdGFyZWFzOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlQmFzZVdlaWdodCh0YXNrOiBUYXNrKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHdlaWdodCA9IDA7XG5cbiAgICAgICAgLy8gUGVzb3MgcG9yIGZlY2hhc1xuICAgICAgICBpZiAodGFzay5mZWNoYVZlbmNpbWllbnRvKSB3ZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkRVRV9EQVRFO1xuICAgICAgICBpZiAodGFzay5mZWNoYVNjaGVkdWxlZCkgd2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5TQ0hFRFVMRUQ7XG4gICAgICAgIGlmICh0YXNrLmZlY2hhU3RhcnQpIHdlaWdodCArPSB0aGlzLldFSUdIVFMuU1RBUlQ7XG5cbiAgICAgICAgcmV0dXJuIHdlaWdodDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBjYWxjdWxhdGVUaW1lV2VpZ2h0KHRhc2s6IFRhc2spOiBudW1iZXIge1xuICAgICAgICBsZXQgd2VpZ2h0ID0gMDtcblxuICAgICAgICBpZiAodGFzay5ob3JhRmluKSB3ZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkhPUkFfRklOO1xuICAgICAgICBpZiAodGFzay5ob3JhSW5pY2lvKSB3ZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkhPUkFfSU5JQ0lPO1xuXG4gICAgICAgIHJldHVybiB3ZWlnaHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlUHJpb3JpdHlXZWlnaHQodGFzazogVGFzayk6IG51bWJlciB7XG4gICAgICAgIGNvbnN0IHRleHRvID0gdGFzay50ZXh0by50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNBJykpIHJldHVybiB0aGlzLldFSUdIVFMuUFJJT1JJVFkuSElHSEVTVDtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUInKSkgcmV0dXJuIHRoaXMuV0VJR0hUUy5QUklPUklUWS5ISUdIO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQycpKSByZXR1cm4gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLk1FRElVTTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0QnKSkgcmV0dXJuIHRoaXMuV0VJR0hUUy5QUklPUklUWS5MT1c7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VDJykpIHJldHVybiB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTE9XRVNUO1xuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZXNGZWNoYVZhbGlkYShmZWNoYTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmZWNoYU9iaiA9IG5ldyBEYXRlKGZlY2hhKTtcbiAgICAgICAgICAgIHJldHVybiBmZWNoYU9iai50b1N0cmluZygpICE9PSAnSW52YWxpZCBEYXRlJztcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cblxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9pbmRleC50c1xuXG5pbXBvcnQgeyBQbHVnaW4sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuaW1wb3J0IHsgVGFiVGl0bGVNYW5hZ2VyIH0gZnJvbSAnLi9UYWJUaXRsZU1hbmFnZXInO1xuaW1wb3J0IHsgVGFiVGl0bGVTZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy9UYWJUaXRsZVNldHRpbmdzJztcbmltcG9ydCB7IERFRkFVTFRfVEFCX1NFVFRJTkdTIH0gZnJvbSAnLi9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvVGFiVGl0bGUge1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogVGFiVGl0bGVTZXR0aW5ncztcbiAgICBwcml2YXRlIHRhYk1hbmFnZXI6IFRhYlRpdGxlTWFuYWdlciB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gREVGQVVMVF9UQUJfU0VUVElOR1M7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0aXZhdGUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDYXJnYXIgY29uZmlndXJhY2lcdTAwRjNuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSB0aXRsZURpc3BsYXlNb2RlIGVzdFx1MDBFMSBjb25maWd1cmFkb1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLnRpdGxlRGlzcGxheU1vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRpdGxlRGlzcGxheU1vZGUgPSAnYWxpYXMnO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEluaWNpYWxpemFyIGVsIG1hbmVqYWRvciBkZSB0XHUwMEVEdHVsb3NcbiAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlciA9IG5ldyBUYWJUaXRsZU1hbmFnZXIodGhpcy5wbHVnaW4sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWdpc3RyYXIgbG9zIGNvbWFuZG9zXG4gICAgICAgICAgICByZWdpc3RlckNvbW1hbmRzKHRoaXMucGx1Z2luLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVnaXN0cmFyIGV2ZW50b3MgcGFyYSBjYW1iaW9zIGRlIGxheW91dFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyPy51cGRhdGVBbGxUYWJzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHRhYnMgb24gbGF5b3V0IGNoYW5nZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gUmVnaXN0cmFyIGV2ZW50byBwYXJhIGN1YW5kbyBzZSBhYnJhIHVuIGFyY2hpdm9cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKGZpbGU6IFRGaWxlIHwgbnVsbCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgJiYgdGhpcy50YWJNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyLnVwZGF0ZVRhYkZvckZpbGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHRhYiBvbiBmaWxlIG9wZW46JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YWNpXHUwMEYzbiBpbmljaWFsIGRlc3B1XHUwMEU5cyBkZSB1biBicmV2ZSByZXRyYXNvXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXI/LnVwZGF0ZUFsbFRhYnMoKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIGFjdGl2YXRpbmcgVGFiVGl0bGUgbW9kdWxlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy50YWJNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyLnJlc3RvcmVEZWZhdWx0VGl0bGVzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3IgZGVhY3RpdmF0aW5nIFRhYlRpdGxlIG1vZHVsZTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRlZERhdGEgPSBhd2FpdCB0aGlzLnBsdWdpbi5sb2FkRGF0YSgpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfVEFCX1NFVFRJTkdTLCBsb2FkZWREYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3IgbG9hZGluZyBUYWJUaXRsZSBzZXR0aW5nczonLCBlcnJvcik7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gREVGQVVMVF9UQUJfU0VUVElOR1M7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciBzYXZpbmcgVGFiVGl0bGUgc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9jb21tYW5kcy50c1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFiVGl0bGVTZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy9UYWJUaXRsZVNldHRpbmdzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4sIHNldHRpbmdzOiBUYWJUaXRsZVNldHRpbmdzKSB7XG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ3NldC10YWItdGl0bGUtYWxpYXMnLFxuICAgICAgICBuYW1lOiAnTW9zdHJhciBhbGlhcyBlbiBwZXN0YVx1MDBGMWFzJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHNldHRpbmdzLnRpdGxlRGlzcGxheU1vZGUgPSAnYWxpYXMnO1xuICAgICAgICAgICAgcGx1Z2luLnNhdmVEYXRhKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ3NldC10YWItdGl0bGUtdGl0bGUnLFxuICAgICAgICBuYW1lOiAnTW9zdHJhciB0XHUwMEVEdHVsbyBlbiBwZXN0YVx1MDBGMWFzJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHNldHRpbmdzLnRpdGxlRGlzcGxheU1vZGUgPSAndGl0bGUnO1xuICAgICAgICAgICAgcGx1Z2luLnNhdmVEYXRhKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogJ3NldC10YWItdGl0bGUtZmlsZW5hbWUnLFxuICAgICAgICBuYW1lOiAnTW9zdHJhciBub21icmUgZGUgYXJjaGl2byBlbiBwZXN0YVx1MDBGMWFzJyxcbiAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHNldHRpbmdzLnRpdGxlRGlzcGxheU1vZGUgPSAnZmlsZW5hbWUnO1xuICAgICAgICAgICAgcGx1Z2luLnNhdmVEYXRhKHNldHRpbmdzKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9UYWJUaXRsZU1hbmFnZXIudHNcbmltcG9ydCB7IFRGaWxlLCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDdXN0b21NYXJrZG93blZpZXcgfSBmcm9tICcuL3ZpZXdzL0N1c3RvbU1hcmtkb3duVmlldyc7XG5pbXBvcnQgeyBUYWJUaXRsZVNldHRpbmdzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL1RhYlRpdGxlU2V0dGluZ3MnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi91dGlscy9sb2dnZXInO1xuXG5leHBvcnQgY2xhc3MgVGFiVGl0bGVNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IFRhYlRpdGxlU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBjdXN0b21WaWV3czogTWFwPHN0cmluZywgQ3VzdG9tTWFya2Rvd25WaWV3PjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luLCBzZXR0aW5nczogVGFiVGl0bGVTZXR0aW5ncykge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLmN1c3RvbVZpZXdzID0gbmV3IE1hcCgpO1xuICAgICAgICBMb2dnZXIuaW5mbygnVGFiVGl0bGVNYW5hZ2VyIGluaXRpYWxpemVkJyk7XG4gICAgfVxuXG4gICAgdXBkYXRlQWxsVGFicygpIHtcbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XG4gICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYihsZWFmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVRhYkZvckZpbGUoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XG4gICAgICAgIGZvciAoY29uc3QgbGVhZiBvZiBsZWF2ZXMpIHtcbiAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGU/LnBhdGggPT09IGZpbGUucGF0aCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlVGFiKGxlYWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cblxuICAgIGFzeW5jIGdldFByZWZlcnJlZFRpdGxlV2l0aFNvdXJjZShmaWxlOiBURmlsZSk6IFByb21pc2U8eyBkaXNwbGF5VGl0bGU6IHN0cmluZyB8IG51bGw7IHNvdXJjZTogc3RyaW5nIH0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXdhaXQgdGhpcy53YWl0Rm9yTWV0YWRhdGEoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSB0aWVuZSBhbGlhc2VzXG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmFsaWFzZXMpIHtcbiAgICAgICAgICAgICAgICAvLyBDYXNvIGVzcGVjaWFsOiAzIG8gbVx1MDBFMXMgYWxpYXNlcyAtIG1vc3RyYXIgYWxpYXNlc1syXSAvIGFsaWFzZXNbMF1cbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YS5hbGlhc2VzKSAmJiBtZXRhZGF0YS5hbGlhc2VzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRpdGxlOiBgJHttZXRhZGF0YS5hbGlhc2VzWzJdfSAvICR7bWV0YWRhdGEuYWxpYXNlc1swXX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiAnYWxpYXNlcy1zcGVjaWFsJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDb21wb3J0YW1pZW50byBub3JtYWwgcGFyYSBtZW5vcyBkZSAzIGFsaWFzZXNcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1ldGFkYXRhLmFsaWFzZXMpICYmIG1ldGFkYXRhLmFsaWFzZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogbWV0YWRhdGEuYWxpYXNlc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FsaWFzZXMnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXRhZGF0YS5hbGlhc2VzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogbWV0YWRhdGEuYWxpYXNlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FsaWFzZXMnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaSBubyBoYXkgYWxpYXMsIGludGVudGEgb2J0ZW5lciBlbCB0XHUwMEVEdHVsb1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy50aXR1bG8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRpdGxlOiBtZXRhZGF0YS50aXR1bG8sXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ3RpdHVsbydcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaSBubyBoYXkgYWxpYXMgbmkgdFx1MDBFRHR1bG8sIHVzYSBzb2xvIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgZGlzcGxheVRpdGxlOiBudWxsLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogJ2Jhc2VuYW1lJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIExvZ2dlci5lcnJvcihgRXJyb3IgZ2V0dGluZyB0aXRsZSBmb3IgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogbnVsbCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdlcnJvcidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHdhaXRGb3JNZXRhZGF0YShmaWxlOiBURmlsZSk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSAxMDtcbiAgICAgICAgICAgIGxldCBhdHRlbXB0cyA9IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoZWNrTWV0YWRhdGEgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlPy5mcm9udG1hdHRlciB8fCBhdHRlbXB0cyA+PSBtYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGNhY2hlPy5mcm9udG1hdHRlciB8fCB7fSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW1wdHMrKztcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChjaGVja01ldGFkYXRhLCAxMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNoZWNrTWV0YWRhdGEoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhcGxpY2FyIHNjcm9sbCBob3Jpem9udGFsIGEgdW4gZWxlbWVudG8gZGUgdFx1MDBFRHR1bG8gZGUgcGVzdGFcdTAwRjFhXG4gIHByaXZhdGUgYXBwbHlIb3Jpem9udGFsU2Nyb2xsVG9UYWIodGFiRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBBc2VndXJhciBxdWUgc29sbyBhcGxpY2Ftb3MgdW5hIHZlelxuICAgIGlmICh0YWJFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtZW5hYmxlZCcpID09PSAndHJ1ZScpIHJldHVybjtcbiAgICBcbiAgICAvLyBBbG1hY2VuYXIgZXN0aWxvcyBvcmlnaW5hbGVzIHBhcmEgcmVzdGF1cmFybG9zIGFsIGRlc2FjdGl2YXJcbiAgICBjb25zdCBvcmlnaW5hbFN0eWxlcyA9IHtcbiAgICAgICAgb3ZlcmZsb3c6IHRhYkVsZW1lbnQuc3R5bGUub3ZlcmZsb3csXG4gICAgICAgIHRleHRPdmVyZmxvdzogdGFiRWxlbWVudC5zdHlsZS50ZXh0T3ZlcmZsb3csXG4gICAgICAgIHdoaXRlU3BhY2U6IHRhYkVsZW1lbnQuc3R5bGUud2hpdGVTcGFjZSxcbiAgICAgICAgbWF4V2lkdGg6IHRhYkVsZW1lbnQuc3R5bGUubWF4V2lkdGgsXG4gICAgICAgIHRyYW5zaXRpb246IHRhYkVsZW1lbnQuc3R5bGUudHJhbnNpdGlvblxuICAgIH07XG4gICAgXG4gICAgLy8gRXN0YWJsZWNlciBlc3RpbG9zIGJhc2VcbiAgICB0YWJFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICB0YWJFbGVtZW50LnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcbiAgICB0YWJFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UgPSBcIm5vd3JhcFwiO1xuICAgIHRhYkVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSBcIjE1MHB4XCI7IC8vIEFqdXN0YWJsZSBzZWdcdTAwRkFuIG5lY2VzaWRhZGVzXG4gICAgdGFiRWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gXCJtYXgtd2lkdGggMC4zcyBlYXNlLWluLW91dFwiO1xuICAgIFxuICAgIC8vIENyZWFyIGhhbmRsZXIgcGFyYSBtb3VzZWVudGVyXG4gICAgY29uc3QgbW91c2VFbnRlckhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZ1bGxXaWR0aCA9IHRhYkVsZW1lbnQuc2Nyb2xsV2lkdGg7XG4gICAgICAgIHRhYkVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICAgICAgdGFiRWxlbWVudC5zdHlsZS50ZXh0T3ZlcmZsb3cgPSBcImNsaXBcIjtcbiAgICAgICAgdGFiRWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IE1hdGgubWluKGZ1bGxXaWR0aCwgMzAwKSArIFwicHhcIjsgLy8gTGltaXRhciBleHBhbnNpXHUwMEYzblxuICAgIH07XG4gICAgXG4gICAgLy8gQ3JlYXIgaGFuZGxlciBwYXJhIG1vdXNlbGVhdmVcbiAgICBjb25zdCBtb3VzZUxlYXZlSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgdGFiRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgICAgIHRhYkVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJlbGxpcHNpc1wiO1xuICAgICAgICB0YWJFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gXCIxNTBweFwiO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGFiRWxlbWVudC5zY3JvbGxMZWZ0ID0gMDsgfSwgMzAwKTsgLy8gUmV0cmFzYXIgcGFyYSBhbmltYWNpXHUwMEYzblxuICAgIH07XG4gICAgXG4gICAgLy8gQXNpZ25hciBldmVudCBsaXN0ZW5lcnNcbiAgICB0YWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIG1vdXNlRW50ZXJIYW5kbGVyKTtcbiAgICB0YWJFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIG1vdXNlTGVhdmVIYW5kbGVyKTtcbiAgICBcbiAgICAvLyBNYXJjYXIgZWxlbWVudG8gY29tbyBjb25maWd1cmFkb1xuICAgIHRhYkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLXNjcm9sbC1lbmFibGVkJywgJ3RydWUnKTtcbiAgICBcbiAgICAvLyBBbG1hY2VuYXIgcmVmZXJlbmNpYXMgcGFyYSBsaW1waWV6YVxuICAgIGlmICghdGhpcy5zY3JvbGxFbmFibGVkRWxlbWVudHMpIHRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzLnNldCh0YWJFbGVtZW50LCB7XG4gICAgICAgIG1vdXNlRW50ZXJIYW5kbGVyLFxuICAgICAgICBtb3VzZUxlYXZlSGFuZGxlcixcbiAgICAgICAgb3JpZ2luYWxTdHlsZXNcbiAgICB9KTtcbn1cblxuLy8gTVx1MDBFOXRvZG8gcGFyYSBsaW1waWFyIGVsIHNjcm9sbCBkZSB1biBlbGVtZW50b1xucHJpdmF0ZSByZW1vdmVIb3Jpem9udGFsU2Nyb2xsRnJvbVRhYih0YWJFbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgIGlmICghdGFiRWxlbWVudCB8fCAhdGhpcy5zY3JvbGxFbmFibGVkRWxlbWVudHMpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzLmdldCh0YWJFbGVtZW50KTtcbiAgICBpZiAoIWhhbmRsZXJzKSByZXR1cm47XG4gICAgXG4gICAgLy8gRWxpbWluYXIgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGFiRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBoYW5kbGVycy5tb3VzZUVudGVySGFuZGxlcik7XG4gICAgdGFiRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBoYW5kbGVycy5tb3VzZUxlYXZlSGFuZGxlcik7XG4gICAgXG4gICAgLy8gUmVzdGF1cmFyIGVzdGlsb3Mgb3JpZ2luYWxlc1xuICAgIE9iamVjdC5hc3NpZ24odGFiRWxlbWVudC5zdHlsZSwgaGFuZGxlcnMub3JpZ2luYWxTdHlsZXMpO1xuICAgIFxuICAgIC8vIExpbXBpYXIgbWFyY2FcbiAgICB0YWJFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtZW5hYmxlZCcpO1xuICAgIFxuICAgIC8vIEVsaW1pbmFyIGRlIGxhIGNvbGVjY2lcdTAwRjNuXG4gICAgdGhpcy5zY3JvbGxFbmFibGVkRWxlbWVudHMuZGVsZXRlKHRhYkVsZW1lbnQpO1xufVxuXG4vLyBTb2JyZXNjcml0dXJhIGRlbCBtXHUwMEU5dG9kbyB1cGRhdGVUYWJcbmFzeW5jIHVwZGF0ZVRhYihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XG4gICAgaWYgKCEobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB8fCAhbGVhZi52aWV3LmZpbGUpIHJldHVybjtcblxuICAgIGNvbnN0IHsgZGlzcGxheVRpdGxlLCBzb3VyY2UgfSA9IGF3YWl0IHRoaXMuZ2V0UHJlZmVycmVkVGl0bGVXaXRoU291cmNlKGxlYWYudmlldy5maWxlKTtcbiAgICBpZiAoZGlzcGxheVRpdGxlKSB7XG4gICAgICAgIC8vIERldGVybWluYXIgZWwgZm9ybWF0byBkZWwgdFx1MDBFRHR1bG8gc2VnXHUwMEZBbiBsYSBsXHUwMEYzZ2ljYSBleGlzdGVudGVcbiAgICAgICAgbGV0IGZvcm1hdHRlZFRpdGxlO1xuICAgICAgICBpZiAoc291cmNlID09PSAnYWxpYXNlcy1zcGVjaWFsJyB8fCBzb3VyY2UgPT09ICdhbGlhc2VzLXR3bycpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFRpdGxlID0gZGlzcGxheVRpdGxlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9ybWF0dGVkVGl0bGUgPSBgJHtsZWFmLnZpZXcuZmlsZS5iYXNlbmFtZX0gLyAke2Rpc3BsYXlUaXRsZX1gO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFc3RhYmxlY2VyIGVsIHRcdTAwRUR0dWxvXG4gICAgICAgIGxlYWYudmlldy50aXRsZUVsLmlubmVyVGV4dCA9IGZvcm1hdHRlZFRpdGxlO1xuICAgICAgICBcbiAgICAgICAgaWYgKGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsKSB7XG4gICAgICAgICAgICBsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbC5pbm5lclRleHQgPSBmb3JtYXR0ZWRUaXRsZTtcbiAgICAgICAgICAgIC8vIEFwbGljYXIgY29tcG9ydGFtaWVudG8gZGUgc2Nyb2xsIGhvcml6b250YWxcbiAgICAgICAgICAgIHRoaXMuYXBwbHlIb3Jpem9udGFsU2Nyb2xsVG9UYWIobGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBNXHUwMEU5dG9kbyBwYXJhIGxpbXBpYXIgcmVjdXJzb3MgYWwgZGVzYWN0aXZhclxuY2xlYW51cFNjcm9sbEhhbmRsZXJzKCkge1xuICAgIGlmICghdGhpcy5zY3JvbGxFbmFibGVkRWxlbWVudHMpIHJldHVybjtcbiAgICBcbiAgICB0aGlzLnNjcm9sbEVuYWJsZWRFbGVtZW50cy5mb3JFYWNoKChoYW5kbGVycywgZWxlbWVudCkgPT4ge1xuICAgICAgICB0aGlzLnJlbW92ZUhvcml6b250YWxTY3JvbGxGcm9tVGFiKGVsZW1lbnQpO1xuICAgIH0pO1xuICAgIFxuICAgIHRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzLmNsZWFyKCk7XG59XG5cbi8vIFNvYnJlc2NyaWJpciByZXN0b3JlRGVmYXVsdFRpdGxlcyBwYXJhIGluY2x1aXIgbGEgbGltcGllemFcbnJlc3RvcmVEZWZhdWx0VGl0bGVzKCkge1xuICAgIC8vIExpbXBpYXIgbWFuZWphZG9yZXMgZGUgc2Nyb2xsXG4gICAgdGhpcy5jbGVhbnVwU2Nyb2xsSGFuZGxlcnMoKTtcbiAgICBcbiAgICAvLyBSZXN0YXVyYXIgdFx1MDBFRHR1bG9zIGNvbW8gYW50ZXNcbiAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUpIHtcbiAgICAgICAgICAgIGxlYWYudmlldy50aXRsZUVsLmlubmVyVGV4dCA9IGxlYWYudmlldy5maWxlLmJhc2VuYW1lO1xuICAgICAgICAgICAgaWYgKGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsKSB7XG4gICAgICAgICAgICAgICAgbGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuaW5uZXJUZXh0ID0gbGVhZi52aWV3LmZpbGUuYmFzZW5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4gICAgXG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3ZpZXdzL0N1c3RvbU1hcmtkb3duVmlldy50c1xuaW1wb3J0IHsgTWFya2Rvd25WaWV3LCBXb3Jrc3BhY2VMZWFmIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgQ3VzdG9tTWFya2Rvd25WaWV3IGV4dGVuZHMgTWFya2Rvd25WaWV3IHtcbiAgICBwcml2YXRlIGN1c3RvbVRpdGxlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbVRpdGxlIHx8IHN1cGVyLmdldERpc3BsYXlUZXh0KCk7XG4gICAgfVxuXG4gICAgc2V0Q3VzdG9tVGl0bGUodGl0bGU6IHN0cmluZyB8IG51bGwpIHtcbiAgICAgICAgdGhpcy5jdXN0b21UaXRsZSA9IHRpdGxlO1xuICAgICAgICB0aGlzLmxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLnRleHRDb250ZW50ID0gdGl0bGUgfHwgdGhpcy5maWxlPy5iYXNlbmFtZSB8fCAnJztcbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3V0aWxzL2xvZ2dlci50c1xuZXhwb3J0IGNsYXNzIExvZ2dlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgUFJFRklYID0gJ1x1RDgzQ1x1REZGN1x1RkUwRiBbVGFiVGl0bGVdJztcbiAgICBcbiAgICBzdGF0aWMgZGVidWcobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBpbmZvKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS5pbmZvKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyBlcnJvcihtZXNzYWdlOiBzdHJpbmcsIGVycm9yPzogYW55KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7dGhpcy5QUkVGSVh9ICR7bWVzc2FnZX1gLCBlcnJvciB8fCAnJyk7XG4gICAgfVxuICAgIFxuICAgIHN0YXRpYyB3YXJuKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS53YXJuKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgLi4uYXJncyk7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHNcbmltcG9ydCB7IFRhYlRpdGxlU2V0dGluZ3MgfSBmcm9tICcuLi9pbnRlcmZhY2VzL1RhYlRpdGxlU2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9UQUJfU0VUVElOR1M6IFRhYlRpdGxlU2V0dGluZ3MgPSB7XG4gICAgdGl0bGVEaXNwbGF5TW9kZTogJ2ZpbGVuYW1lJ1xufTsiLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvaW5kZXgudHNcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzLCBkZWFjdGl2YXRlVGFza01hbmFnZXJDb21tYW5kcyB9IGZyb20gJy4vY29tbWFuZHMnO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvVGFza01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHt9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBkZWFjdGl2YXRlVGFza01hbmFnZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9jb21tYW5kcy50c1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XG5cbmNsYXNzIFRhc2tEYXlzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBkaWFzOiBudW1iZXIgPSA3O1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luSW5zdGFuY2UuYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb3N0cmFyIHRhcmVhcyBwclx1MDBGM3hpbWFzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTlx1MDBGQW1lcm8gZGUgZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNb3N0cmFyIHRhcmVhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zIFggZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSgnNycpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFzID0gcGFyc2VJbnQodmFsdWUpIHx8IDc7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdNb3N0cmFyIHRhcmVhcycpXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbkluc3RhbmNlLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkubW9zdHJhclRhcmVhc1Byb3hpbWFzKHRoaXMuZGlhcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuLy8gQVx1MDBGMWFkaXIgbnVldmEgY2xhc2UgbW9kYWwgcGFyYSBjb25maWd1cmFyIGRcdTAwRURhcyBmdXR1cm9zXG5jbGFzcyBGdXR1cmVUYXNrc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZGlhczogbnVtYmVyID0gNztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBsdWdpbkluc3RhbmNlOiBNeVBsdWdpbixcbiAgICAgICAgcHJpdmF0ZSBkZWZhdWx0RGF5czogbnVtYmVyID0gN1xuICAgICkge1xuICAgICAgICBzdXBlcihwbHVnaW5JbnN0YW5jZS5hcHApO1xuICAgICAgICB0aGlzLmRpYXMgPSBkZWZhdWx0RGF5cztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdNb3N0cmFyIHRhcmVhcyBmdXR1cmFzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTlx1MDBGQW1lcm8gZGUgZFx1MDBFRGFzIGhhY2lhIGFkZWxhbnRlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNb3N0cmFyIHRhcmVhcyBwcm9ncmFtYWRhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zIFggZFx1MDBFRGFzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLmRlZmF1bHREYXlzLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFzID0gcGFyc2VJbnQodmFsdWUpIHx8IDc7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnRuID0+IGJ0blxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdNb3N0cmFyIHRhcmVhcycpXG4gICAgICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbkluc3RhbmNlLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkubW9zdHJhclRhcmVhc0Z1dHVyYXModGhpcy5kaWFzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBTY2hlZHVsZWRUYXNrRGF5c01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZGlhczogbnVtYmVyID0gNztcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIHBsdWdpbkluc3RhbmNlOiBNeVBsdWdpbiwgXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdERheXM6IG51bWJlciA9IDdcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGx1Z2luSW5zdGFuY2UuYXBwKTtcbiAgICAgICAgdGhpcy5kaWFzID0gZGVmYXVsdERheXM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTW9zdHJhciB0YXJlYXMgcHJvZ3JhbWFkYXMgcHJcdTAwRjN4aW1hcycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05cdTAwRkFtZXJvIGRlIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW9zdHJhciB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyBYIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5kZWZhdWx0RGF5cy50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhcyA9IHBhcnNlSW50KHZhbHVlKSB8fCA3O1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTW9zdHJhciB0YXJlYXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luSW5zdGFuY2UudGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTY2hlZHVsZWRQcm94aW1hcyh0aGlzLmRpYXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclRhc2tNYW5hZ2VyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBjb25zdCBtYW5hZ2VtZW50UGx1Z2luID0gcGx1Z2luIGFzIE15UGx1Z2luO1xuICAgIGNvbnN0IGNvbW1hbmRJZHM6IHN0cmluZ1tdID0gW107XG5cblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyB2ZW5jaWRhc1xuICAgIGNvbnN0IHRhcmVhc1ZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtdmVuY2lkYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBWZW5jaWRhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1ZlbmNpZGFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1ZlbmNpZGFzQ29tbWFuZC5pZCk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgcHJcdTAwRjN4aW1hc1xuICAgIGNvbnN0IHRhcmVhc1Byb3hpbWFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtcHJveGltYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBQclx1MDBGM3hpbWFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzUHJveGltYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzUHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBwclx1MDBGM3hpbWFzIGNvbiBkXHUwMEVEYXMgcGVyc29uYWxpemFkb3NcbiAgICBjb25zdCB0YXJlYXNQcm94aW1hc0N1c3RvbUNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXByb3hpbWFzLWN1c3RvbVwiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFByXHUwMEYzeGltYXMgKEVzcGVjaWZpY2FyIGRcdTAwRURhcylcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFRhc2tEYXlzTW9kYWwobWFuYWdlbWVudFBsdWdpbik7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNQcm94aW1hc0N1c3RvbUNvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGRlIGhveVxuICAgIGNvbnN0IHRhcmVhc0hveUNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWhveVwiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIHBhcmEgSG95XCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzSG95KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc0hveUNvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGNvbiBpbmljaW8gdmVuY2lkb1xuICAgIGNvbnN0IHRhcmVhc1N0YXJ0VmVuY2lkYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1zdGFydC12ZW5jaWRhc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFBlbmRpZW50ZXMgZGUgSW5pY2lhclwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1N0YXJ0VmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU3RhcnRWZW5jaWRhc0NvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHBvciBpbmljaWFyXG4gICAgY29uc3QgdGFyZWFzU3RhcnRQcm94aW1hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXN0YXJ0LXByb3hpbWFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgcG9yIEluaWNpYXIgKFZlbmNpZGFzIHkgUHJcdTAwRjN4aW1hcylcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTdGFydFByb3hpbWFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1N0YXJ0UHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgICAvLyBBXHUwMEYxYWRpciBudWV2byBjb21hbmRvIHBhcmEgdGFyZWFzIGZ1dHVyYXNcbiAgICAgY29uc3QgdGFyZWFzRnV0dXJhc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWZ1dHVyYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBGdXR1cmFzIFByb2dyYW1hZGFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBGdXR1cmVUYXNrc01vZGFsKG1hbmFnZW1lbnRQbHVnaW4pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzRnV0dXJhc0NvbW1hbmQuaWQpO1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIG51ZXZvIGNvbWFuZG8gcGFyYSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgY29uc3QgdGFyZWFzRW5FamVjdWNpb25Db21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtZW4tZWplY3VjaW9uXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIGVuIEVqZWN1Y2lcdTAwRjNuXCIsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzRW5FamVjdWNpb24oKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzRW5FamVjdWNpb25Db21tYW5kLmlkKTtcblxuICAgICAgICAvLyBDb21hbmRvIHBhcmEgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc1xuICAgIGNvbnN0IHRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtc2NoZWR1bGVkLXZlbmNpZGFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgU2NoZWR1bGVkIFZlbmNpZGFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzU2NoZWR1bGVkVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU2NoZWR1bGVkVmVuY2lkYXNDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSB0YXJlYXMgc2NoZWR1bGVkIHByXHUwMEYzeGltYXNcbiAgICBjb25zdCB0YXJlYXNTY2hlZHVsZWRQcm94aW1hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXNjaGVkdWxlZC1wcm94aW1hc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFNjaGVkdWxlZCBQclx1MDBGM3hpbWFzXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBTY2hlZHVsZWRUYXNrRGF5c01vZGFsKG1hbmFnZW1lbnRQbHVnaW4pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzU2NoZWR1bGVkUHJveGltYXNDb21tYW5kLmlkKTtcblxuICAgICAgLy8gQ29tYW5kbyBwYXJhIHRvZGFzIGxhcyB0YXJlYXMgdmVuY2lkYXNcbiAgICAgIGNvbnN0IHRvZGFzVGFyZWFzVmVuY2lkYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRvZGFzLXRhcmVhcy12ZW5jaWRhc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVG9kYXMgbGFzIFRhcmVhcyBWZW5jaWRhcyAoRHVlLCBTY2hlZHVsZWQsIFN0YXJ0KVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godG9kYXNUYXJlYXNWZW5jaWRhc0NvbW1hbmQuaWQpO1xuXG4gICAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgY29uIGRlcGVuZGVuY2lhc1xuICAgICAgY29uc3QgdGFyZWFzRGVwZW5kaWVudGVzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtZGVwZW5kaWVudGVzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgY29uIERlcGVuZGVuY2lhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0RlcGVuZGllbnRlcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNEZXBlbmRpZW50ZXNDb21tYW5kLmlkKTtcblxuICAgIGNvbnN0IHRhcmVhc1BlcnNvbmFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtcGVyc29uYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBwb3IgUGVyc29uYVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1BlcnNvbmFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1BlcnNvbmFzQ29tbWFuZC5pZCk7XG5cblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBudWV2byBjb21hbmRvIHBhcmEgdGFyZWFzIHBvciBjb250ZXh0b1xuICAgICAgICBjb25zdCB0YXJlYXNDb250ZXh0b3NDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtY29udGV4dG9zXCIsXG4gICAgICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIHBvciBDb250ZXh0b1wiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0NvbnRleHRvcygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNDb250ZXh0b3NDb21tYW5kLmlkKTtcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RlIGNvbWFuZG8gZGVudHJvIGRlIGxhIGZ1bmNpXHUwMEYzbiByZWdpc3RlclRhc2tNYW5hZ2VyQ29tbWFuZHM6XG5cbiAgICAgICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHNpbiBjbGFzaWZpY2FyXG4gICAgICAgIGNvbnN0IHRhcmVhc1NpbkNsYXNpZmljYXJDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtc2luLWNsYXNpZmljYXJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgU2luIENsYXNpZmljYXJcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTaW5DbGFzaWZpY2FyKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1NpbkNsYXNpZmljYXJDb21tYW5kLmlkKTtcblxuXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZW4gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvY29tbWFuZHMudHMsIGRlbnRybyBkZSBsYSBmdW5jaVx1MDBGM24gcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzXG5cbiAgICAgICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGRlIGJhbmRlamEgZGUgZW50cmFkYSAoI2luYm94KVxuICAgICAgICBjb25zdCB0YXJlYXNJbmJveENvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1pbmJveFwiLFxuICAgICAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBlbiBCYW5kZWphIGRlIEVudHJhZGEgKCNpbmJveClcIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNJbmJveCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNJbmJveENvbW1hbmQuaWQpO1xuXG5cbiAgICAvLyBHdWFyZGFyIGxvcyBJRHMgZGUgbG9zIGNvbWFuZG9zIGVuIGVsIHBsdWdpblxuICAgIChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkVGFza01hbmFnZXJDb21tYW5kSWRzID0gY29tbWFuZElkcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVUYXNrTWFuYWdlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZElkcyA9IChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkVGFza01hbmFnZXJDb21tYW5kSWRzO1xuICAgIGlmICghY29tbWFuZElkcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbW1hbmRJZHMuZm9yRWFjaChjb21tYW5kSWQgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1waWFyIGVsIGFycmF5IGRlIGNvbWFuZG9zIHJlZ2lzdHJhZG9zXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWRUYXNrTWFuYWdlckNvbW1hbmRJZHMgPSBbXTtcbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL2luZGV4LnRzXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhdmlld1F1ZXJ5TWFuYWdlciB9IGZyb20gJy4vRGF0YXZpZXdRdWVyeU1hbmFnZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcywgZGVhY3RpdmF0ZUNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XG5pbXBvcnQgeyBRdWVyeVJlbmRlcmVyIH0gZnJvbSAnLi9RdWVyeVJlbmRlcmVyJztcblxuZXhwb3J0IGNsYXNzIE1vZHVsb0RhdGF2aWV3UXVlcmllcyB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIHF1ZXJ5TWFuYWdlcjogRGF0YXZpZXdRdWVyeU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBxdWVyeVJlbmRlcmVyOiBRdWVyeVJlbmRlcmVyO1xuICAgIHByaXZhdGUgX2lzQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBJbmljaWFsaXphbmRvLi4uJyk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlciA9IG5ldyBEYXRhdmlld1F1ZXJ5TWFuYWdlcihwbHVnaW4pO1xuICAgICAgICB0aGlzLnF1ZXJ5UmVuZGVyZXIgPSBuZXcgUXVlcnlSZW5kZXJlcigpO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCk6IHZvaWQge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBJbmljaWFuZG8gYWN0aXZhY2lcdTAwRjNuLi4uJyk7XG4gICAgICAgIGlmICh0aGlzLl9pc0FjdGl2ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogWWEgZXN0XHUwMEUxIGFjdGl2bycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckRhdGF2aWV3RXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgdGhpcy5faXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogQWN0aXZhY2lcdTAwRjNuIGV4aXRvc2EnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vZHVsb0RhdGF2aWV3UXVlcmllczogRXJyb3IgZW4gYWN0aXZhY2lcdTAwRjNuOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEluaWNpYW5kbyBkZXNhY3RpdmFjaVx1MDBGM24uLi4nKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0FjdGl2ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogWWEgZXN0XHUwMEUxIGluYWN0aXZvJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckRhdGF2aWV3RXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IERlc2FjdGl2YWNpXHUwMEYzbiBleGl0b3NhJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEVycm9yIGVuIGRlc2FjdGl2YWNpXHUwMEYzbjonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNBY3RpdmU7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyUXVlcnkocXVlcnlUeXBlOiBzdHJpbmcsIHBhcmFtczoge1xuICAgICAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBkdjogYW55LFxuICAgICAgICBvcHRpb25zPzogYW55XG4gICAgfSkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VsIG1cdTAwRjNkdWxvIG5vIGVzdFx1MDBFMSBhY3Rpdm8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAocXVlcnlUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd0YXNrQnV0dG9ucyc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5xdWVyeVJlbmRlcmVyLnJlbmRlclRhc2tCdXR0b25zKHBhcmFtcy5jb250YWluZXIsIHBhcmFtcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaXBvIGRlIGNvbnN1bHRhIG5vIHNvcG9ydGFkbzogJHtxdWVyeVR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCkge1xuICAgICAgICAvLyBDcmVhciBvYmpldG8gZGUgZnVuY2lvbmVzIGFudGVzIGRlIHJlZ2lzdHJhcmxhc1xuICAgICAgICBjb25zdCBib3VuZEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgICAgIHJlbmRlclRhc2tCdXR0b25zOiAoZHY6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgb3B0aW9uczogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlSZW5kZXJlci5yZW5kZXJUYXNrQnV0dG9ucyhjb250YWluZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbmRlclByb2plY3RIaWVyYXJjaHk6IChkdjogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVJlbmRlcmVyLnJlbmRlclByb2plY3RIaWVyYXJjaHkoY29udGFpbmVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RyYXIgbGFzIGZ1bmNpb25lcyBlbiBlbCBlc3BhY2lvIGdsb2JhbFxuICAgICAgICAod2luZG93IGFzIGFueSkuY3VzdG9tUXVlcmllcyA9IGJvdW5kRnVuY3Rpb25zO1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBFeHRlbnNpb25zIHJlZ2lzdHJhZGFzJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1bnJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCkge1xuICAgICAgICBkZWxldGUgKHdpbmRvdyBhcyBhbnkpLmN1c3RvbVF1ZXJpZXM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEV4dGVuc2lvbnMgZWxpbWluYWRhcycpO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL0RhdGF2aWV3UXVlcnlNYW5hZ2VyLnRzXG5pbXBvcnQgeyBQbHVnaW4sIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UXVlcnlNYW5hZ2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICAvLyBDYWNoZSBwYXJhIGFsbWFjZW5hciByZXN1bHRhZG9zIGRlIGNvbnN1bHRhcyBmcmVjdWVudGVzXG4gICAgcHJpdmF0ZSBxdWVyeUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHtcbiAgICAgICAgZGF0YTogYW55O1xuICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICAgICAgdHRsOiBudW1iZXI7XG4gICAgfT4oKTtcblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZWplY3V0YXIgY29uc3VsdGFzIGNvbiBjYWNoXHUwMEU5XG4gICAgYXN5bmMgZXhlY3V0ZVF1ZXJ5KHF1ZXJ5S2V5OiBzdHJpbmcsIHF1ZXJ5Rm46ICgpID0+IFByb21pc2U8YW55PiwgdHRsID0gNjAwMDApIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5xdWVyeUNhY2hlLmdldChxdWVyeUtleSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAgICAgaWYgKGNhY2hlZCAmJiBub3cgLSBjYWNoZWQudGltZXN0YW1wIDwgY2FjaGVkLnR0bCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlGbigpO1xuICAgICAgICB0aGlzLnF1ZXJ5Q2FjaGUuc2V0KHF1ZXJ5S2V5LCB7XG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5vdyxcbiAgICAgICAgICAgIHR0bFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbGltcGlhciBjYWNoXHUwMEU5XG4gICAgY2xlYXJDYWNoZShxdWVyeUtleT86IHN0cmluZykge1xuICAgICAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlDYWNoZS5kZWxldGUocXVlcnlLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUNhY2hlLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcy9jb21tYW5kcy50c1xuaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgLy8gQ29tYW5kbyBwYXJhIGxpbXBpYXIgZWwgY2FjaFx1MDBFOSBkZSBjb25zdWx0YXNcbiAgICBjb25zdCBjbGVhckNhY2hlQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdjbGVhci1kYXRhdmlldy1xdWVyaWVzLWNhY2hlJyxcbiAgICAgICAgbmFtZTogJ0xpbXBpYXIgY2FjaFx1MDBFOSBkZSBjb25zdWx0YXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJbnN0YW5jZSA9IChwbHVnaW4gYXMgYW55KS5tb2R1bG9EYXRhdmlld1F1ZXJpZXM7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZUluc3RhbmNlPy5xdWVyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlSW5zdGFuY2UucXVlcnlNYW5hZ2VyLmNsZWFyQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ2FjaFx1MDBFOSBkZSBjb25zdWx0YXMgbGltcGlhZG8nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGxpbXBpYXIgY2FjaFx1MDBFOTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgbGltcGlhciBjYWNoXHUwMEU5IGRlIGNvbnN1bHRhcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgcmVjYXJnYXIgdG9kYXMgbGFzIGNvbnN1bHRhcyBhY3RpdmFzXG4gICAgY29uc3QgcmVsb2FkUXVlcmllc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAncmVsb2FkLWRhdGF2aWV3LXF1ZXJpZXMnLFxuICAgICAgICBuYW1lOiAnUmVjYXJnYXIgY29uc3VsdGFzIGFjdGl2YXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJbnN0YW5jZSA9IChwbHVnaW4gYXMgYW55KS5tb2R1bG9EYXRhdmlld1F1ZXJpZXM7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZUluc3RhbmNlPy5xdWVyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlSW5zdGFuY2UuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICBhcHAud29ya3NwYWNlLnRyaWdnZXIoJ2RhdGF2aWV3OnJlZnJlc2gtdmlld3MnKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29uc3VsdGFzIHJlY2FyZ2FkYXMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHJlY2FyZ2FyIGNvbnN1bHRhczonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgcmVjYXJnYXIgY29uc3VsdGFzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdHJhciBsb3MgSURzIGRlIGxvcyBjb21hbmRvcyBwYXJhIHBvZGVyIGRlc2FjdGl2YXJsb3MgZGVzcHVcdTAwRTlzXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWREYXRhdmlld1F1ZXJ5Q29tbWFuZElkcyA9IFtcbiAgICAgICAgY2xlYXJDYWNoZUNvbW1hbmQuaWQsXG4gICAgICAgIHJlbG9hZFF1ZXJpZXNDb21tYW5kLmlkXG4gICAgXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmRJZHMgPSAocGx1Z2luIGFzIGFueSkucmVnaXN0ZXJlZERhdGF2aWV3UXVlcnlDb21tYW5kSWRzO1xuICAgIGlmICghY29tbWFuZElkcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbW1hbmRJZHMuZm9yRWFjaCgoY29tbWFuZElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gTGltcGlhciBlbCBhcnJheSBkZSBjb21hbmRvcyByZWdpc3RyYWRvc1xuICAgIChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkRGF0YXZpZXdRdWVyeUNvbW1hbmRJZHMgPSBbXTtcbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL1F1ZXJ5UmVuZGVyZXIudHNcbmV4cG9ydCBjbGFzcyBRdWVyeVJlbmRlcmVyIHtcbiAgICBhc3luYyByZW5kZXJUYXNrQnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ3Rhc2stYnV0dG9ucy1jb250YWluZXInLFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGdyaWQ7IGdyaWQtZ2FwOiA4cHg7IHBhZGRpbmc6IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogOHB4OycgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9ucy5zaG93VGl0bGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2g0Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQ0IgR2VzdGlcdTAwRjNuIGRlIFRhcmVhcycsXG4gICAgICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMCAwIDEycHggMDsnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICd0b2RheScsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUYXJlYXMgZGUgSG95JywgXG4gICAgICAgICAgICAgICAgaWNvbjogJ1x1RDgzRFx1RENDNScsIFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzRDQUY1MCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBhcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1wZXJzb25hbC1tYW5hZ2VtZW50J10udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNIb3koKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICdvdmVyZHVlJywgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RhcmVhcyBWZW5jaWRhcycsIFxuICAgICAgICAgICAgICAgIGljb246ICdcdTI2QTBcdUZFMEYnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmNDQzMzYnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzVmVuY2lkYXMoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICd1cGNvbWluZycsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUYXJlYXMgUHJcdTAwRjN4aW1hcycsIFxuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0NcdURGQUYnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMyMTk2RjMnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzUHJveGltYXMoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICdzdGFydCcsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUb2RhcyBsYXMgVmVuY2lkYXMnLCBcbiAgICAgICAgICAgICAgICBpY29uOiAnXHVEODNDXHVERjEzJywgXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRkY5ODAwJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGFwcC5wbHVnaW5zLnBsdWdpbnNbJ29ic2lkaWFuLXBlcnNvbmFsLW1hbmFnZW1lbnQnXS50YXJlYXNBUEkubW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXMoKVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkdyaWQgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTsgZ2FwOiA4cHg7JyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gYnV0dG9uR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidG4uY29sb3J9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBidXR0b24uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGJ0bi5pY29uIH0pO1xuICAgICAgICAgICAgYnV0dG9uLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBidG4udGV4dCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXZlbnRvcyBkZSBob3ZlclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDEuMSknO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMXB4KSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDEpJztcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEV2ZW50byBkZSBjbGljayBjb24gZmVlZGJhY2sgdmlzdWFsXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWN0dWFsaXphbmRvIHZpc3RhLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGJ0bi5hY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBlbiBhY2NpXHUwMEYzbiAke2J0bi5pZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIHRpbWVzdGFtcCBzaSBlc3RcdTAwRTEgaGFiaWxpdGFkb1xuICAgICAgICBpZiAob3B0aW9ucy5zaG93VGltZXN0YW1wKSB7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUwMERBbHRpbWEgYWN0dWFsaXphY2lcdTAwRjNuOiAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9YCxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ21hcmdpbi10b3A6IDhweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZW5kZXJQcm9qZWN0SGllcmFyY2h5KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgICAgIC8vIEltcGxlbWVudGFyIGN1YW5kbyBzZWEgbmVjZXNhcmlvXG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy90YXNrRXhlY3V0aW9uTmF2aWdhdG9yL2luZGV4LnRzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjZcbiAqIEF1dGhvcjogTW9kdWxlIENyZWF0b3JcbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBUYXNrRXhlY3V0aW9uTmF2aWdhdG9yTW9kdWxlIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YSBlbCBtXHUwMEYzZHVsbyByZWdpc3RyYW5kbyBsb3MgY29tYW5kb3NcbiAgICAgKi9cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvLCBhc2VndXJcdTAwRTFuZG9zZSBkZSBsaW1waWFyIHRvZG9zIGxvcyBjb21hbmRvcyByZWdpc3RyYWRvc1xuICAgICAqL1xuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy90YXNrRXhlY3V0aW9uTmF2aWdhdG9yL2NvbW1hbmRzLnRzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjZcbiAqIEF1dGhvcjogTW9kdWxlIENyZWF0b3JcbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgRWRpdG9yLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRhc2tFeGVjdXRpb25OYXZpZ2F0b3IgfSBmcm9tIFwiLi90YXNrRXhlY3V0aW9uTmF2aWdhdG9yXCI7XG5cbi8qKlxuICogUmVnaXN0cmEgbG9zIGNvbWFuZG9zIHJlbGFjaW9uYWRvcyBjb24gbGEgbmF2ZWdhY2lcdTAwRjNuIGRlIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICogQHBhcmFtIHBsdWdpbiBJbnN0YW5jaWEgZGVsIHBsdWdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tFeGVjdXRpb25OYXZpZ2F0b3IgPSBuZXcgVGFza0V4ZWN1dGlvbk5hdmlnYXRvcihwbHVnaW4pO1xuICAgIFxuICAgIC8vIENvbWFuZG8gcHJpbmNpcGFsIHBhcmEgbmF2ZWdhciBhIHRhcmVhc1xuICAgIGNvbnN0IG5hdmlnYXRvckNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm5hdmlnYXRlLXRvLWV4ZWN1dGlvbi10YXNrc1wiLFxuICAgICAgICBuYW1lOiBcIk5hdmVnYXIgYSB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGFza0V4ZWN1dGlvbk5hdmlnYXRvci5uYXZpZ2F0ZVRvVGFzaygpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgbmF2ZWdhciBhIGxhIHRhcmVhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gbmF2ZWdhciBhIGxhIHRhcmVhIHNlbGVjY2lvbmFkYS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiBlbCBwbHVnaW4gcGFyYSBwb2RlciBkZXNhY3RpdmFybG8gZGVzcHVcdTAwRTlzXG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZFRhc2tFeGVjdXRpb25OYXZpZ2F0b3JJRHMpIHtcbiAgICAgICAgcGx1Z2luLnJlZ2lzdGVyZWRUYXNrRXhlY3V0aW9uTmF2aWdhdG9ySURzID0gW107XG4gICAgfVxuICAgIHBsdWdpbi5yZWdpc3RlcmVkVGFza0V4ZWN1dGlvbk5hdmlnYXRvcklEcy5wdXNoKG5hdmlnYXRvckNvbW1hbmQuaWQpO1xufVxuXG4vKipcbiAqIERlc2FjdGl2YSBsb3MgY29tYW5kb3MgcmVnaXN0cmFkb3NcbiAqIEBwYXJhbSBwbHVnaW4gSW5zdGFuY2lhIGRlbCBwbHVnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRUYXNrRXhlY3V0aW9uTmF2aWdhdG9ySURzKSByZXR1cm47XG4gICAgXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRUYXNrRXhlY3V0aW9uTmF2aWdhdG9ySURzLmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliZSBlbCBjYWxsYmFjayBkZWwgY29tYW5kbyBwYXJhIHF1ZSBubyBoYWdhIG5hZGFcbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gTGltcGlhIGVsIGFycmF5IGRlIElEcyByZWdpc3RyYWRvc1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkVGFza0V4ZWN1dGlvbk5hdmlnYXRvcklEcyA9IFtdO1xufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy90YXNrRXhlY3V0aW9uTmF2aWdhdG9yL3Rhc2tFeGVjdXRpb25OYXZpZ2F0b3IudHNcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yNlxuICogQXV0aG9yOiBNb2R1bGUgQ3JlYXRvclxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNVxuICovXG5cbmltcG9ydCB7IEFwcCwgUGx1Z2luLCBURmlsZSwgTm90aWNlLCBFZGl0b3IsIE1hcmtkb3duVmlldyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2VsZWNjaW9uTW9kYWxUYXJlYXMgfSBmcm9tIFwiLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbFRhcmVhc1wiO1xuXG4vKipcbiAqIEludGVyZmF6IHBhcmEgcmVwcmVzZW50YXIgdW5hIHRhcmVhIGNvbiBzdSBpbmZvcm1hY2lcdTAwRjNuIGRlIHViaWNhY2lcdTAwRjNuXG4gKi9cbmludGVyZmFjZSBUYXNrSW5mbyB7XG4gICAgdGV4dDogc3RyaW5nOyAgICAgICAgICAgLy8gVGV4dG8gZGUgbGEgdGFyZWFcbiAgICBmaWxlOiBURmlsZTsgICAgICAgICAgICAvLyBBcmNoaXZvIGRvbmRlIHNlIGVuY3VlbnRyYSBsYSB0YXJlYVxuICAgIGxpbmVOdW1iZXI6IG51bWJlcjsgICAgIC8vIE5cdTAwRkFtZXJvIGRlIGxcdTAwRURuZWEgZG9uZGUgc2UgZW5jdWVudHJhIGxhIHRhcmVhXG4gICAgZGlzcGxheVRleHQ6IHN0cmluZzsgICAgLy8gVGV4dG8gZm9ybWF0ZWFkbyBwYXJhIG1vc3RyYXIgKGFsaWFzICsgdGV4dG8gZGUgbGEgdGFyZWEpXG59XG5cbmV4cG9ydCBjbGFzcyBUYXNrRXhlY3V0aW9uTmF2aWdhdG9yIHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE5hdmVnYSBhIGxhIHRhcmVhIHNlbGVjY2lvbmFkYSBwb3IgZWwgdXN1YXJpb1xuICAgICAqL1xuICAgIGFzeW5jIG5hdmlnYXRlVG9UYXNrKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gMS4gRW5jdWVudHJhIHRvZGFzIGxhcyB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5maW5kUGVuZGluZ1Rhc2tzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIDIuIFByZXBhcmEgbGFzIG9wY2lvbmVzIHBhcmEgZWwgbW9kYWxcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlPcHRpb25zID0gdGFza3MubWFwKHRhc2sgPT4gdGFzay5kaXNwbGF5VGV4dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDMuIE11ZXN0cmEgZWwgbW9kYWwgcGFyYSBzZWxlY2Npb25hciB1bmEgdGFyZWFcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJTZWxlY2Npb25hIHVuYSB0YXJlYSBwYXJhIG5hdmVnYXJcIjtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsTWVudSA9IG5ldyBTZWxlY2Npb25Nb2RhbFRhcmVhcyhcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICAgICAgZGlzcGxheU9wdGlvbnMsIFxuICAgICAgICAgICAgICAgIHRhc2tzLm1hcCgoXywgaW5kZXgpID0+IGluZGV4LnRvU3RyaW5nKCkpLFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBwYXJzZUludChhd2FpdCBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVGFzayA9IHRhc2tzW3NlbGVjdGVkSW5kZXhdO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIDQuIE5hdmVnYSBhbCBhcmNoaXZvIHkgbFx1MDBFRG5lYSBzZWxlY2Npb25hZGFcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wZW5GaWxlQXRMaW5lKHNlbGVjdGVkVGFzay5maWxlLCBzZWxlY3RlZFRhc2subGluZU51bWJlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgTmF2ZWdhbmRvIGEgbGEgdGFyZWEgZW4gJHtzZWxlY3RlZFRhc2suZmlsZS5iYXNlbmFtZX1gKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gVXN1YXJpbyBjZXJyXHUwMEYzIGVsIG1vZGFsIHNpbiBzZWxlY2Npb25hclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWNjaVx1MDBGM24gZGUgdGFyZWEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG5hdmVnYWNpXHUwMEYzbiBkZSB0YXJlYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5jdWVudHJhIHRvZGFzIGxhcyB0YXJlYXMgcGVuZGllbnRlcyAoY29uIGVzdGFkbyBbL10pIGVuIGxvcyBhcmNoaXZvc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgZmluZFBlbmRpbmdUYXNrcygpOiBQcm9taXNlPFRhc2tJbmZvW10+IHtcbiAgICAgICAgY29uc3QgdGFza3M6IFRhc2tJbmZvW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFeGNsdWlyIGFyY2hpdm9zIGVuIGNhcnBldGFzIGVzcGVjXHUwMEVEZmljYXNcbiAgICAgICAgY29uc3QgYXJjaGl2b3NSZWxldmFudGVzID0gYXJjaGl2b3MuZmlsdGVyKGFyY2hpdm8gPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmIFxuICAgICAgICAgICAgICAgICAgICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJFc3RydWN0dXJhL0dURC9TaXN0ZW1hIEdURC9TaXN0ZW1hXCIpICYmIFxuICAgICAgICAgICAgICAgICAgICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IGFyY2hpdm8gb2YgYXJjaGl2b3NSZWxldmFudGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZWFzID0gY29udGVuaWRvLnNwbGl0KFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE9idGllbmUgbG9zIGFsaWFzIGRlbCBhcmNoaXZvIHBhcmEgbW9zdHJhcmxvcyBqdW50byBjb24gbGEgdGFyZWFcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgICAgICAgICAgIGxldCBhbGlhc0Rpc3BsYXkgPSBcIlwiO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFsaWFzZXMgPSBtZXRhZGF0YS5mcm9udG1hdHRlci5hbGlhc2VzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYWxpYXNlcykpIGFsaWFzZXMgPSBbYWxpYXNlc107XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbGlhc2VzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlhc0Rpc3BsYXkgPSBhbGlhc2VzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFsaWFzZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzRGlzcGxheSA9IGFsaWFzZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2kgbm8gc2UgZW5jb250clx1MDBGMyBhbGlhcywgdXNhciBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICBpZiAoIWFsaWFzRGlzcGxheSkge1xuICAgICAgICAgICAgICAgICAgICBhbGlhc0Rpc3BsYXkgPSBhcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEJ1c2NhciB0YXJlYXMgcGVuZGllbnRlcyBbL10gZW4gY2FkYSBsXHUwMEVEbmVhXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lYXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWEgPSBsaW5lYXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lYS5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGltcGlhciBlbCB0ZXh0byBkZSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9UYXJlYSA9IGF3YWl0IHRoaXMubGltcGlhclRleHRvVGFyZWEobGluZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhciBlbCB0ZXh0byBkZSB2aXN1YWxpemFjaVx1MDBGM24gY29tYmluYW5kbyBlbCBhbGlhcyB5IGxhIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXNwbGF5VGV4dCA9IGAke2FsaWFzRGlzcGxheX0gLyAke3RleHRvVGFyZWF9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFza3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dG9UYXJlYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlOiBhcmNoaXZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVOdW1iZXI6IGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6IGRpc3BsYXlUZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgcHJvY2VzYXIgZWwgYXJjaGl2byAke2FyY2hpdm8ucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRhc2tzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpbXBpYSBlbCB0ZXh0byBkZSB1bmEgdGFyZWEgcGFyYSBtb3N0cmFybGEgZGUgZm9ybWEgbGVnaWJsZVxuICAgICAqIEBwYXJhbSB0aXR1bG8gVGV4dG8gY29tcGxldG8gZGUgbGEgbFx1MDBFRG5lYSBkZSBsYSB0YXJlYVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBTZSB0b21hIHNvbG8gbGEgcHJpbWVyYSBsXHUwMEVEbmVhXG4gICAgICAgICAgICBsZXQgdGV4dG9MaW1waW8gPSB0aXR1bG8uc3BsaXQoXCJcXG5cIilbMF07XG5cbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybWEgbGFzIHNlY2Npb25lcyBxdWUgZW1waWV6YW4gcG9yIFwiI1wiOlxuICAgICAgICAgICAgLy8gUG9yIGVqZW1wbG86IFwiI2N4L0dlc3RpXHUwMEYzblBlcnNvbmFsL1BsYW5TZW1hbmFsXCIgc2UgdHJhbnNmb3JtYSBlbiBcImN4X0dlc3Rpb25QZXJzb25hbF9QbGFuU2VtYW5hbFwiXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyMoW1xcdy0vXSspL2csIChtYXRjaCwgcDEpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdHJhbnNmb3JtYWRvID0gcDEucmVwbGFjZSgvXFwvL2csIFwiX1wiKTtcbiAgICAgICAgICAgICAgICAvLyBFbGltaW5hIGFjZW50b3MgdXNhbmRvIG5vcm1hbGl6YWNpXHUwMEYzbiBVbmljb2RlXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtYWRvID0gdHJhbnNmb3JtYWRvLm5vcm1hbGl6ZShcIk5GRFwiKS5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCBcIlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtYWRvO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEVsaW1pbmEgbG9zIGNhbXBvcyBkZSBlc3RpbG8gRGF0YXZpZXcsIHBvciBlamVtcGxvIFtjYW1wbzo6dmFsb3JdXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xcW1xcdys6OlteXFxdXStcXF0vZywgXCJcIik7XG5cbiAgICAgICAgICAgIC8vIEVsaW1pbmEgZWwgcGF0clx1MDBGM24gXCIgLSBbL11cIiBhbCBpbmljaW8gZGUgbGEgY2FkZW5hLCBjb24gcG9zaWJsZXMgZXNwYWNpb3NcbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCBcIlwiKTtcblxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgZW1vamlzIGRlIFRhc2tzIGp1bnRvIGNvbiBsYSBmZWNoYSBxdWUgdmllbmUgaW5tZWRpYXRhbWVudGUgZGVzcHVcdTAwRTlzLlxuICAgICAgICAgICAgLy8gU2UgYXN1bWUgcXVlIGxhIGZlY2hhIHRpZW5lIGZvcm1hdG8gWVlZWS1NTS1ERCwgb3BjaW9uYWxtZW50ZSBzZWd1aWRhIGRlIGhvcmEuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL1xccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9XFxzKlxcZHs0fS1cXGR7Mn0tXFxkezJ9KD86XFxzKlxcZHsyfTpcXGR7Mn0oPzo6XFxkezJ9KT8pPy9ndSxcbiAgICAgICAgICAgICAgICBcIlwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBFbGltaW5hIGN1YWxxdWllciBvdHJvIGVtb2ppIHF1ZSBxdWVkZVxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfS9ndSwgXCJcIik7XG5cbiAgICAgICAgICAgIC8vIEVsaW1pbmEgY3VhbHF1aWVyIGNvbnRlbmlkbyBxdWUgZXN0XHUwMEU5IGVudHJlIGNvcmNoZXRlcyBjdWFkcmFkb3MgKGluY2x1eWVuZG8gbG9zIGNvcmNoZXRlcylcbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTtcblxuICAgICAgICAgICAgLy8gUmVlbXBsYXphIGNhcmFjdGVyZXMgbm8gcGVybWl0aWRvcyBlbiBub21icmVzIGRlIGFyY2hpdm8gY29uIHVuIGd1aW9uIGJham9cbiAgICAgICAgICAgIGNvbnN0IGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MgPSAvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nO1xuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MsIFwiX1wiKTtcblxuICAgICAgICAgICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW9cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG5cbiAgICAgICAgICAgIHJlc29sdmUodGV4dG9MaW1waW8udHJpbSgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWJyZSB1biBhcmNoaXZvIHkgbmF2ZWdhIGEgdW5hIGxcdTAwRURuZWEgZXNwZWNcdTAwRURmaWNhXG4gICAgICogQHBhcmFtIGZpbGUgQXJjaGl2byBhIGFicmlyXG4gICAgICogQHBhcmFtIGxpbmUgTlx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYSBhIGxhIHF1ZSBuYXZlZ2FyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBvcGVuRmlsZUF0TGluZShmaWxlOiBURmlsZSwgbGluZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIEFicmUgZWwgYXJjaGl2byBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1c2NhIGxhIHZpc3RhIGRlbCBlZGl0b3IgeSBuYXZlZ2EgYSBsYSBsXHUwMEVEbmVhIGVzcGVjXHUwMEVEZmljYVxuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHZpZXcuZWRpdG9yO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQb3NpY2lvbmEgZWwgY3Vyc29yIGVuIGxhIGxcdTAwRURuZWEgZGVzZWFkYVxuICAgICAgICAgICAgY29uc3QgcG9zaXRpb24gPSB7IGxpbmU6IGxpbmUsIGNoOiAwIH07XG4gICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHBvc2l0aW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFjZSBzY3JvbGwgYSBsYSBsXHUwMEVEbmVhIHkgbGEgcmVzYWx0YVxuICAgICAgICAgICAgZWRpdG9yLnNjcm9sbEludG9WaWV3KHsgZnJvbTogcG9zaXRpb24sIHRvOiBwb3NpdGlvbiB9LCB0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2VsZWNjaW9uYSB0b2RhIGxhIGxcdTAwRURuZWEgcGFyYSBkZXN0YWNhcmxhIHZpc3VhbG1lbnRlXG4gICAgICAgICAgICBjb25zdCBsaW5lTGVuZ3RoID0gZWRpdG9yLmdldExpbmUobGluZSkubGVuZ3RoO1xuICAgICAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmUsIGNoOiAwIH0sXG4gICAgICAgICAgICAgICAgeyBsaW5lOiBsaW5lLCBjaDogbGluZUxlbmd0aCB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBc2VndXJhIHF1ZSBlbCBlZGl0b3IgdGllbmUgZWwgZm9jb1xuICAgICAgICAgICAgZWRpdG9yLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvbW9kdWxlLnRzXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhc2tOYXZpZ2F0b3JWaWV3IH0gZnJvbSAnLi92aWV3cy9UYXNrTmF2aWdhdG9yVmlldyc7XG5pbXBvcnQgeyBUYXNrSGllcmFyY2h5QnVpbGRlciB9IGZyb20gJy4vc2VydmljZXMvVGFza0hpZXJhcmNoeUJ1aWxkZXInO1xuaW1wb3J0IHsgVGFza0NsYXNzaWZpZXIgfSBmcm9tICcuL3NlcnZpY2VzL1Rhc2tDbGFzc2lmaWVyJztcbmltcG9ydCB7IFRhc2tQYXJzZXIgfSBmcm9tICcuL3NlcnZpY2VzL1Rhc2tQYXJzZXInO1xuaW1wb3J0IHsgRW50aXR5RGV0ZWN0b3IgfSBmcm9tICcuL3NlcnZpY2VzL0VudGl0eURldGVjdG9yJztcbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4vdXRpbHMvTmF2aWdhdGlvblV0aWxzJztcbmltcG9ydCB7IFRhc2tNYW5hZ2VySW50ZWdyYXRpb24gfSBmcm9tICcuL3NlcnZpY2VzL1Rhc2tNYW5hZ2VySW50ZWdyYXRpb24nO1xuXG4vKipcbiAqIENsYXNlIHByaW5jaXBhbCBwYXJhIGVsIG1cdTAwRjNkdWxvIGRlIG5hdmVnYWNpXHUwMEYzbiBkZSB0YXJlYXMgR1REXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrTmF2aWdhdG9yTW9kdWxlIHtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgVklFV19UWVBFID0gJ3Rhc2stbmF2aWdhdG9yLXZpZXcnO1xuICAgIHByaXZhdGUgaXNBY3RpdmF0ZWQgPSBmYWxzZTtcbiAgICBcbiAgICAvLyBTZXJ2aWNpb3NcbiAgICBwcml2YXRlIGhpZXJhcmNoeUJ1aWxkZXI6IFRhc2tIaWVyYXJjaHlCdWlsZGVyO1xuICAgIHByaXZhdGUgdGFza0NsYXNzaWZpZXI6IFRhc2tDbGFzc2lmaWVyO1xuICAgIHByaXZhdGUgdGFza1BhcnNlcjogVGFza1BhcnNlcjtcbiAgICBwcml2YXRlIGVudGl0eURldGVjdG9yOiBFbnRpdHlEZXRlY3RvcjtcbiAgICBwcml2YXRlIG5hdmlnYXRpb25VdGlsczogTmF2aWdhdGlvblV0aWxzO1xuICAgIHByaXZhdGUgdGFza01hbmFnZXJJbnRlZ3JhdGlvbjogVGFza01hbmFnZXJJbnRlZ3JhdGlvbjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYWxpemFyIHNlcnZpY2lvc1xuICAgICAgICB0aGlzLnRhc2tQYXJzZXIgPSBuZXcgVGFza1BhcnNlcigpO1xuICAgICAgICB0aGlzLmVudGl0eURldGVjdG9yID0gbmV3IEVudGl0eURldGVjdG9yKHBsdWdpbik7XG4gICAgICAgIHRoaXMuaGllcmFyY2h5QnVpbGRlciA9IG5ldyBUYXNrSGllcmFyY2h5QnVpbGRlcihwbHVnaW4pO1xuICAgICAgICB0aGlzLnRhc2tDbGFzc2lmaWVyID0gbmV3IFRhc2tDbGFzc2lmaWVyKCk7XG4gICAgICAgIHRoaXMubmF2aWdhdGlvblV0aWxzID0gbmV3IE5hdmlnYXRpb25VdGlscygpO1xuICAgICAgICB0aGlzLnRhc2tNYW5hZ2VySW50ZWdyYXRpb24gPSBuZXcgVGFza01hbmFnZXJJbnRlZ3JhdGlvbihwbHVnaW4pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBY3RpdmEgZWwgbVx1MDBGM2R1bG8gVGFza05hdmlnYXRvclxuICAgICAqL1xuICAgIGFjdGl2YXRlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc0FjdGl2YXRlZCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ0FjdGl2YW5kbyBtXHUwMEYzZHVsbyBUYXNrTmF2aWdhdG9yJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWdpc3RyYXIgbGEgdmlzdGFcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJWaWV3KFxuICAgICAgICAgICAgdGhpcy5WSUVXX1RZUEUsXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IFRhc2tOYXZpZ2F0b3JWaWV3KGxlYWYsIHRoaXMucGx1Z2luKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVnaXN0cmFyIGNvbWFuZG9zXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kcygpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pc0FjdGl2YXRlZCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERlc2FjdGl2YSBlbCBtXHUwMEYzZHVsbyBUYXNrTmF2aWdhdG9yXG4gICAgICovXG4gICAgZGVhY3RpdmF0ZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZhdGVkKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnRGVzYWN0aXZhbmRvIG1cdTAwRjNkdWxvIFRhc2tOYXZpZ2F0b3InKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVsaW1pbmFyIGxhIHZpc3RhIHJlZ2lzdHJhZGFcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUodGhpcy5WSUVXX1RZUEUpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5pc0FjdGl2YXRlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb21wcnVlYmEgc2kgZWwgbVx1MDBGM2R1bG8gZXN0XHUwMEUxIGFjdGl2b1xuICAgICAqL1xuICAgIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0FjdGl2YXRlZDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVnaXN0cmEgbG9zIGNvbWFuZG9zIHBhcmEgZWwgbVx1MDBGM2R1bG9cbiAgICAgKi9cbiAgICBwcml2YXRlIHJlZ2lzdGVyQ29tbWFuZHMoKTogdm9pZCB7XG4gICAgICAgIC8vIENvbWFuZG8gcGFyYSBhYnJpciBlbCBuYXZlZ2Fkb3IgZGUgdGFyZWFzXG4gICAgICAgIHRoaXMucGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLXRhc2stbmF2aWdhdG9yJyxcbiAgICAgICAgICAgIG5hbWU6ICdBYnJpciBOYXZlZ2Fkb3IgZGUgVGFyZWFzIEdURCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5vcGVuVGFza05hdmlnYXRvclZpZXcoKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBkZSBsYSBub3RhIGFjdHVhbFxuICAgICAgICB0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc2hvdy1jdXJyZW50LW5vdGUtdGFza3MnLFxuICAgICAgICAgICAgbmFtZTogJ01vc3RyYXIgVGFyZWFzIGRlIGxhIE5vdGEgQWN0dWFsJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLm9wZW5UYXNrTmF2aWdhdG9yV2l0aEN1cnJlbnROb3RlKClcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgdmVuY2lkYXNcbiAgICAgICAgdGhpcy5wbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3Nob3ctb3ZlcmR1ZS10YXNrcycsXG4gICAgICAgICAgICBuYW1lOiAnTW9zdHJhciBUYXJlYXMgVmVuY2lkYXMnLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wZW5UYXNrTmF2aWdhdG9yVmlldygpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd0YXNrLW5hdmlnYXRvci1zaG93LW92ZXJkdWUnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBYnJlIGxhIHZpc3RhIGRlbCBuYXZlZ2Fkb3IgZGUgdGFyZWFzXG4gICAgICovXG4gICAgYXN5bmMgb3BlblRhc2tOYXZpZ2F0b3JWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlO1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGxhIHZpc3RhIHlhIGVzdFx1MDBFMSBhYmllcnRhXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhdmVzID0gd29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh0aGlzLlZJRVdfVFlQRSk7XG4gICAgICAgIGlmIChleGlzdGluZ0xlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBTaSB5YSBlc3RcdTAwRTEgYWJpZXJ0YSwgcmV2ZWxhcmxhXG4gICAgICAgICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihleGlzdGluZ0xlYXZlc1swXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGVzdFx1MDBFMSBhYmllcnRhLCBjcmVhciB1bmEgbnVldmEgaG9qYVxuICAgICAgICBjb25zdCBsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IHRoaXMuVklFV19UWVBFLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgd29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFicmUgbGEgdmlzdGEgZGVsIG5hdmVnYWRvciBjZW50cmFkYSBlbiBsYSBub3RhIGFjdHVhbFxuICAgICAqL1xuICAgIGFzeW5jIG9wZW5UYXNrTmF2aWdhdG9yV2l0aEN1cnJlbnROb3RlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBQcmltZXJvIGFicmltb3MgbGEgdmlzdGFcbiAgICAgICAgYXdhaXQgdGhpcy5vcGVuVGFza05hdmlnYXRvclZpZXcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIE9idGVuZW1vcyBsYSBub3RhIGFjdHVhbFxuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGN1cnJlbnRGaWxlKSB7XG4gICAgICAgICAgICAvLyBFbWl0aW1vcyB1biBldmVudG8gcGVyc29uYWxpemFkbyBwYXJhIHF1ZSBsYSB2aXN0YSBzZSBjZW50cmUgZW4gZXN0YSBub3RhXG4gICAgICAgICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGFzay1uYXZpZ2F0b3ItZm9jdXMtZW50aXR5Jywge1xuICAgICAgICAgICAgICAgIGRldGFpbDogeyBmaWxlUGF0aDogY3VycmVudEZpbGUucGF0aCB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUHJvcG9yY2lvbmEgZWwgY29uc3RydWN0b3IgZGUgamVyYXJxdVx1MDBFRGEgYSBvdHJvcyBjb21wb25lbnRlc1xuICAgICAqL1xuICAgIGdldEhpZXJhcmNoeUJ1aWxkZXIoKTogVGFza0hpZXJhcmNoeUJ1aWxkZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWVyYXJjaHlCdWlsZGVyO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBQcm9wb3JjaW9uYSBlbCBjbGFzaWZpY2Fkb3IgZGUgdGFyZWFzIGEgb3Ryb3MgY29tcG9uZW50ZXNcbiAgICAgKi9cbiAgICBnZXRUYXNrQ2xhc3NpZmllcigpOiBUYXNrQ2xhc3NpZmllciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tDbGFzc2lmaWVyO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBQcm9wb3JjaW9uYSBlbCBhbmFsaXphZG9yIGRlIHRhcmVhcyBhIG90cm9zIGNvbXBvbmVudGVzXG4gICAgICovXG4gICAgZ2V0VGFza1BhcnNlcigpOiBUYXNrUGFyc2VyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFza1BhcnNlcjtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUHJvcG9yY2lvbmEgZWwgZGV0ZWN0b3IgZGUgZW50aWRhZGVzIGEgb3Ryb3MgY29tcG9uZW50ZXNcbiAgICAgKi9cbiAgICBnZXRFbnRpdHlEZXRlY3RvcigpOiBFbnRpdHlEZXRlY3RvciB7XG4gICAgICAgIHJldHVybiB0aGlzLmVudGl0eURldGVjdG9yO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBQcm9wb3JjaW9uYSBsYXMgdXRpbGlkYWRlcyBkZSBuYXZlZ2FjaVx1MDBGM24gYSBvdHJvcyBjb21wb25lbnRlc1xuICAgICAqL1xuICAgIGdldE5hdmlnYXRpb25VdGlscygpOiBOYXZpZ2F0aW9uVXRpbHMge1xuICAgICAgICByZXR1cm4gdGhpcy5uYXZpZ2F0aW9uVXRpbHM7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFByb3BvcmNpb25hIGxhIGludGVncmFjaVx1MDBGM24gY29uIGVsIGdlc3RvciBkZSB0YXJlYXMgYSBvdHJvcyBjb21wb25lbnRlc1xuICAgICAqL1xuICAgIGdldFRhc2tNYW5hZ2VySW50ZWdyYXRpb24oKTogVGFza01hbmFnZXJJbnRlZ3JhdGlvbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhc2tNYW5hZ2VySW50ZWdyYXRpb247XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3ZpZXdzL1Rhc2tOYXZpZ2F0b3JWaWV3LnRzXG5pbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhc2tIaWVyYXJjaHlCdWlsZGVyIH0gZnJvbSAnLi4vc2VydmljZXMvVGFza0hpZXJhcmNoeUJ1aWxkZXInO1xuaW1wb3J0IHsgVGFza0NsYXNzaWZpZXIgfSBmcm9tICcuLi9zZXJ2aWNlcy9UYXNrQ2xhc3NpZmllcic7XG5pbXBvcnQgeyBUYXNrUGFyc2VyIH0gZnJvbSAnLi4vc2VydmljZXMvVGFza1BhcnNlcic7XG5pbXBvcnQgeyBFbnRpdHlEZXRlY3RvciB9IGZyb20gJy4uL3NlcnZpY2VzL0VudGl0eURldGVjdG9yJztcbmltcG9ydCB7IFZpZXdSZW5kZXJlciB9IGZyb20gJy4uL2NvbXBvbmVudHMvVmlld1JlbmRlcmVyJztcbmltcG9ydCB7IEZpbHRlclBhbmVsIH0gZnJvbSAnLi4vY29tcG9uZW50cy9GaWx0ZXJQYW5lbCc7XG5pbXBvcnQgeyBIaWVyYXJjaHlWaWV3TW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvSGllcmFyY2h5Vmlld01vZGVsJztcblxuZXhwb3J0IGNsYXNzIFRhc2tOYXZpZ2F0b3JWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBoaWVyYXJjaHlCdWlsZGVyOiBUYXNrSGllcmFyY2h5QnVpbGRlcjtcbiAgICBwcml2YXRlIHRhc2tDbGFzc2lmaWVyOiBUYXNrQ2xhc3NpZmllcjtcbiAgICBwcml2YXRlIHRhc2tQYXJzZXI6IFRhc2tQYXJzZXI7XG4gICAgcHJpdmF0ZSBlbnRpdHlEZXRlY3RvcjogRW50aXR5RGV0ZWN0b3I7XG4gICAgcHJpdmF0ZSB2aWV3UmVuZGVyZXI6IFZpZXdSZW5kZXJlcjtcbiAgICBwcml2YXRlIGZpbHRlclBhbmVsOiBGaWx0ZXJQYW5lbDtcbiAgICBwcml2YXRlIGN1cnJlbnRNb2RlbDogSGllcmFyY2h5Vmlld01vZGVsIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBhY3RpdmVGaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgcmVmcmVzaEludGVydmFsOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIFxuICAgICAgICAvLyBJbmljaWFsaXphciBzZXJ2aWNpb3NcbiAgICAgICAgdGhpcy50YXNrUGFyc2VyID0gbmV3IFRhc2tQYXJzZXIoKTtcbiAgICAgICAgdGhpcy5oaWVyYXJjaHlCdWlsZGVyID0gbmV3IFRhc2tIaWVyYXJjaHlCdWlsZGVyKHRoaXMucGx1Z2luKTtcbiAgICAgICAgdGhpcy50YXNrQ2xhc3NpZmllciA9IG5ldyBUYXNrQ2xhc3NpZmllcigpO1xuICAgICAgICB0aGlzLmVudGl0eURldGVjdG9yID0gbmV3IEVudGl0eURldGVjdG9yKHRoaXMucGx1Z2luKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYWxpemFyIGNvbXBvbmVudGVzIGRlIFVJXG4gICAgICAgIHRoaXMudmlld1JlbmRlcmVyID0gbmV3IFZpZXdSZW5kZXJlcigpO1xuICAgICAgICB0aGlzLmZpbHRlclBhbmVsID0gbmV3IEZpbHRlclBhbmVsKChmaWx0ZXJzKSA9PiB0aGlzLmFwcGx5RmlsdGVycyhmaWx0ZXJzKSk7XG4gICAgfVxuICAgIFxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAndGFzay1uYXZpZ2F0b3Itdmlldyc7XG4gICAgfVxuICAgIFxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnTmF2ZWdhZG9yIGRlIFRhcmVhcyBHVEQnO1xuICAgIH1cbiAgICBcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnY2hlY2ttYXJrJztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2UgZWplY3V0YSBjdWFuZG8gbGEgdmlzdGEgc2UgYWJyZVxuICAgICAqL1xuICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gTW9zdHJhciBtZW5zYWplIGRlIGNhcmdhIGluaWNpYWxcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYWRkQ2xhc3MoJ3Rhc2stbmF2aWdhdG9yLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnQ2FyZ2FuZG8gbmF2ZWdhZG9yIGRlIHRhcmVhcy4uLicsIGNsczogJ3Rhc2stbmF2aWdhdG9yLWxvYWRpbmcnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBhcmNoaXZvIGFjdGl2byBhY3R1YWxcbiAgICAgICAgdGhpcy5hY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnN0cnVpciBsYSB2aXN0YSBpbmljaWFsXG4gICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbmZpZ3VyYXIgYWN0dWFsaXphY2lcdTAwRjNuIHBlcmlcdTAwRjNkaWNhIChjYWRhIDIgbWludXRvcylcbiAgICAgICAgdGhpcy5yZWZyZXNoSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldygpO1xuICAgICAgICB9LCAxMjAwMDApO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGlzdGVuZXIgcGFyYSBjYW1iaW9zIGRlIGFyY2hpdm8gYWN0aXZvXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0FjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdBY3RpdmVGaWxlICYmIG5ld0FjdGl2ZUZpbGUgIT09IHRoaXMuYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUZpbGUgPSBuZXdBY3RpdmVGaWxlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZnJlc2hWaWV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2UgZWplY3V0YSBjdWFuZG8gbGEgdmlzdGEgc2UgY2llcnJhXG4gICAgICovXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBpbnRlcnZhbG8gZGUgYWN0dWFsaXphY2lcdTAwRjNuXG4gICAgICAgIGlmICh0aGlzLnJlZnJlc2hJbnRlcnZhbCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnJlZnJlc2hJbnRlcnZhbCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hJbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWN0dWFsaXphIGxhIHZpc3RhIGNvbiBsb3MgZGF0b3MgbVx1MDBFMXMgcmVjaWVudGVzXG4gICAgICovXG4gICAgYXN5bmMgcmVmcmVzaFZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBNb3N0cmFyIGluZGljYWRvciBkZSBjYXJnYVxuICAgICAgICAgICAgY29uc3QgbG9hZGluZ0luZGljYXRvciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgICAgIGNsczogJ3Rhc2stbmF2aWdhdG9yLWxvYWRpbmcnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdBY3R1YWxpemFuZG8gZGF0b3MuLi4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGV0ZWN0YXIgZWwgdGlwbyBkZSBlbnRpZGFkIGRlbCBhcmNoaXZvIGFjdGl2byBhY3R1YWwgKHNpIGV4aXN0ZSlcbiAgICAgICAgICAgIGxldCBlbnRpdHlDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHlDb250ZXh0ID0gYXdhaXQgdGhpcy5lbnRpdHlEZXRlY3Rvci5kZXRlY3RFbnRpdHlGcm9tRmlsZSh0aGlzLmFjdGl2ZUZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDb25zdHJ1aXIgZWwgbW9kZWxvIGRlIGplcmFycXVcdTAwRURhXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2RlbCA9IGF3YWl0IHRoaXMuaGllcmFyY2h5QnVpbGRlci5idWlsZEhpZXJhcmNoeShlbnRpdHlDb250ZXh0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xhc2lmaWNhciBsYXMgdGFyZWFzIHNlZ1x1MDBGQW4gcmVnbGFzIEdURFxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudE1vZGVsKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrQ2xhc3NpZmllci5jbGFzc2lmeVRhc2tzKHRoaXMuY3VycmVudE1vZGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTGltcGlhciBsYSB2aXN0YSBhY3R1YWxcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbmRlcml6YXIgbGEgbnVldmEgdmlzdGFcbiAgICAgICAgICAgIHRoaXMudmlld1JlbmRlcmVyLnJlbmRlcih0aGlzLmNvbnRlbnRFbCwgdGhpcy5jdXJyZW50TW9kZWwsIHRoaXMuZmlsdGVyUGFuZWwpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBhY3R1YWxpemFyIHZpc3RhIGRlIFRhc2tOYXZpZ2F0b3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xzOiAndGFzay1uYXZpZ2F0b3ItZXJyb3InLFxuICAgICAgICAgICAgICAgIHRleHQ6IGBFcnJvciBhbCBjYXJnYXIgZWwgbmF2ZWdhZG9yIGRlIHRhcmVhczogJHtlcnJvci5tZXNzYWdlfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFwbGljYSBsb3MgZmlsdHJvcyBzZWxlY2Npb25hZG9zIHBvciBlbCB1c3VhcmlvXG4gICAgICovXG4gICAgcHJpdmF0ZSBhcHBseUZpbHRlcnMoZmlsdGVyczogYW55KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50TW9kZWwpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vIEFwbGljYXIgZmlsdHJvcyBhbCBtb2RlbG8gYWN0dWFsXG4gICAgICAgIHRoaXMuY3VycmVudE1vZGVsLmFwcGx5RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlLXJlbmRlcml6YXIgbGEgdmlzdGEgY29uIGxvcyBmaWx0cm9zIGFwbGljYWRvc1xuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnZpZXdSZW5kZXJlci5yZW5kZXIodGhpcy5jb250ZW50RWwsIHRoaXMuY3VycmVudE1vZGVsLCB0aGlzLmZpbHRlclBhbmVsKTtcbiAgICB9XG59XG5cbi8vIERFVkVMT1BNRU5UX0NIRUNLUE9JTlQ6IFwibWFpbl92aWV3X2ltcGxlbWVudGF0aW9uXCJcbi8vIERlc2NyaXBjaVx1MDBGM246IEltcGxlbWVudGFjaVx1MDBGM24gZGUgbGEgdmlzdGEgcHJpbmNpcGFsIGRlbCBuYXZlZ2Fkb3IgZGUgdGFyZWFzXG4vLyBEZXBlbmRlbmNpYXM6IFRhc2tIaWVyYXJjaHlCdWlsZGVyLCBUYXNrQ2xhc3NpZmllciwgVGFza1BhcnNlciwgRW50aXR5RGV0ZWN0b3IsIFZpZXdSZW5kZXJlciwgRmlsdGVyUGFuZWwsIEhpZXJhcmNoeVZpZXdNb2RlbFxuLy8gRXN0YWRvOiBDb21wbGV0byIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3NlcnZpY2VzL1Rhc2tIaWVyYXJjaHlCdWlsZGVyLnRzXG5cbmltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFbnRpdHlEZXRlY3RvciB9IGZyb20gJy4vRW50aXR5RGV0ZWN0b3InO1xuaW1wb3J0IHsgVGFza1BhcnNlciB9IGZyb20gJy4vVGFza1BhcnNlcic7XG5pbXBvcnQgeyBJRW50aXR5LCBFbnRpdHlUeXBlLCBFbnRpdHkgfSBmcm9tICcuLi9tb2RlbHMvRW50aXR5JztcbmltcG9ydCB7IEhpZXJhcmNoeVZpZXdNb2RlbCB9IGZyb20gJy4uL21vZGVscy9IaWVyYXJjaHlWaWV3TW9kZWwnO1xuaW1wb3J0IHsgVGFzayB9IGZyb20gJy4uL21vZGVscy9UYXNrJztcblxuLyoqXG4gKiBTZXJ2aWNpb3MgcGFyYSBjb25zdHJ1aXIgbGEgamVyYXJxdVx1MDBFRGEgZGUgZW50aWRhZGVzIHkgdGFyZWFzXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrSGllcmFyY2h5QnVpbGRlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGVudGl0eURldGVjdG9yOiBFbnRpdHlEZXRlY3RvcjtcbiAgICBwcml2YXRlIHRhc2tQYXJzZXI6IFRhc2tQYXJzZXI7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZW50aXR5RGV0ZWN0b3IgPSBuZXcgRW50aXR5RGV0ZWN0b3IocGx1Z2luKTtcbiAgICAgICAgdGhpcy50YXNrUGFyc2VyID0gbmV3IFRhc2tQYXJzZXIoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29uc3RydXllIGxhIGplcmFycXVcdTAwRURhIGNvbXBsZXRhIGRlIGVudGlkYWRlcyB5IHRhcmVhc1xuICAgICAqIEBwYXJhbSBmb2N1c0VudGl0eSBFbnRpZGFkIGVuIGxhIHF1ZSBjZW50cmFyIGxhIGplcmFycXVcdTAwRURhIChvcGNpb25hbClcbiAgICAgKi9cbiAgICBhc3luYyBidWlsZEhpZXJhcmNoeShmb2N1c0VudGl0eTogSUVudGl0eSB8IG51bGwgPSBudWxsKTogUHJvbWlzZTxIaWVyYXJjaHlWaWV3TW9kZWw+IHtcbiAgICAgICAgY29uc3QgbW9kZWwgPSBuZXcgSGllcmFyY2h5Vmlld01vZGVsKCk7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gU2kgc2UgcHJvcG9yY2lvbmEgdW5hIGVudGlkYWQgZGUgZW5mb3F1ZSwgZXN0YWJsZWNlcmxhXG4gICAgICAgICAgICBtb2RlbC5mb2N1c0VudGl0eSA9IGZvY3VzRW50aXR5O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQYXNvIDE6IFJlY29waWxhciB0b2RhcyBsYXMgZW50aWRhZGVzIHJlbGV2YW50ZXNcbiAgICAgICAgICAgIGNvbnN0IGVudGl0aWVzID0gYXdhaXQgdGhpcy5jb2xsZWN0QWxsRW50aXRpZXMoKTtcbiAgICAgICAgICAgIG1vZGVsLmFsbEVudGl0aWVzID0gZW50aXRpZXM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBhc28gMjogQ29uc3RydWlyIGxhcyByZWxhY2lvbmVzIGVudHJlIGVudGlkYWRlc1xuICAgICAgICAgICAgdGhpcy5idWlsZEVudGl0eVJlbGF0aW9uc2hpcHMoZW50aXRpZXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQYXNvIDM6IERldGVybWluYXIgbGFzIGVudGlkYWRlcyByYVx1MDBFRHogc2VnXHUwMEZBbiBsYSBlbnRpZGFkIGRlIGVuZm9xdWVcbiAgICAgICAgICAgIG1vZGVsLnJvb3RFbnRpdGllcyA9IHRoaXMuZGV0ZXJtaW5lUm9vdEVudGl0aWVzKGVudGl0aWVzLCBmb2N1c0VudGl0eSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBhc28gNDogRXh0cmFlciB5IGFzaWduYXIgdGFyZWFzIGEgY2FkYSBlbnRpZGFkXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4dHJhY3RBbmRBc3NpZ25UYXNrcyhlbnRpdGllcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBtb2RlbDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb25zdHJ1aXIgbGEgamVyYXJxdVx1MDBFRGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJlY29waWxhIHRvZGFzIGxhcyBlbnRpZGFkZXMgZGVsIHNpc3RlbWFcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGNvbGxlY3RBbGxFbnRpdGllcygpOiBQcm9taXNlPElFbnRpdHlbXT4ge1xuICAgICAgICBjb25zdCBlbnRpdGllczogSUVudGl0eVtdID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRlbmVyIHRvZG9zIGxvcyBhcmNoaXZvcyBkZSBtYXJrZG93blxuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNhciBjYWRhIGFyY2hpdm9cbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIERldGVjdGFyIGVudGlkYWQgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBhd2FpdCB0aGlzLmVudGl0eURldGVjdG9yLmRldGVjdEVudGl0eUZyb21GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChlbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZW50aXRpZXMucHVzaChlbnRpdHkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgcHJvY2VzYXIgYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVhciBjb24gZWwgc2lndWllbnRlIGFyY2hpdm9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGVudGl0aWVzO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1eWUgbGFzIHJlbGFjaW9uZXMgZW50cmUgZW50aWRhZGVzXG4gICAgICovXG4gICAgcHJpdmF0ZSBidWlsZEVudGl0eVJlbGF0aW9uc2hpcHMoZW50aXRpZXM6IElFbnRpdHlbXSk6IHZvaWQge1xuICAgICAgICAvLyBDcmVhciB1biBtYXBhIHBhcmEgZmFjaWxpdGFyIGxhIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgY29uc3QgZW50aXR5TWFwID0gbmV3IE1hcDxzdHJpbmcsIElFbnRpdHk+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYXBlYXIgZW50aWRhZGVzIHBvciBydXRhIGRlIGFyY2hpdm9cbiAgICAgICAgZm9yIChjb25zdCBlbnRpdHkgb2YgZW50aXRpZXMpIHtcbiAgICAgICAgICAgIGVudGl0eU1hcC5zZXQoZW50aXR5LmZpbGUucGF0aCwgZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzYXIgY2FkYSBlbnRpZGFkIHBhcmEgZXN0YWJsZWNlciByZWxhY2lvbmVzXG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICAgICAgICB0aGlzLmVzdGFibGlzaEVudGl0eVJlbGF0aW9uc2hpcHMoZW50aXR5LCBlbnRpdHlNYXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEVzdGFibGVjZSBsYXMgcmVsYWNpb25lcyBkZSB1bmEgZW50aWRhZCBjb24gb3RyYXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGVzdGFibGlzaEVudGl0eVJlbGF0aW9uc2hpcHMoZW50aXR5OiBJRW50aXR5LCBlbnRpdHlNYXA6IE1hcDxzdHJpbmcsIElFbnRpdHk+KTogdm9pZCB7XG4gICAgICAgIC8vIFByb2Nlc2FyIGFzdW50byAocmVsYWNpXHUwMEYzbiBkaXJlY3RhIHBhZHJlLWhpam8pXG4gICAgICAgIGlmIChlbnRpdHkubWV0YWRhdGE/LmFzdW50bykge1xuICAgICAgICAgICAgY29uc3QgYXN1bnRvID0gZW50aXR5Lm1ldGFkYXRhLmFzdW50bztcbiAgICAgICAgICAgIGxldCBwYXJlbnRFbnRpdHkgPSBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhc3VudG8pKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyYXksIHRvbWFyIGVsIHByaW1lciBlbGVtZW50byBjb21vIHBhZHJlIHByaW5jaXBhbFxuICAgICAgICAgICAgICAgIGlmIChhc3VudG8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbnRpdHkgPSB0aGlzLmZpbmRFbnRpdHlCeVBhdGhPck5hbWUoYXN1bnRvWzBdLCBlbnRpdHlNYXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gc3RyaW5nLCBidXNjYXIgbGEgZW50aWRhZCBwYWRyZVxuICAgICAgICAgICAgICAgIHBhcmVudEVudGl0eSA9IHRoaXMuZmluZEVudGl0eUJ5UGF0aE9yTmFtZShhc3VudG8sIGVudGl0eU1hcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICAvLyBFc3RhYmxlY2VyIHJlbGFjaVx1MDBGM24gcGFkcmUtaGlqb1xuICAgICAgICAgICAgICAgIHBhcmVudEVudGl0eS5hZGRDaGlsZChlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIG5vIGhheSBhc3VudG8gZXhwbFx1MDBFRGNpdG8sIGludGVudGFyIGVzdGFibGVjZXIgcmVsYWNpb25lcyBiYXNhZGFzIGVuIG90cm9zIGNhbXBvc1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWxhY2lcdTAwRjNuIGNvbiBQcm95ZWN0byBHVERcbiAgICAgICAgICAgIGlmIChlbnRpdHkucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRFbnRpdGllcyA9IHRoaXMuZmluZEVudGl0aWVzQnlQYXRoT3JOYW1lKGVudGl0eS5wcm95ZWN0b0dURCwgZW50aXR5TWFwLCBFbnRpdHlUeXBlLlBST1lFQ1RPX0dURCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJlbnRFbnRpdHkgb2YgcGFyZW50RW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEVudGl0eSAmJiBwYXJlbnRFbnRpdHkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RW50aXR5LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbGFjaVx1MDBGM24gY29uIFByb3llY3RvIFFcbiAgICAgICAgICAgIGlmIChlbnRpdHkucHJveWVjdG9RICYmICFlbnRpdHkucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50RW50aXRpZXMgPSB0aGlzLmZpbmRFbnRpdGllc0J5UGF0aE9yTmFtZShlbnRpdHkucHJveWVjdG9RLCBlbnRpdHlNYXAsIEVudGl0eVR5cGUuUFJPWUVDVE9fUSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJlbnRFbnRpdHkgb2YgcGFyZW50RW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEVudGl0eSAmJiBwYXJlbnRFbnRpdHkgIT09IGVudGl0eSAmJiAhZW50aXR5LnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RW50aXR5LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbGFjaVx1MDBGM24gY29uIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXNcbiAgICAgICAgICAgIGlmIChlbnRpdHkuYXJlYUludGVyZXMgJiYgIWVudGl0eS5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRFbnRpdGllcyA9IHRoaXMuZmluZEVudGl0aWVzQnlQYXRoT3JOYW1lKGVudGl0eS5hcmVhSW50ZXJlcywgZW50aXR5TWFwLCBFbnRpdHlUeXBlLkFSRUFfSU5URVJFUyk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJlbnRFbnRpdHkgb2YgcGFyZW50RW50aXRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEVudGl0eSAmJiBwYXJlbnRFbnRpdHkgIT09IGVudGl0eSAmJiAhZW50aXR5LnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RW50aXR5LmFkZENoaWxkKGVudGl0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbGFjaVx1MDBGM24gY29uIFx1MDBDMXJlYSBkZSBWaWRhXG4gICAgICAgICAgICBpZiAoZW50aXR5LmFyZWFWaWRhICYmICFlbnRpdHkucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyZW50RW50aXRpZXMgPSB0aGlzLmZpbmRFbnRpdGllc0J5UGF0aE9yTmFtZShlbnRpdHkuYXJlYVZpZGEsIGVudGl0eU1hcCwgRW50aXR5VHlwZS5BUkVBX1ZJREEpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFyZW50RW50aXR5IG9mIHBhcmVudEVudGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbnRpdHkgJiYgcGFyZW50RW50aXR5ICE9PSBlbnRpdHkgJiYgIWVudGl0eS5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudEVudGl0eS5hZGRDaGlsZChlbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEJ1c2NhIHVuYSBlbnRpZGFkIHBvciBzdSBydXRhIG8gbm9tYnJlXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaW5kRW50aXR5QnlQYXRoT3JOYW1lKHBhdGhPck5hbWU6IHN0cmluZywgZW50aXR5TWFwOiBNYXA8c3RyaW5nLCBJRW50aXR5Pik6IElFbnRpdHkgfCBudWxsIHtcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGVzIHVuYSBydXRhIGRpcmVjdGFcbiAgICAgICAgaWYgKGVudGl0eU1hcC5oYXMocGF0aE9yTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlNYXAuZ2V0KHBhdGhPck5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb21wcm9iYXIgc2kgZXMgdW5hIHJ1dGEgY29uIC5tZFxuICAgICAgICBpZiAoZW50aXR5TWFwLmhhcyhwYXRoT3JOYW1lICsgJy5tZCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50aXR5TWFwLmdldChwYXRoT3JOYW1lICsgJy5tZCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBCdXNjYXIgcG9yIG5vbWJyZSBvIGFsaWFzXG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0eU1hcC52YWx1ZXMoKSkge1xuICAgICAgICAgICAgaWYgKGVudGl0eS5maWxlLmJhc2VuYW1lID09PSBwYXRoT3JOYW1lIHx8IFxuICAgICAgICAgICAgICAgIGVudGl0eS50aXRsZSA9PT0gcGF0aE9yTmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENvbXByb2JhciBzaSBoYXkgdW4gYWxpYXMgcXVlIGNvaW5jaWRhXG4gICAgICAgICAgICBpZiAoZW50aXR5Lm1ldGFkYXRhPy5hbGlhc2VzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNlcyA9IEFycmF5LmlzQXJyYXkoZW50aXR5Lm1ldGFkYXRhLmFsaWFzZXMpID8gXG4gICAgICAgICAgICAgICAgICAgIGVudGl0eS5tZXRhZGF0YS5hbGlhc2VzIDogW2VudGl0eS5tZXRhZGF0YS5hbGlhc2VzXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWxpYXNlcy5pbmNsdWRlcyhwYXRoT3JOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZW50aXR5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEJ1c2NhIGVudGlkYWRlcyBwb3Igc3UgcnV0YSBvIG5vbWJyZSwgY29tcGF0aWJsZSBjb24gYXJyYXlzXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaW5kRW50aXRpZXNCeVBhdGhPck5hbWUocGF0aHNPck5hbWVzOiBzdHJpbmcgfCBzdHJpbmdbXSwgZW50aXR5TWFwOiBNYXA8c3RyaW5nLCBJRW50aXR5PiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZFR5cGU/OiBFbnRpdHlUeXBlKTogSUVudGl0eVtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBJRW50aXR5W10gPSBbXTtcbiAgICAgICAgY29uc3Qgc2VhcmNoVmFsdWVzID0gQXJyYXkuaXNBcnJheShwYXRoc09yTmFtZXMpID8gcGF0aHNPck5hbWVzIDogW3BhdGhzT3JOYW1lc107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHNlYXJjaFZhbHVlcykge1xuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gdGhpcy5maW5kRW50aXR5QnlQYXRoT3JOYW1lKHZhbHVlLCBlbnRpdHlNYXApO1xuICAgICAgICAgICAgaWYgKGVudGl0eSAmJiAoIXJlcXVpcmVkVHlwZSB8fCBlbnRpdHkudHlwZSA9PT0gcmVxdWlyZWRUeXBlKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluYSBsYXMgZW50aWRhZGVzIHJhXHUwMEVEeiBzZWdcdTAwRkFuIGxhIGVudGlkYWQgZGUgZW5mb3F1ZVxuICAgICAqL1xuICAgIHByaXZhdGUgZGV0ZXJtaW5lUm9vdEVudGl0aWVzKGVudGl0aWVzOiBJRW50aXR5W10sIGZvY3VzRW50aXR5OiBJRW50aXR5IHwgbnVsbCk6IElFbnRpdHlbXSB7XG4gICAgICAgIGlmICghZm9jdXNFbnRpdHkpIHtcbiAgICAgICAgICAgIC8vIFNpIG5vIGhheSBlbnRpZGFkIGRlIGVuZm9xdWUsIGRldm9sdmVyIHRvZGFzIGxhcyBlbnRpZGFkZXMgc2luIHBhZHJlXG4gICAgICAgICAgICByZXR1cm4gZW50aXRpZXMuZmlsdGVyKGVudGl0eSA9PiAhZW50aXR5LnBhcmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNpIGhheSB1bmEgZW50aWRhZCBkZSBlbmZvcXVlLCBkZXRlcm1pbmFyIGVsIHN1Ylx1MDBFMXJib2xcbiAgICAgICAgY29uc3Qgcm9vdEVudGl0aWVzOiBJRW50aXR5W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGxhIGVudGlkYWQgZGUgZW5mb3F1ZSBjb21vIHJhXHUwMEVEelxuICAgICAgICByb290RW50aXRpZXMucHVzaChmb2N1c0VudGl0eSk7XG4gICAgICAgIFxuICAgICAgICAvLyBPcGNpb25hbG1lbnRlLCBidXNjYXIgZW50aWRhZGVzIGhlcm1hbmFzIChlbnRpZGFkZXMgY29uIGVsIG1pc21vIHBhZHJlKVxuICAgICAgICBpZiAoZm9jdXNFbnRpdHkucGFyZW50KSB7XG4gICAgICAgICAgICBjb25zdCBzaWJsaW5ncyA9IGVudGl0aWVzLmZpbHRlcihlbnRpdHkgPT4gXG4gICAgICAgICAgICAgICAgZW50aXR5ICE9PSBmb2N1c0VudGl0eSAmJiBcbiAgICAgICAgICAgICAgICBlbnRpdHkucGFyZW50ID09PSBmb2N1c0VudGl0eS5wYXJlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBsb3MgaGVybWFub3MgKG9wY2lvbmFsLCBzZWdcdTAwRkFuIGxvcyByZXF1aXNpdG9zIGVzcGVjXHUwMEVEZmljb3MpXG4gICAgICAgICAgICAvLyByb290RW50aXRpZXMucHVzaCguLi5zaWJsaW5ncyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByb290RW50aXRpZXM7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSB5IGFzaWduYSB0YXJlYXMgYSBjYWRhIGVudGlkYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGV4dHJhY3RBbmRBc3NpZ25UYXNrcyhlbnRpdGllczogSUVudGl0eVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEV4dHJhZXIgdGFyZWFzIGRlbCBhcmNoaXZvIGRlIGxhIGVudGlkYWRcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrcyA9IGF3YWl0IHRoaXMudGFza1BhcnNlci5leHRyYWN0VGFza3NGcm9tRmlsZShlbnRpdHkuZmlsZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXNpZ25hciBjYWRhIHRhcmVhIGEgbGEgZW50aWRhZFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xuICAgICAgICAgICAgICAgICAgICBlbnRpdHkuYWRkVGFzayh0YXNrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGV4dHJhZXIgdGFyZWFzIHBhcmEgJHtlbnRpdHkuZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gQ29udGludWFyIGNvbiBsYSBzaWd1aWVudGUgZW50aWRhZFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBERVZFTE9QTUVOVF9DSEVDS1BPSU5UOiBcImhpZXJhcmNoeV9idWlsZGVyXCJcbi8vIERlc2NyaXBjaVx1MDBGM246IFNlcnZpY2lvIHBhcmEgY29uc3RydWlyIGxhIGplcmFycXVcdTAwRURhIGRlIGVudGlkYWRlcyB5IHRhcmVhc1xuLy8gRXN0YWRvOiBDb21wbGV0byIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3NlcnZpY2VzL0VudGl0eURldGVjdG9yLnRzXG5cbmltcG9ydCB7IFRGaWxlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFbnRpdHlUeXBlLCBFbnRpdHlTdGF0ZSwgSUVudGl0eSwgY3JlYXRlRW50aXR5IH0gZnJvbSAnLi4vbW9kZWxzL0VudGl0eSc7XG5cbi8qKlxuICogU2VydmljaW8gcGFyYSBkZXRlY3RhciBlbCB0aXBvIGRlIGVudGlkYWQgZGUgdW4gYXJjaGl2b1xuICogeSBleHRyYWVyIHN1cyBtZXRhZGF0b3MgcmVsZXZhbnRlc1xuICovXG5leHBvcnQgY2xhc3MgRW50aXR5RGV0ZWN0b3Ige1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVjdGEgZWwgdGlwbyBkZSBlbnRpZGFkIGRlIHVuIGFyY2hpdm8geSBjcmVhIGxhIGluc3RhbmNpYSBjb3JyZXNwb25kaWVudGVcbiAgICAgKi9cbiAgICBhc3luYyBkZXRlY3RFbnRpdHlGcm9tRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8SUVudGl0eSB8IG51bGw+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgZWwgZnJvbnRtYXR0ZXIgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFtZXRhZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIG5vIGhheSBtZXRhZGF0b3MsIG5vIHBvZGVtb3MgZGV0ZXJtaW5hciBlbCB0aXBvXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlR2VuZXJpY0VudGl0eShmaWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5hciBlbCB0aXBvIGRlIGVudGlkYWQgdXNhbmRvIGVsIGNhbXBvICd0eXBlJyBkZWwgZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eVR5cGUgPSB0aGlzLmRldGVybWluZUVudGl0eVR5cGUobWV0YWRhdGEudHlwZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV4dHJhZXIgZWwgaWRlbnRpZmljYWRvciAocHJlZmVyaXIgJ2lkJyBkZWwgZnJvbnRtYXR0ZXIgbyB1c2FyIGVsIG5vbWJyZSBkZWwgYXJjaGl2bylcbiAgICAgICAgICAgIGNvbnN0IGlkID0gbWV0YWRhdGEuaWQgfHwgZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFlciBlbCB0XHUwMEVEdHVsbyAocHJlZmVyaXIgJ3RpdHVsbycgZGVsIGZyb250bWF0dGVyLCBsdWVnbyAnYWxpYXNlc1swXScsIG8gdXNhciBlbCBub21icmUgZGVsIGFyY2hpdm8pXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IG1ldGFkYXRhLnRpdHVsbyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKG1ldGFkYXRhLmFsaWFzZXMgJiYgbWV0YWRhdGEuYWxpYXNlcy5sZW5ndGggPiAwID8gbWV0YWRhdGEuYWxpYXNlc1swXSA6IGZpbGUuYmFzZW5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFeHRyYWVyIGxhIGRlc2NyaXBjaVx1MDBGM25cbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gbWV0YWRhdGEuZGVzY3JpcGNpb24gfHwgJyc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGVybWluYXIgZWwgZXN0YWRvXG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuZGV0ZXJtaW5lRW50aXR5U3RhdGUobWV0YWRhdGEuZXN0YWRvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFlciBvdHJvcyBtZXRhZGF0b3MgZXNwZWNcdTAwRURmaWNvcyBzZWdcdTAwRkFuIGVsIHRpcG9cbiAgICAgICAgICAgIGNvbnN0IHNwZWNpZmljTWV0YWRhdGEgPSB0aGlzLmV4dHJhY3RTcGVjaWZpY01ldGFkYXRhKGVudGl0eVR5cGUsIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgbGEgZW50aWRhZCBjb24gbG9zIGRhdG9zIGV4dHJhXHUwMEVEZG9zXG4gICAgICAgICAgICBjb25zdCBlbnRpdHkgPSBjcmVhdGVFbnRpdHkoXG4gICAgICAgICAgICAgICAgZW50aXR5VHlwZSxcbiAgICAgICAgICAgICAgICBpZC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgc3BlY2lmaWNNZXRhZGF0YVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFlciByZWxhY2lvbmVzIGplclx1MDBFMXJxdWljYXNcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdEhpZXJhcmNoaWNhbFJlbGF0aW9ucyhlbnRpdHksIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGRldGVjdGFyIGVudGlkYWQgZGVsIGFyY2hpdm8gJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluYSBlbCB0aXBvIGRlIGVudGlkYWQgc2VnXHUwMEZBbiBlbCBjYW1wbyAndHlwZScgZGVsIGZyb250bWF0dGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBkZXRlcm1pbmVFbnRpdHlUeXBlKHR5cGVTdHI6IHN0cmluZyB8IHVuZGVmaW5lZCk6IEVudGl0eVR5cGUge1xuICAgICAgICBpZiAoIXR5cGVTdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBFbnRpdHlUeXBlLlVOS05PV047XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1hcGVvIGRpcmVjdG8gZGUgbG9zIHRpcG9zXG4gICAgICAgIHN3aXRjaCAodHlwZVN0cikge1xuICAgICAgICAgICAgY2FzZSAnQVYnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlUeXBlLkFSRUFfVklEQTtcbiAgICAgICAgICAgIGNhc2UgJ0FJJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRW50aXR5VHlwZS5BUkVBX0lOVEVSRVM7XG4gICAgICAgICAgICBjYXNlICdQUSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudGl0eVR5cGUuUFJPWUVDVE9fUTtcbiAgICAgICAgICAgIGNhc2UgJ1BHVEQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlUeXBlLlBST1lFQ1RPX0dURDtcbiAgICAgICAgICAgIGNhc2UgJ0F4JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRW50aXR5VHlwZS5BTk9UQUNJT047XG4gICAgICAgICAgICBjYXNlICdDcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudGl0eVR5cGUuQ0FNUEFOQTtcbiAgICAgICAgICAgIGNhc2UgJ0VNa3QnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlUeXBlLkVOVFJFR0FCTEU7XG4gICAgICAgICAgICBjYXNlICdSVCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIEVudGl0eVR5cGUuUkVHSVNUUk9fVElFTVBPO1xuICAgICAgICAgICAgY2FzZSAnVHgnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlUeXBlLlRSQU5TQUNDSU9OO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBJbnRlbnRhciBkZXRlcm1pbmFyIHBvciBvdHJhcyBwcm9waWVkYWRlcyBzaSBlcyB1biB0aXBvIGNvbm9jaWRvIHBlcm8gbWFsIGV0aXF1ZXRhZG9cbiAgICAgICAgICAgICAgICByZXR1cm4gRW50aXR5VHlwZS5PVEhFUjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmEgZWwgZXN0YWRvIGRlIGxhIGVudGlkYWQgc2VnXHUwMEZBbiBlbCBjYW1wbyAnZXN0YWRvJyBkZWwgZnJvbnRtYXR0ZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGRldGVybWluZUVudGl0eVN0YXRlKHN0YXRlU3RyOiBzdHJpbmcgfCB1bmRlZmluZWQpOiBFbnRpdHlTdGF0ZSB7XG4gICAgICAgIGlmICghc3RhdGVTdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBFbnRpdHlTdGF0ZS5VTktOT1dOO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2ggKHN0YXRlU3RyKSB7XG4gICAgICAgICAgICBjYXNlICdcdUQ4M0RcdURGRTInOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlTdGF0ZS5BQ1RJVkU7XG4gICAgICAgICAgICBjYXNlICdcdUQ4M0RcdURGRTEnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlTdGF0ZS5QQVVTRUQ7XG4gICAgICAgICAgICBjYXNlICdcdUQ4M0RcdUREMzQnOlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlTdGF0ZS5TVE9QUEVEO1xuICAgICAgICAgICAgY2FzZSAnXHVEODNEXHVERDM1JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gRW50aXR5U3RhdGUuQVJDSElWRUQ7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBFbnRpdHlTdGF0ZS5VTktOT1dOO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSBtZXRhZGF0b3MgZXNwZWNcdTAwRURmaWNvcyBzZWdcdTAwRkFuIGVsIHRpcG8gZGUgZW50aWRhZFxuICAgICAqL1xuICAgIHByaXZhdGUgZXh0cmFjdFNwZWNpZmljTWV0YWRhdGEoZW50aXR5VHlwZTogRW50aXR5VHlwZSwgbWV0YWRhdGE6IGFueSk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAoZW50aXR5VHlwZSkge1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkFSRUFfVklEQTpcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWVyIHRyaW1lc3RyZSBwYXJhIEFWXG4gICAgICAgICAgICAgICAgcmVzdWx0LnRyaW1lc3RyZSA9IG1ldGFkYXRhLnRyaW1lc3RyZSB8fCAnJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5BUkVBX0lOVEVSRVM6XG4gICAgICAgICAgICAgICAgLy8gRXh0cmFlciBuaXZlbCBwYXJhIEFJXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm5pdmVsQUkgPSBtZXRhZGF0YS5uaXZlbEFJIHx8IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuUFJPWUVDVE9fUTpcbiAgICAgICAgICAgICAgICAvLyBFeHRyYWVyIHRyaW1lc3RyZXMgcGFyYSBQUVxuICAgICAgICAgICAgICAgIHJlc3VsdC50cmltZXN0cmVzID0gdGhpcy5ub3JtYWxpemVBcnJheUZpZWxkKG1ldGFkYXRhLnRyaW1lc3RyZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuUFJPWUVDVE9fR1REOlxuICAgICAgICAgICAgICAgIC8vIEV4dHJhZXIgbml2ZWwgcGFyYSBQR1REXG4gICAgICAgICAgICAgICAgcmVzdWx0Lm5pdmVsUCA9IG1ldGFkYXRhLm5pdmVsUCB8fCAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXh0cmFlciBtZXRhZGF0b3MgZXNwZWNcdTAwRURmaWNvcyBwYXJhIG90cm9zIHRpcG9zIHNlZ1x1MDBGQW4gc2VhIG5lY2VzYXJpb1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkNBTVBBTkE6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmluZGljYWRvcmVzID0gbWV0YWRhdGEuaW5kaWNhZG9yZXMgfHwgJyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuRU5UUkVHQUJMRTpcbiAgICAgICAgICAgICAgICByZXN1bHQudGlwbyA9IG1ldGFkYXRhLnRpcG8gfHwgJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmNhbmFsZXMgPSB0aGlzLm5vcm1hbGl6ZUFycmF5RmllbGQobWV0YWRhdGEuY2FuYWxlcyk7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmVzdGFkb0UgPSBtZXRhZGF0YS5lc3RhZG9FIHx8ICcnO1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wcmlvcmlkYWQgPSBtZXRhZGF0YS5wcmlvcmlkYWQgfHwgJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1YmxpY2FjaW9uID0gbWV0YWRhdGEucHVibGljYWNpb24gfHwgJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnVybENhbnZhID0gbWV0YWRhdGEudXJsQ2FudmEgfHwgJyc7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmhpdHMgPSBtZXRhZGF0YS5oaXRzIHx8IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSBsYXMgcmVsYWNpb25lcyBqZXJcdTAwRTFycXVpY2FzIGRlIGxvcyBtZXRhZGF0b3NcbiAgICAgKi9cbiAgICBwcml2YXRlIGV4dHJhY3RIaWVyYXJjaGljYWxSZWxhdGlvbnMoZW50aXR5OiBJRW50aXR5LCBtZXRhZGF0YTogYW55KTogdm9pZCB7XG4gICAgICAgIC8vIEV4dHJhZXIgXHUwMEUxcmVhIGRlIHZpZGFcbiAgICAgICAgaWYgKG1ldGFkYXRhLmFyZWFWaWRhKSB7XG4gICAgICAgICAgICBlbnRpdHkuYXJlYVZpZGEgPSB0aGlzLm5vcm1hbGl6ZUZpZWxkKG1ldGFkYXRhLmFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBcdTAwRTFyZWEgZGUgaW50ZXJcdTAwRTlzXG4gICAgICAgIGlmIChtZXRhZGF0YS5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgZW50aXR5LmFyZWFJbnRlcmVzID0gdGhpcy5ub3JtYWxpemVGaWVsZChtZXRhZGF0YS5hcmVhSW50ZXJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhZXIgcHJveWVjdG8gUVxuICAgICAgICBpZiAobWV0YWRhdGEucHJveWVjdG9RKSB7XG4gICAgICAgICAgICBlbnRpdHkucHJveWVjdG9RID0gdGhpcy5ub3JtYWxpemVGaWVsZChtZXRhZGF0YS5wcm95ZWN0b1EpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWVyIHByb3llY3RvIEdURFxuICAgICAgICBpZiAobWV0YWRhdGEucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgIGVudGl0eS5wcm95ZWN0b0dURCA9IHRoaXMubm9ybWFsaXplRmllbGQobWV0YWRhdGEucHJveWVjdG9HVEQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWVyIGFzdW50byAocmVsYWNpXHUwMEYzbiBwYWRyZS1oaWpvKVxuICAgICAgICBpZiAobWV0YWRhdGEuYXN1bnRvKSB7XG4gICAgICAgICAgICAvLyBFbCBhc3VudG8gc2UgbWFuZWphIGRlIGZvcm1hIGRpZmVyZW50ZSwgeWEgcXVlIGVzdGFibGVjZSBsYSByZWxhY2lcdTAwRjNuIGRpcmVjdGEgcGFkcmUtaGlqb1xuICAgICAgICAgICAgLy8gRXN0byBzZSBwcm9jZXNhclx1MDBFMSBlbiBlbCBIaWVyYXJjaHlCdWlsZGVyXG4gICAgICAgICAgICBlbnRpdHkubWV0YWRhdGEuYXN1bnRvID0gdGhpcy5ub3JtYWxpemVGaWVsZChtZXRhZGF0YS5hc3VudG8pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6YSB1biBjYW1wbyBxdWUgcHVlZGUgc2VyIHVuIHN0cmluZyBvIHVuIGFycmF5XG4gICAgICovXG4gICAgcHJpdmF0ZSBub3JtYWxpemVGaWVsZChmaWVsZDogYW55KTogc3RyaW5nIHwgc3RyaW5nW10ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZCkpIHtcbiAgICAgICAgICAgIC8vIFNpIHlhIGVzIHVuIGFycmF5LCBub3JtYWxpemFtb3MgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkLm1hcChpdGVtID0+IHRoaXMubm9ybWFsaXplV2lraUxpbmsoaXRlbSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkKSB7XG4gICAgICAgICAgICAvLyBTaSBlcyB1biB2YWxvciBzaW1wbGUsIGxvIG5vcm1hbGl6YW1vc1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplV2lraUxpbmsoZmllbGQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6YSB1biBjYW1wbyBxdWUgZGViZXJcdTAwRURhIHNlciB1biBhcnJheVxuICAgICAqL1xuICAgIHByaXZhdGUgbm9ybWFsaXplQXJyYXlGaWVsZChmaWVsZDogYW55KTogc3RyaW5nW10ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShmaWVsZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZC5tYXAoaXRlbSA9PiB0aGlzLm5vcm1hbGl6ZVdpa2lMaW5rKGl0ZW0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLm5vcm1hbGl6ZVdpa2lMaW5rKGZpZWxkKV07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXphIHVuIFdpa2lMaW5rIChbW3RleHRvfGFsaWFzXV0pIGV4dHJheWVuZG8gc3UgY29udGVuaWRvXG4gICAgICovXG4gICAgcHJpdmF0ZSBub3JtYWxpemVXaWtpTGluayh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBpZiAodHlwZW9mIHRleHQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nKHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWdleCBwYXJhIGRldGVjdGFyIHdpa2lsaW5rcyBbW3J1dGF8YWxpYXNdXVxuICAgICAgICBjb25zdCB3aWtpTGlua1JlZ2V4ID0gL1xcW1xcWyguKj8pKD86XFx8KC4qPykpP1xcXVxcXS87XG4gICAgICAgIGNvbnN0IG1hdGNoID0gdGV4dC5tYXRjaCh3aWtpTGlua1JlZ2V4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgLy8gU2kgZXMgdW4gd2lraWxpbmssIGV4dHJhZXIgbGEgcnV0YVxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYSB1bmEgZW50aWRhZCBnZW5cdTAwRTlyaWNhIGN1YW5kbyBubyBzZSBwdWVkZSBkZXRlcm1pbmFyIGVsIHRpcG9cbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUdlbmVyaWNFbnRpdHkoZmlsZTogVEZpbGUpOiBJRW50aXR5IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVudGl0eShcbiAgICAgICAgICAgIEVudGl0eVR5cGUuVU5LTk9XTixcbiAgICAgICAgICAgIGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgRW50aXR5U3RhdGUuVU5LTk9XTlxuICAgICAgICApO1xuICAgIH1cbn1cblxuLy8gREVWRUxPUE1FTlRfQ0hFQ0tQT0lOVDogXCJlbnRpdHlfZGV0ZWN0b3JcIlxuLy8gRGVzY3JpcGNpXHUwMEYzbjogU2VydmljaW8gcGFyYSBsYSBkZXRlY2NpXHUwMEYzbiB5IGV4dHJhY2NpXHUwMEYzbiBkZSBtZXRhZGF0b3MgZGUgZW50aWRhZGVzXG4vLyBFc3RhZG86IENvbXBsZXRvIiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvbW9kZWxzL0VudGl0eS50c1xuXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhc2sgfSBmcm9tICcuL1Rhc2snO1xuXG4vKipcbiAqIFRpcG9zIGRlIGVudGlkYWRlcyBlbiBlbCBzaXN0ZW1hIEdURFxuICovXG5leHBvcnQgZW51bSBFbnRpdHlUeXBlIHtcbiAgICBBUkVBX1ZJREEgPSAnQVYnLFxuICAgIEFSRUFfSU5URVJFUyA9ICdBSScsXG4gICAgUFJPWUVDVE9fUSA9ICdQUScsXG4gICAgUFJPWUVDVE9fR1REID0gJ1BHVEQnLFxuICAgIEFOT1RBQ0lPTiA9ICdBeCcsXG4gICAgQ0FNUEFOQSA9ICdDcCcsXG4gICAgRU5UUkVHQUJMRSA9ICdFTWt0JyxcbiAgICBSRUdJU1RST19USUVNUE8gPSAnUlQnLFxuICAgIFRSQU5TQUNDSU9OID0gJ1R4JyxcbiAgICBPVEhFUiA9ICdPVEhFUicsXG4gICAgVU5LTk9XTiA9ICdVTktOT1dOJ1xufVxuXG4vKipcbiAqIEVzdGFkb3MgcG9zaWJsZXMgcGFyYSBlbnRpZGFkZXNcbiAqL1xuZXhwb3J0IGVudW0gRW50aXR5U3RhdGUge1xuICAgIEFDVElWRSA9ICdcdUQ4M0RcdURGRTInLFxuICAgIFBBVVNFRCA9ICdcdUQ4M0RcdURGRTEnLFxuICAgIFNUT1BQRUQgPSAnXHVEODNEXHVERDM0JyxcbiAgICBBUkNISVZFRCA9ICdcdUQ4M0RcdUREMzUnLFxuICAgIFVOS05PV04gPSAnJ1xufVxuXG4vKipcbiAqIEludGVyZmF6IGJhc2UgcGFyYSB0b2RhcyBsYXMgZW50aWRhZGVzIGRlbCBzaXN0ZW1hIEdURFxuICovXG5leHBvcnQgaW50ZXJmYWNlIElFbnRpdHkge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdHlwZTogRW50aXR5VHlwZTtcbiAgICB0aXRsZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgZmlsZTogVEZpbGU7XG4gICAgc3RhdGU6IEVudGl0eVN0YXRlO1xuICAgIHRhc2tzOiBUYXNrW107XG4gICAgcGFyZW50PzogSUVudGl0eTtcbiAgICBjaGlsZHJlbjogSUVudGl0eVtdO1xuICAgIFxuICAgIC8vIFByb3BpZWRhZGVzIGplclx1MDBFMXJxdWljYXNcbiAgICBhcmVhVmlkYT86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIGFyZWFJbnRlcmVzPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgcHJveWVjdG9RPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgcHJveWVjdG9HVEQ/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBcbiAgICAvLyBOaXZlbGVzIHBhcmEgZW50aWRhZGVzIHJlY3Vyc2l2YXNcbiAgICBsZXZlbD86IG51bWJlcjtcbiAgICBcbiAgICAvLyBNZXRhZGF0b3MgYWRpY2lvbmFsZXMgZXNwZWNcdTAwRURmaWNvcyBwb3IgdGlwb1xuICAgIG1ldGFkYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG4vKipcbiAqIENsYXNlIGJhc2UgcGFyYSB0b2RhcyBsYXMgZW50aWRhZGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBFbnRpdHkgaW1wbGVtZW50cyBJRW50aXR5IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHR5cGU6IEVudGl0eVR5cGU7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIHN0YXRlOiBFbnRpdHlTdGF0ZTtcbiAgICB0YXNrczogVGFza1tdID0gW107XG4gICAgcGFyZW50PzogSUVudGl0eTtcbiAgICBjaGlsZHJlbjogSUVudGl0eVtdID0gW107XG4gICAgYXJlYVZpZGE/OiBzdHJpbmcgfCBzdHJpbmdbXTtcbiAgICBhcmVhSW50ZXJlcz86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHByb3llY3RvUT86IHN0cmluZyB8IHN0cmluZ1tdO1xuICAgIHByb3llY3RvR1REPzogc3RyaW5nIHwgc3RyaW5nW107XG4gICAgbGV2ZWw/OiBudW1iZXI7XG4gICAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaWQ6IHN0cmluZyxcbiAgICAgICAgdHlwZTogRW50aXR5VHlwZSxcbiAgICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgZmlsZTogVEZpbGUsXG4gICAgICAgIHN0YXRlOiBFbnRpdHlTdGF0ZSA9IEVudGl0eVN0YXRlLlVOS05PV05cbiAgICApIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBXHUwMEYxYWRlIHVuYSB0YXJlYSBhIGVzdGEgZW50aWRhZFxuICAgICAqL1xuICAgIGFkZFRhc2sodGFzazogVGFzayk6IHZvaWQge1xuICAgICAgICB0aGlzLnRhc2tzLnB1c2godGFzayk7XG4gICAgICAgIHRhc2sucGFyZW50RW50aXR5ID0gdGhpcztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQVx1MDBGMWFkZSB1bmEgZW50aWRhZCBoaWphXG4gICAgICovXG4gICAgYWRkQ2hpbGQoY2hpbGQ6IElFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgY2hpbGQucGFyZW50ID0gdGhpcztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRGV2dWVsdmUgZWwgblx1MDBGQW1lcm8gdG90YWwgZGUgdGFyZWFzIChpbmNsdXllbmRvIGxhcyBkZSBlbnRpZGFkZXMgaGlqYXMpXG4gICAgICovXG4gICAgZ2V0VG90YWxUYXNrQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdW50ID0gdGhpcy50YXNrcy5sZW5ndGg7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5jaGlsZHJlbikge1xuICAgICAgICAgICAgY291bnQgKz0gY2hpbGQuZ2V0VG90YWxUYXNrQ291bnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERldnVlbHZlIGVsIG5cdTAwRkFtZXJvIHRvdGFsIGRlIHRhcmVhcyBwZW5kaWVudGVzIChpbmNsdXllbmRvIGxhcyBkZSBlbnRpZGFkZXMgaGlqYXMpXG4gICAgICovXG4gICAgZ2V0UGVuZGluZ1Rhc2tDb3VudCgpOiBudW1iZXIge1xuICAgICAgICBsZXQgY291bnQgPSB0aGlzLnRhc2tzLmZpbHRlcih0YXNrID0+ICF0YXNrLmNvbXBsZXRlZCkubGVuZ3RoO1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvdW50ICs9IGNoaWxkLmdldFBlbmRpbmdUYXNrQ291bnQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxufVxuXG4vKipcbiAqIENsYXNlIGVzcGVjXHUwMEVEZmljYSBwYXJhIFx1MDBDMXJlYXMgZGUgVmlkYVxuICovXG5leHBvcnQgY2xhc3MgQXJlYVZpZGEgZXh0ZW5kcyBFbnRpdHkge1xuICAgIHRyaW1lc3RyZTogc3RyaW5nO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBpZDogc3RyaW5nLFxuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBmaWxlOiBURmlsZSwgXG4gICAgICAgIHN0YXRlOiBFbnRpdHlTdGF0ZSxcbiAgICAgICAgdHJpbWVzdHJlOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgc3VwZXIoaWQsIEVudGl0eVR5cGUuQVJFQV9WSURBLCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlKTtcbiAgICAgICAgdGhpcy50cmltZXN0cmUgPSB0cmltZXN0cmU7XG4gICAgICAgIHRoaXMubWV0YWRhdGEudHJpbWVzdHJlID0gdHJpbWVzdHJlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDbGFzZSBlc3BlY1x1MDBFRGZpY2EgcGFyYSBcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1xuICovXG5leHBvcnQgY2xhc3MgQXJlYUludGVyZXMgZXh0ZW5kcyBFbnRpdHkge1xuICAgIG5pdmVsQUk6IG51bWJlcjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaWQ6IHN0cmluZyxcbiAgICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgZmlsZTogVEZpbGUsXG4gICAgICAgIHN0YXRlOiBFbnRpdHlTdGF0ZSxcbiAgICAgICAgbml2ZWxBSTogbnVtYmVyID0gMFxuICAgICkge1xuICAgICAgICBzdXBlcihpZCwgRW50aXR5VHlwZS5BUkVBX0lOVEVSRVMsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZmlsZSwgc3RhdGUpO1xuICAgICAgICB0aGlzLm5pdmVsQUkgPSBuaXZlbEFJO1xuICAgICAgICB0aGlzLmxldmVsID0gbml2ZWxBSTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YS5uaXZlbEFJID0gbml2ZWxBSTtcbiAgICB9XG59XG5cbi8qKlxuICogQ2xhc2UgZXNwZWNcdTAwRURmaWNhIHBhcmEgUHJveWVjdG9zIFFcbiAqL1xuZXhwb3J0IGNsYXNzIFByb3llY3RvUSBleHRlbmRzIEVudGl0eSB7XG4gICAgdHJpbWVzdHJlczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgaWQ6IHN0cmluZyxcbiAgICAgICAgdGl0bGU6IHN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICAgICAgZmlsZTogVEZpbGUsXG4gICAgICAgIHN0YXRlOiBFbnRpdHlTdGF0ZSxcbiAgICAgICAgdHJpbWVzdHJlczogc3RyaW5nW10gPSBbXVxuICAgICkge1xuICAgICAgICBzdXBlcihpZCwgRW50aXR5VHlwZS5QUk9ZRUNUT19RLCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlKTtcbiAgICAgICAgdGhpcy50cmltZXN0cmVzID0gdHJpbWVzdHJlcztcbiAgICAgICAgdGhpcy5tZXRhZGF0YS50cmltZXN0cmVzID0gdHJpbWVzdHJlcztcbiAgICB9XG59XG5cbi8qKlxuICogQ2xhc2UgZXNwZWNcdTAwRURmaWNhIHBhcmEgUHJveWVjdG9zIEdURFxuICovXG5leHBvcnQgY2xhc3MgUHJveWVjdG9HVEQgZXh0ZW5kcyBFbnRpdHkge1xuICAgIG5pdmVsUDogbnVtYmVyO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBpZDogc3RyaW5nLFxuICAgICAgICB0aXRsZTogc3RyaW5nLFxuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgICAgICBmaWxlOiBURmlsZSxcbiAgICAgICAgc3RhdGU6IEVudGl0eVN0YXRlLFxuICAgICAgICBuaXZlbFA6IG51bWJlciA9IDBcbiAgICApIHtcbiAgICAgICAgc3VwZXIoaWQsIEVudGl0eVR5cGUuUFJPWUVDVE9fR1RELCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5uaXZlbFAgPSBuaXZlbFA7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBuaXZlbFA7XG4gICAgICAgIHRoaXMubWV0YWRhdGEubml2ZWxQID0gbml2ZWxQO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGdW5jaVx1MDBGM24gZGUgdXRpbGlkYWQgcGFyYSBjcmVhciBsYSBpbnN0YW5jaWEgY29ycmVjdGEgc2VnXHUwMEZBbiBlbCB0aXBvXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbnRpdHkoXG4gICAgdHlwZTogRW50aXR5VHlwZSxcbiAgICBpZDogc3RyaW5nLFxuICAgIHRpdGxlOiBzdHJpbmcsXG4gICAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgICBmaWxlOiBURmlsZSxcbiAgICBzdGF0ZTogRW50aXR5U3RhdGUsXG4gICAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuKTogSUVudGl0eSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgRW50aXR5VHlwZS5BUkVBX1ZJREE6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFyZWFWaWRhKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlLCBtZXRhZGF0YS50cmltZXN0cmUgfHwgJycpO1xuICAgICAgICBcbiAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkFSRUFfSU5URVJFUzpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQXJlYUludGVyZXMoaWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgZmlsZSwgc3RhdGUsIG1ldGFkYXRhLm5pdmVsQUkgfHwgMCk7XG4gICAgICAgIFxuICAgICAgICBjYXNlIEVudGl0eVR5cGUuUFJPWUVDVE9fUTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJveWVjdG9RKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlLCBtZXRhZGF0YS50cmltZXN0cmVzIHx8IFtdKTtcbiAgICAgICAgXG4gICAgICAgIGNhc2UgRW50aXR5VHlwZS5QUk9ZRUNUT19HVEQ6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb3llY3RvR1REKGlkLCB0aXRsZSwgZGVzY3JpcHRpb24sIGZpbGUsIHN0YXRlLCBtZXRhZGF0YS5uaXZlbFAgfHwgMCk7XG4gICAgICAgIFxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc3QgZW50aXR5ID0gbmV3IEVudGl0eShpZCwgdHlwZSwgdGl0bGUsIGRlc2NyaXB0aW9uLCBmaWxlLCBzdGF0ZSk7XG4gICAgICAgICAgICBlbnRpdHkubWV0YWRhdGEgPSBtZXRhZGF0YTtcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgfVxufVxuXG4vLyBERVZFTE9QTUVOVF9DSEVDS1BPSU5UOiBcImVudGl0eV9tb2RlbHNcIlxuLy8gRGVzY3JpcGNpXHUwMEYzbjogSW1wbGVtZW50YWNpXHUwMEYzbiBkZSBsYXMgY2xhc2VzIGRlIG1vZGVsb3MgcGFyYSByZXByZXNlbnRhciBsYXMgZW50aWRhZGVzIGRlbCBzaXN0ZW1hIEdURFxuLy8gRXN0YWRvOiBDb21wbGV0byIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL21vZGVscy9UYXNrLnRzXG5cbmltcG9ydCB7IElFbnRpdHkgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBUaXBvcyBkZSBsaXN0YXMgR1REIGRvbmRlIHB1ZWRlIGVzdGFyIHVuYSB0YXJlYVxuICovXG5leHBvcnQgZW51bSBUYXNrTGlzdFR5cGUge1xuICAgIElOQk9YID0gJ2luYm94JyxcbiAgICBORVhUX0FDVElPTlMgPSAnbmV4dEFjdGlvbnMnLFxuICAgIENBTEVOREFSID0gJ2NhbGVuZGFyJyxcbiAgICBIT1BFRlVMTFlfVE9EQVkgPSAnaG9wZWZ1bGx5VG9kYXknLFxuICAgIEFTU0lHTkVEID0gJ2Fzc2lnbmVkJyxcbiAgICBQUk9KRUNUUyA9ICdwcm9qZWN0cycsXG4gICAgU09NRURBWV9NQVlCRSA9ICdzb21lZGF5TWF5YmUnLFxuICAgIE5PVF9USElTX1dFRUsgPSAnbm90VGhpc1dlZWsnLFxuICAgIFdBSVRJTkcgPSAnd2FpdGluZydcbn1cblxuLyoqXG4gKiBQcmlvcmlkYWQgZGUgbGEgdGFyZWFcbiAqL1xuZXhwb3J0IGVudW0gVGFza1ByaW9yaXR5IHtcbiAgICBISUdIRVNUID0gJ2hpZ2hlc3QnLCAvLyBcdTIzRUJcbiAgICBISUdIID0gJ2hpZ2gnLCAgICAgIC8vIFx1RDgzRFx1REQzQ1xuICAgIE5PUk1BTCA9ICdub3JtYWwnLCAgIC8vIE5vcm1hbCAoc2luIG1hcmNhZG9yKVxuICAgIExPVyA9ICdsb3cnLCAgICAgICAgLy8gXHVEODNEXHVERDNEXG4gICAgTE9XRVNUID0gJ2xvd2VzdCcgICAvLyBcdTIzRUNcbn1cblxuLyoqXG4gKiBJbmZvcm1hY2lcdTAwRjNuIHNvYnJlIGxhIGxcdTAwRURuZWEgZG9uZGUgc2UgZW5jdWVudHJhIGxhIHRhcmVhXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTGluZUluZm8ge1xuICAgIG51bWJlcjogbnVtYmVyO1xuICAgIHRleHQ6IHN0cmluZztcbiAgICBpbmRlbnRhdGlvbjogbnVtYmVyO1xufVxuXG4vKipcbiAqIEludGVyZmF6IHBhcmEgbGFzIGV0aXF1ZXRhcyBkZSBsYSB0YXJlYVxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRhc2tUYWdzIHtcbiAgICBjb250ZXh0czogc3RyaW5nW107ICAgIC8vIENvbnRleHRvcyAoI2N4LSlcbiAgICBwZW9wbGU6IHN0cmluZ1tdOyAgICAgIC8vIFBlcnNvbmFzIGFzaWduYWRhcyAoI3B4LSlcbiAgICBndGRUYWdzOiBzdHJpbmdbXTsgICAgIC8vIFRhZ3MgcmVsYWNpb25hZG9zIGNvbiBHVEQgKCNHVEQtKVxuICAgIG90aGVyVGFnczogc3RyaW5nW107ICAgLy8gT3Ryb3MgdGFnc1xuICAgIGFsbDogc3RyaW5nW107ICAgICAgICAgLy8gVG9kb3MgbG9zIHRhZ3Ncbn1cblxuLyoqXG4gKiBJbnRlcmZheiBwYXJhIGZlY2hhcyB5IGhvcmFzIHJlbGFjaW9uYWRhcyBjb24gbGEgdGFyZWFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUYXNrVGltaW5nIHtcbiAgICBzdGFydERhdGU/OiBzdHJpbmc7ICAgIC8vIEZlY2hhIGRlIGluaWNpbyAoXHVEODNEXHVERUVCKVxuICAgIGR1ZURhdGU/OiBzdHJpbmc7ICAgICAgLy8gRmVjaGEgbFx1MDBFRG1pdGUgKFx1RDgzRFx1RENDNSlcbiAgICBzY2hlZHVsZWREYXRlPzogc3RyaW5nOyAvLyBGZWNoYSBwcm9ncmFtYWRhIChcdTIzRjMpXG4gICAgc3RhcnRUaW1lPzogc3RyaW5nOyAgICAvLyBIb3JhIGRlIGluaWNpbyBbaEk6Ol1cbiAgICBlbmRUaW1lPzogc3RyaW5nOyAgICAgIC8vIEhvcmEgZGUgZmluIFtoRjo6XVxuICAgIGR1cmF0aW9uPzogbnVtYmVyOyAgICAgLy8gRHVyYWNpXHUwMEYzbiBlbiBtaW51dG9zXG4gICAgd2Vlaz86IHN0cmluZzsgICAgICAgICAvLyBTZW1hbmEgcGxhbmlmaWNhZGEgW3c6Ol1cbn1cblxuLyoqXG4gKiBNb2RlbG8gZGUgdGFyZWFcbiAqL1xuZXhwb3J0IGNsYXNzIFRhc2sge1xuICAgIC8vIElkZW50aWZpY2Fkb3Jlc1xuICAgIGlkOiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgICAgIC8vIElEIFx1MDBGQW5pY28gKFx1RDgzQ1x1REQ5NClcbiAgICB0YXNrSWQ6IHN0cmluZzsgICAgICAgICAgICAgICAgICAvLyBJRCBkaXJlY3RvIGV4dHJhXHUwMEVEZG8gZGUgbGEgdGFyZWFcblxuICAgIC8vIENvbnRlbmlkbyBiXHUwMEUxc2ljb1xuICAgIHRleHQ6IHN0cmluZzsgICAgICAgICAgICAgICAgICAgIC8vIFRleHRvIHByaW5jaXBhbCBkZSBsYSB0YXJlYVxuICAgIHJhd1RleHQ6IHN0cmluZzsgICAgICAgICAgICAgICAgIC8vIFRleHRvIGNvbXBsZXRvIGluY2x1eWVuZG8gbWV0YWRhdG9zXG4gICAgY29tcGxldGVkOiBib29sZWFuOyAgICAgICAgICAgICAgLy8gU2kgZXN0XHUwMEUxIGNvbXBsZXRhZGEgbyBub1xuXG4gICAgLy8gVWJpY2FjaVx1MDBGM25cbiAgICBmaWxlOiBURmlsZTsgICAgICAgICAgICAgICAgICAgICAvLyBBcmNoaXZvIGRvbmRlIHNlIGVuY3VlbnRyYSBsYSB0YXJlYVxuICAgIGZpbGVQYXRoOiBzdHJpbmc7ICAgICAgICAgICAgICAgIC8vIFJ1dGEgZGVsIGFyY2hpdm9cbiAgICBsaW5lSW5mbzogTGluZUluZm87ICAgICAgICAgICAgICAvLyBJbmZvcm1hY2lcdTAwRjNuIGRlIGxhIGxcdTAwRURuZWFcbiAgICBcbiAgICAvLyBNZXRhZGF0b3NcbiAgICBwcmlvcml0eTogVGFza1ByaW9yaXR5OyAgICAgICAgICAvLyBQcmlvcmlkYWQgZGUgbGEgdGFyZWFcbiAgICB0YWdzOiBUYXNrVGFnczsgICAgICAgICAgICAgICAgICAvLyBFdGlxdWV0YXNcbiAgICB0aW1pbmc6IFRhc2tUaW1pbmc7ICAgICAgICAgICAgICAvLyBGZWNoYXMgeSBob3Jhc1xuICAgIGRlcGVuZGVuY2llczogc3RyaW5nW107ICAgICAgICAgIC8vIElEcyBkZSB0YXJlYXMgZGUgbGFzIHF1ZSBkZXBlbmRlIChcdTI2RDQpXG4gICAgXG4gICAgLy8gUmVsYWNpb25lc1xuICAgIHBhcmVudEVudGl0eT86IElFbnRpdHk7ICAgICAgICAgIC8vIEVudGlkYWQgcGFkcmVcbiAgICBcbiAgICAvLyBDbGFzaWZpY2FjaVx1MDBGM24gR1REXG4gICAgbGlzdFR5cGU/OiBUYXNrTGlzdFR5cGU7ICAgICAgICAgLy8gVGlwbyBkZSBsaXN0YSBHVEQgZG9uZGUgc2UgZW5jdWVudHJhXG4gICAgaXNCbG9ja2VkOiBib29sZWFuID0gZmFsc2U7ICAgICAgLy8gU2kgZXN0XHUwMEUxIGJsb3F1ZWFkYSBwb3IgZGVwZW5kZW5jaWFzXG4gICAgYmxvY2tSZWFzb24/OiBzdHJpbmc7ICAgICAgICAgICAgLy8gUmF6XHUwMEYzbiBwb3IgbGEgcXVlIGVzdFx1MDBFMSBibG9xdWVhZGFcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBpZDogc3RyaW5nLFxuICAgICAgICB0ZXh0OiBzdHJpbmcsXG4gICAgICAgIHJhd1RleHQ6IHN0cmluZyxcbiAgICAgICAgY29tcGxldGVkOiBib29sZWFuLFxuICAgICAgICBmaWxlOiBURmlsZSxcbiAgICAgICAgbGluZUluZm86IExpbmVJbmZvXG4gICAgKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy50YXNrSWQgPSBpZDsgLy8gUG9yIGRlZmVjdG8gc29uIGlndWFsZXMsIHBlcm8gdGFza0lkIHB1ZWRlIGNhbWJpYXIgc2kgc2UgZXh0cmFlIHVubyBkZSBsYSB0YXJlYVxuICAgICAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgICAgICB0aGlzLnJhd1RleHQgPSByYXdUZXh0O1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICAgICAgdGhpcy5maWxlUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgdGhpcy5saW5lSW5mbyA9IGxpbmVJbmZvO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pY2lhbGl6YXIgdmFsb3JlcyBwb3IgZGVmZWN0b1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gVGFza1ByaW9yaXR5Lk5PUk1BTDtcbiAgICAgICAgdGhpcy50YWdzID0ge1xuICAgICAgICAgICAgY29udGV4dHM6IFtdLFxuICAgICAgICAgICAgcGVvcGxlOiBbXSxcbiAgICAgICAgICAgIGd0ZFRhZ3M6IFtdLFxuICAgICAgICAgICAgb3RoZXJUYWdzOiBbXSxcbiAgICAgICAgICAgIGFsbDogW11cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50aW1pbmcgPSB7fTtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29tcHJ1ZWJhIHNpIGxhIHRhcmVhIHRpZW5lIHVuIGNvbnRleHRvIGVzcGVjXHUwMEVEZmljb1xuICAgICAqL1xuICAgIGhhc0NvbnRleHQoY29udGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhZ3MuY29udGV4dHMuc29tZShjdHggPT4gXG4gICAgICAgICAgICBjdHgudG9Mb3dlckNhc2UoKSA9PT0gY29udGV4dC50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29tcHJ1ZWJhIHNpIGxhIHRhcmVhIGVzdFx1MDBFMSBhc2lnbmFkYSBhIHVuYSBwZXJzb25hIGVzcGVjXHUwMEVEZmljYVxuICAgICAqL1xuICAgIGlzQXNzaWduZWRUbyhwZXJzb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50YWdzLnBlb3BsZS5zb21lKHAgPT4gXG4gICAgICAgICAgICBwLnRvTG93ZXJDYXNlKCkgPT09IHBlcnNvbi50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29tcHJ1ZWJhIHNpIGxhIHRhcmVhIHRpZW5lIHVuYSBldGlxdWV0YSBHVEQgZXNwZWNcdTAwRURmaWNhXG4gICAgICovXG4gICAgaGFzR1REVGFnKHRhZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhZ3MuZ3RkVGFncy5zb21lKHQgPT4gXG4gICAgICAgICAgICB0LnRvTG93ZXJDYXNlKCkgPT09IHRhZy50b0xvd2VyQ2FzZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmEgc2kgdW5hIHRhcmVhIGVzdFx1MDBFMSB2ZW5jaWRhXG4gICAgICovXG4gICAgaXNPdmVyZHVlKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMudGltaW5nLmR1ZURhdGUgJiYgIXRoaXMudGltaW5nLnNjaGVkdWxlZERhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFZlcmlmaWNhciBmZWNoYSBsXHUwMEVEbWl0ZSAoXHVEODNEXHVEQ0M1KVxuICAgICAgICBpZiAodGhpcy50aW1pbmcuZHVlRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKHRoaXMudGltaW5nLmR1ZURhdGUpO1xuICAgICAgICAgICAgZHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgIGlmIChkdWVEYXRlIDwgdG9kYXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIHByb2dyYW1hZGEgKFx1MjNGMylcbiAgICAgICAgaWYgKHRoaXMudGltaW5nLnNjaGVkdWxlZERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVkdWxlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLnRpbWluZy5zY2hlZHVsZWREYXRlKTtcbiAgICAgICAgICAgIHNjaGVkdWxlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGVkRGF0ZSA8IHRvZGF5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5hIHNpIHVuYSB0YXJlYSBlc3RcdTAwRTEgcHJvZ3JhbWFkYSBwYXJhIGhveVxuICAgICAqL1xuICAgIGlzRm9yVG9kYXkoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy50aW1pbmcuZHVlRGF0ZSAmJiAhdGhpcy50aW1pbmcuc2NoZWR1bGVkRGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIGxcdTAwRURtaXRlIChcdUQ4M0RcdURDQzUpXG4gICAgICAgIGlmICh0aGlzLnRpbWluZy5kdWVEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUodGhpcy50aW1pbmcuZHVlRGF0ZSk7XG4gICAgICAgICAgICBkdWVEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgaWYgKGR1ZURhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIHByb2dyYW1hZGEgKFx1MjNGMylcbiAgICAgICAgaWYgKHRoaXMudGltaW5nLnNjaGVkdWxlZERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVkdWxlZERhdGUgPSBuZXcgRGF0ZSh0aGlzLnRpbWluZy5zY2hlZHVsZWREYXRlKTtcbiAgICAgICAgICAgIHNjaGVkdWxlZERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGVkRGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIERldGVybWluYSBzaSB1bmEgdGFyZWEgdGllbmUgaG9yYSBkZSBpbmljaW8gZXN0YWJsZWNpZGFcbiAgICAgKi9cbiAgICBoYXNTdGFydFRpbWUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudGltaW5nLnN0YXJ0VGltZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5hIGxvcyBkXHUwMEVEYXMgaGFzdGEgbGEgZmVjaGEgbFx1MDBFRG1pdGUgKHBvc2l0aXZvIHNpIGFcdTAwRkFuIGhheSB0aWVtcG8sIG5lZ2F0aXZvIHNpIGVzdFx1MDBFMSB2ZW5jaWRhKVxuICAgICAqL1xuICAgIGdldERheXNVbnRpbER1ZSgpOiBudW1iZXIgfCBudWxsIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbWluZy5kdWVEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGR1ZURhdGUgPSBuZXcgRGF0ZSh0aGlzLnRpbWluZy5kdWVEYXRlKTtcbiAgICAgICAgZHVlRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRpZmZUaW1lID0gZHVlRGF0ZS5nZXRUaW1lKCkgLSB0b2RheS5nZXRUaW1lKCk7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwoZGlmZlRpbWUgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuICAgIH1cbn1cblxuLy8gREVWRUxPUE1FTlRfQ0hFQ0tQT0lOVDogXCJ0YXNrX21vZGVsXCJcbi8vIERlc2NyaXBjaVx1MDBGM246IEltcGxlbWVudGFjaVx1MDBGM24gZGVsIG1vZGVsbyBkZSB0YXJlYXNcbi8vIEVzdGFkbzogQ29tcGxldG8iLCAiLy8gc3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9zZXJ2aWNlcy9UYXNrUGFyc2VyLnRzXG5cbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGFzaywgVGFza1ByaW9yaXR5LCBMaW5lSW5mbyB9IGZyb20gJy4uL21vZGVscy9UYXNrJztcblxuLyoqXG4gKiBTZXJ2aWNpbyBwYXJhIGFuYWxpemFyIHkgZXh0cmFlciB0YXJlYXMgZGUgYXJjaGl2b3MgbWFya2Rvd25cbiAqL1xuZXhwb3J0IGNsYXNzIFRhc2tQYXJzZXIge1xuICAgIC8qKlxuICAgICAqIEV4dHJhZSB0b2RhcyBsYXMgdGFyZWFzIGRlIHVuIGFyY2hpdm9cbiAgICAgKi9cbiAgICBhc3luYyBleHRyYWN0VGFza3NGcm9tRmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMucmVhZEZpbGUoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERpdmlkaXIgZWwgY29udGVuaWRvIGVuIGxcdTAwRURuZWFzXG4gICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBcnJheSBwYXJhIGFsbWFjZW5hciBsYXMgdGFyZWFzIGVuY29udHJhZGFzXG4gICAgICAgICAgICBjb25zdCB0YXNrczogVGFza1tdID0gW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFByb2Nlc2FyIGNhZGEgbFx1MDBFRG5lYVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gaSArIDE7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIGxcdTAwRURuZWEgY29udGllbmUgdW5hIHRhcmVhXG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IHRoaXMucGFyc2VUYXNrTGluZShsaW5lLCBsaW5lTnVtYmVyLCBmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHRhc2tzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgZXh0cmFlciB0YXJlYXMgZGVsIGFyY2hpdm8gJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBMZWUgZWwgY29udGVuaWRvIGRlIHVuIGFyY2hpdm9cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHJlYWRGaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGxlZXIgZWwgYXJjaGl2byAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQW5hbGl6YSB1bmEgbFx1MDBFRG5lYSBwYXJhIGRldGVybWluYXIgc2kgY29udGllbmUgdW5hIHRhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSBwYXJzZVRhc2tMaW5lKGxpbmU6IHN0cmluZywgbGluZU51bWJlcjogbnVtYmVyLCBmaWxlOiBURmlsZSk6IFRhc2sgfCBudWxsIHtcbiAgICAgICAgLy8gUmVnZXggcGFyYSBkZXRlY3RhciB0YXJlYXMgZGUgT2JzaWRpYW5cbiAgICAgICAgLy8gQ2FwdHVyYSBncnVwb3MgcGFyYTogaW5kZW50YWNpXHUwMEYzbiwgZXN0YWRvIChjb21wbGV0YWRvIG8gbm8pLCB0ZXh0byBkZSBsYSB0YXJlYVxuICAgICAgICBjb25zdCB0YXNrUmVnZXggPSAvXihcXHMqKS1cXHMqXFxbKFsgeFgvXSlcXF1cXHMqKC4rKSQvO1xuICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2godGFza1JlZ2V4KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBObyBlcyB1bmEgdGFyZWFcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBjb21wb25lbnRlcyBkZSBsYSB0YXJlYVxuICAgICAgICBjb25zdCBpbmRlbnRhdGlvbiA9IG1hdGNoWzFdLmxlbmd0aDtcbiAgICAgICAgY29uc3QgaXNDb21wbGV0ZWQgPSBtYXRjaFsyXSAhPT0gJyAnOyAvLyBDdWFscXVpZXIgY29zYSBleGNlcHRvIGVzcGFjaW8gaW5kaWNhIGNvbXBsZXRhZGFcbiAgICAgICAgY29uc3QgdGFza1RleHQgPSBtYXRjaFszXTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGluZm9ybWFjaVx1MDBGM24gZGUgbFx1MDBFRG5lYVxuICAgICAgICBjb25zdCBsaW5lSW5mbzogTGluZUluZm8gPSB7XG4gICAgICAgICAgICBudW1iZXI6IGxpbmVOdW1iZXIsXG4gICAgICAgICAgICB0ZXh0OiBsaW5lLFxuICAgICAgICAgICAgaW5kZW50YXRpb246IGluZGVudGF0aW9uXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBHZW5lcmFyIHVuIElEIFx1MDBGQW5pY28gcGFyYSBsYSB0YXJlYSAobyBleHRyYWVybG8gZGVsIHRleHRvKVxuICAgICAgICBjb25zdCB0YXNrSWQgPSB0aGlzLmV4dHJhY3RUYXNrSWQodGFza1RleHQpIHx8IHRoaXMuZ2VuZXJhdGVUYXNrSWQoZmlsZS5iYXNlbmFtZSwgbGluZU51bWJlcik7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBsYSB0YXJlYSBiXHUwMEUxc2ljYVxuICAgICAgICBjb25zdCB0YXNrID0gbmV3IFRhc2soXG4gICAgICAgICAgICB0YXNrSWQsXG4gICAgICAgICAgICB0aGlzLmNsZWFuVGFza1RleHQodGFza1RleHQpLFxuICAgICAgICAgICAgdGFza1RleHQsXG4gICAgICAgICAgICBpc0NvbXBsZXRlZCxcbiAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICBsaW5lSW5mb1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBtZXRhZGF0b3MgYWRpY2lvbmFsZXNcbiAgICAgICAgdGhpcy5leHRyYWN0VGFza01ldGFkYXRhKHRhc2spO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIExpbXBpYSBlbCB0ZXh0byBkZSBsYSB0YXJlYSBlbGltaW5hbmRvIG1ldGFkYXRvcyB5IHRhZ3NcbiAgICAgKi9cbiAgICBwcml2YXRlIGNsZWFuVGFza1RleHQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gRWxpbWluYXIgSUQgZGUgdGFyZWFcbiAgICAgICAgbGV0IGNsZWFuVGV4dCA9IHRleHQucmVwbGFjZSgvXHVEODNDXHVERDk0XFxzK1xcdysvZywgJycpLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVsaW1pbmFyIGV0aXF1ZXRhc1xuICAgICAgICBjbGVhblRleHQgPSBjbGVhblRleHQucmVwbGFjZSgvI1thLXpBLVowLTlfLV0rL2csICcnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbGltaW5hciBmZWNoYXNcbiAgICAgICAgY2xlYW5UZXh0ID0gY2xlYW5UZXh0LnJlcGxhY2UoL1tcdUQ4M0RcdURDQzVcdTIzRjNcdUQ4M0RcdURFRUJdXFxzKlxcZHs0fS1cXGR7Mn0tXFxkezJ9L2csICcnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbGltaW5hciBkZXBlbmRlbmNpYXNcbiAgICAgICAgY2xlYW5UZXh0ID0gY2xlYW5UZXh0LnJlcGxhY2UoL1x1MjZENFxccypcXHcrL2csICcnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFbGltaW5hciBtZXRhZGF0b3MgZW50cmUgY29yY2hldGVzXG4gICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9cXFsoW15cXF1dKylcXF0vZywgJycpLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVsaW1pbmFyIHByaW9yaWRhZGVzXG4gICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKC9bXHUyM0VCXHVEODNEXHVERDNDXHVEODNEXHVERDNEXHUyM0VDXS9nLCAnJykudHJpbSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRWxpbWluYXIgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXNcbiAgICAgICAgY2xlYW5UZXh0ID0gY2xlYW5UZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY2xlYW5UZXh0O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBFeHRyYWUgeSBwcm9jZXNhIGxvcyBtZXRhZGF0b3MgZGUgbGEgdGFyZWFcbiAgICAgKi9cbiAgICBwcml2YXRlIGV4dHJhY3RUYXNrTWV0YWRhdGEodGFzazogVGFzayk6IHZvaWQge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGFzay5yYXdUZXh0O1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBwcmlvcmlkYWRcbiAgICAgICAgdGhpcy5leHRyYWN0UHJpb3JpdHkodGFzaywgdGV4dCk7XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWVyIGZlY2hhcyB5IGhvcmFyaW9zXG4gICAgICAgIHRoaXMuZXh0cmFjdERhdGVzKHRhc2ssIHRleHQpO1xuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBldGlxdWV0YXNcbiAgICAgICAgdGhpcy5leHRyYWN0VGFncyh0YXNrLCB0ZXh0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhZXIgZGVwZW5kZW5jaWFzXG4gICAgICAgIHRoaXMuZXh0cmFjdERlcGVuZGVuY2llcyh0YXNrLCB0ZXh0KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRXh0cmFlIGxhIHByaW9yaWRhZCBkZSBsYSB0YXJlYVxuICAgICAqL1xuICAgIHByaXZhdGUgZXh0cmFjdFByaW9yaXR5KHRhc2s6IFRhc2ssIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBpZiAodGV4dC5pbmNsdWRlcygnXHUyM0VCJykpIHtcbiAgICAgICAgICAgIHRhc2sucHJpb3JpdHkgPSBUYXNrUHJpb3JpdHkuSElHSEVTVDtcbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCdcdUQ4M0RcdUREM0MnKSkge1xuICAgICAgICAgICAgdGFzay5wcmlvcml0eSA9IFRhc2tQcmlvcml0eS5ISUdIO1xuICAgICAgICB9IGVsc2UgaWYgKHRleHQuaW5jbHVkZXMoJ1x1RDgzRFx1REQzRCcpKSB7XG4gICAgICAgICAgICB0YXNrLnByaW9yaXR5ID0gVGFza1ByaW9yaXR5LkxPVztcbiAgICAgICAgfSBlbHNlIGlmICh0ZXh0LmluY2x1ZGVzKCdcdTIzRUMnKSkge1xuICAgICAgICAgICAgdGFzay5wcmlvcml0eSA9IFRhc2tQcmlvcml0eS5MT1dFU1Q7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrLnByaW9yaXR5ID0gVGFza1ByaW9yaXR5Lk5PUk1BTDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBFeHRyYWUgbGFzIGZlY2hhcyB5IGhvcmFyaW9zIGRlIGxhIHRhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0RGF0ZXModGFzazogVGFzaywgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIC8vIEV4dHJhZXIgZmVjaGEgZGUgaW5pY2lvIChcdUQ4M0RcdURFRUIpXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZVJlZ2V4ID0gL1x1RDgzRFx1REVFQlxccyooXFxkezR9LVxcZHsyfS1cXGR7Mn0pLztcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKHN0YXJ0RGF0ZVJlZ2V4KTtcbiAgICAgICAgaWYgKHN0YXJ0RGF0ZU1hdGNoKSB7XG4gICAgICAgICAgICB0YXNrLnRpbWluZy5zdGFydERhdGUgPSBzdGFydERhdGVNYXRjaFsxXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBmZWNoYSBsXHUwMEVEbWl0ZSAoXHVEODNEXHVEQ0M1KVxuICAgICAgICBjb25zdCBkdWVEYXRlUmVnZXggPSAvXHVEODNEXHVEQ0M1XFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgICAgICBjb25zdCBkdWVEYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKGR1ZURhdGVSZWdleCk7XG4gICAgICAgIGlmIChkdWVEYXRlTWF0Y2gpIHtcbiAgICAgICAgICAgIHRhc2sudGltaW5nLmR1ZURhdGUgPSBkdWVEYXRlTWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhZXIgZmVjaGEgcHJvZ3JhbWFkYSAoXHUyM0YzKVxuICAgICAgICBjb25zdCBzY2hlZHVsZWREYXRlUmVnZXggPSAvXHUyM0YzXFxzKihcXGR7NH0tXFxkezJ9LVxcZHsyfSkvO1xuICAgICAgICBjb25zdCBzY2hlZHVsZWREYXRlTWF0Y2ggPSB0ZXh0Lm1hdGNoKHNjaGVkdWxlZERhdGVSZWdleCk7XG4gICAgICAgIGlmIChzY2hlZHVsZWREYXRlTWF0Y2gpIHtcbiAgICAgICAgICAgIHRhc2sudGltaW5nLnNjaGVkdWxlZERhdGUgPSBzY2hlZHVsZWREYXRlTWF0Y2hbMV07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhZXIgaG9yYSBkZSBpbmljaW8gW2hJOjpdXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZVJlZ2V4ID0gL1xcW2hJOjpcXHMqKFteXFxdXSspXFxdLztcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lTWF0Y2ggPSB0ZXh0Lm1hdGNoKHN0YXJ0VGltZVJlZ2V4KTtcbiAgICAgICAgaWYgKHN0YXJ0VGltZU1hdGNoKSB7XG4gICAgICAgICAgICB0YXNrLnRpbWluZy5zdGFydFRpbWUgPSBzdGFydFRpbWVNYXRjaFsxXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBob3JhIGRlIGZpbiBbaEY6Ol1cbiAgICAgICAgY29uc3QgZW5kVGltZVJlZ2V4ID0gL1xcW2hGOjpcXHMqKFteXFxdXSspXFxdLztcbiAgICAgICAgY29uc3QgZW5kVGltZU1hdGNoID0gdGV4dC5tYXRjaChlbmRUaW1lUmVnZXgpO1xuICAgICAgICBpZiAoZW5kVGltZU1hdGNoKSB7XG4gICAgICAgICAgICB0YXNrLnRpbWluZy5lbmRUaW1lID0gZW5kVGltZU1hdGNoWzFdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFeHRyYWVyIGR1cmFjaVx1MDBGM24gZW4gbWludXRvcyBbWG1pbl1cbiAgICAgICAgY29uc3QgZHVyYXRpb25NaW5SZWdleCA9IC9cXFsoXFxkKyltaW5cXF0vO1xuICAgICAgICBjb25zdCBkdXJhdGlvbk1pbk1hdGNoID0gdGV4dC5tYXRjaChkdXJhdGlvbk1pblJlZ2V4KTtcbiAgICAgICAgaWYgKGR1cmF0aW9uTWluTWF0Y2gpIHtcbiAgICAgICAgICAgIHRhc2sudGltaW5nLmR1cmF0aW9uID0gcGFyc2VJbnQoZHVyYXRpb25NaW5NYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEV4dHJhZXIgZHVyYWNpXHUwMEYzbiBlbiBob3JhcyBbWGhdXG4gICAgICAgIGNvbnN0IGR1cmF0aW9uSG91clJlZ2V4ID0gL1xcWyhcXGQrKD86XFwuXFxkKyk/KWhcXF0vO1xuICAgICAgICBjb25zdCBkdXJhdGlvbkhvdXJNYXRjaCA9IHRleHQubWF0Y2goZHVyYXRpb25Ib3VyUmVnZXgpO1xuICAgICAgICBpZiAoZHVyYXRpb25Ib3VyTWF0Y2gpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnRpciBob3JhcyBhIG1pbnV0b3NcbiAgICAgICAgICAgIHRhc2sudGltaW5nLmR1cmF0aW9uID0gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGR1cmF0aW9uSG91ck1hdGNoWzFdKSAqIDYwKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXh0cmFlciBzZW1hbmEgW3c6OiBbW1lZWVktV1hYXV1dXG4gICAgICAgIGNvbnN0IHdlZWtSZWdleCA9IC9cXFt3OjpcXHMqXFxbXFxbKFteXFxdXSspXFxdXFxdXFxdLztcbiAgICAgICAgY29uc3Qgd2Vla01hdGNoID0gdGV4dC5tYXRjaCh3ZWVrUmVnZXgpO1xuICAgICAgICBpZiAod2Vla01hdGNoKSB7XG4gICAgICAgICAgICB0YXNrLnRpbWluZy53ZWVrID0gd2Vla01hdGNoWzFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSB0b2RhcyBsYXMgZXRpcXVldGFzIGRlIGxhIHRhcmVhXG4gICAgICovXG4gICAgLyoqXG4gICAgICogRXh0cmFlIHRvZGFzIGxhcyBldGlxdWV0YXMgZGUgbGEgdGFyZWFcbiAgICAgKi9cbiAgICBwcml2YXRlIGV4dHJhY3RUYWdzKHRhc2s6IFRhc2ssIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvLyBJbmljaWFsaXphciBhcnJheXMgdmFjXHUwMEVEb3NcbiAgICAgICAgdGFzay50YWdzLmNvbnRleHRzID0gW107XG4gICAgICAgIHRhc2sudGFncy5wZW9wbGUgPSBbXTtcbiAgICAgICAgdGFzay50YWdzLmd0ZFRhZ3MgPSBbXTtcbiAgICAgICAgdGFzay50YWdzLm90aGVyVGFncyA9IFtdO1xuICAgICAgICB0YXNrLnRhZ3MuYWxsID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBSZWdleCBwYXJhIGRldGVjdGFyIGV0aXF1ZXRhcyAoI2FsZ28pXG4gICAgICAgIGNvbnN0IHRhZ1JlZ2V4ID0gLyMoW2EtekEtWjAtOV8tXSspL2c7XG4gICAgICAgIGxldCB0YWdNYXRjaDtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlICgodGFnTWF0Y2ggPSB0YWdSZWdleC5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgdGFnID0gdGFnTWF0Y2hbMV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIGFsIGFycmF5IGRlIHRvZG9zIGxvcyB0YWdzXG4gICAgICAgICAgICB0YXNrLnRhZ3MuYWxsLnB1c2godGFnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xhc2lmaWNhciBlbCB0YWcgc2VnXHUwMEZBbiBzdSB0aXBvXG4gICAgICAgICAgICBpZiAodGFnLnN0YXJ0c1dpdGgoJ2N4LScpKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udGV4dG9cbiAgICAgICAgICAgICAgICB0YXNrLnRhZ3MuY29udGV4dHMucHVzaCh0YWcpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWcuc3RhcnRzV2l0aCgncHgtJykpIHtcbiAgICAgICAgICAgICAgICAvLyBQZXJzb25hIGFzaWduYWRhXG4gICAgICAgICAgICAgICAgdGFzay50YWdzLnBlb3BsZS5wdXNoKHRhZyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZy5zdGFydHNXaXRoKCdHVEQtJykpIHtcbiAgICAgICAgICAgICAgICAvLyBUYWcgcmVsYWNpb25hZG8gY29uIEdURFxuICAgICAgICAgICAgICAgIHRhc2sudGFncy5ndGRUYWdzLnB1c2godGFnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT3RybyB0aXBvIGRlIHRhZ1xuICAgICAgICAgICAgICAgIHRhc2sudGFncy5vdGhlclRhZ3MucHVzaCh0YWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSBsYXMgZGVwZW5kZW5jaWFzIGRlIGxhIHRhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0RGVwZW5kZW5jaWVzKHRhc2s6IFRhc2ssIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvLyBSZWdleCBwYXJhIGRldGVjdGFyIGRlcGVuZGVuY2lhcyAoXHUyNkQ0IHNlZ3VpZG8gZGUgdW4gSUQpXG4gICAgICAgIGNvbnN0IGRlcGVuZGVuY3lSZWdleCA9IC9cdTI2RDRcXHMqKFxcdyspL2c7XG4gICAgICAgIGxldCBkZXBlbmRlbmN5TWF0Y2g7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoKGRlcGVuZGVuY3lNYXRjaCA9IGRlcGVuZGVuY3lSZWdleC5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgZGVwZW5kZW5jeUlkID0gZGVwZW5kZW5jeU1hdGNoWzFdO1xuICAgICAgICAgICAgdGFzay5kZXBlbmRlbmNpZXMucHVzaChkZXBlbmRlbmN5SWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEV4dHJhZSBlbCBJRCBkZSBsYSB0YXJlYSBkZWwgdGV4dG8gc2kgZXhpc3RlXG4gICAgICovXG4gICAgcHJpdmF0ZSBleHRyYWN0VGFza0lkKHRleHQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICAvLyBSZWdleCBwYXJhIGV4dHJhZXIgZWwgSUQgZGUgbGEgdGFyZWEgKFx1RDgzQ1x1REQ5NCBzZWd1aWRvIGRlIHVuIElEKVxuICAgICAgICBjb25zdCBpZFJlZ2V4ID0gL1x1RDgzQ1x1REQ5NFxccyooXFx3KykvO1xuICAgICAgICBjb25zdCBpZE1hdGNoID0gdGV4dC5tYXRjaChpZFJlZ2V4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpZE1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gaWRNYXRjaFsxXTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEdlbmVyYSB1biBJRCBcdTAwRkFuaWNvIHBhcmEgbGEgdGFyZWEgc2kgbm8gdGllbmUgdW5vIGV4cGxcdTAwRURjaXRvXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVRhc2tJZChmaWxlUHJlZml4OiBzdHJpbmcsIGxpbmVOdW1iZXI6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIC8vIFVzYXIgdW4gcHJlZmlqbyBiYXNhZG8gZW4gZWwgYXJjaGl2byB5IGVsIG5cdTAwRkFtZXJvIGRlIGxcdTAwRURuZWFcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKS50b1N0cmluZygzNik7XG4gICAgICAgIGNvbnN0IHJhbmRvbSA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBgJHtmaWxlUHJlZml4LnN1YnN0cmluZygwLCAzKX0ke2xpbmVOdW1iZXJ9JHt0aW1lc3RhbXAuc3Vic3RyaW5nKHRpbWVzdGFtcC5sZW5ndGgtNCl9JHtyYW5kb219YC50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbn1cblxuLy8gREVWRUxPUE1FTlRfQ0hFQ0tQT0lOVDogXCJ0YXNrX3BhcnNlclwiXG4vLyBEZXNjcmlwY2lcdTAwRjNuOiBTZXJ2aWNpbyBwYXJhIGFuYWxpemFyIHkgZXh0cmFlciB0YXJlYXMgZGUgYXJjaGl2b3Ncbi8vIEVzdGFkbzogQ29tcGxldG8iLCAiLy8gc3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9tb2RlbHMvSGllcmFyY2h5Vmlld01vZGVsLnRzXG5cbmltcG9ydCB7IElFbnRpdHksIEVudGl0eVR5cGUgfSBmcm9tICcuL0VudGl0eSc7XG5pbXBvcnQgeyBUYXNrLCBUYXNrTGlzdFR5cGUgfSBmcm9tICcuL1Rhc2snO1xuXG4vKipcbiAqIE1vZG9zIGRlIHZpc3VhbGl6YWNpXHUwMEYzbiBwYXJhIGVsIG5hdmVnYWRvciBkZSB0YXJlYXNcbiAqL1xuZXhwb3J0IGVudW0gVmlld01vZGUge1xuICAgIEhJRVJBUkNIWSA9ICdoaWVyYXJjaHknLCAgICAgLy8gVmlzdGEgamVyXHUwMEUxcnF1aWNhIChwb3IgZXN0cnVjdHVyYSlcbiAgICBHVERfTElTVFMgPSAnZ3RkTGlzdHMnLCAgICAgIC8vIFZpc3RhIGRlIGxpc3RhcyBHVERcbiAgICBDT01CSU5FRCA9ICdjb21iaW5lZCcgICAgICAgIC8vIFZpc3RhIGNvbWJpbmFkYVxufVxuXG4vKipcbiAqIE9wY2lvbmVzIGRlIGZpbHRyYWRvIHBhcmEgbGEgdmlzdWFsaXphY2lcdTAwRjNuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyT3B0aW9ucyB7XG4gICAgLy8gRmlsdHJvcyBnZW5lcmFsZXNcbiAgICBzaG93Q29tcGxldGVkOiBib29sZWFuOyAgICAgIC8vIE1vc3RyYXIgdGFyZWFzIGNvbXBsZXRhZGFzXG4gICAgc2hvd0FjdGl2ZTogYm9vbGVhbjsgICAgICAgICAvLyBNb3N0cmFyIGVudGlkYWRlcyBhY3RpdmFzIChcdUQ4M0RcdURGRTIpXG4gICAgc2hvd1BhdXNlZDogYm9vbGVhbjsgICAgICAgICAvLyBNb3N0cmFyIGVudGlkYWRlcyBwYXVzYWRhcyAoXHVEODNEXHVERkUxKVxuICAgIHNob3dTdG9wcGVkOiBib29sZWFuOyAgICAgICAgLy8gTW9zdHJhciBlbnRpZGFkZXMgZGV0ZW5pZGFzIChcdUQ4M0RcdUREMzQpXG4gICAgc2hvd0FyY2hpdmVkOiBib29sZWFuOyAgICAgICAvLyBNb3N0cmFyIGVudGlkYWRlcyBhcmNoaXZhZGFzIChcdUQ4M0RcdUREMzUpXG4gICAgXG4gICAgLy8gRmlsdHJvcyBwb3IgdGlwbyBkZSBlbnRpZGFkXG4gICAgc2hvd0FyZWFzVmlkYTogYm9vbGVhbjsgICAgICAvLyBNb3N0cmFyIFx1MDBDMXJlYXMgZGUgVmlkYVxuICAgIHNob3dBcmVhc0ludGVyZXM6IGJvb2xlYW47ICAgLy8gTW9zdHJhciBcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1xuICAgIHNob3dQcm95ZWN0b3NROiBib29sZWFuOyAgICAgLy8gTW9zdHJhciBQcm95ZWN0b3MgUVxuICAgIHNob3dQcm95ZWN0b3NHVEQ6IGJvb2xlYW47ICAgLy8gTW9zdHJhciBQcm95ZWN0b3MgR1REXG4gICAgc2hvd090aGVyRW50aXRpZXM6IGJvb2xlYW47ICAvLyBNb3N0cmFyIG90cmFzIGVudGlkYWRlc1xuICAgIFxuICAgIC8vIEZpbHRyb3MgcG9yIGNvbnRleHRvXG4gICAgY29udGV4dHM6IHN0cmluZ1tdOyAgICAgICAgICAvLyBDb250ZXh0b3MgYSBtb3N0cmFyICgjY3gtKVxuICAgIHBlb3BsZTogc3RyaW5nW107ICAgICAgICAgICAgLy8gUGVyc29uYXMgYSBtb3N0cmFyICgjcHgtKVxuICAgIFxuICAgIC8vIEZpbHRyb3MgcG9yIGxpc3RhcyBHVERcbiAgICBlbmFibGVkTGlzdHM6IFRhc2tMaXN0VHlwZVtdOyAvLyBMaXN0YXMgR1REIGhhYmlsaXRhZGFzXG4gICAgXG4gICAgLy8gT3Ryb3MgZmlsdHJvc1xuICAgIHNlYXJjaFRleHQ6IHN0cmluZzsgICAgICAgICAgLy8gVGV4dG8gZGUgYlx1MDBGQXNxdWVkYVxuICAgIGRheXNSYW5nZTogbnVtYmVyOyAgICAgICAgICAgLy8gUmFuZ28gZGUgZFx1MDBFRGFzIHBhcmEgbW9zdHJhciB0YXJlYXMgcG9yIGZlY2hhXG59XG5cbi8qKlxuICogTW9kZWxvIHBhcmEgbGEgdmlzdGEgamVyXHUwMEUxcnF1aWNhXG4gKi9cbmV4cG9ydCBjbGFzcyBIaWVyYXJjaHlWaWV3TW9kZWwge1xuICAgIC8vIEVudGlkYWQgZW4gZm9jbyAobGEgbm90YSBhY3RpdmEgYWN0dWFsKVxuICAgIGZvY3VzRW50aXR5OiBJRW50aXR5IHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgLy8gRW50aWRhZGVzIHJhXHUwMEVEeiBwYXJhIGxhIGplcmFycXVcdTAwRURhXG4gICAgcm9vdEVudGl0aWVzOiBJRW50aXR5W10gPSBbXTtcbiAgICBcbiAgICAvLyBUb2RhcyBsYXMgZW50aWRhZGVzIGRpc3BvbmlibGVzXG4gICAgYWxsRW50aXRpZXM6IElFbnRpdHlbXSA9IFtdO1xuICAgIFxuICAgIC8vIFRvZGFzIGxhcyB0YXJlYXMgY2xhc2lmaWNhZGFzIHBvciB0aXBvIGRlIGxpc3RhIEdURFxuICAgIGd0ZExpc3RzOiBNYXA8VGFza0xpc3RUeXBlLCBUYXNrW10+ID0gbmV3IE1hcCgpO1xuICAgIFxuICAgIC8vIFRvZGFzIGxhcyB0YXJlYXMgc2luIGNsYXNpZmljYXJcbiAgICBhbGxUYXNrczogVGFza1tdID0gW107XG4gICAgXG4gICAgLy8gTW9kbyBkZSB2aXN1YWxpemFjaVx1MDBGM24gYWN0dWFsXG4gICAgdmlld01vZGU6IFZpZXdNb2RlID0gVmlld01vZGUuSElFUkFSQ0hZO1xuICAgIFxuICAgIC8vIEZpbHRyb3MgYXBsaWNhZG9zIGFjdHVhbG1lbnRlXG4gICAgZmlsdGVyczogRmlsdGVyT3B0aW9ucztcbiAgICBcbiAgICAvLyBSZXN1bHRhZG9zIGZpbHRyYWRvcyAocGFyYSBtb3N0cmFyKVxuICAgIGZpbHRlcmVkRW50aXRpZXM6IElFbnRpdHlbXSA9IFtdO1xuICAgIGZpbHRlcmVkVGFza3M6IE1hcDxUYXNrTGlzdFR5cGUsIFRhc2tbXT4gPSBuZXcgTWFwKCk7XG4gICAgXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEluaWNpYWxpemFyIGZpbHRyb3MgcG9yIGRlZmVjdG9cbiAgICAgICAgdGhpcy5maWx0ZXJzID0ge1xuICAgICAgICAgICAgc2hvd0NvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgICBzaG93QWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgc2hvd1BhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dTdG9wcGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dBcmNoaXZlZDogZmFsc2UsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNob3dBcmVhc1ZpZGE6IHRydWUsXG4gICAgICAgICAgICBzaG93QXJlYXNJbnRlcmVzOiB0cnVlLFxuICAgICAgICAgICAgc2hvd1Byb3llY3Rvc1E6IHRydWUsXG4gICAgICAgICAgICBzaG93UHJveWVjdG9zR1REOiB0cnVlLFxuICAgICAgICAgICAgc2hvd090aGVyRW50aXRpZXM6IHRydWUsXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnRleHRzOiBbXSxcbiAgICAgICAgICAgIHBlb3BsZTogW10sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVuYWJsZWRMaXN0czogT2JqZWN0LnZhbHVlcyhUYXNrTGlzdFR5cGUpLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZWFyY2hUZXh0OiAnJyxcbiAgICAgICAgICAgIGRheXNSYW5nZTogN1xuICAgICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBcGxpY2EgbG9zIGZpbHRyb3Mgc2VsZWNjaW9uYWRvcyBhIGxhcyBlbnRpZGFkZXMgeSB0YXJlYXNcbiAgICAgKi9cbiAgICBhcHBseUZpbHRlcnMoZmlsdGVyczogUGFydGlhbDxGaWx0ZXJPcHRpb25zPik6IHZvaWQge1xuICAgICAgICAvLyBBY3R1YWxpemFyIGZpbHRyb3MgY29uIGxvcyBudWV2b3MgdmFsb3Jlc1xuICAgICAgICB0aGlzLmZpbHRlcnMgPSB7IC4uLnRoaXMuZmlsdGVycywgLi4uZmlsdGVycyB9O1xuICAgICAgICBcbiAgICAgICAgLy8gRmlsdHJhciBlbnRpZGFkZXMgc2VnXHUwMEZBbiBsb3MgY3JpdGVyaW9zXG4gICAgICAgIHRoaXMuZmlsdGVyZWRFbnRpdGllcyA9IHRoaXMuZmlsdGVyRW50aXRpZXModGhpcy5yb290RW50aXRpZXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gRmlsdHJhciB0YXJlYXMgc2VnXHUwMEZBbiBsb3MgY3JpdGVyaW9zXG4gICAgICAgIHRoaXMuZmlsdGVyZWRUYXNrcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgZm9yIChjb25zdCBsaXN0VHlwZSBvZiBPYmplY3QudmFsdWVzKFRhc2tMaXN0VHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gdGhpcy5ndGRMaXN0cy5nZXQobGlzdFR5cGUpIHx8IFtdO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRUYXNrcyA9IHRoaXMuZmlsdGVyVGFza3ModGFza3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJzLmVuYWJsZWRMaXN0cy5pbmNsdWRlcyhsaXN0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcmVkVGFza3Muc2V0KGxpc3RUeXBlLCBmaWx0ZXJlZFRhc2tzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBGaWx0cmEgdW4gY29uanVudG8gZGUgZW50aWRhZGVzIHkgc3VzIGhpam9zIHJlY3Vyc2l2YW1lbnRlXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaWx0ZXJFbnRpdGllcyhlbnRpdGllczogSUVudGl0eVtdKTogSUVudGl0eVtdIHtcbiAgICAgICAgY29uc3QgcmVzdWx0OiBJRW50aXR5W10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIGVudGl0aWVzKSB7XG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdGlwbyBkZSBlbnRpZGFkIGVzdFx1MDBFMSBoYWJpbGl0YWRvIGVuIGxvcyBmaWx0cm9zXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNFbnRpdHlUeXBlRW5hYmxlZChlbnRpdHkudHlwZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGVzdGFkbyBkZSBsYSBlbnRpZGFkIGVzdFx1MDBFMSBoYWJpbGl0YWRvIGVuIGxvcyBmaWx0cm9zXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNFbnRpdHlTdGF0ZUVuYWJsZWQoZW50aXR5LnN0YXRlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgbGEgZW50aWRhZCBjb2luY2lkZSBjb24gZWwgdGV4dG8gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVycy5zZWFyY2hUZXh0ICYmICF0aGlzLm1hdGNoZXNTZWFyY2hUZXh0KGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xvbmFyIGxhIGVudGlkYWQgcGFyYSBubyBtb2RpZmljYXIgbGEgb3JpZ2luYWxcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRW50aXR5ID0geyAuLi5lbnRpdHkgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdHJhciBoaWpvcyByZWN1cnNpdmFtZW50ZVxuICAgICAgICAgICAgZmlsdGVyZWRFbnRpdHkuY2hpbGRyZW4gPSB0aGlzLmZpbHRlckVudGl0aWVzKGVudGl0eS5jaGlsZHJlbik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRyYXIgdGFyZWFzIGRlIGxhIGVudGlkYWRcbiAgICAgICAgICAgIGZpbHRlcmVkRW50aXR5LnRhc2tzID0gdGhpcy5maWx0ZXJUYXNrcyhlbnRpdHkudGFza3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSBlbnRpZGFkIGZpbHRyYWRhIGFsIHJlc3VsdGFkbyBzaSB0aWVuZSBoaWpvcyBvIHRhcmVhc1xuICAgICAgICAgICAgaWYgKGZpbHRlcmVkRW50aXR5LmNoaWxkcmVuLmxlbmd0aCA+IDAgfHwgZmlsdGVyZWRFbnRpdHkudGFza3MubGVuZ3RoID4gMCB8fCBlbnRpdHkgPT09IHRoaXMuZm9jdXNFbnRpdHkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChmaWx0ZXJlZEVudGl0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEZpbHRyYSB1biBjb25qdW50byBkZSB0YXJlYXMgc2VnXHUwMEZBbiBsb3MgY3JpdGVyaW9zXG4gICAgICovXG4gICAgcHJpdmF0ZSBmaWx0ZXJUYXNrcyh0YXNrczogVGFza1tdKTogVGFza1tdIHtcbiAgICAgICAgcmV0dXJuIHRhc2tzLmZpbHRlcih0YXNrID0+IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBzZSBtdWVzdHJhbiB0YXJlYXMgY29tcGxldGFkYXNcbiAgICAgICAgICAgIGlmICh0YXNrLmNvbXBsZXRlZCAmJiAhdGhpcy5maWx0ZXJzLnNob3dDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBsYSB0YXJlYSBjb2luY2lkZSBjb24gZWwgdGV4dG8gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsdGVycy5zZWFyY2hUZXh0ICYmICF0aGlzLnRhc2tNYXRjaGVzU2VhcmNoVGV4dCh0YXNrKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdHJhciBwb3IgY29udGV4dG9zIHNpIHNlIGhhbiBlc3BlY2lmaWNhZG9cbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlcnMuY29udGV4dHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc01hdGNoaW5nQ29udGV4dCA9IHRoaXMuZmlsdGVycy5jb250ZXh0cy5zb21lKGN0eCA9PiBcbiAgICAgICAgICAgICAgICAgICAgdGFzay50YWdzLmNvbnRleHRzLmluY2x1ZGVzKGN0eCkpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzTWF0Y2hpbmdDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpbHRyYXIgcG9yIHBlcnNvbmFzIGFzaWduYWRhcyBzaSBzZSBoYW4gZXNwZWNpZmljYWRvXG4gICAgICAgICAgICBpZiAodGhpcy5maWx0ZXJzLnBlb3BsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFzTWF0Y2hpbmdQZXJzb24gPSB0aGlzLmZpbHRlcnMucGVvcGxlLnNvbWUocGVyc29uID0+IFxuICAgICAgICAgICAgICAgICAgICB0YXNrLnRhZ3MucGVvcGxlLmluY2x1ZGVzKHBlcnNvbikpO1xuICAgICAgICAgICAgICAgIGlmICghaGFzTWF0Y2hpbmdQZXJzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdHJhciBwb3IgcmFuZ28gZGUgZFx1MDBFRGFzIHBhcmEgZmVjaGFzXG4gICAgICAgICAgICBpZiAodGFzay50aW1pbmcuZHVlRGF0ZSB8fCB0YXNrLnRpbWluZy5zY2hlZHVsZWREYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF5c1VudGlsRHVlID0gdGFzay5nZXREYXlzVW50aWxEdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF5c1VudGlsRHVlICE9PSBudWxsICYmIE1hdGguYWJzKGRheXNVbnRpbER1ZSkgPiB0aGlzLmZpbHRlcnMuZGF5c1JhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29tcHJ1ZWJhIHNpIGVsIHRpcG8gZGUgZW50aWRhZCBlc3RcdTAwRTEgaGFiaWxpdGFkbyBlbiBsb3MgZmlsdHJvc1xuICAgICAqL1xuICAgIHByaXZhdGUgaXNFbnRpdHlUeXBlRW5hYmxlZCh0eXBlOiBFbnRpdHlUeXBlKTogYm9vbGVhbiB7XG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkFSRUFfVklEQTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLnNob3dBcmVhc1ZpZGE7XG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuQVJFQV9JTlRFUkVTOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuc2hvd0FyZWFzSW50ZXJlcztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5QUk9ZRUNUT19ROlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuc2hvd1Byb3llY3Rvc1E7XG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuUFJPWUVDVE9fR1REOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuc2hvd1Byb3llY3Rvc0dURDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycy5zaG93T3RoZXJFbnRpdGllcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb21wcnVlYmEgc2kgZWwgZXN0YWRvIGRlIGxhIGVudGlkYWQgZXN0XHUwMEUxIGhhYmlsaXRhZG8gZW4gbG9zIGZpbHRyb3NcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzRW50aXR5U3RhdGVFbmFibGVkKHN0YXRlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSAnXHVEODNEXHVERkUyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLnNob3dBY3RpdmU7XG4gICAgICAgICAgICBjYXNlICdcdUQ4M0RcdURGRTEnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuc2hvd1BhdXNlZDtcbiAgICAgICAgICAgIGNhc2UgJ1x1RDgzRFx1REQzNCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycy5zaG93U3RvcHBlZDtcbiAgICAgICAgICAgIGNhc2UgJ1x1RDgzRFx1REQzNSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycy5zaG93QXJjaGl2ZWQ7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBTaSBubyB0aWVuZSBlc3RhZG8sIG1vc3RyYXIgcG9yIGRlZmVjdG9cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb21wcnVlYmEgc2kgbGEgZW50aWRhZCBjb2luY2lkZSBjb24gZWwgdGV4dG8gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAqL1xuICAgIHByaXZhdGUgbWF0Y2hlc1NlYXJjaFRleHQoZW50aXR5OiBJRW50aXR5KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFRleHQgPSB0aGlzLmZpbHRlcnMuc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gZW50aXR5LnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoVGV4dCkgfHwgXG4gICAgICAgICAgICAgICBlbnRpdHkuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hUZXh0KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29tcHJ1ZWJhIHNpIGxhIHRhcmVhIGNvaW5jaWRlIGNvbiBlbCB0ZXh0byBkZSBiXHUwMEZBc3F1ZWRhXG4gICAgICovXG4gICAgcHJpdmF0ZSB0YXNrTWF0Y2hlc1NlYXJjaFRleHQodGFzazogVGFzayk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzZWFyY2hUZXh0ID0gdGhpcy5maWx0ZXJzLnNlYXJjaFRleHQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHRhc2sudGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuICAgIH1cbn1cblxuLy8gREVWRUxPUE1FTlRfQ0hFQ0tQT0lOVDogXCJoaWVyYXJjaHlfdmlld19tb2RlbFwiXG4vLyBEZXNjcmlwY2lcdTAwRjNuOiBJbXBsZW1lbnRhY2lcdTAwRjNuIGRlbCBtb2RlbG8gcGFyYSBsYSB2aXN0YSBqZXJcdTAwRTFycXVpY2EgY29uIGZpbHRyb3Ncbi8vIEVzdGFkbzogQ29tcGxldG8iLCAiLy8gc3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9zZXJ2aWNlcy9UYXNrQ2xhc3NpZmllci50c1xuXG5pbXBvcnQgeyBUYXNrLCBUYXNrTGlzdFR5cGUgfSBmcm9tICcuLi9tb2RlbHMvVGFzayc7XG5pbXBvcnQgeyBIaWVyYXJjaHlWaWV3TW9kZWwgfSBmcm9tICcuLi9tb2RlbHMvSGllcmFyY2h5Vmlld01vZGVsJztcbmltcG9ydCB7IEVudGl0eVR5cGUgfSBmcm9tICcuLi9tb2RlbHMvRW50aXR5JztcblxuLyoqXG4gKiBTZXJ2aWNpbyBwYXJhIGNsYXNpZmljYXIgdGFyZWFzIHNlZ1x1MDBGQW4gbGFzIHJlZ2xhcyBkZWwgc2lzdGVtYSBHVERcbiAqL1xuZXhwb3J0IGNsYXNzIFRhc2tDbGFzc2lmaWVyIHtcbiAgICAvKipcbiAgICAgKiBDbGFzaWZpY2EgdG9kYXMgbGFzIHRhcmVhcyBlbiBlbCBtb2RlbG8gamVyXHUwMEUxcnF1aWNvXG4gICAgICovXG4gICAgYXN5bmMgY2xhc3NpZnlUYXNrcyhtb2RlbDogSGllcmFyY2h5Vmlld01vZGVsKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBJbmljaWFsaXphciBsYXMgbGlzdGFzIEdURFxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplR1RETGlzdHMobW9kZWwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPYnRlbmVyIHRvZGFzIGxhcyB0YXJlYXMgZGVsIG1vZGVsb1xuICAgICAgICAgICAgY29uc3QgYWxsVGFza3MgPSB0aGlzLmdldEFsbFRhc2tzKG1vZGVsKTtcbiAgICAgICAgICAgIG1vZGVsLmFsbFRhc2tzID0gYWxsVGFza3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsYXNpZmljYXIgY2FkYSB0YXJlYVxuICAgICAgICAgICAgZm9yIChjb25zdCB0YXNrIG9mIGFsbFRhc2tzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2suY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExhcyB0YXJlYXMgY29tcGxldGFkYXMgc2UgaWdub3JhbiBvIHNlIHBvZHJcdTAwRURhbiBjb2xvY2FyIGVuIHVuYSBsaXN0YSBzZXBhcmFkYVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hciBhIHF1XHUwMEU5IGxpc3RhIEdURCBwZXJ0ZW5lY2VcbiAgICAgICAgICAgICAgICBjb25zdCBsaXN0VHlwZSA9IHRoaXMuZGV0ZXJtaW5lVGFza0xpc3QodGFzaywgYWxsVGFza3MpO1xuICAgICAgICAgICAgICAgIHRhc2subGlzdFR5cGUgPSBsaXN0VHlwZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSB0YXJlYSBhIGxhIGxpc3RhIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tzSW5MaXN0ID0gbW9kZWwuZ3RkTGlzdHMuZ2V0KGxpc3RUeXBlKSB8fCBbXTtcbiAgICAgICAgICAgICAgICB0YXNrc0luTGlzdC5wdXNoKHRhc2spO1xuICAgICAgICAgICAgICAgIG1vZGVsLmd0ZExpc3RzLnNldChsaXN0VHlwZSwgdGFza3NJbkxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxvcyByZXN1bHRhZG9zIGZpbHRyYWRvcyBpbmljaWFsZXMgKHNpbiBmaWx0cm9zIGFwbGljYWRvcylcbiAgICAgICAgICAgIG1vZGVsLmZpbHRlcmVkVGFza3MgPSBuZXcgTWFwKG1vZGVsLmd0ZExpc3RzKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNsYXNpZmljYXIgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBJbmljaWFsaXphIGxhcyBsaXN0YXMgR1REIHZhY1x1MDBFRGFzXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplR1RETGlzdHMobW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IHZvaWQge1xuICAgICAgICBtb2RlbC5ndGRMaXN0cy5jbGVhcigpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgdW5hIGVudHJhZGEgcGFyYSBjYWRhIHRpcG8gZGUgbGlzdGFcbiAgICAgICAgZm9yIChjb25zdCBsaXN0VHlwZSBvZiBPYmplY3QudmFsdWVzKFRhc2tMaXN0VHlwZSkpIHtcbiAgICAgICAgICAgIG1vZGVsLmd0ZExpc3RzLnNldChsaXN0VHlwZSwgW10pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgdG9kYXMgbGFzIHRhcmVhcyBkZWwgbW9kZWxvIGplclx1MDBFMXJxdWljb1xuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0QWxsVGFza3MobW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IFRhc2tbXSB7XG4gICAgICAgIGNvbnN0IGFsbFRhc2tzOiBUYXNrW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2Nlc3NFbnRpdHkgPSAoZW50aXR5KSA9PiB7XG4gICAgICAgICAgICAvLyBBXHUwMEYxYWRpciB0YXJlYXMgZGUgbGEgZW50aWRhZCBhY3R1YWxcbiAgICAgICAgICAgIGFsbFRhc2tzLnB1c2goLi4uZW50aXR5LnRhc2tzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUHJvY2VzYXIgZW50aWRhZGVzIGhpamFzIHJlY3Vyc2l2YW1lbnRlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIGVudGl0eS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIHByb2Nlc3NFbnRpdHkoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzYXIgdG9kYXMgbGFzIGVudGlkYWRlcyByYVx1MDBFRHpcbiAgICAgICAgZm9yIChjb25zdCByb290RW50aXR5IG9mIG1vZGVsLnJvb3RFbnRpdGllcykge1xuICAgICAgICAgICAgcHJvY2Vzc0VudGl0eShyb290RW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGFsbFRhc2tzO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmEgYSBxdVx1MDBFOSBsaXN0YSBHVEQgcGVydGVuZWNlIHVuYSB0YXJlYVxuICAgICAqL1xuICAgIHByaXZhdGUgZGV0ZXJtaW5lVGFza0xpc3QodGFzazogVGFzaywgYWxsVGFza3M6IFRhc2tbXSk6IFRhc2tMaXN0VHlwZSB7XG4gICAgICAgIC8vIENvbXByb2JhciBzaSBsYSB0YXJlYSBlcyBwYXJhIFwiQWxnXHUwMEZBbiBEXHUwMEVEYSAvIFRhbCBWZXpcIlxuICAgICAgICBpZiAodGFzay5oYXNHVERUYWcoJ0FsZ3VuRGlhJykpIHtcbiAgICAgICAgICAgIHJldHVybiBUYXNrTGlzdFR5cGUuU09NRURBWV9NQVlCRTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIHRhcmVhIGVzIHBhcmEgXCJFc3RhIFNlbWFuYSBOb1wiXG4gICAgICAgIGlmICh0YXNrLmhhc0dURFRhZygnRXN0YVNlbWFuYU5vJykpIHtcbiAgICAgICAgICAgIHJldHVybiBUYXNrTGlzdFR5cGUuTk9UX1RISVNfV0VFSztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIHRhcmVhIGVzIGRlIFwiUHJveWVjdG9zXCJcbiAgICAgICAgaWYgKHRhc2suaGFzQ29udGV4dCgnUHJveWVjdG9HVEQnKSB8fCB0YXNrLmhhc0NvbnRleHQoJ0VudHJlZ2FibGUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIFRhc2tMaXN0VHlwZS5QUk9KRUNUUztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIHRhcmVhIGVzIGRlIFwiQ2FsZW5kYXJpb1wiXG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5kdWVEYXRlICYmIHRhc2sudGltaW5nLnN0YXJ0VGltZSkge1xuICAgICAgICAgICAgcmV0dXJuIFRhc2tMaXN0VHlwZS5DQUxFTkRBUjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIHRhcmVhIGVzdFx1MDBFMSBlbiBwYXVzYVxuICAgICAgICBpZiAodGhpcy5pc1Rhc2tXYWl0aW5nKHRhc2ssIGFsbFRhc2tzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFRhc2tMaXN0VHlwZS5XQUlUSU5HO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb21wcm9iYXIgc2kgbGEgdGFyZWEgZXMgZGUgXCJPamFsXHUwMEUxIEhveVwiXG4gICAgICAgIGlmICh0aGlzLmlzVGFza0ZvclRvZGF5KHRhc2spKSB7XG4gICAgICAgICAgICByZXR1cm4gVGFza0xpc3RUeXBlLkhPUEVGVUxMWV9UT0RBWTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29tcHJvYmFyIHNpIGxhIHRhcmVhIGVzdFx1MDBFMSBcIkFzaWduYWRhXCJcbiAgICAgICAgaWYgKHRhc2sudGFncy5wZW9wbGUubGVuZ3RoID4gMCAmJiB0YXNrLnRhZ3MuY29udGV4dHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gVGFza0xpc3RUeXBlLkFTU0lHTkVEO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDb21wcm9iYXIgc2kgbGEgdGFyZWEgZXMgZGUgXCJQclx1MDBGM3hpbWFzIEFjY2lvbmVzXCJcbiAgICAgICAgaWYgKHRhc2sudGFncy5jb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gVGFza0xpc3RUeXBlLk5FWFRfQUNUSU9OUztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gY3VtcGxlIG5pbmd1bm8gZGUgbG9zIGNyaXRlcmlvcyBhbnRlcmlvcmVzLCB2YSBhIFwiQmFuZGVqYSBkZSBFbnRyYWRhXCJcbiAgICAgICAgcmV0dXJuIFRhc2tMaXN0VHlwZS5JTkJPWDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5hIHNpIHVuYSB0YXJlYSBlc3RcdTAwRTEgZW4gcGF1c2EgKGVuIGVzcGVyYSlcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzVGFza1dhaXRpbmcodGFzazogVGFzaywgYWxsVGFza3M6IFRhc2tbXSk6IGJvb2xlYW4ge1xuICAgICAgICAvLyAxLiBQb3IgZmVjaGEgZnV0dXJhXG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5zdGFydERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHRhc2sudGltaW5nLnN0YXJ0RGF0ZSk7XG4gICAgICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZSA+IHRvZGF5KSB7XG4gICAgICAgICAgICAgICAgdGFzay5pc0Jsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRhc2suYmxvY2tSZWFzb24gPSBgRXNwZXJhbmRvIGhhc3RhICR7dGFzay50aW1pbmcuc3RhcnREYXRlfWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDIuIFBvciBkZXBlbmRlbmNpYSBubyBjb21wbGV0YWRhXG4gICAgICAgIGlmICh0YXNrLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpbmNvbXBsZXRlRGVwZW5kZW5jaWVzID0gdGFzay5kZXBlbmRlbmNpZXMuZmlsdGVyKGRlcElkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXBlbmRlbmN5VGFzayA9IGFsbFRhc2tzLmZpbmQodCA9PiB0LnRhc2tJZCA9PT0gZGVwSWQgfHwgdC5pZCA9PT0gZGVwSWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZXBlbmRlbmN5VGFzayAmJiAhZGVwZW5kZW5jeVRhc2suY29tcGxldGVkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChpbmNvbXBsZXRlRGVwZW5kZW5jaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0YXNrLmlzQmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGFzay5ibG9ja1JlYXNvbiA9IGBFc3BlcmFuZG8gYSBxdWUgc2UgY29tcGxldGVuICR7aW5jb21wbGV0ZURlcGVuZGVuY2llcy5sZW5ndGh9IHRhcmVhcyBkZXBlbmRpZW50ZXNgO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiBQb3Igc2VtYW5hIGZ1dHVyYVxuICAgICAgICBpZiAodGFzay50aW1pbmcud2Vlaykge1xuICAgICAgICAgICAgY29uc3Qgd2Vla1JlZ2V4ID0gLyhcXGR7NH0pLVcoXFxkezJ9KS87XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRhc2sudGltaW5nLndlZWsubWF0Y2god2Vla1JlZ2V4KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeWVhciA9IHBhcnNlSW50KG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICBjb25zdCB3ZWVrID0gcGFyc2VJbnQobWF0Y2hbMl0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgbGEgc2VtYW5hIGFjdHVhbFxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFdlZWsgPSB0aGlzLmdldFdlZWtOdW1iZXIodG9kYXkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh5ZWFyID4gY3VycmVudFllYXIgfHwgKHllYXIgPT09IGN1cnJlbnRZZWFyICYmIHdlZWsgPiBjdXJyZW50V2VlaykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5pc0Jsb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmJsb2NrUmVhc29uID0gYFByb2dyYW1hZG8gcGFyYSBsYSBzZW1hbmEgJHt0YXNrLnRpbWluZy53ZWVrfWA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmEgc2kgdW5hIHRhcmVhIGVzIHBhcmEgXCJPamFsXHUwMEUxIEhveVwiXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc1Rhc2tGb3JUb2RheSh0YXNrOiBUYXNrKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICAgIGNvbnN0IHRvZGF5U3RyID0gdG9kYXkudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdOyAvLyBZWVlZLU1NLUREXG4gICAgICAgIFxuICAgICAgICAvLyBDb21wcm9iYXIgc2kgbGEgdGFyZWEgdGllbmUgdW5hIGZlY2hhIGxcdTAwRURtaXRlIG8gcHJvZ3JhbWFkYSBwYXJhIGhveVxuICAgICAgICBpZiAoKHRhc2sudGltaW5nLmR1ZURhdGUgPT09IHRvZGF5U3RyIHx8IHRhc2sudGltaW5nLnNjaGVkdWxlZERhdGUgPT09IHRvZGF5U3RyKSAmJiAhdGFzay50aW1pbmcuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBPYnRpZW5lIGVsIG5cdTAwRkFtZXJvIGRlIHNlbWFuYSBkZWwgYVx1MDBGMW8gZGUgdW5hIGZlY2hhXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRXZWVrTnVtYmVyKGRhdGU6IERhdGUpOiBudW1iZXIge1xuICAgICAgICBjb25zdCBmaXJzdERheU9mWWVhciA9IG5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgMCwgMSk7XG4gICAgICAgIGNvbnN0IHBhc3REYXlzT2ZZZWFyID0gKGRhdGUuZ2V0VGltZSgpIC0gZmlyc3REYXlPZlllYXIuZ2V0VGltZSgpKSAvIDg2NDAwMDAwO1xuICAgICAgICByZXR1cm4gTWF0aC5jZWlsKChwYXN0RGF5c09mWWVhciArIGZpcnN0RGF5T2ZZZWFyLmdldERheSgpICsgMSkgLyA3KTtcbiAgICB9XG59XG5cbi8vIERFVkVMT1BNRU5UX0NIRUNLUE9JTlQ6IFwidGFza19jbGFzc2lmaWVyXCJcbi8vIERlc2NyaXBjaVx1MDBGM246IFNlcnZpY2lvIHBhcmEgY2xhc2lmaWNhciB0YXJlYXMgc2VnXHUwMEZBbiBsYXMgcmVnbGFzIEdURFxuLy8gRXN0YWRvOiBDb21wbGV0byIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL2NvbXBvbmVudHMvRmlsdGVyUGFuZWwudHNcblxuaW1wb3J0IHsgRmlsdGVyT3B0aW9ucyB9IGZyb20gJy4uL21vZGVscy9IaWVyYXJjaHlWaWV3TW9kZWwnO1xuaW1wb3J0IHsgVGFza0xpc3RUeXBlIH0gZnJvbSAnLi4vbW9kZWxzL1Rhc2snO1xuXG4vKipcbiAqIENvbXBvbmVudGUgcGFyYSBlbCBwYW5lbCBkZSBmaWx0cm9zIGRlIGxhIHZpc3RhIGRlIHRhcmVhc1xuICovXG5leHBvcnQgY2xhc3MgRmlsdGVyUGFuZWwge1xuICAgIC8vIENhbGxiYWNrIHBhcmEgY3VhbmRvIHNlIGFwbGljYW4gZmlsdHJvc1xuICAgIHByaXZhdGUgb25BcHBseUZpbHRlcnM6IChmaWx0ZXJzOiBQYXJ0aWFsPEZpbHRlck9wdGlvbnM+KSA9PiB2b2lkO1xuICAgIFxuICAgIC8vIEVzdGFkbyBhY3R1YWwgZGUgbG9zIGZpbHRyb3NcbiAgICBwcml2YXRlIGN1cnJlbnRGaWx0ZXJzOiBGaWx0ZXJPcHRpb25zO1xuICAgIFxuICAgIC8vIEVsZW1lbnRvcyBET01cbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjb250YWluZXJTaG93bjogYm9vbGVhbiA9IHRydWU7XG4gICAgXG4gICAgY29uc3RydWN0b3Iob25BcHBseUZpbHRlcnM6IChmaWx0ZXJzOiBQYXJ0aWFsPEZpbHRlck9wdGlvbnM+KSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMub25BcHBseUZpbHRlcnMgPSBvbkFwcGx5RmlsdGVycztcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYWxpemFyIGZpbHRyb3MgY29uIHZhbG9yZXMgcG9yIGRlZmVjdG9cbiAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHtcbiAgICAgICAgICAgIHNob3dDb21wbGV0ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd0FjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dQYXVzZWQ6IHRydWUsXG4gICAgICAgICAgICBzaG93U3RvcHBlZDogZmFsc2UsXG4gICAgICAgICAgICBzaG93QXJjaGl2ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzaG93QXJlYXNWaWRhOiB0cnVlLFxuICAgICAgICAgICAgc2hvd0FyZWFzSW50ZXJlczogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dQcm95ZWN0b3NROiB0cnVlLFxuICAgICAgICAgICAgc2hvd1Byb3llY3Rvc0dURDogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dPdGhlckVudGl0aWVzOiB0cnVlLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb250ZXh0czogW10sXG4gICAgICAgICAgICBwZW9wbGU6IFtdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbmFibGVkTGlzdHM6IE9iamVjdC52YWx1ZXMoVGFza0xpc3RUeXBlKSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2VhcmNoVGV4dDogJycsXG4gICAgICAgICAgICBkYXlzUmFuZ2U6IDdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVuZGVyaXphIGVsIHBhbmVsIGRlIGZpbHRyb3MgZW4gZWwgY29udGVuZWRvciBwcm9wb3JjaW9uYWRvXG4gICAgICovXG4gICAgcmVuZGVyKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCBwYW5lbCBkZSBmaWx0cm9zXG4gICAgICAgIGNvbnN0IGZpbHRlclBhbmVsID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stbmF2aWdhdG9yLWZpbHRlci1wYW5lbCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbmNhYmV6YWRvIGNvbiBib3RcdTAwRjNuIHBhcmEgY29sYXBzYXIvZXhwYW5kaXJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gZmlsdGVyUGFuZWwuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXBhbmVsLWhlYWRlcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUXHUwMEVEdHVsbyBkZWwgcGFuZWxcbiAgICAgICAgaGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0ZpbHRyb3MnLCBjbHM6ICdmaWx0ZXItcGFuZWwtdGl0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGNvbGFwc2FyL2V4cGFuZGlyXG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGhlYWRlci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItcGFuZWwtdG9nZ2xlJyB9KTtcbiAgICAgICAgdG9nZ2xlQnV0dG9uLmlubmVySFRNTCA9IHRoaXMuY29udGFpbmVyU2hvd24gPyAnXHUyNUJDJyA6ICdcdTI1QjYnO1xuICAgICAgICB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZVBhbmVsKHRvZ2dsZUJ1dHRvbikpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuaWRvIGRlbCBwYW5lbCAoY29sYXBzYWJsZSlcbiAgICAgICAgY29uc3QgY29udGVudCA9IGZpbHRlclBhbmVsLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1wYW5lbC1jb250ZW50JyB9KTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lclNob3duKSB7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHNlY2Npb25lcyBkZSBmaWx0cm9zXG4gICAgICAgIHRoaXMuY3JlYXRlU2VhcmNoU2VjdGlvbihjb250ZW50KTtcbiAgICAgICAgdGhpcy5jcmVhdGVFbnRpdHlTdGF0ZVNlY3Rpb24oY29udGVudCk7XG4gICAgICAgIHRoaXMuY3JlYXRlRW50aXR5VHlwZVNlY3Rpb24oY29udGVudCk7XG4gICAgICAgIHRoaXMuY3JlYXRlR1RETGlzdHNTZWN0aW9uKGNvbnRlbnQpO1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRleHRzU2VjdGlvbihjb250ZW50KTtcbiAgICAgICAgdGhpcy5jcmVhdGVQZW9wbGVTZWN0aW9uKGNvbnRlbnQpO1xuICAgICAgICB0aGlzLmNyZWF0ZURhdGVSYW5nZVNlY3Rpb24oY29udGVudCk7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RvbmVzIGRlIGFjY2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IGFjdGlvbnNEaXYgPSBjb250ZW50LmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1wYW5lbC1hY3Rpb25zJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBhcGxpY2FyIGZpbHRyb3NcbiAgICAgICAgY29uc3QgYXBwbHlCdXR0b24gPSBhY3Rpb25zRGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ0FwbGljYXIgRmlsdHJvcycsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItYXBwbHktYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgYXBwbHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFwcGx5RmlsdGVycygpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSByZXN0YWJsZWNlciBmaWx0cm9zXG4gICAgICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gYWN0aW9uc0Rpdi5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdSZXN0YWJsZWNlcicsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItcmVzZXQtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnJlc2V0RmlsdGVycygpKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2FtYmlhIGxhIHZpc2liaWxpZGFkIGRlbCBwYW5lbCBkZSBmaWx0cm9zXG4gICAgICovXG4gICAgcHJpdmF0ZSB0b2dnbGVQYW5lbCh0b2dnbGVCdXR0b246IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyU2hvd24gPSAhdGhpcy5jb250YWluZXJTaG93bjtcbiAgICAgICAgY29uc3QgY29udGVudCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItcGFuZWwtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyU2hvd24pIHtcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB0b2dnbGVCdXR0b24uaW5uZXJIVE1MID0gJ1x1MjVCQyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB0b2dnbGVCdXR0b24uaW5uZXJIVE1MID0gJ1x1MjVCNic7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYSBsYSBzZWNjaVx1MDBGM24gZGUgYlx1MDBGQXNxdWVkYSBkZSB0ZXh0b1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlU2VhcmNoU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVFx1MDBFRHR1bG8gZGUgbGEgc2VjY2lcdTAwRjNuXG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnQlx1MDBGQXNxdWVkYScsIGNsczogJ2ZpbHRlci1zZWN0aW9uLXRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIElucHV0IGRlIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBzZWN0aW9uLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQnVzY2FyIHRhcmVhcyBvIGVudGlkYWRlcy4uLicsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItc2VhcmNoLWlucHV0J1xuICAgICAgICB9KTtcbiAgICAgICAgc2VhcmNoSW5wdXQudmFsdWUgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNlYXJjaFRleHQ7XG4gICAgICAgIFxuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBwYXJhIGFjdHVhbGl6YXIgZWwgZmlsdHJvIGFsIGVzY3JpYmlyXG4gICAgICAgIHNlYXJjaElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMuc2VhcmNoVGV4dCA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgc2VjY2lcdTAwRjNuIGRlIGZpbHRyb3MgcG9yIGVzdGFkbyBkZSBlbnRpZGFkXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVFbnRpdHlTdGF0ZVNlY3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIGRlIGxhIHNlY2NpXHUwMEYzblxuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0VzdGFkb3MnLCBjbHM6ICdmaWx0ZXItc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVja2JveGVzIHBhcmEgY2FkYSBlc3RhZG9cbiAgICAgICAgdGhpcy5jcmVhdGVDaGVja2JveChzZWN0aW9uLCAnc2hvd0FjdGl2ZScsICdcdUQ4M0RcdURGRTIgQWN0aXZvJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93QWN0aXZlKTtcbiAgICAgICAgdGhpcy5jcmVhdGVDaGVja2JveChzZWN0aW9uLCAnc2hvd1BhdXNlZCcsICdcdUQ4M0RcdURGRTEgRW4gUGF1c2EnLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dQYXVzZWQpO1xuICAgICAgICB0aGlzLmNyZWF0ZUNoZWNrYm94KHNlY3Rpb24sICdzaG93U3RvcHBlZCcsICdcdUQ4M0RcdUREMzQgRGV0ZW5pZG8nLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dTdG9wcGVkKTtcbiAgICAgICAgdGhpcy5jcmVhdGVDaGVja2JveChzZWN0aW9uLCAnc2hvd0FyY2hpdmVkJywgJ1x1RDgzRFx1REQzNSBBcmNoaXZhZG8nLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dBcmNoaXZlZCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goc2VjdGlvbiwgJ3Nob3dDb21wbGV0ZWQnLCAnXHUyNzA1IFRhcmVhcyBDb21wbGV0YWRhcycsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd0NvbXBsZXRlZCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgc2VjY2lcdTAwRjNuIGRlIGZpbHRyb3MgcG9yIHRpcG8gZGUgZW50aWRhZFxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlRW50aXR5VHlwZVNlY3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIGRlIGxhIHNlY2NpXHUwMEYzblxuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1RpcG9zIGRlIEVudGlkYWQnLCBjbHM6ICdmaWx0ZXItc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVja2JveGVzIHBhcmEgY2FkYSB0aXBvXG4gICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goc2VjdGlvbiwgJ3Nob3dBcmVhc1ZpZGEnLCAnXHUwMEMxcmVhcyBkZSBWaWRhJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93QXJlYXNWaWRhKTtcbiAgICAgICAgdGhpcy5jcmVhdGVDaGVja2JveChzZWN0aW9uLCAnc2hvd0FyZWFzSW50ZXJlcycsICdcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5cycsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd0FyZWFzSW50ZXJlcyk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goc2VjdGlvbiwgJ3Nob3dQcm95ZWN0b3NRJywgJ1Byb3llY3RvcyBRJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93UHJveWVjdG9zUSk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goc2VjdGlvbiwgJ3Nob3dQcm95ZWN0b3NHVEQnLCAnUHJveWVjdG9zIEdURCcsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd1Byb3llY3Rvc0dURCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hlY2tib3goc2VjdGlvbiwgJ3Nob3dPdGhlckVudGl0aWVzJywgJ090cmFzIEVudGlkYWRlcycsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd090aGVyRW50aXRpZXMpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhIGxhIHNlY2NpXHUwMEYzbiBkZSBmaWx0cm9zIHBvciBsaXN0YXMgR1REXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVHVERMaXN0c1NlY3Rpb24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1zZWN0aW9uJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIGRlIGxhIHNlY2NpXHUwMEYzblxuICAgICAgICBzZWN0aW9uLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0xpc3RhcyBHVEQnLCBjbHM6ICdmaWx0ZXItc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBjaGVja2JveGVzIHBhcmEgY2FkYSBsaXN0YSBHVERcbiAgICAgICAgY29uc3QgbGlzdExhYmVscyA9IHtcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuSU5CT1hdOiAnQmFuZGVqYSBkZSBFbnRyYWRhJyxcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuTkVYVF9BQ1RJT05TXTogJ1ByXHUwMEYzeGltYXMgQWNjaW9uZXMnLFxuICAgICAgICAgICAgW1Rhc2tMaXN0VHlwZS5DQUxFTkRBUl06ICdDYWxlbmRhcmlvJyxcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuSE9QRUZVTExZX1RPREFZXTogJ09qYWxcdTAwRTEgSG95JyxcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuQVNTSUdORURdOiAnQXNpZ25hZGFzJyxcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuUFJPSkVDVFNdOiAnUHJveWVjdG9zJyxcbiAgICAgICAgICAgIFtUYXNrTGlzdFR5cGUuU09NRURBWV9NQVlCRV06ICdBbGdcdTAwRkFuIERcdTAwRURhIC8gVGFsIFZleicsXG4gICAgICAgICAgICBbVGFza0xpc3RUeXBlLk5PVF9USElTX1dFRUtdOiAnRXN0YSBTZW1hbmEgTm8nLFxuICAgICAgICAgICAgW1Rhc2tMaXN0VHlwZS5XQUlUSU5HXTogJ0VuIFBhdXNhJ1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBsaXN0VHlwZSBvZiBPYmplY3QudmFsdWVzKFRhc2tMaXN0VHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzRW5hYmxlZCA9IHRoaXMuY3VycmVudEZpbHRlcnMuZW5hYmxlZExpc3RzLmluY2x1ZGVzKGxpc3RUeXBlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY2hlY2tib3hEaXYgPSBzZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1jaGVja2JveC1jb250YWluZXInIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGNoZWNrYm94RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgIGNsczogJ2ZpbHRlci1jaGVja2JveCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2hlY2tib3guaWQgPSBgbGlzdC0ke2xpc3RUeXBlfWA7XG4gICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gaXNFbmFibGVkO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSBsaXN0YSBhIGxhcyBoYWJpbGl0YWRhcyBzaSBubyBlc3RcdTAwRTEgeWFcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRGaWx0ZXJzLmVuYWJsZWRMaXN0cy5pbmNsdWRlcyhsaXN0VHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMuZW5hYmxlZExpc3RzLnB1c2gobGlzdFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRWxpbWluYXIgbGEgbGlzdGEgZGUgbGFzIGhhYmlsaXRhZGFzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMuZW5hYmxlZExpc3RzID0gdGhpcy5jdXJyZW50RmlsdGVycy5lbmFibGVkTGlzdHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PiB0eXBlICE9PSBsaXN0VHlwZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFdGlxdWV0YSBkZWwgY2hlY2tib3hcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gY2hlY2tib3hEaXYuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGxpc3RMYWJlbHNbbGlzdFR5cGVdIHx8IGxpc3RUeXBlLFxuICAgICAgICAgICAgICAgIGNsczogJ2ZpbHRlci1jaGVja2JveC1sYWJlbCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IGNoZWNrYm94LmlkO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgc2VjY2lcdTAwRjNuIGRlIGZpbHRyb3MgcG9yIGNvbnRleHRvc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlQ29udGV4dHNTZWN0aW9uKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItc2VjdGlvbicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUXHUwMEVEdHVsbyBkZSBsYSBzZWNjaVx1MDBGM25cbiAgICAgICAgc2VjdGlvbi5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdDb250ZXh0b3MgKCNjeCknLCBjbHM6ICdmaWx0ZXItc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbnB1dCBwYXJhIGFcdTAwRjFhZGlyIGNvbnRleHRvc1xuICAgICAgICBjb25zdCBjb250ZXh0SW5wdXQgPSBzZWN0aW9uLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnQVx1MDBGMWFkaXIgY29udGV4dG8gKGN4LW5vbWJyZSknLFxuICAgICAgICAgICAgY2xzOiAnZmlsdGVyLXRleHQtaW5wdXQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGFcdTAwRjFhZGlyIGNvbnRleHRvXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHNlY3Rpb24uY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdBXHUwMEYxYWRpcicsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItYWRkLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lciBwYXJhIGVsIGJvdFx1MDBGM25cbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IGNvbnRleHRJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoY29udGV4dCAmJiAhdGhpcy5jdXJyZW50RmlsdGVycy5jb250ZXh0cy5pbmNsdWRlcyhjb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIHByZWZpam8gY3gtIHNpIG5vIGxvIHRpZW5lXG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkQ29udGV4dCA9IGNvbnRleHQuc3RhcnRzV2l0aCgnY3gtJykgPyBjb250ZXh0IDogYGN4LSR7Y29udGV4dH1gO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMuY29udGV4dHMucHVzaChmb3JtYXR0ZWRDb250ZXh0KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHRUYWdzKHNlY3Rpb24pO1xuICAgICAgICAgICAgICAgIGNvbnRleHRJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFBlcm1pdGlyIGFcdTAwRjFhZGlyIGNvbnRleHRvIGNvbiBFbnRlclxuICAgICAgICBjb250ZXh0SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIG1vc3RyYXIgbG9zIGNvbnRleHRvcyBzZWxlY2Npb25hZG9zXG4gICAgICAgIGNvbnN0IGNvbnRleHRUYWdzID0gc2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItdGFncy1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWN0dWFsaXphciBsb3MgdGFncyBkZSBjb250ZXh0b1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHRUYWdzID0gKHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItdGFncy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbnRleHQgb2YgdGhpcy5jdXJyZW50RmlsdGVycy5jb250ZXh0cykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhZyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItdGFnJyB9KTtcbiAgICAgICAgICAgICAgICB0YWcuY3JlYXRlU3Bhbih7IHRleHQ6IGNvbnRleHQgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGVsaW1pbmFyIGVsIGNvbnRleHRvXG4gICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gdGFnLmNyZWF0ZVNwYW4oeyBjbHM6ICdmaWx0ZXItdGFnLXJlbW92ZScsIHRleHQ6ICdcdTAwRDcnIH0pO1xuICAgICAgICAgICAgICAgIHJlbW92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycy5jb250ZXh0cyA9IHRoaXMuY3VycmVudEZpbHRlcnMuY29udGV4dHMuZmlsdGVyKGMgPT4gYyAhPT0gY29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dFRhZ3MocGFyZW50KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaWNpYWxpemFyIGxvcyB0YWdzIGRlIGNvbnRleHRvXG4gICAgICAgIHRoaXMudXBkYXRlQ29udGV4dFRhZ3Moc2VjdGlvbik7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgc2VjY2lcdTAwRjNuIGRlIGZpbHRyb3MgcG9yIHBlcnNvbmFzIGFzaWduYWRhc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlUGVvcGxlU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVFx1MDBFRHR1bG8gZGUgbGEgc2VjY2lcdTAwRjNuXG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUGVyc29uYXMgKCNweCknLCBjbHM6ICdmaWx0ZXItc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbnB1dCBwYXJhIGFcdTAwRjFhZGlyIHBlcnNvbmFzXG4gICAgICAgIGNvbnN0IHBlcnNvbklucHV0ID0gc2VjdGlvbi5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0FcdTAwRjFhZGlyIHBlcnNvbmEgKHB4LW5vbWJyZSknLFxuICAgICAgICAgICAgY2xzOiAnZmlsdGVyLXRleHQtaW5wdXQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGFcdTAwRjFhZGlyIHBlcnNvbmFcbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gc2VjdGlvbi5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ0FcdTAwRjFhZGlyJyxcbiAgICAgICAgICAgIGNsczogJ2ZpbHRlci1hZGQtYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIHBhcmEgZWwgYm90XHUwMEYzblxuICAgICAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwZXJzb24gPSBwZXJzb25JbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAocGVyc29uICYmICF0aGlzLmN1cnJlbnRGaWx0ZXJzLnBlb3BsZS5pbmNsdWRlcyhwZXJzb24pKSB7XG4gICAgICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgcHJlZmlqbyBweC0gc2kgbm8gbG8gdGllbmVcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRQZXJzb24gPSBwZXJzb24uc3RhcnRzV2l0aCgncHgtJykgPyBwZXJzb24gOiBgcHgtJHtwZXJzb259YDtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzLnBlb3BsZS5wdXNoKGZvcm1hdHRlZFBlcnNvbik7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZW9wbGVUYWdzKHNlY3Rpb24pO1xuICAgICAgICAgICAgICAgIHBlcnNvbklucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUGVybWl0aXIgYVx1MDBGMWFkaXIgcGVyc29uYSBjb24gRW50ZXJcbiAgICAgICAgcGVyc29uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgYWRkQnV0dG9uLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIG1vc3RyYXIgbGFzIHBlcnNvbmFzIHNlbGVjY2lvbmFkYXNcbiAgICAgICAgY29uc3QgcGVvcGxlVGFncyA9IHNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXRhZ3MtY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgbG9zIHRhZ3MgZGUgcGVyc29uYXNcbiAgICAgICAgdGhpcy51cGRhdGVQZW9wbGVUYWdzID0gKHBhcmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItdGFncy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBlcnNvbiBvZiB0aGlzLmN1cnJlbnRGaWx0ZXJzLnBlb3BsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhZyA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdmaWx0ZXItdGFnJyB9KTtcbiAgICAgICAgICAgICAgICB0YWcuY3JlYXRlU3Bhbih7IHRleHQ6IHBlcnNvbiB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZWxpbWluYXIgbGEgcGVyc29uYVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbW92ZUJ1dHRvbiA9IHRhZy5jcmVhdGVTcGFuKHsgY2xzOiAnZmlsdGVyLXRhZy1yZW1vdmUnLCB0ZXh0OiAnXHUwMEQ3JyB9KTtcbiAgICAgICAgICAgICAgICByZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMucGVvcGxlID0gdGhpcy5jdXJyZW50RmlsdGVycy5wZW9wbGUuZmlsdGVyKHAgPT4gcCAhPT0gcGVyc29uKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQZW9wbGVUYWdzKHBhcmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBJbmljaWFsaXphciBsb3MgdGFncyBkZSBwZXJzb25hc1xuICAgICAgICB0aGlzLnVwZGF0ZVBlb3BsZVRhZ3Moc2VjdGlvbik7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbGEgc2VjY2lcdTAwRjNuIGRlIGZpbHRyb3MgcG9yIHJhbmdvIGRlIGZlY2hhc1xuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlRGF0ZVJhbmdlU2VjdGlvbihjb250YWluZXI6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXNlY3Rpb24nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVFx1MDBFRHR1bG8gZGUgbGEgc2VjY2lcdTAwRjNuXG4gICAgICAgIHNlY3Rpb24uY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnUmFuZ28gZGUgRFx1MDBFRGFzJywgY2xzOiAnZmlsdGVyLXNlY3Rpb24tdGl0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2xpZGVyIHBhcmEgc2VsZWNjaW9uYXIgZWwgcmFuZ28gZGUgZFx1MDBFRGFzXG4gICAgICAgIGNvbnN0IHNsaWRlckNvbnRhaW5lciA9IHNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLXNsaWRlci1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2xpZGVyID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdyYW5nZScsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItc2xpZGVyJyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBtaW46ICcxJyxcbiAgICAgICAgICAgICAgICBtYXg6ICczMCcsXG4gICAgICAgICAgICAgICAgc3RlcDogJzEnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmN1cnJlbnRGaWx0ZXJzLmRheXNSYW5nZS50b1N0cmluZygpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdmFsdWVEaXNwbGF5ID0gc2xpZGVyQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ2ZpbHRlci1zbGlkZXItdmFsdWUnIH0pO1xuICAgICAgICB2YWx1ZURpc3BsYXkudGV4dENvbnRlbnQgPSBgJHt0aGlzLmN1cnJlbnRGaWx0ZXJzLmRheXNSYW5nZX0gZFx1MDBFRGFzYDtcbiAgICAgICAgXG4gICAgICAgIC8vIEV2ZW50IGxpc3RlbmVyIHBhcmEgYWN0dWFsaXphciBlbCB2YWxvciBtb3N0cmFkb1xuICAgICAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycy5kYXlzUmFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgIHZhbHVlRGlzcGxheS50ZXh0Q29udGVudCA9IGAke3ZhbHVlfSBkXHUwMEVEYXNgO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYSB1biBjaGVja2JveCBjb24gZXRpcXVldGFcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZUNoZWNrYm94KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGZpbHRlcktleTogc3RyaW5nLCBsYWJlbDogc3RyaW5nLCBpc0NoZWNrZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3hEaXYgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZmlsdGVyLWNoZWNrYm94LWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGVja2JveCA9IGNoZWNrYm94RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICBjbHM6ICdmaWx0ZXItY2hlY2tib3gnXG4gICAgICAgIH0pO1xuICAgICAgICBjaGVja2JveC5pZCA9IGBmaWx0ZXItJHtmaWx0ZXJLZXl9YDtcbiAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGlzQ2hlY2tlZDtcbiAgICAgICAgXG4gICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzW2ZpbHRlcktleV0gPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuY2hlY2tlZDtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YSBkZWwgY2hlY2tib3hcbiAgICAgICAgY29uc3QgbGFiZWxFbCA9IGNoZWNrYm94RGl2LmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgICAgIHRleHQ6IGxhYmVsLFxuICAgICAgICAgICAgY2xzOiAnZmlsdGVyLWNoZWNrYm94LWxhYmVsJ1xuICAgICAgICB9KTtcbiAgICAgICAgbGFiZWxFbC5odG1sRm9yID0gY2hlY2tib3guaWQ7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFwbGljYSBsb3MgZmlsdHJvcyBhY3R1YWxlc1xuICAgICAqL1xuICAgIHByaXZhdGUgYXBwbHlGaWx0ZXJzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm9uQXBwbHlGaWx0ZXJzKHsgLi4udGhpcy5jdXJyZW50RmlsdGVycyB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVzdGFibGVjZSBsb3MgZmlsdHJvcyBhIHN1cyB2YWxvcmVzIHBvciBkZWZlY3RvXG4gICAgICovXG4gICAgcHJpdmF0ZSByZXNldEZpbHRlcnMoKTogdm9pZCB7XG4gICAgICAgIC8vIFJlc3RhYmxlY2VyIGZpbHRyb3MgYSB2YWxvcmVzIHBvciBkZWZlY3RvXG4gICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7XG4gICAgICAgICAgICBzaG93Q29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgICAgIHNob3dBY3RpdmU6IHRydWUsXG4gICAgICAgICAgICBzaG93UGF1c2VkOiB0cnVlLFxuICAgICAgICAgICAgc2hvd1N0b3BwZWQ6IGZhbHNlLFxuICAgICAgICAgICAgc2hvd0FyY2hpdmVkOiBmYWxzZSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgc2hvd0FyZWFzVmlkYTogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dBcmVhc0ludGVyZXM6IHRydWUsXG4gICAgICAgICAgICBzaG93UHJveWVjdG9zUTogdHJ1ZSxcbiAgICAgICAgICAgIHNob3dQcm95ZWN0b3NHVEQ6IHRydWUsXG4gICAgICAgICAgICBzaG93T3RoZXJFbnRpdGllczogdHJ1ZSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29udGV4dHM6IFtdLFxuICAgICAgICAgICAgcGVvcGxlOiBbXSxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZW5hYmxlZExpc3RzOiBPYmplY3QudmFsdWVzKFRhc2tMaXN0VHlwZSksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNlYXJjaFRleHQ6ICcnLFxuICAgICAgICAgICAgZGF5c1JhbmdlOiA3XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGxhIFVJIHBhcmEgcmVmbGVqYXIgbG9zIHZhbG9yZXMgcG9yIGRlZmVjdG9cbiAgICAgICAgdGhpcy51cGRhdGVVSSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBsaWNhciBsb3MgZmlsdHJvcyByZXN0YWJsZWNpZG9zXG4gICAgICAgIHRoaXMuYXBwbHlGaWx0ZXJzKCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFjdHVhbGl6YSBsYSBVSSBwYXJhIHJlZmxlamFyIGxvcyB2YWxvcmVzIGFjdHVhbGVzIGRlIGxvcyBmaWx0cm9zXG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVVSSgpOiB2b2lkIHtcbiAgICAgICAgLy8gQWN0dWFsaXphciBjaGVja2JveCBkZSBlc3RhZG9zXG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3goJ3Nob3dBY3RpdmUnLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dBY3RpdmUpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94KCdzaG93UGF1c2VkJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93UGF1c2VkKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveCgnc2hvd1N0b3BwZWQnLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dTdG9wcGVkKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveCgnc2hvd0FyY2hpdmVkJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93QXJjaGl2ZWQpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94KCdzaG93Q29tcGxldGVkJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93Q29tcGxldGVkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgY2hlY2tib3ggZGUgdGlwb3NcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveCgnc2hvd0FyZWFzVmlkYScsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd0FyZWFzVmlkYSk7XG4gICAgICAgIHRoaXMudXBkYXRlQ2hlY2tib3goJ3Nob3dBcmVhc0ludGVyZXMnLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dBcmVhc0ludGVyZXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94KCdzaG93UHJveWVjdG9zUScsIHRoaXMuY3VycmVudEZpbHRlcnMuc2hvd1Byb3llY3Rvc1EpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNoZWNrYm94KCdzaG93UHJveWVjdG9zR1REJywgdGhpcy5jdXJyZW50RmlsdGVycy5zaG93UHJveWVjdG9zR1REKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGVja2JveCgnc2hvd090aGVyRW50aXRpZXMnLCB0aGlzLmN1cnJlbnRGaWx0ZXJzLnNob3dPdGhlckVudGl0aWVzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFjdHVhbGl6YXIgY2hlY2tib3ggZGUgbGlzdGFzIEdURFxuICAgICAgICBmb3IgKGNvbnN0IGxpc3RUeXBlIG9mIE9iamVjdC52YWx1ZXMoVGFza0xpc3RUeXBlKSkge1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbGlzdC0ke2xpc3RUeXBlfWApIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gdGhpcy5jdXJyZW50RmlsdGVycy5lbmFibGVkTGlzdHMuaW5jbHVkZXMobGlzdFR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBY3R1YWxpemFyIGNhbXBvcyBkZSB0ZXh0b1xuICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItc2VhcmNoLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgaWYgKHNlYXJjaElucHV0KSB7XG4gICAgICAgICAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnMuc2VhcmNoVGV4dDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWN0dWFsaXphciBzbGlkZXIgZGUgcmFuZ28gZGUgZFx1MDBFRGFzXG4gICAgICAgIGNvbnN0IHNsaWRlciA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXItc2xpZGVyJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgY29uc3QgdmFsdWVEaXNwbGF5ID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZpbHRlci1zbGlkZXItdmFsdWUnKTtcbiAgICAgICAgaWYgKHNsaWRlciAmJiB2YWx1ZURpc3BsYXkpIHtcbiAgICAgICAgICAgIHNsaWRlci52YWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnMuZGF5c1JhbmdlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YWx1ZURpc3BsYXkudGV4dENvbnRlbnQgPSBgJHt0aGlzLmN1cnJlbnRGaWx0ZXJzLmRheXNSYW5nZX0gZFx1MDBFRGFzYDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWN0dWFsaXphciB0YWdzIGRlIGNvbnRleHRvcyB5IHBlcnNvbmFzXG4gICAgICAgIGNvbnN0IGNvbnRleHRTZWN0aW9uID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZpbHRlci1zZWN0aW9uJylbNV07IC8vIFx1MDBDRG5kaWNlIGRlIGxhIHNlY2NpXHUwMEYzbiBkZSBjb250ZXh0b3NcbiAgICAgICAgaWYgKGNvbnRleHRTZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHRUYWdzKGNvbnRleHRTZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgcGVvcGxlU2VjdGlvbiA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXItc2VjdGlvbicpWzZdOyAvLyBcdTAwQ0RuZGljZSBkZSBsYSBzZWNjaVx1MDBGM24gZGUgcGVyc29uYXNcbiAgICAgICAgaWYgKHBlb3BsZVNlY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGVvcGxlVGFncyhwZW9wbGVTZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBY3R1YWxpemEgZWwgZXN0YWRvIGRlIHVuIGNoZWNrYm94XG4gICAgICovXG4gICAgcHJpdmF0ZSB1cGRhdGVDaGVja2JveChmaWx0ZXJLZXk6IHN0cmluZywgaXNDaGVja2VkOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGZpbHRlci0ke2ZpbHRlcktleX1gKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBpc0NoZWNrZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRvZG9zIHBhcmEgYWN0dWFsaXphciB0YWdzIGRlIGNvbnRleHRvcyB5IHBlcnNvbmFzIChkZWZpbmlkb3MgZGluXHUwMEUxbWljYW1lbnRlKVxuICAgIHByaXZhdGUgdXBkYXRlQ29udGV4dFRhZ3M6IChwYXJlbnQ6IEhUTUxFbGVtZW50KSA9PiB2b2lkO1xuICAgIHByaXZhdGUgdXBkYXRlUGVvcGxlVGFnczogKHBhcmVudDogSFRNTEVsZW1lbnQpID0+IHZvaWQ7XG59XG5cbi8vIERFVkVMT1BNRU5UX0NIRUNLUE9JTlQ6IFwiZmlsdGVyX3BhbmVsXCJcbi8vIERlc2NyaXBjaVx1MDBGM246IENvbXBvbmVudGUgcGFyYSBlbCBwYW5lbCBkZSBmaWx0cm9zIGRlIGxhIHZpc3RhIGRlIHRhcmVhc1xuLy8gRXN0YWRvOiBDb21wbGV0byIsICIvLyBzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL3V0aWxzL05hdmlnYXRpb25VdGlscy50c1xuXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuLyoqXG4gKiBVdGlsaWRhZGVzIHBhcmEgbmF2ZWdhciBlbnRyZSBlbnRpZGFkZXMgeSB0YXJlYXNcbiAqL1xuZXhwb3J0IGNsYXNzIE5hdmlnYXRpb25VdGlscyB7XG4gICAgLyoqXG4gICAgICogQWJyZSB1bmEgZW50aWRhZCBlbiB1bmEgbnVldmEgaG9qYSAocGVzdGFcdTAwRjFhKVxuICAgICAqL1xuICAgIG9wZW5FbnRpdHlJbk5ld0xlYWYoZmlsZTogVEZpbGUpOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhYnJpciBlbnRpZGFkOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvciBhbCBhYnJpciBhcmNoaXZvOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWJyZSB1bmEgZW50aWRhZCB5IG5hdmVnYSBhIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2FcbiAgICAgKi9cbiAgICBvcGVuVGFza0luRW50aXR5KGZpbGU6IFRGaWxlLCBsaW5lTnVtYmVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFVzYW1vcyBlU3RhdGUgcGFyYSBwb3NpY2lvbmFyIGVsIGN1cnNvciBlbiBsYSBsXHUwMEVEbmVhIGRlIGxhIHRhcmVhXG4gICAgICAgICAgICBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUoZmlsZSwge1xuICAgICAgICAgICAgICAgIGVTdGF0ZTogeyBsaW5lOiBsaW5lTnVtYmVyIC0gMSB9XG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZXNhbHRhbW9zIGxhIGxcdTAwRURuZWEgcGFyYSBtZWpvciB2aXNpYmlsaWRhZFxuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0TGluZShsaW5lTnVtYmVyIC0gMSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhYnJpciB0YXJlYTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbnRlbnRvIGFsdGVybmF0aXZvIHNpbiBlU3RhdGVcbiAgICAgICAgICAgIGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShmaWxlKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2aWV3ID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgICAgIGlmICh2aWV3ICYmIHZpZXcuZWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGxpbmVOdW1iZXIgLSAxLCBjaDogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5lZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoeyBmcm9tOiB7IGxpbmU6IGxpbmVOdW1iZXIgLSAxLCBjaDogMCB9LCB0bzogeyBsaW5lOiBsaW5lTnVtYmVyIC0gMSwgY2g6IDAgfSB9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRMaW5lKGxpbmVOdW1iZXIgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXNhbHRhIHZpc3VhbG1lbnRlIHVuYSBsXHUwMEVEbmVhIGVuIGVsIGVkaXRvclxuICAgICAqL1xuICAgIHByaXZhdGUgaGlnaGxpZ2h0TGluZShsaW5lTnVtYmVyOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICAgICAgaWYgKCF2aWV3IHx8ICF2aWV3LmVkaXRvcikgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbiBDb2RlTWlycm9yIDYgKE9ic2lkaWFuIG1vZGVybm8pXG4gICAgICAgICAgICBpZiAodmlldy5lZGl0b3IuY20gJiYgdmlldy5lZGl0b3IuY20uZG9tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSB2aWV3LmVkaXRvci5jbS5kb20ucXVlcnlTZWxlY3RvckFsbCgnLmNtLWxpbmUnKTtcbiAgICAgICAgICAgICAgICBpZiAobGluZXMgJiYgbGluZXMubGVuZ3RoID4gbGluZU51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZU51bWJlcl07XG4gICAgICAgICAgICAgICAgICAgIGxpbmUuY2xhc3NMaXN0LmFkZCgndGFzay1oaWdobGlnaHRlZC1saW5lJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBFbGltaW5hciBsYSBjbGFzZSBkZXNwdVx1MDBFOXMgZGUgdW4gdGllbXBvXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5jbGFzc0xpc3QucmVtb3ZlKCd0YXNrLWhpZ2hsaWdodGVkLWxpbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIC8vIEVuIENvZGVNaXJyb3IgNSAoT2JzaWRpYW4gYW50aWd1bylcbiAgICAgICAgICAgIGVsc2UgaWYgKHZpZXcuZWRpdG9yLmxpbmVEaXYpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IHZpZXcuZWRpdG9yLmxpbmVEaXYucXVlcnlTZWxlY3RvckFsbCgnLkNvZGVNaXJyb3ItbGluZScpO1xuICAgICAgICAgICAgICAgIGlmIChsaW5lcyAmJiBsaW5lcy5sZW5ndGggPiBsaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tsaW5lTnVtYmVyXTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5jbGFzc0xpc3QuYWRkKCd0YXNrLWhpZ2hsaWdodGVkLWxpbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEVsaW1pbmFyIGxhIGNsYXNlIGRlc3B1XHUwMEU5cyBkZSB1biB0aWVtcG9cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lLmNsYXNzTGlzdC5yZW1vdmUoJ3Rhc2staGlnaGxpZ2h0ZWQtbGluZScpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMCk7IC8vIFBlcXVlXHUwMEYxbyByZXRyYXNvIHBhcmEgYXNlZ3VyYXIgcXVlIGVsIGVkaXRvciBlc3RcdTAwRTkgbGlzdG9cbiAgICB9XG59XG5cbi8vIERFVkVMT1BNRU5UX0NIRUNLUE9JTlQ6IFwibmF2aWdhdGlvbl91dGlsc1wiXG4vLyBEZXNjcmlwY2lcdTAwRjNuOiBVdGlsaWRhZGVzIHBhcmEgbmF2ZWdhciBlbnRyZSBlbnRpZGFkZXMgeSB0YXJlYXNcbi8vIEVzdGFkbzogQ29tcGxldG8iLCAiLy8gc3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9jb21wb25lbnRzL1ZpZXdSZW5kZXJlci50c1xuXG5pbXBvcnQgeyBIaWVyYXJjaHlWaWV3TW9kZWwsIFZpZXdNb2RlLCBGaWx0ZXJPcHRpb25zIH0gZnJvbSAnLi4vbW9kZWxzL0hpZXJhcmNoeVZpZXdNb2RlbCc7XG5pbXBvcnQgeyBGaWx0ZXJQYW5lbCB9IGZyb20gJy4vRmlsdGVyUGFuZWwnO1xuaW1wb3J0IHsgSUVudGl0eSwgRW50aXR5VHlwZSwgRW50aXR5U3RhdGUgfSBmcm9tICcuLi9tb2RlbHMvRW50aXR5JztcbmltcG9ydCB7IFRhc2ssIFRhc2tMaXN0VHlwZSwgVGFza1ByaW9yaXR5LCBMaW5lSW5mbyB9IGZyb20gJy4uL21vZGVscy9UYXNrJztcbmltcG9ydCB7IE5hdmlnYXRpb25VdGlscyB9IGZyb20gJy4uL3V0aWxzL05hdmlnYXRpb25VdGlscyc7XG5cbi8qKlxuICogQ29tcG9uZW50ZSBwYXJhIHJlbmRlcml6YXIgbGEgdmlzdGEgZGUgbmF2ZWdhY2lcdTAwRjNuIGRlIHRhcmVhc1xuICovXG5leHBvcnQgY2xhc3MgVmlld1JlbmRlcmVyIHtcbiAgICBwcml2YXRlIG5hdmlnYXRpb25VdGlsczogTmF2aWdhdGlvblV0aWxzO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm5hdmlnYXRpb25VdGlscyA9IG5ldyBOYXZpZ2F0aW9uVXRpbHMoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVuZGVyaXphIGxhIHZpc3RhIGNvbXBsZXRhIGRlbCBuYXZlZ2Fkb3IgZGUgdGFyZWFzXG4gICAgICovXG4gICAgcmVuZGVyKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCwgZmlsdGVyUGFuZWw6IEZpbHRlclBhbmVsKTogdm9pZCB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5hZGRDbGFzcygndGFzay1uYXZpZ2F0b3ItY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBsYSBlc3RydWN0dXJhIHByaW5jaXBhbFxuICAgICAgICBjb25zdCBoZWFkZXIgPSB0aGlzLmNyZWF0ZUhlYWRlcihjb250YWluZXJFbCwgbW9kZWwpO1xuICAgICAgICBjb25zdCB2aWV3T3B0aW9ucyA9IHRoaXMuY3JlYXRlVmlld09wdGlvbnMoY29udGFpbmVyRWwsIG1vZGVsKTtcbiAgICAgICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stbmF2aWdhdG9yLWNvbnRlbnQnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVuZGVyaXphciBlbCBwYW5lbCBkZSBmaWx0cm9zXG4gICAgICAgIGNvbnN0IGZpbHRlckNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stbmF2aWdhdG9yLWZpbHRlci1jb250YWluZXInIH0pO1xuICAgICAgICBmaWx0ZXJQYW5lbC5yZW5kZXIoZmlsdGVyQ29udGFpbmVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgZWwgY29udGVuaWRvIHNlZ1x1MDBGQW4gZWwgbW9kbyBkZSB2aXN1YWxpemFjaVx1MDBGM25cbiAgICAgICAgc3dpdGNoIChtb2RlbC52aWV3TW9kZSkge1xuICAgICAgICAgICAgY2FzZSBWaWV3TW9kZS5ISUVSQVJDSFk6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJIaWVyYXJjaHlWaWV3KGNvbnRlbnRDb250YWluZXIsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVmlld01vZGUuR1REX0xJU1RTOlxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR1RETGlzdHNWaWV3KGNvbnRlbnRDb250YWluZXIsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgVmlld01vZGUuQ09NQklORUQ6XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21iaW5lZFZpZXcoY29udGVudENvbnRhaW5lciwgbW9kZWwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgZWwgZW5jYWJlemFkbyBkZSBsYSB2aXN0YVxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3QgaGVhZGVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1uYXZpZ2F0b3ItaGVhZGVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIHByaW5jaXBhbFxuICAgICAgICBoZWFkZXIuY3JlYXRlRWwoJ2gxJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdOYXZlZ2Fkb3IgZGUgVGFyZWFzIEdURCcsXG4gICAgICAgICAgICBjbHM6ICd0YXNrLW5hdmlnYXRvci10aXRsZSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTdWJ0XHUwMEVEdHVsbyBjb24gY29udGV4dG8gYWN0dWFsXG4gICAgICAgIGNvbnN0IHN1YnRpdGxlID0gaGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Rhc2stbmF2aWdhdG9yLXN1YnRpdGxlJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChtb2RlbC5mb2N1c0VudGl0eSkge1xuICAgICAgICAgICAgY29uc3QgZW50aXR5TmFtZSA9IG1vZGVsLmZvY3VzRW50aXR5LnRpdGxlO1xuICAgICAgICAgICAgY29uc3QgZW50aXR5VHlwZSA9IHRoaXMuZ2V0RW50aXR5VHlwZUxhYmVsKG1vZGVsLmZvY3VzRW50aXR5LnR5cGUpO1xuICAgICAgICAgICAgc3VidGl0bGUuY3JlYXRlU3Bhbih7IHRleHQ6IGBDb250ZXh0bzogJHtlbnRpdHlUeXBlfSAtICR7ZW50aXR5TmFtZX1gIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgYWJyaXIgbGEgZW50aWRhZCBlbiBmb2NvXG4gICAgICAgICAgICBjb25zdCBvcGVuQnV0dG9uID0gc3VidGl0bGUuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbHM6ICd0YXNrLW5hdmlnYXRvci1vcGVuLWJ1dHRvbicsXG4gICAgICAgICAgICAgICAgdGV4dDogJ0FicmlyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblV0aWxzLm9wZW5FbnRpdHlJbk5ld0xlYWYobW9kZWwuZm9jdXNFbnRpdHkuZmlsZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1YnRpdGxlLmNyZWF0ZVNwYW4oeyB0ZXh0OiAnTW9zdHJhbmRvIHZpc3RhIGdsb2JhbCcgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVzdGFkXHUwMEVEc3RpY2FzXG4gICAgICAgIGNvbnN0IHN0YXRzID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stbmF2aWdhdG9yLXN0YXRzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvdGFsRW50aXRpZXMgPSBtb2RlbC5hbGxFbnRpdGllcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHRvdGFsVGFza3MgPSBtb2RlbC5hbGxUYXNrcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZFRhc2tzID0gbW9kZWwuYWxsVGFza3MuZmlsdGVyKHRhc2sgPT4gdGFzay5jb21wbGV0ZWQpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcGVuZGluZ1Rhc2tzID0gdG90YWxUYXNrcyAtIGNvbXBsZXRlZFRhc2tzO1xuICAgICAgICBcbiAgICAgICAgc3RhdHMuY3JlYXRlRWwoJ3NwYW4nLCB7IFxuICAgICAgICAgICAgdGV4dDogYCR7dG90YWxFbnRpdGllc30gZW50aWRhZGVzIHwgJHtwZW5kaW5nVGFza3N9LyR7dG90YWxUYXNrc30gdGFyZWFzIHBlbmRpZW50ZXNgLFxuICAgICAgICAgICAgY2xzOiAndGFzay1uYXZpZ2F0b3Itc3RhdHMtdGV4dCdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGFjdHVhbGl6YWNpXHUwMEYzblxuICAgICAgICBjb25zdCByZWZyZXNoQnV0dG9uID0gaGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6ICd0YXNrLW5hdmlnYXRvci1yZWZyZXNoLWJ1dHRvbicsXG4gICAgICAgICAgICB0ZXh0OiAnQWN0dWFsaXphcidcbiAgICAgICAgfSk7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBFdmVudG8gcGVyc29uYWxpemFkbyBwYXJhIHNvbGljaXRhciBhY3R1YWxpemFjaVx1MDBGM25cbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCd0YXNrLW5hdmlnYXRvci1yZWZyZXNoJykpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBoZWFkZXI7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWEgbG9zIGJvdG9uZXMgZGUgb3BjaW9uZXMgZGUgdmlzdGFcbiAgICAgKi9cbiAgICBwcml2YXRlIGNyZWF0ZVZpZXdPcHRpb25zKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgY29uc3Qgdmlld09wdGlvbnMgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0YXNrLW5hdmlnYXRvci12aWV3LW9wdGlvbnMnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIHZpc3RhIGplclx1MDBFMXJxdWljYVxuICAgICAgICBjb25zdCBoaWVyYXJjaHlCdXR0b24gPSB2aWV3T3B0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiBgdGFzay1uYXZpZ2F0b3Itdmlldy1idXR0b24gJHttb2RlbC52aWV3TW9kZSA9PT0gVmlld01vZGUuSElFUkFSQ0hZID8gJ2FjdGl2ZScgOiAnJ31gLFxuICAgICAgICAgICAgdGV4dDogJ1Zpc3RhIEplclx1MDBFMXJxdWljYSdcbiAgICAgICAgfSk7XG4gICAgICAgIGhpZXJhcmNoeUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEV2ZW50byBwZXJzb25hbGl6YWRvIHBhcmEgY2FtYmlhciBlbCBtb2RvIGRlIHZpc3RhXG4gICAgICAgICAgICBjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGFzay1uYXZpZ2F0b3Itdmlldy1jaGFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7IHZpZXdNb2RlOiBWaWV3TW9kZS5ISUVSQVJDSFkgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSB2aXN0YSBkZSBsaXN0YXMgR1REXG4gICAgICAgIGNvbnN0IGd0ZExpc3RzQnV0dG9uID0gdmlld09wdGlvbnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogYHRhc2stbmF2aWdhdG9yLXZpZXctYnV0dG9uICR7bW9kZWwudmlld01vZGUgPT09IFZpZXdNb2RlLkdURF9MSVNUUyA/ICdhY3RpdmUnIDogJyd9YCxcbiAgICAgICAgICAgIHRleHQ6ICdMaXN0YXMgR1REJ1xuICAgICAgICB9KTtcbiAgICAgICAgZ3RkTGlzdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGFzay1uYXZpZ2F0b3Itdmlldy1jaGFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7IHZpZXdNb2RlOiBWaWV3TW9kZS5HVERfTElTVFMgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSB2aXN0YSBjb21iaW5hZGFcbiAgICAgICAgY29uc3QgY29tYmluZWRCdXR0b24gPSB2aWV3T3B0aW9ucy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiBgdGFzay1uYXZpZ2F0b3Itdmlldy1idXR0b24gJHttb2RlbC52aWV3TW9kZSA9PT0gVmlld01vZGUuQ09NQklORUQgPyAnYWN0aXZlJyA6ICcnfWAsXG4gICAgICAgICAgICB0ZXh0OiAnVmlzdGEgQ29tYmluYWRhJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29tYmluZWRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndGFzay1uYXZpZ2F0b3Itdmlldy1jaGFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgZGV0YWlsOiB7IHZpZXdNb2RlOiBWaWV3TW9kZS5DT01CSU5FRCB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHZpZXdPcHRpb25zO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW5kZXJpemEgbGEgdmlzdGEgamVyXHUwMEUxcnF1aWNhXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJIaWVyYXJjaHlWaWV3KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IHZvaWQge1xuICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgZWwgXHUwMEUxcmJvbCBqZXJcdTAwRTFycXVpY29cbiAgICAgICAgY29uc3QgaGllcmFyY2h5VHJlZSA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2hpZXJhcmNoeS10cmVlLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBubyBoYXkgZW50aWRhZGVzIGZpbHRyYWRhcywgbW9zdHJhciBtZW5zYWplXG4gICAgICAgIGlmIChtb2RlbC5maWx0ZXJlZEVudGl0aWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaGllcmFyY2h5VHJlZS5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsczogJ2hpZXJhcmNoeS10cmVlLWVtcHR5JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gaGF5IGVudGlkYWRlcyBxdWUgY29pbmNpZGFuIGNvbiBsb3MgZmlsdHJvcyBhcGxpY2Fkb3MuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsIFx1MDBFMXJib2wgYSBwYXJ0aXIgZGUgbGFzIGVudGlkYWRlcyBmaWx0cmFkYXNcbiAgICAgICAgdGhpcy5yZW5kZXJFbnRpdHlUcmVlKGhpZXJhcmNoeVRyZWUsIG1vZGVsLmZpbHRlcmVkRW50aXRpZXMsIDApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW5kZXJpemEgbGEgdmlzdGEgZGUgbGlzdGFzIEdURFxuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyR1RETGlzdHNWaWV3KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IHZvaWQge1xuICAgICAgICAvLyBDb250ZW5lZG9yIHBhcmEgbGFzIGxpc3RhcyBHVERcbiAgICAgICAgY29uc3QgZ3RkTGlzdHNDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdndGQtbGlzdHMtY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGhheSBsaXN0YXMgaGFiaWxpdGFkYXMsIG1vc3RyYXIgbWVuc2FqZVxuICAgICAgICBpZiAobW9kZWwuZmlsdGVycy5lbmFibGVkTGlzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBndGRMaXN0c0NvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsczogJ2d0ZC1saXN0cy1lbXB0eScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ05vIGhheSBsaXN0YXMgR1REIGhhYmlsaXRhZGFzIGVuIGxvcyBmaWx0cm9zLidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZW5kZXJpemFyIGNhZGEgbGlzdGEgR1REIGhhYmlsaXRhZGFcbiAgICAgICAgZm9yIChjb25zdCBsaXN0VHlwZSBvZiBtb2RlbC5maWx0ZXJzLmVuYWJsZWRMaXN0cykge1xuICAgICAgICAgICAgY29uc3QgdGFza3MgPSBtb2RlbC5maWx0ZXJlZFRhc2tzLmdldChsaXN0VHlwZSkgfHwgW107XG4gICAgICAgICAgICB0aGlzLnJlbmRlckdURExpc3QoZ3RkTGlzdHNDb250YWluZXIsIGxpc3RUeXBlLCB0YXNrcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVuZGVyaXphIGxhIHZpc3RhIGNvbWJpbmFkYSAoamVyYXJxdVx1MDBFRGEgKyBsaXN0YXMgR1REKVxuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyQ29tYmluZWRWaWV3KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgbW9kZWw6IEhpZXJhcmNoeVZpZXdNb2RlbCk6IHZvaWQge1xuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yIGRlIGRvcyBjb2x1bW5hc1xuICAgICAgICBjb25zdCBjb21iaW5lZENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ2NvbWJpbmVkLXZpZXctY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbHVtbmEgaXpxdWllcmRhOiBcdTAwQzFyYm9sIGplclx1MDBFMXJxdWljb1xuICAgICAgICBjb25zdCBoaWVyYXJjaHlDb2x1bW4gPSBjb21iaW5lZENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb21iaW5lZC12aWV3LWNvbHVtbiBoaWVyYXJjaHktY29sdW1uJyB9KTtcbiAgICAgICAgaGllcmFyY2h5Q29sdW1uLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0plcmFycXVcdTAwRURhJywgY2xzOiAnY29tYmluZWQtdmlldy10aXRsZScgfSk7XG4gICAgICAgIHRoaXMucmVuZGVySGllcmFyY2h5VmlldyhoaWVyYXJjaHlDb2x1bW4sIG1vZGVsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbHVtbmEgZGVyZWNoYTogTGlzdGFzIEdURFxuICAgICAgICBjb25zdCBndGRDb2x1bW4gPSBjb21iaW5lZENvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdjb21iaW5lZC12aWV3LWNvbHVtbiBndGQtY29sdW1uJyB9KTtcbiAgICAgICAgZ3RkQ29sdW1uLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0xpc3RhcyBHVEQnLCBjbHM6ICdjb21iaW5lZC12aWV3LXRpdGxlJyB9KTtcbiAgICAgICAgdGhpcy5yZW5kZXJHVERMaXN0c1ZpZXcoZ3RkQ29sdW1uLCBtb2RlbCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJlbmRlcml6YSByZWN1cnNpdmFtZW50ZSBlbCBcdTAwRTFyYm9sIGRlIGVudGlkYWRlc1xuICAgICAqL1xuICAgIHByaXZhdGUgcmVuZGVyRW50aXR5VHJlZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBlbnRpdGllczogSUVudGl0eVtdLCBsZXZlbDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRyZWVMaXN0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiBgaGllcmFyY2h5LXRyZWUtbGlzdCBsZXZlbC0ke2xldmVsfWAgfSk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiBlbnRpdGllcykge1xuICAgICAgICAgICAgLy8gQ3JlYXIgZWwgZWxlbWVudG8gZGUgbGlzdGEgcGFyYSBsYSBlbnRpZGFkXG4gICAgICAgICAgICBjb25zdCB0cmVlSXRlbSA9IHRyZWVMaXN0LmNyZWF0ZUVsKCdsaScsIHsgY2xzOiAnaGllcmFyY2h5LXRyZWUtaXRlbScgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENvbnRlbmVkb3IgcGFyYSBlbCBlbmNhYmV6YWRvIGRlIGxhIGVudGlkYWRcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHRyZWVJdGVtLmNyZWF0ZURpdih7IGNsczogYGhpZXJhcmNoeS10cmVlLWVudGl0eSBlbnRpdHktdHlwZS0ke2VudGl0eS50eXBlLnRvTG93ZXJDYXNlKCl9YCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW5mb3JtYWNpXHUwMEYzbiBiXHUwMEUxc2ljYSBkZSBsYSBlbnRpZGFkXG4gICAgICAgICAgICBjb25zdCBlbnRpdHlJbmZvID0gaGVhZGVyLmNyZWF0ZURpdih7IGNsczogJ2hpZXJhcmNoeS10cmVlLWVudGl0eS1pbmZvJyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWNvbm8gZGUgZXhwYW5zaVx1MDBGM25cbiAgICAgICAgICAgIGNvbnN0IGV4cGFuZEljb24gPSBlbnRpdHlJbmZvLmNyZWF0ZVNwYW4oeyBjbHM6ICdoaWVyYXJjaHktdHJlZS1leHBhbmQtaWNvbicsIHRleHQ6ICdcdTI1QkMnIH0pO1xuICAgICAgICAgICAgZXhwYW5kSWNvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgZXhwYW5kSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBpc0V4cGFuZGVkID0gZXhwYW5kSWNvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnKSA9PT0gJ3RydWUnO1xuICAgICAgICAgICAgICAgIGV4cGFuZEljb24uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgaXNFeHBhbmRlZCA/ICdmYWxzZScgOiAndHJ1ZScpO1xuICAgICAgICAgICAgICAgIGV4cGFuZEljb24udGV4dENvbnRlbnQgPSBpc0V4cGFuZGVkID8gJ1x1MjVCNicgOiAnXHUyNUJDJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBNb3N0cmFyL29jdWx0YXIgY29udGVuaWRvXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHRyZWVJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5oaWVyYXJjaHktdHJlZS1jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC50b2dnbGVDbGFzcygnY29sbGFwc2VkJywgIWlzRXhwYW5kZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFc3RhZG8gZGUgbGEgZW50aWRhZFxuICAgICAgICAgICAgaWYgKGVudGl0eS5zdGF0ZSkge1xuICAgICAgICAgICAgICAgIGVudGl0eUluZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgICAgICBjbHM6IGBlbnRpdHktc3RhdGUgc3RhdGUtJHt0aGlzLmdldEVudGl0eVN0YXRlQ2xhc3MoZW50aXR5LnN0YXRlKX1gLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBlbnRpdHkuc3RhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGlwbyBkZSBlbnRpZGFkXG4gICAgICAgICAgICBlbnRpdHlJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6ICdlbnRpdHktdHlwZScsXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nZXRFbnRpdHlUeXBlTGFiZWwoZW50aXR5LnR5cGUpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVFx1MDBFRHR1bG8gZGUgbGEgZW50aWRhZCAoY29uIGVubGFjZSlcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlTGluayA9IGVudGl0eUluZm8uY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgICAgIGNsczogJ2VudGl0eS10aXRsZScsXG4gICAgICAgICAgICAgICAgdGV4dDogZW50aXR5LnRpdGxlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpdGxlTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25VdGlscy5vcGVuRW50aXR5SW5OZXdMZWFmKGVudGl0eS5maWxlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDb250YWRvciBkZSB0YXJlYXNcbiAgICAgICAgICAgIGNvbnN0IHRhc2tDb3VudCA9IGVudGl0eS50YXNrcy5maWx0ZXIodGFzayA9PiAhdGFzay5jb21wbGV0ZWQpLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICh0YXNrQ291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5SW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ2VudGl0eS10YXNrLWNvdW50JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYCR7dGFza0NvdW50fWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIGxhcyB0YXJlYXMgeSBlbnRpZGFkZXMgaGlqYXNcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0cmVlSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdoaWVyYXJjaHktdHJlZS1jb250ZW50JyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVuZGVyaXphciB0YXJlYXMgZGUgbGEgZW50aWRhZFxuICAgICAgICAgICAgaWYgKGVudGl0eS50YXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrc0xpc3QoY29udGVudCwgZW50aXR5LnRhc2tzLCBlbnRpdHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW5kZXJpemFyIGVudGlkYWRlcyBoaWphcyAocmVjdXJzaXZhbWVudGUpXG4gICAgICAgICAgICBpZiAoZW50aXR5LmNoaWxkcmVuICYmIGVudGl0eS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJFbnRpdHlUcmVlKGNvbnRlbnQsIGVudGl0eS5jaGlsZHJlbiwgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW5kZXJpemEgdW5hIGxpc3RhIGRlIHRhcmVhcyBwYXJhIHVuYSBlbnRpZGFkXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJUYXNrc0xpc3QoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdGFza3M6IFRhc2tbXSwgcGFyZW50RW50aXR5OiBJRW50aXR5KTogdm9pZCB7XG4gICAgICAgIC8vIENvbnRlbmVkb3IgcGFyYSBsYSBsaXN0YSBkZSB0YXJlYXNcbiAgICAgICAgY29uc3QgdGFza3NDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZW50aXR5LXRhc2tzLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUXHUwMEVEdHVsbyBkZSBsYSBzZWNjaVx1MDBGM24gZGUgdGFyZWFzXG4gICAgICAgIHRhc2tzQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgXG4gICAgICAgICAgICBjbHM6ICdlbnRpdHktdGFza3MtdGl0bGUnLFxuICAgICAgICAgICAgdGV4dDogJ1RhcmVhcydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGaWx0cmFyIHRhcmVhcyBjb21wbGV0YWRhcyBzZWdcdTAwRkFuIGNvbmZpZ3VyYWNpXHUwMEYzblxuICAgICAgICBjb25zdCBmaWx0ZXJlZFRhc2tzID0gdGFza3MuZmlsdGVyKHRhc2sgPT4gIXRhc2suY29tcGxldGVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaWx0ZXJlZFRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGFza3NDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiAnZW50aXR5LXRhc2tzLWVtcHR5JyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gaGF5IHRhcmVhcyBwZW5kaWVudGVzJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIExpc3RhIGRlIHRhcmVhc1xuICAgICAgICBjb25zdCB0YXNrc0xpc3QgPSB0YXNrc0NvbnRhaW5lci5jcmVhdGVFbCgndWwnLCB7IGNsczogJ2VudGl0eS10YXNrcy1saXN0JyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSB0YXJlYVxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2YgZmlsdGVyZWRUYXNrcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJUYXNrSXRlbSh0YXNrc0xpc3QsIHRhc2ssIHBhcmVudEVudGl0eSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVuZGVyaXphIHVuIGVsZW1lbnRvIGRlIHRhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJUYXNrSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCB0YXNrOiBUYXNrLCBwYXJlbnRFbnRpdHk6IElFbnRpdHkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdGFza0l0ZW0gPSBjb250YWluZXIuY3JlYXRlRWwoJ2xpJywgeyBcbiAgICAgICAgICAgIGNsczogYHRhc2staXRlbSAke3Rhc2suY29tcGxldGVkID8gJ3Rhc2stY29tcGxldGVkJyA6ICcnfSAke3Rhc2suaXNCbG9ja2VkID8gJ3Rhc2stYmxvY2tlZCcgOiAnJ31gXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBkZSBpbmZvcm1hY2lcdTAwRjNuIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnN0IHRhc2tJbmZvID0gdGFza0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAndGFzay1pbmZvJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrYm94IGRlIGVzdGFkbyAoc29sbyB2aXN1YWwsIG5vIGZ1bmNpb25hbClcbiAgICAgICAgdGFza0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgY2xzOiBgdGFzay1jaGVja2JveCAke3Rhc2suY29tcGxldGVkID8gJ2NoZWNrZWQnIDogJyd9YCxcbiAgICAgICAgICAgIHRleHQ6IHRhc2suY29tcGxldGVkID8gJ1x1MjcxMycgOiAnICdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbmRpY2Fkb3IgZGUgcHJpb3JpZGFkXG4gICAgICAgIGlmICh0YXNrLnByaW9yaXR5ICE9PSBUYXNrUHJpb3JpdHkuTk9STUFMKSB7XG4gICAgICAgICAgICB0YXNrSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICAgICAgY2xzOiBgdGFzay1wcmlvcml0eSBwcmlvcml0eS0ke3Rhc2sucHJpb3JpdHl9YCxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLmdldFByaW9yaXR5SWNvbih0YXNrLnByaW9yaXR5KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFRleHRvIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnN0IHRhc2tUZXh0ID0gdGFza0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgY2xzOiAndGFzay10ZXh0JyxcbiAgICAgICAgICAgIHRleHQ6IHRhc2sudGV4dFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhY2VyIGNsaWMgZW4gbGEgdGFyZWEgYWJyZSBlbCBhcmNoaXZvIGVuIGxhIHBvc2ljaVx1MDBGM25cbiAgICAgICAgdGFza0l0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25VdGlscy5vcGVuVGFza0luRW50aXR5KHRhc2suZmlsZSwgdGFzay5saW5lSW5mby5udW1iZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluZGljYWRvcmVzIGRlIGZlY2hhXG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5kdWVEYXRlIHx8IHRhc2sudGltaW5nLnNjaGVkdWxlZERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGVDbGFzcyA9IHRhc2suaXNPdmVyZHVlKCkgPyAndGFzay1kYXRlLW92ZXJkdWUnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0YXNrLmlzRm9yVG9kYXkoKSA/ICd0YXNrLWRhdGUtdG9kYXknIDogJ3Rhc2stZGF0ZS1mdXR1cmUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGRhdGVUZXh0ID0gJyc7XG4gICAgICAgICAgICBpZiAodGFzay50aW1pbmcuZHVlRGF0ZSkge1xuICAgICAgICAgICAgICAgIGRhdGVUZXh0ID0gYFx1RDgzRFx1RENDNSAke3Rhc2sudGltaW5nLmR1ZURhdGV9YDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFzay50aW1pbmcuc2NoZWR1bGVkRGF0ZSkge1xuICAgICAgICAgICAgICAgIGRhdGVUZXh0ID0gYFx1MjNGMyAke3Rhc2sudGltaW5nLnNjaGVkdWxlZERhdGV9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgIGNsczogYHRhc2stZGF0ZSAke2RhdGVDbGFzc31gLFxuICAgICAgICAgICAgICAgIHRleHQ6IGRhdGVUZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIG1ldGFkYXRvcyBhZGljaW9uYWxlc1xuICAgICAgICBjb25zdCB0YXNrTWV0YSA9IHRhc2tJdGVtLmNyZWF0ZURpdih7IGNsczogJ3Rhc2stbWV0YScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBMaXN0YSBHVERcbiAgICAgICAgaWYgKHRhc2subGlzdFR5cGUpIHtcbiAgICAgICAgICAgIHRhc2tNZXRhLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6IGB0YXNrLWxpc3QtdHlwZSBsaXN0LSR7dGFzay5saXN0VHlwZX1gLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0TGlzdFR5cGVMYWJlbCh0YXNrLmxpc3RUeXBlKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRleHRvc1xuICAgICAgICBpZiAodGFzay50YWdzLmNvbnRleHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRzQ29udGFpbmVyID0gdGFza01ldGEuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1jb250ZXh0cycgfSk7XG4gICAgICAgICAgICBjb250ZXh0c0NvbnRhaW5lci5jcmVhdGVTcGFuKHsgY2xzOiAndGFzay1tZXRhLWxhYmVsJywgdGV4dDogJ0NvbnRleHRvczonIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGNvbnRleHQgb2YgdGFzay50YWdzLmNvbnRleHRzKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dHNDb250YWluZXIuY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICd0YXNrLWNvbnRleHQtdGFnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY29udGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBQZXJzb25hcyBhc2lnbmFkYXNcbiAgICAgICAgaWYgKHRhc2sudGFncy5wZW9wbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgcGVvcGxlQ29udGFpbmVyID0gdGFza01ldGEuY3JlYXRlRGl2KHsgY2xzOiAndGFzay1wZW9wbGUnIH0pO1xuICAgICAgICAgICAgcGVvcGxlQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBjbHM6ICd0YXNrLW1ldGEtbGFiZWwnLCB0ZXh0OiAnQXNpZ25hZGEgYTonIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBlcnNvbiBvZiB0YXNrLnRhZ3MucGVvcGxlKSB7XG4gICAgICAgICAgICAgICAgcGVvcGxlQ29udGFpbmVyLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAndGFzay1wZXJzb24tdGFnJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcGVyc29uXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE1lbnNhamUgZGUgYmxvcXVlbyBzaSBjb3JyZXNwb25kZVxuICAgICAgICBpZiAodGFzay5pc0Jsb2NrZWQgJiYgdGFzay5ibG9ja1JlYXNvbikge1xuICAgICAgICAgICAgdGFza01ldGEuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICAgICAgY2xzOiAndGFzay1ibG9jay1yZWFzb24nLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRhc2suYmxvY2tSZWFzb25cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJlbmRlcml6YSB1bmEgbGlzdGEgR1REXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJHVERMaXN0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGxpc3RUeXBlOiBUYXNrTGlzdFR5cGUsIHRhc2tzOiBUYXNrW10pOiB2b2lkIHtcbiAgICAgICAgLy8gQ29udGVuZWRvciBwYXJhIGxhIGxpc3RhIEdURFxuICAgICAgICBjb25zdCBsaXN0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogYGd0ZC1saXN0IGd0ZC1saXN0LSR7bGlzdFR5cGV9YCB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVuY2FiZXphZG8gZGUgbGEgbGlzdGFcbiAgICAgICAgY29uc3QgbGlzdEhlYWRlciA9IGxpc3RDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnZ3RkLWxpc3QtaGVhZGVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvIGNvbiBjb250YWRvclxuICAgICAgICBsaXN0SGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgXG4gICAgICAgICAgICBjbHM6ICdndGQtbGlzdC10aXRsZScsXG4gICAgICAgICAgICB0ZXh0OiBgJHt0aGlzLmdldExpc3RUeXBlTGFiZWwobGlzdFR5cGUpfSAoJHt0YXNrcy5sZW5ndGh9KWBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBEZXNjcmlwY2lcdTAwRjNuIGRlIGxhIGxpc3RhXG4gICAgICAgIGxpc3RIZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdndGQtbGlzdC1kZXNjcmlwdGlvbicsXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmdldExpc3RUeXBlRGVzY3JpcHRpb24obGlzdFR5cGUpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gaGF5IHRhcmVhcywgbW9zdHJhciBtZW5zYWplXG4gICAgICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGxpc3RDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiAnZ3RkLWxpc3QtZW1wdHknLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdObyBoYXkgdGFyZWFzIGVuIGVzdGEgbGlzdGEnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTGlzdGEgZGUgdGFyZWFzXG4gICAgICAgIGNvbnN0IHRhc2tzTGlzdCA9IGxpc3RDb250YWluZXIuY3JlYXRlRWwoJ3VsJywgeyBjbHM6ICdndGQtdGFza3MtbGlzdCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBPcmdhbml6YXIgdGFyZWFzIHNlZ1x1MDBGQW4gbGEgbGlzdGFcbiAgICAgICAgY29uc3Qgc29ydGVkVGFza3MgPSB0aGlzLnNvcnRUYXNrc0Zvckxpc3QodGFza3MsIGxpc3RUeXBlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSB0YXJlYVxuICAgICAgICBmb3IgKGNvbnN0IHRhc2sgb2Ygc29ydGVkVGFza3MpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyR1REVGFza0l0ZW0odGFza3NMaXN0LCB0YXNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZW5kZXJpemEgdW4gZWxlbWVudG8gZGUgdGFyZWEgcGFyYSB1bmEgbGlzdGEgR1REXG4gICAgICovXG4gICAgcHJpdmF0ZSByZW5kZXJHVERUYXNrSXRlbShjb250YWluZXI6IEhUTUxFbGVtZW50LCB0YXNrOiBUYXNrKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRhc2tJdGVtID0gY29udGFpbmVyLmNyZWF0ZUVsKCdsaScsIHsgXG4gICAgICAgICAgICBjbHM6IGBndGQtdGFzay1pdGVtICR7dGFzay5jb21wbGV0ZWQgPyAndGFzay1jb21wbGV0ZWQnIDogJyd9ICR7dGFzay5pc0Jsb2NrZWQgPyAndGFzay1ibG9ja2VkJyA6ICcnfWBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbmZvcm1hY2lcdTAwRjNuIGRlIGVudGlkYWQgcGFkcmVcbiAgICAgICAgaWYgKHRhc2sucGFyZW50RW50aXR5KSB7XG4gICAgICAgICAgICBjb25zdCBlbnRpdHlJbmZvID0gdGFza0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnZ3RkLXRhc2stZW50aXR5LWluZm8nIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFc3RhZG8gZGUgbGEgZW50aWRhZFxuICAgICAgICAgICAgaWYgKHRhc2sucGFyZW50RW50aXR5LnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgZW50aXR5SW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICAgICAgICAgIGNsczogYGVudGl0eS1zdGF0ZSBzdGF0ZS0ke3RoaXMuZ2V0RW50aXR5U3RhdGVDbGFzcyh0YXNrLnBhcmVudEVudGl0eS5zdGF0ZSl9YCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGFzay5wYXJlbnRFbnRpdHkuc3RhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGlwbyB5IHRcdTAwRUR0dWxvIGRlIGxhIGVudGlkYWRcbiAgICAgICAgICAgIGNvbnN0IGVudGl0eUxpbmsgPSBlbnRpdHlJbmZvLmNyZWF0ZUVsKCdhJywgeyBcbiAgICAgICAgICAgICAgICBjbHM6ICdlbnRpdHktbGluaycsXG4gICAgICAgICAgICAgICAgdGV4dDogYCR7dGhpcy5nZXRFbnRpdHlUeXBlTGFiZWwodGFzay5wYXJlbnRFbnRpdHkudHlwZSl9OiAke3Rhc2sucGFyZW50RW50aXR5LnRpdGxlfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZW50aXR5TGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRpb25VdGlscy5vcGVuRW50aXR5SW5OZXdMZWFmKHRhc2sucGFyZW50RW50aXR5LmZpbGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRlbmVkb3IgZGUgaW5mb3JtYWNpXHUwMEYzbiBkZSBsYSB0YXJlYVxuICAgICAgICBjb25zdCB0YXNrSW5mbyA9IHRhc2tJdGVtLmNyZWF0ZURpdih7IGNsczogJ2d0ZC10YXNrLWluZm8nIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2tib3ggZGUgZXN0YWRvIChzb2xvIHZpc3VhbCwgbm8gZnVuY2lvbmFsKVxuICAgICAgICB0YXNrSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICBjbHM6IGB0YXNrLWNoZWNrYm94ICR7dGFzay5jb21wbGV0ZWQgPyAnY2hlY2tlZCcgOiAnJ31gLFxuICAgICAgICAgICAgdGV4dDogdGFzay5jb21wbGV0ZWQgPyAnXHUyNzEzJyA6ICcgJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluZGljYWRvciBkZSBwcmlvcmlkYWRcbiAgICAgICAgaWYgKHRhc2sucHJpb3JpdHkgIT09IFRhc2tQcmlvcml0eS5OT1JNQUwpIHtcbiAgICAgICAgICAgIHRhc2tJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6IGB0YXNrLXByaW9yaXR5IHByaW9yaXR5LSR7dGFzay5wcmlvcml0eX1gLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2V0UHJpb3JpdHlJY29uKHRhc2sucHJpb3JpdHkpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVGV4dG8gZGUgbGEgdGFyZWFcbiAgICAgICAgY29uc3QgdGFza1RleHQgPSB0YXNrSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICBjbHM6ICd0YXNrLXRleHQnLFxuICAgICAgICAgICAgdGV4dDogdGFzay50ZXh0XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFjZXIgY2xpYyBlbiBsYSB0YXJlYSBhYnJlIGVsIGFyY2hpdm8gZW4gbGEgcG9zaWNpXHUwMEYzblxuICAgICAgICB0YXNrSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGlvblV0aWxzLm9wZW5UYXNrSW5FbnRpdHkodGFzay5maWxlLCB0YXNrLmxpbmVJbmZvLm51bWJlcik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRmVjaGFzIHkgdGllbXBvc1xuICAgICAgICBjb25zdCB0aW1pbmdJbmZvID0gdGFza0l0ZW0uY3JlYXRlRGl2KHsgY2xzOiAnZ3RkLXRhc2stdGltaW5nJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZlY2hhIGxcdTAwRURtaXRlXG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5kdWVEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlQ2xhc3MgPSB0YXNrLmlzT3ZlcmR1ZSgpID8gJ3Rhc2stZGF0ZS1vdmVyZHVlJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFzay5pc0ZvclRvZGF5KCkgPyAndGFzay1kYXRlLXRvZGF5JyA6ICd0YXNrLWRhdGUtZnV0dXJlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpbWluZ0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgIGNsczogYHRhc2stZGF0ZSAke2RhdGVDbGFzc31gLFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdUQ4M0RcdURDQzUgJHt0YXNrLnRpbWluZy5kdWVEYXRlfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGZWNoYSBwcm9ncmFtYWRhXG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5zY2hlZHVsZWREYXRlICYmICF0YXNrLnRpbWluZy5kdWVEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlQ2xhc3MgPSB0YXNrLmlzT3ZlcmR1ZSgpID8gJ3Rhc2stZGF0ZS1vdmVyZHVlJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGFzay5pc0ZvclRvZGF5KCkgPyAndGFzay1kYXRlLXRvZGF5JyA6ICd0YXNrLWRhdGUtZnV0dXJlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRpbWluZ0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgIGNsczogYHRhc2stZGF0ZSAke2RhdGVDbGFzc31gLFxuICAgICAgICAgICAgICAgIHRleHQ6IGBcdTIzRjMgJHt0YXNrLnRpbWluZy5zY2hlZHVsZWREYXRlfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBIb3JhIGRlIGluaWNpb1xuICAgICAgICBpZiAodGFzay50aW1pbmcuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICB0aW1pbmdJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6ICd0YXNrLXRpbWUnLFxuICAgICAgICAgICAgICAgIHRleHQ6IGAke3Rhc2sudGltaW5nLnN0YXJ0VGltZX0ke3Rhc2sudGltaW5nLmVuZFRpbWUgPyBgIC0gJHt0YXNrLnRpbWluZy5lbmRUaW1lfWAgOiAnJ31gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRHVyYWNpXHUwMEYzblxuICAgICAgICBpZiAodGFzay50aW1pbmcuZHVyYXRpb24pIHtcbiAgICAgICAgICAgIGxldCBkdXJhdGlvblRleHQgPSAnJztcbiAgICAgICAgICAgIGlmICh0YXNrLnRpbWluZy5kdXJhdGlvbiA+PSA2MCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcih0YXNrLnRpbWluZy5kdXJhdGlvbiAvIDYwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtaW51dGVzID0gdGFzay50aW1pbmcuZHVyYXRpb24gJSA2MDtcbiAgICAgICAgICAgICAgICBkdXJhdGlvblRleHQgPSBgJHtob3Vyc31oJHttaW51dGVzID4gMCA/IGAgJHttaW51dGVzfW1pbmAgOiAnJ31gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvblRleHQgPSBgJHt0YXNrLnRpbWluZy5kdXJhdGlvbn1taW5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aW1pbmdJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6ICd0YXNrLWR1cmF0aW9uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBkdXJhdGlvblRleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTZW1hbmFcbiAgICAgICAgaWYgKHRhc2sudGltaW5nLndlZWspIHtcbiAgICAgICAgICAgIHRpbWluZ0luZm8uY3JlYXRlU3Bhbih7IFxuICAgICAgICAgICAgICAgIGNsczogJ3Rhc2std2VlaycsXG4gICAgICAgICAgICAgICAgdGV4dDogYFNlbWFuYTogJHt0YXNrLnRpbWluZy53ZWVrfWBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBFdGlxdWV0YXMgeSBtZXRhZGF0b3NcbiAgICAgICAgY29uc3QgdGFnc0luZm8gPSB0YXNrSXRlbS5jcmVhdGVEaXYoeyBjbHM6ICdndGQtdGFzay10YWdzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRleHRvc1xuICAgICAgICBmb3IgKGNvbnN0IGNvbnRleHQgb2YgdGFzay50YWdzLmNvbnRleHRzKSB7XG4gICAgICAgICAgICB0YWdzSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICAgICAgY2xzOiAndGFzay1jb250ZXh0LXRhZycsXG4gICAgICAgICAgICAgICAgdGV4dDogY29udGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFBlcnNvbmFzXG4gICAgICAgIGZvciAoY29uc3QgcGVyc29uIG9mIHRhc2sudGFncy5wZW9wbGUpIHtcbiAgICAgICAgICAgIHRhZ3NJbmZvLmNyZWF0ZVNwYW4oeyBcbiAgICAgICAgICAgICAgICBjbHM6ICd0YXNrLXBlcnNvbi10YWcnLFxuICAgICAgICAgICAgICAgIHRleHQ6IHBlcnNvblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE90cm9zIHRhZ3NcbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFzay50YWdzLmd0ZFRhZ3MuY29uY2F0KHRhc2sudGFncy5vdGhlclRhZ3MpKSB7XG4gICAgICAgICAgICB0YWdzSW5mby5jcmVhdGVTcGFuKHsgXG4gICAgICAgICAgICAgICAgY2xzOiAndGFzay1vdGhlci10YWcnLFxuICAgICAgICAgICAgICAgIHRleHQ6IHRhZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFJhelx1MDBGM24gZGUgYmxvcXVlb1xuICAgICAgICBpZiAodGFzay5pc0Jsb2NrZWQgJiYgdGFzay5ibG9ja1JlYXNvbikge1xuICAgICAgICAgICAgdGFza0l0ZW0uY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICAgICAgY2xzOiAnZ3RkLXRhc2stYmxvY2stcmVhc29uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiB0YXNrLmJsb2NrUmVhc29uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBPcmRlbmEgbGFzIHRhcmVhcyBzZWdcdTAwRkFuIGVsIHRpcG8gZGUgbGlzdGEgR1REXG4gICAgICovXG4gICAgcHJpdmF0ZSBzb3J0VGFza3NGb3JMaXN0KHRhc2tzOiBUYXNrW10sIGxpc3RUeXBlOiBUYXNrTGlzdFR5cGUpOiBUYXNrW10ge1xuICAgICAgICBjb25zdCB0YXNrc0NvcHkgPSBbLi4udGFza3NdO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChsaXN0VHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuSU5CT1g6XG4gICAgICAgICAgICAgICAgLy8gU2luIG9yZGVuIGVzcGVjXHUwMEVEZmljb1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrc0NvcHk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjYXNlIFRhc2tMaXN0VHlwZS5ORVhUX0FDVElPTlM6XG4gICAgICAgICAgICAgICAgLy8gT3JkZW5hciBwb3IgY29udGV4dG8geSBwcmlvcmlkYWRcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFza3NDb3B5LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJpbWVybyBwb3IgY29udGV4dG9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dEEgPSBhLnRhZ3MuY29udGV4dHNbMF0gfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHRCID0gYi50YWdzLmNvbnRleHRzWzBdIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0Q29tcCA9IGNvbnRleHRBLmxvY2FsZUNvbXBhcmUoY29udGV4dEIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dENvbXAgIT09IDApIHJldHVybiBjb250ZXh0Q29tcDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEx1ZWdvIHBvciBwcmlvcmlkYWQgKGRlIG1heW9yIGEgbWVub3IpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVQcmlvcml0aWVzKGIucHJpb3JpdHksIGEucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuQ0FMRU5EQVI6XG4gICAgICAgICAgICAgICAgLy8gT3JkZW5hciBwb3IgZmVjaGEgeSBob3JhXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tzQ29weS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByaW1lcm8gcG9yIGZlY2hhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gYS50aW1pbmcuZHVlRGF0ZSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBiLnRpbWluZy5kdWVEYXRlIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQ29tcCA9IGRhdGVBLmxvY2FsZUNvbXBhcmUoZGF0ZUIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZUNvbXAgIT09IDApIHJldHVybiBkYXRlQ29tcDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEx1ZWdvIHBvciBob3JhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVBID0gYS50aW1pbmcuc3RhcnRUaW1lIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lQiA9IGIudGltaW5nLnN0YXJ0VGltZSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVBLmxvY2FsZUNvbXBhcmUodGltZUIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuSE9QRUZVTExZX1RPREFZOlxuICAgICAgICAgICAgICAgIC8vIE9yZGVuYXIgcG9yIHRpcG8gZGUgZmVjaGEgeSBwcmlvcmlkYWRcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFza3NDb3B5LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJpbWVybyB0YXJlYXMgY29uIGZlY2hhIGxcdTAwRURtaXRlIChcdUQ4M0RcdURDQzUpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc0xpbWl0QSA9ICEhYS50aW1pbmcuZHVlRGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGFzTGltaXRCID0gISFiLnRpbWluZy5kdWVEYXRlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaGFzTGltaXRBICE9PSBoYXNMaW1pdEIpIHJldHVybiBoYXNMaW1pdEIgPyAxIDogLTE7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBMdWVnbyBwb3IgcHJpb3JpZGFkIChkZSBtYXlvciBhIG1lbm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlUHJpb3JpdGllcyhiLnByaW9yaXR5LCBhLnByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLkFTU0lHTkVEOlxuICAgICAgICAgICAgICAgIC8vIE9yZGVuYXIgcG9yIHBlcnNvbmEgYXNpZ25hZGEgeSBmZWNoYVxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrc0NvcHkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBQcmltZXJvIHBvciBwZXJzb25hXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcnNvbkEgPSBhLnRhZ3MucGVvcGxlWzBdIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJzb25CID0gYi50YWdzLnBlb3BsZVswXSB8fCAnJztcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyc29uQ29tcCA9IHBlcnNvbkEubG9jYWxlQ29tcGFyZShwZXJzb25CKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNvbkNvbXAgIT09IDApIHJldHVybiBwZXJzb25Db21wO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gTHVlZ28gcG9yIGZlY2hhIGxcdTAwRURtaXRlIChzaSBleGlzdGUpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gYS50aW1pbmcuZHVlRGF0ZSB8fCAnOTk5OS05OS05OSc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVCID0gYi50aW1pbmcuZHVlRGF0ZSB8fCAnOTk5OS05OS05OSc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRlQS5sb2NhbGVDb21wYXJlKGRhdGVCKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLldBSVRJTkc6XG4gICAgICAgICAgICAgICAgLy8gT3JkZW5hciBwb3IgcmF6XHUwMEYzbiBkZSBibG9xdWVvXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tzQ29weS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByaW1lcm8gcG9yIHRpcG8gZGUgYmxvcXVlbyAoZGVwZW5kZW5jaWEsIGZlY2hhIGZ1dHVyYSwgc2VtYW5hKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9ja1R5cGVBID0gdGhpcy5nZXRCbG9ja1R5cGUoYSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2NrVHlwZUIgPSB0aGlzLmdldEJsb2NrVHlwZShiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrVHlwZUEgIT09IGJsb2NrVHlwZUIpIHJldHVybiBibG9ja1R5cGVBIC0gYmxvY2tUeXBlQjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEx1ZWdvIHBvciBmZWNoYSAoc2kgZXMgcG9yIGZlY2hhIG8gc2VtYW5hKVxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvY2tUeXBlQSA9PT0gMSkgeyAvLyBGZWNoYSBmdXR1cmFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gYS50aW1pbmcuc3RhcnREYXRlIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBiLnRpbWluZy5zdGFydERhdGUgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUEubG9jYWxlQ29tcGFyZShkYXRlQik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmxvY2tUeXBlQSA9PT0gMykgeyAvLyBTZW1hbmEgZnV0dXJhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWVrQSA9IGEudGltaW5nLndlZWsgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ZWVrQiA9IGIudGltaW5nLndlZWsgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2Vla0EubG9jYWxlQ29tcGFyZSh3ZWVrQik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBQYXJhIG90cmFzIGxpc3Rhcywgb3JkZW5hciBwb3IgcHJpb3JpZGFkXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tzQ29weS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVQcmlvcml0aWVzKGIucHJpb3JpdHksIGEucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgZWwgdGlwbyBkZSBibG9xdWVvIHBhcmEgb3JkZW5hciB0YXJlYXMgZW4gcGF1c2FcbiAgICAgKiAxOiBGZWNoYSBmdXR1cmEsIDI6IERlcGVuZGVuY2lhLCAzOiBTZW1hbmEgZnV0dXJhXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRCbG9ja1R5cGUodGFzazogVGFzayk6IG51bWJlciB7XG4gICAgICAgIGlmICh0YXNrLnRpbWluZy5zdGFydERhdGUpIHJldHVybiAxO1xuICAgICAgICBpZiAodGFzay5kZXBlbmRlbmNpZXMubGVuZ3RoID4gMCkgcmV0dXJuIDI7XG4gICAgICAgIGlmICh0YXNrLnRpbWluZy53ZWVrKSByZXR1cm4gMztcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENvbXBhcmEgZG9zIHByaW9yaWRhZGVzIHBhcmEgb3JkZW5hciAoZGVsIG1cdTAwRTFzIGFsdG8gYWwgbVx1MDBFMXMgYmFqbylcbiAgICAgKi9cbiAgICBwcml2YXRlIGNvbXBhcmVQcmlvcml0aWVzKGE6IFRhc2tQcmlvcml0eSwgYjogVGFza1ByaW9yaXR5KTogbnVtYmVyIHtcbiAgICAgICAgY29uc3QgcHJpb3JpdHlWYWx1ZXMgPSB7XG4gICAgICAgICAgICBbVGFza1ByaW9yaXR5LkhJR0hFU1RdOiA0LFxuICAgICAgICAgICAgW1Rhc2tQcmlvcml0eS5ISUdIXTogMyxcbiAgICAgICAgICAgIFtUYXNrUHJpb3JpdHkuTk9STUFMXTogMixcbiAgICAgICAgICAgIFtUYXNrUHJpb3JpdHkuTE9XXTogMSxcbiAgICAgICAgICAgIFtUYXNrUHJpb3JpdHkuTE9XRVNUXTogMFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5VmFsdWVzW2FdIC0gcHJpb3JpdHlWYWx1ZXNbYl07XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgbGEgZXRpcXVldGEgcGFyYSB1biB0aXBvIGRlIGVudGlkYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEVudGl0eVR5cGVMYWJlbCh0eXBlOiBFbnRpdHlUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuQVJFQV9WSURBOlxuICAgICAgICAgICAgICAgIHJldHVybiAnXHUwMEMxcmVhIGRlIFZpZGEnO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkFSRUFfSU5URVJFUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1x1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXMnO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLlBST1lFQ1RPX1E6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdQcm95ZWN0byBRJztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5QUk9ZRUNUT19HVEQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdQcm95ZWN0byBHVEQnO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLkFOT1RBQ0lPTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0Fub3RhY2lcdTAwRjNuJztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5DQU1QQU5BOlxuICAgICAgICAgICAgICAgIHJldHVybiAnQ2FtcGFcdTAwRjFhJztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5FTlRSRUdBQkxFOlxuICAgICAgICAgICAgICAgIHJldHVybiAnRW50cmVnYWJsZSc7XG4gICAgICAgICAgICBjYXNlIEVudGl0eVR5cGUuUkVHSVNUUk9fVElFTVBPOlxuICAgICAgICAgICAgICAgIHJldHVybiAnUmVnaXN0cm8gVGllbXBvJztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5UUkFOU0FDQ0lPTjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1RyYW5zYWNjaVx1MDBGM24nO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlUeXBlLk9USEVSOlxuICAgICAgICAgICAgICAgIHJldHVybiAnT3RyYSBFbnRpZGFkJztcbiAgICAgICAgICAgIGNhc2UgRW50aXR5VHlwZS5VTktOT1dOOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0VudGlkYWQnO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgbGEgY2xhc2UgQ1NTIHBhcmEgdW4gZXN0YWRvIGRlIGVudGlkYWRcbiAgICAgKi9cbiAgICBwcml2YXRlIGdldEVudGl0eVN0YXRlQ2xhc3Moc3RhdGU6IEVudGl0eVN0YXRlKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlTdGF0ZS5BQ1RJVkU6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdhY3RpdmUnO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlTdGF0ZS5QQVVTRUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdwYXVzZWQnO1xuICAgICAgICAgICAgY2FzZSBFbnRpdHlTdGF0ZS5TVE9QUEVEOlxuICAgICAgICAgICAgICAgIHJldHVybiAnc3RvcHBlZCc7XG4gICAgICAgICAgICBjYXNlIEVudGl0eVN0YXRlLkFSQ0hJVkVEOlxuICAgICAgICAgICAgICAgIHJldHVybiAnYXJjaGl2ZWQnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3Vua25vd24nO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgZWwgaWNvbm8gcGFyYSB1bmEgcHJpb3JpZGFkXG4gICAgICovXG4gICAgcHJpdmF0ZSBnZXRQcmlvcml0eUljb24ocHJpb3JpdHk6IFRhc2tQcmlvcml0eSk6IHN0cmluZyB7XG4gICAgICAgIHN3aXRjaCAocHJpb3JpdHkpIHtcbiAgICAgICAgICAgIGNhc2UgVGFza1ByaW9yaXR5LkhJR0hFU1Q6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdcdTIzRUInO1xuICAgICAgICAgICAgY2FzZSBUYXNrUHJpb3JpdHkuSElHSDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1x1RDgzRFx1REQzQyc7XG4gICAgICAgICAgICBjYXNlIFRhc2tQcmlvcml0eS5MT1c6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdcdUQ4M0RcdUREM0QnO1xuICAgICAgICAgICAgY2FzZSBUYXNrUHJpb3JpdHkuTE9XRVNUOlxuICAgICAgICAgICAgICAgIHJldHVybiAnXHUyM0VDJztcbiAgICAgICAgICAgIGNhc2UgVGFza1ByaW9yaXR5Lk5PUk1BTDpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgbGEgZXRpcXVldGEgcGFyYSB1biB0aXBvIGRlIGxpc3RhIEdURFxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0TGlzdFR5cGVMYWJlbChsaXN0VHlwZTogVGFza0xpc3RUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIChsaXN0VHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuSU5CT1g6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdCYW5kZWphIGRlIEVudHJhZGEnO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuTkVYVF9BQ1RJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiAnUHJcdTAwRjN4aW1hcyBBY2Npb25lcyc7XG4gICAgICAgICAgICBjYXNlIFRhc2tMaXN0VHlwZS5DQUxFTkRBUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0NhbGVuZGFyaW8nO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuSE9QRUZVTExZX1RPREFZOlxuICAgICAgICAgICAgICAgIHJldHVybiAnT2phbFx1MDBFMSBIb3knO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuQVNTSUdORUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdBc2lnbmFkYXMnO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuUFJPSkVDVFM6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdQcm95ZWN0b3MnO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuU09NRURBWV9NQVlCRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0FsZ1x1MDBGQW4gRFx1MDBFRGEgLyBUYWwgVmV6JztcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLk5PVF9USElTX1dFRUs6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdFc3RhIFNlbWFuYSBObyc7XG4gICAgICAgICAgICBjYXNlIFRhc2tMaXN0VHlwZS5XQUlUSU5HOlxuICAgICAgICAgICAgICAgIHJldHVybiAnRW4gUGF1c2EnO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ0xpc3RhIERlc2Nvbm9jaWRhJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBPYnRpZW5lIGxhIGRlc2NyaXBjaVx1MDBGM24gcGFyYSB1biB0aXBvIGRlIGxpc3RhIEdURFxuICAgICAqL1xuICAgIHByaXZhdGUgZ2V0TGlzdFR5cGVEZXNjcmlwdGlvbihsaXN0VHlwZTogVGFza0xpc3RUeXBlKTogc3RyaW5nIHtcbiAgICAgICAgc3dpdGNoIChsaXN0VHlwZSkge1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuSU5CT1g6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdUYXJlYXMgcXVlIG5lY2VzaXRhbiBzZXIgcHJvY2VzYWRhcyBvIGNsYXNpZmljYWRhcy4nO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuTkVYVF9BQ1RJT05TOlxuICAgICAgICAgICAgICAgIHJldHVybiAnQWNjaW9uZXMgbGlzdGFzIHBhcmEgZWplY3V0YXIgZW4gY29udGV4dG9zIGVzcGVjXHUwMEVEZmljb3MuJztcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLkNBTEVOREFSOlxuICAgICAgICAgICAgICAgIHJldHVybiAnQ29tcHJvbWlzb3MgY29uIGZlY2hhIHkgaG9yYSBlc3BlY1x1MDBFRGZpY2EuJztcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLkhPUEVGVUxMWV9UT0RBWTpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1RhcmVhcyBxdWUgc2UgZGVzZWFuIGNvbXBsZXRhciBob3ksIHNpbiBob3JhIGVzcGVjXHUwMEVEZmljYS4nO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuQVNTSUdORUQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuICdUYXJlYXMgZGVsZWdhZGFzIGEgb3RyYXMgcGVyc29uYXMuJztcbiAgICAgICAgICAgIGNhc2UgVGFza0xpc3RUeXBlLlBST0pFQ1RTOlxuICAgICAgICAgICAgICAgIHJldHVybiAnUmVzdWx0YWRvcyBxdWUgcmVxdWllcmVuIG1cdTAwRkFsdGlwbGVzIGFjY2lvbmVzLic7XG4gICAgICAgICAgICBjYXNlIFRhc2tMaXN0VHlwZS5TT01FREFZX01BWUJFOlxuICAgICAgICAgICAgICAgIHJldHVybiAnSWRlYXMgcGFyYSBjb25zaWRlcmFyIGVuIGVsIGZ1dHVyby4nO1xuICAgICAgICAgICAgY2FzZSBUYXNrTGlzdFR5cGUuTk9UX1RISVNfV0VFSzpcbiAgICAgICAgICAgICAgICByZXR1cm4gJ1RhcmVhcyBwb3NwdWVzdGFzIHBhcmEgZGVzcHVcdTAwRTlzIGRlIGVzdGEgc2VtYW5hLic7XG4gICAgICAgICAgICBjYXNlIFRhc2tMaXN0VHlwZS5XQUlUSU5HOlxuICAgICAgICAgICAgICAgIHJldHVybiAnVGFyZWFzIGJsb3F1ZWFkYXMgcG9yIGRlcGVuZGVuY2lhcyBvIGZlY2hhcyBmdXR1cmFzLic7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9zZXJ2aWNlcy9UYXNrTWFuYWdlckludGVncmF0aW9uLnRzXG5cbmltcG9ydCB7IFRhcmVhc0FQSSB9IGZyb20gJy4uLy4uL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUEknO1xuaW1wb3J0IHsgVGFzaywgVGFza0xpc3RUeXBlIH0gZnJvbSAnLi4vbW9kZWxzL1Rhc2snO1xuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vKipcbiAqIFNlcnZpY2lvIHBhcmEgaW50ZWdyYXIgZWwgVGFza05hdmlnYXRvciBjb24gZWwgVGFza01hbmFnZXIgZXhpc3RlbnRlXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrTWFuYWdlckludGVncmF0aW9uIHtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgdGFyZWFzQVBJOiBUYXJlYXNBUEk7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudGFyZWFzQVBJID0gcGx1Z2luLnRhcmVhc0FQSTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2FyZ2EgdGFyZWFzIHZlbmNpZGFzIGRlc2RlIGVsIFRhc2tNYW5hZ2VyXG4gICAgICovXG4gICAgYXN5bmMgbG9hZE92ZXJkdWVUYXNrcygpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGFyZWFzQVBJIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBPYnRlbmVyIHRhcmVhcyB2ZW5jaWRhcyBhYmllcnRhc1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmR1ZVRhc2tzID0gYXdhaXQgdGhpcy50YXJlYXNBUEkuZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDb252ZXJ0aXIgYWwgZm9ybWF0byBUYXNrIGRlbCBOYXZpZ2F0b3JUYXNrXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGFyZWFzVG9OYXZpZ2F0b3JUYXNrcyhvdmVyZHVlVGFza3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY2FyZ2FyIHRhcmVhcyB2ZW5jaWRhczonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ29udmllcnRlIHRhcmVhcyBkZWwgZm9ybWF0byBkZSBUYXJlYXNBUEkgYWwgZm9ybWF0byBkZSBUYXNrTmF2aWdhdG9yXG4gICAgICovXG4gICAgcHJpdmF0ZSBjb252ZXJ0VGFyZWFzVG9OYXZpZ2F0b3JUYXNrcyh0YXJlYXM6IGFueVtdKTogVGFza1tdIHtcbiAgICAgICAgY29uc3QgdGFza3M6IFRhc2tbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCB0YXJlYSBvZiB0YXJlYXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXIgdW4gb2JqZXRvIExpbmVJbmZvIGJcdTAwRTFzaWNvXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bWJlcjogdGFyZWEubGluZSB8fCAwLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0YXJlYS5yYXdUZXh0IHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRhdGlvbjogMFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXIgdW5hIGluc3RhbmNpYSBkZSBUYXNrXG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IG5ldyBUYXNrKFxuICAgICAgICAgICAgICAgICAgICB0YXJlYS5pZCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEudGV4dCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEucmF3VGV4dCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgZmFsc2UsIC8vIEFzdW1pbW9zIHF1ZSBubyBlc3RcdTAwRTEgY29tcGxldGFkYSB5YSBxdWUgc29uIHRhcmVhcyB2ZW5jaWRhcyBhYmllcnRhc1xuICAgICAgICAgICAgICAgICAgICB0YXJlYS5maWxlLCAvLyBURmlsZVxuICAgICAgICAgICAgICAgICAgICBsaW5lSW5mb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRXN0YWJsZWNlciBwcm9waWVkYWRlcyBhZGljaW9uYWxlc1xuICAgICAgICAgICAgICAgIHRhc2sudGltaW5nLmR1ZURhdGUgPSB0YXJlYS5kdWVEYXRlIHx8ICcnO1xuICAgICAgICAgICAgICAgIHRhc2sudGltaW5nLnNjaGVkdWxlZERhdGUgPSB0YXJlYS5zY2hlZHVsZWREYXRlIHx8ICcnO1xuICAgICAgICAgICAgICAgIHRhc2sudGltaW5nLnN0YXJ0RGF0ZSA9IHRhcmVhLnN0YXJ0RGF0ZSB8fCAnJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDbGFzaWZpY2FyIHNlZ1x1MDBGQW4gY3JpdGVyaW9zIEdURFxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5jb250ZXh0cyAmJiB0YXJlYS5jb250ZXh0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2sudGFncy5jb250ZXh0cyA9IHRhcmVhLmNvbnRleHRzO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmxpc3RUeXBlID0gVGFza0xpc3RUeXBlLk5FWFRfQUNUSU9OUztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmVhLnBlb3BsZSAmJiB0YXJlYS5wZW9wbGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnRhZ3MucGVvcGxlID0gdGFyZWEucGVvcGxlO1xuICAgICAgICAgICAgICAgICAgICB0YXNrLmxpc3RUeXBlID0gVGFza0xpc3RUeXBlLkFTU0lHTkVEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2subGlzdFR5cGUgPSBUYXNrTGlzdFR5cGUuSU5CT1g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIE1hcmNhciBjb21vIHZlbmNpZGFcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZHVlRGF0ZSB8fCB0YXJlYS5zY2hlZHVsZWREYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suaXNPdmVyZHVlID0gKCkgPT4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY29udmVydGlyIHRhcmVhOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBDb250aW51YXIgY29uIGxhIHNpZ3VpZW50ZSB0YXJlYVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFjdHVhbGl6YSBlbCBlc3RhZG8gZGUgdW5hIHRhcmVhIGVuIGVsIHNpc3RlbWFcbiAgICAgKi9cbiAgICBhc3luYyB1cGRhdGVUYXNrU3RhdHVzKHRhc2s6IFRhc2ssIGNvbXBsZXRlZDogYm9vbGVhbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGFyZWFzQVBJIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVc2FyIGVsIEFQSSBkZSB0YXJlYXMgcGFyYSBhY3R1YWxpemFyIGVsIGVzdGFkb1xuICAgICAgICAgICAgLy8gRXN0ZSBlcyB1biBlamVtcGxvLCBsYSBpbXBsZW1lbnRhY2lcdTAwRjNuIHJlYWwgZGVwZW5kZXJcdTAwRTEgZGUgbGEgQVBJIGRpc3BvbmlibGVcbiAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMudGFyZWFzQVBJLnVwZGF0ZVRhc2tTdGF0dXModGFzay5maWxlLnBhdGgsIHRhc2subGluZUluZm8ubnVtYmVyLCBjb21wbGV0ZWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQb3IgYWhvcmEsIGRldm9sdmVyIHRydWUgaW5kaWNhbmRvIFx1MDBFOXhpdG9cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgYWN0dWFsaXphciBlc3RhZG8gZGUgdGFyZWE6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9idGllbmUgZXN0YWRcdTAwRURzdGljYXMgZGUgdGFyZWFzIGRlc2RlIGVsIFRhc2tNYW5hZ2VyXG4gICAgICovXG4gICAgYXN5bmMgZ2V0VGFza1N0YXRzKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUYXJlYXNBUEkgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVzdG8gZXMgdW4gcGxhY2Vob2xkZXIsIFRhcmVhc0FQSSBkZWJlclx1MDBFRGEgcHJvcG9yY2lvbmFyIHVuIG1cdTAwRTl0b2RvIHBhcmEgZXN0b1xuICAgICAgICAgICAgLy8gY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLnRhcmVhc0FQSS5nZXRUYXNrU3RhdHMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUG9yIGFob3JhLCBkZXZvbHZlciB1biBvYmpldG8gdmFjXHUwMEVEb1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgb2J0ZW5lciBlc3RhZFx1MDBFRHN0aWNhcyBkZSB0YXJlYXM6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQ0FBLG1CQUdhO0FBSmI7QUFBQTtBQUFBO0FBQ0EsSUFBQUEsb0JBQStDO0FBR3hDLElBQU0saUJBQU4sY0FBNkIsb0NBQTBCO0FBQUE7QUFBQTtBQUFBLE1BTzFELFlBQVlDLE1BQVUsUUFBa0IsUUFBa0IsYUFBcUI7QUFDM0UsY0FBTUEsSUFBRztBQUpiO0FBQUEsYUFBUSxpQkFBMEI7QUFLOUIsYUFBSyxTQUFTO0FBQ2QsYUFBSyxTQUFTO0FBRWQsYUFBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEtBQUssT0FBTyxVQUFVO0FBQ2pELGNBQUksS0FBSyxJQUFJLE9BQU8sS0FBSztBQUN6QixpQkFBTztBQUFBLFFBQ1gsR0FBRyxDQUFDLENBQUM7QUFDTCxhQUFLLGVBQWUsV0FBVztBQUFBLE1BQ25DO0FBQUE7QUFBQSxNQUdBLFdBQXFCO0FBQ2pCLGVBQU8sS0FBSztBQUFBLE1BQ2hCO0FBQUE7QUFBQSxNQUdBLFlBQVksTUFBc0I7QUFDOUIsZUFBTztBQUFBLE1BQ1g7QUFBQTtBQUFBLE1BR0EsVUFBZ0I7QUFFWixZQUFJLENBQUMsS0FBSyxnQkFBZ0I7QUFDdEIsZUFBSyxPQUFPLElBQUksTUFBTSxnQ0FBNkIsQ0FBQztBQUFBLFFBQ3hEO0FBQUEsTUFDSjtBQUFBO0FBQUEsTUFHQSxpQkFBaUIsTUFBYyxLQUF1QztBQUNsRSxhQUFLLGlCQUFpQjtBQUN0QixjQUFNLGlCQUFpQixNQUFNLEdBQUc7QUFBQSxNQUNwQztBQUFBO0FBQUEsTUFHQSxhQUFhLE1BQWMsS0FBdUM7QUFDOUQsY0FBTSxRQUFRLEtBQUssU0FBUyxJQUFJO0FB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TUFDTixTQUFTO0FBQUEsTUFDVCxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixTQUFTO0FBQUEsTUFDVCxNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsTUFDTixNQUFNO0FBQUEsSUFDUjtBQUVBLElBQU0sd0JBQXdCO0FBQUEsTUFDNUIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ2pCLFNBQVMsQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNwQixNQUFNLENBQUMsTUFBTSxJQUFJO0FBQUEsTUFDakIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ2pCLE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNqQixVQUFVLENBQUMsT0FBTyxLQUFLO0FBQUEsTUFDdkIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ2pCLE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNqQixNQUFNLENBQUMsTUFBTSxJQUFJO0FBQUEsTUFDakIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ2pCLE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNqQixNQUFNLENBQUMsTUFBTSxJQUFJO0FBQUEsTUFDakIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ2pCLE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNqQixNQUFNLENBQUMsTUFBTSxJQUFJO0FBQUEsTUFDakIsU0FBUyxDQUFDLE1BQU0sSUFBSTtBQUFBLE1BQ3BCLE1BQU0sQ0FBQyxNQUFNLElBQUk7QUFBQSxNQUNqQixNQUFNLENBQUMsTUFBTSxJQUFJO0FBQUEsTUFDakIsTUFBTSxDQUFDLE1BQU0sSUFBSTtBQUFBLElBQ25CO0FBRUEsSUFBTSxlQUFlLGlCQUFpQixRQUFRLFFBQVEsWUFBWSxFQUFFLEVBQUUsTUFBTSxFQUFFO0FBQUE7QUFBQTs7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Q0FBQztBQUFBLE1BQzFDLEtBQUs7QUFDSCxlQUFPLFFBQVEsUUFBUTtBQUFBLE1BQ3pCLEtBQUs7QUFDSCxlQUFPLFFBQVEsR0FBRztBQUFBLE1BQ3BCLEtBQUs7QUFDSCxlQUFPLE1BQU0sSUFBSSxPQUFPLFNBQVMsS0FBSyxHQUFHLENBQUM7QUFBQSxNQUM1QyxLQUFLO0FBQ0gsZUFBTyxNQUFNLElBQUksT0FBTyxRQUFRLEtBQUssR0FBRyxDQUFDO0FBQUEsTUFFM0MsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFFcEIsS0FBSztBQUNILGVBQU8sUUFBUSxVQUFVO0FBQUEsTUFDM0IsS0FBSztBQUNILGVBQU8sUUFBUSxLQUFLO0FBQUEsTUFFdEIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFDcEIsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFDcEIsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFDcEIsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFDcEIsS0FBSztBQUNILGVBQU8sUUFBUSxRQUFRO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFDcEIsS0FBSztBQUNILGVBQU8sUUFBUSxVQUFVO0FBQUEsTUFDM0IsS0FBSztBQUNILGVBQU8sUUFBUSxLQUFLO0FBQUEsTUFDdEIsS0FBSztBQUNILGVBQU8sT0FBTyxTQUFTO0FBQUEsTUFDekIsS0FBSztBQUNILGVBQU8sT0FBTyxRQUFRO0FBQUEsTUFDeEIsS0FBSztBQUNILGVBQU8sUUFBUSxHQUFHO0FBQUEsTUFFcEIsS0FBSztB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QUFHakMsU0FBSyxtQkFBbUI7QUFBQSxFQUUxQjtBQUFBLEVBRUEsUUFBUTtBQUNOLFFBQ0UsQ0FBQyxLQUFLLE9BQ04sQ0FBQyxLQUFLLElBQUksUUFBUSxlQUFlLElBQUksb0JBQW9CLEdBQ3pEO0FBQ0EsY0FBUSxNQUFNLDRDQUF5QztBQUN2RDtBQUFBLElBQ0Y7QUFLQSxRQUFJLFFBQVEsS0FBSyxJQUFJLFFBQVEsUUFBUSxvQkFBb0IsRUFBRTtBQUMzRCxZQUFRLE1BQU0sb0JBQW9CLG1CQUFtQjtBQUNyRCxRQUFJLEtBQUssQ0FBQztBQUVWLE9BQUcsT0FBTyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxNQUFNO0FBQzVDLE9BQUcsU0FBUyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxRQUFRO0FBRWhELFFBQUksQ0FBQyxHQUFHLFFBQVE7QUFDZCxjQUFRO0FBQUEsUUFDTjtBQUFBLE1BQ0Y7QUFDQTtBQUFBLElBQ0Y7QUFDQSxZQUFRLElBQUksc0RBQXNEO0FBQ2xFLFdBQU87QUFBQSxFQUNUO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm1lbnVPdHJvIiwgInRpcG8iLCAidHlwZSIsICJzIiwgInNpbmdsZXRvbiIsICJvZmZzZXQiLCAicyIsICJkZWZhdWx0Wm9uZSIsICJvZmZzZXQiLCAibiIsICJuIiwgIm9mZnNldCIsICJzIiwgIm4iLCAiZm9ybWF0T2Zmc2V0IiwgInMiLCAibWF0Y2giLCAib2Zmc2V0IiwgImwiLCAibiIsICJzIiwgIklOVkFMSUQiLCAicyIsICJlIiwgInMiLCAidHlwZSIsICJjbG9uZSIsICJvZmZzZXQiLCAib3JkZXJlZFVuaXRzIiwgIklOVkFMSUQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJhbGlhcyIsICJmb2xkZXIiLCAic2FtZU5hbWUiLCAibmFtZUZpbGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJvZmZzZXQiLCAibWF0Y2giLCAiaW1wb3J0X29ic2lkaWFuIiwgImluaXRfU2VzaW9uTGVjdHVyYSIsICJfYSIsICJfYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2VzaW9uTGVjdHVyYSIsICJyZWdpc3RybyIsICJpbXBvcnRfb2JzaWRpYW4iLCAicXVpdGFyRG9ibGVDb3JjaGV0ZSIsICJub3JtYWxpemFyQXJyYXkiLCAicmVnaXN0cm8iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm9mZnNldCIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAicmVnaXN0ZXJSaWJib25NZW51IiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJuaXZlbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAibml2ZWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImNsYXNpZmljYWNpb24iLCAidGFnQ2xhc2lmaWNhY2lvbiIsICJudWV2YUNsYXNpZmljYWNpb24iLCAiZnJvbnRtYXR0ZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInllYXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJhY3RpdmVSZXNvdXJjZXMiLCAiZHYiLCAiX2EiLCAiZHYiLCAiX2EiLCAiY29pbmNpZGVQb3JQYXRoIiwgImNvaW5jaWRlUG9yTm9tYnJlIiwgImNvaW5jaWRlUG9yVGl0dWxvIiwgImR2IiwgIm1hdGNoIiwgImFob3JhIiwgInRhcmVhcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIllBTUxVcGRhdGVyQVBJIiwgIm9mZnNldCIsICJjbGFzaWZpY2FjaW9uIiwgInRhZ0NsYXNpZmljYWNpb24iLCAibnVldmFDbGFzaWZpY2FjaW9uIiwgImZyb250bWF0dGVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJkdiIsICJtYXRjaCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInRpdHVsbyIsICJkdiIsICJtYXRjaCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAibWF0Y2giLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZHYiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAibm93IiwgImltcG9ydF9vYnNpZGlhbiIsICJkdiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiWUFNTFVwZGF0ZXJBUEkiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJ0YXJlYXMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWdpc3RlckNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicmVnaXN0ZXJDb21tYW5kcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibm93IiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJkdiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJUYXNrTGlzdFR5cGUiLCAiVGFzayIsICJ0eXBlIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJtYXRjaCIsICJUYXNrIiwgInR5cGUiLCAibWF0Y2giLCAidHlwZSIsICJjb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIk5hdmlnYXRpb25VdGlscyIsICJOYXZpZ2F0aW9uVXRpbHMiLCAiY29udGVudCIsICJ0eXBlIiwgImltcG9ydF9vYnNpZGlhbiIsICJUYXNrIiwgIk5hdmlnYXRpb25VdGlscyIsICJZQU1MVXBkYXRlckFQSSJdCn0K
