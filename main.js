/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian21 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const pagosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Pagos"' });
        pagosTitle.setAttribute("data-title", 'Subsistema de "Pagos"');
        pagosTitle.style.cursor = "pointer";
        const pagosContent = tabContent.createDiv();
        pagosContent.style.display = "none";
        pagosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(pagosContent).setName("Carpeta de Modulos del Sistema de Pagos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de pagos.").addText((text) => text.setValue(this.plugin.settings.folder_Pagos).onChange(async (value) => {
          this.plugin.settings.folder_Pagos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(pagosContent).setName("\xCDndice de Pagos").setDesc("Establece la ruta del \xEDndice de Pagos.").addText((text) => text.setValue(this.plugin.settings.indice_Pagos).onChange(async (value) => {
          this.plugin.settings.indice_Pagos = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/plantillas/Anotaciones/Plt - Anotaciones.ts
var plantilla = `<%*
debugger
const dv = this.DataviewAPI;
const {update} = this.app.plugins.plugins["metaedit"].api
const fileCampos =dv.page("Estructura/Campos Sistema Gestion/Campos Sistema Central")
let clasificacionAX = fileCampos.tituloClasificacionAX
let tagsClasificacionAX = fileCampos.tagsClasificacionAX
let activo = app.workspace.getActiveFile();
let idAux = dv.pages('"Anotaciones/Notas"').file.frontmatter.sort(b=> b.id , 'desc').id;

// Comprueba si idAux tiene al menos un elemento y asigna a 'id' el siguiente valor en la secuencia o 1 si no hay elementos.
let id = idAux.length > 0 ? (idAux[0] + 1) : 1;

let newName, titulo, existe, asunto, nombre
	titulo = await tp.system.prompt("\xBFSobre que es esta anotaci\xF3n?", "A-"+ id, true)
	// Verificar si el usuario presion\xF3 Esc.
    if (titulo === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	if (activo != null){ 
		nombre = activo.basename;
		const nota = app.metadataCache.getFileCache(activo); 
		asunto = await tp.system.suggester(["Si","No"],[true, false], true, nombre + " es origen de " + titulo + "?")
		}
	newName = "Anotaciones/Notas/A - " + id  
await tp.file.move(newName);
let clasificacion, descripcion, estado
let tagClasificacion = await tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?")
	// Verificar si el usuario presion\xF3 Esc.
    if (tagClasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
let nuevaClasificacion = false
if(tagClasificacion=="Nuevo"){
	clasificacion = await tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true)
	// Verificar si el usuario presion\xF3 Esc.
    if (clasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	tagClasificacion = await tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true)
	// Verificar si el usuario presion\xF3 Esc.
    if (tagClasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	nuevaClasificacion = true
// --> Validar que el nombre del grupo no sea igual al nombre de ninguna area de Vida.
}else if(tagClasificacion=="Ninguna"){
	tagClasificacion = ""
	clasificacion = ""	
}else {
	let indice = tagsClasificacionAX.indexOf(tagClasificacion)
	clasificacion = clasificacionAX[indice]
}
if (nuevaClasificacion) {
    let nuevoC = clasificacionAX.pop(); // \xDAltima clasificaci\xF3n
    let ningunoC = clasificacionAX.pop(); // Pen\xFAltima clasificaci\xF3n

    clasificacionAX.push(clasificacion);
    clasificacionAX.push(ningunoC);
    clasificacionAX.push(nuevoC);

    await update("tituloClasificacionAX", clasificacionAX, fileCampos.file.path);
	await new Promise(resolve => setTimeout(resolve, 1000));

    let nuevoTagC = tagsClasificacionAX.pop(); // \xDAltimo tag
    let ningunoTagC = tagsClasificacionAX.pop(); // Pen\xFAltimo tag

    tagsClasificacionAX.push(tagClasificacion);
    tagsClasificacionAX.push(ningunoTagC);
    tagsClasificacionAX.push(nuevoTagC);

    await update("tagsClasificacionAX", tagsClasificacionAX, fileCampos.file.path);
}


if (tagClasificacion != ""){
tagClasificacion = "cl/" + tagClasificacion 
}
if (clasificacion == "Feedback Semanal"){
	descripcion = []
	let aux = 0
	let otra
	do{
		descripcion[aux] = await tp.system.prompt("Escribe tu feedback de "+ titulo, "P" + aux, false, true)
		aux += 1
		otra = await tp.system.suggester(["Si","No"],[true,false], true, "\xBFAgregar otro parrafo?" )
	}while(otra)
}else{
	descripcion = await tp.system.prompt("\xBFQuieres agregar una descripci\xF3n?", " " + titulo, false, true )
	// Verificar si el usuario presion\xF3 Esc.
    if (descripcion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
}
estado = await tp.system.suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado","\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"],["\u{1F535}", "\u{1F7E2}","\u{1F7E1}", "\u{1F534}"], false, "Cual es el estado de esta anotaci\xF3n?")
// Verificar si el usuario presion\xF3 Esc.
    if (estado === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
-%>
---
tipo: Anotaci\xF3n
idq: 6
id: <% id %> 
idManual:
aliases: 
- <%titulo%>
descripcion: <%*if (clasificacion != "Feedback Semanal"){%> <%descripcion%><%* }else{%>>-  <%* for (let a=0; a<descripcion.length;a++){%>
   <%descripcion[a]%> 
<%*}}%>
tema: <%clasificacion%> 
estado: <% estado %> 
fecha: <% tp.date.now("YYYY-MM-DD dddd HH:mm") %>
hora: <% tp.date.now("HHmm", 0,)%>
valor:  
tags: <%tagClasificacion%> 
asunto: <%* if(asunto){ %> 
- "[[<%nombre%>]]" <%*}%>
related:
---
# \`VIEW[{aliases}]\` 
>[!info]- Descripcion
>\`VIEW[{descripcion}]\`
> 

Plantilla oculta
<%* if(clasificacion=="Meditaciones de alteraci\xF3n de futuro"){ -%>
## Objetivo 

## Evento imaginario que seguir\xEDa al cumplimiento del deseo

### Que es lo que siento?

### Detalles para la visualizaci\xF3n.
## Premisas que alimenten el deseo cumplido
_Frases que apoyan mi objetivo_
## Tareas de seguimiento de la meditaci\xF3n
- [ ] Total de meditaciones de <% titulo %> 
	- [ ] Meditaci\xF3n de <% titulo %> #cx/Meditacion \u{1F501} every day when done \u{1F4C5} <% tp.date.now("YYYY-MM-DD") %>
<%*}else if(clasificacion =="Feedback Semanal"){-%>
## Feedback
\`\`\`dataviewjs
dv.paragraph(dv.current().descripcion)
\`\`\`
<%*}else if(clasificacion =="Video Youtube"){-%>
## Video

> [!tip]- Como crear el link del video?
>Estamos utilizando el plugin TimeStamp Notes. Para crear el link aqu\xED, solamente debes pegar el link de youtube, seleccionarlo y utilizar el comando Open Video Player, o el shortcut  \u2325 ^ O
### Timestamps
> [!important]- Crear los timestamps del video
> Para crear los timestamps del video, en el momento en el que llegues al video, solo debes pulsar el shortcut \u2325 ^ 0, o buscar el comando Insert Timestamp. 
 

## Comentarios Personales

## Hitos del video.

## Resumen IA

<%*}else if(clasificacion =="Grupo de Hojas de Trabajo"){-%>

## [[Comentarios a las plantillas#Temas relacionados a este grupo de hojas de trabajo|Temas relacionados a este grupo de hojas de trabajo:]]
\`\`\`dataviewjs
const {crearAx} = customJS
let hijos = dv.pages().filter(b=> dv.func.contains(b.asunto, dv.current().file.link))
let totalHijos = 
dv.table(["Tema","Tipo","Fecha Modificaci\xF3n", "Pendientes","Hijos"], hijos.map(b=> [b.file.link, b.tema, b.fecha, b.file.tasks.filter(b=> b.status == ' ' || b.status == '/').length, crearAx.paginasHijos(dv,b).length-1]))
\`\`\`


<%*}%>


# Fin
- [/] Finalizado el desarrollo de Anotaci\xF3n <%id%> #cx/Computador/OrganizarNotas  
Estado de la nota:  \`INPUT[estadoNota][:estado]\`
\`\`\`dataviewjs
const {callDV} = customJS
callDV.CambiarTituloDescripcion(dv)
\`\`\`
---
\`\`\`dataviewjs
const {callDV} = customJS
callDV.CarruselAnotaciones(dv)
\`\`\`
\`\`\`dataviewjs
const {callDV} = customJS
callDV.BotonesStandar(dv)
\`\`\`

`;

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");
async function crearPlantilla(contenido) {
  const folder = "Plantillas";
  let filename = "Archivo De Plantilla";
  let pathTemporal = folder + "/" + filename + ".md";
  const archivoCreado = await app.vault.create(pathTemporal, contenido);
  return archivoCreado;
}

// src/modules/moduloBase/commands.ts
var import_obsidian4 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian3 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando2 = plugin.addCommand({
    id: "crear-template",
    name: "Crear un archivo template",
    callback: async () => {
      const archivo = await crearPlantilla(plantilla);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando2.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian4.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian7 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian10 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian13 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian12 = require("obsidian");

// src/modules/modales/seleccionModal.ts
var import_obsidian11 = require("obsidian");
var SeleccionModal = class extends import_obsidian11.FuzzySuggestModal {
  // Flag para determinar si se ha hecho una selección.
  // Constructor de la clase.
  constructor(app2, titles, values, placeholder) {
    super(app2);
    // Objeto para mapear títulos a valores.
    this.seleccionHecha = false;
    this.titles = titles;
    this.values = values;
    this.valueMap = titles.reduce((acc, title, index) => {
      acc[title] = values[index];
      return acc;
    }, {});
    this.setPlaceholder(placeholder);
  }
  // Método para obtener los ítems (títulos) que se mostrarán en el modal.
  getItems() {
    return this.titles;
  }
  // Método para obtener el texto que se mostrará para cada ítem en el modal.
  getItemText(item) {
    return item;
  }
  // Método que se llama al cerrar el modal.
  onClose() {
    if (!this.seleccionHecha) {
      this.reject(new Error("Modal cerrado sin selecci\xF3n"));
    }
  }
  // Método para manejar la selección de un ítem.
  selectSuggestion(item, evt) {
    this.seleccionHecha = true;
    super.selectSuggestion(item, evt);
  }
  // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
  onChooseItem(item, evt) {
    const value = this.valueMap[item];
    this.resolve(value);
  }
  // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
  openAndAwaitSelection() {
    return new Promise((resolve, reject) => {
      this.resolve = resolve;
      this.reject = reject;
      this.open();
    });
  }
};

// src/modules/moduloRegistroTiempo/utils.ts
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian12.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian12.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian12.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian12.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian13.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian15 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian14 = require("obsidian");
var modal_Ahora = class extends import_obsidian14.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian14.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian14.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian14.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian15.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian15.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian15.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_ProyectosGTD: "Subsistemas/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Subsistemas/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Subsistemas/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Subsistemas/GTD/Revision Semanal/Indice Revision Semanal",
  folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Pagos: "Subsistemas/Pagos/Notas",
  indice_Pagos: "Subsistemas/Pagos/Indice Pagos",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_ProyectosQ: "Subsistemas/Proyectos de Q/Proyectos",
  indice_ProyectosQ: "Subsistemas/Proyectos de Q/Indice Proyectos de Q",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RecursosRecurrentes: "Subsistemas/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Subsistemas/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  nameFile_AreasVida: "indexAV",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  nameFile_AreasInteres: "indexAI",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes"
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian19 = require("obsidian");

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian18 = require("obsidian");

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian17 = require("obsidian");
var fuzzySelectOrCreate = class {
  constructor(app2, plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.app = app2;
    this.plugin = plugin;
  }
  createModal() {
    const modal = document.createElement("div");
    modal.setAttribute("id", "fuzzySearchModal");
    modal.style.position = "fixed";
    modal.style.top = "50%";
    modal.style.left = "50%";
    modal.style.transform = "translate(-50%, -50%)";
    modal.style.zIndex = "1000";
    modal.style.padding = "20px";
    modal.style.backgroundColor = "white";
    modal.style.border = "1px solid #ccc";
    modal.style.borderRadius = "5px";
    modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
    modal.style.width = "300px";
    const closeButton = document.createElement("button");
    closeButton.textContent = "\xD7";
    closeButton.style.position = "absolute";
    closeButton.style.top = "5px";
    closeButton.style.right = "5px";
    closeButton.style.border = "none";
    closeButton.style.background = "none";
    closeButton.style.cursor = "pointer";
    closeButton.style.fontSize = "16px";
    closeButton.style.fontWeight = "bold";
    closeButton.style.padding = "0px 4px";
    closeButton.style.borderRadius = "10px";
    closeButton.style.outline = "none";
    closeButton.style.boxShadow = "none";
    closeButton.onclick = () => modal.remove();
    modal.appendChild(closeButton);
    return modal;
  }
  filterItems(query, items) {
    return items.filter(
      (item) => item.value.toLowerCase().includes(query.toLowerCase())
    );
  }
  async updateYAMLFields(tipo, selectedValue, selectedGroup) {
    try {
      debugger;
      const file = app.vault.getAbstractFileByPath(this.pathCampos);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        debugger;
        let currentActs = frontmatter[tipo] || [];
        let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
        frontmatter[tipo] = newValueForActs;
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  async showFuzzySearchModal(items, groups, tipo) {
    return new Promise((resolve, reject) => {
      let selectedValue = "";
      let selectedGroup = "";
      const modal = this.createModal();
      const title = document.createElement("h2");
      title.textContent = "Busca o crea tu actividad";
      title.style.textAlign = "center";
      modal.appendChild(title);
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "Escribe tu actividad...";
      input.style.width = "80%";
      input.style.textAlign = "center";
      modal.style.display = "flex";
      modal.style.flexDirection = "column";
      modal.style.alignItems = "center";
      modal.appendChild(input);
      const spacer = document.createElement("div");
      spacer.style.height = "16px";
      modal.appendChild(spacer);
      const resultsDiv = document.createElement("div");
      modal.appendChild(resultsDiv);
      function updateResultsDisplay(filteredResults, menuOtro2) {
        resultsDiv.innerHTML = "";
        filteredResults.forEach((result) => {
          const div = document.createElement("div");
          div.textContent = result.value;
          div.style.cursor = "pointer";
          div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
          div.onmouseout = () => div.style.backgroundColor = "transparent";
          div.onclick = () => {
            selectedValue = result.activity;
            selectedGroup = result.group;
            modal.remove();
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(div);
        });
        if (filteredResults.length === 0 && input.value.trim() !== "") {
          const createNewDiv = document.createElement("div");
          createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
          createNewDiv.style.cursor = "pointer";
          createNewDiv.style.color = "blue";
          createNewDiv.onclick = () => {
            selectedValue = input.value;
            debugger;
            if (tipo == void 0) {
              tipo = "actsTemas";
            }
            selectGroupForNewActivity(menuOtro2, tipo);
          };
          resultsDiv.appendChild(createNewDiv);
        }
      }
      function selectGroupForNewActivity(menuOtro2, tipo2) {
        resultsDiv.innerHTML = "";
        input.remove();
        spacer.remove();
        title.remove();
        const texto = document.createElement("p");
        texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
        ;
        texto.style.textAlign = "center";
        resultsDiv.appendChild(texto);
        groups.forEach((group) => {
          const groupDiv = document.createElement("div");
          groupDiv.textContent = group;
          groupDiv.style.cursor = "pointer";
          groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
          groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
          groupDiv.onclick = async () => {
            selectedGroup = group;
            modal.remove();
            let recurrente = await menuOtro2.esRecurrente(selectedValue);
            if (recurrente) {
              await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
            }
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(groupDiv);
        });
      }
      function displaySelectedValue(activity, group) {
        resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
      }
      input.oninput = () => {
        const filteredItems = this.filterItems(input.value, items);
        updateResultsDisplay(filteredItems, this);
      };
      document.body.appendChild(modal);
    });
  }
  async esRecurrente(tarea) {
    const opciones = ["Si", "No"];
    const valores = [true, false];
    const placeholder = `${tarea} es tarea recurrente?`;
    const modal = new SeleccionModal(app, opciones, valores, placeholder);
    try {
      return await modal.openAndAwaitSelection();
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      return false;
    }
  }
};

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var menuOtro = class {
  constructor(plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.selectedActivity = "";
    this.selectedGroup = "";
    this.plugin = plugin;
    this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
  }
  async menuOtro(app2, registro) {
    const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
    const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
    const placeholderOtro = "\xBFQue categoria?";
    const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
    let temaOtro;
    let siAsunto = false;
    try {
      const selectionOtro = await modalOtro.openAndAwaitSelection();
      switch (selectionOtro) {
        case "hab":
          temaOtro = await this.habitual(app2);
          break;
        case "actsAV":
        case "actsAI":
        case "actsPQ":
        case "actsPGTD":
        case "actsTI":
        case "actsRR":
          temaOtro = await this.elemSG(app2, selectionOtro);
          siAsunto = true;
          break;
        case "bus":
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      registro.detener = true;
      return error;
    }
    return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.nombre };
  }
  async habitual(app2) {
    const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
    const actsGrupos = await this.resultYaml(app2, "actsTemas");
    let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
    return objEleccion;
  }
  async ninguno(app2) {
  }
  async elemSG(app2, tipo) {
    const actividades = await this.resultYaml(app2, tipo);
    debugger;
    const activeSG = await this.findMainFilesWithState(app2, tipo);
    const groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
    let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
    const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
    let alias = foundElement == null ? void 0 : foundElement.file.path;
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
    return objEleccion;
  }
  async buscar(app2) {
  }
  async resultYaml(app2, tema) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian18.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], actividad: item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFrontmatterField(app2, file, field) {
    try {
      const tFile = app2.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian18.TFile) {
        const cache = app2.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
            console.log("El campo est\xE1 vac\xEDo o no existe.");
            return null;
          } else {
            console.log("Frontmatter consultado con \xE9xito");
            return fieldValue;
          }
        } else {
          console.log("El campo no existe en el frontmatter.");
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  async findMainFilesWithState(app2, tipo) {
    const propertiesTipo = {
      actsAV: {
        folder: this.plugin.settings.folder_AreasVida,
        sameName: true,
        nameFile: this.plugin.settings.nameFile_AreasVida
      },
      actsAI: {
        folder: this.plugin.settings.folder_AreasInteres,
        sameName: true,
        nameFile: this.plugin.settings.nameFile_AreasInteres
      },
      actsPQ: {
        folder: this.plugin.settings.folder_ProyectosQ,
        sameName: false,
        nameFile: ""
      },
      actsPGTD: {
        folder: this.plugin.settings.folder_ProyectosGTD,
        sameName: false,
        nameFile: ""
      },
      actsTI: {
        folder: this.plugin.settings.folder_TemasInteres,
        sameName: false,
        nameFile: ""
      },
      actsRR: {
        folder: this.plugin.settings.folder_RecursosRecurrentes,
        sameName: false,
        nameFile: ""
      }
      // Puedes continuar añadiendo más casos aquí
    };
    if (propertiesTipo.hasOwnProperty(tipo)) {
      const { folder, sameName, nameFile } = propertiesTipo[tipo];
      const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder));
      const filesWithFrontmatter = [];
      for (const file of filesInFolder) {
        if (sameName && file.basename === nameFile || !sameName) {
          const metadata = app2.metadataCache.getFileCache(file);
          if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
            filesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
          }
        }
      }
      return filesWithFrontmatter;
    } else {
      console.log("Selecci\xF3n no reconocida:", tipo);
      return [];
    }
  }
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var utilsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.menuOtro = new menuOtro(plugin);
  }
  async buscarRegistrosActivos(app2, registro) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    for (let file of files) {
      if (file.path.startsWith(registro.folder)) {
        const metadata = app2.metadataCache.getFileCache(file);
        if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
          return file;
        }
      }
    }
    return;
  }
  // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
  async crearObjetoRegistro(plugin) {
    const activo = plugin.app.workspace.getActiveFile();
    if (!activo) {
      console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
      return null;
    }
    const folder = plugin.settings.folder_RegistroTiempo;
    const indice = plugin.settings.indice_RegistroTiempo;
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    const nextId = maxId + 1;
    const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
    return {
      activo,
      nombre: activo.basename,
      folder,
      indice,
      id: nextId,
      fecha: fechaCompleta,
      indice_DVJS: `"${indice}"`
    };
  }
  formatearFecha(fecha) {
    const offset = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async verificarTareasActivas(registro, app2) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    const tareasActivas = [];
    for (let file of files) {
      if (file.path.startsWith(registro.folder)) {
        const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
          tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
        }
      }
    }
    if (tareasActivas.length === 1) {
      const tareaActiva = tareasActivas[0];
      const deseaDetener = await this.mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
      debugger;
      if (deseaDetener === void 0) {
        new import_obsidian19.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
        registro.detener = true;
        return;
      }
      if (deseaDetener) {
        await this.detenerTarea(tareaActiva, app2);
        registro.detener = false;
      } else {
        new import_obsidian19.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
        registro.detener = true;
        return;
      }
    } else if (tareasActivas.length > 1) {
      new import_obsidian19.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
      registro.detener = true;
    } else {
      console.log("No hay m\xE1s tareas corriendo.");
      registro.detener = false;
    }
  }
  mostrarSugerencia(mensaje) {
    return new Promise((resolve, reject) => {
      let seleccionado = false;
      const modal = new import_obsidian19.Modal(app);
      modal.contentEl.createEl("h1", { text: mensaje });
      const buttonsContainer = modal.contentEl.createEl("div");
      const hacerSeleccion = (seleccion) => {
        seleccionado = true;
        modal.close();
        resolve(seleccion);
      };
      const yesButton = buttonsContainer.createEl("button", {
        text: "S\xED"
      });
      yesButton.addEventListener("click", () => hacerSeleccion(true));
      const noButton = buttonsContainer.createEl("button", {
        text: "No"
      });
      noButton.addEventListener("click", () => hacerSeleccion(false));
      modal.onClose = () => {
        if (!seleccionado) {
          reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      };
      modal.contentEl.addEventListener("keydown", (e) => {
        var _a;
        switch (e.key) {
          case "ArrowLeft":
            yesButton.focus();
            break;
          case "ArrowRight":
            noButton.focus();
            break;
          case "Enter":
            (_a = document.activeElement) == null ? void 0 : _a.click();
            break;
        }
      });
      yesButton.focus();
      modal.open();
    });
  }
  async definirTipoRegistro(registro, app2) {
    const totTareas = await this.encontrarTareasPendientes(app2);
    let opcionesTitulo, valoresOpcion;
    if (totTareas.length > 0) {
      opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
      valoresOpcion = ["Nota", "Tarea", "Otro"];
    } else {
      opcionesTitulo = [registro.nombre, "Otro"];
      valoresOpcion = ["Nota", "Otro"];
    }
    const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
    const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
    try {
      const selection = await modalMenu1.openAndAwaitSelection();
      registro.tipoRegistro = selection;
      switch (registro.tipoRegistro) {
        case "Nota":
          registro.titulo = registro.nombre;
          registro.siAsunto = true;
          break;
        case "Tarea":
          await this.elegirTareaParaRegistro(app2, registro, totTareas);
          break;
        default:
          let respuesta = await this.menuOtro.menuOtro(app2, registro);
          debugger;
          Object.assign(registro, respuesta);
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    }
  }
  async encontrarTareasPendientes(app2) {
    let tareasPendientes = [];
    const archivos = app2.vault.getMarkdownFiles();
    const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
    for (const archivo of archivosRelevantes) {
      const contenido = await app2.vault.read(archivo);
      const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
      const tareasConArchivo = coincidencias.map((tarea) => {
        return { tarea: tarea.trim(), archivo };
      });
      tareasPendientes = tareasPendientes.concat(tareasConArchivo);
    }
    return tareasPendientes;
  }
  async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
    const placeholder = "Elige la tarea que vas a registrar.";
    let promesasLimpias = tareasPendientes.map((tareaObj) => this.limpiarTextoTarea(tareaObj.tarea));
    try {
      const tareasLimpias = await Promise.all(promesasLimpias);
      const tareasLimpiasConArchivo = tareasPendientes.map((tareaObj, index) => {
        return {
          tarea: tareasLimpias[index],
          // Tarea limpia
          archivo: tareaObj.archivo
          // Referencia al archivo original
        };
      });
      const longitud = tareasLimpiasConArchivo.length;
      const arregloDeIndices = Array.from({ length: longitud }, (_, indice) => indice);
      const modalMenu = new SeleccionModal(app2, tareasLimpiasConArchivo.map((b) => b.tarea), arregloDeIndices, placeholder);
      try {
        const selectedIndex = await modalMenu.openAndAwaitSelection();
        const seleccion = tareasLimpiasConArchivo[selectedIndex];
        registro.titulo = seleccion.tarea;
        registro.nombre = seleccion.archivo.basename;
        registro.siAsunto = true;
      } catch (error) {
        registro.detener = true;
        console.error("Error o modal cerrado sin selecci\xF3n:", error);
      }
    } catch (error) {
      console.error("Hubo un error al limpiar las tareas:", error);
    }
  }
  limpiarTextoTarea(titulo) {
    return new Promise((resolve) => {
      let textoLimpio = titulo.split("\n")[0];
      textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
      textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
      textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
      const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
      textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
      textoLimpio = textoLimpio.replace(/\s+/g, " ");
      resolve(textoLimpio.trim());
    });
  }
  async construirNombreyAlias(registro, app2) {
    let nombreBase = `${registro.folder}/RT - ${registro.id}`;
    let aliasLimpio = this.limpiarAlias(registro.titulo);
    aliasLimpio = aliasLimpio.length > 195 ? aliasLimpio.slice(0, 195) : aliasLimpio;
    const archivos = app2.vault.getFiles();
    let registrosConMismoTitulo = [];
    for (const archivo of archivos) {
      if (archivo.path.startsWith(registro.folder)) {
        const metadatos = app2.metadataCache.getFileCache(archivo);
        if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === registro.titulo) {
          const idSec = metadatos.frontmatter.idSec;
          if (idSec !== void 0) {
            registrosConMismoTitulo.push({ archivo, idSec });
          }
        }
      }
    }
    debugger;
    registrosConMismoTitulo.sort((b) => b.idSec, "desc");
    registro.idSec = registrosConMismoTitulo.length > 0 ? parseInt(registrosConMismoTitulo[0].idSec) + 1 : 1;
    if (registro.idSec > 1) {
      aliasLimpio += ` - ${registro.idSec}`;
    }
    registro.aliases = [];
    registro.aliases.push(`RT - ${aliasLimpio}`);
    if (registro.tipoRegistro === "Nota") {
      const archivoActivo = app2.workspace.getActiveFile();
      if (!archivoActivo)
        return;
      const metadatosActivo = app2.metadataCache.getFileCache(archivoActivo);
      const aliasesActivo = metadatosActivo && metadatosActivo.frontmatter ? metadatosActivo.frontmatter.aliases : void 0;
      if (aliasesActivo) {
        const additionalAliases = Array.isArray(aliasesActivo) ? aliasesActivo : [aliasesActivo];
        additionalAliases.forEach((alias) => {
          registro.aliases.push(`RT - ${alias}`);
        });
      }
    }
    registro.nameFile = nombreBase;
  }
  limpiarAlias(titulo) {
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
    tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
    return tituloLimpio.trim();
  }
  async detenerTarea(tareaActiva, app2) {
    console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
    const fileContents = await app2.vault.read(tareaActiva.file);
    const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
    await app2.vault.modify(tareaActiva.file, newContents);
  }
};

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var registroTiempoAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
  }
  async iniciarRegistro() {
    try {
      debugger;
      const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
      await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
      return registro;
    } catch (error) {
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
  }
  miMetodo() {
    return "Resultado de mi Metodo";
  }
  otroMetodo(param) {
    return `Resultado de otroMetodo con ${param}`;
  }
};

// src/modules/noteLifecycleManager/API/starterAPI.ts
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async crearNota(infoSubsistema, campos) {
    let nota = {};
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
    }
    debugger;
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  // Ejemplo de función getCampo simulada. Debes definir funciones similares para 'id', 'fecha', etc.
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    const nextId = maxId + 1;
    this.nota.id = nextId;
    return nextId;
  }
  async getFecha() {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getSecId() {
  }
  async getTitulo() {
    let prompt = this.tp.system.static_functions.get("prompt");
    let titulo = await prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion() {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
    if (descripcion === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto() {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      let suggester = this.tp.system.static_functions.get("suggester");
      siAsunto = await suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion() {
    var _a;
    let clasificacion, tagClasificacion, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      let suggester = this.tp.system.static_functions.get("suggester");
      tagClasificacion = await suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion === null) {
        new Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion == "Nuevo") {
        let prompt = this.tp.system.static_functions.get("prompt");
        clasificacion = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion === null) {
          new Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion === null) {
          new Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion = true;
      } else if (tagClasificacion == "Ninguna") {
        tagClasificacion = "";
        clasificacion = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion);
        clasificacion = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion != "") {
      tagClasificacion = "cl/" + tagClasificacion;
    }
    this.nota.clasificacionAX = clasificacion;
    this.nota.tagClasificacionAX = tagClasificacion;
    return { clase: clasificacion, tag: tagClasificacion };
  }
  // ->
  async getEstado() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
    if (campo === null) {
      new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename() {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var import_obsidian20 = require("obsidian");
var YAMLUpdaterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoNota = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async actualizarNota(infoNota, campos) {
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian20.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async updateYAMLFields(nota, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in nota) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = nota[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  async getFecha() {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getHoraFinal() {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  async getTiempoTrabajado() {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    let ahora = /* @__PURE__ */ new Date();
    let diferenciaEnMilisegundos = ahora - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getSecId() {
  }
  async getTitulo() {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new import_obsidian20.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion() {
    let descripcion = await this.tp.system.prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
    if (descripcion === null) {
      new import_obsidian20.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto() {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion() {
    var _a;
    let clasificacion, tagClasificacion, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion === null) {
        new import_obsidian20.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion == "Nuevo") {
        clasificacion = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion === null) {
          new import_obsidian20.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion === null) {
          new import_obsidian20.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion = true;
      } else if (tagClasificacion == "Ninguna") {
        tagClasificacion = "";
        clasificacion = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion);
        clasificacion = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion != "") {
      tagClasificacion = "cl/" + tagClasificacion;
    }
    this.nota.clasificacionAX = clasificacion;
    this.nota.tagClasificacionAX = tagClasificacion;
    return { clase: clasificacion, tag: tagClasificacion };
  }
  // ->
  async getEstado() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
    if (campo === null) {
      new import_obsidian20.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename() {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian21.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.ribbonButtonRT = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    await this.loadSettings();
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.YAMLUpdaterAPI = new YAMLUpdaterAPI(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzVGFiLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhckNhcnBldGEudHMiLCAic3JjL3BsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhclBsYW50aWxsYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL2NvbW1hbmRzLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZS50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvYWN0aXZhZG9yZXMudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3VpL3JpYmJvbkJ1dHRvbi50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvdWkvbW9kYWwudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQWxpYXNTdGF0dXNCYXIvc3RhdHVzQmFyLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3JpYmJvbk1lbnUudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdXRpbHMudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25Nb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvbW9kYWxfQWhvcmEudHMiLCAic3JjL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEkudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL21lbnVPdHJvLnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIgIGltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbiAgaW1wb3J0IHsgUGx1Z2luTWFpblNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5nc1RhYic7XG4gIGltcG9ydCB7IE1vZHVsb0Jhc2UgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXhcIjtcbiAgaW1wb3J0IHthY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGF9IGZyb20gXCIuL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL2FjdGl2YWRvcmVzXCJcbiAgaW1wb3J0IHsgU3RhdHVzQmFyRXh0ZW5zaW9uIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9BbGlhc1N0YXR1c0Jhci9zdGF0dXNCYXJcIjtcbiAgaW1wb3J0IHsgTW9kdWxvUmVnaXN0cm9UaWVtcG8gfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4XCI7XG4gIGltcG9ydCB7IFBsdWdpbk1haW5TZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3MnO1xuICBpbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MnO1xuICBpbXBvcnQge3JlZ2lzdHJvVGllbXBvQVBJfSBmcm9tICcuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJJ1xuICBpbXBvcnQgeyBzdGFydGVyQVBJfSBmcm9tICcuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUEknO1xuICBpbXBvcnQgeyBZQU1MVXBkYXRlckFQSSB9IGZyb20gJy4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUEknO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFuYWdlbWVudFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBQbHVnaW5NYWluU2V0dGluZ3M7XG4gIC8vIERlY2xhcmEgdW5hIHByb3BpZWRhZCBgc2V0dGluZ3NgIHBhcmEgYWxtYWNlbmFyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLlxuICBzdGF0dXNCYXJFeHRlbnNpb246IFN0YXR1c0JhckV4dGVuc2lvbiB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogTW9kdWxvUmVnaXN0cm9UaWVtcG8gfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc1JUOiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc01COiBzdHJpbmdbXSA9IFtdO1xuICByaWJib25CdXR0b25SVDogUmV0dXJuVHlwZTxQbHVnaW5bJ2FkZFJpYmJvbkljb24nXT4gfCBudWxsID0gbnVsbDtcbiAgLy8gRGVjbGFyYSB1bmEgcHJvcGllZGFkIHBhcmEgbWFudGVuZXIgdW5hIGluc3RhbmNpYSBkZSBgU3RhdHVzQmFyRXh0ZW5zaW9uYC5cbiAgXG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICAvLyBjYXJnYXIgQVBJIHJlZ2lzdHJvIFRpZW1wb1xuICAgICAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXJ0ZXJBUEkgPSBuZXcgc3RhcnRlckFQSSh0aGlzKTtcbiAgICAgICAgdGhpcy5ZQU1MVXBkYXRlckFQSSA9IG5ldyBZQU1MVXBkYXRlckFQSSh0aGlzKTtcbiAgICAgICAgLy8gQVx1MDBGMWFkZSBsYSBwZXN0YVx1MDBGMWEgZGUgY29uZmlndXJhY2lcdTAwRjNuIC0gXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGx1Z2luTWFpblNldHRpbmdzVGFiKHRoaXMpKTtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBsYXMgaW5zdGFuY2lhcyBkZSBsb3MgbVx1MDBGM2R1bG9zXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uID0gbmV3IFN0YXR1c0JhckV4dGVuc2lvbih0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IG5ldyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9CYXNlID0gbmV3IE1vZHVsb0Jhc2UodGhpcyk7XG4gICAgICAgIHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIC8vIEFwbGljYSBsYSBjb25maWd1cmFjaVx1MDBGM24gaW5pY2lhbCBiYXNhZGEgZW4gbG9zIGFqdXN0ZXMgY2FyZ2Fkb3MgbyBwcmVkZXRlcm1pbmFkb3MuXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbmljaWFuZG8gY2FyZ2EgZGUgcGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbCcpO1xuICAgICAgXG4gICAgICB9XG5cbiAgICAgIGFwcGx5Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgLy8gTW9kdWxvIEJhc2UgZXMgZWwgbVx1MDBGM2R1bG8gc29icmUgZWwgcXVlIGVzdG95IGhhY2llbmRvIHBydWViYXMgZGUgZGVzYXJyb2xsby5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQmFzZSkge1xuICAgICAgICAgIHRoaXMubW9kdWxvQmFzZT8uYWN0aXZhdGUodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kdWxvQmFzZT8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvUmVnaXN0cm9UaWVtcG8pIHtcbiAgICAgICAgICAgIHRoaXMubW9kdWxvUmVnaXN0cm9UaWVtcG8/LmFjdGl2YXRlKHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbz8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIpIHtcbiAgICAgICAgICB0aGlzLnN0YXR1c0JhckV4dGVuc2lvbj8uYWN0aXZhdGUoKTtcbiAgICAgICAgICAvLyBTaSBsYSBjb25maWd1cmFjaVx1MDBGM24gcGFyYSBgbW9kdWxvQWxpYXNTdGF0dXNCYXJgIGVzIHZlcmRhZGVyYSwgYWN0aXZhIGVsIG1cdTAwRjNkdWxvLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uPy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgLy8gU2kgZXMgZmFsc2EsIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsby5cbiAgICAgICAgfVxuXG4gICAgfVxuICAgIFxuICAgICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgICAgLy8gQ1x1MDBGM2RpZ28gZGUgbGltcGllemEgYXF1XHUwMEVEXG4gICAgICAgICAgY29uc29sZS5sb2coJ0Rlc2NhcmdhbmRvIHBsdWdpbiBHZXN0aVx1MDBGM24gUGVyc29uYWwnKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG5cbiAgICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIGRlc2RlIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICAgICAgLy8gSW50ZW50YSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHkgbWV6Y2xhIGxvcyB2YWxvcmVzIGNhcmdhZG9zIGNvbiBsb3MgcHJlZGV0ZXJtaW5hZG9zLlxuICAgICAgfVxuXG4gICAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZ3VhcmRhciBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsIGVuIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAvLyBHdWFyZGEgbGEgY29uZmlndXJhY2lcdTAwRjNuIGFjdHVhbC5cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIC8vIFZ1ZWx2ZSBhIGFwbGljYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYXNlZ3VyYXJzZSBkZSBxdWUgbG9zIGNhbWJpb3MgcmVjaWVudGVzIHNlIHJlZmxlamVuIGlubWVkaWF0YW1lbnRlLlxuICAgICAgfVxuICB9XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgUGx1Z2luTWFpblNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb25maWd1cmFjaVx1MDBGM24gZGVsIHBsdWdpbiBkZSBHZXN0aVx1MDBGM24gUGVyc29uYWwnIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3JlcyBwYXJhIGxhcyBwZXN0YVx1MDBGMWFzIHkgZWwgY29udGVuaWRvIGRlIGxhcyBwZXN0YVx1MDBGMWFzXG4gICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RhYi1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCB0YWJDb250ZW50Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndGFiLWNvbnRlbnQtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyBEZWZpbmUgbG9zIHRcdTAwRUR0dWxvcyBkZSBsYXMgcGVzdGFcdTAwRjFhc1xuICAgICAgICBjb25zdCB0YWJUaXRsZXMgPSBbJ0FjdGl2YXIgTVx1MDBGM2R1bG9zJywgJ0RpcmVjdG9yaW9zIFN1YnNpc3RlbWFzJywgJ1Blc3RhXHUwMEYxYSAzJ107XG5cbiAgICAgICAgLy8gQ3JlYXIgcGVzdGFcdTAwRjFhcyB5IGNvbnRlbmlkbyBlc3BlY1x1MDBFRGZpY29cbiAgICAgICAgdGFiVGl0bGVzLmZvckVhY2goKHRpdGxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gQ3JlYXIgYm90b25lcyBkZSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgICAgICB0YWJCdXR0b24uY2xhc3NMaXN0LmFkZCgndGFiLWxpbmsnKTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5kYXRhc2V0LnRhYiA9IGB0YWIke2luZGV4fWA7XG4gICAgICAgICAgICB0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMub3BlblRhYihgdGFiJHtpbmRleH1gKTtcbiAgICAgICAgICAgIHRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJCdXR0b24pO1xuXG4gICAgICAgICAgICAvLyBDcmVhciBjb250ZW5pZG8gZGUgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCB0YWJDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YWJDb250ZW50LmlkID0gYHRhYiR7aW5kZXh9YDtcbiAgICAgICAgICAgIHRhYkNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndGFiLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRhYkNvbnRlbnRDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQ29udGVudCk7XG5cbiAgICAgICAgICAgIC8vIEluaWNpYWxtZW50ZSBvY3VsdGFyIGVsIGNvbnRlbmlkbyBkZSBsYSBwZXN0YVx1MDBGMWEsIGV4Y2VwdG8gZWwgcHJpbWVyb1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgdGFiQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnVmVyIEFsaWFzIGVuIGVsIFN0YXR1cyBCYXInKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFbGlnZSBzaSBkZXNlYXMgdmVyIGVsIEFsaWFzZXMgZGUgbGFzIG5vdGFzIGVuIGVsIFN0YXR1cyBCYXIuJylcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0FsaWFzU3RhdHVzQmFyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBNXHUwMEYzZHVsbyBSZWdpc3RybyBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdBY3RpdmFyIE1cdTAwRjNkdWxvIEJhc2UgLSBQcnVlYmFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0FjdGl2YSBvIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsbyBkZSBwcnVlYmFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0Jhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQmFzZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSBzZWd1bmRhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgbWFuZWphciBlbCBjbGljIGVuIGVsIHRcdTAwRUR0dWxvIGRlbCBibG9xdWUgZGVzcGxlZ2FibGVcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVDb2xsYXBzZSA9IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RWxlbWVudCA9IGV2ZW50LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICcmIzk2NjA7ICcgKyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7IC8vIENhbWJpYSBlbCBpY29ubyBhIFwiYWJham9cIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAnJiM5NjU0OyAnICsgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpOyAvLyBDYW1iaWEgZWwgaWNvbm8gYSBcImRlcmVjaGFcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJBbm90YWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkFub3RhY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBbm90YWNpb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYW5vdGFjaW9uZXNDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQW5vdGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiB0b2RhcyBsYXMgQW5vdGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Fub3RhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Bbm90YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYW5vdGFjaW9uZXNDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0luZGljZSBkZSBBbm90YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbGFzIEFub3RhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Bbm90YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQW5vdGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiJyB9KTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCInKTtcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2dDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBibG9nQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgYmxvZ1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJsb2dDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQXJ0XHUwMEVEY3Vsb3MgZGVsIEJsb2cnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgYXJ0XHUwMEVEY3Vsb3MgZGVsIGJsb2cuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FCbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BQmxvZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYmxvZ0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnSW5kaWNlIGRlIEFydFx1MDBFRGN1bG9zIGRlbCBCbG9nJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgYXJ0XHUwMEVEY3Vsb3MgZGVsIGJsb2cuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0FCbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9BQmxvZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zXCInIH0pO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiJyk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlndXJhY2lcdTAwRjNuIHBhcmEgQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Rlc2Fycm9sbG9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmFjaVx1MDBGM24gcGFyYSBcdTAwQ0RuZGljZSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Rlc2Fycm9sbG9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkVzdHVkaW9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IGVzdHVkaW9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkVzdHVkaW9cIicgfSk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiRXN0dWRpb1wiJyk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBlc3R1ZGlvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXN0dWRpb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFRlbWFzIGRlIEVzdHVkaW8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgdGVtYXMgZGUgZXN0dWRpby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRXN0dWRpbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXN0dWRpb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBFc3R1ZGlvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgdGVtYXMgZGUgZXN0dWRpby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJHVERcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGd0ZFRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiR1REXCInIH0pO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiR1REXCInKTtcbiAgICAgICAgICAgICAgICBndGRUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3RkQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZ3RkQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIFByb3llY3RvcyBHVERcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhndGRDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBQcm95ZWN0b3MgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBwcm95ZWN0b3MgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NHVEQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIFJldmlzaVx1MDBGM24gU2VtYW5hbFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGd0ZENvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHJldmlzaW9uZXMgc2VtYW5hbGVzIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUlNHVEQpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JTR1REID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhndGRDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmV2aXNpb25lcyBTZW1hbmFsZXMgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIGxhcyByZXZpc2lvbmVzIHNlbWFuYWxlcyBHVEQuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JTR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJMZWN0dXJhXCJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWN0dXJhVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInIH0pO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkxlY3R1cmFcIicpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGVjdHVyYVRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIFNlc2lvbmVzIGRlIExlY3R1cmFcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTGVjdHVyYVNlc2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFNlc2lvbmVzIGRlIExlY3R1cmEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVNlc2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBMaWJyb3MgeSBSZXNcdTAwRkFtZW5lc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBSZXNcdTAwRkFtZW5lcyBkZSBMaWJyb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBwYXJhIGxvcyByZXNcdTAwRkFtZW5lcyBkZSBsaWJyb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIGxvcyByZXNcdTAwRkFtZW5lcyBkZSBsaWJyb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSBlc3RhbW9zIGRlbnRybyBkZSBpZiAoaW5kZXggPT09IDEpIHsgLi4uIH1cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTWVudG9yXHUwMEVEYXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiTWVudG9yXHUwMEVEYXNcIicgfSk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnRvcmlhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZW50b3JpYXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBTZXNpb25lcyBkZSBNZW50b3JcdTAwRURhJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIHNlc2lvbmVzIGRlIG1lbnRvclx1MDBFRGEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVudG9yaWFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZW50b3JpYXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgTWVudG9yXHUwMEVEYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxhcyBzZXNpb25lcyBkZSBtZW50b3JcdTAwRURhLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZW50b3JpYXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVwaXRlIGVsIHBhdHJcdTAwRjNuIHBhcmEgXCJNZXJjYWRvXCIsIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCIsIHkgXCJQYWdvc1wiXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1lcmNhZG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmNhZG9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicgfSk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTWVyY2Fkb1wiJyk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZXJjYWRvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1lcmNhZG9cIiwgc2lndWllbmRvIGVsIHBhdHJcdTAwRjNuIGRlIGxhcyBtZW50b3JcdTAwRURhc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBMaXN0YWRvcyBkZSBNZXJjYWRvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIGxpc3RhcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhtZXJjYWRvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIGxpc3RhZG9zIGRlIG1lcmNhZG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyBsaXN0YWRvcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9NZXJjYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsb3NUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIk1cdTAwRjNkdWxvcyBTaXN0ZW1hIEdlc3RpXHUwMEYzblwiJyB9KTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIicpO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kdWxvc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIlxuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobW9kdWxvc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE1vZHVsb3MgZGVsIFNpc3RlbWEgZGUgR2VzdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBtXHUwMEYzZHVsb3MgZGVsIFNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Nb2R1bG9zU2lzdGVtYSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbG9zIE1vZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIE1cdTAwRjNkdWxvcyBkZWwgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Nb2R1bG9zU2lzdGVtYSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUGFnb3NcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ29zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQYWdvc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwYWdvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUGFnb3NcIicpO1xuICAgICAgICAgICAgICAgIHBhZ29zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhZ29zQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcGFnb3NDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcGFnb3NUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBBZ3JlZ2EgYXF1XHUwMEVEIGxhcyBjb25maWd1cmFjaW9uZXMgZXNwZWNcdTAwRURmaWNhcyBwYXJhIFwiUGFnb3NcIlxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHBhZ29zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTW9kdWxvcyBkZWwgU2lzdGVtYSBkZSBQYWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBjb21wcm9iYW50ZXMgZGUgcGFnb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1BhZ29zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QYWdvcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocGFnb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUGFnb3MnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIFBhZ29zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QYWdvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUGFnb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByZXNlbnRhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlByZXNlbnRhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE5vdGFzIGRlIFByZXNlbnRhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIG5vdGFzIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJlc2VudGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByZXNlbnRhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFByZXNlbnRhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBwcmVzZW50YWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJlc2VudGFjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1ByZXNlbnRhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByb3llY3RvcyBkZSBRXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyB9KTtcbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcm95ZWN0b3NRQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcHJveWVjdG9zIGRlIFEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByb3llY3Rvc1FDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NRID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbGEgZnVuY2lcdTAwRjNuIHRvZ2dsZUNvbGxhcHNlIGVzdFx1MDBFMSBkZWZpbmlkYSBjb21vIHNlIGluZGljXHUwMEYzIGFudGVyaW9ybWVudGUuXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlB1YmxpY2FjaW9uZXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY2FjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlB1YmxpY2FjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHVibGljYWNpb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNhY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwdWJsaWNhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUGllemFzIGRlIFB1YmxpY2FjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgcGllemFzIGRlIHB1YmxpY2FjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1B1YmxpY2FjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1B1YmxpY2FjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWNldGFzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWNldGFzXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZXRhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWNldGFzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjZXRhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjZXRhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjZXRhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWNldGFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSByZWNldGFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWNldGFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlY3Vyc29zIFJlY3VycmVudGVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyB9KTtcbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWN1cnNvc1JlY3VycmVudGVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcmVjdXJzb3MgcmVjdXJyZW50ZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlZ2lzdHJvIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cm9UaWVtcG9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlJlZ2lzdHJvIFRpZW1wb1wiJyB9KTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVnaXN0cm8gVGllbXBvXCInKTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb1RpZW1wb0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9UaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWdpc3Ryb1RpZW1wb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlZ2lzdHJvcyBkZSBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcmVnaXN0cm9zIGRlIHRpZW1wby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWdpc3Ryb1RpZW1wb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWdpc3RybyBkZSBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlZ2lzdHJvcyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuXG5cblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgdGVyY2VyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gJ0ZlY2hhJztcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5wdXQgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGVJbnB1dC50eXBlID0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZXN0aWxvcyBDU1MgcGFyYSBlc3BhY2lhZG8geSBvcmdhbml6YWNpXHUwMEYzblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50IHsgZGlzcGxheTogbm9uZTsgcGFkZGluZy10b3A6IDIwcHg7IH0gLy8gQVx1MDBGMWFkaWRvIHBhZGRpbmctdG9wIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICAgICAgICAgIC50YWItY29udGVudC5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluayB7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogNXB4IDEwcHg7IG1hcmdpbi1yaWdodDogNXB4OyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICAgICAgICAgICAgICAudGFiLWxpbmsuYWN0aXZlIHsgYmFja2dyb3VuZDogI2UwZTBlMDsgfVxuICAgICAgICAgICAgICAgIC5zZXR0aW5nLWl0ZW0geyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgICAgICBcblxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYW1iaWFyIGxhIHBlc3RhXHUwMEYxYSBhY3RpdmFcbiAgICAgICAgdGhpcy5vcGVuVGFiID0gKHRhYk5hbWUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItbGluaycpLmZvckVhY2gobGluayA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYj1cIiR7dGFiTmFtZX1cIl1gKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWJDb250ZW50KSBhY3RpdmVUYWJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkxpbmspIGFjdGl2ZVRhYkxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBYnJpciBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYSBwb3IgZGVmZWN0b1xuICAgICAgICB0aGlzLm9wZW5UYWIoJ3RhYjAnKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9CYXNlIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBtb2R1bG9CYXNlOiBNb2R1bG9CYXNlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kdWxvQmFzZSkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgZGVzYWN0aXZhZG8sIG5vIGhhY2VyIG5hZGFcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICBcbiAgICB9XG5cblxufSIsICJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhckNhcnBldGEocnV0YUNhcnBldGE6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBjYXJwZXRhRXhpc3RlbnRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhQ2FycGV0YSk7XG4gICAgICAgICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke3J1dGFDYXJwZXRhfScgeWEgZXhpc3RlLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAvLyBDcmVhIGxhIGNhcnBldGFcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7cnV0YUNhcnBldGF9JyBjcmVhZGEgZXhpdG9zYW1lbnRlLmApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgY3JlYXIgbGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nOmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuIiwgImV4cG9ydCBjb25zdCBwbGFudGlsbGEgPSBgPCUqXG5kZWJ1Z2dlclxuY29uc3QgZHYgPSB0aGlzLkRhdGF2aWV3QVBJO1xuY29uc3Qge3VwZGF0ZX0gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJtZXRhZWRpdFwiXS5hcGlcbmNvbnN0IGZpbGVDYW1wb3MgPWR2LnBhZ2UoXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFNpc3RlbWEgQ2VudHJhbFwiKVxubGV0IGNsYXNpZmljYWNpb25BWCA9IGZpbGVDYW1wb3MudGl0dWxvQ2xhc2lmaWNhY2lvbkFYXG5sZXQgdGFnc0NsYXNpZmljYWNpb25BWCA9IGZpbGVDYW1wb3MudGFnc0NsYXNpZmljYWNpb25BWFxubGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xubGV0IGlkQXV4ID0gZHYucGFnZXMoJ1wiQW5vdGFjaW9uZXMvTm90YXNcIicpLmZpbGUuZnJvbnRtYXR0ZXIuc29ydChiPT4gYi5pZCAsICdkZXNjJykuaWQ7XG5cbi8vIENvbXBydWViYSBzaSBpZEF1eCB0aWVuZSBhbCBtZW5vcyB1biBlbGVtZW50byB5IGFzaWduYSBhICdpZCcgZWwgc2lndWllbnRlIHZhbG9yIGVuIGxhIHNlY3VlbmNpYSBvIDEgc2kgbm8gaGF5IGVsZW1lbnRvcy5cbmxldCBpZCA9IGlkQXV4Lmxlbmd0aCA+IDAgPyAoaWRBdXhbMF0gKyAxKSA6IDE7XG5cbmxldCBuZXdOYW1lLCB0aXR1bG8sIGV4aXN0ZSwgYXN1bnRvLCBub21icmVcblx0dGl0dWxvID0gYXdhaXQgdHAuc3lzdGVtLnByb21wdChcIlx1MDBCRlNvYnJlIHF1ZSBlcyBlc3RhIGFub3RhY2lcdTAwRjNuP1wiLCBcIkEtXCIrIGlkLCB0cnVlKVxuXHQvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICBpZiAodGl0dWxvID09PSBudWxsKSB7XG4gICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHR9XG5cdGlmIChhY3Rpdm8gIT0gbnVsbCl7IFxuXHRcdG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcblx0XHRjb25zdCBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7IFxuXHRcdGFzdW50byA9IGF3YWl0IHRwLnN5c3RlbS5zdWdnZXN0ZXIoW1wiU2lcIixcIk5vXCJdLFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRpdHVsbyArIFwiP1wiKVxuXHRcdH1cblx0bmV3TmFtZSA9IFwiQW5vdGFjaW9uZXMvTm90YXMvQSAtIFwiICsgaWQgIFxuYXdhaXQgdHAuZmlsZS5tb3ZlKG5ld05hbWUpO1xubGV0IGNsYXNpZmljYWNpb24sIGRlc2NyaXBjaW9uLCBlc3RhZG9cbmxldCB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgdHAuc3lzdGVtLnN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuXHQvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0fVxubGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlXG5pZih0YWdDbGFzaWZpY2FjaW9uPT1cIk51ZXZvXCIpe1xuXHRjbGFzaWZpY2FjaW9uID0gYXdhaXQgdHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcblx0Ly8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdH1cblx0dGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIHRhZyBxdWUgdXRpbGl6YXJhcyBwYXJhIFwiICsgY2xhc2lmaWNhY2lvbiArIFwiPy4gTm8gdXRpbGljZXMgZXNwYWNpb3MgZW4gbGEgZGVmaW5pY2lcdTAwRjNuIGRlbCB0YWcuXCIsIFwibnVldm9UYWdcIiwgdHJ1ZSlcblx0Ly8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdH1cblx0bnVldmFDbGFzaWZpY2FjaW9uID0gdHJ1ZVxuLy8gLS0+IFZhbGlkYXIgcXVlIGVsIG5vbWJyZSBkZWwgZ3J1cG8gbm8gc2VhIGlndWFsIGFsIG5vbWJyZSBkZSBuaW5ndW5hIGFyZWEgZGUgVmlkYS5cbn1lbHNlIGlmKHRhZ0NsYXNpZmljYWNpb249PVwiTmluZ3VuYVwiKXtcblx0dGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcblx0Y2xhc2lmaWNhY2lvbiA9IFwiXCJcdFxufWVsc2Uge1xuXHRsZXQgaW5kaWNlID0gdGFnc0NsYXNpZmljYWNpb25BWC5pbmRleE9mKHRhZ0NsYXNpZmljYWNpb24pXG5cdGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxufVxuaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgIGxldCBudWV2b0MgPSBjbGFzaWZpY2FjaW9uQVgucG9wKCk7IC8vIFx1MDBEQWx0aW1hIGNsYXNpZmljYWNpXHUwMEYzblxuICAgIGxldCBuaW5ndW5vQyA9IGNsYXNpZmljYWNpb25BWC5wb3AoKTsgLy8gUGVuXHUwMEZBbHRpbWEgY2xhc2lmaWNhY2lcdTAwRjNuXG5cbiAgICBjbGFzaWZpY2FjaW9uQVgucHVzaChjbGFzaWZpY2FjaW9uKTtcbiAgICBjbGFzaWZpY2FjaW9uQVgucHVzaChuaW5ndW5vQyk7XG4gICAgY2xhc2lmaWNhY2lvbkFYLnB1c2gobnVldm9DKTtcblxuICAgIGF3YWl0IHVwZGF0ZShcInRpdHVsb0NsYXNpZmljYWNpb25BWFwiLCBjbGFzaWZpY2FjaW9uQVgsIGZpbGVDYW1wb3MuZmlsZS5wYXRoKTtcblx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKTtcblxuICAgIGxldCBudWV2b1RhZ0MgPSB0YWdzQ2xhc2lmaWNhY2lvbkFYLnBvcCgpOyAvLyBcdTAwREFsdGltbyB0YWdcbiAgICBsZXQgbmluZ3Vub1RhZ0MgPSB0YWdzQ2xhc2lmaWNhY2lvbkFYLnBvcCgpOyAvLyBQZW5cdTAwRkFsdGltbyB0YWdcblxuICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVgucHVzaCh0YWdDbGFzaWZpY2FjaW9uKTtcbiAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYLnB1c2gobmluZ3Vub1RhZ0MpO1xuICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVgucHVzaChudWV2b1RhZ0MpO1xuXG4gICAgYXdhaXQgdXBkYXRlKFwidGFnc0NsYXNpZmljYWNpb25BWFwiLCB0YWdzQ2xhc2lmaWNhY2lvbkFYLCBmaWxlQ2FtcG9zLmZpbGUucGF0aCk7XG59XG5cblxuaWYgKHRhZ0NsYXNpZmljYWNpb24gIT0gXCJcIil7XG50YWdDbGFzaWZpY2FjaW9uID0gXCJjbC9cIiArIHRhZ0NsYXNpZmljYWNpb24gXG59XG5pZiAoY2xhc2lmaWNhY2lvbiA9PSBcIkZlZWRiYWNrIFNlbWFuYWxcIil7XG5cdGRlc2NyaXBjaW9uID0gW11cblx0bGV0IGF1eCA9IDBcblx0bGV0IG90cmFcblx0ZG97XG5cdFx0ZGVzY3JpcGNpb25bYXV4XSA9IGF3YWl0IHRwLnN5c3RlbS5wcm9tcHQoXCJFc2NyaWJlIHR1IGZlZWRiYWNrIGRlIFwiKyB0aXR1bG8sIFwiUFwiICsgYXV4LCBmYWxzZSwgdHJ1ZSlcblx0XHRhdXggKz0gMVxuXHRcdG90cmEgPSBhd2FpdCB0cC5zeXN0ZW0uc3VnZ2VzdGVyKFtcIlNpXCIsXCJOb1wiXSxbdHJ1ZSxmYWxzZV0sIHRydWUsIFwiXHUwMEJGQWdyZWdhciBvdHJvIHBhcnJhZm8/XCIgKVxuXHR9d2hpbGUob3RyYSlcbn1lbHNle1xuXHRkZXNjcmlwY2lvbiA9IGF3YWl0IHRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZRdWllcmVzIGFncmVnYXIgdW5hIGRlc2NyaXBjaVx1MDBGM24/XCIsIFwiIFwiICsgdGl0dWxvLCBmYWxzZSwgdHJ1ZSApXG5cdC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgIGlmIChkZXNjcmlwY2lvbiA9PT0gbnVsbCkge1xuICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0fVxufVxuZXN0YWRvID0gYXdhaXQgdHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQ29tcGxldGFkbyAtIEluZm9ybWFjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdURGRTIgLT4gRmluYWxpemFkb1wiLFwiXHVEODNEXHVERkUxIC0+IEVuIGVqZWN1Y2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERDM0IC0+IERldGVuaWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgXCJDdWFsIGVzIGVsIGVzdGFkbyBkZSBlc3RhIGFub3RhY2lcdTAwRjNuP1wiKVxuLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgaWYgKGVzdGFkbyA9PT0gbnVsbCkge1xuICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0fVxuLSU+XG4tLS1cbnRpcG86IEFub3RhY2lcdTAwRjNuXG5pZHE6IDZcbmlkOiA8JSBpZCAlPiBcbmlkTWFudWFsOlxuYWxpYXNlczogXG4tIDwldGl0dWxvJT5cbmRlc2NyaXBjaW9uOiA8JSppZiAoY2xhc2lmaWNhY2lvbiAhPSBcIkZlZWRiYWNrIFNlbWFuYWxcIil7JT4gPCVkZXNjcmlwY2lvbiU+PCUqIH1lbHNleyU+Pi0gIDwlKiBmb3IgKGxldCBhPTA7IGE8ZGVzY3JpcGNpb24ubGVuZ3RoO2ErKyl7JT5cbiAgIDwlZGVzY3JpcGNpb25bYV0lPiBcbjwlKn19JT5cbnRlbWE6IDwlY2xhc2lmaWNhY2lvbiU+IFxuZXN0YWRvOiA8JSBlc3RhZG8gJT4gXG5mZWNoYTogPCUgdHAuZGF0ZS5ub3coXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIikgJT5cbmhvcmE6IDwlIHRwLmRhdGUubm93KFwiSEhtbVwiLCAwLCklPlxudmFsb3I6ICBcbnRhZ3M6IDwldGFnQ2xhc2lmaWNhY2lvbiU+IFxuYXN1bnRvOiA8JSogaWYoYXN1bnRvKXsgJT4gXG4tIFwiW1s8JW5vbWJyZSU+XV1cIiA8JSp9JT5cbnJlbGF0ZWQ6XG4tLS1cbiMgXFxgVklFV1t7YWxpYXNlc31dXFxgIFxuPlshaW5mb10tIERlc2NyaXBjaW9uXG4+XFxgVklFV1t7ZGVzY3JpcGNpb259XVxcYFxuPiBcblxuUGxhbnRpbGxhIG9jdWx0YVxuPCUqIGlmKGNsYXNpZmljYWNpb249PVwiTWVkaXRhY2lvbmVzIGRlIGFsdGVyYWNpXHUwMEYzbiBkZSBmdXR1cm9cIil7IC0lPlxuIyMgT2JqZXRpdm8gXG5cbiMjIEV2ZW50byBpbWFnaW5hcmlvIHF1ZSBzZWd1aXJcdTAwRURhIGFsIGN1bXBsaW1pZW50byBkZWwgZGVzZW9cblxuIyMjIFF1ZSBlcyBsbyBxdWUgc2llbnRvP1xuXG4jIyMgRGV0YWxsZXMgcGFyYSBsYSB2aXN1YWxpemFjaVx1MDBGM24uXG4jIyBQcmVtaXNhcyBxdWUgYWxpbWVudGVuIGVsIGRlc2VvIGN1bXBsaWRvXG5fRnJhc2VzIHF1ZSBhcG95YW4gbWkgb2JqZXRpdm9fXG4jIyBUYXJlYXMgZGUgc2VndWltaWVudG8gZGUgbGEgbWVkaXRhY2lcdTAwRjNuXG4tIFsgXSBUb3RhbCBkZSBtZWRpdGFjaW9uZXMgZGUgPCUgdGl0dWxvICU+IFxuXHQtIFsgXSBNZWRpdGFjaVx1MDBGM24gZGUgPCUgdGl0dWxvICU+ICNjeC9NZWRpdGFjaW9uIFx1RDgzRFx1REQwMSBldmVyeSBkYXkgd2hlbiBkb25lIFx1RDgzRFx1RENDNSA8JSB0cC5kYXRlLm5vdyhcIllZWVktTU0tRERcIikgJT5cbjwlKn1lbHNlIGlmKGNsYXNpZmljYWNpb24gPT1cIkZlZWRiYWNrIFNlbWFuYWxcIil7LSU+XG4jIyBGZWVkYmFja1xuXFxgXFxgXFxgZGF0YXZpZXdqc1xuZHYucGFyYWdyYXBoKGR2LmN1cnJlbnQoKS5kZXNjcmlwY2lvbilcblxcYFxcYFxcYFxuPCUqfWVsc2UgaWYoY2xhc2lmaWNhY2lvbiA9PVwiVmlkZW8gWW91dHViZVwiKXstJT5cbiMjIFZpZGVvXG5cbj4gWyF0aXBdLSBDb21vIGNyZWFyIGVsIGxpbmsgZGVsIHZpZGVvP1xuPkVzdGFtb3MgdXRpbGl6YW5kbyBlbCBwbHVnaW4gVGltZVN0YW1wIE5vdGVzLiBQYXJhIGNyZWFyIGVsIGxpbmsgYXF1XHUwMEVELCBzb2xhbWVudGUgZGViZXMgcGVnYXIgZWwgbGluayBkZSB5b3V0dWJlLCBzZWxlY2Npb25hcmxvIHkgdXRpbGl6YXIgZWwgY29tYW5kbyBPcGVuIFZpZGVvIFBsYXllciwgbyBlbCBzaG9ydGN1dCAgXHUyMzI1IF4gT1xuIyMjIFRpbWVzdGFtcHNcbj4gWyFpbXBvcnRhbnRdLSBDcmVhciBsb3MgdGltZXN0YW1wcyBkZWwgdmlkZW9cbj4gUGFyYSBjcmVhciBsb3MgdGltZXN0YW1wcyBkZWwgdmlkZW8sIGVuIGVsIG1vbWVudG8gZW4gZWwgcXVlIGxsZWd1ZXMgYWwgdmlkZW8sIHNvbG8gZGViZXMgcHVsc2FyIGVsIHNob3J0Y3V0IFx1MjMyNSBeIDAsIG8gYnVzY2FyIGVsIGNvbWFuZG8gSW5zZXJ0IFRpbWVzdGFtcC4gXG4gXG5cbiMjIENvbWVudGFyaW9zIFBlcnNvbmFsZXNcblxuIyMgSGl0b3MgZGVsIHZpZGVvLlxuXG4jIyBSZXN1bWVuIElBXG5cbjwlKn1lbHNlIGlmKGNsYXNpZmljYWNpb24gPT1cIkdydXBvIGRlIEhvamFzIGRlIFRyYWJham9cIil7LSU+XG5cbiMjIFtbQ29tZW50YXJpb3MgYSBsYXMgcGxhbnRpbGxhcyNUZW1hcyByZWxhY2lvbmFkb3MgYSBlc3RlIGdydXBvIGRlIGhvamFzIGRlIHRyYWJham98VGVtYXMgcmVsYWNpb25hZG9zIGEgZXN0ZSBncnVwbyBkZSBob2phcyBkZSB0cmFiYWpvOl1dXG5cXGBcXGBcXGBkYXRhdmlld2pzXG5jb25zdCB7Y3JlYXJBeH0gPSBjdXN0b21KU1xubGV0IGhpam9zID0gZHYucGFnZXMoKS5maWx0ZXIoYj0+IGR2LmZ1bmMuY29udGFpbnMoYi5hc3VudG8sIGR2LmN1cnJlbnQoKS5maWxlLmxpbmspKVxubGV0IHRvdGFsSGlqb3MgPSBcbmR2LnRhYmxlKFtcIlRlbWFcIixcIlRpcG9cIixcIkZlY2hhIE1vZGlmaWNhY2lcdTAwRjNuXCIsIFwiUGVuZGllbnRlc1wiLFwiSGlqb3NcIl0sIGhpam9zLm1hcChiPT4gW2IuZmlsZS5saW5rLCBiLnRlbWEsIGIuZmVjaGEsIGIuZmlsZS50YXNrcy5maWx0ZXIoYj0+IGIuc3RhdHVzID09ICcgJyB8fCBiLnN0YXR1cyA9PSAnLycpLmxlbmd0aCwgY3JlYXJBeC5wYWdpbmFzSGlqb3MoZHYsYikubGVuZ3RoLTFdKSlcblxcYFxcYFxcYFxuXG5cbjwlKn0lPlxuXG5cbiMgRmluXG4tIFsvXSBGaW5hbGl6YWRvIGVsIGRlc2Fycm9sbG8gZGUgQW5vdGFjaVx1MDBGM24gPCVpZCU+ICNjeC9Db21wdXRhZG9yL09yZ2FuaXphck5vdGFzICBcbkVzdGFkbyBkZSBsYSBub3RhOiAgXFxgSU5QVVRbZXN0YWRvTm90YV1bOmVzdGFkb11cXGBcblxcYFxcYFxcYGRhdGF2aWV3anNcbmNvbnN0IHtjYWxsRFZ9ID0gY3VzdG9tSlNcbmNhbGxEVi5DYW1iaWFyVGl0dWxvRGVzY3JpcGNpb24oZHYpXG5cXGBcXGBcXGBcbi0tLVxuXFxgXFxgXFxgZGF0YXZpZXdqc1xuY29uc3Qge2NhbGxEVn0gPSBjdXN0b21KU1xuY2FsbERWLkNhcnJ1c2VsQW5vdGFjaW9uZXMoZHYpXG5cXGBcXGBcXGBcblxcYFxcYFxcYGRhdGF2aWV3anNcbmNvbnN0IHtjYWxsRFZ9ID0gY3VzdG9tSlNcbmNhbGxEVi5Cb3RvbmVzU3RhbmRhcihkdilcblxcYFxcYFxcYFxuXG5gIiwgImltcG9ydCB7cGxhbnRpbGxhfSBmcm9tICcuLi8uLi8uLi9wbGFudGlsbGFzL0Fub3RhY2lvbmVzL1BsdCAtIEFub3RhY2lvbmVzJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJQbGFudGlsbGEoY29udGVuaWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlPiB7XG4gICAgLy8gRGVmaW5lIGxhIHJ1dGEgeSBlbCBub21icmUgZGVsIGFyY2hpdm8gdGVtcG9yYWxcbiAgICBjb25zdCBmb2xkZXIgPSAnUGxhbnRpbGxhcyc7XG4gICAgbGV0IGZpbGVuYW1lID0gXCJBcmNoaXZvIERlIFBsYW50aWxsYVwiXG4gICAgbGV0IHBhdGhUZW1wb3JhbCA9IGZvbGRlciArIFwiL1wiICsgZmlsZW5hbWUgKyBcIi5tZFwiO1xuXG4gICAgLy8gQ3JlYSBlbCBhcmNoaXZvIGVuIGxhIGJcdTAwRjN2ZWRhIHkgZ3VhcmRhIGVsIGFyY2hpdm8gY3JlYWRvIGVuIHVuYSB2YXJpYWJsZVxuICAgIGNvbnN0IGFyY2hpdm9DcmVhZG86IFRGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShwYXRoVGVtcG9yYWwsIGNvbnRlbmlkbyk7XG5cbiAgICAvLyBBcXVcdTAwRUQgbmVjZXNpdGFyXHUwMEVEYXMgcHJvY2VzYXIgZWwgYXJjaGl2byBjb24gVGVtcGxhdGVyIHNpIGVzIG5lY2VzYXJpb1xuICAgIC8vIEVzdG8gZGVwZW5kZSBkZSBjXHUwMEYzbW8gVGVtcGxhdGVyIGV4cG9uZ2Egc3UgZnVuY2lvbmFsaWRhZCBhIG90cm9zIHBsdWdpbnNcbiAgICAvLyBQb3IgZWplbXBsbywgc2kgVGVtcGxhdGVyIHRpZW5lIHVuIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgYXJjaGl2b3MsIGxvIHVzYXJcdTAwRURhcyBhcXVcdTAwRURcblxuICAgIC8vIChPcGNpb25hbCkgRWxpbWluYSBlbCBhcmNoaXZvIGRlc3B1XHUwMEU5cyBkZSBwcm9jZXNhcmxvIHNpIG5vIGRlc2VhcyBjb25zZXJ2YXJsb1xuICAgIC8vIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoYXJjaGl2b0NyZWFkbyk7XG5cbiAgICAvLyBSZXRvcm5hIGVsIGFyY2hpdm8gY3JlYWRvXG4gICAgcmV0dXJuIGFyY2hpdm9DcmVhZG87XG59XG4iLCAiaW1wb3J0IHtjcmVhckNhcnBldGF9IGZyb20gXCIuL3V0aWxzL2NyZWFyQ2FycGV0YVwiXG5pbXBvcnQge2NyZWFyUGxhbnRpbGxhfSBmcm9tIFwiLi91dGlscy9jcmVhclBsYW50aWxsYVwiXG5pbXBvcnQge3BsYW50aWxsYX0gZnJvbSBcIi4uLy4uL3BsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXNcIlxuaW1wb3J0IHtURmlsZSwgVEZvbGRlcn0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7Y3JlYXRlTm90ZUZyb21UZW1wbGF0ZX0gZnJvbSBcIi4vdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZVwiXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8xID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJDcmVhY2lvbi1DYXJwZXRhXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYWNpXHUwMEYzbiBkZSBDYXJwZXRhXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgYXdhaXQgY3JlYXJDYXJwZXRhKCdNaSBDYXJwZXRhIGRlIHBsdWdpbicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMS5pZCk7XG5cbiAgICBjb25zdCBjb21hbmRvMiA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiY3JlYXItdGVtcGxhdGVcIixcbiAgICAgICAgbmFtZTogXCJDcmVhciB1biBhcmNoaXZvIHRlbXBsYXRlXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZvID0gYXdhaXQgY3JlYXJQbGFudGlsbGEocGxhbnRpbGxhKTtcbiAgICAgICAgICAgIGlmICghYXJjaGl2bykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG8yLmlkKTtcblxuXG4gICAgY29uc3QgY29tYW5kbzMgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLWFyY2hpdm8tdGVtcGxhdGVcIixcbiAgICAgICAgbmFtZTogXCJDcmVhciBhcmNoaXZvIGRlc2RlIHRlbXBsYXRlXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHBsdWdpbklkID0gJ3RlbXBsYXRlci1vYnNpZGlhbic7XG4gICAgICAgICAgICBjb25zdCBpc1BsdWdpbkluc3RhbGxlZCA9IHBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMocGx1Z2luSWQpO1xuICAgICAgICAgICAgLy9jb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSBwbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1twbHVnaW5JZF07XG4gICAgICAgICAgICAvLyBJbnRlbnRhIG9idGVuZXIgbGEgcGxhbnRpbGxhIGNvbW8gVEZpbGVcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IFwiUGxhbnRpbGxhcy9Bbm90YWNpb25lcy9QbHQgLSBBbm90YWNpb25lcy5tZFwiO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJbnRlbnRhIG9idGVuZXIgbGEgY2FycGV0YSBjb21vIFRGb2xkZXJcbiAgICAgICAgICAgIGxldCBmb2xkZXJPYmogPSBwbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgICAgICAgICAgaWYgKCEoZm9sZGVyT2JqIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTGEgY2FycGV0YSBlc3BlY2lmaWNhZGEgbm8gZXhpc3RlIG8gbm8gZXMgdW5hIGNhcnBldGEuXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU2FsaXIgc2kgbm8gc2UgZW5jdWVudHJhIGxhIGNhcnBldGEgbyBubyBlcyB1bmEgY2FycGV0YVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgZmlsZU5hbWUgPSBcInRvRGVmaW5lXCJcbiAgICAgICAgICAgIGxldCBvcGVuTm90ZSA9IHRydWVcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGNvbnN0IGFyY2hpdm8gPSBhd2FpdCBjcmVhdGVOb3RlRnJvbVRlbXBsYXRlKHBsdWdpbiwgdGVtcGxhdGUsIGZvbGRlck9iaiwgZmlsZU5hbWUsIG9wZW5Ob3RlKTtcblxuICAgICAgICAgICAgaWYgKCFhcmNoaXZvKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzMuaWQpO1xuXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIFxuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIpIHJldHVybjtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBwb2RyXHUwMEVEYXMgbWFuZWphciBsYSBcImRlc2FjdGl2YWNpXHUwMEYzblwiIGRlIGNvbWFuZG9zLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwgImltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG4vKipcbiAqIENyZWEgdW5hIG51ZXZhIG5vdGEgYSBwYXJ0aXIgZGUgdW5hIHBsYW50aWxsYSB1dGlsaXphbmRvIGVsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGVyUGx1Z2luIFJlZmVyZW5jaWEgYWwgcGx1Z2luIFRlbXBsYXRlci5cbiAqIEBwYXJhbSB0ZW1wbGF0ZSBMYSBwbGFudGlsbGEgYSB1dGlsaXphciwgcHVlZGUgc2VyIHVuIFRGaWxlIG8gZWwgcGF0aCBjb21vIHN0cmluZy5cbiAqIEBwYXJhbSBmb2xkZXIgRWwgZm9sZGVyIGRvbmRlIHNlIGNyZWFyXHUwMEUxIGxhIG51ZXZhIG5vdGEuIE9wY2lvbmFsLlxuICogQHBhcmFtIGZpbGVuYW1lIEVsIG5vbWJyZSBkZWwgYXJjaGl2byBkZSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBvcGVuTmV3Tm90ZSBTaSBzZSBkZWJlIGFicmlyIGxhIG51ZXZhIG5vdGEgdHJhcyBjcmVhcmxhLiBQb3IgZGVmZWN0byBlcyB0cnVlLlxuICogQHJldHVybnMgUHJvbWlzZSBxdWUgcmVzdWVsdmUgYSBURmlsZSBzaSBsYSBub3RhIGZ1ZSBjcmVhZGEsIHVuZGVmaW5lZCBlbiBjYXNvIGNvbnRyYXJpby5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5vdGVGcm9tVGVtcGxhdGUoXG4gICAgcGx1Z2luOiBQbHVnaW4sIC8vIEVzdGEgZXMgdW5hIHN1cG9zaWNpXHUwMEYzbiwgbmVjZXNpdGFyXHUwMEUxcyBhanVzdGFyIHNlZ1x1MDBGQW4gY1x1MDBGM21vIGFjY2VkYXMgYSBUZW1wbGF0ZXIgZW4gdHUgcGx1Z2luXG4gICAgdGVtcGxhdGU6IFRGaWxlIHwgc3RyaW5nLFxuICAgIGZvbGRlcj86IFRGb2xkZXIsXG4gICAgZmlsZW5hbWU/OiBzdHJpbmcsXG4gICAgb3Blbk5ld05vdGU6IGJvb2xlYW4gPSB0cnVlXG4pOiBQcm9taXNlPFRGaWxlIHwgdW5kZWZpbmVkPiB7XG4gICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZWwgcGx1Z2luIFRlbXBsYXRlciBlc3RcdTAwRTEgaW5zdGFsYWRvIHkgaGFiaWxpdGFkb1xuICAgIGlmICghcGx1Z2luIHx8ICFwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKU1xuICAgIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICBjb25zdCB0cCA9IHRlbXBsYXRlclBsdWdpbi50ZW1wbGF0ZXIuY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgIFxuXG4gICAgaWYgKCF0cCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgIHJldHVybjtcbn1cbiAgICAvLyB0ZW1wbGF0ZUZpbGUgcHVlZGUgc2VyIHVuIHN0cmluZyBvIGVsIHRmaWxlIG9idGVuaWRvIGRlIGVzdGEgbWFuZXJhIG8gY29uIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoKVxuICAgIGRlYnVnZ2VyXG4gICAgbGV0IHRlbXBsYXRlRmlsZSA9IHRwLmZpbGUuZmluZF90ZmlsZSh0ZW1wbGF0ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3Tm90ZSA9IGF3YWl0IHRwLmZpbGUuY3JlYXRlX25ldyh0ZW1wbGF0ZUZpbGUsIGZpbGVuYW1lLCBvcGVuTmV3Tm90ZSwgZm9sZGVyKTtcbiAgICAgICAgcmV0dXJuIG5ld05vdGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgbGEgbm90YSBkZXNkZSBsYSBwbGFudGlsbGE6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyUmliYm9uTWVudSB9IGZyb20gXCIuL3VpL3JpYmJvbkJ1dHRvblwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGEocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luKTtcbn0iLCAiaW1wb3J0IHsgQXBwLCBNZW51LCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIH0gZnJvbSBcIi4vbW9kYWxcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgdGVuZXIgZWwgaW1wb3J0IGNvcnJlY3RvIHBhcmEgdHUgbW9kYWxcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIEVzdGUgZXMgZWwgXHUwMEVEY29ubyBkZWwgbWVuXHUwMEZBIGVuIGVsIHJpYmJvbiwgY2FtYmlhIFwiZGljZVwiIHBvciBlbCBcdTAwRURjb25vIHF1ZSBwcmVmaWVyYXNcbiAgICBwbHVnaW4uYWRkUmliYm9uSWNvbihcImZvbGRlci1zZWFyY2gtMlwiLCBcIkJcdTAwRkFzcXVlZGEgQXZhbnphZGFcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIENyZWFyIGVsIG1lblx1MDBGQSBhbCBoYWNlciBjbGljIGVuIGVsIFx1MDBFRGNvbm9cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KHBsdWdpbi5hcHApO1xuXG4gICAgICAgIC8vIEFncmVnYXIgb3BjaW9uZXMgYWwgbWVuXHUwMEZBXG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBWaWRhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIFZpZGFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcnJlY2NpXHUwMEYzbjogQXNlZ1x1MDBGQXJhdGUgZGUgYWJyaXIgZWwgbW9kYWwgY29ycmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICBuZXcgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbChwbHVnaW4uYXBwLCAoZXN0YWRvU2VsZWNjaW9uYWRvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBzZWxlY2Npb25hZG86XCIsIGVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgcHVlZGVzIGNvbnRpbnVhciBjb24gbGEgbFx1MDBGM2dpY2EgcGFyYSBtYW5lamFyIGVsIGVzdGFkbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpOyAvLyBDb3JyZWdpZG86IEFcdTAwRjFhZGlkbyAub3BlbigpIHBhcmEgYWJyaXIgZWwgbW9kYWxcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBbm90YWNpXHUwMEYzblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiQW5vdGFjaVx1MDBGM25cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJBbm90YWNpXHUwMEYzblwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5vdGFjaVx1MDBGM25cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFJlY3Vyc28gUmVjdXJyZW50ZVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiUmVjdXJzbyBSZWN1cnJlbnRlXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWN1cnNvIFJlY3VycmVudGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEdlc3RpXHUwMEYzbiBEaWFyaWFcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkdlc3RpXHUwMEYzbiBEaWFyaWFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJHZXN0aVx1MDBGM24gRGlhcmlhXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWdpc3RybyBkZSBUaWVtcG9cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm8gZGUgVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBNb3N0cmFyIGVsIG1lblx1MDBGQSBlbiBsYSBwb3NpY2lcdTAwRjNuIGRlbCBjdXJzb3JcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRnV6enlOb3RlU3VnZ2VzdGVyIH0gZnJvbSBcIi4uL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXJcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHJ1dGEgZGUgaW1wb3J0YWNpXHUwMEYzbiBzZWEgY29ycmVjdGFcblxuZXhwb3J0IGNsYXNzIFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgb25TZWxlY3RFc3RhZG86IChlc3RhZG86IHN0cmluZykgPT4gdm9pZDtcbiAgICBlc3RhZG9TZWxlY2Npb25hZG86IHN0cmluZyA9IFwiXHVEODNEXHVERkUyXCI7IC8vIEVzdGFkbyBwb3IgZGVmZWN0byBjb21vIGVtb2ppIGRpcmVjdGFtZW50ZVxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdEVzdGFkbyA9IG9uU2VsZWN0RXN0YWRvO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQnVzY2FyIFx1MDBDMXJlYXMgZGUgVmlkYVwiIH0pO1xuXG4gICAgICAgIC8vIFVzYW5kbyBTZXR0aW5nIHBhcmEgY3JlYXIgZWwgRHJvcGRvd25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFc3RhZG9cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRWxpZ2UgZWwgZXN0YWRvOlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKHsgXCJcdUQ4M0RcdURGRTJcIjogXCJWZXJkZVwiLCBcIlx1RDgzRFx1REQzNVwiOiBcIkF6dWxcIiwgXCJcdUQ4M0RcdURGRTFcIjogXCJBbWFyaWxsb1wiLCBcIlx1RDgzRFx1REQzNFwiOiBcIlJvam9cIiB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7IC8vIEVzdGFibGVjZSBlbCB2YWxvciBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lc3RhZG9TZWxlY2Npb25hZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJCdXNjYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90YXNGaWx0cmFkYXMgPSBhd2FpdCB0aGlzLmZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90YXMgZmlsdHJhZGFzOlwiLCBub3Rhc0ZpbHRyYWRhcy5sZW5ndGgsIG5vdGFzRmlsdHJhZGFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGdXp6eU5vdGVTdWdnZXN0ZXIodGhpcy5hcHAsIG5vdGFzRmlsdHJhZGFzKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBmaWx0cmFyIG5vdGFzIHBvciBlc3RhZG8geSBkaXJlY3RvcmlvXG4gICAgYXN5bmMgZmlsdHJhck5vdGFzUG9yRXN0YWRvWURpcmVjdG9yaW8oZGlyZWN0b3Jpbzogc3RyaW5nLCBlc3RhZG86IHN0cmluZyk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgbGV0IG5vdGFzRmlsdHJhZGFzID0gYXJjaGl2b3MuZmlsdGVyKGFyY2hpdm8gPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGFyY2hpdm8ucGF0aDtcbiAgICAgICAgICAgIGlmICghcGF0aC5zdGFydHNXaXRoKGRpcmVjdG9yaW8pKSByZXR1cm4gZmFsc2U7IC8vIEZpbHRyYSBwb3IgZGlyZWN0b3Jpb1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkYXRvcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHByb2Nlc2FkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCBlc3RhZG8gZGVsIGZyb250bWF0dGVyIGNvaW5jaWRlIGNvbiBlbCBlc3RhZG8gcHJvcG9yY2lvbmFkb1xuICAgICAgICAgICAgaWYgKGRhdG9zLmZyb250bWF0dGVyICYmIGRhdG9zLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gZXN0YWRvKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGluY2x1aWRvOlwiLCBhcmNoaXZvLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gT3JkZW5hIGxhcyBub3RhcyBmaWx0cmFkYXMgcG9yIGZlY2hhIGRlIG1vZGlmaWNhY2lcdTAwRjNuLCBkZSBsYSBtXHUwMEUxcyByZWNpZW50ZSBhIGxhIG1cdTAwRTFzIGFudGlndWFcbiAgICAgICAgbm90YXNGaWx0cmFkYXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZTsgLy8gRGVzY2VuZGVudGVcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHJldHVybiBub3Rhc0ZpbHRyYWRhcztcbiAgICB9XG4gICAgXG59XG4iLCAiLy8gRW4gYWxnXHUwMEZBbiBsdWdhciBkZSB0dSBtXHUwMEYzZHVsbywgY29tbyBzZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyLnRzXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgRnV6enlOb3RlU3VnZ2VzdGVyIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8VEZpbGU+IHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBub3RhczogVEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIGdldEl0ZW1zKCk6IFRGaWxlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhcztcbiAgICB9XG5cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBURmlsZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpdGVtLmJhc2VuYW1lOyAvLyBPIGN1YWxxdWllciBvdHJvIGZvcm1hdG8gcXVlIHByZWZpZXJhc1xuICAgIH1cblxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBURmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBBcXVcdTAwRUQgZGVmaW5lcyBxdVx1MDBFOSBoYWNlciBjdWFuZG8gc2Ugc2VsZWNjaW9uYSB1bmEgbm90YS4gUG9yIGVqZW1wbG8sIGFicmlyIGxhIG5vdGE6XG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgZmFsc2UpO1xuICAgICAgICBsZWFmLm9wZW5GaWxlKGl0ZW0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFN0YXR1c0JhciwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJFeHRlbnNpb24ge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIHN0YXR1c0JhcjogU3RhdHVzQmFyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBhY3Rpdm8sIG5vIGhhY2VyIG5hZGFcblxuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IHRoaXMucGx1Z2luLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgLy8gUmVnaXN0cmFyIGV2ZW50byBmaWxlLW9wZW5cbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoZmlsZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyID0gbnVsbDtcbiAgICAgICAgLy8gTm8gbmVjZXNpdGFzIGRlc3VzY3JpYmlyIGVsIGV2ZW50byBhcXVcdTAwRUQgc2kgdXNhcyByZWdpc3RlckV2ZW50LCBPYnNpZGlhbiBsbyBtYW5lamEgYXV0b21cdTAwRTF0aWNhbWVudGUuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTdGF0dXNCYXIoZmlsZT86IFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gZmlsZSB8fCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFjdXJyZW50RmlsZSB8fCAhdGhpcy5zdGF0dXNCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyPy5zZXRUZXh0KCcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50RmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgW107XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnNldFRleHQoYWxpYXNlcy5sZW5ndGggPiAwID8gYEFsaWFzOiAke2FsaWFzZXNbMF19YCA6ICdObyBBbGlhcycpO1xuICAgIH1cbn1cbiIsICIvLyBNb2R1bG9SZWdpc3Ryb1RpZW1wby50c1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyUmliYm9uTWVudSwgZGVhY3RpdmF0ZVJpYmJvbk1lbnUgfSBmcm9tIFwiLi9yaWJib25NZW51XCI7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvUmVnaXN0cm9UaWVtcG8ge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCByaWJib24gc29sbyBzZSByZWdpc3RyZSBzaSBhXHUwMEZBbiBubyBoYSBzaWRvIHJlZ2lzdHJhZG9cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5yaWJib25CdXR0b25SVCkge1xuICAgICAgICAgICAgcmVnaXN0ZXJSaWJib25NZW51KHRoaXMucGx1Z2luKTtcbiAgICAgICAgfVxuICAgICAgICByZWdpc3RlckNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBkZWFjdGl2YXRlUmliYm9uTWVudSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTWVudSwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY3VtcGxlQ29uZGljaW9uIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIEVzdGUgZXMgZWwgXHUwMEVEY29ubyBkZWwgbWVuXHUwMEZBIGVuIGVsIHJpYmJvbiwgY2FtYmlhIFwiZGljZVwiIHBvciBlbCBcdTAwRURjb25vIHF1ZSBwcmVmaWVyYXNcbiAgICBcbiAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQgPSBwbHVnaW4uYWRkUmliYm9uSWNvbihcImNsb2NrXCIsIFwiUmVnaXN0cm8gZGUgVGllbXBvXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgZWwgbWVuXHUwMEZBIGFsIGhhY2VyIGNsaWMgZW4gZWwgXHUwMEVEY29ub1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUocGx1Z2luLmFwcCk7XG5cbiAgICAgICAgLy8gQWdyZWdhciBvcGNpb25lcyBhbCBtZW5cdTAwRkFcbiAgICAgICAgLy8gTGEgb3BjaVx1MDBGM24gYWhvcmEsIHNvbG8gc2UgYWN0aXZhIHNpIGhheSBhbGdcdTAwRkFuIHJlZ2lzdHJvIGRlIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzbi5cbiAgICAgICAgaWYgKGF3YWl0IGN1bXBsZUNvbmRpY2lvbihwbHVnaW4uYXBwKSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJBaG9yYVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFob3JhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3RyYXIgVGllbXBvXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlJlZ2lzdHJhciBUaWVtcG9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJhciBUaWVtcG9cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgLy8gTGEgb3BjaVx1MDBGM24gRGV0ZW5lciBSZWdpc3Rybywgc29sbyBzZSBhY3RpdmEgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gZGUgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuLlxuICAgICAgICBpZiAoYXdhaXQgY3VtcGxlQ29uZGljaW9uKHBsdWdpbi5hcHApKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkRldGVuZXIgUmVnaXN0cm9cIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJEZXRlbmVyIFJlZ2lzdHJvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGV0ZW5lciBSZWdpc3Ryb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlRhcmVhcyBlbiBwcm9ncmVzb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhcmVhcyBlbiBwcm9ncmVzb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJvcyBkZSBob3lcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiUmVnaXN0cm9zIGRlIGhveVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm9zIGRlIGhveVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTW9zdHJhciBlbCBtZW5cdTAwRkEgZW4gbGEgcG9zaWNpXHUwMEYzbiBkZWwgY3Vyc29yXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGlmIChwbHVnaW4ucmliYm9uQnV0dG9uUlQpIHtcbiAgICAgICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJULnJlbW92ZSgpO1xuICAgICAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQgPSBudWxsO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxcIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3VtcGxlQ29uZGljaW9uKGFwcDogQXBwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9SZWdpc3RybyBUaWVtcG9cIikpIHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgIFxuICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiB9XG5cblxuIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luKSB7XG4gICAgXG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8gcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4gU2UgZGVzY2FydGEgcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby5cIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb1xuICAgIFxuICAgIGxldCBtYXhJZCA9IDA7XG5cbiAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgXG4gICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBidXNjYXIgbG9zIElEcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgY29uc3QgbmV4dElkID0gbWF4SWQgKyAxO1xuXG4gICAgLy8gRm9ybWF0ZWFyIGxhIGZlY2hhIGFjdHVhbFxuICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSBmb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2byxcbiAgICAgICAgbm9tYnJlOiBhY3Rpdm8uYmFzZW5hbWUsXG4gICAgICAgIGZvbGRlcixcbiAgICAgICAgaW5kaWNlLFxuICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7aW5kaWNlfVwiYCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGNvbnN0IGRpYXMgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pXHUwMEU5cmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1NcdTAwRTFiYWRvJ107XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHRhcmVhc0FjdGl2YXMucHVzaCh7IGZpbGUsIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IG1vc3RyYXJTdWdlcmVuY2lhKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IGVzdFx1MDBFMSBjb3JyaWVuZG8uIFx1MDBCRkRlc2VhIGRldGVuZXJsYT9gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlc2VhRGV0ZW5lcikge1xuICAgICAgICAgICAgYXdhaXQgZGV0ZW5lclRhcmVhKHRhcmVhQWN0aXZhLCBhcHApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBzZWd1aXJcdTAwRTEgcmVnaXN0clx1MDBFMW5kb3NlLmApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID4gMSkge1xuICAgICAgICBuZXcgTm90aWNlKFwiSGF5IHVuIGVycm9yIGNvbiBsYSBjYW50aWRhZCBkZSB0YXJlYXMgY29ycmllbmRvIGVuIGVzdGUgbW9tZW50by5cIik7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gaGF5IG1cdTAwRTFzIHRhcmVhcyBjb3JyaWVuZG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtb3N0cmFyU3VnZXJlbmNpYShtZW5zYWplOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgbGV0IHNlbGVjY2lvbmFkbyA9IGZhbHNlOyAvLyBSYXN0cmVhIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG4gICAgICAgIG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6IG1lbnNhamUgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGJvdG9uZXNcbiAgICAgICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBTXHUwMEVEXG4gICAgICAgIGNvbnN0IHllc0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdTXHUwMEVEJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjY2lvbmFkbyA9IHRydWU7IC8vIEFjdHVhbGl6YSBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBOb1xuICAgICAgICBjb25zdCBub0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdObycsXG4gICAgICAgIH0pO1xuICAgICAgICBub0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjY2lvbmFkbyA9IHRydWU7IC8vIEFjdHVhbGl6YSBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjY2lvbmFkbykge1xuICAgICAgICAgICAgICAgIC8vIFNpIHNlIGNpZXJyYSBlbCBtb2RhbCBzaW4gaGFjZXIgdW5hIHNlbGVjY2lcdTAwRjNuLCByZXN1ZWx2ZSBjb24gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9KTtcbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAgIGNvbnN0IHRvdFRhcmVhcyA9IGF3YWl0IGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwKTsgLy8gUGFzbyBgYXBwYCBjb21vIGFyZ3VtZW50b1xuICAgIGxldCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbjtcbiAgICBpZiAodG90VGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbcmVnaXN0cm8ubm9tYnJlLCBcIkFsZ3VuYSB0YXJlYSBlbiBFamVjdWNpXHUwMEYzblwiLCBcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIk90cm9cIl07XG4gICAgfVxuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJcdTAwQkZTb2JyZSBxdVx1MDBFOSBlcyBlbCByZWdpc3RybyBkZSB0aWVtcG8/XCI7XG4gICAgXG4gICAgY29uc3QgbW9kYWxNZW51MSA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIG9wY2lvbmVzVGl0dWxvLCB2YWxvcmVzT3BjaW9uLCBwbGFjZWhvbGRlcik7XG4gICAgXG4gICAgLy8gRXNwZXJhIGFzaW5jclx1MDBGM25pY2FtZW50ZSBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhbnRlcyBkZSBjb250aW51YXIuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgbW9kYWxNZW51MS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgcmVnaXN0cm8udGlwb1JlZ2lzdHJvID0gc2VsZWN0aW9uO1xuICAgICAgICAvLyBQcm9jZXNhciBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhcXVcdTAwRUQuXG4gICAgICAgIC8vIEVsIGNcdTAwRjNkaWdvIHN1YnNpZ3VpZW50ZSBkZXBlbmRlIGRlbCB0aXBvIGRlIHJlZ2lzdHJvIHNlbGVjY2lvbmFkby5cbiAgICAgICAgc3dpdGNoKHJlZ2lzdHJvLnRpcG9SZWdpc3Rybykge1xuICAgICAgICAgICAgY2FzZSBcIk5vdGFcIjpcbiAgICAgICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSByZWdpc3Ryby5ub21icmU7IC8vIEVsIHRcdTAwRUR0dWxvIGVzIGVsIG5vbWJyZSBkZSBsYSBub3RhIGFjdHVhbC5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVGFyZWFcIjpcbiAgICAgICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICAgICAgYXdhaXQgZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwLCByZWdpc3RybywgdG90VGFyZWFzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gcmVnaXN0cm8udGl0dWxvRGVmaW5pZG8gIT09IFwiT3Ryb1wiOyAvLyBBc3VtZSBxdWUgc2kgbm8gZXMgXCJPdHJvXCIsIGVzIHVuIGFzdW50byBlc3BlY1x1MDBFRGZpY28uXG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgYWRpY2lvbmFsIHBhcmEgbWFuZWphciBcIk90cm9cIiBvIGNhc29zIG5vIGVzcGVjaWZpY2Fkb3MuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAvLyBNYW5lam8gZGUgZXJyb3JlcyBvIGNpZXJyZSBkZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuLlxuICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIGVzdGFibGVjZXIgdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gcGFyYSByZWdpc3Ryby5kZXRlbmVyIGFxdVx1MDBFRC5cbiAgICB9XG59XG5cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGxldCB0YXJlYXNQZW5kaWVudGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGFyY2hpdm9zUmVsZXZhbnRlcyA9IGFyY2hpdm9zLmZpbHRlcihhcmNoaXZvID0+ICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpKTtcbiAgICBcbiAgICAgICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zUmVsZXZhbnRlcykge1xuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICAgICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gY29udGVuaWRvLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi9nbSkgfHwgW107XG4gICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyBlc3BhY2lvcyBhbCBpbmljaW8gZGUgY2FkYSBjb2luY2lkZW5jaWEgYW50ZXMgZGUgYWdyZWdhcmxhIGFsIGFycmVnbG9cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc0xpbXBpYXMgPSBjb2luY2lkZW5jaWFzLm1hcCh0YXJlYSA9PiB0YXJlYS50cmltKCkpO1xuICAgICAgICAgICAgdGFyZWFzUGVuZGllbnRlcyA9IHRhcmVhc1BlbmRpZW50ZXMuY29uY2F0KHRhcmVhc0xpbXBpYXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJlYXNQZW5kaWVudGVzO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcDogQXBwLCByZWdpc3RybzogYW55LCB0YXJlYXNQZW5kaWVudGVzOiBzdHJpbmdbXSkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIkVsaWdlIGxhIHRhcmVhIHF1ZSB2YXMgYSByZWdpc3RyYXIuXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgdW4gYXJyZWdsbyBkZSBwcm9tZXNhcyB1c2FuZG8gbWFwIHBhcmEgcGFzYXIgY2FkYSB0YXJlYSBwb3IgbGltcGlhclRleHRvVGFyZWFcbiAgICAgICAgbGV0IHByb21lc2FzTGltcGlhcyA9IHRhcmVhc1BlbmRpZW50ZXMubWFwKHRhcmVhID0+IGxpbXBpYXJUZXh0b1RhcmVhKHRhcmVhKSk7XG5cbiAgICAgICAgLy8gVXNhciBQcm9taXNlLmFsbCBwYXJhIGVzcGVyYXIgYSBxdWUgdG9kYXMgbGFzIHRhcmVhcyBzZWFuIHByb2Nlc2FkYXNcbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWVzYXNMaW1waWFzKS50aGVuKHRhcmVhc0xpbXBpYXMgPT4ge1xuICAgICAgICAgICAgLy8gRW4gZXN0ZSBwdW50bywgdGFyZWFzTGltcGlhcyBlcyB1biBhcnJlZ2xvIGNvbiB0b2RhcyBsYXMgdGFyZWFzIGRlc3B1XHUwMEU5cyBkZSBzZXIgbGltcGlhZGFzXG4gICAgICAgICAgICAvLyBBaG9yYSBwdWVkZXMgdXNhciB0YXJlYXNMaW1waWFzIGVuIG90cmEgZnVuY2lcdTAwRjNuXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsTWVudSA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIHRhcmVhc0xpbXBpYXMsIHRhcmVhc0xpbXBpYXMsIHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIG1vZGFsTWVudS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKS50aGVuKHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSBsaW1waWFyVGV4dG9UYXJlYSAoc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZShzZWxlY3Rpb24pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgLy8gTWFuZWphciBwb3NpYmxlcyBlcnJvcmVzXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSHVibyB1biBlcnJvciBhbCBsaW1waWFyIGxhcyB0YXJlYXM6XCIsIGVycm9yKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaW1waWFyVGV4dG9UYXJlYSh0aXR1bG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIC8vIEVsaW1pbmEgdG9kbyBkZXNwdVx1MDBFOXMgZGVsIHByaW1lciBzYWx0byBkZSBsXHUwMEVEbmVhLlxuICAgICAgICAgICAgbGV0IHRleHRvTGltcGlvID0gdGl0dWxvLnNwbGl0KCdcXG4nKVswXTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyB0YWdzIGRlIGVzdGlsbyBNYXJrZG93bi5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvI1tcXHctL10rL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyBjYW1wb3MgZGUgZXN0aWxvIERhdGF2aWV3LlxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtcXHcrOjpbXlxcXV0rXFxdL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGVsIHBhdHJcdTAwRjNuIFwiIC0gWy9dXCIgYWwgaW5pY2lvIGRlIGxhIGNhZGVuYSwgaW5jbHV5ZW5kbyBwb3NpYmxlcyBlc3BhY2lvcyBhbnRlcyBvIGRlc3B1XHUwMEU5cy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby4gICAgXG4gICAgICAgICAgICBjb25zdCBjYXJhY3RlcmVzTm9QZXJtaXRpZG9zID0gL1s8PjpcIlxcL1xcXFx8PypcXHgwMC1cXHgxRl0vZztcbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZShjYXJhY3RlcmVzTm9QZXJtaXRpZG9zLCAnXycpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YSBlc3BhY2lvcyBtXHUwMEZBbHRpcGxlcyBwb3IgdW4gXHUwMEZBbmljbyBlc3BhY2lvIHBhcmEgZXZpdGFyIG5vbWJyZXMgZGUgYXJjaGl2byBleGNlc2l2YW1lbnRlIGxhcmdvcy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJldG9ybmEgZWwgdGV4dG8gbGltcGlvLCBhaG9yYSBlbnZ1ZWx0byBlbiB1bmEgcHJvbWVzYS5cbiAgICAgICAgICAgIHJlc29sdmUodGV4dG9MaW1waW8udHJpbSgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgICAgICBcblxuYXN5bmMgZnVuY3Rpb24gZGV0ZW5lclRhcmVhKHRhcmVhQWN0aXZhOiB7IGZpbGU6IFRGaWxlOyB0aXR1bG86IHN0cmluZyB9LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgbGEgbFx1MDBGM2dpY2EgcGFyYSBtYXJjYXIgbGEgdGFyZWEgY29tbyBubyBhY3RpdmEsIHByb2JhYmxlbWVudGUgYWN0dWFsaXphbmRvIHN1IGZyb250bWF0dGVyXG4gICAgY29uc29sZS5sb2coYERldGVuaWVuZG8gbGEgdGFyZWE6ICR7dGFyZWFBY3RpdmEudGl0dWxvfWApO1xuICAgIC8vIEVqZW1wbG8gZGUgY1x1MDBGM21vIHNlIHBvZHJcdTAwRURhIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgcGFyYSBkZXRlbmVyIGxhIHRhcmVhXG4gICAgLy8gRXN0YSBlcyB1bmEgc2ltcGxpZmljYWNpXHUwMEYzbjsgbGEgaW1wbGVtZW50YWNpXHUwMEYzbiByZWFsIGRlcGVuZGVyXHUwMEVEYSBkZSBjXHUwMEYzbW8gZXN0XHUwMEU5cyBtYW5lamFuZG8gZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvXG4gICAgY29uc3QgZmlsZUNvbnRlbnRzID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQodGFyZWFBY3RpdmEuZmlsZSk7XG4gICAgY29uc3QgbmV3Q29udGVudHMgPSBmaWxlQ29udGVudHMucmVwbGFjZSgnZXN0YWRvOiBcdUQ4M0RcdURGRTInLCAnZXN0YWRvOiBcdUQ4M0RcdUREMzUnKTsgLy8gQ2FtYmlhciBhIGVzdGFkbyBubyBhY3Rpdm9cbiAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KHRhcmVhQWN0aXZhLmZpbGUsIG5ld0NvbnRlbnRzKTtcbn1cblxuXG5cblxuXG5cbiBcbiIsICIvLyBJbXBvcnRhY2lcdTAwRjNuIGRlIGNsYXNlcyBuZWNlc2FyaWFzIGRlc2RlIGxhIGxpYnJlclx1MDBFRGEgZGUgT2JzaWRpYW4uXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIERlZmluaWNpXHUwMEYzbiBkZSBsYSBjbGFzZSBTZWxlY2Npb25Nb2RhbCBxdWUgZXh0aWVuZGUgZGUgRnV6enlTdWdnZXN0TW9kYWwgcGFyYSBtYW5lamFyIHNlbGVjY2lvbmVzIGRlIHN0cmluZ3MuXG5leHBvcnQgY2xhc3MgU2VsZWNjaW9uTW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcbiAgICB0aXRsZXM6IHN0cmluZ1tdOyAvLyBBcnJheSBkZSB0XHUwMEVEdHVsb3MgcGFyYSBsYXMgb3BjaW9uZXMgZGVsIG1vZGFsLlxuICAgIHZhbHVlczogc3RyaW5nW107IC8vIEFycmF5IGRlIHZhbG9yZXMgYXNvY2lhZG9zIGEgY2FkYSB0XHUwMEVEdHVsby5cbiAgICB2YWx1ZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPjsgLy8gT2JqZXRvIHBhcmEgbWFwZWFyIHRcdTAwRUR0dWxvcyBhIHZhbG9yZXMuXG4gICAgcHJpdmF0ZSBzZWxlY2Npb25IZWNoYTogYm9vbGVhbiA9IGZhbHNlOyAvLyBGbGFnIHBhcmEgZGV0ZXJtaW5hciBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24uXG5cbiAgICAvLyBDb25zdHJ1Y3RvciBkZSBsYSBjbGFzZS5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGVzOiBzdHJpbmdbXSwgdmFsdWVzOiBzdHJpbmdbXSwgcGxhY2Vob2xkZXI6IHN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApOyAvLyBMbGFtYWRhIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIGJhc2UgY29uIGxhIGluc3RhbmNpYSBkZSBBcHAgZGUgT2JzaWRpYW4uXG4gICAgICAgIHRoaXMudGl0bGVzID0gdGl0bGVzOyAvLyBJbmljaWFsaXphY2lcdTAwRjNuIGRlbCBhcnJheSBkZSB0XHUwMEVEdHVsb3MuXG4gICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzOyAvLyBJbmljaWFsaXphY2lcdTAwRjNuIGRlbCBhcnJheSBkZSB2YWxvcmVzLlxuICAgICAgICAvLyBDcmVhY2lcdTAwRjNuIGRlbCBtYXBlbyBkZSB0XHUwMEVEdHVsb3MgYSB2YWxvcmVzLlxuICAgICAgICB0aGlzLnZhbHVlTWFwID0gdGl0bGVzLnJlZHVjZSgoYWNjLCB0aXRsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGFjY1t0aXRsZV0gPSB2YWx1ZXNbaW5kZXhdO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30pO1xuICAgICAgICB0aGlzLnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKTsgLy8gRXN0YWJsZWNpbWllbnRvIGRlbCB0ZXh0byBkZSBwbGFjZWhvbGRlciBwYXJhIGVsIGNhbXBvIGRlIGJcdTAwRkFzcXVlZGEgZW4gZWwgbW9kYWwuXG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIGxvcyBcdTAwRUR0ZW1zICh0XHUwMEVEdHVsb3MpIHF1ZSBzZSBtb3N0cmFyXHUwMEUxbiBlbiBlbCBtb2RhbC5cbiAgICBnZXRJdGVtcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpdGxlcztcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgZWwgdGV4dG8gcXVlIHNlIG1vc3RyYXJcdTAwRTEgcGFyYSBjYWRhIFx1MDBFRHRlbSBlbiBlbCBtb2RhbC5cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBxdWUgc2UgbGxhbWEgYWwgY2VycmFyIGVsIG1vZGFsLlxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIC8vIFNpIGVsIG1vZGFsIHNlIGNpZXJyYSBzaW4gcXVlIHNlIGhheWEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLCBzZSByZWNoYXphIGxhIHByb21lc2EuXG4gICAgICAgIGlmICghdGhpcy5zZWxlY2Npb25IZWNoYSkge1xuICAgICAgICAgICAgdGhpcy5yZWplY3QobmV3IEVycm9yKCdNb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbicpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbWFuZWphciBsYSBzZWxlY2NpXHUwMEYzbiBkZSB1biBcdTAwRUR0ZW0uXG4gICAgc2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWxlY2Npb25IZWNoYSA9IHRydWU7IC8vIE1hcmNhciBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLlxuICAgICAgICBzdXBlci5zZWxlY3RTdWdnZXN0aW9uKGl0ZW0sIGV2dCk7IC8vIExsYW1hciBhbCBtXHUwMEU5dG9kbyBjb3JyZXNwb25kaWVudGUgZGUgbGEgY2xhc2UgYmFzZSBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24uXG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcXVlIHNlIGxsYW1hIGFsIGVsZWdpciB1biBcdTAwRUR0ZW0sIGRvbmRlIHNlIHJlc3VlbHZlIGxhIHByb21lc2EgY29uIGVsIHZhbG9yIGFzb2NpYWRvIGFsIFx1MDBFRHRlbSBzZWxlY2Npb25hZG8uXG4gICAgb25DaG9vc2VJdGVtKGl0ZW06IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWVNYXBbaXRlbV07IC8vIE9idGVuZXIgZWwgdmFsb3IgYXNvY2lhZG8gYWwgXHUwMEVEdGVtIHNlbGVjY2lvbmFkby5cbiAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTsgLy8gUmVzb2x2ZXIgbGEgcHJvbWVzYSBjb24gZWwgdmFsb3Igc2VsZWNjaW9uYWRvLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWJyaXIgZWwgbW9kYWwgeSBlc3BlcmFyIGEgcXVlIGVsIHVzdWFyaW8gaGFnYSB1bmEgc2VsZWNjaVx1MDBGM24sIGRldm9sdmllbmRvIHVuYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBzZWxlY2Npb25hZG8uXG4gICAgb3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7IC8vIEd1YXJkYXIgbGEgZnVuY2lcdTAwRjNuIHJlc29sdmUgZGUgbGEgcHJvbWVzYSBwYXJhIHVzYXJsYSBhbCBzZWxlY2Npb25hciB1biBcdTAwRUR0ZW0uXG4gICAgICAgICAgICB0aGlzLnJlamVjdCA9IHJlamVjdDsgLy8gR3VhcmRhciBsYSBmdW5jaVx1MDBGM24gcmVqZWN0IGRlIGxhIHByb21lc2EgcGFyYSB1c2FybGEgc2kgc2UgY2llcnJhIGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgICAgIHRoaXMub3BlbigpOyAvLyBBYnJpciBlbCBtb2RhbC5cbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgTW9kYWwsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zLCBjcmVhck9iamV0b1JlZ2lzdHJvLCB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzLCBkZWZpbmlyVGlwb1JlZ2lzdHJvLCBjcmVhdGVOb3RlRnJvbVRlbXBsYXRlIH0gZnJvbSBcIi4vdXRpbHNcIlxuaW1wb3J0IHttb2RhbF9BaG9yYX0gZnJvbSBcIi4vbW9kYWxzL21vZGFsX0Fob3JhXCJcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBjb25zdCBpZDEgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcInJlZ2lzdHJvcy1kZS10aWVtcG8tZGVsLWRpYVwiLFxuICAgICAgICBuYW1lOiBcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIsXG4gICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgICAgICAgICBpZiAoYWN0aXZlTGVhZikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3LmZpbGU/LnBhdGggfHwgXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZVBhdGguc3RhcnRzV2l0aChcIkVzdHJ1Y3R1cmEvUGVyaW9kb3MvRGlhcmlvL1wiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIGRlbCBjb21hbmRvXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsIGRcdTAwRURhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cblxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQxLmlkKTtcblxuICAgIGNvbnN0IGlkMiA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiYWhvcmEtUmVnaXN0cm9UaWVtcG9cIixcbiAgICAgICAgbmFtZTogXCJUYXJlYSBhY3RpdmEgZW4gcmVnaXN0cm8gZGUgdGllbXBvXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmEgPSBhd2FpdCBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKHBsdWdpbi5hcHApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIWFjdGl2YSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgbm90YXMgYWN0aXZhc1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYSB5IG11ZXN0cmEgZWwgbW9kYWwgcGVyc29uYWxpemFkbyBjb24gbGEgbm90YSBhY3RpdmFcbiAgICAgICAgICAgICAgICBsZXQgbW9kYWwgPSBuZXcgbW9kYWxfQWhvcmEocGx1Z2luLmFwcCwgYWN0aXZhKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQyLmlkKTtcbiAgICBcbiAgICBjb25zdCBpZDMgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLXJlZ2lzdHJvLXRpZW1wb1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIFJlZ2lzdHJvIGRlIFRpZW1wb1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbik7XG4gICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZWdpc3Rybykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgcGx1Z2luLmFwcClcbiAgICAgICAgICAgIGF3YWl0IGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm8scGx1Z2luLmFwcClcbiAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgc2UgdGllbmUgdW5hIGZ1bmNpXHUwMEYzbiBvIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgZWwgb2JqZXRvIGByZWdpc3Ryb2BcbiAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYSBzZXIgY3JlYXIgdW5hIG51ZXZhIG5vdGEgY29uIGxhIGluZm9ybWFjaVx1MDBGM24gZGUgYHJlZ2lzdHJvYFxuICAgICAgICAgICAgXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQzLmlkKTtcblxufVxuXG5cbi8vIEVzdGEgcGFydGUgZGVsIGNcdTAwRjNkaWdvIHNlclx1MDBFRGEgaGlwb3RcdTAwRTl0aWNhIHkgZGVwZW5kZSBkZSBjXHUwMEYzbW8gZ2VzdGlvbmFzIGVsIGVzdGFkbyB5IGVsIGNpY2xvIGRlIHZpZGEgZGUgbG9zIGNvbWFuZG9zIGVuIHR1IHBsdWdpbi5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JUKSByZXR1cm47XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gcG9kclx1MDBFRGFzIG1hbmVqYXIgbGEgXCJkZXNhY3RpdmFjaVx1MDBGM25cIiBkZSBjb21hbmRvcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBtb2RhbF9BaG9yYSBleHRlbmRzIE1vZGFsIHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBhcHA6IEFwcDtcbiAgICBob3JhSW5pY2lvSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFwiQWN0aXZpZGFkIHNpbiBhbGlhc1wiO1xuICAgICAgICAvLyBDb252ZXJ0aXIgaG9yYUluaWNpb1N0ciBhIGZvcm1hdG8gXCJZWVlZLU1NLUREVEhIOk1NXCIgcGFyYSBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb25zdCBob3JhSW5pY2lvU3RyID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5ob3JhSW5pY2lvID8gd2luZG93Lm1vbWVudChtZXRhZGF0YS5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpIDogJyc7XG5cbiAgICAgICAgLy8gQ29uZmlndXJhIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbCB5IG11ZXN0cmEgZWwgYWxpYXMgZGUgbGEgdGFyZWFcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlZ2lzdHJvIGRlIGFjdGl2aWRhZC5gIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUYXJlYTogXCIke2FsaWFzZXN9XCJgIH0pO1xuICAgICAgICBpZiAoaG9yYUluaWNpb1N0cikge1xuICAgICAgICAgICAgLy8gVXNhciBtb21lbnQgcGFyYSBwYXJzZWFyIGxhIGZlY2hhIGRlIGluaWNpbyB5IGNhbGN1bGFyIGxhIGRpZmVyZW5jaWFcbiAgICAgICAgICAgIGNvbnN0IGhvcmFJbmljaW8gPSB3aW5kb3cubW9tZW50KGhvcmFJbmljaW9TdHIsIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuICAgICAgICAgICAgY29uc3QgYWhvcmEgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gYWhvcmEuZGlmZihob3JhSW5pY2lvKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cmFjaW9uID0gd2luZG93Lm1vbWVudC5kdXJhdGlvbihkaWZmKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZGb3JtYXR0ZWQgPSBgJHtkdXJhY2lvbi5ob3VycygpfWggJHtkdXJhY2lvbi5taW51dGVzKCl9bWA7XG5cbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYEVzdGEgYWN0aXZpZGFkIGxsZXZhICR7ZGlmZkZvcm1hdHRlZH0gZW4gZWplY3VjaVx1MDBGM24uYCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogXCJObyBzZSBwdWRvIGRldGVybWluYXIgZWwgdGllbXBvIGRlIGluaWNpbyBkZSBsYSBhY3RpdmlkYWQuXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5wdXQgcGFyYSBsYSBob3JhIGRlIGluaWNpbyBjb24gdGlwbyBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdIb3JhIGRlIGluaWNpbzonIH0pO1xuICAgICAgICB0aGlzLmhvcmFJbmljaW9JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUtbG9jYWwnLFxuICAgICAgICAgICAgdmFsdWU6IGhvcmFJbmljaW9TdHJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGd1YXJkYXIgY2FtYmlvc1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHdWFyZGFyIGNhbWJpb3MnIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmd1YXJkYXJDYW1iaW9zKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ3VhcmRhckNhbWJpb3MoKSB7XG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUluaWNpb0xvY2FsID0gdGhpcy5ob3JhSW5pY2lvSW5wdXQudmFsdWU7XG4gICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBsYSBudWV2YSBob3JhIHRpZW5lIHZhbG9yIGFudGVzIGRlIGludGVudGFyIGZvcm1hdGVhclxuICAgICAgICBpZiAoIW51ZXZhSG9yYUluaWNpb0xvY2FsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBob3JhIGRlIGluaWNpby5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0aXIgZGUgXCJZWVlZLU1NLUREVEhIOk1NXCIgYSBcIllZWVktTU0tREQgZGRkZCBISDptbVwiXG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUluaWNpbyA9IHdpbmRvdy5tb21lbnQobnVldmFIb3JhSW5pY2lvTG9jYWwpLmZvcm1hdChcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTGVlciBlbCBjb250ZW5pZG8gYWN0dWFsIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG9PcmlnaW5hbCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5maWxlKTtcbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YXIgbGEgbFx1MDBFRG5lYSBkZSBob3JhSW5pY2lvIGNvbiBlbCBudWV2byB2YWxvciBmb3JtYXRlYWRvXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG9BY3R1YWxpemFkbyA9IGNvbnRlbmlkb09yaWdpbmFsLnJlcGxhY2UoLyhob3JhSW5pY2lvOiApLiovLCBgJDEke251ZXZhSG9yYUluaWNpb31gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR3VhcmRhciBsb3MgY2FtYmlvcyBlbiBlbCBhcmNoaXZvXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGhpcy5maWxlLCBjb250ZW5pZG9BY3R1YWxpemFkbyk7XG5cbiAgICAgICAgICAgIC8vIENlcnJhciBlbCBtb2RhbCBkZXNwdVx1MDBFOXMgZGUgZ3VhcmRhciBsb3MgY2FtYmlvc1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhvcmEgZGUgaW5pY2lvIGFjdHVhbGl6YWRhIGNvcnJlY3RhbWVudGUuXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGd1YXJkYXIgY2FtYmlvcyBlbiBsYSBub3RhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgYWwgZ3VhcmRhciBsb3MgY2FtYmlvcyBlbiBsYSBub3RhLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvLyBzcmMvZGVmYXVsdHMvZGVmYXVsdFNldHRpbmdzLnRzXG5pbXBvcnQgeyBQbHVnaW5NYWluU2V0dGluZ3MgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BsdWdpbk1haW5TZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5NYWluU2V0dGluZ3MgPSB7XG4gIG1vZHVsb1JlZ2lzdHJvVGllbXBvOiB0cnVlLFxuICBtb2R1bG9BbGlhc1N0YXR1c0JhcjogdHJ1ZSxcbiAgbW9kdWxvQmFzZTogdHJ1ZSxcbiAgZmlsZV9jYW1wb3NDZW50cmFsIDpcIkVzdHJ1Y3R1cmEvQ2FtcG9zIFNpc3RlbWEgR2VzdGlvbi9DYW1wb3MgU2lzdGVtYSBDZW50cmFsXCIsIFxuICBmb2xkZXJfQW5vdGFjaW9uZXM6IFwiQW5vdGFjaW9uZXMvTm90YXNcIixcbiAgaW5kaWNlX0Fub3RhY2lvbmVzOiBcIkFub3RhY2lvbmVzL0luZGljZSBBbm90YWNpb25lc1wiLFxuICBmb2xkZXJfQUJsb2c6IFwiU3Vic2lzdGVtYXMvQXJ0aWN1bG9zIEJsb2cvQXJ0aWN1bG9zXCIsXG4gIGluZGljZV9BQmxvZzogXCJTdWJzaXN0ZW1hcy9BcnRpY3Vsb3MgQmxvZy9JbmRpY2UgQXJ0aWN1bG9zIEJsb2dcIixcbiAgZm9sZGVyX0Rlc2Fycm9sbG9zOiBcIlN1YnNpc3RlbWFzL0Rlc2Fycm9sbG9zL0NvZGlnb3NcIixcbiAgaW5kaWNlX0Rlc2Fycm9sbG9zOiBcIlN1YnNpc3RlbWFzL0Rlc2Fycm9sbG9zL0luZGljZSBEZXNhcnJvbGxvXCIsXG4gIGZvbGRlcl9Fc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0VzdHVkaW8vVGVtYXNcIixcbiAgaW5kaWNlX0VzdHVkaW86IFwiU3Vic2lzdGVtYXMvRXN0dWRpby9JbmRpY2UgRXN0dWRpb1wiLFxuICBmb2xkZXJfUHJveWVjdG9zR1REOiBcIlN1YnNpc3RlbWFzL0dURC9Qcm95ZWN0b3MgR1REL1Byb3llY3Rvc1wiLFxuICBpbmRpY2VfUHJveWVjdG9zR1REOiBcIlN1YnNpc3RlbWFzL0dURC9Qcm95ZWN0b3MgR1REL0luZGljZSBQcm95ZWN0b3MgR1REXCIsXG4gIGZvbGRlcl9SU0dURDogXCJTdWJzaXN0ZW1hcy9HVEQvUmV2aXNpb24gU2VtYW5hbC9SZXZpc2lvbmVzXCIsXG4gIGluZGljZV9SU0dURDogXCJTdWJzaXN0ZW1hcy9HVEQvUmV2aXNpb24gU2VtYW5hbC9JbmRpY2UgUmV2aXNpb24gU2VtYW5hbFwiLFxuICBmb2xkZXJfTGVjdHVyYVNlc2lvbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvU2VzaW9uZXMgZGUgTGVjdHVyYS9TZXNpb25lc1wiLFxuICBpbmRpY2VfTGVjdHVyYVNlc2lvbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvU2VzaW9uZXMgZGUgTGVjdHVyYS9JbmRpY2UgU2VzaW9uZXMgTGVjdHVyYVwiLFxuICBmb2xkZXJfTGVjdHVyYVJlc3VtZW5lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL0xpYnJvcy9SZXN1bWVuZXNcIixcbiAgaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9MaWJyb3MvSW5kaWNlIFJlc3VtZW5lc1wiLFxuICBmb2xkZXJfTWVudG9yaWFzOiBcIlN1YnNpc3RlbWFzL01lbnRvcmlhcy9TZXNpb25lcyBNZW50b3JpYVwiLFxuICBpbmRpY2VfTWVudG9yaWFzOiBcIlN1YnNpc3RlbWFzL01lbnRvcmlhcy9JbmRpY2UgTWVudG9yaWFzXCIsXG4gIGZvbGRlcl9NZXJjYWRvOiBcIlN1YnNpc3RlbWFzL01lcmNhZG8vTGlzdGFzXCIsXG4gIGluZGljZV9NZXJjYWRvOiBcIlN1YnNpc3RlbWFzL01lcmNhZG8vSW5kaWNlIE1lcmNhZG9cIixcbiAgZm9sZGVyX01vZHVsb3NTaXN0ZW1hOiBcIlN1YnNpc3RlbWFzL01vZHVsb3MgU2lzdGVtYSBHZXN0aW9uL01vZHVsb3NcIixcbiAgaW5kaWNlX01vZHVsb3NTaXN0ZW1hOiBcIlN1YnNpc3RlbWFzL01vZHVsb3MgU2lzdGVtYSBHZXN0aW9uL0luZGljZSBNb2R1bG9zXCIsXG4gIGZvbGRlcl9QYWdvczogXCJTdWJzaXN0ZW1hcy9QYWdvcy9Ob3Rhc1wiLFxuICBpbmRpY2VfUGFnb3M6IFwiU3Vic2lzdGVtYXMvUGFnb3MvSW5kaWNlIFBhZ29zXCIsXG4gIGZvbGRlcl9QcmVzZW50YWNpb25lczogXCJTdWJzaXN0ZW1hcy9QcmVzZW50YWNpb25lcy9Ob3Rhc1wiLFxuICBpbmRpY2VfUHJlc2VudGFjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHJlc2VudGFjaW9uZXMvSW5kaWNlIFByZXNlbnRhY2lvbmVzXCIsXG4gIGZvbGRlcl9Qcm95ZWN0b3NROiBcIlN1YnNpc3RlbWFzL1Byb3llY3RvcyBkZSBRL1Byb3llY3Rvc1wiLFxuICBpbmRpY2VfUHJveWVjdG9zUTogXCJTdWJzaXN0ZW1hcy9Qcm95ZWN0b3MgZGUgUS9JbmRpY2UgUHJveWVjdG9zIGRlIFFcIixcbiAgZm9sZGVyX1B1YmxpY2FjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHVibGljYWNpb25lcy9QaWV6YXNcIixcbiAgaW5kaWNlX1B1YmxpY2FjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHVibGljYWNpb25lcy9JbmRpY2UgUHVibGljYWNpb25lc1wiLFxuICBmb2xkZXJfUmVjZXRhczogXCJTdWJzaXN0ZW1hcy9SZWNldGFzL1JlY2V0YXNcIixcbiAgaW5kaWNlX1JlY2V0YXM6IFwiU3Vic2lzdGVtYXMvUmVjZXRhcy9JbmRpY2UgUmVjZXRhc1wiLFxuICBmb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlczogXCJTdWJzaXN0ZW1hcy9SZWN1cnNvcyBSZWN1cnJlbnRlcy9SZWN1cnNvc1wiLFxuICBpbmRpY2VfUmVjdXJzb3NSZWN1cnJlbnRlczogXCJTdWJzaXN0ZW1hcy9SZWN1cnNvcyBSZWN1cnJlbnRlcy9JbmRpY2UgUmVjdXJzb3MgUmVjdXJyZW50ZXNcIixcbiAgZm9sZGVyX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9SZWdpc3Ryb3NcIixcbiAgaW5kaWNlX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9JbmRpY2UgUmVnaXN0cm8gVGllbXBvXCIsXG4gIC8vIEVzdHJ1Y3R1cmFcbiAgZm9sZGVyX0FyZWFzVmlkYTogXCJFc3RydWN0dXJhL0FyZWFzIGRlIFZpZGFcIixcbiAgaW5kaWNlX0FyZWFzVmlkYTogXCJFc3RydWN0dXJhL0FyZWFzIGRlIFZpZGEvSW5kaWNlIEFyZWFzIGRlIFZpZGFcIixcbiAgbmFtZUZpbGVfQXJlYXNWaWRhIDogXCJpbmRleEFWXCIsXG4gIGZvbGRlcl9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzL0luZGljZSBBcmVhcyBkZSBJbnRlcmVzXCIsXG4gIG5hbWVGaWxlX0FyZWFzSW50ZXJlczogXCJpbmRleEFJXCIsXG4gIGZvbGRlcl9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzL0luZGljZSBUZW1hcyBkZSBJbnRlcmVzXCIsXG59O1xuXG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcbmltcG9ydCB7bWVudU90cm99IGZyb20gJy4vbWVudU90cm8nXG5cbmV4cG9ydCBjbGFzcyB1dGlsc0FQSSB7XG4gICAgcHJpdmF0ZSBtZW51T3RybzogbWVudU90cm87XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW4pIHtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy5tZW51T3RybyA9IG5ldyBtZW51T3RybyhwbHVnaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgXG4gICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiAgICB9XG5cbiAvLyBTdXBvbmVtb3MgcXVlIGVzdGEgZnVuY2lcdTAwRjNuIHNlIHViaWNhclx1MDBFMSBlbiBhbGdcdTAwRkFuIGx1Z2FyIGRvbmRlIHB1ZWRhIGFjY2VkZXIgYSBgYXBwYCBkZSBPYnNpZGlhbi5cbiAgICBhc3luYyBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbikge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2bykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIGhheSB1biBhcmNoaXZvIGFjdGl2byBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLiBTZSBkZXNjYXJ0YSBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgICAgIGNvbnN0IGluZGljZSA9IHBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVnaXN0cm9UaWVtcG9cbiAgICAgICAgXG4gICAgICAgIGxldCBtYXhJZCA9IDA7XG5cbiAgICAgICAgLy8gT2J0XHUwMEU5biB0b2RvcyBsb3MgYXJjaGl2b3MgTWFya2Rvd25cbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgSURzIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcblxuICAgICAgICAvLyBGb3JtYXRlYXIgbGEgZmVjaGEgYWN0dWFsXG4gICAgICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3Rpdm8sXG4gICAgICAgICAgICBub21icmU6IGFjdGl2by5iYXNlbmFtZSxcbiAgICAgICAgICAgIGZvbGRlcixcbiAgICAgICAgICAgIGluZGljZSxcbiAgICAgICAgICAgIGlkOiBuZXh0SWQsXG4gICAgICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgICAgIGluZGljZV9EVkpTOiBgXCIke2luZGljZX1cImAsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgICAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZGlhcyA9IFsnRG9taW5nbycsICdMdW5lcycsICdNYXJ0ZXMnLCAnTWlcdTAwRTlyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU1x1MDBFMWJhZG8nXTtcbiAgICAgICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gICAgfVxuXG4gICAgYXN5bmMgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHJlZ2lzdHJvLmZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZWFzQWN0aXZhcy5wdXNoKHsgZmlsZSwgYWxpYXNlczogbWV0YWRhdGEuYWxpYXNlcyB8fCBmaWxlLmJhc2VuYW1lIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFBY3RpdmEgPSB0YXJlYXNBY3RpdmFzWzBdO1xuICAgICAgICAgICAgY29uc3QgZGVzZWFEZXRlbmVyID0gYXdhaXQgdGhpcy5tb3N0cmFyU3VnZXJlbmNpYShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBlc3RcdTAwRTEgY29ycmllbmRvLiBcdTAwQkZEZXNlYSBkZXRlbmVybGE/YCk7XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgaWYgKGRlc2VhRGV0ZW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGVzZWFEZXRlbmVyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5kZXRlbmVyVGFyZWEodGFyZWFBY3RpdmEsIGFwcCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IHNlZ3Vpclx1MDBFMSByZWdpc3RyXHUwMEUxbmRvc2UuYCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCIpO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1vc3RyYXJTdWdlcmVuY2lhKG1lbnNhamU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IHNlbGVjY2lvbmFkbyA9IGZhbHNlOyAvLyBJbmRpY2Egc2kgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICAgICAgbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogbWVuc2FqZSB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICAgICAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBhdXhpbGlhciBwYXJhIG1hbmVqYXIgc2VsZWNjaW9uZXMgeSBjZXJyYXIgZWwgbW9kYWwgYWRlY3VhZGFtZW50ZVxuICAgICAgICAgICAgY29uc3QgaGFjZXJTZWxlY2Npb24gPSAoc2VsZWNjaW9uOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VsZWNjaW9uYWRvID0gdHJ1ZTsgLy8gTWFyY2FyIHF1ZSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cbiAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpOyAvLyBDZXJyYXIgZWwgbW9kYWxcbiAgICAgICAgICAgICAgICByZXNvbHZlKHNlbGVjY2lvbik7IC8vIFJlc29sdmVyIGxhIHByb21lc2EgY29uIGxhIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgLy8gQm90XHUwMEYzbiBTXHUwMEVEXG4gICAgICAgICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1NcdTAwRUQnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBoYWNlclNlbGVjY2lvbih0cnVlKSk7XG4gICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIE5vXG4gICAgICAgICAgICBjb25zdCBub0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8nLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBub0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhY2VyU2VsZWNjaW9uKGZhbHNlKSk7XG4gICAgXG4gICAgICAgICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc2VsZWNjaW9uYWRvKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGVsIG1vZGFsIHNlIGNpZXJyYSBzaW4gcXVlIHNlIGhheWEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLCByZWNoYXphciBsYSBwcm9tZXNhXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJNb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzblwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFncmVnYXIgZXNjdWNoYXMgZGUgZXZlbnRvcyBkZSB0ZWNsYWRvIHBhcmEgcGVybWl0aXIgbGEgbmF2ZWdhY2lcdTAwRjNuIGNvbiBlbCB0ZWNsYWRvXG4gICAgICAgICAgICBtb2RhbC5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgeWVzQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBub0J1dHRvbi5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VudGVyJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbXVsYSBjbGljIGVuIGVsIGJvdFx1MDBGM24gZW5mb2NhZG9cbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ/LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIEVuZm9jYXIgaW5pY2lhbG1lbnRlIGVsIGJvdFx1MDBGM24gJ1NcdTAwRUQnIHBhcmEgcGVybWl0aXIgbGEgbmF2ZWdhY2lcdTAwRjNuIGNvbiB0ZWNsYWRvIGRlc2RlIGVsIGluaWNpb1xuICAgICAgICAgICAgeWVzQnV0dG9uLmZvY3VzKCk7XG4gICAgXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcblxuICAgIGFzeW5jIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICAgICAgY29uc3QgdG90VGFyZWFzID0gYXdhaXQgdGhpcy5lbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7IC8vIFBhc28gYGFwcGAgY29tbyBhcmd1bWVudG9cbiAgICAgICAgXG4gICAgICAgIGxldCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbjtcbiAgICAgICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiQWxndW5hIHRhcmVhIGVuIEVqZWN1Y2lcdTAwRjNuXCIsIFwiT3Ryb1wiXTtcbiAgICAgICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbcmVnaXN0cm8ubm9tYnJlLCBcIk90cm9cIl07XG4gICAgICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIk90cm9cIl07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIlx1MDBCRlNvYnJlIHF1XHUwMEU5IGVzIGVsIHJlZ2lzdHJvIGRlIHRpZW1wbz9cIjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gRXNwZXJhIGFzaW5jclx1MDBGM25pY2FtZW50ZSBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhbnRlcyBkZSBjb250aW51YXIuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBhd2FpdCBtb2RhbE1lbnUxLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmVnaXN0cm8udGlwb1JlZ2lzdHJvID0gc2VsZWN0aW9uO1xuICAgICAgICAgICAgLy8gUHJvY2VzYXIgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYXF1XHUwMEVELlxuICAgICAgICAgICAgLy8gRWwgY1x1MDBGM2RpZ28gc3Vic2lndWllbnRlIGRlcGVuZGUgZGVsIHRpcG8gZGUgcmVnaXN0cm8gc2VsZWNjaW9uYWRvLlxuICAgICAgICAgICAgc3dpdGNoKHJlZ2lzdHJvLnRpcG9SZWdpc3Rybykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnRpdHVsbyA9IHJlZ2lzdHJvLm5vbWJyZTsgLy8gRWwgdFx1MDBFRHR1bG8gZXMgZWwgbm9tYnJlIGRlIGxhIG5vdGEgYWN0dWFsLlxuICAgICAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJUYXJlYVwiOlxuICAgICAgICAgICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3B1ZXN0YSA9IGF3YWl0IHRoaXMubWVudU90cm8ubWVudU90cm8oYXBwLCByZWdpc3Rybyk7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVnaXN0cm8sIHJlc3B1ZXN0YSk7IC8vIHRpdHVsbywgc2lBc3VudG8sIG5vbWJyZVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIE1hbmVqbyBkZSBlcnJvcmVzIG8gY2llcnJlIGRlbCBtb2RhbCBzaW4gc2VsZWNjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIGVzdGFibGVjZXIgdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gcGFyYSByZWdpc3Ryby5kZXRlbmVyIGFxdVx1MDBFRC5cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZW5jb250cmFyVGFyZWFzUGVuZGllbnRlcyhhcHA6IEFwcCk6IFByb21pc2U8eyB0YXJlYTogc3RyaW5nOyBhcmNoaXZvOiBURmlsZSB9W10+IHtcbiAgICAgICAgbGV0IHRhcmVhc1BlbmRpZW50ZXM6IHsgdGFyZWE6IHN0cmluZzsgYXJjaGl2bzogVEZpbGUgfVtdID0gW107XG4gICAgICAgIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3NSZWxldmFudGVzID0gYXJjaGl2b3MuZmlsdGVyKGFyY2hpdm8gPT4gIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikpO1xuICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGFyY2hpdm8gb2YgYXJjaGl2b3NSZWxldmFudGVzKSB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSBhd2FpdCBhcHAudmF1bHQucmVhZChhcmNoaXZvKTtcbiAgICAgICAgICAgIGNvbnN0IGNvaW5jaWRlbmNpYXMgPSBjb250ZW5pZG8ubWF0Y2goL14gKi0gXFxbXFwvXFxdIC4qL2dtKSB8fCBbXTtcbiAgICBcbiAgICAgICAgICAgIC8vIFBhcmEgY2FkYSB0YXJlYSBlbmNvbnRyYWRhLCBjcmVhIHVuIG9iamV0byBjb24gbGEgdGFyZWEgbGltcGlhIHkgZWwgYXJjaGl2byBhY3R1YWwsIHkgbG8gYWdyZWdhIGFsIGFycmVnbG9cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc0NvbkFyY2hpdm8gPSBjb2luY2lkZW5jaWFzLm1hcCh0YXJlYSA9PiB7ICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGFyZWE6IHRhcmVhLnRyaW0oKSwgYXJjaGl2bzogYXJjaGl2byB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0YXJlYXNQZW5kaWVudGVzID0gdGFyZWFzUGVuZGllbnRlcy5jb25jYXQodGFyZWFzQ29uQXJjaGl2byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmVhc1BlbmRpZW50ZXM7XG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnksIHRhcmVhc1BlbmRpZW50ZXM6IGFueSkge1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiRWxpZ2UgbGEgdGFyZWEgcXVlIHZhcyBhIHJlZ2lzdHJhci5cIjtcbiAgICBcbiAgICAgICAgLy8gTWFwIHBhcmEgZXh0cmFlciB5IGxpbXBpYXIgc29sbyBsYXMgdGFyZWFzXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCh0YXJlYU9iaiA9PiB0aGlzLmxpbXBpYXJUZXh0b1RhcmVhKHRhcmVhT2JqLnRhcmVhKSk7XG4gICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFc3BlcmEgYSBxdWUgdG9kYXMgbGFzIHByb21lc2FzIGVuIHByb21lc2FzTGltcGlhcyBzZSByZXN1ZWx2YW5cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc0xpbXBpYXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9tZXNhc0xpbXBpYXMpO1xuICAgIFxuICAgICAgICAgICAgLy8gUmVjb25zdHJ1aXIgbG9zIG9iamV0b3MgY29uIGxhcyB0YXJlYXMgbGltcGlhcyBtYW50ZW5pZW5kbyBsYSByZWZlcmVuY2lhIGFsIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvID0gdGFyZWFzUGVuZGllbnRlcy5tYXAoKHRhcmVhT2JqLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmVhOiB0YXJlYXNMaW1waWFzW2luZGV4XSwgLy8gVGFyZWEgbGltcGlhXG4gICAgICAgICAgICAgICAgICAgIGFyY2hpdm86IHRhcmVhT2JqLmFyY2hpdm8gLy8gUmVmZXJlbmNpYSBhbCBhcmNoaXZvIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFc3RhcyBkb3MgbFx1MDBFRG5lYXMgbWUgZ2VuZXJhbiB1biBhcnJlZ2xvIGRlIGluZGljZXMgcGFyYSBzdW1pbmlzdHJhciBlbCB2YWxvciBhbCBtb2RhbC4gXG4gICAgICAgICAgICBjb25zdCBsb25naXR1ZCA9IHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGFycmVnbG9EZUluZGljZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiBsb25naXR1ZCB9LCAoXywgaW5kaWNlKSA9PiBpbmRpY2UpO1xuXG4gICAgICAgICAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCB0YXJlYXNMaW1waWFzQ29uQXJjaGl2by5tYXAoYiA9PiBiLnRhcmVhKSwgYXJyZWdsb0RlSW5kaWNlcywgcGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBFc3BlcmEgYSBxdWUgZWwgdXN1YXJpbyBoYWdhIHVuYSBzZWxlY2NpXHUwMEYzbiBlbiBlbCBtb2RhbFxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBhd2FpdCBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHNlbGVjY2lcdTAwRjNuIGNvcnJlc3BvbmRhIGFsIFx1MDBFRG5kaWNlIGNvcnJlY3RvIGVuIHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWNjaW9uID0gdGFyZWFzTGltcGlhc0NvbkFyY2hpdm9bc2VsZWN0ZWRJbmRleF07XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gc2VsZWNjaW9uLnRhcmVhOyAvLyBvIGNcdTAwRjNtbyBoYXlhcyBkZWNpZGlkbyBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuIGxpbXBpYVxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLm5vbWJyZSA9IHNlbGVjY2lvbi5hcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgLy8gRXN0ZSBibG9xdWUgY2F0Y2ggbWFuZWphIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBlbiBsYSBsaW1waWV6YSBkZSB0YXJlYXNcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJIdWJvIHVuIGVycm9yIGFsIGxpbXBpYXIgbGFzIHRhcmVhczpcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxpbXBpYXJUZXh0b1RhcmVhKHRpdHVsbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgLy8gRWxpbWluYSB0b2RvIGRlc3B1XHUwMEU5cyBkZWwgcHJpbWVyIHNhbHRvIGRlIGxcdTAwRURuZWEuXG4gICAgICAgICAgICBsZXQgdGV4dG9MaW1waW8gPSB0aXR1bG8uc3BsaXQoJ1xcbicpWzBdO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmEgbG9zIHRhZ3MgZGUgZXN0aWxvIE1hcmtkb3duLlxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC8jW1xcdy0vXSsvZywgJycpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmEgbG9zIGNhbXBvcyBkZSBlc3RpbG8gRGF0YXZpZXcuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xcW1xcdys6OlteXFxdXStcXF0vZywgJycpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmEgZWwgcGF0clx1MDBGM24gXCIgLSBbL11cIiBhbCBpbmljaW8gZGUgbGEgY2FkZW5hLCBpbmNsdXllbmRvIHBvc2libGVzIGVzcGFjaW9zIGFudGVzIG8gZGVzcHVcdTAwRTlzLlxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9eXFxzKi1cXHMqXFxbXFwvXFxdXFxzKi8sICcnKTtcblxuICAgICAgICAgICAgLy8gUmVlbXBsYXphIGNhcmFjdGVyZXMgbm8gcGVybWl0aWRvcyBlbiBub21icmVzIGRlIGFyY2hpdm8gY29uIHVuIGd1aW9uIGJham8gbyBhbGdcdTAwRkFuIG90cm8gY2FyYWN0ZXIgc2VndXJvLiAgICBcbiAgICAgICAgICAgIGNvbnN0IGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MgPSAvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nO1xuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MsICdfJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW8gcGFyYSBldml0YXIgbm9tYnJlcyBkZSBhcmNoaXZvIGV4Y2VzaXZhbWVudGUgbGFyZ29zLlxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gUmV0b3JuYSBlbCB0ZXh0byBsaW1waW8sIGFob3JhIGVudnVlbHRvIGVuIHVuYSBwcm9tZXNhLlxuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0b0xpbXBpby50cmltKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgYXN5bmMgY29uc3RydWlyTm9tYnJleUFsaWFzKHJlZ2lzdHJvOiBhbnksIGFwcDpBcHApe1xuICAgICAgICBcbiAgICAgICAgbGV0IG5vbWJyZUJhc2UgPSBgJHtyZWdpc3Ryby5mb2xkZXJ9L1JUIC0gJHtyZWdpc3Ryby5pZH1gO1xuXG4gICAgICAgIGxldCBhbGlhc0xpbXBpbyA9IHRoaXMubGltcGlhckFsaWFzKHJlZ2lzdHJvLnRpdHVsbyk7XG4gICAgICAgIGFsaWFzTGltcGlvID0gYWxpYXNMaW1waW8ubGVuZ3RoID4gMTk1ID8gYWxpYXNMaW1waW8uc2xpY2UoMCwgMTk1KSA6IGFsaWFzTGltcGlvO1xuXG4gICAgICAgIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIGxldCByZWdpc3Ryb3NDb25NaXNtb1RpdHVsbyA9IFtdO1xuXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvcykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYXJjaGl2by5wYXRoLnN0YXJ0c1dpdGgocmVnaXN0cm8uZm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVzYW1vcyBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlIGxhIG5vdGFcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0b3MgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2byk7XG4gICAgICAgICAgICAgICAgLy8gQXNlZ3VyYW1vcyBxdWUgbWV0YWRhdG9zLmZyb250bWF0dGVyIGNvbnRlbmdhIGxvcyBjYW1wb3MgbmVjZXNhcmlvc1xuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0b3MgJiYgbWV0YWRhdG9zLmZyb250bWF0dGVyICYmIG1ldGFkYXRvcy5mcm9udG1hdHRlci50aXR1bG8gPT09IHJlZ2lzdHJvLnRpdHVsbykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZFNlYyA9IG1ldGFkYXRvcy5mcm9udG1hdHRlci5pZFNlYztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlkU2VjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLnB1c2goeyBhcmNoaXZvLCBpZFNlYyB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAvLyBPcmRlbmFtb3MgbG9zIHJlc3VsdGFkb3MgcG9yIGlkU2VjIGVuIG9yZGVuIGRlc2NlbmRlbnRlXG4gICAgICAgIHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLnNvcnQoKGIpID0+IGIuaWRTZWMsIFwiZGVzY1wiKTtcblxuXG4gICAgcmVnaXN0cm8uaWRTZWMgPSByZWdpc3Ryb3NDb25NaXNtb1RpdHVsby5sZW5ndGggPiAwID8gKHBhcnNlSW50KHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvWzBdLmlkU2VjKSArIDEpIDogMTtcbiAgICAgICAgXG4gICAgaWYgKHJlZ2lzdHJvLmlkU2VjID4gMSkge1xuICAgICAgICBhbGlhc0xpbXBpbyArPSBgIC0gJHtyZWdpc3Ryby5pZFNlY31gO1xuICAgIH1cblxuICAgIC8vIEluaWNpYWxpemEgcmVnaXN0cm8uYWxpYXNlcyBjb21vIHVuIGFycmVnbG8gdmFjXHUwMEVEb1xuICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSBbXTtcblxuICAgIC8vIEFncmVnYSBlbCBhbGlhcyBsaW1waW8gY29uIGVsIHByZWZpam9cbiAgICByZWdpc3Ryby5hbGlhc2VzLnB1c2goYFJUIC0gJHthbGlhc0xpbXBpb31gKTtcblxuICAgIGlmIChyZWdpc3Ryby50aXBvUmVnaXN0cm8gPT09IFwiTm90YVwiKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRcdTAwRTluIGVsIGFyY2hpdm8gYWN0aXZvXG4gICAgICAgIGNvbnN0IGFyY2hpdm9BY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhcmNoaXZvQWN0aXZvKSByZXR1cm47IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBoYXlhIHVuIGFyY2hpdm8gYWN0aXZvXG5cbiAgICAgICAgLy8gT2J0XHUwMEU5biBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGFjdGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0b3NBY3Rpdm8gPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2b0FjdGl2byk7XG5cbiAgICAgICAgLy8gRXh0cmFlIGFsaWFzZXMgZGVsIGZyb250bWF0dGVyLCBhc2VndXJcdTAwRTFuZG90ZSBkZSBxdWUgZXhpc3RhbiB5IGFjY2VkaWVuZG8gY29ycmVjdGFtZW50ZVxuICAgICAgICBjb25zdCBhbGlhc2VzQWN0aXZvID0gbWV0YWRhdG9zQWN0aXZvICYmIG1ldGFkYXRvc0FjdGl2by5mcm9udG1hdHRlciA/IG1ldGFkYXRvc0FjdGl2by5mcm9udG1hdHRlci5hbGlhc2VzIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIC8vIFZlcmlmaWNhIHNpIGFsaWFzZXNBY3Rpdm8gZXhpc3RlIHkgZGV0ZXJtaW5hIHNpIGVzIHVuIGFycmVnbG8gbyB1bmEgY2FkZW5hXG4gICAgICAgIGlmIChhbGlhc2VzQWN0aXZvKSB7XG4gICAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsQWxpYXNlcyA9IEFycmF5LmlzQXJyYXkoYWxpYXNlc0FjdGl2bylcbiAgICAgICAgICAgICAgICA/IGFsaWFzZXNBY3Rpdm9cbiAgICAgICAgICAgICAgICA6IFthbGlhc2VzQWN0aXZvXTsgLy8gQ29udmllcnRlIGEgYXJyZWdsbyBzaSBlcyB1bmEgY2FkZW5hXG5cbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGUgY2FkYSBhbGlhcyBhZGljaW9uYWwgY29uIGVsIHByZWZpam8gXCJSVCAtIFwiXG4gICAgICAgICAgICBhZGRpdGlvbmFsQWxpYXNlcy5mb3JFYWNoKGFsaWFzID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby5hbGlhc2VzLnB1c2goYFJUIC0gJHthbGlhc31gKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICByZWdpc3Ryby5uYW1lRmlsZSA9IG5vbWJyZUJhc2U7XG4gICAgfVxuICAgICAgICBcbiAgICBsaW1waWFyQWxpYXModGl0dWxvOnN0cmluZykge1xuICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uXG4gICAgICAgIGNvbnN0IGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MgPSAvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nO1xuICAgICAgICBsZXQgdGl0dWxvTGltcGlvID0gdGl0dWxvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICBcbiAgICAgICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW8gcGFyYSBldml0YXIgbm9tYnJlcyBkZSBhcmNoaXZvIGV4Y2VzaXZhbWVudGUgbGFyZ29zLlxuICAgICAgICB0aXR1bG9MaW1waW8gPSB0aXR1bG9MaW1waW8ucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgIFxuICAgICAgICByZXR1cm4gdGl0dWxvTGltcGlvLnRyaW0oKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZXRlbmVyVGFyZWEodGFyZWFBY3RpdmE6IHsgZmlsZTogVEZpbGU7IHRpdHVsbzogc3RyaW5nIH0sIGFwcDogQXBwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBsYSBsXHUwMEYzZ2ljYSBwYXJhIG1hcmNhciBsYSB0YXJlYSBjb21vIG5vIGFjdGl2YSwgcHJvYmFibGVtZW50ZSBhY3R1YWxpemFuZG8gc3UgZnJvbnRtYXR0ZXJcbiAgICBjb25zb2xlLmxvZyhgRGV0ZW5pZW5kbyBsYSB0YXJlYTogJHt0YXJlYUFjdGl2YS50aXR1bG99YCk7XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gc2UgcG9kclx1MDBFRGEgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlciBwYXJhIGRldGVuZXIgbGEgdGFyZWFcbiAgICAvLyBFc3RhIGVzIHVuYSBzaW1wbGlmaWNhY2lcdTAwRjNuOyBsYSBpbXBsZW1lbnRhY2lcdTAwRjNuIHJlYWwgZGVwZW5kZXJcdTAwRURhIGRlIGNcdTAwRjNtbyBlc3RcdTAwRTlzIG1hbmVqYW5kbyBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm9cbiAgICBjb25zdCBmaWxlQ29udGVudHMgPSBhd2FpdCBhcHAudmF1bHQucmVhZCh0YXJlYUFjdGl2YS5maWxlKTtcbiAgICBjb25zdCBuZXdDb250ZW50cyA9IGZpbGVDb250ZW50cy5yZXBsYWNlKCdlc3RhZG86IFx1RDgzRFx1REZFMicsICdlc3RhZG86IFx1RDgzRFx1REQzNScpOyAvLyBDYW1iaWFyIGEgZXN0YWRvIG5vIGFjdGl2b1xuICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkodGFyZWFBY3RpdmEuZmlsZSwgbmV3Q29udGVudHMpO1xuICAgIH1cbiAgICAgICAgICAgICAgICBcbn0iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCI7XG5pbXBvcnQge2Z1enp5U2VsZWN0T3JDcmVhdGV9IGZyb20gXCIuLi8uLi9tb2RhbGVzL2Z1enp5U2VsZWN0T3JDcmVhdGVcIjtcblxuaW50ZXJmYWNlIEdydXBvQWN0aXZpZGFkIHtcbiAgICBncnVwbzogc3RyaW5nO1xuICAgIGFjdGl2aWRhZDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgbWVudU90cm8ge1xuICAgIFxuICAgIHBhdGhDYW1wb3M6IHN0cmluZyA9IFwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBSZWdpc3RybyBUaWVtcG8ubWRcIjtcbiAgICBzZWxlY3RlZEFjdGl2aXR5OiBzdHJpbmcgPVwiXCI7XG4gICAgc2VsZWN0ZWRHcm91cDogc3RyaW5nID0gXCJcIjtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5mdXp6eVNlbGVjdE9yQyA9IG5ldyBmdXp6eVNlbGVjdE9yQ3JlYXRlKHRoaXMuYXBwLCBwbHVnaW4pO1xuICAgICAgfVxuICAgIFxuICAgICAgYXN5bmMgbWVudU90cm8gKGFwcDogQXBwLCByZWdpc3RybzogYW55KXtcbiAgICAgICAgY29uc3Qgb3BjaW9uZXNPdHJvID0gW1wiUHJvcGlhc1wiLCBcIkFyZWFzIGRlIFZpZGFcIiwgXCJBcmVhcyBkZSBJbnRlclx1MDBFOXNcIiwgXCJQcm95ZWN0b3MgZGUgUVwiLCBcIlByb3llY3RvcyBHVERcIiwgXCJUZW1hIGRlIEludGVyXHUwMEU5c1wiLCBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXSA7XG4gICAgICAgIGNvbnN0IHZhbG9yZXNPdHJvID0gW1wiaGFiXCIsIFwiYWN0c0FWXCIsIFwiYWN0c0FJXCIsIFwiYWN0c1BRXCIsIFwiYWN0c1BHVERcIiwgXCJhY3RzVElcIiwgXCJhY3RzUlJcIl07XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyT3RybyA9IFwiXHUwMEJGUXVlIGNhdGVnb3JpYT9cIjtcbiAgICAgICAgY29uc3QgbW9kYWxPdHJvID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXNPdHJvLCB2YWxvcmVzT3RybywgcGxhY2Vob2xkZXJPdHJvKTtcbiAgICAgICAgbGV0IHRlbWFPdHJvOntncnVwbzpzdHJpbmc7YWN0aXZpZGFkOnN0cmluZyxub21icmU6c3RyaW5nfTtcbiAgICAgICAgbGV0IHNpQXN1bnRvOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25PdHJvID0gYXdhaXQgbW9kYWxPdHJvLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgc3dpdGNoKHNlbGVjdGlvbk90cm8pIHtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJoYWJcIjpcbiAgICAgICAgICAgICAgICAgICAgdGVtYU90cm8gPSBhd2FpdCB0aGlzLmhhYml0dWFsKGFwcCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FJXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNQUVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzVElcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1JSXCI6XG4gICAgICAgICAgICAgICAgICAgIHRlbWFPdHJvID0gYXdhaXQgdGhpcy5lbGVtU0coYXBwLHNlbGVjdGlvbk90cm8pOyBcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYnVzXCI6XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge3RpdHVsbzogdGVtYU90cm8uYWN0aXZpZGFkICsgXCIgLyBcIiArIHRlbWFPdHJvLmdydXBvLCBzaUFzdW50byAsbm9tYnJlOiB0ZW1hT3Ryby5ub21icmV9XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBoYWJpdHVhbCAoYXBwOiBBcHApe1xuICAgICAgICAgICAgY29uc3QgZ3J1cG9zID0gYXdhaXQgdGhpcy5nZXRGcm9udG1hdHRlckZpZWxkKGFwcCx0aGlzLnBhdGhDYW1wb3MsIFwidGVtYXNcIik7XG4gICAgICAgICAgICBjb25zdCBhY3RzR3J1cG9zID0gYXdhaXQgdGhpcy5yZXN1bHRZYW1sKGFwcCxcImFjdHNUZW1hc1wiKVxuICAgICAgICAgICAgLy8gRmlsdHJhciB5IHByZXBhcmFyIGxhcyBhY3RpdmlkYWRlcyBleGlzdGVudGVzIHBhcmEgbGEgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgbGV0IGl0ZW1zRm9yU2VhcmNoID0gYWN0c0dydXBvc1xuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gZ3J1cG9zLmluY2x1ZGVzKGl0ZW0uZ3J1cG8pKSAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogYCR7aXRlbS5hY3RpdmlkYWR9IC8gJHtpdGVtLmdydXBvfWAsIC8vIENhbWJpYSBlbCBvcmRlbiBzaSBlcyBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICBhY3Rpdml0eTogaXRlbS5hY3RpdmlkYWQsIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2FjdGl2aWRhZCcgZW4gbHVnYXIgZGUgaXRlbVsxXVxuICAgICAgICAgICAgICAgIGdyb3VwOiBpdGVtLmdydXBvLFxuICAgICAgICAgICAgICAgIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsZXQgZWxlY2Npb24gPSBhd2FpdCB0aGlzLmZ1enp5U2VsZWN0T3JDLnNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zRm9yU2VhcmNoLCBncnVwb3MpO1xuICAgICAgICAgICAgbGV0IG9iakVsZWNjaW9uID0ge2dydXBvOiBlbGVjY2lvblsxXSwgYWN0aXZpZGFkOiBlbGVjY2lvblswXSwgbm9tYnJlOiBcIlwifTtcbiAgICAgICAgICAgIHJldHVybiBvYmpFbGVjY2lvbjsgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIG5pbmd1bm8gKGFwcDogQXBwKXtcblxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgIGVsZW1TRyAoYXBwOiBBcHAsIHRpcG8gOiBzdHJpbmcpOiBQcm9taXNlPGFueT57XG4gICAgICAgICAgICBjb25zdCBhY3RpdmlkYWRlcyA9IGF3YWl0IHRoaXMucmVzdWx0WWFtbChhcHAsIHRpcG8pXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgYWN0aXZlU0cgPSBhd2FpdCB0aGlzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoYXBwLHRpcG8pXG4gICAgICAgICAgICAvLyBFeHRyYWUgZWwgcHJpbWVyIGFsaWFzIGRlIGNhZGEgbm90YSBlbmNvbnRyYWRhIHkgbG9zIGFsbWFjZW5hIGVuIHVuIGFycmF5XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwcyA9IGFjdGl2ZVNHLm1hcChwYWdlID0+IHBhZ2UuZnJvbnRtYXR0ZXIuYWxpYXNlcyA/IHBhZ2UuZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA6IG51bGwpLmZpbHRlcihhbGlhcyA9PiBhbGlhcyAhPT0gbnVsbCk7XG4gICAgICAgICAgICAvLyBGaWx0cmFyIHkgcHJlcGFyYXIgbGFzIGFjdGl2aWRhZGVzIGV4aXN0ZW50ZXMgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhXG4gICAgICAgICAgICBsZXQgaXRlbXNGb3JTZWFyY2ggPSBhY3RpdmlkYWRlc1xuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gZ3JvdXBzLmluY2x1ZGVzKGl0ZW0uZ3J1cG8pKSAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogYCR7aXRlbS5hY3RpdmlkYWR9IC8gJHtpdGVtLmdydXBvfWAsIC8vIENhbWJpYSBlbCBvcmRlbiBzaSBlcyBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICBhY3Rpdml0eTogaXRlbS5hY3RpdmlkYWQsIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2FjdGl2aWRhZCcgZW4gbHVnYXIgZGUgaXRlbVsxXVxuICAgICAgICAgICAgICAgIGdyb3VwOiBpdGVtLmdydXBvLFxuICAgICAgICAgICAgICAgIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvLyBNb3N0cmFtb3MgZWwgbW9kYWwgY29uIGxhcyBvcGNpb25lcyBkZSBiXHUwMEZBc3F1ZWRhXG5cbiAgICAgICAgICAgIGxldCBlbGVjY2lvbiA9IGF3YWl0IHRoaXMuZnV6enlTZWxlY3RPckMuc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXNGb3JTZWFyY2gsIGdyb3VwcywgdGlwbyk7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEVsZW1lbnQgPSBhY3RpdmVTRy5maW5kKGIgPT4gYi5mcm9udG1hdHRlci5hbGlhc2VzWzBdID09PSBlbGVjY2lvblsxXSk7XG4gICAgICAgICAgICAvLyBTaSBzZSBlbmN1ZW50cmEgZWwgZWxlbWVudG8sIGRldm9sdmVyIGZyb250bWF0dGVyLmFsaWFzZXNbMV1cbiAgICAgICAgICAgIGxldCBhbGlhcyA9IGZvdW5kRWxlbWVudD8uZmlsZS5wYXRoO1xuICAgICAgICAgICAgbGV0IG9iakVsZWNjaW9uID0ge2dydXBvOiBlbGVjY2lvblsxXSwgYWN0aXZpZGFkOiBlbGVjY2lvblswXSwgbm9tYnJlOiBhbGlhc307XG4gICAgICAgICAgICByZXR1cm4gb2JqRWxlY2Npb247ICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGJ1c2NhciAoYXBwOiBBcHApe1xuXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyAgcmVzdWx0WWFtbChhcHA6IEFwcCwgdGVtYTogc3RyaW5nKTogUHJvbWlzZTxHcnVwb0FjdGl2aWRhZFtdPiB7XG4gICAgICAgICAgICAvLyBFbmN1ZW50cmEgZWwgYXJjaGl2byBwb3Igc3UgcnV0YVxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBY2NlZGUgYWwgZnJvbnQgbWF0dGVyIChZQU1MKSBkZWwgYXJjaGl2byB5IG9idGllbmUgZWwgYXJyZWdsbyBiYXNhZG8gZW4gZWwgdGVtYVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJlZ2xvUmVzdWx0ID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5bdGVtYV0gfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc3RydXllIGVsIGFycmVnbG8gZGUgb2JqZXRvcyByZXN1bHRhZG8gYmFzYWRvIGVuIGxhIGVzdHJ1Y3R1cmEgZGUgR3J1cG9BY3RpdmlkYWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvOiBHcnVwb0FjdGl2aWRhZFtdID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb1Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmVnbG9SZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGFkby5wdXNoKHsgZ3J1cG86IGl0ZW1bMF0sIGFjdGl2aWRhZDogaXRlbVsxXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdGFkbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV2dWVsdmUgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIG5vIHNlIGVuY3VlbnRyYSBlbCBhcmNoaXZvIG8gc2kgb2N1cnJlIGN1YWxxdWllciBvdHJvIHByb2JsZW1hXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBnZXRGcm9udG1hdHRlckZpZWxkKGFwcDogQXBwLCBmaWxlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0RmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlciAmJiBmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShmaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBmcm9udG1hdHRlcltmaWVsZF07XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBmaWVsZFZhbHVlID09PSBudWxsIHx8IGZpZWxkVmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVsIGNhbXBvIGVzdFx1MDBFMSB2YWNcdTAwRURvIG8gbm8gZXhpc3RlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgY29uc3VsdGFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRWYWx1ZTsgLy8gRGV2dWVsdmUgZWwgdmFsb3IgZGVsIGNhbXBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVsIGNhbXBvIG5vIGV4aXN0ZSBlbiBlbCBmcm9udG1hdHRlci5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRWwgYXJjaGl2byBubyBleGlzdGUgbyBubyBlcyB1biBhcmNoaXZvIGRlIHRleHRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb25zdWx0YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgLy8gRXN0YSBmdW5jaVx1MDBGM24gZW5jdWVudHJhIGxvcyBhcmNoaXZvcyBkZSBzdWJzaXN0ZW1hcyB5IGN1eW8gZXN0YWRvIGVzIFx1RDgzRFx1REZFMlxuICAgICAgICBhc3luYyBmaW5kTWFpbkZpbGVzV2l0aFN0YXRlKGFwcCwgdGlwbykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzVGlwbyA9IHtcbiAgICAgICAgICAgICAgICBhY3RzQVY6IHtcbiAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiB0cnVlLCBcbiAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYW1lRmlsZV9BcmVhc1ZpZGFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNBSToge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc0ludGVyZXMsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MubmFtZUZpbGVfQXJlYXNJbnRlcmVzXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNQUToge1xuICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zUSxcbiAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzUEdURDoge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NHVEQsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1RJOiB7XG4gICAgICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVGVtYXNJbnRlcmVzLFxuICAgICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNSUjoge1xuICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzLFxuICAgICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIFB1ZWRlcyBjb250aW51YXIgYVx1MDBGMWFkaWVuZG8gbVx1MDBFMXMgY2Fzb3MgYXF1XHUwMEVEXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgdGlwbyBlcyB1bmEgcHJvcGllZGFkIHZcdTAwRTFsaWRhIGFudGVzIGRlIGRlc2VzdHJ1Y3R1cmFyXG4gICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNUaXBvLmhhc093blByb3BlcnR5KHRpcG8pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBmb2xkZXIsIHNhbWVOYW1lLCBuYW1lRmlsZSB9ID0gcHJvcGVydGllc1RpcG9bdGlwb107XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXNJbkZvbGRlciA9IGFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzV2l0aEZyb250bWF0dGVyID0gW107XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc0luRm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoc2FtZU5hbWUgJiYgZmlsZS5iYXNlbmFtZSA9PT0gbmFtZUZpbGUpIHx8ICFzYW1lTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEuZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdGEuZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZXNXaXRoRnJvbnRtYXR0ZXIucHVzaCh7IGZpbGU6IGZpbGUsIGZyb250bWF0dGVyOiBtZXRhZGF0YS5mcm9udG1hdHRlciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiU2VsZWNjaVx1MDBGM24gbm8gcmVjb25vY2lkYTpcIiwgdGlwbyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdOyAvLyBNYW5lamFyIHNlZ1x1MDBGQW4gdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICB9XG4gICAgICAgICB9XG5cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi9zZWxlY2Npb25Nb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgZnV6enlTZWxlY3RPckNyZWF0ZSB7XG4gIGFwcDogQXBwO1xuICBwbHVnaW46IFBsdWdpbjtcbiAgcGF0aENhbXBvczogc3RyaW5nID0gXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFJlZ2lzdHJvIFRpZW1wby5tZFwiO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBsdWdpbikge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgY3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZnV6enlTZWFyY2hNb2RhbFwiKTtcbiAgICBtb2RhbC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICBtb2RhbC5zdHlsZS50b3AgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLmxlZnQgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCI7XG4gICAgbW9kYWwuc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG4gICAgbW9kYWwuc3R5bGUucGFkZGluZyA9IFwiMjBweFwiO1xuICAgIG1vZGFsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjY2NjXCI7XG4gICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1cHhcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgNHB4IDZweCByZ2JhKDAsMCwwLC4xKVwiO1xuICAgIG1vZGFsLnN0eWxlLndpZHRoID0gXCIzMDBweFwiO1xuICBcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY2xvc2VCdXR0b24udGV4dENvbnRlbnQgPSBcIlx1MDBEN1wiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9IFwiNXB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucmlnaHQgPSBcIjVweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9IFwiMTZweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCIwcHggNHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIxMHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUub3V0bGluZSA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5yZW1vdmUoKTtcbiAgXG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHJldHVybiBtb2RhbDtcbiAgfVxuXG4gIGZpbHRlckl0ZW1zKHF1ZXJ5LCBpdGVtcykge1xuICAgIHJldHVybiBpdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgaXRlbS52YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHModGlwbywgc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCkge1xuICAgIHRyeSB7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBsZXQgY3VycmVudEFjdHMgPSBmcm9udG1hdHRlclt0aXBvXSB8fCBbXTtcbiAgICAgICAgICAgIGxldCBuZXdWYWx1ZUZvckFjdHMgPSBbLi4uY3VycmVudEFjdHMsIFtzZWxlY3RlZEdyb3VwLCBzZWxlY3RlZFZhbHVlXV07XG4gICAgICAgICAgICBmcm9udG1hdHRlclt0aXBvXSA9IG5ld1ZhbHVlRm9yQWN0cztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gIGFzeW5jIHNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zLCBncm91cHMsIHRpcG8pIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IFwiXCI7IC8vIFZhcmlhYmxlIHBhcmEgZ3VhcmRhciBsYSBvcGNpXHUwMEYzbiBzZWxlY2Npb25hZGEgbyBpbmdyZXNhZGEgcG9yIGVsIHVzdWFyaW9cbiAgICAgICAgbGV0IHNlbGVjdGVkR3JvdXAgPSBcIlwiO1xuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMuY3JlYXRlTW9kYWwoKTtcbiAgICAgIFxuXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCB0XHUwMEVEdHVsbyBkZWwgbW9kYWxcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gXCJCdXNjYSBvIGNyZWEgdHUgYWN0aXZpZGFkXCI7XG4gICAgICAgIHRpdGxlLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7IC8vIENlbnRyYXIgZWwgdFx1MDBFRHR1bG8sIGFqdXN0YSBsb3MgZXN0aWxvcyBzZWdcdTAwRkFuIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCJFc2NyaWJlIHR1IGFjdGl2aWRhZC4uLlwiO1xuICAgICAgICAvLyBFc3RhYmxlY2UgZWwgYW5jaG8gZGVsIGlucHV0IGEgdW4gcG9yY2VudGFqZSBkZWwgY29udGVuZWRvciBwYXJhIGhhY2VybG8gbVx1MDBFMXMgYW5jaG8uXG4gICAgICAgIGlucHV0LnN0eWxlLndpZHRoID0gXCI4MCVcIjtcbiAgICAgICAgLy8gQ2VudHJhciBlbCB0ZXh0byBkZW50cm8gZGVsIGlucHV0XG4gICAgICAgIGlucHV0LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIC8vIENlbnRyYXIgZWwgaW5wdXQgZGVudHJvIGRlbCBtb2RhbCAoc2kgZWwgbW9kYWwgdGllbmUgdW4gZGlzcGxheSBmbGV4KVxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIG1vZGFsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuICAgICAgICBtb2RhbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG5cbiAgICAgICAgLy8gQ3JlYXIgeSBhZ3JlZ2FyIHVuIGVzcGFjaW8gZW50cmUgZWwgaW5wdXQgeSByZXN1bHRzRGl2XG4gICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNwYWNlci5zdHlsZS5oZWlnaHQgPSBcIjE2cHhcIjsgLy8gQWp1c3RhIGVzdGEgYWx0dXJhIHNlZ1x1MDBGQW4gbmVjZXNpdGVzIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHRzRGl2KTtcbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZXN1bHRzRGlzcGxheShmaWx0ZXJlZFJlc3VsdHMsIG1lbnVPdHJvKSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIHJlc3VsdGFkb3MgcHJldmlvc1xuICAgICAgICAgIGZpbHRlcmVkUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBkaXYub25tb3VzZW92ZXIgPSAoKSA9PiAoZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YwZjBmMFwiKTtcbiAgICAgICAgICAgIGRpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSByZXN1bHQuYWN0aXZpdHk7IC8vIEd1YXJkYXIgZWwgdmFsb3Igc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXAgPSByZXN1bHQuZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgc2VsZWNjaVx1MDBGM24gYWwgdXN1YXJpb1xuICAgICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZShbc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgIC8vIFNpIG5vIGhheSByZXN1bHRhZG9zIHkgZWwgdXN1YXJpbyBoYSBpbmdyZXNhZG8gdW4gdGV4dG8sIG9mcmVjZXIgbGEgY3JlYWNpXHUwMEYzbiBkZSB1bmEgbnVldmEgYWN0aXZpZGFkXG4gICAgICAgICAgaWYgKGZpbHRlcmVkUmVzdWx0cy5sZW5ndGggPT09IDAgJiYgaW5wdXQudmFsdWUudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVOZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2LnRleHRDb250ZW50ID0gYENyZWFyIG51ZXZhIGFjdGl2aWRhZDogXCIke2lucHV0LnZhbHVlfVwiYDtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jb2xvciA9IFwiYmx1ZVwiO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSBpbnB1dC52YWx1ZTsgLy8gR3VhcmRhciBsYSBudWV2YSBhY3RpdmlkYWRcbiAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgaWYgKHRpcG89PSB1bmRlZmluZWQpeyB0aXBvID0gXCJhY3RzVGVtYXNcIn1cbiAgICAgICAgICAgICAgc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybywgdGlwbyk7IC8vIFByb2NlZGVyIGEgc2VsZWNjaW9uYXIgdW4gZ3J1cG9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5ld0Rpdik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybywgdGlwbykge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICBpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICBzcGFjZXIucmVtb3ZlKCk7XG4gICAgICAgICAgdGl0bGUucmVtb3ZlKCk7XG5cbiAgICAgICAgICBjb25zdCB0ZXh0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgIHRleHRvLnRleHRDb250ZW50ID0gYFZhbW9zIGEgY3JlYXIgbGEgYWN0aXZpZGFkOiBcIiR7c2VsZWN0ZWRWYWx1ZX1cIi4gU2VsZWNjaW9uYSB1biBncnVwbzpgOztcbiAgICAgICAgICB0ZXh0by5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAvLyBDZW50cmFyIGVsIHRcdTAwRUR0dWxvLCBhanVzdGEgbG9zIGVzdGlsb3Mgc2VnXHUwMEZBbiBzZWEgbmVjZXNhcmlvXG4gICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZCh0ZXh0byk7IFxuICAgICAgXG4gICAgICAgICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBncm91cERpdi50ZXh0Q29udGVudCA9IGdyb3VwO1xuICAgICAgICAgICAgZ3JvdXBEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3ZlciA9ICgpID0+IChncm91cERpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMGYwZjBcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGdyb3VwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgYWN0aXZpZGFkIHkgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBsZXQgcmVjdXJyZW50ZSA9IGF3YWl0IG1lbnVPdHJvLmVzUmVjdXJyZW50ZShzZWxlY3RlZFZhbHVlKVxuICAgICAgICAgICAgICBpZiAocmVjdXJyZW50ZSl7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWVudU90cm8udXBkYXRlWUFNTEZpZWxkcyh0aXBvLCBzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKFtzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChncm91cERpdik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U2VsZWN0ZWRWYWx1ZShhY3Rpdml0eSwgZ3JvdXApIHtcbiAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IGBTZWxlY2Npb25hZG86ICR7YWN0aXZpdHl9IC8gJHtncm91cH1gO1xuICAgICAgICAgIC8vIEFxdVx1MDBFRCBwdWVkZXMgY2VycmFyIGVsIG1vZGFsIG8gcGVybWl0aXIgYWwgdXN1YXJpbyBoYWNlciBtXHUwMEUxcyBhY2Npb25lc1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtcyhpbnB1dC52YWx1ZSwgaXRlbXMpO1xuICAgICAgICAgIHVwZGF0ZVJlc3VsdHNEaXNwbGF5KGZpbHRlcmVkSXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgICAgIFxuICAgIH0pOyAgIFxufVxuXG5hc3luYyBlc1JlY3VycmVudGUodGFyZWE6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+e1xuICBjb25zdCBvcGNpb25lcyA9IFtcIlNpXCIsXCJOb1wiXSA7XG4gIGNvbnN0IHZhbG9yZXMgPSBbdHJ1ZSxmYWxzZV07XG4gIGNvbnN0IHBsYWNlaG9sZGVyID0gYCR7dGFyZWF9IGVzIHRhcmVhIHJlY3VycmVudGU/YDtcbiAgY29uc3QgbW9kYWwgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lcywgdmFsb3JlcywgcGxhY2Vob2xkZXIpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBtb2RhbC5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbn0iLCAiaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcblxuZXhwb3J0IGNsYXNzIHJlZ2lzdHJvVGllbXBvQVBJIHtcbiAgICBwcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgXG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmNyZWFyT2JqZXRvUmVnaXN0cm8odGhpcy5wbHVnaW4pO1xuICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLnZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgIGlmIChyZWdpc3Ryby5kZXRlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cm87IC8vIERldnVlbHZlIGVsIHJlZ2lzdHJvIGFjdHVhbCB5IGRldGllbmUgbGEgZWplY3VjaVx1MDBGM24gYXF1XHUwMEVEXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS5kZWZpbmlyVGlwb1JlZ2lzdHJvKHJlZ2lzdHJvLHRoaXMucGx1Z2luLmFwcClcbiAgICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RybzsgLy8gRGV2dWVsdmUgZWwgcmVnaXN0cm8gYWN0dWFsIHkgZGV0aWVuZSBsYSBlamVjdWNpXHUwMEYzbiBhcXVcdTAwRURcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmNvbnN0cnVpck5vbWJyZXlBbGlhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKVxuICAgICAgICByZXR1cm4gcmVnaXN0cm87XG4gICAgICAgIH1jYXRjaCAoZXJyb3Ipe1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgIFxuICAgICAgICAgICAgXG5cbiAgICB9XG5cbiAgICBtaU1ldG9kbygpIHtcbiAgICAgIC8vIFR1IGxcdTAwRjNnaWNhIGFxdVx1MDBFRFxuICAgICAgcmV0dXJuIFwiUmVzdWx0YWRvIGRlIG1pIE1ldG9kb1wiO1xuICAgIH1cbiAgXG4gICAgb3Ryb01ldG9kbyhwYXJhbSkge1xuICAgICAgLy8gTFx1MDBGM2dpY2EgdXRpbGl6YW5kbyBwYXJhbVxuICAgICAgcmV0dXJuIGBSZXN1bHRhZG8gZGUgb3Ryb01ldG9kbyBjb24gJHtwYXJhbX1gO1xuICAgIH1cbiAgfVxuICAiLCAiLy9pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuXG5leHBvcnQgY2xhc3Mgc3RhcnRlckFQSSB7XG4gICAgLy9wcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IG9iamVjdDsgLy8gQXN1bWllbmRvIHF1ZSBlcyB1biBzdHJpbmdcbiAgICBwcml2YXRlIHRwOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBub3RhOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBwYXRoQ2FtcG9zOiBzdHJpbmc7IFxuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIEluaWNpYWxpemEgZm9sZGVyIGUgaW5kaWNlIGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvcyBvIGxcdTAwRjNnaWNhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYSA9IHt9O1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgdGhpcy50cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBjcmVhck5vdGEoaW5mb1N1YnNpc3RlbWEsIGNhbXBvcykge1xuICAgICAgICBcbiAgICAgICAgbGV0IG5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YSBlbCBvYmpldG8gbm90YS5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9TdWJzaXN0ZW1hLCBpbmZvU3Vic2lzdGVtYSk7IFxuICAgICAgICBpZiAodGhpcy5pbmZvU3Vic2lzdGVtYS5kZWZpbmVkKXtcbiAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tpbmZvU3Vic2lzdGVtYS5mb2xkZXJdXG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuaW5kaWNlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuaW5kaWNlXVxuICAgICAgICB9XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIC8vIENyZWFyIHVuIHRwIHBhcmEgYWNjZWRlciBhIGZ1bmNpb25hbGlkYWRlcyBkZSB0ZW1wbGF0ZXIuXG4gICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2EgZWwgbm9tYnJlIGRlbCBjYW1wbyBwYXJhIGNvbnN0cnVpciBlbCBub21icmUgZGUgbGEgZnVuY2lcdTAwRjNuIChwLiBlai4sIFwiZ2V0SWRcIilcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gYGdldCR7Y2FtcG8uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1wby5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBleGlzdGUgdW5hIGZ1bmNpXHUwMEYzbiBjb24gZXNlIG5vbWJyZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExsYW1hIGEgbGEgZnVuY2lcdTAwRjNuIGRlIG1hbmVyYSBkaW5cdTAwRTFtaWNhIHkgYXNpZ25hIGVsIHJlc3VsdGFkbyBhbCBjYW1wbyBjb3JyZXNwb25kaWVudGUgZGUgbGEgbm90YS5cbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGFbY2FtcG9dID0gYXdhaXQgdGhpc1tmdW5jdGlvbk5hbWVdKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBmdW5jaVx1MDBGM24gJHtmdW5jdGlvbk5hbWV9IG5vIGVzdFx1MDBFMSBkZWZpbmlkYS5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hbmVqYSBlbCBjYXNvIGVuIHF1ZSBsYSBmdW5jaVx1MDBGM24gbm8gZXN0XHUwMEU5IGRlZmluaWRhLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBhc2lnbmFyIHVuIHZhbG9yIHBvciBkZWZlY3RvIGEgbm90YVtjYW1wb10gbyBzaW1wbGVtZW50ZSBjb250aW51YXIuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cbiAgICBcblxuICAgIGdldFRwKCl7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vICBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlMgY3VhbmRvIGN1cnJlbnQgRnVuY3Rpb25zIGVzdGEgY2FyZ2Fkby5cbiAgICAgICAgLy9jb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbJ3RlbXBsYXRlci1vYnNpZGlhbiddO1xuICAgICAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgICAgIC8vIC0+IHZlcnNpb24gcXVlIGZhbGxhIHNpIG5vIGVzdGEgYXJyaWJhIGVsIHBsdWdpbiBwb3JxdWUgaGFjZSBnZXQgZGVsIHBsdWdpbiBkaXJlY3RvLiBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbigndGVtcGxhdGVyLW9ic2lkaWFuJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgdGhlIGRhdGUgbW9kdWxlXG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5zeXN0ZW0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ3RwIGVuIFlBTUxVcGRhdGVyQVBJIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgcmV0dXJuIHRwO1xuICAgIH1cblxuICAgIC8vIEVqZW1wbG8gZGUgZnVuY2lcdTAwRjNuIGdldENhbXBvIHNpbXVsYWRhLiBEZWJlcyBkZWZpbmlyIGZ1bmNpb25lcyBzaW1pbGFyZXMgcGFyYSAnaWQnLCAnZmVjaGEnLCBldGMuXG4gICAgYXN5bmMgZ2V0SWQoKSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbWF4SWQgPSAwO1xuXG4gICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgSURzIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcbiAgICAgICAgdGhpcy5ub3RhLmlkID0gbmV4dElkO1xuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRGZWNoYSgpIHtcbiAgICAgICAgLy8gU2ltdWxhY2lcdTAwRjNuIGRlIG9idGVuZXIgdW4gSUQgZGUgbWFuZXJhIGFzXHUwMEVEbmNyb25hLlxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICB9XG5cbiAgICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICAgICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRTZWNJZCgpe1xuXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFRpdHVsbygpe1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGxldCB0aXR1bG8gPSBhd2FpdCBwcm9tcHQoYFRpdHVsbyBkZSBlc3RlKGEpICR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfWAsIGAke3RoaXMuaW5mb1N1YnNpc3RlbWEubmFtZX0gLSAke3RoaXMubm90YS5pZH1gLCB0cnVlKVxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0aXR1bG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IHRpdHVsbztcbiAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpe1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGxldCBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGRlc2NyaXBjaW9uID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgICAgIFxuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgLy8gMCAtPiBOb21icmUsIDEgLT4gdHlwZSArIE5vbWJyZVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7XG4gICAgICAgIGxldCBzaUFzdW50bywgbm9tYnJlOyBcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpeyBcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTsgXG4gICAgICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvID0ge307XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLnNpQXN1bnRvID0gc2lBc3VudG87XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLm5vbWJyZSA9IG5vbWJyZTsgICAgXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZX1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oKXtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb24sIHRhZ0NsYXNpZmljYWNpb24sIGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWDtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb249PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgbGV0IHByb21wdCA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIG5vbWJyZSBkZSBsYSBudWV2YSBjbGFzaWZpY2FjaVx1MDBGM24gcXVlIHZhcyBhIGluZ3Jlc2FyP1wiLCBcIk1pQ2xhc2lmaWNhY2lcdTAwRjNuXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIlx0XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIGxldCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBsZXQgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7Y2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbn07XG4gICAgfVxuICAgIC8vIC0+XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKXtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuXHQgICAgbGV0IGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gSW5mb3JtYWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REZFMiAtPiBGaW5hbGl6YWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gZWplY3VjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgbnVldm8gZXN0YWRvOlwiKTtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmlsZW5hbWUoKXtcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vaW5kZXgke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH1gKVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmZpbGVOYW1lO1xuICAgIH1cblxuICB9XG4gICIsICIvL2ltcG9ydCB7dXRpbHNBUEl9IGZyb20gJy4vdXRpbHNBUEknXG5cbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgWUFNTFVwZGF0ZXJBUEkge1xuICAgIC8vcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGluZm9TdWJzaXN0ZW1hOiBvYmplY3Q7IC8vIEFzdW1pZW5kbyBxdWUgZXMgdW4gc3RyaW5nXG4gICAgcHJpdmF0ZSB0cDogb2JqZWN0O1xuICAgIHByaXZhdGUgbm90YTogb2JqZWN0O1xuICAgIHByaXZhdGUgcGF0aENhbXBvczogc3RyaW5nOyBcbiAgICBpbmZvTm90YToge307XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBmb2xkZXIgZSBpbmRpY2UgY29uIHZhbG9yZXMgcHJlZGV0ZXJtaW5hZG9zIG8gbFx1MDBGM2dpY2EgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICB0aGlzLmluZm9Ob3RhID0ge307XG4gICAgICAgIHRoaXMubm90YSA9IHt9O1xuICAgICAgICB0aGlzLnRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cbiAgICBcblxuICAgIGFzeW5jIGFjdHVhbGl6YXJOb3RhKGluZm9Ob3RhOiBhbnksIGNhbXBvczogYW55KSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbm90YSA9IHt9OyAvLyBJbmljaWFsaXphIGVsIG9iamV0byBub3RhLlxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuaW5mb05vdGEsIGluZm9Ob3RhKTsgXG4gICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGFyYSBjb25zdHJ1aXIgZWwgbm9tYnJlIGRlIGxhIGZ1bmNpXHUwMEYzbiAocC4gZWouLCBcImdldElkXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYSB5IGFzaWduYSBlbCByZXN1bHRhZG8gYWwgY2FtcG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIG5vdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RhW2NhbXBvXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgYXNpZ25hciB1biB2YWxvciBwb3IgZGVmZWN0byBhIG5vdGFbY2FtcG9dIG8gc2ltcGxlbWVudGUgY29udGludWFyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgbm90YVxuICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhub3RhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVqZWN1dGEgdHUgY1x1MDBGM2RpZ28gYXF1XHUwMEVEIHNpIGVsIG9iamV0byBgbm90YWAgdGllbmUgbVx1MDBFMXMgZGUgdW5hIHByb3BpZWRhZFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMobm90YSwgaW5mb05vdGEuZmlsZS5wYXRoKVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvL05vIHNlIGVuY29udHJhcm9uIGNhbXBvcyBwYXJhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGVsIGNcdTAwRjNkaWdvIHBhcmEgcHJvY2VzYXIgZWwgb2JqZXRvIG5vdGEsIGNvbW8gZ3VhcmRhciBlbiB1biBhcmNoaXZvIGRlbnRybyBkZSAnZm9sZGVyJy5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5vdGE7IC8vIFJldG9ybmEgZWwgb2JqZXRvIG5vdGEgY29uIHRvZGFzIGxhcyBwcm9waWVkYWRlcyBhZ3JlZ2FkYXMuXG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyhub3RhLCBydXRhKSB7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YSk7XG4gICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJdGVyYXIgc29icmUgY2FkYSBwcm9waWVkYWQgZGVsIG9iamV0byAnbm90YSdcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbXBvIGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShjYW1wbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gZW4gZWwgZnJvbnRtYXR0ZXIgY29uIGVsIHZhbG9yIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltjYW1wb10gPSBub3RhW2NhbXBvXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiB0aGUgZGF0ZSBtb2R1bGVcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICB9XG5cbiAgICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICAgICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgICB9XG5cblxuICAgIGFzeW5jIGdldEhvcmFGaW5hbCgpe1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaWVtcG9UcmFiYWphZG8oKXtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgbGV0IGhvcmFJbmljaW9TdHIgPSB0aGlzLmluZm9Ob3RhLmhvcmFJbmljaW87XG4gICAgICAgICAgICAvLyBTdXBvbmllbmRvIHF1ZSBlbCBmb3JtYXRvIGVzIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIgeSBxdWllcmVzIGNvbnZlcnRpcmxvIGEgdW4gZm9ybWF0byByZWNvbm9jaWRvIHBvciBEYXRlXG4gICAgICAgIC8vIFByaW1lcm8sIGVsaW1pbmEgbGEgcGFydGUgZGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYSwgeWEgcXVlIERhdGUoKSBubyBsYSBuZWNlc2l0YVxuICAgICAgICBsZXQgW2ZlY2hhLCAsIGhvcmFdID0gaG9yYUluaWNpb1N0ci5zcGxpdCgnICcpO1xuICAgICAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7ZmVjaGF9VCR7aG9yYX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgb2JqZXRvcyBEYXRlXG4gICAgICAgIGxldCBob3JhSW5pY2lvID0gbmV3IERhdGUoZmVjaGFIb3JhSVNPKTtcbiAgICAgICAgbGV0IGFob3JhID0gbmV3IERhdGUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGFyIGxhIGRpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgICAgIGxldCBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3MgPSBhaG9yYSAtIGhvcmFJbmljaW87XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0U2VjSWQoKXtcblxuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXR1bG8oKXtcbiAgICAgICAgbGV0IHRpdHVsbyA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChgVGl0dWxvIGRlIGVzdGUoYSkgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLm5hbWV9YCwgYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCl7XG4gICAgICAgIGxldCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGRlc2NyaXBjaW9uID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgICAgIFxuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgLy8gMCAtPiBOb21icmUsIDEgLT4gdHlwZSArIE5vbWJyZVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7XG4gICAgICAgIGxldCBzaUFzdW50bywgbm9tYnJlOyBcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpeyBcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTsgXG4gICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvID0ge307XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLnNpQXN1bnRvID0gc2lBc3VudG87XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLm5vbWJyZSA9IG5vbWJyZTsgICAgXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZX1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oKXtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb24sIHRhZ0NsYXNpZmljYWNpb24sIGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWDtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb249PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIlx0XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIGxldCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBsZXQgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7Y2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbn07XG4gICAgfVxuICAgIC8vIC0+XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKXtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuXHQgICAgbGV0IGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gSW5mb3JtYWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REZFMiAtPiBGaW5hbGl6YWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gZWplY3VjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgbnVldm8gZXN0YWRvOlwiKTtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmlsZW5hbWUoKXtcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vaW5kZXgke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH1gKVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmZpbGVOYW1lO1xuICAgIH1cblxuICAgXG5cbiAgfVxuICAiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUUsSUFBQUEsb0JBQXVCOzs7QUNBekIsc0JBQWtEO0FBRTNDLElBQU0sd0JBQU4sY0FBb0Ms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QTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFB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SSxXQUFXLElBQUk7QUFDckMsU0FBSyxtQkFBbUI7QUFFeEIsWUFBUSxJQUFJLGtEQUErQztBQUFBLEVBRTdEO0FBQUEsRUFFQSxxQkFBcUI7QUE3QzNCO0FBK0NRLFFBQUksS0FBSyxTQUFTLFlBQVk7QUFDNUIsaUJBQUssZUFBTCxtQkFBaUIsU0FBUztBQUFBLElBQzlCLE9BQU87QUFDSCxpQkFBSyxlQUFMLG1CQUFpQixXQUFXO0FBQUEsSUFDaEM7QUFDRSxRQUFJLEtBQUssU0FBUyxzQkFBc0I7QUFDcEMsaUJBQUsseUJBQUwsbUJBQTJCLFNBQVM7QUFBQSxJQUN4QyxPQUFPO0FBQ0gsaUJBQUsseUJBQUwsbUJBQTJCLFdBQVc7QUFBQSxJQUMxQztBQUNDLFFBQUksS0FBSyxTQUFTLHNCQUFzQjtBQUN2QyxpQkFBSyx1QkFBTCxtQkFBeUI7QUFBQSxJQUUzQixPQUFPO0FBQ0wsaUJBQUssdUJBQUwsbUJBQXlCO0FBQUEsSUFFM0I7QUFBQSxFQUVKO0FBQUEsRUFFRSxNQUFNLFdBQVc7QUFFYixZQUFRLElBQUksd0NBQXFDO0FBQ2pELFdBQU8sUUFBUSxRQUFRO0FBQUEsRUFDM0I7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUVuQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBRTNFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFFbkIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBR2pDLFNBQUssbUJBQW1CO0FBQUEsRUFFMUI7QUFDSjsiLAogICJuYW1lcyI6IFsiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiYXBwIiwgInJlZ2lzdGVyUmliYm9uTWVudSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJyZWdpc3RlckNvbW1hbmRzIiwgImRlYWN0aXZhdGVDb21tYW5kcyIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm1lbnVPdHJvIiwgInRpcG8iLCAiYXBwIiwgImFsaWFzIiwgImFwcCIsICJmcm9udG1hdHRlciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZnJvbnRtYXR0ZXIiXQp9Cg==
