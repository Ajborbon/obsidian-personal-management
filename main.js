/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian35 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Archivo de Bandeja de Entrada.").setDesc("Establece la ruta de la Bandeja de entrada GTD.").addText((text) => text.setValue(this.plugin.settings.file_Inbox).onChange(async (value) => {
          this.plugin.settings.file_Inbox = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const transaccionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Transacciones"' });
        transaccionesTitle.setAttribute("data-title", 'Subsistema de "transacciones"');
        transaccionesTitle.style.cursor = "pointer";
        const transaccionesContent = tabContent.createDiv();
        transaccionesContent.style.display = "none";
        transaccionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(transaccionesContent).setName("Carpeta de Modulos del Sistema de Transacciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de las transacciones.").addText((text) => text.setValue(this.plugin.settings.folder_Transacciones).onChange(async (value) => {
          this.plugin.settings.folder_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(transaccionesContent).setName("\xCDndice de Transacciones").setDesc("Establece la ruta del \xEDndice de Transacciones.").addText((text) => text.setValue(this.plugin.settings.indice_Transacciones).onChange(async (value) => {
          this.plugin.settings.indice_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
  openTab(arg0) {
    throw new Error("Method not implemented.");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");

// src/modules/moduloBase/utils/fileLinkModal.ts
var import_obsidian3 = require("obsidian");
var FileLinkModal = class extends import_obsidian3.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    let { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.justifyContent = "center";
    contentEl.style.alignItems = "center";
    contentEl.style.height = "50%";
    contentEl.createEl("h1", {
      text: "Insertar el link de un archivo.",
      attr: { style: "text-align: center;" }
      // Asegura que el texto del título esté centrado si es más largo que una línea
    });
    const inputContainer = contentEl.createDiv();
    inputContainer.style.margin = "10px";
    const fileInput = inputContainer.createEl("input", { type: "file" });
    fileInput.style.display = "none";
    const fileButton = inputContainer.createEl("button", {
      text: "Seleccione su archivo",
      cls: "mod-cta"
    });
    fileButton.style.padding = "5px 10px";
    fileButton.style.fontSize = "16px";
    fileButton.style.marginTop = "5px";
    fileButton.style.cursor = "pointer";
    fileButton.onclick = () => fileInput.click();
    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        this.insertLinkAtCursor(file.path, file.name);
      }
      this.close();
    };
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  async insertLinkAtCursor(filePath, fileName) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (activeLeaf) {
      const editor = activeLeaf.view.sourceMode.cmEditor;
      const cursor = editor.getCursor();
      const linkText = `[${fileName}](<file://${filePath}>)`;
      editor.replaceRange(linkText, cursor);
    }
  }
};
async function insertFileLink(app2) {
  new FileLinkModal(app2).open();
}

// src/modules/moduloBase/commands.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian4 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian5.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
  const comando4 = plugin.addCommand({
    id: "crear-link-Archivo",
    name: "Crear un link a archivo del Disco.",
    callback: async () => {
      await insertFileLink(app);
    }
  });
  plugin.registeredCommandIdsMB.push(comando4.id);
  const comando5 = plugin.addCommand({
    id: "abrir-nota-activa",
    name: "Abrir Nota Activa",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-nota-activa");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-nota-activa"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-nota-activa")[0]
      );
    }
  });
  plugin.registeredCommandIdsMB.push(comando5.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian10 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian7 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian11 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian17 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian14 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian13 = require("obsidian");

// src/modules/modales/seleccionModal.ts
var import_obsidian12 = require("obsidian");
var SeleccionModal = class extends import_obsidian12.FuzzySuggestModal {
  // Flag para determinar si se ha hecho una selección.
  // Constructor de la clase.
  constructor(app2, titles, values, placeholder) {
    super(app2);
    // Objeto para mapear títulos a valores.
    this.seleccionHecha = false;
    this.titles = titles;
    this.values = values;
    this.valueMap = titles.reduce((acc, title, index) => {
      acc[title] = values[index];
      return acc;
    }, {});
    this.setPlaceholder(placeholder);
  }
  // Método para obtener los ítems (títulos) que se mostrarán en el modal.
  getItems() {
    return this.titles;
  }
  // Método para obtener el texto que se mostrará para cada ítem en el modal.
  getItemText(item) {
    return item;
  }
  // Método que se llama al cerrar el modal.
  onClose() {
    if (!this.seleccionHecha) {
      this.reject(new Error("Modal cerrado sin selecci\xF3n"));
    }
  }
  // Método para manejar la selección de un ítem.
  selectSuggestion(item, evt) {
    this.seleccionHecha = true;
    super.selectSuggestion(item, evt);
  }
  // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
  onChooseItem(item, evt) {
    const value = this.valueMap[item];
    this.resolve(value);
  }
  // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
  openAndAwaitSelection() {
    return new Promise((resolve, reject) => {
      this.resolve = resolve;
      this.reject = reject;
      this.open();
    });
  }
};

// src/modules/moduloRegistroTiempo/utils.ts
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset2 = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset2);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian13.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian13.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian13.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian13.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian14.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian15 = require("obsidian");
var modal_Ahora = class extends import_obsidian15.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian15.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian15.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian15.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian16.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian16.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
  const id4 = plugin.addCommand({
    id: "vista-registro-tiempo-activa",
    name: "Mostrar RT Activo",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-registro-activo");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-registro-activo"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-registro-activo")[0]
      );
    }
  });
  plugin.registeredCommandIdsRT.push(id4.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian16.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  moduloGTD: true,
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Transacciones: "Subsistemas/Transacciones",
  indice_Transacciones: "Subsistemas/Transacciones/Indice Transacciones",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  folder_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Contenido",
  indice_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Indice Contenido para Estudio",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes",
  folder_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_ProyectosQ: "Estructura/Proyectos de Q",
  indice_ProyectosQ: "Estructura/Proyectos de Q/Indice Proyectos de Q",
  file_Inbox: "Estructura/GTD/Bandeja de Entrada/Bandeja de Entrada",
  folder_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Estructura/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Estructura/GTD/Revision Semanal/Indice Revision Semanal",
  // Journal
  folder_Diario: "Estructura/Journal/Diario/Notas",
  indice_Diario: "Estructura/Journal/Diario/Indice Diario",
  folder_Semanal: "Estructura/Journal/Semanal/Notas",
  indice_Semanal: "Estructura/Journal/Semanal/Indice Semanal",
  folder_Mensual: "Estructura/Journal/Mensual/Notas",
  indice_Mensual: "Estructura/Journal/Mensual/Indice Mensual",
  folder_Trimestral: "Estructura/Journal/Trimestral/Notas",
  indice_Trimestral: "Estructura/Journal/Trimestral/Indice Trimestral",
  folder_Anual: "Estructura/Journal/Anual/Notas",
  indice_Anual: "Estructura/Journal/Anual/Indice Anual",
  // COMPASS
  folder_CompassAnual: "Estructura/Compass/Reportes/Anual",
  indice_CompassAnual: "Estructura/Compass/Reportes/Indice Compass Anual",
  folder_CompassTrimestral: "Estructura/Compass/Reportes/Trimestral",
  indice_CompassTrimestral: "Estructura/Compass/Reportes/Indice Compass trimestral",
  folder_ObjCompassAnual: "Estructura/Compass/Objetivos/Anual",
  indice_ObjCompassAnual: "Estructura/Compass/Objetivos/Indice Compass Anual",
  folder_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Trimestral",
  indice_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Indice Compass trimestral",
  // Registros Personales
  folder_Agradecimientos: "Registros Personales/Agradecimientos/Notas",
  indice_Agradecimientos: "Registros Personales/Agradecimientos/Indice Agradecimientos",
  folder_Reflexiones: "Registros Personales/Reflexiones/Notas",
  indice_Reflexiones: "Registros Personales/Reflexiones/Indice Reflexiones",
  folder_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Notas",
  indice_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Indice Registros Akashikos"
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian20 = require("obsidian");

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian19 = require("obsidian");

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian18 = require("obsidian");
var fuzzySelectOrCreate = class {
  constructor(app2, plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.app = app2;
    this.plugin = plugin;
  }
  createModal() {
    const modal = document.createElement("div");
    modal.setAttribute("id", "fuzzySearchModal");
    modal.style.position = "fixed";
    modal.style.top = "50%";
    modal.style.left = "50%";
    modal.style.transform = "translate(-50%, -50%)";
    modal.style.zIndex = "1000";
    modal.style.padding = "20px";
    modal.style.backgroundColor = "white";
    modal.style.border = "1px solid #ccc";
    modal.style.borderRadius = "5px";
    modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
    modal.style.width = "300px";
    const closeButton = document.createElement("button");
    closeButton.textContent = "\xD7";
    closeButton.style.position = "absolute";
    closeButton.style.top = "5px";
    closeButton.style.right = "5px";
    closeButton.style.border = "none";
    closeButton.style.background = "none";
    closeButton.style.cursor = "pointer";
    closeButton.style.fontSize = "16px";
    closeButton.style.fontWeight = "bold";
    closeButton.style.padding = "0px 4px";
    closeButton.style.borderRadius = "10px";
    closeButton.style.outline = "none";
    closeButton.style.boxShadow = "none";
    closeButton.onclick = () => modal.remove();
    modal.appendChild(closeButton);
    return modal;
  }
  filterItems(query, items) {
    return items.filter(
      (item) => item.value.toLowerCase().includes(query.toLowerCase())
    );
  }
  async updateYAMLFields(tipo, selectedValue, selectedGroup) {
    try {
      debugger;
      const file = app.vault.getAbstractFileByPath(this.pathCampos);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        debugger;
        let currentActs = frontmatter[tipo] || [];
        let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
        frontmatter[tipo] = newValueForActs;
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  async showFuzzySearchModal(items, groups, tipo) {
    return new Promise((resolve, reject) => {
      let selectedValue = "";
      let selectedGroup = "";
      const modal = this.createModal();
      const title = document.createElement("h2");
      title.textContent = "Busca o crea tu actividad";
      title.style.textAlign = "center";
      modal.appendChild(title);
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "Escribe tu actividad...";
      input.style.width = "80%";
      input.style.textAlign = "center";
      modal.style.display = "flex";
      modal.style.flexDirection = "column";
      modal.style.alignItems = "center";
      modal.appendChild(input);
      const spacer = document.createElement("div");
      spacer.style.height = "16px";
      modal.appendChild(spacer);
      const resultsDiv = document.createElement("div");
      modal.appendChild(resultsDiv);
      function updateResultsDisplay(filteredResults, menuOtro2) {
        resultsDiv.innerHTML = "";
        filteredResults.forEach((result) => {
          const div = document.createElement("div");
          div.textContent = result.value;
          div.style.cursor = "pointer";
          div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
          div.onmouseout = () => div.style.backgroundColor = "transparent";
          div.onclick = () => {
            selectedValue = result.activity;
            selectedGroup = result.group;
            modal.remove();
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(div);
        });
        if (filteredResults.length === 0 && input.value.trim() !== "") {
          const createNewDiv = document.createElement("div");
          createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
          createNewDiv.style.cursor = "pointer";
          createNewDiv.style.color = "blue";
          createNewDiv.onclick = () => {
            selectedValue = input.value;
            debugger;
            if (tipo == void 0) {
              tipo = "actsTemas";
            }
            selectGroupForNewActivity(menuOtro2, tipo);
          };
          resultsDiv.appendChild(createNewDiv);
        }
      }
      function selectGroupForNewActivity(menuOtro2, tipo2) {
        resultsDiv.innerHTML = "";
        input.remove();
        spacer.remove();
        title.remove();
        const texto = document.createElement("p");
        texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
        ;
        texto.style.textAlign = "center";
        resultsDiv.appendChild(texto);
        groups.forEach((group) => {
          const groupDiv = document.createElement("div");
          groupDiv.textContent = group;
          groupDiv.style.cursor = "pointer";
          groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
          groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
          groupDiv.onclick = async () => {
            selectedGroup = group;
            modal.remove();
            let recurrente = await menuOtro2.esRecurrente(selectedValue);
            if (recurrente) {
              await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
            }
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(groupDiv);
        });
      }
      function displaySelectedValue(activity, group) {
        resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
      }
      input.oninput = () => {
        const filteredItems = this.filterItems(input.value, items);
        updateResultsDisplay(filteredItems, this);
      };
      document.body.appendChild(modal);
    });
  }
  async esRecurrente(tarea) {
    const opciones = ["Si", "No"];
    const valores = [true, false];
    const placeholder = `${tarea} es tarea recurrente?`;
    const modal = new SeleccionModal(app, opciones, valores, placeholder);
    try {
      return await modal.openAndAwaitSelection();
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      return false;
    }
  }
};

// node_modules/luxon/src/errors.js
var LuxonError = class extends Error {
};
var InvalidDateTimeError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid DateTime: ${reason.toMessage()}`);
  }
};
var InvalidIntervalError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid Interval: ${reason.toMessage()}`);
  }
};
var InvalidDurationError = class extends LuxonError {
  constructor(reason) {
    super(`Invalid Duration: ${reason.toMessage()}`);
  }
};
var ConflictingSpecificationError = class extends LuxonError {
};
var InvalidUnitError = class extends LuxonError {
  constructor(unit) {
    super(`Invalid unit ${unit}`);
  }
};
var InvalidArgumentError = class extends LuxonError {
};
var ZoneIsAbstractError = class extends LuxonError {
  constructor() {
    super("Zone is an abstract class");
  }
};

// node_modules/luxon/src/impl/formats.js
var n = "numeric";
var s = "short";
var l = "long";
var DATE_SHORT = {
  year: n,
  month: n,
  day: n
};
var DATE_MED = {
  year: n,
  month: s,
  day: n
};
var DATE_MED_WITH_WEEKDAY = {
  year: n,
  month: s,
  day: n,
  weekday: s
};
var DATE_FULL = {
  year: n,
  month: l,
  day: n
};
var DATE_HUGE = {
  year: n,
  month: l,
  day: n,
  weekday: l
};
var TIME_SIMPLE = {
  hour: n,
  minute: n
};
var TIME_WITH_SECONDS = {
  hour: n,
  minute: n,
  second: n
};
var TIME_WITH_SHORT_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  timeZoneName: s
};
var TIME_WITH_LONG_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  timeZoneName: l
};
var TIME_24_SIMPLE = {
  hour: n,
  minute: n,
  hourCycle: "h23"
};
var TIME_24_WITH_SECONDS = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23"
};
var TIME_24_WITH_SHORT_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23",
  timeZoneName: s
};
var TIME_24_WITH_LONG_OFFSET = {
  hour: n,
  minute: n,
  second: n,
  hourCycle: "h23",
  timeZoneName: l
};
var DATETIME_SHORT = {
  year: n,
  month: n,
  day: n,
  hour: n,
  minute: n
};
var DATETIME_SHORT_WITH_SECONDS = {
  year: n,
  month: n,
  day: n,
  hour: n,
  minute: n,
  second: n
};
var DATETIME_MED = {
  year: n,
  month: s,
  day: n,
  hour: n,
  minute: n
};
var DATETIME_MED_WITH_SECONDS = {
  year: n,
  month: s,
  day: n,
  hour: n,
  minute: n,
  second: n
};
var DATETIME_MED_WITH_WEEKDAY = {
  year: n,
  month: s,
  day: n,
  weekday: s,
  hour: n,
  minute: n
};
var DATETIME_FULL = {
  year: n,
  month: l,
  day: n,
  hour: n,
  minute: n,
  timeZoneName: s
};
var DATETIME_FULL_WITH_SECONDS = {
  year: n,
  month: l,
  day: n,
  hour: n,
  minute: n,
  second: n,
  timeZoneName: s
};
var DATETIME_HUGE = {
  year: n,
  month: l,
  day: n,
  weekday: l,
  hour: n,
  minute: n,
  timeZoneName: l
};
var DATETIME_HUGE_WITH_SECONDS = {
  year: n,
  month: l,
  day: n,
  weekday: l,
  hour: n,
  minute: n,
  second: n,
  timeZoneName: l
};

// node_modules/luxon/src/zone.js
var Zone = class {
  /**
   * The type of zone
   * @abstract
   * @type {string}
   */
  get type() {
    throw new ZoneIsAbstractError();
  }
  /**
   * The name of this zone.
   * @abstract
   * @type {string}
   */
  get name() {
    throw new ZoneIsAbstractError();
  }
  get ianaName() {
    return this.name;
  }
  /**
   * Returns whether the offset is known to be fixed for the whole year.
   * @abstract
   * @type {boolean}
   */
  get isUniversal() {
    throw new ZoneIsAbstractError();
  }
  /**
   * Returns the offset's common name (such as EST) at the specified timestamp
   * @abstract
   * @param {number} ts - Epoch milliseconds for which to get the name
   * @param {Object} opts - Options to affect the format
   * @param {string} opts.format - What style of offset to return. Accepts 'long' or 'short'.
   * @param {string} opts.locale - What locale to return the offset name in.
   * @return {string}
   */
  offsetName(ts, opts) {
    throw new ZoneIsAbstractError();
  }
  /**
   * Returns the offset's value as a string
   * @abstract
   * @param {number} ts - Epoch milliseconds for which to get the offset
   * @param {string} format - What style of offset to return.
   *                          Accepts 'narrow', 'short', or 'techie'. Returning '+6', '+06:00', or '+0600' respectively
   * @return {string}
   */
  formatOffset(ts, format) {
    throw new ZoneIsAbstractError();
  }
  /**
   * Return the offset in minutes for this zone at the specified timestamp.
   * @abstract
   * @param {number} ts - Epoch milliseconds for which to compute the offset
   * @return {number}
   */
  offset(ts) {
    throw new ZoneIsAbstractError();
  }
  /**
   * Return whether this Zone is equal to another zone
   * @abstract
   * @param {Zone} otherZone - the zone to compare
   * @return {boolean}
   */
  equals(otherZone) {
    throw new ZoneIsAbstractError();
  }
  /**
   * Return whether this Zone is valid.
   * @abstract
   * @type {boolean}
   */
  get isValid() {
    throw new ZoneIsAbstractError();
  }
};

// node_modules/luxon/src/zones/systemZone.js
var singleton = null;
var SystemZone = class _SystemZone extends Zone {
  /**
   * Get a singleton instance of the local zone
   * @return {SystemZone}
   */
  static get instance() {
    if (singleton === null) {
      singleton = new _SystemZone();
    }
    return singleton;
  }
  /** @override **/
  get type() {
    return "system";
  }
  /** @override **/
  get name() {
    return new Intl.DateTimeFormat().resolvedOptions().timeZone;
  }
  /** @override **/
  get isUniversal() {
    return false;
  }
  /** @override **/
  offsetName(ts, { format, locale }) {
    return parseZoneInfo(ts, format, locale);
  }
  /** @override **/
  formatOffset(ts, format) {
    return formatOffset(this.offset(ts), format);
  }
  /** @override **/
  offset(ts) {
    return -new Date(ts).getTimezoneOffset();
  }
  /** @override **/
  equals(otherZone) {
    return otherZone.type === "system";
  }
  /** @override **/
  get isValid() {
    return true;
  }
};

// node_modules/luxon/src/zones/IANAZone.js
var dtfCache = {};
function makeDTF(zone) {
  if (!dtfCache[zone]) {
    dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: zone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      era: "short"
    });
  }
  return dtfCache[zone];
}
var typeToPos = {
  year: 0,
  month: 1,
  day: 2,
  era: 3,
  hour: 4,
  minute: 5,
  second: 6
};
function hackyOffset(dtf, date) {
  const formatted = dtf.format(date).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;
  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
}
function partsOffset(dtf, date) {
  const formatted = dtf.formatToParts(date);
  const filled = [];
  for (let i = 0; i < formatted.length; i++) {
    const { type: type2, value } = formatted[i];
    const pos = typeToPos[type2];
    if (type2 === "era") {
      filled[pos] = value;
    } else if (!isUndefined(pos)) {
      filled[pos] = parseInt(value, 10);
    }
  }
  return filled;
}
var ianaZoneCache = {};
var IANAZone = class _IANAZone extends Zone {
  /**
   * @param {string} name - Zone name
   * @return {IANAZone}
   */
  static create(name) {
    if (!ianaZoneCache[name]) {
      ianaZoneCache[name] = new _IANAZone(name);
    }
    return ianaZoneCache[name];
  }
  /**
   * Reset local caches. Should only be necessary in testing scenarios.
   * @return {void}
   */
  static resetCache() {
    ianaZoneCache = {};
    dtfCache = {};
  }
  /**
   * Returns whether the provided string is a valid specifier. This only checks the string's format, not that the specifier identifies a known zone; see isValidZone for that.
   * @param {string} s - The string to check validity on
   * @example IANAZone.isValidSpecifier("America/New_York") //=> true
   * @example IANAZone.isValidSpecifier("Sport~~blorp") //=> false
   * @deprecated This method returns false for some valid IANA names. Use isValidZone instead.
   * @return {boolean}
   */
  static isValidSpecifier(s2) {
    return this.isValidZone(s2);
  }
  /**
   * Returns whether the provided string identifies a real zone
   * @param {string} zone - The string to check
   * @example IANAZone.isValidZone("America/New_York") //=> true
   * @example IANAZone.isValidZone("Fantasia/Castle") //=> false
   * @example IANAZone.isValidZone("Sport~~blorp") //=> false
   * @return {boolean}
   */
  static isValidZone(zone) {
    if (!zone) {
      return false;
    }
    try {
      new Intl.DateTimeFormat("en-US", { timeZone: zone }).format();
      return true;
    } catch (e) {
      return false;
    }
  }
  constructor(name) {
    super();
    this.zoneName = name;
    this.valid = _IANAZone.isValidZone(name);
  }
  /** @override **/
  get type() {
    return "iana";
  }
  /** @override **/
  get name() {
    return this.zoneName;
  }
  /** @override **/
  get isUniversal() {
    return false;
  }
  /** @override **/
  offsetName(ts, { format, locale }) {
    return parseZoneInfo(ts, format, locale, this.name);
  }
  /** @override **/
  formatOffset(ts, format) {
    return formatOffset(this.offset(ts), format);
  }
  /** @override **/
  offset(ts) {
    const date = new Date(ts);
    if (isNaN(date))
      return NaN;
    const dtf = makeDTF(this.name);
    let [year, month, day, adOrBc, hour, minute, second] = dtf.formatToParts ? partsOffset(dtf, date) : hackyOffset(dtf, date);
    if (adOrBc === "BC") {
      year = -Math.abs(year) + 1;
    }
    const adjustedHour = hour === 24 ? 0 : hour;
    const asUTC = objToLocalTS({
      year,
      month,
      day,
      hour: adjustedHour,
      minute,
      second,
      millisecond: 0
    });
    let asTS = +date;
    const over = asTS % 1e3;
    asTS -= over >= 0 ? over : 1e3 + over;
    return (asUTC - asTS) / (60 * 1e3);
  }
  /** @override **/
  equals(otherZone) {
    return otherZone.type === "iana" && otherZone.name === this.name;
  }
  /** @override **/
  get isValid() {
    return this.valid;
  }
};

// node_modules/luxon/src/impl/locale.js
var intlLFCache = {};
function getCachedLF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlLFCache[key];
  if (!dtf) {
    dtf = new Intl.ListFormat(locString, opts);
    intlLFCache[key] = dtf;
  }
  return dtf;
}
var intlDTCache = {};
function getCachedDTF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlDTCache[key];
  if (!dtf) {
    dtf = new Intl.DateTimeFormat(locString, opts);
    intlDTCache[key] = dtf;
  }
  return dtf;
}
var intlNumCache = {};
function getCachedINF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let inf = intlNumCache[key];
  if (!inf) {
    inf = new Intl.NumberFormat(locString, opts);
    intlNumCache[key] = inf;
  }
  return inf;
}
var intlRelCache = {};
function getCachedRTF(locString, opts = {}) {
  const { base, ...cacheKeyOpts } = opts;
  const key = JSON.stringify([locString, cacheKeyOpts]);
  let inf = intlRelCache[key];
  if (!inf) {
    inf = new Intl.RelativeTimeFormat(locString, opts);
    intlRelCache[key] = inf;
  }
  return inf;
}
var sysLocaleCache = null;
function systemLocale() {
  if (sysLocaleCache) {
    return sysLocaleCache;
  } else {
    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
    return sysLocaleCache;
  }
}
var weekInfoCache = {};
function getCachedWeekInfo(locString) {
  let data = weekInfoCache[locString];
  if (!data) {
    const locale = new Intl.Locale(locString);
    data = "getWeekInfo" in locale ? locale.getWeekInfo() : locale.weekInfo;
    weekInfoCache[locString] = data;
  }
  return data;
}
function parseLocaleString(localeStr) {
  const xIndex = localeStr.indexOf("-x-");
  if (xIndex !== -1) {
    localeStr = localeStr.substring(0, xIndex);
  }
  const uIndex = localeStr.indexOf("-u-");
  if (uIndex === -1) {
    return [localeStr];
  } else {
    let options;
    let selectedStr;
    try {
      options = getCachedDTF(localeStr).resolvedOptions();
      selectedStr = localeStr;
    } catch (e) {
      const smaller = localeStr.substring(0, uIndex);
      options = getCachedDTF(smaller).resolvedOptions();
      selectedStr = smaller;
    }
    const { numberingSystem, calendar } = options;
    return [selectedStr, numberingSystem, calendar];
  }
}
function intlConfigString(localeStr, numberingSystem, outputCalendar) {
  if (outputCalendar || numberingSystem) {
    if (!localeStr.includes("-u-")) {
      localeStr += "-u";
    }
    if (outputCalendar) {
      localeStr += `-ca-${outputCalendar}`;
    }
    if (numberingSystem) {
      localeStr += `-nu-${numberingSystem}`;
    }
    return localeStr;
  } else {
    return localeStr;
  }
}
function mapMonths(f) {
  const ms = [];
  for (let i = 1; i <= 12; i++) {
    const dt = DateTime.utc(2009, i, 1);
    ms.push(f(dt));
  }
  return ms;
}
function mapWeekdays(f) {
  const ms = [];
  for (let i = 1; i <= 7; i++) {
    const dt = DateTime.utc(2016, 11, 13 + i);
    ms.push(f(dt));
  }
  return ms;
}
function listStuff(loc, length, englishFn, intlFn) {
  const mode = loc.listingMode();
  if (mode === "error") {
    return null;
  } else if (mode === "en") {
    return englishFn(length);
  } else {
    return intlFn(length);
  }
}
function supportsFastNumbers(loc) {
  if (loc.numberingSystem && loc.numberingSystem !== "latn") {
    return false;
  } else {
    return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
  }
}
var PolyNumberFormatter = class {
  constructor(intl, forceSimple, opts) {
    this.padTo = opts.padTo || 0;
    this.floor = opts.floor || false;
    const { padTo, floor, ...otherOpts } = opts;
    if (!forceSimple || Object.keys(otherOpts).length > 0) {
      const intlOpts = { useGrouping: false, ...opts };
      if (opts.padTo > 0)
        intlOpts.minimumIntegerDigits = opts.padTo;
      this.inf = getCachedINF(intl, intlOpts);
    }
  }
  format(i) {
    if (this.inf) {
      const fixed = this.floor ? Math.floor(i) : i;
      return this.inf.format(fixed);
    } else {
      const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
      return padStart(fixed, this.padTo);
    }
  }
};
var PolyDateFormatter = class {
  constructor(dt, intl, opts) {
    this.opts = opts;
    this.originalZone = void 0;
    let z = void 0;
    if (this.opts.timeZone) {
      this.dt = dt;
    } else if (dt.zone.type === "fixed") {
      const gmtOffset = -1 * (dt.offset / 60);
      const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;
      if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
        z = offsetZ;
        this.dt = dt;
      } else {
        z = "UTC";
        this.dt = dt.offset === 0 ? dt : dt.setZone("UTC").plus({ minutes: dt.offset });
        this.originalZone = dt.zone;
      }
    } else if (dt.zone.type === "system") {
      this.dt = dt;
    } else if (dt.zone.type === "iana") {
      this.dt = dt;
      z = dt.zone.name;
    } else {
      z = "UTC";
      this.dt = dt.setZone("UTC").plus({ minutes: dt.offset });
      this.originalZone = dt.zone;
    }
    const intlOpts = { ...this.opts };
    intlOpts.timeZone = intlOpts.timeZone || z;
    this.dtf = getCachedDTF(intl, intlOpts);
  }
  format() {
    if (this.originalZone) {
      return this.formatToParts().map(({ value }) => value).join("");
    }
    return this.dtf.format(this.dt.toJSDate());
  }
  formatToParts() {
    const parts = this.dtf.formatToParts(this.dt.toJSDate());
    if (this.originalZone) {
      return parts.map((part) => {
        if (part.type === "timeZoneName") {
          const offsetName = this.originalZone.offsetName(this.dt.ts, {
            locale: this.dt.locale,
            format: this.opts.timeZoneName
          });
          return {
            ...part,
            value: offsetName
          };
        } else {
          return part;
        }
      });
    }
    return parts;
  }
  resolvedOptions() {
    return this.dtf.resolvedOptions();
  }
};
var PolyRelFormatter = class {
  constructor(intl, isEnglish, opts) {
    this.opts = { style: "long", ...opts };
    if (!isEnglish && hasRelative()) {
      this.rtf = getCachedRTF(intl, opts);
    }
  }
  format(count, unit) {
    if (this.rtf) {
      return this.rtf.format(count, unit);
    } else {
      return formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== "long");
    }
  }
  formatToParts(count, unit) {
    if (this.rtf) {
      return this.rtf.formatToParts(count, unit);
    } else {
      return [];
    }
  }
};
var fallbackWeekSettings = {
  firstDay: 1,
  minimalDays: 4,
  weekend: [6, 7]
};
var Locale = class _Locale {
  static fromOpts(opts) {
    return _Locale.create(
      opts.locale,
      opts.numberingSystem,
      opts.outputCalendar,
      opts.weekSettings,
      opts.defaultToEN
    );
  }
  static create(locale, numberingSystem, outputCalendar, weekSettings, defaultToEN = false) {
    const specifiedLocale = locale || Settings.defaultLocale;
    const localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
    const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
    const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
    const weekSettingsR = validateWeekSettings(weekSettings) || Settings.defaultWeekSettings;
    return new _Locale(localeR, numberingSystemR, outputCalendarR, weekSettingsR, specifiedLocale);
  }
  static resetCache() {
    sysLocaleCache = null;
    intlDTCache = {};
    intlNumCache = {};
    intlRelCache = {};
  }
  static fromObject({ locale, numberingSystem, outputCalendar, weekSettings } = {}) {
    return _Locale.create(locale, numberingSystem, outputCalendar, weekSettings);
  }
  constructor(locale, numbering, outputCalendar, weekSettings, specifiedLocale) {
    const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale);
    this.locale = parsedLocale;
    this.numberingSystem = numbering || parsedNumberingSystem || null;
    this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
    this.weekSettings = weekSettings;
    this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
    this.weekdaysCache = { format: {}, standalone: {} };
    this.monthsCache = { format: {}, standalone: {} };
    this.meridiemCache = null;
    this.eraCache = {};
    this.specifiedLocale = specifiedLocale;
    this.fastNumbersCached = null;
  }
  get fastNumbers() {
    if (this.fastNumbersCached == null) {
      this.fastNumbersCached = supportsFastNumbers(this);
    }
    return this.fastNumbersCached;
  }
  listingMode() {
    const isActuallyEn = this.isEnglish();
    const hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
    return isActuallyEn && hasNoWeirdness ? "en" : "intl";
  }
  clone(alts) {
    if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
      return this;
    } else {
      return _Locale.create(
        alts.locale || this.specifiedLocale,
        alts.numberingSystem || this.numberingSystem,
        alts.outputCalendar || this.outputCalendar,
        validateWeekSettings(alts.weekSettings) || this.weekSettings,
        alts.defaultToEN || false
      );
    }
  }
  redefaultToEN(alts = {}) {
    return this.clone({ ...alts, defaultToEN: true });
  }
  redefaultToSystem(alts = {}) {
    return this.clone({ ...alts, defaultToEN: false });
  }
  months(length, format = false) {
    return listStuff(this, length, months, () => {
      const intl = format ? { month: length, day: "numeric" } : { month: length }, formatStr = format ? "format" : "standalone";
      if (!this.monthsCache[formatStr][length]) {
        this.monthsCache[formatStr][length] = mapMonths((dt) => this.extract(dt, intl, "month"));
      }
      return this.monthsCache[formatStr][length];
    });
  }
  weekdays(length, format = false) {
    return listStuff(this, length, weekdays, () => {
      const intl = format ? { weekday: length, year: "numeric", month: "long", day: "numeric" } : { weekday: length }, formatStr = format ? "format" : "standalone";
      if (!this.weekdaysCache[formatStr][length]) {
        this.weekdaysCache[formatStr][length] = mapWeekdays(
          (dt) => this.extract(dt, intl, "weekday")
        );
      }
      return this.weekdaysCache[formatStr][length];
    });
  }
  meridiems() {
    return listStuff(
      this,
      void 0,
      () => meridiems,
      () => {
        if (!this.meridiemCache) {
          const intl = { hour: "numeric", hourCycle: "h12" };
          this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(
            (dt) => this.extract(dt, intl, "dayperiod")
          );
        }
        return this.meridiemCache;
      }
    );
  }
  eras(length) {
    return listStuff(this, length, eras, () => {
      const intl = { era: length };
      if (!this.eraCache[length]) {
        this.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(
          (dt) => this.extract(dt, intl, "era")
        );
      }
      return this.eraCache[length];
    });
  }
  extract(dt, intlOpts, field) {
    const df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find((m) => m.type.toLowerCase() === field);
    return matching ? matching.value : null;
  }
  numberFormatter(opts = {}) {
    return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
  }
  dtFormatter(dt, intlOpts = {}) {
    return new PolyDateFormatter(dt, this.intl, intlOpts);
  }
  relFormatter(opts = {}) {
    return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
  }
  listFormatter(opts = {}) {
    return getCachedLF(this.intl, opts);
  }
  isEnglish() {
    return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
  }
  getWeekSettings() {
    if (this.weekSettings) {
      return this.weekSettings;
    } else if (!hasLocaleWeekInfo()) {
      return fallbackWeekSettings;
    } else {
      return getCachedWeekInfo(this.locale);
    }
  }
  getStartOfWeek() {
    return this.getWeekSettings().firstDay;
  }
  getMinDaysInFirstWeek() {
    return this.getWeekSettings().minimalDays;
  }
  getWeekendDays() {
    return this.getWeekSettings().weekend;
  }
  equals(other) {
    return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
  }
};

// node_modules/luxon/src/zones/fixedOffsetZone.js
var singleton2 = null;
var FixedOffsetZone = class _FixedOffsetZone extends Zone {
  /**
   * Get a singleton instance of UTC
   * @return {FixedOffsetZone}
   */
  static get utcInstance() {
    if (singleton2 === null) {
      singleton2 = new _FixedOffsetZone(0);
    }
    return singleton2;
  }
  /**
   * Get an instance with a specified offset
   * @param {number} offset - The offset in minutes
   * @return {FixedOffsetZone}
   */
  static instance(offset2) {
    return offset2 === 0 ? _FixedOffsetZone.utcInstance : new _FixedOffsetZone(offset2);
  }
  /**
   * Get an instance of FixedOffsetZone from a UTC offset string, like "UTC+6"
   * @param {string} s - The offset string to parse
   * @example FixedOffsetZone.parseSpecifier("UTC+6")
   * @example FixedOffsetZone.parseSpecifier("UTC+06")
   * @example FixedOffsetZone.parseSpecifier("UTC-6:00")
   * @return {FixedOffsetZone}
   */
  static parseSpecifier(s2) {
    if (s2) {
      const r = s2.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
      if (r) {
        return new _FixedOffsetZone(signedOffset(r[1], r[2]));
      }
    }
    return null;
  }
  constructor(offset2) {
    super();
    this.fixed = offset2;
  }
  /** @override **/
  get type() {
    return "fixed";
  }
  /** @override **/
  get name() {
    return this.fixed === 0 ? "UTC" : `UTC${formatOffset(this.fixed, "narrow")}`;
  }
  get ianaName() {
    if (this.fixed === 0) {
      return "Etc/UTC";
    } else {
      return `Etc/GMT${formatOffset(-this.fixed, "narrow")}`;
    }
  }
  /** @override **/
  offsetName() {
    return this.name;
  }
  /** @override **/
  formatOffset(ts, format) {
    return formatOffset(this.fixed, format);
  }
  /** @override **/
  get isUniversal() {
    return true;
  }
  /** @override **/
  offset() {
    return this.fixed;
  }
  /** @override **/
  equals(otherZone) {
    return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
  }
  /** @override **/
  get isValid() {
    return true;
  }
};

// node_modules/luxon/src/zones/invalidZone.js
var InvalidZone = class extends Zone {
  constructor(zoneName) {
    super();
    this.zoneName = zoneName;
  }
  /** @override **/
  get type() {
    return "invalid";
  }
  /** @override **/
  get name() {
    return this.zoneName;
  }
  /** @override **/
  get isUniversal() {
    return false;
  }
  /** @override **/
  offsetName() {
    return null;
  }
  /** @override **/
  formatOffset() {
    return "";
  }
  /** @override **/
  offset() {
    return NaN;
  }
  /** @override **/
  equals() {
    return false;
  }
  /** @override **/
  get isValid() {
    return false;
  }
};

// node_modules/luxon/src/impl/zoneUtil.js
function normalizeZone(input, defaultZone2) {
  let offset2;
  if (isUndefined(input) || input === null) {
    return defaultZone2;
  } else if (input instanceof Zone) {
    return input;
  } else if (isString(input)) {
    const lowered = input.toLowerCase();
    if (lowered === "default")
      return defaultZone2;
    else if (lowered === "local" || lowered === "system")
      return SystemZone.instance;
    else if (lowered === "utc" || lowered === "gmt")
      return FixedOffsetZone.utcInstance;
    else
      return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
  } else if (isNumber(input)) {
    return FixedOffsetZone.instance(input);
  } else if (typeof input === "object" && "offset" in input && typeof input.offset === "function") {
    return input;
  } else {
    return new InvalidZone(input);
  }
}

// node_modules/luxon/src/settings.js
var now = () => Date.now();
var defaultZone = "system";
var defaultLocale = null;
var defaultNumberingSystem = null;
var defaultOutputCalendar = null;
var twoDigitCutoffYear = 60;
var throwOnInvalid;
var defaultWeekSettings = null;
var Settings = class {
  /**
   * Get the callback for returning the current timestamp.
   * @type {function}
   */
  static get now() {
    return now;
  }
  /**
   * Set the callback for returning the current timestamp.
   * The function should return a number, which will be interpreted as an Epoch millisecond count
   * @type {function}
   * @example Settings.now = () => Date.now() + 3000 // pretend it is 3 seconds in the future
   * @example Settings.now = () => 0 // always pretend it's Jan 1, 1970 at midnight in UTC time
   */
  static set now(n2) {
    now = n2;
  }
  /**
   * Set the default time zone to create DateTimes in. Does not affect existing instances.
   * Use the value "system" to reset this value to the system's time zone.
   * @type {string}
   */
  static set defaultZone(zone) {
    defaultZone = zone;
  }
  /**
   * Get the default time zone object currently used to create DateTimes. Does not affect existing instances.
   * The default value is the system's time zone (the one set on the machine that runs this code).
   * @type {Zone}
   */
  static get defaultZone() {
    return normalizeZone(defaultZone, SystemZone.instance);
  }
  /**
   * Get the default locale to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static get defaultLocale() {
    return defaultLocale;
  }
  /**
   * Set the default locale to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static set defaultLocale(locale) {
    defaultLocale = locale;
  }
  /**
   * Get the default numbering system to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static get defaultNumberingSystem() {
    return defaultNumberingSystem;
  }
  /**
   * Set the default numbering system to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static set defaultNumberingSystem(numberingSystem) {
    defaultNumberingSystem = numberingSystem;
  }
  /**
   * Get the default output calendar to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static get defaultOutputCalendar() {
    return defaultOutputCalendar;
  }
  /**
   * Set the default output calendar to create DateTimes with. Does not affect existing instances.
   * @type {string}
   */
  static set defaultOutputCalendar(outputCalendar) {
    defaultOutputCalendar = outputCalendar;
  }
  /**
   * @typedef {Object} WeekSettings
   * @property {number} firstDay
   * @property {number} minimalDays
   * @property {number[]} weekend
   */
  /**
   * @return {WeekSettings|null}
   */
  static get defaultWeekSettings() {
    return defaultWeekSettings;
  }
  /**
   * Allows overriding the default locale week settings, i.e. the start of the week, the weekend and
   * how many days are required in the first week of a year.
   * Does not affect existing instances.
   *
   * @param {WeekSettings|null} weekSettings
   */
  static set defaultWeekSettings(weekSettings) {
    defaultWeekSettings = validateWeekSettings(weekSettings);
  }
  /**
   * Get the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
   * @type {number}
   */
  static get twoDigitCutoffYear() {
    return twoDigitCutoffYear;
  }
  /**
   * Set the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
   * @type {number}
   * @example Settings.twoDigitCutoffYear = 0 // cut-off year is 0, so all 'yy' are interpreted as current century
   * @example Settings.twoDigitCutoffYear = 50 // '49' -> 1949; '50' -> 2050
   * @example Settings.twoDigitCutoffYear = 1950 // interpreted as 50
   * @example Settings.twoDigitCutoffYear = 2050 // ALSO interpreted as 50
   */
  static set twoDigitCutoffYear(cutoffYear) {
    twoDigitCutoffYear = cutoffYear % 100;
  }
  /**
   * Get whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
   * @type {boolean}
   */
  static get throwOnInvalid() {
    return throwOnInvalid;
  }
  /**
   * Set whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
   * @type {boolean}
   */
  static set throwOnInvalid(t) {
    throwOnInvalid = t;
  }
  /**
   * Reset Luxon's global caches. Should only be necessary in testing scenarios.
   * @return {void}
   */
  static resetCaches() {
    Locale.resetCache();
    IANAZone.resetCache();
  }
};

// node_modules/luxon/src/impl/invalid.js
var Invalid = class {
  constructor(reason, explanation) {
    this.reason = reason;
    this.explanation = explanation;
  }
  toMessage() {
    if (this.explanation) {
      return `${this.reason}: ${this.explanation}`;
    } else {
      return this.reason;
    }
  }
};

// node_modules/luxon/src/impl/conversions.js
var nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
var leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
function unitOutOfRange(unit, value) {
  return new Invalid(
    "unit out of range",
    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`
  );
}
function dayOfWeek(year, month, day) {
  const d = new Date(Date.UTC(year, month - 1, day));
  if (year < 100 && year >= 0) {
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  const js = d.getUTCDay();
  return js === 0 ? 7 : js;
}
function computeOrdinal(year, month, day) {
  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];
}
function uncomputeOrdinal(year, ordinal) {
  const table = isLeapYear(year) ? leapLadder : nonLeapLadder, month0 = table.findIndex((i) => i < ordinal), day = ordinal - table[month0];
  return { month: month0 + 1, day };
}
function isoWeekdayToLocal(isoWeekday, startOfWeek) {
  return (isoWeekday - startOfWeek + 7) % 7 + 1;
}
function gregorianToWeek(gregObj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { year, month, day } = gregObj, ordinal = computeOrdinal(year, month, day), weekday = isoWeekdayToLocal(dayOfWeek(year, month, day), startOfWeek);
  let weekNumber = Math.floor((ordinal - weekday + 14 - minDaysInFirstWeek) / 7), weekYear;
  if (weekNumber < 1) {
    weekYear = year - 1;
    weekNumber = weeksInWeekYear(weekYear, minDaysInFirstWeek, startOfWeek);
  } else if (weekNumber > weeksInWeekYear(year, minDaysInFirstWeek, startOfWeek)) {
    weekYear = year + 1;
    weekNumber = 1;
  } else {
    weekYear = year;
  }
  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };
}
function weekToGregorian(weekData, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { weekYear, weekNumber, weekday } = weekData, weekdayOfJan4 = isoWeekdayToLocal(dayOfWeek(weekYear, 1, minDaysInFirstWeek), startOfWeek), yearInDays = daysInYear(weekYear);
  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 7 + minDaysInFirstWeek, year;
  if (ordinal < 1) {
    year = weekYear - 1;
    ordinal += daysInYear(year);
  } else if (ordinal > yearInDays) {
    year = weekYear + 1;
    ordinal -= daysInYear(weekYear);
  } else {
    year = weekYear;
  }
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(weekData) };
}
function gregorianToOrdinal(gregData) {
  const { year, month, day } = gregData;
  const ordinal = computeOrdinal(year, month, day);
  return { year, ordinal, ...timeObject(gregData) };
}
function ordinalToGregorian(ordinalData) {
  const { year, ordinal } = ordinalData;
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(ordinalData) };
}
function usesLocalWeekValues(obj, loc) {
  const hasLocaleWeekData = !isUndefined(obj.localWeekday) || !isUndefined(obj.localWeekNumber) || !isUndefined(obj.localWeekYear);
  if (hasLocaleWeekData) {
    const hasIsoWeekData = !isUndefined(obj.weekday) || !isUndefined(obj.weekNumber) || !isUndefined(obj.weekYear);
    if (hasIsoWeekData) {
      throw new ConflictingSpecificationError(
        "Cannot mix locale-based week fields with ISO-based week fields"
      );
    }
    if (!isUndefined(obj.localWeekday))
      obj.weekday = obj.localWeekday;
    if (!isUndefined(obj.localWeekNumber))
      obj.weekNumber = obj.localWeekNumber;
    if (!isUndefined(obj.localWeekYear))
      obj.weekYear = obj.localWeekYear;
    delete obj.localWeekday;
    delete obj.localWeekNumber;
    delete obj.localWeekYear;
    return {
      minDaysInFirstWeek: loc.getMinDaysInFirstWeek(),
      startOfWeek: loc.getStartOfWeek()
    };
  } else {
    return { minDaysInFirstWeek: 4, startOfWeek: 1 };
  }
}
function hasInvalidWeekData(obj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const validYear = isInteger(obj.weekYear), validWeek = integerBetween(
    obj.weekNumber,
    1,
    weeksInWeekYear(obj.weekYear, minDaysInFirstWeek, startOfWeek)
  ), validWeekday = integerBetween(obj.weekday, 1, 7);
  if (!validYear) {
    return unitOutOfRange("weekYear", obj.weekYear);
  } else if (!validWeek) {
    return unitOutOfRange("week", obj.weekNumber);
  } else if (!validWeekday) {
    return unitOutOfRange("weekday", obj.weekday);
  } else
    return false;
}
function hasInvalidOrdinalData(obj) {
  const validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validOrdinal) {
    return unitOutOfRange("ordinal", obj.ordinal);
  } else
    return false;
}
function hasInvalidGregorianData(obj) {
  const validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validMonth) {
    return unitOutOfRange("month", obj.month);
  } else if (!validDay) {
    return unitOutOfRange("day", obj.day);
  } else
    return false;
}
function hasInvalidTimeData(obj) {
  const { hour, minute, second, millisecond } = obj;
  const validHour = integerBetween(hour, 0, 23) || hour === 24 && minute === 0 && second === 0 && millisecond === 0, validMinute = integerBetween(minute, 0, 59), validSecond = integerBetween(second, 0, 59), validMillisecond = integerBetween(millisecond, 0, 999);
  if (!validHour) {
    return unitOutOfRange("hour", hour);
  } else if (!validMinute) {
    return unitOutOfRange("minute", minute);
  } else if (!validSecond) {
    return unitOutOfRange("second", second);
  } else if (!validMillisecond) {
    return unitOutOfRange("millisecond", millisecond);
  } else
    return false;
}

// node_modules/luxon/src/impl/util.js
function isUndefined(o) {
  return typeof o === "undefined";
}
function isNumber(o) {
  return typeof o === "number";
}
function isInteger(o) {
  return typeof o === "number" && o % 1 === 0;
}
function isString(o) {
  return typeof o === "string";
}
function isDate(o) {
  return Object.prototype.toString.call(o) === "[object Date]";
}
function hasRelative() {
  try {
    return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
  } catch (e) {
    return false;
  }
}
function hasLocaleWeekInfo() {
  try {
    return typeof Intl !== "undefined" && !!Intl.Locale && ("weekInfo" in Intl.Locale.prototype || "getWeekInfo" in Intl.Locale.prototype);
  } catch (e) {
    return false;
  }
}
function maybeArray(thing) {
  return Array.isArray(thing) ? thing : [thing];
}
function bestBy(arr, by, compare) {
  if (arr.length === 0) {
    return void 0;
  }
  return arr.reduce((best, next) => {
    const pair = [by(next), next];
    if (!best) {
      return pair;
    } else if (compare(best[0], pair[0]) === best[0]) {
      return best;
    } else {
      return pair;
    }
  }, null)[1];
}
function pick(obj, keys) {
  return keys.reduce((a, k) => {
    a[k] = obj[k];
    return a;
  }, {});
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}
function validateWeekSettings(settings) {
  if (settings == null) {
    return null;
  } else if (typeof settings !== "object") {
    throw new InvalidArgumentError("Week settings must be an object");
  } else {
    if (!integerBetween(settings.firstDay, 1, 7) || !integerBetween(settings.minimalDays, 1, 7) || !Array.isArray(settings.weekend) || settings.weekend.some((v) => !integerBetween(v, 1, 7))) {
      throw new InvalidArgumentError("Invalid week settings");
    }
    return {
      firstDay: settings.firstDay,
      minimalDays: settings.minimalDays,
      weekend: Array.from(settings.weekend)
    };
  }
}
function integerBetween(thing, bottom, top) {
  return isInteger(thing) && thing >= bottom && thing <= top;
}
function floorMod(x, n2) {
  return x - n2 * Math.floor(x / n2);
}
function padStart(input, n2 = 2) {
  const isNeg = input < 0;
  let padded;
  if (isNeg) {
    padded = "-" + ("" + -input).padStart(n2, "0");
  } else {
    padded = ("" + input).padStart(n2, "0");
  }
  return padded;
}
function parseInteger(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseInt(string, 10);
  }
}
function parseFloating(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseFloat(string);
  }
}
function parseMillis(fraction) {
  if (isUndefined(fraction) || fraction === null || fraction === "") {
    return void 0;
  } else {
    const f = parseFloat("0." + fraction) * 1e3;
    return Math.floor(f);
  }
}
function roundTo(number, digits, towardZero = false) {
  const factor = 10 ** digits, rounder = towardZero ? Math.trunc : Math.round;
  return rounder(number * factor) / factor;
}
function isLeapYear(year) {
  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}
function daysInMonth(year, month) {
  const modMonth = floorMod(month - 1, 12) + 1, modYear = year + (month - modMonth) / 12;
  if (modMonth === 2) {
    return isLeapYear(modYear) ? 29 : 28;
  } else {
    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
  }
}
function objToLocalTS(obj) {
  let d = Date.UTC(
    obj.year,
    obj.month - 1,
    obj.day,
    obj.hour,
    obj.minute,
    obj.second,
    obj.millisecond
  );
  if (obj.year < 100 && obj.year >= 0) {
    d = new Date(d);
    d.setUTCFullYear(obj.year, obj.month - 1, obj.day);
  }
  return +d;
}
function firstWeekOffset(year, minDaysInFirstWeek, startOfWeek) {
  const fwdlw = isoWeekdayToLocal(dayOfWeek(year, 1, minDaysInFirstWeek), startOfWeek);
  return -fwdlw + minDaysInFirstWeek - 1;
}
function weeksInWeekYear(weekYear, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const weekOffset = firstWeekOffset(weekYear, minDaysInFirstWeek, startOfWeek);
  const weekOffsetNext = firstWeekOffset(weekYear + 1, minDaysInFirstWeek, startOfWeek);
  return (daysInYear(weekYear) - weekOffset + weekOffsetNext) / 7;
}
function untruncateYear(year) {
  if (year > 99) {
    return year;
  } else
    return year > Settings.twoDigitCutoffYear ? 1900 + year : 2e3 + year;
}
function parseZoneInfo(ts, offsetFormat, locale, timeZone = null) {
  const date = new Date(ts), intlOpts = {
    hourCycle: "h23",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  };
  if (timeZone) {
    intlOpts.timeZone = timeZone;
  }
  const modified = { timeZoneName: offsetFormat, ...intlOpts };
  const parsed = new Intl.DateTimeFormat(locale, modified).formatToParts(date).find((m) => m.type.toLowerCase() === "timezonename");
  return parsed ? parsed.value : null;
}
function signedOffset(offHourStr, offMinuteStr) {
  let offHour = parseInt(offHourStr, 10);
  if (Number.isNaN(offHour)) {
    offHour = 0;
  }
  const offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
  return offHour * 60 + offMinSigned;
}
function asNumber(value) {
  const numericValue = Number(value);
  if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
    throw new InvalidArgumentError(`Invalid unit value ${value}`);
  return numericValue;
}
function normalizeObject(obj, normalizer) {
  const normalized = {};
  for (const u in obj) {
    if (hasOwnProperty(obj, u)) {
      const v = obj[u];
      if (v === void 0 || v === null)
        continue;
      normalized[normalizer(u)] = asNumber(v);
    }
  }
  return normalized;
}
function formatOffset(offset2, format) {
  const hours = Math.trunc(Math.abs(offset2 / 60)), minutes = Math.trunc(Math.abs(offset2 % 60)), sign = offset2 >= 0 ? "+" : "-";
  switch (format) {
    case "short":
      return `${sign}${padStart(hours, 2)}:${padStart(minutes, 2)}`;
    case "narrow":
      return `${sign}${hours}${minutes > 0 ? `:${minutes}` : ""}`;
    case "techie":
      return `${sign}${padStart(hours, 2)}${padStart(minutes, 2)}`;
    default:
      throw new RangeError(`Value format ${format} is out of range for property format`);
  }
}
function timeObject(obj) {
  return pick(obj, ["hour", "minute", "second", "millisecond"]);
}

// node_modules/luxon/src/impl/english.js
var monthsLong = [
  "January",
  "February",
  "March",
  "April",
  "May",
  "June",
  "July",
  "August",
  "September",
  "October",
  "November",
  "December"
];
var monthsShort = [
  "Jan",
  "Feb",
  "Mar",
  "Apr",
  "May",
  "Jun",
  "Jul",
  "Aug",
  "Sep",
  "Oct",
  "Nov",
  "Dec"
];
var monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
function months(length) {
  switch (length) {
    case "narrow":
      return [...monthsNarrow];
    case "short":
      return [...monthsShort];
    case "long":
      return [...monthsLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
    case "2-digit":
      return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    default:
      return null;
  }
}
var weekdaysLong = [
  "Monday",
  "Tuesday",
  "Wednesday",
  "Thursday",
  "Friday",
  "Saturday",
  "Sunday"
];
var weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
var weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
function weekdays(length) {
  switch (length) {
    case "narrow":
      return [...weekdaysNarrow];
    case "short":
      return [...weekdaysShort];
    case "long":
      return [...weekdaysLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7"];
    default:
      return null;
  }
}
var meridiems = ["AM", "PM"];
var erasLong = ["Before Christ", "Anno Domini"];
var erasShort = ["BC", "AD"];
var erasNarrow = ["B", "A"];
function eras(length) {
  switch (length) {
    case "narrow":
      return [...erasNarrow];
    case "short":
      return [...erasShort];
    case "long":
      return [...erasLong];
    default:
      return null;
  }
}
function meridiemForDateTime(dt) {
  return meridiems[dt.hour < 12 ? 0 : 1];
}
function weekdayForDateTime(dt, length) {
  return weekdays(length)[dt.weekday - 1];
}
function monthForDateTime(dt, length) {
  return months(length)[dt.month - 1];
}
function eraForDateTime(dt, length) {
  return eras(length)[dt.year < 0 ? 0 : 1];
}
function formatRelativeTime(unit, count, numeric = "always", narrow = false) {
  const units = {
    years: ["year", "yr."],
    quarters: ["quarter", "qtr."],
    months: ["month", "mo."],
    weeks: ["week", "wk."],
    days: ["day", "day", "days"],
    hours: ["hour", "hr."],
    minutes: ["minute", "min."],
    seconds: ["second", "sec."]
  };
  const lastable = ["hours", "minutes", "seconds"].indexOf(unit) === -1;
  if (numeric === "auto" && lastable) {
    const isDay = unit === "days";
    switch (count) {
      case 1:
        return isDay ? "tomorrow" : `next ${units[unit][0]}`;
      case -1:
        return isDay ? "yesterday" : `last ${units[unit][0]}`;
      case 0:
        return isDay ? "today" : `this ${units[unit][0]}`;
      default:
    }
  }
  const isInPast = Object.is(count, -0) || count < 0, fmtValue = Math.abs(count), singular = fmtValue === 1, lilUnits = units[unit], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit][0] : unit;
  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;
}

// node_modules/luxon/src/impl/formatter.js
function stringifyTokens(splits, tokenToString) {
  let s2 = "";
  for (const token of splits) {
    if (token.literal) {
      s2 += token.val;
    } else {
      s2 += tokenToString(token.val);
    }
  }
  return s2;
}
var macroTokenToFormatOpts = {
  D: DATE_SHORT,
  DD: DATE_MED,
  DDD: DATE_FULL,
  DDDD: DATE_HUGE,
  t: TIME_SIMPLE,
  tt: TIME_WITH_SECONDS,
  ttt: TIME_WITH_SHORT_OFFSET,
  tttt: TIME_WITH_LONG_OFFSET,
  T: TIME_24_SIMPLE,
  TT: TIME_24_WITH_SECONDS,
  TTT: TIME_24_WITH_SHORT_OFFSET,
  TTTT: TIME_24_WITH_LONG_OFFSET,
  f: DATETIME_SHORT,
  ff: DATETIME_MED,
  fff: DATETIME_FULL,
  ffff: DATETIME_HUGE,
  F: DATETIME_SHORT_WITH_SECONDS,
  FF: DATETIME_MED_WITH_SECONDS,
  FFF: DATETIME_FULL_WITH_SECONDS,
  FFFF: DATETIME_HUGE_WITH_SECONDS
};
var Formatter = class _Formatter {
  static create(locale, opts = {}) {
    return new _Formatter(locale, opts);
  }
  static parseFormat(fmt) {
    let current = null, currentFull = "", bracketed = false;
    const splits = [];
    for (let i = 0; i < fmt.length; i++) {
      const c = fmt.charAt(i);
      if (c === "'") {
        if (currentFull.length > 0) {
          splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
        }
        current = null;
        currentFull = "";
        bracketed = !bracketed;
      } else if (bracketed) {
        currentFull += c;
      } else if (c === current) {
        currentFull += c;
      } else {
        if (currentFull.length > 0) {
          splits.push({ literal: /^\s+$/.test(currentFull), val: currentFull });
        }
        currentFull = c;
        current = c;
      }
    }
    if (currentFull.length > 0) {
      splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
    }
    return splits;
  }
  static macroTokenToFormatOpts(token) {
    return macroTokenToFormatOpts[token];
  }
  constructor(locale, formatOpts) {
    this.opts = formatOpts;
    this.loc = locale;
    this.systemLoc = null;
  }
  formatWithSystemDefault(dt, opts) {
    if (this.systemLoc === null) {
      this.systemLoc = this.loc.redefaultToSystem();
    }
    const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });
    return df.format();
  }
  dtFormatter(dt, opts = {}) {
    return this.loc.dtFormatter(dt, { ...this.opts, ...opts });
  }
  formatDateTime(dt, opts) {
    return this.dtFormatter(dt, opts).format();
  }
  formatDateTimeParts(dt, opts) {
    return this.dtFormatter(dt, opts).formatToParts();
  }
  formatInterval(interval, opts) {
    const df = this.dtFormatter(interval.start, opts);
    return df.dtf.formatRange(interval.start.toJSDate(), interval.end.toJSDate());
  }
  resolvedOptions(dt, opts) {
    return this.dtFormatter(dt, opts).resolvedOptions();
  }
  num(n2, p = 0) {
    if (this.opts.forceSimple) {
      return padStart(n2, p);
    }
    const opts = { ...this.opts };
    if (p > 0) {
      opts.padTo = p;
    }
    return this.loc.numberFormatter(opts).format(n2);
  }
  formatDateTimeFromString(dt, fmt) {
    const knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = (opts, extract) => this.loc.extract(dt, opts, extract), formatOffset2 = (opts) => {
      if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
        return "Z";
      }
      return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
    }, meridiem = () => knownEnglish ? meridiemForDateTime(dt) : string({ hour: "numeric", hourCycle: "h12" }, "dayperiod"), month = (length, standalone) => knownEnglish ? monthForDateTime(dt, length) : string(standalone ? { month: length } : { month: length, day: "numeric" }, "month"), weekday = (length, standalone) => knownEnglish ? weekdayForDateTime(dt, length) : string(
      standalone ? { weekday: length } : { weekday: length, month: "long", day: "numeric" },
      "weekday"
    ), maybeMacro = (token) => {
      const formatOpts = _Formatter.macroTokenToFormatOpts(token);
      if (formatOpts) {
        return this.formatWithSystemDefault(dt, formatOpts);
      } else {
        return token;
      }
    }, era = (length) => knownEnglish ? eraForDateTime(dt, length) : string({ era: length }, "era"), tokenToString = (token) => {
      switch (token) {
        case "S":
          return this.num(dt.millisecond);
        case "u":
        case "SSS":
          return this.num(dt.millisecond, 3);
        case "s":
          return this.num(dt.second);
        case "ss":
          return this.num(dt.second, 2);
        case "uu":
          return this.num(Math.floor(dt.millisecond / 10), 2);
        case "uuu":
          return this.num(Math.floor(dt.millisecond / 100));
        case "m":
          return this.num(dt.minute);
        case "mm":
          return this.num(dt.minute, 2);
        case "h":
          return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
        case "hh":
          return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
        case "H":
          return this.num(dt.hour);
        case "HH":
          return this.num(dt.hour, 2);
        case "Z":
          return formatOffset2({ format: "narrow", allowZ: this.opts.allowZ });
        case "ZZ":
          return formatOffset2({ format: "short", allowZ: this.opts.allowZ });
        case "ZZZ":
          return formatOffset2({ format: "techie", allowZ: this.opts.allowZ });
        case "ZZZZ":
          return dt.zone.offsetName(dt.ts, { format: "short", locale: this.loc.locale });
        case "ZZZZZ":
          return dt.zone.offsetName(dt.ts, { format: "long", locale: this.loc.locale });
        case "z":
          return dt.zoneName;
        case "a":
          return meridiem();
        case "d":
          return useDateTimeFormatter ? string({ day: "numeric" }, "day") : this.num(dt.day);
        case "dd":
          return useDateTimeFormatter ? string({ day: "2-digit" }, "day") : this.num(dt.day, 2);
        case "c":
          return this.num(dt.weekday);
        case "ccc":
          return weekday("short", true);
        case "cccc":
          return weekday("long", true);
        case "ccccc":
          return weekday("narrow", true);
        case "E":
          return this.num(dt.weekday);
        case "EEE":
          return weekday("short", false);
        case "EEEE":
          return weekday("long", false);
        case "EEEEE":
          return weekday("narrow", false);
        case "L":
          return useDateTimeFormatter ? string({ month: "numeric", day: "numeric" }, "month") : this.num(dt.month);
        case "LL":
          return useDateTimeFormatter ? string({ month: "2-digit", day: "numeric" }, "month") : this.num(dt.month, 2);
        case "LLL":
          return month("short", true);
        case "LLLL":
          return month("long", true);
        case "LLLLL":
          return month("narrow", true);
        case "M":
          return useDateTimeFormatter ? string({ month: "numeric" }, "month") : this.num(dt.month);
        case "MM":
          return useDateTimeFormatter ? string({ month: "2-digit" }, "month") : this.num(dt.month, 2);
        case "MMM":
          return month("short", false);
        case "MMMM":
          return month("long", false);
        case "MMMMM":
          return month("narrow", false);
        case "y":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year);
        case "yy":
          return useDateTimeFormatter ? string({ year: "2-digit" }, "year") : this.num(dt.year.toString().slice(-2), 2);
        case "yyyy":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 4);
        case "yyyyyy":
          return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 6);
        case "G":
          return era("short");
        case "GG":
          return era("long");
        case "GGGGG":
          return era("narrow");
        case "kk":
          return this.num(dt.weekYear.toString().slice(-2), 2);
        case "kkkk":
          return this.num(dt.weekYear, 4);
        case "W":
          return this.num(dt.weekNumber);
        case "WW":
          return this.num(dt.weekNumber, 2);
        case "n":
          return this.num(dt.localWeekNumber);
        case "nn":
          return this.num(dt.localWeekNumber, 2);
        case "ii":
          return this.num(dt.localWeekYear.toString().slice(-2), 2);
        case "iiii":
          return this.num(dt.localWeekYear, 4);
        case "o":
          return this.num(dt.ordinal);
        case "ooo":
          return this.num(dt.ordinal, 3);
        case "q":
          return this.num(dt.quarter);
        case "qq":
          return this.num(dt.quarter, 2);
        case "X":
          return this.num(Math.floor(dt.ts / 1e3));
        case "x":
          return this.num(dt.ts);
        default:
          return maybeMacro(token);
      }
    };
    return stringifyTokens(_Formatter.parseFormat(fmt), tokenToString);
  }
  formatDurationFromString(dur, fmt) {
    const tokenToField = (token) => {
      switch (token[0]) {
        case "S":
          return "millisecond";
        case "s":
          return "second";
        case "m":
          return "minute";
        case "h":
          return "hour";
        case "d":
          return "day";
        case "w":
          return "week";
        case "M":
          return "month";
        case "y":
          return "year";
        default:
          return null;
      }
    }, tokenToString = (lildur) => (token) => {
      const mapped = tokenToField(token);
      if (mapped) {
        return this.num(lildur.get(mapped), token.length);
      } else {
        return token;
      }
    }, tokens = _Formatter.parseFormat(fmt), realTokens = tokens.reduce(
      (found, { literal, val }) => literal ? found : found.concat(val),
      []
    ), collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));
    return stringifyTokens(tokens, tokenToString(collapsed));
  }
};

// node_modules/luxon/src/impl/regexParser.js
var ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;
function combineRegexes(...regexes) {
  const full = regexes.reduce((f, r) => f + r.source, "");
  return RegExp(`^${full}$`);
}
function combineExtractors(...extractors) {
  return (m) => extractors.reduce(
    ([mergedVals, mergedZone, cursor], ex) => {
      const [val, zone, next] = ex(m, cursor);
      return [{ ...mergedVals, ...val }, zone || mergedZone, next];
    },
    [{}, null, 1]
  ).slice(0, 2);
}
function parse(s2, ...patterns) {
  if (s2 == null) {
    return [null, null];
  }
  for (const [regex, extractor] of patterns) {
    const m = regex.exec(s2);
    if (m) {
      return extractor(m);
    }
  }
  return [null, null];
}
function simpleParse(...keys) {
  return (match2, cursor) => {
    const ret = {};
    let i;
    for (i = 0; i < keys.length; i++) {
      ret[keys[i]] = parseInteger(match2[cursor + i]);
    }
    return [ret, null, cursor + i];
  };
}
var offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
var isoExtendedZone = `(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;
var isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
var isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);
var isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);
var isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
var isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
var isoOrdinalRegex = /(\d{4})-?(\d{3})/;
var extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
var extractISOOrdinalData = simpleParse("year", "ordinal");
var sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
var sqlTimeRegex = RegExp(
  `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`
);
var sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);
function int(match2, pos, fallback) {
  const m = match2[pos];
  return isUndefined(m) ? fallback : parseInteger(m);
}
function extractISOYmd(match2, cursor) {
  const item = {
    year: int(match2, cursor),
    month: int(match2, cursor + 1, 1),
    day: int(match2, cursor + 2, 1)
  };
  return [item, null, cursor + 3];
}
function extractISOTime(match2, cursor) {
  const item = {
    hours: int(match2, cursor, 0),
    minutes: int(match2, cursor + 1, 0),
    seconds: int(match2, cursor + 2, 0),
    milliseconds: parseMillis(match2[cursor + 3])
  };
  return [item, null, cursor + 4];
}
function extractISOOffset(match2, cursor) {
  const local = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local ? null : FixedOffsetZone.instance(fullOffset);
  return [{}, zone, cursor + 3];
}
function extractIANAZone(match2, cursor) {
  const zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
  return [{}, zone, cursor + 1];
}
var isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);
var isoDuration = /^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;
function extractISODuration(match2) {
  const [s2, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] = match2;
  const hasNegativePrefix = s2[0] === "-";
  const negativeSeconds = secondStr && secondStr[0] === "-";
  const maybeNegate = (num, force = false) => num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
  return [
    {
      years: maybeNegate(parseFloating(yearStr)),
      months: maybeNegate(parseFloating(monthStr)),
      weeks: maybeNegate(parseFloating(weekStr)),
      days: maybeNegate(parseFloating(dayStr)),
      hours: maybeNegate(parseFloating(hourStr)),
      minutes: maybeNegate(parseFloating(minuteStr)),
      seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
    }
  ];
}
var obsOffsets = {
  GMT: 0,
  EDT: -4 * 60,
  EST: -5 * 60,
  CDT: -5 * 60,
  CST: -6 * 60,
  MDT: -6 * 60,
  MST: -7 * 60,
  PDT: -7 * 60,
  PST: -8 * 60
};
function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  const result = {
    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
    month: monthsShort.indexOf(monthStr) + 1,
    day: parseInteger(dayStr),
    hour: parseInteger(hourStr),
    minute: parseInteger(minuteStr)
  };
  if (secondStr)
    result.second = parseInteger(secondStr);
  if (weekdayStr) {
    result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
  }
  return result;
}
var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
function extractRFC2822(match2) {
  const [
    ,
    weekdayStr,
    dayStr,
    monthStr,
    yearStr,
    hourStr,
    minuteStr,
    secondStr,
    obsOffset,
    milOffset,
    offHourStr,
    offMinuteStr
  ] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  let offset2;
  if (obsOffset) {
    offset2 = obsOffsets[obsOffset];
  } else if (milOffset) {
    offset2 = 0;
  } else {
    offset2 = signedOffset(offHourStr, offMinuteStr);
  }
  return [result, new FixedOffsetZone(offset2)];
}
function preprocessRFC2822(s2) {
  return s2.replace(/\([^()]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
}
var rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
var rfc850 = /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
var ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
function extractRFC1123Or850(match2) {
  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function extractASCII(match2) {
  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
var isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
var isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
var isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
var isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
var extractISOYmdTimeAndOffset = combineExtractors(
  extractISOYmd,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOWeekTimeAndOffset = combineExtractors(
  extractISOWeekData,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOOrdinalDateAndTime = combineExtractors(
  extractISOOrdinalData,
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
var extractISOTimeAndOffset = combineExtractors(
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
function parseISODate(s2) {
  return parse(
    s2,
    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],
    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],
    [isoTimeCombinedRegex, extractISOTimeAndOffset]
  );
}
function parseRFC2822Date(s2) {
  return parse(preprocessRFC2822(s2), [rfc2822, extractRFC2822]);
}
function parseHTTPDate(s2) {
  return parse(
    s2,
    [rfc1123, extractRFC1123Or850],
    [rfc850, extractRFC1123Or850],
    [ascii, extractASCII]
  );
}
function parseISODuration(s2) {
  return parse(s2, [isoDuration, extractISODuration]);
}
var extractISOTimeOnly = combineExtractors(extractISOTime);
function parseISOTimeOnly(s2) {
  return parse(s2, [isoTimeOnly, extractISOTimeOnly]);
}
var sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
var sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
var extractISOTimeOffsetAndIANAZone = combineExtractors(
  extractISOTime,
  extractISOOffset,
  extractIANAZone
);
function parseSQL(s2) {
  return parse(
    s2,
    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]
  );
}

// node_modules/luxon/src/duration.js
var INVALID = "Invalid Duration";
var lowOrderMatrix = {
  weeks: {
    days: 7,
    hours: 7 * 24,
    minutes: 7 * 24 * 60,
    seconds: 7 * 24 * 60 * 60,
    milliseconds: 7 * 24 * 60 * 60 * 1e3
  },
  days: {
    hours: 24,
    minutes: 24 * 60,
    seconds: 24 * 60 * 60,
    milliseconds: 24 * 60 * 60 * 1e3
  },
  hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
  minutes: { seconds: 60, milliseconds: 60 * 1e3 },
  seconds: { milliseconds: 1e3 }
};
var casualMatrix = {
  years: {
    quarters: 4,
    months: 12,
    weeks: 52,
    days: 365,
    hours: 365 * 24,
    minutes: 365 * 24 * 60,
    seconds: 365 * 24 * 60 * 60,
    milliseconds: 365 * 24 * 60 * 60 * 1e3
  },
  quarters: {
    months: 3,
    weeks: 13,
    days: 91,
    hours: 91 * 24,
    minutes: 91 * 24 * 60,
    seconds: 91 * 24 * 60 * 60,
    milliseconds: 91 * 24 * 60 * 60 * 1e3
  },
  months: {
    weeks: 4,
    days: 30,
    hours: 30 * 24,
    minutes: 30 * 24 * 60,
    seconds: 30 * 24 * 60 * 60,
    milliseconds: 30 * 24 * 60 * 60 * 1e3
  },
  ...lowOrderMatrix
};
var daysInYearAccurate = 146097 / 400;
var daysInMonthAccurate = 146097 / 4800;
var accurateMatrix = {
  years: {
    quarters: 4,
    months: 12,
    weeks: daysInYearAccurate / 7,
    days: daysInYearAccurate,
    hours: daysInYearAccurate * 24,
    minutes: daysInYearAccurate * 24 * 60,
    seconds: daysInYearAccurate * 24 * 60 * 60,
    milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
  },
  quarters: {
    months: 3,
    weeks: daysInYearAccurate / 28,
    days: daysInYearAccurate / 4,
    hours: daysInYearAccurate * 24 / 4,
    minutes: daysInYearAccurate * 24 * 60 / 4,
    seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
    milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
  },
  months: {
    weeks: daysInMonthAccurate / 7,
    days: daysInMonthAccurate,
    hours: daysInMonthAccurate * 24,
    minutes: daysInMonthAccurate * 24 * 60,
    seconds: daysInMonthAccurate * 24 * 60 * 60,
    milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
  },
  ...lowOrderMatrix
};
var orderedUnits = [
  "years",
  "quarters",
  "months",
  "weeks",
  "days",
  "hours",
  "minutes",
  "seconds",
  "milliseconds"
];
var reverseUnits = orderedUnits.slice(0).reverse();
function clone(dur, alts, clear = false) {
  const conf = {
    values: clear ? alts.values : { ...dur.values, ...alts.values || {} },
    loc: dur.loc.clone(alts.loc),
    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,
    matrix: alts.matrix || dur.matrix
  };
  return new Duration(conf);
}
function durationToMillis(matrix, vals) {
  var _a;
  let sum = (_a = vals.milliseconds) != null ? _a : 0;
  for (const unit of reverseUnits.slice(1)) {
    if (vals[unit]) {
      sum += vals[unit] * matrix[unit]["milliseconds"];
    }
  }
  return sum;
}
function normalizeValues(matrix, vals) {
  const factor = durationToMillis(matrix, vals) < 0 ? -1 : 1;
  orderedUnits.reduceRight((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const previousVal = vals[previous] * factor;
        const conv = matrix[current][previous];
        const rollUp = Math.floor(previousVal / conv);
        vals[current] += rollUp * factor;
        vals[previous] -= rollUp * conv * factor;
      }
      return current;
    } else {
      return previous;
    }
  }, null);
  orderedUnits.reduce((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const fraction = vals[previous] % 1;
        vals[previous] -= fraction;
        vals[current] += fraction * matrix[previous][current];
      }
      return current;
    } else {
      return previous;
    }
  }, null);
}
function removeZeroes(vals) {
  const newVals = {};
  for (const [key, value] of Object.entries(vals)) {
    if (value !== 0) {
      newVals[key] = value;
    }
  }
  return newVals;
}
var Duration = class _Duration {
  /**
   * @private
   */
  constructor(config) {
    const accurate = config.conversionAccuracy === "longterm" || false;
    let matrix = accurate ? accurateMatrix : casualMatrix;
    if (config.matrix) {
      matrix = config.matrix;
    }
    this.values = config.values;
    this.loc = config.loc || Locale.create();
    this.conversionAccuracy = accurate ? "longterm" : "casual";
    this.invalid = config.invalid || null;
    this.matrix = matrix;
    this.isLuxonDuration = true;
  }
  /**
   * Create Duration from a number of milliseconds.
   * @param {number} count of milliseconds
   * @param {Object} opts - options for parsing
   * @param {string} [opts.locale='en-US'] - the locale to use
   * @param {string} opts.numberingSystem - the numbering system to use
   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
   * @return {Duration}
   */
  static fromMillis(count, opts) {
    return _Duration.fromObject({ milliseconds: count }, opts);
  }
  /**
   * Create a Duration from a JavaScript object with keys like 'years' and 'hours'.
   * If this object is empty then a zero milliseconds duration is returned.
   * @param {Object} obj - the object to create the DateTime from
   * @param {number} obj.years
   * @param {number} obj.quarters
   * @param {number} obj.months
   * @param {number} obj.weeks
   * @param {number} obj.days
   * @param {number} obj.hours
   * @param {number} obj.minutes
   * @param {number} obj.seconds
   * @param {number} obj.milliseconds
   * @param {Object} [opts=[]] - options for creating this Duration
   * @param {string} [opts.locale='en-US'] - the locale to use
   * @param {string} opts.numberingSystem - the numbering system to use
   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
   * @param {string} [opts.matrix=Object] - the custom conversion system to use
   * @return {Duration}
   */
  static fromObject(obj, opts = {}) {
    if (obj == null || typeof obj !== "object") {
      throw new InvalidArgumentError(
        `Duration.fromObject: argument expected to be an object, got ${obj === null ? "null" : typeof obj}`
      );
    }
    return new _Duration({
      values: normalizeObject(obj, _Duration.normalizeUnit),
      loc: Locale.fromObject(opts),
      conversionAccuracy: opts.conversionAccuracy,
      matrix: opts.matrix
    });
  }
  /**
   * Create a Duration from DurationLike.
   *
   * @param {Object | number | Duration} durationLike
   * One of:
   * - object with keys like 'years' and 'hours'.
   * - number representing milliseconds
   * - Duration instance
   * @return {Duration}
   */
  static fromDurationLike(durationLike) {
    if (isNumber(durationLike)) {
      return _Duration.fromMillis(durationLike);
    } else if (_Duration.isDuration(durationLike)) {
      return durationLike;
    } else if (typeof durationLike === "object") {
      return _Duration.fromObject(durationLike);
    } else {
      throw new InvalidArgumentError(
        `Unknown duration argument ${durationLike} of type ${typeof durationLike}`
      );
    }
  }
  /**
   * Create a Duration from an ISO 8601 duration string.
   * @param {string} text - text to parse
   * @param {Object} opts - options for parsing
   * @param {string} [opts.locale='en-US'] - the locale to use
   * @param {string} opts.numberingSystem - the numbering system to use
   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
   * @param {string} [opts.matrix=Object] - the preset conversion system to use
   * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
   * @example Duration.fromISO('P3Y6M1W4DT12H30M5S').toObject() //=> { years: 3, months: 6, weeks: 1, days: 4, hours: 12, minutes: 30, seconds: 5 }
   * @example Duration.fromISO('PT23H').toObject() //=> { hours: 23 }
   * @example Duration.fromISO('P5Y3M').toObject() //=> { years: 5, months: 3 }
   * @return {Duration}
   */
  static fromISO(text, opts) {
    const [parsed] = parseISODuration(text);
    if (parsed) {
      return _Duration.fromObject(parsed, opts);
    } else {
      return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
    }
  }
  /**
   * Create a Duration from an ISO 8601 time string.
   * @param {string} text - text to parse
   * @param {Object} opts - options for parsing
   * @param {string} [opts.locale='en-US'] - the locale to use
   * @param {string} opts.numberingSystem - the numbering system to use
   * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
   * @param {string} [opts.matrix=Object] - the conversion system to use
   * @see https://en.wikipedia.org/wiki/ISO_8601#Times
   * @example Duration.fromISOTime('11:22:33.444').toObject() //=> { hours: 11, minutes: 22, seconds: 33, milliseconds: 444 }
   * @example Duration.fromISOTime('11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
   * @example Duration.fromISOTime('T11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
   * @example Duration.fromISOTime('1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
   * @example Duration.fromISOTime('T1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
   * @return {Duration}
   */
  static fromISOTime(text, opts) {
    const [parsed] = parseISOTimeOnly(text);
    if (parsed) {
      return _Duration.fromObject(parsed, opts);
    } else {
      return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
    }
  }
  /**
   * Create an invalid Duration.
   * @param {string} reason - simple string of why this datetime is invalid. Should not contain parameters or anything else data-dependent
   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
   * @return {Duration}
   */
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidDurationError(invalid);
    } else {
      return new _Duration({ invalid });
    }
  }
  /**
   * @private
   */
  static normalizeUnit(unit) {
    const normalized = {
      year: "years",
      years: "years",
      quarter: "quarters",
      quarters: "quarters",
      month: "months",
      months: "months",
      week: "weeks",
      weeks: "weeks",
      day: "days",
      days: "days",
      hour: "hours",
      hours: "hours",
      minute: "minutes",
      minutes: "minutes",
      second: "seconds",
      seconds: "seconds",
      millisecond: "milliseconds",
      milliseconds: "milliseconds"
    }[unit ? unit.toLowerCase() : unit];
    if (!normalized)
      throw new InvalidUnitError(unit);
    return normalized;
  }
  /**
   * Check if an object is a Duration. Works across context boundaries
   * @param {object} o
   * @return {boolean}
   */
  static isDuration(o) {
    return o && o.isLuxonDuration || false;
  }
  /**
   * Get  the locale of a Duration, such 'en-GB'
   * @type {string}
   */
  get locale() {
    return this.isValid ? this.loc.locale : null;
  }
  /**
   * Get the numbering system of a Duration, such 'beng'. The numbering system is used when formatting the Duration
   *
   * @type {string}
   */
  get numberingSystem() {
    return this.isValid ? this.loc.numberingSystem : null;
  }
  /**
   * Returns a string representation of this Duration formatted according to the specified format string. You may use these tokens:
   * * `S` for milliseconds
   * * `s` for seconds
   * * `m` for minutes
   * * `h` for hours
   * * `d` for days
   * * `w` for weeks
   * * `M` for months
   * * `y` for years
   * Notes:
   * * Add padding by repeating the token, e.g. "yy" pads the years to two digits, "hhhh" pads the hours out to four digits
   * * Tokens can be escaped by wrapping with single quotes.
   * * The duration will be converted to the set of units in the format string using {@link Duration#shiftTo} and the Durations's conversion accuracy setting.
   * @param {string} fmt - the format string
   * @param {Object} opts - options
   * @param {boolean} [opts.floor=true] - floor numerical values
   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("y d s") //=> "1 6 2"
   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("yy dd sss") //=> "01 06 002"
   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("M S") //=> "12 518402000"
   * @return {string}
   */
  toFormat(fmt, opts = {}) {
    const fmtOpts = {
      ...opts,
      floor: opts.round !== false && opts.floor !== false
    };
    return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID;
  }
  /**
   * Returns a string representation of a Duration with all units included.
   * To modify its behavior, use `listStyle` and any Intl.NumberFormat option, though `unitDisplay` is especially relevant.
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#options
   * @param {Object} opts - Formatting options. Accepts the same keys as the options parameter of the native `Intl.NumberFormat` constructor, as well as `listStyle`.
   * @param {string} [opts.listStyle='narrow'] - How to format the merged list. Corresponds to the `style` property of the options parameter of the native `Intl.ListFormat` constructor.
   * @example
   * ```js
   * var dur = Duration.fromObject({ days: 1, hours: 5, minutes: 6 })
   * dur.toHuman() //=> '1 day, 5 hours, 6 minutes'
   * dur.toHuman({ listStyle: "long" }) //=> '1 day, 5 hours, and 6 minutes'
   * dur.toHuman({ unitDisplay: "short" }) //=> '1 day, 5 hr, 6 min'
   * ```
   */
  toHuman(opts = {}) {
    if (!this.isValid)
      return INVALID;
    const l2 = orderedUnits.map((unit) => {
      const val = this.values[unit];
      if (isUndefined(val)) {
        return null;
      }
      return this.loc.numberFormatter({ style: "unit", unitDisplay: "long", ...opts, unit: unit.slice(0, -1) }).format(val);
    }).filter((n2) => n2);
    return this.loc.listFormatter({ type: "conjunction", style: opts.listStyle || "narrow", ...opts }).format(l2);
  }
  /**
   * Returns a JavaScript object with this Duration's values.
   * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toObject() //=> { years: 1, days: 6, seconds: 2 }
   * @return {Object}
   */
  toObject() {
    if (!this.isValid)
      return {};
    return { ...this.values };
  }
  /**
   * Returns an ISO 8601-compliant string representation of this Duration.
   * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
   * @example Duration.fromObject({ years: 3, seconds: 45 }).toISO() //=> 'P3YT45S'
   * @example Duration.fromObject({ months: 4, seconds: 45 }).toISO() //=> 'P4MT45S'
   * @example Duration.fromObject({ months: 5 }).toISO() //=> 'P5M'
   * @example Duration.fromObject({ minutes: 5 }).toISO() //=> 'PT5M'
   * @example Duration.fromObject({ milliseconds: 6 }).toISO() //=> 'PT0.006S'
   * @return {string}
   */
  toISO() {
    if (!this.isValid)
      return null;
    let s2 = "P";
    if (this.years !== 0)
      s2 += this.years + "Y";
    if (this.months !== 0 || this.quarters !== 0)
      s2 += this.months + this.quarters * 3 + "M";
    if (this.weeks !== 0)
      s2 += this.weeks + "W";
    if (this.days !== 0)
      s2 += this.days + "D";
    if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
      s2 += "T";
    if (this.hours !== 0)
      s2 += this.hours + "H";
    if (this.minutes !== 0)
      s2 += this.minutes + "M";
    if (this.seconds !== 0 || this.milliseconds !== 0)
      s2 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
    if (s2 === "P")
      s2 += "T0S";
    return s2;
  }
  /**
   * Returns an ISO 8601-compliant string representation of this Duration, formatted as a time of day.
   * Note that this will return null if the duration is invalid, negative, or equal to or greater than 24 hours.
   * @see https://en.wikipedia.org/wiki/ISO_8601#Times
   * @param {Object} opts - options
   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
   * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
   * @param {string} [opts.format='extended'] - choose between the basic and extended format
   * @example Duration.fromObject({ hours: 11 }).toISOTime() //=> '11:00:00.000'
   * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressMilliseconds: true }) //=> '11:00:00'
   * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressSeconds: true }) //=> '11:00'
   * @example Duration.fromObject({ hours: 11 }).toISOTime({ includePrefix: true }) //=> 'T11:00:00.000'
   * @example Duration.fromObject({ hours: 11 }).toISOTime({ format: 'basic' }) //=> '110000.000'
   * @return {string}
   */
  toISOTime(opts = {}) {
    if (!this.isValid)
      return null;
    const millis = this.toMillis();
    if (millis < 0 || millis >= 864e5)
      return null;
    opts = {
      suppressMilliseconds: false,
      suppressSeconds: false,
      includePrefix: false,
      format: "extended",
      ...opts,
      includeOffset: false
    };
    const dateTime = DateTime.fromMillis(millis, { zone: "UTC" });
    return dateTime.toISOTime(opts);
  }
  /**
   * Returns an ISO 8601 representation of this Duration appropriate for use in JSON.
   * @return {string}
   */
  toJSON() {
    return this.toISO();
  }
  /**
   * Returns an ISO 8601 representation of this Duration appropriate for use in debugging.
   * @return {string}
   */
  toString() {
    return this.toISO();
  }
  /**
   * Returns a string representation of this Duration appropriate for the REPL.
   * @return {string}
   */
  [Symbol.for("nodejs.util.inspect.custom")]() {
    if (this.isValid) {
      return `Duration { values: ${JSON.stringify(this.values)} }`;
    } else {
      return `Duration { Invalid, reason: ${this.invalidReason} }`;
    }
  }
  /**
   * Returns an milliseconds value of this Duration.
   * @return {number}
   */
  toMillis() {
    if (!this.isValid)
      return NaN;
    return durationToMillis(this.matrix, this.values);
  }
  /**
   * Returns an milliseconds value of this Duration. Alias of {@link toMillis}
   * @return {number}
   */
  valueOf() {
    return this.toMillis();
  }
  /**
   * Make this Duration longer by the specified amount. Return a newly-constructed Duration.
   * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
   * @return {Duration}
   */
  plus(duration) {
    if (!this.isValid)
      return this;
    const dur = _Duration.fromDurationLike(duration), result = {};
    for (const k of orderedUnits) {
      if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {
        result[k] = dur.get(k) + this.get(k);
      }
    }
    return clone(this, { values: result }, true);
  }
  /**
   * Make this Duration shorter by the specified amount. Return a newly-constructed Duration.
   * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
   * @return {Duration}
   */
  minus(duration) {
    if (!this.isValid)
      return this;
    const dur = _Duration.fromDurationLike(duration);
    return this.plus(dur.negate());
  }
  /**
   * Scale this Duration by the specified amount. Return a newly-constructed Duration.
   * @param {function} fn - The function to apply to each unit. Arity is 1 or 2: the value of the unit and, optionally, the unit name. Must return a number.
   * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits(x => x * 2) //=> { hours: 2, minutes: 60 }
   * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits((x, u) => u === "hours" ? x * 2 : x) //=> { hours: 2, minutes: 30 }
   * @return {Duration}
   */
  mapUnits(fn) {
    if (!this.isValid)
      return this;
    const result = {};
    for (const k of Object.keys(this.values)) {
      result[k] = asNumber(fn(this.values[k], k));
    }
    return clone(this, { values: result }, true);
  }
  /**
   * Get the value of unit.
   * @param {string} unit - a unit such as 'minute' or 'day'
   * @example Duration.fromObject({years: 2, days: 3}).get('years') //=> 2
   * @example Duration.fromObject({years: 2, days: 3}).get('months') //=> 0
   * @example Duration.fromObject({years: 2, days: 3}).get('days') //=> 3
   * @return {number}
   */
  get(unit) {
    return this[_Duration.normalizeUnit(unit)];
  }
  /**
   * "Set" the values of specified units. Return a newly-constructed Duration.
   * @param {Object} values - a mapping of units to numbers
   * @example dur.set({ years: 2017 })
   * @example dur.set({ hours: 8, minutes: 30 })
   * @return {Duration}
   */
  set(values) {
    if (!this.isValid)
      return this;
    const mixed = { ...this.values, ...normalizeObject(values, _Duration.normalizeUnit) };
    return clone(this, { values: mixed });
  }
  /**
   * "Set" the locale and/or numberingSystem.  Returns a newly-constructed Duration.
   * @example dur.reconfigure({ locale: 'en-GB' })
   * @return {Duration}
   */
  reconfigure({ locale, numberingSystem, conversionAccuracy, matrix } = {}) {
    const loc = this.loc.clone({ locale, numberingSystem });
    const opts = { loc, matrix, conversionAccuracy };
    return clone(this, opts);
  }
  /**
   * Return the length of the duration in the specified unit.
   * @param {string} unit - a unit such as 'minutes' or 'days'
   * @example Duration.fromObject({years: 1}).as('days') //=> 365
   * @example Duration.fromObject({years: 1}).as('months') //=> 12
   * @example Duration.fromObject({hours: 60}).as('days') //=> 2.5
   * @return {number}
   */
  as(unit) {
    return this.isValid ? this.shiftTo(unit).get(unit) : NaN;
  }
  /**
   * Reduce this Duration to its canonical representation in its current units.
   * Assuming the overall value of the Duration is positive, this means:
   * - excessive values for lower-order units are converted to higher-order units (if possible, see first and second example)
   * - negative lower-order units are converted to higher order units (there must be such a higher order unit, otherwise
   *   the overall value would be negative, see third example)
   * - fractional values for higher-order units are converted to lower-order units (if possible, see fourth example)
   *
   * If the overall value is negative, the result of this method is equivalent to `this.negate().normalize().negate()`.
   * @example Duration.fromObject({ years: 2, days: 5000 }).normalize().toObject() //=> { years: 15, days: 255 }
   * @example Duration.fromObject({ days: 5000 }).normalize().toObject() //=> { days: 5000 }
   * @example Duration.fromObject({ hours: 12, minutes: -45 }).normalize().toObject() //=> { hours: 11, minutes: 15 }
   * @example Duration.fromObject({ years: 2.5, days: 0, hours: 0 }).normalize().toObject() //=> { years: 2, days: 182, hours: 12 }
   * @return {Duration}
   */
  normalize() {
    if (!this.isValid)
      return this;
    const vals = this.toObject();
    normalizeValues(this.matrix, vals);
    return clone(this, { values: vals }, true);
  }
  /**
   * Rescale units to its largest representation
   * @example Duration.fromObject({ milliseconds: 90000 }).rescale().toObject() //=> { minutes: 1, seconds: 30 }
   * @return {Duration}
   */
  rescale() {
    if (!this.isValid)
      return this;
    const vals = removeZeroes(this.normalize().shiftToAll().toObject());
    return clone(this, { values: vals }, true);
  }
  /**
   * Convert this Duration into its representation in a different set of units.
   * @example Duration.fromObject({ hours: 1, seconds: 30 }).shiftTo('minutes', 'milliseconds').toObject() //=> { minutes: 60, milliseconds: 30000 }
   * @return {Duration}
   */
  shiftTo(...units) {
    if (!this.isValid)
      return this;
    if (units.length === 0) {
      return this;
    }
    units = units.map((u) => _Duration.normalizeUnit(u));
    const built = {}, accumulated = {}, vals = this.toObject();
    let lastUnit;
    for (const k of orderedUnits) {
      if (units.indexOf(k) >= 0) {
        lastUnit = k;
        let own = 0;
        for (const ak in accumulated) {
          own += this.matrix[ak][k] * accumulated[ak];
          accumulated[ak] = 0;
        }
        if (isNumber(vals[k])) {
          own += vals[k];
        }
        const i = Math.trunc(own);
        built[k] = i;
        accumulated[k] = (own * 1e3 - i * 1e3) / 1e3;
      } else if (isNumber(vals[k])) {
        accumulated[k] = vals[k];
      }
    }
    for (const key in accumulated) {
      if (accumulated[key] !== 0) {
        built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
      }
    }
    normalizeValues(this.matrix, built);
    return clone(this, { values: built }, true);
  }
  /**
   * Shift this Duration to all available units.
   * Same as shiftTo("years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds")
   * @return {Duration}
   */
  shiftToAll() {
    if (!this.isValid)
      return this;
    return this.shiftTo(
      "years",
      "months",
      "weeks",
      "days",
      "hours",
      "minutes",
      "seconds",
      "milliseconds"
    );
  }
  /**
   * Return the negative of this Duration.
   * @example Duration.fromObject({ hours: 1, seconds: 30 }).negate().toObject() //=> { hours: -1, seconds: -30 }
   * @return {Duration}
   */
  negate() {
    if (!this.isValid)
      return this;
    const negated = {};
    for (const k of Object.keys(this.values)) {
      negated[k] = this.values[k] === 0 ? 0 : -this.values[k];
    }
    return clone(this, { values: negated }, true);
  }
  /**
   * Get the years.
   * @type {number}
   */
  get years() {
    return this.isValid ? this.values.years || 0 : NaN;
  }
  /**
   * Get the quarters.
   * @type {number}
   */
  get quarters() {
    return this.isValid ? this.values.quarters || 0 : NaN;
  }
  /**
   * Get the months.
   * @type {number}
   */
  get months() {
    return this.isValid ? this.values.months || 0 : NaN;
  }
  /**
   * Get the weeks
   * @type {number}
   */
  get weeks() {
    return this.isValid ? this.values.weeks || 0 : NaN;
  }
  /**
   * Get the days.
   * @type {number}
   */
  get days() {
    return this.isValid ? this.values.days || 0 : NaN;
  }
  /**
   * Get the hours.
   * @type {number}
   */
  get hours() {
    return this.isValid ? this.values.hours || 0 : NaN;
  }
  /**
   * Get the minutes.
   * @type {number}
   */
  get minutes() {
    return this.isValid ? this.values.minutes || 0 : NaN;
  }
  /**
   * Get the seconds.
   * @return {number}
   */
  get seconds() {
    return this.isValid ? this.values.seconds || 0 : NaN;
  }
  /**
   * Get the milliseconds.
   * @return {number}
   */
  get milliseconds() {
    return this.isValid ? this.values.milliseconds || 0 : NaN;
  }
  /**
   * Returns whether the Duration is invalid. Invalid durations are returned by diff operations
   * on invalid DateTimes or Intervals.
   * @return {boolean}
   */
  get isValid() {
    return this.invalid === null;
  }
  /**
   * Returns an error code if this Duration became invalid, or null if the Duration is valid
   * @return {string}
   */
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  /**
   * Returns an explanation of why this Duration became invalid, or null if the Duration is valid
   * @type {string}
   */
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  /**
   * Equality check
   * Two Durations are equal iff they have the same units and the same values for each unit.
   * @param {Duration} other
   * @return {boolean}
   */
  equals(other) {
    if (!this.isValid || !other.isValid) {
      return false;
    }
    if (!this.loc.equals(other.loc)) {
      return false;
    }
    function eq(v1, v2) {
      if (v1 === void 0 || v1 === 0)
        return v2 === void 0 || v2 === 0;
      return v1 === v2;
    }
    for (const u of orderedUnits) {
      if (!eq(this.values[u], other.values[u])) {
        return false;
      }
    }
    return true;
  }
};

// node_modules/luxon/src/interval.js
var INVALID2 = "Invalid Interval";
function validateStartEnd(start, end) {
  if (!start || !start.isValid) {
    return Interval.invalid("missing or invalid start");
  } else if (!end || !end.isValid) {
    return Interval.invalid("missing or invalid end");
  } else if (end < start) {
    return Interval.invalid(
      "end before start",
      `The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`
    );
  } else {
    return null;
  }
}
var Interval = class _Interval {
  /**
   * @private
   */
  constructor(config) {
    this.s = config.start;
    this.e = config.end;
    this.invalid = config.invalid || null;
    this.isLuxonInterval = true;
  }
  /**
   * Create an invalid Interval.
   * @param {string} reason - simple string of why this Interval is invalid. Should not contain parameters or anything else data-dependent
   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
   * @return {Interval}
   */
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidIntervalError(invalid);
    } else {
      return new _Interval({ invalid });
    }
  }
  /**
   * Create an Interval from a start DateTime and an end DateTime. Inclusive of the start but not the end.
   * @param {DateTime|Date|Object} start
   * @param {DateTime|Date|Object} end
   * @return {Interval}
   */
  static fromDateTimes(start, end) {
    const builtStart = friendlyDateTime(start), builtEnd = friendlyDateTime(end);
    const validateError = validateStartEnd(builtStart, builtEnd);
    if (validateError == null) {
      return new _Interval({
        start: builtStart,
        end: builtEnd
      });
    } else {
      return validateError;
    }
  }
  /**
   * Create an Interval from a start DateTime and a Duration to extend to.
   * @param {DateTime|Date|Object} start
   * @param {Duration|Object|number} duration - the length of the Interval.
   * @return {Interval}
   */
  static after(start, duration) {
    const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start);
    return _Interval.fromDateTimes(dt, dt.plus(dur));
  }
  /**
   * Create an Interval from an end DateTime and a Duration to extend backwards to.
   * @param {DateTime|Date|Object} end
   * @param {Duration|Object|number} duration - the length of the Interval.
   * @return {Interval}
   */
  static before(end, duration) {
    const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
    return _Interval.fromDateTimes(dt.minus(dur), dt);
  }
  /**
   * Create an Interval from an ISO 8601 string.
   * Accepts `<start>/<end>`, `<start>/<duration>`, and `<duration>/<end>` formats.
   * @param {string} text - the ISO string to parse
   * @param {Object} [opts] - options to pass {@link DateTime#fromISO} and optionally {@link Duration#fromISO}
   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
   * @return {Interval}
   */
  static fromISO(text, opts) {
    const [s2, e] = (text || "").split("/", 2);
    if (s2 && e) {
      let start, startIsValid;
      try {
        start = DateTime.fromISO(s2, opts);
        startIsValid = start.isValid;
      } catch (e2) {
        startIsValid = false;
      }
      let end, endIsValid;
      try {
        end = DateTime.fromISO(e, opts);
        endIsValid = end.isValid;
      } catch (e2) {
        endIsValid = false;
      }
      if (startIsValid && endIsValid) {
        return _Interval.fromDateTimes(start, end);
      }
      if (startIsValid) {
        const dur = Duration.fromISO(e, opts);
        if (dur.isValid) {
          return _Interval.after(start, dur);
        }
      } else if (endIsValid) {
        const dur = Duration.fromISO(s2, opts);
        if (dur.isValid) {
          return _Interval.before(end, dur);
        }
      }
    }
    return _Interval.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
  }
  /**
   * Check if an object is an Interval. Works across context boundaries
   * @param {object} o
   * @return {boolean}
   */
  static isInterval(o) {
    return o && o.isLuxonInterval || false;
  }
  /**
   * Returns the start of the Interval
   * @type {DateTime}
   */
  get start() {
    return this.isValid ? this.s : null;
  }
  /**
   * Returns the end of the Interval
   * @type {DateTime}
   */
  get end() {
    return this.isValid ? this.e : null;
  }
  /**
   * Returns whether this Interval's end is at least its start, meaning that the Interval isn't 'backwards'.
   * @type {boolean}
   */
  get isValid() {
    return this.invalidReason === null;
  }
  /**
   * Returns an error code if this Interval is invalid, or null if the Interval is valid
   * @type {string}
   */
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  /**
   * Returns an explanation of why this Interval became invalid, or null if the Interval is valid
   * @type {string}
   */
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  /**
   * Returns the length of the Interval in the specified unit.
   * @param {string} unit - the unit (such as 'hours' or 'days') to return the length in.
   * @return {number}
   */
  length(unit = "milliseconds") {
    return this.isValid ? this.toDuration(...[unit]).get(unit) : NaN;
  }
  /**
   * Returns the count of minutes, hours, days, months, or years included in the Interval, even in part.
   * Unlike {@link Interval#length} this counts sections of the calendar, not periods of time, e.g. specifying 'day'
   * asks 'what dates are included in this interval?', not 'how many days long is this interval?'
   * @param {string} [unit='milliseconds'] - the unit of time to count.
   * @param {Object} opts - options
   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; this operation will always use the locale of the start DateTime
   * @return {number}
   */
  count(unit = "milliseconds", opts) {
    if (!this.isValid)
      return NaN;
    const start = this.start.startOf(unit, opts);
    let end;
    if (opts == null ? void 0 : opts.useLocaleWeeks) {
      end = this.end.reconfigure({ locale: start.locale });
    } else {
      end = this.end;
    }
    end = end.startOf(unit, opts);
    return Math.floor(end.diff(start, unit).get(unit)) + (end.valueOf() !== this.end.valueOf());
  }
  /**
   * Returns whether this Interval's start and end are both in the same unit of time
   * @param {string} unit - the unit of time to check sameness on
   * @return {boolean}
   */
  hasSame(unit) {
    return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;
  }
  /**
   * Return whether this Interval has the same start and end DateTimes.
   * @return {boolean}
   */
  isEmpty() {
    return this.s.valueOf() === this.e.valueOf();
  }
  /**
   * Return whether this Interval's start is after the specified DateTime.
   * @param {DateTime} dateTime
   * @return {boolean}
   */
  isAfter(dateTime) {
    if (!this.isValid)
      return false;
    return this.s > dateTime;
  }
  /**
   * Return whether this Interval's end is before the specified DateTime.
   * @param {DateTime} dateTime
   * @return {boolean}
   */
  isBefore(dateTime) {
    if (!this.isValid)
      return false;
    return this.e <= dateTime;
  }
  /**
   * Return whether this Interval contains the specified DateTime.
   * @param {DateTime} dateTime
   * @return {boolean}
   */
  contains(dateTime) {
    if (!this.isValid)
      return false;
    return this.s <= dateTime && this.e > dateTime;
  }
  /**
   * "Sets" the start and/or end dates. Returns a newly-constructed Interval.
   * @param {Object} values - the values to set
   * @param {DateTime} values.start - the starting DateTime
   * @param {DateTime} values.end - the ending DateTime
   * @return {Interval}
   */
  set({ start, end } = {}) {
    if (!this.isValid)
      return this;
    return _Interval.fromDateTimes(start || this.s, end || this.e);
  }
  /**
   * Split this Interval at each of the specified DateTimes
   * @param {...DateTime} dateTimes - the unit of time to count.
   * @return {Array}
   */
  splitAt(...dateTimes) {
    if (!this.isValid)
      return [];
    const sorted = dateTimes.map(friendlyDateTime).filter((d) => this.contains(d)).sort((a, b) => a.toMillis() - b.toMillis()), results = [];
    let { s: s2 } = this, i = 0;
    while (s2 < this.e) {
      const added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
      results.push(_Interval.fromDateTimes(s2, next));
      s2 = next;
      i += 1;
    }
    return results;
  }
  /**
   * Split this Interval into smaller Intervals, each of the specified length.
   * Left over time is grouped into a smaller interval
   * @param {Duration|Object|number} duration - The length of each resulting interval.
   * @return {Array}
   */
  splitBy(duration) {
    const dur = Duration.fromDurationLike(duration);
    if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
      return [];
    }
    let { s: s2 } = this, idx = 1, next;
    const results = [];
    while (s2 < this.e) {
      const added = this.start.plus(dur.mapUnits((x) => x * idx));
      next = +added > +this.e ? this.e : added;
      results.push(_Interval.fromDateTimes(s2, next));
      s2 = next;
      idx += 1;
    }
    return results;
  }
  /**
   * Split this Interval into the specified number of smaller intervals.
   * @param {number} numberOfParts - The number of Intervals to divide the Interval into.
   * @return {Array}
   */
  divideEqually(numberOfParts) {
    if (!this.isValid)
      return [];
    return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
  }
  /**
   * Return whether this Interval overlaps with the specified Interval
   * @param {Interval} other
   * @return {boolean}
   */
  overlaps(other) {
    return this.e > other.s && this.s < other.e;
  }
  /**
   * Return whether this Interval's end is adjacent to the specified Interval's start.
   * @param {Interval} other
   * @return {boolean}
   */
  abutsStart(other) {
    if (!this.isValid)
      return false;
    return +this.e === +other.s;
  }
  /**
   * Return whether this Interval's start is adjacent to the specified Interval's end.
   * @param {Interval} other
   * @return {boolean}
   */
  abutsEnd(other) {
    if (!this.isValid)
      return false;
    return +other.e === +this.s;
  }
  /**
   * Return whether this Interval engulfs the start and end of the specified Interval.
   * @param {Interval} other
   * @return {boolean}
   */
  engulfs(other) {
    if (!this.isValid)
      return false;
    return this.s <= other.s && this.e >= other.e;
  }
  /**
   * Return whether this Interval has the same start and end as the specified Interval.
   * @param {Interval} other
   * @return {boolean}
   */
  equals(other) {
    if (!this.isValid || !other.isValid) {
      return false;
    }
    return this.s.equals(other.s) && this.e.equals(other.e);
  }
  /**
   * Return an Interval representing the intersection of this Interval and the specified Interval.
   * Specifically, the resulting Interval has the maximum start time and the minimum end time of the two Intervals.
   * Returns null if the intersection is empty, meaning, the intervals don't intersect.
   * @param {Interval} other
   * @return {Interval}
   */
  intersection(other) {
    if (!this.isValid)
      return this;
    const s2 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
    if (s2 >= e) {
      return null;
    } else {
      return _Interval.fromDateTimes(s2, e);
    }
  }
  /**
   * Return an Interval representing the union of this Interval and the specified Interval.
   * Specifically, the resulting Interval has the minimum start time and the maximum end time of the two Intervals.
   * @param {Interval} other
   * @return {Interval}
   */
  union(other) {
    if (!this.isValid)
      return this;
    const s2 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
    return _Interval.fromDateTimes(s2, e);
  }
  /**
   * Merge an array of Intervals into a equivalent minimal set of Intervals.
   * Combines overlapping and adjacent Intervals.
   * @param {Array} intervals
   * @return {Array}
   */
  static merge(intervals) {
    const [found, final] = intervals.sort((a, b) => a.s - b.s).reduce(
      ([sofar, current], item) => {
        if (!current) {
          return [sofar, item];
        } else if (current.overlaps(item) || current.abutsStart(item)) {
          return [sofar, current.union(item)];
        } else {
          return [sofar.concat([current]), item];
        }
      },
      [[], null]
    );
    if (final) {
      found.push(final);
    }
    return found;
  }
  /**
   * Return an array of Intervals representing the spans of time that only appear in one of the specified Intervals.
   * @param {Array} intervals
   * @return {Array}
   */
  static xor(intervals) {
    let start = null, currentCount = 0;
    const results = [], ends = intervals.map((i) => [
      { time: i.s, type: "s" },
      { time: i.e, type: "e" }
    ]), flattened = Array.prototype.concat(...ends), arr = flattened.sort((a, b) => a.time - b.time);
    for (const i of arr) {
      currentCount += i.type === "s" ? 1 : -1;
      if (currentCount === 1) {
        start = i.time;
      } else {
        if (start && +start !== +i.time) {
          results.push(_Interval.fromDateTimes(start, i.time));
        }
        start = null;
      }
    }
    return _Interval.merge(results);
  }
  /**
   * Return an Interval representing the span of time in this Interval that doesn't overlap with any of the specified Intervals.
   * @param {...Interval} intervals
   * @return {Array}
   */
  difference(...intervals) {
    return _Interval.xor([this].concat(intervals)).map((i) => this.intersection(i)).filter((i) => i && !i.isEmpty());
  }
  /**
   * Returns a string representation of this Interval appropriate for debugging.
   * @return {string}
   */
  toString() {
    if (!this.isValid)
      return INVALID2;
    return `[${this.s.toISO()} \u2013 ${this.e.toISO()})`;
  }
  /**
   * Returns a string representation of this Interval appropriate for the REPL.
   * @return {string}
   */
  [Symbol.for("nodejs.util.inspect.custom")]() {
    if (this.isValid) {
      return `Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`;
    } else {
      return `Interval { Invalid, reason: ${this.invalidReason} }`;
    }
  }
  /**
   * Returns a localized string representing this Interval. Accepts the same options as the
   * Intl.DateTimeFormat constructor and any presets defined by Luxon, such as
   * {@link DateTime.DATE_FULL} or {@link DateTime.TIME_SIMPLE}. The exact behavior of this method
   * is browser-specific, but in general it will return an appropriate representation of the
   * Interval in the assigned locale. Defaults to the system's locale if no locale has been
   * specified.
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
   * @param {Object} [formatOpts=DateTime.DATE_SHORT] - Either a DateTime preset or
   * Intl.DateTimeFormat constructor options.
   * @param {Object} opts - Options to override the configuration of the start DateTime.
   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(); //=> 11/7/2022 – 11/8/2022
   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL); //=> November 7 – 8, 2022
   * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL, { locale: 'fr-FR' }); //=> 7–8 novembre 2022
   * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString(DateTime.TIME_SIMPLE); //=> 6:00 – 8:00 PM
   * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> Mon, Nov 07, 6:00 – 8:00 p
   * @return {string}
   */
  toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
    return this.isValid ? Formatter.create(this.s.loc.clone(opts), formatOpts).formatInterval(this) : INVALID2;
  }
  /**
   * Returns an ISO 8601-compliant string representation of this Interval.
   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
   * @param {Object} opts - The same options as {@link DateTime#toISO}
   * @return {string}
   */
  toISO(opts) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;
  }
  /**
   * Returns an ISO 8601-compliant string representation of date of this Interval.
   * The time components are ignored.
   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
   * @return {string}
   */
  toISODate() {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISODate()}/${this.e.toISODate()}`;
  }
  /**
   * Returns an ISO 8601-compliant string representation of time of this Interval.
   * The date components are ignored.
   * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
   * @param {Object} opts - The same options as {@link DateTime#toISO}
   * @return {string}
   */
  toISOTime(opts) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;
  }
  /**
   * Returns a string representation of this Interval formatted according to the specified format
   * string. **You may not want this.** See {@link Interval#toLocaleString} for a more flexible
   * formatting tool.
   * @param {string} dateFormat - The format string. This string formats the start and end time.
   * See {@link DateTime#toFormat} for details.
   * @param {Object} opts - Options.
   * @param {string} [opts.separator =  ' – '] - A separator to place between the start and end
   * representations.
   * @return {string}
   */
  toFormat(dateFormat, { separator = " \u2013 " } = {}) {
    if (!this.isValid)
      return INVALID2;
    return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;
  }
  /**
   * Return a Duration representing the time spanned by this interval.
   * @param {string|string[]} [unit=['milliseconds']] - the unit or units (such as 'hours' or 'days') to include in the duration.
   * @param {Object} opts - options that affect the creation of the Duration
   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
   * @example Interval.fromDateTimes(dt1, dt2).toDuration().toObject() //=> { milliseconds: 88489257 }
   * @example Interval.fromDateTimes(dt1, dt2).toDuration('days').toObject() //=> { days: 1.0241812152777778 }
   * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes']).toObject() //=> { hours: 24, minutes: 34.82095 }
   * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes', 'seconds']).toObject() //=> { hours: 24, minutes: 34, seconds: 49.257 }
   * @example Interval.fromDateTimes(dt1, dt2).toDuration('seconds').toObject() //=> { seconds: 88489.257 }
   * @return {Duration}
   */
  toDuration(unit, opts) {
    if (!this.isValid) {
      return Duration.invalid(this.invalidReason);
    }
    return this.e.diff(this.s, unit, opts);
  }
  /**
   * Run mapFn on the interval start and end, returning a new Interval from the resulting DateTimes
   * @param {function} mapFn
   * @return {Interval}
   * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.toUTC())
   * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.plus({ hours: 2 }))
   */
  mapEndpoints(mapFn) {
    return _Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));
  }
};

// node_modules/luxon/src/info.js
var Info = class {
  /**
   * Return whether the specified zone contains a DST.
   * @param {string|Zone} [zone='local'] - Zone to check. Defaults to the environment's local zone.
   * @return {boolean}
   */
  static hasDST(zone = Settings.defaultZone) {
    const proto = DateTime.now().setZone(zone).set({ month: 12 });
    return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;
  }
  /**
   * Return whether the specified zone is a valid IANA specifier.
   * @param {string} zone - Zone to check
   * @return {boolean}
   */
  static isValidIANAZone(zone) {
    return IANAZone.isValidZone(zone);
  }
  /**
   * Converts the input into a {@link Zone} instance.
   *
   * * If `input` is already a Zone instance, it is returned unchanged.
   * * If `input` is a string containing a valid time zone name, a Zone instance
   *   with that name is returned.
   * * If `input` is a string that doesn't refer to a known time zone, a Zone
   *   instance with {@link Zone#isValid} == false is returned.
   * * If `input is a number, a Zone instance with the specified fixed offset
   *   in minutes is returned.
   * * If `input` is `null` or `undefined`, the default zone is returned.
   * @param {string|Zone|number} [input] - the value to be converted
   * @return {Zone}
   */
  static normalizeZone(input) {
    return normalizeZone(input, Settings.defaultZone);
  }
  /**
   * Get the weekday on which the week starts according to the given locale.
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @returns {number} the start of the week, 1 for Monday through 7 for Sunday
   */
  static getStartOfWeek({ locale = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale)).getStartOfWeek();
  }
  /**
   * Get the minimum number of days necessary in a week before it is considered part of the next year according
   * to the given locale.
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @returns {number}
   */
  static getMinimumDaysInFirstWeek({ locale = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale)).getMinDaysInFirstWeek();
  }
  /**
   * Get the weekdays, which are considered the weekend according to the given locale
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @returns {number[]} an array of weekdays, 1 for Monday through 7 for Sunday
   */
  static getWeekendWeekdays({ locale = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale)).getWeekendDays().slice();
  }
  /**
   * Return an array of standalone month names.
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
   * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.numberingSystem=null] - the numbering system
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @param {string} [opts.outputCalendar='gregory'] - the calendar
   * @example Info.months()[0] //=> 'January'
   * @example Info.months('short')[0] //=> 'Jan'
   * @example Info.months('numeric')[0] //=> '1'
   * @example Info.months('short', { locale: 'fr-CA' } )[0] //=> 'janv.'
   * @example Info.months('numeric', { locale: 'ar' })[0] //=> '١'
   * @example Info.months('long', { outputCalendar: 'islamic' })[0] //=> 'Rabiʻ I'
   * @return {Array}
   */
  static months(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
    return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);
  }
  /**
   * Return an array of format month names.
   * Format months differ from standalone months in that they're meant to appear next to the day of the month. In some languages, that
   * changes the string.
   * See {@link Info#months}
   * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.numberingSystem=null] - the numbering system
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @param {string} [opts.outputCalendar='gregory'] - the calendar
   * @return {Array}
   */
  static monthsFormat(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
    return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);
  }
  /**
   * Return an array of standalone week names.
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
   * @param {string} [length='long'] - the length of the weekday representation, such as "narrow", "short", "long".
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @param {string} [opts.numberingSystem=null] - the numbering system
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @example Info.weekdays()[0] //=> 'Monday'
   * @example Info.weekdays('short')[0] //=> 'Mon'
   * @example Info.weekdays('short', { locale: 'fr-CA' })[0] //=> 'lun.'
   * @example Info.weekdays('short', { locale: 'ar' })[0] //=> 'الاثنين'
   * @return {Array}
   */
  static weekdays(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);
  }
  /**
   * Return an array of format week names.
   * Format weekdays differ from standalone weekdays in that they're meant to appear next to more date information. In some languages, that
   * changes the string.
   * See {@link Info#weekdays}
   * @param {string} [length='long'] - the length of the month representation, such as "narrow", "short", "long".
   * @param {Object} opts - options
   * @param {string} [opts.locale=null] - the locale code
   * @param {string} [opts.numberingSystem=null] - the numbering system
   * @param {string} [opts.locObj=null] - an existing locale object to use
   * @return {Array}
   */
  static weekdaysFormat(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
    return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);
  }
  /**
   * Return an array of meridiems.
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @example Info.meridiems() //=> [ 'AM', 'PM' ]
   * @example Info.meridiems({ locale: 'my' }) //=> [ 'နံနက်', 'ညနေ' ]
   * @return {Array}
   */
  static meridiems({ locale = null } = {}) {
    return Locale.create(locale).meridiems();
  }
  /**
   * Return an array of eras, such as ['BC', 'AD']. The locale can be specified, but the calendar system is always Gregorian.
   * @param {string} [length='short'] - the length of the era representation, such as "short" or "long".
   * @param {Object} opts - options
   * @param {string} [opts.locale] - the locale code
   * @example Info.eras() //=> [ 'BC', 'AD' ]
   * @example Info.eras('long') //=> [ 'Before Christ', 'Anno Domini' ]
   * @example Info.eras('long', { locale: 'fr' }) //=> [ 'avant Jésus-Christ', 'après Jésus-Christ' ]
   * @return {Array}
   */
  static eras(length = "short", { locale = null } = {}) {
    return Locale.create(locale, null, "gregory").eras(length);
  }
  /**
   * Return the set of available features in this environment.
   * Some features of Luxon are not available in all environments. For example, on older browsers, relative time formatting support is not available. Use this function to figure out if that's the case.
   * Keys:
   * * `relative`: whether this environment supports relative time formatting
   * * `localeWeek`: whether this environment supports different weekdays for the start of the week based on the locale
   * @example Info.features() //=> { relative: false, localeWeek: true }
   * @return {Object}
   */
  static features() {
    return { relative: hasRelative(), localeWeek: hasLocaleWeekInfo() };
  }
};

// node_modules/luxon/src/impl/diff.js
function dayDiff(earlier, later) {
  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf("day").valueOf(), ms = utcDayStart(later) - utcDayStart(earlier);
  return Math.floor(Duration.fromMillis(ms).as("days"));
}
function highOrderDiffs(cursor, later, units) {
  const differs = [
    ["years", (a, b) => b.year - a.year],
    ["quarters", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],
    ["months", (a, b) => b.month - a.month + (b.year - a.year) * 12],
    [
      "weeks",
      (a, b) => {
        const days = dayDiff(a, b);
        return (days - days % 7) / 7;
      }
    ],
    ["days", dayDiff]
  ];
  const results = {};
  const earlier = cursor;
  let lowestOrder, highWater;
  for (const [unit, differ] of differs) {
    if (units.indexOf(unit) >= 0) {
      lowestOrder = unit;
      results[unit] = differ(cursor, later);
      highWater = earlier.plus(results);
      if (highWater > later) {
        results[unit]--;
        cursor = earlier.plus(results);
        if (cursor > later) {
          highWater = cursor;
          results[unit]--;
          cursor = earlier.plus(results);
        }
      } else {
        cursor = highWater;
      }
    }
  }
  return [cursor, results, highWater, lowestOrder];
}
function diff_default(earlier, later, units, opts) {
  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);
  const remainingMillis = later - cursor;
  const lowerOrderUnits = units.filter(
    (u) => ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0
  );
  if (lowerOrderUnits.length === 0) {
    if (highWater < later) {
      highWater = cursor.plus({ [lowestOrder]: 1 });
    }
    if (highWater !== cursor) {
      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
    }
  }
  const duration = Duration.fromObject(results, opts);
  if (lowerOrderUnits.length > 0) {
    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);
  } else {
    return duration;
  }
}

// node_modules/luxon/src/impl/digits.js
var numberingSystems = {
  arab: "[\u0660-\u0669]",
  arabext: "[\u06F0-\u06F9]",
  bali: "[\u1B50-\u1B59]",
  beng: "[\u09E6-\u09EF]",
  deva: "[\u0966-\u096F]",
  fullwide: "[\uFF10-\uFF19]",
  gujr: "[\u0AE6-\u0AEF]",
  hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
  khmr: "[\u17E0-\u17E9]",
  knda: "[\u0CE6-\u0CEF]",
  laoo: "[\u0ED0-\u0ED9]",
  limb: "[\u1946-\u194F]",
  mlym: "[\u0D66-\u0D6F]",
  mong: "[\u1810-\u1819]",
  mymr: "[\u1040-\u1049]",
  orya: "[\u0B66-\u0B6F]",
  tamldec: "[\u0BE6-\u0BEF]",
  telu: "[\u0C66-\u0C6F]",
  thai: "[\u0E50-\u0E59]",
  tibt: "[\u0F20-\u0F29]",
  latn: "\\d"
};
var numberingSystemsUTF16 = {
  arab: [1632, 1641],
  arabext: [1776, 1785],
  bali: [6992, 7001],
  beng: [2534, 2543],
  deva: [2406, 2415],
  fullwide: [65296, 65303],
  gujr: [2790, 2799],
  khmr: [6112, 6121],
  knda: [3302, 3311],
  laoo: [3792, 3801],
  limb: [6470, 6479],
  mlym: [3430, 3439],
  mong: [6160, 6169],
  mymr: [4160, 4169],
  orya: [2918, 2927],
  tamldec: [3046, 3055],
  telu: [3174, 3183],
  thai: [3664, 3673],
  tibt: [3872, 3881]
};
var hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
function parseDigits(str) {
  let value = parseInt(str, 10);
  if (isNaN(value)) {
    value = "";
    for (let i = 0; i < str.length; i++) {
      const code = str.charCodeAt(i);
      if (str[i].search(numberingSystems.hanidec) !== -1) {
        value += hanidecChars.indexOf(str[i]);
      } else {
        for (const key in numberingSystemsUTF16) {
          const [min, max] = numberingSystemsUTF16[key];
          if (code >= min && code <= max) {
            value += code - min;
          }
        }
      }
    }
    return parseInt(value, 10);
  } else {
    return value;
  }
}
function digitRegex({ numberingSystem }, append = "") {
  return new RegExp(`${numberingSystems[numberingSystem || "latn"]}${append}`);
}

// node_modules/luxon/src/impl/tokenParser.js
var MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
function intUnit(regex, post = (i) => i) {
  return { regex, deser: ([s2]) => post(parseDigits(s2)) };
}
var NBSP = String.fromCharCode(160);
var spaceOrNBSP = `[ ${NBSP}]`;
var spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
function fixListRegex(s2) {
  return s2.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
}
function stripInsensitivities(s2) {
  return s2.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
}
function oneOf(strings, startIndex) {
  if (strings === null) {
    return null;
  } else {
    return {
      regex: RegExp(strings.map(fixListRegex).join("|")),
      deser: ([s2]) => strings.findIndex((i) => stripInsensitivities(s2) === stripInsensitivities(i)) + startIndex
    };
  }
}
function offset(regex, groups) {
  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };
}
function simple(regex) {
  return { regex, deser: ([s2]) => s2 };
}
function escapeToken(value) {
  return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}
function unitForToken(token, loc) {
  const one = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s2]) => s2, literal: true }), unitate = (t) => {
    if (token.literal) {
      return literal(t);
    }
    switch (t.val) {
      case "G":
        return oneOf(loc.eras("short"), 0);
      case "GG":
        return oneOf(loc.eras("long"), 0);
      case "y":
        return intUnit(oneToSix);
      case "yy":
        return intUnit(twoToFour, untruncateYear);
      case "yyyy":
        return intUnit(four);
      case "yyyyy":
        return intUnit(fourToSix);
      case "yyyyyy":
        return intUnit(six);
      case "M":
        return intUnit(oneOrTwo);
      case "MM":
        return intUnit(two);
      case "MMM":
        return oneOf(loc.months("short", true), 1);
      case "MMMM":
        return oneOf(loc.months("long", true), 1);
      case "L":
        return intUnit(oneOrTwo);
      case "LL":
        return intUnit(two);
      case "LLL":
        return oneOf(loc.months("short", false), 1);
      case "LLLL":
        return oneOf(loc.months("long", false), 1);
      case "d":
        return intUnit(oneOrTwo);
      case "dd":
        return intUnit(two);
      case "o":
        return intUnit(oneToThree);
      case "ooo":
        return intUnit(three);
      case "HH":
        return intUnit(two);
      case "H":
        return intUnit(oneOrTwo);
      case "hh":
        return intUnit(two);
      case "h":
        return intUnit(oneOrTwo);
      case "mm":
        return intUnit(two);
      case "m":
        return intUnit(oneOrTwo);
      case "q":
        return intUnit(oneOrTwo);
      case "qq":
        return intUnit(two);
      case "s":
        return intUnit(oneOrTwo);
      case "ss":
        return intUnit(two);
      case "S":
        return intUnit(oneToThree);
      case "SSS":
        return intUnit(three);
      case "u":
        return simple(oneToNine);
      case "uu":
        return simple(oneOrTwo);
      case "uuu":
        return intUnit(one);
      case "a":
        return oneOf(loc.meridiems(), 0);
      case "kkkk":
        return intUnit(four);
      case "kk":
        return intUnit(twoToFour, untruncateYear);
      case "W":
        return intUnit(oneOrTwo);
      case "WW":
        return intUnit(two);
      case "E":
      case "c":
        return intUnit(one);
      case "EEE":
        return oneOf(loc.weekdays("short", false), 1);
      case "EEEE":
        return oneOf(loc.weekdays("long", false), 1);
      case "ccc":
        return oneOf(loc.weekdays("short", true), 1);
      case "cccc":
        return oneOf(loc.weekdays("long", true), 1);
      case "Z":
      case "ZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);
      case "ZZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);
      case "z":
        return simple(/[a-z_+-/]{1,256}?/i);
      case " ":
        return simple(/[^\S\n\r]/);
      default:
        return literal(t);
    }
  };
  const unit = unitate(token) || {
    invalidReason: MISSING_FTP
  };
  unit.token = token;
  return unit;
}
var partTypeStyleToTokenVal = {
  year: {
    "2-digit": "yy",
    numeric: "yyyyy"
  },
  month: {
    numeric: "M",
    "2-digit": "MM",
    short: "MMM",
    long: "MMMM"
  },
  day: {
    numeric: "d",
    "2-digit": "dd"
  },
  weekday: {
    short: "EEE",
    long: "EEEE"
  },
  dayperiod: "a",
  dayPeriod: "a",
  hour12: {
    numeric: "h",
    "2-digit": "hh"
  },
  hour24: {
    numeric: "H",
    "2-digit": "HH"
  },
  minute: {
    numeric: "m",
    "2-digit": "mm"
  },
  second: {
    numeric: "s",
    "2-digit": "ss"
  },
  timeZoneName: {
    long: "ZZZZZ",
    short: "ZZZ"
  }
};
function tokenForPart(part, formatOpts, resolvedOpts) {
  const { type: type2, value } = part;
  if (type2 === "literal") {
    const isSpace = /^\s+$/.test(value);
    return {
      literal: !isSpace,
      val: isSpace ? " " : value
    };
  }
  const style = formatOpts[type2];
  let actualType = type2;
  if (type2 === "hour") {
    if (formatOpts.hour12 != null) {
      actualType = formatOpts.hour12 ? "hour12" : "hour24";
    } else if (formatOpts.hourCycle != null) {
      if (formatOpts.hourCycle === "h11" || formatOpts.hourCycle === "h12") {
        actualType = "hour12";
      } else {
        actualType = "hour24";
      }
    } else {
      actualType = resolvedOpts.hour12 ? "hour12" : "hour24";
    }
  }
  let val = partTypeStyleToTokenVal[actualType];
  if (typeof val === "object") {
    val = val[style];
  }
  if (val) {
    return {
      literal: false,
      val
    };
  }
  return void 0;
}
function buildRegex(units) {
  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, "");
  return [`^${re}$`, units];
}
function match(input, regex, handlers) {
  const matches = input.match(regex);
  if (matches) {
    const all = {};
    let matchIndex = 1;
    for (const i in handlers) {
      if (hasOwnProperty(handlers, i)) {
        const h = handlers[i], groups = h.groups ? h.groups + 1 : 1;
        if (!h.literal && h.token) {
          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));
        }
        matchIndex += groups;
      }
    }
    return [matches, all];
  } else {
    return [matches, {}];
  }
}
function dateTimeFromMatches(matches) {
  const toField = (token) => {
    switch (token) {
      case "S":
        return "millisecond";
      case "s":
        return "second";
      case "m":
        return "minute";
      case "h":
      case "H":
        return "hour";
      case "d":
        return "day";
      case "o":
        return "ordinal";
      case "L":
      case "M":
        return "month";
      case "y":
        return "year";
      case "E":
      case "c":
        return "weekday";
      case "W":
        return "weekNumber";
      case "k":
        return "weekYear";
      case "q":
        return "quarter";
      default:
        return null;
    }
  };
  let zone = null;
  let specificOffset;
  if (!isUndefined(matches.z)) {
    zone = IANAZone.create(matches.z);
  }
  if (!isUndefined(matches.Z)) {
    if (!zone) {
      zone = new FixedOffsetZone(matches.Z);
    }
    specificOffset = matches.Z;
  }
  if (!isUndefined(matches.q)) {
    matches.M = (matches.q - 1) * 3 + 1;
  }
  if (!isUndefined(matches.h)) {
    if (matches.h < 12 && matches.a === 1) {
      matches.h += 12;
    } else if (matches.h === 12 && matches.a === 0) {
      matches.h = 0;
    }
  }
  if (matches.G === 0 && matches.y) {
    matches.y = -matches.y;
  }
  if (!isUndefined(matches.u)) {
    matches.S = parseMillis(matches.u);
  }
  const vals = Object.keys(matches).reduce((r, k) => {
    const f = toField(k);
    if (f) {
      r[f] = matches[k];
    }
    return r;
  }, {});
  return [vals, zone, specificOffset];
}
var dummyDateTimeCache = null;
function getDummyDateTime() {
  if (!dummyDateTimeCache) {
    dummyDateTimeCache = DateTime.fromMillis(1555555555555);
  }
  return dummyDateTimeCache;
}
function maybeExpandMacroToken(token, locale) {
  if (token.literal) {
    return token;
  }
  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);
  const tokens = formatOptsToTokens(formatOpts, locale);
  if (tokens == null || tokens.includes(void 0)) {
    return token;
  }
  return tokens;
}
function expandMacroTokens(tokens, locale) {
  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));
}
function explainFromTokens(locale, input, format) {
  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale), units = tokens.map((t) => unitForToken(t, locale)), disqualifyingUnit = units.find((t) => t.invalidReason);
  if (disqualifyingUnit) {
    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };
  } else {
    const [regexString, handlers] = buildRegex(units), regex = RegExp(regexString, "i"), [rawMatches, matches] = match(input, regex, handlers), [result, zone, specificOffset] = matches ? dateTimeFromMatches(matches) : [null, null, void 0];
    if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
      throw new ConflictingSpecificationError(
        "Can't include meridiem when specifying 24-hour format"
      );
    }
    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };
  }
}
function parseFromTokens(locale, input, format) {
  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);
  return [result, zone, specificOffset, invalidReason];
}
function formatOptsToTokens(formatOpts, locale) {
  if (!formatOpts) {
    return null;
  }
  const formatter = Formatter.create(locale, formatOpts);
  const df = formatter.dtFormatter(getDummyDateTime());
  const parts = df.formatToParts();
  const resolvedOpts = df.resolvedOptions();
  return parts.map((p) => tokenForPart(p, formatOpts, resolvedOpts));
}

// node_modules/luxon/src/datetime.js
var INVALID3 = "Invalid DateTime";
var MAX_DATE = 864e13;
function unsupportedZone(zone) {
  return new Invalid("unsupported zone", `the zone "${zone.name}" is not supported`);
}
function possiblyCachedWeekData(dt) {
  if (dt.weekData === null) {
    dt.weekData = gregorianToWeek(dt.c);
  }
  return dt.weekData;
}
function possiblyCachedLocalWeekData(dt) {
  if (dt.localWeekData === null) {
    dt.localWeekData = gregorianToWeek(
      dt.c,
      dt.loc.getMinDaysInFirstWeek(),
      dt.loc.getStartOfWeek()
    );
  }
  return dt.localWeekData;
}
function clone2(inst, alts) {
  const current = {
    ts: inst.ts,
    zone: inst.zone,
    c: inst.c,
    o: inst.o,
    loc: inst.loc,
    invalid: inst.invalid
  };
  return new DateTime({ ...current, ...alts, old: current });
}
function fixOffset(localTS, o, tz) {
  let utcGuess = localTS - o * 60 * 1e3;
  const o2 = tz.offset(utcGuess);
  if (o === o2) {
    return [utcGuess, o];
  }
  utcGuess -= (o2 - o) * 60 * 1e3;
  const o3 = tz.offset(utcGuess);
  if (o2 === o3) {
    return [utcGuess, o2];
  }
  return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
}
function tsToObj(ts, offset2) {
  ts += offset2 * 60 * 1e3;
  const d = new Date(ts);
  return {
    year: d.getUTCFullYear(),
    month: d.getUTCMonth() + 1,
    day: d.getUTCDate(),
    hour: d.getUTCHours(),
    minute: d.getUTCMinutes(),
    second: d.getUTCSeconds(),
    millisecond: d.getUTCMilliseconds()
  };
}
function objToTS(obj, offset2, zone) {
  return fixOffset(objToLocalTS(obj), offset2, zone);
}
function adjustTime(inst, dur) {
  const oPre = inst.o, year = inst.c.year + Math.trunc(dur.years), month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c = {
    ...inst.c,
    year,
    month,
    day: Math.min(inst.c.day, daysInMonth(year, month)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
  }, millisToAdd = Duration.fromObject({
    years: dur.years - Math.trunc(dur.years),
    quarters: dur.quarters - Math.trunc(dur.quarters),
    months: dur.months - Math.trunc(dur.months),
    weeks: dur.weeks - Math.trunc(dur.weeks),
    days: dur.days - Math.trunc(dur.days),
    hours: dur.hours,
    minutes: dur.minutes,
    seconds: dur.seconds,
    milliseconds: dur.milliseconds
  }).as("milliseconds"), localTS = objToLocalTS(c);
  let [ts, o] = fixOffset(localTS, oPre, inst.zone);
  if (millisToAdd !== 0) {
    ts += millisToAdd;
    o = inst.zone.offset(ts);
  }
  return { ts, o };
}
function parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {
  const { setZone, zone } = opts;
  if (parsed && Object.keys(parsed).length !== 0 || parsedZone) {
    const interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, {
      ...opts,
      zone: interpretationZone,
      specificOffset
    });
    return setZone ? inst : inst.setZone(zone);
  } else {
    return DateTime.invalid(
      new Invalid("unparsable", `the input "${text}" can't be parsed as ${format}`)
    );
  }
}
function toTechFormat(dt, format, allowZ = true) {
  return dt.isValid ? Formatter.create(Locale.create("en-US"), {
    allowZ,
    forceSimple: true
  }).formatDateTimeFromString(dt, format) : null;
}
function toISODate(o, extended) {
  const longFormat = o.c.year > 9999 || o.c.year < 0;
  let c = "";
  if (longFormat && o.c.year >= 0)
    c += "+";
  c += padStart(o.c.year, longFormat ? 6 : 4);
  if (extended) {
    c += "-";
    c += padStart(o.c.month);
    c += "-";
    c += padStart(o.c.day);
  } else {
    c += padStart(o.c.month);
    c += padStart(o.c.day);
  }
  return c;
}
function toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
  let c = padStart(o.c.hour);
  if (extended) {
    c += ":";
    c += padStart(o.c.minute);
    if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
      c += ":";
    }
  } else {
    c += padStart(o.c.minute);
  }
  if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
    c += padStart(o.c.second);
    if (o.c.millisecond !== 0 || !suppressMilliseconds) {
      c += ".";
      c += padStart(o.c.millisecond, 3);
    }
  }
  if (includeOffset) {
    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
      c += "Z";
    } else if (o.o < 0) {
      c += "-";
      c += padStart(Math.trunc(-o.o / 60));
      c += ":";
      c += padStart(Math.trunc(-o.o % 60));
    } else {
      c += "+";
      c += padStart(Math.trunc(o.o / 60));
      c += ":";
      c += padStart(Math.trunc(o.o % 60));
    }
  }
  if (extendedZone) {
    c += "[" + o.zone.ianaName + "]";
  }
  return c;
}
var defaultUnitValues = {
  month: 1,
  day: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var defaultWeekUnitValues = {
  weekNumber: 1,
  weekday: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var defaultOrdinalUnitValues = {
  ordinal: 1,
  hour: 0,
  minute: 0,
  second: 0,
  millisecond: 0
};
var orderedUnits2 = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
var orderedWeekUnits = [
  "weekYear",
  "weekNumber",
  "weekday",
  "hour",
  "minute",
  "second",
  "millisecond"
];
var orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
function normalizeUnit(unit) {
  const normalized = {
    year: "year",
    years: "year",
    month: "month",
    months: "month",
    day: "day",
    days: "day",
    hour: "hour",
    hours: "hour",
    minute: "minute",
    minutes: "minute",
    quarter: "quarter",
    quarters: "quarter",
    second: "second",
    seconds: "second",
    millisecond: "millisecond",
    milliseconds: "millisecond",
    weekday: "weekday",
    weekdays: "weekday",
    weeknumber: "weekNumber",
    weeksnumber: "weekNumber",
    weeknumbers: "weekNumber",
    weekyear: "weekYear",
    weekyears: "weekYear",
    ordinal: "ordinal"
  }[unit.toLowerCase()];
  if (!normalized)
    throw new InvalidUnitError(unit);
  return normalized;
}
function normalizeUnitWithLocalWeeks(unit) {
  switch (unit.toLowerCase()) {
    case "localweekday":
    case "localweekdays":
      return "localWeekday";
    case "localweeknumber":
    case "localweeknumbers":
      return "localWeekNumber";
    case "localweekyear":
    case "localweekyears":
      return "localWeekYear";
    default:
      return normalizeUnit(unit);
  }
}
function quickDT(obj, opts) {
  const zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
  let ts, o;
  if (!isUndefined(obj.year)) {
    for (const u of orderedUnits2) {
      if (isUndefined(obj[u])) {
        obj[u] = defaultUnitValues[u];
      }
    }
    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const offsetProvis = zone.offset(tsNow);
    [ts, o] = objToTS(obj, offsetProvis, zone);
  } else {
    ts = tsNow;
  }
  return new DateTime({ ts, zone, loc, o });
}
function diffRelative(start, end, opts) {
  const round = isUndefined(opts.round) ? true : opts.round, format = (c, unit) => {
    c = roundTo(c, round || opts.calendary ? 0 : 2, true);
    const formatter = end.loc.clone(opts).relFormatter(opts);
    return formatter.format(c, unit);
  }, differ = (unit) => {
    if (opts.calendary) {
      if (!end.hasSame(start, unit)) {
        return end.startOf(unit).diff(start.startOf(unit), unit).get(unit);
      } else
        return 0;
    } else {
      return end.diff(start, unit).get(unit);
    }
  };
  if (opts.unit) {
    return format(differ(opts.unit), opts.unit);
  }
  for (const unit of opts.units) {
    const count = differ(unit);
    if (Math.abs(count) >= 1) {
      return format(count, unit);
    }
  }
  return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);
}
function lastOpts(argList) {
  let opts = {}, args;
  if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
    opts = argList[argList.length - 1];
    args = Array.from(argList).slice(0, argList.length - 1);
  } else {
    args = Array.from(argList);
  }
  return [opts, args];
}
var DateTime = class _DateTime {
  /**
   * @access private
   */
  constructor(config) {
    const zone = config.zone || Settings.defaultZone;
    let invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
    this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
    let c = null, o = null;
    if (!invalid) {
      const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
      if (unchanged) {
        [c, o] = [config.old.c, config.old.o];
      } else {
        const ot = zone.offset(this.ts);
        c = tsToObj(this.ts, ot);
        invalid = Number.isNaN(c.year) ? new Invalid("invalid input") : null;
        c = invalid ? null : c;
        o = invalid ? null : ot;
      }
    }
    this._zone = zone;
    this.loc = config.loc || Locale.create();
    this.invalid = invalid;
    this.weekData = null;
    this.localWeekData = null;
    this.c = c;
    this.o = o;
    this.isLuxonDateTime = true;
  }
  // CONSTRUCT
  /**
   * Create a DateTime for the current instant, in the system's time zone.
   *
   * Use Settings to override these default values if needed.
   * @example DateTime.now().toISO() //~> now in the ISO format
   * @return {DateTime}
   */
  static now() {
    return new _DateTime({});
  }
  /**
   * Create a local DateTime
   * @param {number} [year] - The calendar year. If omitted (as in, call `local()` with no arguments), the current time will be used
   * @param {number} [month=1] - The month, 1-indexed
   * @param {number} [day=1] - The day of the month, 1-indexed
   * @param {number} [hour=0] - The hour of the day, in 24-hour time
   * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
   * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
   * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
   * @example DateTime.local()                                  //~> now
   * @example DateTime.local({ zone: "America/New_York" })      //~> now, in US east coast time
   * @example DateTime.local(2017)                              //~> 2017-01-01T00:00:00
   * @example DateTime.local(2017, 3)                           //~> 2017-03-01T00:00:00
   * @example DateTime.local(2017, 3, 12, { locale: "fr" })     //~> 2017-03-12T00:00:00, with a French locale
   * @example DateTime.local(2017, 3, 12, 5)                    //~> 2017-03-12T05:00:00
   * @example DateTime.local(2017, 3, 12, 5, { zone: "utc" })   //~> 2017-03-12T05:00:00, in UTC
   * @example DateTime.local(2017, 3, 12, 5, 45)                //~> 2017-03-12T05:45:00
   * @example DateTime.local(2017, 3, 12, 5, 45, 10)            //~> 2017-03-12T05:45:10
   * @example DateTime.local(2017, 3, 12, 5, 45, 10, 765)       //~> 2017-03-12T05:45:10.765
   * @return {DateTime}
   */
  static local() {
    const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
    return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
  }
  /**
   * Create a DateTime in UTC
   * @param {number} [year] - The calendar year. If omitted (as in, call `utc()` with no arguments), the current time will be used
   * @param {number} [month=1] - The month, 1-indexed
   * @param {number} [day=1] - The day of the month
   * @param {number} [hour=0] - The hour of the day, in 24-hour time
   * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
   * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
   * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
   * @param {Object} options - configuration options for the DateTime
   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
   * @param {string} [options.outputCalendar] - the output calendar to set on the resulting DateTime instance
   * @param {string} [options.numberingSystem] - the numbering system to set on the resulting DateTime instance
   * @example DateTime.utc()                                              //~> now
   * @example DateTime.utc(2017)                                          //~> 2017-01-01T00:00:00Z
   * @example DateTime.utc(2017, 3)                                       //~> 2017-03-01T00:00:00Z
   * @example DateTime.utc(2017, 3, 12)                                   //~> 2017-03-12T00:00:00Z
   * @example DateTime.utc(2017, 3, 12, 5)                                //~> 2017-03-12T05:00:00Z
   * @example DateTime.utc(2017, 3, 12, 5, 45)                            //~> 2017-03-12T05:45:00Z
   * @example DateTime.utc(2017, 3, 12, 5, 45, { locale: "fr" })          //~> 2017-03-12T05:45:00Z with a French locale
   * @example DateTime.utc(2017, 3, 12, 5, 45, 10)                        //~> 2017-03-12T05:45:10Z
   * @example DateTime.utc(2017, 3, 12, 5, 45, 10, 765, { locale: "fr" }) //~> 2017-03-12T05:45:10.765Z with a French locale
   * @return {DateTime}
   */
  static utc() {
    const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
    opts.zone = FixedOffsetZone.utcInstance;
    return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
  }
  /**
   * Create a DateTime from a JavaScript Date object. Uses the default zone.
   * @param {Date} date - a JavaScript Date object
   * @param {Object} options - configuration options for the DateTime
   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
   * @return {DateTime}
   */
  static fromJSDate(date, options = {}) {
    const ts = isDate(date) ? date.valueOf() : NaN;
    if (Number.isNaN(ts)) {
      return _DateTime.invalid("invalid input");
    }
    const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
    if (!zoneToUse.isValid) {
      return _DateTime.invalid(unsupportedZone(zoneToUse));
    }
    return new _DateTime({
      ts,
      zone: zoneToUse,
      loc: Locale.fromObject(options)
    });
  }
  /**
   * Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
   * @param {number} milliseconds - a number of milliseconds since 1970 UTC
   * @param {Object} options - configuration options for the DateTime
   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
   * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
   * @return {DateTime}
   */
  static fromMillis(milliseconds, options = {}) {
    if (!isNumber(milliseconds)) {
      throw new InvalidArgumentError(
        `fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`
      );
    } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {
      return _DateTime.invalid("Timestamp out of range");
    } else {
      return new _DateTime({
        ts: milliseconds,
        zone: normalizeZone(options.zone, Settings.defaultZone),
        loc: Locale.fromObject(options)
      });
    }
  }
  /**
   * Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
   * @param {number} seconds - a number of seconds since 1970 UTC
   * @param {Object} options - configuration options for the DateTime
   * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
   * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
   * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
   * @return {DateTime}
   */
  static fromSeconds(seconds, options = {}) {
    if (!isNumber(seconds)) {
      throw new InvalidArgumentError("fromSeconds requires a numerical input");
    } else {
      return new _DateTime({
        ts: seconds * 1e3,
        zone: normalizeZone(options.zone, Settings.defaultZone),
        loc: Locale.fromObject(options)
      });
    }
  }
  /**
   * Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults.
   * @param {Object} obj - the object to create the DateTime from
   * @param {number} obj.year - a year, such as 1987
   * @param {number} obj.month - a month, 1-12
   * @param {number} obj.day - a day of the month, 1-31, depending on the month
   * @param {number} obj.ordinal - day of the year, 1-365 or 366
   * @param {number} obj.weekYear - an ISO week year
   * @param {number} obj.weekNumber - an ISO week number, between 1 and 52 or 53, depending on the year
   * @param {number} obj.weekday - an ISO weekday, 1-7, where 1 is Monday and 7 is Sunday
   * @param {number} obj.localWeekYear - a week year, according to the locale
   * @param {number} obj.localWeekNumber - a week number, between 1 and 52 or 53, depending on the year, according to the locale
   * @param {number} obj.localWeekday - a weekday, 1-7, where 1 is the first and 7 is the last day of the week, according to the locale
   * @param {number} obj.hour - hour of the day, 0-23
   * @param {number} obj.minute - minute of the hour, 0-59
   * @param {number} obj.second - second of the minute, 0-59
   * @param {number} obj.millisecond - millisecond of the second, 0-999
   * @param {Object} opts - options for creating this DateTime
   * @param {string|Zone} [opts.zone='local'] - interpret the numbers in the context of a particular zone. Can take any value taken as the first argument to setZone()
   * @param {string} [opts.locale='system\'s locale'] - a locale to set on the resulting DateTime instance
   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
   * @example DateTime.fromObject({ year: 1982, month: 5, day: 25}).toISODate() //=> '1982-05-25'
   * @example DateTime.fromObject({ year: 1982 }).toISODate() //=> '1982-01-01'
   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }) //~> today at 10:26:06
   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'utc' }),
   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'local' })
   * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'America/New_York' })
   * @example DateTime.fromObject({ weekYear: 2016, weekNumber: 2, weekday: 3 }).toISODate() //=> '2016-01-13'
   * @example DateTime.fromObject({ localWeekYear: 2022, localWeekNumber: 1, localWeekday: 1 }, { locale: "en-US" }).toISODate() //=> '2021-12-26'
   * @return {DateTime}
   */
  static fromObject(obj, opts = {}) {
    obj = obj || {};
    const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
    if (!zoneToUse.isValid) {
      return _DateTime.invalid(unsupportedZone(zoneToUse));
    }
    const loc = Locale.fromObject(opts);
    const normalized = normalizeObject(obj, normalizeUnitWithLocalWeeks);
    const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, loc);
    const tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
    if ((containsGregor || containsOrdinal) && definiteWeekDef) {
      throw new ConflictingSpecificationError(
        "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
      );
    }
    if (containsGregorMD && containsOrdinal) {
      throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
    }
    const useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
    let units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
    if (useWeekData) {
      units = orderedWeekUnits;
      defaultValues = defaultWeekUnitValues;
      objNow = gregorianToWeek(objNow, minDaysInFirstWeek, startOfWeek);
    } else if (containsOrdinal) {
      units = orderedOrdinalUnits;
      defaultValues = defaultOrdinalUnitValues;
      objNow = gregorianToOrdinal(objNow);
    } else {
      units = orderedUnits2;
      defaultValues = defaultUnitValues;
    }
    let foundFirst = false;
    for (const u of units) {
      const v = normalized[u];
      if (!isUndefined(v)) {
        foundFirst = true;
      } else if (foundFirst) {
        normalized[u] = defaultValues[u];
      } else {
        normalized[u] = objNow[u];
      }
    }
    const higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
    if (invalid) {
      return _DateTime.invalid(invalid);
    }
    const gregorian = useWeekData ? weekToGregorian(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse), inst = new _DateTime({
      ts: tsFinal,
      zone: zoneToUse,
      o: offsetFinal,
      loc
    });
    if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
      return _DateTime.invalid(
        "mismatched weekday",
        `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`
      );
    }
    return inst;
  }
  /**
   * Create a DateTime from an ISO 8601 string
   * @param {string} text - the ISO string
   * @param {Object} opts - options to affect the creation
   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the time to this zone
   * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
   * @param {string} [opts.outputCalendar] - the output calendar to set on the resulting DateTime instance
   * @param {string} [opts.numberingSystem] - the numbering system to set on the resulting DateTime instance
   * @example DateTime.fromISO('2016-05-25T09:08:34.123')
   * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00')
   * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00', {setZone: true})
   * @example DateTime.fromISO('2016-05-25T09:08:34.123', {zone: 'utc'})
   * @example DateTime.fromISO('2016-W05-4')
   * @return {DateTime}
   */
  static fromISO(text, opts = {}) {
    const [vals, parsedZone] = parseISODate(text);
    return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
  }
  /**
   * Create a DateTime from an RFC 2822 string
   * @param {string} text - the RFC 2822 string
   * @param {Object} opts - options to affect the creation
   * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since the offset is always specified in the string itself, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
   * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
   * @example DateTime.fromRFC2822('25 Nov 2016 13:23:12 GMT')
   * @example DateTime.fromRFC2822('Fri, 25 Nov 2016 13:23:12 +0600')
   * @example DateTime.fromRFC2822('25 Nov 2016 13:23 Z')
   * @return {DateTime}
   */
  static fromRFC2822(text, opts = {}) {
    const [vals, parsedZone] = parseRFC2822Date(text);
    return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
  }
  /**
   * Create a DateTime from an HTTP header date
   * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
   * @param {string} text - the HTTP header date
   * @param {Object} opts - options to affect the creation
   * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since HTTP dates are always in UTC, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
   * @param {boolean} [opts.setZone=false] - override the zone with the fixed-offset zone specified in the string. For HTTP dates, this is always UTC, so this option is equivalent to setting the `zone` option to 'utc', but this option is included for consistency with similar methods.
   * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
   * @example DateTime.fromHTTP('Sun, 06 Nov 1994 08:49:37 GMT')
   * @example DateTime.fromHTTP('Sunday, 06-Nov-94 08:49:37 GMT')
   * @example DateTime.fromHTTP('Sun Nov  6 08:49:37 1994')
   * @return {DateTime}
   */
  static fromHTTP(text, opts = {}) {
    const [vals, parsedZone] = parseHTTPDate(text);
    return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
  }
  /**
   * Create a DateTime from an input string and format string.
   * Defaults to en-US if no locale has been specified, regardless of the system's locale. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/parsing?id=table-of-tokens).
   * @param {string} text - the string to parse
   * @param {string} fmt - the format the string is expected to be in (see the link below for the formats)
   * @param {Object} opts - options to affect the creation
   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
   * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
   * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
   * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @return {DateTime}
   */
  static fromFormat(text, fmt, opts = {}) {
    if (isUndefined(text) || isUndefined(fmt)) {
      throw new InvalidArgumentError("fromFormat requires an input string and a format");
    }
    const { locale = null, numberingSystem = null } = opts, localeToUse = Locale.fromOpts({
      locale,
      numberingSystem,
      defaultToEN: true
    }), [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);
    if (invalid) {
      return _DateTime.invalid(invalid);
    } else {
      return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);
    }
  }
  /**
   * @deprecated use fromFormat instead
   */
  static fromString(text, fmt, opts = {}) {
    return _DateTime.fromFormat(text, fmt, opts);
  }
  /**
   * Create a DateTime from a SQL date, time, or datetime
   * Defaults to en-US if no locale has been specified, regardless of the system's locale
   * @param {string} text - the string to parse
   * @param {Object} opts - options to affect the creation
   * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
   * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
   * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
   * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
   * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
   * @example DateTime.fromSQL('2017-05-15')
   * @example DateTime.fromSQL('2017-05-15 09:12:34')
   * @example DateTime.fromSQL('2017-05-15 09:12:34.342')
   * @example DateTime.fromSQL('2017-05-15 09:12:34.342+06:00')
   * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles')
   * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles', { setZone: true })
   * @example DateTime.fromSQL('2017-05-15 09:12:34.342', { zone: 'America/Los_Angeles' })
   * @example DateTime.fromSQL('09:12:34.342')
   * @return {DateTime}
   */
  static fromSQL(text, opts = {}) {
    const [vals, parsedZone] = parseSQL(text);
    return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
  }
  /**
   * Create an invalid DateTime.
   * @param {string} reason - simple string of why this DateTime is invalid. Should not contain parameters or anything else data-dependent.
   * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
   * @return {DateTime}
   */
  static invalid(reason, explanation = null) {
    if (!reason) {
      throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
    }
    const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
    if (Settings.throwOnInvalid) {
      throw new InvalidDateTimeError(invalid);
    } else {
      return new _DateTime({ invalid });
    }
  }
  /**
   * Check if an object is an instance of DateTime. Works across context boundaries
   * @param {object} o
   * @return {boolean}
   */
  static isDateTime(o) {
    return o && o.isLuxonDateTime || false;
  }
  /**
   * Produce the format string for a set of options
   * @param formatOpts
   * @param localeOpts
   * @returns {string}
   */
  static parseFormatForOpts(formatOpts, localeOpts = {}) {
    const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));
    return !tokenList ? null : tokenList.map((t) => t ? t.val : null).join("");
  }
  /**
   * Produce the the fully expanded format token for the locale
   * Does NOT quote characters, so quoted tokens will not round trip correctly
   * @param fmt
   * @param localeOpts
   * @returns {string}
   */
  static expandFormat(fmt, localeOpts = {}) {
    const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));
    return expanded.map((t) => t.val).join("");
  }
  // INFO
  /**
   * Get the value of unit.
   * @param {string} unit - a unit such as 'minute' or 'day'
   * @example DateTime.local(2017, 7, 4).get('month'); //=> 7
   * @example DateTime.local(2017, 7, 4).get('day'); //=> 4
   * @return {number}
   */
  get(unit) {
    return this[unit];
  }
  /**
   * Returns whether the DateTime is valid. Invalid DateTimes occur when:
   * * The DateTime was created from invalid calendar information, such as the 13th month or February 30
   * * The DateTime was created by an operation on another invalid date
   * @type {boolean}
   */
  get isValid() {
    return this.invalid === null;
  }
  /**
   * Returns an error code if this DateTime is invalid, or null if the DateTime is valid
   * @type {string}
   */
  get invalidReason() {
    return this.invalid ? this.invalid.reason : null;
  }
  /**
   * Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid
   * @type {string}
   */
  get invalidExplanation() {
    return this.invalid ? this.invalid.explanation : null;
  }
  /**
   * Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime
   *
   * @type {string}
   */
  get locale() {
    return this.isValid ? this.loc.locale : null;
  }
  /**
   * Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime
   *
   * @type {string}
   */
  get numberingSystem() {
    return this.isValid ? this.loc.numberingSystem : null;
  }
  /**
   * Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime
   *
   * @type {string}
   */
  get outputCalendar() {
    return this.isValid ? this.loc.outputCalendar : null;
  }
  /**
   * Get the time zone associated with this DateTime.
   * @type {Zone}
   */
  get zone() {
    return this._zone;
  }
  /**
   * Get the name of the time zone.
   * @type {string}
   */
  get zoneName() {
    return this.isValid ? this.zone.name : null;
  }
  /**
   * Get the year
   * @example DateTime.local(2017, 5, 25).year //=> 2017
   * @type {number}
   */
  get year() {
    return this.isValid ? this.c.year : NaN;
  }
  /**
   * Get the quarter
   * @example DateTime.local(2017, 5, 25).quarter //=> 2
   * @type {number}
   */
  get quarter() {
    return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
  }
  /**
   * Get the month (1-12).
   * @example DateTime.local(2017, 5, 25).month //=> 5
   * @type {number}
   */
  get month() {
    return this.isValid ? this.c.month : NaN;
  }
  /**
   * Get the day of the month (1-30ish).
   * @example DateTime.local(2017, 5, 25).day //=> 25
   * @type {number}
   */
  get day() {
    return this.isValid ? this.c.day : NaN;
  }
  /**
   * Get the hour of the day (0-23).
   * @example DateTime.local(2017, 5, 25, 9).hour //=> 9
   * @type {number}
   */
  get hour() {
    return this.isValid ? this.c.hour : NaN;
  }
  /**
   * Get the minute of the hour (0-59).
   * @example DateTime.local(2017, 5, 25, 9, 30).minute //=> 30
   * @type {number}
   */
  get minute() {
    return this.isValid ? this.c.minute : NaN;
  }
  /**
   * Get the second of the minute (0-59).
   * @example DateTime.local(2017, 5, 25, 9, 30, 52).second //=> 52
   * @type {number}
   */
  get second() {
    return this.isValid ? this.c.second : NaN;
  }
  /**
   * Get the millisecond of the second (0-999).
   * @example DateTime.local(2017, 5, 25, 9, 30, 52, 654).millisecond //=> 654
   * @type {number}
   */
  get millisecond() {
    return this.isValid ? this.c.millisecond : NaN;
  }
  /**
   * Get the week year
   * @see https://en.wikipedia.org/wiki/ISO_week_date
   * @example DateTime.local(2014, 12, 31).weekYear //=> 2015
   * @type {number}
   */
  get weekYear() {
    return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
  }
  /**
   * Get the week number of the week year (1-52ish).
   * @see https://en.wikipedia.org/wiki/ISO_week_date
   * @example DateTime.local(2017, 5, 25).weekNumber //=> 21
   * @type {number}
   */
  get weekNumber() {
    return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
  }
  /**
   * Get the day of the week.
   * 1 is Monday and 7 is Sunday
   * @see https://en.wikipedia.org/wiki/ISO_week_date
   * @example DateTime.local(2014, 11, 31).weekday //=> 4
   * @type {number}
   */
  get weekday() {
    return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
  }
  /**
   * Returns true if this date is on a weekend according to the locale, false otherwise
   * @returns {boolean}
   */
  get isWeekend() {
    return this.isValid && this.loc.getWeekendDays().includes(this.weekday);
  }
  /**
   * Get the day of the week according to the locale.
   * 1 is the first day of the week and 7 is the last day of the week.
   * If the locale assigns Sunday as the first day of the week, then a date which is a Sunday will return 1,
   * @returns {number}
   */
  get localWeekday() {
    return this.isValid ? possiblyCachedLocalWeekData(this).weekday : NaN;
  }
  /**
   * Get the week number of the week year according to the locale. Different locales assign week numbers differently,
   * because the week can start on different days of the week (see localWeekday) and because a different number of days
   * is required for a week to count as the first week of a year.
   * @returns {number}
   */
  get localWeekNumber() {
    return this.isValid ? possiblyCachedLocalWeekData(this).weekNumber : NaN;
  }
  /**
   * Get the week year according to the locale. Different locales assign week numbers (and therefor week years)
   * differently, see localWeekNumber.
   * @returns {number}
   */
  get localWeekYear() {
    return this.isValid ? possiblyCachedLocalWeekData(this).weekYear : NaN;
  }
  /**
   * Get the ordinal (meaning the day of the year)
   * @example DateTime.local(2017, 5, 25).ordinal //=> 145
   * @type {number|DateTime}
   */
  get ordinal() {
    return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
  }
  /**
   * Get the human readable short month name, such as 'Oct'.
   * Defaults to the system's locale if no locale has been specified
   * @example DateTime.local(2017, 10, 30).monthShort //=> Oct
   * @type {string}
   */
  get monthShort() {
    return this.isValid ? Info.months("short", { locObj: this.loc })[this.month - 1] : null;
  }
  /**
   * Get the human readable long month name, such as 'October'.
   * Defaults to the system's locale if no locale has been specified
   * @example DateTime.local(2017, 10, 30).monthLong //=> October
   * @type {string}
   */
  get monthLong() {
    return this.isValid ? Info.months("long", { locObj: this.loc })[this.month - 1] : null;
  }
  /**
   * Get the human readable short weekday, such as 'Mon'.
   * Defaults to the system's locale if no locale has been specified
   * @example DateTime.local(2017, 10, 30).weekdayShort //=> Mon
   * @type {string}
   */
  get weekdayShort() {
    return this.isValid ? Info.weekdays("short", { locObj: this.loc })[this.weekday - 1] : null;
  }
  /**
   * Get the human readable long weekday, such as 'Monday'.
   * Defaults to the system's locale if no locale has been specified
   * @example DateTime.local(2017, 10, 30).weekdayLong //=> Monday
   * @type {string}
   */
  get weekdayLong() {
    return this.isValid ? Info.weekdays("long", { locObj: this.loc })[this.weekday - 1] : null;
  }
  /**
   * Get the UTC offset of this DateTime in minutes
   * @example DateTime.now().offset //=> -240
   * @example DateTime.utc().offset //=> 0
   * @type {number}
   */
  get offset() {
    return this.isValid ? +this.o : NaN;
  }
  /**
   * Get the short human name for the zone's current offset, for example "EST" or "EDT".
   * Defaults to the system's locale if no locale has been specified
   * @type {string}
   */
  get offsetNameShort() {
    if (this.isValid) {
      return this.zone.offsetName(this.ts, {
        format: "short",
        locale: this.locale
      });
    } else {
      return null;
    }
  }
  /**
   * Get the long human name for the zone's current offset, for example "Eastern Standard Time" or "Eastern Daylight Time".
   * Defaults to the system's locale if no locale has been specified
   * @type {string}
   */
  get offsetNameLong() {
    if (this.isValid) {
      return this.zone.offsetName(this.ts, {
        format: "long",
        locale: this.locale
      });
    } else {
      return null;
    }
  }
  /**
   * Get whether this zone's offset ever changes, as in a DST.
   * @type {boolean}
   */
  get isOffsetFixed() {
    return this.isValid ? this.zone.isUniversal : null;
  }
  /**
   * Get whether the DateTime is in a DST.
   * @type {boolean}
   */
  get isInDST() {
    if (this.isOffsetFixed) {
      return false;
    } else {
      return this.offset > this.set({ month: 1, day: 1 }).offset || this.offset > this.set({ month: 5 }).offset;
    }
  }
  /**
   * Get those DateTimes which have the same local time as this DateTime, but a different offset from UTC
   * in this DateTime's zone. During DST changes local time can be ambiguous, for example
   * `2023-10-29T02:30:00` in `Europe/Berlin` can have offset `+01:00` or `+02:00`.
   * This method will return both possible DateTimes if this DateTime's local time is ambiguous.
   * @returns {DateTime[]}
   */
  getPossibleOffsets() {
    if (!this.isValid || this.isOffsetFixed) {
      return [this];
    }
    const dayMs = 864e5;
    const minuteMs = 6e4;
    const localTS = objToLocalTS(this.c);
    const oEarlier = this.zone.offset(localTS - dayMs);
    const oLater = this.zone.offset(localTS + dayMs);
    const o1 = this.zone.offset(localTS - oEarlier * minuteMs);
    const o2 = this.zone.offset(localTS - oLater * minuteMs);
    if (o1 === o2) {
      return [this];
    }
    const ts1 = localTS - o1 * minuteMs;
    const ts2 = localTS - o2 * minuteMs;
    const c1 = tsToObj(ts1, o1);
    const c2 = tsToObj(ts2, o2);
    if (c1.hour === c2.hour && c1.minute === c2.minute && c1.second === c2.second && c1.millisecond === c2.millisecond) {
      return [clone2(this, { ts: ts1 }), clone2(this, { ts: ts2 })];
    }
    return [this];
  }
  /**
   * Returns true if this DateTime is in a leap year, false otherwise
   * @example DateTime.local(2016).isInLeapYear //=> true
   * @example DateTime.local(2013).isInLeapYear //=> false
   * @type {boolean}
   */
  get isInLeapYear() {
    return isLeapYear(this.year);
  }
  /**
   * Returns the number of days in this DateTime's month
   * @example DateTime.local(2016, 2).daysInMonth //=> 29
   * @example DateTime.local(2016, 3).daysInMonth //=> 31
   * @type {number}
   */
  get daysInMonth() {
    return daysInMonth(this.year, this.month);
  }
  /**
   * Returns the number of days in this DateTime's year
   * @example DateTime.local(2016).daysInYear //=> 366
   * @example DateTime.local(2013).daysInYear //=> 365
   * @type {number}
   */
  get daysInYear() {
    return this.isValid ? daysInYear(this.year) : NaN;
  }
  /**
   * Returns the number of weeks in this DateTime's year
   * @see https://en.wikipedia.org/wiki/ISO_week_date
   * @example DateTime.local(2004).weeksInWeekYear //=> 53
   * @example DateTime.local(2013).weeksInWeekYear //=> 52
   * @type {number}
   */
  get weeksInWeekYear() {
    return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
  }
  /**
   * Returns the number of weeks in this DateTime's local week year
   * @example DateTime.local(2020, 6, {locale: 'en-US'}).weeksInLocalWeekYear //=> 52
   * @example DateTime.local(2020, 6, {locale: 'de-DE'}).weeksInLocalWeekYear //=> 53
   * @type {number}
   */
  get weeksInLocalWeekYear() {
    return this.isValid ? weeksInWeekYear(
      this.localWeekYear,
      this.loc.getMinDaysInFirstWeek(),
      this.loc.getStartOfWeek()
    ) : NaN;
  }
  /**
   * Returns the resolved Intl options for this DateTime.
   * This is useful in understanding the behavior of formatting methods
   * @param {Object} opts - the same options as toLocaleString
   * @return {Object}
   */
  resolvedLocaleOptions(opts = {}) {
    const { locale, numberingSystem, calendar } = Formatter.create(
      this.loc.clone(opts),
      opts
    ).resolvedOptions(this);
    return { locale, numberingSystem, outputCalendar: calendar };
  }
  // TRANSFORM
  /**
   * "Set" the DateTime's zone to UTC. Returns a newly-constructed DateTime.
   *
   * Equivalent to {@link DateTime#setZone}('utc')
   * @param {number} [offset=0] - optionally, an offset from UTC in minutes
   * @param {Object} [opts={}] - options to pass to `setZone()`
   * @return {DateTime}
   */
  toUTC(offset2 = 0, opts = {}) {
    return this.setZone(FixedOffsetZone.instance(offset2), opts);
  }
  /**
   * "Set" the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.
   *
   * Equivalent to `setZone('local')`
   * @return {DateTime}
   */
  toLocal() {
    return this.setZone(Settings.defaultZone);
  }
  /**
   * "Set" the DateTime's zone to specified zone. Returns a newly-constructed DateTime.
   *
   * By default, the setter keeps the underlying time the same (as in, the same timestamp), but the new instance will report different local times and consider DSTs when making computations, as with {@link DateTime#plus}. You may wish to use {@link DateTime#toLocal} and {@link DateTime#toUTC} which provide simple convenience wrappers for commonly used zones.
   * @param {string|Zone} [zone='local'] - a zone identifier. As a string, that can be any IANA zone supported by the host environment, or a fixed-offset name of the form 'UTC+3', or the strings 'local' or 'utc'. You may also supply an instance of a {@link DateTime#Zone} class.
   * @param {Object} opts - options
   * @param {boolean} [opts.keepLocalTime=false] - If true, adjust the underlying time so that the local time stays the same, but in the target zone. You should rarely need this.
   * @return {DateTime}
   */
  setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {
    zone = normalizeZone(zone, Settings.defaultZone);
    if (zone.equals(this.zone)) {
      return this;
    } else if (!zone.isValid) {
      return _DateTime.invalid(unsupportedZone(zone));
    } else {
      let newTS = this.ts;
      if (keepLocalTime || keepCalendarTime) {
        const offsetGuess = zone.offset(this.ts);
        const asObj = this.toObject();
        [newTS] = objToTS(asObj, offsetGuess, zone);
      }
      return clone2(this, { ts: newTS, zone });
    }
  }
  /**
   * "Set" the locale, numberingSystem, or outputCalendar. Returns a newly-constructed DateTime.
   * @param {Object} properties - the properties to set
   * @example DateTime.local(2017, 5, 25).reconfigure({ locale: 'en-GB' })
   * @return {DateTime}
   */
  reconfigure({ locale, numberingSystem, outputCalendar } = {}) {
    const loc = this.loc.clone({ locale, numberingSystem, outputCalendar });
    return clone2(this, { loc });
  }
  /**
   * "Set" the locale. Returns a newly-constructed DateTime.
   * Just a convenient alias for reconfigure({ locale })
   * @example DateTime.local(2017, 5, 25).setLocale('en-GB')
   * @return {DateTime}
   */
  setLocale(locale) {
    return this.reconfigure({ locale });
  }
  /**
   * "Set" the values of specified units. Returns a newly-constructed DateTime.
   * You can only set units with this method; for "setting" metadata, see {@link DateTime#reconfigure} and {@link DateTime#setZone}.
   *
   * This method also supports setting locale-based week units, i.e. `localWeekday`, `localWeekNumber` and `localWeekYear`.
   * They cannot be mixed with ISO-week units like `weekday`.
   * @param {Object} values - a mapping of units to numbers
   * @example dt.set({ year: 2017 })
   * @example dt.set({ hour: 8, minute: 30 })
   * @example dt.set({ weekday: 5 })
   * @example dt.set({ year: 2005, ordinal: 234 })
   * @return {DateTime}
   */
  set(values) {
    if (!this.isValid)
      return this;
    const normalized = normalizeObject(values, normalizeUnitWithLocalWeeks);
    const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, this.loc);
    const settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
    if ((containsGregor || containsOrdinal) && definiteWeekDef) {
      throw new ConflictingSpecificationError(
        "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
      );
    }
    if (containsGregorMD && containsOrdinal) {
      throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
    }
    let mixed;
    if (settingWeekStuff) {
      mixed = weekToGregorian(
        { ...gregorianToWeek(this.c, minDaysInFirstWeek, startOfWeek), ...normalized },
        minDaysInFirstWeek,
        startOfWeek
      );
    } else if (!isUndefined(normalized.ordinal)) {
      mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });
    } else {
      mixed = { ...this.toObject(), ...normalized };
      if (isUndefined(normalized.day)) {
        mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
      }
    }
    const [ts, o] = objToTS(mixed, this.o, this.zone);
    return clone2(this, { ts, o });
  }
  /**
   * Add a period of time to this DateTime and return the resulting DateTime
   *
   * Adding hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds. Adding days, months, or years shifts the calendar, accounting for DSTs and leap years along the way. Thus, `dt.plus({ hours: 24 })` may result in a different time than `dt.plus({ days: 1 })` if there's a DST shift in between.
   * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
   * @example DateTime.now().plus(123) //~> in 123 milliseconds
   * @example DateTime.now().plus({ minutes: 15 }) //~> in 15 minutes
   * @example DateTime.now().plus({ days: 1 }) //~> this time tomorrow
   * @example DateTime.now().plus({ days: -1 }) //~> this time yesterday
   * @example DateTime.now().plus({ hours: 3, minutes: 13 }) //~> in 3 hr, 13 min
   * @example DateTime.now().plus(Duration.fromObject({ hours: 3, minutes: 13 })) //~> in 3 hr, 13 min
   * @return {DateTime}
   */
  plus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration);
    return clone2(this, adjustTime(this, dur));
  }
  /**
   * Subtract a period of time to this DateTime and return the resulting DateTime
   * See {@link DateTime#plus}
   * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
   @return {DateTime}
   */
  minus(duration) {
    if (!this.isValid)
      return this;
    const dur = Duration.fromDurationLike(duration).negate();
    return clone2(this, adjustTime(this, dur));
  }
  /**
   * "Set" this DateTime to the beginning of a unit of time.
   * @param {string} unit - The unit to go to the beginning of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
   * @param {Object} opts - options
   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
   * @example DateTime.local(2014, 3, 3).startOf('month').toISODate(); //=> '2014-03-01'
   * @example DateTime.local(2014, 3, 3).startOf('year').toISODate(); //=> '2014-01-01'
   * @example DateTime.local(2014, 3, 3).startOf('week').toISODate(); //=> '2014-03-03', weeks always start on Mondays
   * @example DateTime.local(2014, 3, 3, 5, 30).startOf('day').toISOTime(); //=> '00:00.000-05:00'
   * @example DateTime.local(2014, 3, 3, 5, 30).startOf('hour').toISOTime(); //=> '05:00:00.000-05:00'
   * @return {DateTime}
   */
  startOf(unit, { useLocaleWeeks = false } = {}) {
    if (!this.isValid)
      return this;
    const o = {}, normalizedUnit = Duration.normalizeUnit(unit);
    switch (normalizedUnit) {
      case "years":
        o.month = 1;
      case "quarters":
      case "months":
        o.day = 1;
      case "weeks":
      case "days":
        o.hour = 0;
      case "hours":
        o.minute = 0;
      case "minutes":
        o.second = 0;
      case "seconds":
        o.millisecond = 0;
        break;
      case "milliseconds":
        break;
    }
    if (normalizedUnit === "weeks") {
      if (useLocaleWeeks) {
        const startOfWeek = this.loc.getStartOfWeek();
        const { weekday } = this;
        if (weekday < startOfWeek) {
          o.weekNumber = this.weekNumber - 1;
        }
        o.weekday = startOfWeek;
      } else {
        o.weekday = 1;
      }
    }
    if (normalizedUnit === "quarters") {
      const q = Math.ceil(this.month / 3);
      o.month = (q - 1) * 3 + 1;
    }
    return this.set(o);
  }
  /**
   * "Set" this DateTime to the end (meaning the last millisecond) of a unit of time
   * @param {string} unit - The unit to go to the end of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
   * @param {Object} opts - options
   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
   * @example DateTime.local(2014, 3, 3).endOf('month').toISO(); //=> '2014-03-31T23:59:59.999-05:00'
   * @example DateTime.local(2014, 3, 3).endOf('year').toISO(); //=> '2014-12-31T23:59:59.999-05:00'
   * @example DateTime.local(2014, 3, 3).endOf('week').toISO(); // => '2014-03-09T23:59:59.999-05:00', weeks start on Mondays
   * @example DateTime.local(2014, 3, 3, 5, 30).endOf('day').toISO(); //=> '2014-03-03T23:59:59.999-05:00'
   * @example DateTime.local(2014, 3, 3, 5, 30).endOf('hour').toISO(); //=> '2014-03-03T05:59:59.999-05:00'
   * @return {DateTime}
   */
  endOf(unit, opts) {
    return this.isValid ? this.plus({ [unit]: 1 }).startOf(unit, opts).minus(1) : this;
  }
  // OUTPUT
  /**
   * Returns a string representation of this DateTime formatted according to the specified format string.
   * **You may not want this.** See {@link DateTime#toLocaleString} for a more flexible formatting tool. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/formatting?id=table-of-tokens).
   * Defaults to en-US if no locale has been specified, regardless of the system's locale.
   * @param {string} fmt - the format string
   * @param {Object} opts - opts to override the configuration options on this DateTime
   * @example DateTime.now().toFormat('yyyy LLL dd') //=> '2017 Apr 22'
   * @example DateTime.now().setLocale('fr').toFormat('yyyy LLL dd') //=> '2017 avr. 22'
   * @example DateTime.now().toFormat('yyyy LLL dd', { locale: "fr" }) //=> '2017 avr. 22'
   * @example DateTime.now().toFormat("HH 'hours and' mm 'minutes'") //=> '20 hours and 55 minutes'
   * @return {string}
   */
  toFormat(fmt, opts = {}) {
    return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID3;
  }
  /**
   * Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon, such as `DateTime.DATE_FULL` or `DateTime.TIME_SIMPLE`.
   * The exact behavior of this method is browser-specific, but in general it will return an appropriate representation
   * of the DateTime in the assigned locale.
   * Defaults to the system's locale if no locale has been specified
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
   * @param formatOpts {Object} - Intl.DateTimeFormat constructor options and configuration options
   * @param {Object} opts - opts to override the configuration options on this DateTime
   * @example DateTime.now().toLocaleString(); //=> 4/20/2017
   * @example DateTime.now().setLocale('en-gb').toLocaleString(); //=> '20/04/2017'
   * @example DateTime.now().toLocaleString(DateTime.DATE_FULL); //=> 'April 20, 2017'
   * @example DateTime.now().toLocaleString(DateTime.DATE_FULL, { locale: 'fr' }); //=> '28 août 2022'
   * @example DateTime.now().toLocaleString(DateTime.TIME_SIMPLE); //=> '11:32 AM'
   * @example DateTime.now().toLocaleString(DateTime.DATETIME_SHORT); //=> '4/20/2017, 11:32 AM'
   * @example DateTime.now().toLocaleString({ weekday: 'long', month: 'long', day: '2-digit' }); //=> 'Thursday, April 20'
   * @example DateTime.now().toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> 'Thu, Apr 20, 11:27 AM'
   * @example DateTime.now().toLocaleString({ hour: '2-digit', minute: '2-digit', hourCycle: 'h23' }); //=> '11:32'
   * @return {string}
   */
  toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
    return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID3;
  }
  /**
   * Returns an array of format "parts", meaning individual tokens along with metadata. This is allows callers to post-process individual sections of the formatted output.
   * Defaults to the system's locale if no locale has been specified
   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts
   * @param opts {Object} - Intl.DateTimeFormat constructor options, same as `toLocaleString`.
   * @example DateTime.now().toLocaleParts(); //=> [
   *                                   //=>   { type: 'day', value: '25' },
   *                                   //=>   { type: 'literal', value: '/' },
   *                                   //=>   { type: 'month', value: '05' },
   *                                   //=>   { type: 'literal', value: '/' },
   *                                   //=>   { type: 'year', value: '1982' }
   *                                   //=> ]
   */
  toLocaleParts(opts = {}) {
    return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
  }
  /**
   * Returns an ISO 8601-compliant string representation of this DateTime
   * @param {Object} opts - options
   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
   * @param {boolean} [opts.extendedZone=false] - add the time zone format extension
   * @param {string} [opts.format='extended'] - choose between the basic and extended format
   * @example DateTime.utc(1983, 5, 25).toISO() //=> '1982-05-25T00:00:00.000Z'
   * @example DateTime.now().toISO() //=> '2017-04-22T20:47:05.335-04:00'
   * @example DateTime.now().toISO({ includeOffset: false }) //=> '2017-04-22T20:47:05.335'
   * @example DateTime.now().toISO({ format: 'basic' }) //=> '20170422T204705.335-0400'
   * @return {string}
   */
  toISO({
    format = "extended",
    suppressSeconds = false,
    suppressMilliseconds = false,
    includeOffset = true,
    extendedZone = false
  } = {}) {
    if (!this.isValid) {
      return null;
    }
    const ext = format === "extended";
    let c = toISODate(this, ext);
    c += "T";
    c += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
    return c;
  }
  /**
   * Returns an ISO 8601-compliant string representation of this DateTime's date component
   * @param {Object} opts - options
   * @param {string} [opts.format='extended'] - choose between the basic and extended format
   * @example DateTime.utc(1982, 5, 25).toISODate() //=> '1982-05-25'
   * @example DateTime.utc(1982, 5, 25).toISODate({ format: 'basic' }) //=> '19820525'
   * @return {string}
   */
  toISODate({ format = "extended" } = {}) {
    if (!this.isValid) {
      return null;
    }
    return toISODate(this, format === "extended");
  }
  /**
   * Returns an ISO 8601-compliant string representation of this DateTime's week date
   * @example DateTime.utc(1982, 5, 25).toISOWeekDate() //=> '1982-W21-2'
   * @return {string}
   */
  toISOWeekDate() {
    return toTechFormat(this, "kkkk-'W'WW-c");
  }
  /**
   * Returns an ISO 8601-compliant string representation of this DateTime's time component
   * @param {Object} opts - options
   * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
   * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
   * @param {boolean} [opts.extendedZone=true] - add the time zone format extension
   * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
   * @param {string} [opts.format='extended'] - choose between the basic and extended format
   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime() //=> '07:34:19.361Z'
   * @example DateTime.utc().set({ hour: 7, minute: 34, seconds: 0, milliseconds: 0 }).toISOTime({ suppressSeconds: true }) //=> '07:34Z'
   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ format: 'basic' }) //=> '073419.361Z'
   * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ includePrefix: true }) //=> 'T07:34:19.361Z'
   * @return {string}
   */
  toISOTime({
    suppressMilliseconds = false,
    suppressSeconds = false,
    includeOffset = true,
    includePrefix = false,
    extendedZone = false,
    format = "extended"
  } = {}) {
    if (!this.isValid) {
      return null;
    }
    let c = includePrefix ? "T" : "";
    return c + toISOTime(
      this,
      format === "extended",
      suppressSeconds,
      suppressMilliseconds,
      includeOffset,
      extendedZone
    );
  }
  /**
   * Returns an RFC 2822-compatible string representation of this DateTime
   * @example DateTime.utc(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 +0000'
   * @example DateTime.local(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 -0400'
   * @return {string}
   */
  toRFC2822() {
    return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
  }
  /**
   * Returns a string representation of this DateTime appropriate for use in HTTP headers. The output is always expressed in GMT.
   * Specifically, the string conforms to RFC 1123.
   * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
   * @example DateTime.utc(2014, 7, 13).toHTTP() //=> 'Sun, 13 Jul 2014 00:00:00 GMT'
   * @example DateTime.utc(2014, 7, 13, 19).toHTTP() //=> 'Sun, 13 Jul 2014 19:00:00 GMT'
   * @return {string}
   */
  toHTTP() {
    return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
  }
  /**
   * Returns a string representation of this DateTime appropriate for use in SQL Date
   * @example DateTime.utc(2014, 7, 13).toSQLDate() //=> '2014-07-13'
   * @return {string}
   */
  toSQLDate() {
    if (!this.isValid) {
      return null;
    }
    return toISODate(this, true);
  }
  /**
   * Returns a string representation of this DateTime appropriate for use in SQL Time
   * @param {Object} opts - options
   * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
   * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
   * @example DateTime.utc().toSQL() //=> '05:15:16.345'
   * @example DateTime.now().toSQL() //=> '05:15:16.345 -04:00'
   * @example DateTime.now().toSQL({ includeOffset: false }) //=> '05:15:16.345'
   * @example DateTime.now().toSQL({ includeZone: false }) //=> '05:15:16.345 America/New_York'
   * @return {string}
   */
  toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {
    let fmt = "HH:mm:ss.SSS";
    if (includeZone || includeOffset) {
      if (includeOffsetSpace) {
        fmt += " ";
      }
      if (includeZone) {
        fmt += "z";
      } else if (includeOffset) {
        fmt += "ZZ";
      }
    }
    return toTechFormat(this, fmt, true);
  }
  /**
   * Returns a string representation of this DateTime appropriate for use in SQL DateTime
   * @param {Object} opts - options
   * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
   * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
   * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
   * @example DateTime.utc(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 Z'
   * @example DateTime.local(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 -04:00'
   * @example DateTime.local(2014, 7, 13).toSQL({ includeOffset: false }) //=> '2014-07-13 00:00:00.000'
   * @example DateTime.local(2014, 7, 13).toSQL({ includeZone: true }) //=> '2014-07-13 00:00:00.000 America/New_York'
   * @return {string}
   */
  toSQL(opts = {}) {
    if (!this.isValid) {
      return null;
    }
    return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;
  }
  /**
   * Returns a string representation of this DateTime appropriate for debugging
   * @return {string}
   */
  toString() {
    return this.isValid ? this.toISO() : INVALID3;
  }
  /**
   * Returns a string representation of this DateTime appropriate for the REPL.
   * @return {string}
   */
  [Symbol.for("nodejs.util.inspect.custom")]() {
    if (this.isValid) {
      return `DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`;
    } else {
      return `DateTime { Invalid, reason: ${this.invalidReason} }`;
    }
  }
  /**
   * Returns the epoch milliseconds of this DateTime. Alias of {@link DateTime#toMillis}
   * @return {number}
   */
  valueOf() {
    return this.toMillis();
  }
  /**
   * Returns the epoch milliseconds of this DateTime.
   * @return {number}
   */
  toMillis() {
    return this.isValid ? this.ts : NaN;
  }
  /**
   * Returns the epoch seconds of this DateTime.
   * @return {number}
   */
  toSeconds() {
    return this.isValid ? this.ts / 1e3 : NaN;
  }
  /**
   * Returns the epoch seconds (as a whole number) of this DateTime.
   * @return {number}
   */
  toUnixInteger() {
    return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
  }
  /**
   * Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.
   * @return {string}
   */
  toJSON() {
    return this.toISO();
  }
  /**
   * Returns a BSON serializable equivalent to this DateTime.
   * @return {Date}
   */
  toBSON() {
    return this.toJSDate();
  }
  /**
   * Returns a JavaScript object with this DateTime's year, month, day, and so on.
   * @param opts - options for generating the object
   * @param {boolean} [opts.includeConfig=false] - include configuration attributes in the output
   * @example DateTime.now().toObject() //=> { year: 2017, month: 4, day: 22, hour: 20, minute: 49, second: 42, millisecond: 268 }
   * @return {Object}
   */
  toObject(opts = {}) {
    if (!this.isValid)
      return {};
    const base = { ...this.c };
    if (opts.includeConfig) {
      base.outputCalendar = this.outputCalendar;
      base.numberingSystem = this.loc.numberingSystem;
      base.locale = this.loc.locale;
    }
    return base;
  }
  /**
   * Returns a JavaScript Date equivalent to this DateTime.
   * @return {Date}
   */
  toJSDate() {
    return new Date(this.isValid ? this.ts : NaN);
  }
  // COMPARE
  /**
   * Return the difference between two DateTimes as a Duration.
   * @param {DateTime} otherDateTime - the DateTime to compare this one to
   * @param {string|string[]} [unit=['milliseconds']] - the unit or array of units (such as 'hours' or 'days') to include in the duration.
   * @param {Object} opts - options that affect the creation of the Duration
   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
   * @example
   * var i1 = DateTime.fromISO('1982-05-25T09:45'),
   *     i2 = DateTime.fromISO('1983-10-14T10:30');
   * i2.diff(i1).toObject() //=> { milliseconds: 43807500000 }
   * i2.diff(i1, 'hours').toObject() //=> { hours: 12168.75 }
   * i2.diff(i1, ['months', 'days']).toObject() //=> { months: 16, days: 19.03125 }
   * i2.diff(i1, ['months', 'days', 'hours']).toObject() //=> { months: 16, days: 19, hours: 0.75 }
   * @return {Duration}
   */
  diff(otherDateTime, unit = "milliseconds", opts = {}) {
    if (!this.isValid || !otherDateTime.isValid) {
      return Duration.invalid("created by diffing an invalid DateTime");
    }
    const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };
    const units = maybeArray(unit).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = diff_default(earlier, later, units, durOpts);
    return otherIsLater ? diffed.negate() : diffed;
  }
  /**
   * Return the difference between this DateTime and right now.
   * See {@link DateTime#diff}
   * @param {string|string[]} [unit=['milliseconds']] - the unit or units units (such as 'hours' or 'days') to include in the duration
   * @param {Object} opts - options that affect the creation of the Duration
   * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
   * @return {Duration}
   */
  diffNow(unit = "milliseconds", opts = {}) {
    return this.diff(_DateTime.now(), unit, opts);
  }
  /**
   * Return an Interval spanning between this DateTime and another DateTime
   * @param {DateTime} otherDateTime - the other end point of the Interval
   * @return {Interval}
   */
  until(otherDateTime) {
    return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
  }
  /**
   * Return whether this DateTime is in the same unit of time as another DateTime.
   * Higher-order units must also be identical for this function to return `true`.
   * Note that time zones are **ignored** in this comparison, which compares the **local** calendar time. Use {@link DateTime#setZone} to convert one of the dates if needed.
   * @param {DateTime} otherDateTime - the other DateTime
   * @param {string} unit - the unit of time to check sameness on
   * @param {Object} opts - options
   * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; only the locale of this DateTime is used
   * @example DateTime.now().hasSame(otherDT, 'day'); //~> true if otherDT is in the same current calendar day
   * @return {boolean}
   */
  hasSame(otherDateTime, unit, opts) {
    if (!this.isValid)
      return false;
    const inputMs = otherDateTime.valueOf();
    const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });
    return adjustedToZone.startOf(unit, opts) <= inputMs && inputMs <= adjustedToZone.endOf(unit, opts);
  }
  /**
   * Equality check
   * Two DateTimes are equal if and only if they represent the same millisecond, have the same zone and location, and are both valid.
   * To compare just the millisecond values, use `+dt1 === +dt2`.
   * @param {DateTime} other - the other DateTime
   * @return {boolean}
   */
  equals(other) {
    return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
  }
  /**
   * Returns a string representation of a this time relative to now, such as "in two days". Can only internationalize if your
   * platform supports Intl.RelativeTimeFormat. Rounds down by default.
   * @param {Object} options - options that affect the output
   * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
   * @param {string} [options.style="long"] - the style of units, must be "long", "short", or "narrow"
   * @param {string|string[]} options.unit - use a specific unit or array of units; if omitted, or an array, the method will pick the best unit. Use an array or one of "years", "quarters", "months", "weeks", "days", "hours", "minutes", or "seconds"
   * @param {boolean} [options.round=true] - whether to round the numbers in the output.
   * @param {number} [options.padding=0] - padding in milliseconds. This allows you to round up the result if it fits inside the threshold. Don't use in combination with {round: false} because the decimal output will include the padding.
   * @param {string} options.locale - override the locale of this DateTime
   * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
   * @example DateTime.now().plus({ days: 1 }).toRelative() //=> "in 1 day"
   * @example DateTime.now().setLocale("es").toRelative({ days: 1 }) //=> "dentro de 1 día"
   * @example DateTime.now().plus({ days: 1 }).toRelative({ locale: "fr" }) //=> "dans 23 heures"
   * @example DateTime.now().minus({ days: 2 }).toRelative() //=> "2 days ago"
   * @example DateTime.now().minus({ days: 2 }).toRelative({ unit: "hours" }) //=> "48 hours ago"
   * @example DateTime.now().minus({ hours: 36 }).toRelative({ round: false }) //=> "1.5 days ago"
   */
  toRelative(options = {}) {
    if (!this.isValid)
      return null;
    const base = options.base || _DateTime.fromObject({}, { zone: this.zone }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
    let units = ["years", "months", "days", "hours", "minutes", "seconds"];
    let unit = options.unit;
    if (Array.isArray(options.unit)) {
      units = options.unit;
      unit = void 0;
    }
    return diffRelative(base, this.plus(padding), {
      ...options,
      numeric: "always",
      units,
      unit
    });
  }
  /**
   * Returns a string representation of this date relative to today, such as "yesterday" or "next month".
   * Only internationalizes on platforms that supports Intl.RelativeTimeFormat.
   * @param {Object} options - options that affect the output
   * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
   * @param {string} options.locale - override the locale of this DateTime
   * @param {string} options.unit - use a specific unit; if omitted, the method will pick the unit. Use one of "years", "quarters", "months", "weeks", or "days"
   * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
   * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar() //=> "tomorrow"
   * @example DateTime.now().setLocale("es").plus({ days: 1 }).toRelative() //=> ""mañana"
   * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar({ locale: "fr" }) //=> "demain"
   * @example DateTime.now().minus({ days: 2 }).toRelativeCalendar() //=> "2 days ago"
   */
  toRelativeCalendar(options = {}) {
    if (!this.isValid)
      return null;
    return diffRelative(options.base || _DateTime.fromObject({}, { zone: this.zone }), this, {
      ...options,
      numeric: "auto",
      units: ["years", "months", "days"],
      calendary: true
    });
  }
  /**
   * Return the min of several date times
   * @param {...DateTime} dateTimes - the DateTimes from which to choose the minimum
   * @return {DateTime} the min DateTime, or undefined if called with no argument
   */
  static min(...dateTimes) {
    if (!dateTimes.every(_DateTime.isDateTime)) {
      throw new InvalidArgumentError("min requires all arguments be DateTimes");
    }
    return bestBy(dateTimes, (i) => i.valueOf(), Math.min);
  }
  /**
   * Return the max of several date times
   * @param {...DateTime} dateTimes - the DateTimes from which to choose the maximum
   * @return {DateTime} the max DateTime, or undefined if called with no argument
   */
  static max(...dateTimes) {
    if (!dateTimes.every(_DateTime.isDateTime)) {
      throw new InvalidArgumentError("max requires all arguments be DateTimes");
    }
    return bestBy(dateTimes, (i) => i.valueOf(), Math.max);
  }
  // MISC
  /**
   * Explain how a string would be parsed by fromFormat()
   * @param {string} text - the string to parse
   * @param {string} fmt - the format the string is expected to be in (see description)
   * @param {Object} options - options taken by fromFormat()
   * @return {Object}
   */
  static fromFormatExplain(text, fmt, options = {}) {
    const { locale = null, numberingSystem = null } = options, localeToUse = Locale.fromOpts({
      locale,
      numberingSystem,
      defaultToEN: true
    });
    return explainFromTokens(localeToUse, text, fmt);
  }
  /**
   * @deprecated use fromFormatExplain instead
   */
  static fromStringExplain(text, fmt, options = {}) {
    return _DateTime.fromFormatExplain(text, fmt, options);
  }
  // FORMAT PRESETS
  /**
   * {@link DateTime#toLocaleString} format like 10/14/1983
   * @type {Object}
   */
  static get DATE_SHORT() {
    return DATE_SHORT;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983'
   * @type {Object}
   */
  static get DATE_MED() {
    return DATE_MED;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Fri, Oct 14, 1983'
   * @type {Object}
   */
  static get DATE_MED_WITH_WEEKDAY() {
    return DATE_MED_WITH_WEEKDAY;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'October 14, 1983'
   * @type {Object}
   */
  static get DATE_FULL() {
    return DATE_FULL;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Tuesday, October 14, 1983'
   * @type {Object}
   */
  static get DATE_HUGE() {
    return DATE_HUGE;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get TIME_SIMPLE() {
    return TIME_SIMPLE;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get TIME_WITH_SECONDS() {
    return TIME_WITH_SECONDS;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23 AM EDT'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get TIME_WITH_SHORT_OFFSET() {
    return TIME_WITH_SHORT_OFFSET;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23 AM Eastern Daylight Time'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get TIME_WITH_LONG_OFFSET() {
    return TIME_WITH_LONG_OFFSET;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30', always 24-hour.
   * @type {Object}
   */
  static get TIME_24_SIMPLE() {
    return TIME_24_SIMPLE;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23', always 24-hour.
   * @type {Object}
   */
  static get TIME_24_WITH_SECONDS() {
    return TIME_24_WITH_SECONDS;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23 EDT', always 24-hour.
   * @type {Object}
   */
  static get TIME_24_WITH_SHORT_OFFSET() {
    return TIME_24_WITH_SHORT_OFFSET;
  }
  /**
   * {@link DateTime#toLocaleString} format like '09:30:23 Eastern Daylight Time', always 24-hour.
   * @type {Object}
   */
  static get TIME_24_WITH_LONG_OFFSET() {
    return TIME_24_WITH_LONG_OFFSET;
  }
  /**
   * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_SHORT() {
    return DATETIME_SHORT;
  }
  /**
   * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30:33 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_SHORT_WITH_SECONDS() {
    return DATETIME_SHORT_WITH_SECONDS;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_MED() {
    return DATETIME_MED;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30:33 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_MED_WITH_SECONDS() {
    return DATETIME_MED_WITH_SECONDS;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Fri, 14 Oct 1983, 9:30 AM'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_MED_WITH_WEEKDAY() {
    return DATETIME_MED_WITH_WEEKDAY;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30 AM EDT'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_FULL() {
    return DATETIME_FULL;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30:33 AM EDT'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_FULL_WITH_SECONDS() {
    return DATETIME_FULL_WITH_SECONDS;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30 AM Eastern Daylight Time'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_HUGE() {
    return DATETIME_HUGE;
  }
  /**
   * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30:33 AM Eastern Daylight Time'. Only 12-hour if the locale is.
   * @type {Object}
   */
  static get DATETIME_HUGE_WITH_SECONDS() {
    return DATETIME_HUGE_WITH_SECONDS;
  }
};
function friendlyDateTime(dateTimeish) {
  if (DateTime.isDateTime(dateTimeish)) {
    return dateTimeish;
  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
    return DateTime.fromJSDate(dateTimeish);
  } else if (dateTimeish && typeof dateTimeish === "object") {
    return DateTime.fromObject(dateTimeish);
  } else {
    throw new InvalidArgumentError(
      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`
    );
  }
}

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var menuOtro = class {
  constructor(plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.selectedActivity = "";
    this.selectedGroup = "";
    this.plugin = plugin;
    this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
  }
  async menuOtro(app2, registro) {
    const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
    const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
    const placeholderOtro = "\xBFQue categoria?";
    const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
    let temaOtro;
    let siAsunto = false;
    try {
      const selectionOtro = await modalOtro.openAndAwaitSelection();
      switch (selectionOtro) {
        case "hab":
          temaOtro = await this.habitual(app2);
          break;
        case "actsAV":
        case "actsAI":
        case "actsPQ":
        case "actsPGTD":
        case "actsTI":
        case "actsRR":
          temaOtro = await this.elemSG(app2, selectionOtro);
          siAsunto = true;
          break;
        case "bus":
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      registro.detener = true;
      return error;
    }
    debugger;
    return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.grupo, areaVida: temaOtro.grupo };
  }
  async habitual(app2) {
    const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
    const actsGrupos = await this.resultYaml(app2, "actsTemas");
    let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
    return objEleccion;
  }
  async ninguno(app2) {
  }
  async elemSG(app2, tipo) {
    const actividades = await this.resultYaml(app2, tipo);
    const activeSG = await this.findMainFilesWithState(app2, tipo);
    let groups;
    debugger;
    switch (tipo) {
      case "actsAV":
        groups = activeSG.map((page) => page.frontmatter.areaVida);
        break;
      default:
        groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
        break;
    }
    let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
    const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
    let alias = foundElement == null ? void 0 : foundElement.file.path;
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
    return objEleccion;
  }
  async buscar(app2) {
  }
  async resultYaml(app2, tema) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian19.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], actividad: item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFrontmatterField(app2, file, field) {
    try {
      const tFile = app2.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian19.TFile) {
        const cache = app2.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
            console.log("El campo est\xE1 vac\xEDo o no existe.");
            return null;
          } else {
            console.log("Frontmatter consultado con \xE9xito");
            return fieldValue;
          }
        } else {
          console.log("El campo no existe en el frontmatter.");
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  async findMainFilesWithState(app2, tipo) {
    var _a;
    const propertiesTipo = {
      actsAV: {
        folder: this.plugin.settings.folder_AreasVida,
        sameName: false,
        nameFile: this.plugin.settings.nameFile_AreasVida
      },
      actsAI: {
        folder: this.plugin.settings.folder_AreasInteres,
        sameName: true,
        nameFile: this.plugin.settings.nameFile_AreasInteres
      },
      actsPQ: {
        folder: this.plugin.settings.folder_ProyectosQ,
        sameName: false,
        nameFile: ""
      },
      actsPGTD: {
        folder: this.plugin.settings.folder_ProyectosGTD,
        sameName: false,
        nameFile: ""
      },
      actsTI: {
        folder: this.plugin.settings.folder_TemasInteres,
        sameName: false,
        nameFile: ""
      },
      actsRR: {
        folder: this.plugin.settings.folder_RecursosRecurrentes,
        sameName: false,
        nameFile: ""
      }
      // Puedes continuar añadiendo más casos aquí
    };
    debugger;
    const activeFilesWithFrontmatter = [];
    switch (tipo) {
      case "actsAV":
        const { folder, sameName, nameFile } = propertiesTipo[tipo];
        let ahora = DateTime.now().toFormat("yyyy-Qq");
        const files = app2.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && file.name.startsWith(ahora));
        for (let file of files) {
          let metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            activeFilesWithFrontmatter.push({ file, frontmatter: metadata });
          }
        }
        break;
      default:
        if (propertiesTipo.hasOwnProperty(tipo)) {
          const { folder: folder2, sameName: sameName2, nameFile: nameFile2 } = propertiesTipo[tipo];
          const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder2));
          for (const file of filesInFolder) {
            if (sameName2 && file.basename === nameFile2 || !sameName2) {
              const metadata = app2.metadataCache.getFileCache(file);
              if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
                activeFilesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
              }
            }
          }
        } else {
          console.log("Selecci\xF3n no reconocida:", tipo);
          return [];
        }
        break;
    }
    return activeFilesWithFrontmatter;
  }
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var utilsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.menuOtro = new menuOtro(plugin);
  }
  // La declaración del método estaba asi: buscarRegistrosActivos(app: App, registro: any)
  // Devuelve el file del registro activo. Utilizado para cuando necesito obtener el dato solamente de si hay algún registro activo.
  async buscarRegistrosActivos(app2) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    const folder = this.plugin.settings.folder_RegistroTiempo;
    for (let file of files) {
      if (file.path.startsWith(folder)) {
        const metadata = app2.metadataCache.getFileCache(file);
        if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
          return file;
        }
      }
    }
    return;
  }
  // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
  async crearObjetoRegistro(plugin) {
    const activo = plugin.app.workspace.getActiveFile();
    if (!activo) {
      console.error(
        "No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo."
      );
      return null;
    }
    const folder = plugin.settings.folder_RegistroTiempo;
    const indice = plugin.settings.indice_RegistroTiempo;
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter(
      (file) => file.path.startsWith(folder)
    );
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    const nextId = maxId + 1;
    const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
    return {
      activo,
      nombre: activo.basename,
      folder,
      indice,
      id: nextId,
      fecha: fechaCompleta,
      indice_DVJS: `"${indice}"`
    };
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = [
      "Domingo",
      "Lunes",
      "Martes",
      "Mi\xE9rcoles",
      "Jueves",
      "Viernes",
      "S\xE1bado"
    ];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  // Método que verifica si hay registros ACtivos y pregunta si quiere cerrarlos.
  async verificarTareasActivas(registro, app2) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    const tareasActivas = [];
    for (let file of files) {
      if (file.path.startsWith(registro.folder)) {
        const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
          tareasActivas.push({
            file,
            titulo: metadata.titulo,
            aliases: metadata.aliases || file.basename
          });
        }
      }
    }
    if (tareasActivas.length === 1) {
      const tareaActiva = tareasActivas[0];
      const deseaDetener = await this.mostrarSugerencia(
        `La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`
      );
      if (deseaDetener === void 0) {
        new import_obsidian20.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
        registro.detener = true;
        return;
      }
      if (deseaDetener) {
        debugger;
        const registroTiempoAPInstance = new registroTiempoAPI(this.plugin);
        await registroTiempoAPInstance.cerrarRegistro(tareaActiva.file);
        registro.detener = false;
      } else {
        new import_obsidian20.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
        registro.detener = true;
        return;
      }
    } else if (tareasActivas.length > 1) {
      new import_obsidian20.Notice(
        "Hay un error con la cantidad de tareas corriendo en este momento."
      );
      registro.detener = true;
    } else {
      console.log("No hay m\xE1s tareas corriendo.");
      registro.detener = false;
    }
  }
  mostrarSugerencia(mensaje) {
    return new Promise((resolve, reject) => {
      let seleccionado = false;
      const modal = new import_obsidian20.Modal(app);
      modal.contentEl.createEl("h1", { text: mensaje });
      const buttonsContainer = modal.contentEl.createEl("div");
      const hacerSeleccion = (seleccion) => {
        seleccionado = true;
        modal.close();
        resolve(seleccion);
      };
      const yesButton = buttonsContainer.createEl("button", {
        text: "S\xED"
      });
      yesButton.addEventListener("click", () => hacerSeleccion(true));
      const noButton = buttonsContainer.createEl("button", {
        text: "No"
      });
      noButton.addEventListener("click", () => hacerSeleccion(false));
      modal.onClose = () => {
        if (!seleccionado) {
          reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      };
      modal.contentEl.addEventListener("keydown", (e) => {
        var _a;
        switch (e.key) {
          case "ArrowLeft":
            yesButton.focus();
            break;
          case "ArrowRight":
            noButton.focus();
            break;
          case "Enter":
            (_a = document.activeElement) == null ? void 0 : _a.click();
            break;
        }
      });
      yesButton.focus();
      modal.open();
    });
  }
  async definirTipoRegistro(registro, app2) {
    const totTareas = await this.encontrarTareasPendientes(app2);
    let opcionesTitulo, valoresOpcion;
    if (totTareas.length > 0) {
      opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
      valoresOpcion = ["Nota", "Tarea", "Otro"];
    } else {
      opcionesTitulo = [registro.nombre, "Otro"];
      valoresOpcion = ["Nota", "Otro"];
    }
    const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
    const modalMenu1 = new SeleccionModal(
      app2,
      opcionesTitulo,
      valoresOpcion,
      placeholder
    );
    try {
      const selection = await modalMenu1.openAndAwaitSelection();
      registro.tipoRegistro = selection;
      switch (registro.tipoRegistro) {
        case "Nota":
          registro.titulo = registro.nombre;
          registro.siAsunto = true;
          debugger;
          registro = this.copiarCampos(registro);
          break;
        case "Tarea":
          await this.elegirTareaParaRegistro(app2, registro, totTareas);
          break;
        default:
          let respuesta = await this.menuOtro.menuOtro(app2, registro);
          debugger;
          Object.assign(registro, respuesta);
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    }
  }
  copiarCampos(registro) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    let nombre = registro.activo.basename;
    let nota = app.metadataCache.getFileCache(registro.activo);
    if (((_a = nota.frontmatter) == null ? void 0 : _a.type) === "PQ") {
      registro.proyectoQ = nombre;
      registro.proyectoGTD = "";
      if (Array.isArray(nota.frontmatter.proyectoGTD)) {
        registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
      } else if (nota.frontmatter.proyectoGTD) {
        registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
      }
    } else if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PGTD") {
      registro.proyectoGTD = [nombre];
      if (Array.isArray(nota.frontmatter.proyectoGTD)) {
        registro.proyectoGTD = registro.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
      } else if (nota.frontmatter.proyectoGTD) {
        registro.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
      }
      registro.proyectoQ = "";
      if (Array.isArray(nota.frontmatter.proyectoQ)) {
        registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
      } else if (nota.frontmatter.proyectoQ) {
        registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
      }
    } else {
      registro.proyectoQ = "";
      if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoQ)) {
        registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
      } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ) {
        registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
      }
      registro.proyectoGTD = "";
      if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoGTD)) {
        registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
      } else if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD) {
        registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
      }
    }
    registro.areaInteres = [];
    if (Array.isArray((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaInteres)) {
      registro.areaInteres = registro.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
    } else {
      if ((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres) {
        registro.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
      }
    }
    registro.areaVida = "";
    if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaVida) {
      if (Array.isArray(nota.frontmatter.areaVida)) {
        registro.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
      } else if (typeof nota.frontmatter.areaVida === "string") {
        registro.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
      }
    } else {
      registro.areaVida = "No es de ning\xFAn Area de Vida";
    }
    return registro;
  }
  async encontrarTareasPendientes(app2) {
    let tareasPendientes = [];
    const archivos = app2.vault.getMarkdownFiles();
    const archivosRelevantes = archivos.filter(
      (archivo) => !archivo.path.includes("Plantillas")
    );
    for (const archivo of archivosRelevantes) {
      const contenido = await app2.vault.read(archivo);
      const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
      const tareasConArchivo = coincidencias.map((tarea) => {
        return { tarea: tarea.trim(), archivo };
      });
      tareasPendientes = tareasPendientes.concat(tareasConArchivo);
    }
    return tareasPendientes;
  }
  async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
    const placeholder = "Elige la tarea que vas a registrar.";
    let promesasLimpias = tareasPendientes.map(
      (tareaObj) => this.limpiarTextoTarea(tareaObj.tarea)
    );
    try {
      const tareasLimpias = await Promise.all(promesasLimpias);
      const tareasLimpiasConArchivo = tareasPendientes.map(
        (tareaObj, index) => {
          return {
            tarea: tareasLimpias[index],
            // Tarea limpia
            archivo: tareaObj.archivo
            // Referencia al archivo original
          };
        }
      );
      const longitud = tareasLimpiasConArchivo.length;
      const arregloDeIndices = Array.from(
        { length: longitud },
        (_, indice) => indice
      );
      const modalMenu = new SeleccionModal(
        app2,
        tareasLimpiasConArchivo.map((b) => b.tarea),
        arregloDeIndices,
        placeholder
      );
      try {
        const selectedIndex = await modalMenu.openAndAwaitSelection();
        const seleccion = tareasLimpiasConArchivo[selectedIndex];
        registro.titulo = seleccion.tarea;
        registro.nombre = seleccion.archivo.basename;
        registro.siAsunto = true;
      } catch (error) {
        registro.detener = true;
        console.error("Error o modal cerrado sin selecci\xF3n:", error);
      }
    } catch (error) {
      console.error("Hubo un error al limpiar las tareas:", error);
    }
  }
  limpiarTextoTarea(titulo) {
    return new Promise((resolve) => {
      let textoLimpio = titulo.split("\n")[0];
      textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
      textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
      textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
      const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
      textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
      textoLimpio = textoLimpio.replace(/\s+/g, " ");
      resolve(textoLimpio.trim());
    });
  }
  async construirNombreyAlias(registro, app2) {
    let nombreBase = `${registro.folder}/RT - ${registro.id}`;
    let aliasLimpio = this.limpiarAlias(registro.titulo);
    aliasLimpio = aliasLimpio.length > 195 ? aliasLimpio.slice(0, 195) : aliasLimpio;
    const archivos = app2.vault.getFiles();
    let registrosConMismoTitulo = [];
    for (const archivo of archivos) {
      if (archivo.path.startsWith(registro.folder)) {
        const metadatos = app2.metadataCache.getFileCache(archivo);
        if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === registro.titulo) {
          const idSec = metadatos.frontmatter.idSec;
          if (idSec !== void 0) {
            registrosConMismoTitulo.push({ archivo, idSec });
          }
        }
      }
    }
    debugger;
    registrosConMismoTitulo.sort((b) => b.idSec, "desc");
    registro.idSec = registrosConMismoTitulo.length > 0 ? parseInt(registrosConMismoTitulo[0].idSec) + 1 : 1;
    if (registro.idSec > 1) {
      aliasLimpio += ` - ${registro.idSec}`;
    }
    registro.aliases = [];
    registro.aliases.push(`RT - ${aliasLimpio}`);
    if (registro.tipoRegistro === "Nota") {
      const archivoActivo = app2.workspace.getActiveFile();
      if (!archivoActivo)
        return;
      const metadatosActivo = app2.metadataCache.getFileCache(archivoActivo);
      const aliasesActivo = metadatosActivo && metadatosActivo.frontmatter ? metadatosActivo.frontmatter.aliases : void 0;
      if (aliasesActivo) {
        const additionalAliases = Array.isArray(aliasesActivo) ? aliasesActivo : [aliasesActivo];
        additionalAliases.forEach((alias) => {
          registro.aliases.push(`RT - ${alias}`);
        });
      }
    }
    registro.nameFile = nombreBase;
  }
  limpiarAlias(titulo) {
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
    tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
    return tituloLimpio.trim();
  }
};

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var import_obsidian21 = require("obsidian");
var registroTiempoAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
  }
  async iniciarRegistro() {
    try {
      const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
      await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
      return registro;
    } catch (error) {
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
  }
  // Invocado desde el template de templater Paso 3 de 3
  async retomarRegistro(id) {
    var _a;
    const folder = this.plugin.settings.folder_RegistroTiempo;
    try {
      const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
      await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      const files = app.vault.getMarkdownFiles();
      let registroAntiguo;
      for (let file of files) {
        if (file.path.startsWith(folder)) {
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.id) === parseInt(id)) {
            registroAntiguo = { file, frontmatter: metadata };
          }
        }
      }
      debugger;
      registro.titulo = (registroAntiguo == null ? void 0 : registroAntiguo.frontmatter.titulo) ? registroAntiguo.frontmatter.titulo : "Sin Titulo";
      registro.asuntoRetomado = (registroAntiguo == null ? void 0 : registroAntiguo.frontmatter.asunto) ? registroAntiguo.frontmatter.asunto : null;
      await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
      return registro;
    } catch (error) {
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
  }
  // Invocado para crear el template de Retomar Paso 1 de 3
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian21.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  // Implementación del método con unión de tipos para el parámetro id
  async cerrarRegistro(registro) {
    var _a, _b, _c;
    const folder = this.plugin.settings.folder_RegistroTiempo;
    if (typeof registro === "string") {
      registro = parseInt(registro);
    }
    if (typeof registro === "number") {
      const files = app.vault.getMarkdownFiles();
      let infoNota;
      for (let file of files) {
        if (file.path.startsWith(folder)) {
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.id) === registro) {
            infoNota = { file };
            Object.assign(infoNota, metadata);
          }
        }
      }
      let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
      let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
      let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
      new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
    } else if (registro instanceof import_obsidian21.TFile) {
      const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
      let infoNota = { file: registro };
      Object.assign(infoNota, metadata);
      let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
      let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
      let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
      new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
    } else {
      const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
      const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
      let infoNota = { file: registro2 };
      Object.assign(infoNota, metadata);
      let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
      let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
      let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
      new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
    }
  }
  // Implementación del método con unión de tipos para el parámetro id
  async detalleRegistro(registro) {
    var _a, _b, _c;
    const folder = this.plugin.settings.folder_RegistroTiempo;
    let infoNota;
    debugger;
    if (typeof registro === "string") {
      registro = parseInt(registro);
    }
    if (typeof registro === "number") {
      const files = app.vault.getMarkdownFiles();
      for (let file of files) {
        if (file.path.startsWith(folder)) {
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.id) === registro) {
            infoNota = { file };
            Object.assign(infoNota, metadata);
          }
        }
      }
    } else if (registro instanceof import_obsidian21.TFile) {
      const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
      infoNota = { file: registro };
      Object.assign(infoNota, metadata);
    } else {
      const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
      const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
      infoNota = { file: registro2 };
      Object.assign(infoNota, metadata);
    }
    let campos = ["descripcion_RegistroTiempo"];
    debugger;
    let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(infoNota, campos);
    let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
    new Notice(`Descripci\xF3n actualizada: ${textoResultado}`);
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/noteLifecycleManager/API/starterAPI.ts
var import_obsidian22 = require("obsidian");
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  // Crear Nota desde template
  async createNote(subsistema) {
    try {
      debugger;
      const templatePath = `Plantillas/${this.plugin.settings[`folder_${subsistema}`]}/Plt - ${subsistema}.md`;
      const templateFile = app.vault.getAbstractFileByPath(templatePath);
      if (!(templateFile instanceof import_obsidian22.TFile)) {
        throw new Error(`El template para "${subsistema}" no se encontr\xF3 o no es un archivo v\xE1lido.`);
      }
      const dtConseq = DateTime.now().toFormat("yyyy-MM-dd HHmmss");
      const filename = `${subsistema} ${dtConseq}`;
      const folder = app.vault.getAbstractFileByPath("Inbox");
      if (!folder) {
        throw new Error(`La carpeta "Inbox" no se encontr\xF3.`);
      }
      const tp = this.getTp();
      let crearNota = tp.file.static_functions.get("create_new");
      if (typeof crearNota !== "function") {
        throw new Error("La funci\xF3n para crear notas no est\xE1 disponible.");
      }
      await crearNota(templateFile, filename, true, folder).basename;
    } catch (error) {
      console.error(error);
      alert(`Error al crear la nota: ${error.message}`);
    }
  }
  // crearNota -> Llenar los campos YAML del template.
  async fillNote(infoSubsistema, campos) {
    this.nota = {};
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
      Object.assign(this.nota, infoSubsistema);
    }
    try {
      for (let campo of campos) {
        debugger;
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          this.nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian22.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  // Ejemplo de función getCampo simulada. Debes definir funciones similares para 'id', 'fecha', etc.
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    let registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    switch (this.infoSubsistema.type) {
      case "nAV":
      case "AV":
        registrosExistentes.forEach((file) => {
          var _a;
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id) && metadata.type && metadata.type === this.infoSubsistema.type) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        break;
      default:
        registrosExistentes.forEach((file) => {
          var _a;
          const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        break;
    }
    const nextId = maxId + 1;
    return nextId;
  }
  async getFecha() {
    let fecha;
    let prompt = this.tp.system.static_functions.get("prompt");
    switch (this.infoSubsistema.type) {
      case "Tx":
        let fechaOriginal = await prompt(`Confirma la fecha de la transacci\xF3n: `, `${DateTime.now().toFormat("yyyy-MM-dd HH:mm")}`, true);
        let fechaMoment = window.moment(fechaOriginal, "YYYY-MM-DD HH:mm");
        fecha = fechaMoment.format("YYYY-MM-DD dddd HHmmss");
      default:
        fecha = this.formatearFecha(/* @__PURE__ */ new Date());
        break;
    }
    return fecha;
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getSecId() {
  }
  async getTitulo() {
    let prompt = this.tp.system.static_functions.get("prompt");
    let titulo;
    switch (this.infoSubsistema.type) {
      case "Tx":
        titulo = await prompt(`Nombre de este(a) ${this.infoSubsistema.typeName}`, `${this.infoSubsistema.typeName} - ${this.nota.id}`, true);
        break;
      case "OCA":
        titulo = await prompt(`Cual es tu objetivo en ${this.nota.a\u00F1o} para ${this.nota.areaVida}?`, `Voy a `, true, true);
        break;
      default:
        titulo = await prompt(`Titulo de este(a) ${this.infoSubsistema.typeName}`, `${this.infoSubsistema.typeName} - ${this.nota.id}`, true);
        break;
    }
    if (titulo === null) {
      new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    return titulo;
  }
  async getDescripcion() {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion;
    switch (this.infoSubsistema.type) {
      case "Ax":
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta anotaci\xF3n es sobre ${this.nota.titulo}`, false, true);
        break;
      case "Tx":
        descripcion = await prompt(`\xBFQuieres agregar una descripci\xF3n de ${this.nota.titulo}?`, ` ${this.infoSubsistema.typeName} de ${this.nota.titulo}`, false, true);
        break;
      case "AV":
        descripcion = await prompt(`\xBFQuieres agregar una descripci\xF3n sobre ${this.nota.titulo}?`, " ", false, true);
        break;
      case "AI":
        descripcion = await prompt(`\xBFQuieres agregar una descripci\xF3n sobre ${this.nota.titulo}?`, " ", false, true);
        break;
      case "PGTD":
        descripcion = await prompt("\xBFSobre que es este proyecto GTD?", ` Proyecto sobre `, false, true);
        break;
      case "OCA":
        descripcion = await prompt("\xBFQuieres agregar detalles de tu objetivo?", `${this.nota.titulo}`, false, true);
        break;
      default:
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
        break;
    }
    if (descripcion === null) {
      new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    return descripcion;
  }
  async getAliases() {
    let nota = { aliases: [] };
    switch (this.infoSubsistema.type) {
      case "Ax":
      case "PGTD":
      case "Tx":
      case "CPE":
        nota.aliases.push(`${this.nota.titulo}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
        break;
      case "AI":
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
        if (this.nota.areaVida != "No es de ning\xFAn Area de Vida") {
          nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.areaVida}/${this.nota.titulo}`);
        }
        break;
      case "nAV":
        nota.aliases.push(`AV/${this.nota.areaVida}`);
        nota.aliases.push(`AV/${this.nota.grupo}/${this.nota.areaVida}`);
        break;
      case "AV":
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${this.nota.titulo}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.grupo}/${this.nota.trimestre}/${this.nota.titulo}`);
        break;
      case "RR":
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
        break;
      case "PQ":
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${this.nota.titulo}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida}/${this.nota.trimestre}/${this.nota.titulo}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida}/${this.nota.titulo}`);
        break;
      case "OCA":
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.id}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.areaVida}/${this.nota.id}`);
        nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
        break;
      case "CAI":
        nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.a\u00F1o}`);
        nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.id}`);
        break;
      case "CTI":
        nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.trimestre}`);
        nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.id}`);
        break;
    }
    return nota.aliases;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn \xC1rea de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian22.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian22.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn \xC1rea de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getOtrosAsuntos(subsistemas) {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = [];
    for (let subsistema of subsistemas) {
      let incluye = await suggester(["Si", "No"], [true, false], true, `Desea agregar algun ${subsistema} activo como origen?`);
      if (!incluye)
        continue;
      debugger;
      let recursosActivos = await this.activeStructureResources(subsistema);
      let primerAlias = recursosActivos.map((file) => {
        var _a;
        const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return metadata && metadata.aliases && metadata.aliases.length > 0 ? metadata.aliases[0] : null;
      }).filter((alias) => alias !== null);
      while (recursosActivos.length > 0) {
        let indiceSeleccionado;
        if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.path), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.path === seleccion);
        } else {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.basename), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.basename === seleccion);
        }
        if (indiceSeleccionado !== -1) {
          if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
            campo.push(recursosActivos[indiceSeleccionado].path);
          } else {
            campo.push(recursosActivos[indiceSeleccionado].basename);
          }
          recursosActivos.splice(indiceSeleccionado, 1);
          primerAlias.splice(indiceSeleccionado, 1);
        }
        if (recursosActivos.length === 0)
          break;
        let deseaAgregarOtro = await suggester(["Si", "No"], [true, false], true, `Desea agregar otro ${subsistema} como origen?`);
        debugger;
        if (!deseaAgregarOtro)
          break;
      }
    }
    return campo;
  }
  // FUNCION QUE TRAE TODAS LAS NOTAS ACTIVAS DE LOS SISTEMAS. - Revisar en que la uso...
  async activeStructureResources(typeName) {
    try {
      const files = app.vault.getMarkdownFiles();
      switch (type) {
        case "AreasInteres":
          debugger;
          break;
        default:
          let resourceFolderName = "folder_" + typeName;
          let resourceFolder = this.plugin.settings[resourceFolderName];
          if (!resourceFolder) {
            console.error(`La carpeta "${resourceFolderName}" no existe en la configuraci\xF3n del plugin.`);
            return [];
          }
          let activeResources2 = [];
          const registrosExistentes = files.filter((file) => file.path.startsWith(resourceFolder));
          registrosExistentes.forEach((file) => {
            var _a;
            const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (metadata && metadata.estado === "\u{1F7E2}") {
              activeResources2.push(file);
            }
          });
          break;
      }
      return activeResources;
    } catch (error) {
      console.error("Error al buscar recursos activos:", error);
      return [];
    }
  }
  async getClasificacion() {
    var _a;
    let clasificacion2, tagClasificacion2, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      let suggester = this.tp.system.static_functions.get("suggester");
      tagClasificacion2 = await suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 == "Nuevo") {
        let prompt = this.tp.system.static_functions.get("prompt");
        clasificacion2 = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 == "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion2];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 != "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
  // ->
  getDuplasFijas(app2, area) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian22.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[area]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], area: item[1], texto: item[0] + "/" + item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  // Función creda para las Areas de Vida y para las Anotaciones, para traer las que estan en plt Campos
  async getArea() {
    let area, grupo;
    let tipoArea = this.infoSubsistema.typeName;
    let nuevaArea = false;
    let areasGrupos = this.getDuplasFijas(app, tipoArea);
    let suggester = this.tp.system.static_functions.get("suggester");
    let areaGrupo = await suggester(areasGrupos.map((b) => b.texto), areasGrupos.map((b) => b.texto), false, `\xBFCu\xE1l ${tipoArea} deseas crear?`);
    if (areaGrupo === null) {
      new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    } else if (areaGrupo == "Nuevo") {
      let prompt = this.tp.system.static_functions.get("prompt");
      clasificacion = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
      if (clasificacion === null) {
        new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      tagClasificacion = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
      if (tagClasificacion === null) {
        new import_obsidian22.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      nuevaClasificacion = true;
    } else {
      let indice = areasGrupos.findIndex((objeto) => objeto.texto === areaGrupo);
      grupo = areasGrupos[indice].grupo;
      area = areasGrupos[indice].area;
      this.nota.grupo = grupo;
      this.nota.titulo = area;
      return { grupo, titulo: area };
    }
  }
  async getEstado() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let campo;
    switch (tipoSistema) {
      case "Ax":
        campo = await suggester(["\u{1F535} -> Para Archivo - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En desarrollo", "\u{1F534} -> No realizado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado actual ${nombreSistema}:`);
        break;
      case "PGTD":
        campo = await suggester(["\u{1F535} -> Completado - Archivo", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado actual ${nombreSistema}:`);
        break;
      case "PQ":
        campo = await suggester(["\u{1F535} -> Completado - Archivo", "\u{1F7E2} -> Activo", "\u{1F7E1} -> Por Iniciar, En Pausa", "\u{1F534} -> Cancelado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado actual ${this.nota.titulo}:`);
        break;
      case "Tx":
        campo = await suggester(["\u{1F535} -> Archivo", "\u{1F7E2} -> En Proceso", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Cancelado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado de ${this.nota.titulo}:`);
        break;
      case "AI":
      case "AV":
      case "RR":
        campo = await suggester(["\u{1F535} -> Archivado", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado actual ${this.nota.titulo}:`);
        break;
      case "AY":
        campo = await suggester(["\u{1F535} -> A\xF1o Archivado", "\u{1F7E2} -> A\xF1o activo", "\u{1F7E1} -> A\xF1o en planeaci\xF3n", "\u{1F534} -> Nota por arreglar"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `Estado del a\xF1o elegido:`);
        break;
      case "OCA":
      case "CTI":
        campo = "\u{1F7E1}";
        break;
      default:
        campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En desarrollo", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el estado de la nota:");
    }
    if (campo === null) {
      new import_obsidian22.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    return campo;
  }
  /* 
  ----------------------------------------------------------------
  Metodo que tiene dos propositos, inicialmente se creó para  devolver
  el filename de las AI, AV, nAV, Ax y PGTD y desde la plantilla 
  cambiarle el nombre al archivo. Sin embargo, se modificó y ahora sirve
  para cuando una plantilla tiene un nombre especial, porque es resultado
  de un proceso previo y se debe traer información para que se genere la
  nota de la plantilla adecuadamente.  
  ----------------------------------------------------------------
  */
  async getFilename() {
    let fileName;
    switch (this.infoSubsistema.type) {
      case "AI":
        if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
          fileName = `${this.infoSubsistema.folder}/Otras/${this.nota.titulo}`;
        } else {
          fileName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.nota.titulo}`;
        }
        break;
      case "AV":
        debugger;
        if (this.infoSubsistema.hasOwnProperty("fileName")) {
          const partes2 = this.infoSubsistema.fileName.split(" -- ");
          this.nota.trimestre = partes2[0];
          this.nota.titulo = partes2[1];
          this.nota.areaVida = partes2[1];
          this.nota.grupo = partes2[2];
        }
        fileName = `${this.nota.trimestre} - ${this.nota.titulo}`;
        break;
      case "nAV":
        const partes = this.nota.fileName.split(" - ");
        this.nota.grupo = partes[0];
        this.nota.areaVida = partes[1];
        fileName = `${partes[1]}`;
        break;
      case "PGTD":
      case "PQ":
        if (this.infoSubsistema.hasOwnProperty("fileName")) {
          let regexFileName = /([^/]+)\s-\s(\d+)\.md$/;
          let partes2 = this.infoSubsistema.fileName.match(regexFileName);
          let type2 = partes2[1];
          let id = partes2[2];
          switch (type2) {
            case "Proyecto para Objetivo Compass Anual":
              let nota = await this.getOrigen("ObjCompassAnual", id);
              const regex = /\[\[\s*(.*?)\s*\]\]/;
              this.nota.areaVida = nota == null ? void 0 : nota.areaVida.match(regex)[1];
              this.nota.areaInter\u00E9s = nota.areaInteres;
              this.nota.asunto = { siAsunto: true, nombre: nota.file.basename };
              this.nota.trimestre = nota == null ? void 0 : nota.trimestre.match(regex)[1];
              this.nota.nivelP = 0;
              fileName = this.infoSubsistema.fileName;
              break;
          }
        }
        break;
    }
    return fileName;
  }
  async getTrimestre() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await this.findMainFilesWithState("TQ");
    switch (tipoSistema) {
      case "AV":
      case "PQ":
        trimestre = await suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
        break;
      case "OCA":
        trimestre = await suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
        );
        break;
      case "CTI":
        trimestre = await suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFDe qu\xE9 trimestre del ${this.nota.a\u00F1o} es esta planeaci\xF3n?`
        );
        break;
      default:
        trimestre = await suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.path), false, `Trimestre del ${nombreSistema}:`);
    }
    if (trimestre === null) {
      new import_obsidian22.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getA\u00F1o() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await this.findMainFilesWithState("AY");
    switch (tipoSistema) {
      case "CAC":
      case "CAI":
      case "CTI":
        a\u00F1o = await suggester(a\u00F1os.map((b) => b.file.basename), a\u00F1os.map((b) => b.file.basename), false, `Selecciona el a\xF1o que deseas para el ${nombreSistema}:`);
        break;
      case "AY":
        const a\u00F1oActual = (/* @__PURE__ */ new Date()).getFullYear();
        const arregloA\u00F1os = [a\u00F1oActual - 2, a\u00F1oActual - 1, a\u00F1oActual, a\u00F1oActual + 1, a\u00F1oActual + 2];
        a\u00F1o = await suggester(arregloA\u00F1os, arregloA\u00F1os, false, `Selecciona el a\xF1o que vamos a crear.`);
        break;
      case "OCA":
        debugger;
        let nombreArchivo = this.infoSubsistema.fileName;
        const regex = /\/(\d{4})/;
        const resultado = nombreArchivo.match(regex);
        if (resultado && resultado[1]) {
          a\u00F1o = resultado[1];
        } else {
          return null;
        }
        break;
      default:
    }
    if (a\u00F1o === null) {
      new import_obsidian22.Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getRename() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let newName, name, folder;
    debugger;
    switch (this.infoSubsistema.type) {
      case "Ax":
        newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        name = `${this.nota.fileName}`;
        break;
      case "AI":
      case "PGTD":
        if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
          newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
          folder = `${this.infoSubsistema.folder}/Otras`;
        } else {
          newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
          folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
        }
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "AV":
        newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.nota.filename}.md`;
        name = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.nota.fileName}.md`;
        break;
      case "RR":
        newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        folder = `${this.infoSubsistema.folder}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "PQ":
        debugger;
        let folderAV = Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida;
        newName = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}`;
        debugger;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "Tx":
        let fecha = window.moment(this.nota.fecha, "YYYY-MM-DD dddd HH:mm");
        let fechaY = fecha.format("YYYY");
        let fechaMes = fecha.format("MM - MMMM");
        debugger;
        newName = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        folder = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "CAC":
        newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Desempe\xF1o ${this.nota.a\u00F1o}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "CAI":
        debugger;
        newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Planeaci\xF3n ${this.nota.a\u00F1o}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "CTI":
        newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Planeaci\xF3n ${this.nota.trimestre}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "AY":
        newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}.md`;
        folder = `${this.infoSubsistema.folder}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "OCA":
        newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      case "CPE":
        debugger;
        newName = `${this.infoSubsistema.folder}/${this.nota.fecha.slice(0, 4)}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        folder = `${this.infoSubsistema.folder}/${this.nota.fecha.slice(0, 4)}`;
        await this.crearCarpeta(folder);
        name = `${this.nota.fileName}`;
        break;
      default:
        break;
    }
    const file = app.vault.getAbstractFileByPath(name);
    const existe = app.vault.getAbstractFileByPath(newName);
    debugger;
    try {
      if (existe instanceof import_obsidian22.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian22.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          this.nota.borrarNota = true;
          return false;
        }
      } else {
        if (file instanceof import_obsidian22.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      return false;
    }
  }
  async getAreaVida() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipo = this.infoSubsistema.type;
    let nombreTipo = this.infoSubsistema.typeName;
    let areasVida2 = {};
    let areaVida;
    let noAV = {};
    noAV.file = {};
    noAV.areaVida = "No es de ning\xFAn Area de Vida";
    noAV.file.basename = "No es de ning\xFAn Area de Vida";
    debugger;
    if (!this.nota.asuntoDefinido) {
      switch (tipo) {
        case "AI":
          if (this.nota.areaInteres == "") {
            areasVida2 = await this.findMainFilesWithState("AV");
            areasVida2.push(noAV);
            areaVida = await suggester(areasVida2.map((b) => b.areaVida), areasVida2.map((b) => b.areaVida), false, `A que Area de Vida pertenece esta ${nombreTipo}:`);
          } else {
            areaVida = this.nota.areaVida;
          }
          break;
        case "PQ":
          areasVida2 = await this.findMainFilesWithState("AV", this.nota.trimestre);
          debugger;
          areaVida = await suggester(areasVida2.map((b) => b.file.basename), areasVida2.map((b) => [b.areaVida, b.file.basename]), false, `A que Area de Vida pertenece esta(e) ${nombreTipo}:`);
          this.nota.nivelP = 0;
          break;
        case "OCA":
          debugger;
          let nombreArchivo = this.infoSubsistema.fileName;
          const regex = /Objetivo para (.+)\.md$/;
          const resultado = nombreArchivo.match(regex);
          if (resultado && resultado[1]) {
            areaVida = resultado[1];
          } else {
            return null;
          }
          break;
        default:
          areasVida2 = await this.findMainFilesWithState("AV");
          debugger;
          areasVida2.push(noAV);
          areaVida = await suggester(areasVida2.map((b) => b.file.basename), areasVida2.map((b) => b.file.basename), false, `A que Area de Vida pertenece esta(e) ${nombreTipo}:`);
          break;
      }
      return areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getAreaInteres() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipo = this.infoSubsistema.type;
    let nombreTipo = this.infoSubsistema.typeName;
    let areasInteres = await this.findMainFilesWithState("AI");
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      switch (tipo) {
        case "AI":
          padreAI = await suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de otra ${nombreTipo}:`);
          if (padreAI) {
            areaInteres = await suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
            if (areaInteres === null) {
              new import_obsidian22.Notice("Sin Area de Interes");
              titulo = "";
              nivel = 0;
              return;
            } else {
              debugger;
              if (areaInteres.areaVida === null) {
                this.nota.areaVida = "No es de ning\xFAn Area de Vida";
              } else {
                this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              titulo = areaInteres.titulo;
              nivel = parseInt(areaInteres.nivelAI) + 1;
            }
          } else {
            titulo = "";
            nivel = 0;
          }
          break;
        case "RR":
        case "Ax":
          padreAI = await suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Area de Inter\xE9s:`);
          if (padreAI) {
            areaInteres = await suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
            if (areaInteres === null) {
              new import_obsidian22.Notice("Sin Area de Interes");
              titulo = "";
              nivel = 0;
              return;
            } else {
              debugger;
              titulo = [areaInteres.titulo];
              if (Array.isArray(areaInteres == null ? void 0 : areaInteres.areaInteres)) {
                titulo = titulo.concat(areaInteres.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else {
                if (areaInteres == null ? void 0 : areaInteres.areaInteres) {
                  titulo.push(areaInteres.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                }
              }
              if (areaInteres == null ? void 0 : areaInteres.areaVida) {
                if (Array.isArray(areaInteres.areaVida)) {
                  this.nota.areaVida = areaInteres.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                } else if (typeof areaInteres.areaVida === "string") {
                  this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                }
              } else {
                this.nota.areaVida = "No es de ning\xFAn \xC1rea de Vida";
              }
              this.nota.asuntoDefinido = true;
              nivel = parseInt(areaInteres.nivelAI);
            }
          } else {
            titulo = "";
            nivel = 0;
          }
          break;
        case "PQ":
          debugger;
          padreAI = await suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Area de Inter\xE9s:`);
          if (padreAI) {
            areaInteres = await suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
            if (areaInteres === null) {
              new import_obsidian22.Notice("Sin Area de Interes");
              titulo = "";
              nivel = 0;
              return;
            } else {
              if (areaInteres.areaVida === null) {
                this.nota.areaVida = "No es de ning\xFAn Area de Vida";
              } else {
                this.nota.areaVida = [];
                this.nota.areaVida[0] = (areaInteres == null ? void 0 : areaInteres.areaVida) ? areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
                this.nota.areaVida[1] = `${this.nota.trimestre} - ${this.nota.areaVida[0]}`;
              }
              this.nota.nivelP = 0;
              this.nota.asuntoDefinido = true;
              arrayAI = [areaInteres.titulo];
              if (Array.isArray(areaInteres.areaInteres)) {
                this.nota.areaInteres = arrayAI.concat(areaInteres.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else {
                if (areaInteres == null ? void 0 : areaInteres.areaInteres) {
                  arrayAI.push(areaInteres.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                }
              }
            }
          } else {
            arrayAI = "";
          }
          return arrayAI;
          break;
        default:
          areaInteres = await suggester(areasInteres.map((b) => b.file.basename), areasVida.map((b) => b.file.basename), false, `A que Area de Vida pertenece esta ${nombreTipo}:`);
          break;
      }
      debugger;
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
  async getProyectoGTD() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipo = this.infoSubsistema.type;
    let nombreTipo = this.infoSubsistema.typeName;
    let notasF = await this.findMainFilesWithState("PGTD");
    let notaF, nivel, titulo;
    if (!this.nota.asuntoDefinido) {
      switch (tipo) {
        case "RR":
        case "Ax":
          let padrePGTD = await suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto GTD?`);
          if (padrePGTD) {
            notaF = await suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `Que Proyecto GTD es padre de ${this.nota.titulo}?:`);
            if (notaF === null) {
              new import_obsidian22.Notice("Sin proyecto GTD definido.");
              titulo = "";
              return;
            } else {
              debugger;
              this.nota.areaInteres = [];
              if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
                this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else {
                if (notaF == null ? void 0 : notaF.areaInteres) {
                  this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                }
              }
              this.nota.areaVida = [];
              if (notaF == null ? void 0 : notaF.areaVida) {
                if (Array.isArray(notaF.areaVida)) {
                  this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                } else if (typeof notaF.areaVida === "string") {
                  this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                }
              } else {
                this.nota.areaVida = "No es de ning\xFAn Area de Vida";
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(notaF == null ? void 0 : notaF.proyectoQ)) {
                this.nota.proyectoQ = notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (notaF == null ? void 0 : notaF.proyectoQ) {
                this.nota.proyectoQ = notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              titulo = [notaF.titulo];
              if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
                titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
                titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.asuntoDefinido = true;
            }
          } else {
            titulo = "";
            nivel = 0;
          }
          break;
        default:
          break;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getProyectoQ() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipo = this.infoSubsistema.type;
    let nombreTipo = this.infoSubsistema.typeName;
    let notasF = await this.findMainFilesWithState("PQ");
    let notaF, nivel, titulo;
    if (!this.nota.asuntoDefinido) {
      switch (tipo) {
        case "RR":
        case "Ax":
          let padreQ = await suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto Q?`);
          if (padreQ) {
            notaF = await suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `Que Proyecto Q es padre de ${this.nota.titulo}?:`);
            if (notaF === null) {
              new import_obsidian22.Notice("Sin proyecto Q definido.");
              titulo = "";
              return;
            } else {
              this.nota.areaInteres = [];
              if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
                this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else {
                if (notaF == null ? void 0 : notaF.areaInteres) {
                  this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                }
              }
              this.nota.areaVida = [];
              if (notaF == null ? void 0 : notaF.areaVida) {
                if (Array.isArray(notaF.areaVida)) {
                  this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                } else if (typeof notaF.areaVida === "string") {
                  this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                }
              } else {
                this.nota.areaVida = "No es de ning\xFAn Area de Vida";
              }
              debugger;
              titulo = [notaF == null ? void 0 : notaF.titulo];
              this.nota.proyectoGTD = "";
              if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
                this.nota.proyectoGTD = notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
                this.nota.proyectoGTD = notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.asuntoDefinido = true;
            }
          } else {
            titulo = "";
            nivel = 0;
          }
          break;
        default:
          break;
      }
      return titulo;
    } else {
      return this.nota.proyectoQ;
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  // Esta función sale de menuOtro, de registro Tiempo. Revisar si debo sincronizarlas.
  async findMainFilesWithState(tipo, parametro) {
    var _a, _b, _c;
    const propertiesTipo = {
      AV: {
        folder: this.plugin.settings.folder_AreasVida
      },
      AI: {
        folder: this.plugin.settings.folder_AreasInteres
      },
      PQ: {
        folder: this.plugin.settings.folder_ProyectosQ
      },
      PGTD: {
        folder: this.plugin.settings.folder_ProyectosGTD
      },
      TI: {
        folder: this.plugin.settings.folder_TemasInteres
      },
      RR: {
        folder: this.plugin.settings.folder_RecursosRecurrentes
      },
      TQ: {
        folder: this.plugin.settings.folder_Trimestral
      },
      AY: {
        folder: this.plugin.settings.folder_Anual
      }
      // Puedes continuar añadiendo más casos aquí
    };
    const activeFilesWithFrontmatter = [];
    let files, trimestre;
    const folder = propertiesTipo[tipo].folder;
    switch (tipo) {
      case "AV":
        debugger;
        if (!parametro) {
          trimestre = DateTime.now().toFormat("yyyy-Qq");
        } else {
          trimestre = parametro;
        }
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo") && file.name.startsWith(trimestre));
        for (let file of files) {
          let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      case "AI":
      case "TQ":
      case "AY":
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      default:
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_c = app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
    }
    return activeFilesWithFrontmatter;
  }
  async crearCarpeta(folderPath) {
    try {
      debugger;
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian22.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo con el cual puedo desde el método fileName obtener la nota 
  de origen de la plantilla que estoy creando, para contar con toda 
  la información que requiero en la creación.
  ----------------------------------------------------------------
  */
  async getOrigen(typeName, id) {
    var _a;
    debugger;
    let folder = this.plugin.settings[`folder_${typeName}`];
    let files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.id) === +id) {
        let activeFile = Object.assign({}, metadata);
        activeFile.file = file;
        return activeFile;
      }
    }
  }
};

// src/modules/noteLifecycleManager/API/addOnsAPI.ts
var addOnsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  crearPrevNext(paginas, pagIndice, dv) {
    let pagina = dv.current();
    let indice;
    for (let a = 0; a < paginas.length; a++) {
      if (paginas[a].file.name == pagina.file.name) {
        indice = a;
      }
    }
    let links = [];
    if (indice == 0 && paginas.length == 1) {
      links[0] = "";
      links[1] = "";
    } else if (indice == 0) {
      links[0] = "";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    } else if (indice == paginas.length - 1) {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "";
    } else {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    }
    dv.paragraph(links[0] + " ==" + dv.func.link(pagIndice.file.path, pagIndice.titulo || pagIndice.file.name) + "== " + links[1]);
  }
  determinarTextoEnlace(pagina) {
    if (pagina.titulo) {
      return pagina.titulo;
    } else if (pagina.aliases && pagina.aliases.length > 0) {
      return pagina.aliases[0];
    } else {
      return pagina.file.name;
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var import_obsidian24 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/cambioHF.ts
var import_obsidian23 = require("obsidian");
var modal_cambioHF = class extends import_obsidian23.Modal {
  constructor(plugin, file) {
    super(plugin.app);
    this.plugin = plugin;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    debugger;
    this.containerEl.classList.add("modalInbox");
    const { contentEl } = this;
    debugger;
    const metadata = this.plugin.app.metadataCache.getFileCache(this.file.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaFinStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaFinal) ? window.moment(metadata.frontmatter.horaFinal, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Cambio hora cierre de registro.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases[0]}"` });
    contentEl.createEl("p", { text: "Hora de cierre registro:" });
    this.horaFinalInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaFinStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraFinalLocal = this.horaFinalInput.value;
    if (!nuevaHoraFinalLocal) {
      new import_obsidian23.Notice("Por favor, seleccione una hora de cierre.");
      return;
    }
    const nuevaHoraFinal = window.moment(nuevaHoraFinalLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      debugger;
      let campos = ["fecha", `horaFinal_${nuevaHoraFinal}`, `tiempoTrabajado_${nuevaHoraFinal}`, "estado_\u{1F535}"];
      let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(this.file, campos);
      this.close();
      new import_obsidian23.Notice("Hora de Finalizaci\xF3n actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian23.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var YAMLUpdaterAPI2 = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoNota = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async actualizarNota(infoNota, campos) {
    var _a;
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const partes = campo.split("_");
        let campoName, functionName;
        let parametro = null;
        if (partes.length > 1) {
          functionName = `get${partes[0].charAt(0).toUpperCase() + partes[0].slice(1)}`;
          campoName = partes[0];
          parametro = partes[1];
        } else {
          campoName = partes[0];
          functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        }
        let metadata = (_a = app.metadataCache.getFileCache(this.infoNota.file)) == null ? void 0 : _a.frontmatter;
        let valorActualCampo = metadata[campoName] || "Sin definir";
        if (typeof this[functionName] === "function") {
          if (parametro !== null) {
            nota[campoName] = await this[functionName](parametro, valorActualCampo);
          } else {
            nota[campoName] = await this[functionName]();
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian24.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async archivarNota(infoNota, campos) {
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      debugger;
      nota.estado = "\u{1F535}";
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian24.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async updateYAMLFields(nota, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in nota) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = nota[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  async getFecha(flag, actual) {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getHoraFinal(parametro, actual) {
    debugger;
    if (parametro === void 0) {
      return this.formatearFecha(/* @__PURE__ */ new Date());
    } else {
      return parametro;
    }
  }
  async getTiempoTrabajado(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getSecId(flag, actual) {
  }
  async getTitulo(flag, actual) {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new import_obsidian24.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion(flag, actual) {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion;
    switch (flag) {
      case "RegistroTiempo":
        descripcion = await prompt("\xBFDetalle del Registro Tiempo:", actual, false, true);
        break;
      default:
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
        break;
    }
    if (descripcion === null) {
      new import_obsidian24.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases(flag, actual) {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto(flag, actual) {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion(flag, actual) {
    var _a;
    let clasificacion2, tagClasificacion2, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion2 = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian24.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 == "Nuevo") {
        clasificacion2 = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian24.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian24.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 == "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion2];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 != "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
  // ->
  async getEstado(parametro, actual) {
    debugger;
    let campo;
    if (parametro == void 0) {
      let suggester = this.tp.system.static_functions.get("suggester");
      campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
      if (campo === null) {
        new import_obsidian24.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename(flag, actual) {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
  async modalCambioHF(nota) {
    debugger;
    let modal = new modal_cambioHF(this.plugin, nota);
    modal.open();
  }
};

// src/modules/noteLifecycleManager/API/menuDiarioAPI.ts
var import_obsidian25 = require("obsidian");
var menuHoyAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA hoy";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "H\xE1bitos",
      "Balance",
      "Registro de Tareas",
      "Notas d\xEDa",
      "Personales"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Balance":
            await this.mostrarBotonBalancePersonal(dv);
            break;
          case "H\xE1bitos":
            await this.mostrarFormularioHabitos(dv);
            break;
          case "Registro de Tareas":
            await this.mostrarBotonRegistroTareas(dv);
            break;
          case "Notas d\xEDa":
            await this.mostrarBotonesNotasD\u00EDa(dv);
            break;
          case "Personales":
            await this.mostrarBotonesNotasPersonales(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian25.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian25.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian25.Notice("Error al actualizar el YAML.");
    }
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian25.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian25.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian25.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian25.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian25.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a, _b;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-registro-diario"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian25.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var import_obsidian27 = require("obsidian");

// src/modules/noteLifecycleManager/views/vistaResumenSemanal.ts
var import_obsidian26 = require("obsidian");
var VistaResumenSemanal = class extends import_obsidian26.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return "vista-resumen-semanal";
  }
  getDisplayText() {
    return "Resumen Semanal";
  }
  getIcon() {
    return "history";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    await this.actualizarVista(fileCache);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(fileCache);
    }, 1e4);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(fileCache) {
    var _a;
    this.contentEl.empty();
    const inicioWStr = (_a = fileCache.frontmatter) == null ? void 0 : _a.inicioW;
    if (!inicioWStr) {
      this.contentEl.setText("La configuraci\xF3n de inicioW no est\xE1 establecida.");
      return;
    }
    const folderDiario = "Estructura/Journal/Diario/Notas";
    const inicioW = DateTime.fromFormat(inicioWStr, "yyyy-MM-dd EEEE", { locale: "es" });
    const finW = inicioW.plus({ days: 6 });
    const archivosDiario = this.app.vault.getFiles().filter((file) => file.path.startsWith(folderDiario) && file.extension === "md");
    const bitacoras = archivosDiario.map((file) => {
      var _a2;
      const fechaArchivo = DateTime.fromISO(file.basename.substring(0, 10));
      const datos = (_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
      return {
        archivo: file.basename,
        path: file.path,
        fechaArchivo,
        datos
      };
    }).filter(({ fechaArchivo }) => fechaArchivo >= inicioW && fechaArchivo <= finW).sort((a, b) => a.fechaArchivo.toMillis() - b.fechaArchivo.toMillis());
    let trim = finW.quarter;
    let sem = finW.weekNumber - (finW.quarter - 1) * 13;
    if (sem == 0) {
      sem = 13;
    }
    const titulo = this.contentEl.createEl("h2", { text: `Resumen de la semana ${sem} - Q${trim} / W${finW.toFormat("WW")}.` });
    const subtitulo = this.contentEl.createEl("h3", { text: `Desde el ${inicioW.toFormat("EEEE, DD")} al ${finW.toFormat("EEEE, DD")}` });
    titulo.style.textAlign = "center";
    subtitulo.style.textAlign = "center";
    const table = document.createElement("table");
    table.className = "table-resumenSemanal";
    const thead = document.createElement("thead");
    const headerRow = document.createElement("tr");
    ["D\xEDa", "Resumen"].forEach((headerText) => {
      const th = document.createElement("th");
      th.textContent = headerText;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);
    const tbody = document.createElement("tbody");
    bitacoras.forEach(({ archivo, path, datos }) => {
      const tr = document.createElement("tr");
      const tdArchivo = document.createElement("td");
      const linkEl = document.createElement("a");
      linkEl.textContent = archivo;
      linkEl.href = path;
      linkEl.onclick = async (ev) => {
        ev.preventDefault();
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian26.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file, { eState: { focus: true } });
        }
      };
      tdArchivo.appendChild(linkEl);
      const tdResumen = document.createElement("td");
      const ul = document.createElement("ul");
      (datos.titulo || ["Sin t\xEDtulo"]).forEach((titulo2) => {
        const li = document.createElement("li");
        li.textContent = titulo2;
        ul.appendChild(li);
      });
      tdResumen.appendChild(ul);
      tr.appendChild(tdArchivo);
      tr.appendChild(tdResumen);
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    this.contentEl.appendChild(table);
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var menuSemanalAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA Semanal";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "Resumen diario",
      "Agradecimientos",
      "Creadas",
      "Modificadas",
      "x Fecha",
      "Tareas Cerradas"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Resumen diario":
            await this.mostrarResumenDiario(dv);
            break;
          case "Agradecimientos":
            await this.mostrarAgradecimientos(dv);
            break;
          case "Creadas":
            await this.mostrarCreadas(dv);
            break;
          case "Modificadas":
            await this.mostrarModificadas(dv);
            break;
          case "x Fecha":
            await this.mostrarxFecha(dv);
            break;
          case "Tareas Cerradas":
            await this.mostrarTareasCerradas(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian27.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian27.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian27.Notice("Error al actualizar el YAML.");
    }
  }
  async mostrarResumenDiario(dv) {
    var _a, _b;
    debugger;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-resumen-semanal"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian27.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian27.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian27.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian27.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian27.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a;
    dv.container.innerHTML = "";
    const fechaHoy = DateTime.fromFormat(app.workspace.getActiveFile().basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        const startOfDay = horaInicio.startOf("day");
        if (startOfDay.ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += metadata.tiempoTrabajado ? parseInt(metadata.tiempoTrabajado) : 0;
        }
      }
    }
    dv.header(3, "Tiempo registrado hoy: " + Duration.fromMillis(totalDia).toFormat("hh:mm:ss"));
    registrosHoy.sort((a, b) => {
      if (typeof a.frontmatter.horaInicio === "string" && typeof b.frontmatter.horaInicio === "string") {
        try {
          const millisA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          const millisB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          return millisB - millisA;
        } catch (e) {
          console.error("Error parsing dates:", e);
          return 0;
        }
      } else {
        console.warn("Invalid date format for sorting:", a.horaInicio, b.horaInicio);
        return 0;
      }
    });
    if (registrosHoy.length > 0) {
      const table = dv.container.createEl("table", { cls: "dataview table" });
      table.style.width = "100%";
      const header = dv.el("tr", "", table);
      ["Registro", "Descripci\xF3n", "Hora Inicio", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((text) => dv.el("th", text, header));
      registrosHoy.forEach((registro) => {
        const row = dv.el("tr", "", table);
        dv.el("td", dv.func.link(registro.path, registro.frontmatter.aliases[0]), row);
        dv.el("td", registro.frontmatter.descripcion ? registro.frontmatter.descripcion : "Sin descripci\xF3n", row);
        dv.el("td", DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a") + " / " + DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a"), row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          let partes = registro.frontmatter.horaInicio.split(" ");
          let fechaHoraISO = `${partes[0]}T${partes[2]}`;
          let inicio = Date.parse(fechaHoraISO);
          let ahora = Date.now();
          let diferencia = ahora - inicio;
          dv.el("td", Duration.fromMillis(diferencia).toFormat("h:mm"), row);
        } else {
          dv.el("td", Duration.fromMillis(registro.frontmatter.tiempoTrabajado).toFormat("h:mm"), row);
        }
        dv.el("td", registro.frontmatter.estado, row);
        dv.el("td", registro.frontmatter.id, row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          dv.el("td", this.createButtonTable("Cerrar", async () => {
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
          }), row);
        } else {
          dv.el("td", this.createButtonTable("Retomar", () => {
            this.retomarTarea(registro.frontmatter.id);
          }), row);
        }
      });
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian27.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/moduloRegistroTiempo/views/vistaRTActivo.ts
var import_obsidian28 = require("obsidian");
var VistaRegistroActivo = class extends import_obsidian28.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-activo";
  }
  getDisplayText() {
    return "Registro Activo";
  }
  getIcon() {
    return "checkmark";
  }
  async onOpen() {
    await this.actualizarVista();
    this.intervalId = setInterval(async () => {
      await this.actualizarVista();
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista() {
    var _a, _b;
    this.containerEl.empty();
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let registrosActivos = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        let registroActivo = { file };
        Object.assign(registroActivo, metadata);
        registrosActivos.push(registroActivo);
      }
    }
    if (registrosActivos.length === 0) {
      this.containerEl.createEl("p", { text: "No hay ning\xFAn registro de tiempo ejecutandose." });
      const botonCrear = this.containerEl.createEl("button");
      botonCrear.textContent = "Nuevo Registro Tiempo";
      botonCrear.onclick = async () => {
        const starterAPInstance = new starterAPI(this.plugin);
        await starterAPInstance.createNote("RegistroTiempo");
      };
      this.containerEl.createEl("div", { cls: "separador" });
      let registrosFinalizados = [];
      for (let file of files) {
        let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
        if ((metadata == null ? void 0 : metadata.estado) === "\u{1F535}") {
          let registroFinalizado = { file };
          Object.assign(registroFinalizado, metadata);
          registrosFinalizados.push(registroFinalizado);
        }
      }
      registrosFinalizados.sort((a, b) => b.id - a.id);
      let top5RegistrosActivos = registrosFinalizados.slice(0, 8);
      if (top5RegistrosActivos.length > 0) {
        this.containerEl.classList.add("table-container");
        const table = this.containerEl.createEl("table", { cls: "table-small" });
        table.style.width = "100%";
        const header = table.createEl("tr");
        ["Alias", "Descripci\xF3n", "Retomar"].forEach((text) => header.createEl("th", { text }));
        top5RegistrosActivos.forEach((registro) => {
          const row = table.createEl("tr");
          const aliasCell = row.createEl("td");
          const aliasLink = aliasCell.createEl("span", {
            text: registro.aliases[0],
            cls: "clickable-alias"
            // Una clase para estilizar, si es necesario
          });
          aliasLink.addEventListener("click", async () => {
            debugger;
            let file = app.vault.getAbstractFileByPath(registro.file.path);
            if (file instanceof import_obsidian28.TFile) {
              await app.workspace.getLeaf(true).openFile(file);
            }
          });
          row.createEl("td", { text: registro.descripcion || "No Definida" });
          const buttonCell = row.createEl("td");
          const button = this.createButtonTable("\u23F1\uFE0F", () => {
            this.registroTiempoAPI.retomarTarea(registro.id);
          });
          buttonCell.appendChild(button);
        });
      } else {
        this.containerEl.createEl("p", { text: "No hay registros finalizados." });
      }
    } else if (registrosActivos.length === 1) {
      this.containerEl.classList.add("vista-RT");
      let alias = registrosActivos[0].aliases ? registrosActivos[0].aliases[0] : "Sin alias";
      let descripcion = registrosActivos[0].descripcion ? registrosActivos[0].descripcion : "Sin descripcion";
      let partes = registrosActivos[0].horaInicio.split(" ");
      let fechaHoraISO = `${partes[0]}T${partes[2]}`;
      let inicio = DateTime.fromISO(fechaHoraISO);
      let ahora = DateTime.now();
      let diferencia = ahora.diff(inicio);
      let tiempo = Duration.fromMillis(diferencia.toMillis()).toFormat("h:mm");
      this.containerEl.createEl("h5", { text: "Tarea Actual" });
      this.containerEl.createEl("span", { text: "Nombre: " });
      const aliasSpan = this.containerEl.createEl("span", {
        text: alias,
        cls: "clickable-alias"
        // Asegúrate de tener esta clase para estilizar el span como un link
      });
      aliasSpan.addEventListener("click", async () => {
        let file = app.vault.getAbstractFileByPath(registrosActivos[0].file.path);
        if (file instanceof import_obsidian28.TFile) {
          await app.workspace.getLeaf(true).openFile(file);
        }
      });
      this.containerEl.createEl("span", { text: "\n" + descripcion });
      this.containerEl.createEl("p", { text: "Esta tarea lleva: " + tiempo });
      const botonera = this.containerEl.createEl("div");
      const botonCerrar = botonera.createEl("button");
      botonCerrar.textContent = "Cerrar Tarea";
      botonCerrar.onclick = async () => {
        await this.registroTiempoAPI.cerrarRegistro(registrosActivos[0].file);
      };
      const botonDetalle = botonera.createEl("button");
      botonDetalle.textContent = "Cambiar Descripci\xF3n";
      botonDetalle.onclick = async () => {
        await this.registroTiempoAPI.detalleRegistro(registrosActivos[0].file);
      };
    } else {
      this.containerEl.createEl("p", { text: " Hay un error con la cantidad de registros activos." });
    }
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
};

// src/modules/moduloGTD/index.ts
var import_obsidian31 = require("obsidian");

// src/modules/moduloGTD/inbox.ts
var import_obsidian30 = require("obsidian");

// src/modules/modales/inboxModal.ts
var import_obsidian29 = require("obsidian");
var BandejaDeEntradaModal = class extends import_obsidian29.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    this.containerEl.classList.add("modalInbox");
    let { contentEl } = this;
    this.titleEl.setText("Bandeja de Entrada");
    let textAreaDiv = contentEl.createEl("div");
    this.inputArea = textAreaDiv.createEl("textarea");
    this.inputArea.setAttribute("placeholder", "Escribe tu tarea aqu\xED...");
    this.inputArea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.altKey) {
        e.preventDefault();
        this.submitForm();
      }
    });
    const activeFile = this.app.workspace.getActiveFile();
    const metadata = this.app.metadataCache.getFileCache(activeFile);
    let nameActiveFile = metadata.aliases ? metadata.aliases[0] : activeFile.basename;
    let checkBoxDiv = contentEl.createEl("div");
    this.checkBox = checkBoxDiv.createEl("input", { type: "checkbox" });
    checkBoxDiv.createEl("label", { text: `Guardar en ${nameActiveFile}` }).prepend(this.checkBox);
    const saveButton = checkBoxDiv.createEl("button", { text: "Guardar" });
    saveButton.addEventListener("click", () => this.submitForm());
  }
  submitForm() {
    const text = this.inputArea.value;
    const saveInCurrent = this.checkBox.checked;
    this.close();
    if (this.resolver) {
      this.resolver({ text, saveInCurrent });
    }
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/moduloGTD/inbox.ts
async function ingresarBandejaEntrada(plugin) {
  let inboxPath = `${plugin.settings.file_Inbox}.md`;
  let inboxFile = app.vault.getAbstractFileByPath(inboxPath);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian30.Notice("No hay archivo activo");
    return;
  }
  let inbox;
  const modal = new BandejaDeEntradaModal(plugin.app);
  modal.open();
  const { text, saveInCurrent } = await modal.waitForInput();
  if (text.length < 3) {
    new import_obsidian30.Notice("Inbox cancelada");
    return;
  }
  let destino = saveInCurrent ? activeFile : inboxFile;
  let hoy = DateTime.now().toFormat("yyyy-MM-dd");
  let hora = DateTime.now().toFormat("HH:mm");
  inbox = `- [ ] \u{1F9E0} ${text} #inbox [created:: ${hoy}] a las ${hora}
`;
  if (destino instanceof import_obsidian30.TFile) {
    if (destino === inboxFile) {
      insertAtStartUsingProcess(inbox, destino).then(() => {
        new import_obsidian30.Notice("Bandeja de entrada actualizada con \xE9xito.");
      }).catch((error) => {
        debugger;
        console.error(error);
        new import_obsidian30.Notice("Error al agregar contenido al inicio del archivo: " + error.message);
      });
    } else {
      await insertInboxAtCursor(inbox);
    }
  }
}
async function insertInboxAtCursor(inbox) {
  debugger;
  const activeLeaf = app.workspace.activeLeaf;
  if (activeLeaf) {
    const editor = activeLeaf.view.sourceMode.cmEditor;
    const cursor = editor.getCursor();
    editor.replaceRange(inbox, cursor);
  }
}
async function insertAtStartUsingProcess(inbox, file) {
  if (!(file instanceof import_obsidian30.TFile))
    return;
  await app.vault.process(file, (content) => {
    const newContent = inbox + content;
    return newContent;
  });
}

// src/modules/moduloGTD/commands.ts
function registerCommands3(plugin) {
  const id1 = plugin.addCommand({
    id: "ingresar-inbox",
    name: "Ingresar Bandeja de Entrada -> Inbox",
    callback: async () => {
      await ingresarBandejaEntrada(plugin);
    }
  });
  plugin.registeredCommandIdsGTD.push(id1.id);
}
function deactivateCommands3(plugin) {
  if (!plugin.registeredCommandIdsGTD)
    return;
  plugin.registeredCommandIdsGTD.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloGTD/index.ts
var ModuloGTD = class {
  constructor(plugin) {
    this.moduloGTD = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloGTD)
      return;
    registerCommands3(this.plugin);
  }
  deactivate() {
    if (!this.moduloGTD)
      return;
    deactivateCommands3(this.plugin);
  }
};

// src/modules/noteLifecycleManager/API/subsistemasAPI.ts
var import_obsidian32 = require("obsidian");
var subsistemasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearAV(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAV(dv);
    };
  }
  async mostrarBotonCrearAVTrimestral(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida del trimestre";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAVTrimestre(dv);
    };
  }
  async procesarAV(dv) {
    var _a, _b;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let q = await suggester(
      qCreados.map((b) => b.trimestre),
      qCreados.map((b) => b),
      true,
      `De que trimestre vamos a procesar tus Areas de Vida`
    );
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian32.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian32.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAV()
  async procesarAVTrimestre(dv) {
    var _a;
    let q = {};
    q.trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian32.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian32.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAVTrimestre()
  //P2 areaVida Q Existe?
  async validacionAVQ(fullFolderPath, q, areaVida) {
    const pathAVQ = `${fullFolderPath}/${q.trimestre} - ${areaVida.av}.md`;
    const fileAVQ = app.vault.getAbstractFileByPath(pathAVQ);
    debugger;
    if (fileAVQ instanceof import_obsidian32.TFile) {
      let suggester = this.plugin.tp.system.static_functions.get("suggester");
      let nextStep = await suggester(
        [
          "Actualizar estado del AV",
          "Borrar y Crear de nuevo el AV",
          "Dejar el AV como est\xE1 "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBF${q.trimestre} ${areaVida.av} ya existe. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          await this.actualizarAVQ(fileAVQ);
          break;
        case "del+cre":
          await this.borrarAVQ(fileAVQ);
          await this.agregarAVQ(areaVida, q.trimestre);
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con ${fileAVQ.basename}`);
          break;
      }
    } else {
      debugger;
      await this.agregarAVQ(areaVida, q.trimestre);
    }
  }
  // P3 Agregar nodoAreaVida?
  async agregarNodoAreaVida(areaVida) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let agregar = await suggester(
      ["Si", "No"],
      [true, false],
      true,
      `\xBFDeseas agregar ${areaVida.av} a tu sistema de gesti\xF3n?`
    );
    if (agregar) {
      const filePath = `Plantillas/${this.plugin.settings[`folder_AreasVida`]}/Plt - nodoAreasVida.md`;
      const template = app.vault.getAbstractFileByPath(filePath);
      if (template instanceof import_obsidian32.TFile) {
        console.log("Archivo nodoAreaVida template encontrado:", template);
      } else {
        console.log("Archivo template nodoAreaVida no encontrado.");
      }
      const filename = areaVida.grupo + " - " + areaVida.av;
      let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
      await this.crearCarpeta(folderPath);
      const folder = app.vault.getAbstractFileByPath(folderPath);
      let crearNota;
      crearNota = this.plugin.tp.file.static_functions.get("create_new");
      try {
        let nota = await crearNota(template, filename, false, folder);
        return true;
      } catch (error) {
        console.error("Error creando NodoAreaVida: ", error);
        return error;
      }
    } else {
      return false;
    }
  }
  async agregarAVQ(areaVida, trimestre) {
    const filePath = `Plantillas/${this.plugin.settings.folder_AreasVida}/Plt - AreasVida.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (!(template instanceof import_obsidian32.TFile)) {
      console.log("Archivo no encontrado.");
      return false;
    }
    console.log("Archivo encontrado:", template);
    const filename = `${trimestre} -- ${areaVida.av} -- ${areaVida.grupo}`;
    let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
    const folder = app.vault.getAbstractFileByPath(folderPath);
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    try {
      await crearNota(template, filename, false, folder);
      return true;
    } catch (error) {
      console.error("Error creando AreaVida: ", error);
      return false;
    }
  }
  async borrarAVQ(fileAVQ) {
    console.log(`Logica de borrado de ${fileAVQ.basename}`);
    try {
      if (fileAVQ instanceof import_obsidian32.TFile) {
        await app.vault.delete(fileAVQ);
        console.log(`${fileAVQ.basename} ha sido borrado con \xE9xito.`);
      } else {
        console.error(
          `${fileAVQ.basename} no es un archivo v\xE1lido o no existe.`
        );
      }
    } catch (err) {
      console.error(`Error al intentar borrar ${fileAVQ.basename}:`, err);
    }
  }
  async actualizarAVQ(fileAVQ) {
    console.log(`Logica de actualizaci\xF3n de estado de ${fileAVQ.basename}`);
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let metadataCache = app.metadataCache.getFileCache(fileAVQ);
    let estadoActual = "";
    let nuevoEstado = "";
    if (metadataCache.frontmatter && metadataCache.frontmatter.hasOwnProperty("estado")) {
      estadoActual = metadataCache.frontmatter.estado;
    } else {
      console.log("No se encontr\xF3 el estado actual en el frontmatter.");
      return;
    }
    try {
      nuevoEstado = await suggester(
        ["\u{1F535} -> Archivado", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"],
        // opciones para mostrar
        ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"],
        // valores a retornar
        false,
        // permite selección múltiple
        `${fileAVQ.basename} est\xE1 ${estadoActual}. Asignar estado:`
        // mensaje
      );
      if (!nuevoEstado) {
        console.log("No se seleccion\xF3 un nuevo estado.");
        return;
      }
      await app.fileManager.processFrontMatter(fileAVQ, (frontmatter) => {
        if (frontmatter.hasOwnProperty("estado")) {
          frontmatter.estado = nuevoEstado;
          console.log("Estado actualizado con \xE9xito a:", nuevoEstado);
        }
      });
    } catch (err) {
      console.error("Error al actualizar el estado en el frontmatter:", err);
    }
  }
  async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian32.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // PARA PROCESAR LOS COMPASS
  // Función para crear y mostrar el botón de procesar Objetivos de las AV anuales en el proceso de Compass.
  async mostrarBotonCompassAnual(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Anual";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassAnual(dv);
    };
  }
  async mostrarBotonCompassTrimestral(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Trimestrales";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassTrimestral(dv);
    };
  }
  async procesarCompassAnual(dv) {
    var _a;
    let a\u00F1o = dv.current().a\u00F1o;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian32.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    debugger;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian32.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoAnual(a\u00F1o, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Anual
  async procesarCompassTrimestral(dv) {
    var _a;
    debugger;
    let trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian32.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian32.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoTrimestral(trimestre, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Trimestral 
  async objetivoAnual(a\u00F1o, areaVida) {
    var _a;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if ((metadata == null ? void 0 : metadata.a\u00F1o) === a\u00F1o && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${a\u00F1o}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
        );
      }
    }
  }
  // Método objetivoAnual.
  async objetivoTrimestral(trimestre, areaVida) {
    var _a, _b;
    debugger;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if (((_b = metadata == null ? void 0 : metadata.trimestre) == null ? void 0 : _b.path) && typeof (metadata.trimestre.path === "string") && metadata.trimestre.path.includes(trimestre) && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${trimestre}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
        );
      }
    }
  }
  // Método objetivoTrimestral.
  /* 
  ----------------------------------------------------------------
  Método que crea el botón que se agrega en la tabla de proyectos en el 
  Compass Anual, para crear el proyecto a cada Objetivo.
  ----------------------------------------------------------------
  */
  createButtonTable(dv, objetivo) {
    const buttonContainer = dv.el("div", "");
    const button = dv.el("button", "Nuevo Proyecto");
    button.addEventListener("click", async (event) => {
      event.preventDefault();
      await this.crearProyectoObjetivo(dv, objetivo);
    });
    buttonContainer.appendChild(button);
    return buttonContainer;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado por el boton de la tabla del compass anual "Nuevo Proyecto" 
  para crear proyecto a un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoObjetivo(dv, objetivo) {
    debugger;
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let tipoProyecto = await suggester(
      ["Proyecto GTD", "Proyecto de Q"],
      [true, false],
      true,
      `\xBFEl proyecto ${objetivo.file.name} requiere un Proyecto GTD o Proyecto de Q?`
    );
    let proyecto;
    if (tipoProyecto) {
      proyecto = this.crearProyectoGTD(objetivo);
    } else {
      debugger;
      const regexTrim = /\[?\[?(\d{4}-Q[1-4])\]?\]?/g;
      const trimestre = objetivo.trimestre.path.match(regexTrim);
      const confirmaTrim = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFVamos a crear el proyecto ${objetivo.file.name} en el trimestre ${trimestre}?`
      );
      if (!confirmaTrim) {
        const q = await this.establecerTrimestre("objetivo del a\xF1o");
        debugger;
        await this.actualizarYAMLs({ trimestre: `[[${q.trimestre}]]` }, objetivo.file.path);
      }
      proyecto = await this.crearProyectoQ(objetivo);
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que inicializa la creación de la plantilla de objetivo Compass.
  ----------------------------------------------------------------
  */
  async crearObjetivo(areaVida, a\u00F1o) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `${a\u00F1o} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  async crearObjetivoTrimestre(areaVida, trimestre) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Trimestre ${trimestre} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado desde crearProyectoObjetivo(dv, objetivo)
  Esté método hace parte del proceso de Compass Anual.
  Facilita la creación del un proyecto de Q para un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoQ(objetivo) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosQ"]}/Plt - ProyectosQ.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  async crearProyectoGTD(objetivo) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosGTD"]}/Plt - ProyectosGTD.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado en el proceso de Compass Anual, cuando elijo volver
  a crear todos los proyectos de un area de vida para un año.
  ----------------------------------------------------------------
  */
  async borrarObjetivos(objetivos) {
    debugger;
    for (let objetivo of objetivos) {
      try {
        await app.vault.delete(objetivo.file);
        console.log(`Archivo borrado: ${objetivo.file.path}`);
      } catch (error) {
        console.error(`Error al borrar el archivo ${objetivo.file.path}: ${error}`);
      }
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que permite para cualquier caso en el que se requiera elegir 
  un trimestre para continuar un proceso, hacer la verificación sobre los
  trimestres que esten creados a partir de la nota TQ.  
  ----------------------------------------------------------------
  */
  async establecerTrimestre(temaTrimestre) {
    var _a;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    try {
      let q = await suggester(
        qCreados.map((b) => b.trimestre),
        qCreados.map((b) => b),
        true,
        `De que trimestre vamos a procesar tus ${temaTrimestre}`
      );
      if (q === void 0) {
        console.log("Operaci\xF3n cancelada por el usuario.");
        return;
      }
      console.log("El usuario seleccion\xF3:", q);
      return q;
    } catch (error) {
      console.error("Error en el suggester:", error);
    }
  }
  /* 
  ----------------------------------------------------------------
  Con este método puedo actualizar valores en las notas ya existentes.
  Lo utilizo en esta clase, para actualizar el trimestre.
  Esta función solo actualiza, no crea el campos si no existe. 
  ----------------------------------------------------------------
  */
  async actualizarYAMLs(campos, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in campos) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = campos[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
};

// src/modules/noteLifecycleManager/views/vistaRegistroDiario.ts
var import_obsidian33 = require("obsidian");
var VistaRegistroDiario = class extends import_obsidian33.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-diario";
  }
  getDisplayText() {
    return "Registro Diario";
  }
  getIcon() {
    return "file-clock";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    await this.actualizarVista(activeFile);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(activeFile);
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(activeFile) {
    var _a;
    this.contentEl.empty();
    const fechaHoy = DateTime.fromFormat(activeFile.basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        if (horaInicio.startOf("day").ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += parseInt(metadata.tiempoTrabajado || "0");
        }
      }
    }
    registrosHoy.sort((a, b) => {
      let fechaA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      let fechaB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      return fechaA - fechaB;
    });
    const titulo = this.contentEl.createEl("h2", { text: `Registros de tiempo del ${fechaHoy.toFormat("EEEE, DD")}.` });
    titulo.style.textAlign = "center";
    const table = this.contentEl.createEl("table", { cls: "table-resumenSemanal" });
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    ["Registro", "Descripci\xF3n", "Periodo", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((header) => {
      headerRow.createEl("th", { text: header });
    });
    const tbody = table.createEl("tbody");
    registrosHoy.forEach((registro) => {
      const row = tbody.createEl("tr");
      this.fillRowWithData(row, registro);
    });
    this.contentEl.appendChild(table);
  }
  fillRowWithData(row, registro) {
    const tdArchivo = row.createEl("td");
    const linkEl = document.createElement("a");
    linkEl.textContent = registro.frontmatter.aliases[0];
    linkEl.href = "#";
    linkEl.addEventListener("click", async (ev) => {
      ev.preventDefault();
      const file = this.app.vault.getAbstractFileByPath(registro.path);
      if (file instanceof import_obsidian33.TFile) {
        await this.app.workspace.getLeaf(true).openFile(file, { focus: true });
      }
    });
    tdArchivo.appendChild(linkEl);
    row.createEl("td", { text: registro.frontmatter.descripcion });
    row.createEl("td", { text: `${DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")} / ${DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")}` });
    const tdPeriodo = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      let ahora = DateTime.local();
      let inicio = DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
      let duracion = ahora.diff(inicio, ["days", "hours", "minutes"]);
      tdPeriodo.textContent = this.formatDuration(duracion);
    } else {
      let tiempoTrabajado = this.formatDuration(registro.frontmatter.tiempoTrabajado);
      tdPeriodo.textContent = tiempoTrabajado;
    }
    row.createEl("td", { text: registro.frontmatter.estado });
    row.createEl("td", { text: registro.frontmatter.id });
    const actionCell = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      actionCell.appendChild(this.createButtonTable("Cerrar", async () => {
        await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
      }));
    } else {
      actionCell.appendChild(this.createButtonTable("Retomar", () => {
        this.retomarTarea(registro.frontmatter.id);
      }));
    }
  }
  // Función auxiliar para formatear la duración de Luxon a un formato legible
  formatDuration(ms) {
    if (ms === null || ms === void 0 || isNaN(ms)) {
      return "No definido";
    } else {
      let minutos = Math.floor(ms / (1e3 * 60));
      let horas = Math.floor(minutos / 60);
      minutos = minutos % 60;
      let dias = Math.floor(horas / 24);
      horas = horas % 24;
      if (dias > 0) {
        return `${dias} d ${horas} h ${minutos} min`;
      } else if (horas > 0) {
        return `${horas} h ${minutos} min`;
      } else {
        return `${minutos} min`;
      }
    }
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian33.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/GPThora/GPThora.ts
var import_obsidian34 = require("obsidian");
var GPThora = class {
  constructor(app2) {
    this.app = app2;
  }
  onload() {
    this.app.commands.addCommand({
      id: "show-local-time",
      name: "Mostrar Hora Local",
      callback: () => this.showLocalTimeModal()
    });
  }
  showLocalTimeModal() {
    const modal = new LocalTimeModal(this.app);
    modal.open();
  }
};
var LocalTimeModal = class extends import_obsidian34.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const now2 = /* @__PURE__ */ new Date();
    const hours = now2.getHours() % 12 || 12;
    const minutes = now2.getMinutes().toString().padStart(2, "0");
    const ampm = now2.getHours() >= 12 ? "PM" : "AM";
    const timeString = `${hours}:${minutes} ${ampm}`;
    contentEl.createEl("h1", { text: "Hora Local" });
    contentEl.createEl("p", { text: timeString });
    contentEl.style.backgroundColor = "#2E3440";
    contentEl.style.color = "#D8DEE9";
    contentEl.style.padding = "20px";
    contentEl.style.textAlign = "center";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian35.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.moduloGTD = null;
    //moduloTerceros: ModuloTerceros | null = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.registeredCommandIdsGTD = [];
    this.registeredCommandIds_Terceros = [];
    this.ribbonButtonRT = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    await this.loadSettings();
    this.tp = this.getTp();
    this.registerView("vista-registro-activo", (leaf) => new VistaRegistroActivo(leaf, this));
    this.registerView("vista-resumen-semanal", (leaf) => new VistaResumenSemanal(leaf, this));
    this.registerView("vista-registro-diario", (leaf) => new VistaRegistroDiario(leaf, this));
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.addOnsAPI = new addOnsAPI(this);
    this.YAMLUpdaterAPI = new YAMLUpdaterAPI2(this);
    this.menuHoyAPI = new menuHoyAPI(this);
    this.menuSemanalAPI = new menuSemanalAPI(this);
    this.subsistemasAPI = new subsistemasAPI(this);
    this.newInbox = ingresarBandejaEntrada.bind(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.moduloGTD = new ModuloGTD(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
    this.registerGPThora();
  }
  registerGPThora() {
    const gptHora = new GPThora(this.app);
    gptHora.onload();
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
    if (this.settings.moduloGTD) {
      (_g = this.moduloGTD) == null ? void 0 : _g.activate(this);
    } else {
      (_h = this.moduloGTD) == null ? void 0 : _h.deactivate(this);
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
  getTp() {
    debugger;
    if (!this.app || !this.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("Instancia de tp cargada satisfactoriamente en Plugin");
    return tp;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzVGFiLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhckNhcnBldGEudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhclBsYW50aWxsYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL3V0aWxzL2ZpbGVMaW5rTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL3V0aWxzL2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGUudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL2FjdGl2YWRvcmVzLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS91aS9yaWJib25CdXR0b24udHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3VpL21vZGFsLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS9zZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0FsaWFzU3RhdHVzQmFyL3N0YXR1c0Jhci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9yaWJib25NZW51LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3V0aWxzLnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvc2VsZWNjaW9uTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL21vZGFsX0Fob3JhLnRzIiwgInNyYy9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9tZW51T3Ryby50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL2Z1enp5U2VsZWN0T3JDcmVhdGUudHMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9lcnJvcnMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2Zvcm1hdHMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvem9uZXMvc3lzdGVtWm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL0lBTkFab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9sb2NhbGUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9maXhlZE9mZnNldFpvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9pbnZhbGlkWm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvem9uZVV0aWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9zZXR0aW5ncy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvaW52YWxpZC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvY29udmVyc2lvbnMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL3V0aWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2VuZ2xpc2guanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2Zvcm1hdHRlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvcmVnZXhQYXJzZXIuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9kdXJhdGlvbi5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ludGVydmFsLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW5mby5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZGlmZi5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZGlnaXRzLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC90b2tlblBhcnNlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2RhdGV0aW1lLmpzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvYWRkT25zQVBJLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvY2FtYmlvSEYudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVEaWFyaW9BUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVTZW1hbmFsQVBJLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL3ZpZXdzL3Zpc3RhUmVzdW1lblNlbWFuYWwudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdmlld3MvdmlzdGFSVEFjdGl2by50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9HVEQvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvR1REL2luYm94LnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvaW5ib3hNb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9HVEQvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N1YnNpc3RlbWFzQVBJLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL3ZpZXdzL3Zpc3RhUmVnaXN0cm9EaWFyaW8udHMiLCAic3JjL21vZHVsZXMvR1BUaG9yYS9HUFRob3JhLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIgIGltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbiAgaW1wb3J0IHsgUGx1Z2luTWFpblNldHRpbmdzVGFiIH0gZnJvbSAnLi9zZXR0aW5nc1RhYic7XG4gIGltcG9ydCB7IE1vZHVsb0Jhc2UgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXhcIjtcbiAgaW1wb3J0IHthY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGF9IGZyb20gXCIuL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL2FjdGl2YWRvcmVzXCJcbiAgaW1wb3J0IHsgU3RhdHVzQmFyRXh0ZW5zaW9uIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9BbGlhc1N0YXR1c0Jhci9zdGF0dXNCYXJcIjtcbiAgaW1wb3J0IHsgTW9kdWxvUmVnaXN0cm9UaWVtcG8gfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4XCI7XG4gIGltcG9ydCB0eXBlIHsgUGx1Z2luTWFpblNldHRpbmdzIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BsdWdpbk1haW5TZXR0aW5ncyc7XG4gIGltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncyc7XG4gIGltcG9ydCB7cmVnaXN0cm9UaWVtcG9BUEl9IGZyb20gJy4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUEknXG4gIGltcG9ydCB7IHN0YXJ0ZXJBUEl9IGZyb20gJy4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSSc7XG4gIGltcG9ydCB7IGFkZE9uc0FQSSB9IGZyb20gJy4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvYWRkT25zQVBJJztcbiAgaW1wb3J0IHsgWUFNTFVwZGF0ZXJBUEkgfSBmcm9tICcuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJJztcbiAgaW1wb3J0IHsgbWVudUhveUFQSX0gZnJvbSAnLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9tZW51RGlhcmlvQVBJJ1xuICBpbXBvcnQgeyBtZW51U2VtYW5hbEFQSSB9IGZyb20gJy4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudVNlbWFuYWxBUEknO1xuICBpbXBvcnQgeyBWaXN0YVJlZ2lzdHJvQWN0aXZvIH0gZnJvbSAnLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3ZpZXdzL3Zpc3RhUlRBY3Rpdm8nO1xuICBpbXBvcnQgeyBNb2R1bG9HVEQgfSBmcm9tICcuL21vZHVsZXMvbW9kdWxvR1REJztcbiAgLy9pbXBvcnQgeyBNb2R1bG9UZXJjZXJvcyB9IGZyb20gJy4vbW9kdWxlcy9tb2R1bG9fVGVyY2Vyb3MnO1xuICBpbXBvcnQgeyBpbmdyZXNhckJhbmRlamFFbnRyYWRhIH0gZnJvbSAnLi9tb2R1bGVzL21vZHVsb0dURC9pbmJveCc7XG4gIGltcG9ydCB7IHN1YnNpc3RlbWFzQVBJIH0gZnJvbSAnLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdWJzaXN0ZW1hc0FQSSc7XG4gIGltcG9ydCB7IFZpc3RhUmVzdW1lblNlbWFuYWwgfSBmcm9tICcuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZXN1bWVuU2VtYW5hbCc7XG4gIGltcG9ydCB7IFZpc3RhUmVnaXN0cm9EaWFyaW8gfSBmcm9tICcuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZWdpc3Ryb0RpYXJpbyc7XG4gIGltcG9ydCBHUFRob3JhIGZyb20gJy4vbW9kdWxlcy9HUFRob3JhL0dQVGhvcmEnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYW5hZ2VtZW50UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgc2V0dGluZ3M6IFBsdWdpbk1haW5TZXR0aW5ncyB8IHVuZGVmaW5lZDtcbiAgLy8gRGVjbGFyYSB1bmEgcHJvcGllZGFkIGBzZXR0aW5nc2AgcGFyYSBhbG1hY2VuYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIGRlbCBwbHVnaW4uXG4gIHN0YXR1c0JhckV4dGVuc2lvbjogU3RhdHVzQmFyRXh0ZW5zaW9uIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb1JlZ2lzdHJvVGllbXBvOiBNb2R1bG9SZWdpc3Ryb1RpZW1wbyB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9CYXNlOiBNb2R1bG9CYXNlIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb0dURCA6IE1vZHVsb0dURCB8IG51bGwgPSBudWxsO1xuICAvL21vZHVsb1RlcmNlcm9zOiBNb2R1bG9UZXJjZXJvcyB8IG51bGwgPSBudWxsO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc1JUOiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc01COiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc0dURDogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNfVGVyY2Vyb3M6IHN0cmluZ1tdID0gW107XG4gIHJpYmJvbkJ1dHRvblJUOiBSZXR1cm5UeXBlPFBsdWdpblsnYWRkUmliYm9uSWNvbiddPiB8IG51bGwgPSBudWxsO1xuICBhcHA6IGFueTtcbiAgcmVnaXN0cm9UaWVtcG9BUEk6IHJlZ2lzdHJvVGllbXBvQVBJIHwgdW5kZWZpbmVkO1xuICBzdGFydGVyQVBJOiBzdGFydGVyQVBJIHwgdW5kZWZpbmVkO1xuICBhZGRPbnNBUEk6IGFkZE9uc0FQSSB8IHVuZGVmaW5lZDtcbiAgbWVudUhveUFQSTogbWVudUhveUFQSSB8IHVuZGVmaW5lZDtcbiAgbWVudVNlbWFuYWxBUEk6IG1lbnVTZW1hbmFsQVBJIHwgdW5kZWZpbmVkO1xuICBzdWJzaXN0ZW1hc0FQSTogc3Vic2lzdGVtYXNBUEkgfCB1bmRlZmluZWQ7XG4gIG5ld0luYm94IDogYW55O1xuICB0cDogYW55O1xuICAvLyBEZWNsYXJhIHVuYSBwcm9waWVkYWQgcGFyYSBtYW50ZW5lciB1bmEgaW5zdGFuY2lhIGRlIGBTdGF0dXNCYXJFeHRlbnNpb25gLlxuICBcblxuICAgIGFzeW5jIG9ubG9hZCgpIHsgXG4gICAgICAgIFxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICB0aGlzLnRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIiwobGVhZikgPT4gbmV3IFZpc3RhUmVnaXN0cm9BY3Rpdm8obGVhZiwgdGhpcykpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiLCAobGVhZikgPT4gbmV3IFZpc3RhUmVzdW1lblNlbWFuYWwobGVhZiwgdGhpcykpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiLCAobGVhZikgPT4gbmV3IFZpc3RhUmVnaXN0cm9EaWFyaW8obGVhZiwgdGhpcykpO1xuXG4gICAgICAgIC8vIGNhcmdhciBBUEkgcmVnaXN0cm8gVGllbXBvXG4gICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcyk7XG4gICAgICAgIHRoaXMuc3RhcnRlckFQSSA9IG5ldyBzdGFydGVyQVBJKHRoaXMpO1xuICAgICAgICB0aGlzLmFkZE9uc0FQSSA9IG5ldyBhZGRPbnNBUEkodGhpcyk7XG4gICAgICAgIHRoaXMuWUFNTFVwZGF0ZXJBUEkgPSBuZXcgWUFNTFVwZGF0ZXJBUEkodGhpcyk7XG4gICAgICAgIHRoaXMubWVudUhveUFQSSA9IG5ldyBtZW51SG95QVBJKHRoaXMpO1xuICAgICAgICB0aGlzLm1lbnVTZW1hbmFsQVBJID0gbmV3IG1lbnVTZW1hbmFsQVBJKHRoaXMpO1xuICAgICAgICB0aGlzLnN1YnNpc3RlbWFzQVBJID0gbmV3IHN1YnNpc3RlbWFzQVBJKHRoaXMpO1xuICAgICAgICB0aGlzLm5ld0luYm94ID0gaW5ncmVzYXJCYW5kZWphRW50cmFkYS5iaW5kKHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkZSBsYSBwZXN0YVx1MDBGMWEgZGUgY29uZmlndXJhY2lcdTAwRjNuIC0gXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGx1Z2luTWFpblNldHRpbmdzVGFiKHRoaXMpKTtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBsYXMgaW5zdGFuY2lhcyBkZSBsb3MgbVx1MDBGM2R1bG9zXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uID0gbmV3IFN0YXR1c0JhckV4dGVuc2lvbih0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IG5ldyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9CYXNlID0gbmV3IE1vZHVsb0Jhc2UodGhpcyk7XG4gICAgICAgIC8vdGhpcy5tb2R1bG9UZXJjZXJvcyA9IG5ldyBNb2R1bG9UZXJjZXJvcyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9HVEQgPSBuZXcgTW9kdWxvR1REKHRoaXMpO1xuICAgICAgICB0aGlzLmFwcGx5Q29uZmlndXJhdGlvbigpO1xuICAgICAgICAvLyBBcGxpY2EgbGEgY29uZmlndXJhY2lcdTAwRjNuIGluaWNpYWwgYmFzYWRhIGVuIGxvcyBhanVzdGVzIGNhcmdhZG9zIG8gcHJlZGV0ZXJtaW5hZG9zLlxuICAgICAgICBjb25zb2xlLmxvZygnSW5pY2lhbmRvIGNhcmdhIGRlIHBsdWdpbiBkZSBHZXN0aVx1MDBGM24gUGVyc29uYWwnKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVnaXN0ZXJHUFRob3JhKCk7XG4gICAgICB9XG5cbiAgICAgIHJlZ2lzdGVyR1BUaG9yYSgpIHtcbiAgICAgICAgY29uc3QgZ3B0SG9yYSA9IG5ldyBHUFRob3JhKHRoaXMuYXBwKTsgIC8vIENyZWFyIHVuYSBpbnN0YW5jaWEgZGUgR1BUaG9yYVxuICAgICAgICBncHRIb3JhLm9ubG9hZCgpO1xuICAgIH1cblxuICAgICAgYXBwbHlDb25maWd1cmF0aW9uKCkge1xuICAgICAgICAvLyBNb2R1bG8gQmFzZSBlcyBlbCBtXHUwMEYzZHVsbyBzb2JyZSBlbCBxdWUgZXN0b3kgaGFjaWVuZG8gcHJ1ZWJhcyBkZSBkZXNhcnJvbGxvLlxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9CYXNlKSB7XG4gICAgICAgICAgdGhpcy5tb2R1bG9CYXNlPy5hY3RpdmF0ZSh0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tb2R1bG9CYXNlPy5kZWFjdGl2YXRlKHRoaXMpO1xuICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbykge1xuICAgICAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbz8uYWN0aXZhdGUodGhpcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vZHVsb1JlZ2lzdHJvVGllbXBvPy5kZWFjdGl2YXRlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0Jhcikge1xuICAgICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uPy5hY3RpdmF0ZSgpO1xuICAgICAgICAgIC8vIFNpIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIGBtb2R1bG9BbGlhc1N0YXR1c0JhcmAgZXMgdmVyZGFkZXJhLCBhY3RpdmEgZWwgbVx1MDBGM2R1bG8uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdGF0dXNCYXJFeHRlbnNpb24/LmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAvLyBTaSBlcyBmYWxzYSwgZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvLlxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb0dURCkge1xuICAgICAgICAgIHRoaXMubW9kdWxvR1REPy5hY3RpdmF0ZSh0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tb2R1bG9HVEQ/LmRlYWN0aXZhdGUodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIC8vdGhpcy5tb2R1bG9UZXJjZXJvcz8uYWN0aXZhdGUodGhpcyk7XG5cbiAgICB9XG4gICAgXG4gICAgICBhc3luYyBvbnVubG9hZCgpIHtcbiAgICAgICAgICAvLyBDXHUwMEYzZGlnbyBkZSBsaW1waWV6YSBhcXVcdTAwRURcbiAgICAgICAgICBjb25zb2xlLmxvZygnRGVzY2FyZ2FuZG8gcGx1Z2luIEdlc3RpXHUwMEYzbiBQZXJzb25hbCcpO1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgIH1cblxuICAgICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGNhcmdhciBsYSBjb25maWd1cmFjaVx1MDBGM24gZGVzZGUgZWwgYWxtYWNlbmFtaWVudG8gZGUgT2JzaWRpYW4uXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgICAgICAvLyBJbnRlbnRhIGNhcmdhciBsYSBjb25maWd1cmFjaVx1MDBGM24geSBtZXpjbGEgbG9zIHZhbG9yZXMgY2FyZ2Fkb3MgY29uIGxvcyBwcmVkZXRlcm1pbmFkb3MuXG4gICAgICB9XG5cbiAgICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBndWFyZGFyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBhY3R1YWwgZW4gZWwgYWxtYWNlbmFtaWVudG8gZGUgT2JzaWRpYW4uXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIC8vIEd1YXJkYSBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsLlxuICAgICAgICBcbiAgICAgICAgdGhpcy5hcHBseUNvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgLy8gVnVlbHZlIGEgYXBsaWNhciBsYSBjb25maWd1cmFjaVx1MDBGM24gcGFyYSBhc2VndXJhcnNlIGRlIHF1ZSBsb3MgY2FtYmlvcyByZWNpZW50ZXMgc2UgcmVmbGVqZW4gaW5tZWRpYXRhbWVudGUuXG4gICAgICB9XG5cbiAgICAgIGdldFRwKCl7XG4gICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgaWYgKCF0aGlzLmFwcCB8fCAhdGhpcy5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICAgICAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTsgICAgXG4gICAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgICAgaWYgKCF0cC5zeXN0ZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coJ0luc3RhbmNpYSBkZSB0cCBjYXJnYWRhIHNhdGlzZmFjdG9yaWFtZW50ZSBlbiBQbHVnaW4nKTtcbiAgICAgICAgICByZXR1cm4gdHA7XG4gICAgICAgIH1cbiAgfVxuIiwgImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFBsdWdpbk1haW5TZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29uZmlndXJhY2lcdTAwRjNuIGRlbCBwbHVnaW4gZGUgR2VzdGlcdTAwRjNuIFBlcnNvbmFsJyB9KTtcblxuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yZXMgcGFyYSBsYXMgcGVzdGFcdTAwRjFhcyB5IGVsIGNvbnRlbmlkbyBkZSBsYXMgcGVzdGFcdTAwRjFhc1xuICAgICAgICBjb25zdCB0YWJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0YWItY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3QgdGFiQ29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RhYi1jb250ZW50LWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgLy8gRGVmaW5lIGxvcyB0XHUwMEVEdHVsb3MgZGUgbGFzIHBlc3RhXHUwMEYxYXNcbiAgICAgICAgY29uc3QgdGFiVGl0bGVzID0gWydBY3RpdmFyIE1cdTAwRjNkdWxvcycsICdEaXJlY3RvcmlvcyBTdWJzaXN0ZW1hcycsICdQZXN0YVx1MDBGMWEgMyddO1xuXG4gICAgICAgIC8vIENyZWFyIHBlc3RhXHUwMEYxYXMgeSBjb250ZW5pZG8gZXNwZWNcdTAwRURmaWNvXG4gICAgICAgIHRhYlRpdGxlcy5mb3JFYWNoKCh0aXRsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWFyIGJvdG9uZXMgZGUgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RhYi1saW5rJyk7XG4gICAgICAgICAgICB0YWJCdXR0b24uZGF0YXNldC50YWIgPSBgdGFiJHtpbmRleH1gO1xuICAgICAgICAgICAgdGFiQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9wZW5UYWIoYHRhYiR7aW5kZXh9YCk7XG4gICAgICAgICAgICB0YWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQnV0dG9uKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXIgY29udGVuaWRvIGRlIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgY29uc3QgdGFiQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFiQ29udGVudC5pZCA9IGB0YWIke2luZGV4fWA7XG4gICAgICAgICAgICB0YWJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3RhYi1jb250ZW50Jyk7XG4gICAgICAgICAgICB0YWJDb250ZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHRhYkNvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyBJbmljaWFsbWVudGUgb2N1bHRhciBlbCBjb250ZW5pZG8gZGUgbGEgcGVzdGFcdTAwRjFhLCBleGNlcHRvIGVsIHByaW1lcm9cbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHRhYkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgcHJpbWVyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1ZlciBBbGlhcyBlbiBlbCBTdGF0dXMgQmFyJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRWxpZ2Ugc2kgZGVzZWFzIHZlciBlbCBBbGlhc2VzIGRlIGxhcyBub3RhcyBlbiBlbCBTdGF0dXMgQmFyLicpXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBNXHUwMEYzZHVsbyBSZWdpc3RybyBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FjdGl2YXIgTVx1MDBGM2R1bG8gQmFzZSAtIFBydWViYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHBydWViYXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQmFzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0Jhc2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgc2VndW5kYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIG1hbmVqYXIgZWwgY2xpYyBlbiBlbCB0XHUwMEVEdHVsbyBkZWwgYmxvcXVlIGRlc3BsZWdhYmxlXG4gICAgICAgICAgICAgICAgY29uc3QgdG9nZ2xlQ29sbGFwc2UgPSAoZXZlbnQ6IHsgdGFyZ2V0OiB7IG5leHRFbGVtZW50U2libGluZzogYW55OyBpbm5lckhUTUw6IHN0cmluZzsgZ2V0QXR0cmlidXRlOiAoYXJnMDogc3RyaW5nKSA9PiBzdHJpbmc7IH07IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dEVsZW1lbnQgPSBldmVudC50YXJnZXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAnJiM5NjYwOyAnICsgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpOyAvLyBDYW1iaWEgZWwgaWNvbm8gYSBcImFiYWpvXCJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gJyYjOTY1NDsgJyArIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKTsgLy8gQ2FtYmlhIGVsIGljb25vIGEgXCJkZXJlY2hhXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiQW5vdGFjaW9uZXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGFub3RhY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJBbm90YWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiQW5vdGFjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFub3RhY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIE9jdWx0YSBpbmljaWFsbWVudGUgbG9zIGFqdXN0ZXNcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGFub3RhY2lvbmVzQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIEFub3RhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gdG9kYXMgbGFzIEFub3RhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Bbm90YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Bbm90YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYW5vdGFjaW9uZXNDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0luZGljZSBkZSBBbm90YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbGFzIEFub3RhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Bbm90YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Bbm90YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCJcbiAgICAgICAgICAgICAgICBjb25zdCBibG9nVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCInIH0pO1xuICAgICAgICAgICAgICAgIGJsb2dUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkFydFx1MDBFRGN1bG9zIGRlIEJsb2dcIicpO1xuICAgICAgICAgICAgICAgIGJsb2dUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGJsb2dDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIE9jdWx0YSBpbmljaWFsbWVudGUgbG9zIGFqdXN0ZXNcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYmxvZ0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBBcnRcdTAwRURjdWxvcyBkZWwgQmxvZycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBhcnRcdTAwRURjdWxvcyBkZWwgYmxvZy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQUJsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQUJsb2cgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJsb2dDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0luZGljZSBkZSBBcnRcdTAwRURjdWxvcyBkZWwgQmxvZycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGFydFx1MDBFRGN1bG9zIGRlbCBibG9nLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9BQmxvZylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9BQmxvZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zXCInIH0pO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiJyk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlndXJhY2lcdTAwRjNuIHBhcmEgQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRGVzYXJyb2xsb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIFx1MDBDRG5kaWNlIGRlIERlc2Fycm9sbG9zIHkgQ1x1MDBGM2RpZ29zXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZGVzYXJyb2xsb3NDb250ZW50KSAvLyBVc2Ftb3MgYGRlc2Fycm9sbG9zQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9EZXNhcnJvbGxvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9EZXNhcnJvbGxvcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJFc3R1ZGlvXCJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3R1ZGlvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJFc3R1ZGlvXCInIH0pO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkVzdHVkaW9cIicpO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZXN0dWRpb0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVzdHVkaW9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBUZW1hcyBkZSBFc3R1ZGlvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHRlbWFzIGRlIGVzdHVkaW8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0VzdHVkaW8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXN0dWRpb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBFc3R1ZGlvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgdGVtYXMgZGUgZXN0dWRpby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Fc3R1ZGlvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkdURFwiXG4gICAgICAgICAgICAgICAgY29uc3QgZ3RkVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJHVERcIicgfSk7XG4gICAgICAgICAgICAgICAgZ3RkVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJHVERcIicpO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBndGRDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBndGRDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZ3RkVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQXJjaGl2byBkZSBCYW5kZWphIGRlIEVudHJhZGEuJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgQmFuZGVqYSBkZSBlbnRyYWRhIEdURC4nKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX0luYm94ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICAvLyBQcm95ZWN0b3MgR1REXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV2aXNpXHUwMEYzbiBTZW1hbmFsXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmV2aXNpb25lcyBTZW1hbmFsZXMgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJMZWN0dXJhXCJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWN0dXJhVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInIH0pO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkxlY3R1cmFcIicpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGVjdHVyYVRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIFNlc2lvbmVzIGRlIExlY3R1cmFcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhU2VzaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgc2VzaW9uZXMgZGUgbGVjdHVyYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVNlc2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gTGlicm9zIHkgUmVzXHUwMEZBbWVuZXNcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsb3MgcmVzXHUwMEZBbWVuZXMgZGUgbGlicm9zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIGxvcyByZXNcdTAwRkFtZW5lcyBkZSBsaWJyb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVJlc3VtZW5lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlIGVzdGFtb3MgZGVudHJvIGRlIGlmIChpbmRleCA9PT0gMSkgeyAuLi4gfVxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNZW50b3JcdTAwRURhc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1lbnRvclx1MDBFRGFzXCInKTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lbnRvcmlhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFNlc2lvbmVzIGRlIE1lbnRvclx1MDBFRGEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobWVudG9yaWFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIE1lbnRvclx1MDBFRGFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVwaXRlIGVsIHBhdHJcdTAwRjNuIHBhcmEgXCJNZXJjYWRvXCIsIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCIsIHkgXCJQYWdvc1wiXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1lcmNhZG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmNhZG9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicgfSk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTWVyY2Fkb1wiJyk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZXJjYWRvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1lcmNhZG9cIiwgc2lndWllbmRvIGVsIHBhdHJcdTAwRjNuIGRlIGxhcyBtZW50b3JcdTAwRURhc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBMaXN0YWRvcyBkZSBNZXJjYWRvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIGxpc3RhcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lcmNhZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbGlzdGFkb3MgZGUgbWVyY2FkbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGxpc3RhZG9zIGRlIG1lcmNhZG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lcmNhZG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVyY2FkbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bG9zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIicgfSk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCInKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBBZ3JlZ2EgYXF1XHUwMEVEIGxhcyBjb25maWd1cmFjaW9uZXMgZXNwZWNcdTAwRURmaWNhcyBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBNb2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgbVx1MDBGM2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbi4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbG9zIE1vZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIE1cdTAwRjNkdWxvcyBkZWwgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJUcmFuc2FjY2lvbmVzIHkgUGFnb3NcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWNjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlRyYW5zYWNjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwidHJhbnNhY2Npb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0cmFuc2FjY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIlBhZ29zXCJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0cmFuc2FjY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTW9kdWxvcyBkZWwgU2lzdGVtYSBkZSBUcmFuc2FjY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIGNvbXByb2JhbnRlcyBkZSBsYXMgdHJhbnNhY2Npb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVHJhbnNhY2Npb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmFuc2FjY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0cmFuc2FjY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFRyYW5zYWNjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIFRyYW5zYWNjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1RyYW5zYWNjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfVHJhbnNhY2Npb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUHJlc2VudGFjaW9uZXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNlbnRhY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQcmVzZW50YWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNlbnRhY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByZXNlbnRhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTm90YXMgZGUgUHJlc2VudGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgbm90YXMgZGUgcHJlc2VudGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1ByZXNlbnRhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1ByZXNlbnRhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcmVzZW50YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHJlc2VudGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1ByZXNlbnRhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1ByZXNlbnRhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByb3llY3RvcyBkZSBRXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyB9KTtcbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcm95ZWN0b3NRQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcHJveWVjdG9zIGRlIFEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zUSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJveWVjdG9zUUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcm95ZWN0b3MgZGUgUScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHJveWVjdG9zIGRlIFEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc1EpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zUSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIGZ1bmNpXHUwMEYzbiB0b2dnbGVDb2xsYXBzZSBlc3RcdTAwRTEgZGVmaW5pZGEgY29tbyBzZSBpbmRpY1x1MDBGMyBhbnRlcmlvcm1lbnRlLlxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQdWJsaWNhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNhY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQdWJsaWNhY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlB1YmxpY2FjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljYWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHVibGljYWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFBpZXphcyBkZSBQdWJsaWNhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIHBpZXphcyBkZSBwdWJsaWNhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QdWJsaWNhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1B1YmxpY2FjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QdWJsaWNhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlY2V0YXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2V0YXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVjZXRhc1wiJyk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWNldGFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVjZXRhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyByZWNldGFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWNldGFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY2V0YXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY2V0YXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjZXRhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlY3Vyc29zIFJlY3VycmVudGVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyB9KTtcbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWN1cnNvc1JlY3VycmVudGVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcmVjdXJzb3MgcmVjdXJyZW50ZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWN1cnNvcyBSZWN1cnJlbnRlcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcmVjdXJzb3MgcmVjdXJyZW50ZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjdXJzb3NSZWN1cnJlbnRlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWdpc3RybyBUaWVtcG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWdpc3RybyBUaWVtcG9cIicgfSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlZ2lzdHJvIFRpZW1wb1wiJyk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cm9UaWVtcG9Db250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVnaXN0cm9UaWVtcG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBSZWdpc3Ryb3MgZGUgVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHJlZ2lzdHJvcyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWdpc3Ryb1RpZW1wb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWdpc3RybyBkZSBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlZ2lzdHJvcyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG5cblxuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSB0ZXJjZXJhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUxhYmVsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSAnRmVjaGEnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0LnR5cGUgPSAnZGF0ZXRpbWUtbG9jYWwnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zIENTUyBwYXJhIGVzcGFjaWFkbyB5IG9yZ2FuaXphY2lcdTAwRjNuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzdHlsZScsIHtcbiAgICAgICAgICAgIHRleHQ6IGBcbiAgICAgICAgICAgICAgICAudGFiLWNvbnRlbnQgeyBkaXNwbGF5OiBub25lOyBwYWRkaW5nLXRvcDogMjBweDsgfSAvLyBBXHUwMEYxYWRpZG8gcGFkZGluZy10b3AgcGFyYSBlbCBlc3BhY2lvXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50LmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9XG4gICAgICAgICAgICAgICAgLnRhYi1saW5rIHsgY3Vyc29yOiBwb2ludGVyOyBwYWRkaW5nOiA1cHggMTBweDsgbWFyZ2luLXJpZ2h0OiA1cHg7IGJhY2tncm91bmQ6ICNmMGYwZjA7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluay5hY3RpdmUgeyBiYWNrZ3JvdW5kOiAjZTBlMGUwOyB9XG4gICAgICAgICAgICAgICAgLnNldHRpbmctaXRlbSB7IG1hcmdpbi1ib3R0b206IDEwcHg7IH1cbiAgICAgICAgICAgIGBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNhbWJpYXIgbGEgcGVzdGFcdTAwRjFhIGFjdGl2YVxuICAgICAgICB0aGlzLm9wZW5UYWIgPSAodGFiTmFtZSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaChjb250ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1saW5rJykuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWJDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFiTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWJMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiPVwiJHt0YWJOYW1lfVwiXWApO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkNvbnRlbnQpIGFjdGl2ZVRhYkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBpZiAoYWN0aXZlVGFiTGluaykgYWN0aXZlVGFiTGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFicmlyIGxhIHByaW1lcmEgcGVzdGFcdTAwRjFhIHBvciBkZWZlY3RvXG4gICAgICAgIHRoaXMub3BlblRhYigndGFiMCcpO1xuICAgIH1cbiAgICBvcGVuVGFiKGFyZzA6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9CYXNlIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBtb2R1bG9CYXNlOiBNb2R1bG9CYXNlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kdWxvQmFzZSkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgZGVzYWN0aXZhZG8sIG5vIGhhY2VyIG5hZGFcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICBcbiAgICB9XG5cblxufSIsICJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhckNhcnBldGEocnV0YUNhcnBldGE6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBjYXJwZXRhRXhpc3RlbnRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhQ2FycGV0YSk7XG4gICAgICAgICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke3J1dGFDYXJwZXRhfScgeWEgZXhpc3RlLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAvLyBDcmVhIGxhIGNhcnBldGFcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7cnV0YUNhcnBldGF9JyBjcmVhZGEgZXhpdG9zYW1lbnRlLmApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgY3JlYXIgbGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nOmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJQbGFudGlsbGEoY29udGVuaWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlPiB7XG4gICAgLy8gRGVmaW5lIGxhIHJ1dGEgeSBlbCBub21icmUgZGVsIGFyY2hpdm8gdGVtcG9yYWxcbiAgICBjb25zdCBmb2xkZXIgPSAnUGxhbnRpbGxhcyc7XG4gICAgbGV0IGZpbGVuYW1lID0gXCJBcmNoaXZvIERlIFBsYW50aWxsYVwiXG4gICAgbGV0IHBhdGhUZW1wb3JhbCA9IGZvbGRlciArIFwiL1wiICsgZmlsZW5hbWUgKyBcIi5tZFwiO1xuXG4gICAgLy8gQ3JlYSBlbCBhcmNoaXZvIGVuIGxhIGJcdTAwRjN2ZWRhIHkgZ3VhcmRhIGVsIGFyY2hpdm8gY3JlYWRvIGVuIHVuYSB2YXJpYWJsZVxuICAgIGNvbnN0IGFyY2hpdm9DcmVhZG86IFRGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShwYXRoVGVtcG9yYWwsIGNvbnRlbmlkbyk7XG5cbiAgICAvLyBBcXVcdTAwRUQgbmVjZXNpdGFyXHUwMEVEYXMgcHJvY2VzYXIgZWwgYXJjaGl2byBjb24gVGVtcGxhdGVyIHNpIGVzIG5lY2VzYXJpb1xuICAgIC8vIEVzdG8gZGVwZW5kZSBkZSBjXHUwMEYzbW8gVGVtcGxhdGVyIGV4cG9uZ2Egc3UgZnVuY2lvbmFsaWRhZCBhIG90cm9zIHBsdWdpbnNcbiAgICAvLyBQb3IgZWplbXBsbywgc2kgVGVtcGxhdGVyIHRpZW5lIHVuIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgYXJjaGl2b3MsIGxvIHVzYXJcdTAwRURhcyBhcXVcdTAwRURcblxuICAgIC8vIChPcGNpb25hbCkgRWxpbWluYSBlbCBhcmNoaXZvIGRlc3B1XHUwMEU5cyBkZSBwcm9jZXNhcmxvIHNpIG5vIGRlc2VhcyBjb25zZXJ2YXJsb1xuICAgIC8vIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoYXJjaGl2b0NyZWFkbyk7XG5cbiAgICAvLyBSZXRvcm5hIGVsIGFyY2hpdm8gY3JlYWRvXG4gICAgcmV0dXJuIGFyY2hpdm9DcmVhZG87XG59XG4iLCAiaW1wb3J0IHtNb2RhbH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5jbGFzcyBGaWxlTGlua01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBsaWNhciBlc3RpbG9zIGZsZXhib3ggcGFyYSBjZW50cmFyIGNvbnRlbmlkb1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5oZWlnaHQgPSAnNTAlJzsgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCBtb2RhbCBvY3VwZSB0b2RvIGVsIGVzcGFjaW8gZGlzcG9uaWJsZVxuICAgICAgICBcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdJbnNlcnRhciBlbCBsaW5rIGRlIHVuIGFyY2hpdm8uJyxcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOiBjZW50ZXI7JyB9ICAvLyBBc2VndXJhIHF1ZSBlbCB0ZXh0byBkZWwgdFx1MDBFRHR1bG8gZXN0XHUwMEU5IGNlbnRyYWRvIHNpIGVzIG1cdTAwRTFzIGxhcmdvIHF1ZSB1bmEgbFx1MDBFRG5lYVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRlbmVkb3IgcGFyYSBlbCBpbnB1dCB5IGVsIGJvdFx1MDBGM25cbiAgICAgICAgY29uc3QgaW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnN0eWxlLm1hcmdpbiA9ICcxMHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIElucHV0IGRlIGFyY2hpdm8gb2N1bHRvXG4gICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2ZpbGUnIH0pO1xuICAgICAgICBmaWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBzZWxlY2Npb25hciBhcmNoaXZvXG4gICAgICAgIGNvbnN0IGZpbGVCdXR0b24gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1NlbGVjY2lvbmUgc3UgYXJjaGl2bycsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzVweCAxMHB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxNnB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGZpbGVCdXR0b24ub25jbGljayA9ICgpID0+IGZpbGVJbnB1dC5jbGljaygpO1xuICAgICAgICBcbiAgICAgICAgLy8gRXZlbnRvIHBhcmEgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW4gYXJjaGl2b1xuICAgICAgICBmaWxlSW5wdXQub25jaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydExpbmtBdEN1cnNvcihmaWxlLnBhdGgsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbnNlcnRMaW5rQXRDdXJzb3IoZmlsZVBhdGgsIGZpbGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xuICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBgWyR7ZmlsZU5hbWV9XSg8ZmlsZTovLyR7ZmlsZVBhdGh9PilgO1xuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShsaW5rVGV4dCwgY3Vyc29yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIEZ1bmNpXHUwMEYzbiBwYXJhIGFicmlyIGVsIG1vZGFsIHBlcnNvbmFsaXphZG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRGaWxlTGluayhhcHApIHtcbiAgICBuZXcgRmlsZUxpbmtNb2RhbChhcHApLm9wZW4oKTtcbn1cbiIsICJpbXBvcnQge2NyZWFyQ2FycGV0YX0gZnJvbSBcIi4vdXRpbHMvY3JlYXJDYXJwZXRhXCJcbmltcG9ydCB7Y3JlYXJQbGFudGlsbGF9IGZyb20gXCIuL3V0aWxzL2NyZWFyUGxhbnRpbGxhXCJcbmltcG9ydCB7aW5zZXJ0RmlsZUxpbmt9IGZyb20gXCIuL3V0aWxzL2ZpbGVMaW5rTW9kYWxcIlxuaW1wb3J0IHtURmlsZSwgVEZvbGRlcn0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7Y3JlYXRlTm90ZUZyb21UZW1wbGF0ZX0gZnJvbSBcIi4vdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZVwiXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8xID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJDcmVhY2lvbi1DYXJwZXRhXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYWNpXHUwMEYzbiBkZSBDYXJwZXRhXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgYXdhaXQgY3JlYXJDYXJwZXRhKCdNaSBDYXJwZXRhIGRlIHBsdWdpbicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMS5pZCk7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8zID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1hcmNoaXZvLXRlbXBsYXRlXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYXIgYXJjaGl2byBkZXNkZSB0ZW1wbGF0ZVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwbHVnaW5JZCA9ICd0ZW1wbGF0ZXItb2JzaWRpYW4nO1xuICAgICAgICAgICAgY29uc3QgaXNQbHVnaW5JbnN0YWxsZWQgPSBwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKTtcbiAgICAgICAgICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gcGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbcGx1Z2luSWRdO1xuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIHBsYW50aWxsYSBjb21vIFRGaWxlXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBcIlBsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXMubWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIGNhcnBldGEgY29tbyBURm9sZGVyXG4gICAgICAgICAgICBsZXQgZm9sZGVyT2JqID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghKGZvbGRlck9iaiBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkxhIGNhcnBldGEgZXNwZWNpZmljYWRhIG5vIGV4aXN0ZSBvIG5vIGVzIHVuYSBjYXJwZXRhLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNhbGlyIHNpIG5vIHNlIGVuY3VlbnRyYSBsYSBjYXJwZXRhIG8gbm8gZXMgdW5hIGNhcnBldGFcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gXCJ0b0RlZmluZVwiXG4gICAgICAgICAgICBsZXQgb3Blbk5vdGUgPSB0cnVlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZvID0gYXdhaXQgY3JlYXRlTm90ZUZyb21UZW1wbGF0ZShwbHVnaW4sIHRlbXBsYXRlLCBmb2xkZXJPYmosIGZpbGVOYW1lLCBvcGVuTm90ZSk7XG5cbiAgICAgICAgICAgIGlmICghYXJjaGl2bykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG8zLmlkKTtcblxuXG4gICAgY29uc3QgY29tYW5kbzQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLWxpbmstQXJjaGl2b1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIHVuIGxpbmsgYSBhcmNoaXZvIGRlbCBEaXNjby5cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbnNlcnRGaWxlTGluayhhcHApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG80LmlkKTtcblxuXG4gICAgLy8gQ3JlYWNpXHUwMEYzbiB5IHJlZ2lzdHJvIGRlbCBjb21hbmRvLlxuICAgIGNvbnN0IGNvbWFuZG81ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJhYnJpci1ub3RhLWFjdGl2YVwiLFxuICAgICAgICBuYW1lOiBcIkFicmlyIE5vdGEgQWN0aXZhXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgIFxuICAgICAgIC8vIEFzZWd1cmEgcXVlIG5vIGhheWEgZHVwbGljYWRvcyBkZSBsYSB2aXN0YS5cbiAgICAgICBhcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShcInZpc3RhLW5vdGEtYWN0aXZhXCIpO1xuXG4gICAgICAgLy8gQWJyZSBsYSB2aXN0YSBlbiB1bmEgbnVldmEgaG9qYS5cbiAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICB0eXBlOiBcInZpc3RhLW5vdGEtYWN0aXZhXCIsXG4gICAgICAgfSk7XG5cbiAgICAgICAvLyBBY3RpdmEgbGEgbnVldmEgaG9qYSBwYXJhIGVsIHVzdWFyaW8uXG4gICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuICAgICAgICAgICBhcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcInZpc3RhLW5vdGEtYWN0aXZhXCIpWzBdXG4gICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzUuaWQpO1xuXG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIFxuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIpIHJldHVybjtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBwb2RyXHUwMEVEYXMgbWFuZWphciBsYSBcImRlc2FjdGl2YWNpXHUwMEYzblwiIGRlIGNvbWFuZG9zLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwgImltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG4vKipcbiAqIENyZWEgdW5hIG51ZXZhIG5vdGEgYSBwYXJ0aXIgZGUgdW5hIHBsYW50aWxsYSB1dGlsaXphbmRvIGVsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGVyUGx1Z2luIFJlZmVyZW5jaWEgYWwgcGx1Z2luIFRlbXBsYXRlci5cbiAqIEBwYXJhbSB0ZW1wbGF0ZSBMYSBwbGFudGlsbGEgYSB1dGlsaXphciwgcHVlZGUgc2VyIHVuIFRGaWxlIG8gZWwgcGF0aCBjb21vIHN0cmluZy5cbiAqIEBwYXJhbSBmb2xkZXIgRWwgZm9sZGVyIGRvbmRlIHNlIGNyZWFyXHUwMEUxIGxhIG51ZXZhIG5vdGEuIE9wY2lvbmFsLlxuICogQHBhcmFtIGZpbGVuYW1lIEVsIG5vbWJyZSBkZWwgYXJjaGl2byBkZSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBvcGVuTmV3Tm90ZSBTaSBzZSBkZWJlIGFicmlyIGxhIG51ZXZhIG5vdGEgdHJhcyBjcmVhcmxhLiBQb3IgZGVmZWN0byBlcyB0cnVlLlxuICogQHJldHVybnMgUHJvbWlzZSBxdWUgcmVzdWVsdmUgYSBURmlsZSBzaSBsYSBub3RhIGZ1ZSBjcmVhZGEsIHVuZGVmaW5lZCBlbiBjYXNvIGNvbnRyYXJpby5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5vdGVGcm9tVGVtcGxhdGUoXG4gICAgcGx1Z2luOiBQbHVnaW4sIC8vIEVzdGEgZXMgdW5hIHN1cG9zaWNpXHUwMEYzbiwgbmVjZXNpdGFyXHUwMEUxcyBhanVzdGFyIHNlZ1x1MDBGQW4gY1x1MDBGM21vIGFjY2VkYXMgYSBUZW1wbGF0ZXIgZW4gdHUgcGx1Z2luXG4gICAgdGVtcGxhdGU6IFRGaWxlIHwgc3RyaW5nLFxuICAgIGZvbGRlcj86IFRGb2xkZXIsXG4gICAgZmlsZW5hbWU/OiBzdHJpbmcsXG4gICAgb3Blbk5ld05vdGU6IGJvb2xlYW4gPSB0cnVlXG4pOiBQcm9taXNlPFRGaWxlIHwgdW5kZWZpbmVkPiB7XG4gICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZWwgcGx1Z2luIFRlbXBsYXRlciBlc3RcdTAwRTEgaW5zdGFsYWRvIHkgaGFiaWxpdGFkb1xuICAgIGlmICghcGx1Z2luIHx8ICFwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKU1xuICAgIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICBjb25zdCB0cCA9IHRlbXBsYXRlclBsdWdpbi50ZW1wbGF0ZXIuY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgIFxuXG4gICAgaWYgKCF0cCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgIHJldHVybjtcbn1cbiAgICAvLyB0ZW1wbGF0ZUZpbGUgcHVlZGUgc2VyIHVuIHN0cmluZyBvIGVsIHRmaWxlIG9idGVuaWRvIGRlIGVzdGEgbWFuZXJhIG8gY29uIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoKVxuICAgIGRlYnVnZ2VyXG4gICAgbGV0IHRlbXBsYXRlRmlsZSA9IHRwLmZpbGUuZmluZF90ZmlsZSh0ZW1wbGF0ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3Tm90ZSA9IGF3YWl0IHRwLmZpbGUuY3JlYXRlX25ldyh0ZW1wbGF0ZUZpbGUsIGZpbGVuYW1lLCBvcGVuTmV3Tm90ZSwgZm9sZGVyKTtcbiAgICAgICAgcmV0dXJuIG5ld05vdGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgbGEgbm90YSBkZXNkZSBsYSBwbGFudGlsbGE6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyUmliYm9uTWVudSB9IGZyb20gXCIuL3VpL3JpYmJvbkJ1dHRvblwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGEocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luKTtcbn0iLCAiaW1wb3J0IHsgQXBwLCBNZW51LCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIH0gZnJvbSBcIi4vbW9kYWxcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgdGVuZXIgZWwgaW1wb3J0IGNvcnJlY3RvIHBhcmEgdHUgbW9kYWxcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIEVzdGUgZXMgZWwgXHUwMEVEY29ubyBkZWwgbWVuXHUwMEZBIGVuIGVsIHJpYmJvbiwgY2FtYmlhIFwiZGljZVwiIHBvciBlbCBcdTAwRURjb25vIHF1ZSBwcmVmaWVyYXNcbiAgICBwbHVnaW4uYWRkUmliYm9uSWNvbihcImZvbGRlci1zZWFyY2gtMlwiLCBcIkJcdTAwRkFzcXVlZGEgQXZhbnphZGFcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIENyZWFyIGVsIG1lblx1MDBGQSBhbCBoYWNlciBjbGljIGVuIGVsIFx1MDBFRGNvbm9cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KHBsdWdpbi5hcHApO1xuXG4gICAgICAgIC8vIEFncmVnYXIgb3BjaW9uZXMgYWwgbWVuXHUwMEZBXG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBWaWRhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIFZpZGFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcnJlY2NpXHUwMEYzbjogQXNlZ1x1MDBGQXJhdGUgZGUgYWJyaXIgZWwgbW9kYWwgY29ycmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICBuZXcgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbChwbHVnaW4uYXBwLCAoZXN0YWRvU2VsZWNjaW9uYWRvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBzZWxlY2Npb25hZG86XCIsIGVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgcHVlZGVzIGNvbnRpbnVhciBjb24gbGEgbFx1MDBGM2dpY2EgcGFyYSBtYW5lamFyIGVsIGVzdGFkbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpOyAvLyBDb3JyZWdpZG86IEFcdTAwRjFhZGlkbyAub3BlbigpIHBhcmEgYWJyaXIgZWwgbW9kYWxcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBbm90YWNpXHUwMEYzblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiQW5vdGFjaVx1MDBGM25cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJBbm90YWNpXHUwMEYzblwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5vdGFjaVx1MDBGM25cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFJlY3Vyc28gUmVjdXJyZW50ZVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiUmVjdXJzbyBSZWN1cnJlbnRlXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWN1cnNvIFJlY3VycmVudGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEdlc3RpXHUwMEYzbiBEaWFyaWFcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkdlc3RpXHUwMEYzbiBEaWFyaWFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJHZXN0aVx1MDBGM24gRGlhcmlhXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWdpc3RybyBkZSBUaWVtcG9cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm8gZGUgVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBNb3N0cmFyIGVsIG1lblx1MDBGQSBlbiBsYSBwb3NpY2lcdTAwRjNuIGRlbCBjdXJzb3JcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRnV6enlOb3RlU3VnZ2VzdGVyIH0gZnJvbSBcIi4uL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXJcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHJ1dGEgZGUgaW1wb3J0YWNpXHUwMEYzbiBzZWEgY29ycmVjdGFcblxuZXhwb3J0IGNsYXNzIFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgb25TZWxlY3RFc3RhZG86IChlc3RhZG86IHN0cmluZykgPT4gdm9pZDtcbiAgICBlc3RhZG9TZWxlY2Npb25hZG86IHN0cmluZyA9IFwiXHVEODNEXHVERkUyXCI7IC8vIEVzdGFkbyBwb3IgZGVmZWN0byBjb21vIGVtb2ppIGRpcmVjdGFtZW50ZVxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdEVzdGFkbyA9IG9uU2VsZWN0RXN0YWRvO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQnVzY2FyIFx1MDBDMXJlYXMgZGUgVmlkYVwiIH0pO1xuXG4gICAgICAgIC8vIFVzYW5kbyBTZXR0aW5nIHBhcmEgY3JlYXIgZWwgRHJvcGRvd25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFc3RhZG9cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRWxpZ2UgZWwgZXN0YWRvOlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKHsgXCJcdUQ4M0RcdURGRTJcIjogXCJWZXJkZVwiLCBcIlx1RDgzRFx1REQzNVwiOiBcIkF6dWxcIiwgXCJcdUQ4M0RcdURGRTFcIjogXCJBbWFyaWxsb1wiLCBcIlx1RDgzRFx1REQzNFwiOiBcIlJvam9cIiB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7IC8vIEVzdGFibGVjZSBlbCB2YWxvciBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lc3RhZG9TZWxlY2Npb25hZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJCdXNjYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90YXNGaWx0cmFkYXMgPSBhd2FpdCB0aGlzLmZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90YXMgZmlsdHJhZGFzOlwiLCBub3Rhc0ZpbHRyYWRhcy5sZW5ndGgsIG5vdGFzRmlsdHJhZGFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGdXp6eU5vdGVTdWdnZXN0ZXIodGhpcy5hcHAsIG5vdGFzRmlsdHJhZGFzKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBmaWx0cmFyIG5vdGFzIHBvciBlc3RhZG8geSBkaXJlY3RvcmlvXG4gICAgYXN5bmMgZmlsdHJhck5vdGFzUG9yRXN0YWRvWURpcmVjdG9yaW8oZGlyZWN0b3Jpbzogc3RyaW5nLCBlc3RhZG86IHN0cmluZyk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgbGV0IG5vdGFzRmlsdHJhZGFzID0gYXJjaGl2b3MuZmlsdGVyKGFyY2hpdm8gPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGFyY2hpdm8ucGF0aDtcbiAgICAgICAgICAgIGlmICghcGF0aC5zdGFydHNXaXRoKGRpcmVjdG9yaW8pKSByZXR1cm4gZmFsc2U7IC8vIEZpbHRyYSBwb3IgZGlyZWN0b3Jpb1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkYXRvcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHByb2Nlc2FkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCBlc3RhZG8gZGVsIGZyb250bWF0dGVyIGNvaW5jaWRlIGNvbiBlbCBlc3RhZG8gcHJvcG9yY2lvbmFkb1xuICAgICAgICAgICAgaWYgKGRhdG9zLmZyb250bWF0dGVyICYmIGRhdG9zLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gZXN0YWRvKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGluY2x1aWRvOlwiLCBhcmNoaXZvLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gT3JkZW5hIGxhcyBub3RhcyBmaWx0cmFkYXMgcG9yIGZlY2hhIGRlIG1vZGlmaWNhY2lcdTAwRjNuLCBkZSBsYSBtXHUwMEUxcyByZWNpZW50ZSBhIGxhIG1cdTAwRTFzIGFudGlndWFcbiAgICAgICAgbm90YXNGaWx0cmFkYXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZTsgLy8gRGVzY2VuZGVudGVcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHJldHVybiBub3Rhc0ZpbHRyYWRhcztcbiAgICB9XG4gICAgXG59XG4iLCAiLy8gRW4gYWxnXHUwMEZBbiBsdWdhciBkZSB0dSBtXHUwMEYzZHVsbywgY29tbyBzZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyLnRzXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgRnV6enlOb3RlU3VnZ2VzdGVyIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8VEZpbGU+IHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBub3RhczogVEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIGdldEl0ZW1zKCk6IFRGaWxlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhcztcbiAgICB9XG5cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBURmlsZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpdGVtLmJhc2VuYW1lOyAvLyBPIGN1YWxxdWllciBvdHJvIGZvcm1hdG8gcXVlIHByZWZpZXJhc1xuICAgIH1cblxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBURmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBBcXVcdTAwRUQgZGVmaW5lcyBxdVx1MDBFOSBoYWNlciBjdWFuZG8gc2Ugc2VsZWNjaW9uYSB1bmEgbm90YS4gUG9yIGVqZW1wbG8sIGFicmlyIGxhIG5vdGE6XG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgZmFsc2UpO1xuICAgICAgICBsZWFmLm9wZW5GaWxlKGl0ZW0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFN0YXR1c0JhciwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJFeHRlbnNpb24ge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIHN0YXR1c0JhcjogU3RhdHVzQmFyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBhY3Rpdm8sIG5vIGhhY2VyIG5hZGFcblxuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IHRoaXMucGx1Z2luLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgLy8gUmVnaXN0cmFyIGV2ZW50byBmaWxlLW9wZW5cbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoZmlsZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyID0gbnVsbDtcbiAgICAgICAgLy8gTm8gbmVjZXNpdGFzIGRlc3VzY3JpYmlyIGVsIGV2ZW50byBhcXVcdTAwRUQgc2kgdXNhcyByZWdpc3RlckV2ZW50LCBPYnNpZGlhbiBsbyBtYW5lamEgYXV0b21cdTAwRTF0aWNhbWVudGUuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTdGF0dXNCYXIoZmlsZT86IFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gZmlsZSB8fCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFjdXJyZW50RmlsZSB8fCAhdGhpcy5zdGF0dXNCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyPy5zZXRUZXh0KCcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50RmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgW107XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnNldFRleHQoYWxpYXNlcy5sZW5ndGggPiAwID8gYEFsaWFzOiAke2FsaWFzZXNbMF19YCA6ICdObyBBbGlhcycpO1xuICAgIH1cbn1cbiIsICIvLyBNb2R1bG9SZWdpc3Ryb1RpZW1wby50c1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyUmliYm9uTWVudSwgZGVhY3RpdmF0ZVJpYmJvbk1lbnUgfSBmcm9tIFwiLi9yaWJib25NZW51XCI7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvUmVnaXN0cm9UaWVtcG8ge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCByaWJib24gc29sbyBzZSByZWdpc3RyZSBzaSBhXHUwMEZBbiBubyBoYSBzaWRvIHJlZ2lzdHJhZG9cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5yaWJib25CdXR0b25SVCkge1xuICAgICAgICAgICAgcmVnaXN0ZXJSaWJib25NZW51KHRoaXMucGx1Z2luKTtcbiAgICAgICAgfVxuICAgICAgICByZWdpc3RlckNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBkZWFjdGl2YXRlUmliYm9uTWVudSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTWVudSwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgY3VtcGxlQ29uZGljaW9uIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIEVzdGUgZXMgZWwgXHUwMEVEY29ubyBkZWwgbWVuXHUwMEZBIGVuIGVsIHJpYmJvbiwgY2FtYmlhIFwiZGljZVwiIHBvciBlbCBcdTAwRURjb25vIHF1ZSBwcmVmaWVyYXNcbiAgICBcbiAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQgPSBwbHVnaW4uYWRkUmliYm9uSWNvbihcImNsb2NrXCIsIFwiUmVnaXN0cm8gZGUgVGllbXBvXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgZWwgbWVuXHUwMEZBIGFsIGhhY2VyIGNsaWMgZW4gZWwgXHUwMEVEY29ub1xuICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUocGx1Z2luLmFwcCk7XG5cbiAgICAgICAgLy8gQWdyZWdhciBvcGNpb25lcyBhbCBtZW5cdTAwRkFcbiAgICAgICAgLy8gTGEgb3BjaVx1MDBGM24gYWhvcmEsIHNvbG8gc2UgYWN0aXZhIHNpIGhheSBhbGdcdTAwRkFuIHJlZ2lzdHJvIGRlIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzbi5cbiAgICAgICAgaWYgKGF3YWl0IGN1bXBsZUNvbmRpY2lvbihwbHVnaW4uYXBwKSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJBaG9yYVwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFob3JhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3RyYXIgVGllbXBvXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlJlZ2lzdHJhciBUaWVtcG9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJhciBUaWVtcG9cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgLy8gTGEgb3BjaVx1MDBGM24gRGV0ZW5lciBSZWdpc3Rybywgc29sbyBzZSBhY3RpdmEgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gZGUgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuLlxuICAgICAgICBpZiAoYXdhaXQgY3VtcGxlQ29uZGljaW9uKHBsdWdpbi5hcHApKSB7XG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkRldGVuZXIgUmVnaXN0cm9cIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJEZXRlbmVyIFJlZ2lzdHJvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGV0ZW5lciBSZWdpc3Ryb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlRhcmVhcyBlbiBwcm9ncmVzb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRhcmVhcyBlbiBwcm9ncmVzb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJvcyBkZSBob3lcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiUmVnaXN0cm9zIGRlIGhveVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm9zIGRlIGhveVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTW9zdHJhciBlbCBtZW5cdTAwRkEgZW4gbGEgcG9zaWNpXHUwMEYzbiBkZWwgY3Vyc29yXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGlmIChwbHVnaW4ucmliYm9uQnV0dG9uUlQpIHtcbiAgICAgICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJULnJlbW92ZSgpO1xuICAgICAgICBwbHVnaW4ucmliYm9uQnV0dG9uUlQgPSBudWxsO1xuICAgIH1cbn1cbiIsICJcbi8vIExcdTAwRDNHSUNBIFBBUkEgQUNDRURFUiBBIExBUyBGVU5DSU9ORVMgREVTREUgTE9TIEJPVE9ORVMgUFJPUElPUyBERSBMQSBJTlRFUkZBWiBERSBPQlNJRElBTiAtPiBSSUJCT04sIEVUQ1xuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3VtcGxlQ29uZGljaW9uKGFwcDogQXBwKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9SZWdpc3RybyBUaWVtcG9cIikpIHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgIFxuICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiB9XG5cblxuIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luKSB7XG4gICAgXG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8gcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4gU2UgZGVzY2FydGEgcGFyYSBsYSBjcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby5cIik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBmb2xkZXIgPSBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb1xuICAgIFxuICAgIGxldCBtYXhJZCA9IDA7XG5cbiAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRyYSBwb3IgbG9zIGFyY2hpdm9zIGVuIGxhIGNhcnBldGEgZGVzZWFkYVxuICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgXG4gICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBidXNjYXIgbG9zIElEcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgY29uc3QgbmV4dElkID0gbWF4SWQgKyAxO1xuXG4gICAgLy8gRm9ybWF0ZWFyIGxhIGZlY2hhIGFjdHVhbFxuICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSBmb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2byxcbiAgICAgICAgbm9tYnJlOiBhY3Rpdm8uYmFzZW5hbWUsXG4gICAgICAgIGZvbGRlcixcbiAgICAgICAgaW5kaWNlLFxuICAgICAgICBpZDogbmV4dElkLFxuICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgaW5kaWNlX0RWSlM6IGBcIiR7aW5kaWNlfVwiYCxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gZmVjaGEuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwMDAwO1xuICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgIGNvbnN0IGRpYXMgPSBbJ0RvbWluZ28nLCAnTHVuZXMnLCAnTWFydGVzJywgJ01pXHUwMEU5cmNvbGVzJywgJ0p1ZXZlcycsICdWaWVybmVzJywgJ1NcdTAwRTFiYWRvJ107XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICByZXR1cm4gYCR7ZmVjaGFGb3JtYXRvfSAke2RpYVNlbWFuYX0gJHtob3JhRm9ybWF0b31gO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIHRhcmVhc0FjdGl2YXMucHVzaCh7IGZpbGUsIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IG1vc3RyYXJTdWdlcmVuY2lhKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IGVzdFx1MDBFMSBjb3JyaWVuZG8uIFx1MDBCRkRlc2VhIGRldGVuZXJsYT9gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGRlc2VhRGV0ZW5lcikge1xuICAgICAgICAgICAgLy8gQVFVSSBWQSBMQSBJTVBMRU1FTlRBQ0lcdTAwRDNOIEFMIE5VRVZPIENcdTAwRDNESUdPIC0+IEVTVEEgTE9HSUNBIE1BTkVKQSBGVU5DSU9ORVMhICBcbiAgICAgICAgICAgIGF3YWl0IGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YSwgYXBwKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gc2VndWlyXHUwMEUxIHJlZ2lzdHJcdTAwRTFuZG9zZS5gKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gUmFzdHJlYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cblxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnU1x1MDBFRCcsXG4gICAgICAgIH0pO1xuICAgICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8nLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIGhhY2VyIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVzdWVsdmUgY29uIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7IC8vIFBhc28gYGFwcGAgY29tbyBhcmd1bWVudG9cbiAgICBsZXQgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb247XG4gICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJPdHJvXCJdO1xuICAgIH1cbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgIFxuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICAgIFxuICAgIC8vIEVzcGVyYSBhc2luY3JcdTAwRjNuaWNhbWVudGUgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYW50ZXMgZGUgY29udGludWFyLlxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgICAgICAgLy8gUHJvY2VzYXIgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYXF1XHUwMEVELlxuICAgICAgICAvLyBFbCBjXHUwMEYzZGlnbyBzdWJzaWd1aWVudGUgZGVwZW5kZSBkZWwgdGlwbyBkZSByZWdpc3RybyBzZWxlY2Npb25hZG8uXG4gICAgICAgIHN3aXRjaChyZWdpc3Ryby50aXBvUmVnaXN0cm8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIGF3YWl0IGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHJlZ2lzdHJvLnRpdHVsb0RlZmluaWRvICE9PSBcIk90cm9cIjsgLy8gQXN1bWUgcXVlIHNpIG5vIGVzIFwiT3Ryb1wiLCBlcyB1biBhc3VudG8gZXNwZWNcdTAwRURmaWNvLlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIGFkaWNpb25hbCBwYXJhIG1hbmVqYXIgXCJPdHJvXCIgbyBjYXNvcyBubyBlc3BlY2lmaWNhZG9zLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBlc3RhYmxlY2VyIHVuIHZhbG9yIHByZWRldGVybWluYWRvIHBhcmEgcmVnaXN0cm8uZGV0ZW5lciBhcXVcdTAwRUQuXG4gICAgfVxufVxuXG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoYXJjaGl2byA9PiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSk7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGNvbnRlbmlkby5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovZ20pIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgZXNwYWNpb3MgYWwgaW5pY2lvIGRlIGNhZGEgY29pbmNpZGVuY2lhIGFudGVzIGRlIGFncmVnYXJsYSBhbCBhcnJlZ2xvXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gY29pbmNpZGVuY2lhcy5tYXAodGFyZWEgPT4gdGFyZWEudHJpbSgpKTtcbiAgICAgICAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNMaW1waWFzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZWFzUGVuZGllbnRlcztcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhhcHA6IEFwcCwgcmVnaXN0cm86IGFueSwgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJFbGlnZSBsYSB0YXJlYSBxdWUgdmFzIGEgcmVnaXN0cmFyLlwiO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGFycmVnbG8gZGUgcHJvbWVzYXMgdXNhbmRvIG1hcCBwYXJhIHBhc2FyIGNhZGEgdGFyZWEgcG9yIGxpbXBpYXJUZXh0b1RhcmVhXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCh0YXJlYSA9PiBsaW1waWFyVGV4dG9UYXJlYSh0YXJlYSkpO1xuXG4gICAgICAgIC8vIFVzYXIgUHJvbWlzZS5hbGwgcGFyYSBlc3BlcmFyIGEgcXVlIHRvZGFzIGxhcyB0YXJlYXMgc2VhbiBwcm9jZXNhZGFzXG4gICAgICAgIFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcykudGhlbih0YXJlYXNMaW1waWFzID0+IHtcbiAgICAgICAgICAgIC8vIEVuIGVzdGUgcHVudG8sIHRhcmVhc0xpbXBpYXMgZXMgdW4gYXJyZWdsbyBjb24gdG9kYXMgbGFzIHRhcmVhcyBkZXNwdVx1MDBFOXMgZGUgc2VyIGxpbXBpYWRhc1xuICAgICAgICAgICAgLy8gQWhvcmEgcHVlZGVzIHVzYXIgdGFyZWFzTGltcGlhcyBlbiBvdHJhIGZ1bmNpXHUwMEYzblxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCB0YXJlYXNMaW1waWFzLCB0YXJlYXNMaW1waWFzLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCkudGhlbihzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gbGltcGlhclRleHRvVGFyZWEgKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIE1hbmVqYXIgcG9zaWJsZXMgZXJyb3Jlc1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkh1Ym8gdW4gZXJyb3IgYWwgbGltcGlhciBsYXMgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hIHRvZG8gZGVzcHVcdTAwRTlzIGRlbCBwcmltZXIgc2FsdG8gZGUgbFx1MDBFRG5lYS5cbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdCgnXFxuJylbMF07XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgdGFncyBkZSBlc3RpbG8gTWFya2Rvd24uXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyNbXFx3LS9dKy9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGluY2x1eWVuZG8gcG9zaWJsZXMgZXNwYWNpb3MgYW50ZXMgbyBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgJycpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uICAgIFxuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICAgICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgXG5cbmFzeW5jIGZ1bmN0aW9uIGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YTogeyBmaWxlOiBURmlsZTsgdGl0dWxvOiBzdHJpbmcgfSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFyY2FyIGxhIHRhcmVhIGNvbW8gbm8gYWN0aXZhLCBwcm9iYWJsZW1lbnRlIGFjdHVhbGl6YW5kbyBzdSBmcm9udG1hdHRlclxuICAgIGNvbnNvbGUubG9nKGBEZXRlbmllbmRvIGxhIHRhcmVhOiAke3RhcmVhQWN0aXZhLnRpdHVsb31gKTtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBzZSBwb2RyXHUwMEVEYSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHBhcmEgZGV0ZW5lciBsYSB0YXJlYVxuICAgIC8vIEVzdGEgZXMgdW5hIHNpbXBsaWZpY2FjaVx1MDBGM247IGxhIGltcGxlbWVudGFjaVx1MDBGM24gcmVhbCBkZXBlbmRlclx1MDBFRGEgZGUgY1x1MDBGM21vIGVzdFx1MDBFOXMgbWFuZWphbmRvIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgIGNvbnN0IG5ld0NvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoJ2VzdGFkbzogXHVEODNEXHVERkUyJywgJ2VzdGFkbzogXHVEODNEXHVERDM1Jyk7IC8vIENhbWJpYXIgYSBlc3RhZG8gbm8gYWN0aXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeSh0YXJlYUFjdGl2YS5maWxlLCBuZXdDb250ZW50cyk7XG59XG5cblxuXG5cblxuXG4gXG4iLCAiLy8gSW1wb3J0YWNpXHUwMEYzbiBkZSBjbGFzZXMgbmVjZXNhcmlhcyBkZXNkZSBsYSBsaWJyZXJcdTAwRURhIGRlIE9ic2lkaWFuLlxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBEZWZpbmljaVx1MDBGM24gZGUgbGEgY2xhc2UgU2VsZWNjaW9uTW9kYWwgcXVlIGV4dGllbmRlIGRlIEZ1enp5U3VnZ2VzdE1vZGFsIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyBkZSBzdHJpbmdzLlxuZXhwb3J0IGNsYXNzIFNlbGVjY2lvbk1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XG4gICAgdGl0bGVzOiBzdHJpbmdbXTsgLy8gQXJyYXkgZGUgdFx1MDBFRHR1bG9zIHBhcmEgbGFzIG9wY2lvbmVzIGRlbCBtb2RhbC5cbiAgICB2YWx1ZXM6IHN0cmluZ1tdOyAvLyBBcnJheSBkZSB2YWxvcmVzIGFzb2NpYWRvcyBhIGNhZGEgdFx1MDBFRHR1bG8uXG4gICAgdmFsdWVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIE9iamV0byBwYXJhIG1hcGVhciB0XHUwMEVEdHVsb3MgYSB2YWxvcmVzLlxuICAgIHByaXZhdGUgc2VsZWNjaW9uSGVjaGE6IGJvb2xlYW4gPSBmYWxzZTsgLy8gRmxhZyBwYXJhIGRldGVybWluYXIgc2kgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLlxuXG4gICAgLy8gQ29uc3RydWN0b3IgZGUgbGEgY2xhc2UuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlczogc3RyaW5nW10sIHZhbHVlczogc3RyaW5nW10sIHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTsgLy8gTGxhbWFkYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBiYXNlIGNvbiBsYSBpbnN0YW5jaWEgZGUgQXBwIGRlIE9ic2lkaWFuLlxuICAgICAgICB0aGlzLnRpdGxlcyA9IHRpdGxlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdFx1MDBFRHR1bG9zLlxuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdmFsb3Jlcy5cbiAgICAgICAgLy8gQ3JlYWNpXHUwMEYzbiBkZWwgbWFwZW8gZGUgdFx1MDBFRHR1bG9zIGEgdmFsb3Jlcy5cbiAgICAgICAgdGhpcy52YWx1ZU1hcCA9IHRpdGxlcy5yZWR1Y2UoKGFjYywgdGl0bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhY2NbdGl0bGVdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcik7IC8vIEVzdGFibGVjaW1pZW50byBkZWwgdGV4dG8gZGUgcGxhY2Vob2xkZXIgcGFyYSBlbCBjYW1wbyBkZSBiXHUwMEZBc3F1ZWRhIGVuIGVsIG1vZGFsLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciBsb3MgXHUwMEVEdGVtcyAodFx1MDBFRHR1bG9zKSBxdWUgc2UgbW9zdHJhclx1MDBFMW4gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZXM7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIGVsIHRleHRvIHF1ZSBzZSBtb3N0cmFyXHUwMEUxIHBhcmEgY2FkYSBcdTAwRUR0ZW0gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcXVlIHNlIGxsYW1hIGFsIGNlcnJhciBlbCBtb2RhbC5cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICAvLyBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBzZSBoYXlhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbiwgc2UgcmVjaGF6YSBsYSBwcm9tZXNhLlxuICAgICAgICBpZiAoIXRoaXMuc2VsZWNjaW9uSGVjaGEpIHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KG5ldyBFcnJvcignTW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM24nKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gZGUgdW4gXHUwMEVEdGVtLlxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VsZWNjaW9uSGVjaGEgPSB0cnVlOyAvLyBNYXJjYXIgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgc3VwZXIuc2VsZWN0U3VnZ2VzdGlvbihpdGVtLCBldnQpOyAvLyBMbGFtYXIgYWwgbVx1MDBFOXRvZG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIGNsYXNlIGJhc2UgcGFyYSBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHF1ZSBzZSBsbGFtYSBhbCBlbGVnaXIgdW4gXHUwMEVEdGVtLCBkb25kZSBzZSByZXN1ZWx2ZSBsYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBhc29jaWFkbyBhbCBcdTAwRUR0ZW0gc2VsZWNjaW9uYWRvLlxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlTWFwW2l0ZW1dOyAvLyBPYnRlbmVyIGVsIHZhbG9yIGFzb2NpYWRvIGFsIFx1MDBFRHRlbSBzZWxlY2Npb25hZG8uXG4gICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7IC8vIFJlc29sdmVyIGxhIHByb21lc2EgY29uIGVsIHZhbG9yIHNlbGVjY2lvbmFkby5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFicmlyIGVsIG1vZGFsIHkgZXNwZXJhciBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuLCBkZXZvbHZpZW5kbyB1bmEgcHJvbWVzYSBjb24gZWwgdmFsb3Igc2VsZWNjaW9uYWRvLlxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlOyAvLyBHdWFyZGFyIGxhIGZ1bmNpXHUwMEYzbiByZXNvbHZlIGRlIGxhIHByb21lc2EgcGFyYSB1c2FybGEgYWwgc2VsZWNjaW9uYXIgdW4gXHUwMEVEdGVtLlxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7IC8vIEd1YXJkYXIgbGEgZnVuY2lcdTAwRjNuIHJlamVjdCBkZSBsYSBwcm9tZXNhIHBhcmEgdXNhcmxhIHNpIHNlIGNpZXJyYSBlbCBtb2RhbCBzaW4gc2VsZWNjaVx1MDBGM24uXG4gICAgICAgICAgICB0aGlzLm9wZW4oKTsgLy8gQWJyaXIgZWwgbW9kYWwuXG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIE1vZGFsLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgYnVzY2FyUmVnaXN0cm9zQWN0aXZvcywgY3JlYXJPYmpldG9SZWdpc3RybywgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcywgZGVmaW5pclRpcG9SZWdpc3RybyB9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7bW9kYWxfQWhvcmF9IGZyb20gXCIuL21vZGFscy9tb2RhbF9BaG9yYVwiXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgY29uc3QgaWQxID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJyZWdpc3Ryb3MtZGUtdGllbXBvLWRlbC1kaWFcIixcbiAgICAgICAgbmFtZTogXCJSZWdpc3Ryb3MgZGUgdGllbXBvIGRlbCBkXHUwMEVEYVwiLFxuICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGFjdGl2ZUxlYWYudmlldy5maWxlPy5wYXRoIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL1BlcmlvZG9zL0RpYXJpby9cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBsYSBsXHUwMEYzZ2ljYSBkZWwgY29tYW5kb1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3Ryb3MgZGUgdGllbXBvIGRlbCBkXHUwMEVEYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMS5pZCk7XG5cbiAgICBjb25zdCBpZDIgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImFob3JhLVJlZ2lzdHJvVGllbXBvXCIsXG4gICAgICAgIG5hbWU6IFwiVGFyZWEgYWN0aXZhIGVuIHJlZ2lzdHJvIGRlIHRpZW1wb1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZhID0gYXdhaXQgYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhwbHVnaW4uYXBwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFhY3RpdmEpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IG5vdGFzIGFjdGl2YXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENyZWEgeSBtdWVzdHJhIGVsIG1vZGFsIHBlcnNvbmFsaXphZG8gY29uIGxhIG5vdGEgYWN0aXZhXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IG1vZGFsX0Fob3JhKHBsdWdpbi5hcHAsIGFjdGl2YSk7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMi5pZCk7XG4gICAgXG4gICAgY29uc3QgaWQzID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1yZWdpc3Ryby10aWVtcG9cIixcbiAgICAgICAgbmFtZTogXCJDcmVhciBSZWdpc3RybyBkZSBUaWVtcG9cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgY3JlYXJPYmpldG9SZWdpc3RybyhwbHVnaW4pO1xuICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVnaXN0cm8pIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm8sIHBsdWdpbi5hcHApXG4gICAgICAgICAgICBhd2FpdCBkZWZpbmlyVGlwb1JlZ2lzdHJvKHJlZ2lzdHJvLHBsdWdpbi5hcHApXG4gICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlIHNlIHRpZW5lIHVuYSBmdW5jaVx1MDBGM24gbyBtXHUwMEU5dG9kbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBgcmVnaXN0cm9gXG4gICAgICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGEgc2VyIGNyZWFyIHVuYSBudWV2YSBub3RhIGNvbiBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIGByZWdpc3Ryb2BcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMy5pZCk7XG5cbiAgICBcbmNvbnN0IGlkNCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICBpZDogXCJ2aXN0YS1yZWdpc3Ryby10aWVtcG8tYWN0aXZhXCIsXG4gICAgbmFtZTogXCJNb3N0cmFyIFJUIEFjdGl2b1wiLFxuICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8vIEFzZWd1cmEgcXVlIG5vIGhheWEgZHVwbGljYWRvcyBkZSBsYSB2aXN0YS5cbiAgICAgICAgYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIik7XG5cbiAgICAgICAgLy8gQWJyZSBsYSB2aXN0YSBlbiB1bmEgbnVldmEgaG9qYS5cbiAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYodHJ1ZSkuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCIsXG4gICAgICAgIH0pO1xuIFxuICAgICAgICAvLyBBY3RpdmEgbGEgbnVldmEgaG9qYSBwYXJhIGVsIHVzdWFyaW8uXG4gICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcbiAgICAgICAgICAgIGFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCIpWzBdXG4gICAgICAgICk7XG4gICAgICAgICBcbiAgICAgICAgXG4gICAgfSxcbn0pO1xuLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxucGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQucHVzaChpZDQuaWQpO1xuXG59XG5cblxuLy8gRXN0YSBwYXJ0ZSBkZWwgY1x1MDBGM2RpZ28gc2VyXHUwMEVEYSBoaXBvdFx1MDBFOXRpY2EgeSBkZXBlbmRlIGRlIGNcdTAwRjNtbyBnZXN0aW9uYXMgZWwgZXN0YWRvIHkgZWwgY2ljbG8gZGUgdmlkYSBkZSBsb3MgY29tYW5kb3MgZW4gdHUgcGx1Z2luLlxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIFxuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQpIHJldHVybjtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBwb2RyXHUwMEVEYXMgbWFuZWphciBsYSBcImRlc2FjdGl2YWNpXHUwMEYzblwiIGRlIGNvbWFuZG9zLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULmZvckVhY2goKGNvbW1hbmRJZDogc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBtb2RhbF9BaG9yYSBleHRlbmRzIE1vZGFsIHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBhcHA6IEFwcDtcbiAgICBob3JhSW5pY2lvSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZmlsZTogVEZpbGUpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFwiQWN0aXZpZGFkIHNpbiBhbGlhc1wiO1xuICAgICAgICAvLyBDb252ZXJ0aXIgaG9yYUluaWNpb1N0ciBhIGZvcm1hdG8gXCJZWVlZLU1NLUREVEhIOk1NXCIgcGFyYSBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb25zdCBob3JhSW5pY2lvU3RyID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5ob3JhSW5pY2lvID8gd2luZG93Lm1vbWVudChtZXRhZGF0YS5mcm9udG1hdHRlci5ob3JhSW5pY2lvLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpIDogJyc7XG5cbiAgICAgICAgLy8gQ29uZmlndXJhIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbCB5IG11ZXN0cmEgZWwgYWxpYXMgZGUgbGEgdGFyZWFcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlZ2lzdHJvIGRlIGFjdGl2aWRhZC5gIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUYXJlYTogXCIke2FsaWFzZXN9XCJgIH0pO1xuICAgICAgICBpZiAoaG9yYUluaWNpb1N0cikge1xuICAgICAgICAgICAgLy8gVXNhciBtb21lbnQgcGFyYSBwYXJzZWFyIGxhIGZlY2hhIGRlIGluaWNpbyB5IGNhbGN1bGFyIGxhIGRpZmVyZW5jaWFcbiAgICAgICAgICAgIGNvbnN0IGhvcmFJbmljaW8gPSB3aW5kb3cubW9tZW50KGhvcmFJbmljaW9TdHIsIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuICAgICAgICAgICAgY29uc3QgYWhvcmEgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gYWhvcmEuZGlmZihob3JhSW5pY2lvKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cmFjaW9uID0gd2luZG93Lm1vbWVudC5kdXJhdGlvbihkaWZmKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmZGb3JtYXR0ZWQgPSBgJHtkdXJhY2lvbi5ob3VycygpfWggJHtkdXJhY2lvbi5taW51dGVzKCl9bWA7XG5cbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYEVzdGEgYWN0aXZpZGFkIGxsZXZhICR7ZGlmZkZvcm1hdHRlZH0gZW4gZWplY3VjaVx1MDBGM24uYCB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogXCJObyBzZSBwdWRvIGRldGVybWluYXIgZWwgdGllbXBvIGRlIGluaWNpbyBkZSBsYSBhY3RpdmlkYWQuXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5wdXQgcGFyYSBsYSBob3JhIGRlIGluaWNpbyBjb24gdGlwbyBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdIb3JhIGRlIGluaWNpbzonIH0pO1xuICAgICAgICB0aGlzLmhvcmFJbmljaW9JbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUtbG9jYWwnLFxuICAgICAgICAgICAgdmFsdWU6IGhvcmFJbmljaW9TdHJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGd1YXJkYXIgY2FtYmlvc1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHdWFyZGFyIGNhbWJpb3MnIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmd1YXJkYXJDYW1iaW9zKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ3VhcmRhckNhbWJpb3MoKSB7XG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUluaWNpb0xvY2FsID0gdGhpcy5ob3JhSW5pY2lvSW5wdXQudmFsdWU7XG4gICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBsYSBudWV2YSBob3JhIHRpZW5lIHZhbG9yIGFudGVzIGRlIGludGVudGFyIGZvcm1hdGVhclxuICAgICAgICBpZiAoIW51ZXZhSG9yYUluaWNpb0xvY2FsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBob3JhIGRlIGluaWNpby5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0aXIgZGUgXCJZWVlZLU1NLUREVEhIOk1NXCIgYSBcIllZWVktTU0tREQgZGRkZCBISDptbVwiXG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUluaWNpbyA9IHdpbmRvdy5tb21lbnQobnVldmFIb3JhSW5pY2lvTG9jYWwpLmZvcm1hdChcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTGVlciBlbCBjb250ZW5pZG8gYWN0dWFsIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG9PcmlnaW5hbCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5maWxlKTtcbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YXIgbGEgbFx1MDBFRG5lYSBkZSBob3JhSW5pY2lvIGNvbiBlbCBudWV2byB2YWxvciBmb3JtYXRlYWRvXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG9BY3R1YWxpemFkbyA9IGNvbnRlbmlkb09yaWdpbmFsLnJlcGxhY2UoLyhob3JhSW5pY2lvOiApLiovLCBgJDEke251ZXZhSG9yYUluaWNpb31gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR3VhcmRhciBsb3MgY2FtYmlvcyBlbiBlbCBhcmNoaXZvXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkodGhpcy5maWxlLCBjb250ZW5pZG9BY3R1YWxpemFkbyk7XG5cbiAgICAgICAgICAgIC8vIENlcnJhciBlbCBtb2RhbCBkZXNwdVx1MDBFOXMgZGUgZ3VhcmRhciBsb3MgY2FtYmlvc1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhvcmEgZGUgaW5pY2lvIGFjdHVhbGl6YWRhIGNvcnJlY3RhbWVudGUuXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGd1YXJkYXIgY2FtYmlvcyBlbiBsYSBub3RhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgYWwgZ3VhcmRhciBsb3MgY2FtYmlvcyBlbiBsYSBub3RhLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvLyBzcmMvZGVmYXVsdHMvZGVmYXVsdFNldHRpbmdzLnRzXG5pbXBvcnQgdHlwZSB7IFBsdWdpbk1haW5TZXR0aW5ncyB9IGZyb20gJy4uL2ludGVyZmFjZXMvcGx1Z2luTWFpblNldHRpbmdzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBsdWdpbk1haW5TZXR0aW5ncyA9IHtcbiAgbW9kdWxvUmVnaXN0cm9UaWVtcG86IHRydWUsXG4gIG1vZHVsb0FsaWFzU3RhdHVzQmFyOiB0cnVlLFxuICBtb2R1bG9CYXNlOiB0cnVlLFxuICBtb2R1bG9HVEQ6IHRydWUsXG4gIGZpbGVfY2FtcG9zQ2VudHJhbCA6XCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFNpc3RlbWEgQ2VudHJhbFwiLCBcbiAgZm9sZGVyX0Fub3RhY2lvbmVzOiBcIkFub3RhY2lvbmVzL05vdGFzXCIsXG4gIGluZGljZV9Bbm90YWNpb25lczogXCJBbm90YWNpb25lcy9JbmRpY2UgQW5vdGFjaW9uZXNcIixcbiAgZm9sZGVyX0FCbG9nOiBcIlN1YnNpc3RlbWFzL0FydGljdWxvcyBCbG9nL0FydGljdWxvc1wiLFxuICBpbmRpY2VfQUJsb2c6IFwiU3Vic2lzdGVtYXMvQXJ0aWN1bG9zIEJsb2cvSW5kaWNlIEFydGljdWxvcyBCbG9nXCIsXG4gIGZvbGRlcl9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9Db2RpZ29zXCIsXG4gIGluZGljZV9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9JbmRpY2UgRGVzYXJyb2xsb1wiLFxuICBmb2xkZXJfRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Fc3R1ZGlvL1RlbWFzXCIsXG4gIGluZGljZV9Fc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0VzdHVkaW8vSW5kaWNlIEVzdHVkaW9cIixcbiAgZm9sZGVyX0xlY3R1cmFTZXNpb25lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL1Nlc2lvbmVzIGRlIExlY3R1cmEvU2VzaW9uZXNcIixcbiAgaW5kaWNlX0xlY3R1cmFTZXNpb25lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL1Nlc2lvbmVzIGRlIExlY3R1cmEvSW5kaWNlIFNlc2lvbmVzIExlY3R1cmFcIixcbiAgZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9MaWJyb3MvUmVzdW1lbmVzXCIsXG4gIGluZGljZV9MZWN0dXJhUmVzdW1lbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvTGlicm9zL0luZGljZSBSZXN1bWVuZXNcIixcbiAgZm9sZGVyX01lbnRvcmlhczogXCJTdWJzaXN0ZW1hcy9NZW50b3JpYXMvU2VzaW9uZXMgTWVudG9yaWFcIixcbiAgaW5kaWNlX01lbnRvcmlhczogXCJTdWJzaXN0ZW1hcy9NZW50b3JpYXMvSW5kaWNlIE1lbnRvcmlhc1wiLFxuICBmb2xkZXJfTWVyY2FkbzogXCJTdWJzaXN0ZW1hcy9NZXJjYWRvL0xpc3Rhc1wiLFxuICBpbmRpY2VfTWVyY2FkbzogXCJTdWJzaXN0ZW1hcy9NZXJjYWRvL0luZGljZSBNZXJjYWRvXCIsXG4gIGZvbGRlcl9Nb2R1bG9zU2lzdGVtYTogXCJTdWJzaXN0ZW1hcy9Nb2R1bG9zIFNpc3RlbWEgR2VzdGlvbi9Nb2R1bG9zXCIsXG4gIGluZGljZV9Nb2R1bG9zU2lzdGVtYTogXCJTdWJzaXN0ZW1hcy9Nb2R1bG9zIFNpc3RlbWEgR2VzdGlvbi9JbmRpY2UgTW9kdWxvc1wiLFxuICBmb2xkZXJfVHJhbnNhY2Npb25lczogXCJTdWJzaXN0ZW1hcy9UcmFuc2FjY2lvbmVzXCIsXG4gIGluZGljZV9UcmFuc2FjY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1RyYW5zYWNjaW9uZXMvSW5kaWNlIFRyYW5zYWNjaW9uZXNcIixcbiAgZm9sZGVyX1ByZXNlbnRhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1ByZXNlbnRhY2lvbmVzL05vdGFzXCIsXG4gIGluZGljZV9QcmVzZW50YWNpb25lczogXCJTdWJzaXN0ZW1hcy9QcmVzZW50YWNpb25lcy9JbmRpY2UgUHJlc2VudGFjaW9uZXNcIixcbiAgZm9sZGVyX1B1YmxpY2FjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHVibGljYWNpb25lcy9QaWV6YXNcIixcbiAgaW5kaWNlX1B1YmxpY2FjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHVibGljYWNpb25lcy9JbmRpY2UgUHVibGljYWNpb25lc1wiLFxuICBmb2xkZXJfUmVjZXRhczogXCJTdWJzaXN0ZW1hcy9SZWNldGFzL1JlY2V0YXNcIixcbiAgaW5kaWNlX1JlY2V0YXM6IFwiU3Vic2lzdGVtYXMvUmVjZXRhcy9JbmRpY2UgUmVjZXRhc1wiLFxuICBmb2xkZXJfUmVnaXN0cm9UaWVtcG86IFwiU3Vic2lzdGVtYXMvUmVnaXN0cm8gVGllbXBvL1JlZ2lzdHJvc1wiLFxuICBpbmRpY2VfUmVnaXN0cm9UaWVtcG86IFwiU3Vic2lzdGVtYXMvUmVnaXN0cm8gVGllbXBvL0luZGljZSBSZWdpc3RybyBUaWVtcG9cIixcbiAgZm9sZGVyX0NvbnRlbmlkb1BhcmFFc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0NvbnRlbmlkbyBwYXJhIEVzdHVkaW8vQ29udGVuaWRvXCIsXG4gIGluZGljZV9Db250ZW5pZG9QYXJhRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Db250ZW5pZG8gcGFyYSBFc3R1ZGlvL0luZGljZSBDb250ZW5pZG8gcGFyYSBFc3R1ZGlvXCIsXG5cblxuICAvLyBFc3RydWN0dXJhXG4gIGZvbGRlcl9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsXG4gIGluZGljZV9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhL0luZGljZSBBcmVhcyBkZSBWaWRhXCIsXG4gIGZvbGRlcl9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzL0luZGljZSBBcmVhcyBkZSBJbnRlcmVzXCIsXG4gIGZvbGRlcl9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzL0luZGljZSBUZW1hcyBkZSBJbnRlcmVzXCIsXG4gIGZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzOiBcIkVzdHJ1Y3R1cmEvUmVjdXJzb3MgUmVjdXJyZW50ZXMvUmVjdXJzb3NcIixcbiAgaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXM6IFwiRXN0cnVjdHVyYS9SZWN1cnNvcyBSZWN1cnJlbnRlcy9JbmRpY2UgUmVjdXJzb3MgUmVjdXJyZW50ZXNcIixcbiAgZm9sZGVyX1Byb3llY3Rvc1E6IFwiRXN0cnVjdHVyYS9Qcm95ZWN0b3MgZGUgUVwiLFxuICBpbmRpY2VfUHJveWVjdG9zUTogXCJFc3RydWN0dXJhL1Byb3llY3RvcyBkZSBRL0luZGljZSBQcm95ZWN0b3MgZGUgUVwiLFxuXG5cbiAgZmlsZV9JbmJveDogXCJFc3RydWN0dXJhL0dURC9CYW5kZWphIGRlIEVudHJhZGEvQmFuZGVqYSBkZSBFbnRyYWRhXCIsXG4gIGZvbGRlcl9Qcm95ZWN0b3NHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUHJveWVjdG9zIEdURC9Qcm95ZWN0b3NcIixcbiAgaW5kaWNlX1Byb3llY3Rvc0dURDogXCJFc3RydWN0dXJhL0dURC9Qcm95ZWN0b3MgR1REL0luZGljZSBQcm95ZWN0b3MgR1REXCIsXG4gIGZvbGRlcl9SU0dURDogXCJFc3RydWN0dXJhL0dURC9SZXZpc2lvbiBTZW1hbmFsL1JldmlzaW9uZXNcIixcbiAgaW5kaWNlX1JTR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1JldmlzaW9uIFNlbWFuYWwvSW5kaWNlIFJldmlzaW9uIFNlbWFuYWxcIixcblxuICAvLyBKb3VybmFsXG4gIGZvbGRlcl9EaWFyaW86IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9Ob3Rhc1wiLFxuICBpbmRpY2VfRGlhcmlvOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9EaWFyaW8vSW5kaWNlIERpYXJpb1wiLFxuICBmb2xkZXJfU2VtYW5hbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvU2VtYW5hbC9Ob3Rhc1wiLFxuICBpbmRpY2VfU2VtYW5hbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvU2VtYW5hbC9JbmRpY2UgU2VtYW5hbFwiLFxuICBmb2xkZXJfTWVuc3VhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvTWVuc3VhbC9Ob3Rhc1wiLFxuICBpbmRpY2VfTWVuc3VhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvTWVuc3VhbC9JbmRpY2UgTWVuc3VhbFwiLFxuICBmb2xkZXJfVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvVHJpbWVzdHJhbC9Ob3Rhc1wiLFxuICBpbmRpY2VfVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvVHJpbWVzdHJhbC9JbmRpY2UgVHJpbWVzdHJhbFwiLFxuICBmb2xkZXJfQW51YWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0FudWFsL05vdGFzXCIsXG4gIGluZGljZV9BbnVhbDogXCJFc3RydWN0dXJhL0pvdXJuYWwvQW51YWwvSW5kaWNlIEFudWFsXCIsXG5cbiAgLy8gQ09NUEFTU1xuICBmb2xkZXJfQ29tcGFzc0FudWFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9SZXBvcnRlcy9BbnVhbFwiLFxuICBpbmRpY2VfQ29tcGFzc0FudWFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9SZXBvcnRlcy9JbmRpY2UgQ29tcGFzcyBBbnVhbFwiLFxuICBmb2xkZXJfQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL1JlcG9ydGVzL1RyaW1lc3RyYWxcIixcbiAgaW5kaWNlX0NvbXBhc3NUcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9SZXBvcnRlcy9JbmRpY2UgQ29tcGFzcyB0cmltZXN0cmFsXCIsXG4gIGZvbGRlcl9PYmpDb21wYXNzQW51YWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9BbnVhbFwiLFxuICBpbmRpY2VfT2JqQ29tcGFzc0FudWFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9PYmpldGl2b3MvSW5kaWNlIENvbXBhc3MgQW51YWxcIixcbiAgZm9sZGVyX09iakNvbXBhc3NUcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9PYmpldGl2b3MvVHJpbWVzdHJhbFwiLFxuICBpbmRpY2VfT2JqQ29tcGFzc1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Db21wYXNzL09iamV0aXZvcy9JbmRpY2UgQ29tcGFzcyB0cmltZXN0cmFsXCIsXG5cblxuICAgLy8gUmVnaXN0cm9zIFBlcnNvbmFsZXNcbiAgIGZvbGRlcl9BZ3JhZGVjaW1pZW50b3M6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvQWdyYWRlY2ltaWVudG9zL05vdGFzXCIsXG4gICBpbmRpY2VfQWdyYWRlY2ltaWVudG9zOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL0FncmFkZWNpbWllbnRvcy9JbmRpY2UgQWdyYWRlY2ltaWVudG9zXCIsXG4gICBmb2xkZXJfUmVmbGV4aW9uZXM6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvUmVmbGV4aW9uZXMvTm90YXNcIixcbiAgIGluZGljZV9SZWZsZXhpb25lczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWZsZXhpb25lcy9JbmRpY2UgUmVmbGV4aW9uZXNcIixcbiAgIGZvbGRlcl9SZWdpc3Ryb3NBa2FzaGlrb3M6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvUmVnaXN0cm9zIEFrYXNoaWtvcy9Ob3Rhc1wiLFxuICAgaW5kaWNlX1JlZ2lzdHJvc0FrYXNoaWtvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9SZWdpc3Ryb3MgQWthc2hpa29zL0luZGljZSBSZWdpc3Ryb3MgQWthc2hpa29zXCIsXG4gICBcbn07XG5cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxcIlxuaW1wb3J0IHttZW51T3Ryb30gZnJvbSAnLi9tZW51T3RybydcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSBcIi4vcmVnaXN0cm9UaWVtcG9BUElcIjtcblxuZXhwb3J0IGNsYXNzIHV0aWxzQVBJIHtcbiAgcHJpdmF0ZSBtZW51T3RybzogbWVudU90cm87XG4gIHBsdWdpbjogUGx1Z2luO1xuXG4gIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgdGhpcy5tZW51T3RybyA9IG5ldyBtZW51T3RybyhwbHVnaW4pO1xuICB9XG4gIC8vIExhIGRlY2xhcmFjaVx1MDBGM24gZGVsIG1cdTAwRTl0b2RvIGVzdGFiYSBhc2k6IGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpXG4gIC8vIERldnVlbHZlIGVsIGZpbGUgZGVsIHJlZ2lzdHJvIGFjdGl2by4gVXRpbGl6YWRvIHBhcmEgY3VhbmRvIG5lY2VzaXRvIG9idGVuZXIgZWwgZGF0byBzb2xhbWVudGUgZGUgc2kgaGF5IGFsZ1x1MDBGQW4gcmVnaXN0cm8gYWN0aXZvLlxuICBhc3luYyBidXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSB7XG4gICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBmcm9udG1hdHRlciBjb250aWVuZSBlbCBjYW1wbyBcImVzdGFkb1wiIGNvbiBlbCB2YWxvciBcIlx1RDgzRFx1REZFMlwiXG4gICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFN1cG9uZW1vcyBxdWUgZXN0YSBmdW5jaVx1MDBGM24gc2UgdWJpY2FyXHUwMEUxIGVuIGFsZ1x1MDBGQW4gbHVnYXIgZG9uZGUgcHVlZGEgYWNjZWRlciBhIGBhcHBgIGRlIE9ic2lkaWFuLlxuICBhc3luYyBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgY29uc3QgYWN0aXZvID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGlmICghYWN0aXZvKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIk5vIGhheSB1biBhcmNoaXZvIGFjdGl2byBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLiBTZSBkZXNjYXJ0YSBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICBjb25zdCBpbmRpY2UgPSBwbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvO1xuXG4gICAgbGV0IG1heElkID0gMDtcblxuICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgY29uc3QgcmVnaXN0cm9zRXhpc3RlbnRlcyA9IGZpbGVzLmZpbHRlcigoZmlsZTogeyBwYXRoOiBzdHJpbmcgfSkgPT5cbiAgICAgIGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcilcbiAgICApO1xuXG4gICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBidXNjYXIgbG9zIElEcyBlbiBlbCBmcm9udG1hdHRlclxuICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBFbCBwclx1MDBGM3hpbW8gSUQgZGlzcG9uaWJsZVxuICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcblxuICAgIC8vIEZvcm1hdGVhciBsYSBmZWNoYSBhY3R1YWxcbiAgICBjb25zdCBmZWNoYUNvbXBsZXRhID0gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcblxuICAgIHJldHVybiB7XG4gICAgICBhY3Rpdm8sXG4gICAgICBub21icmU6IGFjdGl2by5iYXNlbmFtZSxcbiAgICAgIGZvbGRlcixcbiAgICAgIGluZGljZSxcbiAgICAgIGlkOiBuZXh0SWQsXG4gICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgIGluZGljZV9EVkpTOiBgXCIke2luZGljZX1cImAsXG4gICAgfTtcbiAgfVxuXG4gIGZvcm1hdGVhckZlY2hhKGZlY2hhOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgY29uc3QgZmVjaGFGb3JtYXRvID0gZmVjaGFMb2NhbC50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXTtcbiAgICBjb25zdCBkaWFzID0gW1xuICAgICAgXCJEb21pbmdvXCIsXG4gICAgICBcIkx1bmVzXCIsXG4gICAgICBcIk1hcnRlc1wiLFxuICAgICAgXCJNaVx1MDBFOXJjb2xlc1wiLFxuICAgICAgXCJKdWV2ZXNcIixcbiAgICAgIFwiVmllcm5lc1wiLFxuICAgICAgXCJTXHUwMEUxYmFkb1wiLFxuICAgIF07XG4gICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdChcIiBcIilbMF0uc3Vic3RyaW5nKDAsIDUpO1xuICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gIH1cblxuICAvLyBNXHUwMEU5dG9kbyBxdWUgdmVyaWZpY2Egc2kgaGF5IHJlZ2lzdHJvcyBBQ3Rpdm9zIHkgcHJlZ3VudGEgc2kgcXVpZXJlIGNlcnJhcmxvcy5cbiAgYXN5bmMgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCB0YXJlYXNBY3RpdmFzID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVnaXN0cm8uZm9sZGVyKSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgdGFyZWFzQWN0aXZhcy5wdXNoKHtcbiAgICAgICAgICAgIGZpbGUsXG4gICAgICAgICAgICB0aXR1bG86IG1ldGFkYXRhLnRpdHVsbyxcbiAgICAgICAgICAgIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3QgdGFyZWFBY3RpdmEgPSB0YXJlYXNBY3RpdmFzWzBdO1xuICAgICAgY29uc3QgZGVzZWFEZXRlbmVyID0gYXdhaXQgdGhpcy5tb3N0cmFyU3VnZXJlbmNpYShcbiAgICAgICAgYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gZXN0XHUwMEUxIGNvcnJpZW5kby4gXHUwMEJGRGVzZWEgZGV0ZW5lcmxhP2BcbiAgICAgICk7XG4gICAgICBpZiAoZGVzZWFEZXRlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uYCk7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChkZXNlYURldGVuZXIpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvQVBJbnN0YW5jZSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGF3YWl0IHJlZ2lzdHJvVGllbXBvQVBJbnN0YW5jZS5jZXJyYXJSZWdpc3Rybyh0YXJlYUFjdGl2YS5maWxlKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBzZWd1aXJcdTAwRTEgcmVnaXN0clx1MDBFMW5kb3NlLmApO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGFyZWFzQWN0aXZhcy5sZW5ndGggPiAxKSB7XG4gICAgICBuZXcgTm90aWNlKFxuICAgICAgICBcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCJcbiAgICAgICk7XG4gICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJObyBoYXkgbVx1MDBFMXMgdGFyZWFzIGNvcnJpZW5kby5cIik7XG4gICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gSW5kaWNhIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuXG4gICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAvLyBDcmVhciBjb250ZW5lZG9yIHBhcmEgYm90b25lc1xuICAgICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiKTtcblxuICAgICAgLy8gRnVuY2lcdTAwRjNuIGF1eGlsaWFyIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyB5IGNlcnJhciBlbCBtb2RhbCBhZGVjdWFkYW1lbnRlXG4gICAgICBjb25zdCBoYWNlclNlbGVjY2lvbiA9IChzZWxlY2Npb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgc2VsZWNjaW9uYWRvID0gdHJ1ZTsgLy8gTWFyY2FyIHF1ZSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cbiAgICAgICAgbW9kYWwuY2xvc2UoKTsgLy8gQ2VycmFyIGVsIG1vZGFsXG4gICAgICAgIHJlc29sdmUoc2VsZWNjaW9uKTsgLy8gUmVzb2x2ZXIgbGEgcHJvbWVzYSBjb24gbGEgc2VsZWNjaVx1MDBGM25cbiAgICAgIH07XG5cbiAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgY29uc3QgeWVzQnV0dG9uID0gYnV0dG9uc0NvbnRhaW5lci5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgIHRleHQ6IFwiU1x1MDBFRFwiLFxuICAgICAgfSk7XG4gICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGhhY2VyU2VsZWNjaW9uKHRydWUpKTtcblxuICAgICAgLy8gQm90XHUwMEYzbiBOb1xuICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdGV4dDogXCJOb1wiLFxuICAgICAgfSk7XG4gICAgICBub0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFjZXJTZWxlY2Npb24oZmFsc2UpKTtcblxuICAgICAgbW9kYWwub25DbG9zZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAvLyBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBzZSBoYXlhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVjaGF6YXIgbGEgcHJvbWVzYVxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJNb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzblwiKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIEFncmVnYXIgZXNjdWNoYXMgZGUgZXZlbnRvcyBkZSB0ZWNsYWRvIHBhcmEgcGVybWl0aXIgbGEgbmF2ZWdhY2lcdTAwRjNuIGNvbiBlbCB0ZWNsYWRvXG4gICAgICBtb2RhbC5jb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGU6IHsga2V5OiBhbnkgfSkgPT4ge1xuICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgY2FzZSBcIkFycm93TGVmdFwiOlxuICAgICAgICAgICAgeWVzQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQXJyb3dSaWdodFwiOlxuICAgICAgICAgICAgbm9CdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJFbnRlclwiOlxuICAgICAgICAgICAgLy8gU2ltdWxhIGNsaWMgZW4gZWwgYm90XHUwMEYzbiBlbmZvY2Fkb1xuICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uY2xpY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gRW5mb2NhciBpbmljaWFsbWVudGUgZWwgYm90XHUwMEYzbiAnU1x1MDBFRCcgcGFyYSBwZXJtaXRpciBsYSBuYXZlZ2FjaVx1MDBGM24gY29uIHRlY2xhZG8gZGVzZGUgZWwgaW5pY2lvXG4gICAgICB5ZXNCdXR0b24uZm9jdXMoKTtcblxuICAgICAgbW9kYWwub3BlbigpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAgIGNvbnN0IHRvdFRhcmVhcyA9IGF3YWl0IHRoaXMuZW5jb250cmFyVGFyZWFzUGVuZGllbnRlcyhhcHApOyAvLyBQYXNvIGBhcHBgIGNvbW8gYXJndW1lbnRvXG5cbiAgICBsZXQgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb247XG4gICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiQWxndW5hIHRhcmVhIGVuIEVqZWN1Y2lcdTAwRjNuXCIsIFwiT3Ryb1wiXTtcbiAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiT3Ryb1wiXTtcbiAgICB9XG4gICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIlx1MDBCRlNvYnJlIHF1XHUwMEU5IGVzIGVsIHJlZ2lzdHJvIGRlIHRpZW1wbz9cIjtcblxuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoXG4gICAgICBhcHAsXG4gICAgICBvcGNpb25lc1RpdHVsbyxcbiAgICAgIHZhbG9yZXNPcGNpb24sXG4gICAgICBwbGFjZWhvbGRlclxuICAgICk7XG5cbiAgICAvLyBFc3BlcmEgYXNpbmNyXHUwMEYzbmljYW1lbnRlIGxhIHNlbGVjY2lcdTAwRjNuIGRlbCB1c3VhcmlvIGFudGVzIGRlIGNvbnRpbnVhci5cbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgbW9kYWxNZW51MS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgICAgIC8vIFByb2Nlc2FyIGxhIHNlbGVjY2lcdTAwRjNuIGRlbCB1c3VhcmlvIGFxdVx1MDBFRC5cbiAgICAgIC8vIEVsIGNcdTAwRjNkaWdvIHN1YnNpZ3VpZW50ZSBkZXBlbmRlIGRlbCB0aXBvIGRlIHJlZ2lzdHJvIHNlbGVjY2lvbmFkby5cbiAgICAgIHN3aXRjaCAocmVnaXN0cm8udGlwb1JlZ2lzdHJvKSB7XG4gICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIHJlZ2lzdHJvID0gdGhpcy5jb3BpYXJDYW1wb3MocmVnaXN0cm8pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiVGFyZWFcIjpcbiAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG5cbiAgICAgICAgICBhd2FpdCB0aGlzLmVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgIGxldCByZXNwdWVzdGEgPSBhd2FpdCB0aGlzLm1lbnVPdHJvLm1lbnVPdHJvKGFwcCwgcmVnaXN0cm8pO1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVnaXN0cm8sIHJlc3B1ZXN0YSk7IC8vIHRpdHVsbywgc2lBc3VudG8sIG5vbWJyZVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgZXN0YWJsZWNlciB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBwYXJhIHJlZ2lzdHJvLmRldGVuZXIgYXF1XHUwMEVELlxuICAgIH1cbiAgfVxuXG4gIGNvcGlhckNhbXBvcyhyZWdpc3Rybyl7XG4gICAgbGV0IG5vbWJyZSA9IHJlZ2lzdHJvLmFjdGl2by5iYXNlbmFtZTtcbiAgICBsZXQgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Ryby5hY3Rpdm8pO1xuICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIil7IFxuICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBQUS5cbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub21icmU7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyByZWdpc3Ryby5wcm95ZWN0b0dURCBjb24gdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gZGUgY2FkZW5hIHZhY1x1MDBFRGFcbiAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCByZWdpc3Ryby5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcblxuICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gcmVnaXN0cm8ucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gcmVnaXN0cm8ucHJveWVjdG9HVEQuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSByZWdpc3Ryby5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICB9XG4gICAgICAgICAgIFxuICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgcmVnaXN0cm8ucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgfVxuICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSByZWdpc3Ryby5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gXCJcIjtcbiAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiByZWdpc3RybztcbiAgfVxuXG4gIGFzeW5jIGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoXG4gICAgYXBwOiBBcHBcbiAgKTogUHJvbWlzZTx7IHRhcmVhOiBzdHJpbmc7IGFyY2hpdm86IFRGaWxlIH1bXT4ge1xuICAgIGxldCB0YXJlYXNQZW5kaWVudGVzOiB7IHRhcmVhOiBzdHJpbmc7IGFyY2hpdm86IFRGaWxlIH1bXSA9IFtdO1xuICAgIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoXG4gICAgICAoYXJjaGl2bzogeyBwYXRoOiBzdHJpbmcgfSkgPT4gIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIilcbiAgICApO1xuXG4gICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zUmVsZXZhbnRlcykge1xuICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gY29udGVuaWRvLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi9nbSkgfHwgW107XG5cbiAgICAgIC8vIFBhcmEgY2FkYSB0YXJlYSBlbmNvbnRyYWRhLCBjcmVhIHVuIG9iamV0byBjb24gbGEgdGFyZWEgbGltcGlhIHkgZWwgYXJjaGl2byBhY3R1YWwsIHkgbG8gYWdyZWdhIGFsIGFycmVnbG9cbiAgICAgIGNvbnN0IHRhcmVhc0NvbkFyY2hpdm8gPSBjb2luY2lkZW5jaWFzLm1hcCgodGFyZWE6IHN0cmluZykgPT4ge1xuICAgICAgICByZXR1cm4geyB0YXJlYTogdGFyZWEudHJpbSgpLCBhcmNoaXZvOiBhcmNoaXZvIH07XG4gICAgICB9KTtcbiAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNDb25BcmNoaXZvKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmVhc1BlbmRpZW50ZXM7XG4gIH1cblxuICBhc3luYyBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhcbiAgICBhcHA6IEFwcCxcbiAgICByZWdpc3RybzogYW55LFxuICAgIHRhcmVhc1BlbmRpZW50ZXM6IGFueVxuICApIHtcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiRWxpZ2UgbGEgdGFyZWEgcXVlIHZhcyBhIHJlZ2lzdHJhci5cIjtcblxuICAgIC8vIE1hcCBwYXJhIGV4dHJhZXIgeSBsaW1waWFyIHNvbG8gbGFzIHRhcmVhc1xuICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCgodGFyZWFPYmo6IHsgdGFyZWE6IHN0cmluZyB9KSA9PlxuICAgICAgdGhpcy5saW1waWFyVGV4dG9UYXJlYSh0YXJlYU9iai50YXJlYSlcbiAgICApO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIEVzcGVyYSBhIHF1ZSB0b2RhcyBsYXMgcHJvbWVzYXMgZW4gcHJvbWVzYXNMaW1waWFzIHNlIHJlc3VlbHZhblxuICAgICAgY29uc3QgdGFyZWFzTGltcGlhcyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcyk7XG5cbiAgICAgIC8vIFJlY29uc3RydWlyIGxvcyBvYmpldG9zIGNvbiBsYXMgdGFyZWFzIGxpbXBpYXMgbWFudGVuaWVuZG8gbGEgcmVmZXJlbmNpYSBhbCBhcmNoaXZvXG4gICAgICBjb25zdCB0YXJlYXNMaW1waWFzQ29uQXJjaGl2byA9IHRhcmVhc1BlbmRpZW50ZXMubWFwKFxuICAgICAgICAodGFyZWFPYmo6IHsgYXJjaGl2bzogYW55IH0sIGluZGV4OiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZWE6IHRhcmVhc0xpbXBpYXNbaW5kZXhdLCAvLyBUYXJlYSBsaW1waWFcbiAgICAgICAgICAgIGFyY2hpdm86IHRhcmVhT2JqLmFyY2hpdm8sIC8vIFJlZmVyZW5jaWEgYWwgYXJjaGl2byBvcmlnaW5hbFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIC8vIEVzdGFzIGRvcyBsXHUwMEVEbmVhcyBtZSBnZW5lcmFuIHVuIGFycmVnbG8gZGUgaW5kaWNlcyBwYXJhIHN1bWluaXN0cmFyIGVsIHZhbG9yIGFsIG1vZGFsLlxuICAgICAgY29uc3QgbG9uZ2l0dWQgPSB0YXJlYXNMaW1waWFzQ29uQXJjaGl2by5sZW5ndGg7XG4gICAgICBjb25zdCBhcnJlZ2xvRGVJbmRpY2VzID0gQXJyYXkuZnJvbShcbiAgICAgICAgeyBsZW5ndGg6IGxvbmdpdHVkIH0sXG4gICAgICAgIChfLCBpbmRpY2UpID0+IGluZGljZVxuICAgICAgKTtcblxuICAgICAgY29uc3QgbW9kYWxNZW51ID0gbmV3IFNlbGVjY2lvbk1vZGFsKFxuICAgICAgICBhcHAsXG4gICAgICAgIHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvLm1hcCgoYjogeyB0YXJlYTogYW55IH0pID0+IGIudGFyZWEpLFxuICAgICAgICBhcnJlZ2xvRGVJbmRpY2VzLFxuICAgICAgICBwbGFjZWhvbGRlclxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEVzcGVyYSBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuIGVuIGVsIG1vZGFsXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBhd2FpdCBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG5cbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHNlbGVjY2lcdTAwRjNuIGNvcnJlc3BvbmRhIGFsIFx1MDBFRG5kaWNlIGNvcnJlY3RvIGVuIHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvXG4gICAgICAgIGNvbnN0IHNlbGVjY2lvbiA9IHRhcmVhc0xpbXBpYXNDb25BcmNoaXZvW3NlbGVjdGVkSW5kZXhdO1xuICAgICAgICByZWdpc3Ryby50aXR1bG8gPSBzZWxlY2Npb24udGFyZWE7IC8vIG8gY1x1MDBGM21vIGhheWFzIGRlY2lkaWRvIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gbGltcGlhXG4gICAgICAgIHJlZ2lzdHJvLm5vbWJyZSA9IHNlbGVjY2lvbi5hcmNoaXZvLmJhc2VuYW1lO1xuICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBvIGNpZXJyZSBkZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBlbiBsYSBsaW1waWV6YSBkZSB0YXJlYXNcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJIdWJvIHVuIGVycm9yIGFsIGxpbXBpYXIgbGFzIHRhcmVhczpcIiwgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIGxpbXBpYXJUZXh0b1RhcmVhKHRpdHVsbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIEVsaW1pbmEgdG9kbyBkZXNwdVx1MDBFOXMgZGVsIHByaW1lciBzYWx0byBkZSBsXHUwMEVEbmVhLlxuICAgICAgbGV0IHRleHRvTGltcGlvID0gdGl0dWxvLnNwbGl0KFwiXFxuXCIpWzBdO1xuXG4gICAgICAvLyBFbGltaW5hIGxvcyB0YWdzIGRlIGVzdGlsbyBNYXJrZG93bi5cbiAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvI1tcXHctL10rL2csIFwiXCIpO1xuXG4gICAgICAvLyBFbGltaW5hIGxvcyBjYW1wb3MgZGUgZXN0aWxvIERhdGF2aWV3LlxuICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtcXHcrOjpbXlxcXV0rXFxdL2csIFwiXCIpO1xuXG4gICAgICAvLyBFbGltaW5hIGVsIHBhdHJcdTAwRjNuIFwiIC0gWy9dXCIgYWwgaW5pY2lvIGRlIGxhIGNhZGVuYSwgaW5jbHV5ZW5kbyBwb3NpYmxlcyBlc3BhY2lvcyBhbnRlcyBvIGRlc3B1XHUwMEU5cy5cbiAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCBcIlwiKTtcblxuICAgICAgLy8gUmVlbXBsYXphIGNhcmFjdGVyZXMgbm8gcGVybWl0aWRvcyBlbiBub21icmVzIGRlIGFyY2hpdm8gY29uIHVuIGd1aW9uIGJham8gbyBhbGdcdTAwRkFuIG90cm8gY2FyYWN0ZXIgc2VndXJvLlxuICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xuXG4gICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBjb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBsZXQgbm9tYnJlQmFzZSA9IGAke3JlZ2lzdHJvLmZvbGRlcn0vUlQgLSAke3JlZ2lzdHJvLmlkfWA7XG5cbiAgICBsZXQgYWxpYXNMaW1waW8gPSB0aGlzLmxpbXBpYXJBbGlhcyhyZWdpc3Ryby50aXR1bG8pO1xuICAgIGFsaWFzTGltcGlvID1cbiAgICAgIGFsaWFzTGltcGlvLmxlbmd0aCA+IDE5NSA/IGFsaWFzTGltcGlvLnNsaWNlKDAsIDE5NSkgOiBhbGlhc0xpbXBpbztcblxuICAgIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgbGV0IHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGFyY2hpdm8gb2YgYXJjaGl2b3MpIHtcbiAgICAgIGlmIChhcmNoaXZvLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgIC8vIFVzYW1vcyBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlIGxhIG5vdGFcbiAgICAgICAgY29uc3QgbWV0YWRhdG9zID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgICAvLyBBc2VndXJhbW9zIHF1ZSBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIgY29udGVuZ2EgbG9zIGNhbXBvcyBuZWNlc2FyaW9zXG4gICAgICAgIGlmIChcbiAgICAgICAgICBtZXRhZGF0b3MgJiZcbiAgICAgICAgICBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIgJiZcbiAgICAgICAgICBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIudGl0dWxvID09PSByZWdpc3Ryby50aXR1bG9cbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaWRTZWMgPSBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIuaWRTZWM7XG4gICAgICAgICAgaWYgKGlkU2VjICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLnB1c2goeyBhcmNoaXZvLCBpZFNlYyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZGVidWdnZXI7XG4gICAgLy8gT3JkZW5hbW9zIGxvcyByZXN1bHRhZG9zIHBvciBpZFNlYyBlbiBvcmRlbiBkZXNjZW5kZW50ZVxuICAgIHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLnNvcnQoKGIpID0+IGIuaWRTZWMsIFwiZGVzY1wiKTtcblxuICAgIHJlZ2lzdHJvLmlkU2VjID1cbiAgICAgIHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLmxlbmd0aCA+IDBcbiAgICAgICAgPyBwYXJzZUludChyZWdpc3Ryb3NDb25NaXNtb1RpdHVsb1swXS5pZFNlYykgKyAxXG4gICAgICAgIDogMTtcblxuICAgIGlmIChyZWdpc3Ryby5pZFNlYyA+IDEpIHtcbiAgICAgIGFsaWFzTGltcGlvICs9IGAgLSAke3JlZ2lzdHJvLmlkU2VjfWA7XG4gICAgfVxuXG4gICAgLy8gSW5pY2lhbGl6YSByZWdpc3Ryby5hbGlhc2VzIGNvbW8gdW4gYXJyZWdsbyB2YWNcdTAwRURvXG4gICAgcmVnaXN0cm8uYWxpYXNlcyA9IFtdO1xuXG4gICAgLy8gQWdyZWdhIGVsIGFsaWFzIGxpbXBpbyBjb24gZWwgcHJlZmlqb1xuICAgIHJlZ2lzdHJvLmFsaWFzZXMucHVzaChgUlQgLSAke2FsaWFzTGltcGlvfWApO1xuXG4gICAgaWYgKHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9PT0gXCJOb3RhXCIpIHtcbiAgICAgIC8vIE9idFx1MDBFOW4gZWwgYXJjaGl2byBhY3Rpdm9cbiAgICAgIGNvbnN0IGFyY2hpdm9BY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgIGlmICghYXJjaGl2b0FjdGl2bykgcmV0dXJuOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgaGF5YSB1biBhcmNoaXZvIGFjdGl2b1xuXG4gICAgICAvLyBPYnRcdTAwRTluIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gYWN0aXZvXG4gICAgICBjb25zdCBtZXRhZGF0b3NBY3Rpdm8gPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2b0FjdGl2byk7XG5cbiAgICAgIC8vIEV4dHJhZSBhbGlhc2VzIGRlbCBmcm9udG1hdHRlciwgYXNlZ3VyXHUwMEUxbmRvdGUgZGUgcXVlIGV4aXN0YW4geSBhY2NlZGllbmRvIGNvcnJlY3RhbWVudGVcbiAgICAgIGNvbnN0IGFsaWFzZXNBY3Rpdm8gPVxuICAgICAgICBtZXRhZGF0b3NBY3Rpdm8gJiYgbWV0YWRhdG9zQWN0aXZvLmZyb250bWF0dGVyXG4gICAgICAgICAgPyBtZXRhZGF0b3NBY3Rpdm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1xuICAgICAgICAgIDogdW5kZWZpbmVkO1xuXG4gICAgICAvLyBWZXJpZmljYSBzaSBhbGlhc2VzQWN0aXZvIGV4aXN0ZSB5IGRldGVybWluYSBzaSBlcyB1biBhcnJlZ2xvIG8gdW5hIGNhZGVuYVxuICAgICAgaWYgKGFsaWFzZXNBY3Rpdm8pIHtcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEFsaWFzZXMgPSBBcnJheS5pc0FycmF5KGFsaWFzZXNBY3Rpdm8pXG4gICAgICAgICAgPyBhbGlhc2VzQWN0aXZvXG4gICAgICAgICAgOiBbYWxpYXNlc0FjdGl2b107IC8vIENvbnZpZXJ0ZSBhIGFycmVnbG8gc2kgZXMgdW5hIGNhZGVuYVxuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgY2FkYSBhbGlhcyBhZGljaW9uYWwgY29uIGVsIHByZWZpam8gXCJSVCAtIFwiXG4gICAgICAgIGFkZGl0aW9uYWxBbGlhc2VzLmZvckVhY2goKGFsaWFzKSA9PiB7XG4gICAgICAgICAgcmVnaXN0cm8uYWxpYXNlcy5wdXNoKGBSVCAtICR7YWxpYXN9YCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlZ2lzdHJvLm5hbWVGaWxlID0gbm9tYnJlQmFzZTtcbiAgfVxuXG4gIGxpbXBpYXJBbGlhcyh0aXR1bG86IHN0cmluZykge1xuICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby5cbiAgICBjb25zdCBjYXJhY3RlcmVzTm9QZXJtaXRpZG9zID0gL1s8PjpcIlxcL1xcXFx8PypcXHgwMC1cXHgxRl0vZztcbiAgICBsZXQgdGl0dWxvTGltcGlvID0gdGl0dWxvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgLy8gUmVlbXBsYXphIGVzcGFjaW9zIG1cdTAwRkFsdGlwbGVzIHBvciB1biBcdTAwRkFuaWNvIGVzcGFjaW8gcGFyYSBldml0YXIgbm9tYnJlcyBkZSBhcmNoaXZvIGV4Y2VzaXZhbWVudGUgbGFyZ29zLlxuICAgIHRpdHVsb0xpbXBpbyA9IHRpdHVsb0xpbXBpby5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblxuICAgIHJldHVybiB0aXR1bG9MaW1waW8udHJpbSgpO1xuICB9XG59IiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE1vZGFsLCBGdXp6eVN1Z2dlc3RNb2RhbCwgRnV6enlNYXRjaCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbFwiO1xuaW1wb3J0IHtmdXp6eVNlbGVjdE9yQ3JlYXRlfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9mdXp6eVNlbGVjdE9yQ3JlYXRlXCI7XG5pbXBvcnQge0RhdGVUaW1lfSBmcm9tICdsdXhvbidcblxuaW50ZXJmYWNlIEdydXBvQWN0aXZpZGFkIHtcbiAgICBncnVwbzogc3RyaW5nO1xuICAgIGFjdGl2aWRhZDogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgbWVudU90cm8ge1xuICAgIFxuICAgIHBhdGhDYW1wb3M6IHN0cmluZyA9IFwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBSZWdpc3RybyBUaWVtcG8ubWRcIjtcbiAgICBzZWxlY3RlZEFjdGl2aXR5OiBzdHJpbmcgPVwiXCI7XG4gICAgc2VsZWN0ZWRHcm91cDogc3RyaW5nID0gXCJcIjtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5mdXp6eVNlbGVjdE9yQyA9IG5ldyBmdXp6eVNlbGVjdE9yQ3JlYXRlKHRoaXMuYXBwLCBwbHVnaW4pO1xuICAgICAgfVxuICAgIFxuICAgICAgYXN5bmMgbWVudU90cm8gKGFwcDogQXBwLCByZWdpc3RybzogYW55KXtcbiAgICAgICAgY29uc3Qgb3BjaW9uZXNPdHJvID0gW1wiUHJvcGlhc1wiLCBcIkFyZWFzIGRlIFZpZGFcIiwgXCJBcmVhcyBkZSBJbnRlclx1MDBFOXNcIiwgXCJQcm95ZWN0b3MgZGUgUVwiLCBcIlByb3llY3RvcyBHVERcIiwgXCJUZW1hIGRlIEludGVyXHUwMEU5c1wiLCBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXSA7XG4gICAgICAgIGNvbnN0IHZhbG9yZXNPdHJvID0gW1wiaGFiXCIsIFwiYWN0c0FWXCIsIFwiYWN0c0FJXCIsIFwiYWN0c1BRXCIsIFwiYWN0c1BHVERcIiwgXCJhY3RzVElcIiwgXCJhY3RzUlJcIl07XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyT3RybyA9IFwiXHUwMEJGUXVlIGNhdGVnb3JpYT9cIjtcbiAgICAgICAgY29uc3QgbW9kYWxPdHJvID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXNPdHJvLCB2YWxvcmVzT3RybywgcGxhY2Vob2xkZXJPdHJvKTtcbiAgICAgICAgbGV0IHRlbWFPdHJvOntncnVwbzpzdHJpbmc7YWN0aXZpZGFkOnN0cmluZyxub21icmU6c3RyaW5nfTtcbiAgICAgICAgbGV0IHNpQXN1bnRvOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3Rpb25PdHJvID0gYXdhaXQgbW9kYWxPdHJvLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgc3dpdGNoKHNlbGVjdGlvbk90cm8pIHtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJoYWJcIjpcbiAgICAgICAgICAgICAgICAgICAgdGVtYU90cm8gPSBhd2FpdCB0aGlzLmhhYml0dWFsKGFwcCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FJXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNQUVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzVElcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1JSXCI6XG4gICAgICAgICAgICAgICAgICAgIHRlbWFPdHJvID0gYXdhaXQgdGhpcy5lbGVtU0coYXBwLHNlbGVjdGlvbk90cm8pOyBcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiYnVzXCI6XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgcmV0dXJuIHt0aXR1bG86IHRlbWFPdHJvLmFjdGl2aWRhZCArIFwiIC8gXCIgKyB0ZW1hT3Ryby5ncnVwbywgc2lBc3VudG8gLG5vbWJyZTogdGVtYU90cm8uZ3J1cG8sIGFyZWFWaWRhOiB0ZW1hT3Ryby5ncnVwb31cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGhhYml0dWFsIChhcHA6IEFwcCl7XG4gICAgICAgICAgICBjb25zdCBncnVwb3MgPSBhd2FpdCB0aGlzLmdldEZyb250bWF0dGVyRmllbGQoYXBwLHRoaXMucGF0aENhbXBvcywgXCJ0ZW1hc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdHNHcnVwb3MgPSBhd2FpdCB0aGlzLnJlc3VsdFlhbWwoYXBwLFwiYWN0c1RlbWFzXCIpXG4gICAgICAgICAgICAvLyBGaWx0cmFyIHkgcHJlcGFyYXIgbGFzIGFjdGl2aWRhZGVzIGV4aXN0ZW50ZXMgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhXG4gICAgICAgICAgICBsZXQgaXRlbXNGb3JTZWFyY2ggPSBhY3RzR3J1cG9zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBncnVwb3MuaW5jbHVkZXMoaXRlbS5ncnVwbykpIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtpdGVtLmFjdGl2aWRhZH0gLyAke2l0ZW0uZ3J1cG99YCwgLy8gQ2FtYmlhIGVsIG9yZGVuIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBpdGVtLmFjdGl2aWRhZCwgLy8gVXNhIGxhIHByb3BpZWRhZCAnYWN0aXZpZGFkJyBlbiBsdWdhciBkZSBpdGVtWzFdXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGl0ZW0uZ3J1cG8sXG4gICAgICAgICAgICAgICAgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGxldCBlbGVjY2lvbiA9IGF3YWl0IHRoaXMuZnV6enlTZWxlY3RPckMuc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXNGb3JTZWFyY2gsIGdydXBvcyk7XG4gICAgICAgICAgICBsZXQgb2JqRWxlY2Npb24gPSB7Z3J1cG86IGVsZWNjaW9uWzFdLCBhY3RpdmlkYWQ6IGVsZWNjaW9uWzBdLCBub21icmU6IFwiXCJ9O1xuICAgICAgICAgICAgcmV0dXJuIG9iakVsZWNjaW9uOyAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgbmluZ3VubyAoYXBwOiBBcHApe1xuXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyAgZWxlbVNHIChhcHA6IEFwcCwgdGlwbyA6IHN0cmluZyk6IFByb21pc2U8YW55PntcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2aWRhZGVzID0gYXdhaXQgdGhpcy5yZXN1bHRZYW1sKGFwcCwgdGlwbylcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZVNHID0gYXdhaXQgdGhpcy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKGFwcCx0aXBvKVxuICAgICAgICAgICAgLy8gRXh0cmFlIGVsIHByaW1lciBhbGlhcyBkZSBjYWRhIG5vdGEgZW5jb250cmFkYSB5IGxvcyBhbG1hY2VuYSBlbiB1biBhcnJheVxuICAgICAgICAgICAgbGV0IGdyb3VwcztcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgc3dpdGNoICh0aXBvKXtcbiAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICBncm91cHMgPSBhY3RpdmVTRy5tYXAocGFnZSA9PiBwYWdlLmZyb250bWF0dGVyLmFyZWFWaWRhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZ3JvdXBzID0gYWN0aXZlU0cubWFwKHBhZ2UgPT4gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzID8gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzWzBdIDogbnVsbCkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmlsdHJhciB5IHByZXBhcmFyIGxhcyBhY3RpdmlkYWRlcyBleGlzdGVudGVzIHBhcmEgbGEgYlx1MDBGQXNxdWVkYVxuICAgICAgICAgICAgbGV0IGl0ZW1zRm9yU2VhcmNoID0gYWN0aXZpZGFkZXNcbiAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGdyb3Vwcy5pbmNsdWRlcyhpdGVtLmdydXBvKSkgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGAke2l0ZW0uYWN0aXZpZGFkfSAvICR7aXRlbS5ncnVwb31gLCAvLyBDYW1iaWEgZWwgb3JkZW4gc2kgZXMgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgYWN0aXZpdHk6IGl0ZW0uYWN0aXZpZGFkLCAvLyBVc2EgbGEgcHJvcGllZGFkICdhY3RpdmlkYWQnIGVuIGx1Z2FyIGRlIGl0ZW1bMV1cbiAgICAgICAgICAgICAgICBncm91cDogaXRlbS5ncnVwbyxcbiAgICAgICAgICAgICAgICAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgLy8gTW9zdHJhbW9zIGVsIG1vZGFsIGNvbiBsYXMgb3BjaW9uZXMgZGUgYlx1MDBGQXNxdWVkYVxuXG4gICAgICAgICAgICBsZXQgZWxlY2Npb24gPSBhd2FpdCB0aGlzLmZ1enp5U2VsZWN0T3JDLnNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zRm9yU2VhcmNoLCBncm91cHMsIHRpcG8pO1xuICAgICAgICAgICAgY29uc3QgZm91bmRFbGVtZW50ID0gYWN0aXZlU0cuZmluZChiID0+IGIuZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA9PT0gZWxlY2Npb25bMV0pO1xuICAgICAgICAgICAgLy8gU2kgc2UgZW5jdWVudHJhIGVsIGVsZW1lbnRvLCBkZXZvbHZlciBmcm9udG1hdHRlci5hbGlhc2VzWzFdXG4gICAgICAgICAgICBsZXQgYWxpYXMgPSBmb3VuZEVsZW1lbnQ/LmZpbGUucGF0aDtcbiAgICAgICAgICAgIGxldCBvYmpFbGVjY2lvbiA9IHtncnVwbzogZWxlY2Npb25bMV0sIGFjdGl2aWRhZDogZWxlY2Npb25bMF0sIG5vbWJyZTogYWxpYXN9O1xuICAgICAgICAgICAgcmV0dXJuIG9iakVsZWNjaW9uOyAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBidXNjYXIgKGFwcDogQXBwKXtcblxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgIHJlc3VsdFlhbWwoYXBwOiBBcHAsIHRlbWE6IHN0cmluZyk6IFByb21pc2U8R3J1cG9BY3RpdmlkYWRbXT4ge1xuICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIGFyY2hpdm8gcG9yIHN1IHJ1dGFcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQWNjZWRlIGFsIGZyb250IG1hdHRlciAoWUFNTCkgZGVsIGFyY2hpdm8geSBvYnRpZW5lIGVsIGFycmVnbG8gYmFzYWRvIGVuIGVsIHRlbWFcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJyZWdsb1Jlc3VsdCA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uW3RlbWFdIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnN0cnV5ZSBlbCBhcnJlZ2xvIGRlIG9iamV0b3MgcmVzdWx0YWRvIGJhc2FkbyBlbiBsYSBlc3RydWN0dXJhIGRlIEdydXBvQWN0aXZpZGFkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbzogR3J1cG9BY3RpdmlkYWRbXSA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9SZXN1bHQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJlZ2xvUmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRhZG8ucHVzaCh7IGdydXBvOiBpdGVtWzBdLCBhY3RpdmlkYWQ6IGl0ZW1bMV0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRhZG87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIERldnVlbHZlIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBzaSBubyBzZSBlbmN1ZW50cmEgZWwgYXJjaGl2byBvIHNpIG9jdXJyZSBjdWFscXVpZXIgb3RybyBwcm9ibGVtYVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgZ2V0RnJvbnRtYXR0ZXJGaWVsZChhcHA6IEFwcCwgZmlsZTogc3RyaW5nLCBmaWVsZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpO1xuICAgICAgICAgICAgICAgIGlmICh0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRGaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIgJiYgZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoZmllbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFZhbHVlID0gZnJvbnRtYXR0ZXJbZmllbGRdO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZFZhbHVlID09PSB1bmRlZmluZWQgfHwgZmllbGRWYWx1ZSA9PT0gbnVsbCB8fCBmaWVsZFZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbCBjYW1wbyBlc3RcdTAwRTEgdmFjXHUwMEVEbyBvIG5vIGV4aXN0ZS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGNvbnN1bHRhZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7IC8vIERldnVlbHZlIGVsIHZhbG9yIGRlbCBjYW1wb1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFbCBjYW1wbyBubyBleGlzdGUgZW4gZWwgZnJvbnRtYXR0ZXIuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVsIGFyY2hpdm8gbm8gZXhpc3RlIG8gbm8gZXMgdW4gYXJjaGl2byBkZSB0ZXh0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY29uc3VsdGFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuXG4gICAgICAgIC8vIEVzdGEgZnVuY2lcdTAwRjNuIGVuY3VlbnRyYSBsb3MgYXJjaGl2b3MgZGUgc3Vic2lzdGVtYXMgeSBjdXlvIGVzdGFkbyBlcyBcdUQ4M0RcdURGRTJcbiAgICAgICAgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZShhcHAsIHRpcG8pIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllc1RpcG8gPSB7XG4gICAgICAgICAgICAgICAgYWN0c0FWOiB7XG4gICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGEsXG4gICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsIFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWVGaWxlX0FyZWFzVmlkYVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c0FJOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzSW50ZXJlcyxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYW1lRmlsZV9BcmVhc0ludGVyZXNcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1BROiB7XG4gICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNQR1REOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzVEk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UZW1hc0ludGVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1JSOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHVlZGVzIGNvbnRpbnVhciBhXHUwMEYxYWRpZW5kbyBtXHUwMEUxcyBjYXNvcyBhcXVcdTAwRURcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSB0aXBvIGVzIHVuYSBwcm9waWVkYWQgdlx1MDBFMWxpZGEgYW50ZXMgZGUgZGVzZXN0cnVjdHVyYXJcbiAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyID0gW107XG4gICAgICAgICAgICAgc3dpdGNoICh0aXBvKXtcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c0FWXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZm9sZGVyLCBzYW1lTmFtZSwgbmFtZUZpbGUgfSA9IHByb3BlcnRpZXNUaXBvW3RpcG9dO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWhvcmEgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmIGZpbGUubmFtZS5zdGFydHNXaXRoKGFob3JhKSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goeyBmaWxlOiBmaWxlLCBmcm9udG1hdHRlcjogbWV0YWRhdGEgfSk7ICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXNUaXBvLmhhc093blByb3BlcnR5KHRpcG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZvbGRlciwgc2FtZU5hbWUsIG5hbWVGaWxlIH0gPSBwcm9wZXJ0aWVzVGlwb1t0aXBvXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzSW5Gb2xkZXIgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzSW5Gb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHNhbWVOYW1lICYmIGZpbGUuYmFzZW5hbWUgPT09IG5hbWVGaWxlKSB8fCAhc2FtZU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mcm9udG1hdHRlciAmJiBtZXRhZGF0YS5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goeyBmaWxlOiBmaWxlLCBmcm9udG1hdHRlcjogbWV0YWRhdGEuZnJvbnRtYXR0ZXIgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZWxlY2NpXHUwMEYzbiBubyByZWNvbm9jaWRhOlwiLCB0aXBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTsgLy8gTWFuZWphciBzZWdcdTAwRkFuIHR1IGxcdTAwRjNnaWNhIGRlIGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gICAgICAgICB9XG5cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi9zZWxlY2Npb25Nb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgZnV6enlTZWxlY3RPckNyZWF0ZSB7XG4gIGFwcDogQXBwO1xuICBwbHVnaW46IFBsdWdpbjtcbiAgcGF0aENhbXBvczogc3RyaW5nID0gXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFJlZ2lzdHJvIFRpZW1wby5tZFwiO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBsdWdpbikge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgY3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZnV6enlTZWFyY2hNb2RhbFwiKTtcbiAgICBtb2RhbC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICBtb2RhbC5zdHlsZS50b3AgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLmxlZnQgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCI7XG4gICAgbW9kYWwuc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG4gICAgbW9kYWwuc3R5bGUucGFkZGluZyA9IFwiMjBweFwiO1xuICAgIG1vZGFsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjY2NjXCI7XG4gICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1cHhcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgNHB4IDZweCByZ2JhKDAsMCwwLC4xKVwiO1xuICAgIG1vZGFsLnN0eWxlLndpZHRoID0gXCIzMDBweFwiO1xuICBcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY2xvc2VCdXR0b24udGV4dENvbnRlbnQgPSBcIlx1MDBEN1wiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9IFwiNXB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucmlnaHQgPSBcIjVweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9IFwiMTZweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCIwcHggNHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIxMHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUub3V0bGluZSA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5yZW1vdmUoKTtcbiAgXG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHJldHVybiBtb2RhbDtcbiAgfVxuXG4gIGZpbHRlckl0ZW1zKHF1ZXJ5OiBzdHJpbmcsIGl0ZW1zOiBhbnlbXSkge1xuICAgIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW06IHsgdmFsdWU6IHN0cmluZzsgfSkgPT5cbiAgICAgIGl0ZW0udmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuICAgICk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKHRpcG86IHN0cmluZyB8IG51bWJlciwgc2VsZWN0ZWRWYWx1ZTogYW55LCBzZWxlY3RlZEdyb3VwOiBhbnkpIHtcbiAgICB0cnkge1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcjogeyBbeDogc3RyaW5nXTogYW55W107IH0pID0+IHtcbiAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgJ2FjdHNUZW1hcycgZXMgZWwgY2FtcG8gYSBtb2RpZmljYXJcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRBY3RzID0gZnJvbnRtYXR0ZXJbdGlwb10gfHwgW107XG4gICAgICAgICAgICBsZXQgbmV3VmFsdWVGb3JBY3RzID0gWy4uLmN1cnJlbnRBY3RzLCBbc2VsZWN0ZWRHcm91cCwgc2VsZWN0ZWRWYWx1ZV1dO1xuICAgICAgICAgICAgZnJvbnRtYXR0ZXJbdGlwb10gPSBuZXdWYWx1ZUZvckFjdHM7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICBhc3luYyBzaG93RnV6enlTZWFyY2hNb2RhbChpdGVtczogYW55LCBncm91cHM6IGFueVtdLCB0aXBvOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IFwiXCI7IC8vIFZhcmlhYmxlIHBhcmEgZ3VhcmRhciBsYSBvcGNpXHUwMEYzbiBzZWxlY2Npb25hZGEgbyBpbmdyZXNhZGEgcG9yIGVsIHVzdWFyaW9cbiAgICAgICAgbGV0IHNlbGVjdGVkR3JvdXAgPSBcIlwiO1xuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMuY3JlYXRlTW9kYWwoKTtcbiAgICAgIFxuXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCB0XHUwMEVEdHVsbyBkZWwgbW9kYWxcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gXCJCdXNjYSBvIGNyZWEgdHUgYWN0aXZpZGFkXCI7XG4gICAgICAgIHRpdGxlLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7IC8vIENlbnRyYXIgZWwgdFx1MDBFRHR1bG8sIGFqdXN0YSBsb3MgZXN0aWxvcyBzZWdcdTAwRkFuIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCJFc2NyaWJlIHR1IGFjdGl2aWRhZC4uLlwiO1xuICAgICAgICAvLyBFc3RhYmxlY2UgZWwgYW5jaG8gZGVsIGlucHV0IGEgdW4gcG9yY2VudGFqZSBkZWwgY29udGVuZWRvciBwYXJhIGhhY2VybG8gbVx1MDBFMXMgYW5jaG8uXG4gICAgICAgIGlucHV0LnN0eWxlLndpZHRoID0gXCI4MCVcIjtcbiAgICAgICAgLy8gQ2VudHJhciBlbCB0ZXh0byBkZW50cm8gZGVsIGlucHV0XG4gICAgICAgIGlucHV0LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIC8vIENlbnRyYXIgZWwgaW5wdXQgZGVudHJvIGRlbCBtb2RhbCAoc2kgZWwgbW9kYWwgdGllbmUgdW4gZGlzcGxheSBmbGV4KVxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIG1vZGFsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuICAgICAgICBtb2RhbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG5cbiAgICAgICAgLy8gQ3JlYXIgeSBhZ3JlZ2FyIHVuIGVzcGFjaW8gZW50cmUgZWwgaW5wdXQgeSByZXN1bHRzRGl2XG4gICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNwYWNlci5zdHlsZS5oZWlnaHQgPSBcIjE2cHhcIjsgLy8gQWp1c3RhIGVzdGEgYWx0dXJhIHNlZ1x1MDBGQW4gbmVjZXNpdGVzIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHRzRGl2KTtcbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZXN1bHRzRGlzcGxheShmaWx0ZXJlZFJlc3VsdHM6IGFueVtdLCBtZW51T3RybzogdGhpcykge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciByZXN1bHRhZG9zIHByZXZpb3NcbiAgICAgICAgICBmaWx0ZXJlZFJlc3VsdHMuZm9yRWFjaCgocmVzdWx0OiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBhY3Rpdml0eTogc3RyaW5nOyBncm91cDogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgZGl2Lm9ubW91c2VvdmVyID0gKCkgPT4gKGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMGYwZjBcIik7XG4gICAgICAgICAgICBkaXYub25tb3VzZW91dCA9ICgpID0+IChkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlID0gcmVzdWx0LmFjdGl2aXR5OyAvLyBHdWFyZGFyIGVsIHZhbG9yIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gcmVzdWx0Lmdyb3VwOyAvLyBHdWFyZGFyIGVsIGdydXBvIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICAvL2Rpc3BsYXlTZWxlY3RlZFZhbHVlKHNlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXApOyAvLyBNb3N0cmFyIGxhIHNlbGVjY2lcdTAwRjNuIGFsIHVzdWFyaW9cbiAgICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHJlc29sdmUoW3NlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICAvLyBTaSBubyBoYXkgcmVzdWx0YWRvcyB5IGVsIHVzdWFyaW8gaGEgaW5ncmVzYWRvIHVuIHRleHRvLCBvZnJlY2VyIGxhIGNyZWFjaVx1MDBGM24gZGUgdW5hIG51ZXZhIGFjdGl2aWRhZFxuICAgICAgICAgIGlmIChmaWx0ZXJlZFJlc3VsdHMubGVuZ3RoID09PSAwICYmIGlucHV0LnZhbHVlLnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlTmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi50ZXh0Q29udGVudCA9IGBDcmVhciBudWV2YSBhY3RpdmlkYWQ6IFwiJHtpbnB1dC52YWx1ZX1cImA7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYuc3R5bGUuY29sb3IgPSBcImJsdWVcIjtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlID0gaW5wdXQudmFsdWU7IC8vIEd1YXJkYXIgbGEgbnVldmEgYWN0aXZpZGFkXG4gICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgIGlmICh0aXBvPT0gdW5kZWZpbmVkKXsgdGlwbyA9IFwiYWN0c1RlbWFzXCJ9XG4gICAgICAgICAgICAgIHNlbGVjdEdyb3VwRm9yTmV3QWN0aXZpdHkobWVudU90cm8sIHRpcG8pOyAvLyBQcm9jZWRlciBhIHNlbGVjY2lvbmFyIHVuIGdydXBvXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChjcmVhdGVOZXdEaXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEdyb3VwRm9yTmV3QWN0aXZpdHkobWVudU90cm86IHsgZXNSZWN1cnJlbnRlOiAoYXJnMDogc3RyaW5nKSA9PiBhbnk7IHVwZGF0ZVlBTUxGaWVsZHM6IChhcmcwOiBhbnksIGFyZzE6IHN0cmluZywgYXJnMjogc3RyaW5nKSA9PiBhbnk7IH0sIHRpcG86IGFueSkge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICBpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICBzcGFjZXIucmVtb3ZlKCk7XG4gICAgICAgICAgdGl0bGUucmVtb3ZlKCk7XG5cbiAgICAgICAgICBjb25zdCB0ZXh0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgIHRleHRvLnRleHRDb250ZW50ID0gYFZhbW9zIGEgY3JlYXIgbGEgYWN0aXZpZGFkOiBcIiR7c2VsZWN0ZWRWYWx1ZX1cIi4gU2VsZWNjaW9uYSB1biBncnVwbzpgOztcbiAgICAgICAgICB0ZXh0by5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAvLyBDZW50cmFyIGVsIHRcdTAwRUR0dWxvLCBhanVzdGEgbG9zIGVzdGlsb3Mgc2VnXHUwMEZBbiBzZWEgbmVjZXNhcmlvXG4gICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZCh0ZXh0byk7IFxuICAgICAgXG4gICAgICAgICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBncm91cERpdi50ZXh0Q29udGVudCA9IGdyb3VwO1xuICAgICAgICAgICAgZ3JvdXBEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3ZlciA9ICgpID0+IChncm91cERpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMGYwZjBcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGdyb3VwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgYWN0aXZpZGFkIHkgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBsZXQgcmVjdXJyZW50ZSA9IGF3YWl0IG1lbnVPdHJvLmVzUmVjdXJyZW50ZShzZWxlY3RlZFZhbHVlKVxuICAgICAgICAgICAgICBpZiAocmVjdXJyZW50ZSl7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWVudU90cm8udXBkYXRlWUFNTEZpZWxkcyh0aXBvLCBzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKFtzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChncm91cERpdik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U2VsZWN0ZWRWYWx1ZShhY3Rpdml0eTogYW55LCBncm91cDogYW55KSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBgU2VsZWNjaW9uYWRvOiAke2FjdGl2aXR5fSAvICR7Z3JvdXB9YDtcbiAgICAgICAgICAvLyBBcXVcdTAwRUQgcHVlZGVzIGNlcnJhciBlbCBtb2RhbCBvIHBlcm1pdGlyIGFsIHVzdWFyaW8gaGFjZXIgbVx1MDBFMXMgYWNjaW9uZXNcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IHRoaXMuZmlsdGVySXRlbXMoaW5wdXQudmFsdWUsIGl0ZW1zKTtcbiAgICAgICAgICB1cGRhdGVSZXN1bHRzRGlzcGxheShmaWx0ZXJlZEl0ZW1zLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICAgICBcbiAgICB9KTsgICBcbn1cblxuYXN5bmMgZXNSZWN1cnJlbnRlKHRhcmVhOnN0cmluZyk6UHJvbWlzZTxib29sZWFuPntcbiAgY29uc3Qgb3BjaW9uZXMgPSBbXCJTaVwiLFwiTm9cIl0gO1xuICBjb25zdCB2YWxvcmVzID0gW3RydWUsZmFsc2VdO1xuICBjb25zdCBwbGFjZWhvbGRlciA9IGAke3RhcmVhfSBlcyB0YXJlYSByZWN1cnJlbnRlP2A7XG4gIGNvbnN0IG1vZGFsID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXMsIHZhbG9yZXMsIHBsYWNlaG9sZGVyKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgbW9kYWwub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG59IiwgIi8vIHRoZXNlIGFyZW4ndCByZWFsbHkgcHJpdmF0ZSwgYnV0IG5vciBhcmUgdGhleSByZWFsbHkgdXNlZnVsIHRvIGRvY3VtZW50XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgTHV4b25FcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWREYXRlVGltZUVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlYXNvbikge1xuICAgIHN1cGVyKGBJbnZhbGlkIERhdGVUaW1lOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkSW50ZXJ2YWxFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICBzdXBlcihgSW52YWxpZCBJbnRlcnZhbDogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZER1cmF0aW9uRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgc3VwZXIoYEludmFsaWQgRHVyYXRpb246ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkVW5pdEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHVuaXQpIHtcbiAgICBzdXBlcihgSW52YWxpZCB1bml0ICR7dW5pdH1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige31cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgWm9uZUlzQWJzdHJhY3RFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3NcIik7XG4gIH1cbn1cbiIsICIvKipcbiAqIEBwcml2YXRlXG4gKi9cblxuY29uc3QgbiA9IFwibnVtZXJpY1wiLFxuICBzID0gXCJzaG9ydFwiLFxuICBsID0gXCJsb25nXCI7XG5cbmV4cG9ydCBjb25zdCBEQVRFX1NIT1JUID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfTUVEID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgd2Vla2RheTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFX0ZVTEwgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURV9IVUdFID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfU0lNUExFID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9XSVRIX1NFQ09ORFMgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9XSVRIX0xPTkdfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfMjRfU0lNUExFID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1dJVEhfU0VDT05EUyA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICB0aW1lWm9uZU5hbWU6IGwsXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfU0hPUlQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IHMsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9GVUxMID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9IVUdFID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbCxcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG4iLCAiaW1wb3J0IHsgWm9uZUlzQWJzdHJhY3RFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWm9uZSB7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB6b25lXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIHpvbmUuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIGdldCBpYW5hTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgb2Zmc2V0IGlzIGtub3duIHRvIGJlIGZpeGVkIGZvciB0aGUgd2hvbGUgeWVhci5cbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgY29tbW9uIG5hbWUgKHN1Y2ggYXMgRVNUKSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcFxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBnZXQgdGhlIG5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIGFmZmVjdCB0aGUgZm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi4gQWNjZXB0cyAnbG9uZycgb3IgJ3Nob3J0Jy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubG9jYWxlIC0gV2hhdCBsb2NhbGUgdG8gcmV0dXJuIHRoZSBvZmZzZXQgbmFtZSBpbi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgb2Zmc2V0TmFtZSh0cywgb3B0cykge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBvZmZzZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdHMgJ25hcnJvdycsICdzaG9ydCcsIG9yICd0ZWNoaWUnLiBSZXR1cm5pbmcgJys2JywgJyswNjowMCcsIG9yICcrMDYwMCcgcmVzcGVjdGl2ZWx5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBpbiBtaW51dGVzIGZvciB0aGlzIHpvbmUgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXAuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGNvbXB1dGUgdGhlIG9mZnNldFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBvZmZzZXQodHMpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyBlcXVhbCB0byBhbm90aGVyIHpvbmVcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7Wm9uZX0gb3RoZXJab25lIC0gdGhlIHpvbmUgdG8gY29tcGFyZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIHZhbGlkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZm9ybWF0T2Zmc2V0LCBwYXJzZVpvbmVJbmZvIH0gZnJvbSBcIi4uL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxubGV0IHNpbmdsZXRvbiA9IG51bGw7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN5c3RlbVpvbmUgZXh0ZW5kcyBab25lIHtcbiAgLyoqXG4gICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgbG9jYWwgem9uZVxuICAgKiBAcmV0dXJuIHtTeXN0ZW1ab25lfVxuICAgKi9cbiAgc3RhdGljIGdldCBpbnN0YW5jZSgpIHtcbiAgICBpZiAoc2luZ2xldG9uID09PSBudWxsKSB7XG4gICAgICBzaW5nbGV0b24gPSBuZXcgU3lzdGVtWm9uZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc2luZ2xldG9uO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXROYW1lKHRzLCB7IGZvcm1hdCwgbG9jYWxlIH0pIHtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMub2Zmc2V0KHRzKSwgZm9ybWF0KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCh0cykge1xuICAgIHJldHVybiAtbmV3IERhdGUodHMpLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcInN5c3RlbVwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBmb3JtYXRPZmZzZXQsIHBhcnNlWm9uZUluZm8sIGlzVW5kZWZpbmVkLCBvYmpUb0xvY2FsVFMgfSBmcm9tIFwiLi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG5sZXQgZHRmQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIG1ha2VEVEYoem9uZSkge1xuICBpZiAoIWR0ZkNhY2hlW3pvbmVdKSB7XG4gICAgZHRmQ2FjaGVbem9uZV0gPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgIGhvdXIxMjogZmFsc2UsXG4gICAgICB0aW1lWm9uZTogem9uZSxcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgZGF5OiBcIjItZGlnaXRcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCIsXG4gICAgICBlcmE6IFwic2hvcnRcIixcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZHRmQ2FjaGVbem9uZV07XG59XG5cbmNvbnN0IHR5cGVUb1BvcyA9IHtcbiAgeWVhcjogMCxcbiAgbW9udGg6IDEsXG4gIGRheTogMixcbiAgZXJhOiAzLFxuICBob3VyOiA0LFxuICBtaW51dGU6IDUsXG4gIHNlY29uZDogNixcbn07XG5cbmZ1bmN0aW9uIGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICBjb25zdCBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0KGRhdGUpLnJlcGxhY2UoL1xcdTIwMEUvZywgXCJcIiksXG4gICAgcGFyc2VkID0gLyhcXGQrKVxcLyhcXGQrKVxcLyhcXGQrKSAoQUR8QkMpLD8gKFxcZCspOihcXGQrKTooXFxkKykvLmV4ZWMoZm9ybWF0dGVkKSxcbiAgICBbLCBmTW9udGgsIGZEYXksIGZZZWFyLCBmYWRPckJjLCBmSG91ciwgZk1pbnV0ZSwgZlNlY29uZF0gPSBwYXJzZWQ7XG4gIHJldHVybiBbZlllYXIsIGZNb250aCwgZkRheSwgZmFkT3JCYywgZkhvdXIsIGZNaW51dGUsIGZTZWNvbmRdO1xufVxuXG5mdW5jdGlvbiBwYXJ0c09mZnNldChkdGYsIGRhdGUpIHtcbiAgY29uc3QgZm9ybWF0dGVkID0gZHRmLmZvcm1hdFRvUGFydHMoZGF0ZSk7XG4gIGNvbnN0IGZpbGxlZCA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1hdHRlZC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHsgdHlwZSwgdmFsdWUgfSA9IGZvcm1hdHRlZFtpXTtcbiAgICBjb25zdCBwb3MgPSB0eXBlVG9Qb3NbdHlwZV07XG5cbiAgICBpZiAodHlwZSA9PT0gXCJlcmFcIikge1xuICAgICAgZmlsbGVkW3Bvc10gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChwb3MpKSB7XG4gICAgICBmaWxsZWRbcG9zXSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmaWxsZWQ7XG59XG5cbmxldCBpYW5hWm9uZUNhY2hlID0ge307XG4vKipcbiAqIEEgem9uZSBpZGVudGlmaWVkIGJ5IGFuIElBTkEgaWRlbnRpZmllciwgbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSUFOQVpvbmUgZXh0ZW5kcyBab25lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gWm9uZSBuYW1lXG4gICAqIEByZXR1cm4ge0lBTkFab25lfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShuYW1lKSB7XG4gICAgaWYgKCFpYW5hWm9uZUNhY2hlW25hbWVdKSB7XG4gICAgICBpYW5hWm9uZUNhY2hlW25hbWVdID0gbmV3IElBTkFab25lKG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gaWFuYVpvbmVDYWNoZVtuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBsb2NhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyByZXNldENhY2hlKCkge1xuICAgIGlhbmFab25lQ2FjaGUgPSB7fTtcbiAgICBkdGZDYWNoZSA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJvdmlkZWQgc3RyaW5nIGlzIGEgdmFsaWQgc3BlY2lmaWVyLiBUaGlzIG9ubHkgY2hlY2tzIHRoZSBzdHJpbmcncyBmb3JtYXQsIG5vdCB0aGF0IHRoZSBzcGVjaWZpZXIgaWRlbnRpZmllcyBhIGtub3duIHpvbmU7IHNlZSBpc1ZhbGlkWm9uZSBmb3IgdGhhdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgc3RyaW5nIHRvIGNoZWNrIHZhbGlkaXR5IG9uXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoXCJBbWVyaWNhL05ld19Zb3JrXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiU3BvcnR+fmJsb3JwXCIpIC8vPT4gZmFsc2VcbiAgICogQGRlcHJlY2F0ZWQgVGhpcyBtZXRob2QgcmV0dXJucyBmYWxzZSBmb3Igc29tZSB2YWxpZCBJQU5BIG5hbWVzLiBVc2UgaXNWYWxpZFpvbmUgaW5zdGVhZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1ZhbGlkU3BlY2lmaWVyKHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkWm9uZShzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpZGVudGlmaWVzIGEgcmVhbCB6b25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gVGhlIHN0cmluZyB0byBjaGVja1xuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIkFtZXJpY2EvTmV3X1lvcmtcIikgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiRmFudGFzaWEvQ2FzdGxlXCIpIC8vPT4gZmFsc2VcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJTcG9ydH5+YmxvcnBcIikgLy89PiBmYWxzZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRab25lKHpvbmUpIHtcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tVVNcIiwgeyB0aW1lWm9uZTogem9uZSB9KS5mb3JtYXQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogQHByaXZhdGUgKiovXG4gICAgdGhpcy56b25lTmFtZSA9IG5hbWU7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuICAgIHRoaXMudmFsaWQgPSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShuYW1lKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiBcImlhbmFcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnpvbmVOYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUodHMsIHsgZm9ybWF0LCBsb2NhbGUgfSkge1xuICAgIHJldHVybiBwYXJzZVpvbmVJbmZvKHRzLCBmb3JtYXQsIGxvY2FsZSwgdGhpcy5uYW1lKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXQodHMpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodHMpO1xuXG4gICAgaWYgKGlzTmFOKGRhdGUpKSByZXR1cm4gTmFOO1xuXG4gICAgY29uc3QgZHRmID0gbWFrZURURih0aGlzLm5hbWUpO1xuICAgIGxldCBbeWVhciwgbW9udGgsIGRheSwgYWRPckJjLCBob3VyLCBtaW51dGUsIHNlY29uZF0gPSBkdGYuZm9ybWF0VG9QYXJ0c1xuICAgICAgPyBwYXJ0c09mZnNldChkdGYsIGRhdGUpXG4gICAgICA6IGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSk7XG5cbiAgICBpZiAoYWRPckJjID09PSBcIkJDXCIpIHtcbiAgICAgIHllYXIgPSAtTWF0aC5hYnMoeWVhcikgKyAxO1xuICAgIH1cblxuICAgIC8vIGJlY2F1c2Ugd2UncmUgdXNpbmcgaG91cjEyIGFuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDI1NTY0JmNhbj0yJnE9JTIyMjQlM0EwMCUyMiUyMGRhdGV0aW1lZm9ybWF0XG4gICAgY29uc3QgYWRqdXN0ZWRIb3VyID0gaG91ciA9PT0gMjQgPyAwIDogaG91cjtcblxuICAgIGNvbnN0IGFzVVRDID0gb2JqVG9Mb2NhbFRTKHtcbiAgICAgIHllYXIsXG4gICAgICBtb250aCxcbiAgICAgIGRheSxcbiAgICAgIGhvdXI6IGFkanVzdGVkSG91cixcbiAgICAgIG1pbnV0ZSxcbiAgICAgIHNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kOiAwLFxuICAgIH0pO1xuXG4gICAgbGV0IGFzVFMgPSArZGF0ZTtcbiAgICBjb25zdCBvdmVyID0gYXNUUyAlIDEwMDA7XG4gICAgYXNUUyAtPSBvdmVyID49IDAgPyBvdmVyIDogMTAwMCArIG92ZXI7XG4gICAgcmV0dXJuIChhc1VUQyAtIGFzVFMpIC8gKDYwICogMTAwMCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcImlhbmFcIiAmJiBvdGhlclpvbmUubmFtZSA9PT0gdGhpcy5uYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsaWQ7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBoYXNMb2NhbGVXZWVrSW5mbywgaGFzUmVsYXRpdmUsIHBhZFN0YXJ0LCByb3VuZFRvLCB2YWxpZGF0ZVdlZWtTZXR0aW5ncyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCAqIGFzIEVuZ2xpc2ggZnJvbSBcIi4vZW5nbGlzaC5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuXG4vLyB0b2RvIC0gcmVtYXAgY2FjaGluZ1xuXG5sZXQgaW50bExGQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZExGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgbGV0IGR0ZiA9IGludGxMRkNhY2hlW2tleV07XG4gIGlmICghZHRmKSB7XG4gICAgZHRmID0gbmV3IEludGwuTGlzdEZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxMRkNhY2hlW2tleV0gPSBkdGY7XG4gIH1cbiAgcmV0dXJuIGR0Zjtcbn1cblxubGV0IGludGxEVENhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWREVEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHtcbiAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICBsZXQgZHRmID0gaW50bERUQ2FjaGVba2V5XTtcbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7XG4gIH1cbiAgcmV0dXJuIGR0Zjtcbn1cblxubGV0IGludGxOdW1DYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkSU5GKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgbGV0IGluZiA9IGludGxOdW1DYWNoZVtrZXldO1xuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxOdW1DYWNoZVtrZXldID0gaW5mO1xuICB9XG4gIHJldHVybiBpbmY7XG59XG5cbmxldCBpbnRsUmVsQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZFJURihsb2NTdHJpbmcsIG9wdHMgPSB7fSkge1xuICBjb25zdCB7IGJhc2UsIC4uLmNhY2hlS2V5T3B0cyB9ID0gb3B0czsgLy8gZXhjbHVkZSBgYmFzZWAgZnJvbSB0aGUgb3B0aW9uc1xuICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBjYWNoZUtleU9wdHNdKTtcbiAgbGV0IGluZiA9IGludGxSZWxDYWNoZVtrZXldO1xuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxSZWxDYWNoZVtrZXldID0gaW5mO1xuICB9XG4gIHJldHVybiBpbmY7XG59XG5cbmxldCBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG5mdW5jdGlvbiBzeXN0ZW1Mb2NhbGUoKSB7XG4gIGlmIChzeXNMb2NhbGVDYWNoZSkge1xuICAgIHJldHVybiBzeXNMb2NhbGVDYWNoZTtcbiAgfSBlbHNlIHtcbiAgICBzeXNMb2NhbGVDYWNoZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlO1xuICAgIHJldHVybiBzeXNMb2NhbGVDYWNoZTtcbiAgfVxufVxuXG5sZXQgd2Vla0luZm9DYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkV2Vla0luZm8obG9jU3RyaW5nKSB7XG4gIGxldCBkYXRhID0gd2Vla0luZm9DYWNoZVtsb2NTdHJpbmddO1xuICBpZiAoIWRhdGEpIHtcbiAgICBjb25zdCBsb2NhbGUgPSBuZXcgSW50bC5Mb2NhbGUobG9jU3RyaW5nKTtcbiAgICAvLyBicm93c2VycyBjdXJyZW50bHkgaW1wbGVtZW50IHRoaXMgYXMgYSBwcm9wZXJ0eSwgYnV0IHNwZWMgc2F5cyBpdCBzaG91bGQgYmUgYSBnZXR0ZXIgZnVuY3Rpb25cbiAgICBkYXRhID0gXCJnZXRXZWVrSW5mb1wiIGluIGxvY2FsZSA/IGxvY2FsZS5nZXRXZWVrSW5mbygpIDogbG9jYWxlLndlZWtJbmZvO1xuICAgIHdlZWtJbmZvQ2FjaGVbbG9jU3RyaW5nXSA9IGRhdGE7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZVN0cikge1xuICAvLyBJIHJlYWxseSB3YW50IHRvIGF2b2lkIHdyaXRpbmcgYSBCQ1AgNDcgcGFyc2VyXG4gIC8vIHNlZSwgZS5nLiBodHRwczovL2dpdGh1Yi5jb20vd29vb3JtL2JjcC00N1xuICAvLyBJbnN0ZWFkLCB3ZSdsbCBkbyB0aGlzOlxuXG4gIC8vIGEpIGlmIHRoZSBzdHJpbmcgaGFzIG5vIC11IGV4dGVuc2lvbnMsIGp1c3QgbGVhdmUgaXQgYWxvbmVcbiAgLy8gYikgaWYgaXQgZG9lcywgdXNlIEludGwgdG8gcmVzb2x2ZSBldmVyeXRoaW5nXG4gIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdVxuXG4gIC8vIHByaXZhdGUgc3VidGFncyBhbmQgdW5pY29kZSBzdWJ0YWdzIGhhdmUgb3JkZXJpbmcgcmVxdWlyZW1lbnRzLFxuICAvLyBhbmQgd2UncmUgbm90IHByb3Blcmx5IHBhcnNpbmcgdGhpcywgc28ganVzdCBzdHJpcCBvdXQgdGhlXG4gIC8vIHByaXZhdGUgb25lcyBpZiB0aGV5IGV4aXN0LlxuICBjb25zdCB4SW5kZXggPSBsb2NhbGVTdHIuaW5kZXhPZihcIi14LVwiKTtcbiAgaWYgKHhJbmRleCAhPT0gLTEpIHtcbiAgICBsb2NhbGVTdHIgPSBsb2NhbGVTdHIuc3Vic3RyaW5nKDAsIHhJbmRleCk7XG4gIH1cblxuICBjb25zdCB1SW5kZXggPSBsb2NhbGVTdHIuaW5kZXhPZihcIi11LVwiKTtcbiAgaWYgKHVJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gW2xvY2FsZVN0cl07XG4gIH0gZWxzZSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgbGV0IHNlbGVjdGVkU3RyO1xuICAgIHRyeSB7XG4gICAgICBvcHRpb25zID0gZ2V0Q2FjaGVkRFRGKGxvY2FsZVN0cikucmVzb2x2ZWRPcHRpb25zKCk7XG4gICAgICBzZWxlY3RlZFN0ciA9IGxvY2FsZVN0cjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBzbWFsbGVyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB1SW5kZXgpO1xuICAgICAgb3B0aW9ucyA9IGdldENhY2hlZERURihzbWFsbGVyKS5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgICAgIHNlbGVjdGVkU3RyID0gc21hbGxlcjtcbiAgICB9XG5cbiAgICBjb25zdCB7IG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXIgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIFtzZWxlY3RlZFN0ciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50bENvbmZpZ1N0cmluZyhsb2NhbGVTdHIsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpIHtcbiAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGlmICghbG9jYWxlU3RyLmluY2x1ZGVzKFwiLXUtXCIpKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gXCItdVwiO1xuICAgIH1cblxuICAgIGlmIChvdXRwdXRDYWxlbmRhcikge1xuICAgICAgbG9jYWxlU3RyICs9IGAtY2EtJHtvdXRwdXRDYWxlbmRhcn1gO1xuICAgIH1cblxuICAgIGlmIChudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICAgIGxvY2FsZVN0ciArPSBgLW51LSR7bnVtYmVyaW5nU3lzdGVtfWA7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbGVTdHI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxvY2FsZVN0cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBNb250aHMoZikge1xuICBjb25zdCBtcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMjsgaSsrKSB7XG4gICAgY29uc3QgZHQgPSBEYXRlVGltZS51dGMoMjAwOSwgaSwgMSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cbiAgcmV0dXJuIG1zO1xufVxuXG5mdW5jdGlvbiBtYXBXZWVrZGF5cyhmKSB7XG4gIGNvbnN0IG1zID0gW107XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IDc7IGkrKykge1xuICAgIGNvbnN0IGR0ID0gRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMyArIGkpO1xuICAgIG1zLnB1c2goZihkdCkpO1xuICB9XG4gIHJldHVybiBtcztcbn1cblxuZnVuY3Rpb24gbGlzdFN0dWZmKGxvYywgbGVuZ3RoLCBlbmdsaXNoRm4sIGludGxGbikge1xuICBjb25zdCBtb2RlID0gbG9jLmxpc3RpbmdNb2RlKCk7XG5cbiAgaWYgKG1vZGUgPT09IFwiZXJyb3JcIikge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09IFwiZW5cIikge1xuICAgIHJldHVybiBlbmdsaXNoRm4obGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW50bEZuKGxlbmd0aCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3VwcG9ydHNGYXN0TnVtYmVycyhsb2MpIHtcbiAgaWYgKGxvYy5udW1iZXJpbmdTeXN0ZW0gJiYgbG9jLm51bWJlcmluZ1N5c3RlbSAhPT0gXCJsYXRuXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGxvYy5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiIHx8XG4gICAgICAhbG9jLmxvY2FsZSB8fFxuICAgICAgbG9jLmxvY2FsZS5zdGFydHNXaXRoKFwiZW5cIikgfHxcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvYy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuY2xhc3MgUG9seU51bWJlckZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGludGwsIGZvcmNlU2ltcGxlLCBvcHRzKSB7XG4gICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDtcbiAgICB0aGlzLmZsb29yID0gb3B0cy5mbG9vciB8fCBmYWxzZTtcblxuICAgIGNvbnN0IHsgcGFkVG8sIGZsb29yLCAuLi5vdGhlck9wdHMgfSA9IG9wdHM7XG5cbiAgICBpZiAoIWZvcmNlU2ltcGxlIHx8IE9iamVjdC5rZXlzKG90aGVyT3B0cykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaW50bE9wdHMgPSB7IHVzZUdyb3VwaW5nOiBmYWxzZSwgLi4ub3B0cyB9O1xuICAgICAgaWYgKG9wdHMucGFkVG8gPiAwKSBpbnRsT3B0cy5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IG9wdHMucGFkVG87XG4gICAgICB0aGlzLmluZiA9IGdldENhY2hlZElORihpbnRsLCBpbnRsT3B0cyk7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0KGkpIHtcbiAgICBpZiAodGhpcy5pbmYpIHtcbiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5mbG9vciA/IE1hdGguZmxvb3IoaSkgOiBpO1xuICAgICAgcmV0dXJuIHRoaXMuaW5mLmZvcm1hdChmaXhlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBicm93c2VyJ3MgbnVtYmVyZm9ybWF0dGVyIGRlZmF1bHRzXG4gICAgICBjb25zdCBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTtcbiAgICAgIHJldHVybiBwYWRTdGFydChmaXhlZCwgdGhpcy5wYWRUbyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5jbGFzcyBQb2x5RGF0ZUZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGR0LCBpbnRsLCBvcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLm9yaWdpbmFsWm9uZSA9IHVuZGVmaW5lZDtcblxuICAgIGxldCB6ID0gdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLm9wdHMudGltZVpvbmUpIHtcbiAgICAgIC8vIERvbid0IGFwcGx5IGFueSB3b3JrYXJvdW5kcyBpZiBhIHRpbWVab25lIGlzIGV4cGxpY2l0bHkgcHJvdmlkZWQgaW4gb3B0c1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSBcImZpeGVkXCIpIHtcbiAgICAgIC8vIFVUQy04IG9yIEV0Yy9VVEMtOCBhcmUgbm90IHBhcnQgb2YgdHpkYXRhLCBvbmx5IEV0Yy9HTVQrOCBhbmQgdGhlIGxpa2UuXG4gICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOlxuICAgICAgLy8gMS4gUmVwcmVzZW50aW5nIG9mZnNldCAwIHdoZW4gVVRDIGlzIHVzZWQgdG8gbWFpbnRhaW4gcHJldmlvdXMgYmVoYXZpb3IgYW5kIGRvZXMgbm90IGJlY29tZSBHTVQuXG4gICAgICAvLyAyLiBVbnN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcjpcbiAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvXG4gICAgICAvLyAgICAtIDwgRXRjL0dNVC0xNCwgPiBFdGMvR01UKzEyLCBhbmQgMzAtbWludXRlIG9yIDQ1LW1pbnV0ZSBvZmZzZXRzIGFyZSBub3QgcGFydCBvZiB0emRhdGFcbiAgICAgIGNvbnN0IGdtdE9mZnNldCA9IC0xICogKGR0Lm9mZnNldCAvIDYwKTtcbiAgICAgIGNvbnN0IG9mZnNldFogPSBnbXRPZmZzZXQgPj0gMCA/IGBFdGMvR01UKyR7Z210T2Zmc2V0fWAgOiBgRXRjL0dNVCR7Z210T2Zmc2V0fWA7XG4gICAgICBpZiAoZHQub2Zmc2V0ICE9PSAwICYmIElBTkFab25lLmNyZWF0ZShvZmZzZXRaKS52YWxpZCkge1xuICAgICAgICB6ID0gb2Zmc2V0WjtcbiAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGFsbCBmaXhlZC1vZmZzZXQgem9uZXMgbGlrZSBFdGMvKzQ6MzAgYXJlIHByZXNlbnQgaW4gdHpkYXRhIHNvXG4gICAgICAgIC8vIHdlIG1hbnVhbGx5IGFwcGx5IHRoZSBvZmZzZXQgYW5kIHN1YnN0aXR1dGUgdGhlIHpvbmUgYXMgbmVlZGVkLlxuICAgICAgICB6ID0gXCJVVENcIjtcbiAgICAgICAgdGhpcy5kdCA9IGR0Lm9mZnNldCA9PT0gMCA/IGR0IDogZHQuc2V0Wm9uZShcIlVUQ1wiKS5wbHVzKHsgbWludXRlczogZHQub2Zmc2V0IH0pO1xuICAgICAgICB0aGlzLm9yaWdpbmFsWm9uZSA9IGR0LnpvbmU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICB9IGVsc2UgaWYgKGR0LnpvbmUudHlwZSA9PT0gXCJpYW5hXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICAgIHogPSBkdC56b25lLm5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEN1c3RvbSB6b25lcyBjYW4gaGF2ZSBhbnkgb2Zmc2V0IC8gb2Zmc2V0TmFtZSBzbyB3ZSBqdXN0IG1hbnVhbGx5XG4gICAgICAvLyBhcHBseSB0aGUgb2Zmc2V0IGFuZCBzdWJzdGl0dXRlIHRoZSB6b25lIGFzIG5lZWRlZC5cbiAgICAgIHogPSBcIlVUQ1wiO1xuICAgICAgdGhpcy5kdCA9IGR0LnNldFpvbmUoXCJVVENcIikucGx1cyh7IG1pbnV0ZXM6IGR0Lm9mZnNldCB9KTtcbiAgICAgIHRoaXMub3JpZ2luYWxab25lID0gZHQuem9uZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRsT3B0cyA9IHsgLi4udGhpcy5vcHRzIH07XG4gICAgaW50bE9wdHMudGltZVpvbmUgPSBpbnRsT3B0cy50aW1lWm9uZSB8fCB6O1xuICAgIHRoaXMuZHRmID0gZ2V0Q2FjaGVkRFRGKGludGwsIGludGxPcHRzKTtcbiAgfVxuXG4gIGZvcm1hdCgpIHtcbiAgICBpZiAodGhpcy5vcmlnaW5hbFpvbmUpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgdG8gc3Vic3RpdHV0ZSBpbiB0aGUgYWN0dWFsIHpvbmUgbmFtZSwgd2UgaGF2ZSB0byB1c2VcbiAgICAgIC8vIGZvcm1hdFRvUGFydHMgc28gdGhhdCB0aGUgdGltZXpvbmUgY2FuIGJlIHJlcGxhY2VkLlxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9QYXJ0cygpXG4gICAgICAgIC5tYXAoKHsgdmFsdWUgfSkgPT4gdmFsdWUpXG4gICAgICAgIC5qb2luKFwiXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSk7XG4gIH1cblxuICBmb3JtYXRUb1BhcnRzKCkge1xuICAgIGNvbnN0IHBhcnRzID0gdGhpcy5kdGYuZm9ybWF0VG9QYXJ0cyh0aGlzLmR0LnRvSlNEYXRlKCkpO1xuICAgIGlmICh0aGlzLm9yaWdpbmFsWm9uZSkge1xuICAgICAgcmV0dXJuIHBhcnRzLm1hcCgocGFydCkgPT4ge1xuICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRpbWVab25lTmFtZVwiKSB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0TmFtZSA9IHRoaXMub3JpZ2luYWxab25lLm9mZnNldE5hbWUodGhpcy5kdC50cywge1xuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLmR0LmxvY2FsZSxcbiAgICAgICAgICAgIGZvcm1hdDogdGhpcy5vcHRzLnRpbWVab25lTmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGFydCxcbiAgICAgICAgICAgIHZhbHVlOiBvZmZzZXROYW1lLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICByZXNvbHZlZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLnJlc29sdmVkT3B0aW9ucygpO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgUG9seVJlbEZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGludGwsIGlzRW5nbGlzaCwgb3B0cykge1xuICAgIHRoaXMub3B0cyA9IHsgc3R5bGU6IFwibG9uZ1wiLCAuLi5vcHRzIH07XG4gICAgaWYgKCFpc0VuZ2xpc2ggJiYgaGFzUmVsYXRpdmUoKSkge1xuICAgICAgdGhpcy5ydGYgPSBnZXRDYWNoZWRSVEYoaW50bCwgb3B0cyk7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0KGNvdW50LCB1bml0KSB7XG4gICAgaWYgKHRoaXMucnRmKSB7XG4gICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0KGNvdW50LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEVuZ2xpc2guZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCB0aGlzLm9wdHMubnVtZXJpYywgdGhpcy5vcHRzLnN0eWxlICE9PSBcImxvbmdcIik7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGZhbGxiYWNrV2Vla1NldHRpbmdzID0ge1xuICBmaXJzdERheTogMSxcbiAgbWluaW1hbERheXM6IDQsXG4gIHdlZWtlbmQ6IFs2LCA3XSxcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGUge1xuICBzdGF0aWMgZnJvbU9wdHMob3B0cykge1xuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKFxuICAgICAgb3B0cy5sb2NhbGUsXG4gICAgICBvcHRzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgIG9wdHMub3V0cHV0Q2FsZW5kYXIsXG4gICAgICBvcHRzLndlZWtTZXR0aW5ncyxcbiAgICAgIG9wdHMuZGVmYXVsdFRvRU5cbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncywgZGVmYXVsdFRvRU4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHNwZWNpZmllZExvY2FsZSA9IGxvY2FsZSB8fCBTZXR0aW5ncy5kZWZhdWx0TG9jYWxlO1xuICAgIC8vIHRoZSBzeXN0ZW0gbG9jYWxlIGlzIHVzZWZ1bCBmb3IgaHVtYW4gcmVhZGFibGUgc3RyaW5ncyBidXQgYW5ub3lpbmcgZm9yIHBhcnNpbmcvZm9ybWF0dGluZyBrbm93biBmb3JtYXRzXG4gICAgY29uc3QgbG9jYWxlUiA9IHNwZWNpZmllZExvY2FsZSB8fCAoZGVmYXVsdFRvRU4gPyBcImVuLVVTXCIgOiBzeXN0ZW1Mb2NhbGUoKSk7XG4gICAgY29uc3QgbnVtYmVyaW5nU3lzdGVtUiA9IG51bWJlcmluZ1N5c3RlbSB8fCBTZXR0aW5ncy5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICAgIGNvbnN0IG91dHB1dENhbGVuZGFyUiA9IG91dHB1dENhbGVuZGFyIHx8IFNldHRpbmdzLmRlZmF1bHRPdXRwdXRDYWxlbmRhcjtcbiAgICBjb25zdCB3ZWVrU2V0dGluZ3NSID0gdmFsaWRhdGVXZWVrU2V0dGluZ3Mod2Vla1NldHRpbmdzKSB8fCBTZXR0aW5ncy5kZWZhdWx0V2Vla1NldHRpbmdzO1xuICAgIHJldHVybiBuZXcgTG9jYWxlKGxvY2FsZVIsIG51bWJlcmluZ1N5c3RlbVIsIG91dHB1dENhbGVuZGFyUiwgd2Vla1NldHRpbmdzUiwgc3BlY2lmaWVkTG9jYWxlKTtcbiAgfVxuXG4gIHN0YXRpYyByZXNldENhY2hlKCkge1xuICAgIHN5c0xvY2FsZUNhY2hlID0gbnVsbDtcbiAgICBpbnRsRFRDYWNoZSA9IHt9O1xuICAgIGludGxOdW1DYWNoZSA9IHt9O1xuICAgIGludGxSZWxDYWNoZSA9IHt9O1xuICB9XG5cbiAgc3RhdGljIGZyb21PYmplY3QoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncyB9ID0ge30pIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncyk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihsb2NhbGUsIG51bWJlcmluZywgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncywgc3BlY2lmaWVkTG9jYWxlKSB7XG4gICAgY29uc3QgW3BhcnNlZExvY2FsZSwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtLCBwYXJzZWRPdXRwdXRDYWxlbmRhcl0gPSBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGUpO1xuXG4gICAgdGhpcy5sb2NhbGUgPSBwYXJzZWRMb2NhbGU7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmcgfHwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtIHx8IG51bGw7XG4gICAgdGhpcy5vdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyIHx8IHBhcnNlZE91dHB1dENhbGVuZGFyIHx8IG51bGw7XG4gICAgdGhpcy53ZWVrU2V0dGluZ3MgPSB3ZWVrU2V0dGluZ3M7XG4gICAgdGhpcy5pbnRsID0gaW50bENvbmZpZ1N0cmluZyh0aGlzLmxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sIHRoaXMub3V0cHV0Q2FsZW5kYXIpO1xuXG4gICAgdGhpcy53ZWVrZGF5c0NhY2hlID0geyBmb3JtYXQ6IHt9LCBzdGFuZGFsb25lOiB7fSB9O1xuICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07XG4gICAgdGhpcy5tZXJpZGllbUNhY2hlID0gbnVsbDtcbiAgICB0aGlzLmVyYUNhY2hlID0ge307XG5cbiAgICB0aGlzLnNwZWNpZmllZExvY2FsZSA9IHNwZWNpZmllZExvY2FsZTtcbiAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gbnVsbDtcbiAgfVxuXG4gIGdldCBmYXN0TnVtYmVycygpIHtcbiAgICBpZiAodGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gc3VwcG9ydHNGYXN0TnVtYmVycyh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mYXN0TnVtYmVyc0NhY2hlZDtcbiAgfVxuXG4gIGxpc3RpbmdNb2RlKCkge1xuICAgIGNvbnN0IGlzQWN0dWFsbHlFbiA9IHRoaXMuaXNFbmdsaXNoKCk7XG4gICAgY29uc3QgaGFzTm9XZWlyZG5lc3MgPVxuICAgICAgKHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBudWxsIHx8IHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIikgJiZcbiAgICAgICh0aGlzLm91dHB1dENhbGVuZGFyID09PSBudWxsIHx8IHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IFwiZ3JlZ29yeVwiKTtcbiAgICByZXR1cm4gaXNBY3R1YWxseUVuICYmIGhhc05vV2VpcmRuZXNzID8gXCJlblwiIDogXCJpbnRsXCI7XG4gIH1cblxuICBjbG9uZShhbHRzKSB7XG4gICAgaWYgKCFhbHRzIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFsdHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKFxuICAgICAgICBhbHRzLmxvY2FsZSB8fCB0aGlzLnNwZWNpZmllZExvY2FsZSxcbiAgICAgICAgYWx0cy5udW1iZXJpbmdTeXN0ZW0gfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGFsdHMub3V0cHV0Q2FsZW5kYXIgfHwgdGhpcy5vdXRwdXRDYWxlbmRhcixcbiAgICAgICAgdmFsaWRhdGVXZWVrU2V0dGluZ3MoYWx0cy53ZWVrU2V0dGluZ3MpIHx8IHRoaXMud2Vla1NldHRpbmdzLFxuICAgICAgICBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJlZGVmYXVsdFRvRU4oYWx0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoeyAuLi5hbHRzLCBkZWZhdWx0VG9FTjogdHJ1ZSB9KTtcbiAgfVxuXG4gIHJlZGVmYXVsdFRvU3lzdGVtKGFsdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IGZhbHNlIH0pO1xuICB9XG5cbiAgbW9udGhzKGxlbmd0aCwgZm9ybWF0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgRW5nbGlzaC5tb250aHMsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQgPyB7IG1vbnRoOiBsZW5ndGgsIGRheTogXCJudW1lcmljXCIgfSA6IHsgbW9udGg6IGxlbmd0aCB9LFxuICAgICAgICBmb3JtYXRTdHIgPSBmb3JtYXQgPyBcImZvcm1hdFwiIDogXCJzdGFuZGFsb25lXCI7XG4gICAgICBpZiAoIXRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIm1vbnRoXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfVxuXG4gIHdlZWtkYXlzKGxlbmd0aCwgZm9ybWF0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgRW5nbGlzaC53ZWVrZGF5cywgKCkgPT4ge1xuICAgICAgY29uc3QgaW50bCA9IGZvcm1hdFxuICAgICAgICAgID8geyB3ZWVrZGF5OiBsZW5ndGgsIHllYXI6IFwibnVtZXJpY1wiLCBtb250aDogXCJsb25nXCIsIGRheTogXCJudW1lcmljXCIgfVxuICAgICAgICAgIDogeyB3ZWVrZGF5OiBsZW5ndGggfSxcbiAgICAgICAgZm9ybWF0U3RyID0gZm9ybWF0ID8gXCJmb3JtYXRcIiA6IFwic3RhbmRhbG9uZVwiO1xuICAgICAgaWYgKCF0aGlzLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0gPSBtYXBXZWVrZGF5cygoZHQpID0+XG4gICAgICAgICAgdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIndlZWtkYXlcIilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdO1xuICAgIH0pO1xuICB9XG5cbiAgbWVyaWRpZW1zKCkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYoXG4gICAgICB0aGlzLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgKCkgPT4gRW5nbGlzaC5tZXJpZGllbXMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGVyZSBjb3VsZCBiZSBhcmliaXRyYXJ5IGRheSBwZXJpb2RzLiBXZSdyZSBnb25uYSBhc3N1bWUgdGhlcmUgYXJlIGV4YWN0bHkgdHdvXG4gICAgICAgIC8vIGZvciBBTSBhbmQgUE0uIFRoaXMgaXMgcHJvYmFibHkgd3JvbmcsIGJ1dCBpdCdzIG1ha2VzIHBhcnNpbmcgd2F5IGVhc2llci5cbiAgICAgICAgaWYgKCF0aGlzLm1lcmlkaWVtQ2FjaGUpIHtcbiAgICAgICAgICBjb25zdCBpbnRsID0geyBob3VyOiBcIm51bWVyaWNcIiwgaG91ckN5Y2xlOiBcImgxMlwiIH07XG4gICAgICAgICAgdGhpcy5tZXJpZGllbUNhY2hlID0gW0RhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDkpLCBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCAxOSldLm1hcChcbiAgICAgICAgICAgIChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcImRheXBlcmlvZFwiKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tZXJpZGllbUNhY2hlO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBlcmFzKGxlbmd0aCkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBFbmdsaXNoLmVyYXMsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGwgPSB7IGVyYTogbGVuZ3RoIH07XG5cbiAgICAgIC8vIFRoaXMgaXMgcHJvYmxlbWF0aWMuIERpZmZlcmVudCBjYWxlbmRhcnMgYXJlIGdvaW5nIHRvIGRlZmluZSBlcmFzIHRvdGFsbHkgZGlmZmVyZW50bHkuIFdoYXQgSSBuZWVkIGlzIHRoZSBtaW5pbXVtIHNldCBvZiBkYXRlc1xuICAgICAgLy8gdG8gZGVmaW5pdGVseSBlbnVtZXJhdGUgdGhlbS5cbiAgICAgIGlmICghdGhpcy5lcmFDYWNoZVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXSA9IFtEYXRlVGltZS51dGMoLTQwLCAxLCAxKSwgRGF0ZVRpbWUudXRjKDIwMTcsIDEsIDEpXS5tYXAoKGR0KSA9PlxuICAgICAgICAgIHRoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJlcmFcIilcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4dHJhY3QoZHQsIGludGxPcHRzLCBmaWVsZCkge1xuICAgIGNvbnN0IGRmID0gdGhpcy5kdEZvcm1hdHRlcihkdCwgaW50bE9wdHMpLFxuICAgICAgcmVzdWx0cyA9IGRmLmZvcm1hdFRvUGFydHMoKSxcbiAgICAgIG1hdGNoaW5nID0gcmVzdWx0cy5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gZmllbGQpO1xuICAgIHJldHVybiBtYXRjaGluZyA/IG1hdGNoaW5nLnZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIG51bWJlckZvcm1hdHRlcihvcHRzID0ge30pIHtcbiAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSlcbiAgICAvLyAoaW4gY29udHJhc3QsIHRoZSByZXN0IG9mIHRoZSBjb25kaXRpb24gaXMgdXNlZCBoZWF2aWx5KVxuICAgIHJldHVybiBuZXcgUG9seU51bWJlckZvcm1hdHRlcih0aGlzLmludGwsIG9wdHMuZm9yY2VTaW1wbGUgfHwgdGhpcy5mYXN0TnVtYmVycywgb3B0cyk7XG4gIH1cblxuICBkdEZvcm1hdHRlcihkdCwgaW50bE9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUG9seURhdGVGb3JtYXR0ZXIoZHQsIHRoaXMuaW50bCwgaW50bE9wdHMpO1xuICB9XG5cbiAgcmVsRm9ybWF0dGVyKG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUG9seVJlbEZvcm1hdHRlcih0aGlzLmludGwsIHRoaXMuaXNFbmdsaXNoKCksIG9wdHMpO1xuICB9XG5cbiAgbGlzdEZvcm1hdHRlcihvcHRzID0ge30pIHtcbiAgICByZXR1cm4gZ2V0Q2FjaGVkTEYodGhpcy5pbnRsLCBvcHRzKTtcbiAgfVxuXG4gIGlzRW5nbGlzaCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5sb2NhbGUgPT09IFwiZW5cIiB8fFxuICAgICAgdGhpcy5sb2NhbGUudG9Mb3dlckNhc2UoKSA9PT0gXCJlbi11c1wiIHx8XG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKFwiZW4tdXNcIilcbiAgICApO1xuICB9XG5cbiAgZ2V0V2Vla1NldHRpbmdzKCkge1xuICAgIGlmICh0aGlzLndlZWtTZXR0aW5ncykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1NldHRpbmdzO1xuICAgIH0gZWxzZSBpZiAoIWhhc0xvY2FsZVdlZWtJbmZvKCkpIHtcbiAgICAgIHJldHVybiBmYWxsYmFja1dlZWtTZXR0aW5ncztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldENhY2hlZFdlZWtJbmZvKHRoaXMubG9jYWxlKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdGFydE9mV2VlaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5maXJzdERheTtcbiAgfVxuXG4gIGdldE1pbkRheXNJbkZpcnN0V2VlaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5taW5pbWFsRGF5cztcbiAgfVxuXG4gIGdldFdlZWtlbmREYXlzKCkge1xuICAgIHJldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLndlZWtlbmQ7XG4gIH1cblxuICBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJlxuICAgICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG90aGVyLm51bWJlcmluZ1N5c3RlbSAmJlxuICAgICAgdGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gb3RoZXIub3V0cHV0Q2FsZW5kYXJcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZm9ybWF0T2Zmc2V0LCBzaWduZWRPZmZzZXQgfSBmcm9tIFwiLi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG5sZXQgc2luZ2xldG9uID0gbnVsbDtcblxuLyoqXG4gKiBBIHpvbmUgd2l0aCBhIGZpeGVkIG9mZnNldCAobWVhbmluZyBubyBEU1QpXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml4ZWRPZmZzZXRab25lIGV4dGVuZHMgWm9uZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgVVRDXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBnZXQgdXRjSW5zdGFuY2UoKSB7XG4gICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkge1xuICAgICAgc2luZ2xldG9uID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZSgwKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZXRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugd2l0aCBhIHNwZWNpZmllZCBvZmZzZXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW4gbWludXRlc1xuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICBzdGF0aWMgaW5zdGFuY2Uob2Zmc2V0KSB7XG4gICAgcmV0dXJuIG9mZnNldCA9PT0gMCA/IEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZSA6IG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgRml4ZWRPZmZzZXRab25lIGZyb20gYSBVVEMgb2Zmc2V0IHN0cmluZywgbGlrZSBcIlVUQys2XCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgb2Zmc2V0IHN0cmluZyB0byBwYXJzZVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrNlwiKVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrMDZcIilcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDLTY6MDBcIilcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgc3RhdGljIHBhcnNlU3BlY2lmaWVyKHMpIHtcbiAgICBpZiAocykge1xuICAgICAgY29uc3QgciA9IHMubWF0Y2goL151dGMoPzooWystXVxcZHsxLDJ9KSg/OjooXFxkezJ9KSk/KT8kL2kpO1xuICAgICAgaWYgKHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaXhlZE9mZnNldFpvbmUoc2lnbmVkT2Zmc2V0KHJbMV0sIHJbMl0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihvZmZzZXQpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cbiAgICB0aGlzLmZpeGVkID0gb2Zmc2V0O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwiZml4ZWRcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmZpeGVkID09PSAwID8gXCJVVENcIiA6IGBVVEMke2Zvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBcIm5hcnJvd1wiKX1gO1xuICB9XG5cbiAgZ2V0IGlhbmFOYW1lKCkge1xuICAgIGlmICh0aGlzLmZpeGVkID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJFdGMvVVRDXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgRXRjL0dNVCR7Zm9ybWF0T2Zmc2V0KC10aGlzLmZpeGVkLCBcIm5hcnJvd1wiKX1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBmb3JtYXQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmZpeGVkO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJmaXhlZFwiICYmIG90aGVyWm9uZS5maXhlZCA9PT0gdGhpcy5maXhlZDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxuLyoqXG4gKiBBIHpvbmUgdGhhdCBmYWlsZWQgdG8gcGFyc2UuIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRab25lIGV4dGVuZHMgWm9uZSB7XG4gIGNvbnN0cnVjdG9yKHpvbmVOYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogIEBwcml2YXRlICovXG4gICAgdGhpcy56b25lTmFtZSA9IHpvbmVOYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwiaW52YWxpZFwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuem9uZU5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCgpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCgpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwgIi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgSW52YWxpZFpvbmUgZnJvbSBcIi4uL3pvbmVzL2ludmFsaWRab25lLmpzXCI7XG5cbmltcG9ydCB7IGlzVW5kZWZpbmVkLCBpc1N0cmluZywgaXNOdW1iZXIgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgU3lzdGVtWm9uZSBmcm9tIFwiLi4vem9uZXMvc3lzdGVtWm9uZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplWm9uZShpbnB1dCwgZGVmYXVsdFpvbmUpIHtcbiAgbGV0IG9mZnNldDtcbiAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBkZWZhdWx0Wm9uZTtcbiAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFpvbmUpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgY29uc3QgbG93ZXJlZCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyZWQgPT09IFwiZGVmYXVsdFwiKSByZXR1cm4gZGVmYXVsdFpvbmU7XG4gICAgZWxzZSBpZiAobG93ZXJlZCA9PT0gXCJsb2NhbFwiIHx8IGxvd2VyZWQgPT09IFwic3lzdGVtXCIpIHJldHVybiBTeXN0ZW1ab25lLmluc3RhbmNlO1xuICAgIGVsc2UgaWYgKGxvd2VyZWQgPT09IFwidXRjXCIgfHwgbG93ZXJlZCA9PT0gXCJnbXRcIikgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtcbiAgICBlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgSUFOQVpvbmUuY3JlYXRlKGlucHV0KTtcbiAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkpIHtcbiAgICByZXR1cm4gRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGlucHV0KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgXCJvZmZzZXRcIiBpbiBpbnB1dCAmJiB0eXBlb2YgaW5wdXQub2Zmc2V0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAvLyBUaGlzIGlzIGR1bWIsIGJ1dCB0aGUgaW5zdGFuY2VvZiBjaGVjayBhYm92ZSBkb2Vzbid0IHNlZW0gdG8gcmVhbGx5IHdvcmtcbiAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpO1xuICB9XG59XG4iLCAiaW1wb3J0IFN5c3RlbVpvbmUgZnJvbSBcIi4vem9uZXMvc3lzdGVtWm9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5cbmltcG9ydCB7IG5vcm1hbGl6ZVpvbmUgfSBmcm9tIFwiLi9pbXBsL3pvbmVVdGlsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZVdlZWtTZXR0aW5ncyB9IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuXG5sZXQgbm93ID0gKCkgPT4gRGF0ZS5ub3coKSxcbiAgZGVmYXVsdFpvbmUgPSBcInN5c3RlbVwiLFxuICBkZWZhdWx0TG9jYWxlID0gbnVsbCxcbiAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bGwsXG4gIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG51bGwsXG4gIHR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDYwLFxuICB0aHJvd09uSW52YWxpZCxcbiAgZGVmYXVsdFdlZWtTZXR0aW5ncyA9IG51bGw7XG5cbi8qKlxuICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3Mge1xuICAvKipcbiAgICogR2V0IHRoZSBjYWxsYmFjayBmb3IgcmV0dXJuaW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcC5cbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgc3RhdGljIGdldCBub3coKSB7XG4gICAgcmV0dXJuIG5vdztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciByZXR1cm5pbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgKiBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlciwgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcyBhbiBFcG9jaCBtaWxsaXNlY29uZCBjb3VudFxuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IERhdGUubm93KCkgKyAzMDAwIC8vIHByZXRlbmQgaXQgaXMgMyBzZWNvbmRzIGluIHRoZSBmdXR1cmVcbiAgICogQGV4YW1wbGUgU2V0dGluZ3Mubm93ID0gKCkgPT4gMCAvLyBhbHdheXMgcHJldGVuZCBpdCdzIEphbiAxLCAxOTcwIGF0IG1pZG5pZ2h0IGluIFVUQyB0aW1lXG4gICAqL1xuICBzdGF0aWMgc2V0IG5vdyhuKSB7XG4gICAgbm93ID0gbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgdGltZSB6b25lIHRvIGNyZWF0ZSBEYXRlVGltZXMgaW4uIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIFVzZSB0aGUgdmFsdWUgXCJzeXN0ZW1cIiB0byByZXNldCB0aGlzIHZhbHVlIHRvIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRab25lKHpvbmUpIHtcbiAgICBkZWZhdWx0Wm9uZSA9IHpvbmU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdGhlIHN5c3RlbSdzIHRpbWUgem9uZSAodGhlIG9uZSBzZXQgb24gdGhlIG1hY2hpbmUgdGhhdCBydW5zIHRoaXMgY29kZSkuXG4gICAqIEB0eXBlIHtab25lfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0Wm9uZSgpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplWm9uZShkZWZhdWx0Wm9uZSwgU3lzdGVtWm9uZS5pbnN0YW5jZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IGxvY2FsZSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRMb2NhbGUoKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRMb2NhbGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IGxvY2FsZSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRMb2NhbGUobG9jYWxlKSB7XG4gICAgZGVmYXVsdExvY2FsZSA9IGxvY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgbnVtYmVyaW5nIHN5c3RlbSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW07XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmdTeXN0ZW07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPdXRwdXRDYWxlbmRhcigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE91dHB1dENhbGVuZGFyO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBXZWVrU2V0dGluZ3NcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGZpcnN0RGF5XG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5pbWFsRGF5c1xuICAgKiBAcHJvcGVydHkge251bWJlcltdfSB3ZWVrZW5kXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtXZWVrU2V0dGluZ3N8bnVsbH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdFdlZWtTZXR0aW5ncygpIHtcbiAgICByZXR1cm4gZGVmYXVsdFdlZWtTZXR0aW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgZGVmYXVsdCBsb2NhbGUgd2VlayBzZXR0aW5ncywgaS5lLiB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIHRoZSB3ZWVrZW5kIGFuZFxuICAgKiBob3cgbWFueSBkYXlzIGFyZSByZXF1aXJlZCBpbiB0aGUgZmlyc3Qgd2VlayBvZiBhIHllYXIuXG4gICAqIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7V2Vla1NldHRpbmdzfG51bGx9IHdlZWtTZXR0aW5nc1xuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0V2Vla1NldHRpbmdzKHdlZWtTZXR0aW5ncykge1xuICAgIGRlZmF1bHRXZWVrU2V0dGluZ3MgPSB2YWxpZGF0ZVdlZWtTZXR0aW5ncyh3ZWVrU2V0dGluZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3V0b2ZmIHllYXIgYWZ0ZXIgd2hpY2ggYSBzdHJpbmcgZW5jb2RpbmcgYSB5ZWFyIGFzIHR3byBkaWdpdHMgaXMgaW50ZXJwcmV0ZWQgdG8gb2NjdXIgaW4gdGhlIGN1cnJlbnQgY2VudHVyeS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHN0YXRpYyBnZXQgdHdvRGlnaXRDdXRvZmZZZWFyKCkge1xuICAgIHJldHVybiB0d29EaWdpdEN1dG9mZlllYXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXRvZmYgeWVhciBhZnRlciB3aGljaCBhIHN0cmluZyBlbmNvZGluZyBhIHllYXIgYXMgdHdvIGRpZ2l0cyBpcyBpbnRlcnByZXRlZCB0byBvY2N1ciBpbiB0aGUgY3VycmVudCBjZW50dXJ5LlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPSAwIC8vIGN1dC1vZmYgeWVhciBpcyAwLCBzbyBhbGwgJ3l5JyBhcmUgaW50ZXJwcmV0ZWQgYXMgY3VycmVudCBjZW50dXJ5XG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDUwIC8vICc0OScgLT4gMTk0OTsgJzUwJyAtPiAyMDUwXG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDE5NTAgLy8gaW50ZXJwcmV0ZWQgYXMgNTBcbiAgICogQGV4YW1wbGUgU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID0gMjA1MCAvLyBBTFNPIGludGVycHJldGVkIGFzIDUwXG4gICAqL1xuICBzdGF0aWMgc2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcihjdXRvZmZZZWFyKSB7XG4gICAgdHdvRGlnaXRDdXRvZmZZZWFyID0gY3V0b2ZmWWVhciAlIDEwMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgZ2V0IHRocm93T25JbnZhbGlkKCkge1xuICAgIHJldHVybiB0aHJvd09uSW52YWxpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgc2V0IHRocm93T25JbnZhbGlkKHQpIHtcbiAgICB0aHJvd09uSW52YWxpZCA9IHQ7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgTHV4b24ncyBnbG9iYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgcmVzZXRDYWNoZXMoKSB7XG4gICAgTG9jYWxlLnJlc2V0Q2FjaGUoKTtcbiAgICBJQU5BWm9uZS5yZXNldENhY2hlKCk7XG4gIH1cbn1cbiIsICJleHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkIHtcbiAgY29uc3RydWN0b3IocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgIHRoaXMuZXhwbGFuYXRpb24gPSBleHBsYW5hdGlvbjtcbiAgfVxuXG4gIHRvTWVzc2FnZSgpIHtcbiAgICBpZiAodGhpcy5leHBsYW5hdGlvbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMucmVhc29ufTogJHt0aGlzLmV4cGxhbmF0aW9ufWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnJlYXNvbjtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBpbnRlZ2VyQmV0d2VlbixcbiAgaXNMZWFwWWVhcixcbiAgdGltZU9iamVjdCxcbiAgZGF5c0luWWVhcixcbiAgZGF5c0luTW9udGgsXG4gIHdlZWtzSW5XZWVrWWVhcixcbiAgaXNJbnRlZ2VyLFxuICBpc1VuZGVmaW5lZCxcbn0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW52YWxpZC5qc1wiO1xuaW1wb3J0IHsgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5cbmNvbnN0IG5vbkxlYXBMYWRkZXIgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdLFxuICBsZWFwTGFkZGVyID0gWzAsIDMxLCA2MCwgOTEsIDEyMSwgMTUyLCAxODIsIDIxMywgMjQ0LCAyNzQsIDMwNSwgMzM1XTtcblxuZnVuY3Rpb24gdW5pdE91dE9mUmFuZ2UodW5pdCwgdmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBJbnZhbGlkKFxuICAgIFwidW5pdCBvdXQgb2YgcmFuZ2VcIixcbiAgICBgeW91IHNwZWNpZmllZCAke3ZhbHVlfSAob2YgdHlwZSAke3R5cGVvZiB2YWx1ZX0pIGFzIGEgJHt1bml0fSwgd2hpY2ggaXMgaW52YWxpZGBcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCAtIDEsIGRheSkpO1xuXG4gIGlmICh5ZWFyIDwgMTAwICYmIHllYXIgPj0gMCkge1xuICAgIGQuc2V0VVRDRnVsbFllYXIoZC5nZXRVVENGdWxsWWVhcigpIC0gMTkwMCk7XG4gIH1cblxuICBjb25zdCBqcyA9IGQuZ2V0VVRDRGF5KCk7XG5cbiAgcmV0dXJuIGpzID09PSAwID8gNyA6IGpzO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KSB7XG4gIHJldHVybiBkYXkgKyAoaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyKVttb250aCAtIDFdO1xufVxuXG5mdW5jdGlvbiB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpIHtcbiAgY29uc3QgdGFibGUgPSBpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIsXG4gICAgbW9udGgwID0gdGFibGUuZmluZEluZGV4KChpKSA9PiBpIDwgb3JkaW5hbCksXG4gICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07XG4gIHJldHVybiB7IG1vbnRoOiBtb250aDAgKyAxLCBkYXkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzb1dlZWtkYXlUb0xvY2FsKGlzb1dlZWtkYXksIHN0YXJ0T2ZXZWVrKSB7XG4gIHJldHVybiAoKGlzb1dlZWtkYXkgLSBzdGFydE9mV2VlayArIDcpICUgNykgKyAxO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdyZWdvcmlhblRvV2VlayhncmVnT2JqLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSBncmVnT2JqLFxuICAgIG9yZGluYWwgPSBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KSxcbiAgICB3ZWVrZGF5ID0gaXNvV2Vla2RheVRvTG9jYWwoZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpLCBzdGFydE9mV2Vlayk7XG5cbiAgbGV0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKChvcmRpbmFsIC0gd2Vla2RheSArIDE0IC0gbWluRGF5c0luRmlyc3RXZWVrKSAvIDcpLFxuICAgIHdlZWtZZWFyO1xuXG4gIGlmICh3ZWVrTnVtYmVyIDwgMSkge1xuICAgIHdlZWtZZWFyID0geWVhciAtIDE7XG4gICAgd2Vla051bWJlciA9IHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIH0gZWxzZSBpZiAod2Vla051bWJlciA+IHdlZWtzSW5XZWVrWWVhcih5ZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKSkge1xuICAgIHdlZWtZZWFyID0geWVhciArIDE7XG4gICAgd2Vla051bWJlciA9IDE7XG4gIH0gZWxzZSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyO1xuICB9XG5cbiAgcmV0dXJuIHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXksIC4uLnRpbWVPYmplY3QoZ3JlZ09iaikgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSwgbWluRGF5c0luRmlyc3RXZWVrID0gNCwgc3RhcnRPZldlZWsgPSAxKSB7XG4gIGNvbnN0IHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXkgfSA9IHdlZWtEYXRhLFxuICAgIHdlZWtkYXlPZkphbjQgPSBpc29XZWVrZGF5VG9Mb2NhbChkYXlPZldlZWsod2Vla1llYXIsIDEsIG1pbkRheXNJbkZpcnN0V2VlayksIHN0YXJ0T2ZXZWVrKSxcbiAgICB5ZWFySW5EYXlzID0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG5cbiAgbGV0IG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gNyArIG1pbkRheXNJbkZpcnN0V2VlayxcbiAgICB5ZWFyO1xuXG4gIGlmIChvcmRpbmFsIDwgMSkge1xuICAgIHllYXIgPSB3ZWVrWWVhciAtIDE7XG4gICAgb3JkaW5hbCArPSBkYXlzSW5ZZWFyKHllYXIpO1xuICB9IGVsc2UgaWYgKG9yZGluYWwgPiB5ZWFySW5EYXlzKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyICsgMTtcbiAgICBvcmRpbmFsIC09IGRheXNJblllYXIod2Vla1llYXIpO1xuICB9IGVsc2Uge1xuICAgIHllYXIgPSB3ZWVrWWVhcjtcbiAgfVxuXG4gIGNvbnN0IHsgbW9udGgsIGRheSB9ID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKTtcbiAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSwgLi4udGltZU9iamVjdCh3ZWVrRGF0YSkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdyZWdvcmlhblRvT3JkaW5hbChncmVnRGF0YSkge1xuICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IGdyZWdEYXRhO1xuICBjb25zdCBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSk7XG4gIHJldHVybiB7IHllYXIsIG9yZGluYWwsIC4uLnRpbWVPYmplY3QoZ3JlZ0RhdGEpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcmRpbmFsVG9HcmVnb3JpYW4ob3JkaW5hbERhdGEpIHtcbiAgY29uc3QgeyB5ZWFyLCBvcmRpbmFsIH0gPSBvcmRpbmFsRGF0YTtcbiAgY29uc3QgeyBtb250aCwgZGF5IH0gPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpO1xuICByZXR1cm4geyB5ZWFyLCBtb250aCwgZGF5LCAuLi50aW1lT2JqZWN0KG9yZGluYWxEYXRhKSB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGxvY2FsIHdlZWsgdW5pdHMgbGlrZSBsb2NhbFdlZWtkYXkgYXJlIHVzZWQgaW4gb2JqLlxuICogSWYgc28sIHZhbGlkYXRlcyB0aGF0IHRoZXkgYXJlIG5vdCBtaXhlZCB3aXRoIElTTyB3ZWVrIHVuaXRzIGFuZCB0aGVuIGNvcGllcyB0aGVtIHRvIHRoZSBub3JtYWwgd2VlayB1bml0IHByb3BlcnRpZXMuXG4gKiBNb2RpZmllcyBvYmogaW4tcGxhY2UhXG4gKiBAcGFyYW0gb2JqIHRoZSBvYmplY3QgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VzTG9jYWxXZWVrVmFsdWVzKG9iaiwgbG9jKSB7XG4gIGNvbnN0IGhhc0xvY2FsZVdlZWtEYXRhID1cbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla2RheSkgfHxcbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla051bWJlcikgfHxcbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla1llYXIpO1xuICBpZiAoaGFzTG9jYWxlV2Vla0RhdGEpIHtcbiAgICBjb25zdCBoYXNJc29XZWVrRGF0YSA9XG4gICAgICAhaXNVbmRlZmluZWQob2JqLndlZWtkYXkpIHx8ICFpc1VuZGVmaW5lZChvYmoud2Vla051bWJlcikgfHwgIWlzVW5kZWZpbmVkKG9iai53ZWVrWWVhcik7XG5cbiAgICBpZiAoaGFzSXNvV2Vla0RhdGEpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcbiAgICAgICAgXCJDYW5ub3QgbWl4IGxvY2FsZS1iYXNlZCB3ZWVrIGZpZWxkcyB3aXRoIElTTy1iYXNlZCB3ZWVrIGZpZWxkc1wiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtkYXkpKSBvYmoud2Vla2RheSA9IG9iai5sb2NhbFdlZWtkYXk7XG4gICAgaWYgKCFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrTnVtYmVyKSkgb2JqLndlZWtOdW1iZXIgPSBvYmoubG9jYWxXZWVrTnVtYmVyO1xuICAgIGlmICghaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla1llYXIpKSBvYmoud2Vla1llYXIgPSBvYmoubG9jYWxXZWVrWWVhcjtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla2RheTtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla051bWJlcjtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla1llYXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbkRheXNJbkZpcnN0V2VlazogbG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLFxuICAgICAgc3RhcnRPZldlZWs6IGxvYy5nZXRTdGFydE9mV2VlaygpLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgbWluRGF5c0luRmlyc3RXZWVrOiA0LCBzdGFydE9mV2VlazogMSB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkV2Vla0RhdGEob2JqLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3QgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai53ZWVrWWVhciksXG4gICAgdmFsaWRXZWVrID0gaW50ZWdlckJldHdlZW4oXG4gICAgICBvYmoud2Vla051bWJlcixcbiAgICAgIDEsXG4gICAgICB3ZWVrc0luV2Vla1llYXIob2JqLndlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICksXG4gICAgdmFsaWRXZWVrZGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLndlZWtkYXksIDEsIDcpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1llYXJcIiwgb2JqLndlZWtZZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRXZWVrKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1wiLCBvYmoud2Vla051bWJlcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vla2RheSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtkYXlcIiwgb2JqLndlZWtkYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZE9yZGluYWxEYXRhKG9iaikge1xuICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLFxuICAgIHZhbGlkT3JkaW5hbCA9IGludGVnZXJCZXR3ZWVuKG9iai5vcmRpbmFsLCAxLCBkYXlzSW5ZZWFyKG9iai55ZWFyKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRPcmRpbmFsKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwib3JkaW5hbFwiLCBvYmoub3JkaW5hbCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHtcbiAgY29uc3QgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai55ZWFyKSxcbiAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksXG4gICAgdmFsaWREYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmouZGF5LCAxLCBkYXlzSW5Nb250aChvYmoueWVhciwgb2JqLm1vbnRoKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRNb250aCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1vbnRoXCIsIG9iai5tb250aCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkRGF5KSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwiZGF5XCIsIG9iai5kYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZFRpbWVEYXRhKG9iaikge1xuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9ID0gb2JqO1xuICBjb25zdCB2YWxpZEhvdXIgPVxuICAgICAgaW50ZWdlckJldHdlZW4oaG91ciwgMCwgMjMpIHx8XG4gICAgICAoaG91ciA9PT0gMjQgJiYgbWludXRlID09PSAwICYmIHNlY29uZCA9PT0gMCAmJiBtaWxsaXNlY29uZCA9PT0gMCksXG4gICAgdmFsaWRNaW51dGUgPSBpbnRlZ2VyQmV0d2VlbihtaW51dGUsIDAsIDU5KSxcbiAgICB2YWxpZFNlY29uZCA9IGludGVnZXJCZXR3ZWVuKHNlY29uZCwgMCwgNTkpLFxuICAgIHZhbGlkTWlsbGlzZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihtaWxsaXNlY29uZCwgMCwgOTk5KTtcblxuICBpZiAoIXZhbGlkSG91cikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcImhvdXJcIiwgaG91cik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWludXRlKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWludXRlXCIsIG1pbnV0ZSk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkU2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwic2Vjb25kXCIsIHNlY29uZCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWlsbGlzZWNvbmQpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtaWxsaXNlY29uZFwiLCBtaWxsaXNlY29uZCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG4iLCAiLypcbiAgVGhpcyBpcyBqdXN0IGEganVuayBkcmF3ZXIsIGNvbnRhaW5pbmcgYW55dGhpbmcgdXNlZCBhY3Jvc3MgbXVsdGlwbGUgY2xhc3Nlcy5cbiAgQmVjYXVzZSBMdXhvbiBpcyBzbWFsbChpc2gpLCB0aGlzIHNob3VsZCBzdGF5IHNtYWxsIGFuZCB3ZSB3b24ndCB3b3JyeSBhYm91dCBzcGxpdHRpbmdcbiAgaXQgdXAgaW50bywgc2F5LCBwYXJzaW5nVXRpbC5qcyBhbmQgYmFzaWNVdGlsLmpzIGFuZCBzbyBvbi4gQnV0IHRoZXkgYXJlIGRpdmlkZWQgdXAgYnkgZmVhdHVyZSBhcmVhLlxuKi9cblxuaW1wb3J0IHsgSW52YWxpZEFyZ3VtZW50RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4uL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgeyBkYXlPZldlZWssIGlzb1dlZWtkYXlUb0xvY2FsIH0gZnJvbSBcIi4vY29udmVyc2lvbnMuanNcIjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbi8vIFRZUEVTXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1VuZGVmaW5lZChvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcIm51bWJlclwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlZ2VyKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcIm51bWJlclwiICYmIG8gJSAxID09PSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwic3RyaW5nXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSBcIltvYmplY3QgRGF0ZV1cIjtcbn1cblxuLy8gQ0FQQUJJTElUSUVTXG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNSZWxhdGl2ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdHlwZW9mIEludGwgIT09IFwidW5kZWZpbmVkXCIgJiYgISFJbnRsLlJlbGF0aXZlVGltZUZvcm1hdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzTG9jYWxlV2Vla0luZm8oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGVvZiBJbnRsICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAhIUludGwuTG9jYWxlICYmXG4gICAgICAoXCJ3ZWVrSW5mb1wiIGluIEludGwuTG9jYWxlLnByb3RvdHlwZSB8fCBcImdldFdlZWtJbmZvXCIgaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlKVxuICAgICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gT0JKRUNUUyBBTkQgQVJSQVlTXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXliZUFycmF5KHRoaW5nKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHRoaW5nKSA/IHRoaW5nIDogW3RoaW5nXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJlc3RCeShhcnIsIGJ5LCBjb21wYXJlKSB7XG4gIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gYXJyLnJlZHVjZSgoYmVzdCwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHBhaXIgPSBbYnkobmV4dCksIG5leHRdO1xuICAgIGlmICghYmVzdCkge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfSBlbHNlIGlmIChjb21wYXJlKGJlc3RbMF0sIHBhaXJbMF0pID09PSBiZXN0WzBdKSB7XG4gICAgICByZXR1cm4gYmVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfVxuICB9LCBudWxsKVsxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgoYSwgaykgPT4ge1xuICAgIGFba10gPSBvYmpba107XG4gICAgcmV0dXJuIGE7XG4gIH0sIHt9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdlZWtTZXR0aW5ncyhzZXR0aW5ncykge1xuICBpZiAoc2V0dGluZ3MgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZXR0aW5ncyAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIldlZWsgc2V0dGluZ3MgbXVzdCBiZSBhbiBvYmplY3RcIik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKFxuICAgICAgIWludGVnZXJCZXR3ZWVuKHNldHRpbmdzLmZpcnN0RGF5LCAxLCA3KSB8fFxuICAgICAgIWludGVnZXJCZXR3ZWVuKHNldHRpbmdzLm1pbmltYWxEYXlzLCAxLCA3KSB8fFxuICAgICAgIUFycmF5LmlzQXJyYXkoc2V0dGluZ3Mud2Vla2VuZCkgfHxcbiAgICAgIHNldHRpbmdzLndlZWtlbmQuc29tZSgodikgPT4gIWludGVnZXJCZXR3ZWVuKHYsIDEsIDcpKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiSW52YWxpZCB3ZWVrIHNldHRpbmdzXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3REYXk6IHNldHRpbmdzLmZpcnN0RGF5LFxuICAgICAgbWluaW1hbERheXM6IHNldHRpbmdzLm1pbmltYWxEYXlzLFxuICAgICAgd2Vla2VuZDogQXJyYXkuZnJvbShzZXR0aW5ncy53ZWVrZW5kKSxcbiAgICB9O1xuICB9XG59XG5cbi8vIE5VTUJFUlMgQU5EIFNUUklOR1NcblxuZXhwb3J0IGZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkge1xuICByZXR1cm4gaXNJbnRlZ2VyKHRoaW5nKSAmJiB0aGluZyA+PSBib3R0b20gJiYgdGhpbmcgPD0gdG9wO1xufVxuXG4vLyB4ICUgbiBidXQgdGFrZXMgdGhlIHNpZ24gb2YgbiBpbnN0ZWFkIG9mIHhcbmV4cG9ydCBmdW5jdGlvbiBmbG9vck1vZCh4LCBuKSB7XG4gIHJldHVybiB4IC0gbiAqIE1hdGguZmxvb3IoeCAvIG4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFkU3RhcnQoaW5wdXQsIG4gPSAyKSB7XG4gIGNvbnN0IGlzTmVnID0gaW5wdXQgPCAwO1xuICBsZXQgcGFkZGVkO1xuICBpZiAoaXNOZWcpIHtcbiAgICBwYWRkZWQgPSBcIi1cIiArIChcIlwiICsgLWlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH0gZWxzZSB7XG4gICAgcGFkZGVkID0gKFwiXCIgKyBpbnB1dCkucGFkU3RhcnQobiwgXCIwXCIpO1xuICB9XG4gIHJldHVybiBwYWRkZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUludGVnZXIoc3RyaW5nKSB7XG4gIGlmIChpc1VuZGVmaW5lZChzdHJpbmcpIHx8IHN0cmluZyA9PT0gbnVsbCB8fCBzdHJpbmcgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUludChzdHJpbmcsIDEwKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGbG9hdGluZyhzdHJpbmcpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyaW5nKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNaWxsaXMoZnJhY3Rpb24pIHtcbiAgLy8gUmV0dXJuIHVuZGVmaW5lZCAoaW5zdGVhZCBvZiAwKSBpbiB0aGVzZSBjYXNlcywgd2hlcmUgZnJhY3Rpb24gaXMgbm90IHNldFxuICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb24pIHx8IGZyYWN0aW9uID09PSBudWxsIHx8IGZyYWN0aW9uID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBmID0gcGFyc2VGbG9hdChcIjAuXCIgKyBmcmFjdGlvbikgKiAxMDAwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGYpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByb3VuZFRvKG51bWJlciwgZGlnaXRzLCB0b3dhcmRaZXJvID0gZmFsc2UpIHtcbiAgY29uc3QgZmFjdG9yID0gMTAgKiogZGlnaXRzLFxuICAgIHJvdW5kZXIgPSB0b3dhcmRaZXJvID8gTWF0aC50cnVuYyA6IE1hdGgucm91bmQ7XG4gIHJldHVybiByb3VuZGVyKG51bWJlciAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG5cbi8vIERBVEUgQkFTSUNTXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0ID09PSAwICYmICh5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgY29uc3QgbW9kTW9udGggPSBmbG9vck1vZChtb250aCAtIDEsIDEyKSArIDEsXG4gICAgbW9kWWVhciA9IHllYXIgKyAobW9udGggLSBtb2RNb250aCkgLyAxMjtcblxuICBpZiAobW9kTW9udGggPT09IDIpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vZE1vbnRoIC0gMV07XG4gIH1cbn1cblxuLy8gY29udmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGxvY2FsIHRpbWVzdGFtcCAoZXBvY2gsIGJ1dCB3aXRoIHRoZSBvZmZzZXQgYmFrZWQgaW4pXG5leHBvcnQgZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikge1xuICBsZXQgZCA9IERhdGUuVVRDKFxuICAgIG9iai55ZWFyLFxuICAgIG9iai5tb250aCAtIDEsXG4gICAgb2JqLmRheSxcbiAgICBvYmouaG91cixcbiAgICBvYmoubWludXRlLFxuICAgIG9iai5zZWNvbmQsXG4gICAgb2JqLm1pbGxpc2Vjb25kXG4gICk7XG5cbiAgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdFxuICBpZiAob2JqLnllYXIgPCAxMDAgJiYgb2JqLnllYXIgPj0gMCkge1xuICAgIGQgPSBuZXcgRGF0ZShkKTtcbiAgICAvLyBzZXQgdGhlIG1vbnRoIGFuZCBkYXkgYWdhaW4sIHRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgeWVhciAyMDAwIGlzIGEgbGVhcCB5ZWFyLCBidXQgeWVhciAxMDAgaXMgbm90XG4gICAgLy8gc28gaWYgb2JqLnllYXIgaXMgaW4gOTksIGJ1dCBvYmouZGF5IG1ha2VzIGl0IHJvbGwgb3ZlciBpbnRvIHllYXIgMTAwLFxuICAgIC8vIHRoZSBjYWxjdWxhdGlvbnMgZG9uZSBieSBEYXRlLlVUQyBhcmUgdXNpbmcgeWVhciAyMDAwIC0gd2hpY2ggaXMgaW5jb3JyZWN0XG4gICAgZC5zZXRVVENGdWxsWWVhcihvYmoueWVhciwgb2JqLm1vbnRoIC0gMSwgb2JqLmRheSk7XG4gIH1cbiAgcmV0dXJuICtkO1xufVxuXG4vLyBhZGFwdGVkIGZyb20gbW9tZW50LmpzOiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9ibG9iLzAwMGFjMTgwMGU2MjBmNzcwZjRlYjMxYjVhZTkwOGY2MTY3YjBhYjIvc3JjL2xpYi91bml0cy93ZWVrLWNhbGVuZGFyLXV0aWxzLmpzXG5mdW5jdGlvbiBmaXJzdFdlZWtPZmZzZXQoeWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlaykge1xuICBjb25zdCBmd2RsdyA9IGlzb1dlZWtkYXlUb0xvY2FsKGRheU9mV2Vlayh5ZWFyLCAxLCBtaW5EYXlzSW5GaXJzdFdlZWspLCBzdGFydE9mV2Vlayk7XG4gIHJldHVybiAtZndkbHcgKyBtaW5EYXlzSW5GaXJzdFdlZWsgLSAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3Qgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh3ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIGNvbnN0IHdlZWtPZmZzZXROZXh0ID0gZmlyc3RXZWVrT2Zmc2V0KHdlZWtZZWFyICsgMSwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIHJldHVybiAoZGF5c0luWWVhcih3ZWVrWWVhcikgLSB3ZWVrT2Zmc2V0ICsgd2Vla09mZnNldE5leHQpIC8gNztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVudHJ1bmNhdGVZZWFyKHllYXIpIHtcbiAgaWYgKHllYXIgPiA5OSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2UgcmV0dXJuIHllYXIgPiBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPyAxOTAwICsgeWVhciA6IDIwMDAgKyB5ZWFyO1xufVxuXG4vLyBQQVJTSU5HXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVpvbmVJbmZvKHRzLCBvZmZzZXRGb3JtYXQsIGxvY2FsZSwgdGltZVpvbmUgPSBudWxsKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0cyksXG4gICAgaW50bE9wdHMgPSB7XG4gICAgICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgfTtcblxuICBpZiAodGltZVpvbmUpIHtcbiAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHRpbWVab25lO1xuICB9XG5cbiAgY29uc3QgbW9kaWZpZWQgPSB7IHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0LCAuLi5pbnRsT3B0cyB9O1xuXG4gIGNvbnN0IHBhcnNlZCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgbW9kaWZpZWQpXG4gICAgLmZvcm1hdFRvUGFydHMoZGF0ZSlcbiAgICAuZmluZCgobSkgPT4gbS50eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwidGltZXpvbmVuYW1lXCIpO1xuICByZXR1cm4gcGFyc2VkID8gcGFyc2VkLnZhbHVlIDogbnVsbDtcbn1cblxuLy8gc2lnbmVkT2Zmc2V0KCctNScsICczMCcpIC0+IC0zMzBcbmV4cG9ydCBmdW5jdGlvbiBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKSB7XG4gIGxldCBvZmZIb3VyID0gcGFyc2VJbnQob2ZmSG91clN0ciwgMTApO1xuXG4gIC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wXG4gIGlmIChOdW1iZXIuaXNOYU4ob2ZmSG91cikpIHtcbiAgICBvZmZIb3VyID0gMDtcbiAgfVxuXG4gIGNvbnN0IG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsXG4gICAgb2ZmTWluU2lnbmVkID0gb2ZmSG91ciA8IDAgfHwgT2JqZWN0LmlzKG9mZkhvdXIsIC0wKSA/IC1vZmZNaW4gOiBvZmZNaW47XG4gIHJldHVybiBvZmZIb3VyICogNjAgKyBvZmZNaW5TaWduZWQ7XG59XG5cbi8vIENPRVJDSU9OXG5cbmV4cG9ydCBmdW5jdGlvbiBhc051bWJlcih2YWx1ZSkge1xuICBjb25zdCBudW1lcmljVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZSA9PT0gXCJcIiB8fCBOdW1iZXIuaXNOYU4obnVtZXJpY1ZhbHVlKSlcbiAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoYEludmFsaWQgdW5pdCB2YWx1ZSAke3ZhbHVlfWApO1xuICByZXR1cm4gbnVtZXJpY1ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplcikge1xuICBjb25zdCBub3JtYWxpemVkID0ge307XG4gIGZvciAoY29uc3QgdSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCB1KSkge1xuICAgICAgY29uc3QgdiA9IG9ialt1XTtcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgY29udGludWU7XG4gICAgICBub3JtYWxpemVkW25vcm1hbGl6ZXIodSldID0gYXNOdW1iZXIodik7XG4gICAgfVxuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KG9mZnNldCwgZm9ybWF0KSB7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgLyA2MCkpLFxuICAgIG1pbnV0ZXMgPSBNYXRoLnRydW5jKE1hdGguYWJzKG9mZnNldCAlIDYwKSksXG4gICAgc2lnbiA9IG9mZnNldCA+PSAwID8gXCIrXCIgOiBcIi1cIjtcblxuICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIGAke3NpZ259JHtwYWRTdGFydChob3VycywgMil9OiR7cGFkU3RhcnQobWludXRlcywgMil9YDtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gYCR7c2lnbn0ke2hvdXJzfSR7bWludXRlcyA+IDAgPyBgOiR7bWludXRlc31gIDogXCJcIn1gO1xuICAgIGNhc2UgXCJ0ZWNoaWVcIjpcbiAgICAgIHJldHVybiBgJHtzaWdufSR7cGFkU3RhcnQoaG91cnMsIDIpfSR7cGFkU3RhcnQobWludXRlcywgMil9YDtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFZhbHVlIGZvcm1hdCAke2Zvcm1hdH0gaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZU9iamVjdChvYmopIHtcbiAgcmV0dXJuIHBpY2sob2JqLCBbXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0pO1xufVxuIiwgImltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vZm9ybWF0cy5qc1wiO1xuaW1wb3J0IHsgcGljayB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuZnVuY3Rpb24gc3RyaW5naWZ5KG9iaikge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBPYmplY3Qua2V5cyhvYmopLnNvcnQoKSk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgY29uc3QgbW9udGhzTG9uZyA9IFtcbiAgXCJKYW51YXJ5XCIsXG4gIFwiRmVicnVhcnlcIixcbiAgXCJNYXJjaFwiLFxuICBcIkFwcmlsXCIsXG4gIFwiTWF5XCIsXG4gIFwiSnVuZVwiLFxuICBcIkp1bHlcIixcbiAgXCJBdWd1c3RcIixcbiAgXCJTZXB0ZW1iZXJcIixcbiAgXCJPY3RvYmVyXCIsXG4gIFwiTm92ZW1iZXJcIixcbiAgXCJEZWNlbWJlclwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IG1vbnRoc1Nob3J0ID0gW1xuICBcIkphblwiLFxuICBcIkZlYlwiLFxuICBcIk1hclwiLFxuICBcIkFwclwiLFxuICBcIk1heVwiLFxuICBcIkp1blwiLFxuICBcIkp1bFwiLFxuICBcIkF1Z1wiLFxuICBcIlNlcFwiLFxuICBcIk9jdFwiLFxuICBcIk5vdlwiLFxuICBcIkRlY1wiLFxuXTtcblxuZXhwb3J0IGNvbnN0IG1vbnRoc05hcnJvdyA9IFtcIkpcIiwgXCJGXCIsIFwiTVwiLCBcIkFcIiwgXCJNXCIsIFwiSlwiLCBcIkpcIiwgXCJBXCIsIFwiU1wiLCBcIk9cIiwgXCJOXCIsIFwiRFwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1vbnRocyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLm1vbnRoc05hcnJvd107XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gWy4uLm1vbnRoc1Nob3J0XTtcbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFsuLi5tb250aHNMb25nXTtcbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcbiAgICBjYXNlIFwiMi1kaWdpdFwiOlxuICAgICAgcmV0dXJuIFtcIjAxXCIsIFwiMDJcIiwgXCIwM1wiLCBcIjA0XCIsIFwiMDVcIiwgXCIwNlwiLCBcIjA3XCIsIFwiMDhcIiwgXCIwOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHdlZWtkYXlzTG9uZyA9IFtcbiAgXCJNb25kYXlcIixcbiAgXCJUdWVzZGF5XCIsXG4gIFwiV2VkbmVzZGF5XCIsXG4gIFwiVGh1cnNkYXlcIixcbiAgXCJGcmlkYXlcIixcbiAgXCJTYXR1cmRheVwiLFxuICBcIlN1bmRheVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IHdlZWtkYXlzU2hvcnQgPSBbXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIiwgXCJTdW5cIl07XG5cbmV4cG9ydCBjb25zdCB3ZWVrZGF5c05hcnJvdyA9IFtcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiLCBcIlNcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLndlZWtkYXlzTmFycm93XTtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbLi4ud2Vla2RheXNTaG9ydF07XG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbLi4ud2Vla2RheXNMb25nXTtcbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIl07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBtZXJpZGllbXMgPSBbXCJBTVwiLCBcIlBNXCJdO1xuXG5leHBvcnQgY29uc3QgZXJhc0xvbmcgPSBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl07XG5cbmV4cG9ydCBjb25zdCBlcmFzU2hvcnQgPSBbXCJCQ1wiLCBcIkFEXCJdO1xuXG5leHBvcnQgY29uc3QgZXJhc05hcnJvdyA9IFtcIkJcIiwgXCJBXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gZXJhcyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLmVyYXNOYXJyb3ddO1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFsuLi5lcmFzU2hvcnRdO1xuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gWy4uLmVyYXNMb25nXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpIHtcbiAgcmV0dXJuIG1lcmlkaWVtc1tkdC5ob3VyIDwgMTIgPyAwIDogMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gd2Vla2RheXMobGVuZ3RoKVtkdC53ZWVrZGF5IC0gMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIG1vbnRocyhsZW5ndGgpW2R0Lm1vbnRoIC0gMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcmFGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiBlcmFzKGxlbmd0aClbZHQueWVhciA8IDAgPyAwIDogMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIG51bWVyaWMgPSBcImFsd2F5c1wiLCBuYXJyb3cgPSBmYWxzZSkge1xuICBjb25zdCB1bml0cyA9IHtcbiAgICB5ZWFyczogW1wieWVhclwiLCBcInlyLlwiXSxcbiAgICBxdWFydGVyczogW1wicXVhcnRlclwiLCBcInF0ci5cIl0sXG4gICAgbW9udGhzOiBbXCJtb250aFwiLCBcIm1vLlwiXSxcbiAgICB3ZWVrczogW1wid2Vla1wiLCBcIndrLlwiXSxcbiAgICBkYXlzOiBbXCJkYXlcIiwgXCJkYXlcIiwgXCJkYXlzXCJdLFxuICAgIGhvdXJzOiBbXCJob3VyXCIsIFwiaHIuXCJdLFxuICAgIG1pbnV0ZXM6IFtcIm1pbnV0ZVwiLCBcIm1pbi5cIl0sXG4gICAgc2Vjb25kczogW1wic2Vjb25kXCIsIFwic2VjLlwiXSxcbiAgfTtcblxuICBjb25zdCBsYXN0YWJsZSA9IFtcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIl0uaW5kZXhPZih1bml0KSA9PT0gLTE7XG5cbiAgaWYgKG51bWVyaWMgPT09IFwiYXV0b1wiICYmIGxhc3RhYmxlKSB7XG4gICAgY29uc3QgaXNEYXkgPSB1bml0ID09PSBcImRheXNcIjtcbiAgICBzd2l0Y2ggKGNvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9tb3Jyb3dcIiA6IGBuZXh0ICR7dW5pdHNbdW5pdF1bMF19YDtcbiAgICAgIGNhc2UgLTE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwieWVzdGVyZGF5XCIgOiBgbGFzdCAke3VuaXRzW3VuaXRdWzBdfWA7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9kYXlcIiA6IGB0aGlzICR7dW5pdHNbdW5pdF1bMF19YDtcbiAgICAgIGRlZmF1bHQ6IC8vIGZhbGwgdGhyb3VnaFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGlzSW5QYXN0ID0gT2JqZWN0LmlzKGNvdW50LCAtMCkgfHwgY291bnQgPCAwLFxuICAgIGZtdFZhbHVlID0gTWF0aC5hYnMoY291bnQpLFxuICAgIHNpbmd1bGFyID0gZm10VmFsdWUgPT09IDEsXG4gICAgbGlsVW5pdHMgPSB1bml0c1t1bml0XSxcbiAgICBmbXRVbml0ID0gbmFycm93XG4gICAgICA/IHNpbmd1bGFyXG4gICAgICAgID8gbGlsVW5pdHNbMV1cbiAgICAgICAgOiBsaWxVbml0c1syXSB8fCBsaWxVbml0c1sxXVxuICAgICAgOiBzaW5ndWxhclxuICAgICAgPyB1bml0c1t1bml0XVswXVxuICAgICAgOiB1bml0O1xuICByZXR1cm4gaXNJblBhc3QgPyBgJHtmbXRWYWx1ZX0gJHtmbXRVbml0fSBhZ29gIDogYGluICR7Zm10VmFsdWV9ICR7Zm10VW5pdH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U3RyaW5nKGtub3duRm9ybWF0KSB7XG4gIC8vIHRoZXNlIGFsbCBoYXZlIHRoZSBvZmZzZXRzIHJlbW92ZWQgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGVtXG4gIC8vIHdpdGhvdXQgYWxsIHRoZSBpbnRsIHN0dWZmIHRoaXMgaXMgYmFja2ZpbGxpbmdcbiAgY29uc3QgZmlsdGVyZWQgPSBwaWNrKGtub3duRm9ybWF0LCBbXG4gICAgICBcIndlZWtkYXlcIixcbiAgICAgIFwiZXJhXCIsXG4gICAgICBcInllYXJcIixcbiAgICAgIFwibW9udGhcIixcbiAgICAgIFwiZGF5XCIsXG4gICAgICBcImhvdXJcIixcbiAgICAgIFwibWludXRlXCIsXG4gICAgICBcInNlY29uZFwiLFxuICAgICAgXCJ0aW1lWm9uZU5hbWVcIixcbiAgICAgIFwiaG91ckN5Y2xlXCIsXG4gICAgXSksXG4gICAga2V5ID0gc3RyaW5naWZ5KGZpbHRlcmVkKSxcbiAgICBkYXRlVGltZUh1Z2UgPSBcIkVFRUUsIExMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX1NIT1JUKTpcbiAgICAgIHJldHVybiBcIk0vZC95eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX01FRCk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9NRURfV0lUSF9XRUVLREFZKTpcbiAgICAgIHJldHVybiBcIkVFRSwgTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfRlVMTCk6XG4gICAgICByZXR1cm4gXCJMTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfSFVHRSk6XG4gICAgICByZXR1cm4gXCJFRUVFLCBMTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfU0lNUExFKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FX1dJVEhfU0hPUlRfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9XSVRIX0xPTkdfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV8yNF9TSU1QTEUpOlxuICAgICAgcmV0dXJuIFwiSEg6bW1cIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfMjRfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIkhIOm1tOnNzXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcIkhIOm1tXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1dJVEhfTE9OR19PRkZTRVQpOlxuICAgICAgcmV0dXJuIFwiSEg6bW1cIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX1NIT1JUKTpcbiAgICAgIHJldHVybiBcIk0vZC95eXl5LCBoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX01FRCk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9GVUxMKTpcbiAgICAgIHJldHVybiBcIkxMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9IVUdFKTpcbiAgICAgIHJldHVybiBkYXRlVGltZUh1Z2U7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiTS9kL3l5eXksIGg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eSwgaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKTpcbiAgICAgIHJldHVybiBcIkVFRSwgZCBMTEwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJMTExMIGQsIHl5eXksIGg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiRUVFRSwgTExMTCBkLCB5eXl5LCBoOm1tOnNzIGFcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRhdGVUaW1lSHVnZTtcbiAgfVxufVxuIiwgImltcG9ydCAqIGFzIEVuZ2xpc2ggZnJvbSBcIi4vZW5nbGlzaC5qc1wiO1xuaW1wb3J0ICogYXMgRm9ybWF0cyBmcm9tIFwiLi9mb3JtYXRzLmpzXCI7XG5pbXBvcnQgeyBwYWRTdGFydCB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuZnVuY3Rpb24gc3RyaW5naWZ5VG9rZW5zKHNwbGl0cywgdG9rZW5Ub1N0cmluZykge1xuICBsZXQgcyA9IFwiXCI7XG4gIGZvciAoY29uc3QgdG9rZW4gb2Ygc3BsaXRzKSB7XG4gICAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICAgIHMgKz0gdG9rZW4udmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzICs9IHRva2VuVG9TdHJpbmcodG9rZW4udmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cbmNvbnN0IG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMgPSB7XG4gIEQ6IEZvcm1hdHMuREFURV9TSE9SVCxcbiAgREQ6IEZvcm1hdHMuREFURV9NRUQsXG4gIERERDogRm9ybWF0cy5EQVRFX0ZVTEwsXG4gIEREREQ6IEZvcm1hdHMuREFURV9IVUdFLFxuICB0OiBGb3JtYXRzLlRJTUVfU0lNUExFLFxuICB0dDogRm9ybWF0cy5USU1FX1dJVEhfU0VDT05EUyxcbiAgdHR0OiBGb3JtYXRzLlRJTUVfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIHR0dHQ6IEZvcm1hdHMuVElNRV9XSVRIX0xPTkdfT0ZGU0VULFxuICBUOiBGb3JtYXRzLlRJTUVfMjRfU0lNUExFLFxuICBUVDogRm9ybWF0cy5USU1FXzI0X1dJVEhfU0VDT05EUyxcbiAgVFRUOiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIFRUVFQ6IEZvcm1hdHMuVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VULFxuICBmOiBGb3JtYXRzLkRBVEVUSU1FX1NIT1JULFxuICBmZjogRm9ybWF0cy5EQVRFVElNRV9NRUQsXG4gIGZmZjogRm9ybWF0cy5EQVRFVElNRV9GVUxMLFxuICBmZmZmOiBGb3JtYXRzLkRBVEVUSU1FX0hVR0UsXG4gIEY6IEZvcm1hdHMuREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTLFxuICBGRjogRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTLFxuICBGRkY6IEZvcm1hdHMuREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMsXG4gIEZGRkY6IEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMsXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybWF0dGVyIHtcbiAgc3RhdGljIGNyZWF0ZShsb2NhbGUsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgRm9ybWF0dGVyKGxvY2FsZSwgb3B0cyk7XG4gIH1cblxuICBzdGF0aWMgcGFyc2VGb3JtYXQoZm10KSB7XG4gICAgLy8gd2hpdGUtc3BhY2UgaXMgYWx3YXlzIGNvbnNpZGVyZWQgYSBsaXRlcmFsIGluIHVzZXItcHJvdmlkZWQgZm9ybWF0c1xuICAgIC8vIHRoZSBcIiBcIiB0b2tlbiBoYXMgYSBzcGVjaWFsIG1lYW5pbmcgKHNlZSB1bml0Rm9yVG9rZW4pXG5cbiAgICBsZXQgY3VycmVudCA9IG51bGwsXG4gICAgICBjdXJyZW50RnVsbCA9IFwiXCIsXG4gICAgICBicmFja2V0ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBzcGxpdHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZtdC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGZtdC5jaGFyQXQoaSk7XG4gICAgICBpZiAoYyA9PT0gXCInXCIpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGJyYWNrZXRlZCB8fCAvXlxccyskLy50ZXN0KGN1cnJlbnRGdWxsKSwgdmFsOiBjdXJyZW50RnVsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgY3VycmVudEZ1bGwgPSBcIlwiO1xuICAgICAgICBicmFja2V0ZWQgPSAhYnJhY2tldGVkO1xuICAgICAgfSBlbHNlIGlmIChicmFja2V0ZWQpIHtcbiAgICAgICAgY3VycmVudEZ1bGwgKz0gYztcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gY3VycmVudCkge1xuICAgICAgICBjdXJyZW50RnVsbCArPSBjO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IC9eXFxzKyQvLnRlc3QoY3VycmVudEZ1bGwpLCB2YWw6IGN1cnJlbnRGdWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRGdWxsID0gYztcbiAgICAgICAgY3VycmVudCA9IGM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogYnJhY2tldGVkIHx8IC9eXFxzKyQvLnRlc3QoY3VycmVudEZ1bGwpLCB2YWw6IGN1cnJlbnRGdWxsIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdHM7XG4gIH1cblxuICBzdGF0aWMgbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbikge1xuICAgIHJldHVybiBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzW3Rva2VuXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxvY2FsZSwgZm9ybWF0T3B0cykge1xuICAgIHRoaXMub3B0cyA9IGZvcm1hdE9wdHM7XG4gICAgdGhpcy5sb2MgPSBsb2NhbGU7XG4gICAgdGhpcy5zeXN0ZW1Mb2MgPSBudWxsO1xuICB9XG5cbiAgZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZHQsIG9wdHMpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW1Mb2MgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3lzdGVtTG9jID0gdGhpcy5sb2MucmVkZWZhdWx0VG9TeXN0ZW0oKTtcbiAgICB9XG4gICAgY29uc3QgZGYgPSB0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7XG4gICAgcmV0dXJuIGRmLmZvcm1hdCgpO1xuICB9XG5cbiAgZHRGb3JtYXR0ZXIoZHQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7XG4gIH1cblxuICBmb3JtYXREYXRlVGltZShkdCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGR0LCBvcHRzKS5mb3JtYXQoKTtcbiAgfVxuXG4gIGZvcm1hdERhdGVUaW1lUGFydHMoZHQsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihkdCwgb3B0cykuZm9ybWF0VG9QYXJ0cygpO1xuICB9XG5cbiAgZm9ybWF0SW50ZXJ2YWwoaW50ZXJ2YWwsIG9wdHMpIHtcbiAgICBjb25zdCBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoaW50ZXJ2YWwuc3RhcnQsIG9wdHMpO1xuICAgIHJldHVybiBkZi5kdGYuZm9ybWF0UmFuZ2UoaW50ZXJ2YWwuc3RhcnQudG9KU0RhdGUoKSwgaW50ZXJ2YWwuZW5kLnRvSlNEYXRlKCkpO1xuICB9XG5cbiAgcmVzb2x2ZWRPcHRpb25zKGR0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZHQsIG9wdHMpLnJlc29sdmVkT3B0aW9ucygpO1xuICB9XG5cbiAgbnVtKG4sIHAgPSAwKSB7XG4gICAgLy8gd2UgZ2V0IHNvbWUgcGVyZiBvdXQgb2YgZG9pbmcgdGhpcyBoZXJlLCBhbm5veWluZ2x5XG4gICAgaWYgKHRoaXMub3B0cy5mb3JjZVNpbXBsZSkge1xuICAgICAgcmV0dXJuIHBhZFN0YXJ0KG4sIHApO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSB7IC4uLnRoaXMub3B0cyB9O1xuXG4gICAgaWYgKHAgPiAwKSB7XG4gICAgICBvcHRzLnBhZFRvID0gcDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG9wdHMpLmZvcm1hdChuKTtcbiAgfVxuXG4gIGZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhkdCwgZm10KSB7XG4gICAgY29uc3Qga25vd25FbmdsaXNoID0gdGhpcy5sb2MubGlzdGluZ01vZGUoKSA9PT0gXCJlblwiLFxuICAgICAgdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPSB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAmJiB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAhPT0gXCJncmVnb3J5XCIsXG4gICAgICBzdHJpbmcgPSAob3B0cywgZXh0cmFjdCkgPT4gdGhpcy5sb2MuZXh0cmFjdChkdCwgb3B0cywgZXh0cmFjdCksXG4gICAgICBmb3JtYXRPZmZzZXQgPSAob3B0cykgPT4ge1xuICAgICAgICBpZiAoZHQuaXNPZmZzZXRGaXhlZCAmJiBkdC5vZmZzZXQgPT09IDAgJiYgb3B0cy5hbGxvd1opIHtcbiAgICAgICAgICByZXR1cm4gXCJaXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZHQuaXNWYWxpZCA/IGR0LnpvbmUuZm9ybWF0T2Zmc2V0KGR0LnRzLCBvcHRzLmZvcm1hdCkgOiBcIlwiO1xuICAgICAgfSxcbiAgICAgIG1lcmlkaWVtID0gKCkgPT5cbiAgICAgICAga25vd25FbmdsaXNoXG4gICAgICAgICAgPyBFbmdsaXNoLm1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpXG4gICAgICAgICAgOiBzdHJpbmcoeyBob3VyOiBcIm51bWVyaWNcIiwgaG91ckN5Y2xlOiBcImgxMlwiIH0sIFwiZGF5cGVyaW9kXCIpLFxuICAgICAgbW9udGggPSAobGVuZ3RoLCBzdGFuZGFsb25lKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2hcbiAgICAgICAgICA/IEVuZ2xpc2gubW9udGhGb3JEYXRlVGltZShkdCwgbGVuZ3RoKVxuICAgICAgICAgIDogc3RyaW5nKHN0YW5kYWxvbmUgPyB7IG1vbnRoOiBsZW5ndGggfSA6IHsgbW9udGg6IGxlbmd0aCwgZGF5OiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpLFxuICAgICAgd2Vla2RheSA9IChsZW5ndGgsIHN0YW5kYWxvbmUpID0+XG4gICAgICAgIGtub3duRW5nbGlzaFxuICAgICAgICAgID8gRW5nbGlzaC53ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aClcbiAgICAgICAgICA6IHN0cmluZyhcbiAgICAgICAgICAgICAgc3RhbmRhbG9uZSA/IHsgd2Vla2RheTogbGVuZ3RoIH0gOiB7IHdlZWtkYXk6IGxlbmd0aCwgbW9udGg6IFwibG9uZ1wiLCBkYXk6IFwibnVtZXJpY1wiIH0sXG4gICAgICAgICAgICAgIFwid2Vla2RheVwiXG4gICAgICAgICAgICApLFxuICAgICAgbWF5YmVNYWNybyA9ICh0b2tlbikgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4pO1xuICAgICAgICBpZiAoZm9ybWF0T3B0cykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGR0LCBmb3JtYXRPcHRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcmEgPSAobGVuZ3RoKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2ggPyBFbmdsaXNoLmVyYUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIDogc3RyaW5nKHsgZXJhOiBsZW5ndGggfSwgXCJlcmFcIiksXG4gICAgICB0b2tlblRvU3RyaW5nID0gKHRva2VuKSA9PiB7XG4gICAgICAgIC8vIFdoZXJlIHBvc3NpYmxlOiBodHRwczovL2NsZHIudW5pY29kZS5vcmcvdHJhbnNsYXRpb24vZGF0ZS10aW1lL2RhdGUtdGltZS1zeW1ib2xzXG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICAvLyBtc1xuICAgICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWlsbGlzZWNvbmQpO1xuICAgICAgICAgIGNhc2UgXCJ1XCI6XG4gICAgICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgICAgIGNhc2UgXCJTU1NcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taWxsaXNlY29uZCwgMyk7XG4gICAgICAgICAgLy8gc2Vjb25kc1xuICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuc2Vjb25kKTtcbiAgICAgICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5zZWNvbmQsIDIpO1xuICAgICAgICAgIC8vIGZyYWN0aW9uYWwgc2Vjb25kc1xuICAgICAgICAgIGNhc2UgXCJ1dVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMCksIDIpO1xuICAgICAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGR0Lm1pbGxpc2Vjb25kIC8gMTAwKSk7XG4gICAgICAgICAgLy8gbWludXRlc1xuICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWludXRlKTtcbiAgICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taW51dGUsIDIpO1xuICAgICAgICAgIC8vIGhvdXJzXG4gICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5ob3VyICUgMTIgPT09IDAgPyAxMiA6IGR0LmhvdXIgJSAxMik7XG4gICAgICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91cik7XG4gICAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciwgMik7XG4gICAgICAgICAgLy8gb2Zmc2V0XG4gICAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgKzZcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6IFwibmFycm93XCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgKzA2OjAwXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHsgZm9ybWF0OiBcInNob3J0XCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgICAgICAvLyBsaWtlICswNjAwXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHsgZm9ybWF0OiBcInRlY2hpZVwiLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7XG4gICAgICAgICAgY2FzZSBcIlpaWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgRVNUXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogXCJzaG9ydFwiLCBsb2NhbGU6IHRoaXMubG9jLmxvY2FsZSB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpaWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgRWFzdGVybiBTdGFuZGFyZCBUaW1lXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogXCJsb25nXCIsIGxvY2FsZTogdGhpcy5sb2MubG9jYWxlIH0pO1xuICAgICAgICAgIC8vIHpvbmVcbiAgICAgICAgICBjYXNlIFwielwiOlxuICAgICAgICAgICAgLy8gbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZU5hbWU7XG4gICAgICAgICAgLy8gbWVyaWRpZW1zXG4gICAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICAgIHJldHVybiBtZXJpZGllbSgpO1xuICAgICAgICAgIC8vIGRhdGVzXG4gICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7IGRheTogXCJudW1lcmljXCIgfSwgXCJkYXlcIikgOiB0aGlzLm51bShkdC5kYXkpO1xuICAgICAgICAgIGNhc2UgXCJkZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgZGF5OiBcIjItZGlnaXRcIiB9LCBcImRheVwiKSA6IHRoaXMubnVtKGR0LmRheSwgMik7XG4gICAgICAgICAgLy8gd2Vla2RheXMgLSBzdGFuZGFsb25lXG4gICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpO1xuICAgICAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJjY2NjXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5J1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJsb25nXCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVCdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAgIC8vIHdlZWtkYXlzIC0gZm9ybWF0XG4gICAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpO1xuICAgICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVHVlc2RheSdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibG9uZ1wiLCBmYWxzZSk7XG4gICAgICAgICAgY2FzZSBcIkVFRUVFXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUJ1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJuYXJyb3dcIiwgZmFsc2UpO1xuICAgICAgICAgIC8vIG1vbnRocyAtIHN0YW5kYWxvbmVcbiAgICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCJudW1lcmljXCIsIGRheTogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoKTtcbiAgICAgICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDEsIGRvZXNuJ3Qgc2VlbSB0byB3b3JrXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCIyLWRpZ2l0XCIsIGRheTogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoLCAyKTtcbiAgICAgICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEphblxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwic2hvcnRcIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSmFudWFyeVxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibG9uZ1wiLCB0cnVlKTtcbiAgICAgICAgICBjYXNlIFwiTExMTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAgIC8vIG1vbnRocyAtIGZvcm1hdFxuICAgICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IG1vbnRoOiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQubW9udGgpO1xuICAgICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6IFwiMi1kaWdpdFwiIH0sIFwibW9udGhcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7XG4gICAgICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW5cbiAgICAgICAgICAgIHJldHVybiBtb250aChcInNob3J0XCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiTU1NTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW51YXJ5XG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJsb25nXCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiTU1NTU1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIGZhbHNlKTtcbiAgICAgICAgICAvLyB5ZWFyc1xuICAgICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgICAvLyBsaWtlIDIwMTRcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7IHllYXI6IFwibnVtZXJpY1wiIH0sIFwieWVhclwiKSA6IHRoaXMubnVtKGR0LnllYXIpO1xuICAgICAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxNFxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogXCIyLWRpZ2l0XCIgfSwgXCJ5ZWFyXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG4gICAgICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDAxMlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogXCJudW1lcmljXCIgfSwgXCJ5ZWFyXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhciwgNCk7XG4gICAgICAgICAgY2FzZSBcInl5eXl5eVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMDAwMTJcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IHllYXI6IFwibnVtZXJpY1wiIH0sIFwieWVhclwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0LnllYXIsIDYpO1xuICAgICAgICAgIC8vIGVyYXNcbiAgICAgICAgICBjYXNlIFwiR1wiOlxuICAgICAgICAgICAgLy8gbGlrZSBBRFxuICAgICAgICAgICAgcmV0dXJuIGVyYShcInNob3J0XCIpO1xuICAgICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgICAgLy8gbGlrZSBBbm5vIERvbWluaVxuICAgICAgICAgICAgcmV0dXJuIGVyYShcImxvbmdcIik7XG4gICAgICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgICAgICByZXR1cm4gZXJhKFwibmFycm93XCIpO1xuICAgICAgICAgIGNhc2UgXCJra1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcbiAgICAgICAgICBjYXNlIFwia2tra1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtZZWFyLCA0KTtcbiAgICAgICAgICBjYXNlIFwiV1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtOdW1iZXIpO1xuICAgICAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtOdW1iZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJuXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrTnVtYmVyKTtcbiAgICAgICAgICBjYXNlIFwibm5cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5sb2NhbFdlZWtOdW1iZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJpaVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmxvY2FsV2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuICAgICAgICAgIGNhc2UgXCJpaWlpXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrWWVhciwgNCk7XG4gICAgICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5vcmRpbmFsKTtcbiAgICAgICAgICBjYXNlIFwib29vXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQub3JkaW5hbCwgMyk7XG4gICAgICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIpO1xuICAgICAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC50cyAvIDEwMDApKTtcbiAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnRzKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG1heWJlTWFjcm8odG9rZW4pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgdG9rZW5Ub1N0cmluZyk7XG4gIH1cblxuICBmb3JtYXREdXJhdGlvbkZyb21TdHJpbmcoZHVyLCBmbXQpIHtcbiAgICBjb25zdCB0b2tlblRvRmllbGQgPSAodG9rZW4pID0+IHtcbiAgICAgICAgc3dpdGNoICh0b2tlblswXSkge1xuICAgICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcbiAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG4gICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgIHJldHVybiBcImhvdXJcIjtcbiAgICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZGF5XCI7XG4gICAgICAgICAgY2FzZSBcIndcIjpcbiAgICAgICAgICAgIHJldHVybiBcIndlZWtcIjtcbiAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibW9udGhcIjtcbiAgICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwieWVhclwiO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRva2VuVG9TdHJpbmcgPSAobGlsZHVyKSA9PiAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3QgbWFwcGVkID0gdG9rZW5Ub0ZpZWxkKHRva2VuKTtcbiAgICAgICAgaWYgKG1hcHBlZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm51bShsaWxkdXIuZ2V0KG1hcHBlZCksIHRva2VuLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdG9rZW5zID0gRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksXG4gICAgICByZWFsVG9rZW5zID0gdG9rZW5zLnJlZHVjZShcbiAgICAgICAgKGZvdW5kLCB7IGxpdGVyYWwsIHZhbCB9KSA9PiAobGl0ZXJhbCA/IGZvdW5kIDogZm91bmQuY29uY2F0KHZhbCkpLFxuICAgICAgICBbXVxuICAgICAgKSxcbiAgICAgIGNvbGxhcHNlZCA9IGR1ci5zaGlmdFRvKC4uLnJlYWxUb2tlbnMubWFwKHRva2VuVG9GaWVsZCkuZmlsdGVyKCh0KSA9PiB0KSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2Vucyh0b2tlbnMsIHRva2VuVG9TdHJpbmcoY29sbGFwc2VkKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICB1bnRydW5jYXRlWWVhcixcbiAgc2lnbmVkT2Zmc2V0LFxuICBwYXJzZUludGVnZXIsXG4gIHBhcnNlTWlsbGlzLFxuICBpc1VuZGVmaW5lZCxcbiAgcGFyc2VGbG9hdGluZyxcbn0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0ICogYXMgRW5nbGlzaCBmcm9tIFwiLi9lbmdsaXNoLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcblxuLypcbiAqIFRoaXMgZmlsZSBoYW5kbGVzIHBhcnNpbmcgZm9yIHdlbGwtc3BlY2lmaWVkIGZvcm1hdHMuIEhlcmUncyBob3cgaXQgd29ya3M6XG4gKiBUd28gdGhpbmdzIGdvIGludG8gcGFyc2luZzogYSByZWdleCB0byBtYXRjaCB3aXRoIGFuZCBhbiBleHRyYWN0b3IgdG8gdGFrZSBhcGFydCB0aGUgZ3JvdXBzIGluIHRoZSBtYXRjaC5cbiAqIEFuIGV4dHJhY3RvciBpcyBqdXN0IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHJlZ2V4IG1hdGNoIGFycmF5IGFuZCByZXR1cm5zIGEgeyB5ZWFyOiAuLi4sIG1vbnRoOiAuLi4gfSBvYmplY3RcbiAqIHBhcnNlKCkgZG9lcyB0aGUgd29yayBvZiBleGVjdXRpbmcgdGhlIHJlZ2V4IGFuZCBhcHBseWluZyB0aGUgZXh0cmFjdG9yLiBJdCB0YWtlcyBtdWx0aXBsZSByZWdleC9leHRyYWN0b3IgcGFpcnMgdG8gdHJ5IGluIHNlcXVlbmNlLlxuICogRXh0cmFjdG9ycyBjYW4gdGFrZSBhIFwiY3Vyc29yXCIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgaW4gdGhlIG1hdGNoIHRvIGxvb2sgYXQuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBjb21iaW5lIGV4dHJhY3RvcnMuXG4gKiBjb21iaW5lRXh0cmFjdG9ycygpIGRvZXMgdGhlIHdvcmsgb2YgY29tYmluaW5nIHRoZW0sIGtlZXBpbmcgdHJhY2sgb2YgdGhlIGN1cnNvciB0aHJvdWdoIG11bHRpcGxlIGV4dHJhY3Rpb25zLlxuICogU29tZSBleHRyYWN0aW9ucyBhcmUgc3VwZXIgZHVtYiBhbmQgc2ltcGxlUGFyc2UgYW5kIGZyb21TdHJpbmdzIGhlbHAgRFJZIHRoZW0uXG4gKi9cblxuY29uc3QgaWFuYVJlZ2V4ID0gL1tBLVphLXpfKy1dezEsMjU2fSg/Ojo/XFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KD86XFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87XG5cbmZ1bmN0aW9uIGNvbWJpbmVSZWdleGVzKC4uLnJlZ2V4ZXMpIHtcbiAgY29uc3QgZnVsbCA9IHJlZ2V4ZXMucmVkdWNlKChmLCByKSA9PiBmICsgci5zb3VyY2UsIFwiXCIpO1xuICByZXR1cm4gUmVnRXhwKGBeJHtmdWxsfSRgKTtcbn1cblxuZnVuY3Rpb24gY29tYmluZUV4dHJhY3RvcnMoLi4uZXh0cmFjdG9ycykge1xuICByZXR1cm4gKG0pID0+XG4gICAgZXh0cmFjdG9yc1xuICAgICAgLnJlZHVjZShcbiAgICAgICAgKFttZXJnZWRWYWxzLCBtZXJnZWRab25lLCBjdXJzb3JdLCBleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IFt2YWwsIHpvbmUsIG5leHRdID0gZXgobSwgY3Vyc29yKTtcbiAgICAgICAgICByZXR1cm4gW3sgLi4ubWVyZ2VkVmFscywgLi4udmFsIH0sIHpvbmUgfHwgbWVyZ2VkWm9uZSwgbmV4dF07XG4gICAgICAgIH0sXG4gICAgICAgIFt7fSwgbnVsbCwgMV1cbiAgICAgIClcbiAgICAgIC5zbGljZSgwLCAyKTtcbn1cblxuZnVuY3Rpb24gcGFyc2UocywgLi4ucGF0dGVybnMpIHtcbiAgaWYgKHMgPT0gbnVsbCkge1xuICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gIH1cblxuICBmb3IgKGNvbnN0IFtyZWdleCwgZXh0cmFjdG9yXSBvZiBwYXR0ZXJucykge1xuICAgIGNvbnN0IG0gPSByZWdleC5leGVjKHMpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gZXh0cmFjdG9yKG0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW251bGwsIG51bGxdO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVQYXJzZSguLi5rZXlzKSB7XG4gIHJldHVybiAobWF0Y2gsIGN1cnNvcikgPT4ge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGxldCBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldFtrZXlzW2ldXSA9IHBhcnNlSW50ZWdlcihtYXRjaFtjdXJzb3IgKyBpXSk7XG4gICAgfVxuICAgIHJldHVybiBbcmV0LCBudWxsLCBjdXJzb3IgKyBpXTtcbiAgfTtcbn1cblxuLy8gSVNPIGFuZCBTUUwgcGFyc2luZ1xuY29uc3Qgb2Zmc2V0UmVnZXggPSAvKD86KFopfChbKy1dXFxkXFxkKSg/Ojo/KFxcZFxcZCkpPykvO1xuY29uc3QgaXNvRXh0ZW5kZWRab25lID0gYCg/OiR7b2Zmc2V0UmVnZXguc291cmNlfT8oPzpcXFxcWygke2lhbmFSZWdleC5zb3VyY2V9KVxcXFxdKT8pP2A7XG5jb25zdCBpc29UaW1lQmFzZVJlZ2V4ID0gLyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpbLixdKFxcZHsxLDMwfSkpPyk/KT8vO1xuY29uc3QgaXNvVGltZVJlZ2V4ID0gUmVnRXhwKGAke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSR7aXNvRXh0ZW5kZWRab25lfWApO1xuY29uc3QgaXNvVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzpUJHtpc29UaW1lUmVnZXguc291cmNlfSk/YCk7XG5jb25zdCBpc29ZbWRSZWdleCA9IC8oWystXVxcZHs2fXxcXGR7NH0pKD86LT8oXFxkXFxkKSg/Oi0/KFxcZFxcZCkpPyk/LztcbmNvbnN0IGlzb1dlZWtSZWdleCA9IC8oXFxkezR9KS0/VyhcXGRcXGQpKD86LT8oXFxkKSk/LztcbmNvbnN0IGlzb09yZGluYWxSZWdleCA9IC8oXFxkezR9KS0/KFxcZHszfSkvO1xuY29uc3QgZXh0cmFjdElTT1dlZWtEYXRhID0gc2ltcGxlUGFyc2UoXCJ3ZWVrWWVhclwiLCBcIndlZWtOdW1iZXJcIiwgXCJ3ZWVrRGF5XCIpO1xuY29uc3QgZXh0cmFjdElTT09yZGluYWxEYXRhID0gc2ltcGxlUGFyc2UoXCJ5ZWFyXCIsIFwib3JkaW5hbFwiKTtcbmNvbnN0IHNxbFltZFJlZ2V4ID0gLyhcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpLzsgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZVxuY29uc3Qgc3FsVGltZVJlZ2V4ID0gUmVnRXhwKFxuICBgJHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0gPyg/OiR7b2Zmc2V0UmVnZXguc291cmNlfXwoJHtpYW5hUmVnZXguc291cmNlfSkpP2Bcbik7XG5jb25zdCBzcWxUaW1lRXh0ZW5zaW9uUmVnZXggPSBSZWdFeHAoYCg/OiAke3NxbFRpbWVSZWdleC5zb3VyY2V9KT9gKTtcblxuZnVuY3Rpb24gaW50KG1hdGNoLCBwb3MsIGZhbGxiYWNrKSB7XG4gIGNvbnN0IG0gPSBtYXRjaFtwb3NdO1xuICByZXR1cm4gaXNVbmRlZmluZWQobSkgPyBmYWxsYmFjayA6IHBhcnNlSW50ZWdlcihtKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGl0ZW0gPSB7XG4gICAgeWVhcjogaW50KG1hdGNoLCBjdXJzb3IpLFxuICAgIG1vbnRoOiBpbnQobWF0Y2gsIGN1cnNvciArIDEsIDEpLFxuICAgIGRheTogaW50KG1hdGNoLCBjdXJzb3IgKyAyLCAxKSxcbiAgfTtcblxuICByZXR1cm4gW2l0ZW0sIG51bGwsIGN1cnNvciArIDNdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPVGltZShtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGl0ZW0gPSB7XG4gICAgaG91cnM6IGludChtYXRjaCwgY3Vyc29yLCAwKSxcbiAgICBtaW51dGVzOiBpbnQobWF0Y2gsIGN1cnNvciArIDEsIDApLFxuICAgIHNlY29uZHM6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMCksXG4gICAgbWlsbGlzZWNvbmRzOiBwYXJzZU1pbGxpcyhtYXRjaFtjdXJzb3IgKyAzXSksXG4gIH07XG5cbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyA0XTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT09mZnNldChtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGxvY2FsID0gIW1hdGNoW2N1cnNvcl0gJiYgIW1hdGNoW2N1cnNvciArIDFdLFxuICAgIGZ1bGxPZmZzZXQgPSBzaWduZWRPZmZzZXQobWF0Y2hbY3Vyc29yICsgMV0sIG1hdGNoW2N1cnNvciArIDJdKSxcbiAgICB6b25lID0gbG9jYWwgPyBudWxsIDogRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGZ1bGxPZmZzZXQpO1xuICByZXR1cm4gW3t9LCB6b25lLCBjdXJzb3IgKyAzXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElBTkFab25lKG1hdGNoLCBjdXJzb3IpIHtcbiAgY29uc3Qgem9uZSA9IG1hdGNoW2N1cnNvcl0gPyBJQU5BWm9uZS5jcmVhdGUobWF0Y2hbY3Vyc29yXSkgOiBudWxsO1xuICByZXR1cm4gW3t9LCB6b25lLCBjdXJzb3IgKyAxXTtcbn1cblxuLy8gSVNPIHRpbWUgcGFyc2luZ1xuXG5jb25zdCBpc29UaW1lT25seSA9IFJlZ0V4cChgXlQ/JHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0kYCk7XG5cbi8vIElTTyBkdXJhdGlvbiBwYXJzaW5nXG5cbmNvbnN0IGlzb0R1cmF0aW9uID1cbiAgL14tP1AoPzooPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylZKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylNKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylXKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylEKT8oPzpUKD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pSCk/KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pTSk/KD86KC0/XFxkezEsMjB9KSg/OlsuLF0oLT9cXGR7MSwyMH0pKT9TKT8pPykkLztcblxuZnVuY3Rpb24gZXh0cmFjdElTT0R1cmF0aW9uKG1hdGNoKSB7XG4gIGNvbnN0IFtzLCB5ZWFyU3RyLCBtb250aFN0ciwgd2Vla1N0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0ciwgbWlsbGlzZWNvbmRzU3RyXSA9XG4gICAgbWF0Y2g7XG5cbiAgY29uc3QgaGFzTmVnYXRpdmVQcmVmaXggPSBzWzBdID09PSBcIi1cIjtcbiAgY29uc3QgbmVnYXRpdmVTZWNvbmRzID0gc2Vjb25kU3RyICYmIHNlY29uZFN0clswXSA9PT0gXCItXCI7XG5cbiAgY29uc3QgbWF5YmVOZWdhdGUgPSAobnVtLCBmb3JjZSA9IGZhbHNlKSA9PlxuICAgIG51bSAhPT0gdW5kZWZpbmVkICYmIChmb3JjZSB8fCAobnVtICYmIGhhc05lZ2F0aXZlUHJlZml4KSkgPyAtbnVtIDogbnVtO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeWVhcnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoeWVhclN0cikpLFxuICAgICAgbW9udGhzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1vbnRoU3RyKSksXG4gICAgICB3ZWVrczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh3ZWVrU3RyKSksXG4gICAgICBkYXlzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKGRheVN0cikpLFxuICAgICAgaG91cnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoaG91clN0cikpLFxuICAgICAgbWludXRlczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtaW51dGVTdHIpKSxcbiAgICAgIHNlY29uZHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoc2Vjb25kU3RyKSwgc2Vjb25kU3RyID09PSBcIi0wXCIpLFxuICAgICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpLFxuICAgIH0sXG4gIF07XG59XG5cbi8vIFRoZXNlIGFyZSBhIGxpdHRsZSBicmFpbmRlYWQuIEVEVCAqc2hvdWxkKiB0ZWxsIHVzIHRoYXQgd2UncmUgaW4sIHNheSwgQW1lcmljYS9OZXdfWW9ya1xuLy8gYW5kIG5vdCBqdXN0IHRoYXQgd2UncmUgaW4gLTI0MCAqcmlnaHQgbm93Ki4gQnV0IHNpbmNlIEkgZG9uJ3QgdGhpbmsgdGhlc2UgYXJlIHVzZWQgdGhhdCBvZnRlblxuLy8gSSdtIGp1c3QgZ29pbmcgdG8gaWdub3JlIHRoYXRcbmNvbnN0IG9ic09mZnNldHMgPSB7XG4gIEdNVDogMCxcbiAgRURUOiAtNCAqIDYwLFxuICBFU1Q6IC01ICogNjAsXG4gIENEVDogLTUgKiA2MCxcbiAgQ1NUOiAtNiAqIDYwLFxuICBNRFQ6IC02ICogNjAsXG4gIE1TVDogLTcgKiA2MCxcbiAgUERUOiAtNyAqIDYwLFxuICBQU1Q6IC04ICogNjAsXG59O1xuXG5mdW5jdGlvbiBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cikge1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLFxuICAgIG1vbnRoOiBFbmdsaXNoLm1vbnRoc1Nob3J0LmluZGV4T2YobW9udGhTdHIpICsgMSxcbiAgICBkYXk6IHBhcnNlSW50ZWdlcihkYXlTdHIpLFxuICAgIGhvdXI6IHBhcnNlSW50ZWdlcihob3VyU3RyKSxcbiAgICBtaW51dGU6IHBhcnNlSW50ZWdlcihtaW51dGVTdHIpLFxuICB9O1xuXG4gIGlmIChzZWNvbmRTdHIpIHJlc3VsdC5zZWNvbmQgPSBwYXJzZUludGVnZXIoc2Vjb25kU3RyKTtcbiAgaWYgKHdlZWtkYXlTdHIpIHtcbiAgICByZXN1bHQud2Vla2RheSA9XG4gICAgICB3ZWVrZGF5U3RyLmxlbmd0aCA+IDNcbiAgICAgICAgPyBFbmdsaXNoLndlZWtkYXlzTG9uZy5pbmRleE9mKHdlZWtkYXlTdHIpICsgMVxuICAgICAgICA6IEVuZ2xpc2gud2Vla2RheXNTaG9ydC5pbmRleE9mKHdlZWtkYXlTdHIpICsgMTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIFJGQyAyODIyLzUzMjJcbmNvbnN0IHJmYzI4MjIgPVxuICAvXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxccyk/KFxcZHsxLDJ9KVxccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoXFxkezIsNH0pXFxzKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpP1xccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoPzooWystXVxcZFxcZCkoXFxkXFxkKSkpJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7XG4gIGNvbnN0IFtcbiAgICAgICxcbiAgICAgIHdlZWtkYXlTdHIsXG4gICAgICBkYXlTdHIsXG4gICAgICBtb250aFN0cixcbiAgICAgIHllYXJTdHIsXG4gICAgICBob3VyU3RyLFxuICAgICAgbWludXRlU3RyLFxuICAgICAgc2Vjb25kU3RyLFxuICAgICAgb2JzT2Zmc2V0LFxuICAgICAgbWlsT2Zmc2V0LFxuICAgICAgb2ZmSG91clN0cixcbiAgICAgIG9mZk1pbnV0ZVN0cixcbiAgICBdID0gbWF0Y2gsXG4gICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuXG4gIGxldCBvZmZzZXQ7XG4gIGlmIChvYnNPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSBvYnNPZmZzZXRzW29ic09mZnNldF07XG4gIH0gZWxzZSBpZiAobWlsT2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBvZmZzZXQgPSBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKTtcbiAgfVxuXG4gIHJldHVybiBbcmVzdWx0LCBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCldO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzUkZDMjgyMihzKSB7XG4gIC8vIFJlbW92ZSBjb21tZW50cyBhbmQgZm9sZGluZyB3aGl0ZXNwYWNlIGFuZCByZXBsYWNlIG11bHRpcGxlLXNwYWNlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG4gIHJldHVybiBzXG4gICAgLnJlcGxhY2UoL1xcKFteKCldKlxcKXxbXFxuXFx0XS9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvKFxcc1xccyspL2csIFwiIFwiKVxuICAgIC50cmltKCk7XG59XG5cbi8vIGh0dHAgZGF0ZVxuXG5jb25zdCByZmMxMTIzID1cbiAgICAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXFxkXFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcXGR7NH0pIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIEdNVCQvLFxuICByZmM4NTAgPVxuICAgIC9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxcZFxcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSBHTVQkLyxcbiAgYXNjaWkgPVxuICAgIC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxcZHxcXGRcXGQpIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIChcXGR7NH0pJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHtcbiAgY29uc3QgWywgd2Vla2RheVN0ciwgZGF5U3RyLCBtb250aFN0ciwgeWVhclN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHJdID0gbWF0Y2gsXG4gICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFTQ0lJKG1hdGNoKSB7XG4gIGNvbnN0IFssIHdlZWtkYXlTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyLCB5ZWFyU3RyXSA9IG1hdGNoLFxuICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTtcbiAgcmV0dXJuIFtyZXN1bHQsIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZV07XG59XG5cbmNvbnN0IGlzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29ZbWRSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xuY29uc3QgaXNvT3JkaW5hbFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29PcmRpbmFsUmVnZXgsIGlzb1RpbWVFeHRlbnNpb25SZWdleCk7XG5jb25zdCBpc29UaW1lQ29tYmluZWRSZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1RpbWVSZWdleCk7XG5cbmNvbnN0IGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09ZbWQsXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5jb25zdCBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT1dlZWtEYXRhLFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuY29uc3QgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZSA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPT3JkaW5hbERhdGEsXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5jb25zdCBleHRyYWN0SVNPVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuXG4vKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU09EYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKFxuICAgIHMsXG4gICAgW2lzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSxcbiAgICBbaXNvV2Vla1dpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldF0sXG4gICAgW2lzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lXSxcbiAgICBbaXNvVGltZUNvbWJpbmVkUmVnZXgsIGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0XVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSRkMyODIyRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShwcmVwcm9jZXNzUkZDMjgyMihzKSwgW3JmYzI4MjIsIGV4dHJhY3RSRkMyODIyXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUhUVFBEYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKFxuICAgIHMsXG4gICAgW3JmYzExMjMsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLFxuICAgIFtyZmM4NTAsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLFxuICAgIFthc2NpaSwgZXh0cmFjdEFTQ0lJXVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pO1xufVxuXG5jb25zdCBleHRyYWN0SVNPVGltZU9ubHkgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUlTT1RpbWVPbmx5KHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtpc29UaW1lT25seSwgZXh0cmFjdElTT1RpbWVPbmx5XSk7XG59XG5cbmNvbnN0IHNxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxZbWRSZWdleCwgc3FsVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IHNxbFRpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsVGltZVJlZ2V4KTtcblxuY29uc3QgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZSA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTUUwocykge1xuICByZXR1cm4gcGFyc2UoXG4gICAgcyxcbiAgICBbc3FsWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXRdLFxuICAgIFtzcWxUaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZV1cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBJbnZhbGlkQXJndW1lbnRFcnJvciwgSW52YWxpZER1cmF0aW9uRXJyb3IsIEludmFsaWRVbml0RXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vaW1wbC9mb3JtYXR0ZXIuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ltcGwvaW52YWxpZC5qc1wiO1xuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9pbXBsL2xvY2FsZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VJU09EdXJhdGlvbiwgcGFyc2VJU09UaW1lT25seSB9IGZyb20gXCIuL2ltcGwvcmVnZXhQYXJzZXIuanNcIjtcbmltcG9ydCB7XG4gIGFzTnVtYmVyLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaXNOdW1iZXIsXG4gIGlzVW5kZWZpbmVkLFxuICBub3JtYWxpemVPYmplY3QsXG4gIHJvdW5kVG8sXG59IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4vZGF0ZXRpbWUuanNcIjtcblxuY29uc3QgSU5WQUxJRCA9IFwiSW52YWxpZCBEdXJhdGlvblwiO1xuXG4vLyB1bml0IGNvbnZlcnNpb24gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgbG93T3JkZXJNYXRyaXggPSB7XG4gICAgd2Vla3M6IHtcbiAgICAgIGRheXM6IDcsXG4gICAgICBob3VyczogNyAqIDI0LFxuICAgICAgbWludXRlczogNyAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIGRheXM6IHtcbiAgICAgIGhvdXJzOiAyNCxcbiAgICAgIG1pbnV0ZXM6IDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBob3VyczogeyBtaW51dGVzOiA2MCwgc2Vjb25kczogNjAgKiA2MCwgbWlsbGlzZWNvbmRzOiA2MCAqIDYwICogMTAwMCB9LFxuICAgIG1pbnV0ZXM6IHsgc2Vjb25kczogNjAsIG1pbGxpc2Vjb25kczogNjAgKiAxMDAwIH0sXG4gICAgc2Vjb25kczogeyBtaWxsaXNlY29uZHM6IDEwMDAgfSxcbiAgfSxcbiAgY2FzdWFsTWF0cml4ID0ge1xuICAgIHllYXJzOiB7XG4gICAgICBxdWFydGVyczogNCxcbiAgICAgIG1vbnRoczogMTIsXG4gICAgICB3ZWVrczogNTIsXG4gICAgICBkYXlzOiAzNjUsXG4gICAgICBob3VyczogMzY1ICogMjQsXG4gICAgICBtaW51dGVzOiAzNjUgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgcXVhcnRlcnM6IHtcbiAgICAgIG1vbnRoczogMyxcbiAgICAgIHdlZWtzOiAxMyxcbiAgICAgIGRheXM6IDkxLFxuICAgICAgaG91cnM6IDkxICogMjQsXG4gICAgICBtaW51dGVzOiA5MSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogOTEgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgbW9udGhzOiB7XG4gICAgICB3ZWVrczogNCxcbiAgICAgIGRheXM6IDMwLFxuICAgICAgaG91cnM6IDMwICogMjQsXG4gICAgICBtaW51dGVzOiAzMCAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG5cbiAgICAuLi5sb3dPcmRlck1hdHJpeCxcbiAgfSxcbiAgZGF5c0luWWVhckFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0MDAsXG4gIGRheXNJbk1vbnRoQWNjdXJhdGUgPSAxNDYwOTcuMCAvIDQ4MDAsXG4gIGFjY3VyYXRlTWF0cml4ID0ge1xuICAgIHllYXJzOiB7XG4gICAgICBxdWFydGVyczogNCxcbiAgICAgIG1vbnRoczogMTIsXG4gICAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNyxcbiAgICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSxcbiAgICAgIGhvdXJzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBxdWFydGVyczoge1xuICAgICAgbW9udGhzOiAzLFxuICAgICAgd2Vla3M6IGRheXNJblllYXJBY2N1cmF0ZSAvIDI4LFxuICAgICAgZGF5czogZGF5c0luWWVhckFjY3VyYXRlIC8gNCxcbiAgICAgIGhvdXJzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQpIC8gNCxcbiAgICAgIG1pbnV0ZXM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwKSAvIDQsXG4gICAgICBzZWNvbmRzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwKSAvIDQsXG4gICAgICBtaWxsaXNlY29uZHM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvIDQsXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgIHdlZWtzOiBkYXlzSW5Nb250aEFjY3VyYXRlIC8gNyxcbiAgICAgIGRheXM6IGRheXNJbk1vbnRoQWNjdXJhdGUsXG4gICAgICBob3VyczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0LFxuICAgICAgbWludXRlczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIC4uLmxvd09yZGVyTWF0cml4LFxuICB9O1xuXG4vLyB1bml0cyBvcmRlcmVkIGJ5IHNpemVcbmNvbnN0IG9yZGVyZWRVbml0cyA9IFtcbiAgXCJ5ZWFyc1wiLFxuICBcInF1YXJ0ZXJzXCIsXG4gIFwibW9udGhzXCIsXG4gIFwid2Vla3NcIixcbiAgXCJkYXlzXCIsXG4gIFwiaG91cnNcIixcbiAgXCJtaW51dGVzXCIsXG4gIFwic2Vjb25kc1wiLFxuICBcIm1pbGxpc2Vjb25kc1wiLFxuXTtcblxuY29uc3QgcmV2ZXJzZVVuaXRzID0gb3JkZXJlZFVuaXRzLnNsaWNlKDApLnJldmVyc2UoKTtcblxuLy8gY2xvbmUgcmVhbGx5IG1lYW5zIFwiY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UganVzdCBsaWtlIHRoaXMgb25lLCBidXQgd2l0aCB0aGVzZSBjaGFuZ2VzXCJcbmZ1bmN0aW9uIGNsb25lKGR1ciwgYWx0cywgY2xlYXIgPSBmYWxzZSkge1xuICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzXG4gIGNvbnN0IGNvbmYgPSB7XG4gICAgdmFsdWVzOiBjbGVhciA/IGFsdHMudmFsdWVzIDogeyAuLi5kdXIudmFsdWVzLCAuLi4oYWx0cy52YWx1ZXMgfHwge30pIH0sXG4gICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSxcbiAgICBjb252ZXJzaW9uQWNjdXJhY3k6IGFsdHMuY29udmVyc2lvbkFjY3VyYWN5IHx8IGR1ci5jb252ZXJzaW9uQWNjdXJhY3ksXG4gICAgbWF0cml4OiBhbHRzLm1hdHJpeCB8fCBkdXIubWF0cml4LFxuICB9O1xuICByZXR1cm4gbmV3IER1cmF0aW9uKGNvbmYpO1xufVxuXG5mdW5jdGlvbiBkdXJhdGlvblRvTWlsbGlzKG1hdHJpeCwgdmFscykge1xuICBsZXQgc3VtID0gdmFscy5taWxsaXNlY29uZHMgPz8gMDtcbiAgZm9yIChjb25zdCB1bml0IG9mIHJldmVyc2VVbml0cy5zbGljZSgxKSkge1xuICAgIGlmICh2YWxzW3VuaXRdKSB7XG4gICAgICBzdW0gKz0gdmFsc1t1bml0XSAqIG1hdHJpeFt1bml0XVtcIm1pbGxpc2Vjb25kc1wiXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN1bTtcbn1cblxuLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVyc1xuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWVzKG1hdHJpeCwgdmFscykge1xuICAvLyB0aGUgbG9naWMgYmVsb3cgYXNzdW1lcyB0aGUgb3ZlcmFsbCB2YWx1ZSBvZiB0aGUgZHVyYXRpb24gaXMgcG9zaXRpdmVcbiAgLy8gaWYgdGhpcyBpcyBub3QgdGhlIGNhc2UsIGZhY3RvciBpcyB1c2VkIHRvIG1ha2UgaXQgc29cbiAgY29uc3QgZmFjdG9yID0gZHVyYXRpb25Ub01pbGxpcyhtYXRyaXgsIHZhbHMpIDwgMCA/IC0xIDogMTtcblxuICBvcmRlcmVkVW5pdHMucmVkdWNlUmlnaHQoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh2YWxzW2N1cnJlbnRdKSkge1xuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmFsID0gdmFsc1twcmV2aW91c10gKiBmYWN0b3I7XG4gICAgICAgIGNvbnN0IGNvbnYgPSBtYXRyaXhbY3VycmVudF1bcHJldmlvdXNdO1xuXG4gICAgICAgIC8vIGlmIChwcmV2aW91c1ZhbCA8IDApOlxuICAgICAgICAvLyBsb3dlciBvcmRlciB1bml0IGlzIG5lZ2F0aXZlIChlLmcuIHsgeWVhcnM6IDIsIGRheXM6IC0yIH0pXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0aGlzIGJ5IHJlZHVjaW5nIHRoZSBoaWdoZXIgb3JkZXIgdW5pdCBieSB0aGUgYXBwcm9wcmlhdGUgYW1vdW50XG4gICAgICAgIC8vIGFuZCBpbmNyZWFzaW5nIHRoZSBsb3dlciBvcmRlciB1bml0XG4gICAgICAgIC8vIHRoaXMgY2FuIG5ldmVyIG1ha2UgdGhlIGhpZ2hlciBvcmRlciB1bml0IG5lZ2F0aXZlLCBiZWNhdXNlIHRoaXMgZnVuY3Rpb24gb25seSBvcGVyYXRlc1xuICAgICAgICAvLyBvbiBwb3NpdGl2ZSBkdXJhdGlvbnMsIHNvIHRoZSBhbW91bnQgb2YgdGltZSByZXByZXNlbnRlZCBieSB0aGUgbG93ZXIgb3JkZXIgdW5pdCBjYW5ub3RcbiAgICAgICAgLy8gYmUgbGFyZ2VyIHRoYW4gdGhlIGhpZ2hlciBvcmRlciB1bml0XG4gICAgICAgIC8vIGVsc2U6XG4gICAgICAgIC8vIGxvd2VyIG9yZGVyIHVuaXQgaXMgcG9zaXRpdmUgKGUuZy4geyB5ZWFyczogMiwgZGF5czogNDUwIH0gb3IgeyB5ZWFyczogLTIsIGRheXM6IDQ1MCB9KVxuICAgICAgICAvLyBpbiB0aGlzIGNhc2Ugd2UgYXR0ZW1wdCB0byBjb252ZXJ0IGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgbG93ZXIgb3JkZXIgdW5pdCBpbnRvXG4gICAgICAgIC8vIHRoZSBoaWdoZXIgb3JkZXIgb25lXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE1hdGguZmxvb3IgdGFrZXMgY2FyZSBvZiBib3RoIG9mIHRoZXNlIGNhc2VzLCByb3VuZGluZyBhd2F5IGZyb20gMFxuICAgICAgICAvLyBpZiBwcmV2aW91c1ZhbCA8IDAgaXQgbWFrZXMgdGhlIGFic29sdXRlIHZhbHVlIGxhcmdlclxuICAgICAgICAvLyBpZiBwcmV2aW91c1ZhbCA+PSBpdCBtYWtlcyB0aGUgYWJzb2x1dGUgdmFsdWUgc21hbGxlclxuICAgICAgICBjb25zdCByb2xsVXAgPSBNYXRoLmZsb29yKHByZXZpb3VzVmFsIC8gY29udik7XG4gICAgICAgIHZhbHNbY3VycmVudF0gKz0gcm9sbFVwICogZmFjdG9yO1xuICAgICAgICB2YWxzW3ByZXZpb3VzXSAtPSByb2xsVXAgKiBjb252ICogZmFjdG9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcmV2aW91cztcbiAgICB9XG4gIH0sIG51bGwpO1xuXG4gIC8vIHRyeSB0byBjb252ZXJ0IGFueSBkZWNpbWFscyBpbnRvIHNtYWxsZXIgdW5pdHMgaWYgcG9zc2libGVcbiAgLy8gZm9yIGV4YW1wbGUgZm9yIHsgeWVhcnM6IDIuNSwgZGF5czogMCwgc2Vjb25kczogMCB9IHdlIHdhbnQgdG8gZ2V0IHsgeWVhcnM6IDIsIGRheXM6IDE4MiwgaG91cnM6IDEyIH1cbiAgb3JkZXJlZFVuaXRzLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbHNbY3VycmVudF0pKSB7XG4gICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgY29uc3QgZnJhY3Rpb24gPSB2YWxzW3ByZXZpb3VzXSAlIDE7XG4gICAgICAgIHZhbHNbcHJldmlvdXNdIC09IGZyYWN0aW9uO1xuICAgICAgICB2YWxzW2N1cnJlbnRdICs9IGZyYWN0aW9uICogbWF0cml4W3ByZXZpb3VzXVtjdXJyZW50XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJldmlvdXM7XG4gICAgfVxuICB9LCBudWxsKTtcbn1cblxuLy8gUmVtb3ZlIGFsbCBwcm9wZXJ0aWVzIHdpdGggYSB2YWx1ZSBvZiAwIGZyb20gYW4gb2JqZWN0XG5mdW5jdGlvbiByZW1vdmVaZXJvZXModmFscykge1xuICBjb25zdCBuZXdWYWxzID0ge307XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHMpKSB7XG4gICAgaWYgKHZhbHVlICE9PSAwKSB7XG4gICAgICBuZXdWYWxzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld1ZhbHM7XG59XG5cbi8qKlxuICogQSBEdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50cyBhIHBlcmlvZCBvZiB0aW1lLCBsaWtlIFwiMiBtb250aHNcIiBvciBcIjEgZGF5LCAxIGhvdXJcIi4gQ29uY2VwdHVhbGx5LCBpdCdzIGp1c3QgYSBtYXAgb2YgdW5pdHMgdG8gdGhlaXIgcXVhbnRpdGllcywgYWNjb21wYW5pZWQgYnkgc29tZSBhZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gYW5kIG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uIFRoZXkgY2FuIGJlIHVzZWQgb24gdGhlaXIgb3duIG9yIGluIGNvbmp1bmN0aW9uIHdpdGggb3RoZXIgTHV4b24gdHlwZXM7IGZvciBleGFtcGxlLCB5b3UgY2FuIHVzZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c30gdG8gYWRkIGEgRHVyYXRpb24gb2JqZWN0IHRvIGEgRGF0ZVRpbWUsIHByb2R1Y2luZyBhbm90aGVyIERhdGVUaW1lLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiBjb21tb25seSB1c2VkIG1ldGhvZHMgYW5kIGdldHRlcnMgaW4gRHVyYXRpb246XG4gKlxuICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGEgRHVyYXRpb24sIHVzZSB7QGxpbmsgRHVyYXRpb24uZnJvbU1pbGxpc30sIHtAbGluayBEdXJhdGlvbi5mcm9tT2JqZWN0fSwgb3Ige0BsaW5rIER1cmF0aW9uLmZyb21JU099LlxuICogKiAqKlVuaXQgdmFsdWVzKiogU2VlIHRoZSB7QGxpbmsgRHVyYXRpb24jeWVhcnN9LCB7QGxpbmsgRHVyYXRpb24jbW9udGhzfSwge0BsaW5rIER1cmF0aW9uI3dlZWtzfSwge0BsaW5rIER1cmF0aW9uI2RheXN9LCB7QGxpbmsgRHVyYXRpb24jaG91cnN9LCB7QGxpbmsgRHVyYXRpb24jbWludXRlc30sIHtAbGluayBEdXJhdGlvbiNzZWNvbmRzfSwge0BsaW5rIER1cmF0aW9uI21pbGxpc2Vjb25kc30gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgIHtAbGluayBEdXJhdGlvbiNsb2NhbGV9IGFuZCB7QGxpbmsgRHVyYXRpb24jbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgbmV3IER1cmF0aW9ucyBvdXQgb2Ygb2xkIG9uZXMgdXNlIHtAbGluayBEdXJhdGlvbiNwbHVzfSwge0BsaW5rIER1cmF0aW9uI21pbnVzfSwge0BsaW5rIER1cmF0aW9uI25vcm1hbGl6ZX0sIHtAbGluayBEdXJhdGlvbiNzZXR9LCB7QGxpbmsgRHVyYXRpb24jcmVjb25maWd1cmV9LCB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30sIGFuZCB7QGxpbmsgRHVyYXRpb24jbmVnYXRlfS5cbiAqICogKipPdXRwdXQqKiBUbyBjb252ZXJ0IHRoZSBEdXJhdGlvbiBpbnRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgc2VlIHtAbGluayBEdXJhdGlvbiNhc30sIHtAbGluayBEdXJhdGlvbiN0b0lTT30sIHtAbGluayBEdXJhdGlvbiN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgRHVyYXRpb24jdG9KU09OfVxuICpcbiAqIFRoZXJlJ3MgYXJlIG1vcmUgbWV0aG9kcyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiBhbmQgdmFsaWRpdHksIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVyYXRpb24ge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbnN0IGFjY3VyYXRlID0gY29uZmlnLmNvbnZlcnNpb25BY2N1cmFjeSA9PT0gXCJsb25ndGVybVwiIHx8IGZhbHNlO1xuICAgIGxldCBtYXRyaXggPSBhY2N1cmF0ZSA/IGFjY3VyYXRlTWF0cml4IDogY2FzdWFsTWF0cml4O1xuXG4gICAgaWYgKGNvbmZpZy5tYXRyaXgpIHtcbiAgICAgIG1hdHJpeCA9IGNvbmZpZy5tYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy52YWx1ZXMgPSBjb25maWcudmFsdWVzO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jb252ZXJzaW9uQWNjdXJhY3kgPSBhY2N1cmF0ZSA/IFwibG9uZ3Rlcm1cIiA6IFwiY2FzdWFsXCI7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIER1cmF0aW9uIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgb2YgbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tTWlsbGlzKGNvdW50LCBvcHRzKSB7XG4gICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IGNvdW50IH0sIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcnMnIGFuZCAnaG91cnMnLlxuICAgKiBJZiB0aGlzIG9iamVjdCBpcyBlbXB0eSB0aGVuIGEgemVybyBtaWxsaXNlY29uZHMgZHVyYXRpb24gaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoucXVhcnRlcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3Vyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz1bXV0gLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgY3VzdG9tIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tT2JqZWN0KG9iaiwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7XG4gICAgICAgICAgb2JqID09PSBudWxsID8gXCJudWxsXCIgOiB0eXBlb2Ygb2JqXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRHVyYXRpb24oe1xuICAgICAgdmFsdWVzOiBub3JtYWxpemVPYmplY3Qob2JqLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSxcbiAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0cyksXG4gICAgICBjb252ZXJzaW9uQWNjdXJhY3k6IG9wdHMuY29udmVyc2lvbkFjY3VyYWN5LFxuICAgICAgbWF0cml4OiBvcHRzLm1hdHJpeCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIER1cmF0aW9uTGlrZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3QgfCBudW1iZXIgfCBEdXJhdGlvbn0gZHVyYXRpb25MaWtlXG4gICAqIE9uZSBvZjpcbiAgICogLSBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy5cbiAgICogLSBudW1iZXIgcmVwcmVzZW50aW5nIG1pbGxpc2Vjb25kc1xuICAgKiAtIER1cmF0aW9uIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb25MaWtlKSB7XG4gICAgaWYgKGlzTnVtYmVyKGR1cmF0aW9uTGlrZSkpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKGR1cmF0aW9uTGlrZSk7XG4gICAgfSBlbHNlIGlmIChEdXJhdGlvbi5pc0R1cmF0aW9uKGR1cmF0aW9uTGlrZSkpIHtcbiAgICAgIHJldHVybiBkdXJhdGlvbkxpa2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb25MaWtlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChkdXJhdGlvbkxpa2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgIGBVbmtub3duIGR1cmF0aW9uIGFyZ3VtZW50ICR7ZHVyYXRpb25MaWtlfSBvZiB0eXBlICR7dHlwZW9mIGR1cmF0aW9uTGlrZX1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUDNZNk0xVzREVDEySDMwTTVTJykudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDMsIG1vbnRoczogNiwgd2Vla3M6IDEsIGRheXM6IDQsIGhvdXJzOiAxMiwgbWludXRlczogMzAsIHNlY29uZHM6IDUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQVDIzSCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyMyB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1A1WTNNJykudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDUsIG1vbnRoczogMyB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIGNvbnN0IFtwYXJzZWRdID0gcGFyc2VJU09EdXJhdGlvbih0ZXh0KTtcbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChwYXJzZWQsIG9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcInVucGFyc2FibGVcIiwgYHRoZSBpbnB1dCBcIiR7dGV4dH1cIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhbiBJU08gODYwMSB0aW1lIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMToyMjozMy40NDQnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDIyLCBzZWNvbmRzOiAzMywgbWlsbGlzZWNvbmRzOiA0NDQgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPVGltZSh0ZXh0LCBvcHRzKSB7XG4gICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpO1xuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHBhcnNlZCwgb3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgZGF0ZXRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbiA9IG51bGwpIHtcbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkRHVyYXRpb25FcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7IGludmFsaWQgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgbm9ybWFsaXplVW5pdCh1bml0KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICAgIHllYXI6IFwieWVhcnNcIixcbiAgICAgIHllYXJzOiBcInllYXJzXCIsXG4gICAgICBxdWFydGVyOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBxdWFydGVyczogXCJxdWFydGVyc1wiLFxuICAgICAgbW9udGg6IFwibW9udGhzXCIsXG4gICAgICBtb250aHM6IFwibW9udGhzXCIsXG4gICAgICB3ZWVrOiBcIndlZWtzXCIsXG4gICAgICB3ZWVrczogXCJ3ZWVrc1wiLFxuICAgICAgZGF5OiBcImRheXNcIixcbiAgICAgIGRheXM6IFwiZGF5c1wiLFxuICAgICAgaG91cjogXCJob3Vyc1wiLFxuICAgICAgaG91cnM6IFwiaG91cnNcIixcbiAgICAgIG1pbnV0ZTogXCJtaW51dGVzXCIsXG4gICAgICBtaW51dGVzOiBcIm1pbnV0ZXNcIixcbiAgICAgIHNlY29uZDogXCJzZWNvbmRzXCIsXG4gICAgICBzZWNvbmRzOiBcInNlY29uZHNcIixcbiAgICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgIH1bdW5pdCA/IHVuaXQudG9Mb3dlckNhc2UoKSA6IHVuaXRdO1xuXG4gICAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcblxuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIER1cmF0aW9uLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNEdXJhdGlvbihvKSB7XG4gICAgcmV0dXJuIChvICYmIG8uaXNMdXhvbkR1cmF0aW9uKSB8fCBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgIHRoZSBsb2NhbGUgb2YgYSBEdXJhdGlvbiwgc3VjaCAnZW4tR0InXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbG9jYWxlKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5sb2NhbGUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyaW5nIHN5c3RlbSBvZiBhIER1cmF0aW9uLCBzdWNoICdiZW5nJy4gVGhlIG51bWJlcmluZyBzeXN0ZW0gaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIER1cmF0aW9uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbnVtYmVyaW5nU3lzdGVtKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy4gWW91IG1heSB1c2UgdGhlc2UgdG9rZW5zOlxuICAgKiAqIGBTYCBmb3IgbWlsbGlzZWNvbmRzXG4gICAqICogYHNgIGZvciBzZWNvbmRzXG4gICAqICogYG1gIGZvciBtaW51dGVzXG4gICAqICogYGhgIGZvciBob3Vyc1xuICAgKiAqIGBkYCBmb3IgZGF5c1xuICAgKiAqIGB3YCBmb3Igd2Vla3NcbiAgICogKiBgTWAgZm9yIG1vbnRoc1xuICAgKiAqIGB5YCBmb3IgeWVhcnNcbiAgICogTm90ZXM6XG4gICAqICogQWRkIHBhZGRpbmcgYnkgcmVwZWF0aW5nIHRoZSB0b2tlbiwgZS5nLiBcInl5XCIgcGFkcyB0aGUgeWVhcnMgdG8gdHdvIGRpZ2l0cywgXCJoaGhoXCIgcGFkcyB0aGUgaG91cnMgb3V0IHRvIGZvdXIgZGlnaXRzXG4gICAqICogVG9rZW5zIGNhbiBiZSBlc2NhcGVkIGJ5IHdyYXBwaW5nIHdpdGggc2luZ2xlIHF1b3Rlcy5cbiAgICogKiBUaGUgZHVyYXRpb24gd2lsbCBiZSBjb252ZXJ0ZWQgdG8gdGhlIHNldCBvZiB1bml0cyBpbiB0aGUgZm9ybWF0IHN0cmluZyB1c2luZyB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30gYW5kIHRoZSBEdXJhdGlvbnMncyBjb252ZXJzaW9uIGFjY3VyYWN5IHNldHRpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbG9vcj10cnVlXSAtIGZsb29yIG51bWVyaWNhbCB2YWx1ZXNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieSBkIHNcIikgLy89PiBcIjEgNiAyXCJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieXkgZGQgc3NzXCIpIC8vPT4gXCIwMSAwNiAwMDJcIlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJNIFNcIikgLy89PiBcIjEyIDUxODQwMjAwMFwiXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvRm9ybWF0KGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgLy8gcmV2ZXJzZS1jb21wYXQgc2luY2UgMS4yOyB3ZSBhbHdheXMgcm91bmQgZG93biBub3csIG5ldmVyIHVwLCBhbmQgd2UgZG8gaXQgYnkgZGVmYXVsdFxuICAgIGNvbnN0IGZtdE9wdHMgPSB7XG4gICAgICAuLi5vcHRzLFxuICAgICAgZmxvb3I6IG9wdHMucm91bmQgIT09IGZhbHNlICYmIG9wdHMuZmxvb3IgIT09IGZhbHNlLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLCBmbXRPcHRzKS5mb3JtYXREdXJhdGlvbkZyb21TdHJpbmcodGhpcywgZm10KVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBEdXJhdGlvbiB3aXRoIGFsbCB1bml0cyBpbmNsdWRlZC5cbiAgICogVG8gbW9kaWZ5IGl0cyBiZWhhdmlvciwgdXNlIGBsaXN0U3R5bGVgIGFuZCBhbnkgSW50bC5OdW1iZXJGb3JtYXQgb3B0aW9uLCB0aG91Z2ggYHVuaXREaXNwbGF5YCBpcyBlc3BlY2lhbGx5IHJlbGV2YW50LlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0ludGwvTnVtYmVyRm9ybWF0L051bWJlckZvcm1hdCNvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gRm9ybWF0dGluZyBvcHRpb25zLiBBY2NlcHRzIHRoZSBzYW1lIGtleXMgYXMgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludGwuTnVtYmVyRm9ybWF0YCBjb25zdHJ1Y3RvciwgYXMgd2VsbCBhcyBgbGlzdFN0eWxlYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxpc3RTdHlsZT0nbmFycm93J10gLSBIb3cgdG8gZm9ybWF0IHRoZSBtZXJnZWQgbGlzdC4gQ29ycmVzcG9uZHMgdG8gdGhlIGBzdHlsZWAgcHJvcGVydHkgb2YgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludGwuTGlzdEZvcm1hdGAgY29uc3RydWN0b3IuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSwgaG91cnM6IDUsIG1pbnV0ZXM6IDYgfSlcbiAgICogZHVyLnRvSHVtYW4oKSAvLz0+ICcxIGRheSwgNSBob3VycywgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IGxpc3RTdHlsZTogXCJsb25nXCIgfSkgLy89PiAnMSBkYXksIDUgaG91cnMsIGFuZCA2IG1pbnV0ZXMnXG4gICAqIGR1ci50b0h1bWFuKHsgdW5pdERpc3BsYXk6IFwic2hvcnRcIiB9KSAvLz0+ICcxIGRheSwgNSBociwgNiBtaW4nXG4gICAqIGBgYFxuICAgKi9cbiAgdG9IdW1hbihvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG5cbiAgICBjb25zdCBsID0gb3JkZXJlZFVuaXRzXG4gICAgICAubWFwKCh1bml0KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudmFsdWVzW3VuaXRdO1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQodmFsKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxvY1xuICAgICAgICAgIC5udW1iZXJGb3JtYXR0ZXIoeyBzdHlsZTogXCJ1bml0XCIsIHVuaXREaXNwbGF5OiBcImxvbmdcIiwgLi4ub3B0cywgdW5pdDogdW5pdC5zbGljZSgwLCAtMSkgfSlcbiAgICAgICAgICAuZm9ybWF0KHZhbCk7XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigobikgPT4gbik7XG5cbiAgICByZXR1cm4gdGhpcy5sb2NcbiAgICAgIC5saXN0Rm9ybWF0dGVyKHsgdHlwZTogXCJjb25qdW5jdGlvblwiLCBzdHlsZTogb3B0cy5saXN0U3R5bGUgfHwgXCJuYXJyb3dcIiwgLi4ub3B0cyB9KVxuICAgICAgLmZvcm1hdChsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIER1cmF0aW9uJ3MgdmFsdWVzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICB0b09iamVjdCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuICAgIHJldHVybiB7IC4uLnRoaXMudmFsdWVzIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24uXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMywgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQM1lUNDVTJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbW9udGhzOiA0LCBzZWNvbmRzOiA0NSB9KS50b0lTTygpIC8vPT4gJ1A0TVQ0NVMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDUgfSkudG9JU08oKSAvLz0+ICdQNU0nXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiA1IH0pLnRvSVNPKCkgLy89PiAnUFQ1TSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogNiB9KS50b0lTTygpIC8vPT4gJ1BUMC4wMDZTJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTTygpIHtcbiAgICAvLyB3ZSBjb3VsZCB1c2UgdGhlIGZvcm1hdHRlciwgYnV0IHRoaXMgaXMgYW4gZWFzaWVyIHdheSB0byBnZXQgdGhlIG1pbmltdW0gc3RyaW5nXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuXG4gICAgbGV0IHMgPSBcIlBcIjtcbiAgICBpZiAodGhpcy55ZWFycyAhPT0gMCkgcyArPSB0aGlzLnllYXJzICsgXCJZXCI7XG4gICAgaWYgKHRoaXMubW9udGhzICE9PSAwIHx8IHRoaXMucXVhcnRlcnMgIT09IDApIHMgKz0gdGhpcy5tb250aHMgKyB0aGlzLnF1YXJ0ZXJzICogMyArIFwiTVwiO1xuICAgIGlmICh0aGlzLndlZWtzICE9PSAwKSBzICs9IHRoaXMud2Vla3MgKyBcIldcIjtcbiAgICBpZiAodGhpcy5kYXlzICE9PSAwKSBzICs9IHRoaXMuZGF5cyArIFwiRFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwIHx8IHRoaXMubWludXRlcyAhPT0gMCB8fCB0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApXG4gICAgICBzICs9IFwiVFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwKSBzICs9IHRoaXMuaG91cnMgKyBcIkhcIjtcbiAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgIGlmICh0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApXG4gICAgICAvLyB0aGlzIHdpbGwgaGFuZGxlIFwiZmxvYXRpbmcgcG9pbnQgbWFkbmVzc1wiIGJ5IHJlbW92aW5nIGV4dHJhIGRlY2ltYWwgcGxhY2VzXG4gICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81ODgwMDQvaXMtZmxvYXRpbmctcG9pbnQtbWF0aC1icm9rZW5cbiAgICAgIHMgKz0gcm91bmRUbyh0aGlzLnNlY29uZHMgKyB0aGlzLm1pbGxpc2Vjb25kcyAvIDEwMDAsIDMpICsgXCJTXCI7XG4gICAgaWYgKHMgPT09IFwiUFwiKSBzICs9IFwiVDBTXCI7XG4gICAgcmV0dXJuIHM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24sIGZvcm1hdHRlZCBhcyBhIHRpbWUgb2YgZGF5LlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBudWxsIGlmIHRoZSBkdXJhdGlvbiBpcyBpbnZhbGlkLCBuZWdhdGl2ZSwgb3IgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDI0IGhvdXJzLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzExMDAwMC4wMDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPVGltZShvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBtaWxsaXMgPSB0aGlzLnRvTWlsbGlzKCk7XG4gICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDtcblxuICAgIG9wdHMgPSB7XG4gICAgICBzdXBwcmVzc01pbGxpc2Vjb25kczogZmFsc2UsXG4gICAgICBzdXBwcmVzc1NlY29uZHM6IGZhbHNlLFxuICAgICAgaW5jbHVkZVByZWZpeDogZmFsc2UsXG4gICAgICBmb3JtYXQ6IFwiZXh0ZW5kZWRcIixcbiAgICAgIC4uLm9wdHMsXG4gICAgICBpbmNsdWRlT2Zmc2V0OiBmYWxzZSxcbiAgICB9O1xuXG4gICAgY29uc3QgZGF0ZVRpbWUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKG1pbGxpcywgeyB6b25lOiBcIlVUQ1wiIH0pO1xuICAgIHJldHVybiBkYXRlVGltZS50b0lTT1RpbWUob3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdGhlIFJFUEwuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBgRHVyYXRpb24geyB2YWx1ZXM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZXMpfSB9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBEdXJhdGlvbiB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b01pbGxpcygpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcblxuICAgIHJldHVybiBkdXJhdGlvblRvTWlsbGlzKHRoaXMubWF0cml4LCB0aGlzLnZhbHVlcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi4gQWxpYXMgb2Yge0BsaW5rIHRvTWlsbGlzfVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB2YWx1ZU9mKCkge1xuICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBwbHVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksXG4gICAgICByZXN1bHQgPSB7fTtcblxuICAgIGZvciAoY29uc3QgayBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHtcbiAgICAgICAgcmVzdWx0W2tdID0gZHVyLmdldChrKSArIHRoaXMuZ2V0KGspO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogcmVzdWx0IH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBEdXJhdGlvbiBzaG9ydGVyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbWludXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5wbHVzKGR1ci5uZWdhdGUoKSk7XG4gIH1cblxuICAvKipcbiAgICogU2NhbGUgdGhpcyBEdXJhdGlvbiBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggdW5pdC4gQXJpdHkgaXMgMSBvciAyOiB0aGUgdmFsdWUgb2YgdGhlIHVuaXQgYW5kLCBvcHRpb25hbGx5LCB0aGUgdW5pdCBuYW1lLiBNdXN0IHJldHVybiBhIG51bWJlci5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cyh4ID0+IHggKiAyKSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDYwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cygoeCwgdSkgPT4gdSA9PT0gXCJob3Vyc1wiID8geCAqIDIgOiB4KSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBtYXBVbml0cyhmbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKSB7XG4gICAgICByZXN1bHRba10gPSBhc051bWJlcihmbih0aGlzLnZhbHVlc1trXSwgaykpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IHJlc3VsdCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ3llYXJzJykgLy89PiAyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCdtb250aHMnKSAvLz0+IDBcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1tEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdXIuc2V0KHsgaG91cnM6IDgsIG1pbnV0ZXM6IDMwIH0pXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc2V0KHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IG1peGVkID0geyAuLi50aGlzLnZhbHVlcywgLi4ubm9ybWFsaXplT2JqZWN0KHZhbHVlcywgRHVyYXRpb24ubm9ybWFsaXplVW5pdCkgfTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IG1peGVkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSBhbmQvb3IgbnVtYmVyaW5nU3lzdGVtLiAgUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBjb252ZXJzaW9uQWNjdXJhY3ksIG1hdHJpeCB9ID0ge30pIHtcbiAgICBjb25zdCBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pO1xuICAgIGNvbnN0IG9wdHMgPSB7IGxvYywgbWF0cml4LCBjb252ZXJzaW9uQWNjdXJhY3kgfTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGR1cmF0aW9uIGluIHRoZSBzcGVjaWZpZWQgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlcycgb3IgJ2RheXMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ2RheXMnKSAvLz0+IDM2NVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMX0pLmFzKCdtb250aHMnKSAvLz0+IDEyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe2hvdXJzOiA2MH0pLmFzKCdkYXlzJykgLy89PiAyLjVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgYXModW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZSB0aGlzIER1cmF0aW9uIHRvIGl0cyBjYW5vbmljYWwgcmVwcmVzZW50YXRpb24gaW4gaXRzIGN1cnJlbnQgdW5pdHMuXG4gICAqIEFzc3VtaW5nIHRoZSBvdmVyYWxsIHZhbHVlIG9mIHRoZSBEdXJhdGlvbiBpcyBwb3NpdGl2ZSwgdGhpcyBtZWFuczpcbiAgICogLSBleGNlc3NpdmUgdmFsdWVzIGZvciBsb3dlci1vcmRlciB1bml0cyBhcmUgY29udmVydGVkIHRvIGhpZ2hlci1vcmRlciB1bml0cyAoaWYgcG9zc2libGUsIHNlZSBmaXJzdCBhbmQgc2Vjb25kIGV4YW1wbGUpXG4gICAqIC0gbmVnYXRpdmUgbG93ZXItb3JkZXIgdW5pdHMgYXJlIGNvbnZlcnRlZCB0byBoaWdoZXIgb3JkZXIgdW5pdHMgKHRoZXJlIG11c3QgYmUgc3VjaCBhIGhpZ2hlciBvcmRlciB1bml0LCBvdGhlcndpc2VcbiAgICogICB0aGUgb3ZlcmFsbCB2YWx1ZSB3b3VsZCBiZSBuZWdhdGl2ZSwgc2VlIHRoaXJkIGV4YW1wbGUpXG4gICAqIC0gZnJhY3Rpb25hbCB2YWx1ZXMgZm9yIGhpZ2hlci1vcmRlciB1bml0cyBhcmUgY29udmVydGVkIHRvIGxvd2VyLW9yZGVyIHVuaXRzIChpZiBwb3NzaWJsZSwgc2VlIGZvdXJ0aCBleGFtcGxlKVxuICAgKlxuICAgKiBJZiB0aGUgb3ZlcmFsbCB2YWx1ZSBpcyBuZWdhdGl2ZSwgdGhlIHJlc3VsdCBvZiB0aGlzIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIGB0aGlzLm5lZ2F0ZSgpLm5vcm1hbGl6ZSgpLm5lZ2F0ZSgpYC5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAyLCBkYXlzOiA1MDAwIH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAxNSwgZGF5czogMjU1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGRheXM6IDUwMDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgZGF5czogNTAwMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTIsIG1pbnV0ZXM6IC00NSB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDE1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAyLjUsIGRheXM6IDAsIGhvdXJzOiAwIH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAyLCBkYXlzOiAxODIsIGhvdXJzOiAxMiB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbm9ybWFsaXplKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB2YWxzID0gdGhpcy50b09iamVjdCgpO1xuICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiB2YWxzIH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2NhbGUgdW5pdHMgdG8gaXRzIGxhcmdlc3QgcmVwcmVzZW50YXRpb25cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogOTAwMDAgfSkucmVzY2FsZSgpLnRvT2JqZWN0KCkgLy89PiB7IG1pbnV0ZXM6IDEsIHNlY29uZHM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICByZXNjYWxlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB2YWxzID0gcmVtb3ZlWmVyb2VzKHRoaXMubm9ybWFsaXplKCkuc2hpZnRUb0FsbCgpLnRvT2JqZWN0KCkpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogdmFscyB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoaXMgRHVyYXRpb24gaW50byBpdHMgcmVwcmVzZW50YXRpb24gaW4gYSBkaWZmZXJlbnQgc2V0IG9mIHVuaXRzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIHNlY29uZHM6IDMwIH0pLnNoaWZ0VG8oJ21pbnV0ZXMnLCAnbWlsbGlzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgbWludXRlczogNjAsIG1pbGxpc2Vjb25kczogMzAwMDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHNoaWZ0VG8oLi4udW5pdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB1bml0cyA9IHVuaXRzLm1hcCgodSkgPT4gRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1KSk7XG5cbiAgICBjb25zdCBidWlsdCA9IHt9LFxuICAgICAgYWNjdW11bGF0ZWQgPSB7fSxcbiAgICAgIHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgbGV0IGxhc3RVbml0O1xuXG4gICAgZm9yIChjb25zdCBrIG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKHVuaXRzLmluZGV4T2YoaykgPj0gMCkge1xuICAgICAgICBsYXN0VW5pdCA9IGs7XG5cbiAgICAgICAgbGV0IG93biA9IDA7XG5cbiAgICAgICAgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0XG4gICAgICAgIGZvciAoY29uc3QgYWsgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgICAgICBvd24gKz0gdGhpcy5tYXRyaXhbYWtdW2tdICogYWNjdW11bGF0ZWRbYWtdO1xuICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwbHVzIGFueXRoaW5nIHRoYXQncyBhbHJlYWR5IGluIHRoaXMgdW5pdFxuICAgICAgICBpZiAoaXNOdW1iZXIodmFsc1trXSkpIHtcbiAgICAgICAgICBvd24gKz0gdmFsc1trXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9ubHkga2VlcCB0aGUgaW50ZWdlciBwYXJ0IGZvciBub3cgaW4gdGhlIGhvcGVzIG9mIHB1dHRpbmcgYW55IGRlY2ltYWwgcGFydFxuICAgICAgICAvLyBpbnRvIGEgc21hbGxlciB1bml0IGxhdGVyXG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLnRydW5jKG93bik7XG4gICAgICAgIGJ1aWx0W2tdID0gaTtcbiAgICAgICAgYWNjdW11bGF0ZWRba10gPSAob3duICogMTAwMCAtIGkgKiAxMDAwKSAvIDEwMDA7XG5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBrZWVwIGl0IGluIHRoZSB3aW5ncyB0byBib2lsIGl0IGxhdGVyXG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKHZhbHNba10pKSB7XG4gICAgICAgIGFjY3VtdWxhdGVkW2tdID0gdmFsc1trXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0XG4gICAgLy8gbGFzdFVuaXQgbXVzdCBiZSBkZWZpbmVkIHNpbmNlIHVuaXRzIGlzIG5vdCBlbXB0eVxuICAgIGZvciAoY29uc3Qga2V5IGluIGFjY3VtdWxhdGVkKSB7XG4gICAgICBpZiAoYWNjdW11bGF0ZWRba2V5XSAhPT0gMCkge1xuICAgICAgICBidWlsdFtsYXN0VW5pdF0gKz1cbiAgICAgICAgICBrZXkgPT09IGxhc3RVbml0ID8gYWNjdW11bGF0ZWRba2V5XSA6IGFjY3VtdWxhdGVkW2tleV0gLyB0aGlzLm1hdHJpeFtsYXN0VW5pdF1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBub3JtYWxpemVWYWx1ZXModGhpcy5tYXRyaXgsIGJ1aWx0KTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IGJ1aWx0IH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNoaWZ0IHRoaXMgRHVyYXRpb24gdG8gYWxsIGF2YWlsYWJsZSB1bml0cy5cbiAgICogU2FtZSBhcyBzaGlmdFRvKFwieWVhcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCIpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc2hpZnRUb0FsbCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIHRoaXMuc2hpZnRUbyhcbiAgICAgIFwieWVhcnNcIixcbiAgICAgIFwibW9udGhzXCIsXG4gICAgICBcIndlZWtzXCIsXG4gICAgICBcImRheXNcIixcbiAgICAgIFwiaG91cnNcIixcbiAgICAgIFwibWludXRlc1wiLFxuICAgICAgXCJzZWNvbmRzXCIsXG4gICAgICBcIm1pbGxpc2Vjb25kc1wiXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG5lZ2F0aXZlIG9mIHRoaXMgRHVyYXRpb24uXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkubmVnYXRlKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IC0xLCBzZWNvbmRzOiAtMzAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIG5lZ2F0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgbmVnYXRlZCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykpIHtcbiAgICAgIG5lZ2F0ZWRba10gPSB0aGlzLnZhbHVlc1trXSA9PT0gMCA/IDAgOiAtdGhpcy52YWx1ZXNba107XG4gICAgfVxuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogbmVnYXRlZCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHllYXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXJzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy55ZWFycyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcXVhcnRlcnMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgcXVhcnRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnF1YXJ0ZXJzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtb250aHMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbW9udGhzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5tb250aHMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWtzXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLndlZWtzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkYXlzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRheXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLmRheXMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGhvdXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGhvdXJzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5ob3VycyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWludXRlcy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtaW51dGVzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5taW51dGVzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZWNvbmRzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgc2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuc2Vjb25kcyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWlsbGlzZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5taWxsaXNlY29uZHMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnNcbiAgICogb24gaW52YWxpZCBEYXRlVGltZXMgb3IgSW50ZXJ2YWxzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBEdXJhdGlvbiBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRHVyYXRpb24gaXMgdmFsaWRcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRSZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZEV4cGxhbmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEVxdWFsaXR5IGNoZWNrXG4gICAqIFR3byBEdXJhdGlvbnMgYXJlIGVxdWFsIGlmZiB0aGV5IGhhdmUgdGhlIHNhbWUgdW5pdHMgYW5kIHRoZSBzYW1lIHZhbHVlcyBmb3IgZWFjaCB1bml0LlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXEodjEsIHYyKSB7XG4gICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWxcbiAgICAgIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYxID09PSAwKSByZXR1cm4gdjIgPT09IHVuZGVmaW5lZCB8fCB2MiA9PT0gMDtcbiAgICAgIHJldHVybiB2MSA9PT0gdjI7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB1IG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKCFlcSh0aGlzLnZhbHVlc1t1XSwgb3RoZXIudmFsdWVzW3VdKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IERhdGVUaW1lLCB7IGZyaWVuZGx5RGF0ZVRpbWUgfSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCB7IEludmFsaWRBcmd1bWVudEVycm9yLCBJbnZhbGlkSW50ZXJ2YWxFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW1wbC9pbnZhbGlkLmpzXCI7XG5pbXBvcnQgRm9ybWF0dGVyIGZyb20gXCIuL2ltcGwvZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBGb3JtYXRzIGZyb20gXCIuL2ltcGwvZm9ybWF0cy5qc1wiO1xuXG5jb25zdCBJTlZBTElEID0gXCJJbnZhbGlkIEludGVydmFsXCI7XG5cbi8vIGNoZWNrcyBpZiB0aGUgc3RhcnQgaXMgZXF1YWwgdG8gb3IgYmVmb3JlIHRoZSBlbmRcbmZ1bmN0aW9uIHZhbGlkYXRlU3RhcnRFbmQoc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0IHx8ICFzdGFydC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgc3RhcnRcIik7XG4gIH0gZWxzZSBpZiAoIWVuZCB8fCAhZW5kLmlzVmFsaWQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRcIik7XG4gIH0gZWxzZSBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcbiAgICAgIFwiZW5kIGJlZm9yZSBzdGFydFwiLFxuICAgICAgYFRoZSBlbmQgb2YgYW4gaW50ZXJ2YWwgbXVzdCBiZSBhZnRlciBpdHMgc3RhcnQsIGJ1dCB5b3UgaGFkIHN0YXJ0PSR7c3RhcnQudG9JU08oKX0gYW5kIGVuZD0ke2VuZC50b0lTTygpfWBcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQW4gSW50ZXJ2YWwgb2JqZWN0IHJlcHJlc2VudHMgYSBoYWxmLW9wZW4gaW50ZXJ2YWwgb2YgdGltZSwgd2hlcmUgZWFjaCBlbmRwb2ludCBpcyBhIHtAbGluayBEYXRlVGltZX0uIENvbmNlcHR1YWxseSwgaXQncyBhIGNvbnRhaW5lciBmb3IgdGhvc2UgdHdvIGVuZHBvaW50cywgYWNjb21wYW5pZWQgYnkgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIGNvbXBhcmluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIG1ldGhvZHMgYW5kIGdldHRlcnMgaW4gSW50ZXJ2YWw6XG4gKlxuICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGFuIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsLmZyb21EYXRlVGltZXN9LCB7QGxpbmsgSW50ZXJ2YWwuYWZ0ZXJ9LCB7QGxpbmsgSW50ZXJ2YWwuYmVmb3JlfSwgb3Ige0BsaW5rIEludGVydmFsLmZyb21JU099LlxuICogKiAqKkFjY2Vzc29ycyoqIFVzZSB7QGxpbmsgSW50ZXJ2YWwjc3RhcnR9IGFuZCB7QGxpbmsgSW50ZXJ2YWwjZW5kfSB0byBnZXQgdGhlIHN0YXJ0IGFuZCBlbmQuXG4gKiAqICoqSW50ZXJyb2dhdGlvbioqIFRvIGFuYWx5emUgdGhlIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsI2NvdW50fSwge0BsaW5rIEludGVydmFsI2xlbmd0aH0sIHtAbGluayBJbnRlcnZhbCNoYXNTYW1lfSwge0BsaW5rIEludGVydmFsI2NvbnRhaW5zfSwge0BsaW5rIEludGVydmFsI2lzQWZ0ZXJ9LCBvciB7QGxpbmsgSW50ZXJ2YWwjaXNCZWZvcmV9LlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG90aGVyIEludGVydmFscyBvdXQgb2YgdGhpcyBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjc2V0fSwge0BsaW5rIEludGVydmFsI3NwbGl0QXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRCeX0sIHtAbGluayBJbnRlcnZhbCNkaXZpZGVFcXVhbGx5fSwge0BsaW5rIEludGVydmFsLm1lcmdlfSwge0BsaW5rIEludGVydmFsLnhvcn0sIHtAbGluayBJbnRlcnZhbCN1bmlvbn0sIHtAbGluayBJbnRlcnZhbCNpbnRlcnNlY3Rpb259LCBvciB7QGxpbmsgSW50ZXJ2YWwjZGlmZmVyZW5jZX0uXG4gKiAqICoqQ29tcGFyaXNvbioqIFRvIGNvbXBhcmUgdGhpcyBJbnRlcnZhbCB0byBhbm90aGVyIG9uZSwgdXNlIHtAbGluayBJbnRlcnZhbCNlcXVhbHN9LCB7QGxpbmsgSW50ZXJ2YWwjb3ZlcmxhcHN9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNTdGFydH0sIHtAbGluayBJbnRlcnZhbCNhYnV0c0VuZH0sIHtAbGluayBJbnRlcnZhbCNlbmd1bGZzfVxuICogKiAqKk91dHB1dCoqIFRvIGNvbnZlcnQgdGhlIEludGVydmFsIGludG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCBzZWUge0BsaW5rIEludGVydmFsI3RvU3RyaW5nfSwge0BsaW5rIEludGVydmFsI3RvTG9jYWxlU3RyaW5nfSwge0BsaW5rIEludGVydmFsI3RvSVNPfSwge0BsaW5rIEludGVydmFsI3RvSVNPRGF0ZX0sIHtAbGluayBJbnRlcnZhbCN0b0lTT1RpbWV9LCB7QGxpbmsgSW50ZXJ2YWwjdG9Gb3JtYXR9LCBhbmQge0BsaW5rIEludGVydmFsI3RvRHVyYXRpb259LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnRlcnZhbCB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zID0gY29uZmlnLnN0YXJ0O1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZSA9IGNvbmZpZy5lbmQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlzTHV4b25JbnRlcnZhbCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIEludGVydmFsIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgSW50ZXJ2YWwgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEludGVydmFsRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWwoeyBpbnZhbGlkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhbiBlbmQgRGF0ZVRpbWUuIEluY2x1c2l2ZSBvZiB0aGUgc3RhcnQgYnV0IG5vdCB0aGUgZW5kLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmRcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVUaW1lcyhzdGFydCwgZW5kKSB7XG4gICAgY29uc3QgYnVpbHRTdGFydCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpLFxuICAgICAgYnVpbHRFbmQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7XG5cbiAgICBjb25zdCB2YWxpZGF0ZUVycm9yID0gdmFsaWRhdGVTdGFydEVuZChidWlsdFN0YXJ0LCBidWlsdEVuZCk7XG5cbiAgICBpZiAodmFsaWRhdGVFcnJvciA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVydmFsKHtcbiAgICAgICAgc3RhcnQ6IGJ1aWx0U3RhcnQsXG4gICAgICAgIGVuZDogYnVpbHRFbmQsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIHRvLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGFmdGVyKHN0YXJ0LCBkdXJhdGlvbikge1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKHN0YXJ0KTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdCwgZHQucGx1cyhkdXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhbiBlbmQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIGJhY2t3YXJkcyB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC5cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgYmVmb3JlKGVuZCwgZHVyYXRpb24pIHtcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShlbmQpO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0Lm1pbnVzKGR1ciksIGR0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhbiBJU08gODYwMSBzdHJpbmcuXG4gICAqIEFjY2VwdHMgYDxzdGFydD4vPGVuZD5gLCBgPHN0YXJ0Pi88ZHVyYXRpb24+YCwgYW5kIGA8ZHVyYXRpb24+LzxlbmQ+YCBmb3JtYXRzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBvcHRpb25zIHRvIHBhc3Mge0BsaW5rIERhdGVUaW1lI2Zyb21JU099IGFuZCBvcHRpb25hbGx5IHtAbGluayBEdXJhdGlvbiNmcm9tSVNPfVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIGNvbnN0IFtzLCBlXSA9ICh0ZXh0IHx8IFwiXCIpLnNwbGl0KFwiL1wiLCAyKTtcbiAgICBpZiAocyAmJiBlKSB7XG4gICAgICBsZXQgc3RhcnQsIHN0YXJ0SXNWYWxpZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0YXJ0ID0gRGF0ZVRpbWUuZnJvbUlTTyhzLCBvcHRzKTtcbiAgICAgICAgc3RhcnRJc1ZhbGlkID0gc3RhcnQuaXNWYWxpZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc3RhcnRJc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBlbmQsIGVuZElzVmFsaWQ7XG4gICAgICB0cnkge1xuICAgICAgICBlbmQgPSBEYXRlVGltZS5mcm9tSVNPKGUsIG9wdHMpO1xuICAgICAgICBlbmRJc1ZhbGlkID0gZW5kLmlzVmFsaWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVuZElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCAmJiBlbmRJc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhcnRJc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21JU08oZSwgb3B0cyk7XG4gICAgICAgIGlmIChkdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5hZnRlcihzdGFydCwgZHVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbmRJc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21JU08ocywgb3B0cyk7XG4gICAgICAgIGlmIChkdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBkdXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhbiBJbnRlcnZhbC4gV29ya3MgYWNyb3NzIGNvbnRleHQgYm91bmRhcmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gb1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzSW50ZXJ2YWwobykge1xuICAgIHJldHVybiAobyAmJiBvLmlzTHV4b25JbnRlcnZhbCkgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RhcnQgb2YgdGhlIEludGVydmFsXG4gICAqIEB0eXBlIHtEYXRlVGltZX1cbiAgICovXG4gIGdldCBzdGFydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5zIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsXG4gICAqIEB0eXBlIHtEYXRlVGltZX1cbiAgICovXG4gIGdldCBlbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWRSZWFzb24gPT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkUmVhc29uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsIGluIHRoZSBzcGVjaWZpZWQgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gcmV0dXJuIHRoZSBsZW5ndGggaW4uXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGxlbmd0aCh1bml0ID0gXCJtaWxsaXNlY29uZHNcIikge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvRHVyYXRpb24oLi4uW3VuaXRdKS5nZXQodW5pdCkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY291bnQgb2YgbWludXRlcywgaG91cnMsIGRheXMsIG1vbnRocywgb3IgeWVhcnMgaW5jbHVkZWQgaW4gdGhlIEludGVydmFsLCBldmVuIGluIHBhcnQuXG4gICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5J1xuICAgKiBhc2tzICd3aGF0IGRhdGVzIGFyZSBpbmNsdWRlZCBpbiB0aGlzIGludGVydmFsPycsIG5vdCAnaG93IG1hbnkgZGF5cyBsb25nIGlzIHRoaXMgaW50ZXJ2YWw/J1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3VuaXQ9J21pbGxpc2Vjb25kcyddIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXNlTG9jYWxlV2Vla3M9ZmFsc2VdIC0gSWYgdHJ1ZSwgdXNlIHdlZWtzIGJhc2VkIG9uIHRoZSBsb2NhbGUsIGkuZS4gdXNlIHRoZSBsb2NhbGUtZGVwZW5kZW50IHN0YXJ0IG9mIHRoZSB3ZWVrOyB0aGlzIG9wZXJhdGlvbiB3aWxsIGFsd2F5cyB1c2UgdGhlIGxvY2FsZSBvZiB0aGUgc3RhcnQgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgY291bnQodW5pdCA9IFwibWlsbGlzZWNvbmRzXCIsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuc3RhcnQuc3RhcnRPZih1bml0LCBvcHRzKTtcbiAgICBsZXQgZW5kO1xuICAgIGlmIChvcHRzPy51c2VMb2NhbGVXZWVrcykge1xuICAgICAgZW5kID0gdGhpcy5lbmQucmVjb25maWd1cmUoeyBsb2NhbGU6IHN0YXJ0LmxvY2FsZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gdGhpcy5lbmQ7XG4gICAgfVxuICAgIGVuZCA9IGVuZC5zdGFydE9mKHVuaXQsIG9wdHMpO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCkpICsgKGVuZC52YWx1ZU9mKCkgIT09IHRoaXMuZW5kLnZhbHVlT2YoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBhbmQgZW5kIGFyZSBib3RoIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY2hlY2sgc2FtZW5lc3Mgb25cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1NhbWUodW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmlzRW1wdHkoKSB8fCB0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsIHVuaXQpIDogZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBEYXRlVGltZXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZnRlciB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNBZnRlcihkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA+IGRhdGVUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYmVmb3JlIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0JlZm9yZShkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMuZSA8PSBkYXRlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjb250YWlucyhkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA8PSBkYXRlVGltZSAmJiB0aGlzLmUgPiBkYXRlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldHNcIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gdGhlIHZhbHVlcyB0byBzZXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLnN0YXJ0IC0gdGhlIHN0YXJ0aW5nIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc2V0KHsgc3RhcnQsIGVuZCB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQgfHwgdGhpcy5zLCBlbmQgfHwgdGhpcy5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGF0IGVhY2ggb2YgdGhlIHNwZWNpZmllZCBEYXRlVGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzcGxpdEF0KC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107XG4gICAgY29uc3Qgc29ydGVkID0gZGF0ZVRpbWVzXG4gICAgICAgIC5tYXAoZnJpZW5kbHlEYXRlVGltZSlcbiAgICAgICAgLmZpbHRlcigoZCkgPT4gdGhpcy5jb250YWlucyhkKSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEudG9NaWxsaXMoKSAtIGIudG9NaWxsaXMoKSksXG4gICAgICByZXN1bHRzID0gW107XG4gICAgbGV0IHsgcyB9ID0gdGhpcyxcbiAgICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKHMgPCB0aGlzLmUpIHtcbiAgICAgIGNvbnN0IGFkZGVkID0gc29ydGVkW2ldIHx8IHRoaXMuZSxcbiAgICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaSArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byBzbWFsbGVyIEludGVydmFscywgZWFjaCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aC5cbiAgICogTGVmdCBvdmVyIHRpbWUgaXMgZ3JvdXBlZCBpbnRvIGEgc21hbGxlciBpbnRlcnZhbFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGxlbmd0aCBvZiBlYWNoIHJlc3VsdGluZyBpbnRlcnZhbC5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzcGxpdEJ5KGR1cmF0aW9uKSB7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhZHVyLmlzVmFsaWQgfHwgZHVyLmFzKFwibWlsbGlzZWNvbmRzXCIpID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IHsgcyB9ID0gdGhpcyxcbiAgICAgIGlkeCA9IDEsXG4gICAgICBuZXh0O1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICBjb25zdCBhZGRlZCA9IHRoaXMuc3RhcnQucGx1cyhkdXIubWFwVW5pdHMoKHgpID0+IHggKiBpZHgpKTtcbiAgICAgIG5leHQgPSArYWRkZWQgPiArdGhpcy5lID8gdGhpcy5lIDogYWRkZWQ7XG4gICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBuZXh0KSk7XG4gICAgICBzID0gbmV4dDtcbiAgICAgIGlkeCArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBzbWFsbGVyIGludGVydmFscy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mUGFydHMgLSBUaGUgbnVtYmVyIG9mIEludGVydmFscyB0byBkaXZpZGUgdGhlIEludGVydmFsIGludG8uXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZGl2aWRlRXF1YWxseShudW1iZXJPZlBhcnRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gdGhpcy5zcGxpdEJ5KHRoaXMubGVuZ3RoKCkgLyBudW1iZXJPZlBhcnRzKS5zbGljZSgwLCBudW1iZXJPZlBhcnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIG92ZXJsYXBzIHdpdGggdGhlIHNwZWNpZmllZCBJbnRlcnZhbFxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgb3ZlcmxhcHMob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5lID4gb3RoZXIucyAmJiB0aGlzLnMgPCBvdGhlci5lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIHN0YXJ0LlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYWJ1dHNTdGFydChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICt0aGlzLmUgPT09ICtvdGhlci5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3MgZW5kLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYWJ1dHNFbmQob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiArb3RoZXIuZSA9PT0gK3RoaXMucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGVuZ3VsZnMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuZ3VsZnMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gb3RoZXIucyAmJiB0aGlzLmUgPj0gb3RoZXIuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIGFzIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnMuZXF1YWxzKG90aGVyLnMpICYmIHRoaXMuZS5lcXVhbHMob3RoZXIuZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYW5kIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1heGltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1pbmltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuXG4gICAqIFJldHVybnMgbnVsbCBpZiB0aGUgaW50ZXJzZWN0aW9uIGlzIGVtcHR5LCBtZWFuaW5nLCB0aGUgaW50ZXJ2YWxzIGRvbid0IGludGVyc2VjdC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBpbnRlcnNlY3Rpb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcyA9IHRoaXMucyA+IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLFxuICAgICAgZSA9IHRoaXMuZSA8IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuXG4gICAgaWYgKHMgPj0gZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSB1bmlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtaW5pbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtYXhpbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHVuaW9uKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHMgPSB0aGlzLnMgPCBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgIGUgPSB0aGlzLmUgPiBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLlxuICAgKiBDb21iaW5lcyBvdmVybGFwcGluZyBhbmQgYWRqYWNlbnQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbWVyZ2UoaW50ZXJ2YWxzKSB7XG4gICAgY29uc3QgW2ZvdW5kLCBmaW5hbF0gPSBpbnRlcnZhbHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnMgLSBiLnMpXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW3NvZmFyLCBjdXJyZW50XSwgaXRlbSkgPT4ge1xuICAgICAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtzb2ZhciwgaXRlbV07XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lm92ZXJsYXBzKGl0ZW0pIHx8IGN1cnJlbnQuYWJ1dHNTdGFydChpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtzb2ZhciwgY3VycmVudC51bmlvbihpdGVtKV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbc29mYXIuY29uY2F0KFtjdXJyZW50XSksIGl0ZW1dO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW1tdLCBudWxsXVxuICAgICAgKTtcbiAgICBpZiAoZmluYWwpIHtcbiAgICAgIGZvdW5kLnB1c2goZmluYWwpO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIEludGVydmFscyByZXByZXNlbnRpbmcgdGhlIHNwYW5zIG9mIHRpbWUgdGhhdCBvbmx5IGFwcGVhciBpbiBvbmUgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyB4b3IoaW50ZXJ2YWxzKSB7XG4gICAgbGV0IHN0YXJ0ID0gbnVsbCxcbiAgICAgIGN1cnJlbnRDb3VudCA9IDA7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdLFxuICAgICAgZW5kcyA9IGludGVydmFscy5tYXAoKGkpID0+IFtcbiAgICAgICAgeyB0aW1lOiBpLnMsIHR5cGU6IFwic1wiIH0sXG4gICAgICAgIHsgdGltZTogaS5lLCB0eXBlOiBcImVcIiB9LFxuICAgICAgXSksXG4gICAgICBmbGF0dGVuZWQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmVuZHMpLFxuICAgICAgYXJyID0gZmxhdHRlbmVkLnNvcnQoKGEsIGIpID0+IGEudGltZSAtIGIudGltZSk7XG5cbiAgICBmb3IgKGNvbnN0IGkgb2YgYXJyKSB7XG4gICAgICBjdXJyZW50Q291bnQgKz0gaS50eXBlID09PSBcInNcIiA/IDEgOiAtMTtcblxuICAgICAgaWYgKGN1cnJlbnRDb3VudCA9PT0gMSkge1xuICAgICAgICBzdGFydCA9IGkudGltZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzdGFydCAmJiArc3RhcnQgIT09ICtpLnRpbWUpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCwgaS50aW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEludGVydmFsLm1lcmdlKHJlc3VsdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0gey4uLkludGVydmFsfSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBkaWZmZXJlbmNlKC4uLmludGVydmFscykge1xuICAgIHJldHVybiBJbnRlcnZhbC54b3IoW3RoaXNdLmNvbmNhdChpbnRlcnZhbHMpKVxuICAgICAgLm1hcCgoaSkgPT4gdGhpcy5pbnRlcnNlY3Rpb24oaSkpXG4gICAgICAuZmlsdGVyKChpKSA9PiBpICYmICFpLmlzRW1wdHkoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmcuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYFske3RoaXMucy50b0lTTygpfSBcdTIwMTMgJHt0aGlzLmUudG9JU08oKX0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYXBwcm9wcmlhdGUgZm9yIHRoZSBSRVBMLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gYEludGVydmFsIHsgc3RhcnQ6ICR7dGhpcy5zLnRvSVNPKCl9LCBlbmQ6ICR7dGhpcy5lLnRvSVNPKCl9IH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYEludGVydmFsIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIEludGVydmFsLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlXG4gICAqIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXNcbiAgICoge0BsaW5rIERhdGVUaW1lLkRBVEVfRlVMTH0gb3Ige0BsaW5rIERhdGVUaW1lLlRJTUVfU0lNUExFfS4gVGhlIGV4YWN0IGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kXG4gICAqIGlzIGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBpbiBnZW5lcmFsIGl0IHdpbGwgcmV0dXJuIGFuIGFwcHJvcHJpYXRlIHJlcHJlc2VudGF0aW9uIG9mIHRoZVxuICAgKiBJbnRlcnZhbCBpbiB0aGUgYXNzaWduZWQgbG9jYWxlLiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlblxuICAgKiBzcGVjaWZpZWQuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtmb3JtYXRPcHRzPURhdGVUaW1lLkRBVEVfU0hPUlRdIC0gRWl0aGVyIGEgRGF0ZVRpbWUgcHJlc2V0IG9yXG4gICAqIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBzdGFydCBEYXRlVGltZS5cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QwOTowMFovMjAyMi0xMS0wOFQwOTowMFonKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDExLzcvMjAyMiBcdTIwMTMgMTEvOC8yMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMDk6MDBaLzIwMjItMTEtMDhUMDk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMKTsgLy89PiBOb3ZlbWJlciA3IFx1MjAxMyA4LCAyMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMDk6MDBaLzIwMjItMTEtMDhUMDk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMLCB7IGxvY2FsZTogJ2ZyLUZSJyB9KTsgLy89PiA3XHUyMDEzOCBub3ZlbWJyZSAyMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMTc6MDBaLzIwMjItMTEtMDdUMTk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpOyAvLz0+IDY6MDAgXHUyMDEzIDg6MDAgUE1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QxNzowMFovMjAyMi0xMS0wN1QxOTowMFonKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiBNb24sIE5vdiAwNywgNjowMCBcdTIwMTMgODowMCBwXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvTG9jYWxlU3RyaW5nKGZvcm1hdE9wdHMgPSBGb3JtYXRzLkRBVEVfU0hPUlQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLnMubG9jLmNsb25lKG9wdHMpLCBmb3JtYXRPcHRzKS5mb3JtYXRJbnRlcnZhbCh0aGlzKVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPKG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0lTTyhvcHRzKX0vJHt0aGlzLmUudG9JU08ob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgdGltZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPRGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGltZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgZGF0ZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPVGltZShvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9JU09UaW1lKG9wdHMpfS8ke3RoaXMuZS50b0lTT1RpbWUob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdFxuICAgKiBzdHJpbmcuICoqWW91IG1heSBub3Qgd2FudCB0aGlzLioqIFNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9Mb2NhbGVTdHJpbmd9IGZvciBhIG1vcmUgZmxleGlibGVcbiAgICogZm9ybWF0dGluZyB0b29sLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUZvcm1hdCAtIFRoZSBmb3JtYXQgc3RyaW5nLiBUaGlzIHN0cmluZyBmb3JtYXRzIHRoZSBzdGFydCBhbmQgZW5kIHRpbWUuXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9IGZvciBkZXRhaWxzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyBcdTIwMTMgJ10gLSBBIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kXG4gICAqIHJlcHJlc2VudGF0aW9ucy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Gb3JtYXQoZGF0ZUZvcm1hdCwgeyBzZXBhcmF0b3IgPSBcIiBcdTIwMTMgXCIgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9Gb3JtYXQoZGF0ZUZvcm1hdCl9JHtzZXBhcmF0b3J9JHt0aGlzLmUudG9Gb3JtYXQoZGF0ZUZvcm1hdCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA4ODQ4OTI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ2RheXMnKS50b09iamVjdCgpIC8vPT4geyBkYXlzOiAxLjAyNDE4MTIxNTI3Nzc3NzggfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbihbJ2hvdXJzJywgJ21pbnV0ZXMnLCAnc2Vjb25kcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LCBzZWNvbmRzOiA0OS4yNTcgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCdzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgc2Vjb25kczogODg0ODkuMjU3IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICB0b0R1cmF0aW9uKHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZS5kaWZmKHRoaXMucywgdW5pdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUnVuIG1hcEZuIG9uIHRoZSBpbnRlcnZhbCBzdGFydCBhbmQgZW5kLCByZXR1cm5pbmcgYSBuZXcgSW50ZXJ2YWwgZnJvbSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnRvVVRDKCkpXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpXG4gICAqL1xuICBtYXBFbmRwb2ludHMobWFwRm4pIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhtYXBGbih0aGlzLnMpLCBtYXBGbih0aGlzLmUpKTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVpvbmUgfSBmcm9tIFwiLi9pbXBsL3pvbmVVdGlsLmpzXCI7XG5cbmltcG9ydCB7IGhhc0xvY2FsZVdlZWtJbmZvLCBoYXNSZWxhdGl2ZSB9IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuXG4vKipcbiAqIFRoZSBJbmZvIGNsYXNzIGNvbnRhaW5zIHN0YXRpYyBtZXRob2RzIGZvciByZXRyaWV2aW5nIGdlbmVyYWwgdGltZSBhbmQgZGF0ZSByZWxhdGVkIGRhdGEuIEZvciBleGFtcGxlLCBpdCBoYXMgbWV0aG9kcyBmb3IgZmluZGluZyBvdXQgaWYgYSB0aW1lIHpvbmUgaGFzIGEgRFNULCBmb3IgbGlzdGluZyB0aGUgbW9udGhzIGluIGFueSBzdXBwb3J0ZWQgbG9jYWxlLCBhbmQgZm9yIGRpc2NvdmVyaW5nIHdoaWNoIG9mIEx1eG9uIGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZm8ge1xuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGNvbnRhaW5zIGEgRFNULlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbem9uZT0nbG9jYWwnXSAtIFpvbmUgdG8gY2hlY2suIERlZmF1bHRzIHRvIHRoZSBlbnZpcm9ubWVudCdzIGxvY2FsIHpvbmUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaGFzRFNUKHpvbmUgPSBTZXR0aW5ncy5kZWZhdWx0Wm9uZSkge1xuICAgIGNvbnN0IHByb3RvID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSh6b25lKS5zZXQoeyBtb250aDogMTIgfSk7XG5cbiAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoeyBtb250aDogNiB9KS5vZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGlzIGEgdmFsaWQgSUFOQSBzcGVjaWZpZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gWm9uZSB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7XG4gICAgcmV0dXJuIElBTkFab25lLmlzVmFsaWRab25lKHpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBpbnB1dCBpbnRvIGEge0BsaW5rIFpvbmV9IGluc3RhbmNlLlxuICAgKlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYWxyZWFkeSBhIFpvbmUgaW5zdGFuY2UsIGl0IGlzIHJldHVybmVkIHVuY2hhbmdlZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSB2YWxpZCB0aW1lIHpvbmUgbmFtZSwgYSBab25lIGluc3RhbmNlXG4gICAqICAgd2l0aCB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBhIHN0cmluZyB0aGF0IGRvZXNuJ3QgcmVmZXIgdG8gYSBrbm93biB0aW1lIHpvbmUsIGEgWm9uZVxuICAgKiAgIGluc3RhbmNlIHdpdGgge0BsaW5rIFpvbmUjaXNWYWxpZH0gPT0gZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0IGlzIGEgbnVtYmVyLCBhIFpvbmUgaW5zdGFuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGZpeGVkIG9mZnNldFxuICAgKiAgIGluIG1pbnV0ZXMgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBkZWZhdWx0IHpvbmUgaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV8bnVtYmVyfSBbaW5wdXRdIC0gdGhlIHZhbHVlIHRvIGJlIGNvbnZlcnRlZFxuICAgKiBAcmV0dXJuIHtab25lfVxuICAgKi9cbiAgc3RhdGljIG5vcm1hbGl6ZVpvbmUoaW5wdXQpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplWm9uZShpbnB1dCwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2Vla2RheSBvbiB3aGljaCB0aGUgd2VlayBzdGFydHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBsb2NhbGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybnMge251bWJlcn0gdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrLCAxIGZvciBNb25kYXkgdGhyb3VnaCA3IGZvciBTdW5kYXlcbiAgICovXG4gIHN0YXRpYyBnZXRTdGFydE9mV2Vlayh7IGxvY2FsZSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUpKS5nZXRTdGFydE9mV2VlaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSBudW1iZXIgb2YgZGF5cyBuZWNlc3NhcnkgaW4gYSB3ZWVrIGJlZm9yZSBpdCBpcyBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG5leHQgeWVhciBhY2NvcmRpbmdcbiAgICogdG8gdGhlIGdpdmVuIGxvY2FsZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIGdldE1pbmltdW1EYXlzSW5GaXJzdFdlZWsoeyBsb2NhbGUgPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlKSkuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrZGF5cywgd2hpY2ggYXJlIGNvbnNpZGVyZWQgdGhlIHdlZWtlbmQgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBsb2NhbGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyW119IGFuIGFycmF5IG9mIHdlZWtkYXlzLCAxIGZvciBNb25kYXkgdGhyb3VnaCA3IGZvciBTdW5kYXlcbiAgICovXG4gIHN0YXRpYyBnZXRXZWVrZW5kV2Vla2RheXMoeyBsb2NhbGUgPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIC8vIGNvcHkgdGhlIGFycmF5LCBiZWNhdXNlIHdlIGNhY2hlIGl0IGludGVybmFsbHlcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSkpLmdldFdlZWtlbmREYXlzKCkuc2xpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSBtb250aCBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKClbMF0gLy89PiAnSmFudWFyeSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ3Nob3J0JylbMF0gLy89PiAnSmFuJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycpWzBdIC8vPT4gJzEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdzaG9ydCcsIHsgbG9jYWxlOiAnZnItQ0EnIH0gKVswXSAvLz0+ICdqYW52LidcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ251bWVyaWMnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICdcdTA2NjEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdsb25nJywgeyBvdXRwdXRDYWxlbmRhcjogJ2lzbGFtaWMnIH0pWzBdIC8vPT4gJ1JhYmlcdTAyQkIgSSdcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbW9udGhzKFxuICAgIGxlbmd0aCA9IFwibG9uZ1wiLFxuICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCwgb3V0cHV0Q2FsZW5kYXIgPSBcImdyZWdvcnlcIiB9ID0ge31cbiAgKSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IG1vbnRoIG5hbWVzLlxuICAgKiBGb3JtYXQgbW9udGhzIGRpZmZlciBmcm9tIHN0YW5kYWxvbmUgbW9udGhzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byB0aGUgZGF5IG9mIHRoZSBtb250aC4gSW4gc29tZSBsYW5ndWFnZXMsIHRoYXRcbiAgICogY2hhbmdlcyB0aGUgc3RyaW5nLlxuICAgKiBTZWUge0BsaW5rIEluZm8jbW9udGhzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1vbnRoc0Zvcm1hdChcbiAgICBsZW5ndGggPSBcImxvbmdcIixcbiAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwsIG91dHB1dENhbGVuZGFyID0gXCJncmVnb3J5XCIgfSA9IHt9XG4gICkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIHN0YW5kYWxvbmUgd2VlayBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgd2Vla2RheSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKClbMF0gLy89PiAnTW9uZGF5J1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcpWzBdIC8vPT4gJ01vbidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9KVswXSAvLz0+ICdsdW4uJ1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ1x1MDYyN1x1MDY0NFx1MDYyN1x1MDYyQlx1MDY0Nlx1MDY0QVx1MDY0NidcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgd2Vla2RheXMobGVuZ3RoID0gXCJsb25nXCIsIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IHdlZWsgbmFtZXMuXG4gICAqIEZvcm1hdCB3ZWVrZGF5cyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIHdlZWtkYXlzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byBtb3JlIGRhdGUgaW5mb3JtYXRpb24uIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI3dlZWtkYXlzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9bnVsbF0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyB3ZWVrZGF5c0Zvcm1hdChcbiAgICBsZW5ndGggPSBcImxvbmdcIixcbiAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBtZXJpZGllbXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAZXhhbXBsZSBJbmZvLm1lcmlkaWVtcygpIC8vPT4gWyAnQU0nLCAnUE0nIF1cbiAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoeyBsb2NhbGU6ICdteScgfSkgLy89PiBbICdcdTEwMTRcdTEwMzZcdTEwMTRcdTEwMDBcdTEwM0EnLCAnXHUxMDBBXHUxMDE0XHUxMDMxJyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1lcmlkaWVtcyh7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlKS5tZXJpZGllbXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZXJhcywgc3VjaCBhcyBbJ0JDJywgJ0FEJ10uIFRoZSBsb2NhbGUgY2FuIGJlIHNwZWNpZmllZCwgYnV0IHRoZSBjYWxlbmRhciBzeXN0ZW0gaXMgYWx3YXlzIEdyZWdvcmlhbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J3Nob3J0J10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBlcmEgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJzaG9ydFwiIG9yIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCkgLy89PiBbICdCQycsICdBRCcgXVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnKSAvLz0+IFsgJ0JlZm9yZSBDaHJpc3QnLCAnQW5ubyBEb21pbmknIF1cbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJywgeyBsb2NhbGU6ICdmcicgfSkgLy89PiBbICdhdmFudCBKXHUwMEU5c3VzLUNocmlzdCcsICdhcHJcdTAwRThzIEpcdTAwRTlzdXMtQ2hyaXN0JyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIGVyYXMobGVuZ3RoID0gXCJzaG9ydFwiLCB7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudWxsLCBcImdyZWdvcnlcIikuZXJhcyhsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgc2V0IG9mIGF2YWlsYWJsZSBmZWF0dXJlcyBpbiB0aGlzIGVudmlyb25tZW50LlxuICAgKiBTb21lIGZlYXR1cmVzIG9mIEx1eG9uIGFyZSBub3QgYXZhaWxhYmxlIGluIGFsbCBlbnZpcm9ubWVudHMuIEZvciBleGFtcGxlLCBvbiBvbGRlciBicm93c2VycywgcmVsYXRpdmUgdGltZSBmb3JtYXR0aW5nIHN1cHBvcnQgaXMgbm90IGF2YWlsYWJsZS4gVXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlndXJlIG91dCBpZiB0aGF0J3MgdGhlIGNhc2UuXG4gICAqIEtleXM6XG4gICAqICogYHJlbGF0aXZlYDogd2hldGhlciB0aGlzIGVudmlyb25tZW50IHN1cHBvcnRzIHJlbGF0aXZlIHRpbWUgZm9ybWF0dGluZ1xuICAgKiAqIGBsb2NhbGVXZWVrYDogd2hldGhlciB0aGlzIGVudmlyb25tZW50IHN1cHBvcnRzIGRpZmZlcmVudCB3ZWVrZGF5cyBmb3IgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGJhc2VkIG9uIHRoZSBsb2NhbGVcbiAgICogQGV4YW1wbGUgSW5mby5mZWF0dXJlcygpIC8vPT4geyByZWxhdGl2ZTogZmFsc2UsIGxvY2FsZVdlZWs6IHRydWUgfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZmVhdHVyZXMoKSB7XG4gICAgcmV0dXJuIHsgcmVsYXRpdmU6IGhhc1JlbGF0aXZlKCksIGxvY2FsZVdlZWs6IGhhc0xvY2FsZVdlZWtJbmZvKCkgfTtcbiAgfVxufVxuIiwgImltcG9ydCBEdXJhdGlvbiBmcm9tIFwiLi4vZHVyYXRpb24uanNcIjtcblxuZnVuY3Rpb24gZGF5RGlmZihlYXJsaWVyLCBsYXRlcikge1xuICBjb25zdCB1dGNEYXlTdGFydCA9IChkdCkgPT4gZHQudG9VVEMoMCwgeyBrZWVwTG9jYWxUaW1lOiB0cnVlIH0pLnN0YXJ0T2YoXCJkYXlcIikudmFsdWVPZigpLFxuICAgIG1zID0gdXRjRGF5U3RhcnQobGF0ZXIpIC0gdXRjRGF5U3RhcnQoZWFybGllcik7XG4gIHJldHVybiBNYXRoLmZsb29yKER1cmF0aW9uLmZyb21NaWxsaXMobXMpLmFzKFwiZGF5c1wiKSk7XG59XG5cbmZ1bmN0aW9uIGhpZ2hPcmRlckRpZmZzKGN1cnNvciwgbGF0ZXIsIHVuaXRzKSB7XG4gIGNvbnN0IGRpZmZlcnMgPSBbXG4gICAgW1wieWVhcnNcIiwgKGEsIGIpID0+IGIueWVhciAtIGEueWVhcl0sXG4gICAgW1wicXVhcnRlcnNcIiwgKGEsIGIpID0+IGIucXVhcnRlciAtIGEucXVhcnRlciArIChiLnllYXIgLSBhLnllYXIpICogNF0sXG4gICAgW1wibW9udGhzXCIsIChhLCBiKSA9PiBiLm1vbnRoIC0gYS5tb250aCArIChiLnllYXIgLSBhLnllYXIpICogMTJdLFxuICAgIFtcbiAgICAgIFwid2Vla3NcIixcbiAgICAgIChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGRheXMgPSBkYXlEaWZmKGEsIGIpO1xuICAgICAgICByZXR1cm4gKGRheXMgLSAoZGF5cyAlIDcpKSAvIDc7XG4gICAgICB9LFxuICAgIF0sXG4gICAgW1wiZGF5c1wiLCBkYXlEaWZmXSxcbiAgXTtcblxuICBjb25zdCByZXN1bHRzID0ge307XG4gIGNvbnN0IGVhcmxpZXIgPSBjdXJzb3I7XG4gIGxldCBsb3dlc3RPcmRlciwgaGlnaFdhdGVyO1xuXG4gIC8qIFRoaXMgbG9vcCB0cmllcyB0byBkaWZmIHVzaW5nIGxhcmdlciB1bml0cyBmaXJzdC5cbiAgICAgSWYgd2Ugb3ZlcnNob290LCB3ZSBiYWNrdHJhY2sgYW5kIHRyeSB0aGUgbmV4dCBzbWFsbGVyIHVuaXQuXG4gICAgIFwiY3Vyc29yXCIgc3RhcnRzIG91dCBhdCB0aGUgZWFybGllciB0aW1lc3RhbXAgYW5kIG1vdmVzIGNsb3NlciBhbmQgY2xvc2VyIHRvIFwibGF0ZXJcIlxuICAgICBhcyB3ZSB1c2Ugc21hbGxlciBhbmQgc21hbGxlciB1bml0cy5cbiAgICAgaGlnaFdhdGVyIGtlZXBzIHRyYWNrIG9mIHdoZXJlIHdlIHdvdWxkIGJlIGlmIHdlIGFkZGVkIG9uZSBtb3JlIG9mIHRoZSBzbWFsbGVzdCB1bml0LFxuICAgICB0aGlzIGlzIHVzZWQgbGF0ZXIgdG8gcG90ZW50aWFsbHkgY29udmVydCBhbnkgZGlmZmVyZW5jZSBzbWFsbGVyIHRoYW4gdGhlIHNtYWxsZXN0IGhpZ2hlciBvcmRlciB1bml0XG4gICAgIGludG8gYSBmcmFjdGlvbiBvZiB0aGF0IHNtYWxsZXN0IGhpZ2hlciBvcmRlciB1bml0XG4gICovXG4gIGZvciAoY29uc3QgW3VuaXQsIGRpZmZlcl0gb2YgZGlmZmVycykge1xuICAgIGlmICh1bml0cy5pbmRleE9mKHVuaXQpID49IDApIHtcbiAgICAgIGxvd2VzdE9yZGVyID0gdW5pdDtcblxuICAgICAgcmVzdWx0c1t1bml0XSA9IGRpZmZlcihjdXJzb3IsIGxhdGVyKTtcbiAgICAgIGhpZ2hXYXRlciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcblxuICAgICAgaWYgKGhpZ2hXYXRlciA+IGxhdGVyKSB7XG4gICAgICAgIC8vIHdlIG92ZXJzaG90IHRoZSBlbmQgcG9pbnQsIGJhY2t0cmFjayBjdXJzb3IgYnkgMVxuICAgICAgICByZXN1bHRzW3VuaXRdLS07XG4gICAgICAgIGN1cnNvciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcblxuICAgICAgICAvLyBpZiB3ZSBhcmUgc3RpbGwgb3ZlcnNob290aW5nIG5vdywgd2UgbmVlZCB0byBiYWNrdHJhY2sgYWdhaW5cbiAgICAgICAgLy8gdGhpcyBoYXBwZW5zIGluIGNlcnRhaW4gc2l0dWF0aW9ucyB3aGVuIGRpZmZpbmcgdGltZXMgaW4gZGlmZmVyZW50IHpvbmVzLFxuICAgICAgICAvLyBiZWNhdXNlIHRoaXMgY2FsY3VsYXRpb24gaWdub3JlcyB0aW1lIHpvbmVzXG4gICAgICAgIGlmIChjdXJzb3IgPiBsYXRlcikge1xuICAgICAgICAgIC8vIGtlZXAgdGhlIFwib3ZlcnNob3QgYnkgMVwiIGFyb3VuZCBhcyBoaWdoV2F0ZXJcbiAgICAgICAgICBoaWdoV2F0ZXIgPSBjdXJzb3I7XG4gICAgICAgICAgLy8gYmFja3RyYWNrIGN1cnNvciBieSAxXG4gICAgICAgICAgcmVzdWx0c1t1bml0XS0tO1xuICAgICAgICAgIGN1cnNvciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3Vyc29yID0gaGlnaFdhdGVyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbY3Vyc29yLCByZXN1bHRzLCBoaWdoV2F0ZXIsIGxvd2VzdE9yZGVyXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgb3B0cykge1xuICBsZXQgW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl0gPSBoaWdoT3JkZXJEaWZmcyhlYXJsaWVyLCBsYXRlciwgdW5pdHMpO1xuXG4gIGNvbnN0IHJlbWFpbmluZ01pbGxpcyA9IGxhdGVyIC0gY3Vyc29yO1xuXG4gIGNvbnN0IGxvd2VyT3JkZXJVbml0cyA9IHVuaXRzLmZpbHRlcihcbiAgICAodSkgPT4gW1wiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiXS5pbmRleE9mKHUpID49IDBcbiAgKTtcblxuICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChoaWdoV2F0ZXIgPCBsYXRlcikge1xuICAgICAgaGlnaFdhdGVyID0gY3Vyc29yLnBsdXMoeyBbbG93ZXN0T3JkZXJdOiAxIH0pO1xuICAgIH1cblxuICAgIGlmIChoaWdoV2F0ZXIgIT09IGN1cnNvcikge1xuICAgICAgcmVzdWx0c1tsb3dlc3RPcmRlcl0gPSAocmVzdWx0c1tsb3dlc3RPcmRlcl0gfHwgMCkgKyByZW1haW5pbmdNaWxsaXMgLyAoaGlnaFdhdGVyIC0gY3Vyc29yKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBkdXJhdGlvbiA9IER1cmF0aW9uLmZyb21PYmplY3QocmVzdWx0cywgb3B0cyk7XG5cbiAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIER1cmF0aW9uLmZyb21NaWxsaXMocmVtYWluaW5nTWlsbGlzLCBvcHRzKVxuICAgICAgLnNoaWZ0VG8oLi4ubG93ZXJPcmRlclVuaXRzKVxuICAgICAgLnBsdXMoZHVyYXRpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkdXJhdGlvbjtcbiAgfVxufVxuIiwgImNvbnN0IG51bWJlcmluZ1N5c3RlbXMgPSB7XG4gIGFyYWI6IFwiW1xcdTA2NjAtXFx1MDY2OV1cIixcbiAgYXJhYmV4dDogXCJbXFx1MDZGMC1cXHUwNkY5XVwiLFxuICBiYWxpOiBcIltcXHUxQjUwLVxcdTFCNTldXCIsXG4gIGJlbmc6IFwiW1xcdTA5RTYtXFx1MDlFRl1cIixcbiAgZGV2YTogXCJbXFx1MDk2Ni1cXHUwOTZGXVwiLFxuICBmdWxsd2lkZTogXCJbXFx1RkYxMC1cXHVGRjE5XVwiLFxuICBndWpyOiBcIltcXHUwQUU2LVxcdTBBRUZdXCIsXG4gIGhhbmlkZWM6IFwiW1x1MzAwN3xcdTRFMDB8XHU0RThDfFx1NEUwOXxcdTU2REJ8XHU0RTk0fFx1NTE2RHxcdTRFMDN8XHU1MTZCfFx1NEU1RF1cIixcbiAga2htcjogXCJbXFx1MTdFMC1cXHUxN0U5XVwiLFxuICBrbmRhOiBcIltcXHUwQ0U2LVxcdTBDRUZdXCIsXG4gIGxhb286IFwiW1xcdTBFRDAtXFx1MEVEOV1cIixcbiAgbGltYjogXCJbXFx1MTk0Ni1cXHUxOTRGXVwiLFxuICBtbHltOiBcIltcXHUwRDY2LVxcdTBENkZdXCIsXG4gIG1vbmc6IFwiW1xcdTE4MTAtXFx1MTgxOV1cIixcbiAgbXltcjogXCJbXFx1MTA0MC1cXHUxMDQ5XVwiLFxuICBvcnlhOiBcIltcXHUwQjY2LVxcdTBCNkZdXCIsXG4gIHRhbWxkZWM6IFwiW1xcdTBCRTYtXFx1MEJFRl1cIixcbiAgdGVsdTogXCJbXFx1MEM2Ni1cXHUwQzZGXVwiLFxuICB0aGFpOiBcIltcXHUwRTUwLVxcdTBFNTldXCIsXG4gIHRpYnQ6IFwiW1xcdTBGMjAtXFx1MEYyOV1cIixcbiAgbGF0bjogXCJcXFxcZFwiLFxufTtcblxuY29uc3QgbnVtYmVyaW5nU3lzdGVtc1VURjE2ID0ge1xuICBhcmFiOiBbMTYzMiwgMTY0MV0sXG4gIGFyYWJleHQ6IFsxNzc2LCAxNzg1XSxcbiAgYmFsaTogWzY5OTIsIDcwMDFdLFxuICBiZW5nOiBbMjUzNCwgMjU0M10sXG4gIGRldmE6IFsyNDA2LCAyNDE1XSxcbiAgZnVsbHdpZGU6IFs2NTI5NiwgNjUzMDNdLFxuICBndWpyOiBbMjc5MCwgMjc5OV0sXG4gIGtobXI6IFs2MTEyLCA2MTIxXSxcbiAga25kYTogWzMzMDIsIDMzMTFdLFxuICBsYW9vOiBbMzc5MiwgMzgwMV0sXG4gIGxpbWI6IFs2NDcwLCA2NDc5XSxcbiAgbWx5bTogWzM0MzAsIDM0MzldLFxuICBtb25nOiBbNjE2MCwgNjE2OV0sXG4gIG15bXI6IFs0MTYwLCA0MTY5XSxcbiAgb3J5YTogWzI5MTgsIDI5MjddLFxuICB0YW1sZGVjOiBbMzA0NiwgMzA1NV0sXG4gIHRlbHU6IFszMTc0LCAzMTgzXSxcbiAgdGhhaTogWzM2NjQsIDM2NzNdLFxuICB0aWJ0OiBbMzg3MiwgMzg4MV0sXG59O1xuXG5jb25zdCBoYW5pZGVjQ2hhcnMgPSBudW1iZXJpbmdTeXN0ZW1zLmhhbmlkZWMucmVwbGFjZSgvW1xcW3xcXF1dL2csIFwiXCIpLnNwbGl0KFwiXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEaWdpdHMoc3RyKSB7XG4gIGxldCB2YWx1ZSA9IHBhcnNlSW50KHN0ciwgMTApO1xuICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgdmFsdWUgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgIGlmIChzdHJbaV0uc2VhcmNoKG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYykgIT09IC0xKSB7XG4gICAgICAgIHZhbHVlICs9IGhhbmlkZWNDaGFycy5pbmRleE9mKHN0cltpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBudW1iZXJpbmdTeXN0ZW1zVVRGMTYpIHtcbiAgICAgICAgICBjb25zdCBbbWluLCBtYXhdID0gbnVtYmVyaW5nU3lzdGVtc1VURjE2W2tleV07XG4gICAgICAgICAgaWYgKGNvZGUgPj0gbWluICYmIGNvZGUgPD0gbWF4KSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjb2RlIC0gbWluO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZ2l0UmVnZXgoeyBudW1iZXJpbmdTeXN0ZW0gfSwgYXBwZW5kID0gXCJcIikge1xuICByZXR1cm4gbmV3IFJlZ0V4cChgJHtudW1iZXJpbmdTeXN0ZW1zW251bWJlcmluZ1N5c3RlbSB8fCBcImxhdG5cIl19JHthcHBlbmR9YCk7XG59XG4iLCAiaW1wb3J0IHsgcGFyc2VNaWxsaXMsIGlzVW5kZWZpbmVkLCB1bnRydW5jYXRlWWVhciwgc2lnbmVkT2Zmc2V0LCBoYXNPd25Qcm9wZXJ0eSB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCB7IGRpZ2l0UmVnZXgsIHBhcnNlRGlnaXRzIH0gZnJvbSBcIi4vZGlnaXRzLmpzXCI7XG5pbXBvcnQgeyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcblxuY29uc3QgTUlTU0lOR19GVFAgPSBcIm1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnRcIjtcblxuZnVuY3Rpb24gaW50VW5pdChyZWdleCwgcG9zdCA9IChpKSA9PiBpKSB7XG4gIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcG9zdChwYXJzZURpZ2l0cyhzKSkgfTtcbn1cblxuY29uc3QgTkJTUCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcbmNvbnN0IHNwYWNlT3JOQlNQID0gYFsgJHtOQlNQfV1gO1xuY29uc3Qgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCBcImdcIik7XG5cbmZ1bmN0aW9uIGZpeExpc3RSZWdleChzKSB7XG4gIC8vIG1ha2UgZG90cyBvcHRpb25hbCBhbmQgYWxzbyBtYWtlIHRoZW0gbGl0ZXJhbFxuICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlXG4gIHJldHVybiBzLnJlcGxhY2UoL1xcLi9nLCBcIlxcXFwuP1wiKS5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBzcGFjZU9yTkJTUCk7XG59XG5cbmZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHtcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvXFwuL2csIFwiXCIpIC8vIGlnbm9yZSBkb3RzIHRoYXQgd2VyZSBtYWRlIG9wdGlvbmFsXG4gICAgLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIFwiIFwiKSAvLyBpbnRlcmNoYW5nZSBzcGFjZSBhbmQgbmJzcFxuICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBvbmVPZihzdHJpbmdzLCBzdGFydEluZGV4KSB7XG4gIGlmIChzdHJpbmdzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZ2V4OiBSZWdFeHAoc3RyaW5ncy5tYXAoZml4TGlzdFJlZ2V4KS5qb2luKFwifFwiKSksXG4gICAgICBkZXNlcjogKFtzXSkgPT5cbiAgICAgICAgc3RyaW5ncy5maW5kSW5kZXgoKGkpID0+IHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpID09PSBzdHJpcEluc2Vuc2l0aXZpdGllcyhpKSkgKyBzdGFydEluZGV4LFxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gb2Zmc2V0KHJlZ2V4LCBncm91cHMpIHtcbiAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoWywgaCwgbV0pID0+IHNpZ25lZE9mZnNldChoLCBtKSwgZ3JvdXBzIH07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZShyZWdleCkge1xuICByZXR1cm4geyByZWdleCwgZGVzZXI6IChbc10pID0+IHMgfTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlVG9rZW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1tcXC1cXFtcXF17fSgpKis/LixcXFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gdG9rZW5cbiAqIEBwYXJhbSB7TG9jYWxlfSBsb2NcbiAqL1xuZnVuY3Rpb24gdW5pdEZvclRva2VuKHRva2VuLCBsb2MpIHtcbiAgY29uc3Qgb25lID0gZGlnaXRSZWdleChsb2MpLFxuICAgIHR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsyfVwiKSxcbiAgICB0aHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInszfVwiKSxcbiAgICBmb3VyID0gZGlnaXRSZWdleChsb2MsIFwiezR9XCIpLFxuICAgIHNpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns2fVwiKSxcbiAgICBvbmVPclR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDJ9XCIpLFxuICAgIG9uZVRvVGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSwzfVwiKSxcbiAgICBvbmVUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDZ9XCIpLFxuICAgIG9uZVRvTmluZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDl9XCIpLFxuICAgIHR3b1RvRm91ciA9IGRpZ2l0UmVnZXgobG9jLCBcInsyLDR9XCIpLFxuICAgIGZvdXJUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns0LDZ9XCIpLFxuICAgIGxpdGVyYWwgPSAodCkgPT4gKHsgcmVnZXg6IFJlZ0V4cChlc2NhcGVUb2tlbih0LnZhbCkpLCBkZXNlcjogKFtzXSkgPT4gcywgbGl0ZXJhbDogdHJ1ZSB9KSxcbiAgICB1bml0YXRlID0gKHQpID0+IHtcbiAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBsaXRlcmFsKHQpO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0LnZhbCkge1xuICAgICAgICAvLyBlcmFcbiAgICAgICAgY2FzZSBcIkdcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLmVyYXMoXCJzaG9ydFwiKSwgMCk7XG4gICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcImxvbmdcIiksIDApO1xuICAgICAgICAvLyB5ZWFyc1xuICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvU2l4KTtcbiAgICAgICAgY2FzZSBcInl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAgIGNhc2UgXCJ5eXl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG4gICAgICAgIGNhc2UgXCJ5eXl5eVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXJUb1NpeCk7XG4gICAgICAgIGNhc2UgXCJ5eXl5eXlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChzaXgpO1xuICAgICAgICAvLyBtb250aHNcbiAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcInNob3J0XCIsIHRydWUpLCAxKTtcbiAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcImxvbmdcIiwgdHJ1ZSksIDEpO1xuICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIkxMTFwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcImxvbmdcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgLy8gZGF0ZXNcbiAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJkZFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIC8vIG9yZGluYWxzXG4gICAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lVG9UaHJlZSk7XG4gICAgICAgIGNhc2UgXCJvb29cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0aHJlZSk7XG4gICAgICAgIC8vIHRpbWVcbiAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuICAgICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpO1xuICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgIHJldHVybiBzaW1wbGUob25lVG9OaW5lKTtcbiAgICAgICAgY2FzZSBcInV1XCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpO1xuICAgICAgICAvLyBtZXJpZGllbVxuICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubWVyaWRpZW1zKCksIDApO1xuICAgICAgICAvLyB3ZWVrWWVhciAoaylcbiAgICAgICAgY2FzZSBcImtra2tcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyKTtcbiAgICAgICAgY2FzZSBcImtrXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAgIC8vIHdlZWtOdW1iZXIgKFcpXG4gICAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiV1dcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICAvLyB3ZWVrZGF5c1xuICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7XG4gICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCBmYWxzZSksIDEpO1xuICAgICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcInNob3J0XCIsIHRydWUpLCAxKTtcbiAgICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCB0cnVlKSwgMSk7XG4gICAgICAgIC8vIG9mZnNldC96b25lXG4gICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgIGNhc2UgXCJaWlwiOlxuICAgICAgICAgIHJldHVybiBvZmZzZXQobmV3IFJlZ0V4cChgKFsrLV0ke29uZU9yVHdvLnNvdXJjZX0pKD86Oigke3R3by5zb3VyY2V9KSk/YCksIDIpO1xuICAgICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKGAoWystXSR7b25lT3JUd28uc291cmNlfSkoJHt0d28uc291cmNlfSk/YCksIDIpO1xuICAgICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZ1xuICAgICAgICAvLyBiZWNhdXNlIHdlIGRvbid0IGhhdmUgYW55IHdheSB0byBmaWd1cmUgb3V0IHdoYXQgdGhleSBhcmVcbiAgICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgICByZXR1cm4gc2ltcGxlKC9bYS16XystL117MSwyNTZ9Py9pKTtcbiAgICAgICAgLy8gdGhpcyBzcGVjaWFsLWNhc2UgXCJ0b2tlblwiIHJlcHJlc2VudHMgYSBwbGFjZSB3aGVyZSBhIG1hY3JvLXRva2VuIGV4cGFuZGVkIGludG8gYSB3aGl0ZS1zcGFjZSBsaXRlcmFsXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSB3ZSBhY2NlcHQgYW55IG5vbi1uZXdsaW5lIHdoaXRlLXNwYWNlXG4gICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZSgvW15cXFNcXG5cXHJdLyk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGxpdGVyYWwodCk7XG4gICAgICB9XG4gICAgfTtcblxuICBjb25zdCB1bml0ID0gdW5pdGF0ZSh0b2tlbikgfHwge1xuICAgIGludmFsaWRSZWFzb246IE1JU1NJTkdfRlRQLFxuICB9O1xuXG4gIHVuaXQudG9rZW4gPSB0b2tlbjtcblxuICByZXR1cm4gdW5pdDtcbn1cblxuY29uc3QgcGFydFR5cGVTdHlsZVRvVG9rZW5WYWwgPSB7XG4gIHllYXI6IHtcbiAgICBcIjItZGlnaXRcIjogXCJ5eVwiLFxuICAgIG51bWVyaWM6IFwieXl5eXlcIixcbiAgfSxcbiAgbW9udGg6IHtcbiAgICBudW1lcmljOiBcIk1cIixcbiAgICBcIjItZGlnaXRcIjogXCJNTVwiLFxuICAgIHNob3J0OiBcIk1NTVwiLFxuICAgIGxvbmc6IFwiTU1NTVwiLFxuICB9LFxuICBkYXk6IHtcbiAgICBudW1lcmljOiBcImRcIixcbiAgICBcIjItZGlnaXRcIjogXCJkZFwiLFxuICB9LFxuICB3ZWVrZGF5OiB7XG4gICAgc2hvcnQ6IFwiRUVFXCIsXG4gICAgbG9uZzogXCJFRUVFXCIsXG4gIH0sXG4gIGRheXBlcmlvZDogXCJhXCIsXG4gIGRheVBlcmlvZDogXCJhXCIsXG4gIGhvdXIxMjoge1xuICAgIG51bWVyaWM6IFwiaFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImhoXCIsXG4gIH0sXG4gIGhvdXIyNDoge1xuICAgIG51bWVyaWM6IFwiSFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIkhIXCIsXG4gIH0sXG4gIG1pbnV0ZToge1xuICAgIG51bWVyaWM6IFwibVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIm1tXCIsXG4gIH0sXG4gIHNlY29uZDoge1xuICAgIG51bWVyaWM6IFwic1wiLFxuICAgIFwiMi1kaWdpdFwiOiBcInNzXCIsXG4gIH0sXG4gIHRpbWVab25lTmFtZToge1xuICAgIGxvbmc6IFwiWlpaWlpcIixcbiAgICBzaG9ydDogXCJaWlpcIixcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIHRva2VuRm9yUGFydChwYXJ0LCBmb3JtYXRPcHRzLCByZXNvbHZlZE9wdHMpIHtcbiAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gcGFydDtcblxuICBpZiAodHlwZSA9PT0gXCJsaXRlcmFsXCIpIHtcbiAgICBjb25zdCBpc1NwYWNlID0gL15cXHMrJC8udGVzdCh2YWx1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpdGVyYWw6ICFpc1NwYWNlLFxuICAgICAgdmFsOiBpc1NwYWNlID8gXCIgXCIgOiB2YWx1ZSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgc3R5bGUgPSBmb3JtYXRPcHRzW3R5cGVdO1xuXG4gIC8vIFRoZSB1c2VyIG1pZ2h0IGhhdmUgZXhwbGljaXRseSBzcGVjaWZpZWQgaG91cjEyIG9yIGhvdXJDeWNsZVxuICAvLyBpZiBzbywgcmVzcGVjdCB0aGVpciBkZWNpc2lvblxuICAvLyBpZiBub3QsIHJlZmVyIGJhY2sgdG8gdGhlIHJlc29sdmVkT3B0cywgd2hpY2ggYXJlIGJhc2VkIG9uIHRoZSBsb2NhbGVcbiAgbGV0IGFjdHVhbFR5cGUgPSB0eXBlO1xuICBpZiAodHlwZSA9PT0gXCJob3VyXCIpIHtcbiAgICBpZiAoZm9ybWF0T3B0cy5ob3VyMTIgIT0gbnVsbCkge1xuICAgICAgYWN0dWFsVHlwZSA9IGZvcm1hdE9wdHMuaG91cjEyID8gXCJob3VyMTJcIiA6IFwiaG91cjI0XCI7XG4gICAgfSBlbHNlIGlmIChmb3JtYXRPcHRzLmhvdXJDeWNsZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZm9ybWF0T3B0cy5ob3VyQ3ljbGUgPT09IFwiaDExXCIgfHwgZm9ybWF0T3B0cy5ob3VyQ3ljbGUgPT09IFwiaDEyXCIpIHtcbiAgICAgICAgYWN0dWFsVHlwZSA9IFwiaG91cjEyXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWxUeXBlID0gXCJob3VyMjRcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdG9rZW5zIG9ubHkgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIDI0IGhvdXJzIG9yIG5vdCxcbiAgICAgIC8vIHNvIHdlIGRvIG5vdCBuZWVkIHRvIGNoZWNrIGhvdXJDeWNsZSBoZXJlLCB3aGljaCBpcyBsZXNzIHN1cHBvcnRlZCBhbnl3YXlzXG4gICAgICBhY3R1YWxUeXBlID0gcmVzb2x2ZWRPcHRzLmhvdXIxMiA/IFwiaG91cjEyXCIgOiBcImhvdXIyNFwiO1xuICAgIH1cbiAgfVxuICBsZXQgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbYWN0dWFsVHlwZV07XG4gIGlmICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgdmFsID0gdmFsW3N0eWxlXTtcbiAgfVxuXG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGl0ZXJhbDogZmFsc2UsXG4gICAgICB2YWwsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVnZXgodW5pdHMpIHtcbiAgY29uc3QgcmUgPSB1bml0cy5tYXAoKHUpID0+IHUucmVnZXgpLnJlZHVjZSgoZiwgcikgPT4gYCR7Zn0oJHtyLnNvdXJjZX0pYCwgXCJcIik7XG4gIHJldHVybiBbYF4ke3JlfSRgLCB1bml0c107XG59XG5cbmZ1bmN0aW9uIG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpIHtcbiAgY29uc3QgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTtcblxuICBpZiAobWF0Y2hlcykge1xuICAgIGNvbnN0IGFsbCA9IHt9O1xuICAgIGxldCBtYXRjaEluZGV4ID0gMTtcbiAgICBmb3IgKGNvbnN0IGkgaW4gaGFuZGxlcnMpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShoYW5kbGVycywgaSkpIHtcbiAgICAgICAgY29uc3QgaCA9IGhhbmRsZXJzW2ldLFxuICAgICAgICAgIGdyb3VwcyA9IGguZ3JvdXBzID8gaC5ncm91cHMgKyAxIDogMTtcbiAgICAgICAgaWYgKCFoLmxpdGVyYWwgJiYgaC50b2tlbikge1xuICAgICAgICAgIGFsbFtoLnRva2VuLnZhbFswXV0gPSBoLmRlc2VyKG1hdGNoZXMuc2xpY2UobWF0Y2hJbmRleCwgbWF0Y2hJbmRleCArIGdyb3VwcykpO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoSW5kZXggKz0gZ3JvdXBzO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW21hdGNoZXMsIGFsbF07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFttYXRjaGVzLCB7fV07XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKSB7XG4gIGNvbnN0IHRvRmllbGQgPSAodG9rZW4pID0+IHtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiU1wiOlxuICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XG4gICAgICBjYXNlIFwibVwiOlxuICAgICAgICByZXR1cm4gXCJtaW51dGVcIjtcbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gXCJob3VyXCI7XG4gICAgICBjYXNlIFwiZFwiOlxuICAgICAgICByZXR1cm4gXCJkYXlcIjtcbiAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgIHJldHVybiBcIm9yZGluYWxcIjtcbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICBjYXNlIFwiTVwiOlxuICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgcmV0dXJuIFwieWVhclwiO1xuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtkYXlcIjtcbiAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtOdW1iZXJcIjtcbiAgICAgIGNhc2UgXCJrXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtZZWFyXCI7XG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gXCJxdWFydGVyXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgbGV0IHpvbmUgPSBudWxsO1xuICBsZXQgc3BlY2lmaWNPZmZzZXQ7XG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy56KSkge1xuICAgIHpvbmUgPSBJQU5BWm9uZS5jcmVhdGUobWF0Y2hlcy56KTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5aKSkge1xuICAgIGlmICghem9uZSkge1xuICAgICAgem9uZSA9IG5ldyBGaXhlZE9mZnNldFpvbmUobWF0Y2hlcy5aKTtcbiAgICB9XG4gICAgc3BlY2lmaWNPZmZzZXQgPSBtYXRjaGVzLlo7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMucSkpIHtcbiAgICBtYXRjaGVzLk0gPSAobWF0Y2hlcy5xIC0gMSkgKiAzICsgMTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5oKSkge1xuICAgIGlmIChtYXRjaGVzLmggPCAxMiAmJiBtYXRjaGVzLmEgPT09IDEpIHtcbiAgICAgIG1hdGNoZXMuaCArPSAxMjtcbiAgICB9IGVsc2UgaWYgKG1hdGNoZXMuaCA9PT0gMTIgJiYgbWF0Y2hlcy5hID09PSAwKSB7XG4gICAgICBtYXRjaGVzLmggPSAwO1xuICAgIH1cbiAgfVxuXG4gIGlmIChtYXRjaGVzLkcgPT09IDAgJiYgbWF0Y2hlcy55KSB7XG4gICAgbWF0Y2hlcy55ID0gLW1hdGNoZXMueTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy51KSkge1xuICAgIG1hdGNoZXMuUyA9IHBhcnNlTWlsbGlzKG1hdGNoZXMudSk7XG4gIH1cblxuICBjb25zdCB2YWxzID0gT2JqZWN0LmtleXMobWF0Y2hlcykucmVkdWNlKChyLCBrKSA9PiB7XG4gICAgY29uc3QgZiA9IHRvRmllbGQoayk7XG4gICAgaWYgKGYpIHtcbiAgICAgIHJbZl0gPSBtYXRjaGVzW2tdO1xuICAgIH1cblxuICAgIHJldHVybiByO1xuICB9LCB7fSk7XG5cbiAgcmV0dXJuIFt2YWxzLCB6b25lLCBzcGVjaWZpY09mZnNldF07XG59XG5cbmxldCBkdW1teURhdGVUaW1lQ2FjaGUgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREdW1teURhdGVUaW1lKCkge1xuICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkge1xuICAgIGR1bW15RGF0ZVRpbWVDYWNoZSA9IERhdGVUaW1lLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSk7XG4gIH1cblxuICByZXR1cm4gZHVtbXlEYXRlVGltZUNhY2hlO1xufVxuXG5mdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkge1xuICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbi52YWwpO1xuICBjb25zdCB0b2tlbnMgPSBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgbG9jYWxlKTtcblxuICBpZiAodG9rZW5zID09IG51bGwgfHwgdG9rZW5zLmluY2x1ZGVzKHVuZGVmaW5lZCkpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kTWFjcm9Ub2tlbnModG9rZW5zLCBsb2NhbGUpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4udG9rZW5zLm1hcCgodCkgPT4gbWF5YmVFeHBhbmRNYWNyb1Rva2VuKHQsIGxvY2FsZSkpKTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgY29uc3QgdG9rZW5zID0gZXhwYW5kTWFjcm9Ub2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZvcm1hdCksIGxvY2FsZSksXG4gICAgdW5pdHMgPSB0b2tlbnMubWFwKCh0KSA9PiB1bml0Rm9yVG9rZW4odCwgbG9jYWxlKSksXG4gICAgZGlzcXVhbGlmeWluZ1VuaXQgPSB1bml0cy5maW5kKCh0KSA9PiB0LmludmFsaWRSZWFzb24pO1xuXG4gIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkge1xuICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIGludmFsaWRSZWFzb246IGRpc3F1YWxpZnlpbmdVbml0LmludmFsaWRSZWFzb24gfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbcmVnZXhTdHJpbmcsIGhhbmRsZXJzXSA9IGJ1aWxkUmVnZXgodW5pdHMpLFxuICAgICAgcmVnZXggPSBSZWdFeHAocmVnZXhTdHJpbmcsIFwiaVwiKSxcbiAgICAgIFtyYXdNYXRjaGVzLCBtYXRjaGVzXSA9IG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpLFxuICAgICAgW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXRdID0gbWF0Y2hlc1xuICAgICAgICA/IGRhdGVUaW1lRnJvbU1hdGNoZXMobWF0Y2hlcylcbiAgICAgICAgOiBbbnVsbCwgbnVsbCwgdW5kZWZpbmVkXTtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkobWF0Y2hlcywgXCJhXCIpICYmIGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiSFwiKSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0XCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIHJlZ2V4LCByYXdNYXRjaGVzLCBtYXRjaGVzLCByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0IH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgY29uc3QgeyByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkUmVhc29uIH0gPSBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpO1xuICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSkge1xuICBpZiAoIWZvcm1hdE9wdHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlciA9IEZvcm1hdHRlci5jcmVhdGUobG9jYWxlLCBmb3JtYXRPcHRzKTtcbiAgY29uc3QgZGYgPSBmb3JtYXR0ZXIuZHRGb3JtYXR0ZXIoZ2V0RHVtbXlEYXRlVGltZSgpKTtcbiAgY29uc3QgcGFydHMgPSBkZi5mb3JtYXRUb1BhcnRzKCk7XG4gIGNvbnN0IHJlc29sdmVkT3B0cyA9IGRmLnJlc29sdmVkT3B0aW9ucygpO1xuICByZXR1cm4gcGFydHMubWFwKChwKSA9PiB0b2tlbkZvclBhcnQocCwgZm9ybWF0T3B0cywgcmVzb2x2ZWRPcHRzKSk7XG59XG4iLCAiaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IEluZm8gZnJvbSBcIi4vaW5mby5qc1wiO1xuaW1wb3J0IEZvcm1hdHRlciBmcm9tIFwiLi9pbXBsL2Zvcm1hdHRlci5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vaW1wbC9sb2NhbGUuanNcIjtcbmltcG9ydCB7XG4gIGlzVW5kZWZpbmVkLFxuICBtYXliZUFycmF5LFxuICBpc0RhdGUsXG4gIGlzTnVtYmVyLFxuICBiZXN0QnksXG4gIGRheXNJbk1vbnRoLFxuICBkYXlzSW5ZZWFyLFxuICBpc0xlYXBZZWFyLFxuICB3ZWVrc0luV2Vla1llYXIsXG4gIG5vcm1hbGl6ZU9iamVjdCxcbiAgcm91bmRUbyxcbiAgb2JqVG9Mb2NhbFRTLFxuICBwYWRTdGFydCxcbn0gZnJvbSBcIi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVab25lIH0gZnJvbSBcIi4vaW1wbC96b25lVXRpbC5qc1wiO1xuaW1wb3J0IGRpZmYgZnJvbSBcIi4vaW1wbC9kaWZmLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVJGQzI4MjJEYXRlLCBwYXJzZUlTT0RhdGUsIHBhcnNlSFRUUERhdGUsIHBhcnNlU1FMIH0gZnJvbSBcIi4vaW1wbC9yZWdleFBhcnNlci5qc1wiO1xuaW1wb3J0IHtcbiAgcGFyc2VGcm9tVG9rZW5zLFxuICBleHBsYWluRnJvbVRva2VucyxcbiAgZm9ybWF0T3B0c1RvVG9rZW5zLFxuICBleHBhbmRNYWNyb1Rva2Vucyxcbn0gZnJvbSBcIi4vaW1wbC90b2tlblBhcnNlci5qc1wiO1xuaW1wb3J0IHtcbiAgZ3JlZ29yaWFuVG9XZWVrLFxuICB3ZWVrVG9HcmVnb3JpYW4sXG4gIGdyZWdvcmlhblRvT3JkaW5hbCxcbiAgb3JkaW5hbFRvR3JlZ29yaWFuLFxuICBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YSxcbiAgaGFzSW52YWxpZFdlZWtEYXRhLFxuICBoYXNJbnZhbGlkT3JkaW5hbERhdGEsXG4gIGhhc0ludmFsaWRUaW1lRGF0YSxcbiAgdXNlc0xvY2FsV2Vla1ZhbHVlcyxcbiAgaXNvV2Vla2RheVRvTG9jYWwsXG59IGZyb20gXCIuL2ltcGwvY29udmVyc2lvbnMuanNcIjtcbmltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vaW1wbC9mb3JtYXRzLmpzXCI7XG5pbXBvcnQge1xuICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IsXG4gIEludmFsaWRVbml0RXJyb3IsXG4gIEludmFsaWREYXRlVGltZUVycm9yLFxufSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ltcGwvaW52YWxpZC5qc1wiO1xuXG5jb25zdCBJTlZBTElEID0gXCJJbnZhbGlkIERhdGVUaW1lXCI7XG5jb25zdCBNQVhfREFURSA9IDguNjRlMTU7XG5cbmZ1bmN0aW9uIHVuc3VwcG9ydGVkWm9uZSh6b25lKSB7XG4gIHJldHVybiBuZXcgSW52YWxpZChcInVuc3VwcG9ydGVkIHpvbmVcIiwgYHRoZSB6b25lIFwiJHt6b25lLm5hbWV9XCIgaXMgbm90IHN1cHBvcnRlZGApO1xufVxuXG4vLyB3ZSBjYWNoZSB3ZWVrIGRhdGEgb24gdGhlIERUIG9iamVjdCBhbmQgdGhpcyBpbnRlcm1lZGlhdGVzIHRoZSBjYWNoZVxuLyoqXG4gKiBAcGFyYW0ge0RhdGVUaW1lfSBkdFxuICovXG5mdW5jdGlvbiBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKGR0KSB7XG4gIGlmIChkdC53ZWVrRGF0YSA9PT0gbnVsbCkge1xuICAgIGR0LndlZWtEYXRhID0gZ3JlZ29yaWFuVG9XZWVrKGR0LmMpO1xuICB9XG4gIHJldHVybiBkdC53ZWVrRGF0YTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RhdGVUaW1lfSBkdFxuICovXG5mdW5jdGlvbiBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEoZHQpIHtcbiAgaWYgKGR0LmxvY2FsV2Vla0RhdGEgPT09IG51bGwpIHtcbiAgICBkdC5sb2NhbFdlZWtEYXRhID0gZ3JlZ29yaWFuVG9XZWVrKFxuICAgICAgZHQuYyxcbiAgICAgIGR0LmxvYy5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxcbiAgICAgIGR0LmxvYy5nZXRTdGFydE9mV2VlaygpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gZHQubG9jYWxXZWVrRGF0YTtcbn1cblxuLy8gY2xvbmUgcmVhbGx5IG1lYW5zLCBcIm1ha2UgYSBuZXcgb2JqZWN0IHdpdGggdGhlc2UgbW9kaWZpY2F0aW9uc1wiLiBhbGwgXCJzZXR0ZXJzXCIgcmVhbGx5IHVzZSB0aGlzXG4vLyB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHdoaWxlIG9ubHkgY2hhbmdpbmcgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuZnVuY3Rpb24gY2xvbmUoaW5zdCwgYWx0cykge1xuICBjb25zdCBjdXJyZW50ID0ge1xuICAgIHRzOiBpbnN0LnRzLFxuICAgIHpvbmU6IGluc3Quem9uZSxcbiAgICBjOiBpbnN0LmMsXG4gICAgbzogaW5zdC5vLFxuICAgIGxvYzogaW5zdC5sb2MsXG4gICAgaW52YWxpZDogaW5zdC5pbnZhbGlkLFxuICB9O1xuICByZXR1cm4gbmV3IERhdGVUaW1lKHsgLi4uY3VycmVudCwgLi4uYWx0cywgb2xkOiBjdXJyZW50IH0pO1xufVxuXG4vLyBmaW5kIHRoZSByaWdodCBvZmZzZXQgYSBnaXZlbiBsb2NhbCB0aW1lLiBUaGUgbyBpbnB1dCBpcyBvdXIgZ3Vlc3MsIHdoaWNoIGRldGVybWluZXMgd2hpY2hcbi8vIG9mZnNldCB3ZSdsbCBwaWNrIGluIGFtYmlndW91cyBjYXNlcyAoZS5nLiB0aGVyZSBhcmUgdHdvIDMgQU1zIGIvYyBGYWxsYmFjayBEU1QpXG5mdW5jdGlvbiBmaXhPZmZzZXQobG9jYWxUUywgbywgdHopIHtcbiAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzXG4gIGxldCB1dGNHdWVzcyA9IGxvY2FsVFMgLSBvICogNjAgKiAxMDAwO1xuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGUgem9uZSBtYXRjaGVzIHRoZSBvZmZzZXQgZm9yIHRoaXMgdHNcbiAgY29uc3QgbzIgPSB0ei5vZmZzZXQodXRjR3Vlc3MpO1xuXG4gIC8vIElmIHNvLCBvZmZzZXQgZGlkbid0IGNoYW5nZSBhbmQgd2UncmUgZG9uZVxuICBpZiAobyA9PT0gbzIpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvXTtcbiAgfVxuXG4gIC8vIElmIG5vdCwgY2hhbmdlIHRoZSB0cyBieSB0aGUgZGlmZmVyZW5jZSBpbiB0aGUgb2Zmc2V0XG4gIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwO1xuXG4gIC8vIElmIHRoYXQgZ2l2ZXMgdXMgdGhlIGxvY2FsIHRpbWUgd2Ugd2FudCwgd2UncmUgZG9uZVxuICBjb25zdCBvMyA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7XG4gIGlmIChvMiA9PT0gbzMpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07XG4gIH1cblxuICAvLyBJZiBpdCdzIGRpZmZlcmVudCwgd2UncmUgaW4gYSBob2xlIHRpbWUuIFRoZSBvZmZzZXQgaGFzIGNoYW5nZWQsIGJ1dCB0aGUgd2UgZG9uJ3QgYWRqdXN0IHRoZSB0aW1lXG4gIHJldHVybiBbbG9jYWxUUyAtIE1hdGgubWluKG8yLCBvMykgKiA2MCAqIDEwMDAsIE1hdGgubWF4KG8yLCBvMyldO1xufVxuXG4vLyBjb252ZXJ0IGFuIGVwb2NoIHRpbWVzdGFtcCBpbnRvIGEgY2FsZW5kYXIgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9mZnNldFxuZnVuY3Rpb24gdHNUb09iaih0cywgb2Zmc2V0KSB7XG4gIHRzICs9IG9mZnNldCAqIDYwICogMTAwMDtcblxuICBjb25zdCBkID0gbmV3IERhdGUodHMpO1xuXG4gIHJldHVybiB7XG4gICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIG1vbnRoOiBkLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgIGRheTogZC5nZXRVVENEYXRlKCksXG4gICAgaG91cjogZC5nZXRVVENIb3VycygpLFxuICAgIG1pbnV0ZTogZC5nZXRVVENNaW51dGVzKCksXG4gICAgc2Vjb25kOiBkLmdldFVUQ1NlY29uZHMoKSxcbiAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKSxcbiAgfTtcbn1cblxuLy8gY29udmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGVwb2NoIHRpbWVzdGFtcFxuZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkge1xuICByZXR1cm4gZml4T2Zmc2V0KG9ialRvTG9jYWxUUyhvYmopLCBvZmZzZXQsIHpvbmUpO1xufVxuXG4vLyBjcmVhdGUgYSBuZXcgRFQgaW5zdGFuY2UgYnkgYWRkaW5nIGEgZHVyYXRpb24sIGFkanVzdGluZyBmb3IgRFNUc1xuZnVuY3Rpb24gYWRqdXN0VGltZShpbnN0LCBkdXIpIHtcbiAgY29uc3Qgb1ByZSA9IGluc3QubyxcbiAgICB5ZWFyID0gaW5zdC5jLnllYXIgKyBNYXRoLnRydW5jKGR1ci55ZWFycyksXG4gICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMyxcbiAgICBjID0ge1xuICAgICAgLi4uaW5zdC5jLFxuICAgICAgeWVhcixcbiAgICAgIG1vbnRoLFxuICAgICAgZGF5OlxuICAgICAgICBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICtcbiAgICAgICAgTWF0aC50cnVuYyhkdXIuZGF5cykgK1xuICAgICAgICBNYXRoLnRydW5jKGR1ci53ZWVrcykgKiA3LFxuICAgIH0sXG4gICAgbWlsbGlzVG9BZGQgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtcbiAgICAgIHllYXJzOiBkdXIueWVhcnMgLSBNYXRoLnRydW5jKGR1ci55ZWFycyksXG4gICAgICBxdWFydGVyczogZHVyLnF1YXJ0ZXJzIC0gTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpLFxuICAgICAgbW9udGhzOiBkdXIubW9udGhzIC0gTWF0aC50cnVuYyhkdXIubW9udGhzKSxcbiAgICAgIHdlZWtzOiBkdXIud2Vla3MgLSBNYXRoLnRydW5jKGR1ci53ZWVrcyksXG4gICAgICBkYXlzOiBkdXIuZGF5cyAtIE1hdGgudHJ1bmMoZHVyLmRheXMpLFxuICAgICAgaG91cnM6IGR1ci5ob3VycyxcbiAgICAgIG1pbnV0ZXM6IGR1ci5taW51dGVzLFxuICAgICAgc2Vjb25kczogZHVyLnNlY29uZHMsXG4gICAgICBtaWxsaXNlY29uZHM6IGR1ci5taWxsaXNlY29uZHMsXG4gICAgfSkuYXMoXCJtaWxsaXNlY29uZHNcIiksXG4gICAgbG9jYWxUUyA9IG9ialRvTG9jYWxUUyhjKTtcblxuICBsZXQgW3RzLCBvXSA9IGZpeE9mZnNldChsb2NhbFRTLCBvUHJlLCBpbnN0LnpvbmUpO1xuXG4gIGlmIChtaWxsaXNUb0FkZCAhPT0gMCkge1xuICAgIHRzICs9IG1pbGxpc1RvQWRkO1xuICAgIC8vIHRoYXQgY291bGQgaGF2ZSBjaGFuZ2VkIHRoZSBvZmZzZXQgYnkgZ29pbmcgb3ZlciBhIERTVCwgYnV0IHdlIHdhbnQgdG8ga2VlcCB0aGUgdHMgdGhlIHNhbWVcbiAgICBvID0gaW5zdC56b25lLm9mZnNldCh0cyk7XG4gIH1cblxuICByZXR1cm4geyB0cywgbyB9O1xufVxuXG4vLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXNcbi8vIGJ5IGhhbmRsaW5nIHRoZSB6b25lIG9wdGlvbnNcbmZ1bmN0aW9uIHBhcnNlRGF0YVRvRGF0ZVRpbWUocGFyc2VkLCBwYXJzZWRab25lLCBvcHRzLCBmb3JtYXQsIHRleHQsIHNwZWNpZmljT2Zmc2V0KSB7XG4gIGNvbnN0IHsgc2V0Wm9uZSwgem9uZSB9ID0gb3B0cztcbiAgaWYgKChwYXJzZWQgJiYgT2JqZWN0LmtleXMocGFyc2VkKS5sZW5ndGggIT09IDApIHx8IHBhcnNlZFpvbmUpIHtcbiAgICBjb25zdCBpbnRlcnByZXRhdGlvblpvbmUgPSBwYXJzZWRab25lIHx8IHpvbmUsXG4gICAgICBpbnN0ID0gRGF0ZVRpbWUuZnJvbU9iamVjdChwYXJzZWQsIHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgem9uZTogaW50ZXJwcmV0YXRpb25ab25lLFxuICAgICAgICBzcGVjaWZpY09mZnNldCxcbiAgICAgIH0pO1xuICAgIHJldHVybiBzZXRab25lID8gaW5zdCA6IGluc3Quc2V0Wm9uZSh6b25lKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcbiAgICAgIG5ldyBJbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyAke2Zvcm1hdH1gKVxuICAgICk7XG4gIH1cbn1cblxuLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyXG4vLyBoZWxwcyBoYW5kbGUgdGhlIGRldGFpbHNcbmZ1bmN0aW9uIHRvVGVjaEZvcm1hdChkdCwgZm9ybWF0LCBhbGxvd1ogPSB0cnVlKSB7XG4gIHJldHVybiBkdC5pc1ZhbGlkXG4gICAgPyBGb3JtYXR0ZXIuY3JlYXRlKExvY2FsZS5jcmVhdGUoXCJlbi1VU1wiKSwge1xuICAgICAgICBhbGxvd1osXG4gICAgICAgIGZvcmNlU2ltcGxlOiB0cnVlLFxuICAgICAgfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmb3JtYXQpXG4gICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b0lTT0RhdGUobywgZXh0ZW5kZWQpIHtcbiAgY29uc3QgbG9uZ0Zvcm1hdCA9IG8uYy55ZWFyID4gOTk5OSB8fCBvLmMueWVhciA8IDA7XG4gIGxldCBjID0gXCJcIjtcbiAgaWYgKGxvbmdGb3JtYXQgJiYgby5jLnllYXIgPj0gMCkgYyArPSBcIitcIjtcbiAgYyArPSBwYWRTdGFydChvLmMueWVhciwgbG9uZ0Zvcm1hdCA/IDYgOiA0KTtcblxuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH1cbiAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIHRvSVNPVGltZShcbiAgbyxcbiAgZXh0ZW5kZWQsXG4gIHN1cHByZXNzU2Vjb25kcyxcbiAgc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gIGluY2x1ZGVPZmZzZXQsXG4gIGV4dGVuZGVkWm9uZVxuKSB7XG4gIGxldCBjID0gcGFkU3RhcnQoby5jLmhvdXIpO1xuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiOlwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG4gICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCBvLmMuc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc1NlY29uZHMpIHtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG4gIH1cblxuICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8IG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLnNlY29uZCk7XG5cbiAgICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc01pbGxpc2Vjb25kcykge1xuICAgICAgYyArPSBcIi5cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbGxpc2Vjb25kLCAzKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5jbHVkZU9mZnNldCkge1xuICAgIGlmIChvLmlzT2Zmc2V0Rml4ZWQgJiYgby5vZmZzZXQgPT09IDAgJiYgIWV4dGVuZGVkWm9uZSkge1xuICAgICAgYyArPSBcIlpcIjtcbiAgICB9IGVsc2UgaWYgKG8ubyA8IDApIHtcbiAgICAgIGMgKz0gXCItXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoLW8ubyAvIDYwKSk7XG4gICAgICBjICs9IFwiOlwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gJSA2MCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjICs9IFwiK1wiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKG8ubyAvIDYwKSk7XG4gICAgICBjICs9IFwiOlwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKG8ubyAlIDYwKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGV4dGVuZGVkWm9uZSkge1xuICAgIGMgKz0gXCJbXCIgKyBvLnpvbmUuaWFuYU5hbWUgKyBcIl1cIjtcbiAgfVxuICByZXR1cm4gYztcbn1cblxuLy8gZGVmYXVsdHMgZm9yIHVuc3BlY2lmaWVkIHVuaXRzIGluIHRoZSBzdXBwb3J0ZWQgY2FsZW5kYXJzXG5jb25zdCBkZWZhdWx0VW5pdFZhbHVlcyA9IHtcbiAgICBtb250aDogMSxcbiAgICBkYXk6IDEsXG4gICAgaG91cjogMCxcbiAgICBtaW51dGU6IDAsXG4gICAgc2Vjb25kOiAwLFxuICAgIG1pbGxpc2Vjb25kOiAwLFxuICB9LFxuICBkZWZhdWx0V2Vla1VuaXRWYWx1ZXMgPSB7XG4gICAgd2Vla051bWJlcjogMSxcbiAgICB3ZWVrZGF5OiAxLFxuICAgIGhvdXI6IDAsXG4gICAgbWludXRlOiAwLFxuICAgIHNlY29uZDogMCxcbiAgICBtaWxsaXNlY29uZDogMCxcbiAgfSxcbiAgZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzID0ge1xuICAgIG9yZGluYWw6IDEsXG4gICAgaG91cjogMCxcbiAgICBtaW51dGU6IDAsXG4gICAgc2Vjb25kOiAwLFxuICAgIG1pbGxpc2Vjb25kOiAwLFxuICB9O1xuXG4vLyBVbml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycywgc29ydGVkIGJ5IGJpZ25lc3NcbmNvbnN0IG9yZGVyZWRVbml0cyA9IFtcInllYXJcIiwgXCJtb250aFwiLCBcImRheVwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXSxcbiAgb3JkZXJlZFdlZWtVbml0cyA9IFtcbiAgICBcIndlZWtZZWFyXCIsXG4gICAgXCJ3ZWVrTnVtYmVyXCIsXG4gICAgXCJ3ZWVrZGF5XCIsXG4gICAgXCJob3VyXCIsXG4gICAgXCJtaW51dGVcIixcbiAgICBcInNlY29uZFwiLFxuICAgIFwibWlsbGlzZWNvbmRcIixcbiAgXSxcbiAgb3JkZXJlZE9yZGluYWxVbml0cyA9IFtcInllYXJcIiwgXCJvcmRpbmFsXCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdO1xuXG4vLyBzdGFuZGFyZGl6ZSBjYXNlIGFuZCBwbHVyYWxpdHkgaW4gdW5pdHNcbmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXQodW5pdCkge1xuICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIHllYXI6IFwieWVhclwiLFxuICAgIHllYXJzOiBcInllYXJcIixcbiAgICBtb250aDogXCJtb250aFwiLFxuICAgIG1vbnRoczogXCJtb250aFwiLFxuICAgIGRheTogXCJkYXlcIixcbiAgICBkYXlzOiBcImRheVwiLFxuICAgIGhvdXI6IFwiaG91clwiLFxuICAgIGhvdXJzOiBcImhvdXJcIixcbiAgICBtaW51dGU6IFwibWludXRlXCIsXG4gICAgbWludXRlczogXCJtaW51dGVcIixcbiAgICBxdWFydGVyOiBcInF1YXJ0ZXJcIixcbiAgICBxdWFydGVyczogXCJxdWFydGVyXCIsXG4gICAgc2Vjb25kOiBcInNlY29uZFwiLFxuICAgIHNlY29uZHM6IFwic2Vjb25kXCIsXG4gICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRcIixcbiAgICBtaWxsaXNlY29uZHM6IFwibWlsbGlzZWNvbmRcIixcbiAgICB3ZWVrZGF5OiBcIndlZWtkYXlcIixcbiAgICB3ZWVrZGF5czogXCJ3ZWVrZGF5XCIsXG4gICAgd2Vla251bWJlcjogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla3NudW1iZXI6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWtudW1iZXJzOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVreWVhcjogXCJ3ZWVrWWVhclwiLFxuICAgIHdlZWt5ZWFyczogXCJ3ZWVrWWVhclwiLFxuICAgIG9yZGluYWw6IFwib3JkaW5hbFwiLFxuICB9W3VuaXQudG9Mb3dlckNhc2UoKV07XG5cbiAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcblxuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVW5pdFdpdGhMb2NhbFdlZWtzKHVuaXQpIHtcbiAgc3dpdGNoICh1bml0LnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlIFwibG9jYWx3ZWVrZGF5XCI6XG4gICAgY2FzZSBcImxvY2Fsd2Vla2RheXNcIjpcbiAgICAgIHJldHVybiBcImxvY2FsV2Vla2RheVwiO1xuICAgIGNhc2UgXCJsb2NhbHdlZWtudW1iZXJcIjpcbiAgICBjYXNlIFwibG9jYWx3ZWVrbnVtYmVyc1wiOlxuICAgICAgcmV0dXJuIFwibG9jYWxXZWVrTnVtYmVyXCI7XG4gICAgY2FzZSBcImxvY2Fsd2Vla3llYXJcIjpcbiAgICBjYXNlIFwibG9jYWx3ZWVreWVhcnNcIjpcbiAgICAgIHJldHVybiBcImxvY2FsV2Vla1llYXJcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVVuaXQodW5pdCk7XG4gIH1cbn1cblxuLy8gdGhpcyBpcyBhIGR1bWJlZCBkb3duIHZlcnNpb24gb2YgZnJvbU9iamVjdCgpIHRoYXQgcnVucyBhYm91dCA2MCUgZmFzdGVyXG4vLyBidXQgZG9lc24ndCBkbyBhbnkgdmFsaWRhdGlvbiwgbWFrZXMgYSBidW5jaCBvZiBhc3N1bXB0aW9ucyBhYm91dCB3aGF0IHVuaXRzXG4vLyBhcmUgcHJlc2VudCwgYW5kIHNvIG9uLlxuZnVuY3Rpb24gcXVpY2tEVChvYmosIG9wdHMpIHtcbiAgY29uc3Qgem9uZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyksXG4gICAgdHNOb3cgPSBTZXR0aW5ncy5ub3coKTtcblxuICBsZXQgdHMsIG87XG5cbiAgLy8gYXNzdW1lIHdlIGhhdmUgdGhlIGhpZ2hlci1vcmRlciB1bml0c1xuICBpZiAoIWlzVW5kZWZpbmVkKG9iai55ZWFyKSkge1xuICAgIGZvciAoY29uc3QgdSBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChvYmpbdV0pKSB7XG4gICAgICAgIG9ialt1XSA9IGRlZmF1bHRVbml0VmFsdWVzW3VdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHx8IGhhc0ludmFsaWRUaW1lRGF0YShvYmopO1xuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZzZXRQcm92aXMgPSB6b25lLm9mZnNldCh0c05vdyk7XG4gICAgW3RzLCBvXSA9IG9ialRvVFMob2JqLCBvZmZzZXRQcm92aXMsIHpvbmUpO1xuICB9IGVsc2Uge1xuICAgIHRzID0gdHNOb3c7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGVUaW1lKHsgdHMsIHpvbmUsIGxvYywgbyB9KTtcbn1cblxuZnVuY3Rpb24gZGlmZlJlbGF0aXZlKHN0YXJ0LCBlbmQsIG9wdHMpIHtcbiAgY29uc3Qgcm91bmQgPSBpc1VuZGVmaW5lZChvcHRzLnJvdW5kKSA/IHRydWUgOiBvcHRzLnJvdW5kLFxuICAgIGZvcm1hdCA9IChjLCB1bml0KSA9PiB7XG4gICAgICBjID0gcm91bmRUbyhjLCByb3VuZCB8fCBvcHRzLmNhbGVuZGFyeSA/IDAgOiAyLCB0cnVlKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlciA9IGVuZC5sb2MuY2xvbmUob3B0cykucmVsRm9ybWF0dGVyKG9wdHMpO1xuICAgICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoYywgdW5pdCk7XG4gICAgfSxcbiAgICBkaWZmZXIgPSAodW5pdCkgPT4ge1xuICAgICAgaWYgKG9wdHMuY2FsZW5kYXJ5KSB7XG4gICAgICAgIGlmICghZW5kLmhhc1NhbWUoc3RhcnQsIHVuaXQpKSB7XG4gICAgICAgICAgcmV0dXJuIGVuZC5zdGFydE9mKHVuaXQpLmRpZmYoc3RhcnQuc3RhcnRPZih1bml0KSwgdW5pdCkuZ2V0KHVuaXQpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gIGlmIChvcHRzLnVuaXQpIHtcbiAgICByZXR1cm4gZm9ybWF0KGRpZmZlcihvcHRzLnVuaXQpLCBvcHRzLnVuaXQpO1xuICB9XG5cbiAgZm9yIChjb25zdCB1bml0IG9mIG9wdHMudW5pdHMpIHtcbiAgICBjb25zdCBjb3VudCA9IGRpZmZlcih1bml0KTtcbiAgICBpZiAoTWF0aC5hYnMoY291bnQpID49IDEpIHtcbiAgICAgIHJldHVybiBmb3JtYXQoY291bnQsIHVuaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZm9ybWF0KHN0YXJ0ID4gZW5kID8gLTAgOiAwLCBvcHRzLnVuaXRzW29wdHMudW5pdHMubGVuZ3RoIC0gMV0pO1xufVxuXG5mdW5jdGlvbiBsYXN0T3B0cyhhcmdMaXN0KSB7XG4gIGxldCBvcHRzID0ge30sXG4gICAgYXJncztcbiAgaWYgKGFyZ0xpc3QubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnTGlzdFthcmdMaXN0Lmxlbmd0aCAtIDFdID09PSBcIm9iamVjdFwiKSB7XG4gICAgb3B0cyA9IGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXTtcbiAgICBhcmdzID0gQXJyYXkuZnJvbShhcmdMaXN0KS5zbGljZSgwLCBhcmdMaXN0Lmxlbmd0aCAtIDEpO1xuICB9IGVsc2Uge1xuICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpO1xuICB9XG4gIHJldHVybiBbb3B0cywgYXJnc107XG59XG5cbi8qKlxuICogQSBEYXRlVGltZSBpcyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgZGF0ZSBhbmQgdGltZSBhbmQgYWNjb21wYW55aW5nIG1ldGhvZHMuIEl0IGNvbnRhaW5zIGNsYXNzIGFuZCBpbnN0YW5jZSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLlxuICpcbiAqIEEgRGF0ZVRpbWUgY29tcHJpc2VzIG9mOlxuICogKiBBIHRpbWVzdGFtcC4gRWFjaCBEYXRlVGltZSBpbnN0YW5jZSByZWZlcnMgdG8gYSBzcGVjaWZpYyBtaWxsaXNlY29uZCBvZiB0aGUgVW5peCBlcG9jaC5cbiAqICogQSB0aW1lIHpvbmUuIEVhY2ggaW5zdGFuY2UgaXMgY29uc2lkZXJlZCBpbiB0aGUgY29udGV4dCBvZiBhIHNwZWNpZmljIHpvbmUgKGJ5IGRlZmF1bHQgdGhlIGxvY2FsIHN5c3RlbSdzIHpvbmUpLlxuICogKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXMgdGhhdCBlZmZlY3QgaG93IG91dHB1dCBzdHJpbmdzIGFyZSBmb3JtYXR0ZWQsIHN1Y2ggYXMgYGxvY2FsZWAsIGBudW1iZXJpbmdTeXN0ZW1gLCBhbmQgYG91dHB1dENhbGVuZGFyYC5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBmdW5jdGlvbmFsaXR5IGl0IHByb3ZpZGVzOlxuICpcbiAqICogKipDcmVhdGlvbioqOiBUbyBjcmVhdGUgYSBEYXRlVGltZSBmcm9tIGl0cyBjb21wb25lbnRzLCB1c2Ugb25lIG9mIGl0cyBmYWN0b3J5IGNsYXNzIG1ldGhvZHM6IHtAbGluayBEYXRlVGltZS5sb2NhbH0sIHtAbGluayBEYXRlVGltZS51dGN9LCBhbmQgKG1vc3QgZmxleGlibHkpIHtAbGluayBEYXRlVGltZS5mcm9tT2JqZWN0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgc3RhbmRhcmQgc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tSVNPfSwge0BsaW5rIERhdGVUaW1lLmZyb21IVFRQfSwgYW5kIHtAbGluayBEYXRlVGltZS5mcm9tUkZDMjgyMn0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIGN1c3RvbSBzdHJpbmcgZm9ybWF0LCB1c2Uge0BsaW5rIERhdGVUaW1lLmZyb21Gb3JtYXR9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBuYXRpdmUgSlMgZGF0ZSwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tSlNEYXRlfS5cbiAqICogKipHcmVnb3JpYW4gY2FsZW5kYXIgYW5kIHRpbWUqKjogVG8gZXhhbWluZSB0aGUgR3JlZ29yaWFuIHByb3BlcnRpZXMgb2YgYSBEYXRlVGltZSBpbmRpdmlkdWFsbHkgKGkuZSBhcyBvcHBvc2VkIHRvIGNvbGxlY3RpdmVseSB0aHJvdWdoIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0pLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN5ZWFyfSwge0BsaW5rIERhdGVUaW1lI21vbnRofSxcbiAqIHtAbGluayBEYXRlVGltZSNkYXl9LCB7QGxpbmsgRGF0ZVRpbWUjaG91cn0sIHtAbGluayBEYXRlVGltZSNtaW51dGV9LCB7QGxpbmsgRGF0ZVRpbWUjc2Vjb25kfSwge0BsaW5rIERhdGVUaW1lI21pbGxpc2Vjb25kfSBhY2Nlc3NvcnMuXG4gKiAqICoqV2VlayBjYWxlbmRhcioqOiBGb3IgSVNPIHdlZWsgY2FsZW5kYXIgYXR0cmlidXRlcywgc2VlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjd2Vla1llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjd2Vla051bWJlcn0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjd2Vla2RheX0gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgdGhlIHtAbGluayBEYXRlVGltZSNsb2NhbGV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKjogVG8gdHJhbnNmb3JtIHRoZSBEYXRlVGltZSBpbnRvIG90aGVyIERhdGVUaW1lcywgdXNlIHtAbGluayBEYXRlVGltZSNzZXR9LCB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0sIHtAbGluayBEYXRlVGltZSNzZXRMb2NhbGV9LCB7QGxpbmsgRGF0ZVRpbWUucGx1c30sIHtAbGluayBEYXRlVGltZSNtaW51c30sIHtAbGluayBEYXRlVGltZSNlbmRPZn0sIHtAbGluayBEYXRlVGltZSNzdGFydE9mfSwge0BsaW5rIERhdGVUaW1lI3RvVVRDfSwgYW5kIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfS5cbiAqICogKipPdXRwdXQqKjogVG8gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlfSwge0BsaW5rIERhdGVUaW1lI3RvUmVsYXRpdmVDYWxlbmRhcn0sIHtAbGluayBEYXRlVGltZSN0b0pTT059LCB7QGxpbmsgRGF0ZVRpbWUjdG9JU099LCB7QGxpbmsgRGF0ZVRpbWUjdG9IVFRQfSwge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSwge0BsaW5rIERhdGVUaW1lI3RvUkZDMjgyMn0sIHtAbGluayBEYXRlVGltZSN0b1N0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0sIHtAbGluayBEYXRlVGltZSN0b01pbGxpc30gYW5kIHtAbGluayBEYXRlVGltZSN0b0pTRGF0ZX0uXG4gKlxuICogVGhlcmUncyBwbGVudHkgb3RoZXJzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uLCB0aW1lIHpvbmVzLCBhbHRlcm5hdGl2ZSBjYWxlbmRhcnMsIHZhbGlkaXR5LCBhbmQgc28gb24sIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVRpbWUge1xuICAvKipcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCB6b25lID0gY29uZmlnLnpvbmUgfHwgU2V0dGluZ3MuZGVmYXVsdFpvbmU7XG5cbiAgICBsZXQgaW52YWxpZCA9XG4gICAgICBjb25maWcuaW52YWxpZCB8fFxuICAgICAgKE51bWJlci5pc05hTihjb25maWcudHMpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbCkgfHxcbiAgICAgICghem9uZS5pc1ZhbGlkID8gdW5zdXBwb3J0ZWRab25lKHpvbmUpIDogbnVsbCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cyA9IGlzVW5kZWZpbmVkKGNvbmZpZy50cykgPyBTZXR0aW5ncy5ub3coKSA6IGNvbmZpZy50cztcblxuICAgIGxldCBjID0gbnVsbCxcbiAgICAgIG8gPSBudWxsO1xuICAgIGlmICghaW52YWxpZCkge1xuICAgICAgY29uc3QgdW5jaGFuZ2VkID0gY29uZmlnLm9sZCAmJiBjb25maWcub2xkLnRzID09PSB0aGlzLnRzICYmIGNvbmZpZy5vbGQuem9uZS5lcXVhbHMoem9uZSk7XG5cbiAgICAgIGlmICh1bmNoYW5nZWQpIHtcbiAgICAgICAgW2MsIG9dID0gW2NvbmZpZy5vbGQuYywgY29uZmlnLm9sZC5vXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG90ID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIGMgPSB0c1RvT2JqKHRoaXMudHMsIG90KTtcbiAgICAgICAgaW52YWxpZCA9IE51bWJlci5pc05hTihjLnllYXIpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbDtcbiAgICAgICAgYyA9IGludmFsaWQgPyBudWxsIDogYztcbiAgICAgICAgbyA9IGludmFsaWQgPyBudWxsIDogb3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fem9uZSA9IHpvbmU7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sb2MgPSBjb25maWcubG9jIHx8IExvY2FsZS5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludmFsaWQgPSBpbnZhbGlkO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMud2Vla0RhdGEgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9jYWxXZWVrRGF0YSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jID0gYztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm8gPSBvO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaXNMdXhvbkRhdGVUaW1lID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIENPTlNUUlVDVFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmb3IgdGhlIGN1cnJlbnQgaW5zdGFudCwgaW4gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICpcbiAgICogVXNlIFNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGlmIG5lZWRlZC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oKSAvL34+IG5vdyBpbiB0aGUgSVNPIGZvcm1hdFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7fSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbG9jYWwgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgbG9jYWwoKWAgd2l0aCBubyBhcmd1bWVudHMpLCB0aGUgY3VycmVudCB0aW1lIHdpbGwgYmUgdXNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaG91cj0wXSAtIFRoZSBob3VyIG9mIHRoZSBkYXksIGluIDI0LWhvdXIgdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZD0wXSAtIFRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWlsbGlzZWNvbmQ9MF0gLSBUaGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKHsgem9uZTogXCJBbWVyaWNhL05ld19Zb3JrXCIgfSkgICAgICAvL34+IG5vdywgaW4gVVMgZWFzdCBjb2FzdCB0aW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDAsIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1KSAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCB7IHpvbmU6IFwidXRjXCIgfSkgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDAsIGluIFVUQ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUpICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgbG9jYWwoKSB7XG4gICAgY29uc3QgW29wdHMsIGFyZ3NdID0gbGFzdE9wdHMoYXJndW1lbnRzKSxcbiAgICAgIFt5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmRdID0gYXJncztcbiAgICByZXR1cm4gcXVpY2tEVCh7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBpbiBVVENcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgdXRjKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb250aD0xXSAtIFRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWludXRlPTBdIC0gVGhlIG1pbnV0ZSBvZiB0aGUgaG91ciwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc2Vjb25kPTBdIC0gVGhlIHNlY29uZCBvZiB0aGUgbWludXRlLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubnVtYmVyaW5nU3lzdGVtXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFogd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCwgNzY1LCB7IGxvY2FsZTogXCJmclwiIH0pIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVaIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIHV0YygpIHtcbiAgICBjb25zdCBbb3B0cywgYXJnc10gPSBsYXN0T3B0cyhhcmd1bWVudHMpLFxuICAgICAgW3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF0gPSBhcmdzO1xuXG4gICAgb3B0cy56b25lID0gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlO1xuICAgIHJldHVybiBxdWlja0RUKHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0sIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0LiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSAtIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSlNEYXRlKGRhdGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRzID0gaXNEYXRlKGRhdGUpID8gZGF0ZS52YWx1ZU9mKCkgOiBOYU47XG4gICAgaWYgKE51bWJlci5pc05hTih0cykpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB6b25lVG9Vc2UgPSBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICAgIGlmICghem9uZVRvVXNlLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgIHRzOiB0cyxcbiAgICAgIHpvbmU6IHpvbmVUb1VzZSxcbiAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucyksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pbGxpc2Vjb25kcyAtIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tTWlsbGlzKG1pbGxpc2Vjb25kcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFpc051bWJlcihtaWxsaXNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgIGBmcm9tTWlsbGlzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0LCBidXQgcmVjZWl2ZWQgYSAke3R5cGVvZiBtaWxsaXNlY29uZHN9IHdpdGggdmFsdWUgJHttaWxsaXNlY29uZHN9YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKG1pbGxpc2Vjb25kcyA8IC1NQVhfREFURSB8fCBtaWxsaXNlY29uZHMgPiBNQVhfREFURSkge1xuICAgICAgLy8gdGhpcyBpc24ndCBwZXJmZWN0IGJlY2F1c2UgYmVjYXVzZSB3ZSBjYW4gc3RpbGwgZW5kIHVwIG91dCBvZiByYW5nZSBiZWNhdXNlIG9mIGFkZGl0aW9uYWwgc2hpZnRpbmcsIGJ1dCBpdCdzIGEgc3RhcnRcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiVGltZXN0YW1wIG91dCBvZiByYW5nZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBtaWxsaXNlY29uZHMsXG4gICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucyksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIC0gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tU2Vjb25kcyhzZWNvbmRzLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIWlzTnVtYmVyKHNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBzZWNvbmRzICogMTAwMCxcbiAgICAgICAgem9uZTogbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXInIGFuZCAnaG91cicgd2l0aCByZWFzb25hYmxlIGRlZmF1bHRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gdGhlIG9iamVjdCB0byBjcmVhdGUgdGhlIERhdGVUaW1lIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyIC0gYSB5ZWFyLCBzdWNoIGFzIDE5ODdcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aCAtIGEgbW9udGgsIDEtMTJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5kYXkgLSBhIGRheSBvZiB0aGUgbW9udGgsIDEtMzEsIGRlcGVuZGluZyBvbiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5vcmRpbmFsIC0gZGF5IG9mIHRoZSB5ZWFyLCAxLTM2NSBvciAzNjZcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrWWVhciAtIGFuIElTTyB3ZWVrIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrTnVtYmVyIC0gYW4gSVNPIHdlZWsgbnVtYmVyLCBiZXR3ZWVuIDEgYW5kIDUyIG9yIDUzLCBkZXBlbmRpbmcgb24gdGhlIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrZGF5IC0gYW4gSVNPIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubG9jYWxXZWVrWWVhciAtIGEgd2VlayB5ZWFyLCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmxvY2FsV2Vla051bWJlciAtIGEgd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhciwgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5sb2NhbFdlZWtkYXkgLSBhIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyB0aGUgZmlyc3QgYW5kIDcgaXMgdGhlIGxhc3QgZGF5IG9mIHRoZSB3ZWVrLCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXIgLSBob3VyIG9mIHRoZSBkYXksIDAtMjNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGUgLSBtaW51dGUgb2YgdGhlIGhvdXIsIDAtNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmQgLSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgMC01OVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kIC0gbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgMC05OTlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBpbnRlcnByZXQgdGhlIG51bWJlcnMgaW4gdGhlIGNvbnRleHQgb2YgYSBwYXJ0aWN1bGFyIHpvbmUuIENhbiB0YWtlIGFueSB2YWx1ZSB0YWtlbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gc2V0Wm9uZSgpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbVxcJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIsIG1vbnRoOiA1LCBkYXk6IDI1fSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIgfSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wMS0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSkgLy9+PiB0b2RheSBhdCAxMDoyNjowNlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICd1dGMnIH0pLFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICdsb2NhbCcgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnQW1lcmljYS9OZXdfWW9yaycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHdlZWtZZWFyOiAyMDE2LCB3ZWVrTnVtYmVyOiAyLCB3ZWVrZGF5OiAzIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzIwMTYtMDEtMTMnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBsb2NhbFdlZWtZZWFyOiAyMDIyLCBsb2NhbFdlZWtOdW1iZXI6IDEsIGxvY2FsV2Vla2RheTogMSB9LCB7IGxvY2FsZTogXCJlbi1VU1wiIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzIwMjEtMTItMjYnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21PYmplY3Qob2JqLCBvcHRzID0ge30pIHtcbiAgICBvYmogPSBvYmogfHwge307XG4gICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgICBpZiAoIXpvbmVUb1VzZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZVRvVXNlKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdChvYmosIG5vcm1hbGl6ZVVuaXRXaXRoTG9jYWxXZWVrcyk7XG4gICAgY29uc3QgeyBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrIH0gPSB1c2VzTG9jYWxXZWVrVmFsdWVzKG5vcm1hbGl6ZWQsIGxvYyk7XG5cbiAgICBjb25zdCB0c05vdyA9IFNldHRpbmdzLm5vdygpLFxuICAgICAgb2Zmc2V0UHJvdmlzID0gIWlzVW5kZWZpbmVkKG9wdHMuc3BlY2lmaWNPZmZzZXQpXG4gICAgICAgID8gb3B0cy5zcGVjaWZpY09mZnNldFxuICAgICAgICA6IHpvbmVUb1VzZS5vZmZzZXQodHNOb3cpLFxuICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICBjb250YWluc0dyZWdvclllYXIgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC55ZWFyKSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yTUQgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5tb250aCkgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICBkZWZpbml0ZVdlZWtEZWYgPSBub3JtYWxpemVkLndlZWtZZWFyIHx8IG5vcm1hbGl6ZWQud2Vla051bWJlcjtcblxuICAgIC8vIGNhc2VzOlxuICAgIC8vIGp1c3QgYSB3ZWVrZGF5IC0+IHRoaXMgd2VlaydzIGluc3RhbmNlIG9mIHRoYXQgd2Vla2RheSwgbm8gd29ycmllc1xuICAgIC8vIChncmVnb3JpYW4gZGF0YSBvciBvcmRpbmFsKSArICh3ZWVrWWVhciBvciB3ZWVrTnVtYmVyKSAtPiBlcnJvclxuICAgIC8vIChncmVnb3JpYW4gbW9udGggb3IgZGF5KSArIG9yZGluYWwgLT4gZXJyb3JcbiAgICAvLyBvdGhlcndpc2UganVzdCB1c2Ugd2Vla3Mgb3Igb3JkaW5hbHMgb3IgZ3JlZ29yaWFuLCBkZXBlbmRpbmcgb24gd2hhdCdzIHNwZWNpZmllZFxuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZVdlZWtEYXRhID0gZGVmaW5pdGVXZWVrRGVmIHx8IChub3JtYWxpemVkLndlZWtkYXkgJiYgIWNvbnRhaW5zR3JlZ29yKTtcblxuICAgIC8vIGNvbmZpZ3VyZSBvdXJzZWx2ZXMgdG8gZGVhbCB3aXRoIGdyZWdvcmlhbiBkYXRlcyBvciB3ZWVrIHN0dWZmXG4gICAgbGV0IHVuaXRzLFxuICAgICAgZGVmYXVsdFZhbHVlcyxcbiAgICAgIG9iak5vdyA9IHRzVG9PYmoodHNOb3csIG9mZnNldFByb3Zpcyk7XG4gICAgaWYgKHVzZVdlZWtEYXRhKSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRXZWVrVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFdlZWtVbml0VmFsdWVzO1xuICAgICAgb2JqTm93ID0gZ3JlZ29yaWFuVG9XZWVrKG9iak5vdywgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gICAgfSBlbHNlIGlmIChjb250YWluc09yZGluYWwpIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZE9yZGluYWxVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0T3JkaW5hbFVuaXRWYWx1ZXM7XG4gICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub09yZGluYWwob2JqTm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFVuaXRWYWx1ZXM7XG4gICAgfVxuXG4gICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzIGZvciBtaXNzaW5nIHN0dWZmXG4gICAgbGV0IGZvdW5kRmlyc3QgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHUgb2YgdW5pdHMpIHtcbiAgICAgIGNvbnN0IHYgPSBub3JtYWxpemVkW3VdO1xuICAgICAgaWYgKCFpc1VuZGVmaW5lZCh2KSkge1xuICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZm91bmRGaXJzdCkge1xuICAgICAgICBub3JtYWxpemVkW3VdID0gZGVmYXVsdFZhbHVlc1t1XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBvYmpOb3dbdV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIHRoZSB2YWx1ZXMgd2UgaGF2ZSBhcmUgaW4gcmFuZ2VcbiAgICBjb25zdCBoaWdoZXJPcmRlckludmFsaWQgPSB1c2VXZWVrRGF0YVxuICAgICAgICA/IGhhc0ludmFsaWRXZWVrRGF0YShub3JtYWxpemVkLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbFxuICAgICAgICA/IGhhc0ludmFsaWRPcmRpbmFsRGF0YShub3JtYWxpemVkKVxuICAgICAgICA6IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG5vcm1hbGl6ZWQpLFxuICAgICAgaW52YWxpZCA9IGhpZ2hlck9yZGVySW52YWxpZCB8fCBoYXNJbnZhbGlkVGltZURhdGEobm9ybWFsaXplZCk7XG5cbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfVxuXG4gICAgLy8gY29tcHV0ZSB0aGUgYWN0dWFsIHRpbWVcbiAgICBjb25zdCBncmVnb3JpYW4gPSB1c2VXZWVrRGF0YVxuICAgICAgICA/IHdlZWtUb0dyZWdvcmlhbihub3JtYWxpemVkLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbFxuICAgICAgICA/IG9yZGluYWxUb0dyZWdvcmlhbihub3JtYWxpemVkKVxuICAgICAgICA6IG5vcm1hbGl6ZWQsXG4gICAgICBbdHNGaW5hbCwgb2Zmc2V0RmluYWxdID0gb2JqVG9UUyhncmVnb3JpYW4sIG9mZnNldFByb3Zpcywgem9uZVRvVXNlKSxcbiAgICAgIGluc3QgPSBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogdHNGaW5hbCxcbiAgICAgICAgem9uZTogem9uZVRvVXNlLFxuICAgICAgICBvOiBvZmZzZXRGaW5hbCxcbiAgICAgICAgbG9jLFxuICAgICAgfSk7XG5cbiAgICAvLyBncmVnb3JpYW4gZGF0YSArIHdlZWtkYXkgc2VydmVzIG9ubHkgdG8gdmFsaWRhdGVcbiAgICBpZiAobm9ybWFsaXplZC53ZWVrZGF5ICYmIGNvbnRhaW5zR3JlZ29yICYmIG9iai53ZWVrZGF5ICE9PSBpbnN0LndlZWtkYXkpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFxuICAgICAgICBcIm1pc21hdGNoZWQgd2Vla2RheVwiLFxuICAgICAgICBgeW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgJHtub3JtYWxpemVkLndlZWtkYXl9IGFuZCBhIGRhdGUgb2YgJHtpbnN0LnRvSVNPKCl9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIElTTyA4NjAxIHN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcl0gLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMyswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJywge3NldFpvbmU6IHRydWV9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMycsIHt6b25lOiAndXRjJ30pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtVzA1LTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlSVNPRGF0ZSh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIklTTyA4NjAxXCIsIHRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gUkZDIDI4MjIgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIFJGQyAyODIyIHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIHRoZSBvZmZzZXQgaXMgYWx3YXlzIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHRoZSBpbnRlcnByZXRhdGlvbiBvZiBzdHJpbmcsIG1lcmVseSB0aGUgem9uZSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGlzIGV4cHJlc3NlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzOjEyIEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCdGcmksIDI1IE5vdiAyMDE2IDEzOjIzOjEyICswNjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzIFonKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tUkZDMjgyMih0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVJGQzI4MjJEYXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiUkZDIDI4MjJcIiwgdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBIVFRQIGhlYWRlciBkYXRlXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjMy5odG1sI3NlYzMuMy4xXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIEhUVFAgaGVhZGVyIGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSBIVFRQIGRhdGVzIGFyZSBhbHdheXMgaW4gVVRDLCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gdGhlIGludGVycHJldGF0aW9uIG9mIHN0cmluZywgbWVyZWx5IHRoZSB6b25lIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaXMgZXhwcmVzc2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCB0aGUgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcuIEZvciBIVFRQIGRhdGVzLCB0aGlzIGlzIGFsd2F5cyBVVEMsIHNvIHRoaXMgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyB0aGUgYHpvbmVgIG9wdGlvbiB0byAndXRjJywgYnV0IHRoaXMgb3B0aW9uIGlzIGluY2x1ZGVkIGZvciBjb25zaXN0ZW5jeSB3aXRoIHNpbWlsYXIgbWV0aG9kcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1biwgMDYgTm92IDE5OTQgMDg6NDk6MzcgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1bmRheSwgMDYtTm92LTk0IDA4OjQ5OjM3IEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4gTm92ICA2IDA4OjQ5OjM3IDE5OTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSFRUUCh0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZUhUVFBEYXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiSFRUUFwiLCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIGlucHV0IHN0cmluZyBhbmQgZm9ybWF0IHN0cmluZy5cbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9wYXJzaW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgdGhlIGxpbmsgYmVsb3cgZm9yIHRoZSBmb3JtYXRzKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHRleHQpIHx8IGlzVW5kZWZpbmVkKGZtdCkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdHMsXG4gICAgICBsb2NhbGVUb1VzZSA9IExvY2FsZS5mcm9tT3B0cyh7XG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBkZWZhdWx0VG9FTjogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgW3ZhbHMsIHBhcnNlZFpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkXSA9IHBhcnNlRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTtcbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIGBmb3JtYXQgJHtmbXR9YCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgZnJvbUZvcm1hdCBpbnN0ZWFkXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyh0ZXh0LCBmbXQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIFNRTCBkYXRlLCB0aW1lLCBvciBkYXRldGltZVxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIHJlc3VsdGluZyBEYXRlVGltZSB0byB0aGlzIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0JylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDInKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJywgeyBzZXRab25lOiB0cnVlIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJywgeyB6b25lOiAnQW1lcmljYS9Mb3NfQW5nZWxlcycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMDk6MTI6MzQuMzQyJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbVNRTCh0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVNRTCh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIlNRTFwiLCB0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRGF0ZVRpbWUgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZERhdGVUaW1lRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoeyBpbnZhbGlkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZVRpbWUuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc0RhdGVUaW1lKG8pIHtcbiAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUpIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIGZvcm1hdCBzdHJpbmcgZm9yIGEgc2V0IG9mIG9wdGlvbnNcbiAgICogQHBhcmFtIGZvcm1hdE9wdHNcbiAgICogQHBhcmFtIGxvY2FsZU9wdHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBwYXJzZUZvcm1hdEZvck9wdHMoZm9ybWF0T3B0cywgbG9jYWxlT3B0cyA9IHt9KSB7XG4gICAgY29uc3QgdG9rZW5MaXN0ID0gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIExvY2FsZS5mcm9tT2JqZWN0KGxvY2FsZU9wdHMpKTtcbiAgICByZXR1cm4gIXRva2VuTGlzdCA/IG51bGwgOiB0b2tlbkxpc3QubWFwKCh0KSA9PiAodCA/IHQudmFsIDogbnVsbCkpLmpvaW4oXCJcIik7XG4gIH1cblxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgdGhlIGZ1bGx5IGV4cGFuZGVkIGZvcm1hdCB0b2tlbiBmb3IgdGhlIGxvY2FsZVxuICAgKiBEb2VzIE5PVCBxdW90ZSBjaGFyYWN0ZXJzLCBzbyBxdW90ZWQgdG9rZW5zIHdpbGwgbm90IHJvdW5kIHRyaXAgY29ycmVjdGx5XG4gICAqIEBwYXJhbSBmbXRcbiAgICogQHBhcmFtIGxvY2FsZU9wdHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBleHBhbmRGb3JtYXQoZm10LCBsb2NhbGVPcHRzID0ge30pIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCBMb2NhbGUuZnJvbU9iamVjdChsb2NhbGVPcHRzKSk7XG4gICAgcmV0dXJuIGV4cGFuZGVkLm1hcCgodCkgPT4gdC52YWwpLmpvaW4oXCJcIik7XG4gIH1cblxuICAvLyBJTkZPXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA3LCA0KS5nZXQoJ21vbnRoJyk7IC8vPT4gN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA3LCA0KS5nZXQoJ2RheScpOyAvLz0+IDRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1t1bml0XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIHZhbGlkLiBJbnZhbGlkIERhdGVUaW1lcyBvY2N1ciB3aGVuOlxuICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzBcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgYnkgYW4gb3BlcmF0aW9uIG9uIGFub3RoZXIgaW52YWxpZCBkYXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRSZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZEV4cGxhbmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbG9jYWxlIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2VuLUdCJy4gVGhlIGxvY2FsZSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBsb2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXJpbmcgc3lzdGVtIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2JlbmcnLiBUaGUgbnVtYmVyaW5nIHN5c3RlbSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgb3V0cHV0Q2FsZW5kYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm91dHB1dENhbGVuZGFyIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRpbWUgem9uZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBEYXRlVGltZS5cbiAgICogQHR5cGUge1pvbmV9XG4gICAqL1xuICBnZXQgem9uZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIHRpbWUgem9uZS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCB6b25lTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy56b25lLm5hbWUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgeWVhclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkueWVhciAvLz0+IDIwMTdcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB5ZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1YXJ0ZXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgcXVhcnRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5jZWlsKHRoaXMuYy5tb250aCAvIDMpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW9udGggKDEtMTIpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkubW9udGggLy89PiA1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbW9udGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5tb250aCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgbW9udGggKDEtMzBpc2gpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuZGF5IC8vPT4gMjVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBob3VyIG9mIHRoZSBkYXkgKDAtMjMpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDlcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBob3VyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuaG91ciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCkubWludXRlIC8vPT4gMzBcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtaW51dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5taW51dGUgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSAoMC01OSkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCwgNTIpLnNlY29uZCAvLz0+IDUyXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCAoMC05OTkpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWlsbGlzZWNvbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5taWxsaXNlY29uZCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgeWVhclxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMTIsIDMxKS53ZWVrWWVhciAvLz0+IDIwMTVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgbnVtYmVyIG9mIHRoZSB3ZWVrIHllYXIgKDEtNTJpc2gpLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLndlZWtOdW1iZXIgLy89PiAyMVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtOdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla051bWJlciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgd2Vlay5cbiAgICogMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5XG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMSwgMzEpLndlZWtkYXkgLy89PiA0XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla2RheSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrZGF5IDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGRhdGUgaXMgb24gYSB3ZWVrZW5kIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLCBmYWxzZSBvdGhlcndpc2VcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNXZWVrZW5kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgJiYgdGhpcy5sb2MuZ2V0V2Vla2VuZERheXMoKS5pbmNsdWRlcyh0aGlzLndlZWtkYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLlxuICAgKiAxIGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgYW5kIDcgaXMgdGhlIGxhc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICAgKiBJZiB0aGUgbG9jYWxlIGFzc2lnbnMgU3VuZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIHRoZW4gYSBkYXRlIHdoaWNoIGlzIGEgU3VuZGF5IHdpbGwgcmV0dXJuIDEsXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbG9jYWxXZWVrZGF5KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEodGhpcykud2Vla2RheSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgbnVtYmVyIG9mIHRoZSB3ZWVrIHllYXIgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUuIERpZmZlcmVudCBsb2NhbGVzIGFzc2lnbiB3ZWVrIG51bWJlcnMgZGlmZmVyZW50bHksXG4gICAqIGJlY2F1c2UgdGhlIHdlZWsgY2FuIHN0YXJ0IG9uIGRpZmZlcmVudCBkYXlzIG9mIHRoZSB3ZWVrIChzZWUgbG9jYWxXZWVrZGF5KSBhbmQgYmVjYXVzZSBhIGRpZmZlcmVudCBudW1iZXIgb2YgZGF5c1xuICAgKiBpcyByZXF1aXJlZCBmb3IgYSB3ZWVrIHRvIGNvdW50IGFzIHRoZSBmaXJzdCB3ZWVrIG9mIGEgeWVhci5cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCBsb2NhbFdlZWtOdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkTG9jYWxXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayB5ZWFyIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLiBEaWZmZXJlbnQgbG9jYWxlcyBhc3NpZ24gd2VlayBudW1iZXJzIChhbmQgdGhlcmVmb3Igd2VlayB5ZWFycylcbiAgICogZGlmZmVyZW50bHksIHNlZSBsb2NhbFdlZWtOdW1iZXIuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbG9jYWxXZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRMb2NhbFdlZWtEYXRhKHRoaXMpLndlZWtZZWFyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3JkaW5hbCAobWVhbmluZyB0aGUgZGF5IG9mIHRoZSB5ZWFyKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkub3JkaW5hbCAvLz0+IDE0NVxuICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfVxuICAgKi9cbiAgZ2V0IG9yZGluYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBzaG9ydCBtb250aCBuYW1lLCBzdWNoIGFzICdPY3QnLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aFNob3J0IC8vPT4gT2N0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbW9udGhTaG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby5tb250aHMoXCJzaG9ydFwiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0b2JlcicuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLm1vbnRoTG9uZyAvLz0+IE9jdG9iZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBtb250aExvbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwibG9uZ1wiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IHdlZWtkYXksIHN1Y2ggYXMgJ01vbicuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlTaG9ydCAvLz0+IE1vblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHdlZWtkYXlTaG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cyhcInNob3J0XCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBsb25nIHdlZWtkYXksIHN1Y2ggYXMgJ01vbmRheScuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlMb25nIC8vPT4gTW9uZGF5XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgd2Vla2RheUxvbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ud2Vla2RheXMoXCJsb25nXCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBVVEMgb2Zmc2V0IG9mIHRoaXMgRGF0ZVRpbWUgaW4gbWludXRlc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5vZmZzZXQgLy89PiAtMjQwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLm9mZnNldCAvLz0+IDBcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/ICt0aGlzLm8gOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzaG9ydCBodW1hbiBuYW1lIGZvciB0aGUgem9uZSdzIGN1cnJlbnQgb2Zmc2V0LCBmb3IgZXhhbXBsZSBcIkVTVFwiIG9yIFwiRURUXCIuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9mZnNldE5hbWVTaG9ydCgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywge1xuICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsb25nIGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlIFwiRWFzdGVybiBTdGFuZGFyZCBUaW1lXCIgb3IgXCJFYXN0ZXJuIERheWxpZ2h0IFRpbWVcIi5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgb2Zmc2V0TmFtZUxvbmcoKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMsIHtcbiAgICAgICAgZm9ybWF0OiBcImxvbmdcIixcbiAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhpcyB6b25lJ3Mgb2Zmc2V0IGV2ZXIgY2hhbmdlcywgYXMgaW4gYSBEU1QuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzT2Zmc2V0Rml4ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIGluIGEgRFNULlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc0luRFNUKCkge1xuICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7IG1vbnRoOiAxLCBkYXk6IDEgfSkub2Zmc2V0IHx8XG4gICAgICAgIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoeyBtb250aDogNSB9KS5vZmZzZXRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aG9zZSBEYXRlVGltZXMgd2hpY2ggaGF2ZSB0aGUgc2FtZSBsb2NhbCB0aW1lIGFzIHRoaXMgRGF0ZVRpbWUsIGJ1dCBhIGRpZmZlcmVudCBvZmZzZXQgZnJvbSBVVENcbiAgICogaW4gdGhpcyBEYXRlVGltZSdzIHpvbmUuIER1cmluZyBEU1QgY2hhbmdlcyBsb2NhbCB0aW1lIGNhbiBiZSBhbWJpZ3VvdXMsIGZvciBleGFtcGxlXG4gICAqIGAyMDIzLTEwLTI5VDAyOjMwOjAwYCBpbiBgRXVyb3BlL0JlcmxpbmAgY2FuIGhhdmUgb2Zmc2V0IGArMDE6MDBgIG9yIGArMDI6MDBgLlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBib3RoIHBvc3NpYmxlIERhdGVUaW1lcyBpZiB0aGlzIERhdGVUaW1lJ3MgbG9jYWwgdGltZSBpcyBhbWJpZ3VvdXMuXG4gICAqIEByZXR1cm5zIHtEYXRlVGltZVtdfVxuICAgKi9cbiAgZ2V0UG9zc2libGVPZmZzZXRzKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8IHRoaXMuaXNPZmZzZXRGaXhlZCkge1xuICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgY29uc3QgZGF5TXMgPSA4NjQwMDAwMDtcbiAgICBjb25zdCBtaW51dGVNcyA9IDYwMDAwO1xuICAgIGNvbnN0IGxvY2FsVFMgPSBvYmpUb0xvY2FsVFModGhpcy5jKTtcbiAgICBjb25zdCBvRWFybGllciA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyAtIGRheU1zKTtcbiAgICBjb25zdCBvTGF0ZXIgPSB0aGlzLnpvbmUub2Zmc2V0KGxvY2FsVFMgKyBkYXlNcyk7XG5cbiAgICBjb25zdCBvMSA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyAtIG9FYXJsaWVyICogbWludXRlTXMpO1xuICAgIGNvbnN0IG8yID0gdGhpcy56b25lLm9mZnNldChsb2NhbFRTIC0gb0xhdGVyICogbWludXRlTXMpO1xuICAgIGlmIChvMSA9PT0gbzIpIHtcbiAgICAgIHJldHVybiBbdGhpc107XG4gICAgfVxuICAgIGNvbnN0IHRzMSA9IGxvY2FsVFMgLSBvMSAqIG1pbnV0ZU1zO1xuICAgIGNvbnN0IHRzMiA9IGxvY2FsVFMgLSBvMiAqIG1pbnV0ZU1zO1xuICAgIGNvbnN0IGMxID0gdHNUb09iaih0czEsIG8xKTtcbiAgICBjb25zdCBjMiA9IHRzVG9PYmoodHMyLCBvMik7XG4gICAgaWYgKFxuICAgICAgYzEuaG91ciA9PT0gYzIuaG91ciAmJlxuICAgICAgYzEubWludXRlID09PSBjMi5taW51dGUgJiZcbiAgICAgIGMxLnNlY29uZCA9PT0gYzIuc2Vjb25kICYmXG4gICAgICBjMS5taWxsaXNlY29uZCA9PT0gYzIubWlsbGlzZWNvbmRcbiAgICApIHtcbiAgICAgIHJldHVybiBbY2xvbmUodGhpcywgeyB0czogdHMxIH0pLCBjbG9uZSh0aGlzLCB7IHRzOiB0czIgfSldO1xuICAgIH1cbiAgICByZXR1cm4gW3RoaXNdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIERhdGVUaW1lIGlzIGluIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuaXNJbkxlYXBZZWFyIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5pc0luTGVhcFllYXIgLy89PiBmYWxzZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc0luTGVhcFllYXIoKSB7XG4gICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGlzIERhdGVUaW1lJ3MgbW9udGhcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMikuZGF5c0luTW9udGggLy89PiAyOVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2LCAzKS5kYXlzSW5Nb250aCAvLz0+IDMxXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5c0luTW9udGgoKSB7XG4gICAgcmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhciwgdGhpcy5tb250aCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuZGF5c0luWWVhciAvLz0+IDM2NlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5kYXlzSW5ZZWFyIC8vPT4gMzY1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5c0luWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gZGF5c0luWWVhcih0aGlzLnllYXIpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhclxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAwNCkud2Vla3NJbldlZWtZZWFyIC8vPT4gNTNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykud2Vla3NJbldlZWtZZWFyIC8vPT4gNTJcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrc0luV2Vla1llYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHdlZWtzSW5XZWVrWWVhcih0aGlzLndlZWtZZWFyKSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhpcyBEYXRlVGltZSdzIGxvY2FsIHdlZWsgeWVhclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDIwLCA2LCB7bG9jYWxlOiAnZW4tVVMnfSkud2Vla3NJbkxvY2FsV2Vla1llYXIgLy89PiA1MlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDIwLCA2LCB7bG9jYWxlOiAnZGUtREUnfSkud2Vla3NJbkxvY2FsV2Vla1llYXIgLy89PiA1M1xuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtzSW5Mb2NhbFdlZWtZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gd2Vla3NJbldlZWtZZWFyKFxuICAgICAgICAgIHRoaXMubG9jYWxXZWVrWWVhcixcbiAgICAgICAgICB0aGlzLmxvYy5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxcbiAgICAgICAgICB0aGlzLmxvYy5nZXRTdGFydE9mV2VlaygpXG4gICAgICAgIClcbiAgICAgIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlc29sdmVkIEludGwgb3B0aW9ucyBmb3IgdGhpcyBEYXRlVGltZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgaW4gdW5kZXJzdGFuZGluZyB0aGUgYmVoYXZpb3Igb2YgZm9ybWF0dGluZyBtZXRob2RzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gdGhlIHNhbWUgb3B0aW9ucyBhcyB0b0xvY2FsZVN0cmluZ1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICByZXNvbHZlZExvY2FsZU9wdGlvbnMob3B0cyA9IHt9KSB7XG4gICAgY29uc3QgeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXIgfSA9IEZvcm1hdHRlci5jcmVhdGUoXG4gICAgICB0aGlzLmxvYy5jbG9uZShvcHRzKSxcbiAgICAgIG9wdHNcbiAgICApLnJlc29sdmVkT3B0aW9ucyh0aGlzKTtcbiAgICByZXR1cm4geyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXI6IGNhbGVuZGFyIH07XG4gIH1cblxuICAvLyBUUkFOU0ZPUk1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIFVUQy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBEYXRlVGltZSNzZXRab25lfSgndXRjJylcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9MF0gLSBvcHRpb25hbGx5LCBhbiBvZmZzZXQgZnJvbSBVVEMgaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9e31dIC0gb3B0aW9ucyB0byBwYXNzIHRvIGBzZXRab25lKClgXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgdG9VVEMob2Zmc2V0ID0gMCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2Uob2Zmc2V0KSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHRoZSBob3N0J3MgbG9jYWwgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHRvTG9jYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHNwZWNpZmllZCB6b25lLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBzZXR0ZXIga2VlcHMgdGhlIHVuZGVybHlpbmcgdGltZSB0aGUgc2FtZSAoYXMgaW4sIHRoZSBzYW1lIHRpbWVzdGFtcCksIGJ1dCB0aGUgbmV3IGluc3RhbmNlIHdpbGwgcmVwb3J0IGRpZmZlcmVudCBsb2NhbCB0aW1lcyBhbmQgY29uc2lkZXIgRFNUcyB3aGVuIG1ha2luZyBjb21wdXRhdGlvbnMsIGFzIHdpdGgge0BsaW5rIERhdGVUaW1lI3BsdXN9LiBZb3UgbWF5IHdpc2ggdG8gdXNlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvVVRDfSB3aGljaCBwcm92aWRlIHNpbXBsZSBjb252ZW5pZW5jZSB3cmFwcGVycyBmb3IgY29tbW9ubHkgdXNlZCB6b25lcy5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW3pvbmU9J2xvY2FsJ10gLSBhIHpvbmUgaWRlbnRpZmllci4gQXMgYSBzdHJpbmcsIHRoYXQgY2FuIGJlIGFueSBJQU5BIHpvbmUgc3VwcG9ydGVkIGJ5IHRoZSBob3N0IGVudmlyb25tZW50LCBvciBhIGZpeGVkLW9mZnNldCBuYW1lIG9mIHRoZSBmb3JtICdVVEMrMycsIG9yIHRoZSBzdHJpbmdzICdsb2NhbCcgb3IgJ3V0YycuIFlvdSBtYXkgYWxzbyBzdXBwbHkgYW4gaW5zdGFuY2Ugb2YgYSB7QGxpbmsgRGF0ZVRpbWUjWm9uZX0gY2xhc3MuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmtlZXBMb2NhbFRpbWU9ZmFsc2VdIC0gSWYgdHJ1ZSwgYWRqdXN0IHRoZSB1bmRlcmx5aW5nIHRpbWUgc28gdGhhdCB0aGUgbG9jYWwgdGltZSBzdGF5cyB0aGUgc2FtZSwgYnV0IGluIHRoZSB0YXJnZXQgem9uZS4gWW91IHNob3VsZCByYXJlbHkgbmVlZCB0aGlzLlxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHNldFpvbmUoem9uZSwgeyBrZWVwTG9jYWxUaW1lID0gZmFsc2UsIGtlZXBDYWxlbmRhclRpbWUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICB6b25lID0gbm9ybWFsaXplWm9uZSh6b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gICAgaWYgKHpvbmUuZXF1YWxzKHRoaXMuem9uZSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAoIXpvbmUuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld1RTID0gdGhpcy50cztcbiAgICAgIGlmIChrZWVwTG9jYWxUaW1lIHx8IGtlZXBDYWxlbmRhclRpbWUpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0R3Vlc3MgPSB6b25lLm9mZnNldCh0aGlzLnRzKTtcbiAgICAgICAgY29uc3QgYXNPYmogPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgICAgIFtuZXdUU10gPSBvYmpUb1RTKGFzT2JqLCBvZmZzZXRHdWVzcywgem9uZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xvbmUodGhpcywgeyB0czogbmV3VFMsIHpvbmUgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvciBvdXRwdXRDYWxlbmRhci4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBwcm9wZXJ0aWVzIHRvIHNldFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHtcbiAgICBjb25zdCBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9KTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyBsb2MgfSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIEp1c3QgYSBjb252ZW5pZW50IGFsaWFzIGZvciByZWNvbmZpZ3VyZSh7IGxvY2FsZSB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuc2V0TG9jYWxlKCdlbi1HQicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgIHJldHVybiB0aGlzLnJlY29uZmlndXJlKHsgbG9jYWxlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogWW91IGNhbiBvbmx5IHNldCB1bml0cyB3aXRoIHRoaXMgbWV0aG9kOyBmb3IgXCJzZXR0aW5nXCIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGFsc28gc3VwcG9ydHMgc2V0dGluZyBsb2NhbGUtYmFzZWQgd2VlayB1bml0cywgaS5lLiBgbG9jYWxXZWVrZGF5YCwgYGxvY2FsV2Vla051bWJlcmAgYW5kIGBsb2NhbFdlZWtZZWFyYC5cbiAgICogVGhleSBjYW5ub3QgYmUgbWl4ZWQgd2l0aCBJU08td2VlayB1bml0cyBsaWtlIGB3ZWVrZGF5YC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMTcgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgaG91cjogOCwgbWludXRlOiAzMCB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB3ZWVrZGF5OiA1IH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMDUsIG9yZGluYWw6IDIzNCB9KVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KHZhbHVlcywgbm9ybWFsaXplVW5pdFdpdGhMb2NhbFdlZWtzKTtcbiAgICBjb25zdCB7IG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWsgfSA9IHVzZXNMb2NhbFdlZWtWYWx1ZXMobm9ybWFsaXplZCwgdGhpcy5sb2MpO1xuXG4gICAgY29uc3Qgc2V0dGluZ1dlZWtTdHVmZiA9XG4gICAgICAgICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtZZWFyKSB8fFxuICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fFxuICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrZGF5KSxcbiAgICAgIGNvbnRhaW5zT3JkaW5hbCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpLFxuICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksXG4gICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICBjb250YWluc0dyZWdvciA9IGNvbnRhaW5zR3JlZ29yWWVhciB8fCBjb250YWluc0dyZWdvck1ELFxuICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXI7XG5cbiAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChjb250YWluc0dyZWdvck1EICYmIGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXlcIik7XG4gICAgfVxuXG4gICAgbGV0IG1peGVkO1xuICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7XG4gICAgICBtaXhlZCA9IHdlZWtUb0dyZWdvcmlhbihcbiAgICAgICAgeyAuLi5ncmVnb3JpYW5Ub1dlZWsodGhpcy5jLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKSwgLi4ubm9ybWFsaXplZCB9LFxuICAgICAgICBtaW5EYXlzSW5GaXJzdFdlZWssXG4gICAgICAgIHN0YXJ0T2ZXZWVrXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCkpIHtcbiAgICAgIG1peGVkID0gb3JkaW5hbFRvR3JlZ29yaWFuKHsgLi4uZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIC4uLm5vcm1hbGl6ZWQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1peGVkID0geyAuLi50aGlzLnRvT2JqZWN0KCksIC4uLm5vcm1hbGl6ZWQgfTtcblxuICAgICAgLy8gaWYgd2UgZGlkbid0IHNldCB0aGUgZGF5IGJ1dCB3ZSBlbmRlZCB1cCBvbiBhbiBvdmVyZmxvdyBkYXRlLFxuICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGhcbiAgICAgIGlmIChpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSkpIHtcbiAgICAgICAgbWl4ZWQuZGF5ID0gTWF0aC5taW4oZGF5c0luTW9udGgobWl4ZWQueWVhciwgbWl4ZWQubW9udGgpLCBtaXhlZC5kYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFt0cywgb10gPSBvYmpUb1RTKG1peGVkLCB0aGlzLm8sIHRoaXMuem9uZSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdHMsIG8gfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICpcbiAgICogQWRkaW5nIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBvciBtaWxsaXNlY29uZHMgaW5jcmVhc2VzIHRoZSB0aW1lc3RhbXAgYnkgdGhlIHJpZ2h0IG51bWJlciBvZiBtaWxsaXNlY29uZHMuIEFkZGluZyBkYXlzLCBtb250aHMsIG9yIHllYXJzIHNoaWZ0cyB0aGUgY2FsZW5kYXIsIGFjY291bnRpbmcgZm9yIERTVHMgYW5kIGxlYXAgeWVhcnMgYWxvbmcgdGhlIHdheS4gVGh1cywgYGR0LnBsdXMoeyBob3VyczogMjQgfSlgIG1heSByZXN1bHQgaW4gYSBkaWZmZXJlbnQgdGltZSB0aGFuIGBkdC5wbHVzKHsgZGF5czogMSB9KWAgaWYgdGhlcmUncyBhIERTVCBzaGlmdCBpbiBiZXR3ZWVuLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoMTIzKSAvL34+IGluIDEyMyBtaWxsaXNlY29uZHNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IG1pbnV0ZXM6IDE1IH0pIC8vfj4gaW4gMTUgbWludXRlc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KSAvL34+IHRoaXMgdGltZSB0b21vcnJvd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogLTEgfSkgLy9+PiB0aGlzIHRpbWUgeWVzdGVyZGF5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBob3VyczogMywgbWludXRlczogMTMgfSkgLy9+PiBpbiAzIGhyLCAxMyBtaW5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pKSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHBsdXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3QgYSBwZXJpb2Qgb2YgdGltZSB0byB0aGlzIERhdGVUaW1lIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBEYXRlVGltZVxuICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI3BsdXN9XG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIHN1YnRyYWN0LiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBtaW51cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKS5uZWdhdGUoKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoaXMgRGF0ZVRpbWUgdG8gdGhlIGJlZ2lubmluZyBvZiBhIHVuaXQgb2YgdGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgYmVnaW5uaW5nIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWtcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZigneWVhcicpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCd3ZWVrJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDMnLCB3ZWVrcyBhbHdheXMgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2hvdXInKS50b0lTT1RpbWUoKTsgLy89PiAnMDU6MDA6MDAuMDAwLTA1OjAwJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXJ0T2YodW5pdCwgeyB1c2VMb2NhbGVXZWVrcyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IG8gPSB7fSxcbiAgICAgIG5vcm1hbGl6ZWRVbml0ID0gRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KTtcbiAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7XG4gICAgICBjYXNlIFwieWVhcnNcIjpcbiAgICAgICAgby5tb250aCA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwicXVhcnRlcnNcIjpcbiAgICAgIGNhc2UgXCJtb250aHNcIjpcbiAgICAgICAgby5kYXkgPSAxO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcIndlZWtzXCI6XG4gICAgICBjYXNlIFwiZGF5c1wiOlxuICAgICAgICBvLmhvdXIgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcImhvdXJzXCI6XG4gICAgICAgIG8ubWludXRlID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJtaW51dGVzXCI6XG4gICAgICAgIG8uc2Vjb25kID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJzZWNvbmRzXCI6XG4gICAgICAgIG8ubWlsbGlzZWNvbmQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtaWxsaXNlY29uZHNcIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBubyBkZWZhdWx0LCBpbnZhbGlkIHVuaXRzIHRocm93IGluIG5vcm1hbGl6ZVVuaXQoKVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJ3ZWVrc1wiKSB7XG4gICAgICBpZiAodXNlTG9jYWxlV2Vla3MpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRPZldlZWsgPSB0aGlzLmxvYy5nZXRTdGFydE9mV2VlaygpO1xuICAgICAgICBjb25zdCB7IHdlZWtkYXkgfSA9IHRoaXM7XG4gICAgICAgIGlmICh3ZWVrZGF5IDwgc3RhcnRPZldlZWspIHtcbiAgICAgICAgICBvLndlZWtOdW1iZXIgPSB0aGlzLndlZWtOdW1iZXIgLSAxO1xuICAgICAgICB9XG4gICAgICAgIG8ud2Vla2RheSA9IHN0YXJ0T2ZXZWVrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby53ZWVrZGF5ID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZFVuaXQgPT09IFwicXVhcnRlcnNcIikge1xuICAgICAgY29uc3QgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7XG4gICAgICBvLm1vbnRoID0gKHEgLSAxKSAqIDMgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldChvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoaXMgRGF0ZVRpbWUgdG8gdGhlIGVuZCAobWVhbmluZyB0aGUgbGFzdCBtaWxsaXNlY29uZCkgb2YgYSB1bml0IG9mIHRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgZW5kIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWtcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd5ZWFyJykudG9JU08oKTsgLy89PiAnMjAxNC0xMi0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd3ZWVrJykudG9JU08oKTsgLy8gPT4gJzIwMTQtMDMtMDlUMjM6NTk6NTkuOTk5LTA1OjAwJywgd2Vla3Mgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2hvdXInKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDA1OjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBlbmRPZih1bml0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyB0aGlzLnBsdXMoeyBbdW5pdF06IDEgfSlcbiAgICAgICAgICAuc3RhcnRPZih1bml0LCBvcHRzKVxuICAgICAgICAgIC5taW51cygxKVxuICAgICAgOiB0aGlzO1xuICB9XG5cbiAgLy8gT1VUUFVUXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy5cbiAgICogKipZb3UgbWF5IG5vdCB3YW50IHRoaXMuKiogU2VlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9yIGEgbW9yZSBmbGV4aWJsZSBmb3JtYXR0aW5nIHRvb2wuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL2Zvcm1hdHRpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS5cbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnKSAvLz0+ICcyMDE3IEFwciAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCdmcicpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcpIC8vPT4gJzIwMTcgYXZyLiAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJywgeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+ICcyMDE3IGF2ci4gMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KFwiSEggJ2hvdXJzIGFuZCcgbW0gJ21pbnV0ZXMnXCIpIC8vPT4gJzIwIGhvdXJzIGFuZCA1NSBtaW51dGVzJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5yZWRlZmF1bHRUb0VOKG9wdHMpKS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcodGhpcywgZm10KVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIGRhdGUuIEFjY2VwdHMgdGhlIHNhbWUgb3B0aW9ucyBhcyB0aGUgSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBhbmQgYW55IHByZXNldHMgZGVmaW5lZCBieSBMdXhvbiwgc3VjaCBhcyBgRGF0ZVRpbWUuREFURV9GVUxMYCBvciBgRGF0ZVRpbWUuVElNRV9TSU1QTEVgLlxuICAgKiBUaGUgZXhhY3QgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QgaXMgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGluIGdlbmVyYWwgaXQgd2lsbCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgcmVwcmVzZW50YXRpb25cbiAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDQvMjAvMjAxN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMKTsgLy89PiAnQXByaWwgMjAsIDIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCwgeyBsb2NhbGU6ICdmcicgfSk7IC8vPT4gJzI4IGFvXHUwMEZCdCAyMDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSk7IC8vPT4gJzExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ2xvbmcnLCBtb250aDogJ2xvbmcnLCBkYXk6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1cnNkYXksIEFwcmlsIDIwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1LCBBcHIgMjAsIDExOjI3IEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0xvY2FsZVN0cmluZyhmb3JtYXRPcHRzID0gRm9ybWF0cy5EQVRFX1NIT1JULCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdERhdGVUaW1lKHRoaXMpXG4gICAgICA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBmb3JtYXQgXCJwYXJ0c1wiLCBtZWFuaW5nIGluZGl2aWR1YWwgdG9rZW5zIGFsb25nIHdpdGggbWV0YWRhdGEuIFRoaXMgaXMgYWxsb3dzIGNhbGxlcnMgdG8gcG9zdC1wcm9jZXNzIGluZGl2aWR1YWwgc2VjdGlvbnMgb2YgdGhlIGZvcm1hdHRlZCBvdXRwdXQuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0L2Zvcm1hdFRvUGFydHNcbiAgICogQHBhcmFtIG9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMsIHNhbWUgYXMgYHRvTG9jYWxlU3RyaW5nYC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVQYXJ0cygpOyAvLz0+IFtcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdkYXknLCB2YWx1ZTogJzI1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbW9udGgnLCB2YWx1ZTogJzA1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAneWVhcicsIHZhbHVlOiAnMTk4MicgfVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiBdXG4gICAqL1xuICB0b0xvY2FsZVBhcnRzKG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgb3B0cykuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKVxuICAgICAgOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9ZmFsc2VdIC0gYWRkIHRoZSB0aW1lIHpvbmUgZm9ybWF0IGV4dGVuc2lvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODMsIDUsIDI1KS50b0lTTygpIC8vPT4gJzE5ODItMDUtMjVUMDA6MDA6MDAuMDAwWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oKSAvLz0+ICcyMDE3LTA0LTIyVDIwOjQ3OjA1LjMzNS0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcyMDE3LTA0LTIyVDIwOjQ3OjA1LjMzNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMjAxNzA0MjJUMjA0NzA1LjMzNS0wNDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTTyh7XG4gICAgZm9ybWF0ID0gXCJleHRlbmRlZFwiLFxuICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLFxuICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gZmFsc2UsXG4gICAgaW5jbHVkZU9mZnNldCA9IHRydWUsXG4gICAgZXh0ZW5kZWRab25lID0gZmFsc2UsXG4gIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBleHQgPSBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIjtcblxuICAgIGxldCBjID0gdG9JU09EYXRlKHRoaXMsIGV4dCk7XG4gICAgYyArPSBcIlRcIjtcbiAgICBjICs9IHRvSVNPVGltZSh0aGlzLCBleHQsIHN1cHByZXNzU2Vjb25kcywgc3VwcHJlc3NNaWxsaXNlY29uZHMsIGluY2x1ZGVPZmZzZXQsIGV4dGVuZGVkWm9uZSk7XG4gICAgcmV0dXJuIGM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyBkYXRlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTk4MjA1MjUnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPRGF0ZSh7IGZvcm1hdCA9IFwiZXh0ZW5kZWRcIiB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvSVNPRGF0ZSh0aGlzLCBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyB3ZWVrIGRhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT1dlZWtEYXRlKCkgLy89PiAnMTk4Mi1XMjEtMidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09XZWVrRGF0ZSgpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwia2tray0nVydXVy1jXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgdGltZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPXRydWVdIC0gYWRkIHRoZSB0aW1lIHpvbmUgZm9ybWF0IGV4dGVuc2lvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoKSAvLz0+ICcwNzozNDoxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMDczNDE5LjM2MVonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgaW5jbHVkZVByZWZpeDogdHJ1ZSB9KSAvLz0+ICdUMDc6MzQ6MTkuMzYxWidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09UaW1lKHtcbiAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLFxuICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLFxuICAgIGluY2x1ZGVPZmZzZXQgPSB0cnVlLFxuICAgIGluY2x1ZGVQcmVmaXggPSBmYWxzZSxcbiAgICBleHRlbmRlZFpvbmUgPSBmYWxzZSxcbiAgICBmb3JtYXQgPSBcImV4dGVuZGVkXCIsXG4gIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgYyA9IGluY2x1ZGVQcmVmaXggPyBcIlRcIiA6IFwiXCI7XG4gICAgcmV0dXJuIChcbiAgICAgIGMgK1xuICAgICAgdG9JU09UaW1lKFxuICAgICAgICB0aGlzLFxuICAgICAgICBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIixcbiAgICAgICAgc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyxcbiAgICAgICAgaW5jbHVkZU9mZnNldCxcbiAgICAgICAgZXh0ZW5kZWRab25lXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIFJGQyAyODIyLWNvbXBhdGlibGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwICswMDAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9SRkMyODIyKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCAtMDQwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9SRkMyODIyKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgXCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzIFpaWlwiLCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSFRUUCBoZWFkZXJzLiBUaGUgb3V0cHV0IGlzIGFsd2F5cyBleHByZXNzZWQgaW4gR01ULlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSBzdHJpbmcgY29uZm9ybXMgdG8gUkZDIDExMjMuXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjMy5odG1sI3NlYzMuMy4xXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9IVFRQKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCBHTVQnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMywgMTkpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMTk6MDA6MDAgR01UJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0hUVFAoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLnRvVVRDKCksIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJ1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMRGF0ZSgpIC8vPT4gJzIwMTQtMDctMTMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU1FMRGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIFRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVpvbmU9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgem9uZSwgc3VjaCBhcyAnQW1lcmljYS9OZXdfWW9yaycuIE92ZXJyaWRlcyBpbmNsdWRlT2Zmc2V0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldFNwYWNlPXRydWVdIC0gaW5jbHVkZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgdGltZSBhbmQgdGhlIG9mZnNldCwgc3VjaCBhcyAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1NRTFRpbWUoeyBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSwgaW5jbHVkZVpvbmUgPSBmYWxzZSwgaW5jbHVkZU9mZnNldFNwYWNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBsZXQgZm10ID0gXCJISDptbTpzcy5TU1NcIjtcblxuICAgIGlmIChpbmNsdWRlWm9uZSB8fCBpbmNsdWRlT2Zmc2V0KSB7XG4gICAgICBpZiAoaW5jbHVkZU9mZnNldFNwYWNlKSB7XG4gICAgICAgIGZtdCArPSBcIiBcIjtcbiAgICAgIH1cbiAgICAgIGlmIChpbmNsdWRlWm9uZSkge1xuICAgICAgICBmbXQgKz0gXCJ6XCI7XG4gICAgICB9IGVsc2UgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICAgICAgZm10ICs9IFwiWlpcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXRTcGFjZT10cnVlXSAtIGluY2x1ZGUgdGhlIHNwYWNlIGJldHdlZW4gdGhlIHRpbWUgYW5kIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJzA1OjE1OjE2LjM0NSAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoeyBpbmNsdWRlWm9uZTogdHJ1ZSB9KSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1NRTChvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMudG9TUUxEYXRlKCl9ICR7dGhpcy50b1NRTFRpbWUob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50b0lTTygpIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHRoZSBSRVBMLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gYERhdGVUaW1lIHsgdHM6ICR7dGhpcy50b0lTTygpfSwgem9uZTogJHt0aGlzLnpvbmUubmFtZX0sIGxvY2FsZTogJHt0aGlzLmxvY2FsZX0gfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgRGF0ZVRpbWUgeyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggbWlsbGlzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuIEFsaWFzIG9mIHtAbGluayBEYXRlVGltZSN0b01pbGxpc31cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy50b01pbGxpcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b01pbGxpcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyAvIDEwMDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyAoYXMgYSB3aG9sZSBudW1iZXIpIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvVW5peEludGVnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IE1hdGguZmxvb3IodGhpcy50cyAvIDEwMDApIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBCU09OIHNlcmlhbGl6YWJsZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICB0b0JTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9KU0RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIERhdGVUaW1lJ3MgeWVhciwgbW9udGgsIGRheSwgYW5kIHNvIG9uLlxuICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgZm9yIGdlbmVyYXRpbmcgdGhlIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b09iamVjdCgpIC8vPT4geyB5ZWFyOiAyMDE3LCBtb250aDogNCwgZGF5OiAyMiwgaG91cjogMjAsIG1pbnV0ZTogNDksIHNlY29uZDogNDIsIG1pbGxpc2Vjb25kOiAyNjggfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICB0b09iamVjdChvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuXG4gICAgY29uc3QgYmFzZSA9IHsgLi4udGhpcy5jIH07XG5cbiAgICBpZiAob3B0cy5pbmNsdWRlQ29uZmlnKSB7XG4gICAgICBiYXNlLm91dHB1dENhbGVuZGFyID0gdGhpcy5vdXRwdXRDYWxlbmRhcjtcbiAgICAgIGJhc2UubnVtYmVyaW5nU3lzdGVtID0gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtO1xuICAgICAgYmFzZS5sb2NhbGUgPSB0aGlzLmxvYy5sb2NhbGU7XG4gICAgfVxuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IERhdGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9KU0RhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU4pO1xuICB9XG5cbiAgLy8gQ09NUEFSRVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gRGF0ZVRpbWVzIGFzIGEgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgRGF0ZVRpbWUgdG8gY29tcGFyZSB0aGlzIG9uZSB0b1xuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciBhcnJheSBvZiB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgaTEgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgyLTA1LTI1VDA5OjQ1JyksXG4gICAqICAgICBpMiA9IERhdGVUaW1lLmZyb21JU08oJzE5ODMtMTAtMTRUMTA6MzAnKTtcbiAgICogaTIuZGlmZihpMSkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA0MzgwNzUwMDAwMCB9XG4gICAqIGkyLmRpZmYoaTEsICdob3VycycpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMjE2OC43NSB9XG4gICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTkuMDMxMjUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJywgJ2hvdXJzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LCBob3VyczogMC43NSB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgZGlmZihvdGhlckRhdGVUaW1lLCB1bml0ID0gXCJtaWxsaXNlY29uZHNcIiwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyRGF0ZVRpbWUuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJjcmVhdGVkIGJ5IGRpZmZpbmcgYW4gaW52YWxpZCBEYXRlVGltZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBkdXJPcHRzID0geyBsb2NhbGU6IHRoaXMubG9jYWxlLCBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLCAuLi5vcHRzIH07XG5cbiAgICBjb25zdCB1bml0cyA9IG1heWJlQXJyYXkodW5pdCkubWFwKER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgb3RoZXJJc0xhdGVyID0gb3RoZXJEYXRlVGltZS52YWx1ZU9mKCkgPiB0aGlzLnZhbHVlT2YoKSxcbiAgICAgIGVhcmxpZXIgPSBvdGhlcklzTGF0ZXIgPyB0aGlzIDogb3RoZXJEYXRlVGltZSxcbiAgICAgIGxhdGVyID0gb3RoZXJJc0xhdGVyID8gb3RoZXJEYXRlVGltZSA6IHRoaXMsXG4gICAgICBkaWZmZWQgPSBkaWZmKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgZHVyT3B0cyk7XG5cbiAgICByZXR1cm4gb3RoZXJJc0xhdGVyID8gZGlmZmVkLm5lZ2F0ZSgpIDogZGlmZmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgRGF0ZVRpbWUgYW5kIHJpZ2h0IG5vdy5cbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNkaWZmfVxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgZGlmZk5vdyh1bml0ID0gXCJtaWxsaXNlY29uZHNcIiwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuZGlmZihEYXRlVGltZS5ub3coKSwgdW5pdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIGVuZCBwb2ludCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICB1bnRpbChvdGhlckRhdGVUaW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEludGVydmFsLmZyb21EYXRlVGltZXModGhpcywgb3RoZXJEYXRlVGltZSkgOiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgRGF0ZVRpbWUgaXMgaW4gdGhlIHNhbWUgdW5pdCBvZiB0aW1lIGFzIGFub3RoZXIgRGF0ZVRpbWUuXG4gICAqIEhpZ2hlci1vcmRlciB1bml0cyBtdXN0IGFsc28gYmUgaWRlbnRpY2FsIGZvciB0aGlzIGZ1bmN0aW9uIHRvIHJldHVybiBgdHJ1ZWAuXG4gICAqIE5vdGUgdGhhdCB0aW1lIHpvbmVzIGFyZSAqKmlnbm9yZWQqKiBpbiB0aGlzIGNvbXBhcmlzb24sIHdoaWNoIGNvbXBhcmVzIHRoZSAqKmxvY2FsKiogY2FsZW5kYXIgdGltZS4gVXNlIHtAbGluayBEYXRlVGltZSNzZXRab25lfSB0byBjb252ZXJ0IG9uZSBvZiB0aGUgZGF0ZXMgaWYgbmVlZGVkLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWs7IG9ubHkgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lIGlzIHVzZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuaGFzU2FtZShvdGhlckRULCAnZGF5Jyk7IC8vfj4gdHJ1ZSBpZiBvdGhlckRUIGlzIGluIHRoZSBzYW1lIGN1cnJlbnQgY2FsZW5kYXIgZGF5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTYW1lKG90aGVyRGF0ZVRpbWUsIHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpO1xuICAgIGNvbnN0IGFkanVzdGVkVG9ab25lID0gdGhpcy5zZXRab25lKG90aGVyRGF0ZVRpbWUuem9uZSwgeyBrZWVwTG9jYWxUaW1lOiB0cnVlIH0pO1xuICAgIHJldHVybiAoXG4gICAgICBhZGp1c3RlZFRvWm9uZS5zdGFydE9mKHVuaXQsIG9wdHMpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSBhZGp1c3RlZFRvWm9uZS5lbmRPZih1bml0LCBvcHRzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIERhdGVUaW1lcyBhcmUgZXF1YWwgaWYgYW5kIG9ubHkgaWYgdGhleSByZXByZXNlbnQgdGhlIHNhbWUgbWlsbGlzZWNvbmQsIGhhdmUgdGhlIHNhbWUgem9uZSBhbmQgbG9jYXRpb24sIGFuZCBhcmUgYm90aCB2YWxpZC5cbiAgICogVG8gY29tcGFyZSBqdXN0IHRoZSBtaWxsaXNlY29uZCB2YWx1ZXMsIHVzZSBgK2R0MSA9PT0gK2R0MmAuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyIC0gdGhlIG90aGVyIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5pc1ZhbGlkICYmXG4gICAgICBvdGhlci5pc1ZhbGlkICYmXG4gICAgICB0aGlzLnZhbHVlT2YoKSA9PT0gb3RoZXIudmFsdWVPZigpICYmXG4gICAgICB0aGlzLnpvbmUuZXF1YWxzKG90aGVyLnpvbmUpICYmXG4gICAgICB0aGlzLmxvYy5lcXVhbHMob3RoZXIubG9jKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRoaXMgdGltZSByZWxhdGl2ZSB0byBub3csIHN1Y2ggYXMgXCJpbiB0d28gZGF5c1wiLiBDYW4gb25seSBpbnRlcm5hdGlvbmFsaXplIGlmIHlvdXJcbiAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT1cImxvbmdcIl0gLSB0aGUgc3R5bGUgb2YgdW5pdHMsIG11c3QgYmUgXCJsb25nXCIsIFwic2hvcnRcIiwgb3IgXCJuYXJyb3dcIlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdCBvciBhcnJheSBvZiB1bml0czsgaWYgb21pdHRlZCwgb3IgYW4gYXJyYXksIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSBiZXN0IHVuaXQuIFVzZSBhbiBhcnJheSBvciBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwic2Vjb25kc1wiXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucm91bmQ9dHJ1ZV0gLSB3aGV0aGVyIHRvIHJvdW5kIHRoZSBudW1iZXJzIGluIHRoZSBvdXRwdXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJpbiAxIGRheVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gXCJkZW50cm8gZGUgMSBkXHUwMEVEYVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGFucyAyMyBoZXVyZXNcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoeyB1bml0OiBcImhvdXJzXCIgfSkgLy89PiBcIjQ4IGhvdXJzIGFnb1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgaG91cnM6IDM2IH0pLnRvUmVsYXRpdmUoeyByb3VuZDogZmFsc2UgfSkgLy89PiBcIjEuNSBkYXlzIGFnb1wiXG4gICAqL1xuICB0b1JlbGF0aXZlKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBiYXNlID0gb3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHsgem9uZTogdGhpcy56b25lIH0pLFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/ICh0aGlzIDwgYmFzZSA/IC1vcHRpb25zLnBhZGRpbmcgOiBvcHRpb25zLnBhZGRpbmcpIDogMDtcbiAgICBsZXQgdW5pdHMgPSBbXCJ5ZWFyc1wiLCBcIm1vbnRoc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCJdO1xuICAgIGxldCB1bml0ID0gb3B0aW9ucy51bml0O1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMudW5pdCkpIHtcbiAgICAgIHVuaXRzID0gb3B0aW9ucy51bml0O1xuICAgICAgdW5pdCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmZSZWxhdGl2ZShiYXNlLCB0aGlzLnBsdXMocGFkZGluZyksIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBudW1lcmljOiBcImFsd2F5c1wiLFxuICAgICAgdW5pdHMsXG4gICAgICB1bml0LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LCBzdWNoIGFzIFwieWVzdGVyZGF5XCIgb3IgXCJuZXh0IG1vbnRoXCIuXG4gICAqIE9ubHkgaW50ZXJuYXRpb25hbGl6ZXMgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdDsgaWYgb21pdHRlZCwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIHVuaXQuIFVzZSBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgb3IgXCJkYXlzXCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoKSAvLz0+IFwidG9tb3Jyb3dcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoXCJlc1wiKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKCkgLy89PiBcIlwibWFcdTAwRjFhbmFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGVtYWluXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICovXG4gIHRvUmVsYXRpdmVDYWxlbmRhcihvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4gZGlmZlJlbGF0aXZlKG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7IHpvbmU6IHRoaXMuem9uZSB9KSwgdGhpcywge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG51bWVyaWM6IFwiYXV0b1wiLFxuICAgICAgdW5pdHM6IFtcInllYXJzXCIsIFwibW9udGhzXCIsIFwiZGF5c1wiXSxcbiAgICAgIGNhbGVuZGFyeTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbiBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1pbiBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICBzdGF0aWMgbWluKC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtaW4gcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBiZXN0QnkoZGF0ZVRpbWVzLCAoaSkgPT4gaS52YWx1ZU9mKCksIE1hdGgubWluKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1heCBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWF4aW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1heCBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICBzdGF0aWMgbWF4KC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBiZXN0QnkoZGF0ZVRpbWVzLCAoaSkgPT4gaS52YWx1ZU9mKCksIE1hdGgubWF4KTtcbiAgfVxuXG4gIC8vIE1JU0NcblxuICAvKipcbiAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIGRlc2NyaXB0aW9uKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCB9ID0gb3B0aW9ucyxcbiAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGRlZmF1bHRUb0VOOiB0cnVlLFxuICAgICAgfSk7XG4gICAgcmV0dXJuIGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZVRvVXNlLCB0ZXh0LCBmbXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0RXhwbGFpbiBpbnN0ZWFkXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZ0V4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEZPUk1BVCBQUkVTRVRTXG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgMTAvMTQvMTk4M1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX1NIT1JUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfU0hPUlQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX01FRCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX01FRDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIE9jdCAxNCwgMTk4MydcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9NRURfV0lUSF9XRUVLREFZKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfTUVEX1dJVEhfV0VFS0RBWTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX0ZVTEwoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9GVUxMO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfSFVHRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX0hVR0U7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9TSU1QTEUoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9TSU1QTEU7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9XSVRIX1NIT1JUX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9XSVRIX0xPTkdfT0ZGU0VUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfV0lUSF9MT05HX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1NJTVBMRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1NJTVBMRTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBFRFQnLCBhbHdheXMgMjQtaG91ci5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfU0hPUlQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRUQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfTUVEO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCAxNCBPY3QgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVk7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfRlVMTCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9GVUxMO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfSFVHRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9IVUdFO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFM7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJpZW5kbHlEYXRlVGltZShkYXRlVGltZWlzaCkge1xuICBpZiAoRGF0ZVRpbWUuaXNEYXRlVGltZShkYXRlVGltZWlzaCkpIHtcbiAgICByZXR1cm4gZGF0ZVRpbWVpc2g7XG4gIH0gZWxzZSBpZiAoZGF0ZVRpbWVpc2ggJiYgZGF0ZVRpbWVpc2gudmFsdWVPZiAmJiBpc051bWJlcihkYXRlVGltZWlzaC52YWx1ZU9mKCkpKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21KU0RhdGUoZGF0ZVRpbWVpc2gpO1xuICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIHR5cGVvZiBkYXRlVGltZWlzaCA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tT2JqZWN0KGRhdGVUaW1laXNoKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICBgVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogJHtkYXRlVGltZWlzaH0sIG9mIHR5cGUgJHt0eXBlb2YgZGF0ZVRpbWVpc2h9YFxuICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyByZWdpc3Ryb1RpZW1wb0FQSSB7XG4gICAgcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgIHRoaXMudXRpbHNBcGkgPSBuZXcgdXRpbHNBUEkocGx1Z2luKTtcbiAgICAgIFxuICAgIH1cbiAgICBcblxuICAgIGFzeW5jIGluaWNpYXJSZWdpc3Rybygpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgIFxuICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuY3JlYXJPYmpldG9SZWdpc3Rybyh0aGlzLnBsdWdpbik7XG4gICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkudmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgICAgIHJldHVybiByZWdpc3RybzsgLy8gRGV2dWVsdmUgZWwgcmVnaXN0cm8gYWN0dWFsIHkgZGV0aWVuZSBsYSBlamVjdWNpXHUwMEYzbiBhcXVcdTAwRURcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm8sdGhpcy5wbHVnaW4uYXBwKVxuICAgICAgICBpZiAocmVnaXN0cm8uZGV0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvOyAvLyBEZXZ1ZWx2ZSBlbCByZWdpc3RybyBhY3R1YWwgeSBkZXRpZW5lIGxhIGVqZWN1Y2lcdTAwRjNuIGFxdVx1MDBFRFxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkuY29uc3RydWlyTm9tYnJleUFsaWFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApXG4gICAgICAgIHJldHVybiByZWdpc3RybztcbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBJbnZvY2FkbyBkZXNkZSBlbCB0ZW1wbGF0ZSBkZSB0ZW1wbGF0ZXIgUGFzbyAzIGRlIDNcbiAgICBhc3luYyByZXRvbWFyUmVnaXN0cm8oaWQpe1xuICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvXG4gICAgICB0cnkge1xuICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmNyZWFyT2JqZXRvUmVnaXN0cm8odGhpcy5wbHVnaW4pO1xuICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS52ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgaWYgKHJlZ2lzdHJvLmRldGVuZXIpIHtcbiAgICAgICAgICByZXR1cm4gcmVnaXN0cm87IC8vIERldnVlbHZlIGVsIHJlZ2lzdHJvIGFjdHVhbCB5IGRldGllbmUgbGEgZWplY3VjaVx1MDBGM24gYXF1XHUwMEVEXG4gICAgICB9XG4gICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICBsZXQgcmVnaXN0cm9BbnRpZ3VvO1xuICAgICAgXG4gICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmlkID09PSBwYXJzZUludChpZCkpIHtcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvQW50aWd1byA9IHsgZmlsZSwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhIH07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZWJ1Z2dlclxuICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm9BbnRpZ3VvPy5mcm9udG1hdHRlci50aXR1bG8gPyByZWdpc3Ryb0FudGlndW8uZnJvbnRtYXR0ZXIudGl0dWxvIDogXCJTaW4gVGl0dWxvXCI7XG4gICAgICByZWdpc3Ryby5hc3VudG9SZXRvbWFkbyA9IHJlZ2lzdHJvQW50aWd1bz8uZnJvbnRtYXR0ZXIuYXN1bnRvID8gcmVnaXN0cm9BbnRpZ3VvLmZyb250bWF0dGVyLmFzdW50byA6IG51bGw7XG4gICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmNvbnN0cnVpck5vbWJyZXlBbGlhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKVxuICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICB9XG5cbiAgLy8gSW52b2NhZG8gcGFyYSBjcmVhciBlbCB0ZW1wbGF0ZSBkZSBSZXRvbWFyIFBhc28gMSBkZSAzXG4gIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICBkZWJ1Z2dlcjtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgIH1cbiAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICBjb25zdCB0cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gIH1cblxuXG5cbiAgLy8gU29icmVjYXJnYSBkZSBtXHUwMEU5dG9kbyBwYXJhIGxvcyBkaWZlcmVudGVzIHRpcG9zIGRlIGVudHJhZGFcbiAgYXN5bmMgY2VycmFyUmVnaXN0cm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIGFzeW5jIGNlcnJhclJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgYXN5bmMgY2VycmFyUmVnaXN0cm8oKTogUHJvbWlzZTx2b2lkPjtcbiAgLy8gSW1wbGVtZW50YWNpXHUwMEYzbiBkZWwgbVx1MDBFOXRvZG8gY29uIHVuaVx1MDBGM24gZGUgdGlwb3MgcGFyYSBlbCBwYXJcdTAwRTFtZXRybyBpZFxuICBhc3luYyBjZXJyYXJSZWdpc3RybyhyZWdpc3Rybz86IG51bWJlciB8IHN0cmluZyB8IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdzdHJpbmcnKSB7XG4gICAgcmVnaXN0cm8gPSBwYXJzZUludChyZWdpc3Rybyk7XG4gICAgfVxuICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gblx1MDBGQW1lcm8gLT4gQ3VhbmRvIGxsZWdhIGRlbCBib3RvbiBkZSBsYSB0YWJsYSBkZSByZWdpc3Ryb3MgZGVsIGRcdTAwRURhLlxuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgbGV0IGluZm9Ob3RhO1xuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmlkID09PSByZWdpc3Rybykge1xuICAgICAgICAgICAgICAgICAgICBpbmZvTm90YSA9IHsgZmlsZSB9O1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIixcImhvcmFGaW5hbFwiLFwidGllbXBvVHJhYmFqYWRvXCJdO1xuICAgICAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYXJjaGl2YXJOb3RhKGluZm9Ob3RhLCBjYW1wb3MpO1xuICAgICAgICBsZXQgdGV4dG9SZXN1bHRhZG8gPSBPYmplY3QuZW50cmllcyhyZXN1bHRhZG8pLm1hcCgoW3Byb3BpZWRhZCwgdmFsb3JdKSA9PiBgJHtwcm9waWVkYWR9OiAke3ZhbG9yfWApLmpvaW4oJywgJyk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFRhcmVhIGNlcnJhZGEuIENhbXBvcyBhY3R1YWxpemFkb3M6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gICAgfVxuICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gVEZpbGVcbiAgICBlbHNlIGlmIChyZWdpc3RybyBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgbGV0IGluZm9Ob3RhID0ge2ZpbGU6IHJlZ2lzdHJvfTtcbiAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIixcImhvcmFGaW5hbFwiLFwidGllbXBvVHJhYmFqYWRvXCJdO1xuICAgICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFyY2hpdmFyTm90YShpbmZvTm90YSwgY2FtcG9zKTtcbiAgICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICAgIG5ldyBOb3RpY2UoYFRhcmVhIGNlcnJhZGEuIENhbXBvcyBhY3R1YWxpemFkb3M6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIGN1YW5kbyBubyBzZSBwcm9wb3JjaW9uYSBhcmd1bWVudG9zLCBzZSBidXNjYSBsYSB0YXJlYSBhY3RpdmEgeSBzZSBjaWVycmEuXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcCk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGxldCBpbmZvTm90YSA9IHtmaWxlOiByZWdpc3Ryb307XG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgICAgIGxldCBjYW1wb3MgPSBbXCJmZWNoYVwiLFwiaG9yYUZpbmFsXCIsXCJ0aWVtcG9UcmFiYWphZG9cIl07XG4gICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hcmNoaXZhck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICAgICAgbmV3IE5vdGljZShgVGFyZWEgY2VycmFkYS4gQ2FtcG9zIGFjdHVhbGl6YWRvczogJHt0ZXh0b1Jlc3VsdGFkb31gKTtcbiAgICB9XG4gIH1cblxuXG4gIC8vIFNvYnJlY2FyZ2EgZGUgbVx1MDBFOXRvZG8gcGFyYSBsb3MgZGlmZXJlbnRlcyB0aXBvcyBkZSBlbnRyYWRhXG4gIGFzeW5jIGRldGFsbGVSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKCk6IFByb21pc2U8dm9pZD47XG4gIC8vIEltcGxlbWVudGFjaVx1MDBGM24gZGVsIG1cdTAwRTl0b2RvIGNvbiB1bmlcdTAwRjNuIGRlIHRpcG9zIHBhcmEgZWwgcGFyXHUwMEUxbWV0cm8gaWRcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKHJlZ2lzdHJvPzogbnVtYmVyIHwgc3RyaW5nIHwgVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgbGV0IGluZm9Ob3RhO1xuICAgIGRlYnVnZ2VyO1xuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdzdHJpbmcnKSB7XG4gICAgcmVnaXN0cm8gPSBwYXJzZUludChyZWdpc3Rybyk7XG4gICAgfVxuICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gblx1MDBGQW1lcm8gLT4gQ3VhbmRvIGxsZWdhIGRlbCBib3RvbiBkZSBsYSB0YWJsYSBkZSByZWdpc3Ryb3MgZGVsIGRcdTAwRURhLlxuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5pZCA9PT0gcmVnaXN0cm8pIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mb05vdGEgPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTFx1MDBGM2dpY2Egc2kgJ2lkJyBlcyB1biBURmlsZVxuICAgIGVsc2UgaWYgKHJlZ2lzdHJvIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBpbmZvTm90YSA9IHtmaWxlOiByZWdpc3Ryb307XG4gICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7IFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBjdWFuZG8gbm8gc2UgcHJvcG9yY2lvbmEgYXJndW1lbnRvcywgc2UgYnVzY2EgbGEgdGFyZWEgYWN0aXZhIHkgc2UgY2llcnJhLlxuICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHApO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgICBpbmZvTm90YSA9IHtmaWxlOiByZWdpc3Ryb307XG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgfVxuICAgIGxldCBjYW1wb3MgPSBbXCJkZXNjcmlwY2lvbl9SZWdpc3Ryb1RpZW1wb1wiXTtcbiAgICBkZWJ1Z2dlcjtcbiAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYWN0dWFsaXphck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgbGV0IHRleHRvUmVzdWx0YWRvID0gT2JqZWN0LmVudHJpZXMocmVzdWx0YWRvKS5tYXAoKFtwcm9waWVkYWQsIHZhbG9yXSkgPT4gYCR7cHJvcGllZGFkfTogJHt2YWxvcn1gKS5qb2luKCcsICcpO1xuICAgIG5ldyBOb3RpY2UoYERlc2NyaXBjaVx1MDBGM24gYWN0dWFsaXphZGE6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gIH1cblxuICBnZXRUcCgpe1xuICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gICBcbiAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgbGV0IHRwID0ge31cbiAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgaWYgKCF0cC5maWxlKSB7XG4gICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgY29uIHByb3BpZWRhZGVzIFwiZmlsZVwiIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgcmV0dXJuIHRwO1xufVxuXG5cbiAgfVxuICAiLCAiLy9pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHtURmlsZSwgVEZvbGRlciwgUGx1Z2luLCBOb3RpY2V9IGZyb20gJ29ic2lkaWFuJ1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7XG5cblxuZXhwb3J0IGNsYXNzIHN0YXJ0ZXJBUEkge1xuICAgIC8vcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGluZm9TdWJzaXN0ZW1hOiBvYmplY3Q7IC8vIEFzdW1pZW5kbyBxdWUgZXMgdW4gc3RyaW5nXG4gICAgcHJpdmF0ZSB0cDogb2JqZWN0O1xuICAgIHByaXZhdGUgbm90YTogb2JqZWN0O1xuICAgIHByaXZhdGUgcGF0aENhbXBvczogc3RyaW5nOyBcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICAvLyBJbmljaWFsaXphIGZvbGRlciBlIGluZGljZSBjb24gdmFsb3JlcyBwcmVkZXRlcm1pbmFkb3MgbyBsXHUwMEYzZ2ljYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSB7fTtcbiAgICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIE5vdGEgZGVzZGUgdGVtcGxhdGVcbiAgICBhc3luYyBjcmVhdGVOb3RlKHN1YnNpc3RlbWE6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl8ke3N1YnNpc3RlbWF9YF19L1BsdCAtICR7c3Vic2lzdGVtYX0ubWRgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEludGVudGFyIG9idGVuZXIgZWwgYXJjaGl2byBwb3IgcGF0aFxuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgYXJjaGl2byBlcyB1biBURmlsZVxuICAgICAgICAgICAgaWYgKCEodGVtcGxhdGVGaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gVEZpbGUsIG1hbmVqYXIgZWwgZXJyb3JcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVsIHRlbXBsYXRlIHBhcmEgXCIke3N1YnNpc3RlbWF9XCIgbm8gc2UgZW5jb250clx1MDBGMyBvIG5vIGVzIHVuIGFyY2hpdm8gdlx1MDBFMWxpZG8uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBkdENvbnNlcSA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEhIbW1zcycpO1xuICAgICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHtzdWJzaXN0ZW1hfSAke2R0Q29uc2VxfWA7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgICAgICBpZiAoIWZvbGRlcikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTGEgY2FycGV0YSBcIkluYm94XCIgbm8gc2UgZW5jb250clx1MDBGMy5gKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICAgICAgbGV0IGNyZWFyTm90YSA9IHRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjcmVhck5vdGEgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkxhIGZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIG5vdGFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZUZpbGUsIGZpbGVuYW1lLCB0cnVlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICAgICAgICAgICAgXG4gICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBwdWVkZXMgbWFuZWphciBlbCBlcnJvciwgcG9yIGVqZW1wbG8sIG1vc3RyYW5kbyB1biBtZW5zYWplIGFsIHVzdWFyaW9cbiAgICAgICAgICAgIC8vIFB1ZWRlcyByZWVtcGxhemFyIGVzdGUgbWVuc2FqZSBkZSBlcnJvciBwb3IgY3VhbHF1aWVyIGFjY2lcdTAwRjNuIHF1ZSBjb25zaWRlcmVzIGFkZWN1YWRhXG4gICAgICAgICAgICBhbGVydChgRXJyb3IgYWwgY3JlYXIgbGEgbm90YTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG5cbiAgICAvLyBjcmVhck5vdGEgLT4gTGxlbmFyIGxvcyBjYW1wb3MgWUFNTCBkZWwgdGVtcGxhdGUuXG4gICAgYXN5bmMgZmlsbE5vdGUoaW5mb1N1YnNpc3RlbWE6IHsgZm9sZGVyOiBzdHJpbmcgfCBudW1iZXI7IGluZGljZTogc3RyaW5nIHwgbnVtYmVyOyB9LCBjYW1wb3M6IGFueSkge1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9TdWJzaXN0ZW1hLCBpbmZvU3Vic2lzdGVtYSk7IFxuICAgICAgICBpZiAodGhpcy5pbmZvU3Vic2lzdGVtYS5kZWZpbmVkKXtcbiAgICAgICAgLy8gaW5mb1N1YnNpc3RlbWEuZm9sZGVyIGUgaW5kaWNlIGNvbnRpZW5lbiBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIGxhcyBjYXJwZXRhc1xuXHQgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuZm9sZGVyXVxuXHQgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuaW5kaWNlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuaW5kaWNlXVxuXHQgICAgICAgIC8vIG5vdGEgYWhvcmEgdGllbmUgdG9kYSBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIGxhIHBsYW50aWxsYVxuXHQgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5ub3RhLCBpbmZvU3Vic2lzdGVtYSk7IC8vIE5vdGEgZXMgZWwgb2JqZXRvIHF1ZSBzZSBkZXZvbHZlclx1MDBFMS5cblx0XHR9XG5cdFx0dHJ5IHtcblx0XHRcdGZvciAobGV0IGNhbXBvIG9mIGNhbXBvcykgeyAgICAgICBcblx0XHRcdC8vIFVzYSBlbCBub21icmUgZGVsIGNhbXBvIHBhcmEgY29uc3RydWlyIGVsIG5vbWJyZSBkZSBsYSBmdW5jaVx1MDBGM24gKHAuIGVqLiwgXCJnZXRJZFwiKVxuXHRcdFx0XHRkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG5cdFx0XHRcdC8vIFZlcmlmaWNhIHNpIGV4aXN0ZSB1bmEgZnVuY2lcdTAwRjNuIGNvbiBlc2Ugbm9tYnJlLlxuXHRcdFx0XHRpZiAodHlwZW9mIHRoaXNbZnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHQvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYSB5IGFzaWduYSBlbCByZXN1bHRhZG8gYWwgY2FtcG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIG5vdGEuXG5cdFx0XHRcdFx0dGhpcy5ub3RhW2NhbXBvXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYExhIGZ1bmNpXHUwMEYzbiAke2Z1bmN0aW9uTmFtZX0gbm8gZXN0XHUwMEUxIGRlZmluaWRhLmApO1xuXHRcdFx0XHR9XG4gICAgICAgICAgICAgICAgfSAvLyBGaW4gRm9yIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cbiAgICBcblxuICAgIGdldFRwKCl7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vICBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlMgY3VhbmRvIGN1cnJlbnQgRnVuY3Rpb25zIGVzdGEgY2FyZ2Fkby5cbiAgICAgICAgLy9jb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbJ3RlbXBsYXRlci1vYnNpZGlhbiddO1xuICAgICAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgICAgIC8vIC0+IHZlcnNpb24gcXVlIGZhbGxhIHNpIG5vIGVzdGEgYXJyaWJhIGVsIHBsdWdpbiBwb3JxdWUgaGFjZSBnZXQgZGVsIHBsdWdpbiBkaXJlY3RvLiBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbigndGVtcGxhdGVyLW9ic2lkaWFuJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICB0cC5maWxlID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcImZpbGVcIik7XG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5zeXN0ZW0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ3RwIGVuIFlBTUxVcGRhdGVyQVBJIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgcmV0dXJuIHRwO1xuICAgIH1cblxuICAgIC8vIEVqZW1wbG8gZGUgZnVuY2lcdTAwRjNuIGdldENhbXBvIHNpbXVsYWRhLiBEZWJlcyBkZWZpbmlyIGZ1bmNpb25lcyBzaW1pbGFyZXMgcGFyYSAnaWQnLCAnZmVjaGEnLCBldGMuXG4gICAgYXN5bmMgZ2V0SWQoKSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbWF4SWQgPSAwO1xuICAgICAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKChmaWxlOiB7IHBhdGg6IHN0cmluZzsgfSkgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOiAgICBcbiAgICAgICAgICAgICAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpICYmIG1ldGFkYXRhLnR5cGUgJiYgbWV0YWRhdGEudHlwZSA9PT0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICBcblxuICAgICAgICAvLyBFbCBwclx1MDBGM3hpbW8gSUQgZGlzcG9uaWJsZVxuICAgICAgICBjb25zdCBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgICAgIC8vdGhpcy5ub3RhLmlkID0gbmV4dElkO1xuICAgICAgICByZXR1cm4gbmV4dElkO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRGZWNoYSgpIHtcbiAgICAgICAgbGV0IGZlY2hhO1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgICAgIGxldCBmZWNoYU9yaWdpbmFsID0gYXdhaXQgcHJvbXB0KGBDb25maXJtYSBsYSBmZWNoYSBkZSBsYSB0cmFuc2FjY2lcdTAwRjNuOiBgLCBgJHtEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eS1NTS1kZCBISDptbScpfWAsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gUGFyc2VhbmRvIGxhIGZlY2hhIG9yaWdpbmFsIHV0aWxpemFuZG8gbW9tZW50XG4gICAgICAgICAgICAgICAgbGV0IGZlY2hhTW9tZW50ID0gd2luZG93Lm1vbWVudChmZWNoYU9yaWdpbmFsLCBcIllZWVktTU0tREQgSEg6bW1cIik7XG4gICAgICAgICAgICAgICAgLy8gRm9ybWF0ZWFuZG8gbGEgbnVldmEgZmVjaGEgYWwgZm9ybWF0byBkZXNlYWRvXG4gICAgICAgICAgICAgICAgZmVjaGEgPSBmZWNoYU1vbWVudC5mb3JtYXQoXCJZWVlZLU1NLUREIGRkZGQgSEhtbXNzXCIpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgIGZlY2hhID0gIHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG4gICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgICBcblxuICAgICAgICBcbiAgICB9XG5cbiAgICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICAgICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRTZWNJZCgpe1xuXG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFRpdHVsbygpe1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGxldCB0aXR1bG87XG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJUeFwiOiAvL1RyYW5zYWNjaVx1MDBGM25cbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBhd2FpdCBwcm9tcHQoYE5vbWJyZSBkZSBlc3RlKGEpICR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX1gLCBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiT0NBXCI6IC8vT2JqZXRpdm9Db21wYXNzQW51YWxcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBhd2FpdCBwcm9tcHQoYEN1YWwgZXMgdHUgb2JqZXRpdm8gZW4gJHt0aGlzLm5vdGEuYVx1MDBGMW99IHBhcmEgJHt0aGlzLm5vdGEuYXJlYVZpZGF9P2AsIGBWb3kgYSBgLCB0cnVlLCB0cnVlKSAvLyA0IHBhcmFtZXRybyB0cnVlOiBNdWx0aWxpbmVhLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBhd2FpdCBwcm9tcHQoYFRpdHVsbyBkZSBlc3RlKGEpICR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX1gLCBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG4gICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0aXR1bG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgLy90aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCl7XG4gICAgICAgIGxldCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgbGV0IGRlc2NyaXBjaW9uO1xuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICAgZGVzY3JpcGNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZRdWllcmVzIGFncmVnYXIgdW5hIGRlc2NyaXBjaVx1MDBGM24/XCIsIFwiIFwiICsgYEVzdGEgYW5vdGFjaVx1MDBGM24gZXMgc29icmUgJHt0aGlzLm5vdGEudGl0dWxvfWAsIGZhbHNlLCB0cnVlIClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlR4XCI6XG4gICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uID0gYXdhaXQgcHJvbXB0KGBcdTAwQkZRdWllcmVzIGFncmVnYXIgdW5hIGRlc2NyaXBjaVx1MDBGM24gZGUgJHt0aGlzLm5vdGEudGl0dWxvfT9gLCBcIiBcIiArIGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9IGRlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChgXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIHVuYSBkZXNjcmlwY2lcdTAwRjNuIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb30/YCwgXCIgXCIsIGZhbHNlLCB0cnVlIClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uID0gYXdhaXQgcHJvbXB0KGBcdTAwQkZRdWllcmVzIGFncmVnYXIgdW5hIGRlc2NyaXBjaVx1MDBGM24gc29icmUgJHt0aGlzLm5vdGEudGl0dWxvfT9gLCBcIiBcIiwgZmFsc2UsIHRydWUgKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRlNvYnJlIHF1ZSBlcyBlc3RlIHByb3llY3RvIEdURD9cIiwgXCIgXCIgKyBgUHJveWVjdG8gc29icmUgYCwgZmFsc2UsIHRydWUgKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiT0NBXCI6XG4gICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIGRldGFsbGVzIGRlIHR1IG9iamV0aXZvP1wiLCBgJHt0aGlzLm5vdGEudGl0dWxvfWAsIGZhbHNlLCB0cnVlIClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIFxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChkZXNjcmlwY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICAvL3RoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICBsZXQgbm90YSA9IHthbGlhc2VzOiBbXX0gICAgICAgXG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgY2FzZSBcIkNQRVwiOiAgLy8gQ29udGVuaWRvIHBhcmEgRXN0dWRpb1xuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhICE9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCIpe1xuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyAwIC0+IE5vbWJyZSwgMSAtPiB0eXBlICsgTm9tYnJlXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibkFWXCI6XG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYEFWLyR7dGhpcy5ub3RhLmFyZWFWaWRhfWApXG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYEFWLyR7dGhpcy5ub3RhLmdydXBvfS8ke3RoaXMubm90YS5hcmVhVmlkYX1gKVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgIFxuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEuZ3J1cG99LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgICAgICBub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50cmltZXN0cmV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHtBcnJheS5pc0FycmF5KHRoaXMubm90YS5hcmVhVmlkYSkgPyB0aGlzLm5vdGEuYXJlYVZpZGFbMF0gOiB0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApO1xuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke0FycmF5LmlzQXJyYXkodGhpcy5ub3RhLmFyZWFWaWRhKSA/IHRoaXMubm90YS5hcmVhVmlkYVswXSA6IHRoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgICAgICBicmVhazsgICAgXG4gICAgICAgICAgICBjYXNlIFwiT0NBXCI6XG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS5hXHUwMEYxb30vJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgICAgICAgICBub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgICAgICAgICBub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkNBSVwiOiAvLyBDb21wYXNzQW51YWxJbmljaW9cbiAgICAgICAgICAgICAgICBub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfS8ke3RoaXMubm90YS5hXHUwMEYxb31gKSAgIFxuICAgICAgICAgICAgICAgIG5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9LyR7dGhpcy5ub3RhLmlkfWApICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ1RJXCI6IC8vIENvbXBhc3NUcmltZXN0cmFsSW5pY2lvXG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfWApICAgXG4gICAgICAgICAgICAgICAgbm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0vJHt0aGlzLm5vdGEuaWR9YCkgICBcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gICAgICAgXG5cbiAgICAgICAgICAgIHJldHVybiBub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuXG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBzdWJzaXN0ZW1hcywgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgIHN3aXRjaCh0aXBvU2lzdGVtYSkgeyAvLyBFc3RveSBjcmVhbmRvIHVuOiBcbiAgICAgICAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJDUEVcIjogIC8vIENvbnRlbmlkbyBwYXJhIEVzdHVkaW9cbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGE/LmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIFx1MDBDMXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gQ3JlYW5kbyBSUlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6ICAvLyBFc3RveSBDcmVhbmRvIHVuIFBRIFxuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUFEgcmVxdWllcmUgb2JsaWdhdG9yaWFtZW50ZSB0ZW5lciBBcmVhIGRlIFZpZGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhICE9PSB1bmRlZmluZWQgJiYgbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENcdTAwRjNkaWdvIGEgZWplY3V0YXIgc2kgYXJlYVZpZGEgZXhpc3RlIHkgbm8gZXMgdW5hIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIHRpcG8gZGUgbm90YSBhY3RpdmEgY3JlYW5kbyB1biBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVW4gUHJveWVjdG8gZGUgUSBzb2xvIHB1ZWRlIGluaWNpYXIgZGUgdW4gQVYsIEFJIG8gUEdURC4gQXN1bnRvIG5vIGRlZmluaWRvLlwiKTsgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJlYSBkZSB2aWRhIGRlIGFjdGl2YSwgY3JlYW5kbyBQUSBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRvZG9zIGxvcyBwcm95ZWN0b3MgZGUgUSByZXF1aWVyZW4gQXJlYSBkZSBWaWRhLiBBc3VudG8gbm8gZGVmaW5pZG8uXCIpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNleyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgfSAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gUFFcbiAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjogLy8gQ3JlYW5kbyB1biBBSVxuICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaUFzdW50bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlci5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gXHUwMEMxcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMQUlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsQUkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAvLyBDYXNlIEFJIC0gQVZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBzd2l0Y2ggY2FzZSBzb2JyZSBlbCB0aXBvIGRlIG5vdGEgYWN0aXZhLlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIHVuIEFJXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogIC8vIEFzdW50byBEZSBsYSBub3RhIHF1ZSBlc3RcdTAwRTkgY3JlYW5kbyBjdWFuZG8gZXMgY3VhbHF1ZWlyIGNvc2FcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXBlbmRpZW5kbyBkZSBsYSBlc3RydWN0dXJhLCBnZXRBc3VudG8gZGViZXJpYSB0ZW5lciBzdSBjbGFzaWZpY2FjaVx1MDBGM24uIEFxdWkgdmFzIGEgdGVuZXIgdW4gZXJyb3IuXCIpIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IC8vIHN3aXRjaCB0aXBvKHNpc3RlbWEpIC0+IFNvYnJlIGxhIG5vdGEgcXVlIGVzdFx1MDBFOSBjcmVhbmRvLlxuXG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4ge3NpQXN1bnRvLCBub21icmU6IHBhZHJlc31cbiAgICB9XG5cbiAgICBhc3luYyBnZXRPdHJvc0FzdW50b3Moc3Vic2lzdGVtYXMpIHtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgY2FtcG8gPSBbXTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgc3Vic2lzdGVtYSBvZiBzdWJzaXN0ZW1hcykge1xuICAgICAgICAgICAgLy8gUHJlZ3VudGEgaW5pY2lhbCBwYXJhIGluY2x1aXIgYWxnXHUwMEZBbiBzdWJzaXN0ZW1hIGNvbW8gb3JpZ2VuXG4gICAgICAgICAgICBsZXQgaW5jbHV5ZSA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBgRGVzZWEgYWdyZWdhciBhbGd1biAke3N1YnNpc3RlbWF9IGFjdGl2byBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgIGlmICghaW5jbHV5ZSkgY29udGludWU7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBjb250aW5cdTAwRkFhIGNvbiBlbCBzaWd1aWVudGUgc3Vic2lzdGVtYVxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGxldCByZWN1cnNvc0FjdGl2b3MgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhzdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIGxldCBwcmltZXJBbGlhcyA9IHJlY3Vyc29zQWN0aXZvcy5tYXAoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YSAmJiBtZXRhZGF0YS5hbGlhc2VzICYmIG1ldGFkYXRhLmFsaWFzZXMubGVuZ3RoID4gMCA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICBcbiAgICAgICAgICAgIHdoaWxlIChyZWN1cnNvc0FjdGl2b3MubGVuZ3RoID4gMCkgeyAvLyBDb250aW5cdTAwRkFhIG1pZW50cmFzIGhheWEgcmVjdXJzb3MgYWN0aXZvcyBwYXJhIGVsZWdpclxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2VTZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIucGF0aCksIGZhbHNlLCBgJHtzdWJzaXN0ZW1hfSBhY3Rpdm9zOmApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIHkgZWxpbWluYSBsYSBzZWxlY2NpXHUwMEYzbiBkZSBsb3MgYXJyZWdsb3MgcGFyYSBubyB2b2x2ZXIgYSBtb3N0cmFybGFcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIFx1MDBFRG5kaWNlIGRlbCBhcmNoaXZvIHNlbGVjY2lvbmFkbyBlbiByZWN1cnNvc0FjdGl2b3MgYmFzXHUwMEUxbmRvbm9zIGVuIGVsIGJhc2VuYW1lXG4gICAgICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLnBhdGggPT09IHNlbGVjY2lvbik7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIuYmFzZW5hbWUpLCBmYWxzZSwgYCR7c3Vic2lzdGVtYX0gYWN0aXZvczpgKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAvLyBFbmN1ZW50cmEgeSBlbGltaW5hIGxhIHNlbGVjY2lcdTAwRjNuIGRlIGxvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsYVxuICAgICAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBcdTAwRURuZGljZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gZW4gcmVjdXJzb3NBY3Rpdm9zIGJhc1x1MDBFMW5kb25vcyBlbiBlbCBiYXNlbmFtZVxuICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLmJhc2VuYW1lID09PSBzZWxlY2Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNlU2VsZWNjaW9uYWRvICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW1wby5wdXNoKHJlY3Vyc29zQWN0aXZvc1tpbmRpY2VTZWxlY2Npb25hZG9dLnBhdGgpOyAvLyBBZ3JlZ2EgZWwgYmFzZW5hbWUgZGVsIGFyY2hpdm8gc2VsZWNjaW9uYWRvIGFsIGNhbXBvICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2FtcG8ucHVzaChyZWN1cnNvc0FjdGl2b3NbaW5kaWNlU2VsZWNjaW9uYWRvXS5iYXNlbmFtZSk7IC8vIEFncmVnYSBlbCBiYXNlbmFtZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gYWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBFbGltaW5hIGVsIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBkZSBhbWJvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsb1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNvc0FjdGl2b3Muc3BsaWNlKGluZGljZVNlbGVjY2lvbmFkbywgMSk7XG4gICAgICAgICAgICAgICAgICAgIHByaW1lckFsaWFzLnNwbGljZShpbmRpY2VTZWxlY2Npb25hZG8sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBxdWVkYW4gbVx1MDBFMXMgcmVjdXJzb3MgYWN0aXZvcywgbm8gcHJlZ3VudGEgc2kgZGVzZWEgYWdyZWdhciBvdHJvXG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc29zQWN0aXZvcy5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFByZWd1bnRhIHNpIGRlc2VhIGFncmVnYXIgb3RybyByZWdpc3RybyBkZWwgbWlzbW8gc3Vic2lzdGVtYVxuICAgICAgICAgICAgICAgIGxldCBkZXNlYUFncmVnYXJPdHJvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIGBEZXNlYSBhZ3JlZ2FyIG90cm8gJHtzdWJzaXN0ZW1hfSBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIGlmICghZGVzZWFBZ3JlZ2FyT3RybykgYnJlYWs7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBzYWxlIGRlbCBjaWNsb1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBjYW1wbzsgLy8gUmV0b3JuYSBlbCBhcnJlZ2xvIGNhbXBvIGNvbiB0b2RhcyBsYXMgc2VsZWNjaW9uZXMgcmVhbGl6YWRhc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBGVU5DSU9OIFFVRSBUUkFFIFRPREFTIExBUyBOT1RBUyBBQ1RJVkFTIERFIExPUyBTSVNURU1BUy4gLSBSZXZpc2FyIGVuIHF1ZSBsYSB1c28uLi5cbiAgICBhc3luYyBhY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXModHlwZU5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSl7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJlYXNJbnRlcmVzXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hIGVsIG5vbWJyZSBkZSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGJhc2FkbyBlbiBlbCB0aXBvXG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyTmFtZSA9IFwiZm9sZGVyX1wiICsgdHlwZU5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbcmVzb3VyY2VGb2xkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGV4aXN0ZSBwYXJhIGV2aXRhciBlcnJvcmVzXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNvdXJjZUZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBjYXJwZXRhIFwiJHtyZXNvdXJjZUZvbGRlck5hbWV9XCIgbm8gZXhpc3RlIGVuIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIFJldG9ybmEgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIGxhIGNhcnBldGEgbm8gZXhpc3RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVSZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGaWx0cmEgbG9zIGFyY2hpdm9zIHF1ZSBlc3RcdTAwRTFuIGRlbnRybyBkZWwgZGlyZWN0b3JpbyBkZXNlYWRvIHkgdGllbmVuIGVzdGFkbyBcdUQ4M0RcdURGRTJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVzb3VyY2VGb2xkZXIpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgZXN0YWRvcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSZXNvdXJjZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IC8vIEZpbiBTd2l0Y2hcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVSZXNvdXJjZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYnVzY2FyIHJlY3Vyc29zIGFjdGl2b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0b3JuYSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gZW4gY2FzbyBkZSBlcnJvclxuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG5cbiAgICBhc3luYyBnZXRDbGFzaWZpY2FjaW9uKCl7XG4gICAgICAgIGxldCBjbGFzaWZpY2FjaW9uOiBzdHJpbmcgfCBudWxsLCB0YWdDbGFzaWZpY2FjaW9uOiBzdHJpbmcgfCBudWxsLCBjbGFzaWZpY2FjaW9uQVg6IHsgW3g6IHN0cmluZ106IGFueTsgfSwgdGFnc0NsYXNpZmljYWNpb25BWDogc3RyaW5nIHwgYW55W107XG4gICAgICAgIGxldCBudWV2YUNsYXNpZmljYWNpb24gPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICBjbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50aXR1bG9DbGFzaWZpY2FjaW9uQVggfHwgW107XG4gICAgICAgICAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYID0gZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCBzdWdnZXN0ZXIoY2xhc2lmaWNhY2lvbkFYLCB0YWdzQ2xhc2lmaWNhY2lvbkFYLCBmYWxzZSwgXCJcdTAwQkZDbGFzaWZpY2FyXHUwMEVEYXMgZXN0YSBub3RhIGJham8gYWxndW5hIGRlIGxhcyBzaWd1aWVudGVzIGNhdGVnb3JcdTAwRURhcz9cIilcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLiBcbiAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdDbGFzaWZpY2FjaW9uPT1cIk51ZXZvXCIpe1xuICAgICAgICAgICAgICAgIGxldCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCBub21icmUgZGUgbGEgbnVldmEgY2xhc2lmaWNhY2lcdTAwRjNuIHF1ZSB2YXMgYSBpbmdyZXNhcj9cIiwgXCJNaUNsYXNpZmljYWNpXHUwMEYzblwiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgICAgICBpZiAoY2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIHRhZyBxdWUgdXRpbGl6YXJhcyBwYXJhIFwiICsgY2xhc2lmaWNhY2lvbiArIFwiPy4gTm8gdXRpbGljZXMgZXNwYWNpb3MgZW4gbGEgZGVmaW5pY2lcdTAwRjNuIGRlbCB0YWcuXCIsIFwibnVldm9UYWdcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBudWV2YUNsYXNpZmljYWNpb24gPSB0cnVlO1xuICAgICAgICAgICAgfWVsc2UgaWYodGFnQ2xhc2lmaWNhY2lvbj09XCJOaW5ndW5hXCIpe1xuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBcIlwiXG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IFwiXCJcdFxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBpbmRpY2UgPSB0YWdzQ2xhc2lmaWNhY2lvbkFYLmluZGV4T2YodGFnQ2xhc2lmaWNhY2lvbilcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gY2xhc2lmaWNhY2lvbkFYW2luZGljZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudWV2YUNsYXNpZmljYWNpb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXI6IHsgdGl0dWxvQ2xhc2lmaWNhY2lvbkFYOiBhbnlbXTsgdGFnc0NsYXNpZmljYWNpb25BWDogYW55W107IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIGxldCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBsZXQgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7Y2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbn07XG4gICAgfVxuICAgIC8vIC0+XG5cbiAgICBnZXREdXBsYXNGaWphcyhhcHA6IEFwcCwgYXJlYTogc3RyaW5nKTogUHJvbWlzZTxHcnVwb0FjdGl2aWRhZFtdPiB7XG4gICAgICAgIC8vIEVuY3VlbnRyYSBlbCBhcmNoaXZvIHBvciBzdSBydXRhXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICAvLyBBY2NlZGUgYWwgZnJvbnQgbWF0dGVyIChZQU1MKSBkZWwgYXJjaGl2byB5IG9idGllbmUgZWwgYXJyZWdsbyBiYXNhZG8gZW4gZWwgdGVtYVxuICAgICAgICAgICAgICAgIGNvbnN0IGFycmVnbG9SZXN1bHQgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LlthcmVhXSB8fCBbXTtcbiAgICAgICAgICAgICAgICAvLyBDb25zdHJ1eWUgZWwgYXJyZWdsbyBkZSBvYmpldG9zIHJlc3VsdGFkbyBiYXNhZG8gZW4gbGEgZXN0cnVjdHVyYSBkZSBHcnVwb0FjdGl2aWRhZFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBhcnJlZ2xvUmVzdWx0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvLnB1c2goeyBncnVwbzogaXRlbVswXSwgYXJlYTogaXRlbVsxXSwgdGV4dG86IGl0ZW1bMF0rXCIvXCIraXRlbVsxXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdGFkbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7IC8vIE8gZGV2b2x2ZXIgdW4gYXJyZWdsbyB2YWNcdTAwRURvIGNvbW8gcmVzdWx0YWRvIGRlIGVycm9yXG4gICAgICAgIH1cblxuICAgICAgICAvLyBEZXZ1ZWx2ZSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gc2kgbm8gc2UgZW5jdWVudHJhIGVsIGFyY2hpdm8gbyBzaSBvY3VycmUgY3VhbHF1aWVyIG90cm8gcHJvYmxlbWFcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBjcmVkYSBwYXJhIGxhcyBBcmVhcyBkZSBWaWRhIHkgcGFyYSBsYXMgQW5vdGFjaW9uZXMsIHBhcmEgdHJhZXIgbGFzIHF1ZSBlc3RhbiBlbiBwbHQgQ2FtcG9zXG4gICAgYXN5bmMgZ2V0QXJlYSgpe1xuICAgICAgICBsZXQgYXJlYTogc3RyaW5nIHwgbnVsbCwgZ3J1cG86IHN0cmluZyB8IG51bGw7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGlwb0FyZWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgbnVldmFBcmVhID0gZmFsc2U7XG4gICAgICAgIGxldCBhcmVhc0dydXBvcyA9ICB0aGlzLmdldER1cGxhc0ZpamFzKGFwcCwgdGlwb0FyZWEpXG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgbGV0IGFyZWFHcnVwbyA9IGF3YWl0IHN1Z2dlc3RlcihhcmVhc0dydXBvcy5tYXAoYj0+IGIudGV4dG8pLCBhcmVhc0dydXBvcy5tYXAoYj0+IGIudGV4dG8pLCBmYWxzZSwgYFx1MDBCRkN1XHUwMEUxbCAke3RpcG9BcmVhfSBkZXNlYXMgY3JlYXI/YClcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLiBcbiAgICAgICAgICAgIGlmIChhcmVhR3J1cG8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFyZWFHcnVwbz09XCJOdWV2b1wiKXtcbiAgICAgICAgICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCB0YWcgcXVlIHV0aWxpemFyYXMgcGFyYSBcIiArIGNsYXNpZmljYWNpb24gKyBcIj8uIE5vIHV0aWxpY2VzIGVzcGFjaW9zIGVuIGxhIGRlZmluaWNpXHUwMEYzbiBkZWwgdGFnLlwiLCBcIm51ZXZvVGFnXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbnVldmFDbGFzaWZpY2FjaW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2UgPSBhcmVhc0dydXBvcy5maW5kSW5kZXgob2JqZXRvID0+IG9iamV0by50ZXh0byA9PT0gYXJlYUdydXBvKTtcbiAgICAgICAgICAgICAgICBncnVwbyA9IGFyZWFzR3J1cG9zW2luZGljZV0uZ3J1cG87XG4gICAgICAgICAgICAgICAgYXJlYSA9IGFyZWFzR3J1cG9zW2luZGljZV0uYXJlYTtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZ3J1cG8gPSBncnVwbztcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gYXJlYTtcbiAgICAgICAgICAgIHJldHVybiB7Z3J1cG86IGdydXBvLCB0aXR1bG86IGFyZWF9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKXtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IGNhbXBvO1xuICAgICAgICBzd2l0Y2godGlwb1Npc3RlbWEpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBQYXJhIEFyY2hpdm8gLSBJbmZvcm1hY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERkUyIC0+IEZpbmFsaXphZG9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBkZXNhcnJvbGxvXCIsIFwiXHVEODNEXHVERDM0IC0+IE5vIHJlYWxpemFkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIGBFc3RhZG8gYWN0dWFsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgIGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gQXJjaGl2b1wiLCBcIlx1RDgzRFx1REZFMiAtPiBBY3Rpdm9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBQYXVzYVwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIGBFc3RhZG8gYWN0dWFsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQ29tcGxldGFkbyAtIEFyY2hpdm9cIiwgXCJcdUQ4M0RcdURGRTIgLT4gQWN0aXZvXCIsXCJcdUQ4M0RcdURGRTEgLT4gUG9yIEluaWNpYXIsIEVuIFBhdXNhXCIsIFwiXHVEODNEXHVERDM0IC0+IENhbmNlbGFkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIGBFc3RhZG8gYWN0dWFsICR7dGhpcy5ub3RhLnRpdHVsb306YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVHhcIjpcbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQXJjaGl2b1wiLCBcIlx1RDgzRFx1REZFMiAtPiBFbiBQcm9jZXNvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gUGF1c2FcIiwgXCJcdUQ4M0RcdUREMzQgLT4gQ2FuY2VsYWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgYEVzdGFkbyBkZSAke3RoaXMubm90YS50aXR1bG99OmApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJSUlwiOlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQXJjaGl2YWRvXCIsIFwiXHVEODNEXHVERkUyIC0+IEFjdGl2b1wiLFwiXHVEODNEXHVERkUxIC0+IEVuIFBhdXNhXCIsIFwiXHVEODNEXHVERDM0IC0+IERldGVuaWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgYEVzdGFkbyBhY3R1YWwgJHt0aGlzLm5vdGEudGl0dWxvfTpgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBWVwiOlxuICAgICAgICAgICAgICAgIGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBBXHUwMEYxbyBBcmNoaXZhZG9cIiwgXCJcdUQ4M0RcdURGRTIgLT4gQVx1MDBGMW8gYWN0aXZvXCIsXCJcdUQ4M0RcdURGRTEgLT4gQVx1MDBGMW8gZW4gcGxhbmVhY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERDM0IC0+IE5vdGEgcG9yIGFycmVnbGFyXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgYEVzdGFkbyBkZWwgYVx1MDBGMW8gZWxlZ2lkbzpgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJPQ0FcIjogLy8gRW4gbGEgY3JlYWNpXHUwMEYzbiBkZWwgb2JqZXRpdm8gZmlqbyB2YSBlbiBhbWFyaWxsby5cbiAgICAgICAgICAgIGNhc2UgXCJDVElcIjogLy8gQ29tcGFzc1RyaW1lc3RyYWxJbmljaW9cbiAgICAgICAgICAgICAgICBjYW1wbyA9IFwiXHVEODNEXHVERkUxXCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICBjYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQ29tcGxldGFkbyAtIEluZm9ybWFjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdURGRTIgLT4gRmluYWxpemFkb1wiLFwiXHVEODNEXHVERkUxIC0+IEVuIGRlc2Fycm9sbG9cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgZXN0YWRvIGRlIGxhIG5vdGE6XCIpO1xuICAgICAgICAgICAgICAgIH1cblxuXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGNhbXBvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICAvL3RoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGNhbXBvO1xuICAgIH1cblxuICAgIC8qIFxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICBNZXRvZG8gcXVlIHRpZW5lIGRvcyBwcm9wb3NpdG9zLCBpbmljaWFsbWVudGUgc2UgY3JlXHUwMEYzIHBhcmEgIGRldm9sdmVyXG4gICAgZWwgZmlsZW5hbWUgZGUgbGFzIEFJLCBBViwgbkFWLCBBeCB5IFBHVEQgeSBkZXNkZSBsYSBwbGFudGlsbGEgXG4gICAgY2FtYmlhcmxlIGVsIG5vbWJyZSBhbCBhcmNoaXZvLiBTaW4gZW1iYXJnbywgc2UgbW9kaWZpY1x1MDBGMyB5IGFob3JhIHNpcnZlXG4gICAgcGFyYSBjdWFuZG8gdW5hIHBsYW50aWxsYSB0aWVuZSB1biBub21icmUgZXNwZWNpYWwsIHBvcnF1ZSBlcyByZXN1bHRhZG9cbiAgICBkZSB1biBwcm9jZXNvIHByZXZpbyB5IHNlIGRlYmUgdHJhZXIgaW5mb3JtYWNpXHUwMEYzbiBwYXJhIHF1ZSBzZSBnZW5lcmUgbGFcbiAgICBub3RhIGRlIGxhIHBsYW50aWxsYSBhZGVjdWFkYW1lbnRlLiAgXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICovIFxuICAgIGFzeW5jIGdldEZpbGVuYW1lKCl7XG4gICAgICAgIGxldCBmaWxlTmFtZTtcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkgeyAgXG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhPT09XCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIil7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhcy8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmZvU3Vic2lzdGVtYS5oYXNPd25Qcm9wZXJ0eShcImZpbGVOYW1lXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFydGVzID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5maWxlTmFtZS5zcGxpdCgnIC0tICcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gcGFydGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gcGFydGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBwYXJ0ZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5ncnVwbyA9IHBhcnRlc1syXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmlsZU5hbWUgPSBgJHt0aGlzLm5vdGEudHJpbWVzdHJlfSAtICR7dGhpcy5ub3RhLnRpdHVsb31gICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm5BVlwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRlcyA9IHRoaXMubm90YS5maWxlTmFtZS5zcGxpdCgnIC0gJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmdydXBvID0gcGFydGVzWzBdO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IHBhcnRlc1sxXTtcbiAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IGAke3BhcnRlc1sxXX1gOyAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6IFxuICAgICAgICAgICAgY2FzZSBcIlBRXCI6ICAgXG4gICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZm9TdWJzaXN0ZW1hLmhhc093blByb3BlcnR5KFwiZmlsZU5hbWVcIikpe1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVnZXhGaWxlTmFtZSA9IC8oW14vXSspXFxzLVxccyhcXGQrKVxcLm1kJC87XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJ0ZXMgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLmZpbGVOYW1lLm1hdGNoKHJlZ2V4RmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb24gZXN0ZSByZWdleEZpbGVOYW1lLCBwYXJ0ZXNbMF0gZXMgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIGNvbiBsYSBleHRlbnNpXHUwMEYzbiBtZC5cbiAgICAgICAgICAgICAgICAgICAgbGV0IHR5cGUgPSBwYXJ0ZXNbMV07IFxuICAgICAgICAgICAgICAgICAgICBsZXQgaWQgPSBwYXJ0ZXNbMl07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0eXBlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQcm95ZWN0byBwYXJhIE9iamV0aXZvIENvbXBhc3MgQW51YWxcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbm90YSA9IGF3YWl0IHRoaXMuZ2V0T3JpZ2VuKFwiT2JqQ29tcGFzc0FudWFsXCIsIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IC9cXFtcXFtcXHMqKC4qPylcXHMqXFxdXFxdLztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhPy5hcmVhVmlkYS5tYXRjaChyZWdleClbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlclx1MDBFOXMgPSBub3RhLmFyZWFJbnRlcmVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG8gPSB7c2lBc3VudG86IHRydWUsIG5vbWJyZTogbm90YS5maWxlLmJhc2VuYW1lfSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gbm90YT8udHJpbWVzdHJlLm1hdGNoKHJlZ2V4KVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuZmlsZU5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrOyAvLyBHVEQgeSBQUSBWaW5pZW5kbyBkZSBjb21wYXNzIEFudWFsLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZpbGVOYW1lO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpe1xuICAgICAgICBcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IHRyaW1lc3RyZTtcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlRRXCIpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoKHRpcG9TaXN0ZW1hKSB7XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCBzdWdnZXN0ZXIodHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgZmFsc2UsIGBUcmltZXN0cmUgZGVsICR7bm9tYnJlU2lzdGVtYX06YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiT0NBXCI6IC8vIE9iamV0aXZvQ29tcGFzc0FudWFsIFxuICAgICAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTJgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RNGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTAwQkZFbiBxdVx1MDBFOSB0cmltZXN0cmUgZGVsICR7dGhpcy5ub3RhLmFcdTAwRjFvfSBjb25zaWRlcmFzIHF1ZSBzZSBwdWVkZSByZWFsaXphciBlc2Ugb2JqZXRpdm8/YFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQ1RJXCI6IC8vIENvbXBhc3NUcmltZXN0cmFsSW5pY2lvXG4gICAgICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcIlExXCIsIFwiUTJcIiwgXCJRM1wiLCBcIlE0XCJdLFxuICAgICAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVExYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTNgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVE0YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1MDBCRkRlIHF1XHUwMEU5IHRyaW1lc3RyZSBkZWwgJHt0aGlzLm5vdGEuYVx1MDBGMW99IGVzIGVzdGEgcGxhbmVhY2lcdTAwRjNuP2BcbiAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHN1Z2dlc3Rlcih0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksdHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUucGF0aCksIGZhbHNlLCBgVHJpbWVzdHJlIGRlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuICAgICAgICAgICAgICAgIH1cblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAodHJpbWVzdHJlID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gdHJpbWVzdHJlO1xuICAgICAgICByZXR1cm4gdHJpbWVzdHJlO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0QVx1MDBGMW8oKXtcbiAgICAgICAgXG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhXHUwMEYxbztcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgYVx1MDBGMW9zID0gYXdhaXQgdGhpcy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQVlcIik7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2godGlwb1Npc3RlbWEpIHtcbiAgICAgICAgICAgIGNhc2UgXCJDQUNcIjpcbiAgICAgICAgICAgIGNhc2UgXCJDQUlcIjpcbiAgICAgICAgICAgIGNhc2UgXCJDVElcIjogLy8gQ29tcGFzc1RyaW1lc3RyYWxJbmljaW9cbiAgICAgICAgICAgICAgICBhXHUwMEYxbyA9IGF3YWl0IHN1Z2dlc3RlcihhXHUwMEYxb3MubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxhXHUwMEYxb3MubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSwgZmFsc2UsIGBTZWxlY2Npb25hIGVsIGFcdTAwRjFvIHF1ZSBkZXNlYXMgcGFyYSBlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkFZXCI6XG4gICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBlbCBhXHUwMEYxbyBhY3R1YWxcbiAgICAgICAgICAgICAgICBjb25zdCBhXHUwMEYxb0FjdHVhbCA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICAgICAgICAvLyBDcmVhciBlbCBhcnJlZ2xvIGNvbiBsb3MgYVx1MDBGMW9zIHNvbGljaXRhZG9zXG4gICAgICAgICAgICAgICAgY29uc3QgYXJyZWdsb0FcdTAwRjFvcyA9IFthXHUwMEYxb0FjdHVhbCAtIDIsIGFcdTAwRjFvQWN0dWFsIC0gMSwgYVx1MDBGMW9BY3R1YWwsIGFcdTAwRjFvQWN0dWFsICsgMSwgYVx1MDBGMW9BY3R1YWwgKyAyIF07XG4gICAgICAgICAgICAgICAgLy8gQXF1aSBsZSBxdWl0byBsb3MgYVx1MDBGMW9zIHF1ZSB5YSBlc3RhbiBjcmVhZG9zIHkgYWN0aXZvcy5cbiAgICAgICAgICAgICAgICBhXHUwMEYxbyA9IGF3YWl0IHN1Z2dlc3RlcihhcnJlZ2xvQVx1MDBGMW9zLGFycmVnbG9BXHUwMEYxb3MsIGZhbHNlLCBgU2VsZWNjaW9uYSBlbCBhXHUwMEYxbyBxdWUgdmFtb3MgYSBjcmVhci5gKVxuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJPQ0FcIjogLy8gT2JqZXRpdm9Db21wYXNzQW51YWxcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICBsZXQgbm9tYnJlQXJjaGl2byA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuZmlsZU5hbWU7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSAvXFwvKFxcZHs0fSkvO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IG5vbWJyZUFyY2hpdm8ubWF0Y2gocmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRhZG8gJiYgcmVzdWx0YWRvWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldG9ybmFtb3MgZWwgZ3J1cG8gY2FwdHVyYWRvLCBxdWUgZXMgZWwgdmFsb3IgZGVzZWFkbyBkZSBzdWJzdHJcbiAgICAgICAgICAgICAgICAgICAgYVx1MDBGMW8gPSByZXN1bHRhZG9bMV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gc2UgZW5jdWVudHJhIHVuYSBjb2luY2lkZW5jaWEsIHBvZHJcdTAwRURhbW9zIHJldG9ybmFyIG51bGwgbyBhbGd1bmEgb3RyYSBzZVx1MDBGMWFsIGRlIG5vIGVuY29udHJhZG9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICAvLyB0cmltZXN0cmUgPSBhd2FpdCBzdWdnZXN0ZXIodHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLnBhdGgpLCBmYWxzZSwgYFRyaW1lc3RyZSBkZWwgJHtub21icmVTaXN0ZW1hfTpgKTtcbiAgICAgICAgICAgICAgICB9XG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGFcdTAwRjFvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEuYVx1MDBGMW8gPSBhXHUwMEYxbztcbiAgICAgICAgcmV0dXJuIGFcdTAwRjFvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIGxldCBuZXdOYW1lLCBuYW1lLCBmb2xkZXI7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7IFxuICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgbmFtZSA9IGAke3RoaXMubm90YS5maWxlTmFtZX1gXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhPT09XCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIil7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhcy8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9L090cmFzYFxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX1gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICAgICAgbmFtZSA9IGAke3RoaXMubm90YS5maWxlTmFtZX1gXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFWXCI6ICAgICAgICBcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLmZpbGVuYW1lfS5tZGBcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9LyR7dGhpcy5ub3RhLmZpbGVOYW1lfS5tZGBcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiUlJcIjogICAgICAgIFxuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn1gXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICAgICAgbmFtZSA9IGAke3RoaXMubm90YS5maWxlTmFtZX1gXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlBRXCI6IFxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgIGxldCBmb2xkZXJBViA9IEFycmF5LmlzQXJyYXkodGhpcy5ub3RhLmFyZWFWaWRhKT8gdGhpcy5ub3RhLmFyZWFWaWRhWzBdIDogdGhpcy5ub3RhLmFyZWFWaWRhOyBcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke2ZvbGRlckFWfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke2ZvbGRlckFWfWBcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLm5vdGEuZmlsZU5hbWV9YFxuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlR4XCI6XG4gICAgICAgICAgICBsZXQgZmVjaGEgPSB3aW5kb3cubW9tZW50KHRoaXMubm90YS5mZWNoYSwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgICAgICBsZXQgZmVjaGFZID0gZmVjaGEuZm9ybWF0KFwiWVlZWVwiKTtcbiAgICAgICAgICAgIGxldCBmZWNoYU1lcyA9IGZlY2hhLmZvcm1hdChcIk1NIC0gTU1NTVwiKTtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke2ZlY2hhWX0vJHtmZWNoYU1lc30vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7ZmVjaGFZfS8ke2ZlY2hhTWVzfWBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgICAgICBuYW1lID0gYCR7dGhpcy5ub3RhLmZpbGVOYW1lfWBcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQ0FDXCI6ICAgICAvLyBDb21wYXNzQW51YWxfQ2llcnJlICAgXG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS9EZXNlbXBlXHUwMEYxbyAke3RoaXMubm90YS5hXHUwMEYxb30ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99YFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLm5vdGEuZmlsZU5hbWV9YFxuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkNBSVwiOiAgICAgLy8gQ29tcGFzc0FudWFsX0luaWNpbyAgIFxuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS9QbGFuZWFjaVx1MDBGM24gJHt0aGlzLm5vdGEuYVx1MDBGMW99Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfWBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgICAgICBuYW1lID0gYCR7dGhpcy5ub3RhLmZpbGVOYW1lfWBcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJDVElcIjogICAgIC8vIENvbXBhc3NUcmltZXN0cmFsX0luaWNpbyAgIFxuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb30vUGxhbmVhY2lcdTAwRjNuICR7dGhpcy5ub3RhLnRyaW1lc3RyZX0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99YFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLm5vdGEuZmlsZU5hbWV9YFxuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkFZXCI6ICAgICAvLyBBbnVhbCBcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9YFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLm5vdGEuZmlsZU5hbWV9YFxuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIk9DQVwiOiAgLy8gT2JqZXRpdm9Db21wYXNzQW51YWxcbiAgICAgICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb31gXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICAgICAgbmFtZSA9IGAke3RoaXMubm90YS5maWxlTmFtZX1gXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIkNQRVwiOiAgICAgLy8gQ29udGVuaWRvIFBhcmEgRXN0dWRpbyBcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmZlY2hhLnNsaWNlKDAsIDQpfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuZmVjaGEuc2xpY2UoMCwgNCl9YFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgICAgIG5hbWUgPSBgJHt0aGlzLm5vdGEuZmlsZU5hbWV9YFxuICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5hbWUpO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICBsZXQgbm9tYnJlRmlsZSA9IG5ld05hbWU/LnNwbGl0KFwiL1wiKTtcblxuICAgICAgICAgICAgICAgIGxldCBib3JyYXIgPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVlIGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpe1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmJvcnJhck5vdGEgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfWNhdGNoIChlcnJvcil7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRBcmVhVmlkYSgpe1xuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIGxldCB0aXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlVGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhcmVhc1ZpZGEgPSB7fTtcbiAgICAgICAgbGV0IGFyZWFWaWRhO1xuICAgICAgICBsZXQgbm9BViA9IHt9IDtcbiAgICAgICAgbm9BVi5maWxlID0ge30gO1xuICAgICAgICBub0FWLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgbm9BVi5maWxlLmJhc2VuYW1lID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIFxuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgIHN3aXRjaCh0aXBvKSB7XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFJbnRlcmVzID09IFwiXCIpe1xuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgICAgICBhcmVhc1ZpZGEgPSBhd2FpdCB0aGlzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJBVlwiKVxuICAgICAgICAgICAgICAgIGFyZWFzVmlkYS5wdXNoKG5vQVYpO1xuICAgICAgICAgICAgICAgIGFyZWFWaWRhID0gYXdhaXQgc3VnZ2VzdGVyKGFyZWFzVmlkYS5tYXAoYiA9PiBiLmFyZWFWaWRhKSxhcmVhc1ZpZGEubWFwKGIgPT4gYi5hcmVhVmlkYSksIGZhbHNlLCBgQSBxdWUgQXJlYSBkZSBWaWRhIHBlcnRlbmVjZSBlc3RhICR7bm9tYnJlVGlwb306YCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGFyZWFWaWRhID0gdGhpcy5ub3RhLmFyZWFWaWRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICBcblxuICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhID0gYXdhaXQgdGhpcy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQVZcIiwgdGhpcy5ub3RhLnRyaW1lc3RyZSlcbiAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIGFyZWFWaWRhID0gYXdhaXQgc3VnZ2VzdGVyKGFyZWFzVmlkYS5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLGFyZWFzVmlkYS5tYXAoYiA9PiBbYi5hcmVhVmlkYSwgYi5maWxlLmJhc2VuYW1lXSksIGZhbHNlLCBgQSBxdWUgQXJlYSBkZSBWaWRhIHBlcnRlbmVjZSBlc3RhKGUpICR7bm9tYnJlVGlwb306YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcIk9DQVwiOiAvLyBPYmpldGl2b0NvbXBhc3NBbnVhbFxuICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIGxldCBub21icmVBcmNoaXZvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5maWxlTmFtZTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWdleCA9IC9PYmpldGl2byBwYXJhICguKylcXC5tZCQvO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IG5vbWJyZUFyY2hpdm8ubWF0Y2gocmVnZXgpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRhZG8gJiYgcmVzdWx0YWRvWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldG9ybmFtb3MgZWwgZ3J1cG8gY2FwdHVyYWRvLCBxdWUgZXMgZWwgdmFsb3IgZGVzZWFkbyBkZSBzdWJzdHJcbiAgICAgICAgICAgICAgICAgICAgYXJlYVZpZGEgPSByZXN1bHRhZG9bMV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gc2UgZW5jdWVudHJhIHVuYSBjb2luY2lkZW5jaWEsIHBvZHJcdTAwRURhbW9zIHJldG9ybmFyIG51bGwgbyBhbGd1bmEgb3RyYSBzZVx1MDBGMWFsIGRlIG5vIGVuY29udHJhZG9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGFyZWFzVmlkYSA9IGF3YWl0IHRoaXMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFWXCIpXG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhLnB1c2gobm9BVik7XG4gICAgICAgICAgICAgICAgYXJlYVZpZGEgPSBhd2FpdCBzdWdnZXN0ZXIoYXJlYXNWaWRhLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksYXJlYXNWaWRhLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGZhbHNlLCBgQSBxdWUgQXJlYSBkZSBWaWRhIHBlcnRlbmVjZSBlc3RhKGUpICR7bm9tYnJlVGlwb306YCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIHJldHVybiBhcmVhVmlkYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuYXJlYVZpZGE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXRBcmVhSW50ZXJlcygpe1xuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIGxldCB0aXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlVGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhcmVhc0ludGVyZXMgPSBhd2FpdCB0aGlzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJBSVwiKVxuICAgICAgICBsZXQgYXJlYUludGVyZXMsIG5pdmVsLCB0aXR1bG8sIHBhZHJlQUksIGFycmF5QUk7XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgIHN3aXRjaCh0aXBvKSB7XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICBwYWRyZUFJID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIG90cmEgJHtub21icmVUaXBvfTpgKTtcbiAgICAgICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICAgICAgaWYgKHBhZHJlQUkpe1xuICAgICAgICAgICAgICAgICAgICBhcmVhSW50ZXJlcyA9IGF3YWl0IHN1Z2dlc3RlcihhcmVhc0ludGVyZXMubWFwKGIgPT4gYi50aXR1bG8pICxhcmVhc0ludGVyZXMubWFwKGIgPT4gYiksIGZhbHNlLCBgUXVlIEFyZWEgZGUgSW50ZXJcdTAwRTlzIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYUludGVyZXMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gQXJlYSBkZSBJbnRlcmVzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2V7IC8vIFFVRSBIQUNFIEVTVEUgRUxTRT8/XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcmVhSW50ZXJlcy5hcmVhVmlkYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFJbnRlcmVzLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBhcmVhSW50ZXJlcy50aXR1bG87XG4gICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KGFyZWFJbnRlcmVzLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgcGFkcmVBSSA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSxmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBBcmVhIGRlIEludGVyXHUwMEU5czpgKTtcbiAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgIGlmIChwYWRyZUFJKXtcbiAgICAgICAgICAgICAgICBhcmVhSW50ZXJlcyA9IGF3YWl0IHN1Z2dlc3RlcihhcmVhc0ludGVyZXMubWFwKGIgPT4gYi50aXR1bG8pICxhcmVhc0ludGVyZXMubWFwKGIgPT4gYiksIGZhbHNlLCBgUXVlIEFyZWEgZGUgSW50ZXJcdTAwRTlzIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChhcmVhSW50ZXJlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIEFyZWEgZGUgSW50ZXJlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFthcmVhSW50ZXJlcy50aXR1bG9dOyBcbiAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJlYUludGVyZXM/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gdGl0dWxvLmNvbmNhdChhcmVhSW50ZXJlcy5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvLnB1c2goYXJlYUludGVyZXMuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJlYUludGVyZXMuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFJbnRlcmVzLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmVhSW50ZXJlcy5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBhcmVhSW50ZXJlcy5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gXHUwMEMxcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIHByb3llY3RvIFEgbyBHVEQuLi5cbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChhcmVhSW50ZXJlcy5uaXZlbEFJKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiUFFcIjpcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICBwYWRyZUFJID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIEFyZWEgZGUgSW50ZXJcdTAwRTlzOmApO1xuICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgaWYgKHBhZHJlQUkpe1xuICAgICAgICAgICAgICAgIGFyZWFJbnRlcmVzID0gYXdhaXQgc3VnZ2VzdGVyKGFyZWFzSW50ZXJlcy5tYXAoYiA9PiBiLnRpdHVsbykgLGFyZWFzSW50ZXJlcy5tYXAoYiA9PiBiKSwgZmFsc2UsIGBRdWUgQXJlYSBkZSBJbnRlclx1MDBFOXMgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gQXJlYSBkZSBJbnRlcmVzXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzLmFyZWFWaWRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFtdOyAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhWzBdID0gYXJlYUludGVyZXM/LmFyZWFWaWRhXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFyZWFJbnRlcmVzLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYVsxXSA9IGAke3RoaXMubm90YS50cmltZXN0cmV9IC0gJHt0aGlzLm5vdGEuYXJlYVZpZGFbMF19YFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSAwO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIHByb3llY3RvIFEgbyBHVEQuLi5cbiAgICAgICAgICAgICAgICAgICAgYXJyYXlBSSA9IFthcmVhSW50ZXJlcy50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJlYUludGVyZXMuYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gYXJyYXlBSS5jb25jYXQoYXJlYUludGVyZXMuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheUFJLnB1c2goYXJlYUludGVyZXMuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBhcmVhSW50ZXJlcy5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFycmF5QUkgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFycmF5QUk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gTGEgc2FsaWRhIHBhcmEgZGVmYXVsdCBubyBwdWVkZSBzZXIgc29sbyBhcmVhSW50ZXJlcy4uIFZhbGlkYXIgY3VhbmRvIGNvcnJlc3BvbmRhLlxuICAgICAgICAgICAgICAgIGFyZWFJbnRlcmVzID0gYXdhaXQgc3VnZ2VzdGVyKGFyZWFzSW50ZXJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLGFyZWFzVmlkYS5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYEEgcXVlIEFyZWEgZGUgVmlkYSBwZXJ0ZW5lY2UgZXN0YSAke25vbWJyZVRpcG99OmApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBkZWJ1Z2dlcjtcblx0ICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgIH1lbHNle1xuICAgICAgIHJldHVybiB0aGlzLm5vdGEuYXJlYUludGVyZXM7IFxuICAgICAgIH1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldFByb3llY3RvR1REKCl7XG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgICAgbGV0IHRpcG8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVUaXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IG5vdGFzRiA9IGF3YWl0IHRoaXMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBHVERcIilcbiAgICAgICAgbGV0IG5vdGFGLCBuaXZlbCwgdGl0dWxvO1xuICAgICAgICBpZiAoIXRoaXMubm90YS5hc3VudG9EZWZpbmlkbykge1xuICAgICAgICAgICAgLy8gRWplY3V0YXIgY1x1MDBGM2RpZ28gYXF1XHUwMEVEIHNpIGFzdW50b0RlZmluaWRvIGVzIGZhbHN5IChpbmNsdXllIGZhbHNlLCBudWxsLCB1bmRlZmluZWQsIDAsIFwiXCIsIE5hTilcbiAgICAgICAgc3dpdGNoKHRpcG8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJSUlwiOlxuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgbGV0IHBhZHJlUEdURCA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSxmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBQcm95ZWN0byBHVEQ/YCk7XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChwYWRyZVBHVEQpe1xuICAgICAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHN1Z2dlc3Rlcihub3Rhc0YubWFwKGIgPT4gYi50aXR1bG8pICxub3Rhc0YubWFwKGIgPT4gYiksIGZhbHNlLCBgUXVlIFByb3llY3RvIEdURCBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGFGID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIEdURCBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YUY/LmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YUYuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGFGPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YUYuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhRi5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YUYucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRi50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IHRpdHVsby5jb25jYXQobm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGFGPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ucHVzaChub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgcHJveWVjdG8gUVxuICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBMYSBzYWxpZGEgcGFyYSBkZWZhdWx0IG5vIHB1ZWRlIHNlciBzb2xvIGFyZWFJbnRlcmVzLi4gVmFsaWRhciBjdWFuZG8gY29ycmVzcG9uZGEuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXHQgICAgXG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wcm95ZWN0b0dURC8vPyB0aGlzLm5vdGEuUHJveWVjdG9HVEQ7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldFByb3llY3RvUSgpe1xuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIGxldCB0aXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlVGlwbyA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBub3Rhc0YgPSBhd2FpdCB0aGlzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJQUVwiKVxuICAgICAgICBsZXQgbm90YUYsIG5pdmVsLCB0aXR1bG87XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICAvLyBFamVjdXRhciBjXHUwMEYzZGlnbyBhcXVcdTAwRUQgc2kgYXN1bnRvRGVmaW5pZG8gZXMgZmFsc3kgKGluY2x1eWUgZmFsc2UsIG51bGwsIHVuZGVmaW5lZCwgMCwgXCJcIiwgTmFOKVxuICAgICAgICBzd2l0Y2godGlwbykge1xuICAgICAgICAgICAgY2FzZSBcIlJSXCI6XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICBsZXQgcGFkcmVRID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIFE/YCk7XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChwYWRyZVEpe1xuICAgICAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHN1Z2dlc3Rlcihub3Rhc0YubWFwKGIgPT4gYi50aXR1bG8pICxub3Rhc0YubWFwKGIgPT4gYiksIGZhbHNlLCBgUXVlIFByb3llY3RvIFEgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBwcm95ZWN0byBRIGRlZmluaWRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YUYuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhRj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhRi5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YUY/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUYuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YUYuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhRi5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRj8udGl0dWxvXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGFGLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIHByb3llY3RvIFFcbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gTGEgc2FsaWRhIHBhcmEgZGVmYXVsdCBubyBwdWVkZSBzZXIgc29sbyBhcmVhSW50ZXJlcy4uIFZhbGlkYXIgY3VhbmRvIGNvcnJlc3BvbmRhLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblx0ICAgIFxuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEucHJveWVjdG9RLy8/IHRoaXMubm90YS5Qcm95ZWN0b0dURDtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gICAgLy8gRXN0YSBmdW5jaVx1MDBGM24gc2FsZSBkZSBtZW51T3RybywgZGUgcmVnaXN0cm8gVGllbXBvLiBSZXZpc2FyIHNpIGRlYm8gc2luY3Jvbml6YXJsYXMuXG4gICAgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZSh0aXBvLCBwYXJhbWV0cm8pIHtcbiAgICBcbiAgICBjb25zdCBwcm9wZXJ0aWVzVGlwbyA9IHtcbiAgICAgICAgQVY6IHtcbiAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgICAgfSxcbiAgICAgICAgQUk6IHtcbiAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzSW50ZXJlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIFBROiB7XG4gICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgUEdURDoge1xuICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zR1RELFxuICAgICAgICAgICAgfSxcbiAgICAgICAgVEk6IHtcbiAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UZW1hc0ludGVyZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICBSUjoge1xuICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIFRROiB7XG4gICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmltZXN0cmFsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgQVk6IHtcbiAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FudWFsLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgLy8gUHVlZGVzIGNvbnRpbnVhciBhXHUwMEYxYWRpZW5kbyBtXHUwMEUxcyBjYXNvcyBhcXVcdTAwRURcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIHRpcG8gZXMgdW5hIHByb3BpZWRhZCB2XHUwMEUxbGlkYSBhbnRlcyBkZSBkZXNlc3RydWN0dXJhclxuXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyID0gW107XG4gICAgICAgIGxldCBmaWxlcywgdHJpbWVzdHJlIDogIHN0cmluZztcbiAgICAgICAgY29uc3QgZm9sZGVyID0gcHJvcGVydGllc1RpcG9bdGlwb10uZm9sZGVyO1xuICAgICAgICBzd2l0Y2ggKHRpcG8pe1xuICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgaWYgKCFwYXJhbWV0cm8peyAvLyBwYXJhbWV0cm8gZW4gZXN0ZSBjYXNvIGVzIGVsIHRyaW1lc3RyZS4gU2luIHBhcmFtZXRybyBzZSBidXNjYSBlbCBub2RvQXJlYVZpZGFcbiAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3VhbmRvIGVsIHRyaW1lc3RyZSBzaSBzZSBpbmdyZXNhIGVuIGxhIGZ1bmNpXHUwMEYzbiwgZW50b25jZXMgYnVzY2EgbGFzIEFyZWFzVmlkYSBkZWwgdHJpbWVzdHJlLlxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICB0cmltZXN0cmUgPSBwYXJhbWV0cm87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSAmJiBmaWxlLm5hbWUuc3RhcnRzV2l0aCh0cmltZXN0cmUpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuXG4gICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmVGaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVGaWxlLmZpbGUgPSBmaWxlO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpOyAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgY2FzZSBcIlRRXCI6XG4gICAgICAgIGNhc2UgXCJBWVwiOlxuICAgICAgICAgICAgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpKTsgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZS5maWxlID0gZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIucHVzaChhY3RpdmVGaWxlKTsgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6IFxuICAgICAgICAgICAgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpKTsgICAgXG4gICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZS5maWxlID0gZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIucHVzaChhY3RpdmVGaWxlKTsgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlcjtcbiAgICB9XG5cblxuICAgIGFzeW5jIGNyZWFyQ2FycGV0YShmb2xkZXJQYXRoOiBzdHJpbmcpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcbiAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBjb25zdCBjYXJwZXRhRXhpc3RlbnRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIGlmIChjYXJwZXRhRXhpc3RlbnRlIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke2ZvbGRlclBhdGh9JyB5YSBleGlzdGUuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgY3JlYXIgbGEgY2FycGV0YSAnJHtmb2xkZXJQYXRofSc6YCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgXG4gICAgLyogXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIE1ldG9kbyBjb24gZWwgY3VhbCBwdWVkbyBkZXNkZSBlbCBtXHUwMEU5dG9kbyBmaWxlTmFtZSBvYnRlbmVyIGxhIG5vdGEgXG4gICAgZGUgb3JpZ2VuIGRlIGxhIHBsYW50aWxsYSBxdWUgZXN0b3kgY3JlYW5kbywgcGFyYSBjb250YXIgY29uIHRvZGEgXG4gICAgbGEgaW5mb3JtYWNpXHUwMEYzbiBxdWUgcmVxdWllcm8gZW4gbGEgY3JlYWNpXHUwMEYzbi5cbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgKi8gXG4gICAgYXN5bmMgZ2V0T3JpZ2VuKHR5cGVOYW1lLCBpZCl7XG4gICAgZGVidWdnZXI7XG4gICAgbGV0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfJHt0eXBlTmFtZX1gXTtcbiAgICBsZXQgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSk7XG4gICAgXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuXG4gICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgaWYgKG1ldGFkYXRhPy5pZCA9PT0gK2lkKSB7IC8vICtpZCBzZSBoYWNlIHBhcmEgY29udmVydGlybG8gZW4gblx1MDBGQW1lcm8uXG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICByZXR1cm4gYWN0aXZlRmlsZTsgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59XG4gICIsICJleHBvcnQgY2xhc3MgYWRkT25zQVBJIHtcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW4pIHtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cbiAgXG4gICAgY3JlYXJQcmV2TmV4dChwYWdpbmFzLCBwYWdJbmRpY2UsIGR2KSB7XG4gICAgICAgIGxldCBwYWdpbmEgPSBkdi5jdXJyZW50KCk7XG4gICAgICAgIGxldCBpbmRpY2U7XG4gICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDwgcGFnaW5hcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgaWYgKHBhZ2luYXNbYV0uZmlsZS5uYW1lID09IHBhZ2luYS5maWxlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICBpbmRpY2UgPSBhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGxldCBsaW5rcyA9IFtdO1xuICAgICAgICBpZiAoaW5kaWNlID09IDAgJiYgcGFnaW5hcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgbGlua3NbMF0gPSBcIlwiO1xuICAgICAgICAgICAgbGlua3NbMV0gPSBcIlwiO1xuICAgICAgICB9IGVsc2UgaWYgKGluZGljZSA9PSAwKSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IFwiXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXHUyN0ExXHVGRTBGIFwiICsgZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlICsgMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSArIDFdKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5kaWNlID09IChwYWdpbmFzLmxlbmd0aCAtIDEpKSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSAtIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgLSAxXSkpICsgXCIgXHUyQjA1XHVGRTBGXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IGR2LmZ1bmMubGluayhwYWdpbmFzW2luZGljZSAtIDFdLmZpbGUucGF0aCwgdGhpcy5kZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hc1tpbmRpY2UgLSAxXSkpICsgXCIgXHUyQjA1XHVGRTBGXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXHUyN0ExXHVGRTBGIFwiICsgZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlICsgMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSArIDFdKSk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgZHYucGFyYWdyYXBoKGxpbmtzWzBdICsgXCIgPT1cIiArIGR2LmZ1bmMubGluayhwYWdJbmRpY2UuZmlsZS5wYXRoLCBwYWdJbmRpY2UudGl0dWxvIHx8IHBhZ0luZGljZS5maWxlLm5hbWUpICsgXCI9PSBcIiArIGxpbmtzWzFdKTtcbiAgICB9XG5cbiAgICBkZXRlcm1pbmFyVGV4dG9FbmxhY2UocGFnaW5hKSB7XG4gICAgICAgIGlmIChwYWdpbmEudGl0dWxvKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLnRpdHVsbztcbiAgICAgICAgfSBlbHNlIGlmIChwYWdpbmEuYWxpYXNlcyAmJiBwYWdpbmEuYWxpYXNlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLmFsaWFzZXNbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFnaW5hLmZpbGUubmFtZTtcbiAgICAgICAgfVxuICAgIH1cbiAgXG5cblxuICB9IiwgIi8vaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcblxuaW1wb3J0IHsgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBtb2RhbF9jYW1iaW9IRiB9IGZyb20gXCIuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvY2FtYmlvSEZcIjtcblxuZXhwb3J0IGNsYXNzIFlBTUxVcGRhdGVyQVBJIHtcbiAgICAvL3ByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogb2JqZWN0OyAvLyBBc3VtaWVuZG8gcXVlIGVzIHVuIHN0cmluZ1xuICAgIHByaXZhdGUgdHA6IG9iamVjdDtcbiAgICBwcml2YXRlIG5vdGE6IG9iamVjdDtcbiAgICBwcml2YXRlIHBhdGhDYW1wb3M6IHN0cmluZzsgXG4gICAgaW5mb05vdGE6IHt9O1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIC8vIEluaWNpYWxpemEgZm9sZGVyIGUgaW5kaWNlIGNvbiB2YWxvcmVzIHByZWRldGVybWluYWRvcyBvIGxcdTAwRjNnaWNhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgdGhpcy5pbmZvTm90YSA9IHt9O1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgdGhpcy50cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBhY3R1YWxpemFyTm90YShpbmZvTm90YTogYW55LCBjYW1wb3M6IGFueSkge1xuICAgICAgICBcbiAgICAgICAgbGV0IG5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YSBlbCBvYmpldG8gbm90YS5cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmluZm9Ob3RhLCBpbmZvTm90YSk7IFxuICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2FtcG8gb2YgY2FtcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERpdmlkZSBlbCBjYW1wbyBlbiBmdW5jaVx1MDBGM24gZGVsIHNcdTAwRURtYm9sbyBcIl9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ZXMgPSBjYW1wby5zcGxpdCgnXycpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY2FtcG9OYW1lLCBmdW5jdGlvbk5hbWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0cm8gPSBudWxsOyBcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgaGF5IHVuIHNcdTAwRURtYm9sbyBcIl9cIiwgdXNhIGxhIHBhcnRlIGFudGVzIGRlIFwiX1wiIHBhcmEgZWwgbm9tYnJlIGRlIGxhIGZ1bmNpXHUwMEYzbixcbiAgICAgICAgICAgICAgICAgICAgLy8geSBsYSBwYXJ0ZSBkZXNwdVx1MDBFOXMgZGUgXCJfXCIgY29tbyBwYXJcdTAwRTFtZXRyby5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtwYXJ0ZXNbMF0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwYXJ0ZXNbMF0uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbXBvTmFtZSA9IHBhcnRlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRybyA9IHBhcnRlc1sxXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbXBvTmFtZSA9IHBhcnRlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9ICBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGhpcy5pbmZvTm90YS5maWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsb3JBY3R1YWxDYW1wbyA9IG1ldGFkYXRhW2NhbXBvTmFtZV0gfHwgXCJTaW4gZGVmaW5pclwiO1xuICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBleGlzdGUgdW5hIGZ1bmNpXHUwMEYzbiBjb24gZXNlIG5vbWJyZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIExsYW1hIGEgbGEgZnVuY2lcdTAwRjNuIGRlIG1hbmVyYSBkaW5cdTAwRTFtaWNhLiBTaSBleGlzdGUgdW4gcGFyXHUwMEUxbWV0cm8sIHBcdTAwRTFzYWxvIGEgbGEgZnVuY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRybyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGFbY2FtcG9OYW1lXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXShwYXJhbWV0cm8sdmFsb3JBY3R1YWxDYW1wbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGFbY2FtcG9OYW1lXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIG5vdGFcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobm90YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFamVjdXRhIHR1IGNcdTAwRjNkaWdvIGFxdVx1MDBFRCBzaSBlbCBvYmpldG8gYG5vdGFgIHRpZW5lIG1cdTAwRTFzIGRlIHVuYSBwcm9waWVkYWRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKG5vdGEsIGluZm9Ob3RhLmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy9ObyBzZSBlbmNvbnRyYXJvbiBjYW1wb3MgcGFyYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cbiAgICBcbiAgICBhc3luYyBhcmNoaXZhck5vdGEoaW5mb05vdGE6IGFueSwgY2FtcG9zOiBhbnkpIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBub3RhID0ge307IC8vIEluaWNpYWxpemEgZWwgb2JqZXRvIG5vdGEuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvTm90YSwgaW5mb05vdGEpOyBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2FtcG8gb2YgY2FtcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzYSBlbCBub21icmUgZGVsIGNhbXBvIHBhcmEgY29uc3RydWlyIGVsIG5vbWJyZSBkZSBsYSBmdW5jaVx1MDBGM24gKHAuIGVqLiwgXCJnZXRJZFwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGV4aXN0ZSB1bmEgZnVuY2lcdTAwRjNuIGNvbiBlc2Ugbm9tYnJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNbZnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGxhbWEgYSBsYSBmdW5jaVx1MDBGM24gZGUgbWFuZXJhIGRpblx1MDBFMW1pY2EgeSBhc2lnbmEgZWwgcmVzdWx0YWRvIGFsIGNhbXBvIGNvcnJlc3BvbmRpZW50ZSBkZSBsYSBub3RhLlxuICAgICAgICAgICAgICAgICAgICAgICAgbm90YVtjYW1wb10gPSBhd2FpdCB0aGlzW2Z1bmN0aW9uTmFtZV0oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYExhIGZ1bmNpXHUwMEYzbiAke2Z1bmN0aW9uTmFtZX0gbm8gZXN0XHUwMEUxIGRlZmluaWRhLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFuZWphIGVsIGNhc28gZW4gcXVlIGxhIGZ1bmNpXHUwMEYzbiBubyBlc3RcdTAwRTkgZGVmaW5pZGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIGFzaWduYXIgdW4gdmFsb3IgcG9yIGRlZmVjdG8gYSBub3RhW2NhbXBvXSBvIHNpbXBsZW1lbnRlIGNvbnRpbnVhci5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIG5vdGFcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIG5vdGEuZXN0YWRvID0gXCJcdUQ4M0RcdUREMzVcIjtcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobm90YSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFamVjdXRhIHR1IGNcdTAwRjNkaWdvIGFxdVx1MDBFRCBzaSBlbCBvYmpldG8gYG5vdGFgIHRpZW5lIG1cdTAwRTFzIGRlIHVuYSBwcm9waWVkYWRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKG5vdGEsIGluZm9Ob3RhLmZpbGUucGF0aClcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy9ObyBzZSBlbmNvbnRyYXJvbiBjYW1wb3MgcGFyYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBlbCBjXHUwMEYzZGlnbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBub3RhLCBjb21vIGd1YXJkYXIgZW4gdW4gYXJjaGl2byBkZW50cm8gZGUgJ2ZvbGRlcicuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cblxuXG4gICAgYXN5bmMgdXBkYXRlWUFNTEZpZWxkcyhub3RhLCBydXRhKSB7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YSk7XG4gICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAvLyBJdGVyYXIgc29icmUgY2FkYSBwcm9waWVkYWQgZGVsIG9iamV0byAnbm90YSdcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbXBvIGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShjYW1wbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gZW4gZWwgZnJvbnRtYXR0ZXIgY29uIGVsIHZhbG9yIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltjYW1wb10gPSBub3RhW2NhbXBvXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiB0aGUgZGF0ZSBtb2R1bGVcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoZmxhZywgYWN0dWFsKSB7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICB9XG5cbiAgICBmb3JtYXRlYXJGZWNoYShmZWNoYTogRGF0ZSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICAgICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgICAgIGNvbnN0IGZlY2hhRm9ybWF0byA9IGZlY2hhTG9jYWwudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgICAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICAgICAgY29uc3QgaG9yYUZvcm1hdG8gPSBmZWNoYS50b1RpbWVTdHJpbmcoKS5zcGxpdCgnICcpWzBdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgICB9XG5cblxuICAgIGFzeW5jIGdldEhvcmFGaW5hbChwYXJhbWV0cm8sIGFjdHVhbCl7XG4gICAgICAgIC8vIEVzdGEgZnVuY2lcdTAwRjNuIHNvbG8gcmVjaWJlIGVuIGVsIHBhclx1MDBFMW1ldHJvIGxhIGhvcmEgZmluYWwgbnVldmEsIHBhcmEgYWN0dWFsaXphciBlbCB2YWxvci5cbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT09IHVuZGVmaW5lZCl7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuICAgICAgICB9ZWxzZXsgXG4gICAgICAgICAgICByZXR1cm4gcGFyYW1ldHJvO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGllbXBvVHJhYmFqYWRvKHBhcmFtZXRybywgYWN0dWFsKXtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgXG4gICAgICAgIGxldCBob3JhSW5pY2lvU3RyID0gdGhpcy5pbmZvTm90YS5ob3JhSW5pY2lvO1xuICAgICAgICBsZXQgY2llcnJlO1xuICAgICAgICAvLyBTdXBvbmllbmRvIHF1ZSBlbCBmb3JtYXRvIGVzIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIgeSBxdWllcmVzIGNvbnZlcnRpcmxvIGEgdW4gZm9ybWF0byByZWNvbm9jaWRvIHBvciBEYXRlXG4gICAgICAgIC8vIFByaW1lcm8sIGVsaW1pbmEgbGEgcGFydGUgZGVsIGRcdTAwRURhIGRlIGxhIHNlbWFuYSwgeWEgcXVlIERhdGUoKSBubyBsYSBuZWNlc2l0YVxuICAgICAgICBsZXQgW2ZlY2hhLCAsIGhvcmFdID0gaG9yYUluaWNpb1N0ci5zcGxpdCgnICcpO1xuICAgICAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7ZmVjaGF9VCR7aG9yYX1gO1xuICAgICAgICAvLyBDcmVhciBvYmpldG9zIERhdGVcbiAgICAgICAgbGV0IGhvcmFJbmljaW8gPSBuZXcgRGF0ZShmZWNoYUhvcmFJU08pO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7ICAgIFxuICAgICAgICBjaWVycmUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbGV0IFtmZWNoYUNpZXJyZSwgLGhvcmFDaWVycmVdID0gcGFyYW1ldHJvLnNwbGl0KCcgJyk7ICAgXG4gICAgICAgICAgICBsZXQgZmVjaGFIb3JhQ2llcnJlSVNPID0gYCR7ZmVjaGFDaWVycmV9VCR7aG9yYUNpZXJyZX1gO1xuICAgICAgICAgICAgY2llcnJlID0gbmV3IERhdGUoZmVjaGFIb3JhQ2llcnJlSVNPKTtcbiAgICAgICAgfSAgICAgICAgXG4gICAgICAgIC8vIENhbGN1bGFyIGxhIGRpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgICAgIGxldCBkaWZlcmVuY2lhRW5NaWxpc2VndW5kb3MgPSBjaWVycmUgLSBob3JhSW5pY2lvO1xuICAgICAgICByZXR1cm4gZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0U2VjSWQoZmxhZywgYWN0dWFsKXtcblxuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXR1bG8oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IHRpdHVsbyA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChgVGl0dWxvIGRlIGVzdGUoYSkgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLm5hbWV9YCwgYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgbGV0IGRlc2NyaXBjaW9uO1xuICAgICAgICBzd2l0Y2ggKGZsYWcpIHtcbiAgICAgICAgICAgIGNhc2UgXCJSZWdpc3Ryb1RpZW1wb1wiOlxuICAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRkRldGFsbGUgZGVsIFJlZ2lzdHJvIFRpZW1wbzpcIiwgYWN0dWFsLCBmYWxzZSwgdHJ1ZSApICAgXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBkZXNjcmlwY2lvbiA9IGF3YWl0IHByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH0gXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGRlc2NyaXBjaW9uID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcyhmbGFnLCBhY3R1YWwpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgICAgIFxuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgLy8gMCAtPiBOb21icmUsIDEgLT4gdHlwZSArIE5vbWJyZVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCBzaUFzdW50bywgbm9tYnJlOyBcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpeyBcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTsgXG4gICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvID0ge307XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLnNpQXN1bnRvID0gc2lBc3VudG87XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLm5vbWJyZSA9IG5vbWJyZTsgICAgXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZX1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oZmxhZywgYWN0dWFsKXtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb24sIHRhZ0NsYXNpZmljYWNpb24sIGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWDtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb249PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIlx0XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgICAgIGxldCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBsZXQgbmV3VGFnQ2xhc2lmaWNhY2lvbiA9IFsuLi50YWdzQ2xhc2lmaWNhY2lvbkFYLCB0YWdDbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCA9IG5ld1RhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ub3RhLmNsYXNpZmljYWNpb25BWCA9IGNsYXNpZmljYWNpb247XG4gICAgICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHJldHVybiB7Y2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbn07XG4gICAgfVxuICAgIC8vIC0+XG5cbiAgICBhc3luYyBnZXRFc3RhZG8ocGFyYW1ldHJvLCBhY3R1YWwpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IGNhbXBvO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09IHVuZGVmaW5lZCl7XG4gICAgICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcblx0ICAgIGNhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gSW5mb3JtYWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REZFMiAtPiBGaW5hbGl6YWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gZWplY3VjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgbnVldm8gZXN0YWRvOlwiKTtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChjYW1wbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBjYW1wbyA9IHBhcmFtZXRybztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubm90YS5lc3RhZG8gPSBjYW1wbztcbiAgICAgICAgcmV0dXJuIGNhbXBvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEZpbGVuYW1lKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIHN3aXRjaCh0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50aXR1bG99L2luZGV4JHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5maWxlTmFtZSA9IChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgICAgICAgICBicmVhazsgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5maWxlTmFtZTtcbiAgICB9XG5cbiAgICBhc3luYyBtb2RhbENhbWJpb0hGKG5vdGEpe1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IG1vZGFsID0gbmV3IG1vZGFsX2NhbWJpb0hGKHRoaXMucGx1Z2luLCBub3RhKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cbiAgIFxuXG4gIH1cbiAgIiwgImltcG9ydCB7IE1vZGFsLCBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBZQU1MVXBkYXRlckFQSSB9IGZyb20gJy4uLy4uL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSSc7XG5cbmV4cG9ydCBjbGFzcyBtb2RhbF9jYW1iaW9IRiBleHRlbmRzIE1vZGFsIHtcbiAgICBmaWxlOiBURmlsZTtcbiAgICBhcHA6IEFwcDtcbiAgICBob3JhRmluYWxJbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuZmlsZSA9IGZpbGU7XG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxJbmJveFwiKTtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmZpbGUuZmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgXCJBY3RpdmlkYWQgc2luIGFsaWFzXCI7XG4gICAgICAgIC8vIENvbnZlcnRpciBob3JhSW5pY2lvU3RyIGEgZm9ybWF0byBcIllZWVktTU0tRERUSEg6TU1cIiBwYXJhIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnN0IGhvcmFGaW5TdHIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmhvcmFGaW5hbCA/IHdpbmRvdy5tb21lbnQobWV0YWRhdGEuZnJvbnRtYXR0ZXIuaG9yYUZpbmFsLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKS5mb3JtYXQoXCJZWVlZLU1NLUREVEhIOm1tXCIpIDogJyc7XG5cbiAgICAgICAgLy8gQ29uZmlndXJhIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbCB5IG11ZXN0cmEgZWwgYWxpYXMgZGUgbGEgdGFyZWFcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYENhbWJpbyBob3JhIGNpZXJyZSBkZSByZWdpc3Ryby5gIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBUYXJlYTogXCIke2FsaWFzZXNbMF19XCJgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5wdXQgcGFyYSBsYSBob3JhIGRlIGluaWNpbyBjb24gdGlwbyBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdIb3JhIGRlIGNpZXJyZSByZWdpc3RybzonIH0pO1xuICAgICAgICB0aGlzLmhvcmFGaW5hbElucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdkYXRldGltZS1sb2NhbCcsXG4gICAgICAgICAgICB2YWx1ZTogaG9yYUZpblN0clxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBjYW1iaW9zXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0d1YXJkYXIgY2FtYmlvcycgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZ3VhcmRhckNhbWJpb3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBndWFyZGFyQ2FtYmlvcygpIHtcbiAgICAgICAgY29uc3QgbnVldmFIb3JhRmluYWxMb2NhbCA9IHRoaXMuaG9yYUZpbmFsSW5wdXQudmFsdWU7XG4gICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBsYSBudWV2YSBob3JhIHRpZW5lIHZhbG9yIGFudGVzIGRlIGludGVudGFyIGZvcm1hdGVhclxuICAgICAgICBpZiAoIW51ZXZhSG9yYUZpbmFsTG9jYWwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW5hIGhvcmEgZGUgY2llcnJlLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBcIllZWVktTU0tRERUSEg6TU1cIiBhIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCJcbiAgICAgICAgY29uc3QgbnVldmFIb3JhRmluYWwgPSB3aW5kb3cubW9tZW50KG51ZXZhSG9yYUZpbmFsTG9jYWwpLmZvcm1hdChcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAvLyBFamVjdXRhciBZQU1MIFVwZGF0ZVxuICAgICAgICAgICAgbGV0IGNhbXBvcyA9IFtcImZlY2hhXCIsYGhvcmFGaW5hbF8ke251ZXZhSG9yYUZpbmFsfWAsYHRpZW1wb1RyYWJhamFkb18ke251ZXZhSG9yYUZpbmFsfWAsIFwiZXN0YWRvX1x1RDgzRFx1REQzNVwiXTtcbiAgICAgICAgICAgIGxldCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnBsdWdpbi5ZQU1MVXBkYXRlckFQSS5hY3R1YWxpemFyTm90YSh0aGlzLmZpbGUsIGNhbXBvcyk7XG5cblxuXG5cbiAgICAgICAgICAgIC8vIENlcnJhciBlbCBtb2RhbCBkZXNwdVx1MDBFOXMgZGUgZ3VhcmRhciBsb3MgY2FtYmlvc1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkhvcmEgZGUgRmluYWxpemFjaVx1MDBGM24gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhciBjYW1iaW9zIGVuIGxhIG5vdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBndWFyZGFyIGxvcyBjYW1iaW9zIGVuIGxhIG5vdGEuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7Tm90aWNlLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQge0RhdGVUaW1lLCBEdXJhdGlvbn0gZnJvbSAnbHV4b24nXG5pbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSAnLi9zdGFydGVyQVBJJztcbmltcG9ydCB7IHV0aWxzQVBJIH0gZnJvbSAnLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJJztcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSAnLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJJztcblxuZXhwb3J0IGNsYXNzIG1lbnVIb3lBUEkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7ICAvLyBHdWFyZGEgdW5hIHJlZmVyZW5jaWEgYSBsYSBhcGxpY2FjaVx1MDBGM24gT2JzaWRpYW4gcGFyYSBhY2NlZGVyIGEgc3VzIG1cdTAwRTl0b2RvcyB5IHByb3BpZWRhZGVzXG4gICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgICBhc3luYyBtb3N0cmFyTWVudShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSAnTWVuXHUwMEZBIGhveSc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgICAgIGJvdG9uTWVudUhveS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lcyhkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIG1vZGlmaWNhZG8gcGFyYSBhZGFwdGFyc2UgYWwgY29udGV4dG8gZGVsIHBsdWdpblxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbmVzKGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yIHBhcmEgcmVtb3ZlciBlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQVxuXG4gICAgICAgIGNvbnN0IGJvdG9uZXMgPSBbXG4gICAgICAgICAgICBcIkhcdTAwRTFiaXRvc1wiLCBcIkJhbGFuY2VcIiwgXCJSZWdpc3RybyBkZSBUYXJlYXNcIiwgXCJOb3RhcyBkXHUwMEVEYVwiLCBcIlBlcnNvbmFsZXNcIlxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQmFsYW5jZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbChkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSFx1MDBFMWJpdG9zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckZvcm11bGFyaW9IYWJpdG9zKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZWdpc3RybyBkZSBUYXJlYXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25SZWdpc3Ryb1RhcmVhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTm90YXMgZFx1MDBFRGEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lc05vdGFzRFx1MDBFRGEoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BlcnNvbmFsZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lc05vdGFzUGVyc29uYWxlcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhZ3JlZ2FyIGVsIGJvdFx1MDBGM24gZGUgcmVjYXJnYSB5IHN1IGxcdTAwRjNnaWNhIChFamVtcGxvIGFkYXB0YWRvKVxuICAgIGFncmVnYXJCb3RvblNhbGlyKGR2KSB7XG4gICAgICAgIGNvbnN0IGJvdG9uUmVjYXJnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3RvblJlY2FyZ2EudGV4dENvbnRlbnQgPSAnU2FsaXInO1xuICAgICAgICBib3RvblJlY2FyZ2Eub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhck1lbnUoZHYpOyAvLyBSZXN0YWJsZWNlciBhIGxhIHZpc3RhIGRlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQSBpbmljaWFsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBib3RvblJlY2FyZ2E7XG4gICAgfVxuXG4gICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWN0dWFsaXphciBjYW1wb3MgWUFNTFxuICAgICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKGZpbGVQYXRoLCBZQU1MZmllbGQsIHZhbG9yKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBSdXRhIGFsIGFyY2hpdm8gcXVlIHNlIHZhIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVlciB5IGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgdXNhbmRvIHByb2Nlc3NGcm9udE1hdHRlclxuICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIGRlbCBjYW1wbyBlc3BlY2lmaWNhZG9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW1lBTUxmaWVsZF0gPSB2YWxvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcGNpb25hbDogTm90aWZpY2FyIGFsIHVzdWFyaW8gcXVlIGxhIGFjdHVhbGl6YWNpXHUwMEYzbiBmdWUgZXhpdG9zYVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1lBTUwgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFyY2hpdm8gbm8gZW5jb250cmFkb1wiLCBlcnIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgYWN0dWFsaXphciBlbCBZQU1MLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWwoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgLy8gTWVuc2FqZSBpbmljaWFsXG4gICAgICAgIGNvbnN0IG1lbnNhamUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBtZW5zYWplLnRleHRDb250ZW50ID0gJ0V2YWxcdTAwRkFhIGVsIGJhbGFuY2UgZGUgdHUgdmlkYSBob3knO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgXG4gICAgICAgIGNvbnN0IGluc3RydWNjaW9uZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGluc3RydWNjaW9uZXMudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZGUgMSBhIDUgY2FkYSBcdTAwRTFyZWE6JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGluc3RydWNjaW9uZXMpO1xuICAgIFxuICAgICAgICAvLyBcdTAwQzFyZWFzIGEgZXZhbHVhclxuICAgICAgICBjb25zdCBhcmVhcyA9IFtcbiAgICAgICAgICAgIFwiUHJvZHVjdGl2aWRhZFwiLCBcIkVzcGlyaXR1YWxcIiwgXCJTYWx1ZFwiLCBcIlJ1dGluYXNcIixcbiAgICAgICAgICAgIFwiVmlkYSBTb2NpYWxcIiwgXCJGYW1pbGlhclwiLCBcIkFwcmVuZGl6YWplc1wiLCBcIkNyZWF0aXZpZGFkXCJcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbCB5IHN1IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IG1ldGFkYXRhO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgaW5wdXQgcmFuZ2UgcGFyYSBjYWRhIFx1MDBFMXJlYVxuICAgICAgICBhcmVhcy5mb3JFYWNoKGFyZWEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsID0gbWV0YWRhdGEgJiYgbWV0YWRhdGFbc2FmZU5hbWVdID8gbWV0YWRhdGFbc2FmZU5hbWVdIDogMDtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmVkb3JBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5jbGFzc0xpc3QuYWRkKCdhcmVhLWV2YWx1YWNpb24nKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gYXJlYSArICc6ICc7XG4gICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gc2FmZU5hbWU7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpbnB1dC50eXBlID0gJ3JhbmdlJztcbiAgICAgICAgICAgIGlucHV0LmlkID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5uYW1lID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5taW4gPSAnMSc7XG4gICAgICAgICAgICBpbnB1dC5tYXggPSAnNSc7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGN1cnJlbnRWYWwudG9TdHJpbmcoKTsgLy8gVXNhciB2YWxvciBhY3R1YWwgbyAwXG4gICAgXG4gICAgICAgICAgICBjb25zdCB2YWxvckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBNb3N0cmFyIGVsIHZhbG9yIGFjdHVhbCBhbCBsYWRvXG4gICAgXG4gICAgICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4gdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIG1vc3RyYWRvIGFsIG1vdmVyIGVsIHJhbmdlXG4gICAgXG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZCh2YWxvckxhYmVsKTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW5lZG9yQXJlYSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBsb3MgdmFsb3Jlc1xuICAgICAgICBjb25zdCBib3Rvbkd1YXJkYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25HdWFyZGFyLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBib3Rvbkd1YXJkYXIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzYWZlTmFtZSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUludChpbnB1dEVsZW1lbnQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgc2FmZU5hbWUsIHZhbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQmFsYW5jZXMgYWN0dWFsaXphZG9zIGNvbiBcdTAwRTl4aXRvLicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBwdWRvIG9idGVuZXIgZWwgYXJjaGl2byBhY3R1YWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbkd1YXJkYXIpO1xuICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuXG4gICAgYXN5bmMgbW9zdHJhckZvcm11bGFyaW9IYWJpdG9zKGR2KSB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYWJpdG9zID0gW1xuICAgICAgICAgICAgXCJDbHViIDVhbVwiLFxuICAgICAgICAgICAgXCJSZWdpc3RybyBBa1x1MDBFMXNoaWtvXCIsXG4gICAgICAgICAgICBcIkdpbW5hc2lvXCIsXG4gICAgICAgICAgICBcIkNvbWVyIFNhbHVkYWJsZVwiLFxuICAgICAgICAgICAgXCJMZWVyIGxpYnJvXCIsXG4gICAgICAgICAgICBcIkVzY3JpYmlyIGJpdFx1MDBFMWNvcmEgZWwgbWlzbW8gZFx1MDBFRGFcIixcbiAgICAgICAgICAgIFwiQ3JlYXIgcGxhbiBkXHUwMEVEYSBzaWd1aWVudGVcIixcbiAgICAgICAgICAgIFwiTWUgZnVcdTAwRUQgYSBkb3JtaXIgYW50ZXMgZGUgbGFzIDEwOjMwcG1cIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYXJnYXIgeSBtYXJjYXIgY2hlY2tib3hlcyBzZWxlY2Npb25hZG9zIHByZXZpYW1lbnRlXG4gICAgICAgIGNvbnN0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgLy8gTGVlciBlbCBhcmNoaXZvIHBhcmEgb2J0ZW5lciBlbCBjYW1wbyAnaGFiaXRvcycgZGVsIFlBTUxcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hhYml0cyA9IGZyb250TWF0dGVyPy5oYWJpdG9zIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgaGFiaXRvcy5mb3JFYWNoKGhhYml0byA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmlkID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94Lm5hbWUgPSAnaGFiaXRvcyc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudmFsdWUgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGV4aXN0aW5nSGFiaXRzLmluY2x1ZGVzKGhhYml0byk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBoYWJpdG87XG4gICAgXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIFxuICAgICAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIGF3YWl0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zKCk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXJcbiAgICAgICAgY29uc3QgZ3VhcmRhckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBndWFyZGFyQnRuLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBndWFyZGFyQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwiaGFiaXRvc1wiXTpjaGVja2VkJykpO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRIYWJpdHMgPSBjaGVja2JveGVzLm1hcChjaGVja2JveCA9PiBjaGVja2JveC52YWx1ZSk7XG4gICAgXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvICdoYWJpdG9zJyBlbiBlbCBhcmNoaXZvIFlBTUwgdXNhbmRvIGVsIG1cdTAwRTl0b2RvIHVwZGF0ZVlBTUxGaWVsZHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhmaWxlLnBhdGgsICdoYWJpdG9zJywgc2VsZWN0ZWRIYWJpdHMpO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXIgYWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmRhckJ0bik7XG5cbiAgICAgICAgLy8gQWdyZWdhciBib3RcdTAwRjNuIGRlIHNhbGlyIHNpIG5lY2VzYXJpb1xuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25SZWdpc3Ryb1RhcmVhcyhkdikge1xuICAgICAgICBcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgbGV0IGJvdG9uZXM7XG4gICAgICAgIGNvbnN0IHV0aWxzQVBJbnN0YW5jZSA9IG5ldyB1dGlsc0FQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGF3YWl0IHV0aWxzQVBJbnN0YW5jZS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcClcbiAgICAgICAgaWYgKGFjdGl2byBpbnN0YW5jZW9mIFRGaWxlKXsgLy8gVmVyaWZpY2Egc2kgaGF5IGFsZ3VuIGFyY2hpdm8gYWN0aXZvIFxuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIiwgXCJDZXJyYXIgUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGJvdG9uZXMgPSBbXCJDZXJyYWRhcyBIb3lcIiwgXCJSZWdpc3Ryb3MgSG95XCIsIFwiTnVldm8gUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIGNhZGEgYm90XHUwMEYzblxuICAgICAgICBib3RvbmVzLmZvckVhY2godGV4dG9Cb3RvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYm90b24udGV4dENvbnRlbnQgPSB0ZXh0b0JvdG9uO1xuICAgICAgICAgICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dG9Cb3Rvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYWRhcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQ2VycmFkYXNIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2lzdHJvcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyUmVnaXN0cm9zSG95KGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYXIgUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhhY3Rpdm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ051ZXZvIFJlZ2lzdHJvIFRpZW1wbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydGVyQVBJbnN0YW5jZSA9IG5ldyBzdGFydGVyQVBJKHRoaXMucGx1Z2luKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRlckFQSW5zdGFuY2UuY3JlYXRlTm90ZShcIlJlZ2lzdHJvVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZXh0b0JvdG9ufSBwcmVzaW9uYWRvLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuICAgIGFzeW5jIG1vc3RyYXJDZXJyYWRhc0hveShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGFBY3Rpdm8gPSBhY3Rpdm8/LmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXTtcbiAgICAgICAgY29uc3QgaG95ID0gbmV3IERhdGUoZmVjaGFBY3Rpdm8pLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIFxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFyZWFzUHJvbWVzYXMgPSBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGxldCB0YXJlYXNFeHRyYWlkYXMgPSBleHRyYWVyVGFyZWFzKGNvbnRlbmlkbyk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBmcm9udE1hdHRlcj8uYWxpYXNlcyA/IGZyb250TWF0dGVyLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBhbGlhcyxcbiAgICAgICAgICAgICAgICB0YXJlYXM6IHRhcmVhc0V4dHJhaWRhcy5maWx0ZXIodGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmVjaGFUYXJlYSA9IG5ldyBEYXRlKHRhcmVhLmNvbXBsZXRpb25EYXRlKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmVhLmNvbXBsZXRlZCAmJiB0YXJlYS5jb21wbGV0aW9uRGF0ZSAmJiBmZWNoYVRhcmVhID09PSBob3k7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbGV0IHJlc3VsdGFkb3MgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXJlYXNQcm9tZXNhcyk7XG4gICAgICAgIGxldCB0b3RhbFRhcmVhc0NlcnJhZGFzID0gcmVzdWx0YWRvcy5yZWR1Y2UoKHRvdGFsLCB7IHRhcmVhcyB9KSA9PiB0b3RhbCArIHRhcmVhcy5sZW5ndGgsIDApO1xuXG4gICAgICAgIC8vIE1lbnNhamUgc29icmUgZWwgZXN0YWRvIGRlIGxhcyB0YXJlYXMgY2VycmFkYXMgaG95XG4gICAgICAgIGlmICh0b3RhbFRhcmVhc0NlcnJhZGFzID4gMCkge1xuICAgICAgICAgICAgZHYuaGVhZGVyKDMsIGBIb3kgc2UgaGFuIGNlcnJhZG8gJHt0b3RhbFRhcmVhc0NlcnJhZGFzfSB0YXJlYXMuYCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBDcmVhciBsYSB0YWJsYSBIVE1MXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTsgLy8gQWdyZWdhciB1bmEgY2xhc2UgcGFyYSBsYSB0YWJsYSBwYXJhIGVsIGVzdGlsb1xuICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZW5jYWJlemFkb3MgZGUgdGFibGFcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBbXCJOb3RhXCIsIFwiVGFyZWFzIENlcnJhZGFzXCJdO1xuICAgICAgICBoZWFkZXJzLmZvckVhY2goaGVhZGVyVGV4dCA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IGhlYWRlclRleHQ7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGZpbGFzIGRlIGRhdG9zIGEgbGEgdGFibGFcbiAgICAgICAgcmVzdWx0YWRvcy5mb3JFYWNoKCh7ZmlsZVBhdGgsIGFsaWFzLCB0YXJlYXN9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIGVubGFjZSBjZW50cmFkbyB2ZXJ0aWNhbG1lbnRlXG4gICAgICAgICAgICAgICAgbGV0IGxpbmtDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsaW5rQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgb2JzaWRpYW46Ly9vcGVuP3ZhdWx0PSR7YXBwLnZhdWx0LmdldE5hbWUoKX0mZmlsZT0ke2VuY29kZVVSSUNvbXBvbmVudChmaWxlUGF0aCl9YCk7XG4gICAgICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IGFsaWFzIHx8IGZpbGVQYXRoO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChsaW5rQ2VsbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uYSBkZSB0YXJlYXMgY2VycmFkYXNcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgICAgICB0YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gdGFyZWEudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgdGFza3NMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YXNrc0NlbGwuYXBwZW5kQ2hpbGQodGFza3NMaXN0KTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGFza3NDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGEgdGFibGEgYWwgY29udGVuZWRvciBkZSBEYXRhdmlld1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGR2LnBhcmFncmFwaChcIk5vIGhheSB0YXJlYXMgY2VycmFkYXMgaG95LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIFxuICAgIGZ1bmN0aW9uIGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKSB7XG4gICAgICAgIGNvbnN0IHRhcmVhcyA9IFtdO1xuICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoXCJcXG5cIik7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgbGluZWEgb2YgbGluZWFzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYVJlZ2V4ID0gL15cXHMqLVxccypcXFsoeHxYfCApXFxdXFxzKiguKykkLztcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGFyZWFSZWdleC5leGVjKGxpbmVhKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRhZGEgPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRvVGFyZWEgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICBsZXQgZmVjaGFDb21wbGV0aXR1ZCA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFSZWdleCA9IC9cXFtjb21wbGV0aW9uOjogKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KVxcXS87XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFNYXRjaCA9IGZlY2hhUmVnZXguZXhlYyh0ZXh0b1RhcmVhKTtcbiAgICAgICAgICAgICAgICBpZiAoZmVjaGFNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBmZWNoYUNvbXBsZXRpdHVkID0gZmVjaGFNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9UYXJlYSA9IHRleHRvVGFyZWEucmVwbGFjZShmZWNoYVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB0YXJlYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRvVGFyZWEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogY29tcGxldGFkYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbkRhdGU6IGZlY2hhQ29tcGxldGl0dWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRhcmVhcztcbiAgICB9XG4gICAgXG4gICAgXG59XG5cblxuICAgIGFzeW5jIG1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpIHtcbiAgICAgICAgICAgLy8gT2J0ZW5lciBlbCBsZWFmIGFjdGl2byBhY3R1YWxcbiAgICAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IGFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblxuICAgICAgICAgICAvLyBPYnRlbmVyIGVsIHBhdGggZGVsIFRGaWxlIGFzb2NpYWRvIGNvbiBlbCBsZWFmIGFjdGl2bywgc2kgZXhpc3RlXG4gICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlUGF0aCA9IGFjdGl2ZUxlYWYudmlldz8uZmlsZT8ucGF0aDtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhciB1bmEgbnVldmEgZGl2aXNpXHUwMEYzbiBhIGxhIGRlcmVjaGEgZGVsIGxlYWYgYWN0aXZvXG4gICAgICAgICAgIGNvbnN0IG5ld0xlYWYgPSBhd2FpdCBhcHAud29ya3NwYWNlLnNwbGl0QWN0aXZlTGVhZigndmVydGljYWwnKTtcbiAgIFxuICAgICAgICAgICAvLyBDb25maWd1cmFyIGVsIG51ZXZvIGxlYWYgcGFyYSBtb3N0cmFyIHR1IHZpc3RhIHBlcnNvbmFsaXphZGFcbiAgICAgICAgICAgLy8geSBwYXNhciBlbCBwYXRoIGRlbCBURmlsZSBjb21vIHBhcnRlIGRlbCBlc3RhZG9cbiAgICBcbiAgICAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1yZWdpc3Ryby1kaWFyaW9cIixcbiAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihuZXdMZWFmKTsgICAgXG59XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBubyBzZSBlbnZpYXJcdTAwRTEgdW4gZm9ybXVsYXJpbyBhbCBoYWNlciBjbGljIGVuIFx1MDBFOWxcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lvdXItYnV0dG9uLWNsYXNzJyk7IC8vIEFncmVnYSB1bmEgY2xhc2UgcGFyYSBlbCBlc3RpbG8gZGVsIGJvdFx1MDBGM24gc2kgZXMgbmVjZXNhcmlvXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkZSBlbCBldmVudG8gZGUgY2xpYyBhbCBib3RcdTAwRjNuXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tDYWxsYmFjayk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gICAgLy8gQ3JlYSBsYSBub3RhIGRlc2RlIGVsIHRlbXBsYXRlciBkZSBSZWdpc3Ryb1RpZW1wb1xuICAgIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcmVlbXBsYXphciAncnV0YS9hbC9hcmNoaXZvLm1kJyBjb24gbGEgcnV0YSBleGFjdGEgZGVsIGFyY2hpdm8gcXVlIGRlc2VhcyBvYnRlbmVyXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICAgICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICAgICAgfVxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbiB8fCAhdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICB0cC5maWxlID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcImZpbGVcIik7XG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ3RwIGNvbiBwcm9waWVkYWRlcyBcImZpbGVcIiBzZSBoYSBjYXJnYWRvIHNhdGlzZmFjdG9yaWFtZW50ZScpO1xuICAgICAgICByZXR1cm4gdHA7XG4gICAgfVxuXG59XG4gICAgXG4iLCAiaW1wb3J0IHtOb3RpY2UsIFRGaWxlfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7RGF0ZVRpbWUsIER1cmF0aW9ufSBmcm9tICdsdXhvbidcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tICcuL3N0YXJ0ZXJBUEknO1xuaW1wb3J0IHsgdXRpbHNBUEkgfSBmcm9tICcuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEknO1xuaW1wb3J0IHsgVmlzdGFSZXN1bWVuU2VtYW5hbCB9IGZyb20gJy4uL3ZpZXdzL3Zpc3RhUmVzdW1lblNlbWFuYWwnO1xuXG5leHBvcnQgY2xhc3MgbWVudVNlbWFuYWxBUEkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7ICAvLyBHdWFyZGEgdW5hIHJlZmVyZW5jaWEgYSBsYSBhcGxpY2FjaVx1MDBGM24gT2JzaWRpYW4gcGFyYSBhY2NlZGVyIGEgc3VzIG1cdTAwRTl0b2RvcyB5IHByb3BpZWRhZGVzXG4gICAgICAgIC8vIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgICBhc3luYyBtb3N0cmFyTWVudShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSAnTWVuXHUwMEZBIFNlbWFuYWwnO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25NZW51SG95KTtcblxuICAgICAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uZXMoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBtb2RpZmljYWRvIHBhcmEgYWRhcHRhcnNlIGFsIGNvbnRleHRvIGRlbCBwbHVnaW5cbiAgICBhc3luYyBtb3N0cmFyQm90b25lcyhkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBwYXJhIHJlbW92ZXIgZWwgYm90XHUwMEYzbiBkZSBtZW5cdTAwRkFcblxuICAgICAgICBjb25zdCBib3RvbmVzID0gW1xuICAgICAgICAgICAgXCJSZXN1bWVuIGRpYXJpb1wiLCBcIkFncmFkZWNpbWllbnRvc1wiLCBcIkNyZWFkYXNcIiwgXCJNb2RpZmljYWRhc1wiLCBcInggRmVjaGFcIiwgXCJUYXJlYXMgQ2VycmFkYXNcIlxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVzdW1lbiBkaWFyaW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyUmVzdW1lbkRpYXJpbyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQWdyYWRlY2ltaWVudG9zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckFncmFkZWNpbWllbnRvcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ3JlYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJDcmVhZGFzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdNb2RpZmljYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJNb2RpZmljYWRhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCBGZWNoYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJ4RmVjaGEoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RhcmVhcyBDZXJyYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJUYXJlYXNDZXJyYWRhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhZ3JlZ2FyIGVsIGJvdFx1MDBGM24gZGUgcmVjYXJnYSB5IHN1IGxcdTAwRjNnaWNhIChFamVtcGxvIGFkYXB0YWRvKVxuICAgIGFncmVnYXJCb3RvblNhbGlyKGR2KSB7XG4gICAgICAgIGNvbnN0IGJvdG9uUmVjYXJnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3RvblJlY2FyZ2EudGV4dENvbnRlbnQgPSAnU2FsaXInO1xuICAgICAgICBib3RvblJlY2FyZ2Eub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhck1lbnUoZHYpOyAvLyBSZXN0YWJsZWNlciBhIGxhIHZpc3RhIGRlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQSBpbmljaWFsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBib3RvblJlY2FyZ2E7XG4gICAgfVxuXG4gICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWN0dWFsaXphciBjYW1wb3MgWUFNTFxuICAgICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKGZpbGVQYXRoLCBZQU1MZmllbGQsIHZhbG9yKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBSdXRhIGFsIGFyY2hpdm8gcXVlIHNlIHZhIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVlciB5IGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgdXNhbmRvIHByb2Nlc3NGcm9udE1hdHRlclxuICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIGRlbCBjYW1wbyBlc3BlY2lmaWNhZG9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW1lBTUxmaWVsZF0gPSB2YWxvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcGNpb25hbDogTm90aWZpY2FyIGFsIHVzdWFyaW8gcXVlIGxhIGFjdHVhbGl6YWNpXHUwMEYzbiBmdWUgZXhpdG9zYVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1lBTUwgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFyY2hpdm8gbm8gZW5jb250cmFkb1wiLCBlcnIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgYWN0dWFsaXphciBlbCBZQU1MLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgbW9zdHJhclJlc3VtZW5EaWFyaW8oZHYpe1xuICAgICAgICBkZWJ1Z2dlcjtcblxuICAgICAgICAvLyBPYnRlbmVyIGVsIGxlYWYgYWN0aXZvIGFjdHVhbFxuICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuXG4gICAgICAgIC8vIE9idGVuZXIgZWwgcGF0aCBkZWwgVEZpbGUgYXNvY2lhZG8gY29uIGVsIGxlYWYgYWN0aXZvLCBzaSBleGlzdGVcbiAgICAgICAgY29uc3QgY3VycmVudEZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3Py5maWxlPy5wYXRoO1xuXG4gICAgICAgIC8vIENyZWFyIHVuYSBudWV2YSBkaXZpc2lcdTAwRjNuIGEgbGEgZGVyZWNoYSBkZWwgbGVhZiBhY3Rpdm9cbiAgICAgICAgY29uc3QgbmV3TGVhZiA9IGF3YWl0IGFwcC53b3Jrc3BhY2Uuc3BsaXRBY3RpdmVMZWFmKCd2ZXJ0aWNhbCcpO1xuXG4gICAgICAgIC8vIENvbmZpZ3VyYXIgZWwgbnVldm8gbGVhZiBwYXJhIG1vc3RyYXIgdHUgdmlzdGEgcGVyc29uYWxpemFkYVxuICAgICAgICAvLyB5IHBhc2FyIGVsIHBhdGggZGVsIFRGaWxlIGNvbW8gcGFydGUgZGVsIGVzdGFkb1xuIFxuICAgICAgICBhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICB0eXBlOiBcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiLFxuICAgICAgICB9KTtcbiBcbiAgICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKG5ld0xlYWYpO1xuICAgIH1cbiAgICBcblxuXG5cbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbChkdikge1xuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIFxuICAgICAgICAvLyBNZW5zYWplIGluaWNpYWxcbiAgICAgICAgY29uc3QgbWVuc2FqZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIG1lbnNhamUudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZWwgYmFsYW5jZSBkZSB0dSB2aWRhIGhveSc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICBcbiAgICAgICAgY29uc3QgaW5zdHJ1Y2Npb25lcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgaW5zdHJ1Y2Npb25lcy50ZXh0Q29udGVudCA9ICdFdmFsXHUwMEZBYSBkZSAxIGEgNSBjYWRhIFx1MDBFMXJlYTonO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoaW5zdHJ1Y2Npb25lcyk7XG4gICAgXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgYSBldmFsdWFyXG4gICAgICAgIGNvbnN0IGFyZWFzID0gW1xuICAgICAgICAgICAgXCJQcm9kdWN0aXZpZGFkXCIsIFwiRXNwaXJpdHVhbFwiLCBcIlNhbHVkXCIsIFwiUnV0aW5hc1wiLFxuICAgICAgICAgICAgXCJWaWRhIFNvY2lhbFwiLCBcIkZhbWlsaWFyXCIsIFwiQXByZW5kaXphamVzXCIsIFwiQ3JlYXRpdmlkYWRcIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBPYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsIHkgc3UgbWV0YWRhdGFcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgbWV0YWRhdGE7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhciBpbnB1dCByYW5nZSBwYXJhIGNhZGEgXHUwMEUxcmVhXG4gICAgICAgIGFyZWFzLmZvckVhY2goYXJlYSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBtZXRhZGF0YSAmJiBtZXRhZGF0YVtzYWZlTmFtZV0gPyBtZXRhZGF0YVtzYWZlTmFtZV0gOiAwO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgY29udGVuZWRvckFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmNsYXNzTGlzdC5hZGQoJ2FyZWEtZXZhbHVhY2lvbicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBhcmVhICsgJzogJztcbiAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBzYWZlTmFtZTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAncmFuZ2UnO1xuICAgICAgICAgICAgaW5wdXQuaWQgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm1pbiA9ICcxJztcbiAgICAgICAgICAgIGlucHV0Lm1heCA9ICc1JztcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gY3VycmVudFZhbC50b1N0cmluZygpOyAvLyBVc2FyIHZhbG9yIGFjdHVhbCBvIDBcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHZhbG9yTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIE1vc3RyYXIgZWwgdmFsb3IgYWN0dWFsIGFsIGxhZG9cbiAgICBcbiAgICAgICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIEFjdHVhbGl6YXIgZWwgdmFsb3IgbW9zdHJhZG8gYWwgbW92ZXIgZWwgcmFuZ2VcbiAgICBcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKHZhbG9yTGFiZWwpO1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbmVkb3JBcmVhKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBndWFyZGFyIGxvcyB2YWxvcmVzXG4gICAgICAgIGNvbnN0IGJvdG9uR3VhcmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbkd1YXJkYXIudGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGJvdG9uR3VhcmRhci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNhZmVOYW1lKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxvciA9IHBhcnNlSW50KGlucHV0RWxlbWVudC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMoZmlsZS5wYXRoLCBzYWZlTmFtZSwgdmFsb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdCYWxhbmNlcyBhY3R1YWxpemFkb3MgY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIHB1ZG8gb2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uR3VhcmRhcik7XG4gICAgXG4gICAgICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBzYWxpciBzaSBuZWNlc2FyaW9cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG5cbiAgICBhc3luYyBtb3N0cmFyRm9ybXVsYXJpb0hhYml0b3MoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhhYml0b3MgPSBbXG4gICAgICAgICAgICBcIkNsdWIgNWFtXCIsXG4gICAgICAgICAgICBcIlJlZ2lzdHJvIEFrXHUwMEUxc2hpa29cIixcbiAgICAgICAgICAgIFwiR2ltbmFzaW9cIixcbiAgICAgICAgICAgIFwiQ29tZXIgU2FsdWRhYmxlXCIsXG4gICAgICAgICAgICBcIkxlZXIgbGlicm9cIixcbiAgICAgICAgICAgIFwiRXNjcmliaXIgYml0XHUwMEUxY29yYSBlbCBtaXNtbyBkXHUwMEVEYVwiLFxuICAgICAgICAgICAgXCJDcmVhciBwbGFuIGRcdTAwRURhIHNpZ3VpZW50ZVwiLFxuICAgICAgICAgICAgXCJNZSBmdVx1MDBFRCBhIGRvcm1pciBhbnRlcyBkZSBsYXMgMTA6MzBwbVwiXG4gICAgICAgIF07XG4gICAgXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNhcmdhciB5IG1hcmNhciBjaGVja2JveGVzIHNlbGVjY2lvbmFkb3MgcHJldmlhbWVudGVcbiAgICAgICAgY29uc3QgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGFyY2hpdm8gcGFyYSBvYnRlbmVyIGVsIGNhbXBvICdoYWJpdG9zJyBkZWwgWUFNTFxuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGFiaXRzID0gZnJvbnRNYXR0ZXI/LmhhYml0b3MgfHwgW107XG4gICAgXG4gICAgICAgICAgICBoYWJpdG9zLmZvckVhY2goaGFiaXRvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guaWQgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3gubmFtZSA9ICdoYWJpdG9zJztcbiAgICAgICAgICAgICAgICBjaGVja2JveC52YWx1ZSA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZXhpc3RpbmdIYWJpdHMuaW5jbHVkZXMoaGFiaXRvKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGhhYml0bztcbiAgICBcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgYXdhaXQgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MoKTtcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgeSBjb25maWd1cmFyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhclxuICAgICAgICBjb25zdCBndWFyZGFyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGd1YXJkYXJCdG4udGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGd1YXJkYXJCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJoYWJpdG9zXCJdOmNoZWNrZWQnKSk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEhhYml0cyA9IGNoZWNrYm94ZXMubWFwKGNoZWNrYm94ID0+IGNoZWNrYm94LnZhbHVlKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gJ2hhYml0b3MnIGVuIGVsIGFyY2hpdm8gWUFNTCB1c2FuZG8gZWwgbVx1MDBFOXRvZG8gdXBkYXRlWUFNTEZpZWxkc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgJ2hhYml0b3MnLCBzZWxlY3RlZEhhYml0cyk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhciBhbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChndWFyZGFyQnRuKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvblJlZ2lzdHJvVGFyZWFzKGR2KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBsZXQgYm90b25lcztcbiAgICAgICAgY29uc3QgdXRpbHNBUEluc3RhbmNlID0gbmV3IHV0aWxzQVBJKHRoaXMucGx1Z2luKTtcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXdhaXQgdXRpbHNBUEluc3RhbmNlLmJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwKVxuICAgICAgICBpZiAoYWN0aXZvIGluc3RhbmNlb2YgVEZpbGUpeyAvLyBWZXJpZmljYSBzaSBoYXkgYWxndW4gYXJjaGl2byBhY3Rpdm8gXG4gICAgICAgICAgICBib3RvbmVzID0gW1wiQ2VycmFkYXMgSG95XCIsIFwiUmVnaXN0cm9zIEhveVwiLCBcIk51ZXZvIFJlZ2lzdHJvIFRpZW1wb1wiLCBcIkNlcnJhciBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhciB5IG1vc3RyYXIgY2FkYSBib3RcdTAwRjNuXG4gICAgICAgIGJvdG9uZXMuZm9yRWFjaCh0ZXh0b0JvdG9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3Rvbi50ZXh0Q29udGVudCA9IHRleHRvQm90b247XG4gICAgICAgICAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0ZXh0b0JvdG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhZGFzIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJDZXJyYWRhc0hveShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVnaXN0cm9zIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhciBSZWdpc3RybyBUaWVtcG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKGFjdGl2byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVldm8gUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZXJBUEluc3RhbmNlID0gbmV3IHN0YXJ0ZXJBUEkodGhpcy5wbHVnaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGFydGVyQVBJbnN0YW5jZS5jcmVhdGVOb3RlKFwiUmVnaXN0cm9UaWVtcG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgYXN5bmMgbW9zdHJhckNlcnJhZGFzSG95KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBmZWNoYUFjdGl2byA9IGFjdGl2bz8uYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdO1xuICAgICAgICBjb25zdCBob3kgPSBuZXcgRGF0ZShmZWNoYUFjdGl2bykuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXJlYXNQcm9tZXNhcyA9IGZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgbGV0IHRhcmVhc0V4dHJhaWRhcyA9IGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBhbGlhcyA9IGZyb250TWF0dGVyPy5hbGlhc2VzID8gZnJvbnRNYXR0ZXIuYWxpYXNlc1swXSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgIGFsaWFzLFxuICAgICAgICAgICAgICAgIHRhcmVhczogdGFyZWFzRXh0cmFpZGFzLmZpbHRlcih0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWNoYVRhcmVhID0gbmV3IERhdGUodGFyZWEuY29tcGxldGlvbkRhdGUpLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZWEuY29tcGxldGVkICYmIHRhcmVhLmNvbXBsZXRpb25EYXRlICYmIGZlY2hhVGFyZWEgPT09IGhveTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgcmVzdWx0YWRvcyA9IGF3YWl0IFByb21pc2UuYWxsKHRhcmVhc1Byb21lc2FzKTtcbiAgICAgICAgbGV0IHRvdGFsVGFyZWFzQ2VycmFkYXMgPSByZXN1bHRhZG9zLnJlZHVjZSgodG90YWwsIHsgdGFyZWFzIH0pID0+IHRvdGFsICsgdGFyZWFzLmxlbmd0aCwgMCk7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBzb2JyZSBlbCBlc3RhZG8gZGUgbGFzIHRhcmVhcyBjZXJyYWRhcyBob3lcbiAgICAgICAgaWYgKHRvdGFsVGFyZWFzQ2VycmFkYXMgPiAwKSB7XG4gICAgICAgICAgICBkdi5oZWFkZXIoMywgYEhveSBzZSBoYW4gY2VycmFkbyAke3RvdGFsVGFyZWFzQ2VycmFkYXN9IHRhcmVhcy5gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIENyZWFyIGxhIHRhYmxhIEhUTUxcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpOyAvLyBBZ3JlZ2FyIHVuYSBjbGFzZSBwYXJhIGxhIHRhYmxhIHBhcmEgZWwgZXN0aWxvXG4gICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbmNhYmV6YWRvcyBkZSB0YWJsYVxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBsZXQgaGVhZGVycyA9IFtcIk5vdGFcIiwgXCJUYXJlYXMgQ2VycmFkYXNcIl07XG4gICAgICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXJUZXh0ID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xuICAgICAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGhlYWRlci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZmlsYXMgZGUgZGF0b3MgYSBsYSB0YWJsYVxuICAgICAgICByZXN1bHRhZG9zLmZvckVhY2goKHtmaWxlUGF0aCwgYWxpYXMsIHRhcmVhc30pID0+IHtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgZGUgZW5sYWNlIGNlbnRyYWRvIHZlcnRpY2FsbWVudGVcbiAgICAgICAgICAgICAgICBsZXQgbGlua0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnaHJlZicsIGBvYnNpZGlhbjovL29wZW4/dmF1bHQ9JHthcHAudmF1bHQuZ2V0TmFtZSgpfSZmaWxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVQYXRoKX1gKTtcbiAgICAgICAgICAgICAgICBhLnRleHRDb250ZW50ID0gYWxpYXMgfHwgZmlsZVBhdGg7XG4gICAgICAgICAgICAgICAgbGlua0NlbGwuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGxpbmtDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIHRhcmVhcyBjZXJyYWRhc1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgICAgIHRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSB0YXJlYS50ZXh0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrc0xpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRhc2tzQ2VsbC5hcHBlbmRDaGlsZCh0YXNrc0xpc3QpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0YXNrc0NlbGwpO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSB0YWJsYSBhbCBjb250ZW5lZG9yIGRlIERhdGF2aWV3XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHYucGFyYWdyYXBoKFwiTm8gaGF5IHRhcmVhcyBjZXJyYWRhcyBob3kuXCIpO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgXG4gICAgZnVuY3Rpb24gZXh0cmFlclRhcmVhcyhjb250ZW5pZG8pIHtcbiAgICAgICAgY29uc3QgdGFyZWFzID0gW107XG4gICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdChcIlxcblwiKTtcbiAgICBcbiAgICAgICAgZm9yIChjb25zdCBsaW5lYSBvZiBsaW5lYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhUmVnZXggPSAvXlxccyotXFxzKlxcWyh4fFh8IClcXF1cXHMqKC4rKSQvO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0YXJlYVJlZ2V4LmV4ZWMobGluZWEpO1xuICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGFkYSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgICAgICBsZXQgdGV4dG9UYXJlYSA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIGxldCBmZWNoYUNvbXBsZXRpdHVkID0gbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVJlZ2V4ID0gL1xcW2NvbXBsZXRpb246OiAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxdLztcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU1hdGNoID0gZmVjaGFSZWdleC5leGVjKHRleHRvVGFyZWEpO1xuICAgICAgICAgICAgICAgIGlmIChmZWNoYU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlY2hhQ29tcGxldGl0dWQgPSBmZWNoYU1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0b1RhcmVhID0gdGV4dG9UYXJlYS5yZXBsYWNlKGZlY2hhUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRhcmVhcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dG9UYXJlYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiBjb21wbGV0YWRhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uRGF0ZTogZmVjaGFDb21wbGV0aXR1ZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGFyZWFzO1xuICAgIH1cbiAgICBcbiAgICBcbn1cblxuXG4gICAgYXN5bmMgbW9zdHJhclJlZ2lzdHJvc0hveShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBkZSBEYXRhdmlld1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0XHUwMEU5biBsYSBmZWNoYSBhY3R1YWwgYmFzYWRhIGVuIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBmZWNoYUhveSA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkuYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdLCAneXl5eS1NTS1kZCcsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgIFxuICAgICAgICAvLyBFbmN1ZW50cmEgYXJjaGl2b3MgcXVlIGNvbnRpZW5lbiByZWdpc3Ryb3MgZGUgdGllbXBvXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wb1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikpO1xuXG4gICAgICAgIC8vIExlZSB5IHByb2Nlc2EgZWwgY29udGVuaWRvIGRlIGNhZGEgYXJjaGl2byBwYXJhIGV4dHJhZXIgcmVnaXN0cm9zIGRlIHRpZW1wb1xuICAgICAgICBsZXQgdG90YWxEaWEgPSAwO1xuICAgICAgICBsZXQgcmVnaXN0cm9zSG95ID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgIGxldCBob3JhSW5pY2lvID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChtZXRhZGF0YS5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRPZkRheSA9IGhvcmFJbmljaW8uc3RhcnRPZignZGF5Jyk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0T2ZEYXkudHMgPT09IGZlY2hhSG95LnN0YXJ0T2YoJ2RheScpLnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0hveS5wdXNoKHtwYXRoOiBmaWxlLnBhdGgsIGZyb250bWF0dGVyIDogbWV0YWRhdGF9KTsgLy8gQ29ycmVnaWRvIHBhcmEgYWdyZWdhciBlbCBvYmpldG8gYXJjaGl2byBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgY29udmVydGlyIHRpZW1wb1RyYWJhamFkbyBhIG5cdTAwRkFtZXJvIGFudGVzIGRlIHN1bWFyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRGlhICs9IG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbyA/IHBhcnNlSW50KG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbykgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNb3N0cmFyIGVsIHRvdGFsIGRlIHRpZW1wbyB0cmFiYWphZG8gaG95XG4gICAgICAgIGR2LmhlYWRlcigzLCBcIlRpZW1wbyByZWdpc3RyYWRvIGhveTogXCIgKyBEdXJhdGlvbi5mcm9tTWlsbGlzKHRvdGFsRGlhKS50b0Zvcm1hdCgnaGg6bW06c3MnKSk7XG5cblxuICAgICAgICAgICAgLy8gT3JkZW5hIGxvcyByZWdpc3Ryb3MgcG9yIGhvcmEgZGUgaW5pY2lvIGFudGVzIGRlIGdlbmVyYXIgbGEgdGFibGFcbiAgICAgICAgcmVnaXN0cm9zSG95LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGhvcmFJbmljaW8gZXN0XHUwMEUxIHByZXNlbnRlIHkgZXMgdW5hIGNhZGVuYSB2XHUwMEUxbGlkYSBwYXJhIGFtYm9zIG9iamV0b3NcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbyA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGIuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbGxpc0EgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvTWlsbGlzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWxsaXNCID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChiLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b01pbGxpcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pbGxpc0IgLSBtaWxsaXNBO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBkYXRlczpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1hbmVqbyBkZSBjYXNvcyBkb25kZSBsb3MgZGF0b3Mgbm8gc2VhbiBzdHJpbmdzIHZcdTAwRTFsaWRvc1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZGF0ZSBmb3JtYXQgZm9yIHNvcnRpbmc6JywgYS5ob3JhSW5pY2lvLCBiLmhvcmFJbmljaW8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbmlmIChyZWdpc3Ryb3NIb3kubGVuZ3RoPjApe1xuLy8gQ3JlYSBsYSB0YWJsYSBIVE1MXG5jb25zdCB0YWJsZSA9IGR2LmNvbnRhaW5lci5jcmVhdGVFbCgndGFibGUnLCB7Y2xzOiAnZGF0YXZpZXcgdGFibGUnfSk7XG50YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuLy8gQ3JlYSB5IGFcdTAwRjFhZGUgbG9zIGVuY2FiZXphZG9zIGRlIGxhIHRhYmxhXG5jb25zdCBoZWFkZXIgPSBkdi5lbCgndHInLCAnJywgdGFibGUpO1xuW1wiUmVnaXN0cm9cIiwgXCJEZXNjcmlwY2lcdTAwRjNuXCIsIFwiSG9yYSBJbmljaW9cIiwgXCJUaWVtcG9cIiwgXCJFc3RhZG9cIiwgXCJJZFwiLCBcIkFjY2lcdTAwRjNuXCJdLmZvckVhY2godGV4dCA9PiBkdi5lbCgndGgnLCB0ZXh0LCBoZWFkZXIpKTtcblxuLy8gQ3JlYSB5IGFcdTAwRjFhZGUgY2FkYSBmaWxhIGRlIHJlZ2lzdHJvIGEgbGEgdGFibGFcbnJlZ2lzdHJvc0hveS5mb3JFYWNoKHJlZ2lzdHJvID0+IHtcbiAgICBjb25zdCByb3cgPSBkdi5lbCgndHInLCcnLHRhYmxlKVxuICAgIGR2LmVsKCd0ZCcsIGR2LmZ1bmMubGluayhyZWdpc3Ryby5wYXRoLHJlZ2lzdHJvLmZyb250bWF0dGVyLmFsaWFzZXNbMF0pLCByb3cpO1xuICAgICAvLyBBXHUwMEYxYWRlIGxhIGNlbGRhIGRlIGRlc2NyaXBjaVx1MDBGM24geSB0XHUwMEVEdHVsb1xuICAgIGR2LmVsKCd0ZCcsIHJlZ2lzdHJvLmZyb250bWF0dGVyLmRlc2NyaXBjaW9uID8gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZGVzY3JpcGNpb24gOiAnU2luIGRlc2NyaXBjaVx1MDBGM24nLCByb3cpO1xuICAgIGR2LmVsKCd0ZCcsIERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKSArXG4gICAgXCIgLyBcIiArIERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUZpbmFsLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9Gb3JtYXQoJ2g6bW0gYScpLCByb3cpO1xuICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpe1xuICAgIC8vIFNlcGFyYW1vcyBsYSBmZWNoYSB5IGxhIGhvcmEsIHkgZWxpbWluYW1vcyBlbCBkXHUwMEVEYSBkZSBsYSBzZW1hbmFcbiAgICBsZXQgcGFydGVzID0gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpby5zcGxpdCgnICcpO1xuICAgIC8vIFJlb3JnYW5pemFtb3MgbGFzIHBhcnRlcyBwYXJhIGZvcm1hciB1bmEgZmVjaGEgZW4gZm9ybWF0byBcIllZWVktTU0tRERUSEg6bW1cIlxuICAgIGxldCBmZWNoYUhvcmFJU08gPSBgJHtwYXJ0ZXNbMF19VCR7cGFydGVzWzJdfWA7XG4gICAgLy8gUGFyc2VhbW9zIGxhIGZlY2hhIGVuIGZvcm1hdG8gSVNPXG4gICAgbGV0IGluaWNpbyA9IERhdGUucGFyc2UoZmVjaGFIb3JhSVNPKTtcbiAgICBsZXQgYWhvcmEgPSBEYXRlLm5vdygpO1xuICAgIGxldCBkaWZlcmVuY2lhID0gYWhvcmEgLSBpbmljaW87IC8vIERpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgZHYuZWwoJ3RkJywgRHVyYXRpb24uZnJvbU1pbGxpcyhkaWZlcmVuY2lhKS50b0Zvcm1hdCgnaDptbScpLCByb3cpXG4gICAgfWVsc2V7XG4gICAgZHYuZWwoJ3RkJywgRHVyYXRpb24uZnJvbU1pbGxpcyhyZWdpc3Ryby5mcm9udG1hdHRlci50aWVtcG9UcmFiYWphZG8pLnRvRm9ybWF0KCdoOm1tJyksIHJvdyk7XG4gICAgfVxuICAgIGR2LmVsKCd0ZCcsIHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbywgcm93KTtcbiAgICBkdi5lbCgndGQnLCByZWdpc3Ryby5mcm9udG1hdHRlci5pZCwgcm93KTtcbiAgICBpZiAocmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKXtcbiAgICAgICAgZHYuZWwoJ3RkJywgdGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnQ2VycmFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBxdWUgbWFuZWphclx1MDBFMSBlbCBjbGljIGRlbCBib3RcdTAwRjNuLlxuICAgICAgICAvLyBQb3IgZWplbXBsbywgcmV0b21hciBsYSB0YXJlYSByZXByZXNlbnRhZGEgcG9yIGByZWdpc3Ryb2BcbiAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIC8vdGhpcy5jZXJyYXJUYXJlYShyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIH0pLCByb3cpO1xuICAgIH1lbHNle1xuICAgIGR2LmVsKCd0ZCcsIHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ1JldG9tYXInLCAoKSA9PiB7XG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHF1ZSBtYW5lamFyXHUwMEUxIGVsIGNsaWMgZGVsIGJvdFx1MDBGM24uXG4gICAgICAgIC8vIFBvciBlamVtcGxvLCByZXRvbWFyIGxhIHRhcmVhIHJlcHJlc2VudGFkYSBwb3IgYHJlZ2lzdHJvYFxuICAgICAgICB0aGlzLnJldG9tYXJUYXJlYShyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIH0pLCByb3cpO1xuICAgIH1cbiAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICBcbn1cblxuICAgIGNyZWF0ZUJ1dHRvblRhYmxlKGJ1dHRvblRleHQsIG9uQ2xpY2tDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIG5vIHNlIGVudmlhclx1MDBFMSB1biBmb3JtdWxhcmlvIGFsIGhhY2VyIGNsaWMgZW4gXHUwMEU5bFxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgneW91ci1idXR0b24tY2xhc3MnKTsgLy8gQWdyZWdhIHVuYSBjbGFzZSBwYXJhIGVsIGVzdGlsbyBkZWwgYm90XHUwMEYzbiBzaSBlcyBuZWNlc2FyaW9cblxuICAgICAgICAvLyBBXHUwMEYxYWRlIGVsIGV2ZW50byBkZSBjbGljIGFsIGJvdFx1MDBGM25cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBDcmVhIGxhIG5vdGEgZGVzZGUgZWwgdGVtcGxhdGVyIGRlIFJlZ2lzdHJvVGllbXBvXG4gICAgYXN5bmMgcmV0b21hclRhcmVhKGlkKSB7IFxuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX1JlZ2lzdHJvVGllbXBvYF19L1BsdCAtIFJlZ2lzdHJvVGllbXBvLm1kYDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJSZXRvbWFyIFwiICsgaWQ7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIGxldCBjcmVhck5vdGEgPSB0cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKVxuICAgICAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICB9XG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9ICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLmZpbGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygndHAgY29uIHByb3BpZWRhZGVzIFwiZmlsZVwiIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgICAgIHJldHVybiB0cDtcbiAgICB9XG5cbn1cbiAgICBcbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgVmlzdGFSZXN1bWVuU2VtYW5hbCBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBpbnRlcnZhbElkOiBudW1iZXI7XG4gXG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwdWJsaWMgcGx1Z2luOiBhbnkpIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZXN1bWVuIFNlbWFuYWxcIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJoaXN0b3J5XCI7IC8vIEVzdGUgZXMgdW4gZWplbXBsbywgY2FtYmlhIFwiZG9jdW1lbnRvXCIgcG9yIGVsIG5vbWJyZSBkZWwgXHUwMEVEY29ubyBxdWUgZGVzZWVzIHVzYXJcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNldFRleHQoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGZpbGVDYWNoZSk7IC8vIFB1ZWRlcyB1c2FyIHRoaXMuZmlsZSBkZW50cm8gZGUgYWN0dWFsaXphclZpc3RhXG4gICAgXG4gICAgICAgIC8vYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGlubWVkaWF0YW1lbnRlIGFsIGFicmlyXG5cbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGZpbGVDYWNoZSk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBjYWRhIDEwIHNlZ3VuZG9zXG4gICAgICAgIH0sIDEwMDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YShmaWxlQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgLy8gTGltcGlhIGVsIGNvbnRlbmlkbyBleGlzdGVudGUgYW50ZXMgZGUgYWN0dWFsaXphclxuICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5pY2lvV1N0ciA9IGZpbGVDYWNoZS5mcm9udG1hdHRlcj8uaW5pY2lvVzsgXG4gICAgICAgIGlmICghaW5pY2lvV1N0cikge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuc2V0VGV4dChcIkxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZSBpbmljaW9XIG5vIGVzdFx1MDBFMSBlc3RhYmxlY2lkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9sZGVyRGlhcmlvID0gXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCI7XG4gICAgICAgIGNvbnN0IGluaWNpb1cgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGluaWNpb1dTdHIsIFwieXl5eS1NTS1kZCBFRUVFXCIsIHsgbG9jYWxlOiBcImVzXCIgfSk7XG4gICAgICAgIGNvbnN0IGZpblcgPSBpbmljaW9XLnBsdXMoeyBkYXlzOiA2IH0pOyAvLyBBanVzdGUgcGFyYSBhc2VndXJhciBxdWUgZWwgZmluIGVzIGVsIGRvbWluZ28gZGUgbGEgbWlzbWEgc2VtYW5hXG4gICAgXG4gICAgICAgIGNvbnN0IGFyY2hpdm9zRGlhcmlvID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlckRpYXJpbykgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpO1xuICAgIFxuICAgICAgICBjb25zdCBiaXRhY29yYXMgPSBhcmNoaXZvc0RpYXJpb1xuICAgICAgICAgICAgLm1hcChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYUFyY2hpdm8gPSBEYXRlVGltZS5mcm9tSVNPKGZpbGUuYmFzZW5hbWUuc3Vic3RyaW5nKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0b3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYXJjaGl2bzogZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBmZWNoYUFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgIGRhdG9zXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmlsdGVyKCh7IGZlY2hhQXJjaGl2byB9KSA9PiBmZWNoYUFyY2hpdm8gPj0gaW5pY2lvVyAmJiBmZWNoYUFyY2hpdm8gPD0gZmluVylcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmZlY2hhQXJjaGl2by50b01pbGxpcygpIC0gYi5mZWNoYUFyY2hpdm8udG9NaWxsaXMoKSk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIHRcdTAwRUR0dWxvIGNvbiBsYXMgZmVjaGFzIGRlIGxhIHNlbWFuYVxuICAgICAgICBsZXQgdHJpbSA9IGZpblcucXVhcnRlcjtcbiAgICAgICAgbGV0IHNlbSA9IChmaW5XLndlZWtOdW1iZXIgLSAoZmluVy5xdWFydGVyIC0gMSkqMTMpXG4gICAgICAgIGlmIChzZW09PTApe3NlbSA9IDEzfVxuXG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlc3VtZW4gZGUgbGEgc2VtYW5hICR7c2VtfSAtIFEke3RyaW19IC8gVyR7ZmluVy50b0Zvcm1hdCgnV1cnKX0uYH0pO1xuICAgICAgICBjb25zdCBzdWJ0aXR1bG8gPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBEZXNkZSBlbCAke2luaWNpb1cudG9Gb3JtYXQoJ0VFRUUsIEREJyl9IGFsICR7ZmluVy50b0Zvcm1hdCgnRUVFRSwgREQnKX1gIH0pO1xuICAgICAgICB0aXR1bG8uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIHN1YnRpdHVsby5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgLy8gQ3JlYXIgdGFibGFcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc05hbWUgPSAndGFibGUtcmVzdW1lblNlbWFuYWwnO1xuICAgIFxuICAgICAgICAvLyBDcmVhciBjYWJlY2VyYSBkZSBsYSB0YWJsYVxuICAgICAgICBjb25zdCB0aGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIFsnRFx1MDBFRGEnLCAnUmVzdW1lbiddLmZvckVhY2goaGVhZGVyVGV4dCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICB0aC50ZXh0Q29udGVudCA9IGhlYWRlclRleHQ7XG4gICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgIFxuICAgICAgICAvLyBDcmVhciBjdWVycG8gZGUgbGEgdGFibGFcbiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICBiaXRhY29yYXMuZm9yRWFjaCgoeyBhcmNoaXZvLCBwYXRoLCBkYXRvcyB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCB0ZEFyY2hpdm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgbGlua0VsLnRleHRDb250ZW50ID0gYXJjaGl2bztcbiAgICAgICAgICAgIGxpbmtFbC5ocmVmID0gcGF0aDtcbiAgICAgICAgICAgIGxpbmtFbC5vbmNsaWNrID0gYXN5bmMgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUsIHsgZVN0YXRlOiB7IGZvY3VzOiB0cnVlIH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRkQXJjaGl2by5hcHBlbmRDaGlsZChsaW5rRWwpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGRSZXN1bWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgIChkYXRvcy50aXR1bG8gfHwgWydTaW4gdFx1MDBFRHR1bG8nXSkuZm9yRWFjaCh0aXR1bG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICBsaS50ZXh0Q29udGVudCA9IHRpdHVsbztcbiAgICAgICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRkUmVzdW1lbi5hcHBlbmRDaGlsZCh1bCk7XG4gICAgXG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZEFyY2hpdm8pO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRSZXN1bWVuKTtcbiAgICBcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICBcbiAgICAgICAgLy8gQWdyZWdhciBsYSB0YWJsYSBhbCBjb250ZW5lZG9yXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICB9XG4gICAgXG4gICAgXG5cblxuICAgIC8vIE9wY2lvbmFsOiBJbXBsZW1lbnRhIG9uQ2xvc2Ugc2kgbmVjZXNpdGFzIGxpbXBpZXphIGFsIGNlcnJhciBsYSB2aXN0YS5cbn0iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFBsdWdpbiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERhdGVUaW1lLCBEdXJhdGlvbiB9IGZyb20gXCJsdXhvblwiOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSB0ZW5lciBMdXhvbiBkaXNwb25pYmxlIHBhcmEgbWFuaXB1bGFyIGZlY2hhcyB5IGhvcmFzXG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuLi9BUEkvcmVnaXN0cm9UaWVtcG9BUElcIjtcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tIFwiLi4vLi4vbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUElcIjtcblxuZXhwb3J0IGNsYXNzIFZpc3RhUmVnaXN0cm9BY3Rpdm8gZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcGx1Z2luIDogUGx1Z2luO1xuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZWdpc3RybyBBY3Rpdm9cIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJjaGVja21hcmtcIjsgLy8gQ2FtYmlhIGEgdW4gXHUwMEVEY29ubyBhZGVjdWFkbyBwYXJhIHJlZ2lzdHJvcyBhY3Rpdm9zXG4gICAgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgaW5tZWRpYXRhbWVudGUgYWwgYWJyaXJcbiAgICBcbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGNhZGEgNSBzZWd1bmRvc1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YSgpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpOyAvLyBMaW1waWEgZWwgY29udGVuaWRvIGV4aXN0ZW50ZSBhbnRlcyBkZSBhY3R1YWxpemFyXG5cbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvOyAvLyBBanVzdGEgZXN0byBhbCBkaXJlY3RvcmlvIGRvbmRlIGd1YXJkYXMgdHVzIHJlZ2lzdHJvc1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikpO1xuICAgICAgICBsZXQgcmVnaXN0cm9zQWN0aXZvcyA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlZ2lzdHJvQWN0aXZvID0ge2ZpbGV9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWdpc3Ryb0FjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHJlZ2lzdHJvQWN0aXZvXG4gICAgICAgICAgICAgICAgcmVnaXN0cm9zQWN0aXZvcy5wdXNoKHJlZ2lzdHJvQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXkgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYSBsYSB0YWJsYSBIVE1MIHBhcmEgbW9zdHJhciBsYSBpbmZvcm1hY2lcdTAwRjNuXG4gICAgICAgIGlmIChyZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ05vIGhheSBuaW5nXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZWplY3V0YW5kb3NlLicgfSk7XG4gICAgICAgICAgICBjb25zdCBib3RvbkNyZWFyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3RvbkNyZWFyLnRleHRDb250ZW50ID0gJ051ZXZvIFJlZ2lzdHJvIFRpZW1wbyc7XG4gICAgICAgICAgICBib3RvbkNyZWFyLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRlckFQSW5zdGFuY2UgPSBuZXcgc3RhcnRlckFQSSh0aGlzLnBsdWdpbilcbiAgICAgICAgICAgICAgICBhd2FpdCBzdGFydGVyQVBJbnN0YW5jZS5jcmVhdGVOb3RlKFwiUmVnaXN0cm9UaWVtcG9cIik7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ3NlcGFyYWRvcid9KTtcbiAgICAgICAgICAgIC8vIExvZ2ljYSBwYXJhIGNyZWFyIHRhYmxhIHNlbmNpbGxhIGRlIDUgdWx0aW1vcyBSVFxuICAgICAgICAgICAgbGV0IHJlZ2lzdHJvc0ZpbmFsaXphZG9zID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REQzNVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCByZWdpc3Ryb0ZpbmFsaXphZG8gPSB7ZmlsZX07IC8vIEFzdW1pZW5kbyBxdWUgcXVpZXJlcyBndWFyZGFyIGVsIHBhdGggZGVsIGFyY2hpdm9cbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWdpc3Ryb0ZpbmFsaXphZG8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byByZWdpc3Ryb0FjdGl2b1xuICAgICAgICAgICAgICAgICAgICByZWdpc3Ryb3NGaW5hbGl6YWRvcy5wdXNoKHJlZ2lzdHJvRmluYWxpemFkbyk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5ICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBPcmRlbmEgbG9zIHJlZ2lzdHJvcyBhY3Rpdm9zIHBvciBlbCBjYW1wbyAnaWQnIGRlIG1hbmVyYSBkZXNjZW5kZW50ZVxuICAgICAgICAgICAgcmVnaXN0cm9zRmluYWxpemFkb3Muc29ydCgoYSwgYikgPT4gYi5pZCAtIGEuaWQpO1xuICAgICAgICAgICAgLy8gU2VsZWNjaW9uYSBsb3MgcHJpbWVyb3MgNSByZWdpc3Ryb3MgZGVzcHVcdTAwRTlzIGRlIG9yZGVuYXJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHRvcDVSZWdpc3Ryb3NBY3Rpdm9zID0gcmVnaXN0cm9zRmluYWxpemFkb3Muc2xpY2UoMCwgOCk7XG4gICAgICAgICAgICAvLyBBaG9yYSB0b3A1UmVnaXN0cm9zQWN0aXZvcyBjb250aWVuZSBsb3MgNSBhcmNoaXZvcyBjb24gbG9zIElEIG1cdTAwRTFzIGFsdG9zXG5cblxuICAgICAgICAgICAgaWYgKHRvcDVSZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNsYXNzTGlzdC5hZGQoXCJ0YWJsZS1jb250YWluZXJcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCd0YWJsZScsIHtjbHM6ICd0YWJsZS1zbWFsbCd9KTtcbiAgICAgICAgICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSB0YWJsZS5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgICAgICBbXCJBbGlhc1wiLCBcIkRlc2NyaXBjaVx1MDBGM25cIiwgXCJSZXRvbWFyXCJdLmZvckVhY2godGV4dCA9PiBoZWFkZXIuY3JlYXRlRWwoJ3RoJywge3RleHQ6IHRleHR9KSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdG9wNVJlZ2lzdHJvc0FjdGl2b3MuZm9yRWFjaChyZWdpc3RybyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSB0YWJsZS5jcmVhdGVFbCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgLyogU2luIExpbmtcbiAgICAgICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHt0ZXh0OiByZWdpc3Ryby5hbGlhc2VzWzBdfSk7XG4gICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgLy8gQ29uIGxpbmtcbiAgICAgICAgICAgICAgICAgICAvLyBDcmVhIHVuYSBjZWxkYSBwYXJhIGVsIGFsaWFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWEgdW5hIGNlbGRhIHBhcmEgZWwgYWxpYXNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpYXNDZWxsID0gcm93LmNyZWF0ZUVsKCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhIHVuIGVsZW1lbnRvIHNwYW4gcGFyYSBjb250ZW5lciBlbCBhbGlhcyBjb21vIHRleHRvXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzTGluayA9IGFsaWFzQ2VsbC5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJlZ2lzdHJvLmFsaWFzZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBjbHM6ICdjbGlja2FibGUtYWxpYXMnIC8vIFVuYSBjbGFzZSBwYXJhIGVzdGlsaXphciwgc2kgZXMgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gRXN0YWJsZWNlIGVsIGNvbXBvcnRhbWllbnRvIGFsIGhhY2VyIGNsaWMgZW4gZWwgYWxpYXNcbiAgICAgICAgICAgICAgICAgICAgYWxpYXNMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRpZW5lIGVsIGFyY2hpdm8gcG9yIHN1IHJ1dGFcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyZWdpc3Ryby5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFicmUgZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7dGV4dDogcmVnaXN0cm8uZGVzY3JpcGNpb24gfHwgXCJObyBEZWZpbmlkYVwifSk7XG4gICAgICAgICAgICAgICAgICAgLy8gQ3JlYSB1bmEgbnVldmEgY2VsZGEgcGFyYSBlbCBib3RcdTAwRjNuXG4gICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgICAgICAgICAgICAvLyBDcmVhIGVsIGJvdFx1MDBGM24geSBhXHUwMEYxXHUwMEUxZGVsbyBhIGxhIG51ZXZhIGNlbGRhXG4gICAgICAgICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnXHUyM0YxXHVGRTBGJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5yZXRvbWFyVGFyZWEocmVnaXN0cm8uaWQpO1xuICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICBidXR0b25DZWxsLmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge3RleHQ6ICdObyBoYXkgcmVnaXN0cm9zIGZpbmFsaXphZG9zLid9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9ZWxzZSBpZiAocmVnaXN0cm9zQWN0aXZvcy5sZW5ndGggPT09IDEpe1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwidmlzdGEtUlRcIik7XG4gICAgICAgICAgICBsZXQgYWxpYXMgPSByZWdpc3Ryb3NBY3Rpdm9zWzBdLmFsaWFzZXMgPyByZWdpc3Ryb3NBY3Rpdm9zWzBdLmFsaWFzZXNbMF0gOiAnU2luIGFsaWFzJztcbiAgICAgICAgICAgIGxldCBkZXNjcmlwY2lvbiA9IHJlZ2lzdHJvc0FjdGl2b3NbMF0uZGVzY3JpcGNpb24gPyByZWdpc3Ryb3NBY3Rpdm9zWzBdLmRlc2NyaXBjaW9uIDogJ1NpbiBkZXNjcmlwY2lvbic7XG4gICAgICAgICAgICBsZXQgcGFydGVzID0gcmVnaXN0cm9zQWN0aXZvc1swXS5ob3JhSW5pY2lvLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICBsZXQgZmVjaGFIb3JhSVNPID0gYCR7cGFydGVzWzBdfVQke3BhcnRlc1syXX1gO1xuICAgICAgICAgICAgbGV0IGluaWNpbyA9IERhdGVUaW1lLmZyb21JU08oZmVjaGFIb3JhSVNPKTtcbiAgICAgICAgICAgIGxldCBhaG9yYSA9IERhdGVUaW1lLm5vdygpO1xuICAgICAgICAgICAgbGV0IGRpZmVyZW5jaWEgPSBhaG9yYS5kaWZmKGluaWNpbyk7XG4gICAgICAgICAgICBsZXQgdGllbXBvID0gRHVyYXRpb24uZnJvbU1pbGxpcyhkaWZlcmVuY2lhLnRvTWlsbGlzKCkpLnRvRm9ybWF0KCdoOm1tJylcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2g1JywgeyB0ZXh0OiAnVGFyZWEgQWN0dWFsJ30pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnTm9tYnJlOiAnfSk7XG4gICAgICAgICAgICAvLyBNb2RpZmljYWRvIHBhcmEgY3JlYXIgdW4gZWxlbWVudG8gc3BhbiBjbGlja2VhYmxlIHBhcmEgZWwgYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IGFsaWFzU3BhbiA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogYWxpYXMsXG4gICAgICAgICAgICAgICAgY2xzOiAnY2xpY2thYmxlLWFsaWFzJyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSB0ZW5lciBlc3RhIGNsYXNlIHBhcmEgZXN0aWxpemFyIGVsIHNwYW4gY29tbyB1biBsaW5rXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFsaWFzU3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocmVnaXN0cm9zQWN0aXZvc1swXS5maWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXFxuJyArIGRlc2NyaXBjaW9uIH0pO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0VzdGEgdGFyZWEgbGxldmE6ICcgKyB0aWVtcG8gfSk7XG4gICAgICAgICAgICBjb25zdCBib3RvbmVyYSA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICAgICAgY29uc3QgYm90b25DZXJyYXIgPSBib3RvbmVyYS5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3RvbkNlcnJhci50ZXh0Q29udGVudCA9ICdDZXJyYXIgVGFyZWEnO1xuICAgICAgICAgICAgYm90b25DZXJyYXIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKHJlZ2lzdHJvc0FjdGl2b3NbMF0uZmlsZSk7IC8vIFJlc3RhYmxlY2VyIGEgbGEgdmlzdGEgZGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBIGluaWNpYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBib3RvbkRldGFsbGUgPSBib3RvbmVyYS5jcmVhdGVFbCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3RvbkRldGFsbGUudGV4dENvbnRlbnQgPSAnQ2FtYmlhciBEZXNjcmlwY2lcdTAwRjNuJztcbiAgICAgICAgICAgIGJvdG9uRGV0YWxsZS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuZGV0YWxsZVJlZ2lzdHJvKHJlZ2lzdHJvc0FjdGl2b3NbMF0uZmlsZSk7IC8vIFJlc3RhYmxlY2VyIGEgbGEgdmlzdGEgZGVsIGJvdFx1MDBGM24gZGUgbWVuXHUwMEZBIGluaWNpYWxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge3RleHQ6ICcgSGF5IHVuIGVycm9yIGNvbiBsYSBjYW50aWRhZCBkZSByZWdpc3Ryb3MgYWN0aXZvcy4nfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbm8gc2UgZW52aWFyXHUwMEUxIHVuIGZvcm11bGFyaW8gYWwgaGFjZXIgY2xpYyBlbiBcdTAwRTlsXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpOyAvLyBBZ3JlZ2EgdW5hIGNsYXNlIHBhcmEgZWwgZXN0aWxvIGRlbCBib3RcdTAwRjNuIHNpIGVzIG5lY2VzYXJpb1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgZWwgZXZlbnRvIGRlIGNsaWMgYWwgYm90XHUwMEYzblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIFxuICAgIFxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvR1REIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBtb2R1bG9HVEQ6IE1vZHVsb0dURCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZHVsb0dURCkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1vZHVsb0dURCkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgZGVzYWN0aXZhZG8sIG5vIGhhY2VyIG5hZGFcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICBcbiAgICB9XG5cblxufSIsICJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIE1hcmtkb3duVmlldywgQWxlcnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IEJhbmRlamFEZUVudHJhZGFNb2RhbH0gZnJvbSAnLi4vbW9kYWxlcy9pbmJveE1vZGFsJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5ncmVzYXJCYW5kZWphRW50cmFkYShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGxldCBpbmJveFBhdGggPSBgJHtwbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveH0ubWRgO1xuICAgIGxldCBpbmJveEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGluYm94UGF0aCk7XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBoYXkgYXJjaGl2byBhY3Rpdm9cIik7XG4gICAgICAgIHJldHVybjsgLy8gQXNlZ3VyYSBxdWUgaGF5IHVuIGFyY2hpdm8gYWN0aXZvIGFudGVzIGRlIGNvbnRpbnVhclxuICAgIH1cbiAgICBsZXQgaW5ib3g7XG5cblxuICAgIC8vIFVzbyBkZWwgTW9kYWxcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBCYW5kZWphRGVFbnRyYWRhTW9kYWwocGx1Z2luLmFwcCk7XG4gICAgbW9kYWwub3BlbigpO1xuXG4gICAgY29uc3QgeyB0ZXh0LCBzYXZlSW5DdXJyZW50IH0gPSBhd2FpdCBtb2RhbC53YWl0Rm9ySW5wdXQoKTtcbiAgICBcbiAgICBpZiAodGV4dC5sZW5ndGggPCAzKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJJbmJveCBjYW5jZWxhZGFcIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgIH1cbiAgICBsZXQgZGVzdGlubyA9IHNhdmVJbkN1cnJlbnQgPyBhY3RpdmVGaWxlIDogaW5ib3hGaWxlO1xuICAgIGxldCBob3kgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eS1NTS1kZCcpO1xuICAgIGxldCBob3JhID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ0hIOm1tJyk7XG4gICAgaW5ib3ggPSBgLSBbIF0gXHVEODNFXHVEREUwICR7dGV4dH0gI2luYm94IFtjcmVhdGVkOjogJHtob3l9XSBhIGxhcyAke2hvcmF9XFxuYDtcblxuICAgIFxuICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgZXNjcmliaXIgZW4gZWwgYXJjaGl2b1xuICAgIGlmIChkZXN0aW5vIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgaWYgKGRlc3Rpbm8gPT09IGluYm94RmlsZSkge1xuICAgICAgICAgICAgLy8gTWFuZWphbW9zIGxhIHByb21lc2EgY29uIC50aGVuKCkgeSAuY2F0Y2goKSBwYXJhIGVsIG1hbmVqbyBkZSBlcnJvcmVzXG4gICAgICAgICAgICBpbnNlcnRBdFN0YXJ0VXNpbmdQcm9jZXNzKGluYm94LCBkZXN0aW5vKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgcHJvbWVzYSBzZSByZXN1ZWx2ZSBzaW4gZXJyb3JlcywgbXVlc3RyYSB1biBOb3RpY2VcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkJhbmRlamEgZGUgZW50cmFkYSBhY3R1YWxpemFkYSBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgb2N1cnJlIHVuIGVycm9yLCBtdWVzdHJhIHVuIEFsZXJ0XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBhZ3JlZ2FyIGNvbnRlbmlkbyBhbCBpbmljaW8gZGVsIGFyY2hpdm86IFwiICsgZXJyb3IubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGluc2VydEluYm94QXRDdXJzb3IoaW5ib3gpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRJbmJveEF0Q3Vyc29yKGluYm94KSB7XG4gICAgZGVidWdnZXJcbiAgICBjb25zdCBhY3RpdmVMZWFmID0gYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgIGlmIChhY3RpdmVMZWFmKSB7XG4gICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW5ib3gsIGN1cnNvcik7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBpbnNlcnRBdFN0YXJ0VXNpbmdQcm9jZXNzKGluYm94LCBmaWxlKSB7XG4gICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkgcmV0dXJuO1xuICAgIC8vIFV0aWxpemEgVmF1bHQucHJvY2VzcyBwYXJhIG1vZGlmaWNhciBlbCBjb250ZW5pZG8gZGVsIGFyY2hpdm9cbiAgICBhd2FpdCBhcHAudmF1bHQucHJvY2VzcyhmaWxlLCAoY29udGVudCkgPT4ge1xuICAgICAgICAvLyBDb25jYXRlbmEgZWwgdGV4dG8gZGUgZW50cmFkYSBlbiBsYSBwcmltZXJhIGxcdTAwRURuZWEgeSBlbCBjb250ZW5pZG8gb3JpZ2luYWxcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IGluYm94ICsgY29udGVudDtcbiAgICAgICAgcmV0dXJuIG5ld0NvbnRlbnQ7IC8vIFJldG9ybmEgZWwgbnVldm8gY29udGVuaWRvIHBhcmEgc2VyIGd1YXJkYWRvXG4gICAgfSk7XG59XG5cblxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIEJhbmRlamFEZUVudHJhZGFNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBpbnB1dEFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgY2hlY2tCb3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSByZXNvbHZlcjogKHZhbHVlOiB7IHRleHQ6IHN0cmluZzsgc2F2ZUluQ3VycmVudDogYm9vbGVhbiB9KSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsSW5ib3hcIik7XG4gICAgICAgIGxldCB7Y29udGVudEVsfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dChcIkJhbmRlamEgZGUgRW50cmFkYVwiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEVudnVlbHZlIGVsIFx1MDBFMXJlYSBkZSB0ZXh0byBlbiB1biBkaXYgcGFyYSBjb250cm9sIGRlIGZsdWpvXG4gICAgICAgIGxldCB0ZXh0QXJlYURpdiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuaW5wdXRBcmVhID0gdGV4dEFyZWFEaXYuY3JlYXRlRWwoJ3RleHRhcmVhJyk7XG4gICAgICAgIHRoaXMuaW5wdXRBcmVhLnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCAnRXNjcmliZSB0dSB0YXJlYSBhcXVcdTAwRUQuLi4nKTtcbiAgICAgICAgLy8gQVx1MDBGMWFkZSB1biBsaXN0ZW5lciBkZSBldmVudG8gJ2tleWRvd24nIGFsIHRleHRhcmVhXG4gICAgICAgIHRoaXMuaW5wdXRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgdGVjbGEgcHJlc2lvbmFkYSBlcyBFbnRlciB5IHF1ZSBubyBoYXlhIG5pbmd1bmEgbW9kaWZpY2FjaVx1MDBGM24gKHNoaWZ0LCBjdHJsLCBhbHQpXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkgJiYgIWUuY3RybEtleSAmJiAhZS5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZpZW5lIGVsIGNvbXBvcnRhbWllbnRvIHBvciBkZWZlY3RvIHBhcmEgbm8gaW5zZXJ0YXIgdW5hIG51ZXZhIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdEZvcm0oKTsgLy8gTGxhbWEgYSBsYSBmdW5jaVx1MDBGM24gcXVlIG1hbmVqYSBlbCBlbnZcdTAwRURvXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3RpdmVGaWxlKTtcbiAgICAgICAgbGV0IG5hbWVBY3RpdmVGaWxlID0gbWV0YWRhdGEuYWxpYXNlcyA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBhY3RpdmVGaWxlLmJhc2VuYW1lO1xuICAgICAgICBcbiAgICAgICAgLy8gRW52dWVsdmUgZWwgY2hlY2tib3ggeSBzdSBldGlxdWV0YSBlbiB1biBkaXYgcGFyYSBjb250cm9sIGRlIGZsdWpvXG4gICAgICAgIGxldCBjaGVja0JveERpdiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY2hlY2tCb3ggPSBjaGVja0JveERpdi5jcmVhdGVFbCgnaW5wdXQnLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuICAgICAgICBjaGVja0JveERpdi5jcmVhdGVFbCgnbGFiZWwnLCB7dGV4dDogYEd1YXJkYXIgZW4gJHtuYW1lQWN0aXZlRmlsZX1gfSkucHJlcGVuZCh0aGlzLmNoZWNrQm94KTtcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGNoZWNrQm94RGl2LmNyZWF0ZUVsKCdidXR0b24nLCB7dGV4dDogJ0d1YXJkYXInfSk7XG4gICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN1Ym1pdEZvcm0oKSk7XG4gICAgfVxuICAgIFxuICAgIHN1Ym1pdEZvcm0oKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmlucHV0QXJlYS52YWx1ZTtcbiAgICAgICAgY29uc3Qgc2F2ZUluQ3VycmVudCA9IHRoaXMuY2hlY2tCb3guY2hlY2tlZDtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICBpZiAodGhpcy5yZXNvbHZlcikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlcih7IHRleHQsIHNhdmVJbkN1cnJlbnQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICB3YWl0Rm9ySW5wdXQoKTogUHJvbWlzZTx7IHRleHQ6IHN0cmluZzsgc2F2ZUluQ3VycmVudDogYm9vbGVhbiB9PiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlciA9IHJlc29sdmU7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBpbmdyZXNhckJhbmRlamFFbnRyYWRhIH0gZnJvbSBcIi4vaW5ib3hcIjtcblxuLy8gQ09NQU5ET1MgREVMIE1PRFVMTyBHVERcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgY29uc3QgaWQxID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJpbmdyZXNhci1pbmJveFwiLFxuICAgICAgICBuYW1lOiBcIkluZ3Jlc2FyIEJhbmRlamEgZGUgRW50cmFkYSAtPiBJbmJveFwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgaW5ncmVzYXJCYW5kZWphRW50cmFkYShwbHVnaW4pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1RELnB1c2goaWQxLmlkKTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQpIHJldHVybjtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBwb2RyXHUwMEVEYXMgbWFuZWphciBsYSBcImRlc2FjdGl2YWNpXHUwMEYzblwiIGRlIGNvbWFuZG9zLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURC5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbnRlcmZhY2UgR3J1cG9BViB7XG4gIGdydXBvOiBzdHJpbmc7XG4gIGF2OiBzdHJpbmc7XG4gIHRleHRvOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBzdWJzaXN0ZW1hc0FQSSB7XG4gIGNvbnN0cnVjdG9yKHBsdWdpbikge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gIH1cblxuICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBpbmljaWFsIFwiTWVuXHUwMEZBIGhveVwiXG4gIGFzeW5jIG1vc3RyYXJCb3RvbkNyZWFyQVYoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgQXJlYXMgZGUgVmlkYVwiO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgYm90b25NZW51SG95Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc2FyQVYoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ3JlYXJBVlRyaW1lc3RyYWwoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgQXJlYXMgZGUgVmlkYSBkZWwgdHJpbWVzdHJlXCI7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uTWVudUhveSk7XG5cbiAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJBVlRyaW1lc3RyZShkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgIH07XG4gIH1cblxuICBhc3luYyBwcm9jZXNhckFWKGR2KSB7XG4gICAgLy8gT2J0ZW5lciBRcyBwYXJhIHByZWd1bnRhciBlbCBRIHBhcmEgZWwgcXVlIGRlc2VhIGNyZWFyIGxhcyBcdTAwRTFyZWFzIGRlIHZpZGEuXG4gICAgY29uc3QgZm9sZGVyUSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1RyaW1lc3RyYWxcIl07XG4gICAgY29uc3QgZmlsZXNRID0gYXBwLnZhdWx0XG4gICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyUSkgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBxQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc1EpIHtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8udHlwZSA9PT0gXCJUUVwiICYmIG1ldGFkYXRhPy50cmltZXN0cmUpIHtcbiAgICAgICAgbGV0IHFBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKHFBY3Rpdm8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byBxQWN0aXZvXG4gICAgICAgIHFDcmVhZG9zLnB1c2gocUFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgcSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYi50cmltZXN0cmUpLFxuICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiKSxcbiAgICAgIHRydWUsXG4gICAgICBgRGUgcXVlIHRyaW1lc3RyZSB2YW1vcyBhIHByb2Nlc2FyIHR1cyBBcmVhcyBkZSBWaWRhYFxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cblxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIEZpbiBwcm9jZXNhckFWKClcblxuXG4gIGFzeW5jIHByb2Nlc2FyQVZUcmltZXN0cmUoZHYpIHtcbiAgICBcbiAgICBsZXQgcSA9IHt9OyBcbiAgICBxLnRyaW1lc3RyZSA9IGR2LmN1cnJlbnQoKS50cmltZXN0cmU7XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cblxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIEZpbiBwcm9jZXNhckFWVHJpbWVzdHJlKClcblxuXG4gIC8vUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gIGFzeW5jIHZhbGlkYWNpb25BVlEoXG4gICAgZnVsbEZvbGRlclBhdGg6IHN0cmluZyxcbiAgICBxOiBhbnksXG4gICAgYXJlYVZpZGE6IGFueVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwYXRoQVZRID0gYCR7ZnVsbEZvbGRlclBhdGh9LyR7cS50cmltZXN0cmV9IC0gJHthcmVhVmlkYS5hdn0ubWRgO1xuICAgIGNvbnN0IGZpbGVBVlEgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGhBVlEpO1xuICAgIGRlYnVnZ2VyO1xuICAgIC8vIFZlcmlmaWNhciBzaSBlbCBBViBkZSBRIEV4aXN0ZVxuICAgIC8vIFAyIFNJXG4gICAgLy8gQ0FTTyA0XG4gICAgLy8gQ0FTTyA1XG4gICAgaWYgKGZpbGVBVlEgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgIGxldCBuZXh0U3RlcCA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1xuICAgICAgICAgIFwiQWN0dWFsaXphciBlc3RhZG8gZGVsIEFWXCIsXG4gICAgICAgICAgXCJCb3JyYXIgeSBDcmVhciBkZSBudWV2byBlbCBBVlwiLFxuICAgICAgICAgIFwiRGVqYXIgZWwgQVYgY29tbyBlc3RcdTAwRTEgXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcInVwZFwiLCBcImRlbCtjcmVcIiwgXCJjb250aW51ZVwiXSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYFx1MDBCRiR7cS50cmltZXN0cmV9ICR7YXJlYVZpZGEuYXZ9IHlhIGV4aXN0ZS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG4gICAgICBzd2l0Y2ggKG5leHRTdGVwKSB7XG4gICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJBVlEoZmlsZUFWUSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkZWwrY3JlXCI6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ib3JyYXJBVlEoZmlsZUFWUSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZ3JlZ2FyQVZRKGFyZWFWaWRhLCBxLnRyaW1lc3RyZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjb250aW51ZVwiOlxuICAgICAgICAgIGNvbnNvbGUubG9nKGBDb250aW51YXIgc2luIGhhY2VyIG5hZGEgY29uICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIFNpIEFWIGRlIFEgZXhpc3RlICgxKSBtdWVzdHJhIGVsIGVzdGFkbyB5IHBlcm1pdGUgY2FtYmlhcmxvLlxuICAgIH1cbiAgICAvLyBQMiBOT1xuICAgIC8vIC0+PiBDQVNPIDFcbiAgICAvLyAtPj4gQ0FTTyAzXG4gICAgLy8gLS0+IENBU08gNlxuICAgIGVsc2Uge1xuICAgICAgZGVidWdnZXI7XG4gICAgICAvLyBTaSBBViBkZSBRIG5vIEV4aXN0ZSAoMikgQWdyZWdhIEFyZWFWaWRhIGRlIFEsIHByZWd1bnRhbmRvIGVuIHF1ZSBlc3RhZG8gcXVpZXJlIHRlbmVyIGVzYSBBViBlc2UgUVxuICAgICAgYXdhaXQgdGhpcy5hZ3JlZ2FyQVZRKGFyZWFWaWRhLCBxLnRyaW1lc3RyZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUDMgQWdyZWdhciBub2RvQXJlYVZpZGE/XG4gIGFzeW5jIGFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpIHtcbiAgICAvLyBwcmVndW50YXIgcHJpbWVybyBzaSBzaSBsbyBkZXNlYSBhZ3JlZ2FyLlxuXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgYWdyZWdhciA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgdHJ1ZSxcbiAgICAgIGBcdTAwQkZEZXNlYXMgYWdyZWdhciAke2FyZWFWaWRhLmF2fSBhIHR1IHNpc3RlbWEgZGUgZ2VzdGlcdTAwRjNuP2BcbiAgICApO1xuICAgIC8vIFAzIFNJXG4gICAgaWYgKGFncmVnYXIpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9BcmVhc1ZpZGFgXVxuICAgICAgfS9QbHQgLSBub2RvQXJlYXNWaWRhLm1kYDtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm9kb0FyZWFWaWRhIHRlbXBsYXRlIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byB0ZW1wbGF0ZSBub2RvQXJlYVZpZGEgbm8gZW5jb250cmFkby5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYXJlYVZpZGEuZ3J1cG8gKyBcIiAtIFwiICsgYXJlYVZpZGEuYXY7XG4gICAgICBsZXQgZm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfQXJlYXNWaWRhYF19LyR7XG4gICAgICAgIGFyZWFWaWRhLmF2XG4gICAgICB9YDtcbiAgICAgIC8vIFNlIGFzZWd1cmEgZGUgcXVlIGxhIGNhcnBldGEgZXhpc3RhIHBhcmEgcG9kZXIgY3JlYXIgZWwgYXJjaGl2byBkaXJlY3RhbWVudGUgZW4gZXNhIGNhcnBldGFcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXJDYXJwZXRhKGZvbGRlclBhdGgpO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGxldCBjcmVhck5vdGE6IChcbiAgICAgICAgdGVtcGxhdGU6IFRGaWxlLFxuICAgICAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgICAgICBvdmVyd3JpdGU6IGJvb2xlYW4sXG4gICAgICAgIGZvbGRlcjogVEZvbGRlclxuICAgICAgKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgICAgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBub3RhID0gYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWFuZG8gTm9kb0FyZWFWaWRhOiBcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhZ3JlZ2FyQVZRKGFyZWFWaWRhOiBhbnksIHRyaW1lc3RyZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGF9L1BsdCAtIEFyZWFzVmlkYS5tZGA7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgIGlmICghKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIEFzZWd1cmEgcXVlIGxhIGZ1bmNpXHUwMEYzbiByZXRvcm5hIHVuIGJvb2xlYW5vIGluY2x1c28gZW4gY2FzbyBkZSBlcnJvci5cbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke3RyaW1lc3RyZX0gLS0gJHthcmVhVmlkYS5hdn0gLS0gJHthcmVhVmlkYS5ncnVwb31gO1xuICAgIGxldCBmb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9BcmVhc1ZpZGFgXX0vJHtcbiAgICAgIGFyZWFWaWRhLmF2XG4gICAgfWA7XG4gICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKSBhcyBURm9sZGVyOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgXCJJbmJveFwiIHJlYWxtZW50ZSBleGlzdGEgeSBzZWEgdW4gVEZvbGRlci5cblxuICAgIC8vIEFzdW1pZW5kbyBxdWUgZWwgdGlwbyBkZSBgZm9sZGVyYCBlcyBjb3JyZWN0byB5IHF1ZSBjcmVhck5vdGEgZXMgdW5hIGZ1bmNpXHUwMEYzbiBhc2luY3JcdTAwRjNuaWNhIHF1ZSBkZXZ1ZWx2ZSB2b2lkLlxuICAgIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBhcyAoXG4gICAgICB0ZW1wbGF0ZTogVEZpbGUsXG4gICAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgICAgb3ZlcndyaXRlOiBib29sZWFuLFxuICAgICAgZm9sZGVyOiBURm9sZGVyXG4gICAgKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhbmRvIEFyZWFWaWRhOiBcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJvcnJhckFWUShmaWxlQVZRKSB7XG4gICAgY29uc29sZS5sb2coYExvZ2ljYSBkZSBib3JyYWRvIGRlICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcbiAgICB0cnkge1xuICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZmlsZUFWUSBlcyB1biBvYmpldG8gVEZpbGUgdlx1MDBFMWxpZG9cbiAgICAgIGlmIChmaWxlQVZRIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShmaWxlQVZRKTsgLy8gQm9ycmFyIGVsIGFyY2hpdm9cbiAgICAgICAgY29uc29sZS5sb2coYCR7ZmlsZUFWUS5iYXNlbmFtZX0gaGEgc2lkbyBib3JyYWRvIGNvbiBcdTAwRTl4aXRvLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgJHtmaWxlQVZRLmJhc2VuYW1lfSBubyBlcyB1biBhcmNoaXZvIHZcdTAwRTFsaWRvIG8gbm8gZXhpc3RlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGludGVudGFyIGJvcnJhciAke2ZpbGVBVlEuYmFzZW5hbWV9OmAsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0dWFsaXphckFWUShmaWxlQVZRKSB7XG4gICAgY29uc29sZS5sb2coYExvZ2ljYSBkZSBhY3R1YWxpemFjaVx1MDBGM24gZGUgZXN0YWRvIGRlICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcblxuICAgIC8vIE9idGVuZXIgYWNjZXNvIGEgZnVuY2lvbmVzIGRlbCBzaXN0ZW1hIHkgbWV0YWRhdGFDYWNoZVxuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IG1ldGFkYXRhQ2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUFWUSk7XG5cbiAgICAvLyBJbmljaWFsaXphciB2YXJpYWJsZXNcbiAgICBsZXQgZXN0YWRvQWN0dWFsID0gXCJcIjtcbiAgICBsZXQgbnVldm9Fc3RhZG8gPSBcIlwiO1xuXG4gICAgLy8gT2J0ZW5lciBlbCBlc3RhZG8gYWN0dWFsIGRlc2RlIGVsIGZyb250bWF0dGVyIHVzYW5kbyBtZXRhZGF0YUNhY2hlXG4gICAgaWYgKFxuICAgICAgbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlciAmJlxuICAgICAgbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShcImVzdGFkb1wiKVxuICAgICkge1xuICAgICAgZXN0YWRvQWN0dWFsID0gbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlci5lc3RhZG87XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gc2UgZW5jb250clx1MDBGMyBlbCBlc3RhZG8gYWN0dWFsIGVuIGVsIGZyb250bWF0dGVyLlwiKTtcbiAgICAgIHJldHVybjsgLy8gU2FsaXIgc2kgbm8gaGF5IGVzdGFkbyBhY3R1YWxcbiAgICB9XG5cbiAgICAvLyBNb3N0cmFyIGVsIHN1Z2dlc3RlciBwYXJhIHNlbGVjY2lvbmFyIGVsIG51ZXZvIGVzdGFkb1xuICAgIHRyeSB7XG4gICAgICBudWV2b0VzdGFkbyA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1wiXHVEODNEXHVERDM1IC0+IEFyY2hpdmFkb1wiLCBcIlx1RDgzRFx1REZFMiAtPiBBY3Rpdm9cIiwgXCJcdUQ4M0RcdURGRTEgLT4gRW4gUGF1c2FcIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sIC8vIG9wY2lvbmVzIHBhcmEgbW9zdHJhclxuICAgICAgICBbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIiwgXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIC8vIHZhbG9yZXMgYSByZXRvcm5hclxuICAgICAgICBmYWxzZSwgLy8gcGVybWl0ZSBzZWxlY2NpXHUwMEYzbiBtXHUwMEZBbHRpcGxlXG4gICAgICAgIGAke2ZpbGVBVlEuYmFzZW5hbWV9IGVzdFx1MDBFMSAke2VzdGFkb0FjdHVhbH0uIEFzaWduYXIgZXN0YWRvOmAgLy8gbWVuc2FqZVxuICAgICAgKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHNpIHNlIHNlbGVjY2lvblx1MDBGMyB1biBudWV2byBlc3RhZG9cbiAgICAgIGlmICghbnVldm9Fc3RhZG8pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBzZSBzZWxlY2Npb25cdTAwRjMgdW4gbnVldm8gZXN0YWRvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBTYWxpciBzaSBubyBzZSBzZWxlY2Npb25cdTAwRjMgdW4gbnVldm8gZXN0YWRvXG4gICAgICB9XG5cbiAgICAgIC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGVBVlEsIChmcm9udG1hdHRlcikgPT4ge1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoXCJlc3RhZG9cIikpIHtcbiAgICAgICAgICBmcm9udG1hdHRlci5lc3RhZG8gPSBudWV2b0VzdGFkbzsgLy8gQWN0dWFsaXphciBlbCBlc3RhZG9cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0byBhOlwiLCBudWV2b0VzdGFkbyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZXN0YWRvIGVuIGVsIGZyb250bWF0dGVyOlwiLCBlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWFyQ2FycGV0YShmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcblxuICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBQQVJBIFBST0NFU0FSIExPUyBDT01QQVNTXG5cbiAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gZGUgcHJvY2VzYXIgT2JqZXRpdm9zIGRlIGxhcyBBViBhbnVhbGVzIGVuIGVsIHByb2Nlc28gZGUgQ29tcGFzcy5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ29tcGFzc0FudWFsKGR2KSB7XG4gICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uLnRleHRDb250ZW50ID0gXCJQcm9jZXNhciBPYmpldGl2b3MgQVYgQW51YWxcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuXG4gICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJDb21wYXNzQW51YWwoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ29tcGFzc1RyaW1lc3RyYWwoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYm90b24udGV4dENvbnRlbnQgPSBcIlByb2Nlc2FyIE9iamV0aXZvcyBBViBUcmltZXN0cmFsZXNcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuXG4gICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJDb21wYXNzVHJpbWVzdHJhbChkdik7IFxuICAgIH07XG4gIH1cblxuICBhc3luYyBwcm9jZXNhckNvbXBhc3NBbnVhbChkdikge1xuICBcbiAgICBsZXQgYVx1MDBGMW8gPSBkdi5jdXJyZW50KCkuYVx1MDBGMW87XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cbiAgICBkZWJ1Z2dlcjtcbiAgICBmb3IgKGxldCBhcmVhVmlkYSBvZiByZXN1bHRhZG9BVikge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBleGlzdGUgZW4gbGEgdWJpY2FjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhXG4gICAgICBjb25zdCBmdWxsRm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2FyZWFWaWRhLmF2fWA7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxGb2xkZXJQYXRoKTtcblxuICAgICAgLy9QMCAtPiBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHBhdGgvYXJlYVZpZGEgZXhpc3RlXG4gICAgICAvL1AwIC0gU0lcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYCk7XG4gICAgICAgIC8vIEFob3JhLCB2ZXJpZmljYSBzaSBsYSBub3RhIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YVxuICAgICAgICBjb25zdCBpbnN0YW5jZXNPZkFWID0gYXBwLnZhdWx0XG4gICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZ1bGxGb2xkZXJQYXRoKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgICAgICk7XG4gICAgICAgIC8vIFAxIEV4aXN0ZSBub2RlQXJlYVZpZGE/XG4gICAgICAgIGNvbnN0IG5vZGVBVkV4aXN0cyA9IGluc3RhbmNlc09mQVYuc29tZShcbiAgICAgICAgICAoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSA9PT0gYXJlYVZpZGEuYXZcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQMSBTSVxuICAgICAgICBpZiAobm9kZUFWRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gICAgICAgICAgLy8gUHJlZ3VudGFyIEVsIG9iamV0aXZvIHkgZ3VhcmRhcmxvIGVuIGVsIG5vZG8gZGUgQVYuXG4gICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b0FudWFsKGFcdTAwRjFvLCBhcmVhVmlkYS5hdik7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMSAtIE5PIChub2RlQXJlYVZpZGEgbm8gRXhpc3RlKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBDYXNvIDMgeSA0XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgICAvL1AzIC0+IFNJXG4gICAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgICAgLy8gUDIgLi4gLT4gU2kgeSBOb1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b0FudWFsKGFcdTAwRjFvLCBhcmVhVmlkYS5hdik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBQTyAtPiBOTyAoTGEgQ2FycGV0YSBubyBleGlzdGUpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGFcdTAwRkFuIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gXG4gICAgICAgICk7XG4gICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAvLyBQMyAtPiBTSVxuICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgLy8gUDJcbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvQW51YWwoYVx1MDBGMW8sIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgfVxuICAgICAgICAvLyBQMyAtPiBFc2NhcGVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEZpbiBGb3IgQXJlYXNWaWRhIGZpbGVDYW1wb3NcbiAgfSAvLyBNZXRvZG8gUHJvY2VzYXIgQ29tcGFzcyBBbnVhbFxuXG4gIGFzeW5jIHByb2Nlc2FyQ29tcGFzc1RyaW1lc3RyYWwoZHYpIHtcbiAgICBkZWJ1Z2dlcjtcbiAgICBsZXQgdHJpbWVzdHJlID0gZHYuY3VycmVudCgpLnRyaW1lc3RyZTtcbiAgICBjb25zdCByZXN1bHRhZG9BVjogR3J1cG9BVltdID0gW107XG4gICAgY29uc3QgZmlsZUNhbXBvcyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGVDYW1wb3MgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQ2FtcG9zKTtcbiAgICAgICAgY29uc3QgYXJyZWdsb0FWID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5BcmVhc1ZpZGEgfHwgW107XG4gICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9BVikpIHtcbiAgICAgICAgICBhcnJlZ2xvQVYuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICByZXN1bHRhZG9BVi5wdXNoKHtcbiAgICAgICAgICAgICAgICBncnVwbzogaXRlbVswXSxcbiAgICAgICAgICAgICAgICBhdjogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICB0ZXh0bzogaXRlbVswXSArIFwiIC8gXCIgKyBpdGVtWzFdLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgYmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhO1xuXG4gICAgLy8gLS4uLT4gUmV2aXNpXHUwMEYzbiBkZSBlc2NlbmFyaW9zLlxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICAvLyBQcmVndW50YXIgRWwgb2JqZXRpdm8geSBndWFyZGFybG8gZW4gZWwgbm9kbyBkZSBBVi5cbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmUsIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmUsIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZSwgYXJlYVZpZGEuYXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIE1ldG9kbyBQcm9jZXNhciBDb21wYXNzIFRyaW1lc3RyYWwgXG5cblxuICBhc3luYyBvYmpldGl2b0FudWFsKGFcdTAwRjFvOiBhbnksIGFyZWFWaWRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBCdXNjYXIgc2kgeWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zIHBhcmEgZXNlIGFcdTAwRjFvIHkgZXNhIGFyZWEgZGUgdmlkYS5cblxuICAgIGNvbnN0IGZvbGRlck9iaiA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX09iakNvbXBhc3NBbnVhbFwiXTtcbiAgICBjb25zdCBmaWxlc09iaiA9IGFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlck9iaikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBvYmpDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzT2JqKSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCByZWdleCA9IC9cXFtcXFtcXHMqKC4qPylcXHMqXFxdXFxdLztcbiAgICAgIGxldCBmaWxlQVYgPSBtZXRhZGF0YT8uYXJlYVZpZGEubWF0Y2gocmVnZXgpWzFdO1xuICAgICAgY29uc3Qgc2FtZUFWID0gZmlsZUFWID09PSBhcmVhVmlkYTtcblxuICAgICAgaWYgKG1ldGFkYXRhPy5hXHUwMEYxbyA9PT0gYVx1MDBGMW8gJiYgc2FtZUFWKSB7XG4gICAgICAgIGxldCBvYmpBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKG9iakFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgb2JqQ3JlYWRvcy5wdXNoKG9iakFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBwcm9tcHQgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgb2JqZXRpdm9zID0gW107XG4gICAgbGV0IGRlc2VhQWdyZWdhck9iamV0aXZvO1xuICAgIGlmIChvYmpDcmVhZG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2kgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgICAvLyBMb2dpY2EgY3VhbmRvIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGxldCBuZXh0U3RlcCA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1xuICAgICAgICAgIFwiQWdyZWdhciBPYmpldGl2b3NcIixcbiAgICAgICAgICBcIkJvcnJhciB5IENyZWFyIGRlIG51ZXZvIGxvcyBvYmpldGl2b3NcIixcbiAgICAgICAgICBcIkRlamFyIGxvcyBvYmpldGl2b3MgY29tbyBlc3RcdTAwRTFuIFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXCJ1cGRcIiwgXCJkZWwrY3JlXCIsIFwiY29udGludWVcIl0sXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBcdTAwQkZZYSBoYXkgJHtvYmpDcmVhZG9zLmxlbmd0aH0gb2JqZXRpdm9zIGNyZWFkb3MgcGFyYSAke2FyZWFWaWRhfSBlbiBlbCAke2FcdTAwRjFvfS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG5cbiAgICAgICAgc3dpdGNoIChuZXh0U3RlcCkge1xuICAgICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyk7XG5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImRlbCtjcmVcIjpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9ycmFyT2JqZXRpdm9zKG9iakNyZWFkb3MpO1xuICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pO1xuICAgICAgICAgICAgICAvLyBCb3JyYXIgbG9zIG9iamV0aXZvcyBhbnRlcmlvcmVzLlxuICAgICAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiY29udGludWVcIjpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDb250aW51YXIgc2luIGhhY2VyIG5hZGEgY29uIGxvcyBvYmpldGl2b3MgZGUgJHthcmVhVmlkYX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBObyBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2by5cbiAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgKTtcbiAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyk7XG4gICAgICAgICAgb2JqZXRpdm9zLnB1c2goW29iamV0aXZvXSk7XG5cbiAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfSAvLyBNXHUwMEU5dG9kbyBvYmpldGl2b0FudWFsLlxuICBcbiAgYXN5bmMgb2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZTogYW55LCBhcmVhVmlkYTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZGVidWdnZXI7XG4gICAgLy8gQnVzY2FyIHNpIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhIGVzZSBhXHUwMEYxbyB5IGVzYSBhcmVhIGRlIHZpZGEuXG5cbiAgICBjb25zdCBmb2xkZXJPYmogPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl07XG4gICAgY29uc3QgZmlsZXNPYmogPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJPYmopICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgKTtcbiAgICBsZXQgb2JqQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc09iaikge1xuICAgICAgZGVidWdnZXI7XG4gICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcmVnZXggPSAvXFxbXFxbXFxzKiguKj8pXFxzKlxcXVxcXS87XG4gICAgICBsZXQgZmlsZUFWID0gbWV0YWRhdGE/LmFyZWFWaWRhLm1hdGNoKHJlZ2V4KVsxXTtcbiAgICAgIGNvbnN0IHNhbWVBViA9IGZpbGVBViA9PT0gYXJlYVZpZGE7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8udHJpbWVzdHJlPy5wYXRoICYmIHR5cGVvZiAobWV0YWRhdGEudHJpbWVzdHJlLnBhdGggPT09ICdzdHJpbmcnKSAmJiAgbWV0YWRhdGEudHJpbWVzdHJlLnBhdGguaW5jbHVkZXModHJpbWVzdHJlKSAmJiBzYW1lQVYpIHtcbiAgICAgICAgbGV0IG9iakFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ob2JqQWN0aXZvLCBtZXRhZGF0YSk7IC8vIEFncmVnYSBlbCBtZXRhZGF0YSBhbCBvYmpldG8gcUFjdGl2b1xuICAgICAgICBvYmpDcmVhZG9zLnB1c2gob2JqQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHByb21wdCA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBvYmpldGl2b3MgPSBbXTtcbiAgICBsZXQgZGVzZWFBZ3JlZ2FyT2JqZXRpdm87XG4gICAgaWYgKG9iakNyZWFkb3MubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICAgIC8vIExvZ2ljYSBjdWFuZG8geWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgbGV0IG5leHRTdGVwID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBbXG4gICAgICAgICAgXCJBZ3JlZ2FyIE9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiQm9ycmFyIHkgQ3JlYXIgZGUgbnVldm8gbG9zIG9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiRGVqYXIgbG9zIG9iamV0aXZvcyBjb21vIGVzdFx1MDBFMW4gXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcInVwZFwiLCBcImRlbCtjcmVcIiwgXCJjb250aW51ZVwiXSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYFx1MDBCRllhIGhheSAke29iakNyZWFkb3MubGVuZ3RofSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhICR7YXJlYVZpZGF9IGVuIGVsICR7dHJpbWVzdHJlfS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG5cbiAgICAgICAgc3dpdGNoIChuZXh0U3RlcCkge1xuICAgICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpO1xuXG4gICAgICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2byk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZGVsK2NyZVwiOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib3JyYXJPYmpldGl2b3Mob2JqQ3JlYWRvcyk7XG4gICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2b1RyaW1lc3RyZShhcmVhVmlkYSwgdHJpbWVzdHJlKTtcbiAgICAgICAgICAgICAgLy8gQm9ycmFyIGxvcyBvYmpldGl2b3MgYW50ZXJpb3Jlcy5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJjb250aW51ZVwiOlxuICAgICAgICAgICAgY29uc29sZS5sb2coYENvbnRpbnVhciBzaW4gaGFjZXIgbmFkYSBjb24gbG9zIG9iamV0aXZvcyBkZSAke2FyZWFWaWRhfWApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE5vIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvLlxuICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgKTtcbiAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpO1xuICAgICAgICAgIG9iamV0aXZvcy5wdXNoKFtvYmpldGl2b10pO1xuXG4gICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9IC8vIE1cdTAwRTl0b2RvIG9iamV0aXZvVHJpbWVzdHJhbC5cblxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTVx1MDBFOXRvZG8gcXVlIGNyZWEgZWwgYm90XHUwMEYzbiBxdWUgc2UgYWdyZWdhIGVuIGxhIHRhYmxhIGRlIHByb3llY3RvcyBlbiBlbCBcbkNvbXBhc3MgQW51YWwsIHBhcmEgY3JlYXIgZWwgcHJveWVjdG8gYSBjYWRhIE9iamV0aXZvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG4gIGNyZWF0ZUJ1dHRvblRhYmxlKGR2LCBvYmpldGl2bykge1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGR2LmVsKFwiZGl2XCIsIFwiXCIpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IGR2LmVsKFwiYnV0dG9uXCIsIFwiTnVldm8gUHJveWVjdG9cIik7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhclByb3llY3RvT2JqZXRpdm8oZHYsIG9iamV0aXZvKTtcbiAgICB9KTtcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICByZXR1cm4gYnV0dG9uQ29udGFpbmVyO1xufVxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBpbnZvY2FkbyBwb3IgZWwgYm90b24gZGUgbGEgdGFibGEgZGVsIGNvbXBhc3MgYW51YWwgXCJOdWV2byBQcm95ZWN0b1wiIFxucGFyYSBjcmVhciBwcm95ZWN0byBhIHVuIG9iamV0aXZvIGFudWFsIGVzdGFibGVjaWRvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBjcmVhclByb3llY3RvT2JqZXRpdm8oZHYsIG9iamV0aXZvKXtcbiAgZGVidWdnZXI7XG4gIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gIGxldCB0aXBvUHJveWVjdG8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgW1wiUHJveWVjdG8gR1REXCIsIFwiUHJveWVjdG8gZGUgUVwiXSxcbiAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgIHRydWUsXG4gICAgYFx1MDBCRkVsIHByb3llY3RvICR7b2JqZXRpdm8uZmlsZS5uYW1lfSByZXF1aWVyZSB1biBQcm95ZWN0byBHVEQgbyBQcm95ZWN0byBkZSBRP2BcbiAgKTtcbiAgbGV0IHByb3llY3RvO1xuICBpZiAodGlwb1Byb3llY3RvKXtcbiAgICBwcm95ZWN0byA9IHRoaXMuY3JlYXJQcm95ZWN0b0dURChvYmpldGl2byk7Ly8gQ3JlYXIgUHJveWVjdG8gR1REXG4gIH1lbHNle1xuICAgIC8qIFxuICAgIEJ1c2NhbmRvIG9wdGltaXphciBlbCB1c28gZGVsIG1cdTAwRTl0b2RvIGNyZWFyIHByb3llY3RvUSwgXG4gICAgdmFtb3MgYSBjb25maXJtYXIgZWwgdHJpbWVzdHJlIGRlc2RlIGNyZWFyUHJveWVjdG9PYmpldGl2bzsgXG4gICAgKi9cbiAgICBkZWJ1Z2dlcjtcbiAgICBjb25zdCByZWdleFRyaW0gPSAvXFxbP1xcWz8oXFxkezR9LVFbMS00XSlcXF0/XFxdPy9nO1xuICAgIGNvbnN0IHRyaW1lc3RyZSA9IG9iamV0aXZvLnRyaW1lc3RyZS5wYXRoLm1hdGNoKHJlZ2V4VHJpbSk7XG5cbiAgICBjb25zdCBjb25maXJtYVRyaW0gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgIHRydWUsXG4gICAgICBgXHUwMEJGVmFtb3MgYSBjcmVhciBlbCBwcm95ZWN0byAke29iamV0aXZvLmZpbGUubmFtZX0gZW4gZWwgdHJpbWVzdHJlICR7dHJpbWVzdHJlfT9gXG4gICAgKTtcbiAgIFxuICAgIGlmICghY29uZmlybWFUcmltKXsgIFxuICAgICAgY29uc3QgcSA9IGF3YWl0IHRoaXMuZXN0YWJsZWNlclRyaW1lc3RyZShcIm9iamV0aXZvIGRlbCBhXHUwMEYxb1wiKTtcbiAgICAgIC8vb2JqZXRpdm8udHJpbWVzdHJlLnBhdGggPSBxLnRyaW1lc3RyZTtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyWUFNTHMoe3RyaW1lc3RyZTogYFtbJHtxLnRyaW1lc3RyZX1dXWB9LCBvYmpldGl2by5maWxlLnBhdGgpO1xuICAgICAgfVxuICAgIHByb3llY3RvID0gYXdhaXQgdGhpcy5jcmVhclByb3llY3RvUShvYmpldGl2byk7XG4gIH1cbn1cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gcXVlIGluaWNpYWxpemEgbGEgY3JlYWNpXHUwMEYzbiBkZSBsYSBwbGFudGlsbGEgZGUgb2JqZXRpdm8gQ29tcGFzcy5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuYXN5bmMgY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pe1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl19L1BsdCAtIE9iakNvbXBhc3NBbnVhbC5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYCR7YVx1MDBGMW99IC0gT2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfWA7XG4gIGxldCBvYmpldGl2byA9IGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKTtcbiAgcmV0dXJuIG9iamV0aXZvO1xufVxuXG5hc3luYyBjcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpe1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl19L1BsdCAtIE9iakNvbXBhc3NBbnVhbC5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYFRyaW1lc3RyZSAke3RyaW1lc3RyZX0gLSBPYmpldGl2byBwYXJhICR7YXJlYVZpZGF9YDtcbiAgbGV0IG9iamV0aXZvID0gYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICByZXR1cm4gb2JqZXRpdm87XG59XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIGludm9jYWRvIGRlc2RlIGNyZWFyUHJveWVjdG9PYmpldGl2byhkdiwgb2JqZXRpdm8pXG5Fc3RcdTAwRTkgbVx1MDBFOXRvZG8gaGFjZSBwYXJ0ZSBkZWwgcHJvY2VzbyBkZSBDb21wYXNzIEFudWFsLlxuRmFjaWxpdGEgbGEgY3JlYWNpXHUwMEYzbiBkZWwgdW4gcHJveWVjdG8gZGUgUSBwYXJhIHVuIG9iamV0aXZvIGFudWFsIGVzdGFibGVjaWRvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBjcmVhclByb3llY3RvUShvYmpldGl2byl7XG4gIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1Byb3llY3Rvc1FcIl19L1BsdCAtIFByb3llY3Rvc1EubWRgO1xuICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVQYXRoKTtcbiAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgXG4gIGxldCBmaWxlbmFtZSA9IGBQcm95ZWN0byBwYXJhIE9iamV0aXZvIENvbXBhc3MgQW51YWwgLSAke29iamV0aXZvLmlkfWA7XG4gIGxldCBwcm95ZWN0byA9IGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcik7XG4gIHJldHVybiBwcm95ZWN0bztcbn1cblxuYXN5bmMgY3JlYXJQcm95ZWN0b0dURChvYmpldGl2byl7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1Byb3llY3Rvc0dURFwiXX0vUGx0IC0gUHJveWVjdG9zR1RELm1kYDtcbiAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIFxuICBsZXQgZmlsZW5hbWUgPSBgUHJveWVjdG8gcGFyYSBPYmpldGl2byBDb21wYXNzIEFudWFsIC0gJHtvYmpldGl2by5pZH1gO1xuICBsZXQgcHJveWVjdG8gPSBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgdHJ1ZSwgZm9sZGVyKTtcbiAgcmV0dXJuIHByb3llY3RvO1xufVxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIGludm9jYWRvIGVuIGVsIHByb2Nlc28gZGUgQ29tcGFzcyBBbnVhbCwgY3VhbmRvIGVsaWpvIHZvbHZlclxuYSBjcmVhciB0b2RvcyBsb3MgcHJveWVjdG9zIGRlIHVuIGFyZWEgZGUgdmlkYSBwYXJhIHVuIGFcdTAwRjFvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBib3JyYXJPYmpldGl2b3Mob2JqZXRpdm9zKXtcbiAgZGVidWdnZXI7XG4gIGZvciAobGV0IG9iamV0aXZvIG9mIG9iamV0aXZvcyl7IFxuICAgIHRyeSB7XG4gICAgICAvLyBJbnRlbnRhIGJvcnJhciBlbCBhcmNoaXZvIGFjdHVhbCBkZWwgYXJyZWdsb1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShvYmpldGl2by5maWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKGBBcmNoaXZvIGJvcnJhZG86ICR7b2JqZXRpdm8uZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGJvcnJhciBlbCBhcmNoaXZvICR7b2JqZXRpdm8uZmlsZS5wYXRofTogJHtlcnJvcn1gKTtcbiAgICAgfVxuICB9XG5cbiAgfVxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIHF1ZSBwZXJtaXRlIHBhcmEgY3VhbHF1aWVyIGNhc28gZW4gZWwgcXVlIHNlIHJlcXVpZXJhIGVsZWdpciBcbnVuIHRyaW1lc3RyZSBwYXJhIGNvbnRpbnVhciB1biBwcm9jZXNvLCBoYWNlciBsYSB2ZXJpZmljYWNpXHUwMEYzbiBzb2JyZSBsb3NcbnRyaW1lc3RyZXMgcXVlIGVzdGVuIGNyZWFkb3MgYSBwYXJ0aXIgZGUgbGEgbm90YSBUUS4gIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cbiAgYXN5bmMgZXN0YWJsZWNlclRyaW1lc3RyZSh0ZW1hVHJpbWVzdHJlKXtcbiAgICAvLyBPYnRlbmVyIFFzIHBhcmEgcHJlZ3VudGFyIGVsIFEgcGFyYSBlbCBxdWUgZGVzZWEgY3JlYXIgbGFzIFx1MDBFMXJlYXMgZGUgdmlkYS5cbiAgICBjb25zdCBmb2xkZXJRID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfVHJpbWVzdHJhbFwiXTtcbiAgICBjb25zdCBmaWxlc1EgPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJRKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICk7XG4gICAgbGV0IHFDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzUSkge1xuICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgaWYgKG1ldGFkYXRhPy50eXBlID09PSBcIlRRXCIgJiYgbWV0YWRhdGE/LnRyaW1lc3RyZSkge1xuICAgICAgICBsZXQgcUFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ocUFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgcUNyZWFkb3MucHVzaChxQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIHRyeSB7XG4gICAgICBsZXQgcSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiLnRyaW1lc3RyZSksXG4gICAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYiksXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBEZSBxdWUgdHJpbWVzdHJlIHZhbW9zIGEgcHJvY2VzYXIgdHVzICR7dGVtYVRyaW1lc3RyZX1gXG4gICAgICApO1xuICBcbiAgICAgIC8vIEFxdVx1MDBFRCBhc3VtaW1vcyBxdWUgc2kgcSBlcyB1bmRlZmluZWQsIGVsIHVzdWFyaW8gY2FuY2VsXHUwMEYzIGxhIG9wZXJhY2lcdTAwRjNuLlxuICAgICAgaWYgKHEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3BlcmFjaVx1MDBGM24gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAvLyBNYW5lamEgZWwgZXNjYXBlIG8gY2FuY2VsYWNpXHUwMEYzbiBhcXVcdTAwRUQuIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgc2FsaXIgZGUgbGEgZnVuY2lcdTAwRjNuIGFjdHVhbCBvIGhhY2VyIG90cmEgY29zYS5cbiAgICAgICAgICByZXR1cm47IC8vIFNhbGUgZGUgbGEgZnVuY2lcdTAwRjNuIHNpIGVsIHVzdWFyaW8gY2FuY2VsYS5cbiAgICAgIH1cbiAgXG4gICAgICAvLyBDb250aW51YXIgY29uIGxhIGxcdTAwRjNnaWNhIGRlc3B1XHUwMEU5cyBkZSBxdWUgZWwgdXN1YXJpbyBoYSBzZWxlY2Npb25hZG8gdW5hIG9wY2lcdTAwRjNuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRWwgdXN1YXJpbyBzZWxlY2Npb25cdTAwRjM6XCIsIHEpO1xuICAgICAgICByZXR1cm4gcTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGVsIHN1Z2dlc3RlcjpcIiwgZXJyb3IpO1xuICAgICAgfVxuICB9XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQ29uIGVzdGUgbVx1MDBFOXRvZG8gcHVlZG8gYWN0dWFsaXphciB2YWxvcmVzIGVuIGxhcyBub3RhcyB5YSBleGlzdGVudGVzLlxuTG8gdXRpbGl6byBlbiBlc3RhIGNsYXNlLCBwYXJhIGFjdHVhbGl6YXIgZWwgdHJpbWVzdHJlLlxuRXN0YSBmdW5jaVx1MDBGM24gc29sbyBhY3R1YWxpemEsIG5vIGNyZWEgZWwgY2FtcG9zIHNpIG5vIGV4aXN0ZS4gXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuICBhc3luYyBhY3R1YWxpemFyWUFNTHMoY2FtcG9zLCBydXRhKSB7XG4gICAgICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJ1dGEpO1xuICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgIC8vIEl0ZXJhciBzb2JyZSBjYWRhIHByb3BpZWRhZCBkZWwgb2JqZXRvICdub3RhJ1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW1wbyBpbiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoY2FtcG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gZW4gZWwgZnJvbnRtYXR0ZXIgY29uIGVsIHZhbG9yIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltjYW1wb10gPSBjYW1wb3NbY2FtcG9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgfVxufVxuXG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRlVGltZSwgRHVyYXRpb24gfSBmcm9tICdsdXhvbic7XG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUElcIjtcblxuZXhwb3J0IGNsYXNzIFZpc3RhUmVnaXN0cm9EaWFyaW8gZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgaW50ZXJ2YWxJZDogbnVtYmVyO1xuIFxuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcHVibGljIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZWdpc3RybyBEaWFyaW9cIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJmaWxlLWNsb2NrXCI7IC8vIEVzdGUgZXMgdW4gZWplbXBsbywgY2FtYmlhIFwiZG9jdW1lbnRvXCIgcG9yIGVsIG5vbWJyZSBkZWwgXHUwMEVEY29ubyBxdWUgZGVzZWVzIHVzYXJcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNldFRleHQoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoYWN0aXZlRmlsZSk7IC8vIFB1ZWRlcyB1c2FyIHRoaXMuZmlsZSBkZW50cm8gZGUgYWN0dWFsaXphclZpc3RhXG4gICAgXG4gICAgICAgIC8vYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGlubWVkaWF0YW1lbnRlIGFsIGFicmlyXG5cbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGFjdGl2ZUZpbGUpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgY2FkYSAxMCBzZWd1bmRvc1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YShhY3RpdmVGaWxlKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7IC8vIExpbXBpYSBlbCBjb250ZW5pZG8gZXhpc3RlbnRlIGFudGVzIGRlIGFjdHVhbGl6YXJcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZlY2hhSG95ID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhY3RpdmVGaWxlLmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXSwgJ3l5eXktTU0tZGQnLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSk7XG5cbiAgICAgICAgbGV0IHRvdGFsRGlhID0gMDtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0hveSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgIGxldCBob3JhSW5pY2lvID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChtZXRhZGF0YS5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGhvcmFJbmljaW8uc3RhcnRPZignZGF5JykudHMgPT09IGZlY2hhSG95LnN0YXJ0T2YoJ2RheScpLnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0hveS5wdXNoKHsgcGF0aDogZmlsZS5wYXRoLCBmcm9udG1hdHRlcjogbWV0YWRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRGlhICs9IHBhcnNlSW50KG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbyB8fCAnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdHJvc0hveS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBsZXQgZmVjaGFBID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50cztcbiAgICAgICAgICAgIGxldCBmZWNoYUIgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGIuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRzO1xuICAgICAgICAgICAgcmV0dXJuIGZlY2hhQSAtIGZlY2hhQjtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsICR7ZmVjaGFIb3kudG9Gb3JtYXQoJ0VFRUUsIEREJyl9LmB9KTtcbiAgICAgICAgdGl0dWxvLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYWNpXHUwMEYzbiBkZSBlbGVtZW50b3MgSFRNTCBkaXJlY3RhbWVudGVcbiAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3RhYmxlLXJlc3VtZW5TZW1hbmFsJyB9KTtcbiAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgIFsnUmVnaXN0cm8nLCAnRGVzY3JpcGNpXHUwMEYzbicsICdQZXJpb2RvJywgJ1RpZW1wbycsICdFc3RhZG8nLCAnSWQnLCAnQWNjaVx1MDBGM24nXS5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiBoZWFkZXIgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgICAgIHJlZ2lzdHJvc0hveS5mb3JFYWNoKHJlZ2lzdHJvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHJlbGxlbmFzIGxhcyBjZWxkYXMgZGUgbGEgZmlsYVxuICAgICAgICAgICAgdGhpcy5maWxsUm93V2l0aERhdGEocm93LCByZWdpc3Rybyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICB9XG5cbiAgICBmaWxsUm93V2l0aERhdGEocm93LCByZWdpc3Rybykge1xuICAgICAgICBjb25zdCB0ZEFyY2hpdm8gPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGNvbnN0IGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGlua0VsLnRleHRDb250ZW50ID0gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1swXTsgIC8vIFVzYSBlbCBhbGlhcyBjb21vIHRleHRvIGRlbCBlbmxhY2VcbiAgICAgICAgbGlua0VsLmhyZWYgPSAnIyc7XG4gICAgICAgIGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldikgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgLy8gRXZpdGEgbGEgbmF2ZWdhY2lcdTAwRjNuIHByZWRldGVybWluYWRhIGRlbCBlbmxhY2VcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocmVnaXN0cm8ucGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gQWJyZSBlbCBhcmNoaXZvIGVuIHVuYSBudWV2YSBob2phIGRlIGVzcGFjaW8gZGUgdHJhYmFqb1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUsIHsgZm9jdXM6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0ZEFyY2hpdm8uYXBwZW5kQ2hpbGQobGlua0VsKTtcbiAgICAgICAgXG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlZ2lzdHJvLmZyb250bWF0dGVyLmRlc2NyaXBjaW9uIH0pO1xuICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBgJHtEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b0Zvcm1hdCgnaDptbSBhJyl9IC8gJHtEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFGaW5hbCwgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKX1gfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhIHkgbXVlc3RyYSBlbCB0aWVtcG8gZW4gZm9ybWF0byBkZSBkXHUwMEVEYXMsIGhvcmFzIHkgbWludXRvc1xuICAgICAgICBjb25zdCB0ZFBlcmlvZG8gPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIC8vIENhbGN1bGEgZWwgdGllbXBvIGRlc2RlIGFob3JhIGhhc3RhIGxhIGhvcmEgZGUgaW5pY2lvXG4gICAgICAgICAgICBsZXQgYWhvcmEgPSBEYXRlVGltZS5sb2NhbCgpO1xuICAgICAgICAgICAgbGV0IGluaWNpbyA9IERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgICAgICAgbGV0IGR1cmFjaW9uID0gYWhvcmEuZGlmZihpbmljaW8sIFsnZGF5cycsICdob3VycycsICdtaW51dGVzJ10pO1xuICAgICAgICAgICAgdGRQZXJpb2RvLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREdXJhdGlvbihkdXJhY2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNdWVzdHJhIGVsIHRpZW1wbyB0cmFiYWphZG8gZW4gbWlsaXNlZ3VuZG9zIGNvbnZlcnRpZG8gYSBmb3JtYXRvIGxlZ2libGVcbiAgICAgICAgICAgIGxldCB0aWVtcG9UcmFiYWphZG8gPSB0aGlzLmZvcm1hdER1cmF0aW9uKHJlZ2lzdHJvLmZyb250bWF0dGVyLnRpZW1wb1RyYWJhamFkbyk7XG4gICAgICAgICAgICB0ZFBlcmlvZG8udGV4dENvbnRlbnQgPSB0aWVtcG9UcmFiYWphZG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyB9KTtcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgaWYgKHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgYWN0aW9uQ2VsbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKCdDZXJyYXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3Rpb25DZWxsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ1JldG9tYXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRvbWFyVGFyZWEocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRnVuY2lcdTAwRjNuIGF1eGlsaWFyIHBhcmEgZm9ybWF0ZWFyIGxhIGR1cmFjaVx1MDBGM24gZGUgTHV4b24gYSB1biBmb3JtYXRvIGxlZ2libGVcbiAgICBmb3JtYXREdXJhdGlvbihtcykge1xuICAgICAgICAgICAgaWYgKG1zID09PSBudWxsIHx8IG1zID09PSB1bmRlZmluZWQgfHwgaXNOYU4obXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTm8gZGVmaW5pZG9cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydGlyIG1pbGlzZWd1bmRvcyBhIG1pbnV0b3MsIGhvcmFzIHkgZFx1MDBFRGFzXG4gICAgICAgICAgICAgICAgbGV0IG1pbnV0b3MgPSBNYXRoLmZsb29yKG1zIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgIGxldCBob3JhcyA9IE1hdGguZmxvb3IobWludXRvcyAvIDYwKTtcbiAgICAgICAgICAgICAgICBtaW51dG9zID0gbWludXRvcyAlIDYwOyAvLyBSZXN0byBkZSBsYSBkaXZpc2lcdTAwRjNuIHBhcmEgb2J0ZW5lciBsb3MgbWludXRvcyBzb2JyYW50ZXNcbiAgICAgICAgICAgICAgICBsZXQgZGlhcyA9IE1hdGguZmxvb3IoaG9yYXMgLyAyNCk7XG4gICAgICAgICAgICAgICAgaG9yYXMgPSBob3JhcyAlIDI0OyAvLyBSZXN0byBkZSBsYSBkaXZpc2lcdTAwRjNuIHBhcmEgb2J0ZW5lciBsYXMgaG9yYXMgc29icmFudGVzXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEZvcm1hdGVhciBlbCBzdHJpbmcgZGUgc2FsaWRhXG4gICAgICAgICAgICAgICAgaWYgKGRpYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtkaWFzfSBkICR7aG9yYXN9IGggJHttaW51dG9zfSBtaW5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaG9yYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtob3Jhc30gaCAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZUJ1dHRvblRhYmxlKGJ1dHRvblRleHQsIG9uQ2xpY2tDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lvdXItYnV0dG9uLWNsYXNzJyk7XG5cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyByZXRvbWFyVGFyZWEoaWQpIHsgXG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHJlZW1wbGF6YXIgJ3J1dGEvYWwvYXJjaGl2by5tZCcgY29uIGxhIHJ1dGEgZXhhY3RhIGRlbCBhcmNoaXZvIHF1ZSBkZXNlYXMgb2J0ZW5lclxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfUmVnaXN0cm9UaWVtcG9gXX0vUGx0IC0gUmVnaXN0cm9UaWVtcG8ubWRgO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBcIlJldG9tYXIgXCIgKyBpZDtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgICAgICBjb25zdCB0cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgbGV0IGNyZWFyTm90YSA9IHRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpXG4gICAgICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbiAgICAgIH1cblxuICAgIGdldFRwKCl7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gICBcbiAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcInRlbXBsYXRlci1vYnNpZGlhblwiXS50ZW1wbGF0ZXI7XG4gICAgICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIG1vZHVsZXNcbiAgICAgICAgdHAuZmlsZSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgIGlmICghdHAuZmlsZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCd0cCBjb24gcHJvcGllZGFkZXMgXCJmaWxlXCIgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICAgICAgcmV0dXJuIHRwO1xuICAgIH1cbiAgICBcblxuXG4gICAgLy8gT3BjaW9uYWw6IEltcGxlbWVudGEgb25DbG9zZSBzaSBuZWNlc2l0YXMgbGltcGllemEgYWwgY2VycmFyIGxhIHZpc3RhLlxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFRob3JhIHtcbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIG9ubG9hZCgpIHtcbiAgICAgICAgdGhpcy5hcHAuY29tbWFuZHMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3Nob3ctbG9jYWwtdGltZScsXG4gICAgICAgICAgICBuYW1lOiAnTW9zdHJhciBIb3JhIExvY2FsJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dMb2NhbFRpbWVNb2RhbCgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dMb2NhbFRpbWVNb2RhbCgpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTG9jYWxUaW1lTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxufVxuXG5jbGFzcyBMb2NhbFRpbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGhvdXJzID0gbm93LmdldEhvdXJzKCkgJSAxMiB8fCAxMjtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBhbXBtID0gbm93LmdldEhvdXJzKCkgPj0gMTIgPyAnUE0nIDogJ0FNJztcbiAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2hvdXJzfToke21pbnV0ZXN9ICR7YW1wbX1gO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdIb3JhIExvY2FsJyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aW1lU3RyaW5nIH0pO1xuXG4gICAgICAgIC8vIEVzdGlsbyBkZWwgbW9kYWxcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMkUzNDQwJztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmNvbG9yID0gJyNEOERFRTknO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUucGFkZGluZyA9ICcyMHB4JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFFLElBQUFBLG9CQUF1Qjs7O0FDQXpCLHNCQUFrRDtBQUUzQyxJQUFNLHdCQUFOLGNBQW9DLGlDQUFpQjtBQUFBLEVBR3hELFlBQVksUUFBZ0I7QUFDeEIsVUFBTSxPQUFPLEtBQUssTUFBTTtBQUN4QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsVUFBZ0I7QUFDWixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBQ3hCLGdCQUFZLE1BQU07QUFDbEIsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxxREFBK0MsQ0FBQztBQUduRixVQUFNLGVBQWUsWUFBWSxVQUFVLEVBQUUsS0FBSyxnQkFBZ0IsQ0FBQztBQUNuRSxVQUFNLHNCQUFzQixZQUFZLFVBQVUsRUFBRSxLQUFLLHdCQUF3QixDQUFDO0FBR2xGLFVBQU0sWUFBWSxDQUFDLHNCQUFtQiwyQkFBMkIsY0FBVztBQUc1RSxjQUFVLFFBQVEsQ0FBQyxPQUFPLFVB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QSxFQUMzQjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBRW5CLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFFM0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUVuQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFHakMsU0FBSyxtQkFBbUI7QUFBQSxFQUUxQjtBQUFBLEVBRUEsUUFBTztBQUNIO0FBQ0EsUUFBSSxDQUFDLEtBQUssT0FBTyxDQUFDLEtBQUssSUFBSSxRQUFRLGVBQWUsSUFBSSxvQkFBb0IsR0FBRztBQUN6RSxjQUFRLE1BQU0sNENBQXlDO0FBQ3ZEO0FBQUEsSUFDSjtBQUtBLFFBQUksUUFBUSxLQUFLLElBQUksUUFBUSxRQUFRLG9CQUFvQixFQUFFO0FBQzNELFlBQVEsTUFBTSxvQkFBb0IsbUJBQW1CO0FBQ3JELFFBQUksS0FBSyxDQUFDO0FBRVYsT0FBRyxPQUFPLE1BQU0sS0FBSyxPQUFLLEVBQUUsUUFBUSxNQUFNO0FBQzFDLE9BQUcsU0FBUyxNQUFNLEtBQUssT0FBSyxFQUFFLFFBQVEsUUFBUTtBQUU5QyxRQUFJLENBQUMsR0FBRyxRQUFRO0FBQ2QsY0FBUSxNQUFNLGtFQUFrRTtBQUNoRjtBQUFBLElBQ0o7QUFDRSxZQUFRLElBQUksc0RBQXNEO0FBQ2xFLFdBQU87QUFBQSxFQUNUO0FBQ047IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiYXBwIiwgIm9mZnNldCIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAicmVnaXN0ZXJSaWJib25NZW51IiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJtZW51T3RybyIsICJ0aXBvIiwgInR5cGUiLCAicyIsICJzaW5nbGV0b24iLCAib2Zmc2V0IiwgInMiLCAiZGVmYXVsdFpvbmUiLCAib2Zmc2V0IiwgIm4iLCAibiIsICJvZmZzZXQiLCAicyIsICJuIiwgImZvcm1hdE9mZnNldCIsICJzIiwgIm1hdGNoIiwgIm9mZnNldCIsICJsIiwgIm4iLCAicyIsICJJTlZBTElEIiwgInMiLCAiZSIsICJzIiwgInR5cGUiLCAiSU5WQUxJRCIsICJjbG9uZSIsICJvZmZzZXQiLCAib3JkZXJlZFVuaXRzIiwgImFwcCIsICJhbGlhcyIsICJmb2xkZXIiLCAic2FtZU5hbWUiLCAibmFtZUZpbGUiLCAiYXBwIiwgIm9mZnNldCIsICJpbXBvcnRfb2JzaWRpYW4iLCAicmVnaXN0cm8iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm9mZnNldCIsICJuaXZlbCIsICJhY3RpdmVSZXNvdXJjZXMiLCAiY2xhc2lmaWNhY2lvbiIsICJ0YWdDbGFzaWZpY2FjaW9uIiwgIm51ZXZhQ2xhc2lmaWNhY2lvbiIsICJmcm9udG1hdHRlciIsICJhcHAiLCAicGFydGVzIiwgInR5cGUiLCAiYXJlYXNWaWRhIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiWUFNTFVwZGF0ZXJBUEkiLCAib2Zmc2V0IiwgImNsYXNpZmljYWNpb24iLCAidGFnQ2xhc2lmaWNhY2lvbiIsICJudWV2YUNsYXNpZmljYWNpb24iLCAiZnJvbnRtYXR0ZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidGl0dWxvIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm5vdyIsICJZQU1MVXBkYXRlckFQSSJdCn0K
