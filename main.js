/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian20 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const pagosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Pagos"' });
        pagosTitle.setAttribute("data-title", 'Subsistema de "Pagos"');
        pagosTitle.style.cursor = "pointer";
        const pagosContent = tabContent.createDiv();
        pagosContent.style.display = "none";
        pagosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(pagosContent).setName("Carpeta de Modulos del Sistema de Pagos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de pagos.").addText((text) => text.setValue(this.plugin.settings.folder_Pagos).onChange(async (value) => {
          this.plugin.settings.folder_Pagos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(pagosContent).setName("\xCDndice de Pagos").setDesc("Establece la ruta del \xEDndice de Pagos.").addText((text) => text.setValue(this.plugin.settings.indice_Pagos).onChange(async (value) => {
          this.plugin.settings.indice_Pagos = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
  openTab(arg0) {
    throw new Error("Method not implemented.");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/plantillas/Anotaciones/Plt - Anotaciones.ts
var plantilla = `<%*
debugger
const dv = this.DataviewAPI;
const {update} = this.app.plugins.plugins["metaedit"].api
const fileCampos =dv.page("Estructura/Campos Sistema Gestion/Campos Sistema Central")
let clasificacionAX = fileCampos.tituloClasificacionAX
let tagsClasificacionAX = fileCampos.tagsClasificacionAX
let activo = app.workspace.getActiveFile();
let idAux = dv.pages('"Anotaciones/Notas"').file.frontmatter.sort(b=> b.id , 'desc').id;

// Comprueba si idAux tiene al menos un elemento y asigna a 'id' el siguiente valor en la secuencia o 1 si no hay elementos.
let id = idAux.length > 0 ? (idAux[0] + 1) : 1;

let newName, titulo, existe, asunto, nombre
	titulo = await tp.system.prompt("\xBFSobre que es esta anotaci\xF3n?", "A-"+ id, true)
	// Verificar si el usuario presion\xF3 Esc.
    if (titulo === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	if (activo != null){ 
		nombre = activo.basename;
		const nota = app.metadataCache.getFileCache(activo); 
		asunto = await tp.system.suggester(["Si","No"],[true, false], true, nombre + " es origen de " + titulo + "?")
		}
	newName = "Anotaciones/Notas/A - " + id  
await tp.file.move(newName);
let clasificacion, descripcion, estado
let tagClasificacion = await tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?")
	// Verificar si el usuario presion\xF3 Esc.
    if (tagClasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
let nuevaClasificacion = false
if(tagClasificacion=="Nuevo"){
	clasificacion = await tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true)
	// Verificar si el usuario presion\xF3 Esc.
    if (clasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	tagClasificacion = await tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true)
	// Verificar si el usuario presion\xF3 Esc.
    if (tagClasificacion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
	nuevaClasificacion = true
// --> Validar que el nombre del grupo no sea igual al nombre de ninguna area de Vida.
}else if(tagClasificacion=="Ninguna"){
	tagClasificacion = ""
	clasificacion = ""	
}else {
	let indice = tagsClasificacionAX.indexOf(tagClasificacion)
	clasificacion = clasificacionAX[indice]
}
if (nuevaClasificacion) {
    let nuevoC = clasificacionAX.pop(); // \xDAltima clasificaci\xF3n
    let ningunoC = clasificacionAX.pop(); // Pen\xFAltima clasificaci\xF3n

    clasificacionAX.push(clasificacion);
    clasificacionAX.push(ningunoC);
    clasificacionAX.push(nuevoC);

    await update("tituloClasificacionAX", clasificacionAX, fileCampos.file.path);
	await new Promise(resolve => setTimeout(resolve, 1000));

    let nuevoTagC = tagsClasificacionAX.pop(); // \xDAltimo tag
    let ningunoTagC = tagsClasificacionAX.pop(); // Pen\xFAltimo tag

    tagsClasificacionAX.push(tagClasificacion);
    tagsClasificacionAX.push(ningunoTagC);
    tagsClasificacionAX.push(nuevoTagC);

    await update("tagsClasificacionAX", tagsClasificacionAX, fileCampos.file.path);
}


if (tagClasificacion != ""){
tagClasificacion = "cl/" + tagClasificacion 
}
if (clasificacion == "Feedback Semanal"){
	descripcion = []
	let aux = 0
	let otra
	do{
		descripcion[aux] = await tp.system.prompt("Escribe tu feedback de "+ titulo, "P" + aux, false, true)
		aux += 1
		otra = await tp.system.suggester(["Si","No"],[true,false], true, "\xBFAgregar otro parrafo?" )
	}while(otra)
}else{
	descripcion = await tp.system.prompt("\xBFQuieres agregar una descripci\xF3n?", " " + titulo, false, true )
	// Verificar si el usuario presion\xF3 Esc.
    if (descripcion === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
}
estado = await tp.system.suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado","\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"],["\u{1F535}", "\u{1F7E2}","\u{1F7E1}", "\u{1F534}"], false, "Cual es el estado de esta anotaci\xF3n?")
// Verificar si el usuario presion\xF3 Esc.
    if (estado === null) {
    new Notice("Creaci\xF3n de nota cancelada por el usuario.");
    return; // Termina la ejecuci\xF3n de la funci\xF3n aqu\xED.
	}
-%>
---
tipo: Anotaci\xF3n
idq: 6
id: <% id %> 
idManual:
aliases: 
- <%titulo%>
descripcion: <%*if (clasificacion != "Feedback Semanal"){%> <%descripcion%><%* }else{%>>-  <%* for (let a=0; a<descripcion.length;a++){%>
   <%descripcion[a]%> 
<%*}}%>
tema: <%clasificacion%> 
estado: <% estado %> 
fecha: <% tp.date.now("YYYY-MM-DD dddd HH:mm") %>
hora: <% tp.date.now("HHmm", 0,)%>
valor:  
tags: <%tagClasificacion%> 
asunto: <%* if(asunto){ %> 
- "[[<%nombre%>]]" <%*}%>
related:
---
# \`VIEW[{aliases}]\` 
>[!info]- Descripcion
>\`VIEW[{descripcion}]\`
> 

Plantilla oculta
<%* if(clasificacion=="Meditaciones de alteraci\xF3n de futuro"){ -%>
## Objetivo 

## Evento imaginario que seguir\xEDa al cumplimiento del deseo

### Que es lo que siento?

### Detalles para la visualizaci\xF3n.
## Premisas que alimenten el deseo cumplido
_Frases que apoyan mi objetivo_
## Tareas de seguimiento de la meditaci\xF3n
- [ ] Total de meditaciones de <% titulo %> 
	- [ ] Meditaci\xF3n de <% titulo %> #cx/Meditacion \u{1F501} every day when done \u{1F4C5} <% tp.date.now("YYYY-MM-DD") %>
<%*}else if(clasificacion =="Feedback Semanal"){-%>
## Feedback
\`\`\`dataviewjs
dv.paragraph(dv.current().descripcion)
\`\`\`
<%*}else if(clasificacion =="Video Youtube"){-%>
## Video

> [!tip]- Como crear el link del video?
>Estamos utilizando el plugin TimeStamp Notes. Para crear el link aqu\xED, solamente debes pegar el link de youtube, seleccionarlo y utilizar el comando Open Video Player, o el shortcut  \u2325 ^ O
### Timestamps
> [!important]- Crear los timestamps del video
> Para crear los timestamps del video, en el momento en el que llegues al video, solo debes pulsar el shortcut \u2325 ^ 0, o buscar el comando Insert Timestamp. 
 

## Comentarios Personales

## Hitos del video.

## Resumen IA

<%*}else if(clasificacion =="Grupo de Hojas de Trabajo"){-%>

## [[Comentarios a las plantillas#Temas relacionados a este grupo de hojas de trabajo|Temas relacionados a este grupo de hojas de trabajo:]]
\`\`\`dataviewjs
const {crearAx} = customJS
let hijos = dv.pages().filter(b=> dv.func.contains(b.asunto, dv.current().file.link))
let totalHijos = 
dv.table(["Tema","Tipo","Fecha Modificaci\xF3n", "Pendientes","Hijos"], hijos.map(b=> [b.file.link, b.tema, b.fecha, b.file.tasks.filter(b=> b.status == ' ' || b.status == '/').length, crearAx.paginasHijos(dv,b).length-1]))
\`\`\`


<%*}%>


# Fin
- [/] Finalizado el desarrollo de Anotaci\xF3n <%id%> #cx/Computador/OrganizarNotas  
Estado de la nota:  \`INPUT[estadoNota][:estado]\`
\`\`\`dataviewjs
const {callDV} = customJS
callDV.CambiarTituloDescripcion(dv)
\`\`\`
---
\`\`\`dataviewjs
const {callDV} = customJS
callDV.CarruselAnotaciones(dv)
\`\`\`
\`\`\`dataviewjs
const {callDV} = customJS
callDV.BotonesStandar(dv)
\`\`\`

`;

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");
async function crearPlantilla(contenido) {
  const folder = "Plantillas";
  let filename = "Archivo De Plantilla";
  let pathTemporal = folder + "/" + filename + ".md";
  const archivoCreado = await app.vault.create(pathTemporal, contenido);
  return archivoCreado;
}

// src/modules/moduloBase/commands.ts
var import_obsidian4 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian3 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando2 = plugin.addCommand({
    id: "crear-template",
    name: "Crear un archivo template",
    callback: async () => {
      const archivo = await crearPlantilla(plantilla);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando2.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian4.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian7 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian10 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian13 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian12 = require("obsidian");

// src/modules/modales/seleccionModal.ts
var import_obsidian11 = require("obsidian");
var SeleccionModal = class extends import_obsidian11.FuzzySuggestModal {
  // Flag para determinar si se ha hecho una selección.
  // Constructor de la clase.
  constructor(app2, titles, values, placeholder) {
    super(app2);
    // Objeto para mapear títulos a valores.
    this.seleccionHecha = false;
    this.titles = titles;
    this.values = values;
    this.valueMap = titles.reduce((acc, title, index) => {
      acc[title] = values[index];
      return acc;
    }, {});
    this.setPlaceholder(placeholder);
  }
  // Método para obtener los ítems (títulos) que se mostrarán en el modal.
  getItems() {
    return this.titles;
  }
  // Método para obtener el texto que se mostrará para cada ítem en el modal.
  getItemText(item) {
    return item;
  }
  // Método que se llama al cerrar el modal.
  onClose() {
    if (!this.seleccionHecha) {
      this.reject(new Error("Modal cerrado sin selecci\xF3n"));
    }
  }
  // Método para manejar la selección de un ítem.
  selectSuggestion(item, evt) {
    this.seleccionHecha = true;
    super.selectSuggestion(item, evt);
  }
  // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
  onChooseItem(item, evt) {
    const value = this.valueMap[item];
    this.resolve(value);
  }
  // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
  openAndAwaitSelection() {
    return new Promise((resolve, reject) => {
      this.resolve = resolve;
      this.reject = reject;
      this.open();
    });
  }
};

// src/modules/moduloRegistroTiempo/utils.ts
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian12.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian12.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian12.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian12.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian13.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian15 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian14 = require("obsidian");
var modal_Ahora = class extends import_obsidian14.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian14.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian14.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian14.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian15.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian15.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian15.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_ProyectosGTD: "Subsistemas/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Subsistemas/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Subsistemas/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Subsistemas/GTD/Revision Semanal/Indice Revision Semanal",
  folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Pagos: "Subsistemas/Pagos/Notas",
  indice_Pagos: "Subsistemas/Pagos/Indice Pagos",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_ProyectosQ: "Subsistemas/Proyectos de Q/Proyectos",
  indice_ProyectosQ: "Subsistemas/Proyectos de Q/Indice Proyectos de Q",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RecursosRecurrentes: "Subsistemas/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Subsistemas/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  nameFile_AreasVida: "indexAV",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  nameFile_AreasInteres: "indexAI",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes"
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian19 = require("obsidian");

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian18 = require("obsidian");

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian17 = require("obsidian");
var fuzzySelectOrCreate = class {
  constructor(app2, plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.app = app2;
    this.plugin = plugin;
  }
  createModal() {
    const modal = document.createElement("div");
    modal.setAttribute("id", "fuzzySearchModal");
    modal.style.position = "fixed";
    modal.style.top = "50%";
    modal.style.left = "50%";
    modal.style.transform = "translate(-50%, -50%)";
    modal.style.zIndex = "1000";
    modal.style.padding = "20px";
    modal.style.backgroundColor = "white";
    modal.style.border = "1px solid #ccc";
    modal.style.borderRadius = "5px";
    modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
    modal.style.width = "300px";
    const closeButton = document.createElement("button");
    closeButton.textContent = "\xD7";
    closeButton.style.position = "absolute";
    closeButton.style.top = "5px";
    closeButton.style.right = "5px";
    closeButton.style.border = "none";
    closeButton.style.background = "none";
    closeButton.style.cursor = "pointer";
    closeButton.style.fontSize = "16px";
    closeButton.style.fontWeight = "bold";
    closeButton.style.padding = "0px 4px";
    closeButton.style.borderRadius = "10px";
    closeButton.style.outline = "none";
    closeButton.style.boxShadow = "none";
    closeButton.onclick = () => modal.remove();
    modal.appendChild(closeButton);
    return modal;
  }
  filterItems(query, items) {
    return items.filter(
      (item) => item.value.toLowerCase().includes(query.toLowerCase())
    );
  }
  async updateYAMLFields(tipo, selectedValue, selectedGroup) {
    try {
      debugger;
      const file = app.vault.getAbstractFileByPath(this.pathCampos);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        debugger;
        let currentActs = frontmatter[tipo] || [];
        let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
        frontmatter[tipo] = newValueForActs;
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  async showFuzzySearchModal(items, groups, tipo) {
    return new Promise((resolve, reject) => {
      let selectedValue = "";
      let selectedGroup = "";
      const modal = this.createModal();
      const title = document.createElement("h2");
      title.textContent = "Busca o crea tu actividad";
      title.style.textAlign = "center";
      modal.appendChild(title);
      const input = document.createElement("input");
      input.type = "text";
      input.placeholder = "Escribe tu actividad...";
      input.style.width = "80%";
      input.style.textAlign = "center";
      modal.style.display = "flex";
      modal.style.flexDirection = "column";
      modal.style.alignItems = "center";
      modal.appendChild(input);
      const spacer = document.createElement("div");
      spacer.style.height = "16px";
      modal.appendChild(spacer);
      const resultsDiv = document.createElement("div");
      modal.appendChild(resultsDiv);
      function updateResultsDisplay(filteredResults, menuOtro2) {
        resultsDiv.innerHTML = "";
        filteredResults.forEach((result) => {
          const div = document.createElement("div");
          div.textContent = result.value;
          div.style.cursor = "pointer";
          div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
          div.onmouseout = () => div.style.backgroundColor = "transparent";
          div.onclick = () => {
            selectedValue = result.activity;
            selectedGroup = result.group;
            modal.remove();
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(div);
        });
        if (filteredResults.length === 0 && input.value.trim() !== "") {
          const createNewDiv = document.createElement("div");
          createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
          createNewDiv.style.cursor = "pointer";
          createNewDiv.style.color = "blue";
          createNewDiv.onclick = () => {
            selectedValue = input.value;
            debugger;
            if (tipo == void 0) {
              tipo = "actsTemas";
            }
            selectGroupForNewActivity(menuOtro2, tipo);
          };
          resultsDiv.appendChild(createNewDiv);
        }
      }
      function selectGroupForNewActivity(menuOtro2, tipo2) {
        resultsDiv.innerHTML = "";
        input.remove();
        spacer.remove();
        title.remove();
        const texto = document.createElement("p");
        texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
        ;
        texto.style.textAlign = "center";
        resultsDiv.appendChild(texto);
        groups.forEach((group) => {
          const groupDiv = document.createElement("div");
          groupDiv.textContent = group;
          groupDiv.style.cursor = "pointer";
          groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
          groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
          groupDiv.onclick = async () => {
            selectedGroup = group;
            modal.remove();
            let recurrente = await menuOtro2.esRecurrente(selectedValue);
            if (recurrente) {
              await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
            }
            resolve([selectedValue, selectedGroup]);
          };
          resultsDiv.appendChild(groupDiv);
        });
      }
      function displaySelectedValue(activity, group) {
        resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
      }
      input.oninput = () => {
        const filteredItems = this.filterItems(input.value, items);
        updateResultsDisplay(filteredItems, this);
      };
      document.body.appendChild(modal);
    });
  }
  async esRecurrente(tarea) {
    const opciones = ["Si", "No"];
    const valores = [true, false];
    const placeholder = `${tarea} es tarea recurrente?`;
    const modal = new SeleccionModal(app, opciones, valores, placeholder);
    try {
      return await modal.openAndAwaitSelection();
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      return false;
    }
  }
};

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var menuOtro = class {
  constructor(plugin) {
    this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
    this.selectedActivity = "";
    this.selectedGroup = "";
    this.plugin = plugin;
    this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
  }
  async menuOtro(app2, registro) {
    const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
    const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
    const placeholderOtro = "\xBFQue categoria?";
    const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
    let temaOtro;
    let siAsunto = false;
    try {
      const selectionOtro = await modalOtro.openAndAwaitSelection();
      switch (selectionOtro) {
        case "hab":
          temaOtro = await this.habitual(app2);
          break;
        case "actsAV":
        case "actsAI":
        case "actsPQ":
        case "actsPGTD":
        case "actsTI":
        case "actsRR":
          temaOtro = await this.elemSG(app2, selectionOtro);
          siAsunto = true;
          break;
        case "bus":
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
      registro.detener = true;
      return error;
    }
    return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.nombre };
  }
  async habitual(app2) {
    const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
    const actsGrupos = await this.resultYaml(app2, "actsTemas");
    let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
    return objEleccion;
  }
  async ninguno(app2) {
  }
  async elemSG(app2, tipo) {
    const actividades = await this.resultYaml(app2, tipo);
    debugger;
    const activeSG = await this.findMainFilesWithState(app2, tipo);
    const groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
    let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
      value: `${item.actividad} / ${item.grupo}`,
      // Cambia el orden si es necesario
      activity: item.actividad,
      // Usa la propiedad 'actividad' en lugar de item[1]
      group: item.grupo
      // Usa la propiedad 'grupo' en lugar de item[0]
    }));
    let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
    const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
    let alias = foundElement == null ? void 0 : foundElement.file.path;
    let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
    return objEleccion;
  }
  async buscar(app2) {
  }
  async resultYaml(app2, tema) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian18.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], actividad: item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFrontmatterField(app2, file, field) {
    try {
      const tFile = app2.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian18.TFile) {
        const cache = app2.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
            console.log("El campo est\xE1 vac\xEDo o no existe.");
            return null;
          } else {
            console.log("Frontmatter consultado con \xE9xito");
            return fieldValue;
          }
        } else {
          console.log("El campo no existe en el frontmatter.");
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  async findMainFilesWithState(app2, tipo) {
    const propertiesTipo = {
      actsAV: {
        folder: this.plugin.settings.folder_AreasVida,
        sameName: true,
        nameFile: this.plugin.settings.nameFile_AreasVida
      },
      actsAI: {
        folder: this.plugin.settings.folder_AreasInteres,
        sameName: true,
        nameFile: this.plugin.settings.nameFile_AreasInteres
      },
      actsPQ: {
        folder: this.plugin.settings.folder_ProyectosQ,
        sameName: false,
        nameFile: ""
      },
      actsPGTD: {
        folder: this.plugin.settings.folder_ProyectosGTD,
        sameName: false,
        nameFile: ""
      },
      actsTI: {
        folder: this.plugin.settings.folder_TemasInteres,
        sameName: false,
        nameFile: ""
      },
      actsRR: {
        folder: this.plugin.settings.folder_RecursosRecurrentes,
        sameName: false,
        nameFile: ""
      }
      // Puedes continuar añadiendo más casos aquí
    };
    if (propertiesTipo.hasOwnProperty(tipo)) {
      const { folder, sameName, nameFile } = propertiesTipo[tipo];
      const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder));
      const filesWithFrontmatter = [];
      for (const file of filesInFolder) {
        if (sameName && file.basename === nameFile || !sameName) {
          const metadata = app2.metadataCache.getFileCache(file);
          if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
            filesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
          }
        }
      }
      return filesWithFrontmatter;
    } else {
      console.log("Selecci\xF3n no reconocida:", tipo);
      return [];
    }
  }
};

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var utilsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.menuOtro = new menuOtro(plugin);
  }
  async buscarRegistrosActivos(app2, registro) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    for (let file of files) {
      if (file.path.startsWith(registro.folder)) {
        const metadata = app2.metadataCache.getFileCache(file);
        if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
          return file;
        }
      }
    }
    return;
  }
  // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
  async crearObjetoRegistro(plugin) {
    const activo = plugin.app.workspace.getActiveFile();
    if (!activo) {
      console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
      return null;
    }
    const folder = plugin.settings.folder_RegistroTiempo;
    const indice = plugin.settings.indice_RegistroTiempo;
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    const nextId = maxId + 1;
    const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
    return {
      activo,
      nombre: activo.basename,
      folder,
      indice,
      id: nextId,
      fecha: fechaCompleta,
      indice_DVJS: `"${indice}"`
    };
  }
  formatearFecha(fecha) {
    const offset = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async verificarTareasActivas(registro, app2) {
    var _a;
    const files = app2.vault.getMarkdownFiles();
    const tareasActivas = [];
    for (let file of files) {
      if (file.path.startsWith(registro.folder)) {
        const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
          tareasActivas.push({ file, titulo: metadata.titulo, aliases: metadata.aliases || file.basename });
        }
      }
    }
    if (tareasActivas.length === 1) {
      const tareaActiva = tareasActivas[0];
      const deseaDetener = await this.mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
      debugger;
      if (deseaDetener === void 0) {
        new import_obsidian19.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
        registro.detener = true;
        return;
      }
      if (deseaDetener) {
        await this.detenerTarea(tareaActiva, app2);
        registro.detener = false;
      } else {
        new import_obsidian19.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
        registro.detener = true;
        return;
      }
    } else if (tareasActivas.length > 1) {
      new import_obsidian19.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
      registro.detener = true;
    } else {
      console.log("No hay m\xE1s tareas corriendo.");
      registro.detener = false;
    }
  }
  mostrarSugerencia(mensaje) {
    return new Promise((resolve, reject) => {
      let seleccionado = false;
      const modal = new import_obsidian19.Modal(app);
      modal.contentEl.createEl("h1", { text: mensaje });
      const buttonsContainer = modal.contentEl.createEl("div");
      const hacerSeleccion = (seleccion) => {
        seleccionado = true;
        modal.close();
        resolve(seleccion);
      };
      const yesButton = buttonsContainer.createEl("button", {
        text: "S\xED"
      });
      yesButton.addEventListener("click", () => hacerSeleccion(true));
      const noButton = buttonsContainer.createEl("button", {
        text: "No"
      });
      noButton.addEventListener("click", () => hacerSeleccion(false));
      modal.onClose = () => {
        if (!seleccionado) {
          reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      };
      modal.contentEl.addEventListener("keydown", (e) => {
        var _a;
        switch (e.key) {
          case "ArrowLeft":
            yesButton.focus();
            break;
          case "ArrowRight":
            noButton.focus();
            break;
          case "Enter":
            (_a = document.activeElement) == null ? void 0 : _a.click();
            break;
        }
      });
      yesButton.focus();
      modal.open();
    });
  }
  async definirTipoRegistro(registro, app2) {
    const totTareas = await this.encontrarTareasPendientes(app2);
    let opcionesTitulo, valoresOpcion;
    if (totTareas.length > 0) {
      opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
      valoresOpcion = ["Nota", "Tarea", "Otro"];
    } else {
      opcionesTitulo = [registro.nombre, "Otro"];
      valoresOpcion = ["Nota", "Otro"];
    }
    const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
    const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
    try {
      const selection = await modalMenu1.openAndAwaitSelection();
      registro.tipoRegistro = selection;
      switch (registro.tipoRegistro) {
        case "Nota":
          registro.titulo = registro.nombre;
          registro.siAsunto = true;
          break;
        case "Tarea":
          await this.elegirTareaParaRegistro(app2, registro, totTareas);
          break;
        default:
          let respuesta = await this.menuOtro.menuOtro(app2, registro);
          debugger;
          Object.assign(registro, respuesta);
          break;
      }
    } catch (error) {
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    }
  }
  async encontrarTareasPendientes(app2) {
    let tareasPendientes = [];
    const archivos = app2.vault.getMarkdownFiles();
    const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
    for (const archivo of archivosRelevantes) {
      const contenido = await app2.vault.read(archivo);
      const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
      const tareasConArchivo = coincidencias.map((tarea) => {
        return { tarea: tarea.trim(), archivo };
      });
      tareasPendientes = tareasPendientes.concat(tareasConArchivo);
    }
    return tareasPendientes;
  }
  async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
    const placeholder = "Elige la tarea que vas a registrar.";
    let promesasLimpias = tareasPendientes.map((tareaObj) => this.limpiarTextoTarea(tareaObj.tarea));
    try {
      const tareasLimpias = await Promise.all(promesasLimpias);
      const tareasLimpiasConArchivo = tareasPendientes.map((tareaObj, index) => {
        return {
          tarea: tareasLimpias[index],
          // Tarea limpia
          archivo: tareaObj.archivo
          // Referencia al archivo original
        };
      });
      const longitud = tareasLimpiasConArchivo.length;
      const arregloDeIndices = Array.from({ length: longitud }, (_, indice) => indice);
      const modalMenu = new SeleccionModal(app2, tareasLimpiasConArchivo.map((b) => b.tarea), arregloDeIndices, placeholder);
      try {
        const selectedIndex = await modalMenu.openAndAwaitSelection();
        const seleccion = tareasLimpiasConArchivo[selectedIndex];
        registro.titulo = seleccion.tarea;
        registro.nombre = seleccion.archivo.basename;
        registro.siAsunto = true;
      } catch (error) {
        registro.detener = true;
        console.error("Error o modal cerrado sin selecci\xF3n:", error);
      }
    } catch (error) {
      console.error("Hubo un error al limpiar las tareas:", error);
    }
  }
  limpiarTextoTarea(titulo) {
    return new Promise((resolve) => {
      let textoLimpio = titulo.split("\n")[0];
      textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
      textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
      textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
      const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
      textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
      textoLimpio = textoLimpio.replace(/\s+/g, " ");
      resolve(textoLimpio.trim());
    });
  }
  async construirNombreyAlias(registro, app2) {
    let nombreBase = `${registro.folder}/RT - ${registro.id}`;
    let aliasLimpio = this.limpiarAlias(registro.titulo);
    aliasLimpio = aliasLimpio.length > 195 ? aliasLimpio.slice(0, 195) : aliasLimpio;
    const archivos = app2.vault.getFiles();
    let registrosConMismoTitulo = [];
    for (const archivo of archivos) {
      if (archivo.path.startsWith(registro.folder)) {
        const metadatos = app2.metadataCache.getFileCache(archivo);
        if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === registro.titulo) {
          const idSec = metadatos.frontmatter.idSec;
          if (idSec !== void 0) {
            registrosConMismoTitulo.push({ archivo, idSec });
          }
        }
      }
    }
    debugger;
    registrosConMismoTitulo.sort((b) => b.idSec, "desc");
    registro.idSec = registrosConMismoTitulo.length > 0 ? parseInt(registrosConMismoTitulo[0].idSec) + 1 : 1;
    if (registro.idSec > 1) {
      aliasLimpio += ` - ${registro.idSec}`;
    }
    registro.aliases = [];
    registro.aliases.push(`RT - ${aliasLimpio}`);
    if (registro.tipoRegistro === "Nota") {
      const archivoActivo = app2.workspace.getActiveFile();
      if (!archivoActivo)
        return;
      const metadatosActivo = app2.metadataCache.getFileCache(archivoActivo);
      const aliasesActivo = metadatosActivo && metadatosActivo.frontmatter ? metadatosActivo.frontmatter.aliases : void 0;
      if (aliasesActivo) {
        const additionalAliases = Array.isArray(aliasesActivo) ? aliasesActivo : [aliasesActivo];
        additionalAliases.forEach((alias) => {
          registro.aliases.push(`RT - ${alias}`);
        });
      }
    }
    registro.nameFile = nombreBase;
  }
  limpiarAlias(titulo) {
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
    tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
    return tituloLimpio.trim();
  }
  async detenerTarea(tareaActiva, app2) {
    console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
    const fileContents = await app2.vault.read(tareaActiva.file);
    const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
    await app2.vault.modify(tareaActiva.file, newContents);
  }
};

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var registroTiempoAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
  }
  async iniciarRegistro() {
    try {
      const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
      await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
      if (registro.detener) {
        return registro;
      }
      await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
      return registro;
    } catch (error) {
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
  }
  miMetodo() {
    return "Resultado de mi Metodo";
  }
  otroMetodo(param) {
    return `Resultado de otroMetodo con ${param}`;
  }
};

// src/modules/inicializacionSubsistemas/API/starterAPI.ts
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async crearNota(infoSubsistema, campos) {
    let nota = {};
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
    }
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    const templaterPlugin = this.plugin.app.plugins.plugins["templater-obsidian"];
    const tp = templaterPlugin.templater.current_functions_object;
    if (!tp) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    return tp;
  }
  // Ejemplo de función getCampo simulada. Debes definir funciones similares para 'id', 'fecha', etc.
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    const nextId = maxId + 1;
    this.nota.id = nextId;
    return nextId;
  }
  async getFecha() {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getSecId() {
  }
  async getTitulo() {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion() {
    let descripcion = await this.tp.system.prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
    if (descripcion === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto() {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion() {
    var _a;
    let clasificacion, tagClasificacion, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion === null) {
        new Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion == "Nuevo") {
        clasificacion = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion === null) {
          new Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion === null) {
          new Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion = true;
      } else if (tagClasificacion == "Ninguna") {
        tagClasificacion = "";
        clasificacion = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion);
        clasificacion = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion != "") {
      tagClasificacion = "cl/" + tagClasificacion;
    }
    this.nota.clasificacionAX = clasificacion;
    this.nota.tagClasificacionAX = tagClasificacion;
    return { clase: clasificacion, tag: tagClasificacion };
  }
  // ->
  async getEstado() {
    let campo = await this.tp.system.suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el estado de la nota:");
    if (campo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename() {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian20.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.ribbonButtonRT = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    await this.loadSettings();
    this.app.plugins.plugins["Total-Personal-Management"] = this;
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
  }
  addSettingTab(arg0) {
    throw new Error("Method not implemented.");
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzVGFiLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhckNhcnBldGEudHMiLCAic3JjL3BsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhclBsYW50aWxsYS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL2NvbW1hbmRzLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZS50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvYWN0aXZhZG9yZXMudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3VpL3JpYmJvbkJ1dHRvbi50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvdWkvbW9kYWwudHMiLCAic3JjL21vZHVsZXMvTV9idXNxdWVkYUF2YW56YWRhL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQWxpYXNTdGF0dXNCYXIvc3RhdHVzQmFyLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3JpYmJvbk1lbnUudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdXRpbHMudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25Nb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvbW9kYWxfQWhvcmEudHMiLCAic3JjL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEkudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL21lbnVPdHJvLnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUEkudHMiLCAic3JjL21vZHVsZXMvaW5pY2lhbGl6YWNpb25TdWJzaXN0ZW1hcy9BUEkvc3RhcnRlckFQSS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiICBpbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG4gIGltcG9ydCB7IFBsdWdpbk1haW5TZXR0aW5nc1RhYiB9IGZyb20gJy4vc2V0dGluZ3NUYWInO1xuICBpbXBvcnQgeyBNb2R1bG9CYXNlIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9CYXNlL2luZGV4XCI7XG4gIGltcG9ydCB7YWN0aXZhdGVNb2R1bG9CdXNxdWVkYUF2YW56YWRhfSBmcm9tIFwiLi9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS9hY3RpdmFkb3Jlc1wiXG4gIGltcG9ydCB7IFN0YXR1c0JhckV4dGVuc2lvbiB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvQWxpYXNTdGF0dXNCYXIvc3RhdHVzQmFyXCI7XG4gIGltcG9ydCB7IE1vZHVsb1JlZ2lzdHJvVGllbXBvIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9pbmRleFwiO1xuICBpbXBvcnQgdHlwZSB7IFBsdWdpbk1haW5TZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3MnO1xuICBpbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MnO1xuICBpbXBvcnQge3JlZ2lzdHJvVGllbXBvQVBJfSBmcm9tICcuL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJJ1xuICBpbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSAnLi9tb2R1bGVzL2luaWNpYWxpemFjaW9uU3Vic2lzdGVtYXMvQVBJL3N0YXJ0ZXJBUEknO1xuXG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFuYWdlbWVudFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gIHNldHRpbmdzOiBQbHVnaW5NYWluU2V0dGluZ3MgfCB1bmRlZmluZWQ7XG4gIC8vIERlY2xhcmEgdW5hIHByb3BpZWRhZCBgc2V0dGluZ3NgIHBhcmEgYWxtYWNlbmFyIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLlxuICBzdGF0dXNCYXJFeHRlbnNpb246IFN0YXR1c0JhckV4dGVuc2lvbiB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogTW9kdWxvUmVnaXN0cm9UaWVtcG8gfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc1JUOiBzdHJpbmdbXSA9IFtdO1xuICByZWdpc3RlcmVkQ29tbWFuZElkc01COiBzdHJpbmdbXSA9IFtdO1xuICByaWJib25CdXR0b25SVDogUmV0dXJuVHlwZTxQbHVnaW5bJ2FkZFJpYmJvbkljb24nXT4gfCBudWxsID0gbnVsbDtcbiAgYXBwOiBhbnk7XG4gIHJlZ2lzdHJvVGllbXBvQVBJOiByZWdpc3Ryb1RpZW1wb0FQSSB8IHVuZGVmaW5lZDtcbiAgc3RhcnRlckFQSTogc3RhcnRlckFQSSB8IHVuZGVmaW5lZDtcbiAgLy8gRGVjbGFyYSB1bmEgcHJvcGllZGFkIHBhcmEgbWFudGVuZXIgdW5hIGluc3RhbmNpYSBkZSBgU3RhdHVzQmFyRXh0ZW5zaW9uYC5cbiAgXG5cbiAgICBhc3luYyBvbmxvYWQoKSB7IFxuICAgICAgICBcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgLy8gY2FyZ2FyIEFQSSByZWdpc3RybyBUaWVtcG9cbiAgICAgICAgdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWydUb3RhbC1QZXJzb25hbC1NYW5hZ2VtZW50J10gPSB0aGlzO1xuICAgICAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMpO1xuICAgICAgICB0aGlzLnN0YXJ0ZXJBUEkgPSBuZXcgc3RhcnRlckFQSSh0aGlzKTtcbiAgICAgICAgLy8gQVx1MDBGMWFkZSBsYSBwZXN0YVx1MDBGMWEgZGUgY29uZmlndXJhY2lcdTAwRjNuXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGx1Z2luTWFpblNldHRpbmdzVGFiKHRoaXMpKTtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBsYXMgaW5zdGFuY2lhcyBkZSBsb3MgbVx1MDBGM2R1bG9zXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uID0gbmV3IFN0YXR1c0JhckV4dGVuc2lvbih0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IG5ldyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyh0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bG9CYXNlID0gbmV3IE1vZHVsb0Jhc2UodGhpcyk7XG4gICAgICAgIHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIC8vIEFwbGljYSBsYSBjb25maWd1cmFjaVx1MDBGM24gaW5pY2lhbCBiYXNhZGEgZW4gbG9zIGFqdXN0ZXMgY2FyZ2Fkb3MgbyBwcmVkZXRlcm1pbmFkb3MuXG4gICAgICAgIGNvbnNvbGUubG9nKCdJbmljaWFuZG8gY2FyZ2EgZGUgcGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbCcpO1xuICAgICAgXG4gICAgICB9XG4gIGFkZFNldHRpbmdUYWIoYXJnMDogUGx1Z2luTWFpblNldHRpbmdzVGFiKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xuICB9XG5cbiAgICAgIGFwcGx5Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgLy8gTW9kdWxvIEJhc2UgZXMgZWwgbVx1MDBGM2R1bG8gc29icmUgZWwgcXVlIGVzdG95IGhhY2llbmRvIHBydWViYXMgZGUgZGVzYXJyb2xsby5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQmFzZSkge1xuICAgICAgICAgIHRoaXMubW9kdWxvQmFzZT8uYWN0aXZhdGUodGhpcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kdWxvQmFzZT8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvUmVnaXN0cm9UaWVtcG8pIHtcbiAgICAgICAgICAgIHRoaXMubW9kdWxvUmVnaXN0cm9UaWVtcG8/LmFjdGl2YXRlKHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbz8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIpIHtcbiAgICAgICAgICB0aGlzLnN0YXR1c0JhckV4dGVuc2lvbj8uYWN0aXZhdGUoKTtcbiAgICAgICAgICAvLyBTaSBsYSBjb25maWd1cmFjaVx1MDBGM24gcGFyYSBgbW9kdWxvQWxpYXNTdGF0dXNCYXJgIGVzIHZlcmRhZGVyYSwgYWN0aXZhIGVsIG1cdTAwRjNkdWxvLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uPy5kZWFjdGl2YXRlKCk7XG4gICAgICAgICAgLy8gU2kgZXMgZmFsc2EsIGRlc2FjdGl2YSBlbCBtXHUwMEYzZHVsby5cbiAgICAgICAgfVxuXG4gICAgfVxuICAgIFxuICAgICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgICAgLy8gQ1x1MDBGM2RpZ28gZGUgbGltcGllemEgYXF1XHUwMEVEXG4gICAgICAgICAgY29uc29sZS5sb2coJ0Rlc2NhcmdhbmRvIHBsdWdpbiBHZXN0aVx1MDBGM24gUGVyc29uYWwnKTtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9XG5cbiAgICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIGRlc2RlIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICAgICAgLy8gSW50ZW50YSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHkgbWV6Y2xhIGxvcyB2YWxvcmVzIGNhcmdhZG9zIGNvbiBsb3MgcHJlZGV0ZXJtaW5hZG9zLlxuICAgICAgfVxuXG4gICAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZ3VhcmRhciBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsIGVuIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAvLyBHdWFyZGEgbGEgY29uZmlndXJhY2lcdTAwRjNuIGFjdHVhbC5cbiAgICAgICAgXG4gICAgICAgIHRoaXMuYXBwbHlDb25maWd1cmF0aW9uKCk7XG4gICAgICAgIC8vIFZ1ZWx2ZSBhIGFwbGljYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYXNlZ3VyYXJzZSBkZSBxdWUgbG9zIGNhbWJpb3MgcmVjaWVudGVzIHNlIHJlZmxlamVuIGlubWVkaWF0YW1lbnRlLlxuICAgICAgfVxuICB9XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgUGx1Z2luTWFpblNldHRpbmdzVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcihwbHVnaW4uYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdDb25maWd1cmFjaVx1MDBGM24gZGVsIHBsdWdpbiBkZSBHZXN0aVx1MDBGM24gUGVyc29uYWwnIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3JlcyBwYXJhIGxhcyBwZXN0YVx1MDBGMWFzIHkgZWwgY29udGVuaWRvIGRlIGxhcyBwZXN0YVx1MDBGMWFzXG4gICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RhYi1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCB0YWJDb250ZW50Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndGFiLWNvbnRlbnQtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyBEZWZpbmUgbG9zIHRcdTAwRUR0dWxvcyBkZSBsYXMgcGVzdGFcdTAwRjFhc1xuICAgICAgICBjb25zdCB0YWJUaXRsZXMgPSBbJ0FjdGl2YXIgTVx1MDBGM2R1bG9zJywgJ0RpcmVjdG9yaW9zIFN1YnNpc3RlbWFzJywgJ1Blc3RhXHUwMEYxYSAzJ107XG5cbiAgICAgICAgLy8gQ3JlYXIgcGVzdGFcdTAwRjFhcyB5IGNvbnRlbmlkbyBlc3BlY1x1MDBFRGZpY29cbiAgICAgICAgdGFiVGl0bGVzLmZvckVhY2goKHRpdGxlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gQ3JlYXIgYm90b25lcyBkZSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICAgICAgICB0YWJCdXR0b24uY2xhc3NMaXN0LmFkZCgndGFiLWxpbmsnKTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5kYXRhc2V0LnRhYiA9IGB0YWIke2luZGV4fWA7XG4gICAgICAgICAgICB0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMub3BlblRhYihgdGFiJHtpbmRleH1gKTtcbiAgICAgICAgICAgIHRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJCdXR0b24pO1xuXG4gICAgICAgICAgICAvLyBDcmVhciBjb250ZW5pZG8gZGUgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCB0YWJDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICB0YWJDb250ZW50LmlkID0gYHRhYiR7aW5kZXh9YDtcbiAgICAgICAgICAgIHRhYkNvbnRlbnQuY2xhc3NMaXN0LmFkZCgndGFiLWNvbnRlbnQnKTtcbiAgICAgICAgICAgIHRhYkNvbnRlbnRDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQ29udGVudCk7XG5cbiAgICAgICAgICAgIC8vIEluaWNpYWxtZW50ZSBvY3VsdGFyIGVsIGNvbnRlbmlkbyBkZSBsYSBwZXN0YVx1MDBGMWEsIGV4Y2VwdG8gZWwgcHJpbWVyb1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkgdGFiQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnVmVyIEFsaWFzIGVuIGVsIFN0YXR1cyBCYXInKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFbGlnZSBzaSBkZXNlYXMgdmVyIGVsIEFsaWFzZXMgZGUgbGFzIG5vdGFzIGVuIGVsIFN0YXR1cyBCYXIuJylcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0FsaWFzU3RhdHVzQmFyKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0FsaWFzU3RhdHVzQmFyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdBY3RpdmFyIE1cdTAwRjNkdWxvIFJlZ2lzdHJvIFRpZW1wbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdBY3RpdmEgbyBkZXNhY3RpdmEgZWwgbVx1MDBGM2R1bG8gZGUgcmVnaXN0cm8gZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZTogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvUmVnaXN0cm9UaWVtcG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBNXHUwMEYzZHVsbyBCYXNlIC0gUHJ1ZWJhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdBY3RpdmEgbyBkZXNhY3RpdmEgZWwgbVx1MDBGM2R1bG8gZGUgcHJ1ZWJhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9CYXNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQmFzZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSBzZWd1bmRhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgbWFuZWphciBlbCBjbGljIGVuIGVsIHRcdTAwRUR0dWxvIGRlbCBibG9xdWUgZGVzcGxlZ2FibGVcbiAgICAgICAgICAgICAgICBjb25zdCB0b2dnbGVDb2xsYXBzZSA9IChldmVudDogeyB0YXJnZXQ6IHsgbmV4dEVsZW1lbnRTaWJsaW5nOiBhbnk7IGlubmVySFRNTDogc3RyaW5nOyBnZXRBdHRyaWJ1dGU6IChhcmcwOiBzdHJpbmcpID0+IHN0cmluZzsgfTsgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0RWxlbWVudCA9IGV2ZW50LnRhcmdldC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICcmIzk2NjA7ICcgKyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7IC8vIENhbWJpYSBlbCBpY29ubyBhIFwiYWJham9cIlxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSAnJiM5NjU0OyAnICsgZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpOyAvLyBDYW1iaWEgZWwgaWNvbm8gYSBcImRlcmVjaGFcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJBbm90YWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkFub3RhY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJBbm90YWNpb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgYW5vdGFjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYW5vdGFjaW9uZXNDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgQW5vdGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiB0b2RhcyBsYXMgQW5vdGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Fub3RhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0Fub3RhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhhbm90YWNpb25lc0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnSW5kaWNlIGRlIEFub3RhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsYXMgQW5vdGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Fub3RhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Fub3RhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkFydFx1MDBFRGN1bG9zIGRlIEJsb2dcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2dUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkFydFx1MDBFRGN1bG9zIGRlIEJsb2dcIicgfSk7XG4gICAgICAgICAgICAgICAgYmxvZ1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiQXJ0XHUwMEVEY3Vsb3MgZGUgQmxvZ1wiJyk7XG4gICAgICAgICAgICAgICAgYmxvZ1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBibG9nQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgYmxvZ0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGJsb2dUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhibG9nQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIEFydFx1MDBFRGN1bG9zIGRlbCBCbG9nJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIGFydFx1MDBFRGN1bG9zIGRlbCBibG9nLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BQmxvZylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BQmxvZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYmxvZ0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnSW5kaWNlIGRlIEFydFx1MDBFRGN1bG9zIGRlbCBCbG9nJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgYXJ0XHUwMEVEY3Vsb3MgZGVsIGJsb2cuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0FCbG9nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0FCbG9nID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zXCJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNhcnJvbGxvc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiRGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3NcIicgfSk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zXCInKTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNhcnJvbGxvc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBDb25maWd1cmFjaVx1MDBGM24gcGFyYSBDYXJwZXRhIGRlIERlc2Fycm9sbG9zIHkgQ1x1MDBGM2RpZ29zXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZGVzYXJyb2xsb3NDb250ZW50KSAvLyBVc2Ftb3MgYGRlc2Fycm9sbG9zQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIERlc2Fycm9sbG9zIHkgQ1x1MDBGM2RpZ29zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIGRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9EZXNhcnJvbGxvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9EZXNhcnJvbGxvcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlndXJhY2lcdTAwRjNuIHBhcmEgXHUwMENEbmRpY2UgZGUgRGVzYXJyb2xsb3MgeSBDXHUwMEYzZGlnb3NcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhkZXNhcnJvbGxvc0NvbnRlbnQpIC8vIFVzYW1vcyBgZGVzYXJyb2xsb3NDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIERlc2Fycm9sbG9zIHkgQ1x1MDBGM2RpZ29zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgZGVzYXJyb2xsb3MgeSBjXHUwMEYzZGlnb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Rlc2Fycm9sbG9zKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0Rlc2Fycm9sbG9zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkVzdHVkaW9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IGVzdHVkaW9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkVzdHVkaW9cIicgfSk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiRXN0dWRpb1wiJyk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBlc3R1ZGlvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgZXN0dWRpb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBlc3R1ZGlvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXN0dWRpb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFRlbWFzIGRlIEVzdHVkaW8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgdGVtYXMgZGUgZXN0dWRpby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRXN0dWRpbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Fc3R1ZGlvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhlc3R1ZGlvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIEVzdHVkaW8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxvcyB0ZW1hcyBkZSBlc3R1ZGlvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Fc3R1ZGlvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0VzdHVkaW8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiR1REXCJcbiAgICAgICAgICAgICAgICBjb25zdCBndGRUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkdURFwiJyB9KTtcbiAgICAgICAgICAgICAgICBndGRUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkdURFwiJyk7XG4gICAgICAgICAgICAgICAgZ3RkVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IGd0ZENvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGd0ZENvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBndGRUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBQcm95ZWN0b3MgR1REXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV2aXNpXHUwMEYzbiBTZW1hbmFsXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmV2aXNpb25lcyBTZW1hbmFsZXMgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJMZWN0dXJhXCJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWN0dXJhVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInIH0pO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkxlY3R1cmFcIicpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGVjdHVyYVRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIFNlc2lvbmVzIGRlIExlY3R1cmFcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhU2VzaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgc2VzaW9uZXMgZGUgbGVjdHVyYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVNlc2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gTGlicm9zIHkgUmVzXHUwMEZBbWVuZXNcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsb3MgcmVzXHUwMEZBbWVuZXMgZGUgbGlicm9zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIGxvcyByZXNcdTAwRkFtZW5lcyBkZSBsaWJyb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVJlc3VtZW5lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlIGVzdGFtb3MgZGVudHJvIGRlIGlmIChpbmRleCA9PT0gMSkgeyAuLi4gfVxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNZW50b3JcdTAwRURhc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1lbnRvclx1MDBFRGFzXCInKTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lbnRvcmlhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFNlc2lvbmVzIGRlIE1lbnRvclx1MDBFRGEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobWVudG9yaWFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIE1lbnRvclx1MDBFRGFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVwaXRlIGVsIHBhdHJcdTAwRjNuIHBhcmEgXCJNZXJjYWRvXCIsIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCIsIHkgXCJQYWdvc1wiXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1lcmNhZG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmNhZG9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicgfSk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTWVyY2Fkb1wiJyk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZXJjYWRvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1lcmNhZG9cIiwgc2lndWllbmRvIGVsIHBhdHJcdTAwRjNuIGRlIGxhcyBtZW50b3JcdTAwRURhc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBMaXN0YWRvcyBkZSBNZXJjYWRvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIGxpc3RhcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lcmNhZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbGlzdGFkb3MgZGUgbWVyY2FkbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGxpc3RhZG9zIGRlIG1lcmNhZG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lcmNhZG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVyY2FkbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bG9zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIicgfSk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCInKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBBZ3JlZ2EgYXF1XHUwMEVEIGxhcyBjb25maWd1cmFjaW9uZXMgZXNwZWNcdTAwRURmaWNhcyBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBNb2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgbVx1MDBGM2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbi4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbG9zIE1vZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIE1cdTAwRjNkdWxvcyBkZWwgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQYWdvc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcGFnb3NUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlBhZ29zXCInIH0pO1xuICAgICAgICAgICAgICAgIHBhZ29zVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQYWdvc1wiJyk7XG4gICAgICAgICAgICAgICAgcGFnb3NUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFnb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBwYWdvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBwYWdvc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIEFncmVnYSBhcXVcdTAwRUQgbGFzIGNvbmZpZ3VyYWNpb25lcyBlc3BlY1x1MDBFRGZpY2FzIHBhcmEgXCJQYWdvc1wiXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocGFnb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBNb2R1bG9zIGRlbCBTaXN0ZW1hIGRlIFBhZ29zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIGNvbXByb2JhbnRlcyBkZSBwYWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUGFnb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUGFnb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHBhZ29zQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFBhZ29zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBQYWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUGFnb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUGFnb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByZXNlbnRhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlByZXNlbnRhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcmVzZW50YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIE5vdGFzIGRlIFByZXNlbnRhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIG5vdGFzIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJlc2VudGFjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJlc2VudGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByZXNlbnRhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QcmVzZW50YWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQcm95ZWN0b3MgZGUgUVwiXG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUVRpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicgfSk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHJveWVjdG9zIGRlIFFcIicpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJveWVjdG9zUUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJveWVjdG9zUUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFByb3llY3RvcyBkZSBRJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByb3llY3Rvc1FDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHByb3llY3RvcyBkZSBRLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Qcm95ZWN0b3NRKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc1EgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBmdW5jaVx1MDBGM24gdG9nZ2xlQ29sbGFwc2UgZXN0XHUwMEUxIGRlZmluaWRhIGNvbW8gc2UgaW5kaWNcdTAwRjMgYW50ZXJpb3JtZW50ZS5cblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUHVibGljYWNpb25lc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljYWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUHVibGljYWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQdWJsaWNhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY2FjaW9uZXNDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBJbmljaWFsbWVudGUgb2N1bHRvXG4gICAgICAgICAgICAgICAgcHVibGljYWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBQaWV6YXMgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyBwaWV6YXMgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QdWJsaWNhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwdWJsaWNhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFB1YmxpY2FjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHB1YmxpY2FjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1B1YmxpY2FjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWNldGFzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWNldGFzXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjZXRhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY2V0YXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWNldGFzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjZXRhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWNldGFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJlY2V0YXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY2V0YXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY2V0YXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjZXRhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVjdXJzb3MgUmVjdXJyZW50ZXNcIicpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFJlY3Vyc29zIFJlY3VycmVudGVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY3Vyc29zUmVjdXJyZW50ZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlY3Vyc29zIHJlY3VycmVudGVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWN1cnNvc1JlY3VycmVudGVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUmVnaXN0cm8gVGllbXBvXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb1RpZW1wb1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiUmVnaXN0cm8gVGllbXBvXCInIH0pO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWdpc3RybyBUaWVtcG9cIicpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlZ2lzdHJvVGllbXBvQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVnaXN0cm9zIGRlIFRpZW1wbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVnaXN0cm9UaWVtcG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVnaXN0cm8gZGUgVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSByZWdpc3Ryb3MgZGUgdGllbXBvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuXG5cblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgdGVyY2VyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVMYWJlbCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZGF0ZUxhYmVsLnRleHRDb250ZW50ID0gJ0ZlY2hhJztcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlSW5wdXQgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGRhdGVJbnB1dC50eXBlID0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZXN0aWxvcyBDU1MgcGFyYSBlc3BhY2lhZG8geSBvcmdhbml6YWNpXHUwMEYzblxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnc3R5bGUnLCB7XG4gICAgICAgICAgICB0ZXh0OiBgXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50IHsgZGlzcGxheTogbm9uZTsgcGFkZGluZy10b3A6IDIwcHg7IH0gLy8gQVx1MDBGMWFkaWRvIHBhZGRpbmctdG9wIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICAgICAgICAgIC50YWItY29udGVudC5hY3RpdmUgeyBkaXNwbGF5OiBibG9jazsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluayB7IGN1cnNvcjogcG9pbnRlcjsgcGFkZGluZzogNXB4IDEwcHg7IG1hcmdpbi1yaWdodDogNXB4OyBiYWNrZ3JvdW5kOiAjZjBmMGYwOyBib3JkZXI6IDFweCBzb2xpZCAjZGRkOyBib3JkZXItcmFkaXVzOiA1cHg7IH1cbiAgICAgICAgICAgICAgICAudGFiLWxpbmsuYWN0aXZlIHsgYmFja2dyb3VuZDogI2UwZTBlMDsgfVxuICAgICAgICAgICAgICAgIC5zZXR0aW5nLWl0ZW0geyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9XG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgICAgICBcblxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYW1iaWFyIGxhIHBlc3RhXHUwMEYxYSBhY3RpdmFcbiAgICAgICAgdGhpcy5vcGVuVGFiID0gKHRhYk5hbWUpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItY29udGVudCcpLmZvckVhY2goY29udGVudCA9PiB7XG4gICAgICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItbGluaycpLmZvckVhY2gobGluayA9PiB7XG4gICAgICAgICAgICAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiQ29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYk5hbWUpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlVGFiTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhYj1cIiR7dGFiTmFtZX1cIl1gKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVUYWJDb250ZW50KSBhY3RpdmVUYWJDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkxpbmspIGFjdGl2ZVRhYkxpbmsuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBYnJpciBsYSBwcmltZXJhIHBlc3RhXHUwMEYxYSBwb3IgZGVmZWN0b1xuICAgICAgICB0aGlzLm9wZW5UYWIoJ3RhYjAnKTtcbiAgICB9XG4gICAgb3BlblRhYihhcmcwOiBzdHJpbmcpOiBhbnkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01ldGhvZCBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyByZWdpc3RlckNvbW1hbmRzLCBkZWFjdGl2YXRlQ29tbWFuZHMgfSBmcm9tIFwiLi9jb21tYW5kc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kdWxvQmFzZSB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG4gICAgbW9kdWxvQmFzZTogTW9kdWxvQmFzZSB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZHVsb0Jhc2UpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGFjdGl2bywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgICAgXG4gICAgfVxuXG5cbn0iLCAiXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJDYXJwZXRhKHJ1dGFDYXJwZXRhOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgeWEgZXhpc3RlXG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgaWYgKGNhcnBldGFFeGlzdGVudGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgTGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKHJ1dGFDYXJwZXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDYXJwZXRhICcke3J1dGFDYXJwZXRhfScgY3JlYWRhIGV4aXRvc2FtZW50ZS5gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7cnV0YUNhcnBldGF9JzpgLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiIsICJleHBvcnQgY29uc3QgcGxhbnRpbGxhID0gYDwlKlxuZGVidWdnZXJcbmNvbnN0IGR2ID0gdGhpcy5EYXRhdmlld0FQSTtcbmNvbnN0IHt1cGRhdGV9ID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zW1wibWV0YWVkaXRcIl0uYXBpXG5jb25zdCBmaWxlQ2FtcG9zID1kdi5wYWdlKFwiRXN0cnVjdHVyYS9DYW1wb3MgU2lzdGVtYSBHZXN0aW9uL0NhbXBvcyBTaXN0ZW1hIENlbnRyYWxcIilcbmxldCBjbGFzaWZpY2FjaW9uQVggPSBmaWxlQ2FtcG9zLnRpdHVsb0NsYXNpZmljYWNpb25BWFxubGV0IHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmaWxlQ2FtcG9zLnRhZ3NDbGFzaWZpY2FjaW9uQVhcbmxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbmxldCBpZEF1eCA9IGR2LnBhZ2VzKCdcIkFub3RhY2lvbmVzL05vdGFzXCInKS5maWxlLmZyb250bWF0dGVyLnNvcnQoYj0+IGIuaWQgLCAnZGVzYycpLmlkO1xuXG4vLyBDb21wcnVlYmEgc2kgaWRBdXggdGllbmUgYWwgbWVub3MgdW4gZWxlbWVudG8geSBhc2lnbmEgYSAnaWQnIGVsIHNpZ3VpZW50ZSB2YWxvciBlbiBsYSBzZWN1ZW5jaWEgbyAxIHNpIG5vIGhheSBlbGVtZW50b3MuXG5sZXQgaWQgPSBpZEF1eC5sZW5ndGggPiAwID8gKGlkQXV4WzBdICsgMSkgOiAxO1xuXG5sZXQgbmV3TmFtZSwgdGl0dWxvLCBleGlzdGUsIGFzdW50bywgbm9tYnJlXG5cdHRpdHVsbyA9IGF3YWl0IHRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZTb2JyZSBxdWUgZXMgZXN0YSBhbm90YWNpXHUwMEYzbj9cIiwgXCJBLVwiKyBpZCwgdHJ1ZSlcblx0Ly8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0fVxuXHRpZiAoYWN0aXZvICE9IG51bGwpeyBcblx0XHRub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG5cdFx0Y29uc3Qgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pOyBcblx0XHRhc3VudG8gPSBhd2FpdCB0cC5zeXN0ZW0uc3VnZ2VzdGVyKFtcIlNpXCIsXCJOb1wiXSxbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aXR1bG8gKyBcIj9cIilcblx0XHR9XG5cdG5ld05hbWUgPSBcIkFub3RhY2lvbmVzL05vdGFzL0EgLSBcIiArIGlkICBcbmF3YWl0IHRwLmZpbGUubW92ZShuZXdOYW1lKTtcbmxldCBjbGFzaWZpY2FjaW9uLCBkZXNjcmlwY2lvbiwgZXN0YWRvXG5sZXQgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRwLnN5c3RlbS5zdWdnZXN0ZXIoY2xhc2lmaWNhY2lvbkFYLCB0YWdzQ2xhc2lmaWNhY2lvbkFYLCBmYWxzZSwgXCJcdTAwQkZDbGFzaWZpY2FyXHUwMEVEYXMgZXN0YSBub3RhIGJham8gYWxndW5hIGRlIGxhcyBzaWd1aWVudGVzIGNhdGVnb3JcdTAwRURhcz9cIilcblx0Ly8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdH1cbmxldCBudWV2YUNsYXNpZmljYWNpb24gPSBmYWxzZVxuaWYodGFnQ2xhc2lmaWNhY2lvbj09XCJOdWV2b1wiKXtcblx0Y2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIG5vbWJyZSBkZSBsYSBudWV2YSBjbGFzaWZpY2FjaVx1MDBGM24gcXVlIHZhcyBhIGluZ3Jlc2FyP1wiLCBcIk1pQ2xhc2lmaWNhY2lcdTAwRjNuXCIsIHRydWUpXG5cdC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgIGlmIChjbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHR9XG5cdHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCB0cC5zeXN0ZW0ucHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCB0YWcgcXVlIHV0aWxpemFyYXMgcGFyYSBcIiArIGNsYXNpZmljYWNpb24gKyBcIj8uIE5vIHV0aWxpY2VzIGVzcGFjaW9zIGVuIGxhIGRlZmluaWNpXHUwMEYzbiBkZWwgdGFnLlwiLCBcIm51ZXZvVGFnXCIsIHRydWUpXG5cdC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHR9XG5cdG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWVcbi8vIC0tPiBWYWxpZGFyIHF1ZSBlbCBub21icmUgZGVsIGdydXBvIG5vIHNlYSBpZ3VhbCBhbCBub21icmUgZGUgbmluZ3VuYSBhcmVhIGRlIFZpZGEuXG59ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG5cdHRhZ0NsYXNpZmljYWNpb24gPSBcIlwiXG5cdGNsYXNpZmljYWNpb24gPSBcIlwiXHRcbn1lbHNlIHtcblx0bGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuXHRjbGFzaWZpY2FjaW9uID0gY2xhc2lmaWNhY2lvbkFYW2luZGljZV1cbn1cbmlmIChudWV2YUNsYXNpZmljYWNpb24pIHtcbiAgICBsZXQgbnVldm9DID0gY2xhc2lmaWNhY2lvbkFYLnBvcCgpOyAvLyBcdTAwREFsdGltYSBjbGFzaWZpY2FjaVx1MDBGM25cbiAgICBsZXQgbmluZ3Vub0MgPSBjbGFzaWZpY2FjaW9uQVgucG9wKCk7IC8vIFBlblx1MDBGQWx0aW1hIGNsYXNpZmljYWNpXHUwMEYzblxuXG4gICAgY2xhc2lmaWNhY2lvbkFYLnB1c2goY2xhc2lmaWNhY2lvbik7XG4gICAgY2xhc2lmaWNhY2lvbkFYLnB1c2gobmluZ3Vub0MpO1xuICAgIGNsYXNpZmljYWNpb25BWC5wdXNoKG51ZXZvQyk7XG5cbiAgICBhd2FpdCB1cGRhdGUoXCJ0aXR1bG9DbGFzaWZpY2FjaW9uQVhcIiwgY2xhc2lmaWNhY2lvbkFYLCBmaWxlQ2FtcG9zLmZpbGUucGF0aCk7XG5cdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG5cbiAgICBsZXQgbnVldm9UYWdDID0gdGFnc0NsYXNpZmljYWNpb25BWC5wb3AoKTsgLy8gXHUwMERBbHRpbW8gdGFnXG4gICAgbGV0IG5pbmd1bm9UYWdDID0gdGFnc0NsYXNpZmljYWNpb25BWC5wb3AoKTsgLy8gUGVuXHUwMEZBbHRpbW8gdGFnXG5cbiAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYLnB1c2godGFnQ2xhc2lmaWNhY2lvbik7XG4gICAgdGFnc0NsYXNpZmljYWNpb25BWC5wdXNoKG5pbmd1bm9UYWdDKTtcbiAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYLnB1c2gobnVldm9UYWdDKTtcblxuICAgIGF3YWl0IHVwZGF0ZShcInRhZ3NDbGFzaWZpY2FjaW9uQVhcIiwgdGFnc0NsYXNpZmljYWNpb25BWCwgZmlsZUNhbXBvcy5maWxlLnBhdGgpO1xufVxuXG5cbmlmICh0YWdDbGFzaWZpY2FjaW9uICE9IFwiXCIpe1xudGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uIFxufVxuaWYgKGNsYXNpZmljYWNpb24gPT0gXCJGZWVkYmFjayBTZW1hbmFsXCIpe1xuXHRkZXNjcmlwY2lvbiA9IFtdXG5cdGxldCBhdXggPSAwXG5cdGxldCBvdHJhXG5cdGRve1xuXHRcdGRlc2NyaXBjaW9uW2F1eF0gPSBhd2FpdCB0cC5zeXN0ZW0ucHJvbXB0KFwiRXNjcmliZSB0dSBmZWVkYmFjayBkZSBcIisgdGl0dWxvLCBcIlBcIiArIGF1eCwgZmFsc2UsIHRydWUpXG5cdFx0YXV4ICs9IDFcblx0XHRvdHJhID0gYXdhaXQgdHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsZmFsc2VdLCB0cnVlLCBcIlx1MDBCRkFncmVnYXIgb3RybyBwYXJyYWZvP1wiIClcblx0fXdoaWxlKG90cmEpXG59ZWxzZXtcblx0ZGVzY3JpcGNpb24gPSBhd2FpdCB0cC5zeXN0ZW0ucHJvbXB0KFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIHVuYSBkZXNjcmlwY2lcdTAwRjNuP1wiLCBcIiBcIiArIHRpdHVsbywgZmFsc2UsIHRydWUgKVxuXHQvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICBpZiAoZGVzY3JpcGNpb24gPT09IG51bGwpIHtcbiAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdH1cbn1cbmVzdGFkbyA9IGF3YWl0IHRwLnN5c3RlbS5zdWdnZXN0ZXIoW1wiXHVEODNEXHVERDM1IC0+IENvbXBsZXRhZG8gLSBJbmZvcm1hY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERkUyIC0+IEZpbmFsaXphZG9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBlamVjdWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIFwiQ3VhbCBlcyBlbCBlc3RhZG8gZGUgZXN0YSBhbm90YWNpXHUwMEYzbj9cIilcbi8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgIGlmIChlc3RhZG8gPT09IG51bGwpIHtcbiAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdH1cbi0lPlxuLS0tXG50aXBvOiBBbm90YWNpXHUwMEYzblxuaWRxOiA2XG5pZDogPCUgaWQgJT4gXG5pZE1hbnVhbDpcbmFsaWFzZXM6IFxuLSA8JXRpdHVsbyU+XG5kZXNjcmlwY2lvbjogPCUqaWYgKGNsYXNpZmljYWNpb24gIT0gXCJGZWVkYmFjayBTZW1hbmFsXCIpeyU+IDwlZGVzY3JpcGNpb24lPjwlKiB9ZWxzZXslPj4tICA8JSogZm9yIChsZXQgYT0wOyBhPGRlc2NyaXBjaW9uLmxlbmd0aDthKyspeyU+XG4gICA8JWRlc2NyaXBjaW9uW2FdJT4gXG48JSp9fSU+XG50ZW1hOiA8JWNsYXNpZmljYWNpb24lPiBcbmVzdGFkbzogPCUgZXN0YWRvICU+IFxuZmVjaGE6IDwlIHRwLmRhdGUubm93KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpICU+XG5ob3JhOiA8JSB0cC5kYXRlLm5vdyhcIkhIbW1cIiwgMCwpJT5cbnZhbG9yOiAgXG50YWdzOiA8JXRhZ0NsYXNpZmljYWNpb24lPiBcbmFzdW50bzogPCUqIGlmKGFzdW50byl7ICU+IFxuLSBcIltbPCVub21icmUlPl1dXCIgPCUqfSU+XG5yZWxhdGVkOlxuLS0tXG4jIFxcYFZJRVdbe2FsaWFzZXN9XVxcYCBcbj5bIWluZm9dLSBEZXNjcmlwY2lvblxuPlxcYFZJRVdbe2Rlc2NyaXBjaW9ufV1cXGBcbj4gXG5cblBsYW50aWxsYSBvY3VsdGFcbjwlKiBpZihjbGFzaWZpY2FjaW9uPT1cIk1lZGl0YWNpb25lcyBkZSBhbHRlcmFjaVx1MDBGM24gZGUgZnV0dXJvXCIpeyAtJT5cbiMjIE9iamV0aXZvIFxuXG4jIyBFdmVudG8gaW1hZ2luYXJpbyBxdWUgc2VndWlyXHUwMEVEYSBhbCBjdW1wbGltaWVudG8gZGVsIGRlc2VvXG5cbiMjIyBRdWUgZXMgbG8gcXVlIHNpZW50bz9cblxuIyMjIERldGFsbGVzIHBhcmEgbGEgdmlzdWFsaXphY2lcdTAwRjNuLlxuIyMgUHJlbWlzYXMgcXVlIGFsaW1lbnRlbiBlbCBkZXNlbyBjdW1wbGlkb1xuX0ZyYXNlcyBxdWUgYXBveWFuIG1pIG9iamV0aXZvX1xuIyMgVGFyZWFzIGRlIHNlZ3VpbWllbnRvIGRlIGxhIG1lZGl0YWNpXHUwMEYzblxuLSBbIF0gVG90YWwgZGUgbWVkaXRhY2lvbmVzIGRlIDwlIHRpdHVsbyAlPiBcblx0LSBbIF0gTWVkaXRhY2lcdTAwRjNuIGRlIDwlIHRpdHVsbyAlPiAjY3gvTWVkaXRhY2lvbiBcdUQ4M0RcdUREMDEgZXZlcnkgZGF5IHdoZW4gZG9uZSBcdUQ4M0RcdURDQzUgPCUgdHAuZGF0ZS5ub3coXCJZWVlZLU1NLUREXCIpICU+XG48JSp9ZWxzZSBpZihjbGFzaWZpY2FjaW9uID09XCJGZWVkYmFjayBTZW1hbmFsXCIpey0lPlxuIyMgRmVlZGJhY2tcblxcYFxcYFxcYGRhdGF2aWV3anNcbmR2LnBhcmFncmFwaChkdi5jdXJyZW50KCkuZGVzY3JpcGNpb24pXG5cXGBcXGBcXGBcbjwlKn1lbHNlIGlmKGNsYXNpZmljYWNpb24gPT1cIlZpZGVvIFlvdXR1YmVcIil7LSU+XG4jIyBWaWRlb1xuXG4+IFshdGlwXS0gQ29tbyBjcmVhciBlbCBsaW5rIGRlbCB2aWRlbz9cbj5Fc3RhbW9zIHV0aWxpemFuZG8gZWwgcGx1Z2luIFRpbWVTdGFtcCBOb3Rlcy4gUGFyYSBjcmVhciBlbCBsaW5rIGFxdVx1MDBFRCwgc29sYW1lbnRlIGRlYmVzIHBlZ2FyIGVsIGxpbmsgZGUgeW91dHViZSwgc2VsZWNjaW9uYXJsbyB5IHV0aWxpemFyIGVsIGNvbWFuZG8gT3BlbiBWaWRlbyBQbGF5ZXIsIG8gZWwgc2hvcnRjdXQgIFx1MjMyNSBeIE9cbiMjIyBUaW1lc3RhbXBzXG4+IFshaW1wb3J0YW50XS0gQ3JlYXIgbG9zIHRpbWVzdGFtcHMgZGVsIHZpZGVvXG4+IFBhcmEgY3JlYXIgbG9zIHRpbWVzdGFtcHMgZGVsIHZpZGVvLCBlbiBlbCBtb21lbnRvIGVuIGVsIHF1ZSBsbGVndWVzIGFsIHZpZGVvLCBzb2xvIGRlYmVzIHB1bHNhciBlbCBzaG9ydGN1dCBcdTIzMjUgXiAwLCBvIGJ1c2NhciBlbCBjb21hbmRvIEluc2VydCBUaW1lc3RhbXAuIFxuIFxuXG4jIyBDb21lbnRhcmlvcyBQZXJzb25hbGVzXG5cbiMjIEhpdG9zIGRlbCB2aWRlby5cblxuIyMgUmVzdW1lbiBJQVxuXG48JSp9ZWxzZSBpZihjbGFzaWZpY2FjaW9uID09XCJHcnVwbyBkZSBIb2phcyBkZSBUcmFiYWpvXCIpey0lPlxuXG4jIyBbW0NvbWVudGFyaW9zIGEgbGFzIHBsYW50aWxsYXMjVGVtYXMgcmVsYWNpb25hZG9zIGEgZXN0ZSBncnVwbyBkZSBob2phcyBkZSB0cmFiYWpvfFRlbWFzIHJlbGFjaW9uYWRvcyBhIGVzdGUgZ3J1cG8gZGUgaG9qYXMgZGUgdHJhYmFqbzpdXVxuXFxgXFxgXFxgZGF0YXZpZXdqc1xuY29uc3Qge2NyZWFyQXh9ID0gY3VzdG9tSlNcbmxldCBoaWpvcyA9IGR2LnBhZ2VzKCkuZmlsdGVyKGI9PiBkdi5mdW5jLmNvbnRhaW5zKGIuYXN1bnRvLCBkdi5jdXJyZW50KCkuZmlsZS5saW5rKSlcbmxldCB0b3RhbEhpam9zID0gXG5kdi50YWJsZShbXCJUZW1hXCIsXCJUaXBvXCIsXCJGZWNoYSBNb2RpZmljYWNpXHUwMEYzblwiLCBcIlBlbmRpZW50ZXNcIixcIkhpam9zXCJdLCBoaWpvcy5tYXAoYj0+IFtiLmZpbGUubGluaywgYi50ZW1hLCBiLmZlY2hhLCBiLmZpbGUudGFza3MuZmlsdGVyKGI9PiBiLnN0YXR1cyA9PSAnICcgfHwgYi5zdGF0dXMgPT0gJy8nKS5sZW5ndGgsIGNyZWFyQXgucGFnaW5hc0hpam9zKGR2LGIpLmxlbmd0aC0xXSkpXG5cXGBcXGBcXGBcblxuXG48JSp9JT5cblxuXG4jIEZpblxuLSBbL10gRmluYWxpemFkbyBlbCBkZXNhcnJvbGxvIGRlIEFub3RhY2lcdTAwRjNuIDwlaWQlPiAjY3gvQ29tcHV0YWRvci9Pcmdhbml6YXJOb3RhcyAgXG5Fc3RhZG8gZGUgbGEgbm90YTogIFxcYElOUFVUW2VzdGFkb05vdGFdWzplc3RhZG9dXFxgXG5cXGBcXGBcXGBkYXRhdmlld2pzXG5jb25zdCB7Y2FsbERWfSA9IGN1c3RvbUpTXG5jYWxsRFYuQ2FtYmlhclRpdHVsb0Rlc2NyaXBjaW9uKGR2KVxuXFxgXFxgXFxgXG4tLS1cblxcYFxcYFxcYGRhdGF2aWV3anNcbmNvbnN0IHtjYWxsRFZ9ID0gY3VzdG9tSlNcbmNhbGxEVi5DYXJydXNlbEFub3RhY2lvbmVzKGR2KVxuXFxgXFxgXFxgXG5cXGBcXGBcXGBkYXRhdmlld2pzXG5jb25zdCB7Y2FsbERWfSA9IGN1c3RvbUpTXG5jYWxsRFYuQm90b25lc1N0YW5kYXIoZHYpXG5cXGBcXGBcXGBcblxuYCIsICJpbXBvcnQge3BsYW50aWxsYX0gZnJvbSAnLi4vLi4vLi4vcGxhbnRpbGxhcy9Bbm90YWNpb25lcy9QbHQgLSBBbm90YWNpb25lcyc7XG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWFyUGxhbnRpbGxhKGNvbnRlbmlkbzogc3RyaW5nKTogUHJvbWlzZTxURmlsZT4ge1xuICAgIC8vIERlZmluZSBsYSBydXRhIHkgZWwgbm9tYnJlIGRlbCBhcmNoaXZvIHRlbXBvcmFsXG4gICAgY29uc3QgZm9sZGVyID0gJ1BsYW50aWxsYXMnO1xuICAgIGxldCBmaWxlbmFtZSA9IFwiQXJjaGl2byBEZSBQbGFudGlsbGFcIlxuICAgIGxldCBwYXRoVGVtcG9yYWwgPSBmb2xkZXIgKyBcIi9cIiArIGZpbGVuYW1lICsgXCIubWRcIjtcblxuICAgIC8vIENyZWEgZWwgYXJjaGl2byBlbiBsYSBiXHUwMEYzdmVkYSB5IGd1YXJkYSBlbCBhcmNoaXZvIGNyZWFkbyBlbiB1bmEgdmFyaWFibGVcbiAgICBjb25zdCBhcmNoaXZvQ3JlYWRvOiBURmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUocGF0aFRlbXBvcmFsLCBjb250ZW5pZG8pO1xuXG4gICAgLy8gQXF1XHUwMEVEIG5lY2VzaXRhclx1MDBFRGFzIHByb2Nlc2FyIGVsIGFyY2hpdm8gY29uIFRlbXBsYXRlciBzaSBlcyBuZWNlc2FyaW9cbiAgICAvLyBFc3RvIGRlcGVuZGUgZGUgY1x1MDBGM21vIFRlbXBsYXRlciBleHBvbmdhIHN1IGZ1bmNpb25hbGlkYWQgYSBvdHJvcyBwbHVnaW5zXG4gICAgLy8gUG9yIGVqZW1wbG8sIHNpIFRlbXBsYXRlciB0aWVuZSB1biBtXHUwMEU5dG9kbyBwYXJhIHByb2Nlc2FyIGFyY2hpdm9zLCBsbyB1c2FyXHUwMEVEYXMgYXF1XHUwMEVEXG5cbiAgICAvLyAoT3BjaW9uYWwpIEVsaW1pbmEgZWwgYXJjaGl2byBkZXNwdVx1MDBFOXMgZGUgcHJvY2VzYXJsbyBzaSBubyBkZXNlYXMgY29uc2VydmFybG9cbiAgICAvLyBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGFyY2hpdm9DcmVhZG8pO1xuXG4gICAgLy8gUmV0b3JuYSBlbCBhcmNoaXZvIGNyZWFkb1xuICAgIHJldHVybiBhcmNoaXZvQ3JlYWRvO1xufVxuIiwgImltcG9ydCB7Y3JlYXJDYXJwZXRhfSBmcm9tIFwiLi91dGlscy9jcmVhckNhcnBldGFcIlxuaW1wb3J0IHtjcmVhclBsYW50aWxsYX0gZnJvbSBcIi4vdXRpbHMvY3JlYXJQbGFudGlsbGFcIlxuaW1wb3J0IHtwbGFudGlsbGF9IGZyb20gXCIuLi8uLi9wbGFudGlsbGFzL0Fub3RhY2lvbmVzL1BsdCAtIEFub3RhY2lvbmVzXCJcbmltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG5pbXBvcnQge2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGV9IGZyb20gXCIuL3V0aWxzL2NyZWF0ZU5vdGVGcm9tVGVtcGxhdGVcIlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuXG5cbiAgICBjb25zdCBjb21hbmRvMSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiQ3JlYWNpb24tQ2FycGV0YVwiLFxuICAgICAgICBuYW1lOiBcIkNyZWFjaVx1MDBGM24gZGUgQ2FycGV0YVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGF3YWl0IGNyZWFyQ2FycGV0YSgnTWkgQ2FycGV0YSBkZSBwbHVnaW4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzEuaWQpO1xuXG4gICAgY29uc3QgY29tYW5kbzIgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLXRlbXBsYXRlXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYXIgdW4gYXJjaGl2byB0ZW1wbGF0ZVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgYXJjaGl2byA9IGF3YWl0IGNyZWFyUGxhbnRpbGxhKHBsYW50aWxsYSk7XG4gICAgICAgICAgICBpZiAoIWFyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMi5pZCk7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8zID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1hcmNoaXZvLXRlbXBsYXRlXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYXIgYXJjaGl2byBkZXNkZSB0ZW1wbGF0ZVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwbHVnaW5JZCA9ICd0ZW1wbGF0ZXItb2JzaWRpYW4nO1xuICAgICAgICAgICAgY29uc3QgaXNQbHVnaW5JbnN0YWxsZWQgPSBwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKTtcbiAgICAgICAgICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gcGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbcGx1Z2luSWRdO1xuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIHBsYW50aWxsYSBjb21vIFRGaWxlXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBcIlBsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXMubWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIGNhcnBldGEgY29tbyBURm9sZGVyXG4gICAgICAgICAgICBsZXQgZm9sZGVyT2JqID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghKGZvbGRlck9iaiBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkxhIGNhcnBldGEgZXNwZWNpZmljYWRhIG5vIGV4aXN0ZSBvIG5vIGVzIHVuYSBjYXJwZXRhLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNhbGlyIHNpIG5vIHNlIGVuY3VlbnRyYSBsYSBjYXJwZXRhIG8gbm8gZXMgdW5hIGNhcnBldGFcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gXCJ0b0RlZmluZVwiXG4gICAgICAgICAgICBsZXQgb3Blbk5vdGUgPSB0cnVlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZvID0gYXdhaXQgY3JlYXRlTm90ZUZyb21UZW1wbGF0ZShwbHVnaW4sIHRlbXBsYXRlLCBmb2xkZXJPYmosIGZpbGVOYW1lLCBvcGVuTm90ZSk7XG5cbiAgICAgICAgICAgIGlmICghYXJjaGl2bykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG8zLmlkKTtcblxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CKSByZXR1cm47XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gcG9kclx1MDBFRGFzIG1hbmVqYXIgbGEgXCJkZXNhY3RpdmFjaVx1MDBGM25cIiBkZSBjb21hbmRvcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5mb3JFYWNoKGNvbW1hbmRJZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBwbHVnaW4uYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgLy8gU29icmVzY3JpYmlyIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYS5cbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICAgICAgLy8gTyBzaW1wbGVtZW50ZSBlbGltaW5hciBlbCBjYWxsYmFjayBzaSBlc28gc2UgYWp1c3RhIGEgdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuLlxuICAgICAgICAgICAgLy8gZGVsZXRlIGNvbW1hbmQuY2FsbGJhY2s7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiIsICJpbXBvcnQge1RGaWxlLCBURm9sZGVyfSBmcm9tIFwib2JzaWRpYW5cIlxuLyoqXG4gKiBDcmVhIHVuYSBudWV2YSBub3RhIGEgcGFydGlyIGRlIHVuYSBwbGFudGlsbGEgdXRpbGl6YW5kbyBlbCBwbHVnaW4gVGVtcGxhdGVyLlxuICogQHBhcmFtIHRlbXBsYXRlclBsdWdpbiBSZWZlcmVuY2lhIGFsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGUgTGEgcGxhbnRpbGxhIGEgdXRpbGl6YXIsIHB1ZWRlIHNlciB1biBURmlsZSBvIGVsIHBhdGggY29tbyBzdHJpbmcuXG4gKiBAcGFyYW0gZm9sZGVyIEVsIGZvbGRlciBkb25kZSBzZSBjcmVhclx1MDBFMSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBmaWxlbmFtZSBFbCBub21icmUgZGVsIGFyY2hpdm8gZGUgbGEgbnVldmEgbm90YS4gT3BjaW9uYWwuXG4gKiBAcGFyYW0gb3Blbk5ld05vdGUgU2kgc2UgZGViZSBhYnJpciBsYSBudWV2YSBub3RhIHRyYXMgY3JlYXJsYS4gUG9yIGRlZmVjdG8gZXMgdHJ1ZS5cbiAqIEByZXR1cm5zIFByb21pc2UgcXVlIHJlc3VlbHZlIGEgVEZpbGUgc2kgbGEgbm90YSBmdWUgY3JlYWRhLCB1bmRlZmluZWQgZW4gY2FzbyBjb250cmFyaW8uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVOb3RlRnJvbVRlbXBsYXRlKFxuICAgIHBsdWdpbjogUGx1Z2luLCAvLyBFc3RhIGVzIHVuYSBzdXBvc2ljaVx1MDBGM24sIG5lY2VzaXRhclx1MDBFMXMgYWp1c3RhciBzZWdcdTAwRkFuIGNcdTAwRjNtbyBhY2NlZGFzIGEgVGVtcGxhdGVyIGVuIHR1IHBsdWdpblxuICAgIHRlbXBsYXRlOiBURmlsZSB8IHN0cmluZyxcbiAgICBmb2xkZXI/OiBURm9sZGVyLFxuICAgIGZpbGVuYW1lPzogc3RyaW5nLFxuICAgIG9wZW5OZXdOb3RlOiBib29sZWFuID0gdHJ1ZVxuKTogUHJvbWlzZTxURmlsZSB8IHVuZGVmaW5lZD4ge1xuICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGVsIHBsdWdpbiBUZW1wbGF0ZXIgZXN0XHUwMEUxIGluc3RhbGFkbyB5IGhhYmlsaXRhZG9cbiAgICBpZiAoIXBsdWdpbiB8fCAhcGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlNcbiAgICBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSBwbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICBcblxuICAgIGlmICghdHApIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICByZXR1cm47XG59XG4gICAgLy8gdGVtcGxhdGVGaWxlIHB1ZWRlIHNlciB1biBzdHJpbmcgbyBlbCB0ZmlsZSBvYnRlbmlkbyBkZSBlc3RhIG1hbmVyYSBvIGNvbiBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKClcbiAgICBkZWJ1Z2dlclxuICAgIGxldCB0ZW1wbGF0ZUZpbGUgPSB0cC5maWxlLmZpbmRfdGZpbGUodGVtcGxhdGUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IG5ld05vdGUgPSBhd2FpdCB0cC5maWxlLmNyZWF0ZV9uZXcodGVtcGxhdGVGaWxlLCBmaWxlbmFtZSwgb3Blbk5ld05vdGUsIGZvbGRlcik7XG4gICAgICAgIHJldHVybiBuZXdOb3RlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIGxhIG5vdGEgZGVzZGUgbGEgcGxhbnRpbGxhOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZWdpc3RlclJpYmJvbk1lbnUgfSBmcm9tIFwiLi91aS9yaWJib25CdXR0b25cIjtcblxuXG5leHBvcnQgZnVuY3Rpb24gYWN0aXZhdGVNb2R1bG9CdXNxdWVkYUF2YW56YWRhKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgcmVnaXN0ZXJSaWJib25NZW51KHBsdWdpbik7XG59IiwgImltcG9ydCB7IEFwcCwgTWVudSwgUGx1Z2luLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbCB9IGZyb20gXCIuL21vZGFsXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHRlbmVyIGVsIGltcG9ydCBjb3JyZWN0byBwYXJhIHR1IG1vZGFsXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBFc3RlIGVzIGVsIFx1MDBFRGNvbm8gZGVsIG1lblx1MDBGQSBlbiBlbCByaWJib24sIGNhbWJpYSBcImRpY2VcIiBwb3IgZWwgXHUwMEVEY29ubyBxdWUgcHJlZmllcmFzXG4gICAgcGx1Z2luLmFkZFJpYmJvbkljb24oXCJmb2xkZXItc2VhcmNoLTJcIiwgXCJCXHUwMEZBc3F1ZWRhIEF2YW56YWRhXCIsIGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgICAvLyBDcmVhciBlbCBtZW5cdTAwRkEgYWwgaGFjZXIgY2xpYyBlbiBlbCBcdTAwRURjb25vXG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudShwbHVnaW4uYXBwKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIG9wY2lvbmVzIGFsIG1lblx1MDBGQVxuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgVmlkYVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiXHUwMEMxcmVhcyBkZSBWaWRhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb3JyZWNjaVx1MDBGM246IEFzZWdcdTAwRkFyYXRlIGRlIGFicmlyIGVsIG1vZGFsIGNvcnJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgbmV3IFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwocGx1Z2luLmFwcCwgKGVzdGFkb1NlbGVjY2lvbmFkbykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFc3RhZG8gc2VsZWNjaW9uYWRvOlwiLCBlc3RhZG9TZWxlY2Npb25hZG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBjb250aW51YXIgY29uIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFuZWphciBlbCBlc3RhZG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTsgLy8gQ29ycmVnaWRvOiBBXHUwMEYxYWRpZG8gLm9wZW4oKSBwYXJhIGFicmlyIGVsIG1vZGFsXG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcdTAwQzFyZWFzIGRlIEludGVyXHUwMEU5c1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQW5vdGFjaVx1MDBGM25cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkFub3RhY2lcdTAwRjNuXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiQW5vdGFjaVx1MDBGM25cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFub3RhY2lcdTAwRjNuXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWN1cnNvIFJlY3VycmVudGVcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlY3Vyc28gUmVjdXJyZW50ZVwiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlY3Vyc28gUmVjdXJyZW50ZVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBHZXN0aVx1MDBGM24gRGlhcmlhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiR2VzdGlcdTAwRjNuIERpYXJpYVwiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gUmVnaXN0cm8gZGUgVGllbXBvXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3RybyBkZSBUaWVtcG9cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJSZWdpc3RybyBkZSBUaWVtcG9cIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gTW9zdHJhciBlbCBtZW5cdTAwRkEgZW4gbGEgcG9zaWNpXHUwMEYzbiBkZWwgY3Vyc29yXG4gICAgICAgIG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XG4gICAgfSk7XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgU2V0dGluZywgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IEZ1enp5Tm90ZVN1Z2dlc3RlciB9IGZyb20gXCIuLi9zZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyXCI7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBsYSBydXRhIGRlIGltcG9ydGFjaVx1MDBGM24gc2VhIGNvcnJlY3RhXG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgZXN0YWRvU2VsZWNjaW9uYWRvOiBzdHJpbmcgPSBcIlx1RDgzRFx1REZFMlwiOyAvLyBFc3RhZG8gcG9yIGRlZmVjdG8gY29tbyBlbW9qaSBkaXJlY3RhbWVudGVcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvblNlbGVjdEVzdGFkbzogKGVzdGFkbzogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TZWxlY3RFc3RhZG8gPSBvblNlbGVjdEVzdGFkbztcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkJ1c2NhciBcdTAwQzFyZWFzIGRlIFZpZGFcIiB9KTtcblxuICAgICAgICAvLyBVc2FuZG8gU2V0dGluZyBwYXJhIGNyZWFyIGVsIERyb3Bkb3duXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRXN0YWRvXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkVsaWdlIGVsIGVzdGFkbzpcIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9ucyh7IFwiXHVEODNEXHVERkUyXCI6IFwiVmVyZGVcIiwgXCJcdUQ4M0RcdUREMzVcIjogXCJBenVsXCIsIFwiXHVEODNEXHVERkUxXCI6IFwiQW1hcmlsbG9cIiwgXCJcdUQ4M0RcdUREMzRcIjogXCJSb2pvXCIgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5lc3RhZG9TZWxlY2Npb25hZG8pOyAvLyBFc3RhYmxlY2UgZWwgdmFsb3IgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4ge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KFwiQnVzY2FyXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGFzRmlsdHJhZGFzID0gYXdhaXQgdGhpcy5maWx0cmFyTm90YXNQb3JFc3RhZG9ZRGlyZWN0b3JpbyhcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgVmlkYVwiLCB0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vdGFzIGZpbHRyYWRhczpcIiwgbm90YXNGaWx0cmFkYXMubGVuZ3RoLCBub3Rhc0ZpbHRyYWRhcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgRnV6enlOb3RlU3VnZ2VzdGVyKHRoaXMuYXBwLCBub3Rhc0ZpbHRyYWRhcykub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZmlsdHJhciBub3RhcyBwb3IgZXN0YWRvIHkgZGlyZWN0b3Jpb1xuICAgIGFzeW5jIGZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKGRpcmVjdG9yaW86IHN0cmluZywgZXN0YWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlW10+IHtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCBub3Rhc0ZpbHRyYWRhcyA9IGFyY2hpdm9zLmZpbHRlcihhcmNoaXZvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBhcmNoaXZvLnBhdGg7XG4gICAgICAgICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aChkaXJlY3RvcmlvKSkgcmV0dXJuIGZhbHNlOyAvLyBGaWx0cmEgcG9yIGRpcmVjdG9yaW9cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZGF0b3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBwcm9jZXNhZG86XCIsIGFyY2hpdm8ucGF0aCk7XG4gICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgZXN0YWRvIGRlbCBmcm9udG1hdHRlciBjb2luY2lkZSBjb24gZWwgZXN0YWRvIHByb3BvcmNpb25hZG9cbiAgICAgICAgICAgIGlmIChkYXRvcy5mcm9udG1hdHRlciAmJiBkYXRvcy5mcm9udG1hdHRlci5lc3RhZG8gPT09IGVzdGFkbykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBpbmNsdWlkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIE9yZGVuYSBsYXMgbm90YXMgZmlsdHJhZGFzIHBvciBmZWNoYSBkZSBtb2RpZmljYWNpXHUwMEYzbiwgZGUgbGEgbVx1MDBFMXMgcmVjaWVudGUgYSBsYSBtXHUwMEUxcyBhbnRpZ3VhXG4gICAgICAgIG5vdGFzRmlsdHJhZGFzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWU7IC8vIERlc2NlbmRlbnRlXG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICByZXR1cm4gbm90YXNGaWx0cmFkYXM7XG4gICAgfVxuICAgIFxufVxuIiwgIi8vIEVuIGFsZ1x1MDBGQW4gbHVnYXIgZGUgdHUgbVx1MDBGM2R1bG8sIGNvbW8gc2VhcmNoL0Z1enp5Tm90ZVN1Z2dlc3Rlci50c1xuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcblxuZXhwb3J0IGNsYXNzIEZ1enp5Tm90ZVN1Z2dlc3RlciBleHRlbmRzIEZ1enp5U3VnZ2VzdE1vZGFsPFRGaWxlPiB7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHByaXZhdGUgbm90YXM6IFRGaWxlW10pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICB9XG5cbiAgICBnZXRJdGVtcygpOiBURmlsZVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YXM7XG4gICAgfVxuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogVEZpbGUpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gaXRlbS5iYXNlbmFtZTsgLy8gTyBjdWFscXVpZXIgb3RybyBmb3JtYXRvIHF1ZSBwcmVmaWVyYXNcbiAgICB9XG5cbiAgICBvbkNob29zZUl0ZW0oaXRlbTogVEZpbGUsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gQXF1XHUwMEVEIGRlZmluZXMgcXVcdTAwRTkgaGFjZXIgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW5hIG5vdGEuIFBvciBlamVtcGxvLCBhYnJpciBsYSBub3RhOlxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYsIGZhbHNlKTtcbiAgICAgICAgbGVhZi5vcGVuRmlsZShpdGVtKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBTdGF0dXNCYXIsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgU3RhdHVzQmFyRXh0ZW5zaW9uIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBzdGF0dXNCYXI6IFN0YXR1c0JhciB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIgPSB0aGlzLnBsdWdpbi5hZGRTdGF0dXNCYXJJdGVtKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG4gICAgICAgIC8vIFJlZ2lzdHJhciBldmVudG8gZmlsZS1vcGVuXG4gICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKFwiZmlsZS1vcGVuXCIsIChmaWxlOiBURmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKGZpbGUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBkZXNhY3RpdmFkbywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IG51bGw7XG4gICAgICAgIC8vIE5vIG5lY2VzaXRhcyBkZXN1c2NyaWJpciBlbCBldmVudG8gYXF1XHUwMEVEIHNpIHVzYXMgcmVnaXN0ZXJFdmVudCwgT2JzaWRpYW4gbG8gbWFuZWphIGF1dG9tXHUwMEUxdGljYW1lbnRlLlxuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlU3RhdHVzQmFyKGZpbGU/OiBURmlsZSkge1xuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IGZpbGUgfHwgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghY3VycmVudEZpbGUgfHwgIXRoaXMuc3RhdHVzQmFyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXR1c0Jhcj8uc2V0VGV4dCgnJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoY3VycmVudEZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gZmlsZUNhY2hlLmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFtdO1xuICAgICAgICB0aGlzLnN0YXR1c0Jhci5zZXRUZXh0KGFsaWFzZXMubGVuZ3RoID4gMCA/IGBBbGlhczogJHthbGlhc2VzWzBdfWAgOiAnTm8gQWxpYXMnKTtcbiAgICB9XG59XG4iLCAiLy8gTW9kdWxvUmVnaXN0cm9UaWVtcG8udHNcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZWdpc3RlclJpYmJvbk1lbnUsIGRlYWN0aXZhdGVSaWJib25NZW51IH0gZnJvbSBcIi4vcmliYm9uTWVudVwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcywgZGVhY3RpdmF0ZUNvbW1hbmRzIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZHVsb1JlZ2lzdHJvVGllbXBvIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgcmliYm9uIHNvbG8gc2UgcmVnaXN0cmUgc2kgYVx1MDBGQW4gbm8gaGEgc2lkbyByZWdpc3RyYWRvXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4ucmliYm9uQnV0dG9uUlQpIHtcbiAgICAgICAgICAgIHJlZ2lzdGVyUmliYm9uTWVudSh0aGlzLnBsdWdpbik7XG4gICAgICAgIH1cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVJpYmJvbk1lbnUodGhpcy5wbHVnaW4pO1xuICAgICAgICBkZWFjdGl2YXRlQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1lbnUsIFBsdWdpbiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGN1bXBsZUNvbmRpY2lvbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBFc3RlIGVzIGVsIFx1MDBFRGNvbm8gZGVsIG1lblx1MDBGQSBlbiBlbCByaWJib24sIGNhbWJpYSBcImRpY2VcIiBwb3IgZWwgXHUwMEVEY29ubyBxdWUgcHJlZmllcmFzXG4gICAgXG4gICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJUID0gcGx1Z2luLmFkZFJpYmJvbkljb24oXCJjbG9ja1wiLCBcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsIG1lblx1MDBGQSBhbCBoYWNlciBjbGljIGVuIGVsIFx1MDBFRGNvbm9cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KHBsdWdpbi5hcHApO1xuXG4gICAgICAgIC8vIEFncmVnYXIgb3BjaW9uZXMgYWwgbWVuXHUwMEZBXG4gICAgICAgIC8vIExhIG9wY2lcdTAwRjNuIGFob3JhLCBzb2xvIHNlIGFjdGl2YSBzaSBoYXkgYWxnXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZW4gZWplY3VjaVx1MDBGM24uXG4gICAgICAgIGlmIChhd2FpdCBjdW1wbGVDb25kaWNpb24ocGx1Z2luLmFwcCkpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiQWhvcmFcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBaG9yYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVnaXN0cmFyIFRpZW1wb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJSZWdpc3RyYXIgVGllbXBvXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3RyYXIgVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgIC8vIExhIG9wY2lcdTAwRjNuIERldGVuZXIgUmVnaXN0cm8sIHNvbG8gc2UgYWN0aXZhIHNpIGhheSBhbGdcdTAwRkFuIHJlZ2lzdHJvIGRlIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzbi5cbiAgICAgICAgaWYgKGF3YWl0IGN1bXBsZUNvbmRpY2lvbihwbHVnaW4uYXBwKSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJEZXRlbmVyIFJlZ2lzdHJvXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiRGV0ZW5lciBSZWdpc3Ryb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRldGVuZXIgUmVnaXN0cm9cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiVGFyZWFzIGVuIHByb2dyZXNvXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3Ryb3MgZGUgaG95XCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlJlZ2lzdHJvcyBkZSBob3lcIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvcyBkZSBob3lcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIE1vc3RyYXIgZWwgbWVuXHUwMEZBIGVuIGxhIHBvc2ljaVx1MDBGM24gZGVsIGN1cnNvclxuICAgICAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZIH0pO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZVJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBpZiAocGx1Z2luLnJpYmJvbkJ1dHRvblJUKSB7XG4gICAgICAgIHBsdWdpbi5yaWJib25CdXR0b25SVC5yZW1vdmUoKTtcbiAgICAgICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJUID0gbnVsbDtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCJcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGN1bXBsZUNvbmRpY2lvbihhcHA6IEFwcCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBcbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChcIkVzdHJ1Y3R1cmEvUmVnaXN0cm8gVGllbXBvXCIpKSB7XG4gICAgICAgICAgICAvLyBPYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gZGVzZGUgbWV0YWRhdGFDYWNoZVxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBmcm9udG1hdHRlciBjb250aWVuZSBlbCBjYW1wbyBcImVzdGFkb1wiIGNvbiBlbCB2YWxvciBcIlx1RDgzRFx1REZFMlwiXG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbiBleHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHA6IEFwcCk6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgXG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICBcbiAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKFwiU3Vic2lzdGVtYXMvUmVnaXN0cm8gVGllbXBvL1JlZ2lzdHJvc1wiKSkge1xuICAgICAgICAgICAgIC8vIE9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2byBkZXNkZSBtZXRhZGF0YUNhY2hlXG4gICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgXG4gICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgIH1cbiAgICAgXG4gICAgIHJldHVybiA7XG4gfVxuXG5cbiAvLyBTdXBvbmVtb3MgcXVlIGVzdGEgZnVuY2lcdTAwRjNuIHNlIHViaWNhclx1MDBFMSBlbiBhbGdcdTAwRkFuIGx1Z2FyIGRvbmRlIHB1ZWRhIGFjY2VkZXIgYSBgYXBwYCBkZSBPYnNpZGlhbi5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbikge1xuICAgIFxuICAgIGNvbnN0IGFjdGl2byA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBpZiAoIWFjdGl2bykge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gaGF5IHVuIGFyY2hpdm8gYWN0aXZvIHBhcmEgbGEgY3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBkZSB0aWVtcG8uIFNlIGRlc2NhcnRhIHBhcmEgbGEgY3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBkZSB0aWVtcG8uXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wb1xuICAgIGNvbnN0IGluZGljZSA9IHBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVnaXN0cm9UaWVtcG9cbiAgICBcbiAgICBsZXQgbWF4SWQgPSAwO1xuXG4gICAgLy8gT2J0XHUwMEU5biB0b2RvcyBsb3MgYXJjaGl2b3MgTWFya2Rvd25cbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAvLyBGaWx0cmEgcG9yIGxvcyBhcmNoaXZvcyBlbiBsYSBjYXJwZXRhIGRlc2VhZGFcbiAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSk7XG4gICAgIFxuICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgYnVzY2FyIGxvcyBJRHMgZW4gZWwgZnJvbnRtYXR0ZXJcbiAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KG1ldGFkYXRhLmlkKTtcbiAgICAgICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBFbCBwclx1MDBGM3hpbW8gSUQgZGlzcG9uaWJsZVxuICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcblxuICAgIC8vIEZvcm1hdGVhciBsYSBmZWNoYSBhY3R1YWxcbiAgICBjb25zdCBmZWNoYUNvbXBsZXRhID0gZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBhY3Rpdm8sXG4gICAgICAgIG5vbWJyZTogYWN0aXZvLmJhc2VuYW1lLFxuICAgICAgICBmb2xkZXIsXG4gICAgICAgIGluZGljZSxcbiAgICAgICAgaWQ6IG5leHRJZCxcbiAgICAgICAgZmVjaGE6IGZlY2hhQ29tcGxldGEsXG4gICAgICAgIGluZGljZV9EVkpTOiBgXCIke2luZGljZX1cImAsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICBjb25zdCBmZWNoYUxvY2FsID0gbmV3IERhdGUoZmVjaGEuZ2V0VGltZSgpIC0gb2Zmc2V0KTtcbiAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICBjb25zdCBkaWFzID0gWydEb21pbmdvJywgJ0x1bmVzJywgJ01hcnRlcycsICdNaVx1MDBFOXJjb2xlcycsICdKdWV2ZXMnLCAnVmllcm5lcycsICdTXHUwMEUxYmFkbyddO1xuICAgIGNvbnN0IGRpYVNlbWFuYSA9IGRpYXNbZmVjaGEuZ2V0RGF5KCldO1xuICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm86IGFueSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgdGFyZWFzQWN0aXZhcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVnaXN0cm8uZm9sZGVyKSkge1xuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICB0YXJlYXNBY3RpdmFzLnB1c2goeyBmaWxlLCBhbGlhc2VzOiBtZXRhZGF0YS5hbGlhc2VzIHx8IGZpbGUuYmFzZW5hbWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZWFzQWN0aXZhcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdGFyZWFBY3RpdmEgPSB0YXJlYXNBY3RpdmFzWzBdO1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBjb25zdCBkZXNlYURldGVuZXIgPSBhd2FpdCBtb3N0cmFyU3VnZXJlbmNpYShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBlc3RcdTAwRTEgY29ycmllbmRvLiBcdTAwQkZEZXNlYSBkZXRlbmVybGE/YCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGVzZWFEZXRlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYENyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLmApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YSwgYXBwKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gc2VndWlyXHUwMEUxIHJlZ2lzdHJcdTAwRTFuZG9zZS5gKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkhheSB1biBlcnJvciBjb24gbGEgY2FudGlkYWQgZGUgdGFyZWFzIGNvcnJpZW5kbyBlbiBlc3RlIG1vbWVudG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuIHwgdW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGxldCBzZWxlY2Npb25hZG8gPSBmYWxzZTsgLy8gUmFzdHJlYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cblxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChhcHApO1xuICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBtZW5zYWplIH0pO1xuXG4gICAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gU1x1MDBFRFxuICAgICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnU1x1MDBFRCcsXG4gICAgICAgIH0pO1xuICAgICAgICB5ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgICAgY29uc3Qgbm9CdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnTm8nLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBBY3R1YWxpemEgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBzZSBjaWVycmEgZWwgbW9kYWwgc2luIGhhY2VyIHVuYSBzZWxlY2NpXHUwMEYzbiwgcmVzdWVsdmUgY29uIHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgIHJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlZmluaXJUaXBvUmVnaXN0cm8ocmVnaXN0cm86IGFueSwgYXBwOiBBcHApIHtcbiAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7IC8vIFBhc28gYGFwcGAgY29tbyBhcmd1bWVudG9cbiAgICBsZXQgb3BjaW9uZXNUaXR1bG8sIHZhbG9yZXNPcGNpb247XG4gICAgaWYgKHRvdFRhcmVhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIlRhcmVhXCIsIFwiT3Ryb1wiXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJPdHJvXCJdO1xuICAgIH1cbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgIFxuICAgIGNvbnN0IG1vZGFsTWVudTEgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbiwgcGxhY2Vob2xkZXIpO1xuICAgIFxuICAgIC8vIEVzcGVyYSBhc2luY3JcdTAwRjNuaWNhbWVudGUgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYW50ZXMgZGUgY29udGludWFyLlxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IHNlbGVjdGlvbjtcbiAgICAgICAgLy8gUHJvY2VzYXIgbGEgc2VsZWNjaVx1MDBGM24gZGVsIHVzdWFyaW8gYXF1XHUwMEVELlxuICAgICAgICAvLyBFbCBjXHUwMEYzZGlnbyBzdWJzaWd1aWVudGUgZGVwZW5kZSBkZWwgdGlwbyBkZSByZWdpc3RybyBzZWxlY2Npb25hZG8uXG4gICAgICAgIHN3aXRjaChyZWdpc3Ryby50aXBvUmVnaXN0cm8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIGF3YWl0IGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcCwgcmVnaXN0cm8sIHRvdFRhcmVhcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFNpIGVsIHVzdWFyaW8gZWxpZ2UgXCJPdHJvXCIgbyBjdWFscXVpZXIgb3RyYSBvcGNpXHUwMEYzbi5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHJlZ2lzdHJvLnRpdHVsb0RlZmluaWRvICE9PSBcIk90cm9cIjsgLy8gQXN1bWUgcXVlIHNpIG5vIGVzIFwiT3Ryb1wiLCBlcyB1biBhc3VudG8gZXNwZWNcdTAwRURmaWNvLlxuICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIGFkaWNpb25hbCBwYXJhIG1hbmVqYXIgXCJPdHJvXCIgbyBjYXNvcyBubyBlc3BlY2lmaWNhZG9zLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhcyBlc3RhYmxlY2VyIHVuIHZhbG9yIHByZWRldGVybWluYWRvIHBhcmEgcmVnaXN0cm8uZGV0ZW5lciBhcXVcdTAwRUQuXG4gICAgfVxufVxuXG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoYXJjaGl2byA9PiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSk7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGNvbnRlbmlkby5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovZ20pIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgZXNwYWNpb3MgYWwgaW5pY2lvIGRlIGNhZGEgY29pbmNpZGVuY2lhIGFudGVzIGRlIGFncmVnYXJsYSBhbCBhcnJlZ2xvXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gY29pbmNpZGVuY2lhcy5tYXAodGFyZWEgPT4gdGFyZWEudHJpbSgpKTtcbiAgICAgICAgICAgIHRhcmVhc1BlbmRpZW50ZXMgPSB0YXJlYXNQZW5kaWVudGVzLmNvbmNhdCh0YXJlYXNMaW1waWFzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGFyZWFzUGVuZGllbnRlcztcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBlbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhhcHA6IEFwcCwgcmVnaXN0cm86IGFueSwgdGFyZWFzUGVuZGllbnRlczogc3RyaW5nW10pIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJFbGlnZSBsYSB0YXJlYSBxdWUgdmFzIGEgcmVnaXN0cmFyLlwiO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIHVuIGFycmVnbG8gZGUgcHJvbWVzYXMgdXNhbmRvIG1hcCBwYXJhIHBhc2FyIGNhZGEgdGFyZWEgcG9yIGxpbXBpYXJUZXh0b1RhcmVhXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCh0YXJlYSA9PiBsaW1waWFyVGV4dG9UYXJlYSh0YXJlYSkpO1xuXG4gICAgICAgIC8vIFVzYXIgUHJvbWlzZS5hbGwgcGFyYSBlc3BlcmFyIGEgcXVlIHRvZGFzIGxhcyB0YXJlYXMgc2VhbiBwcm9jZXNhZGFzXG4gICAgICAgIFByb21pc2UuYWxsKHByb21lc2FzTGltcGlhcykudGhlbih0YXJlYXNMaW1waWFzID0+IHtcbiAgICAgICAgICAgIC8vIEVuIGVzdGUgcHVudG8sIHRhcmVhc0xpbXBpYXMgZXMgdW4gYXJyZWdsbyBjb24gdG9kYXMgbGFzIHRhcmVhcyBkZXNwdVx1MDBFOXMgZGUgc2VyIGxpbXBpYWRhc1xuICAgICAgICAgICAgLy8gQWhvcmEgcHVlZGVzIHVzYXIgdGFyZWFzTGltcGlhcyBlbiBvdHJhIGZ1bmNpXHUwMEYzblxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtb2RhbE1lbnUgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCB0YXJlYXNMaW1waWFzLCB0YXJlYXNMaW1waWFzLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICBtb2RhbE1lbnUub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCkudGhlbihzZWxlY3Rpb24gPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gbGltcGlhclRleHRvVGFyZWEgKHNlbGVjdGlvbilcbiAgICAgICAgICAgICAgICAvL25ldyBOb3RpY2Uoc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgIC8vIE1hbmVqYXIgcG9zaWJsZXMgZXJyb3Jlc1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkh1Ym8gdW4gZXJyb3IgYWwgbGltcGlhciBsYXMgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hIHRvZG8gZGVzcHVcdTAwRTlzIGRlbCBwcmltZXIgc2FsdG8gZGUgbFx1MDBFRG5lYS5cbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdCgnXFxuJylbMF07XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgdGFncyBkZSBlc3RpbG8gTWFya2Rvd24uXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyNbXFx3LS9dKy9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGluY2x1eWVuZG8gcG9zaWJsZXMgZXNwYWNpb3MgYW50ZXMgbyBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgJycpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uICAgIFxuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICAgICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAgICAgXG5cbmFzeW5jIGZ1bmN0aW9uIGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YTogeyBmaWxlOiBURmlsZTsgdGl0dWxvOiBzdHJpbmcgfSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFyY2FyIGxhIHRhcmVhIGNvbW8gbm8gYWN0aXZhLCBwcm9iYWJsZW1lbnRlIGFjdHVhbGl6YW5kbyBzdSBmcm9udG1hdHRlclxuICAgIGNvbnNvbGUubG9nKGBEZXRlbmllbmRvIGxhIHRhcmVhOiAke3RhcmVhQWN0aXZhLnRpdHVsb31gKTtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBzZSBwb2RyXHUwMEVEYSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHBhcmEgZGV0ZW5lciBsYSB0YXJlYVxuICAgIC8vIEVzdGEgZXMgdW5hIHNpbXBsaWZpY2FjaVx1MDBGM247IGxhIGltcGxlbWVudGFjaVx1MDBGM24gcmVhbCBkZXBlbmRlclx1MDBFRGEgZGUgY1x1MDBGM21vIGVzdFx1MDBFOXMgbWFuZWphbmRvIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgIGNvbnN0IG5ld0NvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoJ2VzdGFkbzogXHVEODNEXHVERkUyJywgJ2VzdGFkbzogXHVEODNEXHVERDM1Jyk7IC8vIENhbWJpYXIgYSBlc3RhZG8gbm8gYWN0aXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeSh0YXJlYUFjdGl2YS5maWxlLCBuZXdDb250ZW50cyk7XG59XG5cblxuXG5cblxuXG4gXG4iLCAiLy8gSW1wb3J0YWNpXHUwMEYzbiBkZSBjbGFzZXMgbmVjZXNhcmlhcyBkZXNkZSBsYSBsaWJyZXJcdTAwRURhIGRlIE9ic2lkaWFuLlxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBEZWZpbmljaVx1MDBGM24gZGUgbGEgY2xhc2UgU2VsZWNjaW9uTW9kYWwgcXVlIGV4dGllbmRlIGRlIEZ1enp5U3VnZ2VzdE1vZGFsIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyBkZSBzdHJpbmdzLlxuZXhwb3J0IGNsYXNzIFNlbGVjY2lvbk1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XG4gICAgdGl0bGVzOiBzdHJpbmdbXTsgLy8gQXJyYXkgZGUgdFx1MDBFRHR1bG9zIHBhcmEgbGFzIG9wY2lvbmVzIGRlbCBtb2RhbC5cbiAgICB2YWx1ZXM6IHN0cmluZ1tdOyAvLyBBcnJheSBkZSB2YWxvcmVzIGFzb2NpYWRvcyBhIGNhZGEgdFx1MDBFRHR1bG8uXG4gICAgdmFsdWVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIE9iamV0byBwYXJhIG1hcGVhciB0XHUwMEVEdHVsb3MgYSB2YWxvcmVzLlxuICAgIHByaXZhdGUgc2VsZWNjaW9uSGVjaGE6IGJvb2xlYW4gPSBmYWxzZTsgLy8gRmxhZyBwYXJhIGRldGVybWluYXIgc2kgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLlxuXG4gICAgLy8gQ29uc3RydWN0b3IgZGUgbGEgY2xhc2UuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlczogc3RyaW5nW10sIHZhbHVlczogc3RyaW5nW10sIHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTsgLy8gTGxhbWFkYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBiYXNlIGNvbiBsYSBpbnN0YW5jaWEgZGUgQXBwIGRlIE9ic2lkaWFuLlxuICAgICAgICB0aGlzLnRpdGxlcyA9IHRpdGxlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdFx1MDBFRHR1bG9zLlxuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdmFsb3Jlcy5cbiAgICAgICAgLy8gQ3JlYWNpXHUwMEYzbiBkZWwgbWFwZW8gZGUgdFx1MDBFRHR1bG9zIGEgdmFsb3Jlcy5cbiAgICAgICAgdGhpcy52YWx1ZU1hcCA9IHRpdGxlcy5yZWR1Y2UoKGFjYywgdGl0bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhY2NbdGl0bGVdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcik7IC8vIEVzdGFibGVjaW1pZW50byBkZWwgdGV4dG8gZGUgcGxhY2Vob2xkZXIgcGFyYSBlbCBjYW1wbyBkZSBiXHUwMEZBc3F1ZWRhIGVuIGVsIG1vZGFsLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciBsb3MgXHUwMEVEdGVtcyAodFx1MDBFRHR1bG9zKSBxdWUgc2UgbW9zdHJhclx1MDBFMW4gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZXM7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIGVsIHRleHRvIHF1ZSBzZSBtb3N0cmFyXHUwMEUxIHBhcmEgY2FkYSBcdTAwRUR0ZW0gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcXVlIHNlIGxsYW1hIGFsIGNlcnJhciBlbCBtb2RhbC5cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICAvLyBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBzZSBoYXlhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbiwgc2UgcmVjaGF6YSBsYSBwcm9tZXNhLlxuICAgICAgICBpZiAoIXRoaXMuc2VsZWNjaW9uSGVjaGEpIHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KG5ldyBFcnJvcignTW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM24nKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gZGUgdW4gXHUwMEVEdGVtLlxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VsZWNjaW9uSGVjaGEgPSB0cnVlOyAvLyBNYXJjYXIgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgc3VwZXIuc2VsZWN0U3VnZ2VzdGlvbihpdGVtLCBldnQpOyAvLyBMbGFtYXIgYWwgbVx1MDBFOXRvZG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIGNsYXNlIGJhc2UgcGFyYSBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHF1ZSBzZSBsbGFtYSBhbCBlbGVnaXIgdW4gXHUwMEVEdGVtLCBkb25kZSBzZSByZXN1ZWx2ZSBsYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBhc29jaWFkbyBhbCBcdTAwRUR0ZW0gc2VsZWNjaW9uYWRvLlxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlTWFwW2l0ZW1dOyAvLyBPYnRlbmVyIGVsIHZhbG9yIGFzb2NpYWRvIGFsIFx1MDBFRHRlbSBzZWxlY2Npb25hZG8uXG4gICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7IC8vIFJlc29sdmVyIGxhIHByb21lc2EgY29uIGVsIHZhbG9yIHNlbGVjY2lvbmFkby5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFicmlyIGVsIG1vZGFsIHkgZXNwZXJhciBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuLCBkZXZvbHZpZW5kbyB1bmEgcHJvbWVzYSBjb24gZWwgdmFsb3Igc2VsZWNjaW9uYWRvLlxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlOyAvLyBHdWFyZGFyIGxhIGZ1bmNpXHUwMEYzbiByZXNvbHZlIGRlIGxhIHByb21lc2EgcGFyYSB1c2FybGEgYWwgc2VsZWNjaW9uYXIgdW4gXHUwMEVEdGVtLlxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7IC8vIEd1YXJkYXIgbGEgZnVuY2lcdTAwRjNuIHJlamVjdCBkZSBsYSBwcm9tZXNhIHBhcmEgdXNhcmxhIHNpIHNlIGNpZXJyYSBlbCBtb2RhbCBzaW4gc2VsZWNjaVx1MDBGM24uXG4gICAgICAgICAgICB0aGlzLm9wZW4oKTsgLy8gQWJyaXIgZWwgbW9kYWwuXG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIE1vZGFsLCBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgYnVzY2FyUmVnaXN0cm9zQWN0aXZvcywgY3JlYXJPYmpldG9SZWdpc3RybywgdmVyaWZpY2FyVGFyZWFzQWN0aXZhcywgZGVmaW5pclRpcG9SZWdpc3RybyB9IGZyb20gXCIuL3V0aWxzXCJcbmltcG9ydCB7bW9kYWxfQWhvcmF9IGZyb20gXCIuL21vZGFscy9tb2RhbF9BaG9yYVwiXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgY29uc3QgaWQxID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJyZWdpc3Ryb3MtZGUtdGllbXBvLWRlbC1kaWFcIixcbiAgICAgICAgbmFtZTogXCJSZWdpc3Ryb3MgZGUgdGllbXBvIGRlbCBkXHUwMEVEYVwiLFxuICAgICAgICBjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGFjdGl2ZUxlYWYudmlldy5maWxlPy5wYXRoIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVQYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL1BlcmlvZG9zL0RpYXJpby9cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGlyXHUwMEVEYSBsYSBsXHUwMEYzZ2ljYSBkZWwgY29tYW5kb1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3Ryb3MgZGUgdGllbXBvIGRlbCBkXHUwMEVEYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMS5pZCk7XG5cbiAgICBjb25zdCBpZDIgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImFob3JhLVJlZ2lzdHJvVGllbXBvXCIsXG4gICAgICAgIG5hbWU6IFwiVGFyZWEgYWN0aXZhIGVuIHJlZ2lzdHJvIGRlIHRpZW1wb1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYWN0aXZhID0gYXdhaXQgYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhwbHVnaW4uYXBwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFhY3RpdmEpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IG5vdGFzIGFjdGl2YXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIENyZWEgeSBtdWVzdHJhIGVsIG1vZGFsIHBlcnNvbmFsaXphZG8gY29uIGxhIG5vdGEgYWN0aXZhXG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gbmV3IG1vZGFsX0Fob3JhKHBsdWdpbi5hcHAsIGFjdGl2YSk7XG4gICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMi5pZCk7XG4gICAgXG4gICAgY29uc3QgaWQzID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1yZWdpc3Ryby10aWVtcG9cIixcbiAgICAgICAgbmFtZTogXCJDcmVhciBSZWdpc3RybyBkZSBUaWVtcG9cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgY3JlYXJPYmpldG9SZWdpc3RybyhwbHVnaW4pO1xuICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghcmVnaXN0cm8pIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHZlcmlmaWNhclRhcmVhc0FjdGl2YXMocmVnaXN0cm8sIHBsdWdpbi5hcHApXG4gICAgICAgICAgICBhd2FpdCBkZWZpbmlyVGlwb1JlZ2lzdHJvKHJlZ2lzdHJvLHBsdWdpbi5hcHApXG4gICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlIHNlIHRpZW5lIHVuYSBmdW5jaVx1MDBGM24gbyBtXHUwMEU5dG9kbyBwYXJhIHByb2Nlc2FyIGVsIG9iamV0byBgcmVnaXN0cm9gXG4gICAgICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGEgc2VyIGNyZWFyIHVuYSBudWV2YSBub3RhIGNvbiBsYSBpbmZvcm1hY2lcdTAwRjNuIGRlIGByZWdpc3Ryb2BcbiAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5wdXNoKGlkMy5pZCk7XG5cbn1cblxuXG4vLyBFc3RhIHBhcnRlIGRlbCBjXHUwMEYzZGlnbyBzZXJcdTAwRURhIGhpcG90XHUwMEU5dGljYSB5IGRlcGVuZGUgZGUgY1x1MDBGM21vIGdlc3Rpb25hcyBlbCBlc3RhZG8geSBlbCBjaWNsbyBkZSB2aWRhIGRlIGxvcyBjb21hbmRvcyBlbiB0dSBwbHVnaW4uXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgXG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVCkgcmV0dXJuO1xuICAgIC8vIEVqZW1wbG8gZGUgY1x1MDBGM21vIHBvZHJcdTAwRURhcyBtYW5lamFyIGxhIFwiZGVzYWN0aXZhY2lcdTAwRjNuXCIgZGUgY29tYW5kb3MuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQuZm9yRWFjaCgoY29tbWFuZElkOiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG4iLCAiaW1wb3J0IHsgTW9kYWwsIEFwcCwgVEZpbGUsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIG1vZGFsX0Fob3JhIGV4dGVuZHMgTW9kYWwge1xuICAgIGZpbGU6IFRGaWxlO1xuICAgIGFwcDogQXBwO1xuICAgIGhvcmFJbmljaW9JbnB1dDogSFRNTElucHV0RWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBmaWxlOiBURmlsZSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5maWxlID0gZmlsZTtcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuZmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgXCJBY3RpdmlkYWQgc2luIGFsaWFzXCI7XG4gICAgICAgIC8vIENvbnZlcnRpciBob3JhSW5pY2lvU3RyIGEgZm9ybWF0byBcIllZWVktTU0tRERUSEg6TU1cIiBwYXJhIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnN0IGhvcmFJbmljaW9TdHIgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmhvcmFJbmljaW8gPyB3aW5kb3cubW9tZW50KG1ldGFkYXRhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpLmZvcm1hdChcIllZWVktTU0tRERUSEg6bW1cIikgOiAnJztcblxuICAgICAgICAvLyBDb25maWd1cmEgZWwgdFx1MDBFRHR1bG8gZGVsIG1vZGFsIHkgbXVlc3RyYSBlbCBhbGlhcyBkZSBsYSB0YXJlYVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBgUmVnaXN0cm8gZGUgYWN0aXZpZGFkLmAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogYFRhcmVhOiBcIiR7YWxpYXNlc31cImAgfSk7XG4gICAgICAgIGlmIChob3JhSW5pY2lvU3RyKSB7XG4gICAgICAgICAgICAvLyBVc2FyIG1vbWVudCBwYXJhIHBhcnNlYXIgbGEgZmVjaGEgZGUgaW5pY2lvIHkgY2FsY3VsYXIgbGEgZGlmZXJlbmNpYVxuICAgICAgICAgICAgY29uc3QgaG9yYUluaWNpbyA9IHdpbmRvdy5tb21lbnQoaG9yYUluaWNpb1N0ciwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgICAgICBjb25zdCBhaG9yYSA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBhaG9yYS5kaWZmKGhvcmFJbmljaW8pO1xuICAgICAgICAgICAgY29uc3QgZHVyYWNpb24gPSB3aW5kb3cubW9tZW50LmR1cmF0aW9uKGRpZmYpO1xuICAgICAgICAgICAgY29uc3QgZGlmZkZvcm1hdHRlZCA9IGAke2R1cmFjaW9uLmhvdXJzKCl9aCAke2R1cmFjaW9uLm1pbnV0ZXMoKX1tYDtcblxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgRXN0YSBhY3RpdmlkYWQgbGxldmEgJHtkaWZmRm9ybWF0dGVkfSBlbiBlamVjdWNpXHUwMEYzbi5gIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBcIk5vIHNlIHB1ZG8gZGV0ZXJtaW5hciBlbCB0aWVtcG8gZGUgaW5pY2lvIGRlIGxhIGFjdGl2aWRhZC5cIiB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbnB1dCBwYXJhIGxhIGhvcmEgZGUgaW5pY2lvIGNvbiB0aXBvIGRhdGV0aW1lLWxvY2FsXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0hvcmEgZGUgaW5pY2lvOicgfSk7XG4gICAgICAgIHRoaXMuaG9yYUluaWNpb0lucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdkYXRldGltZS1sb2NhbCcsXG4gICAgICAgICAgICB2YWx1ZTogaG9yYUluaWNpb1N0clxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBjYW1iaW9zXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0d1YXJkYXIgY2FtYmlvcycgfSk7XG4gICAgICAgIHNhdmVCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuZ3VhcmRhckNhbWJpb3MoKTtcbiAgICB9XG5cbiAgICBhc3luYyBndWFyZGFyQ2FtYmlvcygpIHtcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvTG9jYWwgPSB0aGlzLmhvcmFJbmljaW9JbnB1dC52YWx1ZTtcbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGxhIG51ZXZhIGhvcmEgdGllbmUgdmFsb3IgYW50ZXMgZGUgaW50ZW50YXIgZm9ybWF0ZWFyXG4gICAgICAgIGlmICghbnVldmFIb3JhSW5pY2lvTG9jYWwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJQb3IgZmF2b3IsIHNlbGVjY2lvbmUgdW5hIGhvcmEgZGUgaW5pY2lvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbnZlcnRpciBkZSBcIllZWVktTU0tRERUSEg6TU1cIiBhIFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCJcbiAgICAgICAgY29uc3QgbnVldmFIb3JhSW5pY2lvID0gd2luZG93Lm1vbWVudChudWV2YUhvcmFJbmljaW9Mb2NhbCkuZm9ybWF0KFwiWVlZWS1NTS1ERCBkZGRkIEhIOm1tXCIpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGNvbnRlbmlkbyBhY3R1YWwgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb09yaWdpbmFsID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLmZpbGUpO1xuICAgICAgICAgICAgLy8gUmVlbXBsYXphciBsYSBsXHUwMEVEbmVhIGRlIGhvcmFJbmljaW8gY29uIGVsIG51ZXZvIHZhbG9yIGZvcm1hdGVhZG9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkb0FjdHVhbGl6YWRvID0gY29udGVuaWRvT3JpZ2luYWwucmVwbGFjZSgvKGhvcmFJbmljaW86ICkuKi8sIGAkMSR7bnVldmFIb3JhSW5pY2lvfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHdWFyZGFyIGxvcyBjYW1iaW9zIGVuIGVsIGFyY2hpdm9cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeSh0aGlzLmZpbGUsIGNvbnRlbmlkb0FjdHVhbGl6YWRvKTtcblxuICAgICAgICAgICAgLy8gQ2VycmFyIGVsIG1vZGFsIGRlc3B1XHUwMEU5cyBkZSBndWFyZGFyIGxvcyBjYW1iaW9zXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSG9yYSBkZSBpbmljaW8gYWN0dWFsaXphZGEgY29ycmVjdGFtZW50ZS5cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgZ3VhcmRhciBjYW1iaW9zIGVuIGxhIG5vdGE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBhbCBndWFyZGFyIGxvcyBjYW1iaW9zIGVuIGxhIG5vdGEuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwgIi8vIHNyYy9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHNcbmltcG9ydCB0eXBlIHsgUGx1Z2luTWFpblNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wbHVnaW5NYWluU2V0dGluZ3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGx1Z2luTWFpblNldHRpbmdzID0ge1xuICBtb2R1bG9SZWdpc3Ryb1RpZW1wbzogdHJ1ZSxcbiAgbW9kdWxvQWxpYXNTdGF0dXNCYXI6IHRydWUsXG4gIG1vZHVsb0Jhc2U6IHRydWUsXG4gIGZpbGVfY2FtcG9zQ2VudHJhbCA6XCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFNpc3RlbWEgQ2VudHJhbFwiLCBcbiAgZm9sZGVyX0Fub3RhY2lvbmVzOiBcIkFub3RhY2lvbmVzL05vdGFzXCIsXG4gIGluZGljZV9Bbm90YWNpb25lczogXCJBbm90YWNpb25lcy9JbmRpY2UgQW5vdGFjaW9uZXNcIixcbiAgZm9sZGVyX0FCbG9nOiBcIlN1YnNpc3RlbWFzL0FydGljdWxvcyBCbG9nL0FydGljdWxvc1wiLFxuICBpbmRpY2VfQUJsb2c6IFwiU3Vic2lzdGVtYXMvQXJ0aWN1bG9zIEJsb2cvSW5kaWNlIEFydGljdWxvcyBCbG9nXCIsXG4gIGZvbGRlcl9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9Db2RpZ29zXCIsXG4gIGluZGljZV9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9JbmRpY2UgRGVzYXJyb2xsb1wiLFxuICBmb2xkZXJfRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Fc3R1ZGlvL1RlbWFzXCIsXG4gIGluZGljZV9Fc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0VzdHVkaW8vSW5kaWNlIEVzdHVkaW9cIixcbiAgZm9sZGVyX1Byb3llY3Rvc0dURDogXCJTdWJzaXN0ZW1hcy9HVEQvUHJveWVjdG9zIEdURC9Qcm95ZWN0b3NcIixcbiAgaW5kaWNlX1Byb3llY3Rvc0dURDogXCJTdWJzaXN0ZW1hcy9HVEQvUHJveWVjdG9zIEdURC9JbmRpY2UgUHJveWVjdG9zIEdURFwiLFxuICBmb2xkZXJfUlNHVEQ6IFwiU3Vic2lzdGVtYXMvR1REL1JldmlzaW9uIFNlbWFuYWwvUmV2aXNpb25lc1wiLFxuICBpbmRpY2VfUlNHVEQ6IFwiU3Vic2lzdGVtYXMvR1REL1JldmlzaW9uIFNlbWFuYWwvSW5kaWNlIFJldmlzaW9uIFNlbWFuYWxcIixcbiAgZm9sZGVyX0xlY3R1cmFTZXNpb25lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL1Nlc2lvbmVzIGRlIExlY3R1cmEvU2VzaW9uZXNcIixcbiAgaW5kaWNlX0xlY3R1cmFTZXNpb25lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL1Nlc2lvbmVzIGRlIExlY3R1cmEvSW5kaWNlIFNlc2lvbmVzIExlY3R1cmFcIixcbiAgZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9MaWJyb3MvUmVzdW1lbmVzXCIsXG4gIGluZGljZV9MZWN0dXJhUmVzdW1lbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvTGlicm9zL0luZGljZSBSZXN1bWVuZXNcIixcbiAgZm9sZGVyX01lbnRvcmlhczogXCJTdWJzaXN0ZW1hcy9NZW50b3JpYXMvU2VzaW9uZXMgTWVudG9yaWFcIixcbiAgaW5kaWNlX01lbnRvcmlhczogXCJTdWJzaXN0ZW1hcy9NZW50b3JpYXMvSW5kaWNlIE1lbnRvcmlhc1wiLFxuICBmb2xkZXJfTWVyY2FkbzogXCJTdWJzaXN0ZW1hcy9NZXJjYWRvL0xpc3Rhc1wiLFxuICBpbmRpY2VfTWVyY2FkbzogXCJTdWJzaXN0ZW1hcy9NZXJjYWRvL0luZGljZSBNZXJjYWRvXCIsXG4gIGZvbGRlcl9Nb2R1bG9zU2lzdGVtYTogXCJTdWJzaXN0ZW1hcy9Nb2R1bG9zIFNpc3RlbWEgR2VzdGlvbi9Nb2R1bG9zXCIsXG4gIGluZGljZV9Nb2R1bG9zU2lzdGVtYTogXCJTdWJzaXN0ZW1hcy9Nb2R1bG9zIFNpc3RlbWEgR2VzdGlvbi9JbmRpY2UgTW9kdWxvc1wiLFxuICBmb2xkZXJfUGFnb3M6IFwiU3Vic2lzdGVtYXMvUGFnb3MvTm90YXNcIixcbiAgaW5kaWNlX1BhZ29zOiBcIlN1YnNpc3RlbWFzL1BhZ29zL0luZGljZSBQYWdvc1wiLFxuICBmb2xkZXJfUHJlc2VudGFjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHJlc2VudGFjaW9uZXMvTm90YXNcIixcbiAgaW5kaWNlX1ByZXNlbnRhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1ByZXNlbnRhY2lvbmVzL0luZGljZSBQcmVzZW50YWNpb25lc1wiLFxuICBmb2xkZXJfUHJveWVjdG9zUTogXCJTdWJzaXN0ZW1hcy9Qcm95ZWN0b3MgZGUgUS9Qcm95ZWN0b3NcIixcbiAgaW5kaWNlX1Byb3llY3Rvc1E6IFwiU3Vic2lzdGVtYXMvUHJveWVjdG9zIGRlIFEvSW5kaWNlIFByb3llY3RvcyBkZSBRXCIsXG4gIGZvbGRlcl9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvUGllemFzXCIsXG4gIGluZGljZV9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvSW5kaWNlIFB1YmxpY2FjaW9uZXNcIixcbiAgZm9sZGVyX1JlY2V0YXM6IFwiU3Vic2lzdGVtYXMvUmVjZXRhcy9SZWNldGFzXCIsXG4gIGluZGljZV9SZWNldGFzOiBcIlN1YnNpc3RlbWFzL1JlY2V0YXMvSW5kaWNlIFJlY2V0YXNcIixcbiAgZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXM6IFwiU3Vic2lzdGVtYXMvUmVjdXJzb3MgUmVjdXJyZW50ZXMvUmVjdXJzb3NcIixcbiAgaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXM6IFwiU3Vic2lzdGVtYXMvUmVjdXJzb3MgUmVjdXJyZW50ZXMvSW5kaWNlIFJlY3Vyc29zIFJlY3VycmVudGVzXCIsXG4gIGZvbGRlcl9SZWdpc3Ryb1RpZW1wbzogXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vUmVnaXN0cm9zXCIsXG4gIGluZGljZV9SZWdpc3Ryb1RpZW1wbzogXCJTdWJzaXN0ZW1hcy9SZWdpc3RybyBUaWVtcG8vSW5kaWNlIFJlZ2lzdHJvIFRpZW1wb1wiLFxuICAvLyBFc3RydWN0dXJhXG4gIGZvbGRlcl9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsXG4gIGluZGljZV9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhL0luZGljZSBBcmVhcyBkZSBWaWRhXCIsXG4gIG5hbWVGaWxlX0FyZWFzVmlkYSA6IFwiaW5kZXhBVlwiLFxuICBmb2xkZXJfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfQXJlYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvQXJlYXMgZGUgSW50ZXJlcy9JbmRpY2UgQXJlYXMgZGUgSW50ZXJlc1wiLFxuICBuYW1lRmlsZV9BcmVhc0ludGVyZXM6IFwiaW5kZXhBSVwiLFxuICBmb2xkZXJfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlc1wiLFxuICBpbmRpY2VfVGVtYXNJbnRlcmVzOiBcIkVzdHJ1Y3R1cmEvVGVtYXMgZGUgSW50ZXJlcy9JbmRpY2UgVGVtYXMgZGUgSW50ZXJlc1wiLFxufTtcblxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE1vZGFsLCBGdXp6eVN1Z2dlc3RNb2RhbCwgRnV6enlNYXRjaCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbFwiXG5pbXBvcnQge21lbnVPdHJvfSBmcm9tICcuL21lbnVPdHJvJ1xuXG5leHBvcnQgY2xhc3MgdXRpbHNBUEkge1xuICAgIHByaXZhdGUgbWVudU90cm86IG1lbnVPdHJvO1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy5tZW51T3RybyA9IG5ldyBtZW51T3RybyhwbHVnaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgXG4gICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgfVxuICAgICBcbiAgICAgcmV0dXJuIDtcbiAgICB9XG5cbiAvLyBTdXBvbmVtb3MgcXVlIGVzdGEgZnVuY2lcdTAwRjNuIHNlIHViaWNhclx1MDBFMSBlbiBhbGdcdTAwRkFuIGx1Z2FyIGRvbmRlIHB1ZWRhIGFjY2VkZXIgYSBgYXBwYCBkZSBPYnNpZGlhbi5cbiAgICBhc3luYyBjcmVhck9iamV0b1JlZ2lzdHJvKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhY3Rpdm8gPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZvKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gaGF5IHVuIGFyY2hpdm8gYWN0aXZvIHBhcmEgbGEgY3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBkZSB0aWVtcG8uIFNlIGRlc2NhcnRhIHBhcmEgbGEgY3JlYWNpXHUwMEYzbiBkZSByZWdpc3RybyBkZSB0aWVtcG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG9cbiAgICAgICAgY29uc3QgaW5kaWNlID0gcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wb1xuICAgICAgICBcbiAgICAgICAgbGV0IG1heElkID0gMDtcblxuICAgICAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAgICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoKGZpbGU6IHsgcGF0aDogc3RyaW5nOyB9KSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgYnVzY2FyIGxvcyBJRHMgZW4gZWwgZnJvbnRtYXR0ZXJcbiAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVsIHByXHUwMEYzeGltbyBJRCBkaXNwb25pYmxlXG4gICAgICAgIGNvbnN0IG5leHRJZCA9IG1heElkICsgMTtcblxuICAgICAgICAvLyBGb3JtYXRlYXIgbGEgZmVjaGEgYWN0dWFsXG4gICAgICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhY3Rpdm8sXG4gICAgICAgICAgICBub21icmU6IGFjdGl2by5iYXNlbmFtZSxcbiAgICAgICAgICAgIGZvbGRlcixcbiAgICAgICAgICAgIGluZGljZSxcbiAgICAgICAgICAgIGlkOiBuZXh0SWQsXG4gICAgICAgICAgICBmZWNoYTogZmVjaGFDb21wbGV0YSxcbiAgICAgICAgICAgIGluZGljZV9EVkpTOiBgXCIke2luZGljZX1cImAsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgICAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZGlhcyA9IFsnRG9taW5nbycsICdMdW5lcycsICdNYXJ0ZXMnLCAnTWlcdTAwRTlyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU1x1MDBFMWJhZG8nXTtcbiAgICAgICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gICAgfVxuXG5hc3luYyB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvOiBhbnksIGFwcDogQXBwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgXG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IHRhcmVhc0FjdGl2YXMgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHJlZ2lzdHJvLmZvbGRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgdGFyZWFzQWN0aXZhcy5wdXNoKHsgZmlsZSwgdGl0dWxvOiBtZXRhZGF0YS50aXR1bG8sIGFsaWFzZXM6IG1ldGFkYXRhLmFsaWFzZXMgfHwgZmlsZS5iYXNlbmFtZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICAgIGNvbnN0IGRlc2VhRGV0ZW5lciA9IGF3YWl0IHRoaXMubW9zdHJhclN1Z2VyZW5jaWEoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gZXN0XHUwMEUxIGNvcnJpZW5kby4gXHUwMEJGRGVzZWEgZGV0ZW5lcmxhP2ApO1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBpZiAoZGVzZWFEZXRlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYENyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLmApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChkZXNlYURldGVuZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGV0ZW5lclRhcmVhKHRhcmVhQWN0aXZhLCBhcHApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBzZWd1aXJcdTAwRTEgcmVnaXN0clx1MDBFMW5kb3NlLmApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID4gMSkge1xuICAgICAgICBuZXcgTm90aWNlKFwiSGF5IHVuIGVycm9yIGNvbiBsYSBjYW50aWRhZCBkZSB0YXJlYXMgY29ycmllbmRvIGVuIGVzdGUgbW9tZW50by5cIik7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gaGF5IG1cdTAwRTFzIHRhcmVhcyBjb3JyaWVuZG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgfVxufVxuXG4gICAgbW9zdHJhclN1Z2VyZW5jaWEobWVuc2FqZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBsZXQgc2VsZWNjaW9uYWRvID0gZmFsc2U7IC8vIEluZGljYSBzaSBzZSBoYSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM25cbiAgICBcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG4gICAgICAgICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiBtZW5zYWplIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGJvdG9uZXNcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnNDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoJ2RpdicpO1xuICAgIFxuICAgICAgICAgICAgLy8gRnVuY2lcdTAwRjNuIGF1eGlsaWFyIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyB5IGNlcnJhciBlbCBtb2RhbCBhZGVjdWFkYW1lbnRlXG4gICAgICAgICAgICBjb25zdCBoYWNlclNlbGVjY2lvbiA9IChzZWxlY2Npb246IGJvb2xlYW4pID0+IHtcbiAgICAgICAgICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBNYXJjYXIgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7IC8vIENlcnJhciBlbCBtb2RhbFxuICAgICAgICAgICAgICAgIHJlc29sdmUoc2VsZWNjaW9uKTsgLy8gUmVzb2x2ZXIgbGEgcHJvbWVzYSBjb24gbGEgc2VsZWNjaVx1MDBGM25cbiAgICAgICAgICAgIH07XG4gICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIFNcdTAwRURcbiAgICAgICAgICAgIGNvbnN0IHllc0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnU1x1MDBFRCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IGhhY2VyU2VsZWNjaW9uKHRydWUpKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEJvdFx1MDBGM24gTm9cbiAgICAgICAgICAgIGNvbnN0IG5vQnV0dG9uID0gYnV0dG9uc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdObycsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5vQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gaGFjZXJTZWxlY2Npb24oZmFsc2UpKTtcbiAgICBcbiAgICAgICAgICAgIG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxlY2Npb25hZG8pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgZWwgbW9kYWwgc2UgY2llcnJhIHNpbiBxdWUgc2UgaGF5YSBoZWNobyB1bmEgc2VsZWNjaVx1MDBGM24sIHJlY2hhemFyIGxhIHByb21lc2FcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIk1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgLy8gQWdyZWdhciBlc2N1Y2hhcyBkZSBldmVudG9zIGRlIHRlY2xhZG8gcGFyYSBwZXJtaXRpciBsYSBuYXZlZ2FjaVx1MDBGM24gY29uIGVsIHRlY2xhZG9cbiAgICAgICAgICAgIG1vZGFsLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGU6IHsga2V5OiBhbnk7IH0pID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGUua2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0Fycm93TGVmdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB5ZXNCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdBcnJvd1JpZ2h0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vQnV0dG9uLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRW50ZXInOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2ltdWxhIGNsaWMgZW4gZWwgYm90XHUwMEYzbiBlbmZvY2Fkb1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudD8uY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgLy8gRW5mb2NhciBpbmljaWFsbWVudGUgZWwgYm90XHUwMEYzbiAnU1x1MDBFRCcgcGFyYSBwZXJtaXRpciBsYSBuYXZlZ2FjaVx1MDBGM24gY29uIHRlY2xhZG8gZGVzZGUgZWwgaW5pY2lvXG4gICAgICAgICAgICB5ZXNCdXR0b24uZm9jdXMoKTtcbiAgICBcbiAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuXG4gICAgYXN5bmMgZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAgICAgICBjb25zdCB0b3RUYXJlYXMgPSBhd2FpdCB0aGlzLmVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwKTsgLy8gUGFzbyBgYXBwYCBjb21vIGFyZ3VtZW50b1xuICAgICAgICBcbiAgICAgICAgbGV0IG9wY2lvbmVzVGl0dWxvLCB2YWxvcmVzT3BjaW9uO1xuICAgICAgICBpZiAodG90VGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICAgICAgdmFsb3Jlc09wY2lvbiA9IFtcIk5vdGFcIiwgXCJUYXJlYVwiLCBcIk90cm9cIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcGNpb25lc1RpdHVsbyA9IFtyZWdpc3Ryby5ub21icmUsIFwiT3Ryb1wiXTtcbiAgICAgICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiT3Ryb1wiXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiXHUwMEJGU29icmUgcXVcdTAwRTkgZXMgZWwgcmVnaXN0cm8gZGUgdGllbXBvP1wiO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbW9kYWxNZW51MSA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIG9wY2lvbmVzVGl0dWxvLCB2YWxvcmVzT3BjaW9uLCBwbGFjZWhvbGRlcik7XG4gICAgICAgIFxuICAgICAgICAvLyBFc3BlcmEgYXNpbmNyXHUwMEYzbmljYW1lbnRlIGxhIHNlbGVjY2lcdTAwRjNuIGRlbCB1c3VhcmlvIGFudGVzIGRlIGNvbnRpbnVhci5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGF3YWl0IG1vZGFsTWVudTEub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICByZWdpc3Ryby50aXBvUmVnaXN0cm8gPSBzZWxlY3Rpb247XG4gICAgICAgICAgICAvLyBQcm9jZXNhciBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhcXVcdTAwRUQuXG4gICAgICAgICAgICAvLyBFbCBjXHUwMEYzZGlnbyBzdWJzaWd1aWVudGUgZGVwZW5kZSBkZWwgdGlwbyBkZSByZWdpc3RybyBzZWxlY2Npb25hZG8uXG4gICAgICAgICAgICBzd2l0Y2gocmVnaXN0cm8udGlwb1JlZ2lzdHJvKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5vdGFcIjpcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlOyAvLyBFbCB0XHUwMEVEdHVsbyBlcyBlbCBub21icmUgZGUgbGEgbm90YSBhY3R1YWwuXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgcGVybWl0aXIgYWwgdXN1YXJpbyBlbGVnaXIgdW5hIHRhcmVhIGVzcGVjXHUwMEVEZmljYS5cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwLCByZWdpc3RybywgdG90VGFyZWFzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcHVlc3RhID0gYXdhaXQgdGhpcy5tZW51T3Ryby5tZW51T3RybyhhcHAsIHJlZ2lzdHJvKTtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyZWdpc3RybywgcmVzcHVlc3RhKTsgLy8gdGl0dWxvLCBzaUFzdW50bywgbm9tYnJlXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgLy8gTWFuZWpvIGRlIGVycm9yZXMgbyBjaWVycmUgZGVsIG1vZGFsIHNpbiBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgZXN0YWJsZWNlciB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBwYXJhIHJlZ2lzdHJvLmRldGVuZXIgYXF1XHUwMEVELlxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBhc3luYyBlbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcDogQXBwKTogUHJvbWlzZTx7IHRhcmVhOiBzdHJpbmc7IGFyY2hpdm86IFRGaWxlIH1bXT4ge1xuICAgICAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogeyB0YXJlYTogc3RyaW5nOyBhcmNoaXZvOiBURmlsZSB9W10gPSBbXTtcbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoKGFyY2hpdm86IHsgcGF0aDogc3RyaW5nOyB9KSA9PiAhYXJjaGl2by5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSk7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc3QgY29pbmNpZGVuY2lhcyA9IGNvbnRlbmlkby5tYXRjaCgvXiAqLSBcXFtcXC9cXF0gLiovZ20pIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgLy8gUGFyYSBjYWRhIHRhcmVhIGVuY29udHJhZGEsIGNyZWEgdW4gb2JqZXRvIGNvbiBsYSB0YXJlYSBsaW1waWEgeSBlbCBhcmNoaXZvIGFjdHVhbCwgeSBsbyBhZ3JlZ2EgYWwgYXJyZWdsb1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzQ29uQXJjaGl2byA9IGNvaW5jaWRlbmNpYXMubWFwKCh0YXJlYTogc3RyaW5nKSA9PiB7ICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdGFyZWE6IHRhcmVhLnRyaW0oKSwgYXJjaGl2bzogYXJjaGl2byB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0YXJlYXNQZW5kaWVudGVzID0gdGFyZWFzUGVuZGllbnRlcy5jb25jYXQodGFyZWFzQ29uQXJjaGl2byk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmVhc1BlbmRpZW50ZXM7XG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnksIHRhcmVhc1BlbmRpZW50ZXM6IGFueSkge1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IFwiRWxpZ2UgbGEgdGFyZWEgcXVlIHZhcyBhIHJlZ2lzdHJhci5cIjtcbiAgICBcbiAgICAgICAgLy8gTWFwIHBhcmEgZXh0cmFlciB5IGxpbXBpYXIgc29sbyBsYXMgdGFyZWFzXG4gICAgICAgIGxldCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCgodGFyZWFPYmo6IHsgdGFyZWE6IHN0cmluZzsgfSkgPT4gdGhpcy5saW1waWFyVGV4dG9UYXJlYSh0YXJlYU9iai50YXJlYSkpO1xuICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRXNwZXJhIGEgcXVlIHRvZGFzIGxhcyBwcm9tZXNhcyBlbiBwcm9tZXNhc0xpbXBpYXMgc2UgcmVzdWVsdmFuXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWVzYXNMaW1waWFzKTtcbiAgICBcbiAgICAgICAgICAgIC8vIFJlY29uc3RydWlyIGxvcyBvYmpldG9zIGNvbiBsYXMgdGFyZWFzIGxpbXBpYXMgbWFudGVuaWVuZG8gbGEgcmVmZXJlbmNpYSBhbCBhcmNoaXZvXG4gICAgICAgICAgICBjb25zdCB0YXJlYXNMaW1waWFzQ29uQXJjaGl2byA9IHRhcmVhc1BlbmRpZW50ZXMubWFwKCh0YXJlYU9iajogeyBhcmNoaXZvOiBhbnk7IH0sIGluZGV4OiBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXJlYTogdGFyZWFzTGltcGlhc1tpbmRleF0sIC8vIFRhcmVhIGxpbXBpYVxuICAgICAgICAgICAgICAgICAgICBhcmNoaXZvOiB0YXJlYU9iai5hcmNoaXZvIC8vIFJlZmVyZW5jaWEgYWwgYXJjaGl2byBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXN0YXMgZG9zIGxcdTAwRURuZWFzIG1lIGdlbmVyYW4gdW4gYXJyZWdsbyBkZSBpbmRpY2VzIHBhcmEgc3VtaW5pc3RyYXIgZWwgdmFsb3IgYWwgbW9kYWwuIFxuICAgICAgICAgICAgY29uc3QgbG9uZ2l0dWQgPSB0YXJlYXNMaW1waWFzQ29uQXJjaGl2by5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBhcnJlZ2xvRGVJbmRpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogbG9uZ2l0dWQgfSwgKF8sIGluZGljZSkgPT4gaW5kaWNlKTtcblxuICAgICAgICAgICAgY29uc3QgbW9kYWxNZW51ID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgdGFyZWFzTGltcGlhc0NvbkFyY2hpdm8ubWFwKChiOiB7IHRhcmVhOiBhbnk7IH0pID0+IGIudGFyZWEpLCBhcnJlZ2xvRGVJbmRpY2VzLCBwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEVzcGVyYSBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuIGVuIGVsIG1vZGFsXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IGF3YWl0IG1vZGFsTWVudS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbGEgc2VsZWNjaVx1MDBGM24gY29ycmVzcG9uZGEgYWwgXHUwMEVEbmRpY2UgY29ycmVjdG8gZW4gdGFyZWFzTGltcGlhc0NvbkFyY2hpdm9cbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY2Npb24gPSB0YXJlYXNMaW1waWFzQ29uQXJjaGl2b1tzZWxlY3RlZEluZGV4XTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSBzZWxlY2Npb24udGFyZWE7IC8vIG8gY1x1MDBGM21vIGhheWFzIGRlY2lkaWRvIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gbGltcGlhXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8ubm9tYnJlID0gc2VsZWNjaW9uLmFyY2hpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBFc3RlIGJsb3F1ZSBjYXRjaCBtYW5lamEgZXJyb3JlcyBvIGNpZXJyZSBkZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEVzdGUgYmxvcXVlIGNhdGNoIG1hbmVqYSBlcnJvcmVzIGVuIGxhIGxpbXBpZXphIGRlIHRhcmVhc1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkh1Ym8gdW4gZXJyb3IgYWwgbGltcGlhciBsYXMgdGFyZWFzOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgbGltcGlhclRleHRvVGFyZWEodGl0dWxvOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgICAvLyBFbGltaW5hIHRvZG8gZGVzcHVcdTAwRTlzIGRlbCBwcmltZXIgc2FsdG8gZGUgbFx1MDBFRG5lYS5cbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdCgnXFxuJylbMF07XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgdGFncyBkZSBlc3RpbG8gTWFya2Rvd24uXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoLyNbXFx3LS9dKy9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCAnJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGluY2x1eWVuZG8gcG9zaWJsZXMgZXNwYWNpb3MgYW50ZXMgbyBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL15cXHMqLVxccypcXFtcXC9cXF1cXHMqLywgJycpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqbyBvIGFsZ1x1MDBGQW4gb3RybyBjYXJhY3RlciBzZWd1cm8uICAgIFxuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgJ18nKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXRvcm5hIGVsIHRleHRvIGxpbXBpbywgYWhvcmEgZW52dWVsdG8gZW4gdW5hIHByb21lc2EuXG4gICAgICAgICAgICByZXNvbHZlKHRleHRvTGltcGlvLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICBhc3luYyBjb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm86IGFueSwgYXBwOkFwcCl7XG4gICAgICAgIFxuICAgICAgICBsZXQgbm9tYnJlQmFzZSA9IGAke3JlZ2lzdHJvLmZvbGRlcn0vUlQgLSAke3JlZ2lzdHJvLmlkfWA7XG5cbiAgICAgICAgbGV0IGFsaWFzTGltcGlvID0gdGhpcy5saW1waWFyQWxpYXMocmVnaXN0cm8udGl0dWxvKTtcbiAgICAgICAgYWxpYXNMaW1waW8gPSBhbGlhc0xpbXBpby5sZW5ndGggPiAxOTUgPyBhbGlhc0xpbXBpby5zbGljZSgwLCAxOTUpIDogYWxpYXNMaW1waW87XG5cbiAgICAgICAgY29uc3QgYXJjaGl2b3MgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChhcmNoaXZvLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXNhbW9zIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGUgbGEgbm90YVxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRvcyA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvKTtcbiAgICAgICAgICAgICAgICAvLyBBc2VndXJhbW9zIHF1ZSBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIgY29udGVuZ2EgbG9zIGNhbXBvcyBuZWNlc2FyaW9zXG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRvcyAmJiBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdG9zLmZyb250bWF0dGVyLnRpdHVsbyA9PT0gcmVnaXN0cm8udGl0dWxvKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkU2VjID0gbWV0YWRhdG9zLmZyb250bWF0dGVyLmlkU2VjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWRTZWMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0cm9zQ29uTWlzbW9UaXR1bG8ucHVzaCh7IGFyY2hpdm8sIGlkU2VjIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIC8vIE9yZGVuYW1vcyBsb3MgcmVzdWx0YWRvcyBwb3IgaWRTZWMgZW4gb3JkZW4gZGVzY2VuZGVudGVcbiAgICAgICAgcmVnaXN0cm9zQ29uTWlzbW9UaXR1bG8uc29ydCgoYikgPT4gYi5pZFNlYywgXCJkZXNjXCIpO1xuXG5cbiAgICByZWdpc3Ryby5pZFNlYyA9IHJlZ2lzdHJvc0Nvbk1pc21vVGl0dWxvLmxlbmd0aCA+IDAgPyAocGFyc2VJbnQocmVnaXN0cm9zQ29uTWlzbW9UaXR1bG9bMF0uaWRTZWMpICsgMSkgOiAxO1xuICAgICAgICBcbiAgICBpZiAocmVnaXN0cm8uaWRTZWMgPiAxKSB7XG4gICAgICAgIGFsaWFzTGltcGlvICs9IGAgLSAke3JlZ2lzdHJvLmlkU2VjfWA7XG4gICAgfVxuXG4gICAgLy8gSW5pY2lhbGl6YSByZWdpc3Ryby5hbGlhc2VzIGNvbW8gdW4gYXJyZWdsbyB2YWNcdTAwRURvXG4gICAgcmVnaXN0cm8uYWxpYXNlcyA9IFtdO1xuXG4gICAgLy8gQWdyZWdhIGVsIGFsaWFzIGxpbXBpbyBjb24gZWwgcHJlZmlqb1xuICAgIHJlZ2lzdHJvLmFsaWFzZXMucHVzaChgUlQgLSAke2FsaWFzTGltcGlvfWApO1xuXG4gICAgaWYgKHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9PT0gXCJOb3RhXCIpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIE9idFx1MDBFOW4gZWwgYXJjaGl2byBhY3Rpdm9cbiAgICAgICAgY29uc3QgYXJjaGl2b0FjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFyY2hpdm9BY3Rpdm8pIHJldHVybjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGhheWEgdW4gYXJjaGl2byBhY3Rpdm9cblxuICAgICAgICAvLyBPYnRcdTAwRTluIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gYWN0aXZvXG4gICAgICAgIGNvbnN0IG1ldGFkYXRvc0FjdGl2byA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhcmNoaXZvQWN0aXZvKTtcblxuICAgICAgICAvLyBFeHRyYWUgYWxpYXNlcyBkZWwgZnJvbnRtYXR0ZXIsIGFzZWd1clx1MDBFMW5kb3RlIGRlIHF1ZSBleGlzdGFuIHkgYWNjZWRpZW5kbyBjb3JyZWN0YW1lbnRlXG4gICAgICAgIGNvbnN0IGFsaWFzZXNBY3Rpdm8gPSBtZXRhZGF0b3NBY3Rpdm8gJiYgbWV0YWRhdG9zQWN0aXZvLmZyb250bWF0dGVyID8gbWV0YWRhdG9zQWN0aXZvLmZyb250bWF0dGVyLmFsaWFzZXMgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gVmVyaWZpY2Egc2kgYWxpYXNlc0FjdGl2byBleGlzdGUgeSBkZXRlcm1pbmEgc2kgZXMgdW4gYXJyZWdsbyBvIHVuYSBjYWRlbmFcbiAgICAgICAgaWYgKGFsaWFzZXNBY3Rpdm8pIHtcbiAgICAgICAgICAgIGNvbnN0IGFkZGl0aW9uYWxBbGlhc2VzID0gQXJyYXkuaXNBcnJheShhbGlhc2VzQWN0aXZvKVxuICAgICAgICAgICAgICAgID8gYWxpYXNlc0FjdGl2b1xuICAgICAgICAgICAgICAgIDogW2FsaWFzZXNBY3Rpdm9dOyAvLyBDb252aWVydGUgYSBhcnJlZ2xvIHNpIGVzIHVuYSBjYWRlbmFcblxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkZSBjYWRhIGFsaWFzIGFkaWNpb25hbCBjb24gZWwgcHJlZmlqbyBcIlJUIC0gXCJcbiAgICAgICAgICAgIGFkZGl0aW9uYWxBbGlhc2VzLmZvckVhY2goYWxpYXMgPT4ge1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmFsaWFzZXMucHVzaChgUlQgLSAke2FsaWFzfWApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJlZ2lzdHJvLm5hbWVGaWxlID0gbm9tYnJlQmFzZTtcbiAgICB9XG4gICAgICAgIFxuICAgIGxpbXBpYXJBbGlhcyh0aXR1bG86c3RyaW5nKSB7XG4gICAgICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby5cbiAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgIGxldCB0aXR1bG9MaW1waW8gPSB0aXR1bG8ucmVwbGFjZShjYXJhY3RlcmVzTm9QZXJtaXRpZG9zLCAnXycpO1xuICAgIFxuICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgICAgIHRpdHVsb0xpbXBpbyA9IHRpdHVsb0xpbXBpby5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgXG4gICAgICAgIHJldHVybiB0aXR1bG9MaW1waW8udHJpbSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRldGVuZXJUYXJlYSh0YXJlYUFjdGl2YTogeyBmaWxlOiBURmlsZTsgdGl0dWxvOiBzdHJpbmcgfSwgYXBwOiBBcHApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBBcXVcdTAwRUQgaXJcdTAwRURhIGxhIGxcdTAwRjNnaWNhIHBhcmEgbWFyY2FyIGxhIHRhcmVhIGNvbW8gbm8gYWN0aXZhLCBwcm9iYWJsZW1lbnRlIGFjdHVhbGl6YW5kbyBzdSBmcm9udG1hdHRlclxuICAgIGNvbnNvbGUubG9nKGBEZXRlbmllbmRvIGxhIHRhcmVhOiAke3RhcmVhQWN0aXZhLnRpdHVsb31gKTtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBzZSBwb2RyXHUwMEVEYSBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyIHBhcmEgZGV0ZW5lciBsYSB0YXJlYVxuICAgIC8vIEVzdGEgZXMgdW5hIHNpbXBsaWZpY2FjaVx1MDBGM247IGxhIGltcGxlbWVudGFjaVx1MDBGM24gcmVhbCBkZXBlbmRlclx1MDBFRGEgZGUgY1x1MDBGM21vIGVzdFx1MDBFOXMgbWFuZWphbmRvIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGNvbnN0IGZpbGVDb250ZW50cyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgIGNvbnN0IG5ld0NvbnRlbnRzID0gZmlsZUNvbnRlbnRzLnJlcGxhY2UoJ2VzdGFkbzogXHVEODNEXHVERkUyJywgJ2VzdGFkbzogXHVEODNEXHVERDM1Jyk7IC8vIENhbWJpYXIgYSBlc3RhZG8gbm8gYWN0aXZvXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeSh0YXJlYUFjdGl2YS5maWxlLCBuZXdDb250ZW50cyk7XG4gICAgfVxuICAgICAgICAgICAgICAgIFxufSIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxcIjtcbmltcG9ydCB7ZnV6enlTZWxlY3RPckNyZWF0ZX0gZnJvbSBcIi4uLy4uL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZVwiO1xuXG5pbnRlcmZhY2UgR3J1cG9BY3RpdmlkYWQge1xuICAgIGdydXBvOiBzdHJpbmc7XG4gICAgYWN0aXZpZGFkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBtZW51T3RybyB7XG4gICAgXG4gICAgcGF0aENhbXBvczogc3RyaW5nID0gXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFJlZ2lzdHJvIFRpZW1wby5tZFwiO1xuICAgIHNlbGVjdGVkQWN0aXZpdHk6IHN0cmluZyA9XCJcIjtcbiAgICBzZWxlY3RlZEdyb3VwOiBzdHJpbmcgPSBcIlwiO1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmZ1enp5U2VsZWN0T3JDID0gbmV3IGZ1enp5U2VsZWN0T3JDcmVhdGUodGhpcy5hcHAsIHBsdWdpbik7XG4gICAgICB9XG4gICAgXG4gICAgICBhc3luYyBtZW51T3RybyAoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpe1xuICAgICAgICBjb25zdCBvcGNpb25lc090cm8gPSBbXCJQcm9waWFzXCIsIFwiQXJlYXMgZGUgVmlkYVwiLCBcIkFyZWFzIGRlIEludGVyXHUwMEU5c1wiLCBcIlByb3llY3RvcyBkZSBRXCIsIFwiUHJveWVjdG9zIEdURFwiLCBcIlRlbWEgZGUgSW50ZXJcdTAwRTlzXCIsIFwiUmVjdXJzbyBSZWN1cnJlbnRlXCJdIDtcbiAgICAgICAgY29uc3QgdmFsb3Jlc090cm8gPSBbXCJoYWJcIiwgXCJhY3RzQVZcIiwgXCJhY3RzQUlcIiwgXCJhY3RzUFFcIiwgXCJhY3RzUEdURFwiLCBcImFjdHNUSVwiLCBcImFjdHNSUlwiXTtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJPdHJvID0gXCJcdTAwQkZRdWUgY2F0ZWdvcmlhP1wiO1xuICAgICAgICBjb25zdCBtb2RhbE90cm8gPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc090cm8sIHZhbG9yZXNPdHJvLCBwbGFjZWhvbGRlck90cm8pO1xuICAgICAgICBsZXQgdGVtYU90cm86e2dydXBvOnN0cmluZzthY3RpdmlkYWQ6c3RyaW5nLG5vbWJyZTpzdHJpbmd9O1xuICAgICAgICBsZXQgc2lBc3VudG86IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbk90cm8gPSBhd2FpdCBtb2RhbE90cm8ub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBzd2l0Y2goc2VsZWN0aW9uT3Rybykge1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcImhhYlwiOlxuICAgICAgICAgICAgICAgICAgICB0ZW1hT3RybyA9IGF3YWl0IHRoaXMuaGFiaXR1YWwoYXBwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNBVlwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQUlcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1BRXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNQR1REXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNUSVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUlJcIjpcbiAgICAgICAgICAgICAgICAgICAgdGVtYU90cm8gPSBhd2FpdCB0aGlzLmVsZW1TRyhhcHAsc2VsZWN0aW9uT3Rybyk7IFxuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJidXNcIjpcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7dGl0dWxvOiB0ZW1hT3Ryby5hY3RpdmlkYWQgKyBcIiAvIFwiICsgdGVtYU90cm8uZ3J1cG8sIHNpQXN1bnRvICxub21icmU6IHRlbWFPdHJvLm5vbWJyZX1cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGhhYml0dWFsIChhcHA6IEFwcCl7XG4gICAgICAgICAgICBjb25zdCBncnVwb3MgPSBhd2FpdCB0aGlzLmdldEZyb250bWF0dGVyRmllbGQoYXBwLHRoaXMucGF0aENhbXBvcywgXCJ0ZW1hc1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdHNHcnVwb3MgPSBhd2FpdCB0aGlzLnJlc3VsdFlhbWwoYXBwLFwiYWN0c1RlbWFzXCIpXG4gICAgICAgICAgICAvLyBGaWx0cmFyIHkgcHJlcGFyYXIgbGFzIGFjdGl2aWRhZGVzIGV4aXN0ZW50ZXMgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhXG4gICAgICAgICAgICBsZXQgaXRlbXNGb3JTZWFyY2ggPSBhY3RzR3J1cG9zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBncnVwb3MuaW5jbHVkZXMoaXRlbS5ncnVwbykpIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtpdGVtLmFjdGl2aWRhZH0gLyAke2l0ZW0uZ3J1cG99YCwgLy8gQ2FtYmlhIGVsIG9yZGVuIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBpdGVtLmFjdGl2aWRhZCwgLy8gVXNhIGxhIHByb3BpZWRhZCAnYWN0aXZpZGFkJyBlbiBsdWdhciBkZSBpdGVtWzFdXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGl0ZW0uZ3J1cG8sXG4gICAgICAgICAgICAgICAgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGxldCBlbGVjY2lvbiA9IGF3YWl0IHRoaXMuZnV6enlTZWxlY3RPckMuc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXNGb3JTZWFyY2gsIGdydXBvcyk7XG4gICAgICAgICAgICBsZXQgb2JqRWxlY2Npb24gPSB7Z3J1cG86IGVsZWNjaW9uWzFdLCBhY3RpdmlkYWQ6IGVsZWNjaW9uWzBdLCBub21icmU6IFwiXCJ9O1xuICAgICAgICAgICAgcmV0dXJuIG9iakVsZWNjaW9uOyAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgbmluZ3VubyAoYXBwOiBBcHApe1xuXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyAgZWxlbVNHIChhcHA6IEFwcCwgdGlwbyA6IHN0cmluZyk6IFByb21pc2U8YW55PntcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2aWRhZGVzID0gYXdhaXQgdGhpcy5yZXN1bHRZYW1sKGFwcCwgdGlwbylcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVTRyA9IGF3YWl0IHRoaXMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShhcHAsdGlwbylcbiAgICAgICAgICAgIC8vIEV4dHJhZSBlbCBwcmltZXIgYWxpYXMgZGUgY2FkYSBub3RhIGVuY29udHJhZGEgeSBsb3MgYWxtYWNlbmEgZW4gdW4gYXJyYXlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZ3JvdXBzID0gYWN0aXZlU0cubWFwKHBhZ2UgPT4gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzID8gcGFnZS5mcm9udG1hdHRlci5hbGlhc2VzWzBdIDogbnVsbCkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICAgICAgICAgIC8vIEZpbHRyYXIgeSBwcmVwYXJhciBsYXMgYWN0aXZpZGFkZXMgZXhpc3RlbnRlcyBwYXJhIGxhIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgICAgIGxldCBpdGVtc0ZvclNlYXJjaCA9IGFjdGl2aWRhZGVzXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtKSA9PiBncm91cHMuaW5jbHVkZXMoaXRlbS5ncnVwbykpIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBgJHtpdGVtLmFjdGl2aWRhZH0gLyAke2l0ZW0uZ3J1cG99YCwgLy8gQ2FtYmlhIGVsIG9yZGVuIHNpIGVzIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgIGFjdGl2aXR5OiBpdGVtLmFjdGl2aWRhZCwgLy8gVXNhIGxhIHByb3BpZWRhZCAnYWN0aXZpZGFkJyBlbiBsdWdhciBkZSBpdGVtWzFdXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGl0ZW0uZ3J1cG8sXG4gICAgICAgICAgICAgICAgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIE1vc3RyYW1vcyBlbCBtb2RhbCBjb24gbGFzIG9wY2lvbmVzIGRlIGJcdTAwRkFzcXVlZGFcblxuICAgICAgICAgICAgbGV0IGVsZWNjaW9uID0gYXdhaXQgdGhpcy5mdXp6eVNlbGVjdE9yQy5zaG93RnV6enlTZWFyY2hNb2RhbChpdGVtc0ZvclNlYXJjaCwgZ3JvdXBzLCB0aXBvKTtcbiAgICAgICAgICAgIGNvbnN0IGZvdW5kRWxlbWVudCA9IGFjdGl2ZVNHLmZpbmQoYiA9PiBiLmZyb250bWF0dGVyLmFsaWFzZXNbMF0gPT09IGVsZWNjaW9uWzFdKTtcbiAgICAgICAgICAgIC8vIFNpIHNlIGVuY3VlbnRyYSBlbCBlbGVtZW50bywgZGV2b2x2ZXIgZnJvbnRtYXR0ZXIuYWxpYXNlc1sxXVxuICAgICAgICAgICAgbGV0IGFsaWFzID0gZm91bmRFbGVtZW50Py5maWxlLnBhdGg7XG4gICAgICAgICAgICBsZXQgb2JqRWxlY2Npb24gPSB7Z3J1cG86IGVsZWNjaW9uWzFdLCBhY3RpdmlkYWQ6IGVsZWNjaW9uWzBdLCBub21icmU6IGFsaWFzfTtcbiAgICAgICAgICAgIHJldHVybiBvYmpFbGVjY2lvbjsgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgYnVzY2FyIChhcHA6IEFwcCl7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jICByZXN1bHRZYW1sKGFwcDogQXBwLCB0ZW1hOiBzdHJpbmcpOiBQcm9taXNlPEdydXBvQWN0aXZpZGFkW10+IHtcbiAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBhcmNoaXZvIHBvciBzdSBydXRhXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFjY2VkZSBhbCBmcm9udCBtYXR0ZXIgKFlBTUwpIGRlbCBhcmNoaXZvIHkgb2J0aWVuZSBlbCBhcnJlZ2xvIGJhc2FkbyBlbiBlbCB0ZW1hXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFycmVnbG9SZXN1bHQgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/Llt0ZW1hXSB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb25zdHJ1eWUgZWwgYXJyZWdsbyBkZSBvYmpldG9zIHJlc3VsdGFkbyBiYXNhZG8gZW4gbGEgZXN0cnVjdHVyYSBkZSBHcnVwb0FjdGl2aWRhZFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRhZG86IEdydXBvQWN0aXZpZGFkW10gPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvUmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyZWdsb1Jlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0YWRvLnB1c2goeyBncnVwbzogaXRlbVswXSwgYWN0aXZpZGFkOiBpdGVtWzFdIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbWFuZWphclx1MDBFRGFzIGVsIGVycm9yIGNvbW8gc2VhIGFwcm9waWFkbyBwYXJhIHR1IGFwbGljYWNpXHUwMEYzblxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZXZ1ZWx2ZSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gc2kgbm8gc2UgZW5jdWVudHJhIGVsIGFyY2hpdm8gbyBzaSBvY3VycmUgY3VhbHF1aWVyIG90cm8gcHJvYmxlbWFcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGdldEZyb250bWF0dGVyRmllbGQoYXBwOiBBcHAsIGZpbGU6IHN0cmluZywgZmllbGQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlKTtcbiAgICAgICAgICAgICAgICBpZiAodEZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0RmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZyb250bWF0dGVyICYmIGZyb250bWF0dGVyLmhhc093blByb3BlcnR5KGZpZWxkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGZyb250bWF0dGVyW2ZpZWxkXTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmllbGRWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IGZpZWxkVmFsdWUgPT09IG51bGwgfHwgZmllbGRWYWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWwgY2FtcG8gZXN0XHUwMEUxIHZhY1x1MDBFRG8gbyBubyBleGlzdGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBjb25zdWx0YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlOyAvLyBEZXZ1ZWx2ZSBlbCB2YWxvciBkZWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRWwgY2FtcG8gbm8gZXhpc3RlIGVuIGVsIGZyb250bWF0dGVyLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBhcmNoaXZvIG5vIGV4aXN0ZSBvIG5vIGVzIHVuIGFyY2hpdm8gZGUgdGV4dG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNvbnN1bHRhciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBPIG1hbmVqYXIgc2VnXHUwMEZBbiBsbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcblxuICAgICAgICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gICAgICAgIGFzeW5jIGZpbmRNYWluRmlsZXNXaXRoU3RhdGUoYXBwLCB0aXBvKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXNUaXBvID0ge1xuICAgICAgICAgICAgICAgIGFjdHNBVjoge1xuICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhLFxuICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IHRydWUsIFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWVGaWxlX0FyZWFzVmlkYVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c0FJOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzSW50ZXJlcyxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uYW1lRmlsZV9BcmVhc0ludGVyZXNcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1BROiB7XG4gICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNQR1REOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzVEk6IHtcbiAgICAgICAgICAgICAgICAgICAgICBmb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UZW1hc0ludGVyZXMsXG4gICAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1JSOiB7XG4gICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMsXG4gICAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgLy8gUHVlZGVzIGNvbnRpbnVhciBhXHUwMEYxYWRpZW5kbyBtXHUwMEUxcyBjYXNvcyBhcXVcdTAwRURcbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSB0aXBvIGVzIHVuYSBwcm9waWVkYWQgdlx1MDBFMWxpZGEgYW50ZXMgZGUgZGVzZXN0cnVjdHVyYXJcbiAgICAgICAgICAgICBpZiAocHJvcGVydGllc1RpcG8uaGFzT3duUHJvcGVydHkodGlwbykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGZvbGRlciwgc2FtZU5hbWUsIG5hbWVGaWxlIH0gPSBwcm9wZXJ0aWVzVGlwb1t0aXBvXTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlc0luRm9sZGVyID0gYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZXNXaXRoRnJvbnRtYXR0ZXIgPSBbXTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzSW5Gb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChzYW1lTmFtZSAmJiBmaWxlLmJhc2VuYW1lID09PSBuYW1lRmlsZSkgfHwgIXNhbWVOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YS5mcm9udG1hdHRlciAmJiBtZXRhZGF0YS5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKHsgZmlsZTogZmlsZSwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhLmZyb250bWF0dGVyIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlc1dpdGhGcm9udG1hdHRlcjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZWxlY2NpXHUwMEYzbiBubyByZWNvbm9jaWRhOlwiLCB0aXBvKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIE1hbmVqYXIgc2VnXHUwMEZBbiB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM25cbiAgICAgICAgICAgIH1cbiAgICAgICAgIH1cblxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuL3NlbGVjY2lvbk1vZGFsXCI7XG5cbmV4cG9ydCBjbGFzcyBmdXp6eVNlbGVjdE9yQ3JlYXRlIHtcbiAgYXBwOiBBcHA7XG4gIHBsdWdpbjogUGx1Z2luO1xuICBwYXRoQ2FtcG9zOiBzdHJpbmcgPSBcIkVzdHJ1Y3R1cmEvQ2FtcG9zIFNpc3RlbWEgR2VzdGlvbi9DYW1wb3MgUmVnaXN0cm8gVGllbXBvLm1kXCI7XG5cbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUGx1Z2luKSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gIH1cblxuICBjcmVhdGVNb2RhbCgpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbW9kYWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJmdXp6eVNlYXJjaE1vZGFsXCIpO1xuICAgIG1vZGFsLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuICAgIG1vZGFsLnN0eWxlLnRvcCA9IFwiNTAlXCI7XG4gICAgbW9kYWwuc3R5bGUubGVmdCA9IFwiNTAlXCI7XG4gICAgbW9kYWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUoLTUwJSwgLTUwJSlcIjtcbiAgICBtb2RhbC5zdHlsZS56SW5kZXggPSBcIjEwMDBcIjtcbiAgICBtb2RhbC5zdHlsZS5wYWRkaW5nID0gXCIyMHB4XCI7XG4gICAgbW9kYWwuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ3aGl0ZVwiO1xuICAgIG1vZGFsLnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkICNjY2NcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjVweFwiO1xuICAgIG1vZGFsLnN0eWxlLmJveFNoYWRvdyA9IFwiMCA0cHggNnB4IHJnYmEoMCwwLDAsLjEpXCI7XG4gICAgbW9kYWwuc3R5bGUud2lkdGggPSBcIjMwMHB4XCI7XG4gIFxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjbG9zZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiXHUwMEQ3XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUudG9wID0gXCI1cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5yaWdodCA9IFwiNXB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gXCIxNnB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuZm9udFdlaWdodCA9IFwiYm9sZFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSBcIjBweCA0cHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjEwcHhcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5vdXRsaW5lID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm94U2hhZG93ID0gXCJub25lXCI7XG4gICAgY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLnJlbW92ZSgpO1xuICBcbiAgICBtb2RhbC5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG4gICAgcmV0dXJuIG1vZGFsO1xuICB9XG5cbiAgZmlsdGVySXRlbXMocXVlcnk6IHN0cmluZywgaXRlbXM6IGFueVtdKSB7XG4gICAgcmV0dXJuIGl0ZW1zLmZpbHRlcigoaXRlbTogeyB2YWx1ZTogc3RyaW5nOyB9KSA9PlxuICAgICAgaXRlbS52YWx1ZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHModGlwbzogc3RyaW5nIHwgbnVtYmVyLCBzZWxlY3RlZFZhbHVlOiBhbnksIHNlbGVjdGVkR3JvdXA6IGFueSkge1xuICAgIHRyeSB7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250bWF0dGVyOiB7IFt4OiBzdHJpbmddOiBhbnlbXTsgfSkgPT4ge1xuICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSAnYWN0c1RlbWFzJyBlcyBlbCBjYW1wbyBhIG1vZGlmaWNhclxuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBsZXQgY3VycmVudEFjdHMgPSBmcm9udG1hdHRlclt0aXBvXSB8fCBbXTtcbiAgICAgICAgICAgIGxldCBuZXdWYWx1ZUZvckFjdHMgPSBbLi4uY3VycmVudEFjdHMsIFtzZWxlY3RlZEdyb3VwLCBzZWxlY3RlZFZhbHVlXV07XG4gICAgICAgICAgICBmcm9udG1hdHRlclt0aXBvXSA9IG5ld1ZhbHVlRm9yQWN0cztcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gIGFzeW5jIHNob3dGdXp6eVNlYXJjaE1vZGFsKGl0ZW1zOiBhbnksIGdyb3VwczogYW55W10sIHRpcG86IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBzZWxlY3RlZFZhbHVlID0gXCJcIjsgLy8gVmFyaWFibGUgcGFyYSBndWFyZGFyIGxhIG9wY2lcdTAwRjNuIHNlbGVjY2lvbmFkYSBvIGluZ3Jlc2FkYSBwb3IgZWwgdXN1YXJpb1xuICAgICAgICBsZXQgc2VsZWN0ZWRHcm91cCA9IFwiXCI7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5jcmVhdGVNb2RhbCgpO1xuICAgICAgXG5cbiAgICAgICAgLy8gQ3JlYXIgeSBjb25maWd1cmFyIGVsIHRcdTAwRUR0dWxvIGRlbCBtb2RhbFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBcIkJ1c2NhIG8gY3JlYSB0dSBhY3RpdmlkYWRcIjtcbiAgICAgICAgdGl0bGUuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgLy8gQ2VudHJhciBlbCB0XHUwMEVEdHVsbywgYWp1c3RhIGxvcyBlc3RpbG9zIHNlZ1x1MDBGQW4gc2VhIG5lY2VzYXJpb1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZCh0aXRsZSk7XG5cbiAgICAgICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0LnR5cGUgPSBcInRleHRcIjtcbiAgICAgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBcIkVzY3JpYmUgdHUgYWN0aXZpZGFkLi4uXCI7XG4gICAgICAgIC8vIEVzdGFibGVjZSBlbCBhbmNobyBkZWwgaW5wdXQgYSB1biBwb3JjZW50YWplIGRlbCBjb250ZW5lZG9yIHBhcmEgaGFjZXJsbyBtXHUwMEUxcyBhbmNoby5cbiAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSBcIjgwJVwiO1xuICAgICAgICAvLyBDZW50cmFyIGVsIHRleHRvIGRlbnRybyBkZWwgaW5wdXRcbiAgICAgICAgaW5wdXQuc3R5bGUudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICAgICAgLy8gQ2VudHJhciBlbCBpbnB1dCBkZW50cm8gZGVsIG1vZGFsIChzaSBlbCBtb2RhbCB0aWVuZSB1biBkaXNwbGF5IGZsZXgpXG4gICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICAgICAgbW9kYWwuc3R5bGUuZmxleERpcmVjdGlvbiA9IFwiY29sdW1uXCI7XG4gICAgICAgIG1vZGFsLnN0eWxlLmFsaWduSXRlbXMgPSBcImNlbnRlclwiO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChpbnB1dCk7XG5cblxuICAgICAgICAvLyBDcmVhciB5IGFncmVnYXIgdW4gZXNwYWNpbyBlbnRyZSBlbCBpbnB1dCB5IHJlc3VsdHNEaXZcbiAgICAgICAgY29uc3Qgc3BhY2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgc3BhY2VyLnN0eWxlLmhlaWdodCA9IFwiMTZweFwiOyAvLyBBanVzdGEgZXN0YSBhbHR1cmEgc2VnXHUwMEZBbiBuZWNlc2l0ZXMgcGFyYSBlbCBlc3BhY2lvXG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHNwYWNlcik7XG4gICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0c0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKHJlc3VsdHNEaXYpO1xuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVJlc3VsdHNEaXNwbGF5KGZpbHRlcmVkUmVzdWx0czogYW55W10sIG1lbnVPdHJvOiB0aGlzKSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIHJlc3VsdGFkb3MgcHJldmlvc1xuICAgICAgICAgIGZpbHRlcmVkUmVzdWx0cy5mb3JFYWNoKChyZXN1bHQ6IHsgdmFsdWU6IHN0cmluZyB8IG51bGw7IGFjdGl2aXR5OiBzdHJpbmc7IGdyb3VwOiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkaXYudGV4dENvbnRlbnQgPSByZXN1bHQudmFsdWU7XG4gICAgICAgICAgICBkaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBkaXYub25tb3VzZW92ZXIgPSAoKSA9PiAoZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YwZjBmMFwiKTtcbiAgICAgICAgICAgIGRpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcInRyYW5zcGFyZW50XCIpO1xuICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSByZXN1bHQuYWN0aXZpdHk7IC8vIEd1YXJkYXIgZWwgdmFsb3Igc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXAgPSByZXN1bHQuZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgc2VsZWNjaVx1MDBGM24gYWwgdXN1YXJpb1xuICAgICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgcmVzb2x2ZShbc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cF0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlc3VsdHNEaXYuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgIC8vIFNpIG5vIGhheSByZXN1bHRhZG9zIHkgZWwgdXN1YXJpbyBoYSBpbmdyZXNhZG8gdW4gdGV4dG8sIG9mcmVjZXIgbGEgY3JlYWNpXHUwMEYzbiBkZSB1bmEgbnVldmEgYWN0aXZpZGFkXG4gICAgICAgICAgaWYgKGZpbHRlcmVkUmVzdWx0cy5sZW5ndGggPT09IDAgJiYgaW5wdXQudmFsdWUudHJpbSgpICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCBjcmVhdGVOZXdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2LnRleHRDb250ZW50ID0gYENyZWFyIG51ZXZhIGFjdGl2aWRhZDogXCIke2lucHV0LnZhbHVlfVwiYDtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5zdHlsZS5jb2xvciA9IFwiYmx1ZVwiO1xuICAgICAgICAgICAgY3JlYXRlTmV3RGl2Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWUgPSBpbnB1dC52YWx1ZTsgLy8gR3VhcmRhciBsYSBudWV2YSBhY3RpdmlkYWRcbiAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgaWYgKHRpcG89PSB1bmRlZmluZWQpeyB0aXBvID0gXCJhY3RzVGVtYXNcIn1cbiAgICAgICAgICAgICAgc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybywgdGlwbyk7IC8vIFByb2NlZGVyIGEgc2VsZWNjaW9uYXIgdW4gZ3J1cG9cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGNyZWF0ZU5ld0Rpdik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0R3JvdXBGb3JOZXdBY3Rpdml0eShtZW51T3RybzogeyBlc1JlY3VycmVudGU6IChhcmcwOiBzdHJpbmcpID0+IGFueTsgdXBkYXRlWUFNTEZpZWxkczogKGFyZzA6IGFueSwgYXJnMTogc3RyaW5nLCBhcmcyOiBzdHJpbmcpID0+IGFueTsgfSwgdGlwbzogYW55KSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgICAgIGlucHV0LnJlbW92ZSgpO1xuICAgICAgICAgIHNwYWNlci5yZW1vdmUoKTtcbiAgICAgICAgICB0aXRsZS5yZW1vdmUoKTtcblxuICAgICAgICAgIGNvbnN0IHRleHRvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgdGV4dG8udGV4dENvbnRlbnQgPSBgVmFtb3MgYSBjcmVhciBsYSBhY3RpdmlkYWQ6IFwiJHtzZWxlY3RlZFZhbHVlfVwiLiBTZWxlY2Npb25hIHVuIGdydXBvOmA7O1xuICAgICAgICAgIHRleHRvLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7IC8vIENlbnRyYXIgZWwgdFx1MDBFRHR1bG8sIGFqdXN0YSBsb3MgZXN0aWxvcyBzZWdcdTAwRkFuIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKHRleHRvKTsgXG4gICAgICBcbiAgICAgICAgICBncm91cHMuZm9yRWFjaCgoZ3JvdXA6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2LnRleHRDb250ZW50ID0gZ3JvdXA7XG4gICAgICAgICAgICBncm91cERpdi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9ubW91c2VvdmVyID0gKCkgPT4gKGdyb3VwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwiI2YwZjBmMFwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9ubW91c2VvdXQgPSAoKSA9PiAoZ3JvdXBEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgICAgICAgIGdyb3VwRGl2Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdGVkR3JvdXAgPSBncm91cDsgLy8gR3VhcmRhciBlbCBncnVwbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgLy9kaXNwbGF5U2VsZWN0ZWRWYWx1ZShzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTsgLy8gTW9zdHJhciBsYSBhY3RpdmlkYWQgeSBlbCBncnVwbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGxldCByZWN1cnJlbnRlID0gYXdhaXQgbWVudU90cm8uZXNSZWN1cnJlbnRlKHNlbGVjdGVkVmFsdWUpXG4gICAgICAgICAgICAgIGlmIChyZWN1cnJlbnRlKXtcbiAgICAgICAgICAgICAgICBhd2FpdCBtZW51T3Ryby51cGRhdGVZQU1MRmllbGRzKHRpcG8sIHNlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJlc29sdmUoW3NlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGdyb3VwRGl2KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlTZWxlY3RlZFZhbHVlKGFjdGl2aXR5OiBhbnksIGdyb3VwOiBhbnkpIHtcbiAgICAgICAgICByZXN1bHRzRGl2LmlubmVySFRNTCA9IGBTZWxlY2Npb25hZG86ICR7YWN0aXZpdHl9IC8gJHtncm91cH1gO1xuICAgICAgICAgIC8vIEFxdVx1MDBFRCBwdWVkZXMgY2VycmFyIGVsIG1vZGFsIG8gcGVybWl0aXIgYWwgdXN1YXJpbyBoYWNlciBtXHUwMEUxcyBhY2Npb25lc1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgaW5wdXQub25pbnB1dCA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWx0ZXJlZEl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtcyhpbnB1dC52YWx1ZSwgaXRlbXMpO1xuICAgICAgICAgIHVwZGF0ZVJlc3VsdHNEaXNwbGF5KGZpbHRlcmVkSXRlbXMsIHRoaXMpO1xuICAgICAgICB9O1xuICAgICAgXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuICAgICAgIFxuICAgIH0pOyAgIFxufVxuXG5hc3luYyBlc1JlY3VycmVudGUodGFyZWE6c3RyaW5nKTpQcm9taXNlPGJvb2xlYW4+e1xuICBjb25zdCBvcGNpb25lcyA9IFtcIlNpXCIsXCJOb1wiXSA7XG4gIGNvbnN0IHZhbG9yZXMgPSBbdHJ1ZSxmYWxzZV07XG4gIGNvbnN0IHBsYWNlaG9sZGVyID0gYCR7dGFyZWF9IGVzIHRhcmVhIHJlY3VycmVudGU/YDtcbiAgY29uc3QgbW9kYWwgPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lcywgdmFsb3JlcywgcGxhY2Vob2xkZXIpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBtb2RhbC5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbn0iLCAiaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcblxuZXhwb3J0IGNsYXNzIHJlZ2lzdHJvVGllbXBvQVBJIHtcbiAgICBwcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgXG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgaW5pY2lhclJlZ2lzdHJvKCl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5jcmVhck9iamV0b1JlZ2lzdHJvKHRoaXMucGx1Z2luKTtcbiAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS52ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICBpZiAocmVnaXN0cm8uZGV0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvOyAvLyBEZXZ1ZWx2ZSBlbCByZWdpc3RybyBhY3R1YWwgeSBkZXRpZW5lIGxhIGVqZWN1Y2lcdTAwRjNuIGFxdVx1MDBFRFxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkuZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3Rybyx0aGlzLnBsdWdpbi5hcHApXG4gICAgICAgIGlmIChyZWdpc3Ryby5kZXRlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVnaXN0cm87IC8vIERldnVlbHZlIGVsIHJlZ2lzdHJvIGFjdHVhbCB5IGRldGllbmUgbGEgZWplY3VjaVx1MDBGM24gYXF1XHUwMEVEXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy51dGlsc0FwaS5jb25zdHJ1aXJOb21icmV5QWxpYXMocmVnaXN0cm8sIHRoaXMucGx1Z2luLmFwcClcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICBcbiAgICAgICAgICAgIFxuXG4gICAgfVxuXG4gICAgbWlNZXRvZG8oKSB7XG4gICAgICAvLyBUdSBsXHUwMEYzZ2ljYSBhcXVcdTAwRURcbiAgICAgIHJldHVybiBcIlJlc3VsdGFkbyBkZSBtaSBNZXRvZG9cIjtcbiAgICB9XG4gIFxuICAgIG90cm9NZXRvZG8ocGFyYW0pIHtcbiAgICAgIC8vIExcdTAwRjNnaWNhIHV0aWxpemFuZG8gcGFyYW1cbiAgICAgIHJldHVybiBgUmVzdWx0YWRvIGRlIG90cm9NZXRvZG8gY29uICR7cGFyYW19YDtcbiAgICB9XG4gIH1cbiAgIiwgIi8vaW1wb3J0IHt1dGlsc0FQSX0gZnJvbSAnLi91dGlsc0FQSSdcblxuZXhwb3J0IGNsYXNzIHN0YXJ0ZXJBUEkge1xuICAgIC8vcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIGluZm9TdWJzaXN0ZW1hOiBvYmplY3Q7IC8vIEFzdW1pZW5kbyBxdWUgZXMgdW4gc3RyaW5nXG4gICAgcHJpdmF0ZSB0cDogb2JqZWN0O1xuICAgIHByaXZhdGUgbm90YTogb2JqZWN0O1xuICAgIHByaXZhdGUgcGF0aENhbXBvczogc3RyaW5nOyBcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICAvLyBJbmljaWFsaXphIGZvbGRlciBlIGluZGljZSBjb24gdmFsb3JlcyBwcmVkZXRlcm1pbmFkb3MgbyBsXHUwMEYzZ2ljYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSB7fTtcbiAgICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgY3JlYXJOb3RhKGluZm9TdWJzaXN0ZW1hOiB7IGZvbGRlcjogc3RyaW5nIHwgbnVtYmVyOyBpbmRpY2U6IHN0cmluZyB8IG51bWJlcjsgfSwgY2FtcG9zOiBhbnkpIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBub3RhID0ge307IC8vIEluaWNpYWxpemEgZWwgb2JqZXRvIG5vdGEuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvU3Vic2lzdGVtYSwgaW5mb1N1YnNpc3RlbWEpOyBcbiAgICAgICAgaWYgKHRoaXMuaW5mb1N1YnNpc3RlbWEuZGVmaW5lZCl7XG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuZm9sZGVyXVxuICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmluZGljZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmluZGljZV1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhciB1biB0cCBwYXJhIGFjY2VkZXIgYSBmdW5jaW9uYWxpZGFkZXMgZGUgdGVtcGxhdGVyLlxuICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNhIGVsIG5vbWJyZSBkZWwgY2FtcG8gcGFyYSBjb25zdHJ1aXIgZWwgbm9tYnJlIGRlIGxhIGZ1bmNpXHUwMEYzbiAocC4gZWouLCBcImdldElkXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgZXhpc3RlIHVuYSBmdW5jaVx1MDBGM24gY29uIGVzZSBub21icmUuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc1tmdW5jdGlvbk5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBkZSBtYW5lcmEgZGluXHUwMEUxbWljYSB5IGFzaWduYSBlbCByZXN1bHRhZG8gYWwgY2FtcG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIG5vdGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBub3RhW2NhbXBvXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgYXNpZ25hciB1biB2YWxvciBwb3IgZGVmZWN0byBhIG5vdGFbY2FtcG9dIG8gc2ltcGxlbWVudGUgY29udGludWFyLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgZWwgY1x1MDBGM2RpZ28gcGFyYSBwcm9jZXNhciBlbCBvYmpldG8gbm90YSwgY29tbyBndWFyZGFyIGVuIHVuIGFyY2hpdm8gZGVudHJvIGRlICdmb2xkZXInLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm90YTsgLy8gUmV0b3JuYSBlbCBvYmpldG8gbm90YSBjb24gdG9kYXMgbGFzIHByb3BpZWRhZGVzIGFncmVnYWRhcy5cbiAgICB9XG4gICAgXG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKU1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICAgICAgY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgXG4gICAgICAgIGlmICghdHApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHRwO1xuICAgIH1cblxuICAgIC8vIEVqZW1wbG8gZGUgZnVuY2lcdTAwRjNuIGdldENhbXBvIHNpbXVsYWRhLiBEZWJlcyBkZWZpbmlyIGZ1bmNpb25lcyBzaW1pbGFyZXMgcGFyYSAnaWQnLCAnZmVjaGEnLCBldGMuXG4gICAgYXN5bmMgZ2V0SWQoKSB7XG4gICAgICAgIFxuICAgICAgICBsZXQgbWF4SWQgPSAwO1xuXG4gICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJvc0V4aXN0ZW50ZXMgPSBmaWxlcy5maWx0ZXIoKGZpbGU6IHsgcGF0aDogc3RyaW5nOyB9KSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgSURzIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBFbCBwclx1MDBGM3hpbW8gSUQgZGlzcG9uaWJsZVxuICAgICAgICBjb25zdCBuZXh0SWQgPSBtYXhJZCArIDE7XG4gICAgICAgIHRoaXMubm90YS5pZCA9IG5leHRJZDtcbiAgICAgICAgcmV0dXJuIG5leHRJZDtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0RmVjaGEoKSB7XG4gICAgICAgIC8vIFNpbXVsYWNpXHUwMEYzbiBkZSBvYnRlbmVyIHVuIElEIGRlIG1hbmVyYSBhc1x1MDBFRG5jcm9uYS5cbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG4gICAgfVxuXG4gICAgZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgICAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZGlhcyA9IFsnRG9taW5nbycsICdMdW5lcycsICdNYXJ0ZXMnLCAnTWlcdTAwRTlyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU1x1MDBFMWJhZG8nXTtcbiAgICAgICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0U2VjSWQoKXtcblxuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXR1bG8oKXtcbiAgICAgICAgbGV0IHRpdHVsbyA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChgVGl0dWxvIGRlIGVzdGUoYSkgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLm5hbWV9YCwgYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfSAtICR7dGhpcy5ub3RhLmlkfWAsIHRydWUpXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCl7XG4gICAgICAgIGxldCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciB1bmEgZGVzY3JpcGNpXHUwMEYzbj9cIiwgXCIgXCIgKyBgRXN0YSBub3RhIGVzIHNvYnJlICR7dGhpcy5ub3RhLnRpdHVsb31gLCBmYWxzZSwgdHJ1ZSApXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGRlc2NyaXBjaW9uID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgICAgIFxuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgLy8gMCAtPiBOb21icmUsIDEgLT4gdHlwZSArIE5vbWJyZVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgICAgXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7XG4gICAgICAgIGxldCBzaUFzdW50bywgbm9tYnJlOyBcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpeyBcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIGNvbnN0IG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTsgXG4gICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKVxuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBub21icmUgPSBcIlwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvID0ge307XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLnNpQXN1bnRvID0gc2lBc3VudG87XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvLm5vbWJyZSA9IG5vbWJyZTsgICAgXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZX1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oKXtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb246IHN0cmluZyB8IG51bGwsIHRhZ0NsYXNpZmljYWNpb246IHN0cmluZyB8IG51bGwsIGNsYXNpZmljYWNpb25BWDogeyBbeDogc3RyaW5nXTogYW55OyB9LCB0YWdzQ2xhc2lmaWNhY2lvbkFYOiBzdHJpbmcgfCBhbnlbXTtcbiAgICAgICAgbGV0IG51ZXZhQ2xhc2lmaWNhY2lvbiA9IGZhbHNlO1xuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnN1Z2dlc3RlcihjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVgsIGZhbHNlLCBcIlx1MDBCRkNsYXNpZmljYXJcdTAwRURhcyBlc3RhIG5vdGEgYmFqbyBhbGd1bmEgZGUgbGFzIHNpZ3VpZW50ZXMgY2F0ZWdvclx1MDBFRGFzP1wiKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb249PVwiTnVldm9cIil7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IGF3YWl0IHRoaXMudHAuc3lzdGVtLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgdGFnIHF1ZSB1dGlsaXphcmFzIHBhcmEgXCIgKyBjbGFzaWZpY2FjaW9uICsgXCI/LiBObyB1dGlsaWNlcyBlc3BhY2lvcyBlbiBsYSBkZWZpbmljaVx1MDBGM24gZGVsIHRhZy5cIiwgXCJudWV2b1RhZ1wiLCB0cnVlKVxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG51ZXZhQ2xhc2lmaWNhY2lvbiA9IHRydWU7XG4gICAgICAgICAgICB9ZWxzZSBpZih0YWdDbGFzaWZpY2FjaW9uPT1cIk5pbmd1bmFcIil7XG4gICAgICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiXCJcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gXCJcIlx0XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IHRhZ3NDbGFzaWZpY2FjaW9uQVguaW5kZXhPZih0YWdDbGFzaWZpY2FjaW9uKVxuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBjbGFzaWZpY2FjaW9uQVhbaW5kaWNlXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG51ZXZhQ2xhc2lmaWNhY2lvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcjogeyB0aXR1bG9DbGFzaWZpY2FjaW9uQVg6IGFueVtdOyB0YWdzQ2xhc2lmaWNhY2lvbkFYOiBhbnlbXTsgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlICdhY3RzVGVtYXMnIGVzIGVsIGNhbXBvIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0NsYXNpZmljYWNpb24gPSBbLi4uY2xhc2lmaWNhY2lvbkFYLCBjbGFzaWZpY2FjaW9uXVxuICAgICAgICAgICAgICAgIGxldCBuZXdUYWdDbGFzaWZpY2FjaW9uID0gWy4uLnRhZ3NDbGFzaWZpY2FjaW9uQVgsIHRhZ0NsYXNpZmljYWNpb25dXG4gICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXIudGl0dWxvQ2xhc2lmaWNhY2lvbkFYID0gbmV3Q2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYID0gbmV3VGFnQ2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhZ0NsYXNpZmljYWNpb24gIT0gXCJcIil7XG4gICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gXCJjbC9cIiArIHRhZ0NsYXNpZmljYWNpb24gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm5vdGEuY2xhc2lmaWNhY2lvbkFYID0gY2xhc2lmaWNhY2lvbjtcbiAgICAgICAgICAgIHRoaXMubm90YS50YWdDbGFzaWZpY2FjaW9uQVggPSB0YWdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgcmV0dXJuIHtjbGFzZTogY2xhc2lmaWNhY2lvbiwgdGFnOiB0YWdDbGFzaWZpY2FjaW9ufTtcbiAgICB9XG4gICAgLy8gLT5cblxuICAgIGFzeW5jIGdldEVzdGFkbygpe1xuICAgICAgICBsZXQgY2FtcG8gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5zdWdnZXN0ZXIoW1wiXHVEODNEXHVERDM1IC0+IENvbXBsZXRhZG8gLSBJbmZvcm1hY2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERkUyIC0+IEZpbmFsaXphZG9cIixcIlx1RDgzRFx1REZFMSAtPiBFbiBlamVjdWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REQzNCAtPiBEZXRlbmlkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIFwiU2VsZWNjaW9uZSBlbCBlc3RhZG8gZGUgbGEgbm90YTpcIilcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoY2FtcG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RmlsZW5hbWUoKXtcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRpdHVsb30vaW5kZXgke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmZpbGVOYW1lID0gKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH1gKVxuICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmZpbGVOYW1lO1xuICAgIH1cblxuICB9XG4gICJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBRSxJQUFBQSxvQkFBdUI7OztBQ0F6QixzQkFBa0Q7QUFFM0MsSUFBTSx3QkFBTixjQUFvQyxpQ0FBaUI7QUFBQSxFQUd4RCxZQUFZLFFBQWdCO0FBQ3hCLFVBQU0sT0FBTyxLQUFLLE1BQU07QUFDeEIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVBQWdCO0FBQ1osVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBQ2xCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0scURBQStDLENBQUM7QUFHbkYsVUFBTSxlQUFlLFlBQVksVUFBVSxFQUFFLEtBQUssZ0JBQWdCLENBQUM7QUFDbkUsVUFBTSxzQkFBc0IsWUFBWSxVQUFVLEVBQUUsS0FBSyx3QkFBd0IsQ0FBQztBQUdsRixVQUFNLFlBQVksQ0FBQyxzQkFBbUIsMkJBQTJCLGNBQVc7QUFHNUUsY0FBVSxRQUFRLENBQUMsT0FBTyxVQUFVO0FBRWhDLFlBQU0sWUFBWSxTQUFTLGNBQWMsUUFBUTtBQUNqRCxnQkFBVSxjQUFjO0FBQ3hCLGdCQUFVLFVBQVUsSUFBSSxVQUFVO0FBQ2xDLGdCQUFVLFFBQVEsTUFBTSxNQUFNLEtBQUs7QUFDbkMsZ0JBQVUsVUFBVSxNQUFNLEtBQUssUUFBUSxNQUFNLEtBQUssRUFBRTtBQUNwRCxtQkFBYSxZQUFZLFNBQVM7QUFHbEMsWUFBTSxhQUFhLFNBQVMsY0FBYyxLQUFLO0FBQy9DLGlCQUFXLEtBQUssTUFBTSxLQUFLO0FBQzNCLGlCQUFXLFVBQVUsSUFBSSxhQUFhO0FBQ3RDLDBCQUFvQixZQUFZLFVBQVU7QUFHMUMsVUFBSSxRQUFRO0FBQUcsbUJBQVcsTUFBTSxVQUFVO0FBRzFDLFVBQUksVUFBVSxHQUFHO0FBRWIsWUFBSSx3QkFBUSxVQUFVLEVBQ3JCLFFBQVEsNEJBQTRCLEVBQ3BDLFFBQVEsK0RBQStELEVBQ3ZFLFVBQVUsQ0FBQyxXQUEwSSxPQUNqSixTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUFvQixFQUNsRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyx1QkFBdUI7QUFDNUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFRixZQUFJLHdCQUFRLFVBQVUsRUFDckIsUUFBUSxtQ0FBZ0MsRUFDeEMsUUFBUSx3REFBcUQsRUFDN0QsVUFBVSxDQUFDLFdBQTBJLE9BQ2pKLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLEVBQ2xELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHVCQUF1QjtBQUM1QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUVOLFlBQUksd0JBQVEsVUFBVSxFQUNyQixRQUFRLGtDQUErQixFQUN2QyxRQUFRLDZDQUEwQyxFQUNsRCxVQUFVLENBQUMsV0FBMEksT0FDakosU0FBUyxLQUFLLE9BQU8sU0FBUyxVQUFVLEVBQ3hDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGFBQWE7QUFDbEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFBQSxNQUlkO0FBR0EsVUFBSSxVQUFVLEdBQUc7QUFFYixjQUFNLGlCQUFpQixDQUFDLFVBQWdIO0FBQ3BJLGdCQUFNLGNBQWMsTUFBTSxPQUFPO0FBQ2pDLGNBQUksWUFBWSxNQUFNLFlBQVksUUFBUTtBQUN0Qyx3QkFBWSxNQUFNLFVBQVU7QUFDNUIsa0JBQU0sT0FBTyxZQUFZLGFBQWEsTUFBTSxPQUFPLGFBQWEsWUFBWTtBQUFBLFVBQ2hGLE9BQU87QUFDSCx3QkFBWSxNQUFNLFVBQVU7QUFDNUIsa0JBQU0sT0FBTyxZQUFZLGFBQWEsTUFBTSxPQUFPLGFBQWEsWUFBWTtBQUFBLFVBQ2hGO0FBQUEsUUFDSjtBQUlBLGNBQU0sbUJBQW1CLFdBQVcsU0FBUyxLQUFLLEVBQUUsTUFBTSxxQ0FBZ0MsQ0FBQztBQUMzRix5QkFBaUIsYUFBYSxjQUFjLDZCQUE2QjtBQUN6RSx5QkFBaUIsTUFBTSxTQUFTO0FBQ2hDLGNBQU0scUJBQXFCLFdBQVcsVUFBVTtBQUNoRCwyQkFBbUIsTUFBTSxVQUFVO0FBQ25DLHlCQUFpQixVQUFVO0FBRTNCLFlBQUksd0JBQVEsa0JBQWtCLEVBQ3pCLFFBQVEsd0JBQXdCLEVBQ2hDLFFBQVEsOEVBQTJFLEVBQ25GLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUNoRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLGtCQUFrQixFQUN6QixRQUFRLHVCQUF1QixFQUMvQixRQUFRLHFEQUFrRCxFQUMxRCxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxrQkFBa0IsRUFDaEQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMscUJBQXFCO0FBQzFDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBR1YsY0FBTSxZQUFZLFdBQVcsU0FBUyxLQUFLLEVBQUUsTUFBTSw4Q0FBc0MsQ0FBQztBQUMxRixrQkFBVSxhQUFhLGNBQWMsc0NBQW1DO0FBQ3hFLGtCQUFVLE1BQU0sU0FBUztBQUN6QixjQUFNLGNBQWMsV0FBVyxVQUFVO0FBQ3pDLG9CQUFZLE1BQU0sVUFBVTtBQUM1QixrQkFBVSxVQUFVO0FBRXBCLFlBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLGtDQUErQixFQUN2QyxRQUFRLGtGQUE0RSxFQUNwRixRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQzFDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGVBQWU7QUFDcEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxpQ0FBOEIsRUFDdEMsUUFBUSwrREFBeUQsRUFDakUsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBR1YsY0FBTSxtQkFBbUIsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLGtEQUEwQyxDQUFDO0FBQ3JHLHlCQUFpQixhQUFhLGNBQWMsMENBQXVDO0FBQ25GLHlCQUFpQixNQUFNLFNBQVM7QUFDaEMsY0FBTSxxQkFBcUIsV0FBVyxVQUFVO0FBQ2hELDJCQUFtQixNQUFNLFVBQVU7QUFDbkMseUJBQWlCLFVBQVU7QUFHM0IsWUFBSSx3QkFBUSxrQkFBa0IsRUFDekIsUUFBUSxxQ0FBa0MsRUFDMUMsUUFBUSxxRkFBK0UsRUFDdkYsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsa0JBQWtCLEVBQ2hELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHFCQUFxQjtBQUMxQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLFlBQUksd0JBQVEsa0JBQWtCLEVBQ3pCLFFBQVEsdUNBQWlDLEVBQ3pDLFFBQVEsa0VBQTRELEVBQ3BFLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLGtCQUFrQixFQUNoRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFDMUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFHVixjQUFNLGVBQWUsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLGlDQUE0QixDQUFDO0FBQ25GLHFCQUFhLGFBQWEsY0FBYyx5QkFBeUI7QUFDakUscUJBQWEsTUFBTSxTQUFTO0FBQzVCLGNBQU0saUJBQWlCLFdBQVcsVUFBVTtBQUM1Qyx1QkFBZSxNQUFNLFVBQVU7QUFDL0IscUJBQWEsVUFBVTtBQUV2QixZQUFJLHdCQUFRLGNBQWMsRUFDckIsUUFBUSw2QkFBNkIsRUFDckMsUUFBUSw2RUFBMEUsRUFDbEYsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsY0FBYyxFQUM1QyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLGNBQWMsRUFDckIsUUFBUSxzQkFBbUIsRUFDM0IsUUFBUSwwREFBdUQsRUFDL0QsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsY0FBYyxFQUM1QyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFHVixjQUFNLFdBQVcsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLDZCQUF3QixDQUFDO0FBQzNFLGlCQUFTLGFBQWEsY0FBYyxxQkFBcUI7QUFDekQsaUJBQVMsTUFBTSxTQUFTO0FBQ3hCLGNBQU0sYUFBYSxXQUFXLFVBQVU7QUFDeEMsbUJBQVcsTUFBTSxVQUFVO0FBQzNCLGlCQUFTLFVBQVU7QUFHbkIsWUFBSSx3QkFBUSxVQUFVLEVBQ2pCLFFBQVEsMEJBQTBCLEVBQ2xDLFFBQVEscURBQXFELEVBQzdELFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLG1CQUFtQixFQUNqRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxzQkFBc0I7QUFDM0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLFVBQVUsRUFDakIsUUFBUSw0QkFBeUIsRUFDakMsUUFBUSxxREFBa0QsRUFDMUQsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsbUJBQW1CLEVBQ2pELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHNCQUFzQjtBQUMzQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLFlBQUksd0JBQVEsVUFBVSxFQUNqQixRQUFRLHFDQUFxQyxFQUM3QyxRQUFRLG9FQUFvRSxFQUM1RSxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQzFDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGVBQWU7QUFDcEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLFVBQVUsRUFDakIsUUFBUSx1Q0FBb0MsRUFDNUMsUUFBUSxvRUFBaUUsRUFDekUsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsWUFBWSxFQUMxQyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxlQUFlO0FBQ3BDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBR1YsY0FBTSxlQUFlLFdBQVcsU0FBUyxLQUFLLEVBQUUsTUFBTSxpQ0FBNEIsQ0FBQztBQUNuRixxQkFBYSxhQUFhLGNBQWMseUJBQXlCO0FBQ2pFLHFCQUFhLE1BQU0sU0FBUztBQUM1QixjQUFNLGlCQUFpQixXQUFXLFVBQVU7QUFDNUMsdUJBQWUsTUFBTSxVQUFVO0FBQy9CLHFCQUFhLFVBQVU7QUFHdkIsWUFBSSx3QkFBUSxjQUFjLEVBQ3JCLFFBQVEsZ0NBQWdDLEVBQ3hDLFFBQVEsK0RBQStELEVBQ3ZFLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLHNCQUFzQixFQUNwRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyx5QkFBeUI7QUFDOUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLGNBQWMsRUFDckIsUUFBUSxrQ0FBK0IsRUFDdkMsUUFBUSwrREFBNEQsRUFDcEUsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsc0JBQXNCLEVBQ3BELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHlCQUF5QjtBQUM5QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLFlBQUksd0JBQVEsY0FBYyxFQUNyQixRQUFRLG1DQUFnQyxFQUN4QyxRQUFRLGtFQUErRCxFQUN2RSxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyx1QkFBdUIsRUFDckQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsMEJBQTBCO0FBQy9DLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBRVYsWUFBSSx3QkFBUSxjQUFjLEVBQ3JCLFFBQVEscUNBQStCLEVBQ3ZDLFFBQVEsa0VBQTRELEVBQ3BFLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLHVCQUF1QixFQUNyRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUywwQkFBMEI7QUFDL0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFLVixjQUFNLGlCQUFpQixXQUFXLFNBQVMsS0FBSyxFQUFFLE1BQU0sc0NBQThCLENBQUM7QUFDdkYsdUJBQWUsYUFBYSxjQUFjLDhCQUEyQjtBQUNyRSx1QkFBZSxNQUFNLFNBQVM7QUFDOUIsY0FBTSxtQkFBbUIsV0FBVyxVQUFVO0FBQzlDLHlCQUFpQixNQUFNLFVBQVU7QUFDakMsdUJBQWUsVUFBVTtBQUV6QixZQUFJLHdCQUFRLGdCQUFnQixFQUN2QixRQUFRLG9DQUFpQyxFQUN6QyxRQUFRLG9GQUE4RSxFQUN0RixRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxnQkFBZ0IsRUFDOUMsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsbUJBQW1CO0FBQ3hDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBRVYsWUFBSSx3QkFBUSxnQkFBZ0IsRUFDdkIsUUFBUSwyQkFBcUIsRUFDN0IsUUFBUSxpRUFBMkQsRUFDbkUsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsZ0JBQWdCLEVBQzlDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLG1CQUFtQjtBQUN4QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUtWLGNBQU0sZUFBZSxXQUFXLFNBQVMsS0FBSyxFQUFFLE1BQU0saUNBQTRCLENBQUM7QUFDbkYscUJBQWEsYUFBYSxjQUFjLHlCQUF5QjtBQUNqRSxxQkFBYSxNQUFNLFNBQVM7QUFDNUIsY0FBTSxpQkFBaUIsV0FBVyxVQUFVO0FBQzVDLHVCQUFlLE1BQU0sVUFBVTtBQUMvQixxQkFBYSxVQUFVO0FBR3ZCLFlBQUksd0JBQVEsY0FBYyxFQUNyQixRQUFRLGdDQUFnQyxFQUN4QyxRQUFRLDhFQUEyRSxFQUNuRixRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGlCQUFpQjtBQUN0QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUVWLFlBQUksd0JBQVEsY0FBYyxFQUNyQixRQUFRLGtDQUErQixFQUN2QyxRQUFRLDZEQUEwRCxFQUNsRSxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxjQUFjLEVBQzVDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGlCQUFpQjtBQUN0QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLGNBQU0sZUFBZSxXQUFXLFNBQVMsS0FBSyxFQUFFLE1BQU0sdURBQTRDLENBQUM7QUFDbkcscUJBQWEsYUFBYSxjQUFjLCtDQUF5QztBQUNqRixxQkFBYSxNQUFNLFNBQVM7QUFDNUIsY0FBTSxpQkFBaUIsV0FBVyxVQUFVO0FBQzVDLHVCQUFlLE1BQU0sVUFBVTtBQUMvQixxQkFBYSxVQUFVO0FBSXZCLFlBQUksd0JBQVEsY0FBYyxFQUNyQixRQUFRLDJDQUEyQyxFQUNuRCxRQUFRLGlHQUF3RixFQUNoRyxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxxQkFBcUIsRUFDbkQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBRVYsWUFBSSx3QkFBUSxjQUFjLEVBQ3JCLFFBQVEsaURBQThDLEVBQ3RELFFBQVEsOEVBQXFFLEVBQzdFLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLHFCQUFxQixFQUNuRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixjQUFNLGFBQWEsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLCtCQUEwQixDQUFDO0FBQy9FLG1CQUFXLGFBQWEsY0FBYyx1QkFBdUI7QUFDN0QsbUJBQVcsTUFBTSxTQUFTO0FBQzFCLGNBQU0sZUFBZSxXQUFXLFVBQVU7QUFDMUMscUJBQWEsTUFBTSxVQUFVO0FBQzdCLG1CQUFXLFVBQVU7QUFHckIsWUFBSSx3QkFBUSxZQUFZLEVBQ25CLFFBQVEseUNBQXlDLEVBQ2pELFFBQVEsa0ZBQStFLEVBQ3ZGLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLFlBQVksRUFDMUMsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsZUFBZTtBQUNwQyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUVWLFlBQUksd0JBQVEsWUFBWSxFQUNuQixRQUFRLG9CQUFpQixFQUN6QixRQUFRLDJDQUF3QyxFQUNoRCxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxZQUFZLEVBQzFDLFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLGVBQWU7QUFDcEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFJVixjQUFNLHNCQUFzQixXQUFXLFNBQVMsS0FBSyxFQUFFLE1BQU0sd0NBQW1DLENBQUM7QUFDakcsNEJBQW9CLGFBQWEsY0FBYyxnQ0FBZ0M7QUFDL0UsNEJBQW9CLE1BQU0sU0FBUztBQUNuQyxjQUFNLHdCQUF3QixXQUFXLFVBQVU7QUFDbkQsOEJBQXNCLE1BQU0sVUFBVTtBQUN0Qyw0QkFBb0IsVUFBVTtBQUU5QixZQUFJLHdCQUFRLHFCQUFxQixFQUM1QixRQUFRLG9DQUFvQyxFQUM1QyxRQUFRLG9GQUFpRixFQUN6RixRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxxQkFBcUIsRUFDbkQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBRVYsWUFBSSx3QkFBUSxxQkFBcUIsRUFDNUIsUUFBUSw2QkFBMEIsRUFDbEMsUUFBUSxvREFBaUQsRUFDekQsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMscUJBQXFCLEVBQ25ELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHdCQUF3QjtBQUM3QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLGNBQU0sa0JBQWtCLFdBQVcsU0FBUyxLQUFLLEVBQUUsTUFBTSx3Q0FBbUMsQ0FBQztBQUM3Rix3QkFBZ0IsYUFBYSxjQUFjLGdDQUFnQztBQUMzRSx3QkFBZ0IsTUFBTSxTQUFTO0FBQy9CLGNBQU0sb0JBQW9CLFdBQVcsVUFBVTtBQUMvQywwQkFBa0IsTUFBTSxVQUFVO0FBQ2xDLHdCQUFnQixVQUFVO0FBRTFCLFlBQUksd0JBQVEsaUJBQWlCLEVBQ3hCLFFBQVEsMkJBQTJCLEVBQ25DLFFBQVEsMkVBQXdFLEVBQ2hGLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLGlCQUFpQixFQUMvQyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxvQkFBb0I7QUFDekMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLGlCQUFpQixFQUN4QixRQUFRLDZCQUEwQixFQUNsQyxRQUFRLG9EQUFpRCxFQUN6RCxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxpQkFBaUIsRUFDL0MsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsb0JBQW9CO0FBQ3pDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBS1YsY0FBTSxxQkFBcUIsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLHVDQUFrQyxDQUFDO0FBQy9GLDJCQUFtQixhQUFhLGNBQWMsK0JBQStCO0FBQzdFLDJCQUFtQixNQUFNLFNBQVM7QUFDbEMsY0FBTSx1QkFBdUIsV0FBVyxVQUFVO0FBQ2xELDZCQUFxQixNQUFNLFVBQVU7QUFDckMsMkJBQW1CLFVBQVU7QUFFN0IsWUFBSSx3QkFBUSxvQkFBb0IsRUFDM0IsUUFBUSxvQ0FBb0MsRUFDNUMsUUFBUSxvRkFBaUYsRUFDekYsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsb0JBQW9CLEVBQ2xELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLHVCQUF1QjtBQUM1QyxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUVWLFlBQUksd0JBQVEsb0JBQW9CLEVBQzNCLFFBQVEsNEJBQXlCLEVBQ2pDLFFBQVEsbURBQWdELEVBQ3hELFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLG9CQUFvQixFQUNsRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyx1QkFBdUI7QUFDNUMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFHVixjQUFNLGVBQWUsV0FBVyxTQUFTLEtBQUssRUFBRSxNQUFNLGlDQUE0QixDQUFDO0FBQ25GLHFCQUFhLGFBQWEsY0FBYyx5QkFBeUI7QUFDakUscUJBQWEsTUFBTSxTQUFTO0FBQzVCLGNBQU0saUJBQWlCLFdBQVcsVUFBVTtBQUM1Qyx1QkFBZSxNQUFNLFVBQVU7QUFDL0IscUJBQWEsVUFBVTtBQUV2QixZQUFJLHdCQUFRLGNBQWMsRUFDckIsUUFBUSxvQkFBb0IsRUFDNUIsUUFBUSxvRUFBaUUsRUFDekUsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsY0FBYyxFQUM1QyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLGNBQWMsRUFDckIsUUFBUSxzQkFBbUIsRUFDM0IsUUFBUSw2Q0FBMEMsRUFDbEQsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsY0FBYyxFQUM1QyxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyxpQkFBaUI7QUFDdEMsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFHVixjQUFNLDJCQUEyQixXQUFXLFNBQVMsS0FBSyxFQUFFLE1BQU0sOENBQXlDLENBQUM7QUFDNUcsaUNBQXlCLGFBQWEsY0FBYyxzQ0FBc0M7QUFDMUYsaUNBQXlCLE1BQU0sU0FBUztBQUN4QyxjQUFNLDZCQUE2QixXQUFXLFVBQVU7QUFDeEQsbUNBQTJCLE1BQU0sVUFBVTtBQUMzQyxpQ0FBeUIsVUFBVTtBQUVuQyxZQUFJLHdCQUFRLDBCQUEwQixFQUNqQyxRQUFRLGlDQUFpQyxFQUN6QyxRQUFRLGlGQUE4RSxFQUN0RixRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUywwQkFBMEIsRUFDeEQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsNkJBQTZCO0FBQ2xELGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBRVYsWUFBSSx3QkFBUSwwQkFBMEIsRUFDakMsUUFBUSxtQ0FBZ0MsRUFDeEMsUUFBUSwwREFBdUQsRUFDL0QsUUFBUSxDQUFDLFNBQXdJLEtBQzdJLFNBQVMsS0FBSyxPQUFPLFNBQVMsMEJBQTBCLEVBQ3hELFNBQVMsT0FBTyxVQUFlO0FBQzVCLGVBQUssT0FBTyxTQUFTLDZCQUE2QjtBQUNsRCxnQkFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLFFBQ25DLENBQUMsQ0FBQztBQUdWLGNBQU0sc0JBQXNCLFdBQVcsU0FBUyxLQUFLLEVBQUUsTUFBTSx5Q0FBb0MsQ0FBQztBQUNsRyw0QkFBb0IsYUFBYSxjQUFjLGlDQUFpQztBQUNoRiw0QkFBb0IsTUFBTSxTQUFTO0FBQ25DLGNBQU0sd0JBQXdCLFdBQVcsVUFBVTtBQUNuRCw4QkFBc0IsTUFBTSxVQUFVO0FBQ3RDLDRCQUFvQixVQUFVO0FBRTlCLFlBQUksd0JBQVEscUJBQXFCLEVBQzVCLFFBQVEsZ0NBQWdDLEVBQ3hDLFFBQVEsZ0ZBQTZFLEVBQ3JGLFFBQVEsQ0FBQyxTQUF3SSxLQUM3SSxTQUFTLEtBQUssT0FBTyxTQUFTLHFCQUFxQixFQUNuRCxTQUFTLE9BQU8sVUFBZTtBQUM1QixlQUFLLE9BQU8sU0FBUyx3QkFBd0I7QUFDN0MsZ0JBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxRQUNuQyxDQUFDLENBQUM7QUFFVixZQUFJLHdCQUFRLHFCQUFxQixFQUM1QixRQUFRLGlDQUE4QixFQUN0QyxRQUFRLHlEQUFzRCxFQUM5RCxRQUFRLENBQUMsU0FBd0ksS0FDN0ksU0FBUyxLQUFLLE9BQU8sU0FBUyxxQkFBcUIsRUFDbkQsU0FBUyxPQUFPLFVBQWU7QUFDNUIsZUFBSyxPQUFPLFNBQVMsd0JBQXdCO0FBQzdDLGdCQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsUUFDbkMsQ0FBQyxDQUFDO0FBQUEsTUFJVjtBQU9KLFVBQUksVUFBVSxHQUFHO0FBQ2IsY0FBTSxZQUFZLFdBQVcsU0FBUyxPQUFPO0FBQzdDLGtCQUFVLGNBQWM7QUFDeEIsY0FBTSxZQUFZLFdBQVcsU0FBUyxPQUFPO0FBQzdDLGtCQUFVLE9BQU87QUFBQSxNQUVyQjtBQUFBLElBQ0osQ0FBQztBQUdELGdCQUFZLFNBQVMsU0FBUztBQUFBLE1BQzFCLE1BQU07QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQU9WLENBQUM7QUFJRCxTQUFLLFVBQVUsQ0FBQyxZQUFZO0FBQ3hCLGVBQVMsaUJBQWlCLGNBQWMsRUFBRSxRQUFRLGFBQVc7QUFDekQsZ0JBQVEsTUFBTSxVQUFVO0FBQ3hCLGdCQUFRLFVBQVUsT0FBTyxRQUFRO0FBQUEsTUFDckMsQ0FBQztBQUNELGVBQVMsaUJBQWlCLFdBQVcsRUFBRSxRQUFRLFVBQVE7QUFDbkQsYUFBSyxVQUFVLE9BQU8sUUFBUTtBQUFBLE1BQ2xDLENBQUM7QUFDRCxZQUFNLG1CQUFtQixTQUFTLGVBQWUsT0FBTztBQUN4RCxZQUFNLGdCQUFnQixTQUFTLGNBQWMsY0FBYyxPQUFPLElBQUk7QUFDdEUsVUFBSTtBQUFrQix5QkFBaUIsTUFBTSxVQUFVO0FBQ3ZELFVBQUk7QUFBZSxzQkFBYyxVQUFVLElBQUksUUFBUTtBQUFBLElBQzNEO0FBR0EsU0FBSyxRQUFRLE1BQU07QUFBQSxFQUN2QjtBQUFBLEVBQ0EsUUFBUSxNQUFtQjtBQUN2QixVQUFNLElBQUksTUFBTSx5QkFBeUI7QUFBQSxFQUM3QztBQUNKOzs7QUN4b0JBLElBQUFDLG1CQUE4Qjs7O0FDQzlCLGVBQXNCLGFBQWEsYUFBb0M7QUFDL0QsTUFBSTtBQUVBO0FBQ0EsVUFBTSxtQkFBbUIsSUFBSSxNQUFNLHNCQUFzQixXQUFXO0FBQ3BFLFFBQUksa0JBQWtCO0FBQ2xCLGNBQVEsSUFBSSxlQUFlLFdBQVcsY0FBYztBQUNwRDtBQUFBLElBQ0o7QUFDQTtBQUVBLFVBQU0sSUFBSSxNQUFNLGFBQWEsV0FBVztBQUN4QyxZQUFRLElBQUksWUFBWSxXQUFXLHdCQUF3QjtBQUFBLEVBQy9ELFNBQVMsT0FBTztBQUNaLFlBQVEsTUFBTSw4QkFBOEIsV0FBVyxNQUFNLEtBQUs7QUFBQSxFQUN0RTtBQUNKOzs7QUNqQkcsSUFBTSxZQUFZO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FDQ3pCLElBQUFDLG1CQUFzQjtBQUV0QixlQUFzQixlQUFlLFdBQW1DO0FBRXBFLFFBQU0sU0FBUztBQUNmLE1BQUksV0FBVztBQUNmLE1BQUksZUFBZSxTQUFTLE1BQU0sV0FBVztBQUc3QyxRQUFNLGdCQUF1QixNQUFNLElBQUksTUFBTSxPQUFPLGNBQWMsU0FBUztBQVUzRSxTQUFPO0FBQ1g7OztBQ2xCQSxJQUFBQyxtQkFBNkI7OztBQ0g3QixJQUFBQyxtQkFBNkI7QUFVN0IsZUFBc0IsdUJBQ2xCLFFBQ0EsVUFDQSxRQUNBLFVBQ0EsY0FBdUIsTUFDRztBQUUxQixNQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sSUFBSSxRQUFRLGVBQWUsSUFBSSxvQkFBb0IsR0FBRztBQUN6RSxZQUFRLE1BQU0sNENBQXlDO0FBQ3ZEO0FBQUEsRUFDSjtBQUVBLFFBQU0sa0JBQWtCLE9BQU8sSUFBSSxRQUFRLFFBQVEsb0JBQW9CO0FBQ3ZFLFFBQU0sS0FBSyxnQkFBZ0IsVUFBVTtBQUdyQyxNQUFJLENBQUMsSUFBSTtBQUNULFlBQVEsTUFBTSxrRUFBa0U7QUFDaEY7QUFBQSxFQUNKO0FBRUk7QUFDQSxNQUFJLGVBQWUsR0FBRyxLQUFLLFdBQVcsUUFBUTtBQUU5QyxNQUFJO0FBQ0EsVUFBTSxVQUFVLE1BQU0sR0FBRyxLQUFLLFdBQVcsY0FBYyxVQUFVLGFBQWEsTUFBTTtBQUNwRixXQUFPO0FBQUEsRUFDWCxTQUFTLE9BQU87QUFDWixZQUFRLE1BQU0sOENBQThDLEtBQUs7QUFDakU7QUFBQSxFQUNKO0FBQ0o7OztBRHBDTyxTQUFTLGlCQUFpQixRQUFzQjtBQUduRCxRQUFNLFdBQVcsT0FBTyxXQUFXO0FBQUEsSUFDL0IsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sVUFBVSxZQUFZO0FBQ2xCO0FBQ0EsWUFBTSxhQUFhLHNCQUFzQjtBQUFBLElBQzdDO0FBQUEsRUFDSixDQUFDO0FBQ0QsU0FBTyx1QkFBdUIsS0FBSyxTQUFTLEVBQUU7QUFFOUMsUUFBTSxXQUFXLE9BQU8sV0FBVztBQUFBLElBQy9CLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxJQUNOLFVBQVUsWUFBWTtBQUVsQixZQUFNLFVBQVUsTUFBTSxlQUFlLFNBQVM7QUFDOUMsVUFBSSxDQUFDLFNBQVM7QUFDVixZQUFJLE9BQU8sOEJBQThCO0FBQ3pDO0FBQUEsTUFDSjtBQUFBLElBRUo7QUFBQSxFQUNKLENBQUM7QUFFRCxTQUFPLHVCQUF1QixLQUFLLFNBQVMsRUFBRTtBQUc5QyxRQUFNLFdBQVcsT0FBTyxXQUFXO0FBQUEsSUFDL0IsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sVUFBVSxZQUFZO0FBRWxCLFlBQU0sV0FBVztBQUNqQixZQUFNLG9CQUFvQixPQUFPLElBQUksUUFBUSxlQUFlLElBQUksUUFBUTtBQUd4RSxVQUFJLFdBQVc7QUFHZixVQUFJLFlBQVksT0FBTyxJQUFJLE1BQU0sc0JBQXNCLE9BQU87QUFDOUQsVUFBSSxFQUFFLHFCQUFxQiwyQkFBVTtBQUNqQyxZQUFJLE9BQU8sd0RBQXdEO0FBQ25FO0FBQUEsTUFDSjtBQUVBLFVBQUksV0FBVztBQUNmLFVBQUksV0FBVztBQUVmO0FBQ0EsWUFBTSxVQUFVLE1BQU0sdUJBQXVCLFFBQVEsVUFBVSxXQUFXLFVBQVUsUUFBUTtBQUU1RixVQUFJLENBQUMsU0FBUztBQUNWLFlBQUksT0FBTyw4QkFBOEI7QUFDekM7QUFBQSxNQUNKO0FBQUEsSUFFSjtBQUFBLEVBQ0osQ0FBQztBQUVELFNBQU8sdUJBQXVCLEtBQUssU0FBUyxFQUFFO0FBRWxEO0FBR08sU0FBUyxtQkFBbUIsUUFBc0I7QUFFckQsTUFBSSxDQUFDLE9BQU87QUFBd0I7QUFFcEMsU0FBTyx1QkFBdUIsUUFBUSxlQUFhO0FBQy9DLFVBQU0sVUFBVSxPQUFPLElBQUksU0FBUyxTQUFTLFNBQVM7QUFFdEQsUUFBSSxTQUFTO0FBRVQsY0FBUSxXQUFXLE1BQU0sSUFBSSxPQUFPLG1DQUFtQztBQUFBLElBRzNFO0FBQUEsRUFDSixDQUFDO0FBQ0w7OztBSnBGTyxJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQUlwQixZQUFZLFFBQWdCO0FBRjVCLHNCQUFnQztBQUc1QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsV0FBVztBQUNQLFFBQUksS0FBSztBQUFZO0FBRXJCLHFCQUFpQixLQUFLLE1BQU07QUFBQSxFQUNoQztBQUFBLEVBRUEsYUFBYTtBQUNULFFBQUksQ0FBQyxLQUFLO0FBQVc7QUFDckIsdUJBQW1CLEtBQUssTUFBTTtBQUFBLEVBRWxDO0FBR0o7OztBTXhCQSxJQUFBQyxtQkFBdUI7OztBQ0F2QixJQUFBQyxtQkFBeUM7OztBQ0F6QyxJQUFBQyxtQkFBMkM7OztBQ0MzQyxJQUFBQyxtQkFBOEM7OztBQ0Q5QyxJQUFBQyxvQkFBeUM7QUFFbEMsSUFBTSxxQkFBTixNQUF5QjtBQUFBLEVBSTVCLFlBQVksUUFBZ0I7QUFGNUIscUJBQThCO0FBRzFCLFNBQUssU0FBUztBQUFBLEVBQ2xCO0FBQUEsRUFFQSxXQUFXO0FBQ1AsUUFBSSxLQUFLO0FBQVc7QUFFcEIsU0FBSyxZQUFZLEtBQUssT0FBTyxpQkFBaUI7QUFDOUMsU0FBSyxnQkFBZ0I7QUFFckIsU0FBSyxPQUFPO0FBQUEsTUFDUixLQUFLLE9BQU8sSUFBSSxVQUFVLEdBQUcsYUFBYSxDQUFDLFNBQWdCO0FBQ3ZELGFBQUssZ0JBQWdCLElBQUk7QUFBQSxNQUM3QixDQUFDO0FBQUEsSUFDTDtBQUFBLEVBQ0o7QUFBQSxFQUVBLGFBQWE7QUFDVCxRQUFJLENBQUMsS0FBSztBQUFXO0FBRXJCLFNBQUssVUFBVSxPQUFPO0FBQ3RCLFNBQUssWUFBWTtBQUFBLEVBRXJCO0FBQUEsRUFFUSxnQkFBZ0IsTUFBYztBQS9CMUM7QUFnQ1EsVUFBTSxjQUFjLFFBQVEsS0FBSyxPQUFPLElBQUksVUFBVSxjQUFjO0FBQ3BFLFFBQUksQ0FBQyxlQUFlLENBQUMsS0FBSyxXQUFXO0FBQ2pDLGlCQUFLLGNBQUwsbUJBQWdCLFFBQVE7QUFDeEI7QUFBQSxJQUNKO0FBRUEsVUFBTSxZQUFZLEtBQUssT0FBTyxJQUFJLGNBQWMsYUFBYSxXQUFXO0FBQ3hFLFVBQU0sWUFBVSxlQUFVLGdCQUFWLG1CQUF1QixZQUFXLENBQUM7QUFDbkQsU0FBSyxVQUFVLFFBQVEsUUFBUSxTQUFTLElBQUksVUFBVSxRQUFRLENBQUMsQ0FBQyxLQUFLLFVBQVU7QUFBQSxFQUNuRjtBQUNKOzs7QUN4Q0EsSUFBQUMsb0JBQXVCOzs7QUNGdkIsSUFBQUMsb0JBQXlDOzs7QUNBekMsSUFBQUMsb0JBQWtGOzs7QUNDbEYsSUFBQUMsb0JBQStDO0FBR3hDLElBQU0saUJBQU4sY0FBNkIsb0NBQTBCO0FBQUE7QUFBQTtBQUFBLEVBTzFELFlBQVlDLE1BQVUsUUFBa0IsUUFBa0IsYUFBcUI7QUFDM0UsVUFBTUEsSUFBRztBQUpiO0FBQUEsU0FBUSxpQkFBMEI7QUFLOUIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxTQUFTO0FBRWQsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEtBQUssT0FBTyxVQUFVO0FBQ2pELFVBQUksS0FBSyxJQUFJLE9BQU8sS0FBSztBQUN6QixhQUFPO0FBQUEsSUFDWCxHQUFHLENBQUMsQ0FBQztBQUNMLFNBQUssZUFBZSxXQUFXO0FBQUEsRUFDbkM7QUFBQTtBQUFBLEVBR0EsV0FBcUI7QUFDakIsV0FBTyxLQUFLO0FBQUEsRUFDaEI7QUFBQTtBQUFBLEVBR0EsWUFBWSxNQUFzQjtBQUM5QixXQUFPO0FBQUEsRUFDWDtBQUFBO0FBQUEsRUFHQSxVQUFnQjtBQUVaLFFBQUksQ0FBQyxLQUFLLGdCQUFnQjtBQUN0QixXQUFLLE9BQU8sSUFBSSxNQUFNLGdDQUE2QixDQUFDO0FBQUEsSUFDeEQ7QUFBQSxFQUNKO0FBQUE7QUFBQSxFQUdBLGlCQUFpQixNQUFjLEtBQXVDO0FBQ2xFLFNBQUssaUJBQWlCO0FBQ3RCLFVBQU0saUJBQWlCLE1BQU0sR0FBRztBQUFBLEVBQ3BDO0FBQUE7QUFBQSxFQUdBLGFBQWEsTUFBYyxLQUF1QztBQUM5RCxVQUFNLFFBQVEsS0FBSyxTQUFTLElBQUk7QUFDaEMsU0FBSyxRQUFRLEtBQUs7QUFBQSxFQUN0QjtBQUFBO0FBQUEsRUFHQSx3QkFBeUM7QUFDckMsV0FBTyxJQUFJLFFBQWdCLENBQUMsU0FBUyxXQUFXO0FBQzVDLFdBQUssVUFBVTtBQUNmLFdBQUssU0FBUztBQUNkLFdBQUssS0FBSztBQUFBLElBQ2QsQ0FBQztBQUFBLEVBQ0w7QUFDSjs7O0FEMURBLGVBQXNCLGdCQUFnQkMsTUFBNEI7QUFIbEU7QUFJSSxRQUFNLFFBQVFBLEtBQUksTUFBTSxpQkFBaUI7QUFFekMsV0FBUyxRQUFRLE9BQU87QUFDcEIsUUFBSSxLQUFLLEtBQUssV0FBVyw0QkFBNEIsR0FBRztBQUVwRCxZQUFNLFdBQVdBLEtBQUksY0FBYyxhQUFhLElBQUk7QUFHcEQsWUFBSSwwQ0FBVSxnQkFBVixtQkFBdUIsWUFBVyxhQUFNO0FBQ3hDLGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFFQSxTQUFPO0FBQ1g7QUFFQyxlQUFzQix1QkFBdUJBLE1BQWlDO0FBckIvRTtBQXVCSSxRQUFNLFFBQVFBLEtBQUksTUFBTSxpQkFBaUI7QUFFeEMsV0FBUyxRQUFRLE9BQU87QUFDcEIsUUFBSSxLQUFLLEtBQUssV0FBVyx1Q0FBdUMsR0FBRztBQUUvRCxZQUFNLFdBQVdBLEtBQUksY0FBYyxhQUFhLElBQUk7QUFHcEQsWUFBSSwwQ0FBVSxnQkFBVixtQkFBdUIsWUFBVyxhQUFNO0FBRXpDLGVBQU87QUFBQSxNQUNWO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFFQTtBQUNKO0FBSUQsZUFBc0Isb0JBQW9CLFFBQVE7QUFFOUMsUUFBTSxTQUFTLE9BQU8sSUFBSSxVQUFVLGNBQWM7QUFDbEQsTUFBSSxDQUFDLFFBQVE7QUFDVCxZQUFRLE1BQU0sNEhBQXNIO0FBQ3BJLFdBQU87QUFBQSxFQUNYO0FBRUEsUUFBTSxTQUFTLE9BQU8sU0FBUztBQUMvQixRQUFNLFNBQVMsT0FBTyxTQUFTO0FBRS9CLE1BQUksUUFBUTtBQUdaLFFBQU0sUUFBUSxJQUFJLE1BQU0saUJBQWlCO0FBR3pDLFFBQU0sc0JBQXNCLE1BQU0sT0FBTyxVQUFRLEtBQUssS0FBSyxXQUFXLE1BQU0sQ0FBQztBQUc1RSxzQkFBb0IsUUFBUSxVQUFRO0FBL0R6QztBQWdFUSxVQUFNLFlBQVcsU0FBSSxjQUFjLGFBQWEsSUFBSSxNQUFuQyxtQkFBc0M7QUFDdkQsUUFBSSxZQUFZLFNBQVMsTUFBTSxDQUFDLE1BQU0sU0FBUyxFQUFFLEdBQUc7QUFDaEQsWUFBTSxLQUFLLFNBQVMsU0FBUyxFQUFFO0FBQy9CLFVBQUksS0FBSztBQUFPLGdCQUFRO0FBQUEsSUFDNUI7QUFBQSxFQUNKLENBQUM7QUFHRCxRQUFNLFNBQVMsUUFBUTtBQUd2QixRQUFNLGdCQUFnQixlQUFlLG9CQUFJLEtBQUssQ0FBQztBQUUvQyxTQUFPO0FBQUEsSUFDSDtBQUFBLElBQ0EsUUFBUSxPQUFPO0FBQUEsSUFDZjtBQUFBLElBQ0E7QUFBQSxJQUNBLElBQUk7QUFBQSxJQUNKLE9BQU87QUFBQSxJQUNQLGFBQWEsSUFBSSxNQUFNO0FBQUEsRUFDM0I7QUFDSjtBQUVBLFNBQVMsZUFBZSxPQUFxQjtBQUN6QyxRQUFNLFNBQVMsTUFBTSxrQkFBa0IsSUFBSTtBQUMzQyxRQUFNLGFBQWEsSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLE1BQU07QUFDcEQsUUFBTSxlQUFlLFdBQVcsWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDMUQsUUFBTSxPQUFPLENBQUMsV0FBVyxTQUFTLFVBQVUsZ0JBQWEsVUFBVSxXQUFXLFdBQVE7QUFDdEYsUUFBTSxZQUFZLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDckMsUUFBTSxjQUFjLE1BQU0sYUFBYSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQztBQUNyRSxTQUFPLEdBQUcsWUFBWSxJQUFJLFNBQVMsSUFBSSxXQUFXO0FBQ3REO0FBRUEsZUFBc0IsdUJBQXVCLFVBQWVBLE1BQXlCO0FBbEdyRjtBQW9HSSxRQUFNLFFBQVFBLEtBQUksTUFBTSxpQkFBaUI7QUFDekMsUUFBTSxnQkFBZ0IsQ0FBQztBQUV2QixXQUFTLFFBQVEsT0FBTztBQUNwQixRQUFJLEtBQUssS0FBSyxXQUFXLFNBQVMsTUFBTSxHQUFHO0FBQ3ZDLFlBQU0sWUFBVyxLQUFBQSxLQUFJLGNBQWMsYUFBYSxJQUFJLE1BQW5DLG1CQUFzQztBQUN2RCxXQUFJLHFDQUFVLFlBQVcsYUFBTTtBQUMzQixzQkFBYyxLQUFLLEVBQUUsTUFBTSxTQUFTLFNBQVMsV0FBVyxLQUFLLFNBQVMsQ0FBQztBQUFBLE1BQzNFO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFFQSxNQUFJLGNBQWMsV0FBVyxHQUFHO0FBQzVCLFVBQU0sY0FBYyxjQUFjLENBQUM7QUFDbkM7QUFDQSxVQUFNLGVBQWUsTUFBTSxrQkFBa0IsWUFBWSxZQUFZLE9BQU8sMENBQW9DO0FBRWhILFFBQUksaUJBQWlCLFFBQVc7QUFDNUIsVUFBSSx5QkFBTyxtREFBZ0Q7QUFDM0QsZUFBUyxVQUFVO0FBQ25CO0FBQUEsSUFDSjtBQUVBLFFBQUksY0FBYztBQUNkLFlBQU0sYUFBYSxhQUFhQSxJQUFHO0FBQ25DLGVBQVMsVUFBVTtBQUFBLElBQ3ZCLE9BQU87QUFDSCxVQUFJLHlCQUFPLFlBQVksWUFBWSxPQUFPLCtCQUF5QjtBQUNuRSxlQUFTLFVBQVU7QUFDbkI7QUFBQSxJQUNKO0FBQUEsRUFDSixXQUFXLGNBQWMsU0FBUyxHQUFHO0FBQ2pDLFFBQUkseUJBQU8sbUVBQW1FO0FBQzlFLGFBQVMsVUFBVTtBQUFBLEVBQ3ZCLE9BQU87QUFDSCxZQUFRLElBQUksaUNBQThCO0FBQzFDLGFBQVMsVUFBVTtBQUFBLEVBQ3ZCO0FBQ0o7QUFFQSxTQUFTLGtCQUFrQixTQUErQztBQUN0RSxTQUFPLElBQUksUUFBUSxDQUFDLFlBQVk7QUFDNUIsUUFBSSxlQUFlO0FBRW5CLFVBQU0sUUFBUSxJQUFJLHdCQUFNLEdBQUc7QUFDM0IsVUFBTSxVQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBR2hELFVBQU0sbUJBQW1CLE1BQU0sVUFBVSxTQUFTLEtBQUs7QUFHdkQsVUFBTSxZQUFZLGlCQUFpQixTQUFTLFVBQVU7QUFBQSxNQUNsRCxNQUFNO0FBQUEsSUFDVixDQUFDO0FBQ0QsY0FBVSxpQkFBaUIsU0FBUyxNQUFNO0FBQ3RDLHFCQUFlO0FBQ2YsWUFBTSxNQUFNO0FBQ1osY0FBUSxJQUFJO0FBQUEsSUFDaEIsQ0FBQztBQUdELFVBQU0sV0FBVyxpQkFBaUIsU0FBUyxVQUFVO0FBQUEsTUFDakQsTUFBTTtBQUFBLElBQ1YsQ0FBQztBQUNELGFBQVMsaUJBQWlCLFNBQVMsTUFBTTtBQUNyQyxxQkFBZTtBQUNmLFlBQU0sTUFBTTtBQUNaLGNBQVEsS0FBSztBQUFBLElBQ2pCLENBQUM7QUFFRCxVQUFNLFVBQVUsTUFBTTtBQUNsQixVQUFJLENBQUMsY0FBYztBQUVmLGdCQUFRLE1BQVM7QUFBQSxNQUNyQjtBQUFBLElBQ0o7QUFFQSxVQUFNLEtBQUs7QUFBQSxFQUNmLENBQUM7QUFDTDtBQUdBLGVBQXNCLG9CQUFvQixVQUFlQSxNQUFVO0FBQy9ELFFBQU0sWUFBWSxNQUFNLDBCQUEwQkEsSUFBRztBQUNyRCxNQUFJLGdCQUFnQjtBQUNwQixNQUFJLFVBQVUsU0FBUyxHQUFHO0FBQ3RCLHFCQUFpQixDQUFDLFNBQVMsUUFBUSxnQ0FBNkIsTUFBTTtBQUN0RSxvQkFBZ0IsQ0FBQyxRQUFRLFNBQVMsTUFBTTtBQUFBLEVBQzVDLE9BQU87QUFDSCxxQkFBaUIsQ0FBQyxTQUFTLFFBQVEsTUFBTTtBQUN6QyxvQkFBZ0IsQ0FBQyxRQUFRLE1BQU07QUFBQSxFQUNuQztBQUNBLFFBQU0sY0FBYztBQUVwQixRQUFNLGFBQWEsSUFBSSxlQUFlQSxNQUFLLGdCQUFnQixlQUFlLFdBQVc7QUFHckYsTUFBSTtBQUNBLFVBQU0sWUFBWSxNQUFNLFdBQVcsc0JBQXNCO0FBQ3pELGFBQVMsZUFBZTtBQUd4QixZQUFPLFNBQVMsY0FBYztBQUFBLE1BQzFCLEtBQUs7QUFDRCxpQkFBUyxTQUFTLFNBQVM7QUFDM0IsaUJBQVMsV0FBVztBQUNwQjtBQUFBLE1BQ0osS0FBSztBQUVELGNBQU0sd0JBQXdCQSxNQUFLLFVBQVUsU0FBUztBQUN0RDtBQUFBLE1BQ0o7QUFFSSxpQkFBUyxXQUFXLFNBQVMsbUJBQW1CO0FBRWhEO0FBQUEsSUFDUjtBQUFBLEVBQ0osU0FBUyxPQUFPO0FBQ1osWUFBUSxNQUFNLDJDQUF3QyxLQUFLO0FBQUEsRUFHL0Q7QUFDSjtBQUdJLGVBQWUsMEJBQTBCQSxNQUE2QjtBQUNsRSxNQUFJLG1CQUE2QixDQUFDO0FBQ2xDLFFBQU0sV0FBV0EsS0FBSSxNQUFNLGlCQUFpQjtBQUM1QyxRQUFNLHFCQUFxQixTQUFTLE9BQU8sYUFBVyxDQUFDLFFBQVEsS0FBSyxTQUFTLFlBQVksQ0FBQztBQUUxRixhQUFXLFdBQVcsb0JBQW9CO0FBQ3RDLFVBQU0sWUFBWSxNQUFNQSxLQUFJLE1BQU0sS0FBSyxPQUFPO0FBQzlDLFVBQU0sZ0JBQWdCLFVBQVUsTUFBTSxrQkFBa0IsS0FBSyxDQUFDO0FBRzlELFVBQU0sZ0JBQWdCLGNBQWMsSUFBSSxXQUFTLE1BQU0sS0FBSyxDQUFDO0FBQzdELHVCQUFtQixpQkFBaUIsT0FBTyxhQUFhO0FBQUEsRUFDNUQ7QUFDQSxTQUFPO0FBQ1g7QUFFQSxlQUFlLHdCQUF3QkEsTUFBVSxVQUFlLGtCQUE0QjtBQUV4RixRQUFNLGNBQWM7QUFHcEIsTUFBSSxrQkFBa0IsaUJBQWlCLElBQUksV0FBUyxrQkFBa0IsS0FBSyxDQUFDO0FBRzVFLFVBQVEsSUFBSSxlQUFlLEVBQUUsS0FBSyxtQkFBaUI7QUFJL0MsVUFBTSxZQUFZLElBQUksZUFBZUEsTUFBSyxlQUFlLGVBQWUsV0FBVztBQUNuRixjQUFVLHNCQUFzQixFQUFFLEtBQUssZUFBYTtBQUNoRDtBQUNBLGVBQVMsU0FBUyxrQkFBbUIsU0FBUztBQUFBLElBRWxELENBQUMsRUFBRSxNQUFNLFdBQVM7QUFDZCxlQUFTLFVBQVU7QUFDbkIsY0FBUSxNQUFNLDJDQUF3QyxLQUFLO0FBQUEsSUFDL0QsQ0FBQztBQUFBLEVBQ0wsQ0FBQyxFQUFFLE1BQU0sV0FBUztBQUVkLFlBQVEsTUFBTSx3Q0FBd0MsS0FBSztBQUFBLEVBQy9ELENBQUM7QUFFTDtBQUVBLFNBQVMsa0JBQWtCLFFBQWlDO0FBQ3hELFNBQU8sSUFBSSxRQUFRLGFBQVc7QUFFMUIsUUFBSSxjQUFjLE9BQU8sTUFBTSxJQUFJLEVBQUUsQ0FBQztBQUd0QyxrQkFBYyxZQUFZLFFBQVEsYUFBYSxFQUFFO0FBR2pELGtCQUFjLFlBQVksUUFBUSxvQkFBb0IsRUFBRTtBQUd4RCxrQkFBYyxZQUFZLFFBQVEscUJBQXFCLEVBQUU7QUFHekQsVUFBTSx5QkFBeUI7QUFDL0Isa0JBQWMsWUFBWSxRQUFRLHdCQUF3QixHQUFHO0FBRzdELGtCQUFjLFlBQVksUUFBUSxRQUFRLEdBQUc7QUFHN0MsWUFBUSxZQUFZLEtBQUssQ0FBQztBQUFBLEVBQzlCLENBQUM7QUFDTDtBQUtKLGVBQWUsYUFBYSxhQUE4Q0EsTUFBeUI7QUFFL0YsVUFBUSxJQUFJLHdCQUF3QixZQUFZLE1BQU0sRUFBRTtBQUd4RCxRQUFNLGVBQWUsTUFBTUEsS0FBSSxNQUFNLEtBQUssWUFBWSxJQUFJO0FBQzFELFFBQU0sY0FBYyxhQUFhLFFBQVEscUJBQWMsbUJBQVk7QUFDbkUsUUFBTUEsS0FBSSxNQUFNLE9BQU8sWUFBWSxNQUFNLFdBQVc7QUFDeEQ7OztBRC9TTyxTQUFTQyxvQkFBbUIsUUFBc0I7QUFHckQsU0FBTyxpQkFBaUIsT0FBTyxjQUFjLFNBQVMsc0JBQXNCLE9BQU8sVUFBVTtBQUd6RixVQUFNLE9BQU8sSUFBSSx1QkFBSyxPQUFPLEdBQUc7QUFJaEMsUUFBSSxNQUFNLGdCQUFnQixPQUFPLEdBQUcsR0FBRztBQUNuQyxXQUFLLFFBQVEsQ0FBQyxTQUNWLEtBQUssU0FBUyxPQUFPLEVBQ2hCLFFBQVEsTUFBTTtBQUNYLGdCQUFRLElBQUksT0FBTztBQUFBLE1BQ3ZCLENBQUMsQ0FBQztBQUFBLElBQ2Q7QUFHQSxTQUFLLFFBQVEsQ0FBQyxTQUNWLEtBQUssU0FBUyxrQkFBa0IsRUFDM0IsUUFBUSxNQUFNO0FBRVgsY0FBUSxJQUFJLGtCQUFrQjtBQUFBLElBQ2xDLENBQUMsQ0FBQztBQUlWLFFBQUksTUFBTSxnQkFBZ0IsT0FBTyxHQUFHLEdBQUc7QUFDbkMsV0FBSyxRQUFRLENBQUMsU0FDVixLQUFLLFNBQVMsa0JBQWtCLEVBQzNCLFFBQVEsTUFBTTtBQUVYLGdCQUFRLElBQUksa0JBQWtCO0FBQUEsTUFDbEMsQ0FBQyxDQUFDO0FBQUEsSUFDZDtBQUVBLFNBQUssUUFBUSxDQUFDLFNBQ1YsS0FBSyxTQUFTLG9CQUFvQixFQUM3QixRQUFRLE1BQU07QUFFWCxjQUFRLElBQUksb0JBQW9CO0FBQUEsSUFDcEMsQ0FBQyxDQUFDO0FBRVYsU0FBSyxRQUFRLENBQUMsU0FDVixLQUFLLFNBQVMsa0JBQWtCLEVBQzNCLFFBQVEsTUFBTTtBQUVYLGNBQVEsSUFBSSxrQkFBa0I7QUFBQSxJQUNsQyxDQUFDLENBQUM7QUFHVixTQUFLLGVBQWUsRUFBRSxHQUFHLE1BQU0sT0FBTyxHQUFHLE1BQU0sTUFBTSxDQUFDO0FBQUEsRUFDMUQsQ0FBQztBQUNMO0FBRU8sU0FBUyxxQkFBcUIsUUFBc0I7QUFDdkQsTUFBSSxPQUFPLGdCQUFnQjtBQUN2QixXQUFPLGVBQWUsT0FBTztBQUM3QixXQUFPLGlCQUFpQjtBQUFBLEVBQzVCO0FBQ0o7OztBR2hFQSxJQUFBQyxvQkFBc0Q7OztBQ0F0RCxJQUFBQyxvQkFBMEM7QUFFbkMsSUFBTSxjQUFOLGNBQTBCLHdCQUFNO0FBQUEsRUFLbkMsWUFBWUMsTUFBVSxNQUFhO0FBQy9CLFVBQU1BLElBQUc7QUFDVCxTQUFLLE1BQU1BO0FBQ1gsU0FBSyxPQUFPO0FBQUEsRUFDaEI7QUFBQSxFQUVBLE1BQU0sU0FBUztBQWJuQjtBQWNRLFVBQU0sRUFBRSxVQUFVLElBQUk7QUFDdEIsVUFBTSxXQUFXLEtBQUssSUFBSSxjQUFjLGFBQWEsS0FBSyxJQUFJO0FBQzlELFVBQU0sWUFBVSwwQ0FBVSxnQkFBVixtQkFBdUIsWUFBVztBQUVsRCxVQUFNLGtCQUFnQiwwQ0FBVSxnQkFBVixtQkFBdUIsY0FBYSxPQUFPLE9BQU8sU0FBUyxZQUFZLFlBQVksdUJBQXVCLEVBQUUsT0FBTyxrQkFBa0IsSUFBSTtBQUcvSixjQUFVLFNBQVMsTUFBTSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDM0QsY0FBVSxTQUFTLEtBQUssRUFBRSxNQUFNLFdBQVcsT0FBTyxJQUFJLENBQUM7QUFDdkQsUUFBSSxlQUFlO0FBRWYsWUFBTSxhQUFhLE9BQU8sT0FBTyxlQUFlLHVCQUF1QjtBQUN2RSxZQUFNLFFBQVEsT0FBTyxPQUFPO0FBQzVCLFlBQU0sT0FBTyxNQUFNLEtBQUssVUFBVTtBQUNsQyxZQUFNLFdBQVcsT0FBTyxPQUFPLFNBQVMsSUFBSTtBQUM1QyxZQUFNLGdCQUFnQixHQUFHLFNBQVMsTUFBTSxDQUFDLEtBQUssU0FBUyxRQUFRLENBQUM7QUFFaEUsZ0JBQVUsU0FBUyxLQUFLLEVBQUUsTUFBTSx3QkFBd0IsYUFBYSxvQkFBaUIsQ0FBQztBQUFBLElBQzNGLE9BQU87QUFDSCxnQkFBVSxTQUFTLEtBQUssRUFBRSxNQUFNLDZEQUE2RCxDQUFDO0FBQUEsSUFDbEc7QUFFQSxjQUFVLFNBQVMsS0FBSyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbkQsU0FBSyxrQkFBa0IsVUFBVSxTQUFTLFNBQVM7QUFBQSxNQUMvQyxNQUFNO0FBQUEsTUFDTixPQUFPO0FBQUEsSUFDWCxDQUFDO0FBR0QsVUFBTSxhQUFhLFVBQVUsU0FBUyxVQUFVLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUMzRSxlQUFXLFVBQVUsTUFBTSxLQUFLLGVBQWU7QUFBQSxFQUNuRDtBQUFBLEVBRUEsTUFBTSxpQkFBaUI7QUFDbkIsVUFBTSx1QkFBdUIsS0FBSyxnQkFBZ0I7QUFFbEQsUUFBSSxDQUFDLHNCQUFzQjtBQUN2QixVQUFJLHlCQUFPLDJDQUEyQztBQUN0RDtBQUFBLElBQ0o7QUFHQSxVQUFNLGtCQUFrQixPQUFPLE9BQU8sb0JBQW9CLEVBQUUsT0FBTyx1QkFBdUI7QUFFMUYsUUFBSTtBQUVBLFlBQU0sb0JBQW9CLE1BQU0sS0FBSyxJQUFJLE1BQU0sS0FBSyxLQUFLLElBQUk7QUFFN0QsWUFBTSx1QkFBdUIsa0JBQWtCLFFBQVEsb0JBQW9CLEtBQUssZUFBZSxFQUFFO0FBR2pHLFlBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxLQUFLLE1BQU0sb0JBQW9CO0FBRzNELFdBQUssTUFBTTtBQUNYLFVBQUkseUJBQU8sMkNBQTJDO0FBQUEsSUFDMUQsU0FBUyxPQUFPO0FBQ1osY0FBUSxNQUFNLHdDQUF3QyxLQUFLO0FBQzNELFVBQUkseUJBQU8sMENBQTBDO0FBQUEsSUFDekQ7QUFBQSxFQUNKO0FBQ0o7OztBRHZFTyxTQUFTQyxrQkFBaUIsUUFBc0I7QUFFbkQsUUFBTSxNQUFNLE9BQU8sV0FBVztBQUFBLElBQzFCLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxJQUNOLGVBQWUsQ0FBQyxhQUFzQjtBQVQ5QztBQVVZLFlBQU0sYUFBYSxPQUFPLElBQUksVUFBVTtBQUN4QyxVQUFJLFlBQVk7QUFDWixjQUFNLGFBQVcsZ0JBQVcsS0FBSyxTQUFoQixtQkFBc0IsU0FBUTtBQUMvQyxZQUFJLFNBQVMsV0FBVyw2QkFBNkIsR0FBRztBQUNwRCxjQUFJLENBQUMsVUFBVTtBQUVYLG9CQUFRLElBQUksZ0NBQTZCO0FBQUEsVUFDN0M7QUFDQSxpQkFBTztBQUFBLFFBQ1g7QUFBQSxNQUNKO0FBQ0EsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKLENBQUM7QUFHRCxTQUFPLHVCQUF1QixLQUFLLElBQUksRUFBRTtBQUV6QyxRQUFNLE1BQU0sT0FBTyxXQUFXO0FBQUEsSUFDMUIsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sVUFBVSxZQUFZO0FBQ2xCLFlBQU0sU0FBUyxNQUFNLHVCQUF1QixPQUFPLEdBQUc7QUFFdEQsVUFBSSxDQUFDLFFBQVE7QUFDVCxZQUFJLHlCQUFPLHNCQUFzQjtBQUFBLE1BQ3JDLE9BQU87QUFFSCxZQUFJLFFBQVEsSUFBSSxZQUFZLE9BQU8sS0FBSyxNQUFNO0FBQzlDLGNBQU0sS0FBSztBQUFBLE1BQ2Y7QUFBQSxJQUNKO0FBQUEsRUFDSixDQUFDO0FBRUQsU0FBTyx1QkFBdUIsS0FBSyxJQUFJLEVBQUU7QUFFekMsUUFBTSxNQUFNLE9BQU8sV0FBVztBQUFBLElBQzFCLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxJQUNOLFVBQVUsWUFBWTtBQUNsQixZQUFNLFdBQVcsTUFBTSxvQkFBb0IsTUFBTTtBQUVqRCxVQUFJLENBQUMsVUFBVTtBQUNYLFlBQUkseUJBQU8seUNBQXlDO0FBQ3BEO0FBQUEsTUFDSjtBQUNBLFlBQU0sdUJBQXVCLFVBQVUsT0FBTyxHQUFHO0FBQ2pELFlBQU0sb0JBQW9CLFVBQVMsT0FBTyxHQUFHO0FBQUEsSUFJakQ7QUFBQSxFQUNKLENBQUM7QUFFRCxTQUFPLHVCQUF1QixLQUFLLElBQUksRUFBRTtBQUU3QztBQUlPLFNBQVNDLG9CQUFtQixRQUFzQjtBQUVyRCxNQUFJLENBQUMsT0FBTztBQUF3QjtBQUVwQyxTQUFPLHVCQUF1QixRQUFRLENBQUMsY0FBK0I7QUFDbEUsVUFBTSxVQUFVLE9BQU8sSUFBSSxTQUFTLFNBQVMsU0FBUztBQUV0RCxRQUFJLFNBQVM7QUFFVCxjQUFRLFdBQVcsTUFBTSxJQUFJLHlCQUFPLG1DQUFtQztBQUFBLElBRzNFO0FBQUEsRUFDSixDQUFDO0FBQ0w7OztBSjlFTyxJQUFNLHVCQUFOLE1BQTJCO0FBQUEsRUFHOUIsWUFBWSxRQUFnQjtBQUN4QixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsV0FBVztBQUVQLFFBQUksQ0FBQyxLQUFLLE9BQU8sZ0JBQWdCO0FBQzdCLE1BQUFDLG9CQUFtQixLQUFLLE1BQU07QUFBQSxJQUNsQztBQUNBLElBQUFDLGtCQUFpQixLQUFLLE1BQU07QUFBQSxFQUNoQztBQUFBLEVBRUEsYUFBYTtBQUNULHlCQUFxQixLQUFLLE1BQU07QUFDaEMsSUFBQUMsb0JBQW1CLEtBQUssTUFBTTtBQUFBLEVBQ2xDO0FBQ0o7OztBTXRCTyxJQUFNLG1CQUF1QztBQUFBLEVBQ2xELHNCQUFzQjtBQUFBLEVBQ3RCLHNCQUFzQjtBQUFBLEVBQ3RCLFlBQVk7QUFBQSxFQUNaLG9CQUFvQjtBQUFBLEVBQ3BCLG9CQUFvQjtBQUFBLEVBQ3BCLG9CQUFvQjtBQUFBLEVBQ3BCLGNBQWM7QUFBQSxFQUNkLGNBQWM7QUFBQSxFQUNkLG9CQUFvQjtBQUFBLEVBQ3BCLG9CQUFvQjtBQUFBLEVBQ3BCLGdCQUFnQjtBQUFBLEVBQ2hCLGdCQUFnQjtBQUFBLEVBQ2hCLHFCQUFxQjtBQUFBLEVBQ3JCLHFCQUFxQjtBQUFBLEVBQ3JCLGNBQWM7QUFBQSxFQUNkLGNBQWM7QUFBQSxFQUNkLHdCQUF3QjtBQUFBLEVBQ3hCLHdCQUF3QjtBQUFBLEVBQ3hCLHlCQUF5QjtBQUFBLEVBQ3pCLHlCQUF5QjtBQUFBLEVBQ3pCLGtCQUFrQjtBQUFBLEVBQ2xCLGtCQUFrQjtBQUFBLEVBQ2xCLGdCQUFnQjtBQUFBLEVBQ2hCLGdCQUFnQjtBQUFBLEVBQ2hCLHVCQUF1QjtBQUFBLEVBQ3ZCLHVCQUF1QjtBQUFBLEVBQ3ZCLGNBQWM7QUFBQSxFQUNkLGNBQWM7QUFBQSxFQUNkLHVCQUF1QjtBQUFBLEVBQ3ZCLHVCQUF1QjtBQUFBLEVBQ3ZCLG1CQUFtQjtBQUFBLEVBQ25CLG1CQUFtQjtBQUFBLEVBQ25CLHNCQUFzQjtBQUFBLEVBQ3RCLHNCQUFzQjtBQUFBLEVBQ3RCLGdCQUFnQjtBQUFBLEVBQ2hCLGdCQUFnQjtBQUFBLEVBQ2hCLDRCQUE0QjtBQUFBLEVBQzVCLDRCQUE0QjtBQUFBLEVBQzVCLHVCQUF1QjtBQUFBLEVBQ3ZCLHVCQUF1QjtBQUFBO0FBQUEsRUFFdkIsa0JBQWtCO0FBQUEsRUFDbEIsa0JBQWtCO0FBQUEsRUFDbEIsb0JBQXFCO0FBQUEsRUFDckIscUJBQXFCO0FBQUEsRUFDckIscUJBQXFCO0FBQUEsRUFDckIsdUJBQXVCO0FBQUEsRUFDdkIscUJBQXFCO0FBQUEsRUFDckIscUJBQXFCO0FBQ3ZCOzs7QUNyREEsSUFBQUMsb0JBQWtGOzs7QUNBbEYsSUFBQUMsb0JBQWtGOzs7QUNBbEYsSUFBQUMsb0JBQW9DO0FBRzdCLElBQU0sc0JBQU4sTUFBMEI7QUFBQSxFQUsvQixZQUFZQyxNQUFVLFFBQWdCO0FBRnRDLHNCQUFxQjtBQUduQixTQUFLLE1BQU1BO0FBQ1gsU0FBSyxTQUFTO0FBQUEsRUFDaEI7QUFBQSxFQUVBLGNBQWM7QUFDWixVQUFNLFFBQVEsU0FBUyxjQUFjLEtBQUs7QUFDMUMsVUFBTSxhQUFhLE1BQU0sa0JBQWtCO0FBQzNDLFVBQU0sTUFBTSxXQUFXO0FBQ3ZCLFVBQU0sTUFBTSxNQUFNO0FBQ2xCLFVBQU0sTUFBTSxPQUFPO0FBQ25CLFVBQU0sTUFBTSxZQUFZO0FBQ3hCLFVBQU0sTUFBTSxTQUFTO0FBQ3JCLFVBQU0sTUFBTSxVQUFVO0FBQ3RCLFVBQU0sTUFBTSxrQkFBa0I7QUFDOUIsVUFBTSxNQUFNLFNBQVM7QUFDckIsVUFBTSxNQUFNLGVBQWU7QUFDM0IsVUFBTSxNQUFNLFlBQVk7QUFDeEIsVUFBTSxNQUFNLFFBQVE7QUFFcEIsVUFBTSxjQUFjLFNBQVMsY0FBYyxRQUFRO0FBQ25ELGdCQUFZLGNBQWM7QUFDMUIsZ0JBQVksTUFBTSxXQUFXO0FBQzdCLGdCQUFZLE1BQU0sTUFBTTtBQUN4QixnQkFBWSxNQUFNLFFBQVE7QUFDMUIsZ0JBQVksTUFBTSxTQUFTO0FBQzNCLGdCQUFZLE1BQU0sYUFBYTtBQUMvQixnQkFBWSxNQUFNLFNBQVM7QUFDM0IsZ0JBQVksTUFBTSxXQUFXO0FBQzdCLGdCQUFZLE1BQU0sYUFBYTtBQUMvQixnQkFBWSxNQUFNLFVBQVU7QUFDNUIsZ0JBQVksTUFBTSxlQUFlO0FBQ2pDLGdCQUFZLE1BQU0sVUFBVTtBQUM1QixnQkFBWSxNQUFNLFlBQVk7QUFDOUIsZ0JBQVksVUFBVSxNQUFNLE1BQU0sT0FBTztBQUV6QyxVQUFNLFlBQVksV0FBVztBQUM3QixXQUFPO0FBQUEsRUFDVDtBQUFBLEVBRUEsWUFBWSxPQUFlLE9BQWM7QUFDdkMsV0FBTyxNQUFNO0FBQUEsTUFBTyxDQUFDLFNBQ25CLEtBQUssTUFBTSxZQUFZLEVBQUUsU0FBUyxNQUFNLFlBQVksQ0FBQztBQUFBLElBQ3ZEO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBTSxpQkFBaUIsTUFBdUIsZUFBb0IsZUFBb0I7QUFDcEYsUUFBSTtBQUNBO0FBQ0EsWUFBTSxPQUFPLElBQUksTUFBTSxzQkFBc0IsS0FBSyxVQUFVO0FBQzVELFlBQU0sSUFBSSxZQUFZLG1CQUFtQixNQUFNLENBQUMsZ0JBQXlDO0FBRXJGO0FBQ0EsWUFBSSxjQUFjLFlBQVksSUFBSSxLQUFLLENBQUM7QUFDeEMsWUFBSSxrQkFBa0IsQ0FBQyxHQUFHLGFBQWEsQ0FBQyxlQUFlLGFBQWEsQ0FBQztBQUNyRSxvQkFBWSxJQUFJLElBQUk7QUFBQSxNQUN0QixDQUFDO0FBQ0QsY0FBUSxJQUFJLHNDQUFtQztBQUFBLElBQ2pELFNBQVMsS0FBSztBQUNSLGNBQVEsTUFBTSxzQ0FBc0MsR0FBRztBQUFBLElBQ3pEO0FBQUEsRUFDSjtBQUFBLEVBRU4sTUFBTSxxQkFBcUIsT0FBWSxRQUFlLE1BQTBCO0FBQzlFLFdBQU8sSUFBSSxRQUFRLENBQUMsU0FBUyxXQUFXO0FBQ3BDLFVBQUksZ0JBQWdCO0FBQ3BCLFVBQUksZ0JBQWdCO0FBQ3BCLFlBQU0sUUFBUSxLQUFLLFlBQVk7QUFJL0IsWUFBTSxRQUFRLFNBQVMsY0FBYyxJQUFJO0FBQ3pDLFlBQU0sY0FBYztBQUNwQixZQUFNLE1BQU0sWUFBWTtBQUN4QixZQUFNLFlBQVksS0FBSztBQUV2QixZQUFNLFFBQVEsU0FBUyxjQUFjLE9BQU87QUFDNUMsWUFBTSxPQUFPO0FBQ2IsWUFBTSxjQUFjO0FBRXBCLFlBQU0sTUFBTSxRQUFRO0FBRXBCLFlBQU0sTUFBTSxZQUFZO0FBRXhCLFlBQU0sTUFBTSxVQUFVO0FBQ3RCLFlBQU0sTUFBTSxnQkFBZ0I7QUFDNUIsWUFBTSxNQUFNLGFBQWE7QUFDekIsWUFBTSxZQUFZLEtBQUs7QUFJdkIsWUFBTSxTQUFTLFNBQVMsY0FBYyxLQUFLO0FBQzNDLGFBQU8sTUFBTSxTQUFTO0FBQ3RCLFlBQU0sWUFBWSxNQUFNO0FBRXhCLFlBQU0sYUFBYSxTQUFTLGNBQWMsS0FBSztBQUMvQyxZQUFNLFlBQVksVUFBVTtBQUU1QixlQUFTLHFCQUFxQixpQkFBd0JDLFdBQWdCO0FBQ3BFLG1CQUFXLFlBQVk7QUFDdkIsd0JBQWdCLFFBQVEsQ0FBQyxXQUF1RTtBQUM5RixnQkFBTSxNQUFNLFNBQVMsY0FBYyxLQUFLO0FBQ3hDLGNBQUksY0FBYyxPQUFPO0FBQ3pCLGNBQUksTUFBTSxTQUFTO0FBQ25CLGNBQUksY0FBYyxNQUFPLElBQUksTUFBTSxrQkFBa0I7QUFDckQsY0FBSSxhQUFhLE1BQU8sSUFBSSxNQUFNLGtCQUFrQjtBQUNwRCxjQUFJLFVBQVUsTUFBTTtBQUNsQiw0QkFBZ0IsT0FBTztBQUN2Qiw0QkFBZ0IsT0FBTztBQUV2QixrQkFBTSxPQUFPO0FBQ2Isb0JBQVEsQ0FBQyxlQUFlLGFBQWEsQ0FBQztBQUFBLFVBQ3hDO0FBQ0EscUJBQVcsWUFBWSxHQUFHO0FBQUEsUUFDNUIsQ0FBQztBQUdELFlBQUksZ0JBQWdCLFdBQVcsS0FBSyxNQUFNLE1BQU0sS0FBSyxNQUFNLElBQUk7QUFDN0QsZ0JBQU0sZUFBZSxTQUFTLGNBQWMsS0FBSztBQUNqRCx1QkFBYSxjQUFjLDJCQUEyQixNQUFNLEtBQUs7QUFDakUsdUJBQWEsTUFBTSxTQUFTO0FBQzVCLHVCQUFhLE1BQU0sUUFBUTtBQUMzQix1QkFBYSxVQUFVLE1BQU07QUFDM0IsNEJBQWdCLE1BQU07QUFDdEI7QUFDQSxnQkFBSSxRQUFPLFFBQVU7QUFBRSxxQkFBTztBQUFBLFlBQVc7QUFDekMsc0NBQTBCQSxXQUFVLElBQUk7QUFBQSxVQUMxQztBQUNBLHFCQUFXLFlBQVksWUFBWTtBQUFBLFFBQ3JDO0FBQUEsTUFDRjtBQUVBLGVBQVMsMEJBQTBCQSxXQUFzSEMsT0FBVztBQUNsSyxtQkFBVyxZQUFZO0FBQ3ZCLGNBQU0sT0FBTztBQUNiLGVBQU8sT0FBTztBQUNkLGNBQU0sT0FBTztBQUViLGNBQU0sUUFBUSxTQUFTLGNBQWMsR0FBRztBQUN4QyxjQUFNLGNBQWMsZ0NBQWdDLGFBQWE7QUFBMEI7QUFDM0YsY0FBTSxNQUFNLFlBQVk7QUFDeEIsbUJBQVcsWUFBWSxLQUFLO0FBRTVCLGVBQU8sUUFBUSxDQUFDLFVBQXlCO0FBQ3ZDLGdCQUFNLFdBQVcsU0FBUyxjQUFjLEtBQUs7QUFDN0MsbUJBQVMsY0FBYztBQUN2QixtQkFBUyxNQUFNLFNBQVM7QUFDeEIsbUJBQVMsY0FBYyxNQUFPLFNBQVMsTUFBTSxrQkFBa0I7QUFDL0QsbUJBQVMsYUFBYSxNQUFPLFNBQVMsTUFBTSxrQkFBa0I7QUFDOUQsbUJBQVMsVUFBVSxZQUFZO0FBQzdCLDRCQUFnQjtBQUVoQixrQkFBTSxPQUFPO0FBQ2IsZ0JBQUksYUFBYSxNQUFNRCxVQUFTLGFBQWEsYUFBYTtBQUMxRCxnQkFBSSxZQUFXO0FBQ2Isb0JBQU1BLFVBQVMsaUJBQWlCQyxPQUFNLGVBQWUsYUFBYTtBQUFBLFlBQ3BFO0FBQ0Esb0JBQVEsQ0FBQyxlQUFlLGFBQWEsQ0FBQztBQUFBLFVBQ3hDO0FBQ0EscUJBQVcsWUFBWSxRQUFRO0FBQUEsUUFDakMsQ0FBQztBQUFBLE1BQ0g7QUFFQSxlQUFTLHFCQUFxQixVQUFlLE9BQVk7QUFDdkQsbUJBQVcsWUFBWSxpQkFBaUIsUUFBUSxNQUFNLEtBQUs7QUFBQSxNQUU3RDtBQUVBLFlBQU0sVUFBVSxNQUFNO0FBQ3BCLGNBQU0sZ0JBQWdCLEtBQUssWUFBWSxNQUFNLE9BQU8sS0FBSztBQUN6RCw2QkFBcUIsZUFBZSxJQUFJO0FBQUEsTUFDMUM7QUFFQSxlQUFTLEtBQUssWUFBWSxLQUFLO0FBQUEsSUFFbkMsQ0FBQztBQUFBLEVBQ0w7QUFBQSxFQUVBLE1BQU0sYUFBYSxPQUE4QjtBQUMvQyxVQUFNLFdBQVcsQ0FBQyxNQUFLLElBQUk7QUFDM0IsVUFBTSxVQUFVLENBQUMsTUFBSyxLQUFLO0FBQzNCLFVBQU0sY0FBYyxHQUFHLEtBQUs7QUFDNUIsVUFBTSxRQUFRLElBQUksZUFBZSxLQUFLLFVBQVUsU0FBUyxXQUFXO0FBQ3BFLFFBQUk7QUFDRixhQUFPLE1BQU0sTUFBTSxzQkFBc0I7QUFBQSxJQUMzQyxTQUFTLE9BQU87QUFDZCxjQUFRLE1BQU0sMkNBQXdDLEtBQUs7QUFDM0QsYUFBTztBQUFBLElBQ1A7QUFBQSxFQUNKO0FBRUE7OztBRDlMTyxJQUFNLFdBQU4sTUFBZTtBQUFBLEVBT2xCLFlBQVksUUFBZ0I7QUFMNUIsc0JBQXFCO0FBQ3JCLDRCQUEwQjtBQUMxQix5QkFBd0I7QUFJcEIsU0FBSyxTQUFTO0FBQ2QsU0FBSyxpQkFBaUIsSUFBSSxvQkFBb0IsS0FBSyxLQUFLLE1BQU07QUFBQSxFQUNoRTtBQUFBLEVBRUEsTUFBTSxTQUFVQyxNQUFVLFVBQWM7QUFDdEMsVUFBTSxlQUFlLENBQUMsV0FBVyxpQkFBaUIsdUJBQW9CLGtCQUFrQixpQkFBaUIsc0JBQW1CLG9CQUFvQjtBQUNoSixVQUFNLGNBQWMsQ0FBQyxPQUFPLFVBQVUsVUFBVSxVQUFVLFlBQVksVUFBVSxRQUFRO0FBQ3hGLFVBQU0sa0JBQWtCO0FBQ3hCLFVBQU0sWUFBWSxJQUFJLGVBQWVBLE1BQUssY0FBYyxhQUFhLGVBQWU7QUFDcEYsUUFBSTtBQUNKLFFBQUksV0FBb0I7QUFDeEIsUUFBSTtBQUNBLFlBQU0sZ0JBQWdCLE1BQU0sVUFBVSxzQkFBc0I7QUFDNUQsY0FBTyxlQUFlO0FBQUEsUUFFbEIsS0FBSztBQUNELHFCQUFXLE1BQU0sS0FBSyxTQUFTQSxJQUFHO0FBQ2xDO0FBQUEsUUFDSixLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQUEsUUFDTCxLQUFLO0FBQ0QscUJBQVcsTUFBTSxLQUFLLE9BQU9BLE1BQUksYUFBYTtBQUM5QyxxQkFBVztBQUNYO0FBQUEsUUFDSixLQUFLO0FBRUQ7QUFBQSxNQUNBO0FBQUEsSUFDUCxTQUFTLE9BQU87QUFDakIsY0FBUSxNQUFNLDJDQUF3QyxLQUFLO0FBQzNELGVBQVMsVUFBVTtBQUNuQixhQUFPO0FBQUEsSUFDUDtBQUNBLFdBQU8sRUFBQyxRQUFRLFNBQVMsWUFBWSxRQUFRLFNBQVMsT0FBTyxVQUFVLFFBQVEsU0FBUyxPQUFNO0FBQUEsRUFDbEc7QUFBQSxFQUVBLE1BQU0sU0FBVUEsTUFBUztBQUNyQixVQUFNLFNBQVMsTUFBTSxLQUFLLG9CQUFvQkEsTUFBSSxLQUFLLFlBQVksT0FBTztBQUMxRSxVQUFNLGFBQWEsTUFBTSxLQUFLLFdBQVdBLE1BQUksV0FBVztBQUV4RCxRQUFJLGlCQUFpQixXQUNwQixPQUFPLENBQUMsU0FBUyxPQUFPLFNBQVMsS0FBSyxLQUFLLENBQUMsRUFDNUMsSUFBSSxDQUFDLFVBQVU7QUFBQSxNQUNaLE9BQU8sR0FBRyxLQUFLLFNBQVMsTUFBTSxLQUFLLEtBQUs7QUFBQTtBQUFBLE1BQ3hDLFVBQVUsS0FBSztBQUFBO0FBQUEsTUFDZixPQUFPLEtBQUs7QUFBQTtBQUFBLElBRWhCLEVBQUU7QUFDRixRQUFJLFdBQVcsTUFBTSxLQUFLLGVBQWUscUJBQXFCLGdCQUFnQixNQUFNO0FBQ3BGLFFBQUksY0FBYyxFQUFDLE9BQU8sU0FBUyxDQUFDLEdBQUcsV0FBVyxTQUFTLENBQUMsR0FBRyxRQUFRLEdBQUU7QUFDekUsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sUUFBU0EsTUFBUztBQUFBLEVBRXhCO0FBQUEsRUFFQSxNQUFPLE9BQVFBLE1BQVUsTUFBNEI7QUFDakQsVUFBTSxjQUFjLE1BQU0sS0FBSyxXQUFXQSxNQUFLLElBQUk7QUFDbkQ7QUFDQSxVQUFNLFdBQVcsTUFBTSxLQUFLLHVCQUF1QkEsTUFBSSxJQUFJO0FBRzNELFVBQU0sU0FBUyxTQUFTLElBQUksVUFBUSxLQUFLLFlBQVksVUFBVSxLQUFLLFlBQVksUUFBUSxDQUFDLElBQUksSUFBSSxFQUFFLE9BQU8sQ0FBQUMsV0FBU0EsV0FBVSxJQUFJO0FBRWpJLFFBQUksaUJBQWlCLFlBQ3BCLE9BQU8sQ0FBQyxTQUFTLE9BQU8sU0FBUyxLQUFLLEtBQUssQ0FBQyxFQUM1QyxJQUFJLENBQUMsVUFBVTtBQUFBLE1BQ1osT0FBTyxHQUFHLEtBQUssU0FBUyxNQUFNLEtBQUssS0FBSztBQUFBO0FBQUEsTUFDeEMsVUFBVSxLQUFLO0FBQUE7QUFBQSxNQUNmLE9BQU8sS0FBSztBQUFBO0FBQUEsSUFFaEIsRUFBRTtBQUdGLFFBQUksV0FBVyxNQUFNLEtBQUssZUFBZSxxQkFBcUIsZ0JBQWdCLFFBQVEsSUFBSTtBQUMxRixVQUFNLGVBQWUsU0FBUyxLQUFLLE9BQUssRUFBRSxZQUFZLFFBQVEsQ0FBQyxNQUFNLFNBQVMsQ0FBQyxDQUFDO0FBRWhGLFFBQUksUUFBUSw2Q0FBYyxLQUFLO0FBQy9CLFFBQUksY0FBYyxFQUFDLE9BQU8sU0FBUyxDQUFDLEdBQUcsV0FBVyxTQUFTLENBQUMsR0FBRyxRQUFRLE1BQUs7QUFDNUUsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sT0FBUUQsTUFBUztBQUFBLEVBRXZCO0FBQUEsRUFFQSxNQUFPLFdBQVdBLE1BQVUsTUFBeUM7QUEzRzdFO0FBNkdZLFVBQU0sT0FBT0EsS0FBSSxNQUFNLHNCQUFzQixLQUFLLFVBQVU7QUFDNUQsUUFBSTtBQUNBLFVBQUksZ0JBQWdCLHlCQUFPO0FBRXZCLGNBQU0sV0FBV0EsS0FBSSxjQUFjLGFBQWEsSUFBSTtBQUdwRCxjQUFNLGtCQUFnQiwwQ0FBVSxnQkFBVixtQkFBd0IsVUFBUyxDQUFDO0FBR3hELGNBQU0sWUFBOEIsQ0FBQztBQUdyQyxZQUFJLE1BQU0sUUFBUSxhQUFhLEdBQUc7QUFDOUIsd0JBQWMsUUFBUSxVQUFRO0FBQzFCLGdCQUFJLE1BQU0sUUFBUSxJQUFJLEtBQUssS0FBSyxVQUFVLEdBQUc7QUFDekMsd0JBQVUsS0FBSyxFQUFFLE9BQU8sS0FBSyxDQUFDLEdBQUcsV0FBVyxLQUFLLENBQUMsRUFBRSxDQUFDO0FBQUEsWUFDekQ7QUFBQSxVQUNKLENBQUM7QUFBQSxRQUNMO0FBRUEsZUFBTztBQUFBLE1BQ1g7QUFBQSxJQUNKLFNBQVMsT0FBTztBQUNaLGNBQVEsTUFBTSwwQ0FBMEMsS0FBSztBQUU3RCxZQUFNO0FBQUEsSUFDVjtBQUdBLFdBQU8sQ0FBQztBQUFBLEVBQ1o7QUFBQSxFQUVBLE1BQU0sb0JBQW9CQSxNQUFVLE1BQWMsT0FBNkI7QUFDM0UsUUFBSTtBQUNBLFlBQU0sUUFBUUEsS0FBSSxNQUFNLHNCQUFzQixJQUFJO0FBQ2xELFVBQUksaUJBQWlCLHlCQUFPO0FBQ3hCLGNBQU0sUUFBUUEsS0FBSSxjQUFjLGFBQWEsS0FBSztBQUNsRCxjQUFNLGNBQWMsK0JBQU87QUFFM0IsWUFBSSxlQUFlLFlBQVksZUFBZSxLQUFLLEdBQUc7QUFDbEQsZ0JBQU0sYUFBYSxZQUFZLEtBQUs7QUFFcEMsY0FBSSxlQUFlLFVBQWEsZUFBZSxRQUFRLGVBQWUsSUFBSTtBQUN0RSxvQkFBUSxJQUFJLHdDQUFrQztBQUM5QyxtQkFBTztBQUFBLFVBQ1gsT0FBTztBQUNILG9CQUFRLElBQUkscUNBQWtDO0FBQzlDLG1CQUFPO0FBQUEsVUFDWDtBQUFBLFFBQ0osT0FBTztBQUNILGtCQUFRLElBQUksdUNBQXVDO0FBQ25ELGlCQUFPO0FBQUEsUUFDWDtBQUFBLE1BQ0osT0FBTztBQUNILGdCQUFRLE1BQU0sbURBQW1EO0FBQ2pFLGVBQU87QUFBQSxNQUNYO0FBQUEsSUFDSixTQUFTLEtBQUs7QUFDVixjQUFRLE1BQU0scUNBQXFDLEdBQUc7QUFDdEQsYUFBTztBQUFBLElBQ1g7QUFBQSxFQUNKO0FBQUE7QUFBQSxFQUlBLE1BQU0sdUJBQXVCQSxNQUFLLE1BQU07QUFFcEMsVUFBTSxpQkFBaUI7QUFBQSxNQUNuQixRQUFRO0FBQUEsUUFDTixRQUFRLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0IsVUFBVTtBQUFBLFFBQ1YsVUFBVSxLQUFLLE9BQU8sU0FBUztBQUFBLE1BQ2pDO0FBQUEsTUFDQSxRQUFRO0FBQUEsUUFDSixRQUFRLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0IsVUFBVTtBQUFBLFFBQ1YsVUFBVSxLQUFLLE9BQU8sU0FBUztBQUFBLE1BQ2pDO0FBQUEsTUFDRixRQUFRO0FBQUEsUUFDTixRQUFRLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0IsVUFBVTtBQUFBLFFBQ1YsVUFBVTtBQUFBLE1BQ1o7QUFBQSxNQUNBLFVBQVU7QUFBQSxRQUNOLFFBQVEsS0FBSyxPQUFPLFNBQVM7QUFBQSxRQUM3QixVQUFVO0FBQUEsUUFDVixVQUFVO0FBQUEsTUFDWjtBQUFBLE1BQ0YsUUFBUTtBQUFBLFFBQ0YsUUFBUSxLQUFLLE9BQU8sU0FBUztBQUFBLFFBQzdCLFVBQVU7QUFBQSxRQUNWLFVBQVU7QUFBQSxNQUNaO0FBQUEsTUFDSixRQUFRO0FBQUEsUUFDSixRQUFRLEtBQUssT0FBTyxTQUFTO0FBQUEsUUFDN0IsVUFBVTtBQUFBLFFBQ1YsVUFBVTtBQUFBLE1BQ1o7QUFBQTtBQUFBLElBRUo7QUFHRCxRQUFJLGVBQWUsZUFBZSxJQUFJLEdBQUc7QUFDdEMsWUFBTSxFQUFFLFFBQVEsVUFBVSxTQUFTLElBQUksZUFBZSxJQUFJO0FBQzFELFlBQU0sZ0JBQWdCQSxLQUFJLE1BQU0sU0FBUyxFQUFFLE9BQU8sVUFBUSxLQUFLLEtBQUssV0FBVyxNQUFNLENBQUM7QUFDdEYsWUFBTSx1QkFBdUIsQ0FBQztBQUU5QixpQkFBVyxRQUFRLGVBQWU7QUFDOUIsWUFBSyxZQUFZLEtBQUssYUFBYSxZQUFhLENBQUMsVUFBVTtBQUN2RCxnQkFBTSxXQUFXQSxLQUFJLGNBQWMsYUFBYSxJQUFJO0FBQ3BELGNBQUksU0FBUyxlQUFlLFNBQVMsWUFBWSxXQUFXLGFBQU07QUFDOUQsaUNBQXFCLEtBQUssRUFBRSxNQUFZLGFBQWEsU0FBUyxZQUFZLENBQUM7QUFBQSxVQUMvRTtBQUFBLFFBQ0o7QUFBQSxNQUNKO0FBQ0EsYUFBTztBQUFBLElBQ1gsT0FBTztBQUNILGNBQVEsSUFBSSwrQkFBNEIsSUFBSTtBQUM1QyxhQUFPLENBQUM7QUFBQSxJQUNaO0FBQUEsRUFDSDtBQUVUOzs7QURwT08sSUFBTSxXQUFOLE1BQWU7QUFBQSxFQUlsQixZQUFZLFFBQWdCO0FBQzFCLFNBQUssU0FBUztBQUNkLFNBQUssV0FBVyxJQUFJLFNBQVMsTUFBTTtBQUFBLEVBQ3JDO0FBQUEsRUFFQSxNQUFNLHVCQUF1QkUsTUFBVSxVQUFzQztBQWJqRjtBQWVJLFVBQU0sUUFBUUEsS0FBSSxNQUFNLGlCQUFpQjtBQUV4QyxhQUFTLFFBQVEsT0FBTztBQUNwQixVQUFJLEtBQUssS0FBSyxXQUFXLFNBQVMsTUFBTSxHQUFHO0FBRXZDLGNBQU0sV0FBV0EsS0FBSSxjQUFjLGFBQWEsSUFBSTtBQUdwRCxjQUFJLDBDQUFVLGdCQUFWLG1CQUF1QixZQUFXLGFBQU07QUFFekMsaUJBQU87QUFBQSxRQUNWO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQTtBQUFBLEVBQ0Q7QUFBQTtBQUFBLEVBR0EsTUFBTSxvQkFBb0IsUUFBZ0I7QUFFdEMsVUFBTSxTQUFTLE9BQU8sSUFBSSxVQUFVLGNBQWM7QUFDbEQsUUFBSSxDQUFDLFFBQVE7QUFDVCxjQUFRLE1BQU0sNEhBQXNIO0FBQ3BJLGFBQU87QUFBQSxJQUNYO0FBRUEsVUFBTSxTQUFTLE9BQU8sU0FBUztBQUMvQixVQUFNLFNBQVMsT0FBTyxTQUFTO0FBRS9CLFFBQUksUUFBUTtBQUdaLFVBQU0sUUFBUSxJQUFJLE1BQU0saUJBQWlCO0FBR3pDLFVBQU0sc0JBQXNCLE1BQU0sT0FBTyxDQUFDLFNBQTRCLEtBQUssS0FBSyxXQUFXLE1BQU0sQ0FBQztBQUdsRyx3QkFBb0IsUUFBUSxDQUFDLFNBQWM7QUF0RG5EO0FBdURZLFlBQU0sWUFBVyxTQUFJLGNBQWMsYUFBYSxJQUFJLE1BQW5DLG1CQUFzQztBQUN2RCxVQUFJLFlBQVksU0FBUyxNQUFNLENBQUMsTUFBTSxTQUFTLEVBQUUsR0FBRztBQUNoRCxjQUFNLEtBQUssU0FBUyxTQUFTLEVBQUU7QUFDL0IsWUFBSSxLQUFLO0FBQU8sa0JBQVE7QUFBQSxNQUM1QjtBQUFBLElBQ0osQ0FBQztBQUdELFVBQU0sU0FBUyxRQUFRO0FBR3ZCLFVBQU0sZ0JBQWdCLEtBQUssZUFBZSxvQkFBSSxLQUFLLENBQUM7QUFFcEQsV0FBTztBQUFBLE1BQ0g7QUFBQSxNQUNBLFFBQVEsT0FBTztBQUFBLE1BQ2Y7QUFBQSxNQUNBO0FBQUEsTUFDQSxJQUFJO0FBQUEsTUFDSixPQUFPO0FBQUEsTUFDUCxhQUFhLElBQUksTUFBTTtBQUFBLElBQzNCO0FBQUEsRUFDSjtBQUFBLEVBRUEsZUFBZSxPQUFxQjtBQUNoQyxVQUFNLFNBQVMsTUFBTSxrQkFBa0IsSUFBSTtBQUMzQyxVQUFNLGFBQWEsSUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLE1BQU07QUFDcEQsVUFBTSxlQUFlLFdBQVcsWUFBWSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDMUQsVUFBTSxPQUFPLENBQUMsV0FBVyxTQUFTLFVBQVUsZ0JBQWEsVUFBVSxXQUFXLFdBQVE7QUFDdEYsVUFBTSxZQUFZLEtBQUssTUFBTSxPQUFPLENBQUM7QUFDckMsVUFBTSxjQUFjLE1BQU0sYUFBYSxFQUFFLE1BQU0sR0FBRyxFQUFFLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQztBQUNyRSxXQUFPLEdBQUcsWUFBWSxJQUFJLFNBQVMsSUFBSSxXQUFXO0FBQUEsRUFDdEQ7QUFBQSxFQUVKLE1BQU0sdUJBQXVCLFVBQWVBLE1BQXlCO0FBekZyRTtBQTJGSSxVQUFNLFFBQVFBLEtBQUksTUFBTSxpQkFBaUI7QUFDekMsVUFBTSxnQkFBZ0IsQ0FBQztBQUV2QixhQUFTLFFBQVEsT0FBTztBQUNwQixVQUFJLEtBQUssS0FBSyxXQUFXLFNBQVMsTUFBTSxHQUFHO0FBQ3ZDLGNBQU0sWUFBVyxLQUFBQSxLQUFJLGNBQWMsYUFBYSxJQUFJLE1BQW5DLG1CQUFzQztBQUN2RCxhQUFJLHFDQUFVLFlBQVcsYUFBTTtBQUMzQix3QkFBYyxLQUFLLEVBQUUsTUFBTSxRQUFRLFNBQVMsUUFBUSxTQUFTLFNBQVMsV0FBVyxLQUFLLFNBQVMsQ0FBQztBQUFBLFFBQ3BHO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxRQUFJLGNBQWMsV0FBVyxHQUFHO0FBQzVCLFlBQU0sY0FBYyxjQUFjLENBQUM7QUFDbkMsWUFBTSxlQUFlLE1BQU0sS0FBSyxrQkFBa0IsWUFBWSxZQUFZLE9BQU8sMENBQW9DO0FBQ3JIO0FBQ0EsVUFBSSxpQkFBaUIsUUFBVztBQUM1QixZQUFJLHlCQUFPLG1EQUFnRDtBQUMzRCxpQkFBUyxVQUFVO0FBQ25CO0FBQUEsTUFDSjtBQUVBLFVBQUksY0FBYztBQUNkLGNBQU0sS0FBSyxhQUFhLGFBQWFBLElBQUc7QUFDeEMsaUJBQVMsVUFBVTtBQUFBLE1BQ3ZCLE9BQU87QUFDSCxZQUFJLHlCQUFPLFlBQVksWUFBWSxPQUFPLCtCQUF5QjtBQUNuRSxpQkFBUyxVQUFVO0FBQ25CO0FBQUEsTUFDSjtBQUFBLElBQ0osV0FBVyxjQUFjLFNBQVMsR0FBRztBQUNqQyxVQUFJLHlCQUFPLG1FQUFtRTtBQUM5RSxlQUFTLFVBQVU7QUFBQSxJQUN2QixPQUFPO0FBQ0gsY0FBUSxJQUFJLGlDQUE4QjtBQUMxQyxlQUFTLFVBQVU7QUFBQSxJQUN2QjtBQUFBLEVBQ0o7QUFBQSxFQUVJLGtCQUFrQixTQUFtQztBQUNqRCxXQUFPLElBQUksUUFBUSxDQUFDLFNBQVMsV0FBVztBQUNwQyxVQUFJLGVBQWU7QUFFbkIsWUFBTSxRQUFRLElBQUksd0JBQU0sR0FBRztBQUMzQixZQUFNLFVBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFHaEQsWUFBTSxtQkFBbUIsTUFBTSxVQUFVLFNBQVMsS0FBSztBQUd2RCxZQUFNLGlCQUFpQixDQUFDLGNBQXVCO0FBQzNDLHVCQUFlO0FBQ2YsY0FBTSxNQUFNO0FBQ1osZ0JBQVEsU0FBUztBQUFBLE1BQ3JCO0FBR0EsWUFBTSxZQUFZLGlCQUFpQixTQUFTLFVBQVU7QUFBQSxRQUNsRCxNQUFNO0FBQUEsTUFDVixDQUFDO0FBQ0QsZ0JBQVUsaUJBQWlCLFNBQVMsTUFBTSxlQUFlLElBQUksQ0FBQztBQUc5RCxZQUFNLFdBQVcsaUJBQWlCLFNBQVMsVUFBVTtBQUFBLFFBQ2pELE1BQU07QUFBQSxNQUNWLENBQUM7QUFDRCxlQUFTLGlCQUFpQixTQUFTLE1BQU0sZUFBZSxLQUFLLENBQUM7QUFFOUQsWUFBTSxVQUFVLE1BQU07QUFDbEIsWUFBSSxDQUFDLGNBQWM7QUFFZixpQkFBTyxJQUFJLE1BQU0sZ0NBQTZCLENBQUM7QUFBQSxRQUNuRDtBQUFBLE1BQ0o7QUFHQSxZQUFNLFVBQVUsaUJBQWlCLFdBQVcsQ0FBQyxNQUFxQjtBQXZLOUU7QUF3S2dCLGdCQUFRLEVBQUUsS0FBSztBQUFBLFVBQ1gsS0FBSztBQUNELHNCQUFVLE1BQU07QUFDaEI7QUFBQSxVQUNKLEtBQUs7QUFDRCxxQkFBUyxNQUFNO0FBQ2Y7QUFBQSxVQUNKLEtBQUs7QUFFRCwyQkFBUyxrQkFBVCxtQkFBd0I7QUFDeEI7QUFBQSxRQUNSO0FBQUEsTUFDSixDQUFDO0FBR0QsZ0JBQVUsTUFBTTtBQUVoQixZQUFNLEtBQUs7QUFBQSxJQUNmLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFJQSxNQUFNLG9CQUFvQixVQUFlQSxNQUFVO0FBQy9DLFVBQU0sWUFBWSxNQUFNLEtBQUssMEJBQTBCQSxJQUFHO0FBRTFELFFBQUksZ0JBQWdCO0FBQ3BCLFFBQUksVUFBVSxTQUFTLEdBQUc7QUFDdEIsdUJBQWlCLENBQUMsU0FBUyxRQUFRLGdDQUE2QixNQUFNO0FBQ3RFLHNCQUFnQixDQUFDLFFBQVEsU0FBUyxNQUFNO0FBQUEsSUFDNUMsT0FBTztBQUNILHVCQUFpQixDQUFDLFNBQVMsUUFBUSxNQUFNO0FBQ3pDLHNCQUFnQixDQUFDLFFBQVEsTUFBTTtBQUFBLElBQ25DO0FBQ0EsVUFBTSxjQUFjO0FBRXBCLFVBQU0sYUFBYSxJQUFJLGVBQWVBLE1BQUssZ0JBQWdCLGVBQWUsV0FBVztBQUdyRixRQUFJO0FBQ0EsWUFBTSxZQUFZLE1BQU0sV0FBVyxzQkFBc0I7QUFDekQsZUFBUyxlQUFlO0FBR3hCLGNBQU8sU0FBUyxjQUFjO0FBQUEsUUFDMUIsS0FBSztBQUNELG1CQUFTLFNBQVMsU0FBUztBQUMzQixtQkFBUyxXQUFXO0FBQ3BCO0FBQUEsUUFDSixLQUFLO0FBR0QsZ0JBQU0sS0FBSyx3QkFBd0JBLE1BQUssVUFBVSxTQUFTO0FBQzNEO0FBQUEsUUFDSjtBQUVJLGNBQUksWUFBWSxNQUFNLEtBQUssU0FBUyxTQUFTQSxNQUFLLFFBQVE7QUFDMUQ7QUFDQSxpQkFBTyxPQUFPLFVBQVUsU0FBUztBQUNqQztBQUFBLE1BQ0E7QUFBQSxJQUNaLFNBQVMsT0FBTztBQUNaLGNBQVEsTUFBTSwyQ0FBd0MsS0FBSztBQUFBLElBRy9EO0FBQUEsRUFDSjtBQUFBLEVBR0EsTUFBTSwwQkFBMEJBLE1BQXdEO0FBQ3BGLFFBQUksbUJBQXdELENBQUM7QUFDN0QsVUFBTSxXQUFXQSxLQUFJLE1BQU0saUJBQWlCO0FBQzVDLFVBQU0scUJBQXFCLFNBQVMsT0FBTyxDQUFDLFlBQStCLENBQUMsUUFBUSxLQUFLLFNBQVMsWUFBWSxDQUFDO0FBRS9HLGVBQVcsV0FBVyxvQkFBb0I7QUFDdEMsWUFBTSxZQUFZLE1BQU1BLEtBQUksTUFBTSxLQUFLLE9BQU87QUFDOUMsWUFBTSxnQkFBZ0IsVUFBVSxNQUFNLGtCQUFrQixLQUFLLENBQUM7QUFHOUQsWUFBTSxtQkFBbUIsY0FBYyxJQUFJLENBQUMsVUFBa0I7QUFDMUQsZUFBTyxFQUFFLE9BQU8sTUFBTSxLQUFLLEdBQUcsUUFBaUI7QUFBQSxNQUNuRCxDQUFDO0FBQ0QseUJBQW1CLGlCQUFpQixPQUFPLGdCQUFnQjtBQUFBLElBQy9EO0FBQ0EsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUdBLE1BQU0sd0JBQXdCQSxNQUFVLFVBQWUsa0JBQXVCO0FBQzFFLFVBQU0sY0FBYztBQUdwQixRQUFJLGtCQUFrQixpQkFBaUIsSUFBSSxDQUFDLGFBQWlDLEtBQUssa0JBQWtCLFNBQVMsS0FBSyxDQUFDO0FBRW5ILFFBQUk7QUFFQSxZQUFNLGdCQUFnQixNQUFNLFFBQVEsSUFBSSxlQUFlO0FBR3ZELFlBQU0sMEJBQTBCLGlCQUFpQixJQUFJLENBQUMsVUFBNkIsVUFBMkI7QUFDMUcsZUFBTztBQUFBLFVBQ0gsT0FBTyxjQUFjLEtBQUs7QUFBQTtBQUFBLFVBQzFCLFNBQVMsU0FBUztBQUFBO0FBQUEsUUFDdEI7QUFBQSxNQUNKLENBQUM7QUFHRCxZQUFNLFdBQVcsd0JBQXdCO0FBQ3pDLFlBQU0sbUJBQW1CLE1BQU0sS0FBSyxFQUFFLFFBQVEsU0FBUyxHQUFHLENBQUMsR0FBRyxXQUFXLE1BQU07QUFFL0UsWUFBTSxZQUFZLElBQUksZUFBZUEsTUFBSyx3QkFBd0IsSUFBSSxDQUFDLE1BQXVCLEVBQUUsS0FBSyxHQUFHLGtCQUFrQixXQUFXO0FBQ3JJLFVBQUk7QUFFQSxjQUFNLGdCQUFnQixNQUFNLFVBQVUsc0JBQXNCO0FBRzVELGNBQU0sWUFBWSx3QkFBd0IsYUFBYTtBQUN2RCxpQkFBUyxTQUFTLFVBQVU7QUFDNUIsaUJBQVMsU0FBUyxVQUFVLFFBQVE7QUFDcEMsaUJBQVMsV0FBVztBQUFBLE1BQ3hCLFNBQVMsT0FBTztBQUVaLGlCQUFTLFVBQVU7QUFDbkIsZ0JBQVEsTUFBTSwyQ0FBd0MsS0FBSztBQUFBLE1BQy9EO0FBQUEsSUFFSixTQUFTLE9BQU87QUFFWixjQUFRLE1BQU0sd0NBQXdDLEtBQUs7QUFBQSxJQUMvRDtBQUFBLEVBQ0o7QUFBQSxFQUVBLGtCQUFrQixRQUFpQztBQUMvQyxXQUFPLElBQUksUUFBUSxhQUFXO0FBRTFCLFVBQUksY0FBYyxPQUFPLE1BQU0sSUFBSSxFQUFFLENBQUM7QUFHdEMsb0JBQWMsWUFBWSxRQUFRLGFBQWEsRUFBRTtBQUdqRCxvQkFBYyxZQUFZLFFBQVEsb0JBQW9CLEVBQUU7QUFHeEQsb0JBQWMsWUFBWSxRQUFRLHFCQUFxQixFQUFFO0FBR3pELFlBQU0seUJBQXlCO0FBQy9CLG9CQUFjLFlBQVksUUFBUSx3QkFBd0IsR0FBRztBQUc3RCxvQkFBYyxZQUFZLFFBQVEsUUFBUSxHQUFHO0FBRzdDLGNBQVEsWUFBWSxLQUFLLENBQUM7QUFBQSxJQUM5QixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBR0EsTUFBTSxzQkFBc0IsVUFBZUEsTUFBUTtBQUUvQyxRQUFJLGFBQWEsR0FBRyxTQUFTLE1BQU0sU0FBUyxTQUFTLEVBQUU7QUFFdkQsUUFBSSxjQUFjLEtBQUssYUFBYSxTQUFTLE1BQU07QUFDbkQsa0JBQWMsWUFBWSxTQUFTLE1BQU0sWUFBWSxNQUFNLEdBQUcsR0FBRyxJQUFJO0FBRXJFLFVBQU0sV0FBV0EsS0FBSSxNQUFNLFNBQVM7QUFDcEMsUUFBSSwwQkFBMEIsQ0FBQztBQUUvQixlQUFXLFdBQVcsVUFBVTtBQUU1QixVQUFJLFFBQVEsS0FBSyxXQUFXLFNBQVMsTUFBTSxHQUFHO0FBRzFDLGNBQU0sWUFBWUEsS0FBSSxjQUFjLGFBQWEsT0FBTztBQUV4RCxZQUFJLGFBQWEsVUFBVSxlQUFlLFVBQVUsWUFBWSxXQUFXLFNBQVMsUUFBUTtBQUN4RixnQkFBTSxRQUFRLFVBQVUsWUFBWTtBQUNwQyxjQUFJLFVBQVUsUUFBVztBQUNyQixvQ0FBd0IsS0FBSyxFQUFFLFNBQVMsTUFBTSxDQUFDO0FBQUEsVUFDbkQ7QUFBQSxRQUNKO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFDQTtBQUVBLDRCQUF3QixLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sTUFBTTtBQUd2RCxhQUFTLFFBQVEsd0JBQXdCLFNBQVMsSUFBSyxTQUFTLHdCQUF3QixDQUFDLEVBQUUsS0FBSyxJQUFJLElBQUs7QUFFekcsUUFBSSxTQUFTLFFBQVEsR0FBRztBQUNwQixxQkFBZSxNQUFNLFNBQVMsS0FBSztBQUFBLElBQ3ZDO0FBR0EsYUFBUyxVQUFVLENBQUM7QUFHcEIsYUFBUyxRQUFRLEtBQUssUUFBUSxXQUFXLEVBQUU7QUFFM0MsUUFBSSxTQUFTLGlCQUFpQixRQUFRO0FBR2xDLFlBQU0sZ0JBQWdCQSxLQUFJLFVBQVUsY0FBYztBQUNsRCxVQUFJLENBQUM7QUFBZTtBQUdwQixZQUFNLGtCQUFrQkEsS0FBSSxjQUFjLGFBQWEsYUFBYTtBQUdwRSxZQUFNLGdCQUFnQixtQkFBbUIsZ0JBQWdCLGNBQWMsZ0JBQWdCLFlBQVksVUFBVTtBQUc3RyxVQUFJLGVBQWU7QUFDZixjQUFNLG9CQUFvQixNQUFNLFFBQVEsYUFBYSxJQUMvQyxnQkFDQSxDQUFDLGFBQWE7QUFHcEIsMEJBQWtCLFFBQVEsV0FBUztBQUMvQixtQkFBUyxRQUFRLEtBQUssUUFBUSxLQUFLLEVBQUU7QUFBQSxRQUN6QyxDQUFDO0FBQUEsTUFDTDtBQUFBLElBRUo7QUFFQSxhQUFTLFdBQVc7QUFBQSxFQUNwQjtBQUFBLEVBRUEsYUFBYSxRQUFlO0FBRXhCLFVBQU0seUJBQXlCO0FBQy9CLFFBQUksZUFBZSxPQUFPLFFBQVEsd0JBQXdCLEdBQUc7QUFHN0QsbUJBQWUsYUFBYSxRQUFRLFFBQVEsR0FBRztBQUUvQyxXQUFPLGFBQWEsS0FBSztBQUFBLEVBQzdCO0FBQUEsRUFFQSxNQUFNLGFBQWEsYUFBOENBLE1BQXlCO0FBRTFGLFlBQVEsSUFBSSx3QkFBd0IsWUFBWSxNQUFNLEVBQUU7QUFHeEQsVUFBTSxlQUFlLE1BQU1BLEtBQUksTUFBTSxLQUFLLFlBQVksSUFBSTtBQUMxRCxVQUFNLGNBQWMsYUFBYSxRQUFRLHFCQUFjLG1CQUFZO0FBQ25FLFVBQU1BLEtBQUksTUFBTSxPQUFPLFlBQVksTUFBTSxXQUFXO0FBQUEsRUFDcEQ7QUFFSjs7O0FHamFPLElBQU0sb0JBQU4sTUFBd0I7QUFBQSxFQUczQixZQUFvQixRQUFnQjtBQUFoQjtBQUNsQixTQUFLLFNBQVM7QUFDZCxTQUFLLFdBQVcsSUFBSSxTQUFTLE1BQU07QUFBQSxFQUVyQztBQUFBLEVBR0EsTUFBTSxrQkFBaUI7QUFDbkIsUUFBSTtBQUNKLFlBQU0sV0FBVyxNQUFNLEtBQUssU0FBUyxvQkFBb0IsS0FBSyxNQUFNO0FBQ3BFLFlBQU0sS0FBSyxTQUFTLHVCQUF1QixVQUFVLEtBQUssT0FBTyxHQUFHO0FBQ3BFLFVBQUksU0FBUyxTQUFTO0FBQ2xCLGVBQU87QUFBQSxNQUNYO0FBQ0EsWUFBTSxLQUFLLFNBQVMsb0JBQW9CLFVBQVMsS0FBSyxPQUFPLEdBQUc7QUFDaEUsVUFBSSxTQUFTLFNBQVM7QUFDbEIsZUFBTztBQUFBLE1BQ1g7QUFDQSxZQUFNLEtBQUssU0FBUyxzQkFBc0IsVUFBVSxLQUFLLE9BQU8sR0FBRztBQUNuRSxhQUFPO0FBQUEsSUFDUCxTQUFRLE9BQU07QUFDTixVQUFJLE9BQU8seUNBQXlDO0FBQ3BELGFBQU87QUFBQSxJQUNmO0FBQUEsRUFJSjtBQUFBLEVBRUEsV0FBVztBQUVULFdBQU87QUFBQSxFQUNUO0FBQUEsRUFFQSxXQUFXLE9BQU87QUFFaEIsV0FBTywrQkFBK0IsS0FBSztBQUFBLEVBQzdDO0FBQ0Y7OztBQ3pDSyxJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQVFwQixZQUFZLFFBQWdCO0FBQ3hCLFNBQUssU0FBUztBQUVkLFNBQUssaUJBQWlCLENBQUM7QUFDdkIsU0FBSyxPQUFPLENBQUM7QUFDYixTQUFLLEtBQUssS0FBSyxNQUFNO0FBQ3JCLFNBQUssYUFBYSxLQUFLLE9BQU8sU0FBUyxxQkFBcUI7QUFBQSxFQUNoRTtBQUFBLEVBR0EsTUFBTSxVQUFVLGdCQUF1RSxRQUFhO0FBRWhHLFFBQUksT0FBTyxDQUFDO0FBQ1osV0FBTyxPQUFPLEtBQUssZ0JBQWdCLGNBQWM7QUFDakQsUUFBSSxLQUFLLGVBQWUsU0FBUTtBQUNoQyxXQUFLLGVBQWUsU0FBUyxLQUFLLE9BQU8sU0FBUyxlQUFlLE1BQU07QUFDdkUsV0FBSyxlQUFlLFNBQVMsS0FBSyxPQUFPLFNBQVMsZUFBZSxNQUFNO0FBQUEsSUFDdkU7QUFHSSxRQUFJO0FBQ0EsZUFBUyxTQUFTLFFBQVE7QUFFdEIsY0FBTSxlQUFlLE1BQU0sTUFBTSxPQUFPLENBQUMsRUFBRSxZQUFZLElBQUksTUFBTSxNQUFNLENBQUMsQ0FBQztBQUV6RSxZQUFJLE9BQU8sS0FBSyxZQUFZLE1BQU0sWUFBWTtBQUUxQyxlQUFLLEtBQUssSUFBSSxNQUFNLEtBQUssWUFBWSxFQUFFO0FBQUEsUUFDM0MsT0FBTztBQUNILGtCQUFRLE1BQU0saUJBQWMsWUFBWSx1QkFBb0I7QUFBQSxRQUdoRTtBQUFBLE1BQ0o7QUFBQSxJQUlKLFNBQVMsT0FBTztBQUNaLGNBQVEsTUFBTSwyQ0FBMkMsS0FBSztBQUM5RCxVQUFJLE9BQU8seUNBQXlDO0FBQ3BELGFBQU87QUFBQSxJQUNYO0FBQ0osV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUdBLFFBQU87QUFDSCxRQUFJLENBQUMsS0FBSyxVQUFVLENBQUMsS0FBSyxPQUFPLElBQUksUUFBUSxlQUFlLElBQUksb0JBQW9CLEdBQUc7QUFDbkYsY0FBUSxNQUFNLDRDQUF5QztBQUN2RDtBQUFBLElBQ0o7QUFFQSxVQUFNLGtCQUFrQixLQUFLLE9BQU8sSUFBSSxRQUFRLFFBQVEsb0JBQW9CO0FBQzVFLFVBQU0sS0FBSyxnQkFBZ0IsVUFBVTtBQUVyQyxRQUFJLENBQUMsSUFBSTtBQUNULGNBQVEsTUFBTSxrRUFBa0U7QUFDaEY7QUFBQSxJQUNKO0FBQ0EsV0FBTztBQUFBLEVBQ1A7QUFBQTtBQUFBLEVBR0EsTUFBTSxRQUFRO0FBRVYsUUFBSSxRQUFRO0FBR1osVUFBTSxRQUFRLElBQUksTUFBTSxpQkFBaUI7QUFFekMsVUFBTSxzQkFBc0IsTUFBTSxPQUFPLENBQUMsU0FBNEIsS0FBSyxLQUFLLFdBQVcsS0FBSyxlQUFlLE1BQU0sQ0FBQztBQUV0SCx3QkFBb0IsUUFBUSxDQUFDLFNBQWM7QUFsRm5EO0FBbUZZLFlBQU0sWUFBVyxTQUFJLGNBQWMsYUFBYSxJQUFJLE1BQW5DLG1CQUFzQztBQUN2RCxVQUFJLFlBQVksU0FBUyxNQUFNLENBQUMsTUFBTSxTQUFTLEVBQUUsR0FBRztBQUNoRCxjQUFNLEtBQUssU0FBUyxTQUFTLEVBQUU7QUFDL0IsWUFBSSxLQUFLO0FBQU8sa0JBQVE7QUFBQSxNQUM1QjtBQUFBLElBQ0osQ0FBQztBQUdELFVBQU0sU0FBUyxRQUFRO0FBQ3ZCLFNBQUssS0FBSyxLQUFLO0FBQ2YsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sV0FBVztBQUViLFdBQU8sS0FBSyxlQUFlLG9CQUFJLEtBQUssQ0FBQztBQUFBLEVBQ3pDO0FBQUEsRUFFQSxlQUFlLE9BQXFCO0FBQ2hDLFVBQU0sU0FBUyxNQUFNLGtCQUFrQixJQUFJO0FBQzNDLFVBQU0sYUFBYSxJQUFJLEtBQUssTUFBTSxRQUFRLElBQUksTUFBTTtBQUNwRCxVQUFNLGVBQWUsV0FBVyxZQUFZLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUMxRCxVQUFNLE9BQU8sQ0FBQyxXQUFXLFNBQVMsVUFBVSxnQkFBYSxVQUFVLFdBQVcsV0FBUTtBQUN0RixVQUFNLFlBQVksS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUNyQyxVQUFNLGNBQWMsTUFBTSxhQUFhLEVBQUUsTUFBTSxHQUFHLEVBQUUsQ0FBQyxFQUFFLFVBQVUsR0FBRyxDQUFDO0FBQ3JFLFdBQU8sR0FBRyxZQUFZLElBQUksU0FBUyxJQUFJLFdBQVc7QUFBQSxFQUN0RDtBQUFBLEVBRUEsTUFBTSxXQUFVO0FBQUEsRUFFaEI7QUFBQSxFQUVBLE1BQU0sWUFBVztBQUNiLFFBQUksU0FBUyxNQUFNLEtBQUssR0FBRyxPQUFPLE9BQU8scUJBQXFCLEtBQUssZUFBZSxJQUFJLElBQUksR0FBRyxLQUFLLGVBQWUsSUFBSSxNQUFNLEtBQUssS0FBSyxFQUFFLElBQUksSUFBSTtBQUUvSSxRQUFJLFdBQVcsTUFBTTtBQUNyQixVQUFJLE9BQU8sK0NBQTRDO0FBQ3ZEO0FBQUEsSUFDSDtBQUNHLFNBQUssS0FBSyxTQUFTO0FBQ25CLFdBQU87QUFBQSxFQUNYO0FBQUEsRUFFQSxNQUFNLGlCQUFnQjtBQUNsQixRQUFJLGNBQWMsTUFBTSxLQUFLLEdBQUcsT0FBTyxPQUFPLDJDQUFxQyx1QkFBNEIsS0FBSyxLQUFLLE1BQU0sSUFBSSxPQUFPLElBQUs7QUFFL0ksUUFBSSxnQkFBZ0IsTUFBTTtBQUMxQixVQUFJLE9BQU8sK0NBQTRDO0FBQ3ZEO0FBQUEsSUFDSDtBQUNHLFNBQUssS0FBSyxjQUFjO0FBQ3hCLFdBQU87QUFBQSxFQUNYO0FBQUEsRUFFQSxNQUFNLGFBQVk7QUFDZCxTQUFLLEtBQUssVUFBVSxDQUFDO0FBQ3JCLFlBQU8sS0FBSyxlQUFlLE1BQU07QUFBQSxNQUM3QixLQUFLO0FBQ0QsYUFBSyxLQUFLLFFBQVEsS0FBSyxHQUFHLEtBQUssS0FBSyxNQUFNLEVBQUU7QUFDNUMsYUFBSyxLQUFLLFFBQVEsS0FBSyxHQUFHLEtBQUssZUFBZSxJQUFJLE1BQU0sS0FBSyxLQUFLLE1BQU0sRUFBRTtBQUMxRTtBQUFBLE1BQ0osS0FBSztBQUFBLE1BQ0wsS0FBSztBQUVEO0FBQUEsSUFDSjtBQUNBLFdBQU8sS0FBSyxLQUFLO0FBQUEsRUFFekI7QUFBQSxFQUVBLE1BQU0sWUFBVztBQUNiLFFBQUksVUFBVTtBQUNkLFFBQUksU0FBUyxJQUFJLFVBQVUsY0FBYztBQUN6QyxRQUFJLFVBQVUsTUFBSztBQUNmLGVBQVMsT0FBTztBQUNoQixZQUFNLE9BQU8sSUFBSSxjQUFjLGFBQWEsTUFBTTtBQUNsRCxpQkFBVyxNQUFNLEtBQUssR0FBRyxPQUFPLFVBQVUsQ0FBQyxNQUFLLElBQUksR0FBRSxDQUFDLE1BQU0sS0FBSyxHQUFHLE1BQU0sU0FBUyxtQkFBbUIsS0FBSyxLQUFLLFNBQVMsR0FBRztBQUFBLElBQzdILE9BQUs7QUFDRCxpQkFBVztBQUNYLGVBQVM7QUFBQSxJQUNiO0FBRUEsU0FBSyxLQUFLLFNBQVMsQ0FBQztBQUNwQixTQUFLLEtBQUssT0FBTyxXQUFXO0FBQzVCLFNBQUssS0FBSyxPQUFPLFNBQVM7QUFDOUIsV0FBTyxFQUFDLFVBQVUsT0FBTTtBQUFBLEVBQzVCO0FBQUEsRUFHQSxNQUFNLG1CQUFrQjtBQTVLNUI7QUE2S1EsUUFBSSxlQUE4QixrQkFBaUMsaUJBQXdDO0FBQzNHLFFBQUkscUJBQXFCO0FBQ3pCLFVBQU0sT0FBTyxJQUFJLE1BQU0sc0JBQXNCLEtBQUssVUFBVTtBQUU1RCxVQUFNLGVBQWMsU0FBSSxjQUFjLGFBQWEsSUFBSSxNQUFuQyxtQkFBc0M7QUFDMUQsUUFBSSxhQUFhO0FBQ2Isd0JBQWtCLFlBQVkseUJBQXlCLENBQUM7QUFDeEQsNEJBQXNCLFlBQVksdUJBQXVCLENBQUM7QUFDMUQseUJBQW1CLE1BQU0sS0FBSyxHQUFHLE9BQU8sVUFBVSxpQkFBaUIscUJBQXFCLE9BQU8sNkVBQW9FO0FBRW5LLFVBQUkscUJBQXFCLE1BQU07QUFDM0IsWUFBSSxPQUFPLCtDQUE0QztBQUN2RDtBQUFBLE1BQ0osV0FBVyxvQkFBa0IsU0FBUTtBQUNqQyx3QkFBZ0IsTUFBTSxLQUFLLEdBQUcsT0FBTyxPQUFPLDBFQUFvRSxzQkFBbUIsSUFBSTtBQUVuSSxZQUFJLGtCQUFrQixNQUFNO0FBQ3hCLGNBQUksT0FBTywrQ0FBNEM7QUFDdkQ7QUFBQSxRQUNKO0FBQ0osMkJBQW1CLE1BQU0sS0FBSyxHQUFHLE9BQU8sT0FBTyw0Q0FBeUMsZ0JBQWdCLHdEQUFxRCxZQUFZLElBQUk7QUFFN0ssWUFBSSxxQkFBcUIsTUFBTTtBQUMzQixjQUFJLE9BQU8sK0NBQTRDO0FBQ3ZEO0FBQUEsUUFDSjtBQUNBLDZCQUFxQjtBQUFBLE1BQ3pCLFdBQVMsb0JBQWtCLFdBQVU7QUFDakMsMkJBQW1CO0FBQ25CLHdCQUFnQjtBQUFBLE1BQ3BCLE9BQU07QUFDRixZQUFJLFNBQVMsb0JBQW9CLFFBQVEsZ0JBQWdCO0FBQ3pELHdCQUFnQixnQkFBZ0IsTUFBTTtBQUFBLE1BQzFDO0FBQUEsSUFDSjtBQUVBLFFBQUksb0JBQW9CO0FBQ3BCLFVBQUk7QUFDQSxjQUFNLElBQUksWUFBWSxtQkFBbUIsTUFBTSxDQUFDQyxpQkFBK0U7QUFFL0gsY0FBSSxtQkFBbUIsQ0FBQyxHQUFHLGlCQUFpQixhQUFhO0FBQ3pELGNBQUksc0JBQXNCLENBQUMsR0FBRyxxQkFBcUIsZ0JBQWdCO0FBQ25FLFVBQUFBLGFBQVksd0JBQXdCO0FBQ3BDLFVBQUFBLGFBQVksc0JBQXNCO0FBQ2xDLGtCQUFRLElBQUksc0NBQW1DO0FBQUEsUUFDL0MsQ0FBQztBQUFBLE1BQ0QsU0FBUyxLQUFLO0FBQ1osZ0JBQVEsTUFBTSxzQ0FBc0MsR0FBRztBQUFBLE1BQ3pEO0FBQUEsSUFDSjtBQUVKLFFBQUksb0JBQW9CLElBQUc7QUFDdkIseUJBQW1CLFFBQVE7QUFBQSxJQUMzQjtBQUNBLFNBQUssS0FBSyxrQkFBa0I7QUFDNUIsU0FBSyxLQUFLLHFCQUFxQjtBQUMvQixXQUFPLEVBQUMsT0FBTyxlQUFlLEtBQUssaUJBQWdCO0FBQUEsRUFDM0Q7QUFBQTtBQUFBLEVBR0EsTUFBTSxZQUFXO0FBQ2IsUUFBSSxRQUFRLE1BQU0sS0FBSyxHQUFHLE9BQU8sVUFBVSxDQUFDLDRDQUFrQywyQkFBbUIsZ0NBQXNCLHVCQUFnQixHQUFFLENBQUMsYUFBTSxhQUFLLGFBQU0sV0FBSSxHQUFHLE9BQU8sa0NBQWtDO0FBRTNNLFFBQUksVUFBVSxNQUFNO0FBQ3BCLFVBQUksT0FBTywrQ0FBNEM7QUFDdkQ7QUFBQSxJQUNIO0FBQ0csU0FBSyxLQUFLLFNBQVM7QUFDbkIsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLE1BQU0sY0FBYTtBQUNmLFlBQU8sS0FBSyxlQUFlLE1BQU07QUFBQSxNQUM3QixLQUFLO0FBQUEsTUFDTCxLQUFLO0FBQ0QsYUFBSyxLQUFLLFdBQVksR0FBRyxLQUFLLGVBQWUsTUFBTSxJQUFJLEtBQUssS0FBSyxNQUFNLFNBQVMsS0FBSyxlQUFlLElBQUk7QUFDeEc7QUFBQSxNQUNKLEtBQUs7QUFDRCxhQUFLLEtBQUssV0FBWSxHQUFHLEtBQUssZUFBZSxNQUFNLElBQUksS0FBSyxlQUFlLElBQUksTUFBTSxLQUFLLEtBQUssRUFBRTtBQUNqRztBQUFBLElBQ0o7QUFDQSxXQUFPLEtBQUssS0FBSztBQUFBLEVBQ3pCO0FBRUY7OztBeEJwUEYsSUFBcUIsbUJBQXJCLGNBQThDLHlCQUFPO0FBQUEsRUFBckQ7QUFBQTtBQUdFO0FBQUEsOEJBQWdEO0FBQ2hELGdDQUFvRDtBQUNwRCxzQkFBZ0M7QUFDaEMsa0NBQW1DLENBQUM7QUFDcEMsa0NBQW1DLENBQUM7QUFDcEMsMEJBQTZEO0FBQUE7QUFBQTtBQUFBLEVBTzNELE1BQU0sU0FBUztBQUVYLFVBQU0sS0FBSyxhQUFhO0FBRXhCLFNBQUssSUFBSSxRQUFRLFFBQVEsMkJBQTJCLElBQUk7QUFDeEQsU0FBSyxvQkFBb0IsSUFBSSxrQkFBa0IsSUFBSTtBQUNuRCxTQUFLLGFBQWEsSUFBSSxXQUFXLElBQUk7QUFFckMsU0FBSyxjQUFjLElBQUksc0JBQXNCLElBQUksQ0FBQztBQUVsRCxTQUFLLHFCQUFxQixJQUFJLG1CQUFtQixJQUFJO0FBQ3JELFNBQUssdUJBQXVCLElBQUkscUJBQXFCLElBQUk7QUFDekQsU0FBSyxhQUFhLElBQUksV0FBVyxJQUFJO0FBQ3JDLFNBQUssbUJBQW1CO0FBRXhCLFlBQVEsSUFBSSxrREFBK0M7QUFBQSxFQUU3RDtBQUFBLEVBQ0osY0FBYyxNQUE2QjtBQUN6QyxVQUFNLElBQUksTUFBTSx5QkFBeUI7QUFBQSxFQUMzQztBQUFBLEVBRUkscUJBQXFCO0FBbEQzQjtBQW9EUSxRQUFJLEtBQUssU0FBUyxZQUFZO0FBQzVCLGlCQUFLLGVBQUwsbUJBQWlCLFNBQVM7QUFBQSxJQUM5QixPQUFPO0FBQ0gsaUJBQUssZUFBTCxtQkFBaUIsV0FBVztBQUFBLElBQ2hDO0FBQ0UsUUFBSSxLQUFLLFNBQVMsc0JBQXNCO0FBQ3BDLGlCQUFLLHlCQUFMLG1CQUEyQixTQUFTO0FBQUEsSUFDeEMsT0FBTztBQUNILGlCQUFLLHlCQUFMLG1CQUEyQixXQUFXO0FBQUEsSUFDMUM7QUFDQyxRQUFJLEtBQUssU0FBUyxzQkFBc0I7QUFDdkMsaUJBQUssdUJBQUwsbUJBQXlCO0FBQUEsSUFFM0IsT0FBTztBQUNMLGlCQUFLLHVCQUFMLG1CQUF5QjtBQUFBLElBRTNCO0FBQUEsRUFFSjtBQUFBLEVBRUUsTUFBTSxXQUFXO0FBRWIsWUFBUSxJQUFJLHdDQUFxQztBQUNqRCxXQUFPLFFBQVEsUUFBUTtBQUFBLEVBQzNCO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFFbkIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUUzRTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBRW5CLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUdqQyxTQUFLLG1CQUFtQjtBQUFBLEVBRTFCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImFwcCIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAicmVnaXN0ZXJSaWJib25NZW51IiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJtZW51T3RybyIsICJ0aXBvIiwgImFwcCIsICJhbGlhcyIsICJhcHAiLCAiZnJvbnRtYXR0ZXIiXQp9Cg==
