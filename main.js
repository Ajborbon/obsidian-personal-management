/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/
"use strict";
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/modules/modales/seleccionModal.ts
var import_obsidian12, SeleccionModal;
var init_seleccionModal = __esm({
  "src/modules/modales/seleccionModal.ts"() {
    "use strict";
    import_obsidian12 = require("obsidian");
    SeleccionModal = class extends import_obsidian12.FuzzySuggestModal {
      // Flag para determinar si se ha hecho una selección.
      // Constructor de la clase.
      constructor(app2, titles, values, placeholder) {
        super(app2);
        // Objeto para mapear títulos a valores.
        this.seleccionHecha = false;
        this.titles = titles;
        this.values = values;
        this.valueMap = titles.reduce((acc, title, index) => {
          acc[title] = values[index];
          return acc;
        }, {});
        this.setPlaceholder(placeholder);
      }
      // Método para obtener los ítems (títulos) que se mostrarán en el modal.
      getItems() {
        return this.titles;
      }
      // Método para obtener el texto que se mostrará para cada ítem en el modal.
      getItemText(item) {
        return item;
      }
      // Método que se llama al cerrar el modal.
      onClose() {
        if (!this.seleccionHecha) {
          this.reject(new Error("Modal cerrado sin selecci\xF3n"));
        }
      }
      // Método para manejar la selección de un ítem.
      selectSuggestion(item, evt) {
        this.seleccionHecha = true;
        super.selectSuggestion(item, evt);
      }
      // Método que se llama al elegir un ítem, donde se resuelve la promesa con el valor asociado al ítem seleccionado.
      onChooseItem(item, evt) {
        const value = this.valueMap[item];
        this.resolve(value);
      }
      // Método para abrir el modal y esperar a que el usuario haga una selección, devolviendo una promesa con el valor seleccionado.
      openAndAwaitSelection() {
        return new Promise((resolve, reject) => {
          this.resolve = resolve;
          this.reject = reject;
          this.open();
        });
      }
    };
  }
});

// src/modules/modales/seleccionModalTareas.ts
var import_obsidian18, SeleccionModalTareas;
var init_seleccionModalTareas = __esm({
  "src/modules/modales/seleccionModalTareas.ts"() {
    "use strict";
    import_obsidian18 = require("obsidian");
    SeleccionModalTareas = class extends import_obsidian18.FuzzySuggestModal {
      /**
       * @param app Obsidian App
       * @param options Lista de cadenas (PUEDE INCLUIR HTML) que se mostrarán en el modal
       * @param values  Lista de valores asociados a cada opción
       * @param placeholder Texto en la barra de búsqueda
       */
      constructor(app2, options, values, placeholder) {
        super(app2);
        // Valores que se retornan al elegir
        this.seleccionHecha = false;
        this.options = options;
        this.values = values;
        this.setPlaceholder(placeholder);
      }
      /**
       * Retorna la lista de ítems (en este caso, cadenas) sobre las que se hará la búsqueda difusa.
       */
      getItems() {
        return this.options;
      }
      /**
       * Determina el texto que se usa internamente para la búsqueda difusa.
       * Aquí quitamos etiquetas HTML, para que la búsqueda sea sobre texto plano.
       */
      getItemText(item) {
        return item.replace(/<[^>]+>/g, "");
      }
      /**
       * Controla cómo se muestra cada opción en la lista de sugerencias.
       * Asignamos 'el.innerHTML' para que se renderice el HTML con estilos,
       * en lugar de mostrar las etiquetas en crudo.
       */
      renderSuggestion(result, el) {
        el.innerHTML = result.item;
      }
      /**
       * Maneja la selección de un ítem. Marcamos que se ha hecho selección y delegamos al método padre.
       */
      selectSuggestion(item, evt) {
        this.seleccionHecha = true;
        super.selectSuggestion(item, evt);
      }
      /**
       * Se llama cuando el usuario confirma la elección de un ítem de la lista.
       * Obtenemos el valor asociado y resolvemos la promesa.
       */
      onChooseItem(item, evt) {
        const index = this.options.indexOf(item);
        const value = this.values[index];
        this.resolveSelection(value);
      }
      /**
       * Si el modal se cierra sin que el usuario seleccione nada, rechazamos la promesa.
       */
      onClose() {
        if (!this.seleccionHecha) {
          this.rejectSelection(new Error("Modal cerrado sin selecci\xF3n"));
        }
      }
      /**
       * Método para abrir el modal y retornar una promesa que se resuelve cuando
       * el usuario elige un ítem o se rechaza si cierra sin elegir.
       */
      openAndAwaitSelection() {
        return new Promise((resolve, reject) => {
          this.resolveSelection = resolve;
          this.rejectSelection = reject;
          this.open();
        });
      }
    };
  }
});

// src/modules/modales/fuzzySelectOrCreate.ts
var import_obsidian19, fuzzySelectOrCreate;
var init_fuzzySelectOrCreate = __esm({
  "src/modules/modales/fuzzySelectOrCreate.ts"() {
    "use strict";
    import_obsidian19 = require("obsidian");
    init_seleccionModal();
    fuzzySelectOrCreate = class {
      constructor(app2, plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.app = app2;
        this.plugin = plugin;
      }
      createModal() {
        const modal = document.createElement("div");
        modal.setAttribute("id", "fuzzySearchModal");
        modal.style.position = "fixed";
        modal.style.top = "50%";
        modal.style.left = "50%";
        modal.style.transform = "translate(-50%, -50%)";
        modal.style.zIndex = "1000";
        modal.style.padding = "20px";
        modal.style.backgroundColor = "white";
        modal.style.border = "1px solid #ccc";
        modal.style.borderRadius = "5px";
        modal.style.boxShadow = "0 4px 6px rgba(0,0,0,.1)";
        modal.style.width = "300px";
        const closeButton = document.createElement("button");
        closeButton.textContent = "\xD7";
        closeButton.style.position = "absolute";
        closeButton.style.top = "5px";
        closeButton.style.right = "5px";
        closeButton.style.border = "none";
        closeButton.style.background = "none";
        closeButton.style.cursor = "pointer";
        closeButton.style.fontSize = "16px";
        closeButton.style.fontWeight = "bold";
        closeButton.style.padding = "0px 4px";
        closeButton.style.borderRadius = "10px";
        closeButton.style.outline = "none";
        closeButton.style.boxShadow = "none";
        closeButton.onclick = () => modal.remove();
        modal.appendChild(closeButton);
        return modal;
      }
      filterItems(query, items) {
        return items.filter(
          (item) => item.value.toLowerCase().includes(query.toLowerCase())
        );
      }
      async updateYAMLFields(tipo, selectedValue, selectedGroup) {
        try {
          debugger;
          const file = app.vault.getAbstractFileByPath(this.pathCampos);
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            debugger;
            let currentActs = frontmatter[tipo] || [];
            let newValueForActs = [...currentActs, [selectedGroup, selectedValue]];
            frontmatter[tipo] = newValueForActs;
          });
          console.log("Frontmatter actualizado con \xE9xito");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
      async showFuzzySearchModal(items, groups, tipo) {
        return new Promise((resolve, reject) => {
          let selectedValue = "";
          let selectedGroup = "";
          const modal = this.createModal();
          const title = document.createElement("h2");
          title.textContent = "Busca o crea tu actividad";
          title.style.textAlign = "center";
          modal.appendChild(title);
          const input = document.createElement("input");
          input.type = "text";
          input.placeholder = "Escribe tu actividad...";
          input.style.width = "80%";
          input.style.textAlign = "center";
          modal.style.display = "flex";
          modal.style.flexDirection = "column";
          modal.style.alignItems = "center";
          modal.appendChild(input);
          const spacer = document.createElement("div");
          spacer.style.height = "16px";
          modal.appendChild(spacer);
          const resultsDiv = document.createElement("div");
          modal.appendChild(resultsDiv);
          function updateResultsDisplay(filteredResults, menuOtro2) {
            resultsDiv.innerHTML = "";
            filteredResults.forEach((result) => {
              const div = document.createElement("div");
              div.textContent = result.value;
              div.style.cursor = "pointer";
              div.onmouseover = () => div.style.backgroundColor = "#f0f0f0";
              div.onmouseout = () => div.style.backgroundColor = "transparent";
              div.onclick = () => {
                selectedValue = result.activity;
                selectedGroup = result.group;
                modal.remove();
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(div);
            });
            if (filteredResults.length === 0 && input.value.trim() !== "") {
              const createNewDiv = document.createElement("div");
              createNewDiv.textContent = `Crear nueva actividad: "${input.value}"`;
              createNewDiv.style.cursor = "pointer";
              createNewDiv.style.color = "blue";
              createNewDiv.onclick = () => {
                selectedValue = input.value;
                debugger;
                if (tipo == void 0) {
                  tipo = "actsTemas";
                }
                selectGroupForNewActivity(menuOtro2, tipo);
              };
              resultsDiv.appendChild(createNewDiv);
            }
          }
          function selectGroupForNewActivity(menuOtro2, tipo2) {
            resultsDiv.innerHTML = "";
            input.remove();
            spacer.remove();
            title.remove();
            const texto = document.createElement("p");
            texto.textContent = `Vamos a crear la actividad: "${selectedValue}". Selecciona un grupo:`;
            ;
            texto.style.textAlign = "center";
            resultsDiv.appendChild(texto);
            groups.forEach((group) => {
              const groupDiv = document.createElement("div");
              groupDiv.textContent = group;
              groupDiv.style.cursor = "pointer";
              groupDiv.onmouseover = () => groupDiv.style.backgroundColor = "#f0f0f0";
              groupDiv.onmouseout = () => groupDiv.style.backgroundColor = "transparent";
              groupDiv.onclick = async () => {
                selectedGroup = group;
                modal.remove();
                let recurrente = await menuOtro2.esRecurrente(selectedValue);
                if (recurrente) {
                  await menuOtro2.updateYAMLFields(tipo2, selectedValue, selectedGroup);
                }
                resolve([selectedValue, selectedGroup]);
              };
              resultsDiv.appendChild(groupDiv);
            });
          }
          function displaySelectedValue(activity, group) {
            resultsDiv.innerHTML = `Seleccionado: ${activity} / ${group}`;
          }
          input.oninput = () => {
            const filteredItems = this.filterItems(input.value, items);
            updateResultsDisplay(filteredItems, this);
          };
          document.body.appendChild(modal);
        });
      }
      async esRecurrente(tarea) {
        const opciones = ["Si", "No"];
        const valores = [true, false];
        const placeholder = `${tarea} es tarea recurrente?`;
        const modal = new SeleccionModal(app, opciones, valores, placeholder);
        try {
          return await modal.openAndAwaitSelection();
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          return false;
        }
      }
    };
  }
});

// node_modules/luxon/src/errors.js
var LuxonError, InvalidDateTimeError, InvalidIntervalError, InvalidDurationError, ConflictingSpecificationError, InvalidUnitError, InvalidArgumentError, ZoneIsAbstractError;
var init_errors = __esm({
  "node_modules/luxon/src/errors.js"() {
    LuxonError = class extends Error {
    };
    InvalidDateTimeError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid DateTime: ${reason.toMessage()}`);
      }
    };
    InvalidIntervalError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Interval: ${reason.toMessage()}`);
      }
    };
    InvalidDurationError = class extends LuxonError {
      constructor(reason) {
        super(`Invalid Duration: ${reason.toMessage()}`);
      }
    };
    ConflictingSpecificationError = class extends LuxonError {
    };
    InvalidUnitError = class extends LuxonError {
      constructor(unit) {
        super(`Invalid unit ${unit}`);
      }
    };
    InvalidArgumentError = class extends LuxonError {
    };
    ZoneIsAbstractError = class extends LuxonError {
      constructor() {
        super("Zone is an abstract class");
      }
    };
  }
});

// node_modules/luxon/src/impl/formats.js
var n, s, l, DATE_SHORT, DATE_MED, DATE_MED_WITH_WEEKDAY, DATE_FULL, DATE_HUGE, TIME_SIMPLE, TIME_WITH_SECONDS, TIME_WITH_SHORT_OFFSET, TIME_WITH_LONG_OFFSET, TIME_24_SIMPLE, TIME_24_WITH_SECONDS, TIME_24_WITH_SHORT_OFFSET, TIME_24_WITH_LONG_OFFSET, DATETIME_SHORT, DATETIME_SHORT_WITH_SECONDS, DATETIME_MED, DATETIME_MED_WITH_SECONDS, DATETIME_MED_WITH_WEEKDAY, DATETIME_FULL, DATETIME_FULL_WITH_SECONDS, DATETIME_HUGE, DATETIME_HUGE_WITH_SECONDS;
var init_formats = __esm({
  "node_modules/luxon/src/impl/formats.js"() {
    n = "numeric";
    s = "short";
    l = "long";
    DATE_SHORT = {
      year: n,
      month: n,
      day: n
    };
    DATE_MED = {
      year: n,
      month: s,
      day: n
    };
    DATE_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s
    };
    DATE_FULL = {
      year: n,
      month: l,
      day: n
    };
    DATE_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l
    };
    TIME_SIMPLE = {
      hour: n,
      minute: n
    };
    TIME_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n
    };
    TIME_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    TIME_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
    TIME_24_SIMPLE = {
      hour: n,
      minute: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SECONDS = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23"
    };
    TIME_24_WITH_SHORT_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: s
    };
    TIME_24_WITH_LONG_OFFSET = {
      hour: n,
      minute: n,
      second: n,
      hourCycle: "h23",
      timeZoneName: l
    };
    DATETIME_SHORT = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_SHORT_WITH_SECONDS = {
      year: n,
      month: n,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n
    };
    DATETIME_MED_WITH_SECONDS = {
      year: n,
      month: s,
      day: n,
      hour: n,
      minute: n,
      second: n
    };
    DATETIME_MED_WITH_WEEKDAY = {
      year: n,
      month: s,
      day: n,
      weekday: s,
      hour: n,
      minute: n
    };
    DATETIME_FULL = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      timeZoneName: s
    };
    DATETIME_FULL_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: s
    };
    DATETIME_HUGE = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      timeZoneName: l
    };
    DATETIME_HUGE_WITH_SECONDS = {
      year: n,
      month: l,
      day: n,
      weekday: l,
      hour: n,
      minute: n,
      second: n,
      timeZoneName: l
    };
  }
});

// node_modules/luxon/src/zone.js
var Zone;
var init_zone = __esm({
  "node_modules/luxon/src/zone.js"() {
    init_errors();
    Zone = class {
      /**
       * The type of zone
       * @abstract
       * @type {string}
       */
      get type() {
        throw new ZoneIsAbstractError();
      }
      /**
       * The name of this zone.
       * @abstract
       * @type {string}
       */
      get name() {
        throw new ZoneIsAbstractError();
      }
      get ianaName() {
        return this.name;
      }
      /**
       * Returns whether the offset is known to be fixed for the whole year.
       * @abstract
       * @type {boolean}
       */
      get isUniversal() {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's common name (such as EST) at the specified timestamp
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the name
       * @param {Object} opts - Options to affect the format
       * @param {string} opts.format - What style of offset to return. Accepts 'long' or 'short'.
       * @param {string} opts.locale - What locale to return the offset name in.
       * @return {string}
       */
      offsetName(ts, opts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Returns the offset's value as a string
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to get the offset
       * @param {string} format - What style of offset to return.
       *                          Accepts 'narrow', 'short', or 'techie'. Returning '+6', '+06:00', or '+0600' respectively
       * @return {string}
       */
      formatOffset(ts, format) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return the offset in minutes for this zone at the specified timestamp.
       * @abstract
       * @param {number} ts - Epoch milliseconds for which to compute the offset
       * @return {number}
       */
      offset(ts) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is equal to another zone
       * @abstract
       * @param {Zone} otherZone - the zone to compare
       * @return {boolean}
       */
      equals(otherZone) {
        throw new ZoneIsAbstractError();
      }
      /**
       * Return whether this Zone is valid.
       * @abstract
       * @type {boolean}
       */
      get isValid() {
        throw new ZoneIsAbstractError();
      }
    };
  }
});

// node_modules/luxon/src/zones/systemZone.js
var singleton, SystemZone;
var init_systemZone = __esm({
  "node_modules/luxon/src/zones/systemZone.js"() {
    init_util();
    init_zone();
    singleton = null;
    SystemZone = class _SystemZone extends Zone {
      /**
       * Get a singleton instance of the local zone
       * @return {SystemZone}
       */
      static get instance() {
        if (singleton === null) {
          singleton = new _SystemZone();
        }
        return singleton;
      }
      /** @override **/
      get type() {
        return "system";
      }
      /** @override **/
      get name() {
        return new Intl.DateTimeFormat().resolvedOptions().timeZone;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        return -new Date(ts).getTimezoneOffset();
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "system";
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/IANAZone.js
function makeDTF(zone) {
  if (!dtfCache[zone]) {
    dtfCache[zone] = new Intl.DateTimeFormat("en-US", {
      hour12: false,
      timeZone: zone,
      year: "numeric",
      month: "2-digit",
      day: "2-digit",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit",
      era: "short"
    });
  }
  return dtfCache[zone];
}
function hackyOffset(dtf, date) {
  const formatted = dtf.format(date).replace(/\u200E/g, ""), parsed = /(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted), [, fMonth, fDay, fYear, fadOrBc, fHour, fMinute, fSecond] = parsed;
  return [fYear, fMonth, fDay, fadOrBc, fHour, fMinute, fSecond];
}
function partsOffset(dtf, date) {
  const formatted = dtf.formatToParts(date);
  const filled = [];
  for (let i = 0; i < formatted.length; i++) {
    const { type: type2, value } = formatted[i];
    const pos = typeToPos[type2];
    if (type2 === "era") {
      filled[pos] = value;
    } else if (!isUndefined(pos)) {
      filled[pos] = parseInt(value, 10);
    }
  }
  return filled;
}
var dtfCache, typeToPos, ianaZoneCache, IANAZone;
var init_IANAZone = __esm({
  "node_modules/luxon/src/zones/IANAZone.js"() {
    init_util();
    init_zone();
    dtfCache = {};
    typeToPos = {
      year: 0,
      month: 1,
      day: 2,
      era: 3,
      hour: 4,
      minute: 5,
      second: 6
    };
    ianaZoneCache = {};
    IANAZone = class _IANAZone extends Zone {
      /**
       * @param {string} name - Zone name
       * @return {IANAZone}
       */
      static create(name) {
        if (!ianaZoneCache[name]) {
          ianaZoneCache[name] = new _IANAZone(name);
        }
        return ianaZoneCache[name];
      }
      /**
       * Reset local caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCache() {
        ianaZoneCache = {};
        dtfCache = {};
      }
      /**
       * Returns whether the provided string is a valid specifier. This only checks the string's format, not that the specifier identifies a known zone; see isValidZone for that.
       * @param {string} s - The string to check validity on
       * @example IANAZone.isValidSpecifier("America/New_York") //=> true
       * @example IANAZone.isValidSpecifier("Sport~~blorp") //=> false
       * @deprecated This method returns false for some valid IANA names. Use isValidZone instead.
       * @return {boolean}
       */
      static isValidSpecifier(s2) {
        return this.isValidZone(s2);
      }
      /**
       * Returns whether the provided string identifies a real zone
       * @param {string} zone - The string to check
       * @example IANAZone.isValidZone("America/New_York") //=> true
       * @example IANAZone.isValidZone("Fantasia/Castle") //=> false
       * @example IANAZone.isValidZone("Sport~~blorp") //=> false
       * @return {boolean}
       */
      static isValidZone(zone) {
        if (!zone) {
          return false;
        }
        try {
          new Intl.DateTimeFormat("en-US", { timeZone: zone }).format();
          return true;
        } catch (e) {
          return false;
        }
      }
      constructor(name) {
        super();
        this.zoneName = name;
        this.valid = _IANAZone.isValidZone(name);
      }
      /** @override **/
      get type() {
        return "iana";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName(ts, { format, locale }) {
        return parseZoneInfo(ts, format, locale, this.name);
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.offset(ts), format);
      }
      /** @override **/
      offset(ts) {
        const date = new Date(ts);
        if (isNaN(date))
          return NaN;
        const dtf = makeDTF(this.name);
        let [year, month, day, adOrBc, hour, minute, second] = dtf.formatToParts ? partsOffset(dtf, date) : hackyOffset(dtf, date);
        if (adOrBc === "BC") {
          year = -Math.abs(year) + 1;
        }
        const adjustedHour = hour === 24 ? 0 : hour;
        const asUTC = objToLocalTS({
          year,
          month,
          day,
          hour: adjustedHour,
          minute,
          second,
          millisecond: 0
        });
        let asTS = +date;
        const over = asTS % 1e3;
        asTS -= over >= 0 ? over : 1e3 + over;
        return (asUTC - asTS) / (60 * 1e3);
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "iana" && otherZone.name === this.name;
      }
      /** @override **/
      get isValid() {
        return this.valid;
      }
    };
  }
});

// node_modules/luxon/src/impl/locale.js
function getCachedLF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlLFCache[key];
  if (!dtf) {
    dtf = new Intl.ListFormat(locString, opts);
    intlLFCache[key] = dtf;
  }
  return dtf;
}
function getCachedDTF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let dtf = intlDTCache[key];
  if (!dtf) {
    dtf = new Intl.DateTimeFormat(locString, opts);
    intlDTCache[key] = dtf;
  }
  return dtf;
}
function getCachedINF(locString, opts = {}) {
  const key = JSON.stringify([locString, opts]);
  let inf = intlNumCache[key];
  if (!inf) {
    inf = new Intl.NumberFormat(locString, opts);
    intlNumCache[key] = inf;
  }
  return inf;
}
function getCachedRTF(locString, opts = {}) {
  const { base, ...cacheKeyOpts } = opts;
  const key = JSON.stringify([locString, cacheKeyOpts]);
  let inf = intlRelCache[key];
  if (!inf) {
    inf = new Intl.RelativeTimeFormat(locString, opts);
    intlRelCache[key] = inf;
  }
  return inf;
}
function systemLocale() {
  if (sysLocaleCache) {
    return sysLocaleCache;
  } else {
    sysLocaleCache = new Intl.DateTimeFormat().resolvedOptions().locale;
    return sysLocaleCache;
  }
}
function getCachedWeekInfo(locString) {
  let data = weekInfoCache[locString];
  if (!data) {
    const locale = new Intl.Locale(locString);
    data = "getWeekInfo" in locale ? locale.getWeekInfo() : locale.weekInfo;
    weekInfoCache[locString] = data;
  }
  return data;
}
function parseLocaleString(localeStr) {
  const xIndex = localeStr.indexOf("-x-");
  if (xIndex !== -1) {
    localeStr = localeStr.substring(0, xIndex);
  }
  const uIndex = localeStr.indexOf("-u-");
  if (uIndex === -1) {
    return [localeStr];
  } else {
    let options;
    let selectedStr;
    try {
      options = getCachedDTF(localeStr).resolvedOptions();
      selectedStr = localeStr;
    } catch (e) {
      const smaller = localeStr.substring(0, uIndex);
      options = getCachedDTF(smaller).resolvedOptions();
      selectedStr = smaller;
    }
    const { numberingSystem, calendar } = options;
    return [selectedStr, numberingSystem, calendar];
  }
}
function intlConfigString(localeStr, numberingSystem, outputCalendar) {
  if (outputCalendar || numberingSystem) {
    if (!localeStr.includes("-u-")) {
      localeStr += "-u";
    }
    if (outputCalendar) {
      localeStr += `-ca-${outputCalendar}`;
    }
    if (numberingSystem) {
      localeStr += `-nu-${numberingSystem}`;
    }
    return localeStr;
  } else {
    return localeStr;
  }
}
function mapMonths(f) {
  const ms = [];
  for (let i = 1; i <= 12; i++) {
    const dt = DateTime.utc(2009, i, 1);
    ms.push(f(dt));
  }
  return ms;
}
function mapWeekdays(f) {
  const ms = [];
  for (let i = 1; i <= 7; i++) {
    const dt = DateTime.utc(2016, 11, 13 + i);
    ms.push(f(dt));
  }
  return ms;
}
function listStuff(loc, length, englishFn, intlFn) {
  const mode = loc.listingMode();
  if (mode === "error") {
    return null;
  } else if (mode === "en") {
    return englishFn(length);
  } else {
    return intlFn(length);
  }
}
function supportsFastNumbers(loc) {
  if (loc.numberingSystem && loc.numberingSystem !== "latn") {
    return false;
  } else {
    return loc.numberingSystem === "latn" || !loc.locale || loc.locale.startsWith("en") || new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem === "latn";
  }
}
var intlLFCache, intlDTCache, intlNumCache, intlRelCache, sysLocaleCache, weekInfoCache, PolyNumberFormatter, PolyDateFormatter, PolyRelFormatter, fallbackWeekSettings, Locale;
var init_locale = __esm({
  "node_modules/luxon/src/impl/locale.js"() {
    init_util();
    init_english();
    init_settings();
    init_datetime();
    init_IANAZone();
    intlLFCache = {};
    intlDTCache = {};
    intlNumCache = {};
    intlRelCache = {};
    sysLocaleCache = null;
    weekInfoCache = {};
    PolyNumberFormatter = class {
      constructor(intl, forceSimple, opts) {
        this.padTo = opts.padTo || 0;
        this.floor = opts.floor || false;
        const { padTo, floor, ...otherOpts } = opts;
        if (!forceSimple || Object.keys(otherOpts).length > 0) {
          const intlOpts = { useGrouping: false, ...opts };
          if (opts.padTo > 0)
            intlOpts.minimumIntegerDigits = opts.padTo;
          this.inf = getCachedINF(intl, intlOpts);
        }
      }
      format(i) {
        if (this.inf) {
          const fixed = this.floor ? Math.floor(i) : i;
          return this.inf.format(fixed);
        } else {
          const fixed = this.floor ? Math.floor(i) : roundTo(i, 3);
          return padStart(fixed, this.padTo);
        }
      }
    };
    PolyDateFormatter = class {
      constructor(dt, intl, opts) {
        this.opts = opts;
        this.originalZone = void 0;
        let z = void 0;
        if (this.opts.timeZone) {
          this.dt = dt;
        } else if (dt.zone.type === "fixed") {
          const gmtOffset = -1 * (dt.offset / 60);
          const offsetZ = gmtOffset >= 0 ? `Etc/GMT+${gmtOffset}` : `Etc/GMT${gmtOffset}`;
          if (dt.offset !== 0 && IANAZone.create(offsetZ).valid) {
            z = offsetZ;
            this.dt = dt;
          } else {
            z = "UTC";
            this.dt = dt.offset === 0 ? dt : dt.setZone("UTC").plus({ minutes: dt.offset });
            this.originalZone = dt.zone;
          }
        } else if (dt.zone.type === "system") {
          this.dt = dt;
        } else if (dt.zone.type === "iana") {
          this.dt = dt;
          z = dt.zone.name;
        } else {
          z = "UTC";
          this.dt = dt.setZone("UTC").plus({ minutes: dt.offset });
          this.originalZone = dt.zone;
        }
        const intlOpts = { ...this.opts };
        intlOpts.timeZone = intlOpts.timeZone || z;
        this.dtf = getCachedDTF(intl, intlOpts);
      }
      format() {
        if (this.originalZone) {
          return this.formatToParts().map(({ value }) => value).join("");
        }
        return this.dtf.format(this.dt.toJSDate());
      }
      formatToParts() {
        const parts = this.dtf.formatToParts(this.dt.toJSDate());
        if (this.originalZone) {
          return parts.map((part) => {
            if (part.type === "timeZoneName") {
              const offsetName = this.originalZone.offsetName(this.dt.ts, {
                locale: this.dt.locale,
                format: this.opts.timeZoneName
              });
              return {
                ...part,
                value: offsetName
              };
            } else {
              return part;
            }
          });
        }
        return parts;
      }
      resolvedOptions() {
        return this.dtf.resolvedOptions();
      }
    };
    PolyRelFormatter = class {
      constructor(intl, isEnglish, opts) {
        this.opts = { style: "long", ...opts };
        if (!isEnglish && hasRelative()) {
          this.rtf = getCachedRTF(intl, opts);
        }
      }
      format(count, unit) {
        if (this.rtf) {
          return this.rtf.format(count, unit);
        } else {
          return formatRelativeTime(unit, count, this.opts.numeric, this.opts.style !== "long");
        }
      }
      formatToParts(count, unit) {
        if (this.rtf) {
          return this.rtf.formatToParts(count, unit);
        } else {
          return [];
        }
      }
    };
    fallbackWeekSettings = {
      firstDay: 1,
      minimalDays: 4,
      weekend: [6, 7]
    };
    Locale = class _Locale {
      static fromOpts(opts) {
        return _Locale.create(
          opts.locale,
          opts.numberingSystem,
          opts.outputCalendar,
          opts.weekSettings,
          opts.defaultToEN
        );
      }
      static create(locale, numberingSystem, outputCalendar, weekSettings, defaultToEN = false) {
        const specifiedLocale = locale || Settings.defaultLocale;
        const localeR = specifiedLocale || (defaultToEN ? "en-US" : systemLocale());
        const numberingSystemR = numberingSystem || Settings.defaultNumberingSystem;
        const outputCalendarR = outputCalendar || Settings.defaultOutputCalendar;
        const weekSettingsR = validateWeekSettings(weekSettings) || Settings.defaultWeekSettings;
        return new _Locale(localeR, numberingSystemR, outputCalendarR, weekSettingsR, specifiedLocale);
      }
      static resetCache() {
        sysLocaleCache = null;
        intlDTCache = {};
        intlNumCache = {};
        intlRelCache = {};
      }
      static fromObject({ locale, numberingSystem, outputCalendar, weekSettings } = {}) {
        return _Locale.create(locale, numberingSystem, outputCalendar, weekSettings);
      }
      constructor(locale, numbering, outputCalendar, weekSettings, specifiedLocale) {
        const [parsedLocale, parsedNumberingSystem, parsedOutputCalendar] = parseLocaleString(locale);
        this.locale = parsedLocale;
        this.numberingSystem = numbering || parsedNumberingSystem || null;
        this.outputCalendar = outputCalendar || parsedOutputCalendar || null;
        this.weekSettings = weekSettings;
        this.intl = intlConfigString(this.locale, this.numberingSystem, this.outputCalendar);
        this.weekdaysCache = { format: {}, standalone: {} };
        this.monthsCache = { format: {}, standalone: {} };
        this.meridiemCache = null;
        this.eraCache = {};
        this.specifiedLocale = specifiedLocale;
        this.fastNumbersCached = null;
      }
      get fastNumbers() {
        if (this.fastNumbersCached == null) {
          this.fastNumbersCached = supportsFastNumbers(this);
        }
        return this.fastNumbersCached;
      }
      listingMode() {
        const isActuallyEn = this.isEnglish();
        const hasNoWeirdness = (this.numberingSystem === null || this.numberingSystem === "latn") && (this.outputCalendar === null || this.outputCalendar === "gregory");
        return isActuallyEn && hasNoWeirdness ? "en" : "intl";
      }
      clone(alts) {
        if (!alts || Object.getOwnPropertyNames(alts).length === 0) {
          return this;
        } else {
          return _Locale.create(
            alts.locale || this.specifiedLocale,
            alts.numberingSystem || this.numberingSystem,
            alts.outputCalendar || this.outputCalendar,
            validateWeekSettings(alts.weekSettings) || this.weekSettings,
            alts.defaultToEN || false
          );
        }
      }
      redefaultToEN(alts = {}) {
        return this.clone({ ...alts, defaultToEN: true });
      }
      redefaultToSystem(alts = {}) {
        return this.clone({ ...alts, defaultToEN: false });
      }
      months(length, format = false) {
        return listStuff(this, length, months, () => {
          const intl = format ? { month: length, day: "numeric" } : { month: length }, formatStr = format ? "format" : "standalone";
          if (!this.monthsCache[formatStr][length]) {
            this.monthsCache[formatStr][length] = mapMonths((dt) => this.extract(dt, intl, "month"));
          }
          return this.monthsCache[formatStr][length];
        });
      }
      weekdays(length, format = false) {
        return listStuff(this, length, weekdays, () => {
          const intl = format ? { weekday: length, year: "numeric", month: "long", day: "numeric" } : { weekday: length }, formatStr = format ? "format" : "standalone";
          if (!this.weekdaysCache[formatStr][length]) {
            this.weekdaysCache[formatStr][length] = mapWeekdays(
              (dt) => this.extract(dt, intl, "weekday")
            );
          }
          return this.weekdaysCache[formatStr][length];
        });
      }
      meridiems() {
        return listStuff(
          this,
          void 0,
          () => meridiems,
          () => {
            if (!this.meridiemCache) {
              const intl = { hour: "numeric", hourCycle: "h12" };
              this.meridiemCache = [DateTime.utc(2016, 11, 13, 9), DateTime.utc(2016, 11, 13, 19)].map(
                (dt) => this.extract(dt, intl, "dayperiod")
              );
            }
            return this.meridiemCache;
          }
        );
      }
      eras(length) {
        return listStuff(this, length, eras, () => {
          const intl = { era: length };
          if (!this.eraCache[length]) {
            this.eraCache[length] = [DateTime.utc(-40, 1, 1), DateTime.utc(2017, 1, 1)].map(
              (dt) => this.extract(dt, intl, "era")
            );
          }
          return this.eraCache[length];
        });
      }
      extract(dt, intlOpts, field) {
        const df = this.dtFormatter(dt, intlOpts), results = df.formatToParts(), matching = results.find((m) => m.type.toLowerCase() === field);
        return matching ? matching.value : null;
      }
      numberFormatter(opts = {}) {
        return new PolyNumberFormatter(this.intl, opts.forceSimple || this.fastNumbers, opts);
      }
      dtFormatter(dt, intlOpts = {}) {
        return new PolyDateFormatter(dt, this.intl, intlOpts);
      }
      relFormatter(opts = {}) {
        return new PolyRelFormatter(this.intl, this.isEnglish(), opts);
      }
      listFormatter(opts = {}) {
        return getCachedLF(this.intl, opts);
      }
      isEnglish() {
        return this.locale === "en" || this.locale.toLowerCase() === "en-us" || new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us");
      }
      getWeekSettings() {
        if (this.weekSettings) {
          return this.weekSettings;
        } else if (!hasLocaleWeekInfo()) {
          return fallbackWeekSettings;
        } else {
          return getCachedWeekInfo(this.locale);
        }
      }
      getStartOfWeek() {
        return this.getWeekSettings().firstDay;
      }
      getMinDaysInFirstWeek() {
        return this.getWeekSettings().minimalDays;
      }
      getWeekendDays() {
        return this.getWeekSettings().weekend;
      }
      equals(other) {
        return this.locale === other.locale && this.numberingSystem === other.numberingSystem && this.outputCalendar === other.outputCalendar;
      }
    };
  }
});

// node_modules/luxon/src/zones/fixedOffsetZone.js
var singleton2, FixedOffsetZone;
var init_fixedOffsetZone = __esm({
  "node_modules/luxon/src/zones/fixedOffsetZone.js"() {
    init_util();
    init_zone();
    singleton2 = null;
    FixedOffsetZone = class _FixedOffsetZone extends Zone {
      /**
       * Get a singleton instance of UTC
       * @return {FixedOffsetZone}
       */
      static get utcInstance() {
        if (singleton2 === null) {
          singleton2 = new _FixedOffsetZone(0);
        }
        return singleton2;
      }
      /**
       * Get an instance with a specified offset
       * @param {number} offset - The offset in minutes
       * @return {FixedOffsetZone}
       */
      static instance(offset2) {
        return offset2 === 0 ? _FixedOffsetZone.utcInstance : new _FixedOffsetZone(offset2);
      }
      /**
       * Get an instance of FixedOffsetZone from a UTC offset string, like "UTC+6"
       * @param {string} s - The offset string to parse
       * @example FixedOffsetZone.parseSpecifier("UTC+6")
       * @example FixedOffsetZone.parseSpecifier("UTC+06")
       * @example FixedOffsetZone.parseSpecifier("UTC-6:00")
       * @return {FixedOffsetZone}
       */
      static parseSpecifier(s2) {
        if (s2) {
          const r = s2.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);
          if (r) {
            return new _FixedOffsetZone(signedOffset(r[1], r[2]));
          }
        }
        return null;
      }
      constructor(offset2) {
        super();
        this.fixed = offset2;
      }
      /** @override **/
      get type() {
        return "fixed";
      }
      /** @override **/
      get name() {
        return this.fixed === 0 ? "UTC" : `UTC${formatOffset(this.fixed, "narrow")}`;
      }
      get ianaName() {
        if (this.fixed === 0) {
          return "Etc/UTC";
        } else {
          return `Etc/GMT${formatOffset(-this.fixed, "narrow")}`;
        }
      }
      /** @override **/
      offsetName() {
        return this.name;
      }
      /** @override **/
      formatOffset(ts, format) {
        return formatOffset(this.fixed, format);
      }
      /** @override **/
      get isUniversal() {
        return true;
      }
      /** @override **/
      offset() {
        return this.fixed;
      }
      /** @override **/
      equals(otherZone) {
        return otherZone.type === "fixed" && otherZone.fixed === this.fixed;
      }
      /** @override **/
      get isValid() {
        return true;
      }
    };
  }
});

// node_modules/luxon/src/zones/invalidZone.js
var InvalidZone;
var init_invalidZone = __esm({
  "node_modules/luxon/src/zones/invalidZone.js"() {
    init_zone();
    InvalidZone = class extends Zone {
      constructor(zoneName) {
        super();
        this.zoneName = zoneName;
      }
      /** @override **/
      get type() {
        return "invalid";
      }
      /** @override **/
      get name() {
        return this.zoneName;
      }
      /** @override **/
      get isUniversal() {
        return false;
      }
      /** @override **/
      offsetName() {
        return null;
      }
      /** @override **/
      formatOffset() {
        return "";
      }
      /** @override **/
      offset() {
        return NaN;
      }
      /** @override **/
      equals() {
        return false;
      }
      /** @override **/
      get isValid() {
        return false;
      }
    };
  }
});

// node_modules/luxon/src/impl/zoneUtil.js
function normalizeZone(input, defaultZone2) {
  let offset2;
  if (isUndefined(input) || input === null) {
    return defaultZone2;
  } else if (input instanceof Zone) {
    return input;
  } else if (isString(input)) {
    const lowered = input.toLowerCase();
    if (lowered === "default")
      return defaultZone2;
    else if (lowered === "local" || lowered === "system")
      return SystemZone.instance;
    else if (lowered === "utc" || lowered === "gmt")
      return FixedOffsetZone.utcInstance;
    else
      return FixedOffsetZone.parseSpecifier(lowered) || IANAZone.create(input);
  } else if (isNumber(input)) {
    return FixedOffsetZone.instance(input);
  } else if (typeof input === "object" && "offset" in input && typeof input.offset === "function") {
    return input;
  } else {
    return new InvalidZone(input);
  }
}
var init_zoneUtil = __esm({
  "node_modules/luxon/src/impl/zoneUtil.js"() {
    init_zone();
    init_IANAZone();
    init_fixedOffsetZone();
    init_invalidZone();
    init_util();
    init_systemZone();
  }
});

// node_modules/luxon/src/settings.js
var now, defaultZone, defaultLocale, defaultNumberingSystem, defaultOutputCalendar, twoDigitCutoffYear, throwOnInvalid, defaultWeekSettings, Settings;
var init_settings = __esm({
  "node_modules/luxon/src/settings.js"() {
    init_systemZone();
    init_IANAZone();
    init_locale();
    init_zoneUtil();
    init_util();
    now = () => Date.now();
    defaultZone = "system";
    defaultLocale = null;
    defaultNumberingSystem = null;
    defaultOutputCalendar = null;
    twoDigitCutoffYear = 60;
    defaultWeekSettings = null;
    Settings = class {
      /**
       * Get the callback for returning the current timestamp.
       * @type {function}
       */
      static get now() {
        return now;
      }
      /**
       * Set the callback for returning the current timestamp.
       * The function should return a number, which will be interpreted as an Epoch millisecond count
       * @type {function}
       * @example Settings.now = () => Date.now() + 3000 // pretend it is 3 seconds in the future
       * @example Settings.now = () => 0 // always pretend it's Jan 1, 1970 at midnight in UTC time
       */
      static set now(n2) {
        now = n2;
      }
      /**
       * Set the default time zone to create DateTimes in. Does not affect existing instances.
       * Use the value "system" to reset this value to the system's time zone.
       * @type {string}
       */
      static set defaultZone(zone) {
        defaultZone = zone;
      }
      /**
       * Get the default time zone object currently used to create DateTimes. Does not affect existing instances.
       * The default value is the system's time zone (the one set on the machine that runs this code).
       * @type {Zone}
       */
      static get defaultZone() {
        return normalizeZone(defaultZone, SystemZone.instance);
      }
      /**
       * Get the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultLocale() {
        return defaultLocale;
      }
      /**
       * Set the default locale to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultLocale(locale) {
        defaultLocale = locale;
      }
      /**
       * Get the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultNumberingSystem() {
        return defaultNumberingSystem;
      }
      /**
       * Set the default numbering system to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultNumberingSystem(numberingSystem) {
        defaultNumberingSystem = numberingSystem;
      }
      /**
       * Get the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static get defaultOutputCalendar() {
        return defaultOutputCalendar;
      }
      /**
       * Set the default output calendar to create DateTimes with. Does not affect existing instances.
       * @type {string}
       */
      static set defaultOutputCalendar(outputCalendar) {
        defaultOutputCalendar = outputCalendar;
      }
      /**
       * @typedef {Object} WeekSettings
       * @property {number} firstDay
       * @property {number} minimalDays
       * @property {number[]} weekend
       */
      /**
       * @return {WeekSettings|null}
       */
      static get defaultWeekSettings() {
        return defaultWeekSettings;
      }
      /**
       * Allows overriding the default locale week settings, i.e. the start of the week, the weekend and
       * how many days are required in the first week of a year.
       * Does not affect existing instances.
       *
       * @param {WeekSettings|null} weekSettings
       */
      static set defaultWeekSettings(weekSettings) {
        defaultWeekSettings = validateWeekSettings(weekSettings);
      }
      /**
       * Get the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       */
      static get twoDigitCutoffYear() {
        return twoDigitCutoffYear;
      }
      /**
       * Set the cutoff year after which a string encoding a year as two digits is interpreted to occur in the current century.
       * @type {number}
       * @example Settings.twoDigitCutoffYear = 0 // cut-off year is 0, so all 'yy' are interpreted as current century
       * @example Settings.twoDigitCutoffYear = 50 // '49' -> 1949; '50' -> 2050
       * @example Settings.twoDigitCutoffYear = 1950 // interpreted as 50
       * @example Settings.twoDigitCutoffYear = 2050 // ALSO interpreted as 50
       */
      static set twoDigitCutoffYear(cutoffYear) {
        twoDigitCutoffYear = cutoffYear % 100;
      }
      /**
       * Get whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static get throwOnInvalid() {
        return throwOnInvalid;
      }
      /**
       * Set whether Luxon will throw when it encounters invalid DateTimes, Durations, or Intervals
       * @type {boolean}
       */
      static set throwOnInvalid(t) {
        throwOnInvalid = t;
      }
      /**
       * Reset Luxon's global caches. Should only be necessary in testing scenarios.
       * @return {void}
       */
      static resetCaches() {
        Locale.resetCache();
        IANAZone.resetCache();
      }
    };
  }
});

// node_modules/luxon/src/impl/invalid.js
var Invalid;
var init_invalid = __esm({
  "node_modules/luxon/src/impl/invalid.js"() {
    Invalid = class {
      constructor(reason, explanation) {
        this.reason = reason;
        this.explanation = explanation;
      }
      toMessage() {
        if (this.explanation) {
          return `${this.reason}: ${this.explanation}`;
        } else {
          return this.reason;
        }
      }
    };
  }
});

// node_modules/luxon/src/impl/conversions.js
function unitOutOfRange(unit, value) {
  return new Invalid(
    "unit out of range",
    `you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`
  );
}
function dayOfWeek(year, month, day) {
  const d = new Date(Date.UTC(year, month - 1, day));
  if (year < 100 && year >= 0) {
    d.setUTCFullYear(d.getUTCFullYear() - 1900);
  }
  const js = d.getUTCDay();
  return js === 0 ? 7 : js;
}
function computeOrdinal(year, month, day) {
  return day + (isLeapYear(year) ? leapLadder : nonLeapLadder)[month - 1];
}
function uncomputeOrdinal(year, ordinal) {
  const table = isLeapYear(year) ? leapLadder : nonLeapLadder, month0 = table.findIndex((i) => i < ordinal), day = ordinal - table[month0];
  return { month: month0 + 1, day };
}
function isoWeekdayToLocal(isoWeekday, startOfWeek) {
  return (isoWeekday - startOfWeek + 7) % 7 + 1;
}
function gregorianToWeek(gregObj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { year, month, day } = gregObj, ordinal = computeOrdinal(year, month, day), weekday = isoWeekdayToLocal(dayOfWeek(year, month, day), startOfWeek);
  let weekNumber = Math.floor((ordinal - weekday + 14 - minDaysInFirstWeek) / 7), weekYear;
  if (weekNumber < 1) {
    weekYear = year - 1;
    weekNumber = weeksInWeekYear(weekYear, minDaysInFirstWeek, startOfWeek);
  } else if (weekNumber > weeksInWeekYear(year, minDaysInFirstWeek, startOfWeek)) {
    weekYear = year + 1;
    weekNumber = 1;
  } else {
    weekYear = year;
  }
  return { weekYear, weekNumber, weekday, ...timeObject(gregObj) };
}
function weekToGregorian(weekData, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const { weekYear, weekNumber, weekday } = weekData, weekdayOfJan4 = isoWeekdayToLocal(dayOfWeek(weekYear, 1, minDaysInFirstWeek), startOfWeek), yearInDays = daysInYear(weekYear);
  let ordinal = weekNumber * 7 + weekday - weekdayOfJan4 - 7 + minDaysInFirstWeek, year;
  if (ordinal < 1) {
    year = weekYear - 1;
    ordinal += daysInYear(year);
  } else if (ordinal > yearInDays) {
    year = weekYear + 1;
    ordinal -= daysInYear(weekYear);
  } else {
    year = weekYear;
  }
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(weekData) };
}
function gregorianToOrdinal(gregData) {
  const { year, month, day } = gregData;
  const ordinal = computeOrdinal(year, month, day);
  return { year, ordinal, ...timeObject(gregData) };
}
function ordinalToGregorian(ordinalData) {
  const { year, ordinal } = ordinalData;
  const { month, day } = uncomputeOrdinal(year, ordinal);
  return { year, month, day, ...timeObject(ordinalData) };
}
function usesLocalWeekValues(obj, loc) {
  const hasLocaleWeekData = !isUndefined(obj.localWeekday) || !isUndefined(obj.localWeekNumber) || !isUndefined(obj.localWeekYear);
  if (hasLocaleWeekData) {
    const hasIsoWeekData = !isUndefined(obj.weekday) || !isUndefined(obj.weekNumber) || !isUndefined(obj.weekYear);
    if (hasIsoWeekData) {
      throw new ConflictingSpecificationError(
        "Cannot mix locale-based week fields with ISO-based week fields"
      );
    }
    if (!isUndefined(obj.localWeekday))
      obj.weekday = obj.localWeekday;
    if (!isUndefined(obj.localWeekNumber))
      obj.weekNumber = obj.localWeekNumber;
    if (!isUndefined(obj.localWeekYear))
      obj.weekYear = obj.localWeekYear;
    delete obj.localWeekday;
    delete obj.localWeekNumber;
    delete obj.localWeekYear;
    return {
      minDaysInFirstWeek: loc.getMinDaysInFirstWeek(),
      startOfWeek: loc.getStartOfWeek()
    };
  } else {
    return { minDaysInFirstWeek: 4, startOfWeek: 1 };
  }
}
function hasInvalidWeekData(obj, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const validYear = isInteger(obj.weekYear), validWeek = integerBetween(
    obj.weekNumber,
    1,
    weeksInWeekYear(obj.weekYear, minDaysInFirstWeek, startOfWeek)
  ), validWeekday = integerBetween(obj.weekday, 1, 7);
  if (!validYear) {
    return unitOutOfRange("weekYear", obj.weekYear);
  } else if (!validWeek) {
    return unitOutOfRange("week", obj.weekNumber);
  } else if (!validWeekday) {
    return unitOutOfRange("weekday", obj.weekday);
  } else
    return false;
}
function hasInvalidOrdinalData(obj) {
  const validYear = isInteger(obj.year), validOrdinal = integerBetween(obj.ordinal, 1, daysInYear(obj.year));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validOrdinal) {
    return unitOutOfRange("ordinal", obj.ordinal);
  } else
    return false;
}
function hasInvalidGregorianData(obj) {
  const validYear = isInteger(obj.year), validMonth = integerBetween(obj.month, 1, 12), validDay = integerBetween(obj.day, 1, daysInMonth(obj.year, obj.month));
  if (!validYear) {
    return unitOutOfRange("year", obj.year);
  } else if (!validMonth) {
    return unitOutOfRange("month", obj.month);
  } else if (!validDay) {
    return unitOutOfRange("day", obj.day);
  } else
    return false;
}
function hasInvalidTimeData(obj) {
  const { hour, minute, second, millisecond } = obj;
  const validHour = integerBetween(hour, 0, 23) || hour === 24 && minute === 0 && second === 0 && millisecond === 0, validMinute = integerBetween(minute, 0, 59), validSecond = integerBetween(second, 0, 59), validMillisecond = integerBetween(millisecond, 0, 999);
  if (!validHour) {
    return unitOutOfRange("hour", hour);
  } else if (!validMinute) {
    return unitOutOfRange("minute", minute);
  } else if (!validSecond) {
    return unitOutOfRange("second", second);
  } else if (!validMillisecond) {
    return unitOutOfRange("millisecond", millisecond);
  } else
    return false;
}
var nonLeapLadder, leapLadder;
var init_conversions = __esm({
  "node_modules/luxon/src/impl/conversions.js"() {
    init_util();
    init_invalid();
    init_errors();
    nonLeapLadder = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
    leapLadder = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];
  }
});

// node_modules/luxon/src/impl/util.js
function isUndefined(o) {
  return typeof o === "undefined";
}
function isNumber(o) {
  return typeof o === "number";
}
function isInteger(o) {
  return typeof o === "number" && o % 1 === 0;
}
function isString(o) {
  return typeof o === "string";
}
function isDate(o) {
  return Object.prototype.toString.call(o) === "[object Date]";
}
function hasRelative() {
  try {
    return typeof Intl !== "undefined" && !!Intl.RelativeTimeFormat;
  } catch (e) {
    return false;
  }
}
function hasLocaleWeekInfo() {
  try {
    return typeof Intl !== "undefined" && !!Intl.Locale && ("weekInfo" in Intl.Locale.prototype || "getWeekInfo" in Intl.Locale.prototype);
  } catch (e) {
    return false;
  }
}
function maybeArray(thing) {
  return Array.isArray(thing) ? thing : [thing];
}
function bestBy(arr, by, compare) {
  if (arr.length === 0) {
    return void 0;
  }
  return arr.reduce((best, next) => {
    const pair = [by(next), next];
    if (!best) {
      return pair;
    } else if (compare(best[0], pair[0]) === best[0]) {
      return best;
    } else {
      return pair;
    }
  }, null)[1];
}
function pick(obj, keys) {
  return keys.reduce((a, k) => {
    a[k] = obj[k];
    return a;
  }, {});
}
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}
function validateWeekSettings(settings) {
  if (settings == null) {
    return null;
  } else if (typeof settings !== "object") {
    throw new InvalidArgumentError("Week settings must be an object");
  } else {
    if (!integerBetween(settings.firstDay, 1, 7) || !integerBetween(settings.minimalDays, 1, 7) || !Array.isArray(settings.weekend) || settings.weekend.some((v) => !integerBetween(v, 1, 7))) {
      throw new InvalidArgumentError("Invalid week settings");
    }
    return {
      firstDay: settings.firstDay,
      minimalDays: settings.minimalDays,
      weekend: Array.from(settings.weekend)
    };
  }
}
function integerBetween(thing, bottom, top) {
  return isInteger(thing) && thing >= bottom && thing <= top;
}
function floorMod(x, n2) {
  return x - n2 * Math.floor(x / n2);
}
function padStart(input, n2 = 2) {
  const isNeg = input < 0;
  let padded;
  if (isNeg) {
    padded = "-" + ("" + -input).padStart(n2, "0");
  } else {
    padded = ("" + input).padStart(n2, "0");
  }
  return padded;
}
function parseInteger(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseInt(string, 10);
  }
}
function parseFloating(string) {
  if (isUndefined(string) || string === null || string === "") {
    return void 0;
  } else {
    return parseFloat(string);
  }
}
function parseMillis(fraction) {
  if (isUndefined(fraction) || fraction === null || fraction === "") {
    return void 0;
  } else {
    const f = parseFloat("0." + fraction) * 1e3;
    return Math.floor(f);
  }
}
function roundTo(number, digits, towardZero = false) {
  const factor = 10 ** digits, rounder = towardZero ? Math.trunc : Math.round;
  return rounder(number * factor) / factor;
}
function isLeapYear(year) {
  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);
}
function daysInYear(year) {
  return isLeapYear(year) ? 366 : 365;
}
function daysInMonth(year, month) {
  const modMonth = floorMod(month - 1, 12) + 1, modYear = year + (month - modMonth) / 12;
  if (modMonth === 2) {
    return isLeapYear(modYear) ? 29 : 28;
  } else {
    return [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][modMonth - 1];
  }
}
function objToLocalTS(obj) {
  let d = Date.UTC(
    obj.year,
    obj.month - 1,
    obj.day,
    obj.hour,
    obj.minute,
    obj.second,
    obj.millisecond
  );
  if (obj.year < 100 && obj.year >= 0) {
    d = new Date(d);
    d.setUTCFullYear(obj.year, obj.month - 1, obj.day);
  }
  return +d;
}
function firstWeekOffset(year, minDaysInFirstWeek, startOfWeek) {
  const fwdlw = isoWeekdayToLocal(dayOfWeek(year, 1, minDaysInFirstWeek), startOfWeek);
  return -fwdlw + minDaysInFirstWeek - 1;
}
function weeksInWeekYear(weekYear, minDaysInFirstWeek = 4, startOfWeek = 1) {
  const weekOffset = firstWeekOffset(weekYear, minDaysInFirstWeek, startOfWeek);
  const weekOffsetNext = firstWeekOffset(weekYear + 1, minDaysInFirstWeek, startOfWeek);
  return (daysInYear(weekYear) - weekOffset + weekOffsetNext) / 7;
}
function untruncateYear(year) {
  if (year > 99) {
    return year;
  } else
    return year > Settings.twoDigitCutoffYear ? 1900 + year : 2e3 + year;
}
function parseZoneInfo(ts, offsetFormat, locale, timeZone = null) {
  const date = new Date(ts), intlOpts = {
    hourCycle: "h23",
    year: "numeric",
    month: "2-digit",
    day: "2-digit",
    hour: "2-digit",
    minute: "2-digit"
  };
  if (timeZone) {
    intlOpts.timeZone = timeZone;
  }
  const modified = { timeZoneName: offsetFormat, ...intlOpts };
  const parsed = new Intl.DateTimeFormat(locale, modified).formatToParts(date).find((m) => m.type.toLowerCase() === "timezonename");
  return parsed ? parsed.value : null;
}
function signedOffset(offHourStr, offMinuteStr) {
  let offHour = parseInt(offHourStr, 10);
  if (Number.isNaN(offHour)) {
    offHour = 0;
  }
  const offMin = parseInt(offMinuteStr, 10) || 0, offMinSigned = offHour < 0 || Object.is(offHour, -0) ? -offMin : offMin;
  return offHour * 60 + offMinSigned;
}
function asNumber(value) {
  const numericValue = Number(value);
  if (typeof value === "boolean" || value === "" || Number.isNaN(numericValue))
    throw new InvalidArgumentError(`Invalid unit value ${value}`);
  return numericValue;
}
function normalizeObject(obj, normalizer) {
  const normalized = {};
  for (const u in obj) {
    if (hasOwnProperty(obj, u)) {
      const v = obj[u];
      if (v === void 0 || v === null)
        continue;
      normalized[normalizer(u)] = asNumber(v);
    }
  }
  return normalized;
}
function formatOffset(offset2, format) {
  const hours = Math.trunc(Math.abs(offset2 / 60)), minutes = Math.trunc(Math.abs(offset2 % 60)), sign = offset2 >= 0 ? "+" : "-";
  switch (format) {
    case "short":
      return `${sign}${padStart(hours, 2)}:${padStart(minutes, 2)}`;
    case "narrow":
      return `${sign}${hours}${minutes > 0 ? `:${minutes}` : ""}`;
    case "techie":
      return `${sign}${padStart(hours, 2)}${padStart(minutes, 2)}`;
    default:
      throw new RangeError(`Value format ${format} is out of range for property format`);
  }
}
function timeObject(obj) {
  return pick(obj, ["hour", "minute", "second", "millisecond"]);
}
var init_util = __esm({
  "node_modules/luxon/src/impl/util.js"() {
    init_errors();
    init_settings();
    init_conversions();
  }
});

// node_modules/luxon/src/impl/english.js
function months(length) {
  switch (length) {
    case "narrow":
      return [...monthsNarrow];
    case "short":
      return [...monthsShort];
    case "long":
      return [...monthsLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"];
    case "2-digit":
      return ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
    default:
      return null;
  }
}
function weekdays(length) {
  switch (length) {
    case "narrow":
      return [...weekdaysNarrow];
    case "short":
      return [...weekdaysShort];
    case "long":
      return [...weekdaysLong];
    case "numeric":
      return ["1", "2", "3", "4", "5", "6", "7"];
    default:
      return null;
  }
}
function eras(length) {
  switch (length) {
    case "narrow":
      return [...erasNarrow];
    case "short":
      return [...erasShort];
    case "long":
      return [...erasLong];
    default:
      return null;
  }
}
function meridiemForDateTime(dt) {
  return meridiems[dt.hour < 12 ? 0 : 1];
}
function weekdayForDateTime(dt, length) {
  return weekdays(length)[dt.weekday - 1];
}
function monthForDateTime(dt, length) {
  return months(length)[dt.month - 1];
}
function eraForDateTime(dt, length) {
  return eras(length)[dt.year < 0 ? 0 : 1];
}
function formatRelativeTime(unit, count, numeric = "always", narrow = false) {
  const units = {
    years: ["year", "yr."],
    quarters: ["quarter", "qtr."],
    months: ["month", "mo."],
    weeks: ["week", "wk."],
    days: ["day", "day", "days"],
    hours: ["hour", "hr."],
    minutes: ["minute", "min."],
    seconds: ["second", "sec."]
  };
  const lastable = ["hours", "minutes", "seconds"].indexOf(unit) === -1;
  if (numeric === "auto" && lastable) {
    const isDay = unit === "days";
    switch (count) {
      case 1:
        return isDay ? "tomorrow" : `next ${units[unit][0]}`;
      case -1:
        return isDay ? "yesterday" : `last ${units[unit][0]}`;
      case 0:
        return isDay ? "today" : `this ${units[unit][0]}`;
      default:
    }
  }
  const isInPast = Object.is(count, -0) || count < 0, fmtValue = Math.abs(count), singular = fmtValue === 1, lilUnits = units[unit], fmtUnit = narrow ? singular ? lilUnits[1] : lilUnits[2] || lilUnits[1] : singular ? units[unit][0] : unit;
  return isInPast ? `${fmtValue} ${fmtUnit} ago` : `in ${fmtValue} ${fmtUnit}`;
}
var monthsLong, monthsShort, monthsNarrow, weekdaysLong, weekdaysShort, weekdaysNarrow, meridiems, erasLong, erasShort, erasNarrow;
var init_english = __esm({
  "node_modules/luxon/src/impl/english.js"() {
    init_formats();
    init_util();
    monthsLong = [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December"
    ];
    monthsShort = [
      "Jan",
      "Feb",
      "Mar",
      "Apr",
      "May",
      "Jun",
      "Jul",
      "Aug",
      "Sep",
      "Oct",
      "Nov",
      "Dec"
    ];
    monthsNarrow = ["J", "F", "M", "A", "M", "J", "J", "A", "S", "O", "N", "D"];
    weekdaysLong = [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday"
    ];
    weekdaysShort = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
    weekdaysNarrow = ["M", "T", "W", "T", "F", "S", "S"];
    meridiems = ["AM", "PM"];
    erasLong = ["Before Christ", "Anno Domini"];
    erasShort = ["BC", "AD"];
    erasNarrow = ["B", "A"];
  }
});

// node_modules/luxon/src/impl/formatter.js
function stringifyTokens(splits, tokenToString) {
  let s2 = "";
  for (const token of splits) {
    if (token.literal) {
      s2 += token.val;
    } else {
      s2 += tokenToString(token.val);
    }
  }
  return s2;
}
var macroTokenToFormatOpts, Formatter;
var init_formatter = __esm({
  "node_modules/luxon/src/impl/formatter.js"() {
    init_english();
    init_formats();
    init_util();
    macroTokenToFormatOpts = {
      D: DATE_SHORT,
      DD: DATE_MED,
      DDD: DATE_FULL,
      DDDD: DATE_HUGE,
      t: TIME_SIMPLE,
      tt: TIME_WITH_SECONDS,
      ttt: TIME_WITH_SHORT_OFFSET,
      tttt: TIME_WITH_LONG_OFFSET,
      T: TIME_24_SIMPLE,
      TT: TIME_24_WITH_SECONDS,
      TTT: TIME_24_WITH_SHORT_OFFSET,
      TTTT: TIME_24_WITH_LONG_OFFSET,
      f: DATETIME_SHORT,
      ff: DATETIME_MED,
      fff: DATETIME_FULL,
      ffff: DATETIME_HUGE,
      F: DATETIME_SHORT_WITH_SECONDS,
      FF: DATETIME_MED_WITH_SECONDS,
      FFF: DATETIME_FULL_WITH_SECONDS,
      FFFF: DATETIME_HUGE_WITH_SECONDS
    };
    Formatter = class _Formatter {
      static create(locale, opts = {}) {
        return new _Formatter(locale, opts);
      }
      static parseFormat(fmt) {
        let current = null, currentFull = "", bracketed = false;
        const splits = [];
        for (let i = 0; i < fmt.length; i++) {
          const c = fmt.charAt(i);
          if (c === "'") {
            if (currentFull.length > 0) {
              splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
            }
            current = null;
            currentFull = "";
            bracketed = !bracketed;
          } else if (bracketed) {
            currentFull += c;
          } else if (c === current) {
            currentFull += c;
          } else {
            if (currentFull.length > 0) {
              splits.push({ literal: /^\s+$/.test(currentFull), val: currentFull });
            }
            currentFull = c;
            current = c;
          }
        }
        if (currentFull.length > 0) {
          splits.push({ literal: bracketed || /^\s+$/.test(currentFull), val: currentFull });
        }
        return splits;
      }
      static macroTokenToFormatOpts(token) {
        return macroTokenToFormatOpts[token];
      }
      constructor(locale, formatOpts) {
        this.opts = formatOpts;
        this.loc = locale;
        this.systemLoc = null;
      }
      formatWithSystemDefault(dt, opts) {
        if (this.systemLoc === null) {
          this.systemLoc = this.loc.redefaultToSystem();
        }
        const df = this.systemLoc.dtFormatter(dt, { ...this.opts, ...opts });
        return df.format();
      }
      dtFormatter(dt, opts = {}) {
        return this.loc.dtFormatter(dt, { ...this.opts, ...opts });
      }
      formatDateTime(dt, opts) {
        return this.dtFormatter(dt, opts).format();
      }
      formatDateTimeParts(dt, opts) {
        return this.dtFormatter(dt, opts).formatToParts();
      }
      formatInterval(interval, opts) {
        const df = this.dtFormatter(interval.start, opts);
        return df.dtf.formatRange(interval.start.toJSDate(), interval.end.toJSDate());
      }
      resolvedOptions(dt, opts) {
        return this.dtFormatter(dt, opts).resolvedOptions();
      }
      num(n2, p = 0) {
        if (this.opts.forceSimple) {
          return padStart(n2, p);
        }
        const opts = { ...this.opts };
        if (p > 0) {
          opts.padTo = p;
        }
        return this.loc.numberFormatter(opts).format(n2);
      }
      formatDateTimeFromString(dt, fmt) {
        const knownEnglish = this.loc.listingMode() === "en", useDateTimeFormatter = this.loc.outputCalendar && this.loc.outputCalendar !== "gregory", string = (opts, extract) => this.loc.extract(dt, opts, extract), formatOffset2 = (opts) => {
          if (dt.isOffsetFixed && dt.offset === 0 && opts.allowZ) {
            return "Z";
          }
          return dt.isValid ? dt.zone.formatOffset(dt.ts, opts.format) : "";
        }, meridiem = () => knownEnglish ? meridiemForDateTime(dt) : string({ hour: "numeric", hourCycle: "h12" }, "dayperiod"), month = (length, standalone) => knownEnglish ? monthForDateTime(dt, length) : string(standalone ? { month: length } : { month: length, day: "numeric" }, "month"), weekday = (length, standalone) => knownEnglish ? weekdayForDateTime(dt, length) : string(
          standalone ? { weekday: length } : { weekday: length, month: "long", day: "numeric" },
          "weekday"
        ), maybeMacro = (token) => {
          const formatOpts = _Formatter.macroTokenToFormatOpts(token);
          if (formatOpts) {
            return this.formatWithSystemDefault(dt, formatOpts);
          } else {
            return token;
          }
        }, era = (length) => knownEnglish ? eraForDateTime(dt, length) : string({ era: length }, "era"), tokenToString = (token) => {
          switch (token) {
            case "S":
              return this.num(dt.millisecond);
            case "u":
            case "SSS":
              return this.num(dt.millisecond, 3);
            case "s":
              return this.num(dt.second);
            case "ss":
              return this.num(dt.second, 2);
            case "uu":
              return this.num(Math.floor(dt.millisecond / 10), 2);
            case "uuu":
              return this.num(Math.floor(dt.millisecond / 100));
            case "m":
              return this.num(dt.minute);
            case "mm":
              return this.num(dt.minute, 2);
            case "h":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12);
            case "hh":
              return this.num(dt.hour % 12 === 0 ? 12 : dt.hour % 12, 2);
            case "H":
              return this.num(dt.hour);
            case "HH":
              return this.num(dt.hour, 2);
            case "Z":
              return formatOffset2({ format: "narrow", allowZ: this.opts.allowZ });
            case "ZZ":
              return formatOffset2({ format: "short", allowZ: this.opts.allowZ });
            case "ZZZ":
              return formatOffset2({ format: "techie", allowZ: this.opts.allowZ });
            case "ZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "short", locale: this.loc.locale });
            case "ZZZZZ":
              return dt.zone.offsetName(dt.ts, { format: "long", locale: this.loc.locale });
            case "z":
              return dt.zoneName;
            case "a":
              return meridiem();
            case "d":
              return useDateTimeFormatter ? string({ day: "numeric" }, "day") : this.num(dt.day);
            case "dd":
              return useDateTimeFormatter ? string({ day: "2-digit" }, "day") : this.num(dt.day, 2);
            case "c":
              return this.num(dt.weekday);
            case "ccc":
              return weekday("short", true);
            case "cccc":
              return weekday("long", true);
            case "ccccc":
              return weekday("narrow", true);
            case "E":
              return this.num(dt.weekday);
            case "EEE":
              return weekday("short", false);
            case "EEEE":
              return weekday("long", false);
            case "EEEEE":
              return weekday("narrow", false);
            case "L":
              return useDateTimeFormatter ? string({ month: "numeric", day: "numeric" }, "month") : this.num(dt.month);
            case "LL":
              return useDateTimeFormatter ? string({ month: "2-digit", day: "numeric" }, "month") : this.num(dt.month, 2);
            case "LLL":
              return month("short", true);
            case "LLLL":
              return month("long", true);
            case "LLLLL":
              return month("narrow", true);
            case "M":
              return useDateTimeFormatter ? string({ month: "numeric" }, "month") : this.num(dt.month);
            case "MM":
              return useDateTimeFormatter ? string({ month: "2-digit" }, "month") : this.num(dt.month, 2);
            case "MMM":
              return month("short", false);
            case "MMMM":
              return month("long", false);
            case "MMMMM":
              return month("narrow", false);
            case "y":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year);
            case "yy":
              return useDateTimeFormatter ? string({ year: "2-digit" }, "year") : this.num(dt.year.toString().slice(-2), 2);
            case "yyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 4);
            case "yyyyyy":
              return useDateTimeFormatter ? string({ year: "numeric" }, "year") : this.num(dt.year, 6);
            case "G":
              return era("short");
            case "GG":
              return era("long");
            case "GGGGG":
              return era("narrow");
            case "kk":
              return this.num(dt.weekYear.toString().slice(-2), 2);
            case "kkkk":
              return this.num(dt.weekYear, 4);
            case "W":
              return this.num(dt.weekNumber);
            case "WW":
              return this.num(dt.weekNumber, 2);
            case "n":
              return this.num(dt.localWeekNumber);
            case "nn":
              return this.num(dt.localWeekNumber, 2);
            case "ii":
              return this.num(dt.localWeekYear.toString().slice(-2), 2);
            case "iiii":
              return this.num(dt.localWeekYear, 4);
            case "o":
              return this.num(dt.ordinal);
            case "ooo":
              return this.num(dt.ordinal, 3);
            case "q":
              return this.num(dt.quarter);
            case "qq":
              return this.num(dt.quarter, 2);
            case "X":
              return this.num(Math.floor(dt.ts / 1e3));
            case "x":
              return this.num(dt.ts);
            default:
              return maybeMacro(token);
          }
        };
        return stringifyTokens(_Formatter.parseFormat(fmt), tokenToString);
      }
      formatDurationFromString(dur, fmt) {
        const tokenToField = (token) => {
          switch (token[0]) {
            case "S":
              return "millisecond";
            case "s":
              return "second";
            case "m":
              return "minute";
            case "h":
              return "hour";
            case "d":
              return "day";
            case "w":
              return "week";
            case "M":
              return "month";
            case "y":
              return "year";
            default:
              return null;
          }
        }, tokenToString = (lildur) => (token) => {
          const mapped = tokenToField(token);
          if (mapped) {
            return this.num(lildur.get(mapped), token.length);
          } else {
            return token;
          }
        }, tokens = _Formatter.parseFormat(fmt), realTokens = tokens.reduce(
          (found, { literal, val }) => literal ? found : found.concat(val),
          []
        ), collapsed = dur.shiftTo(...realTokens.map(tokenToField).filter((t) => t));
        return stringifyTokens(tokens, tokenToString(collapsed));
      }
    };
  }
});

// node_modules/luxon/src/impl/regexParser.js
function combineRegexes(...regexes) {
  const full = regexes.reduce((f, r) => f + r.source, "");
  return RegExp(`^${full}$`);
}
function combineExtractors(...extractors) {
  return (m) => extractors.reduce(
    ([mergedVals, mergedZone, cursor], ex) => {
      const [val, zone, next] = ex(m, cursor);
      return [{ ...mergedVals, ...val }, zone || mergedZone, next];
    },
    [{}, null, 1]
  ).slice(0, 2);
}
function parse(s2, ...patterns) {
  if (s2 == null) {
    return [null, null];
  }
  for (const [regex, extractor] of patterns) {
    const m = regex.exec(s2);
    if (m) {
      return extractor(m);
    }
  }
  return [null, null];
}
function simpleParse(...keys) {
  return (match2, cursor) => {
    const ret = {};
    let i;
    for (i = 0; i < keys.length; i++) {
      ret[keys[i]] = parseInteger(match2[cursor + i]);
    }
    return [ret, null, cursor + i];
  };
}
function int(match2, pos, fallback) {
  const m = match2[pos];
  return isUndefined(m) ? fallback : parseInteger(m);
}
function extractISOYmd(match2, cursor) {
  const item = {
    year: int(match2, cursor),
    month: int(match2, cursor + 1, 1),
    day: int(match2, cursor + 2, 1)
  };
  return [item, null, cursor + 3];
}
function extractISOTime(match2, cursor) {
  const item = {
    hours: int(match2, cursor, 0),
    minutes: int(match2, cursor + 1, 0),
    seconds: int(match2, cursor + 2, 0),
    milliseconds: parseMillis(match2[cursor + 3])
  };
  return [item, null, cursor + 4];
}
function extractISOOffset(match2, cursor) {
  const local = !match2[cursor] && !match2[cursor + 1], fullOffset = signedOffset(match2[cursor + 1], match2[cursor + 2]), zone = local ? null : FixedOffsetZone.instance(fullOffset);
  return [{}, zone, cursor + 3];
}
function extractIANAZone(match2, cursor) {
  const zone = match2[cursor] ? IANAZone.create(match2[cursor]) : null;
  return [{}, zone, cursor + 1];
}
function extractISODuration(match2) {
  const [s2, yearStr, monthStr, weekStr, dayStr, hourStr, minuteStr, secondStr, millisecondsStr] = match2;
  const hasNegativePrefix = s2[0] === "-";
  const negativeSeconds = secondStr && secondStr[0] === "-";
  const maybeNegate = (num, force = false) => num !== void 0 && (force || num && hasNegativePrefix) ? -num : num;
  return [
    {
      years: maybeNegate(parseFloating(yearStr)),
      months: maybeNegate(parseFloating(monthStr)),
      weeks: maybeNegate(parseFloating(weekStr)),
      days: maybeNegate(parseFloating(dayStr)),
      hours: maybeNegate(parseFloating(hourStr)),
      minutes: maybeNegate(parseFloating(minuteStr)),
      seconds: maybeNegate(parseFloating(secondStr), secondStr === "-0"),
      milliseconds: maybeNegate(parseMillis(millisecondsStr), negativeSeconds)
    }
  ];
}
function fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
  const result = {
    year: yearStr.length === 2 ? untruncateYear(parseInteger(yearStr)) : parseInteger(yearStr),
    month: monthsShort.indexOf(monthStr) + 1,
    day: parseInteger(dayStr),
    hour: parseInteger(hourStr),
    minute: parseInteger(minuteStr)
  };
  if (secondStr)
    result.second = parseInteger(secondStr);
  if (weekdayStr) {
    result.weekday = weekdayStr.length > 3 ? weekdaysLong.indexOf(weekdayStr) + 1 : weekdaysShort.indexOf(weekdayStr) + 1;
  }
  return result;
}
function extractRFC2822(match2) {
  const [
    ,
    weekdayStr,
    dayStr,
    monthStr,
    yearStr,
    hourStr,
    minuteStr,
    secondStr,
    obsOffset,
    milOffset,
    offHourStr,
    offMinuteStr
  ] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  let offset2;
  if (obsOffset) {
    offset2 = obsOffsets[obsOffset];
  } else if (milOffset) {
    offset2 = 0;
  } else {
    offset2 = signedOffset(offHourStr, offMinuteStr);
  }
  return [result, new FixedOffsetZone(offset2)];
}
function preprocessRFC2822(s2) {
  return s2.replace(/\([^()]*\)|[\n\t]/g, " ").replace(/(\s\s+)/g, " ").trim();
}
function extractRFC1123Or850(match2) {
  const [, weekdayStr, dayStr, monthStr, yearStr, hourStr, minuteStr, secondStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function extractASCII(match2) {
  const [, weekdayStr, monthStr, dayStr, hourStr, minuteStr, secondStr, yearStr] = match2, result = fromStrings(weekdayStr, yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr);
  return [result, FixedOffsetZone.utcInstance];
}
function parseISODate(s2) {
  return parse(
    s2,
    [isoYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [isoWeekWithTimeExtensionRegex, extractISOWeekTimeAndOffset],
    [isoOrdinalWithTimeExtensionRegex, extractISOOrdinalDateAndTime],
    [isoTimeCombinedRegex, extractISOTimeAndOffset]
  );
}
function parseRFC2822Date(s2) {
  return parse(preprocessRFC2822(s2), [rfc2822, extractRFC2822]);
}
function parseHTTPDate(s2) {
  return parse(
    s2,
    [rfc1123, extractRFC1123Or850],
    [rfc850, extractRFC1123Or850],
    [ascii, extractASCII]
  );
}
function parseISODuration(s2) {
  return parse(s2, [isoDuration, extractISODuration]);
}
function parseISOTimeOnly(s2) {
  return parse(s2, [isoTimeOnly, extractISOTimeOnly]);
}
function parseSQL(s2) {
  return parse(
    s2,
    [sqlYmdWithTimeExtensionRegex, extractISOYmdTimeAndOffset],
    [sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone]
  );
}
var ianaRegex, offsetRegex, isoExtendedZone, isoTimeBaseRegex, isoTimeRegex, isoTimeExtensionRegex, isoYmdRegex, isoWeekRegex, isoOrdinalRegex, extractISOWeekData, extractISOOrdinalData, sqlYmdRegex, sqlTimeRegex, sqlTimeExtensionRegex, isoTimeOnly, isoDuration, obsOffsets, rfc2822, rfc1123, rfc850, ascii, isoYmdWithTimeExtensionRegex, isoWeekWithTimeExtensionRegex, isoOrdinalWithTimeExtensionRegex, isoTimeCombinedRegex, extractISOYmdTimeAndOffset, extractISOWeekTimeAndOffset, extractISOOrdinalDateAndTime, extractISOTimeAndOffset, extractISOTimeOnly, sqlYmdWithTimeExtensionRegex, sqlTimeCombinedRegex, extractISOTimeOffsetAndIANAZone;
var init_regexParser = __esm({
  "node_modules/luxon/src/impl/regexParser.js"() {
    init_util();
    init_english();
    init_fixedOffsetZone();
    init_IANAZone();
    ianaRegex = /[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;
    offsetRegex = /(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/;
    isoExtendedZone = `(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`;
    isoTimeBaseRegex = /(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/;
    isoTimeRegex = RegExp(`${isoTimeBaseRegex.source}${isoExtendedZone}`);
    isoTimeExtensionRegex = RegExp(`(?:T${isoTimeRegex.source})?`);
    isoYmdRegex = /([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/;
    isoWeekRegex = /(\d{4})-?W(\d\d)(?:-?(\d))?/;
    isoOrdinalRegex = /(\d{4})-?(\d{3})/;
    extractISOWeekData = simpleParse("weekYear", "weekNumber", "weekDay");
    extractISOOrdinalData = simpleParse("year", "ordinal");
    sqlYmdRegex = /(\d{4})-(\d\d)-(\d\d)/;
    sqlTimeRegex = RegExp(
      `${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`
    );
    sqlTimeExtensionRegex = RegExp(`(?: ${sqlTimeRegex.source})?`);
    isoTimeOnly = RegExp(`^T?${isoTimeBaseRegex.source}$`);
    isoDuration = /^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;
    obsOffsets = {
      GMT: 0,
      EDT: -4 * 60,
      EST: -5 * 60,
      CDT: -5 * 60,
      CST: -6 * 60,
      MDT: -6 * 60,
      MST: -7 * 60,
      PDT: -7 * 60,
      PST: -8 * 60
    };
    rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;
    rfc1123 = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/;
    rfc850 = /^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/;
    ascii = /^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;
    isoYmdWithTimeExtensionRegex = combineRegexes(isoYmdRegex, isoTimeExtensionRegex);
    isoWeekWithTimeExtensionRegex = combineRegexes(isoWeekRegex, isoTimeExtensionRegex);
    isoOrdinalWithTimeExtensionRegex = combineRegexes(isoOrdinalRegex, isoTimeExtensionRegex);
    isoTimeCombinedRegex = combineRegexes(isoTimeRegex);
    extractISOYmdTimeAndOffset = combineExtractors(
      extractISOYmd,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOWeekTimeAndOffset = combineExtractors(
      extractISOWeekData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOOrdinalDateAndTime = combineExtractors(
      extractISOOrdinalData,
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeAndOffset = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
    extractISOTimeOnly = combineExtractors(extractISOTime);
    sqlYmdWithTimeExtensionRegex = combineRegexes(sqlYmdRegex, sqlTimeExtensionRegex);
    sqlTimeCombinedRegex = combineRegexes(sqlTimeRegex);
    extractISOTimeOffsetAndIANAZone = combineExtractors(
      extractISOTime,
      extractISOOffset,
      extractIANAZone
    );
  }
});

// node_modules/luxon/src/duration.js
function clone(dur, alts, clear = false) {
  const conf = {
    values: clear ? alts.values : { ...dur.values, ...alts.values || {} },
    loc: dur.loc.clone(alts.loc),
    conversionAccuracy: alts.conversionAccuracy || dur.conversionAccuracy,
    matrix: alts.matrix || dur.matrix
  };
  return new Duration(conf);
}
function durationToMillis(matrix, vals) {
  var _a;
  let sum = (_a = vals.milliseconds) != null ? _a : 0;
  for (const unit of reverseUnits.slice(1)) {
    if (vals[unit]) {
      sum += vals[unit] * matrix[unit]["milliseconds"];
    }
  }
  return sum;
}
function normalizeValues(matrix, vals) {
  const factor = durationToMillis(matrix, vals) < 0 ? -1 : 1;
  orderedUnits.reduceRight((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const previousVal = vals[previous] * factor;
        const conv = matrix[current][previous];
        const rollUp = Math.floor(previousVal / conv);
        vals[current] += rollUp * factor;
        vals[previous] -= rollUp * conv * factor;
      }
      return current;
    } else {
      return previous;
    }
  }, null);
  orderedUnits.reduce((previous, current) => {
    if (!isUndefined(vals[current])) {
      if (previous) {
        const fraction = vals[previous] % 1;
        vals[previous] -= fraction;
        vals[current] += fraction * matrix[previous][current];
      }
      return current;
    } else {
      return previous;
    }
  }, null);
}
function removeZeroes(vals) {
  const newVals = {};
  for (const [key, value] of Object.entries(vals)) {
    if (value !== 0) {
      newVals[key] = value;
    }
  }
  return newVals;
}
var INVALID, lowOrderMatrix, casualMatrix, daysInYearAccurate, daysInMonthAccurate, accurateMatrix, orderedUnits, reverseUnits, Duration;
var init_duration = __esm({
  "node_modules/luxon/src/duration.js"() {
    init_errors();
    init_formatter();
    init_invalid();
    init_locale();
    init_regexParser();
    init_util();
    init_settings();
    init_datetime();
    INVALID = "Invalid Duration";
    lowOrderMatrix = {
      weeks: {
        days: 7,
        hours: 7 * 24,
        minutes: 7 * 24 * 60,
        seconds: 7 * 24 * 60 * 60,
        milliseconds: 7 * 24 * 60 * 60 * 1e3
      },
      days: {
        hours: 24,
        minutes: 24 * 60,
        seconds: 24 * 60 * 60,
        milliseconds: 24 * 60 * 60 * 1e3
      },
      hours: { minutes: 60, seconds: 60 * 60, milliseconds: 60 * 60 * 1e3 },
      minutes: { seconds: 60, milliseconds: 60 * 1e3 },
      seconds: { milliseconds: 1e3 }
    };
    casualMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: 52,
        days: 365,
        hours: 365 * 24,
        minutes: 365 * 24 * 60,
        seconds: 365 * 24 * 60 * 60,
        milliseconds: 365 * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: 13,
        days: 91,
        hours: 91 * 24,
        minutes: 91 * 24 * 60,
        seconds: 91 * 24 * 60 * 60,
        milliseconds: 91 * 24 * 60 * 60 * 1e3
      },
      months: {
        weeks: 4,
        days: 30,
        hours: 30 * 24,
        minutes: 30 * 24 * 60,
        seconds: 30 * 24 * 60 * 60,
        milliseconds: 30 * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    daysInYearAccurate = 146097 / 400;
    daysInMonthAccurate = 146097 / 4800;
    accurateMatrix = {
      years: {
        quarters: 4,
        months: 12,
        weeks: daysInYearAccurate / 7,
        days: daysInYearAccurate,
        hours: daysInYearAccurate * 24,
        minutes: daysInYearAccurate * 24 * 60,
        seconds: daysInYearAccurate * 24 * 60 * 60,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3
      },
      quarters: {
        months: 3,
        weeks: daysInYearAccurate / 28,
        days: daysInYearAccurate / 4,
        hours: daysInYearAccurate * 24 / 4,
        minutes: daysInYearAccurate * 24 * 60 / 4,
        seconds: daysInYearAccurate * 24 * 60 * 60 / 4,
        milliseconds: daysInYearAccurate * 24 * 60 * 60 * 1e3 / 4
      },
      months: {
        weeks: daysInMonthAccurate / 7,
        days: daysInMonthAccurate,
        hours: daysInMonthAccurate * 24,
        minutes: daysInMonthAccurate * 24 * 60,
        seconds: daysInMonthAccurate * 24 * 60 * 60,
        milliseconds: daysInMonthAccurate * 24 * 60 * 60 * 1e3
      },
      ...lowOrderMatrix
    };
    orderedUnits = [
      "years",
      "quarters",
      "months",
      "weeks",
      "days",
      "hours",
      "minutes",
      "seconds",
      "milliseconds"
    ];
    reverseUnits = orderedUnits.slice(0).reverse();
    Duration = class _Duration {
      /**
       * @private
       */
      constructor(config) {
        const accurate = config.conversionAccuracy === "longterm" || false;
        let matrix = accurate ? accurateMatrix : casualMatrix;
        if (config.matrix) {
          matrix = config.matrix;
        }
        this.values = config.values;
        this.loc = config.loc || Locale.create();
        this.conversionAccuracy = accurate ? "longterm" : "casual";
        this.invalid = config.invalid || null;
        this.matrix = matrix;
        this.isLuxonDuration = true;
      }
      /**
       * Create Duration from a number of milliseconds.
       * @param {number} count of milliseconds
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      static fromMillis(count, opts) {
        return _Duration.fromObject({ milliseconds: count }, opts);
      }
      /**
       * Create a Duration from a JavaScript object with keys like 'years' and 'hours'.
       * If this object is empty then a zero milliseconds duration is returned.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.years
       * @param {number} obj.quarters
       * @param {number} obj.months
       * @param {number} obj.weeks
       * @param {number} obj.days
       * @param {number} obj.hours
       * @param {number} obj.minutes
       * @param {number} obj.seconds
       * @param {number} obj.milliseconds
       * @param {Object} [opts=[]] - options for creating this Duration
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the custom conversion system to use
       * @return {Duration}
       */
      static fromObject(obj, opts = {}) {
        if (obj == null || typeof obj !== "object") {
          throw new InvalidArgumentError(
            `Duration.fromObject: argument expected to be an object, got ${obj === null ? "null" : typeof obj}`
          );
        }
        return new _Duration({
          values: normalizeObject(obj, _Duration.normalizeUnit),
          loc: Locale.fromObject(opts),
          conversionAccuracy: opts.conversionAccuracy,
          matrix: opts.matrix
        });
      }
      /**
       * Create a Duration from DurationLike.
       *
       * @param {Object | number | Duration} durationLike
       * One of:
       * - object with keys like 'years' and 'hours'.
       * - number representing milliseconds
       * - Duration instance
       * @return {Duration}
       */
      static fromDurationLike(durationLike) {
        if (isNumber(durationLike)) {
          return _Duration.fromMillis(durationLike);
        } else if (_Duration.isDuration(durationLike)) {
          return durationLike;
        } else if (typeof durationLike === "object") {
          return _Duration.fromObject(durationLike);
        } else {
          throw new InvalidArgumentError(
            `Unknown duration argument ${durationLike} of type ${typeof durationLike}`
          );
        }
      }
      /**
       * Create a Duration from an ISO 8601 duration string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the preset conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromISO('P3Y6M1W4DT12H30M5S').toObject() //=> { years: 3, months: 6, weeks: 1, days: 4, hours: 12, minutes: 30, seconds: 5 }
       * @example Duration.fromISO('PT23H').toObject() //=> { hours: 23 }
       * @example Duration.fromISO('P5Y3M').toObject() //=> { years: 5, months: 3 }
       * @return {Duration}
       */
      static fromISO(text, opts) {
        const [parsed] = parseISODuration(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create a Duration from an ISO 8601 time string.
       * @param {string} text - text to parse
       * @param {Object} opts - options for parsing
       * @param {string} [opts.locale='en-US'] - the locale to use
       * @param {string} opts.numberingSystem - the numbering system to use
       * @param {string} [opts.conversionAccuracy='casual'] - the preset conversion system to use
       * @param {string} [opts.matrix=Object] - the conversion system to use
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @example Duration.fromISOTime('11:22:33.444').toObject() //=> { hours: 11, minutes: 22, seconds: 33, milliseconds: 444 }
       * @example Duration.fromISOTime('11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T11:00').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @example Duration.fromISOTime('T1100').toObject() //=> { hours: 11, minutes: 0, seconds: 0 }
       * @return {Duration}
       */
      static fromISOTime(text, opts) {
        const [parsed] = parseISOTimeOnly(text);
        if (parsed) {
          return _Duration.fromObject(parsed, opts);
        } else {
          return _Duration.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
        }
      }
      /**
       * Create an invalid Duration.
       * @param {string} reason - simple string of why this datetime is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Duration}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Duration is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDurationError(invalid);
        } else {
          return new _Duration({ invalid });
        }
      }
      /**
       * @private
       */
      static normalizeUnit(unit) {
        const normalized = {
          year: "years",
          years: "years",
          quarter: "quarters",
          quarters: "quarters",
          month: "months",
          months: "months",
          week: "weeks",
          weeks: "weeks",
          day: "days",
          days: "days",
          hour: "hours",
          hours: "hours",
          minute: "minutes",
          minutes: "minutes",
          second: "seconds",
          seconds: "seconds",
          millisecond: "milliseconds",
          milliseconds: "milliseconds"
        }[unit ? unit.toLowerCase() : unit];
        if (!normalized)
          throw new InvalidUnitError(unit);
        return normalized;
      }
      /**
       * Check if an object is a Duration. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDuration(o) {
        return o && o.isLuxonDuration || false;
      }
      /**
       * Get  the locale of a Duration, such 'en-GB'
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a Duration, such 'beng'. The numbering system is used when formatting the Duration
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Returns a string representation of this Duration formatted according to the specified format string. You may use these tokens:
       * * `S` for milliseconds
       * * `s` for seconds
       * * `m` for minutes
       * * `h` for hours
       * * `d` for days
       * * `w` for weeks
       * * `M` for months
       * * `y` for years
       * Notes:
       * * Add padding by repeating the token, e.g. "yy" pads the years to two digits, "hhhh" pads the hours out to four digits
       * * Tokens can be escaped by wrapping with single quotes.
       * * The duration will be converted to the set of units in the format string using {@link Duration#shiftTo} and the Durations's conversion accuracy setting.
       * @param {string} fmt - the format string
       * @param {Object} opts - options
       * @param {boolean} [opts.floor=true] - floor numerical values
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("y d s") //=> "1 6 2"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("yy dd sss") //=> "01 06 002"
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toFormat("M S") //=> "12 518402000"
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        const fmtOpts = {
          ...opts,
          floor: opts.round !== false && opts.floor !== false
        };
        return this.isValid ? Formatter.create(this.loc, fmtOpts).formatDurationFromString(this, fmt) : INVALID;
      }
      /**
       * Returns a string representation of a Duration with all units included.
       * To modify its behavior, use `listStyle` and any Intl.NumberFormat option, though `unitDisplay` is especially relevant.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#options
       * @param {Object} opts - Formatting options. Accepts the same keys as the options parameter of the native `Intl.NumberFormat` constructor, as well as `listStyle`.
       * @param {string} [opts.listStyle='narrow'] - How to format the merged list. Corresponds to the `style` property of the options parameter of the native `Intl.ListFormat` constructor.
       * @example
       * ```js
       * var dur = Duration.fromObject({ days: 1, hours: 5, minutes: 6 })
       * dur.toHuman() //=> '1 day, 5 hours, 6 minutes'
       * dur.toHuman({ listStyle: "long" }) //=> '1 day, 5 hours, and 6 minutes'
       * dur.toHuman({ unitDisplay: "short" }) //=> '1 day, 5 hr, 6 min'
       * ```
       */
      toHuman(opts = {}) {
        if (!this.isValid)
          return INVALID;
        const l2 = orderedUnits.map((unit) => {
          const val = this.values[unit];
          if (isUndefined(val)) {
            return null;
          }
          return this.loc.numberFormatter({ style: "unit", unitDisplay: "long", ...opts, unit: unit.slice(0, -1) }).format(val);
        }).filter((n2) => n2);
        return this.loc.listFormatter({ type: "conjunction", style: opts.listStyle || "narrow", ...opts }).format(l2);
      }
      /**
       * Returns a JavaScript object with this Duration's values.
       * @example Duration.fromObject({ years: 1, days: 6, seconds: 2 }).toObject() //=> { years: 1, days: 6, seconds: 2 }
       * @return {Object}
       */
      toObject() {
        if (!this.isValid)
          return {};
        return { ...this.values };
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Durations
       * @example Duration.fromObject({ years: 3, seconds: 45 }).toISO() //=> 'P3YT45S'
       * @example Duration.fromObject({ months: 4, seconds: 45 }).toISO() //=> 'P4MT45S'
       * @example Duration.fromObject({ months: 5 }).toISO() //=> 'P5M'
       * @example Duration.fromObject({ minutes: 5 }).toISO() //=> 'PT5M'
       * @example Duration.fromObject({ milliseconds: 6 }).toISO() //=> 'PT0.006S'
       * @return {string}
       */
      toISO() {
        if (!this.isValid)
          return null;
        let s2 = "P";
        if (this.years !== 0)
          s2 += this.years + "Y";
        if (this.months !== 0 || this.quarters !== 0)
          s2 += this.months + this.quarters * 3 + "M";
        if (this.weeks !== 0)
          s2 += this.weeks + "W";
        if (this.days !== 0)
          s2 += this.days + "D";
        if (this.hours !== 0 || this.minutes !== 0 || this.seconds !== 0 || this.milliseconds !== 0)
          s2 += "T";
        if (this.hours !== 0)
          s2 += this.hours + "H";
        if (this.minutes !== 0)
          s2 += this.minutes + "M";
        if (this.seconds !== 0 || this.milliseconds !== 0)
          s2 += roundTo(this.seconds + this.milliseconds / 1e3, 3) + "S";
        if (s2 === "P")
          s2 += "T0S";
        return s2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Duration, formatted as a time of day.
       * Note that this will return null if the duration is invalid, negative, or equal to or greater than 24 hours.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Times
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example Duration.fromObject({ hours: 11 }).toISOTime() //=> '11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressMilliseconds: true }) //=> '11:00:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ suppressSeconds: true }) //=> '11:00'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ includePrefix: true }) //=> 'T11:00:00.000'
       * @example Duration.fromObject({ hours: 11 }).toISOTime({ format: 'basic' }) //=> '110000.000'
       * @return {string}
       */
      toISOTime(opts = {}) {
        if (!this.isValid)
          return null;
        const millis = this.toMillis();
        if (millis < 0 || millis >= 864e5)
          return null;
        opts = {
          suppressMilliseconds: false,
          suppressSeconds: false,
          includePrefix: false,
          format: "extended",
          ...opts,
          includeOffset: false
        };
        const dateTime = DateTime.fromMillis(millis, { zone: "UTC" });
        return dateTime.toISOTime(opts);
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns an ISO 8601 representation of this Duration appropriate for use in debugging.
       * @return {string}
       */
      toString() {
        return this.toISO();
      }
      /**
       * Returns a string representation of this Duration appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Duration { values: ${JSON.stringify(this.values)} }`;
        } else {
          return `Duration { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns an milliseconds value of this Duration.
       * @return {number}
       */
      toMillis() {
        if (!this.isValid)
          return NaN;
        return durationToMillis(this.matrix, this.values);
      }
      /**
       * Returns an milliseconds value of this Duration. Alias of {@link toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Make this Duration longer by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration), result = {};
        for (const k of orderedUnits) {
          if (hasOwnProperty(dur.values, k) || hasOwnProperty(this.values, k)) {
            result[k] = dur.get(k) + this.get(k);
          }
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Make this Duration shorter by the specified amount. Return a newly-constructed Duration.
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @return {Duration}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = _Duration.fromDurationLike(duration);
        return this.plus(dur.negate());
      }
      /**
       * Scale this Duration by the specified amount. Return a newly-constructed Duration.
       * @param {function} fn - The function to apply to each unit. Arity is 1 or 2: the value of the unit and, optionally, the unit name. Must return a number.
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits(x => x * 2) //=> { hours: 2, minutes: 60 }
       * @example Duration.fromObject({ hours: 1, minutes: 30 }).mapUnits((x, u) => u === "hours" ? x * 2 : x) //=> { hours: 2, minutes: 30 }
       * @return {Duration}
       */
      mapUnits(fn) {
        if (!this.isValid)
          return this;
        const result = {};
        for (const k of Object.keys(this.values)) {
          result[k] = asNumber(fn(this.values[k], k));
        }
        return clone(this, { values: result }, true);
      }
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example Duration.fromObject({years: 2, days: 3}).get('years') //=> 2
       * @example Duration.fromObject({years: 2, days: 3}).get('months') //=> 0
       * @example Duration.fromObject({years: 2, days: 3}).get('days') //=> 3
       * @return {number}
       */
      get(unit) {
        return this[_Duration.normalizeUnit(unit)];
      }
      /**
       * "Set" the values of specified units. Return a newly-constructed Duration.
       * @param {Object} values - a mapping of units to numbers
       * @example dur.set({ years: 2017 })
       * @example dur.set({ hours: 8, minutes: 30 })
       * @return {Duration}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const mixed = { ...this.values, ...normalizeObject(values, _Duration.normalizeUnit) };
        return clone(this, { values: mixed });
      }
      /**
       * "Set" the locale and/or numberingSystem.  Returns a newly-constructed Duration.
       * @example dur.reconfigure({ locale: 'en-GB' })
       * @return {Duration}
       */
      reconfigure({ locale, numberingSystem, conversionAccuracy, matrix } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem });
        const opts = { loc, matrix, conversionAccuracy };
        return clone(this, opts);
      }
      /**
       * Return the length of the duration in the specified unit.
       * @param {string} unit - a unit such as 'minutes' or 'days'
       * @example Duration.fromObject({years: 1}).as('days') //=> 365
       * @example Duration.fromObject({years: 1}).as('months') //=> 12
       * @example Duration.fromObject({hours: 60}).as('days') //=> 2.5
       * @return {number}
       */
      as(unit) {
        return this.isValid ? this.shiftTo(unit).get(unit) : NaN;
      }
      /**
       * Reduce this Duration to its canonical representation in its current units.
       * Assuming the overall value of the Duration is positive, this means:
       * - excessive values for lower-order units are converted to higher-order units (if possible, see first and second example)
       * - negative lower-order units are converted to higher order units (there must be such a higher order unit, otherwise
       *   the overall value would be negative, see third example)
       * - fractional values for higher-order units are converted to lower-order units (if possible, see fourth example)
       *
       * If the overall value is negative, the result of this method is equivalent to `this.negate().normalize().negate()`.
       * @example Duration.fromObject({ years: 2, days: 5000 }).normalize().toObject() //=> { years: 15, days: 255 }
       * @example Duration.fromObject({ days: 5000 }).normalize().toObject() //=> { days: 5000 }
       * @example Duration.fromObject({ hours: 12, minutes: -45 }).normalize().toObject() //=> { hours: 11, minutes: 15 }
       * @example Duration.fromObject({ years: 2.5, days: 0, hours: 0 }).normalize().toObject() //=> { years: 2, days: 182, hours: 12 }
       * @return {Duration}
       */
      normalize() {
        if (!this.isValid)
          return this;
        const vals = this.toObject();
        normalizeValues(this.matrix, vals);
        return clone(this, { values: vals }, true);
      }
      /**
       * Rescale units to its largest representation
       * @example Duration.fromObject({ milliseconds: 90000 }).rescale().toObject() //=> { minutes: 1, seconds: 30 }
       * @return {Duration}
       */
      rescale() {
        if (!this.isValid)
          return this;
        const vals = removeZeroes(this.normalize().shiftToAll().toObject());
        return clone(this, { values: vals }, true);
      }
      /**
       * Convert this Duration into its representation in a different set of units.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).shiftTo('minutes', 'milliseconds').toObject() //=> { minutes: 60, milliseconds: 30000 }
       * @return {Duration}
       */
      shiftTo(...units) {
        if (!this.isValid)
          return this;
        if (units.length === 0) {
          return this;
        }
        units = units.map((u) => _Duration.normalizeUnit(u));
        const built = {}, accumulated = {}, vals = this.toObject();
        let lastUnit;
        for (const k of orderedUnits) {
          if (units.indexOf(k) >= 0) {
            lastUnit = k;
            let own = 0;
            for (const ak in accumulated) {
              own += this.matrix[ak][k] * accumulated[ak];
              accumulated[ak] = 0;
            }
            if (isNumber(vals[k])) {
              own += vals[k];
            }
            const i = Math.trunc(own);
            built[k] = i;
            accumulated[k] = (own * 1e3 - i * 1e3) / 1e3;
          } else if (isNumber(vals[k])) {
            accumulated[k] = vals[k];
          }
        }
        for (const key in accumulated) {
          if (accumulated[key] !== 0) {
            built[lastUnit] += key === lastUnit ? accumulated[key] : accumulated[key] / this.matrix[lastUnit][key];
          }
        }
        normalizeValues(this.matrix, built);
        return clone(this, { values: built }, true);
      }
      /**
       * Shift this Duration to all available units.
       * Same as shiftTo("years", "months", "weeks", "days", "hours", "minutes", "seconds", "milliseconds")
       * @return {Duration}
       */
      shiftToAll() {
        if (!this.isValid)
          return this;
        return this.shiftTo(
          "years",
          "months",
          "weeks",
          "days",
          "hours",
          "minutes",
          "seconds",
          "milliseconds"
        );
      }
      /**
       * Return the negative of this Duration.
       * @example Duration.fromObject({ hours: 1, seconds: 30 }).negate().toObject() //=> { hours: -1, seconds: -30 }
       * @return {Duration}
       */
      negate() {
        if (!this.isValid)
          return this;
        const negated = {};
        for (const k of Object.keys(this.values)) {
          negated[k] = this.values[k] === 0 ? 0 : -this.values[k];
        }
        return clone(this, { values: negated }, true);
      }
      /**
       * Get the years.
       * @type {number}
       */
      get years() {
        return this.isValid ? this.values.years || 0 : NaN;
      }
      /**
       * Get the quarters.
       * @type {number}
       */
      get quarters() {
        return this.isValid ? this.values.quarters || 0 : NaN;
      }
      /**
       * Get the months.
       * @type {number}
       */
      get months() {
        return this.isValid ? this.values.months || 0 : NaN;
      }
      /**
       * Get the weeks
       * @type {number}
       */
      get weeks() {
        return this.isValid ? this.values.weeks || 0 : NaN;
      }
      /**
       * Get the days.
       * @type {number}
       */
      get days() {
        return this.isValid ? this.values.days || 0 : NaN;
      }
      /**
       * Get the hours.
       * @type {number}
       */
      get hours() {
        return this.isValid ? this.values.hours || 0 : NaN;
      }
      /**
       * Get the minutes.
       * @type {number}
       */
      get minutes() {
        return this.isValid ? this.values.minutes || 0 : NaN;
      }
      /**
       * Get the seconds.
       * @return {number}
       */
      get seconds() {
        return this.isValid ? this.values.seconds || 0 : NaN;
      }
      /**
       * Get the milliseconds.
       * @return {number}
       */
      get milliseconds() {
        return this.isValid ? this.values.milliseconds || 0 : NaN;
      }
      /**
       * Returns whether the Duration is invalid. Invalid durations are returned by diff operations
       * on invalid DateTimes or Intervals.
       * @return {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this Duration became invalid, or null if the Duration is valid
       * @return {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Duration became invalid, or null if the Duration is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Equality check
       * Two Durations are equal iff they have the same units and the same values for each unit.
       * @param {Duration} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        if (!this.loc.equals(other.loc)) {
          return false;
        }
        function eq(v1, v2) {
          if (v1 === void 0 || v1 === 0)
            return v2 === void 0 || v2 === 0;
          return v1 === v2;
        }
        for (const u of orderedUnits) {
          if (!eq(this.values[u], other.values[u])) {
            return false;
          }
        }
        return true;
      }
    };
  }
});

// node_modules/luxon/src/interval.js
function validateStartEnd(start, end) {
  if (!start || !start.isValid) {
    return Interval.invalid("missing or invalid start");
  } else if (!end || !end.isValid) {
    return Interval.invalid("missing or invalid end");
  } else if (end < start) {
    return Interval.invalid(
      "end before start",
      `The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`
    );
  } else {
    return null;
  }
}
var INVALID2, Interval;
var init_interval = __esm({
  "node_modules/luxon/src/interval.js"() {
    init_datetime();
    init_duration();
    init_settings();
    init_errors();
    init_invalid();
    init_formatter();
    init_formats();
    INVALID2 = "Invalid Interval";
    Interval = class _Interval {
      /**
       * @private
       */
      constructor(config) {
        this.s = config.start;
        this.e = config.end;
        this.invalid = config.invalid || null;
        this.isLuxonInterval = true;
      }
      /**
       * Create an invalid Interval.
       * @param {string} reason - simple string of why this Interval is invalid. Should not contain parameters or anything else data-dependent
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {Interval}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the Interval is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidIntervalError(invalid);
        } else {
          return new _Interval({ invalid });
        }
      }
      /**
       * Create an Interval from a start DateTime and an end DateTime. Inclusive of the start but not the end.
       * @param {DateTime|Date|Object} start
       * @param {DateTime|Date|Object} end
       * @return {Interval}
       */
      static fromDateTimes(start, end) {
        const builtStart = friendlyDateTime(start), builtEnd = friendlyDateTime(end);
        const validateError = validateStartEnd(builtStart, builtEnd);
        if (validateError == null) {
          return new _Interval({
            start: builtStart,
            end: builtEnd
          });
        } else {
          return validateError;
        }
      }
      /**
       * Create an Interval from a start DateTime and a Duration to extend to.
       * @param {DateTime|Date|Object} start
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static after(start, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(start);
        return _Interval.fromDateTimes(dt, dt.plus(dur));
      }
      /**
       * Create an Interval from an end DateTime and a Duration to extend backwards to.
       * @param {DateTime|Date|Object} end
       * @param {Duration|Object|number} duration - the length of the Interval.
       * @return {Interval}
       */
      static before(end, duration) {
        const dur = Duration.fromDurationLike(duration), dt = friendlyDateTime(end);
        return _Interval.fromDateTimes(dt.minus(dur), dt);
      }
      /**
       * Create an Interval from an ISO 8601 string.
       * Accepts `<start>/<end>`, `<start>/<duration>`, and `<duration>/<end>` formats.
       * @param {string} text - the ISO string to parse
       * @param {Object} [opts] - options to pass {@link DateTime#fromISO} and optionally {@link Duration#fromISO}
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {Interval}
       */
      static fromISO(text, opts) {
        const [s2, e] = (text || "").split("/", 2);
        if (s2 && e) {
          let start, startIsValid;
          try {
            start = DateTime.fromISO(s2, opts);
            startIsValid = start.isValid;
          } catch (e2) {
            startIsValid = false;
          }
          let end, endIsValid;
          try {
            end = DateTime.fromISO(e, opts);
            endIsValid = end.isValid;
          } catch (e2) {
            endIsValid = false;
          }
          if (startIsValid && endIsValid) {
            return _Interval.fromDateTimes(start, end);
          }
          if (startIsValid) {
            const dur = Duration.fromISO(e, opts);
            if (dur.isValid) {
              return _Interval.after(start, dur);
            }
          } else if (endIsValid) {
            const dur = Duration.fromISO(s2, opts);
            if (dur.isValid) {
              return _Interval.before(end, dur);
            }
          }
        }
        return _Interval.invalid("unparsable", `the input "${text}" can't be parsed as ISO 8601`);
      }
      /**
       * Check if an object is an Interval. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isInterval(o) {
        return o && o.isLuxonInterval || false;
      }
      /**
       * Returns the start of the Interval
       * @type {DateTime}
       */
      get start() {
        return this.isValid ? this.s : null;
      }
      /**
       * Returns the end of the Interval
       * @type {DateTime}
       */
      get end() {
        return this.isValid ? this.e : null;
      }
      /**
       * Returns whether this Interval's end is at least its start, meaning that the Interval isn't 'backwards'.
       * @type {boolean}
       */
      get isValid() {
        return this.invalidReason === null;
      }
      /**
       * Returns an error code if this Interval is invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this Interval became invalid, or null if the Interval is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Returns the length of the Interval in the specified unit.
       * @param {string} unit - the unit (such as 'hours' or 'days') to return the length in.
       * @return {number}
       */
      length(unit = "milliseconds") {
        return this.isValid ? this.toDuration(...[unit]).get(unit) : NaN;
      }
      /**
       * Returns the count of minutes, hours, days, months, or years included in the Interval, even in part.
       * Unlike {@link Interval#length} this counts sections of the calendar, not periods of time, e.g. specifying 'day'
       * asks 'what dates are included in this interval?', not 'how many days long is this interval?'
       * @param {string} [unit='milliseconds'] - the unit of time to count.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; this operation will always use the locale of the start DateTime
       * @return {number}
       */
      count(unit = "milliseconds", opts) {
        if (!this.isValid)
          return NaN;
        const start = this.start.startOf(unit, opts);
        let end;
        if (opts == null ? void 0 : opts.useLocaleWeeks) {
          end = this.end.reconfigure({ locale: start.locale });
        } else {
          end = this.end;
        }
        end = end.startOf(unit, opts);
        return Math.floor(end.diff(start, unit).get(unit)) + (end.valueOf() !== this.end.valueOf());
      }
      /**
       * Returns whether this Interval's start and end are both in the same unit of time
       * @param {string} unit - the unit of time to check sameness on
       * @return {boolean}
       */
      hasSame(unit) {
        return this.isValid ? this.isEmpty() || this.e.minus(1).hasSame(this.s, unit) : false;
      }
      /**
       * Return whether this Interval has the same start and end DateTimes.
       * @return {boolean}
       */
      isEmpty() {
        return this.s.valueOf() === this.e.valueOf();
      }
      /**
       * Return whether this Interval's start is after the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isAfter(dateTime) {
        if (!this.isValid)
          return false;
        return this.s > dateTime;
      }
      /**
       * Return whether this Interval's end is before the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      isBefore(dateTime) {
        if (!this.isValid)
          return false;
        return this.e <= dateTime;
      }
      /**
       * Return whether this Interval contains the specified DateTime.
       * @param {DateTime} dateTime
       * @return {boolean}
       */
      contains(dateTime) {
        if (!this.isValid)
          return false;
        return this.s <= dateTime && this.e > dateTime;
      }
      /**
       * "Sets" the start and/or end dates. Returns a newly-constructed Interval.
       * @param {Object} values - the values to set
       * @param {DateTime} values.start - the starting DateTime
       * @param {DateTime} values.end - the ending DateTime
       * @return {Interval}
       */
      set({ start, end } = {}) {
        if (!this.isValid)
          return this;
        return _Interval.fromDateTimes(start || this.s, end || this.e);
      }
      /**
       * Split this Interval at each of the specified DateTimes
       * @param {...DateTime} dateTimes - the unit of time to count.
       * @return {Array}
       */
      splitAt(...dateTimes) {
        if (!this.isValid)
          return [];
        const sorted = dateTimes.map(friendlyDateTime).filter((d) => this.contains(d)).sort((a, b) => a.toMillis() - b.toMillis()), results = [];
        let { s: s2 } = this, i = 0;
        while (s2 < this.e) {
          const added = sorted[i] || this.e, next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          i += 1;
        }
        return results;
      }
      /**
       * Split this Interval into smaller Intervals, each of the specified length.
       * Left over time is grouped into a smaller interval
       * @param {Duration|Object|number} duration - The length of each resulting interval.
       * @return {Array}
       */
      splitBy(duration) {
        const dur = Duration.fromDurationLike(duration);
        if (!this.isValid || !dur.isValid || dur.as("milliseconds") === 0) {
          return [];
        }
        let { s: s2 } = this, idx = 1, next;
        const results = [];
        while (s2 < this.e) {
          const added = this.start.plus(dur.mapUnits((x) => x * idx));
          next = +added > +this.e ? this.e : added;
          results.push(_Interval.fromDateTimes(s2, next));
          s2 = next;
          idx += 1;
        }
        return results;
      }
      /**
       * Split this Interval into the specified number of smaller intervals.
       * @param {number} numberOfParts - The number of Intervals to divide the Interval into.
       * @return {Array}
       */
      divideEqually(numberOfParts) {
        if (!this.isValid)
          return [];
        return this.splitBy(this.length() / numberOfParts).slice(0, numberOfParts);
      }
      /**
       * Return whether this Interval overlaps with the specified Interval
       * @param {Interval} other
       * @return {boolean}
       */
      overlaps(other) {
        return this.e > other.s && this.s < other.e;
      }
      /**
       * Return whether this Interval's end is adjacent to the specified Interval's start.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsStart(other) {
        if (!this.isValid)
          return false;
        return +this.e === +other.s;
      }
      /**
       * Return whether this Interval's start is adjacent to the specified Interval's end.
       * @param {Interval} other
       * @return {boolean}
       */
      abutsEnd(other) {
        if (!this.isValid)
          return false;
        return +other.e === +this.s;
      }
      /**
       * Return whether this Interval engulfs the start and end of the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      engulfs(other) {
        if (!this.isValid)
          return false;
        return this.s <= other.s && this.e >= other.e;
      }
      /**
       * Return whether this Interval has the same start and end as the specified Interval.
       * @param {Interval} other
       * @return {boolean}
       */
      equals(other) {
        if (!this.isValid || !other.isValid) {
          return false;
        }
        return this.s.equals(other.s) && this.e.equals(other.e);
      }
      /**
       * Return an Interval representing the intersection of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the maximum start time and the minimum end time of the two Intervals.
       * Returns null if the intersection is empty, meaning, the intervals don't intersect.
       * @param {Interval} other
       * @return {Interval}
       */
      intersection(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s > other.s ? this.s : other.s, e = this.e < other.e ? this.e : other.e;
        if (s2 >= e) {
          return null;
        } else {
          return _Interval.fromDateTimes(s2, e);
        }
      }
      /**
       * Return an Interval representing the union of this Interval and the specified Interval.
       * Specifically, the resulting Interval has the minimum start time and the maximum end time of the two Intervals.
       * @param {Interval} other
       * @return {Interval}
       */
      union(other) {
        if (!this.isValid)
          return this;
        const s2 = this.s < other.s ? this.s : other.s, e = this.e > other.e ? this.e : other.e;
        return _Interval.fromDateTimes(s2, e);
      }
      /**
       * Merge an array of Intervals into a equivalent minimal set of Intervals.
       * Combines overlapping and adjacent Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static merge(intervals) {
        const [found, final] = intervals.sort((a, b) => a.s - b.s).reduce(
          ([sofar, current], item) => {
            if (!current) {
              return [sofar, item];
            } else if (current.overlaps(item) || current.abutsStart(item)) {
              return [sofar, current.union(item)];
            } else {
              return [sofar.concat([current]), item];
            }
          },
          [[], null]
        );
        if (final) {
          found.push(final);
        }
        return found;
      }
      /**
       * Return an array of Intervals representing the spans of time that only appear in one of the specified Intervals.
       * @param {Array} intervals
       * @return {Array}
       */
      static xor(intervals) {
        let start = null, currentCount = 0;
        const results = [], ends = intervals.map((i) => [
          { time: i.s, type: "s" },
          { time: i.e, type: "e" }
        ]), flattened = Array.prototype.concat(...ends), arr = flattened.sort((a, b) => a.time - b.time);
        for (const i of arr) {
          currentCount += i.type === "s" ? 1 : -1;
          if (currentCount === 1) {
            start = i.time;
          } else {
            if (start && +start !== +i.time) {
              results.push(_Interval.fromDateTimes(start, i.time));
            }
            start = null;
          }
        }
        return _Interval.merge(results);
      }
      /**
       * Return an Interval representing the span of time in this Interval that doesn't overlap with any of the specified Intervals.
       * @param {...Interval} intervals
       * @return {Array}
       */
      difference(...intervals) {
        return _Interval.xor([this].concat(intervals)).map((i) => this.intersection(i)).filter((i) => i && !i.isEmpty());
      }
      /**
       * Returns a string representation of this Interval appropriate for debugging.
       * @return {string}
       */
      toString() {
        if (!this.isValid)
          return INVALID2;
        return `[${this.s.toISO()} \u2013 ${this.e.toISO()})`;
      }
      /**
       * Returns a string representation of this Interval appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`;
        } else {
          return `Interval { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns a localized string representing this Interval. Accepts the same options as the
       * Intl.DateTimeFormat constructor and any presets defined by Luxon, such as
       * {@link DateTime.DATE_FULL} or {@link DateTime.TIME_SIMPLE}. The exact behavior of this method
       * is browser-specific, but in general it will return an appropriate representation of the
       * Interval in the assigned locale. Defaults to the system's locale if no locale has been
       * specified.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {Object} [formatOpts=DateTime.DATE_SHORT] - Either a DateTime preset or
       * Intl.DateTimeFormat constructor options.
       * @param {Object} opts - Options to override the configuration of the start DateTime.
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(); //=> 11/7/2022 – 11/8/2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL); //=> November 7 – 8, 2022
       * @example Interval.fromISO('2022-11-07T09:00Z/2022-11-08T09:00Z').toLocaleString(DateTime.DATE_FULL, { locale: 'fr-FR' }); //=> 7–8 novembre 2022
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString(DateTime.TIME_SIMPLE); //=> 6:00 – 8:00 PM
       * @example Interval.fromISO('2022-11-07T17:00Z/2022-11-07T19:00Z').toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> Mon, Nov 07, 6:00 – 8:00 p
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.s.loc.clone(opts), formatOpts).formatInterval(this) : INVALID2;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this Interval.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISO(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISO(opts)}/${this.e.toISO(opts)}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of date of this Interval.
       * The time components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @return {string}
       */
      toISODate() {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISODate()}/${this.e.toISODate()}`;
      }
      /**
       * Returns an ISO 8601-compliant string representation of time of this Interval.
       * The date components are ignored.
       * @see https://en.wikipedia.org/wiki/ISO_8601#Time_intervals
       * @param {Object} opts - The same options as {@link DateTime#toISO}
       * @return {string}
       */
      toISOTime(opts) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`;
      }
      /**
       * Returns a string representation of this Interval formatted according to the specified format
       * string. **You may not want this.** See {@link Interval#toLocaleString} for a more flexible
       * formatting tool.
       * @param {string} dateFormat - The format string. This string formats the start and end time.
       * See {@link DateTime#toFormat} for details.
       * @param {Object} opts - Options.
       * @param {string} [opts.separator =  ' – '] - A separator to place between the start and end
       * representations.
       * @return {string}
       */
      toFormat(dateFormat, { separator = " \u2013 " } = {}) {
        if (!this.isValid)
          return INVALID2;
        return `${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`;
      }
      /**
       * Return a Duration representing the time spanned by this interval.
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example Interval.fromDateTimes(dt1, dt2).toDuration().toObject() //=> { milliseconds: 88489257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('days').toObject() //=> { days: 1.0241812152777778 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes']).toObject() //=> { hours: 24, minutes: 34.82095 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration(['hours', 'minutes', 'seconds']).toObject() //=> { hours: 24, minutes: 34, seconds: 49.257 }
       * @example Interval.fromDateTimes(dt1, dt2).toDuration('seconds').toObject() //=> { seconds: 88489.257 }
       * @return {Duration}
       */
      toDuration(unit, opts) {
        if (!this.isValid) {
          return Duration.invalid(this.invalidReason);
        }
        return this.e.diff(this.s, unit, opts);
      }
      /**
       * Run mapFn on the interval start and end, returning a new Interval from the resulting DateTimes
       * @param {function} mapFn
       * @return {Interval}
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.toUTC())
       * @example Interval.fromDateTimes(dt1, dt2).mapEndpoints(endpoint => endpoint.plus({ hours: 2 }))
       */
      mapEndpoints(mapFn) {
        return _Interval.fromDateTimes(mapFn(this.s), mapFn(this.e));
      }
    };
  }
});

// node_modules/luxon/src/info.js
var Info;
var init_info = __esm({
  "node_modules/luxon/src/info.js"() {
    init_datetime();
    init_settings();
    init_locale();
    init_IANAZone();
    init_zoneUtil();
    init_util();
    Info = class {
      /**
       * Return whether the specified zone contains a DST.
       * @param {string|Zone} [zone='local'] - Zone to check. Defaults to the environment's local zone.
       * @return {boolean}
       */
      static hasDST(zone = Settings.defaultZone) {
        const proto = DateTime.now().setZone(zone).set({ month: 12 });
        return !zone.isUniversal && proto.offset !== proto.set({ month: 6 }).offset;
      }
      /**
       * Return whether the specified zone is a valid IANA specifier.
       * @param {string} zone - Zone to check
       * @return {boolean}
       */
      static isValidIANAZone(zone) {
        return IANAZone.isValidZone(zone);
      }
      /**
       * Converts the input into a {@link Zone} instance.
       *
       * * If `input` is already a Zone instance, it is returned unchanged.
       * * If `input` is a string containing a valid time zone name, a Zone instance
       *   with that name is returned.
       * * If `input` is a string that doesn't refer to a known time zone, a Zone
       *   instance with {@link Zone#isValid} == false is returned.
       * * If `input is a number, a Zone instance with the specified fixed offset
       *   in minutes is returned.
       * * If `input` is `null` or `undefined`, the default zone is returned.
       * @param {string|Zone|number} [input] - the value to be converted
       * @return {Zone}
       */
      static normalizeZone(input) {
        return normalizeZone(input, Settings.defaultZone);
      }
      /**
       * Get the weekday on which the week starts according to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number} the start of the week, 1 for Monday through 7 for Sunday
       */
      static getStartOfWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getStartOfWeek();
      }
      /**
       * Get the minimum number of days necessary in a week before it is considered part of the next year according
       * to the given locale.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number}
       */
      static getMinimumDaysInFirstWeek({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getMinDaysInFirstWeek();
      }
      /**
       * Get the weekdays, which are considered the weekend according to the given locale
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @returns {number[]} an array of weekdays, 1 for Monday through 7 for Sunday
       */
      static getWeekendWeekdays({ locale = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale)).getWeekendDays().slice();
      }
      /**
       * Return an array of standalone month names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @example Info.months()[0] //=> 'January'
       * @example Info.months('short')[0] //=> 'Jan'
       * @example Info.months('numeric')[0] //=> '1'
       * @example Info.months('short', { locale: 'fr-CA' } )[0] //=> 'janv.'
       * @example Info.months('numeric', { locale: 'ar' })[0] //=> '١'
       * @example Info.months('long', { outputCalendar: 'islamic' })[0] //=> 'Rabiʻ I'
       * @return {Array}
       */
      static months(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length);
      }
      /**
       * Return an array of format month names.
       * Format months differ from standalone months in that they're meant to appear next to the day of the month. In some languages, that
       * changes the string.
       * See {@link Info#months}
       * @param {string} [length='long'] - the length of the month representation, such as "numeric", "2-digit", "narrow", "short", "long"
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @param {string} [opts.outputCalendar='gregory'] - the calendar
       * @return {Array}
       */
      static monthsFormat(length = "long", { locale = null, numberingSystem = null, locObj = null, outputCalendar = "gregory" } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, outputCalendar)).months(length, true);
      }
      /**
       * Return an array of standalone week names.
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param {string} [length='long'] - the length of the weekday representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @example Info.weekdays()[0] //=> 'Monday'
       * @example Info.weekdays('short')[0] //=> 'Mon'
       * @example Info.weekdays('short', { locale: 'fr-CA' })[0] //=> 'lun.'
       * @example Info.weekdays('short', { locale: 'ar' })[0] //=> 'الاثنين'
       * @return {Array}
       */
      static weekdays(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length);
      }
      /**
       * Return an array of format week names.
       * Format weekdays differ from standalone weekdays in that they're meant to appear next to more date information. In some languages, that
       * changes the string.
       * See {@link Info#weekdays}
       * @param {string} [length='long'] - the length of the month representation, such as "narrow", "short", "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale=null] - the locale code
       * @param {string} [opts.numberingSystem=null] - the numbering system
       * @param {string} [opts.locObj=null] - an existing locale object to use
       * @return {Array}
       */
      static weekdaysFormat(length = "long", { locale = null, numberingSystem = null, locObj = null } = {}) {
        return (locObj || Locale.create(locale, numberingSystem, null)).weekdays(length, true);
      }
      /**
       * Return an array of meridiems.
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.meridiems() //=> [ 'AM', 'PM' ]
       * @example Info.meridiems({ locale: 'my' }) //=> [ 'နံနက်', 'ညနေ' ]
       * @return {Array}
       */
      static meridiems({ locale = null } = {}) {
        return Locale.create(locale).meridiems();
      }
      /**
       * Return an array of eras, such as ['BC', 'AD']. The locale can be specified, but the calendar system is always Gregorian.
       * @param {string} [length='short'] - the length of the era representation, such as "short" or "long".
       * @param {Object} opts - options
       * @param {string} [opts.locale] - the locale code
       * @example Info.eras() //=> [ 'BC', 'AD' ]
       * @example Info.eras('long') //=> [ 'Before Christ', 'Anno Domini' ]
       * @example Info.eras('long', { locale: 'fr' }) //=> [ 'avant Jésus-Christ', 'après Jésus-Christ' ]
       * @return {Array}
       */
      static eras(length = "short", { locale = null } = {}) {
        return Locale.create(locale, null, "gregory").eras(length);
      }
      /**
       * Return the set of available features in this environment.
       * Some features of Luxon are not available in all environments. For example, on older browsers, relative time formatting support is not available. Use this function to figure out if that's the case.
       * Keys:
       * * `relative`: whether this environment supports relative time formatting
       * * `localeWeek`: whether this environment supports different weekdays for the start of the week based on the locale
       * @example Info.features() //=> { relative: false, localeWeek: true }
       * @return {Object}
       */
      static features() {
        return { relative: hasRelative(), localeWeek: hasLocaleWeekInfo() };
      }
    };
  }
});

// node_modules/luxon/src/impl/diff.js
function dayDiff(earlier, later) {
  const utcDayStart = (dt) => dt.toUTC(0, { keepLocalTime: true }).startOf("day").valueOf(), ms = utcDayStart(later) - utcDayStart(earlier);
  return Math.floor(Duration.fromMillis(ms).as("days"));
}
function highOrderDiffs(cursor, later, units) {
  const differs = [
    ["years", (a, b) => b.year - a.year],
    ["quarters", (a, b) => b.quarter - a.quarter + (b.year - a.year) * 4],
    ["months", (a, b) => b.month - a.month + (b.year - a.year) * 12],
    [
      "weeks",
      (a, b) => {
        const days = dayDiff(a, b);
        return (days - days % 7) / 7;
      }
    ],
    ["days", dayDiff]
  ];
  const results = {};
  const earlier = cursor;
  let lowestOrder, highWater;
  for (const [unit, differ] of differs) {
    if (units.indexOf(unit) >= 0) {
      lowestOrder = unit;
      results[unit] = differ(cursor, later);
      highWater = earlier.plus(results);
      if (highWater > later) {
        results[unit]--;
        cursor = earlier.plus(results);
        if (cursor > later) {
          highWater = cursor;
          results[unit]--;
          cursor = earlier.plus(results);
        }
      } else {
        cursor = highWater;
      }
    }
  }
  return [cursor, results, highWater, lowestOrder];
}
function diff_default(earlier, later, units, opts) {
  let [cursor, results, highWater, lowestOrder] = highOrderDiffs(earlier, later, units);
  const remainingMillis = later - cursor;
  const lowerOrderUnits = units.filter(
    (u) => ["hours", "minutes", "seconds", "milliseconds"].indexOf(u) >= 0
  );
  if (lowerOrderUnits.length === 0) {
    if (highWater < later) {
      highWater = cursor.plus({ [lowestOrder]: 1 });
    }
    if (highWater !== cursor) {
      results[lowestOrder] = (results[lowestOrder] || 0) + remainingMillis / (highWater - cursor);
    }
  }
  const duration = Duration.fromObject(results, opts);
  if (lowerOrderUnits.length > 0) {
    return Duration.fromMillis(remainingMillis, opts).shiftTo(...lowerOrderUnits).plus(duration);
  } else {
    return duration;
  }
}
var init_diff = __esm({
  "node_modules/luxon/src/impl/diff.js"() {
    init_duration();
  }
});

// node_modules/luxon/src/impl/digits.js
function parseDigits(str) {
  let value = parseInt(str, 10);
  if (isNaN(value)) {
    value = "";
    for (let i = 0; i < str.length; i++) {
      const code = str.charCodeAt(i);
      if (str[i].search(numberingSystems.hanidec) !== -1) {
        value += hanidecChars.indexOf(str[i]);
      } else {
        for (const key in numberingSystemsUTF16) {
          const [min, max] = numberingSystemsUTF16[key];
          if (code >= min && code <= max) {
            value += code - min;
          }
        }
      }
    }
    return parseInt(value, 10);
  } else {
    return value;
  }
}
function digitRegex({ numberingSystem }, append = "") {
  return new RegExp(`${numberingSystems[numberingSystem || "latn"]}${append}`);
}
var numberingSystems, numberingSystemsUTF16, hanidecChars;
var init_digits = __esm({
  "node_modules/luxon/src/impl/digits.js"() {
    numberingSystems = {
      arab: "[\u0660-\u0669]",
      arabext: "[\u06F0-\u06F9]",
      bali: "[\u1B50-\u1B59]",
      beng: "[\u09E6-\u09EF]",
      deva: "[\u0966-\u096F]",
      fullwide: "[\uFF10-\uFF19]",
      gujr: "[\u0AE6-\u0AEF]",
      hanidec: "[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",
      khmr: "[\u17E0-\u17E9]",
      knda: "[\u0CE6-\u0CEF]",
      laoo: "[\u0ED0-\u0ED9]",
      limb: "[\u1946-\u194F]",
      mlym: "[\u0D66-\u0D6F]",
      mong: "[\u1810-\u1819]",
      mymr: "[\u1040-\u1049]",
      orya: "[\u0B66-\u0B6F]",
      tamldec: "[\u0BE6-\u0BEF]",
      telu: "[\u0C66-\u0C6F]",
      thai: "[\u0E50-\u0E59]",
      tibt: "[\u0F20-\u0F29]",
      latn: "\\d"
    };
    numberingSystemsUTF16 = {
      arab: [1632, 1641],
      arabext: [1776, 1785],
      bali: [6992, 7001],
      beng: [2534, 2543],
      deva: [2406, 2415],
      fullwide: [65296, 65303],
      gujr: [2790, 2799],
      khmr: [6112, 6121],
      knda: [3302, 3311],
      laoo: [3792, 3801],
      limb: [6470, 6479],
      mlym: [3430, 3439],
      mong: [6160, 6169],
      mymr: [4160, 4169],
      orya: [2918, 2927],
      tamldec: [3046, 3055],
      telu: [3174, 3183],
      thai: [3664, 3673],
      tibt: [3872, 3881]
    };
    hanidecChars = numberingSystems.hanidec.replace(/[\[|\]]/g, "").split("");
  }
});

// node_modules/luxon/src/impl/tokenParser.js
function intUnit(regex, post = (i) => i) {
  return { regex, deser: ([s2]) => post(parseDigits(s2)) };
}
function fixListRegex(s2) {
  return s2.replace(/\./g, "\\.?").replace(spaceOrNBSPRegExp, spaceOrNBSP);
}
function stripInsensitivities(s2) {
  return s2.replace(/\./g, "").replace(spaceOrNBSPRegExp, " ").toLowerCase();
}
function oneOf(strings, startIndex) {
  if (strings === null) {
    return null;
  } else {
    return {
      regex: RegExp(strings.map(fixListRegex).join("|")),
      deser: ([s2]) => strings.findIndex((i) => stripInsensitivities(s2) === stripInsensitivities(i)) + startIndex
    };
  }
}
function offset(regex, groups) {
  return { regex, deser: ([, h, m]) => signedOffset(h, m), groups };
}
function simple(regex) {
  return { regex, deser: ([s2]) => s2 };
}
function escapeToken(value) {
  return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}
function unitForToken(token, loc) {
  const one = digitRegex(loc), two = digitRegex(loc, "{2}"), three = digitRegex(loc, "{3}"), four = digitRegex(loc, "{4}"), six = digitRegex(loc, "{6}"), oneOrTwo = digitRegex(loc, "{1,2}"), oneToThree = digitRegex(loc, "{1,3}"), oneToSix = digitRegex(loc, "{1,6}"), oneToNine = digitRegex(loc, "{1,9}"), twoToFour = digitRegex(loc, "{2,4}"), fourToSix = digitRegex(loc, "{4,6}"), literal = (t) => ({ regex: RegExp(escapeToken(t.val)), deser: ([s2]) => s2, literal: true }), unitate = (t) => {
    if (token.literal) {
      return literal(t);
    }
    switch (t.val) {
      case "G":
        return oneOf(loc.eras("short"), 0);
      case "GG":
        return oneOf(loc.eras("long"), 0);
      case "y":
        return intUnit(oneToSix);
      case "yy":
        return intUnit(twoToFour, untruncateYear);
      case "yyyy":
        return intUnit(four);
      case "yyyyy":
        return intUnit(fourToSix);
      case "yyyyyy":
        return intUnit(six);
      case "M":
        return intUnit(oneOrTwo);
      case "MM":
        return intUnit(two);
      case "MMM":
        return oneOf(loc.months("short", true), 1);
      case "MMMM":
        return oneOf(loc.months("long", true), 1);
      case "L":
        return intUnit(oneOrTwo);
      case "LL":
        return intUnit(two);
      case "LLL":
        return oneOf(loc.months("short", false), 1);
      case "LLLL":
        return oneOf(loc.months("long", false), 1);
      case "d":
        return intUnit(oneOrTwo);
      case "dd":
        return intUnit(two);
      case "o":
        return intUnit(oneToThree);
      case "ooo":
        return intUnit(three);
      case "HH":
        return intUnit(two);
      case "H":
        return intUnit(oneOrTwo);
      case "hh":
        return intUnit(two);
      case "h":
        return intUnit(oneOrTwo);
      case "mm":
        return intUnit(two);
      case "m":
        return intUnit(oneOrTwo);
      case "q":
        return intUnit(oneOrTwo);
      case "qq":
        return intUnit(two);
      case "s":
        return intUnit(oneOrTwo);
      case "ss":
        return intUnit(two);
      case "S":
        return intUnit(oneToThree);
      case "SSS":
        return intUnit(three);
      case "u":
        return simple(oneToNine);
      case "uu":
        return simple(oneOrTwo);
      case "uuu":
        return intUnit(one);
      case "a":
        return oneOf(loc.meridiems(), 0);
      case "kkkk":
        return intUnit(four);
      case "kk":
        return intUnit(twoToFour, untruncateYear);
      case "W":
        return intUnit(oneOrTwo);
      case "WW":
        return intUnit(two);
      case "E":
      case "c":
        return intUnit(one);
      case "EEE":
        return oneOf(loc.weekdays("short", false), 1);
      case "EEEE":
        return oneOf(loc.weekdays("long", false), 1);
      case "ccc":
        return oneOf(loc.weekdays("short", true), 1);
      case "cccc":
        return oneOf(loc.weekdays("long", true), 1);
      case "Z":
      case "ZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`), 2);
      case "ZZZ":
        return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`), 2);
      case "z":
        return simple(/[a-z_+-/]{1,256}?/i);
      case " ":
        return simple(/[^\S\n\r]/);
      default:
        return literal(t);
    }
  };
  const unit = unitate(token) || {
    invalidReason: MISSING_FTP
  };
  unit.token = token;
  return unit;
}
function tokenForPart(part, formatOpts, resolvedOpts) {
  const { type: type2, value } = part;
  if (type2 === "literal") {
    const isSpace = /^\s+$/.test(value);
    return {
      literal: !isSpace,
      val: isSpace ? " " : value
    };
  }
  const style = formatOpts[type2];
  let actualType = type2;
  if (type2 === "hour") {
    if (formatOpts.hour12 != null) {
      actualType = formatOpts.hour12 ? "hour12" : "hour24";
    } else if (formatOpts.hourCycle != null) {
      if (formatOpts.hourCycle === "h11" || formatOpts.hourCycle === "h12") {
        actualType = "hour12";
      } else {
        actualType = "hour24";
      }
    } else {
      actualType = resolvedOpts.hour12 ? "hour12" : "hour24";
    }
  }
  let val = partTypeStyleToTokenVal[actualType];
  if (typeof val === "object") {
    val = val[style];
  }
  if (val) {
    return {
      literal: false,
      val
    };
  }
  return void 0;
}
function buildRegex(units) {
  const re = units.map((u) => u.regex).reduce((f, r) => `${f}(${r.source})`, "");
  return [`^${re}$`, units];
}
function match(input, regex, handlers) {
  const matches = input.match(regex);
  if (matches) {
    const all = {};
    let matchIndex = 1;
    for (const i in handlers) {
      if (hasOwnProperty(handlers, i)) {
        const h = handlers[i], groups = h.groups ? h.groups + 1 : 1;
        if (!h.literal && h.token) {
          all[h.token.val[0]] = h.deser(matches.slice(matchIndex, matchIndex + groups));
        }
        matchIndex += groups;
      }
    }
    return [matches, all];
  } else {
    return [matches, {}];
  }
}
function dateTimeFromMatches(matches) {
  const toField = (token) => {
    switch (token) {
      case "S":
        return "millisecond";
      case "s":
        return "second";
      case "m":
        return "minute";
      case "h":
      case "H":
        return "hour";
      case "d":
        return "day";
      case "o":
        return "ordinal";
      case "L":
      case "M":
        return "month";
      case "y":
        return "year";
      case "E":
      case "c":
        return "weekday";
      case "W":
        return "weekNumber";
      case "k":
        return "weekYear";
      case "q":
        return "quarter";
      default:
        return null;
    }
  };
  let zone = null;
  let specificOffset;
  if (!isUndefined(matches.z)) {
    zone = IANAZone.create(matches.z);
  }
  if (!isUndefined(matches.Z)) {
    if (!zone) {
      zone = new FixedOffsetZone(matches.Z);
    }
    specificOffset = matches.Z;
  }
  if (!isUndefined(matches.q)) {
    matches.M = (matches.q - 1) * 3 + 1;
  }
  if (!isUndefined(matches.h)) {
    if (matches.h < 12 && matches.a === 1) {
      matches.h += 12;
    } else if (matches.h === 12 && matches.a === 0) {
      matches.h = 0;
    }
  }
  if (matches.G === 0 && matches.y) {
    matches.y = -matches.y;
  }
  if (!isUndefined(matches.u)) {
    matches.S = parseMillis(matches.u);
  }
  const vals = Object.keys(matches).reduce((r, k) => {
    const f = toField(k);
    if (f) {
      r[f] = matches[k];
    }
    return r;
  }, {});
  return [vals, zone, specificOffset];
}
function getDummyDateTime() {
  if (!dummyDateTimeCache) {
    dummyDateTimeCache = DateTime.fromMillis(1555555555555);
  }
  return dummyDateTimeCache;
}
function maybeExpandMacroToken(token, locale) {
  if (token.literal) {
    return token;
  }
  const formatOpts = Formatter.macroTokenToFormatOpts(token.val);
  const tokens = formatOptsToTokens(formatOpts, locale);
  if (tokens == null || tokens.includes(void 0)) {
    return token;
  }
  return tokens;
}
function expandMacroTokens(tokens, locale) {
  return Array.prototype.concat(...tokens.map((t) => maybeExpandMacroToken(t, locale)));
}
function explainFromTokens(locale, input, format) {
  const tokens = expandMacroTokens(Formatter.parseFormat(format), locale), units = tokens.map((t) => unitForToken(t, locale)), disqualifyingUnit = units.find((t) => t.invalidReason);
  if (disqualifyingUnit) {
    return { input, tokens, invalidReason: disqualifyingUnit.invalidReason };
  } else {
    const [regexString, handlers] = buildRegex(units), regex = RegExp(regexString, "i"), [rawMatches, matches] = match(input, regex, handlers), [result, zone, specificOffset] = matches ? dateTimeFromMatches(matches) : [null, null, void 0];
    if (hasOwnProperty(matches, "a") && hasOwnProperty(matches, "H")) {
      throw new ConflictingSpecificationError(
        "Can't include meridiem when specifying 24-hour format"
      );
    }
    return { input, tokens, regex, rawMatches, matches, result, zone, specificOffset };
  }
}
function parseFromTokens(locale, input, format) {
  const { result, zone, specificOffset, invalidReason } = explainFromTokens(locale, input, format);
  return [result, zone, specificOffset, invalidReason];
}
function formatOptsToTokens(formatOpts, locale) {
  if (!formatOpts) {
    return null;
  }
  const formatter = Formatter.create(locale, formatOpts);
  const df = formatter.dtFormatter(getDummyDateTime());
  const parts = df.formatToParts();
  const resolvedOpts = df.resolvedOptions();
  return parts.map((p) => tokenForPart(p, formatOpts, resolvedOpts));
}
var MISSING_FTP, NBSP, spaceOrNBSP, spaceOrNBSPRegExp, partTypeStyleToTokenVal, dummyDateTimeCache;
var init_tokenParser = __esm({
  "node_modules/luxon/src/impl/tokenParser.js"() {
    init_util();
    init_formatter();
    init_fixedOffsetZone();
    init_IANAZone();
    init_datetime();
    init_digits();
    init_errors();
    MISSING_FTP = "missing Intl.DateTimeFormat.formatToParts support";
    NBSP = String.fromCharCode(160);
    spaceOrNBSP = `[ ${NBSP}]`;
    spaceOrNBSPRegExp = new RegExp(spaceOrNBSP, "g");
    partTypeStyleToTokenVal = {
      year: {
        "2-digit": "yy",
        numeric: "yyyyy"
      },
      month: {
        numeric: "M",
        "2-digit": "MM",
        short: "MMM",
        long: "MMMM"
      },
      day: {
        numeric: "d",
        "2-digit": "dd"
      },
      weekday: {
        short: "EEE",
        long: "EEEE"
      },
      dayperiod: "a",
      dayPeriod: "a",
      hour12: {
        numeric: "h",
        "2-digit": "hh"
      },
      hour24: {
        numeric: "H",
        "2-digit": "HH"
      },
      minute: {
        numeric: "m",
        "2-digit": "mm"
      },
      second: {
        numeric: "s",
        "2-digit": "ss"
      },
      timeZoneName: {
        long: "ZZZZZ",
        short: "ZZZ"
      }
    };
    dummyDateTimeCache = null;
  }
});

// node_modules/luxon/src/datetime.js
function unsupportedZone(zone) {
  return new Invalid("unsupported zone", `the zone "${zone.name}" is not supported`);
}
function possiblyCachedWeekData(dt) {
  if (dt.weekData === null) {
    dt.weekData = gregorianToWeek(dt.c);
  }
  return dt.weekData;
}
function possiblyCachedLocalWeekData(dt) {
  if (dt.localWeekData === null) {
    dt.localWeekData = gregorianToWeek(
      dt.c,
      dt.loc.getMinDaysInFirstWeek(),
      dt.loc.getStartOfWeek()
    );
  }
  return dt.localWeekData;
}
function clone2(inst, alts) {
  const current = {
    ts: inst.ts,
    zone: inst.zone,
    c: inst.c,
    o: inst.o,
    loc: inst.loc,
    invalid: inst.invalid
  };
  return new DateTime({ ...current, ...alts, old: current });
}
function fixOffset(localTS, o, tz) {
  let utcGuess = localTS - o * 60 * 1e3;
  const o2 = tz.offset(utcGuess);
  if (o === o2) {
    return [utcGuess, o];
  }
  utcGuess -= (o2 - o) * 60 * 1e3;
  const o3 = tz.offset(utcGuess);
  if (o2 === o3) {
    return [utcGuess, o2];
  }
  return [localTS - Math.min(o2, o3) * 60 * 1e3, Math.max(o2, o3)];
}
function tsToObj(ts, offset2) {
  ts += offset2 * 60 * 1e3;
  const d = new Date(ts);
  return {
    year: d.getUTCFullYear(),
    month: d.getUTCMonth() + 1,
    day: d.getUTCDate(),
    hour: d.getUTCHours(),
    minute: d.getUTCMinutes(),
    second: d.getUTCSeconds(),
    millisecond: d.getUTCMilliseconds()
  };
}
function objToTS(obj, offset2, zone) {
  return fixOffset(objToLocalTS(obj), offset2, zone);
}
function adjustTime(inst, dur) {
  const oPre = inst.o, year = inst.c.year + Math.trunc(dur.years), month = inst.c.month + Math.trunc(dur.months) + Math.trunc(dur.quarters) * 3, c = {
    ...inst.c,
    year,
    month,
    day: Math.min(inst.c.day, daysInMonth(year, month)) + Math.trunc(dur.days) + Math.trunc(dur.weeks) * 7
  }, millisToAdd = Duration.fromObject({
    years: dur.years - Math.trunc(dur.years),
    quarters: dur.quarters - Math.trunc(dur.quarters),
    months: dur.months - Math.trunc(dur.months),
    weeks: dur.weeks - Math.trunc(dur.weeks),
    days: dur.days - Math.trunc(dur.days),
    hours: dur.hours,
    minutes: dur.minutes,
    seconds: dur.seconds,
    milliseconds: dur.milliseconds
  }).as("milliseconds"), localTS = objToLocalTS(c);
  let [ts, o] = fixOffset(localTS, oPre, inst.zone);
  if (millisToAdd !== 0) {
    ts += millisToAdd;
    o = inst.zone.offset(ts);
  }
  return { ts, o };
}
function parseDataToDateTime(parsed, parsedZone, opts, format, text, specificOffset) {
  const { setZone, zone } = opts;
  if (parsed && Object.keys(parsed).length !== 0 || parsedZone) {
    const interpretationZone = parsedZone || zone, inst = DateTime.fromObject(parsed, {
      ...opts,
      zone: interpretationZone,
      specificOffset
    });
    return setZone ? inst : inst.setZone(zone);
  } else {
    return DateTime.invalid(
      new Invalid("unparsable", `the input "${text}" can't be parsed as ${format}`)
    );
  }
}
function toTechFormat(dt, format, allowZ = true) {
  return dt.isValid ? Formatter.create(Locale.create("en-US"), {
    allowZ,
    forceSimple: true
  }).formatDateTimeFromString(dt, format) : null;
}
function toISODate(o, extended) {
  const longFormat = o.c.year > 9999 || o.c.year < 0;
  let c = "";
  if (longFormat && o.c.year >= 0)
    c += "+";
  c += padStart(o.c.year, longFormat ? 6 : 4);
  if (extended) {
    c += "-";
    c += padStart(o.c.month);
    c += "-";
    c += padStart(o.c.day);
  } else {
    c += padStart(o.c.month);
    c += padStart(o.c.day);
  }
  return c;
}
function toISOTime(o, extended, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone) {
  let c = padStart(o.c.hour);
  if (extended) {
    c += ":";
    c += padStart(o.c.minute);
    if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
      c += ":";
    }
  } else {
    c += padStart(o.c.minute);
  }
  if (o.c.millisecond !== 0 || o.c.second !== 0 || !suppressSeconds) {
    c += padStart(o.c.second);
    if (o.c.millisecond !== 0 || !suppressMilliseconds) {
      c += ".";
      c += padStart(o.c.millisecond, 3);
    }
  }
  if (includeOffset) {
    if (o.isOffsetFixed && o.offset === 0 && !extendedZone) {
      c += "Z";
    } else if (o.o < 0) {
      c += "-";
      c += padStart(Math.trunc(-o.o / 60));
      c += ":";
      c += padStart(Math.trunc(-o.o % 60));
    } else {
      c += "+";
      c += padStart(Math.trunc(o.o / 60));
      c += ":";
      c += padStart(Math.trunc(o.o % 60));
    }
  }
  if (extendedZone) {
    c += "[" + o.zone.ianaName + "]";
  }
  return c;
}
function normalizeUnit(unit) {
  const normalized = {
    year: "year",
    years: "year",
    month: "month",
    months: "month",
    day: "day",
    days: "day",
    hour: "hour",
    hours: "hour",
    minute: "minute",
    minutes: "minute",
    quarter: "quarter",
    quarters: "quarter",
    second: "second",
    seconds: "second",
    millisecond: "millisecond",
    milliseconds: "millisecond",
    weekday: "weekday",
    weekdays: "weekday",
    weeknumber: "weekNumber",
    weeksnumber: "weekNumber",
    weeknumbers: "weekNumber",
    weekyear: "weekYear",
    weekyears: "weekYear",
    ordinal: "ordinal"
  }[unit.toLowerCase()];
  if (!normalized)
    throw new InvalidUnitError(unit);
  return normalized;
}
function normalizeUnitWithLocalWeeks(unit) {
  switch (unit.toLowerCase()) {
    case "localweekday":
    case "localweekdays":
      return "localWeekday";
    case "localweeknumber":
    case "localweeknumbers":
      return "localWeekNumber";
    case "localweekyear":
    case "localweekyears":
      return "localWeekYear";
    default:
      return normalizeUnit(unit);
  }
}
function quickDT(obj, opts) {
  const zone = normalizeZone(opts.zone, Settings.defaultZone), loc = Locale.fromObject(opts), tsNow = Settings.now();
  let ts, o;
  if (!isUndefined(obj.year)) {
    for (const u of orderedUnits2) {
      if (isUndefined(obj[u])) {
        obj[u] = defaultUnitValues[u];
      }
    }
    const invalid = hasInvalidGregorianData(obj) || hasInvalidTimeData(obj);
    if (invalid) {
      return DateTime.invalid(invalid);
    }
    const offsetProvis = zone.offset(tsNow);
    [ts, o] = objToTS(obj, offsetProvis, zone);
  } else {
    ts = tsNow;
  }
  return new DateTime({ ts, zone, loc, o });
}
function diffRelative(start, end, opts) {
  const round = isUndefined(opts.round) ? true : opts.round, format = (c, unit) => {
    c = roundTo(c, round || opts.calendary ? 0 : 2, true);
    const formatter = end.loc.clone(opts).relFormatter(opts);
    return formatter.format(c, unit);
  }, differ = (unit) => {
    if (opts.calendary) {
      if (!end.hasSame(start, unit)) {
        return end.startOf(unit).diff(start.startOf(unit), unit).get(unit);
      } else
        return 0;
    } else {
      return end.diff(start, unit).get(unit);
    }
  };
  if (opts.unit) {
    return format(differ(opts.unit), opts.unit);
  }
  for (const unit of opts.units) {
    const count = differ(unit);
    if (Math.abs(count) >= 1) {
      return format(count, unit);
    }
  }
  return format(start > end ? -0 : 0, opts.units[opts.units.length - 1]);
}
function lastOpts(argList) {
  let opts = {}, args;
  if (argList.length > 0 && typeof argList[argList.length - 1] === "object") {
    opts = argList[argList.length - 1];
    args = Array.from(argList).slice(0, argList.length - 1);
  } else {
    args = Array.from(argList);
  }
  return [opts, args];
}
function friendlyDateTime(dateTimeish) {
  if (DateTime.isDateTime(dateTimeish)) {
    return dateTimeish;
  } else if (dateTimeish && dateTimeish.valueOf && isNumber(dateTimeish.valueOf())) {
    return DateTime.fromJSDate(dateTimeish);
  } else if (dateTimeish && typeof dateTimeish === "object") {
    return DateTime.fromObject(dateTimeish);
  } else {
    throw new InvalidArgumentError(
      `Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`
    );
  }
}
var INVALID3, MAX_DATE, defaultUnitValues, defaultWeekUnitValues, defaultOrdinalUnitValues, orderedUnits2, orderedWeekUnits, orderedOrdinalUnits, DateTime;
var init_datetime = __esm({
  "node_modules/luxon/src/datetime.js"() {
    init_duration();
    init_interval();
    init_settings();
    init_info();
    init_formatter();
    init_fixedOffsetZone();
    init_locale();
    init_util();
    init_zoneUtil();
    init_diff();
    init_regexParser();
    init_tokenParser();
    init_conversions();
    init_formats();
    init_errors();
    init_invalid();
    INVALID3 = "Invalid DateTime";
    MAX_DATE = 864e13;
    defaultUnitValues = {
      month: 1,
      day: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultWeekUnitValues = {
      weekNumber: 1,
      weekday: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    defaultOrdinalUnitValues = {
      ordinal: 1,
      hour: 0,
      minute: 0,
      second: 0,
      millisecond: 0
    };
    orderedUnits2 = ["year", "month", "day", "hour", "minute", "second", "millisecond"];
    orderedWeekUnits = [
      "weekYear",
      "weekNumber",
      "weekday",
      "hour",
      "minute",
      "second",
      "millisecond"
    ];
    orderedOrdinalUnits = ["year", "ordinal", "hour", "minute", "second", "millisecond"];
    DateTime = class _DateTime {
      /**
       * @access private
       */
      constructor(config) {
        const zone = config.zone || Settings.defaultZone;
        let invalid = config.invalid || (Number.isNaN(config.ts) ? new Invalid("invalid input") : null) || (!zone.isValid ? unsupportedZone(zone) : null);
        this.ts = isUndefined(config.ts) ? Settings.now() : config.ts;
        let c = null, o = null;
        if (!invalid) {
          const unchanged = config.old && config.old.ts === this.ts && config.old.zone.equals(zone);
          if (unchanged) {
            [c, o] = [config.old.c, config.old.o];
          } else {
            const ot = zone.offset(this.ts);
            c = tsToObj(this.ts, ot);
            invalid = Number.isNaN(c.year) ? new Invalid("invalid input") : null;
            c = invalid ? null : c;
            o = invalid ? null : ot;
          }
        }
        this._zone = zone;
        this.loc = config.loc || Locale.create();
        this.invalid = invalid;
        this.weekData = null;
        this.localWeekData = null;
        this.c = c;
        this.o = o;
        this.isLuxonDateTime = true;
      }
      // CONSTRUCT
      /**
       * Create a DateTime for the current instant, in the system's time zone.
       *
       * Use Settings to override these default values if needed.
       * @example DateTime.now().toISO() //~> now in the ISO format
       * @return {DateTime}
       */
      static now() {
        return new _DateTime({});
      }
      /**
       * Create a local DateTime
       * @param {number} [year] - The calendar year. If omitted (as in, call `local()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month, 1-indexed
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @example DateTime.local()                                  //~> now
       * @example DateTime.local({ zone: "America/New_York" })      //~> now, in US east coast time
       * @example DateTime.local(2017)                              //~> 2017-01-01T00:00:00
       * @example DateTime.local(2017, 3)                           //~> 2017-03-01T00:00:00
       * @example DateTime.local(2017, 3, 12, { locale: "fr" })     //~> 2017-03-12T00:00:00, with a French locale
       * @example DateTime.local(2017, 3, 12, 5)                    //~> 2017-03-12T05:00:00
       * @example DateTime.local(2017, 3, 12, 5, { zone: "utc" })   //~> 2017-03-12T05:00:00, in UTC
       * @example DateTime.local(2017, 3, 12, 5, 45)                //~> 2017-03-12T05:45:00
       * @example DateTime.local(2017, 3, 12, 5, 45, 10)            //~> 2017-03-12T05:45:10
       * @example DateTime.local(2017, 3, 12, 5, 45, 10, 765)       //~> 2017-03-12T05:45:10.765
       * @return {DateTime}
       */
      static local() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime in UTC
       * @param {number} [year] - The calendar year. If omitted (as in, call `utc()` with no arguments), the current time will be used
       * @param {number} [month=1] - The month, 1-indexed
       * @param {number} [day=1] - The day of the month
       * @param {number} [hour=0] - The hour of the day, in 24-hour time
       * @param {number} [minute=0] - The minute of the hour, meaning a number between 0 and 59
       * @param {number} [second=0] - The second of the minute, meaning a number between 0 and 59
       * @param {number} [millisecond=0] - The millisecond of the second, meaning a number between 0 and 999
       * @param {Object} options - configuration options for the DateTime
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} [options.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [options.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.utc()                                              //~> now
       * @example DateTime.utc(2017)                                          //~> 2017-01-01T00:00:00Z
       * @example DateTime.utc(2017, 3)                                       //~> 2017-03-01T00:00:00Z
       * @example DateTime.utc(2017, 3, 12)                                   //~> 2017-03-12T00:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5)                                //~> 2017-03-12T05:00:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45)                            //~> 2017-03-12T05:45:00Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, { locale: "fr" })          //~> 2017-03-12T05:45:00Z with a French locale
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10)                        //~> 2017-03-12T05:45:10Z
       * @example DateTime.utc(2017, 3, 12, 5, 45, 10, 765, { locale: "fr" }) //~> 2017-03-12T05:45:10.765Z with a French locale
       * @return {DateTime}
       */
      static utc() {
        const [opts, args] = lastOpts(arguments), [year, month, day, hour, minute, second, millisecond] = args;
        opts.zone = FixedOffsetZone.utcInstance;
        return quickDT({ year, month, day, hour, minute, second, millisecond }, opts);
      }
      /**
       * Create a DateTime from a JavaScript Date object. Uses the default zone.
       * @param {Date} date - a JavaScript Date object
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @return {DateTime}
       */
      static fromJSDate(date, options = {}) {
        const ts = isDate(date) ? date.valueOf() : NaN;
        if (Number.isNaN(ts)) {
          return _DateTime.invalid("invalid input");
        }
        const zoneToUse = normalizeZone(options.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        return new _DateTime({
          ts,
          zone: zoneToUse,
          loc: Locale.fromObject(options)
        });
      }
      /**
       * Create a DateTime from a number of milliseconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} milliseconds - a number of milliseconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromMillis(milliseconds, options = {}) {
        if (!isNumber(milliseconds)) {
          throw new InvalidArgumentError(
            `fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`
          );
        } else if (milliseconds < -MAX_DATE || milliseconds > MAX_DATE) {
          return _DateTime.invalid("Timestamp out of range");
        } else {
          return new _DateTime({
            ts: milliseconds,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a number of seconds since the epoch (meaning since 1 January 1970 00:00:00 UTC). Uses the default zone.
       * @param {number} seconds - a number of seconds since 1970 UTC
       * @param {Object} options - configuration options for the DateTime
       * @param {string|Zone} [options.zone='local'] - the zone to place the DateTime into
       * @param {string} [options.locale] - a locale to set on the resulting DateTime instance
       * @param {string} options.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} options.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromSeconds(seconds, options = {}) {
        if (!isNumber(seconds)) {
          throw new InvalidArgumentError("fromSeconds requires a numerical input");
        } else {
          return new _DateTime({
            ts: seconds * 1e3,
            zone: normalizeZone(options.zone, Settings.defaultZone),
            loc: Locale.fromObject(options)
          });
        }
      }
      /**
       * Create a DateTime from a JavaScript object with keys like 'year' and 'hour' with reasonable defaults.
       * @param {Object} obj - the object to create the DateTime from
       * @param {number} obj.year - a year, such as 1987
       * @param {number} obj.month - a month, 1-12
       * @param {number} obj.day - a day of the month, 1-31, depending on the month
       * @param {number} obj.ordinal - day of the year, 1-365 or 366
       * @param {number} obj.weekYear - an ISO week year
       * @param {number} obj.weekNumber - an ISO week number, between 1 and 52 or 53, depending on the year
       * @param {number} obj.weekday - an ISO weekday, 1-7, where 1 is Monday and 7 is Sunday
       * @param {number} obj.localWeekYear - a week year, according to the locale
       * @param {number} obj.localWeekNumber - a week number, between 1 and 52 or 53, depending on the year, according to the locale
       * @param {number} obj.localWeekday - a weekday, 1-7, where 1 is the first and 7 is the last day of the week, according to the locale
       * @param {number} obj.hour - hour of the day, 0-23
       * @param {number} obj.minute - minute of the hour, 0-59
       * @param {number} obj.second - second of the minute, 0-59
       * @param {number} obj.millisecond - millisecond of the second, 0-999
       * @param {Object} opts - options for creating this DateTime
       * @param {string|Zone} [opts.zone='local'] - interpret the numbers in the context of a particular zone. Can take any value taken as the first argument to setZone()
       * @param {string} [opts.locale='system\'s locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromObject({ year: 1982, month: 5, day: 25}).toISODate() //=> '1982-05-25'
       * @example DateTime.fromObject({ year: 1982 }).toISODate() //=> '1982-01-01'
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }) //~> today at 10:26:06
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'utc' }),
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'local' })
       * @example DateTime.fromObject({ hour: 10, minute: 26, second: 6 }, { zone: 'America/New_York' })
       * @example DateTime.fromObject({ weekYear: 2016, weekNumber: 2, weekday: 3 }).toISODate() //=> '2016-01-13'
       * @example DateTime.fromObject({ localWeekYear: 2022, localWeekNumber: 1, localWeekday: 1 }, { locale: "en-US" }).toISODate() //=> '2021-12-26'
       * @return {DateTime}
       */
      static fromObject(obj, opts = {}) {
        obj = obj || {};
        const zoneToUse = normalizeZone(opts.zone, Settings.defaultZone);
        if (!zoneToUse.isValid) {
          return _DateTime.invalid(unsupportedZone(zoneToUse));
        }
        const loc = Locale.fromObject(opts);
        const normalized = normalizeObject(obj, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, loc);
        const tsNow = Settings.now(), offsetProvis = !isUndefined(opts.specificOffset) ? opts.specificOffset : zoneToUse.offset(tsNow), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        const useWeekData = definiteWeekDef || normalized.weekday && !containsGregor;
        let units, defaultValues, objNow = tsToObj(tsNow, offsetProvis);
        if (useWeekData) {
          units = orderedWeekUnits;
          defaultValues = defaultWeekUnitValues;
          objNow = gregorianToWeek(objNow, minDaysInFirstWeek, startOfWeek);
        } else if (containsOrdinal) {
          units = orderedOrdinalUnits;
          defaultValues = defaultOrdinalUnitValues;
          objNow = gregorianToOrdinal(objNow);
        } else {
          units = orderedUnits2;
          defaultValues = defaultUnitValues;
        }
        let foundFirst = false;
        for (const u of units) {
          const v = normalized[u];
          if (!isUndefined(v)) {
            foundFirst = true;
          } else if (foundFirst) {
            normalized[u] = defaultValues[u];
          } else {
            normalized[u] = objNow[u];
          }
        }
        const higherOrderInvalid = useWeekData ? hasInvalidWeekData(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? hasInvalidOrdinalData(normalized) : hasInvalidGregorianData(normalized), invalid = higherOrderInvalid || hasInvalidTimeData(normalized);
        if (invalid) {
          return _DateTime.invalid(invalid);
        }
        const gregorian = useWeekData ? weekToGregorian(normalized, minDaysInFirstWeek, startOfWeek) : containsOrdinal ? ordinalToGregorian(normalized) : normalized, [tsFinal, offsetFinal] = objToTS(gregorian, offsetProvis, zoneToUse), inst = new _DateTime({
          ts: tsFinal,
          zone: zoneToUse,
          o: offsetFinal,
          loc
        });
        if (normalized.weekday && containsGregor && obj.weekday !== inst.weekday) {
          return _DateTime.invalid(
            "mismatched weekday",
            `you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`
          );
        }
        return inst;
      }
      /**
       * Create a DateTime from an ISO 8601 string
       * @param {string} text - the ISO string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the time to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} [opts.outputCalendar] - the output calendar to set on the resulting DateTime instance
       * @param {string} [opts.numberingSystem] - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromISO('2016-05-25T09:08:34.123')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00')
       * @example DateTime.fromISO('2016-05-25T09:08:34.123+06:00', {setZone: true})
       * @example DateTime.fromISO('2016-05-25T09:08:34.123', {zone: 'utc'})
       * @example DateTime.fromISO('2016-W05-4')
       * @return {DateTime}
       */
      static fromISO(text, opts = {}) {
        const [vals, parsedZone] = parseISODate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "ISO 8601", text);
      }
      /**
       * Create a DateTime from an RFC 2822 string
       * @param {string} text - the RFC 2822 string
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since the offset is always specified in the string itself, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with a fixed-offset zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23:12 GMT')
       * @example DateTime.fromRFC2822('Fri, 25 Nov 2016 13:23:12 +0600')
       * @example DateTime.fromRFC2822('25 Nov 2016 13:23 Z')
       * @return {DateTime}
       */
      static fromRFC2822(text, opts = {}) {
        const [vals, parsedZone] = parseRFC2822Date(text);
        return parseDataToDateTime(vals, parsedZone, opts, "RFC 2822", text);
      }
      /**
       * Create a DateTime from an HTTP header date
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @param {string} text - the HTTP header date
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - convert the time to this zone. Since HTTP dates are always in UTC, this has no effect on the interpretation of string, merely the zone the resulting DateTime is expressed in.
       * @param {boolean} [opts.setZone=false] - override the zone with the fixed-offset zone specified in the string. For HTTP dates, this is always UTC, so this option is equivalent to setting the `zone` option to 'utc', but this option is included for consistency with similar methods.
       * @param {string} [opts.locale='system's locale'] - a locale to set on the resulting DateTime instance
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @param {string} opts.numberingSystem - the numbering system to set on the resulting DateTime instance
       * @example DateTime.fromHTTP('Sun, 06 Nov 1994 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sunday, 06-Nov-94 08:49:37 GMT')
       * @example DateTime.fromHTTP('Sun Nov  6 08:49:37 1994')
       * @return {DateTime}
       */
      static fromHTTP(text, opts = {}) {
        const [vals, parsedZone] = parseHTTPDate(text);
        return parseDataToDateTime(vals, parsedZone, opts, "HTTP", opts);
      }
      /**
       * Create a DateTime from an input string and format string.
       * Defaults to en-US if no locale has been specified, regardless of the system's locale. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/parsing?id=table-of-tokens).
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see the link below for the formats)
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @return {DateTime}
       */
      static fromFormat(text, fmt, opts = {}) {
        if (isUndefined(text) || isUndefined(fmt)) {
          throw new InvalidArgumentError("fromFormat requires an input string and a format");
        }
        const { locale = null, numberingSystem = null } = opts, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        }), [vals, parsedZone, specificOffset, invalid] = parseFromTokens(localeToUse, text, fmt);
        if (invalid) {
          return _DateTime.invalid(invalid);
        } else {
          return parseDataToDateTime(vals, parsedZone, opts, `format ${fmt}`, text, specificOffset);
        }
      }
      /**
       * @deprecated use fromFormat instead
       */
      static fromString(text, fmt, opts = {}) {
        return _DateTime.fromFormat(text, fmt, opts);
      }
      /**
       * Create a DateTime from a SQL date, time, or datetime
       * Defaults to en-US if no locale has been specified, regardless of the system's locale
       * @param {string} text - the string to parse
       * @param {Object} opts - options to affect the creation
       * @param {string|Zone} [opts.zone='local'] - use this zone if no offset is specified in the input string itself. Will also convert the DateTime to this zone
       * @param {boolean} [opts.setZone=false] - override the zone with a zone specified in the string itself, if it specifies one
       * @param {string} [opts.locale='en-US'] - a locale string to use when parsing. Will also set the DateTime to this locale
       * @param {string} opts.numberingSystem - the numbering system to use when parsing. Will also set the resulting DateTime to this numbering system
       * @param {string} opts.outputCalendar - the output calendar to set on the resulting DateTime instance
       * @example DateTime.fromSQL('2017-05-15')
       * @example DateTime.fromSQL('2017-05-15 09:12:34')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342+06:00')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles')
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342 America/Los_Angeles', { setZone: true })
       * @example DateTime.fromSQL('2017-05-15 09:12:34.342', { zone: 'America/Los_Angeles' })
       * @example DateTime.fromSQL('09:12:34.342')
       * @return {DateTime}
       */
      static fromSQL(text, opts = {}) {
        const [vals, parsedZone] = parseSQL(text);
        return parseDataToDateTime(vals, parsedZone, opts, "SQL", text);
      }
      /**
       * Create an invalid DateTime.
       * @param {string} reason - simple string of why this DateTime is invalid. Should not contain parameters or anything else data-dependent.
       * @param {string} [explanation=null] - longer explanation, may include parameters and other useful debugging information
       * @return {DateTime}
       */
      static invalid(reason, explanation = null) {
        if (!reason) {
          throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");
        }
        const invalid = reason instanceof Invalid ? reason : new Invalid(reason, explanation);
        if (Settings.throwOnInvalid) {
          throw new InvalidDateTimeError(invalid);
        } else {
          return new _DateTime({ invalid });
        }
      }
      /**
       * Check if an object is an instance of DateTime. Works across context boundaries
       * @param {object} o
       * @return {boolean}
       */
      static isDateTime(o) {
        return o && o.isLuxonDateTime || false;
      }
      /**
       * Produce the format string for a set of options
       * @param formatOpts
       * @param localeOpts
       * @returns {string}
       */
      static parseFormatForOpts(formatOpts, localeOpts = {}) {
        const tokenList = formatOptsToTokens(formatOpts, Locale.fromObject(localeOpts));
        return !tokenList ? null : tokenList.map((t) => t ? t.val : null).join("");
      }
      /**
       * Produce the the fully expanded format token for the locale
       * Does NOT quote characters, so quoted tokens will not round trip correctly
       * @param fmt
       * @param localeOpts
       * @returns {string}
       */
      static expandFormat(fmt, localeOpts = {}) {
        const expanded = expandMacroTokens(Formatter.parseFormat(fmt), Locale.fromObject(localeOpts));
        return expanded.map((t) => t.val).join("");
      }
      // INFO
      /**
       * Get the value of unit.
       * @param {string} unit - a unit such as 'minute' or 'day'
       * @example DateTime.local(2017, 7, 4).get('month'); //=> 7
       * @example DateTime.local(2017, 7, 4).get('day'); //=> 4
       * @return {number}
       */
      get(unit) {
        return this[unit];
      }
      /**
       * Returns whether the DateTime is valid. Invalid DateTimes occur when:
       * * The DateTime was created from invalid calendar information, such as the 13th month or February 30
       * * The DateTime was created by an operation on another invalid date
       * @type {boolean}
       */
      get isValid() {
        return this.invalid === null;
      }
      /**
       * Returns an error code if this DateTime is invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidReason() {
        return this.invalid ? this.invalid.reason : null;
      }
      /**
       * Returns an explanation of why this DateTime became invalid, or null if the DateTime is valid
       * @type {string}
       */
      get invalidExplanation() {
        return this.invalid ? this.invalid.explanation : null;
      }
      /**
       * Get the locale of a DateTime, such 'en-GB'. The locale is used when formatting the DateTime
       *
       * @type {string}
       */
      get locale() {
        return this.isValid ? this.loc.locale : null;
      }
      /**
       * Get the numbering system of a DateTime, such 'beng'. The numbering system is used when formatting the DateTime
       *
       * @type {string}
       */
      get numberingSystem() {
        return this.isValid ? this.loc.numberingSystem : null;
      }
      /**
       * Get the output calendar of a DateTime, such 'islamic'. The output calendar is used when formatting the DateTime
       *
       * @type {string}
       */
      get outputCalendar() {
        return this.isValid ? this.loc.outputCalendar : null;
      }
      /**
       * Get the time zone associated with this DateTime.
       * @type {Zone}
       */
      get zone() {
        return this._zone;
      }
      /**
       * Get the name of the time zone.
       * @type {string}
       */
      get zoneName() {
        return this.isValid ? this.zone.name : null;
      }
      /**
       * Get the year
       * @example DateTime.local(2017, 5, 25).year //=> 2017
       * @type {number}
       */
      get year() {
        return this.isValid ? this.c.year : NaN;
      }
      /**
       * Get the quarter
       * @example DateTime.local(2017, 5, 25).quarter //=> 2
       * @type {number}
       */
      get quarter() {
        return this.isValid ? Math.ceil(this.c.month / 3) : NaN;
      }
      /**
       * Get the month (1-12).
       * @example DateTime.local(2017, 5, 25).month //=> 5
       * @type {number}
       */
      get month() {
        return this.isValid ? this.c.month : NaN;
      }
      /**
       * Get the day of the month (1-30ish).
       * @example DateTime.local(2017, 5, 25).day //=> 25
       * @type {number}
       */
      get day() {
        return this.isValid ? this.c.day : NaN;
      }
      /**
       * Get the hour of the day (0-23).
       * @example DateTime.local(2017, 5, 25, 9).hour //=> 9
       * @type {number}
       */
      get hour() {
        return this.isValid ? this.c.hour : NaN;
      }
      /**
       * Get the minute of the hour (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30).minute //=> 30
       * @type {number}
       */
      get minute() {
        return this.isValid ? this.c.minute : NaN;
      }
      /**
       * Get the second of the minute (0-59).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52).second //=> 52
       * @type {number}
       */
      get second() {
        return this.isValid ? this.c.second : NaN;
      }
      /**
       * Get the millisecond of the second (0-999).
       * @example DateTime.local(2017, 5, 25, 9, 30, 52, 654).millisecond //=> 654
       * @type {number}
       */
      get millisecond() {
        return this.isValid ? this.c.millisecond : NaN;
      }
      /**
       * Get the week year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 12, 31).weekYear //=> 2015
       * @type {number}
       */
      get weekYear() {
        return this.isValid ? possiblyCachedWeekData(this).weekYear : NaN;
      }
      /**
       * Get the week number of the week year (1-52ish).
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2017, 5, 25).weekNumber //=> 21
       * @type {number}
       */
      get weekNumber() {
        return this.isValid ? possiblyCachedWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the day of the week.
       * 1 is Monday and 7 is Sunday
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2014, 11, 31).weekday //=> 4
       * @type {number}
       */
      get weekday() {
        return this.isValid ? possiblyCachedWeekData(this).weekday : NaN;
      }
      /**
       * Returns true if this date is on a weekend according to the locale, false otherwise
       * @returns {boolean}
       */
      get isWeekend() {
        return this.isValid && this.loc.getWeekendDays().includes(this.weekday);
      }
      /**
       * Get the day of the week according to the locale.
       * 1 is the first day of the week and 7 is the last day of the week.
       * If the locale assigns Sunday as the first day of the week, then a date which is a Sunday will return 1,
       * @returns {number}
       */
      get localWeekday() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekday : NaN;
      }
      /**
       * Get the week number of the week year according to the locale. Different locales assign week numbers differently,
       * because the week can start on different days of the week (see localWeekday) and because a different number of days
       * is required for a week to count as the first week of a year.
       * @returns {number}
       */
      get localWeekNumber() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekNumber : NaN;
      }
      /**
       * Get the week year according to the locale. Different locales assign week numbers (and therefor week years)
       * differently, see localWeekNumber.
       * @returns {number}
       */
      get localWeekYear() {
        return this.isValid ? possiblyCachedLocalWeekData(this).weekYear : NaN;
      }
      /**
       * Get the ordinal (meaning the day of the year)
       * @example DateTime.local(2017, 5, 25).ordinal //=> 145
       * @type {number|DateTime}
       */
      get ordinal() {
        return this.isValid ? gregorianToOrdinal(this.c).ordinal : NaN;
      }
      /**
       * Get the human readable short month name, such as 'Oct'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthShort //=> Oct
       * @type {string}
       */
      get monthShort() {
        return this.isValid ? Info.months("short", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable long month name, such as 'October'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).monthLong //=> October
       * @type {string}
       */
      get monthLong() {
        return this.isValid ? Info.months("long", { locObj: this.loc })[this.month - 1] : null;
      }
      /**
       * Get the human readable short weekday, such as 'Mon'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayShort //=> Mon
       * @type {string}
       */
      get weekdayShort() {
        return this.isValid ? Info.weekdays("short", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the human readable long weekday, such as 'Monday'.
       * Defaults to the system's locale if no locale has been specified
       * @example DateTime.local(2017, 10, 30).weekdayLong //=> Monday
       * @type {string}
       */
      get weekdayLong() {
        return this.isValid ? Info.weekdays("long", { locObj: this.loc })[this.weekday - 1] : null;
      }
      /**
       * Get the UTC offset of this DateTime in minutes
       * @example DateTime.now().offset //=> -240
       * @example DateTime.utc().offset //=> 0
       * @type {number}
       */
      get offset() {
        return this.isValid ? +this.o : NaN;
      }
      /**
       * Get the short human name for the zone's current offset, for example "EST" or "EDT".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameShort() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "short",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get the long human name for the zone's current offset, for example "Eastern Standard Time" or "Eastern Daylight Time".
       * Defaults to the system's locale if no locale has been specified
       * @type {string}
       */
      get offsetNameLong() {
        if (this.isValid) {
          return this.zone.offsetName(this.ts, {
            format: "long",
            locale: this.locale
          });
        } else {
          return null;
        }
      }
      /**
       * Get whether this zone's offset ever changes, as in a DST.
       * @type {boolean}
       */
      get isOffsetFixed() {
        return this.isValid ? this.zone.isUniversal : null;
      }
      /**
       * Get whether the DateTime is in a DST.
       * @type {boolean}
       */
      get isInDST() {
        if (this.isOffsetFixed) {
          return false;
        } else {
          return this.offset > this.set({ month: 1, day: 1 }).offset || this.offset > this.set({ month: 5 }).offset;
        }
      }
      /**
       * Get those DateTimes which have the same local time as this DateTime, but a different offset from UTC
       * in this DateTime's zone. During DST changes local time can be ambiguous, for example
       * `2023-10-29T02:30:00` in `Europe/Berlin` can have offset `+01:00` or `+02:00`.
       * This method will return both possible DateTimes if this DateTime's local time is ambiguous.
       * @returns {DateTime[]}
       */
      getPossibleOffsets() {
        if (!this.isValid || this.isOffsetFixed) {
          return [this];
        }
        const dayMs = 864e5;
        const minuteMs = 6e4;
        const localTS = objToLocalTS(this.c);
        const oEarlier = this.zone.offset(localTS - dayMs);
        const oLater = this.zone.offset(localTS + dayMs);
        const o1 = this.zone.offset(localTS - oEarlier * minuteMs);
        const o2 = this.zone.offset(localTS - oLater * minuteMs);
        if (o1 === o2) {
          return [this];
        }
        const ts1 = localTS - o1 * minuteMs;
        const ts2 = localTS - o2 * minuteMs;
        const c1 = tsToObj(ts1, o1);
        const c2 = tsToObj(ts2, o2);
        if (c1.hour === c2.hour && c1.minute === c2.minute && c1.second === c2.second && c1.millisecond === c2.millisecond) {
          return [clone2(this, { ts: ts1 }), clone2(this, { ts: ts2 })];
        }
        return [this];
      }
      /**
       * Returns true if this DateTime is in a leap year, false otherwise
       * @example DateTime.local(2016).isInLeapYear //=> true
       * @example DateTime.local(2013).isInLeapYear //=> false
       * @type {boolean}
       */
      get isInLeapYear() {
        return isLeapYear(this.year);
      }
      /**
       * Returns the number of days in this DateTime's month
       * @example DateTime.local(2016, 2).daysInMonth //=> 29
       * @example DateTime.local(2016, 3).daysInMonth //=> 31
       * @type {number}
       */
      get daysInMonth() {
        return daysInMonth(this.year, this.month);
      }
      /**
       * Returns the number of days in this DateTime's year
       * @example DateTime.local(2016).daysInYear //=> 366
       * @example DateTime.local(2013).daysInYear //=> 365
       * @type {number}
       */
      get daysInYear() {
        return this.isValid ? daysInYear(this.year) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's year
       * @see https://en.wikipedia.org/wiki/ISO_week_date
       * @example DateTime.local(2004).weeksInWeekYear //=> 53
       * @example DateTime.local(2013).weeksInWeekYear //=> 52
       * @type {number}
       */
      get weeksInWeekYear() {
        return this.isValid ? weeksInWeekYear(this.weekYear) : NaN;
      }
      /**
       * Returns the number of weeks in this DateTime's local week year
       * @example DateTime.local(2020, 6, {locale: 'en-US'}).weeksInLocalWeekYear //=> 52
       * @example DateTime.local(2020, 6, {locale: 'de-DE'}).weeksInLocalWeekYear //=> 53
       * @type {number}
       */
      get weeksInLocalWeekYear() {
        return this.isValid ? weeksInWeekYear(
          this.localWeekYear,
          this.loc.getMinDaysInFirstWeek(),
          this.loc.getStartOfWeek()
        ) : NaN;
      }
      /**
       * Returns the resolved Intl options for this DateTime.
       * This is useful in understanding the behavior of formatting methods
       * @param {Object} opts - the same options as toLocaleString
       * @return {Object}
       */
      resolvedLocaleOptions(opts = {}) {
        const { locale, numberingSystem, calendar } = Formatter.create(
          this.loc.clone(opts),
          opts
        ).resolvedOptions(this);
        return { locale, numberingSystem, outputCalendar: calendar };
      }
      // TRANSFORM
      /**
       * "Set" the DateTime's zone to UTC. Returns a newly-constructed DateTime.
       *
       * Equivalent to {@link DateTime#setZone}('utc')
       * @param {number} [offset=0] - optionally, an offset from UTC in minutes
       * @param {Object} [opts={}] - options to pass to `setZone()`
       * @return {DateTime}
       */
      toUTC(offset2 = 0, opts = {}) {
        return this.setZone(FixedOffsetZone.instance(offset2), opts);
      }
      /**
       * "Set" the DateTime's zone to the host's local zone. Returns a newly-constructed DateTime.
       *
       * Equivalent to `setZone('local')`
       * @return {DateTime}
       */
      toLocal() {
        return this.setZone(Settings.defaultZone);
      }
      /**
       * "Set" the DateTime's zone to specified zone. Returns a newly-constructed DateTime.
       *
       * By default, the setter keeps the underlying time the same (as in, the same timestamp), but the new instance will report different local times and consider DSTs when making computations, as with {@link DateTime#plus}. You may wish to use {@link DateTime#toLocal} and {@link DateTime#toUTC} which provide simple convenience wrappers for commonly used zones.
       * @param {string|Zone} [zone='local'] - a zone identifier. As a string, that can be any IANA zone supported by the host environment, or a fixed-offset name of the form 'UTC+3', or the strings 'local' or 'utc'. You may also supply an instance of a {@link DateTime#Zone} class.
       * @param {Object} opts - options
       * @param {boolean} [opts.keepLocalTime=false] - If true, adjust the underlying time so that the local time stays the same, but in the target zone. You should rarely need this.
       * @return {DateTime}
       */
      setZone(zone, { keepLocalTime = false, keepCalendarTime = false } = {}) {
        zone = normalizeZone(zone, Settings.defaultZone);
        if (zone.equals(this.zone)) {
          return this;
        } else if (!zone.isValid) {
          return _DateTime.invalid(unsupportedZone(zone));
        } else {
          let newTS = this.ts;
          if (keepLocalTime || keepCalendarTime) {
            const offsetGuess = zone.offset(this.ts);
            const asObj = this.toObject();
            [newTS] = objToTS(asObj, offsetGuess, zone);
          }
          return clone2(this, { ts: newTS, zone });
        }
      }
      /**
       * "Set" the locale, numberingSystem, or outputCalendar. Returns a newly-constructed DateTime.
       * @param {Object} properties - the properties to set
       * @example DateTime.local(2017, 5, 25).reconfigure({ locale: 'en-GB' })
       * @return {DateTime}
       */
      reconfigure({ locale, numberingSystem, outputCalendar } = {}) {
        const loc = this.loc.clone({ locale, numberingSystem, outputCalendar });
        return clone2(this, { loc });
      }
      /**
       * "Set" the locale. Returns a newly-constructed DateTime.
       * Just a convenient alias for reconfigure({ locale })
       * @example DateTime.local(2017, 5, 25).setLocale('en-GB')
       * @return {DateTime}
       */
      setLocale(locale) {
        return this.reconfigure({ locale });
      }
      /**
       * "Set" the values of specified units. Returns a newly-constructed DateTime.
       * You can only set units with this method; for "setting" metadata, see {@link DateTime#reconfigure} and {@link DateTime#setZone}.
       *
       * This method also supports setting locale-based week units, i.e. `localWeekday`, `localWeekNumber` and `localWeekYear`.
       * They cannot be mixed with ISO-week units like `weekday`.
       * @param {Object} values - a mapping of units to numbers
       * @example dt.set({ year: 2017 })
       * @example dt.set({ hour: 8, minute: 30 })
       * @example dt.set({ weekday: 5 })
       * @example dt.set({ year: 2005, ordinal: 234 })
       * @return {DateTime}
       */
      set(values) {
        if (!this.isValid)
          return this;
        const normalized = normalizeObject(values, normalizeUnitWithLocalWeeks);
        const { minDaysInFirstWeek, startOfWeek } = usesLocalWeekValues(normalized, this.loc);
        const settingWeekStuff = !isUndefined(normalized.weekYear) || !isUndefined(normalized.weekNumber) || !isUndefined(normalized.weekday), containsOrdinal = !isUndefined(normalized.ordinal), containsGregorYear = !isUndefined(normalized.year), containsGregorMD = !isUndefined(normalized.month) || !isUndefined(normalized.day), containsGregor = containsGregorYear || containsGregorMD, definiteWeekDef = normalized.weekYear || normalized.weekNumber;
        if ((containsGregor || containsOrdinal) && definiteWeekDef) {
          throw new ConflictingSpecificationError(
            "Can't mix weekYear/weekNumber units with year/month/day or ordinals"
          );
        }
        if (containsGregorMD && containsOrdinal) {
          throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");
        }
        let mixed;
        if (settingWeekStuff) {
          mixed = weekToGregorian(
            { ...gregorianToWeek(this.c, minDaysInFirstWeek, startOfWeek), ...normalized },
            minDaysInFirstWeek,
            startOfWeek
          );
        } else if (!isUndefined(normalized.ordinal)) {
          mixed = ordinalToGregorian({ ...gregorianToOrdinal(this.c), ...normalized });
        } else {
          mixed = { ...this.toObject(), ...normalized };
          if (isUndefined(normalized.day)) {
            mixed.day = Math.min(daysInMonth(mixed.year, mixed.month), mixed.day);
          }
        }
        const [ts, o] = objToTS(mixed, this.o, this.zone);
        return clone2(this, { ts, o });
      }
      /**
       * Add a period of time to this DateTime and return the resulting DateTime
       *
       * Adding hours, minutes, seconds, or milliseconds increases the timestamp by the right number of milliseconds. Adding days, months, or years shifts the calendar, accounting for DSTs and leap years along the way. Thus, `dt.plus({ hours: 24 })` may result in a different time than `dt.plus({ days: 1 })` if there's a DST shift in between.
       * @param {Duration|Object|number} duration - The amount to add. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       * @example DateTime.now().plus(123) //~> in 123 milliseconds
       * @example DateTime.now().plus({ minutes: 15 }) //~> in 15 minutes
       * @example DateTime.now().plus({ days: 1 }) //~> this time tomorrow
       * @example DateTime.now().plus({ days: -1 }) //~> this time yesterday
       * @example DateTime.now().plus({ hours: 3, minutes: 13 }) //~> in 3 hr, 13 min
       * @example DateTime.now().plus(Duration.fromObject({ hours: 3, minutes: 13 })) //~> in 3 hr, 13 min
       * @return {DateTime}
       */
      plus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration);
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * Subtract a period of time to this DateTime and return the resulting DateTime
       * See {@link DateTime#plus}
       * @param {Duration|Object|number} duration - The amount to subtract. Either a Luxon Duration, a number of milliseconds, the object argument to Duration.fromObject()
       @return {DateTime}
       */
      minus(duration) {
        if (!this.isValid)
          return this;
        const dur = Duration.fromDurationLike(duration).negate();
        return clone2(this, adjustTime(this, dur));
      }
      /**
       * "Set" this DateTime to the beginning of a unit of time.
       * @param {string} unit - The unit to go to the beginning of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).startOf('month').toISODate(); //=> '2014-03-01'
       * @example DateTime.local(2014, 3, 3).startOf('year').toISODate(); //=> '2014-01-01'
       * @example DateTime.local(2014, 3, 3).startOf('week').toISODate(); //=> '2014-03-03', weeks always start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('day').toISOTime(); //=> '00:00.000-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).startOf('hour').toISOTime(); //=> '05:00:00.000-05:00'
       * @return {DateTime}
       */
      startOf(unit, { useLocaleWeeks = false } = {}) {
        if (!this.isValid)
          return this;
        const o = {}, normalizedUnit = Duration.normalizeUnit(unit);
        switch (normalizedUnit) {
          case "years":
            o.month = 1;
          case "quarters":
          case "months":
            o.day = 1;
          case "weeks":
          case "days":
            o.hour = 0;
          case "hours":
            o.minute = 0;
          case "minutes":
            o.second = 0;
          case "seconds":
            o.millisecond = 0;
            break;
          case "milliseconds":
            break;
        }
        if (normalizedUnit === "weeks") {
          if (useLocaleWeeks) {
            const startOfWeek = this.loc.getStartOfWeek();
            const { weekday } = this;
            if (weekday < startOfWeek) {
              o.weekNumber = this.weekNumber - 1;
            }
            o.weekday = startOfWeek;
          } else {
            o.weekday = 1;
          }
        }
        if (normalizedUnit === "quarters") {
          const q = Math.ceil(this.month / 3);
          o.month = (q - 1) * 3 + 1;
        }
        return this.set(o);
      }
      /**
       * "Set" this DateTime to the end (meaning the last millisecond) of a unit of time
       * @param {string} unit - The unit to go to the end of. Can be 'year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', or 'millisecond'.
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week
       * @example DateTime.local(2014, 3, 3).endOf('month').toISO(); //=> '2014-03-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('year').toISO(); //=> '2014-12-31T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3).endOf('week').toISO(); // => '2014-03-09T23:59:59.999-05:00', weeks start on Mondays
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('day').toISO(); //=> '2014-03-03T23:59:59.999-05:00'
       * @example DateTime.local(2014, 3, 3, 5, 30).endOf('hour').toISO(); //=> '2014-03-03T05:59:59.999-05:00'
       * @return {DateTime}
       */
      endOf(unit, opts) {
        return this.isValid ? this.plus({ [unit]: 1 }).startOf(unit, opts).minus(1) : this;
      }
      // OUTPUT
      /**
       * Returns a string representation of this DateTime formatted according to the specified format string.
       * **You may not want this.** See {@link DateTime#toLocaleString} for a more flexible formatting tool. For a table of tokens and their interpretations, see [here](https://moment.github.io/luxon/#/formatting?id=table-of-tokens).
       * Defaults to en-US if no locale has been specified, regardless of the system's locale.
       * @param {string} fmt - the format string
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toFormat('yyyy LLL dd') //=> '2017 Apr 22'
       * @example DateTime.now().setLocale('fr').toFormat('yyyy LLL dd') //=> '2017 avr. 22'
       * @example DateTime.now().toFormat('yyyy LLL dd', { locale: "fr" }) //=> '2017 avr. 22'
       * @example DateTime.now().toFormat("HH 'hours and' mm 'minutes'") //=> '20 hours and 55 minutes'
       * @return {string}
       */
      toFormat(fmt, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this, fmt) : INVALID3;
      }
      /**
       * Returns a localized string representing this date. Accepts the same options as the Intl.DateTimeFormat constructor and any presets defined by Luxon, such as `DateTime.DATE_FULL` or `DateTime.TIME_SIMPLE`.
       * The exact behavior of this method is browser-specific, but in general it will return an appropriate representation
       * of the DateTime in the assigned locale.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat
       * @param formatOpts {Object} - Intl.DateTimeFormat constructor options and configuration options
       * @param {Object} opts - opts to override the configuration options on this DateTime
       * @example DateTime.now().toLocaleString(); //=> 4/20/2017
       * @example DateTime.now().setLocale('en-gb').toLocaleString(); //=> '20/04/2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL); //=> 'April 20, 2017'
       * @example DateTime.now().toLocaleString(DateTime.DATE_FULL, { locale: 'fr' }); //=> '28 août 2022'
       * @example DateTime.now().toLocaleString(DateTime.TIME_SIMPLE); //=> '11:32 AM'
       * @example DateTime.now().toLocaleString(DateTime.DATETIME_SHORT); //=> '4/20/2017, 11:32 AM'
       * @example DateTime.now().toLocaleString({ weekday: 'long', month: 'long', day: '2-digit' }); //=> 'Thursday, April 20'
       * @example DateTime.now().toLocaleString({ weekday: 'short', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' }); //=> 'Thu, Apr 20, 11:27 AM'
       * @example DateTime.now().toLocaleString({ hour: '2-digit', minute: '2-digit', hourCycle: 'h23' }); //=> '11:32'
       * @return {string}
       */
      toLocaleString(formatOpts = DATE_SHORT, opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), formatOpts).formatDateTime(this) : INVALID3;
      }
      /**
       * Returns an array of format "parts", meaning individual tokens along with metadata. This is allows callers to post-process individual sections of the formatted output.
       * Defaults to the system's locale if no locale has been specified
       * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/formatToParts
       * @param opts {Object} - Intl.DateTimeFormat constructor options, same as `toLocaleString`.
       * @example DateTime.now().toLocaleParts(); //=> [
       *                                   //=>   { type: 'day', value: '25' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'month', value: '05' },
       *                                   //=>   { type: 'literal', value: '/' },
       *                                   //=>   { type: 'year', value: '1982' }
       *                                   //=> ]
       */
      toLocaleParts(opts = {}) {
        return this.isValid ? Formatter.create(this.loc.clone(opts), opts).formatDateTimeParts(this) : [];
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=false] - add the time zone format extension
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1983, 5, 25).toISO() //=> '1982-05-25T00:00:00.000Z'
       * @example DateTime.now().toISO() //=> '2017-04-22T20:47:05.335-04:00'
       * @example DateTime.now().toISO({ includeOffset: false }) //=> '2017-04-22T20:47:05.335'
       * @example DateTime.now().toISO({ format: 'basic' }) //=> '20170422T204705.335-0400'
       * @return {string}
       */
      toISO({
        format = "extended",
        suppressSeconds = false,
        suppressMilliseconds = false,
        includeOffset = true,
        extendedZone = false
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        const ext = format === "extended";
        let c = toISODate(this, ext);
        c += "T";
        c += toISOTime(this, ext, suppressSeconds, suppressMilliseconds, includeOffset, extendedZone);
        return c;
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's date component
       * @param {Object} opts - options
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc(1982, 5, 25).toISODate() //=> '1982-05-25'
       * @example DateTime.utc(1982, 5, 25).toISODate({ format: 'basic' }) //=> '19820525'
       * @return {string}
       */
      toISODate({ format = "extended" } = {}) {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, format === "extended");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's week date
       * @example DateTime.utc(1982, 5, 25).toISOWeekDate() //=> '1982-W21-2'
       * @return {string}
       */
      toISOWeekDate() {
        return toTechFormat(this, "kkkk-'W'WW-c");
      }
      /**
       * Returns an ISO 8601-compliant string representation of this DateTime's time component
       * @param {Object} opts - options
       * @param {boolean} [opts.suppressMilliseconds=false] - exclude milliseconds from the format if they're 0
       * @param {boolean} [opts.suppressSeconds=false] - exclude seconds from the format if they're 0
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.extendedZone=true] - add the time zone format extension
       * @param {boolean} [opts.includePrefix=false] - include the `T` prefix
       * @param {string} [opts.format='extended'] - choose between the basic and extended format
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime() //=> '07:34:19.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34, seconds: 0, milliseconds: 0 }).toISOTime({ suppressSeconds: true }) //=> '07:34Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ format: 'basic' }) //=> '073419.361Z'
       * @example DateTime.utc().set({ hour: 7, minute: 34 }).toISOTime({ includePrefix: true }) //=> 'T07:34:19.361Z'
       * @return {string}
       */
      toISOTime({
        suppressMilliseconds = false,
        suppressSeconds = false,
        includeOffset = true,
        includePrefix = false,
        extendedZone = false,
        format = "extended"
      } = {}) {
        if (!this.isValid) {
          return null;
        }
        let c = includePrefix ? "T" : "";
        return c + toISOTime(
          this,
          format === "extended",
          suppressSeconds,
          suppressMilliseconds,
          includeOffset,
          extendedZone
        );
      }
      /**
       * Returns an RFC 2822-compatible string representation of this DateTime
       * @example DateTime.utc(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 +0000'
       * @example DateTime.local(2014, 7, 13).toRFC2822() //=> 'Sun, 13 Jul 2014 00:00:00 -0400'
       * @return {string}
       */
      toRFC2822() {
        return toTechFormat(this, "EEE, dd LLL yyyy HH:mm:ss ZZZ", false);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in HTTP headers. The output is always expressed in GMT.
       * Specifically, the string conforms to RFC 1123.
       * @see https://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.3.1
       * @example DateTime.utc(2014, 7, 13).toHTTP() //=> 'Sun, 13 Jul 2014 00:00:00 GMT'
       * @example DateTime.utc(2014, 7, 13, 19).toHTTP() //=> 'Sun, 13 Jul 2014 19:00:00 GMT'
       * @return {string}
       */
      toHTTP() {
        return toTechFormat(this.toUTC(), "EEE, dd LLL yyyy HH:mm:ss 'GMT'");
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Date
       * @example DateTime.utc(2014, 7, 13).toSQLDate() //=> '2014-07-13'
       * @return {string}
       */
      toSQLDate() {
        if (!this.isValid) {
          return null;
        }
        return toISODate(this, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL Time
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc().toSQL() //=> '05:15:16.345'
       * @example DateTime.now().toSQL() //=> '05:15:16.345 -04:00'
       * @example DateTime.now().toSQL({ includeOffset: false }) //=> '05:15:16.345'
       * @example DateTime.now().toSQL({ includeZone: false }) //=> '05:15:16.345 America/New_York'
       * @return {string}
       */
      toSQLTime({ includeOffset = true, includeZone = false, includeOffsetSpace = true } = {}) {
        let fmt = "HH:mm:ss.SSS";
        if (includeZone || includeOffset) {
          if (includeOffsetSpace) {
            fmt += " ";
          }
          if (includeZone) {
            fmt += "z";
          } else if (includeOffset) {
            fmt += "ZZ";
          }
        }
        return toTechFormat(this, fmt, true);
      }
      /**
       * Returns a string representation of this DateTime appropriate for use in SQL DateTime
       * @param {Object} opts - options
       * @param {boolean} [opts.includeZone=false] - include the zone, such as 'America/New_York'. Overrides includeOffset.
       * @param {boolean} [opts.includeOffset=true] - include the offset, such as 'Z' or '-04:00'
       * @param {boolean} [opts.includeOffsetSpace=true] - include the space between the time and the offset, such as '05:15:16.345 -04:00'
       * @example DateTime.utc(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 Z'
       * @example DateTime.local(2014, 7, 13).toSQL() //=> '2014-07-13 00:00:00.000 -04:00'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeOffset: false }) //=> '2014-07-13 00:00:00.000'
       * @example DateTime.local(2014, 7, 13).toSQL({ includeZone: true }) //=> '2014-07-13 00:00:00.000 America/New_York'
       * @return {string}
       */
      toSQL(opts = {}) {
        if (!this.isValid) {
          return null;
        }
        return `${this.toSQLDate()} ${this.toSQLTime(opts)}`;
      }
      /**
       * Returns a string representation of this DateTime appropriate for debugging
       * @return {string}
       */
      toString() {
        return this.isValid ? this.toISO() : INVALID3;
      }
      /**
       * Returns a string representation of this DateTime appropriate for the REPL.
       * @return {string}
       */
      [Symbol.for("nodejs.util.inspect.custom")]() {
        if (this.isValid) {
          return `DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`;
        } else {
          return `DateTime { Invalid, reason: ${this.invalidReason} }`;
        }
      }
      /**
       * Returns the epoch milliseconds of this DateTime. Alias of {@link DateTime#toMillis}
       * @return {number}
       */
      valueOf() {
        return this.toMillis();
      }
      /**
       * Returns the epoch milliseconds of this DateTime.
       * @return {number}
       */
      toMillis() {
        return this.isValid ? this.ts : NaN;
      }
      /**
       * Returns the epoch seconds of this DateTime.
       * @return {number}
       */
      toSeconds() {
        return this.isValid ? this.ts / 1e3 : NaN;
      }
      /**
       * Returns the epoch seconds (as a whole number) of this DateTime.
       * @return {number}
       */
      toUnixInteger() {
        return this.isValid ? Math.floor(this.ts / 1e3) : NaN;
      }
      /**
       * Returns an ISO 8601 representation of this DateTime appropriate for use in JSON.
       * @return {string}
       */
      toJSON() {
        return this.toISO();
      }
      /**
       * Returns a BSON serializable equivalent to this DateTime.
       * @return {Date}
       */
      toBSON() {
        return this.toJSDate();
      }
      /**
       * Returns a JavaScript object with this DateTime's year, month, day, and so on.
       * @param opts - options for generating the object
       * @param {boolean} [opts.includeConfig=false] - include configuration attributes in the output
       * @example DateTime.now().toObject() //=> { year: 2017, month: 4, day: 22, hour: 20, minute: 49, second: 42, millisecond: 268 }
       * @return {Object}
       */
      toObject(opts = {}) {
        if (!this.isValid)
          return {};
        const base = { ...this.c };
        if (opts.includeConfig) {
          base.outputCalendar = this.outputCalendar;
          base.numberingSystem = this.loc.numberingSystem;
          base.locale = this.loc.locale;
        }
        return base;
      }
      /**
       * Returns a JavaScript Date equivalent to this DateTime.
       * @return {Date}
       */
      toJSDate() {
        return new Date(this.isValid ? this.ts : NaN);
      }
      // COMPARE
      /**
       * Return the difference between two DateTimes as a Duration.
       * @param {DateTime} otherDateTime - the DateTime to compare this one to
       * @param {string|string[]} [unit=['milliseconds']] - the unit or array of units (such as 'hours' or 'days') to include in the duration.
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @example
       * var i1 = DateTime.fromISO('1982-05-25T09:45'),
       *     i2 = DateTime.fromISO('1983-10-14T10:30');
       * i2.diff(i1).toObject() //=> { milliseconds: 43807500000 }
       * i2.diff(i1, 'hours').toObject() //=> { hours: 12168.75 }
       * i2.diff(i1, ['months', 'days']).toObject() //=> { months: 16, days: 19.03125 }
       * i2.diff(i1, ['months', 'days', 'hours']).toObject() //=> { months: 16, days: 19, hours: 0.75 }
       * @return {Duration}
       */
      diff(otherDateTime, unit = "milliseconds", opts = {}) {
        if (!this.isValid || !otherDateTime.isValid) {
          return Duration.invalid("created by diffing an invalid DateTime");
        }
        const durOpts = { locale: this.locale, numberingSystem: this.numberingSystem, ...opts };
        const units = maybeArray(unit).map(Duration.normalizeUnit), otherIsLater = otherDateTime.valueOf() > this.valueOf(), earlier = otherIsLater ? this : otherDateTime, later = otherIsLater ? otherDateTime : this, diffed = diff_default(earlier, later, units, durOpts);
        return otherIsLater ? diffed.negate() : diffed;
      }
      /**
       * Return the difference between this DateTime and right now.
       * See {@link DateTime#diff}
       * @param {string|string[]} [unit=['milliseconds']] - the unit or units units (such as 'hours' or 'days') to include in the duration
       * @param {Object} opts - options that affect the creation of the Duration
       * @param {string} [opts.conversionAccuracy='casual'] - the conversion system to use
       * @return {Duration}
       */
      diffNow(unit = "milliseconds", opts = {}) {
        return this.diff(_DateTime.now(), unit, opts);
      }
      /**
       * Return an Interval spanning between this DateTime and another DateTime
       * @param {DateTime} otherDateTime - the other end point of the Interval
       * @return {Interval}
       */
      until(otherDateTime) {
        return this.isValid ? Interval.fromDateTimes(this, otherDateTime) : this;
      }
      /**
       * Return whether this DateTime is in the same unit of time as another DateTime.
       * Higher-order units must also be identical for this function to return `true`.
       * Note that time zones are **ignored** in this comparison, which compares the **local** calendar time. Use {@link DateTime#setZone} to convert one of the dates if needed.
       * @param {DateTime} otherDateTime - the other DateTime
       * @param {string} unit - the unit of time to check sameness on
       * @param {Object} opts - options
       * @param {boolean} [opts.useLocaleWeeks=false] - If true, use weeks based on the locale, i.e. use the locale-dependent start of the week; only the locale of this DateTime is used
       * @example DateTime.now().hasSame(otherDT, 'day'); //~> true if otherDT is in the same current calendar day
       * @return {boolean}
       */
      hasSame(otherDateTime, unit, opts) {
        if (!this.isValid)
          return false;
        const inputMs = otherDateTime.valueOf();
        const adjustedToZone = this.setZone(otherDateTime.zone, { keepLocalTime: true });
        return adjustedToZone.startOf(unit, opts) <= inputMs && inputMs <= adjustedToZone.endOf(unit, opts);
      }
      /**
       * Equality check
       * Two DateTimes are equal if and only if they represent the same millisecond, have the same zone and location, and are both valid.
       * To compare just the millisecond values, use `+dt1 === +dt2`.
       * @param {DateTime} other - the other DateTime
       * @return {boolean}
       */
      equals(other) {
        return this.isValid && other.isValid && this.valueOf() === other.valueOf() && this.zone.equals(other.zone) && this.loc.equals(other.loc);
      }
      /**
       * Returns a string representation of a this time relative to now, such as "in two days". Can only internationalize if your
       * platform supports Intl.RelativeTimeFormat. Rounds down by default.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} [options.style="long"] - the style of units, must be "long", "short", or "narrow"
       * @param {string|string[]} options.unit - use a specific unit or array of units; if omitted, or an array, the method will pick the best unit. Use an array or one of "years", "quarters", "months", "weeks", "days", "hours", "minutes", or "seconds"
       * @param {boolean} [options.round=true] - whether to round the numbers in the output.
       * @param {number} [options.padding=0] - padding in milliseconds. This allows you to round up the result if it fits inside the threshold. Don't use in combination with {round: false} because the decimal output will include the padding.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelative() //=> "in 1 day"
       * @example DateTime.now().setLocale("es").toRelative({ days: 1 }) //=> "dentro de 1 día"
       * @example DateTime.now().plus({ days: 1 }).toRelative({ locale: "fr" }) //=> "dans 23 heures"
       * @example DateTime.now().minus({ days: 2 }).toRelative() //=> "2 days ago"
       * @example DateTime.now().minus({ days: 2 }).toRelative({ unit: "hours" }) //=> "48 hours ago"
       * @example DateTime.now().minus({ hours: 36 }).toRelative({ round: false }) //=> "1.5 days ago"
       */
      toRelative(options = {}) {
        if (!this.isValid)
          return null;
        const base = options.base || _DateTime.fromObject({}, { zone: this.zone }), padding = options.padding ? this < base ? -options.padding : options.padding : 0;
        let units = ["years", "months", "days", "hours", "minutes", "seconds"];
        let unit = options.unit;
        if (Array.isArray(options.unit)) {
          units = options.unit;
          unit = void 0;
        }
        return diffRelative(base, this.plus(padding), {
          ...options,
          numeric: "always",
          units,
          unit
        });
      }
      /**
       * Returns a string representation of this date relative to today, such as "yesterday" or "next month".
       * Only internationalizes on platforms that supports Intl.RelativeTimeFormat.
       * @param {Object} options - options that affect the output
       * @param {DateTime} [options.base=DateTime.now()] - the DateTime to use as the basis to which this time is compared. Defaults to now.
       * @param {string} options.locale - override the locale of this DateTime
       * @param {string} options.unit - use a specific unit; if omitted, the method will pick the unit. Use one of "years", "quarters", "months", "weeks", or "days"
       * @param {string} options.numberingSystem - override the numberingSystem of this DateTime. The Intl system may choose not to honor this
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar() //=> "tomorrow"
       * @example DateTime.now().setLocale("es").plus({ days: 1 }).toRelative() //=> ""mañana"
       * @example DateTime.now().plus({ days: 1 }).toRelativeCalendar({ locale: "fr" }) //=> "demain"
       * @example DateTime.now().minus({ days: 2 }).toRelativeCalendar() //=> "2 days ago"
       */
      toRelativeCalendar(options = {}) {
        if (!this.isValid)
          return null;
        return diffRelative(options.base || _DateTime.fromObject({}, { zone: this.zone }), this, {
          ...options,
          numeric: "auto",
          units: ["years", "months", "days"],
          calendary: true
        });
      }
      /**
       * Return the min of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the minimum
       * @return {DateTime} the min DateTime, or undefined if called with no argument
       */
      static min(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("min requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.min);
      }
      /**
       * Return the max of several date times
       * @param {...DateTime} dateTimes - the DateTimes from which to choose the maximum
       * @return {DateTime} the max DateTime, or undefined if called with no argument
       */
      static max(...dateTimes) {
        if (!dateTimes.every(_DateTime.isDateTime)) {
          throw new InvalidArgumentError("max requires all arguments be DateTimes");
        }
        return bestBy(dateTimes, (i) => i.valueOf(), Math.max);
      }
      // MISC
      /**
       * Explain how a string would be parsed by fromFormat()
       * @param {string} text - the string to parse
       * @param {string} fmt - the format the string is expected to be in (see description)
       * @param {Object} options - options taken by fromFormat()
       * @return {Object}
       */
      static fromFormatExplain(text, fmt, options = {}) {
        const { locale = null, numberingSystem = null } = options, localeToUse = Locale.fromOpts({
          locale,
          numberingSystem,
          defaultToEN: true
        });
        return explainFromTokens(localeToUse, text, fmt);
      }
      /**
       * @deprecated use fromFormatExplain instead
       */
      static fromStringExplain(text, fmt, options = {}) {
        return _DateTime.fromFormatExplain(text, fmt, options);
      }
      // FORMAT PRESETS
      /**
       * {@link DateTime#toLocaleString} format like 10/14/1983
       * @type {Object}
       */
      static get DATE_SHORT() {
        return DATE_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED() {
        return DATE_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, Oct 14, 1983'
       * @type {Object}
       */
      static get DATE_MED_WITH_WEEKDAY() {
        return DATE_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983'
       * @type {Object}
       */
      static get DATE_FULL() {
        return DATE_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Tuesday, October 14, 1983'
       * @type {Object}
       */
      static get DATE_HUGE() {
        return DATE_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_SIMPLE() {
        return TIME_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SECONDS() {
        return TIME_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_SHORT_OFFSET() {
        return TIME_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get TIME_WITH_LONG_OFFSET() {
        return TIME_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_SIMPLE() {
        return TIME_24_SIMPLE;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SECONDS() {
        return TIME_24_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 EDT', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_SHORT_OFFSET() {
        return TIME_24_WITH_SHORT_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '09:30:23 Eastern Daylight Time', always 24-hour.
       * @type {Object}
       */
      static get TIME_24_WITH_LONG_OFFSET() {
        return TIME_24_WITH_LONG_OFFSET;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT() {
        return DATETIME_SHORT;
      }
      /**
       * {@link DateTime#toLocaleString} format like '10/14/1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_SHORT_WITH_SECONDS() {
        return DATETIME_SHORT_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED() {
        return DATETIME_MED;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Oct 14, 1983, 9:30:33 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_SECONDS() {
        return DATETIME_MED_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Fri, 14 Oct 1983, 9:30 AM'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_MED_WITH_WEEKDAY() {
        return DATETIME_MED_WITH_WEEKDAY;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL() {
        return DATETIME_FULL;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'October 14, 1983, 9:30:33 AM EDT'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_FULL_WITH_SECONDS() {
        return DATETIME_FULL_WITH_SECONDS;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE() {
        return DATETIME_HUGE;
      }
      /**
       * {@link DateTime#toLocaleString} format like 'Friday, October 14, 1983, 9:30:33 AM Eastern Daylight Time'. Only 12-hour if the locale is.
       * @type {Object}
       */
      static get DATETIME_HUGE_WITH_SECONDS() {
        return DATETIME_HUGE_WITH_SECONDS;
      }
    };
  }
});

// node_modules/luxon/src/luxon.js
var init_luxon = __esm({
  "node_modules/luxon/src/luxon.js"() {
    init_datetime();
    init_duration();
    init_interval();
    init_info();
    init_zone();
    init_fixedOffsetZone();
    init_IANAZone();
    init_invalidZone();
    init_systemZone();
    init_settings();
  }
});

// src/modules/moduloRegistroTiempo/API/menuOtro.ts
var import_obsidian20, menuOtro;
var init_menuOtro = __esm({
  "src/modules/moduloRegistroTiempo/API/menuOtro.ts"() {
    "use strict";
    import_obsidian20 = require("obsidian");
    init_seleccionModal();
    init_fuzzySelectOrCreate();
    init_luxon();
    menuOtro = class {
      constructor(plugin) {
        this.pathCampos = "Estructura/Campos Sistema Gestion/Campos Registro Tiempo.md";
        this.selectedActivity = "";
        this.selectedGroup = "";
        this.plugin = plugin;
        this.fuzzySelectOrC = new fuzzySelectOrCreate(this.app, plugin);
      }
      async menuOtro(app2, registro) {
        const opcionesOtro = ["Propias", "Areas de Vida", "Areas de Inter\xE9s", "Proyectos de Q", "Proyectos GTD", "Tema de Inter\xE9s", "Recurso Recurrente"];
        const valoresOtro = ["hab", "actsAV", "actsAI", "actsPQ", "actsPGTD", "actsTI", "actsRR"];
        const placeholderOtro = "\xBFQue categoria?";
        const modalOtro = new SeleccionModal(app2, opcionesOtro, valoresOtro, placeholderOtro);
        let temaOtro;
        let siAsunto = false;
        try {
          const selectionOtro = await modalOtro.openAndAwaitSelection();
          switch (selectionOtro) {
            case "hab":
              temaOtro = await this.habitual(app2);
              break;
            case "actsAV":
            case "actsAI":
            case "actsPQ":
            case "actsPGTD":
            case "actsTI":
            case "actsRR":
              temaOtro = await this.elemSG(app2, selectionOtro);
              siAsunto = true;
              break;
            case "bus":
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
          registro.detener = true;
          return error;
        }
        debugger;
        return { titulo: temaOtro.actividad + " / " + temaOtro.grupo, siAsunto, nombre: temaOtro.grupo, areaVida: temaOtro.grupo };
      }
      async habitual(app2) {
        const grupos = await this.getFrontmatterField(app2, this.pathCampos, "temas");
        const actsGrupos = await this.resultYaml(app2, "actsTemas");
        let itemsForSearch = actsGrupos.filter((item) => grupos.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, grupos);
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: "" };
        return objEleccion;
      }
      async ninguno(app2) {
      }
      async elemSG(app2, tipo) {
        const actividades = await this.resultYaml(app2, tipo);
        const activeSG = await this.findMainFilesWithState(app2, tipo);
        let groups;
        debugger;
        switch (tipo) {
          case "actsAV":
            groups = activeSG.map((page) => page.frontmatter.areaVida);
            break;
          default:
            groups = activeSG.map((page) => page.frontmatter.aliases ? page.frontmatter.aliases[0] : null).filter((alias2) => alias2 !== null);
            break;
        }
        let itemsForSearch = actividades.filter((item) => groups.includes(item.grupo)).map((item) => ({
          value: `${item.actividad} / ${item.grupo}`,
          // Cambia el orden si es necesario
          activity: item.actividad,
          // Usa la propiedad 'actividad' en lugar de item[1]
          group: item.grupo
          // Usa la propiedad 'grupo' en lugar de item[0]
        }));
        let eleccion = await this.fuzzySelectOrC.showFuzzySearchModal(itemsForSearch, groups, tipo);
        const foundElement = activeSG.find((b) => b.frontmatter.aliases[0] === eleccion[1]);
        let alias = foundElement == null ? void 0 : foundElement.file.path;
        let objEleccion = { grupo: eleccion[1], actividad: eleccion[0], nombre: alias };
        return objEleccion;
      }
      async buscar(app2) {
      }
      async resultYaml(app2, tema) {
        var _a;
        const file = app2.vault.getAbstractFileByPath(this.pathCampos);
        try {
          if (file instanceof import_obsidian20.TFile) {
            const metadata = app2.metadataCache.getFileCache(file);
            const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[tema]) || [];
            const resultado = [];
            if (Array.isArray(arregloResult)) {
              arregloResult.forEach((item) => {
                if (Array.isArray(item) && item.length >= 2) {
                  resultado.push({ grupo: item[0], actividad: item[1] });
                }
              });
            }
            return resultado;
          }
        } catch (error) {
          console.error("Error obteniendo el archivo de campos:", error);
          throw error;
        }
        return [];
      }
      async getFrontmatterField(app2, file, field) {
        try {
          const tFile = app2.vault.getAbstractFileByPath(file);
          if (tFile instanceof import_obsidian20.TFile) {
            const cache = app2.metadataCache.getFileCache(tFile);
            const frontmatter = cache == null ? void 0 : cache.frontmatter;
            if (frontmatter && frontmatter.hasOwnProperty(field)) {
              const fieldValue = frontmatter[field];
              if (fieldValue === void 0 || fieldValue === null || fieldValue === "") {
                console.log("El campo est\xE1 vac\xEDo o no existe.");
                return null;
              } else {
                console.log("Frontmatter consultado con \xE9xito");
                return fieldValue;
              }
            } else {
              console.log("El campo no existe en el frontmatter.");
              return null;
            }
          } else {
            console.error("El archivo no existe o no es un archivo de texto.");
            return null;
          }
        } catch (err) {
          console.error("Error al consultar el frontmatter", err);
          return null;
        }
      }
      // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
      async findMainFilesWithState(app2, tipo) {
        var _a;
        const propertiesTipo = {
          actsAV: {
            folder: this.plugin.settings.folder_AreasVida,
            sameName: false,
            nameFile: this.plugin.settings.nameFile_AreasVida
          },
          actsAI: {
            folder: this.plugin.settings.folder_AreasInteres,
            sameName: true,
            nameFile: this.plugin.settings.nameFile_AreasInteres
          },
          actsPQ: {
            folder: this.plugin.settings.folder_ProyectosQ,
            sameName: false,
            nameFile: ""
          },
          actsPGTD: {
            folder: this.plugin.settings.folder_ProyectosGTD,
            sameName: false,
            nameFile: ""
          },
          actsTI: {
            folder: this.plugin.settings.folder_TemasInteres,
            sameName: false,
            nameFile: ""
          },
          actsRR: {
            folder: this.plugin.settings.folder_RecursosRecurrentes,
            sameName: false,
            nameFile: ""
          }
          // Puedes continuar añadiendo más casos aquí
        };
        debugger;
        const activeFilesWithFrontmatter = [];
        switch (tipo) {
          case "actsAV":
            const { folder, sameName, nameFile } = propertiesTipo[tipo];
            let ahora = DateTime.now().toFormat("yyyy-Qq");
            const files = app2.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && file.name.startsWith(ahora));
            for (let file of files) {
              let metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
                activeFilesWithFrontmatter.push({ file, frontmatter: metadata });
              }
            }
            break;
          default:
            if (propertiesTipo.hasOwnProperty(tipo)) {
              const { folder: folder2, sameName: sameName2, nameFile: nameFile2 } = propertiesTipo[tipo];
              const filesInFolder = app2.vault.getFiles().filter((file) => file.path.startsWith(folder2));
              for (const file of filesInFolder) {
                if (sameName2 && file.basename === nameFile2 || !sameName2) {
                  const metadata = app2.metadataCache.getFileCache(file);
                  if (metadata.frontmatter && metadata.frontmatter.estado === "\u{1F7E2}") {
                    activeFilesWithFrontmatter.push({ file, frontmatter: metadata.frontmatter });
                  }
                }
              }
            } else {
              console.log("Selecci\xF3n no reconocida:", tipo);
              return [];
            }
            break;
        }
        return activeFilesWithFrontmatter;
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/utilsAPI.ts
var import_obsidian21, utilsAPI;
var init_utilsAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/utilsAPI.ts"() {
    "use strict";
    import_obsidian21 = require("obsidian");
    init_seleccionModalTareas();
    init_menuOtro();
    init_registroTiempoAPI();
    utilsAPI = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.menuOtro = new menuOtro(plugin);
      }
      // La declaración del método estaba asi: buscarRegistrosActivos(app: App, registro: any)
      // Devuelve el file del registro activo. Utilizado para cuando necesito obtener el dato solamente de si hay algún registro activo.
      async buscarRegistrosActivos(app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const folder = this.plugin.settings.folder_RegistroTiempo;
        for (let file of files) {
          if (file.path.startsWith(folder)) {
            const metadata = app2.metadataCache.getFileCache(file);
            if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
              return file;
            }
          }
        }
        return;
      }
      // Suponemos que esta función se ubicará en algún lugar donde pueda acceder a `app` de Obsidian.
      async crearObjetoRegistro(plugin) {
        const activo = plugin.app.workspace.getActiveFile();
        if (!activo) {
          return {
            activo: null,
            nombre: "Registro sin archivo activo",
            folder: plugin.settings.folder_RegistroTiempo,
            indice: plugin.settings.indice_RegistroTiempo,
            id: null,
            fecha: this.formatearFecha(/* @__PURE__ */ new Date()),
            indice_DVJS: `"${plugin.settings.indice_RegistroTiempo}"`,
            aliases: []
            // o incluso podrías asignar algún alias por defecto si lo deseas
          };
        }
        const folder = plugin.settings.folder_RegistroTiempo;
        const indice = plugin.settings.indice_RegistroTiempo;
        let maxId = 0;
        const files = plugin.app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter(
          (file) => file.path.startsWith(folder)
        );
        registrosExistentes.forEach((file) => {
          var _a;
          const metadata = (_a = plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        const nextId = maxId + 1;
        const fechaCompleta = this.formatearFecha(/* @__PURE__ */ new Date());
        const metadataActivo = plugin.app.metadataCache.getFileCache(activo);
        const aliases = metadataActivo && metadataActivo.frontmatter && metadataActivo.frontmatter.aliases ? metadataActivo.frontmatter.aliases : [];
        return {
          activo,
          nombre: activo.basename,
          folder,
          indice,
          id: nextId,
          fecha: fechaCompleta,
          indice_DVJS: `"${indice}"`,
          aliases
          // Se agrega el campo aliases al registro
        };
      }
      formatearFecha(fecha) {
        const offset2 = fecha.getTimezoneOffset() * 6e4;
        const fechaLocal = new Date(fecha.getTime() - offset2);
        const fechaFormato = fechaLocal.toISOString().split("T")[0];
        const dias = [
          "Domingo",
          "Lunes",
          "Martes",
          "Mi\xE9rcoles",
          "Jueves",
          "Viernes",
          "S\xE1bado"
        ];
        const diaSemana = dias[fecha.getDay()];
        const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
        return `${fechaFormato} ${diaSemana} ${horaFormato}`;
      }
      // Método que verifica si hay registros ACtivos y pregunta si quiere cerrarlos.
      async verificarTareasActivas(registro, app2) {
        var _a;
        const files = app2.vault.getMarkdownFiles();
        const tareasActivas = [];
        for (let file of files) {
          if (file.path.startsWith(registro.folder)) {
            const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
              tareasActivas.push({
                file,
                titulo: metadata.titulo,
                aliases: metadata.aliases || file.basename
              });
            }
          }
        }
        if (tareasActivas.length === 1) {
          const tareaActiva = tareasActivas[0];
          const deseaDetener = await this.mostrarSugerencia(
            `La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`
          );
          if (deseaDetener === void 0) {
            new import_obsidian21.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
            registro.detener = true;
            return;
          }
          if (deseaDetener) {
            debugger;
            const registroTiempoAPInstance = new registroTiempoAPI(this.plugin);
            await registroTiempoAPInstance.cerrarRegistro(tareaActiva.file);
            registro.detener = false;
          } else {
            new import_obsidian21.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
            registro.detener = true;
            return;
          }
        } else if (tareasActivas.length > 1) {
          new import_obsidian21.Notice(
            "Hay un error con la cantidad de tareas corriendo en este momento."
          );
          registro.detener = true;
        } else {
          console.log("No hay m\xE1s tareas corriendo.");
          registro.detener = false;
        }
      }
      mostrarSugerencia(mensaje) {
        return new Promise((resolve, reject) => {
          let seleccionado = false;
          const modal = new import_obsidian21.Modal(app);
          modal.contentEl.createEl("h1", { text: mensaje });
          const buttonsContainer = modal.contentEl.createEl("div");
          const hacerSeleccion = (seleccion) => {
            seleccionado = true;
            modal.close();
            resolve(seleccion);
          };
          const yesButton = buttonsContainer.createEl("button", {
            text: "S\xED"
          });
          yesButton.addEventListener("click", () => hacerSeleccion(true));
          const noButton = buttonsContainer.createEl("button", {
            text: "No"
          });
          noButton.addEventListener("click", () => hacerSeleccion(false));
          modal.onClose = () => {
            if (!seleccionado) {
              reject(new Error("Modal cerrado sin selecci\xF3n"));
            }
          };
          modal.contentEl.addEventListener("keydown", (e) => {
            var _a;
            switch (e.key) {
              case "ArrowLeft":
                yesButton.focus();
                break;
              case "ArrowRight":
                noButton.focus();
                break;
              case "Enter":
                (_a = document.activeElement) == null ? void 0 : _a.click();
                break;
            }
          });
          yesButton.focus();
          modal.open();
        });
      }
      async definirTipoRegistro(registro, app2) {
        const totTareas = await this.encontrarTareasPendientes(app2);
        let opcionesTitulo;
        let valoresOpcion;
        if (registro.activo) {
          let valorMostrar;
          if (registro.aliases && registro.aliases.length >= 2) {
            valorMostrar = registro.aliases[1];
          } else if (registro.aliases && registro.aliases.length >= 1) {
            valorMostrar = registro.aliases[0];
          } else {
            valorMostrar = registro.nombre;
          }
          if (totTareas.length > 0) {
            opcionesTitulo = [valorMostrar, "Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Nota", "Tarea", "Otro"];
          } else {
            opcionesTitulo = [valorMostrar, "Otro"];
            valoresOpcion = ["Nota", "Otro"];
          }
        } else {
          if (totTareas.length > 0) {
            opcionesTitulo = ["Alguna tarea en Ejecuci\xF3n", "Otro"];
            valoresOpcion = ["Tarea", "Otro"];
          } else {
            opcionesTitulo = ["Otro"];
            valoresOpcion = ["Otro"];
          }
        }
        const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
        const modalMenu1 = new SeleccionModalTareas(app2, opcionesTitulo, valoresOpcion, placeholder);
        try {
          const selection = await modalMenu1.openAndAwaitSelection();
          registro.tipoRegistro = selection;
          switch (registro.tipoRegistro) {
            case "Nota":
              if (registro.activo) {
                registro.titulo = registro.nombre;
                registro.siAsunto = true;
                registro.tarea = false;
                registro = this.copiarCampos(registro);
              } else {
                new import_obsidian21.Notice("No hay nota activa para asignar");
                registro.tipoRegistro = "Otro";
              }
              break;
            case "Tarea":
              await this.elegirTareaParaRegistro(app2, registro, totTareas);
              break;
            default:
              let respuesta = await this.menuOtro.menuOtro(app2, registro);
              Object.assign(registro, respuesta);
              break;
          }
        } catch (error) {
          console.error("Error o modal cerrado sin selecci\xF3n:", error);
        }
      }
      copiarCampos(registro) {
        var _a, _b, _c, _d, _e, _f, _g, _h, _i;
        let nombre = registro.activo.basename;
        let nota = app.metadataCache.getFileCache(registro.activo);
        if (((_a = nota.frontmatter) == null ? void 0 : _a.type) === "PQ") {
          registro.proyectoQ = nombre;
          registro.proyectoGTD = "";
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PGTD") {
          registro.proyectoGTD = [nombre];
          if (Array.isArray(nota.frontmatter.proyectoGTD)) {
            registro.proyectoGTD = registro.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (nota.frontmatter.proyectoGTD) {
            registro.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          registro.proyectoQ = "";
          if (Array.isArray(nota.frontmatter.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (nota.frontmatter.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.proyectoQ = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoQ)) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ) {
            registro.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          registro.proyectoGTD = "";
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoGTD)) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD) {
            registro.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        }
        registro.areaInteres = [];
        if (Array.isArray((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaInteres)) {
          registro.areaInteres = registro.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
        } else {
          if ((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres) {
            registro.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
        }
        registro.areaVida = "";
        if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            registro.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            registro.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          registro.areaVida = "No es de ning\xFAn Area de Vida";
        }
        return registro;
      }
      async encontrarTareasPendientes(app2) {
        let tareasPendientes = [];
        const archivos = app2.vault.getMarkdownFiles();
        const archivosRelevantes = archivos.filter((archivo) => {
          return !archivo.path.includes("Plantillas") && !archivo.path.includes("Estructura/GTD/Sistema GTD/Sistema") && !archivo.path.includes("Archivo");
        });
        for (const archivo of archivosRelevantes) {
          const contenido = await app2.vault.read(archivo);
          const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
          const tareasConArchivo = coincidencias.map((tarea) => {
            return { tarea: tarea.trim(), archivo };
          });
          tareasPendientes = tareasPendientes.concat(tareasConArchivo);
        }
        return tareasPendientes;
      }
      async elegirTareaParaRegistro(app2, registro, tareasPendientes) {
        var _a;
        const placeholder = "Elige la tarea que vas a registrar.";
        const promesasLimpias = tareasPendientes.map(
          (tareaObj) => this.limpiarTextoTarea(tareaObj.tarea)
        );
        try {
          const tareasLimpias = await Promise.all(promesasLimpias);
          const displayOptions = [];
          const values = [];
          for (let i = 0; i < tareasPendientes.length; i++) {
            const { tarea, archivo } = tareasPendientes[i];
            const textoTarea = tareasLimpias[i];
            let aliasDisplay = "";
            const metadata = app2.metadataCache.getFileCache(archivo);
            if ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) {
              let aliases = metadata.frontmatter.aliases;
              if (!Array.isArray(aliases))
                aliases = [aliases];
              if (aliases.length >= 2) {
                aliasDisplay = aliases[1];
              } else if (aliases.length >= 1) {
                aliasDisplay = aliases[0];
              }
            }
            if (!aliasDisplay) {
              aliasDisplay = archivo.basename;
            }
            const displayText = `${aliasDisplay} / ${textoTarea}`;
            displayOptions.push(displayText);
            values.push(i);
          }
          const modalMenu = new SeleccionModalTareas(app2, displayOptions, values, placeholder);
          try {
            const selectedIndex = await modalMenu.openAndAwaitSelection();
            const seleccion = tareasPendientes[selectedIndex];
            registro.titulo = await this.limpiarTextoTarea(seleccion.tarea);
            registro.nombre = seleccion.archivo.basename;
            registro.archivoTarea = seleccion.archivo;
            registro.siAsunto = true;
            registro.tarea = true;
            registro = this.copiarCampos(registro);
          } catch (error) {
            registro.detener = true;
            console.error("Error o modal cerrado sin selecci\xF3n:", error);
          }
        } catch (error) {
          console.error("Hubo un error al limpiar las tareas:", error);
        }
      }
      limpiarTextoTarea(titulo) {
        return new Promise((resolve) => {
          let textoLimpio = titulo.split("\n")[0];
          textoLimpio = textoLimpio.replace(/#([\w-/]+)/g, (match2, p1) => {
            let transformado = p1.replace(/\//g, "_");
            transformado = transformado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            return transformado;
          });
          textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
          textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
          textoLimpio = textoLimpio.replace(
            /\p{Extended_Pictographic}\s*\d{4}-\d{2}-\d{2}(?:\s*\d{2}:\d{2}(?::\d{2})?)?/gu,
            ""
          );
          textoLimpio = textoLimpio.replace(/\p{Extended_Pictographic}/gu, "");
          textoLimpio = textoLimpio.replace(/\[[^\]]*\]/g, "");
          const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
          textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
          textoLimpio = textoLimpio.replace(/\s+/g, " ");
          resolve(textoLimpio.trim());
        });
      }
      async construirNombreyAlias(registro, app2) {
        var _a;
        const maxIdSec = await this.calcularUltimoIdSec(registro.titulo, registro.folder, app2);
        registro.idSec = maxIdSec + 1;
        const suffix = registro.idSec > 1 ? ` - ${registro.idSec}` : "";
        const originalAliases = Array.isArray(registro.aliases) ? [...registro.aliases] : [];
        function cleanPrefix(value) {
          if (!value)
            return "";
          return value.replace(/^RT -\s*/, "").trim();
        }
        if (!registro.tarea) {
          const noteName = cleanPrefix(registro.nombre || "");
          const newAliases = [
            `RT - ${noteName}${suffix}`
            // Alias 0: Nombre de la nota + sufijo
          ];
          if (originalAliases.length >= 1) {
            newAliases.push(`RT - ${cleanPrefix(originalAliases[0])}${suffix}`);
            if (originalAliases.length >= 2) {
              newAliases.push(`RT - ${cleanPrefix(originalAliases[1])}${suffix}`);
            }
          }
          registro.aliases = newAliases;
        } else {
          const metadataNota = app2.metadataCache.getFileCache(
            registro.archivoTarea
            // Este es el archivo donde está la tarea, lo tienes en `registro.nombre` o en alguna propiedad que guarde la referencia
          );
          const taskText = cleanPrefix(registro.titulo || "");
          const noteName = cleanPrefix(registro.nombre || "");
          debugger;
          let noteAliases = [];
          if ((_a = metadataNota == null ? void 0 : metadataNota.frontmatter) == null ? void 0 : _a.aliases) {
            noteAliases = Array.isArray(metadataNota.frontmatter.aliases) ? metadataNota.frontmatter.aliases : [metadataNota.frontmatter.aliases];
          }
          const newAliases = [
            `RT - ${taskText}${suffix}`,
            `RT - ${noteName} / ${taskText}${suffix}`
          ];
          if (noteAliases.length > 0) {
            newAliases.push(`RT - ${cleanPrefix(noteAliases[0])} / ${taskText}${suffix}`);
          }
          registro.aliases = newAliases;
          registro.descripcion = taskText;
        }
        if (!registro.id) {
          console.error("Error: registro.id es null o undefined");
          registro.id = Date.now();
        }
        registro.nameFile = `${registro.folder}/RT - ${registro.id}`;
      }
      /**
      * Calcula el último idSec usado para registros con el mismo título en la carpeta especificada.
      */
      async calcularUltimoIdSec(titulo, folder, app2) {
        const archivos = app2.vault.getFiles();
        let max = 0;
        for (const archivo of archivos) {
          if (archivo.path.startsWith(folder)) {
            const metadatos = app2.metadataCache.getFileCache(archivo);
            if (metadatos && metadatos.frontmatter && metadatos.frontmatter.titulo === titulo) {
              const idSec = metadatos.frontmatter.idSec;
              if (idSec !== void 0 && idSec > max) {
                max = idSec;
              }
            }
          }
        }
        return max;
      }
      limpiarAlias(titulo) {
        const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
        let tituloLimpio = titulo.replace(caracteresNoPermitidos, "_");
        tituloLimpio = tituloLimpio.replace(/\s+/g, " ");
        return tituloLimpio.trim();
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts
var init_RegistroTiempo = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/RegistroTiempo.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts
var init_SesionLectura = __esm({
  "src/modules/moduloRegistroTiempo/Interfaces/SesionLectura.ts"() {
    "use strict";
  }
});

// src/modules/moduloRegistroTiempo/API/SesionLectura.ts
var SesionLectura_exports = {};
__export(SesionLectura_exports, {
  SesionLectura: () => SesionLectura
});
var import_obsidian22, SesionLectura;
var init_SesionLectura2 = __esm({
  "src/modules/moduloRegistroTiempo/API/SesionLectura.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian22 = require("obsidian");
    init_SesionLectura();
    init_RTBase();
    init_luxon();
    SesionLectura = class extends RTBase {
      constructor(plugin, infoSubsistema) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.nota = {};
        this.infoSubsistema = infoSubsistema;
      }
      async getId() {
        var _a, _b, _c;
        let maxId = 0;
        debugger;
        const files = app.vault.getMarkdownFiles();
        const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
        registrosExistentes.forEach((file) => {
          var _a2;
          const metadata = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
          if (metadata && metadata.id && !isNaN(metadata.id)) {
            const id = parseInt(metadata.id);
            if (id > maxId)
              maxId = id;
          }
        });
        this.nota.id = maxId + 1;
        const currentNotePath = (_a = app.workspace.getActiveFile()) == null ? void 0 : _a.path;
        const currentNota = (_b = app.metadataCache.getFileCache(app.workspace.getActiveFile())) == null ? void 0 : _b.frontmatter;
        if (currentNota) {
          const existingSessions = registrosExistentes.filter((file) => {
            var _a2, _b2;
            return file.path !== currentNotePath && ((_b2 = (_a2 = app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) == null ? void 0 : _b2.titulo) === currentNota.titulo;
          });
          if (existingSessions.length > 0) {
            const sortedSessions = existingSessions.sort((a, B) => parseInt(B.path.match(/[0-9]+/)[0]) - parseInt(A.path.match(/[0-9]+/)[0]));
            const lastSL = (_c = app.metadataCache.getFileCache(sortedSessions[0])) == null ? void 0 : _c.frontmatter;
            this.nota.idSec = parseInt(lastSL.idSec) + 1;
            this.nota.pagInicio = lastSL.pagFin;
          } else {
            this.nota.idSec = 1;
            this.nota.pagInicio = 1;
          }
        } else {
          this.nota.idSec = 1;
          this.nota.pagInicio = 1;
        }
        return this.nota.id;
      }
      async getNota() {
        return this.nota;
      }
      async getParametrosLibro() {
        debugger;
        const currentFile = app.workspace.getActiveFile();
        if (!currentFile || !currentFile.path)
          return;
        const metadataCache = app.metadataCache;
        const fileCache = metadataCache.getFileCache(currentFile);
        if (!fileCache || !fileCache.frontmatter || fileCache.frontmatter.type !== "LB") {
          new Notice("La nota activa debe ser de tipo Libro en la Bibloteca para poder crear una sesi\xF3n de Lectura.");
          return;
        }
        const frontMatter = fileCache.frontmatter;
        this.nota["paginas"] = frontMatter.paginas;
        this.nota["titulo"] = frontMatter.titulo;
        this.nota["palabrasPorHoja"] = frontMatter.palabrasPorHoja;
      }
      async getAsunto() {
        var _a, _b, _c, _d, _e, _f, _g;
        let padres = [];
        let activo = app.workspace.getActiveFile();
        let siAsunto = true;
        let nombre = "";
        let nota;
        if (activo != null) {
          nombre = activo.basename;
          nota = app.metadataCache.getFileCache(activo);
          nota.frontmatter = nota.frontmatter || {};
          nota.frontmatter.file = {};
          Object.assign(nota.frontmatter.file, activo);
          padres.unshift(nombre);
          debugger;
          this.nota.asuntoDefinido = true;
          this.nota.proyectoQ = "";
          if (Array.isArray((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.proyectoQ)) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.proyectoQ) {
            this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.proyectoGTD = "";
          if (Array.isArray((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.proyectoGTD)) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoGTD) {
            this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          this.nota.areaInteres = [];
          if (Array.isArray((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if ((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
          this.nota.areaVida = "";
          if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.areaVida) {
            if (Array.isArray(nota.frontmatter.areaVida)) {
              this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof nota.frontmatter.areaVida === "string") {
              this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          return { siAsunto, nombre: padres };
        }
      }
      async getAliases() {
        this.nota.aliases = [];
        this.nota.aliases.push(`SL - ${this.nota.idSec} / ${this.nota.titulo}`);
        return this.nota.aliases;
      }
      async getFecha() {
        let fechaActual = DateTime.now();
        fechaActual = fechaActual.setLocale("es");
        fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
        this.nota.fecha = fechaActual;
        return fechaActual;
      }
      async getRename() {
        debugger;
        const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
        const file = this.tp.file.config.target_file;
        const existe = app.vault.getAbstractFileByPath(newName);
        try {
          if (existe instanceof import_obsidian22.TFile) {
            const nombreFile = newName.split("/");
            const borrar = await this.suggester(
              ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
              [true, false],
              true,
              `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
            );
            if (borrar) {
              await app.vault.delete(existe);
              if (file instanceof import_obsidian22.TFile) {
                await app.vault.rename(file, newName);
                console.log("Archivo renombrado con \xE9xito.");
                return newName;
              }
            } else {
              console.log("Cancelando la creaci\xF3n del archivo.");
              throw new Error("Proceso cancelado por el usuario.");
            }
          } else {
            if (file instanceof import_obsidian22.TFile) {
              await app.vault.rename(file, newName);
              console.log("Archivo renombrado con \xE9xito.");
              return newName;
            }
          }
        } catch (error) {
          console.error("Error al cambiar el nombre", error);
          throw error;
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/RTBase.ts
var import_obsidian23, import_obsidian24, RTBase;
var init_RTBase = __esm({
  "src/modules/moduloRegistroTiempo/API/RTBase.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian23 = require("obsidian");
    import_obsidian24 = require("obsidian");
    init_SesionLectura();
    RTBase = class {
      constructor(plugin) {
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
        this.infoSubsistema = {};
      }
      async iniciarRegistro(infoSubsistema, campos) {
        if (typeof infoSubsistema === "object" && infoSubsistema !== null) {
          if (!campos || !Array.isArray(campos)) {
            throw new Error("Campos debe ser un array definido.");
          }
          this.nota = {};
          let nota;
          Object.assign(this.infoSubsistema, infoSubsistema);
          debugger;
          if (this.infoSubsistema.defined) {
            this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
            this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
            Object.assign(this.nota, infoSubsistema);
          }
          let fieldHandler;
          switch (this.infoSubsistema.type) {
            case "SL":
              const SesionLectura3 = await Promise.resolve().then(() => (init_SesionLectura2(), SesionLectura_exports));
              fieldHandler = new SesionLectura3.SesionLectura(this.plugin, this.infoSubsistema);
              break;
            default:
              throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
          }
          try {
            for (let campo of campos) {
              const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
              if (typeof fieldHandler[functionName] === "function") {
                this.nota[campo] = await fieldHandler[functionName]();
                nota = await fieldHandler.getNota();
                for (const key in nota) {
                  if (!(key in this.nota)) {
                    this.nota[key] = nota[key];
                  }
                }
              } else {
                console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
              }
            }
          } catch (error) {
            console.error("No se pudo crear el objeto de registro.", error);
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
          return this.nota;
        } else {
          try {
            const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
            await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.definirTipoRegistro(registro, this.plugin.app);
            if (registro.detener) {
              return registro;
            }
            await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
            return registro;
          } catch (error) {
            new Notice("No se pudo crear el objeto de registro.");
            return null;
          }
        }
      }
      async cerrarRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          let infoNota;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else if (registro instanceof import_obsidian23.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          let infoNota = { file: registro };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          let infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
          let campos = ["fecha", "horaFinal", "tiempoTrabajado"];
          let resultado = await this.plugin.YAMLUpdaterAPI.archivarNota(infoNota, campos);
          let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
          new Notice(`Tarea cerrada. Campos actualizados: ${textoResultado}`);
        }
      }
    };
  }
});

// src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts
var import_obsidian25, registroTiempoAPI;
var init_registroTiempoAPI = __esm({
  "src/modules/moduloRegistroTiempo/API/registroTiempoAPI.ts"() {
    "use strict";
    init_utilsAPI();
    import_obsidian25 = require("obsidian");
    init_RegistroTiempo();
    init_RTBase();
    registroTiempoAPI = class extends RTBase {
      constructor(plugin) {
        super(plugin);
        this.plugin = plugin;
        this.plugin = plugin;
        this.utilsApi = new utilsAPI(plugin);
        this.tp = plugin.tp;
      }
      // Invocado desde el template de templater Paso 3 de 3
      async retomarRegistro(id) {
        var _a, _b, _c, _d;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        try {
          let quitarDobleCorchete2 = function(str) {
            if (str.startsWith("[[") && str.endsWith("]]")) {
              return str.slice(2, -2);
            }
            return str;
          }, normalizarArray2 = function(arr) {
            return arr.map((item) => {
              if (typeof item === "string") {
                return quitarDobleCorchete2(item);
              }
              return item;
            });
          };
          var quitarDobleCorchete = quitarDobleCorchete2, normalizarArray = normalizarArray2;
          const registro = await this.utilsApi.crearObjetoRegistro(this.plugin);
          await this.utilsApi.verificarTareasActivas(registro, this.plugin.app);
          if (registro.detener) {
            return registro;
          }
          const files = this.plugin.app.vault.getMarkdownFiles();
          let registroAntiguo;
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === parseInt(id)) {
                registroAntiguo = { file, frontmatter: metadata };
                break;
              }
            }
          }
          if (!registroAntiguo) {
            new Notice(`No se encontr\xF3 el registro antiguo con ID: ${id}`);
            registro.detener = true;
            return registro;
          }
          const fm = registroAntiguo.frontmatter;
          registro.titulo = (_b = fm.titulo) != null ? _b : "Sin Titulo";
          registro.asuntoRetomado = (_c = fm.asunto) != null ? _c : null;
          registro.idSec = ((_d = fm.idSec) != null ? _d : 0) + 1;
          registro.areaVida = "";
          if (typeof fm.areaVida === "string") {
            registro.areaVida = quitarDobleCorchete2(fm.areaVida);
          }
          registro.areaInteres = [];
          if (Array.isArray(fm.areaInteres)) {
            registro.areaInteres = normalizarArray2(fm.areaInteres);
          }
          registro.proyectoGTD = [];
          if (Array.isArray(fm.proyectoGTD)) {
            registro.proyectoGTD = normalizarArray2(fm.proyectoGTD);
          }
          registro.proyectoQ = [];
          if (Array.isArray(fm.proyectoQ)) {
            registro.proyectoQ = normalizarArray2(fm.proyectoQ);
          }
          registro.aliases = [];
          if (Array.isArray(fm.aliases)) {
            registro.aliases = normalizarArray2(fm.aliases);
          }
          await this.utilsApi.construirNombreyAlias(registro, this.plugin.app);
          return registro;
        } catch (error) {
          console.error(error);
          new Notice("No se pudo crear el objeto de registro al retomar.");
          return null;
        }
      }
      // Invocado para crear el template de Retomar Paso 1 de 3
      async retomarTarea(id) {
        debugger;
        const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
        const template = app.vault.getAbstractFileByPath(filePath);
        if (template instanceof import_obsidian25.TFile) {
          console.log("Archivo encontrado:", template);
        } else {
          console.log("Archivo no encontrado.");
        }
        const filename = "Retomar " + id;
        const folder = app.vault.getAbstractFileByPath("Inbox");
        let crearNota = this.tp.file.static_functions.get("create_new");
        await crearNota(template, filename, false, folder).basename;
      }
      // Implementación del método con unión de tipos para el parámetro id
      async detalleRegistro(registro) {
        var _a, _b, _c;
        const folder = this.plugin.settings.folder_RegistroTiempo;
        let infoNota;
        debugger;
        if (typeof registro === "string") {
          registro = parseInt(registro);
        }
        if (typeof registro === "number") {
          const files = app.vault.getMarkdownFiles();
          for (let file of files) {
            if (file.path.startsWith(folder)) {
              const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
              if ((metadata == null ? void 0 : metadata.id) === registro) {
                infoNota = { file };
                Object.assign(infoNota, metadata);
              }
            }
          }
        } else if (registro instanceof import_obsidian25.TFile) {
          const metadata = (_b = app.metadataCache.getFileCache(registro)) == null ? void 0 : _b.frontmatter;
          infoNota = { file: registro };
          Object.assign(infoNota, metadata);
        } else {
          const registro2 = await this.utilsApi.buscarRegistrosActivos(app);
          const metadata = (_c = app.metadataCache.getFileCache(registro2)) == null ? void 0 : _c.frontmatter;
          infoNota = { file: registro2 };
          Object.assign(infoNota, metadata);
        }
        let campos = ["descripcion_RegistroTiempo"];
        debugger;
        let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(infoNota, campos);
        let textoResultado = Object.entries(resultado).map(([propiedad, valor]) => `${propiedad}: ${valor}`).join(", ");
        new Notice(`Descripci\xF3n actualizada: ${textoResultado}`);
      }
    };
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ManagementPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian80 = require("obsidian");

// src/settingsTab.ts
var import_obsidian = require("obsidian");
var PluginMainSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(plugin) {
    super(plugin.app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Configuraci\xF3n del plugin de Gesti\xF3n Personal" });
    const tabContainer = containerEl.createDiv({ cls: "tab-container" });
    const tabContentContainer = containerEl.createDiv({ cls: "tab-content-container" });
    const tabTitles = ["Activar M\xF3dulos", "Directorios Subsistemas", "Pesta\xF1a 3"];
    tabTitles.forEach((title, index) => {
      const tabButton = document.createElement("button");
      tabButton.textContent = title;
      tabButton.classList.add("tab-link");
      tabButton.dataset.tab = `tab${index}`;
      tabButton.onclick = () => this.openTab(`tab${index}`);
      tabContainer.appendChild(tabButton);
      const tabContent = document.createElement("div");
      tabContent.id = `tab${index}`;
      tabContent.classList.add("tab-content");
      tabContentContainer.appendChild(tabContent);
      if (index > 0)
        tabContent.style.display = "none";
      if (index === 0) {
        new import_obsidian.Setting(tabContent).setName("Ver Alias en el Status Bar").setDesc("Elige si deseas ver el Aliases de las notas en el Status Bar.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloAliasStatusBar).onChange(async (value) => {
          this.plugin.settings.moduloAliasStatusBar = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Registro Tiempo").setDesc("Activa o desactiva el m\xF3dulo de registro de tiempo.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloRegistroTiempo).onChange(async (value) => {
          this.plugin.settings.moduloRegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(tabContent).setName("Activar M\xF3dulo Base - Pruebas").setDesc("Activa o desactiva el m\xF3dulo de pruebas.").addToggle((toggle) => toggle.setValue(this.plugin.settings.moduloBase).onChange(async (value) => {
          this.plugin.settings.moduloBase = value;
          await this.plugin.saveSettings();
        }));
        containerEl.createEl("h3", { text: "Navegador de Tareas" });
        new import_obsidian.Setting(containerEl).setName("Activar navegador de tareas").setDesc("Permite navegar directamente a tareas en ejecuci\xF3n").addToggle((toggle) => toggle.setValue(this.plugin.settings.taskNavigatorModule).onChange(async (value) => {
          this.plugin.settings.taskNavigatorModule = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 1) {
        const toggleCollapse = (event) => {
          const nextElement = event.target.nextElementSibling;
          if (nextElement.style.display === "none") {
            nextElement.style.display = "block";
            event.target.innerHTML = "&#9660; " + event.target.getAttribute("data-title");
          } else {
            nextElement.style.display = "none";
            event.target.innerHTML = "&#9654; " + event.target.getAttribute("data-title");
          }
        };
        const anotacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Anotaciones"' });
        anotacionesTitle.setAttribute("data-title", 'Subsistema de "Anotaciones"');
        anotacionesTitle.style.cursor = "pointer";
        const anotacionesContent = tabContent.createDiv();
        anotacionesContent.style.display = "none";
        anotacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(anotacionesContent).setName("Carpeta de Anotaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n todas las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Anotaciones).onChange(async (value) => {
          this.plugin.settings.folder_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(anotacionesContent).setName("Indice de Anotaciones").setDesc("Establece la ruta del \xEDndice de las Anotaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Anotaciones).onChange(async (value) => {
          this.plugin.settings.indice_Anotaciones = value;
          await this.plugin.saveSettings();
        }));
        const campa\u00F1asTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Campa\xF1as"' });
        campa\u00F1asTitle.setAttribute("data-title", 'Subsistema de "Campa\xF1as"');
        campa\u00F1asTitle.style.cursor = "pointer";
        const campa\u00F1asContent = tabContent.createDiv();
        campa\u00F1asContent.style.display = "none";
        campa\u00F1asTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(campa\u00F1asContent).setName("Carpeta de Campa\xF1as").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las campa\xF1as.").addText((text) => text.setValue(this.plugin.settings.folder_Campa\u00F1as).onChange(async (value) => {
          this.plugin.settings.folder_Campa\u00F1as = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(campa\u00F1asContent).setName("\xCDndice de Campa\xF1as").setDesc("Establece la ruta del \xEDndice de campa\xF1as.").addText((text) => text.setValue(this.plugin.settings.indice_Campa\u00F1as).onChange(async (value) => {
          this.plugin.settings.indice_Campa\u00F1as = value;
          await this.plugin.saveSettings();
        }));
        const blogTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Art\xEDculos de Blog"' });
        blogTitle.setAttribute("data-title", 'Subsistema de "Art\xEDculos de Blog"');
        blogTitle.style.cursor = "pointer";
        const blogContent = tabContent.createDiv();
        blogContent.style.display = "none";
        blogTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(blogContent).setName("Carpeta de Art\xEDculos del Blog").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.folder_ABlog).onChange(async (value) => {
          this.plugin.settings.folder_ABlog = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(blogContent).setName("Indice de Art\xEDculos del Blog").setDesc("Establece la ruta del \xEDndice de los art\xEDculos del blog.").addText((text) => text.setValue(this.plugin.settings.indice_ABlog).onChange(async (value) => {
          this.plugin.settings.indice_ABlog = value;
          await this.plugin.saveSettings();
        }));
        const desarrollosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Desarrollos y c\xF3digos"' });
        desarrollosTitle.setAttribute("data-title", 'Subsistema de "Desarrollos y c\xF3digos"');
        desarrollosTitle.style.cursor = "pointer";
        const desarrollosContent = tabContent.createDiv();
        desarrollosContent.style.display = "none";
        desarrollosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(desarrollosContent).setName("Carpeta de Desarrollos y C\xF3digos").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.folder_Desarrollos).onChange(async (value) => {
          this.plugin.settings.folder_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(desarrollosContent).setName("\xCDndice de Desarrollos y C\xF3digos").setDesc("Establece la ruta del \xEDndice de los desarrollos y c\xF3digos.").addText((text) => text.setValue(this.plugin.settings.indice_Desarrollos).onChange(async (value) => {
          this.plugin.settings.indice_Desarrollos = value;
          await this.plugin.saveSettings();
        }));
        const estudioTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Estudio"' });
        estudioTitle.setAttribute("data-title", 'Subsistema de "Estudio"');
        estudioTitle.style.cursor = "pointer";
        const estudioContent = tabContent.createDiv();
        estudioContent.style.display = "none";
        estudioTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(estudioContent).setName("Carpeta de Temas de Estudio").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.folder_Estudio).onChange(async (value) => {
          this.plugin.settings.folder_Estudio = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(estudioContent).setName("\xCDndice de Estudio").setDesc("Establece la ruta del \xEDndice de los temas de estudio.").addText((text) => text.setValue(this.plugin.settings.indice_Estudio).onChange(async (value) => {
          this.plugin.settings.indice_Estudio = value;
          await this.plugin.saveSettings();
        }));
        const gtdTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "GTD"' });
        gtdTitle.setAttribute("data-title", 'Subsistema de "GTD"');
        gtdTitle.style.cursor = "pointer";
        const gtdContent = tabContent.createDiv();
        gtdContent.style.display = "none";
        gtdTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(gtdContent).setName("Archivo de Bandeja de Entrada.").setDesc("Establece la ruta de la Bandeja de entrada GTD.").addText((text) => text.setValue(this.plugin.settings.file_Inbox).onChange(async (value) => {
          this.plugin.settings.file_Inbox = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Proyectos GTD").setDesc("Establece la ruta de la carpeta para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Proyectos GTD").setDesc("Establece la ruta del \xEDndice para proyectos GTD.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosGTD).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("Carpeta de Revisiones Semanales GTD").setDesc("Establece la ruta de la carpeta para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.folder_RSGTD).onChange(async (value) => {
          this.plugin.settings.folder_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(gtdContent).setName("\xCDndice de Revisiones Semanales GTD").setDesc("Establece la ruta del \xEDndice para las revisiones semanales GTD.").addText((text) => text.setValue(this.plugin.settings.indice_RSGTD).onChange(async (value) => {
          this.plugin.settings.indice_RSGTD = value;
          await this.plugin.saveSettings();
        }));
        const lecturaTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Lectura"' });
        lecturaTitle.setAttribute("data-title", 'Subsistema de "Lectura"');
        lecturaTitle.style.cursor = "pointer";
        const lecturaContent = tabContent.createDiv();
        lecturaContent.style.display = "none";
        lecturaTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Sesiones de Lectura").setDesc("Establece la ruta de la carpeta para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.folder_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Sesiones de Lectura").setDesc("Establece la ruta del \xEDndice para las sesiones de lectura.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaSesiones).onChange(async (value) => {
          this.plugin.settings.indice_LecturaSesiones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("Carpeta de Res\xFAmenes de Libros").setDesc("Establece la ruta de la carpeta para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.folder_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.folder_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(lecturaContent).setName("\xCDndice de Res\xFAmenes de Libros").setDesc("Establece la ruta del \xEDndice para los res\xFAmenes de libros.").addText((text) => text.setValue(this.plugin.settings.indice_LecturaResumenes).onChange(async (value) => {
          this.plugin.settings.indice_LecturaResumenes = value;
          await this.plugin.saveSettings();
        }));
        const mentoriasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mentor\xEDas"' });
        mentoriasTitle.setAttribute("data-title", 'Subsistema de "Mentor\xEDas"');
        mentoriasTitle.style.cursor = "pointer";
        const mentoriasContent = tabContent.createDiv();
        mentoriasContent.style.display = "none";
        mentoriasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mentoriasContent).setName("Carpeta de Sesiones de Mentor\xEDa").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.folder_Mentorias).onChange(async (value) => {
          this.plugin.settings.folder_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mentoriasContent).setName("\xCDndice de Mentor\xEDas").setDesc("Establece la ruta del \xEDndice de las sesiones de mentor\xEDa.").addText((text) => text.setValue(this.plugin.settings.indice_Mentorias).onChange(async (value) => {
          this.plugin.settings.indice_Mentorias = value;
          await this.plugin.saveSettings();
        }));
        const mercadoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Mercado"' });
        mercadoTitle.setAttribute("data-title", 'Subsistema de "Mercado"');
        mercadoTitle.style.cursor = "pointer";
        const mercadoContent = tabContent.createDiv();
        mercadoContent.style.display = "none";
        mercadoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(mercadoContent).setName("Carpeta de Listados de Mercado").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las listas de mercado.").addText((text) => text.setValue(this.plugin.settings.folder_Mercado).onChange(async (value) => {
          this.plugin.settings.folder_Mercado = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(mercadoContent).setName("\xCDndice de listados de mercado").setDesc("Establece la ruta del \xEDndice de los listados de mercado.").addText((text) => text.setValue(this.plugin.settings.indice_Mercado).onChange(async (value) => {
          this.plugin.settings.indice_Mercado = value;
          await this.plugin.saveSettings();
        }));
        const modulosTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "M\xF3dulos Sistema Gesti\xF3n"' });
        modulosTitle.setAttribute("data-title", 'Subsistema de "M\xF3dulos Sistema Gesti\xF3n"');
        modulosTitle.style.cursor = "pointer";
        const modulosContent = tabContent.createDiv();
        modulosContent.style.display = "none";
        modulosTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(modulosContent).setName("Carpeta de Modulos del Sistema de Gestion").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los m\xF3dulos del Sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.folder_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.folder_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(modulosContent).setName("\xCDndice de los Modulos del sistema de Gestion").setDesc("Establece la ruta del \xEDndice de los M\xF3dulos del sistema de Gesti\xF3n.").addText((text) => text.setValue(this.plugin.settings.indice_ModulosSistema).onChange(async (value) => {
          this.plugin.settings.indice_ModulosSistema = value;
          await this.plugin.saveSettings();
        }));
        const transaccionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Transacciones"' });
        transaccionesTitle.setAttribute("data-title", 'Subsistema de "transacciones"');
        transaccionesTitle.style.cursor = "pointer";
        const transaccionesContent = tabContent.createDiv();
        transaccionesContent.style.display = "none";
        transaccionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(transaccionesContent).setName("Carpeta de Modulos del Sistema de Transacciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los comprobantes de las transacciones.").addText((text) => text.setValue(this.plugin.settings.folder_Transacciones).onChange(async (value) => {
          this.plugin.settings.folder_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(transaccionesContent).setName("\xCDndice de Transacciones").setDesc("Establece la ruta del \xEDndice de Transacciones.").addText((text) => text.setValue(this.plugin.settings.indice_Transacciones).onChange(async (value) => {
          this.plugin.settings.indice_Transacciones = value;
          await this.plugin.saveSettings();
        }));
        const presentacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Presentaciones"' });
        presentacionesTitle.setAttribute("data-title", 'Subsistema de "Presentaciones"');
        presentacionesTitle.style.cursor = "pointer";
        const presentacionesContent = tabContent.createDiv();
        presentacionesContent.style.display = "none";
        presentacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(presentacionesContent).setName("Carpeta de Notas de Presentaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las notas de presentaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Presentaciones).onChange(async (value) => {
          this.plugin.settings.folder_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(presentacionesContent).setName("\xCDndice de Presentaciones").setDesc("Establece la ruta del \xEDndice de presentaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Presentaciones).onChange(async (value) => {
          this.plugin.settings.indice_Presentaciones = value;
          await this.plugin.saveSettings();
        }));
        const proyectosQTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Proyectos de Q"' });
        proyectosQTitle.setAttribute("data-title", 'Subsistema de "Proyectos de Q"');
        proyectosQTitle.style.cursor = "pointer";
        const proyectosQContent = tabContent.createDiv();
        proyectosQContent.style.display = "none";
        proyectosQTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(proyectosQContent).setName("Carpeta de Proyectos de Q").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.folder_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.folder_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(proyectosQContent).setName("\xCDndice de Proyectos de Q").setDesc("Establece la ruta del \xEDndice de proyectos de Q.").addText((text) => text.setValue(this.plugin.settings.indice_ProyectosQ).onChange(async (value) => {
          this.plugin.settings.indice_ProyectosQ = value;
          await this.plugin.saveSettings();
        }));
        const publicacionesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Publicaciones"' });
        publicacionesTitle.setAttribute("data-title", 'Subsistema de "Publicaciones"');
        publicacionesTitle.style.cursor = "pointer";
        const publicacionesContent = tabContent.createDiv();
        publicacionesContent.style.display = "none";
        publicacionesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(publicacionesContent).setName("Carpeta de Piezas de Publicaciones").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las piezas de publicaciones.").addText((text) => text.setValue(this.plugin.settings.folder_Publicaciones).onChange(async (value) => {
          this.plugin.settings.folder_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(publicacionesContent).setName("\xCDndice de Publicaciones").setDesc("Establece la ruta del \xEDndice de publicaciones.").addText((text) => text.setValue(this.plugin.settings.indice_Publicaciones).onChange(async (value) => {
          this.plugin.settings.indice_Publicaciones = value;
          await this.plugin.saveSettings();
        }));
        const recetasTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recetas"' });
        recetasTitle.setAttribute("data-title", 'Subsistema de "Recetas"');
        recetasTitle.style.cursor = "pointer";
        const recetasContent = tabContent.createDiv();
        recetasContent.style.display = "none";
        recetasTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recetasContent).setName("Carpeta de Recetas").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n las recetas.").addText((text) => text.setValue(this.plugin.settings.folder_Recetas).onChange(async (value) => {
          this.plugin.settings.folder_Recetas = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recetasContent).setName("\xCDndice de Recetas").setDesc("Establece la ruta del \xEDndice de recetas.").addText((text) => text.setValue(this.plugin.settings.indice_Recetas).onChange(async (value) => {
          this.plugin.settings.indice_Recetas = value;
          await this.plugin.saveSettings();
        }));
        const recursosRecurrentesTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Recursos Recurrentes"' });
        recursosRecurrentesTitle.setAttribute("data-title", 'Subsistema de "Recursos Recurrentes"');
        recursosRecurrentesTitle.style.cursor = "pointer";
        const recursosRecurrentesContent = tabContent.createDiv();
        recursosRecurrentesContent.style.display = "none";
        recursosRecurrentesTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(recursosRecurrentesContent).setName("Carpeta de Recursos Recurrentes").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.folder_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.folder_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(recursosRecurrentesContent).setName("\xCDndice de Recursos Recurrentes").setDesc("Establece la ruta del \xEDndice de recursos recurrentes.").addText((text) => text.setValue(this.plugin.settings.indice_RecursosRecurrentes).onChange(async (value) => {
          this.plugin.settings.indice_RecursosRecurrentes = value;
          await this.plugin.saveSettings();
        }));
        const registroTiempoTitle = tabContent.createEl("p", { text: '\u25B6 Subsistema de "Registro Tiempo"' });
        registroTiempoTitle.setAttribute("data-title", 'Subsistema de "Registro Tiempo"');
        registroTiempoTitle.style.cursor = "pointer";
        const registroTiempoContent = tabContent.createDiv();
        registroTiempoContent.style.display = "none";
        registroTiempoTitle.onclick = toggleCollapse;
        new import_obsidian.Setting(registroTiempoContent).setName("Carpeta de Registros de Tiempo").setDesc("Establece la ruta de la carpeta donde se guardar\xE1n los registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.folder_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.folder_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(registroTiempoContent).setName("\xCDndice de Registro de Tiempo").setDesc("Establece la ruta del \xEDndice de registros de tiempo.").addText((text) => text.setValue(this.plugin.settings.indice_RegistroTiempo).onChange(async (value) => {
          this.plugin.settings.indice_RegistroTiempo = value;
          await this.plugin.saveSettings();
        }));
      }
      if (index === 2) {
        const dateLabel = tabContent.createEl("label");
        dateLabel.textContent = "Fecha";
        const dateInput = tabContent.createEl("input");
        dateInput.type = "datetime-local";
      }
    });
    containerEl.createEl("style", {
      text: `
                .tab-content { display: none; padding-top: 20px; } // A\xF1adido padding-top para el espacio
                .tab-content.active { display: block; }
                .tab-link { cursor: pointer; padding: 5px 10px; margin-right: 5px; background: #f0f0f0; border: 1px solid #ddd; border-radius: 5px; }
                .tab-link.active { background: #e0e0e0; }
                .setting-item { margin-bottom: 10px; }
            `
    });
    this.openTab = (tabName) => {
      document.querySelectorAll(".tab-content").forEach((content) => {
        content.style.display = "none";
        content.classList.remove("active");
      });
      document.querySelectorAll(".tab-link").forEach((link) => {
        link.classList.remove("active");
      });
      const activeTabContent = document.getElementById(tabName);
      const activeTabLink = document.querySelector(`[data-tab="${tabName}"]`);
      if (activeTabContent)
        activeTabContent.style.display = "block";
      if (activeTabLink)
        activeTabLink.classList.add("active");
    };
    this.openTab("tab0");
  }
  openTab(arg0) {
    throw new Error("Method not implemented.");
  }
};

// src/modules/moduloBase/index.ts
var import_obsidian6 = require("obsidian");

// src/modules/moduloBase/utils/crearCarpeta.ts
async function crearCarpeta(rutaCarpeta) {
  try {
    debugger;
    const carpetaExistente = app.vault.getAbstractFileByPath(rutaCarpeta);
    if (carpetaExistente) {
      console.log(`La carpeta '${rutaCarpeta}' ya existe.`);
      return;
    }
    debugger;
    await app.vault.createFolder(rutaCarpeta);
    console.log(`Carpeta '${rutaCarpeta}' creada exitosamente.`);
  } catch (error) {
    console.error(`Error al crear la carpeta '${rutaCarpeta}':`, error);
  }
}

// src/modules/moduloBase/utils/crearPlantilla.ts
var import_obsidian2 = require("obsidian");

// src/modules/moduloBase/utils/fileLinkModal.ts
var import_obsidian3 = require("obsidian");
var FileLinkModal = class extends import_obsidian3.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    let { contentEl } = this;
    contentEl.style.display = "flex";
    contentEl.style.flexDirection = "column";
    contentEl.style.justifyContent = "center";
    contentEl.style.alignItems = "center";
    contentEl.style.height = "50%";
    contentEl.createEl("h1", {
      text: "Insertar el link de un archivo.",
      attr: { style: "text-align: center;" }
      // Asegura que el texto del título esté centrado si es más largo que una línea
    });
    const inputContainer = contentEl.createDiv();
    inputContainer.style.margin = "10px";
    const fileInput = inputContainer.createEl("input", { type: "file" });
    fileInput.style.display = "none";
    const fileButton = inputContainer.createEl("button", {
      text: "Seleccione su archivo",
      cls: "mod-cta"
    });
    fileButton.style.padding = "5px 10px";
    fileButton.style.fontSize = "16px";
    fileButton.style.marginTop = "5px";
    fileButton.style.cursor = "pointer";
    fileButton.onclick = () => fileInput.click();
    fileInput.onchange = (e) => {
      const file = e.target.files[0];
      if (file) {
        this.insertLinkAtCursor(file.path, file.name);
      }
      this.close();
    };
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  async insertLinkAtCursor(filePath, fileName) {
    const activeLeaf = this.app.workspace.activeLeaf;
    if (activeLeaf) {
      const editor = activeLeaf.view.sourceMode.cmEditor;
      const cursor = editor.getCursor();
      const linkText = `[${fileName}](<file://${filePath}>)`;
      editor.replaceRange(linkText, cursor);
    }
  }
};
async function insertFileLink(app2) {
  new FileLinkModal(app2).open();
}

// src/modules/moduloBase/commands.ts
var import_obsidian5 = require("obsidian");

// src/modules/moduloBase/utils/createNoteFromTemplate.ts
var import_obsidian4 = require("obsidian");
async function createNoteFromTemplate(plugin, template, folder, filename, openNewNote = true) {
  if (!plugin || !plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
    console.error("El plugin Templater no est\xE1 habilitado.");
    return;
  }
  const templaterPlugin = plugin.app.plugins.plugins["templater-obsidian"];
  const tp = templaterPlugin.templater.current_functions_object;
  if (!tp) {
    console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
    return;
  }
  debugger;
  let templateFile = tp.file.find_tfile(template);
  try {
    const newNote = await tp.file.create_new(templateFile, filename, openNewNote, folder);
    return newNote;
  } catch (error) {
    console.error("Error al crear la nota desde la plantilla:", error);
    return;
  }
}

// src/modules/moduloBase/commands.ts
function registerCommands(plugin) {
  const comando1 = plugin.addCommand({
    id: "Creacion-Carpeta",
    name: "Creaci\xF3n de Carpeta",
    callback: async () => {
      debugger;
      await crearCarpeta("Mi Carpeta de plugin");
    }
  });
  plugin.registeredCommandIdsMB.push(comando1.id);
  const comando3 = plugin.addCommand({
    id: "crear-archivo-template",
    name: "Crear archivo desde template",
    callback: async () => {
      const pluginId = "templater-obsidian";
      const isPluginInstalled = plugin.app.plugins.enabledPlugins.has(pluginId);
      let template = "Plantillas/Anotaciones/Plt - Anotaciones.md";
      let folderObj = plugin.app.vault.getAbstractFileByPath("Inbox");
      if (!(folderObj instanceof import_obsidian5.TFolder)) {
        new Notice("La carpeta especificada no existe o no es una carpeta.");
        return;
      }
      let fileName = "toDefine";
      let openNote = true;
      debugger;
      const archivo = await createNoteFromTemplate(plugin, template, folderObj, fileName, openNote);
      if (!archivo) {
        new Notice("No se pudo crear el archivo.");
        return;
      }
    }
  });
  plugin.registeredCommandIdsMB.push(comando3.id);
  const comando4 = plugin.addCommand({
    id: "crear-link-Archivo",
    name: "Crear un link a archivo del Disco.",
    callback: async () => {
      await insertFileLink(app);
    }
  });
  plugin.registeredCommandIdsMB.push(comando4.id);
  const comando5 = plugin.addCommand({
    id: "abrir-nota-activa",
    name: "Abrir Nota Activa",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-nota-activa");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-nota-activa"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-nota-activa")[0]
      );
    }
  });
  plugin.registeredCommandIdsMB.push(comando5.id);
}
function deactivateCommands(plugin) {
  if (!plugin.registeredCommandIdsMB)
    return;
  plugin.registeredCommandIdsMB.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloBase/index.ts
var ModuloBase = class {
  constructor(plugin) {
    this.moduloBase = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloBase)
      return;
    registerCommands(this.plugin);
  }
  deactivate() {
    if (!this.statusBar)
      return;
    deactivateCommands(this.plugin);
  }
};

// src/modules/M_busquedaAvanzada/activadores.ts
var import_obsidian10 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/ribbonButton.ts
var import_obsidian9 = require("obsidian");

// src/modules/M_busquedaAvanzada/ui/modal.ts
var import_obsidian8 = require("obsidian");

// src/modules/M_busquedaAvanzada/search/FuzzyNoteSuggester.ts
var import_obsidian7 = require("obsidian");

// src/modules/moduloAliasStatusBar/statusBar.ts
var import_obsidian11 = require("obsidian");
var StatusBarExtension = class {
  constructor(plugin) {
    this.statusBar = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.statusBar)
      return;
    this.statusBar = this.plugin.addStatusBarItem();
    this.updateStatusBar();
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("file-open", (file) => {
        this.updateStatusBar(file);
      })
    );
  }
  deactivate() {
    if (!this.statusBar)
      return;
    this.statusBar.remove();
    this.statusBar = null;
  }
  updateStatusBar(file) {
    var _a, _b;
    const currentFile = file || this.plugin.app.workspace.getActiveFile();
    if (!currentFile || !this.statusBar) {
      (_a = this.statusBar) == null ? void 0 : _a.setText("");
      return;
    }
    const fileCache = this.plugin.app.metadataCache.getFileCache(currentFile);
    const aliases = ((_b = fileCache.frontmatter) == null ? void 0 : _b.aliases) || [];
    this.statusBar.setText(aliases.length > 0 ? `Alias: ${aliases[0]}` : "No Alias");
  }
};

// src/modules/moduloRegistroTiempo/index.ts
var import_obsidian17 = require("obsidian");

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
var import_obsidian14 = require("obsidian");

// src/modules/moduloRegistroTiempo/utils.ts
var import_obsidian13 = require("obsidian");
init_seleccionModal();
async function cumpleCondicion(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Estructura/Registro Tiempo")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return true;
      }
    }
  }
  return false;
}
async function buscarRegistrosActivos(app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  for (let file of files) {
    if (file.path.startsWith("Subsistemas/Registro Tiempo/Registros")) {
      const metadata = app2.metadataCache.getFileCache(file);
      if (((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.estado) === "\u{1F7E2}") {
        return file;
      }
    }
  }
  return;
}
async function crearObjetoRegistro(plugin) {
  const activo = plugin.app.workspace.getActiveFile();
  if (!activo) {
    console.error("No hay un archivo activo para la creaci\xF3n de registro de tiempo. Se descarta para la creaci\xF3n de registro de tiempo.");
    return null;
  }
  const folder = plugin.settings.folder_RegistroTiempo;
  const indice = plugin.settings.indice_RegistroTiempo;
  let maxId = 0;
  const files = app.vault.getMarkdownFiles();
  const registrosExistentes = files.filter((file) => file.path.startsWith(folder));
  registrosExistentes.forEach((file) => {
    var _a;
    const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata && metadata.id && !isNaN(metadata.id)) {
      const id = parseInt(metadata.id);
      if (id > maxId)
        maxId = id;
    }
  });
  const nextId = maxId + 1;
  const fechaCompleta = formatearFecha(/* @__PURE__ */ new Date());
  return {
    activo,
    nombre: activo.basename,
    folder,
    indice,
    id: nextId,
    fecha: fechaCompleta,
    indice_DVJS: `"${indice}"`
  };
}
function formatearFecha(fecha) {
  const offset2 = fecha.getTimezoneOffset() * 6e4;
  const fechaLocal = new Date(fecha.getTime() - offset2);
  const fechaFormato = fechaLocal.toISOString().split("T")[0];
  const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
  const diaSemana = dias[fecha.getDay()];
  const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
  return `${fechaFormato} ${diaSemana} ${horaFormato}`;
}
async function verificarTareasActivas(registro, app2) {
  var _a;
  const files = app2.vault.getMarkdownFiles();
  const tareasActivas = [];
  for (let file of files) {
    if (file.path.startsWith(registro.folder)) {
      const metadata = (_a = app2.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        tareasActivas.push({ file, aliases: metadata.aliases || file.basename });
      }
    }
  }
  if (tareasActivas.length === 1) {
    const tareaActiva = tareasActivas[0];
    debugger;
    const deseaDetener = await mostrarSugerencia(`La tarea ${tareaActiva.aliases} est\xE1 corriendo. \xBFDesea detenerla?`);
    if (deseaDetener === void 0) {
      new import_obsidian13.Notice(`Creaci\xF3n de registro cancelado por el usuario.`);
      registro.detener = true;
      return;
    }
    if (deseaDetener) {
      await detenerTarea(tareaActiva, app2);
      registro.detener = false;
    } else {
      new import_obsidian13.Notice(`La tarea ${tareaActiva.aliases} seguir\xE1 registr\xE1ndose.`);
      registro.detener = true;
      return;
    }
  } else if (tareasActivas.length > 1) {
    new import_obsidian13.Notice("Hay un error con la cantidad de tareas corriendo en este momento.");
    registro.detener = true;
  } else {
    console.log("No hay m\xE1s tareas corriendo.");
    registro.detener = false;
  }
}
function mostrarSugerencia(mensaje) {
  return new Promise((resolve) => {
    let seleccionado = false;
    const modal = new import_obsidian13.Modal(app);
    modal.contentEl.createEl("h1", { text: mensaje });
    const buttonsContainer = modal.contentEl.createEl("div");
    const yesButton = buttonsContainer.createEl("button", {
      text: "S\xED"
    });
    yesButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(true);
    });
    const noButton = buttonsContainer.createEl("button", {
      text: "No"
    });
    noButton.addEventListener("click", () => {
      seleccionado = true;
      modal.close();
      resolve(false);
    });
    modal.onClose = () => {
      if (!seleccionado) {
        resolve(void 0);
      }
    };
    modal.open();
  });
}
async function definirTipoRegistro(registro, app2) {
  const totTareas = await encontrarTareasPendientes(app2);
  let opcionesTitulo, valoresOpcion;
  if (totTareas.length > 0) {
    opcionesTitulo = [registro.nombre, "Alguna tarea en Ejecuci\xF3n", "Otro"];
    valoresOpcion = ["Nota", "Tarea", "Otro"];
  } else {
    opcionesTitulo = [registro.nombre, "Otro"];
    valoresOpcion = ["Nota", "Otro"];
  }
  const placeholder = "\xBFSobre qu\xE9 es el registro de tiempo?";
  const modalMenu1 = new SeleccionModal(app2, opcionesTitulo, valoresOpcion, placeholder);
  try {
    const selection = await modalMenu1.openAndAwaitSelection();
    registro.tipoRegistro = selection;
    switch (registro.tipoRegistro) {
      case "Nota":
        registro.titulo = registro.nombre;
        registro.siAsunto = true;
        break;
      case "Tarea":
        await elegirTareaParaRegistro(app2, registro, totTareas);
        break;
      default:
        registro.siAsunto = registro.tituloDefinido !== "Otro";
        break;
    }
  } catch (error) {
    console.error("Error o modal cerrado sin selecci\xF3n:", error);
  }
}
async function encontrarTareasPendientes(app2) {
  let tareasPendientes = [];
  const archivos = app2.vault.getMarkdownFiles();
  const archivosRelevantes = archivos.filter((archivo) => !archivo.path.includes("Plantillas"));
  for (const archivo of archivosRelevantes) {
    const contenido = await app2.vault.read(archivo);
    const coincidencias = contenido.match(/^ *- \[\/\] .*/gm) || [];
    const tareasLimpias = coincidencias.map((tarea) => tarea.trim());
    tareasPendientes = tareasPendientes.concat(tareasLimpias);
  }
  return tareasPendientes;
}
async function elegirTareaParaRegistro(app2, registro, tareasPendientes) {
  const placeholder = "Elige la tarea que vas a registrar.";
  let promesasLimpias = tareasPendientes.map((tarea) => limpiarTextoTarea(tarea));
  Promise.all(promesasLimpias).then((tareasLimpias) => {
    const modalMenu = new SeleccionModal(app2, tareasLimpias, tareasLimpias, placeholder);
    modalMenu.openAndAwaitSelection().then((selection) => {
      debugger;
      registro.titulo = limpiarTextoTarea(selection);
    }).catch((error) => {
      registro.detener = true;
      console.error("Error o modal cerrado sin selecci\xF3n:", error);
    });
  }).catch((error) => {
    console.error("Hubo un error al limpiar las tareas:", error);
  });
}
function limpiarTextoTarea(titulo) {
  return new Promise((resolve) => {
    let textoLimpio = titulo.split("\n")[0];
    textoLimpio = textoLimpio.replace(/#[\w-/]+/g, "");
    textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
    textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
    const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
    textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
    textoLimpio = textoLimpio.replace(/\s+/g, " ");
    resolve(textoLimpio.trim());
  });
}
async function detenerTarea(tareaActiva, app2) {
  console.log(`Deteniendo la tarea: ${tareaActiva.titulo}`);
  const fileContents = await app2.vault.read(tareaActiva.file);
  const newContents = fileContents.replace("estado: \u{1F7E2}", "estado: \u{1F535}");
  await app2.vault.modify(tareaActiva.file, newContents);
}

// src/modules/moduloRegistroTiempo/ribbonMenu.ts
function registerRibbonMenu2(plugin) {
  plugin.ribbonButtonRT = plugin.addRibbonIcon("clock", "Registro de Tiempo", async (event) => {
    const menu = new import_obsidian14.Menu(plugin.app);
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Ahora").onClick(() => {
        console.log("Ahora");
      }));
    }
    menu.addItem((item) => item.setTitle("Registrar Tiempo").onClick(() => {
      console.log("Registrar Tiempo");
    }));
    if (await cumpleCondicion(plugin.app)) {
      menu.addItem((item) => item.setTitle("Detener Registro").onClick(() => {
        console.log("Detener Registro");
      }));
    }
    menu.addItem((item) => item.setTitle("Tareas en progreso").onClick(() => {
      console.log("Tareas en progreso");
    }));
    menu.addItem((item) => item.setTitle("Registros de hoy").onClick(() => {
      console.log("Registros de hoy");
    }));
    menu.showAtPosition({ x: event.pageX, y: event.pageY });
  });
}
function deactivateRibbonMenu(plugin) {
  if (plugin.ribbonButtonRT) {
    plugin.ribbonButtonRT.remove();
    plugin.ribbonButtonRT = null;
  }
}

// src/modules/moduloRegistroTiempo/commands.ts
var import_obsidian16 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/modal_Ahora.ts
var import_obsidian15 = require("obsidian");
var modal_Ahora = class extends import_obsidian15.Modal {
  constructor(app2, file) {
    super(app2);
    this.app = app2;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    const { contentEl } = this;
    const metadata = this.app.metadataCache.getFileCache(this.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaInicioStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaInicio) ? window.moment(metadata.frontmatter.horaInicio, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Registro de actividad.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases}"` });
    if (horaInicioStr) {
      const horaInicio = window.moment(horaInicioStr, "YYYY-MM-DD dddd HH:mm");
      const ahora = window.moment();
      const diff = ahora.diff(horaInicio);
      const duracion = window.moment.duration(diff);
      const diffFormatted = `${duracion.hours()}h ${duracion.minutes()}m`;
      contentEl.createEl("p", { text: `Esta actividad lleva ${diffFormatted} en ejecuci\xF3n.` });
    } else {
      contentEl.createEl("p", { text: "No se pudo determinar el tiempo de inicio de la actividad." });
    }
    contentEl.createEl("p", { text: "Hora de inicio:" });
    this.horaInicioInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaInicioStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraInicioLocal = this.horaInicioInput.value;
    if (!nuevaHoraInicioLocal) {
      new import_obsidian15.Notice("Por favor, seleccione una hora de inicio.");
      return;
    }
    const nuevaHoraInicio = window.moment(nuevaHoraInicioLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      const contenidoOriginal = await this.app.vault.read(this.file);
      const contenidoActualizado = contenidoOriginal.replace(/(horaInicio: ).*/, `$1${nuevaHoraInicio}`);
      await this.app.vault.modify(this.file, contenidoActualizado);
      this.close();
      new import_obsidian15.Notice("Hora de inicio actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian15.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/moduloRegistroTiempo/commands.ts
function registerCommands2(plugin) {
  const id1 = plugin.addCommand({
    id: "registros-de-tiempo-del-dia",
    name: "Registros de tiempo del d\xEDa",
    checkCallback: (checking) => {
      var _a;
      const activeLeaf = plugin.app.workspace.activeLeaf;
      if (activeLeaf) {
        const filePath = ((_a = activeLeaf.view.file) == null ? void 0 : _a.path) || "";
        if (filePath.startsWith("Estructura/Periodos/Diario/")) {
          if (!checking) {
            console.log("Registros de tiempo del d\xEDa");
          }
          return true;
        }
      }
      return false;
    }
  });
  plugin.registeredCommandIdsRT.push(id1.id);
  const id2 = plugin.addCommand({
    id: "ahora-RegistroTiempo",
    name: "Tarea activa en registro de tiempo",
    callback: async () => {
      const activa = await buscarRegistrosActivos(plugin.app);
      if (!activa) {
        new import_obsidian16.Notice("No hay notas activas");
      } else {
        let modal = new modal_Ahora(plugin.app, activa);
        modal.open();
      }
    }
  });
  plugin.registeredCommandIdsRT.push(id2.id);
  const id3 = plugin.addCommand({
    id: "crear-registro-tiempo",
    name: "Crear Registro de Tiempo",
    callback: async () => {
      const registro = await crearObjetoRegistro(plugin);
      if (!registro) {
        new import_obsidian16.Notice("No se pudo crear el objeto de registro.");
        return;
      }
      await verificarTareasActivas(registro, plugin.app);
      await definirTipoRegistro(registro, plugin.app);
    }
  });
  plugin.registeredCommandIdsRT.push(id3.id);
  const id4 = plugin.addCommand({
    id: "vista-registro-tiempo-activa",
    name: "Mostrar RT Activo",
    callback: async () => {
      app.workspace.detachLeavesOfType("vista-registro-activo");
      await app.workspace.getRightLeaf(true).setViewState({
        type: "vista-registro-activo"
      });
      app.workspace.revealLeaf(
        app.workspace.getLeavesOfType("vista-registro-activo")[0]
      );
    }
  });
  plugin.registeredCommandIdsRT.push(id4.id);
}
function deactivateCommands2(plugin) {
  if (!plugin.registeredCommandIdsRT)
    return;
  plugin.registeredCommandIdsRT.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian16.Notice("Este comando ha sido desactivado.");
    }
  });
}

// src/modules/moduloRegistroTiempo/index.ts
var ModuloRegistroTiempo = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    if (!this.plugin.ribbonButtonRT) {
      registerRibbonMenu2(this.plugin);
    }
    registerCommands2(this.plugin);
  }
  deactivate() {
    deactivateRibbonMenu(this.plugin);
    deactivateCommands2(this.plugin);
  }
};

// src/defaults/defaultSettings.ts
var DEFAULT_SETTINGS = {
  moduloRegistroTiempo: true,
  moduloAliasStatusBar: true,
  moduloBase: true,
  moduloGTD: true,
  moduloTabTitle: true,
  // Modulo titulo de pestañas.
  moduloTaskManager: true,
  moduloDataviewQueries: true,
  taskNavigatorModule: true,
  // Activado por defecto
  file_camposCentral: "Estructura/Campos Sistema Gestion/Campos Sistema Central",
  folder_Anotaciones: "Anotaciones/Notas",
  indice_Anotaciones: "Anotaciones/Indice Anotaciones",
  folder_ABlog: "Subsistemas/Articulos Blog/Articulos",
  indice_ABlog: "Subsistemas/Articulos Blog/Indice Articulos Blog",
  folder_Desarrollos: "Subsistemas/Desarrollos/Codigos",
  indice_Desarrollos: "Subsistemas/Desarrollos/Indice Desarrollo",
  folder_Estudio: "Subsistemas/Estudio/Temas",
  indice_Estudio: "Subsistemas/Estudio/Indice Estudio",
  folder_RepositorioLibros: "Subsistemas/Libros/Repositorio",
  indice_RepositorioLibros: "Subsistemas/Libros/Indice Repositorio Libros",
  folder_Biblioteca: "Subsistemas/Libros/Biblioteca",
  indice_Biblioteca: "Subsistemas/Libros/Indice Biblioteca",
  folder_KindleNotes: "Subsistemas/Libros/Kindle",
  indice_KindleNotes: "Subsistemas/Libros/Kindle/Indice Kindle",
  //folder_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Sesiones",
  //indice_LecturaSesiones: "Subsistemas/Lectura/Sesiones de Lectura/Indice Sesiones Lectura",
  folder_LecturaResumenes: "Subsistemas/Lectura/Libros/Resumenes",
  indice_LecturaResumenes: "Subsistemas/Lectura/Libros/Indice Resumenes",
  folder_Mentorias: "Subsistemas/Mentorias/Sesiones Mentoria",
  indice_Mentorias: "Subsistemas/Mentorias/Indice Mentorias",
  folder_Mercado: "Subsistemas/Mercado/Listas",
  indice_Mercado: "Subsistemas/Mercado/Indice Mercado",
  folder_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Modulos",
  indice_ModulosSistema: "Subsistemas/Modulos Sistema Gestion/Indice Modulos",
  folder_Transacciones: "Subsistemas/Transacciones",
  indice_Transacciones: "Subsistemas/Transacciones/Indice Transacciones",
  folder_Presentaciones: "Subsistemas/Presentaciones/Notas",
  indice_Presentaciones: "Subsistemas/Presentaciones/Indice Presentaciones",
  folder_Publicaciones: "Subsistemas/Publicaciones/Piezas",
  indice_Publicaciones: "Subsistemas/Publicaciones/Indice Publicaciones",
  folder_Recetas: "Subsistemas/Recetas/Recetas",
  indice_Recetas: "Subsistemas/Recetas/Indice Recetas",
  folder_RegistroTiempo: "Subsistemas/Registro Tiempo/Registros",
  indice_RegistroTiempo: "Subsistemas/Registro Tiempo/Indice Registro Tiempo",
  folder_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Contenido",
  indice_ContenidoParaEstudio: "Subsistemas/Contenido para Estudio/Indice Contenido para Estudio",
  folder_Campa\u00F1a: "Subsistemas/Marketing/Proyectos",
  indice_Campa\u00F1a: "Subsistemas/Marketing/Indice Campa\xF1as",
  folder_Entregable: "Subsistemas/Marketing/Entregables",
  indice_Entregable: "Subsistemas/Marketing/Indice Entregables",
  // Estructura
  folder_AreasVida: "Estructura/Areas de Vida",
  indice_AreasVida: "Estructura/Areas de Vida/Indice Areas de Vida",
  folder_AreasInteres: "Estructura/Areas de Interes",
  indice_AreasInteres: "Estructura/Areas de Interes/Indice Areas de Interes",
  folder_TemasInteres: "Estructura/Temas de Interes",
  indice_TemasInteres: "Estructura/Temas de Interes/Indice Temas de Interes",
  folder_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Recursos",
  indice_RecursosRecurrentes: "Estructura/Recursos Recurrentes/Indice Recursos Recurrentes",
  folder_ProyectosQ: "Estructura/Proyectos de Q",
  indice_ProyectosQ: "Estructura/Proyectos de Q/Indice Proyectos de Q",
  file_Inbox: "Estructura/GTD/Bandeja de Entrada/Bandeja de Entrada",
  folder_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Proyectos",
  indice_ProyectosGTD: "Estructura/GTD/Proyectos GTD/Indice Proyectos GTD",
  folder_RSGTD: "Estructura/GTD/Revision Semanal/Revisiones",
  indice_RSGTD: "Estructura/GTD/Revision Semanal/Indice Revision Semanal",
  folder_SistemaGTD: "Estructura/GTD/Sistema GTD/Sistema",
  indice_SistemaGTD: "Estructura/GTD/Sistema GTD/Indice Sistema GTD",
  // Journal
  folder_Diario: "Estructura/Journal/Diario/Notas",
  indice_Diario: "Estructura/Journal/Diario/Indice Diario",
  folder_Semanal: "Estructura/Journal/Semanal/Notas",
  indice_Semanal: "Estructura/Journal/Semanal/Indice Semanal",
  folder_Mensual: "Estructura/Journal/Mensual/Notas",
  indice_Mensual: "Estructura/Journal/Mensual/Indice Mensual",
  folder_Trimestral: "Estructura/Journal/Trimestral/Notas",
  indice_Trimestral: "Estructura/Journal/Trimestral/Indice Trimestral",
  folder_Anual: "Estructura/Journal/Anual/Notas",
  indice_Anual: "Estructura/Journal/Anual/Indice Anual",
  // COMPASS
  folder_CompassAnual: "Estructura/Compass/Reportes/Anual",
  indice_CompassAnual: "Estructura/Compass/Reportes/Indice Compass Anual",
  folder_CompassTrimestral: "Estructura/Compass/Reportes/Trimestral",
  indice_CompassTrimestral: "Estructura/Compass/Reportes/Indice Compass trimestral",
  folder_ObjCompassAnual: "Estructura/Compass/Objetivos/Anual",
  indice_ObjCompassAnual: "Estructura/Compass/Objetivos/Indice Compass Anual",
  folder_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Trimestral",
  indice_ObjCompassTrimestral: "Estructura/Compass/Objetivos/Indice Compass trimestral",
  // Registros Personales
  folder_Agradecimientos: "Registros Personales/Agradecimientos/Notas",
  indice_Agradecimientos: "Registros Personales/Agradecimientos/Indice Agradecimientos",
  folder_Reflexiones: "Registros Personales/Reflexiones/Notas",
  indice_Reflexiones: "Registros Personales/Reflexiones/Indice Reflexiones",
  folder_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Notas",
  indice_RegistrosAkashikos: "Registros Personales/Registros Akashikos/Indice Registros Akashikos"
};

// src/main.ts
init_registroTiempoAPI();

// src/modules/noteLifecycleManager/API/starterAPI.ts
var import_obsidian50 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var import_obsidian28 = require("obsidian");

// src/modules/noteLifecycleManager/FieldHandlerUtils.ts
var import_obsidian26 = require("obsidian");
init_luxon();
var FieldHandlerUtils = class {
  static async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian26.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // Esta función encuentra los archivos de subsistemas y cuyo estado es 🟢
  // Esta función sale de menuOtro, de registro Tiempo. Revisar si debo sincronizarlas.
  static async findMainFilesWithState(tipo, parametro, plugin) {
    var _a, _b, _c;
    const propertiesTipo = {
      AV: {
        folder: plugin.settings.folder_AreasVida
      },
      AI: {
        folder: plugin.settings.folder_AreasInteres
      },
      PQ: {
        folder: plugin.settings.folder_ProyectosQ
      },
      PGTD: {
        folder: plugin.settings.folder_ProyectosGTD
      },
      TI: {
        folder: plugin.settings.folder_TemasInteres
      },
      RR: {
        folder: plugin.settings.folder_RecursosRecurrentes
      },
      TQ: {
        folder: plugin.settings.folder_Trimestral
      },
      AY: {
        folder: plugin.settings.folder_Anual
      }
      // Puedes continuar añadiendo más casos aquí
    };
    if (!propertiesTipo[tipo]) {
      throw new Error(`Tipo ${tipo} no es v\xE1lido.`);
    }
    const activeFilesWithFrontmatter = [];
    let files, trimestre;
    const folder = propertiesTipo[tipo].folder;
    switch (tipo) {
      case "AV":
        if (!parametro) {
          trimestre = DateTime.now().toFormat("yyyy-Qq");
        } else {
          trimestre = parametro;
        }
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo") && file.name.startsWith(trimestre));
        for (let file of files) {
          let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      case "AI":
      case "TQ":
      case "AY":
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
      default:
        files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder) && !file.path.includes("Plantillas") && !file.path.includes("Archivo"));
        for (let file of files) {
          let metadata = (_c = app.metadataCache.getFileCache(file)) == null ? void 0 : _c.frontmatter;
          if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
            let activeFile = Object.assign({}, metadata);
            activeFile.file = file;
            activeFilesWithFrontmatter.push(activeFile);
          }
        }
        break;
    }
    return activeFilesWithFrontmatter;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandlerBase.ts
var import_obsidian27 = require("obsidian");
var NoteFieldHandlerBase = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.plugin = plugin;
    this.nota = {};
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    return maxId + 1;
  }
  async getFecha() {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().slice(0, 10);
    const currentDay = (/* @__PURE__ */ new Date()).toLocaleDateString("es-ES", { weekday: "long" });
    const formattedDate = `${currentDate} ${currentDay}`;
    this.nota.fecha = formattedDate;
    return formattedDate;
  }
  async getAliases() {
    const id = await this.getId();
    return [`${this.infoSubsistema.typeName} ${id}`];
  }
  async getRename() {
    const fecha = this.nota.fecha;
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.typeName} ${fecha}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian27.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian27.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian27.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AgradecimientosFieldHandler.ts
var AgradecimientosFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Agradecimiento")) {
      fecha = title.split("Agradecimiento ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es el agradecimiento??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getAgradecimientos() {
    let agradecimientos = [];
    let numAgradecimientos = 0;
    let otra;
    do {
      const agradecimiento = await this.prompt("\xBFDe qu\xE9 est\xE1s agradecido?", `Gracias por ${numAgradecimientos}`, false, true);
      agradecimientos.push(agradecimiento);
      numAgradecimientos += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro agradecimiento?");
    } while (otra);
    return agradecimientos;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/ReflexionesFieldHandlers.ts
var import_obsidian29 = require("obsidian");
var ReflexionesFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // getFecha para determinar si la fecha de la que inicia esta en el archivo de origen.
  async getFecha() {
    const activo = app.workspace.getActiveFile();
    let fecha;
    const title = this.tp.file.dynamic_functions.get("title");
    if (title && title.startsWith("Reflexion")) {
      fecha = title.split("Reflexion ")[1];
    } else if (activo.path && (activo == null ? void 0 : activo.path.startsWith("Estructura/Journal/Diario/Notas"))) {
      fecha = activo.basename;
    } else {
      const currentDate = moment().format("YYYY-MM-DD dddd");
      fecha = await this.prompt("\xBFDe qu\xE9 dia es la reflexi\xF3n??", currentDate, false, false);
    }
    this.nota.fecha = fecha;
    return fecha;
  }
  async getReflexion() {
    let reflexiones = [];
    let numReflexiones = 0;
    let otra;
    do {
      const reflexion = await this.prompt("Que estas pensando?", `P${numReflexiones}`, false, true);
      reflexiones.push(reflexion);
      numReflexiones += 1;
      otra = await this.suggester(["S\xED", "No"], [true, false], true, "\xBFQuieres agregar otro p\xE1rrafo?");
    } while (otra);
    return reflexiones;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Base/NoteFieldHandler.ts
var import_obsidian30 = require("obsidian");
init_luxon();
var NoteFieldHandler = class {
  constructor(tp, infoSubsistema, plugin) {
    this.tp = tp;
    this.infoSubsistema = infoSubsistema;
    this.suggester = tp.system.static_functions.get("suggester");
    this.prompt = tp.system.static_functions.get("prompt");
    this.nota = {};
    this.plugin = plugin;
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    const registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id)) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
    this.nota.id = maxId + 1;
    return this.nota.id;
  }
  async getFecha() {
    let fechaActual = DateTime.now();
    fechaActual = fechaActual.setLocale("es");
    fechaActual = fechaActual.toFormat("yyyy-MM-dd EEEE HH:mm");
    this.nota.fecha = fechaActual;
    return fechaActual;
  }
  async getTitulo() {
    const title = await this.prompt(`T\xEDtulo de ${this.infoSubsistema.typeName}:`, "", false, false);
    this.nota.titulo = title;
    return title;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    return "\u{1F7E2}";
  }
  async getNota() {
    return this.nota;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
      let titulo, nivel;
      let padrePGTD = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        let notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian30.Notice("Sin proyecto GTD definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.proyectoQ = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoQ)) {
            this.nota.proyectoQ = notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoQ) {
            this.nota.proyectoQ = [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getProyectoQ() {
    let notaF, titulo, nivel;
    if (!this.nota.asuntoDefinido) {
      let notasF = await FieldHandlerUtils.findMainFilesWithState("PQ", null, this.plugin);
      let padreQ = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un Proyecto Q?`);
      if (padreQ) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto Q es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian30.Notice("Sin proyecto Q definido.");
          titulo = [];
          return;
        } else {
          this.nota.areaInteres = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.areaInteres) {
            this.nota.areaInteres.push(notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.areaVida = [];
          if (notaF == null ? void 0 : notaF.areaVida) {
            if (Array.isArray(notaF.areaVida)) {
              this.nota.areaVida = notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof notaF.areaVida === "string") {
              this.nota.areaVida = notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          titulo = [notaF == null ? void 0 : notaF.titulo];
          this.nota.proyectoGTD = [];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            this.nota.proyectoGTD = notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            this.nota.proyectoGTD = [notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "")];
          }
          this.nota.asuntoDefinido = true;
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoQ;
    }
  }
  async getAreaInteres() {
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Inter\xE9s:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `\xBFQu\xE9 \xC1rea de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian30.Notice("Sin \xC1rea de Inter\xE9s");
          titulo = [];
          nivel = 0;
          return;
        } else {
          titulo = [areaInteres.titulo];
          if (Array.isArray(areaInteres == null ? void 0 : areaInteres.areaInteres)) {
            titulo = titulo.concat(areaInteres.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (areaInteres == null ? void 0 : areaInteres.areaInteres) {
            titulo.push(areaInteres.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          if (areaInteres == null ? void 0 : areaInteres.areaVida) {
            if (Array.isArray(areaInteres.areaVida)) {
              this.nota.areaVida = areaInteres.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
            } else if (typeof areaInteres.areaVida === "string") {
              this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
            }
          } else {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          }
          this.nota.asuntoDefinido = true;
          nivel = parseInt(areaInteres.nivelAI);
        }
      } else {
        titulo = [];
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
  async getAreaVida() {
    let areasVida = {};
    let noAV = {
      file: {
        basename: "No es de ning\xFAn Area de Vida"
      },
      areaVida: "No es de ning\xFAn Area de Vida"
    };
    if (!this.nota.asuntoDefinido) {
      let padreAV = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de un \xC1rea de Vida?`);
      if (padreAV) {
        areasVida = await FieldHandlerUtils.findMainFilesWithState("AV", null, this.plugin);
        areasVida.push(noAV);
        this.nota.areaVida = await this.suggester(areasVida.map((b) => b.file.basename), areasVida.map((b) => b.file.basename), false, `\xBFA qu\xE9 \xC1rea de Vida pertenece $${this.nota.titulo}?:`);
      } else {
        this.nota.areaVida = "No es de ning\xFAn Area de Vida";
      }
      return this.nota.areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  async getRename() {
    debugger;
    const newName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(this.infoSubsistema.folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian30.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian30.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian30.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/CPEFieldHandler.ts
var ContenidoParaEstudioFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/RRFieldHandler.ts
var RecursosRecurrentesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PGTDFieldHandler.ts
var import_obsidian31 = require("obsidian");
var PGTDFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian31.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian31.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian31.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian31.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian31.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian31.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/PQFieldHandler.ts
var import_obsidian32 = require("obsidian");
var PQFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _A, _B, _C, _D;
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let subsistemas, padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      switch (tipoSistema) {
        case "RR":
        case "PGTD":
        case "Ax":
        case "Tx":
        case "CPE":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            this.nota.asuntoDefinido = true;
            let nivel2;
            switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
              default:
              case "PGTD":
              case "PQ":
                if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
                  this.nota.proyectoQ = nombre;
                  this.nota.proyectoGTD = "";
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                  this.nota.proyectoQ = "";
                  if (Array.isArray(nota.frontmatter.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if (nota.frontmatter.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.proyectoQ = "";
                  if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                    this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                  this.nota.proyectoGTD = "";
                  if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                    this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                }
                this.nota.areaInteres = [];
                if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                }
                this.nota.areaVida = "";
                if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
              case "AI":
                debugger;
                if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                }
                if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
                  this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                } else {
                  if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                    this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                  } else {
                  }
                }
              case "AV":
                if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
                  nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                } else {
                  nivel2 = 0;
                }
                this.nota.nivelP = nivel2;
                break;
            }
          } else {
          }
          break;
        case "PQ":
          siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
          if (siAsunto) {
            debugger;
            if (((_r = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _r.areaVida) !== void 0 && nota.frontmatter.areaVida !== "") {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              if (((_s = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _s.type) === "AI" || ((_t = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _t.type) === "AV") {
                siAsunto = false;
              }
              let nivel2;
              switch ((_u = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _u.type) {
                case "PGTD":
                  this.nota.proyectoGTD = [nombre];
                  if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                    this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else if (nota.frontmatter.proyectoGTD) {
                    this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
                  }
                case "AI":
                  if (((_v = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _v.type) === "AI") {
                    this.nota.areaInteres = [nota.frontmatter.file.basename];
                  } else {
                    this.nota.areaInteres = [];
                  }
                  if (Array.isArray((_w = nota.frontmatter) == null ? void 0 : _w.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    } else {
                      this.nota.areaInteres = "";
                    }
                  }
                case "AV":
                case "nAV":
                  if (!isNaN(parseInt((_x = nota.frontmatter) == null ? void 0 : _x.nivelP))) {
                    nivel2 = parseInt(nota.frontmatter.nivelP) + 1;
                  } else {
                    nivel2 = 0;
                  }
                  this.nota.nivelP = nivel2;
                  this.nota.asuntoDefinido = true;
                  break;
                default:
                  new import_obsidian32.Notice("Un Proyecto de Q solo puede iniciar de un AV, AI o PGTD. Asunto no definido.");
                  break;
              }
            } else {
              new import_obsidian32.Notice("Todos los proyectos de Q requieren Area de Vida. Asunto no definido.");
              siAsunto = false;
            }
          } else {
          }
          break;
        case "AI":
          let nivel;
          switch ((_y = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _y.type) {
            case "AI":
            case "AV":
            case "nAV":
              siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
              if (siAsunto) {
                this.nota.asuntoDefinido = true;
                if (((_z = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _z.type) === "AI") {
                  this.nota.areaInteres = [nota.frontmatter.file.basename];
                  if (Array.isArray(nota.frontmatter.areaInteres)) {
                    this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
                  } else {
                    if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                      this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
                    }
                  }
                }
                if ((_A = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _A.areaVida) {
                  if (Array.isArray(nota.frontmatter.areaVida)) {
                    this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
                  } else if (typeof nota.frontmatter.areaVida === "string") {
                    this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
                  }
                } else {
                  this.nota.areaVida = "No es de ning\xFAn Area de Vida";
                }
                if (((_B = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _B.type) === "AI" || ((_C = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _C.type) === "AV") {
                  siAsunto = false;
                }
                if (!isNaN(parseInt((_D = nota.frontmatter) == null ? void 0 : _D.nivelAI))) {
                  nivel = parseInt(nota.frontmatter.nivelAI) + 1;
                } else {
                  nivel = 0;
                }
                this.nota.nivelAI = nivel;
              }
              break;
          }
          break;
        default:
          console.log("Dependiendo de la estructura, getAsunto deberia tener su clasificaci\xF3n. Aqui vas a tener un error.");
          break;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getProyectoGTD() {
    let tipo = this.infoSubsistema.type;
    let notasF = await FieldHandlerUtils.findMainFilesWithState("PGTD", null, this.plugin);
    let notaF, titulo = [];
    let padrePGTD;
    if (!this.nota.asuntoDefinido) {
      padrePGTD = await this.suggester(["Si", "No"], [true, false], false, `${this.nota.titulo} es hijo de un Proyecto GTD?`);
      if (padrePGTD) {
        notaF = await this.suggester(notasF.map((b) => b.titulo), notasF.map((b) => b), false, `\xBFQu\xE9 Proyecto GTD es padre de ${this.nota.titulo}?:`);
        if (notaF === null) {
          new import_obsidian32.Notice("Sin proyecto GTD definido.");
          return [];
        } else {
          this.nota.areaInteres = Array.isArray(notaF == null ? void 0 : notaF.areaInteres) ? notaF.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.areaInteres) ? [notaF.areaInteres.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          this.nota.areaVida = (notaF == null ? void 0 : notaF.areaVida) ? Array.isArray(notaF.areaVida) ? notaF.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "") : notaF.areaVida.replace(/\[\[\s*|\s*\]\]/g, "") : "No es de ning\xFAn Area de Vida";
          this.nota.proyectoQ = Array.isArray(notaF == null ? void 0 : notaF.proyectoQ) ? notaF.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")) : (notaF == null ? void 0 : notaF.proyectoQ) ? [notaF.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "")] : [];
          titulo = [notaF.titulo];
          if (Array.isArray(notaF == null ? void 0 : notaF.proyectoGTD)) {
            titulo = titulo.concat(notaF.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else if (notaF == null ? void 0 : notaF.proyectoGTD) {
            titulo.push(notaF.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
          }
          this.nota.asuntoDefinido = true;
          debugger;
          this.nota.nivelP = !isNaN(parseInt(notaF == null ? void 0 : notaF.nivelP)) ? parseInt(notaF.nivelP) + 1 : 0;
        }
      } else {
        titulo = [];
        this.nota.nivelP = 0;
      }
      return titulo;
    } else {
      return this.nota.proyectoGTD;
    }
  }
  async getRename() {
    let newName, folder;
    debugger;
    let folderAV = Array.isArray(this.nota.areaVida) ? this.nota.areaVida[0] : this.nota.areaVida;
    newName = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.trimestre}/${folderAV}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian32.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian32.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian32.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    switch (tipoSistema) {
      case "AV":
      case "PQ":
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
        break;
      case "OCA":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
        );
        break;
      case "CTI":
        trimestre = await this.suggester(
          ["Q1", "Q2", "Q3", "Q4"],
          [
            `${this.nota.a\u00F1o}-Q1`,
            `${this.nota.a\u00F1o}-Q2`,
            `${this.nota.a\u00F1o}-Q3`,
            `${this.nota.a\u00F1o}-Q4`
          ],
          true,
          `\xBFDe qu\xE9 trimestre del ${this.nota.a\u00F1o} es esta planeaci\xF3n?`
        );
        break;
      default:
        trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.path), false, `Trimestre del ${nombreSistema}:`);
    }
    if (trimestre === null) {
      new import_obsidian32.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/AnotacionesFieldHandler.ts
var import_obsidian33 = require("obsidian");
var AnotacionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getClasificacion() {
    var _a;
    let clasificacion2 = null;
    let tagClasificacion2 = null;
    let clasificacionAX = {};
    let tagsClasificacionAX = [];
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    if (!file) {
      new import_obsidian33.Notice("Archivo no encontrado.");
      return;
    }
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      const suggester = this.tp.system.static_functions.get("suggester");
      tagClasificacion2 = await suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 === "Nuevo") {
        const prompt = this.tp.system.static_functions.get("prompt");
        clasificacion2 = await prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian33.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 === "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        const indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          const newClasificacion = [...clasificacionAX, clasificacion2];
          const newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 !== "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/TransaccionesFieldHandler.ts
var import_obsidian34 = require("obsidian");
var TransaccionesFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getFecha() {
    let fecha;
    let fechaOriginal = await this.prompt(`Confirma la fecha de la transacci\xF3n: `, `${moment().format("YYYY-MM-DD HH:mm")}`, true);
    let fechaMoment = moment(fechaOriginal, "YYYY-MM-DD HH:mm");
    fecha = fechaMoment.format("YYYY-MM-DD dddd HH:mm");
    this.nota.fecha = fecha;
    return fecha;
  }
  async getRename() {
    debugger;
    let fecha = moment(this.nota.fecha, "YYYY-MM-DD dddd HH:mm");
    let fechaY = fecha.format("YYYY");
    let fechaMes = fecha.format("MM - MMMM");
    const newName = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    const folder = `${this.infoSubsistema.folder}/${fechaY}/${fechaMes}`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian34.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian34.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian34.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreasInteresFieldHandler.ts
var import_obsidian35 = require("obsidian");
var AreasInteresFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e;
    let tipoSistema = this.infoSubsistema.type;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      let nivel;
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        this.nota.asuntoDefinido = true;
        if (((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) === "AI") {
          this.nota.areaInteres = [nota.frontmatter.file.basename];
          if (Array.isArray(nota.frontmatter.areaInteres)) {
            this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
          } else {
            if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
              this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
            }
          }
        }
        if ((_b = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _b.areaVida) {
          if (Array.isArray(nota.frontmatter.areaVida)) {
            this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
          } else if (typeof nota.frontmatter.areaVida === "string") {
            this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
        } else {
          this.nota.areaVida = "No es de ning\xFAn Area de Vida";
        }
        if (((_c = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _c.type) === "AI" || ((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.type) === "AV") {
          siAsunto = false;
        }
        if (!isNaN(parseInt((_e = nota.frontmatter) == null ? void 0 : _e.nivelAI))) {
          nivel = parseInt(nota.frontmatter.nivelAI) + 1;
        } else {
          nivel = 0;
        }
        this.nota.nivelAI = nivel;
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    debugger;
    if (this.nota.areaVida != "No es de ning\xFAn Area de Vida") {
      this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.areaVida}/${this.nota.titulo}`);
    }
    return this.nota.aliases;
  }
  async getRename() {
    let newName, folder;
    debugger;
    if (this.nota.areaVida === "No es de ning\xFAn Area de Vida") {
      newName = `${this.infoSubsistema.folder}/Otras/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/Otras`;
    } else {
      newName = `${this.infoSubsistema.folder}/${this.nota.areaVida}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
      folder = `${this.infoSubsistema.folder}/${this.nota.areaVida}`;
    }
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian35.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian35.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian35.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
  async getAreaInteres() {
    let nombreTipo = this.infoSubsistema.typeName;
    let areasInteres = await FieldHandlerUtils.findMainFilesWithState("AI", null, this.plugin);
    let areaInteres, nivel, titulo, padreAI, arrayAI;
    if (!this.nota.asuntoDefinido) {
      padreAI = await this.suggester(["Si", "No"], [true, false], false, ` ${this.nota.titulo} es hijo de otra ${nombreTipo}:`);
      if (padreAI) {
        areaInteres = await this.suggester(areasInteres.map((b) => b.titulo), areasInteres.map((b) => b), false, `Que Area de Inter\xE9s es padre de ${this.nota.titulo}?:`);
        if (areaInteres === null) {
          new import_obsidian35.Notice("Sin Area de Interes");
          titulo = "";
          nivel = 0;
          return;
        } else {
          this.nota.asuntoDefinido = true;
          if (areaInteres.areaVida === null) {
            this.nota.areaVida = "No es de ning\xFAn Area de Vida";
          } else {
            debugger;
            this.nota.areaVida = areaInteres.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
          }
          titulo = areaInteres.titulo;
          nivel = parseInt(areaInteres.nivelAI) + 1;
        }
      } else {
        titulo = "";
        nivel = 0;
      }
      this.nota.nivelAI = nivel;
      return titulo;
    } else {
      return this.nota.areaInteres;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/AreaVidaFieldHandler.ts
var import_obsidian36 = require("obsidian");
var AreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getArea() {
    let area, grupo;
    let tipoArea = this.infoSubsistema.typeName;
    let nuevaArea = false;
    let areasGrupos = this.getDuplasFijas(app, tipoArea);
    let areaGrupo = await this.suggester(areasGrupos.map((b) => b.texto), areasGrupos.map((b) => b.texto), false, `\xBFCu\xE1l ${tipoArea} deseas crear?`);
    if (areaGrupo === null) {
      new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    } else if (areaGrupo == "Nuevo") {
      clasificacion = await this.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
      if (clasificacion === null) {
        new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      tagClasificacion = await this.prompt("\xBFCual es el tag que utilizaras para " + clasificacion + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
      if (tagClasificacion === null) {
        new import_obsidian36.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      }
      nuevaClasificacion = true;
    } else {
      let indice = areasGrupos.findIndex((objeto) => objeto.texto === areaGrupo);
      grupo = areasGrupos[indice].grupo;
      area = areasGrupos[indice].area;
      this.nota.grupo = grupo;
      this.nota.titulo = area;
      return { grupo, titulo: area };
    }
  }
  getDuplasFijas(app2, area) {
    var _a;
    const file = app2.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (file instanceof import_obsidian36.TFile) {
        const metadata = app2.metadataCache.getFileCache(file);
        const arregloResult = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a[area]) || [];
        const resultado = [];
        if (Array.isArray(arregloResult)) {
          arregloResult.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultado.push({ grupo: item[0], area: item[1], texto: item[0] + "/" + item[1] });
            }
          });
        }
        return resultado;
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    return [];
  }
  async getFilename() {
    let fileName;
    if (this.infoSubsistema.hasOwnProperty("fileName")) {
      const partes = this.infoSubsistema.fileName.split(" -- ");
      this.nota.trimestre = partes[0];
      this.nota.titulo = partes[1];
      this.nota.areaVida = partes[1];
      this.nota.grupo = partes[2];
    }
    fileName = `${this.nota.trimestre} - ${this.nota.titulo}`;
    this.nota.filename = fileName;
    return fileName;
  }
  async getTrimestre() {
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(trimestres.map((b) => b.file.basename), trimestres.map((b) => b.file.basename), false, `Trimestre del ${nombreSistema}:`);
    if (trimestre === null) {
      new import_obsidian36.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getNota() {
    return this.nota;
  }
  async getRename() {
    debugger;
    let newName, name, folder;
    newName = `${this.infoSubsistema.folder}/${this.nota.titulo}/${this.nota.filename}.md`;
    folder = `${this.infoSubsistema.folder}/${this.nota.titulo}/`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    debugger;
    try {
      if (existe instanceof import_obsidian36.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian36.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian36.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`Descripci\xF3n del ${this.infoSubsistema.typeName}:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.trimestre}/${this.nota.titulo}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.grupo}/${this.nota.trimestre}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Estructura/nodoAreaVidaFieldHandler.ts
var import_obsidian37 = require("obsidian");
var nodoAreaVidaFieldHandler = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async getId() {
    let maxId = 0;
    const files = app.vault.getMarkdownFiles();
    let registrosExistentes = files.filter((file) => file.path.startsWith(this.infoSubsistema.folder));
    registrosExistentes.forEach((file) => {
      var _a;
      const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.id && !isNaN(metadata.id) && metadata.type && metadata.type === this.infoSubsistema.type) {
        const id = parseInt(metadata.id);
        if (id > maxId)
          maxId = id;
      }
    });
  }
  async getRename() {
    debugger;
    const file = this.tp.file.config.target_file;
    const partes = file.basename.split(" - ");
    this.nota.grupo = partes[0];
    this.nota.areaVida = partes[1];
    const fullPath = file.path;
    const directoryPath = fullPath.substring(0, fullPath.lastIndexOf("/") + 1);
    const fileName = `${directoryPath}${partes[1]}.md`;
    debugger;
    let newName, folder;
    const existe = app.vault.getAbstractFileByPath(fileName);
    debugger;
    try {
      if (existe instanceof import_obsidian37.TFile) {
        let nombreFile = newName == null ? void 0 : newName.split("/");
        let borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [
            true,
            false
          ],
          true,
          `\xBF${nombreFile.pop()} ya existe. Que deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian37.TFile) {
            await app.vault.rename(file, fileName);
            console.log("Archivo renombrado con \xE9xito.");
            return true;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian37.TFile) {
          await app.vault.rename(file, fileName);
          console.log("Archivo renombrado con \xE9xito.");
          return true;
        }
      }
    } catch (error) {
      console.error(error);
      throw error;
    }
  }
  async getNota() {
    return this.nota;
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/ObjCompassAnualFieldHandler.ts
var import_obsidian38 = require("obsidian");
var ObjCompassAnualFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getEstado() {
    return "\u{1F7E1}";
  }
  async getAreaVida() {
    let areaVida;
    if (!this.nota.asuntoDefinido) {
      let nombreArchivo = this.infoSubsistema.fileName;
      const regex = /Objetivo para (.+)\.md$/;
      const resultado = nombreArchivo.match(regex);
      if (resultado && resultado[1]) {
        areaVida = resultado[1];
      } else {
        return null;
      }
      this.nota.areaVida = areaVida;
      return areaVida;
    } else {
      return this.nota.areaVida;
    }
  }
  async getTitulo() {
    let titulo;
    titulo = await this.prompt(`Cual es tu objetivo en ${this.nota.a\u00F1o} para ${this.nota.areaVida}?`, `Voy a `, true, true);
    if (titulo === null) {
      new Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getA\u00F1o() {
    let suggester = this.tp.system.static_functions.get("suggester");
    let tipoSistema = this.infoSubsistema.type;
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    let nombreArchivo = this.infoSubsistema.fileName;
    const regex = /\/(\d{4})/;
    const resultado = nombreArchivo.match(regex);
    if (resultado && resultado[1]) {
      a\u00F1o = resultado[1];
    } else {
      return null;
    }
    if (a\u00F1o === null) {
      new Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFQuieres agregar detalles de tu objetivo?`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getTrimestre() {
    let trimestre;
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    trimestre = await this.suggester(
      ["Q1", "Q2", "Q3", "Q4"],
      [
        `${this.nota.a\u00F1o}-Q1`,
        `${this.nota.a\u00F1o}-Q2`,
        `${this.nota.a\u00F1o}-Q3`,
        `${this.nota.a\u00F1o}-Q4`
      ],
      true,
      `\xBFEn qu\xE9 trimestre del ${this.nota.a\u00F1o} consideras que se puede realizar ese objetivo?`
    );
    if (trimestre === null) {
      new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.trimestre = trimestre;
    return trimestre;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.a\u00F1o}/${this.nota.areaVida}/${this.nota.id}`);
    this.nota.aliases.push(`${this.infoSubsistema.type}/${this.nota.titulo}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/${this.infoSubsistema.type} - ${this.nota.id}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian38.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian38.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian38.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/CompassPlaneacionAnual_FH.ts
var import_obsidian39 = require("obsidian");
var CompassPlaneacionAnual_FH = class extends NoteFieldHandlerBase {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getA\u00F1o() {
    let nombreSistema = this.infoSubsistema.typeName;
    let a\u00F1o;
    let a\u00F1os = await FieldHandlerUtils.findMainFilesWithState("AY", null, this.plugin);
    a\u00F1o = await this.suggester(a\u00F1os.map((b) => b.file.basename), a\u00F1os.map((b) => b.file.basename), false, `Selecciona el a\xF1o que deseas para el ${nombreSistema}:`);
    if (a\u00F1o === null) {
      new import_obsidian39.Notice("Creaci\xF3n cancelada por el usuario.");
      return;
    }
    this.nota.a\u00F1o = a\u00F1o;
    return a\u00F1o;
  }
  async getNota() {
    return this.nota;
  }
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.a\u00F1o}`);
    this.nota.aliases.push(`${this.infoSubsistema.typeName}/${this.nota.id}`);
    return this.nota.aliases;
  }
  async getRename() {
    let folder = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}`;
    const newName = `${this.infoSubsistema.folder}/${this.nota.a\u00F1o}/Planeaci\xF3n ${this.nota.a\u00F1o}.md`;
    await FieldHandlerUtils.crearCarpeta(folder);
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian39.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian39.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian39.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/RepositorioLibros_FH.ts
var import_obsidian40 = require("obsidian");
var RepositorioLibros_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getDescripcion() {
    const descripcion = await this.prompt(`\xBFPorque est\xE1s agregando este libro?:`, "", false, true);
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getEstado() {
    let estado;
    estado = await this.suggester(["\u{1F535} -> Para Archivo - Leido", "\u{1F7E2} -> En Lectura - Comprado", "\u{1F7E1} -> Por Adquirir", "\u{1F534} -> Cancelado"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, `En que estado est\xE1 este libro?`);
    if (estado === null) {
      new import_obsidian40.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return estado;
  }
  async getTitulo() {
    const titulo = this.infoSubsistema.titulo;
    this.nota.titulo = titulo;
    return titulo;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = this.infoSubsistema.activo;
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/Biblioteca_FH.ts
var import_obsidian41 = require("obsidian");
var Biblioteca_FH = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  async getParametrosLibro() {
    let archivoActivo = app.workspace.getActiveFile();
    if (!archivoActivo) {
      console.error("No se pudo obtener el archivo activo.");
      return null;
    }
    debugger;
    const campos = ["id", "titulo", "autor", "publisher", "publicado", "paginas", "isbn10", "isbn13"];
    let parametros = {};
    for (let campo of campos) {
      let valorCampo = await this.getFrontmatterField(archivoActivo.path, campo);
      this.nota[campo] = valorCampo;
      parametros[campo] = valorCampo;
    }
    return parametros;
  }
  async getFrontmatterField(file, field) {
    try {
      const tFile = app.vault.getAbstractFileByPath(file);
      if (tFile instanceof import_obsidian41.TFile) {
        const cache = app.metadataCache.getFileCache(tFile);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.hasOwnProperty(field)) {
          const fieldValue = frontmatter[field];
          return fieldValue !== void 0 && fieldValue !== null && fieldValue !== "" ? fieldValue : null;
        } else {
          console.log(`El campo '${field}' no existe en el frontmatter.`);
          return null;
        }
      } else {
        console.error("El archivo no existe o no es un archivo de texto.");
        return null;
      }
    } catch (err) {
      console.error("Error al consultar el frontmatter", err);
      return null;
    }
  }
  async getFormato() {
    let campo;
    campo = await this.suggester(["Kindle", "Google Books", "PDF", "F\xEDsico"], ["Kindle", "Google Books", "PDF", "F\xEDsico"], false, `\xBFComo tienes este libro?`);
    if (campo === null) {
      new import_obsidian41.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    }
    return campo;
  }
  async getPaginas() {
    let campo, paginas;
    campo = await this.suggester(["Si", "No"], [true, false], false, `\xBFEl libro tiene ${this.nota.paginas} p\xE1ginas?`);
    if (campo === null) {
      new import_obsidian41.Notice("Creaci\xF3n de Libro cancelada por el usuario.");
      return;
    } else if (campo === false) {
      paginas = await this.prompt(`Cuantas p\xE1ginas tiene el libro?`, "", false, false);
      this.nota.paginas = paginas;
      return paginas;
    }
    return this.nota.paginas;
  }
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = true;
      if (siAsunto) {
        debugger;
        this.nota.asuntoDefinido = true;
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            debugger;
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/Anual_FH.ts
var import_obsidian42 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Journals/TrimestralFieldHandler.ts
var import_obsidian43 = require("obsidian");
init_luxon();

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/CampañasFieldHandler.ts
var import_obsidian44 = require("obsidian");
init_luxon();
var Campa\u00F1asFieldHandler = class extends NoteFieldHandler {
  constructor(tp, folder, plugin) {
    super(tp, folder, plugin);
  }
  // Obtiene el trimestre de la campaña desde las notas de trimestres existentes
  async getTrimestre() {
    let trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    const trimestre = await this.suggester(
      trimestres.map((b) => b.file.basename),
      trimestres.map((b) => b.file.basename),
      false,
      "Trimestre al que pertenece esta campa\xF1a:"
    );
    if (trimestre === null) {
      new import_obsidian44.Notice("Selecci\xF3n de trimestre cancelada.");
      return;
    }
    this.nota.trimestre = `[[${trimestre}]]`;
    return this.nota.trimestre;
  }
  // Obtiene el estado de la campaña (status)
  async getStatus() {
    const estados = [
      "Pendiente",
      "Planificando",
      "Dise\xF1o",
      "Revisi\xF3n Interna",
      "Revisi\xF3n Cliente",
      "Publicando",
      "Recoger Indicadores",
      "En pausa",
      "Terminado",
      "Cancelado"
    ];
    const status = await this.suggester(
      estados,
      estados,
      false,
      "Estado actual de la campa\xF1a:"
    );
    if (status === null) {
      new import_obsidian44.Notice("Selecci\xF3n de estado cancelada.");
      return;
    }
    this.nota.status = status;
    return status;
  }
  // Obtiene la fecha de inicio de la campaña
  async getFechaInicio() {
    const fechaActual = DateTime.now().toFormat("yyyy-MM-dd");
    const prompt = this.tp.system.static_functions.get("prompt");
    const fechaInicio = await prompt(
      "Fecha de inicio de la campa\xF1a (YYYY-MM-DD):",
      fechaActual,
      true
    );
    if (fechaInicio === null) {
      new import_obsidian44.Notice("Selecci\xF3n de fecha de inicio cancelada.");
      return;
    }
    this.nota.fechaInicio = fechaInicio;
    return fechaInicio;
  }
  // Obtiene la fecha de fin de la campaña
  async getFechaFin() {
    const fechaInicioObj = this.nota.fechaInicio ? DateTime.fromFormat(this.nota.fechaInicio, "yyyy-MM-dd") : DateTime.now();
    const fechaSugerida = fechaInicioObj.plus({ days: 30 }).toFormat("yyyy-MM-dd");
    const prompt = this.tp.system.static_functions.get("prompt");
    const fechaFin = await prompt(
      "Fecha de fin de la campa\xF1a (YYYY-MM-DD):",
      fechaSugerida,
      true
    );
    if (fechaFin === null) {
      new import_obsidian44.Notice("Selecci\xF3n de fecha de fin cancelada.");
      return;
    }
    this.nota.fechaFin = fechaFin;
    return fechaFin;
  }
  // Obtiene la prioridad de la campaña
  async getPrioridad() {
    const prioridades = ["Baja", "Media", "Alta"];
    const prioridad = await this.suggester(
      prioridades,
      prioridades,
      false,
      "Prioridad de la campa\xF1a:"
    );
    if (prioridad === null) {
      new import_obsidian44.Notice("Selecci\xF3n de prioridad cancelada.");
      return;
    }
    this.nota.prioridad = prioridad;
    return prioridad;
  }
  // Obtiene la URL de los indicadores
  async getIndicadores() {
    const prompt = this.tp.system.static_functions.get("prompt");
    const indicadores = await prompt(
      "URL de los indicadores de la campa\xF1a:",
      "https://",
      true
    );
    if (indicadores === null) {
      new import_obsidian44.Notice("Ingreso de URL de indicadores cancelado.");
      return;
    }
    this.nota.indicadores = indicadores;
    return indicadores;
  }
  // Sobrescribe la función getAliases para ajustarla a los requerimientos específicos
  async getAliases() {
    this.nota.aliases = [];
    this.nota.aliases.push(this.nota.titulo);
    this.nota.aliases.push(`CP-${this.nota.titulo}`);
    this.nota.aliases.push(`CP-${this.nota.id}`);
    return this.nota.aliases;
  }
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  async getRename() {
    const trimestreMatch = this.nota.trimestre.match(/\[\[(.*?)\]\]/);
    const trimestre = trimestreMatch ? trimestreMatch[1] : "Sin-Trimestre";
    const basePath = "Subsistemas/Marketing/Proyectos";
    const folderPath = `${basePath}/${trimestre}`;
    await FieldHandlerUtils.crearCarpeta(folderPath);
    const newName = `${folderPath}/${this.nota.titulo}.md`;
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian44.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir Archivo Actual", "Detener creaci\xF3n del archivo."],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. Qu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian44.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
            if (nuevoArchivo instanceof import_obsidian44.TFile) {
              await app.workspace.getLeaf(true).openFile(nuevoArchivo);
            }
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian44.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const nuevoArchivo = app.vault.getAbstractFileByPath(newName);
          if (nuevoArchivo instanceof import_obsidian44.TFile) {
            await app.workspace.getLeaf(true).openFile(nuevoArchivo);
          }
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/EntregableFieldHandler.ts
var import_obsidian49 = require("obsidian");
init_seleccionModal();
init_seleccionModalTareas();
init_fuzzySelectOrCreate();

// src/modules/modales/seleccionMultipleModal.ts
var import_obsidian45 = require("obsidian");
var SeleccionMultipleModal = class extends import_obsidian45.Modal {
  constructor(app2, opciones, titulo) {
    super(app2);
    this.checkboxes = [];
    this.opciones = opciones;
    this.titleEl.setText(titulo);
  }
  onOpen() {
    const { contentEl } = this;
    const contenedor = contentEl.createEl("div", { cls: "seleccion-multiple-container" });
    this.opciones.forEach((opcion) => {
      const wrapper = contenedor.createEl("div", { cls: "checkbox-wrapper" });
      const checkbox = wrapper.createEl("input", {
        type: "checkbox",
        attr: { id: `opcion-${opcion.nombre}` }
      });
      checkbox.checked = opcion.seleccionado;
      this.checkboxes.push(checkbox);
      wrapper.createEl("label", {
        text: opcion.nombre,
        attr: { for: `opcion-${opcion.nombre}` }
      });
    });
    const botonesContainer = contentEl.createEl("div", { cls: "modal-button-container" });
    const seleccionarTodosBtn = botonesContainer.createEl("button", { text: "Seleccionar todos" });
    seleccionarTodosBtn.addEventListener("click", () => {
      this.checkboxes.forEach((cb) => cb.checked = true);
    });
    const deseleccionarTodosBtn = botonesContainer.createEl("button", { text: "Deseleccionar todos" });
    deseleccionarTodosBtn.addEventListener("click", () => {
      this.checkboxes.forEach((cb) => cb.checked = false);
    });
    const confirmarBtn = contentEl.createEl("button", {
      text: "Confirmar",
      cls: "mod-cta"
    });
    confirmarBtn.addEventListener("click", () => {
      this.confirmarSeleccion();
    });
    contentEl.createEl("style", {
      text: `
                .seleccion-multiple-container {
                    margin-bottom: 1rem;
                    max-height: 300px;
                    overflow-y: auto;
                    padding: 10px;
                }
                .checkbox-wrapper {
                    display: flex;
                    align-items: center;
                    margin-bottom: 8px;
                }
                .checkbox-wrapper label {
                    margin-left: 8px;
                }
                .modal-button-container {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 1rem;
                }
                button.mod-cta {
                    display: block;
                    width: 100%;
                    margin-top: 1rem;
                }
            `
    });
  }
  confirmarSeleccion() {
    const seleccionados = [];
    this.checkboxes.forEach((checkbox, index) => {
      if (checkbox.checked) {
        seleccionados.push(this.opciones[index].nombre);
      }
    });
    if (seleccionados.length === 0) {
      new import_obsidian45.Notice("Debes seleccionar al menos un canal");
      return;
    }
    this.close();
    this.resolver(seleccionados);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/modales/spinnerModal.ts
var import_obsidian46 = require("obsidian");
var SpinnerModal = class extends import_obsidian46.Modal {
  constructor(app2, initialValue = 1, max = 100) {
    super(app2);
    this.resolver = null;
    this.numberDisplay = null;
    const min = 1;
    this.initialValue = Math.max(min, Math.min(max, initialValue));
    this.currentValue = this.initialValue;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("number-selector-modal");
    const container = contentEl.createDiv({ cls: "number-selector-container" });
    container.createEl("h2", { text: "\xBFCu\xE1ntos Hits representa este entregable?" });
    const controlsContainer = container.createDiv({ cls: "controls-container" });
    const decrementBtn = controlsContainer.createEl("button", {
      text: "\u25B2",
      cls: "increment-btn"
    });
    decrementBtn.addEventListener("click", () => this.changeValue(1));
    this.numberDisplay = controlsContainer.createEl("div", {
      text: this.currentValue.toString(),
      cls: "number-display"
    });
    const incrementBtn = controlsContainer.createEl("button", {
      text: "\u25BC",
      cls: "decrement-btn"
    });
    incrementBtn.addEventListener("click", () => this.changeValue(-1));
    const confirmBtn = container.createEl("button", {
      text: "Confirmar",
      cls: "confirm-btn"
    });
    confirmBtn.addEventListener("click", () => this.confirm());
    const cancelBtn = container.createEl("button", {
      text: "Cancelar",
      cls: "cancel-btn"
    });
    cancelBtn.addEventListener("click", () => this.cancel());
    const styleEl = document.createElement("style");
    styleEl.innerHTML = `
            .number-selector-modal {
                text-align: center;
                padding: 20px;
            }
            .number-selector-container {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            .controls-container {
                display: flex;
                align-items: center;
                gap: 15px;
            }
            .number-display {
                font-size: 24px;
                font-weight: bold;
                width: 50px;
                text-align: center;
            }
            .increment-btn, .decrement-btn {
                background: none;
                border: 1px solid #ccc;
                padding: 5px 10px;
                cursor: pointer;
            }
            .confirm-btn, .cancel-btn {
                margin: 0 10px;
                padding: 10px 15px;
                cursor: pointer;
            }
        `;
    document.head.appendChild(styleEl);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolver && this.currentValue === null) {
      this.resolver(null);
    }
  }
  changeValue(direction) {
    if (!this.numberDisplay)
      return;
    let newValue = this.currentValue;
    if (direction > 0) {
      if (newValue < 1) {
        if (newValue === 0.33) {
          newValue = 0.5;
        } else if (newValue === 0.5) {
          newValue = 1;
        }
      } else {
        newValue = newValue + 1;
      }
    } else if (direction < 0) {
      if (newValue > 1) {
        newValue = newValue - 1;
      } else if (newValue === 1) {
        newValue = 0.5;
      } else if (newValue === 0.5) {
        newValue = 0.33;
      } else {
        newValue = 0.33;
      }
    }
    this.currentValue = newValue;
    this.numberDisplay.textContent = newValue.toString();
  }
  confirm() {
    if (this.resolver) {
      this.resolver(this.currentValue);
    }
    this.close();
  }
  cancel() {
    if (this.resolver) {
      this.resolver(null);
    }
    this.close();
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/modales/datePickerModal.ts
var import_obsidian47 = require("obsidian");
init_luxon();
var DatePickerModal = class extends import_obsidian47.Modal {
  constructor(app2, initialDate, format = "yyyy-MM-dd") {
    super(app2);
    this.format = format;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Que d\xEDa se va a publicar la pieza?" });
    this.dateInput = contentEl.createEl("input", { type: "date" });
    if (this.initialDate) {
      const date = DateTime.fromFormat(this.initialDate, this.format);
      this.dateInput.value = date.toISODate();
    } else {
      this.dateInput.value = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    }
    const buttonContainer = contentEl.createEl("div", { cls: "button-container" });
    const cancelButton = buttonContainer.createEl("button", { text: "Cancelar" });
    cancelButton.addEventListener("click", () => {
      this.close();
      this.resolver(null);
    });
    const confirmButton = buttonContainer.createEl("button", { text: "Confirmar" });
    confirmButton.addEventListener("click", () => {
      const selectedDate = this.dateInput.value;
      const formattedDate = DateTime.fromISO(selectedDate).toFormat(this.format);
      this.close();
      this.resolver(formattedDate);
    });
    buttonContainer.style.marginTop = "20px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/modales/pedidosClienteModal.ts
var import_obsidian48 = require("obsidian");
var PedidosClienteModal = class extends import_obsidian48.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("pedidos-cliente-modal");
    this.titleEl.setText("Pedidos al cliente");
    const container = contentEl.createDiv({ cls: "pedidos-cliente-container" });
    container.createEl("h3", { text: "\xBFHay algo que se deba pedir al cliente?" });
    this.textarea = container.createEl("textarea", {
      attr: {
        rows: "6",
        placeholder: "Escribe aqu\xED tus pedidos al cliente..."
      }
    });
    const checkboxContainer = container.createEl("div", { cls: "custom-checkbox-container" });
    this.checkbox = checkboxContainer.createEl("input", {
      attr: {
        type: "checkbox",
        id: "pendientes-checkbox",
        class: "hidden-checkbox"
      }
    });
    const customCheckbox = checkboxContainer.createEl("div", {
      cls: "custom-checkbox"
    });
    const checkboxLabel = checkboxContainer.createEl("label", {
      text: "Marcar como pendiente del cliente",
      attr: {
        for: "pendientes-checkbox",
        class: "checkbox-label"
      }
    });
    this.textarea.addEventListener("input", () => {
      if (this.textarea.value.trim() !== "") {
        this.checkbox.checked = true;
        customCheckbox.classList.add("checked");
      } else {
        this.checkbox.checked = false;
        customCheckbox.classList.remove("checked");
      }
    });
    customCheckbox.addEventListener("click", () => {
      this.checkbox.checked = !this.checkbox.checked;
      if (this.checkbox.checked) {
        customCheckbox.classList.add("checked");
      } else {
        customCheckbox.classList.remove("checked");
      }
    });
    checkboxLabel.addEventListener("click", () => {
      this.checkbox.checked = !this.checkbox.checked;
      if (this.checkbox.checked) {
        customCheckbox.classList.add("checked");
      } else {
        customCheckbox.classList.remove("checked");
      }
    });
    const buttonContainer = container.createEl("div", { cls: "button-container" });
    const cancelarBtn = buttonContainer.createEl("button", {
      text: "Cancelar",
      cls: "mod-secondary"
    });
    cancelarBtn.addEventListener("click", () => this.cancel());
    const confirmarBtn = buttonContainer.createEl("button", {
      text: "Confirmar",
      cls: "mod-cta"
    });
    confirmarBtn.addEventListener("click", () => this.confirm());
    contentEl.createEl("style", {
      text: `
                .pedidos-cliente-modal .pedidos-cliente-container {
                    display: flex;
                    flex-direction: column;
                    gap: 12px;
                    padding: 16px;
                    width: 100%;
                    box-sizing: border-box;
                }
                
                .pedidos-cliente-modal h3 {
                    font-size: 16px;
                    margin: 0 0 8px 0;
                    font-weight: 500;
                }
                
                .pedidos-cliente-modal textarea {
                    width: 100%;
                    min-height: 120px;
                    resize: vertical;
                    padding: 8px;
                    font-size: 14px;
                    line-height: 1.4;
                    border-radius: 4px;
                    margin-bottom: 8px;
                }
                
                /* Estilo para el contenedor del checkbox personalizado */
                .pedidos-cliente-modal .custom-checkbox-container {
                    display: flex;
                    align-items: center;
                    padding: 4px 0;
                    margin-bottom: 8px;
                    cursor: pointer;
                }
                
                /* Ocultar el checkbox real */
                .pedidos-cliente-modal .hidden-checkbox {
                    position: absolute;
                    opacity: 0;
                    cursor: pointer;
                    height: 0;
                    width: 0;
                }
                
                /* Crear un checkbox personalizado */
                .pedidos-cliente-modal .custom-checkbox {
                    width: 18px;
                    height: 18px;
                    border: 1px solid #888;
                    border-radius: 3px;
                    margin-right: 10px;
                    position: relative;
                    flex-shrink: 0;
                    background-color: var(--background-primary, #fff);
                }
                
                /* Estilo para cuando est\xE1 marcado - crear una X */
                .pedidos-cliente-modal .custom-checkbox.checked::before,
                .pedidos-cliente-modal .custom-checkbox.checked::after {
                    content: '';
                    position: absolute;
                    width: 3px;
                    height: 12px;
                    background-color: var(--text-normal, #333);
                    top: 2px;
                }
                
                .pedidos-cliente-modal .custom-checkbox.checked::before {
                    left: 9px;
                    transform: rotate(45deg);
                }
                
                .pedidos-cliente-modal .custom-checkbox.checked::after {
                    left: 9px;
                    transform: rotate(-45deg);
                }
                
                /* Estilo para la etiqueta del checkbox */
                .pedidos-cliente-modal .checkbox-label {
                    font-size: 14px;
                    cursor: pointer;
                    user-select: none;
                    white-space: nowrap;
                }
                
                .pedidos-cliente-modal .button-container {
                    display: flex;
                    gap: 12px;
                    justify-content: flex-end;
                    margin-top: 8px;
                }
                
                .pedidos-cliente-modal .button-container button {
                    padding: 6px 12px;
                    border-radius: 4px;
                    cursor: pointer;
                }
            `
    });
  }
  confirm() {
    const pedidos = this.textarea.value.trim();
    const pendientes = this.checkbox.checked;
    const resolver = this.resolver;
    this.resolver = null;
    this.close();
    resolver({
      pedidos,
      pendientes
    });
  }
  cancel() {
    const resolver = this.resolver;
    this.resolver = null;
    this.close();
    resolver(null);
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    if (this.resolver) {
      this.resolver(null);
      this.resolver = null;
    }
  }
  openAndAwaitSelection() {
    return new Promise((resolve) => {
      this.resolver = resolve;
      this.open();
    });
  }
};

// src/modules/noteLifecycleManager/fieldHandlers/FH Subsistemas/EntregableFieldHandler.ts
var EntregableFieldHandler = class extends NoteFieldHandler {
  constructor(tp, infoSubsistema, plugin) {
    super(tp, infoSubsistema, plugin);
  }
  // Sobrescribimos el método getAsunto para manejar NotionID
  async getAsunto() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let padres = [];
    let activo = app.workspace.getActiveFile();
    let siAsunto = false;
    let nombre = "";
    let nota;
    if (activo != null) {
      nombre = activo.basename;
      nota = app.metadataCache.getFileCache(activo);
      nota.frontmatter = nota.frontmatter || {};
      nota.frontmatter.file = {};
      Object.assign(nota.frontmatter.file, activo);
      padres.unshift(nombre);
      siAsunto = await this.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
      if (siAsunto) {
        this.nota.asuntoDefinido = true;
        let notionID = null;
        for (const key in nota.frontmatter) {
          if (key.startsWith("NotionID-")) {
            notionID = nota.frontmatter[key];
            console.log(`Encontrado NotionID: ${notionID} con clave: ${key}`);
            break;
          }
        }
        if (notionID) {
          this.nota.proyecto = [notionID];
          console.log(`Asignado NotionID al proyecto: ${notionID}`);
        }
        let nivel;
        switch ((_a = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _a.type) {
          default:
          case "PGTD":
          case "PQ":
            if (((_b = nota.frontmatter) == null ? void 0 : _b.type) === "PQ") {
              this.nota.proyectoQ = nombre;
              this.nota.proyectoGTD = "";
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else if (((_c = nota.frontmatter) == null ? void 0 : _c.type) === "PGTD") {
              this.nota.proyectoGTD = [nombre];
              if (Array.isArray(nota.frontmatter.proyectoGTD)) {
                this.nota.proyectoGTD = this.nota.proyectoGTD.concat(nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
              } else if (nota.frontmatter.proyectoGTD) {
                this.nota.proyectoGTD.push(nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
              this.nota.proyectoQ = "";
              if (Array.isArray(nota.frontmatter.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if (nota.frontmatter.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.proyectoQ = "";
              if (Array.isArray((_d = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _d.proyectoQ)) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_e = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _e.proyectoQ) {
                this.nota.proyectoQ = nota.frontmatter.proyectoQ.replace(/\[\[\s*|\s*\]\]/g, "");
              }
              this.nota.proyectoGTD = "";
              if (Array.isArray((_f = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _f.proyectoGTD)) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else if ((_g = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _g.proyectoGTD) {
                this.nota.proyectoGTD = nota.frontmatter.proyectoGTD.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            }
            this.nota.areaInteres = [];
            if (Array.isArray((_h = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _h.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if ((_i = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _i.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              }
            }
            this.nota.areaVida = "";
            if ((_j = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _j.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (!isNaN(parseInt((_k = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _k.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
          case "AI":
            if (((_l = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _l.type) === "AI") {
              this.nota.areaInteres = [nota.frontmatter.file.basename];
            }
            if (Array.isArray((_m = nota.frontmatter) == null ? void 0 : _m.areaInteres)) {
              this.nota.areaInteres = this.nota.areaInteres.concat(nota.frontmatter.areaInteres.map((elemento) => elemento.replace(/\[\[\s*|\s*\]\]/g, "")));
            } else {
              if (nota == null ? void 0 : nota.frontmatter.areaInteres) {
                this.nota.areaInteres.push(nota.frontmatter.areaInteres.replace(/\[\[\s*|\s*\]\]/g, ""));
              } else {
              }
            }
          case "AV":
            if ((_n = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _n.areaVida) {
              if (Array.isArray(nota.frontmatter.areaVida)) {
                this.nota.areaVida = nota.frontmatter.areaVida[0].replace(/\[\[\s*|\s*\]\]/g, "");
              } else if (typeof nota.frontmatter.areaVida === "string") {
                this.nota.areaVida = nota.frontmatter.areaVida.replace(/\[\[\s*|\s*\]\]/g, "");
              }
            } else {
              this.nota.areaVida = "No es de ning\xFAn Area de Vida";
            }
            if (((_o = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _o.type) === "AI" || ((_p = nota == null ? void 0 : nota.frontmatter) == null ? void 0 : _p.type) === "AV") {
              siAsunto = false;
            }
            if (!isNaN(parseInt((_q = nota.frontmatter) == null ? void 0 : _q.nivelP))) {
              nivel = parseInt(nota.frontmatter.nivelP) + 1;
            } else {
              nivel = 0;
            }
            this.nota.nivelP = nivel;
            break;
        }
      } else {
      }
    } else {
      siAsunto = false;
    }
    return { siAsunto, nombre: padres };
  }
  async getTrimestre() {
    var _a;
    const activo = app.workspace.getActiveFile();
    debugger;
    if (activo) {
      const metadata = (_a = app.metadataCache.getFileCache(activo)) == null ? void 0 : _a.frontmatter;
      if (metadata && metadata.type === "Cp") {
        const esContinuacion = await this.suggester(
          ["S\xED", "No"],
          [true, false],
          false,
          `\xBFEste entregable es parte de la campa\xF1a ${activo.basename}?`
        );
        debugger;
        if (esContinuacion && metadata.trimestre) {
          this.nota.trimestre = metadata.trimestre;
          return metadata.trimestre;
        }
      }
    }
    const trimestres = await FieldHandlerUtils.findMainFilesWithState("TQ", null, this.plugin);
    const trimestre = await this.suggester(
      trimestres.map((t) => t.file.basename),
      trimestres.map((t) => t.file.basename),
      false,
      "Selecciona el trimestre para este entregable:"
    );
    if (!trimestre) {
      throw new Error("Debe seleccionar un trimestre para continuar");
    }
    this.nota.trimestre = `[[${trimestre}]]`;
    return `[[${trimestre}]]`;
  }
  async getTipo() {
    const tiposEntregable = [
      "Blog",
      "Correo Electr\xF3nico",
      "Dise\xF1o Personalizado",
      "Entrenamiento",
      "Estudio de caso",
      "Historia",
      "Infograf\xEDa",
      "Pauta",
      "Podcast",
      "Post",
      "Reel",
      "Tarea Avanzada",
      "Video",
      "Webinar"
    ];
    const tipo = await this.suggester(
      tiposEntregable,
      tiposEntregable,
      false,
      "Selecciona el tipo de entregable:"
    );
    if (!tipo) {
      throw new Error("Debe seleccionar un tipo de entregable para continuar");
    }
    this.nota.tipo = tipo;
    return tipo;
  }
  async getCanales() {
    const todosLosCanales = [
      "Whatsapp",
      "Instagram",
      "Facebook",
      "Tik Tok",
      "Sitio Web",
      "Email marketing",
      "Youtube",
      "Twitter",
      "LinkedIn",
      "Otro"
    ];
    let canalesPreseleccionados = [];
    switch (this.nota.tipo) {
      case "Historia":
        canalesPreseleccionados = ["Whatsapp", "Instagram", "Facebook"];
        break;
      case "Post":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Reel":
        canalesPreseleccionados = ["Instagram", "Tik Tok", "Youtube"];
        break;
      case "Video":
        canalesPreseleccionados = ["Youtube"];
        break;
      case "Blog":
        canalesPreseleccionados = ["Sitio Web", "LinkedIn"];
        break;
      case "Pauta":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Correo Electr\xF3nico":
        canalesPreseleccionados = ["Email marketing"];
        break;
      case "Infograf\xEDa":
        canalesPreseleccionados = ["Instagram", "Facebook"];
        break;
      case "Estudio de caso":
        canalesPreseleccionados = ["LinkedIn"];
        break;
      default:
        canalesPreseleccionados = [];
    }
    const opciones = todosLosCanales.map((canal) => {
      return {
        nombre: canal,
        seleccionado: canalesPreseleccionados.includes(canal)
      };
    });
    const multiSelectModal = new SeleccionMultipleModal(this.plugin.app, opciones, "Selecciona los canales para este entregable");
    const canalesSeleccionados = await multiSelectModal.openAndAwaitSelection();
    if (!canalesSeleccionados || canalesSeleccionados.length === 0) {
      this.nota.canales = canalesPreseleccionados;
      return canalesPreseleccionados;
    }
    this.nota.canales = canalesSeleccionados;
    return canalesSeleccionados;
  }
  async getStatus() {
    const estados = [
      "Sin empezar",
      "Dise\xF1ando",
      "Revisi\xF3n Interna",
      "Revisi\xF3n Cliente",
      "Programaci\xF3n parrila",
      "Publicado",
      "Completado",
      "Archivado"
    ];
    const status = await this.suggester(
      estados,
      estados,
      false,
      "Selecciona el estado actual del entregable:"
    );
    if (!status) {
      this.nota.status = "Sin empezar";
      return "Sin empezar";
    }
    this.nota.status = status;
    return status;
  }
  async getPrioridad() {
    const prioridades = ["Baja", "Media", "Alta"];
    const prioridad = await this.suggester(
      prioridades,
      prioridades,
      false,
      "Selecciona la prioridad del entregable:"
    );
    if (!prioridad) {
      this.nota.prioridad = "Media";
      return "Media";
    }
    this.nota.prioridad = prioridad;
    return prioridad;
  }
  async getPublicacion() {
    const modal = new DatePickerModal(this.plugin.app);
    modal.open();
    const selectedDate = await modal.waitForInput();
    if (selectedDate === null) {
      return "";
    }
    this.nota.publicacion = selectedDate;
    return selectedDate;
  }
  async getPiezaNube() {
    const url = await this.prompt(
      "URL de la pieza en la nube (Google Drive, Dropbox, etc.):",
      "https://",
      false,
      false
    );
    this.nota.piezaNube = url || "";
    return url || "";
  }
  async getUrlCanva() {
    const url = await this.prompt(
      "URL del dise\xF1o en Canva:",
      "https://",
      false,
      false
    );
    this.nota.urlCanva = url || "";
    return url || "";
  }
  async getHits() {
    const spinnerModal = new SpinnerModal(this.plugin.app, 1, 1, 1e3);
    const hits = await spinnerModal.openAndAwaitSelection();
    if (hits === null || hits === void 0) {
      this.nota.hits = 1;
      return 1;
    }
    this.nota.hits = hits;
    return hits;
  }
  async getPedidosAlCliente() {
    const pedidosModal = new PedidosClienteModal(this.plugin.app);
    const resultado = await pedidosModal.openAndAwaitSelection();
    if (!resultado) {
      this.nota.pedidosAlCliente = "";
      this.nota.pendientesCliente = false;
      return { pedidos: "", pendientes: false };
    }
    this.nota.pedidosAlCliente = resultado.pedidos;
    this.nota.pendientesCliente = resultado.pendientes;
    return resultado;
  }
  // Método para determinar si el entregable es facturable basado en quién lo realizará
  async getFacturable() {
    const opciones = ["Un tercero", "Andr\xE9s Juli\xE1n Borb\xF3n"];
    const valores = [false, true];
    const realizador = await this.suggester(
      opciones,
      valores,
      false,
      // No es multiselección
      "\xBFQui\xE9n realizar\xE1 este entregable?"
    );
    if (realizador === null) {
      this.nota.facturable = false;
      return false;
    }
    this.nota.facturable = realizador;
    return realizador;
  }
  async getAliases() {
    const aliases = [];
    aliases.push(`${this.nota.titulo}`);
    aliases.push(`EMkt-${this.nota.titulo}`);
    aliases.push(`EMkt-${this.nota.id}`);
    this.nota.aliases = aliases;
    return aliases;
  }
  // Implementación de getRename para la estructura de carpetas basada en trimestres
  async getRename() {
    const folderBase = `${this.infoSubsistema.folder}`;
    const trimestreLimpio = this.nota.trimestre.replace(/\[\[|\]\]/g, "").trim();
    const folderTrimestre = `${folderBase}/${trimestreLimpio}`;
    await FieldHandlerUtils.crearCarpeta(folderBase);
    await FieldHandlerUtils.crearCarpeta(folderTrimestre);
    const newName = `${folderTrimestre}/${this.nota.titulo}.md`;
    const file = this.tp.file.config.target_file;
    const existe = app.vault.getAbstractFileByPath(newName);
    try {
      if (existe instanceof import_obsidian49.TFile) {
        const nombreFile = newName.split("/");
        const borrar = await this.suggester(
          ["Sobreescribir archivo actual", "Detener creaci\xF3n del archivo"],
          [true, false],
          true,
          `\xBF${nombreFile.pop()} ya existe. \xBFQu\xE9 deseas hacer?`
        );
        if (borrar) {
          await app.vault.delete(existe);
          if (file instanceof import_obsidian49.TFile) {
            await app.vault.rename(file, newName);
            console.log("Archivo renombrado con \xE9xito.");
            const newFile = app.vault.getAbstractFileByPath(newName);
            if (newFile instanceof import_obsidian49.TFile) {
              const leaf = app.workspace.getLeaf(true);
              await leaf.openFile(newFile);
            }
            return newName;
          }
        } else {
          console.log("Cancelando la creaci\xF3n del archivo.");
          throw new Error("Proceso cancelado por el usuario.");
        }
      } else {
        if (file instanceof import_obsidian49.TFile) {
          await app.vault.rename(file, newName);
          console.log("Archivo renombrado con \xE9xito.");
          const newFile = app.vault.getAbstractFileByPath(newName);
          if (newFile instanceof import_obsidian49.TFile) {
            const leaf = app.workspace.getLeaf(true);
            await leaf.openFile(newFile);
          }
          return newName;
        }
      }
    } catch (error) {
      console.error("Error al cambiar el nombre", error);
      throw error;
    }
  }
};

// src/modules/noteLifecycleManager/API/starterAPI.ts
var starterAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoSubsistema = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async fillNote(infoSubsistema, campos) {
    this.nota = {};
    let nota;
    Object.assign(this.infoSubsistema, infoSubsistema);
    if (this.infoSubsistema.defined) {
      this.infoSubsistema.folder = this.plugin.settings[infoSubsistema.folder];
      this.infoSubsistema.indice = this.plugin.settings[infoSubsistema.indice];
      Object.assign(this.nota, infoSubsistema);
    }
    let fieldHandler;
    switch (this.infoSubsistema.type) {
      case "Agr":
        fieldHandler = new AgradecimientosFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PGTD":
        fieldHandler = new PGTDFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "PQ":
        fieldHandler = new PQFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Ax":
        fieldHandler = new AnotacionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CPE":
        fieldHandler = new ContenidoParaEstudioFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RR":
        fieldHandler = new RecursosRecurrentesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Tx":
        fieldHandler = new TransaccionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AI":
        fieldHandler = new AreasInteresFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "AV":
        fieldHandler = new AreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "nAV":
        fieldHandler = new nodoAreaVidaFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "OCA":
        fieldHandler = new ObjCompassAnualFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "CAI":
        fieldHandler = new CompassPlaneacionAnual_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "RL":
        fieldHandler = new RepositorioLibros_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "LB":
        fieldHandler = new Biblioteca_FH(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Rx":
        fieldHandler = new ReflexionesFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "Cp":
        fieldHandler = new Campa\u00F1asFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      case "EMkt":
        fieldHandler = new EntregableFieldHandler(this.tp, this.infoSubsistema, this.plugin);
        break;
      default:
        throw new Error(`No se ha definido un manejador de campos para el tipo ${this.infoSubsistema.type}`);
    }
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof fieldHandler[functionName] === "function") {
          this.nota[campo] = await fieldHandler[functionName]();
          nota = await fieldHandler.getNota();
          for (const key in nota) {
            if (!(key in this.nota)) {
              this.nota[key] = nota[key];
            }
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian50.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  // Crear Nota desde template
  async createNote(subsistema) {
    try {
      const templatePath = `Plantillas/${this.plugin.settings[`folder_${subsistema}`]}/Plt - ${subsistema}.md`;
      const templateFile = app.vault.getAbstractFileByPath(templatePath);
      if (!(templateFile instanceof import_obsidian50.TFile)) {
        throw new Error(`El template para "${subsistema}" no se encontr\xF3 o no es un archivo v\xE1lido.`);
      }
      const dtConseq = DateTime.now().toFormat("yyyy-MM-dd HHmmss");
      const filename = `${subsistema} ${dtConseq}`;
      const folder = app.vault.getAbstractFileByPath("Inbox");
      if (!folder) {
        throw new Error(`La carpeta "Inbox" no se encontr\xF3.`);
      }
      const tp = this.getTp();
      let crearNota = tp.file.static_functions.get("create_new");
      if (typeof crearNota !== "function") {
        throw new Error("La funci\xF3n para crear notas no est\xE1 disponible.");
      }
      await crearNota(templateFile, filename, true, folder).basename;
    } catch (error) {
      console.error(error);
      alert(`Error al crear la nota: ${error.message}`);
    }
  }
  async getOtrosAsuntos(subsistemas) {
    let suggester = this.tp.system.static_functions.get("suggester");
    let campo = [];
    for (let subsistema of subsistemas) {
      let incluye = await suggester(["Si", "No"], [true, false], true, `Desea agregar algun ${subsistema} activo como origen?`);
      if (!incluye)
        continue;
      debugger;
      let recursosActivos = await this.activeStructureResources(subsistema);
      let primerAlias = recursosActivos.map((file) => {
        var _a;
        const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
        return metadata && metadata.aliases && metadata.aliases.length > 0 ? metadata.aliases[0] : null;
      }).filter((alias) => alias !== null);
      while (recursosActivos.length > 0) {
        let indiceSeleccionado;
        if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.path), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.path === seleccion);
        } else {
          let seleccion = await suggester(primerAlias, recursosActivos.map((b) => b.basename), false, `${subsistema} activos:`);
          if (!seleccion)
            break;
          indiceSeleccionado = recursosActivos.findIndex((b) => b.basename === seleccion);
        }
        if (indiceSeleccionado !== -1) {
          if (subsistema === "AreasVida" || subsistema === "AreasInteres") {
            campo.push(recursosActivos[indiceSeleccionado].path);
          } else {
            campo.push(recursosActivos[indiceSeleccionado].basename);
          }
          recursosActivos.splice(indiceSeleccionado, 1);
          primerAlias.splice(indiceSeleccionado, 1);
        }
        if (recursosActivos.length === 0)
          break;
        let deseaAgregarOtro = await suggester(["Si", "No"], [true, false], true, `Desea agregar otro ${subsistema} como origen?`);
        debugger;
        if (!deseaAgregarOtro)
          break;
      }
    }
    return campo;
  }
  // FUNCION QUE TRAE TODAS LAS NOTAS ACTIVAS DE LOS SISTEMAS. - Revisar en que la uso...
  async activeStructureResources(typeName) {
    try {
      const files = app.vault.getMarkdownFiles();
      switch (type) {
        case "AreasInteres":
          debugger;
          break;
        default:
          let resourceFolderName = "folder_" + typeName;
          let resourceFolder = this.plugin.settings[resourceFolderName];
          if (!resourceFolder) {
            console.error(`La carpeta "${resourceFolderName}" no existe en la configuraci\xF3n del plugin.`);
            return [];
          }
          let activeResources2 = [];
          const registrosExistentes = files.filter((file) => file.path.startsWith(resourceFolder));
          registrosExistentes.forEach((file) => {
            var _a;
            const metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
            if (metadata && metadata.estado === "\u{1F7E2}") {
              activeResources2.push(file);
            }
          });
          break;
      }
      return activeResources;
    } catch (error) {
      console.error("Error al buscar recursos activos:", error);
      return [];
    }
  }
};

// src/modules/noteLifecycleManager/API/addOnsAPI.ts
var addOnsAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  crearPrevNext(paginas, pagIndice, dv) {
    let pagina = dv.current();
    let indice;
    for (let a = 0; a < paginas.length; a++) {
      if (paginas[a].file.name == pagina.file.name) {
        indice = a;
      }
    }
    let links = [];
    if (indice == 0 && paginas.length == 1) {
      links[0] = "";
      links[1] = "";
    } else if (indice == 0) {
      links[0] = "";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    } else if (indice == paginas.length - 1) {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "";
    } else {
      links[0] = dv.func.link(paginas[indice - 1].file.path, this.determinarTextoEnlace(paginas[indice - 1])) + " \u2B05\uFE0F";
      links[1] = "\u27A1\uFE0F " + dv.func.link(paginas[indice + 1].file.path, this.determinarTextoEnlace(paginas[indice + 1]));
    }
    dv.paragraph(links[0] + " ==" + dv.func.link(pagIndice.file.path, pagIndice.titulo || pagIndice.file.name) + "== " + links[1]);
  }
  determinarTextoEnlace(pagina) {
    if (pagina.titulo) {
      return pagina.titulo;
    } else if (pagina.aliases && pagina.aliases.length > 0) {
      return pagina.aliases[0];
    } else {
      return pagina.file.name;
    }
  }
  // Función para generar el texto de relaciones de una nota
  // Añadir esta función a la clase addOnsAPI en src/modules/noteLifecycleManager/API/addOnsAPI.ts
  // En src/modules/noteLifecycleManager/API/addOnsAPI.ts
  /**
   * Genera texto de relaciones con enlaces funcionales y formateado con CSS
   * @param pagina La página actual obtenida a través de dv.current()
   * @param dv El objeto dataview para acceder a sus funciones
   * @returns Objeto HTML para ser usado con dv.paragraph()
   */
  generarTextoRelaciones(pagina, dv) {
    var _a, _b, _c;
    let texto = `${pagina.typeName || "Entregable"} relacionado a `;
    const relaciones = [];
    if (pagina.asunto && Array.isArray(pagina.asunto)) {
      const asuntoLinks = [];
      for (const entryObj of pagina.asunto) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const asuntoPage = dv.page(path);
            if (asuntoPage && asuntoPage.file) {
              const alias = ((_a = asuntoPage.file.aliases) == null ? void 0 : _a[0]) || asuntoPage.titulo || asuntoPage.file.name;
              asuntoLinks.push(dv.fileLink(asuntoPage.file.path, false, alias));
            } else {
              asuntoLinks.push("asunto no encontrado");
            }
          } catch (e) {
            asuntoLinks.push("asunto no encontrado");
          }
        }
      }
      if (asuntoLinks.length > 0) {
        relaciones.push(`asunto: ${asuntoLinks.join(", ")}`);
      } else {
        relaciones.push("asunto: asunto no encontrado");
      }
    }
    if (pagina.proyectoGTD && (Array.isArray(pagina.proyectoGTD) || typeof pagina.proyectoGTD === "string")) {
      const proyectoLinks = [];
      const proyectoArray = Array.isArray(pagina.proyectoGTD) ? pagina.proyectoGTD : [pagina.proyectoGTD];
      for (const entryObj of proyectoArray) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const proyectoPage = dv.page(path);
            if (proyectoPage && proyectoPage.file) {
              const alias = ((_b = proyectoPage.file.aliases) == null ? void 0 : _b[0]) || proyectoPage.titulo || proyectoPage.file.name;
              proyectoLinks.push(dv.fileLink(proyectoPage.file.path, false, alias));
            }
          } catch (e) {
            if (typeof entryObj === "string" && entryObj.includes("|")) {
              const partes = entryObj.split("|");
              proyectoLinks.push(partes[partes.length - 1].replace("]]", ""));
            } else {
              const pathParts = path.split("/");
              const fileName = pathParts[pathParts.length - 1].replace(".md", "");
              proyectoLinks.push(fileName);
            }
          }
        }
      }
      if (proyectoLinks.length > 0) {
        relaciones.push(`PGTD: ${proyectoLinks.join(", ")}`);
      }
    }
    if (pagina.areaInteres && (Array.isArray(pagina.areaInteres) || typeof pagina.areaInteres === "string")) {
      const areaLinks = [];
      const areaArray = Array.isArray(pagina.areaInteres) ? pagina.areaInteres : [pagina.areaInteres];
      for (const entryObj of areaArray) {
        const path = entryObj.path || entryObj;
        if (typeof path === "string" && path.length > 0) {
          try {
            const areaPage = dv.page(path);
            if (areaPage && areaPage.file) {
              const alias = ((_c = areaPage.file.aliases) == null ? void 0 : _c[0]) || areaPage.titulo || areaPage.file.name;
              areaLinks.push(dv.fileLink(areaPage.file.path, false, alias));
            }
          } catch (e) {
            if (typeof entryObj === "string" && entryObj.includes("|")) {
              const partes = entryObj.split("|");
              areaLinks.push(partes[partes.length - 1].replace("]]", ""));
            } else {
              const pathParts = path.split("/");
              const fileName = pathParts[pathParts.length - 1].replace(".md", "");
              areaLinks.push(fileName);
            }
          }
        }
      }
      if (areaLinks.length > 0) {
        relaciones.push(`AI: ${areaLinks.join(", ")}`);
      }
    }
    if (pagina.areaVida) {
      let areaVidaText = pagina.areaVida;
      if (typeof pagina.areaVida === "string" && pagina.areaVida.includes("[[")) {
        const match2 = pagina.areaVida.match(/\[\[(.*?)\|(.*?)\]\]/);
        if (match2 && match2.length >= 3) {
          areaVidaText = match2[2];
        } else {
          areaVidaText = pagina.areaVida.replace(/\[\[|\]\]/g, "");
        }
      }
      relaciones.push(`AV: ${areaVidaText}`);
    }
    texto += relaciones.join(", ");
    if (pagina.estado) {
      texto += ` en estado ${pagina.estado}`;
    }
    return dv.el("span", texto, { cls: "nota-relaciones" });
  }
  /**
   * Genera un árbol de referencias a la nota actual de forma recursiva
   * @param paginaActual La página actual
   * @param dv Objeto dataview para acceder a sus funciones
   * @param profundidadMaxima Profundidad máxima de recursión (defecto: 3)
   * @param visitadas Set de IDs de páginas ya visitadas para evitar ciclos
   * @param profundidadActual Profundidad actual de recursión
   * @returns Elemento HTML con la estructura de árbol
   */
  generarArbolReferencias(paginaActual, dv, profundidadMaxima = 3, visitadas = /* @__PURE__ */ new Set(), profundidadActual = 0) {
    if (!paginaActual || !paginaActual.file) {
      console.error("Error: paginaActual no tiene las propiedades necesarias", paginaActual);
      return dv.el("div", "Error: No se puede generar el \xE1rbol de referencias.", { cls: "backlinks-tree-error" });
    }
    const contenedor = dv.el("div", "", { cls: "backlinks-tree" });
    if (profundidadActual === 0) {
      const tipoNota = paginaActual.typeName || "Nota";
      const alias = paginaActual.file.aliases && paginaActual.file.aliases.length > 0 ? paginaActual.file.aliases[0] : paginaActual.titulo || paginaActual.file.name;
      const titulo = dv.el("h3", `Referencias a ${tipoNota} "${alias}"`, { cls: "backlinks-tree-title" });
      contenedor.appendChild(titulo);
    }
    if (profundidadActual >= profundidadMaxima) {
      return contenedor;
    }
    visitadas.add(paginaActual.file.path);
    let todasLasPaginas;
    try {
      todasLasPaginas = dv.pages();
    } catch (e) {
      console.error("Error al obtener p\xE1ginas:", e);
      const errorMsg = dv.el("p", "Error al obtener p\xE1ginas de Dataview", { cls: "backlinks-tree-error" });
      contenedor.appendChild(errorMsg);
      return contenedor;
    }
    let referenciasDirectas = [];
    try {
      referenciasDirectas = todasLasPaginas.filter((p) => {
        if (!p.asunto)
          return false;
        const asuntos = Array.isArray(p.asunto) ? p.asunto : [p.asunto];
        for (const asunto of asuntos) {
          if (asunto && typeof asunto === "object" && asunto.path === paginaActual.file.path) {
            return true;
          }
          if (typeof asunto === "string" && asunto.includes(paginaActual.file.path)) {
            return true;
          }
          if (typeof asunto === "string") {
            const aliases = paginaActual.file.aliases || [];
            for (const alias of aliases) {
              if (asunto.includes(alias)) {
                return true;
              }
            }
            if (asunto.includes(paginaActual.file.name)) {
              return true;
            }
          }
        }
        return false;
      });
    } catch (e) {
      console.error("Error al filtrar referencias:", e);
      const errorMsg = dv.el("p", "Error al procesar referencias", { cls: "backlinks-tree-error" });
      contenedor.appendChild(errorMsg);
      return contenedor;
    }
    if (referenciasDirectas.length === 0) {
      if (profundidadActual === 0) {
        const mensaje = dv.el("p", "No se encontraron referencias a esta nota", { cls: "backlinks-tree-empty" });
        contenedor.appendChild(mensaje);
      }
      return contenedor;
    }
    const lista = dv.el("ul", "", { cls: `backlinks-tree-level-${profundidadActual}` });
    for (const referencia of referenciasDirectas) {
      try {
        if (visitadas.has(referencia.file.path)) {
          continue;
        }
        const item = dv.el("li", "", { cls: "backlinks-tree-item" });
        const tipo = referencia.typeName || "Nota";
        const tipoEl = dv.el("span", `[${tipo}] `, { cls: "backlinks-tree-type" });
        item.appendChild(tipoEl);
        let nombreMostrado = "";
        try {
          nombreMostrado = referencia.file.aliases && referencia.file.aliases.length > 0 ? referencia.file.aliases[0] : referencia.titulo || referencia.file.name;
        } catch (e) {
          nombreMostrado = referencia.file.name || "Sin nombre";
        }
        try {
          const enlace = dv.el("a", nombreMostrado, {
            attr: {
              href: referencia.file.path,
              "data-href": referencia.file.path,
              class: "internal-link"
            }
          });
          enlace.addEventListener("click", (event) => {
            event.preventDefault();
            const target = event.target;
            const href = target.getAttribute("data-href");
            if (href) {
              app.workspace.openLinkText(href, "", false);
            }
          });
          item.appendChild(enlace);
        } catch (e) {
          console.error("Error al crear enlace con m\xE9todo primario:", e);
          try {
            const enlace = document.createElement("a");
            enlace.textContent = nombreMostrado;
            enlace.href = `obsidian://open?vault=${encodeURIComponent(app.vault.getName())}&file=${encodeURIComponent(referencia.file.path)}`;
            enlace.classList.add("internal-link");
            item.appendChild(enlace);
          } catch (e2) {
            console.error("Error al crear enlace con m\xE9todo alternativo:", e2);
            const textoPlano = dv.el("span", nombreMostrado);
            item.appendChild(textoPlano);
          }
        }
        try {
          const nuevoVisitadas = /* @__PURE__ */ new Set([...visitadas]);
          nuevoVisitadas.add(referencia.file.path);
          const subReferencias = this.generarArbolReferencias(
            referencia,
            dv,
            profundidadMaxima,
            nuevoVisitadas,
            profundidadActual + 1
          );
          if (subReferencias && subReferencias.nodeType) {
            if (subReferencias.children && subReferencias.children.length > 0) {
              const tieneContenidoUtil = subReferencias.children.length > 1 || subReferencias.children.length === 1 && !subReferencias.children[0].classList.contains("backlinks-tree-title");
              if (tieneContenidoUtil) {
                item.appendChild(subReferencias);
              }
            }
          }
        } catch (e) {
          console.error("Error en la recursi\xF3n para " + referencia.file.path, e);
          const errorMsg = dv.el("span", " (Error al obtener subreferencias)", { cls: "backlinks-tree-error" });
          item.appendChild(errorMsg);
        }
        lista.appendChild(item);
      } catch (e) {
        console.error("Error al procesar referencia:", e);
        continue;
      }
    }
    try {
      if (lista && lista.nodeType) {
        contenedor.appendChild(lista);
      }
    } catch (e) {
      console.error("Error al a\xF1adir lista al contenedor:", e);
      const errorMsg = dv.el("p", "Error al generar estructura de \xE1rbol", { cls: "backlinks-tree-error" });
      contenedor.appendChild(errorMsg);
    }
    return contenedor;
  }
  /**
   * Muestra enlaces sincronizados en Notion desde el frontmatter 
   * que comienzan con el prefijo "link-"
   * @param dv El objeto dataview para acceder a sus funciones
   * @param pagina La página actual (normalmente dv.current())
   * @returns El contenedor con los resultados
   */
  mostrarEnlacesSincronizados(dv, pagina) {
    const contenedor = dv.el("div", "", { cls: "notion-links-container" });
    try {
      const meta = pagina.file.frontmatter;
      if (!meta) {
        const mensaje = dv.el("p", "No se encontr\xF3 frontmatter en esta nota.", { cls: "notion-links-message" });
        contenedor.appendChild(mensaje);
        return contenedor;
      }
      const typeName = meta.typeName || "Elemento";
      const linkFields = Object.entries(meta).filter(([key, value]) => key.startsWith("link-") && typeof value === "string" && value.startsWith("http")).map(([key, value]) => ({
        url: value
      }));
      if (linkFields.length > 0) {
        linkFields.forEach((field) => {
          const parrafo = document.createElement("p");
          parrafo.classList.add("notion-link-item");
          parrafo.textContent = `${typeName} sincronizado en Notion en `;
          const enlace = document.createElement("a");
          enlace.href = field.url;
          enlace.textContent = field.url;
          enlace.target = "_blank";
          enlace.rel = "noopener noreferrer";
          parrafo.appendChild(enlace);
          contenedor.appendChild(parrafo);
        });
      } else {
        const mensaje = dv.el("p", "No se encontraron enlaces sincronizados en Notion.", { cls: "notion-links-message" });
        contenedor.appendChild(mensaje);
      }
    } catch (error) {
      console.error("Error al procesar enlaces sincronizados:", error);
      const errorMsg = dv.el("p", "Error al procesar enlaces sincronizados. Consulta la consola para m\xE1s detalles.", { cls: "notion-links-error" });
      contenedor.appendChild(errorMsg);
    }
    return contenedor;
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var import_obsidian52 = require("obsidian");

// src/modules/moduloRegistroTiempo/modals/cambioHF.ts
var import_obsidian51 = require("obsidian");
var modal_cambioHF = class extends import_obsidian51.Modal {
  constructor(plugin, file) {
    super(plugin.app);
    this.plugin = plugin;
    this.file = file;
  }
  async onOpen() {
    var _a, _b;
    debugger;
    this.containerEl.classList.add("modalInbox");
    const { contentEl } = this;
    debugger;
    const metadata = this.plugin.app.metadataCache.getFileCache(this.file.file);
    const aliases = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) || "Actividad sin alias";
    const horaFinStr = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.horaFinal) ? window.moment(metadata.frontmatter.horaFinal, "YYYY-MM-DD dddd HH:mm").format("YYYY-MM-DDTHH:mm") : "";
    contentEl.createEl("h2", { text: `Cambio hora cierre de registro.` });
    contentEl.createEl("p", { text: `Tarea: "${aliases[0]}"` });
    contentEl.createEl("p", { text: "Hora de cierre registro:" });
    this.horaFinalInput = contentEl.createEl("input", {
      type: "datetime-local",
      value: horaFinStr
    });
    const saveButton = contentEl.createEl("button", { text: "Guardar cambios" });
    saveButton.onclick = () => this.guardarCambios();
  }
  async guardarCambios() {
    const nuevaHoraFinalLocal = this.horaFinalInput.value;
    if (!nuevaHoraFinalLocal) {
      new import_obsidian51.Notice("Por favor, seleccione una hora de cierre.");
      return;
    }
    const nuevaHoraFinal = window.moment(nuevaHoraFinalLocal).format("YYYY-MM-DD dddd HH:mm");
    try {
      debugger;
      let campos = ["fecha", `horaFinal_${nuevaHoraFinal}`, `tiempoTrabajado_${nuevaHoraFinal}`, "estado_\u{1F535}"];
      let resultado = await this.plugin.YAMLUpdaterAPI.actualizarNota(this.file, campos);
      this.close();
      new import_obsidian51.Notice("Hora de Finalizaci\xF3n actualizada correctamente.");
    } catch (error) {
      console.error("Error al guardar cambios en la nota:", error);
      new import_obsidian51.Notice("Error al guardar los cambios en la nota.");
    }
  }
};

// src/modules/noteLifecycleManager/API/YAMLUpdaterAPI.ts
var YAMLUpdaterAPI2 = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.infoNota = {};
    this.nota = {};
    this.tp = this.getTp();
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  async actualizarNota(infoNota, campos) {
    var _a;
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const partes = campo.split("_");
        let campoName, functionName;
        let parametro = null;
        if (partes.length > 1) {
          functionName = `get${partes[0].charAt(0).toUpperCase() + partes[0].slice(1)}`;
          campoName = partes[0];
          parametro = partes[1];
        } else {
          campoName = partes[0];
          functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        }
        let metadata = (_a = app.metadataCache.getFileCache(this.infoNota.file)) == null ? void 0 : _a.frontmatter;
        let valorActualCampo = metadata[campoName] || "Sin definir";
        if (typeof this[functionName] === "function") {
          if (parametro !== null) {
            this.nota[campoName] = await this[functionName](parametro, valorActualCampo);
          } else {
            this.nota[campoName] = await this[functionName]();
          }
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      if (Object.keys(this.nota).length > 0) {
        await this.updateYAMLFields(this.nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian52.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return this.nota;
  }
  async archivarNota(infoNota, campos) {
    let nota = {};
    Object.assign(this.infoNota, infoNota);
    try {
      for (let campo of campos) {
        const functionName = `get${campo.charAt(0).toUpperCase() + campo.slice(1)}`;
        if (typeof this[functionName] === "function") {
          nota[campo] = await this[functionName]();
        } else {
          console.error(`La funci\xF3n ${functionName} no est\xE1 definida.`);
        }
      }
      nota.estado = "\u{1F535}";
      if (Object.keys(nota).length > 0) {
        await this.updateYAMLFields(nota, infoNota.file.path);
      } else {
      }
    } catch (error) {
      console.error("No se pudo crear el objeto de registro.", error);
      new import_obsidian52.Notice("No se pudo crear el objeto de registro.");
      return null;
    }
    return nota;
  }
  async updateYAMLFields(nota, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in nota) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = nota[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log("tp en YAMLUpdaterAPI se ha cargado satisfactoriamente");
    return tp;
  }
  async getFecha(flag, actual) {
    return this.formatearFecha(/* @__PURE__ */ new Date());
  }
  formatearFecha(fecha) {
    const offset2 = fecha.getTimezoneOffset() * 6e4;
    const fechaLocal = new Date(fecha.getTime() - offset2);
    const fechaFormato = fechaLocal.toISOString().split("T")[0];
    const dias = ["Domingo", "Lunes", "Martes", "Mi\xE9rcoles", "Jueves", "Viernes", "S\xE1bado"];
    const diaSemana = dias[fecha.getDay()];
    const horaFormato = fecha.toTimeString().split(" ")[0].substring(0, 5);
    return `${fechaFormato} ${diaSemana} ${horaFormato}`;
  }
  async getHoraFinal(parametro, actual) {
    debugger;
    if (parametro === void 0) {
      return this.formatearFecha(/* @__PURE__ */ new Date());
    } else {
      return parametro;
    }
  }
  async getTiempoTrabajado(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getSecId(flag, actual) {
  }
  async getTitulo(flag, actual) {
    let titulo = await this.tp.system.prompt(`Titulo de este(a) ${this.infoSubsistema.name}`, `${this.infoSubsistema.name} - ${this.nota.id}`, true);
    if (titulo === null) {
      new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.titulo = titulo;
    return titulo;
  }
  async getDescripcion(flag, actual) {
    let prompt = this.tp.system.static_functions.get("prompt");
    let descripcion;
    switch (flag) {
      case "RegistroTiempo":
        descripcion = await prompt("\xBFDetalle del Registro Tiempo:", actual, false, true);
        break;
      default:
        descripcion = await prompt("\xBFQuieres agregar una descripci\xF3n?", ` Esta nota es sobre ${this.nota.titulo}`, false, true);
        break;
    }
    if (descripcion === null) {
      new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
      return;
    }
    this.nota.descripcion = descripcion;
    return descripcion;
  }
  async getAliases(flag, actual) {
    this.nota.aliases = [];
    switch (this.infoSubsistema.type) {
      case "Ax":
        this.nota.aliases.push(`${this.nota.titulo}`);
        this.nota.aliases.push(`${this.infoSubsistema.type} - ${this.nota.titulo}`);
        break;
      case "AV":
      case "AI":
        break;
    }
    return this.nota.aliases;
  }
  async getAsunto(flag, actual) {
    let siAsunto, nombre;
    let activo = app.workspace.getActiveFile();
    if (activo != null) {
      nombre = activo.basename;
      const nota = app.metadataCache.getFileCache(activo);
      siAsunto = await this.tp.system.suggester(["Si", "No"], [true, false], true, nombre + " es origen de " + this.nota.titulo + "?");
    } else {
      siAsunto = false;
      nombre = "";
    }
    this.nota.asunto = {};
    this.nota.asunto.siAsunto = siAsunto;
    this.nota.asunto.nombre = nombre;
    return { siAsunto, nombre };
  }
  async getClasificacion(flag, actual) {
    var _a;
    let clasificacion2, tagClasificacion2, clasificacionAX, tagsClasificacionAX;
    let nuevaClasificacion2 = false;
    const file = app.vault.getAbstractFileByPath(this.pathCampos);
    const frontmatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (frontmatter) {
      clasificacionAX = frontmatter.tituloClasificacionAX || [];
      tagsClasificacionAX = frontmatter.tagsClasificacionAX || [];
      tagClasificacion2 = await this.tp.system.suggester(clasificacionAX, tagsClasificacionAX, false, "\xBFClasificar\xEDas esta nota bajo alguna de las siguientes categor\xEDas?");
      if (tagClasificacion2 === null) {
        new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
        return;
      } else if (tagClasificacion2 == "Nuevo") {
        clasificacion2 = await this.tp.system.prompt("\xBFCual es el nombre de la nueva clasificaci\xF3n que vas a ingresar?", "MiClasificaci\xF3n", true);
        if (clasificacion2 === null) {
          new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        tagClasificacion2 = await this.tp.system.prompt("\xBFCual es el tag que utilizaras para " + clasificacion2 + "?. No utilices espacios en la definici\xF3n del tag.", "nuevoTag", true);
        if (tagClasificacion2 === null) {
          new import_obsidian52.Notice("Creaci\xF3n de nota cancelada por el usuario.");
          return;
        }
        nuevaClasificacion2 = true;
      } else if (tagClasificacion2 == "Ninguna") {
        tagClasificacion2 = "";
        clasificacion2 = "";
      } else {
        let indice = tagsClasificacionAX.indexOf(tagClasificacion2);
        clasificacion2 = clasificacionAX[indice];
      }
    }
    if (nuevaClasificacion2) {
      try {
        await app.fileManager.processFrontMatter(file, (frontmatter2) => {
          let newClasificacion = [...clasificacionAX, clasificacion2];
          let newTagClasificacion = [...tagsClasificacionAX, tagClasificacion2];
          frontmatter2.tituloClasificacionAX = newClasificacion;
          frontmatter2.tagsClasificacionAX = newTagClasificacion;
          console.log("Frontmatter actualizado con \xE9xito");
        });
      } catch (err) {
        console.error("Error al actualizar el frontmatter", err);
      }
    }
    if (tagClasificacion2 != "") {
      tagClasificacion2 = "cl/" + tagClasificacion2;
    }
    this.nota.clasificacionAX = clasificacion2;
    this.nota.tagClasificacionAX = tagClasificacion2;
    return { clase: clasificacion2, tag: tagClasificacion2 };
  }
  // ->
  async getEstado(parametro, actual) {
    debugger;
    let campo;
    if (parametro == void 0) {
      let suggester = this.tp.system.static_functions.get("suggester");
      campo = await suggester(["\u{1F535} -> Completado - Informaci\xF3n", "\u{1F7E2} -> Finalizado", "\u{1F7E1} -> En ejecuci\xF3n", "\u{1F534} -> Detenido"], ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"], false, "Seleccione el nuevo estado:");
      if (campo === null) {
        new import_obsidian52.Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getFilename(flag, actual) {
    switch (this.infoSubsistema.type) {
      case "AV":
      case "AI":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.nota.titulo}/index${this.infoSubsistema.type}`;
        break;
      case "Ax":
        this.nota.fileName = `${this.infoSubsistema.folder}/${this.infoSubsistema.type} - ${this.nota.id}`;
        break;
    }
    return this.nota.fileName;
  }
  async modalCambioHF(nota) {
    debugger;
    let modal = new modal_cambioHF(this.plugin, nota);
    modal.open();
  }
};

// src/modules/noteLifecycleManager/API/menuDiarioAPI.ts
var import_obsidian53 = require("obsidian");
init_luxon();
init_utilsAPI();
init_registroTiempoAPI();
var menuHoyAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA hoy";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "H\xE1bitos",
      "Balance",
      "Registro de Tareas",
      "Notas d\xEDa",
      "Personales"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Balance":
            await this.mostrarBotonBalancePersonal(dv);
            break;
          case "H\xE1bitos":
            await this.mostrarFormularioHabitos(dv);
            break;
          case "Registro de Tareas":
            await this.mostrarBotonRegistroTareas(dv);
            break;
          case "Notas d\xEDa":
            await this.mostrarBotonesNotasD\u00EDa(dv);
            break;
          case "Personales":
            await this.mostrarBotonesNotasPersonales(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian53.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian53.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian53.Notice("Error al actualizar el YAML.");
    }
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian53.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian53.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian53.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian53.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian53.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a, _b;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-registro-diario"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian53.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var import_obsidian55 = require("obsidian");
init_luxon();
init_utilsAPI();

// src/modules/noteLifecycleManager/views/vistaResumenSemanal.ts
var import_obsidian54 = require("obsidian");
init_luxon();
var VistaResumenSemanal = class extends import_obsidian54.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
  }
  getViewType() {
    return "vista-resumen-semanal";
  }
  getDisplayText() {
    return "Resumen Semanal";
  }
  getIcon() {
    return "history";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    const fileCache = this.app.metadataCache.getFileCache(activeFile);
    await this.actualizarVista(fileCache);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(fileCache);
    }, 1e4);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(fileCache) {
    var _a;
    this.contentEl.empty();
    const inicioWStr = (_a = fileCache.frontmatter) == null ? void 0 : _a.inicioW;
    if (!inicioWStr) {
      this.contentEl.setText("La configuraci\xF3n de inicioW no est\xE1 establecida.");
      return;
    }
    const folderDiario = "Estructura/Journal/Diario/Notas";
    const inicioW = DateTime.fromFormat(inicioWStr, "yyyy-MM-dd EEEE", { locale: "es" });
    const finW = inicioW.plus({ days: 6 });
    const archivosDiario = this.app.vault.getFiles().filter((file) => file.path.startsWith(folderDiario) && file.extension === "md");
    const bitacoras = archivosDiario.map((file) => {
      var _a2;
      const fechaArchivo = DateTime.fromISO(file.basename.substring(0, 10));
      const datos = (_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter;
      return {
        archivo: file.basename,
        path: file.path,
        fechaArchivo,
        datos
      };
    }).filter(({ fechaArchivo }) => fechaArchivo >= inicioW && fechaArchivo <= finW).sort((a, b) => a.fechaArchivo.toMillis() - b.fechaArchivo.toMillis());
    let trim = finW.quarter;
    let sem = finW.weekNumber - (finW.quarter - 1) * 13;
    if (sem == 0) {
      sem = 13;
    }
    const titulo = this.contentEl.createEl("h2", { text: `Resumen de la semana ${sem} - Q${trim} / W${finW.toFormat("WW")}.` });
    const subtitulo = this.contentEl.createEl("h3", { text: `Desde el ${inicioW.toFormat("EEEE, DD")} al ${finW.toFormat("EEEE, DD")}` });
    titulo.style.textAlign = "center";
    subtitulo.style.textAlign = "center";
    const table = document.createElement("table");
    table.className = "table-resumenSemanal";
    const thead = document.createElement("thead");
    const headerRow = document.createElement("tr");
    ["D\xEDa", "Resumen"].forEach((headerText) => {
      const th = document.createElement("th");
      th.textContent = headerText;
      headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);
    const tbody = document.createElement("tbody");
    bitacoras.forEach(({ archivo, path, datos }) => {
      const tr = document.createElement("tr");
      const tdArchivo = document.createElement("td");
      const linkEl = document.createElement("a");
      linkEl.textContent = archivo;
      linkEl.href = path;
      linkEl.onclick = async (ev) => {
        ev.preventDefault();
        const file = this.app.vault.getAbstractFileByPath(path);
        if (file instanceof import_obsidian54.TFile) {
          await this.app.workspace.getLeaf(false).openFile(file, { eState: { focus: true } });
        }
      };
      tdArchivo.appendChild(linkEl);
      const tdResumen = document.createElement("td");
      const ul = document.createElement("ul");
      (datos.titulo || ["Sin t\xEDtulo"]).forEach((titulo2) => {
        const li = document.createElement("li");
        li.textContent = titulo2;
        ul.appendChild(li);
      });
      tdResumen.appendChild(ul);
      tr.appendChild(tdArchivo);
      tr.appendChild(tdResumen);
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    this.contentEl.appendChild(table);
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/noteLifecycleManager/API/menuSemanalAPI.ts
var menuSemanalAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarMenu(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Men\xFA Semanal";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.mostrarBotones(dv);
    };
  }
  // Método modificado para adaptarse al contexto del plugin
  async mostrarBotones(dv) {
    dv.container.innerHTML = "";
    const botones = [
      "Resumen diario",
      "Agradecimientos",
      "Creadas",
      "Modificadas",
      "x Fecha",
      "Tareas Cerradas"
    ];
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Resumen diario":
            await this.mostrarResumenDiario(dv);
            break;
          case "Agradecimientos":
            await this.mostrarAgradecimientos(dv);
            break;
          case "Creadas":
            await this.mostrarCreadas(dv);
            break;
          case "Modificadas":
            await this.mostrarModificadas(dv);
            break;
          case "x Fecha":
            await this.mostrarxFecha(dv);
            break;
          case "Tareas Cerradas":
            await this.mostrarTareasCerradas(dv);
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método para agregar el botón de recarga y su lógica (Ejemplo adaptado)
  agregarBotonSalir(dv) {
    const botonRecarga = document.createElement("button");
    botonRecarga.textContent = "Salir";
    botonRecarga.onclick = async () => {
      await this.mostrarMenu(dv);
    };
    return botonRecarga;
  }
  // Método para actualizar campos YAML
  async updateYAMLFields(filePath, YAMLfield, valor) {
    try {
      const file = app.vault.getAbstractFileByPath(filePath);
      if (file instanceof import_obsidian55.TFile) {
        try {
          await app.fileManager.processFrontMatter(file, (frontmatter) => {
            frontmatter[YAMLfield] = valor;
          });
          new import_obsidian55.Notice("YAML actualizado con \xE9xito.");
        } catch (err) {
          console.error("Error al actualizar el frontmatter", err);
        }
      }
    } catch (err) {
      console.error("Archivo no encontrado", err);
      new import_obsidian55.Notice("Error al actualizar el YAML.");
    }
  }
  async mostrarResumenDiario(dv) {
    var _a, _b;
    debugger;
    const activeLeaf = app.workspace.activeLeaf;
    const currentFilePath = (_b = (_a = activeLeaf.view) == null ? void 0 : _a.file) == null ? void 0 : _b.path;
    const newLeaf = await app.workspace.splitActiveLeaf("vertical");
    await newLeaf.setViewState({
      type: "vista-resumen-semanal"
    });
    app.workspace.revealLeaf(newLeaf);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonBalancePersonal(dv) {
    var _a;
    dv.container.innerHTML = "";
    const mensaje = document.createElement("h2");
    mensaje.textContent = "Eval\xFAa el balance de tu vida hoy";
    dv.container.appendChild(mensaje);
    const instrucciones = document.createElement("p");
    instrucciones.textContent = "Eval\xFAa de 1 a 5 cada \xE1rea:";
    dv.container.appendChild(instrucciones);
    const areas = [
      "Productividad",
      "Espiritual",
      "Salud",
      "Rutinas",
      "Vida Social",
      "Familiar",
      "Aprendizajes",
      "Creatividad"
    ];
    const file = app.workspace.getActiveFile();
    let metadata;
    if (file instanceof import_obsidian55.TFile) {
      metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    }
    areas.forEach((area) => {
      const safeName = area.toLowerCase().replace(/ /g, "_");
      const currentVal = metadata && metadata[safeName] ? metadata[safeName] : 0;
      const contenedorArea = document.createElement("div");
      contenedorArea.classList.add("area-evaluacion");
      const label = document.createElement("label");
      label.textContent = area + ": ";
      label.htmlFor = safeName;
      const input = document.createElement("input");
      input.type = "range";
      input.id = safeName;
      input.name = safeName;
      input.min = "1";
      input.max = "5";
      input.value = currentVal.toString();
      const valorLabel = document.createElement("span");
      valorLabel.textContent = input.value;
      input.oninput = () => valorLabel.textContent = input.value;
      contenedorArea.appendChild(label);
      contenedorArea.appendChild(input);
      contenedorArea.appendChild(valorLabel);
      dv.container.appendChild(contenedorArea);
    });
    const botonGuardar = document.createElement("button");
    botonGuardar.textContent = "Guardar";
    botonGuardar.onclick = async () => {
      if (file instanceof import_obsidian55.TFile) {
        for (const area of areas) {
          const safeName = area.toLowerCase().replace(/ /g, "_");
          const inputElement = document.getElementById(safeName);
          const valor = parseInt(inputElement.value, 10);
          await this.updateYAMLFields(file.path, safeName, valor);
        }
        new import_obsidian55.Notice("Balances actualizados con \xE9xito.");
      } else {
        new import_obsidian55.Notice("No se pudo obtener el archivo actual.");
      }
    };
    dv.container.appendChild(botonGuardar);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarFormularioHabitos(dv) {
    dv.container.innerHTML = "";
    const habitos = [
      "Club 5am",
      "Registro Ak\xE1shiko",
      "Gimnasio",
      "Comer Saludable",
      "Leer libro",
      "Escribir bit\xE1cora el mismo d\xEDa",
      "Crear plan d\xEDa siguiente",
      "Me fu\xED a dormir antes de las 10:30pm"
    ];
    const cargarCheckboxesSeleccionados = async () => {
      var _a;
      const file = app.workspace.getActiveFile();
      const fileContent = await app.vault.read(file);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const existingHabits = (frontMatter == null ? void 0 : frontMatter.habitos) || [];
      habitos.forEach((habito) => {
        const container = document.createElement("div");
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = habito;
        checkbox.name = "habitos";
        checkbox.value = habito;
        checkbox.checked = existingHabits.includes(habito);
        const label = document.createElement("label");
        label.htmlFor = habito;
        label.textContent = habito;
        container.appendChild(checkbox);
        container.appendChild(label);
        dv.container.appendChild(container);
      });
    };
    await cargarCheckboxesSeleccionados();
    const guardarBtn = document.createElement("button");
    guardarBtn.textContent = "Guardar";
    guardarBtn.onclick = async () => {
      const file = app.workspace.getActiveFile();
      const checkboxes = Array.from(document.querySelectorAll('input[name="habitos"]:checked'));
      const selectedHabits = checkboxes.map((checkbox) => checkbox.value);
      await this.updateYAMLFields(file.path, "habitos", selectedHabits);
    };
    dv.container.appendChild(guardarBtn);
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  // Método adaptado para mostrarBotonBalancePersonal
  async mostrarBotonRegistroTareas(dv) {
    dv.container.innerHTML = "";
    let botones;
    const utilsAPInstance = new utilsAPI(this.plugin);
    const activo = await utilsAPInstance.buscarRegistrosActivos(app);
    if (activo instanceof import_obsidian55.TFile) {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo", "Cerrar Registro Tiempo"];
    } else {
      botones = ["Cerradas Hoy", "Registros Hoy", "Nuevo Registro Tiempo"];
    }
    botones.forEach((textoBoton) => {
      const boton = document.createElement("button");
      boton.textContent = textoBoton;
      boton.onclick = async () => {
        switch (textoBoton) {
          case "Cerradas Hoy":
            await this.mostrarCerradasHoy(dv);
            break;
          case "Registros Hoy":
            await this.mostrarRegistrosHoy(dv);
            break;
          case "Cerrar Registro Tiempo":
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(activo);
            break;
          case "Nuevo Registro Tiempo":
            const starterAPInstance = new starterAPI(this.plugin);
            await starterAPInstance.createNote("RegistroTiempo");
            break;
          default:
            console.log(`${textoBoton} presionado.`);
            break;
        }
      };
      dv.container.appendChild(boton);
    });
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  async mostrarCerradasHoy(dv) {
    dv.container.innerHTML = "";
    const activo = app.workspace.getActiveFile();
    let fechaActivo = activo == null ? void 0 : activo.basename.split(" ")[0];
    const hoy = new Date(fechaActivo).setHours(0, 0, 0, 0);
    const files = app.vault.getMarkdownFiles();
    let tareasPromesas = files.map(async (file) => {
      var _a;
      let contenido = await app.vault.read(file);
      let tareasExtraidas = extraerTareas(contenido);
      const frontMatter = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const alias = (frontMatter == null ? void 0 : frontMatter.aliases) ? frontMatter.aliases[0] : null;
      const filePath = file.path;
      return {
        filePath,
        alias,
        tareas: tareasExtraidas.filter((tarea) => {
          let fechaTarea = new Date(tarea.completionDate).setHours(0, 0, 0, 0);
          return tarea.completed && tarea.completionDate && fechaTarea === hoy;
        })
      };
    });
    let resultados = await Promise.all(tareasPromesas);
    let totalTareasCerradas = resultados.reduce((total, { tareas }) => total + tareas.length, 0);
    if (totalTareasCerradas > 0) {
      dv.header(3, `Hoy se han cerrado ${totalTareasCerradas} tareas.`);
      const table = document.createElement("table");
      table.classList.add("table");
      table.style.width = "100%";
      const headerRow = document.createElement("tr");
      let headers = ["Nota", "Tareas Cerradas"];
      headers.forEach((headerText) => {
        let header = document.createElement("th");
        header.textContent = headerText;
        header.style.textAlign = "center";
        headerRow.appendChild(header);
      });
      table.appendChild(headerRow);
      resultados.forEach(({ filePath, alias, tareas }) => {
        if (tareas.length > 0) {
          let row = document.createElement("tr");
          let linkCell = document.createElement("td");
          linkCell.style.verticalAlign = "middle";
          let a = document.createElement("a");
          a.setAttribute("href", `obsidian://open?vault=${app.vault.getName()}&file=${encodeURIComponent(filePath)}`);
          a.textContent = alias || filePath;
          linkCell.appendChild(a);
          row.appendChild(linkCell);
          let tasksCell = document.createElement("td");
          let tasksList = document.createElement("ul");
          tareas.forEach((tarea) => {
            let li = document.createElement("li");
            li.textContent = tarea.text;
            tasksList.appendChild(li);
          });
          tasksCell.appendChild(tasksList);
          row.appendChild(tasksCell);
          table.appendChild(row);
        }
      });
      dv.container.appendChild(table);
    } else {
      dv.paragraph("No hay tareas cerradas hoy.");
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
    function extraerTareas(contenido) {
      const tareas = [];
      const lineas = contenido.split("\n");
      for (const linea of lineas) {
        const tareaRegex = /^\s*-\s*\[(x|X| )\]\s*(.+)$/;
        const match2 = tareaRegex.exec(linea);
        if (match2) {
          const completada = match2[1].toLowerCase() === "x";
          let textoTarea = match2[2];
          let fechaCompletitud = null;
          const fechaRegex = /\[completion:: (\d{4}-\d{2}-\d{2})\]/;
          const fechaMatch = fechaRegex.exec(textoTarea);
          if (fechaMatch) {
            fechaCompletitud = fechaMatch[1];
            textoTarea = textoTarea.replace(fechaRegex, "").trim();
          }
          tareas.push({
            text: textoTarea,
            completed: completada,
            completionDate: fechaCompletitud
          });
        }
      }
      return tareas;
    }
  }
  async mostrarRegistrosHoy(dv) {
    var _a;
    dv.container.innerHTML = "";
    const fechaHoy = DateTime.fromFormat(app.workspace.getActiveFile().basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        const startOfDay = horaInicio.startOf("day");
        if (startOfDay.ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += metadata.tiempoTrabajado ? parseInt(metadata.tiempoTrabajado) : 0;
        }
      }
    }
    dv.header(3, "Tiempo registrado hoy: " + Duration.fromMillis(totalDia).toFormat("hh:mm:ss"));
    registrosHoy.sort((a, b) => {
      if (typeof a.frontmatter.horaInicio === "string" && typeof b.frontmatter.horaInicio === "string") {
        try {
          const millisA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          const millisB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toMillis();
          return millisB - millisA;
        } catch (e) {
          console.error("Error parsing dates:", e);
          return 0;
        }
      } else {
        console.warn("Invalid date format for sorting:", a.horaInicio, b.horaInicio);
        return 0;
      }
    });
    if (registrosHoy.length > 0) {
      const table = dv.container.createEl("table", { cls: "dataview table" });
      table.style.width = "100%";
      const header = dv.el("tr", "", table);
      ["Registro", "Descripci\xF3n", "Hora Inicio", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((text) => dv.el("th", text, header));
      registrosHoy.forEach((registro) => {
        const row = dv.el("tr", "", table);
        dv.el("td", dv.func.link(registro.path, registro.frontmatter.aliases[0]), row);
        dv.el("td", registro.frontmatter.descripcion ? registro.frontmatter.descripcion : "Sin descripci\xF3n", row);
        dv.el("td", DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a") + " / " + DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a"), row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          let partes = registro.frontmatter.horaInicio.split(" ");
          let fechaHoraISO = `${partes[0]}T${partes[2]}`;
          let inicio = Date.parse(fechaHoraISO);
          let ahora = Date.now();
          let diferencia = ahora - inicio;
          dv.el("td", Duration.fromMillis(diferencia).toFormat("h:mm"), row);
        } else {
          dv.el("td", Duration.fromMillis(registro.frontmatter.tiempoTrabajado).toFormat("h:mm"), row);
        }
        dv.el("td", registro.frontmatter.estado, row);
        dv.el("td", registro.frontmatter.id, row);
        if (registro.frontmatter.estado === "\u{1F7E2}") {
          dv.el("td", this.createButtonTable("Cerrar", async () => {
            debugger;
            await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
          }), row);
        } else {
          dv.el("td", this.createButtonTable("Retomar", () => {
            this.retomarTarea(registro.frontmatter.id);
          }), row);
        }
      });
    }
    const botonSalir = this.agregarBotonSalir(dv);
    dv.container.appendChild(botonSalir);
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  // Crea la nota desde el templater de RegistroTiempo
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian55.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
};

// src/modules/moduloRegistroTiempo/views/vistaRTActivo.ts
var import_obsidian56 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroActivo = class extends import_obsidian56.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    /**
     * Función para actualizar dinámicamente el tiempo en ejecución
     */
    this.alertaEjecutada25 = false;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-activo";
  }
  getDisplayText() {
    return "Registro Activo";
  }
  getIcon() {
    return "checkmark";
  }
  async onOpen() {
    await this.actualizarVista();
    this.intervalId = setInterval(async () => {
      await this.actualizarVista();
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista() {
    var _a, _b;
    let scrollTop = 0;
    let scrollLeft = 0;
    const oldTableWrapper = this.containerEl.querySelector(".table-wrapper");
    if (oldTableWrapper) {
      scrollTop = oldTableWrapper.scrollTop;
      scrollLeft = oldTableWrapper.scrollLeft;
    }
    this.containerEl.empty();
    this.containerEl.classList.add("registro-tiempo-container");
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let registrosActivos = [];
    for (let file of files) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F7E2}") {
        let registroActivo = { file };
        Object.assign(registroActivo, metadata);
        registrosActivos.push(registroActivo);
      }
    }
    if (registrosActivos.length === 0) {
      const messageContainer = this.containerEl.createEl("div", { cls: "message-container" });
      messageContainer.createEl("p", { text: "No hay ning\xFAn registro de tiempo ejecut\xE1ndose." });
      const botonCrear = messageContainer.createEl("button", { cls: "registro-tiempo-btn" });
      botonCrear.textContent = "+ Registro Tiempo";
      botonCrear.onclick = async () => {
        const starterAPInstance = new starterAPI(this.plugin);
        await starterAPInstance.createNote("RegistroTiempo");
      };
      this.containerEl.appendChild(messageContainer);
      this.containerEl.createEl("div", { cls: "separador" });
    } else if (registrosActivos.length > 0) {
      const registroEnEjecucion = registrosActivos[0];
      const activeContainer = this.containerEl.createEl("div", { cls: "active-time-container" });
      activeContainer.createEl("h4", { text: "Registro de Tiempo en Ejecuci\xF3n", cls: "registro-tiempo-titulo" });
      const aliasContainer = activeContainer.createEl("p", { cls: "registro-alias" });
      const aliasText = registroEnEjecucion.aliases && registroEnEjecucion.aliases[1] ? registroEnEjecucion.aliases[1] : registroEnEjecucion.aliases && registroEnEjecucion.aliases[0] ? registroEnEjecucion.aliases[0] : "Sin alias";
      aliasContainer.innerHTML = `<strong>Alias:</strong> ${aliasText}`;
      const descripcionContainer = activeContainer.createEl("p", { cls: "registro-descripcion" });
      descripcionContainer.innerHTML = `<strong>Descripci\xF3n:</strong> ${registroEnEjecucion.descripcion || "Sin descripci\xF3n"}`;
      const tiempoContainer = activeContainer.createEl("p", { cls: "tiempo-ejecucion", text: "Tiempo transcurrido: Calculando..." });
      this.actualizarTiempoEnEjecucion(tiempoContainer, registroEnEjecucion.horaInicio);
      const botonesContainer = activeContainer.createEl("div", { cls: "registro-botones-container" });
      const changeDescButton = document.createElement("button");
      changeDescButton.innerHTML = "\u270F\uFE0F <span class='button-text'>  Descripci\xF3n</span>";
      changeDescButton.classList.add("change-desc-btn");
      changeDescButton.addEventListener("click", async () => {
        var _a2;
        const nuevaDescripcion = await this.mostrarPrompt("Nueva Descripci\xF3n:", registroEnEjecucion.descripcion || "");
        if (nuevaDescripcion !== null) {
          const file = registroEnEjecucion.file;
          if (!file)
            return;
          const fileContent = await this.app.vault.read(file);
          let frontmatter = ((_a2 = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a2.frontmatter) || {};
          frontmatter.descripcion = nuevaDescripcion;
          const newContent = this.reescribirFrontmatter(fileContent, frontmatter);
          await this.app.vault.modify(file, newContent);
          this.actualizarVista();
        }
      });
      const stopButton = document.createElement("button");
      stopButton.innerHTML = "\u270B\u{1F3FC} <span class='button-text'> Detener Registro</span>";
      stopButton.classList.add("stop-time-btn");
      stopButton.addEventListener("click", async () => {
        try {
          console.log("Bot\xF3n 'Cerrar Tarea' presionado.");
          if (!registroEnEjecucion.file || !(registroEnEjecucion.file instanceof import_obsidian56.TFile)) {
            console.error("No se encontr\xF3 el archivo del registro en ejecuci\xF3n.");
            return;
          }
          await this.registroTiempoAPI.cerrarRegistro(registroEnEjecucion.file);
          console.log("Registro cerrado correctamente.");
          this.actualizarVista();
        } catch (error) {
          console.error("Error al cerrar la tarea:", error);
        }
      });
      botonesContainer.appendChild(changeDescButton);
      botonesContainer.appendChild(stopButton);
      activeContainer.appendChild(botonesContainer);
      activeContainer.appendChild(aliasContainer);
      activeContainer.appendChild(descripcionContainer);
      activeContainer.appendChild(tiempoContainer);
      this.containerEl.appendChild(activeContainer);
    }
    let registrosFinalizados = [];
    for (let file of files) {
      let metadata = (_b = app.metadataCache.getFileCache(file)) == null ? void 0 : _b.frontmatter;
      if ((metadata == null ? void 0 : metadata.estado) === "\u{1F535}") {
        let registroFinalizado = { file };
        Object.assign(registroFinalizado, metadata);
        registrosFinalizados.push(registroFinalizado);
      }
    }
    registrosFinalizados.sort((a, b) => b.id - a.id);
    let top5RegistrosActivos = registrosFinalizados.slice(0, 15);
    if (top5RegistrosActivos.length > 0) {
      const tableWrapper = this.containerEl.createEl("div", { cls: "table-wrapper" });
      const table = tableWrapper.createEl("table", { cls: "styled-table" });
      const header = table.createEl("tr");
      ["Alias", "Descripci\xF3n", "Retomar"].forEach((text) => header.createEl("th", { text }));
      top5RegistrosActivos.forEach((registro) => {
        const row = table.createEl("tr");
        const aliasCell = row.createEl("td");
        const aliasText = registro.aliases && registro.aliases[1] ? registro.aliases[1] : registro.aliases && registro.aliases[0] ? registro.aliases[0] : "Sin alias";
        const aliasLink = aliasCell.createEl("a", {
          text: aliasText,
          cls: "clickable-alias",
          href: "#"
        });
        aliasLink.addEventListener("click", async () => {
          let file = app.vault.getAbstractFileByPath(registro.file.path);
          if (file instanceof import_obsidian56.TFile) {
            await app.workspace.getLeaf(true).openFile(file);
          }
        });
        row.createEl("td", { text: registro.descripcion || "No Definida" });
        const buttonCell = row.createEl("td");
        const button = this.createButtonTable("\u23F1\uFE0F", () => {
          this.registroTiempoAPI.retomarTarea(registro.id);
        });
        button.classList.add("retomar-btn");
        button.setAttribute("aria-label", "Retomar");
        buttonCell.appendChild(button);
      });
      this.containerEl.appendChild(tableWrapper);
      tableWrapper.scrollTop = scrollTop;
      tableWrapper.scrollLeft = scrollLeft;
    } else {
      this.containerEl.createEl("p", { text: "No hay registros finalizados." });
    }
  }
  actualizarTiempoEnEjecucion(element, horaInicio) {
    const extraerHora = (fechaStr) => {
      const match2 = fechaStr.match(/(\d{4}-\d{2}-\d{2})\s+\w+\s+(\d{2}:\d{2})/);
      if (match2) {
        return /* @__PURE__ */ new Date(`${match2[1]}T${match2[2]}:00`);
      }
      return null;
    };
    const inicio = extraerHora(horaInicio);
    if (!inicio) {
      element.textContent = "Tiempo transcurrido: No disponible";
      return;
    }
    const calcularTiempo = () => {
      const ahora = /* @__PURE__ */ new Date();
      const diferencia = Math.floor((ahora.getTime() - inicio.getTime()) / 1e3);
      const horas = Math.floor(diferencia / 3600);
      const minutos = Math.floor(diferencia % 3600 / 60);
      const segundos = diferencia % 60;
      element.textContent = `Tiempo transcurrido: ${horas}h ${minutos}m ${segundos}s`;
      if (diferencia >= 1500) {
        element.classList.add("tiempo-rojo");
      } else {
        element.classList.remove("tiempo-rojo");
      }
    };
    calcularTiempo();
    setInterval(calcularTiempo, 1e3);
  }
  /**
   * Función para mostrar un prompt y obtener un nuevo valor
   */
  async mostrarPrompt(mensaje, valorActual) {
    return new Promise((resolve) => {
      const backdrop = document.createElement("div");
      backdrop.classList.add("prompt-modal-backdrop");
      const modal = document.createElement("div");
      modal.classList.add("prompt-modal");
      const label = document.createElement("label");
      label.textContent = mensaje;
      const input = document.createElement("input");
      input.type = "text";
      input.value = valorActual;
      const buttonContainer = document.createElement("div");
      const aceptar = document.createElement("button");
      aceptar.textContent = "Aceptar";
      aceptar.addEventListener("click", () => {
        resolve(input.value.trim() || null);
        modal.remove();
        backdrop.remove();
      });
      const cancelar = document.createElement("button");
      cancelar.textContent = "Cancelar";
      cancelar.addEventListener("click", () => {
        resolve(null);
        modal.remove();
        backdrop.remove();
      });
      input.addEventListener("keydown", (event) => {
        if (event.key === "Enter") {
          event.preventDefault();
          aceptar.click();
        }
      });
      buttonContainer.appendChild(aceptar);
      buttonContainer.appendChild(cancelar);
      modal.appendChild(label);
      modal.appendChild(input);
      modal.appendChild(buttonContainer);
      document.body.appendChild(backdrop);
      document.body.appendChild(modal);
      input.focus();
    });
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  /**
   * Reescribe el frontmatter en un archivo Markdown, preservando la estructura original.
   */
  reescribirFrontmatter(content, frontmatter) {
    const yamlStart = content.indexOf("---");
    const yamlEnd = content.indexOf("---", yamlStart + 3);
    if (yamlStart === -1 || yamlEnd === -1) {
      return content;
    }
    let nuevoFrontmatter = "---\n";
    for (const key in frontmatter) {
      const value = frontmatter[key];
      if (Array.isArray(value)) {
        nuevoFrontmatter += `${key}:
`;
        value.forEach((item) => {
          if (typeof item === "string" && item.match(/^\[\[.*\]\]$/)) {
            nuevoFrontmatter += `  - "${item}"
`;
          } else {
            nuevoFrontmatter += `  - ${JSON.stringify(item)}
`;
          }
        });
      } else if (typeof value === "string") {
        if (value.match(/^\[\[.*\]\]$/)) {
          nuevoFrontmatter += `${key}: "${value}"
`;
        } else {
          nuevoFrontmatter += `${key}: ${JSON.stringify(value)}
`;
        }
      } else {
        nuevoFrontmatter += `${key}: ${value}
`;
      }
    }
    nuevoFrontmatter += "---\n";
    let contenidoRestante = content.slice(yamlEnd + 3).trimStart();
    return nuevoFrontmatter + (contenidoRestante ? "\n" + contenidoRestante : "");
  }
};

// src/modules/moduloGTD/index.ts
var import_obsidian60 = require("obsidian");

// src/modules/moduloGTD/commands.ts
var import_obsidian59 = require("obsidian");

// src/modules/moduloGTD/inbox.ts
var import_obsidian58 = require("obsidian");
init_luxon();

// src/modules/modales/inboxModal.ts
var import_obsidian57 = require("obsidian");
var BandejaDeEntradaModal = class extends import_obsidian57.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    this.containerEl.classList.add("modalInbox");
    let { contentEl } = this;
    this.titleEl.setText("Bandeja de Entrada");
    let textAreaDiv = contentEl.createEl("div");
    this.inputArea = textAreaDiv.createEl("textarea");
    this.inputArea.setAttribute("placeholder", "Escribe tu tarea aqu\xED...");
    this.inputArea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey && !e.ctrlKey && !e.altKey) {
        e.preventDefault();
        this.submitForm();
      }
    });
    const activeFile = this.app.workspace.getActiveFile();
    const metadata = this.app.metadataCache.getFileCache(activeFile);
    let nameActiveFile = metadata.aliases ? metadata.aliases[0] : activeFile.basename;
    let checkBoxDiv = contentEl.createEl("div");
    this.checkBox = checkBoxDiv.createEl("input", { type: "checkbox" });
    checkBoxDiv.createEl("label", { text: `Guardar en ${nameActiveFile}` }).prepend(this.checkBox);
    const saveButton = checkBoxDiv.createEl("button", { text: "Guardar" });
    saveButton.addEventListener("click", () => this.submitForm());
  }
  submitForm() {
    const text = this.inputArea.value;
    const saveInCurrent = this.checkBox.checked;
    this.close();
    if (this.resolver) {
      this.resolver({ text, saveInCurrent });
    }
  }
  waitForInput() {
    return new Promise((resolve) => {
      this.resolver = resolve;
    });
  }
};

// src/modules/moduloGTD/inbox.ts
async function ingresarBandejaEntrada(plugin) {
  let inboxPath = `${plugin.settings.file_Inbox}.md`;
  let inboxFile = app.vault.getAbstractFileByPath(inboxPath);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian58.Notice("No hay archivo activo");
    return;
  }
  let inbox;
  const modal = new BandejaDeEntradaModal(plugin.app);
  modal.open();
  const { text, saveInCurrent } = await modal.waitForInput();
  if (text.length < 3) {
    new import_obsidian58.Notice("Inbox cancelada");
    return;
  }
  let destino = saveInCurrent ? activeFile : inboxFile;
  let hoy = DateTime.now().toFormat("yyyy-MM-dd");
  let hora = DateTime.now().toFormat("HH:mm");
  inbox = `- [ ] \u{1F9E0} ${text} #inbox [created:: ${hoy}] a las ${hora}
`;
  if (destino instanceof import_obsidian58.TFile) {
    if (destino === inboxFile) {
      insertAtStartUsingProcess(inbox, destino).then(() => {
        new import_obsidian58.Notice("Bandeja de entrada actualizada con \xE9xito.");
      }).catch((error) => {
        debugger;
        console.error(error);
        new import_obsidian58.Notice("Error al agregar contenido al inicio del archivo: " + error.message);
      });
    } else {
      await insertInboxAtCursor(inbox);
    }
  }
}
async function insertInboxAtCursor(inbox) {
  debugger;
  const activeLeaf = app.workspace.activeLeaf;
  if (activeLeaf) {
    const editor = activeLeaf.view.sourceMode.cmEditor;
    const cursor = editor.getCursor();
    editor.replaceRange(inbox, cursor);
  }
}
async function insertAtStartUsingProcess(inbox, file) {
  if (!(file instanceof import_obsidian58.TFile))
    return;
  await app.vault.process(file, (content) => {
    const newContent = inbox + content;
    return newContent;
  });
}

// src/modules/moduloGTD/commands.ts
function registerCommands3(plugin) {
  const inboxCommand = plugin.addCommand({
    id: "ingresar-inbox",
    name: "Ingresar Bandeja de Entrada -> Inbox",
    callback: async () => {
      await ingresarBandejaEntrada(plugin);
    }
  });
  plugin.registeredCommandIdsGTD = plugin.registeredCommandIdsGTD || [];
  plugin.registeredCommandIdsGTD.push(inboxCommand.id);
}
function deactivateCommands3(plugin) {
  if (!plugin.registeredCommandIdsGTD)
    return;
  plugin.registeredCommandIdsGTD.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredCommandIdsGTD = [];
}

// src/modules/moduloGTD/index.ts
var ModuloGTD = class {
  constructor(plugin) {
    this.moduloGTD = null;
    this.plugin = plugin;
  }
  activate() {
    if (this.moduloGTD)
      return;
    registerCommands3(this.plugin);
  }
  deactivate() {
    if (!this.moduloGTD)
      return;
    deactivateCommands3(this.plugin);
    this.moduloGTD = null;
  }
};

// src/modules/noteLifecycleManager/API/subsistemasAPI.ts
var import_obsidian61 = require("obsidian");
var subsistemasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.pathCampos = this.plugin.settings.file_camposCentral + ".md";
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearAV(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAV(dv);
    };
  }
  async mostrarBotonCrearAVTrimestral(dv) {
    dv.container.innerHTML = "";
    const botonMenuHoy = document.createElement("button");
    botonMenuHoy.textContent = "Procesar Areas de Vida del trimestre";
    dv.container.appendChild(botonMenuHoy);
    botonMenuHoy.onclick = async () => {
      await this.procesarAVTrimestre(dv);
    };
  }
  async procesarAV(dv) {
    var _a, _b;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let q = await suggester(
      qCreados.map((b) => b.trimestre),
      qCreados.map((b) => b),
      true,
      `De que trimestre vamos a procesar tus Areas de Vida`
    );
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_b = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _b.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAV()
  async procesarAVTrimestre(dv) {
    var _a;
    let q = {};
    q.trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else {
          debugger;
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.validacionAVQ(fullFolderPath, q, areaVida);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.validacionAVQ(fullFolderPath, q, areaVida);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Fin procesarAVTrimestre()
  //P2 areaVida Q Existe?
  async validacionAVQ(fullFolderPath, q, areaVida) {
    const pathAVQ = `${fullFolderPath}/${q.trimestre} - ${areaVida.av}.md`;
    const fileAVQ = app.vault.getAbstractFileByPath(pathAVQ);
    debugger;
    if (fileAVQ instanceof import_obsidian61.TFile) {
      let suggester = this.plugin.tp.system.static_functions.get("suggester");
      let nextStep = await suggester(
        [
          "Actualizar estado del AV",
          "Borrar y Crear de nuevo el AV",
          "Dejar el AV como est\xE1 "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBF${q.trimestre} ${areaVida.av} ya existe. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          await this.actualizarAVQ(fileAVQ);
          break;
        case "del+cre":
          await this.borrarAVQ(fileAVQ);
          await this.agregarAVQ(areaVida, q.trimestre);
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con ${fileAVQ.basename}`);
          break;
      }
    } else {
      debugger;
      await this.agregarAVQ(areaVida, q.trimestre);
    }
  }
  // P3 Agregar nodoAreaVida?
  async agregarNodoAreaVida(areaVida) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let agregar = await suggester(
      ["Si", "No"],
      [true, false],
      true,
      `\xBFDeseas agregar ${areaVida.av} a tu sistema de gesti\xF3n?`
    );
    if (agregar) {
      const filePath = `Plantillas/${this.plugin.settings[`folder_AreasVida`]}/Plt - nodoAreasVida.md`;
      const template = app.vault.getAbstractFileByPath(filePath);
      if (template instanceof import_obsidian61.TFile) {
        console.log("Archivo nodoAreaVida template encontrado:", template);
      } else {
        console.log("Archivo template nodoAreaVida no encontrado.");
      }
      const filename = areaVida.grupo + " - " + areaVida.av;
      let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
      await this.crearCarpeta(folderPath);
      const folder = app.vault.getAbstractFileByPath(folderPath);
      let crearNota;
      crearNota = this.plugin.tp.file.static_functions.get("create_new");
      try {
        let nota = await crearNota(template, filename, false, folder);
        return true;
      } catch (error) {
        console.error("Error creando NodoAreaVida: ", error);
        return error;
      }
    } else {
      return false;
    }
  }
  async agregarAVQ(areaVida, trimestre) {
    const filePath = `Plantillas/${this.plugin.settings.folder_AreasVida}/Plt - AreasVida.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (!(template instanceof import_obsidian61.TFile)) {
      console.log("Archivo no encontrado.");
      return false;
    }
    console.log("Archivo encontrado:", template);
    const filename = `${trimestre} -- ${areaVida.av} -- ${areaVida.grupo}`;
    let folderPath = `${this.plugin.settings[`folder_AreasVida`]}/${areaVida.av}`;
    const folder = app.vault.getAbstractFileByPath(folderPath);
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    try {
      await crearNota(template, filename, false, folder);
      return true;
    } catch (error) {
      console.error("Error creando AreaVida: ", error);
      return false;
    }
  }
  async borrarAVQ(fileAVQ) {
    console.log(`Logica de borrado de ${fileAVQ.basename}`);
    try {
      if (fileAVQ instanceof import_obsidian61.TFile) {
        await app.vault.delete(fileAVQ);
        console.log(`${fileAVQ.basename} ha sido borrado con \xE9xito.`);
      } else {
        console.error(
          `${fileAVQ.basename} no es un archivo v\xE1lido o no existe.`
        );
      }
    } catch (err) {
      console.error(`Error al intentar borrar ${fileAVQ.basename}:`, err);
    }
  }
  async actualizarAVQ(fileAVQ) {
    console.log(`Logica de actualizaci\xF3n de estado de ${fileAVQ.basename}`);
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let metadataCache = app.metadataCache.getFileCache(fileAVQ);
    let estadoActual = "";
    let nuevoEstado = "";
    if (metadataCache.frontmatter && metadataCache.frontmatter.hasOwnProperty("estado")) {
      estadoActual = metadataCache.frontmatter.estado;
    } else {
      console.log("No se encontr\xF3 el estado actual en el frontmatter.");
      return;
    }
    try {
      nuevoEstado = await suggester(
        ["\u{1F535} -> Archivado", "\u{1F7E2} -> Activo", "\u{1F7E1} -> En Pausa", "\u{1F534} -> Detenido"],
        // opciones para mostrar
        ["\u{1F535}", "\u{1F7E2}", "\u{1F7E1}", "\u{1F534}"],
        // valores a retornar
        false,
        // permite selección múltiple
        `${fileAVQ.basename} est\xE1 ${estadoActual}. Asignar estado:`
        // mensaje
      );
      if (!nuevoEstado) {
        console.log("No se seleccion\xF3 un nuevo estado.");
        return;
      }
      await app.fileManager.processFrontMatter(fileAVQ, (frontmatter) => {
        if (frontmatter.hasOwnProperty("estado")) {
          frontmatter.estado = nuevoEstado;
          console.log("Estado actualizado con \xE9xito a:", nuevoEstado);
        }
      });
    } catch (err) {
      console.error("Error al actualizar el estado en el frontmatter:", err);
    }
  }
  async crearCarpeta(folderPath) {
    try {
      const carpetaExistente = app.vault.getAbstractFileByPath(folderPath);
      if (carpetaExistente instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta '${folderPath}' ya existe.`);
        return;
      }
      await app.vault.createFolder(folderPath);
      console.log(`Carpeta '${folderPath}' creada exitosamente.`);
    } catch (error) {
      console.error(`Error al crear la carpeta '${folderPath}':`, error);
    }
  }
  // PARA PROCESAR LOS COMPASS
  // Función para crear y mostrar el botón de procesar Objetivos de las AV anuales en el proceso de Compass.
  async mostrarBotonCompassAnual(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Anual";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassAnual(dv);
    };
  }
  async mostrarBotonCompassTrimestral(dv) {
    dv.container.innerHTML = "";
    const boton = document.createElement("button");
    boton.textContent = "Procesar Objetivos AV Trimestrales";
    dv.container.appendChild(boton);
    boton.onclick = async () => {
      await this.procesarCompassTrimestral(dv);
    };
  }
  async procesarCompassAnual(dv) {
    var _a;
    let a\u00F1o = dv.current().a\u00F1o;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    debugger;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoAnual(a\u00F1o, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoAnual(a\u00F1o, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Anual
  async procesarCompassTrimestral(dv) {
    var _a;
    debugger;
    let trimestre = dv.current().trimestre;
    const resultadoAV = [];
    const fileCampos = app.vault.getAbstractFileByPath(this.pathCampos);
    try {
      if (fileCampos instanceof import_obsidian61.TFile) {
        const metadata = app.metadataCache.getFileCache(fileCampos);
        const arregloAV = ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.AreasVida) || [];
        if (Array.isArray(arregloAV)) {
          arregloAV.forEach((item) => {
            if (Array.isArray(item) && item.length >= 2) {
              resultadoAV.push({
                grupo: item[0],
                av: item[1],
                texto: item[0] + " / " + item[1]
              });
            }
          });
        }
      }
    } catch (error) {
      console.error("Error obteniendo el archivo de campos:", error);
      throw error;
    }
    const allFiles = app.vault.getMarkdownFiles();
    let basePath = this.plugin.settings.folder_AreasVida;
    for (let areaVida of resultadoAV) {
      const fullFolderPath = `${basePath}/${areaVida.av}`;
      const folder = app.vault.getAbstractFileByPath(fullFolderPath);
      if (folder instanceof import_obsidian61.TFolder) {
        console.log(`La carpeta ${areaVida.av} existe dentro de ${basePath}.`);
        const instancesOfAV = app.vault.getMarkdownFiles().filter(
          (file) => file.path.includes(fullFolderPath) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
        );
        const nodeAVExists = instancesOfAV.some(
          (file) => file.basename === areaVida.av
        );
        if (nodeAVExists) {
          console.log(
            `La nota ${areaVida.av} existe dentro de la carpeta ${areaVida.av}.`
          );
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else {
          console.log(
            `La nota ${areaVida.av} no existe dentro de la carpeta ${areaVida.av}.`
          );
          let nAV = await this.agregarNodoAreaVida(areaVida);
          if (nAV) {
            await this.objetivoTrimestral(trimestre, areaVida.av);
          } else if (nAV == false) {
            continue;
          } else {
            return;
          }
        }
      } else {
        console.log(
          `La carpeta ${areaVida.av} no existe a\xFAn dentro de ${basePath}.`
        );
        let nAV = await this.agregarNodoAreaVida(areaVida);
        if (nAV) {
          await this.objetivoTrimestral(trimestre, areaVida.av);
        } else if (nAV == false) {
          continue;
        } else {
          return;
        }
      }
    }
  }
  // Metodo Procesar Compass Trimestral 
  async objetivoAnual(a\u00F1o, areaVida) {
    var _a;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if ((metadata == null ? void 0 : metadata.a\u00F1o) === a\u00F1o && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${a\u00F1o}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${a\u00F1o}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivo(areaVida, a\u00F1o);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${a\u00F1o}?`
        );
      }
    }
  }
  // Método objetivoAnual.
  async objetivoTrimestral(trimestre, areaVida) {
    var _a, _b;
    debugger;
    const folderObj = this.plugin.settings["folder_ObjCompassAnual"];
    const filesObj = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderObj) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let objCreados = [];
    for (let file of filesObj) {
      debugger;
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      const regex = /\[\[\s*(.*?)\s*\]\]/;
      let fileAV = metadata == null ? void 0 : metadata.areaVida.match(regex)[1];
      const sameAV = fileAV === areaVida;
      if (((_b = metadata == null ? void 0 : metadata.trimestre) == null ? void 0 : _b.path) && typeof (metadata.trimestre.path === "string") && metadata.trimestre.path.includes(trimestre) && sameAV) {
        let objActivo = { file };
        Object.assign(objActivo, metadata);
        objCreados.push(objActivo);
      }
    }
    let prompt = this.plugin.tp.system.static_functions.get("prompt");
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let objetivos = [];
    let deseaAgregarObjetivo;
    if (objCreados.length > 0) {
      let nextStep = await suggester(
        [
          "Agregar Objetivos",
          "Borrar y Crear de nuevo los objetivos",
          "Dejar los objetivos como est\xE1n "
        ],
        ["upd", "del+cre", "continue"],
        true,
        `\xBFYa hay ${objCreados.length} objetivos creados para ${areaVida} en el ${trimestre}. Elige una opci\xF3n:`
      );
      switch (nextStep) {
        case "upd":
          do {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          } while (deseaAgregarObjetivo);
          break;
        case "del+cre":
          await this.borrarObjetivos(objCreados);
          deseaAgregarObjetivo = await suggester(
            ["Si", "No"],
            [true, false],
            true,
            `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
          );
          while (deseaAgregarObjetivo) {
            let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
            deseaAgregarObjetivo = await suggester(
              ["Si", "No"],
              [true, false],
              true,
              `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
            );
          }
          break;
        case "continue":
          console.log(`Continuar sin hacer nada con los objetivos de ${areaVida}`);
          break;
      }
    } else {
      deseaAgregarObjetivo = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFDesea agregar alg\xFAn objetivo para ${areaVida} en ${trimestre}?`
      );
      while (deseaAgregarObjetivo) {
        let objetivo = await this.crearObjetivoTrimestre(areaVida, trimestre);
        objetivos.push([objetivo]);
        deseaAgregarObjetivo = await suggester(
          ["Si", "No"],
          [true, false],
          true,
          `\xBFDesea agregar otro objetivo para ${areaVida} en ${trimestre}?`
        );
      }
    }
  }
  // Método objetivoTrimestral.
  /* 
  ----------------------------------------------------------------
  Método que crea el botón que se agrega en la tabla de proyectos en el 
  Compass Anual, para crear el proyecto a cada Objetivo.
  ----------------------------------------------------------------
  */
  createButtonTable(dv, objetivo) {
    const buttonContainer = dv.el("div", "");
    const button = dv.el("button", "Nuevo Proyecto");
    button.addEventListener("click", async (event) => {
      event.preventDefault();
      await this.crearProyectoObjetivo(dv, objetivo);
    });
    buttonContainer.appendChild(button);
    return buttonContainer;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado por el boton de la tabla del compass anual "Nuevo Proyecto" 
  para crear proyecto a un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoObjetivo(dv, objetivo) {
    debugger;
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    let tipoProyecto = await suggester(
      ["Proyecto GTD", "Proyecto de Q"],
      [true, false],
      true,
      `\xBFEl proyecto ${objetivo.file.name} requiere un Proyecto GTD o Proyecto de Q?`
    );
    let proyecto;
    if (tipoProyecto) {
      proyecto = this.crearProyectoGTD(objetivo);
    } else {
      debugger;
      const regexTrim = /\[?\[?(\d{4}-Q[1-4])\]?\]?/g;
      const trimestre = objetivo.trimestre.path.match(regexTrim);
      const confirmaTrim = await suggester(
        ["Si", "No"],
        [true, false],
        true,
        `\xBFVamos a crear el proyecto ${objetivo.file.name} en el trimestre ${trimestre}?`
      );
      if (!confirmaTrim) {
        const q = await this.establecerTrimestre("objetivo del a\xF1o");
        debugger;
        await this.actualizarYAMLs({ trimestre: `[[${q.trimestre}]]` }, objetivo.file.path);
      }
      proyecto = await this.crearProyectoQ(objetivo);
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que inicializa la creación de la plantilla de objetivo Compass.
  ----------------------------------------------------------------
  */
  async crearObjetivo(areaVida, a\u00F1o) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `${a\u00F1o} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  async crearObjetivoTrimestre(areaVida, trimestre) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ObjCompassAnual"]}/Plt - ObjCompassAnual.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Trimestre ${trimestre} - Objetivo para ${areaVida}`;
    let objetivo = await crearNota(template, filename, false, folder);
    return objetivo;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado desde crearProyectoObjetivo(dv, objetivo)
  Esté método hace parte del proceso de Compass Anual.
  Facilita la creación del un proyecto de Q para un objetivo anual establecido.
  ----------------------------------------------------------------
  */
  async crearProyectoQ(objetivo) {
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosQ"]}/Plt - ProyectosQ.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  async crearProyectoGTD(objetivo) {
    debugger;
    const templatePath = `Plantillas/${this.plugin.settings["folder_ProyectosGTD"]}/Plt - ProyectosGTD.md`;
    const template = app.vault.getAbstractFileByPath(templatePath);
    const folder = app.vault.getAbstractFileByPath("Inbox");
    let crearNota = this.plugin.tp.file.static_functions.get("create_new");
    let filename = `Proyecto para Objetivo Compass Anual - ${objetivo.id}`;
    let proyecto = await crearNota(template, filename, true, folder);
    return proyecto;
  }
  /* 
  ----------------------------------------------------------------
  Metodo invocado en el proceso de Compass Anual, cuando elijo volver
  a crear todos los proyectos de un area de vida para un año.
  ----------------------------------------------------------------
  */
  async borrarObjetivos(objetivos) {
    debugger;
    for (let objetivo of objetivos) {
      try {
        await app.vault.delete(objetivo.file);
        console.log(`Archivo borrado: ${objetivo.file.path}`);
      } catch (error) {
        console.error(`Error al borrar el archivo ${objetivo.file.path}: ${error}`);
      }
    }
  }
  /* 
  ----------------------------------------------------------------
  Metodo que permite para cualquier caso en el que se requiera elegir 
  un trimestre para continuar un proceso, hacer la verificación sobre los
  trimestres que esten creados a partir de la nota TQ.  
  ----------------------------------------------------------------
  */
  async establecerTrimestre(temaTrimestre) {
    var _a;
    const folderQ = this.plugin.settings["folder_Trimestral"];
    const filesQ = app.vault.getMarkdownFiles().filter(
      (file) => file.path.includes(folderQ) && !file.path.includes("Plantillas") && !file.path.includes("Archivo")
    );
    let qCreados = [];
    for (let file of filesQ) {
      let metadata = (_a = app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if ((metadata == null ? void 0 : metadata.type) === "TQ" && (metadata == null ? void 0 : metadata.trimestre)) {
        let qActivo = { file };
        Object.assign(qActivo, metadata);
        qCreados.push(qActivo);
      }
    }
    let suggester = this.plugin.tp.system.static_functions.get("suggester");
    try {
      let q = await suggester(
        qCreados.map((b) => b.trimestre),
        qCreados.map((b) => b),
        true,
        `De que trimestre vamos a procesar tus ${temaTrimestre}`
      );
      if (q === void 0) {
        console.log("Operaci\xF3n cancelada por el usuario.");
        return;
      }
      console.log("El usuario seleccion\xF3:", q);
      return q;
    } catch (error) {
      console.error("Error en el suggester:", error);
    }
  }
  /* 
  ----------------------------------------------------------------
  Con este método puedo actualizar valores en las notas ya existentes.
  Lo utilizo en esta clase, para actualizar el trimestre.
  Esta función solo actualiza, no crea el campos si no existe. 
  ----------------------------------------------------------------
  */
  async actualizarYAMLs(campos, ruta) {
    try {
      const file = app.vault.getAbstractFileByPath(ruta);
      await app.fileManager.processFrontMatter(file, (frontmatter) => {
        for (const campo in campos) {
          if (frontmatter.hasOwnProperty(campo)) {
            frontmatter[campo] = campos[campo];
          }
        }
      });
      console.log("Frontmatter actualizado con \xE9xito");
    } catch (err) {
      console.error("Error al actualizar el frontmatter", err);
    }
  }
};

// src/modules/noteLifecycleManager/views/vistaRegistroDiario.ts
var import_obsidian62 = require("obsidian");
init_luxon();
init_registroTiempoAPI();
var VistaRegistroDiario = class extends import_obsidian62.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    this.plugin = plugin;
    this.plugin = plugin;
    this.registroTiempoAPI = new registroTiempoAPI(this.plugin);
  }
  getViewType() {
    return "vista-registro-diario";
  }
  getDisplayText() {
    return "Registro Diario";
  }
  getIcon() {
    return "file-clock";
  }
  async onOpen() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      this.contentEl.setText("No hay un archivo activo.");
      return;
    }
    await this.actualizarVista(activeFile);
    this.intervalId = window.setInterval(async () => {
      await this.actualizarVista(activeFile);
    }, 5e3);
  }
  onClose() {
    clearInterval(this.intervalId);
  }
  async actualizarVista(activeFile) {
    var _a;
    this.contentEl.empty();
    const fechaHoy = DateTime.fromFormat(activeFile.basename.split(" ")[0], "yyyy-MM-dd", { locale: "es" });
    const folder = this.plugin.settings.folder_RegistroTiempo;
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.includes(folder));
    let totalDia = 0;
    let registrosHoy = [];
    for (let file of files) {
      let metadata = (_a = this.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
      if (metadata == null ? void 0 : metadata.horaInicio) {
        let horaInicio = DateTime.fromFormat(metadata.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
        if (horaInicio.startOf("day").ts === fechaHoy.startOf("day").ts) {
          registrosHoy.push({ path: file.path, frontmatter: metadata });
          totalDia += parseInt(metadata.tiempoTrabajado || "0");
        }
      }
    }
    registrosHoy.sort((a, b) => {
      let fechaA = DateTime.fromFormat(a.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      let fechaB = DateTime.fromFormat(b.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).ts;
      return fechaA - fechaB;
    });
    const titulo = this.contentEl.createEl("h2", { text: `Registros de tiempo del ${fechaHoy.toFormat("EEEE, DD")}.` });
    titulo.style.textAlign = "center";
    const table = this.contentEl.createEl("table", { cls: "table-resumenSemanal" });
    const thead = table.createEl("thead");
    const headerRow = thead.createEl("tr");
    ["Registro", "Descripci\xF3n", "Periodo", "Tiempo", "Estado", "Id", "Acci\xF3n"].forEach((header) => {
      headerRow.createEl("th", { text: header });
    });
    const tbody = table.createEl("tbody");
    registrosHoy.forEach((registro) => {
      const row = tbody.createEl("tr");
      this.fillRowWithData(row, registro);
    });
    this.contentEl.appendChild(table);
  }
  fillRowWithData(row, registro) {
    const tdArchivo = row.createEl("td");
    const linkEl = document.createElement("a");
    linkEl.textContent = registro.frontmatter.aliases[0];
    linkEl.href = "#";
    linkEl.addEventListener("click", async (ev) => {
      ev.preventDefault();
      const file = this.app.vault.getAbstractFileByPath(registro.path);
      if (file instanceof import_obsidian62.TFile) {
        await this.app.workspace.getLeaf(true).openFile(file, { focus: true });
      }
    });
    tdArchivo.appendChild(linkEl);
    row.createEl("td", { text: registro.frontmatter.descripcion });
    row.createEl("td", { text: `${DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")} / ${DateTime.fromFormat(registro.frontmatter.horaFinal, "yyyy-MM-dd EEEE HH:mm", { locale: "es" }).toFormat("h:mm a")}` });
    const tdPeriodo = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      let ahora = DateTime.local();
      let inicio = DateTime.fromFormat(registro.frontmatter.horaInicio, "yyyy-MM-dd EEEE HH:mm", { locale: "es" });
      let duracion = ahora.diff(inicio, ["days", "hours", "minutes"]);
      tdPeriodo.textContent = this.formatDuration(duracion);
    } else {
      let tiempoTrabajado = this.formatDuration(registro.frontmatter.tiempoTrabajado);
      tdPeriodo.textContent = tiempoTrabajado;
    }
    row.createEl("td", { text: registro.frontmatter.estado });
    row.createEl("td", { text: registro.frontmatter.id });
    const actionCell = row.createEl("td");
    if (registro.frontmatter.estado === "\u{1F7E2}") {
      actionCell.appendChild(this.createButtonTable("Cerrar", async () => {
        await this.registroTiempoAPI.cerrarRegistro(registro.frontmatter.id);
      }));
    } else {
      actionCell.appendChild(this.createButtonTable("Retomar", () => {
        this.retomarTarea(registro.frontmatter.id);
      }));
    }
  }
  // Función auxiliar para formatear la duración de Luxon a un formato legible
  formatDuration(ms) {
    if (ms === null || ms === void 0 || isNaN(ms)) {
      return "No definido";
    } else {
      let minutos = Math.floor(ms / (1e3 * 60));
      let horas = Math.floor(minutos / 60);
      minutos = minutos % 60;
      let dias = Math.floor(horas / 24);
      horas = horas % 24;
      if (dias > 0) {
        return `${dias} d ${horas} h ${minutos} min`;
      } else if (horas > 0) {
        return `${horas} h ${minutos} min`;
      } else {
        return `${minutos} min`;
      }
    }
  }
  createButtonTable(buttonText, onClickCallback) {
    const button = document.createElement("button");
    button.textContent = buttonText;
    button.type = "button";
    button.classList.add("your-button-class");
    button.addEventListener("click", onClickCallback);
    return button;
  }
  async retomarTarea(id) {
    debugger;
    const filePath = `Plantillas/${this.plugin.settings[`folder_RegistroTiempo`]}/Plt - RegistroTiempo.md`;
    const template = app.vault.getAbstractFileByPath(filePath);
    if (template instanceof import_obsidian62.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    const filename = "Retomar " + id;
    const folder = app.vault.getAbstractFileByPath("Inbox");
    const tp = this.getTp();
    let crearNota = tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
  getTp() {
    if (!this.plugin || !this.plugin.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.plugin.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.file) {
      console.error("No se pudo acceder al objeto de funciones actuales de Templater.");
      return;
    }
    console.log('tp con propiedades "file" se ha cargado satisfactoriamente');
    return tp;
  }
  // Opcional: Implementa onClose si necesitas limpieza al cerrar la vista.
};

// src/modules/GPThora/GPThora.ts
var import_obsidian63 = require("obsidian");
var GPThora = class {
  constructor(app2) {
    this.app = app2;
  }
  onload() {
    this.app.commands.addCommand({
      id: "show-local-time",
      name: "Mostrar Hora Local",
      callback: () => this.showLocalTimeModal()
    });
  }
  showLocalTimeModal() {
    const modal = new LocalTimeModal(this.app);
    modal.open();
  }
};
var LocalTimeModal = class extends import_obsidian63.Modal {
  constructor(app2) {
    super(app2);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    const now2 = /* @__PURE__ */ new Date();
    const hours = now2.getHours() % 12 || 12;
    const minutes = now2.getMinutes().toString().padStart(2, "0");
    const ampm = now2.getHours() >= 12 ? "PM" : "AM";
    const timeString = `${hours}:${minutes} ${ampm}`;
    contentEl.createEl("h1", { text: "Hora Local" });
    contentEl.createEl("p", { text: timeString });
    contentEl.style.backgroundColor = "#2E3440";
    contentEl.style.color = "#D8DEE9";
    contentEl.style.padding = "20px";
    contentEl.style.textAlign = "center";
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/modules/moduloLibros/librosAPI.ts
var import_obsidian64 = require("obsidian");
init_luxon();
var librosAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.tp = this.plugin.tp;
  }
  async kindle(dv) {
    let folderPrincipal = this.plugin.settings["folder_KindleNotes"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian64.TFolder)) {
      new import_obsidian64.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian64.Notice("No hay una nota activa.");
      return;
    }
    const metadata = this.plugin.app.metadataCache.getFileCache(archivoActivo);
    const yamlData = (metadata == null ? void 0 : metadata.frontmatter) || {};
    if (yamlData.kindleNote) {
      const linkElement = document.createElement("a");
      linkElement.href = yamlData.kindleNote;
      linkElement.textContent = "Ver en Kindle";
      dv.container.innerHTML = "";
      dv.container.appendChild(linkElement);
    } else {
      const notesList = await this.getNotesFromFolder(folderPrincipal);
      if (notesList.length === 0) {
        new import_obsidian64.Notice("No hay notas en el folder de Kindle.");
        return;
      }
      const suggestorConfig = {
        onChooseItem: async (selectedNote, evt) => {
          yamlData.kindleNote = selectedNote.path;
          await this.plugin.app.vault.modify(archivoActivo, `---
${yamlData}
...`);
          new import_obsidian64.Notice("Se ha guardado el link de la nota Kindle en el archivo actual.");
        },
        getItems: () => notesList,
        renderSuggestion: (item, el) => {
          el.textContent = item.basename;
        }
      };
      new Suggester(this.plugin, suggestorConfig).start();
    }
  }
  async getNotesFromFolder(folderPath) {
    const folderFiles = await this.plugin.app.vault.getAllLoadedFiles();
    return folderFiles.filter((file) => file instanceof import_obsidian64.TFile && file.path.startsWith(folderPath));
  }
  // Función para crear y mostrar el botón inicial "Menú hoy"
  async mostrarBotonCrearLibro(dv) {
    let folderPrincipal = this.plugin.settings["folder_Biblioteca"];
    const libraryFolder = this.plugin.app.vault.getAbstractFileByPath(folderPrincipal);
    if (!(libraryFolder instanceof import_obsidian64.TFolder)) {
      new import_obsidian64.Notice(`La carpeta ${folderPrincipal} no existe.`);
      return;
    }
    let archivoActivo = this.plugin.app.workspace.getActiveFile();
    if (!archivoActivo) {
      new import_obsidian64.Notice("No hay una nota activa.");
      return;
    }
    const bookExists = await this.bookExistsInLibrary(folderPrincipal, archivoActivo);
    if (bookExists) {
      const alias = await this.getAlias(bookExists);
      const texto = document.createElement("p");
      const link = document.createElement("a");
      link.href = bookExists.path;
      link.textContent = alias;
      link.dataset.href = bookExists.path;
      link.className = "internal-link";
      texto.textContent = `El libro ya est\xE1 en la biblioteca: `;
      texto.appendChild(link);
      dv.container.appendChild(texto);
    } else {
      dv.container.innerHTML = "";
      const botonCrearLibro = document.createElement("button");
      botonCrearLibro.textContent = "Ingresar a mi Biblioteca";
      dv.container.appendChild(botonCrearLibro);
      botonCrearLibro.onclick = async () => {
        await this.ingresarLibroBiblioteca();
      };
    }
  }
  async bookExistsInLibrary(folderPrincipal, archivoActivo) {
    const files = this.plugin.app.vault.getFiles();
    const activeFileName = archivoActivo.basename;
    for (let file of files) {
      if (file.path.startsWith(folderPrincipal)) {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        const frontmatter = cache == null ? void 0 : cache.frontmatter;
        if (frontmatter && frontmatter.asunto) {
          const asunto = frontmatter.asunto;
          if (Array.isArray(asunto)) {
            for (let entry of asunto) {
              if (entry.includes(`[[${activeFileName}]]`)) {
                return file;
              }
            }
          } else if (typeof asunto === "string" && asunto.includes(`[[${activeFileName}]]`)) {
            return file;
          }
        }
      }
    }
    return false;
  }
  async getAlias(file) {
    const cache = this.plugin.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    return frontmatter && frontmatter.aliases && frontmatter.aliases[0] ? frontmatter.aliases[0] : file.basename;
  }
  async ingresarLibroBiblioteca() {
    debugger;
    const template = app.vault.getAbstractFileByPath("Plantillas/Subsistemas/Libros/Biblioteca/Plt - Libro a Biblioteca.md");
    const filename = "Nuevo Libro";
    const folder = app.vault.getAbstractFileByPath("Inbox");
    if (template instanceof import_obsidian64.TFile) {
      console.log("Archivo encontrado:", template);
    } else {
      console.log("Archivo no encontrado.");
    }
    let crearNota = this.tp.file.static_functions.get("create_new");
    await crearNota(template, filename, false, folder).basename;
  }
};

// src/modules/moduloRegistroTiempo/API/updateSesionLectura.ts
init_utilsAPI();
var import_obsidian65 = require("obsidian");
init_luxon();
var updateSesionLectura = class extends YAMLUpdaterAPI2 {
  constructor(plugin) {
    super(plugin);
    this.plugin = plugin;
    this.plugin = plugin;
    this.utilsApi = new utilsAPI(plugin);
    this.tp = plugin.tp;
    this.nota = {};
    this.infoNota = {};
  }
  //actualizarNota(infoNota: any, campos: any): Promise<any>;
  //getFecha(): Promise<string>;
  //getHoraFinal(): Promise<string>;
  //getTiempoLeido(): Promise<string>;
  async getTiempoLeido(parametro, actual) {
    debugger;
    let horaInicioStr = this.infoNota.horaInicio;
    let cierre;
    let [fecha, , hora] = horaInicioStr.split(" ");
    let fechaHoraISO = `${fecha}T${hora}`;
    let horaInicio = new Date(fechaHoraISO);
    if (parametro == void 0) {
      cierre = /* @__PURE__ */ new Date();
    } else {
      let [fechaCierre, , horaCierre] = parametro.split(" ");
      let fechaHoraCierreISO = `${fechaCierre}T${horaCierre}`;
      cierre = new Date(fechaHoraCierreISO);
    }
    let diferenciaEnMilisegundos = cierre - horaInicio;
    return diferenciaEnMilisegundos;
  }
  async getEstado(parametro, actual) {
    let campo;
    if (parametro == void 0) {
      campo = "\u{1F535}";
      if (campo === null) {
        new Notice("Modificaci\xF3n de nota cancelada por el usuario.");
        return;
      }
    } else {
      campo = parametro;
    }
    this.nota.estado = campo;
    return campo;
  }
  async getPPM() {
    debugger;
    let palabrasPorHoja = parseInt(this.infoNota.palabrasPorHoja);
    let paginasLeidas = parseInt(this.nota.pagLeidas);
    let tiempoLeido = parseInt(this.nota.tiempoLeido);
    let PPM = palabrasPorHoja * paginasLeidas / (tiempoLeido / 6e4);
    return PPM;
  }
  async getPagLeidas() {
    debugger;
    let pagFin = parseInt(this.nota.pagFin);
    let paginasLeidas = pagFin - parseInt(this.infoNota.pagInicio);
    return parseInt(paginasLeidas);
  }
  async getPagFin() {
    debugger;
    let prompt = this.tp.system.static_functions.get("prompt");
    let pagFin = await prompt(`\xBFHasta que p\xE1gina le\xEDste?`, `${this.infoNota.pagInicio}`, true);
    return parseInt(pagFin);
  }
  async getPorLeer() {
    debugger;
    let porLeer = parseInt(this.infoNota.paginas) - parseInt(this.nota.pagFin);
    return porLeer;
  }
};

// src/modules/taskManager/api/tareasAPI.ts
var import_obsidian67 = require("obsidian");

// src/modules/taskManager/utils/taskUtils.ts
var import_obsidian66 = require("obsidian");
var TaskUtils = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  compararFechas(fecha1, fecha2) {
    if (!fecha1 && !fecha2)
      return 0;
    if (!fecha1)
      return 1;
    if (!fecha2)
      return -1;
    return fecha1.getTime() - fecha2.getTime();
  }
  normalizarHora(hora) {
    const patrones = [
      /^(\d{1,2})(?::(\d{2}))?\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})\s*(am|pm)?$/i,
      /^(\d{1,2}):(\d{2})$/
    ];
    for (const patron of patrones) {
      const match2 = hora.toLowerCase().match(patron);
      if (match2) {
        let horas = parseInt(match2[1]);
        const minutos = match2[2] ? match2[2] : "00";
        const periodo = match2[3];
        if (periodo === "pm" && horas < 12)
          horas += 12;
        if (periodo === "am" && horas === 12)
          horas = 0;
        return `${horas.toString().padStart(2, "0")}:${minutos}`;
      }
    }
    return null;
  }
  extraerFechasYHoras(linea) {
    var _a, _b, _c, _d;
    const horaInicioMatch = linea.match(/\[hI:\s*([^\]]+)\]/);
    const horaFinMatch = linea.match(/\[hF:\s*([^\]]+)\]/);
    return {
      fechaCreacion: (_a = linea.match(/➕ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _a[1],
      fechaScheduled: (_b = linea.match(/⏳ (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _b[1],
      fechaStart: (_c = linea.match(/🛫 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _c[1],
      fechaVencimiento: (_d = linea.match(/📅 (\d{4}-\d{2}-\d{2})/)) == null ? void 0 : _d[1],
      horaInicio: horaInicioMatch ? this.normalizarHora(horaInicioMatch[1].trim()) : void 0,
      horaFin: horaFinMatch ? this.normalizarHora(horaFinMatch[1].trim()) : void 0
    };
  }
  obtenerTituloNota(file) {
    var _a;
    const metadata = (_a = this.plugin.app.metadataCache.getFileCache(file)) == null ? void 0 : _a.frontmatter;
    if (metadata == null ? void 0 : metadata.aliases) {
      if (Array.isArray(metadata.aliases))
        return metadata.aliases[0];
      if (typeof metadata.aliases === "string")
        return metadata.aliases;
    }
    if (metadata == null ? void 0 : metadata.titulo)
      return metadata.titulo;
    const coincidencia = file.basename.match(/(?:PGTD|PQ|AI|AV|Ax|RR|DJ|OCA|CAC) - (.+)/);
    if (coincidencia && coincidencia[1])
      return coincidencia[1];
    return file.basename;
  }
  categorizarEtiquetas(etiquetas) {
    return {
      todoist: etiquetas.filter((e) => e.startsWith("#todoist")),
      contextos: etiquetas.filter((e) => e.match(/#cx(?:[/-].+)$/)).map((e) => this.limpiarPrefijo(e, "cx")),
      personas: etiquetas.filter((e) => e.startsWith("#px-")).map((e) => this.formatearEtiquetaPersona(e)),
      otras: etiquetas.filter(
        (e) => !e.startsWith("#todoist") && !e.match(/#cx(?:[/-]|$)/) && !e.startsWith("#px-")
      )
    };
  }
  // Nuevo método para formatear etiquetas de personas
  formatearEtiquetaPersona(etiqueta) {
    const nombre = etiqueta.replace("#px-", "");
    return nombre.replace(/_/g, " ");
  }
  limpiarPrefijo(etiqueta, prefijo) {
    const sinPrefijo = etiqueta.replace(new RegExp(`#${prefijo}[/-]`), "");
    return sinPrefijo.replace(/-/g, " \u2192 ").replace(/\//g, " \u2192 ");
  }
  limpiarTextoTarea(linea) {
    let textoLimpio = linea.replace(/^- \[ \]/, "").replace(/[➕📅⏳🛫] \d{4}-\d{2}-\d{2}/g, "").replace(/\[hI:[^\]]+\]/g, "").replace(/\[hF:[^\]]+\]/g, "").replace(/\[link\]\([^\)]+\)/g, "").replace(/%%\[todoist_id:: \d+\]%%/g, "").replace(/#[\w-]+(?:\/[\w-]+)*\b/g, "").replace(/#[\w-]+(?:-[\w-]+)*\b/g, "");
    textoLimpio = textoLimpio.replace(/\s+/g, " ").trim();
    return textoLimpio;
  }
  // Método de utilidad para obtener una representación jerárquica de las etiquetas
  obtenerJerarquiaEtiquetas(etiquetas) {
    const jerarquia = /* @__PURE__ */ new Map();
    etiquetas.forEach((etiqueta) => {
      var _a;
      const partes = etiqueta.slice(1).split(/[/-]/);
      const categoria = partes[0];
      if (!jerarquia.has(categoria)) {
        jerarquia.set(categoria, /* @__PURE__ */ new Set());
      }
      if (partes.length > 1) {
        const subetiquetas = partes.slice(1).join("/");
        (_a = jerarquia.get(categoria)) == null ? void 0 : _a.add(subetiquetas);
      }
    });
    return jerarquia;
  }
  obtenerFechaLocal() {
    const ahora = /* @__PURE__ */ new Date();
    return new Date(
      ahora.getFullYear(),
      ahora.getMonth(),
      ahora.getDate(),
      0,
      0,
      0
    );
  }
  parsearFechaVencimiento(fechaStr) {
    if (!fechaStr)
      return null;
    try {
      const [a\u00F1o, mes, dia] = fechaStr.split("-").map((num) => parseInt(num));
      if (isNaN(a\u00F1o) || isNaN(mes) || isNaN(dia))
        return null;
      const fecha = new Date(a\u00F1o, mes - 1, dia, 0, 0, 0);
      return fecha;
    } catch (error) {
      console.error("Error parseando fecha:", error);
      return null;
    }
  }
  normalizarFechaAString(fecha) {
    const a\u00F1o = fecha.getFullYear();
    const mes = String(fecha.getMonth() + 1).padStart(2, "0");
    const dia = String(fecha.getDate()).padStart(2, "0");
    return `${a\u00F1o}-${mes}-${dia}`;
  }
  extraerDependenciasYIds(linea) {
    console.log("Analizando l\xEDnea para IDs:", linea);
    const resultado = {
      taskId: void 0,
      dependencyId: void 0
    };
    const taskIdMatch = linea.match(/🆔\s*([a-z0-9]{5,7})/);
    if (taskIdMatch) {
      resultado.taskId = taskIdMatch[1];
      console.log("ID encontrado:", resultado.taskId);
    }
    const dependencyMatch = linea.match(/⛔\s*([a-z0-9]{5,7})/);
    if (dependencyMatch) {
      resultado.dependencyId = dependencyMatch[1];
      console.log("Dependencia encontrada:", resultado.dependencyId);
    }
    return resultado;
  }
  async verificarEstadoTarea(taskId) {
    console.log("\nVerificando estado de tarea:", taskId);
    const todosLosArchivos = this.plugin.app.vault.getMarkdownFiles();
    const filesParaProcesar = todosLosArchivos.filter((file) => !this.debeExcluirArchivo(file));
    console.log(`Buscando en ${filesParaProcesar.length} archivos (excluidos: ${todosLosArchivos.length - filesParaProcesar.length})`);
    for (const file of filesParaProcesar) {
      try {
        const contenido = await this.plugin.app.vault.cachedRead(file);
        const lineas = contenido.split("\n");
        for (const linea of lineas) {
          if (linea.includes(`\u{1F194} ${taskId}`)) {
            const estaCompletada = linea.trim().startsWith("- [x]");
            const tituloArchivo = this.obtenerTituloNota(file);
            const textoTarea = this.limpiarTextoTarea(linea);
            console.log("Tarea encontrada en:", file.path);
            console.log("Estado completada:", estaCompletada);
            console.log("Texto de la tarea:", textoTarea);
            return {
              completada: estaCompletada,
              rutaArchivo: file.path,
              tituloArchivo,
              textoTarea
            };
          }
        }
      } catch (error) {
        console.error(`Error procesando archivo ${file.path}:`, error);
      }
    }
    console.log("Tarea no encontrada en los archivos permitidos");
    return {
      completada: false
    };
  }
  // En la clase TaskUtils
  extraerEtiquetas(linea) {
    const etiquetas = [];
    const patronesEtiquetas = [
      // Etiquetas de personas con formato #px-Nombre_Apellido 
      /#px-[A-Za-z]+(?:_[A-Za-z]+)*(?:_[A-Za-z]+)?\b/g,
      // Etiquetas simples: #todoist
      /#[\w-]+\b/g,
      // Etiquetas con jerarquía usando "/": #cx/alguna/cosa
      /#[\w-]+(?:\/[\w-]+)+\b/g,
      // Etiquetas con jerarquía usando "-": #cx-alguna-cosa
      /#[\w-]+(?:-[\w-]+)+\b/g
    ];
    patronesEtiquetas.forEach((patron) => {
      const coincidencias = linea.match(patron);
      if (coincidencias) {
        coincidencias.forEach((etiqueta) => {
          if (!etiquetas.includes(etiqueta) && this.esEtiquetaValida(etiqueta)) {
            etiquetas.push(etiqueta);
          }
        });
      }
    });
    return this.organizarEtiquetas(etiquetas);
  }
  esEtiquetaValida(etiqueta) {
    if (!etiqueta.startsWith("#"))
      return false;
    if (etiqueta.startsWith("#px-")) {
      const nombreCompleto = etiqueta.slice(4);
      return /^[A-Za-z]+(?:_[A-Za-z]+)*$/.test(nombreCompleto);
    }
    const caracteresInvalidos = /[!@$%^&*()+={}\[\]:;"'<>,.?~\\|]/;
    if (caracteresInvalidos.test(etiqueta))
      return false;
    const partesEtiqueta = etiqueta.slice(1).split(/[/-]/);
    return partesEtiqueta.every((parte) => parte.length > 0);
  }
  organizarEtiquetas(etiquetas) {
    const categoriasConocidas = {
      todoist: [],
      cx: [],
      px: [],
      otras: []
    };
    etiquetas.forEach((etiqueta) => {
      if (etiqueta.startsWith("#px-")) {
        categoriasConocidas.px.push(etiqueta);
      } else if (etiqueta.startsWith("#todoist")) {
        categoriasConocidas.todoist.push(etiqueta);
      } else if (etiqueta.match(/#cx(?:[/-]|$)/)) {
        categoriasConocidas.cx.push(etiqueta);
      } else {
        categoriasConocidas.otras.push(etiqueta);
      }
    });
    Object.values(categoriasConocidas).forEach((categoria) => {
      categoria.sort((a, b) => a.localeCompare(b));
    });
    return [
      ...categoriasConocidas.todoist,
      ...categoriasConocidas.cx,
      ...categoriasConocidas.px,
      ...categoriasConocidas.otras
    ];
  }
  // Agregar método para verificar exclusiones
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async encontrarLineasTarea(file) {
    const lineasTareas = /* @__PURE__ */ new Map();
    try {
      const contenido = await this.plugin.app.vault.cachedRead(file);
      const lineas = contenido.split("\n");
      lineas.forEach((linea, index) => {
        const textoLimpio = this.limpiarTextoTarea(linea);
        if (textoLimpio && linea.trim().startsWith("- [")) {
          lineasTareas.set(textoLimpio, {
            numero: index + 1,
            texto: linea.trim()
          });
        }
      });
    } catch (error) {
      console.error(`Error procesando l\xEDneas en ${file.path}:`, error);
    }
    return lineasTareas;
  }
};

// src/modules/taskManager/utils/taskWeightCalculator.ts
var _TaskWeightCalculator = class _TaskWeightCalculator {
  static setTaskUtils(utils) {
    _TaskWeightCalculator.taskUtils = utils;
  }
  static getFechaPrioritaria(task, tipoFecha = "any") {
    if (!task)
      return null;
    switch (tipoFecha) {
      case "start":
        return task.fechaStart || null;
      case "due":
        return task.fechaVencimiento || null;
      case "scheduled":
        return task.fechaScheduled || null;
      case "any":
        return task.fechaVencimiento || task.fechaScheduled || task.fechaStart || null;
      default:
        return null;
    }
  }
  static shouldIncludeTask(task, searchType, currentDate) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return false;
    }
    try {
      switch (searchType) {
        case "start_vencidas": {
          const fechaStart = task.fechaStart;
          if (!fechaStart)
            return false;
          const fechaStartObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaStart);
          return fechaStartObj !== null && fechaStartObj < currentDate;
        }
        case "vencidas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          return fechaVencObj !== null && fechaVencObj < currentDate;
        }
        case "hoy": {
          const fechas = [task.fechaVencimiento, task.fechaScheduled, task.fechaStart].filter((f) => f);
          return fechas.some((fecha) => {
            const fechaObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fecha);
            return (fechaObj == null ? void 0 : fechaObj.toDateString()) === currentDate.toDateString();
          });
        }
        case "proximas": {
          const fechaVencimiento = task.fechaVencimiento;
          if (!fechaVencimiento)
            return false;
          const fechaVencObj = _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaVencimiento);
          if (!fechaVencObj)
            return false;
          const diasDiferencia = Math.ceil(
            (fechaVencObj.getTime() - currentDate.getTime()) / (1e3 * 60 * 60 * 24)
          );
          return diasDiferencia >= 0 && diasDiferencia <= 7;
        }
        default:
          return false;
      }
    } catch (error) {
      console.error("Error en shouldIncludeTask:", error);
      return false;
    }
  }
  static calculateWeight(task) {
    let baseWeight = 0;
    let timeWeight = 0;
    let priorityWeight = 0;
    if (task.fechaVencimiento)
      baseWeight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      baseWeight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      baseWeight += this.WEIGHTS.START;
    if (task.horaFin)
      timeWeight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      timeWeight += this.WEIGHTS.HORA_INICIO;
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      priorityWeight += this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      priorityWeight += this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      priorityWeight += this.WEIGHTS.PRIORITY.LOWEST;
    return {
      baseWeight,
      timeWeight,
      priorityWeight,
      totalWeight: baseWeight + timeWeight + priorityWeight
    };
  }
  static sortTasks(tasks) {
    if (!_TaskWeightCalculator.taskUtils) {
      console.error("TaskUtils no inicializado en TaskWeightCalculator");
      return tasks;
    }
    return tasks.sort((a, b) => {
      var _a, _b, _c, _d;
      try {
        const fechaA = this.getFechaPrioritaria(a, "any");
        const fechaB = this.getFechaPrioritaria(b, "any");
        if (fechaA !== fechaB) {
          const dateA = fechaA ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaA) : null;
          const dateB = fechaB ? _TaskWeightCalculator.taskUtils.parsearFechaVencimiento(fechaB) : null;
          if (dateA && dateB) {
            return dateA.getTime() - dateB.getTime();
          }
          return 0;
        }
        if (a.horaInicio && b.horaInicio) {
          if (a.horaInicio !== b.horaInicio) {
            return a.horaInicio.localeCompare(b.horaInicio);
          }
        } else if (a.horaInicio) {
          return -1;
        } else if (b.horaInicio) {
          return 1;
        }
        const weightA = (_b = (_a = a.weight) == null ? void 0 : _a.totalWeight) != null ? _b : 0;
        const weightB = (_d = (_c = b.weight) == null ? void 0 : _c.totalWeight) != null ? _d : 0;
        return weightB - weightA;
      } catch (error) {
        console.error("Error ordenando tareas:", error);
        return 0;
      }
    });
  }
  static calculateBaseWeight(task) {
    let weight = 0;
    if (task.fechaVencimiento)
      weight += this.WEIGHTS.DUE_DATE;
    if (task.fechaScheduled)
      weight += this.WEIGHTS.SCHEDULED;
    if (task.fechaStart)
      weight += this.WEIGHTS.START;
    return weight;
  }
  static calculateTimeWeight(task) {
    let weight = 0;
    if (task.horaFin)
      weight += this.WEIGHTS.HORA_FIN;
    if (task.horaInicio)
      weight += this.WEIGHTS.HORA_INICIO;
    return weight;
  }
  static calculatePriorityWeight(task) {
    const texto = task.texto.toLowerCase();
    if (texto.includes("\u{1F53A}"))
      return this.WEIGHTS.PRIORITY.HIGHEST;
    if (texto.includes("\u23EB"))
      return this.WEIGHTS.PRIORITY.HIGH;
    if (texto.includes("\u{1F53C}"))
      return this.WEIGHTS.PRIORITY.MEDIUM;
    if (texto.includes("\u{1F53D}"))
      return this.WEIGHTS.PRIORITY.LOW;
    if (texto.includes("\u23EC"))
      return this.WEIGHTS.PRIORITY.LOWEST;
    return 0;
  }
  static esFechaValida(fecha) {
    try {
      const fechaObj = new Date(fecha);
      return fechaObj.toString() !== "Invalid Date";
    } catch (e) {
      return false;
    }
  }
};
_TaskWeightCalculator.WEIGHTS = {
  HORA_FIN: 5,
  HORA_INICIO: 5,
  DUE_DATE: 5,
  SCHEDULED: 4,
  START: 3,
  PRIORITY: {
    HIGHEST: 4,
    HIGH: 3,
    MEDIUM: 2,
    LOW: -1,
    LOWEST: -2
  }
};
var TaskWeightCalculator = _TaskWeightCalculator;

// src/modules/taskManager/api/tareasAPI.ts
var TareasAPI = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.taskUtils = new TaskUtils(plugin);
    TaskWeightCalculator.setTaskUtils(this.taskUtils);
  }
  debeExcluirArchivo(file) {
    if (file.path.startsWith("Plantillas/")) {
      return true;
    }
    if (file.path.startsWith(`${this.plugin.settings.folder_SistemaGTD}/`)) {
      return true;
    }
    if (file.path.startsWith("Archivo/")) {
      return true;
    }
    return false;
  }
  async procesarTareas(files, filtro, buscarEnEjecucion = false) {
    const tareas = [];
    const errores = [];
    try {
      const filesParaProcesar = files.filter((file) => !this.debeExcluirArchivo(file));
      console.log(`
=== INICIANDO PROCESAMIENTO DE TAREAS ===`);
      console.log(`Procesando ${filesParaProcesar.length} archivos de ${files.length} totales`);
      for (const file of filesParaProcesar) {
        try {
          const contenido = await this.plugin.app.vault.cachedRead(file);
          const lineas = contenido.split("\n");
          const tituloNota = this.taskUtils.obtenerTituloNota(file);
          console.log(`
Procesando archivo: ${file.path}`);
          for (const linea of lineas) {
            const esEnEjecucion = linea.trim().startsWith("- [/]");
            const esAbierta = linea.trim().startsWith("- [ ]");
            const esCompletada = linea.trim().startsWith("- [x]");
            if (!linea.trim().startsWith("- ["))
              continue;
            if (buscarEnEjecucion) {
              if (!esEnEjecucion)
                continue;
            } else {
              if (esCompletada || esEnEjecucion)
                continue;
              if (!esAbierta)
                continue;
            }
            const textoLimpio = this.taskUtils.limpiarTextoTarea(linea);
            const textoOriginal = linea.trim();
            const fechasYHoras = this.taskUtils.extraerFechasYHoras(linea);
            const etiquetasExtraidas = this.taskUtils.extraerEtiquetas(linea);
            const etiquetasCategorizadas = this.taskUtils.categorizarEtiquetas(etiquetasExtraidas);
            const { taskId, dependencyId } = this.taskUtils.extraerDependenciasYIds(linea);
            const tarea = {
              texto: textoLimpio,
              textoOriginal,
              rutaArchivo: file.path,
              nombreArchivo: file.basename,
              titulo: tituloNota,
              estado: esEnEjecucion ? "en_ejecucion" /* EnEjecucion */ : "abierta" /* Abierta */,
              ...fechasYHoras,
              etiquetas: {
                todas: etiquetasExtraidas,
                ...etiquetasCategorizadas
              },
              taskId,
              dependencyId
            };
            tarea.weight = TaskWeightCalculator.calculateWeight(tarea);
            if (dependencyId) {
              const estadoDependencia = await this.taskUtils.verificarEstadoTarea(dependencyId);
              tarea.isBlocked = !estadoDependencia.completada;
              tarea.dependencyLocation = estadoDependencia.rutaArchivo;
              tarea.dependencyTitle = estadoDependencia.tituloArchivo;
              tarea.dependencyTexto = estadoDependencia.textoTarea;
            }
            const cumpleFiltro = await Promise.resolve(filtro(tarea));
            if (cumpleFiltro) {
              console.log(`-> Tarea agregada: ${textoLimpio.substring(0, 50)}...`);
              tareas.push(tarea);
            }
          }
        } catch (fileError) {
          errores.push(`Error procesando archivo ${file.path}: ${fileError.message}`);
          console.error(`Error en archivo ${file.path}:`, fileError);
        }
      }
    } catch (error) {
      console.error("Error general procesando tareas:", error);
      new import_obsidian67.Notice("Error procesando tareas. Revisa la consola para m\xE1s detalles.");
    }
    if (errores.length > 0) {
      console.warn("\nErrores encontrados durante el procesamiento:", errores);
    }
    console.log(`
=== PROCESAMIENTO COMPLETADO ===`);
    console.log(`Total de tareas encontradas: ${tareas.length}`);
    return buscarEnEjecucion ? this.organizarTareasEnEjecucion(tareas) : TaskWeightCalculator.sortTasks(tareas);
  }
  guardarYAbrirArchivo(nombreArchivo, contenido) {
    return new Promise(async (resolve, reject) => {
      try {
        const carpetaGTD = this.plugin.app.vault.getAbstractFileByPath(
          this.plugin.settings.folder_SistemaGTD
        );
        if (!carpetaGTD) {
          await this.plugin.app.vault.createFolder(
            this.plugin.settings.folder_SistemaGTD
          );
        }
        const archivoExistente = this.plugin.app.vault.getAbstractFileByPath(nombreArchivo);
        if (archivoExistente instanceof import_obsidian67.TFile) {
          await this.plugin.app.vault.modify(archivoExistente, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(archivoExistente);
        } else {
          const nuevoArchivo = await this.plugin.app.vault.create(nombreArchivo, contenido);
          await this.plugin.app.workspace.getLeaf().openFile(nuevoArchivo);
        }
        resolve();
      } catch (error) {
        console.error("Error al guardar/abrir archivo:", error);
        reject(error);
      }
    });
  }
  // Métodos principales de búsqueda de tareas
  async getTareasVencidasAbiertas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasHoy() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "hoy", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasProximas(diasProximos = 7) {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "proximas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartVencidas() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => TaskWeightCalculator.shouldIncludeTask(tarea, "start_vencidas", this.taskUtils.obtenerFechaLocal())
    );
  }
  async getTareasStartProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaStart)
          return false;
        const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
        return fechaStart && fechaStart <= limiteFuturo && fechaStart >= hoy;
      }
    );
  }
  // Métodos de renderizado y visualización
  generarBotonActualizacion(metodo, parametros) {
    return `\`\`\`dataviewjs
const gp = app.plugins.plugins['obsidian-personal-management'];
if (!gp) {
    dv.paragraph("\u26A0\uFE0F Plugin de Gesti\xF3n Personal no encontrado");
    return;
}

const btn = this.container.createEl('button', {text: '\u{1F504} Actualizar Vista'});
btn.style.cssText = 'padding: 5px 15px; background-color: #1e1e1e; color: #ffffff; border: 1px solid #4a4a4a; border-radius: 4px; cursor: pointer; margin-bottom: 10px;';

btn.addEventListener('mouseenter', () => btn.style.backgroundColor = '#2e2e2e');
btn.addEventListener('mouseleave', () => btn.style.backgroundColor = '#1e1e1e');

btn.addEventListener('click', async () => {
    try {
        new Notice('Actualizando vista...');
        await gp.tareasAPI.${metodo}(${parametros || ""});
    } catch (error) {
        console.error('Error:', error);
        new Notice('Error al actualizar tareas');
    }
});
\`\`\`

`;
  }
  // Métodos públicos de visualización correspondientes a los comandos
  async mostrarTareasVencidas() {
    try {
      const tareas = await this.getTareasVencidasAbiertas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas vencidas abiertas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Vencidas",
        "mostrarTareasVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Pr\xF3ximas",
        "mostrarTareasProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasHoy() {
    try {
      const tareas = await this.getTareasHoy();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas programadas para hoy.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas para Hoy",
        "mostrarTareasHoy"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas para Hoy.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas para hoy`);
    } catch (error) {
      console.error("Error en mostrarTareasHoy:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartVencidas() {
    try {
      const tareas = await this.getTareasStartVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas con inicio vencido.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas con Inicio Vencido",
        "mostrarTareasStartVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Inicio Vencido.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas con inicio vencido`);
    } catch (error) {
      console.error("Error en mostrarTareasStartVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  async mostrarTareasStartProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasStartProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas por iniciar en el per\xEDodo especificado.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas por Iniciar",
        "mostrarTareasStartProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Iniciar.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas por iniciar`);
    } catch (error) {
      console.error("Error en mostrarTareasStartProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Métodos de utilidad privados
  tieneFechasValidas(fechasYHoras) {
    const { fechaVencimiento, fechaScheduled, fechaStart } = fechasYHoras;
    return fechaVencimiento || fechaScheduled || fechaStart;
  }
  generarVistaCompleta(tareas, titulo, metodoActualizacion, diasProximos) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# ${titulo}

`;
    contenido += this.generarBotonActualizacion(metodoActualizacion, diasProximos);
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    if (diasProximos) {
      contenido += `> Mostrando tareas para los pr\xF3ximos ${diasProximos} d\xEDas
`;
    }
    contenido += `> Total de tareas encontradas: ${tareas.length}

`;
    contenido += this.renderizarTareasAgrupadas(tareas);
    return contenido;
  }
  renderizarTareasAgrupadas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTarea(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTarea(tarea) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    - Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} : ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} : ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  obtenerPrioridadTarea(texto) {
    if (texto.includes("\u{1F53A}"))
      return { emoji: "\u{1F53A}", nombre: "Muy Alta" };
    if (texto.includes("\u23EB"))
      return { emoji: "\u23EB", nombre: "Alta" };
    if (texto.includes("\u{1F53C}"))
      return { emoji: "\u{1F53C}", nombre: "Media" };
    if (texto.includes("\u{1F53D}"))
      return { emoji: "\u{1F53D}", nombre: "Baja" };
    if (texto.includes("\u23EC"))
      return { emoji: "\u23EC", nombre: "Muy Baja" };
    return null;
  }
  agruparTareasPorArchivo(tareas) {
    return tareas.reduce((acc, tarea) => {
      if (!acc[tarea.rutaArchivo]) {
        acc[tarea.rutaArchivo] = {
          titulo: tarea.titulo,
          tareas: []
        };
      }
      acc[tarea.rutaArchivo].tareas.push(tarea);
      return acc;
    }, {});
  }
  formatearFechaConContexto(fecha, tipo) {
    try {
      const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
      if (!fechaObj)
        return fecha;
      const hoy = this.taskUtils.obtenerFechaLocal();
      const diferenciaDias = Math.ceil(
        (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
      );
      let textoBase = "";
      switch (tipo) {
        case "due":
          textoBase = diferenciaDias < 0 ? "Venci\xF3" : "Vence";
          break;
        case "scheduled":
          textoBase = "Programada";
          break;
        case "start":
          textoBase = diferenciaDias < 0 ? "Debi\xF3 iniciar" : "Inicia";
          break;
      }
      let contexto = "";
      if (diferenciaDias === 0) {
        contexto = "hoy";
      } else if (diferenciaDias === 1) {
        contexto = "ma\xF1ana";
      } else if (diferenciaDias === -1) {
        contexto = "ayer";
      } else if (diferenciaDias < 0) {
        contexto = `hace ${Math.abs(diferenciaDias)} d\xEDas`;
      } else {
        contexto = `en ${diferenciaDias} d\xEDas`;
      }
      return `${textoBase} ${fecha} (${contexto})`;
    } catch (error) {
      console.error("Error formateando fecha:", error);
      return fecha;
    }
  }
  // Añadir nuevo método para obtener tareas futuras
  async getTareasFuturas(diasFuturos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasFuturos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const fechasRelevantes = [
          tarea.fechaVencimiento,
          tarea.fechaScheduled,
          tarea.fechaStart
        ].filter(Boolean);
        return fechasRelevantes.some((fecha) => {
          const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
          return fechaObj && fechaObj > hoy && fechaObj <= limiteFuturo;
        });
      }
    );
  }
  // Añadir método para mostrar tareas futuras
  async mostrarTareasFuturas(diasFuturos = 7) {
    try {
      const tareas = await this.getTareasFuturas(diasFuturos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice(`No hay tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas.`);
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Programadas (Pr\xF3ximos ${diasFuturos} d\xEDas)`,
        "mostrarTareasFuturas",
        diasFuturos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Programadas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas programadas para los pr\xF3ximos ${diasFuturos} d\xEDas`);
    } catch (error) {
      console.error("Error en mostrarTareasFuturas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Añadir nuevo método para obtener tareas en ejecución
  async getTareasEnEjecucion() {
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        const taskLine = tarea.texto.trim();
        return taskLine.startsWith("- [/]");
      },
      true
      // nuevo parámetro para indicar que buscamos tareas en ejecución
    );
  }
  // Añadir método para mostrar tareas en ejecución
  async mostrarTareasEnEjecucion() {
    try {
      const tareas = await this.procesarTareas(
        this.plugin.app.vault.getMarkdownFiles(),
        (tarea) => true,
        // No aplicamos filtro adicional porque ya filtramos por estado en procesarTareas
        true
        // Indicar que buscamos tareas en ejecución
      );
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No se encontraron tareas en ejecuci\xF3n");
        return;
      }
      const contenido = this.generarVistaEnEjecucion(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas en Ejecuci\xF3n.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas en ejecuci\xF3n`);
    } catch (error) {
      console.error("Error en mostrarTareasEnEjecucion:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaEnEjecucion(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas en Ejecuci\xF3n

`;
    contenido += this.generarBotonActualizacion("mostrarTareasEnEjecucion");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas en ejecuci\xF3n: ${tareas.length}

`;
    const tareasConVencimiento = tareas.filter((t) => t.fechaVencimiento);
    const tareasProgramadas = tareas.filter((t) => !t.fechaVencimiento && t.fechaScheduled);
    const tareasConInicio = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && t.fechaStart);
    const tareasSinFecha = tareas.filter((t) => !t.fechaVencimiento && !t.fechaScheduled && !t.fechaStart);
    if (tareasConVencimiento.length > 0) {
      contenido += `## Con fecha de vencimiento (${tareasConVencimiento.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConVencimiento);
    }
    if (tareasProgramadas.length > 0) {
      contenido += `## Programadas (${tareasProgramadas.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasProgramadas);
    }
    if (tareasConInicio.length > 0) {
      contenido += `## Con fecha de inicio (${tareasConInicio.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasConInicio);
    }
    if (tareasSinFecha.length > 0) {
      contenido += `## Sin fecha asignada (${tareasSinFecha.length})

`;
      contenido += this.renderizarGrupoTareasEnEjecucion(tareasSinFecha);
      return contenido;
    }
  }
  // Añadir método específico para renderizar grupos de tareas en ejecución
  renderizarGrupoTareasEnEjecucion(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarGrupoTareas(tareas) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaEnEjecucion(tarea);
      });
      contenido += "\n";
    }
    return contenido;
  }
  renderizarTareaEnEjecucion(tarea) {
    var _a, _b, _c, _d;
    let contenido = `${tarea.texto}
`;
    if (tarea.fechaVencimiento || tarea.fechaScheduled || tarea.fechaStart) {
      contenido += `    - Fechas:
`;
      if (tarea.fechaVencimiento) {
        contenido += `        - \u{1F4C5} : ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
      }
      if (tarea.fechaScheduled) {
        contenido += `        - \u23F3 : ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
      }
      if (tarea.fechaStart) {
        contenido += `        - \u{1F6EB}: ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
      }
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464} Personas: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2} Todoist: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    - ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    return contenido;
  }
  organizarTareasEnEjecucion(tareas) {
    return tareas.sort((a, b) => {
      var _a, _b;
      const fechaA = a.fechaVencimiento || a.fechaScheduled || a.fechaStart;
      const fechaB = b.fechaVencimiento || b.fechaScheduled || b.fechaStart;
      if (fechaA && fechaB) {
        const fechaObjA = this.taskUtils.parsearFechaVencimiento(fechaA);
        const fechaObjB = this.taskUtils.parsearFechaVencimiento(fechaB);
        if (fechaObjA && fechaObjB) {
          return fechaObjA.getTime() - fechaObjB.getTime();
        }
      }
      if (fechaA)
        return -1;
      if (fechaB)
        return 1;
      return (((_a = b.weight) == null ? void 0 : _a.totalWeight) || 0) - (((_b = a.weight) == null ? void 0 : _b.totalWeight) || 0);
    });
  }
  // Nuevo método para obtener tareas scheduled vencidas
  async getTareasScheduledVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled < hoy;
      }
    );
  }
  // Nuevo método para obtener tareas scheduled próximas
  async getTareasScheduledProximas(diasProximos = 7) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    const limiteFuturo = new Date(hoy);
    limiteFuturo.setDate(limiteFuturo.getDate() + diasProximos);
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        if (!tarea.fechaScheduled)
          return false;
        const fechaScheduled = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
        return fechaScheduled !== null && fechaScheduled >= hoy && fechaScheduled <= limiteFuturo;
      }
    );
  }
  // Método para mostrar tareas scheduled vencidas
  async mostrarTareasScheduledVencidas() {
    try {
      const tareas = await this.getTareasScheduledVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas scheduled vencidas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        "Tareas Scheduled Vencidas",
        "mostrarTareasScheduledVencidas"
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas scheduled vencidas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método para mostrar tareas scheduled próximas
  async mostrarTareasScheduledProximas(diasProximos = 7) {
    try {
      const tareas = await this.getTareasScheduledProximas(diasProximos);
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas scheduled pr\xF3ximas.");
        return;
      }
      const contenido = this.generarVistaCompleta(
        tareas,
        `Tareas Scheduled Pr\xF3ximas (${diasProximos} d\xEDas)`,
        "mostrarTareasScheduledProximas",
        diasProximos
      );
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas Scheduled Pr\xF3ximas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas scheduled pr\xF3ximas`);
    } catch (error) {
      console.error("Error en mostrarTareasScheduledProximas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método auxiliar para la visualización de fechas scheduled
  formatearFechaScheduled(fecha) {
    const fechaObj = this.taskUtils.parsearFechaVencimiento(fecha);
    if (!fechaObj)
      return fecha;
    const hoy = this.taskUtils.obtenerFechaLocal();
    const diferenciaDias = Math.ceil(
      (fechaObj.getTime() - hoy.getTime()) / (1e3 * 60 * 60 * 24)
    );
    let contexto = "";
    if (diferenciaDias < 0) {
      contexto = `(retrasada ${Math.abs(diferenciaDias)} d\xEDas)`;
    } else if (diferenciaDias === 0) {
      contexto = "(hoy)";
    } else if (diferenciaDias === 1) {
      contexto = "(ma\xF1ana)";
    } else {
      contexto = `(en ${diferenciaDias} d\xEDas)`;
    }
    return `${fecha} ${contexto}`;
  }
  // Método para obtener todas las tareas vencidas
  async getTodasTareasVencidas() {
    const hoy = this.taskUtils.obtenerFechaLocal();
    return await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      (tarea) => {
        let estaVencida = false;
        if (tarea.fechaVencimiento) {
          const fechaVenc = this.taskUtils.parsearFechaVencimiento(tarea.fechaVencimiento);
          if (fechaVenc && fechaVenc < hoy) {
            tarea.tipoVencimiento = ["due"];
            estaVencida = true;
          }
        }
        if (tarea.fechaScheduled) {
          const fechaSched = this.taskUtils.parsearFechaVencimiento(tarea.fechaScheduled);
          if (fechaSched && fechaSched < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("scheduled");
            estaVencida = true;
          }
        }
        if (tarea.fechaStart) {
          const fechaStart = this.taskUtils.parsearFechaVencimiento(tarea.fechaStart);
          if (fechaStart && fechaStart < hoy) {
            tarea.tipoVencimiento = tarea.tipoVencimiento || [];
            tarea.tipoVencimiento.push("start");
            estaVencida = true;
          }
        }
        return estaVencida;
      }
    );
  }
  // Método para mostrar todas las tareas vencidas
  async mostrarTodasTareasVencidas() {
    try {
      const tareas = await this.getTodasTareasVencidas();
      if (tareas.length === 0) {
        new import_obsidian67.Notice("No hay tareas vencidas.");
        return;
      }
      const contenido = this.generarVistaTodasVencidas(tareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Todas las Tareas Vencidas.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${tareas.length} tareas vencidas`);
    } catch (error) {
      console.error("Error en mostrarTodasTareasVencidas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método específico para generar la vista de todas las tareas vencidas
  generarVistaTodasVencidas(tareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Todas las Tareas Vencidas

`;
    contenido += this.generarBotonActualizacion("mostrarTodasTareasVencidas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas vencidas: ${tareas.length}

`;
    const tareasVencDue = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("due");
    });
    const tareasVencScheduled = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("scheduled");
    });
    const tareasVencStart = tareas.filter((t) => {
      var _a;
      return (_a = t.tipoVencimiento) == null ? void 0 : _a.includes("start");
    });
    if (tareasVencDue.length > 0) {
      contenido += `## Tareas con Fecha de Vencimiento Pasada (${tareasVencDue.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencDue, "due");
    }
    if (tareasVencScheduled.length > 0) {
      contenido += `## Tareas Scheduled Retrasadas (${tareasVencScheduled.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencScheduled, "scheduled");
    }
    if (tareasVencStart.length > 0) {
      contenido += `## Tareas con Inicio Retrasado (${tareasVencStart.length})

`;
      contenido += this.renderizarGrupoTareasVencidas(tareasVencStart, "start");
    }
    return contenido;
  }
  // Método auxiliar para renderizar grupos de tareas vencidas
  renderizarGrupoTareasVencidas(tareas, tipo) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaVencida(tarea, tipo);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método auxiliar para renderizar una tarea vencida
  renderizarTareaVencida(tarea, tipo) {
    var _a, _b, _c, _d;
    let contenido = `- [ ] ${tarea.texto}
`;
    switch (tipo) {
      case "due":
        contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "scheduled":
        contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaStart) {
          contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        }
        break;
      case "start":
        contenido += `    - \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
        if (tarea.fechaVencimiento) {
          contenido += `    - \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
        }
        if (tarea.fechaScheduled) {
          contenido += `    - \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
        }
        break;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    - \u23F0 Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    - \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    - \u{1F464}: ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    if (((_c = tarea.etiquetas.todoist) == null ? void 0 : _c.length) > 0) {
      contenido += `    - \u{1F4F2}: ${tarea.etiquetas.todoist.join(" ")}
`;
    }
    if (((_d = tarea.etiquetas.otras) == null ? void 0 : _d.length) > 0) {
      contenido += `    - \u{1F3F7}\uFE0F Otras: ${tarea.etiquetas.otras.join(" ")}
`;
    }
    return contenido;
  }
  // Método principal para obtener tareas con dependencias
  async getTareasDependientes() {
    console.log("=== Iniciando b\xFAsqueda de tareas con dependencias ===");
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        console.log("DependencyId:", tarea.dependencyId);
        if (!tarea.dependencyId) {
          console.log("-> Ignorada: No tiene dependencia");
          return false;
        }
        const resultado = await this.taskUtils.verificarEstadoTarea(tarea.dependencyId);
        console.log(`-> Dependencia ${tarea.dependencyId} completada:`, resultado.completada);
        tarea.isBlocked = !resultado.completada;
        tarea.dependencyLocation = resultado.rutaArchivo;
        tarea.dependencyTitle = resultado.tituloArchivo;
        return true;
      }
    );
    return {
      ejecutables: tareas.filter((t) => !t.isBlocked),
      bloqueadas: tareas.filter((t) => t.isBlocked)
    };
  }
  // Método para mostrar las tareas dependientes
  async mostrarTareasDependientes() {
    try {
      const { ejecutables, bloqueadas } = await this.getTareasDependientes();
      if (ejecutables.length === 0 && bloqueadas.length === 0) {
        new import_obsidian67.Notice("No se encontraron tareas con dependencias.");
        return;
      }
      const contenido = this.generarVistaDependencias(ejecutables, bloqueadas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas con Dependencias.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${ejecutables.length + bloqueadas.length} tareas con dependencias`);
    } catch (error) {
      console.error("Error en mostrarTareasDependientes:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  // Método para generar la vista de dependencias
  generarVistaDependencias(ejecutables, bloqueadas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas con Dependencias

`;
    contenido += this.generarBotonActualizacion("mostrarTareasDependientes");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de tareas con dependencias: ${ejecutables.length + bloqueadas.length}

`;
    if (ejecutables.length > 0) {
      contenido += `## Tareas Ejecutables (${ejecutables.length})
`;
      contenido += `> [!success] Estas tareas ya pueden ser ejecutadas porque sus dependencias est\xE1n completadas

`;
      contenido += this.renderizarGrupoDependencias(ejecutables, true);
    }
    if (bloqueadas.length > 0) {
      contenido += `
## Tareas Bloqueadas (${bloqueadas.length})
`;
      contenido += `> [!warning] Estas tareas est\xE1n esperando que se completen otras tareas

`;
      contenido += this.renderizarGrupoDependencias(bloqueadas, false);
    }
    return contenido;
  }
  // Método para renderizar grupos de tareas con dependencias
  renderizarGrupoDependencias(tareas, ejecutables) {
    const tareasPorArchivo = this.agruparTareasPorArchivo(tareas);
    let contenido = "";
    for (const [rutaArchivo, info] of Object.entries(tareasPorArchivo)) {
      contenido += `### [[${rutaArchivo}|${info.titulo}]]

`;
      info.tareas.forEach((tarea) => {
        contenido += this.renderizarTareaConDependencia(tarea, ejecutables);
      });
      contenido += "\n";
    }
    return contenido;
  }
  // Método para renderizar una tarea individual con dependencia
  renderizarTareaConDependencia(tarea, esEjecutable) {
    var _a, _b;
    console.log("\nRenderizando tarea:", tarea.texto);
    console.log("Es ejecutable:", esEjecutable);
    let contenido = `- [ ] ${tarea.texto}
`;
    if (tarea.taskId) {
      contenido += `    \u{1F194} ${tarea.taskId}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: ${tarea.dependencyTitle ? `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]` : "No encontrada"}`;
      if (tarea.dependencyTexto) {
        contenido += `: "${tarea.dependencyTexto}"`;
      }
      contenido += esEjecutable ? " \u2705" : " \u23F3";
      contenido += "\n";
    }
    if (tarea.fechaVencimiento) {
      contenido += `    \u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}
`;
    }
    if (tarea.fechaScheduled) {
      contenido += `    \u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}
`;
    }
    if (tarea.fechaStart) {
      contenido += `    \u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}
`;
    }
    if (((_a = tarea.etiquetas.contextos) == null ? void 0 : _a.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} ${tarea.etiquetas.personas.join(" | ")}
`;
    }
    return contenido;
  }
  async mostrarTareasPersonas() {
    try {
      const { personasConTareas, totalPersonas, totalTareas } = await this.getTareasPersonas();
      if (totalPersonas === 0) {
        new import_obsidian67.Notice("No se encontraron tareas asignadas a personas.");
        return;
      }
      const contenido = this.generarVistaPersonas(personasConTareas, totalPersonas, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Persona.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas asignadas a ${totalPersonas} personas`);
    } catch (error) {
      console.error("Error en mostrarTareasPersonas:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaPersonas(personasConTareas, totalPersonas, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas Asignadas por Persona

`;
    contenido += this.generarBotonActualizacion("mostrarTareasPersonas");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de personas con tareas: ${totalPersonas}
`;
    contenido += `> Total de tareas asignadas: ${totalTareas}

`;
    contenido += `## Resumen de Asignaciones
`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      const nombreFormateado = this.formatearNombrePersona(persona);
      contenido += `- [[#${nombreFormateado}|${nombreFormateado}]] (${tareas.length} tareas)
`;
    });
    contenido += "\n";
    contenido += `## Tareas por Persona

`;
    Array.from(personasConTareas.entries()).sort(([, tareasA], [, tareasB]) => tareasB.length - tareasA.length).forEach(([persona, tareas]) => {
      contenido += `### ${this.formatearNombrePersona(persona)}
[[#Resumen de Asignaciones|\u2B06\uFE0F]]
`;
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas);
      tareasOrdenadas.forEach((tarea) => {
        contenido += this.renderizarTareaPersona(tarea);
      });
      contenido += "\n";
    });
    return contenido;
  }
  renderizarTareaPersona(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.contextos) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F5C2}\uFE0F Contextos: ${tarea.etiquetas.contextos.join(" | ")}
`;
    }
    if (tarea.weight) {
      const prioridad = this.obtenerPrioridadTarea(tarea.texto);
      if (prioridad) {
        contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
      }
    }
    return contenido;
  }
  formatearNombrePersona(tag) {
    return tag.replace("#px-", "").replace(/_/g, " ").split(" ").map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()).join(" ");
  }
  normalizarContexto(contexto) {
    return contexto.replace(/[/-]/g, " \u2192 ").trim();
  }
  async mostrarTareasContextos() {
    try {
      const { contextosConTareas, totalContextos, totalTareas } = await this.getTareasContextos();
      if (totalContextos === 0) {
        new import_obsidian67.Notice("No se encontraron tareas con contextos asignados.");
        return;
      }
      const contenido = this.generarVistaContextos(contextosConTareas, totalContextos, totalTareas);
      await this.guardarYAbrirArchivo(
        `${this.plugin.settings.folder_SistemaGTD}/Tareas por Contexto.md`,
        contenido
      );
      new import_obsidian67.Notice(`Se encontraron ${totalTareas} tareas en ${totalContextos} contextos`);
    } catch (error) {
      console.error("Error en mostrarTareasContextos:", error);
      new import_obsidian67.Notice(`Error: ${error.message}`);
    }
  }
  generarVistaContextos(contextosConTareas, totalContextos, totalTareas) {
    const hoy = this.taskUtils.obtenerFechaLocal();
    let contenido = `# Tareas por Contexto

`;
    contenido += this.generarBotonActualizacion("mostrarTareasContextos");
    contenido += `> [!info] Actualizado: ${hoy.toLocaleDateString()} ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}
`;
    contenido += `> Total de contextos con tareas: ${totalContextos}
`;
    contenido += `> Total de tareas encontradas: ${totalTareas}

`;
    const arbolContextos = this.construirArbolContextos(contextosConTareas);
    contenido += `## Resumen de Contextos
`;
    this.generarResumenContextos(arbolContextos, 0).forEach((linea) => {
      contenido += linea + "\n";
    });
    contenido += "\n";
    contenido += `## Tareas por Contexto

`;
    this.generarDetalleContextos(arbolContextos, contextosConTareas).forEach((bloque) => {
      contenido += bloque;
    });
    return contenido;
  }
  construirArbolContextos(contextosConTareas) {
    const arbol = /* @__PURE__ */ new Map();
    Array.from(contextosConTareas.keys()).forEach((contexto) => {
      const niveles = contexto.split(" \u2192 ");
      let nodoActual = arbol;
      niveles.forEach((nivel, index) => {
        if (!nodoActual.has(nivel)) {
          nodoActual.set(nivel, {
            tareas: index === niveles.length - 1 ? contextosConTareas.get(contexto) : [],
            subcontextos: /* @__PURE__ */ new Map(),
            rutaCompleta: niveles.slice(0, index + 1).join(" \u2192 ")
          });
        }
        nodoActual = nodoActual.get(nivel).subcontextos;
      });
    });
    return arbol;
  }
  generarResumenContextos(arbol, nivel) {
    const lineas = [];
    arbol.forEach((nodo, contexto) => {
      const indentacion = "  ".repeat(nivel);
      const rutaContexto = nodo.rutaCompleta;
      const cantidadTareas = nodo.tareas.length;
      if (cantidadTareas > 0) {
        lineas.push(`${indentacion}- [[#${rutaContexto}|${contexto}]] (${cantidadTareas} tareas)`);
      } else {
        lineas.push(`${indentacion}- ${contexto}`);
      }
      if (nodo.subcontextos.size > 0) {
        lineas.push(...this.generarResumenContextos(nodo.subcontextos, nivel + 1));
      }
    });
    return lineas;
  }
  generarBloqueContexto(contexto, tareas) {
    let bloque = `### ${contexto}
[[#Resumen de Contextos|\u2B06\uFE0F]]
`;
    tareas.forEach((tarea) => {
      bloque += this.renderizarTareaContexto(tarea);
    });
    return bloque + "\n";
  }
  async getTareasPersonas() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS ASIGNADAS A PERSONAS ===");
    const personasConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        if (!tarea.etiquetas.personas || tarea.etiquetas.personas.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.personas.forEach((tag) => {
          const personaTag = `#px-${tag}`;
          if (!personasConTareas.has(personaTag)) {
            personasConTareas.set(personaTag, []);
          }
          personasConTareas.get(personaTag).push(tarea);
        });
        return true;
      }
    );
    personasConTareas.forEach((tareas2, persona) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      personasConTareas.set(persona, tareasOrdenadas);
    });
    return {
      personasConTareas,
      totalPersonas: personasConTareas.size,
      totalTareas: Array.from(personasConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  async getTareasContextos() {
    console.log("\n=== INICIANDO B\xDASQUEDA DE TAREAS POR CONTEXTO ===");
    const contextosConTareas = /* @__PURE__ */ new Map();
    const lineasPorArchivo = /* @__PURE__ */ new Map();
    const tareas = await this.procesarTareas(
      this.plugin.app.vault.getMarkdownFiles(),
      async (tarea) => {
        console.log("\nAnalizando tarea:", tarea.texto);
        if (!tarea.etiquetas.contextos || tarea.etiquetas.contextos.length === 0) {
          return false;
        }
        if (!lineasPorArchivo.has(tarea.rutaArchivo)) {
          lineasPorArchivo.set(
            tarea.rutaArchivo,
            await this.taskUtils.encontrarLineasTarea(
              this.plugin.app.vault.getAbstractFileByPath(tarea.rutaArchivo)
            )
          );
        }
        const lineasArchivo = lineasPorArchivo.get(tarea.rutaArchivo);
        if (lineasArchivo) {
          const lineInfo = lineasArchivo.get(tarea.texto);
          if (lineInfo) {
            tarea.lineInfo = lineInfo;
          }
        }
        tarea.etiquetas.contextos.forEach((contexto) => {
          const contextoNormalizado = this.normalizarContexto(contexto);
          if (!contextosConTareas.has(contextoNormalizado)) {
            contextosConTareas.set(contextoNormalizado, []);
          }
          contextosConTareas.get(contextoNormalizado).push(tarea);
        });
        return true;
      }
    );
    contextosConTareas.forEach((tareas2, contexto) => {
      const tareasOrdenadas = TaskWeightCalculator.sortTasks(tareas2);
      contextosConTareas.set(contexto, tareasOrdenadas);
    });
    return {
      contextosConTareas,
      totalContextos: contextosConTareas.size,
      totalTareas: Array.from(contextosConTareas.values()).reduce((sum, tareas2) => sum + tareas2.length, 0)
    };
  }
  generarDetalleContextos(arbol, contextosConTareas) {
    const bloques = [];
    const procesarNodo = (nodo, rutaActual = []) => {
      nodo.forEach((info, contexto) => {
        const rutaCompleta = info.rutaCompleta;
        if (info.tareas.length > 0) {
          const tareasOrdenadas = TaskWeightCalculator.sortTasks(info.tareas);
          bloques.push(this.generarBloqueContexto(rutaCompleta, tareasOrdenadas));
        }
        if (info.subcontextos.size > 0) {
          procesarNodo(info.subcontextos, [...rutaActual, contexto]);
        }
      });
    };
    procesarNodo(arbol);
    return bloques;
  }
  renderizarTareaContexto(tarea) {
    var _a, _b;
    let contenido = `- [ ] ${tarea.texto}
`;
    contenido += `    \u{1F4CD} [[${tarea.rutaArchivo}|${tarea.titulo}]]`;
    if ((_a = tarea.lineInfo) == null ? void 0 : _a.numero) {
      contenido += ` (l\xEDnea ${tarea.lineInfo.numero})`;
    }
    contenido += "\n";
    const prioridad = this.obtenerPrioridadTarea(tarea.texto);
    if (prioridad) {
      contenido += `    ${prioridad.emoji} Prioridad: ${prioridad.nombre}
`;
    }
    if (tarea.weight) {
      const { baseWeight, timeWeight, priorityWeight } = tarea.weight;
      if (baseWeight + timeWeight + priorityWeight > 0) {
        contenido += `    \u2696\uFE0F Peso total: ${tarea.weight.totalWeight}
`;
      }
    }
    const fechas = [];
    if (tarea.fechaVencimiento) {
      fechas.push(`\u{1F4C5} ${this.formatearFechaConContexto(tarea.fechaVencimiento, "due")}`);
    }
    if (tarea.fechaScheduled) {
      fechas.push(`\u23F3 ${this.formatearFechaConContexto(tarea.fechaScheduled, "scheduled")}`);
    }
    if (tarea.fechaStart) {
      fechas.push(`\u{1F6EB} ${this.formatearFechaConContexto(tarea.fechaStart, "start")}`);
    }
    if (fechas.length > 0) {
      contenido += `    \u23F0 Fechas:
        ${fechas.join("\n        ")}
`;
    }
    if (tarea.horaInicio || tarea.horaFin) {
      contenido += `    \u231A Horario: ${tarea.horaInicio || "--:--"} - ${tarea.horaFin || "--:--"}
`;
    }
    if (((_b = tarea.etiquetas.personas) == null ? void 0 : _b.length) > 0) {
      contenido += `    \u{1F464} Asignado a: ${tarea.etiquetas.personas.map(
        (p) => this.formatearNombrePersona(`#px-${p}`)
      ).join(" | ")}
`;
    }
    if (tarea.dependencyId) {
      contenido += `    \u21B3 Depende de: `;
      if (tarea.dependencyTitle) {
        contenido += `[[${tarea.dependencyLocation}|${tarea.dependencyTitle}]]`;
        if (tarea.dependencyTexto) {
          contenido += `: "${tarea.dependencyTexto}"`;
        }
      }
      contenido += tarea.isBlocked ? " \u23F3" : " \u2705";
      contenido += "\n";
    }
    return contenido;
  }
};

// src/modules/moduloTabTitle/index.ts
var import_obsidian71 = require("obsidian");

// src/modules/moduloTabTitle/commands.ts
var import_obsidian68 = require("obsidian");
function registerCommands4(plugin, settings) {
  plugin.addCommand({
    id: "set-tab-title-alias",
    name: "Mostrar alias en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "alias";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-title",
    name: "Mostrar t\xEDtulo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "title";
      plugin.saveData(settings);
    }
  });
  plugin.addCommand({
    id: "set-tab-title-filename",
    name: "Mostrar nombre de archivo en pesta\xF1as",
    callback: () => {
      settings.titleDisplayMode = "filename";
      plugin.saveData(settings);
    }
  });
}

// src/modules/moduloTabTitle/TabTitleManager.ts
var import_obsidian70 = require("obsidian");

// src/modules/moduloTabTitle/views/CustomMarkdownView.ts
var import_obsidian69 = require("obsidian");

// src/modules/moduloTabTitle/utils/logger.ts
var Logger = class {
  static debug(message, ...args) {
    console.debug(`${this.PREFIX} ${message}`, ...args);
  }
  static info(message, ...args) {
    console.info(`${this.PREFIX} ${message}`, ...args);
  }
  static error(message, error) {
    console.error(`${this.PREFIX} ${message}`, error || "");
  }
  static warn(message, ...args) {
    console.warn(`${this.PREFIX} ${message}`, ...args);
  }
};
Logger.PREFIX = "\u{1F3F7}\uFE0F [TabTitle]";

// src/modules/moduloTabTitle/TabTitleManager.ts
var TabTitleManager = class {
  constructor(plugin, settings) {
    this.plugin = plugin;
    this.settings = settings;
    this.customViews = /* @__PURE__ */ new Map();
    Logger.info("TabTitleManager initialized");
  }
  updateAllTabs() {
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView) {
        this.updateTab(leaf);
      }
    }
  }
  async updateTabForFile(file) {
    var _a;
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView && ((_a = leaf.view.file) == null ? void 0 : _a.path) === file.path) {
        await this.updateTab(leaf);
      }
    }
  }
  async getPreferredTitleWithSource(file) {
    try {
      const metadata = await this.waitForMetadata(file);
      if (metadata == null ? void 0 : metadata.aliases) {
        if (Array.isArray(metadata.aliases) && metadata.aliases.length >= 3) {
          return {
            displayTitle: `${metadata.aliases[2]} / ${metadata.aliases[0]}`,
            source: "aliases-special"
          };
        } else if (Array.isArray(metadata.aliases) && metadata.aliases.length > 0) {
          return {
            displayTitle: metadata.aliases[0],
            source: "aliases"
          };
        } else if (typeof metadata.aliases === "string") {
          return {
            displayTitle: metadata.aliases,
            source: "aliases"
          };
        }
      }
      if (metadata == null ? void 0 : metadata.titulo) {
        return {
          displayTitle: metadata.titulo,
          source: "titulo"
        };
      }
      return {
        displayTitle: null,
        source: "basename"
      };
    } catch (error) {
      Logger.error(`Error getting title for ${file.path}:`, error);
      return {
        displayTitle: null,
        source: "error"
      };
    }
  }
  async waitForMetadata(file) {
    return new Promise((resolve) => {
      const maxAttempts = 10;
      let attempts = 0;
      const checkMetadata = () => {
        const cache = this.plugin.app.metadataCache.getFileCache(file);
        if ((cache == null ? void 0 : cache.frontmatter) || attempts >= maxAttempts) {
          resolve((cache == null ? void 0 : cache.frontmatter) || {});
        } else {
          attempts++;
          setTimeout(checkMetadata, 100);
        }
      };
      checkMetadata();
    });
  }
  // Método para aplicar scroll horizontal a un elemento de título de pestaña
  applyHorizontalScrollToTab(tabElement) {
    if (tabElement.getAttribute("data-scroll-enabled") === "true")
      return;
    const originalStyles = {
      overflow: tabElement.style.overflow,
      textOverflow: tabElement.style.textOverflow,
      whiteSpace: tabElement.style.whiteSpace,
      maxWidth: tabElement.style.maxWidth,
      transition: tabElement.style.transition
    };
    tabElement.style.overflow = "hidden";
    tabElement.style.textOverflow = "ellipsis";
    tabElement.style.whiteSpace = "nowrap";
    tabElement.style.maxWidth = "150px";
    tabElement.style.transition = "max-width 0.3s ease-in-out";
    const mouseEnterHandler = () => {
      const fullWidth = tabElement.scrollWidth;
      tabElement.style.overflow = "auto";
      tabElement.style.textOverflow = "clip";
      tabElement.style.maxWidth = Math.min(fullWidth, 300) + "px";
    };
    const mouseLeaveHandler = () => {
      tabElement.style.overflow = "hidden";
      tabElement.style.textOverflow = "ellipsis";
      tabElement.style.maxWidth = "150px";
      setTimeout(() => {
        tabElement.scrollLeft = 0;
      }, 300);
    };
    tabElement.addEventListener("mouseenter", mouseEnterHandler);
    tabElement.addEventListener("mouseleave", mouseLeaveHandler);
    tabElement.setAttribute("data-scroll-enabled", "true");
    if (!this.scrollEnabledElements)
      this.scrollEnabledElements = /* @__PURE__ */ new Map();
    this.scrollEnabledElements.set(tabElement, {
      mouseEnterHandler,
      mouseLeaveHandler,
      originalStyles
    });
  }
  // Método para limpiar el scroll de un elemento
  removeHorizontalScrollFromTab(tabElement) {
    if (!tabElement || !this.scrollEnabledElements)
      return;
    const handlers = this.scrollEnabledElements.get(tabElement);
    if (!handlers)
      return;
    tabElement.removeEventListener("mouseenter", handlers.mouseEnterHandler);
    tabElement.removeEventListener("mouseleave", handlers.mouseLeaveHandler);
    Object.assign(tabElement.style, handlers.originalStyles);
    tabElement.removeAttribute("data-scroll-enabled");
    this.scrollEnabledElements.delete(tabElement);
  }
  // Sobrescritura del método updateTab
  async updateTab(leaf) {
    if (!(leaf.view instanceof import_obsidian70.MarkdownView) || !leaf.view.file)
      return;
    const { displayTitle, source } = await this.getPreferredTitleWithSource(leaf.view.file);
    if (displayTitle) {
      let formattedTitle;
      if (source === "aliases-special" || source === "aliases-two") {
        formattedTitle = displayTitle;
      } else {
        formattedTitle = `${leaf.view.file.basename} / ${displayTitle}`;
      }
      leaf.view.titleEl.innerText = formattedTitle;
      if (leaf.tabHeaderInnerTitleEl) {
        leaf.tabHeaderInnerTitleEl.innerText = formattedTitle;
        this.applyHorizontalScrollToTab(leaf.tabHeaderInnerTitleEl);
      }
    }
  }
  // Método para limpiar recursos al desactivar
  cleanupScrollHandlers() {
    if (!this.scrollEnabledElements)
      return;
    this.scrollEnabledElements.forEach((handlers, element) => {
      this.removeHorizontalScrollFromTab(element);
    });
    this.scrollEnabledElements.clear();
  }
  // Sobrescribir restoreDefaultTitles para incluir la limpieza
  restoreDefaultTitles() {
    this.cleanupScrollHandlers();
    const leaves = this.plugin.app.workspace.getLeavesOfType("markdown");
    for (const leaf of leaves) {
      if (leaf.view instanceof import_obsidian70.MarkdownView && leaf.view.file) {
        leaf.view.titleEl.innerText = leaf.view.file.basename;
        if (leaf.tabHeaderInnerTitleEl) {
          leaf.tabHeaderInnerTitleEl.innerText = leaf.view.file.basename;
        }
      }
    }
  }
};

// src/modules/moduloTabTitle/defaults/defaultSettings.ts
var DEFAULT_TAB_SETTINGS = {
  titleDisplayMode: "filename"
};

// src/modules/moduloTabTitle/index.ts
var ModuloTabTitle = class {
  constructor(plugin) {
    this.tabManager = null;
    this.plugin = plugin;
    this.settings = DEFAULT_TAB_SETTINGS;
  }
  async activate() {
    try {
      await this.loadSettings();
      if (!this.settings.titleDisplayMode) {
        this.settings.titleDisplayMode = "alias";
        await this.saveSettings();
      }
      this.tabManager = new TabTitleManager(this.plugin, this.settings);
      registerCommands4(this.plugin, this.settings);
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", () => {
          var _a;
          try {
            (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
          } catch (error) {
            Logger.error("Error updating tabs on layout change:", error);
          }
        })
      );
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("file-open", (file) => {
          try {
            if (file && this.tabManager) {
              this.tabManager.updateTabForFile(file);
            }
          } catch (error) {
            Logger.error("Error updating tab on file open:", error);
          }
        })
      );
      setTimeout(() => {
        var _a;
        (_a = this.tabManager) == null ? void 0 : _a.updateAllTabs();
      }, 1e3);
    } catch (error) {
      Logger.error("Error activating TabTitle module:", error);
    }
  }
  deactivate() {
    try {
      if (this.tabManager) {
        this.tabManager.restoreDefaultTitles();
        this.tabManager = null;
      }
    } catch (error) {
      Logger.error("Error deactivating TabTitle module:", error);
    }
  }
  async loadSettings() {
    try {
      const loadedData = await this.plugin.loadData();
      this.settings = Object.assign({}, DEFAULT_TAB_SETTINGS, loadedData);
    } catch (error) {
      Logger.error("Error loading TabTitle settings:", error);
      this.settings = DEFAULT_TAB_SETTINGS;
    }
  }
  async saveSettings() {
    try {
      await this.plugin.saveData(this.settings);
    } catch (error) {
      Logger.error("Error saving TabTitle settings:", error);
    }
  }
};

// src/modules/taskManager/index.ts
var import_obsidian73 = require("obsidian");

// src/modules/taskManager/commands.ts
var import_obsidian72 = require("obsidian");
var TaskDaysModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.dias = 7;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas pr\xF3ximas" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue("7").onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var FutureTasksModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas futuras" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas hacia adelante").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasFuturas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ScheduledTaskDaysModal = class extends import_obsidian72.Modal {
  constructor(pluginInstance, defaultDays = 7) {
    super(pluginInstance.app);
    this.pluginInstance = pluginInstance;
    this.defaultDays = defaultDays;
    this.dias = 7;
    this.dias = defaultDays;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Mostrar tareas programadas pr\xF3ximas" });
    new import_obsidian72.Setting(contentEl).setName("N\xFAmero de d\xEDas").setDesc("Mostrar tareas programadas para los pr\xF3ximos X d\xEDas").addText((text) => text.setValue(this.defaultDays.toString()).onChange((value) => {
      this.dias = parseInt(value) || 7;
    }));
    new import_obsidian72.Setting(contentEl).addButton((btn) => btn.setButtonText("Mostrar tareas").setCta().onClick(async () => {
      this.close();
      if (this.pluginInstance.tareasAPI) {
        await this.pluginInstance.tareasAPI.mostrarTareasScheduledProximas(this.dias);
      }
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function registerTaskManagerCommands(plugin) {
  const managementPlugin = plugin;
  const commandIds = [];
  const tareasVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-vencidas",
    name: "Mostrar Tareas Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasVencidasCommand.id);
  const tareasProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas",
    name: "Mostrar Tareas Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasProximas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCommand.id);
  const tareasProximasCustomCommand = plugin.addCommand({
    id: "mostrar-tareas-proximas-custom",
    name: "Mostrar Tareas Pr\xF3ximas (Especificar d\xEDas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new TaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasProximasCustomCommand.id);
  const tareasHoyCommand = plugin.addCommand({
    id: "mostrar-tareas-hoy",
    name: "Mostrar Tareas para Hoy",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasHoy();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasHoyCommand.id);
  const tareasStartVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-vencidas",
    name: "Mostrar Tareas Pendientes de Iniciar",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartVencidasCommand.id);
  const tareasStartProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-start-proximas",
    name: "Mostrar Tareas por Iniciar (Vencidas y Pr\xF3ximas)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasStartProximas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasStartProximasCommand.id);
  const tareasFuturasCommand = plugin.addCommand({
    id: "mostrar-tareas-futuras",
    name: "Mostrar Tareas Futuras Programadas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new FutureTasksModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasFuturasCommand.id);
  const tareasEnEjecucionCommand = plugin.addCommand({
    id: "mostrar-tareas-en-ejecucion",
    name: "Mostrar Tareas en Ejecuci\xF3n",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasEnEjecucion();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasEnEjecucionCommand.id);
  const tareasScheduledVencidasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-vencidas",
    name: "Mostrar Tareas Scheduled Vencidas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasScheduledVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledVencidasCommand.id);
  const tareasScheduledProximasCommand = plugin.addCommand({
    id: "mostrar-tareas-scheduled-proximas",
    name: "Mostrar Tareas Scheduled Pr\xF3ximas",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        const modal = new ScheduledTaskDaysModal(managementPlugin);
        modal.open();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasScheduledProximasCommand.id);
  const todasTareasVencidasCommand = plugin.addCommand({
    id: "mostrar-todas-tareas-vencidas",
    name: "Mostrar Todas las Tareas Vencidas (Due, Scheduled, Start)",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTodasTareasVencidas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(todasTareasVencidasCommand.id);
  const tareasDependientesCommand = plugin.addCommand({
    id: "mostrar-tareas-dependientes",
    name: "Mostrar Tareas con Dependencias",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasDependientes();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasDependientesCommand.id);
  const tareasPersonasCommand = plugin.addCommand({
    id: "mostrar-tareas-personas",
    name: "Mostrar Tareas por Persona",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasPersonas();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasPersonasCommand.id);
  const tareasContextosCommand = plugin.addCommand({
    id: "mostrar-tareas-contextos",
    name: "Mostrar Tareas por Contexto",
    callback: async () => {
      if (managementPlugin.tareasAPI) {
        await managementPlugin.tareasAPI.mostrarTareasContextos();
      } else {
        new import_obsidian72.Notice("El m\xF3dulo de tareas no est\xE1 disponible.");
      }
    }
  });
  commandIds.push(tareasContextosCommand.id);
  plugin.registeredTaskManagerCommandIds = commandIds;
}
function deactivateTaskManagerCommands(plugin) {
  const commandIds = plugin.registeredTaskManagerCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian72.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredTaskManagerCommandIds = [];
}

// src/modules/taskManager/index.ts
var ModuloTaskManager = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  activate() {
    registerTaskManagerCommands(this.plugin);
  }
  deactivate() {
    deactivateTaskManagerCommands(this.plugin);
  }
};

// src/modules/dataviewQueries/index.ts
var import_obsidian76 = require("obsidian");

// src/modules/dataviewQueries/DataviewQueryManager.ts
var import_obsidian74 = require("obsidian");
var DataviewQueryManager = class extends import_obsidian74.Component {
  constructor(plugin) {
    super();
    // Cache para almacenar resultados de consultas frecuentes
    this.queryCache = /* @__PURE__ */ new Map();
    this.plugin = plugin;
  }
  // Método para ejecutar consultas con caché
  async executeQuery(queryKey, queryFn, ttl = 6e4) {
    const cached = this.queryCache.get(queryKey);
    const now2 = Date.now();
    if (cached && now2 - cached.timestamp < cached.ttl) {
      return cached.data;
    }
    const result = await queryFn();
    this.queryCache.set(queryKey, {
      data: result,
      timestamp: now2,
      ttl
    });
    return result;
  }
  // Método para limpiar caché
  clearCache(queryKey) {
    if (queryKey) {
      this.queryCache.delete(queryKey);
    } else {
      this.queryCache.clear();
    }
  }
};

// src/modules/dataviewQueries/commands.ts
var import_obsidian75 = require("obsidian");
function registerCommands5(plugin) {
  const clearCacheCommand = plugin.addCommand({
    id: "clear-dataview-queries-cache",
    name: "Limpiar cach\xE9 de consultas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.queryManager.clearCache();
          new import_obsidian75.Notice("Cach\xE9 de consultas limpiado");
        }
      } catch (error) {
        console.error("Error al limpiar cach\xE9:", error);
        new import_obsidian75.Notice("Error al limpiar cach\xE9 de consultas");
      }
    }
  });
  const reloadQueriesCommand = plugin.addCommand({
    id: "reload-dataview-queries",
    name: "Recargar consultas activas",
    callback: () => {
      try {
        const moduleInstance = plugin.moduloDataviewQueries;
        if (moduleInstance == null ? void 0 : moduleInstance.queryManager) {
          moduleInstance.clearCache();
          app.workspace.trigger("dataview:refresh-views");
          new import_obsidian75.Notice("Consultas recargadas");
        }
      } catch (error) {
        console.error("Error al recargar consultas:", error);
        new import_obsidian75.Notice("Error al recargar consultas");
      }
    }
  });
  plugin.registeredDataviewQueryCommandIds = [
    clearCacheCommand.id,
    reloadQueriesCommand.id
  ];
}
function deactivateCommands4(plugin) {
  const commandIds = plugin.registeredDataviewQueryCommandIds;
  if (!commandIds)
    return;
  commandIds.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian75.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredDataviewQueryCommandIds = [];
}

// src/modules/dataviewQueries/QueryRenderer.ts
var QueryRenderer = class {
  async renderTaskButtons(container, options = {}) {
    const buttonContainer = container.createEl("div", {
      cls: "task-buttons-container",
      attr: { style: "display: grid; grid-gap: 8px; padding: 16px; background: var(--background-secondary); border-radius: 8px;" }
    });
    if (options.showTitle !== false) {
      buttonContainer.createEl("h4", {
        text: "\u{1F4CB} Gesti\xF3n de Tareas",
        attr: { style: "margin: 0 0 12px 0;" }
      });
    }
    const buttons = [
      {
        id: "today",
        text: "Tareas de Hoy",
        icon: "\u{1F4C5}",
        color: "#4CAF50",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasHoy()
      },
      {
        id: "overdue",
        text: "Tareas Vencidas",
        icon: "\u26A0\uFE0F",
        color: "#f44336",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasVencidas()
      },
      {
        id: "upcoming",
        text: "Tareas Pr\xF3ximas",
        icon: "\u{1F3AF}",
        color: "#2196F3",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTareasProximas()
      },
      {
        id: "start",
        text: "Todas las Vencidas",
        icon: "\u{1F313}",
        color: "#FF9800",
        action: () => app.plugins.plugins["obsidian-personal-management"].tareasAPI.mostrarTodasTareasVencidas()
      }
    ];
    const buttonGrid = buttonContainer.createEl("div", {
      attr: { style: "display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;" }
    });
    buttons.forEach((btn) => {
      const button = buttonGrid.createEl("button", {
        attr: {
          style: `
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        padding: 8px 16px;
                        background-color: ${btn.color};
                        color: white;
                        border: none;
                        border-radius: 6px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                    `
        }
      });
      button.createEl("span", { text: btn.icon });
      button.createEl("span", { text: btn.text });
      button.addEventListener("mouseenter", () => {
        button.style.filter = "brightness(1.1)";
        button.style.transform = "translateY(-1px)";
      });
      button.addEventListener("mouseleave", () => {
        button.style.filter = "brightness(1)";
        button.style.transform = "translateY(0)";
      });
      button.addEventListener("click", async () => {
        try {
          button.style.opacity = "0.7";
          new Notice("Actualizando vista...");
          await btn.action();
        } catch (error) {
          console.error(`Error en acci\xF3n ${btn.id}:`, error);
          new Notice(`Error: ${error.message}`);
        } finally {
          button.style.opacity = "1";
        }
      });
    });
    if (options.showTimestamp) {
      buttonContainer.createEl("div", {
        text: `\xDAltima actualizaci\xF3n: ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}`,
        attr: {
          style: "margin-top: 8px; text-align: right; font-size: 0.8em; color: var(--text-muted);"
        }
      });
    }
  }
  async renderProjectHierarchy(container, options = {}) {
  }
};

// src/modules/dataviewQueries/index.ts
var ModuloDataviewQueries = class {
  constructor(plugin) {
    this._isActive = false;
    console.log("ModuloDataviewQueries: Inicializando...");
    this.plugin = plugin;
    this.queryManager = new DataviewQueryManager(plugin);
    this.queryRenderer = new QueryRenderer();
  }
  activate() {
    console.log("ModuloDataviewQueries: Iniciando activaci\xF3n...");
    if (this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 activo");
      return;
    }
    try {
      registerCommands5(this.plugin);
      this.registerDataviewExtensions();
      this._isActive = true;
      console.log("ModuloDataviewQueries: Activaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en activaci\xF3n:", error);
      this._isActive = false;
      throw error;
    }
  }
  deactivate() {
    console.log("ModuloDataviewQueries: Iniciando desactivaci\xF3n...");
    if (!this._isActive) {
      console.log("ModuloDataviewQueries: Ya est\xE1 inactivo");
      return;
    }
    try {
      deactivateCommands4(this.plugin);
      this.unregisterDataviewExtensions();
      this._isActive = false;
      console.log("ModuloDataviewQueries: Desactivaci\xF3n exitosa");
    } catch (error) {
      console.error("ModuloDataviewQueries: Error en desactivaci\xF3n:", error);
      throw error;
    }
  }
  isActive() {
    return this._isActive;
  }
  async renderQuery(queryType, params) {
    if (!this._isActive) {
      throw new Error("El m\xF3dulo no est\xE1 activo");
    }
    switch (queryType) {
      case "taskButtons":
        await this.queryRenderer.renderTaskButtons(params.container, params.options);
        break;
      default:
        throw new Error(`Tipo de consulta no soportado: ${queryType}`);
    }
  }
  registerDataviewExtensions() {
    const boundFunctions = {
      renderTaskButtons: (dv, container, options) => {
        return this.queryRenderer.renderTaskButtons(container, options);
      },
      renderProjectHierarchy: (dv, container, options) => {
        return this.queryRenderer.renderProjectHierarchy(container, options);
      }
    };
    window.customQueries = boundFunctions;
    console.log("ModuloDataviewQueries: Extensions registradas");
  }
  unregisterDataviewExtensions() {
    delete window.customQueries;
    console.log("ModuloDataviewQueries: Extensions eliminadas");
  }
};

// src/modules/taskNavigator/index.ts
var import_obsidian79 = require("obsidian");

// src/modules/taskNavigator/commands.ts
var import_obsidian78 = require("obsidian");

// src/modules/taskNavigator/taskNavigator.ts
var import_obsidian77 = require("obsidian");
init_seleccionModalTareas();
var TaskNavigator = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Navega a la tarea seleccionada por el usuario
   */
  async navigateToTask() {
    try {
      const tasks = await this.findPendingTasks();
      if (tasks.length === 0) {
        new import_obsidian77.Notice("No se encontraron tareas en ejecuci\xF3n.");
        return;
      }
      const displayOptions = tasks.map((task) => task.displayText);
      const placeholder = "Selecciona una tarea para navegar";
      const modalMenu = new SeleccionModalTareas(
        this.app,
        displayOptions,
        tasks.map((_, index) => index.toString()),
        placeholder
      );
      try {
        const selectedIndex = parseInt(await modalMenu.openAndAwaitSelection());
        const selectedTask = tasks[selectedIndex];
        await this.openFileAtLine(selectedTask.file, selectedTask.lineNumber);
        new import_obsidian77.Notice(`Navegando a la tarea en ${selectedTask.file.basename}`);
      } catch (error) {
        console.log("Selecci\xF3n de tarea cancelada por el usuario");
      }
    } catch (error) {
      console.error("Error en navegaci\xF3n de tareas:", error);
      throw error;
    }
  }
  /**
   * Encuentra todas las tareas pendientes (con estado [/]) en los archivos
   */
  async findPendingTasks() {
    var _a;
    const tasks = [];
    const archivos = this.app.vault.getMarkdownFiles();
    const archivosRelevantes = archivos.filter((archivo) => {
      return !archivo.path.includes("Plantillas") && !archivo.path.includes("Estructura/GTD/Sistema GTD/Sistema") && !archivo.path.includes("Archivo");
    });
    for (const archivo of archivosRelevantes) {
      try {
        const contenido = await this.app.vault.read(archivo);
        const lineas = contenido.split("\n");
        const metadata = this.app.metadataCache.getFileCache(archivo);
        let aliasDisplay = "";
        if ((_a = metadata == null ? void 0 : metadata.frontmatter) == null ? void 0 : _a.aliases) {
          let aliases = metadata.frontmatter.aliases;
          if (!Array.isArray(aliases))
            aliases = [aliases];
          if (aliases.length >= 2) {
            aliasDisplay = aliases[1];
          } else if (aliases.length >= 1) {
            aliasDisplay = aliases[0];
          }
        }
        if (!aliasDisplay) {
          aliasDisplay = archivo.basename;
        }
        for (let i = 0; i < lineas.length; i++) {
          const linea = lineas[i];
          if (linea.match(/^ *- \[\/\] .*/)) {
            const textoTarea = await this.limpiarTextoTarea(linea);
            const displayText = `${aliasDisplay} / ${textoTarea}`;
            tasks.push({
              text: textoTarea,
              file: archivo,
              lineNumber: i,
              displayText
            });
          }
        }
      } catch (error) {
        console.error(`Error al procesar el archivo ${archivo.path}:`, error);
      }
    }
    return tasks;
  }
  /**
   * Limpia el texto de una tarea para mostrarla de forma legible
   * @param titulo Texto completo de la línea de la tarea
   */
  async limpiarTextoTarea(titulo) {
    return new Promise((resolve) => {
      let textoLimpio = titulo.split("\n")[0];
      textoLimpio = textoLimpio.replace(/#([\w-/]+)/g, (match2, p1) => {
        let transformado = p1.replace(/\//g, "_");
        transformado = transformado.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
        return transformado;
      });
      textoLimpio = textoLimpio.replace(/\[\w+::[^\]]+\]/g, "");
      textoLimpio = textoLimpio.replace(/^\s*-\s*\[\/\]\s*/, "");
      textoLimpio = textoLimpio.replace(
        /\p{Extended_Pictographic}\s*\d{4}-\d{2}-\d{2}(?:\s*\d{2}:\d{2}(?::\d{2})?)?/gu,
        ""
      );
      textoLimpio = textoLimpio.replace(/\p{Extended_Pictographic}/gu, "");
      textoLimpio = textoLimpio.replace(/\[[^\]]*\]/g, "");
      const caracteresNoPermitidos = /[<>:"\/\\|?*\x00-\x1F]/g;
      textoLimpio = textoLimpio.replace(caracteresNoPermitidos, "_");
      textoLimpio = textoLimpio.replace(/\s+/g, " ");
      resolve(textoLimpio.trim());
    });
  }
  /**
   * Abre un archivo y navega a una línea específica
   * @param file Archivo a abrir
   * @param line Número de línea a la que navegar
   */
  async openFileAtLine(file, line) {
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.openFile(file);
    const view = this.app.workspace.getActiveViewOfType(import_obsidian77.MarkdownView);
    if (view) {
      const editor = view.editor;
      const position = { line, ch: 0 };
      editor.setCursor(position);
      editor.scrollIntoView({ from: position, to: position }, true);
      const lineLength = editor.getLine(line).length;
      editor.setSelection(
        { line, ch: 0 },
        { line, ch: lineLength }
      );
      editor.focus();
    }
  }
};

// src/modules/taskNavigator/commands.ts
function registerCommands6(plugin) {
  const taskNavigator = new TaskNavigator(plugin);
  const navigatorCommand = plugin.addCommand({
    id: "navigate-to-tasks",
    name: "Navegar a tareas en ejecuci\xF3n",
    callback: async () => {
      try {
        await taskNavigator.navigateToTask();
      } catch (error) {
        console.error("Error al navegar a la tarea:", error);
        new import_obsidian78.Notice("No se pudo navegar a la tarea seleccionada.");
      }
    }
  });
  if (!plugin.registeredTaskNavigatorIDs) {
    plugin.registeredTaskNavigatorIDs = [];
  }
  plugin.registeredTaskNavigatorIDs.push(navigatorCommand.id);
}
function deactivateCommands5(plugin) {
  if (!plugin.registeredTaskNavigatorIDs)
    return;
  plugin.registeredTaskNavigatorIDs.forEach((commandId) => {
    const command = plugin.app.commands.commands[commandId];
    if (command) {
      command.callback = () => new import_obsidian78.Notice("Este comando ha sido desactivado.");
    }
  });
  plugin.registeredTaskNavigatorIDs = [];
}

// src/modules/taskNavigator/index.ts
var TaskNavigatorModule = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Activa el módulo registrando los comandos
   */
  activate() {
    registerCommands6(this.plugin);
  }
  /**
   * Desactiva el módulo, asegurándose de limpiar todos los comandos registrados
   */
  deactivate() {
    deactivateCommands5(this.plugin);
  }
};

// src/main.ts
var ManagementPlugin = class extends import_obsidian80.Plugin {
  constructor() {
    super(...arguments);
    // Declara una propiedad `settings` para almacenar la configuración del plugin.
    this.statusBarExtension = null;
    this.moduloRegistroTiempo = null;
    this.moduloBase = null;
    this.moduloGTD = null;
    //moduloTerceros: ModuloTerceros | null = null;
    this.registeredCommandIdsRT = [];
    this.registeredCommandIdsMB = [];
    this.registeredCommandIdsGTD = [];
    this.registeredCommandIds_Terceros = [];
    this.ribbonButtonRT = null;
    this.moduloTabTitle = null;
    this.moduloTaskManager = null;
    this.moduloDataviewQueries = null;
    this.taskNavigatorModule = null;
  }
  // Declara una propiedad para mantener una instancia de `StatusBarExtension`.
  async onload() {
    var _a, _b, _c, _d;
    await this.loadSettings();
    this.tp = this.getTp();
    this.registerView(
      "vista-registro-activo",
      (leaf) => new VistaRegistroActivo(leaf, this)
    );
    this.registerView(
      "vista-resumen-semanal",
      (leaf) => new VistaResumenSemanal(leaf, this)
    );
    this.registerView(
      "vista-registro-diario",
      (leaf) => new VistaRegistroDiario(leaf, this)
    );
    this.registroTiempoAPI = new registroTiempoAPI(this);
    this.starterAPI = new starterAPI(this);
    this.addOnsAPI = new addOnsAPI(this);
    this.YAMLUpdaterAPI = new YAMLUpdaterAPI2(this);
    this.updateSesionLectura = new updateSesionLectura(this);
    this.menuHoyAPI = new menuHoyAPI(this);
    this.menuSemanalAPI = new menuSemanalAPI(this);
    this.subsistemasAPI = new subsistemasAPI(this);
    this.librosAPI = new librosAPI(this);
    this.newInbox = ingresarBandejaEntrada.bind(this);
    this.taskNavigatorModule = new TaskNavigatorModule(this);
    this.addSettingTab(new PluginMainSettingsTab(this));
    this.statusBarExtension = new StatusBarExtension(this);
    this.moduloRegistroTiempo = new ModuloRegistroTiempo(this);
    this.moduloBase = new ModuloBase(this);
    this.moduloGTD = new ModuloGTD(this);
    this.tareasAPI = new TareasAPI(this);
    this.moduloTabTitle = new ModuloTabTitle(this);
    this.moduloTaskManager = new ModuloTaskManager(this);
    this.moduloDataviewQueries = new ModuloDataviewQueries(this);
    this.applyConfiguration();
    console.log("Iniciando carga de plugin de Gesti\xF3n Personal");
    this.registerGPThora();
    if (this.settings.moduloTabTitle) {
      (_a = this.moduloTabTitle) == null ? void 0 : _a.activate();
    } else {
      (_b = this.moduloTabTitle) == null ? void 0 : _b.deactivate();
    }
    if (this.settings.moduloTaskManager) {
      this.moduloTaskManager.activate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("ManagementPlugin: Aplicando configuraci\xF3n DataviewQueries...");
      try {
        if (!this.moduloDataviewQueries.isActive()) {
          this.moduloDataviewQueries.activate();
        }
      } catch (error) {
        console.error("Error en applyConfiguration:", error);
      }
    } else {
      (_c = this.moduloDataviewQueries) == null ? void 0 : _c.deactivate();
    }
    if (this.settings.taskNavigatorModule) {
      (_d = this.taskNavigatorModule) == null ? void 0 : _d.activate();
    }
  }
  registerGPThora() {
    const gptHora = new GPThora(this.app);
    gptHora.onload();
  }
  applyConfiguration() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;
    if (this.settings.moduloBase) {
      (_a = this.moduloBase) == null ? void 0 : _a.activate(this);
    } else {
      (_b = this.moduloBase) == null ? void 0 : _b.deactivate(this);
    }
    if (this.settings.moduloRegistroTiempo) {
      (_c = this.moduloRegistroTiempo) == null ? void 0 : _c.activate(this);
    } else {
      (_d = this.moduloRegistroTiempo) == null ? void 0 : _d.deactivate(this);
    }
    if (this.settings.moduloAliasStatusBar) {
      (_e = this.statusBarExtension) == null ? void 0 : _e.activate();
    } else {
      (_f = this.statusBarExtension) == null ? void 0 : _f.deactivate();
    }
    if (this.settings.moduloGTD) {
      (_g = this.moduloGTD) == null ? void 0 : _g.activate(this);
    } else {
      (_h = this.moduloGTD) == null ? void 0 : _h.deactivate(this);
    }
    if (this.settings.moduloTaskManager) {
      (_i = this.moduloTaskManager) == null ? void 0 : _i.activate();
    } else {
      (_j = this.moduloTaskManager) == null ? void 0 : _j.deactivate();
    }
    if (this.settings.moduloDataviewQueries) {
      console.log("Aplicando configuraci\xF3n: Activando DataviewQueries");
      (_k = this.moduloDataviewQueries) == null ? void 0 : _k.activate();
    } else {
      console.log("Aplicando configuraci\xF3n: Desactivando DataviewQueries");
      (_l = this.moduloDataviewQueries) == null ? void 0 : _l.deactivate();
    }
    if (this.settings.taskNavigatorModule) {
      (_m = this.taskNavigatorModule) == null ? void 0 : _m.activate();
    } else {
      (_n = this.taskNavigatorModule) == null ? void 0 : _n.deactivate();
    }
  }
  async onunload() {
    console.log("Descargando plugin Gesti\xF3n Personal");
    if (this.moduloDataviewQueries) {
      this.moduloDataviewQueries.deactivate();
    }
    if (this.taskNavigatorModule) {
      this.taskNavigatorModule.deactivate();
    }
    delete this.app.gpManagement;
    return Promise.resolve();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.applyConfiguration();
  }
  getTp() {
    if (!this.app || !this.app.plugins.enabledPlugins.has("templater-obsidian")) {
      console.error("El plugin Templater no est\xE1 habilitado.");
      return;
    }
    let tpGen = this.app.plugins.plugins["templater-obsidian"].templater;
    tpGen = tpGen.functions_generator.internal_functions.modules_array;
    let tp = {};
    tp.file = tpGen.find((m) => m.name == "file");
    tp.system = tpGen.find((m) => m.name == "system");
    if (!tp.system) {
      console.error(
        "No se pudo acceder al objeto de funciones actuales de Templater."
      );
      return;
    }
    console.log("Instancia de tp cargada satisfactoriamente en Plugin");
    return tp;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25Nb2RhbC50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsVGFyZWFzLnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZS50cyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2Vycm9ycy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZm9ybWF0cy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy96b25lcy9zeXN0ZW1ab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvem9uZXMvSUFOQVpvbmUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL2xvY2FsZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3pvbmVzL2ludmFsaWRab25lLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC96b25lVXRpbC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL3NldHRpbmdzLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9pbnZhbGlkLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9jb252ZXJzaW9ucy5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvdXRpbC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZW5nbGlzaC5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2ltcGwvZm9ybWF0dGVyLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9yZWdleFBhcnNlci5qcyIsICJub2RlX21vZHVsZXMvbHV4b24vc3JjL2R1cmF0aW9uLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW50ZXJ2YWwuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbmZvLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9kaWZmLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvaW1wbC9kaWdpdHMuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9pbXBsL3Rva2VuUGFyc2VyLmpzIiwgIm5vZGVfbW9kdWxlcy9sdXhvbi9zcmMvZGF0ZXRpbWUuanMiLCAibm9kZV9tb2R1bGVzL2x1eG9uL3NyYy9sdXhvbi5qcyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvbWVudU90cm8udHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXMvUmVnaXN0cm9UaWVtcG8udHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9TZXNpb25MZWN0dXJhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9SVEJhc2UudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJLnRzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5nc1RhYi50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9CYXNlL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXJDYXJwZXRhLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvdXRpbHMvY3JlYXJQbGFudGlsbGEudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9maWxlTGlua01vZGFsLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0Jhc2UvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvQmFzZS91dGlscy9jcmVhdGVOb3RlRnJvbVRlbXBsYXRlLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS9hY3RpdmFkb3Jlcy50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvdWkvcmliYm9uQnV0dG9uLnRzIiwgInNyYy9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS91aS9tb2RhbC50cyIsICJzcmMvbW9kdWxlcy9NX2J1c3F1ZWRhQXZhbnphZGEvc2VhcmNoL0Z1enp5Tm90ZVN1Z2dlc3Rlci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9BbGlhc1N0YXR1c0Jhci9zdGF0dXNCYXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vaW5kZXgudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vcmliYm9uTWVudS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby91dGlscy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvbW9kYWxfQWhvcmEudHMiLCAic3JjL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3RhcnRlckFQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0FncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9GaWVsZEhhbmRsZXJVdGlscy50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZWZsZXhpb25lc0ZpZWxkSGFuZGxlcnMudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DUEVGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9SUkZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUEdUREZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvUFFGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9Bbm90YWNpb25lc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL1RyYW5zYWNjaW9uZXNGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL0FyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYVZpZGFGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL25vZG9BcmVhVmlkYUZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL09iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0NvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9SZXBvc2l0b3Jpb0xpYnJvc19GSC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0JpYmxpb3RlY2FfRkgudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBKb3VybmFscy9BbnVhbF9GSC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEpvdXJuYWxzL1RyaW1lc3RyYWxGaWVsZEhhbmRsZXIudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DYW1wYVx1MDBGMWFzRmllbGRIYW5kbGVyLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlci50cyIsICJzcmMvbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9zcGlubmVyTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9kYXRlUGlja2VyTW9kYWwudHMiLCAic3JjL21vZHVsZXMvbW9kYWxlcy9wZWRpZG9zQ2xpZW50ZU1vZGFsLnRzIiwgInNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9hZGRPbnNBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL1lBTUxVcGRhdGVyQVBJLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL21vZGFscy9jYW1iaW9IRi50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudURpYXJpb0FQSS50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudVNlbWFuYWxBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZXN1bWVuU2VtYW5hbC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby92aWV3cy92aXN0YVJUQWN0aXZvLnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb0dURC9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9HVEQvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvR1REL2luYm94LnRzIiwgInNyYy9tb2R1bGVzL21vZGFsZXMvaW5ib3hNb2RhbC50cyIsICJzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3Vic2lzdGVtYXNBUEkudHMiLCAic3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvdmlld3MvdmlzdGFSZWdpc3Ryb0RpYXJpby50cyIsICJzcmMvbW9kdWxlcy9HUFRob3JhL0dQVGhvcmEudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvTGlicm9zL2xpYnJvc0FQSS50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXBkYXRlU2VzaW9uTGVjdHVyYS50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9hcGkvdGFyZWFzQVBJLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL3V0aWxzL3Rhc2tVdGlscy50cyIsICJzcmMvbW9kdWxlcy90YXNrTWFuYWdlci91dGlscy90YXNrV2VpZ2h0Q2FsY3VsYXRvci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9pbmRleC50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9jb21tYW5kcy50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9UYWJUaXRsZU1hbmFnZXIudHMiLCAic3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvdmlld3MvQ3VzdG9tTWFya2Rvd25WaWV3LnRzIiwgInNyYy9tb2R1bGVzL21vZHVsb1RhYlRpdGxlL3V0aWxzL2xvZ2dlci50cyIsICJzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS9kZWZhdWx0cy9kZWZhdWx0U2V0dGluZ3MudHMiLCAic3JjL21vZHVsZXMvdGFza01hbmFnZXIvaW5kZXgudHMiLCAic3JjL21vZHVsZXMvdGFza01hbmFnZXIvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL2luZGV4LnRzIiwgInNyYy9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcy9EYXRhdmlld1F1ZXJ5TWFuYWdlci50cyIsICJzcmMvbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMvY29tbWFuZHMudHMiLCAic3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL1F1ZXJ5UmVuZGVyZXIudHMiLCAic3JjL21vZHVsZXMvdGFza05hdmlnYXRvci9pbmRleC50cyIsICJzcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL2NvbW1hbmRzLnRzIiwgInNyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvdGFza05hdmlnYXRvci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLy8gSW1wb3J0YWNpXHUwMEYzbiBkZSBjbGFzZXMgbmVjZXNhcmlhcyBkZXNkZSBsYSBsaWJyZXJcdTAwRURhIGRlIE9ic2lkaWFuLlxuaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBEZWZpbmljaVx1MDBGM24gZGUgbGEgY2xhc2UgU2VsZWNjaW9uTW9kYWwgcXVlIGV4dGllbmRlIGRlIEZ1enp5U3VnZ2VzdE1vZGFsIHBhcmEgbWFuZWphciBzZWxlY2Npb25lcyBkZSBzdHJpbmdzLlxuZXhwb3J0IGNsYXNzIFNlbGVjY2lvbk1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8c3RyaW5nPiB7XG4gICAgdGl0bGVzOiBzdHJpbmdbXTsgLy8gQXJyYXkgZGUgdFx1MDBFRHR1bG9zIHBhcmEgbGFzIG9wY2lvbmVzIGRlbCBtb2RhbC5cbiAgICB2YWx1ZXM6IHN0cmluZ1tdOyAvLyBBcnJheSBkZSB2YWxvcmVzIGFzb2NpYWRvcyBhIGNhZGEgdFx1MDBFRHR1bG8uXG4gICAgdmFsdWVNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIE9iamV0byBwYXJhIG1hcGVhciB0XHUwMEVEdHVsb3MgYSB2YWxvcmVzLlxuICAgIHByaXZhdGUgc2VsZWNjaW9uSGVjaGE6IGJvb2xlYW4gPSBmYWxzZTsgLy8gRmxhZyBwYXJhIGRldGVybWluYXIgc2kgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLlxuXG4gICAgLy8gQ29uc3RydWN0b3IgZGUgbGEgY2xhc2UuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlczogc3RyaW5nW10sIHZhbHVlczogc3RyaW5nW10sIHBsYWNlaG9sZGVyOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTsgLy8gTGxhbWFkYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBiYXNlIGNvbiBsYSBpbnN0YW5jaWEgZGUgQXBwIGRlIE9ic2lkaWFuLlxuICAgICAgICB0aGlzLnRpdGxlcyA9IHRpdGxlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdFx1MDBFRHR1bG9zLlxuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlczsgLy8gSW5pY2lhbGl6YWNpXHUwMEYzbiBkZWwgYXJyYXkgZGUgdmFsb3Jlcy5cbiAgICAgICAgLy8gQ3JlYWNpXHUwMEYzbiBkZWwgbWFwZW8gZGUgdFx1MDBFRHR1bG9zIGEgdmFsb3Jlcy5cbiAgICAgICAgdGhpcy52YWx1ZU1hcCA9IHRpdGxlcy5yZWR1Y2UoKGFjYywgdGl0bGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBhY2NbdGl0bGVdID0gdmFsdWVzW2luZGV4XTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcik7IC8vIEVzdGFibGVjaW1pZW50byBkZWwgdGV4dG8gZGUgcGxhY2Vob2xkZXIgcGFyYSBlbCBjYW1wbyBkZSBiXHUwMEZBc3F1ZWRhIGVuIGVsIG1vZGFsLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciBsb3MgXHUwMEVEdGVtcyAodFx1MDBFRHR1bG9zKSBxdWUgc2UgbW9zdHJhclx1MDBFMW4gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy50aXRsZXM7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBvYnRlbmVyIGVsIHRleHRvIHF1ZSBzZSBtb3N0cmFyXHUwMEUxIHBhcmEgY2FkYSBcdTAwRUR0ZW0gZW4gZWwgbW9kYWwuXG4gICAgZ2V0SXRlbVRleHQoaXRlbTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcXVlIHNlIGxsYW1hIGFsIGNlcnJhciBlbCBtb2RhbC5cbiAgICBvbkNsb3NlKCk6IHZvaWQge1xuICAgICAgICAvLyBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBzZSBoYXlhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbiwgc2UgcmVjaGF6YSBsYSBwcm9tZXNhLlxuICAgICAgICBpZiAoIXRoaXMuc2VsZWNjaW9uSGVjaGEpIHtcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KG5ldyBFcnJvcignTW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM24nKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1hbmVqYXIgbGEgc2VsZWNjaVx1MDBGM24gZGUgdW4gXHUwMEVEdGVtLlxuICAgIHNlbGVjdFN1Z2dlc3Rpb24oaXRlbTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2VsZWNjaW9uSGVjaGEgPSB0cnVlOyAvLyBNYXJjYXIgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzbi5cbiAgICAgICAgc3VwZXIuc2VsZWN0U3VnZ2VzdGlvbihpdGVtLCBldnQpOyAvLyBMbGFtYXIgYWwgbVx1MDBFOXRvZG8gY29ycmVzcG9uZGllbnRlIGRlIGxhIGNsYXNlIGJhc2UgcGFyYSBtYW5lamFyIGxhIHNlbGVjY2lcdTAwRjNuLlxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHF1ZSBzZSBsbGFtYSBhbCBlbGVnaXIgdW4gXHUwMEVEdGVtLCBkb25kZSBzZSByZXN1ZWx2ZSBsYSBwcm9tZXNhIGNvbiBlbCB2YWxvciBhc29jaWFkbyBhbCBcdTAwRUR0ZW0gc2VsZWNjaW9uYWRvLlxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLnZhbHVlTWFwW2l0ZW1dOyAvLyBPYnRlbmVyIGVsIHZhbG9yIGFzb2NpYWRvIGFsIFx1MDBFRHRlbSBzZWxlY2Npb25hZG8uXG4gICAgICAgIHRoaXMucmVzb2x2ZSh2YWx1ZSk7IC8vIFJlc29sdmVyIGxhIHByb21lc2EgY29uIGVsIHZhbG9yIHNlbGVjY2lvbmFkby5cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGFicmlyIGVsIG1vZGFsIHkgZXNwZXJhciBhIHF1ZSBlbCB1c3VhcmlvIGhhZ2EgdW5hIHNlbGVjY2lcdTAwRjNuLCBkZXZvbHZpZW5kbyB1bmEgcHJvbWVzYSBjb24gZWwgdmFsb3Igc2VsZWNjaW9uYWRvLlxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmUgPSByZXNvbHZlOyAvLyBHdWFyZGFyIGxhIGZ1bmNpXHUwMEYzbiByZXNvbHZlIGRlIGxhIHByb21lc2EgcGFyYSB1c2FybGEgYWwgc2VsZWNjaW9uYXIgdW4gXHUwMEVEdGVtLlxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7IC8vIEd1YXJkYXIgbGEgZnVuY2lcdTAwRjNuIHJlamVjdCBkZSBsYSBwcm9tZXNhIHBhcmEgdXNhcmxhIHNpIHNlIGNpZXJyYSBlbCBtb2RhbCBzaW4gc2VsZWNjaVx1MDBGM24uXG4gICAgICAgICAgICB0aGlzLm9wZW4oKTsgLy8gQWJyaXIgZWwgbW9kYWwuXG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBGdXp6eVN1Z2dlc3RNb2RhbCwgRnV6enlNYXRjaCB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgU2VsZWNjaW9uTW9kYWxUYXJlYXMgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxzdHJpbmc+IHtcbiAgICBwcml2YXRlIG9wdGlvbnM6IHN0cmluZ1tdOyAvLyBBcXVcdTAwRUQgZ3VhcmRhbW9zIGxhcyBjYWRlbmFzIEhUTUwgcXVlIHNlIG1vc3RyYXJcdTAwRTFuXG4gICAgcHJpdmF0ZSB2YWx1ZXM6IHN0cmluZ1tdOyAgLy8gVmFsb3JlcyBxdWUgc2UgcmV0b3JuYW4gYWwgZWxlZ2lyXG4gICAgcHJpdmF0ZSBzZWxlY2Npb25IZWNoYSA9IGZhbHNlO1xuICAgIHByaXZhdGUgcmVzb2x2ZVNlbGVjdGlvbiE6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgcmVqZWN0U2VsZWN0aW9uITogKHJlYXNvbj86IGFueSkgPT4gdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBhcHAgT2JzaWRpYW4gQXBwXG4gICAgICogQHBhcmFtIG9wdGlvbnMgTGlzdGEgZGUgY2FkZW5hcyAoUFVFREUgSU5DTFVJUiBIVE1MKSBxdWUgc2UgbW9zdHJhclx1MDBFMW4gZW4gZWwgbW9kYWxcbiAgICAgKiBAcGFyYW0gdmFsdWVzICBMaXN0YSBkZSB2YWxvcmVzIGFzb2NpYWRvcyBhIGNhZGEgb3BjaVx1MDBGM25cbiAgICAgKiBAcGFyYW0gcGxhY2Vob2xkZXIgVGV4dG8gZW4gbGEgYmFycmEgZGUgYlx1MDBGQXNxdWVkYVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBvcHRpb25zOiBzdHJpbmdbXSwgdmFsdWVzOiBzdHJpbmdbXSwgcGxhY2Vob2xkZXI6IHN0cmluZykge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgdGhpcy5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0b3JuYSBsYSBsaXN0YSBkZSBcdTAwRUR0ZW1zIChlbiBlc3RlIGNhc28sIGNhZGVuYXMpIHNvYnJlIGxhcyBxdWUgc2UgaGFyXHUwMEUxIGxhIGJcdTAwRkFzcXVlZGEgZGlmdXNhLlxuICAgICAqL1xuICAgIGdldEl0ZW1zKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmEgZWwgdGV4dG8gcXVlIHNlIHVzYSBpbnRlcm5hbWVudGUgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRpZnVzYS5cbiAgICAgKiBBcXVcdTAwRUQgcXVpdGFtb3MgZXRpcXVldGFzIEhUTUwsIHBhcmEgcXVlIGxhIGJcdTAwRkFzcXVlZGEgc2VhIHNvYnJlIHRleHRvIHBsYW5vLlxuICAgICAqL1xuICAgIGdldEl0ZW1UZXh0KGl0ZW06IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIC8vIEVsaW1pbmFyIGV0aXF1ZXRhcyBIVE1MXG4gICAgICAgIHJldHVybiBpdGVtLnJlcGxhY2UoLzxbXj5dKz4vZywgXCJcIik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29udHJvbGEgY1x1MDBGM21vIHNlIG11ZXN0cmEgY2FkYSBvcGNpXHUwMEYzbiBlbiBsYSBsaXN0YSBkZSBzdWdlcmVuY2lhcy5cbiAgICAgKiBBc2lnbmFtb3MgJ2VsLmlubmVySFRNTCcgcGFyYSBxdWUgc2UgcmVuZGVyaWNlIGVsIEhUTUwgY29uIGVzdGlsb3MsXG4gICAgICogZW4gbHVnYXIgZGUgbW9zdHJhciBsYXMgZXRpcXVldGFzIGVuIGNydWRvLlxuICAgICAqL1xuICAgIHJlbmRlclN1Z2dlc3Rpb24ocmVzdWx0OiBGdXp6eU1hdGNoPHN0cmluZz4sIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBlbC5pbm5lckhUTUwgPSByZXN1bHQuaXRlbTsgXG4gICAgICAgIC8vIFNpIHF1aXNpZXJhcyByZXNhbHRhciBjb2luY2lkZW5jaWFzIG1hbnVhbG1lbnRlLCBoYWJyXHUwMEVEYSBxdWUgbW9kaWZpY2FyIGFxdVx1MDBFRC5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYW5lamEgbGEgc2VsZWNjaVx1MDBGM24gZGUgdW4gXHUwMEVEdGVtLiBNYXJjYW1vcyBxdWUgc2UgaGEgaGVjaG8gc2VsZWNjaVx1MDBGM24geSBkZWxlZ2Ftb3MgYWwgbVx1MDBFOXRvZG8gcGFkcmUuXG4gICAgICovXG4gICAgc2VsZWN0U3VnZ2VzdGlvbihpdGVtOiBzdHJpbmcsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZWxlY2Npb25IZWNoYSA9IHRydWU7XG4gICAgICAgIHN1cGVyLnNlbGVjdFN1Z2dlc3Rpb24oaXRlbSwgZXZ0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZSBsbGFtYSBjdWFuZG8gZWwgdXN1YXJpbyBjb25maXJtYSBsYSBlbGVjY2lcdTAwRjNuIGRlIHVuIFx1MDBFRHRlbSBkZSBsYSBsaXN0YS5cbiAgICAgKiBPYnRlbmVtb3MgZWwgdmFsb3IgYXNvY2lhZG8geSByZXNvbHZlbW9zIGxhIHByb21lc2EuXG4gICAgICovXG4gICAgb25DaG9vc2VJdGVtKGl0ZW06IHN0cmluZywgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub3B0aW9ucy5pbmRleE9mKGl0ZW0pO1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMudmFsdWVzW2luZGV4XTtcbiAgICAgICAgdGhpcy5yZXNvbHZlU2VsZWN0aW9uKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaSBlbCBtb2RhbCBzZSBjaWVycmEgc2luIHF1ZSBlbCB1c3VhcmlvIHNlbGVjY2lvbmUgbmFkYSwgcmVjaGF6YW1vcyBsYSBwcm9tZXNhLlxuICAgICAqL1xuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY2Npb25IZWNoYSkge1xuICAgICAgICAgICAgdGhpcy5yZWplY3RTZWxlY3Rpb24obmV3IEVycm9yKFwiTW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM25cIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTVx1MDBFOXRvZG8gcGFyYSBhYnJpciBlbCBtb2RhbCB5IHJldG9ybmFyIHVuYSBwcm9tZXNhIHF1ZSBzZSByZXN1ZWx2ZSBjdWFuZG9cbiAgICAgKiBlbCB1c3VhcmlvIGVsaWdlIHVuIFx1MDBFRHRlbSBvIHNlIHJlY2hhemEgc2kgY2llcnJhIHNpbiBlbGVnaXIuXG4gICAgICovXG4gICAgb3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVTZWxlY3Rpb24gPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5yZWplY3RTZWxlY3Rpb24gPSByZWplY3Q7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpbiwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsfSBmcm9tIFwiLi9zZWxlY2Npb25Nb2RhbFwiO1xuXG5leHBvcnQgY2xhc3MgZnV6enlTZWxlY3RPckNyZWF0ZSB7XG4gIGFwcDogQXBwO1xuICBwbHVnaW46IFBsdWdpbjtcbiAgcGF0aENhbXBvczogc3RyaW5nID0gXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFJlZ2lzdHJvIFRpZW1wby5tZFwiO1xuXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFBsdWdpbikge1xuICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICB9XG5cbiAgY3JlYXRlTW9kYWwoKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1vZGFsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZnV6enlTZWFyY2hNb2RhbFwiKTtcbiAgICBtb2RhbC5zdHlsZS5wb3NpdGlvbiA9IFwiZml4ZWRcIjtcbiAgICBtb2RhbC5zdHlsZS50b3AgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLmxlZnQgPSBcIjUwJVwiO1xuICAgIG1vZGFsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlKC01MCUsIC01MCUpXCI7XG4gICAgbW9kYWwuc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG4gICAgbW9kYWwuc3R5bGUucGFkZGluZyA9IFwiMjBweFwiO1xuICAgIG1vZGFsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwid2hpdGVcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3JkZXIgPSBcIjFweCBzb2xpZCAjY2NjXCI7XG4gICAgbW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gXCI1cHhcIjtcbiAgICBtb2RhbC5zdHlsZS5ib3hTaGFkb3cgPSBcIjAgNHB4IDZweCByZ2JhKDAsMCwwLC4xKVwiO1xuICAgIG1vZGFsLnN0eWxlLndpZHRoID0gXCIzMDBweFwiO1xuICBcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY2xvc2VCdXR0b24udGV4dENvbnRlbnQgPSBcIlx1MDBEN1wiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9IFwiNXB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUucmlnaHQgPSBcIjVweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSBcInBvaW50ZXJcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9IFwiMTZweFwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gXCIwcHggNHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gXCIxMHB4XCI7XG4gICAgY2xvc2VCdXR0b24uc3R5bGUub3V0bGluZSA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJveFNoYWRvdyA9IFwibm9uZVwiO1xuICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBtb2RhbC5yZW1vdmUoKTtcbiAgXG4gICAgbW9kYWwuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuICAgIHJldHVybiBtb2RhbDtcbiAgfVxuXG4gIGZpbHRlckl0ZW1zKHF1ZXJ5OiBzdHJpbmcsIGl0ZW1zOiBhbnlbXSkge1xuICAgIHJldHVybiBpdGVtcy5maWx0ZXIoKGl0ZW06IHsgdmFsdWU6IHN0cmluZzsgfSkgPT5cbiAgICAgIGl0ZW0udmFsdWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuICAgICk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKHRpcG86IHN0cmluZyB8IG51bWJlciwgc2VsZWN0ZWRWYWx1ZTogYW55LCBzZWxlY3RlZEdyb3VwOiBhbnkpIHtcbiAgICB0cnkge1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmcm9udG1hdHRlcjogeyBbeDogc3RyaW5nXTogYW55W107IH0pID0+IHtcbiAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgJ2FjdHNUZW1hcycgZXMgZWwgY2FtcG8gYSBtb2RpZmljYXJcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRBY3RzID0gZnJvbnRtYXR0ZXJbdGlwb10gfHwgW107XG4gICAgICAgICAgICBsZXQgbmV3VmFsdWVGb3JBY3RzID0gWy4uLmN1cnJlbnRBY3RzLCBbc2VsZWN0ZWRHcm91cCwgc2VsZWN0ZWRWYWx1ZV1dO1xuICAgICAgICAgICAgZnJvbnRtYXR0ZXJbdGlwb10gPSBuZXdWYWx1ZUZvckFjdHM7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJGcm9udG1hdHRlciBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICBhc3luYyBzaG93RnV6enlTZWFyY2hNb2RhbChpdGVtczogYW55LCBncm91cHM6IGFueVtdLCB0aXBvOiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsZXQgc2VsZWN0ZWRWYWx1ZSA9IFwiXCI7IC8vIFZhcmlhYmxlIHBhcmEgZ3VhcmRhciBsYSBvcGNpXHUwMEYzbiBzZWxlY2Npb25hZGEgbyBpbmdyZXNhZGEgcG9yIGVsIHVzdWFyaW9cbiAgICAgICAgbGV0IHNlbGVjdGVkR3JvdXAgPSBcIlwiO1xuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMuY3JlYXRlTW9kYWwoKTtcbiAgICAgIFxuXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCB0XHUwMEVEdHVsbyBkZWwgbW9kYWxcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gXCJCdXNjYSBvIGNyZWEgdHUgYWN0aXZpZGFkXCI7XG4gICAgICAgIHRpdGxlLnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7IC8vIENlbnRyYXIgZWwgdFx1MDBFRHR1bG8sIGFqdXN0YSBsb3MgZXN0aWxvcyBzZWdcdTAwRkFuIHNlYSBuZWNlc2FyaW9cbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBpbnB1dC50eXBlID0gXCJ0ZXh0XCI7XG4gICAgICAgIGlucHV0LnBsYWNlaG9sZGVyID0gXCJFc2NyaWJlIHR1IGFjdGl2aWRhZC4uLlwiO1xuICAgICAgICAvLyBFc3RhYmxlY2UgZWwgYW5jaG8gZGVsIGlucHV0IGEgdW4gcG9yY2VudGFqZSBkZWwgY29udGVuZWRvciBwYXJhIGhhY2VybG8gbVx1MDBFMXMgYW5jaG8uXG4gICAgICAgIGlucHV0LnN0eWxlLndpZHRoID0gXCI4MCVcIjtcbiAgICAgICAgLy8gQ2VudHJhciBlbCB0ZXh0byBkZW50cm8gZGVsIGlucHV0XG4gICAgICAgIGlucHV0LnN0eWxlLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgIC8vIENlbnRyYXIgZWwgaW5wdXQgZGVudHJvIGRlbCBtb2RhbCAoc2kgZWwgbW9kYWwgdGllbmUgdW4gZGlzcGxheSBmbGV4KVxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgIG1vZGFsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSBcImNvbHVtblwiO1xuICAgICAgICBtb2RhbC5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuXG5cbiAgICAgICAgLy8gQ3JlYXIgeSBhZ3JlZ2FyIHVuIGVzcGFjaW8gZW50cmUgZWwgaW5wdXQgeSByZXN1bHRzRGl2XG4gICAgICAgIGNvbnN0IHNwYWNlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHNwYWNlci5zdHlsZS5oZWlnaHQgPSBcIjE2cHhcIjsgLy8gQWp1c3RhIGVzdGEgYWx0dXJhIHNlZ1x1MDBGQW4gbmVjZXNpdGVzIHBhcmEgZWwgZXNwYWNpb1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChzcGFjZXIpO1xuICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChyZXN1bHRzRGl2KTtcbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVSZXN1bHRzRGlzcGxheShmaWx0ZXJlZFJlc3VsdHM6IGFueVtdLCBtZW51T3RybzogdGhpcykge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciByZXN1bHRhZG9zIHByZXZpb3NcbiAgICAgICAgICBmaWx0ZXJlZFJlc3VsdHMuZm9yRWFjaCgocmVzdWx0OiB7IHZhbHVlOiBzdHJpbmcgfCBudWxsOyBhY3Rpdml0eTogc3RyaW5nOyBncm91cDogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICAgICAgZGl2LnN0eWxlLmN1cnNvciA9IFwicG9pbnRlclwiO1xuICAgICAgICAgICAgZGl2Lm9ubW91c2VvdmVyID0gKCkgPT4gKGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMGYwZjBcIik7XG4gICAgICAgICAgICBkaXYub25tb3VzZW91dCA9ICgpID0+IChkaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCJ0cmFuc3BhcmVudFwiKTtcbiAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlID0gcmVzdWx0LmFjdGl2aXR5OyAvLyBHdWFyZGFyIGVsIHZhbG9yIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gcmVzdWx0Lmdyb3VwOyAvLyBHdWFyZGFyIGVsIGdydXBvIHNlbGVjY2lvbmFkb1xuICAgICAgICAgICAgICAvL2Rpc3BsYXlTZWxlY3RlZFZhbHVlKHNlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXApOyAvLyBNb3N0cmFyIGxhIHNlbGVjY2lcdTAwRjNuIGFsIHVzdWFyaW9cbiAgICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHJlc29sdmUoW3NlbGVjdGVkVmFsdWUsIHNlbGVjdGVkR3JvdXBdKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXN1bHRzRGl2LmFwcGVuZENoaWxkKGRpdik7XG4gICAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICAvLyBTaSBubyBoYXkgcmVzdWx0YWRvcyB5IGVsIHVzdWFyaW8gaGEgaW5ncmVzYWRvIHVuIHRleHRvLCBvZnJlY2VyIGxhIGNyZWFjaVx1MDBGM24gZGUgdW5hIG51ZXZhIGFjdGl2aWRhZFxuICAgICAgICAgIGlmIChmaWx0ZXJlZFJlc3VsdHMubGVuZ3RoID09PSAwICYmIGlucHV0LnZhbHVlLnRyaW0oKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgY29uc3QgY3JlYXRlTmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi50ZXh0Q29udGVudCA9IGBDcmVhciBudWV2YSBhY3RpdmlkYWQ6IFwiJHtpbnB1dC52YWx1ZX1cImA7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBjcmVhdGVOZXdEaXYuc3R5bGUuY29sb3IgPSBcImJsdWVcIjtcbiAgICAgICAgICAgIGNyZWF0ZU5ld0Rpdi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlID0gaW5wdXQudmFsdWU7IC8vIEd1YXJkYXIgbGEgbnVldmEgYWN0aXZpZGFkXG4gICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgIGlmICh0aXBvPT0gdW5kZWZpbmVkKXsgdGlwbyA9IFwiYWN0c1RlbWFzXCJ9XG4gICAgICAgICAgICAgIHNlbGVjdEdyb3VwRm9yTmV3QWN0aXZpdHkobWVudU90cm8sIHRpcG8pOyAvLyBQcm9jZWRlciBhIHNlbGVjY2lvbmFyIHVuIGdydXBvXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChjcmVhdGVOZXdEaXYpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdEdyb3VwRm9yTmV3QWN0aXZpdHkobWVudU90cm86IHsgZXNSZWN1cnJlbnRlOiAoYXJnMDogc3RyaW5nKSA9PiBhbnk7IHVwZGF0ZVlBTUxGaWVsZHM6IChhcmcwOiBhbnksIGFyZzE6IHN0cmluZywgYXJnMjogc3RyaW5nKSA9PiBhbnk7IH0sIHRpcG86IGFueSkge1xuICAgICAgICAgIHJlc3VsdHNEaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgICAgICBpbnB1dC5yZW1vdmUoKTtcbiAgICAgICAgICBzcGFjZXIucmVtb3ZlKCk7XG4gICAgICAgICAgdGl0bGUucmVtb3ZlKCk7XG5cbiAgICAgICAgICBjb25zdCB0ZXh0byA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgICAgICAgIHRleHRvLnRleHRDb250ZW50ID0gYFZhbW9zIGEgY3JlYXIgbGEgYWN0aXZpZGFkOiBcIiR7c2VsZWN0ZWRWYWx1ZX1cIi4gU2VsZWNjaW9uYSB1biBncnVwbzpgOztcbiAgICAgICAgICB0ZXh0by5zdHlsZS50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyAvLyBDZW50cmFyIGVsIHRcdTAwRUR0dWxvLCBhanVzdGEgbG9zIGVzdGlsb3Mgc2VnXHUwMEZBbiBzZWEgbmVjZXNhcmlvXG4gICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZCh0ZXh0byk7IFxuICAgICAgXG4gICAgICAgICAgZ3JvdXBzLmZvckVhY2goKGdyb3VwOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBncm91cERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBncm91cERpdi50ZXh0Q29udGVudCA9IGdyb3VwO1xuICAgICAgICAgICAgZ3JvdXBEaXYuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3ZlciA9ICgpID0+IChncm91cERpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNmMGYwZjBcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbm1vdXNlb3V0ID0gKCkgPT4gKGdyb3VwRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IFwidHJhbnNwYXJlbnRcIik7XG4gICAgICAgICAgICBncm91cERpdi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZWxlY3RlZEdyb3VwID0gZ3JvdXA7IC8vIEd1YXJkYXIgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIC8vZGlzcGxheVNlbGVjdGVkVmFsdWUoc2VsZWN0ZWRWYWx1ZSwgc2VsZWN0ZWRHcm91cCk7IC8vIE1vc3RyYXIgbGEgYWN0aXZpZGFkIHkgZWwgZ3J1cG8gc2VsZWNjaW9uYWRvXG4gICAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICBsZXQgcmVjdXJyZW50ZSA9IGF3YWl0IG1lbnVPdHJvLmVzUmVjdXJyZW50ZShzZWxlY3RlZFZhbHVlKVxuICAgICAgICAgICAgICBpZiAocmVjdXJyZW50ZSl7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWVudU90cm8udXBkYXRlWUFNTEZpZWxkcyh0aXBvLCBzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXNvbHZlKFtzZWxlY3RlZFZhbHVlLCBzZWxlY3RlZEdyb3VwXSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVzdWx0c0Rpdi5hcHBlbmRDaGlsZChncm91cERpdik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIFxuICAgICAgICBmdW5jdGlvbiBkaXNwbGF5U2VsZWN0ZWRWYWx1ZShhY3Rpdml0eTogYW55LCBncm91cDogYW55KSB7XG4gICAgICAgICAgcmVzdWx0c0Rpdi5pbm5lckhUTUwgPSBgU2VsZWNjaW9uYWRvOiAke2FjdGl2aXR5fSAvICR7Z3JvdXB9YDtcbiAgICAgICAgICAvLyBBcXVcdTAwRUQgcHVlZGVzIGNlcnJhciBlbCBtb2RhbCBvIHBlcm1pdGlyIGFsIHVzdWFyaW8gaGFjZXIgbVx1MDBFMXMgYWNjaW9uZXNcbiAgICAgICAgfVxuICAgICAgXG4gICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgZmlsdGVyZWRJdGVtcyA9IHRoaXMuZmlsdGVySXRlbXMoaW5wdXQudmFsdWUsIGl0ZW1zKTtcbiAgICAgICAgICB1cGRhdGVSZXN1bHRzRGlzcGxheShmaWx0ZXJlZEl0ZW1zLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgIFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcbiAgICAgICBcbiAgICB9KTsgICBcbn1cblxuYXN5bmMgZXNSZWN1cnJlbnRlKHRhcmVhOnN0cmluZyk6UHJvbWlzZTxib29sZWFuPntcbiAgY29uc3Qgb3BjaW9uZXMgPSBbXCJTaVwiLFwiTm9cIl0gO1xuICBjb25zdCB2YWxvcmVzID0gW3RydWUsZmFsc2VdO1xuICBjb25zdCBwbGFjZWhvbGRlciA9IGAke3RhcmVhfSBlcyB0YXJlYSByZWN1cnJlbnRlP2A7XG4gIGNvbnN0IG1vZGFsID0gbmV3IFNlbGVjY2lvbk1vZGFsKGFwcCwgb3BjaW9uZXMsIHZhbG9yZXMsIHBsYWNlaG9sZGVyKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgbW9kYWwub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIG8gbW9kYWwgY2VycmFkbyBzaW4gc2VsZWNjaVx1MDBGM246XCIsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG59IiwgIi8vIHRoZXNlIGFyZW4ndCByZWFsbHkgcHJpdmF0ZSwgYnV0IG5vciBhcmUgdGhleSByZWFsbHkgdXNlZnVsIHRvIGRvY3VtZW50XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgTHV4b25FcnJvciBleHRlbmRzIEVycm9yIHt9XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIEludmFsaWREYXRlVGltZUVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHJlYXNvbikge1xuICAgIHN1cGVyKGBJbnZhbGlkIERhdGVUaW1lOiAke3JlYXNvbi50b01lc3NhZ2UoKX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkSW50ZXJ2YWxFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihyZWFzb24pIHtcbiAgICBzdXBlcihgSW52YWxpZCBJbnRlcnZhbDogJHtyZWFzb24udG9NZXNzYWdlKCl9YCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgSW52YWxpZER1cmF0aW9uRXJyb3IgZXh0ZW5kcyBMdXhvbkVycm9yIHtcbiAgY29uc3RydWN0b3IocmVhc29uKSB7XG4gICAgc3VwZXIoYEludmFsaWQgRHVyYXRpb246ICR7cmVhc29uLnRvTWVzc2FnZSgpfWApO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGNsYXNzIENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7fVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkVW5pdEVycm9yIGV4dGVuZHMgTHV4b25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHVuaXQpIHtcbiAgICBzdXBlcihgSW52YWxpZCB1bml0ICR7dW5pdH1gKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cbmV4cG9ydCBjbGFzcyBJbnZhbGlkQXJndW1lbnRFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige31cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgWm9uZUlzQWJzdHJhY3RFcnJvciBleHRlbmRzIEx1eG9uRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcihcIlpvbmUgaXMgYW4gYWJzdHJhY3QgY2xhc3NcIik7XG4gIH1cbn1cbiIsICIvKipcbiAqIEBwcml2YXRlXG4gKi9cblxuY29uc3QgbiA9IFwibnVtZXJpY1wiLFxuICBzID0gXCJzaG9ydFwiLFxuICBsID0gXCJsb25nXCI7XG5cbmV4cG9ydCBjb25zdCBEQVRFX1NIT1JUID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbixcbiAgZGF5OiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfTUVEID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogcyxcbiAgZGF5OiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVfTUVEX1dJVEhfV0VFS0RBWSA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgd2Vla2RheTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFX0ZVTEwgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBsLFxuICBkYXk6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgREFURV9IVUdFID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfU0lNUExFID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9XSVRIX1NFQ09ORFMgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQgPSB7XG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV9XSVRIX0xPTkdfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgdGltZVpvbmVOYW1lOiBsLFxufTtcblxuZXhwb3J0IGNvbnN0IFRJTUVfMjRfU0lNUExFID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1dJVEhfU0VDT05EUyA9IHtcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIGhvdXJDeWNsZTogXCJoMjNcIixcbn07XG5cbmV4cG9ydCBjb25zdCBUSU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICB0aW1lWm9uZU5hbWU6IHMsXG59O1xuXG5leHBvcnQgY29uc3QgVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUID0ge1xuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHNlY29uZDogbixcbiAgaG91ckN5Y2xlOiBcImgyM1wiLFxuICB0aW1lWm9uZU5hbWU6IGwsXG59O1xuXG5leHBvcnQgY29uc3QgREFURVRJTUVfU0hPUlQgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBuLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRCA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IHMsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFMgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbiAgc2Vjb25kOiBuLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVkgPSB7XG4gIHllYXI6IG4sXG4gIG1vbnRoOiBzLFxuICBkYXk6IG4sXG4gIHdlZWtkYXk6IHMsXG4gIGhvdXI6IG4sXG4gIG1pbnV0ZTogbixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9GVUxMID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogcyxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9IVUdFID0ge1xuICB5ZWFyOiBuLFxuICBtb250aDogbCxcbiAgZGF5OiBuLFxuICB3ZWVrZGF5OiBsLFxuICBob3VyOiBuLFxuICBtaW51dGU6IG4sXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRFVElNRV9IVUdFX1dJVEhfU0VDT05EUyA9IHtcbiAgeWVhcjogbixcbiAgbW9udGg6IGwsXG4gIGRheTogbixcbiAgd2Vla2RheTogbCxcbiAgaG91cjogbixcbiAgbWludXRlOiBuLFxuICBzZWNvbmQ6IG4sXG4gIHRpbWVab25lTmFtZTogbCxcbn07XG4iLCAiaW1wb3J0IHsgWm9uZUlzQWJzdHJhY3RFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuXG4vKipcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWm9uZSB7XG4gIC8qKlxuICAgKiBUaGUgdHlwZSBvZiB6b25lXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGlzIHpvbmUuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIGdldCBpYW5hTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgb2Zmc2V0IGlzIGtub3duIHRvIGJlIGZpeGVkIGZvciB0aGUgd2hvbGUgeWVhci5cbiAgICogQGFic3RyYWN0XG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgY29tbW9uIG5hbWUgKHN1Y2ggYXMgRVNUKSBhdCB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcFxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRzIC0gRXBvY2ggbWlsbGlzZWNvbmRzIGZvciB3aGljaCB0byBnZXQgdGhlIG5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIGFmZmVjdCB0aGUgZm9ybWF0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLmZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi4gQWNjZXB0cyAnbG9uZycgb3IgJ3Nob3J0Jy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubG9jYWxlIC0gV2hhdCBsb2NhbGUgdG8gcmV0dXJuIHRoZSBvZmZzZXQgbmFtZSBpbi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgb2Zmc2V0TmFtZSh0cywgb3B0cykge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb2Zmc2V0J3MgdmFsdWUgYXMgYSBzdHJpbmdcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0cyAtIEVwb2NoIG1pbGxpc2Vjb25kcyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBvZmZzZXRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvcm1hdCAtIFdoYXQgc3R5bGUgb2Ygb2Zmc2V0IHRvIHJldHVybi5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIEFjY2VwdHMgJ25hcnJvdycsICdzaG9ydCcsIG9yICd0ZWNoaWUnLiBSZXR1cm5pbmcgJys2JywgJyswNjowMCcsIG9yICcrMDYwMCcgcmVzcGVjdGl2ZWx5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgdGhyb3cgbmV3IFpvbmVJc0Fic3RyYWN0RXJyb3IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBpbiBtaW51dGVzIGZvciB0aGlzIHpvbmUgYXQgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXAuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gdHMgLSBFcG9jaCBtaWxsaXNlY29uZHMgZm9yIHdoaWNoIHRvIGNvbXB1dGUgdGhlIG9mZnNldFxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBvZmZzZXQodHMpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgWm9uZSBpcyBlcXVhbCB0byBhbm90aGVyIHpvbmVcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7Wm9uZX0gb3RoZXJab25lIC0gdGhlIHpvbmUgdG8gY29tcGFyZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHRocm93IG5ldyBab25lSXNBYnN0cmFjdEVycm9yKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBab25lIGlzIHZhbGlkLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICB0aHJvdyBuZXcgWm9uZUlzQWJzdHJhY3RFcnJvcigpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZm9ybWF0T2Zmc2V0LCBwYXJzZVpvbmVJbmZvIH0gZnJvbSBcIi4uL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxubGV0IHNpbmdsZXRvbiA9IG51bGw7XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgbG9jYWwgem9uZSBmb3IgdGhpcyBKYXZhU2NyaXB0IGVudmlyb25tZW50LlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN5c3RlbVpvbmUgZXh0ZW5kcyBab25lIHtcbiAgLyoqXG4gICAqIEdldCBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGUgbG9jYWwgem9uZVxuICAgKiBAcmV0dXJuIHtTeXN0ZW1ab25lfVxuICAgKi9cbiAgc3RhdGljIGdldCBpbnN0YW5jZSgpIHtcbiAgICBpZiAoc2luZ2xldG9uID09PSBudWxsKSB7XG4gICAgICBzaW5nbGV0b24gPSBuZXcgU3lzdGVtWm9uZSgpO1xuICAgIH1cbiAgICByZXR1cm4gc2luZ2xldG9uO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoKS5yZXNvbHZlZE9wdGlvbnMoKS50aW1lWm9uZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1VuaXZlcnNhbCgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXROYW1lKHRzLCB7IGZvcm1hdCwgbG9jYWxlIH0pIHtcbiAgICByZXR1cm4gcGFyc2Vab25lSW5mbyh0cywgZm9ybWF0LCBsb2NhbGUpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZm9ybWF0T2Zmc2V0KHRzLCBmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHRoaXMub2Zmc2V0KHRzKSwgZm9ybWF0KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCh0cykge1xuICAgIHJldHVybiAtbmV3IERhdGUodHMpLmdldFRpbWV6b25lT2Zmc2V0KCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcInN5c3RlbVwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBmb3JtYXRPZmZzZXQsIHBhcnNlWm9uZUluZm8sIGlzVW5kZWZpbmVkLCBvYmpUb0xvY2FsVFMgfSBmcm9tIFwiLi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG5sZXQgZHRmQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIG1ha2VEVEYoem9uZSkge1xuICBpZiAoIWR0ZkNhY2hlW3pvbmVdKSB7XG4gICAgZHRmQ2FjaGVbem9uZV0gPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgIGhvdXIxMjogZmFsc2UsXG4gICAgICB0aW1lWm9uZTogem9uZSxcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwiMi1kaWdpdFwiLFxuICAgICAgZGF5OiBcIjItZGlnaXRcIixcbiAgICAgIGhvdXI6IFwiMi1kaWdpdFwiLFxuICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgIHNlY29uZDogXCIyLWRpZ2l0XCIsXG4gICAgICBlcmE6IFwic2hvcnRcIixcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZHRmQ2FjaGVbem9uZV07XG59XG5cbmNvbnN0IHR5cGVUb1BvcyA9IHtcbiAgeWVhcjogMCxcbiAgbW9udGg6IDEsXG4gIGRheTogMixcbiAgZXJhOiAzLFxuICBob3VyOiA0LFxuICBtaW51dGU6IDUsXG4gIHNlY29uZDogNixcbn07XG5cbmZ1bmN0aW9uIGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSkge1xuICBjb25zdCBmb3JtYXR0ZWQgPSBkdGYuZm9ybWF0KGRhdGUpLnJlcGxhY2UoL1xcdTIwMEUvZywgXCJcIiksXG4gICAgcGFyc2VkID0gLyhcXGQrKVxcLyhcXGQrKVxcLyhcXGQrKSAoQUR8QkMpLD8gKFxcZCspOihcXGQrKTooXFxkKykvLmV4ZWMoZm9ybWF0dGVkKSxcbiAgICBbLCBmTW9udGgsIGZEYXksIGZZZWFyLCBmYWRPckJjLCBmSG91ciwgZk1pbnV0ZSwgZlNlY29uZF0gPSBwYXJzZWQ7XG4gIHJldHVybiBbZlllYXIsIGZNb250aCwgZkRheSwgZmFkT3JCYywgZkhvdXIsIGZNaW51dGUsIGZTZWNvbmRdO1xufVxuXG5mdW5jdGlvbiBwYXJ0c09mZnNldChkdGYsIGRhdGUpIHtcbiAgY29uc3QgZm9ybWF0dGVkID0gZHRmLmZvcm1hdFRvUGFydHMoZGF0ZSk7XG4gIGNvbnN0IGZpbGxlZCA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1hdHRlZC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHsgdHlwZSwgdmFsdWUgfSA9IGZvcm1hdHRlZFtpXTtcbiAgICBjb25zdCBwb3MgPSB0eXBlVG9Qb3NbdHlwZV07XG5cbiAgICBpZiAodHlwZSA9PT0gXCJlcmFcIikge1xuICAgICAgZmlsbGVkW3Bvc10gPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKCFpc1VuZGVmaW5lZChwb3MpKSB7XG4gICAgICBmaWxsZWRbcG9zXSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBmaWxsZWQ7XG59XG5cbmxldCBpYW5hWm9uZUNhY2hlID0ge307XG4vKipcbiAqIEEgem9uZSBpZGVudGlmaWVkIGJ5IGFuIElBTkEgaWRlbnRpZmllciwgbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSUFOQVpvbmUgZXh0ZW5kcyBab25lIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gWm9uZSBuYW1lXG4gICAqIEByZXR1cm4ge0lBTkFab25lfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShuYW1lKSB7XG4gICAgaWYgKCFpYW5hWm9uZUNhY2hlW25hbWVdKSB7XG4gICAgICBpYW5hWm9uZUNhY2hlW25hbWVdID0gbmV3IElBTkFab25lKG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gaWFuYVpvbmVDYWNoZVtuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBsb2NhbCBjYWNoZXMuIFNob3VsZCBvbmx5IGJlIG5lY2Vzc2FyeSBpbiB0ZXN0aW5nIHNjZW5hcmlvcy5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyByZXNldENhY2hlKCkge1xuICAgIGlhbmFab25lQ2FjaGUgPSB7fTtcbiAgICBkdGZDYWNoZSA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgcHJvdmlkZWQgc3RyaW5nIGlzIGEgdmFsaWQgc3BlY2lmaWVyLiBUaGlzIG9ubHkgY2hlY2tzIHRoZSBzdHJpbmcncyBmb3JtYXQsIG5vdCB0aGF0IHRoZSBzcGVjaWZpZXIgaWRlbnRpZmllcyBhIGtub3duIHpvbmU7IHNlZSBpc1ZhbGlkWm9uZSBmb3IgdGhhdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgc3RyaW5nIHRvIGNoZWNrIHZhbGlkaXR5IG9uXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRTcGVjaWZpZXIoXCJBbWVyaWNhL05ld19Zb3JrXCIpIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkU3BlY2lmaWVyKFwiU3BvcnR+fmJsb3JwXCIpIC8vPT4gZmFsc2VcbiAgICogQGRlcHJlY2F0ZWQgVGhpcyBtZXRob2QgcmV0dXJucyBmYWxzZSBmb3Igc29tZSB2YWxpZCBJQU5BIG5hbWVzLiBVc2UgaXNWYWxpZFpvbmUgaW5zdGVhZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc1ZhbGlkU3BlY2lmaWVyKHMpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkWm9uZShzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHByb3ZpZGVkIHN0cmluZyBpZGVudGlmaWVzIGEgcmVhbCB6b25lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gVGhlIHN0cmluZyB0byBjaGVja1xuICAgKiBAZXhhbXBsZSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShcIkFtZXJpY2EvTmV3X1lvcmtcIikgLy89PiB0cnVlXG4gICAqIEBleGFtcGxlIElBTkFab25lLmlzVmFsaWRab25lKFwiRmFudGFzaWEvQ2FzdGxlXCIpIC8vPT4gZmFsc2VcbiAgICogQGV4YW1wbGUgSUFOQVpvbmUuaXNWYWxpZFpvbmUoXCJTcG9ydH5+YmxvcnBcIikgLy89PiBmYWxzZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRab25lKHpvbmUpIHtcbiAgICBpZiAoIXpvbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tVVNcIiwgeyB0aW1lWm9uZTogem9uZSB9KS5mb3JtYXQoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogQHByaXZhdGUgKiovXG4gICAgdGhpcy56b25lTmFtZSA9IG5hbWU7XG4gICAgLyoqIEBwcml2YXRlICoqL1xuICAgIHRoaXMudmFsaWQgPSBJQU5BWm9uZS5pc1ZhbGlkWm9uZShuYW1lKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCB0eXBlKCkge1xuICAgIHJldHVybiBcImlhbmFcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnpvbmVOYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUodHMsIHsgZm9ybWF0LCBsb2NhbGUgfSkge1xuICAgIHJldHVybiBwYXJzZVpvbmVJbmZvKHRzLCBmb3JtYXQsIGxvY2FsZSwgdGhpcy5uYW1lKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLm9mZnNldCh0cyksIGZvcm1hdCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBvZmZzZXQodHMpIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodHMpO1xuXG4gICAgaWYgKGlzTmFOKGRhdGUpKSByZXR1cm4gTmFOO1xuXG4gICAgY29uc3QgZHRmID0gbWFrZURURih0aGlzLm5hbWUpO1xuICAgIGxldCBbeWVhciwgbW9udGgsIGRheSwgYWRPckJjLCBob3VyLCBtaW51dGUsIHNlY29uZF0gPSBkdGYuZm9ybWF0VG9QYXJ0c1xuICAgICAgPyBwYXJ0c09mZnNldChkdGYsIGRhdGUpXG4gICAgICA6IGhhY2t5T2Zmc2V0KGR0ZiwgZGF0ZSk7XG5cbiAgICBpZiAoYWRPckJjID09PSBcIkJDXCIpIHtcbiAgICAgIHllYXIgPSAtTWF0aC5hYnMoeWVhcikgKyAxO1xuICAgIH1cblxuICAgIC8vIGJlY2F1c2Ugd2UncmUgdXNpbmcgaG91cjEyIGFuZCBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDI1NTY0JmNhbj0yJnE9JTIyMjQlM0EwMCUyMiUyMGRhdGV0aW1lZm9ybWF0XG4gICAgY29uc3QgYWRqdXN0ZWRIb3VyID0gaG91ciA9PT0gMjQgPyAwIDogaG91cjtcblxuICAgIGNvbnN0IGFzVVRDID0gb2JqVG9Mb2NhbFRTKHtcbiAgICAgIHllYXIsXG4gICAgICBtb250aCxcbiAgICAgIGRheSxcbiAgICAgIGhvdXI6IGFkanVzdGVkSG91cixcbiAgICAgIG1pbnV0ZSxcbiAgICAgIHNlY29uZCxcbiAgICAgIG1pbGxpc2Vjb25kOiAwLFxuICAgIH0pO1xuXG4gICAgbGV0IGFzVFMgPSArZGF0ZTtcbiAgICBjb25zdCBvdmVyID0gYXNUUyAlIDEwMDA7XG4gICAgYXNUUyAtPSBvdmVyID49IDAgPyBvdmVyIDogMTAwMCArIG92ZXI7XG4gICAgcmV0dXJuIChhc1VUQyAtIGFzVFMpIC8gKDYwICogMTAwMCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBlcXVhbHMob3RoZXJab25lKSB7XG4gICAgcmV0dXJuIG90aGVyWm9uZS50eXBlID09PSBcImlhbmFcIiAmJiBvdGhlclpvbmUubmFtZSA9PT0gdGhpcy5uYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsaWQ7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBoYXNMb2NhbGVXZWVrSW5mbywgaGFzUmVsYXRpdmUsIHBhZFN0YXJ0LCByb3VuZFRvLCB2YWxpZGF0ZVdlZWtTZXR0aW5ncyB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCAqIGFzIEVuZ2xpc2ggZnJvbSBcIi4vZW5nbGlzaC5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IERhdGVUaW1lIGZyb20gXCIuLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuXG4vLyB0b2RvIC0gcmVtYXAgY2FjaGluZ1xuXG5sZXQgaW50bExGQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZExGKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgbGV0IGR0ZiA9IGludGxMRkNhY2hlW2tleV07XG4gIGlmICghZHRmKSB7XG4gICAgZHRmID0gbmV3IEludGwuTGlzdEZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxMRkNhY2hlW2tleV0gPSBkdGY7XG4gIH1cbiAgcmV0dXJuIGR0Zjtcbn1cblxubGV0IGludGxEVENhY2hlID0ge307XG5mdW5jdGlvbiBnZXRDYWNoZWREVEYobG9jU3RyaW5nLCBvcHRzID0ge30pIHtcbiAgY29uc3Qga2V5ID0gSlNPTi5zdHJpbmdpZnkoW2xvY1N0cmluZywgb3B0c10pO1xuICBsZXQgZHRmID0gaW50bERUQ2FjaGVba2V5XTtcbiAgaWYgKCFkdGYpIHtcbiAgICBkdGYgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxEVENhY2hlW2tleV0gPSBkdGY7XG4gIH1cbiAgcmV0dXJuIGR0Zjtcbn1cblxubGV0IGludGxOdW1DYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkSU5GKGxvY1N0cmluZywgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KFtsb2NTdHJpbmcsIG9wdHNdKTtcbiAgbGV0IGluZiA9IGludGxOdW1DYWNoZVtrZXldO1xuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLk51bWJlckZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxOdW1DYWNoZVtrZXldID0gaW5mO1xuICB9XG4gIHJldHVybiBpbmY7XG59XG5cbmxldCBpbnRsUmVsQ2FjaGUgPSB7fTtcbmZ1bmN0aW9uIGdldENhY2hlZFJURihsb2NTdHJpbmcsIG9wdHMgPSB7fSkge1xuICBjb25zdCB7IGJhc2UsIC4uLmNhY2hlS2V5T3B0cyB9ID0gb3B0czsgLy8gZXhjbHVkZSBgYmFzZWAgZnJvbSB0aGUgb3B0aW9uc1xuICBjb25zdCBrZXkgPSBKU09OLnN0cmluZ2lmeShbbG9jU3RyaW5nLCBjYWNoZUtleU9wdHNdKTtcbiAgbGV0IGluZiA9IGludGxSZWxDYWNoZVtrZXldO1xuICBpZiAoIWluZikge1xuICAgIGluZiA9IG5ldyBJbnRsLlJlbGF0aXZlVGltZUZvcm1hdChsb2NTdHJpbmcsIG9wdHMpO1xuICAgIGludGxSZWxDYWNoZVtrZXldID0gaW5mO1xuICB9XG4gIHJldHVybiBpbmY7XG59XG5cbmxldCBzeXNMb2NhbGVDYWNoZSA9IG51bGw7XG5mdW5jdGlvbiBzeXN0ZW1Mb2NhbGUoKSB7XG4gIGlmIChzeXNMb2NhbGVDYWNoZSkge1xuICAgIHJldHVybiBzeXNMb2NhbGVDYWNoZTtcbiAgfSBlbHNlIHtcbiAgICBzeXNMb2NhbGVDYWNoZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkubG9jYWxlO1xuICAgIHJldHVybiBzeXNMb2NhbGVDYWNoZTtcbiAgfVxufVxuXG5sZXQgd2Vla0luZm9DYWNoZSA9IHt9O1xuZnVuY3Rpb24gZ2V0Q2FjaGVkV2Vla0luZm8obG9jU3RyaW5nKSB7XG4gIGxldCBkYXRhID0gd2Vla0luZm9DYWNoZVtsb2NTdHJpbmddO1xuICBpZiAoIWRhdGEpIHtcbiAgICBjb25zdCBsb2NhbGUgPSBuZXcgSW50bC5Mb2NhbGUobG9jU3RyaW5nKTtcbiAgICAvLyBicm93c2VycyBjdXJyZW50bHkgaW1wbGVtZW50IHRoaXMgYXMgYSBwcm9wZXJ0eSwgYnV0IHNwZWMgc2F5cyBpdCBzaG91bGQgYmUgYSBnZXR0ZXIgZnVuY3Rpb25cbiAgICBkYXRhID0gXCJnZXRXZWVrSW5mb1wiIGluIGxvY2FsZSA/IGxvY2FsZS5nZXRXZWVrSW5mbygpIDogbG9jYWxlLndlZWtJbmZvO1xuICAgIHdlZWtJbmZvQ2FjaGVbbG9jU3RyaW5nXSA9IGRhdGE7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTG9jYWxlU3RyaW5nKGxvY2FsZVN0cikge1xuICAvLyBJIHJlYWxseSB3YW50IHRvIGF2b2lkIHdyaXRpbmcgYSBCQ1AgNDcgcGFyc2VyXG4gIC8vIHNlZSwgZS5nLiBodHRwczovL2dpdGh1Yi5jb20vd29vb3JtL2JjcC00N1xuICAvLyBJbnN0ZWFkLCB3ZSdsbCBkbyB0aGlzOlxuXG4gIC8vIGEpIGlmIHRoZSBzdHJpbmcgaGFzIG5vIC11IGV4dGVuc2lvbnMsIGp1c3QgbGVhdmUgaXQgYWxvbmVcbiAgLy8gYikgaWYgaXQgZG9lcywgdXNlIEludGwgdG8gcmVzb2x2ZSBldmVyeXRoaW5nXG4gIC8vIGMpIGlmIEludGwgZmFpbHMsIHRyeSBhZ2FpbiB3aXRob3V0IHRoZSAtdVxuXG4gIC8vIHByaXZhdGUgc3VidGFncyBhbmQgdW5pY29kZSBzdWJ0YWdzIGhhdmUgb3JkZXJpbmcgcmVxdWlyZW1lbnRzLFxuICAvLyBhbmQgd2UncmUgbm90IHByb3Blcmx5IHBhcnNpbmcgdGhpcywgc28ganVzdCBzdHJpcCBvdXQgdGhlXG4gIC8vIHByaXZhdGUgb25lcyBpZiB0aGV5IGV4aXN0LlxuICBjb25zdCB4SW5kZXggPSBsb2NhbGVTdHIuaW5kZXhPZihcIi14LVwiKTtcbiAgaWYgKHhJbmRleCAhPT0gLTEpIHtcbiAgICBsb2NhbGVTdHIgPSBsb2NhbGVTdHIuc3Vic3RyaW5nKDAsIHhJbmRleCk7XG4gIH1cblxuICBjb25zdCB1SW5kZXggPSBsb2NhbGVTdHIuaW5kZXhPZihcIi11LVwiKTtcbiAgaWYgKHVJbmRleCA9PT0gLTEpIHtcbiAgICByZXR1cm4gW2xvY2FsZVN0cl07XG4gIH0gZWxzZSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgbGV0IHNlbGVjdGVkU3RyO1xuICAgIHRyeSB7XG4gICAgICBvcHRpb25zID0gZ2V0Q2FjaGVkRFRGKGxvY2FsZVN0cikucmVzb2x2ZWRPcHRpb25zKCk7XG4gICAgICBzZWxlY3RlZFN0ciA9IGxvY2FsZVN0cjtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBzbWFsbGVyID0gbG9jYWxlU3RyLnN1YnN0cmluZygwLCB1SW5kZXgpO1xuICAgICAgb3B0aW9ucyA9IGdldENhY2hlZERURihzbWFsbGVyKS5yZXNvbHZlZE9wdGlvbnMoKTtcbiAgICAgIHNlbGVjdGVkU3RyID0gc21hbGxlcjtcbiAgICB9XG5cbiAgICBjb25zdCB7IG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXIgfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIFtzZWxlY3RlZFN0ciwgbnVtYmVyaW5nU3lzdGVtLCBjYWxlbmRhcl07XG4gIH1cbn1cblxuZnVuY3Rpb24gaW50bENvbmZpZ1N0cmluZyhsb2NhbGVTdHIsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpIHtcbiAgaWYgKG91dHB1dENhbGVuZGFyIHx8IG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGlmICghbG9jYWxlU3RyLmluY2x1ZGVzKFwiLXUtXCIpKSB7XG4gICAgICBsb2NhbGVTdHIgKz0gXCItdVwiO1xuICAgIH1cblxuICAgIGlmIChvdXRwdXRDYWxlbmRhcikge1xuICAgICAgbG9jYWxlU3RyICs9IGAtY2EtJHtvdXRwdXRDYWxlbmRhcn1gO1xuICAgIH1cblxuICAgIGlmIChudW1iZXJpbmdTeXN0ZW0pIHtcbiAgICAgIGxvY2FsZVN0ciArPSBgLW51LSR7bnVtYmVyaW5nU3lzdGVtfWA7XG4gICAgfVxuICAgIHJldHVybiBsb2NhbGVTdHI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxvY2FsZVN0cjtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXBNb250aHMoZikge1xuICBjb25zdCBtcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMjsgaSsrKSB7XG4gICAgY29uc3QgZHQgPSBEYXRlVGltZS51dGMoMjAwOSwgaSwgMSk7XG4gICAgbXMucHVzaChmKGR0KSk7XG4gIH1cbiAgcmV0dXJuIG1zO1xufVxuXG5mdW5jdGlvbiBtYXBXZWVrZGF5cyhmKSB7XG4gIGNvbnN0IG1zID0gW107XG4gIGZvciAobGV0IGkgPSAxOyBpIDw9IDc7IGkrKykge1xuICAgIGNvbnN0IGR0ID0gRGF0ZVRpbWUudXRjKDIwMTYsIDExLCAxMyArIGkpO1xuICAgIG1zLnB1c2goZihkdCkpO1xuICB9XG4gIHJldHVybiBtcztcbn1cblxuZnVuY3Rpb24gbGlzdFN0dWZmKGxvYywgbGVuZ3RoLCBlbmdsaXNoRm4sIGludGxGbikge1xuICBjb25zdCBtb2RlID0gbG9jLmxpc3RpbmdNb2RlKCk7XG5cbiAgaWYgKG1vZGUgPT09IFwiZXJyb3JcIikge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKG1vZGUgPT09IFwiZW5cIikge1xuICAgIHJldHVybiBlbmdsaXNoRm4obGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW50bEZuKGxlbmd0aCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3VwcG9ydHNGYXN0TnVtYmVycyhsb2MpIHtcbiAgaWYgKGxvYy5udW1iZXJpbmdTeXN0ZW0gJiYgbG9jLm51bWJlcmluZ1N5c3RlbSAhPT0gXCJsYXRuXCIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGxvYy5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiIHx8XG4gICAgICAhbG9jLmxvY2FsZSB8fFxuICAgICAgbG9jLmxvY2FsZS5zdGFydHNXaXRoKFwiZW5cIikgfHxcbiAgICAgIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvYy5pbnRsKS5yZXNvbHZlZE9wdGlvbnMoKS5udW1iZXJpbmdTeXN0ZW0gPT09IFwibGF0blwiXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuY2xhc3MgUG9seU51bWJlckZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGludGwsIGZvcmNlU2ltcGxlLCBvcHRzKSB7XG4gICAgdGhpcy5wYWRUbyA9IG9wdHMucGFkVG8gfHwgMDtcbiAgICB0aGlzLmZsb29yID0gb3B0cy5mbG9vciB8fCBmYWxzZTtcblxuICAgIGNvbnN0IHsgcGFkVG8sIGZsb29yLCAuLi5vdGhlck9wdHMgfSA9IG9wdHM7XG5cbiAgICBpZiAoIWZvcmNlU2ltcGxlIHx8IE9iamVjdC5rZXlzKG90aGVyT3B0cykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaW50bE9wdHMgPSB7IHVzZUdyb3VwaW5nOiBmYWxzZSwgLi4ub3B0cyB9O1xuICAgICAgaWYgKG9wdHMucGFkVG8gPiAwKSBpbnRsT3B0cy5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IG9wdHMucGFkVG87XG4gICAgICB0aGlzLmluZiA9IGdldENhY2hlZElORihpbnRsLCBpbnRsT3B0cyk7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0KGkpIHtcbiAgICBpZiAodGhpcy5pbmYpIHtcbiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5mbG9vciA/IE1hdGguZmxvb3IoaSkgOiBpO1xuICAgICAgcmV0dXJuIHRoaXMuaW5mLmZvcm1hdChmaXhlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRvIG1hdGNoIHRoZSBicm93c2VyJ3MgbnVtYmVyZm9ybWF0dGVyIGRlZmF1bHRzXG4gICAgICBjb25zdCBmaXhlZCA9IHRoaXMuZmxvb3IgPyBNYXRoLmZsb29yKGkpIDogcm91bmRUbyhpLCAzKTtcbiAgICAgIHJldHVybiBwYWRTdGFydChmaXhlZCwgdGhpcy5wYWRUbyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5jbGFzcyBQb2x5RGF0ZUZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGR0LCBpbnRsLCBvcHRzKSB7XG4gICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICB0aGlzLm9yaWdpbmFsWm9uZSA9IHVuZGVmaW5lZDtcblxuICAgIGxldCB6ID0gdW5kZWZpbmVkO1xuICAgIGlmICh0aGlzLm9wdHMudGltZVpvbmUpIHtcbiAgICAgIC8vIERvbid0IGFwcGx5IGFueSB3b3JrYXJvdW5kcyBpZiBhIHRpbWVab25lIGlzIGV4cGxpY2l0bHkgcHJvdmlkZWQgaW4gb3B0c1xuICAgICAgdGhpcy5kdCA9IGR0O1xuICAgIH0gZWxzZSBpZiAoZHQuem9uZS50eXBlID09PSBcImZpeGVkXCIpIHtcbiAgICAgIC8vIFVUQy04IG9yIEV0Yy9VVEMtOCBhcmUgbm90IHBhcnQgb2YgdHpkYXRhLCBvbmx5IEV0Yy9HTVQrOCBhbmQgdGhlIGxpa2UuXG4gICAgICAvLyBUaGF0IGlzIHdoeSBmaXhlZC1vZmZzZXQgVFogaXMgc2V0IHRvIHRoYXQgdW5sZXNzIGl0IGlzOlxuICAgICAgLy8gMS4gUmVwcmVzZW50aW5nIG9mZnNldCAwIHdoZW4gVVRDIGlzIHVzZWQgdG8gbWFpbnRhaW4gcHJldmlvdXMgYmVoYXZpb3IgYW5kIGRvZXMgbm90IGJlY29tZSBHTVQuXG4gICAgICAvLyAyLiBVbnN1cHBvcnRlZCBieSB0aGUgYnJvd3NlcjpcbiAgICAgIC8vICAgIC0gc29tZSBkbyBub3Qgc3VwcG9ydCBFdGMvXG4gICAgICAvLyAgICAtIDwgRXRjL0dNVC0xNCwgPiBFdGMvR01UKzEyLCBhbmQgMzAtbWludXRlIG9yIDQ1LW1pbnV0ZSBvZmZzZXRzIGFyZSBub3QgcGFydCBvZiB0emRhdGFcbiAgICAgIGNvbnN0IGdtdE9mZnNldCA9IC0xICogKGR0Lm9mZnNldCAvIDYwKTtcbiAgICAgIGNvbnN0IG9mZnNldFogPSBnbXRPZmZzZXQgPj0gMCA/IGBFdGMvR01UKyR7Z210T2Zmc2V0fWAgOiBgRXRjL0dNVCR7Z210T2Zmc2V0fWA7XG4gICAgICBpZiAoZHQub2Zmc2V0ICE9PSAwICYmIElBTkFab25lLmNyZWF0ZShvZmZzZXRaKS52YWxpZCkge1xuICAgICAgICB6ID0gb2Zmc2V0WjtcbiAgICAgICAgdGhpcy5kdCA9IGR0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gTm90IGFsbCBmaXhlZC1vZmZzZXQgem9uZXMgbGlrZSBFdGMvKzQ6MzAgYXJlIHByZXNlbnQgaW4gdHpkYXRhIHNvXG4gICAgICAgIC8vIHdlIG1hbnVhbGx5IGFwcGx5IHRoZSBvZmZzZXQgYW5kIHN1YnN0aXR1dGUgdGhlIHpvbmUgYXMgbmVlZGVkLlxuICAgICAgICB6ID0gXCJVVENcIjtcbiAgICAgICAgdGhpcy5kdCA9IGR0Lm9mZnNldCA9PT0gMCA/IGR0IDogZHQuc2V0Wm9uZShcIlVUQ1wiKS5wbHVzKHsgbWludXRlczogZHQub2Zmc2V0IH0pO1xuICAgICAgICB0aGlzLm9yaWdpbmFsWm9uZSA9IGR0LnpvbmU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkdC56b25lLnR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICB9IGVsc2UgaWYgKGR0LnpvbmUudHlwZSA9PT0gXCJpYW5hXCIpIHtcbiAgICAgIHRoaXMuZHQgPSBkdDtcbiAgICAgIHogPSBkdC56b25lLm5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEN1c3RvbSB6b25lcyBjYW4gaGF2ZSBhbnkgb2Zmc2V0IC8gb2Zmc2V0TmFtZSBzbyB3ZSBqdXN0IG1hbnVhbGx5XG4gICAgICAvLyBhcHBseSB0aGUgb2Zmc2V0IGFuZCBzdWJzdGl0dXRlIHRoZSB6b25lIGFzIG5lZWRlZC5cbiAgICAgIHogPSBcIlVUQ1wiO1xuICAgICAgdGhpcy5kdCA9IGR0LnNldFpvbmUoXCJVVENcIikucGx1cyh7IG1pbnV0ZXM6IGR0Lm9mZnNldCB9KTtcbiAgICAgIHRoaXMub3JpZ2luYWxab25lID0gZHQuem9uZTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnRsT3B0cyA9IHsgLi4udGhpcy5vcHRzIH07XG4gICAgaW50bE9wdHMudGltZVpvbmUgPSBpbnRsT3B0cy50aW1lWm9uZSB8fCB6O1xuICAgIHRoaXMuZHRmID0gZ2V0Q2FjaGVkRFRGKGludGwsIGludGxPcHRzKTtcbiAgfVxuXG4gIGZvcm1hdCgpIHtcbiAgICBpZiAodGhpcy5vcmlnaW5hbFpvbmUpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgdG8gc3Vic3RpdHV0ZSBpbiB0aGUgYWN0dWFsIHpvbmUgbmFtZSwgd2UgaGF2ZSB0byB1c2VcbiAgICAgIC8vIGZvcm1hdFRvUGFydHMgc28gdGhhdCB0aGUgdGltZXpvbmUgY2FuIGJlIHJlcGxhY2VkLlxuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9QYXJ0cygpXG4gICAgICAgIC5tYXAoKHsgdmFsdWUgfSkgPT4gdmFsdWUpXG4gICAgICAgIC5qb2luKFwiXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kdGYuZm9ybWF0KHRoaXMuZHQudG9KU0RhdGUoKSk7XG4gIH1cblxuICBmb3JtYXRUb1BhcnRzKCkge1xuICAgIGNvbnN0IHBhcnRzID0gdGhpcy5kdGYuZm9ybWF0VG9QYXJ0cyh0aGlzLmR0LnRvSlNEYXRlKCkpO1xuICAgIGlmICh0aGlzLm9yaWdpbmFsWm9uZSkge1xuICAgICAgcmV0dXJuIHBhcnRzLm1hcCgocGFydCkgPT4ge1xuICAgICAgICBpZiAocGFydC50eXBlID09PSBcInRpbWVab25lTmFtZVwiKSB7XG4gICAgICAgICAgY29uc3Qgb2Zmc2V0TmFtZSA9IHRoaXMub3JpZ2luYWxab25lLm9mZnNldE5hbWUodGhpcy5kdC50cywge1xuICAgICAgICAgICAgbG9jYWxlOiB0aGlzLmR0LmxvY2FsZSxcbiAgICAgICAgICAgIGZvcm1hdDogdGhpcy5vcHRzLnRpbWVab25lTmFtZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucGFydCxcbiAgICAgICAgICAgIHZhbHVlOiBvZmZzZXROYW1lLFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICByZXNvbHZlZE9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRmLnJlc29sdmVkT3B0aW9ucygpO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgUG9seVJlbEZvcm1hdHRlciB7XG4gIGNvbnN0cnVjdG9yKGludGwsIGlzRW5nbGlzaCwgb3B0cykge1xuICAgIHRoaXMub3B0cyA9IHsgc3R5bGU6IFwibG9uZ1wiLCAuLi5vcHRzIH07XG4gICAgaWYgKCFpc0VuZ2xpc2ggJiYgaGFzUmVsYXRpdmUoKSkge1xuICAgICAgdGhpcy5ydGYgPSBnZXRDYWNoZWRSVEYoaW50bCwgb3B0cyk7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0KGNvdW50LCB1bml0KSB7XG4gICAgaWYgKHRoaXMucnRmKSB7XG4gICAgICByZXR1cm4gdGhpcy5ydGYuZm9ybWF0KGNvdW50LCB1bml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEVuZ2xpc2guZm9ybWF0UmVsYXRpdmVUaW1lKHVuaXQsIGNvdW50LCB0aGlzLm9wdHMubnVtZXJpYywgdGhpcy5vcHRzLnN0eWxlICE9PSBcImxvbmdcIik7XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0VG9QYXJ0cyhjb3VudCwgdW5pdCkge1xuICAgIGlmICh0aGlzLnJ0Zikge1xuICAgICAgcmV0dXJuIHRoaXMucnRmLmZvcm1hdFRvUGFydHMoY291bnQsIHVuaXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGZhbGxiYWNrV2Vla1NldHRpbmdzID0ge1xuICBmaXJzdERheTogMSxcbiAgbWluaW1hbERheXM6IDQsXG4gIHdlZWtlbmQ6IFs2LCA3XSxcbn07XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhbGUge1xuICBzdGF0aWMgZnJvbU9wdHMob3B0cykge1xuICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKFxuICAgICAgb3B0cy5sb2NhbGUsXG4gICAgICBvcHRzLm51bWJlcmluZ1N5c3RlbSxcbiAgICAgIG9wdHMub3V0cHV0Q2FsZW5kYXIsXG4gICAgICBvcHRzLndlZWtTZXR0aW5ncyxcbiAgICAgIG9wdHMuZGVmYXVsdFRvRU5cbiAgICApO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncywgZGVmYXVsdFRvRU4gPSBmYWxzZSkge1xuICAgIGNvbnN0IHNwZWNpZmllZExvY2FsZSA9IGxvY2FsZSB8fCBTZXR0aW5ncy5kZWZhdWx0TG9jYWxlO1xuICAgIC8vIHRoZSBzeXN0ZW0gbG9jYWxlIGlzIHVzZWZ1bCBmb3IgaHVtYW4gcmVhZGFibGUgc3RyaW5ncyBidXQgYW5ub3lpbmcgZm9yIHBhcnNpbmcvZm9ybWF0dGluZyBrbm93biBmb3JtYXRzXG4gICAgY29uc3QgbG9jYWxlUiA9IHNwZWNpZmllZExvY2FsZSB8fCAoZGVmYXVsdFRvRU4gPyBcImVuLVVTXCIgOiBzeXN0ZW1Mb2NhbGUoKSk7XG4gICAgY29uc3QgbnVtYmVyaW5nU3lzdGVtUiA9IG51bWJlcmluZ1N5c3RlbSB8fCBTZXR0aW5ncy5kZWZhdWx0TnVtYmVyaW5nU3lzdGVtO1xuICAgIGNvbnN0IG91dHB1dENhbGVuZGFyUiA9IG91dHB1dENhbGVuZGFyIHx8IFNldHRpbmdzLmRlZmF1bHRPdXRwdXRDYWxlbmRhcjtcbiAgICBjb25zdCB3ZWVrU2V0dGluZ3NSID0gdmFsaWRhdGVXZWVrU2V0dGluZ3Mod2Vla1NldHRpbmdzKSB8fCBTZXR0aW5ncy5kZWZhdWx0V2Vla1NldHRpbmdzO1xuICAgIHJldHVybiBuZXcgTG9jYWxlKGxvY2FsZVIsIG51bWJlcmluZ1N5c3RlbVIsIG91dHB1dENhbGVuZGFyUiwgd2Vla1NldHRpbmdzUiwgc3BlY2lmaWVkTG9jYWxlKTtcbiAgfVxuXG4gIHN0YXRpYyByZXNldENhY2hlKCkge1xuICAgIHN5c0xvY2FsZUNhY2hlID0gbnVsbDtcbiAgICBpbnRsRFRDYWNoZSA9IHt9O1xuICAgIGludGxOdW1DYWNoZSA9IHt9O1xuICAgIGludGxSZWxDYWNoZSA9IHt9O1xuICB9XG5cbiAgc3RhdGljIGZyb21PYmplY3QoeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncyB9ID0ge30pIHtcbiAgICByZXR1cm4gTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncyk7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihsb2NhbGUsIG51bWJlcmluZywgb3V0cHV0Q2FsZW5kYXIsIHdlZWtTZXR0aW5ncywgc3BlY2lmaWVkTG9jYWxlKSB7XG4gICAgY29uc3QgW3BhcnNlZExvY2FsZSwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtLCBwYXJzZWRPdXRwdXRDYWxlbmRhcl0gPSBwYXJzZUxvY2FsZVN0cmluZyhsb2NhbGUpO1xuXG4gICAgdGhpcy5sb2NhbGUgPSBwYXJzZWRMb2NhbGU7XG4gICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmcgfHwgcGFyc2VkTnVtYmVyaW5nU3lzdGVtIHx8IG51bGw7XG4gICAgdGhpcy5vdXRwdXRDYWxlbmRhciA9IG91dHB1dENhbGVuZGFyIHx8IHBhcnNlZE91dHB1dENhbGVuZGFyIHx8IG51bGw7XG4gICAgdGhpcy53ZWVrU2V0dGluZ3MgPSB3ZWVrU2V0dGluZ3M7XG4gICAgdGhpcy5pbnRsID0gaW50bENvbmZpZ1N0cmluZyh0aGlzLmxvY2FsZSwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sIHRoaXMub3V0cHV0Q2FsZW5kYXIpO1xuXG4gICAgdGhpcy53ZWVrZGF5c0NhY2hlID0geyBmb3JtYXQ6IHt9LCBzdGFuZGFsb25lOiB7fSB9O1xuICAgIHRoaXMubW9udGhzQ2FjaGUgPSB7IGZvcm1hdDoge30sIHN0YW5kYWxvbmU6IHt9IH07XG4gICAgdGhpcy5tZXJpZGllbUNhY2hlID0gbnVsbDtcbiAgICB0aGlzLmVyYUNhY2hlID0ge307XG5cbiAgICB0aGlzLnNwZWNpZmllZExvY2FsZSA9IHNwZWNpZmllZExvY2FsZTtcbiAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gbnVsbDtcbiAgfVxuXG4gIGdldCBmYXN0TnVtYmVycygpIHtcbiAgICBpZiAodGhpcy5mYXN0TnVtYmVyc0NhY2hlZCA9PSBudWxsKSB7XG4gICAgICB0aGlzLmZhc3ROdW1iZXJzQ2FjaGVkID0gc3VwcG9ydHNGYXN0TnVtYmVycyh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mYXN0TnVtYmVyc0NhY2hlZDtcbiAgfVxuXG4gIGxpc3RpbmdNb2RlKCkge1xuICAgIGNvbnN0IGlzQWN0dWFsbHlFbiA9IHRoaXMuaXNFbmdsaXNoKCk7XG4gICAgY29uc3QgaGFzTm9XZWlyZG5lc3MgPVxuICAgICAgKHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBudWxsIHx8IHRoaXMubnVtYmVyaW5nU3lzdGVtID09PSBcImxhdG5cIikgJiZcbiAgICAgICh0aGlzLm91dHB1dENhbGVuZGFyID09PSBudWxsIHx8IHRoaXMub3V0cHV0Q2FsZW5kYXIgPT09IFwiZ3JlZ29yeVwiKTtcbiAgICByZXR1cm4gaXNBY3R1YWxseUVuICYmIGhhc05vV2VpcmRuZXNzID8gXCJlblwiIDogXCJpbnRsXCI7XG4gIH1cblxuICBjbG9uZShhbHRzKSB7XG4gICAgaWYgKCFhbHRzIHx8IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFsdHMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBMb2NhbGUuY3JlYXRlKFxuICAgICAgICBhbHRzLmxvY2FsZSB8fCB0aGlzLnNwZWNpZmllZExvY2FsZSxcbiAgICAgICAgYWx0cy5udW1iZXJpbmdTeXN0ZW0gfHwgdGhpcy5udW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGFsdHMub3V0cHV0Q2FsZW5kYXIgfHwgdGhpcy5vdXRwdXRDYWxlbmRhcixcbiAgICAgICAgdmFsaWRhdGVXZWVrU2V0dGluZ3MoYWx0cy53ZWVrU2V0dGluZ3MpIHx8IHRoaXMud2Vla1NldHRpbmdzLFxuICAgICAgICBhbHRzLmRlZmF1bHRUb0VOIHx8IGZhbHNlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJlZGVmYXVsdFRvRU4oYWx0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvbmUoeyAuLi5hbHRzLCBkZWZhdWx0VG9FTjogdHJ1ZSB9KTtcbiAgfVxuXG4gIHJlZGVmYXVsdFRvU3lzdGVtKGFsdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmNsb25lKHsgLi4uYWx0cywgZGVmYXVsdFRvRU46IGZhbHNlIH0pO1xuICB9XG5cbiAgbW9udGhzKGxlbmd0aCwgZm9ybWF0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgRW5nbGlzaC5tb250aHMsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGwgPSBmb3JtYXQgPyB7IG1vbnRoOiBsZW5ndGgsIGRheTogXCJudW1lcmljXCIgfSA6IHsgbW9udGg6IGxlbmd0aCB9LFxuICAgICAgICBmb3JtYXRTdHIgPSBmb3JtYXQgPyBcImZvcm1hdFwiIDogXCJzdGFuZGFsb25lXCI7XG4gICAgICBpZiAoIXRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMubW9udGhzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdID0gbWFwTW9udGhzKChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIm1vbnRoXCIpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLm1vbnRoc0NhY2hlW2Zvcm1hdFN0cl1bbGVuZ3RoXTtcbiAgICB9KTtcbiAgfVxuXG4gIHdlZWtkYXlzKGxlbmd0aCwgZm9ybWF0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gbGlzdFN0dWZmKHRoaXMsIGxlbmd0aCwgRW5nbGlzaC53ZWVrZGF5cywgKCkgPT4ge1xuICAgICAgY29uc3QgaW50bCA9IGZvcm1hdFxuICAgICAgICAgID8geyB3ZWVrZGF5OiBsZW5ndGgsIHllYXI6IFwibnVtZXJpY1wiLCBtb250aDogXCJsb25nXCIsIGRheTogXCJudW1lcmljXCIgfVxuICAgICAgICAgIDogeyB3ZWVrZGF5OiBsZW5ndGggfSxcbiAgICAgICAgZm9ybWF0U3RyID0gZm9ybWF0ID8gXCJmb3JtYXRcIiA6IFwic3RhbmRhbG9uZVwiO1xuICAgICAgaWYgKCF0aGlzLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMud2Vla2RheXNDYWNoZVtmb3JtYXRTdHJdW2xlbmd0aF0gPSBtYXBXZWVrZGF5cygoZHQpID0+XG4gICAgICAgICAgdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcIndlZWtkYXlcIilcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLndlZWtkYXlzQ2FjaGVbZm9ybWF0U3RyXVtsZW5ndGhdO1xuICAgIH0pO1xuICB9XG5cbiAgbWVyaWRpZW1zKCkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYoXG4gICAgICB0aGlzLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgKCkgPT4gRW5nbGlzaC5tZXJpZGllbXMsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIEluIHRoZW9yeSB0aGVyZSBjb3VsZCBiZSBhcmliaXRyYXJ5IGRheSBwZXJpb2RzLiBXZSdyZSBnb25uYSBhc3N1bWUgdGhlcmUgYXJlIGV4YWN0bHkgdHdvXG4gICAgICAgIC8vIGZvciBBTSBhbmQgUE0uIFRoaXMgaXMgcHJvYmFibHkgd3JvbmcsIGJ1dCBpdCdzIG1ha2VzIHBhcnNpbmcgd2F5IGVhc2llci5cbiAgICAgICAgaWYgKCF0aGlzLm1lcmlkaWVtQ2FjaGUpIHtcbiAgICAgICAgICBjb25zdCBpbnRsID0geyBob3VyOiBcIm51bWVyaWNcIiwgaG91ckN5Y2xlOiBcImgxMlwiIH07XG4gICAgICAgICAgdGhpcy5tZXJpZGllbUNhY2hlID0gW0RhdGVUaW1lLnV0YygyMDE2LCAxMSwgMTMsIDkpLCBEYXRlVGltZS51dGMoMjAxNiwgMTEsIDEzLCAxOSldLm1hcChcbiAgICAgICAgICAgIChkdCkgPT4gdGhpcy5leHRyYWN0KGR0LCBpbnRsLCBcImRheXBlcmlvZFwiKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tZXJpZGllbUNhY2hlO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBlcmFzKGxlbmd0aCkge1xuICAgIHJldHVybiBsaXN0U3R1ZmYodGhpcywgbGVuZ3RoLCBFbmdsaXNoLmVyYXMsICgpID0+IHtcbiAgICAgIGNvbnN0IGludGwgPSB7IGVyYTogbGVuZ3RoIH07XG5cbiAgICAgIC8vIFRoaXMgaXMgcHJvYmxlbWF0aWMuIERpZmZlcmVudCBjYWxlbmRhcnMgYXJlIGdvaW5nIHRvIGRlZmluZSBlcmFzIHRvdGFsbHkgZGlmZmVyZW50bHkuIFdoYXQgSSBuZWVkIGlzIHRoZSBtaW5pbXVtIHNldCBvZiBkYXRlc1xuICAgICAgLy8gdG8gZGVmaW5pdGVseSBlbnVtZXJhdGUgdGhlbS5cbiAgICAgIGlmICghdGhpcy5lcmFDYWNoZVtsZW5ndGhdKSB7XG4gICAgICAgIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXSA9IFtEYXRlVGltZS51dGMoLTQwLCAxLCAxKSwgRGF0ZVRpbWUudXRjKDIwMTcsIDEsIDEpXS5tYXAoKGR0KSA9PlxuICAgICAgICAgIHRoaXMuZXh0cmFjdChkdCwgaW50bCwgXCJlcmFcIilcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZXJhQ2FjaGVbbGVuZ3RoXTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4dHJhY3QoZHQsIGludGxPcHRzLCBmaWVsZCkge1xuICAgIGNvbnN0IGRmID0gdGhpcy5kdEZvcm1hdHRlcihkdCwgaW50bE9wdHMpLFxuICAgICAgcmVzdWx0cyA9IGRmLmZvcm1hdFRvUGFydHMoKSxcbiAgICAgIG1hdGNoaW5nID0gcmVzdWx0cy5maW5kKChtKSA9PiBtLnR5cGUudG9Mb3dlckNhc2UoKSA9PT0gZmllbGQpO1xuICAgIHJldHVybiBtYXRjaGluZyA/IG1hdGNoaW5nLnZhbHVlIDogbnVsbDtcbiAgfVxuXG4gIG51bWJlckZvcm1hdHRlcihvcHRzID0ge30pIHtcbiAgICAvLyB0aGlzIGZvcmNlc2ltcGxlIG9wdGlvbiBpcyBuZXZlciB1c2VkICh0aGUgb25seSBjYWxsZXIgc2hvcnQtY2lyY3VpdHMgb24gaXQsIGJ1dCBpdCBzZWVtcyBzYWZlciB0byBsZWF2ZSlcbiAgICAvLyAoaW4gY29udHJhc3QsIHRoZSByZXN0IG9mIHRoZSBjb25kaXRpb24gaXMgdXNlZCBoZWF2aWx5KVxuICAgIHJldHVybiBuZXcgUG9seU51bWJlckZvcm1hdHRlcih0aGlzLmludGwsIG9wdHMuZm9yY2VTaW1wbGUgfHwgdGhpcy5mYXN0TnVtYmVycywgb3B0cyk7XG4gIH1cblxuICBkdEZvcm1hdHRlcihkdCwgaW50bE9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUG9seURhdGVGb3JtYXR0ZXIoZHQsIHRoaXMuaW50bCwgaW50bE9wdHMpO1xuICB9XG5cbiAgcmVsRm9ybWF0dGVyKG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgUG9seVJlbEZvcm1hdHRlcih0aGlzLmludGwsIHRoaXMuaXNFbmdsaXNoKCksIG9wdHMpO1xuICB9XG5cbiAgbGlzdEZvcm1hdHRlcihvcHRzID0ge30pIHtcbiAgICByZXR1cm4gZ2V0Q2FjaGVkTEYodGhpcy5pbnRsLCBvcHRzKTtcbiAgfVxuXG4gIGlzRW5nbGlzaCgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5sb2NhbGUgPT09IFwiZW5cIiB8fFxuICAgICAgdGhpcy5sb2NhbGUudG9Mb3dlckNhc2UoKSA9PT0gXCJlbi11c1wiIHx8XG4gICAgICBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmludGwpLnJlc29sdmVkT3B0aW9ucygpLmxvY2FsZS5zdGFydHNXaXRoKFwiZW4tdXNcIilcbiAgICApO1xuICB9XG5cbiAgZ2V0V2Vla1NldHRpbmdzKCkge1xuICAgIGlmICh0aGlzLndlZWtTZXR0aW5ncykge1xuICAgICAgcmV0dXJuIHRoaXMud2Vla1NldHRpbmdzO1xuICAgIH0gZWxzZSBpZiAoIWhhc0xvY2FsZVdlZWtJbmZvKCkpIHtcbiAgICAgIHJldHVybiBmYWxsYmFja1dlZWtTZXR0aW5ncztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGdldENhY2hlZFdlZWtJbmZvKHRoaXMubG9jYWxlKTtcbiAgICB9XG4gIH1cblxuICBnZXRTdGFydE9mV2VlaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5maXJzdERheTtcbiAgfVxuXG4gIGdldE1pbkRheXNJbkZpcnN0V2VlaygpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXZWVrU2V0dGluZ3MoKS5taW5pbWFsRGF5cztcbiAgfVxuXG4gIGdldFdlZWtlbmREYXlzKCkge1xuICAgIHJldHVybiB0aGlzLmdldFdlZWtTZXR0aW5ncygpLndlZWtlbmQ7XG4gIH1cblxuICBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5sb2NhbGUgPT09IG90aGVyLmxvY2FsZSAmJlxuICAgICAgdGhpcy5udW1iZXJpbmdTeXN0ZW0gPT09IG90aGVyLm51bWJlcmluZ1N5c3RlbSAmJlxuICAgICAgdGhpcy5vdXRwdXRDYWxlbmRhciA9PT0gb3RoZXIub3V0cHV0Q2FsZW5kYXJcbiAgICApO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgZm9ybWF0T2Zmc2V0LCBzaWduZWRPZmZzZXQgfSBmcm9tIFwiLi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuXG5sZXQgc2luZ2xldG9uID0gbnVsbDtcblxuLyoqXG4gKiBBIHpvbmUgd2l0aCBhIGZpeGVkIG9mZnNldCAobWVhbmluZyBubyBEU1QpXG4gKiBAaW1wbGVtZW50cyB7Wm9uZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRml4ZWRPZmZzZXRab25lIGV4dGVuZHMgWm9uZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgVVRDXG4gICAqIEByZXR1cm4ge0ZpeGVkT2Zmc2V0Wm9uZX1cbiAgICovXG4gIHN0YXRpYyBnZXQgdXRjSW5zdGFuY2UoKSB7XG4gICAgaWYgKHNpbmdsZXRvbiA9PT0gbnVsbCkge1xuICAgICAgc2luZ2xldG9uID0gbmV3IEZpeGVkT2Zmc2V0Wm9uZSgwKTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbmdsZXRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugd2l0aCBhIHNwZWNpZmllZCBvZmZzZXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCAtIFRoZSBvZmZzZXQgaW4gbWludXRlc1xuICAgKiBAcmV0dXJuIHtGaXhlZE9mZnNldFpvbmV9XG4gICAqL1xuICBzdGF0aWMgaW5zdGFuY2Uob2Zmc2V0KSB7XG4gICAgcmV0dXJuIG9mZnNldCA9PT0gMCA/IEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZSA6IG5ldyBGaXhlZE9mZnNldFpvbmUob2Zmc2V0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgRml4ZWRPZmZzZXRab25lIGZyb20gYSBVVEMgb2Zmc2V0IHN0cmluZywgbGlrZSBcIlVUQys2XCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHMgLSBUaGUgb2Zmc2V0IHN0cmluZyB0byBwYXJzZVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrNlwiKVxuICAgKiBAZXhhbXBsZSBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIoXCJVVEMrMDZcIilcbiAgICogQGV4YW1wbGUgRml4ZWRPZmZzZXRab25lLnBhcnNlU3BlY2lmaWVyKFwiVVRDLTY6MDBcIilcbiAgICogQHJldHVybiB7Rml4ZWRPZmZzZXRab25lfVxuICAgKi9cbiAgc3RhdGljIHBhcnNlU3BlY2lmaWVyKHMpIHtcbiAgICBpZiAocykge1xuICAgICAgY29uc3QgciA9IHMubWF0Y2goL151dGMoPzooWystXVxcZHsxLDJ9KSg/OjooXFxkezJ9KSk/KT8kL2kpO1xuICAgICAgaWYgKHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGaXhlZE9mZnNldFpvbmUoc2lnbmVkT2Zmc2V0KHJbMV0sIHJbMl0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihvZmZzZXQpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKiBAcHJpdmF0ZSAqKi9cbiAgICB0aGlzLmZpeGVkID0gb2Zmc2V0O1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwiZml4ZWRcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmZpeGVkID09PSAwID8gXCJVVENcIiA6IGBVVEMke2Zvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBcIm5hcnJvd1wiKX1gO1xuICB9XG5cbiAgZ2V0IGlhbmFOYW1lKCkge1xuICAgIGlmICh0aGlzLmZpeGVkID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJFdGMvVVRDXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgRXRjL0dNVCR7Zm9ybWF0T2Zmc2V0KC10aGlzLmZpeGVkLCBcIm5hcnJvd1wiKX1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCh0cywgZm9ybWF0KSB7XG4gICAgcmV0dXJuIGZvcm1hdE9mZnNldCh0aGlzLmZpeGVkLCBmb3JtYXQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IGlzVW5pdmVyc2FsKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0KCkge1xuICAgIHJldHVybiB0aGlzLmZpeGVkO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKG90aGVyWm9uZSkge1xuICAgIHJldHVybiBvdGhlclpvbmUudHlwZSA9PT0gXCJmaXhlZFwiICYmIG90aGVyWm9uZS5maXhlZCA9PT0gdGhpcy5maXhlZDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IFpvbmUgZnJvbSBcIi4uL3pvbmUuanNcIjtcblxuLyoqXG4gKiBBIHpvbmUgdGhhdCBmYWlsZWQgdG8gcGFyc2UuIFlvdSBzaG91bGQgbmV2ZXIgbmVlZCB0byBpbnN0YW50aWF0ZSB0aGlzLlxuICogQGltcGxlbWVudHMge1pvbmV9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmFsaWRab25lIGV4dGVuZHMgWm9uZSB7XG4gIGNvbnN0cnVjdG9yKHpvbmVOYW1lKSB7XG4gICAgc3VwZXIoKTtcbiAgICAvKiogIEBwcml2YXRlICovXG4gICAgdGhpcy56b25lTmFtZSA9IHpvbmVOYW1lO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IHR5cGUoKSB7XG4gICAgcmV0dXJuIFwiaW52YWxpZFwiO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZ2V0IG5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuem9uZU5hbWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICoqL1xuICBnZXQgaXNVbml2ZXJzYWwoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgb2Zmc2V0TmFtZSgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGZvcm1hdE9mZnNldCgpIHtcbiAgICByZXR1cm4gXCJcIjtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIG9mZnNldCgpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqKi9cbiAgZXF1YWxzKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKiovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIiwgIi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5pbXBvcnQgWm9uZSBmcm9tIFwiLi4vem9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuLi96b25lcy9JQU5BWm9uZS5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi4vem9uZXMvZml4ZWRPZmZzZXRab25lLmpzXCI7XG5pbXBvcnQgSW52YWxpZFpvbmUgZnJvbSBcIi4uL3pvbmVzL2ludmFsaWRab25lLmpzXCI7XG5cbmltcG9ydCB7IGlzVW5kZWZpbmVkLCBpc1N0cmluZywgaXNOdW1iZXIgfSBmcm9tIFwiLi91dGlsLmpzXCI7XG5pbXBvcnQgU3lzdGVtWm9uZSBmcm9tIFwiLi4vem9uZXMvc3lzdGVtWm9uZS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplWm9uZShpbnB1dCwgZGVmYXVsdFpvbmUpIHtcbiAgbGV0IG9mZnNldDtcbiAgaWYgKGlzVW5kZWZpbmVkKGlucHV0KSB8fCBpbnB1dCA9PT0gbnVsbCkge1xuICAgIHJldHVybiBkZWZhdWx0Wm9uZTtcbiAgfSBlbHNlIGlmIChpbnB1dCBpbnN0YW5jZW9mIFpvbmUpIHtcbiAgICByZXR1cm4gaW5wdXQ7XG4gIH0gZWxzZSBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgY29uc3QgbG93ZXJlZCA9IGlucHV0LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyZWQgPT09IFwiZGVmYXVsdFwiKSByZXR1cm4gZGVmYXVsdFpvbmU7XG4gICAgZWxzZSBpZiAobG93ZXJlZCA9PT0gXCJsb2NhbFwiIHx8IGxvd2VyZWQgPT09IFwic3lzdGVtXCIpIHJldHVybiBTeXN0ZW1ab25lLmluc3RhbmNlO1xuICAgIGVsc2UgaWYgKGxvd2VyZWQgPT09IFwidXRjXCIgfHwgbG93ZXJlZCA9PT0gXCJnbXRcIikgcmV0dXJuIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZTtcbiAgICBlbHNlIHJldHVybiBGaXhlZE9mZnNldFpvbmUucGFyc2VTcGVjaWZpZXIobG93ZXJlZCkgfHwgSUFOQVpvbmUuY3JlYXRlKGlucHV0KTtcbiAgfSBlbHNlIGlmIChpc051bWJlcihpbnB1dCkpIHtcbiAgICByZXR1cm4gRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGlucHV0KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgaW5wdXQgPT09IFwib2JqZWN0XCIgJiYgXCJvZmZzZXRcIiBpbiBpbnB1dCAmJiB0eXBlb2YgaW5wdXQub2Zmc2V0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAvLyBUaGlzIGlzIGR1bWIsIGJ1dCB0aGUgaW5zdGFuY2VvZiBjaGVjayBhYm92ZSBkb2Vzbid0IHNlZW0gdG8gcmVhbGx5IHdvcmtcbiAgICAvLyBzbyB3ZSdyZSBkdWNrIGNoZWNraW5nIGl0XG4gICAgcmV0dXJuIGlucHV0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgSW52YWxpZFpvbmUoaW5wdXQpO1xuICB9XG59XG4iLCAiaW1wb3J0IFN5c3RlbVpvbmUgZnJvbSBcIi4vem9uZXMvc3lzdGVtWm9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5cbmltcG9ydCB7IG5vcm1hbGl6ZVpvbmUgfSBmcm9tIFwiLi9pbXBsL3pvbmVVdGlsLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZVdlZWtTZXR0aW5ncyB9IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuXG5sZXQgbm93ID0gKCkgPT4gRGF0ZS5ub3coKSxcbiAgZGVmYXVsdFpvbmUgPSBcInN5c3RlbVwiLFxuICBkZWZhdWx0TG9jYWxlID0gbnVsbCxcbiAgZGVmYXVsdE51bWJlcmluZ1N5c3RlbSA9IG51bGwsXG4gIGRlZmF1bHRPdXRwdXRDYWxlbmRhciA9IG51bGwsXG4gIHR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDYwLFxuICB0aHJvd09uSW52YWxpZCxcbiAgZGVmYXVsdFdlZWtTZXR0aW5ncyA9IG51bGw7XG5cbi8qKlxuICogU2V0dGluZ3MgY29udGFpbnMgc3RhdGljIGdldHRlcnMgYW5kIHNldHRlcnMgdGhhdCBjb250cm9sIEx1eG9uJ3Mgb3ZlcmFsbCBiZWhhdmlvci4gTHV4b24gaXMgYSBzaW1wbGUgbGlicmFyeSB3aXRoIGZldyBvcHRpb25zLCBidXQgdGhlIG9uZXMgaXQgZG9lcyBoYXZlIGxpdmUgaGVyZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGluZ3Mge1xuICAvKipcbiAgICogR2V0IHRoZSBjYWxsYmFjayBmb3IgcmV0dXJuaW5nIHRoZSBjdXJyZW50IHRpbWVzdGFtcC5cbiAgICogQHR5cGUge2Z1bmN0aW9ufVxuICAgKi9cbiAgc3RhdGljIGdldCBub3coKSB7XG4gICAgcmV0dXJuIG5vdztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNhbGxiYWNrIGZvciByZXR1cm5pbmcgdGhlIGN1cnJlbnQgdGltZXN0YW1wLlxuICAgKiBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlciwgd2hpY2ggd2lsbCBiZSBpbnRlcnByZXRlZCBhcyBhbiBFcG9jaCBtaWxsaXNlY29uZCBjb3VudFxuICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAqIEBleGFtcGxlIFNldHRpbmdzLm5vdyA9ICgpID0+IERhdGUubm93KCkgKyAzMDAwIC8vIHByZXRlbmQgaXQgaXMgMyBzZWNvbmRzIGluIHRoZSBmdXR1cmVcbiAgICogQGV4YW1wbGUgU2V0dGluZ3Mubm93ID0gKCkgPT4gMCAvLyBhbHdheXMgcHJldGVuZCBpdCdzIEphbiAxLCAxOTcwIGF0IG1pZG5pZ2h0IGluIFVUQyB0aW1lXG4gICAqL1xuICBzdGF0aWMgc2V0IG5vdyhuKSB7XG4gICAgbm93ID0gbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgdGltZSB6b25lIHRvIGNyZWF0ZSBEYXRlVGltZXMgaW4uIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIFVzZSB0aGUgdmFsdWUgXCJzeXN0ZW1cIiB0byByZXNldCB0aGlzIHZhbHVlIHRvIHRoZSBzeXN0ZW0ncyB0aW1lIHpvbmUuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRab25lKHpvbmUpIHtcbiAgICBkZWZhdWx0Wm9uZSA9IHpvbmU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IHRpbWUgem9uZSBvYmplY3QgY3VycmVudGx5IHVzZWQgdG8gY3JlYXRlIERhdGVUaW1lcy4gRG9lcyBub3QgYWZmZWN0IGV4aXN0aW5nIGluc3RhbmNlcy5cbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgdGhlIHN5c3RlbSdzIHRpbWUgem9uZSAodGhlIG9uZSBzZXQgb24gdGhlIG1hY2hpbmUgdGhhdCBydW5zIHRoaXMgY29kZSkuXG4gICAqIEB0eXBlIHtab25lfVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0Wm9uZSgpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplWm9uZShkZWZhdWx0Wm9uZSwgU3lzdGVtWm9uZS5pbnN0YW5jZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IGxvY2FsZSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRMb2NhbGUoKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRMb2NhbGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IGxvY2FsZSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgc2V0IGRlZmF1bHRMb2NhbGUobG9jYWxlKSB7XG4gICAgZGVmYXVsdExvY2FsZSA9IGxvY2FsZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRlZmF1bHQgbnVtYmVyaW5nIHN5c3RlbSB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW07XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IG51bWJlcmluZyBzeXN0ZW0gdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0TnVtYmVyaW5nU3lzdGVtKG51bWJlcmluZ1N5c3RlbSkge1xuICAgIGRlZmF1bHROdW1iZXJpbmdTeXN0ZW0gPSBudW1iZXJpbmdTeXN0ZW07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkZWZhdWx0IG91dHB1dCBjYWxlbmRhciB0byBjcmVhdGUgRGF0ZVRpbWVzIHdpdGguIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPdXRwdXRDYWxlbmRhcigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE91dHB1dENhbGVuZGFyO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCBvdXRwdXQgY2FsZW5kYXIgdG8gY3JlYXRlIERhdGVUaW1lcyB3aXRoLiBEb2VzIG5vdCBhZmZlY3QgZXhpc3RpbmcgaW5zdGFuY2VzLlxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIob3V0cHV0Q2FsZW5kYXIpIHtcbiAgICBkZWZhdWx0T3V0cHV0Q2FsZW5kYXIgPSBvdXRwdXRDYWxlbmRhcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBXZWVrU2V0dGluZ3NcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGZpcnN0RGF5XG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5pbWFsRGF5c1xuICAgKiBAcHJvcGVydHkge251bWJlcltdfSB3ZWVrZW5kXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtXZWVrU2V0dGluZ3N8bnVsbH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdFdlZWtTZXR0aW5ncygpIHtcbiAgICByZXR1cm4gZGVmYXVsdFdlZWtTZXR0aW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3Mgb3ZlcnJpZGluZyB0aGUgZGVmYXVsdCBsb2NhbGUgd2VlayBzZXR0aW5ncywgaS5lLiB0aGUgc3RhcnQgb2YgdGhlIHdlZWssIHRoZSB3ZWVrZW5kIGFuZFxuICAgKiBob3cgbWFueSBkYXlzIGFyZSByZXF1aXJlZCBpbiB0aGUgZmlyc3Qgd2VlayBvZiBhIHllYXIuXG4gICAqIERvZXMgbm90IGFmZmVjdCBleGlzdGluZyBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7V2Vla1NldHRpbmdzfG51bGx9IHdlZWtTZXR0aW5nc1xuICAgKi9cbiAgc3RhdGljIHNldCBkZWZhdWx0V2Vla1NldHRpbmdzKHdlZWtTZXR0aW5ncykge1xuICAgIGRlZmF1bHRXZWVrU2V0dGluZ3MgPSB2YWxpZGF0ZVdlZWtTZXR0aW5ncyh3ZWVrU2V0dGluZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3V0b2ZmIHllYXIgYWZ0ZXIgd2hpY2ggYSBzdHJpbmcgZW5jb2RpbmcgYSB5ZWFyIGFzIHR3byBkaWdpdHMgaXMgaW50ZXJwcmV0ZWQgdG8gb2NjdXIgaW4gdGhlIGN1cnJlbnQgY2VudHVyeS5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIHN0YXRpYyBnZXQgdHdvRGlnaXRDdXRvZmZZZWFyKCkge1xuICAgIHJldHVybiB0d29EaWdpdEN1dG9mZlllYXI7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjdXRvZmYgeWVhciBhZnRlciB3aGljaCBhIHN0cmluZyBlbmNvZGluZyBhIHllYXIgYXMgdHdvIGRpZ2l0cyBpcyBpbnRlcnByZXRlZCB0byBvY2N1ciBpbiB0aGUgY3VycmVudCBjZW50dXJ5LlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKiBAZXhhbXBsZSBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPSAwIC8vIGN1dC1vZmYgeWVhciBpcyAwLCBzbyBhbGwgJ3l5JyBhcmUgaW50ZXJwcmV0ZWQgYXMgY3VycmVudCBjZW50dXJ5XG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDUwIC8vICc0OScgLT4gMTk0OTsgJzUwJyAtPiAyMDUwXG4gICAqIEBleGFtcGxlIFNldHRpbmdzLnR3b0RpZ2l0Q3V0b2ZmWWVhciA9IDE5NTAgLy8gaW50ZXJwcmV0ZWQgYXMgNTBcbiAgICogQGV4YW1wbGUgU2V0dGluZ3MudHdvRGlnaXRDdXRvZmZZZWFyID0gMjA1MCAvLyBBTFNPIGludGVycHJldGVkIGFzIDUwXG4gICAqL1xuICBzdGF0aWMgc2V0IHR3b0RpZ2l0Q3V0b2ZmWWVhcihjdXRvZmZZZWFyKSB7XG4gICAgdHdvRGlnaXRDdXRvZmZZZWFyID0gY3V0b2ZmWWVhciAlIDEwMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgZ2V0IHRocm93T25JbnZhbGlkKCkge1xuICAgIHJldHVybiB0aHJvd09uSW52YWxpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciBMdXhvbiB3aWxsIHRocm93IHdoZW4gaXQgZW5jb3VudGVycyBpbnZhbGlkIERhdGVUaW1lcywgRHVyYXRpb25zLCBvciBJbnRlcnZhbHNcbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgc2V0IHRocm93T25JbnZhbGlkKHQpIHtcbiAgICB0aHJvd09uSW52YWxpZCA9IHQ7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgTHV4b24ncyBnbG9iYWwgY2FjaGVzLiBTaG91bGQgb25seSBiZSBuZWNlc3NhcnkgaW4gdGVzdGluZyBzY2VuYXJpb3MuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgcmVzZXRDYWNoZXMoKSB7XG4gICAgTG9jYWxlLnJlc2V0Q2FjaGUoKTtcbiAgICBJQU5BWm9uZS5yZXNldENhY2hlKCk7XG4gIH1cbn1cbiIsICJleHBvcnQgZGVmYXVsdCBjbGFzcyBJbnZhbGlkIHtcbiAgY29uc3RydWN0b3IocmVhc29uLCBleHBsYW5hdGlvbikge1xuICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuICAgIHRoaXMuZXhwbGFuYXRpb24gPSBleHBsYW5hdGlvbjtcbiAgfVxuXG4gIHRvTWVzc2FnZSgpIHtcbiAgICBpZiAodGhpcy5leHBsYW5hdGlvbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMucmVhc29ufTogJHt0aGlzLmV4cGxhbmF0aW9ufWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnJlYXNvbjtcbiAgICB9XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBpbnRlZ2VyQmV0d2VlbixcbiAgaXNMZWFwWWVhcixcbiAgdGltZU9iamVjdCxcbiAgZGF5c0luWWVhcixcbiAgZGF5c0luTW9udGgsXG4gIHdlZWtzSW5XZWVrWWVhcixcbiAgaXNJbnRlZ2VyLFxuICBpc1VuZGVmaW5lZCxcbn0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW52YWxpZC5qc1wiO1xuaW1wb3J0IHsgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5cbmNvbnN0IG5vbkxlYXBMYWRkZXIgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdLFxuICBsZWFwTGFkZGVyID0gWzAsIDMxLCA2MCwgOTEsIDEyMSwgMTUyLCAxODIsIDIxMywgMjQ0LCAyNzQsIDMwNSwgMzM1XTtcblxuZnVuY3Rpb24gdW5pdE91dE9mUmFuZ2UodW5pdCwgdmFsdWUpIHtcbiAgcmV0dXJuIG5ldyBJbnZhbGlkKFxuICAgIFwidW5pdCBvdXQgb2YgcmFuZ2VcIixcbiAgICBgeW91IHNwZWNpZmllZCAke3ZhbHVlfSAob2YgdHlwZSAke3R5cGVvZiB2YWx1ZX0pIGFzIGEgJHt1bml0fSwgd2hpY2ggaXMgaW52YWxpZGBcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRheU9mV2Vlayh5ZWFyLCBtb250aCwgZGF5KSB7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCAtIDEsIGRheSkpO1xuXG4gIGlmICh5ZWFyIDwgMTAwICYmIHllYXIgPj0gMCkge1xuICAgIGQuc2V0VVRDRnVsbFllYXIoZC5nZXRVVENGdWxsWWVhcigpIC0gMTkwMCk7XG4gIH1cblxuICBjb25zdCBqcyA9IGQuZ2V0VVRDRGF5KCk7XG5cbiAgcmV0dXJuIGpzID09PSAwID8gNyA6IGpzO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KSB7XG4gIHJldHVybiBkYXkgKyAoaXNMZWFwWWVhcih5ZWFyKSA/IGxlYXBMYWRkZXIgOiBub25MZWFwTGFkZGVyKVttb250aCAtIDFdO1xufVxuXG5mdW5jdGlvbiB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpIHtcbiAgY29uc3QgdGFibGUgPSBpc0xlYXBZZWFyKHllYXIpID8gbGVhcExhZGRlciA6IG5vbkxlYXBMYWRkZXIsXG4gICAgbW9udGgwID0gdGFibGUuZmluZEluZGV4KChpKSA9PiBpIDwgb3JkaW5hbCksXG4gICAgZGF5ID0gb3JkaW5hbCAtIHRhYmxlW21vbnRoMF07XG4gIHJldHVybiB7IG1vbnRoOiBtb250aDAgKyAxLCBkYXkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzb1dlZWtkYXlUb0xvY2FsKGlzb1dlZWtkYXksIHN0YXJ0T2ZXZWVrKSB7XG4gIHJldHVybiAoKGlzb1dlZWtkYXkgLSBzdGFydE9mV2VlayArIDcpICUgNykgKyAxO1xufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdyZWdvcmlhblRvV2VlayhncmVnT2JqLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3QgeyB5ZWFyLCBtb250aCwgZGF5IH0gPSBncmVnT2JqLFxuICAgIG9yZGluYWwgPSBjb21wdXRlT3JkaW5hbCh5ZWFyLCBtb250aCwgZGF5KSxcbiAgICB3ZWVrZGF5ID0gaXNvV2Vla2RheVRvTG9jYWwoZGF5T2ZXZWVrKHllYXIsIG1vbnRoLCBkYXkpLCBzdGFydE9mV2Vlayk7XG5cbiAgbGV0IHdlZWtOdW1iZXIgPSBNYXRoLmZsb29yKChvcmRpbmFsIC0gd2Vla2RheSArIDE0IC0gbWluRGF5c0luRmlyc3RXZWVrKSAvIDcpLFxuICAgIHdlZWtZZWFyO1xuXG4gIGlmICh3ZWVrTnVtYmVyIDwgMSkge1xuICAgIHdlZWtZZWFyID0geWVhciAtIDE7XG4gICAgd2Vla051bWJlciA9IHdlZWtzSW5XZWVrWWVhcih3ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIH0gZWxzZSBpZiAod2Vla051bWJlciA+IHdlZWtzSW5XZWVrWWVhcih5ZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKSkge1xuICAgIHdlZWtZZWFyID0geWVhciArIDE7XG4gICAgd2Vla051bWJlciA9IDE7XG4gIH0gZWxzZSB7XG4gICAgd2Vla1llYXIgPSB5ZWFyO1xuICB9XG5cbiAgcmV0dXJuIHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXksIC4uLnRpbWVPYmplY3QoZ3JlZ09iaikgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdlZWtUb0dyZWdvcmlhbih3ZWVrRGF0YSwgbWluRGF5c0luRmlyc3RXZWVrID0gNCwgc3RhcnRPZldlZWsgPSAxKSB7XG4gIGNvbnN0IHsgd2Vla1llYXIsIHdlZWtOdW1iZXIsIHdlZWtkYXkgfSA9IHdlZWtEYXRhLFxuICAgIHdlZWtkYXlPZkphbjQgPSBpc29XZWVrZGF5VG9Mb2NhbChkYXlPZldlZWsod2Vla1llYXIsIDEsIG1pbkRheXNJbkZpcnN0V2VlayksIHN0YXJ0T2ZXZWVrKSxcbiAgICB5ZWFySW5EYXlzID0gZGF5c0luWWVhcih3ZWVrWWVhcik7XG5cbiAgbGV0IG9yZGluYWwgPSB3ZWVrTnVtYmVyICogNyArIHdlZWtkYXkgLSB3ZWVrZGF5T2ZKYW40IC0gNyArIG1pbkRheXNJbkZpcnN0V2VlayxcbiAgICB5ZWFyO1xuXG4gIGlmIChvcmRpbmFsIDwgMSkge1xuICAgIHllYXIgPSB3ZWVrWWVhciAtIDE7XG4gICAgb3JkaW5hbCArPSBkYXlzSW5ZZWFyKHllYXIpO1xuICB9IGVsc2UgaWYgKG9yZGluYWwgPiB5ZWFySW5EYXlzKSB7XG4gICAgeWVhciA9IHdlZWtZZWFyICsgMTtcbiAgICBvcmRpbmFsIC09IGRheXNJblllYXIod2Vla1llYXIpO1xuICB9IGVsc2Uge1xuICAgIHllYXIgPSB3ZWVrWWVhcjtcbiAgfVxuXG4gIGNvbnN0IHsgbW9udGgsIGRheSB9ID0gdW5jb21wdXRlT3JkaW5hbCh5ZWFyLCBvcmRpbmFsKTtcbiAgcmV0dXJuIHsgeWVhciwgbW9udGgsIGRheSwgLi4udGltZU9iamVjdCh3ZWVrRGF0YSkgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdyZWdvcmlhblRvT3JkaW5hbChncmVnRGF0YSkge1xuICBjb25zdCB7IHllYXIsIG1vbnRoLCBkYXkgfSA9IGdyZWdEYXRhO1xuICBjb25zdCBvcmRpbmFsID0gY29tcHV0ZU9yZGluYWwoeWVhciwgbW9udGgsIGRheSk7XG4gIHJldHVybiB7IHllYXIsIG9yZGluYWwsIC4uLnRpbWVPYmplY3QoZ3JlZ0RhdGEpIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcmRpbmFsVG9HcmVnb3JpYW4ob3JkaW5hbERhdGEpIHtcbiAgY29uc3QgeyB5ZWFyLCBvcmRpbmFsIH0gPSBvcmRpbmFsRGF0YTtcbiAgY29uc3QgeyBtb250aCwgZGF5IH0gPSB1bmNvbXB1dGVPcmRpbmFsKHllYXIsIG9yZGluYWwpO1xuICByZXR1cm4geyB5ZWFyLCBtb250aCwgZGF5LCAuLi50aW1lT2JqZWN0KG9yZGluYWxEYXRhKSB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGxvY2FsIHdlZWsgdW5pdHMgbGlrZSBsb2NhbFdlZWtkYXkgYXJlIHVzZWQgaW4gb2JqLlxuICogSWYgc28sIHZhbGlkYXRlcyB0aGF0IHRoZXkgYXJlIG5vdCBtaXhlZCB3aXRoIElTTyB3ZWVrIHVuaXRzIGFuZCB0aGVuIGNvcGllcyB0aGVtIHRvIHRoZSBub3JtYWwgd2VlayB1bml0IHByb3BlcnRpZXMuXG4gKiBNb2RpZmllcyBvYmogaW4tcGxhY2UhXG4gKiBAcGFyYW0gb2JqIHRoZSBvYmplY3QgdmFsdWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VzTG9jYWxXZWVrVmFsdWVzKG9iaiwgbG9jKSB7XG4gIGNvbnN0IGhhc0xvY2FsZVdlZWtEYXRhID1cbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla2RheSkgfHxcbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla051bWJlcikgfHxcbiAgICAhaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla1llYXIpO1xuICBpZiAoaGFzTG9jYWxlV2Vla0RhdGEpIHtcbiAgICBjb25zdCBoYXNJc29XZWVrRGF0YSA9XG4gICAgICAhaXNVbmRlZmluZWQob2JqLndlZWtkYXkpIHx8ICFpc1VuZGVmaW5lZChvYmoud2Vla051bWJlcikgfHwgIWlzVW5kZWZpbmVkKG9iai53ZWVrWWVhcik7XG5cbiAgICBpZiAoaGFzSXNvV2Vla0RhdGEpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcbiAgICAgICAgXCJDYW5ub3QgbWl4IGxvY2FsZS1iYXNlZCB3ZWVrIGZpZWxkcyB3aXRoIElTTy1iYXNlZCB3ZWVrIGZpZWxkc1wiXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIWlzVW5kZWZpbmVkKG9iai5sb2NhbFdlZWtkYXkpKSBvYmoud2Vla2RheSA9IG9iai5sb2NhbFdlZWtkYXk7XG4gICAgaWYgKCFpc1VuZGVmaW5lZChvYmoubG9jYWxXZWVrTnVtYmVyKSkgb2JqLndlZWtOdW1iZXIgPSBvYmoubG9jYWxXZWVrTnVtYmVyO1xuICAgIGlmICghaXNVbmRlZmluZWQob2JqLmxvY2FsV2Vla1llYXIpKSBvYmoud2Vla1llYXIgPSBvYmoubG9jYWxXZWVrWWVhcjtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla2RheTtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla051bWJlcjtcbiAgICBkZWxldGUgb2JqLmxvY2FsV2Vla1llYXI7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1pbkRheXNJbkZpcnN0V2VlazogbG9jLmdldE1pbkRheXNJbkZpcnN0V2VlaygpLFxuICAgICAgc3RhcnRPZldlZWs6IGxvYy5nZXRTdGFydE9mV2VlaygpLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgbWluRGF5c0luRmlyc3RXZWVrOiA0LCBzdGFydE9mV2VlazogMSB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkV2Vla0RhdGEob2JqLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3QgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai53ZWVrWWVhciksXG4gICAgdmFsaWRXZWVrID0gaW50ZWdlckJldHdlZW4oXG4gICAgICBvYmoud2Vla051bWJlcixcbiAgICAgIDEsXG4gICAgICB3ZWVrc0luV2Vla1llYXIob2JqLndlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICksXG4gICAgdmFsaWRXZWVrZGF5ID0gaW50ZWdlckJldHdlZW4ob2JqLndlZWtkYXksIDEsIDcpO1xuXG4gIGlmICghdmFsaWRZZWFyKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1llYXJcIiwgb2JqLndlZWtZZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRXZWVrKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwid2Vla1wiLCBvYmoud2Vla051bWJlcik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkV2Vla2RheSkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIndlZWtkYXlcIiwgb2JqLndlZWtkYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZE9yZGluYWxEYXRhKG9iaikge1xuICBjb25zdCB2YWxpZFllYXIgPSBpc0ludGVnZXIob2JqLnllYXIpLFxuICAgIHZhbGlkT3JkaW5hbCA9IGludGVnZXJCZXR3ZWVuKG9iai5vcmRpbmFsLCAxLCBkYXlzSW5ZZWFyKG9iai55ZWFyKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRPcmRpbmFsKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwib3JkaW5hbFwiLCBvYmoub3JkaW5hbCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHtcbiAgY29uc3QgdmFsaWRZZWFyID0gaXNJbnRlZ2VyKG9iai55ZWFyKSxcbiAgICB2YWxpZE1vbnRoID0gaW50ZWdlckJldHdlZW4ob2JqLm1vbnRoLCAxLCAxMiksXG4gICAgdmFsaWREYXkgPSBpbnRlZ2VyQmV0d2VlbihvYmouZGF5LCAxLCBkYXlzSW5Nb250aChvYmoueWVhciwgb2JqLm1vbnRoKSk7XG5cbiAgaWYgKCF2YWxpZFllYXIpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJ5ZWFyXCIsIG9iai55ZWFyKTtcbiAgfSBlbHNlIGlmICghdmFsaWRNb250aCkge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcIm1vbnRoXCIsIG9iai5tb250aCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkRGF5KSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwiZGF5XCIsIG9iai5kYXkpO1xuICB9IGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzSW52YWxpZFRpbWVEYXRhKG9iaikge1xuICBjb25zdCB7IGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9ID0gb2JqO1xuICBjb25zdCB2YWxpZEhvdXIgPVxuICAgICAgaW50ZWdlckJldHdlZW4oaG91ciwgMCwgMjMpIHx8XG4gICAgICAoaG91ciA9PT0gMjQgJiYgbWludXRlID09PSAwICYmIHNlY29uZCA9PT0gMCAmJiBtaWxsaXNlY29uZCA9PT0gMCksXG4gICAgdmFsaWRNaW51dGUgPSBpbnRlZ2VyQmV0d2VlbihtaW51dGUsIDAsIDU5KSxcbiAgICB2YWxpZFNlY29uZCA9IGludGVnZXJCZXR3ZWVuKHNlY29uZCwgMCwgNTkpLFxuICAgIHZhbGlkTWlsbGlzZWNvbmQgPSBpbnRlZ2VyQmV0d2VlbihtaWxsaXNlY29uZCwgMCwgOTk5KTtcblxuICBpZiAoIXZhbGlkSG91cikge1xuICAgIHJldHVybiB1bml0T3V0T2ZSYW5nZShcImhvdXJcIiwgaG91cik7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWludXRlKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwibWludXRlXCIsIG1pbnV0ZSk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkU2Vjb25kKSB7XG4gICAgcmV0dXJuIHVuaXRPdXRPZlJhbmdlKFwic2Vjb25kXCIsIHNlY29uZCk7XG4gIH0gZWxzZSBpZiAoIXZhbGlkTWlsbGlzZWNvbmQpIHtcbiAgICByZXR1cm4gdW5pdE91dE9mUmFuZ2UoXCJtaWxsaXNlY29uZFwiLCBtaWxsaXNlY29uZCk7XG4gIH0gZWxzZSByZXR1cm4gZmFsc2U7XG59XG4iLCAiLypcbiAgVGhpcyBpcyBqdXN0IGEganVuayBkcmF3ZXIsIGNvbnRhaW5pbmcgYW55dGhpbmcgdXNlZCBhY3Jvc3MgbXVsdGlwbGUgY2xhc3Nlcy5cbiAgQmVjYXVzZSBMdXhvbiBpcyBzbWFsbChpc2gpLCB0aGlzIHNob3VsZCBzdGF5IHNtYWxsIGFuZCB3ZSB3b24ndCB3b3JyeSBhYm91dCBzcGxpdHRpbmdcbiAgaXQgdXAgaW50bywgc2F5LCBwYXJzaW5nVXRpbC5qcyBhbmQgYmFzaWNVdGlsLmpzIGFuZCBzbyBvbi4gQnV0IHRoZXkgYXJlIGRpdmlkZWQgdXAgYnkgZmVhdHVyZSBhcmVhLlxuKi9cblxuaW1wb3J0IHsgSW52YWxpZEFyZ3VtZW50RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3JzLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4uL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgeyBkYXlPZldlZWssIGlzb1dlZWtkYXlUb0xvY2FsIH0gZnJvbSBcIi4vY29udmVyc2lvbnMuanNcIjtcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbi8vIFRZUEVTXG5cbmV4cG9ydCBmdW5jdGlvbiBpc1VuZGVmaW5lZChvKSB7XG4gIHJldHVybiB0eXBlb2YgbyA9PT0gXCJ1bmRlZmluZWRcIjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzTnVtYmVyKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcIm51bWJlclwiO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlZ2VyKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSBcIm51bWJlclwiICYmIG8gJSAxID09PSAwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09IFwic3RyaW5nXCI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGUobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSBcIltvYmplY3QgRGF0ZV1cIjtcbn1cblxuLy8gQ0FQQUJJTElUSUVTXG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNSZWxhdGl2ZSgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gdHlwZW9mIEludGwgIT09IFwidW5kZWZpbmVkXCIgJiYgISFJbnRsLlJlbGF0aXZlVGltZUZvcm1hdDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzTG9jYWxlV2Vla0luZm8oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGVvZiBJbnRsICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAhIUludGwuTG9jYWxlICYmXG4gICAgICAoXCJ3ZWVrSW5mb1wiIGluIEludGwuTG9jYWxlLnByb3RvdHlwZSB8fCBcImdldFdlZWtJbmZvXCIgaW4gSW50bC5Mb2NhbGUucHJvdG90eXBlKVxuICAgICk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8gT0JKRUNUUyBBTkQgQVJSQVlTXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXliZUFycmF5KHRoaW5nKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHRoaW5nKSA/IHRoaW5nIDogW3RoaW5nXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJlc3RCeShhcnIsIGJ5LCBjb21wYXJlKSB7XG4gIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gYXJyLnJlZHVjZSgoYmVzdCwgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHBhaXIgPSBbYnkobmV4dCksIG5leHRdO1xuICAgIGlmICghYmVzdCkge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfSBlbHNlIGlmIChjb21wYXJlKGJlc3RbMF0sIHBhaXJbMF0pID09PSBiZXN0WzBdKSB7XG4gICAgICByZXR1cm4gYmVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHBhaXI7XG4gICAgfVxuICB9LCBudWxsKVsxXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBpY2sob2JqLCBrZXlzKSB7XG4gIHJldHVybiBrZXlzLnJlZHVjZSgoYSwgaykgPT4ge1xuICAgIGFba10gPSBvYmpba107XG4gICAgcmV0dXJuIGE7XG4gIH0sIHt9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVdlZWtTZXR0aW5ncyhzZXR0aW5ncykge1xuICBpZiAoc2V0dGluZ3MgPT0gbnVsbCkge1xuICAgIHJldHVybiBudWxsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZXR0aW5ncyAhPT0gXCJvYmplY3RcIikge1xuICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIldlZWsgc2V0dGluZ3MgbXVzdCBiZSBhbiBvYmplY3RcIik7XG4gIH0gZWxzZSB7XG4gICAgaWYgKFxuICAgICAgIWludGVnZXJCZXR3ZWVuKHNldHRpbmdzLmZpcnN0RGF5LCAxLCA3KSB8fFxuICAgICAgIWludGVnZXJCZXR3ZWVuKHNldHRpbmdzLm1pbmltYWxEYXlzLCAxLCA3KSB8fFxuICAgICAgIUFycmF5LmlzQXJyYXkoc2V0dGluZ3Mud2Vla2VuZCkgfHxcbiAgICAgIHNldHRpbmdzLndlZWtlbmQuc29tZSgodikgPT4gIWludGVnZXJCZXR3ZWVuKHYsIDEsIDcpKVxuICAgICkge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwiSW52YWxpZCB3ZWVrIHNldHRpbmdzXCIpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3REYXk6IHNldHRpbmdzLmZpcnN0RGF5LFxuICAgICAgbWluaW1hbERheXM6IHNldHRpbmdzLm1pbmltYWxEYXlzLFxuICAgICAgd2Vla2VuZDogQXJyYXkuZnJvbShzZXR0aW5ncy53ZWVrZW5kKSxcbiAgICB9O1xuICB9XG59XG5cbi8vIE5VTUJFUlMgQU5EIFNUUklOR1NcblxuZXhwb3J0IGZ1bmN0aW9uIGludGVnZXJCZXR3ZWVuKHRoaW5nLCBib3R0b20sIHRvcCkge1xuICByZXR1cm4gaXNJbnRlZ2VyKHRoaW5nKSAmJiB0aGluZyA+PSBib3R0b20gJiYgdGhpbmcgPD0gdG9wO1xufVxuXG4vLyB4ICUgbiBidXQgdGFrZXMgdGhlIHNpZ24gb2YgbiBpbnN0ZWFkIG9mIHhcbmV4cG9ydCBmdW5jdGlvbiBmbG9vck1vZCh4LCBuKSB7XG4gIHJldHVybiB4IC0gbiAqIE1hdGguZmxvb3IoeCAvIG4pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFkU3RhcnQoaW5wdXQsIG4gPSAyKSB7XG4gIGNvbnN0IGlzTmVnID0gaW5wdXQgPCAwO1xuICBsZXQgcGFkZGVkO1xuICBpZiAoaXNOZWcpIHtcbiAgICBwYWRkZWQgPSBcIi1cIiArIChcIlwiICsgLWlucHV0KS5wYWRTdGFydChuLCBcIjBcIik7XG4gIH0gZWxzZSB7XG4gICAgcGFkZGVkID0gKFwiXCIgKyBpbnB1dCkucGFkU3RhcnQobiwgXCIwXCIpO1xuICB9XG4gIHJldHVybiBwYWRkZWQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUludGVnZXIoc3RyaW5nKSB7XG4gIGlmIChpc1VuZGVmaW5lZChzdHJpbmcpIHx8IHN0cmluZyA9PT0gbnVsbCB8fCBzdHJpbmcgPT09IFwiXCIpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBwYXJzZUludChzdHJpbmcsIDEwKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VGbG9hdGluZyhzdHJpbmcpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHN0cmluZykgfHwgc3RyaW5nID09PSBudWxsIHx8IHN0cmluZyA9PT0gXCJcIikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoc3RyaW5nKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VNaWxsaXMoZnJhY3Rpb24pIHtcbiAgLy8gUmV0dXJuIHVuZGVmaW5lZCAoaW5zdGVhZCBvZiAwKSBpbiB0aGVzZSBjYXNlcywgd2hlcmUgZnJhY3Rpb24gaXMgbm90IHNldFxuICBpZiAoaXNVbmRlZmluZWQoZnJhY3Rpb24pIHx8IGZyYWN0aW9uID09PSBudWxsIHx8IGZyYWN0aW9uID09PSBcIlwiKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBmID0gcGFyc2VGbG9hdChcIjAuXCIgKyBmcmFjdGlvbikgKiAxMDAwO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGYpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByb3VuZFRvKG51bWJlciwgZGlnaXRzLCB0b3dhcmRaZXJvID0gZmFsc2UpIHtcbiAgY29uc3QgZmFjdG9yID0gMTAgKiogZGlnaXRzLFxuICAgIHJvdW5kZXIgPSB0b3dhcmRaZXJvID8gTWF0aC50cnVuYyA6IE1hdGgucm91bmQ7XG4gIHJldHVybiByb3VuZGVyKG51bWJlciAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG5cbi8vIERBVEUgQkFTSUNTXG5cbmV4cG9ydCBmdW5jdGlvbiBpc0xlYXBZZWFyKHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0ID09PSAwICYmICh5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF5c0luWWVhcih5ZWFyKSB7XG4gIHJldHVybiBpc0xlYXBZZWFyKHllYXIpID8gMzY2IDogMzY1O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgY29uc3QgbW9kTW9udGggPSBmbG9vck1vZChtb250aCAtIDEsIDEyKSArIDEsXG4gICAgbW9kWWVhciA9IHllYXIgKyAobW9udGggLSBtb2RNb250aCkgLyAxMjtcblxuICBpZiAobW9kTW9udGggPT09IDIpIHtcbiAgICByZXR1cm4gaXNMZWFwWWVhcihtb2RZZWFyKSA/IDI5IDogMjg7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFszMSwgbnVsbCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vZE1vbnRoIC0gMV07XG4gIH1cbn1cblxuLy8gY29udmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGxvY2FsIHRpbWVzdGFtcCAoZXBvY2gsIGJ1dCB3aXRoIHRoZSBvZmZzZXQgYmFrZWQgaW4pXG5leHBvcnQgZnVuY3Rpb24gb2JqVG9Mb2NhbFRTKG9iaikge1xuICBsZXQgZCA9IERhdGUuVVRDKFxuICAgIG9iai55ZWFyLFxuICAgIG9iai5tb250aCAtIDEsXG4gICAgb2JqLmRheSxcbiAgICBvYmouaG91cixcbiAgICBvYmoubWludXRlLFxuICAgIG9iai5zZWNvbmQsXG4gICAgb2JqLm1pbGxpc2Vjb25kXG4gICk7XG5cbiAgLy8gZm9yIGxlZ2FjeSByZWFzb25zLCB5ZWFycyBiZXR3ZWVuIDAgYW5kIDk5IGFyZSBpbnRlcnByZXRlZCBhcyAxOVhYOyByZXZlcnQgdGhhdFxuICBpZiAob2JqLnllYXIgPCAxMDAgJiYgb2JqLnllYXIgPj0gMCkge1xuICAgIGQgPSBuZXcgRGF0ZShkKTtcbiAgICAvLyBzZXQgdGhlIG1vbnRoIGFuZCBkYXkgYWdhaW4sIHRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgeWVhciAyMDAwIGlzIGEgbGVhcCB5ZWFyLCBidXQgeWVhciAxMDAgaXMgbm90XG4gICAgLy8gc28gaWYgb2JqLnllYXIgaXMgaW4gOTksIGJ1dCBvYmouZGF5IG1ha2VzIGl0IHJvbGwgb3ZlciBpbnRvIHllYXIgMTAwLFxuICAgIC8vIHRoZSBjYWxjdWxhdGlvbnMgZG9uZSBieSBEYXRlLlVUQyBhcmUgdXNpbmcgeWVhciAyMDAwIC0gd2hpY2ggaXMgaW5jb3JyZWN0XG4gICAgZC5zZXRVVENGdWxsWWVhcihvYmoueWVhciwgb2JqLm1vbnRoIC0gMSwgb2JqLmRheSk7XG4gIH1cbiAgcmV0dXJuICtkO1xufVxuXG4vLyBhZGFwdGVkIGZyb20gbW9tZW50LmpzOiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9ibG9iLzAwMGFjMTgwMGU2MjBmNzcwZjRlYjMxYjVhZTkwOGY2MTY3YjBhYjIvc3JjL2xpYi91bml0cy93ZWVrLWNhbGVuZGFyLXV0aWxzLmpzXG5mdW5jdGlvbiBmaXJzdFdlZWtPZmZzZXQoeWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlaykge1xuICBjb25zdCBmd2RsdyA9IGlzb1dlZWtkYXlUb0xvY2FsKGRheU9mV2Vlayh5ZWFyLCAxLCBtaW5EYXlzSW5GaXJzdFdlZWspLCBzdGFydE9mV2Vlayk7XG4gIHJldHVybiAtZndkbHcgKyBtaW5EYXlzSW5GaXJzdFdlZWsgLSAxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2Vla3NJbldlZWtZZWFyKHdlZWtZZWFyLCBtaW5EYXlzSW5GaXJzdFdlZWsgPSA0LCBzdGFydE9mV2VlayA9IDEpIHtcbiAgY29uc3Qgd2Vla09mZnNldCA9IGZpcnN0V2Vla09mZnNldCh3ZWVrWWVhciwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIGNvbnN0IHdlZWtPZmZzZXROZXh0ID0gZmlyc3RXZWVrT2Zmc2V0KHdlZWtZZWFyICsgMSwgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gIHJldHVybiAoZGF5c0luWWVhcih3ZWVrWWVhcikgLSB3ZWVrT2Zmc2V0ICsgd2Vla09mZnNldE5leHQpIC8gNztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVudHJ1bmNhdGVZZWFyKHllYXIpIHtcbiAgaWYgKHllYXIgPiA5OSkge1xuICAgIHJldHVybiB5ZWFyO1xuICB9IGVsc2UgcmV0dXJuIHllYXIgPiBTZXR0aW5ncy50d29EaWdpdEN1dG9mZlllYXIgPyAxOTAwICsgeWVhciA6IDIwMDAgKyB5ZWFyO1xufVxuXG4vLyBQQVJTSU5HXG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVpvbmVJbmZvKHRzLCBvZmZzZXRGb3JtYXQsIGxvY2FsZSwgdGltZVpvbmUgPSBudWxsKSB7XG4gIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh0cyksXG4gICAgaW50bE9wdHMgPSB7XG4gICAgICBob3VyQ3ljbGU6IFwiaDIzXCIsXG4gICAgICB5ZWFyOiBcIm51bWVyaWNcIixcbiAgICAgIG1vbnRoOiBcIjItZGlnaXRcIixcbiAgICAgIGRheTogXCIyLWRpZ2l0XCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgfTtcblxuICBpZiAodGltZVpvbmUpIHtcbiAgICBpbnRsT3B0cy50aW1lWm9uZSA9IHRpbWVab25lO1xuICB9XG5cbiAgY29uc3QgbW9kaWZpZWQgPSB7IHRpbWVab25lTmFtZTogb2Zmc2V0Rm9ybWF0LCAuLi5pbnRsT3B0cyB9O1xuXG4gIGNvbnN0IHBhcnNlZCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGxvY2FsZSwgbW9kaWZpZWQpXG4gICAgLmZvcm1hdFRvUGFydHMoZGF0ZSlcbiAgICAuZmluZCgobSkgPT4gbS50eXBlLnRvTG93ZXJDYXNlKCkgPT09IFwidGltZXpvbmVuYW1lXCIpO1xuICByZXR1cm4gcGFyc2VkID8gcGFyc2VkLnZhbHVlIDogbnVsbDtcbn1cblxuLy8gc2lnbmVkT2Zmc2V0KCctNScsICczMCcpIC0+IC0zMzBcbmV4cG9ydCBmdW5jdGlvbiBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKSB7XG4gIGxldCBvZmZIb3VyID0gcGFyc2VJbnQob2ZmSG91clN0ciwgMTApO1xuXG4gIC8vIGRvbid0IHx8IHRoaXMgYmVjYXVzZSB3ZSB3YW50IHRvIHByZXNlcnZlIC0wXG4gIGlmIChOdW1iZXIuaXNOYU4ob2ZmSG91cikpIHtcbiAgICBvZmZIb3VyID0gMDtcbiAgfVxuXG4gIGNvbnN0IG9mZk1pbiA9IHBhcnNlSW50KG9mZk1pbnV0ZVN0ciwgMTApIHx8IDAsXG4gICAgb2ZmTWluU2lnbmVkID0gb2ZmSG91ciA8IDAgfHwgT2JqZWN0LmlzKG9mZkhvdXIsIC0wKSA/IC1vZmZNaW4gOiBvZmZNaW47XG4gIHJldHVybiBvZmZIb3VyICogNjAgKyBvZmZNaW5TaWduZWQ7XG59XG5cbi8vIENPRVJDSU9OXG5cbmV4cG9ydCBmdW5jdGlvbiBhc051bWJlcih2YWx1ZSkge1xuICBjb25zdCBudW1lcmljVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIiB8fCB2YWx1ZSA9PT0gXCJcIiB8fCBOdW1iZXIuaXNOYU4obnVtZXJpY1ZhbHVlKSlcbiAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoYEludmFsaWQgdW5pdCB2YWx1ZSAke3ZhbHVlfWApO1xuICByZXR1cm4gbnVtZXJpY1ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplT2JqZWN0KG9iaiwgbm9ybWFsaXplcikge1xuICBjb25zdCBub3JtYWxpemVkID0ge307XG4gIGZvciAoY29uc3QgdSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkob2JqLCB1KSkge1xuICAgICAgY29uc3QgdiA9IG9ialt1XTtcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQgfHwgdiA9PT0gbnVsbCkgY29udGludWU7XG4gICAgICBub3JtYWxpemVkW25vcm1hbGl6ZXIodSldID0gYXNOdW1iZXIodik7XG4gICAgfVxuICB9XG4gIHJldHVybiBub3JtYWxpemVkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0T2Zmc2V0KG9mZnNldCwgZm9ybWF0KSB7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC50cnVuYyhNYXRoLmFicyhvZmZzZXQgLyA2MCkpLFxuICAgIG1pbnV0ZXMgPSBNYXRoLnRydW5jKE1hdGguYWJzKG9mZnNldCAlIDYwKSksXG4gICAgc2lnbiA9IG9mZnNldCA+PSAwID8gXCIrXCIgOiBcIi1cIjtcblxuICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIGAke3NpZ259JHtwYWRTdGFydChob3VycywgMil9OiR7cGFkU3RhcnQobWludXRlcywgMil9YDtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gYCR7c2lnbn0ke2hvdXJzfSR7bWludXRlcyA+IDAgPyBgOiR7bWludXRlc31gIDogXCJcIn1gO1xuICAgIGNhc2UgXCJ0ZWNoaWVcIjpcbiAgICAgIHJldHVybiBgJHtzaWdufSR7cGFkU3RhcnQoaG91cnMsIDIpfSR7cGFkU3RhcnQobWludXRlcywgMil9YDtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFZhbHVlIGZvcm1hdCAke2Zvcm1hdH0gaXMgb3V0IG9mIHJhbmdlIGZvciBwcm9wZXJ0eSBmb3JtYXRgKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZU9iamVjdChvYmopIHtcbiAgcmV0dXJuIHBpY2sob2JqLCBbXCJob3VyXCIsIFwibWludXRlXCIsIFwic2Vjb25kXCIsIFwibWlsbGlzZWNvbmRcIl0pO1xufVxuIiwgImltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vZm9ybWF0cy5qc1wiO1xuaW1wb3J0IHsgcGljayB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuZnVuY3Rpb24gc3RyaW5naWZ5KG9iaikge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqLCBPYmplY3Qua2V5cyhvYmopLnNvcnQoKSk7XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgY29uc3QgbW9udGhzTG9uZyA9IFtcbiAgXCJKYW51YXJ5XCIsXG4gIFwiRmVicnVhcnlcIixcbiAgXCJNYXJjaFwiLFxuICBcIkFwcmlsXCIsXG4gIFwiTWF5XCIsXG4gIFwiSnVuZVwiLFxuICBcIkp1bHlcIixcbiAgXCJBdWd1c3RcIixcbiAgXCJTZXB0ZW1iZXJcIixcbiAgXCJPY3RvYmVyXCIsXG4gIFwiTm92ZW1iZXJcIixcbiAgXCJEZWNlbWJlclwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IG1vbnRoc1Nob3J0ID0gW1xuICBcIkphblwiLFxuICBcIkZlYlwiLFxuICBcIk1hclwiLFxuICBcIkFwclwiLFxuICBcIk1heVwiLFxuICBcIkp1blwiLFxuICBcIkp1bFwiLFxuICBcIkF1Z1wiLFxuICBcIlNlcFwiLFxuICBcIk9jdFwiLFxuICBcIk5vdlwiLFxuICBcIkRlY1wiLFxuXTtcblxuZXhwb3J0IGNvbnN0IG1vbnRoc05hcnJvdyA9IFtcIkpcIiwgXCJGXCIsIFwiTVwiLCBcIkFcIiwgXCJNXCIsIFwiSlwiLCBcIkpcIiwgXCJBXCIsIFwiU1wiLCBcIk9cIiwgXCJOXCIsIFwiRFwiXTtcblxuZXhwb3J0IGZ1bmN0aW9uIG1vbnRocyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLm1vbnRoc05hcnJvd107XG4gICAgY2FzZSBcInNob3J0XCI6XG4gICAgICByZXR1cm4gWy4uLm1vbnRoc1Nob3J0XTtcbiAgICBjYXNlIFwibG9uZ1wiOlxuICAgICAgcmV0dXJuIFsuLi5tb250aHNMb25nXTtcbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIiwgXCI4XCIsIFwiOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcbiAgICBjYXNlIFwiMi1kaWdpdFwiOlxuICAgICAgcmV0dXJuIFtcIjAxXCIsIFwiMDJcIiwgXCIwM1wiLCBcIjA0XCIsIFwiMDVcIiwgXCIwNlwiLCBcIjA3XCIsIFwiMDhcIiwgXCIwOVwiLCBcIjEwXCIsIFwiMTFcIiwgXCIxMlwiXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHdlZWtkYXlzTG9uZyA9IFtcbiAgXCJNb25kYXlcIixcbiAgXCJUdWVzZGF5XCIsXG4gIFwiV2VkbmVzZGF5XCIsXG4gIFwiVGh1cnNkYXlcIixcbiAgXCJGcmlkYXlcIixcbiAgXCJTYXR1cmRheVwiLFxuICBcIlN1bmRheVwiLFxuXTtcblxuZXhwb3J0IGNvbnN0IHdlZWtkYXlzU2hvcnQgPSBbXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIiwgXCJTdW5cIl07XG5cbmV4cG9ydCBjb25zdCB3ZWVrZGF5c05hcnJvdyA9IFtcIk1cIiwgXCJUXCIsIFwiV1wiLCBcIlRcIiwgXCJGXCIsIFwiU1wiLCBcIlNcIl07XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrZGF5cyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLndlZWtkYXlzTmFycm93XTtcbiAgICBjYXNlIFwic2hvcnRcIjpcbiAgICAgIHJldHVybiBbLi4ud2Vla2RheXNTaG9ydF07XG4gICAgY2FzZSBcImxvbmdcIjpcbiAgICAgIHJldHVybiBbLi4ud2Vla2RheXNMb25nXTtcbiAgICBjYXNlIFwibnVtZXJpY1wiOlxuICAgICAgcmV0dXJuIFtcIjFcIiwgXCIyXCIsIFwiM1wiLCBcIjRcIiwgXCI1XCIsIFwiNlwiLCBcIjdcIl07XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBtZXJpZGllbXMgPSBbXCJBTVwiLCBcIlBNXCJdO1xuXG5leHBvcnQgY29uc3QgZXJhc0xvbmcgPSBbXCJCZWZvcmUgQ2hyaXN0XCIsIFwiQW5ubyBEb21pbmlcIl07XG5cbmV4cG9ydCBjb25zdCBlcmFzU2hvcnQgPSBbXCJCQ1wiLCBcIkFEXCJdO1xuXG5leHBvcnQgY29uc3QgZXJhc05hcnJvdyA9IFtcIkJcIiwgXCJBXCJdO1xuXG5leHBvcnQgZnVuY3Rpb24gZXJhcyhsZW5ndGgpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIFwibmFycm93XCI6XG4gICAgICByZXR1cm4gWy4uLmVyYXNOYXJyb3ddO1xuICAgIGNhc2UgXCJzaG9ydFwiOlxuICAgICAgcmV0dXJuIFsuLi5lcmFzU2hvcnRdO1xuICAgIGNhc2UgXCJsb25nXCI6XG4gICAgICByZXR1cm4gWy4uLmVyYXNMb25nXTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpIHtcbiAgcmV0dXJuIG1lcmlkaWVtc1tkdC5ob3VyIDwgMTIgPyAwIDogMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aCkge1xuICByZXR1cm4gd2Vla2RheXMobGVuZ3RoKVtkdC53ZWVrZGF5IC0gMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb250aEZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIG1vbnRocyhsZW5ndGgpW2R0Lm1vbnRoIC0gMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcmFGb3JEYXRlVGltZShkdCwgbGVuZ3RoKSB7XG4gIHJldHVybiBlcmFzKGxlbmd0aClbZHQueWVhciA8IDAgPyAwIDogMV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRSZWxhdGl2ZVRpbWUodW5pdCwgY291bnQsIG51bWVyaWMgPSBcImFsd2F5c1wiLCBuYXJyb3cgPSBmYWxzZSkge1xuICBjb25zdCB1bml0cyA9IHtcbiAgICB5ZWFyczogW1wieWVhclwiLCBcInlyLlwiXSxcbiAgICBxdWFydGVyczogW1wicXVhcnRlclwiLCBcInF0ci5cIl0sXG4gICAgbW9udGhzOiBbXCJtb250aFwiLCBcIm1vLlwiXSxcbiAgICB3ZWVrczogW1wid2Vla1wiLCBcIndrLlwiXSxcbiAgICBkYXlzOiBbXCJkYXlcIiwgXCJkYXlcIiwgXCJkYXlzXCJdLFxuICAgIGhvdXJzOiBbXCJob3VyXCIsIFwiaHIuXCJdLFxuICAgIG1pbnV0ZXM6IFtcIm1pbnV0ZVwiLCBcIm1pbi5cIl0sXG4gICAgc2Vjb25kczogW1wic2Vjb25kXCIsIFwic2VjLlwiXSxcbiAgfTtcblxuICBjb25zdCBsYXN0YWJsZSA9IFtcImhvdXJzXCIsIFwibWludXRlc1wiLCBcInNlY29uZHNcIl0uaW5kZXhPZih1bml0KSA9PT0gLTE7XG5cbiAgaWYgKG51bWVyaWMgPT09IFwiYXV0b1wiICYmIGxhc3RhYmxlKSB7XG4gICAgY29uc3QgaXNEYXkgPSB1bml0ID09PSBcImRheXNcIjtcbiAgICBzd2l0Y2ggKGNvdW50KSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9tb3Jyb3dcIiA6IGBuZXh0ICR7dW5pdHNbdW5pdF1bMF19YDtcbiAgICAgIGNhc2UgLTE6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwieWVzdGVyZGF5XCIgOiBgbGFzdCAke3VuaXRzW3VuaXRdWzBdfWA7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBpc0RheSA/IFwidG9kYXlcIiA6IGB0aGlzICR7dW5pdHNbdW5pdF1bMF19YDtcbiAgICAgIGRlZmF1bHQ6IC8vIGZhbGwgdGhyb3VnaFxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGlzSW5QYXN0ID0gT2JqZWN0LmlzKGNvdW50LCAtMCkgfHwgY291bnQgPCAwLFxuICAgIGZtdFZhbHVlID0gTWF0aC5hYnMoY291bnQpLFxuICAgIHNpbmd1bGFyID0gZm10VmFsdWUgPT09IDEsXG4gICAgbGlsVW5pdHMgPSB1bml0c1t1bml0XSxcbiAgICBmbXRVbml0ID0gbmFycm93XG4gICAgICA/IHNpbmd1bGFyXG4gICAgICAgID8gbGlsVW5pdHNbMV1cbiAgICAgICAgOiBsaWxVbml0c1syXSB8fCBsaWxVbml0c1sxXVxuICAgICAgOiBzaW5ndWxhclxuICAgICAgPyB1bml0c1t1bml0XVswXVxuICAgICAgOiB1bml0O1xuICByZXR1cm4gaXNJblBhc3QgPyBgJHtmbXRWYWx1ZX0gJHtmbXRVbml0fSBhZ29gIDogYGluICR7Zm10VmFsdWV9ICR7Zm10VW5pdH1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U3RyaW5nKGtub3duRm9ybWF0KSB7XG4gIC8vIHRoZXNlIGFsbCBoYXZlIHRoZSBvZmZzZXRzIHJlbW92ZWQgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGVtXG4gIC8vIHdpdGhvdXQgYWxsIHRoZSBpbnRsIHN0dWZmIHRoaXMgaXMgYmFja2ZpbGxpbmdcbiAgY29uc3QgZmlsdGVyZWQgPSBwaWNrKGtub3duRm9ybWF0LCBbXG4gICAgICBcIndlZWtkYXlcIixcbiAgICAgIFwiZXJhXCIsXG4gICAgICBcInllYXJcIixcbiAgICAgIFwibW9udGhcIixcbiAgICAgIFwiZGF5XCIsXG4gICAgICBcImhvdXJcIixcbiAgICAgIFwibWludXRlXCIsXG4gICAgICBcInNlY29uZFwiLFxuICAgICAgXCJ0aW1lWm9uZU5hbWVcIixcbiAgICAgIFwiaG91ckN5Y2xlXCIsXG4gICAgXSksXG4gICAga2V5ID0gc3RyaW5naWZ5KGZpbHRlcmVkKSxcbiAgICBkYXRlVGltZUh1Z2UgPSBcIkVFRUUsIExMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gIHN3aXRjaCAoa2V5KSB7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX1NIT1JUKTpcbiAgICAgIHJldHVybiBcIk0vZC95eXl5XCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFX01FRCk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURV9NRURfV0lUSF9XRUVLREFZKTpcbiAgICAgIHJldHVybiBcIkVFRSwgTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfRlVMTCk6XG4gICAgICByZXR1cm4gXCJMTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVfSFVHRSk6XG4gICAgICByZXR1cm4gXCJFRUVFLCBMTExMIGQsIHl5eXlcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfU0lNUExFKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FX1dJVEhfU0hPUlRfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV9XSVRIX0xPTkdfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcImg6bW0gYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuVElNRV8yNF9TSU1QTEUpOlxuICAgICAgcmV0dXJuIFwiSEg6bW1cIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLlRJTUVfMjRfV0lUSF9TRUNPTkRTKTpcbiAgICAgIHJldHVybiBcIkhIOm1tOnNzXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUKTpcbiAgICAgIHJldHVybiBcIkhIOm1tXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5USU1FXzI0X1dJVEhfTE9OR19PRkZTRVQpOlxuICAgICAgcmV0dXJuIFwiSEg6bW1cIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX1NIT1JUKTpcbiAgICAgIHJldHVybiBcIk0vZC95eXl5LCBoOm1tIGFcIjtcbiAgICBjYXNlIHN0cmluZ2lmeShGb3JtYXRzLkRBVEVUSU1FX01FRCk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9GVUxMKTpcbiAgICAgIHJldHVybiBcIkxMTEwgZCwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9IVUdFKTpcbiAgICAgIHJldHVybiBkYXRlVGltZUh1Z2U7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiTS9kL3l5eXksIGg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfTUVEX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJMTEwgZCwgeXl5eSwgaDptbTpzcyBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKTpcbiAgICAgIHJldHVybiBcIkVFRSwgZCBMTEwgeXl5eSwgaDptbSBhXCI7XG4gICAgY2FzZSBzdHJpbmdpZnkoRm9ybWF0cy5EQVRFVElNRV9GVUxMX1dJVEhfU0VDT05EUyk6XG4gICAgICByZXR1cm4gXCJMTExMIGQsIHl5eXksIGg6bW06c3MgYVwiO1xuICAgIGNhc2Ugc3RyaW5naWZ5KEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMpOlxuICAgICAgcmV0dXJuIFwiRUVFRSwgTExMTCBkLCB5eXl5LCBoOm1tOnNzIGFcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRhdGVUaW1lSHVnZTtcbiAgfVxufVxuIiwgImltcG9ydCAqIGFzIEVuZ2xpc2ggZnJvbSBcIi4vZW5nbGlzaC5qc1wiO1xuaW1wb3J0ICogYXMgRm9ybWF0cyBmcm9tIFwiLi9mb3JtYXRzLmpzXCI7XG5pbXBvcnQgeyBwYWRTdGFydCB9IGZyb20gXCIuL3V0aWwuanNcIjtcblxuZnVuY3Rpb24gc3RyaW5naWZ5VG9rZW5zKHNwbGl0cywgdG9rZW5Ub1N0cmluZykge1xuICBsZXQgcyA9IFwiXCI7XG4gIGZvciAoY29uc3QgdG9rZW4gb2Ygc3BsaXRzKSB7XG4gICAgaWYgKHRva2VuLmxpdGVyYWwpIHtcbiAgICAgIHMgKz0gdG9rZW4udmFsO1xuICAgIH0gZWxzZSB7XG4gICAgICBzICs9IHRva2VuVG9TdHJpbmcodG9rZW4udmFsKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cbmNvbnN0IG1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHMgPSB7XG4gIEQ6IEZvcm1hdHMuREFURV9TSE9SVCxcbiAgREQ6IEZvcm1hdHMuREFURV9NRUQsXG4gIERERDogRm9ybWF0cy5EQVRFX0ZVTEwsXG4gIEREREQ6IEZvcm1hdHMuREFURV9IVUdFLFxuICB0OiBGb3JtYXRzLlRJTUVfU0lNUExFLFxuICB0dDogRm9ybWF0cy5USU1FX1dJVEhfU0VDT05EUyxcbiAgdHR0OiBGb3JtYXRzLlRJTUVfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIHR0dHQ6IEZvcm1hdHMuVElNRV9XSVRIX0xPTkdfT0ZGU0VULFxuICBUOiBGb3JtYXRzLlRJTUVfMjRfU0lNUExFLFxuICBUVDogRm9ybWF0cy5USU1FXzI0X1dJVEhfU0VDT05EUyxcbiAgVFRUOiBGb3JtYXRzLlRJTUVfMjRfV0lUSF9TSE9SVF9PRkZTRVQsXG4gIFRUVFQ6IEZvcm1hdHMuVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VULFxuICBmOiBGb3JtYXRzLkRBVEVUSU1FX1NIT1JULFxuICBmZjogRm9ybWF0cy5EQVRFVElNRV9NRUQsXG4gIGZmZjogRm9ybWF0cy5EQVRFVElNRV9GVUxMLFxuICBmZmZmOiBGb3JtYXRzLkRBVEVUSU1FX0hVR0UsXG4gIEY6IEZvcm1hdHMuREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTLFxuICBGRjogRm9ybWF0cy5EQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTLFxuICBGRkY6IEZvcm1hdHMuREFURVRJTUVfRlVMTF9XSVRIX1NFQ09ORFMsXG4gIEZGRkY6IEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMsXG59O1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybWF0dGVyIHtcbiAgc3RhdGljIGNyZWF0ZShsb2NhbGUsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBuZXcgRm9ybWF0dGVyKGxvY2FsZSwgb3B0cyk7XG4gIH1cblxuICBzdGF0aWMgcGFyc2VGb3JtYXQoZm10KSB7XG4gICAgLy8gd2hpdGUtc3BhY2UgaXMgYWx3YXlzIGNvbnNpZGVyZWQgYSBsaXRlcmFsIGluIHVzZXItcHJvdmlkZWQgZm9ybWF0c1xuICAgIC8vIHRoZSBcIiBcIiB0b2tlbiBoYXMgYSBzcGVjaWFsIG1lYW5pbmcgKHNlZSB1bml0Rm9yVG9rZW4pXG5cbiAgICBsZXQgY3VycmVudCA9IG51bGwsXG4gICAgICBjdXJyZW50RnVsbCA9IFwiXCIsXG4gICAgICBicmFja2V0ZWQgPSBmYWxzZTtcbiAgICBjb25zdCBzcGxpdHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZtdC5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGZtdC5jaGFyQXQoaSk7XG4gICAgICBpZiAoYyA9PT0gXCInXCIpIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IGJyYWNrZXRlZCB8fCAvXlxccyskLy50ZXN0KGN1cnJlbnRGdWxsKSwgdmFsOiBjdXJyZW50RnVsbCB9KTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgY3VycmVudEZ1bGwgPSBcIlwiO1xuICAgICAgICBicmFja2V0ZWQgPSAhYnJhY2tldGVkO1xuICAgICAgfSBlbHNlIGlmIChicmFja2V0ZWQpIHtcbiAgICAgICAgY3VycmVudEZ1bGwgKz0gYztcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gY3VycmVudCkge1xuICAgICAgICBjdXJyZW50RnVsbCArPSBjO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzcGxpdHMucHVzaCh7IGxpdGVyYWw6IC9eXFxzKyQvLnRlc3QoY3VycmVudEZ1bGwpLCB2YWw6IGN1cnJlbnRGdWxsIH0pO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRGdWxsID0gYztcbiAgICAgICAgY3VycmVudCA9IGM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRGdWxsLmxlbmd0aCA+IDApIHtcbiAgICAgIHNwbGl0cy5wdXNoKHsgbGl0ZXJhbDogYnJhY2tldGVkIHx8IC9eXFxzKyQvLnRlc3QoY3VycmVudEZ1bGwpLCB2YWw6IGN1cnJlbnRGdWxsIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdHM7XG4gIH1cblxuICBzdGF0aWMgbWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbikge1xuICAgIHJldHVybiBtYWNyb1Rva2VuVG9Gb3JtYXRPcHRzW3Rva2VuXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGxvY2FsZSwgZm9ybWF0T3B0cykge1xuICAgIHRoaXMub3B0cyA9IGZvcm1hdE9wdHM7XG4gICAgdGhpcy5sb2MgPSBsb2NhbGU7XG4gICAgdGhpcy5zeXN0ZW1Mb2MgPSBudWxsO1xuICB9XG5cbiAgZm9ybWF0V2l0aFN5c3RlbURlZmF1bHQoZHQsIG9wdHMpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW1Mb2MgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3lzdGVtTG9jID0gdGhpcy5sb2MucmVkZWZhdWx0VG9TeXN0ZW0oKTtcbiAgICB9XG4gICAgY29uc3QgZGYgPSB0aGlzLnN5c3RlbUxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7XG4gICAgcmV0dXJuIGRmLmZvcm1hdCgpO1xuICB9XG5cbiAgZHRGb3JtYXR0ZXIoZHQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmxvYy5kdEZvcm1hdHRlcihkdCwgeyAuLi50aGlzLm9wdHMsIC4uLm9wdHMgfSk7XG4gIH1cblxuICBmb3JtYXREYXRlVGltZShkdCwgb3B0cykge1xuICAgIHJldHVybiB0aGlzLmR0Rm9ybWF0dGVyKGR0LCBvcHRzKS5mb3JtYXQoKTtcbiAgfVxuXG4gIGZvcm1hdERhdGVUaW1lUGFydHMoZHQsIG9wdHMpIHtcbiAgICByZXR1cm4gdGhpcy5kdEZvcm1hdHRlcihkdCwgb3B0cykuZm9ybWF0VG9QYXJ0cygpO1xuICB9XG5cbiAgZm9ybWF0SW50ZXJ2YWwoaW50ZXJ2YWwsIG9wdHMpIHtcbiAgICBjb25zdCBkZiA9IHRoaXMuZHRGb3JtYXR0ZXIoaW50ZXJ2YWwuc3RhcnQsIG9wdHMpO1xuICAgIHJldHVybiBkZi5kdGYuZm9ybWF0UmFuZ2UoaW50ZXJ2YWwuc3RhcnQudG9KU0RhdGUoKSwgaW50ZXJ2YWwuZW5kLnRvSlNEYXRlKCkpO1xuICB9XG5cbiAgcmVzb2x2ZWRPcHRpb25zKGR0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuZHRGb3JtYXR0ZXIoZHQsIG9wdHMpLnJlc29sdmVkT3B0aW9ucygpO1xuICB9XG5cbiAgbnVtKG4sIHAgPSAwKSB7XG4gICAgLy8gd2UgZ2V0IHNvbWUgcGVyZiBvdXQgb2YgZG9pbmcgdGhpcyBoZXJlLCBhbm5veWluZ2x5XG4gICAgaWYgKHRoaXMub3B0cy5mb3JjZVNpbXBsZSkge1xuICAgICAgcmV0dXJuIHBhZFN0YXJ0KG4sIHApO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSB7IC4uLnRoaXMub3B0cyB9O1xuXG4gICAgaWYgKHAgPiAwKSB7XG4gICAgICBvcHRzLnBhZFRvID0gcDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5sb2MubnVtYmVyRm9ybWF0dGVyKG9wdHMpLmZvcm1hdChuKTtcbiAgfVxuXG4gIGZvcm1hdERhdGVUaW1lRnJvbVN0cmluZyhkdCwgZm10KSB7XG4gICAgY29uc3Qga25vd25FbmdsaXNoID0gdGhpcy5sb2MubGlzdGluZ01vZGUoKSA9PT0gXCJlblwiLFxuICAgICAgdXNlRGF0ZVRpbWVGb3JtYXR0ZXIgPSB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAmJiB0aGlzLmxvYy5vdXRwdXRDYWxlbmRhciAhPT0gXCJncmVnb3J5XCIsXG4gICAgICBzdHJpbmcgPSAob3B0cywgZXh0cmFjdCkgPT4gdGhpcy5sb2MuZXh0cmFjdChkdCwgb3B0cywgZXh0cmFjdCksXG4gICAgICBmb3JtYXRPZmZzZXQgPSAob3B0cykgPT4ge1xuICAgICAgICBpZiAoZHQuaXNPZmZzZXRGaXhlZCAmJiBkdC5vZmZzZXQgPT09IDAgJiYgb3B0cy5hbGxvd1opIHtcbiAgICAgICAgICByZXR1cm4gXCJaXCI7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZHQuaXNWYWxpZCA/IGR0LnpvbmUuZm9ybWF0T2Zmc2V0KGR0LnRzLCBvcHRzLmZvcm1hdCkgOiBcIlwiO1xuICAgICAgfSxcbiAgICAgIG1lcmlkaWVtID0gKCkgPT5cbiAgICAgICAga25vd25FbmdsaXNoXG4gICAgICAgICAgPyBFbmdsaXNoLm1lcmlkaWVtRm9yRGF0ZVRpbWUoZHQpXG4gICAgICAgICAgOiBzdHJpbmcoeyBob3VyOiBcIm51bWVyaWNcIiwgaG91ckN5Y2xlOiBcImgxMlwiIH0sIFwiZGF5cGVyaW9kXCIpLFxuICAgICAgbW9udGggPSAobGVuZ3RoLCBzdGFuZGFsb25lKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2hcbiAgICAgICAgICA/IEVuZ2xpc2gubW9udGhGb3JEYXRlVGltZShkdCwgbGVuZ3RoKVxuICAgICAgICAgIDogc3RyaW5nKHN0YW5kYWxvbmUgPyB7IG1vbnRoOiBsZW5ndGggfSA6IHsgbW9udGg6IGxlbmd0aCwgZGF5OiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpLFxuICAgICAgd2Vla2RheSA9IChsZW5ndGgsIHN0YW5kYWxvbmUpID0+XG4gICAgICAgIGtub3duRW5nbGlzaFxuICAgICAgICAgID8gRW5nbGlzaC53ZWVrZGF5Rm9yRGF0ZVRpbWUoZHQsIGxlbmd0aClcbiAgICAgICAgICA6IHN0cmluZyhcbiAgICAgICAgICAgICAgc3RhbmRhbG9uZSA/IHsgd2Vla2RheTogbGVuZ3RoIH0gOiB7IHdlZWtkYXk6IGxlbmd0aCwgbW9udGg6IFwibG9uZ1wiLCBkYXk6IFwibnVtZXJpY1wiIH0sXG4gICAgICAgICAgICAgIFwid2Vla2RheVwiXG4gICAgICAgICAgICApLFxuICAgICAgbWF5YmVNYWNybyA9ICh0b2tlbikgPT4ge1xuICAgICAgICBjb25zdCBmb3JtYXRPcHRzID0gRm9ybWF0dGVyLm1hY3JvVG9rZW5Ub0Zvcm1hdE9wdHModG9rZW4pO1xuICAgICAgICBpZiAoZm9ybWF0T3B0cykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmZvcm1hdFdpdGhTeXN0ZW1EZWZhdWx0KGR0LCBmb3JtYXRPcHRzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcmEgPSAobGVuZ3RoKSA9PlxuICAgICAgICBrbm93bkVuZ2xpc2ggPyBFbmdsaXNoLmVyYUZvckRhdGVUaW1lKGR0LCBsZW5ndGgpIDogc3RyaW5nKHsgZXJhOiBsZW5ndGggfSwgXCJlcmFcIiksXG4gICAgICB0b2tlblRvU3RyaW5nID0gKHRva2VuKSA9PiB7XG4gICAgICAgIC8vIFdoZXJlIHBvc3NpYmxlOiBodHRwczovL2NsZHIudW5pY29kZS5vcmcvdHJhbnNsYXRpb24vZGF0ZS10aW1lL2RhdGUtdGltZS1zeW1ib2xzXG4gICAgICAgIHN3aXRjaCAodG9rZW4pIHtcbiAgICAgICAgICAvLyBtc1xuICAgICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWlsbGlzZWNvbmQpO1xuICAgICAgICAgIGNhc2UgXCJ1XCI6XG4gICAgICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgICAgIGNhc2UgXCJTU1NcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taWxsaXNlY29uZCwgMyk7XG4gICAgICAgICAgLy8gc2Vjb25kc1xuICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuc2Vjb25kKTtcbiAgICAgICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5zZWNvbmQsIDIpO1xuICAgICAgICAgIC8vIGZyYWN0aW9uYWwgc2Vjb25kc1xuICAgICAgICAgIGNhc2UgXCJ1dVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKE1hdGguZmxvb3IoZHQubWlsbGlzZWNvbmQgLyAxMCksIDIpO1xuICAgICAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShNYXRoLmZsb29yKGR0Lm1pbGxpc2Vjb25kIC8gMTAwKSk7XG4gICAgICAgICAgLy8gbWludXRlc1xuICAgICAgICAgIGNhc2UgXCJtXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubWludXRlKTtcbiAgICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5taW51dGUsIDIpO1xuICAgICAgICAgIC8vIGhvdXJzXG4gICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5ob3VyICUgMTIgPT09IDAgPyAxMiA6IGR0LmhvdXIgJSAxMik7XG4gICAgICAgICAgY2FzZSBcImhoXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciAlIDEyID09PSAwID8gMTIgOiBkdC5ob3VyICUgMTIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJIXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91cik7XG4gICAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQuaG91ciwgMik7XG4gICAgICAgICAgLy8gb2Zmc2V0XG4gICAgICAgICAgY2FzZSBcIlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgKzZcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXRPZmZzZXQoeyBmb3JtYXQ6IFwibmFycm93XCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgKzA2OjAwXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHsgZm9ybWF0OiBcInNob3J0XCIsIGFsbG93WjogdGhpcy5vcHRzLmFsbG93WiB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgICAgICAvLyBsaWtlICswNjAwXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0T2Zmc2V0KHsgZm9ybWF0OiBcInRlY2hpZVwiLCBhbGxvd1o6IHRoaXMub3B0cy5hbGxvd1ogfSk7XG4gICAgICAgICAgY2FzZSBcIlpaWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgRVNUXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogXCJzaG9ydFwiLCBsb2NhbGU6IHRoaXMubG9jLmxvY2FsZSB9KTtcbiAgICAgICAgICBjYXNlIFwiWlpaWlpcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgRWFzdGVybiBTdGFuZGFyZCBUaW1lXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZS5vZmZzZXROYW1lKGR0LnRzLCB7IGZvcm1hdDogXCJsb25nXCIsIGxvY2FsZTogdGhpcy5sb2MubG9jYWxlIH0pO1xuICAgICAgICAgIC8vIHpvbmVcbiAgICAgICAgICBjYXNlIFwielwiOlxuICAgICAgICAgICAgLy8gbGlrZSBBbWVyaWNhL05ld19Zb3JrXG4gICAgICAgICAgICByZXR1cm4gZHQuem9uZU5hbWU7XG4gICAgICAgICAgLy8gbWVyaWRpZW1zXG4gICAgICAgICAgY2FzZSBcImFcIjpcbiAgICAgICAgICAgIHJldHVybiBtZXJpZGllbSgpO1xuICAgICAgICAgIC8vIGRhdGVzXG4gICAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7IGRheTogXCJudW1lcmljXCIgfSwgXCJkYXlcIikgOiB0aGlzLm51bShkdC5kYXkpO1xuICAgICAgICAgIGNhc2UgXCJkZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyID8gc3RyaW5nKHsgZGF5OiBcIjItZGlnaXRcIiB9LCBcImRheVwiKSA6IHRoaXMubnVtKGR0LmRheSwgMik7XG4gICAgICAgICAgLy8gd2Vla2RheXMgLSBzdGFuZGFsb25lXG4gICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpO1xuICAgICAgICAgIGNhc2UgXCJjY2NcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJjY2NjXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUdWVzZGF5J1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJsb25nXCIsIHRydWUpO1xuICAgICAgICAgIGNhc2UgXCJjY2NjY1wiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVCdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAgIC8vIHdlZWtkYXlzIC0gZm9ybWF0XG4gICAgICAgICAgY2FzZSBcIkVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtkYXkpO1xuICAgICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgJ1R1ZXMnXG4gICAgICAgICAgICByZXR1cm4gd2Vla2RheShcInNob3J0XCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiRUVFRVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAnVHVlc2RheSdcbiAgICAgICAgICAgIHJldHVybiB3ZWVrZGF5KFwibG9uZ1wiLCBmYWxzZSk7XG4gICAgICAgICAgY2FzZSBcIkVFRUVFXCI6XG4gICAgICAgICAgICAvLyBsaWtlICdUJ1xuICAgICAgICAgICAgcmV0dXJuIHdlZWtkYXkoXCJuYXJyb3dcIiwgZmFsc2UpO1xuICAgICAgICAgIC8vIG1vbnRocyAtIHN0YW5kYWxvbmVcbiAgICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCJudW1lcmljXCIsIGRheTogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoKTtcbiAgICAgICAgICBjYXNlIFwiTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDEsIGRvZXNuJ3Qgc2VlbSB0byB3b3JrXG4gICAgICAgICAgICByZXR1cm4gdXNlRGF0ZVRpbWVGb3JtYXR0ZXJcbiAgICAgICAgICAgICAgPyBzdHJpbmcoeyBtb250aDogXCIyLWRpZ2l0XCIsIGRheTogXCJudW1lcmljXCIgfSwgXCJtb250aFwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0Lm1vbnRoLCAyKTtcbiAgICAgICAgICBjYXNlIFwiTExMXCI6XG4gICAgICAgICAgICAvLyBsaWtlIEphblxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwic2hvcnRcIiwgdHJ1ZSk7XG4gICAgICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSmFudWFyeVxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibG9uZ1wiLCB0cnVlKTtcbiAgICAgICAgICBjYXNlIFwiTExMTExcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIHRydWUpO1xuICAgICAgICAgIC8vIG1vbnRocyAtIGZvcm1hdFxuICAgICAgICAgIGNhc2UgXCJNXCI6XG4gICAgICAgICAgICAvLyBsaWtlIDFcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IG1vbnRoOiBcIm51bWVyaWNcIiB9LCBcIm1vbnRoXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQubW9udGgpO1xuICAgICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgbW9udGg6IFwiMi1kaWdpdFwiIH0sIFwibW9udGhcIilcbiAgICAgICAgICAgICAgOiB0aGlzLm51bShkdC5tb250aCwgMik7XG4gICAgICAgICAgY2FzZSBcIk1NTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW5cbiAgICAgICAgICAgIHJldHVybiBtb250aChcInNob3J0XCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiTU1NTVwiOlxuICAgICAgICAgICAgLy8gbGlrZSBKYW51YXJ5XG4gICAgICAgICAgICByZXR1cm4gbW9udGgoXCJsb25nXCIsIGZhbHNlKTtcbiAgICAgICAgICBjYXNlIFwiTU1NTU1cIjpcbiAgICAgICAgICAgIC8vIGxpa2UgSlxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoKFwibmFycm93XCIsIGZhbHNlKTtcbiAgICAgICAgICAvLyB5ZWFyc1xuICAgICAgICAgIGNhc2UgXCJ5XCI6XG4gICAgICAgICAgICAvLyBsaWtlIDIwMTRcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlciA/IHN0cmluZyh7IHllYXI6IFwibnVtZXJpY1wiIH0sIFwieWVhclwiKSA6IHRoaXMubnVtKGR0LnllYXIpO1xuICAgICAgICAgIGNhc2UgXCJ5eVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAxNFxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogXCIyLWRpZ2l0XCIgfSwgXCJ5ZWFyXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhci50b1N0cmluZygpLnNsaWNlKC0yKSwgMik7XG4gICAgICAgICAgY2FzZSBcInl5eXlcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMDAxMlxuICAgICAgICAgICAgcmV0dXJuIHVzZURhdGVUaW1lRm9ybWF0dGVyXG4gICAgICAgICAgICAgID8gc3RyaW5nKHsgeWVhcjogXCJudW1lcmljXCIgfSwgXCJ5ZWFyXCIpXG4gICAgICAgICAgICAgIDogdGhpcy5udW0oZHQueWVhciwgNCk7XG4gICAgICAgICAgY2FzZSBcInl5eXl5eVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMDAwMTJcbiAgICAgICAgICAgIHJldHVybiB1c2VEYXRlVGltZUZvcm1hdHRlclxuICAgICAgICAgICAgICA/IHN0cmluZyh7IHllYXI6IFwibnVtZXJpY1wiIH0sIFwieWVhclwiKVxuICAgICAgICAgICAgICA6IHRoaXMubnVtKGR0LnllYXIsIDYpO1xuICAgICAgICAgIC8vIGVyYXNcbiAgICAgICAgICBjYXNlIFwiR1wiOlxuICAgICAgICAgICAgLy8gbGlrZSBBRFxuICAgICAgICAgICAgcmV0dXJuIGVyYShcInNob3J0XCIpO1xuICAgICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgICAgLy8gbGlrZSBBbm5vIERvbWluaVxuICAgICAgICAgICAgcmV0dXJuIGVyYShcImxvbmdcIik7XG4gICAgICAgICAgY2FzZSBcIkdHR0dHXCI6XG4gICAgICAgICAgICByZXR1cm4gZXJhKFwibmFycm93XCIpO1xuICAgICAgICAgIGNhc2UgXCJra1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtZZWFyLnRvU3RyaW5nKCkuc2xpY2UoLTIpLCAyKTtcbiAgICAgICAgICBjYXNlIFwia2tra1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtZZWFyLCA0KTtcbiAgICAgICAgICBjYXNlIFwiV1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtOdW1iZXIpO1xuICAgICAgICAgIGNhc2UgXCJXV1wiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LndlZWtOdW1iZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJuXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrTnVtYmVyKTtcbiAgICAgICAgICBjYXNlIFwibm5cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5sb2NhbFdlZWtOdW1iZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJpaVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LmxvY2FsV2Vla1llYXIudG9TdHJpbmcoKS5zbGljZSgtMiksIDIpO1xuICAgICAgICAgIGNhc2UgXCJpaWlpXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQubG9jYWxXZWVrWWVhciwgNCk7XG4gICAgICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bShkdC5vcmRpbmFsKTtcbiAgICAgICAgICBjYXNlIFwib29vXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oZHQub3JkaW5hbCwgMyk7XG4gICAgICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgICAgIC8vIGxpa2UgMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIpO1xuICAgICAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICAgICAgLy8gbGlrZSAwMVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnF1YXJ0ZXIsIDIpO1xuICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5udW0oTWF0aC5mbG9vcihkdC50cyAvIDEwMDApKTtcbiAgICAgICAgICBjYXNlIFwieFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubnVtKGR0LnRzKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG1heWJlTWFjcm8odG9rZW4pO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2VucyhGb3JtYXR0ZXIucGFyc2VGb3JtYXQoZm10KSwgdG9rZW5Ub1N0cmluZyk7XG4gIH1cblxuICBmb3JtYXREdXJhdGlvbkZyb21TdHJpbmcoZHVyLCBmbXQpIHtcbiAgICBjb25zdCB0b2tlblRvRmllbGQgPSAodG9rZW4pID0+IHtcbiAgICAgICAgc3dpdGNoICh0b2tlblswXSkge1xuICAgICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuICAgICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJzZWNvbmRcIjtcbiAgICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibWludXRlXCI7XG4gICAgICAgICAgY2FzZSBcImhcIjpcbiAgICAgICAgICAgIHJldHVybiBcImhvdXJcIjtcbiAgICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiZGF5XCI7XG4gICAgICAgICAgY2FzZSBcIndcIjpcbiAgICAgICAgICAgIHJldHVybiBcIndlZWtcIjtcbiAgICAgICAgICBjYXNlIFwiTVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibW9udGhcIjtcbiAgICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwieWVhclwiO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHRva2VuVG9TdHJpbmcgPSAobGlsZHVyKSA9PiAodG9rZW4pID0+IHtcbiAgICAgICAgY29uc3QgbWFwcGVkID0gdG9rZW5Ub0ZpZWxkKHRva2VuKTtcbiAgICAgICAgaWYgKG1hcHBlZCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLm51bShsaWxkdXIuZ2V0KG1hcHBlZCksIHRva2VuLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdG9rZW5zID0gRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZtdCksXG4gICAgICByZWFsVG9rZW5zID0gdG9rZW5zLnJlZHVjZShcbiAgICAgICAgKGZvdW5kLCB7IGxpdGVyYWwsIHZhbCB9KSA9PiAobGl0ZXJhbCA/IGZvdW5kIDogZm91bmQuY29uY2F0KHZhbCkpLFxuICAgICAgICBbXVxuICAgICAgKSxcbiAgICAgIGNvbGxhcHNlZCA9IGR1ci5zaGlmdFRvKC4uLnJlYWxUb2tlbnMubWFwKHRva2VuVG9GaWVsZCkuZmlsdGVyKCh0KSA9PiB0KSk7XG4gICAgcmV0dXJuIHN0cmluZ2lmeVRva2Vucyh0b2tlbnMsIHRva2VuVG9TdHJpbmcoY29sbGFwc2VkKSk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICB1bnRydW5jYXRlWWVhcixcbiAgc2lnbmVkT2Zmc2V0LFxuICBwYXJzZUludGVnZXIsXG4gIHBhcnNlTWlsbGlzLFxuICBpc1VuZGVmaW5lZCxcbiAgcGFyc2VGbG9hdGluZyxcbn0gZnJvbSBcIi4vdXRpbC5qc1wiO1xuaW1wb3J0ICogYXMgRW5nbGlzaCBmcm9tIFwiLi9lbmdsaXNoLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcblxuLypcbiAqIFRoaXMgZmlsZSBoYW5kbGVzIHBhcnNpbmcgZm9yIHdlbGwtc3BlY2lmaWVkIGZvcm1hdHMuIEhlcmUncyBob3cgaXQgd29ya3M6XG4gKiBUd28gdGhpbmdzIGdvIGludG8gcGFyc2luZzogYSByZWdleCB0byBtYXRjaCB3aXRoIGFuZCBhbiBleHRyYWN0b3IgdG8gdGFrZSBhcGFydCB0aGUgZ3JvdXBzIGluIHRoZSBtYXRjaC5cbiAqIEFuIGV4dHJhY3RvciBpcyBqdXN0IGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHJlZ2V4IG1hdGNoIGFycmF5IGFuZCByZXR1cm5zIGEgeyB5ZWFyOiAuLi4sIG1vbnRoOiAuLi4gfSBvYmplY3RcbiAqIHBhcnNlKCkgZG9lcyB0aGUgd29yayBvZiBleGVjdXRpbmcgdGhlIHJlZ2V4IGFuZCBhcHBseWluZyB0aGUgZXh0cmFjdG9yLiBJdCB0YWtlcyBtdWx0aXBsZSByZWdleC9leHRyYWN0b3IgcGFpcnMgdG8gdHJ5IGluIHNlcXVlbmNlLlxuICogRXh0cmFjdG9ycyBjYW4gdGFrZSBhIFwiY3Vyc29yXCIgcmVwcmVzZW50aW5nIHRoZSBvZmZzZXQgaW4gdGhlIG1hdGNoIHRvIGxvb2sgYXQuIFRoaXMgbWFrZXMgaXQgZWFzeSB0byBjb21iaW5lIGV4dHJhY3RvcnMuXG4gKiBjb21iaW5lRXh0cmFjdG9ycygpIGRvZXMgdGhlIHdvcmsgb2YgY29tYmluaW5nIHRoZW0sIGtlZXBpbmcgdHJhY2sgb2YgdGhlIGN1cnNvciB0aHJvdWdoIG11bHRpcGxlIGV4dHJhY3Rpb25zLlxuICogU29tZSBleHRyYWN0aW9ucyBhcmUgc3VwZXIgZHVtYiBhbmQgc2ltcGxlUGFyc2UgYW5kIGZyb21TdHJpbmdzIGhlbHAgRFJZIHRoZW0uXG4gKi9cblxuY29uc3QgaWFuYVJlZ2V4ID0gL1tBLVphLXpfKy1dezEsMjU2fSg/Ojo/XFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KD86XFwvW0EtWmEtejAtOV8rLV17MSwyNTZ9KT8pPy87XG5cbmZ1bmN0aW9uIGNvbWJpbmVSZWdleGVzKC4uLnJlZ2V4ZXMpIHtcbiAgY29uc3QgZnVsbCA9IHJlZ2V4ZXMucmVkdWNlKChmLCByKSA9PiBmICsgci5zb3VyY2UsIFwiXCIpO1xuICByZXR1cm4gUmVnRXhwKGBeJHtmdWxsfSRgKTtcbn1cblxuZnVuY3Rpb24gY29tYmluZUV4dHJhY3RvcnMoLi4uZXh0cmFjdG9ycykge1xuICByZXR1cm4gKG0pID0+XG4gICAgZXh0cmFjdG9yc1xuICAgICAgLnJlZHVjZShcbiAgICAgICAgKFttZXJnZWRWYWxzLCBtZXJnZWRab25lLCBjdXJzb3JdLCBleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IFt2YWwsIHpvbmUsIG5leHRdID0gZXgobSwgY3Vyc29yKTtcbiAgICAgICAgICByZXR1cm4gW3sgLi4ubWVyZ2VkVmFscywgLi4udmFsIH0sIHpvbmUgfHwgbWVyZ2VkWm9uZSwgbmV4dF07XG4gICAgICAgIH0sXG4gICAgICAgIFt7fSwgbnVsbCwgMV1cbiAgICAgIClcbiAgICAgIC5zbGljZSgwLCAyKTtcbn1cblxuZnVuY3Rpb24gcGFyc2UocywgLi4ucGF0dGVybnMpIHtcbiAgaWYgKHMgPT0gbnVsbCkge1xuICAgIHJldHVybiBbbnVsbCwgbnVsbF07XG4gIH1cblxuICBmb3IgKGNvbnN0IFtyZWdleCwgZXh0cmFjdG9yXSBvZiBwYXR0ZXJucykge1xuICAgIGNvbnN0IG0gPSByZWdleC5leGVjKHMpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gZXh0cmFjdG9yKG0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW251bGwsIG51bGxdO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVQYXJzZSguLi5rZXlzKSB7XG4gIHJldHVybiAobWF0Y2gsIGN1cnNvcikgPT4ge1xuICAgIGNvbnN0IHJldCA9IHt9O1xuICAgIGxldCBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHJldFtrZXlzW2ldXSA9IHBhcnNlSW50ZWdlcihtYXRjaFtjdXJzb3IgKyBpXSk7XG4gICAgfVxuICAgIHJldHVybiBbcmV0LCBudWxsLCBjdXJzb3IgKyBpXTtcbiAgfTtcbn1cblxuLy8gSVNPIGFuZCBTUUwgcGFyc2luZ1xuY29uc3Qgb2Zmc2V0UmVnZXggPSAvKD86KFopfChbKy1dXFxkXFxkKSg/Ojo/KFxcZFxcZCkpPykvO1xuY29uc3QgaXNvRXh0ZW5kZWRab25lID0gYCg/OiR7b2Zmc2V0UmVnZXguc291cmNlfT8oPzpcXFxcWygke2lhbmFSZWdleC5zb3VyY2V9KVxcXFxdKT8pP2A7XG5jb25zdCBpc29UaW1lQmFzZVJlZ2V4ID0gLyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzpbLixdKFxcZHsxLDMwfSkpPyk/KT8vO1xuY29uc3QgaXNvVGltZVJlZ2V4ID0gUmVnRXhwKGAke2lzb1RpbWVCYXNlUmVnZXguc291cmNlfSR7aXNvRXh0ZW5kZWRab25lfWApO1xuY29uc3QgaXNvVGltZUV4dGVuc2lvblJlZ2V4ID0gUmVnRXhwKGAoPzpUJHtpc29UaW1lUmVnZXguc291cmNlfSk/YCk7XG5jb25zdCBpc29ZbWRSZWdleCA9IC8oWystXVxcZHs2fXxcXGR7NH0pKD86LT8oXFxkXFxkKSg/Oi0/KFxcZFxcZCkpPyk/LztcbmNvbnN0IGlzb1dlZWtSZWdleCA9IC8oXFxkezR9KS0/VyhcXGRcXGQpKD86LT8oXFxkKSk/LztcbmNvbnN0IGlzb09yZGluYWxSZWdleCA9IC8oXFxkezR9KS0/KFxcZHszfSkvO1xuY29uc3QgZXh0cmFjdElTT1dlZWtEYXRhID0gc2ltcGxlUGFyc2UoXCJ3ZWVrWWVhclwiLCBcIndlZWtOdW1iZXJcIiwgXCJ3ZWVrRGF5XCIpO1xuY29uc3QgZXh0cmFjdElTT09yZGluYWxEYXRhID0gc2ltcGxlUGFyc2UoXCJ5ZWFyXCIsIFwib3JkaW5hbFwiKTtcbmNvbnN0IHNxbFltZFJlZ2V4ID0gLyhcXGR7NH0pLShcXGRcXGQpLShcXGRcXGQpLzsgLy8gZHVtYmVkLWRvd24gdmVyc2lvbiBvZiB0aGUgSVNPIG9uZVxuY29uc3Qgc3FsVGltZVJlZ2V4ID0gUmVnRXhwKFxuICBgJHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0gPyg/OiR7b2Zmc2V0UmVnZXguc291cmNlfXwoJHtpYW5hUmVnZXguc291cmNlfSkpP2Bcbik7XG5jb25zdCBzcWxUaW1lRXh0ZW5zaW9uUmVnZXggPSBSZWdFeHAoYCg/OiAke3NxbFRpbWVSZWdleC5zb3VyY2V9KT9gKTtcblxuZnVuY3Rpb24gaW50KG1hdGNoLCBwb3MsIGZhbGxiYWNrKSB7XG4gIGNvbnN0IG0gPSBtYXRjaFtwb3NdO1xuICByZXR1cm4gaXNVbmRlZmluZWQobSkgPyBmYWxsYmFjayA6IHBhcnNlSW50ZWdlcihtKTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT1ltZChtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGl0ZW0gPSB7XG4gICAgeWVhcjogaW50KG1hdGNoLCBjdXJzb3IpLFxuICAgIG1vbnRoOiBpbnQobWF0Y2gsIGN1cnNvciArIDEsIDEpLFxuICAgIGRheTogaW50KG1hdGNoLCBjdXJzb3IgKyAyLCAxKSxcbiAgfTtcblxuICByZXR1cm4gW2l0ZW0sIG51bGwsIGN1cnNvciArIDNdO1xufVxuXG5mdW5jdGlvbiBleHRyYWN0SVNPVGltZShtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGl0ZW0gPSB7XG4gICAgaG91cnM6IGludChtYXRjaCwgY3Vyc29yLCAwKSxcbiAgICBtaW51dGVzOiBpbnQobWF0Y2gsIGN1cnNvciArIDEsIDApLFxuICAgIHNlY29uZHM6IGludChtYXRjaCwgY3Vyc29yICsgMiwgMCksXG4gICAgbWlsbGlzZWNvbmRzOiBwYXJzZU1pbGxpcyhtYXRjaFtjdXJzb3IgKyAzXSksXG4gIH07XG5cbiAgcmV0dXJuIFtpdGVtLCBudWxsLCBjdXJzb3IgKyA0XTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElTT09mZnNldChtYXRjaCwgY3Vyc29yKSB7XG4gIGNvbnN0IGxvY2FsID0gIW1hdGNoW2N1cnNvcl0gJiYgIW1hdGNoW2N1cnNvciArIDFdLFxuICAgIGZ1bGxPZmZzZXQgPSBzaWduZWRPZmZzZXQobWF0Y2hbY3Vyc29yICsgMV0sIG1hdGNoW2N1cnNvciArIDJdKSxcbiAgICB6b25lID0gbG9jYWwgPyBudWxsIDogRml4ZWRPZmZzZXRab25lLmluc3RhbmNlKGZ1bGxPZmZzZXQpO1xuICByZXR1cm4gW3t9LCB6b25lLCBjdXJzb3IgKyAzXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdElBTkFab25lKG1hdGNoLCBjdXJzb3IpIHtcbiAgY29uc3Qgem9uZSA9IG1hdGNoW2N1cnNvcl0gPyBJQU5BWm9uZS5jcmVhdGUobWF0Y2hbY3Vyc29yXSkgOiBudWxsO1xuICByZXR1cm4gW3t9LCB6b25lLCBjdXJzb3IgKyAxXTtcbn1cblxuLy8gSVNPIHRpbWUgcGFyc2luZ1xuXG5jb25zdCBpc29UaW1lT25seSA9IFJlZ0V4cChgXlQ/JHtpc29UaW1lQmFzZVJlZ2V4LnNvdXJjZX0kYCk7XG5cbi8vIElTTyBkdXJhdGlvbiBwYXJzaW5nXG5cbmNvbnN0IGlzb0R1cmF0aW9uID1cbiAgL14tP1AoPzooPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylZKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylNKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylXKT8oPzooLT9cXGR7MSwyMH0oPzpcXC5cXGR7MSwyMH0pPylEKT8oPzpUKD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pSCk/KD86KC0/XFxkezEsMjB9KD86XFwuXFxkezEsMjB9KT8pTSk/KD86KC0/XFxkezEsMjB9KSg/OlsuLF0oLT9cXGR7MSwyMH0pKT9TKT8pPykkLztcblxuZnVuY3Rpb24gZXh0cmFjdElTT0R1cmF0aW9uKG1hdGNoKSB7XG4gIGNvbnN0IFtzLCB5ZWFyU3RyLCBtb250aFN0ciwgd2Vla1N0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0ciwgbWlsbGlzZWNvbmRzU3RyXSA9XG4gICAgbWF0Y2g7XG5cbiAgY29uc3QgaGFzTmVnYXRpdmVQcmVmaXggPSBzWzBdID09PSBcIi1cIjtcbiAgY29uc3QgbmVnYXRpdmVTZWNvbmRzID0gc2Vjb25kU3RyICYmIHNlY29uZFN0clswXSA9PT0gXCItXCI7XG5cbiAgY29uc3QgbWF5YmVOZWdhdGUgPSAobnVtLCBmb3JjZSA9IGZhbHNlKSA9PlxuICAgIG51bSAhPT0gdW5kZWZpbmVkICYmIChmb3JjZSB8fCAobnVtICYmIGhhc05lZ2F0aXZlUHJlZml4KSkgPyAtbnVtIDogbnVtO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgeWVhcnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoeWVhclN0cikpLFxuICAgICAgbW9udGhzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKG1vbnRoU3RyKSksXG4gICAgICB3ZWVrczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyh3ZWVrU3RyKSksXG4gICAgICBkYXlzOiBtYXliZU5lZ2F0ZShwYXJzZUZsb2F0aW5nKGRheVN0cikpLFxuICAgICAgaG91cnM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoaG91clN0cikpLFxuICAgICAgbWludXRlczogbWF5YmVOZWdhdGUocGFyc2VGbG9hdGluZyhtaW51dGVTdHIpKSxcbiAgICAgIHNlY29uZHM6IG1heWJlTmVnYXRlKHBhcnNlRmxvYXRpbmcoc2Vjb25kU3RyKSwgc2Vjb25kU3RyID09PSBcIi0wXCIpLFxuICAgICAgbWlsbGlzZWNvbmRzOiBtYXliZU5lZ2F0ZShwYXJzZU1pbGxpcyhtaWxsaXNlY29uZHNTdHIpLCBuZWdhdGl2ZVNlY29uZHMpLFxuICAgIH0sXG4gIF07XG59XG5cbi8vIFRoZXNlIGFyZSBhIGxpdHRsZSBicmFpbmRlYWQuIEVEVCAqc2hvdWxkKiB0ZWxsIHVzIHRoYXQgd2UncmUgaW4sIHNheSwgQW1lcmljYS9OZXdfWW9ya1xuLy8gYW5kIG5vdCBqdXN0IHRoYXQgd2UncmUgaW4gLTI0MCAqcmlnaHQgbm93Ki4gQnV0IHNpbmNlIEkgZG9uJ3QgdGhpbmsgdGhlc2UgYXJlIHVzZWQgdGhhdCBvZnRlblxuLy8gSSdtIGp1c3QgZ29pbmcgdG8gaWdub3JlIHRoYXRcbmNvbnN0IG9ic09mZnNldHMgPSB7XG4gIEdNVDogMCxcbiAgRURUOiAtNCAqIDYwLFxuICBFU1Q6IC01ICogNjAsXG4gIENEVDogLTUgKiA2MCxcbiAgQ1NUOiAtNiAqIDYwLFxuICBNRFQ6IC02ICogNjAsXG4gIE1TVDogLTcgKiA2MCxcbiAgUERUOiAtNyAqIDYwLFxuICBQU1Q6IC04ICogNjAsXG59O1xuXG5mdW5jdGlvbiBmcm9tU3RyaW5ncyh3ZWVrZGF5U3RyLCB5ZWFyU3RyLCBtb250aFN0ciwgZGF5U3RyLCBob3VyU3RyLCBtaW51dGVTdHIsIHNlY29uZFN0cikge1xuICBjb25zdCByZXN1bHQgPSB7XG4gICAgeWVhcjogeWVhclN0ci5sZW5ndGggPT09IDIgPyB1bnRydW5jYXRlWWVhcihwYXJzZUludGVnZXIoeWVhclN0cikpIDogcGFyc2VJbnRlZ2VyKHllYXJTdHIpLFxuICAgIG1vbnRoOiBFbmdsaXNoLm1vbnRoc1Nob3J0LmluZGV4T2YobW9udGhTdHIpICsgMSxcbiAgICBkYXk6IHBhcnNlSW50ZWdlcihkYXlTdHIpLFxuICAgIGhvdXI6IHBhcnNlSW50ZWdlcihob3VyU3RyKSxcbiAgICBtaW51dGU6IHBhcnNlSW50ZWdlcihtaW51dGVTdHIpLFxuICB9O1xuXG4gIGlmIChzZWNvbmRTdHIpIHJlc3VsdC5zZWNvbmQgPSBwYXJzZUludGVnZXIoc2Vjb25kU3RyKTtcbiAgaWYgKHdlZWtkYXlTdHIpIHtcbiAgICByZXN1bHQud2Vla2RheSA9XG4gICAgICB3ZWVrZGF5U3RyLmxlbmd0aCA+IDNcbiAgICAgICAgPyBFbmdsaXNoLndlZWtkYXlzTG9uZy5pbmRleE9mKHdlZWtkYXlTdHIpICsgMVxuICAgICAgICA6IEVuZ2xpc2gud2Vla2RheXNTaG9ydC5pbmRleE9mKHdlZWtkYXlTdHIpICsgMTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIFJGQyAyODIyLzUzMjJcbmNvbnN0IHJmYzI4MjIgPVxuICAvXig/OihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLFxccyk/KFxcZHsxLDJ9KVxccyhKYW58RmVifE1hcnxBcHJ8TWF5fEp1bnxKdWx8QXVnfFNlcHxPY3R8Tm92fERlYylcXHMoXFxkezIsNH0pXFxzKFxcZFxcZCk6KFxcZFxcZCkoPzo6KFxcZFxcZCkpP1xccyg/OihVVHxHTVR8W0VDTVBdW1NEXVQpfChbWnpdKXwoPzooWystXVxcZFxcZCkoXFxkXFxkKSkpJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMyODIyKG1hdGNoKSB7XG4gIGNvbnN0IFtcbiAgICAgICxcbiAgICAgIHdlZWtkYXlTdHIsXG4gICAgICBkYXlTdHIsXG4gICAgICBtb250aFN0cixcbiAgICAgIHllYXJTdHIsXG4gICAgICBob3VyU3RyLFxuICAgICAgbWludXRlU3RyLFxuICAgICAgc2Vjb25kU3RyLFxuICAgICAgb2JzT2Zmc2V0LFxuICAgICAgbWlsT2Zmc2V0LFxuICAgICAgb2ZmSG91clN0cixcbiAgICAgIG9mZk1pbnV0ZVN0cixcbiAgICBdID0gbWF0Y2gsXG4gICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuXG4gIGxldCBvZmZzZXQ7XG4gIGlmIChvYnNPZmZzZXQpIHtcbiAgICBvZmZzZXQgPSBvYnNPZmZzZXRzW29ic09mZnNldF07XG4gIH0gZWxzZSBpZiAobWlsT2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBvZmZzZXQgPSBzaWduZWRPZmZzZXQob2ZmSG91clN0ciwgb2ZmTWludXRlU3RyKTtcbiAgfVxuXG4gIHJldHVybiBbcmVzdWx0LCBuZXcgRml4ZWRPZmZzZXRab25lKG9mZnNldCldO1xufVxuXG5mdW5jdGlvbiBwcmVwcm9jZXNzUkZDMjgyMihzKSB7XG4gIC8vIFJlbW92ZSBjb21tZW50cyBhbmQgZm9sZGluZyB3aGl0ZXNwYWNlIGFuZCByZXBsYWNlIG11bHRpcGxlLXNwYWNlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG4gIHJldHVybiBzXG4gICAgLnJlcGxhY2UoL1xcKFteKCldKlxcKXxbXFxuXFx0XS9nLCBcIiBcIilcbiAgICAucmVwbGFjZSgvKFxcc1xccyspL2csIFwiIFwiKVxuICAgIC50cmltKCk7XG59XG5cbi8vIGh0dHAgZGF0ZVxuXG5jb25zdCByZmMxMTIzID1cbiAgICAvXihNb258VHVlfFdlZHxUaHV8RnJpfFNhdHxTdW4pLCAoXFxkXFxkKSAoSmFufEZlYnxNYXJ8QXByfE1heXxKdW58SnVsfEF1Z3xTZXB8T2N0fE5vdnxEZWMpIChcXGR7NH0pIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIEdNVCQvLFxuICByZmM4NTAgPVxuICAgIC9eKE1vbmRheXxUdWVzZGF5fFdlZG5lc2RheXxUaHVyc2RheXxGcmlkYXl8U2F0dXJkYXl8U3VuZGF5KSwgKFxcZFxcZCktKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKS0oXFxkXFxkKSAoXFxkXFxkKTooXFxkXFxkKTooXFxkXFxkKSBHTVQkLyxcbiAgYXNjaWkgPVxuICAgIC9eKE1vbnxUdWV8V2VkfFRodXxGcml8U2F0fFN1bikgKEphbnxGZWJ8TWFyfEFwcnxNYXl8SnVufEp1bHxBdWd8U2VwfE9jdHxOb3Z8RGVjKSAoIFxcZHxcXGRcXGQpIChcXGRcXGQpOihcXGRcXGQpOihcXGRcXGQpIChcXGR7NH0pJC87XG5cbmZ1bmN0aW9uIGV4dHJhY3RSRkMxMTIzT3I4NTAobWF0Y2gpIHtcbiAgY29uc3QgWywgd2Vla2RheVN0ciwgZGF5U3RyLCBtb250aFN0ciwgeWVhclN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHJdID0gbWF0Y2gsXG4gICAgcmVzdWx0ID0gZnJvbVN0cmluZ3Mod2Vla2RheVN0ciwgeWVhclN0ciwgbW9udGhTdHIsIGRheVN0ciwgaG91clN0ciwgbWludXRlU3RyLCBzZWNvbmRTdHIpO1xuICByZXR1cm4gW3Jlc3VsdCwgRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlXTtcbn1cblxuZnVuY3Rpb24gZXh0cmFjdEFTQ0lJKG1hdGNoKSB7XG4gIGNvbnN0IFssIHdlZWtkYXlTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyLCB5ZWFyU3RyXSA9IG1hdGNoLFxuICAgIHJlc3VsdCA9IGZyb21TdHJpbmdzKHdlZWtkYXlTdHIsIHllYXJTdHIsIG1vbnRoU3RyLCBkYXlTdHIsIGhvdXJTdHIsIG1pbnV0ZVN0ciwgc2Vjb25kU3RyKTtcbiAgcmV0dXJuIFtyZXN1bHQsIEZpeGVkT2Zmc2V0Wm9uZS51dGNJbnN0YW5jZV07XG59XG5cbmNvbnN0IGlzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29ZbWRSZWdleCwgaXNvVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IGlzb1dlZWtXaXRoVGltZUV4dGVuc2lvblJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoaXNvV2Vla1JlZ2V4LCBpc29UaW1lRXh0ZW5zaW9uUmVnZXgpO1xuY29uc3QgaXNvT3JkaW5hbFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhpc29PcmRpbmFsUmVnZXgsIGlzb1RpbWVFeHRlbnNpb25SZWdleCk7XG5jb25zdCBpc29UaW1lQ29tYmluZWRSZWdleCA9IGNvbWJpbmVSZWdleGVzKGlzb1RpbWVSZWdleCk7XG5cbmNvbnN0IGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0ID0gY29tYmluZUV4dHJhY3RvcnMoXG4gIGV4dHJhY3RJU09ZbWQsXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5jb25zdCBleHRyYWN0SVNPV2Vla1RpbWVBbmRPZmZzZXQgPSBjb21iaW5lRXh0cmFjdG9ycyhcbiAgZXh0cmFjdElTT1dlZWtEYXRhLFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuY29uc3QgZXh0cmFjdElTT09yZGluYWxEYXRlQW5kVGltZSA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPT3JkaW5hbERhdGEsXG4gIGV4dHJhY3RJU09UaW1lLFxuICBleHRyYWN0SVNPT2Zmc2V0LFxuICBleHRyYWN0SUFOQVpvbmVcbik7XG5jb25zdCBleHRyYWN0SVNPVGltZUFuZE9mZnNldCA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuXG4vKlxuICogQHByaXZhdGVcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU09EYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKFxuICAgIHMsXG4gICAgW2lzb1ltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09ZbWRUaW1lQW5kT2Zmc2V0XSxcbiAgICBbaXNvV2Vla1dpdGhUaW1lRXh0ZW5zaW9uUmVnZXgsIGV4dHJhY3RJU09XZWVrVGltZUFuZE9mZnNldF0sXG4gICAgW2lzb09yZGluYWxXaXRoVGltZUV4dGVuc2lvblJlZ2V4LCBleHRyYWN0SVNPT3JkaW5hbERhdGVBbmRUaW1lXSxcbiAgICBbaXNvVGltZUNvbWJpbmVkUmVnZXgsIGV4dHJhY3RJU09UaW1lQW5kT2Zmc2V0XVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSRkMyODIyRGF0ZShzKSB7XG4gIHJldHVybiBwYXJzZShwcmVwcm9jZXNzUkZDMjgyMihzKSwgW3JmYzI4MjIsIGV4dHJhY3RSRkMyODIyXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUhUVFBEYXRlKHMpIHtcbiAgcmV0dXJuIHBhcnNlKFxuICAgIHMsXG4gICAgW3JmYzExMjMsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLFxuICAgIFtyZmM4NTAsIGV4dHJhY3RSRkMxMTIzT3I4NTBdLFxuICAgIFthc2NpaSwgZXh0cmFjdEFTQ0lJXVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU09EdXJhdGlvbihzKSB7XG4gIHJldHVybiBwYXJzZShzLCBbaXNvRHVyYXRpb24sIGV4dHJhY3RJU09EdXJhdGlvbl0pO1xufVxuXG5jb25zdCBleHRyYWN0SVNPVGltZU9ubHkgPSBjb21iaW5lRXh0cmFjdG9ycyhleHRyYWN0SVNPVGltZSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUlTT1RpbWVPbmx5KHMpIHtcbiAgcmV0dXJuIHBhcnNlKHMsIFtpc29UaW1lT25seSwgZXh0cmFjdElTT1RpbWVPbmx5XSk7XG59XG5cbmNvbnN0IHNxbFltZFdpdGhUaW1lRXh0ZW5zaW9uUmVnZXggPSBjb21iaW5lUmVnZXhlcyhzcWxZbWRSZWdleCwgc3FsVGltZUV4dGVuc2lvblJlZ2V4KTtcbmNvbnN0IHNxbFRpbWVDb21iaW5lZFJlZ2V4ID0gY29tYmluZVJlZ2V4ZXMoc3FsVGltZVJlZ2V4KTtcblxuY29uc3QgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZSA9IGNvbWJpbmVFeHRyYWN0b3JzKFxuICBleHRyYWN0SVNPVGltZSxcbiAgZXh0cmFjdElTT09mZnNldCxcbiAgZXh0cmFjdElBTkFab25lXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VTUUwocykge1xuICByZXR1cm4gcGFyc2UoXG4gICAgcyxcbiAgICBbc3FsWW1kV2l0aFRpbWVFeHRlbnNpb25SZWdleCwgZXh0cmFjdElTT1ltZFRpbWVBbmRPZmZzZXRdLFxuICAgIFtzcWxUaW1lQ29tYmluZWRSZWdleCwgZXh0cmFjdElTT1RpbWVPZmZzZXRBbmRJQU5BWm9uZV1cbiAgKTtcbn1cbiIsICJpbXBvcnQgeyBJbnZhbGlkQXJndW1lbnRFcnJvciwgSW52YWxpZER1cmF0aW9uRXJyb3IsIEludmFsaWRVbml0RXJyb3IgfSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vaW1wbC9mb3JtYXR0ZXIuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ltcGwvaW52YWxpZC5qc1wiO1xuaW1wb3J0IExvY2FsZSBmcm9tIFwiLi9pbXBsL2xvY2FsZS5qc1wiO1xuaW1wb3J0IHsgcGFyc2VJU09EdXJhdGlvbiwgcGFyc2VJU09UaW1lT25seSB9IGZyb20gXCIuL2ltcGwvcmVnZXhQYXJzZXIuanNcIjtcbmltcG9ydCB7XG4gIGFzTnVtYmVyLFxuICBoYXNPd25Qcm9wZXJ0eSxcbiAgaXNOdW1iZXIsXG4gIGlzVW5kZWZpbmVkLFxuICBub3JtYWxpemVPYmplY3QsXG4gIHJvdW5kVG8sXG59IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4vZGF0ZXRpbWUuanNcIjtcblxuY29uc3QgSU5WQUxJRCA9IFwiSW52YWxpZCBEdXJhdGlvblwiO1xuXG4vLyB1bml0IGNvbnZlcnNpb24gY29uc3RhbnRzXG5leHBvcnQgY29uc3QgbG93T3JkZXJNYXRyaXggPSB7XG4gICAgd2Vla3M6IHtcbiAgICAgIGRheXM6IDcsXG4gICAgICBob3VyczogNyAqIDI0LFxuICAgICAgbWludXRlczogNyAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIGRheXM6IHtcbiAgICAgIGhvdXJzOiAyNCxcbiAgICAgIG1pbnV0ZXM6IDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBob3VyczogeyBtaW51dGVzOiA2MCwgc2Vjb25kczogNjAgKiA2MCwgbWlsbGlzZWNvbmRzOiA2MCAqIDYwICogMTAwMCB9LFxuICAgIG1pbnV0ZXM6IHsgc2Vjb25kczogNjAsIG1pbGxpc2Vjb25kczogNjAgKiAxMDAwIH0sXG4gICAgc2Vjb25kczogeyBtaWxsaXNlY29uZHM6IDEwMDAgfSxcbiAgfSxcbiAgY2FzdWFsTWF0cml4ID0ge1xuICAgIHllYXJzOiB7XG4gICAgICBxdWFydGVyczogNCxcbiAgICAgIG1vbnRoczogMTIsXG4gICAgICB3ZWVrczogNTIsXG4gICAgICBkYXlzOiAzNjUsXG4gICAgICBob3VyczogMzY1ICogMjQsXG4gICAgICBtaW51dGVzOiAzNjUgKiAyNCAqIDYwLFxuICAgICAgc2Vjb25kczogMzY1ICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiAzNjUgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgcXVhcnRlcnM6IHtcbiAgICAgIG1vbnRoczogMyxcbiAgICAgIHdlZWtzOiAxMyxcbiAgICAgIGRheXM6IDkxLFxuICAgICAgaG91cnM6IDkxICogMjQsXG4gICAgICBtaW51dGVzOiA5MSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiA5MSAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogOTEgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG4gICAgbW9udGhzOiB7XG4gICAgICB3ZWVrczogNCxcbiAgICAgIGRheXM6IDMwLFxuICAgICAgaG91cnM6IDMwICogMjQsXG4gICAgICBtaW51dGVzOiAzMCAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiAzMCAqIDI0ICogNjAgKiA2MCxcbiAgICAgIG1pbGxpc2Vjb25kczogMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgIH0sXG5cbiAgICAuLi5sb3dPcmRlck1hdHJpeCxcbiAgfSxcbiAgZGF5c0luWWVhckFjY3VyYXRlID0gMTQ2MDk3LjAgLyA0MDAsXG4gIGRheXNJbk1vbnRoQWNjdXJhdGUgPSAxNDYwOTcuMCAvIDQ4MDAsXG4gIGFjY3VyYXRlTWF0cml4ID0ge1xuICAgIHllYXJzOiB7XG4gICAgICBxdWFydGVyczogNCxcbiAgICAgIG1vbnRoczogMTIsXG4gICAgICB3ZWVrczogZGF5c0luWWVhckFjY3VyYXRlIC8gNyxcbiAgICAgIGRheXM6IGRheXNJblllYXJBY2N1cmF0ZSxcbiAgICAgIGhvdXJzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCxcbiAgICAgIG1pbnV0ZXM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiBkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAsXG4gICAgICBtaWxsaXNlY29uZHM6IGRheXNJblllYXJBY2N1cmF0ZSAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgfSxcbiAgICBxdWFydGVyczoge1xuICAgICAgbW9udGhzOiAzLFxuICAgICAgd2Vla3M6IGRheXNJblllYXJBY2N1cmF0ZSAvIDI4LFxuICAgICAgZGF5czogZGF5c0luWWVhckFjY3VyYXRlIC8gNCxcbiAgICAgIGhvdXJzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQpIC8gNCxcbiAgICAgIG1pbnV0ZXM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwKSAvIDQsXG4gICAgICBzZWNvbmRzOiAoZGF5c0luWWVhckFjY3VyYXRlICogMjQgKiA2MCAqIDYwKSAvIDQsXG4gICAgICBtaWxsaXNlY29uZHM6IChkYXlzSW5ZZWFyQWNjdXJhdGUgKiAyNCAqIDYwICogNjAgKiAxMDAwKSAvIDQsXG4gICAgfSxcbiAgICBtb250aHM6IHtcbiAgICAgIHdlZWtzOiBkYXlzSW5Nb250aEFjY3VyYXRlIC8gNyxcbiAgICAgIGRheXM6IGRheXNJbk1vbnRoQWNjdXJhdGUsXG4gICAgICBob3VyczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0LFxuICAgICAgbWludXRlczogZGF5c0luTW9udGhBY2N1cmF0ZSAqIDI0ICogNjAsXG4gICAgICBzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwLFxuICAgICAgbWlsbGlzZWNvbmRzOiBkYXlzSW5Nb250aEFjY3VyYXRlICogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB9LFxuICAgIC4uLmxvd09yZGVyTWF0cml4LFxuICB9O1xuXG4vLyB1bml0cyBvcmRlcmVkIGJ5IHNpemVcbmNvbnN0IG9yZGVyZWRVbml0cyA9IFtcbiAgXCJ5ZWFyc1wiLFxuICBcInF1YXJ0ZXJzXCIsXG4gIFwibW9udGhzXCIsXG4gIFwid2Vla3NcIixcbiAgXCJkYXlzXCIsXG4gIFwiaG91cnNcIixcbiAgXCJtaW51dGVzXCIsXG4gIFwic2Vjb25kc1wiLFxuICBcIm1pbGxpc2Vjb25kc1wiLFxuXTtcblxuY29uc3QgcmV2ZXJzZVVuaXRzID0gb3JkZXJlZFVuaXRzLnNsaWNlKDApLnJldmVyc2UoKTtcblxuLy8gY2xvbmUgcmVhbGx5IG1lYW5zIFwiY3JlYXRlIGFub3RoZXIgaW5zdGFuY2UganVzdCBsaWtlIHRoaXMgb25lLCBidXQgd2l0aCB0aGVzZSBjaGFuZ2VzXCJcbmZ1bmN0aW9uIGNsb25lKGR1ciwgYWx0cywgY2xlYXIgPSBmYWxzZSkge1xuICAvLyBkZWVwIG1lcmdlIGZvciB2YWxzXG4gIGNvbnN0IGNvbmYgPSB7XG4gICAgdmFsdWVzOiBjbGVhciA/IGFsdHMudmFsdWVzIDogeyAuLi5kdXIudmFsdWVzLCAuLi4oYWx0cy52YWx1ZXMgfHwge30pIH0sXG4gICAgbG9jOiBkdXIubG9jLmNsb25lKGFsdHMubG9jKSxcbiAgICBjb252ZXJzaW9uQWNjdXJhY3k6IGFsdHMuY29udmVyc2lvbkFjY3VyYWN5IHx8IGR1ci5jb252ZXJzaW9uQWNjdXJhY3ksXG4gICAgbWF0cml4OiBhbHRzLm1hdHJpeCB8fCBkdXIubWF0cml4LFxuICB9O1xuICByZXR1cm4gbmV3IER1cmF0aW9uKGNvbmYpO1xufVxuXG5mdW5jdGlvbiBkdXJhdGlvblRvTWlsbGlzKG1hdHJpeCwgdmFscykge1xuICBsZXQgc3VtID0gdmFscy5taWxsaXNlY29uZHMgPz8gMDtcbiAgZm9yIChjb25zdCB1bml0IG9mIHJldmVyc2VVbml0cy5zbGljZSgxKSkge1xuICAgIGlmICh2YWxzW3VuaXRdKSB7XG4gICAgICBzdW0gKz0gdmFsc1t1bml0XSAqIG1hdHJpeFt1bml0XVtcIm1pbGxpc2Vjb25kc1wiXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN1bTtcbn1cblxuLy8gTkI6IG11dGF0ZXMgcGFyYW1ldGVyc1xuZnVuY3Rpb24gbm9ybWFsaXplVmFsdWVzKG1hdHJpeCwgdmFscykge1xuICAvLyB0aGUgbG9naWMgYmVsb3cgYXNzdW1lcyB0aGUgb3ZlcmFsbCB2YWx1ZSBvZiB0aGUgZHVyYXRpb24gaXMgcG9zaXRpdmVcbiAgLy8gaWYgdGhpcyBpcyBub3QgdGhlIGNhc2UsIGZhY3RvciBpcyB1c2VkIHRvIG1ha2UgaXQgc29cbiAgY29uc3QgZmFjdG9yID0gZHVyYXRpb25Ub01pbGxpcyhtYXRyaXgsIHZhbHMpIDwgMCA/IC0xIDogMTtcblxuICBvcmRlcmVkVW5pdHMucmVkdWNlUmlnaHQoKHByZXZpb3VzLCBjdXJyZW50KSA9PiB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh2YWxzW2N1cnJlbnRdKSkge1xuICAgICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzVmFsID0gdmFsc1twcmV2aW91c10gKiBmYWN0b3I7XG4gICAgICAgIGNvbnN0IGNvbnYgPSBtYXRyaXhbY3VycmVudF1bcHJldmlvdXNdO1xuXG4gICAgICAgIC8vIGlmIChwcmV2aW91c1ZhbCA8IDApOlxuICAgICAgICAvLyBsb3dlciBvcmRlciB1bml0IGlzIG5lZ2F0aXZlIChlLmcuIHsgeWVhcnM6IDIsIGRheXM6IC0yIH0pXG4gICAgICAgIC8vIG5vcm1hbGl6ZSB0aGlzIGJ5IHJlZHVjaW5nIHRoZSBoaWdoZXIgb3JkZXIgdW5pdCBieSB0aGUgYXBwcm9wcmlhdGUgYW1vdW50XG4gICAgICAgIC8vIGFuZCBpbmNyZWFzaW5nIHRoZSBsb3dlciBvcmRlciB1bml0XG4gICAgICAgIC8vIHRoaXMgY2FuIG5ldmVyIG1ha2UgdGhlIGhpZ2hlciBvcmRlciB1bml0IG5lZ2F0aXZlLCBiZWNhdXNlIHRoaXMgZnVuY3Rpb24gb25seSBvcGVyYXRlc1xuICAgICAgICAvLyBvbiBwb3NpdGl2ZSBkdXJhdGlvbnMsIHNvIHRoZSBhbW91bnQgb2YgdGltZSByZXByZXNlbnRlZCBieSB0aGUgbG93ZXIgb3JkZXIgdW5pdCBjYW5ub3RcbiAgICAgICAgLy8gYmUgbGFyZ2VyIHRoYW4gdGhlIGhpZ2hlciBvcmRlciB1bml0XG4gICAgICAgIC8vIGVsc2U6XG4gICAgICAgIC8vIGxvd2VyIG9yZGVyIHVuaXQgaXMgcG9zaXRpdmUgKGUuZy4geyB5ZWFyczogMiwgZGF5czogNDUwIH0gb3IgeyB5ZWFyczogLTIsIGRheXM6IDQ1MCB9KVxuICAgICAgICAvLyBpbiB0aGlzIGNhc2Ugd2UgYXR0ZW1wdCB0byBjb252ZXJ0IGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgbG93ZXIgb3JkZXIgdW5pdCBpbnRvXG4gICAgICAgIC8vIHRoZSBoaWdoZXIgb3JkZXIgb25lXG4gICAgICAgIC8vXG4gICAgICAgIC8vIE1hdGguZmxvb3IgdGFrZXMgY2FyZSBvZiBib3RoIG9mIHRoZXNlIGNhc2VzLCByb3VuZGluZyBhd2F5IGZyb20gMFxuICAgICAgICAvLyBpZiBwcmV2aW91c1ZhbCA8IDAgaXQgbWFrZXMgdGhlIGFic29sdXRlIHZhbHVlIGxhcmdlclxuICAgICAgICAvLyBpZiBwcmV2aW91c1ZhbCA+PSBpdCBtYWtlcyB0aGUgYWJzb2x1dGUgdmFsdWUgc21hbGxlclxuICAgICAgICBjb25zdCByb2xsVXAgPSBNYXRoLmZsb29yKHByZXZpb3VzVmFsIC8gY29udik7XG4gICAgICAgIHZhbHNbY3VycmVudF0gKz0gcm9sbFVwICogZmFjdG9yO1xuICAgICAgICB2YWxzW3ByZXZpb3VzXSAtPSByb2xsVXAgKiBjb252ICogZmFjdG9yO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGN1cnJlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcmV2aW91cztcbiAgICB9XG4gIH0sIG51bGwpO1xuXG4gIC8vIHRyeSB0byBjb252ZXJ0IGFueSBkZWNpbWFscyBpbnRvIHNtYWxsZXIgdW5pdHMgaWYgcG9zc2libGVcbiAgLy8gZm9yIGV4YW1wbGUgZm9yIHsgeWVhcnM6IDIuNSwgZGF5czogMCwgc2Vjb25kczogMCB9IHdlIHdhbnQgdG8gZ2V0IHsgeWVhcnM6IDIsIGRheXM6IDE4MiwgaG91cnM6IDEyIH1cbiAgb3JkZXJlZFVuaXRzLnJlZHVjZSgocHJldmlvdXMsIGN1cnJlbnQpID0+IHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHZhbHNbY3VycmVudF0pKSB7XG4gICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgY29uc3QgZnJhY3Rpb24gPSB2YWxzW3ByZXZpb3VzXSAlIDE7XG4gICAgICAgIHZhbHNbcHJldmlvdXNdIC09IGZyYWN0aW9uO1xuICAgICAgICB2YWxzW2N1cnJlbnRdICs9IGZyYWN0aW9uICogbWF0cml4W3ByZXZpb3VzXVtjdXJyZW50XTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcHJldmlvdXM7XG4gICAgfVxuICB9LCBudWxsKTtcbn1cblxuLy8gUmVtb3ZlIGFsbCBwcm9wZXJ0aWVzIHdpdGggYSB2YWx1ZSBvZiAwIGZyb20gYW4gb2JqZWN0XG5mdW5jdGlvbiByZW1vdmVaZXJvZXModmFscykge1xuICBjb25zdCBuZXdWYWxzID0ge307XG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHZhbHMpKSB7XG4gICAgaWYgKHZhbHVlICE9PSAwKSB7XG4gICAgICBuZXdWYWxzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld1ZhbHM7XG59XG5cbi8qKlxuICogQSBEdXJhdGlvbiBvYmplY3QgcmVwcmVzZW50cyBhIHBlcmlvZCBvZiB0aW1lLCBsaWtlIFwiMiBtb250aHNcIiBvciBcIjEgZGF5LCAxIGhvdXJcIi4gQ29uY2VwdHVhbGx5LCBpdCdzIGp1c3QgYSBtYXAgb2YgdW5pdHMgdG8gdGhlaXIgcXVhbnRpdGllcywgYWNjb21wYW5pZWQgYnkgc29tZSBhZGRpdGlvbmFsIGNvbmZpZ3VyYXRpb24gYW5kIG1ldGhvZHMgZm9yIGNyZWF0aW5nLCBwYXJzaW5nLCBpbnRlcnJvZ2F0aW5nLCB0cmFuc2Zvcm1pbmcsIGFuZCBmb3JtYXR0aW5nIHRoZW0uIFRoZXkgY2FuIGJlIHVzZWQgb24gdGhlaXIgb3duIG9yIGluIGNvbmp1bmN0aW9uIHdpdGggb3RoZXIgTHV4b24gdHlwZXM7IGZvciBleGFtcGxlLCB5b3UgY2FuIHVzZSB7QGxpbmsgRGF0ZVRpbWUjcGx1c30gdG8gYWRkIGEgRHVyYXRpb24gb2JqZWN0IHRvIGEgRGF0ZVRpbWUsIHByb2R1Y2luZyBhbm90aGVyIERhdGVUaW1lLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiBjb21tb25seSB1c2VkIG1ldGhvZHMgYW5kIGdldHRlcnMgaW4gRHVyYXRpb246XG4gKlxuICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGEgRHVyYXRpb24sIHVzZSB7QGxpbmsgRHVyYXRpb24uZnJvbU1pbGxpc30sIHtAbGluayBEdXJhdGlvbi5mcm9tT2JqZWN0fSwgb3Ige0BsaW5rIER1cmF0aW9uLmZyb21JU099LlxuICogKiAqKlVuaXQgdmFsdWVzKiogU2VlIHRoZSB7QGxpbmsgRHVyYXRpb24jeWVhcnN9LCB7QGxpbmsgRHVyYXRpb24jbW9udGhzfSwge0BsaW5rIER1cmF0aW9uI3dlZWtzfSwge0BsaW5rIER1cmF0aW9uI2RheXN9LCB7QGxpbmsgRHVyYXRpb24jaG91cnN9LCB7QGxpbmsgRHVyYXRpb24jbWludXRlc30sIHtAbGluayBEdXJhdGlvbiNzZWNvbmRzfSwge0BsaW5rIER1cmF0aW9uI21pbGxpc2Vjb25kc30gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgIHtAbGluayBEdXJhdGlvbiNsb2NhbGV9IGFuZCB7QGxpbmsgRHVyYXRpb24jbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKiBUbyBjcmVhdGUgbmV3IER1cmF0aW9ucyBvdXQgb2Ygb2xkIG9uZXMgdXNlIHtAbGluayBEdXJhdGlvbiNwbHVzfSwge0BsaW5rIER1cmF0aW9uI21pbnVzfSwge0BsaW5rIER1cmF0aW9uI25vcm1hbGl6ZX0sIHtAbGluayBEdXJhdGlvbiNzZXR9LCB7QGxpbmsgRHVyYXRpb24jcmVjb25maWd1cmV9LCB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30sIGFuZCB7QGxpbmsgRHVyYXRpb24jbmVnYXRlfS5cbiAqICogKipPdXRwdXQqKiBUbyBjb252ZXJ0IHRoZSBEdXJhdGlvbiBpbnRvIG90aGVyIHJlcHJlc2VudGF0aW9ucywgc2VlIHtAbGluayBEdXJhdGlvbiNhc30sIHtAbGluayBEdXJhdGlvbiN0b0lTT30sIHtAbGluayBEdXJhdGlvbiN0b0Zvcm1hdH0sIGFuZCB7QGxpbmsgRHVyYXRpb24jdG9KU09OfVxuICpcbiAqIFRoZXJlJ3MgYXJlIG1vcmUgbWV0aG9kcyBkb2N1bWVudGVkIGJlbG93LiBJbiBhZGRpdGlvbiwgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gc3VidGxlciB0b3BpY3MgbGlrZSBpbnRlcm5hdGlvbmFsaXphdGlvbiBhbmQgdmFsaWRpdHksIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHVyYXRpb24ge1xuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgIGNvbnN0IGFjY3VyYXRlID0gY29uZmlnLmNvbnZlcnNpb25BY2N1cmFjeSA9PT0gXCJsb25ndGVybVwiIHx8IGZhbHNlO1xuICAgIGxldCBtYXRyaXggPSBhY2N1cmF0ZSA/IGFjY3VyYXRlTWF0cml4IDogY2FzdWFsTWF0cml4O1xuXG4gICAgaWYgKGNvbmZpZy5tYXRyaXgpIHtcbiAgICAgIG1hdHJpeCA9IGNvbmZpZy5tYXRyaXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy52YWx1ZXMgPSBjb25maWcudmFsdWVzO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9jID0gY29uZmlnLmxvYyB8fCBMb2NhbGUuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jb252ZXJzaW9uQWNjdXJhY3kgPSBhY2N1cmF0ZSA/IFwibG9uZ3Rlcm1cIiA6IFwiY2FzdWFsXCI7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlzTHV4b25EdXJhdGlvbiA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIER1cmF0aW9uIGZyb20gYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gY291bnQgb2YgbWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tTWlsbGlzKGNvdW50LCBvcHRzKSB7XG4gICAgcmV0dXJuIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaWxsaXNlY29uZHM6IGNvdW50IH0sIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIER1cmF0aW9uIGZyb20gYSBKYXZhU2NyaXB0IG9iamVjdCB3aXRoIGtleXMgbGlrZSAneWVhcnMnIGFuZCAnaG91cnMnLlxuICAgKiBJZiB0aGlzIG9iamVjdCBpcyBlbXB0eSB0aGVuIGEgemVybyBtaWxsaXNlY29uZHMgZHVyYXRpb24gaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSB0aGUgb2JqZWN0IHRvIGNyZWF0ZSB0aGUgRGF0ZVRpbWUgZnJvbVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLnllYXJzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoucXVhcnRlcnNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aHNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmRheXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5ob3Vyc1xuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbnV0ZXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubWlsbGlzZWNvbmRzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cz1bXV0gLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J2VuLVVTJ10gLSB0aGUgbG9jYWxlIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgcHJlc2V0IGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubWF0cml4PU9iamVjdF0gLSB0aGUgY3VzdG9tIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tT2JqZWN0KG9iaiwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgICAgYER1cmF0aW9uLmZyb21PYmplY3Q6IGFyZ3VtZW50IGV4cGVjdGVkIHRvIGJlIGFuIG9iamVjdCwgZ290ICR7XG4gICAgICAgICAgb2JqID09PSBudWxsID8gXCJudWxsXCIgOiB0eXBlb2Ygb2JqXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRHVyYXRpb24oe1xuICAgICAgdmFsdWVzOiBub3JtYWxpemVPYmplY3Qob2JqLCBEdXJhdGlvbi5ub3JtYWxpemVVbml0KSxcbiAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0cyksXG4gICAgICBjb252ZXJzaW9uQWNjdXJhY3k6IG9wdHMuY29udmVyc2lvbkFjY3VyYWN5LFxuICAgICAgbWF0cml4OiBvcHRzLm1hdHJpeCxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIER1cmF0aW9uTGlrZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3QgfCBudW1iZXIgfCBEdXJhdGlvbn0gZHVyYXRpb25MaWtlXG4gICAqIE9uZSBvZjpcbiAgICogLSBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXJzJyBhbmQgJ2hvdXJzJy5cbiAgICogLSBudW1iZXIgcmVwcmVzZW50aW5nIG1pbGxpc2Vjb25kc1xuICAgKiAtIER1cmF0aW9uIGluc3RhbmNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb25MaWtlKSB7XG4gICAgaWYgKGlzTnVtYmVyKGR1cmF0aW9uTGlrZSkpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tTWlsbGlzKGR1cmF0aW9uTGlrZSk7XG4gICAgfSBlbHNlIGlmIChEdXJhdGlvbi5pc0R1cmF0aW9uKGR1cmF0aW9uTGlrZSkpIHtcbiAgICAgIHJldHVybiBkdXJhdGlvbkxpa2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZHVyYXRpb25MaWtlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChkdXJhdGlvbkxpa2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgIGBVbmtub3duIGR1cmF0aW9uIGFyZ3VtZW50ICR7ZHVyYXRpb25MaWtlfSBvZiB0eXBlICR7dHlwZW9mIGR1cmF0aW9uTGlrZX1gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEdXJhdGlvbiBmcm9tIGFuIElTTyA4NjAxIGR1cmF0aW9uIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9JU09fODYwMSNEdXJhdGlvbnNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTTygnUDNZNk0xVzREVDEySDMwTTVTJykudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDMsIG1vbnRoczogNiwgd2Vla3M6IDEsIGRheXM6IDQsIGhvdXJzOiAxMiwgbWludXRlczogMzAsIHNlY29uZHM6IDUgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPKCdQVDIzSCcpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAyMyB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU08oJ1A1WTNNJykudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDUsIG1vbnRoczogMyB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIGNvbnN0IFtwYXJzZWRdID0gcGFyc2VJU09EdXJhdGlvbih0ZXh0KTtcbiAgICBpZiAocGFyc2VkKSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uZnJvbU9iamVjdChwYXJzZWQsIG9wdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gRHVyYXRpb24uaW52YWxpZChcInVucGFyc2FibGVcIiwgYHRoZSBpbnB1dCBcIiR7dGV4dH1cIiBjYW4ndCBiZSBwYXJzZWQgYXMgSVNPIDg2MDFgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRHVyYXRpb24gZnJvbSBhbiBJU08gODYwMSB0aW1lIHN0cmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0ZXh0IHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyBmb3IgcGFyc2luZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gdGhlIGxvY2FsZSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIHByZXNldCBjb252ZXJzaW9uIHN5c3RlbSB0byB1c2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm1hdHJpeD1PYmplY3RdIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21JU09UaW1lKCcxMToyMjozMy40NDQnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDIyLCBzZWNvbmRzOiAzMywgbWlsbGlzZWNvbmRzOiA0NDQgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnMTE6MDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExOjAwJykudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IDExLCBtaW51dGVzOiAwLCBzZWNvbmRzOiAwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbUlTT1RpbWUoJzExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tSVNPVGltZSgnVDExMDAnKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDAsIHNlY29uZHM6IDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPVGltZSh0ZXh0LCBvcHRzKSB7XG4gICAgY29uc3QgW3BhcnNlZF0gPSBwYXJzZUlTT1RpbWVPbmx5KHRleHQpO1xuICAgIGlmIChwYXJzZWQpIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5mcm9tT2JqZWN0KHBhcnNlZCwgb3B0cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBEdXJhdGlvbi5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgZGF0ZXRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2V4cGxhbmF0aW9uPW51bGxdIC0gbG9uZ2VyIGV4cGxhbmF0aW9uLCBtYXkgaW5jbHVkZSBwYXJhbWV0ZXJzIGFuZCBvdGhlciB1c2VmdWwgZGVidWdnaW5nIGluZm9ybWF0aW9uXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc3RhdGljIGludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbiA9IG51bGwpIHtcbiAgICBpZiAoIXJlYXNvbikge1xuICAgICAgdGhyb3cgbmV3IEludmFsaWRBcmd1bWVudEVycm9yKFwibmVlZCB0byBzcGVjaWZ5IGEgcmVhc29uIHRoZSBEdXJhdGlvbiBpcyBpbnZhbGlkXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSByZWFzb24gaW5zdGFuY2VvZiBJbnZhbGlkID8gcmVhc29uIDogbmV3IEludmFsaWQocmVhc29uLCBleHBsYW5hdGlvbik7XG5cbiAgICBpZiAoU2V0dGluZ3MudGhyb3dPbkludmFsaWQpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkRHVyYXRpb25FcnJvcihpbnZhbGlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEdXJhdGlvbih7IGludmFsaWQgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgbm9ybWFsaXplVW5pdCh1bml0KSB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHtcbiAgICAgIHllYXI6IFwieWVhcnNcIixcbiAgICAgIHllYXJzOiBcInllYXJzXCIsXG4gICAgICBxdWFydGVyOiBcInF1YXJ0ZXJzXCIsXG4gICAgICBxdWFydGVyczogXCJxdWFydGVyc1wiLFxuICAgICAgbW9udGg6IFwibW9udGhzXCIsXG4gICAgICBtb250aHM6IFwibW9udGhzXCIsXG4gICAgICB3ZWVrOiBcIndlZWtzXCIsXG4gICAgICB3ZWVrczogXCJ3ZWVrc1wiLFxuICAgICAgZGF5OiBcImRheXNcIixcbiAgICAgIGRheXM6IFwiZGF5c1wiLFxuICAgICAgaG91cjogXCJob3Vyc1wiLFxuICAgICAgaG91cnM6IFwiaG91cnNcIixcbiAgICAgIG1pbnV0ZTogXCJtaW51dGVzXCIsXG4gICAgICBtaW51dGVzOiBcIm1pbnV0ZXNcIixcbiAgICAgIHNlY29uZDogXCJzZWNvbmRzXCIsXG4gICAgICBzZWNvbmRzOiBcInNlY29uZHNcIixcbiAgICAgIG1pbGxpc2Vjb25kOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgICAgbWlsbGlzZWNvbmRzOiBcIm1pbGxpc2Vjb25kc1wiLFxuICAgIH1bdW5pdCA/IHVuaXQudG9Mb3dlckNhc2UoKSA6IHVuaXRdO1xuXG4gICAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcblxuICAgIHJldHVybiBub3JtYWxpemVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhIER1cmF0aW9uLiBXb3JrcyBhY3Jvc3MgY29udGV4dCBib3VuZGFyaWVzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNEdXJhdGlvbihvKSB7XG4gICAgcmV0dXJuIChvICYmIG8uaXNMdXhvbkR1cmF0aW9uKSB8fCBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgIHRoZSBsb2NhbGUgb2YgYSBEdXJhdGlvbiwgc3VjaCAnZW4tR0InXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbG9jYWxlKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5sb2NhbGUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbnVtYmVyaW5nIHN5c3RlbSBvZiBhIER1cmF0aW9uLCBzdWNoICdiZW5nJy4gVGhlIG51bWJlcmluZyBzeXN0ZW0gaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIER1cmF0aW9uXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbnVtYmVyaW5nU3lzdGVtKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmxvYy5udW1iZXJpbmdTeXN0ZW0gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy4gWW91IG1heSB1c2UgdGhlc2UgdG9rZW5zOlxuICAgKiAqIGBTYCBmb3IgbWlsbGlzZWNvbmRzXG4gICAqICogYHNgIGZvciBzZWNvbmRzXG4gICAqICogYG1gIGZvciBtaW51dGVzXG4gICAqICogYGhgIGZvciBob3Vyc1xuICAgKiAqIGBkYCBmb3IgZGF5c1xuICAgKiAqIGB3YCBmb3Igd2Vla3NcbiAgICogKiBgTWAgZm9yIG1vbnRoc1xuICAgKiAqIGB5YCBmb3IgeWVhcnNcbiAgICogTm90ZXM6XG4gICAqICogQWRkIHBhZGRpbmcgYnkgcmVwZWF0aW5nIHRoZSB0b2tlbiwgZS5nLiBcInl5XCIgcGFkcyB0aGUgeWVhcnMgdG8gdHdvIGRpZ2l0cywgXCJoaGhoXCIgcGFkcyB0aGUgaG91cnMgb3V0IHRvIGZvdXIgZGlnaXRzXG4gICAqICogVG9rZW5zIGNhbiBiZSBlc2NhcGVkIGJ5IHdyYXBwaW5nIHdpdGggc2luZ2xlIHF1b3Rlcy5cbiAgICogKiBUaGUgZHVyYXRpb24gd2lsbCBiZSBjb252ZXJ0ZWQgdG8gdGhlIHNldCBvZiB1bml0cyBpbiB0aGUgZm9ybWF0IHN0cmluZyB1c2luZyB7QGxpbmsgRHVyYXRpb24jc2hpZnRUb30gYW5kIHRoZSBEdXJhdGlvbnMncyBjb252ZXJzaW9uIGFjY3VyYWN5IHNldHRpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmbXQgLSB0aGUgZm9ybWF0IHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5mbG9vcj10cnVlXSAtIGZsb29yIG51bWVyaWNhbCB2YWx1ZXNcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieSBkIHNcIikgLy89PiBcIjEgNiAyXCJcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAxLCBkYXlzOiA2LCBzZWNvbmRzOiAyIH0pLnRvRm9ybWF0KFwieXkgZGQgc3NzXCIpIC8vPT4gXCIwMSAwNiAwMDJcIlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9Gb3JtYXQoXCJNIFNcIikgLy89PiBcIjEyIDUxODQwMjAwMFwiXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvRm9ybWF0KGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgLy8gcmV2ZXJzZS1jb21wYXQgc2luY2UgMS4yOyB3ZSBhbHdheXMgcm91bmQgZG93biBub3csIG5ldmVyIHVwLCBhbmQgd2UgZG8gaXQgYnkgZGVmYXVsdFxuICAgIGNvbnN0IGZtdE9wdHMgPSB7XG4gICAgICAuLi5vcHRzLFxuICAgICAgZmxvb3I6IG9wdHMucm91bmQgIT09IGZhbHNlICYmIG9wdHMuZmxvb3IgIT09IGZhbHNlLFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyBGb3JtYXR0ZXIuY3JlYXRlKHRoaXMubG9jLCBmbXRPcHRzKS5mb3JtYXREdXJhdGlvbkZyb21TdHJpbmcodGhpcywgZm10KVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBEdXJhdGlvbiB3aXRoIGFsbCB1bml0cyBpbmNsdWRlZC5cbiAgICogVG8gbW9kaWZ5IGl0cyBiZWhhdmlvciwgdXNlIGBsaXN0U3R5bGVgIGFuZCBhbnkgSW50bC5OdW1iZXJGb3JtYXQgb3B0aW9uLCB0aG91Z2ggYHVuaXREaXNwbGF5YCBpcyBlc3BlY2lhbGx5IHJlbGV2YW50LlxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0ludGwvTnVtYmVyRm9ybWF0L051bWJlckZvcm1hdCNvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gRm9ybWF0dGluZyBvcHRpb25zLiBBY2NlcHRzIHRoZSBzYW1lIGtleXMgYXMgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludGwuTnVtYmVyRm9ybWF0YCBjb25zdHJ1Y3RvciwgYXMgd2VsbCBhcyBgbGlzdFN0eWxlYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxpc3RTdHlsZT0nbmFycm93J10gLSBIb3cgdG8gZm9ybWF0IHRoZSBtZXJnZWQgbGlzdC4gQ29ycmVzcG9uZHMgdG8gdGhlIGBzdHlsZWAgcHJvcGVydHkgb2YgdGhlIG9wdGlvbnMgcGFyYW1ldGVyIG9mIHRoZSBuYXRpdmUgYEludGwuTGlzdEZvcm1hdGAgY29uc3RydWN0b3IuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIHZhciBkdXIgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgZGF5czogMSwgaG91cnM6IDUsIG1pbnV0ZXM6IDYgfSlcbiAgICogZHVyLnRvSHVtYW4oKSAvLz0+ICcxIGRheSwgNSBob3VycywgNiBtaW51dGVzJ1xuICAgKiBkdXIudG9IdW1hbih7IGxpc3RTdHlsZTogXCJsb25nXCIgfSkgLy89PiAnMSBkYXksIDUgaG91cnMsIGFuZCA2IG1pbnV0ZXMnXG4gICAqIGR1ci50b0h1bWFuKHsgdW5pdERpc3BsYXk6IFwic2hvcnRcIiB9KSAvLz0+ICcxIGRheSwgNSBociwgNiBtaW4nXG4gICAqIGBgYFxuICAgKi9cbiAgdG9IdW1hbihvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG5cbiAgICBjb25zdCBsID0gb3JkZXJlZFVuaXRzXG4gICAgICAubWFwKCh1bml0KSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IHRoaXMudmFsdWVzW3VuaXRdO1xuICAgICAgICBpZiAoaXNVbmRlZmluZWQodmFsKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxvY1xuICAgICAgICAgIC5udW1iZXJGb3JtYXR0ZXIoeyBzdHlsZTogXCJ1bml0XCIsIHVuaXREaXNwbGF5OiBcImxvbmdcIiwgLi4ub3B0cywgdW5pdDogdW5pdC5zbGljZSgwLCAtMSkgfSlcbiAgICAgICAgICAuZm9ybWF0KHZhbCk7XG4gICAgICB9KVxuICAgICAgLmZpbHRlcigobikgPT4gbik7XG5cbiAgICByZXR1cm4gdGhpcy5sb2NcbiAgICAgIC5saXN0Rm9ybWF0dGVyKHsgdHlwZTogXCJjb25qdW5jdGlvblwiLCBzdHlsZTogb3B0cy5saXN0U3R5bGUgfHwgXCJuYXJyb3dcIiwgLi4ub3B0cyB9KVxuICAgICAgLmZvcm1hdChsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIER1cmF0aW9uJ3MgdmFsdWVzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfSkudG9PYmplY3QoKSAvLz0+IHsgeWVhcnM6IDEsIGRheXM6IDYsIHNlY29uZHM6IDIgfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICB0b09iamVjdCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuICAgIHJldHVybiB7IC4uLnRoaXMudmFsdWVzIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24uXG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDEjRHVyYXRpb25zXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyB5ZWFyczogMywgc2Vjb25kczogNDUgfSkudG9JU08oKSAvLz0+ICdQM1lUNDVTJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgbW9udGhzOiA0LCBzZWNvbmRzOiA0NSB9KS50b0lTTygpIC8vPT4gJ1A0TVQ0NVMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtb250aHM6IDUgfSkudG9JU08oKSAvLz0+ICdQNU0nXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBtaW51dGVzOiA1IH0pLnRvSVNPKCkgLy89PiAnUFQ1TSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogNiB9KS50b0lTTygpIC8vPT4gJ1BUMC4wMDZTJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTTygpIHtcbiAgICAvLyB3ZSBjb3VsZCB1c2UgdGhlIGZvcm1hdHRlciwgYnV0IHRoaXMgaXMgYW4gZWFzaWVyIHdheSB0byBnZXQgdGhlIG1pbmltdW0gc3RyaW5nXG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBudWxsO1xuXG4gICAgbGV0IHMgPSBcIlBcIjtcbiAgICBpZiAodGhpcy55ZWFycyAhPT0gMCkgcyArPSB0aGlzLnllYXJzICsgXCJZXCI7XG4gICAgaWYgKHRoaXMubW9udGhzICE9PSAwIHx8IHRoaXMucXVhcnRlcnMgIT09IDApIHMgKz0gdGhpcy5tb250aHMgKyB0aGlzLnF1YXJ0ZXJzICogMyArIFwiTVwiO1xuICAgIGlmICh0aGlzLndlZWtzICE9PSAwKSBzICs9IHRoaXMud2Vla3MgKyBcIldcIjtcbiAgICBpZiAodGhpcy5kYXlzICE9PSAwKSBzICs9IHRoaXMuZGF5cyArIFwiRFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwIHx8IHRoaXMubWludXRlcyAhPT0gMCB8fCB0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApXG4gICAgICBzICs9IFwiVFwiO1xuICAgIGlmICh0aGlzLmhvdXJzICE9PSAwKSBzICs9IHRoaXMuaG91cnMgKyBcIkhcIjtcbiAgICBpZiAodGhpcy5taW51dGVzICE9PSAwKSBzICs9IHRoaXMubWludXRlcyArIFwiTVwiO1xuICAgIGlmICh0aGlzLnNlY29uZHMgIT09IDAgfHwgdGhpcy5taWxsaXNlY29uZHMgIT09IDApXG4gICAgICAvLyB0aGlzIHdpbGwgaGFuZGxlIFwiZmxvYXRpbmcgcG9pbnQgbWFkbmVzc1wiIGJ5IHJlbW92aW5nIGV4dHJhIGRlY2ltYWwgcGxhY2VzXG4gICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81ODgwMDQvaXMtZmxvYXRpbmctcG9pbnQtbWF0aC1icm9rZW5cbiAgICAgIHMgKz0gcm91bmRUbyh0aGlzLnNlY29uZHMgKyB0aGlzLm1pbGxpc2Vjb25kcyAvIDEwMDAsIDMpICsgXCJTXCI7XG4gICAgaWYgKHMgPT09IFwiUFwiKSBzICs9IFwiVDBTXCI7XG4gICAgcmV0dXJuIHM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRHVyYXRpb24sIGZvcm1hdHRlZCBhcyBhIHRpbWUgb2YgZGF5LlxuICAgKiBOb3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBudWxsIGlmIHRoZSBkdXJhdGlvbiBpcyBpbnZhbGlkLCBuZWdhdGl2ZSwgb3IgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIDI0IGhvdXJzLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzTWlsbGlzZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc1NlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBzZWNvbmRzIGZyb20gdGhlIGZvcm1hdCBpZiB0aGV5J3JlIDBcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlUHJlZml4PWZhbHNlXSAtIGluY2x1ZGUgdGhlIGBUYCBwcmVmaXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKCkgLy89PiAnMTE6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzTWlsbGlzZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzExOjAwOjAwJ1xuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDExIH0pLnRvSVNPVGltZSh7IHN1cHByZXNzU2Vjb25kczogdHJ1ZSB9KSAvLz0+ICcxMTowMCdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxMSB9KS50b0lTT1RpbWUoeyBpbmNsdWRlUHJlZml4OiB0cnVlIH0pIC8vPT4gJ1QxMTowMDowMC4wMDAnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTEgfSkudG9JU09UaW1lKHsgZm9ybWF0OiAnYmFzaWMnIH0pIC8vPT4gJzExMDAwMC4wMDAnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPVGltZShvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBtaWxsaXMgPSB0aGlzLnRvTWlsbGlzKCk7XG4gICAgaWYgKG1pbGxpcyA8IDAgfHwgbWlsbGlzID49IDg2NDAwMDAwKSByZXR1cm4gbnVsbDtcblxuICAgIG9wdHMgPSB7XG4gICAgICBzdXBwcmVzc01pbGxpc2Vjb25kczogZmFsc2UsXG4gICAgICBzdXBwcmVzc1NlY29uZHM6IGZhbHNlLFxuICAgICAgaW5jbHVkZVByZWZpeDogZmFsc2UsXG4gICAgICBmb3JtYXQ6IFwiZXh0ZW5kZWRcIixcbiAgICAgIC4uLm9wdHMsXG4gICAgICBpbmNsdWRlT2Zmc2V0OiBmYWxzZSxcbiAgICB9O1xuXG4gICAgY29uc3QgZGF0ZVRpbWUgPSBEYXRlVGltZS5mcm9tTWlsbGlzKG1pbGxpcywgeyB6b25lOiBcIlVUQ1wiIH0pO1xuICAgIHJldHVybiBkYXRlVGltZS50b0lTT1RpbWUob3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSlNPTi5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9KU09OKCkge1xuICAgIHJldHVybiB0aGlzLnRvSVNPKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIER1cmF0aW9uIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gZGVidWdnaW5nLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEdXJhdGlvbiBhcHByb3ByaWF0ZSBmb3IgdGhlIFJFUEwuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIFtTeW1ib2wuZm9yKFwibm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b21cIildKCkge1xuICAgIGlmICh0aGlzLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBgRHVyYXRpb24geyB2YWx1ZXM6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZXMpfSB9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBEdXJhdGlvbiB7IEludmFsaWQsIHJlYXNvbjogJHt0aGlzLmludmFsaWRSZWFzb259IH1gO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG1pbGxpc2Vjb25kcyB2YWx1ZSBvZiB0aGlzIER1cmF0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b01pbGxpcygpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcblxuICAgIHJldHVybiBkdXJhdGlvblRvTWlsbGlzKHRoaXMubWF0cml4LCB0aGlzLnZhbHVlcyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBtaWxsaXNlY29uZHMgdmFsdWUgb2YgdGhpcyBEdXJhdGlvbi4gQWxpYXMgb2Yge0BsaW5rIHRvTWlsbGlzfVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB2YWx1ZU9mKCkge1xuICAgIHJldHVybiB0aGlzLnRvTWlsbGlzKCk7XG4gIH1cblxuICAvKipcbiAgICogTWFrZSB0aGlzIER1cmF0aW9uIGxvbmdlciBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIGFkZC4gRWl0aGVyIGEgTHV4b24gRHVyYXRpb24sIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcywgdGhlIG9iamVjdCBhcmd1bWVudCB0byBEdXJhdGlvbi5mcm9tT2JqZWN0KClcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBwbHVzKGR1cmF0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuXG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbiksXG4gICAgICByZXN1bHQgPSB7fTtcblxuICAgIGZvciAoY29uc3QgayBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShkdXIudmFsdWVzLCBrKSB8fCBoYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlcywgaykpIHtcbiAgICAgICAgcmVzdWx0W2tdID0gZHVyLmdldChrKSArIHRoaXMuZ2V0KGspO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogcmVzdWx0IH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBEdXJhdGlvbiBzaG9ydGVyIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtEdXJhdGlvbnxPYmplY3R8bnVtYmVyfSBkdXJhdGlvbiAtIFRoZSBhbW91bnQgdG8gc3VidHJhY3QuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbWludXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKTtcbiAgICByZXR1cm4gdGhpcy5wbHVzKGR1ci5uZWdhdGUoKSk7XG4gIH1cblxuICAvKipcbiAgICogU2NhbGUgdGhpcyBEdXJhdGlvbiBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4gUmV0dXJuIGEgbmV3bHktY29uc3RydWN0ZWQgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggdW5pdC4gQXJpdHkgaXMgMSBvciAyOiB0aGUgdmFsdWUgb2YgdGhlIHVuaXQgYW5kLCBvcHRpb25hbGx5LCB0aGUgdW5pdCBuYW1lLiBNdXN0IHJldHVybiBhIG51bWJlci5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cyh4ID0+IHggKiAyKSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDYwIH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGhvdXJzOiAxLCBtaW51dGVzOiAzMCB9KS5tYXBVbml0cygoeCwgdSkgPT4gdSA9PT0gXCJob3Vyc1wiID8geCAqIDIgOiB4KSAvLz0+IHsgaG91cnM6IDIsIG1pbnV0ZXM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICBtYXBVbml0cyhmbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy52YWx1ZXMpKSB7XG4gICAgICByZXN1bHRba10gPSBhc051bWJlcihmbih0aGlzLnZhbHVlc1trXSwgaykpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IHJlc3VsdCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZhbHVlIG9mIHVuaXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gYSB1bml0IHN1Y2ggYXMgJ21pbnV0ZScgb3IgJ2RheSdcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ3llYXJzJykgLy89PiAyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAyLCBkYXlzOiAzfSkuZ2V0KCdtb250aHMnKSAvLz0+IDBcbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7eWVhcnM6IDIsIGRheXM6IDN9KS5nZXQoJ2RheXMnKSAvLz0+IDNcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1tEdXJhdGlvbi5ub3JtYWxpemVVbml0KHVuaXQpXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoZSB2YWx1ZXMgb2Ygc3BlY2lmaWVkIHVuaXRzLiBSZXR1cm4gYSBuZXdseS1jb25zdHJ1Y3RlZCBEdXJhdGlvbi5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR1ci5zZXQoeyB5ZWFyczogMjAxNyB9KVxuICAgKiBAZXhhbXBsZSBkdXIuc2V0KHsgaG91cnM6IDgsIG1pbnV0ZXM6IDMwIH0pXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc2V0KHZhbHVlcykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IG1peGVkID0geyAuLi50aGlzLnZhbHVlcywgLi4ubm9ybWFsaXplT2JqZWN0KHZhbHVlcywgRHVyYXRpb24ubm9ybWFsaXplVW5pdCkgfTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IG1peGVkIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSBhbmQvb3IgbnVtYmVyaW5nU3lzdGVtLiAgUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIER1cmF0aW9uLlxuICAgKiBAZXhhbXBsZSBkdXIucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBjb252ZXJzaW9uQWNjdXJhY3ksIG1hdHJpeCB9ID0ge30pIHtcbiAgICBjb25zdCBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtIH0pO1xuICAgIGNvbnN0IG9wdHMgPSB7IGxvYywgbWF0cml4LCBjb252ZXJzaW9uQWNjdXJhY3kgfTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGR1cmF0aW9uIGluIHRoZSBzcGVjaWZpZWQgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlcycgb3IgJ2RheXMnXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe3llYXJzOiAxfSkuYXMoJ2RheXMnKSAvLz0+IDM2NVxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHt5ZWFyczogMX0pLmFzKCdtb250aHMnKSAvLz0+IDEyXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3Qoe2hvdXJzOiA2MH0pLmFzKCdkYXlzJykgLy89PiAyLjVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgYXModW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnNoaWZ0VG8odW5pdCkuZ2V0KHVuaXQpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZHVjZSB0aGlzIER1cmF0aW9uIHRvIGl0cyBjYW5vbmljYWwgcmVwcmVzZW50YXRpb24gaW4gaXRzIGN1cnJlbnQgdW5pdHMuXG4gICAqIEFzc3VtaW5nIHRoZSBvdmVyYWxsIHZhbHVlIG9mIHRoZSBEdXJhdGlvbiBpcyBwb3NpdGl2ZSwgdGhpcyBtZWFuczpcbiAgICogLSBleGNlc3NpdmUgdmFsdWVzIGZvciBsb3dlci1vcmRlciB1bml0cyBhcmUgY29udmVydGVkIHRvIGhpZ2hlci1vcmRlciB1bml0cyAoaWYgcG9zc2libGUsIHNlZSBmaXJzdCBhbmQgc2Vjb25kIGV4YW1wbGUpXG4gICAqIC0gbmVnYXRpdmUgbG93ZXItb3JkZXIgdW5pdHMgYXJlIGNvbnZlcnRlZCB0byBoaWdoZXIgb3JkZXIgdW5pdHMgKHRoZXJlIG11c3QgYmUgc3VjaCBhIGhpZ2hlciBvcmRlciB1bml0LCBvdGhlcndpc2VcbiAgICogICB0aGUgb3ZlcmFsbCB2YWx1ZSB3b3VsZCBiZSBuZWdhdGl2ZSwgc2VlIHRoaXJkIGV4YW1wbGUpXG4gICAqIC0gZnJhY3Rpb25hbCB2YWx1ZXMgZm9yIGhpZ2hlci1vcmRlciB1bml0cyBhcmUgY29udmVydGVkIHRvIGxvd2VyLW9yZGVyIHVuaXRzIChpZiBwb3NzaWJsZSwgc2VlIGZvdXJ0aCBleGFtcGxlKVxuICAgKlxuICAgKiBJZiB0aGUgb3ZlcmFsbCB2YWx1ZSBpcyBuZWdhdGl2ZSwgdGhlIHJlc3VsdCBvZiB0aGlzIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIGB0aGlzLm5lZ2F0ZSgpLm5vcm1hbGl6ZSgpLm5lZ2F0ZSgpYC5cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAyLCBkYXlzOiA1MDAwIH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAxNSwgZGF5czogMjU1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IGRheXM6IDUwMDAgfSkubm9ybWFsaXplKCkudG9PYmplY3QoKSAvLz0+IHsgZGF5czogNTAwMCB9XG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMTIsIG1pbnV0ZXM6IC00NSB9KS5ub3JtYWxpemUoKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMTEsIG1pbnV0ZXM6IDE1IH1cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IHllYXJzOiAyLjUsIGRheXM6IDAsIGhvdXJzOiAwIH0pLm5vcm1hbGl6ZSgpLnRvT2JqZWN0KCkgLy89PiB7IHllYXJzOiAyLCBkYXlzOiAxODIsIGhvdXJzOiAxMiB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgbm9ybWFsaXplKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB2YWxzID0gdGhpcy50b09iamVjdCgpO1xuICAgIG5vcm1hbGl6ZVZhbHVlcyh0aGlzLm1hdHJpeCwgdmFscyk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdmFsdWVzOiB2YWxzIH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2NhbGUgdW5pdHMgdG8gaXRzIGxhcmdlc3QgcmVwcmVzZW50YXRpb25cbiAgICogQGV4YW1wbGUgRHVyYXRpb24uZnJvbU9iamVjdCh7IG1pbGxpc2Vjb25kczogOTAwMDAgfSkucmVzY2FsZSgpLnRvT2JqZWN0KCkgLy89PiB7IG1pbnV0ZXM6IDEsIHNlY29uZHM6IDMwIH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICByZXNjYWxlKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCB2YWxzID0gcmVtb3ZlWmVyb2VzKHRoaXMubm9ybWFsaXplKCkuc2hpZnRUb0FsbCgpLnRvT2JqZWN0KCkpO1xuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogdmFscyB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHRoaXMgRHVyYXRpb24gaW50byBpdHMgcmVwcmVzZW50YXRpb24gaW4gYSBkaWZmZXJlbnQgc2V0IG9mIHVuaXRzLlxuICAgKiBAZXhhbXBsZSBEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDEsIHNlY29uZHM6IDMwIH0pLnNoaWZ0VG8oJ21pbnV0ZXMnLCAnbWlsbGlzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgbWludXRlczogNjAsIG1pbGxpc2Vjb25kczogMzAwMDAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIHNoaWZ0VG8oLi4udW5pdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAodW5pdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB1bml0cyA9IHVuaXRzLm1hcCgodSkgPT4gRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1KSk7XG5cbiAgICBjb25zdCBidWlsdCA9IHt9LFxuICAgICAgYWNjdW11bGF0ZWQgPSB7fSxcbiAgICAgIHZhbHMgPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgbGV0IGxhc3RVbml0O1xuXG4gICAgZm9yIChjb25zdCBrIG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKHVuaXRzLmluZGV4T2YoaykgPj0gMCkge1xuICAgICAgICBsYXN0VW5pdCA9IGs7XG5cbiAgICAgICAgbGV0IG93biA9IDA7XG5cbiAgICAgICAgLy8gYW55dGhpbmcgd2UgaGF2ZW4ndCBib2lsZWQgZG93biB5ZXQgc2hvdWxkIGdldCBib2lsZWQgdG8gdGhpcyB1bml0XG4gICAgICAgIGZvciAoY29uc3QgYWsgaW4gYWNjdW11bGF0ZWQpIHtcbiAgICAgICAgICBvd24gKz0gdGhpcy5tYXRyaXhbYWtdW2tdICogYWNjdW11bGF0ZWRbYWtdO1xuICAgICAgICAgIGFjY3VtdWxhdGVkW2FrXSA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwbHVzIGFueXRoaW5nIHRoYXQncyBhbHJlYWR5IGluIHRoaXMgdW5pdFxuICAgICAgICBpZiAoaXNOdW1iZXIodmFsc1trXSkpIHtcbiAgICAgICAgICBvd24gKz0gdmFsc1trXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9ubHkga2VlcCB0aGUgaW50ZWdlciBwYXJ0IGZvciBub3cgaW4gdGhlIGhvcGVzIG9mIHB1dHRpbmcgYW55IGRlY2ltYWwgcGFydFxuICAgICAgICAvLyBpbnRvIGEgc21hbGxlciB1bml0IGxhdGVyXG4gICAgICAgIGNvbnN0IGkgPSBNYXRoLnRydW5jKG93bik7XG4gICAgICAgIGJ1aWx0W2tdID0gaTtcbiAgICAgICAgYWNjdW11bGF0ZWRba10gPSAob3duICogMTAwMCAtIGkgKiAxMDAwKSAvIDEwMDA7XG5cbiAgICAgICAgLy8gb3RoZXJ3aXNlLCBrZWVwIGl0IGluIHRoZSB3aW5ncyB0byBib2lsIGl0IGxhdGVyXG4gICAgICB9IGVsc2UgaWYgKGlzTnVtYmVyKHZhbHNba10pKSB7XG4gICAgICAgIGFjY3VtdWxhdGVkW2tdID0gdmFsc1trXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBhbnl0aGluZyBsZWZ0b3ZlciBiZWNvbWVzIHRoZSBkZWNpbWFsIGZvciB0aGUgbGFzdCB1bml0XG4gICAgLy8gbGFzdFVuaXQgbXVzdCBiZSBkZWZpbmVkIHNpbmNlIHVuaXRzIGlzIG5vdCBlbXB0eVxuICAgIGZvciAoY29uc3Qga2V5IGluIGFjY3VtdWxhdGVkKSB7XG4gICAgICBpZiAoYWNjdW11bGF0ZWRba2V5XSAhPT0gMCkge1xuICAgICAgICBidWlsdFtsYXN0VW5pdF0gKz1cbiAgICAgICAgICBrZXkgPT09IGxhc3RVbml0ID8gYWNjdW11bGF0ZWRba2V5XSA6IGFjY3VtdWxhdGVkW2tleV0gLyB0aGlzLm1hdHJpeFtsYXN0VW5pdF1ba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBub3JtYWxpemVWYWx1ZXModGhpcy5tYXRyaXgsIGJ1aWx0KTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyB2YWx1ZXM6IGJ1aWx0IH0sIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNoaWZ0IHRoaXMgRHVyYXRpb24gdG8gYWxsIGF2YWlsYWJsZSB1bml0cy5cbiAgICogU2FtZSBhcyBzaGlmdFRvKFwieWVhcnNcIiwgXCJtb250aHNcIiwgXCJ3ZWVrc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCIsIFwibWlsbGlzZWNvbmRzXCIpXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgc2hpZnRUb0FsbCgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIHRoaXMuc2hpZnRUbyhcbiAgICAgIFwieWVhcnNcIixcbiAgICAgIFwibW9udGhzXCIsXG4gICAgICBcIndlZWtzXCIsXG4gICAgICBcImRheXNcIixcbiAgICAgIFwiaG91cnNcIixcbiAgICAgIFwibWludXRlc1wiLFxuICAgICAgXCJzZWNvbmRzXCIsXG4gICAgICBcIm1pbGxpc2Vjb25kc1wiXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG5lZ2F0aXZlIG9mIHRoaXMgRHVyYXRpb24uXG4gICAqIEBleGFtcGxlIER1cmF0aW9uLmZyb21PYmplY3QoeyBob3VyczogMSwgc2Vjb25kczogMzAgfSkubmVnYXRlKCkudG9PYmplY3QoKSAvLz0+IHsgaG91cnM6IC0xLCBzZWNvbmRzOiAtMzAgfVxuICAgKiBAcmV0dXJuIHtEdXJhdGlvbn1cbiAgICovXG4gIG5lZ2F0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgbmVnYXRlZCA9IHt9O1xuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlcykpIHtcbiAgICAgIG5lZ2F0ZWRba10gPSB0aGlzLnZhbHVlc1trXSA9PT0gMCA/IDAgOiAtdGhpcy52YWx1ZXNba107XG4gICAgfVxuICAgIHJldHVybiBjbG9uZSh0aGlzLCB7IHZhbHVlczogbmVnYXRlZCB9LCB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHllYXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHllYXJzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy55ZWFycyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcXVhcnRlcnMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgcXVhcnRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLnF1YXJ0ZXJzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtb250aHMuXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbW9udGhzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5tb250aHMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWtzXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLndlZWtzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBkYXlzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGRheXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMudmFsdWVzLmRheXMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGhvdXJzLlxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IGhvdXJzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5ob3VycyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWludXRlcy5cbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtaW51dGVzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5taW51dGVzIHx8IDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZWNvbmRzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgc2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy52YWx1ZXMuc2Vjb25kcyB8fCAwIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWlsbGlzZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnZhbHVlcy5taWxsaXNlY29uZHMgfHwgMCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIER1cmF0aW9uIGlzIGludmFsaWQuIEludmFsaWQgZHVyYXRpb25zIGFyZSByZXR1cm5lZCBieSBkaWZmIG9wZXJhdGlvbnNcbiAgICogb24gaW52YWxpZCBEYXRlVGltZXMgb3IgSW50ZXJ2YWxzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBEdXJhdGlvbiBiZWNhbWUgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgRHVyYXRpb24gaXMgdmFsaWRcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRSZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgRHVyYXRpb24gYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIER1cmF0aW9uIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZEV4cGxhbmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEVxdWFsaXR5IGNoZWNrXG4gICAqIFR3byBEdXJhdGlvbnMgYXJlIGVxdWFsIGlmZiB0aGV5IGhhdmUgdGhlIHNhbWUgdW5pdHMgYW5kIHRoZSBzYW1lIHZhbHVlcyBmb3IgZWFjaCB1bml0LlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubG9jLmVxdWFscyhvdGhlci5sb2MpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXEodjEsIHYyKSB7XG4gICAgICAvLyBDb25zaWRlciAwIGFuZCB1bmRlZmluZWQgYXMgZXF1YWxcbiAgICAgIGlmICh2MSA9PT0gdW5kZWZpbmVkIHx8IHYxID09PSAwKSByZXR1cm4gdjIgPT09IHVuZGVmaW5lZCB8fCB2MiA9PT0gMDtcbiAgICAgIHJldHVybiB2MSA9PT0gdjI7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB1IG9mIG9yZGVyZWRVbml0cykge1xuICAgICAgaWYgKCFlcSh0aGlzLnZhbHVlc1t1XSwgb3RoZXIudmFsdWVzW3VdKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IERhdGVUaW1lLCB7IGZyaWVuZGx5RGF0ZVRpbWUgfSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgU2V0dGluZ3MgZnJvbSBcIi4vc2V0dGluZ3MuanNcIjtcbmltcG9ydCB7IEludmFsaWRBcmd1bWVudEVycm9yLCBJbnZhbGlkSW50ZXJ2YWxFcnJvciB9IGZyb20gXCIuL2Vycm9ycy5qc1wiO1xuaW1wb3J0IEludmFsaWQgZnJvbSBcIi4vaW1wbC9pbnZhbGlkLmpzXCI7XG5pbXBvcnQgRm9ybWF0dGVyIGZyb20gXCIuL2ltcGwvZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgKiBhcyBGb3JtYXRzIGZyb20gXCIuL2ltcGwvZm9ybWF0cy5qc1wiO1xuXG5jb25zdCBJTlZBTElEID0gXCJJbnZhbGlkIEludGVydmFsXCI7XG5cbi8vIGNoZWNrcyBpZiB0aGUgc3RhcnQgaXMgZXF1YWwgdG8gb3IgYmVmb3JlIHRoZSBlbmRcbmZ1bmN0aW9uIHZhbGlkYXRlU3RhcnRFbmQoc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0IHx8ICFzdGFydC5pc1ZhbGlkKSB7XG4gICAgcmV0dXJuIEludGVydmFsLmludmFsaWQoXCJtaXNzaW5nIG9yIGludmFsaWQgc3RhcnRcIik7XG4gIH0gZWxzZSBpZiAoIWVuZCB8fCAhZW5kLmlzVmFsaWQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRcIik7XG4gIH0gZWxzZSBpZiAoZW5kIDwgc3RhcnQpIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuaW52YWxpZChcbiAgICAgIFwiZW5kIGJlZm9yZSBzdGFydFwiLFxuICAgICAgYFRoZSBlbmQgb2YgYW4gaW50ZXJ2YWwgbXVzdCBiZSBhZnRlciBpdHMgc3RhcnQsIGJ1dCB5b3UgaGFkIHN0YXJ0PSR7c3RhcnQudG9JU08oKX0gYW5kIGVuZD0ke2VuZC50b0lTTygpfWBcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQW4gSW50ZXJ2YWwgb2JqZWN0IHJlcHJlc2VudHMgYSBoYWxmLW9wZW4gaW50ZXJ2YWwgb2YgdGltZSwgd2hlcmUgZWFjaCBlbmRwb2ludCBpcyBhIHtAbGluayBEYXRlVGltZX0uIENvbmNlcHR1YWxseSwgaXQncyBhIGNvbnRhaW5lciBmb3IgdGhvc2UgdHdvIGVuZHBvaW50cywgYWNjb21wYW5pZWQgYnkgbWV0aG9kcyBmb3IgY3JlYXRpbmcsIHBhcnNpbmcsIGludGVycm9nYXRpbmcsIGNvbXBhcmluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLlxuICpcbiAqIEhlcmUgaXMgYSBicmllZiBvdmVydmlldyBvZiB0aGUgbW9zdCBjb21tb25seSB1c2VkIG1ldGhvZHMgYW5kIGdldHRlcnMgaW4gSW50ZXJ2YWw6XG4gKlxuICogKiAqKkNyZWF0aW9uKiogVG8gY3JlYXRlIGFuIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsLmZyb21EYXRlVGltZXN9LCB7QGxpbmsgSW50ZXJ2YWwuYWZ0ZXJ9LCB7QGxpbmsgSW50ZXJ2YWwuYmVmb3JlfSwgb3Ige0BsaW5rIEludGVydmFsLmZyb21JU099LlxuICogKiAqKkFjY2Vzc29ycyoqIFVzZSB7QGxpbmsgSW50ZXJ2YWwjc3RhcnR9IGFuZCB7QGxpbmsgSW50ZXJ2YWwjZW5kfSB0byBnZXQgdGhlIHN0YXJ0IGFuZCBlbmQuXG4gKiAqICoqSW50ZXJyb2dhdGlvbioqIFRvIGFuYWx5emUgdGhlIEludGVydmFsLCB1c2Uge0BsaW5rIEludGVydmFsI2NvdW50fSwge0BsaW5rIEludGVydmFsI2xlbmd0aH0sIHtAbGluayBJbnRlcnZhbCNoYXNTYW1lfSwge0BsaW5rIEludGVydmFsI2NvbnRhaW5zfSwge0BsaW5rIEludGVydmFsI2lzQWZ0ZXJ9LCBvciB7QGxpbmsgSW50ZXJ2YWwjaXNCZWZvcmV9LlxuICogKiAqKlRyYW5zZm9ybWF0aW9uKiogVG8gY3JlYXRlIG90aGVyIEludGVydmFscyBvdXQgb2YgdGhpcyBvbmUsIHVzZSB7QGxpbmsgSW50ZXJ2YWwjc2V0fSwge0BsaW5rIEludGVydmFsI3NwbGl0QXR9LCB7QGxpbmsgSW50ZXJ2YWwjc3BsaXRCeX0sIHtAbGluayBJbnRlcnZhbCNkaXZpZGVFcXVhbGx5fSwge0BsaW5rIEludGVydmFsLm1lcmdlfSwge0BsaW5rIEludGVydmFsLnhvcn0sIHtAbGluayBJbnRlcnZhbCN1bmlvbn0sIHtAbGluayBJbnRlcnZhbCNpbnRlcnNlY3Rpb259LCBvciB7QGxpbmsgSW50ZXJ2YWwjZGlmZmVyZW5jZX0uXG4gKiAqICoqQ29tcGFyaXNvbioqIFRvIGNvbXBhcmUgdGhpcyBJbnRlcnZhbCB0byBhbm90aGVyIG9uZSwgdXNlIHtAbGluayBJbnRlcnZhbCNlcXVhbHN9LCB7QGxpbmsgSW50ZXJ2YWwjb3ZlcmxhcHN9LCB7QGxpbmsgSW50ZXJ2YWwjYWJ1dHNTdGFydH0sIHtAbGluayBJbnRlcnZhbCNhYnV0c0VuZH0sIHtAbGluayBJbnRlcnZhbCNlbmd1bGZzfVxuICogKiAqKk91dHB1dCoqIFRvIGNvbnZlcnQgdGhlIEludGVydmFsIGludG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCBzZWUge0BsaW5rIEludGVydmFsI3RvU3RyaW5nfSwge0BsaW5rIEludGVydmFsI3RvTG9jYWxlU3RyaW5nfSwge0BsaW5rIEludGVydmFsI3RvSVNPfSwge0BsaW5rIEludGVydmFsI3RvSVNPRGF0ZX0sIHtAbGluayBJbnRlcnZhbCN0b0lTT1RpbWV9LCB7QGxpbmsgSW50ZXJ2YWwjdG9Gb3JtYXR9LCBhbmQge0BsaW5rIEludGVydmFsI3RvRHVyYXRpb259LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbnRlcnZhbCB7XG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zID0gY29uZmlnLnN0YXJ0O1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZSA9IGNvbmZpZy5lbmQ7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5pbnZhbGlkID0gY29uZmlnLmludmFsaWQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmlzTHV4b25JbnRlcnZhbCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGludmFsaWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWFzb24gLSBzaW1wbGUgc3RyaW5nIG9mIHdoeSB0aGlzIEludGVydmFsIGlzIGludmFsaWQuIFNob3VsZCBub3QgY29udGFpbiBwYXJhbWV0ZXJzIG9yIGFueXRoaW5nIGVsc2UgZGF0YS1kZXBlbmRlbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgSW50ZXJ2YWwgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEludGVydmFsRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJ2YWwoeyBpbnZhbGlkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhIHN0YXJ0IERhdGVUaW1lIGFuZCBhbiBlbmQgRGF0ZVRpbWUuIEluY2x1c2l2ZSBvZiB0aGUgc3RhcnQgYnV0IG5vdCB0aGUgZW5kLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBlbmRcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgZnJvbURhdGVUaW1lcyhzdGFydCwgZW5kKSB7XG4gICAgY29uc3QgYnVpbHRTdGFydCA9IGZyaWVuZGx5RGF0ZVRpbWUoc3RhcnQpLFxuICAgICAgYnVpbHRFbmQgPSBmcmllbmRseURhdGVUaW1lKGVuZCk7XG5cbiAgICBjb25zdCB2YWxpZGF0ZUVycm9yID0gdmFsaWRhdGVTdGFydEVuZChidWlsdFN0YXJ0LCBidWlsdEVuZCk7XG5cbiAgICBpZiAodmFsaWRhdGVFcnJvciA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVydmFsKHtcbiAgICAgICAgc3RhcnQ6IGJ1aWx0U3RhcnQsXG4gICAgICAgIGVuZDogYnVpbHRFbmQsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlRXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBJbnRlcnZhbCBmcm9tIGEgc3RhcnQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIHRvLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfERhdGV8T2JqZWN0fSBzdGFydFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gdGhlIGxlbmd0aCBvZiB0aGUgSW50ZXJ2YWwuXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGFmdGVyKHN0YXJ0LCBkdXJhdGlvbikge1xuICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21EdXJhdGlvbkxpa2UoZHVyYXRpb24pLFxuICAgICAgZHQgPSBmcmllbmRseURhdGVUaW1lKHN0YXJ0KTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdCwgZHQucGx1cyhkdXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhbiBlbmQgRGF0ZVRpbWUgYW5kIGEgRHVyYXRpb24gdG8gZXh0ZW5kIGJhY2t3YXJkcyB0by5cbiAgICogQHBhcmFtIHtEYXRlVGltZXxEYXRlfE9iamVjdH0gZW5kXG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSB0aGUgbGVuZ3RoIG9mIHRoZSBJbnRlcnZhbC5cbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBzdGF0aWMgYmVmb3JlKGVuZCwgZHVyYXRpb24pIHtcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKSxcbiAgICAgIGR0ID0gZnJpZW5kbHlEYXRlVGltZShlbmQpO1xuICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0Lm1pbnVzKGR1ciksIGR0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gSW50ZXJ2YWwgZnJvbSBhbiBJU08gODYwMSBzdHJpbmcuXG4gICAqIEFjY2VwdHMgYDxzdGFydD4vPGVuZD5gLCBgPHN0YXJ0Pi88ZHVyYXRpb24+YCwgYW5kIGA8ZHVyYXRpb24+LzxlbmQ+YCBmb3JtYXRzLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c10gLSBvcHRpb25zIHRvIHBhc3Mge0BsaW5rIERhdGVUaW1lI2Zyb21JU099IGFuZCBvcHRpb25hbGx5IHtAbGluayBEdXJhdGlvbiNmcm9tSVNPfVxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc3RhdGljIGZyb21JU08odGV4dCwgb3B0cykge1xuICAgIGNvbnN0IFtzLCBlXSA9ICh0ZXh0IHx8IFwiXCIpLnNwbGl0KFwiL1wiLCAyKTtcbiAgICBpZiAocyAmJiBlKSB7XG4gICAgICBsZXQgc3RhcnQsIHN0YXJ0SXNWYWxpZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHN0YXJ0ID0gRGF0ZVRpbWUuZnJvbUlTTyhzLCBvcHRzKTtcbiAgICAgICAgc3RhcnRJc1ZhbGlkID0gc3RhcnQuaXNWYWxpZDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc3RhcnRJc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGxldCBlbmQsIGVuZElzVmFsaWQ7XG4gICAgICB0cnkge1xuICAgICAgICBlbmQgPSBEYXRlVGltZS5mcm9tSVNPKGUsIG9wdHMpO1xuICAgICAgICBlbmRJc1ZhbGlkID0gZW5kLmlzVmFsaWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGVuZElzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXJ0SXNWYWxpZCAmJiBlbmRJc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHN0YXJ0LCBlbmQpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhcnRJc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21JU08oZSwgb3B0cyk7XG4gICAgICAgIGlmIChkdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5hZnRlcihzdGFydCwgZHVyKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChlbmRJc1ZhbGlkKSB7XG4gICAgICAgIGNvbnN0IGR1ciA9IER1cmF0aW9uLmZyb21JU08ocywgb3B0cyk7XG4gICAgICAgIGlmIChkdXIuaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBJbnRlcnZhbC5iZWZvcmUoZW5kLCBkdXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBJbnRlcnZhbC5pbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyBJU08gODYwMWApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBhbiBJbnRlcnZhbC4gV29ya3MgYWNyb3NzIGNvbnRleHQgYm91bmRhcmllc1xuICAgKiBAcGFyYW0ge29iamVjdH0gb1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzSW50ZXJ2YWwobykge1xuICAgIHJldHVybiAobyAmJiBvLmlzTHV4b25JbnRlcnZhbCkgfHwgZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RhcnQgb2YgdGhlIEludGVydmFsXG4gICAqIEB0eXBlIHtEYXRlVGltZX1cbiAgICovXG4gIGdldCBzdGFydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy5zIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbmQgb2YgdGhlIEludGVydmFsXG4gICAqIEB0eXBlIHtEYXRlVGltZX1cbiAgICovXG4gIGdldCBlbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYXQgbGVhc3QgaXRzIHN0YXJ0LCBtZWFuaW5nIHRoYXQgdGhlIEludGVydmFsIGlzbid0ICdiYWNrd2FyZHMnLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWRSZWFzb24gPT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBlcnJvciBjb2RlIGlmIHRoaXMgSW50ZXJ2YWwgaXMgaW52YWxpZCwgb3IgbnVsbCBpZiB0aGUgSW50ZXJ2YWwgaXMgdmFsaWRcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBpbnZhbGlkUmVhc29uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQucmVhc29uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGV4cGxhbmF0aW9uIG9mIHdoeSB0aGlzIEludGVydmFsIGJlY2FtZSBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBJbnRlcnZhbCBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRFeHBsYW5hdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnZhbGlkID8gdGhpcy5pbnZhbGlkLmV4cGxhbmF0aW9uIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIEludGVydmFsIGluIHRoZSBzcGVjaWZpZWQgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSB0aGUgdW5pdCAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gcmV0dXJuIHRoZSBsZW5ndGggaW4uXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGxlbmd0aCh1bml0ID0gXCJtaWxsaXNlY29uZHNcIikge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLnRvRHVyYXRpb24oLi4uW3VuaXRdKS5nZXQodW5pdCkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY291bnQgb2YgbWludXRlcywgaG91cnMsIGRheXMsIG1vbnRocywgb3IgeWVhcnMgaW5jbHVkZWQgaW4gdGhlIEludGVydmFsLCBldmVuIGluIHBhcnQuXG4gICAqIFVubGlrZSB7QGxpbmsgSW50ZXJ2YWwjbGVuZ3RofSB0aGlzIGNvdW50cyBzZWN0aW9ucyBvZiB0aGUgY2FsZW5kYXIsIG5vdCBwZXJpb2RzIG9mIHRpbWUsIGUuZy4gc3BlY2lmeWluZyAnZGF5J1xuICAgKiBhc2tzICd3aGF0IGRhdGVzIGFyZSBpbmNsdWRlZCBpbiB0aGlzIGludGVydmFsPycsIG5vdCAnaG93IG1hbnkgZGF5cyBsb25nIGlzIHRoaXMgaW50ZXJ2YWw/J1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3VuaXQ9J21pbGxpc2Vjb25kcyddIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXNlTG9jYWxlV2Vla3M9ZmFsc2VdIC0gSWYgdHJ1ZSwgdXNlIHdlZWtzIGJhc2VkIG9uIHRoZSBsb2NhbGUsIGkuZS4gdXNlIHRoZSBsb2NhbGUtZGVwZW5kZW50IHN0YXJ0IG9mIHRoZSB3ZWVrOyB0aGlzIG9wZXJhdGlvbiB3aWxsIGFsd2F5cyB1c2UgdGhlIGxvY2FsZSBvZiB0aGUgc3RhcnQgRGF0ZVRpbWVcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgY291bnQodW5pdCA9IFwibWlsbGlzZWNvbmRzXCIsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIE5hTjtcbiAgICBjb25zdCBzdGFydCA9IHRoaXMuc3RhcnQuc3RhcnRPZih1bml0LCBvcHRzKTtcbiAgICBsZXQgZW5kO1xuICAgIGlmIChvcHRzPy51c2VMb2NhbGVXZWVrcykge1xuICAgICAgZW5kID0gdGhpcy5lbmQucmVjb25maWd1cmUoeyBsb2NhbGU6IHN0YXJ0LmxvY2FsZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW5kID0gdGhpcy5lbmQ7XG4gICAgfVxuICAgIGVuZCA9IGVuZC5zdGFydE9mKHVuaXQsIG9wdHMpO1xuICAgIHJldHVybiBNYXRoLmZsb29yKGVuZC5kaWZmKHN0YXJ0LCB1bml0KS5nZXQodW5pdCkpICsgKGVuZC52YWx1ZU9mKCkgIT09IHRoaXMuZW5kLnZhbHVlT2YoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBhbmQgZW5kIGFyZSBib3RoIGluIHRoZSBzYW1lIHVuaXQgb2YgdGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdW5pdCAtIHRoZSB1bml0IG9mIHRpbWUgdG8gY2hlY2sgc2FtZW5lc3Mgb25cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGhhc1NhbWUodW5pdCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmlzRW1wdHkoKSB8fCB0aGlzLmUubWludXMoMSkuaGFzU2FtZSh0aGlzLnMsIHVuaXQpIDogZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhpcyBJbnRlcnZhbCBoYXMgdGhlIHNhbWUgc3RhcnQgYW5kIGVuZCBEYXRlVGltZXMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLnMudmFsdWVPZigpID09PSB0aGlzLmUudmFsdWVPZigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZnRlciB0aGUgc3BlY2lmaWVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBkYXRlVGltZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNBZnRlcihkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA+IGRhdGVUaW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYmVmb3JlIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0JlZm9yZShkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMuZSA8PSBkYXRlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgRGF0ZVRpbWUuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IGRhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjb250YWlucyhkYXRlVGltZSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMucyA8PSBkYXRlVGltZSAmJiB0aGlzLmUgPiBkYXRlVGltZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldHNcIiB0aGUgc3RhcnQgYW5kL29yIGVuZCBkYXRlcy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIEludGVydmFsLlxuICAgKiBAcGFyYW0ge09iamVjdH0gdmFsdWVzIC0gdGhlIHZhbHVlcyB0byBzZXRcbiAgICogQHBhcmFtIHtEYXRlVGltZX0gdmFsdWVzLnN0YXJ0IC0gdGhlIHN0YXJ0aW5nIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IHZhbHVlcy5lbmQgLSB0aGUgZW5kaW5nIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge0ludGVydmFsfVxuICAgKi9cbiAgc2V0KHsgc3RhcnQsIGVuZCB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgcmV0dXJuIEludGVydmFsLmZyb21EYXRlVGltZXMoc3RhcnQgfHwgdGhpcy5zLCBlbmQgfHwgdGhpcy5lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdCB0aGlzIEludGVydmFsIGF0IGVhY2ggb2YgdGhlIHNwZWNpZmllZCBEYXRlVGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIHVuaXQgb2YgdGltZSB0byBjb3VudC5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzcGxpdEF0KC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gW107XG4gICAgY29uc3Qgc29ydGVkID0gZGF0ZVRpbWVzXG4gICAgICAgIC5tYXAoZnJpZW5kbHlEYXRlVGltZSlcbiAgICAgICAgLmZpbHRlcigoZCkgPT4gdGhpcy5jb250YWlucyhkKSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEudG9NaWxsaXMoKSAtIGIudG9NaWxsaXMoKSksXG4gICAgICByZXN1bHRzID0gW107XG4gICAgbGV0IHsgcyB9ID0gdGhpcyxcbiAgICAgIGkgPSAwO1xuXG4gICAgd2hpbGUgKHMgPCB0aGlzLmUpIHtcbiAgICAgIGNvbnN0IGFkZGVkID0gc29ydGVkW2ldIHx8IHRoaXMuZSxcbiAgICAgICAgbmV4dCA9ICthZGRlZCA+ICt0aGlzLmUgPyB0aGlzLmUgOiBhZGRlZDtcbiAgICAgIHJlc3VsdHMucHVzaChJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIG5leHQpKTtcbiAgICAgIHMgPSBuZXh0O1xuICAgICAgaSArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byBzbWFsbGVyIEludGVydmFscywgZWFjaCBvZiB0aGUgc3BlY2lmaWVkIGxlbmd0aC5cbiAgICogTGVmdCBvdmVyIHRpbWUgaXMgZ3JvdXBlZCBpbnRvIGEgc21hbGxlciBpbnRlcnZhbFxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGxlbmd0aCBvZiBlYWNoIHJlc3VsdGluZyBpbnRlcnZhbC5cbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzcGxpdEJ5KGR1cmF0aW9uKSB7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG5cbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhZHVyLmlzVmFsaWQgfHwgZHVyLmFzKFwibWlsbGlzZWNvbmRzXCIpID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IHsgcyB9ID0gdGhpcyxcbiAgICAgIGlkeCA9IDEsXG4gICAgICBuZXh0O1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IFtdO1xuICAgIHdoaWxlIChzIDwgdGhpcy5lKSB7XG4gICAgICBjb25zdCBhZGRlZCA9IHRoaXMuc3RhcnQucGx1cyhkdXIubWFwVW5pdHMoKHgpID0+IHggKiBpZHgpKTtcbiAgICAgIG5leHQgPSArYWRkZWQgPiArdGhpcy5lID8gdGhpcy5lIDogYWRkZWQ7XG4gICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBuZXh0KSk7XG4gICAgICBzID0gbmV4dDtcbiAgICAgIGlkeCArPSAxO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0IHRoaXMgSW50ZXJ2YWwgaW50byB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBzbWFsbGVyIGludGVydmFscy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG51bWJlck9mUGFydHMgLSBUaGUgbnVtYmVyIG9mIEludGVydmFscyB0byBkaXZpZGUgdGhlIEludGVydmFsIGludG8uXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgZGl2aWRlRXF1YWxseShudW1iZXJPZlBhcnRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBbXTtcbiAgICByZXR1cm4gdGhpcy5zcGxpdEJ5KHRoaXMubGVuZ3RoKCkgLyBudW1iZXJPZlBhcnRzKS5zbGljZSgwLCBudW1iZXJPZlBhcnRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIG92ZXJsYXBzIHdpdGggdGhlIHNwZWNpZmllZCBJbnRlcnZhbFxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgb3ZlcmxhcHMob3RoZXIpIHtcbiAgICByZXR1cm4gdGhpcy5lID4gb3RoZXIucyAmJiB0aGlzLnMgPCBvdGhlci5lO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBlbmQgaXMgYWRqYWNlbnQgdG8gdGhlIHNwZWNpZmllZCBJbnRlcnZhbCdzIHN0YXJ0LlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYWJ1dHNTdGFydChvdGhlcikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuICt0aGlzLmUgPT09ICtvdGhlci5zO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgSW50ZXJ2YWwncyBzdGFydCBpcyBhZGphY2VudCB0byB0aGUgc3BlY2lmaWVkIEludGVydmFsJ3MgZW5kLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYWJ1dHNFbmQob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiArb3RoZXIuZSA9PT0gK3RoaXMucztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGVuZ3VsZnMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGVuZ3VsZnMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLnMgPD0gb3RoZXIucyAmJiB0aGlzLmUgPj0gb3RoZXIuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGlzIEludGVydmFsIGhhcyB0aGUgc2FtZSBzdGFydCBhbmQgZW5kIGFzIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIEBwYXJhbSB7SW50ZXJ2YWx9IG90aGVyXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCB8fCAhb3RoZXIuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnMuZXF1YWxzKG90aGVyLnMpICYmIHRoaXMuZS5lcXVhbHMob3RoZXIuZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHJlcHJlc2VudGluZyB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYW5kIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWwuXG4gICAqIFNwZWNpZmljYWxseSwgdGhlIHJlc3VsdGluZyBJbnRlcnZhbCBoYXMgdGhlIG1heGltdW0gc3RhcnQgdGltZSBhbmQgdGhlIG1pbmltdW0gZW5kIHRpbWUgb2YgdGhlIHR3byBJbnRlcnZhbHMuXG4gICAqIFJldHVybnMgbnVsbCBpZiB0aGUgaW50ZXJzZWN0aW9uIGlzIGVtcHR5LCBtZWFuaW5nLCB0aGUgaW50ZXJ2YWxzIGRvbid0IGludGVyc2VjdC5cbiAgICogQHBhcmFtIHtJbnRlcnZhbH0gb3RoZXJcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICBpbnRlcnNlY3Rpb24ob3RoZXIpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgcyA9IHRoaXMucyA+IG90aGVyLnMgPyB0aGlzLnMgOiBvdGhlci5zLFxuICAgICAgZSA9IHRoaXMuZSA8IG90aGVyLmUgPyB0aGlzLmUgOiBvdGhlci5lO1xuXG4gICAgaWYgKHMgPj0gZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKHMsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gSW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSB1bmlvbiBvZiB0aGlzIEludGVydmFsIGFuZCB0aGUgc3BlY2lmaWVkIEludGVydmFsLlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSByZXN1bHRpbmcgSW50ZXJ2YWwgaGFzIHRoZSBtaW5pbXVtIHN0YXJ0IHRpbWUgYW5kIHRoZSBtYXhpbXVtIGVuZCB0aW1lIG9mIHRoZSB0d28gSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0ludGVydmFsfSBvdGhlclxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICovXG4gIHVuaW9uKG90aGVyKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IHMgPSB0aGlzLnMgPCBvdGhlci5zID8gdGhpcy5zIDogb3RoZXIucyxcbiAgICAgIGUgPSB0aGlzLmUgPiBvdGhlci5lID8gdGhpcy5lIDogb3RoZXIuZTtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzLCBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSBhbiBhcnJheSBvZiBJbnRlcnZhbHMgaW50byBhIGVxdWl2YWxlbnQgbWluaW1hbCBzZXQgb2YgSW50ZXJ2YWxzLlxuICAgKiBDb21iaW5lcyBvdmVybGFwcGluZyBhbmQgYWRqYWNlbnQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0ge0FycmF5fSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbWVyZ2UoaW50ZXJ2YWxzKSB7XG4gICAgY29uc3QgW2ZvdW5kLCBmaW5hbF0gPSBpbnRlcnZhbHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhLnMgLSBiLnMpXG4gICAgICAucmVkdWNlKFxuICAgICAgICAoW3NvZmFyLCBjdXJyZW50XSwgaXRlbSkgPT4ge1xuICAgICAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIFtzb2ZhciwgaXRlbV07XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Lm92ZXJsYXBzKGl0ZW0pIHx8IGN1cnJlbnQuYWJ1dHNTdGFydChpdGVtKSkge1xuICAgICAgICAgICAgcmV0dXJuIFtzb2ZhciwgY3VycmVudC51bmlvbihpdGVtKV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBbc29mYXIuY29uY2F0KFtjdXJyZW50XSksIGl0ZW1dO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgW1tdLCBudWxsXVxuICAgICAgKTtcbiAgICBpZiAoZmluYWwpIHtcbiAgICAgIGZvdW5kLnB1c2goZmluYWwpO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIEludGVydmFscyByZXByZXNlbnRpbmcgdGhlIHNwYW5zIG9mIHRpbWUgdGhhdCBvbmx5IGFwcGVhciBpbiBvbmUgb2YgdGhlIHNwZWNpZmllZCBJbnRlcnZhbHMuXG4gICAqIEBwYXJhbSB7QXJyYXl9IGludGVydmFsc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyB4b3IoaW50ZXJ2YWxzKSB7XG4gICAgbGV0IHN0YXJ0ID0gbnVsbCxcbiAgICAgIGN1cnJlbnRDb3VudCA9IDA7XG4gICAgY29uc3QgcmVzdWx0cyA9IFtdLFxuICAgICAgZW5kcyA9IGludGVydmFscy5tYXAoKGkpID0+IFtcbiAgICAgICAgeyB0aW1lOiBpLnMsIHR5cGU6IFwic1wiIH0sXG4gICAgICAgIHsgdGltZTogaS5lLCB0eXBlOiBcImVcIiB9LFxuICAgICAgXSksXG4gICAgICBmbGF0dGVuZWQgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0KC4uLmVuZHMpLFxuICAgICAgYXJyID0gZmxhdHRlbmVkLnNvcnQoKGEsIGIpID0+IGEudGltZSAtIGIudGltZSk7XG5cbiAgICBmb3IgKGNvbnN0IGkgb2YgYXJyKSB7XG4gICAgICBjdXJyZW50Q291bnQgKz0gaS50eXBlID09PSBcInNcIiA/IDEgOiAtMTtcblxuICAgICAgaWYgKGN1cnJlbnRDb3VudCA9PT0gMSkge1xuICAgICAgICBzdGFydCA9IGkudGltZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChzdGFydCAmJiArc3RhcnQgIT09ICtpLnRpbWUpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2goSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhzdGFydCwgaS50aW1lKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydCA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIEludGVydmFsLm1lcmdlKHJlc3VsdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBJbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIHNwYW4gb2YgdGltZSBpbiB0aGlzIEludGVydmFsIHRoYXQgZG9lc24ndCBvdmVybGFwIHdpdGggYW55IG9mIHRoZSBzcGVjaWZpZWQgSW50ZXJ2YWxzLlxuICAgKiBAcGFyYW0gey4uLkludGVydmFsfSBpbnRlcnZhbHNcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBkaWZmZXJlbmNlKC4uLmludGVydmFscykge1xuICAgIHJldHVybiBJbnRlcnZhbC54b3IoW3RoaXNdLmNvbmNhdChpbnRlcnZhbHMpKVxuICAgICAgLm1hcCgoaSkgPT4gdGhpcy5pbnRlcnNlY3Rpb24oaSkpXG4gICAgICAuZmlsdGVyKChpKSA9PiBpICYmICFpLmlzRW1wdHkoKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsIGFwcHJvcHJpYXRlIGZvciBkZWJ1Z2dpbmcuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gSU5WQUxJRDtcbiAgICByZXR1cm4gYFske3RoaXMucy50b0lTTygpfSBcdTIwMTMgJHt0aGlzLmUudG9JU08oKX0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgYXBwcm9wcmlhdGUgZm9yIHRoZSBSRVBMLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gYEludGVydmFsIHsgc3RhcnQ6ICR7dGhpcy5zLnRvSVNPKCl9LCBlbmQ6ICR7dGhpcy5lLnRvSVNPKCl9IH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYEludGVydmFsIHsgSW52YWxpZCwgcmVhc29uOiAke3RoaXMuaW52YWxpZFJlYXNvbn0gfWA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIEludGVydmFsLiBBY2NlcHRzIHRoZSBzYW1lIG9wdGlvbnMgYXMgdGhlXG4gICAqIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3IgYW5kIGFueSBwcmVzZXRzIGRlZmluZWQgYnkgTHV4b24sIHN1Y2ggYXNcbiAgICoge0BsaW5rIERhdGVUaW1lLkRBVEVfRlVMTH0gb3Ige0BsaW5rIERhdGVUaW1lLlRJTUVfU0lNUExFfS4gVGhlIGV4YWN0IGJlaGF2aW9yIG9mIHRoaXMgbWV0aG9kXG4gICAqIGlzIGJyb3dzZXItc3BlY2lmaWMsIGJ1dCBpbiBnZW5lcmFsIGl0IHdpbGwgcmV0dXJuIGFuIGFwcHJvcHJpYXRlIHJlcHJlc2VudGF0aW9uIG9mIHRoZVxuICAgKiBJbnRlcnZhbCBpbiB0aGUgYXNzaWduZWQgbG9jYWxlLiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlblxuICAgKiBzcGVjaWZpZWQuXG4gICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRGF0ZVRpbWVGb3JtYXRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtmb3JtYXRPcHRzPURhdGVUaW1lLkRBVEVfU0hPUlRdIC0gRWl0aGVyIGEgRGF0ZVRpbWUgcHJlc2V0IG9yXG4gICAqIEludGwuRGF0ZVRpbWVGb3JtYXQgY29uc3RydWN0b3Igb3B0aW9ucy5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBPcHRpb25zIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9mIHRoZSBzdGFydCBEYXRlVGltZS5cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QwOTowMFovMjAyMi0xMS0wOFQwOTowMFonKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDExLzcvMjAyMiBcdTIwMTMgMTEvOC8yMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMDk6MDBaLzIwMjItMTEtMDhUMDk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMKTsgLy89PiBOb3ZlbWJlciA3IFx1MjAxMyA4LCAyMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMDk6MDBaLzIwMjItMTEtMDhUMDk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMLCB7IGxvY2FsZTogJ2ZyLUZSJyB9KTsgLy89PiA3XHUyMDEzOCBub3ZlbWJyZSAyMDIyXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21JU08oJzIwMjItMTEtMDdUMTc6MDBaLzIwMjItMTEtMDdUMTk6MDBaJykudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuVElNRV9TSU1QTEUpOyAvLz0+IDY6MDAgXHUyMDEzIDg6MDAgUE1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbUlTTygnMjAyMi0xMS0wN1QxNzowMFovMjAyMi0xMS0wN1QxOTowMFonKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiBNb24sIE5vdiAwNywgNjowMCBcdTIwMTMgODowMCBwXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvTG9jYWxlU3RyaW5nKGZvcm1hdE9wdHMgPSBGb3JtYXRzLkRBVEVfU0hPUlQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLnMubG9jLmNsb25lKG9wdHMpLCBmb3JtYXRPcHRzKS5mb3JtYXRJbnRlcnZhbCh0aGlzKVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIEludGVydmFsLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPKG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0lTTyhvcHRzKX0vJHt0aGlzLmUudG9JU08ob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0ZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgdGltZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPRGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIElOVkFMSUQ7XG4gICAgcmV0dXJuIGAke3RoaXMucy50b0lTT0RhdGUoKX0vJHt0aGlzLmUudG9JU09EYXRlKCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGltZSBvZiB0aGlzIEludGVydmFsLlxuICAgKiBUaGUgZGF0ZSBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxI1RpbWVfaW50ZXJ2YWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gVGhlIHNhbWUgb3B0aW9ucyBhcyB7QGxpbmsgRGF0ZVRpbWUjdG9JU099XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPVGltZShvcHRzKSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9JU09UaW1lKG9wdHMpfS8ke3RoaXMuZS50b0lTT1RpbWUob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgSW50ZXJ2YWwgZm9ybWF0dGVkIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGZvcm1hdFxuICAgKiBzdHJpbmcuICoqWW91IG1heSBub3Qgd2FudCB0aGlzLioqIFNlZSB7QGxpbmsgSW50ZXJ2YWwjdG9Mb2NhbGVTdHJpbmd9IGZvciBhIG1vcmUgZmxleGlibGVcbiAgICogZm9ybWF0dGluZyB0b29sLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZGF0ZUZvcm1hdCAtIFRoZSBmb3JtYXQgc3RyaW5nLiBUaGlzIHN0cmluZyBmb3JtYXRzIHRoZSBzdGFydCBhbmQgZW5kIHRpbWUuXG4gICAqIFNlZSB7QGxpbmsgRGF0ZVRpbWUjdG9Gb3JtYXR9IGZvciBkZXRhaWxzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIE9wdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5zZXBhcmF0b3IgPSAgJyBcdTIwMTMgJ10gLSBBIHNlcGFyYXRvciB0byBwbGFjZSBiZXR3ZWVuIHRoZSBzdGFydCBhbmQgZW5kXG4gICAqIHJlcHJlc2VudGF0aW9ucy5cbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9Gb3JtYXQoZGF0ZUZvcm1hdCwgeyBzZXBhcmF0b3IgPSBcIiBcdTIwMTMgXCIgfSA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQpIHJldHVybiBJTlZBTElEO1xuICAgIHJldHVybiBgJHt0aGlzLnMudG9Gb3JtYXQoZGF0ZUZvcm1hdCl9JHtzZXBhcmF0b3J9JHt0aGlzLmUudG9Gb3JtYXQoZGF0ZUZvcm1hdCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYSBEdXJhdGlvbiByZXByZXNlbnRpbmcgdGhlIHRpbWUgc3Bhbm5lZCBieSB0aGlzIGludGVydmFsLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA4ODQ4OTI1NyB9XG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLnRvRHVyYXRpb24oJ2RheXMnKS50b09iamVjdCgpIC8vPT4geyBkYXlzOiAxLjAyNDE4MTIxNTI3Nzc3NzggfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKFsnaG91cnMnLCAnbWludXRlcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LjgyMDk1IH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikudG9EdXJhdGlvbihbJ2hvdXJzJywgJ21pbnV0ZXMnLCAnc2Vjb25kcyddKS50b09iamVjdCgpIC8vPT4geyBob3VyczogMjQsIG1pbnV0ZXM6IDM0LCBzZWNvbmRzOiA0OS4yNTcgfVxuICAgKiBAZXhhbXBsZSBJbnRlcnZhbC5mcm9tRGF0ZVRpbWVzKGR0MSwgZHQyKS50b0R1cmF0aW9uKCdzZWNvbmRzJykudG9PYmplY3QoKSAvLz0+IHsgc2Vjb25kczogODg0ODkuMjU3IH1cbiAgICogQHJldHVybiB7RHVyYXRpb259XG4gICAqL1xuICB0b0R1cmF0aW9uKHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQodGhpcy5pbnZhbGlkUmVhc29uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZS5kaWZmKHRoaXMucywgdW5pdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUnVuIG1hcEZuIG9uIHRoZSBpbnRlcnZhbCBzdGFydCBhbmQgZW5kLCByZXR1cm5pbmcgYSBuZXcgSW50ZXJ2YWwgZnJvbSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lc1xuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBtYXBGblxuICAgKiBAcmV0dXJuIHtJbnRlcnZhbH1cbiAgICogQGV4YW1wbGUgSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhkdDEsIGR0MikubWFwRW5kcG9pbnRzKGVuZHBvaW50ID0+IGVuZHBvaW50LnRvVVRDKCkpXG4gICAqIEBleGFtcGxlIEludGVydmFsLmZyb21EYXRlVGltZXMoZHQxLCBkdDIpLm1hcEVuZHBvaW50cyhlbmRwb2ludCA9PiBlbmRwb2ludC5wbHVzKHsgaG91cnM6IDIgfSkpXG4gICAqL1xuICBtYXBFbmRwb2ludHMobWFwRm4pIHtcbiAgICByZXR1cm4gSW50ZXJ2YWwuZnJvbURhdGVUaW1lcyhtYXBGbih0aGlzLnMpLCBtYXBGbih0aGlzLmUpKTtcbiAgfVxufVxuIiwgImltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi9kYXRldGltZS5qc1wiO1xuaW1wb3J0IFNldHRpbmdzIGZyb20gXCIuL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgTG9jYWxlIGZyb20gXCIuL2ltcGwvbG9jYWxlLmpzXCI7XG5pbXBvcnQgSUFOQVpvbmUgZnJvbSBcIi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZVpvbmUgfSBmcm9tIFwiLi9pbXBsL3pvbmVVdGlsLmpzXCI7XG5cbmltcG9ydCB7IGhhc0xvY2FsZVdlZWtJbmZvLCBoYXNSZWxhdGl2ZSB9IGZyb20gXCIuL2ltcGwvdXRpbC5qc1wiO1xuXG4vKipcbiAqIFRoZSBJbmZvIGNsYXNzIGNvbnRhaW5zIHN0YXRpYyBtZXRob2RzIGZvciByZXRyaWV2aW5nIGdlbmVyYWwgdGltZSBhbmQgZGF0ZSByZWxhdGVkIGRhdGEuIEZvciBleGFtcGxlLCBpdCBoYXMgbWV0aG9kcyBmb3IgZmluZGluZyBvdXQgaWYgYSB0aW1lIHpvbmUgaGFzIGEgRFNULCBmb3IgbGlzdGluZyB0aGUgbW9udGhzIGluIGFueSBzdXBwb3J0ZWQgbG9jYWxlLCBhbmQgZm9yIGRpc2NvdmVyaW5nIHdoaWNoIG9mIEx1eG9uIGZlYXR1cmVzIGFyZSBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZm8ge1xuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGNvbnRhaW5zIGEgRFNULlxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbem9uZT0nbG9jYWwnXSAtIFpvbmUgdG8gY2hlY2suIERlZmF1bHRzIHRvIHRoZSBlbnZpcm9ubWVudCdzIGxvY2FsIHpvbmUuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaGFzRFNUKHpvbmUgPSBTZXR0aW5ncy5kZWZhdWx0Wm9uZSkge1xuICAgIGNvbnN0IHByb3RvID0gRGF0ZVRpbWUubm93KCkuc2V0Wm9uZSh6b25lKS5zZXQoeyBtb250aDogMTIgfSk7XG5cbiAgICByZXR1cm4gIXpvbmUuaXNVbml2ZXJzYWwgJiYgcHJvdG8ub2Zmc2V0ICE9PSBwcm90by5zZXQoeyBtb250aDogNiB9KS5vZmZzZXQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB6b25lIGlzIGEgdmFsaWQgSUFOQSBzcGVjaWZpZXIuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB6b25lIC0gWm9uZSB0byBjaGVja1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRJQU5BWm9uZSh6b25lKSB7XG4gICAgcmV0dXJuIElBTkFab25lLmlzVmFsaWRab25lKHpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBpbnB1dCBpbnRvIGEge0BsaW5rIFpvbmV9IGluc3RhbmNlLlxuICAgKlxuICAgKiAqIElmIGBpbnB1dGAgaXMgYWxyZWFkeSBhIFpvbmUgaW5zdGFuY2UsIGl0IGlzIHJldHVybmVkIHVuY2hhbmdlZC5cbiAgICogKiBJZiBgaW5wdXRgIGlzIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSB2YWxpZCB0aW1lIHpvbmUgbmFtZSwgYSBab25lIGluc3RhbmNlXG4gICAqICAgd2l0aCB0aGF0IG5hbWUgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBhIHN0cmluZyB0aGF0IGRvZXNuJ3QgcmVmZXIgdG8gYSBrbm93biB0aW1lIHpvbmUsIGEgWm9uZVxuICAgKiAgIGluc3RhbmNlIHdpdGgge0BsaW5rIFpvbmUjaXNWYWxpZH0gPT0gZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0IGlzIGEgbnVtYmVyLCBhIFpvbmUgaW5zdGFuY2Ugd2l0aCB0aGUgc3BlY2lmaWVkIGZpeGVkIG9mZnNldFxuICAgKiAgIGluIG1pbnV0ZXMgaXMgcmV0dXJuZWQuXG4gICAqICogSWYgYGlucHV0YCBpcyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAsIHRoZSBkZWZhdWx0IHpvbmUgaXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV8bnVtYmVyfSBbaW5wdXRdIC0gdGhlIHZhbHVlIHRvIGJlIGNvbnZlcnRlZFxuICAgKiBAcmV0dXJuIHtab25lfVxuICAgKi9cbiAgc3RhdGljIG5vcm1hbGl6ZVpvbmUoaW5wdXQpIHtcbiAgICByZXR1cm4gbm9ybWFsaXplWm9uZShpbnB1dCwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2Vla2RheSBvbiB3aGljaCB0aGUgd2VlayBzdGFydHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBsb2NhbGUuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jT2JqPW51bGxdIC0gYW4gZXhpc3RpbmcgbG9jYWxlIG9iamVjdCB0byB1c2VcbiAgICogQHJldHVybnMge251bWJlcn0gdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrLCAxIGZvciBNb25kYXkgdGhyb3VnaCA3IGZvciBTdW5kYXlcbiAgICovXG4gIHN0YXRpYyBnZXRTdGFydE9mV2Vlayh7IGxvY2FsZSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUpKS5nZXRTdGFydE9mV2VlaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSBudW1iZXIgb2YgZGF5cyBuZWNlc3NhcnkgaW4gYSB3ZWVrIGJlZm9yZSBpdCBpcyBjb25zaWRlcmVkIHBhcnQgb2YgdGhlIG5leHQgeWVhciBhY2NvcmRpbmdcbiAgICogdG8gdGhlIGdpdmVuIGxvY2FsZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIGdldE1pbmltdW1EYXlzSW5GaXJzdFdlZWsoeyBsb2NhbGUgPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlKSkuZ2V0TWluRGF5c0luRmlyc3RXZWVrKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB3ZWVrZGF5cywgd2hpY2ggYXJlIGNvbnNpZGVyZWQgdGhlIHdlZWtlbmQgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBsb2NhbGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGVdIC0gdGhlIGxvY2FsZSBjb2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyW119IGFuIGFycmF5IG9mIHdlZWtkYXlzLCAxIGZvciBNb25kYXkgdGhyb3VnaCA3IGZvciBTdW5kYXlcbiAgICovXG4gIHN0YXRpYyBnZXRXZWVrZW5kV2Vla2RheXMoeyBsb2NhbGUgPSBudWxsLCBsb2NPYmogPSBudWxsIH0gPSB7fSkge1xuICAgIC8vIGNvcHkgdGhlIGFycmF5LCBiZWNhdXNlIHdlIGNhY2hlIGl0IGludGVybmFsbHlcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSkpLmdldFdlZWtlbmREYXlzKCkuc2xpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2Ygc3RhbmRhbG9uZSBtb250aCBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKClbMF0gLy89PiAnSmFudWFyeSdcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ3Nob3J0JylbMF0gLy89PiAnSmFuJ1xuICAgKiBAZXhhbXBsZSBJbmZvLm1vbnRocygnbnVtZXJpYycpWzBdIC8vPT4gJzEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdzaG9ydCcsIHsgbG9jYWxlOiAnZnItQ0EnIH0gKVswXSAvLz0+ICdqYW52LidcbiAgICogQGV4YW1wbGUgSW5mby5tb250aHMoJ251bWVyaWMnLCB7IGxvY2FsZTogJ2FyJyB9KVswXSAvLz0+ICdcdTA2NjEnXG4gICAqIEBleGFtcGxlIEluZm8ubW9udGhzKCdsb25nJywgeyBvdXRwdXRDYWxlbmRhcjogJ2lzbGFtaWMnIH0pWzBdIC8vPT4gJ1JhYmlcdTAyQkIgSSdcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgbW9udGhzKFxuICAgIGxlbmd0aCA9IFwibG9uZ1wiLFxuICAgIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCwgb3V0cHV0Q2FsZW5kYXIgPSBcImdyZWdvcnlcIiB9ID0ge31cbiAgKSB7XG4gICAgcmV0dXJuIChsb2NPYmogfHwgTG9jYWxlLmNyZWF0ZShsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXIpKS5tb250aHMobGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IG1vbnRoIG5hbWVzLlxuICAgKiBGb3JtYXQgbW9udGhzIGRpZmZlciBmcm9tIHN0YW5kYWxvbmUgbW9udGhzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byB0aGUgZGF5IG9mIHRoZSBtb250aC4gSW4gc29tZSBsYW5ndWFnZXMsIHRoYXRcbiAgICogY2hhbmdlcyB0aGUgc3RyaW5nLlxuICAgKiBTZWUge0BsaW5rIEluZm8jbW9udGhzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJudW1lcmljXCIsIFwiMi1kaWdpdFwiLCBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubnVtYmVyaW5nU3lzdGVtPW51bGxdIC0gdGhlIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY09iaj1udWxsXSAtIGFuIGV4aXN0aW5nIGxvY2FsZSBvYmplY3QgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcj0nZ3JlZ29yeSddIC0gdGhlIGNhbGVuZGFyXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1vbnRoc0Zvcm1hdChcbiAgICBsZW5ndGggPSBcImxvbmdcIixcbiAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwsIG91dHB1dENhbGVuZGFyID0gXCJncmVnb3J5XCIgfSA9IHt9XG4gICkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG91dHB1dENhbGVuZGFyKSkubW9udGhzKGxlbmd0aCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGFycmF5IG9mIHN0YW5kYWxvbmUgd2VlayBuYW1lcy5cbiAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9EYXRlVGltZUZvcm1hdFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgd2Vla2RheSByZXByZXNlbnRhdGlvbiwgc3VjaCBhcyBcIm5hcnJvd1wiLCBcInNob3J0XCIsIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKClbMF0gLy89PiAnTW9uZGF5J1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcpWzBdIC8vPT4gJ01vbidcbiAgICogQGV4YW1wbGUgSW5mby53ZWVrZGF5cygnc2hvcnQnLCB7IGxvY2FsZTogJ2ZyLUNBJyB9KVswXSAvLz0+ICdsdW4uJ1xuICAgKiBAZXhhbXBsZSBJbmZvLndlZWtkYXlzKCdzaG9ydCcsIHsgbG9jYWxlOiAnYXInIH0pWzBdIC8vPT4gJ1x1MDYyN1x1MDY0NFx1MDYyN1x1MDYyQlx1MDY0Nlx1MDY0QVx1MDY0NidcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgd2Vla2RheXMobGVuZ3RoID0gXCJsb25nXCIsIHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCwgbG9jT2JqID0gbnVsbCB9ID0ge30pIHtcbiAgICByZXR1cm4gKGxvY09iaiB8fCBMb2NhbGUuY3JlYXRlKGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBudWxsKSkud2Vla2RheXMobGVuZ3RoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZm9ybWF0IHdlZWsgbmFtZXMuXG4gICAqIEZvcm1hdCB3ZWVrZGF5cyBkaWZmZXIgZnJvbSBzdGFuZGFsb25lIHdlZWtkYXlzIGluIHRoYXQgdGhleSdyZSBtZWFudCB0byBhcHBlYXIgbmV4dCB0byBtb3JlIGRhdGUgaW5mb3JtYXRpb24uIEluIHNvbWUgbGFuZ3VhZ2VzLCB0aGF0XG4gICAqIGNoYW5nZXMgdGhlIHN0cmluZy5cbiAgICogU2VlIHtAbGluayBJbmZvI3dlZWtkYXlzfVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2xlbmd0aD0nbG9uZyddIC0gdGhlIGxlbmd0aCBvZiB0aGUgbW9udGggcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJuYXJyb3dcIiwgXCJzaG9ydFwiLCBcImxvbmdcIi5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9bnVsbF0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm51bWJlcmluZ1N5c3RlbT1udWxsXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NPYmo9bnVsbF0gLSBhbiBleGlzdGluZyBsb2NhbGUgb2JqZWN0IHRvIHVzZVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIHN0YXRpYyB3ZWVrZGF5c0Zvcm1hdChcbiAgICBsZW5ndGggPSBcImxvbmdcIixcbiAgICB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwsIGxvY09iaiA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIHJldHVybiAobG9jT2JqIHx8IExvY2FsZS5jcmVhdGUobG9jYWxlLCBudW1iZXJpbmdTeXN0ZW0sIG51bGwpKS53ZWVrZGF5cyhsZW5ndGgsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBtZXJpZGllbXMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlXSAtIHRoZSBsb2NhbGUgY29kZVxuICAgKiBAZXhhbXBsZSBJbmZvLm1lcmlkaWVtcygpIC8vPT4gWyAnQU0nLCAnUE0nIF1cbiAgICogQGV4YW1wbGUgSW5mby5tZXJpZGllbXMoeyBsb2NhbGU6ICdteScgfSkgLy89PiBbICdcdTEwMTRcdTEwMzZcdTEwMTRcdTEwMDBcdTEwM0EnLCAnXHUxMDBBXHUxMDE0XHUxMDMxJyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIG1lcmlkaWVtcyh7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlKS5tZXJpZGllbXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gYXJyYXkgb2YgZXJhcywgc3VjaCBhcyBbJ0JDJywgJ0FEJ10uIFRoZSBsb2NhbGUgY2FuIGJlIHNwZWNpZmllZCwgYnV0IHRoZSBjYWxlbmRhciBzeXN0ZW0gaXMgYWx3YXlzIEdyZWdvcmlhbi5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtsZW5ndGg9J3Nob3J0J10gLSB0aGUgbGVuZ3RoIG9mIHRoZSBlcmEgcmVwcmVzZW50YXRpb24sIHN1Y2ggYXMgXCJzaG9ydFwiIG9yIFwibG9uZ1wiLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZV0gLSB0aGUgbG9jYWxlIGNvZGVcbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCkgLy89PiBbICdCQycsICdBRCcgXVxuICAgKiBAZXhhbXBsZSBJbmZvLmVyYXMoJ2xvbmcnKSAvLz0+IFsgJ0JlZm9yZSBDaHJpc3QnLCAnQW5ubyBEb21pbmknIF1cbiAgICogQGV4YW1wbGUgSW5mby5lcmFzKCdsb25nJywgeyBsb2NhbGU6ICdmcicgfSkgLy89PiBbICdhdmFudCBKXHUwMEU5c3VzLUNocmlzdCcsICdhcHJcdTAwRThzIEpcdTAwRTlzdXMtQ2hyaXN0JyBdXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIGVyYXMobGVuZ3RoID0gXCJzaG9ydFwiLCB7IGxvY2FsZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgcmV0dXJuIExvY2FsZS5jcmVhdGUobG9jYWxlLCBudWxsLCBcImdyZWdvcnlcIikuZXJhcyhsZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgc2V0IG9mIGF2YWlsYWJsZSBmZWF0dXJlcyBpbiB0aGlzIGVudmlyb25tZW50LlxuICAgKiBTb21lIGZlYXR1cmVzIG9mIEx1eG9uIGFyZSBub3QgYXZhaWxhYmxlIGluIGFsbCBlbnZpcm9ubWVudHMuIEZvciBleGFtcGxlLCBvbiBvbGRlciBicm93c2VycywgcmVsYXRpdmUgdGltZSBmb3JtYXR0aW5nIHN1cHBvcnQgaXMgbm90IGF2YWlsYWJsZS4gVXNlIHRoaXMgZnVuY3Rpb24gdG8gZmlndXJlIG91dCBpZiB0aGF0J3MgdGhlIGNhc2UuXG4gICAqIEtleXM6XG4gICAqICogYHJlbGF0aXZlYDogd2hldGhlciB0aGlzIGVudmlyb25tZW50IHN1cHBvcnRzIHJlbGF0aXZlIHRpbWUgZm9ybWF0dGluZ1xuICAgKiAqIGBsb2NhbGVXZWVrYDogd2hldGhlciB0aGlzIGVudmlyb25tZW50IHN1cHBvcnRzIGRpZmZlcmVudCB3ZWVrZGF5cyBmb3IgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGJhc2VkIG9uIHRoZSBsb2NhbGVcbiAgICogQGV4YW1wbGUgSW5mby5mZWF0dXJlcygpIC8vPT4geyByZWxhdGl2ZTogZmFsc2UsIGxvY2FsZVdlZWs6IHRydWUgfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZmVhdHVyZXMoKSB7XG4gICAgcmV0dXJuIHsgcmVsYXRpdmU6IGhhc1JlbGF0aXZlKCksIGxvY2FsZVdlZWs6IGhhc0xvY2FsZVdlZWtJbmZvKCkgfTtcbiAgfVxufVxuIiwgImltcG9ydCBEdXJhdGlvbiBmcm9tIFwiLi4vZHVyYXRpb24uanNcIjtcblxuZnVuY3Rpb24gZGF5RGlmZihlYXJsaWVyLCBsYXRlcikge1xuICBjb25zdCB1dGNEYXlTdGFydCA9IChkdCkgPT4gZHQudG9VVEMoMCwgeyBrZWVwTG9jYWxUaW1lOiB0cnVlIH0pLnN0YXJ0T2YoXCJkYXlcIikudmFsdWVPZigpLFxuICAgIG1zID0gdXRjRGF5U3RhcnQobGF0ZXIpIC0gdXRjRGF5U3RhcnQoZWFybGllcik7XG4gIHJldHVybiBNYXRoLmZsb29yKER1cmF0aW9uLmZyb21NaWxsaXMobXMpLmFzKFwiZGF5c1wiKSk7XG59XG5cbmZ1bmN0aW9uIGhpZ2hPcmRlckRpZmZzKGN1cnNvciwgbGF0ZXIsIHVuaXRzKSB7XG4gIGNvbnN0IGRpZmZlcnMgPSBbXG4gICAgW1wieWVhcnNcIiwgKGEsIGIpID0+IGIueWVhciAtIGEueWVhcl0sXG4gICAgW1wicXVhcnRlcnNcIiwgKGEsIGIpID0+IGIucXVhcnRlciAtIGEucXVhcnRlciArIChiLnllYXIgLSBhLnllYXIpICogNF0sXG4gICAgW1wibW9udGhzXCIsIChhLCBiKSA9PiBiLm1vbnRoIC0gYS5tb250aCArIChiLnllYXIgLSBhLnllYXIpICogMTJdLFxuICAgIFtcbiAgICAgIFwid2Vla3NcIixcbiAgICAgIChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGRheXMgPSBkYXlEaWZmKGEsIGIpO1xuICAgICAgICByZXR1cm4gKGRheXMgLSAoZGF5cyAlIDcpKSAvIDc7XG4gICAgICB9LFxuICAgIF0sXG4gICAgW1wiZGF5c1wiLCBkYXlEaWZmXSxcbiAgXTtcblxuICBjb25zdCByZXN1bHRzID0ge307XG4gIGNvbnN0IGVhcmxpZXIgPSBjdXJzb3I7XG4gIGxldCBsb3dlc3RPcmRlciwgaGlnaFdhdGVyO1xuXG4gIC8qIFRoaXMgbG9vcCB0cmllcyB0byBkaWZmIHVzaW5nIGxhcmdlciB1bml0cyBmaXJzdC5cbiAgICAgSWYgd2Ugb3ZlcnNob290LCB3ZSBiYWNrdHJhY2sgYW5kIHRyeSB0aGUgbmV4dCBzbWFsbGVyIHVuaXQuXG4gICAgIFwiY3Vyc29yXCIgc3RhcnRzIG91dCBhdCB0aGUgZWFybGllciB0aW1lc3RhbXAgYW5kIG1vdmVzIGNsb3NlciBhbmQgY2xvc2VyIHRvIFwibGF0ZXJcIlxuICAgICBhcyB3ZSB1c2Ugc21hbGxlciBhbmQgc21hbGxlciB1bml0cy5cbiAgICAgaGlnaFdhdGVyIGtlZXBzIHRyYWNrIG9mIHdoZXJlIHdlIHdvdWxkIGJlIGlmIHdlIGFkZGVkIG9uZSBtb3JlIG9mIHRoZSBzbWFsbGVzdCB1bml0LFxuICAgICB0aGlzIGlzIHVzZWQgbGF0ZXIgdG8gcG90ZW50aWFsbHkgY29udmVydCBhbnkgZGlmZmVyZW5jZSBzbWFsbGVyIHRoYW4gdGhlIHNtYWxsZXN0IGhpZ2hlciBvcmRlciB1bml0XG4gICAgIGludG8gYSBmcmFjdGlvbiBvZiB0aGF0IHNtYWxsZXN0IGhpZ2hlciBvcmRlciB1bml0XG4gICovXG4gIGZvciAoY29uc3QgW3VuaXQsIGRpZmZlcl0gb2YgZGlmZmVycykge1xuICAgIGlmICh1bml0cy5pbmRleE9mKHVuaXQpID49IDApIHtcbiAgICAgIGxvd2VzdE9yZGVyID0gdW5pdDtcblxuICAgICAgcmVzdWx0c1t1bml0XSA9IGRpZmZlcihjdXJzb3IsIGxhdGVyKTtcbiAgICAgIGhpZ2hXYXRlciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcblxuICAgICAgaWYgKGhpZ2hXYXRlciA+IGxhdGVyKSB7XG4gICAgICAgIC8vIHdlIG92ZXJzaG90IHRoZSBlbmQgcG9pbnQsIGJhY2t0cmFjayBjdXJzb3IgYnkgMVxuICAgICAgICByZXN1bHRzW3VuaXRdLS07XG4gICAgICAgIGN1cnNvciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcblxuICAgICAgICAvLyBpZiB3ZSBhcmUgc3RpbGwgb3ZlcnNob290aW5nIG5vdywgd2UgbmVlZCB0byBiYWNrdHJhY2sgYWdhaW5cbiAgICAgICAgLy8gdGhpcyBoYXBwZW5zIGluIGNlcnRhaW4gc2l0dWF0aW9ucyB3aGVuIGRpZmZpbmcgdGltZXMgaW4gZGlmZmVyZW50IHpvbmVzLFxuICAgICAgICAvLyBiZWNhdXNlIHRoaXMgY2FsY3VsYXRpb24gaWdub3JlcyB0aW1lIHpvbmVzXG4gICAgICAgIGlmIChjdXJzb3IgPiBsYXRlcikge1xuICAgICAgICAgIC8vIGtlZXAgdGhlIFwib3ZlcnNob3QgYnkgMVwiIGFyb3VuZCBhcyBoaWdoV2F0ZXJcbiAgICAgICAgICBoaWdoV2F0ZXIgPSBjdXJzb3I7XG4gICAgICAgICAgLy8gYmFja3RyYWNrIGN1cnNvciBieSAxXG4gICAgICAgICAgcmVzdWx0c1t1bml0XS0tO1xuICAgICAgICAgIGN1cnNvciA9IGVhcmxpZXIucGx1cyhyZXN1bHRzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3Vyc29yID0gaGlnaFdhdGVyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbY3Vyc29yLCByZXN1bHRzLCBoaWdoV2F0ZXIsIGxvd2VzdE9yZGVyXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgb3B0cykge1xuICBsZXQgW2N1cnNvciwgcmVzdWx0cywgaGlnaFdhdGVyLCBsb3dlc3RPcmRlcl0gPSBoaWdoT3JkZXJEaWZmcyhlYXJsaWVyLCBsYXRlciwgdW5pdHMpO1xuXG4gIGNvbnN0IHJlbWFpbmluZ01pbGxpcyA9IGxhdGVyIC0gY3Vyc29yO1xuXG4gIGNvbnN0IGxvd2VyT3JkZXJVbml0cyA9IHVuaXRzLmZpbHRlcihcbiAgICAodSkgPT4gW1wiaG91cnNcIiwgXCJtaW51dGVzXCIsIFwic2Vjb25kc1wiLCBcIm1pbGxpc2Vjb25kc1wiXS5pbmRleE9mKHUpID49IDBcbiAgKTtcblxuICBpZiAobG93ZXJPcmRlclVuaXRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChoaWdoV2F0ZXIgPCBsYXRlcikge1xuICAgICAgaGlnaFdhdGVyID0gY3Vyc29yLnBsdXMoeyBbbG93ZXN0T3JkZXJdOiAxIH0pO1xuICAgIH1cblxuICAgIGlmIChoaWdoV2F0ZXIgIT09IGN1cnNvcikge1xuICAgICAgcmVzdWx0c1tsb3dlc3RPcmRlcl0gPSAocmVzdWx0c1tsb3dlc3RPcmRlcl0gfHwgMCkgKyByZW1haW5pbmdNaWxsaXMgLyAoaGlnaFdhdGVyIC0gY3Vyc29yKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBkdXJhdGlvbiA9IER1cmF0aW9uLmZyb21PYmplY3QocmVzdWx0cywgb3B0cyk7XG5cbiAgaWYgKGxvd2VyT3JkZXJVbml0cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIER1cmF0aW9uLmZyb21NaWxsaXMocmVtYWluaW5nTWlsbGlzLCBvcHRzKVxuICAgICAgLnNoaWZ0VG8oLi4ubG93ZXJPcmRlclVuaXRzKVxuICAgICAgLnBsdXMoZHVyYXRpb24pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBkdXJhdGlvbjtcbiAgfVxufVxuIiwgImNvbnN0IG51bWJlcmluZ1N5c3RlbXMgPSB7XG4gIGFyYWI6IFwiW1xcdTA2NjAtXFx1MDY2OV1cIixcbiAgYXJhYmV4dDogXCJbXFx1MDZGMC1cXHUwNkY5XVwiLFxuICBiYWxpOiBcIltcXHUxQjUwLVxcdTFCNTldXCIsXG4gIGJlbmc6IFwiW1xcdTA5RTYtXFx1MDlFRl1cIixcbiAgZGV2YTogXCJbXFx1MDk2Ni1cXHUwOTZGXVwiLFxuICBmdWxsd2lkZTogXCJbXFx1RkYxMC1cXHVGRjE5XVwiLFxuICBndWpyOiBcIltcXHUwQUU2LVxcdTBBRUZdXCIsXG4gIGhhbmlkZWM6IFwiW1x1MzAwN3xcdTRFMDB8XHU0RThDfFx1NEUwOXxcdTU2REJ8XHU0RTk0fFx1NTE2RHxcdTRFMDN8XHU1MTZCfFx1NEU1RF1cIixcbiAga2htcjogXCJbXFx1MTdFMC1cXHUxN0U5XVwiLFxuICBrbmRhOiBcIltcXHUwQ0U2LVxcdTBDRUZdXCIsXG4gIGxhb286IFwiW1xcdTBFRDAtXFx1MEVEOV1cIixcbiAgbGltYjogXCJbXFx1MTk0Ni1cXHUxOTRGXVwiLFxuICBtbHltOiBcIltcXHUwRDY2LVxcdTBENkZdXCIsXG4gIG1vbmc6IFwiW1xcdTE4MTAtXFx1MTgxOV1cIixcbiAgbXltcjogXCJbXFx1MTA0MC1cXHUxMDQ5XVwiLFxuICBvcnlhOiBcIltcXHUwQjY2LVxcdTBCNkZdXCIsXG4gIHRhbWxkZWM6IFwiW1xcdTBCRTYtXFx1MEJFRl1cIixcbiAgdGVsdTogXCJbXFx1MEM2Ni1cXHUwQzZGXVwiLFxuICB0aGFpOiBcIltcXHUwRTUwLVxcdTBFNTldXCIsXG4gIHRpYnQ6IFwiW1xcdTBGMjAtXFx1MEYyOV1cIixcbiAgbGF0bjogXCJcXFxcZFwiLFxufTtcblxuY29uc3QgbnVtYmVyaW5nU3lzdGVtc1VURjE2ID0ge1xuICBhcmFiOiBbMTYzMiwgMTY0MV0sXG4gIGFyYWJleHQ6IFsxNzc2LCAxNzg1XSxcbiAgYmFsaTogWzY5OTIsIDcwMDFdLFxuICBiZW5nOiBbMjUzNCwgMjU0M10sXG4gIGRldmE6IFsyNDA2LCAyNDE1XSxcbiAgZnVsbHdpZGU6IFs2NTI5NiwgNjUzMDNdLFxuICBndWpyOiBbMjc5MCwgMjc5OV0sXG4gIGtobXI6IFs2MTEyLCA2MTIxXSxcbiAga25kYTogWzMzMDIsIDMzMTFdLFxuICBsYW9vOiBbMzc5MiwgMzgwMV0sXG4gIGxpbWI6IFs2NDcwLCA2NDc5XSxcbiAgbWx5bTogWzM0MzAsIDM0MzldLFxuICBtb25nOiBbNjE2MCwgNjE2OV0sXG4gIG15bXI6IFs0MTYwLCA0MTY5XSxcbiAgb3J5YTogWzI5MTgsIDI5MjddLFxuICB0YW1sZGVjOiBbMzA0NiwgMzA1NV0sXG4gIHRlbHU6IFszMTc0LCAzMTgzXSxcbiAgdGhhaTogWzM2NjQsIDM2NzNdLFxuICB0aWJ0OiBbMzg3MiwgMzg4MV0sXG59O1xuXG5jb25zdCBoYW5pZGVjQ2hhcnMgPSBudW1iZXJpbmdTeXN0ZW1zLmhhbmlkZWMucmVwbGFjZSgvW1xcW3xcXF1dL2csIFwiXCIpLnNwbGl0KFwiXCIpO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VEaWdpdHMoc3RyKSB7XG4gIGxldCB2YWx1ZSA9IHBhcnNlSW50KHN0ciwgMTApO1xuICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgdmFsdWUgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cbiAgICAgIGlmIChzdHJbaV0uc2VhcmNoKG51bWJlcmluZ1N5c3RlbXMuaGFuaWRlYykgIT09IC0xKSB7XG4gICAgICAgIHZhbHVlICs9IGhhbmlkZWNDaGFycy5pbmRleE9mKHN0cltpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBudW1iZXJpbmdTeXN0ZW1zVVRGMTYpIHtcbiAgICAgICAgICBjb25zdCBbbWluLCBtYXhdID0gbnVtYmVyaW5nU3lzdGVtc1VURjE2W2tleV07XG4gICAgICAgICAgaWYgKGNvZGUgPj0gbWluICYmIGNvZGUgPD0gbWF4KSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjb2RlIC0gbWluO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZ2l0UmVnZXgoeyBudW1iZXJpbmdTeXN0ZW0gfSwgYXBwZW5kID0gXCJcIikge1xuICByZXR1cm4gbmV3IFJlZ0V4cChgJHtudW1iZXJpbmdTeXN0ZW1zW251bWJlcmluZ1N5c3RlbSB8fCBcImxhdG5cIl19JHthcHBlbmR9YCk7XG59XG4iLCAiaW1wb3J0IHsgcGFyc2VNaWxsaXMsIGlzVW5kZWZpbmVkLCB1bnRydW5jYXRlWWVhciwgc2lnbmVkT2Zmc2V0LCBoYXNPd25Qcm9wZXJ0eSB9IGZyb20gXCIuL3V0aWwuanNcIjtcbmltcG9ydCBGb3JtYXR0ZXIgZnJvbSBcIi4vZm9ybWF0dGVyLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBJQU5BWm9uZSBmcm9tIFwiLi4vem9uZXMvSUFOQVpvbmUuanNcIjtcbmltcG9ydCBEYXRlVGltZSBmcm9tIFwiLi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCB7IGRpZ2l0UmVnZXgsIHBhcnNlRGlnaXRzIH0gZnJvbSBcIi4vZGlnaXRzLmpzXCI7XG5pbXBvcnQgeyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvciB9IGZyb20gXCIuLi9lcnJvcnMuanNcIjtcblxuY29uc3QgTUlTU0lOR19GVFAgPSBcIm1pc3NpbmcgSW50bC5EYXRlVGltZUZvcm1hdC5mb3JtYXRUb1BhcnRzIHN1cHBvcnRcIjtcblxuZnVuY3Rpb24gaW50VW5pdChyZWdleCwgcG9zdCA9IChpKSA9PiBpKSB7XG4gIHJldHVybiB7IHJlZ2V4LCBkZXNlcjogKFtzXSkgPT4gcG9zdChwYXJzZURpZ2l0cyhzKSkgfTtcbn1cblxuY29uc3QgTkJTUCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcbmNvbnN0IHNwYWNlT3JOQlNQID0gYFsgJHtOQlNQfV1gO1xuY29uc3Qgc3BhY2VPck5CU1BSZWdFeHAgPSBuZXcgUmVnRXhwKHNwYWNlT3JOQlNQLCBcImdcIik7XG5cbmZ1bmN0aW9uIGZpeExpc3RSZWdleChzKSB7XG4gIC8vIG1ha2UgZG90cyBvcHRpb25hbCBhbmQgYWxzbyBtYWtlIHRoZW0gbGl0ZXJhbFxuICAvLyBtYWtlIHNwYWNlIGFuZCBub24gYnJlYWthYmxlIHNwYWNlIGNoYXJhY3RlcnMgaW50ZXJjaGFuZ2VhYmxlXG4gIHJldHVybiBzLnJlcGxhY2UoL1xcLi9nLCBcIlxcXFwuP1wiKS5yZXBsYWNlKHNwYWNlT3JOQlNQUmVnRXhwLCBzcGFjZU9yTkJTUCk7XG59XG5cbmZ1bmN0aW9uIHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpIHtcbiAgcmV0dXJuIHNcbiAgICAucmVwbGFjZSgvXFwuL2csIFwiXCIpIC8vIGlnbm9yZSBkb3RzIHRoYXQgd2VyZSBtYWRlIG9wdGlvbmFsXG4gICAgLnJlcGxhY2Uoc3BhY2VPck5CU1BSZWdFeHAsIFwiIFwiKSAvLyBpbnRlcmNoYW5nZSBzcGFjZSBhbmQgbmJzcFxuICAgIC50b0xvd2VyQ2FzZSgpO1xufVxuXG5mdW5jdGlvbiBvbmVPZihzdHJpbmdzLCBzdGFydEluZGV4KSB7XG4gIGlmIChzdHJpbmdzID09PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlZ2V4OiBSZWdFeHAoc3RyaW5ncy5tYXAoZml4TGlzdFJlZ2V4KS5qb2luKFwifFwiKSksXG4gICAgICBkZXNlcjogKFtzXSkgPT5cbiAgICAgICAgc3RyaW5ncy5maW5kSW5kZXgoKGkpID0+IHN0cmlwSW5zZW5zaXRpdml0aWVzKHMpID09PSBzdHJpcEluc2Vuc2l0aXZpdGllcyhpKSkgKyBzdGFydEluZGV4LFxuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gb2Zmc2V0KHJlZ2V4LCBncm91cHMpIHtcbiAgcmV0dXJuIHsgcmVnZXgsIGRlc2VyOiAoWywgaCwgbV0pID0+IHNpZ25lZE9mZnNldChoLCBtKSwgZ3JvdXBzIH07XG59XG5cbmZ1bmN0aW9uIHNpbXBsZShyZWdleCkge1xuICByZXR1cm4geyByZWdleCwgZGVzZXI6IChbc10pID0+IHMgfTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlVG9rZW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1tcXC1cXFtcXF17fSgpKis/LixcXFxcXFxeJHwjXFxzXS9nLCBcIlxcXFwkJlwiKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gdG9rZW5cbiAqIEBwYXJhbSB7TG9jYWxlfSBsb2NcbiAqL1xuZnVuY3Rpb24gdW5pdEZvclRva2VuKHRva2VuLCBsb2MpIHtcbiAgY29uc3Qgb25lID0gZGlnaXRSZWdleChsb2MpLFxuICAgIHR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsyfVwiKSxcbiAgICB0aHJlZSA9IGRpZ2l0UmVnZXgobG9jLCBcInszfVwiKSxcbiAgICBmb3VyID0gZGlnaXRSZWdleChsb2MsIFwiezR9XCIpLFxuICAgIHNpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns2fVwiKSxcbiAgICBvbmVPclR3byA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDJ9XCIpLFxuICAgIG9uZVRvVGhyZWUgPSBkaWdpdFJlZ2V4KGxvYywgXCJ7MSwzfVwiKSxcbiAgICBvbmVUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDZ9XCIpLFxuICAgIG9uZVRvTmluZSA9IGRpZ2l0UmVnZXgobG9jLCBcInsxLDl9XCIpLFxuICAgIHR3b1RvRm91ciA9IGRpZ2l0UmVnZXgobG9jLCBcInsyLDR9XCIpLFxuICAgIGZvdXJUb1NpeCA9IGRpZ2l0UmVnZXgobG9jLCBcIns0LDZ9XCIpLFxuICAgIGxpdGVyYWwgPSAodCkgPT4gKHsgcmVnZXg6IFJlZ0V4cChlc2NhcGVUb2tlbih0LnZhbCkpLCBkZXNlcjogKFtzXSkgPT4gcywgbGl0ZXJhbDogdHJ1ZSB9KSxcbiAgICB1bml0YXRlID0gKHQpID0+IHtcbiAgICAgIGlmICh0b2tlbi5saXRlcmFsKSB7XG4gICAgICAgIHJldHVybiBsaXRlcmFsKHQpO1xuICAgICAgfVxuICAgICAgc3dpdGNoICh0LnZhbCkge1xuICAgICAgICAvLyBlcmFcbiAgICAgICAgY2FzZSBcIkdcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLmVyYXMoXCJzaG9ydFwiKSwgMCk7XG4gICAgICAgIGNhc2UgXCJHR1wiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MuZXJhcyhcImxvbmdcIiksIDApO1xuICAgICAgICAvLyB5ZWFyc1xuICAgICAgICBjYXNlIFwieVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvU2l4KTtcbiAgICAgICAgY2FzZSBcInl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAgIGNhc2UgXCJ5eXl5XCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQoZm91cik7XG4gICAgICAgIGNhc2UgXCJ5eXl5eVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KGZvdXJUb1NpeCk7XG4gICAgICAgIGNhc2UgXCJ5eXl5eXlcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChzaXgpO1xuICAgICAgICAvLyBtb250aHNcbiAgICAgICAgY2FzZSBcIk1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJNTVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJNTU1cIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcInNob3J0XCIsIHRydWUpLCAxKTtcbiAgICAgICAgY2FzZSBcIk1NTU1cIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcImxvbmdcIiwgdHJ1ZSksIDEpO1xuICAgICAgICBjYXNlIFwiTFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcIkxMXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIkxMTFwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubW9udGhzKFwic2hvcnRcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgY2FzZSBcIkxMTExcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLm1vbnRocyhcImxvbmdcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgLy8gZGF0ZXNcbiAgICAgICAgY2FzZSBcImRcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJkZFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIC8vIG9yZGluYWxzXG4gICAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lVG9UaHJlZSk7XG4gICAgICAgIGNhc2UgXCJvb29cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0aHJlZSk7XG4gICAgICAgIC8vIHRpbWVcbiAgICAgICAgY2FzZSBcIkhIXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvKTtcbiAgICAgICAgY2FzZSBcIkhcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJoaFwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJoXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwibW1cIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwibVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZU9yVHdvKTtcbiAgICAgICAgY2FzZSBcInFcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJxcVwiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KHR3byk7XG4gICAgICAgIGNhc2UgXCJzXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwic3NcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZVRvVGhyZWUpO1xuICAgICAgICBjYXNlIFwiU1NTXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodGhyZWUpO1xuICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgIHJldHVybiBzaW1wbGUob25lVG9OaW5lKTtcbiAgICAgICAgY2FzZSBcInV1XCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZShvbmVPclR3byk7XG4gICAgICAgIGNhc2UgXCJ1dXVcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChvbmUpO1xuICAgICAgICAvLyBtZXJpZGllbVxuICAgICAgICBjYXNlIFwiYVwiOlxuICAgICAgICAgIHJldHVybiBvbmVPZihsb2MubWVyaWRpZW1zKCksIDApO1xuICAgICAgICAvLyB3ZWVrWWVhciAoaylcbiAgICAgICAgY2FzZSBcImtra2tcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdChmb3VyKTtcbiAgICAgICAgY2FzZSBcImtrXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQodHdvVG9Gb3VyLCB1bnRydW5jYXRlWWVhcik7XG4gICAgICAgIC8vIHdlZWtOdW1iZXIgKFcpXG4gICAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgICAgcmV0dXJuIGludFVuaXQob25lT3JUd28pO1xuICAgICAgICBjYXNlIFwiV1dcIjpcbiAgICAgICAgICByZXR1cm4gaW50VW5pdCh0d28pO1xuICAgICAgICAvLyB3ZWVrZGF5c1xuICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgIHJldHVybiBpbnRVbml0KG9uZSk7XG4gICAgICAgIGNhc2UgXCJFRUVcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwic2hvcnRcIiwgZmFsc2UpLCAxKTtcbiAgICAgICAgY2FzZSBcIkVFRUVcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCBmYWxzZSksIDEpO1xuICAgICAgICBjYXNlIFwiY2NjXCI6XG4gICAgICAgICAgcmV0dXJuIG9uZU9mKGxvYy53ZWVrZGF5cyhcInNob3J0XCIsIHRydWUpLCAxKTtcbiAgICAgICAgY2FzZSBcImNjY2NcIjpcbiAgICAgICAgICByZXR1cm4gb25lT2YobG9jLndlZWtkYXlzKFwibG9uZ1wiLCB0cnVlKSwgMSk7XG4gICAgICAgIC8vIG9mZnNldC96b25lXG4gICAgICAgIGNhc2UgXCJaXCI6XG4gICAgICAgIGNhc2UgXCJaWlwiOlxuICAgICAgICAgIHJldHVybiBvZmZzZXQobmV3IFJlZ0V4cChgKFsrLV0ke29uZU9yVHdvLnNvdXJjZX0pKD86Oigke3R3by5zb3VyY2V9KSk/YCksIDIpO1xuICAgICAgICBjYXNlIFwiWlpaXCI6XG4gICAgICAgICAgcmV0dXJuIG9mZnNldChuZXcgUmVnRXhwKGAoWystXSR7b25lT3JUd28uc291cmNlfSkoJHt0d28uc291cmNlfSk/YCksIDIpO1xuICAgICAgICAvLyB3ZSBkb24ndCBzdXBwb3J0IFpaWlogKFBTVCkgb3IgWlpaWlogKFBhY2lmaWMgU3RhbmRhcmQgVGltZSkgaW4gcGFyc2luZ1xuICAgICAgICAvLyBiZWNhdXNlIHdlIGRvbid0IGhhdmUgYW55IHdheSB0byBmaWd1cmUgb3V0IHdoYXQgdGhleSBhcmVcbiAgICAgICAgY2FzZSBcInpcIjpcbiAgICAgICAgICByZXR1cm4gc2ltcGxlKC9bYS16XystL117MSwyNTZ9Py9pKTtcbiAgICAgICAgLy8gdGhpcyBzcGVjaWFsLWNhc2UgXCJ0b2tlblwiIHJlcHJlc2VudHMgYSBwbGFjZSB3aGVyZSBhIG1hY3JvLXRva2VuIGV4cGFuZGVkIGludG8gYSB3aGl0ZS1zcGFjZSBsaXRlcmFsXG4gICAgICAgIC8vIGluIHRoaXMgY2FzZSB3ZSBhY2NlcHQgYW55IG5vbi1uZXdsaW5lIHdoaXRlLXNwYWNlXG4gICAgICAgIGNhc2UgXCIgXCI6XG4gICAgICAgICAgcmV0dXJuIHNpbXBsZSgvW15cXFNcXG5cXHJdLyk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIGxpdGVyYWwodCk7XG4gICAgICB9XG4gICAgfTtcblxuICBjb25zdCB1bml0ID0gdW5pdGF0ZSh0b2tlbikgfHwge1xuICAgIGludmFsaWRSZWFzb246IE1JU1NJTkdfRlRQLFxuICB9O1xuXG4gIHVuaXQudG9rZW4gPSB0b2tlbjtcblxuICByZXR1cm4gdW5pdDtcbn1cblxuY29uc3QgcGFydFR5cGVTdHlsZVRvVG9rZW5WYWwgPSB7XG4gIHllYXI6IHtcbiAgICBcIjItZGlnaXRcIjogXCJ5eVwiLFxuICAgIG51bWVyaWM6IFwieXl5eXlcIixcbiAgfSxcbiAgbW9udGg6IHtcbiAgICBudW1lcmljOiBcIk1cIixcbiAgICBcIjItZGlnaXRcIjogXCJNTVwiLFxuICAgIHNob3J0OiBcIk1NTVwiLFxuICAgIGxvbmc6IFwiTU1NTVwiLFxuICB9LFxuICBkYXk6IHtcbiAgICBudW1lcmljOiBcImRcIixcbiAgICBcIjItZGlnaXRcIjogXCJkZFwiLFxuICB9LFxuICB3ZWVrZGF5OiB7XG4gICAgc2hvcnQ6IFwiRUVFXCIsXG4gICAgbG9uZzogXCJFRUVFXCIsXG4gIH0sXG4gIGRheXBlcmlvZDogXCJhXCIsXG4gIGRheVBlcmlvZDogXCJhXCIsXG4gIGhvdXIxMjoge1xuICAgIG51bWVyaWM6IFwiaFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcImhoXCIsXG4gIH0sXG4gIGhvdXIyNDoge1xuICAgIG51bWVyaWM6IFwiSFwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIkhIXCIsXG4gIH0sXG4gIG1pbnV0ZToge1xuICAgIG51bWVyaWM6IFwibVwiLFxuICAgIFwiMi1kaWdpdFwiOiBcIm1tXCIsXG4gIH0sXG4gIHNlY29uZDoge1xuICAgIG51bWVyaWM6IFwic1wiLFxuICAgIFwiMi1kaWdpdFwiOiBcInNzXCIsXG4gIH0sXG4gIHRpbWVab25lTmFtZToge1xuICAgIGxvbmc6IFwiWlpaWlpcIixcbiAgICBzaG9ydDogXCJaWlpcIixcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIHRva2VuRm9yUGFydChwYXJ0LCBmb3JtYXRPcHRzLCByZXNvbHZlZE9wdHMpIHtcbiAgY29uc3QgeyB0eXBlLCB2YWx1ZSB9ID0gcGFydDtcblxuICBpZiAodHlwZSA9PT0gXCJsaXRlcmFsXCIpIHtcbiAgICBjb25zdCBpc1NwYWNlID0gL15cXHMrJC8udGVzdCh2YWx1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxpdGVyYWw6ICFpc1NwYWNlLFxuICAgICAgdmFsOiBpc1NwYWNlID8gXCIgXCIgOiB2YWx1ZSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3Qgc3R5bGUgPSBmb3JtYXRPcHRzW3R5cGVdO1xuXG4gIC8vIFRoZSB1c2VyIG1pZ2h0IGhhdmUgZXhwbGljaXRseSBzcGVjaWZpZWQgaG91cjEyIG9yIGhvdXJDeWNsZVxuICAvLyBpZiBzbywgcmVzcGVjdCB0aGVpciBkZWNpc2lvblxuICAvLyBpZiBub3QsIHJlZmVyIGJhY2sgdG8gdGhlIHJlc29sdmVkT3B0cywgd2hpY2ggYXJlIGJhc2VkIG9uIHRoZSBsb2NhbGVcbiAgbGV0IGFjdHVhbFR5cGUgPSB0eXBlO1xuICBpZiAodHlwZSA9PT0gXCJob3VyXCIpIHtcbiAgICBpZiAoZm9ybWF0T3B0cy5ob3VyMTIgIT0gbnVsbCkge1xuICAgICAgYWN0dWFsVHlwZSA9IGZvcm1hdE9wdHMuaG91cjEyID8gXCJob3VyMTJcIiA6IFwiaG91cjI0XCI7XG4gICAgfSBlbHNlIGlmIChmb3JtYXRPcHRzLmhvdXJDeWNsZSAhPSBudWxsKSB7XG4gICAgICBpZiAoZm9ybWF0T3B0cy5ob3VyQ3ljbGUgPT09IFwiaDExXCIgfHwgZm9ybWF0T3B0cy5ob3VyQ3ljbGUgPT09IFwiaDEyXCIpIHtcbiAgICAgICAgYWN0dWFsVHlwZSA9IFwiaG91cjEyXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3R1YWxUeXBlID0gXCJob3VyMjRcIjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdG9rZW5zIG9ubHkgZGlmZmVyZW50aWF0ZSBiZXR3ZWVuIDI0IGhvdXJzIG9yIG5vdCxcbiAgICAgIC8vIHNvIHdlIGRvIG5vdCBuZWVkIHRvIGNoZWNrIGhvdXJDeWNsZSBoZXJlLCB3aGljaCBpcyBsZXNzIHN1cHBvcnRlZCBhbnl3YXlzXG4gICAgICBhY3R1YWxUeXBlID0gcmVzb2x2ZWRPcHRzLmhvdXIxMiA/IFwiaG91cjEyXCIgOiBcImhvdXIyNFwiO1xuICAgIH1cbiAgfVxuICBsZXQgdmFsID0gcGFydFR5cGVTdHlsZVRvVG9rZW5WYWxbYWN0dWFsVHlwZV07XG4gIGlmICh0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiKSB7XG4gICAgdmFsID0gdmFsW3N0eWxlXTtcbiAgfVxuXG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGl0ZXJhbDogZmFsc2UsXG4gICAgICB2YWwsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUmVnZXgodW5pdHMpIHtcbiAgY29uc3QgcmUgPSB1bml0cy5tYXAoKHUpID0+IHUucmVnZXgpLnJlZHVjZSgoZiwgcikgPT4gYCR7Zn0oJHtyLnNvdXJjZX0pYCwgXCJcIik7XG4gIHJldHVybiBbYF4ke3JlfSRgLCB1bml0c107XG59XG5cbmZ1bmN0aW9uIG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpIHtcbiAgY29uc3QgbWF0Y2hlcyA9IGlucHV0Lm1hdGNoKHJlZ2V4KTtcblxuICBpZiAobWF0Y2hlcykge1xuICAgIGNvbnN0IGFsbCA9IHt9O1xuICAgIGxldCBtYXRjaEluZGV4ID0gMTtcbiAgICBmb3IgKGNvbnN0IGkgaW4gaGFuZGxlcnMpIHtcbiAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eShoYW5kbGVycywgaSkpIHtcbiAgICAgICAgY29uc3QgaCA9IGhhbmRsZXJzW2ldLFxuICAgICAgICAgIGdyb3VwcyA9IGguZ3JvdXBzID8gaC5ncm91cHMgKyAxIDogMTtcbiAgICAgICAgaWYgKCFoLmxpdGVyYWwgJiYgaC50b2tlbikge1xuICAgICAgICAgIGFsbFtoLnRva2VuLnZhbFswXV0gPSBoLmRlc2VyKG1hdGNoZXMuc2xpY2UobWF0Y2hJbmRleCwgbWF0Y2hJbmRleCArIGdyb3VwcykpO1xuICAgICAgICB9XG4gICAgICAgIG1hdGNoSW5kZXggKz0gZ3JvdXBzO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW21hdGNoZXMsIGFsbF07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFttYXRjaGVzLCB7fV07XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0ZVRpbWVGcm9tTWF0Y2hlcyhtYXRjaGVzKSB7XG4gIGNvbnN0IHRvRmllbGQgPSAodG9rZW4pID0+IHtcbiAgICBzd2l0Y2ggKHRva2VuKSB7XG4gICAgICBjYXNlIFwiU1wiOlxuICAgICAgICByZXR1cm4gXCJtaWxsaXNlY29uZFwiO1xuICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgcmV0dXJuIFwic2Vjb25kXCI7XG4gICAgICBjYXNlIFwibVwiOlxuICAgICAgICByZXR1cm4gXCJtaW51dGVcIjtcbiAgICAgIGNhc2UgXCJoXCI6XG4gICAgICBjYXNlIFwiSFwiOlxuICAgICAgICByZXR1cm4gXCJob3VyXCI7XG4gICAgICBjYXNlIFwiZFwiOlxuICAgICAgICByZXR1cm4gXCJkYXlcIjtcbiAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgIHJldHVybiBcIm9yZGluYWxcIjtcbiAgICAgIGNhc2UgXCJMXCI6XG4gICAgICBjYXNlIFwiTVwiOlxuICAgICAgICByZXR1cm4gXCJtb250aFwiO1xuICAgICAgY2FzZSBcInlcIjpcbiAgICAgICAgcmV0dXJuIFwieWVhclwiO1xuICAgICAgY2FzZSBcIkVcIjpcbiAgICAgIGNhc2UgXCJjXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtkYXlcIjtcbiAgICAgIGNhc2UgXCJXXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtOdW1iZXJcIjtcbiAgICAgIGNhc2UgXCJrXCI6XG4gICAgICAgIHJldHVybiBcIndlZWtZZWFyXCI7XG4gICAgICBjYXNlIFwicVwiOlxuICAgICAgICByZXR1cm4gXCJxdWFydGVyXCI7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgbGV0IHpvbmUgPSBudWxsO1xuICBsZXQgc3BlY2lmaWNPZmZzZXQ7XG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy56KSkge1xuICAgIHpvbmUgPSBJQU5BWm9uZS5jcmVhdGUobWF0Y2hlcy56KTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5aKSkge1xuICAgIGlmICghem9uZSkge1xuICAgICAgem9uZSA9IG5ldyBGaXhlZE9mZnNldFpvbmUobWF0Y2hlcy5aKTtcbiAgICB9XG4gICAgc3BlY2lmaWNPZmZzZXQgPSBtYXRjaGVzLlo7XG4gIH1cblxuICBpZiAoIWlzVW5kZWZpbmVkKG1hdGNoZXMucSkpIHtcbiAgICBtYXRjaGVzLk0gPSAobWF0Y2hlcy5xIC0gMSkgKiAzICsgMTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy5oKSkge1xuICAgIGlmIChtYXRjaGVzLmggPCAxMiAmJiBtYXRjaGVzLmEgPT09IDEpIHtcbiAgICAgIG1hdGNoZXMuaCArPSAxMjtcbiAgICB9IGVsc2UgaWYgKG1hdGNoZXMuaCA9PT0gMTIgJiYgbWF0Y2hlcy5hID09PSAwKSB7XG4gICAgICBtYXRjaGVzLmggPSAwO1xuICAgIH1cbiAgfVxuXG4gIGlmIChtYXRjaGVzLkcgPT09IDAgJiYgbWF0Y2hlcy55KSB7XG4gICAgbWF0Y2hlcy55ID0gLW1hdGNoZXMueTtcbiAgfVxuXG4gIGlmICghaXNVbmRlZmluZWQobWF0Y2hlcy51KSkge1xuICAgIG1hdGNoZXMuUyA9IHBhcnNlTWlsbGlzKG1hdGNoZXMudSk7XG4gIH1cblxuICBjb25zdCB2YWxzID0gT2JqZWN0LmtleXMobWF0Y2hlcykucmVkdWNlKChyLCBrKSA9PiB7XG4gICAgY29uc3QgZiA9IHRvRmllbGQoayk7XG4gICAgaWYgKGYpIHtcbiAgICAgIHJbZl0gPSBtYXRjaGVzW2tdO1xuICAgIH1cblxuICAgIHJldHVybiByO1xuICB9LCB7fSk7XG5cbiAgcmV0dXJuIFt2YWxzLCB6b25lLCBzcGVjaWZpY09mZnNldF07XG59XG5cbmxldCBkdW1teURhdGVUaW1lQ2FjaGUgPSBudWxsO1xuXG5mdW5jdGlvbiBnZXREdW1teURhdGVUaW1lKCkge1xuICBpZiAoIWR1bW15RGF0ZVRpbWVDYWNoZSkge1xuICAgIGR1bW15RGF0ZVRpbWVDYWNoZSA9IERhdGVUaW1lLmZyb21NaWxsaXMoMTU1NTU1NTU1NTU1NSk7XG4gIH1cblxuICByZXR1cm4gZHVtbXlEYXRlVGltZUNhY2hlO1xufVxuXG5mdW5jdGlvbiBtYXliZUV4cGFuZE1hY3JvVG9rZW4odG9rZW4sIGxvY2FsZSkge1xuICBpZiAodG9rZW4ubGl0ZXJhbCkge1xuICAgIHJldHVybiB0b2tlbjtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdE9wdHMgPSBGb3JtYXR0ZXIubWFjcm9Ub2tlblRvRm9ybWF0T3B0cyh0b2tlbi52YWwpO1xuICBjb25zdCB0b2tlbnMgPSBmb3JtYXRPcHRzVG9Ub2tlbnMoZm9ybWF0T3B0cywgbG9jYWxlKTtcblxuICBpZiAodG9rZW5zID09IG51bGwgfHwgdG9rZW5zLmluY2x1ZGVzKHVuZGVmaW5lZCkpIHtcbiAgICByZXR1cm4gdG9rZW47XG4gIH1cblxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kTWFjcm9Ub2tlbnModG9rZW5zLCBsb2NhbGUpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQoLi4udG9rZW5zLm1hcCgodCkgPT4gbWF5YmVFeHBhbmRNYWNyb1Rva2VuKHQsIGxvY2FsZSkpKTtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgY29uc3QgdG9rZW5zID0gZXhwYW5kTWFjcm9Ub2tlbnMoRm9ybWF0dGVyLnBhcnNlRm9ybWF0KGZvcm1hdCksIGxvY2FsZSksXG4gICAgdW5pdHMgPSB0b2tlbnMubWFwKCh0KSA9PiB1bml0Rm9yVG9rZW4odCwgbG9jYWxlKSksXG4gICAgZGlzcXVhbGlmeWluZ1VuaXQgPSB1bml0cy5maW5kKCh0KSA9PiB0LmludmFsaWRSZWFzb24pO1xuXG4gIGlmIChkaXNxdWFsaWZ5aW5nVW5pdCkge1xuICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIGludmFsaWRSZWFzb246IGRpc3F1YWxpZnlpbmdVbml0LmludmFsaWRSZWFzb24gfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBbcmVnZXhTdHJpbmcsIGhhbmRsZXJzXSA9IGJ1aWxkUmVnZXgodW5pdHMpLFxuICAgICAgcmVnZXggPSBSZWdFeHAocmVnZXhTdHJpbmcsIFwiaVwiKSxcbiAgICAgIFtyYXdNYXRjaGVzLCBtYXRjaGVzXSA9IG1hdGNoKGlucHV0LCByZWdleCwgaGFuZGxlcnMpLFxuICAgICAgW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXRdID0gbWF0Y2hlc1xuICAgICAgICA/IGRhdGVUaW1lRnJvbU1hdGNoZXMobWF0Y2hlcylcbiAgICAgICAgOiBbbnVsbCwgbnVsbCwgdW5kZWZpbmVkXTtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkobWF0Y2hlcywgXCJhXCIpICYmIGhhc093blByb3BlcnR5KG1hdGNoZXMsIFwiSFwiKSkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbid0IGluY2x1ZGUgbWVyaWRpZW0gd2hlbiBzcGVjaWZ5aW5nIDI0LWhvdXIgZm9ybWF0XCJcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB7IGlucHV0LCB0b2tlbnMsIHJlZ2V4LCByYXdNYXRjaGVzLCBtYXRjaGVzLCByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0IH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpIHtcbiAgY29uc3QgeyByZXN1bHQsIHpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkUmVhc29uIH0gPSBleHBsYWluRnJvbVRva2Vucyhsb2NhbGUsIGlucHV0LCBmb3JtYXQpO1xuICByZXR1cm4gW3Jlc3VsdCwgem9uZSwgc3BlY2lmaWNPZmZzZXQsIGludmFsaWRSZWFzb25dO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIGxvY2FsZSkge1xuICBpZiAoIWZvcm1hdE9wdHMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlciA9IEZvcm1hdHRlci5jcmVhdGUobG9jYWxlLCBmb3JtYXRPcHRzKTtcbiAgY29uc3QgZGYgPSBmb3JtYXR0ZXIuZHRGb3JtYXR0ZXIoZ2V0RHVtbXlEYXRlVGltZSgpKTtcbiAgY29uc3QgcGFydHMgPSBkZi5mb3JtYXRUb1BhcnRzKCk7XG4gIGNvbnN0IHJlc29sdmVkT3B0cyA9IGRmLnJlc29sdmVkT3B0aW9ucygpO1xuICByZXR1cm4gcGFydHMubWFwKChwKSA9PiB0b2tlbkZvclBhcnQocCwgZm9ybWF0T3B0cywgcmVzb2x2ZWRPcHRzKSk7XG59XG4iLCAiaW1wb3J0IER1cmF0aW9uIGZyb20gXCIuL2R1cmF0aW9uLmpzXCI7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSBcIi4vaW50ZXJ2YWwuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuaW1wb3J0IEluZm8gZnJvbSBcIi4vaW5mby5qc1wiO1xuaW1wb3J0IEZvcm1hdHRlciBmcm9tIFwiLi9pbXBsL2Zvcm1hdHRlci5qc1wiO1xuaW1wb3J0IEZpeGVkT2Zmc2V0Wm9uZSBmcm9tIFwiLi96b25lcy9maXhlZE9mZnNldFpvbmUuanNcIjtcbmltcG9ydCBMb2NhbGUgZnJvbSBcIi4vaW1wbC9sb2NhbGUuanNcIjtcbmltcG9ydCB7XG4gIGlzVW5kZWZpbmVkLFxuICBtYXliZUFycmF5LFxuICBpc0RhdGUsXG4gIGlzTnVtYmVyLFxuICBiZXN0QnksXG4gIGRheXNJbk1vbnRoLFxuICBkYXlzSW5ZZWFyLFxuICBpc0xlYXBZZWFyLFxuICB3ZWVrc0luV2Vla1llYXIsXG4gIG5vcm1hbGl6ZU9iamVjdCxcbiAgcm91bmRUbyxcbiAgb2JqVG9Mb2NhbFRTLFxuICBwYWRTdGFydCxcbn0gZnJvbSBcIi4vaW1wbC91dGlsLmpzXCI7XG5pbXBvcnQgeyBub3JtYWxpemVab25lIH0gZnJvbSBcIi4vaW1wbC96b25lVXRpbC5qc1wiO1xuaW1wb3J0IGRpZmYgZnJvbSBcIi4vaW1wbC9kaWZmLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVJGQzI4MjJEYXRlLCBwYXJzZUlTT0RhdGUsIHBhcnNlSFRUUERhdGUsIHBhcnNlU1FMIH0gZnJvbSBcIi4vaW1wbC9yZWdleFBhcnNlci5qc1wiO1xuaW1wb3J0IHtcbiAgcGFyc2VGcm9tVG9rZW5zLFxuICBleHBsYWluRnJvbVRva2VucyxcbiAgZm9ybWF0T3B0c1RvVG9rZW5zLFxuICBleHBhbmRNYWNyb1Rva2Vucyxcbn0gZnJvbSBcIi4vaW1wbC90b2tlblBhcnNlci5qc1wiO1xuaW1wb3J0IHtcbiAgZ3JlZ29yaWFuVG9XZWVrLFxuICB3ZWVrVG9HcmVnb3JpYW4sXG4gIGdyZWdvcmlhblRvT3JkaW5hbCxcbiAgb3JkaW5hbFRvR3JlZ29yaWFuLFxuICBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YSxcbiAgaGFzSW52YWxpZFdlZWtEYXRhLFxuICBoYXNJbnZhbGlkT3JkaW5hbERhdGEsXG4gIGhhc0ludmFsaWRUaW1lRGF0YSxcbiAgdXNlc0xvY2FsV2Vla1ZhbHVlcyxcbiAgaXNvV2Vla2RheVRvTG9jYWwsXG59IGZyb20gXCIuL2ltcGwvY29udmVyc2lvbnMuanNcIjtcbmltcG9ydCAqIGFzIEZvcm1hdHMgZnJvbSBcIi4vaW1wbC9mb3JtYXRzLmpzXCI7XG5pbXBvcnQge1xuICBJbnZhbGlkQXJndW1lbnRFcnJvcixcbiAgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IsXG4gIEludmFsaWRVbml0RXJyb3IsXG4gIEludmFsaWREYXRlVGltZUVycm9yLFxufSBmcm9tIFwiLi9lcnJvcnMuanNcIjtcbmltcG9ydCBJbnZhbGlkIGZyb20gXCIuL2ltcGwvaW52YWxpZC5qc1wiO1xuXG5jb25zdCBJTlZBTElEID0gXCJJbnZhbGlkIERhdGVUaW1lXCI7XG5jb25zdCBNQVhfREFURSA9IDguNjRlMTU7XG5cbmZ1bmN0aW9uIHVuc3VwcG9ydGVkWm9uZSh6b25lKSB7XG4gIHJldHVybiBuZXcgSW52YWxpZChcInVuc3VwcG9ydGVkIHpvbmVcIiwgYHRoZSB6b25lIFwiJHt6b25lLm5hbWV9XCIgaXMgbm90IHN1cHBvcnRlZGApO1xufVxuXG4vLyB3ZSBjYWNoZSB3ZWVrIGRhdGEgb24gdGhlIERUIG9iamVjdCBhbmQgdGhpcyBpbnRlcm1lZGlhdGVzIHRoZSBjYWNoZVxuLyoqXG4gKiBAcGFyYW0ge0RhdGVUaW1lfSBkdFxuICovXG5mdW5jdGlvbiBwb3NzaWJseUNhY2hlZFdlZWtEYXRhKGR0KSB7XG4gIGlmIChkdC53ZWVrRGF0YSA9PT0gbnVsbCkge1xuICAgIGR0LndlZWtEYXRhID0gZ3JlZ29yaWFuVG9XZWVrKGR0LmMpO1xuICB9XG4gIHJldHVybiBkdC53ZWVrRGF0YTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RhdGVUaW1lfSBkdFxuICovXG5mdW5jdGlvbiBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEoZHQpIHtcbiAgaWYgKGR0LmxvY2FsV2Vla0RhdGEgPT09IG51bGwpIHtcbiAgICBkdC5sb2NhbFdlZWtEYXRhID0gZ3JlZ29yaWFuVG9XZWVrKFxuICAgICAgZHQuYyxcbiAgICAgIGR0LmxvYy5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxcbiAgICAgIGR0LmxvYy5nZXRTdGFydE9mV2VlaygpXG4gICAgKTtcbiAgfVxuICByZXR1cm4gZHQubG9jYWxXZWVrRGF0YTtcbn1cblxuLy8gY2xvbmUgcmVhbGx5IG1lYW5zLCBcIm1ha2UgYSBuZXcgb2JqZWN0IHdpdGggdGhlc2UgbW9kaWZpY2F0aW9uc1wiLiBhbGwgXCJzZXR0ZXJzXCIgcmVhbGx5IHVzZSB0aGlzXG4vLyB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHdoaWxlIG9ubHkgY2hhbmdpbmcgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuZnVuY3Rpb24gY2xvbmUoaW5zdCwgYWx0cykge1xuICBjb25zdCBjdXJyZW50ID0ge1xuICAgIHRzOiBpbnN0LnRzLFxuICAgIHpvbmU6IGluc3Quem9uZSxcbiAgICBjOiBpbnN0LmMsXG4gICAgbzogaW5zdC5vLFxuICAgIGxvYzogaW5zdC5sb2MsXG4gICAgaW52YWxpZDogaW5zdC5pbnZhbGlkLFxuICB9O1xuICByZXR1cm4gbmV3IERhdGVUaW1lKHsgLi4uY3VycmVudCwgLi4uYWx0cywgb2xkOiBjdXJyZW50IH0pO1xufVxuXG4vLyBmaW5kIHRoZSByaWdodCBvZmZzZXQgYSBnaXZlbiBsb2NhbCB0aW1lLiBUaGUgbyBpbnB1dCBpcyBvdXIgZ3Vlc3MsIHdoaWNoIGRldGVybWluZXMgd2hpY2hcbi8vIG9mZnNldCB3ZSdsbCBwaWNrIGluIGFtYmlndW91cyBjYXNlcyAoZS5nLiB0aGVyZSBhcmUgdHdvIDMgQU1zIGIvYyBGYWxsYmFjayBEU1QpXG5mdW5jdGlvbiBmaXhPZmZzZXQobG9jYWxUUywgbywgdHopIHtcbiAgLy8gT3VyIFVUQyB0aW1lIGlzIGp1c3QgYSBndWVzcyBiZWNhdXNlIG91ciBvZmZzZXQgaXMganVzdCBhIGd1ZXNzXG4gIGxldCB1dGNHdWVzcyA9IGxvY2FsVFMgLSBvICogNjAgKiAxMDAwO1xuXG4gIC8vIFRlc3Qgd2hldGhlciB0aGUgem9uZSBtYXRjaGVzIHRoZSBvZmZzZXQgZm9yIHRoaXMgdHNcbiAgY29uc3QgbzIgPSB0ei5vZmZzZXQodXRjR3Vlc3MpO1xuXG4gIC8vIElmIHNvLCBvZmZzZXQgZGlkbid0IGNoYW5nZSBhbmQgd2UncmUgZG9uZVxuICBpZiAobyA9PT0gbzIpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvXTtcbiAgfVxuXG4gIC8vIElmIG5vdCwgY2hhbmdlIHRoZSB0cyBieSB0aGUgZGlmZmVyZW5jZSBpbiB0aGUgb2Zmc2V0XG4gIHV0Y0d1ZXNzIC09IChvMiAtIG8pICogNjAgKiAxMDAwO1xuXG4gIC8vIElmIHRoYXQgZ2l2ZXMgdXMgdGhlIGxvY2FsIHRpbWUgd2Ugd2FudCwgd2UncmUgZG9uZVxuICBjb25zdCBvMyA9IHR6Lm9mZnNldCh1dGNHdWVzcyk7XG4gIGlmIChvMiA9PT0gbzMpIHtcbiAgICByZXR1cm4gW3V0Y0d1ZXNzLCBvMl07XG4gIH1cblxuICAvLyBJZiBpdCdzIGRpZmZlcmVudCwgd2UncmUgaW4gYSBob2xlIHRpbWUuIFRoZSBvZmZzZXQgaGFzIGNoYW5nZWQsIGJ1dCB0aGUgd2UgZG9uJ3QgYWRqdXN0IHRoZSB0aW1lXG4gIHJldHVybiBbbG9jYWxUUyAtIE1hdGgubWluKG8yLCBvMykgKiA2MCAqIDEwMDAsIE1hdGgubWF4KG8yLCBvMyldO1xufVxuXG4vLyBjb252ZXJ0IGFuIGVwb2NoIHRpbWVzdGFtcCBpbnRvIGEgY2FsZW5kYXIgb2JqZWN0IHdpdGggdGhlIGdpdmVuIG9mZnNldFxuZnVuY3Rpb24gdHNUb09iaih0cywgb2Zmc2V0KSB7XG4gIHRzICs9IG9mZnNldCAqIDYwICogMTAwMDtcblxuICBjb25zdCBkID0gbmV3IERhdGUodHMpO1xuXG4gIHJldHVybiB7XG4gICAgeWVhcjogZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIG1vbnRoOiBkLmdldFVUQ01vbnRoKCkgKyAxLFxuICAgIGRheTogZC5nZXRVVENEYXRlKCksXG4gICAgaG91cjogZC5nZXRVVENIb3VycygpLFxuICAgIG1pbnV0ZTogZC5nZXRVVENNaW51dGVzKCksXG4gICAgc2Vjb25kOiBkLmdldFVUQ1NlY29uZHMoKSxcbiAgICBtaWxsaXNlY29uZDogZC5nZXRVVENNaWxsaXNlY29uZHMoKSxcbiAgfTtcbn1cblxuLy8gY29udmVydCBhIGNhbGVuZGFyIG9iamVjdCB0byBhIGVwb2NoIHRpbWVzdGFtcFxuZnVuY3Rpb24gb2JqVG9UUyhvYmosIG9mZnNldCwgem9uZSkge1xuICByZXR1cm4gZml4T2Zmc2V0KG9ialRvTG9jYWxUUyhvYmopLCBvZmZzZXQsIHpvbmUpO1xufVxuXG4vLyBjcmVhdGUgYSBuZXcgRFQgaW5zdGFuY2UgYnkgYWRkaW5nIGEgZHVyYXRpb24sIGFkanVzdGluZyBmb3IgRFNUc1xuZnVuY3Rpb24gYWRqdXN0VGltZShpbnN0LCBkdXIpIHtcbiAgY29uc3Qgb1ByZSA9IGluc3QubyxcbiAgICB5ZWFyID0gaW5zdC5jLnllYXIgKyBNYXRoLnRydW5jKGR1ci55ZWFycyksXG4gICAgbW9udGggPSBpbnN0LmMubW9udGggKyBNYXRoLnRydW5jKGR1ci5tb250aHMpICsgTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpICogMyxcbiAgICBjID0ge1xuICAgICAgLi4uaW5zdC5jLFxuICAgICAgeWVhcixcbiAgICAgIG1vbnRoLFxuICAgICAgZGF5OlxuICAgICAgICBNYXRoLm1pbihpbnN0LmMuZGF5LCBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkpICtcbiAgICAgICAgTWF0aC50cnVuYyhkdXIuZGF5cykgK1xuICAgICAgICBNYXRoLnRydW5jKGR1ci53ZWVrcykgKiA3LFxuICAgIH0sXG4gICAgbWlsbGlzVG9BZGQgPSBEdXJhdGlvbi5mcm9tT2JqZWN0KHtcbiAgICAgIHllYXJzOiBkdXIueWVhcnMgLSBNYXRoLnRydW5jKGR1ci55ZWFycyksXG4gICAgICBxdWFydGVyczogZHVyLnF1YXJ0ZXJzIC0gTWF0aC50cnVuYyhkdXIucXVhcnRlcnMpLFxuICAgICAgbW9udGhzOiBkdXIubW9udGhzIC0gTWF0aC50cnVuYyhkdXIubW9udGhzKSxcbiAgICAgIHdlZWtzOiBkdXIud2Vla3MgLSBNYXRoLnRydW5jKGR1ci53ZWVrcyksXG4gICAgICBkYXlzOiBkdXIuZGF5cyAtIE1hdGgudHJ1bmMoZHVyLmRheXMpLFxuICAgICAgaG91cnM6IGR1ci5ob3VycyxcbiAgICAgIG1pbnV0ZXM6IGR1ci5taW51dGVzLFxuICAgICAgc2Vjb25kczogZHVyLnNlY29uZHMsXG4gICAgICBtaWxsaXNlY29uZHM6IGR1ci5taWxsaXNlY29uZHMsXG4gICAgfSkuYXMoXCJtaWxsaXNlY29uZHNcIiksXG4gICAgbG9jYWxUUyA9IG9ialRvTG9jYWxUUyhjKTtcblxuICBsZXQgW3RzLCBvXSA9IGZpeE9mZnNldChsb2NhbFRTLCBvUHJlLCBpbnN0LnpvbmUpO1xuXG4gIGlmIChtaWxsaXNUb0FkZCAhPT0gMCkge1xuICAgIHRzICs9IG1pbGxpc1RvQWRkO1xuICAgIC8vIHRoYXQgY291bGQgaGF2ZSBjaGFuZ2VkIHRoZSBvZmZzZXQgYnkgZ29pbmcgb3ZlciBhIERTVCwgYnV0IHdlIHdhbnQgdG8ga2VlcCB0aGUgdHMgdGhlIHNhbWVcbiAgICBvID0gaW5zdC56b25lLm9mZnNldCh0cyk7XG4gIH1cblxuICByZXR1cm4geyB0cywgbyB9O1xufVxuXG4vLyBoZWxwZXIgdXNlZnVsIGluIHR1cm5pbmcgdGhlIHJlc3VsdHMgb2YgcGFyc2luZyBpbnRvIHJlYWwgZGF0ZXNcbi8vIGJ5IGhhbmRsaW5nIHRoZSB6b25lIG9wdGlvbnNcbmZ1bmN0aW9uIHBhcnNlRGF0YVRvRGF0ZVRpbWUocGFyc2VkLCBwYXJzZWRab25lLCBvcHRzLCBmb3JtYXQsIHRleHQsIHNwZWNpZmljT2Zmc2V0KSB7XG4gIGNvbnN0IHsgc2V0Wm9uZSwgem9uZSB9ID0gb3B0cztcbiAgaWYgKChwYXJzZWQgJiYgT2JqZWN0LmtleXMocGFyc2VkKS5sZW5ndGggIT09IDApIHx8IHBhcnNlZFpvbmUpIHtcbiAgICBjb25zdCBpbnRlcnByZXRhdGlvblpvbmUgPSBwYXJzZWRab25lIHx8IHpvbmUsXG4gICAgICBpbnN0ID0gRGF0ZVRpbWUuZnJvbU9iamVjdChwYXJzZWQsIHtcbiAgICAgICAgLi4ub3B0cyxcbiAgICAgICAgem9uZTogaW50ZXJwcmV0YXRpb25ab25lLFxuICAgICAgICBzcGVjaWZpY09mZnNldCxcbiAgICAgIH0pO1xuICAgIHJldHVybiBzZXRab25lID8gaW5zdCA6IGluc3Quc2V0Wm9uZSh6b25lKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChcbiAgICAgIG5ldyBJbnZhbGlkKFwidW5wYXJzYWJsZVwiLCBgdGhlIGlucHV0IFwiJHt0ZXh0fVwiIGNhbid0IGJlIHBhcnNlZCBhcyAke2Zvcm1hdH1gKVxuICAgICk7XG4gIH1cbn1cblxuLy8gaWYgeW91IHdhbnQgdG8gb3V0cHV0IGEgdGVjaG5pY2FsIGZvcm1hdCAoZS5nLiBSRkMgMjgyMiksIHRoaXMgaGVscGVyXG4vLyBoZWxwcyBoYW5kbGUgdGhlIGRldGFpbHNcbmZ1bmN0aW9uIHRvVGVjaEZvcm1hdChkdCwgZm9ybWF0LCBhbGxvd1ogPSB0cnVlKSB7XG4gIHJldHVybiBkdC5pc1ZhbGlkXG4gICAgPyBGb3JtYXR0ZXIuY3JlYXRlKExvY2FsZS5jcmVhdGUoXCJlbi1VU1wiKSwge1xuICAgICAgICBhbGxvd1osXG4gICAgICAgIGZvcmNlU2ltcGxlOiB0cnVlLFxuICAgICAgfSkuZm9ybWF0RGF0ZVRpbWVGcm9tU3RyaW5nKGR0LCBmb3JtYXQpXG4gICAgOiBudWxsO1xufVxuXG5mdW5jdGlvbiB0b0lTT0RhdGUobywgZXh0ZW5kZWQpIHtcbiAgY29uc3QgbG9uZ0Zvcm1hdCA9IG8uYy55ZWFyID4gOTk5OSB8fCBvLmMueWVhciA8IDA7XG4gIGxldCBjID0gXCJcIjtcbiAgaWYgKGxvbmdGb3JtYXQgJiYgby5jLnllYXIgPj0gMCkgYyArPSBcIitcIjtcbiAgYyArPSBwYWRTdGFydChvLmMueWVhciwgbG9uZ0Zvcm1hdCA/IDYgOiA0KTtcblxuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1vbnRoKTtcbiAgICBjICs9IFwiLVwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH0gZWxzZSB7XG4gICAgYyArPSBwYWRTdGFydChvLmMubW9udGgpO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLmRheSk7XG4gIH1cbiAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIHRvSVNPVGltZShcbiAgbyxcbiAgZXh0ZW5kZWQsXG4gIHN1cHByZXNzU2Vjb25kcyxcbiAgc3VwcHJlc3NNaWxsaXNlY29uZHMsXG4gIGluY2x1ZGVPZmZzZXQsXG4gIGV4dGVuZGVkWm9uZVxuKSB7XG4gIGxldCBjID0gcGFkU3RhcnQoby5jLmhvdXIpO1xuICBpZiAoZXh0ZW5kZWQpIHtcbiAgICBjICs9IFwiOlwiO1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG4gICAgaWYgKG8uYy5taWxsaXNlY29uZCAhPT0gMCB8fCBvLmMuc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc1NlY29uZHMpIHtcbiAgICAgIGMgKz0gXCI6XCI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbnV0ZSk7XG4gIH1cblxuICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8IG8uYy5zZWNvbmQgIT09IDAgfHwgIXN1cHByZXNzU2Vjb25kcykge1xuICAgIGMgKz0gcGFkU3RhcnQoby5jLnNlY29uZCk7XG5cbiAgICBpZiAoby5jLm1pbGxpc2Vjb25kICE9PSAwIHx8ICFzdXBwcmVzc01pbGxpc2Vjb25kcykge1xuICAgICAgYyArPSBcIi5cIjtcbiAgICAgIGMgKz0gcGFkU3RhcnQoby5jLm1pbGxpc2Vjb25kLCAzKTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5jbHVkZU9mZnNldCkge1xuICAgIGlmIChvLmlzT2Zmc2V0Rml4ZWQgJiYgby5vZmZzZXQgPT09IDAgJiYgIWV4dGVuZGVkWm9uZSkge1xuICAgICAgYyArPSBcIlpcIjtcbiAgICB9IGVsc2UgaWYgKG8ubyA8IDApIHtcbiAgICAgIGMgKz0gXCItXCI7XG4gICAgICBjICs9IHBhZFN0YXJ0KE1hdGgudHJ1bmMoLW8ubyAvIDYwKSk7XG4gICAgICBjICs9IFwiOlwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKC1vLm8gJSA2MCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjICs9IFwiK1wiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKG8ubyAvIDYwKSk7XG4gICAgICBjICs9IFwiOlwiO1xuICAgICAgYyArPSBwYWRTdGFydChNYXRoLnRydW5jKG8ubyAlIDYwKSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGV4dGVuZGVkWm9uZSkge1xuICAgIGMgKz0gXCJbXCIgKyBvLnpvbmUuaWFuYU5hbWUgKyBcIl1cIjtcbiAgfVxuICByZXR1cm4gYztcbn1cblxuLy8gZGVmYXVsdHMgZm9yIHVuc3BlY2lmaWVkIHVuaXRzIGluIHRoZSBzdXBwb3J0ZWQgY2FsZW5kYXJzXG5jb25zdCBkZWZhdWx0VW5pdFZhbHVlcyA9IHtcbiAgICBtb250aDogMSxcbiAgICBkYXk6IDEsXG4gICAgaG91cjogMCxcbiAgICBtaW51dGU6IDAsXG4gICAgc2Vjb25kOiAwLFxuICAgIG1pbGxpc2Vjb25kOiAwLFxuICB9LFxuICBkZWZhdWx0V2Vla1VuaXRWYWx1ZXMgPSB7XG4gICAgd2Vla051bWJlcjogMSxcbiAgICB3ZWVrZGF5OiAxLFxuICAgIGhvdXI6IDAsXG4gICAgbWludXRlOiAwLFxuICAgIHNlY29uZDogMCxcbiAgICBtaWxsaXNlY29uZDogMCxcbiAgfSxcbiAgZGVmYXVsdE9yZGluYWxVbml0VmFsdWVzID0ge1xuICAgIG9yZGluYWw6IDEsXG4gICAgaG91cjogMCxcbiAgICBtaW51dGU6IDAsXG4gICAgc2Vjb25kOiAwLFxuICAgIG1pbGxpc2Vjb25kOiAwLFxuICB9O1xuXG4vLyBVbml0cyBpbiB0aGUgc3VwcG9ydGVkIGNhbGVuZGFycywgc29ydGVkIGJ5IGJpZ25lc3NcbmNvbnN0IG9yZGVyZWRVbml0cyA9IFtcInllYXJcIiwgXCJtb250aFwiLCBcImRheVwiLCBcImhvdXJcIiwgXCJtaW51dGVcIiwgXCJzZWNvbmRcIiwgXCJtaWxsaXNlY29uZFwiXSxcbiAgb3JkZXJlZFdlZWtVbml0cyA9IFtcbiAgICBcIndlZWtZZWFyXCIsXG4gICAgXCJ3ZWVrTnVtYmVyXCIsXG4gICAgXCJ3ZWVrZGF5XCIsXG4gICAgXCJob3VyXCIsXG4gICAgXCJtaW51dGVcIixcbiAgICBcInNlY29uZFwiLFxuICAgIFwibWlsbGlzZWNvbmRcIixcbiAgXSxcbiAgb3JkZXJlZE9yZGluYWxVbml0cyA9IFtcInllYXJcIiwgXCJvcmRpbmFsXCIsIFwiaG91clwiLCBcIm1pbnV0ZVwiLCBcInNlY29uZFwiLCBcIm1pbGxpc2Vjb25kXCJdO1xuXG4vLyBzdGFuZGFyZGl6ZSBjYXNlIGFuZCBwbHVyYWxpdHkgaW4gdW5pdHNcbmZ1bmN0aW9uIG5vcm1hbGl6ZVVuaXQodW5pdCkge1xuICBjb25zdCBub3JtYWxpemVkID0ge1xuICAgIHllYXI6IFwieWVhclwiLFxuICAgIHllYXJzOiBcInllYXJcIixcbiAgICBtb250aDogXCJtb250aFwiLFxuICAgIG1vbnRoczogXCJtb250aFwiLFxuICAgIGRheTogXCJkYXlcIixcbiAgICBkYXlzOiBcImRheVwiLFxuICAgIGhvdXI6IFwiaG91clwiLFxuICAgIGhvdXJzOiBcImhvdXJcIixcbiAgICBtaW51dGU6IFwibWludXRlXCIsXG4gICAgbWludXRlczogXCJtaW51dGVcIixcbiAgICBxdWFydGVyOiBcInF1YXJ0ZXJcIixcbiAgICBxdWFydGVyczogXCJxdWFydGVyXCIsXG4gICAgc2Vjb25kOiBcInNlY29uZFwiLFxuICAgIHNlY29uZHM6IFwic2Vjb25kXCIsXG4gICAgbWlsbGlzZWNvbmQ6IFwibWlsbGlzZWNvbmRcIixcbiAgICBtaWxsaXNlY29uZHM6IFwibWlsbGlzZWNvbmRcIixcbiAgICB3ZWVrZGF5OiBcIndlZWtkYXlcIixcbiAgICB3ZWVrZGF5czogXCJ3ZWVrZGF5XCIsXG4gICAgd2Vla251bWJlcjogXCJ3ZWVrTnVtYmVyXCIsXG4gICAgd2Vla3NudW1iZXI6IFwid2Vla051bWJlclwiLFxuICAgIHdlZWtudW1iZXJzOiBcIndlZWtOdW1iZXJcIixcbiAgICB3ZWVreWVhcjogXCJ3ZWVrWWVhclwiLFxuICAgIHdlZWt5ZWFyczogXCJ3ZWVrWWVhclwiLFxuICAgIG9yZGluYWw6IFwib3JkaW5hbFwiLFxuICB9W3VuaXQudG9Mb3dlckNhc2UoKV07XG5cbiAgaWYgKCFub3JtYWxpemVkKSB0aHJvdyBuZXcgSW52YWxpZFVuaXRFcnJvcih1bml0KTtcblxuICByZXR1cm4gbm9ybWFsaXplZDtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplVW5pdFdpdGhMb2NhbFdlZWtzKHVuaXQpIHtcbiAgc3dpdGNoICh1bml0LnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlIFwibG9jYWx3ZWVrZGF5XCI6XG4gICAgY2FzZSBcImxvY2Fsd2Vla2RheXNcIjpcbiAgICAgIHJldHVybiBcImxvY2FsV2Vla2RheVwiO1xuICAgIGNhc2UgXCJsb2NhbHdlZWtudW1iZXJcIjpcbiAgICBjYXNlIFwibG9jYWx3ZWVrbnVtYmVyc1wiOlxuICAgICAgcmV0dXJuIFwibG9jYWxXZWVrTnVtYmVyXCI7XG4gICAgY2FzZSBcImxvY2Fsd2Vla3llYXJcIjpcbiAgICBjYXNlIFwibG9jYWx3ZWVreWVhcnNcIjpcbiAgICAgIHJldHVybiBcImxvY2FsV2Vla1llYXJcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG5vcm1hbGl6ZVVuaXQodW5pdCk7XG4gIH1cbn1cblxuLy8gdGhpcyBpcyBhIGR1bWJlZCBkb3duIHZlcnNpb24gb2YgZnJvbU9iamVjdCgpIHRoYXQgcnVucyBhYm91dCA2MCUgZmFzdGVyXG4vLyBidXQgZG9lc24ndCBkbyBhbnkgdmFsaWRhdGlvbiwgbWFrZXMgYSBidW5jaCBvZiBhc3N1bXB0aW9ucyBhYm91dCB3aGF0IHVuaXRzXG4vLyBhcmUgcHJlc2VudCwgYW5kIHNvIG9uLlxuZnVuY3Rpb24gcXVpY2tEVChvYmosIG9wdHMpIHtcbiAgY29uc3Qgem9uZSA9IG5vcm1hbGl6ZVpvbmUob3B0cy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyksXG4gICAgdHNOb3cgPSBTZXR0aW5ncy5ub3coKTtcblxuICBsZXQgdHMsIG87XG5cbiAgLy8gYXNzdW1lIHdlIGhhdmUgdGhlIGhpZ2hlci1vcmRlciB1bml0c1xuICBpZiAoIWlzVW5kZWZpbmVkKG9iai55ZWFyKSkge1xuICAgIGZvciAoY29uc3QgdSBvZiBvcmRlcmVkVW5pdHMpIHtcbiAgICAgIGlmIChpc1VuZGVmaW5lZChvYmpbdV0pKSB7XG4gICAgICAgIG9ialt1XSA9IGRlZmF1bHRVbml0VmFsdWVzW3VdO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGludmFsaWQgPSBoYXNJbnZhbGlkR3JlZ29yaWFuRGF0YShvYmopIHx8IGhhc0ludmFsaWRUaW1lRGF0YShvYmopO1xuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZChpbnZhbGlkKTtcbiAgICB9XG5cbiAgICBjb25zdCBvZmZzZXRQcm92aXMgPSB6b25lLm9mZnNldCh0c05vdyk7XG4gICAgW3RzLCBvXSA9IG9ialRvVFMob2JqLCBvZmZzZXRQcm92aXMsIHpvbmUpO1xuICB9IGVsc2Uge1xuICAgIHRzID0gdHNOb3c7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGVUaW1lKHsgdHMsIHpvbmUsIGxvYywgbyB9KTtcbn1cblxuZnVuY3Rpb24gZGlmZlJlbGF0aXZlKHN0YXJ0LCBlbmQsIG9wdHMpIHtcbiAgY29uc3Qgcm91bmQgPSBpc1VuZGVmaW5lZChvcHRzLnJvdW5kKSA/IHRydWUgOiBvcHRzLnJvdW5kLFxuICAgIGZvcm1hdCA9IChjLCB1bml0KSA9PiB7XG4gICAgICBjID0gcm91bmRUbyhjLCByb3VuZCB8fCBvcHRzLmNhbGVuZGFyeSA/IDAgOiAyLCB0cnVlKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlciA9IGVuZC5sb2MuY2xvbmUob3B0cykucmVsRm9ybWF0dGVyKG9wdHMpO1xuICAgICAgcmV0dXJuIGZvcm1hdHRlci5mb3JtYXQoYywgdW5pdCk7XG4gICAgfSxcbiAgICBkaWZmZXIgPSAodW5pdCkgPT4ge1xuICAgICAgaWYgKG9wdHMuY2FsZW5kYXJ5KSB7XG4gICAgICAgIGlmICghZW5kLmhhc1NhbWUoc3RhcnQsIHVuaXQpKSB7XG4gICAgICAgICAgcmV0dXJuIGVuZC5zdGFydE9mKHVuaXQpLmRpZmYoc3RhcnQuc3RhcnRPZih1bml0KSwgdW5pdCkuZ2V0KHVuaXQpO1xuICAgICAgICB9IGVsc2UgcmV0dXJuIDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZW5kLmRpZmYoc3RhcnQsIHVuaXQpLmdldCh1bml0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gIGlmIChvcHRzLnVuaXQpIHtcbiAgICByZXR1cm4gZm9ybWF0KGRpZmZlcihvcHRzLnVuaXQpLCBvcHRzLnVuaXQpO1xuICB9XG5cbiAgZm9yIChjb25zdCB1bml0IG9mIG9wdHMudW5pdHMpIHtcbiAgICBjb25zdCBjb3VudCA9IGRpZmZlcih1bml0KTtcbiAgICBpZiAoTWF0aC5hYnMoY291bnQpID49IDEpIHtcbiAgICAgIHJldHVybiBmb3JtYXQoY291bnQsIHVuaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZm9ybWF0KHN0YXJ0ID4gZW5kID8gLTAgOiAwLCBvcHRzLnVuaXRzW29wdHMudW5pdHMubGVuZ3RoIC0gMV0pO1xufVxuXG5mdW5jdGlvbiBsYXN0T3B0cyhhcmdMaXN0KSB7XG4gIGxldCBvcHRzID0ge30sXG4gICAgYXJncztcbiAgaWYgKGFyZ0xpc3QubGVuZ3RoID4gMCAmJiB0eXBlb2YgYXJnTGlzdFthcmdMaXN0Lmxlbmd0aCAtIDFdID09PSBcIm9iamVjdFwiKSB7XG4gICAgb3B0cyA9IGFyZ0xpc3RbYXJnTGlzdC5sZW5ndGggLSAxXTtcbiAgICBhcmdzID0gQXJyYXkuZnJvbShhcmdMaXN0KS5zbGljZSgwLCBhcmdMaXN0Lmxlbmd0aCAtIDEpO1xuICB9IGVsc2Uge1xuICAgIGFyZ3MgPSBBcnJheS5mcm9tKGFyZ0xpc3QpO1xuICB9XG4gIHJldHVybiBbb3B0cywgYXJnc107XG59XG5cbi8qKlxuICogQSBEYXRlVGltZSBpcyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgcmVwcmVzZW50aW5nIGEgc3BlY2lmaWMgZGF0ZSBhbmQgdGltZSBhbmQgYWNjb21wYW55aW5nIG1ldGhvZHMuIEl0IGNvbnRhaW5zIGNsYXNzIGFuZCBpbnN0YW5jZSBtZXRob2RzIGZvciBjcmVhdGluZywgcGFyc2luZywgaW50ZXJyb2dhdGluZywgdHJhbnNmb3JtaW5nLCBhbmQgZm9ybWF0dGluZyB0aGVtLlxuICpcbiAqIEEgRGF0ZVRpbWUgY29tcHJpc2VzIG9mOlxuICogKiBBIHRpbWVzdGFtcC4gRWFjaCBEYXRlVGltZSBpbnN0YW5jZSByZWZlcnMgdG8gYSBzcGVjaWZpYyBtaWxsaXNlY29uZCBvZiB0aGUgVW5peCBlcG9jaC5cbiAqICogQSB0aW1lIHpvbmUuIEVhY2ggaW5zdGFuY2UgaXMgY29uc2lkZXJlZCBpbiB0aGUgY29udGV4dCBvZiBhIHNwZWNpZmljIHpvbmUgKGJ5IGRlZmF1bHQgdGhlIGxvY2FsIHN5c3RlbSdzIHpvbmUpLlxuICogKiBDb25maWd1cmF0aW9uIHByb3BlcnRpZXMgdGhhdCBlZmZlY3QgaG93IG91dHB1dCBzdHJpbmdzIGFyZSBmb3JtYXR0ZWQsIHN1Y2ggYXMgYGxvY2FsZWAsIGBudW1iZXJpbmdTeXN0ZW1gLCBhbmQgYG91dHB1dENhbGVuZGFyYC5cbiAqXG4gKiBIZXJlIGlzIGEgYnJpZWYgb3ZlcnZpZXcgb2YgdGhlIG1vc3QgY29tbW9ubHkgdXNlZCBmdW5jdGlvbmFsaXR5IGl0IHByb3ZpZGVzOlxuICpcbiAqICogKipDcmVhdGlvbioqOiBUbyBjcmVhdGUgYSBEYXRlVGltZSBmcm9tIGl0cyBjb21wb25lbnRzLCB1c2Ugb25lIG9mIGl0cyBmYWN0b3J5IGNsYXNzIG1ldGhvZHM6IHtAbGluayBEYXRlVGltZS5sb2NhbH0sIHtAbGluayBEYXRlVGltZS51dGN9LCBhbmQgKG1vc3QgZmxleGlibHkpIHtAbGluayBEYXRlVGltZS5mcm9tT2JqZWN0fS4gVG8gY3JlYXRlIG9uZSBmcm9tIGEgc3RhbmRhcmQgc3RyaW5nIGZvcm1hdCwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tSVNPfSwge0BsaW5rIERhdGVUaW1lLmZyb21IVFRQfSwgYW5kIHtAbGluayBEYXRlVGltZS5mcm9tUkZDMjgyMn0uIFRvIGNyZWF0ZSBvbmUgZnJvbSBhIGN1c3RvbSBzdHJpbmcgZm9ybWF0LCB1c2Uge0BsaW5rIERhdGVUaW1lLmZyb21Gb3JtYXR9LiBUbyBjcmVhdGUgb25lIGZyb20gYSBuYXRpdmUgSlMgZGF0ZSwgdXNlIHtAbGluayBEYXRlVGltZS5mcm9tSlNEYXRlfS5cbiAqICogKipHcmVnb3JpYW4gY2FsZW5kYXIgYW5kIHRpbWUqKjogVG8gZXhhbWluZSB0aGUgR3JlZ29yaWFuIHByb3BlcnRpZXMgb2YgYSBEYXRlVGltZSBpbmRpdmlkdWFsbHkgKGkuZSBhcyBvcHBvc2VkIHRvIGNvbGxlY3RpdmVseSB0aHJvdWdoIHtAbGluayBEYXRlVGltZSN0b09iamVjdH0pLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN5ZWFyfSwge0BsaW5rIERhdGVUaW1lI21vbnRofSxcbiAqIHtAbGluayBEYXRlVGltZSNkYXl9LCB7QGxpbmsgRGF0ZVRpbWUjaG91cn0sIHtAbGluayBEYXRlVGltZSNtaW51dGV9LCB7QGxpbmsgRGF0ZVRpbWUjc2Vjb25kfSwge0BsaW5rIERhdGVUaW1lI21pbGxpc2Vjb25kfSBhY2Nlc3NvcnMuXG4gKiAqICoqV2VlayBjYWxlbmRhcioqOiBGb3IgSVNPIHdlZWsgY2FsZW5kYXIgYXR0cmlidXRlcywgc2VlIHRoZSB7QGxpbmsgRGF0ZVRpbWUjd2Vla1llYXJ9LCB7QGxpbmsgRGF0ZVRpbWUjd2Vla051bWJlcn0sIGFuZCB7QGxpbmsgRGF0ZVRpbWUjd2Vla2RheX0gYWNjZXNzb3JzLlxuICogKiAqKkNvbmZpZ3VyYXRpb24qKiBTZWUgdGhlIHtAbGluayBEYXRlVGltZSNsb2NhbGV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjbnVtYmVyaW5nU3lzdGVtfSBhY2Nlc3NvcnMuXG4gKiAqICoqVHJhbnNmb3JtYXRpb24qKjogVG8gdHJhbnNmb3JtIHRoZSBEYXRlVGltZSBpbnRvIG90aGVyIERhdGVUaW1lcywgdXNlIHtAbGluayBEYXRlVGltZSNzZXR9LCB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9LCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0sIHtAbGluayBEYXRlVGltZSNzZXRMb2NhbGV9LCB7QGxpbmsgRGF0ZVRpbWUucGx1c30sIHtAbGluayBEYXRlVGltZSNtaW51c30sIHtAbGluayBEYXRlVGltZSNlbmRPZn0sIHtAbGluayBEYXRlVGltZSNzdGFydE9mfSwge0BsaW5rIERhdGVUaW1lI3RvVVRDfSwgYW5kIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfS5cbiAqICogKipPdXRwdXQqKjogVG8gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gb3RoZXIgcmVwcmVzZW50YXRpb25zLCB1c2UgdGhlIHtAbGluayBEYXRlVGltZSN0b1JlbGF0aXZlfSwge0BsaW5rIERhdGVUaW1lI3RvUmVsYXRpdmVDYWxlbmRhcn0sIHtAbGluayBEYXRlVGltZSN0b0pTT059LCB7QGxpbmsgRGF0ZVRpbWUjdG9JU099LCB7QGxpbmsgRGF0ZVRpbWUjdG9IVFRQfSwge0BsaW5rIERhdGVUaW1lI3RvT2JqZWN0fSwge0BsaW5rIERhdGVUaW1lI3RvUkZDMjgyMn0sIHtAbGluayBEYXRlVGltZSN0b1N0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30sIHtAbGluayBEYXRlVGltZSN0b0Zvcm1hdH0sIHtAbGluayBEYXRlVGltZSN0b01pbGxpc30gYW5kIHtAbGluayBEYXRlVGltZSN0b0pTRGF0ZX0uXG4gKlxuICogVGhlcmUncyBwbGVudHkgb3RoZXJzIGRvY3VtZW50ZWQgYmVsb3cuIEluIGFkZGl0aW9uLCBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBzdWJ0bGVyIHRvcGljcyBsaWtlIGludGVybmF0aW9uYWxpemF0aW9uLCB0aW1lIHpvbmVzLCBhbHRlcm5hdGl2ZSBjYWxlbmRhcnMsIHZhbGlkaXR5LCBhbmQgc28gb24sIHNlZSB0aGUgZXh0ZXJuYWwgZG9jdW1lbnRhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVRpbWUge1xuICAvKipcbiAgICogQGFjY2VzcyBwcml2YXRlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICBjb25zdCB6b25lID0gY29uZmlnLnpvbmUgfHwgU2V0dGluZ3MuZGVmYXVsdFpvbmU7XG5cbiAgICBsZXQgaW52YWxpZCA9XG4gICAgICBjb25maWcuaW52YWxpZCB8fFxuICAgICAgKE51bWJlci5pc05hTihjb25maWcudHMpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbCkgfHxcbiAgICAgICghem9uZS5pc1ZhbGlkID8gdW5zdXBwb3J0ZWRab25lKHpvbmUpIDogbnVsbCk7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cyA9IGlzVW5kZWZpbmVkKGNvbmZpZy50cykgPyBTZXR0aW5ncy5ub3coKSA6IGNvbmZpZy50cztcblxuICAgIGxldCBjID0gbnVsbCxcbiAgICAgIG8gPSBudWxsO1xuICAgIGlmICghaW52YWxpZCkge1xuICAgICAgY29uc3QgdW5jaGFuZ2VkID0gY29uZmlnLm9sZCAmJiBjb25maWcub2xkLnRzID09PSB0aGlzLnRzICYmIGNvbmZpZy5vbGQuem9uZS5lcXVhbHMoem9uZSk7XG5cbiAgICAgIGlmICh1bmNoYW5nZWQpIHtcbiAgICAgICAgW2MsIG9dID0gW2NvbmZpZy5vbGQuYywgY29uZmlnLm9sZC5vXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IG90ID0gem9uZS5vZmZzZXQodGhpcy50cyk7XG4gICAgICAgIGMgPSB0c1RvT2JqKHRoaXMudHMsIG90KTtcbiAgICAgICAgaW52YWxpZCA9IE51bWJlci5pc05hTihjLnllYXIpID8gbmV3IEludmFsaWQoXCJpbnZhbGlkIGlucHV0XCIpIDogbnVsbDtcbiAgICAgICAgYyA9IGludmFsaWQgPyBudWxsIDogYztcbiAgICAgICAgbyA9IGludmFsaWQgPyBudWxsIDogb3Q7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fem9uZSA9IHpvbmU7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sb2MgPSBjb25maWcubG9jIHx8IExvY2FsZS5jcmVhdGUoKTtcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmludmFsaWQgPSBpbnZhbGlkO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMud2Vla0RhdGEgPSBudWxsO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubG9jYWxXZWVrRGF0YSA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQGFjY2VzcyBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jID0gYztcbiAgICAvKipcbiAgICAgKiBAYWNjZXNzIHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm8gPSBvO1xuICAgIC8qKlxuICAgICAqIEBhY2Nlc3MgcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuaXNMdXhvbkRhdGVUaW1lID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIENPTlNUUlVDVFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmb3IgdGhlIGN1cnJlbnQgaW5zdGFudCwgaW4gdGhlIHN5c3RlbSdzIHRpbWUgem9uZS5cbiAgICpcbiAgICogVXNlIFNldHRpbmdzIHRvIG92ZXJyaWRlIHRoZXNlIGRlZmF1bHQgdmFsdWVzIGlmIG5lZWRlZC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oKSAvL34+IG5vdyBpbiB0aGUgSVNPIGZvcm1hdFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBub3coKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7fSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbG9jYWwgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgbG9jYWwoKWAgd2l0aCBubyBhcmd1bWVudHMpLCB0aGUgY3VycmVudCB0aW1lIHdpbGwgYmUgdXNlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gW21vbnRoPTFdIC0gVGhlIG1vbnRoLCAxLWluZGV4ZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkYXk9MV0gLSBUaGUgZGF5IG9mIHRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaG91cj0wXSAtIFRoZSBob3VyIG9mIHRoZSBkYXksIGluIDI0LWhvdXIgdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gW21pbnV0ZT0wXSAtIFRoZSBtaW51dGUgb2YgdGhlIGhvdXIsIG1lYW5pbmcgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1OVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3NlY29uZD0wXSAtIFRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWlsbGlzZWNvbmQ9MF0gLSBUaGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDk5OVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKHsgem9uZTogXCJBbWVyaWNhL05ld19Zb3JrXCIgfSkgICAgICAvL34+IG5vdywgaW4gVVMgZWFzdCBjb2FzdCB0aW1lXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAxLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDAsIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1KSAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjAwOjAwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDMsIDEyLCA1LCB7IHpvbmU6IFwidXRjXCIgfSkgICAvL34+IDIwMTctMDMtMTJUMDU6MDA6MDAsIGluIFVUQ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUpICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwKSAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAzLCAxMiwgNSwgNDUsIDEwLCA3NjUpICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgbG9jYWwoKSB7XG4gICAgY29uc3QgW29wdHMsIGFyZ3NdID0gbGFzdE9wdHMoYXJndW1lbnRzKSxcbiAgICAgIFt5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgbWlsbGlzZWNvbmRdID0gYXJncztcbiAgICByZXR1cm4gcXVpY2tEVCh7IHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZCB9LCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBpbiBVVENcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt5ZWFyXSAtIFRoZSBjYWxlbmRhciB5ZWFyLiBJZiBvbWl0dGVkIChhcyBpbiwgY2FsbCBgdXRjKClgIHdpdGggbm8gYXJndW1lbnRzKSwgdGhlIGN1cnJlbnQgdGltZSB3aWxsIGJlIHVzZWRcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb250aD0xXSAtIFRoZSBtb250aCwgMS1pbmRleGVkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGF5PTFdIC0gVGhlIGRheSBvZiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtob3VyPTBdIC0gVGhlIGhvdXIgb2YgdGhlIGRheSwgaW4gMjQtaG91ciB0aW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbbWludXRlPTBdIC0gVGhlIG1pbnV0ZSBvZiB0aGUgaG91ciwgbWVhbmluZyBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIDU5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc2Vjb25kPTBdIC0gVGhlIHNlY29uZCBvZiB0aGUgbWludXRlLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IFttaWxsaXNlY29uZD0wXSAtIFRoZSBtaWxsaXNlY29uZCBvZiB0aGUgc2Vjb25kLCBtZWFuaW5nIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgOTk5XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gY29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB0aGUgRGF0ZVRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLmxvY2FsZV0gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMub3V0cHV0Q2FsZW5kYXJdIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubnVtYmVyaW5nU3lzdGVtXSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gbm93XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3KSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMS0wMVQwMDowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTAxVDAwOjAwOjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL34+IDIwMTctMDMtMTJUMDA6MDA6MDBaXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE3LCAzLCAxMiwgNSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTowMDowMFpcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSkgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjAwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCB7IGxvY2FsZTogXCJmclwiIH0pICAgICAgICAgIC8vfj4gMjAxNy0wMy0xMlQwNTo0NTowMFogd2l0aCBhIEZyZW5jaCBsb2NhbGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTcsIDMsIDEyLCA1LCA0NSwgMTApICAgICAgICAgICAgICAgICAgICAgICAgLy9+PiAyMDE3LTAzLTEyVDA1OjQ1OjEwWlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNywgMywgMTIsIDUsIDQ1LCAxMCwgNzY1LCB7IGxvY2FsZTogXCJmclwiIH0pIC8vfj4gMjAxNy0wMy0xMlQwNTo0NToxMC43NjVaIHdpdGggYSBGcmVuY2ggbG9jYWxlXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIHV0YygpIHtcbiAgICBjb25zdCBbb3B0cywgYXJnc10gPSBsYXN0T3B0cyhhcmd1bWVudHMpLFxuICAgICAgW3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBtaWxsaXNlY29uZF0gPSBhcmdzO1xuXG4gICAgb3B0cy56b25lID0gRml4ZWRPZmZzZXRab25lLnV0Y0luc3RhbmNlO1xuICAgIHJldHVybiBxdWlja0RUKHsgeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIG1pbGxpc2Vjb25kIH0sIG9wdHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYSBKYXZhU2NyaXB0IERhdGUgb2JqZWN0LiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7RGF0ZX0gZGF0ZSAtIGEgSmF2YVNjcmlwdCBEYXRlIG9iamVjdFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSlNEYXRlKGRhdGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRzID0gaXNEYXRlKGRhdGUpID8gZGF0ZS52YWx1ZU9mKCkgOiBOYU47XG4gICAgaWYgKE51bWJlci5pc05hTih0cykpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiaW52YWxpZCBpbnB1dFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB6b25lVG9Vc2UgPSBub3JtYWxpemVab25lKG9wdGlvbnMuem9uZSwgU2V0dGluZ3MuZGVmYXVsdFpvbmUpO1xuICAgIGlmICghem9uZVRvVXNlLmlzVmFsaWQpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKHVuc3VwcG9ydGVkWm9uZSh6b25lVG9Vc2UpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGVUaW1lKHtcbiAgICAgIHRzOiB0cyxcbiAgICAgIHpvbmU6IHpvbmVUb1VzZSxcbiAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucyksXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgdGhlIGVwb2NoIChtZWFuaW5nIHNpbmNlIDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuIFVzZXMgdGhlIGRlZmF1bHQgem9uZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pbGxpc2Vjb25kcyAtIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tTWlsbGlzKG1pbGxpc2Vjb25kcywgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKCFpc051bWJlcihtaWxsaXNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAgIGBmcm9tTWlsbGlzIHJlcXVpcmVzIGEgbnVtZXJpY2FsIGlucHV0LCBidXQgcmVjZWl2ZWQgYSAke3R5cGVvZiBtaWxsaXNlY29uZHN9IHdpdGggdmFsdWUgJHttaWxsaXNlY29uZHN9YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKG1pbGxpc2Vjb25kcyA8IC1NQVhfREFURSB8fCBtaWxsaXNlY29uZHMgPiBNQVhfREFURSkge1xuICAgICAgLy8gdGhpcyBpc24ndCBwZXJmZWN0IGJlY2F1c2UgYmVjYXVzZSB3ZSBjYW4gc3RpbGwgZW5kIHVwIG91dCBvZiByYW5nZSBiZWNhdXNlIG9mIGFkZGl0aW9uYWwgc2hpZnRpbmcsIGJ1dCBpdCdzIGEgc3RhcnRcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFwiVGltZXN0YW1wIG91dCBvZiByYW5nZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBtaWxsaXNlY29uZHMsXG4gICAgICAgIHpvbmU6IG5vcm1hbGl6ZVpvbmUob3B0aW9ucy56b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSksXG4gICAgICAgIGxvYzogTG9jYWxlLmZyb21PYmplY3Qob3B0aW9ucyksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIG51bWJlciBvZiBzZWNvbmRzIHNpbmNlIHRoZSBlcG9jaCAobWVhbmluZyBzaW5jZSAxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLiBVc2VzIHRoZSBkZWZhdWx0IHpvbmUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzZWNvbmRzIC0gYSBudW1iZXIgb2Ygc2Vjb25kcyBzaW5jZSAxOTcwIFVUQ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdGhlIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRpb25zLnpvbmU9J2xvY2FsJ10gLSB0aGUgem9uZSB0byBwbGFjZSB0aGUgRGF0ZVRpbWUgaW50b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubG9jYWxlXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tU2Vjb25kcyhzZWNvbmRzLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIWlzTnVtYmVyKHNlY29uZHMpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJmcm9tU2Vjb25kcyByZXF1aXJlcyBhIG51bWVyaWNhbCBpbnB1dFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlVGltZSh7XG4gICAgICAgIHRzOiBzZWNvbmRzICogMTAwMCxcbiAgICAgICAgem9uZTogbm9ybWFsaXplWm9uZShvcHRpb25zLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKSxcbiAgICAgICAgbG9jOiBMb2NhbGUuZnJvbU9iamVjdChvcHRpb25zKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCBrZXlzIGxpa2UgJ3llYXInIGFuZCAnaG91cicgd2l0aCByZWFzb25hYmxlIGRlZmF1bHRzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gdGhlIG9iamVjdCB0byBjcmVhdGUgdGhlIERhdGVUaW1lIGZyb21cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai55ZWFyIC0gYSB5ZWFyLCBzdWNoIGFzIDE5ODdcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5tb250aCAtIGEgbW9udGgsIDEtMTJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5kYXkgLSBhIGRheSBvZiB0aGUgbW9udGgsIDEtMzEsIGRlcGVuZGluZyBvbiB0aGUgbW9udGhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5vcmRpbmFsIC0gZGF5IG9mIHRoZSB5ZWFyLCAxLTM2NSBvciAzNjZcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrWWVhciAtIGFuIElTTyB3ZWVrIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrTnVtYmVyIC0gYW4gSVNPIHdlZWsgbnVtYmVyLCBiZXR3ZWVuIDEgYW5kIDUyIG9yIDUzLCBkZXBlbmRpbmcgb24gdGhlIHllYXJcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai53ZWVrZGF5IC0gYW4gSVNPIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvYmoubG9jYWxXZWVrWWVhciAtIGEgd2VlayB5ZWFyLCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmxvY2FsV2Vla051bWJlciAtIGEgd2VlayBudW1iZXIsIGJldHdlZW4gMSBhbmQgNTIgb3IgNTMsIGRlcGVuZGluZyBvbiB0aGUgeWVhciwgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5sb2NhbFdlZWtkYXkgLSBhIHdlZWtkYXksIDEtNywgd2hlcmUgMSBpcyB0aGUgZmlyc3QgYW5kIDcgaXMgdGhlIGxhc3QgZGF5IG9mIHRoZSB3ZWVrLCBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLmhvdXIgLSBob3VyIG9mIHRoZSBkYXksIDAtMjNcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5taW51dGUgLSBtaW51dGUgb2YgdGhlIGhvdXIsIDAtNTlcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9iai5zZWNvbmQgLSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSwgMC01OVxuICAgKiBAcGFyYW0ge251bWJlcn0gb2JqLm1pbGxpc2Vjb25kIC0gbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCwgMC05OTlcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIGZvciBjcmVhdGluZyB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSBpbnRlcnByZXQgdGhlIG51bWJlcnMgaW4gdGhlIGNvbnRleHQgb2YgYSBwYXJ0aWN1bGFyIHpvbmUuIENhbiB0YWtlIGFueSB2YWx1ZSB0YWtlbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gc2V0Wm9uZSgpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5sb2NhbGU9J3N5c3RlbVxcJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIsIG1vbnRoOiA1LCBkYXk6IDI1fSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHllYXI6IDE5ODIgfSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wMS0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSkgLy9+PiB0b2RheSBhdCAxMDoyNjowNlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICd1dGMnIH0pLFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tT2JqZWN0KHsgaG91cjogMTAsIG1pbnV0ZTogMjYsIHNlY29uZDogNiB9LCB7IHpvbmU6ICdsb2NhbCcgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IGhvdXI6IDEwLCBtaW51dGU6IDI2LCBzZWNvbmQ6IDYgfSwgeyB6b25lOiAnQW1lcmljYS9OZXdfWW9yaycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbU9iamVjdCh7IHdlZWtZZWFyOiAyMDE2LCB3ZWVrTnVtYmVyOiAyLCB3ZWVrZGF5OiAzIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzIwMTYtMDEtMTMnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21PYmplY3QoeyBsb2NhbFdlZWtZZWFyOiAyMDIyLCBsb2NhbFdlZWtOdW1iZXI6IDEsIGxvY2FsV2Vla2RheTogMSB9LCB7IGxvY2FsZTogXCJlbi1VU1wiIH0pLnRvSVNPRGF0ZSgpIC8vPT4gJzIwMjEtMTItMjYnXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc3RhdGljIGZyb21PYmplY3Qob2JqLCBvcHRzID0ge30pIHtcbiAgICBvYmogPSBvYmogfHwge307XG4gICAgY29uc3Qgem9uZVRvVXNlID0gbm9ybWFsaXplWm9uZShvcHRzLnpvbmUsIFNldHRpbmdzLmRlZmF1bHRab25lKTtcbiAgICBpZiAoIXpvbmVUb1VzZS5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gRGF0ZVRpbWUuaW52YWxpZCh1bnN1cHBvcnRlZFpvbmUoem9uZVRvVXNlKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbG9jID0gTG9jYWxlLmZyb21PYmplY3Qob3B0cyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZU9iamVjdChvYmosIG5vcm1hbGl6ZVVuaXRXaXRoTG9jYWxXZWVrcyk7XG4gICAgY29uc3QgeyBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrIH0gPSB1c2VzTG9jYWxXZWVrVmFsdWVzKG5vcm1hbGl6ZWQsIGxvYyk7XG5cbiAgICBjb25zdCB0c05vdyA9IFNldHRpbmdzLm5vdygpLFxuICAgICAgb2Zmc2V0UHJvdmlzID0gIWlzVW5kZWZpbmVkKG9wdHMuc3BlY2lmaWNPZmZzZXQpXG4gICAgICAgID8gb3B0cy5zcGVjaWZpY09mZnNldFxuICAgICAgICA6IHpvbmVUb1VzZS5vZmZzZXQodHNOb3cpLFxuICAgICAgY29udGFpbnNPcmRpbmFsID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCksXG4gICAgICBjb250YWluc0dyZWdvclllYXIgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC55ZWFyKSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yTUQgPSAhaXNVbmRlZmluZWQobm9ybWFsaXplZC5tb250aCkgfHwgIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQuZGF5KSxcbiAgICAgIGNvbnRhaW5zR3JlZ29yID0gY29udGFpbnNHcmVnb3JZZWFyIHx8IGNvbnRhaW5zR3JlZ29yTUQsXG4gICAgICBkZWZpbml0ZVdlZWtEZWYgPSBub3JtYWxpemVkLndlZWtZZWFyIHx8IG5vcm1hbGl6ZWQud2Vla051bWJlcjtcblxuICAgIC8vIGNhc2VzOlxuICAgIC8vIGp1c3QgYSB3ZWVrZGF5IC0+IHRoaXMgd2VlaydzIGluc3RhbmNlIG9mIHRoYXQgd2Vla2RheSwgbm8gd29ycmllc1xuICAgIC8vIChncmVnb3JpYW4gZGF0YSBvciBvcmRpbmFsKSArICh3ZWVrWWVhciBvciB3ZWVrTnVtYmVyKSAtPiBlcnJvclxuICAgIC8vIChncmVnb3JpYW4gbW9udGggb3IgZGF5KSArIG9yZGluYWwgLT4gZXJyb3JcbiAgICAvLyBvdGhlcndpc2UganVzdCB1c2Ugd2Vla3Mgb3Igb3JkaW5hbHMgb3IgZ3JlZ29yaWFuLCBkZXBlbmRpbmcgb24gd2hhdCdzIHNwZWNpZmllZFxuXG4gICAgaWYgKChjb250YWluc0dyZWdvciB8fCBjb250YWluc09yZGluYWwpICYmIGRlZmluaXRlV2Vla0RlZikge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFxuICAgICAgICBcIkNhbid0IG1peCB3ZWVrWWVhci93ZWVrTnVtYmVyIHVuaXRzIHdpdGggeWVhci9tb250aC9kYXkgb3Igb3JkaW5hbHNcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoY29udGFpbnNHcmVnb3JNRCAmJiBjb250YWluc09yZGluYWwpIHtcbiAgICAgIHRocm93IG5ldyBDb25mbGljdGluZ1NwZWNpZmljYXRpb25FcnJvcihcIkNhbid0IG1peCBvcmRpbmFsIGRhdGVzIHdpdGggbW9udGgvZGF5XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZVdlZWtEYXRhID0gZGVmaW5pdGVXZWVrRGVmIHx8IChub3JtYWxpemVkLndlZWtkYXkgJiYgIWNvbnRhaW5zR3JlZ29yKTtcblxuICAgIC8vIGNvbmZpZ3VyZSBvdXJzZWx2ZXMgdG8gZGVhbCB3aXRoIGdyZWdvcmlhbiBkYXRlcyBvciB3ZWVrIHN0dWZmXG4gICAgbGV0IHVuaXRzLFxuICAgICAgZGVmYXVsdFZhbHVlcyxcbiAgICAgIG9iak5vdyA9IHRzVG9PYmoodHNOb3csIG9mZnNldFByb3Zpcyk7XG4gICAgaWYgKHVzZVdlZWtEYXRhKSB7XG4gICAgICB1bml0cyA9IG9yZGVyZWRXZWVrVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFdlZWtVbml0VmFsdWVzO1xuICAgICAgb2JqTm93ID0gZ3JlZ29yaWFuVG9XZWVrKG9iak5vdywgbWluRGF5c0luRmlyc3RXZWVrLCBzdGFydE9mV2Vlayk7XG4gICAgfSBlbHNlIGlmIChjb250YWluc09yZGluYWwpIHtcbiAgICAgIHVuaXRzID0gb3JkZXJlZE9yZGluYWxVbml0cztcbiAgICAgIGRlZmF1bHRWYWx1ZXMgPSBkZWZhdWx0T3JkaW5hbFVuaXRWYWx1ZXM7XG4gICAgICBvYmpOb3cgPSBncmVnb3JpYW5Ub09yZGluYWwob2JqTm93KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5pdHMgPSBvcmRlcmVkVW5pdHM7XG4gICAgICBkZWZhdWx0VmFsdWVzID0gZGVmYXVsdFVuaXRWYWx1ZXM7XG4gICAgfVxuXG4gICAgLy8gc2V0IGRlZmF1bHQgdmFsdWVzIGZvciBtaXNzaW5nIHN0dWZmXG4gICAgbGV0IGZvdW5kRmlyc3QgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHUgb2YgdW5pdHMpIHtcbiAgICAgIGNvbnN0IHYgPSBub3JtYWxpemVkW3VdO1xuICAgICAgaWYgKCFpc1VuZGVmaW5lZCh2KSkge1xuICAgICAgICBmb3VuZEZpcnN0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoZm91bmRGaXJzdCkge1xuICAgICAgICBub3JtYWxpemVkW3VdID0gZGVmYXVsdFZhbHVlc1t1XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vcm1hbGl6ZWRbdV0gPSBvYmpOb3dbdV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIHRoZSB2YWx1ZXMgd2UgaGF2ZSBhcmUgaW4gcmFuZ2VcbiAgICBjb25zdCBoaWdoZXJPcmRlckludmFsaWQgPSB1c2VXZWVrRGF0YVxuICAgICAgICA/IGhhc0ludmFsaWRXZWVrRGF0YShub3JtYWxpemVkLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbFxuICAgICAgICA/IGhhc0ludmFsaWRPcmRpbmFsRGF0YShub3JtYWxpemVkKVxuICAgICAgICA6IGhhc0ludmFsaWRHcmVnb3JpYW5EYXRhKG5vcm1hbGl6ZWQpLFxuICAgICAgaW52YWxpZCA9IGhpZ2hlck9yZGVySW52YWxpZCB8fCBoYXNJbnZhbGlkVGltZURhdGEobm9ybWFsaXplZCk7XG5cbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfVxuXG4gICAgLy8gY29tcHV0ZSB0aGUgYWN0dWFsIHRpbWVcbiAgICBjb25zdCBncmVnb3JpYW4gPSB1c2VXZWVrRGF0YVxuICAgICAgICA/IHdlZWtUb0dyZWdvcmlhbihub3JtYWxpemVkLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKVxuICAgICAgICA6IGNvbnRhaW5zT3JkaW5hbFxuICAgICAgICA/IG9yZGluYWxUb0dyZWdvcmlhbihub3JtYWxpemVkKVxuICAgICAgICA6IG5vcm1hbGl6ZWQsXG4gICAgICBbdHNGaW5hbCwgb2Zmc2V0RmluYWxdID0gb2JqVG9UUyhncmVnb3JpYW4sIG9mZnNldFByb3Zpcywgem9uZVRvVXNlKSxcbiAgICAgIGluc3QgPSBuZXcgRGF0ZVRpbWUoe1xuICAgICAgICB0czogdHNGaW5hbCxcbiAgICAgICAgem9uZTogem9uZVRvVXNlLFxuICAgICAgICBvOiBvZmZzZXRGaW5hbCxcbiAgICAgICAgbG9jLFxuICAgICAgfSk7XG5cbiAgICAvLyBncmVnb3JpYW4gZGF0YSArIHdlZWtkYXkgc2VydmVzIG9ubHkgdG8gdmFsaWRhdGVcbiAgICBpZiAobm9ybWFsaXplZC53ZWVrZGF5ICYmIGNvbnRhaW5zR3JlZ29yICYmIG9iai53ZWVrZGF5ICE9PSBpbnN0LndlZWtkYXkpIHtcbiAgICAgIHJldHVybiBEYXRlVGltZS5pbnZhbGlkKFxuICAgICAgICBcIm1pc21hdGNoZWQgd2Vla2RheVwiLFxuICAgICAgICBgeW91IGNhbid0IHNwZWNpZnkgYm90aCBhIHdlZWtkYXkgb2YgJHtub3JtYWxpemVkLndlZWtkYXl9IGFuZCBhIGRhdGUgb2YgJHtpbnN0LnRvSVNPKCl9YFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaW5zdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIElTTyA4NjAxIHN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBJU08gc3RyaW5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSB0aW1lIHRvIHRoaXMgem9uZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCBhIGZpeGVkLW9mZnNldCB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdzeXN0ZW0ncyBsb2NhbGUnXSAtIGEgbG9jYWxlIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5vdXRwdXRDYWxlbmRhcl0gLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5udW1iZXJpbmdTeXN0ZW1dIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUlTTygnMjAxNi0wNS0yNVQwOTowODozNC4xMjMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMyswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtMDUtMjVUMDk6MDg6MzQuMTIzKzA2OjAwJywge3NldFpvbmU6IHRydWV9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tSVNPKCcyMDE2LTA1LTI1VDA5OjA4OjM0LjEyMycsIHt6b25lOiAndXRjJ30pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21JU08oJzIwMTYtVzA1LTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSVNPKHRleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IFt2YWxzLCBwYXJzZWRab25lXSA9IHBhcnNlSVNPRGF0ZSh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIklTTyA4NjAxXCIsIHRleHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVUaW1lIGZyb20gYW4gUkZDIDI4MjIgc3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIFJGQyAyODIyIHN0cmluZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gY29udmVydCB0aGUgdGltZSB0byB0aGlzIHpvbmUuIFNpbmNlIHRoZSBvZmZzZXQgaXMgYWx3YXlzIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgdGhpcyBoYXMgbm8gZWZmZWN0IG9uIHRoZSBpbnRlcnByZXRhdGlvbiBvZiBzdHJpbmcsIG1lcmVseSB0aGUgem9uZSB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGlzIGV4cHJlc3NlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSBmaXhlZC1vZmZzZXQgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzOjEyIEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21SRkMyODIyKCdGcmksIDI1IE5vdiAyMDE2IDEzOjIzOjEyICswNjAwJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVJGQzI4MjIoJzI1IE5vdiAyMDE2IDEzOjIzIFonKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tUkZDMjgyMih0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVJGQzI4MjJEYXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiUkZDIDI4MjJcIiwgdGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhbiBIVFRQIGhlYWRlciBkYXRlXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjMy5odG1sI3NlYzMuMy4xXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIEhUVFAgaGVhZGVyIGRhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRvIGFmZmVjdCB0aGUgY3JlYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW29wdHMuem9uZT0nbG9jYWwnXSAtIGNvbnZlcnQgdGhlIHRpbWUgdG8gdGhpcyB6b25lLiBTaW5jZSBIVFRQIGRhdGVzIGFyZSBhbHdheXMgaW4gVVRDLCB0aGlzIGhhcyBubyBlZmZlY3Qgb24gdGhlIGludGVycHJldGF0aW9uIG9mIHN0cmluZywgbWVyZWx5IHRoZSB6b25lIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaXMgZXhwcmVzc2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNldFpvbmU9ZmFsc2VdIC0gb3ZlcnJpZGUgdGhlIHpvbmUgd2l0aCB0aGUgZml4ZWQtb2Zmc2V0IHpvbmUgc3BlY2lmaWVkIGluIHRoZSBzdHJpbmcuIEZvciBIVFRQIGRhdGVzLCB0aGlzIGlzIGFsd2F5cyBVVEMsIHNvIHRoaXMgb3B0aW9uIGlzIGVxdWl2YWxlbnQgdG8gc2V0dGluZyB0aGUgYHpvbmVgIG9wdGlvbiB0byAndXRjJywgYnV0IHRoaXMgb3B0aW9uIGlzIGluY2x1ZGVkIGZvciBjb25zaXN0ZW5jeSB3aXRoIHNpbWlsYXIgbWV0aG9kcy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nc3lzdGVtJ3MgbG9jYWxlJ10gLSBhIGxvY2FsZSB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5vdXRwdXRDYWxlbmRhciAtIHRoZSBvdXRwdXQgY2FsZW5kYXIgdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMubnVtYmVyaW5nU3lzdGVtIC0gdGhlIG51bWJlcmluZyBzeXN0ZW0gdG8gc2V0IG9uIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgaW5zdGFuY2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1biwgMDYgTm92IDE5OTQgMDg6NDk6MzcgR01UJylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbUhUVFAoJ1N1bmRheSwgMDYtTm92LTk0IDA4OjQ5OjM3IEdNVCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21IVFRQKCdTdW4gTm92ICA2IDA4OjQ5OjM3IDE5OTQnKVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tSFRUUCh0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZUhUVFBEYXRlKHRleHQpO1xuICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIFwiSFRUUFwiLCBvcHRzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlVGltZSBmcm9tIGFuIGlucHV0IHN0cmluZyBhbmQgZm9ybWF0IHN0cmluZy5cbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLiBGb3IgYSB0YWJsZSBvZiB0b2tlbnMgYW5kIHRoZWlyIGludGVycHJldGF0aW9ucywgc2VlIFtoZXJlXShodHRwczovL21vbWVudC5naXRodWIuaW8vbHV4b24vIy9wYXJzaW5nP2lkPXRhYmxlLW9mLXRva2VucykuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IC0gdGhlIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCB0aGUgc3RyaW5nIGlzIGV4cGVjdGVkIHRvIGJlIGluIChzZWUgdGhlIGxpbmsgYmVsb3cgZm9yIHRoZSBmb3JtYXRzKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnMgdG8gYWZmZWN0IHRoZSBjcmVhdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ3xab25lfSBbb3B0cy56b25lPSdsb2NhbCddIC0gdXNlIHRoaXMgem9uZSBpZiBubyBvZmZzZXQgaXMgc3BlY2lmaWVkIGluIHRoZSBpbnB1dCBzdHJpbmcgaXRzZWxmLiBXaWxsIGFsc28gY29udmVydCB0aGUgRGF0ZVRpbWUgdG8gdGhpcyB6b25lXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc2V0Wm9uZT1mYWxzZV0gLSBvdmVycmlkZSB0aGUgem9uZSB3aXRoIGEgem9uZSBzcGVjaWZpZWQgaW4gdGhlIHN0cmluZyBpdHNlbGYsIGlmIGl0IHNwZWNpZmllcyBvbmVcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmxvY2FsZT0nZW4tVVMnXSAtIGEgbG9jYWxlIHN0cmluZyB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSBEYXRlVGltZSB0byB0aGlzIGxvY2FsZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0cy5udW1iZXJpbmdTeXN0ZW0gLSB0aGUgbnVtYmVyaW5nIHN5c3RlbSB0byB1c2Ugd2hlbiBwYXJzaW5nLiBXaWxsIGFsc28gc2V0IHRoZSByZXN1bHRpbmcgRGF0ZVRpbWUgdG8gdGhpcyBudW1iZXJpbmcgc3lzdGVtXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm91dHB1dENhbGVuZGFyIC0gdGhlIG91dHB1dCBjYWxlbmRhciB0byBzZXQgb24gdGhlIHJlc3VsdGluZyBEYXRlVGltZSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBmcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKGlzVW5kZWZpbmVkKHRleHQpIHx8IGlzVW5kZWZpbmVkKGZtdCkpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcImZyb21Gb3JtYXQgcmVxdWlyZXMgYW4gaW5wdXQgc3RyaW5nIGFuZCBhIGZvcm1hdFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGxvY2FsZSA9IG51bGwsIG51bWJlcmluZ1N5c3RlbSA9IG51bGwgfSA9IG9wdHMsXG4gICAgICBsb2NhbGVUb1VzZSA9IExvY2FsZS5mcm9tT3B0cyh7XG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgbnVtYmVyaW5nU3lzdGVtLFxuICAgICAgICBkZWZhdWx0VG9FTjogdHJ1ZSxcbiAgICAgIH0pLFxuICAgICAgW3ZhbHMsIHBhcnNlZFpvbmUsIHNwZWNpZmljT2Zmc2V0LCBpbnZhbGlkXSA9IHBhcnNlRnJvbVRva2Vucyhsb2NhbGVUb1VzZSwgdGV4dCwgZm10KTtcbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwYXJzZURhdGFUb0RhdGVUaW1lKHZhbHMsIHBhcnNlZFpvbmUsIG9wdHMsIGBmb3JtYXQgJHtmbXR9YCwgdGV4dCwgc3BlY2lmaWNPZmZzZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgZnJvbUZvcm1hdCBpbnN0ZWFkXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZyh0ZXh0LCBmbXQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tRm9ybWF0KHRleHQsIGZtdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVRpbWUgZnJvbSBhIFNRTCBkYXRlLCB0aW1lLCBvciBkYXRldGltZVxuICAgKiBEZWZhdWx0cyB0byBlbi1VUyBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkLCByZWdhcmRsZXNzIG9mIHRoZSBzeXN0ZW0ncyBsb2NhbGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSB0aGUgc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0byBhZmZlY3QgdGhlIGNyZWF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfFpvbmV9IFtvcHRzLnpvbmU9J2xvY2FsJ10gLSB1c2UgdGhpcyB6b25lIGlmIG5vIG9mZnNldCBpcyBzcGVjaWZpZWQgaW4gdGhlIGlucHV0IHN0cmluZyBpdHNlbGYuIFdpbGwgYWxzbyBjb252ZXJ0IHRoZSBEYXRlVGltZSB0byB0aGlzIHpvbmVcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zZXRab25lPWZhbHNlXSAtIG92ZXJyaWRlIHRoZSB6b25lIHdpdGggYSB6b25lIHNwZWNpZmllZCBpbiB0aGUgc3RyaW5nIGl0c2VsZiwgaWYgaXQgc3BlY2lmaWVzIG9uZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMubG9jYWxlPSdlbi1VUyddIC0gYSBsb2NhbGUgc3RyaW5nIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIERhdGVUaW1lIHRvIHRoaXMgbG9jYWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRzLm51bWJlcmluZ1N5c3RlbSAtIHRoZSBudW1iZXJpbmcgc3lzdGVtIHRvIHVzZSB3aGVuIHBhcnNpbmcuIFdpbGwgYWxzbyBzZXQgdGhlIHJlc3VsdGluZyBEYXRlVGltZSB0byB0aGlzIG51bWJlcmluZyBzeXN0ZW1cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdHMub3V0cHV0Q2FsZW5kYXIgLSB0aGUgb3V0cHV0IGNhbGVuZGFyIHRvIHNldCBvbiB0aGUgcmVzdWx0aW5nIERhdGVUaW1lIGluc3RhbmNlXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0JylcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMjAxNy0wNS0xNSAwOToxMjozNC4zNDInKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiswNjowMCcpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyIEFtZXJpY2EvTG9zX0FuZ2VsZXMnKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5mcm9tU1FMKCcyMDE3LTA1LTE1IDA5OjEyOjM0LjM0MiBBbWVyaWNhL0xvc19BbmdlbGVzJywgeyBzZXRab25lOiB0cnVlIH0pXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmZyb21TUUwoJzIwMTctMDUtMTUgMDk6MTI6MzQuMzQyJywgeyB6b25lOiAnQW1lcmljYS9Mb3NfQW5nZWxlcycgfSlcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUuZnJvbVNRTCgnMDk6MTI6MzQuMzQyJylcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBzdGF0aWMgZnJvbVNRTCh0ZXh0LCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBbdmFscywgcGFyc2VkWm9uZV0gPSBwYXJzZVNRTCh0ZXh0KTtcbiAgICByZXR1cm4gcGFyc2VEYXRhVG9EYXRlVGltZSh2YWxzLCBwYXJzZWRab25lLCBvcHRzLCBcIlNRTFwiLCB0ZXh0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaW52YWxpZCBEYXRlVGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlYXNvbiAtIHNpbXBsZSBzdHJpbmcgb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgaXMgaW52YWxpZC4gU2hvdWxkIG5vdCBjb250YWluIHBhcmFtZXRlcnMgb3IgYW55dGhpbmcgZWxzZSBkYXRhLWRlcGVuZGVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtleHBsYW5hdGlvbj1udWxsXSAtIGxvbmdlciBleHBsYW5hdGlvbiwgbWF5IGluY2x1ZGUgcGFyYW1ldGVycyBhbmQgb3RoZXIgdXNlZnVsIGRlYnVnZ2luZyBpbmZvcm1hdGlvblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXRpYyBpbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24gPSBudWxsKSB7XG4gICAgaWYgKCFyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBJbnZhbGlkQXJndW1lbnRFcnJvcihcIm5lZWQgdG8gc3BlY2lmeSBhIHJlYXNvbiB0aGUgRGF0ZVRpbWUgaXMgaW52YWxpZFwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBpbnZhbGlkID0gcmVhc29uIGluc3RhbmNlb2YgSW52YWxpZCA/IHJlYXNvbiA6IG5ldyBJbnZhbGlkKHJlYXNvbiwgZXhwbGFuYXRpb24pO1xuXG4gICAgaWYgKFNldHRpbmdzLnRocm93T25JbnZhbGlkKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZERhdGVUaW1lRXJyb3IoaW52YWxpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgRGF0ZVRpbWUoeyBpbnZhbGlkIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZVRpbWUuIFdvcmtzIGFjcm9zcyBjb250ZXh0IGJvdW5kYXJpZXNcbiAgICogQHBhcmFtIHtvYmplY3R9IG9cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHN0YXRpYyBpc0RhdGVUaW1lKG8pIHtcbiAgICByZXR1cm4gKG8gJiYgby5pc0x1eG9uRGF0ZVRpbWUpIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb2R1Y2UgdGhlIGZvcm1hdCBzdHJpbmcgZm9yIGEgc2V0IG9mIG9wdGlvbnNcbiAgICogQHBhcmFtIGZvcm1hdE9wdHNcbiAgICogQHBhcmFtIGxvY2FsZU9wdHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBwYXJzZUZvcm1hdEZvck9wdHMoZm9ybWF0T3B0cywgbG9jYWxlT3B0cyA9IHt9KSB7XG4gICAgY29uc3QgdG9rZW5MaXN0ID0gZm9ybWF0T3B0c1RvVG9rZW5zKGZvcm1hdE9wdHMsIExvY2FsZS5mcm9tT2JqZWN0KGxvY2FsZU9wdHMpKTtcbiAgICByZXR1cm4gIXRva2VuTGlzdCA/IG51bGwgOiB0b2tlbkxpc3QubWFwKCh0KSA9PiAodCA/IHQudmFsIDogbnVsbCkpLmpvaW4oXCJcIik7XG4gIH1cblxuICAvKipcbiAgICogUHJvZHVjZSB0aGUgdGhlIGZ1bGx5IGV4cGFuZGVkIGZvcm1hdCB0b2tlbiBmb3IgdGhlIGxvY2FsZVxuICAgKiBEb2VzIE5PVCBxdW90ZSBjaGFyYWN0ZXJzLCBzbyBxdW90ZWQgdG9rZW5zIHdpbGwgbm90IHJvdW5kIHRyaXAgY29ycmVjdGx5XG4gICAqIEBwYXJhbSBmbXRcbiAgICogQHBhcmFtIGxvY2FsZU9wdHNcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIHN0YXRpYyBleHBhbmRGb3JtYXQoZm10LCBsb2NhbGVPcHRzID0ge30pIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IGV4cGFuZE1hY3JvVG9rZW5zKEZvcm1hdHRlci5wYXJzZUZvcm1hdChmbXQpLCBMb2NhbGUuZnJvbU9iamVjdChsb2NhbGVPcHRzKSk7XG4gICAgcmV0dXJuIGV4cGFuZGVkLm1hcCgodCkgPT4gdC52YWwpLmpvaW4oXCJcIik7XG4gIH1cblxuICAvLyBJTkZPXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgb2YgdW5pdC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBhIHVuaXQgc3VjaCBhcyAnbWludXRlJyBvciAnZGF5J1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA3LCA0KS5nZXQoJ21vbnRoJyk7IC8vPT4gN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA3LCA0KS5nZXQoJ2RheScpOyAvLz0+IDRcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0KHVuaXQpIHtcbiAgICByZXR1cm4gdGhpc1t1bml0XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIHZhbGlkLiBJbnZhbGlkIERhdGVUaW1lcyBvY2N1ciB3aGVuOlxuICAgKiAqIFRoZSBEYXRlVGltZSB3YXMgY3JlYXRlZCBmcm9tIGludmFsaWQgY2FsZW5kYXIgaW5mb3JtYXRpb24sIHN1Y2ggYXMgdGhlIDEzdGggbW9udGggb3IgRmVicnVhcnkgMzBcbiAgICogKiBUaGUgRGF0ZVRpbWUgd2FzIGNyZWF0ZWQgYnkgYW4gb3BlcmF0aW9uIG9uIGFub3RoZXIgaW52YWxpZCBkYXRlXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA9PT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGVycm9yIGNvZGUgaWYgdGhpcyBEYXRlVGltZSBpcyBpbnZhbGlkLCBvciBudWxsIGlmIHRoZSBEYXRlVGltZSBpcyB2YWxpZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IGludmFsaWRSZWFzb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52YWxpZCA/IHRoaXMuaW52YWxpZC5yZWFzb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gZXhwbGFuYXRpb24gb2Ygd2h5IHRoaXMgRGF0ZVRpbWUgYmVjYW1lIGludmFsaWQsIG9yIG51bGwgaWYgdGhlIERhdGVUaW1lIGlzIHZhbGlkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgaW52YWxpZEV4cGxhbmF0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmludmFsaWQgPyB0aGlzLmludmFsaWQuZXhwbGFuYXRpb24gOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbG9jYWxlIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2VuLUdCJy4gVGhlIGxvY2FsZSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBsb2NhbGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLmxvY2FsZSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXJpbmcgc3lzdGVtIG9mIGEgRGF0ZVRpbWUsIHN1Y2ggJ2JlbmcnLiBUaGUgbnVtYmVyaW5nIHN5c3RlbSBpcyB1c2VkIHdoZW4gZm9ybWF0dGluZyB0aGUgRGF0ZVRpbWVcbiAgICpcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBudW1iZXJpbmdTeXN0ZW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm51bWJlcmluZ1N5c3RlbSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBvdXRwdXQgY2FsZW5kYXIgb2YgYSBEYXRlVGltZSwgc3VjaCAnaXNsYW1pYycuIFRoZSBvdXRwdXQgY2FsZW5kYXIgaXMgdXNlZCB3aGVuIGZvcm1hdHRpbmcgdGhlIERhdGVUaW1lXG4gICAqXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgb3V0cHV0Q2FsZW5kYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMubG9jLm91dHB1dENhbGVuZGFyIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRpbWUgem9uZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBEYXRlVGltZS5cbiAgICogQHR5cGUge1pvbmV9XG4gICAqL1xuICBnZXQgem9uZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fem9uZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG5hbWUgb2YgdGhlIHRpbWUgem9uZS5cbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCB6b25lTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy56b25lLm5hbWUgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgeWVhclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkueWVhciAvLz0+IDIwMTdcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB5ZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMueWVhciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHF1YXJ0ZXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLnF1YXJ0ZXIgLy89PiAyXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgcXVhcnRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gTWF0aC5jZWlsKHRoaXMuYy5tb250aCAvIDMpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbW9udGggKDEtMTIpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkubW9udGggLy89PiA1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbW9udGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5tb250aCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgbW9udGggKDEtMzBpc2gpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuZGF5IC8vPT4gMjVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBkYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5kYXkgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBob3VyIG9mIHRoZSBkYXkgKDAtMjMpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSkuaG91ciAvLz0+IDlcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBob3VyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuaG91ciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbnV0ZSBvZiB0aGUgaG91ciAoMC01OSkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCkubWludXRlIC8vPT4gMzBcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBtaW51dGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5taW51dGUgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZWNvbmQgb2YgdGhlIG1pbnV0ZSAoMC01OSkuXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTcsIDUsIDI1LCA5LCAzMCwgNTIpLnNlY29uZCAvLz0+IDUyXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgc2Vjb25kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyB0aGlzLmMuc2Vjb25kIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWlsbGlzZWNvbmQgb2YgdGhlIHNlY29uZCAoMC05OTkpLlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSwgOSwgMzAsIDUyLCA2NTQpLm1pbGxpc2Vjb25kIC8vPT4gNjU0XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbWlsbGlzZWNvbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuYy5taWxsaXNlY29uZCA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgeWVhclxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMTIsIDMxKS53ZWVrWWVhciAvLz0+IDIwMTVcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrWWVhciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgbnVtYmVyIG9mIHRoZSB3ZWVrIHllYXIgKDEtNTJpc2gpLlxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgNSwgMjUpLndlZWtOdW1iZXIgLy89PiAyMVxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtOdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkV2Vla0RhdGEodGhpcykud2Vla051bWJlciA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRheSBvZiB0aGUgd2Vlay5cbiAgICogMSBpcyBNb25kYXkgYW5kIDcgaXMgU3VuZGF5XG4gICAqIEBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPX3dlZWtfZGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAxMSwgMzEpLndlZWtkYXkgLy89PiA0XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgd2Vla2RheSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRXZWVrRGF0YSh0aGlzKS53ZWVrZGF5IDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGRhdGUgaXMgb24gYSB3ZWVrZW5kIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLCBmYWxzZSBvdGhlcndpc2VcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBnZXQgaXNXZWVrZW5kKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgJiYgdGhpcy5sb2MuZ2V0V2Vla2VuZERheXMoKS5pbmNsdWRlcyh0aGlzLndlZWtkYXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF5IG9mIHRoZSB3ZWVrIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLlxuICAgKiAxIGlzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgYW5kIDcgaXMgdGhlIGxhc3QgZGF5IG9mIHRoZSB3ZWVrLlxuICAgKiBJZiB0aGUgbG9jYWxlIGFzc2lnbnMgU3VuZGF5IGFzIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIHRoZW4gYSBkYXRlIHdoaWNoIGlzIGEgU3VuZGF5IHdpbGwgcmV0dXJuIDEsXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbG9jYWxXZWVrZGF5KCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWQgPyBwb3NzaWJseUNhY2hlZExvY2FsV2Vla0RhdGEodGhpcykud2Vla2RheSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdlZWsgbnVtYmVyIG9mIHRoZSB3ZWVrIHllYXIgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbGUuIERpZmZlcmVudCBsb2NhbGVzIGFzc2lnbiB3ZWVrIG51bWJlcnMgZGlmZmVyZW50bHksXG4gICAqIGJlY2F1c2UgdGhlIHdlZWsgY2FuIHN0YXJ0IG9uIGRpZmZlcmVudCBkYXlzIG9mIHRoZSB3ZWVrIChzZWUgbG9jYWxXZWVrZGF5KSBhbmQgYmVjYXVzZSBhIGRpZmZlcmVudCBudW1iZXIgb2YgZGF5c1xuICAgKiBpcyByZXF1aXJlZCBmb3IgYSB3ZWVrIHRvIGNvdW50IGFzIHRoZSBmaXJzdCB3ZWVrIG9mIGEgeWVhci5cbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCBsb2NhbFdlZWtOdW1iZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHBvc3NpYmx5Q2FjaGVkTG9jYWxXZWVrRGF0YSh0aGlzKS53ZWVrTnVtYmVyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgd2VlayB5ZWFyIGFjY29yZGluZyB0byB0aGUgbG9jYWxlLiBEaWZmZXJlbnQgbG9jYWxlcyBhc3NpZ24gd2VlayBudW1iZXJzIChhbmQgdGhlcmVmb3Igd2VlayB5ZWFycylcbiAgICogZGlmZmVyZW50bHksIHNlZSBsb2NhbFdlZWtOdW1iZXIuXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgbG9jYWxXZWVrWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gcG9zc2libHlDYWNoZWRMb2NhbFdlZWtEYXRhKHRoaXMpLndlZWtZZWFyIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3JkaW5hbCAobWVhbmluZyB0aGUgZGF5IG9mIHRoZSB5ZWFyKVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkub3JkaW5hbCAvLz0+IDE0NVxuICAgKiBAdHlwZSB7bnVtYmVyfERhdGVUaW1lfVxuICAgKi9cbiAgZ2V0IG9yZGluYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IGdyZWdvcmlhblRvT3JkaW5hbCh0aGlzLmMpLm9yZGluYWwgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBzaG9ydCBtb250aCBuYW1lLCBzdWNoIGFzICdPY3QnLlxuICAgKiBEZWZhdWx0cyB0byB0aGUgc3lzdGVtJ3MgbG9jYWxlIGlmIG5vIGxvY2FsZSBoYXMgYmVlbiBzcGVjaWZpZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNywgMTAsIDMwKS5tb250aFNob3J0IC8vPT4gT2N0XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgbW9udGhTaG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby5tb250aHMoXCJzaG9ydFwiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIGxvbmcgbW9udGggbmFtZSwgc3VjaCBhcyAnT2N0b2JlcicuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLm1vbnRoTG9uZyAvLz0+IE9jdG9iZXJcbiAgICogQHR5cGUge3N0cmluZ31cbiAgICovXG4gIGdldCBtb250aExvbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ubW9udGhzKFwibG9uZ1wiLCB7IGxvY09iajogdGhpcy5sb2MgfSlbdGhpcy5tb250aCAtIDFdIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGh1bWFuIHJlYWRhYmxlIHNob3J0IHdlZWtkYXksIHN1Y2ggYXMgJ01vbicuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlTaG9ydCAvLz0+IE1vblxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IHdlZWtkYXlTaG9ydCgpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gSW5mby53ZWVrZGF5cyhcInNob3J0XCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBodW1hbiByZWFkYWJsZSBsb25nIHdlZWtkYXksIHN1Y2ggYXMgJ01vbmRheScuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCAxMCwgMzApLndlZWtkYXlMb25nIC8vPT4gTW9uZGF5XG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgd2Vla2RheUxvbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEluZm8ud2Vla2RheXMoXCJsb25nXCIsIHsgbG9jT2JqOiB0aGlzLmxvYyB9KVt0aGlzLndlZWtkYXkgLSAxXSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBVVEMgb2Zmc2V0IG9mIHRoaXMgRGF0ZVRpbWUgaW4gbWludXRlc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5vZmZzZXQgLy89PiAtMjQwXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLm9mZnNldCAvLz0+IDBcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCBvZmZzZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/ICt0aGlzLm8gOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzaG9ydCBodW1hbiBuYW1lIGZvciB0aGUgem9uZSdzIGN1cnJlbnQgb2Zmc2V0LCBmb3IgZXhhbXBsZSBcIkVTVFwiIG9yIFwiRURUXCIuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgKi9cbiAgZ2V0IG9mZnNldE5hbWVTaG9ydCgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy56b25lLm9mZnNldE5hbWUodGhpcy50cywge1xuICAgICAgICBmb3JtYXQ6IFwic2hvcnRcIixcbiAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsb25nIGh1bWFuIG5hbWUgZm9yIHRoZSB6b25lJ3MgY3VycmVudCBvZmZzZXQsIGZvciBleGFtcGxlIFwiRWFzdGVybiBTdGFuZGFyZCBUaW1lXCIgb3IgXCJFYXN0ZXJuIERheWxpZ2h0IFRpbWVcIi5cbiAgICogRGVmYXVsdHMgdG8gdGhlIHN5c3RlbSdzIGxvY2FsZSBpZiBubyBsb2NhbGUgaGFzIGJlZW4gc3BlY2lmaWVkXG4gICAqIEB0eXBlIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgb2Zmc2V0TmFtZUxvbmcoKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuem9uZS5vZmZzZXROYW1lKHRoaXMudHMsIHtcbiAgICAgICAgZm9ybWF0OiBcImxvbmdcIixcbiAgICAgICAgbG9jYWxlOiB0aGlzLmxvY2FsZSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhpcyB6b25lJ3Mgb2Zmc2V0IGV2ZXIgY2hhbmdlcywgYXMgaW4gYSBEU1QuXG4gICAqIEB0eXBlIHtib29sZWFufVxuICAgKi9cbiAgZ2V0IGlzT2Zmc2V0Rml4ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHRoaXMuem9uZS5pc1VuaXZlcnNhbCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHdoZXRoZXIgdGhlIERhdGVUaW1lIGlzIGluIGEgRFNULlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc0luRFNUKCkge1xuICAgIGlmICh0aGlzLmlzT2Zmc2V0Rml4ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5vZmZzZXQgPiB0aGlzLnNldCh7IG1vbnRoOiAxLCBkYXk6IDEgfSkub2Zmc2V0IHx8XG4gICAgICAgIHRoaXMub2Zmc2V0ID4gdGhpcy5zZXQoeyBtb250aDogNSB9KS5vZmZzZXRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aG9zZSBEYXRlVGltZXMgd2hpY2ggaGF2ZSB0aGUgc2FtZSBsb2NhbCB0aW1lIGFzIHRoaXMgRGF0ZVRpbWUsIGJ1dCBhIGRpZmZlcmVudCBvZmZzZXQgZnJvbSBVVENcbiAgICogaW4gdGhpcyBEYXRlVGltZSdzIHpvbmUuIER1cmluZyBEU1QgY2hhbmdlcyBsb2NhbCB0aW1lIGNhbiBiZSBhbWJpZ3VvdXMsIGZvciBleGFtcGxlXG4gICAqIGAyMDIzLTEwLTI5VDAyOjMwOjAwYCBpbiBgRXVyb3BlL0JlcmxpbmAgY2FuIGhhdmUgb2Zmc2V0IGArMDE6MDBgIG9yIGArMDI6MDBgLlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiBib3RoIHBvc3NpYmxlIERhdGVUaW1lcyBpZiB0aGlzIERhdGVUaW1lJ3MgbG9jYWwgdGltZSBpcyBhbWJpZ3VvdXMuXG4gICAqIEByZXR1cm5zIHtEYXRlVGltZVtdfVxuICAgKi9cbiAgZ2V0UG9zc2libGVPZmZzZXRzKCkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkIHx8IHRoaXMuaXNPZmZzZXRGaXhlZCkge1xuICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgY29uc3QgZGF5TXMgPSA4NjQwMDAwMDtcbiAgICBjb25zdCBtaW51dGVNcyA9IDYwMDAwO1xuICAgIGNvbnN0IGxvY2FsVFMgPSBvYmpUb0xvY2FsVFModGhpcy5jKTtcbiAgICBjb25zdCBvRWFybGllciA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyAtIGRheU1zKTtcbiAgICBjb25zdCBvTGF0ZXIgPSB0aGlzLnpvbmUub2Zmc2V0KGxvY2FsVFMgKyBkYXlNcyk7XG5cbiAgICBjb25zdCBvMSA9IHRoaXMuem9uZS5vZmZzZXQobG9jYWxUUyAtIG9FYXJsaWVyICogbWludXRlTXMpO1xuICAgIGNvbnN0IG8yID0gdGhpcy56b25lLm9mZnNldChsb2NhbFRTIC0gb0xhdGVyICogbWludXRlTXMpO1xuICAgIGlmIChvMSA9PT0gbzIpIHtcbiAgICAgIHJldHVybiBbdGhpc107XG4gICAgfVxuICAgIGNvbnN0IHRzMSA9IGxvY2FsVFMgLSBvMSAqIG1pbnV0ZU1zO1xuICAgIGNvbnN0IHRzMiA9IGxvY2FsVFMgLSBvMiAqIG1pbnV0ZU1zO1xuICAgIGNvbnN0IGMxID0gdHNUb09iaih0czEsIG8xKTtcbiAgICBjb25zdCBjMiA9IHRzVG9PYmoodHMyLCBvMik7XG4gICAgaWYgKFxuICAgICAgYzEuaG91ciA9PT0gYzIuaG91ciAmJlxuICAgICAgYzEubWludXRlID09PSBjMi5taW51dGUgJiZcbiAgICAgIGMxLnNlY29uZCA9PT0gYzIuc2Vjb25kICYmXG4gICAgICBjMS5taWxsaXNlY29uZCA9PT0gYzIubWlsbGlzZWNvbmRcbiAgICApIHtcbiAgICAgIHJldHVybiBbY2xvbmUodGhpcywgeyB0czogdHMxIH0pLCBjbG9uZSh0aGlzLCB7IHRzOiB0czIgfSldO1xuICAgIH1cbiAgICByZXR1cm4gW3RoaXNdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIERhdGVUaW1lIGlzIGluIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2VcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuaXNJbkxlYXBZZWFyIC8vPT4gdHJ1ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5pc0luTGVhcFllYXIgLy89PiBmYWxzZVxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICovXG4gIGdldCBpc0luTGVhcFllYXIoKSB7XG4gICAgcmV0dXJuIGlzTGVhcFllYXIodGhpcy55ZWFyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGlzIERhdGVUaW1lJ3MgbW9udGhcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNiwgMikuZGF5c0luTW9udGggLy89PiAyOVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE2LCAzKS5kYXlzSW5Nb250aCAvLz0+IDMxXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5c0luTW9udGgoKSB7XG4gICAgcmV0dXJuIGRheXNJbk1vbnRoKHRoaXMueWVhciwgdGhpcy5tb250aCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gdGhpcyBEYXRlVGltZSdzIHllYXJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNikuZGF5c0luWWVhciAvLz0+IDM2NlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDEzKS5kYXlzSW5ZZWFyIC8vPT4gMzY1XG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgZGF5c0luWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gZGF5c0luWWVhcih0aGlzLnllYXIpIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB3ZWVrcyBpbiB0aGlzIERhdGVUaW1lJ3MgeWVhclxuICAgKiBAc2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT193ZWVrX2RhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAwNCkud2Vla3NJbldlZWtZZWFyIC8vPT4gNTNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxMykud2Vla3NJbldlZWtZZWFyIC8vPT4gNTJcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGdldCB3ZWVrc0luV2Vla1llYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IHdlZWtzSW5XZWVrWWVhcih0aGlzLndlZWtZZWFyKSA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygd2Vla3MgaW4gdGhpcyBEYXRlVGltZSdzIGxvY2FsIHdlZWsgeWVhclxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDIwLCA2LCB7bG9jYWxlOiAnZW4tVVMnfSkud2Vla3NJbkxvY2FsV2Vla1llYXIgLy89PiA1MlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDIwLCA2LCB7bG9jYWxlOiAnZGUtREUnfSkud2Vla3NJbkxvY2FsV2Vla1llYXIgLy89PiA1M1xuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHdlZWtzSW5Mb2NhbFdlZWtZZWFyKCkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gd2Vla3NJbldlZWtZZWFyKFxuICAgICAgICAgIHRoaXMubG9jYWxXZWVrWWVhcixcbiAgICAgICAgICB0aGlzLmxvYy5nZXRNaW5EYXlzSW5GaXJzdFdlZWsoKSxcbiAgICAgICAgICB0aGlzLmxvYy5nZXRTdGFydE9mV2VlaygpXG4gICAgICAgIClcbiAgICAgIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlc29sdmVkIEludGwgb3B0aW9ucyBmb3IgdGhpcyBEYXRlVGltZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgaW4gdW5kZXJzdGFuZGluZyB0aGUgYmVoYXZpb3Igb2YgZm9ybWF0dGluZyBtZXRob2RzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gdGhlIHNhbWUgb3B0aW9ucyBhcyB0b0xvY2FsZVN0cmluZ1xuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICByZXNvbHZlZExvY2FsZU9wdGlvbnMob3B0cyA9IHt9KSB7XG4gICAgY29uc3QgeyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgY2FsZW5kYXIgfSA9IEZvcm1hdHRlci5jcmVhdGUoXG4gICAgICB0aGlzLmxvYy5jbG9uZShvcHRzKSxcbiAgICAgIG9wdHNcbiAgICApLnJlc29sdmVkT3B0aW9ucyh0aGlzKTtcbiAgICByZXR1cm4geyBsb2NhbGUsIG51bWJlcmluZ1N5c3RlbSwgb3V0cHV0Q2FsZW5kYXI6IGNhbGVuZGFyIH07XG4gIH1cblxuICAvLyBUUkFOU0ZPUk1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIFVUQy4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIHtAbGluayBEYXRlVGltZSNzZXRab25lfSgndXRjJylcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXQ9MF0gLSBvcHRpb25hbGx5LCBhbiBvZmZzZXQgZnJvbSBVVEMgaW4gbWludXRlc1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdHM9e31dIC0gb3B0aW9ucyB0byBwYXNzIHRvIGBzZXRab25lKClgXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgdG9VVEMob2Zmc2V0ID0gMCwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShGaXhlZE9mZnNldFpvbmUuaW5zdGFuY2Uob2Zmc2V0KSwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHRoZSBob3N0J3MgbG9jYWwgem9uZS4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKlxuICAgKiBFcXVpdmFsZW50IHRvIGBzZXRab25lKCdsb2NhbCcpYFxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHRvTG9jYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0Wm9uZShTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgRGF0ZVRpbWUncyB6b25lIHRvIHNwZWNpZmllZCB6b25lLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqXG4gICAqIEJ5IGRlZmF1bHQsIHRoZSBzZXR0ZXIga2VlcHMgdGhlIHVuZGVybHlpbmcgdGltZSB0aGUgc2FtZSAoYXMgaW4sIHRoZSBzYW1lIHRpbWVzdGFtcCksIGJ1dCB0aGUgbmV3IGluc3RhbmNlIHdpbGwgcmVwb3J0IGRpZmZlcmVudCBsb2NhbCB0aW1lcyBhbmQgY29uc2lkZXIgRFNUcyB3aGVuIG1ha2luZyBjb21wdXRhdGlvbnMsIGFzIHdpdGgge0BsaW5rIERhdGVUaW1lI3BsdXN9LiBZb3UgbWF5IHdpc2ggdG8gdXNlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsfSBhbmQge0BsaW5rIERhdGVUaW1lI3RvVVRDfSB3aGljaCBwcm92aWRlIHNpbXBsZSBjb252ZW5pZW5jZSB3cmFwcGVycyBmb3IgY29tbW9ubHkgdXNlZCB6b25lcy5cbiAgICogQHBhcmFtIHtzdHJpbmd8Wm9uZX0gW3pvbmU9J2xvY2FsJ10gLSBhIHpvbmUgaWRlbnRpZmllci4gQXMgYSBzdHJpbmcsIHRoYXQgY2FuIGJlIGFueSBJQU5BIHpvbmUgc3VwcG9ydGVkIGJ5IHRoZSBob3N0IGVudmlyb25tZW50LCBvciBhIGZpeGVkLW9mZnNldCBuYW1lIG9mIHRoZSBmb3JtICdVVEMrMycsIG9yIHRoZSBzdHJpbmdzICdsb2NhbCcgb3IgJ3V0YycuIFlvdSBtYXkgYWxzbyBzdXBwbHkgYW4gaW5zdGFuY2Ugb2YgYSB7QGxpbmsgRGF0ZVRpbWUjWm9uZX0gY2xhc3MuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmtlZXBMb2NhbFRpbWU9ZmFsc2VdIC0gSWYgdHJ1ZSwgYWRqdXN0IHRoZSB1bmRlcmx5aW5nIHRpbWUgc28gdGhhdCB0aGUgbG9jYWwgdGltZSBzdGF5cyB0aGUgc2FtZSwgYnV0IGluIHRoZSB0YXJnZXQgem9uZS4gWW91IHNob3VsZCByYXJlbHkgbmVlZCB0aGlzLlxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHNldFpvbmUoem9uZSwgeyBrZWVwTG9jYWxUaW1lID0gZmFsc2UsIGtlZXBDYWxlbmRhclRpbWUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICB6b25lID0gbm9ybWFsaXplWm9uZSh6b25lLCBTZXR0aW5ncy5kZWZhdWx0Wm9uZSk7XG4gICAgaWYgKHpvbmUuZXF1YWxzKHRoaXMuem9uZSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0gZWxzZSBpZiAoIXpvbmUuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIERhdGVUaW1lLmludmFsaWQodW5zdXBwb3J0ZWRab25lKHpvbmUpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG5ld1RTID0gdGhpcy50cztcbiAgICAgIGlmIChrZWVwTG9jYWxUaW1lIHx8IGtlZXBDYWxlbmRhclRpbWUpIHtcbiAgICAgICAgY29uc3Qgb2Zmc2V0R3Vlc3MgPSB6b25lLm9mZnNldCh0aGlzLnRzKTtcbiAgICAgICAgY29uc3QgYXNPYmogPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgICAgIFtuZXdUU10gPSBvYmpUb1RTKGFzT2JqLCBvZmZzZXRHdWVzcywgem9uZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2xvbmUodGhpcywgeyB0czogbmV3VFMsIHpvbmUgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvciBvdXRwdXRDYWxlbmRhci4gUmV0dXJucyBhIG5ld2x5LWNvbnN0cnVjdGVkIERhdGVUaW1lLlxuICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcGVydGllcyAtIHRoZSBwcm9wZXJ0aWVzIHRvIHNldFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkucmVjb25maWd1cmUoeyBsb2NhbGU6ICdlbi1HQicgfSlcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICByZWNvbmZpZ3VyZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9ID0ge30pIHtcbiAgICBjb25zdCBsb2MgPSB0aGlzLmxvYy5jbG9uZSh7IGxvY2FsZSwgbnVtYmVyaW5nU3lzdGVtLCBvdXRwdXRDYWxlbmRhciB9KTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgeyBsb2MgfSk7XG4gIH1cblxuICAvKipcbiAgICogXCJTZXRcIiB0aGUgbG9jYWxlLiBSZXR1cm5zIGEgbmV3bHktY29uc3RydWN0ZWQgRGF0ZVRpbWUuXG4gICAqIEp1c3QgYSBjb252ZW5pZW50IGFsaWFzIGZvciByZWNvbmZpZ3VyZSh7IGxvY2FsZSB9KVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE3LCA1LCAyNSkuc2V0TG9jYWxlKCdlbi1HQicpXG4gICAqIEByZXR1cm4ge0RhdGVUaW1lfVxuICAgKi9cbiAgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgIHJldHVybiB0aGlzLnJlY29uZmlndXJlKHsgbG9jYWxlIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFwiU2V0XCIgdGhlIHZhbHVlcyBvZiBzcGVjaWZpZWQgdW5pdHMuIFJldHVybnMgYSBuZXdseS1jb25zdHJ1Y3RlZCBEYXRlVGltZS5cbiAgICogWW91IGNhbiBvbmx5IHNldCB1bml0cyB3aXRoIHRoaXMgbWV0aG9kOyBmb3IgXCJzZXR0aW5nXCIgbWV0YWRhdGEsIHNlZSB7QGxpbmsgRGF0ZVRpbWUjcmVjb25maWd1cmV9IGFuZCB7QGxpbmsgRGF0ZVRpbWUjc2V0Wm9uZX0uXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIGFsc28gc3VwcG9ydHMgc2V0dGluZyBsb2NhbGUtYmFzZWQgd2VlayB1bml0cywgaS5lLiBgbG9jYWxXZWVrZGF5YCwgYGxvY2FsV2Vla051bWJlcmAgYW5kIGBsb2NhbFdlZWtZZWFyYC5cbiAgICogVGhleSBjYW5ub3QgYmUgbWl4ZWQgd2l0aCBJU08td2VlayB1bml0cyBsaWtlIGB3ZWVrZGF5YC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHZhbHVlcyAtIGEgbWFwcGluZyBvZiB1bml0cyB0byBudW1iZXJzXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMTcgfSlcbiAgICogQGV4YW1wbGUgZHQuc2V0KHsgaG91cjogOCwgbWludXRlOiAzMCB9KVxuICAgKiBAZXhhbXBsZSBkdC5zZXQoeyB3ZWVrZGF5OiA1IH0pXG4gICAqIEBleGFtcGxlIGR0LnNldCh7IHllYXI6IDIwMDUsIG9yZGluYWw6IDIzNCB9KVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHNldCh2YWx1ZXMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gbm9ybWFsaXplT2JqZWN0KHZhbHVlcywgbm9ybWFsaXplVW5pdFdpdGhMb2NhbFdlZWtzKTtcbiAgICBjb25zdCB7IG1pbkRheXNJbkZpcnN0V2Vlaywgc3RhcnRPZldlZWsgfSA9IHVzZXNMb2NhbFdlZWtWYWx1ZXMobm9ybWFsaXplZCwgdGhpcy5sb2MpO1xuXG4gICAgY29uc3Qgc2V0dGluZ1dlZWtTdHVmZiA9XG4gICAgICAgICFpc1VuZGVmaW5lZChub3JtYWxpemVkLndlZWtZZWFyKSB8fFxuICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrTnVtYmVyKSB8fFxuICAgICAgICAhaXNVbmRlZmluZWQobm9ybWFsaXplZC53ZWVrZGF5KSxcbiAgICAgIGNvbnRhaW5zT3JkaW5hbCA9ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLm9yZGluYWwpLFxuICAgICAgY29udGFpbnNHcmVnb3JZZWFyID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQueWVhciksXG4gICAgICBjb250YWluc0dyZWdvck1EID0gIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQubW9udGgpIHx8ICFpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSksXG4gICAgICBjb250YWluc0dyZWdvciA9IGNvbnRhaW5zR3JlZ29yWWVhciB8fCBjb250YWluc0dyZWdvck1ELFxuICAgICAgZGVmaW5pdGVXZWVrRGVmID0gbm9ybWFsaXplZC53ZWVrWWVhciB8fCBub3JtYWxpemVkLndlZWtOdW1iZXI7XG5cbiAgICBpZiAoKGNvbnRhaW5zR3JlZ29yIHx8IGNvbnRhaW5zT3JkaW5hbCkgJiYgZGVmaW5pdGVXZWVrRGVmKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RpbmdTcGVjaWZpY2F0aW9uRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgbWl4IHdlZWtZZWFyL3dlZWtOdW1iZXIgdW5pdHMgd2l0aCB5ZWFyL21vbnRoL2RheSBvciBvcmRpbmFsc1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChjb250YWluc0dyZWdvck1EICYmIGNvbnRhaW5zT3JkaW5hbCkge1xuICAgICAgdGhyb3cgbmV3IENvbmZsaWN0aW5nU3BlY2lmaWNhdGlvbkVycm9yKFwiQ2FuJ3QgbWl4IG9yZGluYWwgZGF0ZXMgd2l0aCBtb250aC9kYXlcIik7XG4gICAgfVxuXG4gICAgbGV0IG1peGVkO1xuICAgIGlmIChzZXR0aW5nV2Vla1N0dWZmKSB7XG4gICAgICBtaXhlZCA9IHdlZWtUb0dyZWdvcmlhbihcbiAgICAgICAgeyAuLi5ncmVnb3JpYW5Ub1dlZWsodGhpcy5jLCBtaW5EYXlzSW5GaXJzdFdlZWssIHN0YXJ0T2ZXZWVrKSwgLi4ubm9ybWFsaXplZCB9LFxuICAgICAgICBtaW5EYXlzSW5GaXJzdFdlZWssXG4gICAgICAgIHN0YXJ0T2ZXZWVrXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoIWlzVW5kZWZpbmVkKG5vcm1hbGl6ZWQub3JkaW5hbCkpIHtcbiAgICAgIG1peGVkID0gb3JkaW5hbFRvR3JlZ29yaWFuKHsgLi4uZ3JlZ29yaWFuVG9PcmRpbmFsKHRoaXMuYyksIC4uLm5vcm1hbGl6ZWQgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1peGVkID0geyAuLi50aGlzLnRvT2JqZWN0KCksIC4uLm5vcm1hbGl6ZWQgfTtcblxuICAgICAgLy8gaWYgd2UgZGlkbid0IHNldCB0aGUgZGF5IGJ1dCB3ZSBlbmRlZCB1cCBvbiBhbiBvdmVyZmxvdyBkYXRlLFxuICAgICAgLy8gdXNlIHRoZSBsYXN0IGRheSBvZiB0aGUgcmlnaHQgbW9udGhcbiAgICAgIGlmIChpc1VuZGVmaW5lZChub3JtYWxpemVkLmRheSkpIHtcbiAgICAgICAgbWl4ZWQuZGF5ID0gTWF0aC5taW4oZGF5c0luTW9udGgobWl4ZWQueWVhciwgbWl4ZWQubW9udGgpLCBtaXhlZC5kYXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IFt0cywgb10gPSBvYmpUb1RTKG1peGVkLCB0aGlzLm8sIHRoaXMuem9uZSk7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIHsgdHMsIG8gfSk7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgcGVyaW9kIG9mIHRpbWUgdG8gdGhpcyBEYXRlVGltZSBhbmQgcmV0dXJuIHRoZSByZXN1bHRpbmcgRGF0ZVRpbWVcbiAgICpcbiAgICogQWRkaW5nIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBvciBtaWxsaXNlY29uZHMgaW5jcmVhc2VzIHRoZSB0aW1lc3RhbXAgYnkgdGhlIHJpZ2h0IG51bWJlciBvZiBtaWxsaXNlY29uZHMuIEFkZGluZyBkYXlzLCBtb250aHMsIG9yIHllYXJzIHNoaWZ0cyB0aGUgY2FsZW5kYXIsIGFjY291bnRpbmcgZm9yIERTVHMgYW5kIGxlYXAgeWVhcnMgYWxvbmcgdGhlIHdheS4gVGh1cywgYGR0LnBsdXMoeyBob3VyczogMjQgfSlgIG1heSByZXN1bHQgaW4gYSBkaWZmZXJlbnQgdGltZSB0aGFuIGBkdC5wbHVzKHsgZGF5czogMSB9KWAgaWYgdGhlcmUncyBhIERTVCBzaGlmdCBpbiBiZXR3ZWVuLlxuICAgKiBAcGFyYW0ge0R1cmF0aW9ufE9iamVjdHxudW1iZXJ9IGR1cmF0aW9uIC0gVGhlIGFtb3VudCB0byBhZGQuIEVpdGhlciBhIEx1eG9uIER1cmF0aW9uLCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIHRoZSBvYmplY3QgYXJndW1lbnQgdG8gRHVyYXRpb24uZnJvbU9iamVjdCgpXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoMTIzKSAvL34+IGluIDEyMyBtaWxsaXNlY29uZHNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IG1pbnV0ZXM6IDE1IH0pIC8vfj4gaW4gMTUgbWludXRlc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KSAvL34+IHRoaXMgdGltZSB0b21vcnJvd1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogLTEgfSkgLy9+PiB0aGlzIHRpbWUgeWVzdGVyZGF5XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBob3VyczogMywgbWludXRlczogMTMgfSkgLy9+PiBpbiAzIGhyLCAxMyBtaW5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyhEdXJhdGlvbi5mcm9tT2JqZWN0KHsgaG91cnM6IDMsIG1pbnV0ZXM6IDEzIH0pKSAvL34+IGluIDMgaHIsIDEzIG1pblxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHBsdXMoZHVyYXRpb24pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgZHVyID0gRHVyYXRpb24uZnJvbUR1cmF0aW9uTGlrZShkdXJhdGlvbik7XG4gICAgcmV0dXJuIGNsb25lKHRoaXMsIGFkanVzdFRpbWUodGhpcywgZHVyKSk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3QgYSBwZXJpb2Qgb2YgdGltZSB0byB0aGlzIERhdGVUaW1lIGFuZCByZXR1cm4gdGhlIHJlc3VsdGluZyBEYXRlVGltZVxuICAgKiBTZWUge0BsaW5rIERhdGVUaW1lI3BsdXN9XG4gICAqIEBwYXJhbSB7RHVyYXRpb258T2JqZWN0fG51bWJlcn0gZHVyYXRpb24gLSBUaGUgYW1vdW50IHRvIHN1YnRyYWN0LiBFaXRoZXIgYSBMdXhvbiBEdXJhdGlvbiwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLCB0aGUgb2JqZWN0IGFyZ3VtZW50IHRvIER1cmF0aW9uLmZyb21PYmplY3QoKVxuICAgQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBtaW51cyhkdXJhdGlvbikge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBkdXIgPSBEdXJhdGlvbi5mcm9tRHVyYXRpb25MaWtlKGR1cmF0aW9uKS5uZWdhdGUoKTtcbiAgICByZXR1cm4gY2xvbmUodGhpcywgYWRqdXN0VGltZSh0aGlzLCBkdXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoaXMgRGF0ZVRpbWUgdG8gdGhlIGJlZ2lubmluZyBvZiBhIHVuaXQgb2YgdGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgYmVnaW5uaW5nIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWtcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZignbW9udGgnKS50b0lTT0RhdGUoKTsgLy89PiAnMjAxNC0wMy0wMSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuc3RhcnRPZigneWVhcicpLnRvSVNPRGF0ZSgpOyAvLz0+ICcyMDE0LTAxLTAxJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzKS5zdGFydE9mKCd3ZWVrJykudG9JU09EYXRlKCk7IC8vPT4gJzIwMTQtMDMtMDMnLCB3ZWVrcyBhbHdheXMgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuc3RhcnRPZignZGF5JykudG9JU09UaW1lKCk7IC8vPT4gJzAwOjAwLjAwMC0wNTowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMywgNSwgMzApLnN0YXJ0T2YoJ2hvdXInKS50b0lTT1RpbWUoKTsgLy89PiAnMDU6MDA6MDAuMDAwLTA1OjAwJ1xuICAgKiBAcmV0dXJuIHtEYXRlVGltZX1cbiAgICovXG4gIHN0YXJ0T2YodW5pdCwgeyB1c2VMb2NhbGVXZWVrcyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gdGhpcztcblxuICAgIGNvbnN0IG8gPSB7fSxcbiAgICAgIG5vcm1hbGl6ZWRVbml0ID0gRHVyYXRpb24ubm9ybWFsaXplVW5pdCh1bml0KTtcbiAgICBzd2l0Y2ggKG5vcm1hbGl6ZWRVbml0KSB7XG4gICAgICBjYXNlIFwieWVhcnNcIjpcbiAgICAgICAgby5tb250aCA9IDE7XG4gICAgICAvLyBmYWxscyB0aHJvdWdoXG4gICAgICBjYXNlIFwicXVhcnRlcnNcIjpcbiAgICAgIGNhc2UgXCJtb250aHNcIjpcbiAgICAgICAgby5kYXkgPSAxO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcIndlZWtzXCI6XG4gICAgICBjYXNlIFwiZGF5c1wiOlxuICAgICAgICBvLmhvdXIgPSAwO1xuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuICAgICAgY2FzZSBcImhvdXJzXCI6XG4gICAgICAgIG8ubWludXRlID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJtaW51dGVzXCI6XG4gICAgICAgIG8uc2Vjb25kID0gMDtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgXCJzZWNvbmRzXCI6XG4gICAgICAgIG8ubWlsbGlzZWNvbmQgPSAwO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJtaWxsaXNlY29uZHNcIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBubyBkZWZhdWx0LCBpbnZhbGlkIHVuaXRzIHRocm93IGluIG5vcm1hbGl6ZVVuaXQoKVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkVW5pdCA9PT0gXCJ3ZWVrc1wiKSB7XG4gICAgICBpZiAodXNlTG9jYWxlV2Vla3MpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRPZldlZWsgPSB0aGlzLmxvYy5nZXRTdGFydE9mV2VlaygpO1xuICAgICAgICBjb25zdCB7IHdlZWtkYXkgfSA9IHRoaXM7XG4gICAgICAgIGlmICh3ZWVrZGF5IDwgc3RhcnRPZldlZWspIHtcbiAgICAgICAgICBvLndlZWtOdW1iZXIgPSB0aGlzLndlZWtOdW1iZXIgLSAxO1xuICAgICAgICB9XG4gICAgICAgIG8ud2Vla2RheSA9IHN0YXJ0T2ZXZWVrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgby53ZWVrZGF5ID0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZFVuaXQgPT09IFwicXVhcnRlcnNcIikge1xuICAgICAgY29uc3QgcSA9IE1hdGguY2VpbCh0aGlzLm1vbnRoIC8gMyk7XG4gICAgICBvLm1vbnRoID0gKHEgLSAxKSAqIDMgKyAxO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNldChvKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIlNldFwiIHRoaXMgRGF0ZVRpbWUgdG8gdGhlIGVuZCAobWVhbmluZyB0aGUgbGFzdCBtaWxsaXNlY29uZCkgb2YgYSB1bml0IG9mIHRpbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVuaXQgLSBUaGUgdW5pdCB0byBnbyB0byB0aGUgZW5kIG9mLiBDYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RheScsICdob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCBvciAnbWlsbGlzZWNvbmQnLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWtcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubG9jYWwoMjAxNCwgMywgMykuZW5kT2YoJ21vbnRoJykudG9JU08oKTsgLy89PiAnMjAxNC0wMy0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd5ZWFyJykudG9JU08oKTsgLy89PiAnMjAxNC0xMi0zMVQyMzo1OTo1OS45OTktMDU6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDMsIDMpLmVuZE9mKCd3ZWVrJykudG9JU08oKTsgLy8gPT4gJzIwMTQtMDMtMDlUMjM6NTk6NTkuOTk5LTA1OjAwJywgd2Vla3Mgc3RhcnQgb24gTW9uZGF5c1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2RheScpLnRvSVNPKCk7IC8vPT4gJzIwMTQtMDMtMDNUMjM6NTk6NTkuOTk5LTA1OjAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCAzLCAzLCA1LCAzMCkuZW5kT2YoJ2hvdXInKS50b0lTTygpOyAvLz0+ICcyMDE0LTAzLTAzVDA1OjU5OjU5Ljk5OS0wNTowMCdcbiAgICogQHJldHVybiB7RGF0ZVRpbWV9XG4gICAqL1xuICBlbmRPZih1bml0LCBvcHRzKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZFxuICAgICAgPyB0aGlzLnBsdXMoeyBbdW5pdF06IDEgfSlcbiAgICAgICAgICAuc3RhcnRPZih1bml0LCBvcHRzKVxuICAgICAgICAgIC5taW51cygxKVxuICAgICAgOiB0aGlzO1xuICB9XG5cbiAgLy8gT1VUUFVUXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgZm9ybWF0IHN0cmluZy5cbiAgICogKipZb3UgbWF5IG5vdCB3YW50IHRoaXMuKiogU2VlIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9yIGEgbW9yZSBmbGV4aWJsZSBmb3JtYXR0aW5nIHRvb2wuIEZvciBhIHRhYmxlIG9mIHRva2VucyBhbmQgdGhlaXIgaW50ZXJwcmV0YXRpb25zLCBzZWUgW2hlcmVdKGh0dHBzOi8vbW9tZW50LmdpdGh1Yi5pby9sdXhvbi8jL2Zvcm1hdHRpbmc/aWQ9dGFibGUtb2YtdG9rZW5zKS5cbiAgICogRGVmYXVsdHMgdG8gZW4tVVMgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZCwgcmVnYXJkbGVzcyBvZiB0aGUgc3lzdGVtJ3MgbG9jYWxlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZm10IC0gdGhlIGZvcm1hdCBzdHJpbmdcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgneXl5eSBMTEwgZGQnKSAvLz0+ICcyMDE3IEFwciAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuc2V0TG9jYWxlKCdmcicpLnRvRm9ybWF0KCd5eXl5IExMTCBkZCcpIC8vPT4gJzIwMTcgYXZyLiAyMidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXkgTExMIGRkJywgeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+ICcyMDE3IGF2ci4gMjInXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KFwiSEggJ2hvdXJzIGFuZCcgbW0gJ21pbnV0ZXMnXCIpIC8vPT4gJzIwIGhvdXJzIGFuZCA1NSBtaW51dGVzJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0Zvcm1hdChmbXQsIG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5yZWRlZmF1bHRUb0VOKG9wdHMpKS5mb3JtYXREYXRlVGltZUZyb21TdHJpbmcodGhpcywgZm10KVxuICAgICAgOiBJTlZBTElEO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsb2NhbGl6ZWQgc3RyaW5nIHJlcHJlc2VudGluZyB0aGlzIGRhdGUuIEFjY2VwdHMgdGhlIHNhbWUgb3B0aW9ucyBhcyB0aGUgSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBhbmQgYW55IHByZXNldHMgZGVmaW5lZCBieSBMdXhvbiwgc3VjaCBhcyBgRGF0ZVRpbWUuREFURV9GVUxMYCBvciBgRGF0ZVRpbWUuVElNRV9TSU1QTEVgLlxuICAgKiBUaGUgZXhhY3QgYmVoYXZpb3Igb2YgdGhpcyBtZXRob2QgaXMgYnJvd3Nlci1zcGVjaWZpYywgYnV0IGluIGdlbmVyYWwgaXQgd2lsbCByZXR1cm4gYW4gYXBwcm9wcmlhdGUgcmVwcmVzZW50YXRpb25cbiAgICogb2YgdGhlIERhdGVUaW1lIGluIHRoZSBhc3NpZ25lZCBsb2NhbGUuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0XG4gICAqIEBwYXJhbSBmb3JtYXRPcHRzIHtPYmplY3R9IC0gSW50bC5EYXRlVGltZUZvcm1hdCBjb25zdHJ1Y3RvciBvcHRpb25zIGFuZCBjb25maWd1cmF0aW9uIG9wdGlvbnNcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRzIHRvIG92ZXJyaWRlIHRoZSBjb25maWd1cmF0aW9uIG9wdGlvbnMgb24gdGhpcyBEYXRlVGltZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZygpOyAvLz0+IDQvMjAvMjAxN1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoJ2VuLWdiJykudG9Mb2NhbGVTdHJpbmcoKTsgLy89PiAnMjAvMDQvMjAxNydcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVTdHJpbmcoRGF0ZVRpbWUuREFURV9GVUxMKTsgLy89PiAnQXByaWwgMjAsIDIwMTcnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKERhdGVUaW1lLkRBVEVfRlVMTCwgeyBsb2NhbGU6ICdmcicgfSk7IC8vPT4gJzI4IGFvXHUwMEZCdCAyMDIyJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5USU1FX1NJTVBMRSk7IC8vPT4gJzExOjMyIEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyhEYXRlVGltZS5EQVRFVElNRV9TSE9SVCk7IC8vPT4gJzQvMjAvMjAxNywgMTE6MzIgQU0nXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvTG9jYWxlU3RyaW5nKHsgd2Vla2RheTogJ2xvbmcnLCBtb250aDogJ2xvbmcnLCBkYXk6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1cnNkYXksIEFwcmlsIDIwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IHdlZWtkYXk6ICdzaG9ydCcsIG1vbnRoOiAnc2hvcnQnLCBkYXk6ICcyLWRpZ2l0JywgaG91cjogJzItZGlnaXQnLCBtaW51dGU6ICcyLWRpZ2l0JyB9KTsgLy89PiAnVGh1LCBBcHIgMjAsIDExOjI3IEFNJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b0xvY2FsZVN0cmluZyh7IGhvdXI6ICcyLWRpZ2l0JywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXJDeWNsZTogJ2gyMycgfSk7IC8vPT4gJzExOjMyJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0xvY2FsZVN0cmluZyhmb3JtYXRPcHRzID0gRm9ybWF0cy5EQVRFX1NIT1JULCBvcHRzID0ge30pIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkXG4gICAgICA/IEZvcm1hdHRlci5jcmVhdGUodGhpcy5sb2MuY2xvbmUob3B0cyksIGZvcm1hdE9wdHMpLmZvcm1hdERhdGVUaW1lKHRoaXMpXG4gICAgICA6IElOVkFMSUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBmb3JtYXQgXCJwYXJ0c1wiLCBtZWFuaW5nIGluZGl2aWR1YWwgdG9rZW5zIGFsb25nIHdpdGggbWV0YWRhdGEuIFRoaXMgaXMgYWxsb3dzIGNhbGxlcnMgdG8gcG9zdC1wcm9jZXNzIGluZGl2aWR1YWwgc2VjdGlvbnMgb2YgdGhlIGZvcm1hdHRlZCBvdXRwdXQuXG4gICAqIERlZmF1bHRzIHRvIHRoZSBzeXN0ZW0ncyBsb2NhbGUgaWYgbm8gbG9jYWxlIGhhcyBiZWVuIHNwZWNpZmllZFxuICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGVUaW1lRm9ybWF0L2Zvcm1hdFRvUGFydHNcbiAgICogQHBhcmFtIG9wdHMge09iamVjdH0gLSBJbnRsLkRhdGVUaW1lRm9ybWF0IGNvbnN0cnVjdG9yIG9wdGlvbnMsIHNhbWUgYXMgYHRvTG9jYWxlU3RyaW5nYC5cbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9Mb2NhbGVQYXJ0cygpOyAvLz0+IFtcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vPT4gICB7IHR5cGU6ICdkYXknLCB2YWx1ZTogJzI1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAnbW9udGgnLCB2YWx1ZTogJzA1JyB9LFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiAgIHsgdHlwZTogJ2xpdGVyYWwnLCB2YWx1ZTogJy8nIH0sXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLz0+ICAgeyB0eXBlOiAneWVhcicsIHZhbHVlOiAnMTk4MicgfVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy89PiBdXG4gICAqL1xuICB0b0xvY2FsZVBhcnRzKG9wdHMgPSB7fSkge1xuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgICAgID8gRm9ybWF0dGVyLmNyZWF0ZSh0aGlzLmxvYy5jbG9uZShvcHRzKSwgb3B0cykuZm9ybWF0RGF0ZVRpbWVQYXJ0cyh0aGlzKVxuICAgICAgOiBbXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIElTTyA4NjAxLWNvbXBsaWFudCBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zdXBwcmVzc01pbGxpc2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIG1pbGxpc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NTZWNvbmRzPWZhbHNlXSAtIGV4Y2x1ZGUgc2Vjb25kcyBmcm9tIHRoZSBmb3JtYXQgaWYgdGhleSdyZSAwXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldD10cnVlXSAtIGluY2x1ZGUgdGhlIG9mZnNldCwgc3VjaCBhcyAnWicgb3IgJy0wNDowMCdcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leHRlbmRlZFpvbmU9ZmFsc2VdIC0gYWRkIHRoZSB0aW1lIHpvbmUgZm9ybWF0IGV4dGVuc2lvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODMsIDUsIDI1KS50b0lTTygpIC8vPT4gJzE5ODItMDUtMjVUMDA6MDA6MDAuMDAwWidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oKSAvLz0+ICcyMDE3LTA0LTIyVDIwOjQ3OjA1LjMzNS0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcyMDE3LTA0LTIyVDIwOjQ3OjA1LjMzNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9JU08oeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMjAxNzA0MjJUMjA0NzA1LjMzNS0wNDAwJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0lTTyh7XG4gICAgZm9ybWF0ID0gXCJleHRlbmRlZFwiLFxuICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLFxuICAgIHN1cHByZXNzTWlsbGlzZWNvbmRzID0gZmFsc2UsXG4gICAgaW5jbHVkZU9mZnNldCA9IHRydWUsXG4gICAgZXh0ZW5kZWRab25lID0gZmFsc2UsXG4gIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBleHQgPSBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIjtcblxuICAgIGxldCBjID0gdG9JU09EYXRlKHRoaXMsIGV4dCk7XG4gICAgYyArPSBcIlRcIjtcbiAgICBjICs9IHRvSVNPVGltZSh0aGlzLCBleHQsIHN1cHByZXNzU2Vjb25kcywgc3VwcHJlc3NNaWxsaXNlY29uZHMsIGluY2x1ZGVPZmZzZXQsIGV4dGVuZGVkWm9uZSk7XG4gICAgcmV0dXJuIGM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyBkYXRlIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmZvcm1hdD0nZXh0ZW5kZWQnXSAtIGNob29zZSBiZXR3ZWVuIHRoZSBiYXNpYyBhbmQgZXh0ZW5kZWQgZm9ybWF0XG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygxOTgyLCA1LCAyNSkudG9JU09EYXRlKCkgLy89PiAnMTk4Mi0wNS0yNSdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT0RhdGUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMTk4MjA1MjUnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSVNPRGF0ZSh7IGZvcm1hdCA9IFwiZXh0ZW5kZWRcIiB9ID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvSVNPRGF0ZSh0aGlzLCBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBJU08gODYwMS1jb21wbGlhbnQgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUncyB3ZWVrIGRhdGVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDE5ODIsIDUsIDI1KS50b0lTT1dlZWtEYXRlKCkgLy89PiAnMTk4Mi1XMjEtMidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09XZWVrRGF0ZSgpIHtcbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIFwia2tray0nVydXVy1jXCIpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEtY29tcGxpYW50IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lJ3MgdGltZSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc3VwcHJlc3NNaWxsaXNlY29uZHM9ZmFsc2VdIC0gZXhjbHVkZSBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnN1cHByZXNzU2Vjb25kcz1mYWxzZV0gLSBleGNsdWRlIHNlY29uZHMgZnJvbSB0aGUgZm9ybWF0IGlmIHRoZXkncmUgMFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXh0ZW5kZWRab25lPXRydWVdIC0gYWRkIHRoZSB0aW1lIHpvbmUgZm9ybWF0IGV4dGVuc2lvblxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVQcmVmaXg9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgYFRgIHByZWZpeFxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuZm9ybWF0PSdleHRlbmRlZCddIC0gY2hvb3NlIGJldHdlZW4gdGhlIGJhc2ljIGFuZCBleHRlbmRlZCBmb3JtYXRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoKSAvLz0+ICcwNzozNDoxOS4zNjFaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoKS5zZXQoeyBob3VyOiA3LCBtaW51dGU6IDM0LCBzZWNvbmRzOiAwLCBtaWxsaXNlY29uZHM6IDAgfSkudG9JU09UaW1lKHsgc3VwcHJlc3NTZWNvbmRzOiB0cnVlIH0pIC8vPT4gJzA3OjM0WidcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkuc2V0KHsgaG91cjogNywgbWludXRlOiAzNCB9KS50b0lTT1RpbWUoeyBmb3JtYXQ6ICdiYXNpYycgfSkgLy89PiAnMDczNDE5LjM2MVonXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygpLnNldCh7IGhvdXI6IDcsIG1pbnV0ZTogMzQgfSkudG9JU09UaW1lKHsgaW5jbHVkZVByZWZpeDogdHJ1ZSB9KSAvLz0+ICdUMDc6MzQ6MTkuMzYxWidcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9JU09UaW1lKHtcbiAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyA9IGZhbHNlLFxuICAgIHN1cHByZXNzU2Vjb25kcyA9IGZhbHNlLFxuICAgIGluY2x1ZGVPZmZzZXQgPSB0cnVlLFxuICAgIGluY2x1ZGVQcmVmaXggPSBmYWxzZSxcbiAgICBleHRlbmRlZFpvbmUgPSBmYWxzZSxcbiAgICBmb3JtYXQgPSBcImV4dGVuZGVkXCIsXG4gIH0gPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgYyA9IGluY2x1ZGVQcmVmaXggPyBcIlRcIiA6IFwiXCI7XG4gICAgcmV0dXJuIChcbiAgICAgIGMgK1xuICAgICAgdG9JU09UaW1lKFxuICAgICAgICB0aGlzLFxuICAgICAgICBmb3JtYXQgPT09IFwiZXh0ZW5kZWRcIixcbiAgICAgICAgc3VwcHJlc3NTZWNvbmRzLFxuICAgICAgICBzdXBwcmVzc01pbGxpc2Vjb25kcyxcbiAgICAgICAgaW5jbHVkZU9mZnNldCxcbiAgICAgICAgZXh0ZW5kZWRab25lXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIFJGQyAyODIyLWNvbXBhdGlibGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWVcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKDIwMTQsIDcsIDEzKS50b1JGQzI4MjIoKSAvLz0+ICdTdW4sIDEzIEp1bCAyMDE0IDAwOjAwOjAwICswMDAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9SRkMyODIyKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCAtMDQwMCdcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9SRkMyODIyKCkge1xuICAgIHJldHVybiB0b1RlY2hGb3JtYXQodGhpcywgXCJFRUUsIGRkIExMTCB5eXl5IEhIOm1tOnNzIFpaWlwiLCBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gSFRUUCBoZWFkZXJzLiBUaGUgb3V0cHV0IGlzIGFsd2F5cyBleHByZXNzZWQgaW4gR01ULlxuICAgKiBTcGVjaWZpY2FsbHksIHRoZSBzdHJpbmcgY29uZm9ybXMgdG8gUkZDIDExMjMuXG4gICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1Byb3RvY29scy9yZmMyNjE2L3JmYzI2MTYtc2VjMy5odG1sI3NlYzMuMy4xXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9IVFRQKCkgLy89PiAnU3VuLCAxMyBKdWwgMjAxNCAwMDowMDowMCBHTVQnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMywgMTkpLnRvSFRUUCgpIC8vPT4gJ1N1biwgMTMgSnVsIDIwMTQgMTk6MDA6MDAgR01UJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b0hUVFAoKSB7XG4gICAgcmV0dXJuIHRvVGVjaEZvcm1hdCh0aGlzLnRvVVRDKCksIFwiRUVFLCBkZCBMTEwgeXl5eSBISDptbTpzcyAnR01UJ1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHVzZSBpbiBTUUwgRGF0ZVxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS51dGMoMjAxNCwgNywgMTMpLnRvU1FMRGF0ZSgpIC8vPT4gJzIwMTQtMDctMTMnXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvU1FMRGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0b0lTT0RhdGUodGhpcywgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIFRpbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZVpvbmU9ZmFsc2VdIC0gaW5jbHVkZSB0aGUgem9uZSwgc3VjaCBhcyAnQW1lcmljYS9OZXdfWW9yaycuIE92ZXJyaWRlcyBpbmNsdWRlT2Zmc2V0LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXQ9dHJ1ZV0gLSBpbmNsdWRlIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJ1onIG9yICctMDQ6MDAnXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuaW5jbHVkZU9mZnNldFNwYWNlPXRydWVdIC0gaW5jbHVkZSB0aGUgc3BhY2UgYmV0d2VlbiB0aGUgdGltZSBhbmQgdGhlIG9mZnNldCwgc3VjaCBhcyAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUudXRjKCkudG9TUUwoKSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKCkgLy89PiAnMDU6MTU6MTYuMzQ1IC0wNDowMCdcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkudG9TUUwoeyBpbmNsdWRlT2Zmc2V0OiBmYWxzZSB9KSAvLz0+ICcwNToxNToxNi4zNDUnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnRvU1FMKHsgaW5jbHVkZVpvbmU6IGZhbHNlIH0pIC8vPT4gJzA1OjE1OjE2LjM0NSBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1NRTFRpbWUoeyBpbmNsdWRlT2Zmc2V0ID0gdHJ1ZSwgaW5jbHVkZVpvbmUgPSBmYWxzZSwgaW5jbHVkZU9mZnNldFNwYWNlID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBsZXQgZm10ID0gXCJISDptbTpzcy5TU1NcIjtcblxuICAgIGlmIChpbmNsdWRlWm9uZSB8fCBpbmNsdWRlT2Zmc2V0KSB7XG4gICAgICBpZiAoaW5jbHVkZU9mZnNldFNwYWNlKSB7XG4gICAgICAgIGZtdCArPSBcIiBcIjtcbiAgICAgIH1cbiAgICAgIGlmIChpbmNsdWRlWm9uZSkge1xuICAgICAgICBmbXQgKz0gXCJ6XCI7XG4gICAgICB9IGVsc2UgaWYgKGluY2x1ZGVPZmZzZXQpIHtcbiAgICAgICAgZm10ICs9IFwiWlpcIjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9UZWNoRm9ybWF0KHRoaXMsIGZtdCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGlzIERhdGVUaW1lIGFwcHJvcHJpYXRlIGZvciB1c2UgaW4gU1FMIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVab25lPWZhbHNlXSAtIGluY2x1ZGUgdGhlIHpvbmUsIHN1Y2ggYXMgJ0FtZXJpY2EvTmV3X1lvcmsnLiBPdmVycmlkZXMgaW5jbHVkZU9mZnNldC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5pbmNsdWRlT2Zmc2V0PXRydWVdIC0gaW5jbHVkZSB0aGUgb2Zmc2V0LCBzdWNoIGFzICdaJyBvciAnLTA0OjAwJ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVPZmZzZXRTcGFjZT10cnVlXSAtIGluY2x1ZGUgdGhlIHNwYWNlIGJldHdlZW4gdGhlIHRpbWUgYW5kIHRoZSBvZmZzZXQsIHN1Y2ggYXMgJzA1OjE1OjE2LjM0NSAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLnV0YygyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBaJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoKSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCAtMDQ6MDAnXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLmxvY2FsKDIwMTQsIDcsIDEzKS50b1NRTCh7IGluY2x1ZGVPZmZzZXQ6IGZhbHNlIH0pIC8vPT4gJzIwMTQtMDctMTMgMDA6MDA6MDAuMDAwJ1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5sb2NhbCgyMDE0LCA3LCAxMykudG9TUUwoeyBpbmNsdWRlWm9uZTogdHJ1ZSB9KSAvLz0+ICcyMDE0LTA3LTEzIDAwOjAwOjAwLjAwMCBBbWVyaWNhL05ld19Zb3JrJ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1NRTChvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMudG9TUUxEYXRlKCl9ICR7dGhpcy50b1NRTFRpbWUob3B0cyl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIGRlYnVnZ2luZ1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50b0lTTygpIDogSU5WQUxJRDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgRGF0ZVRpbWUgYXBwcm9wcmlhdGUgZm9yIHRoZSBSRVBMLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBbU3ltYm9sLmZvcihcIm5vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tXCIpXSgpIHtcbiAgICBpZiAodGhpcy5pc1ZhbGlkKSB7XG4gICAgICByZXR1cm4gYERhdGVUaW1lIHsgdHM6ICR7dGhpcy50b0lTTygpfSwgem9uZTogJHt0aGlzLnpvbmUubmFtZX0sIGxvY2FsZTogJHt0aGlzLmxvY2FsZX0gfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgRGF0ZVRpbWUgeyBJbnZhbGlkLCByZWFzb246ICR7dGhpcy5pbnZhbGlkUmVhc29ufSB9YDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggbWlsbGlzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuIEFsaWFzIG9mIHtAbGluayBEYXRlVGltZSN0b01pbGxpc31cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgdmFsdWVPZigpIHtcbiAgICByZXR1cm4gdGhpcy50b01pbGxpcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVwb2NoIG1pbGxpc2Vjb25kcyBvZiB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICB0b01pbGxpcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyA6IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlcG9jaCBzZWNvbmRzIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkID8gdGhpcy50cyAvIDEwMDAgOiBOYU47XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZXBvY2ggc2Vjb25kcyAoYXMgYSB3aG9sZSBudW1iZXIpIG9mIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIHRvVW5peEludGVnZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IE1hdGguZmxvb3IodGhpcy50cyAvIDEwMDApIDogTmFOO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gSVNPIDg2MDEgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBEYXRlVGltZSBhcHByb3ByaWF0ZSBmb3IgdXNlIGluIEpTT04uXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy50b0lTTygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBCU09OIHNlcmlhbGl6YWJsZSBlcXVpdmFsZW50IHRvIHRoaXMgRGF0ZVRpbWUuXG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICB0b0JTT04oKSB7XG4gICAgcmV0dXJuIHRoaXMudG9KU0RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgSmF2YVNjcmlwdCBvYmplY3Qgd2l0aCB0aGlzIERhdGVUaW1lJ3MgeWVhciwgbW9udGgsIGRheSwgYW5kIHNvIG9uLlxuICAgKiBAcGFyYW0gb3B0cyAtIG9wdGlvbnMgZm9yIGdlbmVyYXRpbmcgdGhlIG9iamVjdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmluY2x1ZGVDb25maWc9ZmFsc2VdIC0gaW5jbHVkZSBjb25maWd1cmF0aW9uIGF0dHJpYnV0ZXMgaW4gdGhlIG91dHB1dFxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS50b09iamVjdCgpIC8vPT4geyB5ZWFyOiAyMDE3LCBtb250aDogNCwgZGF5OiAyMiwgaG91cjogMjAsIG1pbnV0ZTogNDksIHNlY29uZDogNDIsIG1pbGxpc2Vjb25kOiAyNjggfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICB0b09iamVjdChvcHRzID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIHt9O1xuXG4gICAgY29uc3QgYmFzZSA9IHsgLi4udGhpcy5jIH07XG5cbiAgICBpZiAob3B0cy5pbmNsdWRlQ29uZmlnKSB7XG4gICAgICBiYXNlLm91dHB1dENhbGVuZGFyID0gdGhpcy5vdXRwdXRDYWxlbmRhcjtcbiAgICAgIGJhc2UubnVtYmVyaW5nU3lzdGVtID0gdGhpcy5sb2MubnVtYmVyaW5nU3lzdGVtO1xuICAgICAgYmFzZS5sb2NhbGUgPSB0aGlzLmxvYy5sb2NhbGU7XG4gICAgfVxuICAgIHJldHVybiBiYXNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBKYXZhU2NyaXB0IERhdGUgZXF1aXZhbGVudCB0byB0aGlzIERhdGVUaW1lLlxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgdG9KU0RhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuaXNWYWxpZCA/IHRoaXMudHMgOiBOYU4pO1xuICB9XG5cbiAgLy8gQ09NUEFSRVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0d28gRGF0ZVRpbWVzIGFzIGEgRHVyYXRpb24uXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyRGF0ZVRpbWUgLSB0aGUgRGF0ZVRpbWUgdG8gY29tcGFyZSB0aGlzIG9uZSB0b1xuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciBhcnJheSBvZiB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgY3JlYXRpb24gb2YgdGhlIER1cmF0aW9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5jb252ZXJzaW9uQWNjdXJhY3k9J2Nhc3VhbCddIC0gdGhlIGNvbnZlcnNpb24gc3lzdGVtIHRvIHVzZVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgaTEgPSBEYXRlVGltZS5mcm9tSVNPKCcxOTgyLTA1LTI1VDA5OjQ1JyksXG4gICAqICAgICBpMiA9IERhdGVUaW1lLmZyb21JU08oJzE5ODMtMTAtMTRUMTA6MzAnKTtcbiAgICogaTIuZGlmZihpMSkudG9PYmplY3QoKSAvLz0+IHsgbWlsbGlzZWNvbmRzOiA0MzgwNzUwMDAwMCB9XG4gICAqIGkyLmRpZmYoaTEsICdob3VycycpLnRvT2JqZWN0KCkgLy89PiB7IGhvdXJzOiAxMjE2OC43NSB9XG4gICAqIGkyLmRpZmYoaTEsIFsnbW9udGhzJywgJ2RheXMnXSkudG9PYmplY3QoKSAvLz0+IHsgbW9udGhzOiAxNiwgZGF5czogMTkuMDMxMjUgfVxuICAgKiBpMi5kaWZmKGkxLCBbJ21vbnRocycsICdkYXlzJywgJ2hvdXJzJ10pLnRvT2JqZWN0KCkgLy89PiB7IG1vbnRoczogMTYsIGRheXM6IDE5LCBob3VyczogMC43NSB9XG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgZGlmZihvdGhlckRhdGVUaW1lLCB1bml0ID0gXCJtaWxsaXNlY29uZHNcIiwgb3B0cyA9IHt9KSB7XG4gICAgaWYgKCF0aGlzLmlzVmFsaWQgfHwgIW90aGVyRGF0ZVRpbWUuaXNWYWxpZCkge1xuICAgICAgcmV0dXJuIER1cmF0aW9uLmludmFsaWQoXCJjcmVhdGVkIGJ5IGRpZmZpbmcgYW4gaW52YWxpZCBEYXRlVGltZVwiKTtcbiAgICB9XG5cbiAgICBjb25zdCBkdXJPcHRzID0geyBsb2NhbGU6IHRoaXMubG9jYWxlLCBudW1iZXJpbmdTeXN0ZW06IHRoaXMubnVtYmVyaW5nU3lzdGVtLCAuLi5vcHRzIH07XG5cbiAgICBjb25zdCB1bml0cyA9IG1heWJlQXJyYXkodW5pdCkubWFwKER1cmF0aW9uLm5vcm1hbGl6ZVVuaXQpLFxuICAgICAgb3RoZXJJc0xhdGVyID0gb3RoZXJEYXRlVGltZS52YWx1ZU9mKCkgPiB0aGlzLnZhbHVlT2YoKSxcbiAgICAgIGVhcmxpZXIgPSBvdGhlcklzTGF0ZXIgPyB0aGlzIDogb3RoZXJEYXRlVGltZSxcbiAgICAgIGxhdGVyID0gb3RoZXJJc0xhdGVyID8gb3RoZXJEYXRlVGltZSA6IHRoaXMsXG4gICAgICBkaWZmZWQgPSBkaWZmKGVhcmxpZXIsIGxhdGVyLCB1bml0cywgZHVyT3B0cyk7XG5cbiAgICByZXR1cm4gb3RoZXJJc0xhdGVyID8gZGlmZmVkLm5lZ2F0ZSgpIDogZGlmZmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoaXMgRGF0ZVRpbWUgYW5kIHJpZ2h0IG5vdy5cbiAgICogU2VlIHtAbGluayBEYXRlVGltZSNkaWZmfVxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gW3VuaXQ9WydtaWxsaXNlY29uZHMnXV0gLSB0aGUgdW5pdCBvciB1bml0cyB1bml0cyAoc3VjaCBhcyAnaG91cnMnIG9yICdkYXlzJykgdG8gaW5jbHVkZSBpbiB0aGUgZHVyYXRpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgLSBvcHRpb25zIHRoYXQgYWZmZWN0IHRoZSBjcmVhdGlvbiBvZiB0aGUgRHVyYXRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLmNvbnZlcnNpb25BY2N1cmFjeT0nY2FzdWFsJ10gLSB0aGUgY29udmVyc2lvbiBzeXN0ZW0gdG8gdXNlXG4gICAqIEByZXR1cm4ge0R1cmF0aW9ufVxuICAgKi9cbiAgZGlmZk5vdyh1bml0ID0gXCJtaWxsaXNlY29uZHNcIiwgb3B0cyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuZGlmZihEYXRlVGltZS5ub3coKSwgdW5pdCwgb3B0cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIEludGVydmFsIHNwYW5uaW5nIGJldHdlZW4gdGhpcyBEYXRlVGltZSBhbmQgYW5vdGhlciBEYXRlVGltZVxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIGVuZCBwb2ludCBvZiB0aGUgSW50ZXJ2YWxcbiAgICogQHJldHVybiB7SW50ZXJ2YWx9XG4gICAqL1xuICB1bnRpbChvdGhlckRhdGVUaW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZCA/IEludGVydmFsLmZyb21EYXRlVGltZXModGhpcywgb3RoZXJEYXRlVGltZSkgOiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB3aGV0aGVyIHRoaXMgRGF0ZVRpbWUgaXMgaW4gdGhlIHNhbWUgdW5pdCBvZiB0aW1lIGFzIGFub3RoZXIgRGF0ZVRpbWUuXG4gICAqIEhpZ2hlci1vcmRlciB1bml0cyBtdXN0IGFsc28gYmUgaWRlbnRpY2FsIGZvciB0aGlzIGZ1bmN0aW9uIHRvIHJldHVybiBgdHJ1ZWAuXG4gICAqIE5vdGUgdGhhdCB0aW1lIHpvbmVzIGFyZSAqKmlnbm9yZWQqKiBpbiB0aGlzIGNvbXBhcmlzb24sIHdoaWNoIGNvbXBhcmVzIHRoZSAqKmxvY2FsKiogY2FsZW5kYXIgdGltZS4gVXNlIHtAbGluayBEYXRlVGltZSNzZXRab25lfSB0byBjb252ZXJ0IG9uZSBvZiB0aGUgZGF0ZXMgaWYgbmVlZGVkLlxuICAgKiBAcGFyYW0ge0RhdGVUaW1lfSBvdGhlckRhdGVUaW1lIC0gdGhlIG90aGVyIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bml0IC0gdGhlIHVuaXQgb2YgdGltZSB0byBjaGVjayBzYW1lbmVzcyBvblxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyAtIG9wdGlvbnNcbiAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy51c2VMb2NhbGVXZWVrcz1mYWxzZV0gLSBJZiB0cnVlLCB1c2Ugd2Vla3MgYmFzZWQgb24gdGhlIGxvY2FsZSwgaS5lLiB1c2UgdGhlIGxvY2FsZS1kZXBlbmRlbnQgc3RhcnQgb2YgdGhlIHdlZWs7IG9ubHkgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lIGlzIHVzZWRcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkuaGFzU2FtZShvdGhlckRULCAnZGF5Jyk7IC8vfj4gdHJ1ZSBpZiBvdGhlckRUIGlzIGluIHRoZSBzYW1lIGN1cnJlbnQgY2FsZW5kYXIgZGF5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNTYW1lKG90aGVyRGF0ZVRpbWUsIHVuaXQsIG9wdHMpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgaW5wdXRNcyA9IG90aGVyRGF0ZVRpbWUudmFsdWVPZigpO1xuICAgIGNvbnN0IGFkanVzdGVkVG9ab25lID0gdGhpcy5zZXRab25lKG90aGVyRGF0ZVRpbWUuem9uZSwgeyBrZWVwTG9jYWxUaW1lOiB0cnVlIH0pO1xuICAgIHJldHVybiAoXG4gICAgICBhZGp1c3RlZFRvWm9uZS5zdGFydE9mKHVuaXQsIG9wdHMpIDw9IGlucHV0TXMgJiYgaW5wdXRNcyA8PSBhZGp1c3RlZFRvWm9uZS5lbmRPZih1bml0LCBvcHRzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogRXF1YWxpdHkgY2hlY2tcbiAgICogVHdvIERhdGVUaW1lcyBhcmUgZXF1YWwgaWYgYW5kIG9ubHkgaWYgdGhleSByZXByZXNlbnQgdGhlIHNhbWUgbWlsbGlzZWNvbmQsIGhhdmUgdGhlIHNhbWUgem9uZSBhbmQgbG9jYXRpb24sIGFuZCBhcmUgYm90aCB2YWxpZC5cbiAgICogVG8gY29tcGFyZSBqdXN0IHRoZSBtaWxsaXNlY29uZCB2YWx1ZXMsIHVzZSBgK2R0MSA9PT0gK2R0MmAuXG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IG90aGVyIC0gdGhlIG90aGVyIERhdGVUaW1lXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHMob3RoZXIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5pc1ZhbGlkICYmXG4gICAgICBvdGhlci5pc1ZhbGlkICYmXG4gICAgICB0aGlzLnZhbHVlT2YoKSA9PT0gb3RoZXIudmFsdWVPZigpICYmXG4gICAgICB0aGlzLnpvbmUuZXF1YWxzKG90aGVyLnpvbmUpICYmXG4gICAgICB0aGlzLmxvYy5lcXVhbHMob3RoZXIubG9jKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHRoaXMgdGltZSByZWxhdGl2ZSB0byBub3csIHN1Y2ggYXMgXCJpbiB0d28gZGF5c1wiLiBDYW4gb25seSBpbnRlcm5hdGlvbmFsaXplIGlmIHlvdXJcbiAgICogcGxhdGZvcm0gc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuIFJvdW5kcyBkb3duIGJ5IGRlZmF1bHQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5zdHlsZT1cImxvbmdcIl0gLSB0aGUgc3R5bGUgb2YgdW5pdHMsIG11c3QgYmUgXCJsb25nXCIsIFwic2hvcnRcIiwgb3IgXCJuYXJyb3dcIlxuICAgKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdCBvciBhcnJheSBvZiB1bml0czsgaWYgb21pdHRlZCwgb3IgYW4gYXJyYXksIHRoZSBtZXRob2Qgd2lsbCBwaWNrIHRoZSBiZXN0IHVuaXQuIFVzZSBhbiBhcnJheSBvciBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgXCJkYXlzXCIsIFwiaG91cnNcIiwgXCJtaW51dGVzXCIsIG9yIFwic2Vjb25kc1wiXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMucm91bmQ9dHJ1ZV0gLSB3aGV0aGVyIHRvIHJvdW5kIHRoZSBudW1iZXJzIGluIHRoZSBvdXRwdXQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5wYWRkaW5nPTBdIC0gcGFkZGluZyBpbiBtaWxsaXNlY29uZHMuIFRoaXMgYWxsb3dzIHlvdSB0byByb3VuZCB1cCB0aGUgcmVzdWx0IGlmIGl0IGZpdHMgaW5zaWRlIHRoZSB0aHJlc2hvbGQuIERvbid0IHVzZSBpbiBjb21iaW5hdGlvbiB3aXRoIHtyb3VuZDogZmFsc2V9IGJlY2F1c2UgdGhlIGRlY2ltYWwgb3V0cHV0IHdpbGwgaW5jbHVkZSB0aGUgcGFkZGluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubG9jYWxlIC0gb3ZlcnJpZGUgdGhlIGxvY2FsZSBvZiB0aGlzIERhdGVUaW1lXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLm51bWJlcmluZ1N5c3RlbSAtIG92ZXJyaWRlIHRoZSBudW1iZXJpbmdTeXN0ZW0gb2YgdGhpcyBEYXRlVGltZS4gVGhlIEludGwgc3lzdGVtIG1heSBjaG9vc2Ugbm90IHRvIGhvbm9yIHRoaXNcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkucGx1cyh7IGRheXM6IDEgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCJpbiAxIGRheVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnNldExvY2FsZShcImVzXCIpLnRvUmVsYXRpdmUoeyBkYXlzOiAxIH0pIC8vPT4gXCJkZW50cm8gZGUgMSBkXHUwMEVEYVwiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLnBsdXMoeyBkYXlzOiAxIH0pLnRvUmVsYXRpdmUoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGFucyAyMyBoZXVyZXNcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5taW51cyh7IGRheXM6IDIgfSkudG9SZWxhdGl2ZSgpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmUoeyB1bml0OiBcImhvdXJzXCIgfSkgLy89PiBcIjQ4IGhvdXJzIGFnb1wiXG4gICAqIEBleGFtcGxlIERhdGVUaW1lLm5vdygpLm1pbnVzKHsgaG91cnM6IDM2IH0pLnRvUmVsYXRpdmUoeyByb3VuZDogZmFsc2UgfSkgLy89PiBcIjEuNSBkYXlzIGFnb1wiXG4gICAqL1xuICB0b1JlbGF0aXZlKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICghdGhpcy5pc1ZhbGlkKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBiYXNlID0gb3B0aW9ucy5iYXNlIHx8IERhdGVUaW1lLmZyb21PYmplY3Qoe30sIHsgem9uZTogdGhpcy56b25lIH0pLFxuICAgICAgcGFkZGluZyA9IG9wdGlvbnMucGFkZGluZyA/ICh0aGlzIDwgYmFzZSA/IC1vcHRpb25zLnBhZGRpbmcgOiBvcHRpb25zLnBhZGRpbmcpIDogMDtcbiAgICBsZXQgdW5pdHMgPSBbXCJ5ZWFyc1wiLCBcIm1vbnRoc1wiLCBcImRheXNcIiwgXCJob3Vyc1wiLCBcIm1pbnV0ZXNcIiwgXCJzZWNvbmRzXCJdO1xuICAgIGxldCB1bml0ID0gb3B0aW9ucy51bml0O1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMudW5pdCkpIHtcbiAgICAgIHVuaXRzID0gb3B0aW9ucy51bml0O1xuICAgICAgdW5pdCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIGRpZmZSZWxhdGl2ZShiYXNlLCB0aGlzLnBsdXMocGFkZGluZyksIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBudW1lcmljOiBcImFsd2F5c1wiLFxuICAgICAgdW5pdHMsXG4gICAgICB1bml0LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBkYXRlIHJlbGF0aXZlIHRvIHRvZGF5LCBzdWNoIGFzIFwieWVzdGVyZGF5XCIgb3IgXCJuZXh0IG1vbnRoXCIuXG4gICAqIE9ubHkgaW50ZXJuYXRpb25hbGl6ZXMgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydHMgSW50bC5SZWxhdGl2ZVRpbWVGb3JtYXQuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUgb3V0cHV0XG4gICAqIEBwYXJhbSB7RGF0ZVRpbWV9IFtvcHRpb25zLmJhc2U9RGF0ZVRpbWUubm93KCldIC0gdGhlIERhdGVUaW1lIHRvIHVzZSBhcyB0aGUgYmFzaXMgdG8gd2hpY2ggdGhpcyB0aW1lIGlzIGNvbXBhcmVkLiBEZWZhdWx0cyB0byBub3cuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmxvY2FsZSAtIG92ZXJyaWRlIHRoZSBsb2NhbGUgb2YgdGhpcyBEYXRlVGltZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy51bml0IC0gdXNlIGEgc3BlY2lmaWMgdW5pdDsgaWYgb21pdHRlZCwgdGhlIG1ldGhvZCB3aWxsIHBpY2sgdGhlIHVuaXQuIFVzZSBvbmUgb2YgXCJ5ZWFyc1wiLCBcInF1YXJ0ZXJzXCIsIFwibW9udGhzXCIsIFwid2Vla3NcIiwgb3IgXCJkYXlzXCJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMubnVtYmVyaW5nU3lzdGVtIC0gb3ZlcnJpZGUgdGhlIG51bWJlcmluZ1N5c3RlbSBvZiB0aGlzIERhdGVUaW1lLiBUaGUgSW50bCBzeXN0ZW0gbWF5IGNob29zZSBub3QgdG8gaG9ub3IgdGhpc1xuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoKSAvLz0+IFwidG9tb3Jyb3dcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5zZXRMb2NhbGUoXCJlc1wiKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlKCkgLy89PiBcIlwibWFcdTAwRjFhbmFcIlxuICAgKiBAZXhhbXBsZSBEYXRlVGltZS5ub3coKS5wbHVzKHsgZGF5czogMSB9KS50b1JlbGF0aXZlQ2FsZW5kYXIoeyBsb2NhbGU6IFwiZnJcIiB9KSAvLz0+IFwiZGVtYWluXCJcbiAgICogQGV4YW1wbGUgRGF0ZVRpbWUubm93KCkubWludXMoeyBkYXlzOiAyIH0pLnRvUmVsYXRpdmVDYWxlbmRhcigpIC8vPT4gXCIyIGRheXMgYWdvXCJcbiAgICovXG4gIHRvUmVsYXRpdmVDYWxlbmRhcihvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIG51bGw7XG5cbiAgICByZXR1cm4gZGlmZlJlbGF0aXZlKG9wdGlvbnMuYmFzZSB8fCBEYXRlVGltZS5mcm9tT2JqZWN0KHt9LCB7IHpvbmU6IHRoaXMuem9uZSB9KSwgdGhpcywge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG51bWVyaWM6IFwiYXV0b1wiLFxuICAgICAgdW5pdHM6IFtcInllYXJzXCIsIFwibW9udGhzXCIsIFwiZGF5c1wiXSxcbiAgICAgIGNhbGVuZGFyeTogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbiBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWluaW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1pbiBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICBzdGF0aWMgbWluKC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtaW4gcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBiZXN0QnkoZGF0ZVRpbWVzLCAoaSkgPT4gaS52YWx1ZU9mKCksIE1hdGgubWluKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1heCBvZiBzZXZlcmFsIGRhdGUgdGltZXNcbiAgICogQHBhcmFtIHsuLi5EYXRlVGltZX0gZGF0ZVRpbWVzIC0gdGhlIERhdGVUaW1lcyBmcm9tIHdoaWNoIHRvIGNob29zZSB0aGUgbWF4aW11bVxuICAgKiBAcmV0dXJuIHtEYXRlVGltZX0gdGhlIG1heCBEYXRlVGltZSwgb3IgdW5kZWZpbmVkIGlmIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50XG4gICAqL1xuICBzdGF0aWMgbWF4KC4uLmRhdGVUaW1lcykge1xuICAgIGlmICghZGF0ZVRpbWVzLmV2ZXJ5KERhdGVUaW1lLmlzRGF0ZVRpbWUpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXCJtYXggcmVxdWlyZXMgYWxsIGFyZ3VtZW50cyBiZSBEYXRlVGltZXNcIik7XG4gICAgfVxuICAgIHJldHVybiBiZXN0QnkoZGF0ZVRpbWVzLCAoaSkgPT4gaS52YWx1ZU9mKCksIE1hdGgubWF4KTtcbiAgfVxuXG4gIC8vIE1JU0NcblxuICAvKipcbiAgICogRXhwbGFpbiBob3cgYSBzdHJpbmcgd291bGQgYmUgcGFyc2VkIGJ5IGZyb21Gb3JtYXQoKVxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIHRoZSBzdHJpbmcgdG8gcGFyc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZtdCAtIHRoZSBmb3JtYXQgdGhlIHN0cmluZyBpcyBleHBlY3RlZCB0byBiZSBpbiAoc2VlIGRlc2NyaXB0aW9uKVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIG9wdGlvbnMgdGFrZW4gYnkgZnJvbUZvcm1hdCgpXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBmcm9tRm9ybWF0RXhwbGFpbih0ZXh0LCBmbXQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHsgbG9jYWxlID0gbnVsbCwgbnVtYmVyaW5nU3lzdGVtID0gbnVsbCB9ID0gb3B0aW9ucyxcbiAgICAgIGxvY2FsZVRvVXNlID0gTG9jYWxlLmZyb21PcHRzKHtcbiAgICAgICAgbG9jYWxlLFxuICAgICAgICBudW1iZXJpbmdTeXN0ZW0sXG4gICAgICAgIGRlZmF1bHRUb0VOOiB0cnVlLFxuICAgICAgfSk7XG4gICAgcmV0dXJuIGV4cGxhaW5Gcm9tVG9rZW5zKGxvY2FsZVRvVXNlLCB0ZXh0LCBmbXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBmcm9tRm9ybWF0RXhwbGFpbiBpbnN0ZWFkXG4gICAqL1xuICBzdGF0aWMgZnJvbVN0cmluZ0V4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zID0ge30pIHtcbiAgICByZXR1cm4gRGF0ZVRpbWUuZnJvbUZvcm1hdEV4cGxhaW4odGV4dCwgZm10LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIEZPUk1BVCBQUkVTRVRTXG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgMTAvMTQvMTk4M1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX1NIT1JUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfU0hPUlQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0IDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX01FRCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX01FRDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdGcmksIE9jdCAxNCwgMTk4MydcbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURV9NRURfV0lUSF9XRUVLREFZKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVfTUVEX1dJVEhfV0VFS0RBWTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICdPY3RvYmVyIDE0LCAxOTgzJ1xuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFX0ZVTEwoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURV9GVUxMO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ1R1ZXNkYXksIE9jdG9iZXIgMTQsIDE5ODMnXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVfSFVHRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFX0hVR0U7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9TSU1QTEUoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9TSU1QTEU7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMDk6MzA6MjMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IFRJTUVfV0lUSF9TSE9SVF9PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV9XSVRIX1NIT1JUX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV9XSVRIX0xPTkdfT0ZGU0VUKCkge1xuICAgIHJldHVybiBGb3JtYXRzLlRJTUVfV0lUSF9MT05HX09GRlNFVDtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMCcsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1NJTVBMRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1NJTVBMRTtcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMycsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfU0VDT05EUygpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1dJVEhfU0VDT05EUztcbiAgfVxuXG4gIC8qKlxuICAgKiB7QGxpbmsgRGF0ZVRpbWUjdG9Mb2NhbGVTdHJpbmd9IGZvcm1hdCBsaWtlICcwOTozMDoyMyBFRFQnLCBhbHdheXMgMjQtaG91ci5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgVElNRV8yNF9XSVRIX1NIT1JUX09GRlNFVCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5USU1FXzI0X1dJVEhfU0hPUlRfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzA5OjMwOjIzIEVhc3Rlcm4gRGF5bGlnaHQgVGltZScsIGFsd2F5cyAyNC1ob3VyLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBUSU1FXzI0X1dJVEhfTE9OR19PRkZTRVQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuVElNRV8yNF9XSVRIX0xPTkdfT0ZGU0VUO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJzEwLzE0LzE5ODMsIDk6MzAgQU0nLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfU0hPUlQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfU0hPUlQ7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnMTAvMTQvMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9TSE9SVF9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfU0hPUlRfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRUQoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfTUVEO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdCAxNCwgMTk4MywgOTozMDozMyBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1NFQ09ORFM7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnRnJpLCAxNCBPY3QgMTk4MywgOTozMCBBTScuIE9ubHkgMTItaG91ciBpZiB0aGUgbG9jYWxlIGlzLlxuICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRFVElNRV9NRURfV0lUSF9XRUVLREFZKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX01FRF9XSVRIX1dFRUtEQVk7XG4gIH1cblxuICAvKipcbiAgICoge0BsaW5rIERhdGVUaW1lI3RvTG9jYWxlU3RyaW5nfSBmb3JtYXQgbGlrZSAnT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFRFQnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfRlVMTCgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9GVUxMO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ09jdG9iZXIgMTQsIDE5ODMsIDk6MzA6MzMgQU0gRURUJy4gT25seSAxMi1ob3VyIGlmIHRoZSBsb2NhbGUgaXMuXG4gICAqIEB0eXBlIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IERBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTKCkge1xuICAgIHJldHVybiBGb3JtYXRzLkRBVEVUSU1FX0ZVTExfV0lUSF9TRUNPTkRTO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMCBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfSFVHRSgpIHtcbiAgICByZXR1cm4gRm9ybWF0cy5EQVRFVElNRV9IVUdFO1xuICB9XG5cbiAgLyoqXG4gICAqIHtAbGluayBEYXRlVGltZSN0b0xvY2FsZVN0cmluZ30gZm9ybWF0IGxpa2UgJ0ZyaWRheSwgT2N0b2JlciAxNCwgMTk4MywgOTozMDozMyBBTSBFYXN0ZXJuIERheWxpZ2h0IFRpbWUnLiBPbmx5IDEyLWhvdXIgaWYgdGhlIGxvY2FsZSBpcy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFMoKSB7XG4gICAgcmV0dXJuIEZvcm1hdHMuREFURVRJTUVfSFVHRV9XSVRIX1NFQ09ORFM7XG4gIH1cbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJpZW5kbHlEYXRlVGltZShkYXRlVGltZWlzaCkge1xuICBpZiAoRGF0ZVRpbWUuaXNEYXRlVGltZShkYXRlVGltZWlzaCkpIHtcbiAgICByZXR1cm4gZGF0ZVRpbWVpc2g7XG4gIH0gZWxzZSBpZiAoZGF0ZVRpbWVpc2ggJiYgZGF0ZVRpbWVpc2gudmFsdWVPZiAmJiBpc051bWJlcihkYXRlVGltZWlzaC52YWx1ZU9mKCkpKSB7XG4gICAgcmV0dXJuIERhdGVUaW1lLmZyb21KU0RhdGUoZGF0ZVRpbWVpc2gpO1xuICB9IGVsc2UgaWYgKGRhdGVUaW1laXNoICYmIHR5cGVvZiBkYXRlVGltZWlzaCA9PT0gXCJvYmplY3RcIikge1xuICAgIHJldHVybiBEYXRlVGltZS5mcm9tT2JqZWN0KGRhdGVUaW1laXNoKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICBgVW5rbm93biBkYXRldGltZSBhcmd1bWVudDogJHtkYXRlVGltZWlzaH0sIG9mIHR5cGUgJHt0eXBlb2YgZGF0ZVRpbWVpc2h9YFxuICAgICk7XG4gIH1cbn1cbiIsICJpbXBvcnQgRGF0ZVRpbWUgZnJvbSBcIi4vZGF0ZXRpbWUuanNcIjtcbmltcG9ydCBEdXJhdGlvbiBmcm9tIFwiLi9kdXJhdGlvbi5qc1wiO1xuaW1wb3J0IEludGVydmFsIGZyb20gXCIuL2ludGVydmFsLmpzXCI7XG5pbXBvcnQgSW5mbyBmcm9tIFwiLi9pbmZvLmpzXCI7XG5pbXBvcnQgWm9uZSBmcm9tIFwiLi96b25lLmpzXCI7XG5pbXBvcnQgRml4ZWRPZmZzZXRab25lIGZyb20gXCIuL3pvbmVzL2ZpeGVkT2Zmc2V0Wm9uZS5qc1wiO1xuaW1wb3J0IElBTkFab25lIGZyb20gXCIuL3pvbmVzL0lBTkFab25lLmpzXCI7XG5pbXBvcnQgSW52YWxpZFpvbmUgZnJvbSBcIi4vem9uZXMvaW52YWxpZFpvbmUuanNcIjtcbmltcG9ydCBTeXN0ZW1ab25lIGZyb20gXCIuL3pvbmVzL3N5c3RlbVpvbmUuanNcIjtcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi9zZXR0aW5ncy5qc1wiO1xuXG5jb25zdCBWRVJTSU9OID0gXCIzLjQuNFwiO1xuXG5leHBvcnQge1xuICBWRVJTSU9OLFxuICBEYXRlVGltZSxcbiAgRHVyYXRpb24sXG4gIEludGVydmFsLFxuICBJbmZvLFxuICBab25lLFxuICBGaXhlZE9mZnNldFpvbmUsXG4gIElBTkFab25lLFxuICBJbnZhbGlkWm9uZSxcbiAgU3lzdGVtWm9uZSxcbiAgU2V0dGluZ3MsXG59O1xuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9tZW51T3Ryby50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA1IDE0OjQzOjA5XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MjozMVxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cblxuaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTW9kYWwsIEZ1enp5U3VnZ2VzdE1vZGFsLCBGdXp6eU1hdGNoLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U2VsZWNjaW9uTW9kYWx9IGZyb20gXCIuLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsXCI7XG5pbXBvcnQge2Z1enp5U2VsZWN0T3JDcmVhdGV9IGZyb20gXCIuLi8uLi9tb2RhbGVzL2Z1enp5U2VsZWN0T3JDcmVhdGVcIjtcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJ1xuXG5pbnRlcmZhY2UgR3J1cG9BY3RpdmlkYWQge1xuICAgIGdydXBvOiBzdHJpbmc7XG4gICAgYWN0aXZpZGFkOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBtZW51T3RybyB7XG4gICAgXG4gICAgcGF0aENhbXBvczogc3RyaW5nID0gXCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFJlZ2lzdHJvIFRpZW1wby5tZFwiO1xuICAgIHNlbGVjdGVkQWN0aXZpdHk6IHN0cmluZyA9XCJcIjtcbiAgICBzZWxlY3RlZEdyb3VwOiBzdHJpbmcgPSBcIlwiO1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmZ1enp5U2VsZWN0T3JDID0gbmV3IGZ1enp5U2VsZWN0T3JDcmVhdGUodGhpcy5hcHAsIHBsdWdpbik7XG4gICAgICB9XG4gICAgXG4gICAgICBhc3luYyBtZW51T3RybyAoYXBwOiBBcHAsIHJlZ2lzdHJvOiBhbnkpe1xuICAgICAgICBjb25zdCBvcGNpb25lc090cm8gPSBbXCJQcm9waWFzXCIsIFwiQXJlYXMgZGUgVmlkYVwiLCBcIkFyZWFzIGRlIEludGVyXHUwMEU5c1wiLCBcIlByb3llY3RvcyBkZSBRXCIsIFwiUHJveWVjdG9zIEdURFwiLCBcIlRlbWEgZGUgSW50ZXJcdTAwRTlzXCIsIFwiUmVjdXJzbyBSZWN1cnJlbnRlXCJdIDtcbiAgICAgICAgY29uc3QgdmFsb3Jlc090cm8gPSBbXCJoYWJcIiwgXCJhY3RzQVZcIiwgXCJhY3RzQUlcIiwgXCJhY3RzUFFcIiwgXCJhY3RzUEdURFwiLCBcImFjdHNUSVwiLCBcImFjdHNSUlwiXTtcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXJPdHJvID0gXCJcdTAwQkZRdWUgY2F0ZWdvcmlhP1wiO1xuICAgICAgICBjb25zdCBtb2RhbE90cm8gPSBuZXcgU2VsZWNjaW9uTW9kYWwoYXBwLCBvcGNpb25lc090cm8sIHZhbG9yZXNPdHJvLCBwbGFjZWhvbGRlck90cm8pO1xuICAgICAgICBsZXQgdGVtYU90cm86e2dydXBvOnN0cmluZzthY3RpdmlkYWQ6c3RyaW5nLG5vbWJyZTpzdHJpbmd9O1xuICAgICAgICBsZXQgc2lBc3VudG86IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbk90cm8gPSBhd2FpdCBtb2RhbE90cm8ub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgICBzd2l0Y2goc2VsZWN0aW9uT3Rybykge1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FzZSBcImhhYlwiOlxuICAgICAgICAgICAgICAgICAgICB0ZW1hT3RybyA9IGF3YWl0IHRoaXMuaGFiaXR1YWwoYXBwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNBVlwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQUlcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiYWN0c1BRXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNQR1REXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcImFjdHNUSVwiOlxuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzUlJcIjpcbiAgICAgICAgICAgICAgICAgICAgdGVtYU90cm8gPSBhd2FpdCB0aGlzLmVsZW1TRyhhcHAsc2VsZWN0aW9uT3Rybyk7IFxuICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJidXNcIjpcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICByZXR1cm4ge3RpdHVsbzogdGVtYU90cm8uYWN0aXZpZGFkICsgXCIgLyBcIiArIHRlbWFPdHJvLmdydXBvLCBzaUFzdW50byAsbm9tYnJlOiB0ZW1hT3Ryby5ncnVwbywgYXJlYVZpZGE6IHRlbWFPdHJvLmdydXBvfVxuICAgICAgICB9XG5cbiAgICAgICAgYXN5bmMgaGFiaXR1YWwgKGFwcDogQXBwKXtcbiAgICAgICAgICAgIGNvbnN0IGdydXBvcyA9IGF3YWl0IHRoaXMuZ2V0RnJvbnRtYXR0ZXJGaWVsZChhcHAsdGhpcy5wYXRoQ2FtcG9zLCBcInRlbWFzXCIpO1xuICAgICAgICAgICAgY29uc3QgYWN0c0dydXBvcyA9IGF3YWl0IHRoaXMucmVzdWx0WWFtbChhcHAsXCJhY3RzVGVtYXNcIilcbiAgICAgICAgICAgIC8vIEZpbHRyYXIgeSBwcmVwYXJhciBsYXMgYWN0aXZpZGFkZXMgZXhpc3RlbnRlcyBwYXJhIGxhIGJcdTAwRkFzcXVlZGFcbiAgICAgICAgICAgIGxldCBpdGVtc0ZvclNlYXJjaCA9IGFjdHNHcnVwb3NcbiAgICAgICAgICAgIC5maWx0ZXIoKGl0ZW0pID0+IGdydXBvcy5pbmNsdWRlcyhpdGVtLmdydXBvKSkgLy8gVXNhIGxhIHByb3BpZWRhZCAnZ3J1cG8nIGVuIGx1Z2FyIGRlIGl0ZW1bMF1cbiAgICAgICAgICAgIC5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGAke2l0ZW0uYWN0aXZpZGFkfSAvICR7aXRlbS5ncnVwb31gLCAvLyBDYW1iaWEgZWwgb3JkZW4gc2kgZXMgbmVjZXNhcmlvXG4gICAgICAgICAgICAgICAgYWN0aXZpdHk6IGl0ZW0uYWN0aXZpZGFkLCAvLyBVc2EgbGEgcHJvcGllZGFkICdhY3RpdmlkYWQnIGVuIGx1Z2FyIGRlIGl0ZW1bMV1cbiAgICAgICAgICAgICAgICBncm91cDogaXRlbS5ncnVwbyxcbiAgICAgICAgICAgICAgICAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgbGV0IGVsZWNjaW9uID0gYXdhaXQgdGhpcy5mdXp6eVNlbGVjdE9yQy5zaG93RnV6enlTZWFyY2hNb2RhbChpdGVtc0ZvclNlYXJjaCwgZ3J1cG9zKTtcbiAgICAgICAgICAgIGxldCBvYmpFbGVjY2lvbiA9IHtncnVwbzogZWxlY2Npb25bMV0sIGFjdGl2aWRhZDogZWxlY2Npb25bMF0sIG5vbWJyZTogXCJcIn07XG4gICAgICAgICAgICByZXR1cm4gb2JqRWxlY2Npb247ICAgXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBuaW5ndW5vIChhcHA6IEFwcCl7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jICBlbGVtU0cgKGFwcDogQXBwLCB0aXBvIDogc3RyaW5nKTogUHJvbWlzZTxhbnk+e1xuICAgICAgICAgICAgY29uc3QgYWN0aXZpZGFkZXMgPSBhd2FpdCB0aGlzLnJlc3VsdFlhbWwoYXBwLCB0aXBvKVxuICAgICAgICAgICAgY29uc3QgYWN0aXZlU0cgPSBhd2FpdCB0aGlzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoYXBwLHRpcG8pXG4gICAgICAgICAgICAvLyBFeHRyYWUgZWwgcHJpbWVyIGFsaWFzIGRlIGNhZGEgbm90YSBlbmNvbnRyYWRhIHkgbG9zIGFsbWFjZW5hIGVuIHVuIGFycmF5XG4gICAgICAgICAgICBsZXQgZ3JvdXBzO1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBzd2l0Y2ggKHRpcG8pe1xuICAgICAgICAgICAgY2FzZSBcImFjdHNBVlwiOlxuICAgICAgICAgICAgICAgIGdyb3VwcyA9IGFjdGl2ZVNHLm1hcChwYWdlID0+IHBhZ2UuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBncm91cHMgPSBhY3RpdmVTRy5tYXAocGFnZSA9PiBwYWdlLmZyb250bWF0dGVyLmFsaWFzZXMgPyBwYWdlLmZyb250bWF0dGVyLmFsaWFzZXNbMF0gOiBudWxsKS5maWx0ZXIoYWxpYXMgPT4gYWxpYXMgIT09IG51bGwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaWx0cmFyIHkgcHJlcGFyYXIgbGFzIGFjdGl2aWRhZGVzIGV4aXN0ZW50ZXMgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhXG4gICAgICAgICAgICBsZXQgaXRlbXNGb3JTZWFyY2ggPSBhY3RpdmlkYWRlc1xuICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4gZ3JvdXBzLmluY2x1ZGVzKGl0ZW0uZ3J1cG8pKSAvLyBVc2EgbGEgcHJvcGllZGFkICdncnVwbycgZW4gbHVnYXIgZGUgaXRlbVswXVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogYCR7aXRlbS5hY3RpdmlkYWR9IC8gJHtpdGVtLmdydXBvfWAsIC8vIENhbWJpYSBlbCBvcmRlbiBzaSBlcyBuZWNlc2FyaW9cbiAgICAgICAgICAgICAgICBhY3Rpdml0eTogaXRlbS5hY3RpdmlkYWQsIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2FjdGl2aWRhZCcgZW4gbHVnYXIgZGUgaXRlbVsxXVxuICAgICAgICAgICAgICAgIGdyb3VwOiBpdGVtLmdydXBvLFxuICAgICAgICAgICAgICAgIC8vIFVzYSBsYSBwcm9waWVkYWQgJ2dydXBvJyBlbiBsdWdhciBkZSBpdGVtWzBdXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAvLyBNb3N0cmFtb3MgZWwgbW9kYWwgY29uIGxhcyBvcGNpb25lcyBkZSBiXHUwMEZBc3F1ZWRhXG5cbiAgICAgICAgICAgIGxldCBlbGVjY2lvbiA9IGF3YWl0IHRoaXMuZnV6enlTZWxlY3RPckMuc2hvd0Z1enp5U2VhcmNoTW9kYWwoaXRlbXNGb3JTZWFyY2gsIGdyb3VwcywgdGlwbyk7XG4gICAgICAgICAgICBjb25zdCBmb3VuZEVsZW1lbnQgPSBhY3RpdmVTRy5maW5kKGIgPT4gYi5mcm9udG1hdHRlci5hbGlhc2VzWzBdID09PSBlbGVjY2lvblsxXSk7XG4gICAgICAgICAgICAvLyBTaSBzZSBlbmN1ZW50cmEgZWwgZWxlbWVudG8sIGRldm9sdmVyIGZyb250bWF0dGVyLmFsaWFzZXNbMV1cbiAgICAgICAgICAgIGxldCBhbGlhcyA9IGZvdW5kRWxlbWVudD8uZmlsZS5wYXRoO1xuICAgICAgICAgICAgbGV0IG9iakVsZWNjaW9uID0ge2dydXBvOiBlbGVjY2lvblsxXSwgYWN0aXZpZGFkOiBlbGVjY2lvblswXSwgbm9tYnJlOiBhbGlhc307XG4gICAgICAgICAgICByZXR1cm4gb2JqRWxlY2Npb247ICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGFzeW5jIGJ1c2NhciAoYXBwOiBBcHApe1xuXG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyAgcmVzdWx0WWFtbChhcHA6IEFwcCwgdGVtYTogc3RyaW5nKTogUHJvbWlzZTxHcnVwb0FjdGl2aWRhZFtdPiB7XG4gICAgICAgICAgICAvLyBFbmN1ZW50cmEgZWwgYXJjaGl2byBwb3Igc3UgcnV0YVxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBBY2NlZGUgYWwgZnJvbnQgbWF0dGVyIChZQU1MKSBkZWwgYXJjaGl2byB5IG9idGllbmUgZWwgYXJyZWdsbyBiYXNhZG8gZW4gZWwgdGVtYVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnJlZ2xvUmVzdWx0ID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5bdGVtYV0gfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uc3RydXllIGVsIGFycmVnbG8gZGUgb2JqZXRvcyByZXN1bHRhZG8gYmFzYWRvIGVuIGxhIGVzdHJ1Y3R1cmEgZGUgR3J1cG9BY3RpdmlkYWRcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvOiBHcnVwb0FjdGl2aWRhZFtdID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVsbGVuYSBlbCBhcnJlZ2xvIGNvbiBsb3MgZGF0b3MgZGVsIGFycmVnbG9SZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb1Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmVnbG9SZXN1bHQuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGFkby5wdXNoKHsgZ3J1cG86IGl0ZW1bMF0sIGFjdGl2aWRhZDogaXRlbVsxXSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdGFkbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvYnRlbmllbmRvIGVsIGFyY2hpdm8gZGUgY2FtcG9zOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRGV2dWVsdmUgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIG5vIHNlIGVuY3VlbnRyYSBlbCBhcmNoaXZvIG8gc2kgb2N1cnJlIGN1YWxxdWllciBvdHJvIHByb2JsZW1hXG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBhc3luYyBnZXRGcm9udG1hdHRlckZpZWxkKGFwcDogQXBwLCBmaWxlOiBzdHJpbmcsIGZpZWxkOiBzdHJpbmcpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0RmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcm9udG1hdHRlciAmJiBmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShmaWVsZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkVmFsdWUgPSBmcm9udG1hdHRlcltmaWVsZF07XG4gICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHVuZGVmaW5lZCB8fCBmaWVsZFZhbHVlID09PSBudWxsIHx8IGZpZWxkVmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVsIGNhbXBvIGVzdFx1MDBFMSB2YWNcdTAwRURvIG8gbm8gZXhpc3RlLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgY29uc3VsdGFkbyBjb24gXHUwMEU5eGl0b1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmllbGRWYWx1ZTsgLy8gRGV2dWVsdmUgZWwgdmFsb3IgZGVsIGNhbXBvXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVsIGNhbXBvIG5vIGV4aXN0ZSBlbiBlbCBmcm9udG1hdHRlci5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRWwgYXJjaGl2byBubyBleGlzdGUgbyBubyBlcyB1biBhcmNoaXZvIGRlIHRleHRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIE8gbWFuZWphciBzZWdcdTAwRkFuIGxvIG5lY2VzaXRlc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjb25zdWx0YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gTyBtYW5lamFyIHNlZ1x1MDBGQW4gbG8gbmVjZXNpdGVzXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgICAgLy8gRXN0YSBmdW5jaVx1MDBGM24gZW5jdWVudHJhIGxvcyBhcmNoaXZvcyBkZSBzdWJzaXN0ZW1hcyB5IGN1eW8gZXN0YWRvIGVzIFx1RDgzRFx1REZFMlxuICAgICAgICBhc3luYyBmaW5kTWFpbkZpbGVzV2l0aFN0YXRlKGFwcCwgdGlwbykge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzVGlwbyA9IHtcbiAgICAgICAgICAgICAgICBhY3RzQVY6IHtcbiAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgICAgICAgICAgICAgIHNhbWVOYW1lOiBmYWxzZSwgXG4gICAgICAgICAgICAgICAgICBuYW1lRmlsZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MubmFtZUZpbGVfQXJlYXNWaWRhXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzQUk6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNJbnRlcmVzLFxuICAgICAgICAgICAgICAgICAgICBzYW1lTmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IHRoaXMucGx1Z2luLnNldHRpbmdzLm5hbWVGaWxlX0FyZWFzSW50ZXJlc1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzUFE6IHtcbiAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EsXG4gICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0c1BHVEQ6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zR1RELFxuICAgICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVGaWxlOiBcIlwiXG4gICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFjdHNUSToge1xuICAgICAgICAgICAgICAgICAgICAgIGZvbGRlcjogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1RlbWFzSW50ZXJlcyxcbiAgICAgICAgICAgICAgICAgICAgICBzYW1lTmFtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgbmFtZUZpbGU6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhY3RzUlI6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlcyxcbiAgICAgICAgICAgICAgICAgICAgc2FtZU5hbWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lRmlsZTogXCJcIlxuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAvLyBQdWVkZXMgY29udGludWFyIGFcdTAwRjFhZGllbmRvIG1cdTAwRTFzIGNhc29zIGFxdVx1MDBFRFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIHRpcG8gZXMgdW5hIHByb3BpZWRhZCB2XHUwMEUxbGlkYSBhbnRlcyBkZSBkZXNlc3RydWN0dXJhclxuICAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIgPSBbXTtcbiAgICAgICAgICAgICBzd2l0Y2ggKHRpcG8pe1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhY3RzQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBmb2xkZXIsIHNhbWVOYW1lLCBuYW1lRmlsZSB9ID0gcHJvcGVydGllc1RpcG9bdGlwb107XG4gICAgICAgICAgICAgICAgICAgIGxldCBhaG9yYSA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KFwieXl5eS1RcVwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikgJiYgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiYgZmlsZS5uYW1lLnN0YXJ0c1dpdGgoYWhvcmEpKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIucHVzaCh7IGZpbGU6IGZpbGUsIGZyb250bWF0dGVyOiBtZXRhZGF0YSB9KTsgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllc1RpcG8uaGFzT3duUHJvcGVydHkodGlwbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZm9sZGVyLCBzYW1lTmFtZSwgbmFtZUZpbGUgfSA9IHByb3BlcnRpZXNUaXBvW3RpcG9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZXNJbkZvbGRlciA9IGFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNJbkZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoc2FtZU5hbWUgJiYgZmlsZS5iYXNlbmFtZSA9PT0gbmFtZUZpbGUpIHx8ICFzYW1lTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhLmZyb250bWF0dGVyICYmIG1ldGFkYXRhLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIucHVzaCh7IGZpbGU6IGZpbGUsIGZyb250bWF0dGVyOiBtZXRhZGF0YS5mcm9udG1hdHRlciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNlbGVjY2lcdTAwRjNuIG5vIHJlY29ub2NpZGE6XCIsIHRpcG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdOyAvLyBNYW5lamFyIHNlZ1x1MDBGQW4gdHUgbFx1MDBGM2dpY2EgZGUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlcjtcbiAgICAgICAgIH1cblxufVxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91dGlsc0FQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA1IDE3OjAyOjM0XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0Mzo1OFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7IEFwcCwgVEZpbGUsIFRGb2xkZXIsIE1vZGFsLCBGdXp6eVN1Z2dlc3RNb2RhbCwgRnV6enlNYXRjaCwgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQge1NlbGVjY2lvbk1vZGFsVGFyZWFzfSBmcm9tIFwiLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbFRhcmVhc1wiXG5pbXBvcnQge21lbnVPdHJvfSBmcm9tICcuL21lbnVPdHJvJ1xuaW1wb3J0IHsgcmVnaXN0cm9UaWVtcG9BUEkgfSBmcm9tIFwiLi9yZWdpc3Ryb1RpZW1wb0FQSVwiO1xuXG5leHBvcnQgY2xhc3MgdXRpbHNBUEkge1xuICBwcml2YXRlIG1lbnVPdHJvOiBtZW51T3RybztcbiAgcGx1Z2luOiBQbHVnaW47XG5cbiAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLm1lbnVPdHJvID0gbmV3IG1lbnVPdHJvKHBsdWdpbik7XG4gIH1cbiAgLy8gTGEgZGVjbGFyYWNpXHUwMEYzbiBkZWwgbVx1MDBFOXRvZG8gZXN0YWJhIGFzaTogYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHA6IEFwcCwgcmVnaXN0cm86IGFueSlcbiAgLy8gRGV2dWVsdmUgZWwgZmlsZSBkZWwgcmVnaXN0cm8gYWN0aXZvLiBVdGlsaXphZG8gcGFyYSBjdWFuZG8gbmVjZXNpdG8gb2J0ZW5lciBlbCBkYXRvIHNvbGFtZW50ZSBkZSBzaSBoYXkgYWxnXHUwMEZBbiByZWdpc3RybyBhY3Rpdm8uXG4gIGFzeW5jIGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHApOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG5cbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIGZyb250bWF0dGVyIGNvbnRpZW5lIGVsIGNhbXBvIFwiZXN0YWRvXCIgY29uIGVsIHZhbG9yIFwiXHVEODNEXHVERkUyXCJcbiAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU3Vwb25lbW9zIHF1ZSBlc3RhIGZ1bmNpXHUwMEYzbiBzZSB1YmljYXJcdTAwRTEgZW4gYWxnXHUwMEZBbiBsdWdhciBkb25kZSBwdWVkYSBhY2NlZGVyIGEgYGFwcGAgZGUgT2JzaWRpYW4uXG4gIGFzeW5jIGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luOiBQbHVnaW4pIHtcbiAgICBjb25zdCBhY3Rpdm8gPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhY3Rpdm8pIHtcbiAgICAgIC8vIFJldG9ybmFyIHVuIG9iamV0byByZWdpc3RybyBwcmVkZXRlcm1pbmFkbyBzaW4gYXJjaGl2byBhY3Rpdm9cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGFjdGl2bzogbnVsbCxcbiAgICAgICAgbm9tYnJlOiBcIlJlZ2lzdHJvIHNpbiBhcmNoaXZvIGFjdGl2b1wiLFxuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG8sXG4gICAgICAgIGluZGljZTogcGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWdpc3Ryb1RpZW1wbyxcbiAgICAgICAgaWQ6IG51bGwsXG4gICAgICAgIGZlY2hhOiB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpLFxuICAgICAgICBpbmRpY2VfRFZKUzogYFwiJHtwbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvfVwiYCxcbiAgICAgICAgYWxpYXNlczogW10gLy8gbyBpbmNsdXNvIHBvZHJcdTAwRURhcyBhc2lnbmFyIGFsZ1x1MDBGQW4gYWxpYXMgcG9yIGRlZmVjdG8gc2kgbG8gZGVzZWFzXG4gICAgICB9O1xuICAgIH1cbiAgXG4gICAgY29uc3QgZm9sZGVyID0gcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICBjb25zdCBpbmRpY2UgPSBwbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvO1xuICBcbiAgICBsZXQgbWF4SWQgPSAwO1xuICAgIGNvbnN0IGZpbGVzID0gcGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgY29uc3QgcmVnaXN0cm9zRXhpc3RlbnRlcyA9IGZpbGVzLmZpbHRlcigoZmlsZTogeyBwYXRoOiBzdHJpbmcgfSkgPT5cbiAgICAgIGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcilcbiAgICApO1xuICBcbiAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBwbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgIH1cbiAgICB9KTtcbiAgXG4gICAgY29uc3QgbmV4dElkID0gbWF4SWQgKyAxO1xuICAgIGNvbnN0IGZlY2hhQ29tcGxldGEgPSB0aGlzLmZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuICBcbiAgICAvLyBPYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gYWN0aXZvIHBhcmEgZXh0cmFlciBhbGlhc2VzXG4gICAgY29uc3QgbWV0YWRhdGFBY3Rpdm8gPSBwbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgY29uc3QgYWxpYXNlcyA9XG4gICAgICBtZXRhZGF0YUFjdGl2byAmJiBtZXRhZGF0YUFjdGl2by5mcm9udG1hdHRlciAmJiBtZXRhZGF0YUFjdGl2by5mcm9udG1hdHRlci5hbGlhc2VzXG4gICAgICAgID8gbWV0YWRhdGFBY3Rpdm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1xuICAgICAgICA6IFtdO1xuICBcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZvLFxuICAgICAgbm9tYnJlOiBhY3Rpdm8uYmFzZW5hbWUsXG4gICAgICBmb2xkZXIsXG4gICAgICBpbmRpY2UsXG4gICAgICBpZDogbmV4dElkLFxuICAgICAgZmVjaGE6IGZlY2hhQ29tcGxldGEsXG4gICAgICBpbmRpY2VfRFZKUzogYFwiJHtpbmRpY2V9XCJgLFxuICAgICAgYWxpYXNlcywgLy8gU2UgYWdyZWdhIGVsIGNhbXBvIGFsaWFzZXMgYWwgcmVnaXN0cm9cbiAgICB9O1xuICB9XG5cbiAgZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDtcbiAgICBjb25zdCBmZWNoYUxvY2FsID0gbmV3IERhdGUoZmVjaGEuZ2V0VGltZSgpIC0gb2Zmc2V0KTtcbiAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICAgIGNvbnN0IGRpYXMgPSBbXG4gICAgICBcIkRvbWluZ29cIixcbiAgICAgIFwiTHVuZXNcIixcbiAgICAgIFwiTWFydGVzXCIsXG4gICAgICBcIk1pXHUwMEU5cmNvbGVzXCIsXG4gICAgICBcIkp1ZXZlc1wiLFxuICAgICAgXCJWaWVybmVzXCIsXG4gICAgICBcIlNcdTAwRTFiYWRvXCIsXG4gICAgXTtcbiAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICBjb25zdCBob3JhRm9ybWF0byA9IGZlY2hhLnRvVGltZVN0cmluZygpLnNwbGl0KFwiIFwiKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgcmV0dXJuIGAke2ZlY2hhRm9ybWF0b30gJHtkaWFTZW1hbmF9ICR7aG9yYUZvcm1hdG99YDtcbiAgfVxuXG4gIC8vIE1cdTAwRTl0b2RvIHF1ZSB2ZXJpZmljYSBzaSBoYXkgcmVnaXN0cm9zIEFDdGl2b3MgeSBwcmVndW50YSBzaSBxdWllcmUgY2VycmFybG9zLlxuICBhc3luYyB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvOiBhbnksIGFwcDogQXBwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IHRhcmVhc0FjdGl2YXMgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChyZWdpc3Ryby5mb2xkZXIpKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICB0YXJlYXNBY3RpdmFzLnB1c2goe1xuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIHRpdHVsbzogbWV0YWRhdGEudGl0dWxvLFxuICAgICAgICAgICAgYWxpYXNlczogbWV0YWRhdGEuYWxpYXNlcyB8fCBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCB0YXJlYUFjdGl2YSA9IHRhcmVhc0FjdGl2YXNbMF07XG4gICAgICBjb25zdCBkZXNlYURldGVuZXIgPSBhd2FpdCB0aGlzLm1vc3RyYXJTdWdlcmVuY2lhKFxuICAgICAgICBgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBlc3RcdTAwRTEgY29ycmllbmRvLiBcdTAwQkZEZXNlYSBkZXRlbmVybGE/YFxuICAgICAgKTtcbiAgICAgIGlmIChkZXNlYURldGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXcgTm90aWNlKGBDcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5gKTtcbiAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRlc2VhRGV0ZW5lcikge1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgcmVnaXN0cm9UaWVtcG9BUEluc3RhbmNlID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMucGx1Z2luKTtcbiAgICAgICAgYXdhaXQgcmVnaXN0cm9UaWVtcG9BUEluc3RhbmNlLmNlcnJhclJlZ2lzdHJvKHRhcmVhQWN0aXZhLmZpbGUpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgTm90aWNlKGBMYSB0YXJlYSAke3RhcmVhQWN0aXZhLmFsaWFzZXN9IHNlZ3Vpclx1MDBFMSByZWdpc3RyXHUwMEUxbmRvc2UuYCk7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0YXJlYXNBY3RpdmFzLmxlbmd0aCA+IDEpIHtcbiAgICAgIG5ldyBOb3RpY2UoXG4gICAgICAgIFwiSGF5IHVuIGVycm9yIGNvbiBsYSBjYW50aWRhZCBkZSB0YXJlYXMgY29ycmllbmRvIGVuIGVzdGUgbW9tZW50by5cIlxuICAgICAgKTtcbiAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIk5vIGhheSBtXHUwMEUxcyB0YXJlYXMgY29ycmllbmRvLlwiKTtcbiAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBtb3N0cmFyU3VnZXJlbmNpYShtZW5zYWplOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IHNlbGVjY2lvbmFkbyA9IGZhbHNlOyAvLyBJbmRpY2Egc2kgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG5cbiAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG4gICAgICBtb2RhbC5jb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IG1lbnNhamUgfSk7XG5cbiAgICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBib3RvbmVzXG4gICAgICBjb25zdCBidXR0b25zQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIpO1xuXG4gICAgICAvLyBGdW5jaVx1MDBGM24gYXV4aWxpYXIgcGFyYSBtYW5lamFyIHNlbGVjY2lvbmVzIHkgY2VycmFyIGVsIG1vZGFsIGFkZWN1YWRhbWVudGVcbiAgICAgIGNvbnN0IGhhY2VyU2VsZWNjaW9uID0gKHNlbGVjY2lvbjogYm9vbGVhbikgPT4ge1xuICAgICAgICBzZWxlY2Npb25hZG8gPSB0cnVlOyAvLyBNYXJjYXIgcXVlIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuICAgICAgICBtb2RhbC5jbG9zZSgpOyAvLyBDZXJyYXIgZWwgbW9kYWxcbiAgICAgICAgcmVzb2x2ZShzZWxlY2Npb24pOyAvLyBSZXNvbHZlciBsYSBwcm9tZXNhIGNvbiBsYSBzZWxlY2NpXHUwMEYzblxuICAgICAgfTtcblxuICAgICAgLy8gQm90XHUwMEYzbiBTXHUwMEVEXG4gICAgICBjb25zdCB5ZXNCdXR0b24gPSBidXR0b25zQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHtcbiAgICAgICAgdGV4dDogXCJTXHUwMEVEXCIsXG4gICAgICB9KTtcbiAgICAgIHllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFjZXJTZWxlY2Npb24odHJ1ZSkpO1xuXG4gICAgICAvLyBCb3RcdTAwRjNuIE5vXG4gICAgICBjb25zdCBub0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICB0ZXh0OiBcIk5vXCIsXG4gICAgICB9KTtcbiAgICAgIG5vQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBoYWNlclNlbGVjY2lvbihmYWxzZSkpO1xuXG4gICAgICBtb2RhbC5vbkNsb3NlID0gKCkgPT4ge1xuICAgICAgICBpZiAoIXNlbGVjY2lvbmFkbykge1xuICAgICAgICAgIC8vIFNpIGVsIG1vZGFsIHNlIGNpZXJyYSBzaW4gcXVlIHNlIGhheWEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuLCByZWNoYXphciBsYSBwcm9tZXNhXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIk1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuXCIpKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQWdyZWdhciBlc2N1Y2hhcyBkZSBldmVudG9zIGRlIHRlY2xhZG8gcGFyYSBwZXJtaXRpciBsYSBuYXZlZ2FjaVx1MDBGM24gY29uIGVsIHRlY2xhZG9cbiAgICAgIG1vZGFsLmNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZTogeyBrZXk6IGFueSB9KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICBjYXNlIFwiQXJyb3dMZWZ0XCI6XG4gICAgICAgICAgICB5ZXNCdXR0b24uZm9jdXMoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBcnJvd1JpZ2h0XCI6XG4gICAgICAgICAgICBub0J1dHRvbi5mb2N1cygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkVudGVyXCI6XG4gICAgICAgICAgICAvLyBTaW11bGEgY2xpYyBlbiBlbCBib3RcdTAwRjNuIGVuZm9jYWRvXG4gICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50Py5jbGljaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBFbmZvY2FyIGluaWNpYWxtZW50ZSBlbCBib3RcdTAwRjNuICdTXHUwMEVEJyBwYXJhIHBlcm1pdGlyIGxhIG5hdmVnYWNpXHUwMEYzbiBjb24gdGVjbGFkbyBkZXNkZSBlbCBpbmljaW9cbiAgICAgIHllc0J1dHRvbi5mb2N1cygpO1xuXG4gICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkZWZpbmlyVGlwb1JlZ2lzdHJvKHJlZ2lzdHJvOiBhbnksIGFwcDogQXBwKSB7XG4gICAgY29uc3QgdG90VGFyZWFzID0gYXdhaXQgdGhpcy5lbmNvbnRyYXJUYXJlYXNQZW5kaWVudGVzKGFwcCk7XG4gICAgbGV0IG9wY2lvbmVzVGl0dWxvOiBzdHJpbmdbXTtcbiAgICBsZXQgdmFsb3Jlc09wY2lvbjogc3RyaW5nW107XG4gIFxuICAgIGlmIChyZWdpc3Ryby5hY3Rpdm8pIHtcbiAgICAgIC8vIFNpIGhheSBhcmNoaXZvIGFjdGl2bywgc2UgZGV0ZXJtaW5hIGVsIHZhbG9yTW9zdHJhciBiYXNhZG8gZW4gYWxpYXNlcyBvIG5vbWJyZS5cbiAgICAgIGxldCB2YWxvck1vc3RyYXI6IHN0cmluZztcbiAgICAgIGlmIChyZWdpc3Ryby5hbGlhc2VzICYmIHJlZ2lzdHJvLmFsaWFzZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdmFsb3JNb3N0cmFyID0gcmVnaXN0cm8uYWxpYXNlc1sxXTtcbiAgICAgIH0gZWxzZSBpZiAocmVnaXN0cm8uYWxpYXNlcyAmJiByZWdpc3Ryby5hbGlhc2VzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIHZhbG9yTW9zdHJhciA9IHJlZ2lzdHJvLmFsaWFzZXNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxvck1vc3RyYXIgPSByZWdpc3Ryby5ub21icmU7XG4gICAgICB9XG4gICAgICBpZiAodG90VGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbdmFsb3JNb3N0cmFyLCBcIkFsZ3VuYSB0YXJlYSBlbiBFamVjdWNpXHUwMEYzblwiLCBcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbdmFsb3JNb3N0cmFyLCBcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiT3Ryb1wiXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2kgbm8gaGF5IGFyY2hpdm8gYWN0aXZvLCBzZSBvbWl0ZSB2YWxvck1vc3RyYXIuXG4gICAgICBpZiAodG90VGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbXCJBbGd1bmEgdGFyZWEgZW4gRWplY3VjaVx1MDBGM25cIiwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiT3Ryb1wiXTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJcdTAwQkZTb2JyZSBxdVx1MDBFOSBlcyBlbCByZWdpc3RybyBkZSB0aWVtcG8/XCI7XG4gICAgY29uc3QgbW9kYWxNZW51MSA9IG5ldyBTZWxlY2Npb25Nb2RhbFRhcmVhcyhhcHAsIG9wY2lvbmVzVGl0dWxvLCB2YWxvcmVzT3BjaW9uLCBwbGFjZWhvbGRlcik7XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBhd2FpdCBtb2RhbE1lbnUxLm9wZW5BbmRBd2FpdFNlbGVjdGlvbigpO1xuICAgICAgcmVnaXN0cm8udGlwb1JlZ2lzdHJvID0gc2VsZWN0aW9uO1xuICBcbiAgICAgIHN3aXRjaCAocmVnaXN0cm8udGlwb1JlZ2lzdHJvKSB7XG4gICAgICAgIGNhc2UgXCJOb3RhXCI6XG4gICAgICAgICAgaWYgKHJlZ2lzdHJvLmFjdGl2bykge1xuICAgICAgICAgICAgcmVnaXN0cm8udGl0dWxvID0gcmVnaXN0cm8ubm9tYnJlO1xuICAgICAgICAgICAgcmVnaXN0cm8uc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgcmVnaXN0cm8udGFyZWEgPSBmYWxzZTtcbiAgICAgICAgICAgIHJlZ2lzdHJvID0gdGhpcy5jb3BpYXJDYW1wb3MocmVnaXN0cm8pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IG5vdGEgYWN0aXZhIHBhcmEgYXNpZ25hclwiKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLnRpcG9SZWdpc3RybyA9IFwiT3Ryb1wiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlRhcmVhXCI6XG4gICAgICAgICAgYXdhaXQgdGhpcy5lbGVnaXJUYXJlYVBhcmFSZWdpc3RybyhhcHAsIHJlZ2lzdHJvLCB0b3RUYXJlYXMpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxldCByZXNwdWVzdGEgPSBhd2FpdCB0aGlzLm1lbnVPdHJvLm1lbnVPdHJvKGFwcCwgcmVnaXN0cm8pO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocmVnaXN0cm8sIHJlc3B1ZXN0YSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAvLyBBcXVcdTAwRUQgc2UgcG9kclx1MDBFRGEgbWFuZWphciBlbCBjYXNvIGRlIGNpZXJyZSBzaW4gc2VsZWNjaVx1MDBGM24sIHBvciBlamVtcGxvLCBlc3RhYmxlY2llbmRvIHJlZ2lzdHJvLmRldGVuZXIuXG4gICAgfVxuICB9XG5cbiAgY29waWFyQ2FtcG9zKHJlZ2lzdHJvKXtcbiAgICBsZXQgbm9tYnJlID0gcmVnaXN0cm8uYWN0aXZvLmJhc2VuYW1lO1xuICAgIGxldCBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvLmFjdGl2byk7XG4gICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKXsgXG4gICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vbWJyZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHJlZ2lzdHJvLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHJlZ2lzdHJvLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpe1xuICAgICAgICAgICBcbiAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyByZWdpc3Ryby5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSByZWdpc3Ryby5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHJlZ2lzdHJvLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgXG4gICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCByZWdpc3Ryby5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICB9XG5cblxuICAgICAgICAgICB9XG4gICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgZWxzZXtcblxuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSkge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBWZXJpZmljYW1vcyBhcmVhSW50ZXJlcyBcbiAgICAgICAgICByZWdpc3Ryby5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhSW50ZXJlcyA9IHJlZ2lzdHJvLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgIHJlZ2lzdHJvLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICB9XG5cbiAgYXN5bmMgZW5jb250cmFyVGFyZWFzUGVuZGllbnRlcyhhcHA6IEFwcCk6IFByb21pc2U8eyB0YXJlYTogc3RyaW5nOyBhcmNoaXZvOiBURmlsZSB9W10+IHtcbiAgICBsZXQgdGFyZWFzUGVuZGllbnRlczogeyB0YXJlYTogc3RyaW5nOyBhcmNoaXZvOiBURmlsZSB9W10gPSBbXTtcbiAgICBjb25zdCBhcmNoaXZvcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgLy8gRXhjbHVpciBhcmNoaXZvcyBxdWUgZXN0XHUwMEUxbiBlbiBjYXJwZXRhcyBpbmRlc2VhZGFzXG4gICAgY29uc3QgYXJjaGl2b3NSZWxldmFudGVzID0gYXJjaGl2b3MuZmlsdGVyKChhcmNoaXZvOiBURmlsZSkgPT4ge1xuICAgICAgcmV0dXJuICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJFc3RydWN0dXJhL0dURC9TaXN0ZW1hIEdURC9TaXN0ZW1hXCIpICYmICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpO1xuICAgIH0pO1xuICBcbiAgICBmb3IgKGNvbnN0IGFyY2hpdm8gb2YgYXJjaGl2b3NSZWxldmFudGVzKSB7XG4gICAgICBjb25zdCBjb250ZW5pZG8gPSBhd2FpdCBhcHAudmF1bHQucmVhZChhcmNoaXZvKTtcbiAgICAgIGNvbnN0IGNvaW5jaWRlbmNpYXMgPSBjb250ZW5pZG8ubWF0Y2goL14gKi0gXFxbXFwvXFxdIC4qL2dtKSB8fCBbXTtcbiAgXG4gICAgICAvLyBQb3IgY2FkYSB0YXJlYSBlbmNvbnRyYWRhLCBzZSBjcmVhIHVuIG9iamV0byBjb24gbGEgdGFyZWEgbGltcGlhIHkgZWwgYXJjaGl2byBhY3R1YWwuXG4gICAgICBjb25zdCB0YXJlYXNDb25BcmNoaXZvID0gY29pbmNpZGVuY2lhcy5tYXAoKHRhcmVhOiBzdHJpbmcpID0+IHtcbiAgICAgICAgcmV0dXJuIHsgdGFyZWE6IHRhcmVhLnRyaW0oKSwgYXJjaGl2bzogYXJjaGl2byB9O1xuICAgICAgfSk7XG4gICAgICB0YXJlYXNQZW5kaWVudGVzID0gdGFyZWFzUGVuZGllbnRlcy5jb25jYXQodGFyZWFzQ29uQXJjaGl2byk7XG4gICAgfVxuICAgIHJldHVybiB0YXJlYXNQZW5kaWVudGVzO1xuICB9XG5cbmFzeW5jIGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKFxuICBhcHA6IEFwcCxcbiAgcmVnaXN0cm86IGFueSxcbiAgdGFyZWFzUGVuZGllbnRlczogeyB0YXJlYTogc3RyaW5nOyBhcmNoaXZvOiBURmlsZSB9W11cbikge1xuICBjb25zdCBwbGFjZWhvbGRlciA9IFwiRWxpZ2UgbGEgdGFyZWEgcXVlIHZhcyBhIHJlZ2lzdHJhci5cIjtcblxuICAvLyBMaW1waWEgZWwgdGV4dG8gZGUgY2FkYSB0YXJlYVxuICBjb25zdCBwcm9tZXNhc0xpbXBpYXMgPSB0YXJlYXNQZW5kaWVudGVzLm1hcCgodGFyZWFPYmopID0+XG4gICAgdGhpcy5saW1waWFyVGV4dG9UYXJlYSh0YXJlYU9iai50YXJlYSlcbiAgKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHRhcmVhc0xpbXBpYXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9tZXNhc0xpbXBpYXMpO1xuXG4gICAgLy8gQ29uc3RydXllIGVsIGxpc3RhZG8gcGFyYSBlbCBtb2RhbDogY2FkYSBvcGNpXHUwMEYzbiBlcyBlbCBhbGlhcyAobyBub21icmUpIGNvbmNhdGVuYWRvIGNvbiBlbCB0ZXh0byBsaW1waW8gZGUgbGEgdGFyZWFcbiAgICBjb25zdCBkaXNwbGF5T3B0aW9uczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2YWx1ZXM6IG51bWJlcltdID0gW107IC8vIHNlIHVzYXJcdTAwRTEgZWwgXHUwMEVEbmRpY2UgbyBhbGdcdTAwRkFuIHZhbG9yIGlkZW50aWZpY2Fkb3JcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFyZWFzUGVuZGllbnRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgeyB0YXJlYSwgYXJjaGl2byB9ID0gdGFyZWFzUGVuZGllbnRlc1tpXTtcbiAgICAgIGNvbnN0IHRleHRvVGFyZWEgPSB0YXJlYXNMaW1waWFzW2ldO1xuXG4gICAgICBsZXQgYWxpYXNEaXNwbGF5ID0gXCJcIjtcbiAgICAgIC8vIE9idGVuZXIgbGEgbWV0YWRhdGEgZGVsIGFyY2hpdm8gcGFyYSB2ZXIgc2kgdGllbmUgYWxpYXNlcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2byk7XG4gICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5hbGlhc2VzKSB7XG4gICAgICAgIGxldCBhbGlhc2VzID0gbWV0YWRhdGEuZnJvbnRtYXR0ZXIuYWxpYXNlcztcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFsaWFzZXMpKSBhbGlhc2VzID0gW2FsaWFzZXNdO1xuICAgICAgICBpZiAoYWxpYXNlcy5sZW5ndGggPj0gMikge1xuICAgICAgICAgIGFsaWFzRGlzcGxheSA9IGFsaWFzZXNbMV07XG4gICAgICAgIH0gZWxzZSBpZiAoYWxpYXNlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIGFsaWFzRGlzcGxheSA9IGFsaWFzZXNbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFNpIG5vIHNlIGVuY29udHJcdTAwRjMgbmluZ1x1MDBGQW4gYWxpYXMsIHNlIHVzYSBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgIGlmICghYWxpYXNEaXNwbGF5KSB7XG4gICAgICAgIGFsaWFzRGlzcGxheSA9IGFyY2hpdm8uYmFzZW5hbWU7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbmNhdGVuYXIgZWwgYWxpYXNEaXNwbGF5IChvIG5vbWJyZSkgY29uIGVsIHRleHRvIGRlIGxhIHRhcmVhLCBzZXBhcmFkbyBwb3IgXCIgLyBcIlxuICAgICAgY29uc3QgZGlzcGxheVRleHQgPSBgJHthbGlhc0Rpc3BsYXl9IC8gJHt0ZXh0b1RhcmVhfWA7XG4gICAgICBkaXNwbGF5T3B0aW9ucy5wdXNoKGRpc3BsYXlUZXh0KTtcbiAgICAgIHZhbHVlcy5wdXNoKGkpO1xuICAgIH1cblxuICAgIC8vIENyZWFyIGVsIG1vZGFsIHBhc2FuZG8gbGFzIG9wY2lvbmVzIGNvbmNhdGVuYWRhcyB5IHVzYW5kbyBsb3MgXHUwMEVEbmRpY2VzIGNvbW8gdmFsb3JlcyBkZSBzZWxlY2NpXHUwMEYzblxuICAgIGNvbnN0IG1vZGFsTWVudSA9IG5ldyBTZWxlY2Npb25Nb2RhbFRhcmVhcyhhcHAsIGRpc3BsYXlPcHRpb25zLCB2YWx1ZXMsIHBsYWNlaG9sZGVyKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IGF3YWl0IG1vZGFsTWVudS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgIC8vIFNlIG9idGllbmUgbGEgdGFyZWEgY29ycmVzcG9uZGllbnRlIGEgbGEgb3BjaVx1MDBGM24gc2VsZWNjaW9uYWRhXG4gICAgICBjb25zdCBzZWxlY2Npb24gPSB0YXJlYXNQZW5kaWVudGVzW3NlbGVjdGVkSW5kZXhdO1xuICAgICAgcmVnaXN0cm8udGl0dWxvID0gYXdhaXQgdGhpcy5saW1waWFyVGV4dG9UYXJlYShzZWxlY2Npb24udGFyZWEpO1xuICAgICAgcmVnaXN0cm8ubm9tYnJlID0gc2VsZWNjaW9uLmFyY2hpdm8uYmFzZW5hbWU7XG4gICAgICByZWdpc3Ryby5hcmNoaXZvVGFyZWEgPSBzZWxlY2Npb24uYXJjaGl2bztcbiAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgIHJlZ2lzdHJvLnRhcmVhID0gdHJ1ZTtcbiAgICAgIHJlZ2lzdHJvID0gdGhpcy5jb3BpYXJDYW1wb3MocmVnaXN0cm8pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJIdWJvIHVuIGVycm9yIGFsIGxpbXBpYXIgbGFzIHRhcmVhczpcIiwgZXJyb3IpO1xuICB9XG59XG5cbmxpbXBpYXJUZXh0b1RhcmVhKHRpdHVsbzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgLy8gU2UgdG9tYSBzb2xvIGxhIHByaW1lcmEgbFx1MDBFRG5lYVxuICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdChcIlxcblwiKVswXTtcblxuICAgIC8vIFRyYW5zZm9ybWEgbGFzIHNlY2Npb25lcyBxdWUgZW1waWV6YW4gcG9yIFwiI1wiOlxuICAgIC8vIFBvciBlamVtcGxvOiBcIiNjeC9HZXN0aVx1MDBGM25QZXJzb25hbC9QbGFuU2VtYW5hbFwiIHNlIHRyYW5zZm9ybWEgZW4gXCJjeF9HZXN0aW9uUGVyc29uYWxfUGxhblNlbWFuYWxcIlxuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvIyhbXFx3LS9dKykvZywgKG1hdGNoLCBwMSkgPT4ge1xuICAgICAgbGV0IHRyYW5zZm9ybWFkbyA9IHAxLnJlcGxhY2UoL1xcLy9nLCBcIl9cIik7XG4gICAgICAvLyBFbGltaW5hIGFjZW50b3MgdXNhbmRvIG5vcm1hbGl6YWNpXHUwMEYzbiBVbmljb2RlXG4gICAgICB0cmFuc2Zvcm1hZG8gPSB0cmFuc2Zvcm1hZG8ubm9ybWFsaXplKFwiTkZEXCIpLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIpO1xuICAgICAgcmV0dXJuIHRyYW5zZm9ybWFkbztcbiAgICB9KTtcblxuICAgIC8vIEVsaW1pbmEgbG9zIGNhbXBvcyBkZSBlc3RpbG8gRGF0YXZpZXcsIHBvciBlamVtcGxvIFtjYW1wbzo6dmFsb3JdXG4gICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtcXHcrOjpbXlxcXV0rXFxdL2csIFwiXCIpO1xuXG4gICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGNvbiBwb3NpYmxlcyBlc3BhY2lvc1xuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCBcIlwiKTtcblxuICAgIC8vIEVsaW1pbmEgbG9zIGVtb2ppcyBkZSBUYXNrcyBqdW50byBjb24gbGEgZmVjaGEgcXVlIHZpZW5lIGlubWVkaWF0YW1lbnRlIGRlc3B1XHUwMEU5cy5cbiAgICAvLyBTZSBhc3VtZSBxdWUgbGEgZmVjaGEgdGllbmUgZm9ybWF0byBZWVlZLU1NLURELCBvcGNpb25hbG1lbnRlIHNlZ3VpZGEgZGUgaG9yYS5cbiAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoXG4gICAgICAvXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY31cXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0oPzpcXHMqXFxkezJ9OlxcZHsyfSg/OjpcXGR7Mn0pPyk/L2d1LFxuICAgICAgXCJcIlxuICAgICk7XG5cbiAgICAvLyBFbGltaW5hIGN1YWxxdWllciBvdHJvIGVtb2ppIHF1ZSBxdWVkZVxuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY30vZ3UsIFwiXCIpO1xuXG4gICAgLy8gRWxpbWluYSBjdWFscXVpZXIgY29udGVuaWRvIHF1ZSBlc3RcdTAwRTkgZW50cmUgY29yY2hldGVzIGN1YWRyYWRvcyAoaW5jbHV5ZW5kbyBsb3MgY29yY2hldGVzKVxuICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTtcblxuICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvXG4gICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MsIFwiX1wiKTtcblxuICAgIC8vIFJlZW1wbGF6YSBlc3BhY2lvcyBtXHUwMEZBbHRpcGxlcyBwb3IgdW4gXHUwMEZBbmljbyBlc3BhY2lvXG4gICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblxuICAgIHJlc29sdmUodGV4dG9MaW1waW8udHJpbSgpKTtcbiAgfSk7XG59XG5cbmFzeW5jIGNvbnN0cnVpck5vbWJyZXlBbGlhcyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAvLyAxLiBDYWxjdWxhciBlbCBcdTAwRkFsdGltbyBpZFNlYyBleGlzdGVudGUgcGFyYSBlc3RlIHRcdTAwRUR0dWxvXG4gIGNvbnN0IG1heElkU2VjID0gYXdhaXQgdGhpcy5jYWxjdWxhclVsdGltb0lkU2VjKHJlZ2lzdHJvLnRpdHVsbywgcmVnaXN0cm8uZm9sZGVyLCBhcHApO1xuICByZWdpc3Ryby5pZFNlYyA9IG1heElkU2VjICsgMTtcbiAgXG4gIC8vIDIuIERlZmluaXIgZWwgc3VmaWpvOiBwYXJhIGlkU2VjID4gMSBzZSBhXHUwMEYxYWRlIFwiIC0gaWRTZWNcIiwgc2lubyBxdWVkYSB2YWNcdTAwRURvXG4gIGNvbnN0IHN1ZmZpeCA9IHJlZ2lzdHJvLmlkU2VjID4gMSA/IGAgLSAke3JlZ2lzdHJvLmlkU2VjfWAgOiBcIlwiO1xuICBcbiAgLy8gMy4gR3VhcmRhciB1bmEgY29waWEgZGUgbG9zIGFsaWFzZXMgb3JpZ2luYWxlcyBkZSBsYSBub3RhXG4gIGNvbnN0IG9yaWdpbmFsQWxpYXNlcyA9IEFycmF5LmlzQXJyYXkocmVnaXN0cm8uYWxpYXNlcykgPyBbLi4ucmVnaXN0cm8uYWxpYXNlc10gOiBbXTtcbiAgXG4gIC8vIDQuIExpbXBpYXIgY3VhbHF1aWVyIHByZWZpam8gUlQgcGFyYSBldml0YXIgZHVwbGljYWNpb25lc1xuICBmdW5jdGlvbiBjbGVhblByZWZpeCh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUpIHJldHVybiBcIlwiO1xuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eUlQgLVxccyovLCBcIlwiKS50cmltKCk7XG4gIH1cbiAgXG4gIC8vIDUuIENyZWFyIG51ZXZvcyBhbGlhc2VzIHNlZ1x1MDBGQW4gZWwgdGlwbyBkZSByZWdpc3Ryb1xuICBpZiAoIXJlZ2lzdHJvLnRhcmVhKSB7XG4gICAgLy8gQ0FTTyAxOiBSZWdpc3RybyBkaXJlY3RvIHNvYnJlIGxhIG5vdGFcbiAgICBjb25zdCBub3RlTmFtZSA9IGNsZWFuUHJlZml4KHJlZ2lzdHJvLm5vbWJyZSB8fCBcIlwiKTtcbiAgICBcbiAgICAvLyBDcmVhciBhcnJheSBkZSBudWV2b3MgYWxpYXNlc1xuICAgIGNvbnN0IG5ld0FsaWFzZXMgPSBbXG4gICAgICBgUlQgLSAke25vdGVOYW1lfSR7c3VmZml4fWAgLy8gQWxpYXMgMDogTm9tYnJlIGRlIGxhIG5vdGEgKyBzdWZpam9cbiAgICBdO1xuICAgIFxuICAgIC8vIFNpIGhheSBhbGlhc2VzIG9yaWdpbmFsZXMsIHVzYXJsb3MgcGFyYSBlbCBzZWd1bmRvIHkgdGVyY2VyIGFsaWFzXG4gICAgaWYgKG9yaWdpbmFsQWxpYXNlcy5sZW5ndGggPj0gMSkge1xuICAgICAgbmV3QWxpYXNlcy5wdXNoKGBSVCAtICR7Y2xlYW5QcmVmaXgob3JpZ2luYWxBbGlhc2VzWzBdKX0ke3N1ZmZpeH1gKTsgLy8gQWxpYXMgMTogUHJpbWVyIGFsaWFzIGRlIGxhIG5vdGFcbiAgICAgIFxuICAgICAgaWYgKG9yaWdpbmFsQWxpYXNlcy5sZW5ndGggPj0gMikge1xuICAgICAgICBuZXdBbGlhc2VzLnB1c2goYFJUIC0gJHtjbGVhblByZWZpeChvcmlnaW5hbEFsaWFzZXNbMV0pfSR7c3VmZml4fWApOyAvLyBBbGlhcyAyOiBTZWd1bmRvIGFsaWFzIGRlIGxhIG5vdGFcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmVnaXN0cm8uYWxpYXNlcyA9IG5ld0FsaWFzZXM7XG4gIH0gZWxzZSB7XG4gICAgLy8gQ0FTTyAyOiBSZWdpc3RybyBzb2JyZSB1bmEgdGFyZWFcbiAgICAvLyAxLiBPYnRlbmVyIG1ldGFkYXRvcyBkZSBsYSBub3RhIGRvbmRlIGVzdFx1MDBFMSBsYSB0YXJlYVxuICAgIGNvbnN0IG1ldGFkYXRhTm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Ryby5hcmNoaXZvVGFyZWFcbiAgICAgIC8vIEVzdGUgZXMgZWwgYXJjaGl2byBkb25kZSBlc3RcdTAwRTEgbGEgdGFyZWEsIGxvIHRpZW5lcyBlbiBgcmVnaXN0cm8ubm9tYnJlYCBvIGVuIGFsZ3VuYSBwcm9waWVkYWQgcXVlIGd1YXJkZSBsYSByZWZlcmVuY2lhXG4gICAgKTtcbiAgICBjb25zdCB0YXNrVGV4dCA9IGNsZWFuUHJlZml4KHJlZ2lzdHJvLnRpdHVsbyB8fCBcIlwiKTtcbiAgICBjb25zdCBub3RlTmFtZSA9IGNsZWFuUHJlZml4KHJlZ2lzdHJvLm5vbWJyZSB8fCBcIlwiKTtcbiAgICBkZWJ1Z2dlcjtcbiAgICAvLyAyLiBFeHRyYWVyIGFsaWFzZXMgZGVsIGZyb250bWF0dGVyIGRlIGxhIG5vdGFcbiAgICBsZXQgbm90ZUFsaWFzZXM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKG1ldGFkYXRhTm90YT8uZnJvbnRtYXR0ZXI/LmFsaWFzZXMpIHtcbiAgICAgIG5vdGVBbGlhc2VzID0gQXJyYXkuaXNBcnJheShtZXRhZGF0YU5vdGEuZnJvbnRtYXR0ZXIuYWxpYXNlcylcbiAgICAgICAgPyBtZXRhZGF0YU5vdGEuZnJvbnRtYXR0ZXIuYWxpYXNlc1xuICAgICAgICA6IFttZXRhZGF0YU5vdGEuZnJvbnRtYXR0ZXIuYWxpYXNlc107XG4gICAgfVxuXG4gICAgLy8gMy4gQ29uc3RydWlyIG5ld0FsaWFzZXMgdXNhbmRvIGVzb3MgYWxpYXNlcyBjb21vIGJhc2VcbiAgICBjb25zdCBuZXdBbGlhc2VzID0gW1xuICAgICAgYFJUIC0gJHt0YXNrVGV4dH0ke3N1ZmZpeH1gLFxuICAgICAgYFJUIC0gJHtub3RlTmFtZX0gLyAke3Rhc2tUZXh0fSR7c3VmZml4fWAsXG4gICAgXTtcblxuICAgIC8vIFNpIGxhIG5vdGEgb3JpZ2luYWwgdGllbmUgYWwgbWVub3MgdW4gYWxpYXMsIGxvIHVzYXMgcGFyYSBlbCB0ZXJjZXIgYWxpYXNcbiAgICBpZiAobm90ZUFsaWFzZXMubGVuZ3RoID4gMCkge1xuICAgICAgbmV3QWxpYXNlcy5wdXNoKGBSVCAtICR7Y2xlYW5QcmVmaXgobm90ZUFsaWFzZXNbMF0pfSAvICR7dGFza1RleHR9JHtzdWZmaXh9YCk7XG4gICAgfVxuXG4gICAgLy8gNC4gRmluYWxtZW50ZSwgYXNpZ25hcyBgcmVnaXN0cm8uYWxpYXNlcyA9IG5ld0FsaWFzZXM7YFxuICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSBuZXdBbGlhc2VzO1xuICAgIHJlZ2lzdHJvLmRlc2NyaXBjaW9uID0gdGFza1RleHQ7XG4gIH1cbiAgXG4gIC8vIDYuIERlZmluaXIgZWwgbm9tYnJlIGZpbmFsIGRlbCBhcmNoaXZvIGRlIHJlZ2lzdHJvIChhc2VndXJhcnNlIGRlIHF1ZSBpZCBubyBzZWEgbnVsbClcbiAgaWYgKCFyZWdpc3Ryby5pZCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjogcmVnaXN0cm8uaWQgZXMgbnVsbCBvIHVuZGVmaW5lZFwiKTtcbiAgICByZWdpc3Ryby5pZCA9IERhdGUubm93KCk7IC8vIEFzaWduYXIgdW4gdmFsb3IgdGVtcG9yYWwgYmFzYWRvIGVuIHRpbWVzdGFtcCBwYXJhIGV2aXRhciBlcnJvcmVzXG4gIH1cbiAgcmVnaXN0cm8ubmFtZUZpbGUgPSBgJHtyZWdpc3Ryby5mb2xkZXJ9L1JUIC0gJHtyZWdpc3Ryby5pZH1gO1xufVxuXG4gIC8qKlxuICogQ2FsY3VsYSBlbCBcdTAwRkFsdGltbyBpZFNlYyB1c2FkbyBwYXJhIHJlZ2lzdHJvcyBjb24gZWwgbWlzbW8gdFx1MDBFRHR1bG8gZW4gbGEgY2FycGV0YSBlc3BlY2lmaWNhZGEuXG4gKi9cbmFzeW5jIGNhbGN1bGFyVWx0aW1vSWRTZWModGl0dWxvOiBzdHJpbmcsIGZvbGRlcjogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGNvbnN0IGFyY2hpdm9zID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gIGxldCBtYXggPSAwO1xuICBmb3IgKGNvbnN0IGFyY2hpdm8gb2YgYXJjaGl2b3MpIHtcbiAgICBpZiAoYXJjaGl2by5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyKSkge1xuICAgICAgY29uc3QgbWV0YWRhdG9zID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgaWYgKG1ldGFkYXRvcyAmJiBtZXRhZGF0b3MuZnJvbnRtYXR0ZXIgJiYgbWV0YWRhdG9zLmZyb250bWF0dGVyLnRpdHVsbyA9PT0gdGl0dWxvKSB7XG4gICAgICAgIGNvbnN0IGlkU2VjID0gbWV0YWRhdG9zLmZyb250bWF0dGVyLmlkU2VjO1xuICAgICAgICBpZiAoaWRTZWMgIT09IHVuZGVmaW5lZCAmJiBpZFNlYyA+IG1heCkge1xuICAgICAgICAgIG1heCA9IGlkU2VjO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXg7XG59XG5cbiAgbGltcGlhckFsaWFzKHRpdHVsbzogc3RyaW5nKSB7XG4gICAgLy8gUmVlbXBsYXphIGNhcmFjdGVyZXMgbm8gcGVybWl0aWRvcyBlbiBub21icmVzIGRlIGFyY2hpdm8gY29uIHVuIGd1aW9uIGJham8gbyBhbGdcdTAwRkFuIG90cm8gY2FyYWN0ZXIgc2VndXJvLlxuICAgIGNvbnN0IGNhcmFjdGVyZXNOb1Blcm1pdGlkb3MgPSAvWzw+OlwiXFwvXFxcXHw/KlxceDAwLVxceDFGXS9nO1xuICAgIGxldCB0aXR1bG9MaW1waW8gPSB0aXR1bG8ucmVwbGFjZShjYXJhY3RlcmVzTm9QZXJtaXRpZG9zLCBcIl9cIik7XG5cbiAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpbyBwYXJhIGV2aXRhciBub21icmVzIGRlIGFyY2hpdm8gZXhjZXNpdmFtZW50ZSBsYXJnb3MuXG4gICAgdGl0dWxvTGltcGlvID0gdGl0dWxvTGltcGlvLnJlcGxhY2UoL1xccysvZywgXCIgXCIpO1xuXG4gICAgcmV0dXJuIHRpdHVsb0xpbXBpby50cmltKCk7XG4gIH1cbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vSW50ZXJmYWNlcy9SZWdpc3Ryb1RpZW1wby50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0ludGVyZmFjZXNcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDQ6MzBcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyBSVEJhc2UgfSBmcm9tIFwiLi9SVEJhc2VcIjtcblxuZXhwb3J0IGludGVyZmFjZSBSZWdpc3Ryb1RpZW1wbyBleHRlbmRzIFJUQmFzZSB7XG4gICAgcmV0b21hclJlZ2lzdHJvKGlkOiBudW1iZXIgfCBzdHJpbmcpOiBQcm9taXNlPFJlZ2lzdHJvIHwgbnVsbD47XG5cbiAgICByZXRvbWFyVGFyZWEoaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gIFxuICAgIGRldGFsbGVSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgICBkZXRhbGxlUmVnaXN0cm8oZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGRldGFsbGVSZWdpc3RybygpOiBQcm9taXNlPHZvaWQ+O1xufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9JbnRlcmZhY2VzL1Nlc2lvbkxlY3R1cmEudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9JbnRlcmZhY2VzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMTU6NTc6NDBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ0OjUzXG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgUlRCYXNlIH0gZnJvbSBcIi4vUlRCYXNlXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2VzaW9uTGVjdHVyYSBleHRlbmRzIFJUQmFzZSB7XG4gIFxuZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+O1xuZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+O1xuZ2V0VGl0dWxvKCk6IFByb21pc2U8c3RyaW5nPjtcbmdldERlc2NyaXBjaW9uKCk6IFByb21pc2U8c3RyaW5nPjtcbmdldEVzdGFkbygpOiBQcm9taXNlPHN0cmluZz47XG5nZXRBbGlhc2VzKCk6IFByb21pc2U8c3RyaW5nW10+O1xuZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPjtcbmdldE5vdGEoKTogUHJvbWlzZTxhbnk+O1xufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvU2VzaW9uTGVjdHVyYS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MzozN1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7dXRpbHNBUEl9IGZyb20gJy4vdXRpbHNBUEknXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNlc2lvbkxlY3R1cmEgfSBmcm9tICcuLi9JbnRlcmZhY2VzL1Nlc2lvbkxlY3R1cmEnO1xuaW1wb3J0IHsgUlRCYXNlIH0gZnJvbSAnLi9SVEJhc2UnO1xuaW1wb3J0IHtEYXRlVGltZX0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgU2VzaW9uTGVjdHVyYSBleHRlbmRzIFJUQmFzZSBpbXBsZW1lbnRzIFNlc2lvbkxlY3R1cmF7XG4gICAgcHJpdmF0ZSB1dGlsc0FwaTogdXRpbHNBUEk7XG4gICAgcHJvdGVjdGVkIG5vdGE6IG9iamVjdDtcbiAgICBwcm90ZWN0ZWQgaW5mb1N1YnNpc3RlbWE6IGFueTsgXG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogUGx1Z2luLCBpbmZvU3Vic2lzdGVtYTogYW55KSB7XG4gICAgICBzdXBlcihwbHVnaW4pO1xuICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICB0aGlzLnV0aWxzQXBpID0gbmV3IHV0aWxzQVBJKHBsdWdpbik7XG4gICAgICB0aGlzLnRwID0gcGx1Z2luLnRwO1xuICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0gaW5mb1N1YnNpc3RlbWE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgbGV0IG1heElkID0gMDtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgcmVnaXN0cm9zRXhpc3RlbnRlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKSk7XG4gICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ub3RhLmlkID0gIG1heElkICsgMTtcblxuICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIG5vdGVcbiAgICAgICAgY29uc3QgY3VycmVudE5vdGVQYXRoID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk/LnBhdGg7XG4gICAgICAgIGNvbnN0IGN1cnJlbnROb3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgaWYgKGN1cnJlbnROb3RhKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1Nlc3Npb25zID0gcmVnaXN0cm9zRXhpc3RlbnRlcy5maWx0ZXIoKGZpbGU6IGFueSkgPT4gZmlsZS5wYXRoICE9PSBjdXJyZW50Tm90ZVBhdGggJiYgYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcj8udGl0dWxvID09PSBjdXJyZW50Tm90YS50aXR1bG8pO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2Vzc2lvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZFNlc3Npb25zID0gZXhpc3RpbmdTZXNzaW9ucy5zb3J0KChhOiBhbnksIEI6IGFueSkgPT4gcGFyc2VJbnQoQi5wYXRoLm1hdGNoKC9bMC05XSsvKVswXSkgLSBwYXJzZUludChBLnBhdGgubWF0Y2goL1swLTldKy8pWzBdKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFNMID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHNvcnRlZFNlc3Npb25zWzBdKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmlkU2VjID0gcGFyc2VJbnQobGFzdFNMLmlkU2VjKSArIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnBhZ0luaWNpbyA9IGxhc3RTTC5wYWdGaW47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5pZFNlYyA9IDE7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnBhZ0luaWNpbyA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5vdGEuaWRTZWMgPSAxO1xuICAgICAgICAgICAgdGhpcy5ub3RhLnBhZ0luaWNpbyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5pZDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGFyYW1ldHJvc0xpYnJvKCkge1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50RmlsZSB8fCAhY3VycmVudEZpbGUucGF0aCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YUNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGU7XG4gICAgICAgICAgICBjb25zdCBmaWxlQ2FjaGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50RmlsZSk7XG4gICAgICAgIGlmICghZmlsZUNhY2hlIHx8ICFmaWxlQ2FjaGUuZnJvbnRtYXR0ZXIgfHwgZmlsZUNhY2hlLmZyb250bWF0dGVyLnR5cGUgIT09ICdMQicpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0xhIG5vdGEgYWN0aXZhIGRlYmUgc2VyIGRlIHRpcG8gTGlicm8gZW4gbGEgQmlibG90ZWNhIHBhcmEgcG9kZXIgY3JlYXIgdW5hIHNlc2lcdTAwRjNuIGRlIExlY3R1cmEuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICB0aGlzLm5vdGFbJ3BhZ2luYXMnXSA9IGZyb250TWF0dGVyLnBhZ2luYXM7XG4gICAgICAgICAgICB0aGlzLm5vdGFbJ3RpdHVsbyddID0gZnJvbnRNYXR0ZXIudGl0dWxvO1xuICAgICAgICAgICAgdGhpcy5ub3RhWydwYWxhYnJhc1BvckhvamEnXSA9IGZyb250TWF0dGVyLnBhbGFicmFzUG9ySG9qYTtcbiAgICAgICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCk6IFByb21pc2U8eyBzaUFzdW50bzogYm9vbGVhbiwgbm9tYnJlOiBzdHJpbmdbXSB9PiB7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gdHJ1ZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICAvLzEuIHNpQXN1bnRvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzaUFzdW50bywgbm9tYnJlOiBwYWRyZXMgfVxuICAgICAgICB9XG5cbiAgICAgICBcblxuXG5cbiAgICBcbiAgIFxuXG4gIH1cblxuICBhc3luYyBnZXRBbGlhc2VzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYFNMIC0gJHt0aGlzLm5vdGEuaWRTZWN9IC8gJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xufVxuXG5hc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGxldCBmZWNoYUFjdHVhbCA9IERhdGVUaW1lLm5vdygpO1xuICAgIGZlY2hhQWN0dWFsID0gZmVjaGFBY3R1YWwuc2V0TG9jYWxlKCdlcycpO1xuICAgIGZlY2hhQWN0dWFsID0gZmVjaGFBY3R1YWwudG9Gb3JtYXQoJ3l5eXktTU0tZGQgRUVFRSBISDptbScpO1xuICAgIHRoaXMubm90YS5mZWNoYSA9IGZlY2hhQWN0dWFsO1xuICAgIHJldHVybiBmZWNoYUFjdHVhbDtcbn1cblxuYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgZGVidWdnZXI7XG4gICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgO1xuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufVxuICBcblxuXG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9SVEJhc2UudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6MjBcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyB1dGlsc0FQSSB9IGZyb20gJy4vdXRpbHNBUEknO1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIFBsdWdpbiBzaSBubyBlc3RcdTAwRTEgaW1wb3J0YWRvXG5pbXBvcnQgeyBTZXNpb25MZWN0dXJhIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9TZXNpb25MZWN0dXJhJztcblxuZXhwb3J0IGNsYXNzIFJUQmFzZSB7XG4gICAgcHJvdGVjdGVkIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcm90ZWN0ZWQgbm90YTogb2JqZWN0O1xuICAgIHByb3RlY3RlZCBpbmZvU3Vic2lzdGVtYTogYW55OyAvLyBDYW1iaVx1MDBFOSBlbCB0aXBvIGEgYW55IHBhcmEgcGVybWl0aXIgY3VhbHF1aWVyIG9iamV0b1xuICAgIHByb3RlY3RlZCBwbHVnaW46IFBsdWdpbjtcbiAgICBwcm90ZWN0ZWQgdHA6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnV0aWxzQXBpID0gbmV3IHV0aWxzQVBJKHBsdWdpbik7XG4gICAgICAgIHRoaXMudHAgPSBwbHVnaW4udHA7XG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSB7fTtcbiAgICB9XG5cbiAgICBhc3luYyBpbmljaWFyUmVnaXN0cm8oaW5mb1N1YnNpc3RlbWE6IHsgZm9sZGVyOiBzdHJpbmc7IGluZGljZTogc3RyaW5nOyB0eXBlOiBzdHJpbmc7IH0sIGNhbXBvczogYW55KTogUHJvbWlzZTxhbnkgfCBudWxsPjtcbiAgICBhc3luYyBpbmljaWFyUmVnaXN0cm8oKTogUHJvbWlzZTxhbnkgfCBudWxsPjtcbiAgICBhc3luYyBpbmljaWFyUmVnaXN0cm8oaW5mb1N1YnNpc3RlbWE/OiB7IGZvbGRlcjogc3RyaW5nOyBpbmRpY2U6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB9LCBjYW1wb3M/OiBhbnkpOiBQcm9taXNlPGFueSB8IG51bGw+IHtcbiAgICBcbiAgICAgICAgaWYgKHR5cGVvZiBpbmZvU3Vic2lzdGVtYSA9PT0gJ29iamVjdCcgJiYgaW5mb1N1YnNpc3RlbWEgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICghY2FtcG9zIHx8ICFBcnJheS5pc0FycmF5KGNhbXBvcykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW1wb3MgZGViZSBzZXIgdW4gYXJyYXkgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvU3Vic2lzdGVtYSwgaW5mb1N1YnNpc3RlbWEpO1xuICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5pbmZvU3Vic2lzdGVtYS5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tpbmZvU3Vic2lzdGVtYS5mb2xkZXJdO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuaW5kaWNlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuaW5kaWNlXTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMubm90YSwgaW5mb1N1YnNpc3RlbWEpO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgbGV0IGZpZWxkSGFuZGxlcjogU2VzaW9uTGVjdHVyYTtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNMXCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFNlc2lvbkxlY3R1cmEgPSBhd2FpdCBpbXBvcnQoJy4vU2VzaW9uTGVjdHVyYScpO1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgU2VzaW9uTGVjdHVyYS5TZXNpb25MZWN0dXJhKHRoaXMucGx1Z2luLCB0aGlzLmluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzZSBoYSBkZWZpbmlkbyB1biBtYW5lamFkb3IgZGUgY2FtcG9zIHBhcmEgZWwgdGlwbyAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2FtcG8gb2YgY2FtcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmaWVsZEhhbmRsZXJbZnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhW2NhbXBvXSA9IGF3YWl0IGZpZWxkSGFuZGxlcltmdW5jdGlvbk5hbWVdKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RhID0gYXdhaXQgZmllbGRIYW5kbGVyLmdldE5vdGEoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gdGhpcy5ub3RhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFba2V5XSA9IG5vdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBmdW5jaVx1MDBGM24gJHtmdW5jdGlvbk5hbWV9IG5vIGVzdFx1MDBFMSBkZWZpbmlkYS5gKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBvcmlnaW5hbCBkZSBpbmljaWFyUmVnaXN0cm9cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmNyZWFyT2JqZXRvUmVnaXN0cm8odGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkudmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cm8uZGV0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0cm87IC8vIERldnVlbHZlIGVsIHJlZ2lzdHJvIGFjdHVhbCB5IGRldGllbmUgbGEgZWplY3VjaVx1MDBGM24gYXF1XHUwMEVEXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkuZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgICAgICAgICAgICBpZiAocmVnaXN0cm8uZGV0ZW5lcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnaXN0cm87IC8vIERldnVlbHZlIGVsIHJlZ2lzdHJvIGFjdHVhbCB5IGRldGllbmUgbGEgZWplY3VjaVx1MDBGM24gYXF1XHUwMEVEXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkuY29uc3RydWlyTm9tYnJleUFsaWFzKHJlZ2lzdHJvLCB0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICAgICAgICAgIHJldHVybiByZWdpc3RybztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvYnJlY2FyZ2EgZGUgbVx1MDBFOXRvZG8gcGFyYSBsb3MgZGlmZXJlbnRlcyB0aXBvcyBkZSBlbnRyYWRhXG4gICAgYXN5bmMgY2VycmFyUmVnaXN0cm8oaWQ6IG51bWJlciB8IHN0cmluZyk6IFByb21pc2U8dm9pZD47XG4gICAgYXN5bmMgY2VycmFyUmVnaXN0cm8oZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+O1xuICAgIGFzeW5jIGNlcnJhclJlZ2lzdHJvKCk6IFByb21pc2U8dm9pZD47XG4gICAgYXN5bmMgY2VycmFyUmVnaXN0cm8ocmVnaXN0cm8/OiBudW1iZXIgfCBzdHJpbmcgfCBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZWdpc3RybyA9IHBhcnNlSW50KHJlZ2lzdHJvKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBzaSAnaWQnIGVzIHVuIG5cdTAwRkFtZXJvIC0+IEN1YW5kbyBsbGVnYSBkZWwgYm90XHUwMEYzbiBkZSBsYSB0YWJsYSBkZSByZWdpc3Ryb3MgZGVsIGRcdTAwRURhLlxuICAgICAgICBpZiAodHlwZW9mIHJlZ2lzdHJvID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICAgICAgbGV0IGluZm9Ob3RhO1xuICAgICAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5pZCA9PT0gcmVnaXN0cm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9Ob3RhID0geyBmaWxlIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIiwgXCJob3JhRmluYWxcIiwgXCJ0aWVtcG9UcmFiYWphZG9cIl07XG4gICAgICAgICAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYXJjaGl2YXJOb3RhKGluZm9Ob3RhLCBjYW1wb3MpO1xuICAgICAgICAgICAgbGV0IHRleHRvUmVzdWx0YWRvID0gT2JqZWN0LmVudHJpZXMocmVzdWx0YWRvKS5tYXAoKFtwcm9waWVkYWQsIHZhbG9yXSkgPT4gYCR7cHJvcGllZGFkfTogJHt2YWxvcn1gKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFyZWEgY2VycmFkYS4gQ2FtcG9zIGFjdHVhbGl6YWRvczogJHt0ZXh0b1Jlc3VsdGFkb31gKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBzaSAnaWQnIGVzIHVuIFRGaWxlXG4gICAgICAgIGVsc2UgaWYgKHJlZ2lzdHJvIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBsZXQgaW5mb05vdGEgPSB7IGZpbGU6IHJlZ2lzdHJvIH07XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICBsZXQgY2FtcG9zID0gW1wiZmVjaGFcIiwgXCJob3JhRmluYWxcIiwgXCJ0aWVtcG9UcmFiYWphZG9cIl07XG4gICAgICAgICAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYXJjaGl2YXJOb3RhKGluZm9Ob3RhLCBjYW1wb3MpO1xuICAgICAgICAgICAgbGV0IHRleHRvUmVzdWx0YWRvID0gT2JqZWN0LmVudHJpZXMocmVzdWx0YWRvKS5tYXAoKFtwcm9waWVkYWQsIHZhbG9yXSkgPT4gYCR7cHJvcGllZGFkfTogJHt2YWxvcn1gKS5qb2luKCcsICcpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVGFyZWEgY2VycmFkYS4gQ2FtcG9zIGFjdHVhbGl6YWRvczogJHt0ZXh0b1Jlc3VsdGFkb31gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIExcdTAwRjNnaWNhIHBhcmEgY3VhbmRvIG5vIHNlIHByb3BvcmNpb25hIGFyZ3VtZW50b3MsIHNlIGJ1c2NhIGxhIHRhcmVhIGFjdGl2YSB5IHNlIGNpZXJyYS5cbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvID0gYXdhaXQgdGhpcy51dGlsc0FwaS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcCk7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgbGV0IGluZm9Ob3RhID0geyBmaWxlOiByZWdpc3RybyB9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgbGV0IGNhbXBvcyA9IFtcImZlY2hhXCIsIFwiaG9yYUZpbmFsXCIsIFwidGllbXBvVHJhYmFqYWRvXCJdO1xuICAgICAgICAgICAgbGV0IHJlc3VsdGFkbyA9IGF3YWl0IHRoaXMucGx1Z2luLllBTUxVcGRhdGVyQVBJLmFyY2hpdmFyTm90YShpbmZvTm90YSwgY2FtcG9zKTtcbiAgICAgICAgICAgIGxldCB0ZXh0b1Jlc3VsdGFkbyA9IE9iamVjdC5lbnRyaWVzKHJlc3VsdGFkbykubWFwKChbcHJvcGllZGFkLCB2YWxvcl0pID0+IGAke3Byb3BpZWRhZH06ICR7dmFsb3J9YCkuam9pbignLCAnKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRhcmVhIGNlcnJhZGEuIENhbXBvcyBhY3R1YWxpemFkb3M6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0MzowOVxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7dXRpbHNBUEl9IGZyb20gJy4vdXRpbHNBUEknXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFJlZ2lzdHJvVGllbXBvIH0gZnJvbSAnLi4vSW50ZXJmYWNlcy9SZWdpc3Ryb1RpZW1wbyc7XG5pbXBvcnQgeyBSVEJhc2UgfSBmcm9tICcuL1JUQmFzZSc7XG5cbmV4cG9ydCBjbGFzcyByZWdpc3Ryb1RpZW1wb0FQSSBleHRlbmRzIFJUQmFzZSBpbXBsZW1lbnRzIFJlZ2lzdHJvVGllbXBve1xuICAgIHByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IFBsdWdpbikge1xuICAgICAgc3VwZXIocGx1Z2luKTtcbiAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgdGhpcy51dGlsc0FwaSA9IG5ldyB1dGlsc0FQSShwbHVnaW4pO1xuICAgICAgdGhpcy50cCA9IHBsdWdpbi50cDtcbiAgICB9XG4gICAgXG4gICAgLy8gSW52b2NhZG8gZGVzZGUgZWwgdGVtcGxhdGUgZGUgdGVtcGxhdGVyIFBhc28gMyBkZSAzXG5cbmFzeW5jIHJldG9tYXJSZWdpc3RybyhpZDogc3RyaW5nIHwgbnVtYmVyKSB7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgIHRyeSB7XG4gICAgICAvLyAxLiBDcmVhciBlbCBvYmpldG8gcmVnaXN0cm8gYmFzZVxuICAgICAgY29uc3QgcmVnaXN0cm8gPSBhd2FpdCB0aGlzLnV0aWxzQXBpLmNyZWFyT2JqZXRvUmVnaXN0cm8odGhpcy5wbHVnaW4pO1xuICBcbiAgICAgIC8vIDIuIFZlcmlmaWNhciBzaSBoYXkgcmVnaXN0cm8gZW4gY3Vyc29cbiAgICAgIGF3YWl0IHRoaXMudXRpbHNBcGkudmVyaWZpY2FyVGFyZWFzQWN0aXZhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgICAgIGlmIChyZWdpc3Ryby5kZXRlbmVyKSB7XG4gICAgICAgIHJldHVybiByZWdpc3RybztcbiAgICAgIH1cbiAgXG4gICAgICAvLyAzLiBCdXNjYXIgbGEgbm90YSBhbnRpZ3VhIGVuIGxhIGNhcnBldGEgY29uZmlndXJhZGFcbiAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgIGxldCByZWdpc3Ryb0FudGlndW86IHsgZmlsZTogVEZpbGU7IGZyb250bWF0dGVyOiBhbnkgfSB8IHVuZGVmaW5lZDtcbiAgXG4gICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChmb2xkZXIpKSB7XG4gICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgIGlmIChtZXRhZGF0YT8uaWQgPT09IHBhcnNlSW50KGlkIGFzIHN0cmluZykpIHtcbiAgICAgICAgICAgIHJlZ2lzdHJvQW50aWd1byA9IHsgZmlsZSwgZnJvbnRtYXR0ZXI6IG1ldGFkYXRhIH07XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgXG4gICAgICBpZiAoIXJlZ2lzdHJvQW50aWd1bykge1xuICAgICAgICBuZXcgTm90aWNlKGBObyBzZSBlbmNvbnRyXHUwMEYzIGVsIHJlZ2lzdHJvIGFudGlndW8gY29uIElEOiAke2lkfWApO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJvO1xuICAgICAgfVxuICBcbiAgICAgIC8vIDQuIENvcGlhciBjYW1wb3MgcmVsZXZhbnRlcyB5IG5vcm1hbGl6YXIgY29yY2hldGVzXG4gICAgICBjb25zdCBmbSA9IHJlZ2lzdHJvQW50aWd1by5mcm9udG1hdHRlcjtcbiAgICAgIHJlZ2lzdHJvLnRpdHVsbyA9IGZtLnRpdHVsbyA/PyBcIlNpbiBUaXR1bG9cIjtcbiAgICAgIHJlZ2lzdHJvLmFzdW50b1JldG9tYWRvID0gZm0uYXN1bnRvID8/IG51bGw7XG4gICAgICAvLyBFamVtcGxvOiBpbmNyZW1lbnRhIGlkU2VjIHBhcmEgaW5kaWNhciBudWV2YSBzZXNpXHUwMEYzblxuICAgICAgcmVnaXN0cm8uaWRTZWMgPSAoZm0uaWRTZWMgPz8gMCkgKyAxO1xuICBcbiAgICAgIC8vIC0tLS0gRnVuY2lvbmVzIHBhcmEgbGltcGlhciBjb3JjaGV0ZXMgLS0tLVxuICAgICAgZnVuY3Rpb24gcXVpdGFyRG9ibGVDb3JjaGV0ZShzdHI6IHN0cmluZykge1xuICAgICAgICBpZiAoc3RyLnN0YXJ0c1dpdGgoXCJbW1wiKSAmJiBzdHIuZW5kc1dpdGgoXCJdXVwiKSkge1xuICAgICAgICAgIHJldHVybiBzdHIuc2xpY2UoMiwgLTIpOyAvLyBFbGltaW5hIFtbIHkgXV1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgfVxuICBcbiAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6YXJBcnJheShhcnI6IGFueVtdKSB7XG4gICAgICAgIHJldHVybiBhcnIubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHF1aXRhckRvYmxlQ29yY2hldGUoaXRlbSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIFxuICAgICAgLy8gQXNpZ25hciB5IG5vcm1hbGl6YXIgY2FkYSBjYW1wb1xuICAgICAgcmVnaXN0cm8uYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgaWYgKHR5cGVvZiBmbS5hcmVhVmlkYSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZWdpc3Ryby5hcmVhVmlkYSA9IHF1aXRhckRvYmxlQ29yY2hldGUoZm0uYXJlYVZpZGEpO1xuICAgICAgfVxuICBcbiAgICAgIHJlZ2lzdHJvLmFyZWFJbnRlcmVzID0gW107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmbS5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgcmVnaXN0cm8uYXJlYUludGVyZXMgPSBub3JtYWxpemFyQXJyYXkoZm0uYXJlYUludGVyZXMpO1xuICAgICAgfVxuICBcbiAgICAgIHJlZ2lzdHJvLnByb3llY3RvR1REID0gW107XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShmbS5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgcmVnaXN0cm8ucHJveWVjdG9HVEQgPSBub3JtYWxpemFyQXJyYXkoZm0ucHJveWVjdG9HVEQpO1xuICAgICAgfVxuICBcbiAgICAgIHJlZ2lzdHJvLnByb3llY3RvUSA9IFtdO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZm0ucHJveWVjdG9RKSkge1xuICAgICAgICByZWdpc3Ryby5wcm95ZWN0b1EgPSBub3JtYWxpemFyQXJyYXkoZm0ucHJveWVjdG9RKTtcbiAgICAgIH1cbiAgXG4gICAgICAvLyAqKkNvcGlhbW9zIGxvcyBhbGlhc2VzIGFudGlndW9zIHRhbCBjdWFsLCBzaW4gcGVyZGVybG9zKipcbiAgICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSBbXTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGZtLmFsaWFzZXMpKSB7XG4gICAgICAgIHJlZ2lzdHJvLmFsaWFzZXMgPSBub3JtYWxpemFyQXJyYXkoZm0uYWxpYXNlcyk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gNS4gQ29uc3RydWlyIG5vbWJyZSB5IGFsaWFzXG4gICAgICAvLyAgICBJTVBPUlRBTlRFOiBjb25zdHJ1aXJOb21icmV5QWxpYXMgTk8gZGViZSBzb2JyZXNjcmliaXIgcG9yIGNvbXBsZXRvIHJlZ2lzdHJvLmFsaWFzZXMsXG4gICAgICAvLyAgICBzaW5vIGFcdTAwRjFhZGlyIG8gYWp1c3RhciBlbCBhbGlhcyBwYXJhIGVzdGEgbnVldmEgc2VzaVx1MDBGM24uXG4gICAgICBhd2FpdCB0aGlzLnV0aWxzQXBpLmNvbnN0cnVpck5vbWJyZXlBbGlhcyhyZWdpc3RybywgdGhpcy5wbHVnaW4uYXBwKTtcbiAgXG4gICAgICAvLyA2LiBSZXRvcm5hciBlbCBvYmpldG8gcmVnaXN0cm8gYWwgdGVtcGxhdGVcbiAgICAgIHJldHVybiByZWdpc3RybztcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvIGFsIHJldG9tYXIuXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLy8gSW52b2NhZG8gcGFyYSBjcmVhciBlbCB0ZW1wbGF0ZSBkZSBSZXRvbWFyIFBhc28gMSBkZSAzXG4gIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICBkZWJ1Z2dlcjtcbiAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgIH1cbiAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICBsZXQgY3JlYXJOb3RhID0gdGhpcy50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKVxuICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbiAgfVxuXG4gIC8vIFNvYnJlY2FyZ2EgZGUgbVx1MDBFOXRvZG8gcGFyYSBsb3MgZGlmZXJlbnRlcyB0aXBvcyBkZSBlbnRyYWRhXG4gIGFzeW5jIGRldGFsbGVSZWdpc3RybyhpZDogbnVtYmVyIHwgc3RyaW5nKTogUHJvbWlzZTx2b2lkPjtcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPjtcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKCk6IFByb21pc2U8dm9pZD47XG4gIC8vIEltcGxlbWVudGFjaVx1MDBGM24gZGVsIG1cdTAwRTl0b2RvIGNvbiB1bmlcdTAwRjNuIGRlIHRpcG9zIHBhcmEgZWwgcGFyXHUwMEUxbWV0cm8gaWRcbiAgYXN5bmMgZGV0YWxsZVJlZ2lzdHJvKHJlZ2lzdHJvPzogbnVtYmVyIHwgc3RyaW5nIHwgVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBmb2xkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG87XG4gICAgbGV0IGluZm9Ob3RhO1xuICAgIGRlYnVnZ2VyO1xuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdzdHJpbmcnKSB7XG4gICAgcmVnaXN0cm8gPSBwYXJzZUludChyZWdpc3Rybyk7XG4gICAgfVxuICAgIC8vIExcdTAwRjNnaWNhIHNpICdpZCcgZXMgdW4gblx1MDBGQW1lcm8gLT4gQ3VhbmRvIGxsZWdhIGRlbCBib3RvbiBkZSBsYSB0YWJsYSBkZSByZWdpc3Ryb3MgZGVsIGRcdTAwRURhLlxuICAgIGlmICh0eXBlb2YgcmVnaXN0cm8gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5pZCA9PT0gcmVnaXN0cm8pIHtcbiAgICAgICAgICAgICAgICAgICAgaW5mb05vdGEgPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvTm90YSwgbWV0YWRhdGEpOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTFx1MDBGM2dpY2Egc2kgJ2lkJyBlcyB1biBURmlsZVxuICAgIGVsc2UgaWYgKHJlZ2lzdHJvIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHJlZ2lzdHJvKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBpbmZvTm90YSA9IHtmaWxlOiByZWdpc3Ryb307XG4gICAgICBPYmplY3QuYXNzaWduKGluZm9Ob3RhLCBtZXRhZGF0YSk7IFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBjdWFuZG8gbm8gc2UgcHJvcG9yY2lvbmEgYXJndW1lbnRvcywgc2UgYnVzY2EgbGEgdGFyZWEgYWN0aXZhIHkgc2UgY2llcnJhLlxuICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IHRoaXMudXRpbHNBcGkuYnVzY2FyUmVnaXN0cm9zQWN0aXZvcyhhcHApO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShyZWdpc3Rybyk/LmZyb250bWF0dGVyO1xuICAgICAgICBpbmZvTm90YSA9IHtmaWxlOiByZWdpc3Ryb307XG4gICAgICAgIE9iamVjdC5hc3NpZ24oaW5mb05vdGEsIG1ldGFkYXRhKTsgXG4gICAgfVxuICAgIGxldCBjYW1wb3MgPSBbXCJkZXNjcmlwY2lvbl9SZWdpc3Ryb1RpZW1wb1wiXTtcbiAgICBkZWJ1Z2dlcjtcbiAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYWN0dWFsaXphck5vdGEoaW5mb05vdGEsIGNhbXBvcyk7XG4gICAgbGV0IHRleHRvUmVzdWx0YWRvID0gT2JqZWN0LmVudHJpZXMocmVzdWx0YWRvKS5tYXAoKFtwcm9waWVkYWQsIHZhbG9yXSkgPT4gYCR7cHJvcGllZGFkfTogJHt2YWxvcn1gKS5qb2luKCcsICcpO1xuICAgIG5ldyBOb3RpY2UoYERlc2NyaXBjaVx1MDBGM24gYWN0dWFsaXphZGE6ICR7dGV4dG9SZXN1bHRhZG99YCk7XG4gIH1cblxuICB9XG4gICIsICIvKiBmaWxlTG9jYXRpb246IHNyYy9tYWluLnRzICovXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFBsdWdpbk1haW5TZXR0aW5nc1RhYiB9IGZyb20gXCIuL3NldHRpbmdzVGFiXCI7XG5pbXBvcnQgeyBNb2R1bG9CYXNlIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9CYXNlL2luZGV4XCI7XG5pbXBvcnQgeyBhY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGEgfSBmcm9tIFwiLi9tb2R1bGVzL01fYnVzcXVlZGFBdmFuemFkYS9hY3RpdmFkb3Jlc1wiO1xuaW1wb3J0IHsgU3RhdHVzQmFyRXh0ZW5zaW9uIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9BbGlhc1N0YXR1c0Jhci9zdGF0dXNCYXJcIjtcbmltcG9ydCB7IE1vZHVsb1JlZ2lzdHJvVGllbXBvIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9pbmRleFwiO1xuaW1wb3J0IHR5cGUgeyBQbHVnaW5NYWluU2V0dGluZ3MgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3BsdWdpbk1haW5TZXR0aW5nc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCIuL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5nc1wiO1xuaW1wb3J0IHsgcmVnaXN0cm9UaWVtcG9BUEkgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS9yZWdpc3Ryb1RpZW1wb0FQSVwiO1xuaW1wb3J0IHsgc3RhcnRlckFQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUElcIjtcbmltcG9ydCB7IGFkZE9uc0FQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2FkZE9uc0FQSVwiO1xuaW1wb3J0IHsgWUFNTFVwZGF0ZXJBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSVwiO1xuaW1wb3J0IHsgbWVudUhveUFQSSB9IGZyb20gXCIuL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVEaWFyaW9BUElcIjtcbmltcG9ydCB7IG1lbnVTZW1hbmFsQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudVNlbWFuYWxBUElcIjtcbmltcG9ydCB7IFZpc3RhUmVnaXN0cm9BY3Rpdm8gfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3ZpZXdzL3Zpc3RhUlRBY3Rpdm9cIjtcbmltcG9ydCB7IE1vZHVsb0dURCB9IGZyb20gXCIuL21vZHVsZXMvbW9kdWxvR1REXCI7XG4vL2ltcG9ydCB7IE1vZHVsb1RlcmNlcm9zIH0gZnJvbSAnLi9tb2R1bGVzL21vZHVsb19UZXJjZXJvcyc7XG5pbXBvcnQgeyBpbmdyZXNhckJhbmRlamFFbnRyYWRhIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2R1bG9HVEQvaW5ib3hcIjtcbmltcG9ydCB7IHN1YnNpc3RlbWFzQVBJIH0gZnJvbSBcIi4vbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvc3Vic2lzdGVtYXNBUElcIjtcbmltcG9ydCB7IFZpc3RhUmVzdW1lblNlbWFuYWwgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL3ZpZXdzL3Zpc3RhUmVzdW1lblNlbWFuYWxcIjtcbmltcG9ydCB7IFZpc3RhUmVnaXN0cm9EaWFyaW8gfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL3ZpZXdzL3Zpc3RhUmVnaXN0cm9EaWFyaW9cIjtcbmltcG9ydCBHUFRob3JhIGZyb20gXCIuL21vZHVsZXMvR1BUaG9yYS9HUFRob3JhXCI7XG5pbXBvcnQgeyBsaWJyb3NBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb0xpYnJvcy9saWJyb3NBUElcIjtcbmltcG9ydCB7IHVwZGF0ZVNlc2lvbkxlY3R1cmEgfSBmcm9tIFwiLi9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL0FQSS91cGRhdGVTZXNpb25MZWN0dXJhXCI7XG5pbXBvcnQgeyBUYXJlYXNBUEkgfSBmcm9tIFwiLi9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2FwaS90YXJlYXNBUElcIjtcbmltcG9ydCB7IE1vZHVsb1RhYlRpdGxlIH0gZnJvbSAnLi9tb2R1bGVzL21vZHVsb1RhYlRpdGxlJztcbmltcG9ydCB7IE1vZHVsb1Rhc2tNYW5hZ2VyIH0gZnJvbSAnLi9tb2R1bGVzL3Rhc2tNYW5hZ2VyJztcbmltcG9ydCB7IE1vZHVsb0RhdGF2aWV3UXVlcmllcyB9IGZyb20gJy4vbW9kdWxlcy9kYXRhdmlld1F1ZXJpZXMnO1xuaW1wb3J0IHsgVGFza05hdmlnYXRvck1vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy90YXNrTmF2aWdhdG9yJztcbmltcG9ydCB7IEVudHJlZ2FibGVGaWVsZEhhbmRsZXIgfSBmcm9tIFwiLi9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlclwiO1xuaW1wb3J0IHsgU2VsZWNjaW9uTXVsdGlwbGVNb2RhbCB9IGZyb20gXCIuL21vZHVsZXMvbW9kYWxlcy9zZWxlY2Npb25NdWx0aXBsZU1vZGFsXCI7XG5pbXBvcnQgeyBEYXRlUGlja2VyTW9kYWwgfSBmcm9tIFwiLi9tb2R1bGVzL21vZGFsZXMvZGF0ZVBpY2tlck1vZGFsXCI7XG5pbXBvcnQgeyBTcGlubmVyTW9kYWwgfSBmcm9tIFwiLi9tb2R1bGVzL21vZGFsZXMvc3Bpbm5lck1vZGFsXCI7XG5pbXBvcnQgeyBQZWRpZG9zQ2xpZW50ZU1vZGFsIH0gZnJvbSBcIi4vbW9kdWxlcy9tb2RhbGVzL3BlZGlkb3NDbGllbnRlTW9kYWxcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1hbmFnZW1lbnRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogUGx1Z2luTWFpblNldHRpbmdzIHwgdW5kZWZpbmVkO1xuICAvLyBEZWNsYXJhIHVuYSBwcm9waWVkYWQgYHNldHRpbmdzYCBwYXJhIGFsbWFjZW5hciBsYSBjb25maWd1cmFjaVx1MDBGM24gZGVsIHBsdWdpbi5cbiAgc3RhdHVzQmFyRXh0ZW5zaW9uOiBTdGF0dXNCYXJFeHRlbnNpb24gfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvUmVnaXN0cm9UaWVtcG86IE1vZHVsb1JlZ2lzdHJvVGllbXBvIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb0Jhc2U6IE1vZHVsb0Jhc2UgfCBudWxsID0gbnVsbDtcbiAgbW9kdWxvR1REOiBNb2R1bG9HVEQgfCBudWxsID0gbnVsbDtcbiAgLy9tb2R1bG9UZXJjZXJvczogTW9kdWxvVGVyY2Vyb3MgfCBudWxsID0gbnVsbDtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNSVDogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNNQjogc3RyaW5nW10gPSBbXTtcbiAgcmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQ6IHN0cmluZ1tdID0gW107XG4gIHJlZ2lzdGVyZWRDb21tYW5kSWRzX1RlcmNlcm9zOiBzdHJpbmdbXSA9IFtdO1xuICByaWJib25CdXR0b25SVDogUmV0dXJuVHlwZTxQbHVnaW5bXCJhZGRSaWJib25JY29uXCJdPiB8IG51bGwgPSBudWxsO1xuICBhcHA6IGFueTtcbiAgcmVnaXN0cm9UaWVtcG9BUEk6IHJlZ2lzdHJvVGllbXBvQVBJIHwgdW5kZWZpbmVkO1xuICBzdGFydGVyQVBJOiBzdGFydGVyQVBJIHwgdW5kZWZpbmVkO1xuICBhZGRPbnNBUEk6IGFkZE9uc0FQSSB8IHVuZGVmaW5lZDtcbiAgbWVudUhveUFQSTogbWVudUhveUFQSSB8IHVuZGVmaW5lZDtcbiAgbWVudVNlbWFuYWxBUEk6IG1lbnVTZW1hbmFsQVBJIHwgdW5kZWZpbmVkO1xuICBzdWJzaXN0ZW1hc0FQSTogc3Vic2lzdGVtYXNBUEkgfCB1bmRlZmluZWQ7XG4gIGxpYnJvc0FQSTogbGlicm9zQVBJIHwgdW5kZWZpbmVkO1xuICBuZXdJbmJveDogYW55O1xuICB0cDogYW55O1xuICB0YXJlYXNBUEk6IFRhcmVhc0FQSSB8IHVuZGVmaW5lZDtcbiAgbW9kdWxvVGFiVGl0bGU6IE1vZHVsb1RhYlRpdGxlIHwgbnVsbCA9IG51bGw7XG4gIG1vZHVsb1Rhc2tNYW5hZ2VyOiBNb2R1bG9UYXNrTWFuYWdlciB8IG51bGwgPSBudWxsO1xuICBtb2R1bG9EYXRhdmlld1F1ZXJpZXM6IE1vZHVsb0RhdGF2aWV3UXVlcmllcyB8IG51bGwgPSBudWxsO1xuICB0YXNrTmF2aWdhdG9yTW9kdWxlOiBUYXNrTmF2aWdhdG9yTW9kdWxlIHwgbnVsbCA9IG51bGw7XG4gIC8vIERlY2xhcmEgdW5hIHByb3BpZWRhZCBwYXJhIG1hbnRlbmVyIHVuYSBpbnN0YW5jaWEgZGUgYFN0YXR1c0JhckV4dGVuc2lvbmAuXG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgdGhpcy50cCA9IHRoaXMuZ2V0VHAoKTtcblxuICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxuICAgICAgXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIixcbiAgICAgIChsZWFmKSA9PiBuZXcgVmlzdGFSZWdpc3Ryb0FjdGl2byhsZWFmLCB0aGlzKVxuICAgICk7XG4gICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICBcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiLFxuICAgICAgKGxlYWYpID0+IG5ldyBWaXN0YVJlc3VtZW5TZW1hbmFsKGxlYWYsIHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgIFwidmlzdGEtcmVnaXN0cm8tZGlhcmlvXCIsXG4gICAgICAobGVhZikgPT4gbmV3IFZpc3RhUmVnaXN0cm9EaWFyaW8obGVhZiwgdGhpcylcbiAgICApO1xuXG4gICAgLy8gY2FyZ2FyIEFQSSByZWdpc3RybyBUaWVtcG9cbiAgICB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJID0gbmV3IHJlZ2lzdHJvVGllbXBvQVBJKHRoaXMpO1xuICAgIHRoaXMuc3RhcnRlckFQSSA9IG5ldyBzdGFydGVyQVBJKHRoaXMpO1xuICAgIHRoaXMuYWRkT25zQVBJID0gbmV3IGFkZE9uc0FQSSh0aGlzKTtcbiAgICB0aGlzLllBTUxVcGRhdGVyQVBJID0gbmV3IFlBTUxVcGRhdGVyQVBJKHRoaXMpO1xuICAgIHRoaXMudXBkYXRlU2VzaW9uTGVjdHVyYSA9IG5ldyB1cGRhdGVTZXNpb25MZWN0dXJhKHRoaXMpO1xuICAgIHRoaXMubWVudUhveUFQSSA9IG5ldyBtZW51SG95QVBJKHRoaXMpO1xuICAgIHRoaXMubWVudVNlbWFuYWxBUEkgPSBuZXcgbWVudVNlbWFuYWxBUEkodGhpcyk7XG4gICAgdGhpcy5zdWJzaXN0ZW1hc0FQSSA9IG5ldyBzdWJzaXN0ZW1hc0FQSSh0aGlzKTtcbiAgICB0aGlzLmxpYnJvc0FQSSA9IG5ldyBsaWJyb3NBUEkodGhpcyk7XG4gICAgdGhpcy5uZXdJbmJveCA9IGluZ3Jlc2FyQmFuZGVqYUVudHJhZGEuYmluZCh0aGlzKTtcbiAgICB0aGlzLnRhc2tOYXZpZ2F0b3JNb2R1bGUgPSBuZXcgVGFza05hdmlnYXRvck1vZHVsZSh0aGlzKTtcbiAgICAvLyBBXHUwMEYxYWRlIGxhIHBlc3RhXHUwMEYxYSBkZSBjb25maWd1cmFjaVx1MDBGM24gLVxuICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGx1Z2luTWFpblNldHRpbmdzVGFiKHRoaXMpKTtcbiAgICAvLyBJbmljaWFsaXphIGxhcyBpbnN0YW5jaWFzIGRlIGxvcyBtXHUwMEYzZHVsb3NcbiAgICB0aGlzLnN0YXR1c0JhckV4dGVuc2lvbiA9IG5ldyBTdGF0dXNCYXJFeHRlbnNpb24odGhpcyk7XG4gICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbyA9IG5ldyBNb2R1bG9SZWdpc3Ryb1RpZW1wbyh0aGlzKTtcbiAgICB0aGlzLm1vZHVsb0Jhc2UgPSBuZXcgTW9kdWxvQmFzZSh0aGlzKTtcbiAgICAvL3RoaXMubW9kdWxvVGVyY2Vyb3MgPSBuZXcgTW9kdWxvVGVyY2Vyb3ModGhpcyk7XG4gICAgdGhpcy5tb2R1bG9HVEQgPSBuZXcgTW9kdWxvR1REKHRoaXMpO1xuICAgIC8vdGhpcy5nZXRUYXJlYXNWZW5jaWRhc0FiaWVydGFzID0gKCkgPT4gZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcyh0aGlzKTtcbiAgICAvL3RoaXMubW9zdHJhclRhcmVhc1ZlbmNpZGFzID0gKCkgPT4gbW9zdHJhclRhcmVhc1ZlbmNpZGFzKHRoaXMpO1xuICAgIHRoaXMudGFyZWFzQVBJID0gbmV3IFRhcmVhc0FQSSh0aGlzKTtcbiAgICB0aGlzLm1vZHVsb1RhYlRpdGxlID0gbmV3IE1vZHVsb1RhYlRpdGxlKHRoaXMpO1xuICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXIgPSBuZXcgTW9kdWxvVGFza01hbmFnZXIodGhpcyk7XG4gICAgdGhpcy5tb2R1bG9EYXRhdmlld1F1ZXJpZXMgPSBuZXcgTW9kdWxvRGF0YXZpZXdRdWVyaWVzKHRoaXMpO1xuICAgIC8qXG4gICAgKHRoaXMuYXBwIGFzIGFueSkuZ3BNYW5hZ2VtZW50ID0ge1xuICAgICAgZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhczogKCkgPT4gdGhpcy50YXJlYXNBUEkuZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcygpLFxuICAgICAgbW9zdHJhclRhcmVhc1ZlbmNpZGFzOiAoKSA9PiB0aGlzLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzVmVuY2lkYXMoKVxuICAgIH07XG4gICAgKi9cbiAgICB0aGlzLmFwcGx5Q29uZmlndXJhdGlvbigpO1xuICAgIC8vIEFwbGljYSBsYSBjb25maWd1cmFjaVx1MDBGM24gaW5pY2lhbCBiYXNhZGEgZW4gbG9zIGFqdXN0ZXMgY2FyZ2Fkb3MgbyBwcmVkZXRlcm1pbmFkb3MuXG4gICAgY29uc29sZS5sb2coXCJJbmljaWFuZG8gY2FyZ2EgZGUgcGx1Z2luIGRlIEdlc3RpXHUwMEYzbiBQZXJzb25hbFwiKTtcblxuICAgIHRoaXMucmVnaXN0ZXJHUFRob3JhKCk7XG4gICAgLy8gQWN0aXZhY2lcdTAwRjNuIGRlIG1vZHVsb1RhZ1RpdGxlXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvVGFiVGl0bGUpIHtcbiAgICAgIHRoaXMubW9kdWxvVGFiVGl0bGU/LmFjdGl2YXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubW9kdWxvVGFiVGl0bGU/LmRlYWN0aXZhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb1Rhc2tNYW5hZ2VyKSB7XG4gICAgICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXIuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvRGF0YXZpZXdRdWVyaWVzKSB7XG4gICAgICBjb25zb2xlLmxvZygnTWFuYWdlbWVudFBsdWdpbjogQXBsaWNhbmRvIGNvbmZpZ3VyYWNpXHUwMEYzbiBEYXRhdmlld1F1ZXJpZXMuLi4nKTtcbiAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKCF0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzLmFjdGl2YXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBhcHBseUNvbmZpZ3VyYXRpb246JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcz8uZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgICAgICAgLy8gQWN0aXZhciBlbCBtXHUwMEYzZHVsbyBzaSBlc3RcdTAwRTEgY29uZmlndXJhZG8gZW4gc2V0dGluZ3MgKG9wY2lvbmFsKVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50YXNrTmF2aWdhdG9yTW9kdWxlKSB7XG4gICAgICAgICAgdGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlPy5hY3RpdmF0ZSgpO1xuICAgICAgfVxuXG4gICAgXG4gIFxuICB9XG5cbiAgcmVnaXN0ZXJHUFRob3JhKCkge1xuICAgIGNvbnN0IGdwdEhvcmEgPSBuZXcgR1BUaG9yYSh0aGlzLmFwcCk7IC8vIENyZWFyIHVuYSBpbnN0YW5jaWEgZGUgR1BUaG9yYVxuICAgIGdwdEhvcmEub25sb2FkKCk7XG4gIH1cblxuICBhcHBseUNvbmZpZ3VyYXRpb24oKSB7XG4gICAgLy8gTW9kdWxvIEJhc2UgZXMgZWwgbVx1MDBGM2R1bG8gc29icmUgZWwgcXVlIGVzdG95IGhhY2llbmRvIHBydWViYXMgZGUgZGVzYXJyb2xsby5cbiAgICBpZiAodGhpcy5zZXR0aW5ncy5tb2R1bG9CYXNlKSB7XG4gICAgICB0aGlzLm1vZHVsb0Jhc2U/LmFjdGl2YXRlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0Jhc2U/LmRlYWN0aXZhdGUodGhpcyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvKSB7XG4gICAgICB0aGlzLm1vZHVsb1JlZ2lzdHJvVGllbXBvPy5hY3RpdmF0ZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb2R1bG9SZWdpc3Ryb1RpZW1wbz8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvQWxpYXNTdGF0dXNCYXIpIHtcbiAgICAgIHRoaXMuc3RhdHVzQmFyRXh0ZW5zaW9uPy5hY3RpdmF0ZSgpO1xuICAgICAgLy8gU2kgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYG1vZHVsb0FsaWFzU3RhdHVzQmFyYCBlcyB2ZXJkYWRlcmEsIGFjdGl2YSBlbCBtXHUwMEYzZHVsby5cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0dXNCYXJFeHRlbnNpb24/LmRlYWN0aXZhdGUoKTtcbiAgICAgIC8vIFNpIGVzIGZhbHNhLCBkZXNhY3RpdmEgZWwgbVx1MDBGM2R1bG8uXG4gICAgfVxuICAgIGlmICh0aGlzLnNldHRpbmdzLm1vZHVsb0dURCkge1xuICAgICAgdGhpcy5tb2R1bG9HVEQ/LmFjdGl2YXRlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb0dURD8uZGVhY3RpdmF0ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvVGFza01hbmFnZXIpIHtcbiAgICAgIHRoaXMubW9kdWxvVGFza01hbmFnZXI/LmFjdGl2YXRlKCk7XG4gIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vZHVsb1Rhc2tNYW5hZ2VyPy5kZWFjdGl2YXRlKCk7XG4gIH1cbiBcbiAgaWYgKHRoaXMuc2V0dGluZ3MubW9kdWxvRGF0YXZpZXdRdWVyaWVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBcGxpY2FuZG8gY29uZmlndXJhY2lcdTAwRjNuOiBBY3RpdmFuZG8gRGF0YXZpZXdRdWVyaWVzJyk7XG4gICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzPy5hY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBcGxpY2FuZG8gY29uZmlndXJhY2lcdTAwRjNuOiBEZXNhY3RpdmFuZG8gRGF0YXZpZXdRdWVyaWVzJyk7XG4gICAgICAgIHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzPy5kZWFjdGl2YXRlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudGFza05hdmlnYXRvck1vZHVsZSkge1xuICAgICAgdGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlPy5hY3RpdmF0ZSgpO1xuICB9IGVsc2Uge1xuICAgICAgdGhpcy50YXNrTmF2aWdhdG9yTW9kdWxlPy5kZWFjdGl2YXRlKCk7XG4gIH1cblxuICAgIC8vdGhpcy5tb2R1bG9UZXJjZXJvcz8uYWN0aXZhdGUodGhpcyk7XG4gIH1cblxuICBhc3luYyBvbnVubG9hZCgpIHtcbiAgICAvLyBDXHUwMEYzZGlnbyBkZSBsaW1waWV6YSBhcXVcdTAwRURcbiAgICBjb25zb2xlLmxvZyhcIkRlc2NhcmdhbmRvIHBsdWdpbiBHZXN0aVx1MDBGM24gUGVyc29uYWxcIik7XG4gICAgaWYgKHRoaXMubW9kdWxvRGF0YXZpZXdRdWVyaWVzKSB7XG4gICAgICB0aGlzLm1vZHVsb0RhdGF2aWV3UXVlcmllcy5kZWFjdGl2YXRlKCk7XG4gIH1cblxuICAgICAgaWYgKHRoaXMudGFza05hdmlnYXRvck1vZHVsZSkge1xuICAgICAgICB0aGlzLnRhc2tOYXZpZ2F0b3JNb2R1bGUuZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgICBkZWxldGUgKHRoaXMuYXBwIGFzIGFueSkuZ3BNYW5hZ2VtZW50O1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGNhcmdhciBsYSBjb25maWd1cmFjaVx1MDBGM24gZGVzZGUgZWwgYWxtYWNlbmFtaWVudG8gZGUgT2JzaWRpYW4uXG4gICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgLy8gSW50ZW50YSBjYXJnYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHkgbWV6Y2xhIGxvcyB2YWxvcmVzIGNhcmdhZG9zIGNvbiBsb3MgcHJlZGV0ZXJtaW5hZG9zLlxuICB9XG5cbiAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZ3VhcmRhciBsYSBjb25maWd1cmFjaVx1MDBGM24gYWN0dWFsIGVuIGVsIGFsbWFjZW5hbWllbnRvIGRlIE9ic2lkaWFuLlxuICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgLy8gR3VhcmRhIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBhY3R1YWwuXG5cbiAgICB0aGlzLmFwcGx5Q29uZmlndXJhdGlvbigpO1xuICAgIC8vIFZ1ZWx2ZSBhIGFwbGljYXIgbGEgY29uZmlndXJhY2lcdTAwRjNuIHBhcmEgYXNlZ3VyYXJzZSBkZSBxdWUgbG9zIGNhbWJpb3MgcmVjaWVudGVzIHNlIHJlZmxlamVuIGlubWVkaWF0YW1lbnRlLlxuICB9XG5cbiAgZ2V0VHAoKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuYXBwIHx8XG4gICAgICAhdGhpcy5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIilcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gdGhpcy5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICBsZXQgdHBHZW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICBsZXQgdHAgPSB7fTtcbiAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKChtKSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQoKG0pID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgIGlmICghdHAuc3lzdGVtKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJJbnN0YW5jaWEgZGUgdHAgY2FyZ2FkYSBzYXRpc2ZhY3RvcmlhbWVudGUgZW4gUGx1Z2luXCIpO1xuICAgIHJldHVybiB0cDtcbiAgfVxufVxuIiwgImltcG9ydCB7IFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIFBsdWdpbk1haW5TZXR0aW5nc1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29uZmlndXJhY2lcdTAwRjNuIGRlbCBwbHVnaW4gZGUgR2VzdGlcdTAwRjNuIFBlcnNvbmFsJyB9KTtcblxuICAgICAgICAvLyBDcmVhciBjb250ZW5lZG9yZXMgcGFyYSBsYXMgcGVzdGFcdTAwRjFhcyB5IGVsIGNvbnRlbmlkbyBkZSBsYXMgcGVzdGFcdTAwRjFhc1xuICAgICAgICBjb25zdCB0YWJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0YWItY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3QgdGFiQ29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RhYi1jb250ZW50LWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgLy8gRGVmaW5lIGxvcyB0XHUwMEVEdHVsb3MgZGUgbGFzIHBlc3RhXHUwMEYxYXNcbiAgICAgICAgY29uc3QgdGFiVGl0bGVzID0gWydBY3RpdmFyIE1cdTAwRjNkdWxvcycsICdEaXJlY3RvcmlvcyBTdWJzaXN0ZW1hcycsICdQZXN0YVx1MDBGMWEgMyddO1xuXG4gICAgICAgIC8vIENyZWFyIHBlc3RhXHUwMEYxYXMgeSBjb250ZW5pZG8gZXNwZWNcdTAwRURmaWNvXG4gICAgICAgIHRhYlRpdGxlcy5mb3JFYWNoKCh0aXRsZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIENyZWFyIGJvdG9uZXMgZGUgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIHRhYkJ1dHRvbi50ZXh0Q29udGVudCA9IHRpdGxlO1xuICAgICAgICAgICAgdGFiQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RhYi1saW5rJyk7XG4gICAgICAgICAgICB0YWJCdXR0b24uZGF0YXNldC50YWIgPSBgdGFiJHtpbmRleH1gO1xuICAgICAgICAgICAgdGFiQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLm9wZW5UYWIoYHRhYiR7aW5kZXh9YCk7XG4gICAgICAgICAgICB0YWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQnV0dG9uKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXIgY29udGVuaWRvIGRlIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgY29uc3QgdGFiQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgdGFiQ29udGVudC5pZCA9IGB0YWIke2luZGV4fWA7XG4gICAgICAgICAgICB0YWJDb250ZW50LmNsYXNzTGlzdC5hZGQoJ3RhYi1jb250ZW50Jyk7XG4gICAgICAgICAgICB0YWJDb250ZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHRhYkNvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyBJbmljaWFsbWVudGUgb2N1bHRhciBlbCBjb250ZW5pZG8gZGUgbGEgcGVzdGFcdTAwRjFhLCBleGNlcHRvIGVsIHByaW1lcm9cbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHRhYkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgICAgLy8gQ29udGVuaWRvIHBhcmEgbGEgcHJpbWVyYSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHRhYkNvbnRlbnQpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ1ZlciBBbGlhcyBlbiBlbCBTdGF0dXMgQmFyJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRWxpZ2Ugc2kgZGVzZWFzIHZlciBlbCBBbGlhc2VzIGRlIGxhcyBub3RhcyBlbiBlbCBTdGF0dXMgQmFyLicpXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhcilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9BbGlhc1N0YXR1c0JhciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0YWJDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBNXHUwMEYzZHVsbyBSZWdpc3RybyBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHJlZ2lzdHJvIGRlIHRpZW1wby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGU6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2R1bG9SZWdpc3Ryb1RpZW1wbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcodGFiQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0FjdGl2YXIgTVx1MDBGM2R1bG8gQmFzZSAtIFBydWViYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQWN0aXZhIG8gZGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvIGRlIHBydWViYXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlOiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kdWxvQmFzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZHVsb0Jhc2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7dGV4dDogJ05hdmVnYWRvciBkZSBUYXJlYXMnfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZhciBuYXZlZ2Fkb3IgZGUgdGFyZWFzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdQZXJtaXRlIG5hdmVnYXIgZGlyZWN0YW1lbnRlIGEgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrTmF2aWdhdG9yTW9kdWxlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGFza05hdmlnYXRvck1vZHVsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIFxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbnRlbmlkbyBwYXJhIGxhIHNlZ3VuZGEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBtYW5lamFyIGVsIGNsaWMgZW4gZWwgdFx1MDBFRHR1bG8gZGVsIGJsb3F1ZSBkZXNwbGVnYWJsZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRvZ2dsZUNvbGxhcHNlID0gKGV2ZW50OiB7IHRhcmdldDogeyBuZXh0RWxlbWVudFNpYmxpbmc6IGFueTsgaW5uZXJIVE1MOiBzdHJpbmc7IGdldEF0dHJpYnV0ZTogKGFyZzA6IHN0cmluZykgPT4gc3RyaW5nOyB9OyB9KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRFbGVtZW50ID0gZXZlbnQudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHRFbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuaW5uZXJIVE1MID0gJyYjOTY2MDsgJyArIGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKTsgLy8gQ2FtYmlhIGVsIGljb25vIGEgXCJhYmFqb1wiXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0RWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9ICcmIzk2NTQ7ICcgKyBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyk7IC8vIENhbWJpYSBlbCBpY29ubyBhIFwiZGVyZWNoYVwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkFub3RhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBhbm90YWNpb25lc1RpdGxlID0gdGFiQ29udGVudC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1MjVCNiBTdWJzaXN0ZW1hIGRlIFwiQW5vdGFjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkFub3RhY2lvbmVzXCInKTtcbiAgICAgICAgICAgICAgICBhbm90YWNpb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBhbm90YWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGFub3RhY2lvbmVzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBPY3VsdGEgaW5pY2lhbG1lbnRlIGxvcyBhanVzdGVzXG4gICAgICAgICAgICAgICAgYW5vdGFjaW9uZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhhbm90YWNpb25lc0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBBbm90YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIHRvZGFzIGxhcyBBbm90YWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQW5vdGFjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQW5vdGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGFub3RhY2lvbmVzQ29udGVudCkgLy8gVXNhbW9zIGBibG9nQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdJbmRpY2UgZGUgQW5vdGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGxhcyBBbm90YWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQW5vdGFjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQW5vdGFjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIHVuIGJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiQ2FtcGFcdTAwRjFhc1wiIGVuIGVsIG1cdTAwRTl0b2RvIGRpc3BsYXkoKVxuICAgICAgICAgICAgICAgIC8vIEVzdG8gaXJcdTAwRURhIGVuIGxhIHNlY2NpXHUwMEYzbiBkb25kZSBlc3RcdTAwRTFuIGxvcyBkZW1cdTAwRTFzIHN1YnNpc3RlbWFzXG5cbiAgICAgICAgICAgICAgICBjb25zdCBjYW1wYVx1MDBGMWFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJDYW1wYVx1MDBGMWFzXCInIH0pO1xuICAgICAgICAgICAgICAgIGNhbXBhXHUwMEYxYXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkNhbXBhXHUwMEYxYXNcIicpO1xuICAgICAgICAgICAgICAgIGNhbXBhXHUwMEYxYXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FtcGFcdTAwRjFhc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGNhbXBhXHUwMEYxYXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBjYW1wYVx1MDBGMWFzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY2FtcGFcdTAwRjFhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIENhbXBhXHUwMEYxYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgY2FtcGFcdTAwRjFhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9DYW1wYVx1MDBGMWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9DYW1wYVx1MDBGMWFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjYW1wYVx1MDBGMWFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIENhbXBhXHUwMEYxYXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIGNhbXBhXHUwMEYxYXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQ2FtcGFcdTAwRjFhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfQ2FtcGFcdTAwRjFhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCJcbiAgICAgICAgICAgICAgICBjb25zdCBibG9nVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJBcnRcdTAwRURjdWxvcyBkZSBCbG9nXCInIH0pO1xuICAgICAgICAgICAgICAgIGJsb2dUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkFydFx1MDBFRGN1bG9zIGRlIEJsb2dcIicpO1xuICAgICAgICAgICAgICAgIGJsb2dUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvZ0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGJsb2dDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIE9jdWx0YSBpbmljaWFsbWVudGUgbG9zIGFqdXN0ZXNcbiAgICAgICAgICAgICAgICBibG9nVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoYmxvZ0NvbnRlbnQpIC8vIFVzYW1vcyBgYmxvZ0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBBcnRcdTAwRURjdWxvcyBkZWwgQmxvZycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBhcnRcdTAwRURjdWxvcyBkZWwgYmxvZy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQUJsb2cpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQUJsb2cgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGJsb2dDb250ZW50KSAvLyBVc2Ftb3MgYGJsb2dDb250ZW50YCBlbiBsdWdhciBkZSBgdGFiQ29udGVudGBcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0luZGljZSBkZSBBcnRcdTAwRURjdWxvcyBkZWwgQmxvZycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGFydFx1MDBFRGN1bG9zIGRlbCBibG9nLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9BQmxvZylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9BQmxvZyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIkRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zXCInIH0pO1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJEZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvc1wiJyk7XG4gICAgICAgICAgICAgICAgZGVzYXJyb2xsb3NUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVzYXJyb2xsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBkZXNhcnJvbGxvc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gT2N1bHRhIGluaWNpYWxtZW50ZSBsb3MgYWp1c3Rlc1xuICAgICAgICAgICAgICAgIGRlc2Fycm9sbG9zVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQ29uZmlndXJhY2lcdTAwRjNuIHBhcmEgQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGRlc2Fycm9sbG9zQ29udGVudCkgLy8gVXNhbW9zIGBkZXNhcnJvbGxvc0NvbnRlbnRgIGVuIGx1Z2FyIGRlIGB0YWJDb250ZW50YFxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxvcyBkZXNhcnJvbGxvcyB5IGNcdTAwRjNkaWdvcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRGVzYXJyb2xsb3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRGVzYXJyb2xsb3MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyYWNpXHUwMEYzbiBwYXJhIFx1MDBDRG5kaWNlIGRlIERlc2Fycm9sbG9zIHkgQ1x1MDBGM2RpZ29zXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZGVzYXJyb2xsb3NDb250ZW50KSAvLyBVc2Ftb3MgYGRlc2Fycm9sbG9zQ29udGVudGAgZW4gbHVnYXIgZGUgYHRhYkNvbnRlbnRgXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBEZXNhcnJvbGxvcyB5IENcdTAwRjNkaWdvcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGRlc2Fycm9sbG9zIHkgY1x1MDBGM2RpZ29zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9EZXNhcnJvbGxvcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9EZXNhcnJvbGxvcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJFc3R1ZGlvXCJcbiAgICAgICAgICAgICAgICBjb25zdCBlc3R1ZGlvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJFc3R1ZGlvXCInIH0pO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkVzdHVkaW9cIicpO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgZXN0dWRpb0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGVzdHVkaW9Db250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZXN0dWRpb1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGVzdHVkaW9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBUZW1hcyBkZSBFc3R1ZGlvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHRlbWFzIGRlIGVzdHVkaW8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0VzdHVkaW8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfRXN0dWRpbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZXN0dWRpb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBFc3R1ZGlvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsb3MgdGVtYXMgZGUgZXN0dWRpby4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfRXN0dWRpbylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9Fc3R1ZGlvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIkdURFwiXG4gICAgICAgICAgICAgICAgY29uc3QgZ3RkVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJHVERcIicgfSk7XG4gICAgICAgICAgICAgICAgZ3RkVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJHVERcIicpO1xuICAgICAgICAgICAgICAgIGd0ZFRpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBndGRDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBndGRDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgZ3RkVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQXJjaGl2byBkZSBCYW5kZWphIGRlIEVudHJhZGEuJylcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgQmFuZGVqYSBkZSBlbnRyYWRhIEdURC4nKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9JbmJveClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX0luYm94ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgICAgICAgICAvLyBQcm95ZWN0b3MgR1REXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFByb3llY3RvcyBHVEQnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIHBhcmEgcHJveWVjdG9zIEdURC4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zR1REKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV2aXNpXHUwMEYzbiBTZW1hbmFsXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmV2aXNpb25lcyBTZW1hbmFsZXMgR1REJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoZ3RkQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFJldmlzaW9uZXMgU2VtYW5hbGVzIEdURCcpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgcmV2aXNpb25lcyBzZW1hbmFsZXMgR1RELicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SU0dURCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJMZWN0dXJhXCJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWN0dXJhVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJMZWN0dXJhXCInIH0pO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIkxlY3R1cmFcIicpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVjdHVyYUNvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIGxlY3R1cmFDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGVjdHVyYVRpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIC8vIFNlc2lvbmVzIGRlIExlY3R1cmFcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIHBhcmEgbGFzIHNlc2lvbmVzIGRlIGxlY3R1cmEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFTZXNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhU2VzaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgU2VzaW9uZXMgZGUgTGVjdHVyYScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgcGFyYSBsYXMgc2VzaW9uZXMgZGUgbGVjdHVyYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVNlc2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFTZXNpb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gTGlicm9zIHkgUmVzXHUwMEZBbWVuZXNcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhsZWN0dXJhQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgcGFyYSBsb3MgcmVzXHUwMEZBbWVuZXMgZGUgbGlicm9zLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0xlY3R1cmFSZXN1bWVuZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGxlY3R1cmFDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVzXHUwMEZBbWVuZXMgZGUgTGlicm9zJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBwYXJhIGxvcyByZXNcdTAwRkFtZW5lcyBkZSBsaWJyb3MuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX0xlY3R1cmFSZXN1bWVuZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTGVjdHVyYVJlc3VtZW5lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3VtaWVuZG8gcXVlIGVzdGFtb3MgZGVudHJvIGRlIGlmIChpbmRleCA9PT0gMSkgeyAuLi4gfVxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJNZW50b3JcdTAwRURhc1wiXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNZW50b3JcdTAwRURhc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIk1lbnRvclx1MDBFRGFzXCInKTtcbiAgICAgICAgICAgICAgICBtZW50b3JpYXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVudG9yaWFzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVudG9yaWFzQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1lbnRvcmlhc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lbnRvcmlhc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFNlc2lvbmVzIGRlIE1lbnRvclx1MDBFRGEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcobWVudG9yaWFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIE1lbnRvclx1MDBFRGFzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlbCBcdTAwRURuZGljZSBkZSBsYXMgc2VzaW9uZXMgZGUgbWVudG9yXHUwMEVEYS4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVudG9yaWFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lbnRvcmlhcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gUmVwaXRlIGVsIHBhdHJcdTAwRjNuIHBhcmEgXCJNZXJjYWRvXCIsIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCIsIHkgXCJQYWdvc1wiXG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIk1lcmNhZG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IG1lcmNhZG9UaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIk1lcmNhZG9cIicgfSk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTWVyY2Fkb1wiJyk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJjYWRvQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgbWVyY2Fkb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBtZXJjYWRvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIk1lcmNhZG9cIiwgc2lndWllbmRvIGVsIHBhdHJcdTAwRjNuIGRlIGxhcyBtZW50b3JcdTAwRURhc1xuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBMaXN0YWRvcyBkZSBNZXJjYWRvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIGxpc3RhcyBkZSBtZXJjYWRvLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9NZXJjYWRvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX01lcmNhZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1lcmNhZG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbGlzdGFkb3MgZGUgbWVyY2FkbycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIGxpc3RhZG9zIGRlIG1lcmNhZG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01lcmNhZG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfTWVyY2FkbyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bG9zVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJNXHUwMEYzZHVsb3MgU2lzdGVtYSBHZXN0aVx1MDBGM25cIicgfSk7XG4gICAgICAgICAgICAgICAgbW9kdWxvc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCInKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsb3NDb250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICBtb2R1bG9zQ29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIG1vZHVsb3NUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICAvLyBBZ3JlZ2EgYXF1XHUwMEVEIGxhcyBjb25maWd1cmFjaW9uZXMgZXNwZWNcdTAwRURmaWNhcyBwYXJhIFwiTVx1MDBGM2R1bG9zIFNpc3RlbWEgR2VzdGlcdTAwRjNuXCJcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBNb2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgbVx1MDBGM2R1bG9zIGRlbCBTaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbi4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfTW9kdWxvc1Npc3RlbWEgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKG1vZHVsb3NDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgbG9zIE1vZHVsb3MgZGVsIHNpc3RlbWEgZGUgR2VzdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgbG9zIE1cdTAwRjNkdWxvcyBkZWwgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX01vZHVsb3NTaXN0ZW1hID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJUcmFuc2FjY2lvbmVzIHkgUGFnb3NcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zYWNjaW9uZXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlRyYW5zYWNjaW9uZXNcIicgfSk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwidHJhbnNhY2Npb25lc1wiJyk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCB0cmFuc2FjY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgdHJhbnNhY2Npb25lc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0cmFuc2FjY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgLy8gQWdyZWdhIGFxdVx1MDBFRCBsYXMgY29uZmlndXJhY2lvbmVzIGVzcGVjXHUwMEVEZmljYXMgcGFyYSBcIlBhZ29zXCJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0cmFuc2FjY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTW9kdWxvcyBkZWwgU2lzdGVtYSBkZSBUcmFuc2FjY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIGNvbXByb2JhbnRlcyBkZSBsYXMgdHJhbnNhY2Npb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVHJhbnNhY2Npb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmFuc2FjY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyh0cmFuc2FjY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ1x1MDBDRG5kaWNlIGRlIFRyYW5zYWNjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIFRyYW5zYWNjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1RyYW5zYWNjaW9uZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfVHJhbnNhY2Npb25lcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEJsb3F1ZSBkZXNwbGVnYWJsZSBwYXJhIFwiUHJlc2VudGFjaW9uZXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNlbnRhY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQcmVzZW50YWNpb25lc1wiJyB9KTtcbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUHJlc2VudGFjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHByZXNlbnRhY2lvbmVzVGl0bGUuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXNlbnRhY2lvbmVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHJlc2VudGFjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwcmVzZW50YWNpb25lc1RpdGxlLm9uY2xpY2sgPSB0b2dnbGVDb2xsYXBzZTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHByZXNlbnRhY2lvbmVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgTm90YXMgZGUgUHJlc2VudGFjaW9uZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsYXMgbm90YXMgZGUgcHJlc2VudGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1ByZXNlbnRhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1ByZXNlbnRhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcmVzZW50YWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcmVzZW50YWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHJlc2VudGFjaW9uZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1ByZXNlbnRhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1ByZXNlbnRhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlByb3llY3RvcyBkZSBRXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyB9KTtcbiAgICAgICAgICAgICAgICBwcm95ZWN0b3NRVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJQcm95ZWN0b3MgZGUgUVwiJyk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUVRpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b3NRQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcHJveWVjdG9zUUNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHByb3llY3Rvc1FUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhwcm95ZWN0b3NRQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUHJveWVjdG9zIGRlIFEnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcHJveWVjdG9zIGRlIFEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc1EpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUHJveWVjdG9zUSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHJveWVjdG9zUUNvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBQcm95ZWN0b3MgZGUgUScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHJveWVjdG9zIGRlIFEuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1Byb3llY3Rvc1EpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHJveWVjdG9zUSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIGZ1bmNpXHUwMEYzbiB0b2dnbGVDb2xsYXBzZSBlc3RcdTAwRTEgZGVmaW5pZGEgY29tbyBzZSBpbmRpY1x1MDBGMyBhbnRlcmlvcm1lbnRlLlxuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJQdWJsaWNhY2lvbmVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwdWJsaWNhY2lvbmVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJQdWJsaWNhY2lvbmVzXCInIH0pO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNUaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlB1YmxpY2FjaW9uZXNcIicpO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNUaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljYWNpb25lc0NvbnRlbnQgPSB0YWJDb250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgICAgIHB1YmxpY2FjaW9uZXNDb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEluaWNpYWxtZW50ZSBvY3VsdG9cbiAgICAgICAgICAgICAgICBwdWJsaWNhY2lvbmVzVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocHVibGljYWNpb25lc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdDYXJwZXRhIGRlIFBpZXphcyBkZSBQdWJsaWNhY2lvbmVzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbGFzIHBpZXphcyBkZSBwdWJsaWNhY2lvbmVzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9QdWJsaWNhY2lvbmVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1B1YmxpY2FjaW9uZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHB1YmxpY2FjaW9uZXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUHVibGljYWNpb25lcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcHVibGljYWNpb25lcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUHVibGljYWNpb25lcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9QdWJsaWNhY2lvbmVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlY2V0YXNcIlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2V0YXNUaXRsZSA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTI1QjYgU3Vic2lzdGVtYSBkZSBcIlJlY2V0YXNcIicgfSk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc1RpdGxlLnNldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScsICdTdWJzaXN0ZW1hIGRlIFwiUmVjZXRhc1wiJyk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWNldGFzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVjZXRhc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlY2V0YXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWNldGFzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVjZXRhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZSBsYSBjYXJwZXRhIGRvbmRlIHNlIGd1YXJkYXJcdTAwRTFuIGxhcyByZWNldGFzLicpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0OiB7IHNldFZhbHVlOiAoYXJnMDogYW55KSA9PiB7ICgpOiBhbnk7IG5ldygpOiBhbnk7IG9uQ2hhbmdlOiB7IChhcmcwOiAodmFsdWU6IGFueSkgPT4gUHJvbWlzZTx2b2lkPik6IGFueTsgbmV3KCk6IGFueTsgfTsgfTsgfSkgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWNldGFzKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY2V0YXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKHJlY2V0YXNDb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnXHUwMENEbmRpY2UgZGUgUmVjZXRhcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcmVjZXRhcy4nKVxuICAgICAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogeyBzZXRWYWx1ZTogKGFyZzA6IGFueSkgPT4geyAoKTogYW55OyBuZXcoKTogYW55OyBvbkNoYW5nZTogeyAoYXJnMDogKHZhbHVlOiBhbnkpID0+IFByb21pc2U8dm9pZD4pOiBhbnk7IG5ldygpOiBhbnk7IH07IH07IH0pID0+IHRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjZXRhcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGljZV9SZWNldGFzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICAvLyBCbG9xdWUgZGVzcGxlZ2FibGUgcGFyYSBcIlJlY3Vyc29zIFJlY3VycmVudGVzXCJcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyB9KTtcbiAgICAgICAgICAgICAgICByZWN1cnNvc1JlY3VycmVudGVzVGl0bGUuc2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJywgJ1N1YnNpc3RlbWEgZGUgXCJSZWN1cnNvcyBSZWN1cnJlbnRlc1wiJyk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc1RpdGxlLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBjb25zdCByZWN1cnNvc1JlY3VycmVudGVzQ29udGVudCA9IHRhYkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICAgICAgcmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlY3Vyc29zUmVjdXJyZW50ZXNUaXRsZS5vbmNsaWNrID0gdG9nZ2xlQ29sbGFwc2U7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWN1cnNvc1JlY3VycmVudGVzQ29udGVudClcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ0NhcnBldGEgZGUgUmVjdXJzb3MgUmVjdXJyZW50ZXMnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGUgbGEgY2FycGV0YSBkb25kZSBzZSBndWFyZGFyXHUwMEUxbiBsb3MgcmVjdXJzb3MgcmVjdXJyZW50ZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlY3Vyc29zUmVjdXJyZW50ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVjdXJzb3NSZWN1cnJlbnRlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVjdXJzb3NSZWN1cnJlbnRlc0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWN1cnNvcyBSZWN1cnJlbnRlcycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdFc3RhYmxlY2UgbGEgcnV0YSBkZWwgXHUwMEVEbmRpY2UgZGUgcmVjdXJzb3MgcmVjdXJyZW50ZXMuJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXMpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRpY2VfUmVjdXJzb3NSZWN1cnJlbnRlcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQmxvcXVlIGRlc3BsZWdhYmxlIHBhcmEgXCJSZWdpc3RybyBUaWVtcG9cIlxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvVGllbXBvVGl0bGUgPSB0YWJDb250ZW50LmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHUyNUI2IFN1YnNpc3RlbWEgZGUgXCJSZWdpc3RybyBUaWVtcG9cIicgfSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9UaXRsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCAnU3Vic2lzdGVtYSBkZSBcIlJlZ2lzdHJvIFRpZW1wb1wiJyk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9UaWVtcG9UaXRsZS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaXN0cm9UaWVtcG9Db250ZW50ID0gdGFiQ29udGVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgICAgICByZWdpc3Ryb1RpZW1wb0NvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSW5pY2lhbG1lbnRlIG9jdWx0b1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvVGllbXBvVGl0bGUub25jbGljayA9IHRvZ2dsZUNvbGxhcHNlO1xuXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcocmVnaXN0cm9UaWVtcG9Db250ZW50KVxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnQ2FycGV0YSBkZSBSZWdpc3Ryb3MgZGUgVGllbXBvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0VzdGFibGVjZSBsYSBydXRhIGRlIGxhIGNhcnBldGEgZG9uZGUgc2UgZ3VhcmRhclx1MDBFMW4gbG9zIHJlZ2lzdHJvcyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhyZWdpc3Ryb1RpZW1wb0NvbnRlbnQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdcdTAwQ0RuZGljZSBkZSBSZWdpc3RybyBkZSBUaWVtcG8nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnRXN0YWJsZWNlIGxhIHJ1dGEgZGVsIFx1MDBFRG5kaWNlIGRlIHJlZ2lzdHJvcyBkZSB0aWVtcG8uJylcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQ6IHsgc2V0VmFsdWU6IChhcmcwOiBhbnkpID0+IHsgKCk6IGFueTsgbmV3KCk6IGFueTsgb25DaGFuZ2U6IHsgKGFyZzA6ICh2YWx1ZTogYW55KSA9PiBQcm9taXNlPHZvaWQ+KTogYW55OyBuZXcoKTogYW55OyB9OyB9OyB9KSA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cblxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG5cblxuXG4gICAgICAgICAgICAvLyBDb250ZW5pZG8gcGFyYSBsYSB0ZXJjZXJhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUxhYmVsID0gdGFiQ29udGVudC5jcmVhdGVFbCgnbGFiZWwnKTtcbiAgICAgICAgICAgICAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSAnRmVjaGEnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVJbnB1dCA9IHRhYkNvbnRlbnQuY3JlYXRlRWwoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgZGF0ZUlucHV0LnR5cGUgPSAnZGF0ZXRpbWUtbG9jYWwnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zIENTUyBwYXJhIGVzcGFjaWFkbyB5IG9yZ2FuaXphY2lcdTAwRjNuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdzdHlsZScsIHtcbiAgICAgICAgICAgIHRleHQ6IGBcbiAgICAgICAgICAgICAgICAudGFiLWNvbnRlbnQgeyBkaXNwbGF5OiBub25lOyBwYWRkaW5nLXRvcDogMjBweDsgfSAvLyBBXHUwMEYxYWRpZG8gcGFkZGluZy10b3AgcGFyYSBlbCBlc3BhY2lvXG4gICAgICAgICAgICAgICAgLnRhYi1jb250ZW50LmFjdGl2ZSB7IGRpc3BsYXk6IGJsb2NrOyB9XG4gICAgICAgICAgICAgICAgLnRhYi1saW5rIHsgY3Vyc29yOiBwb2ludGVyOyBwYWRkaW5nOiA1cHggMTBweDsgbWFyZ2luLXJpZ2h0OiA1cHg7IGJhY2tncm91bmQ6ICNmMGYwZjA7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsgfVxuICAgICAgICAgICAgICAgIC50YWItbGluay5hY3RpdmUgeyBiYWNrZ3JvdW5kOiAjZTBlMGUwOyB9XG4gICAgICAgICAgICAgICAgLnNldHRpbmctaXRlbSB7IG1hcmdpbi1ib3R0b206IDEwcHg7IH1cbiAgICAgICAgICAgIGBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNhbWJpYXIgbGEgcGVzdGFcdTAwRjFhIGFjdGl2YVxuICAgICAgICB0aGlzLm9wZW5UYWIgPSAodGFiTmFtZSkgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1jb250ZW50JykuZm9yRWFjaChjb250ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRhYi1saW5rJykuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgICAgICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWJDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFiTmFtZSk7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVUYWJMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtdGFiPVwiJHt0YWJOYW1lfVwiXWApO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZVRhYkNvbnRlbnQpIGFjdGl2ZVRhYkNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBpZiAoYWN0aXZlVGFiTGluaykgYWN0aXZlVGFiTGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFicmlyIGxhIHByaW1lcmEgcGVzdGFcdTAwRjFhIHBvciBkZWZlY3RvXG4gICAgICAgIHRoaXMub3BlblRhYigndGFiMCcpO1xuICAgIH1cbiAgICBvcGVuVGFiKGFyZzA6IHN0cmluZyk6IGFueSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC4nKTtcbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2R1bG9CYXNlIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcbiAgICBtb2R1bG9CYXNlOiBNb2R1bG9CYXNlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMubW9kdWxvQmFzZSkgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgYWN0aXZvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXR1c0JhcikgcmV0dXJuOyAvLyBTaSB5YSBlc3RcdTAwRTEgZGVzYWN0aXZhZG8sIG5vIGhhY2VyIG5hZGFcbiAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICBcbiAgICB9XG5cblxufSIsICJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhckNhcnBldGEocnV0YUNhcnBldGE6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBjYXJwZXRhRXhpc3RlbnRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChydXRhQ2FycGV0YSk7XG4gICAgICAgICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICcke3J1dGFDYXJwZXRhfScgeWEgZXhpc3RlLmApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICAvLyBDcmVhIGxhIGNhcnBldGFcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIocnV0YUNhcnBldGEpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7cnV0YUNhcnBldGF9JyBjcmVhZGEgZXhpdG9zYW1lbnRlLmApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgYWwgY3JlYXIgbGEgY2FycGV0YSAnJHtydXRhQ2FycGV0YX0nOmAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJQbGFudGlsbGEoY29udGVuaWRvOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlPiB7XG4gICAgLy8gRGVmaW5lIGxhIHJ1dGEgeSBlbCBub21icmUgZGVsIGFyY2hpdm8gdGVtcG9yYWxcbiAgICBjb25zdCBmb2xkZXIgPSAnUGxhbnRpbGxhcyc7XG4gICAgbGV0IGZpbGVuYW1lID0gXCJBcmNoaXZvIERlIFBsYW50aWxsYVwiXG4gICAgbGV0IHBhdGhUZW1wb3JhbCA9IGZvbGRlciArIFwiL1wiICsgZmlsZW5hbWUgKyBcIi5tZFwiO1xuXG4gICAgLy8gQ3JlYSBlbCBhcmNoaXZvIGVuIGxhIGJcdTAwRjN2ZWRhIHkgZ3VhcmRhIGVsIGFyY2hpdm8gY3JlYWRvIGVuIHVuYSB2YXJpYWJsZVxuICAgIGNvbnN0IGFyY2hpdm9DcmVhZG86IFRGaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShwYXRoVGVtcG9yYWwsIGNvbnRlbmlkbyk7XG5cbiAgICAvLyBBcXVcdTAwRUQgbmVjZXNpdGFyXHUwMEVEYXMgcHJvY2VzYXIgZWwgYXJjaGl2byBjb24gVGVtcGxhdGVyIHNpIGVzIG5lY2VzYXJpb1xuICAgIC8vIEVzdG8gZGVwZW5kZSBkZSBjXHUwMEYzbW8gVGVtcGxhdGVyIGV4cG9uZ2Egc3UgZnVuY2lvbmFsaWRhZCBhIG90cm9zIHBsdWdpbnNcbiAgICAvLyBQb3IgZWplbXBsbywgc2kgVGVtcGxhdGVyIHRpZW5lIHVuIG1cdTAwRTl0b2RvIHBhcmEgcHJvY2VzYXIgYXJjaGl2b3MsIGxvIHVzYXJcdTAwRURhcyBhcXVcdTAwRURcblxuICAgIC8vIChPcGNpb25hbCkgRWxpbWluYSBlbCBhcmNoaXZvIGRlc3B1XHUwMEU5cyBkZSBwcm9jZXNhcmxvIHNpIG5vIGRlc2VhcyBjb25zZXJ2YXJsb1xuICAgIC8vIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoYXJjaGl2b0NyZWFkbyk7XG5cbiAgICAvLyBSZXRvcm5hIGVsIGFyY2hpdm8gY3JlYWRvXG4gICAgcmV0dXJuIGFyY2hpdm9DcmVhZG87XG59XG4iLCAiaW1wb3J0IHtNb2RhbH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5jbGFzcyBGaWxlTGlua01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBsaWNhciBlc3RpbG9zIGZsZXhib3ggcGFyYSBjZW50cmFyIGNvbnRlbmlkb1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmZsZXhEaXJlY3Rpb24gPSAnY29sdW1uJztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5oZWlnaHQgPSAnNTAlJzsgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCBtb2RhbCBvY3VwZSB0b2RvIGVsIGVzcGFjaW8gZGlzcG9uaWJsZVxuICAgICAgICBcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdJbnNlcnRhciBlbCBsaW5rIGRlIHVuIGFyY2hpdm8uJyxcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICd0ZXh0LWFsaWduOiBjZW50ZXI7JyB9ICAvLyBBc2VndXJhIHF1ZSBlbCB0ZXh0byBkZWwgdFx1MDBFRHR1bG8gZXN0XHUwMEU5IGNlbnRyYWRvIHNpIGVzIG1cdTAwRTFzIGxhcmdvIHF1ZSB1bmEgbFx1MDBFRG5lYVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRlbmVkb3IgcGFyYSBlbCBpbnB1dCB5IGVsIGJvdFx1MDBGM25cbiAgICAgICAgY29uc3QgaW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLnN0eWxlLm1hcmdpbiA9ICcxMHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIElucHV0IGRlIGFyY2hpdm8gb2N1bHRvXG4gICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2ZpbGUnIH0pO1xuICAgICAgICBmaWxlSW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBzZWxlY2Npb25hciBhcmNoaXZvXG4gICAgICAgIGNvbnN0IGZpbGVCdXR0b24gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1NlbGVjY2lvbmUgc3UgYXJjaGl2bycsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzVweCAxMHB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxNnB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnNXB4JztcbiAgICAgICAgZmlsZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGZpbGVCdXR0b24ub25jbGljayA9ICgpID0+IGZpbGVJbnB1dC5jbGljaygpO1xuICAgICAgICBcbiAgICAgICAgLy8gRXZlbnRvIHBhcmEgY3VhbmRvIHNlIHNlbGVjY2lvbmEgdW4gYXJjaGl2b1xuICAgICAgICBmaWxlSW5wdXQub25jaGFuZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdO1xuICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydExpbmtBdEN1cnNvcihmaWxlLnBhdGgsIGZpbGUubmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBpbnNlcnRMaW5rQXRDdXJzb3IoZmlsZVBhdGgsIGZpbGVOYW1lKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAgICAgaWYgKGFjdGl2ZUxlYWYpIHtcbiAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZUxlYWYudmlldy5zb3VyY2VNb2RlLmNtRWRpdG9yO1xuICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBgWyR7ZmlsZU5hbWV9XSg8ZmlsZTovLyR7ZmlsZVBhdGh9PilgO1xuICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShsaW5rVGV4dCwgY3Vyc29yKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIEZ1bmNpXHUwMEYzbiBwYXJhIGFicmlyIGVsIG1vZGFsIHBlcnNvbmFsaXphZG9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRGaWxlTGluayhhcHApIHtcbiAgICBuZXcgRmlsZUxpbmtNb2RhbChhcHApLm9wZW4oKTtcbn1cbiIsICJpbXBvcnQge2NyZWFyQ2FycGV0YX0gZnJvbSBcIi4vdXRpbHMvY3JlYXJDYXJwZXRhXCJcbmltcG9ydCB7Y3JlYXJQbGFudGlsbGF9IGZyb20gXCIuL3V0aWxzL2NyZWFyUGxhbnRpbGxhXCJcbmltcG9ydCB7aW5zZXJ0RmlsZUxpbmt9IGZyb20gXCIuL3V0aWxzL2ZpbGVMaW5rTW9kYWxcIlxuaW1wb3J0IHtURmlsZSwgVEZvbGRlcn0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7Y3JlYXRlTm90ZUZyb21UZW1wbGF0ZX0gZnJvbSBcIi4vdXRpbHMvY3JlYXRlTm90ZUZyb21UZW1wbGF0ZVwiXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8xID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJDcmVhY2lvbi1DYXJwZXRhXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYWNpXHUwMEYzbiBkZSBDYXJwZXRhXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgYXdhaXQgY3JlYXJDYXJwZXRhKCdNaSBDYXJwZXRhIGRlIHBsdWdpbicpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIucHVzaChjb21hbmRvMS5pZCk7XG5cblxuICAgIGNvbnN0IGNvbWFuZG8zID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJjcmVhci1hcmNoaXZvLXRlbXBsYXRlXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYXIgYXJjaGl2byBkZXNkZSB0ZW1wbGF0ZVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwbHVnaW5JZCA9ICd0ZW1wbGF0ZXItb2JzaWRpYW4nO1xuICAgICAgICAgICAgY29uc3QgaXNQbHVnaW5JbnN0YWxsZWQgPSBwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKHBsdWdpbklkKTtcbiAgICAgICAgICAgIC8vY29uc3QgdGVtcGxhdGVyUGx1Z2luID0gcGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbcGx1Z2luSWRdO1xuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIHBsYW50aWxsYSBjb21vIFRGaWxlXG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBcIlBsYW50aWxsYXMvQW5vdGFjaW9uZXMvUGx0IC0gQW5vdGFjaW9uZXMubWRcIjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW50ZW50YSBvYnRlbmVyIGxhIGNhcnBldGEgY29tbyBURm9sZGVyXG4gICAgICAgICAgICBsZXQgZm9sZGVyT2JqID0gcGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghKGZvbGRlck9iaiBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkxhIGNhcnBldGEgZXNwZWNpZmljYWRhIG5vIGV4aXN0ZSBvIG5vIGVzIHVuYSBjYXJwZXRhLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNhbGlyIHNpIG5vIHNlIGVuY3VlbnRyYSBsYSBjYXJwZXRhIG8gbm8gZXMgdW5hIGNhcnBldGFcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gXCJ0b0RlZmluZVwiXG4gICAgICAgICAgICBsZXQgb3Blbk5vdGUgPSB0cnVlXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGRlYnVnZ2VyXG4gICAgICAgICAgICBjb25zdCBhcmNoaXZvID0gYXdhaXQgY3JlYXRlTm90ZUZyb21UZW1wbGF0ZShwbHVnaW4sIHRlbXBsYXRlLCBmb2xkZXJPYmosIGZpbGVOYW1lLCBvcGVuTm90ZSk7XG5cbiAgICAgICAgICAgIGlmICghYXJjaGl2bykge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBwdWRvIGNyZWFyIGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG8zLmlkKTtcblxuXG4gICAgY29uc3QgY29tYW5kbzQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcImNyZWFyLWxpbmstQXJjaGl2b1wiLFxuICAgICAgICBuYW1lOiBcIkNyZWFyIHVuIGxpbmsgYSBhcmNoaXZvIGRlbCBEaXNjby5cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpbnNlcnRGaWxlTGluayhhcHApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIC8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNNQi5wdXNoKGNvbWFuZG80LmlkKTtcblxuXG4gICAgLy8gQ3JlYWNpXHUwMEYzbiB5IHJlZ2lzdHJvIGRlbCBjb21hbmRvLlxuICAgIGNvbnN0IGNvbWFuZG81ID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJhYnJpci1ub3RhLWFjdGl2YVwiLFxuICAgICAgICBuYW1lOiBcIkFicmlyIE5vdGEgQWN0aXZhXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgIFxuICAgICAgIC8vIEFzZWd1cmEgcXVlIG5vIGhheWEgZHVwbGljYWRvcyBkZSBsYSB2aXN0YS5cbiAgICAgICBhcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShcInZpc3RhLW5vdGEtYWN0aXZhXCIpO1xuXG4gICAgICAgLy8gQWJyZSBsYSB2aXN0YSBlbiB1bmEgbnVldmEgaG9qYS5cbiAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKS5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICB0eXBlOiBcInZpc3RhLW5vdGEtYWN0aXZhXCIsXG4gICAgICAgfSk7XG5cbiAgICAgICAvLyBBY3RpdmEgbGEgbnVldmEgaG9qYSBwYXJhIGVsIHVzdWFyaW8uXG4gICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuICAgICAgICAgICBhcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcInZpc3RhLW5vdGEtYWN0aXZhXCIpWzBdXG4gICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLnB1c2goY29tYW5kbzUuaWQpO1xuXG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIFxuICAgIGlmICghcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzTUIpIHJldHVybjtcbiAgICAvLyBFamVtcGxvIGRlIGNcdTAwRjNtbyBwb2RyXHUwMEVEYXMgbWFuZWphciBsYSBcImRlc2FjdGl2YWNpXHUwMEYzblwiIGRlIGNvbWFuZG9zLlxuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc01CLmZvckVhY2goY29tbWFuZElkID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21tYW5kKSB7XG4gICAgICAgICAgICAvLyBTb2JyZXNjcmliaXIgZWwgY2FsbGJhY2sgZGVsIGNvbWFuZG8gcGFyYSBxdWUgbm8gaGFnYSBuYWRhLlxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgICAgICAvLyBPIHNpbXBsZW1lbnRlIGVsaW1pbmFyIGVsIGNhbGxiYWNrIHNpIGVzbyBzZSBhanVzdGEgYSB0dSBsXHUwMEYzZ2ljYSBkZSBhcGxpY2FjaVx1MDBGM24uXG4gICAgICAgICAgICAvLyBkZWxldGUgY29tbWFuZC5jYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuIiwgImltcG9ydCB7VEZpbGUsIFRGb2xkZXJ9IGZyb20gXCJvYnNpZGlhblwiXG4vKipcbiAqIENyZWEgdW5hIG51ZXZhIG5vdGEgYSBwYXJ0aXIgZGUgdW5hIHBsYW50aWxsYSB1dGlsaXphbmRvIGVsIHBsdWdpbiBUZW1wbGF0ZXIuXG4gKiBAcGFyYW0gdGVtcGxhdGVyUGx1Z2luIFJlZmVyZW5jaWEgYWwgcGx1Z2luIFRlbXBsYXRlci5cbiAqIEBwYXJhbSB0ZW1wbGF0ZSBMYSBwbGFudGlsbGEgYSB1dGlsaXphciwgcHVlZGUgc2VyIHVuIFRGaWxlIG8gZWwgcGF0aCBjb21vIHN0cmluZy5cbiAqIEBwYXJhbSBmb2xkZXIgRWwgZm9sZGVyIGRvbmRlIHNlIGNyZWFyXHUwMEUxIGxhIG51ZXZhIG5vdGEuIE9wY2lvbmFsLlxuICogQHBhcmFtIGZpbGVuYW1lIEVsIG5vbWJyZSBkZWwgYXJjaGl2byBkZSBsYSBudWV2YSBub3RhLiBPcGNpb25hbC5cbiAqIEBwYXJhbSBvcGVuTmV3Tm90ZSBTaSBzZSBkZWJlIGFicmlyIGxhIG51ZXZhIG5vdGEgdHJhcyBjcmVhcmxhLiBQb3IgZGVmZWN0byBlcyB0cnVlLlxuICogQHJldHVybnMgUHJvbWlzZSBxdWUgcmVzdWVsdmUgYSBURmlsZSBzaSBsYSBub3RhIGZ1ZSBjcmVhZGEsIHVuZGVmaW5lZCBlbiBjYXNvIGNvbnRyYXJpby5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZU5vdGVGcm9tVGVtcGxhdGUoXG4gICAgcGx1Z2luOiBQbHVnaW4sIC8vIEVzdGEgZXMgdW5hIHN1cG9zaWNpXHUwMEYzbiwgbmVjZXNpdGFyXHUwMEUxcyBhanVzdGFyIHNlZ1x1MDBGQW4gY1x1MDBGM21vIGFjY2VkYXMgYSBUZW1wbGF0ZXIgZW4gdHUgcGx1Z2luXG4gICAgdGVtcGxhdGU6IFRGaWxlIHwgc3RyaW5nLFxuICAgIGZvbGRlcj86IFRGb2xkZXIsXG4gICAgZmlsZW5hbWU/OiBzdHJpbmcsXG4gICAgb3Blbk5ld05vdGU6IGJvb2xlYW4gPSB0cnVlXG4pOiBQcm9taXNlPFRGaWxlIHwgdW5kZWZpbmVkPiB7XG4gICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZWwgcGx1Z2luIFRlbXBsYXRlciBlc3RcdTAwRTEgaW5zdGFsYWRvIHkgaGFiaWxpdGFkb1xuICAgIGlmICghcGx1Z2luIHx8ICFwbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKU1xuICAgIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zWyd0ZW1wbGF0ZXItb2JzaWRpYW4nXTtcbiAgICBjb25zdCB0cCA9IHRlbXBsYXRlclBsdWdpbi50ZW1wbGF0ZXIuY3VycmVudF9mdW5jdGlvbnNfb2JqZWN0O1xuICAgIFxuXG4gICAgaWYgKCF0cCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgIHJldHVybjtcbn1cbiAgICAvLyB0ZW1wbGF0ZUZpbGUgcHVlZGUgc2VyIHVuIHN0cmluZyBvIGVsIHRmaWxlIG9idGVuaWRvIGRlIGVzdGEgbWFuZXJhIG8gY29uIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoKVxuICAgIGRlYnVnZ2VyXG4gICAgbGV0IHRlbXBsYXRlRmlsZSA9IHRwLmZpbGUuZmluZF90ZmlsZSh0ZW1wbGF0ZSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3Tm90ZSA9IGF3YWl0IHRwLmZpbGUuY3JlYXRlX25ldyh0ZW1wbGF0ZUZpbGUsIGZpbGVuYW1lLCBvcGVuTmV3Tm90ZSwgZm9sZGVyKTtcbiAgICAgICAgcmV0dXJuIG5ld05vdGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgbGEgbm90YSBkZXNkZSBsYSBwbGFudGlsbGE6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufSIsICJpbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyUmliYm9uTWVudSB9IGZyb20gXCIuL3VpL3JpYmJvbkJ1dHRvblwiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmF0ZU1vZHVsb0J1c3F1ZWRhQXZhbnphZGEocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luKTtcbn0iLCAiaW1wb3J0IHsgQXBwLCBNZW51LCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTZWFyY2hBcmVhc0RlVmlkYU1vZGFsIH0gZnJvbSBcIi4vbW9kYWxcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgdGVuZXIgZWwgaW1wb3J0IGNvcnJlY3RvIHBhcmEgdHUgbW9kYWxcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyUmliYm9uTWVudShwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIC8vIEVzdGUgZXMgZWwgXHUwMEVEY29ubyBkZWwgbWVuXHUwMEZBIGVuIGVsIHJpYmJvbiwgY2FtYmlhIFwiZGljZVwiIHBvciBlbCBcdTAwRURjb25vIHF1ZSBwcmVmaWVyYXNcbiAgICBwbHVnaW4uYWRkUmliYm9uSWNvbihcImZvbGRlci1zZWFyY2gtMlwiLCBcIkJcdTAwRkFzcXVlZGEgQXZhbnphZGFcIiwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgIC8vIENyZWFyIGVsIG1lblx1MDBGQSBhbCBoYWNlciBjbGljIGVuIGVsIFx1MDBFRGNvbm9cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KHBsdWdpbi5hcHApO1xuXG4gICAgICAgIC8vIEFncmVnYXIgb3BjaW9uZXMgYWwgbWVuXHUwMEZBXG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBWaWRhXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJcdTAwQzFyZWFzIGRlIFZpZGFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvcnJlY2NpXHUwMEYzbjogQXNlZ1x1MDBGQXJhdGUgZGUgYWJyaXIgZWwgbW9kYWwgY29ycmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICBuZXcgU2VhcmNoQXJlYXNEZVZpZGFNb2RhbChwbHVnaW4uYXBwLCAoZXN0YWRvU2VsZWNjaW9uYWRvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBzZWxlY2Npb25hZG86XCIsIGVzdGFkb1NlbGVjY2lvbmFkbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgcHVlZGVzIGNvbnRpbnVhciBjb24gbGEgbFx1MDBGM2dpY2EgcGFyYSBtYW5lamFyIGVsIGVzdGFkbyBzZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICAgICAgfSkub3BlbigpOyAvLyBDb3JyZWdpZG86IEFcdTAwRjFhZGlkbyAub3BlbigpIHBhcmEgYWJyaXIgZWwgbW9kYWxcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiXHUwMEMxcmVhcyBkZSBJbnRlclx1MDBFOXNcIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlx1MDBDMXJlYXMgZGUgSW50ZXJcdTAwRTlzXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBBbm90YWNpXHUwMEYzblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiQW5vdGFjaVx1MDBGM25cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJBbm90YWNpXHUwMEYzblwiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQW5vdGFjaVx1MDBGM25cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIFJlY3Vyc28gUmVjdXJyZW50ZVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVjdXJzbyBSZWN1cnJlbnRlXCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBsYSBiXHUwMEZBc3F1ZWRhIGRlIFwiUmVjdXJzbyBSZWN1cnJlbnRlXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWN1cnNvIFJlY3VycmVudGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIEdlc3RpXHUwMEYzbiBEaWFyaWFcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIkdlc3RpXHUwMEYzbiBEaWFyaWFcIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIGxhIGJcdTAwRkFzcXVlZGEgZGUgXCJHZXN0aVx1MDBGM24gRGlhcmlhXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJHZXN0aVx1MDBGM24gRGlhcmlhXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBSZWdpc3RybyBkZSBUaWVtcG9cbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZShcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgbGEgYlx1MDBGQXNxdWVkYSBkZSBcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm8gZGUgVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBNb3N0cmFyIGVsIG1lblx1MDBGQSBlbiBsYSBwb3NpY2lcdTAwRjNuIGRlbCBjdXJzb3JcbiAgICAgICAgbWVudS5zaG93QXRQb3NpdGlvbih7IHg6IGV2ZW50LnBhZ2VYLCB5OiBldmVudC5wYWdlWSB9KTtcbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRnV6enlOb3RlU3VnZ2VzdGVyIH0gZnJvbSBcIi4uL3NlYXJjaC9GdXp6eU5vdGVTdWdnZXN0ZXJcIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIGxhIHJ1dGEgZGUgaW1wb3J0YWNpXHUwMEYzbiBzZWEgY29ycmVjdGFcblxuZXhwb3J0IGNsYXNzIFNlYXJjaEFyZWFzRGVWaWRhTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgb25TZWxlY3RFc3RhZG86IChlc3RhZG86IHN0cmluZykgPT4gdm9pZDtcbiAgICBlc3RhZG9TZWxlY2Npb25hZG86IHN0cmluZyA9IFwiXHVEODNEXHVERkUyXCI7IC8vIEVzdGFkbyBwb3IgZGVmZWN0byBjb21vIGVtb2ppIGRpcmVjdGFtZW50ZVxuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG9uU2VsZWN0RXN0YWRvOiAoZXN0YWRvOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblNlbGVjdEVzdGFkbyA9IG9uU2VsZWN0RXN0YWRvO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgbGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQnVzY2FyIFx1MDBDMXJlYXMgZGUgVmlkYVwiIH0pO1xuXG4gICAgICAgIC8vIFVzYW5kbyBTZXR0aW5nIHBhcmEgY3JlYXIgZWwgRHJvcGRvd25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJFc3RhZG9cIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiRWxpZ2UgZWwgZXN0YWRvOlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb25zKHsgXCJcdUQ4M0RcdURGRTJcIjogXCJWZXJkZVwiLCBcIlx1RDgzRFx1REQzNVwiOiBcIkF6dWxcIiwgXCJcdUQ4M0RcdURGRTFcIjogXCJBbWFyaWxsb1wiLCBcIlx1RDgzRFx1REQzNFwiOiBcIlJvam9cIiB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLmVzdGFkb1NlbGVjY2lvbmFkbyk7IC8vIEVzdGFibGVjZSBlbCB2YWxvciBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lc3RhZG9TZWxlY2Npb25hZG8gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gZGUgYlx1MDBGQXNxdWVkYVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoXCJCdXNjYXJcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90YXNGaWx0cmFkYXMgPSBhd2FpdCB0aGlzLmZpbHRyYXJOb3Rhc1BvckVzdGFkb1lEaXJlY3RvcmlvKFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsIHRoaXMuZXN0YWRvU2VsZWNjaW9uYWRvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm90YXMgZmlsdHJhZGFzOlwiLCBub3Rhc0ZpbHRyYWRhcy5sZW5ndGgsIG5vdGFzRmlsdHJhZGFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBGdXp6eU5vdGVTdWdnZXN0ZXIodGhpcy5hcHAsIG5vdGFzRmlsdHJhZGFzKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBmaWx0cmFyIG5vdGFzIHBvciBlc3RhZG8geSBkaXJlY3RvcmlvXG4gICAgYXN5bmMgZmlsdHJhck5vdGFzUG9yRXN0YWRvWURpcmVjdG9yaW8oZGlyZWN0b3Jpbzogc3RyaW5nLCBlc3RhZG86IHN0cmluZyk6IFByb21pc2U8VEZpbGVbXT4ge1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgbGV0IG5vdGFzRmlsdHJhZGFzID0gYXJjaGl2b3MuZmlsdGVyKGFyY2hpdm8gPT4ge1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IGFyY2hpdm8ucGF0aDtcbiAgICAgICAgICAgIGlmICghcGF0aC5zdGFydHNXaXRoKGRpcmVjdG9yaW8pKSByZXR1cm4gZmFsc2U7IC8vIEZpbHRyYSBwb3IgZGlyZWN0b3Jpb1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkYXRvcyA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFyY2hpdm8pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHByb2Nlc2FkbzpcIiwgYXJjaGl2by5wYXRoKTtcbiAgICAgICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBlbCBlc3RhZG8gZGVsIGZyb250bWF0dGVyIGNvaW5jaWRlIGNvbiBlbCBlc3RhZG8gcHJvcG9yY2lvbmFkb1xuICAgICAgICAgICAgaWYgKGRhdG9zLmZyb250bWF0dGVyICYmIGRhdG9zLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gZXN0YWRvKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGluY2x1aWRvOlwiLCBhcmNoaXZvLnBhdGgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gT3JkZW5hIGxhcyBub3RhcyBmaWx0cmFkYXMgcG9yIGZlY2hhIGRlIG1vZGlmaWNhY2lcdTAwRjNuLCBkZSBsYSBtXHUwMEUxcyByZWNpZW50ZSBhIGxhIG1cdTAwRTFzIGFudGlndWFcbiAgICAgICAgbm90YXNGaWx0cmFkYXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZTsgLy8gRGVzY2VuZGVudGVcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHJldHVybiBub3Rhc0ZpbHRyYWRhcztcbiAgICB9XG4gICAgXG59XG4iLCAiLy8gRW4gYWxnXHUwMEZBbiBsdWdhciBkZSB0dSBtXHUwMEYzZHVsbywgY29tbyBzZWFyY2gvRnV6enlOb3RlU3VnZ2VzdGVyLnRzXG5pbXBvcnQgeyBBcHAsIEZ1enp5U3VnZ2VzdE1vZGFsLCBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgY2xhc3MgRnV6enlOb3RlU3VnZ2VzdGVyIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8VEZpbGU+IHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBub3RhczogVEZpbGVbXSkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIGdldEl0ZW1zKCk6IFRGaWxlW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhcztcbiAgICB9XG5cbiAgICBnZXRJdGVtVGV4dChpdGVtOiBURmlsZSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBpdGVtLmJhc2VuYW1lOyAvLyBPIGN1YWxxdWllciBvdHJvIGZvcm1hdG8gcXVlIHByZWZpZXJhc1xuICAgIH1cblxuICAgIG9uQ2hvb3NlSXRlbShpdGVtOiBURmlsZSwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICAvLyBBcXVcdTAwRUQgZGVmaW5lcyBxdVx1MDBFOSBoYWNlciBjdWFuZG8gc2Ugc2VsZWNjaW9uYSB1bmEgbm90YS4gUG9yIGVqZW1wbG8sIGFicmlyIGxhIG5vdGE6XG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZiwgZmFsc2UpO1xuICAgICAgICBsZWFmLm9wZW5GaWxlKGl0ZW0pO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBQbHVnaW4sIFN0YXR1c0JhciwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBTdGF0dXNCYXJFeHRlbnNpb24ge1xuICAgIHBsdWdpbjogUGx1Z2luO1xuICAgIHN0YXR1c0JhcjogU3RhdHVzQmFyIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzQmFyKSByZXR1cm47IC8vIFNpIHlhIGVzdFx1MDBFMSBhY3Rpdm8sIG5vIGhhY2VyIG5hZGFcblxuICAgICAgICB0aGlzLnN0YXR1c0JhciA9IHRoaXMucGx1Z2luLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcbiAgICAgICAgLy8gUmVnaXN0cmFyIGV2ZW50byBmaWxlLW9wZW5cbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oXCJmaWxlLW9wZW5cIiwgKGZpbGU6IFRGaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0dXNCYXIoZmlsZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0dXNCYXIpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyID0gbnVsbDtcbiAgICAgICAgLy8gTm8gbmVjZXNpdGFzIGRlc3VzY3JpYmlyIGVsIGV2ZW50byBhcXVcdTAwRUQgc2kgdXNhcyByZWdpc3RlckV2ZW50LCBPYnNpZGlhbiBsbyBtYW5lamEgYXV0b21cdTAwRTF0aWNhbWVudGUuXG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVTdGF0dXNCYXIoZmlsZT86IFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gZmlsZSB8fCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFjdXJyZW50RmlsZSB8fCAhdGhpcy5zdGF0dXNCYXIpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQmFyPy5zZXRUZXh0KCcnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZpbGVDYWNoZSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShjdXJyZW50RmlsZSk7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXI/LmFsaWFzZXMgfHwgW107XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnNldFRleHQoYWxpYXNlcy5sZW5ndGggPiAwID8gYEFsaWFzOiAke2FsaWFzZXNbMF19YCA6ICdObyBBbGlhcycpO1xuICAgIH1cbn1cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9pbmRleC50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDQgMTc6NTg6MzBcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQxOjI4XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyByZWdpc3RlclJpYmJvbk1lbnUsIGRlYWN0aXZhdGVSaWJib25NZW51IH0gZnJvbSBcIi4vcmliYm9uTWVudVwiO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcywgZGVhY3RpdmF0ZUNvbW1hbmRzIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZHVsb1JlZ2lzdHJvVGllbXBvIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgZWwgcmliYm9uIHNvbG8gc2UgcmVnaXN0cmUgc2kgYVx1MDBGQW4gbm8gaGEgc2lkbyByZWdpc3RyYWRvXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4ucmliYm9uQnV0dG9uUlQpIHtcbiAgICAgICAgICAgIHJlZ2lzdGVyUmliYm9uTWVudSh0aGlzLnBsdWdpbik7XG4gICAgICAgIH1cbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVJpYmJvbk1lbnUodGhpcy5wbHVnaW4pO1xuICAgICAgICBkZWFjdGl2YXRlQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cbn1cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9yaWJib25NZW51LnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG9cbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNCAxNzo1ODozMFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDc6MTdcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyBBcHAsIE1lbnUsIFBsdWdpbiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGN1bXBsZUNvbmRpY2lvbiB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICAvLyBFc3RlIGVzIGVsIFx1MDBFRGNvbm8gZGVsIG1lblx1MDBGQSBlbiBlbCByaWJib24sIGNhbWJpYSBcImRpY2VcIiBwb3IgZWwgXHUwMEVEY29ubyBxdWUgcHJlZmllcmFzXG4gICAgXG4gICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJUID0gcGx1Z2luLmFkZFJpYmJvbkljb24oXCJjbG9ja1wiLCBcIlJlZ2lzdHJvIGRlIFRpZW1wb1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWFyIGVsIG1lblx1MDBGQSBhbCBoYWNlciBjbGljIGVuIGVsIFx1MDBFRGNvbm9cbiAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KHBsdWdpbi5hcHApO1xuXG4gICAgICAgIC8vIEFncmVnYXIgb3BjaW9uZXMgYWwgbWVuXHUwMEZBXG4gICAgICAgIC8vIExhIG9wY2lcdTAwRjNuIGFob3JhLCBzb2xvIHNlIGFjdGl2YSBzaSBoYXkgYWxnXHUwMEZBbiByZWdpc3RybyBkZSB0aWVtcG8gZW4gZWplY3VjaVx1MDBGM24uXG4gICAgICAgIGlmIChhd2FpdCBjdW1wbGVDb25kaWNpb24ocGx1Z2luLmFwcCkpIHtcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiQWhvcmFcIilcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBaG9yYVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG5cblxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XG4gICAgICAgICAgICBpdGVtLnNldFRpdGxlKFwiUmVnaXN0cmFyIFRpZW1wb1wiKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXF1XHUwMEVEIGxhIGxcdTAwRjNnaWNhIHBhcmEgXCJSZWdpc3RyYXIgVGllbXBvXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3RyYXIgVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuXG4gICAgICAgIC8vIExhIG9wY2lcdTAwRjNuIERldGVuZXIgUmVnaXN0cm8sIHNvbG8gc2UgYWN0aXZhIHNpIGhheSBhbGdcdTAwRkFuIHJlZ2lzdHJvIGRlIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzbi5cbiAgICAgICAgaWYgKGF3YWl0IGN1bXBsZUNvbmRpY2lvbihwbHVnaW4uYXBwKSkge1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJEZXRlbmVyIFJlZ2lzdHJvXCIpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiRGV0ZW5lciBSZWdpc3Ryb1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRldGVuZXIgUmVnaXN0cm9cIik7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIilcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBsYSBsXHUwMEYzZ2ljYSBwYXJhIFwiVGFyZWFzIGVuIHByb2dyZXNvXCJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUYXJlYXMgZW4gcHJvZ3Jlc29cIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoXCJSZWdpc3Ryb3MgZGUgaG95XCIpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBcXVcdTAwRUQgbGEgbFx1MDBGM2dpY2EgcGFyYSBcIlJlZ2lzdHJvcyBkZSBob3lcIlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlZ2lzdHJvcyBkZSBob3lcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIE1vc3RyYXIgZWwgbWVuXHUwMEZBIGVuIGxhIHBvc2ljaVx1MDBGM24gZGVsIGN1cnNvclxuICAgICAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeDogZXZlbnQucGFnZVgsIHk6IGV2ZW50LnBhZ2VZIH0pO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZVJpYmJvbk1lbnUocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBpZiAocGx1Z2luLnJpYmJvbkJ1dHRvblJUKSB7XG4gICAgICAgIHBsdWdpbi5yaWJib25CdXR0b25SVC5yZW1vdmUoKTtcbiAgICAgICAgcGx1Z2luLnJpYmJvbkJ1dHRvblJUID0gbnVsbDtcbiAgICB9XG59XG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdXRpbHMudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wb1xuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA0IDE4OjAxOjAyXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0NzoyOVxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cblxuLy8gTFx1MDBEM0dJQ0EgUEFSQSBBQ0NFREVSIEEgTEFTIEZVTkNJT05FUyBERVNERSBMT1MgQk9UT05FUyBQUk9QSU9TIERFIExBIElOVEVSRkFaIERFIE9CU0lESUFOIC0+IFJJQkJPTiwgRVRDXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyLCBNb2RhbCwgRnV6enlTdWdnZXN0TW9kYWwsIEZ1enp5TWF0Y2gsIE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHtTZWxlY2Npb25Nb2RhbH0gZnJvbSBcIi4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxcIlxuXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjdW1wbGVDb25kaWNpb24oYXBwOiBBcHApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL1JlZ2lzdHJvIFRpZW1wb1wiKSkge1xuICAgICAgICAgICAgLy8gT2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvIGRlc2RlIG1ldGFkYXRhQ2FjaGVcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgZnJvbnRtYXR0ZXIgY29udGllbmUgZWwgY2FtcG8gXCJlc3RhZG9cIiBjb24gZWwgdmFsb3IgXCJcdUQ4M0RcdURGRTJcIlxuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG4gZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwOiBBcHApOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgXG4gICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9SZWdpc3Ryb3NcIikpIHtcbiAgICAgICAgICAgICAvLyBPYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm8gZGVzZGUgbWV0YWRhdGFDYWNoZVxuICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBmcm9udG1hdHRlciBjb250aWVuZSBlbCBjYW1wbyBcImVzdGFkb1wiIGNvbiBlbCB2YWxvciBcIlx1RDgzRFx1REZFMlwiXG4gICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfVxuICAgICB9XG4gICAgIFxuICAgICByZXR1cm4gO1xuIH1cblxuXG4gLy8gU3Vwb25lbW9zIHF1ZSBlc3RhIGZ1bmNpXHUwMEYzbiBzZSB1YmljYXJcdTAwRTEgZW4gYWxnXHUwMEZBbiBsdWdhciBkb25kZSBwdWVkYSBhY2NlZGVyIGEgYGFwcGAgZGUgT2JzaWRpYW4uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXJPYmpldG9SZWdpc3RybyhwbHVnaW4pIHtcbiAgICBcbiAgICBjb25zdCBhY3Rpdm8gPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhY3Rpdm8pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIGhheSB1biBhcmNoaXZvIGFjdGl2byBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLiBTZSBkZXNjYXJ0YSBwYXJhIGxhIGNyZWFjaVx1MDBGM24gZGUgcmVnaXN0cm8gZGUgdGllbXBvLlwiKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGZvbGRlciA9IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfUmVnaXN0cm9UaWVtcG9cbiAgICBjb25zdCBpbmRpY2UgPSBwbHVnaW4uc2V0dGluZ3MuaW5kaWNlX1JlZ2lzdHJvVGllbXBvXG4gICAgXG4gICAgbGV0IG1heElkID0gMDtcblxuICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgY29uc3QgcmVnaXN0cm9zRXhpc3RlbnRlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlcikpO1xuICAgICBcbiAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgSURzIGVuIGVsIGZyb250bWF0dGVyXG4gICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICBpZiAoaWQgPiBtYXhJZCkgbWF4SWQgPSBpZDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRWwgcHJcdTAwRjN4aW1vIElEIGRpc3BvbmlibGVcbiAgICBjb25zdCBuZXh0SWQgPSBtYXhJZCArIDE7XG5cbiAgICAvLyBGb3JtYXRlYXIgbGEgZmVjaGEgYWN0dWFsXG4gICAgY29uc3QgZmVjaGFDb21wbGV0YSA9IGZvcm1hdGVhckZlY2hhKG5ldyBEYXRlKCkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aXZvLFxuICAgICAgICBub21icmU6IGFjdGl2by5iYXNlbmFtZSxcbiAgICAgICAgZm9sZGVyLFxuICAgICAgICBpbmRpY2UsXG4gICAgICAgIGlkOiBuZXh0SWQsXG4gICAgICAgIGZlY2hhOiBmZWNoYUNvbXBsZXRhLFxuICAgICAgICBpbmRpY2VfRFZKUzogYFwiJHtpbmRpY2V9XCJgLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZvcm1hdGVhckZlY2hhKGZlY2hhOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgY29uc3QgZmVjaGFMb2NhbCA9IG5ldyBEYXRlKGZlY2hhLmdldFRpbWUoKSAtIG9mZnNldCk7XG4gICAgY29uc3QgZmVjaGFGb3JtYXRvID0gZmVjaGFMb2NhbC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgY29uc3QgZGlhcyA9IFsnRG9taW5nbycsICdMdW5lcycsICdNYXJ0ZXMnLCAnTWlcdTAwRTlyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU1x1MDBFMWJhZG8nXTtcbiAgICBjb25zdCBkaWFTZW1hbmEgPSBkaWFzW2ZlY2hhLmdldERheSgpXTtcbiAgICBjb25zdCBob3JhRm9ybWF0byA9IGZlY2hhLnRvVGltZVN0cmluZygpLnNwbGl0KCcgJylbMF0uc3Vic3RyaW5nKDAsIDUpO1xuICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvOiBhbnksIGFwcDogQXBwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgXG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGNvbnN0IHRhcmVhc0FjdGl2YXMgPSBbXTtcblxuICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHJlZ2lzdHJvLmZvbGRlcikpIHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgdGFyZWFzQWN0aXZhcy5wdXNoKHsgZmlsZSwgYWxpYXNlczogbWV0YWRhdGEuYWxpYXNlcyB8fCBmaWxlLmJhc2VuYW1lIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvbnN0IHRhcmVhQWN0aXZhID0gdGFyZWFzQWN0aXZhc1swXTtcbiAgICAgICAgZGVidWdnZXJcbiAgICAgICAgY29uc3QgZGVzZWFEZXRlbmVyID0gYXdhaXQgbW9zdHJhclN1Z2VyZW5jaWEoYExhIHRhcmVhICR7dGFyZWFBY3RpdmEuYWxpYXNlc30gZXN0XHUwMEUxIGNvcnJpZW5kby4gXHUwMEJGRGVzZWEgZGV0ZW5lcmxhP2ApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRlc2VhRGV0ZW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDcmVhY2lcdTAwRjNuIGRlIHJlZ2lzdHJvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5gKTtcbiAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZGVzZWFEZXRlbmVyKSB7XG4gICAgICAgICAgICAvLyBBUVVJIFZBIExBIElNUExFTUVOVEFDSVx1MDBEM04gQUwgTlVFVk8gQ1x1MDBEM0RJR08gLT4gRVNUQSBMT0dJQ0EgTUFORUpBIEZVTkNJT05FUyEgIFxuICAgICAgICAgICAgYXdhaXQgZGV0ZW5lclRhcmVhKHRhcmVhQWN0aXZhLCBhcHApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgTGEgdGFyZWEgJHt0YXJlYUFjdGl2YS5hbGlhc2VzfSBzZWd1aXJcdTAwRTEgcmVnaXN0clx1MDBFMW5kb3NlLmApO1xuICAgICAgICAgICAgcmVnaXN0cm8uZGV0ZW5lciA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRhcmVhc0FjdGl2YXMubGVuZ3RoID4gMSkge1xuICAgICAgICBuZXcgTm90aWNlKFwiSGF5IHVuIGVycm9yIGNvbiBsYSBjYW50aWRhZCBkZSB0YXJlYXMgY29ycmllbmRvIGVuIGVzdGUgbW9tZW50by5cIik7XG4gICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gaGF5IG1cdTAwRTFzIHRhcmVhcyBjb3JyaWVuZG8uXCIpO1xuICAgICAgICByZWdpc3Ryby5kZXRlbmVyID0gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtb3N0cmFyU3VnZXJlbmNpYShtZW5zYWplOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4gfCB1bmRlZmluZWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgbGV0IHNlbGVjY2lvbmFkbyA9IGZhbHNlOyAvLyBSYXN0cmVhIHNpIHNlIGhhIGhlY2hvIHVuYSBzZWxlY2NpXHUwMEYzblxuXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKGFwcCk7XG4gICAgICAgIG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6IG1lbnNhamUgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXIgY29udGVuZWRvciBwYXJhIGJvdG9uZXNcbiAgICAgICAgY29uc3QgYnV0dG9uc0NvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBTXHUwMEVEXG4gICAgICAgIGNvbnN0IHllc0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdTXHUwMEVEJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHllc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjY2lvbmFkbyA9IHRydWU7IC8vIEFjdHVhbGl6YSBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBOb1xuICAgICAgICBjb25zdCBub0J1dHRvbiA9IGJ1dHRvbnNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdObycsXG4gICAgICAgIH0pO1xuICAgICAgICBub0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHNlbGVjY2lvbmFkbyA9IHRydWU7IC8vIEFjdHVhbGl6YSBxdWUgc2UgaGEgaGVjaG8gdW5hIHNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgcmVzb2x2ZShmYWxzZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1vZGFsLm9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXNlbGVjY2lvbmFkbykge1xuICAgICAgICAgICAgICAgIC8vIFNpIHNlIGNpZXJyYSBlbCBtb2RhbCBzaW4gaGFjZXIgdW5hIHNlbGVjY2lcdTAwRjNuLCByZXN1ZWx2ZSBjb24gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9KTtcbn1cblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybzogYW55LCBhcHA6IEFwcCkge1xuICAgIGNvbnN0IHRvdFRhcmVhcyA9IGF3YWl0IGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwKTsgLy8gUGFzbyBgYXBwYCBjb21vIGFyZ3VtZW50b1xuICAgIGxldCBvcGNpb25lc1RpdHVsbywgdmFsb3Jlc09wY2lvbjtcbiAgICBpZiAodG90VGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb3BjaW9uZXNUaXR1bG8gPSBbcmVnaXN0cm8ubm9tYnJlLCBcIkFsZ3VuYSB0YXJlYSBlbiBFamVjdWNpXHUwMEYzblwiLCBcIk90cm9cIl07XG4gICAgICAgIHZhbG9yZXNPcGNpb24gPSBbXCJOb3RhXCIsIFwiVGFyZWFcIiwgXCJPdHJvXCJdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG9wY2lvbmVzVGl0dWxvID0gW3JlZ2lzdHJvLm5vbWJyZSwgXCJPdHJvXCJdO1xuICAgICAgICB2YWxvcmVzT3BjaW9uID0gW1wiTm90YVwiLCBcIk90cm9cIl07XG4gICAgfVxuICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gXCJcdTAwQkZTb2JyZSBxdVx1MDBFOSBlcyBlbCByZWdpc3RybyBkZSB0aWVtcG8/XCI7XG4gICAgXG4gICAgY29uc3QgbW9kYWxNZW51MSA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIG9wY2lvbmVzVGl0dWxvLCB2YWxvcmVzT3BjaW9uLCBwbGFjZWhvbGRlcik7XG4gICAgXG4gICAgLy8gRXNwZXJhIGFzaW5jclx1MDBGM25pY2FtZW50ZSBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhbnRlcyBkZSBjb250aW51YXIuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gYXdhaXQgbW9kYWxNZW51MS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgcmVnaXN0cm8udGlwb1JlZ2lzdHJvID0gc2VsZWN0aW9uO1xuICAgICAgICAvLyBQcm9jZXNhciBsYSBzZWxlY2NpXHUwMEYzbiBkZWwgdXN1YXJpbyBhcXVcdTAwRUQuXG4gICAgICAgIC8vIEVsIGNcdTAwRjNkaWdvIHN1YnNpZ3VpZW50ZSBkZXBlbmRlIGRlbCB0aXBvIGRlIHJlZ2lzdHJvIHNlbGVjY2lvbmFkby5cbiAgICAgICAgc3dpdGNoKHJlZ2lzdHJvLnRpcG9SZWdpc3Rybykge1xuICAgICAgICAgICAgY2FzZSBcIk5vdGFcIjpcbiAgICAgICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSByZWdpc3Ryby5ub21icmU7IC8vIEVsIHRcdTAwRUR0dWxvIGVzIGVsIG5vbWJyZSBkZSBsYSBub3RhIGFjdHVhbC5cbiAgICAgICAgICAgICAgICByZWdpc3Ryby5zaUFzdW50byA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiVGFyZWFcIjpcbiAgICAgICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICAgICAgYXdhaXQgZWxlZ2lyVGFyZWFQYXJhUmVnaXN0cm8oYXBwLCByZWdpc3RybywgdG90VGFyZWFzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gU2kgZWwgdXN1YXJpbyBlbGlnZSBcIk90cm9cIiBvIGN1YWxxdWllciBvdHJhIG9wY2lcdTAwRjNuLlxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLnNpQXN1bnRvID0gcmVnaXN0cm8udGl0dWxvRGVmaW5pZG8gIT09IFwiT3Ryb1wiOyAvLyBBc3VtZSBxdWUgc2kgbm8gZXMgXCJPdHJvXCIsIGVzIHVuIGFzdW50byBlc3BlY1x1MDBFRGZpY28uXG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgYWRpY2lvbmFsIHBhcmEgbWFuZWphciBcIk90cm9cIiBvIGNhc29zIG5vIGVzcGVjaWZpY2Fkb3MuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbyBtb2RhbCBjZXJyYWRvIHNpbiBzZWxlY2NpXHUwMEYzbjpcIiwgZXJyb3IpO1xuICAgICAgICAvLyBNYW5lam8gZGUgZXJyb3JlcyBvIGNpZXJyZSBkZWwgbW9kYWwgc2luIHNlbGVjY2lcdTAwRjNuLlxuICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIGVzdGFibGVjZXIgdW4gdmFsb3IgcHJlZGV0ZXJtaW5hZG8gcGFyYSByZWdpc3Ryby5kZXRlbmVyIGFxdVx1MDBFRC5cbiAgICB9XG59XG5cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGVuY29udHJhclRhcmVhc1BlbmRpZW50ZXMoYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGxldCB0YXJlYXNQZW5kaWVudGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IGFyY2hpdm9zUmVsZXZhbnRlcyA9IGFyY2hpdm9zLmZpbHRlcihhcmNoaXZvID0+ICFhcmNoaXZvLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpKTtcbiAgICBcbiAgICAgICAgZm9yIChjb25zdCBhcmNoaXZvIG9mIGFyY2hpdm9zUmVsZXZhbnRlcykge1xuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYXJjaGl2byk7XG4gICAgICAgICAgICBjb25zdCBjb2luY2lkZW5jaWFzID0gY29udGVuaWRvLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi9nbSkgfHwgW107XG4gICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyBlc3BhY2lvcyBhbCBpbmljaW8gZGUgY2FkYSBjb2luY2lkZW5jaWEgYW50ZXMgZGUgYWdyZWdhcmxhIGFsIGFycmVnbG9cbiAgICAgICAgICAgIGNvbnN0IHRhcmVhc0xpbXBpYXMgPSBjb2luY2lkZW5jaWFzLm1hcCh0YXJlYSA9PiB0YXJlYS50cmltKCkpO1xuICAgICAgICAgICAgdGFyZWFzUGVuZGllbnRlcyA9IHRhcmVhc1BlbmRpZW50ZXMuY29uY2F0KHRhcmVhc0xpbXBpYXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJlYXNQZW5kaWVudGVzO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGVsZWdpclRhcmVhUGFyYVJlZ2lzdHJvKGFwcDogQXBwLCByZWdpc3RybzogYW55LCB0YXJlYXNQZW5kaWVudGVzOiBzdHJpbmdbXSkge1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIkVsaWdlIGxhIHRhcmVhIHF1ZSB2YXMgYSByZWdpc3RyYXIuXCI7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXIgdW4gYXJyZWdsbyBkZSBwcm9tZXNhcyB1c2FuZG8gbWFwIHBhcmEgcGFzYXIgY2FkYSB0YXJlYSBwb3IgbGltcGlhclRleHRvVGFyZWFcbiAgICAgICAgbGV0IHByb21lc2FzTGltcGlhcyA9IHRhcmVhc1BlbmRpZW50ZXMubWFwKHRhcmVhID0+IGxpbXBpYXJUZXh0b1RhcmVhKHRhcmVhKSk7XG5cbiAgICAgICAgLy8gVXNhciBQcm9taXNlLmFsbCBwYXJhIGVzcGVyYXIgYSBxdWUgdG9kYXMgbGFzIHRhcmVhcyBzZWFuIHByb2Nlc2FkYXNcbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWVzYXNMaW1waWFzKS50aGVuKHRhcmVhc0xpbXBpYXMgPT4ge1xuICAgICAgICAgICAgLy8gRW4gZXN0ZSBwdW50bywgdGFyZWFzTGltcGlhcyBlcyB1biBhcnJlZ2xvIGNvbiB0b2RhcyBsYXMgdGFyZWFzIGRlc3B1XHUwMEU5cyBkZSBzZXIgbGltcGlhZGFzXG4gICAgICAgICAgICAvLyBBaG9yYSBwdWVkZXMgdXNhciB0YXJlYXNMaW1waWFzIGVuIG90cmEgZnVuY2lcdTAwRjNuXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsTWVudSA9IG5ldyBTZWxlY2Npb25Nb2RhbChhcHAsIHRhcmVhc0xpbXBpYXMsIHRhcmVhc0xpbXBpYXMsIHBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgIG1vZGFsTWVudS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKS50aGVuKHNlbGVjdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgICAgICByZWdpc3Ryby50aXR1bG8gPSBsaW1waWFyVGV4dG9UYXJlYSAoc2VsZWN0aW9uKVxuICAgICAgICAgICAgICAgIC8vbmV3IE5vdGljZShzZWxlY3Rpb24pO1xuICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvLmRldGVuZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBvIG1vZGFsIGNlcnJhZG8gc2luIHNlbGVjY2lcdTAwRjNuOlwiLCBlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgLy8gTWFuZWphciBwb3NpYmxlcyBlcnJvcmVzXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiSHVibyB1biBlcnJvciBhbCBsaW1waWFyIGxhcyB0YXJlYXM6XCIsIGVycm9yKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaW1waWFyVGV4dG9UYXJlYSh0aXR1bG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIC8vIEVsaW1pbmEgdG9kbyBkZXNwdVx1MDBFOXMgZGVsIHByaW1lciBzYWx0byBkZSBsXHUwMEVEbmVhLlxuICAgICAgICAgICAgbGV0IHRleHRvTGltcGlvID0gdGl0dWxvLnNwbGl0KCdcXG4nKVswXTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyB0YWdzIGRlIGVzdGlsbyBNYXJrZG93bi5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvI1tcXHctL10rL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyBjYW1wb3MgZGUgZXN0aWxvIERhdGF2aWV3LlxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtcXHcrOjpbXlxcXV0rXFxdL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hIGVsIHBhdHJcdTAwRjNuIFwiIC0gWy9dXCIgYWwgaW5pY2lvIGRlIGxhIGNhZGVuYSwgaW5jbHV5ZW5kbyBwb3NpYmxlcyBlc3BhY2lvcyBhbnRlcyBvIGRlc3B1XHUwMEU5cy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXlxccyotXFxzKlxcW1xcL1xcXVxccyovLCAnJyk7XG5cbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YSBjYXJhY3RlcmVzIG5vIHBlcm1pdGlkb3MgZW4gbm9tYnJlcyBkZSBhcmNoaXZvIGNvbiB1biBndWlvbiBiYWpvIG8gYWxnXHUwMEZBbiBvdHJvIGNhcmFjdGVyIHNlZ3Vyby4gICAgXG4gICAgICAgICAgICBjb25zdCBjYXJhY3RlcmVzTm9QZXJtaXRpZG9zID0gL1s8PjpcIlxcL1xcXFx8PypcXHgwMC1cXHgxRl0vZztcbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZShjYXJhY3RlcmVzTm9QZXJtaXRpZG9zLCAnXycpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZW1wbGF6YSBlc3BhY2lvcyBtXHUwMEZBbHRpcGxlcyBwb3IgdW4gXHUwMEZBbmljbyBlc3BhY2lvIHBhcmEgZXZpdGFyIG5vbWJyZXMgZGUgYXJjaGl2byBleGNlc2l2YW1lbnRlIGxhcmdvcy5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJldG9ybmEgZWwgdGV4dG8gbGltcGlvLCBhaG9yYSBlbnZ1ZWx0byBlbiB1bmEgcHJvbWVzYS5cbiAgICAgICAgICAgIHJlc29sdmUodGV4dG9MaW1waW8udHJpbSgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgICAgICBcblxuYXN5bmMgZnVuY3Rpb24gZGV0ZW5lclRhcmVhKHRhcmVhQWN0aXZhOiB7IGZpbGU6IFRGaWxlOyB0aXR1bG86IHN0cmluZyB9LCBhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgbGEgbFx1MDBGM2dpY2EgcGFyYSBtYXJjYXIgbGEgdGFyZWEgY29tbyBubyBhY3RpdmEsIHByb2JhYmxlbWVudGUgYWN0dWFsaXphbmRvIHN1IGZyb250bWF0dGVyXG4gICAgY29uc29sZS5sb2coYERldGVuaWVuZG8gbGEgdGFyZWE6ICR7dGFyZWFBY3RpdmEudGl0dWxvfWApO1xuICAgIC8vIEVqZW1wbG8gZGUgY1x1MDBGM21vIHNlIHBvZHJcdTAwRURhIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgcGFyYSBkZXRlbmVyIGxhIHRhcmVhXG4gICAgLy8gRXN0YSBlcyB1bmEgc2ltcGxpZmljYWNpXHUwMEYzbjsgbGEgaW1wbGVtZW50YWNpXHUwMEYzbiByZWFsIGRlcGVuZGVyXHUwMEVEYSBkZSBjXHUwMEYzbW8gZXN0XHUwMEU5cyBtYW5lamFuZG8gZWwgY29udGVuaWRvIGRlbCBhcmNoaXZvXG4gICAgY29uc3QgZmlsZUNvbnRlbnRzID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQodGFyZWFBY3RpdmEuZmlsZSk7XG4gICAgY29uc3QgbmV3Q29udGVudHMgPSBmaWxlQ29udGVudHMucmVwbGFjZSgnZXN0YWRvOiBcdUQ4M0RcdURGRTInLCAnZXN0YWRvOiBcdUQ4M0RcdUREMzUnKTsgLy8gQ2FtYmlhciBhIGVzdGFkbyBubyBhY3Rpdm9cbiAgICBhd2FpdCBhcHAudmF1bHQubW9kaWZ5KHRhcmVhQWN0aXZhLmZpbGUsIG5ld0NvbnRlbnRzKTtcbn1cblxuXG5cblxuXG5cbiBcbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9jb21tYW5kcy50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDMtMDUgMTc6MDI6MzRcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQwOjI0XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbmltcG9ydCB7IFBsdWdpbiwgTm90aWNlLCBNb2RhbCwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MsIGNyZWFyT2JqZXRvUmVnaXN0cm8sIHZlcmlmaWNhclRhcmVhc0FjdGl2YXMsIGRlZmluaXJUaXBvUmVnaXN0cm8gfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQge21vZGFsX0Fob3JhfSBmcm9tIFwiLi9tb2RhbHMvbW9kYWxfQWhvcmFcIlxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIFxuICAgIGNvbnN0IGlkMSA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwicmVnaXN0cm9zLWRlLXRpZW1wby1kZWwtZGlhXCIsXG4gICAgICAgIG5hbWU6IFwiUmVnaXN0cm9zIGRlIHRpZW1wbyBkZWwgZFx1MDBFRGFcIixcbiAgICAgICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAgICAgICAgIGlmIChhY3RpdmVMZWFmKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBhY3RpdmVMZWFmLnZpZXcuZmlsZT8ucGF0aCB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlUGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9QZXJpb2Rvcy9EaWFyaW8vXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgbGEgbFx1MDBGM2dpY2EgZGVsIGNvbWFuZG9cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVnaXN0cm9zIGRlIHRpZW1wbyBkZWwgZFx1MDBFRGFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIHJlZ2lzdGVyZWRDb21tYW5kSWRzLlxuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQucHVzaChpZDEuaWQpO1xuXG4gICAgY29uc3QgaWQyID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJhaG9yYS1SZWdpc3Ryb1RpZW1wb1wiLFxuICAgICAgICBuYW1lOiBcIlRhcmVhIGFjdGl2YSBlbiByZWdpc3RybyBkZSB0aWVtcG9cIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2YSA9IGF3YWl0IGJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MocGx1Z2luLmFwcCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghYWN0aXZhKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBub3RhcyBhY3RpdmFzXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhIHkgbXVlc3RyYSBlbCBtb2RhbCBwZXJzb25hbGl6YWRvIGNvbiBsYSBub3RhIGFjdGl2YVxuICAgICAgICAgICAgICAgIGxldCBtb2RhbCA9IG5ldyBtb2RhbF9BaG9yYShwbHVnaW4uYXBwLCBhY3RpdmEpO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQucHVzaChpZDIuaWQpO1xuICAgIFxuICAgIGNvbnN0IGlkMyA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwiY3JlYXItcmVnaXN0cm8tdGllbXBvXCIsXG4gICAgICAgIG5hbWU6IFwiQ3JlYXIgUmVnaXN0cm8gZGUgVGllbXBvXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWdpc3RybyA9IGF3YWl0IGNyZWFyT2JqZXRvUmVnaXN0cm8ocGx1Z2luKTtcbiAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXJlZ2lzdHJvKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB2ZXJpZmljYXJUYXJlYXNBY3RpdmFzKHJlZ2lzdHJvLCBwbHVnaW4uYXBwKVxuICAgICAgICAgICAgYXdhaXQgZGVmaW5pclRpcG9SZWdpc3RybyhyZWdpc3RybyxwbHVnaW4uYXBwKVxuICAgICAgICAgICAgLy8gQXN1bWllbmRvIHF1ZSBzZSB0aWVuZSB1bmEgZnVuY2lcdTAwRjNuIG8gbVx1MDBFOXRvZG8gcGFyYSBwcm9jZXNhciBlbCBvYmpldG8gYHJlZ2lzdHJvYFxuICAgICAgICAgICAgLy8gUG9yIGVqZW1wbG8sIHBvZHJcdTAwRURhIHNlciBjcmVhciB1bmEgbnVldmEgbm90YSBjb24gbGEgaW5mb3JtYWNpXHUwMEYzbiBkZSBgcmVnaXN0cm9gXG4gICAgICAgICAgICBcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBBbG1hY2VuYXIgZWwgSUQgZGVsIGNvbWFuZG8gZW4gcmVnaXN0ZXJlZENvbW1hbmRJZHMuXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzUlQucHVzaChpZDMuaWQpO1xuXG4gICAgXG5jb25zdCBpZDQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgaWQ6IFwidmlzdGEtcmVnaXN0cm8tdGllbXBvLWFjdGl2YVwiLFxuICAgIG5hbWU6IFwiTW9zdHJhciBSVCBBY3Rpdm9cIixcbiAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAvLyBBc2VndXJhIHF1ZSBubyBoYXlhIGR1cGxpY2Fkb3MgZGUgbGEgdmlzdGEuXG4gICAgICAgIGFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFwidmlzdGEtcmVnaXN0cm8tYWN0aXZvXCIpO1xuXG4gICAgICAgIC8vIEFicmUgbGEgdmlzdGEgZW4gdW5hIG51ZXZhIGhvamEuXG4gICAgICAgIGF3YWl0IGFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICB0eXBlOiBcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiLFxuICAgICAgICB9KTtcbiBcbiAgICAgICAgLy8gQWN0aXZhIGxhIG51ZXZhIGhvamEgcGFyYSBlbCB1c3VhcmlvLlxuICAgICAgICBhcHAud29ya3NwYWNlLnJldmVhbExlYWYoXG4gICAgICAgICAgICBhcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShcInZpc3RhLXJlZ2lzdHJvLWFjdGl2b1wiKVswXVxuICAgICAgICApO1xuICAgICAgICAgXG4gICAgICAgIFxuICAgIH0sXG59KTtcbi8vIEFsbWFjZW5hciBlbCBJRCBkZWwgY29tYW5kbyBlbiByZWdpc3RlcmVkQ29tbWFuZElkcy5cbnBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JULnB1c2goaWQ0LmlkKTtcblxufVxuXG5cbi8vIEVzdGEgcGFydGUgZGVsIGNcdTAwRjNkaWdvIHNlclx1MDBFRGEgaGlwb3RcdTAwRTl0aWNhIHkgZGVwZW5kZSBkZSBjXHUwMEYzbW8gZ2VzdGlvbmFzIGVsIGVzdGFkbyB5IGVsIGNpY2xvIGRlIHZpZGEgZGUgbG9zIGNvbWFuZG9zIGVuIHR1IHBsdWdpbi5cbmV4cG9ydCBmdW5jdGlvbiBkZWFjdGl2YXRlQ29tbWFuZHMocGx1Z2luOiBQbHVnaW4pOiB2b2lkIHtcbiAgICBcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc1JUKSByZXR1cm47XG4gICAgLy8gRWplbXBsbyBkZSBjXHUwMEYzbW8gcG9kclx1MDBFRGFzIG1hbmVqYXIgbGEgXCJkZXNhY3RpdmFjaVx1MDBGM25cIiBkZSBjb21hbmRvcy5cbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNSVC5mb3JFYWNoKChjb21tYW5kSWQ6IHN0cmluZyB8IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIC8vIFNvYnJlc2NyaWJpciBlbCBjYWxsYmFjayBkZWwgY29tYW5kbyBwYXJhIHF1ZSBubyBoYWdhIG5hZGEuXG4gICAgICAgICAgICBjb21tYW5kLmNhbGxiYWNrID0gKCkgPT4gbmV3IE5vdGljZShcIkVzdGUgY29tYW5kbyBoYSBzaWRvIGRlc2FjdGl2YWRvLlwiKTtcbiAgICAgICAgICAgIC8vIE8gc2ltcGxlbWVudGUgZWxpbWluYXIgZWwgY2FsbGJhY2sgc2kgZXNvIHNlIGFqdXN0YSBhIHR1IGxcdTAwRjNnaWNhIGRlIGFwbGljYWNpXHUwMEYzbi5cbiAgICAgICAgICAgIC8vIGRlbGV0ZSBjb21tYW5kLmNhbGxiYWNrO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvbW9kYWxfQWhvcmEudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHNcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0wNCAxNzo1ODozMFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDY6MzNcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgbW9kYWxfQWhvcmEgZXh0ZW5kcyBNb2RhbCB7XG4gICAgZmlsZTogVEZpbGU7XG4gICAgYXBwOiBBcHA7XG4gICAgaG9yYUluaWNpb0lucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGhpcy5maWxlKTtcbiAgICAgICAgY29uc3QgYWxpYXNlcyA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uYWxpYXNlcyB8fCBcIkFjdGl2aWRhZCBzaW4gYWxpYXNcIjtcbiAgICAgICAgLy8gQ29udmVydGlyIGhvcmFJbmljaW9TdHIgYSBmb3JtYXRvIFwiWVlZWS1NTS1ERFRISDpNTVwiIHBhcmEgZGF0ZXRpbWUtbG9jYWxcbiAgICAgICAgY29uc3QgaG9yYUluaWNpb1N0ciA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uaG9yYUluaWNpbyA/IHdpbmRvdy5tb21lbnQobWV0YWRhdGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIikuZm9ybWF0KFwiWVlZWS1NTS1ERFRISDptbVwiKSA6ICcnO1xuXG4gICAgICAgIC8vIENvbmZpZ3VyYSBlbCB0XHUwMEVEdHVsbyBkZWwgbW9kYWwgeSBtdWVzdHJhIGVsIGFsaWFzIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBSZWdpc3RybyBkZSBhY3RpdmlkYWQuYCB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgVGFyZWE6IFwiJHthbGlhc2VzfVwiYCB9KTtcbiAgICAgICAgaWYgKGhvcmFJbmljaW9TdHIpIHtcbiAgICAgICAgICAgIC8vIFVzYXIgbW9tZW50IHBhcmEgcGFyc2VhciBsYSBmZWNoYSBkZSBpbmljaW8geSBjYWxjdWxhciBsYSBkaWZlcmVuY2lhXG4gICAgICAgICAgICBjb25zdCBob3JhSW5pY2lvID0gd2luZG93Lm1vbWVudChob3JhSW5pY2lvU3RyLCBcIllZWVktTU0tREQgZGRkZCBISDptbVwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFob3JhID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgZGlmZiA9IGFob3JhLmRpZmYoaG9yYUluaWNpbyk7XG4gICAgICAgICAgICBjb25zdCBkdXJhY2lvbiA9IHdpbmRvdy5tb21lbnQuZHVyYXRpb24oZGlmZik7XG4gICAgICAgICAgICBjb25zdCBkaWZmRm9ybWF0dGVkID0gYCR7ZHVyYWNpb24uaG91cnMoKX1oICR7ZHVyYWNpb24ubWludXRlcygpfW1gO1xuXG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IGBFc3RhIGFjdGl2aWRhZCBsbGV2YSAke2RpZmZGb3JtYXR0ZWR9IGVuIGVqZWN1Y2lcdTAwRjNuLmAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6IFwiTm8gc2UgcHVkbyBkZXRlcm1pbmFyIGVsIHRpZW1wbyBkZSBpbmljaW8gZGUgbGEgYWN0aXZpZGFkLlwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIElucHV0IHBhcmEgbGEgaG9yYSBkZSBpbmljaW8gY29uIHRpcG8gZGF0ZXRpbWUtbG9jYWxcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnSG9yYSBkZSBpbmljaW86JyB9KTtcbiAgICAgICAgdGhpcy5ob3JhSW5pY2lvSW5wdXQgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ2RhdGV0aW1lLWxvY2FsJyxcbiAgICAgICAgICAgIHZhbHVlOiBob3JhSW5pY2lvU3RyXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBndWFyZGFyIGNhbWJpb3NcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnR3VhcmRhciBjYW1iaW9zJyB9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5ndWFyZGFyQ2FtYmlvcygpO1xuICAgIH1cblxuICAgIGFzeW5jIGd1YXJkYXJDYW1iaW9zKCkge1xuICAgICAgICBjb25zdCBudWV2YUhvcmFJbmljaW9Mb2NhbCA9IHRoaXMuaG9yYUluaWNpb0lucHV0LnZhbHVlO1xuICAgICAgICAvLyBBc2VndXJhciBxdWUgbGEgbnVldmEgaG9yYSB0aWVuZSB2YWxvciBhbnRlcyBkZSBpbnRlbnRhciBmb3JtYXRlYXJcbiAgICAgICAgaWYgKCFudWV2YUhvcmFJbmljaW9Mb2NhbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlBvciBmYXZvciwgc2VsZWNjaW9uZSB1bmEgaG9yYSBkZSBpbmljaW8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ29udmVydGlyIGRlIFwiWVlZWS1NTS1ERFRISDpNTVwiIGEgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIlxuICAgICAgICBjb25zdCBudWV2YUhvcmFJbmljaW8gPSB3aW5kb3cubW9tZW50KG51ZXZhSG9yYUluaWNpb0xvY2FsKS5mb3JtYXQoXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIExlZXIgZWwgY29udGVuaWRvIGFjdHVhbCBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvT3JpZ2luYWwgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuZmlsZSk7XG4gICAgICAgICAgICAvLyBSZWVtcGxhemFyIGxhIGxcdTAwRURuZWEgZGUgaG9yYUluaWNpbyBjb24gZWwgbnVldm8gdmFsb3IgZm9ybWF0ZWFkb1xuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvQWN0dWFsaXphZG8gPSBjb250ZW5pZG9PcmlnaW5hbC5yZXBsYWNlKC8oaG9yYUluaWNpbzogKS4qLywgYCQxJHtudWV2YUhvcmFJbmljaW99YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEd1YXJkYXIgbG9zIGNhbWJpb3MgZW4gZWwgYXJjaGl2b1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KHRoaXMuZmlsZSwgY29udGVuaWRvQWN0dWFsaXphZG8pO1xuXG4gICAgICAgICAgICAvLyBDZXJyYXIgZWwgbW9kYWwgZGVzcHVcdTAwRTlzIGRlIGd1YXJkYXIgbG9zIGNhbWJpb3NcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJIb3JhIGRlIGluaWNpbyBhY3R1YWxpemFkYSBjb3JyZWN0YW1lbnRlLlwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBndWFyZGFyIGNhbWJpb3MgZW4gbGEgbm90YTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGFsIGd1YXJkYXIgbG9zIGNhbWJpb3MgZW4gbGEgbm90YS5cIik7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiLy8gc3JjL2RlZmF1bHRzL2RlZmF1bHRTZXR0aW5ncy50c1xuaW1wb3J0IHR5cGUgeyBQbHVnaW5NYWluU2V0dGluZ3MgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3BsdWdpbk1haW5TZXR0aW5ncyc7XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBQbHVnaW5NYWluU2V0dGluZ3MgPSB7XG4gIG1vZHVsb1JlZ2lzdHJvVGllbXBvOiB0cnVlLFxuICBtb2R1bG9BbGlhc1N0YXR1c0JhcjogdHJ1ZSxcbiAgbW9kdWxvQmFzZTogdHJ1ZSxcbiAgbW9kdWxvR1REOiB0cnVlLFxuICBtb2R1bG9UYWJUaXRsZTogdHJ1ZSwgIC8vIE1vZHVsbyB0aXR1bG8gZGUgcGVzdGFcdTAwRjFhcy5cbiAgbW9kdWxvVGFza01hbmFnZXI6IHRydWUsXG4gIG1vZHVsb0RhdGF2aWV3UXVlcmllczogdHJ1ZSxcbiAgdGFza05hdmlnYXRvck1vZHVsZTogdHJ1ZSwgIC8vIEFjdGl2YWRvIHBvciBkZWZlY3RvXG4gIGZpbGVfY2FtcG9zQ2VudHJhbCA6XCJFc3RydWN0dXJhL0NhbXBvcyBTaXN0ZW1hIEdlc3Rpb24vQ2FtcG9zIFNpc3RlbWEgQ2VudHJhbFwiLCBcbiAgZm9sZGVyX0Fub3RhY2lvbmVzOiBcIkFub3RhY2lvbmVzL05vdGFzXCIsXG4gIGluZGljZV9Bbm90YWNpb25lczogXCJBbm90YWNpb25lcy9JbmRpY2UgQW5vdGFjaW9uZXNcIixcbiAgZm9sZGVyX0FCbG9nOiBcIlN1YnNpc3RlbWFzL0FydGljdWxvcyBCbG9nL0FydGljdWxvc1wiLFxuICBpbmRpY2VfQUJsb2c6IFwiU3Vic2lzdGVtYXMvQXJ0aWN1bG9zIEJsb2cvSW5kaWNlIEFydGljdWxvcyBCbG9nXCIsXG4gIGZvbGRlcl9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9Db2RpZ29zXCIsXG4gIGluZGljZV9EZXNhcnJvbGxvczogXCJTdWJzaXN0ZW1hcy9EZXNhcnJvbGxvcy9JbmRpY2UgRGVzYXJyb2xsb1wiLFxuICBmb2xkZXJfRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Fc3R1ZGlvL1RlbWFzXCIsXG4gIGluZGljZV9Fc3R1ZGlvOiBcIlN1YnNpc3RlbWFzL0VzdHVkaW8vSW5kaWNlIEVzdHVkaW9cIixcbiAgZm9sZGVyX1JlcG9zaXRvcmlvTGlicm9zOiBcIlN1YnNpc3RlbWFzL0xpYnJvcy9SZXBvc2l0b3Jpb1wiLFxuICBpbmRpY2VfUmVwb3NpdG9yaW9MaWJyb3M6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0luZGljZSBSZXBvc2l0b3JpbyBMaWJyb3NcIixcbiAgZm9sZGVyX0JpYmxpb3RlY2E6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0JpYmxpb3RlY2FcIixcbiAgaW5kaWNlX0JpYmxpb3RlY2E6IFwiU3Vic2lzdGVtYXMvTGlicm9zL0luZGljZSBCaWJsaW90ZWNhXCIsXG4gIGZvbGRlcl9LaW5kbGVOb3RlczogXCJTdWJzaXN0ZW1hcy9MaWJyb3MvS2luZGxlXCIsXG4gIGluZGljZV9LaW5kbGVOb3RlczogXCJTdWJzaXN0ZW1hcy9MaWJyb3MvS2luZGxlL0luZGljZSBLaW5kbGVcIixcbiAgLy9mb2xkZXJfTGVjdHVyYVNlc2lvbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvU2VzaW9uZXMgZGUgTGVjdHVyYS9TZXNpb25lc1wiLFxuICAvL2luZGljZV9MZWN0dXJhU2VzaW9uZXM6IFwiU3Vic2lzdGVtYXMvTGVjdHVyYS9TZXNpb25lcyBkZSBMZWN0dXJhL0luZGljZSBTZXNpb25lcyBMZWN0dXJhXCIsXG4gIGZvbGRlcl9MZWN0dXJhUmVzdW1lbmVzOiBcIlN1YnNpc3RlbWFzL0xlY3R1cmEvTGlicm9zL1Jlc3VtZW5lc1wiLFxuICBpbmRpY2VfTGVjdHVyYVJlc3VtZW5lczogXCJTdWJzaXN0ZW1hcy9MZWN0dXJhL0xpYnJvcy9JbmRpY2UgUmVzdW1lbmVzXCIsXG4gIGZvbGRlcl9NZW50b3JpYXM6IFwiU3Vic2lzdGVtYXMvTWVudG9yaWFzL1Nlc2lvbmVzIE1lbnRvcmlhXCIsXG4gIGluZGljZV9NZW50b3JpYXM6IFwiU3Vic2lzdGVtYXMvTWVudG9yaWFzL0luZGljZSBNZW50b3JpYXNcIixcbiAgZm9sZGVyX01lcmNhZG86IFwiU3Vic2lzdGVtYXMvTWVyY2Fkby9MaXN0YXNcIixcbiAgaW5kaWNlX01lcmNhZG86IFwiU3Vic2lzdGVtYXMvTWVyY2Fkby9JbmRpY2UgTWVyY2Fkb1wiLFxuICBmb2xkZXJfTW9kdWxvc1Npc3RlbWE6IFwiU3Vic2lzdGVtYXMvTW9kdWxvcyBTaXN0ZW1hIEdlc3Rpb24vTW9kdWxvc1wiLFxuICBpbmRpY2VfTW9kdWxvc1Npc3RlbWE6IFwiU3Vic2lzdGVtYXMvTW9kdWxvcyBTaXN0ZW1hIEdlc3Rpb24vSW5kaWNlIE1vZHVsb3NcIixcbiAgZm9sZGVyX1RyYW5zYWNjaW9uZXM6IFwiU3Vic2lzdGVtYXMvVHJhbnNhY2Npb25lc1wiLFxuICBpbmRpY2VfVHJhbnNhY2Npb25lczogXCJTdWJzaXN0ZW1hcy9UcmFuc2FjY2lvbmVzL0luZGljZSBUcmFuc2FjY2lvbmVzXCIsXG4gIGZvbGRlcl9QcmVzZW50YWNpb25lczogXCJTdWJzaXN0ZW1hcy9QcmVzZW50YWNpb25lcy9Ob3Rhc1wiLFxuICBpbmRpY2VfUHJlc2VudGFjaW9uZXM6IFwiU3Vic2lzdGVtYXMvUHJlc2VudGFjaW9uZXMvSW5kaWNlIFByZXNlbnRhY2lvbmVzXCIsXG4gIGZvbGRlcl9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvUGllemFzXCIsXG4gIGluZGljZV9QdWJsaWNhY2lvbmVzOiBcIlN1YnNpc3RlbWFzL1B1YmxpY2FjaW9uZXMvSW5kaWNlIFB1YmxpY2FjaW9uZXNcIixcbiAgZm9sZGVyX1JlY2V0YXM6IFwiU3Vic2lzdGVtYXMvUmVjZXRhcy9SZWNldGFzXCIsXG4gIGluZGljZV9SZWNldGFzOiBcIlN1YnNpc3RlbWFzL1JlY2V0YXMvSW5kaWNlIFJlY2V0YXNcIixcbiAgZm9sZGVyX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9SZWdpc3Ryb3NcIixcbiAgaW5kaWNlX1JlZ2lzdHJvVGllbXBvOiBcIlN1YnNpc3RlbWFzL1JlZ2lzdHJvIFRpZW1wby9JbmRpY2UgUmVnaXN0cm8gVGllbXBvXCIsXG4gIGZvbGRlcl9Db250ZW5pZG9QYXJhRXN0dWRpbzogXCJTdWJzaXN0ZW1hcy9Db250ZW5pZG8gcGFyYSBFc3R1ZGlvL0NvbnRlbmlkb1wiLFxuICBpbmRpY2VfQ29udGVuaWRvUGFyYUVzdHVkaW86IFwiU3Vic2lzdGVtYXMvQ29udGVuaWRvIHBhcmEgRXN0dWRpby9JbmRpY2UgQ29udGVuaWRvIHBhcmEgRXN0dWRpb1wiLFxuICBmb2xkZXJfQ2FtcGFcdTAwRjFhOiBcIlN1YnNpc3RlbWFzL01hcmtldGluZy9Qcm95ZWN0b3NcIixcbiAgaW5kaWNlX0NhbXBhXHUwMEYxYTogXCJTdWJzaXN0ZW1hcy9NYXJrZXRpbmcvSW5kaWNlIENhbXBhXHUwMEYxYXNcIixcbiAgZm9sZGVyX0VudHJlZ2FibGU6IFwiU3Vic2lzdGVtYXMvTWFya2V0aW5nL0VudHJlZ2FibGVzXCIsXG4gIGluZGljZV9FbnRyZWdhYmxlOiBcIlN1YnNpc3RlbWFzL01hcmtldGluZy9JbmRpY2UgRW50cmVnYWJsZXNcIixcblxuICAvLyBFc3RydWN0dXJhXG4gIGZvbGRlcl9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhXCIsXG4gIGluZGljZV9BcmVhc1ZpZGE6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBWaWRhL0luZGljZSBBcmVhcyBkZSBWaWRhXCIsXG4gIGZvbGRlcl9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9BcmVhc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9BcmVhcyBkZSBJbnRlcmVzL0luZGljZSBBcmVhcyBkZSBJbnRlcmVzXCIsXG4gIGZvbGRlcl9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzXCIsXG4gIGluZGljZV9UZW1hc0ludGVyZXM6IFwiRXN0cnVjdHVyYS9UZW1hcyBkZSBJbnRlcmVzL0luZGljZSBUZW1hcyBkZSBJbnRlcmVzXCIsXG4gIGZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzOiBcIkVzdHJ1Y3R1cmEvUmVjdXJzb3MgUmVjdXJyZW50ZXMvUmVjdXJzb3NcIixcbiAgaW5kaWNlX1JlY3Vyc29zUmVjdXJyZW50ZXM6IFwiRXN0cnVjdHVyYS9SZWN1cnNvcyBSZWN1cnJlbnRlcy9JbmRpY2UgUmVjdXJzb3MgUmVjdXJyZW50ZXNcIixcbiAgZm9sZGVyX1Byb3llY3Rvc1E6IFwiRXN0cnVjdHVyYS9Qcm95ZWN0b3MgZGUgUVwiLFxuICBpbmRpY2VfUHJveWVjdG9zUTogXCJFc3RydWN0dXJhL1Byb3llY3RvcyBkZSBRL0luZGljZSBQcm95ZWN0b3MgZGUgUVwiLFxuXG5cbiAgZmlsZV9JbmJveDogXCJFc3RydWN0dXJhL0dURC9CYW5kZWphIGRlIEVudHJhZGEvQmFuZGVqYSBkZSBFbnRyYWRhXCIsXG4gIGZvbGRlcl9Qcm95ZWN0b3NHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvUHJveWVjdG9zIEdURC9Qcm95ZWN0b3NcIixcbiAgaW5kaWNlX1Byb3llY3Rvc0dURDogXCJFc3RydWN0dXJhL0dURC9Qcm95ZWN0b3MgR1REL0luZGljZSBQcm95ZWN0b3MgR1REXCIsXG4gIGZvbGRlcl9SU0dURDogXCJFc3RydWN0dXJhL0dURC9SZXZpc2lvbiBTZW1hbmFsL1JldmlzaW9uZXNcIixcbiAgaW5kaWNlX1JTR1REOiBcIkVzdHJ1Y3R1cmEvR1REL1JldmlzaW9uIFNlbWFuYWwvSW5kaWNlIFJldmlzaW9uIFNlbWFuYWxcIixcbiAgZm9sZGVyX1Npc3RlbWFHVEQ6IFwiRXN0cnVjdHVyYS9HVEQvU2lzdGVtYSBHVEQvU2lzdGVtYVwiLFxuICBpbmRpY2VfU2lzdGVtYUdURDogXCJFc3RydWN0dXJhL0dURC9TaXN0ZW1hIEdURC9JbmRpY2UgU2lzdGVtYSBHVERcIixcbiAgXG5cbiAgLy8gSm91cm5hbFxuICBmb2xkZXJfRGlhcmlvOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9EaWFyaW8vTm90YXNcIixcbiAgaW5kaWNlX0RpYXJpbzogXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL0luZGljZSBEaWFyaW9cIixcbiAgZm9sZGVyX1NlbWFuYWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL1NlbWFuYWwvTm90YXNcIixcbiAgaW5kaWNlX1NlbWFuYWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL1NlbWFuYWwvSW5kaWNlIFNlbWFuYWxcIixcbiAgZm9sZGVyX01lbnN1YWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL01lbnN1YWwvTm90YXNcIixcbiAgaW5kaWNlX01lbnN1YWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL01lbnN1YWwvSW5kaWNlIE1lbnN1YWxcIixcbiAgZm9sZGVyX1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL1RyaW1lc3RyYWwvTm90YXNcIixcbiAgaW5kaWNlX1RyaW1lc3RyYWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL1RyaW1lc3RyYWwvSW5kaWNlIFRyaW1lc3RyYWxcIixcbiAgZm9sZGVyX0FudWFsOiBcIkVzdHJ1Y3R1cmEvSm91cm5hbC9BbnVhbC9Ob3Rhc1wiLFxuICBpbmRpY2VfQW51YWw6IFwiRXN0cnVjdHVyYS9Kb3VybmFsL0FudWFsL0luZGljZSBBbnVhbFwiLFxuXG4gIC8vIENPTVBBU1NcbiAgZm9sZGVyX0NvbXBhc3NBbnVhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvUmVwb3J0ZXMvQW51YWxcIixcbiAgaW5kaWNlX0NvbXBhc3NBbnVhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvUmVwb3J0ZXMvSW5kaWNlIENvbXBhc3MgQW51YWxcIixcbiAgZm9sZGVyX0NvbXBhc3NUcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9SZXBvcnRlcy9UcmltZXN0cmFsXCIsXG4gIGluZGljZV9Db21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvUmVwb3J0ZXMvSW5kaWNlIENvbXBhc3MgdHJpbWVzdHJhbFwiLFxuICBmb2xkZXJfT2JqQ29tcGFzc0FudWFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9PYmpldGl2b3MvQW51YWxcIixcbiAgaW5kaWNlX09iakNvbXBhc3NBbnVhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL0luZGljZSBDb21wYXNzIEFudWFsXCIsXG4gIGZvbGRlcl9PYmpDb21wYXNzVHJpbWVzdHJhbDogXCJFc3RydWN0dXJhL0NvbXBhc3MvT2JqZXRpdm9zL1RyaW1lc3RyYWxcIixcbiAgaW5kaWNlX09iakNvbXBhc3NUcmltZXN0cmFsOiBcIkVzdHJ1Y3R1cmEvQ29tcGFzcy9PYmpldGl2b3MvSW5kaWNlIENvbXBhc3MgdHJpbWVzdHJhbFwiLFxuXG5cbiAgIC8vIFJlZ2lzdHJvcyBQZXJzb25hbGVzXG4gICBmb2xkZXJfQWdyYWRlY2ltaWVudG9zOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL0FncmFkZWNpbWllbnRvcy9Ob3Rhc1wiLFxuICAgaW5kaWNlX0FncmFkZWNpbWllbnRvczogXCJSZWdpc3Ryb3MgUGVyc29uYWxlcy9BZ3JhZGVjaW1pZW50b3MvSW5kaWNlIEFncmFkZWNpbWllbnRvc1wiLFxuICAgZm9sZGVyX1JlZmxleGlvbmVzOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZmxleGlvbmVzL05vdGFzXCIsXG4gICBpbmRpY2VfUmVmbGV4aW9uZXM6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvUmVmbGV4aW9uZXMvSW5kaWNlIFJlZmxleGlvbmVzXCIsXG4gICBmb2xkZXJfUmVnaXN0cm9zQWthc2hpa29zOiBcIlJlZ2lzdHJvcyBQZXJzb25hbGVzL1JlZ2lzdHJvcyBBa2FzaGlrb3MvTm90YXNcIixcbiAgIGluZGljZV9SZWdpc3Ryb3NBa2FzaGlrb3M6IFwiUmVnaXN0cm9zIFBlcnNvbmFsZXMvUmVnaXN0cm9zIEFrYXNoaWtvcy9JbmRpY2UgUmVnaXN0cm9zIEFrYXNoaWtvc1wiLFxuICAgXG59O1xuXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUEkudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjQgMDE6MTg6MzhcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuLyogc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL3N0YXJ0ZXJBUEkudHMgKi9cbmltcG9ydCB7IFRGaWxlLCBOb3RpY2UsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0RhdGVUaW1lICwgRHVyYXRpb259IGZyb20gJ2x1eG9uJztcbi8vIEludGVyZmFjZXNcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9JbnRlcmZhY2VzL05vdGVGaWVsZEhhbmRsZXInO1xuLy8gRmlsZUhhbmRsZXJzXG5pbXBvcnQgeyBBZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0FncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXJzJztcbmltcG9ydCB7IENvbnRlbmlkb1BhcmFFc3R1ZGlvRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DUEVGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgUmVjdXJzb3NSZWN1cnJlbnRlc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvUlJGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgUEdUREZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9QR1RERmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFBRRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL1BRRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEFub3RhY2lvbmVzRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9Bbm90YWNpb25lc0ZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBUcmFuc2FjY2lvbmVzRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9UcmFuc2FjY2lvbmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEFyZWFzSW50ZXJlc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggRXN0cnVjdHVyYS9BcmVhc0ludGVyZXNGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgQXJlYVZpZGFGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYVZpZGFGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBFc3RydWN0dXJhL25vZG9BcmVhVmlkYUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBPYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXJ9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IENvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkggfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0NvbXBhc3NQbGFuZWFjaW9uQW51YWxfRkgnO1xuaW1wb3J0IHsgUmVwb3NpdG9yaW9MaWJyb3NfRkggfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL1JlcG9zaXRvcmlvTGlicm9zX0ZIJztcbmltcG9ydCB7IEJpYmxpb3RlY2FfRkggfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIFN1YnNpc3RlbWFzL0JpYmxpb3RlY2FfRkgnO1xuaW1wb3J0IHsgQW51YWxfRkggfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEpvdXJuYWxzL0FudWFsX0ZIJztcbmltcG9ydCB7IFRyaW1lc3RyYWxGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9maWVsZEhhbmRsZXJzL0ZIIEpvdXJuYWxzL1RyaW1lc3RyYWxGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgQ2FtcGFcdTAwRjFhc0ZpZWxkSGFuZGxlciB9IGZyb20gJy4uL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvQ2FtcGFcdTAwRjFhc0ZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBFbnRyZWdhYmxlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9FbnRyZWdhYmxlRmllbGRIYW5kbGVyJztcbi8vIG9ic2lkaWFuXG5cbmV4cG9ydCBjbGFzcyBzdGFydGVyQVBJIHtcbiAgICAvL3ByaXZhdGUgdXRpbHNBcGk6IHV0aWxzQVBJO1xuICAgIHByaXZhdGUgcGx1Z2luOiBQbHVnaW47XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogb2JqZWN0OyAvLyBBc3VtaWVuZG8gcXVlIGVzIHVuIHN0cmluZ1xuICAgIHByaXZhdGUgdHA6IG9iamVjdDtcbiAgICBwcml2YXRlIG5vdGE6IG9iamVjdDtcbiAgICBwcml2YXRlIHBhdGhDYW1wb3M6IHN0cmluZzsgXG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBmb2xkZXIgZSBpbmRpY2UgZ2V0Y29uIHZhbG9yZXMgcHJlZGV0ZXJtaW5hZG9zIG8gbFx1MDBGM2dpY2EgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0ge307XG4gICAgICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuICAgIFxuICAgXG5cblxuICAgIGFzeW5jIGZpbGxOb3RlKGluZm9TdWJzaXN0ZW1hOiB7IGZvbGRlcjogc3RyaW5nOyBpbmRpY2U6IHN0cmluZzsgdHlwZTogc3RyaW5nOyB9LCBjYW1wb3M6IGFueSkge1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvU3Vic2lzdGVtYSwgaW5mb1N1YnNpc3RlbWEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuaW5mb1N1YnNpc3RlbWEuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbaW5mb1N1YnNpc3RlbWEuZm9sZGVyXTtcbiAgICAgICAgICB0aGlzLmluZm9TdWJzaXN0ZW1hLmluZGljZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2luZm9TdWJzaXN0ZW1hLmluZGljZV07XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm5vdGEsIGluZm9TdWJzaXN0ZW1hKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBsZXQgZmllbGRIYW5kbGVyOiBOb3RlRmllbGRIYW5kbGVyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgIGNhc2UgXCJBZ3JcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBBZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBQR1RERmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IFBRRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBeFwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEFub3RhY2lvbmVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJDUEVcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBDb250ZW5pZG9QYXJhRXN0dWRpb0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUlJcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZWN1cnNvc1JlY3VycmVudGVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJUeFwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IFRyYW5zYWNjaW9uZXNGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEFyZWFWaWRhRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXIodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIk9DQVwiOlxuICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IE9iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQ0FJXCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgQ29tcGFzc1BsYW5lYWNpb25BbnVhbF9GSCh0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUkxcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZXBvc2l0b3Jpb0xpYnJvc19GSCh0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiTEJcIjpcbiAgICAgICAgICAgICAgZmllbGRIYW5kbGVyID0gbmV3IEJpYmxpb3RlY2FfRkgodGhpcy50cCwgdGhpcy5pbmZvU3Vic2lzdGVtYSwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiUnhcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiQ3BcIjpcbiAgICAgICAgICAgIGZpZWxkSGFuZGxlciA9IG5ldyBDYW1wYVx1MDBGMWFzRmllbGRIYW5kbGVyKHRoaXMudHAsIHRoaXMuaW5mb1N1YnNpc3RlbWEsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJFTWt0XCI6XG4gICAgICAgICAgICBmaWVsZEhhbmRsZXIgPSBuZXcgRW50cmVnYWJsZUZpZWxkSGFuZGxlcih0aGlzLnRwLCB0aGlzLmluZm9TdWJzaXN0ZW1hLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBzZSBoYSBkZWZpbmlkbyB1biBtYW5lamFkb3IgZGUgY2FtcG9zIHBhcmEgZWwgdGlwbyAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IGBnZXQke2NhbXBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtcG8uc2xpY2UoMSl9YDtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZmllbGRIYW5kbGVyW2Z1bmN0aW9uTmFtZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvL2RlYnVnZ2VyO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YVtjYW1wb10gPSBhd2FpdCBmaWVsZEhhbmRsZXJbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgIG5vdGEgPSBhd2FpdCBmaWVsZEhhbmRsZXIuZ2V0Tm90YSgpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5vdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHRoaXMubm90YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFba2V5XSA9IG5vdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGNyZWFyIGVsIG9iamV0byBkZSByZWdpc3Ryby5cIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHNlIHB1ZG8gY3JlYXIgZWwgb2JqZXRvIGRlIHJlZ2lzdHJvLlwiKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuICAgIFxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gIEZvcm1hIGRlIGFjY2VkZXIgYWwgb2JqZXRvIHRwIG5vcm1hbCBxdWUgaGUgdXNhZG8gZGVzZGUgRFZKUyBjdWFuZG8gY3VycmVudCBGdW5jdGlvbnMgZXN0YSBjYXJnYWRvLlxuICAgICAgICAvL2NvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMucGx1Z2luc1sndGVtcGxhdGVyLW9ic2lkaWFuJ107XG4gICAgICAgIC8vY29uc3QgdHAgPSB0ZW1wbGF0ZXJQbHVnaW4udGVtcGxhdGVyLmN1cnJlbnRfZnVuY3Rpb25zX29iamVjdDtcbiAgICAgICAgLy8gLT4gdmVyc2lvbiBxdWUgZmFsbGEgc2kgbm8gZXN0YSBhcnJpYmEgZWwgcGx1Z2luIHBvcnF1ZSBoYWNlIGdldCBkZWwgcGx1Z2luIGRpcmVjdG8uIGNvbnN0IHRlbXBsYXRlclBsdWdpbiA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLnN5c3RlbSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygndHAgZW4gWUFNTFVwZGF0ZXJBUEkgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICByZXR1cm4gdHA7XG4gICAgfVxuXG5cbiAgICAgLy8gQ3JlYXIgTm90YSBkZXNkZSB0ZW1wbGF0ZVxuICAgICBhc3luYyBjcmVhdGVOb3RlKHN1YnNpc3RlbWE6IHN0cmluZykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyXyR7c3Vic2lzdGVtYX1gXX0vUGx0IC0gJHtzdWJzaXN0ZW1hfS5tZGA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gSW50ZW50YXIgb2J0ZW5lciBlbCBhcmNoaXZvIHBvciBwYXRoXG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG5cbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCBhcmNoaXZvIGVzIHVuIFRGaWxlXG4gICAgICAgICAgICBpZiAoISh0ZW1wbGF0ZUZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBURmlsZSwgbWFuZWphciBlbCBlcnJvclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRWwgdGVtcGxhdGUgcGFyYSBcIiR7c3Vic2lzdGVtYX1cIiBubyBzZSBlbmNvbnRyXHUwMEYzIG8gbm8gZXMgdW4gYXJjaGl2byB2XHUwMEUxbGlkby5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGR0Q29uc2VxID0gRGF0ZVRpbWUubm93KCkudG9Gb3JtYXQoJ3l5eXktTU0tZGQgSEhtbXNzJyk7XG4gICAgICAgICAgICBjb25zdCBmaWxlbmFtZSA9IGAke3N1YnNpc3RlbWF9ICR7ZHRDb25zZXF9YDtcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgICAgIGlmICghZm9sZGVyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMYSBjYXJwZXRhIFwiSW5ib3hcIiBubyBzZSBlbmNvbnRyXHUwMEYzLmApO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNyZWFyTm90YSAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGEgZnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgbm90YXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlRmlsZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHB1ZWRlcyBtYW5lamFyIGVsIGVycm9yLCBwb3IgZWplbXBsbywgbW9zdHJhbmRvIHVuIG1lbnNhamUgYWwgdXN1YXJpb1xuICAgICAgICAgICAgLy8gUHVlZGVzIHJlZW1wbGF6YXIgZXN0ZSBtZW5zYWplIGRlIGVycm9yIHBvciBjdWFscXVpZXIgYWNjaVx1MDBGM24gcXVlIGNvbnNpZGVyZXMgYWRlY3VhZGFcbiAgICAgICAgICAgIGFsZXJ0KGBFcnJvciBhbCBjcmVhciBsYSBub3RhOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRPdHJvc0FzdW50b3Moc3Vic2lzdGVtYXMpIHtcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgY2FtcG8gPSBbXTtcbiAgICBcbiAgICAgICAgZm9yIChsZXQgc3Vic2lzdGVtYSBvZiBzdWJzaXN0ZW1hcykge1xuICAgICAgICAgICAgLy8gUHJlZ3VudGEgaW5pY2lhbCBwYXJhIGluY2x1aXIgYWxnXHUwMEZBbiBzdWJzaXN0ZW1hIGNvbW8gb3JpZ2VuXG4gICAgICAgICAgICBsZXQgaW5jbHV5ZSA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBgRGVzZWEgYWdyZWdhciBhbGd1biAke3N1YnNpc3RlbWF9IGFjdGl2byBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgIGlmICghaW5jbHV5ZSkgY29udGludWU7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBjb250aW5cdTAwRkFhIGNvbiBlbCBzaWd1aWVudGUgc3Vic2lzdGVtYVxuICAgICAgICAgICAgZGVidWdnZXJcbiAgICAgICAgICAgIGxldCByZWN1cnNvc0FjdGl2b3MgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhzdWJzaXN0ZW1hKTtcbiAgICAgICAgICAgIGxldCBwcmltZXJBbGlhcyA9IHJlY3Vyc29zQWN0aXZvcy5tYXAoZmlsZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIHJldHVybiBtZXRhZGF0YSAmJiBtZXRhZGF0YS5hbGlhc2VzICYmIG1ldGFkYXRhLmFsaWFzZXMubGVuZ3RoID4gMCA/IG1ldGFkYXRhLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgfSkuZmlsdGVyKGFsaWFzID0+IGFsaWFzICE9PSBudWxsKTtcbiAgICBcbiAgICAgICAgICAgIHdoaWxlIChyZWN1cnNvc0FjdGl2b3MubGVuZ3RoID4gMCkgeyAvLyBDb250aW5cdTAwRkFhIG1pZW50cmFzIGhheWEgcmVjdXJzb3MgYWN0aXZvcyBwYXJhIGVsZWdpclxuICAgICAgICAgICAgICAgIGxldCBpbmRpY2VTZWxlY2Npb25hZG9cbiAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIucGF0aCksIGZhbHNlLCBgJHtzdWJzaXN0ZW1hfSBhY3Rpdm9zOmApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIHkgZWxpbWluYSBsYSBzZWxlY2NpXHUwMEYzbiBkZSBsb3MgYXJyZWdsb3MgcGFyYSBubyB2b2x2ZXIgYSBtb3N0cmFybGFcbiAgICAgICAgICAgICAgICAgICAgLy8gRW5jdWVudHJhIGVsIFx1MDBFRG5kaWNlIGRlbCBhcmNoaXZvIHNlbGVjY2lvbmFkbyBlbiByZWN1cnNvc0FjdGl2b3MgYmFzXHUwMEUxbmRvbm9zIGVuIGVsIGJhc2VuYW1lXG4gICAgICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLnBhdGggPT09IHNlbGVjY2lvbik7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjY2lvbiA9IGF3YWl0IHN1Z2dlc3RlcihwcmltZXJBbGlhcywgcmVjdXJzb3NBY3Rpdm9zLm1hcChiID0+IGIuYmFzZW5hbWUpLCBmYWxzZSwgYCR7c3Vic2lzdGVtYX0gYWN0aXZvczpgKTtcbiAgICAgICAgICAgICAgICBpZiAoIXNlbGVjY2lvbikgYnJlYWs7IC8vIFNpIG5vIGhheSBzZWxlY2NpXHUwMEYzbiwgc2FsZSBkZWwgY2ljbG9cbiAgICAgICAgICAgICAgICAvLyBFbmN1ZW50cmEgeSBlbGltaW5hIGxhIHNlbGVjY2lcdTAwRjNuIGRlIGxvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsYVxuICAgICAgICAgICAgICAgIC8vIEVuY3VlbnRyYSBlbCBcdTAwRURuZGljZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gZW4gcmVjdXJzb3NBY3Rpdm9zIGJhc1x1MDBFMW5kb25vcyBlbiBlbCBiYXNlbmFtZVxuICAgICAgICAgICAgICAgIGluZGljZVNlbGVjY2lvbmFkbyA9IHJlY3Vyc29zQWN0aXZvcy5maW5kSW5kZXgoYiA9PiBiLmJhc2VuYW1lID09PSBzZWxlY2Npb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5kaWNlU2VsZWNjaW9uYWRvICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2lzdGVtYSA9PT0gXCJBcmVhc1ZpZGFcIiB8fCBzdWJzaXN0ZW1hID09PSBcIkFyZWFzSW50ZXJlc1wiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjYW1wby5wdXNoKHJlY3Vyc29zQWN0aXZvc1tpbmRpY2VTZWxlY2Npb25hZG9dLnBhdGgpOyAvLyBBZ3JlZ2EgZWwgYmFzZW5hbWUgZGVsIGFyY2hpdm8gc2VsZWNjaW9uYWRvIGFsIGNhbXBvICAgIFxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY2FtcG8ucHVzaChyZWN1cnNvc0FjdGl2b3NbaW5kaWNlU2VsZWNjaW9uYWRvXS5iYXNlbmFtZSk7IC8vIEFncmVnYSBlbCBiYXNlbmFtZSBkZWwgYXJjaGl2byBzZWxlY2Npb25hZG8gYWwgY2FtcG9cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBFbGltaW5hIGVsIGVsZW1lbnRvIHNlbGVjY2lvbmFkbyBkZSBhbWJvcyBhcnJlZ2xvcyBwYXJhIG5vIHZvbHZlciBhIG1vc3RyYXJsb1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNvc0FjdGl2b3Muc3BsaWNlKGluZGljZVNlbGVjY2lvbmFkbywgMSk7XG4gICAgICAgICAgICAgICAgICAgIHByaW1lckFsaWFzLnNwbGljZShpbmRpY2VTZWxlY2Npb25hZG8sIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBxdWVkYW4gbVx1MDBFMXMgcmVjdXJzb3MgYWN0aXZvcywgbm8gcHJlZ3VudGEgc2kgZGVzZWEgYWdyZWdhciBvdHJvXG4gICAgICAgICAgICAgICAgaWYgKHJlY3Vyc29zQWN0aXZvcy5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIFByZWd1bnRhIHNpIGRlc2VhIGFncmVnYXIgb3RybyByZWdpc3RybyBkZWwgbWlzbW8gc3Vic2lzdGVtYVxuICAgICAgICAgICAgICAgIGxldCBkZXNlYUFncmVnYXJPdHJvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIGBEZXNlYSBhZ3JlZ2FyIG90cm8gJHtzdWJzaXN0ZW1hfSBjb21vIG9yaWdlbj9gKTtcbiAgICAgICAgICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAgICAgICAgIGlmICghZGVzZWFBZ3JlZ2FyT3RybykgYnJlYWs7IC8vIFNpIGxhIHJlc3B1ZXN0YSBlcyAnTm8nLCBzYWxlIGRlbCBjaWNsb1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIHJldHVybiBjYW1wbzsgLy8gUmV0b3JuYSBlbCBhcnJlZ2xvIGNhbXBvIGNvbiB0b2RhcyBsYXMgc2VsZWNjaW9uZXMgcmVhbGl6YWRhc1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBGVU5DSU9OIFFVRSBUUkFFIFRPREFTIExBUyBOT1RBUyBBQ1RJVkFTIERFIExPUyBTSVNURU1BUy4gLSBSZXZpc2FyIGVuIHF1ZSBsYSB1c28uLi5cbiAgICBhc3luYyBhY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXModHlwZU5hbWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idFx1MDBFOW4gdG9kb3MgbG9zIGFyY2hpdm9zIE1hcmtkb3duXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSl7XG5cbiAgICAgICAgICAgICAgICBjYXNlIFwiQXJlYXNJbnRlcmVzXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgLy8gRGV0ZXJtaW5hIGVsIG5vbWJyZSBkZSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGJhc2FkbyBlbiBlbCB0aXBvXG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyTmFtZSA9IFwiZm9sZGVyX1wiICsgdHlwZU5hbWU7XG4gICAgICAgICAgICAgICAgbGV0IHJlc291cmNlRm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbcmVzb3VyY2VGb2xkZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGRlIHJlY3Vyc29zIGV4aXN0ZSBwYXJhIGV2aXRhciBlcnJvcmVzXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNvdXJjZUZvbGRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBMYSBjYXJwZXRhIFwiJHtyZXNvdXJjZUZvbGRlck5hbWV9XCIgbm8gZXhpc3RlIGVuIGxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZWwgcGx1Z2luLmApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW107IC8vIFJldG9ybmEgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIGxhIGNhcnBldGEgbm8gZXhpc3RlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBhY3RpdmVSZXNvdXJjZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGaWx0cmEgbG9zIGFyY2hpdm9zIHF1ZSBlc3RcdTAwRTFuIGRlbnRybyBkZWwgZGlyZWN0b3JpbyBkZXNlYWRvIHkgdGllbmVuIGVzdGFkbyBcdUQ4M0RcdURGRTJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgocmVzb3VyY2VGb2xkZXIpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIGJ1c2NhciBsb3MgZXN0YWRvcyBlbiBlbCBmcm9udG1hdHRlclxuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVSZXNvdXJjZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9IC8vIEZpbiBTd2l0Y2hcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVSZXNvdXJjZXM7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYnVzY2FyIHJlY3Vyc29zIGFjdGl2b3M6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBbXTsgLy8gUmV0b3JuYSB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gZW4gY2FzbyBkZSBlcnJvclxuICAgICAgICB9XG4gICAgfVxuICAgIFxufVxuICAiLCAiaW1wb3J0IHsgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9BZ3JhZGVjaW1pZW50b3NGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIEFncmFkZWNpbWllbnRvc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgQWdyYWRlY2ltaWVudG9zRmllbGRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgLy8gZ2V0RmVjaGEgcGFyYSBkZXRlcm1pbmFyIHNpIGxhIGZlY2hhIGRlIGxhIHF1ZSBpbmljaWEgZXN0YSBlbiBlbCBhcmNoaXZvIGRlIG9yaWdlbi5cbiAgICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IGZlY2hhO1xuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMudHAuZmlsZS5keW5hbWljX2Z1bmN0aW9ucy5nZXQoXCJ0aXRsZVwiKTtcbiAgICBcbiAgICAgICAgaWYgKHRpdGxlICYmIHRpdGxlLnN0YXJ0c1dpdGgoXCJBZ3JhZGVjaW1pZW50b1wiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJBZ3JhZGVjaW1pZW50byBcIilbMV07XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZvLnBhdGggJiYgYWN0aXZvPy5wYXRoLnN0YXJ0c1dpdGgoXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCIpKSB7XG4gICAgICAgICAgZmVjaGEgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQgZGRkZCcpO1xuICAgICAgICAgIGZlY2hhID0gYXdhaXQgdGhpcy5wcm9tcHQoXCJcdTAwQkZEZSBxdVx1MDBFOSBkaWEgZXMgZWwgYWdyYWRlY2ltaWVudG8/P1wiLCBjdXJyZW50RGF0ZSAsIGZhbHNlLCBmYWxzZSk7XG4gICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGE7XG4gICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgIH1cblxuICBhc3luYyBnZXRBZ3JhZGVjaW1pZW50b3MoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGxldCBhZ3JhZGVjaW1pZW50b3MgPSBbXTtcbiAgICBsZXQgbnVtQWdyYWRlY2ltaWVudG9zID0gMDtcbiAgICBsZXQgb3RyYTtcbiAgICBkbyB7XG4gICAgICBjb25zdCBhZ3JhZGVjaW1pZW50byA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZXN0XHUwMEUxcyBhZ3JhZGVjaWRvP1wiLCBgR3JhY2lhcyBwb3IgJHtudW1BZ3JhZGVjaW1pZW50b3N9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgYWdyYWRlY2ltaWVudG9zLnB1c2goYWdyYWRlY2ltaWVudG8pO1xuICAgICAgbnVtQWdyYWRlY2ltaWVudG9zICs9IDE7XG4gICAgICBvdHJhID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU1x1MDBFRFwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBcIlx1MDBCRlF1aWVyZXMgYWdyZWdhciBvdHJvIGFncmFkZWNpbWllbnRvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gYWdyYWRlY2ltaWVudG9zO1xuICB9XG5cbn0iLCAiaW1wb3J0IHsgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgRmllbGRIYW5kbGVyVXRpbHMge1xuICBzdGF0aWMgYXN5bmMgY3JlYXJDYXJwZXRhKGZvbGRlclBhdGg6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHlhIGV4aXN0ZVxuICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBlbmN1ZW50cmEgbG9zIGFyY2hpdm9zIGRlIHN1YnNpc3RlbWFzIHkgY3V5byBlc3RhZG8gZXMgXHVEODNEXHVERkUyXG4gIC8vIEVzdGEgZnVuY2lcdTAwRjNuIHNhbGUgZGUgbWVudU90cm8sIGRlIHJlZ2lzdHJvIFRpZW1wby4gUmV2aXNhciBzaSBkZWJvIHNpbmNyb25pemFybGFzLlxuICBzdGF0aWMgYXN5bmMgZmluZE1haW5GaWxlc1dpdGhTdGF0ZSh0aXBvOiBzdHJpbmcsIHBhcmFtZXRybzogYW55LCBwbHVnaW46IGFueSkge1xuICAgIGNvbnN0IHByb3BlcnRpZXNUaXBvID0ge1xuICAgICAgQVY6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYSxcbiAgICAgIH0sXG4gICAgICBBSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFBROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9Qcm95ZWN0b3NRLFxuICAgICAgfSxcbiAgICAgIFBHVEQ6IHtcbiAgICAgICAgZm9sZGVyOiBwbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Byb3llY3Rvc0dURCxcbiAgICAgIH0sXG4gICAgICBUSToge1xuICAgICAgICBmb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfVGVtYXNJbnRlcmVzLFxuICAgICAgfSxcbiAgICAgIFJSOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWN1cnNvc1JlY3VycmVudGVzLFxuICAgICAgfSxcbiAgICAgIFRROiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9UcmltZXN0cmFsLFxuICAgICAgfSxcbiAgICAgIEFZOiB7XG4gICAgICAgIGZvbGRlcjogcGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BbnVhbCxcbiAgICAgIH0sXG4gICAgICAvLyBQdWVkZXMgY29udGludWFyIGFcdTAwRjFhZGllbmRvIG1cdTAwRTFzIGNhc29zIGFxdVx1MDBFRFxuICAgIH07XG5cbiAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgdGlwbyBlcyB1bmEgcHJvcGllZGFkIHZcdTAwRTFsaWRhIGFudGVzIGRlIGRlc2VzdHJ1Y3R1cmFyXG4gICAgaWYgKCFwcm9wZXJ0aWVzVGlwb1t0aXBvXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaXBvICR7dGlwb30gbm8gZXMgdlx1MDBFMWxpZG8uYCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXIgPSBbXTtcbiAgICBsZXQgZmlsZXMsIHRyaW1lc3RyZTogc3RyaW5nO1xuICAgIGNvbnN0IGZvbGRlciA9IHByb3BlcnRpZXNUaXBvW3RpcG9dLmZvbGRlcjtcbiAgICBzd2l0Y2ggKHRpcG8pIHtcbiAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICBpZiAoIXBhcmFtZXRybykgeyAvLyBwYXJhbWV0cm8gZW4gZXN0ZSBjYXNvIGVzIGVsIHRyaW1lc3RyZS4gU2luIHBhcmFtZXRybyBzZSBidXNjYSBlbCBub2RvQXJlYVZpZGFcbiAgICAgICAgICB0cmltZXN0cmUgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdChcInl5eXktUXFcIik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3VhbmRvIGVsIHRyaW1lc3RyZSBzaSBzZSBpbmdyZXNhIGVuIGxhIGZ1bmNpXHUwMEYzbiwgZW50b25jZXMgYnVzY2EgbGFzIEFyZWFzVmlkYSBkZWwgdHJpbWVzdHJlLlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0cmltZXN0cmUgPSBwYXJhbWV0cm87XG4gICAgICAgIH1cblxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSAmJiBmaWxlLm5hbWUuc3RhcnRzV2l0aCh0cmltZXN0cmUpKTtcblxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICBjYXNlIFwiVFFcIjpcbiAgICAgIGNhc2UgXCJBWVwiOlxuICAgICAgICBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJiAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKSk7XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgIGlmIChtZXRhZGF0YT8uZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKSB7XG4gICAgICAgICAgICBsZXQgYWN0aXZlRmlsZSA9IE9iamVjdC5hc3NpZ24oe30sIG1ldGFkYXRhKTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGUuZmlsZSA9IGZpbGU7XG4gICAgICAgICAgICBhY3RpdmVGaWxlc1dpdGhGcm9udG1hdHRlci5wdXNoKGFjdGl2ZUZpbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpKTtcbiAgICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIGxldCBhY3RpdmVGaWxlID0gT2JqZWN0LmFzc2lnbih7fSwgbWV0YWRhdGEpO1xuICAgICAgICAgICAgYWN0aXZlRmlsZS5maWxlID0gZmlsZTtcbiAgICAgICAgICAgIGFjdGl2ZUZpbGVzV2l0aEZyb250bWF0dGVyLnB1c2goYWN0aXZlRmlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlRmlsZXNXaXRoRnJvbnRtYXR0ZXI7XG4gIH1cbn0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL05vdGVGaWVsZEhhbmRsZXJCYXNlJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBOb3RlRmllbGRIYW5kbGVyQmFzZSBpbXBsZW1lbnRzIE5vdGVGaWVsZEhhbmRsZXJCYXNle1xuICBwcml2YXRlIHRwOiBhbnk7XG4gIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IGFueTtcbiAgcHJpdmF0ZSBzdWdnZXN0ZXI6IGFueTtcbiAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgcHJpdmF0ZSBmZWNoYUFncjogc3RyaW5nO1xuICBwcml2YXRlIHBsdWdpbjogYW55OyBcblxuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgIHRoaXMudHAgPSB0cDtcbiAgICB0aGlzLmluZm9TdWJzaXN0ZW1hID0gaW5mb1N1YnNpc3RlbWE7XG4gICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgdGhpcy5wcm9tcHQgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47IC8vIEFsbWFjZW5hciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBcbiAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICB9XG5cbiAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBsZXQgbWF4SWQgPSAwO1xuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICByZWdpc3Ryb3NFeGlzdGVudGVzLmZvckVhY2goKGZpbGU6IGFueSkgPT4ge1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLmlkICYmICFpc05hTihtZXRhZGF0YS5pZCkpIHtcbiAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBtYXhJZCArIDE7XG4gIH1cblxuICBhc3luYyBnZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICBjb25zdCBjdXJyZW50RGF5ID0gbmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VzLUVTJywgeyB3ZWVrZGF5OiAnbG9uZycgfSk7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IGAke2N1cnJlbnREYXRlfSAke2N1cnJlbnREYXl9YDtcbiAgICB0aGlzLm5vdGEuZmVjaGEgPSBmb3JtYXR0ZWREYXRlO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xufVxuXG4gIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5nZXRJZCgpO1xuICAgIHJldHVybiBbYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0gJHtpZH1gXTtcbiAgfVxuXG4gIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGZlY2hhID0gdGhpcy5ub3RhLmZlY2hhO1xuICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfSAke2ZlY2hhfS5tZGA7XG4gICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKTtcblxuICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7IC8vIExhbnphbW9zIHVuYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBMYW56YW1vcyBsYSBleGNlcGNpXHUwMEYzbiBwYXJhIGRldGVuZXIgbGEgY3JlYWNpXHUwMEYzblxuICAgIH1cbiAgfVxuXG5cbiAgYXN5bmMgZ2V0RXN0YWRvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICB9XG5cbiAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLm5vdGE7XG59XG5cbn0iLCAiaW1wb3J0IHsgcmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL1JlZmxleGlvbmVzRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5cbmV4cG9ydCBjbGFzcyBSZWZsZXhpb25lc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgUmVmbGV4aW9uZXNGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICAvLyBnZXRGZWNoYSBwYXJhIGRldGVybWluYXIgc2kgbGEgZmVjaGEgZGUgbGEgcXVlIGluaWNpYSBlc3RhIGVuIGVsIGFyY2hpdm8gZGUgb3JpZ2VuLlxuICAgIGFzeW5jIGdldEZlY2hhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGE7XG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50cC5maWxlLmR5bmFtaWNfZnVuY3Rpb25zLmdldChcInRpdGxlXCIpO1xuICAgIFxuICAgICAgICBpZiAodGl0bGUgJiYgdGl0bGUuc3RhcnRzV2l0aChcIlJlZmxleGlvblwiKSkgeyAvL0VuIGNhc28gZGUgcXVlIHlhIHRyYWlnYSBsYSBmZWNoYVxuICAgICAgICAgIGZlY2hhID0gdGl0bGUuc3BsaXQoXCJSZWZsZXhpb24gXCIpWzFdO1xuICAgICAgICB9IGVsc2UgaWYgKGFjdGl2by5wYXRoICYmIGFjdGl2bz8ucGF0aC5zdGFydHNXaXRoKFwiRXN0cnVjdHVyYS9Kb3VybmFsL0RpYXJpby9Ob3Rhc1wiKSkge1xuICAgICAgICAgIGZlY2hhID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NLUREIGRkZGQnKTtcbiAgICAgICAgICBmZWNoYSA9IGF3YWl0IHRoaXMucHJvbXB0KFwiXHUwMEJGRGUgcXVcdTAwRTkgZGlhIGVzIGxhIHJlZmxleGlcdTAwRjNuPz9cIiwgY3VycmVudERhdGUgLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS5mZWNoYSA9IGZlY2hhO1xuICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgICB9XG5cbiAgYXN5bmMgZ2V0UmVmbGV4aW9uKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICBsZXQgcmVmbGV4aW9uZXMgPSBbXTtcbiAgICBsZXQgbnVtUmVmbGV4aW9uZXMgPSAwO1xuICAgIGxldCBvdHJhO1xuICAgIGRvIHtcbiAgICAgIGNvbnN0IHJlZmxleGlvbiA9IGF3YWl0IHRoaXMucHJvbXB0KFwiUXVlIGVzdGFzIHBlbnNhbmRvP1wiLCBgUCR7bnVtUmVmbGV4aW9uZXN9YCwgZmFsc2UsIHRydWUpO1xuICAgICAgcmVmbGV4aW9uZXMucHVzaChyZWZsZXhpb24pO1xuICAgICAgbnVtUmVmbGV4aW9uZXMgKz0gMTtcbiAgICAgIG90cmEgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTXHUwMEVEXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIFwiXHUwMEJGUXVpZXJlcyBhZ3JlZ2FyIG90cm8gcFx1MDBFMXJyYWZvP1wiKTtcbiAgICB9IHdoaWxlIChvdHJhKTtcbiAgICByZXR1cm4gcmVmbGV4aW9uZXM7XG4gIH1cblxufSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9Ob3RlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7RGF0ZVRpbWV9IGZyb20gJ2x1eG9uJztcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRXN0YSBjbGFzZSBzaXJ2ZSBwYXJhIGN1YWxxdWllciBjbGFzZSBxdWUgc29sYW1lbnRlIGRlYmEgcHJvY2VzYXIgXG5sYXMgc2lndWllbnRlcyBwcm9waWVkYWRlczpcbiBjYW1wb3MgPSBbXCJpZFwiLFwiZmVjaGFcIixcInRpdHVsb1wiLFwiZGVzY3JpcGNpb25cIixcImVzdGFkb1wiLFwiYXN1bnRvXCIsXG4gXCJwcm95ZWN0b0dURFwiLFwiUHJveWVjdG9RXCIsXCJhcmVhSW50ZXJlc1wiLFwiYXJlYVZpZGFcIixcImFsaWFzZXNcIixcInJlbmFtZVwiXVxuUGFyYSBoZXJlZGFyIHRvZG8gZGUgZXN0YSBjbGFzZSBzaW4gbW9kaWZpY2FjaW9uZXMsIHNlIGRlYmUgaGFjZXIgXG5leHRlbmRpZW5kbyBsYSBzdWJjbGFzZSBkZSBlc3RhIHkgZGVmaW5pZW5kbyBlbCBjb25zdHJ1Y3RvcjpcblxuY2xhc3Mgc3Vic2lzdGVtYUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICB9XG59XG4uLi4gXG4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblxuZXhwb3J0IGNsYXNzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBOb3RlRmllbGRIYW5kbGVyIHtcbiAgICBwcml2YXRlIHRwOiBhbnk7XG4gICAgcHJpdmF0ZSBpbmZvU3Vic2lzdGVtYTogYW55O1xuICAgIHByaXZhdGUgc3VnZ2VzdGVyOiBhbnk7XG4gICAgcHJpdmF0ZSBwcm9tcHQ6IGFueTtcbiAgICBwcml2YXRlIHBsdWdpbjogYW55O1xuXG5cbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBpbmZvU3Vic2lzdGVtYTogYW55LCBwbHVnaW46IGFueSkge1xuICAgICAgICB0aGlzLnRwID0gdHA7XG4gICAgICAgIHRoaXMuaW5mb1N1YnNpc3RlbWEgPSBpbmZvU3Vic2lzdGVtYTtcbiAgICAgICAgdGhpcy5zdWdnZXN0ZXIgPSB0cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gdHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICB0aGlzLm5vdGEgPSB7fTsgLy8gSW5pY2lhbGl6YXIgbGEgbm90YVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgLy8gQWxtYWNlbmFyIGxhIGluc3RhbmNpYSBkZWwgcGx1Z2luXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgbGV0IG1heElkID0gMDtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICBjb25zdCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgcmVnaXN0cm9zRXhpc3RlbnRlcy5mb3JFYWNoKChmaWxlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YSAmJiBtZXRhZGF0YS5pZCAmJiAhaXNOYU4obWV0YWRhdGEuaWQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBwYXJzZUludChtZXRhZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID4gbWF4SWQpIG1heElkID0gaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm5vdGEuaWQgPSAgbWF4SWQgKyAxO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmlkO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGZlY2hhQWN0dWFsID0gRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIGZlY2hhQWN0dWFsID0gZmVjaGFBY3R1YWwuc2V0TG9jYWxlKCdlcycpO1xuICAgICAgICBmZWNoYUFjdHVhbCA9IGZlY2hhQWN0dWFsLnRvRm9ybWF0KCd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nKTtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gZmVjaGFBY3R1YWw7XG4gICAgICAgIHJldHVybiBmZWNoYUFjdHVhbDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRUaXR1bG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBhd2FpdCB0aGlzLnByb21wdChgVFx1MDBFRHR1bG8gZGUgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lfTpgLCBcIlwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0bGU7XG4gICAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBkZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMucHJvbXB0KGBEZXNjcmlwY2lcdTAwRjNuIGRlbCAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9OmAsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgcmV0dXJuICdcdUQ4M0RcdURGRTInO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG4gICAgICAgIFxuICAgICAgICBsZXQgcGFkcmVzID0gW107XG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIGxldCBub21icmUgPSBcIlwiO1xuICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgLy8xLiBzaUFzdW50byA9IGF3YWl0IHN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKSB7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1MgREUgUSBZIFBST1lFQ1RPIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIGFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YT8uZnJvbnRtYXR0ZXI/Lm5pdmVsUCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBuaXZlbEFJIG5vIGV4aXN0ZSBvIHN1IGNvbnZlcnNpXHUwMEYzbiBhIGVudGVybyByZXN1bHRhIGVuIE5hTiwgZXN0YWJsZWNlIG5pdmVsIGEgMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbFAgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFc3RlIHNvbG8gYXBsaWNhIHBhcmEgY3VhbmRvIGVzdG95IGNvbnN0cnV5ZW5kbyBkZXNkZSBBcmVhIGRlIEludGVyZXMgb3RyYSBBcmVhIGRlIEludGVyZXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiIHx8IG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZhIG5vIGVzIG9yaWdlbiBkZSBDcmVhbmRvIFJSIC0gUEdURCAtIFBRICBpZihzaUFzdW50bylcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc2lBc3VudG8sIG5vbWJyZTogcGFkcmVzIH1cbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRQcm95ZWN0b0dURCgpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBHVERcIiwgbnVsbCwgdGhpcy5wbHVnaW4pOyAvLyBQYXNhciBsYSBpbnN0YW5jaWEgZGVsIHBsdWdpbiBhcXVcdTAwRURsZXQgbm90YUYsIHRpdHVsbztcbiAgICAgICAgICAgIGxldCB0aXR1bG8sIG5pdmVsO1xuICAgICAgICAgICAgbGV0IHBhZHJlUEdURCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBQcm95ZWN0byBHVEQ/YCk7XG4gICAgICAgICAgICBpZiAocGFkcmVQR1REKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5vdGFGID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIobm90YXNGLm1hcChiID0+IGIudGl0dWxvKSwgbm90YXNGLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFByb3llY3RvIEdURCBlcyBwYWRyZSBkZSAke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgICAgICBpZiAobm90YUYgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlNpbiBwcm95ZWN0byBHVEQgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RhRj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhRi5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhRi5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFtub3RhRi5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbbm90YUYudGl0dWxvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gdGl0dWxvLmNvbmNhdChub3RhRi5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ucHVzaChub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wcm95ZWN0b0dURDtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0UHJveWVjdG9RKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgbGV0IG5vdGFGLCB0aXR1bG8sIG5pdmVsO1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgbm90YXNGID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlBRXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICBsZXQgcGFkcmVRID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFByb3llY3RvIFE/YCk7XG5cbiAgICAgICAgICAgIGlmIChwYWRyZVEpIHtcbiAgICAgICAgICAgICAgICBub3RhRiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKG5vdGFzRi5tYXAoYiA9PiBiLnRpdHVsbyksIG5vdGFzRi5tYXAoYiA9PiBiKSwgZmFsc2UsIGBcdTAwQkZRdVx1MDBFOSBQcm95ZWN0byBRIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIFEgZGVmaW5pZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhRj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmIChub3RhRj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGFGLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGFGLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhRi5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhRi5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRj8udGl0dWxvXTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YUY/LnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YUYucHJveWVjdG9HVEQubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm90YUYucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtdO1xuICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnByb3llY3RvUTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFJbnRlcmVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgbGV0IGFyZWFJbnRlcmVzLCBuaXZlbCwgdGl0dWxvLCBwYWRyZUFJLCBhcnJheUFJO1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgYXJlYXNJbnRlcmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFJXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICBwYWRyZUFJID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgZmFsc2UsIGAgJHt0aGlzLm5vdGEudGl0dWxvfSBlcyBoaWpvIGRlIHVuIFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXM6YCk7XG4gICAgICAgICAgICBpZiAocGFkcmVBSSkge1xuICAgICAgICAgICAgICAgIGFyZWFJbnRlcmVzID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNJbnRlcmVzLm1hcChiID0+IGIudGl0dWxvKSwgYXJlYXNJbnRlcmVzLm1hcChiID0+IGIpLCBmYWxzZSwgYFx1MDBCRlF1XHUwMEU5IFx1MDBDMXJlYSBkZSBJbnRlclx1MDBFOXMgZXMgcGFkcmUgZGUgJHt0aGlzLm5vdGEudGl0dWxvfT86YCk7XG4gICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTaW4gXHUwMEMxcmVhIGRlIEludGVyXHUwMEU5c1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFthcmVhSW50ZXJlcy50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmVhSW50ZXJlcz8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSB0aXR1bG8uY29uY2F0KGFyZWFJbnRlcmVzLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmVhSW50ZXJlcz8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdHVsby5wdXNoKGFyZWFJbnRlcmVzLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZWFJbnRlcmVzPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJlYUludGVyZXMuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXJlYUludGVyZXMuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZWFJbnRlcmVzLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IGFyZWFJbnRlcmVzLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQoYXJlYUludGVyZXMubml2ZWxBSSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aXR1bG8gPSBbXTtcbiAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhSW50ZXJlcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFWaWRhKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGxldCBhcmVhc1ZpZGEgPSB7fTtcbiAgICAgICAgbGV0IG5vQVYgPSB7XG4gICAgICAgICAgICBmaWxlOiB7XG4gICAgICAgICAgICAgICAgYmFzZW5hbWU6IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhcmVhVmlkYTogXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIlxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBsZXQgcGFkcmVBViA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBcdTAwQzFyZWEgZGUgVmlkYT9gKTtcbiAgICAgICAgICAgIGlmIChwYWRyZUFWKSB7XG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFWXCIsIG51bGwsIHRoaXMucGx1Z2luKTsgLy8gUGFzYXIgbGEgaW5zdGFuY2lhIGRlbCBwbHVnaW4gYXF1XHUwMEVEXG4gICAgICAgICAgICAgICAgYXJlYXNWaWRhLnB1c2gobm9BVik7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXJlYXNWaWRhLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGFyZWFzVmlkYS5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLCBmYWxzZSwgYFx1MDBCRkEgcXVcdTAwRTkgXHUwMEMxcmVhIGRlIFZpZGEgcGVydGVuZWNlICQke3RoaXMubm90YS50aXR1bG99PzpgKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFyZWFWaWRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hcmVhVmlkYTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGA7XG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YSh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcik7XG5cbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuXG5leHBvcnQgY2xhc3MgQ29udGVuaWRvUGFyYUVzdHVkaW9GaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG4gIH0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIFJlY3Vyc29zUmVjdXJyZW50ZXNGaWVsZEhhbmRsZXIgZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVye1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG4gIH0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBQR1RERmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuXG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgc3Vic2lzdGVtYXMsIHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICBsZXQgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIG5vdGEuZnJvbnRtYXR0ZXIgZXhpc3RlIHkgYXNpZ25hciB1biBvYmpldG8gdmFjXHUwMEVEbyBhIGZpbGVcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIgPSBub3RhLmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlci5maWxlID0ge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSwgYWN0aXZvKTtcbiAgICAgICAgICAgIHBhZHJlcy51bnNoaWZ0KG5vbWJyZSk7IC8vIEFcdTAwRjFhZGUgZWwgbm9tYnJlIGFsIGluaWNpbyBkZWwgYXJyZWdsbywgZGVzcGxhemFuZG8gbG9zIGRlbVx1MDBFMXMgZWxlbWVudG9zXG4gICAgICAgICAgICBzd2l0Y2godGlwb1Npc3RlbWEpIHsgLy8gRXN0b3kgY3JlYW5kbyB1bjogXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJSXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ1BFXCI6ICAvLyBDb250ZW5pZG8gcGFyYSBFc3R1ZGlvXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGE/LmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBSUiAtIFBHVEQgLSBQUSAgaWYoc2lBc3VudG8pXG5cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gUlJcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOiAgLy8gRXN0b3kgQ3JlYW5kbyB1biBQUSBcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUFEgcmVxdWllcmUgb2JsaWdhdG9yaWFtZW50ZSB0ZW5lciBBcmVhIGRlIFZpZGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhICE9PSB1bmRlZmluZWQgJiYgbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENcdTAwRjNkaWdvIGEgZWplY3V0YXIgc2kgYXJlYVZpZGEgZXhpc3RlIHkgbm8gZXMgdW5hIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIHRpcG8gZGUgbm90YSBhY3RpdmEgY3JlYW5kbyB1biBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVW4gUHJveWVjdG8gZGUgUSBzb2xvIHB1ZWRlIGluaWNpYXIgZGUgdW4gQVYsIEFJIG8gUEdURC4gQXN1bnRvIG5vIGRlZmluaWRvLlwiKTsgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJlYSBkZSB2aWRhIGRlIGFjdGl2YSwgY3JlYW5kbyBQUSBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRvZG9zIGxvcyBwcm95ZWN0b3MgZGUgUSByZXF1aWVyZW4gQXJlYSBkZSBWaWRhLiBBc3VudG8gbm8gZGVmaW5pZG8uXCIpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNleyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgfSAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gUFFcbiAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjogLy8gQ3JlYW5kbyB1biBBSVxuICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMQUlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsQUkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAvLyBDYXNlIEFJIC0gQVZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBzd2l0Y2ggY2FzZSBzb2JyZSBlbCB0aXBvIGRlIG5vdGEgYWN0aXZhLlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIHVuIEFJXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogIC8vIEFzdW50byBEZSBsYSBub3RhIHF1ZSBlc3RcdTAwRTkgY3JlYW5kbyBjdWFuZG8gZXMgY3VhbHF1ZWlyIGNvc2FcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXBlbmRpZW5kbyBkZSBsYSBlc3RydWN0dXJhLCBnZXRBc3VudG8gZGViZXJpYSB0ZW5lciBzdSBjbGFzaWZpY2FjaVx1MDBGM24uIEFxdWkgdmFzIGEgdGVuZXIgdW4gZXJyb3IuXCIpIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IC8vIHN3aXRjaCB0aXBvKHNpc3RlbWEpIC0+IFNvYnJlIGxhIG5vdGEgcXVlIGVzdFx1MDBFOSBjcmVhbmRvLlxuXG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4ge3NpQXN1bnRvLCBub21icmU6IHBhZHJlc31cbiAgICB9XG5cbiAgICBhc3luYyBnZXRQcm95ZWN0b0dURCgpIHtcbiAgICAgICAgbGV0IHRpcG8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub3Rhc0YgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiUEdURFwiLCBudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIGxldCBub3RhRiwgdGl0dWxvID0gW107XG4gICAgICAgIGxldCBwYWRyZVBHVEQ7XG4gICAgXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBwYWRyZVBHVEQgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCBmYWxzZSwgYCR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBQcm95ZWN0byBHVEQ/YCk7XG4gICAgXG4gICAgICAgICAgICBpZiAocGFkcmVQR1REKSB7XG4gICAgICAgICAgICAgICAgbm90YUYgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcihub3Rhc0YubWFwKGIgPT4gYi50aXR1bG8pLCBub3Rhc0YubWFwKGIgPT4gYiksIGZhbHNlLCBgXHUwMEJGUXVcdTAwRTkgUHJveWVjdG8gR1REIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIEdURCBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBBcnJheS5pc0FycmF5KG5vdGFGPy5hcmVhSW50ZXJlcykgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm90YUY/LmFyZWFJbnRlcmVzID8gW25vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyldIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YUY/LmFyZWFWaWRhIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoQXJyYXkuaXNBcnJheShub3RhRi5hcmVhVmlkYSkgPyBub3RhRi5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpIDogbm90YUYuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b1EpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBub3RhRi5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBub3RhRj8ucHJveWVjdG9RID8gW25vdGFGLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRi50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSB0aXR1bG8uY29uY2F0KG5vdGFGLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ucHVzaChub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9ICFpc05hTihwYXJzZUludChub3RhRj8ubml2ZWxQKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBhcnNlSW50KG5vdGFGLm5pdmVsUCkgKyAxIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wcm95ZWN0b0dURDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBsZXQgbmV3TmFtZSwgZm9sZGVyO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgaWYgKHRoaXMubm90YS5hcmVhVmlkYT09PVwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCIpe1xuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhcy8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vT3RyYXNgXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfWBcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyKTtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgXG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgfSIsICJpbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFBRRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9QUUZpZWxkSGFuZGxlcic7XG5cbmV4cG9ydCBjbGFzcyBQUUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBQUUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuXG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgc3Vic2lzdGVtYXMsIHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICBsZXQgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIG5vdGEuZnJvbnRtYXR0ZXIgZXhpc3RlIHkgYXNpZ25hciB1biBvYmpldG8gdmFjXHUwMEVEbyBhIGZpbGVcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIgPSBub3RhLmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlci5maWxlID0ge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSwgYWN0aXZvKTtcbiAgICAgICAgICAgIHBhZHJlcy51bnNoaWZ0KG5vbWJyZSk7IC8vIEFcdTAwRjFhZGUgZWwgbm9tYnJlIGFsIGluaWNpbyBkZWwgYXJyZWdsbywgZGVzcGxhemFuZG8gbG9zIGRlbVx1MDBFMXMgZWxlbWVudG9zXG4gICAgICAgICAgICBzd2l0Y2godGlwb1Npc3RlbWEpIHsgLy8gRXN0b3kgY3JlYW5kbyB1bjogXG4gICAgICAgICAgICAgICAgY2FzZSBcIlJSXCI6XG4gICAgICAgICAgICAgICAgY2FzZSBcIlBHVERcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiVHhcIjpcbiAgICAgICAgICAgICAgICBjYXNlIFwiQ1BFXCI6ICAvLyBDb250ZW5pZG8gcGFyYSBFc3R1ZGlvXG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBRXCIpeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm9tYnJlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUEdURFwiKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFtub21icmVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IHRoaXMubm90YS5wcm95ZWN0b0dURC5jb25jYXQobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGUgeSB1c2Ftb3MgcHVzaCBwYXJhIGFncmVnYXJsbyBhIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEucHJveWVjdG9HVEQgbm8gZXhpc3RlLCB0aGlzLm5vdGEucHJveWVjdG9HVEQgeWEgZXN0XHUwMEUxIGVzdGFibGVjaWRvIGVuIFwiXCIgcG9yIGRlZmVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMUFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb21wcnVlYmEgc2kgbml2ZWxBSSBleGlzdGUgeSBubyBlcyBOYU4gZGVzcHVcdTAwRTlzIGRlIGludGVudGFyIGNvbnZlcnRpcmxvIGEgZW50ZXJvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGE/LmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcInx8bm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIil7ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7IC8vIGFjdGl2YSBubyBlcyBvcmlnZW4gZGUgQ3JlYW5kbyBSUiAtIFBHVEQgLSBQUSAgaWYoc2lBc3VudG8pXG5cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gUlJcbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOiAgLy8gRXN0b3kgQ3JlYW5kbyB1biBQUSBcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUFEgcmVxdWllcmUgb2JsaWdhdG9yaWFtZW50ZSB0ZW5lciBBcmVhIGRlIFZpZGEuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhICE9PSB1bmRlZmluZWQgJiYgbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENcdTAwRjNkaWdvIGEgZWplY3V0YXIgc2kgYXJlYVZpZGEgZXhpc3RlIHkgbm8gZXMgdW5hIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwifHxub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKXsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5pdmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSl7IC8vIHRpcG8gZGUgbm90YSBhY3RpdmEgY3JlYW5kbyB1biBQUS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZSB5IHVzYW1vcyBwdXNoIHBhcmEgYWdyZWdhcmxvIGEgdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLmFyZWFJbnRlcmVzIGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50byAoZXhjbHV5ZW5kbyBlbCBwcmltZXIgZWxlbWVudG8geWEgYWdyZWdhZG8gcXVlIGVzIG5vdGEudGl0dWxvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiVW4gUHJveWVjdG8gZGUgUSBzb2xvIHB1ZWRlIGluaWNpYXIgZGUgdW4gQVYsIEFJIG8gUEdURC4gQXN1bnRvIG5vIGRlZmluaWRvLlwiKTsgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgLy8gQXJlYSBkZSB2aWRhIGRlIGFjdGl2YSwgY3JlYW5kbyBQUSBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRvZG9zIGxvcyBwcm95ZWN0b3MgZGUgUSByZXF1aWVyZW4gQXJlYSBkZSBWaWRhLiBBc3VudG8gbm8gZGVmaW5pZG8uXCIpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNleyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgfSAgICAgXG4gICAgICAgICAgICAgICAgYnJlYWs7IC8vIENyZWFuZG8gUFFcbiAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjogLy8gQ3JlYW5kbyB1biBBSVxuICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBJTlRFUkVTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwb25pZW5kbyBzaSBBc3VudG8gZW4gZmFsc2UgcGFyYSBsYXMgbm90YXMgZXN0cnVjdHVyYSBBSSB5IEFWLiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMQUlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXI/Lm5pdmVsQUkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsQUkgPSBuaXZlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7ICAvLyBDYXNlIEFJIC0gQVZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfSAvLyBzd2l0Y2ggY2FzZSBzb2JyZSBlbCB0aXBvIGRlIG5vdGEgYWN0aXZhLlxuICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBDcmVhbmRvIHVuIEFJXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGVmYXVsdDogIC8vIEFzdW50byBEZSBsYSBub3RhIHF1ZSBlc3RcdTAwRTkgY3JlYW5kbyBjdWFuZG8gZXMgY3VhbHF1ZWlyIGNvc2FcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEZXBlbmRpZW5kbyBkZSBsYSBlc3RydWN0dXJhLCBnZXRBc3VudG8gZGViZXJpYSB0ZW5lciBzdSBjbGFzaWZpY2FjaVx1MDBGM24uIEFxdWkgdmFzIGEgdGVuZXIgdW4gZXJyb3IuXCIpIFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IC8vIHN3aXRjaCB0aXBvKHNpc3RlbWEpIC0+IFNvYnJlIGxhIG5vdGEgcXVlIGVzdFx1MDBFOSBjcmVhbmRvLlxuXG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9IFxuICAgICAgICByZXR1cm4ge3NpQXN1bnRvLCBub21icmU6IHBhZHJlc31cbiAgICB9XG5cbiAgICBhc3luYyBnZXRQcm95ZWN0b0dURCgpIHtcbiAgICAgICAgbGV0IHRpcG8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub3Rhc0YgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiUEdURFwiLCBudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIGxldCBub3RhRiwgdGl0dWxvID0gW107XG4gICAgICAgIGxldCBwYWRyZVBHVEQ7XG4gICAgXG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgICAgICBwYWRyZVBHVEQgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCBmYWxzZSwgYCR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSB1biBQcm95ZWN0byBHVEQ/YCk7XG4gICAgXG4gICAgICAgICAgICBpZiAocGFkcmVQR1REKSB7XG4gICAgICAgICAgICAgICAgbm90YUYgPSBhd2FpdCB0aGlzLnN1Z2dlc3Rlcihub3Rhc0YubWFwKGIgPT4gYi50aXR1bG8pLCBub3Rhc0YubWFwKGIgPT4gYiksIGZhbHNlLCBgXHUwMEJGUXVcdTAwRTkgUHJveWVjdG8gR1REIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChub3RhRiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIHByb3llY3RvIEdURCBkZWZpbmlkby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBBcnJheS5pc0FycmF5KG5vdGFGPy5hcmVhSW50ZXJlcykgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG5vdGFGLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbm90YUY/LmFyZWFJbnRlcmVzID8gW25vdGFGLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyldIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBbXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YUY/LmFyZWFWaWRhIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyAoQXJyYXkuaXNBcnJheShub3RhRi5hcmVhVmlkYSkgPyBub3RhRi5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpIDogbm90YUYuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBBcnJheS5pc0FycmF5KG5vdGFGPy5wcm95ZWN0b1EpIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBub3RhRi5wcm95ZWN0b1EubWFwKGVsZW1lbnRvID0+IGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBub3RhRj8ucHJveWVjdG9RID8gW25vdGFGLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpXSBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogW107XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRpdHVsbyA9IFtub3RhRi50aXR1bG9dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhRj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSB0aXR1bG8uY29uY2F0KG5vdGFGLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PiBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YUY/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG8ucHVzaChub3RhRi5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9ICFpc05hTihwYXJzZUludChub3RhRj8ubml2ZWxQKSkgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHBhcnNlSW50KG5vdGFGLm5pdmVsUCkgKyAxIFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGl0dWxvID0gW107XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5wcm95ZWN0b0dURDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpe1xuICAgICAgICBsZXQgbmV3TmFtZSwgZm9sZGVyO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IGZvbGRlckFWID0gQXJyYXkuaXNBcnJheSh0aGlzLm5vdGEuYXJlYVZpZGEpPyB0aGlzLm5vdGEuYXJlYVZpZGFbMF0gOiB0aGlzLm5vdGEuYXJlYVZpZGE7IFxuICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHtmb2xkZXJBVn0vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke2ZvbGRlckFWfWBcbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgIFxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCl7ICBcbiAgICAgICAgbGV0IHRpcG9TaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlO1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCB0cmltZXN0cmU7XG4gICAgICAgIC8vbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhcIlRyaW1lc3RyYWxcIik7IC8vIEZ1bmNpb25hIGVuIGxhIHZlcnNpXHUwMEYzbiAxLjAgZGUgQXJlYXMgZGUgVmlkYS5cbiAgICAgICAgbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiVFFcIixudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIFxuICAgICAgICBzd2l0Y2godGlwb1Npc3RlbWEpIHtcbiAgICAgICAgICAgIGNhc2UgXCJBVlwiOlxuICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBwZXJtaXRpciBhbCB1c3VhcmlvIGVsZWdpciB1bmEgdGFyZWEgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSx0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGZhbHNlLCBgVHJpbWVzdHJlIGRlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIk9DQVwiOiAvLyBPYmpldGl2b0NvbXBhc3NBbnVhbCBcbiAgICAgICAgICAgICAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RMWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTJgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEzYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RNGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGBcdTAwQkZFbiBxdVx1MDBFOSB0cmltZXN0cmUgZGVsICR7dGhpcy5ub3RhLmFcdTAwRjFvfSBjb25zaWRlcmFzIHF1ZSBzZSBwdWVkZSByZWFsaXphciBlc2Ugb2JqZXRpdm8/YFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQ1RJXCI6IC8vIENvbXBhc3NUcmltZXN0cmFsSW5pY2lvXG4gICAgICAgICAgICAgICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgW1wiUTFcIiwgXCJRMlwiLCBcIlEzXCIsIFwiUTRcIl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTFgLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEyYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5ub3RhLmFcdTAwRjFvfS1RM2AsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGAke3RoaXMubm90YS5hXHUwMEYxb30tUTRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBgXHUwMEJGRGUgcXVcdTAwRTkgdHJpbWVzdHJlIGRlbCAke3RoaXMubm90YS5hXHUwMEYxb30gZXMgZXN0YSBwbGFuZWFjaVx1MDBGM24/YFxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyBTaSBlbCB1c3VhcmlvIGVsaWdlIFwiT3Ryb1wiIG8gY3VhbHF1aWVyIG90cmEgb3BjaVx1MDBGM24uXG4gICAgICAgICAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIodHJpbWVzdHJlcy5tYXAoYiA9PiBiLmZpbGUuYmFzZW5hbWUpLHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLnBhdGgpLCBmYWxzZSwgYFRyaW1lc3RyZSBkZWwgJHtub21icmVTaXN0ZW1hfTpgKTtcbiAgICAgICAgICAgICAgICB9XG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHRyaW1lc3RyZTtcbiAgICAgICAgcmV0dXJuIHRyaW1lc3RyZTtcbiAgICB9XG4gIH0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlcn0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9Bbm90YWNpb25lc0ZpZWxkSGFuZGxlcic7XG5cbmV4cG9ydCBjbGFzcyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBBbm90YWNpb25lc0ZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgICB0aGlzLnBhdGhDYW1wb3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5maWxlX2NhbXBvc0NlbnRyYWwgKyBcIi5tZFwiO1xuICAgIH1cblxuICAgIGFzeW5jIGdldENsYXNpZmljYWNpb24oKTogUHJvbWlzZTx7IGNsYXNlOiBzdHJpbmcgfCBudWxsLCB0YWc6IHN0cmluZyB8IG51bGwgfSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBsZXQgY2xhc2lmaWNhY2lvbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGxldCB0YWdDbGFzaWZpY2FjaW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgbGV0IGNsYXNpZmljYWNpb25BWDogeyBbeDogc3RyaW5nXTogYW55OyB9ID0ge307XG4gICAgICAgIGxldCB0YWdzQ2xhc2lmaWNhY2lvbkFYOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgbnVldmFDbGFzaWZpY2FjaW9uID0gZmFsc2U7XG4gICAgXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgICAgIGNsYXNpZmljYWNpb25BWCA9IGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ3NDbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50YWdzQ2xhc2lmaWNhY2lvbkFYIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgc3VnZ2VzdGVyKGNsYXNpZmljYWNpb25BWCwgdGFnc0NsYXNpZmljYWNpb25BWCwgZmFsc2UsIFwiXHUwMEJGQ2xhc2lmaWNhclx1MDBFRGFzIGVzdGEgbm90YSBiYWpvIGFsZ3VuYSBkZSBsYXMgc2lndWllbnRlcyBjYXRlZ29yXHUwMEVEYXM/XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhZ0NsYXNpZmljYWNpb24gPT09IFwiTnVldm9cIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwicHJvbXB0XCIpO1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIG5vbWJyZSBkZSBsYSBudWV2YSBjbGFzaWZpY2FjaVx1MDBGM24gcXVlIHZhcyBhIGluZ3Jlc2FyP1wiLCBcIk1pQ2xhc2lmaWNhY2lcdTAwRjNuXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgcHJvbXB0KFwiXHUwMEJGQ3VhbCBlcyBlbCB0YWcgcXVlIHV0aWxpemFyYXMgcGFyYSBcIiArIGNsYXNpZmljYWNpb24gKyBcIj8uIE5vIHV0aWxpY2VzIGVzcGFjaW9zIGVuIGxhIGRlZmluaWNpXHUwMEYzbiBkZWwgdGFnLlwiLCBcIm51ZXZvVGFnXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBudWV2YUNsYXNpZmljYWNpb24gPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBcIk5pbmd1bmFcIikge1xuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBcIlwiO1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBcIlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRpY2UgPSB0YWdzQ2xhc2lmaWNhY2lvbkFYLmluZGV4T2YodGFnQ2xhc2lmaWNhY2lvbik7XG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IGNsYXNpZmljYWNpb25BWFtpbmRpY2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXG4gICAgICAgIGlmIChudWV2YUNsYXNpZmljYWNpb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCAoZnJvbnRtYXR0ZXI6IHsgdGl0dWxvQ2xhc2lmaWNhY2lvbkFYOiBhbnlbXSwgdGFnc0NsYXNpZmljYWNpb25BWDogYW55W10gfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDbGFzaWZpY2FjaW9uID0gWy4uLmNsYXNpZmljYWNpb25BWCwgY2xhc2lmaWNhY2lvbl07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RhZ0NsYXNpZmljYWNpb24gPSBbLi4udGFnc0NsYXNpZmljYWNpb25BWCwgdGFnQ2xhc2lmaWNhY2lvbl07XG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRpdHVsb0NsYXNpZmljYWNpb25BWCA9IG5ld0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRhZ3NDbGFzaWZpY2FjaW9uQVggPSBuZXdUYWdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZyb250bWF0dGVyIGFjdHVhbGl6YWRvIGNvbiBcdTAwRTl4aXRvXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiAhPT0gXCJcIikge1xuICAgICAgICAgICAgdGFnQ2xhc2lmaWNhY2lvbiA9IFwiY2wvXCIgKyB0YWdDbGFzaWZpY2FjaW9uO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHRoaXMubm90YS5jbGFzaWZpY2FjaW9uQVggPSBjbGFzaWZpY2FjaW9uO1xuICAgICAgICB0aGlzLm5vdGEudGFnQ2xhc2lmaWNhY2lvbkFYID0gdGFnQ2xhc2lmaWNhY2lvbjtcbiAgICBcbiAgICAgICAgcmV0dXJuIHsgY2xhc2U6IGNsYXNpZmljYWNpb24sIHRhZzogdGFnQ2xhc2lmaWNhY2lvbiB9O1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNhY2Npb25lc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJ7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cbiAgICBhc3luYyBnZXRGZWNoYSgpIDogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgbGV0IGZlY2hhOyAgXG4gICAgICAgIGxldCBmZWNoYU9yaWdpbmFsID0gYXdhaXQgdGhpcy5wcm9tcHQoYENvbmZpcm1hIGxhIGZlY2hhIGRlIGxhIHRyYW5zYWNjaVx1MDBGM246IGAsIGAke21vbWVudCgpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbScpfWAsIHRydWUpXG4gICAgICAgIC8vIFBhcnNlYW5kbyBsYSBmZWNoYSBvcmlnaW5hbCB1dGlsaXphbmRvIG1vbWVudFxuICAgICAgICBsZXQgZmVjaGFNb21lbnQgPSBtb21lbnQoZmVjaGFPcmlnaW5hbCwgXCJZWVlZLU1NLUREIEhIOm1tXCIpO1xuICAgICAgICAvLyBGb3JtYXRlYW5kbyBsYSBudWV2YSBmZWNoYSBhbCBmb3JtYXRvIGRlc2VhZG9cbiAgICAgICAgZmVjaGEgPSBmZWNoYU1vbWVudC5mb3JtYXQoXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgIHRoaXMubm90YS5mZWNoYSA9IGZlY2hhO1xuICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgfVxuICAgIFxuICAgICAgICBhc3luYyBnZXRSZW5hbWUoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgbGV0IGZlY2hhID0gbW9tZW50KHRoaXMubm90YS5mZWNoYSwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG4gICAgICAgICAgICBsZXQgZmVjaGFZID0gZmVjaGEuZm9ybWF0KFwiWVlZWVwiKTtcbiAgICAgICAgICAgIGxldCBmZWNoYU1lcyA9IGZlY2hhLmZvcm1hdChcIk1NIC0gTU1NTVwiKTtcblxuICAgICAgICAgICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke2ZlY2hhWX0vJHtmZWNoYU1lc30vJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEuaWR9Lm1kYFxuICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7ZmVjaGFZfS8ke2ZlY2hhTWVzfWBcbiAgICAgICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgfSIsICIvKiBzcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9maWVsZEhhbmRsZXJzL0ZIIEVzdHJ1Y3R1cmEvQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyLnRzICovXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuXG5leHBvcnQgY2xhc3MgQXJlYXNJbnRlcmVzRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlcntcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QXN1bnRvKCl7IC8vIEZ1bmNpb25hIGNvbiBmcm9udG1hdHRlclxuXG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IHBhZHJlcyA9IFtdO1xuICAgICAgICBsZXQgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICBsZXQgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgbGV0IG5vdGE7XG4gICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgbm9tYnJlID0gYWN0aXZvLmJhc2VuYW1lO1xuICAgICAgICAgICAgbm90YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pO1xuICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIG5vdGEuZnJvbnRtYXR0ZXIgZXhpc3RlIHkgYXNpZ25hciB1biBvYmpldG8gdmFjXHUwMEVEbyBhIGZpbGVcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIgPSBub3RhLmZyb250bWF0dGVyIHx8IHt9O1xuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlci5maWxlID0ge307XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSwgYWN0aXZvKTtcbiAgICAgICAgICAgIC8vMS4gc2lBc3VudG8gPSBhd2FpdCBzdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgIHBhZHJlcy51bnNoaWZ0KG5vbWJyZSk7IC8vIEFcdTAwRjFhZGUgZWwgbm9tYnJlIGFsIGluaWNpbyBkZWwgYXJyZWdsbywgZGVzcGxhemFuZG8gbG9zIGRlbVx1MDBFMXMgZWxlbWVudG9zXG4gICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpQXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIGNvbiBub3RhLnRpdHVsbyBjb21vIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW25vdGEuZnJvbnRtYXR0ZXIuZmlsZS5iYXNlbmFtZV07IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBubyBleGlzdGUsIHRoaXMubm90YS5hcmVhSW50ZXJlcyB5YSB0ZW5kclx1MDBFMSBub3RhLnRpdHVsbyBjb21vIHN1IFx1MDBGQW5pY28gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgQVJFQSBERSBWSURBXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCJ8fG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFWXCIpeyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBERUZJTklSIE5JVkVMQUlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQobm90YS5mcm9udG1hdHRlcj8ubml2ZWxBSSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsQUkpICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxBSSA9IG5pdmVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gYWN0aXZvID09IG51bGxcbiAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgIH0gXG4gICAgICAgIHJldHVybiB7c2lBc3VudG8sIG5vbWJyZTogcGFkcmVzfVxuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpe1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdOyAgXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGlmICh0aGlzLm5vdGEuYXJlYVZpZGEgIT0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIil7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIH0gICAgICAgXG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuYWxpYXNlcztcbiAgICAgICBcbiAgICB9XG4gICAgYXN5bmMgZ2V0UmVuYW1lKCl7XG4gICAgICAgIGxldCBuZXdOYW1lLCBmb2xkZXI7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAodGhpcy5ub3RhLmFyZWFWaWRhPT09XCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIil7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9L090cmFzLyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfS5tZGBcbiAgICAgICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS9PdHJhc2BcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFyZWFWaWRhfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgICAgICBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9YFxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICBcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9tYnJlRmlsZSA9IG5ld05hbWUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYFx1MDBCRiR7bm9tYnJlRmlsZS5wb3AoKX0geWEgZXhpc3RlLiBRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGJvcnJhcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldEFyZWFJbnRlcmVzKCl7XG4gICAgICAgIGxldCBub21icmVUaXBvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IGFyZWFzSW50ZXJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJBSVwiLG51bGwsdGhpcy5wbHVnaW4pXG4gICAgICAgIGxldCBhcmVhSW50ZXJlcywgbml2ZWwsIHRpdHVsbywgcGFkcmVBSSwgYXJyYXlBSTtcbiAgICAgICAgaWYgKCF0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8pIHtcbiAgICAgICAgICAgIHBhZHJlQUkgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSxmYWxzZV0sIGZhbHNlLCBgICR7dGhpcy5ub3RhLnRpdHVsb30gZXMgaGlqbyBkZSBvdHJhICR7bm9tYnJlVGlwb306YCk7XG4gICAgICAgICAgICAvLyBMXHUwMEYzZ2ljYSBwYXJhIHBlcm1pdGlyIGFsIHVzdWFyaW8gZWxlZ2lyIHVuYSB0YXJlYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgICAgICBpZiAocGFkcmVBSSl7XG4gICAgICAgICAgICAgICAgYXJlYUludGVyZXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihhcmVhc0ludGVyZXMubWFwKGIgPT4gYi50aXR1bG8pICxhcmVhc0ludGVyZXMubWFwKGIgPT4gYiksIGZhbHNlLCBgUXVlIEFyZWEgZGUgSW50ZXJcdTAwRTlzIGVzIHBhZHJlIGRlICR7dGhpcy5ub3RhLnRpdHVsb30/OmApO1xuICAgICAgICAgICAgICAgIGlmIChhcmVhSW50ZXJlcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiU2luIEFyZWEgZGUgSW50ZXJlc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXsgLy8gUVVFIEhBQ0UgRVNURSBFTFNFPz9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmVhSW50ZXJlcy5hcmVhVmlkYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXJlYUludGVyZXMuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aXR1bG8gPSBhcmVhSW50ZXJlcy50aXR1bG87XG4gICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQoYXJlYUludGVyZXMubml2ZWxBSSkgKyAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHRpdHVsbyA9IFwiXCI7XG4gICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgfSAgICAgICAgICAgICAgICBcblx0ICAgIHRoaXMubm90YS5uaXZlbEFJID0gbml2ZWw7XG4gICAgICAgIHJldHVybiB0aXR1bG87XG4gICAgIH1lbHNle1xuICAgICAgIHJldHVybiB0aGlzLm5vdGEuYXJlYUludGVyZXM7IFxuICAgICAgIH1cbiAgICB9XG5cbiAgfSIsICJpbXBvcnQgeyBBcmVhVmlkYUZpZWxkSGFuZGxlciB9IGZyb20gJy4uLy4uL0ludGVyZmFjZXMvQXJlYVZpZGFGaWVsZEhhbmRsZXInO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cblxuZXhwb3J0IGNsYXNzIEFyZWFWaWRhRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2UgaW1wbGVtZW50cyBBcmVhVmlkYUZpZWxkSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgICAgdGhpcy5wYXRoQ2FtcG9zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZmlsZV9jYW1wb3NDZW50cmFsICsgXCIubWRcIjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBcmVhKCl7XG4gICAgICAgIGxldCBhcmVhOiBzdHJpbmcgfCBudWxsLCBncnVwbzogc3RyaW5nIHwgbnVsbDtcbiAgICAgICAgXG4gICAgICAgIGxldCB0aXBvQXJlYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBudWV2YUFyZWEgPSBmYWxzZTtcbiAgICAgICAgbGV0IGFyZWFzR3J1cG9zID0gIHRoaXMuZ2V0RHVwbGFzRmlqYXMoYXBwLCB0aXBvQXJlYSlcbiAgICAgICAgbGV0IGFyZWFHcnVwbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKGFyZWFzR3J1cG9zLm1hcChiPT4gYi50ZXh0byksIGFyZWFzR3J1cG9zLm1hcChiPT4gYi50ZXh0byksIGZhbHNlLCBgXHUwMEJGQ3VcdTAwRTFsICR7dGlwb0FyZWF9IGRlc2VhcyBjcmVhcj9gKVxuICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuIFxuICAgICAgICAgICAgaWYgKGFyZWFHcnVwbyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJlYUdydXBvPT1cIk51ZXZvXCIpe1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBhd2FpdCB0aGlzLnByb21wdChcIlx1MDBCRkN1YWwgZXMgZWwgbm9tYnJlIGRlIGxhIG51ZXZhIGNsYXNpZmljYWNpXHUwMEYzbiBxdWUgdmFzIGEgaW5ncmVzYXI/XCIsIFwiTWlDbGFzaWZpY2FjaVx1MDBGM25cIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNpZmljYWNpb24gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0YWdDbGFzaWZpY2FjaW9uID0gYXdhaXQgdGhpcy5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIHRhZyBxdWUgdXRpbGl6YXJhcyBwYXJhIFwiICsgY2xhc2lmaWNhY2lvbiArIFwiPy4gTm8gdXRpbGljZXMgZXNwYWNpb3MgZW4gbGEgZGVmaW5pY2lcdTAwRjNuIGRlbCB0YWcuXCIsIFwibnVldm9UYWdcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBudWV2YUNsYXNpZmljYWNpb24gPSB0cnVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IGluZGljZSA9IGFyZWFzR3J1cG9zLmZpbmRJbmRleChvYmpldG8gPT4gb2JqZXRvLnRleHRvID09PSBhcmVhR3J1cG8pO1xuICAgICAgICAgICAgICAgIGdydXBvID0gYXJlYXNHcnVwb3NbaW5kaWNlXS5ncnVwbztcbiAgICAgICAgICAgICAgICBhcmVhID0gYXJlYXNHcnVwb3NbaW5kaWNlXS5hcmVhO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS5ncnVwbyA9IGdydXBvO1xuICAgICAgICAgICAgICAgIHRoaXMubm90YS50aXR1bG8gPSBhcmVhO1xuICAgICAgICAgICAgcmV0dXJuIHtncnVwbzogZ3J1cG8sIHRpdHVsbzogYXJlYX07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgZ2V0RHVwbGFzRmlqYXMoYXBwOiBBcHAsIGFyZWE6IHN0cmluZyk6IFByb21pc2U8R3J1cG9BY3RpdmlkYWRbXT4ge1xuICAgICAgICAvLyBFbmN1ZW50cmEgZWwgYXJjaGl2byBwb3Igc3UgcnV0YVxuICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLnBhdGhDYW1wb3MpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIC8vIFVzYSBtZXRhZGF0YUNhY2hlIHBhcmEgb2J0ZW5lciBsb3MgbWV0YWRhdG9zIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgICAgICAgICAgLy8gQWNjZWRlIGFsIGZyb250IG1hdHRlciAoWUFNTCkgZGVsIGFyY2hpdm8geSBvYnRpZW5lIGVsIGFycmVnbG8gYmFzYWRvIGVuIGVsIHRlbWFcbiAgICAgICAgICAgICAgICBjb25zdCBhcnJlZ2xvUmVzdWx0ID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5bYXJlYV0gfHwgW107XG4gICAgICAgICAgICAgICAgLy8gQ29uc3RydXllIGVsIGFycmVnbG8gZGUgb2JqZXRvcyByZXN1bHRhZG8gYmFzYWRvIGVuIGxhIGVzdHJ1Y3R1cmEgZGUgR3J1cG9BY3RpdmlkYWRcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRhZG8gPSBbXTtcblxuICAgICAgICAgICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyZWdsb1Jlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyZWdsb1Jlc3VsdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdGFkby5wdXNoKHsgZ3J1cG86IGl0ZW1bMF0sIGFyZWE6IGl0ZW1bMV0sIHRleHRvOiBpdGVtWzBdK1wiL1wiK2l0ZW1bMV19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRhZG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgICAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV2dWVsdmUgdW4gYXJyZWdsbyB2YWNcdTAwRURvIHNpIG5vIHNlIGVuY3VlbnRyYSBlbCBhcmNoaXZvIG8gc2kgb2N1cnJlIGN1YWxxdWllciBvdHJvIHByb2JsZW1hXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG5cbiAgICBhc3luYyBnZXRGaWxlbmFtZSgpe1xuICAgICAgICBsZXQgZmlsZU5hbWU7XG4gICAgICAgIGlmICh0aGlzLmluZm9TdWJzaXN0ZW1hLmhhc093blByb3BlcnR5KFwiZmlsZU5hbWVcIikpe1xuICAgICAgICAgICAgY29uc3QgcGFydGVzID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5maWxlTmFtZS5zcGxpdCgnIC0tICcpO1xuICAgICAgICAgICAgdGhpcy5ub3RhLnRyaW1lc3RyZSA9IHBhcnRlc1swXTtcbiAgICAgICAgICAgIHRoaXMubm90YS50aXR1bG8gPSBwYXJ0ZXNbMV07XG4gICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBwYXJ0ZXNbMV07XG4gICAgICAgICAgICB0aGlzLm5vdGEuZ3J1cG8gPSBwYXJ0ZXNbMl07XG4gICAgICAgIH1cbiAgICAgICAgZmlsZU5hbWUgPSBgJHt0aGlzLm5vdGEudHJpbWVzdHJlfSAtICR7dGhpcy5ub3RhLnRpdHVsb31gICAgIFxuICAgICAgICB0aGlzLm5vdGEuZmlsZW5hbWUgPSBmaWxlTmFtZTtcbiAgICAgICAgICAgIFxuICAgICAgICByZXR1cm4gZmlsZU5hbWU7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCl7XG4gICAgICAgIGxldCB0aXBvU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZTtcbiAgICAgICAgbGV0IG5vbWJyZVNpc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGVOYW1lO1xuICAgICAgICBsZXQgdHJpbWVzdHJlO1xuICAgICAgICAvL2xldCB0cmltZXN0cmVzID0gYXdhaXQgdGhpcy5hY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXMoXCJUcmltZXN0cmFsXCIpOyAvLyBGdW5jaW9uYSBlbiBsYSB2ZXJzaVx1MDBGM24gMS4wIGRlIEFyZWFzIGRlIFZpZGEuXG4gICAgICAgIGxldCB0cmltZXN0cmVzID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIlRRXCIsbnVsbCx0aGlzLnBsdWdpbik7XG4gICAgICAgIHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSx0cmltZXN0cmVzLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGZhbHNlLCBgVHJpbWVzdHJlIGRlbCAke25vbWJyZVNpc3RlbWF9OmApO1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiTW9kaWZpY2FjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gdHJpbWVzdHJlO1xuICAgICAgICByZXR1cm4gdHJpbWVzdHJlO1xuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKXtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBuZXdOYW1lLCBuYW1lLCBmb2xkZXI7ICAgICAgXG4gICAgICAgIG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudGl0dWxvfS8ke3RoaXMubm90YS5maWxlbmFtZX0ubWRgXG4gICAgICAgIGZvbGRlciA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS50aXR1bG99L2BcbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuXG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgIGxldCBub21icmVGaWxlID0gbmV3TmFtZT8uc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1ZSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKXtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9ICBcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSl7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9Y2F0Y2ggKGVycm9yKXtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXBjaW9uID0gYXdhaXQgdGhpcy5wcm9tcHQoYERlc2NyaXBjaVx1MDBGM24gZGVsICR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX06YCwgXCJcIiwgZmFsc2UsIHRydWUpO1xuICAgICAgICB0aGlzLm5vdGEuZGVzY3JpcGNpb24gPSBkZXNjcmlwY2lvbjtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXBjaW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoKXtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRyaW1lc3RyZX0vJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS5ncnVwb30vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS8ke3RoaXMubm90YS50aXR1bG99YClcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXJCYXNlJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlciB9IGZyb20gJy4uLy4uL0ludGVyZmFjZXMvbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVyJztcblxuZXhwb3J0IGNsYXNzIG5vZG9BcmVhVmlkYUZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXJCYXNlIGltcGxlbWVudHMgbm9kb0FyZWFWaWRhRmllbGRIYW5kbGVye1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0SWQoKSB7IFxuICAgICAgICBsZXQgbWF4SWQgPSAwO1xuICAgICAgICAvLyBPYnRcdTAwRTluIHRvZG9zIGxvcyBhcmNoaXZvcyBNYXJrZG93blxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGxldCByZWdpc3Ryb3NFeGlzdGVudGVzID0gZmlsZXMuZmlsdGVyKChmaWxlOiB7IHBhdGg6IHN0cmluZzsgfSkgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXIpKTtcbiAgICAgICAgLy8gRmlsdHJhIHBvciBsb3MgYXJjaGl2b3MgZW4gbGEgY2FycGV0YSBkZXNlYWRhXG4gICAgICAgIHJlZ2lzdHJvc0V4aXN0ZW50ZXMuZm9yRWFjaCgoZmlsZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGEgJiYgbWV0YWRhdGEuaWQgJiYgIWlzTmFOKG1ldGFkYXRhLmlkKSAmJiBtZXRhZGF0YS50eXBlICYmIG1ldGFkYXRhLnR5cGUgPT09IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQobWV0YWRhdGEuaWQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA+IG1heElkKSBtYXhJZCA9IGlkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRSZW5hbWUoKXtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBwYXJ0ZXMgPSBmaWxlLmJhc2VuYW1lLnNwbGl0KCcgLSAnKTtcbiAgICAgICAgdGhpcy5ub3RhLmdydXBvID0gcGFydGVzWzBdO1xuICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBwYXJ0ZXNbMV07XG5cbiAgICAgICAgLy8gT2J0ZW5lciBsYSBydXRhIGNvbXBsZXRhIGRlbCBhcmNoaXZvIGFjdHVhbFxuICAgICAgICBjb25zdCBmdWxsUGF0aCA9IGZpbGUucGF0aDtcblxuICAgICAgICAvLyBFeHRyYWVyIGxhIHJ1dGEgZGVsIGRpcmVjdG9yaW8gc2luIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBkaXJlY3RvcnlQYXRoID0gZnVsbFBhdGguc3Vic3RyaW5nKDAsIGZ1bGxQYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcblxuICAgICAgICAvLyBDb25jYXRlbmFyIGxhIHJ1dGEgZGVsIGRpcmVjdG9yaW8gY29uIGVsIG5vbWJyZSBkZWwgYXJjaGl2byB5IGxhIGV4dGVuc2lcdTAwRjNuIC5tZFxuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2RpcmVjdG9yeVBhdGh9JHtwYXJ0ZXNbMV19Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgbmV3TmFtZSwgZm9sZGVyOyAgICAgIFxuICAgICAgICBcbiAgICAgICAgLy8gbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLm5vdGEuZmlsZW5hbWV9Lm1kYFxuICAgICAgICAvLyBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYXJlYVZpZGF9L2BcbiAgICAgICAgLy8gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG5cbiAgICAgICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlTmFtZSk7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICB0cnl7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgIGxldCBub21icmVGaWxlID0gbmV3TmFtZT8uc3BsaXQoXCIvXCIpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIEFyY2hpdm8gQWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiXSxcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1ZSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKXtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpe1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1jYXRjaCAoZXJyb3Ipe1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cbn0iLCAiLy8gY2FtcG9zID0gW1wiaWRcIixcImZlY2hhXCIsXCJhcmVhVmlkYVwiLFwiYVx1MDBGMW9cIixcInRpdHVsb1wiLFwiZGVzY3JpcGNpb25cIixcInRyaW1lc3RyZVwiLFwiZXN0YWRvXCIsXCJhbGlhc2VzXCIsXCJyZW5hbWVcIl07XG5cbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIGltcG9ydGFyIE5vdGVGaWVsZEhhbmRsZXIgc2kgZXMgbmVjZXNhcmlvXG5pbXBvcnQgeyBPYmpDb21wYXNzQW51YWxGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9JbnRlcmZhY2VzL09iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgT2JqQ29tcGFzc0FudWFsRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIE9iakNvbXBhc3NBbnVhbEZpZWxkSGFuZGxlcntcbiAgICBcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RXN0YWRvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiAnXHVEODNEXHVERkUxJztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBcmVhVmlkYSgpe1xuICAgICAgICBsZXQgYXJlYVZpZGE7XG4gICAgICAgIGlmICghdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvKSB7XG4gICAgICAgIGxldCBub21icmVBcmNoaXZvID0gdGhpcy5pbmZvU3Vic2lzdGVtYS5maWxlTmFtZTtcbiAgICAgICAgY29uc3QgcmVnZXggPSAvT2JqZXRpdm8gcGFyYSAoLispXFwubWQkLztcbiAgICAgICAgY29uc3QgcmVzdWx0YWRvID0gbm9tYnJlQXJjaGl2by5tYXRjaChyZWdleCk7XG4gICAgICAgIGlmIChyZXN1bHRhZG8gJiYgcmVzdWx0YWRvWzFdKSB7XG4gICAgICAgICAgICAvLyBSZXRvcm5hbW9zIGVsIGdydXBvIGNhcHR1cmFkbywgcXVlIGVzIGVsIHZhbG9yIGRlc2VhZG8gZGUgc3Vic3RyXG4gICAgICAgICAgICBhcmVhVmlkYSA9IHJlc3VsdGFkb1sxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIG5vIHNlIGVuY3VlbnRyYSB1bmEgY29pbmNpZGVuY2lhLCBwb2RyXHUwMEVEYW1vcyByZXRvcm5hciBudWxsIG8gYWxndW5hIG90cmEgc2VcdTAwRjFhbCBkZSBubyBlbmNvbnRyYWRvXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSAgXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gYXJlYVZpZGE7XG4gICAgICAgIHJldHVybiBhcmVhVmlkYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuYXJlYVZpZGE7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGFzeW5jIGdldFRpdHVsbygpe1xuICAgICAgICBsZXQgdGl0dWxvO1xuICAgICAgICB0aXR1bG8gPSBhd2FpdCB0aGlzLnByb21wdChgQ3VhbCBlcyB0dSBvYmpldGl2byBlbiAke3RoaXMubm90YS5hXHUwMEYxb30gcGFyYSAke3RoaXMubm90YS5hcmVhVmlkYX0/YCwgYFZveSBhIGAsIHRydWUsIHRydWUpIC8vIDQgcGFyYW1ldHJvIHRydWU6IE11bHRpbGluZWEuXG5cdCAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKHRpdHVsbyA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEudGl0dWxvID0gdGl0dWxvO1xuICAgICAgICByZXR1cm4gdGl0dWxvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFcdTAwRjFvKCl7XG4gICAgICAgICBcbiAgICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMudHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgICAgICBsZXQgdGlwb1Npc3RlbWEgPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGU7XG4gICAgICAgIGxldCBub21icmVTaXN0ZW1hID0gdGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZTtcbiAgICAgICAgbGV0IGFcdTAwRjFvO1xuICAgICAgICAvL2xldCB0cmltZXN0cmVzID0gYXdhaXQgdGhpcy5hY3RpdmVTdHJ1Y3R1cmVSZXNvdXJjZXMoXCJUcmltZXN0cmFsXCIpOyAvLyBGdW5jaW9uYSBlbiBsYSB2ZXJzaVx1MDBGM24gMS4wIGRlIEFyZWFzIGRlIFZpZGEuXG4gICAgICAgIGxldCBhXHUwMEYxb3MgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiQVlcIiwgbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgbGV0IG5vbWJyZUFyY2hpdm8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLmZpbGVOYW1lO1xuICAgICAgICAgICAgY29uc3QgcmVnZXggPSAvXFwvKFxcZHs0fSkvO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0YWRvID0gbm9tYnJlQXJjaGl2by5tYXRjaChyZWdleCk7XG4gICAgICAgICAgICBpZiAocmVzdWx0YWRvICYmIHJlc3VsdGFkb1sxXSkge1xuICAgICAgICAgICAgICAgIC8vIFJldG9ybmFtb3MgZWwgZ3J1cG8gY2FwdHVyYWRvLCBxdWUgZXMgZWwgdmFsb3IgZGVzZWFkbyBkZSBzdWJzdHJcbiAgICAgICAgICAgICAgICBhXHUwMEYxbyA9IHJlc3VsdGFkb1sxXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgbm8gc2UgZW5jdWVudHJhIHVuYSBjb2luY2lkZW5jaWEsIHBvZHJcdTAwRURhbW9zIHJldG9ybmFyIG51bGwgbyBhbGd1bmEgb3RyYSBzZVx1MDBGMWFsIGRlIG5vIGVuY29udHJhZG9cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgaWYgKGFcdTAwRjFvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEuYVx1MDBGMW8gPSBhXHUwMEYxbztcbiAgICAgICAgcmV0dXJuIGFcdTAwRjFvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldERlc2NyaXBjaW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXBjaW9uID0gYXdhaXQgdGhpcy5wcm9tcHQoYFx1MDBCRlF1aWVyZXMgYWdyZWdhciBkZXRhbGxlcyBkZSB0dSBvYmpldGl2bz9gLCBcIlwiLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIHRoaXMubm90YS5kZXNjcmlwY2lvbiA9IGRlc2NyaXBjaW9uO1xuICAgICAgICByZXR1cm4gZGVzY3JpcGNpb247XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCl7XG4gICAgICAgIGxldCB0cmltZXN0cmU7XG4gICAgICAgIC8vbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCB0aGlzLmFjdGl2ZVN0cnVjdHVyZVJlc291cmNlcyhcIlRyaW1lc3RyYWxcIik7IC8vIEZ1bmNpb25hIGVuIGxhIHZlcnNpXHUwMEYzbiAxLjAgZGUgQXJlYXMgZGUgVmlkYS5cbiAgICAgICAgbGV0IHRyaW1lc3RyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiVFFcIixudWxsLHRoaXMucGx1Z2luKTtcbiAgICAgICAgdHJpbWVzdHJlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVExYCxcbiAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEyYCxcbiAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVEzYCxcbiAgICAgICAgICAgICAgICBgJHt0aGlzLm5vdGEuYVx1MDBGMW99LVE0YCxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgYFx1MDBCRkVuIHF1XHUwMEU5IHRyaW1lc3RyZSBkZWwgJHt0aGlzLm5vdGEuYVx1MDBGMW99IGNvbnNpZGVyYXMgcXVlIHNlIHB1ZWRlIHJlYWxpemFyIGVzZSBvYmpldGl2bz9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgIFxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0cmltZXN0cmUgPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk1vZGlmaWNhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS50cmltZXN0cmUgPSB0cmltZXN0cmU7XG4gICAgICAgIHJldHVybiB0cmltZXN0cmU7XG4gICAgfVxuXG4gICAgXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gW107XG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfS8ke3RoaXMubm90YS5hXHUwMEYxb30vJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS8ke3RoaXMubm90YS5hcmVhVmlkYX0vJHt0aGlzLm5vdGEuaWR9YClcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9LyR7dGhpcy5ub3RhLnRpdHVsb31gKVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmFsaWFzZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgXG4gICAgICAgIGxldCBmb2xkZXIgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEuYVx1MDBGMW99YFxuICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS8ke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZX0gLSAke3RoaXMubm90YS5pZH0ubWRgXG4gICAgICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXIpO1xuXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYm9ycmFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5kZWxldGUoZXhpc3RlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbWJpYXIgZWwgbm9tYnJlXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxuICB9IiwgIi8vY2FtcG9zID0gW1wiaWRcIixcImZlY2hhXCIsXCJhXHUwMEYxb1wiLFwiZXN0YWRvXCIsXCJhbGlhc2VzXCIsXCJyZW5hbWVcIl1cblxuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlckJhc2UgfSBmcm9tICcuL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UnOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuaW1wb3J0IHsgQ29tcGFzc1BsYW5lYWNpb25BbnVhbF9GSCB9IGZyb20gJy4uL0ludGVyZmFjZXMvQ29tcGFzc1BsYW5lYWNpb25BbnVhbF9GSCc7XG5cbmV4cG9ydCBjbGFzcyBDb21wYXNzUGxhbmVhY2lvbkFudWFsX0ZIIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2UgaW1wbGVtZW50cyBub2RvQXJlYVZpZGFGaWVsZEhhbmRsZXJ7XG4gICAgXG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgZm9sZGVyOiBzdHJpbmcsIHBsdWdpbjogYW55KSB7XG4gICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pOyAvLyBMbGFtYSBhbCBjb25zdHJ1Y3RvciBkZSBsYSBjbGFzZSBwYWRyZVxuICAgIH1cbiAgICBhc3luYyBnZXRBXHUwMEYxbygpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgbm9tYnJlU2lzdGVtYSA9IHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWU7XG4gICAgICAgIGxldCBhXHUwMEYxbztcbiAgICAgICAgLy9sZXQgdHJpbWVzdHJlcyA9IGF3YWl0IHRoaXMuYWN0aXZlU3RydWN0dXJlUmVzb3VyY2VzKFwiVHJpbWVzdHJhbFwiKTsgLy8gRnVuY2lvbmEgZW4gbGEgdmVyc2lcdTAwRjNuIDEuMCBkZSBBcmVhcyBkZSBWaWRhLlxuICAgICAgICBsZXQgYVx1MDBGMW9zID0gYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuZmluZE1haW5GaWxlc1dpdGhTdGF0ZShcIkFZXCIsbnVsbCx0aGlzLnBsdWdpbik7XG4gICAgICAgIGFcdTAwRjFvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYVx1MDBGMW9zLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksYVx1MDBGMW9zLm1hcChiID0+IGIuZmlsZS5iYXNlbmFtZSksIGZhbHNlLCBgU2VsZWNjaW9uYSBlbCBhXHUwMEYxbyBxdWUgZGVzZWFzIHBhcmEgZWwgJHtub21icmVTaXN0ZW1hfTpgKTtcblx0ICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoYVx1MDBGMW8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIHRoaXMubm90YS5hXHUwMEYxbyA9IGFcdTAwRjFvO1xuICAgICAgICByZXR1cm4gYVx1MDBGMW87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0Tm90YSgpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcyA9IFtdO1xuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGAke3RoaXMuaW5mb1N1YnNpc3RlbWEudHlwZU5hbWV9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfWApICAgXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzLnB1c2goYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlTmFtZX0vJHt0aGlzLm5vdGEuaWR9YCkgICBcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgZm9sZGVyID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfWBcbiAgICAgICAgY29uc3QgbmV3TmFtZSA9IGAke3RoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyfS8ke3RoaXMubm90YS5hXHUwMEYxb30vUGxhbmVhY2lcdTAwRjNuICR7dGhpcy5ub3RhLmFcdTAwRjFvfS5tZGBcbiAgICAgICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlcik7XG5cbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgICAgIGNvbnN0IGV4aXN0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChleGlzdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGBcdTAwQkYke25vbWJyZUZpbGUucG9wKCl9IHlhIGV4aXN0ZS4gUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChib3JyYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXIgfSBmcm9tICcuLi9GSCBCYXNlL05vdGVGaWVsZEhhbmRsZXInOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBpbXBvcnRhciBOb3RlRmllbGRIYW5kbGVyIHNpIGVzIG5lY2VzYXJpb1xuXG5leHBvcnQgY2xhc3MgUmVwb3NpdG9yaW9MaWJyb3NfRkggZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0cDogYW55LCBmb2xkZXI6IHN0cmluZywgcGx1Z2luOiBhbnkpIHtcbiAgICAgIHN1cGVyKHRwLCBmb2xkZXIsIHBsdWdpbik7IC8vIExsYW1hIGFsIGNvbnN0cnVjdG9yIGRlIGxhIGNsYXNlIHBhZHJlXG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RGVzY3JpcGNpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZGVzY3JpcGNpb24gPSBhd2FpdCB0aGlzLnByb21wdChgXHUwMEJGUG9ycXVlIGVzdFx1MDBFMXMgYWdyZWdhbmRvIGVzdGUgbGlicm8/OmAsIFwiXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgdGhpcy5ub3RhLmRlc2NyaXBjaW9uID0gZGVzY3JpcGNpb247XG4gICAgICAgIHJldHVybiBkZXNjcmlwY2lvbjtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8oKXtcbiAgICAgICAgbGV0IGVzdGFkbztcbiAgICAgICAgICAgICAgICBlc3RhZG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gUGFyYSBBcmNoaXZvIC0gTGVpZG9cIiwgXCJcdUQ4M0RcdURGRTIgLT4gRW4gTGVjdHVyYSAtIENvbXByYWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gUG9yIEFkcXVpcmlyXCIsIFwiXHVEODNEXHVERDM0IC0+IENhbmNlbGFkb1wiXSxbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIixcIlx1RDgzRFx1REZFMVwiLCBcIlx1RDgzRFx1REQzNFwiXSwgZmFsc2UsIGBFbiBxdWUgZXN0YWRvIGVzdFx1MDBFMSBlc3RlIGxpYnJvP2ApO1xuICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChlc3RhZG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgTGlicm8gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIC8vdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gZXN0YWRvO1xuICAgIH1cblxuICAgIGFzeW5jIGdldFRpdHVsbygpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB0aXR1bG8gPSB0aGlzLmluZm9TdWJzaXN0ZW1hLnRpdHVsbztcbiAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IHRpdHVsbztcbiAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgLy8gRnVuY2lvbmEgY29uIGZyb250bWF0dGVyXG4gICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IHRoaXMuaW5mb1N1YnNpc3RlbWEuYWN0aXZvO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBpZiAoYWN0aXZvICE9IG51bGwpIHtcbiAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgIG5vdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZvKTtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBub3RhLmZyb250bWF0dGVyIGV4aXN0ZSB5IGFzaWduYXIgdW4gb2JqZXRvIHZhY1x1MDBFRG8gYSBmaWxlXG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgIG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSA9IHt9O1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihub3RhLmZyb250bWF0dGVyLmZpbGUsIGFjdGl2byk7XG4gICAgICAgICAgICAvLzEuIHNpQXN1bnRvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoW1wiU2lcIiwgXCJOb1wiXSwgW3RydWUsIGZhbHNlXSwgdHJ1ZSwgbm9tYnJlICsgXCIgZXMgb3JpZ2VuIGRlIFwiICsgdGhpcy5ub3RhLnRpdHVsbyArIFwiP1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hc3VudG9EZWZpbmlkbyA9IHRydWU7IC8vIFBhcmEgcXVlIG5vIGVqZWN1dGUgbGEgYnVzcXVlZGEgZGUgQXJlYSBWaWRhLCBBcmVhIGRlIEludGVyXHUwMEU5cywgcHJveWVjdG8gUSBvIEdURFxuICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUpIHsgLy8gTGEgbm90YSBhY3RpdnMgZXMgdW5hOiBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlBRXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDVUFORE8gTEEgTk9UQSBBQ1RJVkEgRVMgVU4gUFEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEucHJveWVjdG9HVEQgY29uIHVuIHZhbG9yIHByZWRldGVybWluYWRvIGRlIGNhZGVuYSB2YWNcdTAwRURhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIHV0aWxpemFtb3MgY29uY2F0IHBhcmEgYVx1MDBGMWFkaXIgbG9zIGVsZW1lbnRvcyB5YSBwcm9jZXNhZG9zIGNvbiBlbCByZWdleCBhbCBhcnJlZ2xvIHRoaXMubm90YS5wcm95ZWN0b0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURC5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIG90cmEgY29zYSBxdWUgbm8gZXMgcHJveWVjdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlIHBlcm8gbm8gZXMgdW4gYXJyZWdsbywgYXBsaWNhbW9zIGVsIHJlZ2V4IGRpcmVjdGFtZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFJbnRlcmVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IHRoaXMubm90YS5hcmVhSW50ZXJlcy5jb25jYXQobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyB1biBhcnJlZ2xvLCByZXZpc2Ftb3Mgc2kgbm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcyBleGlzdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXhpc3RlLCBhcGxpY2Ftb3MgZWwgcmVnZXggeSBsbyBhXHUwMEYxYWRpbW9zIGNvbW8gc2VndW5kbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBBcmVhVmlkYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhVmlkYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYVswXS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyBlc3RcdTAwRTEgZGVmaW5pZG8gbyBlc3RcdTAwRTEgdmFjXHUwMEVEb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFBHVEQgeSBQUVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFJXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBSVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzdGUgc29sbyBhcGxpY2EgcGFyYSBjdWFuZG8gZXN0b3kgY29uc3RydXllbmRvIGRlc2RlIEFyZWEgZGUgSW50ZXJlcyBvdHJhIEFyZWEgZGUgSW50ZXJlcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkFWXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIgfHwgbm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQVZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzaUFzdW50bywgbm9tYnJlOiBwYWRyZXMgfVxuICAgIH1cblxuXG5cbiAgICBcblxufSIsICJpbXBvcnQgeyBURmlsZSwgVEZvbGRlciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRmllbGRIYW5kbGVyVXRpbHMgfSBmcm9tICcuLi8uLi9GaWVsZEhhbmRsZXJVdGlscyc7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgaW1wb3J0YXIgTm90ZUZpZWxkSGFuZGxlciBzaSBlcyBuZWNlc2FyaW9cbmltcG9ydCB7IEJpYmxpb3RlY2FfRkggfSBmcm9tICcuLi8uLi9JbnRlcmZhY2VzL0JpYmxpb3RlY2FfRkgnO1xuXG5leHBvcnQgY2xhc3MgQmlibGlvdGVjYV9GSCBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIgaW1wbGVtZW50cyBCaWJsaW90ZWNhX0ZIe1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgc3VwZXIodHAsIGZvbGRlciwgcGx1Z2luKTsgLy8gTGxhbWEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmVcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYXJhbWV0cm9zTGlicm8oKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgbGV0IGFyY2hpdm9BY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICBcbiAgICAgICAgaWYgKCFhcmNoaXZvQWN0aXZvKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gb2J0ZW5lciBlbCBhcmNoaXZvIGFjdGl2by5cIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGNhbXBvcyA9IFtcImlkXCIsIFwidGl0dWxvXCIsIFwiYXV0b3JcIiwgXCJwdWJsaXNoZXJcIiwgXCJwdWJsaWNhZG9cIiwgXCJwYWdpbmFzXCIsIFwiaXNibjEwXCIsIFwiaXNibjEzXCJdO1xuICAgICAgICBsZXQgcGFyYW1ldHJvcyA9IHt9O1xuICAgIFxuICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICBsZXQgdmFsb3JDYW1wbyA9IGF3YWl0IHRoaXMuZ2V0RnJvbnRtYXR0ZXJGaWVsZChhcmNoaXZvQWN0aXZvLnBhdGgsIGNhbXBvKTtcbiAgICAgICAgICB0aGlzLm5vdGFbY2FtcG9dID0gdmFsb3JDYW1wbztcbiAgICAgICAgICBwYXJhbWV0cm9zW2NhbXBvXSA9IHZhbG9yQ2FtcG87XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRyb3M7XG4gICAgICB9XG4gICAgXG4gICAgICBhc3luYyBnZXRGcm9udG1hdHRlckZpZWxkKGZpbGU6IHN0cmluZywgZmllbGQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdEZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUpO1xuICAgICAgICAgIGlmICh0RmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0RmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICBcbiAgICAgICAgICAgIGlmIChmcm9udG1hdHRlciAmJiBmcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShmaWVsZCkpIHtcbiAgICAgICAgICAgICAgY29uc3QgZmllbGRWYWx1ZSA9IGZyb250bWF0dGVyW2ZpZWxkXTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWUgIT09IHVuZGVmaW5lZCAmJiBmaWVsZFZhbHVlICE9PSBudWxsICYmIGZpZWxkVmFsdWUgIT09IFwiXCIgPyBmaWVsZFZhbHVlIDogbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFbCBjYW1wbyAnJHtmaWVsZH0nIG5vIGV4aXN0ZSBlbiBlbCBmcm9udG1hdHRlci5gKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFbCBhcmNoaXZvIG5vIGV4aXN0ZSBvIG5vIGVzIHVuIGFyY2hpdm8gZGUgdGV4dG8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY29uc3VsdGFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXN5bmMgZ2V0Rm9ybWF0bygpe1xuICAgICAgICBsZXQgY2FtcG87XG4gICAgICAgICAgICAgICAgY2FtcG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJLaW5kbGVcIiwgXCJHb29nbGUgQm9va3NcIixcIlBERlwiLCBcIkZcdTAwRURzaWNvXCJdLFtcIktpbmRsZVwiLCBcIkdvb2dsZSBCb29rc1wiLFwiUERGXCIsIFwiRlx1MDBFRHNpY29cIl0sIGZhbHNlLCBgXHUwMEJGQ29tbyB0aWVuZXMgZXN0ZSBsaWJybz9gKTtcbiAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoY2FtcG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgTGlicm8gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIC8vdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGFnaW5hcygpe1xuICAgICAgICBsZXQgY2FtcG8sIHBhZ2luYXM7XG4gICAgICAgICAgICAgICAgY2FtcG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLFwiTm9cIl0sW3RydWUsIGZhbHNlXSwgZmFsc2UsIGBcdTAwQkZFbCBsaWJybyB0aWVuZSAke3RoaXMubm90YS5wYWdpbmFzfSBwXHUwMEUxZ2luYXM/YCk7XG4gICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGNhbXBvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJDcmVhY2lcdTAwRjNuIGRlIExpYnJvIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfWVsc2UgaWYgKGNhbXBvID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcGFnaW5hcyA9IGF3YWl0IHRoaXMucHJvbXB0KGBDdWFudGFzIHBcdTAwRTFnaW5hcyB0aWVuZSBlbCBsaWJybz9gLCBcIlwiLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5ub3RhLnBhZ2luYXMgPSBwYWdpbmFzO1xuICAgICAgICByZXR1cm4gcGFnaW5hcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnBhZ2luYXM7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGFzeW5jIGdldEFzdW50bygpOiBQcm9taXNlPHsgc2lBc3VudG86IGJvb2xlYW4sIG5vbWJyZTogc3RyaW5nW10gfT4geyAvLyBGdW5jaW9uYSBjb24gZnJvbnRtYXR0ZXJcbiAgICAgICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGxldCBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgICAgICBsZXQgbm90YTtcbiAgICAgICAgICAgIGlmIChhY3Rpdm8gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5vbWJyZSA9IGFjdGl2by5iYXNlbmFtZTtcbiAgICAgICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIG5vdGEuZnJvbnRtYXR0ZXIgZXhpc3RlIHkgYXNpZ25hciB1biBvYmpldG8gdmFjXHUwMEVEbyBhIGZpbGVcbiAgICAgICAgICAgICAgICBub3RhLmZyb250bWF0dGVyID0gbm90YS5mcm9udG1hdHRlciB8fCB7fTtcbiAgICAgICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG5vdGEuZnJvbnRtYXR0ZXIuZmlsZSwgYWN0aXZvKTtcbiAgICAgICAgICAgICAgICAvLzEuIHNpQXN1bnRvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlNpXCIsIFwiTm9cIl0sIFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIik7XG4gICAgICAgICAgICAgICAgcGFkcmVzLnVuc2hpZnQobm9tYnJlKTsgLy8gQVx1MDBGMWFkZSBlbCBub21icmUgYWwgaW5pY2lvIGRlbCBhcnJlZ2xvLCBkZXNwbGF6YW5kbyBsb3MgZGVtXHUwMEUxcyBlbGVtZW50b3NcbiAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50b0RlZmluaWRvID0gdHJ1ZTsgLy8gUGFyYSBxdWUgbm8gZWplY3V0ZSBsYSBidXNxdWVkYSBkZSBBcmVhIFZpZGEsIEFyZWEgZGUgSW50ZXJcdTAwRTlzLCBwcm95ZWN0byBRIG8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vdGE/LmZyb250bWF0dGVyPy50eXBlKSB7IC8vIExhIG5vdGEgYWN0aXZzIGVzIHVuYTogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUEdURFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TIERFIFEgWSBQUk9ZRUNUTyBHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGEuZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiUFFcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vbWJyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBQUk9ZRUNUT1NHVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEucHJveWVjdG9HVEQgZXhpc3RlIHkgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgIFxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgUHJveWVjdG9HVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQR1REXCIpIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENVQU5ETyBMQSBOT1RBIEFDVElWQSBFUyBVTiBHVEQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBbbm9tYnJlXTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgdXRpbGl6YW1vcyBjb25jYXQgcGFyYSBhXHUwMEYxYWRpciBsb3MgZWxlbWVudG9zIHlhIHByb2Nlc2Fkb3MgY29uIGVsIHJlZ2V4IGFsIGFycmVnbG8gdGhpcy5ub3RhLnByb3llY3RvR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9HVEQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQucHVzaChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm90YS5wcm95ZWN0b0dURCBubyBleGlzdGUsIHRoaXMubm90YS5wcm95ZWN0b0dURCB5YSBlc3RcdTAwRTEgZXN0YWJsZWNpZG8gZW4gXCJcIiBwb3IgZGVmZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBQcm95ZWN0b1EgeSBQcm95ZWN0byBHVEQgY3VhbmRvIGxhIG5vdGEgZXMgb3RyYSBjb3NhIHF1ZSBubyBlcyBwcm95ZWN0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50by5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9RID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8uYXJlYUludGVyZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB5IGFwbGljYW1vcyBlbCByZWdleCBhIGNhZGEgZWxlbWVudG8uIEx1ZWdvIGNvbmNhdGVuYW1vcyBjb24gZWwgYXJyYXkgZXhpc3RlbnRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzID0gdGhpcy5ub3RhLmFyZWFJbnRlcmVzLmNvbmNhdChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vIGVzIHVuIGFycmVnbG8sIHJldmlzYW1vcyBzaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIGV4aXN0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMucHVzaChub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIEFyZWFWaWRhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiTm8gZXMgZGUgbmluZ1x1MDBGQW4gQXJlYSBkZSBWaWRhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tcHJ1ZWJhIHNpIG5pdmVsQUkgZXhpc3RlIHkgbm8gZXMgTmFOIGRlc3B1XHUwMEU5cyBkZSBpbnRlbnRhciBjb252ZXJ0aXJsbyBhIGVudGVyb1xuICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KG5vdGE/LmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOyAvLyBQR1REIHkgUFFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQUlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIElOVEVSRVNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcyA9IFtub3RhLmZyb250bWF0dGVyLmZpbGUuYmFzZW5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhbGl6YW1vcyB0aGlzLm5vdGEuYXJlYUludGVyZXMgY29uIG5vdGEudGl0dWxvIGNvbW8gZWwgcHJpbWVyIGVsZW1lbnRvLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhbW9zIHNpIG5vdGEuYXJlYUludGVyZXMgZXMgdW4gYXJyZWdsb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG8gKGV4Y2x1eWVuZG8gZWwgcHJpbWVyIGVsZW1lbnRvIHlhIGFncmVnYWRvIHF1ZSBlcyBub3RhLnRpdHVsbylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHkgYXBsaWNhbW9zIGVsIHJlZ2V4IGEgY2FkYSBlbGVtZW50by4gTHVlZ28gY29uY2F0ZW5hbW9zIGNvbiBlbCBhcnJheSBleGlzdGVudGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgYXJyZWdsbyBuaSBzdHJpbmcsIGFyZWFJbnRlcmVzIGVzIGVsIGFyZWEgaW50ZXJlcyBxdWUgZXN0XHUwMEUxIGVuIHRpdHVsby4gICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgbm8gZXhpc3RlLCB0aGlzLm5vdGEuYXJlYUludGVyZXMgeWEgdGVuZHJcdTAwRTEgbm90YS50aXR1bG8gY29tbyBzdSBcdTAwRkFuaWNvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgVklEQVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIGFycmVnbG8sIHVzYSBlbCBwcmltZXIgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVzIHVuIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvbmllbmRvIHNpIEFzdW50byBlbiBmYWxzZSBwYXJhIGxhcyBub3RhcyBlc3RydWN0dXJhIEFJIHkgQVYuIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIiB8fCBub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERFRklOSVIgTklWRUxQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSBwYXJzZUludChub3RhLmZyb250bWF0dGVyLm5pdmVsUCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3Rpdm8gPT0gbnVsbFxuICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4geyBzaUFzdW50bywgbm9tYnJlOiBwYWRyZXMgfVxuICAgICAgICB9XG5cblxufSIsICJpbXBvcnQgeyBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7XG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyQmFzZSB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlckJhc2UnO1xuXG5leHBvcnQgY2xhc3MgQW51YWxfRkggZXh0ZW5kcyBOb3RlRmllbGRIYW5kbGVyQmFzZSB7XG4gICAgY29uc3RydWN0b3IodHA6IGFueSwgaW5mb1N1YnNpc3RlbWE6IGFueSwgcGx1Z2luOiBhbnkpIHtcbiAgICAgICAgc3VwZXIodHAsIGluZm9TdWJzaXN0ZW1hLCBwbHVnaW4pO1xuICAgIH1cblxuICAgIGFzeW5jIGdldElkKCkge1xuICAgICAgICB0aGlzLm5vdGEuaWQgPSB0aGlzLmdlbmVyYXRlVVVJRCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmlkO1xuICAgIH1cblxuXG4gICAgYXN5bmMgZ2V0RmVjaGEoKSB7XG4gICAgICAgIHRoaXMubm90YS5mZWNoYSA9IERhdGVUaW1lLm5vdygpLnRvSVNPRGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLmZlY2hhO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFcdTAwRjFvKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50WWVhciA9IERhdGVUaW1lLm5vdygpLnllYXI7XG4gICAgICAgIGNvbnN0IHllYXJzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogNyB9LCAoXywgaSkgPT4gY3VycmVudFllYXIgLSAzICsgaSk7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nWWVhcnMgPSBhd2FpdCB0aGlzLmdldEV4aXN0aW5nWWVhcnMoKTtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlWWVhcnMgPSB5ZWFycy5maWx0ZXIoeWVhciA9PiAhZXhpc3RpbmdZZWFycy5pbmNsdWRlcyh5ZWFyLnRvU3RyaW5nKCkpKTtcblxuICAgICAgICBjb25zdCB5ZWFyID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoYXZhaWxhYmxlWWVhcnMubWFwKFN0cmluZyksIGF2YWlsYWJsZVllYXJzLm1hcChTdHJpbmcpLCBmYWxzZSwgXCJTZWxlY2Npb25hIGVsIGFcdTAwRjFvOlwiKTtcbiAgICAgICAgaWYgKHllYXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTZWxlY2NpXHUwMEYzbiBkZSBhXHUwMEYxbyBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS5hXHUwMEYxbyA9IHllYXI7XG4gICAgICAgIHJldHVybiB5ZWFyO1xuICAgIH1cbiAgICAgXG4gICAgXG4gICAgYXN5bmMgZ2V0RXN0YWRvKCkge1xuICAgICAgICB0aGlzLm5vdGEuZXN0YWRvID0gXCJcdUQ4M0RcdURGRTJcIjtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5lc3RhZG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCkge1xuICAgICAgICBjb25zdCBuZXdOYW1lID0gYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5ub3RhLmFcdTAwRjFvfS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuXG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgIGlmIChleGlzdHMgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcndyaXRlID0gYXdhaXQgdGhpcy5zdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU29icmVlc2NyaWJpciBBcmNoaXZvIEFjdHVhbFwiLCBcIkRldGVuZXIgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBFbCBhcmNoaXZvICR7bmV3TmFtZX0geWEgZXhpc3RlLiBcdTAwQkZRdVx1MDBFOSBkZXNlYXMgaGFjZXI/YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChvdmVyd3JpdGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuZGVsZXRlKGV4aXN0cyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldE5vdGEoKTogUHJvbWlzZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGdldEV4aXN0aW5nWWVhcnMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIGNvbnN0IHllYXJGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMuaW5mb1N1YnNpc3RlbWEuZm9sZGVyKSk7XG4gICAgICAgIGNvbnN0IHllYXJzID0geWVhckZpbGVzLm1hcChmaWxlID0+IGZpbGUuYmFzZW5hbWUpO1xuICAgICAgICByZXR1cm4geWVhcnM7XG4gICAgfVxufVxuIiwgImltcG9ydCB7IFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRlVGltZSB9IGZyb20gJ2x1eG9uJztcbmltcG9ydCB7IE5vdGVGaWVsZEhhbmRsZXJCYXNlIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyQmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBUcmltZXN0cmFsRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlckJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGluZm9TdWJzaXN0ZW1hOiBhbnksIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKHRwLCBpbmZvU3Vic2lzdGVtYSwgcGx1Z2luKTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRJZCgpIHtcbiAgICAgICAgdGhpcy5ub3RhLmlkID0gdGhpcy5nZW5lcmF0ZVVVSUQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5pZDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRGZWNoYSgpIHtcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhID0gRGF0ZVRpbWUubm93KCkudG9JU09EYXRlKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGEuZmVjaGE7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCkge1xuICAgICAgICAvLyBPcGNpb25lcyBwcmVkZWZpbmlkYXMgcGFyYSB0cmltZXN0cmVzXG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSBbXCJRMVwiLCBcIlEyXCIsIFwiUTNcIiwgXCJRNFwiXTtcbiAgICAgICAgLy8gT2J0aWVuZSBsb3MgdHJpbWVzdHJlcyB5YSBleGlzdGVudGVzIGVuIGxhIGNhcnBldGEgZGVmaW5pZGFcbiAgICAgICAgY29uc3QgZXhpc3RpbmdUcmltZXN0cmVzID0gYXdhaXQgdGhpcy5nZXRFeGlzdGluZ1RyaW1lc3RyZXMoKTtcbiAgICAgICAgLy8gRmlsdHJhIHBhcmEgZGVqYXIgc29sbyBsYXMgb3BjaW9uZXMgcXVlIG5vIHNlIGhhbiB1c2Fkb1xuICAgICAgICBjb25zdCBhdmFpbGFibGVUcmltZXN0cmVzID0gdHJpbWVzdHJlcy5maWx0ZXIocSA9PiAhZXhpc3RpbmdUcmltZXN0cmVzLmluY2x1ZGVzKHEpKTtcbiAgICAgICAgaWYgKGF2YWlsYWJsZVRyaW1lc3RyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiVG9kb3MgbG9zIHRyaW1lc3RyZXMgeWEgaGFuIHNpZG8gY3JlYWRvcyBlbiBlc3RhIGNhcnBldGEuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgYXZhaWxhYmxlVHJpbWVzdHJlcyxcbiAgICAgICAgICAgIGF2YWlsYWJsZVRyaW1lc3RyZXMsXG4gICAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICAgIFwiU2VsZWNjaW9uYSBlbCB0cmltZXN0cmU6XCJcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlNlbGVjY2lcdTAwRjNuIGRlIHRyaW1lc3RyZSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubm90YS50cmltZXN0cmUgPSB0cmltZXN0cmU7XG4gICAgICAgIHJldHVybiB0cmltZXN0cmU7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RXN0YWRvKCkge1xuICAgICAgICB0aGlzLm5vdGEuZXN0YWRvID0gXCJcdUQ4M0RcdURGRTJcIjtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5lc3RhZG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UmVuYW1lKCkge1xuICAgICAgICAvLyBDb25zdHJ1eWUgZWwgbnVldm8gbm9tYnJlIHVzYW5kbyBlbCBmb2xkZXIgeSBlbCB0cmltZXN0cmUgc2VsZWNjaW9uYWRvXG4gICAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudHJpbWVzdHJlfS5tZGA7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnRwLmZpbGUuY29uZmlnLnRhcmdldF9maWxlO1xuICAgICAgICBjb25zdCBleGlzdHMgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICBpZiAoZXhpc3RzIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJ3cml0ZSA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgRWwgYXJjaGl2byAke25ld05hbWV9IHlhIGV4aXN0ZS4gXHUwMEJGUXVcdTAwRTkgZGVzZWFzIGhhY2VyP2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAob3ZlcndyaXRlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdHMpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FuY2VsYW5kbyBsYSBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvLlwiKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9jZXNvIGNhbmNlbGFkbyBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gcmVub21icmFkbyBjb24gXHUwMEU5eGl0by5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBnZXROb3RhKCk6IFByb21pc2U8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vdGE7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRFeGlzdGluZ1RyaW1lc3RyZXMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIC8vIFNlIGZpbHRyYW4gbG9zIGFyY2hpdm9zIHF1ZSBzZSBlbmN1ZW50cmFuIGVuIGxhIGNhcnBldGEgZGVmaW5pZGEgcGFyYSBub3RhcyB0cmltZXN0cmFsZXNcbiAgICAgICAgY29uc3QgdHJpbWVzdHJlRmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcikpO1xuICAgICAgICBjb25zdCB0cmltZXN0cmVzID0gdHJpbWVzdHJlRmlsZXMubWFwKGZpbGUgPT4gZmlsZS5iYXNlbmFtZSk7XG4gICAgICAgIHJldHVybiB0cmltZXN0cmVzO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvZmllbGRIYW5kbGVycy9GSCBTdWJzaXN0ZW1hcy9DYW1wYVx1MDBGMWFzRmllbGRIYW5kbGVyLnRzXG5pbXBvcnQgeyBOb3RlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vRkggQmFzZS9Ob3RlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IEZpZWxkSGFuZGxlclV0aWxzIH0gZnJvbSAnLi4vLi4vRmllbGRIYW5kbGVyVXRpbHMnO1xuaW1wb3J0IHsgVEZpbGUsIFRGb2xkZXIsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgQ2FtcGFcdTAwRjFhc0ZpZWxkSGFuZGxlciBleHRlbmRzIE5vdGVGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGZvbGRlcjogc3RyaW5nLCBwbHVnaW46IGFueSkge1xuICAgICAgICBzdXBlcih0cCwgZm9sZGVyLCBwbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIE9idGllbmUgZWwgdHJpbWVzdHJlIGRlIGxhIGNhbXBhXHUwMEYxYSBkZXNkZSBsYXMgbm90YXMgZGUgdHJpbWVzdHJlcyBleGlzdGVudGVzXG4gICAgYXN5bmMgZ2V0VHJpbWVzdHJlKCkge1xuICAgICAgICBsZXQgdHJpbWVzdHJlcyA9IGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmZpbmRNYWluRmlsZXNXaXRoU3RhdGUoXCJUUVwiLCBudWxsLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIFxuICAgICAgICBjb25zdCB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKGIgPT4gYi5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJUcmltZXN0cmUgYWwgcXVlIHBlcnRlbmVjZSBlc3RhIGNhbXBhXHUwMEYxYTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRyaW1lc3RyZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIlNlbGVjY2lcdTAwRjNuIGRlIHRyaW1lc3RyZSBjYW5jZWxhZGEuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3RhLnRyaW1lc3RyZTtcbiAgICB9XG5cbiAgICAvLyBPYnRpZW5lIGVsIGVzdGFkbyBkZSBsYSBjYW1wYVx1MDBGMWEgKHN0YXR1cylcbiAgICBhc3luYyBnZXRTdGF0dXMoKSB7XG4gICAgICAgIGNvbnN0IGVzdGFkb3MgPSBbXG4gICAgICAgICAgICBcIlBlbmRpZW50ZVwiLFxuICAgICAgICAgICAgXCJQbGFuaWZpY2FuZG9cIixcbiAgICAgICAgICAgIFwiRGlzZVx1MDBGMW9cIixcbiAgICAgICAgICAgIFwiUmV2aXNpXHUwMEYzbiBJbnRlcm5hXCIsXG4gICAgICAgICAgICBcIlJldmlzaVx1MDBGM24gQ2xpZW50ZVwiLFxuICAgICAgICAgICAgXCJQdWJsaWNhbmRvXCIsXG4gICAgICAgICAgICBcIlJlY29nZXIgSW5kaWNhZG9yZXNcIixcbiAgICAgICAgICAgIFwiRW4gcGF1c2FcIixcbiAgICAgICAgICAgIFwiVGVybWluYWRvXCIsXG4gICAgICAgICAgICBcIkNhbmNlbGFkb1wiXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIGVzdGFkb3MsXG4gICAgICAgICAgICBlc3RhZG9zLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIkVzdGFkbyBhY3R1YWwgZGUgbGEgY2FtcGFcdTAwRjFhOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc3RhdHVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgZXN0YWRvIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgIHJldHVybiBzdGF0dXM7XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBmZWNoYSBkZSBpbmljaW8gZGUgbGEgY2FtcGFcdTAwRjFhXG4gICAgYXN5bmMgZ2V0RmVjaGFJbmljaW8oKSB7XG4gICAgICAgIC8vIFVzYW1vcyBlbCBwcm9tcHQgZXN0XHUwMEUxdGljb1xuICAgICAgICBjb25zdCBmZWNoYUFjdHVhbCA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5LU1NLWRkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ftb3MgbGEgZnVuY2lcdTAwRjNuIHByb21wdCBjb3JyZWN0YW1lbnRlIGRlc2RlIHN0YXRpY19mdW5jdGlvbnNcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGNvbnN0IGZlY2hhSW5pY2lvID0gYXdhaXQgcHJvbXB0KFxuICAgICAgICAgICAgXCJGZWNoYSBkZSBpbmljaW8gZGUgbGEgY2FtcGFcdTAwRjFhIChZWVlZLU1NLUREKTpcIixcbiAgICAgICAgICAgIGZlY2hhQWN0dWFsLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZlY2hhSW5pY2lvID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgZmVjaGEgZGUgaW5pY2lvIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5mZWNoYUluaWNpbyA9IGZlY2hhSW5pY2lvO1xuICAgICAgICByZXR1cm4gZmVjaGFJbmljaW87XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBmZWNoYSBkZSBmaW4gZGUgbGEgY2FtcGFcdTAwRjFhXG4gICAgYXN5bmMgZ2V0RmVjaGFGaW4oKSB7XG4gICAgICAgIC8vIEZlY2hhIHN1Z2VyaWRhOiAzMCBkXHUwMEVEYXMgZGVzcHVcdTAwRTlzIGRlIGxhIGZlY2hhIGRlIGluaWNpbywgbyBsYSBmZWNoYSBhY3R1YWwgc2kgbm8gaGF5IGZlY2hhIGRlIGluaWNpb1xuICAgICAgICBjb25zdCBmZWNoYUluaWNpb09iaiA9IHRoaXMubm90YS5mZWNoYUluaWNpbyBcbiAgICAgICAgICAgID8gRGF0ZVRpbWUuZnJvbUZvcm1hdCh0aGlzLm5vdGEuZmVjaGFJbmljaW8sICd5eXl5LU1NLWRkJylcbiAgICAgICAgICAgIDogRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmZWNoYVN1Z2VyaWRhID0gZmVjaGFJbmljaW9PYmoucGx1cyh7IGRheXM6IDMwIH0pLnRvRm9ybWF0KCd5eXl5LU1NLWRkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVc2Ftb3MgbGEgZnVuY2lcdTAwRjNuIHByb21wdCBjb3JyZWN0YW1lbnRlIGRlc2RlIHN0YXRpY19mdW5jdGlvbnNcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGNvbnN0IGZlY2hhRmluID0gYXdhaXQgcHJvbXB0KFxuICAgICAgICAgICAgXCJGZWNoYSBkZSBmaW4gZGUgbGEgY2FtcGFcdTAwRjFhIChZWVlZLU1NLUREKTpcIixcbiAgICAgICAgICAgIGZlY2hhU3VnZXJpZGEsXG4gICAgICAgICAgICB0cnVlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZmVjaGFGaW4gPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJTZWxlY2NpXHUwMEYzbiBkZSBmZWNoYSBkZSBmaW4gY2FuY2VsYWRhLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmZlY2hhRmluID0gZmVjaGFGaW47XG4gICAgICAgIHJldHVybiBmZWNoYUZpbjtcbiAgICB9XG5cbiAgICAvLyBPYnRpZW5lIGxhIHByaW9yaWRhZCBkZSBsYSBjYW1wYVx1MDBGMWFcbiAgICBhc3luYyBnZXRQcmlvcmlkYWQoKSB7XG4gICAgICAgIGNvbnN0IHByaW9yaWRhZGVzID0gW1wiQmFqYVwiLCBcIk1lZGlhXCIsIFwiQWx0YVwiXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgcHJpb3JpZGFkZXMsXG4gICAgICAgICAgICBwcmlvcmlkYWRlcyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJQcmlvcmlkYWQgZGUgbGEgY2FtcGFcdTAwRjFhOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAocHJpb3JpZGFkID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiU2VsZWNjaVx1MDBGM24gZGUgcHJpb3JpZGFkIGNhbmNlbGFkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5wcmlvcmlkYWQgPSBwcmlvcmlkYWQ7XG4gICAgICAgIHJldHVybiBwcmlvcmlkYWQ7XG4gICAgfVxuXG4gICAgLy8gT2J0aWVuZSBsYSBVUkwgZGUgbG9zIGluZGljYWRvcmVzXG4gICAgYXN5bmMgZ2V0SW5kaWNhZG9yZXMoKSB7XG4gICAgICAgIC8vIFVzYW1vcyBsYSBmdW5jaVx1MDBGM24gcHJvbXB0IGNvcnJlY3RhbWVudGUgZGVzZGUgc3RhdGljX2Z1bmN0aW9uc1xuICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgY29uc3QgaW5kaWNhZG9yZXMgPSBhd2FpdCBwcm9tcHQoXG4gICAgICAgICAgICBcIlVSTCBkZSBsb3MgaW5kaWNhZG9yZXMgZGUgbGEgY2FtcGFcdTAwRjFhOlwiLFxuICAgICAgICAgICAgXCJodHRwczovL1wiLFxuICAgICAgICAgICAgdHJ1ZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluZGljYWRvcmVzID09PSBudWxsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiSW5ncmVzbyBkZSBVUkwgZGUgaW5kaWNhZG9yZXMgY2FuY2VsYWRvLlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmluZGljYWRvcmVzID0gaW5kaWNhZG9yZXM7XG4gICAgICAgIHJldHVybiBpbmRpY2Fkb3JlcztcbiAgICB9XG5cbiAgICAvLyBTb2JyZXNjcmliZSBsYSBmdW5jaVx1MDBGM24gZ2V0QWxpYXNlcyBwYXJhIGFqdXN0YXJsYSBhIGxvcyByZXF1ZXJpbWllbnRvcyBlc3BlY1x1MDBFRGZpY29zXG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpIHtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaCh0aGlzLm5vdGEudGl0dWxvKTtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgQ1AtJHt0aGlzLm5vdGEudGl0dWxvfWApO1xuICAgICAgICAvLyBGb3JtYXRvOiBDUC1pZFxuICAgICAgICB0aGlzLm5vdGEuYWxpYXNlcy5wdXNoKGBDUC0ke3RoaXMubm90YS5pZH1gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgIH1cblxuICAgIC8vIEltcGxlbWVudGFjaVx1MDBGM24gZGUgZ2V0UmVuYW1lIHBhcmEgbGEgZXN0cnVjdHVyYSBkZSBjYXJwZXRhcyBiYXNhZGEgZW4gdHJpbWVzdHJlc1xuLy8gSW1wbGVtZW50YWNpXHUwMEYzbiBkZSBnZXRSZW5hbWUgcGFyYSBsYSBlc3RydWN0dXJhIGRlIGNhcnBldGFzIGJhc2FkYSBlbiB0cmltZXN0cmVzXG5hc3luYyBnZXRSZW5hbWUoKSB7XG4gICAgLy8gRWwgdHJpbWVzdHJlIHZpZW5lIGNvbiBmb3JtYXRvIFtbdHJpbWVzdHJlXV0sIGFzXHUwMEVEIHF1ZSBleHRyYWVtb3MgZWwgdmFsb3JcbiAgICBjb25zdCB0cmltZXN0cmVNYXRjaCA9IHRoaXMubm90YS50cmltZXN0cmUubWF0Y2goL1xcW1xcWyguKj8pXFxdXFxdLyk7XG4gICAgY29uc3QgdHJpbWVzdHJlID0gdHJpbWVzdHJlTWF0Y2ggPyB0cmltZXN0cmVNYXRjaFsxXSA6IFwiU2luLVRyaW1lc3RyZVwiO1xuICAgIFxuICAgIC8vIENvbnN0cnVpbW9zIGxhIHJ1dGEgY29uIGxhIGVzdHJ1Y3R1cmEgc29saWNpdGFkYVxuICAgIGNvbnN0IGJhc2VQYXRoID0gXCJTdWJzaXN0ZW1hcy9NYXJrZXRpbmcvUHJveWVjdG9zXCI7XG4gICAgY29uc3QgZm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke3RyaW1lc3RyZX1gO1xuICAgIFxuICAgIC8vIENyZWFtb3MgbGEgY2FycGV0YSBkZWwgdHJpbWVzdHJlIHNpIG5vIGV4aXN0ZVxuICAgIGF3YWl0IEZpZWxkSGFuZGxlclV0aWxzLmNyZWFyQ2FycGV0YShmb2xkZXJQYXRoKTtcbiAgICBcbiAgICAvLyBDb25zdHJ1aW1vcyBlbCBub21icmUgY29tcGxldG8gZGVsIGFyY2hpdm9cbiAgICBjb25zdCBuZXdOYW1lID0gYCR7Zm9sZGVyUGF0aH0vJHt0aGlzLm5vdGEudGl0dWxvfS5tZGA7XG4gICAgXG4gICAgY29uc3QgZmlsZSA9IHRoaXMudHAuZmlsZS5jb25maWcudGFyZ2V0X2ZpbGU7XG4gICAgY29uc3QgZXhpc3RlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICBcbiAgICB0cnkge1xuICAgICAgICBpZiAoZXhpc3RlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vbWJyZUZpbGUgPSBuZXdOYW1lLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGJvcnJhciA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNvYnJlZXNjcmliaXIgQXJjaGl2byBBY3R1YWxcIiwgXCJEZXRlbmVyIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWJyaXIgbGEgbm90YSBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKG51ZXZvQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDYW5jZWxhbmRvIGxhIGNyZWFjaVx1MDBGM24gZGVsIGFyY2hpdm8uXCIpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb2Nlc28gY2FuY2VsYWRvIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQucmVuYW1lKGZpbGUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byByZW5vbWJyYWRvIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBYnJpciBsYSBub3RhIGVuIHVuYSBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChudWV2b0FyY2hpdm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSkub3BlbkZpbGUobnVldm9BcmNoaXZvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgY2FtYmlhciBlbCBub21icmVcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG59XG59IiwgIi8vIHNyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL2ZpZWxkSGFuZGxlcnMvRkggU3Vic2lzdGVtYXMvRW50cmVnYWJsZUZpZWxkSGFuZGxlci50c1xuaW1wb3J0IHsgTm90ZUZpZWxkSGFuZGxlciB9IGZyb20gJy4uL0ZIIEJhc2UvTm90ZUZpZWxkSGFuZGxlcic7XG5pbXBvcnQgeyBFbnRyZWdhYmxlRmllbGRIYW5kbGVyIH0gZnJvbSAnLi4vLi4vSW50ZXJmYWNlcy9FbnRyZWdhYmxlRmllbGRIYW5kbGVyJztcbmltcG9ydCB7IFRGaWxlLCBURm9sZGVyLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBGaWVsZEhhbmRsZXJVdGlscyB9IGZyb20gJy4uLy4uL0ZpZWxkSGFuZGxlclV0aWxzJztcbmltcG9ydCB7IFNlbGVjY2lvbk1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9zZWxlY2Npb25Nb2RhbCc7XG5pbXBvcnQgeyBTZWxlY2Npb25Nb2RhbFRhcmVhcyB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvc2VsZWNjaW9uTW9kYWxUYXJlYXMnO1xuaW1wb3J0IHsgZnV6enlTZWxlY3RPckNyZWF0ZSB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvZnV6enlTZWxlY3RPckNyZWF0ZSc7XG5pbXBvcnQgeyBTZWxlY2Npb25NdWx0aXBsZU1vZGFsfSBmcm9tICcuLi8uLi8uLi9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWwnO1xuaW1wb3J0IHsgU3Bpbm5lck1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9zcGlubmVyTW9kYWwnO1xuaW1wb3J0IHsgRGF0ZVBpY2tlck1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vbW9kYWxlcy9kYXRlUGlja2VyTW9kYWwnO1xuaW1wb3J0IHsgUGVkaWRvc0NsaWVudGVNb2RhbCB9IGZyb20gJy4uLy4uLy4uL21vZGFsZXMvcGVkaWRvc0NsaWVudGVNb2RhbCc7XG5cbmV4cG9ydCBjbGFzcyBFbnRyZWdhYmxlRmllbGRIYW5kbGVyIGV4dGVuZHMgTm90ZUZpZWxkSGFuZGxlciBpbXBsZW1lbnRzIEVudHJlZ2FibGVGaWVsZEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHRwOiBhbnksIGluZm9TdWJzaXN0ZW1hOiBhbnksIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKHRwLCBpbmZvU3Vic2lzdGVtYSwgcGx1Z2luKTtcbiAgICB9XG4gICAgXG4gICAgICAvLyBTb2JyZXNjcmliaW1vcyBlbCBtXHUwMEU5dG9kbyBnZXRBc3VudG8gcGFyYSBtYW5lamFyIE5vdGlvbklEXG4gICAgICBhc3luYyBnZXRBc3VudG8oKTogUHJvbWlzZTx7IHNpQXN1bnRvOiBib29sZWFuLCBub21icmU6IHN0cmluZ1tdIH0+IHsgXG4gICAgICAgIGxldCBwYWRyZXMgPSBbXTtcbiAgICAgICAgbGV0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IG5vbWJyZSA9IFwiXCI7XG4gICAgICAgIGxldCBub3RhO1xuICAgICAgICBcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKSB7XG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7XG4gICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgbm90YS5mcm9udG1hdHRlciBleGlzdGUgeSBhc2lnbmFyIHVuIG9iamV0byB2YWNcdTAwRURvIGEgZmlsZVxuICAgICAgICAgICAgbm90YS5mcm9udG1hdHRlciA9IG5vdGEuZnJvbnRtYXR0ZXIgfHwge307XG4gICAgICAgICAgICBub3RhLmZyb250bWF0dGVyLmZpbGUgPSB7fTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obm90YS5mcm9udG1hdHRlci5maWxlLCBhY3Rpdm8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBwYWRyZXMudW5zaGlmdChub21icmUpOyAvLyBBXHUwMEYxYWRlIGVsIG5vbWJyZSBhbCBpbmljaW8gZGVsIGFycmVnbG8sIGRlc3BsYXphbmRvIGxvcyBkZW1cdTAwRTFzIGVsZW1lbnRvc1xuICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihbXCJTaVwiLCBcIk5vXCJdLCBbdHJ1ZSwgZmFsc2VdLCB0cnVlLCBub21icmUgKyBcIiBlcyBvcmlnZW4gZGUgXCIgKyB0aGlzLm5vdGEudGl0dWxvICsgXCI/XCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoc2lBc3VudG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXN1bnRvRGVmaW5pZG8gPSB0cnVlOyAvLyBQYXJhIHF1ZSBubyBlamVjdXRlIGxhIGJ1c3F1ZWRhIGRlIEFyZWEgVmlkYSwgQXJlYSBkZSBJbnRlclx1MDBFOXMsIHByb3llY3RvIFEgbyBHVERcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBleGlzdGUgdW4gY2FtcG8gcXVlIGNvbWllbmNlIGNvbiBcIk5vdGlvbklELVwiIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGlvbklEID0gbnVsbDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBub3RhLmZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aChcIk5vdGlvbklELVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm90aW9uSUQgPSBub3RhLmZyb250bWF0dGVyW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRW5jb250cmFkbyBOb3Rpb25JRDogJHtub3Rpb25JRH0gY29uIGNsYXZlOiAke2tleX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpIGVuY29udHJhbW9zIHVuIE5vdGlvbklELCBsbyBndWFyZGFtb3MgZW4gZWwgY2FtcG8gcHJveWVjdG9cbiAgICAgICAgICAgICAgICBpZiAobm90aW9uSUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvID0gW25vdGlvbklEXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFzaWduYWRvIE5vdGlvbklEIGFsIHByb3llY3RvOiAke25vdGlvbklEfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbml2ZWw7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChub3RhPy5mcm9udG1hdHRlcj8udHlwZSkgeyAvLyBMYSBub3RhIGFjdGl2YSBlcyB1bmE6XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQR1REXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJQUVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPUyBERSBRIFkgUFJPWUVDVE8gR1REXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YS5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJQUVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIFBRLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub21icmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIFBST1lFQ1RPU0dURFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluaWNpYWxpemFtb3MgdGhpcy5ub3RhLnByb3llY3RvR1REIGNvbiB1biB2YWxvciBwcmVkZXRlcm1pbmFkbyBkZSBjYWRlbmEgdmFjXHUwMEVEYVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b0dURCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5wcm95ZWN0b0dURCBleGlzdGUgeSBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgZXMgdW4gYXJyZWdsbywgaXRlcmFtb3Mgc29icmUgY2FkYSBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEucHJveWVjdG9HVEQgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9idGVuZXIgUHJveWVjdG9RIHkgUHJveWVjdG8gR1REIGN1YW5kbyBsYSBub3RhIGVzIFByb3llY3RvR1RELlxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyPy50eXBlID09PSBcIlBHVERcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ1VBTkRPIExBIE5PVEEgQUNUSVZBIEVTIFVOIEdURC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWRVJJRklDQUNJT04gREUgUFJPWUVDVE9TR1REXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gW25vbWJyZV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1REKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCB1dGlsaXphbW9zIGNvbmNhdCBwYXJhIGFcdTAwRjFhZGlyIGxvcyBlbGVtZW50b3MgeWEgcHJvY2VzYWRvcyBjb24gZWwgcmVnZXggYWwgYXJyZWdsbyB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gdGhpcy5ub3RhLnByb3llY3RvR1RELmNvbmNhdChub3RhLmZyb250bWF0dGVyLnByb3llY3RvR1RELm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlIHkgdXNhbW9zIHB1c2ggcGFyYSBhZ3JlZ2FybG8gYSB0aGlzLm5vdGEucHJveWVjdG9HVERcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1RELnB1c2gobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLnByb3llY3RvR1REIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLnByb3llY3RvR1REIHlhIGVzdFx1MDBFMSBlc3RhYmxlY2lkbyBlbiBcIlwiIHBvciBkZWZlY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhLmZyb250bWF0dGVyLnByb3llY3RvUSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUgcGVybyBubyBlcyB1biBhcnJlZ2xvLCBhcGxpY2Ftb3MgZWwgcmVnZXggZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBub3RhLmZyb250bWF0dGVyLnByb3llY3RvUS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIFByb3llY3RvUSB5IFByb3llY3RvIEdURCBjdWFuZG8gbGEgbm90YSBlcyBvdHJhIGNvc2EgcXVlIG5vIGVzIHByb3llY3RvXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5wcm95ZWN0b1EgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5wcm95ZWN0b1EpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLm1hcChlbGVtZW50byA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudG8ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9RKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvUSA9IG5vdGEuZnJvbnRtYXR0ZXIucHJveWVjdG9RLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYW1vcyBzaSBub3RhLnByb3llY3RvR1REIGV4aXN0ZSB5IGVzIHVuIGFycmVnbG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhPy5mcm9udG1hdHRlcj8ucHJveWVjdG9HVEQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGVzIHVuIGFycmVnbG8sIGl0ZXJhbW9zIHNvYnJlIGNhZGEgZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5tYXAoZWxlbWVudG8gPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnByb3llY3RvR1REKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSBwZXJvIG5vIGVzIHVuIGFycmVnbG8sIGFwbGljYW1vcyBlbCByZWdleCBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLnByb3llY3RvR1REID0gbm90YS5mcm9udG1hdHRlci5wcm95ZWN0b0dURC5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgYXJlYUludGVyZXMgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBleGlzdGUsIGFwbGljYW1vcyBlbCByZWdleCB5IGxvIGFcdTAwRjFhZGltb3MgY29tbyBzZWd1bmRvIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhSW50ZXJlcy5wdXNoKG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3MgQXJlYVZpZGFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LmFyZWFWaWRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gYXJyZWdsbywgdXNhIGVsIHByaW1lciBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhWzBdLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXMgdW4gc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGEucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGVzdFx1MDBFMSBkZWZpbmlkbyBvIGVzdFx1MDBFMSB2YWNcdTAwRURvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gXCJObyBlcyBkZSBuaW5nXHUwMEZBbiBBcmVhIGRlIFZpZGFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhPy5mcm9udG1hdHRlcj8ubml2ZWxQKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IHBhcnNlSW50KG5vdGEuZnJvbnRtYXR0ZXIubml2ZWxQKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIG5pdmVsQUkgbm8gZXhpc3RlIG8gc3UgY29udmVyc2lcdTAwRjNuIGEgZW50ZXJvIHJlc3VsdGEgZW4gTmFOLCBlc3RhYmxlY2Ugbml2ZWwgYSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbml2ZWwgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLm5pdmVsUCA9IG5pdmVsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gUEdURCB5IFBRXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVkVSSUZJQ0FDSU9OIERFIEFSRUEgREUgSU5URVJFU1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyPy50eXBlID09PSBcIkFJXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSBbbm90YS5mcm9udG1hdHRlci5maWxlLmJhc2VuYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbmljaWFsaXphbW9zIHRoaXMubm90YS5hcmVhSW50ZXJlcyBjb24gbm90YS50aXR1bG8gY29tbyBlbCBwcmltZXIgZWxlbWVudG8uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXN0ZSBzb2xvIGFwbGljYSBwYXJhIGN1YW5kbyBlc3RveSBjb25zdHJ1eWVuZG8gZGVzZGUgQXJlYSBkZSBJbnRlcmVzIG90cmEgQXJlYSBkZSBJbnRlcmVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2Ftb3Mgc2kgbm90YS5hcmVhSW50ZXJlcyBlcyB1biBhcnJlZ2xvXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyPy5hcmVhSW50ZXJlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBlcyB1biBhcnJlZ2xvLCBpdGVyYW1vcyBzb2JyZSBjYWRhIGVsZW1lbnRvIChleGNsdXllbmRvIGVsIHByaW1lciBlbGVtZW50byB5YSBhZ3JlZ2FkbyBxdWUgZXMgbm90YS50aXR1bG8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8geSBhcGxpY2Ftb3MgZWwgcmVnZXggYSBjYWRhIGVsZW1lbnRvLiBMdWVnbyBjb25jYXRlbmFtb3MgY29uIGVsIGFycmF5IGV4aXN0ZW50ZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYUludGVyZXMgPSB0aGlzLm5vdGEuYXJlYUludGVyZXMuY29uY2F0KG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMubWFwKGVsZW1lbnRvID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRvLnJlcGxhY2UoL1xcW1xcW1xccyp8XFxzKlxcXVxcXS9nLCAnJykpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbm8gZXMgdW4gYXJyZWdsbywgcmV2aXNhbW9zIHNpIG5vdGEuZnJvbnRtYXR0ZXIuYXJlYUludGVyZXMgZXhpc3RlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGE/LmZyb250bWF0dGVyLmFyZWFJbnRlcmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpIGV4aXN0ZSwgYXBsaWNhbW9zIGVsIHJlZ2V4IHkgbG8gYVx1MDBGMWFkaW1vcyBjb21vIHNlZ3VuZG8gZWxlbWVudG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFJbnRlcmVzLnB1c2gobm90YS5mcm9udG1hdHRlci5hcmVhSW50ZXJlcy5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBubyBlcyBhcnJlZ2xvIG5pIHN0cmluZywgYXJlYUludGVyZXMgZXMgZWwgYXJlYSBpbnRlcmVzIHF1ZSBlc3RcdTAwRTEgZW4gdGl0dWxvLiAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaSBub3RhLmZyb250bWF0dGVyLmFyZWFJbnRlcmVzIG5vIGV4aXN0ZSwgdGhpcy5ub3RhLmFyZWFJbnRlcmVzIHlhIHRlbmRyXHUwMEUxIG5vdGEudGl0dWxvIGNvbW8gc3UgXHUwMEZBbmljbyBlbGVtZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZFUklGSUNBQ0lPTiBERSBBUkVBIERFIFZJREFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3RhPy5mcm9udG1hdHRlcj8uYXJlYVZpZGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBhcnJlZ2xvLCB1c2EgZWwgcHJpbWVyIGVsZW1lbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90YS5hcmVhVmlkYSA9IG5vdGEuZnJvbnRtYXR0ZXIuYXJlYVZpZGFbMF0ucmVwbGFjZSgvXFxbXFxbXFxzKnxcXHMqXFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBub3RhLmZyb250bWF0dGVyLmFyZWFWaWRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFcyB1biBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFyZWFWaWRhID0gbm90YS5mcm9udG1hdHRlci5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFtcXHMqfFxccypcXF1cXF0vZywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZXN0XHUwMEUxIGRlZmluaWRvIG8gZXN0XHUwMEUxIHZhY1x1MDBFRG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEuYXJlYVZpZGEgPSBcIk5vIGVzIGRlIG5pbmdcdTAwRkFuIEFyZWEgZGUgVmlkYVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcG9uaWVuZG8gc2kgQXN1bnRvIGVuIGZhbHNlIHBhcmEgbGFzIG5vdGFzIGVzdHJ1Y3R1cmEgQUkgeSBBVi4gXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90YT8uZnJvbnRtYXR0ZXI/LnR5cGUgPT09IFwiQUlcIiB8fCBub3RhPy5mcm9udG1hdHRlcj8udHlwZSA9PT0gXCJBVlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lBc3VudG8gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gREVGSU5JUiBOSVZFTFBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbXBydWViYSBzaSBuaXZlbEFJIGV4aXN0ZSB5IG5vIGVzIE5hTiBkZXNwdVx1MDBFOXMgZGUgaW50ZW50YXIgY29udmVydGlybG8gYSBlbnRlcm9cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihwYXJzZUludChub3RhLmZyb250bWF0dGVyPy5uaXZlbFApKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pdmVsID0gcGFyc2VJbnQobm90YS5mcm9udG1hdHRlci5uaXZlbFApICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2kgbml2ZWxBSSBubyBleGlzdGUgbyBzdSBjb252ZXJzaVx1MDBGM24gYSBlbnRlcm8gcmVzdWx0YSBlbiBOYU4sIGVzdGFibGVjZSBuaXZlbCBhIDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaXZlbCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEubml2ZWxQID0gbml2ZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgeyAvLyBhY3RpdmEgbm8gZXMgb3JpZ2VuIGRlIENyZWFuZG8gUlIgLSBQR1REIC0gUFEgIGlmKHNpQXN1bnRvKVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIGFjdGl2byA9PSBudWxsXG4gICAgICAgICAgICBzaUFzdW50byA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHNpQXN1bnRvLCBub21icmU6IHBhZHJlcyB9XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldFRyaW1lc3RyZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZXMgdW5hIGNvbnRpbnVhY2lcdTAwRjNuIGRlc2RlIHVuYSBDYW1wYVx1MDBGMWFcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAoYWN0aXZvKSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhY3Rpdm8pPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1ldGFkYXRhICYmIG1ldGFkYXRhLnR5cGUgPT09ICdDcCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlc0NvbnRpbnVhY2lvbiA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgICAgICBbXCJTXHUwMEVEXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBgXHUwMEJGRXN0ZSBlbnRyZWdhYmxlIGVzIHBhcnRlIGRlIGxhIGNhbXBhXHUwMEYxYSAke2FjdGl2by5iYXNlbmFtZX0/YFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgaWYgKGVzQ29udGludWFjaW9uICYmIG1ldGFkYXRhLnRyaW1lc3RyZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gbWV0YWRhdGEudHJpbWVzdHJlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWV0YWRhdGEudHJpbWVzdHJlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2kgbm8gZXMgY29udGludWFjaVx1MDBGM24sIGJ1c2NhciB0cmltZXN0cmVzIGRpc3BvbmlibGVzXG4gICAgICAgIGNvbnN0IHRyaW1lc3RyZXMgPSBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5maW5kTWFpbkZpbGVzV2l0aFN0YXRlKFwiVFFcIiwgbnVsbCwgdGhpcy5wbHVnaW4pO1xuICAgICAgICBjb25zdCB0cmltZXN0cmUgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKHQgPT4gdC5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIHRyaW1lc3RyZXMubWFwKHQgPT4gdC5maWxlLmJhc2VuYW1lKSxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJTZWxlY2Npb25hIGVsIHRyaW1lc3RyZSBwYXJhIGVzdGUgZW50cmVnYWJsZTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0cmltZXN0cmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlYmUgc2VsZWNjaW9uYXIgdW4gdHJpbWVzdHJlIHBhcmEgY29udGludWFyXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudHJpbWVzdHJlID0gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgICAgICByZXR1cm4gYFtbJHt0cmltZXN0cmV9XV1gO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRUaXBvKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHRpcG9zRW50cmVnYWJsZSA9IFtcbiAgICAgICAgICAgIFwiQmxvZ1wiLCBcbiAgICAgICAgICAgIFwiQ29ycmVvIEVsZWN0clx1MDBGM25pY29cIiwgXG4gICAgICAgICAgICBcIkRpc2VcdTAwRjFvIFBlcnNvbmFsaXphZG9cIixcbiAgICAgICAgICAgIFwiRW50cmVuYW1pZW50b1wiLFxuICAgICAgICAgICAgXCJFc3R1ZGlvIGRlIGNhc29cIixcbiAgICAgICAgICAgIFwiSGlzdG9yaWFcIixcbiAgICAgICAgICAgIFwiSW5mb2dyYWZcdTAwRURhXCIsXG4gICAgICAgICAgICBcIlBhdXRhXCIsXG4gICAgICAgICAgICBcIlBvZGNhc3RcIixcbiAgICAgICAgICAgIFwiUG9zdFwiLFxuICAgICAgICAgICAgXCJSZWVsXCIsXG4gICAgICAgICAgICBcIlRhcmVhIEF2YW56YWRhXCIsXG4gICAgICAgICAgICBcIlZpZGVvXCIsXG4gICAgICAgICAgICBcIldlYmluYXJcIlxuICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdGlwbyA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgdGlwb3NFbnRyZWdhYmxlLFxuICAgICAgICAgICAgdGlwb3NFbnRyZWdhYmxlLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIlNlbGVjY2lvbmEgZWwgdGlwbyBkZSBlbnRyZWdhYmxlOlwiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRpcG8pIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRlYmUgc2VsZWNjaW9uYXIgdW4gdGlwbyBkZSBlbnRyZWdhYmxlIHBhcmEgY29udGludWFyXCIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLm5vdGEudGlwbyA9IHRpcG87XG4gICAgICAgIHJldHVybiB0aXBvO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRDYW5hbGVzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgdG9kb3NMb3NDYW5hbGVzID0gW1xuICAgICAgICAgICAgXCJXaGF0c2FwcFwiLFxuICAgICAgICAgICAgXCJJbnN0YWdyYW1cIixcbiAgICAgICAgICAgIFwiRmFjZWJvb2tcIixcbiAgICAgICAgICAgIFwiVGlrIFRva1wiLFxuICAgICAgICAgICAgXCJTaXRpbyBXZWJcIixcbiAgICAgICAgICAgIFwiRW1haWwgbWFya2V0aW5nXCIsXG4gICAgICAgICAgICBcIllvdXR1YmVcIixcbiAgICAgICAgICAgIFwiVHdpdHRlclwiLFxuICAgICAgICAgICAgXCJMaW5rZWRJblwiLFxuICAgICAgICAgICAgXCJPdHJvXCJcbiAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByZXNlbGVjY2lvbmFyIGNhbmFsZXMgc2VnXHUwMEZBbiBlbCB0aXBvXG4gICAgICAgIGxldCBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAodGhpcy5ub3RhLnRpcG8pIHtcbiAgICAgICAgICAgIGNhc2UgXCJIaXN0b3JpYVwiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiV2hhdHNhcHBcIiwgXCJJbnN0YWdyYW1cIiwgXCJGYWNlYm9va1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQb3N0XCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJJbnN0YWdyYW1cIiwgXCJGYWNlYm9va1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJSZWVsXCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJJbnN0YWdyYW1cIiwgXCJUaWsgVG9rXCIsIFwiWW91dHViZVwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJWaWRlb1wiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiWW91dHViZVwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJCbG9nXCI6XG4gICAgICAgICAgICAgICAgY2FuYWxlc1ByZXNlbGVjY2lvbmFkb3MgPSBbXCJTaXRpbyBXZWJcIiwgXCJMaW5rZWRJblwiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJQYXV0YVwiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiSW5zdGFncmFtXCIsIFwiRmFjZWJvb2tcIl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQ29ycmVvIEVsZWN0clx1MDBGM25pY29cIjpcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtcIkVtYWlsIG1hcmtldGluZ1wiXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJJbmZvZ3JhZlx1MDBFRGFcIjpcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtcIkluc3RhZ3JhbVwiLCBcIkZhY2Vib29rXCJdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIkVzdHVkaW8gZGUgY2Fzb1wiOlxuICAgICAgICAgICAgICAgIGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zID0gW1wiTGlua2VkSW5cIl07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIFBhcmEgbG9zIG90cm9zIHRpcG9zIG5vIGhheSBwcmVzZWxlY2Npb25hZG9zIGVzcGVjXHUwMEVEZmljb3NcbiAgICAgICAgICAgICAgICBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBvcGNpb25lcyBwYXJhIGVsIHNlbGVjdG9yIG1cdTAwRkFsdGlwbGVcbiAgICAgICAgY29uc3Qgb3BjaW9uZXMgPSB0b2Rvc0xvc0NhbmFsZXMubWFwKGNhbmFsID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm9tYnJlOiBjYW5hbCxcbiAgICAgICAgICAgICAgICBzZWxlY2Npb25hZG86IGNhbmFsZXNQcmVzZWxlY2Npb25hZG9zLmluY2x1ZGVzKGNhbmFsKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNb3N0cmFyIHNlbGVjY2lcdTAwRjNuIG1cdTAwRkFsdGlwbGUgcGVyc29uYWxpemFkYVxuICAgICAgICBjb25zdCBtdWx0aVNlbGVjdE1vZGFsID0gbmV3IFNlbGVjY2lvbk11bHRpcGxlTW9kYWwodGhpcy5wbHVnaW4uYXBwLCBvcGNpb25lcywgXCJTZWxlY2Npb25hIGxvcyBjYW5hbGVzIHBhcmEgZXN0ZSBlbnRyZWdhYmxlXCIpO1xuICAgICAgICBjb25zdCBjYW5hbGVzU2VsZWNjaW9uYWRvcyA9IGF3YWl0IG11bHRpU2VsZWN0TW9kYWwub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNhbmFsZXNTZWxlY2Npb25hZG9zIHx8IGNhbmFsZXNTZWxlY2Npb25hZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gUHJvcG9yY2lvbmEgYWwgbWVub3MgbG9zIGNhbmFsZXMgcHJlc2VsZWNjaW9uYWRvcyBzaSBlbCB1c3VhcmlvIG5vIHNlbGVjY2lvbmEgbmluZ3Vub1xuICAgICAgICAgICAgdGhpcy5ub3RhLmNhbmFsZXMgPSBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcztcbiAgICAgICAgICAgIHJldHVybiBjYW5hbGVzUHJlc2VsZWNjaW9uYWRvcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmNhbmFsZXMgPSBjYW5hbGVzU2VsZWNjaW9uYWRvcztcbiAgICAgICAgcmV0dXJuIGNhbmFsZXNTZWxlY2Npb25hZG9zO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRTdGF0dXMoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgY29uc3QgZXN0YWRvcyA9IFtcbiAgICAgICAgICAgIFwiU2luIGVtcGV6YXJcIixcbiAgICAgICAgICAgIFwiRGlzZVx1MDBGMWFuZG9cIixcbiAgICAgICAgICAgIFwiUmV2aXNpXHUwMEYzbiBJbnRlcm5hXCIsXG4gICAgICAgICAgICBcIlJldmlzaVx1MDBGM24gQ2xpZW50ZVwiLFxuICAgICAgICAgICAgXCJQcm9ncmFtYWNpXHUwMEYzbiBwYXJyaWxhXCIsXG4gICAgICAgICAgICBcIlB1YmxpY2Fkb1wiLFxuICAgICAgICAgICAgXCJDb21wbGV0YWRvXCIsXG4gICAgICAgICAgICBcIkFyY2hpdmFkb1wiXG4gICAgICAgIF07XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0dXMgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIGVzdGFkb3MsXG4gICAgICAgICAgICBlc3RhZG9zLFxuICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICBcIlNlbGVjY2lvbmEgZWwgZXN0YWRvIGFjdHVhbCBkZWwgZW50cmVnYWJsZTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgICAgICAgIC8vIFZhbG9yIHBvciBkZWZlY3RvXG4gICAgICAgICAgICB0aGlzLm5vdGEuc3RhdHVzID0gXCJTaW4gZW1wZXphclwiO1xuICAgICAgICAgICAgcmV0dXJuIFwiU2luIGVtcGV6YXJcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgcmV0dXJuIHN0YXR1cztcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0UHJpb3JpZGFkKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHByaW9yaWRhZGVzID0gW1wiQmFqYVwiLCBcIk1lZGlhXCIsIFwiQWx0YVwiXTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByaW9yaWRhZCA9IGF3YWl0IHRoaXMuc3VnZ2VzdGVyKFxuICAgICAgICAgICAgcHJpb3JpZGFkZXMsXG4gICAgICAgICAgICBwcmlvcmlkYWRlcyxcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgXCJTZWxlY2Npb25hIGxhIHByaW9yaWRhZCBkZWwgZW50cmVnYWJsZTpcIlxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwcmlvcmlkYWQpIHtcbiAgICAgICAgICAgIC8vIFZhbG9yIHBvciBkZWZlY3RvXG4gICAgICAgICAgICB0aGlzLm5vdGEucHJpb3JpZGFkID0gXCJNZWRpYVwiO1xuICAgICAgICAgICAgcmV0dXJuIFwiTWVkaWFcIjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLnByaW9yaWRhZCA9IHByaW9yaWRhZDtcbiAgICAgICAgcmV0dXJuIHByaW9yaWRhZDtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0UHVibGljYWNpb24oKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IERhdGVQaWNrZXJNb2RhbCh0aGlzLnBsdWdpbi5hcHApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSBhd2FpdCBtb2RhbC53YWl0Rm9ySW5wdXQoKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkRGF0ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7IC8vIFNpIHNlIGNhbmNlbGEsIGRldm9sdmVyIHN0cmluZyB2YWNcdTAwRURvXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5wdWJsaWNhY2lvbiA9IHNlbGVjdGVkRGF0ZTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkRGF0ZTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0UGllemFOdWJlKCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIGNvbnN0IHVybCA9IGF3YWl0IHRoaXMucHJvbXB0KFxuICAgICAgICAgICAgXCJVUkwgZGUgbGEgcGllemEgZW4gbGEgbnViZSAoR29vZ2xlIERyaXZlLCBEcm9wYm94LCBldGMuKTpcIixcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9cIixcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5waWV6YU51YmUgPSB1cmwgfHwgXCJcIjtcbiAgICAgICAgcmV0dXJuIHVybCB8fCBcIlwiO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyBnZXRVcmxDYW52YSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCB0aGlzLnByb21wdChcbiAgICAgICAgICAgIFwiVVJMIGRlbCBkaXNlXHUwMEYxbyBlbiBDYW52YTpcIixcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9cIixcbiAgICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS51cmxDYW52YSA9IHVybCB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gdXJsIHx8IFwiXCI7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGdldEhpdHMoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICAgICAgLy8gSW1wbGVtZW50YW1vcyB1biBzZWxlY3RvciBudW1cdTAwRTlyaWNvIHRpcG8gc3Bpbm5lclxuICAgICAgICBjb25zdCBzcGlubmVyTW9kYWwgPSBuZXcgU3Bpbm5lck1vZGFsKHRoaXMucGx1Z2luLmFwcCwgMSwgMSwgMTAwMCk7XG4gICAgICAgIGNvbnN0IGhpdHMgPSBhd2FpdCBzcGlubmVyTW9kYWwub3BlbkFuZEF3YWl0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaGl0cyA9PT0gbnVsbCB8fCBoaXRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIFZhbG9yIHBvciBkZWZlY3RvXG4gICAgICAgICAgICB0aGlzLm5vdGEuaGl0cyA9IDE7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmhpdHMgPSBoaXRzO1xuICAgICAgICByZXR1cm4gaGl0cztcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0UGVkaWRvc0FsQ2xpZW50ZSgpOiBQcm9taXNlPHsgcGVkaWRvczogc3RyaW5nLCBwZW5kaWVudGVzOiBib29sZWFuIH0+IHtcbiAgICAgICAgLy8gSW1wbGVtZW50YW1vcyB1biBtb2RhbCBwZXJzb25hbGl6YWRvIGNvbiB0ZXh0YXJlYSB5IGNoZWNrYm94XG4gICAgICAgIGNvbnN0IHBlZGlkb3NNb2RhbCA9IG5ldyBQZWRpZG9zQ2xpZW50ZU1vZGFsKHRoaXMucGx1Z2luLmFwcCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdGFkbyA9IGF3YWl0IHBlZGlkb3NNb2RhbC5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzdWx0YWRvKSB7XG4gICAgICAgICAgICB0aGlzLm5vdGEucGVkaWRvc0FsQ2xpZW50ZSA9IFwiXCI7XG4gICAgICAgICAgICB0aGlzLm5vdGEucGVuZGllbnRlc0NsaWVudGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB7IHBlZGlkb3M6IFwiXCIsIHBlbmRpZW50ZXM6IGZhbHNlIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5wZWRpZG9zQWxDbGllbnRlID0gcmVzdWx0YWRvLnBlZGlkb3M7XG4gICAgICAgIHRoaXMubm90YS5wZW5kaWVudGVzQ2xpZW50ZSA9IHJlc3VsdGFkby5wZW5kaWVudGVzO1xuICAgICAgICByZXR1cm4gcmVzdWx0YWRvO1xuICAgIH1cbiAgICBcbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIGRldGVybWluYXIgc2kgZWwgZW50cmVnYWJsZSBlcyBmYWN0dXJhYmxlIGJhc2FkbyBlbiBxdWlcdTAwRTluIGxvIHJlYWxpemFyXHUwMEUxXG4gICAgYXN5bmMgZ2V0RmFjdHVyYWJsZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gT3BjaW9uZXMgZGlzcG9uaWJsZXNcbiAgICAgICAgY29uc3Qgb3BjaW9uZXMgPSBbXCJVbiB0ZXJjZXJvXCIsIFwiQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cIl07XG4gICAgICAgIGNvbnN0IHZhbG9yZXMgPSBbZmFsc2UsIHRydWVdO1xuICAgICAgICBcbiAgICAgICAgLy8gVXNhbW9zIGVsIG1cdTAwRTl0b2RvIHN1Z2dlc3RlciBuYXRpdm8sIHF1ZSB5YSBtYW5lamEgbGEgbmF2ZWdhY2lcdTAwRjNuIHBvciB0ZWNsYWRvXG4gICAgICAgIGNvbnN0IHJlYWxpemFkb3IgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgIG9wY2lvbmVzLFxuICAgICAgICAgICAgdmFsb3JlcyxcbiAgICAgICAgICAgIGZhbHNlLCAvLyBObyBlcyBtdWx0aXNlbGVjY2lcdTAwRjNuXG4gICAgICAgICAgICBcIlx1MDBCRlF1aVx1MDBFOW4gcmVhbGl6YXJcdTAwRTEgZXN0ZSBlbnRyZWdhYmxlP1wiXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBlbCB1c3VhcmlvIGNhbmNlbGEsIGFzdW1pbW9zIFwiVW4gdGVyY2Vyb1wiIChubyBmYWN0dXJhYmxlKVxuICAgICAgICBpZiAocmVhbGl6YWRvciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ub3RhLmZhY3R1cmFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5ub3RhLmZhY3R1cmFibGUgPSByZWFsaXphZG9yO1xuICAgICAgICByZXR1cm4gcmVhbGl6YWRvcjtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWxpYXNlcygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSBbXTtcbiAgICAgICAgXG4gICAgICAgICAgXG4gICAgICAgIC8vIEZvcm1hdG86IE5vbWJyZVxuICAgICAgICBhbGlhc2VzLnB1c2goYCR7dGhpcy5ub3RhLnRpdHVsb31gKTtcbiAgICAgICBcbiAgICAgICAgLy8gRm9ybWF0bzogRU1rdC1Ob21icmVcbiAgICAgICAgYWxpYXNlcy5wdXNoKGBFTWt0LSR7dGhpcy5ub3RhLnRpdHVsb31gKTtcbiAgICAgICBcbiAgICAgICAgIC8vIEZvcm1hdG86IEVNa3QtaWRcbiAgICAgICAgIGFsaWFzZXMucHVzaChgRU1rdC0ke3RoaXMubm90YS5pZH1gKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMubm90YS5hbGlhc2VzID0gYWxpYXNlcztcbiAgICAgICAgcmV0dXJuIGFsaWFzZXM7XG4gICAgfVxuICAgIFxuLy8gSW1wbGVtZW50YWNpXHUwMEYzbiBkZSBnZXRSZW5hbWUgcGFyYSBsYSBlc3RydWN0dXJhIGRlIGNhcnBldGFzIGJhc2FkYSBlbiB0cmltZXN0cmVzXG5cbmFzeW5jIGdldFJlbmFtZSgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIC8vIENyZWFyIGxhIGVzdHJ1Y3R1cmEgZGUgY2FycGV0YXMgcG9yIHRyaW1lc3RyZVxuICAgIGNvbnN0IGZvbGRlckJhc2UgPSBgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn1gO1xuICAgIC8vIEFwbGljYXIgZmlsdHJvIHBhcmEgZWxpbWluYXIgW1sgeSBdXVxuICAgIGNvbnN0IHRyaW1lc3RyZUxpbXBpbyA9IHRoaXMubm90YS50cmltZXN0cmUucmVwbGFjZSgvXFxbXFxbfFxcXVxcXS9nLCAnJykudHJpbSgpOyAgICAgICAgIFxuICAgIGNvbnN0IGZvbGRlclRyaW1lc3RyZSA9IGAke2ZvbGRlckJhc2V9LyR7dHJpbWVzdHJlTGltcGlvfWA7XG5cbiAgICAvLyBBc2VndXJhciBxdWUgbGFzIGNhcnBldGFzIGV4aXN0YW5cbiAgICBhd2FpdCBGaWVsZEhhbmRsZXJVdGlscy5jcmVhckNhcnBldGEoZm9sZGVyQmFzZSk7XG4gICAgYXdhaXQgRmllbGRIYW5kbGVyVXRpbHMuY3JlYXJDYXJwZXRhKGZvbGRlclRyaW1lc3RyZSk7XG5cbiAgICAvLyBSdXRhIGNvbXBsZXRhIGRlbCBhcmNoaXZvXG4gICAgY29uc3QgbmV3TmFtZSA9IGAke2ZvbGRlclRyaW1lc3RyZX0vJHt0aGlzLm5vdGEudGl0dWxvfS5tZGA7XG5cbiAgICBjb25zdCBmaWxlID0gdGhpcy50cC5maWxlLmNvbmZpZy50YXJnZXRfZmlsZTtcbiAgICBjb25zdCBleGlzdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5ld05hbWUpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGV4aXN0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBub21icmVGaWxlID0gbmV3TmFtZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBjb25zdCBib3JyYXIgPSBhd2FpdCB0aGlzLnN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTb2JyZWVzY3JpYmlyIGFyY2hpdm8gYWN0dWFsXCIsIFwiRGV0ZW5lciBjcmVhY2lcdTAwRjNuIGRlbCBhcmNoaXZvXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGJHtub21icmVGaWxlLnBvcCgpfSB5YSBleGlzdGUuIFx1MDBCRlF1XHUwMEU5IGRlc2VhcyBoYWNlcj9gXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoYm9ycmFyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShleGlzdGUpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShmaWxlLCBuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFicmlyIGVsIGFyY2hpdm8gZW4gdW5hIG51ZXZhIHBlc3RhXHUwMEYxYVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChuZXdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IGFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUobmV3RmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNhbmNlbGFuZG8gbGEgY3JlYWNpXHUwMEYzbiBkZWwgYXJjaGl2by5cIik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUHJvY2VzbyBjYW5jZWxhZG8gcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUoZmlsZSwgbmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIHJlbm9tYnJhZG8gY29uIFx1MDBFOXhpdG8uXCIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWJyaXIgZWwgYXJjaGl2byBlbiB1bmEgbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKG5ld0ZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3TmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjYW1iaWFyIGVsIG5vbWJyZVwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cblxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2RhbGVzL3NlbGVjY2lvbk11bHRpcGxlTW9kYWwudHNcbmltcG9ydCB7IEFwcCwgTW9kYWwsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIE9wY2lvbkNhbmFsIHtcbiAgICBub21icmU6IHN0cmluZztcbiAgICBzZWxlY2Npb25hZG86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBTZWxlY2Npb25NdWx0aXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgb3BjaW9uZXM6IE9wY2lvbkNhbmFsW107XG4gICAgcHJpdmF0ZSByZXNvbHZlcjogKHZhbHVlOiBzdHJpbmdbXSB8IG51bGwpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBjaGVja2JveGVzOiBIVE1MSW5wdXRFbGVtZW50W10gPSBbXTtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb3BjaW9uZXM6IE9wY2lvbkNhbmFsW10sIHRpdHVsbzogc3RyaW5nKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub3BjaW9uZXMgPSBvcGNpb25lcztcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQodGl0dWxvKTtcbiAgICB9XG4gICAgXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciB1biBjb250ZW5lZG9yIHBhcmEgbG9zIGNoZWNrYm94ZXNcbiAgICAgICAgY29uc3QgY29udGVuZWRvciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge2NsczogJ3NlbGVjY2lvbi1tdWx0aXBsZS1jb250YWluZXInfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciB1biBjaGVja2JveCBwYXJhIGNhZGEgb3BjaVx1MDBGM25cbiAgICAgICAgdGhpcy5vcGNpb25lcy5mb3JFYWNoKG9wY2lvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gY29udGVuZWRvci5jcmVhdGVFbCgnZGl2Jywge2NsczogJ2NoZWNrYm94LXdyYXBwZXInfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gd3JhcHBlci5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JyxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IGlkOiBgb3BjaW9uLSR7b3BjaW9uLm5vbWJyZX1gIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IG9wY2lvbi5zZWxlY2Npb25hZG87XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94ZXMucHVzaChjaGVja2JveCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHdyYXBwZXIuY3JlYXRlRWwoJ2xhYmVsJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IG9wY2lvbi5ub21icmUsXG4gICAgICAgICAgICAgICAgYXR0cjogeyBmb3I6IGBvcGNpb24tJHtvcGNpb24ubm9tYnJlfWAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQm90b25lcyBkZSBhY2NpXHUwMEYzblxuICAgICAgICBjb25zdCBib3RvbmVzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7Y2xzOiAnbW9kYWwtYnV0dG9uLWNvbnRhaW5lcid9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNlbGVjY2lvbmFyVG9kb3NCdG4gPSBib3RvbmVzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7dGV4dDogJ1NlbGVjY2lvbmFyIHRvZG9zJ30pO1xuICAgICAgICBzZWxlY2Npb25hclRvZG9zQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRlc2VsZWNjaW9uYXJUb2Rvc0J0biA9IGJvdG9uZXNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHt0ZXh0OiAnRGVzZWxlY2Npb25hciB0b2Rvcyd9KTtcbiAgICAgICAgZGVzZWxlY2Npb25hclRvZG9zQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jaGVja2JveGVzLmZvckVhY2goY2IgPT4gY2IuY2hlY2tlZCA9IGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb25maXJtYXJCdG4gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdDb25maXJtYXInLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbmZpcm1hckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybWFyU2VsZWNjaW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZXN0aWxvc1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3N0eWxlJywge1xuICAgICAgICAgICAgdGV4dDogYFxuICAgICAgICAgICAgICAgIC5zZWxlY2Npb24tbXVsdGlwbGUtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcbiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMzAwcHg7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5jaGVja2JveC13cmFwcGVyIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuY2hlY2tib3gtd3JhcHBlciBsYWJlbCB7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidXR0b24ubW9kLWN0YSB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMXJlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBgXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25maXJtYXJTZWxlY2Npb24oKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjY2lvbmFkb3M6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNoZWNrYm94ZXMuZm9yRWFjaCgoY2hlY2tib3gsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHNlbGVjY2lvbmFkb3MucHVzaCh0aGlzLm9wY2lvbmVzW2luZGV4XS5ub21icmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZWxlY2Npb25hZG9zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkRlYmVzIHNlbGVjY2lvbmFyIGFsIG1lbm9zIHVuIGNhbmFsXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMucmVzb2x2ZXIoc2VsZWNjaW9uYWRvcyk7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuICAgIFxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPHN0cmluZ1tdIHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBTcGlubmVyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBpbml0aWFsVmFsdWU6IG51bWJlcjtcbiAgICBwcml2YXRlIGN1cnJlbnRWYWx1ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgcmVzb2x2ZXI6ICgodmFsdWU6IG51bWJlciB8IG51bGwpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBudW1iZXJEaXNwbGF5OiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGluaXRpYWxWYWx1ZTogbnVtYmVyID0gMSwgbWF4OiBudW1iZXIgPSAxMDApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgY29uc3QgbWluID0gMTtcbiAgICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgaW5pdGlhbFZhbHVlKSk7XG4gICAgICAgIHRoaXMuY3VycmVudFZhbHVlID0gdGhpcy5pbml0aWFsVmFsdWU7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdudW1iZXItc2VsZWN0b3ItbW9kYWwnKTtcblxuICAgICAgICAvLyBDb250ZW5lZG9yIHByaW5jaXBhbFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnbnVtYmVyLXNlbGVjdG9yLWNvbnRhaW5lcicgfSk7XG5cbiAgICAgICAgLy8gVFx1MDBFRHR1bG9cbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1x1MDBCRkN1XHUwMEUxbnRvcyBIaXRzIHJlcHJlc2VudGEgZXN0ZSBlbnRyZWdhYmxlPycgfSk7XG5cbiAgICAgICAgLy8gQ29udGVuZWRvciBkZSBjb250cm9sZXNcbiAgICAgICAgY29uc3QgY29udHJvbHNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnY29udHJvbHMtY29udGFpbmVyJyB9KTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGRlY3JlbWVudG9cbiAgICAgICAgY29uc3QgZGVjcmVtZW50QnRuID0gY29udHJvbHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHUyNUIyJywgXG4gICAgICAgICAgICBjbHM6ICdpbmNyZW1lbnQtYnRuJyBcbiAgICAgICAgfSk7XG4gICAgICAgIGRlY3JlbWVudEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2hhbmdlVmFsdWUoMSkpO1xuXG4gICAgICAgIC8vIERpc3BsYXkgZGUgblx1MDBGQW1lcm9cbiAgICAgICAgdGhpcy5udW1iZXJEaXNwbGF5ID0gY29udHJvbHNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLmN1cnJlbnRWYWx1ZS50b1N0cmluZygpLCBcbiAgICAgICAgICAgIGNsczogJ251bWJlci1kaXNwbGF5JyBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBkZSBpbmNyZW1lbnRvXG4gICAgICAgIGNvbnN0IGluY3JlbWVudEJ0biA9IGNvbnRyb2xzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1MjVCQycsIFxuICAgICAgICAgICAgY2xzOiAnZGVjcmVtZW50LWJ0bicgXG4gICAgICAgIH0pO1xuICAgICAgICBpbmNyZW1lbnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNoYW5nZVZhbHVlKC0xKSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBkZSBjb25maXJtYWNpXHUwMEYzblxuICAgICAgICBjb25zdCBjb25maXJtQnRuID0gY29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ0NvbmZpcm1hcicsIFxuICAgICAgICAgICAgY2xzOiAnY29uZmlybS1idG4nIFxuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY29uZmlybSgpKTtcblxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGNhbmNlbGFyXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdDYW5jZWxhcicsIFxuICAgICAgICAgICAgY2xzOiAnY2FuY2VsLWJ0bicgXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNhbmNlbCgpKTtcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlc3RpbG9zIENTU1xuICAgICAgICBjb25zdCBzdHlsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICAgICAgc3R5bGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAubnVtYmVyLXNlbGVjdG9yLW1vZGFsIHtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5udW1iZXItc2VsZWN0b3ItY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDE1cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuY29udHJvbHMtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAxNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm51bWJlci1kaXNwbGF5IHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDUwcHg7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmluY3JlbWVudC1idG4sIC5kZWNyZW1lbnQtYnRuIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmNvbmZpcm0tYnRuLCAuY2FuY2VsLWJ0biB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAwIDEwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4O1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdmVyICYmIHRoaXMuY3VycmVudFZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyKG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjaGFuZ2VWYWx1ZShkaXJlY3Rpb246IG51bWJlcikge1xuICAgICAgICBpZiAoIXRoaXMubnVtYmVyRGlzcGxheSkgcmV0dXJuO1xuICAgIFxuICAgICAgICBsZXQgbmV3VmFsdWUgPSB0aGlzLmN1cnJlbnRWYWx1ZTtcbiAgICBcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHsgLy8gSW5jcmVtZW50YXJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA8IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBEZSAwLjMzIGEgMC41IHkgZGUgMC41IGEgMVxuICAgICAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gMC4zMykge1xuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IDAuNTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09PSAwLjUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2kgeWEgZXMgMSBvIG1heW9yLCBpbmNyZW1lbnRhIGRlIDEgZW4gMVxuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHsgLy8gRGVjcmVtZW50YXJcbiAgICAgICAgICAgIGlmIChuZXdWYWx1ZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBlcyBtYXlvciBhIDEsIGRlY3JlbWVudGEgZGUgMSBlbiAxXG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBuZXdWYWx1ZSAtIDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gRGUgMSBwYXNhIGEgMC41XG4gICAgICAgICAgICAgICAgbmV3VmFsdWUgPSAwLjU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5ld1ZhbHVlID09PSAwLjUpIHtcbiAgICAgICAgICAgICAgICAvLyBEZSAwLjUgcGFzYSBhIDAuMzNcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IDAuMzM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE5vIHNlIHBlcm1pdGUgYmFqYXIgZGUgMC4zM1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gMC4zMztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZSA9IG5ld1ZhbHVlO1xuICAgICAgICB0aGlzLm51bWJlckRpc3BsYXkudGV4dENvbnRlbnQgPSBuZXdWYWx1ZS50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY29uZmlybSgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIodGhpcy5jdXJyZW50VmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNhbmNlbCgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cblxuICAgIG9wZW5BbmRBd2FpdFNlbGVjdGlvbigpOiBQcm9taXNlPG51bWJlciB8IG51bGw+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL21vZGFsZXMvZGF0ZVBpY2tlck1vZGFsLnRzXG5pbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgRGF0ZVRpbWUgfSBmcm9tICdsdXhvbic7XG5cbmV4cG9ydCBjbGFzcyBEYXRlUGlja2VyTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSByZXNvbHZlcjogKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgZGF0ZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgZm9ybWF0OiBzdHJpbmc7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5pdGlhbERhdGU/OiBzdHJpbmcsIGZvcm1hdDogc3RyaW5nID0gJ3l5eXktTU0tZGQnKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnUXVlIGRcdTAwRURhIHNlIHZhIGEgcHVibGljYXIgbGEgcGllemE/JyB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuZGF0ZUlucHV0ID0gY29udGVudEVsLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ2RhdGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgaGF5IHVuYSBmZWNoYSBpbmljaWFsLCBlc3RhYmxlY2VybGFcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbERhdGUpIHtcbiAgICAgICAgICAgIC8vIENvbnZlcnRpciBkZXNkZSBlbCBmb3JtYXRvIGVzcGVjaWZpY2FkbyBhIGZvcm1hdG8gSVNPIHBhcmEgaW5wdXQgZGF0ZVxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IERhdGVUaW1lLmZyb21Gb3JtYXQodGhpcy5pbml0aWFsRGF0ZSwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgdGhpcy5kYXRlSW5wdXQudmFsdWUgPSBkYXRlLnRvSVNPRGF0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVXNhciBsYSBmZWNoYSBhY3R1YWxcbiAgICAgICAgICAgIHRoaXMuZGF0ZUlucHV0LnZhbHVlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdidXR0b24tY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsYXInIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyKG51bGwpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NvbmZpcm1hcicgfSk7XG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZERhdGUgPSB0aGlzLmRhdGVJbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIC8vIENvbnZlcnRpciBkZSBmb3JtYXRvIElTTyBhIGZvcm1hdG8gcHJlZmVyaWRvXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gRGF0ZVRpbWUuZnJvbUlTTyhzZWxlY3RlZERhdGUpLnRvRm9ybWF0KHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIoZm9ybWF0dGVkRGF0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRXN0aWxvcyBiXHUwMEUxc2ljb3NcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTBweCc7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cblxuICAgIHdhaXRGb3JJbnB1dCgpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgUGVkaWRvc0NsaWVudGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHJlc29sdmVyOiAodmFsdWU6IHsgcGVkaWRvczogc3RyaW5nLCBwZW5kaWVudGVzOiBib29sZWFuIH0gfCBudWxsKSA9PiB2b2lkO1xuICAgIHByaXZhdGUgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cbiAgICBcbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdwZWRpZG9zLWNsaWVudGUtbW9kYWwnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRcdTAwRUR0dWxvXG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KFwiUGVkaWRvcyBhbCBjbGllbnRlXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBwcmluY2lwYWxcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3BlZGlkb3MtY2xpZW50ZS1jb250YWluZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVFx1MDBFRHR1bG8gZGVzY3JpcHRpdm9cbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1MDBCRkhheSBhbGdvIHF1ZSBzZSBkZWJhIHBlZGlyIGFsIGNsaWVudGU/JyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1MDBDMXJlYSBkZSB0ZXh0byBwYXJhIGxvcyBwZWRpZG9zXG4gICAgICAgIHRoaXMudGV4dGFyZWEgPSBjb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHJvd3M6ICc2JyxcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0VzY3JpYmUgYXF1XHUwMEVEIHR1cyBwZWRpZG9zIGFsIGNsaWVudGUuLi4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29udGVuZWRvciBkZWwgY2hlY2tib3ggcGVyc29uYWxpemFkb1xuICAgICAgICBjb25zdCBjaGVja2JveENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjdXN0b20tY2hlY2tib3gtY29udGFpbmVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrYm94IG9jdWx0byAocGFyYSBmdW5jaW9uYWxpZGFkKVxuICAgICAgICB0aGlzLmNoZWNrYm94ID0gY2hlY2tib3hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsXG4gICAgICAgICAgICAgICAgaWQ6ICdwZW5kaWVudGVzLWNoZWNrYm94JyxcbiAgICAgICAgICAgICAgICBjbGFzczogJ2hpZGRlbi1jaGVja2JveCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVja2JveCB2aXN1YWwgcGVyc29uYWxpemFkb1xuICAgICAgICBjb25zdCBjdXN0b21DaGVja2JveCA9IGNoZWNrYm94Q29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgY2xzOiAnY3VzdG9tLWNoZWNrYm94J1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIExhYmVsIHBhcmEgZWwgY2hlY2tib3hcbiAgICAgICAgY29uc3QgY2hlY2tib3hMYWJlbCA9IGNoZWNrYm94Q29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdNYXJjYXIgY29tbyBwZW5kaWVudGUgZGVsIGNsaWVudGUnLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGZvcjogJ3BlbmRpZW50ZXMtY2hlY2tib3gnLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAnY2hlY2tib3gtbGFiZWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQXV0by1hY3RpdmFyIGVsIGNoZWNrYm94IGN1YW5kbyBzZSBlc2NyaWJlIGVuIGVsIHRleHRhcmVhXG4gICAgICAgIHRoaXMudGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXh0YXJlYS52YWx1ZS50cmltKCkgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGVja2JveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjdXN0b21DaGVja2JveC5jbGFzc0xpc3QuYWRkKCdjaGVja2VkJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGN1c3RvbUNoZWNrYm94LmNsYXNzTGlzdC5yZW1vdmUoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYWNlciBxdWUgZWwgY2hlY2tib3ggcGVyc29uYWxpemFkbyByZXNwb25kYSBhIGxvcyBjbGljc1xuICAgICAgICBjdXN0b21DaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tib3guY2hlY2tlZCA9ICF0aGlzLmNoZWNrYm94LmNoZWNrZWQ7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2JveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tQ2hlY2tib3guY2xhc3NMaXN0LmFkZCgnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b21DaGVja2JveC5jbGFzc0xpc3QucmVtb3ZlKCdjaGVja2VkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVGFtYmlcdTAwRTluIGhhY2VyIHF1ZSBlbCBsYWJlbCBhY3RpdmUvZGVzYWN0aXZlIGVsIGNoZWNrYm94XG4gICAgICAgIGNoZWNrYm94TGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrYm94LmNoZWNrZWQgPSAhdGhpcy5jaGVja2JveC5jaGVja2VkO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGN1c3RvbUNoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3VzdG9tQ2hlY2tib3guY2xhc3NMaXN0LnJlbW92ZSgnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbnRlbmVkb3IgZGUgYm90b25lc1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnYnV0dG9uLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGNhbmNlbGFyXG4gICAgICAgIGNvbnN0IGNhbmNlbGFyQnRuID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnQ2FuY2VsYXInLFxuICAgICAgICAgICAgY2xzOiAnbW9kLXNlY29uZGFyeSdcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbGFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jYW5jZWwoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIGRlIGNvbmZpcm1hY2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IGNvbmZpcm1hckJ0biA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ0NvbmZpcm1hcicsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29uZmlybWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jb25maXJtKCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBsaWNhbW9zIGVzdGlsb3MgZW4gbFx1MDBFRG5lYSBwYXJhIGdhcmFudGl6YXIgcXVlIGZ1bmNpb25lblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3N0eWxlJywge1xuICAgICAgICAgICAgdGV4dDogYFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLnBlZGlkb3MtY2xpZW50ZS1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIGgzIHtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCA4cHggMDtcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCB0ZXh0YXJlYSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAxMjBweDtcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplOiB2ZXJ0aWNhbDtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvKiBFc3RpbG8gcGFyYSBlbCBjb250ZW5lZG9yIGRlbCBjaGVja2JveCBwZXJzb25hbGl6YWRvICovXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuY3VzdG9tLWNoZWNrYm94LWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDRweCAwO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyogT2N1bHRhciBlbCBjaGVja2JveCByZWFsICovXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuaGlkZGVuLWNoZWNrYm94IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8qIENyZWFyIHVuIGNoZWNrYm94IHBlcnNvbmFsaXphZG8gKi9cbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5jdXN0b20tY2hlY2tib3gge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMThweDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxOHB4O1xuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjODg4O1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LCAjZmZmKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLyogRXN0aWxvIHBhcmEgY3VhbmRvIGVzdFx1MDBFMSBtYXJjYWRvIC0gY3JlYXIgdW5hIFggKi9cbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5jdXN0b20tY2hlY2tib3guY2hlY2tlZDo6YmVmb3JlLFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmN1c3RvbS1jaGVja2JveC5jaGVja2VkOjphZnRlciB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzcHg7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwsICMzMzMpO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IDJweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLnBlZGlkb3MtY2xpZW50ZS1tb2RhbCAuY3VzdG9tLWNoZWNrYm94LmNoZWNrZWQ6OmJlZm9yZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDlweDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoNDVkZWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5jdXN0b20tY2hlY2tib3guY2hlY2tlZDo6YWZ0ZXIge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiA5cHg7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8qIEVzdGlsbyBwYXJhIGxhIGV0aXF1ZXRhIGRlbCBjaGVja2JveCAqL1xuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmNoZWNrYm94LWxhYmVsIHtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAucGVkaWRvcy1jbGllbnRlLW1vZGFsIC5idXR0b24tY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgZ2FwOiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC5wZWRpZG9zLWNsaWVudGUtbW9kYWwgLmJ1dHRvbi1jb250YWluZXIgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNnB4IDEycHg7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgY29uZmlybSgpIHtcbiAgICAgICAgLy8gT2J0ZW5lbW9zIGxvcyB2YWxvcmVzIGFjdHVhbGVzXG4gICAgICAgIGNvbnN0IHBlZGlkb3MgPSB0aGlzLnRleHRhcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgY29uc3QgcGVuZGllbnRlcyA9IHRoaXMuY2hlY2tib3guY2hlY2tlZDtcbiAgICAgICAgXG4gICAgICAgIC8vIEd1YXJkYW1vcyB5IFwibGltcGlhbW9zXCIgZWwgcmVzb2x2ZXIgcGFyYSBxdWUgb25DbG9zZSBubyBsbyBpbnZvcXVlXG4gICAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5yZXNvbHZlcjtcbiAgICAgICAgdGhpcy5yZXNvbHZlciA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBDZXJyYW1vcyBlbCBtb2RhbCB5IHJlc29sdmVtb3MgbGEgcHJvbWVzYSBjb24gbG9zIGRhdG9zXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgcmVzb2x2ZXIoe1xuICAgICAgICAgICAgcGVkaWRvczogcGVkaWRvcyxcbiAgICAgICAgICAgIHBlbmRpZW50ZXM6IHBlbmRpZW50ZXNcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHByaXZhdGUgY2FuY2VsKCkge1xuICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXMucmVzb2x2ZXI7XG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHJlc29sdmVyKG51bGwpO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaSBlbCByZXNvbHZlciBzaWd1ZSBhY3Rpdm8gKHBvciBlamVtcGxvLCBzaSBzZSBjaWVycmEgZWwgbW9kYWwgZGUgZm9ybWEgaW5lc3BlcmFkYSksIGxvIHJlc29sdmVtb3MgY29uIG51bGxcbiAgICAgICAgaWYgKHRoaXMucmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIobnVsbCk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBvcGVuQW5kQXdhaXRTZWxlY3Rpb24oKTogUHJvbWlzZTx7IHBlZGlkb3M6IHN0cmluZywgcGVuZGllbnRlczogYm9vbGVhbiB9IHwgbnVsbD4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2FkZE9uc0FQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTE5IDA5OjMyOjAzXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0ODozNVxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmV4cG9ydCBjbGFzcyBhZGRPbnNBUEkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbikge1xuICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICBcbiAgICBjcmVhclByZXZOZXh0KHBhZ2luYXMsIHBhZ0luZGljZSwgZHYpIHtcbiAgICAgICAgbGV0IHBhZ2luYSA9IGR2LmN1cnJlbnQoKTtcbiAgICAgICAgbGV0IGluZGljZTtcbiAgICAgICAgZm9yIChsZXQgYSA9IDA7IGEgPCBwYWdpbmFzLmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICBpZiAocGFnaW5hc1thXS5maWxlLm5hbWUgPT0gcGFnaW5hLmZpbGUubmFtZSkge1xuICAgICAgICAgICAgICAgIGluZGljZSA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgbGV0IGxpbmtzID0gW107XG4gICAgICAgIGlmIChpbmRpY2UgPT0gMCAmJiBwYWdpbmFzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICBsaW5rc1swXSA9IFwiXCI7XG4gICAgICAgICAgICBsaW5rc1sxXSA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5kaWNlID09IDApIHtcbiAgICAgICAgICAgIGxpbmtzWzBdID0gXCJcIjtcbiAgICAgICAgICAgIGxpbmtzWzFdID0gXCJcdTI3QTFcdUZFMEYgXCIgKyBkdi5mdW5jLmxpbmsocGFnaW5hc1tpbmRpY2UgKyAxXS5maWxlLnBhdGgsIHRoaXMuZGV0ZXJtaW5hclRleHRvRW5sYWNlKHBhZ2luYXNbaW5kaWNlICsgMV0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRpY2UgPT0gKHBhZ2luYXMubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgIGxpbmtzWzBdID0gZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlIC0gMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSAtIDFdKSkgKyBcIiBcdTJCMDVcdUZFMEZcIjtcbiAgICAgICAgICAgIGxpbmtzWzFdID0gXCJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpbmtzWzBdID0gZHYuZnVuYy5saW5rKHBhZ2luYXNbaW5kaWNlIC0gMV0uZmlsZS5wYXRoLCB0aGlzLmRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmFzW2luZGljZSAtIDFdKSkgKyBcIiBcdTJCMDVcdUZFMEZcIjtcbiAgICAgICAgICAgIGxpbmtzWzFdID0gXCJcdTI3QTFcdUZFMEYgXCIgKyBkdi5mdW5jLmxpbmsocGFnaW5hc1tpbmRpY2UgKyAxXS5maWxlLnBhdGgsIHRoaXMuZGV0ZXJtaW5hclRleHRvRW5sYWNlKHBhZ2luYXNbaW5kaWNlICsgMV0pKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBkdi5wYXJhZ3JhcGgobGlua3NbMF0gKyBcIiA9PVwiICsgZHYuZnVuYy5saW5rKHBhZ0luZGljZS5maWxlLnBhdGgsIHBhZ0luZGljZS50aXR1bG8gfHwgcGFnSW5kaWNlLmZpbGUubmFtZSkgKyBcIj09IFwiICsgbGlua3NbMV0pO1xuICAgIH1cblxuICAgIGRldGVybWluYXJUZXh0b0VubGFjZShwYWdpbmEpIHtcbiAgICAgICAgaWYgKHBhZ2luYS50aXR1bG8pIHtcbiAgICAgICAgICAgIHJldHVybiBwYWdpbmEudGl0dWxvO1xuICAgICAgICB9IGVsc2UgaWYgKHBhZ2luYS5hbGlhc2VzICYmIHBhZ2luYS5hbGlhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBwYWdpbmEuYWxpYXNlc1swXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwYWdpbmEuZmlsZS5uYW1lO1xuICAgICAgICB9XG4gICAgfVxuICBcbi8vIEZ1bmNpXHUwMEYzbiBwYXJhIGdlbmVyYXIgZWwgdGV4dG8gZGUgcmVsYWNpb25lcyBkZSB1bmEgbm90YVxuLy8gQVx1MDBGMWFkaXIgZXN0YSBmdW5jaVx1MDBGM24gYSBsYSBjbGFzZSBhZGRPbnNBUEkgZW4gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2FkZE9uc0FQSS50c1xuLy8gRW4gc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL2FkZE9uc0FQSS50c1xuXG4vKipcbiAqIEdlbmVyYSB0ZXh0byBkZSByZWxhY2lvbmVzIGNvbiBlbmxhY2VzIGZ1bmNpb25hbGVzIHkgZm9ybWF0ZWFkbyBjb24gQ1NTXG4gKiBAcGFyYW0gcGFnaW5hIExhIHBcdTAwRTFnaW5hIGFjdHVhbCBvYnRlbmlkYSBhIHRyYXZcdTAwRTlzIGRlIGR2LmN1cnJlbnQoKVxuICogQHBhcmFtIGR2IEVsIG9iamV0byBkYXRhdmlldyBwYXJhIGFjY2VkZXIgYSBzdXMgZnVuY2lvbmVzXG4gKiBAcmV0dXJucyBPYmpldG8gSFRNTCBwYXJhIHNlciB1c2FkbyBjb24gZHYucGFyYWdyYXBoKClcbiAqL1xuZ2VuZXJhclRleHRvUmVsYWNpb25lcyhwYWdpbmEsIGR2KSB7XG4gICAgLy8gUHJpbWVybyBnZW5lcmFtb3MgZWwgdGV4dG8gY29uIGVubGFjZXMgZnVuY2lvbmFsZXNcbiAgICBsZXQgdGV4dG8gPSBgJHtwYWdpbmEudHlwZU5hbWUgfHwgXCJFbnRyZWdhYmxlXCJ9IHJlbGFjaW9uYWRvIGEgYDtcbiAgICBjb25zdCByZWxhY2lvbmVzID0gW107XG4gICAgXG4gICAgLy8gQXN1bnRvXG4gICAgaWYgKHBhZ2luYS5hc3VudG8gJiYgQXJyYXkuaXNBcnJheShwYWdpbmEuYXN1bnRvKSkge1xuICAgICAgICBjb25zdCBhc3VudG9MaW5rcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5T2JqIG9mIHBhZ2luYS5hc3VudG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBlbnRyeU9iai5wYXRoIHx8IGVudHJ5T2JqO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJyAmJiBwYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhc3VudG9QYWdlID0gZHYucGFnZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzdW50b1BhZ2UgJiYgYXN1bnRvUGFnZS5maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlhcyA9IGFzdW50b1BhZ2UuZmlsZS5hbGlhc2VzPy5bMF0gfHwgYXN1bnRvUGFnZS50aXR1bG8gfHwgYXN1bnRvUGFnZS5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3VudG9MaW5rcy5wdXNoKGR2LmZpbGVMaW5rKGFzdW50b1BhZ2UuZmlsZS5wYXRoLCBmYWxzZSwgYWxpYXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzdW50b0xpbmtzLnB1c2goXCJhc3VudG8gbm8gZW5jb250cmFkb1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXN1bnRvTGlua3MucHVzaChcImFzdW50byBubyBlbmNvbnRyYWRvXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGFzdW50b0xpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbGFjaW9uZXMucHVzaChgYXN1bnRvOiAke2FzdW50b0xpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlbGFjaW9uZXMucHVzaChcImFzdW50bzogYXN1bnRvIG5vIGVuY29udHJhZG9cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcm95ZWN0b3MgR1REXG4gICAgaWYgKHBhZ2luYS5wcm95ZWN0b0dURCAmJiAoQXJyYXkuaXNBcnJheShwYWdpbmEucHJveWVjdG9HVEQpIHx8IHR5cGVvZiBwYWdpbmEucHJveWVjdG9HVEQgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICBjb25zdCBwcm95ZWN0b0xpbmtzID0gW107XG4gICAgICAgIGNvbnN0IHByb3llY3RvQXJyYXkgPSBBcnJheS5pc0FycmF5KHBhZ2luYS5wcm95ZWN0b0dURCkgXG4gICAgICAgICAgICA/IHBhZ2luYS5wcm95ZWN0b0dURCBcbiAgICAgICAgICAgIDogW3BhZ2luYS5wcm95ZWN0b0dURF07XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5T2JqIG9mIHByb3llY3RvQXJyYXkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBlbnRyeU9iai5wYXRoIHx8IGVudHJ5T2JqO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJyAmJiBwYXRoLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm95ZWN0b1BhZ2UgPSBkdi5wYWdlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJveWVjdG9QYWdlICYmIHByb3llY3RvUGFnZS5maWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGlhcyA9IHByb3llY3RvUGFnZS5maWxlLmFsaWFzZXM/LlswXSB8fCBwcm95ZWN0b1BhZ2UudGl0dWxvIHx8IHByb3llY3RvUGFnZS5maWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b0xpbmtzLnB1c2goZHYuZmlsZUxpbmsocHJveWVjdG9QYWdlLmZpbGUucGF0aCwgZmFsc2UsIGFsaWFzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNpIGxhIHBcdTAwRTFnaW5hIG5vIHNlIGVuY3VlbnRyYSwgcG9kZW1vcyBleHRyYWVyIGVsIHRcdTAwRUR0dWxvIGRlbCBwYXRoIG8gbGEgZW50cmFkYSBvcmlnaW5hbFxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVudHJ5T2JqID09PSAnc3RyaW5nJyAmJiBlbnRyeU9iai5pbmNsdWRlcygnfCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJ0ZXMgPSBlbnRyeU9iai5zcGxpdCgnfCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveWVjdG9MaW5rcy5wdXNoKHBhcnRlc1twYXJ0ZXMubGVuZ3RoIC0gMV0ucmVwbGFjZSgnXV0nLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZW50YW1vcyBlbmNvbnRyYXIgZWwgbm9tYnJlIGRlc2RlIGVsIHBhdGhcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IHBhdGguc3BsaXQoJy8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGF0aFBhcnRzW3BhdGhQYXJ0cy5sZW5ndGggLSAxXS5yZXBsYWNlKCcubWQnLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm95ZWN0b0xpbmtzLnB1c2goZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAocHJveWVjdG9MaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZWxhY2lvbmVzLnB1c2goYFBHVEQ6ICR7cHJveWVjdG9MaW5rcy5qb2luKFwiLCBcIil9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTAwQzFyZWFzIGRlIGludGVyXHUwMEU5c1xuICAgIGlmIChwYWdpbmEuYXJlYUludGVyZXMgJiYgKEFycmF5LmlzQXJyYXkocGFnaW5hLmFyZWFJbnRlcmVzKSB8fCB0eXBlb2YgcGFnaW5hLmFyZWFJbnRlcmVzID09PSAnc3RyaW5nJykpIHtcbiAgICAgICAgY29uc3QgYXJlYUxpbmtzID0gW107XG4gICAgICAgIGNvbnN0IGFyZWFBcnJheSA9IEFycmF5LmlzQXJyYXkocGFnaW5hLmFyZWFJbnRlcmVzKSBcbiAgICAgICAgICAgID8gcGFnaW5hLmFyZWFJbnRlcmVzIFxuICAgICAgICAgICAgOiBbcGFnaW5hLmFyZWFJbnRlcmVzXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZW50cnlPYmogb2YgYXJlYUFycmF5KSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoID0gZW50cnlPYmoucGF0aCB8fCBlbnRyeU9iajtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycgJiYgcGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXJlYVBhZ2UgPSBkdi5wYWdlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJlYVBhZ2UgJiYgYXJlYVBhZ2UuZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBhcmVhUGFnZS5maWxlLmFsaWFzZXM/LlswXSB8fCBhcmVhUGFnZS50aXR1bG8gfHwgYXJlYVBhZ2UuZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYUxpbmtzLnB1c2goZHYuZmlsZUxpbmsoYXJlYVBhZ2UuZmlsZS5wYXRoLCBmYWxzZSwgYWxpYXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2kgbGEgcFx1MDBFMWdpbmEgbm8gc2UgZW5jdWVudHJhLCBwb2RlbW9zIGV4dHJhZXIgZWwgdFx1MDBFRHR1bG8gZGVsIHBhdGggbyBsYSBlbnRyYWRhIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW50cnlPYmogPT09ICdzdHJpbmcnICYmIGVudHJ5T2JqLmluY2x1ZGVzKCd8JykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRlcyA9IGVudHJ5T2JqLnNwbGl0KCd8Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmVhTGlua3MucHVzaChwYXJ0ZXNbcGFydGVzLmxlbmd0aCAtIDFdLnJlcGxhY2UoJ11dJywgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVudGFtb3MgZW5jb250cmFyIGVsIG5vbWJyZSBkZXNkZSBlbCBwYXRoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBwYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGhQYXJ0c1twYXRoUGFydHMubGVuZ3RoIC0gMV0ucmVwbGFjZSgnLm1kJywgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJlYUxpbmtzLnB1c2goZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoYXJlYUxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbGFjaW9uZXMucHVzaChgQUk6ICR7YXJlYUxpbmtzLmpvaW4oXCIsIFwiKX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1MDBDMXJlYSBkZSB2aWRhXG4gICAgaWYgKHBhZ2luYS5hcmVhVmlkYSkge1xuICAgICAgICBsZXQgYXJlYVZpZGFUZXh0ID0gcGFnaW5hLmFyZWFWaWRhO1xuICAgICAgICBcbiAgICAgICAgLy8gU2kgZWwgXHUwMEUxcmVhIGRlIHZpZGEgZXMgdW5hIHJlZmVyZW5jaWEsIHByb2Nlc2FyIGRlIG1hbmVyYSBzaW1pbGFyXG4gICAgICAgIGlmICh0eXBlb2YgcGFnaW5hLmFyZWFWaWRhID09PSAnc3RyaW5nJyAmJiBwYWdpbmEuYXJlYVZpZGEuaW5jbHVkZXMoJ1tbJykpIHtcbiAgICAgICAgICAgIC8vIEVzIHVuYSByZWZlcmVuY2lhIHdpa2ksIG9idGVuZXIgZWwgbm9tYnJlIGFtaWdhYmxlXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHBhZ2luYS5hcmVhVmlkYS5tYXRjaCgvXFxbXFxbKC4qPylcXHwoLio/KVxcXVxcXS8pO1xuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgYXJlYVZpZGFUZXh0ID0gbWF0Y2hbMl07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFyZWFWaWRhVGV4dCA9IHBhZ2luYS5hcmVhVmlkYS5yZXBsYWNlKC9cXFtcXFt8XFxdXFxdL2csICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmVsYWNpb25lcy5wdXNoKGBBVjogJHthcmVhVmlkYVRleHR9YCk7XG4gICAgfVxuXG4gICAgLy8gVW5pciB0b2RhcyBsYXMgcmVsYWNpb25lc1xuICAgIHRleHRvICs9IHJlbGFjaW9uZXMuam9pbihcIiwgXCIpO1xuICAgIFxuICAgIC8vIEFcdTAwRjFhZGlyIGVsIGVzdGFkbyBhbCBmaW5hbFxuICAgIGlmIChwYWdpbmEuZXN0YWRvKSB7XG4gICAgICAgIHRleHRvICs9IGAgZW4gZXN0YWRvICR7cGFnaW5hLmVzdGFkb31gO1xuICAgIH1cbiAgICBcbiAgICAvLyBFbnZvbHZlciBlbCBjb250ZW5pZG8gZW4gdW4gc3BhbiBjb24gY2xhc2UgcGFyYSBlc3RpbG9zIENTU1xuICAgIC8vIENyZWFtb3MgdW4gZWxlbWVudG8gSFRNTCB1dGlsaXphbmRvIGxhcyBmdW5jaW9uZXMgZGUgRGF0YXZpZXdcbiAgICByZXR1cm4gZHYuZWwoXCJzcGFuXCIsIHRleHRvLCB7IGNsczogXCJub3RhLXJlbGFjaW9uZXNcIiB9KTtcbn1cblxuXG4vKipcbiAqIEdlbmVyYSB1biBcdTAwRTFyYm9sIGRlIHJlZmVyZW5jaWFzIGEgbGEgbm90YSBhY3R1YWwgZGUgZm9ybWEgcmVjdXJzaXZhXG4gKiBAcGFyYW0gcGFnaW5hQWN0dWFsIExhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICogQHBhcmFtIGR2IE9iamV0byBkYXRhdmlldyBwYXJhIGFjY2VkZXIgYSBzdXMgZnVuY2lvbmVzXG4gKiBAcGFyYW0gcHJvZnVuZGlkYWRNYXhpbWEgUHJvZnVuZGlkYWQgbVx1MDBFMXhpbWEgZGUgcmVjdXJzaVx1MDBGM24gKGRlZmVjdG86IDMpXG4gKiBAcGFyYW0gdmlzaXRhZGFzIFNldCBkZSBJRHMgZGUgcFx1MDBFMWdpbmFzIHlhIHZpc2l0YWRhcyBwYXJhIGV2aXRhciBjaWNsb3NcbiAqIEBwYXJhbSBwcm9mdW5kaWRhZEFjdHVhbCBQcm9mdW5kaWRhZCBhY3R1YWwgZGUgcmVjdXJzaVx1MDBGM25cbiAqIEByZXR1cm5zIEVsZW1lbnRvIEhUTUwgY29uIGxhIGVzdHJ1Y3R1cmEgZGUgXHUwMEUxcmJvbFxuICovXG5nZW5lcmFyQXJib2xSZWZlcmVuY2lhcyhwYWdpbmFBY3R1YWwsIGR2LCBwcm9mdW5kaWRhZE1heGltYSA9IDMsIHZpc2l0YWRhcyA9IG5ldyBTZXQoKSwgcHJvZnVuZGlkYWRBY3R1YWwgPSAwKSB7XG4gICAgLy8gVmFsaWRhciBxdWUgcGFnaW5hQWN0dWFsIHRlbmdhIGxhcyBwcm9waWVkYWRlcyBuZWNlc2FyaWFzXG4gICAgaWYgKCFwYWdpbmFBY3R1YWwgfHwgIXBhZ2luYUFjdHVhbC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjogcGFnaW5hQWN0dWFsIG5vIHRpZW5lIGxhcyBwcm9waWVkYWRlcyBuZWNlc2FyaWFzXCIsIHBhZ2luYUFjdHVhbCk7XG4gICAgICAgIHJldHVybiBkdi5lbChcImRpdlwiLCBcIkVycm9yOiBObyBzZSBwdWVkZSBnZW5lcmFyIGVsIFx1MDBFMXJib2wgZGUgcmVmZXJlbmNpYXMuXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlLWVycm9yXCIgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsXG4gICAgY29uc3QgY29udGVuZWRvciA9IGR2LmVsKFwiZGl2XCIsIFwiXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlXCIgfSk7XG4gICAgXG4gICAgaWYgKHByb2Z1bmRpZGFkQWN0dWFsID09PSAwKSB7XG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIHRcdTAwRUR0dWxvIHBlcnNvbmFsaXphZG8gc29sbyBlbiBsYSByYVx1MDBFRHpcbiAgICAgICAgY29uc3QgdGlwb05vdGEgPSBwYWdpbmFBY3R1YWwudHlwZU5hbWUgfHwgXCJOb3RhXCI7XG4gICAgICAgIGNvbnN0IGFsaWFzID0gcGFnaW5hQWN0dWFsLmZpbGUuYWxpYXNlcyAmJiBwYWdpbmFBY3R1YWwuZmlsZS5hbGlhc2VzLmxlbmd0aCA+IDAgXG4gICAgICAgICAgICA/IHBhZ2luYUFjdHVhbC5maWxlLmFsaWFzZXNbMF0gXG4gICAgICAgICAgICA6IChwYWdpbmFBY3R1YWwudGl0dWxvIHx8IHBhZ2luYUFjdHVhbC5maWxlLm5hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IGR2LmVsKFwiaDNcIiwgYFJlZmVyZW5jaWFzIGEgJHt0aXBvTm90YX0gXCIke2FsaWFzfVwiYCwgeyBjbHM6IFwiYmFja2xpbmtzLXRyZWUtdGl0bGVcIiB9KTtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZCh0aXR1bG8pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTaSBoZW1vcyBsbGVnYWRvIGEgbGEgcHJvZnVuZGlkYWQgbVx1MDBFMXhpbWEsIG5vIHNlZ3VpbW9zIGV4cGxvcmFuZG9cbiAgICBpZiAocHJvZnVuZGlkYWRBY3R1YWwgPj0gcHJvZnVuZGlkYWRNYXhpbWEpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIE1hcmNhciBlc3RhIHBcdTAwRTFnaW5hIGNvbW8gdmlzaXRhZGEgcGFyYSBldml0YXIgY2ljbG9zXG4gICAgdmlzaXRhZGFzLmFkZChwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKTtcbiAgICBcbiAgICAvLyBPYnRlbmVyIHRvZGFzIGxhcyBwXHUwMEUxZ2luYXMgcXVlIGhhY2VuIHJlZmVyZW5jaWEgZGlyZWN0YSBhIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgIGxldCB0b2Rhc0xhc1BhZ2luYXM7XG4gICAgdHJ5IHtcbiAgICAgICAgdG9kYXNMYXNQYWdpbmFzID0gZHYucGFnZXMoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBvYnRlbmVyIHBcdTAwRTFnaW5hczpcIiwgZSk7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gZHYuZWwoXCJwXCIsIFwiRXJyb3IgYWwgb2J0ZW5lciBwXHUwMEUxZ2luYXMgZGUgRGF0YXZpZXdcIiwgeyBjbHM6IFwiYmFja2xpbmtzLXRyZWUtZXJyb3JcIiB9KTtcbiAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChlcnJvck1zZyk7XG4gICAgICAgIHJldHVybiBjb250ZW5lZG9yO1xuICAgIH1cbiAgICBcbiAgICAvLyBGaWx0cmFyIGxhcyBwXHUwMEUxZ2luYXMgcXVlIHJlZmVyZW5jaWFuIGEgbGEgYWN0dWFsIGEgdHJhdlx1MDBFOXMgZGUgJ2FzdW50bydcbiAgICBsZXQgcmVmZXJlbmNpYXNEaXJlY3RhcyA9IFtdO1xuICAgIHRyeSB7XG4gICAgICAgIHJlZmVyZW5jaWFzRGlyZWN0YXMgPSB0b2Rhc0xhc1BhZ2luYXMuZmlsdGVyKHAgPT4ge1xuICAgICAgICAgICAgaWYgKCFwLmFzdW50bykgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBOb3JtYWxpemFyIGFzdW50byBhIGFycmF5XG4gICAgICAgICAgICBjb25zdCBhc3VudG9zID0gQXJyYXkuaXNBcnJheShwLmFzdW50bykgPyBwLmFzdW50byA6IFtwLmFzdW50b107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXN1bnRvIG9mIGFzdW50b3MpIHtcbiAgICAgICAgICAgICAgICAvLyBTaSBhc3VudG8gZXMgdW4gb2JqZXRvIGNvbiBwYXRoIHkgY29pbmNpZGUgY29uIGxhIHBcdTAwRTFnaW5hIGFjdHVhbFxuICAgICAgICAgICAgICAgIGlmIChhc3VudG8gJiYgdHlwZW9mIGFzdW50byA9PT0gJ29iamVjdCcgJiYgYXN1bnRvLnBhdGggPT09IHBhZ2luYUFjdHVhbC5maWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNpIGFzdW50byBlcyB1bmEgY2FkZW5hIGNvbiBlbCBmb3JtYXRvIFtbcnV0YXxhbGlhc11dXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhc3VudG8gPT09ICdzdHJpbmcnICYmIGFzdW50by5pbmNsdWRlcyhwYWdpbmFBY3R1YWwuZmlsZS5wYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2kgYXN1bnRvIGVzIHVuYSBjYWRlbmEgeSBjb2luY2lkZSBjb24gZWwgYWxpYXMgbyBub21icmUgZGUgbGEgcFx1MDBFMWdpbmEgYWN0dWFsXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhc3VudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBjb2luY2lkZW5jaWEgY29uIGFsaWFzZXNcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxpYXNlcyA9IHBhZ2luYUFjdHVhbC5maWxlLmFsaWFzZXMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYWxpYXMgb2YgYWxpYXNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzdW50by5pbmNsdWRlcyhhbGlhcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGNvaW5jaWRlbmNpYSBjb24gZWwgbm9tYnJlIGRlbCBhcmNoaXZvXG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3VudG8uaW5jbHVkZXMocGFnaW5hQWN0dWFsLmZpbGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGZpbHRyYXIgcmVmZXJlbmNpYXM6XCIsIGUpO1xuICAgICAgICBjb25zdCBlcnJvck1zZyA9IGR2LmVsKFwicFwiLCBcIkVycm9yIGFsIHByb2Nlc2FyIHJlZmVyZW5jaWFzXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlLWVycm9yXCIgfSk7XG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoZXJyb3JNc2cpO1xuICAgICAgICByZXR1cm4gY29udGVuZWRvcjtcbiAgICB9XG4gICAgXG4gICAgLy8gU2kgbm8gaGF5IHJlZmVyZW5jaWFzLCBtb3N0cmFyIG1lbnNhamVcbiAgICBpZiAocmVmZXJlbmNpYXNEaXJlY3Rhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKHByb2Z1bmRpZGFkQWN0dWFsID09PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBtZW5zYWplID0gZHYuZWwoXCJwXCIsIFwiTm8gc2UgZW5jb250cmFyb24gcmVmZXJlbmNpYXMgYSBlc3RhIG5vdGFcIiwgeyBjbHM6IFwiYmFja2xpbmtzLXRyZWUtZW1wdHlcIiB9KTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbmVkb3I7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWFyIGxpc3RhIHBhcmEgbW9zdHJhciByZWZlcmVuY2lhc1xuICAgIGNvbnN0IGxpc3RhID0gZHYuZWwoXCJ1bFwiLCBcIlwiLCB7IGNsczogYGJhY2tsaW5rcy10cmVlLWxldmVsLSR7cHJvZnVuZGlkYWRBY3R1YWx9YCB9KTtcbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBjYWRhIHJlZmVyZW5jaWEgYSBsYSBsaXN0YVxuICAgIGZvciAoY29uc3QgcmVmZXJlbmNpYSBvZiByZWZlcmVuY2lhc0RpcmVjdGFzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFdml0YXIgY2ljbG9zXG4gICAgICAgICAgICBpZiAodmlzaXRhZGFzLmhhcyhyZWZlcmVuY2lhLmZpbGUucGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ3JlYXIgZWxlbWVudG8gZGUgbGlzdGFcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkdi5lbChcImxpXCIsIFwiXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlLWl0ZW1cIiB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgdGlwbyB5IGVubGFjZVxuICAgICAgICAgICAgY29uc3QgdGlwbyA9IHJlZmVyZW5jaWEudHlwZU5hbWUgfHwgXCJOb3RhXCI7XG4gICAgICAgICAgICBjb25zdCB0aXBvRWwgPSBkdi5lbChcInNwYW5cIiwgYFske3RpcG99XSBgLCB7IGNsczogXCJiYWNrbGlua3MtdHJlZS10eXBlXCIgfSk7XG4gICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKHRpcG9FbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGVybWluYXIgZWwgdGV4dG8gcGFyYSBtb3N0cmFyIGVuIGVsIGVubGFjZVxuICAgICAgICAgICAgbGV0IG5vbWJyZU1vc3RyYWRvID0gXCJcIjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbm9tYnJlTW9zdHJhZG8gPSByZWZlcmVuY2lhLmZpbGUuYWxpYXNlcyAmJiByZWZlcmVuY2lhLmZpbGUuYWxpYXNlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgICAgID8gcmVmZXJlbmNpYS5maWxlLmFsaWFzZXNbMF0gXG4gICAgICAgICAgICAgICAgICAgIDogKHJlZmVyZW5jaWEudGl0dWxvIHx8IHJlZmVyZW5jaWEuZmlsZS5uYW1lKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBub21icmVNb3N0cmFkbyA9IHJlZmVyZW5jaWEuZmlsZS5uYW1lIHx8IFwiU2luIG5vbWJyZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDcmVhciBlbmxhY2UgdXNhbmRvIGVsIG1cdTAwRTl0b2RvIGNvcnJlY3RvIHBhcmEgZW5sYWNlcyBjbGljYWJsZXNcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gUHJpbWVybyBpbnRlbnRhbW9zIGNvbiBmaWxlTGlua1xuICAgICAgICAgICAgICAgIGNvbnN0IGVubGFjZSA9IGR2LmVsKFwiYVwiLCBub21icmVNb3N0cmFkbywge1xuICAgICAgICAgICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiByZWZlcmVuY2lhLmZpbGUucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZGF0YS1ocmVmXCI6IHJlZmVyZW5jaWEuZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M6IFwiaW50ZXJuYWwtbGlua1wiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBc2VndXJhciBxdWUgZWwgZW5sYWNlIGVzIGNsaWNhYmxlXG4gICAgICAgICAgICAgICAgZW5sYWNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBocmVmID0gdGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtaHJlZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVudGEgYWJyaXIgY29uIGxhIEFQSSBkZSBPYnNpZGlhblxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoaHJlZiwgXCJcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChlbmxhY2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjcmVhciBlbmxhY2UgY29uIG1cdTAwRTl0b2RvIHByaW1hcmlvOlwiLCBlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQbGFuIEI6IHVzYXIgY3JlYXRlRWwgZGUgT2JzaWRpYW4gZGlyZWN0YW1lbnRlXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5sYWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgICAgICAgICAgIGVubGFjZS50ZXh0Q29udGVudCA9IG5vbWJyZU1vc3RyYWRvO1xuICAgICAgICAgICAgICAgICAgICBlbmxhY2UuaHJlZiA9IGBvYnNpZGlhbjovL29wZW4/dmF1bHQ9JHtlbmNvZGVVUklDb21wb25lbnQoYXBwLnZhdWx0LmdldE5hbWUoKSl9JmZpbGU9JHtlbmNvZGVVUklDb21wb25lbnQocmVmZXJlbmNpYS5maWxlLnBhdGgpfWA7XG4gICAgICAgICAgICAgICAgICAgIGVubGFjZS5jbGFzc0xpc3QuYWRkKFwiaW50ZXJuYWwtbGlua1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChlbmxhY2UpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjcmVhciBlbmxhY2UgY29uIG1cdTAwRTl0b2RvIGFsdGVybmF0aXZvOlwiLCBlMik7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGZpbmFsOiB0ZXh0byBwbGFub1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b1BsYW5vID0gZHYuZWwoXCJzcGFuXCIsIG5vbWJyZU1vc3RyYWRvKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5hcHBlbmRDaGlsZCh0ZXh0b1BsYW5vKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEJ1c2NhciByZWN1cnNpdmFtZW50ZSByZWZlcmVuY2lhcyBhIGVzdGEgcmVmZXJlbmNpYVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBQYXNvIGVsIHNldCBkZSB2aXNpdGFkYXMgY29tbyBjb3BpYSBwYXJhIG5vIGFmZWN0YXIgb3Ryb3Mgbml2ZWxlc1xuICAgICAgICAgICAgICAgIGNvbnN0IG51ZXZvVmlzaXRhZGFzID0gbmV3IFNldChbLi4udmlzaXRhZGFzXSk7XG4gICAgICAgICAgICAgICAgbnVldm9WaXNpdGFkYXMuYWRkKHJlZmVyZW5jaWEuZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJSZWZlcmVuY2lhcyA9IHRoaXMuZ2VuZXJhckFyYm9sUmVmZXJlbmNpYXMoXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jaWEsIGR2LCBwcm9mdW5kaWRhZE1heGltYSwgXG4gICAgICAgICAgICAgICAgICAgIG51ZXZvVmlzaXRhZGFzLCBwcm9mdW5kaWRhZEFjdHVhbCArIDFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBxdWUgZWwgcmVzdWx0YWRvIGVzIHVuIG5vZG8gRE9NIHZcdTAwRTFsaWRvXG4gICAgICAgICAgICAgICAgaWYgKHN1YlJlZmVyZW5jaWFzICYmIHN1YlJlZmVyZW5jaWFzLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSB0aWVuZSBjb250ZW5pZG8gXHUwMEZBdGlsXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbiAmJiBzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgaGF5IG1cdTAwRTFzIHF1ZSBzb2xvIGVsIHRcdTAwRUR0dWxvXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWVuZUNvbnRlbmlkb1V0aWwgPSBzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbi5sZW5ndGggPiAxIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdWJSZWZlcmVuY2lhcy5jaGlsZHJlbi5sZW5ndGggPT09IDEgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzdWJSZWZlcmVuY2lhcy5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoXCJiYWNrbGlua3MtdHJlZS10aXRsZVwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWVuZUNvbnRlbmlkb1V0aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKHN1YlJlZmVyZW5jaWFzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbGEgcmVjdXJzaVx1MDBGM24gcGFyYSBcIiArIHJlZmVyZW5jaWEuZmlsZS5wYXRoLCBlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGR2LmVsKFwic3BhblwiLCBcIiAoRXJyb3IgYWwgb2J0ZW5lciBzdWJyZWZlcmVuY2lhcylcIiwgeyBjbHM6IFwiYmFja2xpbmtzLXRyZWUtZXJyb3JcIiB9KTtcbiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZENoaWxkKGVycm9yTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgZWwgaXRlbSBhIGxhIGxpc3RhXG4gICAgICAgICAgICBsaXN0YS5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgcHJvY2VzYXIgcmVmZXJlbmNpYTpcIiwgZSk7XG4gICAgICAgICAgICAvLyBDb250aW51YXIgY29uIGxhIHNpZ3VpZW50ZSByZWZlcmVuY2lhXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBXHUwMEYxYWRpciBsYSBsaXN0YSBhbCBjb250ZW5lZG9yXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKGxpc3RhICYmIGxpc3RhLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBjb250ZW5lZG9yLmFwcGVuZENoaWxkKGxpc3RhKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFcdTAwRjFhZGlyIGxpc3RhIGFsIGNvbnRlbmVkb3I6XCIsIGUpO1xuICAgICAgICBjb25zdCBlcnJvck1zZyA9IGR2LmVsKFwicFwiLCBcIkVycm9yIGFsIGdlbmVyYXIgZXN0cnVjdHVyYSBkZSBcdTAwRTFyYm9sXCIsIHsgY2xzOiBcImJhY2tsaW5rcy10cmVlLWVycm9yXCIgfSk7XG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoZXJyb3JNc2cpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVuZWRvcjtcbn1cblxuXG4vKipcbiAqIE11ZXN0cmEgZW5sYWNlcyBzaW5jcm9uaXphZG9zIGVuIE5vdGlvbiBkZXNkZSBlbCBmcm9udG1hdHRlciBcbiAqIHF1ZSBjb21pZW56YW4gY29uIGVsIHByZWZpam8gXCJsaW5rLVwiXG4gKiBAcGFyYW0gZHYgRWwgb2JqZXRvIGRhdGF2aWV3IHBhcmEgYWNjZWRlciBhIHN1cyBmdW5jaW9uZXNcbiAqIEBwYXJhbSBwYWdpbmEgTGEgcFx1MDBFMWdpbmEgYWN0dWFsIChub3JtYWxtZW50ZSBkdi5jdXJyZW50KCkpXG4gKiBAcmV0dXJucyBFbCBjb250ZW5lZG9yIGNvbiBsb3MgcmVzdWx0YWRvc1xuICovXG5tb3N0cmFyRW5sYWNlc1NpbmNyb25pemFkb3MoZHYsIHBhZ2luYSkge1xuICAgIC8vIENyZWFyIGNvbnRlbmVkb3IgcGFyYSBsb3MgcmVzdWx0YWRvc1xuICAgIGNvbnN0IGNvbnRlbmVkb3IgPSBkdi5lbChcImRpdlwiLCBcIlwiLCB7IGNsczogXCJub3Rpb24tbGlua3MtY29udGFpbmVyXCIgfSk7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBmcm9udG1hdHRlclxuICAgICAgICBjb25zdCBtZXRhID0gcGFnaW5hLmZpbGUuZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmICghbWV0YSkge1xuICAgICAgICAgICAgY29uc3QgbWVuc2FqZSA9IGR2LmVsKFwicFwiLCBcIk5vIHNlIGVuY29udHJcdTAwRjMgZnJvbnRtYXR0ZXIgZW4gZXN0YSBub3RhLlwiLCB7IGNsczogXCJub3Rpb24tbGlua3MtbWVzc2FnZVwiIH0pO1xuICAgICAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5lZG9yO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRlbmVyIGVsIHZhbG9yIGRlIHR5cGVOYW1lIHNpIGV4aXN0ZVxuICAgICAgICBjb25zdCB0eXBlTmFtZSA9IG1ldGEudHlwZU5hbWUgfHwgXCJFbGVtZW50b1wiO1xuICAgICAgICBcbiAgICAgICAgLy8gRmlsdHJhciBsYXMgY2xhdmVzIHF1ZSBjb21pZW5jZW4gY29uIFwibGluay1cIiB5IHNlYW4gVVJMcyB2XHUwMEUxbGlkYXNcbiAgICAgICAgY29uc3QgbGlua0ZpZWxkcyA9IE9iamVjdC5lbnRyaWVzKG1ldGEpXG4gICAgICAgICAgICAuZmlsdGVyKChba2V5LCB2YWx1ZV0pID0+IGtleS5zdGFydHNXaXRoKFwibGluay1cIikgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLnN0YXJ0c1dpdGgoXCJodHRwXCIpKVxuICAgICAgICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xuICAgICAgICAgICAgICAgIHVybDogdmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgZWwgbWVuc2FqZSBzaSBzZSBlbmN1ZW50cmEgYWwgbWVub3MgdW4gZW5sYWNlIHZcdTAwRTFsaWRvXG4gICAgICAgIGlmIChsaW5rRmllbGRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxpbmtGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXIgdW4gcFx1MDBFMXJyYWZvIHBhcmEgY2FkYSBlbmxhY2VcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJyYWZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgICAgICAgICAgICAgcGFycmFmby5jbGFzc0xpc3QuYWRkKFwibm90aW9uLWxpbmstaXRlbVwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDcmVhciB0ZXh0b1xuICAgICAgICAgICAgICAgIHBhcnJhZm8udGV4dENvbnRlbnQgPSBgJHt0eXBlTmFtZX0gc2luY3Jvbml6YWRvIGVuIE5vdGlvbiBlbiBgO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWFyIGVubGFjZVxuICAgICAgICAgICAgICAgIGNvbnN0IGVubGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICAgICAgICAgIGVubGFjZS5ocmVmID0gZmllbGQudXJsO1xuICAgICAgICAgICAgICAgIGVubGFjZS50ZXh0Q29udGVudCA9IGZpZWxkLnVybDtcbiAgICAgICAgICAgICAgICBlbmxhY2UudGFyZ2V0ID0gXCJfYmxhbmtcIjsgLy8gQWJyaXIgZW4gbnVldmEgcGVzdGFcdTAwRjFhXG4gICAgICAgICAgICAgICAgZW5sYWNlLnJlbCA9IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiOyAvLyBTZWd1cmlkYWQgcGFyYSBlbmxhY2VzIGV4dGVybm9zXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgZWwgZW5sYWNlIGFsIHBcdTAwRTFycmFmb1xuICAgICAgICAgICAgICAgIHBhcnJhZm8uYXBwZW5kQ2hpbGQoZW5sYWNlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBwXHUwMEUxcnJhZm8gYWwgY29udGVuZWRvclxuICAgICAgICAgICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQocGFycmFmbyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IG1lbnNhamUgPSBkdi5lbChcInBcIiwgXCJObyBzZSBlbmNvbnRyYXJvbiBlbmxhY2VzIHNpbmNyb25pemFkb3MgZW4gTm90aW9uLlwiLCB7IGNsczogXCJub3Rpb24tbGlua3MtbWVzc2FnZVwiIH0pO1xuICAgICAgICAgICAgY29udGVuZWRvci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBwcm9jZXNhciBlbmxhY2VzIHNpbmNyb25pemFkb3M6XCIsIGVycm9yKTtcbiAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBkdi5lbChcInBcIiwgXCJFcnJvciBhbCBwcm9jZXNhciBlbmxhY2VzIHNpbmNyb25pemFkb3MuIENvbnN1bHRhIGxhIGNvbnNvbGEgcGFyYSBtXHUwMEUxcyBkZXRhbGxlcy5cIiwgeyBjbHM6IFwibm90aW9uLWxpbmtzLWVycm9yXCIgfSk7XG4gICAgICAgIGNvbnRlbmVkb3IuYXBwZW5kQ2hpbGQoZXJyb3JNc2cpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVuZWRvcjtcbn1cblxuICB9IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9ZQU1MVXBkYXRlckFQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTIzIDE1OjU3OjQwXG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0OTo0M1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG4vL2ltcG9ydCB7dXRpbHNBUEl9IGZyb20gJy4vdXRpbHNBUEknXG5cbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgbW9kYWxfY2FtYmlvSEYgfSBmcm9tIFwiLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vbW9kYWxzL2NhbWJpb0hGXCI7XG5cbmV4cG9ydCBjbGFzcyBZQU1MVXBkYXRlckFQSSB7XG4gICAgLy9wcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgaW5mb1N1YnNpc3RlbWE6IG9iamVjdDsgLy8gQXN1bWllbmRvIHF1ZSBlcyB1biBzdHJpbmdcbiAgICBwcml2YXRlIHRwOiBvYmplY3Q7XG4gICAgcHJpdmF0ZSBwYXRoQ2FtcG9zOiBzdHJpbmc7IFxuICAgIHByaXZhdGUgbm90YTogb2JqZWN0O1xuICAgIHByaXZhdGUgaW5mb05vdGE6IG9iamVjdDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICAvLyBJbmljaWFsaXphIGZvbGRlciBlIGluZGljZSBjb24gdmFsb3JlcyBwcmVkZXRlcm1pbmFkb3MgbyBsXHUwMEYzZ2ljYSBlc3BlY1x1MDBFRGZpY2EuXG4gICAgICAgIHRoaXMuaW5mb05vdGEgPSB7fTtcbiAgICAgICAgdGhpcy5ub3RhID0ge307XG4gICAgICAgIHRoaXMudHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gICAgfVxuICAgIFxuXG4gICAgYXN5bmMgYWN0dWFsaXphck5vdGEoaW5mb05vdGE6IGFueSwgY2FtcG9zOiBhbnkpIHtcbiAgICAgICBcbiAgICAgICAgLy9sZXQgbm90YSA9IHt9OyAvLyBJbmljaWFsaXphIGVsIG9iamV0byBub3RhLlxuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuaW5mb05vdGEsIGluZm9Ob3RhKTsgXG4gICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBjYW1wbyBvZiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGl2aWRlIGVsIGNhbXBvIGVuIGZ1bmNpXHUwMEYzbiBkZWwgc1x1MDBFRG1ib2xvIFwiX1wiXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRlcyA9IGNhbXBvLnNwbGl0KCdfJyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBjYW1wb05hbWUsIGZ1bmN0aW9uTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcmFtZXRybyA9IG51bGw7IFxuICAgICAgICAgICAgICAgICAgICAvLyBTaSBoYXkgdW4gc1x1MDBFRG1ib2xvIFwiX1wiLCB1c2EgbGEgcGFydGUgYW50ZXMgZGUgXCJfXCIgcGFyYSBlbCBub21icmUgZGUgbGEgZnVuY2lcdTAwRjNuLFxuICAgICAgICAgICAgICAgICAgICAvLyB5IGxhIHBhcnRlIGRlc3B1XHUwMEU5cyBkZSBcIl9cIiBjb21vIHBhclx1MDBFMW1ldHJvLlxuICAgICAgICAgICAgICAgICAgICBpZiAocGFydGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uTmFtZSA9IGBnZXQke3BhcnRlc1swXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHBhcnRlc1swXS5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcG9OYW1lID0gcGFydGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldHJvID0gcGFydGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FtcG9OYW1lID0gcGFydGVzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25OYW1lID0gYGdldCR7Y2FtcG8uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1wby5zbGljZSgxKX1gO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG1ldGFkYXRhID0gIGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0aGlzLmluZm9Ob3RhLmZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCB2YWxvckFjdHVhbENhbXBvID0gbWV0YWRhdGFbY2FtcG9OYW1lXSB8fCBcIlNpbiBkZWZpbmlyXCI7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGV4aXN0ZSB1bmEgZnVuY2lcdTAwRjNuIGNvbiBlc2Ugbm9tYnJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNbZnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGxhbWEgYSBsYSBmdW5jaVx1MDBGM24gZGUgbWFuZXJhIGRpblx1MDBFMW1pY2EuIFNpIGV4aXN0ZSB1biBwYXJcdTAwRTFtZXRybywgcFx1MDBFMXNhbG8gYSBsYSBmdW5jaVx1MDBGM24uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldHJvICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RhW2NhbXBvTmFtZV0gPSBhd2FpdCB0aGlzW2Z1bmN0aW9uTmFtZV0ocGFyYW1ldHJvLHZhbG9yQWN0dWFsQ2FtcG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGFbY2FtcG9OYW1lXSA9IGF3YWl0IHRoaXNbZnVuY3Rpb25OYW1lXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgTGEgZnVuY2lcdTAwRjNuICR7ZnVuY3Rpb25OYW1lfSBubyBlc3RcdTAwRTEgZGVmaW5pZGEuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNYW5lamEgZWwgY2FzbyBlbiBxdWUgbGEgZnVuY2lcdTAwRjNuIG5vIGVzdFx1MDBFOSBkZWZpbmlkYS5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIG5vdGFcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5ub3RhKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEVqZWN1dGEgdHUgY1x1MDBGM2RpZ28gYXF1XHUwMEVEIHNpIGVsIG9iamV0byBgbm90YWAgdGllbmUgbVx1MDBFMXMgZGUgdW5hIHByb3BpZWRhZFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHModGhpcy5ub3RhLCBpbmZvTm90YS5maWxlLnBhdGgpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIC8vTm8gc2UgZW5jb250cmFyb24gY2FtcG9zIHBhcmEgbW9kaWZpY2FyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgZWwgY1x1MDBGM2RpZ28gcGFyYSBwcm9jZXNhciBlbCBvYmpldG8gbm90YSwgY29tbyBndWFyZGFyIGVuIHVuIGFyY2hpdm8gZGVudHJvIGRlICdmb2xkZXInLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3RhOyAvLyBSZXRvcm5hIGVsIG9iamV0byBub3RhIGNvbiB0b2RhcyBsYXMgcHJvcGllZGFkZXMgYWdyZWdhZGFzLlxuICAgIH1cbiAgICBcbiAgICBhc3luYyBhcmNoaXZhck5vdGEoaW5mb05vdGE6IGFueSwgY2FtcG9zOiBhbnkpIHtcbiAgICAgICAgXG4gICAgICAgIGxldCBub3RhID0ge307IC8vIEluaWNpYWxpemEgZWwgb2JqZXRvIG5vdGEuXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5pbmZvTm90YSwgaW5mb05vdGEpOyBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2FtcG8gb2YgY2FtcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVzYSBlbCBub21icmUgZGVsIGNhbXBvIHBhcmEgY29uc3RydWlyIGVsIG5vbWJyZSBkZSBsYSBmdW5jaVx1MDBGM24gKHAuIGVqLiwgXCJnZXRJZFwiKVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbk5hbWUgPSBgZ2V0JHtjYW1wby5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbXBvLnNsaWNlKDEpfWA7XG4gICAgICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGV4aXN0ZSB1bmEgZnVuY2lcdTAwRjNuIGNvbiBlc2Ugbm9tYnJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNbZnVuY3Rpb25OYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGxhbWEgYSBsYSBmdW5jaVx1MDBGM24gZGUgbWFuZXJhIGRpblx1MDBFMW1pY2EgeSBhc2lnbmEgZWwgcmVzdWx0YWRvIGFsIGNhbXBvIGNvcnJlc3BvbmRpZW50ZSBkZSBsYSBub3RhLlxuICAgICAgICAgICAgICAgICAgICAgICAgbm90YVtjYW1wb10gPSBhd2FpdCB0aGlzW2Z1bmN0aW9uTmFtZV0oKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYExhIGZ1bmNpXHUwMEYzbiAke2Z1bmN0aW9uTmFtZX0gbm8gZXN0XHUwMEUxIGRlZmluaWRhLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFuZWphIGVsIGNhc28gZW4gcXVlIGxhIGZ1bmNpXHUwMEYzbiBubyBlc3RcdTAwRTkgZGVmaW5pZGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQb3IgZWplbXBsbywgcG9kclx1MDBFRGFzIGFzaWduYXIgdW4gdmFsb3IgcG9yIGRlZmVjdG8gYSBub3RhW2NhbXBvXSBvIHNpbXBsZW1lbnRlIGNvbnRpbnVhci5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGxhIG5vdGFcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBub3RhLmVzdGFkbyA9IFwiXHVEODNEXHVERDM1XCI7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRWplY3V0YSB0dSBjXHUwMEYzZGlnbyBhcXVcdTAwRUQgc2kgZWwgb2JqZXRvIGBub3RhYCB0aWVuZSBtXHUwMEUxcyBkZSB1bmEgcHJvcGllZGFkXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhub3RhLCBpbmZvTm90YS5maWxlLnBhdGgpXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIC8vTm8gc2UgZW5jb250cmFyb24gY2FtcG9zIHBhcmEgbW9kaWZpY2FyXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFxdVx1MDBFRCBpclx1MDBFRGEgZWwgY1x1MDBGM2RpZ28gcGFyYSBwcm9jZXNhciBlbCBvYmpldG8gbm90YSwgY29tbyBndWFyZGFyIGVuIHVuIGFyY2hpdm8gZGVudHJvIGRlICdmb2xkZXInLlxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBjcmVhciBlbCBvYmpldG8gZGUgcmVnaXN0cm8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gbm90YTsgLy8gUmV0b3JuYSBlbCBvYmpldG8gbm90YSBjb24gdG9kYXMgbGFzIHByb3BpZWRhZGVzIGFncmVnYWRhcy5cbiAgICB9XG5cblxuICAgIGFzeW5jIHVwZGF0ZVlBTUxGaWVsZHMobm90YSwgcnV0YSkge1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJ1dGEpO1xuICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBmcm9udG1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gSXRlcmFyIHNvYnJlIGNhZGEgcHJvcGllZGFkIGRlbCBvYmpldG8gJ25vdGEnXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYW1wbyBpbiBub3RhKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoY2FtcG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvIGVuIGVsIGZyb250bWF0dGVyIGNvbiBlbCB2YWxvciBjb3JyZXNwb25kaWVudGVcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbnRtYXR0ZXJbY2FtcG9dID0gbm90YVtjYW1wb107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXJcIiwgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIGdldFRwKCl7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vICBGb3JtYSBkZSBhY2NlZGVyIGFsIG9iamV0byB0cCBub3JtYWwgcXVlIGhlIHVzYWRvIGRlc2RlIERWSlMgY3VhbmRvIGN1cnJlbnQgRnVuY3Rpb25zIGVzdGEgY2FyZ2Fkby5cbiAgICAgICAgLy9jb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLnBsdWdpbnNbJ3RlbXBsYXRlci1vYnNpZGlhbiddO1xuICAgICAgICAvL2NvbnN0IHRwID0gdGVtcGxhdGVyUGx1Z2luLnRlbXBsYXRlci5jdXJyZW50X2Z1bmN0aW9uc19vYmplY3Q7XG4gICAgICAgIC8vIC0+IHZlcnNpb24gcXVlIGZhbGxhIHNpIG5vIGVzdGEgYXJyaWJhIGVsIHBsdWdpbiBwb3JxdWUgaGFjZSBnZXQgZGVsIHBsdWdpbiBkaXJlY3RvLiBjb25zdCB0ZW1wbGF0ZXJQbHVnaW4gPSB0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbigndGVtcGxhdGVyLW9ic2lkaWFuJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgdGhlIGRhdGUgbW9kdWxlXG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5zeXN0ZW0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJ3RwIGVuIFlBTUxVcGRhdGVyQVBJIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgcmV0dXJuIHRwO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEZlY2hhKGZsYWcsIGFjdHVhbCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0ZWFyRmVjaGEobmV3IERhdGUoKSk7XG4gICAgfVxuXG4gICAgZm9ybWF0ZWFyRmVjaGEoZmVjaGE6IERhdGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBvZmZzZXQgPSBmZWNoYS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAwMDA7XG4gICAgICAgIGNvbnN0IGZlY2hhTG9jYWwgPSBuZXcgRGF0ZShmZWNoYS5nZXRUaW1lKCkgLSBvZmZzZXQpO1xuICAgICAgICBjb25zdCBmZWNoYUZvcm1hdG8gPSBmZWNoYUxvY2FsLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZGlhcyA9IFsnRG9taW5nbycsICdMdW5lcycsICdNYXJ0ZXMnLCAnTWlcdTAwRTlyY29sZXMnLCAnSnVldmVzJywgJ1ZpZXJuZXMnLCAnU1x1MDBFMWJhZG8nXTtcbiAgICAgICAgY29uc3QgZGlhU2VtYW5hID0gZGlhc1tmZWNoYS5nZXREYXkoKV07XG4gICAgICAgIGNvbnN0IGhvcmFGb3JtYXRvID0gZmVjaGEudG9UaW1lU3RyaW5nKCkuc3BsaXQoJyAnKVswXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICAgIHJldHVybiBgJHtmZWNoYUZvcm1hdG99ICR7ZGlhU2VtYW5hfSAke2hvcmFGb3JtYXRvfWA7XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRIb3JhRmluYWwocGFyYW1ldHJvLCBhY3R1YWwpe1xuICAgICAgICAvLyBFc3RhIGZ1bmNpXHUwMEYzbiBzb2xvIHJlY2liZSBlbiBlbCBwYXJcdTAwRTFtZXRybyBsYSBob3JhIGZpbmFsIG51ZXZhLCBwYXJhIGFjdHVhbGl6YXIgZWwgdmFsb3IuXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBpZiAocGFyYW1ldHJvID09PSB1bmRlZmluZWQpe1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRlYXJGZWNoYShuZXcgRGF0ZSgpKTtcbiAgICAgICAgfWVsc2V7IFxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRybztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldFRpZW1wb1RyYWJhamFkbyhwYXJhbWV0cm8sIGFjdHVhbCl7XG4gICAgICAgIGRlYnVnZ2VyXG4gICAgICAgIFxuICAgICAgICBsZXQgaG9yYUluaWNpb1N0ciA9IHRoaXMuaW5mb05vdGEuaG9yYUluaWNpbztcbiAgICAgICAgbGV0IGNpZXJyZTtcbiAgICAgICAgLy8gU3Vwb25pZW5kbyBxdWUgZWwgZm9ybWF0byBlcyBcIllZWVktTU0tREQgZGRkZCBISDptbVwiIHkgcXVpZXJlcyBjb252ZXJ0aXJsbyBhIHVuIGZvcm1hdG8gcmVjb25vY2lkbyBwb3IgRGF0ZVxuICAgICAgICAvLyBQcmltZXJvLCBlbGltaW5hIGxhIHBhcnRlIGRlbCBkXHUwMEVEYSBkZSBsYSBzZW1hbmEsIHlhIHF1ZSBEYXRlKCkgbm8gbGEgbmVjZXNpdGFcbiAgICAgICAgbGV0IFtmZWNoYSwgLCBob3JhXSA9IGhvcmFJbmljaW9TdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgbGV0IGZlY2hhSG9yYUlTTyA9IGAke2ZlY2hhfVQke2hvcmF9YDtcbiAgICAgICAgLy8gQ3JlYXIgb2JqZXRvcyBEYXRlXG4gICAgICAgIGxldCBob3JhSW5pY2lvID0gbmV3IERhdGUoZmVjaGFIb3JhSVNPKTtcbiAgICAgICAgaWYgKHBhcmFtZXRybyA9PSB1bmRlZmluZWQpeyAgICBcbiAgICAgICAgY2llcnJlID0gbmV3IERhdGUoKTtcblxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGxldCBbZmVjaGFDaWVycmUsICxob3JhQ2llcnJlXSA9IHBhcmFtZXRyby5zcGxpdCgnICcpOyAgIFxuICAgICAgICAgICAgbGV0IGZlY2hhSG9yYUNpZXJyZUlTTyA9IGAke2ZlY2hhQ2llcnJlfVQke2hvcmFDaWVycmV9YDtcbiAgICAgICAgICAgIGNpZXJyZSA9IG5ldyBEYXRlKGZlY2hhSG9yYUNpZXJyZUlTTyk7XG4gICAgICAgIH0gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhciBsYSBkaWZlcmVuY2lhIGVuIG1pbGlzZWd1bmRvc1xuICAgICAgICBsZXQgZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zID0gY2llcnJlIC0gaG9yYUluaWNpbztcbiAgICAgICAgcmV0dXJuIGRpZmVyZW5jaWFFbk1pbGlzZWd1bmRvcztcbiAgICB9XG5cblxuICAgIGFzeW5jIGdldFNlY0lkKGZsYWcsIGFjdHVhbCl7XG5cbiAgICB9XG4gICAgXG4gICAgYXN5bmMgZ2V0VGl0dWxvKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCB0aXR1bG8gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5wcm9tcHQoYFRpdHVsbyBkZSBlc3RlKGEpICR7dGhpcy5pbmZvU3Vic2lzdGVtYS5uYW1lfWAsIGAke3RoaXMuaW5mb1N1YnNpc3RlbWEubmFtZX0gLSAke3RoaXMubm90YS5pZH1gLCB0cnVlKVxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmICh0aXR1bG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cblx0ICAgIH1cbiAgICAgICAgdGhpcy5ub3RhLnRpdHVsbyA9IHRpdHVsbztcbiAgICAgICAgcmV0dXJuIHRpdHVsbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXREZXNjcmlwY2lvbihmbGFnLCBhY3R1YWwpe1xuICAgICAgICBsZXQgcHJvbXB0ID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgICAgIGxldCBkZXNjcmlwY2lvbjtcbiAgICAgICAgc3dpdGNoIChmbGFnKSB7XG4gICAgICAgICAgICBjYXNlIFwiUmVnaXN0cm9UaWVtcG9cIjpcbiAgICAgICAgICAgICAgICAgZGVzY3JpcGNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZEZXRhbGxlIGRlbCBSZWdpc3RybyBUaWVtcG86XCIsIGFjdHVhbCwgZmFsc2UsIHRydWUgKSAgIFxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZGVzY3JpcGNpb24gPSBhd2FpdCBwcm9tcHQoXCJcdTAwQkZRdWllcmVzIGFncmVnYXIgdW5hIGRlc2NyaXBjaVx1MDBGM24/XCIsIFwiIFwiICsgYEVzdGEgbm90YSBlcyBzb2JyZSAke3RoaXMubm90YS50aXR1bG99YCwgZmFsc2UsIHRydWUgKVxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IFxuXHQgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgIGlmIChkZXNjcmlwY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB0aGlzLm5vdGEuZGVzY3JpcGNpb24gPSBkZXNjcmlwY2lvbjtcbiAgICAgICAgcmV0dXJuIGRlc2NyaXBjaW9uO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEFsaWFzZXMoZmxhZywgYWN0dWFsKXtcbiAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMgPSBbXTsgICAgICBcbiAgICAgICAgc3dpdGNoKHRoaXMuaW5mb1N1YnNpc3RlbWEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcIkF4XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RhLmFsaWFzZXMucHVzaChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLnR5cGV9IC0gJHt0aGlzLm5vdGEudGl0dWxvfWApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgIC8vIDAgLT4gTm9tYnJlLCAxIC0+IHR5cGUgKyBOb21icmVcbiAgICAgICAgICAgICAgICBicmVhazsgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90YS5hbGlhc2VzO1xuICAgICAgIFxuICAgIH1cblxuICAgIGFzeW5jIGdldEFzdW50byhmbGFnLCBhY3R1YWwpe1xuICAgICAgICBsZXQgc2lBc3VudG8sIG5vbWJyZTsgXG4gICAgICAgIGxldCBhY3Rpdm8gPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKGFjdGl2byAhPSBudWxsKXsgXG4gICAgICAgICAgICBub21icmUgPSBhY3Rpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICBjb25zdCBub3RhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2byk7IFxuICAgICAgICAgICAgc2lBc3VudG8gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5zdWdnZXN0ZXIoW1wiU2lcIixcIk5vXCJdLFt0cnVlLCBmYWxzZV0sIHRydWUsIG5vbWJyZSArIFwiIGVzIG9yaWdlbiBkZSBcIiArIHRoaXMubm90YS50aXR1bG8gKyBcIj9cIilcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIHNpQXN1bnRvID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbm9tYnJlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50byA9IHt9O1xuICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50by5zaUFzdW50byA9IHNpQXN1bnRvO1xuICAgICAgICAgICAgdGhpcy5ub3RhLmFzdW50by5ub21icmUgPSBub21icmU7ICAgIFxuICAgICAgICByZXR1cm4ge3NpQXN1bnRvLCBub21icmV9XG4gICAgfVxuXG5cbiAgICBhc3luYyBnZXRDbGFzaWZpY2FjaW9uKGZsYWcsIGFjdHVhbCl7XG4gICAgICAgIGxldCBjbGFzaWZpY2FjaW9uLCB0YWdDbGFzaWZpY2FjaW9uLCBjbGFzaWZpY2FjaW9uQVgsIHRhZ3NDbGFzaWZpY2FjaW9uQVg7XG4gICAgICAgIGxldCBudWV2YUNsYXNpZmljYWNpb24gPSBmYWxzZTtcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgICAgICBjbGFzaWZpY2FjaW9uQVggPSBmcm9udG1hdHRlci50aXR1bG9DbGFzaWZpY2FjaW9uQVggfHwgW107XG4gICAgICAgICAgICB0YWdzQ2xhc2lmaWNhY2lvbkFYID0gZnJvbnRtYXR0ZXIudGFnc0NsYXNpZmljYWNpb25BWCB8fCBbXTtcbiAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5zdWdnZXN0ZXIoY2xhc2lmaWNhY2lvbkFYLCB0YWdzQ2xhc2lmaWNhY2lvbkFYLCBmYWxzZSwgXCJcdTAwQkZDbGFzaWZpY2FyXHUwMEVEYXMgZXN0YSBub3RhIGJham8gYWxndW5hIGRlIGxhcyBzaWd1aWVudGVzIGNhdGVnb3JcdTAwRURhcz9cIilcbiAgICAgICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLiBcbiAgICAgICAgICAgIGlmICh0YWdDbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNyZWFjaVx1MDBGM24gZGUgbm90YSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW8uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWdDbGFzaWZpY2FjaW9uPT1cIk51ZXZvXCIpe1xuICAgICAgICAgICAgICAgIGNsYXNpZmljYWNpb24gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIG5vbWJyZSBkZSBsYSBudWV2YSBjbGFzaWZpY2FjaVx1MDBGM24gcXVlIHZhcyBhIGluZ3Jlc2FyP1wiLCBcIk1pQ2xhc2lmaWNhY2lcdTAwRjNuXCIsIHRydWUpXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGVsIHVzdWFyaW8gcHJlc2lvblx1MDBGMyBFc2MuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzaWZpY2FjaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFRlcm1pbmEgbGEgZWplY3VjaVx1MDBGM24gZGUgbGEgZnVuY2lcdTAwRjNuIGFxdVx1MDBFRC5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBhd2FpdCB0aGlzLnRwLnN5c3RlbS5wcm9tcHQoXCJcdTAwQkZDdWFsIGVzIGVsIHRhZyBxdWUgdXRpbGl6YXJhcyBwYXJhIFwiICsgY2xhc2lmaWNhY2lvbiArIFwiPy4gTm8gdXRpbGljZXMgZXNwYWNpb3MgZW4gbGEgZGVmaW5pY2lcdTAwRjNuIGRlbCB0YWcuXCIsIFwibnVldm9UYWdcIiwgdHJ1ZSlcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQ3JlYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBudWV2YUNsYXNpZmljYWNpb24gPSB0cnVlO1xuICAgICAgICAgICAgfWVsc2UgaWYodGFnQ2xhc2lmaWNhY2lvbj09XCJOaW5ndW5hXCIpe1xuICAgICAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBcIlwiXG4gICAgICAgICAgICAgICAgY2xhc2lmaWNhY2lvbiA9IFwiXCJcdFxuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBpbmRpY2UgPSB0YWdzQ2xhc2lmaWNhY2lvbkFYLmluZGV4T2YodGFnQ2xhc2lmaWNhY2lvbilcbiAgICAgICAgICAgICAgICBjbGFzaWZpY2FjaW9uID0gY2xhc2lmaWNhY2lvbkFYW2luZGljZV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChudWV2YUNsYXNpZmljYWNpb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihmaWxlLCBmcm9udG1hdHRlciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFzdW1pZW5kbyBxdWUgJ2FjdHNUZW1hcycgZXMgZWwgY2FtcG8gYSBtb2RpZmljYXJcbiAgICAgICAgICAgICAgICBsZXQgbmV3Q2xhc2lmaWNhY2lvbiA9IFsuLi5jbGFzaWZpY2FjaW9uQVgsIGNsYXNpZmljYWNpb25dXG4gICAgICAgICAgICAgICAgbGV0IG5ld1RhZ0NsYXNpZmljYWNpb24gPSBbLi4udGFnc0NsYXNpZmljYWNpb25BWCwgdGFnQ2xhc2lmaWNhY2lvbl1cbiAgICAgICAgICAgICAgICBmcm9udG1hdHRlci50aXR1bG9DbGFzaWZpY2FjaW9uQVggPSBuZXdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgICAgIGZyb250bWF0dGVyLnRhZ3NDbGFzaWZpY2FjaW9uQVggPSBuZXdUYWdDbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICBpZiAodGFnQ2xhc2lmaWNhY2lvbiAhPSBcIlwiKXtcbiAgICAgICAgICAgIHRhZ0NsYXNpZmljYWNpb24gPSBcImNsL1wiICsgdGFnQ2xhc2lmaWNhY2lvbiBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90YS5jbGFzaWZpY2FjaW9uQVggPSBjbGFzaWZpY2FjaW9uO1xuICAgICAgICAgICAgdGhpcy5ub3RhLnRhZ0NsYXNpZmljYWNpb25BWCA9IHRhZ0NsYXNpZmljYWNpb247XG4gICAgICAgICAgICByZXR1cm4ge2NsYXNlOiBjbGFzaWZpY2FjaW9uLCB0YWc6IHRhZ0NsYXNpZmljYWNpb259O1xuICAgIH1cbiAgICAvLyAtPlxuXG4gICAgYXN5bmMgZ2V0RXN0YWRvKHBhcmFtZXRybywgYWN0dWFsKXtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBjYW1wbztcbiAgICAgICAgaWYgKHBhcmFtZXRybyA9PSB1bmRlZmluZWQpe1xuICAgICAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG5cdCAgICBjYW1wbyA9IGF3YWl0IHN1Z2dlc3RlcihbXCJcdUQ4M0RcdUREMzUgLT4gQ29tcGxldGFkbyAtIEluZm9ybWFjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdURGRTIgLT4gRmluYWxpemFkb1wiLFwiXHVEODNEXHVERkUxIC0+IEVuIGVqZWN1Y2lcdTAwRjNuXCIsIFwiXHVEODNEXHVERDM0IC0+IERldGVuaWRvXCJdLFtcIlx1RDgzRFx1REQzNVwiLCBcIlx1RDgzRFx1REZFMlwiLFwiXHVEODNEXHVERkUxXCIsIFwiXHVEODNEXHVERDM0XCJdLCBmYWxzZSwgXCJTZWxlY2Npb25lIGVsIG51ZXZvIGVzdGFkbzpcIik7XG4gICAgICAgIC8vIFZlcmlmaWNhciBzaSBlbCB1c3VhcmlvIHByZXNpb25cdTAwRjMgRXNjLlxuICAgICAgICBpZiAoY2FtcG8gPT09IG51bGwpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk1vZGlmaWNhY2lcdTAwRjNuIGRlIG5vdGEgY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG5cdCAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY2FtcG8gPSBwYXJhbWV0cm87XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5vdGEuZXN0YWRvID0gY2FtcG87XG4gICAgICAgIHJldHVybiBjYW1wbztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRGaWxlbmFtZShmbGFnLCBhY3R1YWwpe1xuICAgICAgICBzd2l0Y2godGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwiQVZcIjpcbiAgICAgICAgICAgIGNhc2UgXCJBSVwiOlxuICAgICAgICAgICAgICAgIHRoaXMubm90YS5maWxlTmFtZSA9IChgJHt0aGlzLmluZm9TdWJzaXN0ZW1hLmZvbGRlcn0vJHt0aGlzLm5vdGEudGl0dWxvfS9pbmRleCR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfWApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiQXhcIjpcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGEuZmlsZU5hbWUgPSAoYCR7dGhpcy5pbmZvU3Vic2lzdGVtYS5mb2xkZXJ9LyR7dGhpcy5pbmZvU3Vic2lzdGVtYS50eXBlfSAtICR7dGhpcy5ub3RhLmlkfWApXG4gICAgICAgICAgICAgICAgYnJlYWs7ICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGEuZmlsZU5hbWU7XG4gICAgfVxuXG4gICAgYXN5bmMgbW9kYWxDYW1iaW9IRihub3RhKXtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBtb2RhbCA9IG5ldyBtb2RhbF9jYW1iaW9IRih0aGlzLnBsdWdpbiwgbm90YSk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG4gICBcblxuICB9XG4gICIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHMvY2FtYmlvSEYudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9tb2RhbHNcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNC0wMy0yMyAxNzoyMzoxMFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDY6MjJcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQgeyBNb2RhbCwgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgWUFNTFVwZGF0ZXJBUEkgfSBmcm9tICcuLi8uLi9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUEknO1xuXG5leHBvcnQgY2xhc3MgbW9kYWxfY2FtYmlvSEYgZXh0ZW5kcyBNb2RhbCB7XG4gICAgZmlsZTogVEZpbGU7XG4gICAgYXBwOiBBcHA7XG4gICAgaG9yYUZpbmFsSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbiwgZmlsZTogVEZpbGUpIHtcbiAgICAgICAgc3VwZXIocGx1Z2luLmFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmZpbGUgPSBmaWxlO1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsSW5ib3hcIik7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUodGhpcy5maWxlLmZpbGUpO1xuICAgICAgICBjb25zdCBhbGlhc2VzID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5hbGlhc2VzIHx8IFwiQWN0aXZpZGFkIHNpbiBhbGlhc1wiO1xuICAgICAgICAvLyBDb252ZXJ0aXIgaG9yYUluaWNpb1N0ciBhIGZvcm1hdG8gXCJZWVlZLU1NLUREVEhIOk1NXCIgcGFyYSBkYXRldGltZS1sb2NhbFxuICAgICAgICBjb25zdCBob3JhRmluU3RyID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5ob3JhRmluYWwgPyB3aW5kb3cubW9tZW50KG1ldGFkYXRhLmZyb250bWF0dGVyLmhvcmFGaW5hbCwgXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIikuZm9ybWF0KFwiWVlZWS1NTS1ERFRISDptbVwiKSA6ICcnO1xuXG4gICAgICAgIC8vIENvbmZpZ3VyYSBlbCB0XHUwMEVEdHVsbyBkZWwgbW9kYWwgeSBtdWVzdHJhIGVsIGFsaWFzIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6IGBDYW1iaW8gaG9yYSBjaWVycmUgZGUgcmVnaXN0cm8uYCB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgVGFyZWE6IFwiJHthbGlhc2VzWzBdfVwiYCB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIElucHV0IHBhcmEgbGEgaG9yYSBkZSBpbmljaW8gY29uIHRpcG8gZGF0ZXRpbWUtbG9jYWxcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnSG9yYSBkZSBjaWVycmUgcmVnaXN0cm86JyB9KTtcbiAgICAgICAgdGhpcy5ob3JhRmluYWxJbnB1dCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0ZXRpbWUtbG9jYWwnLFxuICAgICAgICAgICAgdmFsdWU6IGhvcmFGaW5TdHJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90XHUwMEYzbiBwYXJhIGd1YXJkYXIgY2FtYmlvc1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gY29udGVudEVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdHdWFyZGFyIGNhbWJpb3MnIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmd1YXJkYXJDYW1iaW9zKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ3VhcmRhckNhbWJpb3MoKSB7XG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUZpbmFsTG9jYWwgPSB0aGlzLmhvcmFGaW5hbElucHV0LnZhbHVlO1xuICAgICAgICAvLyBBc2VndXJhciBxdWUgbGEgbnVldmEgaG9yYSB0aWVuZSB2YWxvciBhbnRlcyBkZSBpbnRlbnRhciBmb3JtYXRlYXJcbiAgICAgICAgaWYgKCFudWV2YUhvcmFGaW5hbExvY2FsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUG9yIGZhdm9yLCBzZWxlY2Npb25lIHVuYSBob3JhIGRlIGNpZXJyZS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb252ZXJ0aXIgZGUgXCJZWVlZLU1NLUREVEhIOk1NXCIgYSBcIllZWVktTU0tREQgZGRkZCBISDptbVwiXG4gICAgICAgIGNvbnN0IG51ZXZhSG9yYUZpbmFsID0gd2luZG93Lm1vbWVudChudWV2YUhvcmFGaW5hbExvY2FsKS5mb3JtYXQoXCJZWVlZLU1NLUREIGRkZGQgSEg6bW1cIik7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgLy8gRWplY3V0YXIgWUFNTCBVcGRhdGVcbiAgICAgICAgICAgIGxldCBjYW1wb3MgPSBbXCJmZWNoYVwiLGBob3JhRmluYWxfJHtudWV2YUhvcmFGaW5hbH1gLGB0aWVtcG9UcmFiYWphZG9fJHtudWV2YUhvcmFGaW5hbH1gLCBcImVzdGFkb19cdUQ4M0RcdUREMzVcIl07XG4gICAgICAgICAgICBsZXQgcmVzdWx0YWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uWUFNTFVwZGF0ZXJBUEkuYWN0dWFsaXphck5vdGEodGhpcy5maWxlLCBjYW1wb3MpO1xuXG5cblxuXG4gICAgICAgICAgICAvLyBDZXJyYXIgZWwgbW9kYWwgZGVzcHVcdTAwRTlzIGRlIGd1YXJkYXIgbG9zIGNhbWJpb3NcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJIb3JhIGRlIEZpbmFsaXphY2lcdTAwRjNuIGFjdHVhbGl6YWRhIGNvcnJlY3RhbWVudGUuXCIpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGd1YXJkYXIgY2FtYmlvcyBlbiBsYSBub3RhOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgYWwgZ3VhcmRhciBsb3MgY2FtYmlvcyBlbiBsYSBub3RhLlwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvbWVudURpYXJpb0FQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTA3IDE2OjA5OjE2XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0ODo1MFxuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5cbmltcG9ydCB7Tm90aWNlLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nXG5pbXBvcnQge0RhdGVUaW1lLCBEdXJhdGlvbn0gZnJvbSAnbHV4b24nXG5pbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSAnLi9zdGFydGVyQVBJJztcbmltcG9ydCB7IHV0aWxzQVBJIH0gZnJvbSAnLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3V0aWxzQVBJJztcbmltcG9ydCB7IHJlZ2lzdHJvVGllbXBvQVBJIH0gZnJvbSAnLi4vLi4vbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3JlZ2lzdHJvVGllbXBvQVBJJztcblxuZXhwb3J0IGNsYXNzIG1lbnVIb3lBUEkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7ICAvLyBHdWFyZGEgdW5hIHJlZmVyZW5jaWEgYSBsYSBhcGxpY2FjaVx1MDBGM24gT2JzaWRpYW4gcGFyYSBhY2NlZGVyIGEgc3VzIG1cdTAwRTl0b2RvcyB5IHByb3BpZWRhZGVzXG4gICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgICBhc3luYyBtb3N0cmFyTWVudShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSAnTWVuXHUwMEZBIGhveSc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgICAgIGJvdG9uTWVudUhveS5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lcyhkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIG1vZGlmaWNhZG8gcGFyYSBhZGFwdGFyc2UgYWwgY29udGV4dG8gZGVsIHBsdWdpblxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbmVzKGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yIHBhcmEgcmVtb3ZlciBlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQVxuXG4gICAgICAgIGNvbnN0IGJvdG9uZXMgPSBbXG4gICAgICAgICAgICBcIkhcdTAwRTFiaXRvc1wiLCBcIkJhbGFuY2VcIiwgXCJSZWdpc3RybyBkZSBUYXJlYXNcIiwgXCJOb3RhcyBkXHUwMEVEYVwiLCBcIlBlcnNvbmFsZXNcIlxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQmFsYW5jZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbChkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSFx1MDBFMWJpdG9zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckZvcm11bGFyaW9IYWJpdG9zKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdSZWdpc3RybyBkZSBUYXJlYXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25SZWdpc3Ryb1RhcmVhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTm90YXMgZFx1MDBFRGEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lc05vdGFzRFx1MDBFRGEoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BlcnNvbmFsZXMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQm90b25lc05vdGFzUGVyc29uYWxlcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhZ3JlZ2FyIGVsIGJvdFx1MDBGM24gZGUgcmVjYXJnYSB5IHN1IGxcdTAwRjNnaWNhIChFamVtcGxvIGFkYXB0YWRvKVxuICAgIGFncmVnYXJCb3RvblNhbGlyKGR2KSB7XG4gICAgICAgIGNvbnN0IGJvdG9uUmVjYXJnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3RvblJlY2FyZ2EudGV4dENvbnRlbnQgPSAnU2FsaXInO1xuICAgICAgICBib3RvblJlY2FyZ2Eub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhck1lbnUoZHYpOyAvLyBSZXN0YWJsZWNlciBhIGxhIHZpc3RhIGRlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQSBpbmljaWFsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBib3RvblJlY2FyZ2E7XG4gICAgfVxuXG4gICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWN0dWFsaXphciBjYW1wb3MgWUFNTFxuICAgICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKGZpbGVQYXRoLCBZQU1MZmllbGQsIHZhbG9yKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBSdXRhIGFsIGFyY2hpdm8gcXVlIHNlIHZhIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVlciB5IGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgdXNhbmRvIHByb2Nlc3NGcm9udE1hdHRlclxuICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIGRlbCBjYW1wbyBlc3BlY2lmaWNhZG9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW1lBTUxmaWVsZF0gPSB2YWxvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcGNpb25hbDogTm90aWZpY2FyIGFsIHVzdWFyaW8gcXVlIGxhIGFjdHVhbGl6YWNpXHUwMEYzbiBmdWUgZXhpdG9zYVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1lBTUwgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFyY2hpdm8gbm8gZW5jb250cmFkb1wiLCBlcnIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgYWN0dWFsaXphciBlbCBZQU1MLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWwoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgLy8gTWVuc2FqZSBpbmljaWFsXG4gICAgICAgIGNvbnN0IG1lbnNhamUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuICAgICAgICBtZW5zYWplLnRleHRDb250ZW50ID0gJ0V2YWxcdTAwRkFhIGVsIGJhbGFuY2UgZGUgdHUgdmlkYSBob3knO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQobWVuc2FqZSk7XG4gICAgXG4gICAgICAgIGNvbnN0IGluc3RydWNjaW9uZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIGluc3RydWNjaW9uZXMudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZGUgMSBhIDUgY2FkYSBcdTAwRTFyZWE6JztcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGluc3RydWNjaW9uZXMpO1xuICAgIFxuICAgICAgICAvLyBcdTAwQzFyZWFzIGEgZXZhbHVhclxuICAgICAgICBjb25zdCBhcmVhcyA9IFtcbiAgICAgICAgICAgIFwiUHJvZHVjdGl2aWRhZFwiLCBcIkVzcGlyaXR1YWxcIiwgXCJTYWx1ZFwiLCBcIlJ1dGluYXNcIixcbiAgICAgICAgICAgIFwiVmlkYSBTb2NpYWxcIiwgXCJGYW1pbGlhclwiLCBcIkFwcmVuZGl6YWplc1wiLCBcIkNyZWF0aXZpZGFkXCJcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgLy8gT2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbCB5IHN1IG1ldGFkYXRhXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgbGV0IG1ldGFkYXRhO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgaW5wdXQgcmFuZ2UgcGFyYSBjYWRhIFx1MDBFMXJlYVxuICAgICAgICBhcmVhcy5mb3JFYWNoKGFyZWEgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VmFsID0gbWV0YWRhdGEgJiYgbWV0YWRhdGFbc2FmZU5hbWVdID8gbWV0YWRhdGFbc2FmZU5hbWVdIDogMDtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmVkb3JBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5jbGFzc0xpc3QuYWRkKCdhcmVhLWV2YWx1YWNpb24nKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcbiAgICAgICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gYXJlYSArICc6ICc7XG4gICAgICAgICAgICBsYWJlbC5odG1sRm9yID0gc2FmZU5hbWU7XG4gICAgXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICBpbnB1dC50eXBlID0gJ3JhbmdlJztcbiAgICAgICAgICAgIGlucHV0LmlkID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5uYW1lID0gc2FmZU5hbWU7XG4gICAgICAgICAgICBpbnB1dC5taW4gPSAnMSc7XG4gICAgICAgICAgICBpbnB1dC5tYXggPSAnNSc7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGN1cnJlbnRWYWwudG9TdHJpbmcoKTsgLy8gVXNhciB2YWxvciBhY3R1YWwgbyAwXG4gICAgXG4gICAgICAgICAgICBjb25zdCB2YWxvckxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBNb3N0cmFyIGVsIHZhbG9yIGFjdHVhbCBhbCBsYWRvXG4gICAgXG4gICAgICAgICAgICBpbnB1dC5vbmlucHV0ID0gKCkgPT4gdmFsb3JMYWJlbC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlOyAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIG1vc3RyYWRvIGFsIG1vdmVyIGVsIHJhbmdlXG4gICAgXG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgICAgICBjb250ZW5lZG9yQXJlYS5hcHBlbmRDaGlsZCh2YWxvckxhYmVsKTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250ZW5lZG9yQXJlYSk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgZ3VhcmRhciBsb3MgdmFsb3Jlc1xuICAgICAgICBjb25zdCBib3Rvbkd1YXJkYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYm90b25HdWFyZGFyLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBib3Rvbkd1YXJkYXIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSBhcmVhLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLCAnXycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzYWZlTmFtZSkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsb3IgPSBwYXJzZUludChpbnB1dEVsZW1lbnQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgc2FmZU5hbWUsIHZhbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQmFsYW5jZXMgYWN0dWFsaXphZG9zIGNvbiBcdTAwRTl4aXRvLicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBwdWRvIG9idGVuZXIgZWwgYXJjaGl2byBhY3R1YWwuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbkd1YXJkYXIpO1xuICAgIFxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuXG4gICAgYXN5bmMgbW9zdHJhckZvcm11bGFyaW9IYWJpdG9zKGR2KSB7XG4gICAgICAgIC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBoYWJpdG9zID0gW1xuICAgICAgICAgICAgXCJDbHViIDVhbVwiLFxuICAgICAgICAgICAgXCJSZWdpc3RybyBBa1x1MDBFMXNoaWtvXCIsXG4gICAgICAgICAgICBcIkdpbW5hc2lvXCIsXG4gICAgICAgICAgICBcIkNvbWVyIFNhbHVkYWJsZVwiLFxuICAgICAgICAgICAgXCJMZWVyIGxpYnJvXCIsXG4gICAgICAgICAgICBcIkVzY3JpYmlyIGJpdFx1MDBFMWNvcmEgZWwgbWlzbW8gZFx1MDBFRGFcIixcbiAgICAgICAgICAgIFwiQ3JlYXIgcGxhbiBkXHUwMEVEYSBzaWd1aWVudGVcIixcbiAgICAgICAgICAgIFwiTWUgZnVcdTAwRUQgYSBkb3JtaXIgYW50ZXMgZGUgbGFzIDEwOjMwcG1cIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjYXJnYXIgeSBtYXJjYXIgY2hlY2tib3hlcyBzZWxlY2Npb25hZG9zIHByZXZpYW1lbnRlXG4gICAgICAgIGNvbnN0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgLy8gTGVlciBlbCBhcmNoaXZvIHBhcmEgb2J0ZW5lciBlbCBjYW1wbyAnaGFiaXRvcycgZGVsIFlBTUxcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hhYml0cyA9IGZyb250TWF0dGVyPy5oYWJpdG9zIHx8IFtdO1xuICAgIFxuICAgICAgICAgICAgaGFiaXRvcy5mb3JFYWNoKGhhYml0byA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmlkID0gaGFiaXRvO1xuICAgICAgICAgICAgICAgIGNoZWNrYm94Lm5hbWUgPSAnaGFiaXRvcyc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudmFsdWUgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGV4aXN0aW5nSGFiaXRzLmluY2x1ZGVzKGhhYml0byk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBoYWJpdG87XG4gICAgXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgIFxuICAgICAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIGF3YWl0IGNhcmdhckNoZWNrYm94ZXNTZWxlY2Npb25hZG9zKCk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIHkgY29uZmlndXJhciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXJcbiAgICAgICAgY29uc3QgZ3VhcmRhckJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBndWFyZGFyQnRuLnRleHRDb250ZW50ID0gJ0d1YXJkYXInO1xuICAgICAgICBndWFyZGFyQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFtuYW1lPVwiaGFiaXRvc1wiXTpjaGVja2VkJykpO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRIYWJpdHMgPSBjaGVja2JveGVzLm1hcChjaGVja2JveCA9PiBjaGVja2JveC52YWx1ZSk7XG4gICAgXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIGNhbXBvICdoYWJpdG9zJyBlbiBlbCBhcmNoaXZvIFlBTUwgdXNhbmRvIGVsIG1cdTAwRTl0b2RvIHVwZGF0ZVlBTUxGaWVsZHNcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlWUFNTEZpZWxkcyhmaWxlLnBhdGgsICdoYWJpdG9zJywgc2VsZWN0ZWRIYWJpdHMpO1xuICAgICAgICB9O1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbCBib3RcdTAwRjNuIGRlIGd1YXJkYXIgYWwgY29udGVuZWRvclxuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmRhckJ0bik7XG5cbiAgICAgICAgLy8gQWdyZWdhciBib3RcdTAwRjNuIGRlIHNhbGlyIHNpIG5lY2VzYXJpb1xuICAgICAgICBjb25zdCBib3RvblNhbGlyID0gdGhpcy5hZ3JlZ2FyQm90b25TYWxpcihkdik7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICB9XG4gICAgXG4gICAgLy8gTVx1MDBFOXRvZG8gYWRhcHRhZG8gcGFyYSBtb3N0cmFyQm90b25CYWxhbmNlUGVyc29uYWxcbiAgICBhc3luYyBtb3N0cmFyQm90b25SZWdpc3Ryb1RhcmVhcyhkdikge1xuICAgICAgICBcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgbGV0IGJvdG9uZXM7XG4gICAgICAgIGNvbnN0IHV0aWxzQVBJbnN0YW5jZSA9IG5ldyB1dGlsc0FQSSh0aGlzLnBsdWdpbik7XG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGF3YWl0IHV0aWxzQVBJbnN0YW5jZS5idXNjYXJSZWdpc3Ryb3NBY3Rpdm9zKGFwcClcbiAgICAgICAgaWYgKGFjdGl2byBpbnN0YW5jZW9mIFRGaWxlKXsgLy8gVmVyaWZpY2Egc2kgaGF5IGFsZ3VuIGFyY2hpdm8gYWN0aXZvIFxuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIiwgXCJDZXJyYXIgUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGJvdG9uZXMgPSBbXCJDZXJyYWRhcyBIb3lcIiwgXCJSZWdpc3Ryb3MgSG95XCIsIFwiTnVldm8gUmVnaXN0cm8gVGllbXBvXCJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXIgeSBtb3N0cmFyIGNhZGEgYm90XHUwMEYzblxuICAgICAgICBib3RvbmVzLmZvckVhY2godGV4dG9Cb3RvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgYm90b24udGV4dENvbnRlbnQgPSB0ZXh0b0JvdG9uO1xuICAgICAgICAgICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGV4dG9Cb3Rvbikge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYWRhcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyQ2VycmFkYXNIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1JlZ2lzdHJvcyBIb3knOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyUmVnaXN0cm9zSG95KGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdDZXJyYXIgUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhhY3Rpdm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ051ZXZvIFJlZ2lzdHJvIFRpZW1wbyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydGVyQVBJbnN0YW5jZSA9IG5ldyBzdGFydGVyQVBJKHRoaXMucGx1Z2luKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3RhcnRlckFQSW5zdGFuY2UuY3JlYXRlTm90ZShcIlJlZ2lzdHJvVGllbXBvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHt0ZXh0b0JvdG9ufSBwcmVzaW9uYWRvLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cblxuICAgIGFzeW5jIG1vc3RyYXJDZXJyYWRhc0hveShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2byA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgZmVjaGFBY3Rpdm8gPSBhY3Rpdm8/LmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXTtcbiAgICAgICAgY29uc3QgaG95ID0gbmV3IERhdGUoZmVjaGFBY3Rpdm8pLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgIFxuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgICAgIFxuICAgICAgICBsZXQgdGFyZWFzUHJvbWVzYXMgPSBmaWxlcy5tYXAoYXN5bmMgKGZpbGUpID0+IHtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGxldCB0YXJlYXNFeHRyYWlkYXMgPSBleHRyYWVyVGFyZWFzKGNvbnRlbmlkbyk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZnJvbnRNYXR0ZXIgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgY29uc3QgYWxpYXMgPSBmcm9udE1hdHRlcj8uYWxpYXNlcyA/IGZyb250TWF0dGVyLmFsaWFzZXNbMF0gOiBudWxsO1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBmaWxlLnBhdGg7XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWxlUGF0aCxcbiAgICAgICAgICAgICAgICBhbGlhcyxcbiAgICAgICAgICAgICAgICB0YXJlYXM6IHRhcmVhc0V4dHJhaWRhcy5maWx0ZXIodGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmVjaGFUYXJlYSA9IG5ldyBEYXRlKHRhcmVhLmNvbXBsZXRpb25EYXRlKS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmVhLmNvbXBsZXRlZCAmJiB0YXJlYS5jb21wbGV0aW9uRGF0ZSAmJiBmZWNoYVRhcmVhID09PSBob3k7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbGV0IHJlc3VsdGFkb3MgPSBhd2FpdCBQcm9taXNlLmFsbCh0YXJlYXNQcm9tZXNhcyk7XG4gICAgICAgIGxldCB0b3RhbFRhcmVhc0NlcnJhZGFzID0gcmVzdWx0YWRvcy5yZWR1Y2UoKHRvdGFsLCB7IHRhcmVhcyB9KSA9PiB0b3RhbCArIHRhcmVhcy5sZW5ndGgsIDApO1xuXG4gICAgICAgIC8vIE1lbnNhamUgc29icmUgZWwgZXN0YWRvIGRlIGxhcyB0YXJlYXMgY2VycmFkYXMgaG95XG4gICAgICAgIGlmICh0b3RhbFRhcmVhc0NlcnJhZGFzID4gMCkge1xuICAgICAgICAgICAgZHYuaGVhZGVyKDMsIGBIb3kgc2UgaGFuIGNlcnJhZG8gJHt0b3RhbFRhcmVhc0NlcnJhZGFzfSB0YXJlYXMuYCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAvLyBDcmVhciBsYSB0YWJsYSBIVE1MXG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTsgLy8gQWdyZWdhciB1bmEgY2xhc2UgcGFyYSBsYSB0YWJsYSBwYXJhIGVsIGVzdGlsb1xuICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZW5jYWJlemFkb3MgZGUgdGFibGFcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBbXCJOb3RhXCIsIFwiVGFyZWFzIENlcnJhZGFzXCJdO1xuICAgICAgICBoZWFkZXJzLmZvckVhY2goaGVhZGVyVGV4dCA9PiB7XG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgICAgIGhlYWRlci50ZXh0Q29udGVudCA9IGhlYWRlclRleHQ7XG4gICAgICAgICAgICBoZWFkZXIuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGZpbGFzIGRlIGRhdG9zIGEgbGEgdGFibGFcbiAgICAgICAgcmVzdWx0YWRvcy5mb3JFYWNoKCh7ZmlsZVBhdGgsIGFsaWFzLCB0YXJlYXN9KSA9PiB7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIGVubGFjZSBjZW50cmFkbyB2ZXJ0aWNhbG1lbnRlXG4gICAgICAgICAgICAgICAgbGV0IGxpbmtDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsaW5rQ2VsbC5zdHlsZS52ZXJ0aWNhbEFsaWduID0gJ21pZGRsZSc7XG4gICAgICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBgb2JzaWRpYW46Ly9vcGVuP3ZhdWx0PSR7YXBwLnZhdWx0LmdldE5hbWUoKX0mZmlsZT0ke2VuY29kZVVSSUNvbXBvbmVudChmaWxlUGF0aCl9YCk7XG4gICAgICAgICAgICAgICAgYS50ZXh0Q29udGVudCA9IGFsaWFzIHx8IGZpbGVQYXRoO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLmFwcGVuZENoaWxkKGEpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChsaW5rQ2VsbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQ29sdW1uYSBkZSB0YXJlYXMgY2VycmFkYXNcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsZXQgdGFza3NMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgICAgICB0YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgICAgIGxpLnRleHRDb250ZW50ID0gdGFyZWEudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgdGFza3NMaXN0LmFwcGVuZENoaWxkKGxpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0YXNrc0NlbGwuYXBwZW5kQ2hpbGQodGFza3NMaXN0KTtcbiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQodGFza3NDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbGEgdGFibGEgYWwgY29udGVuZWRvciBkZSBEYXRhdmlld1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGR2LnBhcmFncmFwaChcIk5vIGhheSB0YXJlYXMgY2VycmFkYXMgaG95LlwiKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIFxuICAgIGZ1bmN0aW9uIGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKSB7XG4gICAgICAgIGNvbnN0IHRhcmVhcyA9IFtdO1xuICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoXCJcXG5cIik7XG4gICAgXG4gICAgICAgIGZvciAoY29uc3QgbGluZWEgb2YgbGluZWFzKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYVJlZ2V4ID0gL15cXHMqLVxccypcXFsoeHxYfCApXFxdXFxzKiguKykkLztcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGFyZWFSZWdleC5leGVjKGxpbmVhKTtcbiAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRhZGEgPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpID09PSAneCc7XG4gICAgICAgICAgICAgICAgbGV0IHRleHRvVGFyZWEgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICBsZXQgZmVjaGFDb21wbGV0aXR1ZCA9IG51bGw7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFSZWdleCA9IC9cXFtjb21wbGV0aW9uOjogKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KVxcXS87XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFNYXRjaCA9IGZlY2hhUmVnZXguZXhlYyh0ZXh0b1RhcmVhKTtcbiAgICAgICAgICAgICAgICBpZiAoZmVjaGFNYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBmZWNoYUNvbXBsZXRpdHVkID0gZmVjaGFNYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9UYXJlYSA9IHRleHRvVGFyZWEucmVwbGFjZShmZWNoYVJlZ2V4LCAnJykudHJpbSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICB0YXJlYXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRvVGFyZWEsXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogY29tcGxldGFkYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbkRhdGU6IGZlY2hhQ29tcGxldGl0dWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHRhcmVhcztcbiAgICB9XG4gICAgXG4gICAgXG59XG5cblxuICAgIGFzeW5jIG1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpIHtcbiAgICAgICAgICAgLy8gT2J0ZW5lciBlbCBsZWFmIGFjdGl2byBhY3R1YWxcbiAgICAgICAgICAgY29uc3QgYWN0aXZlTGVhZiA9IGFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcblxuICAgICAgICAgICAvLyBPYnRlbmVyIGVsIHBhdGggZGVsIFRGaWxlIGFzb2NpYWRvIGNvbiBlbCBsZWFmIGFjdGl2bywgc2kgZXhpc3RlXG4gICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlUGF0aCA9IGFjdGl2ZUxlYWYudmlldz8uZmlsZT8ucGF0aDtcbiAgIFxuICAgICAgICAgICAvLyBDcmVhciB1bmEgbnVldmEgZGl2aXNpXHUwMEYzbiBhIGxhIGRlcmVjaGEgZGVsIGxlYWYgYWN0aXZvXG4gICAgICAgICAgIGNvbnN0IG5ld0xlYWYgPSBhd2FpdCBhcHAud29ya3NwYWNlLnNwbGl0QWN0aXZlTGVhZigndmVydGljYWwnKTtcbiAgIFxuICAgICAgICAgICAvLyBDb25maWd1cmFyIGVsIG51ZXZvIGxlYWYgcGFyYSBtb3N0cmFyIHR1IHZpc3RhIHBlcnNvbmFsaXphZGFcbiAgICAgICAgICAgLy8geSBwYXNhciBlbCBwYXRoIGRlbCBURmlsZSBjb21vIHBhcnRlIGRlbCBlc3RhZG9cbiAgICBcbiAgICAgICAgICAgYXdhaXQgbmV3TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgdHlwZTogXCJ2aXN0YS1yZWdpc3Ryby1kaWFyaW9cIixcbiAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgIGFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihuZXdMZWFmKTsgICAgXG59XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IGJ1dHRvblRleHQ7XG4gICAgICAgIGJ1dHRvbi50eXBlID0gJ2J1dHRvbic7IC8vIEFzZWdcdTAwRkFyYXRlIGRlIHF1ZSBubyBzZSBlbnZpYXJcdTAwRTEgdW4gZm9ybXVsYXJpbyBhbCBoYWNlciBjbGljIGVuIFx1MDBFOWxcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lvdXItYnV0dG9uLWNsYXNzJyk7IC8vIEFncmVnYSB1bmEgY2xhc2UgcGFyYSBlbCBlc3RpbG8gZGVsIGJvdFx1MDBGM24gc2kgZXMgbmVjZXNhcmlvXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkZSBlbCBldmVudG8gZGUgY2xpYyBhbCBib3RcdTAwRjNuXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tDYWxsYmFjayk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG4gICAgLy8gQ3JlYSBsYSBub3RhIGRlc2RlIGVsIHRlbXBsYXRlciBkZSBSZWdpc3Ryb1RpZW1wb1xuICAgIGFzeW5jIHJldG9tYXJUYXJlYShpZCkgeyBcbiAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcmVlbXBsYXphciAncnV0YS9hbC9hcmNoaXZvLm1kJyBjb24gbGEgcnV0YSBleGFjdGEgZGVsIGFyY2hpdm8gcXVlIGRlc2VhcyBvYnRlbmVyXG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGBQbGFudGlsbGFzLyR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9SZWdpc3Ryb1RpZW1wb2BdfS9QbHQgLSBSZWdpc3Ryb1RpZW1wby5tZGA7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG5cbiAgICAgICAgaWYgKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIC8vIEFob3JhICdmaWxlJyBlcyB0dSBhcmNoaXZvIGRlc2VhZG8sIHkgcHVlZGVzIHRyYWJhamFyIGNvbiBcdTAwRTlsIGNvbW8gbmVjZXNpdGVzXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gZW5jb250cmFkbzpcIiwgdGVtcGxhdGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2kgZWwgYXJjaGl2byBubyBzZSBlbmNvbnRyXHUwMEYzLCAnZmlsZScgc2VyXHUwMEUxIG51bGxcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBubyBlbmNvbnRyYWRvLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlbmFtZSA9IFwiUmV0b21hciBcIiArIGlkO1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gICAgICAgIGNvbnN0IHRwID0gdGhpcy5nZXRUcCgpO1xuICAgICAgICBsZXQgY3JlYXJOb3RhID0gdHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIilcbiAgICAgICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xuICAgICAgfVxuXG4gICAgZ2V0VHAoKXtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbiB8fCAhdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKCd0ZW1wbGF0ZXItb2JzaWRpYW4nKSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWwgcGx1Z2luIFRlbXBsYXRlciBubyBlc3RcdTAwRTEgaGFiaWxpdGFkby4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSAgIFxuICAgICAgICBsZXQgdHBHZW4gPSB0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5wbHVnaW5zW1widGVtcGxhdGVyLW9ic2lkaWFuXCJdLnRlbXBsYXRlcjtcbiAgICAgICAgdHBHZW4gPSB0cEdlbi5mdW5jdGlvbnNfZ2VuZXJhdG9yLmludGVybmFsX2Z1bmN0aW9ucy5tb2R1bGVzX2FycmF5O1xuICAgICAgICBsZXQgdHAgPSB7fVxuICAgICAgICAvLyBnZXQgYW4gaW5zdGFuY2Ugb2YgbW9kdWxlc1xuICAgICAgICB0cC5maWxlID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcImZpbGVcIik7XG4gICAgICAgIHRwLnN5c3RlbSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJzeXN0ZW1cIik7XG5cbiAgICAgICAgaWYgKCF0cC5maWxlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzZSBwdWRvIGFjY2VkZXIgYWwgb2JqZXRvIGRlIGZ1bmNpb25lcyBhY3R1YWxlcyBkZSBUZW1wbGF0ZXIuXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coJ3RwIGNvbiBwcm9waWVkYWRlcyBcImZpbGVcIiBzZSBoYSBjYXJnYWRvIHNhdGlzZmFjdG9yaWFtZW50ZScpO1xuICAgICAgICByZXR1cm4gdHA7XG4gICAgfVxuXG59XG4gICAgXG4iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJL21lbnVTZW1hbmFsQVBJLnRzXG4gKiBQYXRoOiAvc3JjL21vZHVsZXMvbm90ZUxpZmVjeWNsZU1hbmFnZXIvQVBJXG4gKiBDcmVhdGVkIERhdGU6IDIwMjQtMDQtMTUgMTU6Mzc6MDlcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDE3OjQ4OjU4XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cblxuaW1wb3J0IHtOb3RpY2UsIFRGaWxlfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7RGF0ZVRpbWUsIER1cmF0aW9ufSBmcm9tICdsdXhvbidcbmltcG9ydCB7IHN0YXJ0ZXJBUEkgfSBmcm9tICcuL3N0YXJ0ZXJBUEknO1xuaW1wb3J0IHsgdXRpbHNBUEkgfSBmcm9tICcuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvdXRpbHNBUEknO1xuaW1wb3J0IHsgVmlzdGFSZXN1bWVuU2VtYW5hbCB9IGZyb20gJy4uL3ZpZXdzL3Zpc3RhUmVzdW1lblNlbWFuYWwnO1xuXG5leHBvcnQgY2xhc3MgbWVudVNlbWFuYWxBUEkge1xuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7ICAvLyBHdWFyZGEgdW5hIHJlZmVyZW5jaWEgYSBsYSBhcGxpY2FjaVx1MDBGM24gT2JzaWRpYW4gcGFyYSBhY2NlZGVyIGEgc3VzIG1cdTAwRTl0b2RvcyB5IHByb3BpZWRhZGVzXG4gICAgICAgIC8vIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNyZWFyIHkgbW9zdHJhciBlbCBib3RcdTAwRjNuIGluaWNpYWwgXCJNZW5cdTAwRkEgaG95XCJcbiAgICBhc3luYyBtb3N0cmFyTWVudShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgICAgIGNvbnN0IGJvdG9uTWVudUhveSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbk1lbnVIb3kudGV4dENvbnRlbnQgPSAnTWVuXHUwMEZBIFNlbWFuYWwnO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25NZW51SG95KTtcblxuICAgICAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckJvdG9uZXMoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBtb2RpZmljYWRvIHBhcmEgYWRhcHRhcnNlIGFsIGNvbnRleHRvIGRlbCBwbHVnaW5cbiAgICBhc3luYyBtb3N0cmFyQm90b25lcyhkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBwYXJhIHJlbW92ZXIgZWwgYm90XHUwMEYzbiBkZSBtZW5cdTAwRkFcblxuICAgICAgICBjb25zdCBib3RvbmVzID0gW1xuICAgICAgICAgICAgXCJSZXN1bWVuIGRpYXJpb1wiLCBcIkFncmFkZWNpbWllbnRvc1wiLCBcIkNyZWFkYXNcIiwgXCJNb2RpZmljYWRhc1wiLCBcInggRmVjaGFcIiwgXCJUYXJlYXMgQ2VycmFkYXNcIlxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIENyZWFyIHkgbW9zdHJhciBjYWRhIGJvdFx1MDBGM25cbiAgICAgICAgYm90b25lcy5mb3JFYWNoKHRleHRvQm90b24gPT4ge1xuICAgICAgICAgICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIGJvdG9uLnRleHRDb250ZW50ID0gdGV4dG9Cb3RvbjtcbiAgICAgICAgICAgIGJvdG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoKHRleHRvQm90b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVzdW1lbiBkaWFyaW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3N0cmFyUmVzdW1lbkRpYXJpbyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQWdyYWRlY2ltaWVudG9zJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhckFncmFkZWNpbWllbnRvcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ3JlYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJDcmVhZGFzKGR2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdNb2RpZmljYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJNb2RpZmljYWRhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneCBGZWNoYSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJ4RmVjaGEoZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RhcmVhcyBDZXJyYWRhcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJUYXJlYXNDZXJyYWRhcyhkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBhZ3JlZ2FyIGVsIGJvdFx1MDBGM24gZGUgcmVjYXJnYSB5IHN1IGxcdTAwRjNnaWNhIChFamVtcGxvIGFkYXB0YWRvKVxuICAgIGFncmVnYXJCb3RvblNhbGlyKGR2KSB7XG4gICAgICAgIGNvbnN0IGJvdG9uUmVjYXJnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3RvblJlY2FyZ2EudGV4dENvbnRlbnQgPSAnU2FsaXInO1xuICAgICAgICBib3RvblJlY2FyZ2Eub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW9zdHJhck1lbnUoZHYpOyAvLyBSZXN0YWJsZWNlciBhIGxhIHZpc3RhIGRlbCBib3RcdTAwRjNuIGRlIG1lblx1MDBGQSBpbmljaWFsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBib3RvblJlY2FyZ2E7XG4gICAgfVxuXG4gICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgYWN0dWFsaXphciBjYW1wb3MgWUFNTFxuICAgICBhc3luYyB1cGRhdGVZQU1MRmllbGRzKGZpbGVQYXRoLCBZQU1MZmllbGQsIHZhbG9yKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBSdXRhIGFsIGFyY2hpdm8gcXVlIHNlIHZhIGEgbW9kaWZpY2FyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gTGVlciB5IGFjdHVhbGl6YXIgZWwgZnJvbnRtYXR0ZXIgdXNhbmRvIHByb2Nlc3NGcm9udE1hdHRlclxuICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgZnJvbnRtYXR0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIGVsIHZhbG9yIGRlbCBjYW1wbyBlc3BlY2lmaWNhZG9cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZyb250bWF0dGVyW1lBTUxmaWVsZF0gPSB2YWxvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvLyBPcGNpb25hbDogTm90aWZpY2FyIGFsIHVzdWFyaW8gcXVlIGxhIGFjdHVhbGl6YWNpXHUwMEYzbiBmdWUgZXhpdG9zYVxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1lBTUwgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWwgYWN0dWFsaXphciBlbCBmcm9udG1hdHRlclwiLCBlcnIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkFyY2hpdm8gbm8gZW5jb250cmFkb1wiLCBlcnIpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgYWN0dWFsaXphciBlbCBZQU1MLicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgbW9zdHJhclJlc3VtZW5EaWFyaW8oZHYpe1xuICAgICAgICBkZWJ1Z2dlcjtcblxuICAgICAgICAvLyBPYnRlbmVyIGVsIGxlYWYgYWN0aXZvIGFjdHVhbFxuICAgICAgICBjb25zdCBhY3RpdmVMZWFmID0gYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuXG4gICAgICAgIC8vIE9idGVuZXIgZWwgcGF0aCBkZWwgVEZpbGUgYXNvY2lhZG8gY29uIGVsIGxlYWYgYWN0aXZvLCBzaSBleGlzdGVcbiAgICAgICAgY29uc3QgY3VycmVudEZpbGVQYXRoID0gYWN0aXZlTGVhZi52aWV3Py5maWxlPy5wYXRoO1xuXG4gICAgICAgIC8vIENyZWFyIHVuYSBudWV2YSBkaXZpc2lcdTAwRjNuIGEgbGEgZGVyZWNoYSBkZWwgbGVhZiBhY3Rpdm9cbiAgICAgICAgY29uc3QgbmV3TGVhZiA9IGF3YWl0IGFwcC53b3Jrc3BhY2Uuc3BsaXRBY3RpdmVMZWFmKCd2ZXJ0aWNhbCcpO1xuXG4gICAgICAgIC8vIENvbmZpZ3VyYXIgZWwgbnVldm8gbGVhZiBwYXJhIG1vc3RyYXIgdHUgdmlzdGEgcGVyc29uYWxpemFkYVxuICAgICAgICAvLyB5IHBhc2FyIGVsIHBhdGggZGVsIFRGaWxlIGNvbW8gcGFydGUgZGVsIGVzdGFkb1xuIFxuICAgICAgICBhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICB0eXBlOiBcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiLFxuICAgICAgICB9KTtcbiBcbiAgICAgICAgYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKG5ld0xlYWYpO1xuICAgIH1cbiAgICBcblxuXG5cbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbChkdikge1xuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgIFxuICAgICAgICAvLyBNZW5zYWplIGluaWNpYWxcbiAgICAgICAgY29uc3QgbWVuc2FqZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgICAgIG1lbnNhamUudGV4dENvbnRlbnQgPSAnRXZhbFx1MDBGQWEgZWwgYmFsYW5jZSBkZSB0dSB2aWRhIGhveSc7XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChtZW5zYWplKTtcbiAgICBcbiAgICAgICAgY29uc3QgaW5zdHJ1Y2Npb25lcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICAgICAgaW5zdHJ1Y2Npb25lcy50ZXh0Q29udGVudCA9ICdFdmFsXHUwMEZBYSBkZSAxIGEgNSBjYWRhIFx1MDBFMXJlYTonO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoaW5zdHJ1Y2Npb25lcyk7XG4gICAgXG4gICAgICAgIC8vIFx1MDBDMXJlYXMgYSBldmFsdWFyXG4gICAgICAgIGNvbnN0IGFyZWFzID0gW1xuICAgICAgICAgICAgXCJQcm9kdWN0aXZpZGFkXCIsIFwiRXNwaXJpdHVhbFwiLCBcIlNhbHVkXCIsIFwiUnV0aW5hc1wiLFxuICAgICAgICAgICAgXCJWaWRhIFNvY2lhbFwiLCBcIkZhbWlsaWFyXCIsIFwiQXByZW5kaXphamVzXCIsIFwiQ3JlYXRpdmlkYWRcIlxuICAgICAgICBdO1xuICAgIFxuICAgICAgICAvLyBPYnRlbmVyIGVsIGFyY2hpdm8gYWN0dWFsIHkgc3UgbWV0YWRhdGFcbiAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBsZXQgbWV0YWRhdGE7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgIG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhciBpbnB1dCByYW5nZSBwYXJhIGNhZGEgXHUwMEUxcmVhXG4gICAgICAgIGFyZWFzLmZvckVhY2goYXJlYSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRWYWwgPSBtZXRhZGF0YSAmJiBtZXRhZGF0YVtzYWZlTmFtZV0gPyBtZXRhZGF0YVtzYWZlTmFtZV0gOiAwO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgY29udGVuZWRvckFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmNsYXNzTGlzdC5hZGQoJ2FyZWEtZXZhbHVhY2lvbicpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpO1xuICAgICAgICAgICAgbGFiZWwudGV4dENvbnRlbnQgPSBhcmVhICsgJzogJztcbiAgICAgICAgICAgIGxhYmVsLmh0bWxGb3IgPSBzYWZlTmFtZTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIGlucHV0LnR5cGUgPSAncmFuZ2UnO1xuICAgICAgICAgICAgaW5wdXQuaWQgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm5hbWUgPSBzYWZlTmFtZTtcbiAgICAgICAgICAgIGlucHV0Lm1pbiA9ICcxJztcbiAgICAgICAgICAgIGlucHV0Lm1heCA9ICc1JztcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gY3VycmVudFZhbC50b1N0cmluZygpOyAvLyBVc2FyIHZhbG9yIGFjdHVhbCBvIDBcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHZhbG9yTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIE1vc3RyYXIgZWwgdmFsb3IgYWN0dWFsIGFsIGxhZG9cbiAgICBcbiAgICAgICAgICAgIGlucHV0Lm9uaW5wdXQgPSAoKSA9PiB2YWxvckxhYmVsLnRleHRDb250ZW50ID0gaW5wdXQudmFsdWU7IC8vIEFjdHVhbGl6YXIgZWwgdmFsb3IgbW9zdHJhZG8gYWwgbW92ZXIgZWwgcmFuZ2VcbiAgICBcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGxhYmVsKTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnRlbmVkb3JBcmVhLmFwcGVuZENoaWxkKHZhbG9yTGFiZWwpO1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRlbmVkb3JBcmVhKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBndWFyZGFyIGxvcyB2YWxvcmVzXG4gICAgICAgIGNvbnN0IGJvdG9uR3VhcmRhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBib3Rvbkd1YXJkYXIudGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGJvdG9uR3VhcmRhci5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgYXJlYSBvZiBhcmVhcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYWZlTmFtZSA9IGFyZWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8gL2csICdfJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNhZmVOYW1lKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxvciA9IHBhcnNlSW50KGlucHV0RWxlbWVudC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVlBTUxGaWVsZHMoZmlsZS5wYXRoLCBzYWZlTmFtZSwgdmFsb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdCYWxhbmNlcyBhY3R1YWxpemFkb3MgY29uIFx1MDBFOXhpdG8uJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIHNlIHB1ZG8gb2J0ZW5lciBlbCBhcmNoaXZvIGFjdHVhbC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uR3VhcmRhcik7XG4gICAgXG4gICAgICAgIC8vIEFncmVnYXIgYm90XHUwMEYzbiBkZSBzYWxpciBzaSBuZWNlc2FyaW9cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG5cbiAgICBhc3luYyBtb3N0cmFyRm9ybXVsYXJpb0hhYml0b3MoZHYpIHtcbiAgICAgICAgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGhhYml0b3MgPSBbXG4gICAgICAgICAgICBcIkNsdWIgNWFtXCIsXG4gICAgICAgICAgICBcIlJlZ2lzdHJvIEFrXHUwMEUxc2hpa29cIixcbiAgICAgICAgICAgIFwiR2ltbmFzaW9cIixcbiAgICAgICAgICAgIFwiQ29tZXIgU2FsdWRhYmxlXCIsXG4gICAgICAgICAgICBcIkxlZXIgbGlicm9cIixcbiAgICAgICAgICAgIFwiRXNjcmliaXIgYml0XHUwMEUxY29yYSBlbCBtaXNtbyBkXHUwMEVEYVwiLFxuICAgICAgICAgICAgXCJDcmVhciBwbGFuIGRcdTAwRURhIHNpZ3VpZW50ZVwiLFxuICAgICAgICAgICAgXCJNZSBmdVx1MDBFRCBhIGRvcm1pciBhbnRlcyBkZSBsYXMgMTA6MzBwbVwiXG4gICAgICAgIF07XG4gICAgXG4gICAgICAgIC8vIEZ1bmNpXHUwMEYzbiBwYXJhIGNhcmdhciB5IG1hcmNhciBjaGVja2JveGVzIHNlbGVjY2lvbmFkb3MgcHJldmlhbWVudGVcbiAgICAgICAgY29uc3QgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgICAgICAvLyBMZWVyIGVsIGFyY2hpdm8gcGFyYSBvYnRlbmVyIGVsIGNhbXBvICdoYWJpdG9zJyBkZWwgWUFNTFxuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGZyb250TWF0dGVyID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGFiaXRzID0gZnJvbnRNYXR0ZXI/LmhhYml0b3MgfHwgW107XG4gICAgXG4gICAgICAgICAgICBoYWJpdG9zLmZvckVhY2goaGFiaXRvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgY2hlY2tib3gudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guaWQgPSBoYWJpdG87XG4gICAgICAgICAgICAgICAgY2hlY2tib3gubmFtZSA9ICdoYWJpdG9zJztcbiAgICAgICAgICAgICAgICBjaGVja2JveC52YWx1ZSA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBjaGVja2JveC5jaGVja2VkID0gZXhpc3RpbmdIYWJpdHMuaW5jbHVkZXMoaGFiaXRvKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgbGFiZWwuaHRtbEZvciA9IGhhYml0bztcbiAgICAgICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGhhYml0bztcbiAgICBcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hlY2tib3gpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgXG4gICAgICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICBcbiAgICAgICAgYXdhaXQgY2FyZ2FyQ2hlY2tib3hlc1NlbGVjY2lvbmFkb3MoKTtcbiAgICBcbiAgICAgICAgLy8gQ3JlYXIgeSBjb25maWd1cmFyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhclxuICAgICAgICBjb25zdCBndWFyZGFyQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGd1YXJkYXJCdG4udGV4dENvbnRlbnQgPSAnR3VhcmRhcic7XG4gICAgICAgIGd1YXJkYXJCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W25hbWU9XCJoYWJpdG9zXCJdOmNoZWNrZWQnKSk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEhhYml0cyA9IGNoZWNrYm94ZXMubWFwKGNoZWNrYm94ID0+IGNoZWNrYm94LnZhbHVlKTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gJ2hhYml0b3MnIGVuIGVsIGFyY2hpdm8gWUFNTCB1c2FuZG8gZWwgbVx1MDBFOXRvZG8gdXBkYXRlWUFNTEZpZWxkc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVZQU1MRmllbGRzKGZpbGUucGF0aCwgJ2hhYml0b3MnLCBzZWxlY3RlZEhhYml0cyk7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGVsIGJvdFx1MDBGM24gZGUgZ3VhcmRhciBhbCBjb250ZW5lZG9yXG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChndWFyZGFyQnRuKTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIGJvdFx1MDBGM24gZGUgc2FsaXIgc2kgbmVjZXNhcmlvXG4gICAgICAgIGNvbnN0IGJvdG9uU2FsaXIgPSB0aGlzLmFncmVnYXJCb3RvblNhbGlyKGR2KTtcbiAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uU2FsaXIpO1xuICAgIH1cbiAgICBcbiAgICAvLyBNXHUwMEU5dG9kbyBhZGFwdGFkbyBwYXJhIG1vc3RyYXJCb3RvbkJhbGFuY2VQZXJzb25hbFxuICAgIGFzeW5jIG1vc3RyYXJCb3RvblJlZ2lzdHJvVGFyZWFzKGR2KSB7XG4gICAgICAgIFxuICAgICAgICAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xuICAgICAgICBsZXQgYm90b25lcztcbiAgICAgICAgY29uc3QgdXRpbHNBUEluc3RhbmNlID0gbmV3IHV0aWxzQVBJKHRoaXMucGx1Z2luKTtcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXdhaXQgdXRpbHNBUEluc3RhbmNlLmJ1c2NhclJlZ2lzdHJvc0FjdGl2b3MoYXBwKVxuICAgICAgICBpZiAoYWN0aXZvIGluc3RhbmNlb2YgVEZpbGUpeyAvLyBWZXJpZmljYSBzaSBoYXkgYWxndW4gYXJjaGl2byBhY3Rpdm8gXG4gICAgICAgICAgICBib3RvbmVzID0gW1wiQ2VycmFkYXMgSG95XCIsIFwiUmVnaXN0cm9zIEhveVwiLCBcIk51ZXZvIFJlZ2lzdHJvIFRpZW1wb1wiLCBcIkNlcnJhciBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYm90b25lcyA9IFtcIkNlcnJhZGFzIEhveVwiLCBcIlJlZ2lzdHJvcyBIb3lcIiwgXCJOdWV2byBSZWdpc3RybyBUaWVtcG9cIl07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhciB5IG1vc3RyYXIgY2FkYSBib3RcdTAwRjNuXG4gICAgICAgIGJvdG9uZXMuZm9yRWFjaCh0ZXh0b0JvdG9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvdG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBib3Rvbi50ZXh0Q29udGVudCA9IHRleHRvQm90b247XG4gICAgICAgICAgICBib3Rvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHN3aXRjaCh0ZXh0b0JvdG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhZGFzIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJDZXJyYWRhc0hveShkdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnUmVnaXN0cm9zIEhveSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1vc3RyYXJSZWdpc3Ryb3NIb3koZHYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NlcnJhciBSZWdpc3RybyBUaWVtcG8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZ2lzdHJvVGllbXBvQVBJLmNlcnJhclJlZ2lzdHJvKGFjdGl2byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTnVldm8gUmVnaXN0cm8gVGllbXBvJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0ZXJBUEluc3RhbmNlID0gbmV3IHN0YXJ0ZXJBUEkodGhpcy5wbHVnaW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzdGFydGVyQVBJbnN0YW5jZS5jcmVhdGVOb3RlKFwiUmVnaXN0cm9UaWVtcG9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAke3RleHRvQm90b259IHByZXNpb25hZG8uYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgfVxuXG4gICAgYXN5bmMgbW9zdHJhckNlcnJhZGFzSG95KGR2KSB7XG4gICAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICBcbiAgICAgICAgY29uc3QgYWN0aXZvID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGxldCBmZWNoYUFjdGl2byA9IGFjdGl2bz8uYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdO1xuICAgICAgICBjb25zdCBob3kgPSBuZXcgRGF0ZShmZWNoYUFjdGl2bykuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgXG4gICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCB0YXJlYXNQcm9tZXNhcyA9IGZpbGVzLm1hcChhc3luYyAoZmlsZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgbGV0IHRhcmVhc0V4dHJhaWRhcyA9IGV4dHJhZXJUYXJlYXMoY29udGVuaWRvKTtcbiAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBmcm9udE1hdHRlciA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBjb25zdCBhbGlhcyA9IGZyb250TWF0dGVyPy5hbGlhc2VzID8gZnJvbnRNYXR0ZXIuYWxpYXNlc1swXSA6IG51bGw7XG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGUucGF0aDtcbiAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxuICAgICAgICAgICAgICAgIGFsaWFzLFxuICAgICAgICAgICAgICAgIHRhcmVhczogdGFyZWFzRXh0cmFpZGFzLmZpbHRlcih0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWNoYVRhcmVhID0gbmV3IERhdGUodGFyZWEuY29tcGxldGlvbkRhdGUpLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZWEuY29tcGxldGVkICYmIHRhcmVhLmNvbXBsZXRpb25EYXRlICYmIGZlY2hhVGFyZWEgPT09IGhveTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBsZXQgcmVzdWx0YWRvcyA9IGF3YWl0IFByb21pc2UuYWxsKHRhcmVhc1Byb21lc2FzKTtcbiAgICAgICAgbGV0IHRvdGFsVGFyZWFzQ2VycmFkYXMgPSByZXN1bHRhZG9zLnJlZHVjZSgodG90YWwsIHsgdGFyZWFzIH0pID0+IHRvdGFsICsgdGFyZWFzLmxlbmd0aCwgMCk7XG5cbiAgICAgICAgLy8gTWVuc2FqZSBzb2JyZSBlbCBlc3RhZG8gZGUgbGFzIHRhcmVhcyBjZXJyYWRhcyBob3lcbiAgICAgICAgaWYgKHRvdGFsVGFyZWFzQ2VycmFkYXMgPiAwKSB7XG4gICAgICAgICAgICBkdi5oZWFkZXIoMywgYEhveSBzZSBoYW4gY2VycmFkbyAke3RvdGFsVGFyZWFzQ2VycmFkYXN9IHRhcmVhcy5gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgIC8vIENyZWFyIGxhIHRhYmxhIEhUTUxcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpOyAvLyBBZ3JlZ2FyIHVuYSBjbGFzZSBwYXJhIGxhIHRhYmxhIHBhcmEgZWwgZXN0aWxvXG4gICAgICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBlbmNhYmV6YWRvcyBkZSB0YWJsYVxuICAgICAgICBjb25zdCBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBsZXQgaGVhZGVycyA9IFtcIk5vdGFcIiwgXCJUYXJlYXMgQ2VycmFkYXNcIl07XG4gICAgICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXJUZXh0ID0+IHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpO1xuICAgICAgICAgICAgaGVhZGVyLnRleHRDb250ZW50ID0gaGVhZGVyVGV4dDtcbiAgICAgICAgICAgIGhlYWRlci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICBcbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgZmlsYXMgZGUgZGF0b3MgYSBsYSB0YWJsYVxuICAgICAgICByZXN1bHRhZG9zLmZvckVhY2goKHtmaWxlUGF0aCwgYWxpYXMsIHRhcmVhc30pID0+IHtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgIFxuICAgICAgICAgICAgICAgIC8vIENvbHVtbmEgZGUgZW5sYWNlIGNlbnRyYWRvIHZlcnRpY2FsbWVudGVcbiAgICAgICAgICAgICAgICBsZXQgbGlua0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxpbmtDZWxsLnN0eWxlLnZlcnRpY2FsQWxpZ24gPSAnbWlkZGxlJztcbiAgICAgICAgICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgICAgICBhLnNldEF0dHJpYnV0ZSgnaHJlZicsIGBvYnNpZGlhbjovL29wZW4/dmF1bHQ9JHthcHAudmF1bHQuZ2V0TmFtZSgpfSZmaWxlPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGZpbGVQYXRoKX1gKTtcbiAgICAgICAgICAgICAgICBhLnRleHRDb250ZW50ID0gYWxpYXMgfHwgZmlsZVBhdGg7XG4gICAgICAgICAgICAgICAgbGlua0NlbGwuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGxpbmtDZWxsKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBDb2x1bW5hIGRlIHRhcmVhcyBjZXJyYWRhc1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0NlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxldCB0YXNrc0xpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAgICAgICAgIHRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICAgICAgbGkudGV4dENvbnRlbnQgPSB0YXJlYS50ZXh0O1xuICAgICAgICAgICAgICAgICAgICB0YXNrc0xpc3QuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRhc2tzQ2VsbC5hcHBlbmRDaGlsZCh0YXNrc0xpc3QpO1xuICAgICAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0YXNrc0NlbGwpO1xuICAgIFxuICAgICAgICAgICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBsYSB0YWJsYSBhbCBjb250ZW5lZG9yIGRlIERhdGF2aWV3XG4gICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHYucGFyYWdyYXBoKFwiTm8gaGF5IHRhcmVhcyBjZXJyYWRhcyBob3kuXCIpO1xuICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25TYWxpcik7XG4gICAgXG4gICAgZnVuY3Rpb24gZXh0cmFlclRhcmVhcyhjb250ZW5pZG8pIHtcbiAgICAgICAgY29uc3QgdGFyZWFzID0gW107XG4gICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdChcIlxcblwiKTtcbiAgICBcbiAgICAgICAgZm9yIChjb25zdCBsaW5lYSBvZiBsaW5lYXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhUmVnZXggPSAvXlxccyotXFxzKlxcWyh4fFh8IClcXF1cXHMqKC4rKSQvO1xuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0YXJlYVJlZ2V4LmV4ZWMobGluZWEpO1xuICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29tcGxldGFkYSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgPT09ICd4JztcbiAgICAgICAgICAgICAgICBsZXQgdGV4dG9UYXJlYSA9IG1hdGNoWzJdO1xuICAgICAgICAgICAgICAgIGxldCBmZWNoYUNvbXBsZXRpdHVkID0gbnVsbDtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVJlZ2V4ID0gL1xcW2NvbXBsZXRpb246OiAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pXFxdLztcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU1hdGNoID0gZmVjaGFSZWdleC5leGVjKHRleHRvVGFyZWEpO1xuICAgICAgICAgICAgICAgIGlmIChmZWNoYU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlY2hhQ29tcGxldGl0dWQgPSBmZWNoYU1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0b1RhcmVhID0gdGV4dG9UYXJlYS5yZXBsYWNlKGZlY2hhUmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHRhcmVhcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dG9UYXJlYSxcbiAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiBjb21wbGV0YWRhLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uRGF0ZTogZmVjaGFDb21wbGV0aXR1ZCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZXR1cm4gdGFyZWFzO1xuICAgIH1cbiAgICBcbiAgICBcbn1cblxuXG4gICAgYXN5bmMgbW9zdHJhclJlZ2lzdHJvc0hveShkdikge1xuICAgICAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvciBkZSBEYXRhdmlld1xuICAgICAgICBcbiAgICAgICAgLy8gT2J0XHUwMEU5biBsYSBmZWNoYSBhY3R1YWwgYmFzYWRhIGVuIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBmZWNoYUhveSA9IERhdGVUaW1lLmZyb21Gb3JtYXQoYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkuYmFzZW5hbWUuc3BsaXQoXCIgXCIpWzBdLCAneXl5eS1NTS1kZCcsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgIFxuICAgICAgICAvLyBFbmN1ZW50cmEgYXJjaGl2b3MgcXVlIGNvbnRpZW5lbiByZWdpc3Ryb3MgZGUgdGllbXBvXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wb1xuICAgICAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlcikpO1xuXG4gICAgICAgIC8vIExlZSB5IHByb2Nlc2EgZWwgY29udGVuaWRvIGRlIGNhZGEgYXJjaGl2byBwYXJhIGV4dHJhZXIgcmVnaXN0cm9zIGRlIHRpZW1wb1xuICAgICAgICBsZXQgdG90YWxEaWEgPSAwO1xuICAgICAgICBsZXQgcmVnaXN0cm9zSG95ID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgIGxldCBob3JhSW5pY2lvID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChtZXRhZGF0YS5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRPZkRheSA9IGhvcmFJbmljaW8uc3RhcnRPZignZGF5Jyk7XG4gICAgXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0T2ZEYXkudHMgPT09IGZlY2hhSG95LnN0YXJ0T2YoJ2RheScpLnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0hveS5wdXNoKHtwYXRoOiBmaWxlLnBhdGgsIGZyb250bWF0dGVyIDogbWV0YWRhdGF9KTsgLy8gQ29ycmVnaWRvIHBhcmEgYWdyZWdhciBlbCBvYmpldG8gYXJjaGl2byBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgY29udmVydGlyIHRpZW1wb1RyYWJhamFkbyBhIG5cdTAwRkFtZXJvIGFudGVzIGRlIHN1bWFyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRGlhICs9IG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbyA/IHBhcnNlSW50KG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbykgOiAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNb3N0cmFyIGVsIHRvdGFsIGRlIHRpZW1wbyB0cmFiYWphZG8gaG95XG4gICAgICAgIGR2LmhlYWRlcigzLCBcIlRpZW1wbyByZWdpc3RyYWRvIGhveTogXCIgKyBEdXJhdGlvbi5mcm9tTWlsbGlzKHRvdGFsRGlhKS50b0Zvcm1hdCgnaGg6bW06c3MnKSk7XG5cblxuICAgICAgICAgICAgLy8gT3JkZW5hIGxvcyByZWdpc3Ryb3MgcG9yIGhvcmEgZGUgaW5pY2lvIGFudGVzIGRlIGdlbmVyYXIgbGEgdGFibGFcbiAgICAgICAgcmVnaXN0cm9zSG95LnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZlcmlmaWNhIHNpIGhvcmFJbmljaW8gZXN0XHUwMEUxIHByZXNlbnRlIHkgZXMgdW5hIGNhZGVuYSB2XHUwMEUxbGlkYSBwYXJhIGFtYm9zIG9iamV0b3NcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbyA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGIuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbGxpc0EgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGEuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvTWlsbGlzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtaWxsaXNCID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChiLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b01pbGxpcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pbGxpc0IgLSBtaWxsaXNBO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcGFyc2luZyBkYXRlczpcIiwgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1hbmVqbyBkZSBjYXNvcyBkb25kZSBsb3MgZGF0b3Mgbm8gc2VhbiBzdHJpbmdzIHZcdTAwRTFsaWRvc1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0ludmFsaWQgZGF0ZSBmb3JtYXQgZm9yIHNvcnRpbmc6JywgYS5ob3JhSW5pY2lvLCBiLmhvcmFJbmljaW8pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbmlmIChyZWdpc3Ryb3NIb3kubGVuZ3RoPjApe1xuLy8gQ3JlYSBsYSB0YWJsYSBIVE1MXG5jb25zdCB0YWJsZSA9IGR2LmNvbnRhaW5lci5jcmVhdGVFbCgndGFibGUnLCB7Y2xzOiAnZGF0YXZpZXcgdGFibGUnfSk7XG50YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuLy8gQ3JlYSB5IGFcdTAwRjFhZGUgbG9zIGVuY2FiZXphZG9zIGRlIGxhIHRhYmxhXG5jb25zdCBoZWFkZXIgPSBkdi5lbCgndHInLCAnJywgdGFibGUpO1xuW1wiUmVnaXN0cm9cIiwgXCJEZXNjcmlwY2lcdTAwRjNuXCIsIFwiSG9yYSBJbmljaW9cIiwgXCJUaWVtcG9cIiwgXCJFc3RhZG9cIiwgXCJJZFwiLCBcIkFjY2lcdTAwRjNuXCJdLmZvckVhY2godGV4dCA9PiBkdi5lbCgndGgnLCB0ZXh0LCBoZWFkZXIpKTtcblxuLy8gQ3JlYSB5IGFcdTAwRjFhZGUgY2FkYSBmaWxhIGRlIHJlZ2lzdHJvIGEgbGEgdGFibGFcbnJlZ2lzdHJvc0hveS5mb3JFYWNoKHJlZ2lzdHJvID0+IHtcbiAgICBjb25zdCByb3cgPSBkdi5lbCgndHInLCcnLHRhYmxlKVxuICAgIGR2LmVsKCd0ZCcsIGR2LmZ1bmMubGluayhyZWdpc3Ryby5wYXRoLHJlZ2lzdHJvLmZyb250bWF0dGVyLmFsaWFzZXNbMF0pLCByb3cpO1xuICAgICAvLyBBXHUwMEYxYWRlIGxhIGNlbGRhIGRlIGRlc2NyaXBjaVx1MDBGM24geSB0XHUwMEVEdHVsb1xuICAgIGR2LmVsKCd0ZCcsIHJlZ2lzdHJvLmZyb250bWF0dGVyLmRlc2NyaXBjaW9uID8gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuZGVzY3JpcGNpb24gOiAnU2luIGRlc2NyaXBjaVx1MDBGM24nLCByb3cpO1xuICAgIGR2LmVsKCd0ZCcsIERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKSArXG4gICAgXCIgLyBcIiArIERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUZpbmFsLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSkudG9Gb3JtYXQoJ2g6bW0gYScpLCByb3cpO1xuICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpe1xuICAgIC8vIFNlcGFyYW1vcyBsYSBmZWNoYSB5IGxhIGhvcmEsIHkgZWxpbWluYW1vcyBlbCBkXHUwMEVEYSBkZSBsYSBzZW1hbmFcbiAgICBsZXQgcGFydGVzID0gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpby5zcGxpdCgnICcpO1xuICAgIC8vIFJlb3JnYW5pemFtb3MgbGFzIHBhcnRlcyBwYXJhIGZvcm1hciB1bmEgZmVjaGEgZW4gZm9ybWF0byBcIllZWVktTU0tRERUSEg6bW1cIlxuICAgIGxldCBmZWNoYUhvcmFJU08gPSBgJHtwYXJ0ZXNbMF19VCR7cGFydGVzWzJdfWA7XG4gICAgLy8gUGFyc2VhbW9zIGxhIGZlY2hhIGVuIGZvcm1hdG8gSVNPXG4gICAgbGV0IGluaWNpbyA9IERhdGUucGFyc2UoZmVjaGFIb3JhSVNPKTtcbiAgICBsZXQgYWhvcmEgPSBEYXRlLm5vdygpO1xuICAgIGxldCBkaWZlcmVuY2lhID0gYWhvcmEgLSBpbmljaW87IC8vIERpZmVyZW5jaWEgZW4gbWlsaXNlZ3VuZG9zXG4gICAgZHYuZWwoJ3RkJywgRHVyYXRpb24uZnJvbU1pbGxpcyhkaWZlcmVuY2lhKS50b0Zvcm1hdCgnaDptbScpLCByb3cpXG4gICAgfWVsc2V7XG4gICAgZHYuZWwoJ3RkJywgRHVyYXRpb24uZnJvbU1pbGxpcyhyZWdpc3Ryby5mcm9udG1hdHRlci50aWVtcG9UcmFiYWphZG8pLnRvRm9ybWF0KCdoOm1tJyksIHJvdyk7XG4gICAgfVxuICAgIGR2LmVsKCd0ZCcsIHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbywgcm93KTtcbiAgICBkdi5lbCgndGQnLCByZWdpc3Ryby5mcm9udG1hdHRlci5pZCwgcm93KTtcbiAgICBpZiAocmVnaXN0cm8uZnJvbnRtYXR0ZXIuZXN0YWRvID09PSBcIlx1RDgzRFx1REZFMlwiKXtcbiAgICAgICAgZHYuZWwoJ3RkJywgdGhpcy5jcmVhdGVCdXR0b25UYWJsZSgnQ2VycmFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBkZWJ1Z2dlclxuICAgICAgICAvLyBMXHUwMEYzZ2ljYSBxdWUgbWFuZWphclx1MDBFMSBlbCBjbGljIGRlbCBib3RcdTAwRjNuLlxuICAgICAgICAvLyBQb3IgZWplbXBsbywgcmV0b21hciBsYSB0YXJlYSByZXByZXNlbnRhZGEgcG9yIGByZWdpc3Ryb2BcbiAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIC8vdGhpcy5jZXJyYXJUYXJlYShyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIH0pLCByb3cpO1xuICAgIH1lbHNle1xuICAgIGR2LmVsKCd0ZCcsIHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ1JldG9tYXInLCAoKSA9PiB7XG4gICAgICAgIC8vIExcdTAwRjNnaWNhIHF1ZSBtYW5lamFyXHUwMEUxIGVsIGNsaWMgZGVsIGJvdFx1MDBGM24uXG4gICAgICAgIC8vIFBvciBlamVtcGxvLCByZXRvbWFyIGxhIHRhcmVhIHJlcHJlc2VudGFkYSBwb3IgYHJlZ2lzdHJvYFxuICAgICAgICB0aGlzLnJldG9tYXJUYXJlYShyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgIH0pLCByb3cpO1xuICAgIH1cbiAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgYm90b25TYWxpciA9IHRoaXMuYWdyZWdhckJvdG9uU2FsaXIoZHYpO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvblNhbGlyKTtcbiAgICBcbn1cblxuICAgIGNyZWF0ZUJ1dHRvblRhYmxlKGJ1dHRvblRleHQsIG9uQ2xpY2tDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJzsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgcXVlIG5vIHNlIGVudmlhclx1MDBFMSB1biBmb3JtdWxhcmlvIGFsIGhhY2VyIGNsaWMgZW4gXHUwMEU5bFxuICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgneW91ci1idXR0b24tY2xhc3MnKTsgLy8gQWdyZWdhIHVuYSBjbGFzZSBwYXJhIGVsIGVzdGlsbyBkZWwgYm90XHUwMEYzbiBzaSBlcyBuZWNlc2FyaW9cblxuICAgICAgICAvLyBBXHUwMEYxYWRlIGVsIGV2ZW50byBkZSBjbGljIGFsIGJvdFx1MDBGM25cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICAvLyBDcmVhIGxhIG5vdGEgZGVzZGUgZWwgdGVtcGxhdGVyIGRlIFJlZ2lzdHJvVGllbXBvXG4gICAgYXN5bmMgcmV0b21hclRhcmVhKGlkKSB7IFxuICAgICAgICAvLyBBc2VnXHUwMEZBcmF0ZSBkZSByZWVtcGxhemFyICdydXRhL2FsL2FyY2hpdm8ubWQnIGNvbiBsYSBydXRhIGV4YWN0YSBkZWwgYXJjaGl2byBxdWUgZGVzZWFzIG9idGVuZXJcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tgZm9sZGVyX1JlZ2lzdHJvVGllbXBvYF19L1BsdCAtIFJlZ2lzdHJvVGllbXBvLm1kYDtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gXCJSZXRvbWFyIFwiICsgaWQ7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgICAgICAgY29uc3QgdHAgPSB0aGlzLmdldFRwKCk7XG4gICAgICAgIGxldCBjcmVhck5vdGEgPSB0cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKVxuICAgICAgICBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcikuYmFzZW5hbWU7XG4gICAgICB9XG5cbiAgICBnZXRUcCgpe1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luIHx8ICF0aGlzLnBsdWdpbi5hcHAucGx1Z2lucy5lbmFibGVkUGx1Z2lucy5oYXMoJ3RlbXBsYXRlci1vYnNpZGlhbicpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbCBwbHVnaW4gVGVtcGxhdGVyIG5vIGVzdFx1MDBFMSBoYWJpbGl0YWRvLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9ICAgXG4gICAgICAgIGxldCB0cEdlbiA9IHRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLnBsdWdpbnNbXCJ0ZW1wbGF0ZXItb2JzaWRpYW5cIl0udGVtcGxhdGVyO1xuICAgICAgICB0cEdlbiA9IHRwR2VuLmZ1bmN0aW9uc19nZW5lcmF0b3IuaW50ZXJuYWxfZnVuY3Rpb25zLm1vZHVsZXNfYXJyYXk7XG4gICAgICAgIGxldCB0cCA9IHt9XG4gICAgICAgIC8vIGdldCBhbiBpbnN0YW5jZSBvZiBtb2R1bGVzXG4gICAgICAgIHRwLmZpbGUgPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwiZmlsZVwiKTtcbiAgICAgICAgdHAuc3lzdGVtID0gdHBHZW4uZmluZChtID0+IG0ubmFtZSA9PSBcInN5c3RlbVwiKTtcblxuICAgICAgICBpZiAoIXRwLmZpbGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIHB1ZG8gYWNjZWRlciBhbCBvYmpldG8gZGUgZnVuY2lvbmVzIGFjdHVhbGVzIGRlIFRlbXBsYXRlci5cIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygndHAgY29uIHByb3BpZWRhZGVzIFwiZmlsZVwiIHNlIGhhIGNhcmdhZG8gc2F0aXNmYWN0b3JpYW1lbnRlJyk7XG4gICAgICAgIHJldHVybiB0cDtcbiAgICB9XG5cbn1cbiAgICBcbiIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuXG5leHBvcnQgY2xhc3MgVmlzdGFSZXN1bWVuU2VtYW5hbCBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBpbnRlcnZhbElkOiBudW1iZXI7XG4gXG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwdWJsaWMgcGx1Z2luOiBhbnkpIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlc3VtZW4tc2VtYW5hbFwiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZXN1bWVuIFNlbWFuYWxcIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJoaXN0b3J5XCI7IC8vIEVzdGUgZXMgdW4gZWplbXBsbywgY2FtYmlhIFwiZG9jdW1lbnRvXCIgcG9yIGVsIG5vbWJyZSBkZWwgXHUwMEVEY29ubyBxdWUgZGVzZWVzIHVzYXJcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNldFRleHQoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZmlsZUNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYWN0aXZlRmlsZSk7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGZpbGVDYWNoZSk7IC8vIFB1ZWRlcyB1c2FyIHRoaXMuZmlsZSBkZW50cm8gZGUgYWN0dWFsaXphclZpc3RhXG4gICAgXG4gICAgICAgIC8vYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGlubWVkaWF0YW1lbnRlIGFsIGFicmlyXG5cbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGZpbGVDYWNoZSk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBjYWRhIDEwIHNlZ3VuZG9zXG4gICAgICAgIH0sIDEwMDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YShmaWxlQ2FjaGUpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgLy8gTGltcGlhIGVsIGNvbnRlbmlkbyBleGlzdGVudGUgYW50ZXMgZGUgYWN0dWFsaXphclxuICAgIFxuICAgICAgICBcbiAgICAgICAgY29uc3QgaW5pY2lvV1N0ciA9IGZpbGVDYWNoZS5mcm9udG1hdHRlcj8uaW5pY2lvVzsgXG4gICAgICAgIGlmICghaW5pY2lvV1N0cikge1xuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuc2V0VGV4dChcIkxhIGNvbmZpZ3VyYWNpXHUwMEYzbiBkZSBpbmljaW9XIG5vIGVzdFx1MDBFMSBlc3RhYmxlY2lkYS5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9sZGVyRGlhcmlvID0gXCJFc3RydWN0dXJhL0pvdXJuYWwvRGlhcmlvL05vdGFzXCI7XG4gICAgICAgIGNvbnN0IGluaWNpb1cgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGluaWNpb1dTdHIsIFwieXl5eS1NTS1kZCBFRUVFXCIsIHsgbG9jYWxlOiBcImVzXCIgfSk7XG4gICAgICAgIGNvbnN0IGZpblcgPSBpbmljaW9XLnBsdXMoeyBkYXlzOiA2IH0pOyAvLyBBanVzdGUgcGFyYSBhc2VndXJhciBxdWUgZWwgZmluIGVzIGVsIGRvbWluZ28gZGUgbGEgbWlzbWEgc2VtYW5hXG4gICAgXG4gICAgICAgIGNvbnN0IGFyY2hpdm9zRGlhcmlvID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKVxuICAgICAgICAgICAgLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlckRpYXJpbykgJiYgZmlsZS5leHRlbnNpb24gPT09ICdtZCcpO1xuICAgIFxuICAgICAgICBjb25zdCBiaXRhY29yYXMgPSBhcmNoaXZvc0RpYXJpb1xuICAgICAgICAgICAgLm1hcChmaWxlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYUFyY2hpdm8gPSBEYXRlVGltZS5mcm9tSVNPKGZpbGUuYmFzZW5hbWUuc3Vic3RyaW5nKDAsIDEwKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0b3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgYXJjaGl2bzogZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogZmlsZS5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBmZWNoYUFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgIGRhdG9zXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmlsdGVyKCh7IGZlY2hhQXJjaGl2byB9KSA9PiBmZWNoYUFyY2hpdm8gPj0gaW5pY2lvVyAmJiBmZWNoYUFyY2hpdm8gPD0gZmluVylcbiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmZlY2hhQXJjaGl2by50b01pbGxpcygpIC0gYi5mZWNoYUFyY2hpdm8udG9NaWxsaXMoKSk7XG4gICAgXG4gICAgICAgIC8vIENyZWFyIHRcdTAwRUR0dWxvIGNvbiBsYXMgZmVjaGFzIGRlIGxhIHNlbWFuYVxuICAgICAgICBsZXQgdHJpbSA9IGZpblcucXVhcnRlcjtcbiAgICAgICAgbGV0IHNlbSA9IChmaW5XLndlZWtOdW1iZXIgLSAoZmluVy5xdWFydGVyIC0gMSkqMTMpXG4gICAgICAgIGlmIChzZW09PTApe3NlbSA9IDEzfVxuXG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlc3VtZW4gZGUgbGEgc2VtYW5hICR7c2VtfSAtIFEke3RyaW19IC8gVyR7ZmluVy50b0Zvcm1hdCgnV1cnKX0uYH0pO1xuICAgICAgICBjb25zdCBzdWJ0aXR1bG8gPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGBEZXNkZSBlbCAke2luaWNpb1cudG9Gb3JtYXQoJ0VFRUUsIEREJyl9IGFsICR7ZmluVy50b0Zvcm1hdCgnRUVFRSwgREQnKX1gIH0pO1xuICAgICAgICB0aXR1bG8uc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIHN1YnRpdHVsby5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgLy8gQ3JlYXIgdGFibGFcbiAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc05hbWUgPSAndGFibGUtcmVzdW1lblNlbWFuYWwnO1xuICAgIFxuICAgICAgICAvLyBDcmVhciBjYWJlY2VyYSBkZSBsYSB0YWJsYVxuICAgICAgICBjb25zdCB0aGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoZWFkJyk7XG4gICAgICAgIGNvbnN0IGhlYWRlclJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIFsnRFx1MDBFRGEnLCAnUmVzdW1lbiddLmZvckVhY2goaGVhZGVyVGV4dCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICB0aC50ZXh0Q29udGVudCA9IGhlYWRlclRleHQ7XG4gICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpO1xuICAgIFxuICAgICAgICAvLyBDcmVhciBjdWVycG8gZGUgbGEgdGFibGFcbiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICBiaXRhY29yYXMuZm9yRWFjaCgoeyBhcmNoaXZvLCBwYXRoLCBkYXRvcyB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgXG4gICAgICAgICAgICBjb25zdCB0ZEFyY2hpdm8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgY29uc3QgbGlua0VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgbGlua0VsLnRleHRDb250ZW50ID0gYXJjaGl2bztcbiAgICAgICAgICAgIGxpbmtFbC5ocmVmID0gcGF0aDtcbiAgICAgICAgICAgIGxpbmtFbC5vbmNsaWNrID0gYXN5bmMgKGV2KSA9PiB7XG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpLm9wZW5GaWxlKGZpbGUsIHsgZVN0YXRlOiB7IGZvY3VzOiB0cnVlIH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRkQXJjaGl2by5hcHBlbmRDaGlsZChsaW5rRWwpO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgdGRSZXN1bWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIGNvbnN0IHVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgICAgIChkYXRvcy50aXR1bG8gfHwgWydTaW4gdFx1MDBFRHR1bG8nXSkuZm9yRWFjaCh0aXR1bG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgICAgICBsaS50ZXh0Q29udGVudCA9IHRpdHVsbztcbiAgICAgICAgICAgICAgICB1bC5hcHBlbmRDaGlsZChsaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRkUmVzdW1lbi5hcHBlbmRDaGlsZCh1bCk7XG4gICAgXG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZEFyY2hpdm8pO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRSZXN1bWVuKTtcbiAgICBcbiAgICAgICAgICAgIHRib2R5LmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICBcbiAgICAgICAgLy8gQWdyZWdhciBsYSB0YWJsYSBhbCBjb250ZW5lZG9yXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICB9XG4gICAgXG4gICAgXG5cblxuICAgIC8vIE9wY2lvbmFsOiBJbXBsZW1lbnRhIG9uQ2xvc2Ugc2kgbmVjZXNpdGFzIGxpbXBpZXphIGFsIGNlcnJhciBsYSB2aXN0YS5cbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vdmlld3MvdmlzdGFSVEFjdGl2by50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL21vZHVsb1JlZ2lzdHJvVGllbXBvL3ZpZXdzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjMgMjE6MDE6MjVcbiAqIEF1dGhvcjogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBMYXN0IE1vZGlmaWVkOiAyMDI1LTAyLTIzIDIzOjU4OjM0XG4gKiBNb2RpZmllZCBCeTogQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjUgLSBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICovXG5cbi8vIGltcG9ydCBicmVha0F1ZGlvIGZyb20gXCIuLi8uLi8uLi8uLi9SZWN1cnNvcy9CcmVhay5tcDNcIjtcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBQbHVnaW4sIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRlVGltZSwgRHVyYXRpb24gfSBmcm9tIFwibHV4b25cIjsgLy8gQXNlZ1x1MDBGQXJhdGUgZGUgdGVuZXIgTHV4b24gZGlzcG9uaWJsZSBwYXJhIG1hbmlwdWxhciBmZWNoYXMgeSBob3Jhc1xuaW1wb3J0IHsgcmVnaXN0cm9UaWVtcG9BUEkgfSBmcm9tIFwiLi4vQVBJL3JlZ2lzdHJvVGllbXBvQVBJXCI7XG5pbXBvcnQgeyBzdGFydGVyQVBJIH0gZnJvbSBcIi4uLy4uL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdGFydGVyQVBJXCI7XG5cbmV4cG9ydCBjbGFzcyBWaXN0YVJlZ2lzdHJvQWN0aXZvIGV4dGVuZHMgSXRlbVZpZXcge1xuICAgIHBsdWdpbiA6IFBsdWdpbjtcbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucmVnaXN0cm9UaWVtcG9BUEkgPSBuZXcgcmVnaXN0cm9UaWVtcG9BUEkodGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJ2aXN0YS1yZWdpc3Ryby1hY3Rpdm9cIjtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIFwiUmVnaXN0cm8gQWN0aXZvXCI7XG4gICAgfVxuXG4gICAgZ2V0SWNvbigpIHtcbiAgICAgICAgcmV0dXJuIFwiY2hlY2ttYXJrXCI7IC8vIENhbWJpYSBhIHVuIFx1MDBFRGNvbm8gYWRlY3VhZG8gcGFyYSByZWdpc3Ryb3MgYWN0aXZvc1xuICAgIH1cblxuICAgIGFzeW5jIG9uT3BlbigpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGlubWVkaWF0YW1lbnRlIGFsIGFicmlyXG4gICAgXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKCk7IC8vIEFjdHVhbGl6YSBsYSB2aXN0YSBjYWRhIDUgc2VndW5kb3NcbiAgICAgICAgfSwgNTAwMCk7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTsgLy8gTGltcGlhIGVsIGludGVydmFsbyBhbCBjZXJyYXIgbGEgdmlzdGFcbiAgICB9XG5cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YSgpIHtcbiAgICAgICAgLy8gMS4gR3VhcmRhciBsYSBwb3NpY2lcdTAwRjNuIGRlIHNjcm9sbCBhY3R1YWwgZGVsIGNvbnRlbmVkb3IgZGUgbGEgdGFibGEsIHNpIGV4aXN0ZS5cbiAgICAgICAgbGV0IHNjcm9sbFRvcCA9IDA7XG4gICAgICAgIGxldCBzY3JvbGxMZWZ0ID0gMDtcbiAgICAgICAgY29uc3Qgb2xkVGFibGVXcmFwcGVyID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKFwiLnRhYmxlLXdyYXBwZXJcIik7XG4gICAgICAgIGlmIChvbGRUYWJsZVdyYXBwZXIpIHtcbiAgICAgICAgICAgIHNjcm9sbFRvcCA9IG9sZFRhYmxlV3JhcHBlci5zY3JvbGxUb3A7XG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gb2xkVGFibGVXcmFwcGVyLnNjcm9sbExlZnQ7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gMi4gVmFjaWFyIGVsIGNvbnRlbmVkb3IgcHJpbmNpcGFsIHkgY29uZmlndXJhciBsYSBjbGFzZSBiYXNlLlxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2xhc3NMaXN0LmFkZChcInJlZ2lzdHJvLXRpZW1wby1jb250YWluZXJcIik7XG4gICAgXG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9SZWdpc3Ryb1RpZW1wbztcbiAgICAgICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLmZpbHRlcihmaWxlID0+IGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXIpKTtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0FjdGl2b3MgPSBbXTtcbiAgICBcbiAgICAgICAgLy8gQnVzY2FyIHJlZ2lzdHJvcyBhY3Rpdm9zIChlc3RhZG8gXHVEODNEXHVERkUyKVxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVnaXN0cm9BY3Rpdm8gPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlZ2lzdHJvQWN0aXZvLCBtZXRhZGF0YSk7XG4gICAgICAgICAgICAgICAgcmVnaXN0cm9zQWN0aXZvcy5wdXNoKHJlZ2lzdHJvQWN0aXZvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAocmVnaXN0cm9zQWN0aXZvcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIENvbnRlbmVkb3IgcGFyYSBlbCBtZW5zYWplIHkgZWwgYm90XHUwMEYzbiBzaSBubyBoYXkgcmVnaXN0cm9zIGFjdGl2b3MuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtZXNzYWdlLWNvbnRhaW5lcicgfSk7XG4gICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnTm8gaGF5IG5pbmdcdTAwRkFuIHJlZ2lzdHJvIGRlIHRpZW1wbyBlamVjdXRcdTAwRTFuZG9zZS4nIH0pO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgYm90b25DcmVhciA9IG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAncmVnaXN0cm8tdGllbXBvLWJ0bicgfSk7XG4gICAgICAgICAgICBib3RvbkNyZWFyLnRleHRDb250ZW50ID0gJysgUmVnaXN0cm8gVGllbXBvJztcbiAgICAgICAgICAgIGJvdG9uQ3JlYXIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydGVyQVBJbnN0YW5jZSA9IG5ldyBzdGFydGVyQVBJKHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBzdGFydGVyQVBJbnN0YW5jZS5jcmVhdGVOb3RlKFwiUmVnaXN0cm9UaWVtcG9cIik7XG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZChtZXNzYWdlQ29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VwYXJhZG9yJyB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChyZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJvRW5FamVjdWNpb24gPSByZWdpc3Ryb3NBY3Rpdm9zWzBdO1xuICAgIFxuICAgICAgICAgICAgY29uc3QgYWN0aXZlQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJhY3RpdmUtdGltZS1jb250YWluZXJcIiB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIFRcdTAwRUR0dWxvXG4gICAgICAgICAgICBhY3RpdmVDb250YWluZXIuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiUmVnaXN0cm8gZGUgVGllbXBvIGVuIEVqZWN1Y2lcdTAwRjNuXCIsIGNsczogXCJyZWdpc3Ryby10aWVtcG8tdGl0dWxvXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBBbGlhc1xuICAgICAgICAgICAgY29uc3QgYWxpYXNDb250YWluZXIgPSBhY3RpdmVDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgY2xzOiBcInJlZ2lzdHJvLWFsaWFzXCIgfSk7XG5cbiAgICAgICAgICAgIC8vIFByaW1lcm8gaW50ZW50YSBhbGlhc2VzWzFdLCBzaSBubyBleGlzdGUsIHVzYSBhbGlhc2VzWzBdLCB5IHNpIHRhbXBvY28gZXhpc3RlLCBcIlNpbiBhbGlhc1wiXG4gICAgICAgICAgICBjb25zdCBhbGlhc1RleHQgPSByZWdpc3Ryb0VuRWplY3VjaW9uLmFsaWFzZXMgJiYgcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzWzFdXG4gICAgICAgICAgICA/IHJlZ2lzdHJvRW5FamVjdWNpb24uYWxpYXNlc1sxXVxuICAgICAgICAgICAgOiByZWdpc3Ryb0VuRWplY3VjaW9uLmFsaWFzZXMgJiYgcmVnaXN0cm9FbkVqZWN1Y2lvbi5hbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgPyByZWdpc3Ryb0VuRWplY3VjaW9uLmFsaWFzZXNbMF1cbiAgICAgICAgICAgICAgICA6IFwiU2luIGFsaWFzXCI7XG5cbiAgICAgICAgICAgIGFsaWFzQ29udGFpbmVyLmlubmVySFRNTCA9IGA8c3Ryb25nPkFsaWFzOjwvc3Ryb25nPiAke2FsaWFzVGV4dH1gO1xuICAgICAgICAgICAgLy8gRGVzY3JpcGNpXHUwMEYzbiAoVmlzaWJsZSBlbiBsYSBWaXN0YSlcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXBjaW9uQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwicFwiLCB7IGNsczogXCJyZWdpc3Ryby1kZXNjcmlwY2lvblwiIH0pO1xuICAgICAgICAgICAgZGVzY3JpcGNpb25Db250YWluZXIuaW5uZXJIVE1MID0gYDxzdHJvbmc+RGVzY3JpcGNpXHUwMEYzbjo8L3N0cm9uZz4gJHtyZWdpc3Ryb0VuRWplY3VjaW9uLmRlc2NyaXBjaW9uIHx8IFwiU2luIGRlc2NyaXBjaVx1MDBGM25cIn1gO1xuICAgIFxuICAgICAgICAgICAgLy8gVGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICBjb25zdCB0aWVtcG9Db250YWluZXIgPSBhY3RpdmVDb250YWluZXIuY3JlYXRlRWwoXCJwXCIsIHsgY2xzOiBcInRpZW1wby1lamVjdWNpb25cIiwgdGV4dDogXCJUaWVtcG8gdHJhbnNjdXJyaWRvOiBDYWxjdWxhbmRvLi4uXCIgfSk7XG4gICAgICAgICAgICB0aGlzLmFjdHVhbGl6YXJUaWVtcG9FbkVqZWN1Y2lvbih0aWVtcG9Db250YWluZXIsIHJlZ2lzdHJvRW5FamVjdWNpb24uaG9yYUluaWNpbyk7XG4gICAgXG4gICAgICAgICAgICAvLyBDb250ZW5lZG9yIGRlIGJvdG9uZXMgYWxpbmVhZG9zXG4gICAgICAgICAgICBjb25zdCBib3RvbmVzQ29udGFpbmVyID0gYWN0aXZlQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInJlZ2lzdHJvLWJvdG9uZXMtY29udGFpbmVyXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAvLyBCb3RcdTAwRjNuIHBhcmEgY2FtYmlhciBsYSBkZXNjcmlwY2lcdTAwRjNuXG4gICAgICAgICAgICBjb25zdCBjaGFuZ2VEZXNjQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIGNoYW5nZURlc2NCdXR0b24uaW5uZXJIVE1MID0gXCJcdTI3MEZcdUZFMEYgPHNwYW4gY2xhc3M9J2J1dHRvbi10ZXh0Jz4gIERlc2NyaXBjaVx1MDBGM248L3NwYW4+XCI7XG4gICAgICAgICAgICBjaGFuZ2VEZXNjQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjaGFuZ2UtZGVzYy1idG5cIik7XG4gICAgICAgICAgICBjaGFuZ2VEZXNjQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVldmFEZXNjcmlwY2lvbiA9IGF3YWl0IHRoaXMubW9zdHJhclByb21wdChcIk51ZXZhIERlc2NyaXBjaVx1MDBGM246XCIsIHJlZ2lzdHJvRW5FamVjdWNpb24uZGVzY3JpcGNpb24gfHwgXCJcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51ZXZhRGVzY3JpcGNpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWxlKSByZXR1cm47XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyb250bWF0dGVyID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyIHx8IHt9O1xuICAgIFxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlci5kZXNjcmlwY2lvbiA9IG51ZXZhRGVzY3JpcGNpb247XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0aGlzLnJlZXNjcmliaXJGcm9udG1hdHRlcihmaWxlQ29udGVudCwgZnJvbnRtYXR0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbGEgdmlzdGEgcGFyYSByZWZsZWphciBlbCBjYW1iaW9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIEJvdFx1MDBGM24gcGFyYSBkZXRlbmVyIGVsIHJlZ2lzdHJvXG4gICAgICAgICAgICBjb25zdCBzdG9wQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgICAgIHN0b3BCdXR0b24uaW5uZXJIVE1MID0gXCJcdTI3MEJcdUQ4M0NcdURGRkMgPHNwYW4gY2xhc3M9J2J1dHRvbi10ZXh0Jz4gRGV0ZW5lciBSZWdpc3Rybzwvc3Bhbj5cIjtcbiAgICAgICAgICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0b3AtdGltZS1idG5cIik7XG4gICAgICAgICAgICBzdG9wQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJCb3RcdTAwRjNuICdDZXJyYXIgVGFyZWEnIHByZXNpb25hZG8uXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSB8fCAhKHJlZ2lzdHJvRW5FamVjdWNpb24uZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIk5vIHNlIGVuY29udHJcdTAwRjMgZWwgYXJjaGl2byBkZWwgcmVnaXN0cm8gZW4gZWplY3VjaVx1MDBGM24uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVnaXN0cm9UaWVtcG9BUEkuY2VycmFyUmVnaXN0cm8ocmVnaXN0cm9FbkVqZWN1Y2lvbi5maWxlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZWdpc3RybyBjZXJyYWRvIGNvcnJlY3RhbWVudGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdHVhbGl6YXJWaXN0YSgpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBjZXJyYXIgbGEgdGFyZWE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIC8vIEFncmVnYXIgYm90b25lcyBhbCBjb250ZW5lZG9yXG4gICAgICAgICAgICBib3RvbmVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoYW5nZURlc2NCdXR0b24pO1xuICAgICAgICAgICAgYm90b25lc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdG9wQnV0dG9uKTtcbiAgICBcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RvbmVzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGFjdGl2ZUNvbnRhaW5lci5hcHBlbmRDaGlsZChhbGlhc0NvbnRhaW5lcik7XG4gICAgICAgICAgICBhY3RpdmVDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVzY3JpcGNpb25Db250YWluZXIpO1xuICAgICAgICAgICAgYWN0aXZlQ29udGFpbmVyLmFwcGVuZENoaWxkKHRpZW1wb0NvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGFjdGl2ZUNvbnRhaW5lcik7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTW9zdHJhciByZWdpc3Ryb3MgZmluYWxpemFkb3NcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0ZpbmFsaXphZG9zID0gW107XG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGE/LmVzdGFkbyA9PT0gXCJcdUQ4M0RcdUREMzVcIikge1xuICAgICAgICAgICAgICAgIGxldCByZWdpc3Ryb0ZpbmFsaXphZG8gPSB7IGZpbGUgfTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHJlZ2lzdHJvRmluYWxpemFkbywgbWV0YWRhdGEpO1xuICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0ZpbmFsaXphZG9zLnB1c2gocmVnaXN0cm9GaW5hbGl6YWRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICByZWdpc3Ryb3NGaW5hbGl6YWRvcy5zb3J0KChhLCBiKSA9PiBiLmlkIC0gYS5pZCk7XG4gICAgICAgIGxldCB0b3A1UmVnaXN0cm9zQWN0aXZvcyA9IHJlZ2lzdHJvc0ZpbmFsaXphZG9zLnNsaWNlKDAsIDE1KTtcbiAgICBcbiAgICAgICAgaWYgKHRvcDVSZWdpc3Ryb3NBY3Rpdm9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlV3JhcHBlciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwidGFibGUtd3JhcHBlclwiIH0pO1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSB0YWJsZVdyYXBwZXIuY3JlYXRlRWwoXCJ0YWJsZVwiLCB7IGNsczogXCJzdHlsZWQtdGFibGVcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IHRhYmxlLmNyZWF0ZUVsKFwidHJcIik7XG4gICAgICAgICAgICBbXCJBbGlhc1wiLCBcIkRlc2NyaXBjaVx1MDBGM25cIiwgXCJSZXRvbWFyXCJdLmZvckVhY2godGV4dCA9PiBoZWFkZXIuY3JlYXRlRWwoXCJ0aFwiLCB7IHRleHQ6IHRleHQgfSkpO1xuICAgIFxuICAgICAgICAgICAgdG9wNVJlZ2lzdHJvc0FjdGl2b3MuZm9yRWFjaChyZWdpc3RybyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gdGFibGUuY3JlYXRlRWwoXCJ0clwiKTtcbiAgICBcbiAgICAgICAgICAgICAgICAvLyBBbGlhcyBjb24gZW5sYWNlXG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNDZWxsID0gcm93LmNyZWF0ZUVsKFwidGRcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNUZXh0ID0gcmVnaXN0cm8uYWxpYXNlcyAmJiByZWdpc3Ryby5hbGlhc2VzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gcmVnaXN0cm8uYWxpYXNlc1sxXVxuICAgICAgICAgICAgICAgICAgICA6IHJlZ2lzdHJvLmFsaWFzZXMgJiYgcmVnaXN0cm8uYWxpYXNlc1swXVxuICAgICAgICAgICAgICAgICAgICAgICAgPyByZWdpc3Ryby5hbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiU2luIGFsaWFzXCI7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgYWxpYXNMaW5rID0gYWxpYXNDZWxsLmNyZWF0ZUVsKFwiYVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGFsaWFzVGV4dCxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiBcImNsaWNrYWJsZS1hbGlhc1wiLFxuICAgICAgICAgICAgICAgICAgICBocmVmOiBcIiNcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFsaWFzTGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocmVnaXN0cm8uZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiByZWdpc3Ryby5kZXNjcmlwY2lvbiB8fCBcIk5vIERlZmluaWRhXCIgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gQm90XHUwMEYzbiBcIlJldG9tYXJcIlxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNlbGwgPSByb3cuY3JlYXRlRWwoXCJ0ZFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKFwiXHUyM0YxXHVGRTBGXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5yZXRvbWFyVGFyZWEocmVnaXN0cm8uaWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicmV0b21hci1idG5cIik7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJSZXRvbWFyXCIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbkNlbGwuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5hcHBlbmRDaGlsZCh0YWJsZVdyYXBwZXIpO1xuICAgIFxuICAgICAgICAgICAgLy8gMy4gUmVzdGF1cmFyIGxhIHBvc2ljaVx1MDBGM24gZGUgc2Nyb2xsIGVuIGVsIG51ZXZvIGNvbnRlbmVkb3IgZGUgdGFibGEuXG4gICAgICAgICAgICB0YWJsZVdyYXBwZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgICAgICAgdGFibGVXcmFwcGVyLnNjcm9sbExlZnQgPSBzY3JvbGxMZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIGhheSByZWdpc3Ryb3MgZmluYWxpemFkb3MuXCIgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRnVuY2lcdTAwRjNuIHBhcmEgYWN0dWFsaXphciBkaW5cdTAwRTFtaWNhbWVudGUgZWwgdGllbXBvIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICovXG4vKipcbiAqIEZ1bmNpXHUwMEYzbiBwYXJhIGFjdHVhbGl6YXIgZGluXHUwMEUxbWljYW1lbnRlIGVsIHRpZW1wbyBlbiBlamVjdWNpXHUwMEYzblxuICovXG5hbGVydGFFamVjdXRhZGEyNTogYm9vbGVhbiA9IGZhbHNlO1xuXG5hY3R1YWxpemFyVGllbXBvRW5FamVjdWNpb24oZWxlbWVudDogSFRNTEVsZW1lbnQsIGhvcmFJbmljaW86IHN0cmluZykge1xuICAgIGNvbnN0IGV4dHJhZXJIb3JhID0gKGZlY2hhU3RyOiBzdHJpbmcpOiBEYXRlIHwgbnVsbCA9PiB7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gZmVjaGFTdHIubWF0Y2goLyhcXGR7NH0tXFxkezJ9LVxcZHsyfSlcXHMrXFx3K1xccysoXFxkezJ9OlxcZHsyfSkvKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYCR7bWF0Y2hbMV19VCR7bWF0Y2hbMl19OjAwYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcblxuICAgIGNvbnN0IGluaWNpbyA9IGV4dHJhZXJIb3JhKGhvcmFJbmljaW8pO1xuICAgIGlmICghaW5pY2lvKSB7XG4gICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlRpZW1wbyB0cmFuc2N1cnJpZG86IE5vIGRpc3BvbmlibGVcIjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNhbGN1bGFyVGllbXBvID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBhaG9yYSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGRpZmVyZW5jaWEgPSBNYXRoLmZsb29yKChhaG9yYS5nZXRUaW1lKCkgLSBpbmljaW8uZ2V0VGltZSgpKSAvIDEwMDApO1xuICAgICAgICBjb25zdCBob3JhcyA9IE1hdGguZmxvb3IoZGlmZXJlbmNpYSAvIDM2MDApO1xuICAgICAgICBjb25zdCBtaW51dG9zID0gTWF0aC5mbG9vcigoZGlmZXJlbmNpYSAlIDM2MDApIC8gNjApO1xuICAgICAgICBjb25zdCBzZWd1bmRvcyA9IGRpZmVyZW5jaWEgJSA2MDtcblxuICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gYFRpZW1wbyB0cmFuc2N1cnJpZG86ICR7aG9yYXN9aCAke21pbnV0b3N9bSAke3NlZ3VuZG9zfXNgO1xuXG4gICAgICAgIC8vIEN1YW5kbyBzZSBhbGNhbnphIG8gc3VwZXJhIDI1IG1pbnV0b3MgKDE1MDAgc2VndW5kb3MpXG4gICAgICAgIGlmIChkaWZlcmVuY2lhID49IDE1MDApIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInRpZW1wby1yb2pvXCIpOyAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwidGllbXBvLXJvam9cIik7XG4gIFxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEFjdHVhbGl6YSBpbm1lZGlhdGFtZW50ZSB5IGx1ZWdvIGNhZGEgc2VndW5kb1xuICAgIGNhbGN1bGFyVGllbXBvKCk7XG4gICAgc2V0SW50ZXJ2YWwoY2FsY3VsYXJUaWVtcG8sIDEwMDApO1xufVxuICAgIFxuLyoqXG4gKiBGdW5jaVx1MDBGM24gcGFyYSBtb3N0cmFyIHVuIHByb21wdCB5IG9idGVuZXIgdW4gbnVldm8gdmFsb3JcbiAqL1xuYXN5bmMgbW9zdHJhclByb21wdChtZW5zYWplOiBzdHJpbmcsIHZhbG9yQWN0dWFsOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZyB8IG51bGw+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIENyZWEgZWwgZm9uZG8gb3NjdXJvXG4gICAgICBjb25zdCBiYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBiYWNrZHJvcC5jbGFzc0xpc3QuYWRkKFwicHJvbXB0LW1vZGFsLWJhY2tkcm9wXCIpO1xuICBcbiAgICAgIC8vIENyZWEgZWwgbW9kYWxcbiAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJwcm9tcHQtbW9kYWxcIik7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbWVuc2FqZTtcblxuICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbG9yQWN0dWFsOyAvLyBQcmVsbGVuYXIgY29uIGxhIGRlc2NyaXBjaVx1MDBGM24gYWN0dWFsXG5cbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgICBjb25zdCBhY2VwdGFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgYWNlcHRhci50ZXh0Q29udGVudCA9IFwiQWNlcHRhclwiO1xuICAgICAgICBhY2VwdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGlucHV0LnZhbHVlLnRyaW0oKSB8fCBudWxsKTsgLy8gUmV0b3JuYSBlbCB0ZXh0byBlc2NyaXRvXG4gICAgICAgICAgICBtb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgIGNhbmNlbGFyLnRleHRDb250ZW50ID0gXCJDYW5jZWxhclwiO1xuICAgICAgICBjYW5jZWxhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTsgLy8gQ2FuY2VsYXIgc2luIGNhbWJpb3NcbiAgICAgICAgICAgIG1vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgYmFja2Ryb3AucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBlcm1pdGlyIGNvbmZpcm1hciBjb24gXCJFbnRlclwiXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBhY2VwdGFyLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChhY2VwdGFyKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbGFyKTtcbiAgICAgICAgbW9kYWwuYXBwZW5kQ2hpbGQobGFiZWwpO1xuICAgICAgICBtb2RhbC5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgICAgIG1vZGFsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYmFja2Ryb3ApO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1vZGFsKTtcblxuICAgICAgICBpbnB1dC5mb2N1cygpOyAvLyBFbmZvY2FyIGVsIGlucHV0IGF1dG9tXHUwMEUxdGljYW1lbnRlXG4gICAgfSk7XG59XG5cbiAgICBjcmVhdGVCdXR0b25UYWJsZShidXR0b25UZXh0LCBvbkNsaWNrQ2FsbGJhY2spIHtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xuICAgICAgICBidXR0b24udHlwZSA9ICdidXR0b24nOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgbm8gc2UgZW52aWFyXHUwMEUxIHVuIGZvcm11bGFyaW8gYWwgaGFjZXIgY2xpYyBlbiBcdTAwRTlsXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd5b3VyLWJ1dHRvbi1jbGFzcycpOyAvLyBBZ3JlZ2EgdW5hIGNsYXNlIHBhcmEgZWwgZXN0aWxvIGRlbCBib3RcdTAwRjNuIHNpIGVzIG5lY2VzYXJpb1xuXG4gICAgICAgIC8vIEFcdTAwRjFhZGUgZWwgZXZlbnRvIGRlIGNsaWMgYWwgYm90XHUwMEYzblxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNsaWNrQ2FsbGJhY2spO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIFxuLyoqXG4gKiBSZWVzY3JpYmUgZWwgZnJvbnRtYXR0ZXIgZW4gdW4gYXJjaGl2byBNYXJrZG93biwgcHJlc2VydmFuZG8gbGEgZXN0cnVjdHVyYSBvcmlnaW5hbC5cbiAqL1xucmVlc2NyaWJpckZyb250bWF0dGVyKGNvbnRlbnQ6IHN0cmluZywgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICAgIGNvbnN0IHlhbWxTdGFydCA9IGNvbnRlbnQuaW5kZXhPZignLS0tJyk7XG4gICAgY29uc3QgeWFtbEVuZCA9IGNvbnRlbnQuaW5kZXhPZignLS0tJywgeWFtbFN0YXJ0ICsgMyk7XG5cbiAgICBpZiAoeWFtbFN0YXJ0ID09PSAtMSB8fCB5YW1sRW5kID09PSAtMSkge1xuICAgICAgICByZXR1cm4gY29udGVudDsgLy8gU2kgbm8gaGF5IGZyb250bWF0dGVyLCBubyBtb2RpZmljYXIgbmFkYS5cbiAgICB9XG5cbiAgICAvLyBDb252ZXJ0aXIgZWwgZnJvbnRtYXR0ZXIgZW4gWUFNTCBmb3JtYXRlYWRvIGNvcnJlY3RhbWVudGVcbiAgICBsZXQgbnVldm9Gcm9udG1hdHRlciA9ICctLS1cXG4nO1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZnJvbnRtYXR0ZXIpIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBmcm9udG1hdHRlcltrZXldO1xuXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgLy8gU2kgZWwgY2FtcG8gZXMgdW5hIGxpc3RhLCBhc2VndXJhcnNlIGRlIHF1ZSBjYWRhIGVsZW1lbnRvIHNlIGZvcm1hdGVlIGNvcnJlY3RhbWVudGVcbiAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCR7a2V5fTpcXG5gO1xuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCIgJiYgaXRlbS5tYXRjaCgvXlxcW1xcWy4qXFxdXFxdJC8pKSB7XG4gICAgICAgICAgICAgICAgICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gYCAgLSBcIiR7aXRlbX1cIlxcbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgICAtICR7SlNPTi5zdHJpbmdpZnkoaXRlbSl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5tYXRjaCgvXlxcW1xcWy4qXFxdXFxdJC8pKSB7XG4gICAgICAgICAgICAgICAgbnVldm9Gcm9udG1hdHRlciArPSBgJHtrZXl9OiBcIiR7dmFsdWV9XCJcXG5gO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAke2tleX06ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBudWV2b0Zyb250bWF0dGVyICs9IGAke2tleX06ICR7dmFsdWV9XFxuYDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG51ZXZvRnJvbnRtYXR0ZXIgKz0gJy0tLVxcbic7XG5cbiAgICAvLyBPYnRlbmVyIGVsIGNvbnRlbmlkbyBwb3N0ZXJpb3IgYWwgZnJvbnRtYXR0ZXJcbiAgICBsZXQgY29udGVuaWRvUmVzdGFudGUgPSBjb250ZW50LnNsaWNlKHlhbWxFbmQgKyAzKS50cmltU3RhcnQoKTsgLy8gRWxpbWluYXIgc2FsdG9zIGRlIGxcdTAwRURuZWEgZXh0cmFcblxuICAgIC8vIEFncmVnYXIgdW5hIGxcdTAwRURuZWEgZW4gYmxhbmNvIHNvbG8gc2kgaGF5IGNvbnRlbmlkbyByZXN0YW50ZVxuICAgIHJldHVybiBudWV2b0Zyb250bWF0dGVyICsgKGNvbnRlbmlkb1Jlc3RhbnRlID8gJ1xcbicgKyBjb250ZW5pZG9SZXN0YW50ZSA6ICcnKTtcbn1cbiAgICBcbn1cbiIsICIvKiBGaWxlIExvY2F0aW9uOiAgc3JjL21vZHVsZXMvbW9kdWxvR1REL2luZGV4LnRzICovXG5pbXBvcnQgeyBQbHVnaW4sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcywgZGVhY3RpdmF0ZUNvbW1hbmRzIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZHVsb0dURCB7XG4gICAgcGx1Z2luOiBQbHVnaW47XG4gICAgbW9kdWxvR1REOiBNb2R1bG9HVEQgfCBudWxsID0gbnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCkge1xuICAgICAgICBpZiAodGhpcy5tb2R1bG9HVEQpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGFjdGl2bywgbm8gaGFjZXIgbmFkYVxuXG4gICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5tb2R1bG9HVEQpIHJldHVybjsgLy8gU2kgeWEgZXN0XHUwMEUxIGRlc2FjdGl2YWRvLCBubyBoYWNlciBuYWRhXG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgICAgIHRoaXMubW9kdWxvR1REID0gbnVsbDtcbiAgICB9XG5cblxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9HVEQvY29tbWFuZHMudHNcblxuaW1wb3J0IHsgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgaW5ncmVzYXJCYW5kZWphRW50cmFkYSB9IGZyb20gXCIuL2luYm94XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgLy8gQ29tYW5kbyBwYXJhIGluZ3Jlc2FyIGEgbGEgYmFuZGVqYSBkZSBlbnRyYWRhXG4gICAgY29uc3QgaW5ib3hDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJpbmdyZXNhci1pbmJveFwiLFxuICAgICAgICBuYW1lOiBcIkluZ3Jlc2FyIEJhbmRlamEgZGUgRW50cmFkYSAtPiBJbmJveFwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgaW5ncmVzYXJCYW5kZWphRW50cmFkYShwbHVnaW4pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBSZWdpc3RyYXIgbG9zIElEcyBkZSBsb3MgY29tYW5kb3MgcGFyYSBwb2RlciBkZXNhY3RpdmFybG9zIGRlc3B1XHUwMEU5c1xuICAgIHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURCA9IHBsdWdpbi5yZWdpc3RlcmVkQ29tbWFuZElkc0dURCB8fCBbXTtcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQucHVzaChpbmJveENvbW1hbmQuaWQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQpIHJldHVybjtcbiAgICBcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZENvbW1hbmRJZHNHVEQuZm9yRWFjaChjb21tYW5kSWQgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1waWFyIGVsIGFycmF5IGRlIGNvbWFuZG9zIHJlZ2lzdHJhZG9zXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRDb21tYW5kSWRzR1REID0gW107XG59IiwgImltcG9ydCB7IE5vdGljZSwgUGx1Z2luLCBURmlsZSwgTWFya2Rvd25WaWV3LCBBbGVydCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERhdGVUaW1lIH0gZnJvbSAnbHV4b24nO1xuaW1wb3J0IHsgQmFuZGVqYURlRW50cmFkYU1vZGFsfSBmcm9tICcuLi9tb2RhbGVzL2luYm94TW9kYWwnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbmdyZXNhckJhbmRlamFFbnRyYWRhKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgbGV0IGluYm94UGF0aCA9IGAke3BsdWdpbi5zZXR0aW5ncy5maWxlX0luYm94fS5tZGA7XG4gICAgbGV0IGluYm94RmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoaW5ib3hQYXRoKTtcbiAgICBjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBhcmNoaXZvIGFjdGl2b1wiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBBc2VndXJhIHF1ZSBoYXkgdW4gYXJjaGl2byBhY3Rpdm8gYW50ZXMgZGUgY29udGludWFyXG4gICAgfVxuICAgIGxldCBpbmJveDtcblxuXG4gICAgLy8gVXNvIGRlbCBNb2RhbFxuICAgIGNvbnN0IG1vZGFsID0gbmV3IEJhbmRlamFEZUVudHJhZGFNb2RhbChwbHVnaW4uYXBwKTtcbiAgICBtb2RhbC5vcGVuKCk7XG5cbiAgICBjb25zdCB7IHRleHQsIHNhdmVJbkN1cnJlbnQgfSA9IGF3YWl0IG1vZGFsLndhaXRGb3JJbnB1dCgpO1xuICAgIFxuICAgIGlmICh0ZXh0Lmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbmV3IE5vdGljZShcIkluYm94IGNhbmNlbGFkYVwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBUZXJtaW5hIGxhIGVqZWN1Y2lcdTAwRjNuIGRlIGxhIGZ1bmNpXHUwMEYzbiBhcXVcdTAwRUQuXG4gICAgfVxuICAgIGxldCBkZXN0aW5vID0gc2F2ZUluQ3VycmVudCA/IGFjdGl2ZUZpbGUgOiBpbmJveEZpbGU7XG4gICAgbGV0IGhveSA9IERhdGVUaW1lLm5vdygpLnRvRm9ybWF0KCd5eXl5LU1NLWRkJyk7XG4gICAgbGV0IGhvcmEgPSBEYXRlVGltZS5ub3coKS50b0Zvcm1hdCgnSEg6bW0nKTtcbiAgICBpbmJveCA9IGAtIFsgXSBcdUQ4M0VcdURERTAgJHt0ZXh0fSAjaW5ib3ggW2NyZWF0ZWQ6OiAke2hveX1dIGEgbGFzICR7aG9yYX1cXG5gO1xuXG4gICAgXG4gICAgLy8gTFx1MDBGM2dpY2EgcGFyYSBlc2NyaWJpciBlbiBlbCBhcmNoaXZvXG4gICAgaWYgKGRlc3Rpbm8gaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBpZiAoZGVzdGlubyA9PT0gaW5ib3hGaWxlKSB7XG4gICAgICAgICAgICAvLyBNYW5lamFtb3MgbGEgcHJvbWVzYSBjb24gLnRoZW4oKSB5IC5jYXRjaCgpIHBhcmEgZWwgbWFuZWpvIGRlIGVycm9yZXNcbiAgICAgICAgICAgIGluc2VydEF0U3RhcnRVc2luZ1Byb2Nlc3MoaW5ib3gsIGRlc3Rpbm8pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBTaSBsYSBwcm9tZXNhIHNlIHJlc3VlbHZlIHNpbiBlcnJvcmVzLCBtdWVzdHJhIHVuIE5vdGljZVxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQmFuZGVqYSBkZSBlbnRyYWRhIGFjdHVhbGl6YWRhIGNvbiBcdTAwRTl4aXRvLlwiKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAvLyBTaSBvY3VycmUgdW4gZXJyb3IsIG11ZXN0cmEgdW4gQWxlcnRcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGFsIGFncmVnYXIgY29udGVuaWRvIGFsIGluaWNpbyBkZWwgYXJjaGl2bzogXCIgKyBlcnJvci5tZXNzYWdlKTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgaW5zZXJ0SW5ib3hBdEN1cnNvcihpbmJveCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluc2VydEluYm94QXRDdXJzb3IoaW5ib3gpIHtcbiAgICBkZWJ1Z2dlclxuICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUxlYWY7XG4gICAgaWYgKGFjdGl2ZUxlYWYpIHtcbiAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlTGVhZi52aWV3LnNvdXJjZU1vZGUuY21FZGl0b3I7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShpbmJveCwgY3Vyc29yKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluc2VydEF0U3RhcnRVc2luZ1Byb2Nlc3MoaW5ib3gsIGZpbGUpIHtcbiAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSByZXR1cm47XG4gICAgLy8gVXRpbGl6YSBWYXVsdC5wcm9jZXNzIHBhcmEgbW9kaWZpY2FyIGVsIGNvbnRlbmlkbyBkZWwgYXJjaGl2b1xuICAgIGF3YWl0IGFwcC52YXVsdC5wcm9jZXNzKGZpbGUsIChjb250ZW50KSA9PiB7XG4gICAgICAgIC8vIENvbmNhdGVuYSBlbCB0ZXh0byBkZSBlbnRyYWRhIGVuIGxhIHByaW1lcmEgbFx1MDBFRG5lYSB5IGVsIGNvbnRlbmlkbyBvcmlnaW5hbFxuICAgICAgICBjb25zdCBuZXdDb250ZW50ID0gaW5ib3ggKyBjb250ZW50O1xuICAgICAgICByZXR1cm4gbmV3Q29udGVudDsgLy8gUmV0b3JuYSBlbCBudWV2byBjb250ZW5pZG8gcGFyYSBzZXIgZ3VhcmRhZG9cbiAgICB9KTtcbn1cblxuXG5cbiIsICJpbXBvcnQgeyBNb2RhbCwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgQmFuZGVqYURlRW50cmFkYU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIGlucHV0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBjaGVja0JveDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIHJlc29sdmVyOiAodmFsdWU6IHsgdGV4dDogc3RyaW5nOyBzYXZlSW5DdXJyZW50OiBib29sZWFuIH0pID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxJbmJveFwiKTtcbiAgICAgICAgbGV0IHtjb250ZW50RWx9ID0gdGhpcztcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KFwiQmFuZGVqYSBkZSBFbnRyYWRhXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gRW52dWVsdmUgZWwgXHUwMEUxcmVhIGRlIHRleHRvIGVuIHVuIGRpdiBwYXJhIGNvbnRyb2wgZGUgZmx1am9cbiAgICAgICAgbGV0IHRleHRBcmVhRGl2ID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgdGhpcy5pbnB1dEFyZWEgPSB0ZXh0QXJlYURpdi5jcmVhdGVFbCgndGV4dGFyZWEnKTtcbiAgICAgICAgdGhpcy5pbnB1dEFyZWEuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsICdFc2NyaWJlIHR1IHRhcmVhIGFxdVx1MDBFRC4uLicpO1xuICAgICAgICAvLyBBXHUwMEYxYWRlIHVuIGxpc3RlbmVyIGRlIGV2ZW50byAna2V5ZG93bicgYWwgdGV4dGFyZWFcbiAgICAgICAgdGhpcy5pbnB1dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgICAgICAvLyBWZXJpZmljYSBzaSBsYSB0ZWNsYSBwcmVzaW9uYWRhIGVzIEVudGVyIHkgcXVlIG5vIGhheWEgbmluZ3VuYSBtb2RpZmljYWNpXHUwMEYzbiAoc2hpZnQsIGN0cmwsIGFsdClcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSAmJiAhZS5jdHJsS2V5ICYmICFlLmFsdEtleSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gUHJldmllbmUgZWwgY29tcG9ydGFtaWVudG8gcG9yIGRlZmVjdG8gcGFyYSBubyBpbnNlcnRhciB1bmEgbnVldmEgbFx1MDBFRG5lYVxuICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0Rm9ybSgpOyAvLyBMbGFtYSBhIGxhIGZ1bmNpXHUwMEYzbiBxdWUgbWFuZWphIGVsIGVudlx1MDBFRG9cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpO1xuICAgICAgICBsZXQgbmFtZUFjdGl2ZUZpbGUgPSBtZXRhZGF0YS5hbGlhc2VzID8gbWV0YWRhdGEuYWxpYXNlc1swXSA6IGFjdGl2ZUZpbGUuYmFzZW5hbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBFbnZ1ZWx2ZSBlbCBjaGVja2JveCB5IHN1IGV0aXF1ZXRhIGVuIHVuIGRpdiBwYXJhIGNvbnRyb2wgZGUgZmx1am9cbiAgICAgICAgbGV0IGNoZWNrQm94RGl2ID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcbiAgICAgICAgdGhpcy5jaGVja0JveCA9IGNoZWNrQm94RGl2LmNyZWF0ZUVsKCdpbnB1dCcsIHt0eXBlOiAnY2hlY2tib3gnfSk7XG4gICAgICAgIGNoZWNrQm94RGl2LmNyZWF0ZUVsKCdsYWJlbCcsIHt0ZXh0OiBgR3VhcmRhciBlbiAke25hbWVBY3RpdmVGaWxlfWB9KS5wcmVwZW5kKHRoaXMuY2hlY2tCb3gpO1xuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gY2hlY2tCb3hEaXYuY3JlYXRlRWwoJ2J1dHRvbicsIHt0ZXh0OiAnR3VhcmRhcid9KTtcbiAgICAgICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3VibWl0Rm9ybSgpKTtcbiAgICB9XG4gICAgXG4gICAgc3VibWl0Rm9ybSgpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuaW5wdXRBcmVhLnZhbHVlO1xuICAgICAgICBjb25zdCBzYXZlSW5DdXJyZW50ID0gdGhpcy5jaGVja0JveC5jaGVja2VkO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyKHsgdGV4dCwgc2F2ZUluQ3VycmVudCB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcblxuICAgIHdhaXRGb3JJbnB1dCgpOiBQcm9taXNlPHsgdGV4dDogc3RyaW5nOyBzYXZlSW5DdXJyZW50OiBib29sZWFuIH0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSS9zdWJzaXN0ZW1hc0FQSS50c1xuICogUGF0aDogL3NyYy9tb2R1bGVzL25vdGVMaWZlY3ljbGVNYW5hZ2VyL0FQSVxuICogQ3JlYXRlZCBEYXRlOiAyMDI0LTAzLTE5IDEzOjExOjI2XG4gKiBBdXRob3I6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogTGFzdCBNb2RpZmllZDogMjAyNS0wMi0yMyAxNzo0OTozM1xuICogTW9kaWZpZWQgQnk6IEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1IC0gQW5kclx1MDBFOXMgSnVsaVx1MDBFMW4gQm9yYlx1MDBGM25cbiAqL1xuXG5pbXBvcnQgeyBURmlsZSwgVEZvbGRlciB9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5pbnRlcmZhY2UgR3J1cG9BViB7XG4gIGdydXBvOiBzdHJpbmc7XG4gIGF2OiBzdHJpbmc7XG4gIHRleHRvOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBjbGFzcyBzdWJzaXN0ZW1hc0FQSSB7XG4gIGNvbnN0cnVjdG9yKHBsdWdpbikge1xuICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIHRoaXMucGF0aENhbXBvcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbGVfY2FtcG9zQ2VudHJhbCArIFwiLm1kXCI7XG4gIH1cblxuICAvLyBGdW5jaVx1MDBGM24gcGFyYSBjcmVhciB5IG1vc3RyYXIgZWwgYm90XHUwMEYzbiBpbmljaWFsIFwiTWVuXHUwMEZBIGhveVwiXG4gIGFzeW5jIG1vc3RyYXJCb3RvbkNyZWFyQVYoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgQXJlYXMgZGUgVmlkYVwiO1xuICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChib3Rvbk1lbnVIb3kpO1xuXG4gICAgYm90b25NZW51SG95Lm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0aGlzLnByb2Nlc2FyQVYoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ3JlYXJBVlRyaW1lc3RyYWwoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3Rvbk1lbnVIb3kgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uTWVudUhveS50ZXh0Q29udGVudCA9IFwiUHJvY2VzYXIgQXJlYXMgZGUgVmlkYSBkZWwgdHJpbWVzdHJlXCI7XG4gICAgZHYuY29udGFpbmVyLmFwcGVuZENoaWxkKGJvdG9uTWVudUhveSk7XG5cbiAgICBib3Rvbk1lbnVIb3kub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJBVlRyaW1lc3RyZShkdik7IC8vIE1vc3RyYXIgbG9zIGJvdG9uZXMgYWRpY2lvbmFsZXMgYWwgaGFjZXIgY2xpY1xuICAgIH07XG4gIH1cblxuICBhc3luYyBwcm9jZXNhckFWKGR2KSB7XG4gICAgLy8gT2J0ZW5lciBRcyBwYXJhIHByZWd1bnRhciBlbCBRIHBhcmEgZWwgcXVlIGRlc2VhIGNyZWFyIGxhcyBcdTAwRTFyZWFzIGRlIHZpZGEuXG4gICAgY29uc3QgZm9sZGVyUSA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1RyaW1lc3RyYWxcIl07XG4gICAgY29uc3QgZmlsZXNRID0gYXBwLnZhdWx0XG4gICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAuZmlsdGVyKFxuICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyUSkgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBxQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc1EpIHtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8udHlwZSA9PT0gXCJUUVwiICYmIG1ldGFkYXRhPy50cmltZXN0cmUpIHtcbiAgICAgICAgbGV0IHFBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKHFBY3Rpdm8sIG1ldGFkYXRhKTsgLy8gQWdyZWdhIGVsIG1ldGFkYXRhIGFsIG9iamV0byBxQWN0aXZvXG4gICAgICAgIHFDcmVhZG9zLnB1c2gocUFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgcSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYi50cmltZXN0cmUpLFxuICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiKSxcbiAgICAgIHRydWUsXG4gICAgICBgRGUgcXVlIHRyaW1lc3RyZSB2YW1vcyBhIHByb2Nlc2FyIHR1cyBBcmVhcyBkZSBWaWRhYFxuICAgICk7XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cblxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIEZpbiBwcm9jZXNhckFWKClcblxuXG4gIGFzeW5jIHByb2Nlc2FyQVZUcmltZXN0cmUoZHYpIHtcbiAgICBcbiAgICBsZXQgcSA9IHt9OyBcbiAgICBxLnRyaW1lc3RyZSA9IGR2LmN1cnJlbnQoKS50cmltZXN0cmU7XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cblxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZhbGlkYWNpb25BVlEoZnVsbEZvbGRlclBhdGgsIHEsIGFyZWFWaWRhKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMudmFsaWRhY2lvbkFWUShmdWxsRm9sZGVyUGF0aCwgcSwgYXJlYVZpZGEpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIEZpbiBwcm9jZXNhckFWVHJpbWVzdHJlKClcblxuXG4gIC8vUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gIGFzeW5jIHZhbGlkYWNpb25BVlEoXG4gICAgZnVsbEZvbGRlclBhdGg6IHN0cmluZyxcbiAgICBxOiBhbnksXG4gICAgYXJlYVZpZGE6IGFueVxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBwYXRoQVZRID0gYCR7ZnVsbEZvbGRlclBhdGh9LyR7cS50cmltZXN0cmV9IC0gJHthcmVhVmlkYS5hdn0ubWRgO1xuICAgIGNvbnN0IGZpbGVBVlEgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGhBVlEpO1xuICAgIGRlYnVnZ2VyO1xuICAgIC8vIFZlcmlmaWNhciBzaSBlbCBBViBkZSBRIEV4aXN0ZVxuICAgIC8vIFAyIFNJXG4gICAgLy8gQ0FTTyA0XG4gICAgLy8gQ0FTTyA1XG4gICAgaWYgKGZpbGVBVlEgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICAgIGxldCBuZXh0U3RlcCA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1xuICAgICAgICAgIFwiQWN0dWFsaXphciBlc3RhZG8gZGVsIEFWXCIsXG4gICAgICAgICAgXCJCb3JyYXIgeSBDcmVhciBkZSBudWV2byBlbCBBVlwiLFxuICAgICAgICAgIFwiRGVqYXIgZWwgQVYgY29tbyBlc3RcdTAwRTEgXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcInVwZFwiLCBcImRlbCtjcmVcIiwgXCJjb250aW51ZVwiXSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYFx1MDBCRiR7cS50cmltZXN0cmV9ICR7YXJlYVZpZGEuYXZ9IHlhIGV4aXN0ZS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG4gICAgICBzd2l0Y2ggKG5leHRTdGVwKSB7XG4gICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdHVhbGl6YXJBVlEoZmlsZUFWUSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkZWwrY3JlXCI6XG4gICAgICAgICAgYXdhaXQgdGhpcy5ib3JyYXJBVlEoZmlsZUFWUSk7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hZ3JlZ2FyQVZRKGFyZWFWaWRhLCBxLnRyaW1lc3RyZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJjb250aW51ZVwiOlxuICAgICAgICAgIGNvbnNvbGUubG9nKGBDb250aW51YXIgc2luIGhhY2VyIG5hZGEgY29uICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIFNpIEFWIGRlIFEgZXhpc3RlICgxKSBtdWVzdHJhIGVsIGVzdGFkbyB5IHBlcm1pdGUgY2FtYmlhcmxvLlxuICAgIH1cbiAgICAvLyBQMiBOT1xuICAgIC8vIC0+PiBDQVNPIDFcbiAgICAvLyAtPj4gQ0FTTyAzXG4gICAgLy8gLS0+IENBU08gNlxuICAgIGVsc2Uge1xuICAgICAgZGVidWdnZXI7XG4gICAgICAvLyBTaSBBViBkZSBRIG5vIEV4aXN0ZSAoMikgQWdyZWdhIEFyZWFWaWRhIGRlIFEsIHByZWd1bnRhbmRvIGVuIHF1ZSBlc3RhZG8gcXVpZXJlIHRlbmVyIGVzYSBBViBlc2UgUVxuICAgICAgYXdhaXQgdGhpcy5hZ3JlZ2FyQVZRKGFyZWFWaWRhLCBxLnRyaW1lc3RyZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUDMgQWdyZWdhciBub2RvQXJlYVZpZGE/XG4gIGFzeW5jIGFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpIHtcbiAgICAvLyBwcmVndW50YXIgcHJpbWVybyBzaSBzaSBsbyBkZXNlYSBhZ3JlZ2FyLlxuXG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgYWdyZWdhciA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgdHJ1ZSxcbiAgICAgIGBcdTAwQkZEZXNlYXMgYWdyZWdhciAke2FyZWFWaWRhLmF2fSBhIHR1IHNpc3RlbWEgZGUgZ2VzdGlcdTAwRjNuP2BcbiAgICApO1xuICAgIC8vIFAzIFNJXG4gICAgaWYgKGFncmVnYXIpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYFBsYW50aWxsYXMvJHtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9BcmVhc1ZpZGFgXVxuICAgICAgfS9QbHQgLSBub2RvQXJlYXNWaWRhLm1kYDtcbiAgICAgIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm9kb0FyZWFWaWRhIHRlbXBsYXRlIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byB0ZW1wbGF0ZSBub2RvQXJlYVZpZGEgbm8gZW5jb250cmFkby5cIik7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYXJlYVZpZGEuZ3J1cG8gKyBcIiAtIFwiICsgYXJlYVZpZGEuYXY7XG4gICAgICBsZXQgZm9sZGVyUGF0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfQXJlYXNWaWRhYF19LyR7XG4gICAgICAgIGFyZWFWaWRhLmF2XG4gICAgICB9YDtcbiAgICAgIC8vIFNlIGFzZWd1cmEgZGUgcXVlIGxhIGNhcnBldGEgZXhpc3RhIHBhcmEgcG9kZXIgY3JlYXIgZWwgYXJjaGl2byBkaXJlY3RhbWVudGUgZW4gZXNhIGNhcnBldGFcbiAgICAgIGF3YWl0IHRoaXMuY3JlYXJDYXJwZXRhKGZvbGRlclBhdGgpO1xuICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICAgIGxldCBjcmVhck5vdGE6IChcbiAgICAgICAgdGVtcGxhdGU6IFRGaWxlLFxuICAgICAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgICAgICBvdmVyd3JpdGU6IGJvb2xlYW4sXG4gICAgICAgIGZvbGRlcjogVEZvbGRlclxuICAgICAgKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgICAgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBub3RhID0gYXdhaXQgY3JlYXJOb3RhKHRlbXBsYXRlLCBmaWxlbmFtZSwgZmFsc2UsIGZvbGRlcik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNyZWFuZG8gTm9kb0FyZWFWaWRhOiBcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBhZ3JlZ2FyQVZRKGFyZWFWaWRhOiBhbnksIHRyaW1lc3RyZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9BcmVhc1ZpZGF9L1BsdCAtIEFyZWFzVmlkYS5tZGA7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblxuICAgIGlmICghKHRlbXBsYXRlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIEFzZWd1cmEgcXVlIGxhIGZ1bmNpXHUwMEYzbiByZXRvcm5hIHVuIGJvb2xlYW5vIGluY2x1c28gZW4gY2FzbyBkZSBlcnJvci5cbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke3RyaW1lc3RyZX0gLS0gJHthcmVhVmlkYS5hdn0gLS0gJHthcmVhVmlkYS5ncnVwb31gO1xuICAgIGxldCBmb2xkZXJQYXRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbYGZvbGRlcl9BcmVhc1ZpZGFgXX0vJHtcbiAgICAgIGFyZWFWaWRhLmF2XG4gICAgfWA7XG4gICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKSBhcyBURm9sZGVyOyAvLyBBc2VnXHUwMEZBcmF0ZSBkZSBxdWUgXCJJbmJveFwiIHJlYWxtZW50ZSBleGlzdGEgeSBzZWEgdW4gVEZvbGRlci5cblxuICAgIC8vIEFzdW1pZW5kbyBxdWUgZWwgdGlwbyBkZSBgZm9sZGVyYCBlcyBjb3JyZWN0byB5IHF1ZSBjcmVhck5vdGEgZXMgdW5hIGZ1bmNpXHUwMEYzbiBhc2luY3JcdTAwRjNuaWNhIHF1ZSBkZXZ1ZWx2ZSB2b2lkLlxuICAgIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBhcyAoXG4gICAgICB0ZW1wbGF0ZTogVEZpbGUsXG4gICAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgICAgb3ZlcndyaXRlOiBib29sZWFuLFxuICAgICAgZm9sZGVyOiBURm9sZGVyXG4gICAgKSA9PiBQcm9taXNlPHZvaWQ+O1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhbmRvIEFyZWFWaWRhOiBcIiwgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGJvcnJhckFWUShmaWxlQVZRKSB7XG4gICAgY29uc29sZS5sb2coYExvZ2ljYSBkZSBib3JyYWRvIGRlICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcbiAgICB0cnkge1xuICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgZmlsZUFWUSBlcyB1biBvYmpldG8gVEZpbGUgdlx1MDBFMWxpZG9cbiAgICAgIGlmIChmaWxlQVZRIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShmaWxlQVZRKTsgLy8gQm9ycmFyIGVsIGFyY2hpdm9cbiAgICAgICAgY29uc29sZS5sb2coYCR7ZmlsZUFWUS5iYXNlbmFtZX0gaGEgc2lkbyBib3JyYWRvIGNvbiBcdTAwRTl4aXRvLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgJHtmaWxlQVZRLmJhc2VuYW1lfSBubyBlcyB1biBhcmNoaXZvIHZcdTAwRTFsaWRvIG8gbm8gZXhpc3RlLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGludGVudGFyIGJvcnJhciAke2ZpbGVBVlEuYmFzZW5hbWV9OmAsIGVycik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWN0dWFsaXphckFWUShmaWxlQVZRKSB7XG4gICAgY29uc29sZS5sb2coYExvZ2ljYSBkZSBhY3R1YWxpemFjaVx1MDBGM24gZGUgZXN0YWRvIGRlICR7ZmlsZUFWUS5iYXNlbmFtZX1gKTtcblxuICAgIC8vIE9idGVuZXIgYWNjZXNvIGEgZnVuY2lvbmVzIGRlbCBzaXN0ZW1hIHkgbWV0YWRhdGFDYWNoZVxuICAgIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gICAgbGV0IG1ldGFkYXRhQ2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUFWUSk7XG5cbiAgICAvLyBJbmljaWFsaXphciB2YXJpYWJsZXNcbiAgICBsZXQgZXN0YWRvQWN0dWFsID0gXCJcIjtcbiAgICBsZXQgbnVldm9Fc3RhZG8gPSBcIlwiO1xuXG4gICAgLy8gT2J0ZW5lciBlbCBlc3RhZG8gYWN0dWFsIGRlc2RlIGVsIGZyb250bWF0dGVyIHVzYW5kbyBtZXRhZGF0YUNhY2hlXG4gICAgaWYgKFxuICAgICAgbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlciAmJlxuICAgICAgbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlci5oYXNPd25Qcm9wZXJ0eShcImVzdGFkb1wiKVxuICAgICkge1xuICAgICAgZXN0YWRvQWN0dWFsID0gbWV0YWRhdGFDYWNoZS5mcm9udG1hdHRlci5lc3RhZG87XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiTm8gc2UgZW5jb250clx1MDBGMyBlbCBlc3RhZG8gYWN0dWFsIGVuIGVsIGZyb250bWF0dGVyLlwiKTtcbiAgICAgIHJldHVybjsgLy8gU2FsaXIgc2kgbm8gaGF5IGVzdGFkbyBhY3R1YWxcbiAgICB9XG5cbiAgICAvLyBNb3N0cmFyIGVsIHN1Z2dlc3RlciBwYXJhIHNlbGVjY2lvbmFyIGVsIG51ZXZvIGVzdGFkb1xuICAgIHRyeSB7XG4gICAgICBudWV2b0VzdGFkbyA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1wiXHVEODNEXHVERDM1IC0+IEFyY2hpdmFkb1wiLCBcIlx1RDgzRFx1REZFMiAtPiBBY3Rpdm9cIiwgXCJcdUQ4M0RcdURGRTEgLT4gRW4gUGF1c2FcIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sIC8vIG9wY2lvbmVzIHBhcmEgbW9zdHJhclxuICAgICAgICBbXCJcdUQ4M0RcdUREMzVcIiwgXCJcdUQ4M0RcdURGRTJcIiwgXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIC8vIHZhbG9yZXMgYSByZXRvcm5hclxuICAgICAgICBmYWxzZSwgLy8gcGVybWl0ZSBzZWxlY2NpXHUwMEYzbiBtXHUwMEZBbHRpcGxlXG4gICAgICAgIGAke2ZpbGVBVlEuYmFzZW5hbWV9IGVzdFx1MDBFMSAke2VzdGFkb0FjdHVhbH0uIEFzaWduYXIgZXN0YWRvOmAgLy8gbWVuc2FqZVxuICAgICAgKTtcblxuICAgICAgLy8gVmVyaWZpY2FyIHNpIHNlIHNlbGVjY2lvblx1MDBGMyB1biBudWV2byBlc3RhZG9cbiAgICAgIGlmICghbnVldm9Fc3RhZG8pIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJObyBzZSBzZWxlY2Npb25cdTAwRjMgdW4gbnVldm8gZXN0YWRvLlwiKTtcbiAgICAgICAgcmV0dXJuOyAvLyBTYWxpciBzaSBubyBzZSBzZWxlY2Npb25cdTAwRjMgdW4gbnVldm8gZXN0YWRvXG4gICAgICB9XG5cbiAgICAgIC8vIEFjdHVhbGl6YXIgZWwgZXN0YWRvIGVuIGVsIGZyb250bWF0dGVyXG4gICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGVBVlEsIChmcm9udG1hdHRlcikgPT4ge1xuICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoXCJlc3RhZG9cIikpIHtcbiAgICAgICAgICBmcm9udG1hdHRlci5lc3RhZG8gPSBudWV2b0VzdGFkbzsgLy8gQWN0dWFsaXphciBlbCBlc3RhZG9cbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkVzdGFkbyBhY3R1YWxpemFkbyBjb24gXHUwMEU5eGl0byBhOlwiLCBudWV2b0VzdGFkbyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZXN0YWRvIGVuIGVsIGZyb250bWF0dGVyOlwiLCBlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWFyQ2FycGV0YShmb2xkZXJQYXRoOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSB5YSBleGlzdGVcblxuICAgICAgY29uc3QgY2FycGV0YUV4aXN0ZW50ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICBpZiAoY2FycGV0YUV4aXN0ZW50ZSBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIHlhIGV4aXN0ZS5gKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ3JlYSBsYSBjYXJwZXRhXG4gICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgY29uc29sZS5sb2coYENhcnBldGEgJyR7Zm9sZGVyUGF0aH0nIGNyZWFkYSBleGl0b3NhbWVudGUuYCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGNyZWFyIGxhIGNhcnBldGEgJyR7Zm9sZGVyUGF0aH0nOmAsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvLyBQQVJBIFBST0NFU0FSIExPUyBDT01QQVNTXG5cbiAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gZGUgcHJvY2VzYXIgT2JqZXRpdm9zIGRlIGxhcyBBViBhbnVhbGVzIGVuIGVsIHByb2Nlc28gZGUgQ29tcGFzcy5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ29tcGFzc0FudWFsKGR2KSB7XG4gICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuXG4gICAgY29uc3QgYm90b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGJvdG9uLnRleHRDb250ZW50ID0gXCJQcm9jZXNhciBPYmpldGl2b3MgQVYgQW51YWxcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuXG4gICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJDb21wYXNzQW51YWwoZHYpOyAvLyBNb3N0cmFyIGxvcyBib3RvbmVzIGFkaWNpb25hbGVzIGFsIGhhY2VyIGNsaWNcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgbW9zdHJhckJvdG9uQ29tcGFzc1RyaW1lc3RyYWwoZHYpIHtcbiAgICBkdi5jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjsgLy8gTGltcGlhciBlbCBjb250ZW5lZG9yXG5cbiAgICBjb25zdCBib3RvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgYm90b24udGV4dENvbnRlbnQgPSBcIlByb2Nlc2FyIE9iamV0aXZvcyBBViBUcmltZXN0cmFsZXNcIjtcbiAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b24pO1xuXG4gICAgYm90b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRoaXMucHJvY2VzYXJDb21wYXNzVHJpbWVzdHJhbChkdik7IFxuICAgIH07XG4gIH1cblxuICBhc3luYyBwcm9jZXNhckNvbXBhc3NBbnVhbChkdikge1xuICBcbiAgICBsZXQgYVx1MDBGMW8gPSBkdi5jdXJyZW50KCkuYVx1MDBGMW87XG4gICAgY29uc3QgcmVzdWx0YWRvQVY6IEdydXBvQVZbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVDYW1wb3MgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMucGF0aENhbXBvcyk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChmaWxlQ2FtcG9zIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgLy8gVXNhIG1ldGFkYXRhQ2FjaGUgcGFyYSBvYnRlbmVyIGxvcyBtZXRhZGF0b3MgZGVsIGFyY2hpdm9cbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZUNhbXBvcyk7XG4gICAgICAgIGNvbnN0IGFycmVnbG9BViA9IG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uQXJlYXNWaWRhIHx8IFtdO1xuICAgICAgICAvLyBSZWxsZW5hIGVsIGFycmVnbG8gY29uIGxvcyBkYXRvcyBkZWwgYXJyZWdsb1Jlc3VsdFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcnJlZ2xvQVYpKSB7XG4gICAgICAgICAgYXJyZWdsb0FWLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pICYmIGl0ZW0ubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgcmVzdWx0YWRvQVYucHVzaCh7XG4gICAgICAgICAgICAgICAgZ3J1cG86IGl0ZW1bMF0sXG4gICAgICAgICAgICAgICAgYXY6IGl0ZW1bMV0sXG4gICAgICAgICAgICAgICAgdGV4dG86IGl0ZW1bMF0gKyBcIiAvIFwiICsgaXRlbVsxXSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIG9idGVuaWVuZG8gZWwgYXJjaGl2byBkZSBjYW1wb3M6XCIsIGVycm9yKTtcbiAgICAgIC8vIEFxdVx1MDBFRCBtYW5lamFyXHUwMEVEYXMgZWwgZXJyb3IgY29tbyBzZWEgYXByb3BpYWRvIHBhcmEgdHUgYXBsaWNhY2lcdTAwRjNuXG4gICAgICB0aHJvdyBlcnJvcjsgLy8gTyBkZXZvbHZlciB1biBhcnJlZ2xvIHZhY1x1MDBFRG8gY29tbyByZXN1bHRhZG8gZGUgZXJyb3JcbiAgICB9XG5cbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG4gICAgbGV0IGJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX0FyZWFzVmlkYTtcblxuICAgIC8vIC0uLi0+IFJldmlzaVx1MDBGM24gZGUgZXNjZW5hcmlvcy5cbiAgICBkZWJ1Z2dlcjtcbiAgICBmb3IgKGxldCBhcmVhVmlkYSBvZiByZXN1bHRhZG9BVikge1xuICAgICAgLy8gVmVyaWZpY2Egc2kgbGEgY2FycGV0YSBleGlzdGUgZW4gbGEgdWJpY2FjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhXG4gICAgICBjb25zdCBmdWxsRm9sZGVyUGF0aCA9IGAke2Jhc2VQYXRofS8ke2FyZWFWaWRhLmF2fWA7XG4gICAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZ1bGxGb2xkZXJQYXRoKTtcblxuICAgICAgLy9QMCAtPiBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIHBhdGgvYXJlYVZpZGEgZXhpc3RlXG4gICAgICAvL1AwIC0gU0lcbiAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBMYSBjYXJwZXRhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgJHtiYXNlUGF0aH0uYCk7XG4gICAgICAgIC8vIEFob3JhLCB2ZXJpZmljYSBzaSBsYSBub3RhIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YVxuICAgICAgICBjb25zdCBpbnN0YW5jZXNPZkFWID0gYXBwLnZhdWx0XG4gICAgICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgICAgIC5maWx0ZXIoXG4gICAgICAgICAgICAoZmlsZSkgPT5cbiAgICAgICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZ1bGxGb2xkZXJQYXRoKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgICAgICk7XG4gICAgICAgIC8vIFAxIEV4aXN0ZSBub2RlQXJlYVZpZGE/XG4gICAgICAgIGNvbnN0IG5vZGVBVkV4aXN0cyA9IGluc3RhbmNlc09mQVYuc29tZShcbiAgICAgICAgICAoZmlsZSkgPT4gZmlsZS5iYXNlbmFtZSA9PT0gYXJlYVZpZGEuYXZcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBQMSBTSVxuICAgICAgICBpZiAobm9kZUFWRXhpc3RzKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDIgYXJlYVZpZGEgUSBFeGlzdGU/XG4gICAgICAgICAgLy8gUHJlZ3VudGFyIEVsIG9iamV0aXZvIHkgZ3VhcmRhcmxvIGVuIGVsIG5vZG8gZGUgQVYuXG4gICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b0FudWFsKGFcdTAwRjFvLCBhcmVhVmlkYS5hdik7XG4gICAgICAgIH1cbiAgICAgICAgLy9QMSAtIE5PIChub2RlQXJlYVZpZGEgbm8gRXhpc3RlKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBDYXNvIDMgeSA0XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTGEgbm90YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgZGVudHJvIGRlIGxhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0uYFxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgICBsZXQgbkFWID0gYXdhaXQgdGhpcy5hZ3JlZ2FyTm9kb0FyZWFWaWRhKGFyZWFWaWRhKTsgLy8gUXVpZXJlcyBBZ3JlZ2FyIGVzdGEgQVYgYSB0dSBzaXN0ZW1hIGRlIEdlc3RpXHUwMEYzbj9cbiAgICAgICAgICAvL1AzIC0+IFNJXG4gICAgICAgICAgaWYgKG5BVikge1xuICAgICAgICAgICAgLy8gUDIgLi4gLT4gU2kgeSBOb1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5vYmpldGl2b0FudWFsKGFcdTAwRjFvLCBhcmVhVmlkYS5hdik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgICBlbHNlIGlmIChuQVYgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBQTyAtPiBOTyAoTGEgQ2FycGV0YSBubyBleGlzdGUpXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gbm8gZXhpc3RlIGFcdTAwRkFuIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gXG4gICAgICAgICk7XG4gICAgICAgIC8vIFAzIEFncmVnYXIgTm9kbyBBcmVhIFZpZGE/XG4gICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAvLyBQMyAtPiBTSVxuICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgLy8gUDJcbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvQW51YWwoYVx1MDBGMW8sIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AzIC0+IE5PXG4gICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgIGNvbnRpbnVlOyAvL1NlbnRlbmNpYSBxdWUgZGViZSBwYXNhciBhbCBzaWd1aWVudGUgZWxlbWVudG8gZGVsIGNpY2xvIGZvci5cbiAgICAgICAgfVxuICAgICAgICAvLyBQMyAtPiBFc2NhcGVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuOyAvLyBFbiBjYXNvIGRlIHF1ZSBzZSBkZSBlc2NhcGUuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIEZpbiBGb3IgQXJlYXNWaWRhIGZpbGVDYW1wb3NcbiAgfSAvLyBNZXRvZG8gUHJvY2VzYXIgQ29tcGFzcyBBbnVhbFxuXG4gIGFzeW5jIHByb2Nlc2FyQ29tcGFzc1RyaW1lc3RyYWwoZHYpIHtcbiAgICBkZWJ1Z2dlcjtcbiAgICBsZXQgdHJpbWVzdHJlID0gZHYuY3VycmVudCgpLnRyaW1lc3RyZTtcbiAgICBjb25zdCByZXN1bHRhZG9BVjogR3J1cG9BVltdID0gW107XG4gICAgY29uc3QgZmlsZUNhbXBvcyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGhpcy5wYXRoQ2FtcG9zKTtcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGVDYW1wb3MgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAvLyBVc2EgbWV0YWRhdGFDYWNoZSBwYXJhIG9idGVuZXIgbG9zIG1ldGFkYXRvcyBkZWwgYXJjaGl2b1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlQ2FtcG9zKTtcbiAgICAgICAgY29uc3QgYXJyZWdsb0FWID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy5BcmVhc1ZpZGEgfHwgW107XG4gICAgICAgIC8vIFJlbGxlbmEgZWwgYXJyZWdsbyBjb24gbG9zIGRhdG9zIGRlbCBhcnJlZ2xvUmVzdWx0XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycmVnbG9BVikpIHtcbiAgICAgICAgICBhcnJlZ2xvQVYuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkgJiYgaXRlbS5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgICByZXN1bHRhZG9BVi5wdXNoKHtcbiAgICAgICAgICAgICAgICBncnVwbzogaXRlbVswXSxcbiAgICAgICAgICAgICAgICBhdjogaXRlbVsxXSxcbiAgICAgICAgICAgICAgICB0ZXh0bzogaXRlbVswXSArIFwiIC8gXCIgKyBpdGVtWzFdLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3Igb2J0ZW5pZW5kbyBlbCBhcmNoaXZvIGRlIGNhbXBvczpcIiwgZXJyb3IpO1xuICAgICAgLy8gQXF1XHUwMEVEIG1hbmVqYXJcdTAwRURhcyBlbCBlcnJvciBjb21vIHNlYSBhcHJvcGlhZG8gcGFyYSB0dSBhcGxpY2FjaVx1MDBGM25cbiAgICAgIHRocm93IGVycm9yOyAvLyBPIGRldm9sdmVyIHVuIGFycmVnbG8gdmFjXHUwMEVEbyBjb21vIHJlc3VsdGFkbyBkZSBlcnJvclxuICAgIH1cblxuICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICBsZXQgYmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfQXJlYXNWaWRhO1xuXG4gICAgLy8gLS4uLT4gUmV2aXNpXHUwMEYzbiBkZSBlc2NlbmFyaW9zLlxuICAgIGZvciAobGV0IGFyZWFWaWRhIG9mIHJlc3VsdGFkb0FWKSB7XG4gICAgICAvLyBWZXJpZmljYSBzaSBsYSBjYXJwZXRhIGV4aXN0ZSBlbiBsYSB1YmljYWNpXHUwMEYzbiBlc3BlY1x1MDBFRGZpY2FcbiAgICAgIGNvbnN0IGZ1bGxGb2xkZXJQYXRoID0gYCR7YmFzZVBhdGh9LyR7YXJlYVZpZGEuYXZ9YDtcbiAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZnVsbEZvbGRlclBhdGgpO1xuXG4gICAgICAvL1AwIC0+IFZlcmlmaWNhIHNpIGxhIGNhcnBldGEgcGF0aC9hcmVhVmlkYSBleGlzdGVcbiAgICAgIC8vUDAgLSBTSVxuICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coYExhIGNhcnBldGEgJHthcmVhVmlkYS5hdn0gZXhpc3RlIGRlbnRybyBkZSAke2Jhc2VQYXRofS5gKTtcbiAgICAgICAgLy8gQWhvcmEsIHZlcmlmaWNhIHNpIGxhIG5vdGEgZXhpc3RlIGRlbnRybyBkZSBsYSBjYXJwZXRhXG4gICAgICAgIGNvbnN0IGluc3RhbmNlc09mQVYgPSBhcHAudmF1bHRcbiAgICAgICAgICAuZ2V0TWFya2Rvd25GaWxlcygpXG4gICAgICAgICAgLmZpbHRlcihcbiAgICAgICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgICAgICBmaWxlLnBhdGguaW5jbHVkZXMoZnVsbEZvbGRlclBhdGgpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICAgICAgKTtcbiAgICAgICAgLy8gUDEgRXhpc3RlIG5vZGVBcmVhVmlkYT9cbiAgICAgICAgY29uc3Qgbm9kZUFWRXhpc3RzID0gaW5zdGFuY2VzT2ZBVi5zb21lKFxuICAgICAgICAgIChmaWxlKSA9PiBmaWxlLmJhc2VuYW1lID09PSBhcmVhVmlkYS5hdlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFAxIFNJXG4gICAgICAgIGlmIChub2RlQVZFeGlzdHMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMiBhcmVhVmlkYSBRIEV4aXN0ZT9cbiAgICAgICAgICAvLyBQcmVndW50YXIgRWwgb2JqZXRpdm8geSBndWFyZGFybG8gZW4gZWwgbm9kbyBkZSBBVi5cbiAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmUsIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgfVxuICAgICAgICAvL1AxIC0gTk8gKG5vZGVBcmVhVmlkYSBubyBFeGlzdGUpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIC8vIENhc28gMyB5IDRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBMYSBub3RhICR7YXJlYVZpZGEuYXZ9IG5vIGV4aXN0ZSBkZW50cm8gZGUgbGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBQMyBBZ3JlZ2FyIE5vZG8gQXJlYSBWaWRhP1xuICAgICAgICAgIGxldCBuQVYgPSBhd2FpdCB0aGlzLmFncmVnYXJOb2RvQXJlYVZpZGEoYXJlYVZpZGEpOyAvLyBRdWllcmVzIEFncmVnYXIgZXN0YSBBViBhIHR1IHNpc3RlbWEgZGUgR2VzdGlcdTAwRjNuP1xuICAgICAgICAgIC8vUDMgLT4gU0lcbiAgICAgICAgICBpZiAobkFWKSB7XG4gICAgICAgICAgICAvLyBQMiAuLiAtPiBTaSB5IE5vXG4gICAgICAgICAgICBhd2FpdCB0aGlzLm9iamV0aXZvVHJpbWVzdHJhbCh0cmltZXN0cmUsIGFyZWFWaWRhLmF2KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9QMyAtPiBOT1xuICAgICAgICAgIGVsc2UgaWYgKG5BViA9PSBmYWxzZSkge1xuICAgICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFBPIC0+IE5PIChMYSBDYXJwZXRhIG5vIGV4aXN0ZSlcbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgTGEgY2FycGV0YSAke2FyZWFWaWRhLmF2fSBubyBleGlzdGUgYVx1MDBGQW4gZGVudHJvIGRlICR7YmFzZVBhdGh9LmBcbiAgICAgICAgKTtcbiAgICAgICAgLy8gUDMgQWdyZWdhciBOb2RvIEFyZWEgVmlkYT9cbiAgICAgICAgbGV0IG5BViA9IGF3YWl0IHRoaXMuYWdyZWdhck5vZG9BcmVhVmlkYShhcmVhVmlkYSk7IC8vIFF1aWVyZXMgQWdyZWdhciBlc3RhIEFWIGEgdHUgc2lzdGVtYSBkZSBHZXN0aVx1MDBGM24/XG4gICAgICAgIC8vIFAzIC0+IFNJXG4gICAgICAgIGlmIChuQVYpIHtcbiAgICAgICAgICAvLyBQMlxuICAgICAgICAgIGF3YWl0IHRoaXMub2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZSwgYXJlYVZpZGEuYXYpO1xuICAgICAgICB9XG4gICAgICAgIC8vUDMgLT4gTk9cbiAgICAgICAgZWxzZSBpZiAobkFWID09IGZhbHNlKSB7XG4gICAgICAgICAgY29udGludWU7IC8vU2VudGVuY2lhIHF1ZSBkZWJlIHBhc2FyIGFsIHNpZ3VpZW50ZSBlbGVtZW50byBkZWwgY2ljbG8gZm9yLlxuICAgICAgICB9XG4gICAgICAgIC8vIFAzIC0+IEVzY2FwZVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm47IC8vIEVuIGNhc28gZGUgcXVlIHNlIGRlIGVzY2FwZS5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gRmluIEZvciBBcmVhc1ZpZGEgZmlsZUNhbXBvc1xuICB9IC8vIE1ldG9kbyBQcm9jZXNhciBDb21wYXNzIFRyaW1lc3RyYWwgXG5cblxuICBhc3luYyBvYmpldGl2b0FudWFsKGFcdTAwRjFvOiBhbnksIGFyZWFWaWRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBCdXNjYXIgc2kgeWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zIHBhcmEgZXNlIGFcdTAwRjFvIHkgZXNhIGFyZWEgZGUgdmlkYS5cblxuICAgIGNvbnN0IGZvbGRlck9iaiA9IHRoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX09iakNvbXBhc3NBbnVhbFwiXTtcbiAgICBjb25zdCBmaWxlc09iaiA9IGFwcC52YXVsdFxuICAgICAgLmdldE1hcmtkb3duRmlsZXMoKVxuICAgICAgLmZpbHRlcihcbiAgICAgICAgKGZpbGUpID0+XG4gICAgICAgICAgZmlsZS5wYXRoLmluY2x1ZGVzKGZvbGRlck9iaikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiUGxhbnRpbGxhc1wiKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJBcmNoaXZvXCIpXG4gICAgICApO1xuICAgIGxldCBvYmpDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzT2JqKSB7XG4gICAgICBkZWJ1Z2dlcjtcbiAgICAgIGxldCBtZXRhZGF0YSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICBjb25zdCByZWdleCA9IC9cXFtcXFtcXHMqKC4qPylcXHMqXFxdXFxdLztcbiAgICAgIGxldCBmaWxlQVYgPSBtZXRhZGF0YT8uYXJlYVZpZGEubWF0Y2gocmVnZXgpWzFdO1xuICAgICAgY29uc3Qgc2FtZUFWID0gZmlsZUFWID09PSBhcmVhVmlkYTtcblxuICAgICAgaWYgKG1ldGFkYXRhPy5hXHUwMEYxbyA9PT0gYVx1MDBGMW8gJiYgc2FtZUFWKSB7XG4gICAgICAgIGxldCBvYmpBY3Rpdm8gPSB7IGZpbGUgfTsgLy8gQXN1bWllbmRvIHF1ZSBxdWllcmVzIGd1YXJkYXIgZWwgcGF0aCBkZWwgYXJjaGl2b1xuICAgICAgICBPYmplY3QuYXNzaWduKG9iakFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgb2JqQ3JlYWRvcy5wdXNoKG9iakFjdGl2byk7IC8vIEFcdTAwRjFhZGUgZWwgcmVnaXN0cm8gYWN0aXZvIGFsIGFycmF5XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBwcm9tcHQgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJwcm9tcHRcIik7XG4gICAgbGV0IHN1Z2dlc3RlciA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInN1Z2dlc3RlclwiKTtcbiAgICBsZXQgb2JqZXRpdm9zID0gW107XG4gICAgbGV0IGRlc2VhQWdyZWdhck9iamV0aXZvO1xuICAgIGlmIChvYmpDcmVhZG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2kgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgICAvLyBMb2dpY2EgY3VhbmRvIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGxldCBuZXh0U3RlcCA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgW1xuICAgICAgICAgIFwiQWdyZWdhciBPYmpldGl2b3NcIixcbiAgICAgICAgICBcIkJvcnJhciB5IENyZWFyIGRlIG51ZXZvIGxvcyBvYmpldGl2b3NcIixcbiAgICAgICAgICBcIkRlamFyIGxvcyBvYmpldGl2b3MgY29tbyBlc3RcdTAwRTFuIFwiLFxuICAgICAgICBdLFxuICAgICAgICBbXCJ1cGRcIiwgXCJkZWwrY3JlXCIsIFwiY29udGludWVcIl0sXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBcdTAwQkZZYSBoYXkgJHtvYmpDcmVhZG9zLmxlbmd0aH0gb2JqZXRpdm9zIGNyZWFkb3MgcGFyYSAke2FyZWFWaWRhfSBlbiBlbCAke2FcdTAwRjFvfS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG5cbiAgICAgICAgc3dpdGNoIChuZXh0U3RlcCkge1xuICAgICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyk7XG5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSB3aGlsZSAoZGVzZWFBZ3JlZ2FyT2JqZXRpdm8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcImRlbCtjcmVcIjpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYm9ycmFyT2JqZXRpdm9zKG9iakNyZWFkb3MpO1xuICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIGFsZ1x1MDBGQW4gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pO1xuICAgICAgICAgICAgICAvLyBCb3JyYXIgbG9zIG9iamV0aXZvcyBhbnRlcmlvcmVzLlxuICAgICAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgICAgIFtcIlNpXCIsIFwiTm9cIl0sXG4gICAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGBcdTAwQkZEZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfSBlbiAke2FcdTAwRjFvfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiY29udGludWVcIjpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDb250aW51YXIgc2luIGhhY2VyIG5hZGEgY29uIGxvcyBvYmpldGl2b3MgZGUgJHthcmVhVmlkYX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBObyBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICBlbHNlIHtcbiAgICAgICAgLy8gVmVyaWZpY2FyIHNpIGRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2by5cbiAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7YVx1MDBGMW99P2BcbiAgICAgICAgKTtcbiAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvKGFyZWFWaWRhLCBhXHUwMEYxbyk7XG4gICAgICAgICAgb2JqZXRpdm9zLnB1c2goW29iamV0aXZvXSk7XG5cbiAgICAgICAgICAvLyBQcmVndW50YXIgbnVldmFtZW50ZSBzaSBkZXNlYSBhZ3JlZ2FyIG90cm8gb2JqZXRpdm8uXG4gICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHthXHUwMEYxb30/YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfSAvLyBNXHUwMEU5dG9kbyBvYmpldGl2b0FudWFsLlxuICBcbiAgYXN5bmMgb2JqZXRpdm9UcmltZXN0cmFsKHRyaW1lc3RyZTogYW55LCBhcmVhVmlkYTogYW55KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgZGVidWdnZXI7XG4gICAgLy8gQnVzY2FyIHNpIHlhIGhheSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhIGVzZSBhXHUwMEYxbyB5IGVzYSBhcmVhIGRlIHZpZGEuXG5cbiAgICBjb25zdCBmb2xkZXJPYmogPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl07XG4gICAgY29uc3QgZmlsZXNPYmogPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJPYmopICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiZcbiAgICAgICAgICAhZmlsZS5wYXRoLmluY2x1ZGVzKFwiQXJjaGl2b1wiKVxuICAgICAgKTtcbiAgICBsZXQgb2JqQ3JlYWRvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlc09iaikge1xuICAgICAgZGVidWdnZXI7XG4gICAgICBsZXQgbWV0YWRhdGEgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk/LmZyb250bWF0dGVyO1xuICAgICAgY29uc3QgcmVnZXggPSAvXFxbXFxbXFxzKiguKj8pXFxzKlxcXVxcXS87XG4gICAgICBsZXQgZmlsZUFWID0gbWV0YWRhdGE/LmFyZWFWaWRhLm1hdGNoKHJlZ2V4KVsxXTtcbiAgICAgIGNvbnN0IHNhbWVBViA9IGZpbGVBViA9PT0gYXJlYVZpZGE7XG5cbiAgICAgIGlmIChtZXRhZGF0YT8udHJpbWVzdHJlPy5wYXRoICYmIHR5cGVvZiAobWV0YWRhdGEudHJpbWVzdHJlLnBhdGggPT09ICdzdHJpbmcnKSAmJiAgbWV0YWRhdGEudHJpbWVzdHJlLnBhdGguaW5jbHVkZXModHJpbWVzdHJlKSAmJiBzYW1lQVYpIHtcbiAgICAgICAgbGV0IG9iakFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ob2JqQWN0aXZvLCBtZXRhZGF0YSk7IC8vIEFncmVnYSBlbCBtZXRhZGF0YSBhbCBvYmpldG8gcUFjdGl2b1xuICAgICAgICBvYmpDcmVhZG9zLnB1c2gob2JqQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHByb21wdCA9IHRoaXMucGx1Z2luLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIGxldCBvYmpldGl2b3MgPSBbXTtcbiAgICBsZXQgZGVzZWFBZ3JlZ2FyT2JqZXRpdm87XG4gICAgaWYgKG9iakNyZWFkb3MubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTaSBoYXkgb2JqZXRpdm9zIGNyZWFkb3MuXG4gICAgICAgIC8vIExvZ2ljYSBjdWFuZG8geWEgaGF5IG9iamV0aXZvcyBjcmVhZG9zLlxuICAgICAgbGV0IG5leHRTdGVwID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICBbXG4gICAgICAgICAgXCJBZ3JlZ2FyIE9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiQm9ycmFyIHkgQ3JlYXIgZGUgbnVldm8gbG9zIG9iamV0aXZvc1wiLFxuICAgICAgICAgIFwiRGVqYXIgbG9zIG9iamV0aXZvcyBjb21vIGVzdFx1MDBFMW4gXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFtcInVwZFwiLCBcImRlbCtjcmVcIiwgXCJjb250aW51ZVwiXSxcbiAgICAgICAgdHJ1ZSxcbiAgICAgICAgYFx1MDBCRllhIGhheSAke29iakNyZWFkb3MubGVuZ3RofSBvYmpldGl2b3MgY3JlYWRvcyBwYXJhICR7YXJlYVZpZGF9IGVuIGVsICR7dHJpbWVzdHJlfS4gRWxpZ2UgdW5hIG9wY2lcdTAwRjNuOmBcbiAgICAgICk7XG5cbiAgICAgICAgc3dpdGNoIChuZXh0U3RlcCkge1xuICAgICAgICAgIGNhc2UgXCJ1cGRcIjpcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpO1xuXG4gICAgICAgICAgICAgIC8vIFByZWd1bnRhciBudWV2YW1lbnRlIHNpIGRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2by5cbiAgICAgICAgICAgICAgZGVzZWFBZ3JlZ2FyT2JqZXRpdm8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgICAgICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9IHdoaWxlIChkZXNlYUFncmVnYXJPYmpldGl2byk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwiZGVsK2NyZVwiOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ib3JyYXJPYmpldGl2b3Mob2JqQ3JlYWRvcyk7XG4gICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgYWxnXHUwMEZBbiBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgICAgIGxldCBvYmpldGl2byA9IGF3YWl0IHRoaXMuY3JlYXJPYmpldGl2b1RyaW1lc3RyZShhcmVhVmlkYSwgdHJpbWVzdHJlKTtcbiAgICAgICAgICAgICAgLy8gQm9ycmFyIGxvcyBvYmpldGl2b3MgYW50ZXJpb3Jlcy5cbiAgICAgICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgXCJjb250aW51ZVwiOlxuICAgICAgICAgICAgY29uc29sZS5sb2coYENvbnRpbnVhciBzaW4gaGFjZXIgbmFkYSBjb24gbG9zIG9iamV0aXZvcyBkZSAke2FyZWFWaWRhfWApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE5vIGhheSBvYmpldGl2b3MgY3JlYWRvcy5cbiAgICAgIGVsc2Uge1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvLlxuICAgICAgICBkZXNlYUFncmVnYXJPYmpldGl2byA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgdHJ1ZSxcbiAgICAgICAgICBgXHUwMEJGRGVzZWEgYWdyZWdhciBhbGdcdTAwRkFuIG9iamV0aXZvIHBhcmEgJHthcmVhVmlkYX0gZW4gJHt0cmltZXN0cmV9P2BcbiAgICAgICAgKTtcbiAgICAgICAgd2hpbGUgKGRlc2VhQWdyZWdhck9iamV0aXZvKSB7XG4gICAgICAgICAgbGV0IG9iamV0aXZvID0gYXdhaXQgdGhpcy5jcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpO1xuICAgICAgICAgIG9iamV0aXZvcy5wdXNoKFtvYmpldGl2b10pO1xuXG4gICAgICAgICAgLy8gUHJlZ3VudGFyIG51ZXZhbWVudGUgc2kgZGVzZWEgYWdyZWdhciBvdHJvIG9iamV0aXZvLlxuICAgICAgICAgIGRlc2VhQWdyZWdhck9iamV0aXZvID0gYXdhaXQgc3VnZ2VzdGVyKFxuICAgICAgICAgICAgW1wiU2lcIiwgXCJOb1wiXSxcbiAgICAgICAgICAgIFt0cnVlLCBmYWxzZV0sXG4gICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgYFx1MDBCRkRlc2VhIGFncmVnYXIgb3RybyBvYmpldGl2byBwYXJhICR7YXJlYVZpZGF9IGVuICR7dHJpbWVzdHJlfT9gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICB9IC8vIE1cdTAwRTl0b2RvIG9iamV0aXZvVHJpbWVzdHJhbC5cblxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTVx1MDBFOXRvZG8gcXVlIGNyZWEgZWwgYm90XHUwMEYzbiBxdWUgc2UgYWdyZWdhIGVuIGxhIHRhYmxhIGRlIHByb3llY3RvcyBlbiBlbCBcbkNvbXBhc3MgQW51YWwsIHBhcmEgY3JlYXIgZWwgcHJveWVjdG8gYSBjYWRhIE9iamV0aXZvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG4gIGNyZWF0ZUJ1dHRvblRhYmxlKGR2LCBvYmpldGl2bykge1xuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGR2LmVsKFwiZGl2XCIsIFwiXCIpO1xuICAgIGNvbnN0IGJ1dHRvbiA9IGR2LmVsKFwiYnV0dG9uXCIsIFwiTnVldm8gUHJveWVjdG9cIik7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhclByb3llY3RvT2JqZXRpdm8oZHYsIG9iamV0aXZvKTtcbiAgICB9KTtcbiAgICBidXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICByZXR1cm4gYnV0dG9uQ29udGFpbmVyO1xufVxuXG4vKiBcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbk1ldG9kbyBpbnZvY2FkbyBwb3IgZWwgYm90b24gZGUgbGEgdGFibGEgZGVsIGNvbXBhc3MgYW51YWwgXCJOdWV2byBQcm95ZWN0b1wiIFxucGFyYSBjcmVhciBwcm95ZWN0byBhIHVuIG9iamV0aXZvIGFudWFsIGVzdGFibGVjaWRvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBjcmVhclByb3llY3RvT2JqZXRpdm8oZHYsIG9iamV0aXZvKXtcbiAgZGVidWdnZXI7XG4gIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gIGxldCB0aXBvUHJveWVjdG8gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgW1wiUHJveWVjdG8gR1REXCIsIFwiUHJveWVjdG8gZGUgUVwiXSxcbiAgICBbdHJ1ZSwgZmFsc2VdLFxuICAgIHRydWUsXG4gICAgYFx1MDBCRkVsIHByb3llY3RvICR7b2JqZXRpdm8uZmlsZS5uYW1lfSByZXF1aWVyZSB1biBQcm95ZWN0byBHVEQgbyBQcm95ZWN0byBkZSBRP2BcbiAgKTtcbiAgbGV0IHByb3llY3RvO1xuICBpZiAodGlwb1Byb3llY3RvKXtcbiAgICBwcm95ZWN0byA9IHRoaXMuY3JlYXJQcm95ZWN0b0dURChvYmpldGl2byk7Ly8gQ3JlYXIgUHJveWVjdG8gR1REXG4gIH1lbHNle1xuICAgIC8qIFxuICAgIEJ1c2NhbmRvIG9wdGltaXphciBlbCB1c28gZGVsIG1cdTAwRTl0b2RvIGNyZWFyIHByb3llY3RvUSwgXG4gICAgdmFtb3MgYSBjb25maXJtYXIgZWwgdHJpbWVzdHJlIGRlc2RlIGNyZWFyUHJveWVjdG9PYmpldGl2bzsgXG4gICAgKi9cbiAgICBkZWJ1Z2dlcjtcbiAgICBjb25zdCByZWdleFRyaW0gPSAvXFxbP1xcWz8oXFxkezR9LVFbMS00XSlcXF0/XFxdPy9nO1xuICAgIGNvbnN0IHRyaW1lc3RyZSA9IG9iamV0aXZvLnRyaW1lc3RyZS5wYXRoLm1hdGNoKHJlZ2V4VHJpbSk7XG5cbiAgICBjb25zdCBjb25maXJtYVRyaW0gPSBhd2FpdCBzdWdnZXN0ZXIoXG4gICAgICBbXCJTaVwiLCBcIk5vXCJdLFxuICAgICAgW3RydWUsIGZhbHNlXSxcbiAgICAgIHRydWUsXG4gICAgICBgXHUwMEJGVmFtb3MgYSBjcmVhciBlbCBwcm95ZWN0byAke29iamV0aXZvLmZpbGUubmFtZX0gZW4gZWwgdHJpbWVzdHJlICR7dHJpbWVzdHJlfT9gXG4gICAgKTtcbiAgIFxuICAgIGlmICghY29uZmlybWFUcmltKXsgIFxuICAgICAgY29uc3QgcSA9IGF3YWl0IHRoaXMuZXN0YWJsZWNlclRyaW1lc3RyZShcIm9iamV0aXZvIGRlbCBhXHUwMEYxb1wiKTtcbiAgICAgIC8vb2JqZXRpdm8udHJpbWVzdHJlLnBhdGggPSBxLnRyaW1lc3RyZTtcbiAgICAgIGRlYnVnZ2VyO1xuICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyWUFNTHMoe3RyaW1lc3RyZTogYFtbJHtxLnRyaW1lc3RyZX1dXWB9LCBvYmpldGl2by5maWxlLnBhdGgpO1xuICAgICAgfVxuICAgIHByb3llY3RvID0gYXdhaXQgdGhpcy5jcmVhclByb3llY3RvUShvYmpldGl2byk7XG4gIH1cbn1cblxuLyogXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5NZXRvZG8gcXVlIGluaWNpYWxpemEgbGEgY3JlYWNpXHUwMEYzbiBkZSBsYSBwbGFudGlsbGEgZGUgb2JqZXRpdm8gQ29tcGFzcy5cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiovIFxuYXN5bmMgY3JlYXJPYmpldGl2byhhcmVhVmlkYSwgYVx1MDBGMW8pe1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl19L1BsdCAtIE9iakNvbXBhc3NBbnVhbC5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYCR7YVx1MDBGMW99IC0gT2JqZXRpdm8gcGFyYSAke2FyZWFWaWRhfWA7XG4gIGxldCBvYmpldGl2byA9IGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKTtcbiAgcmV0dXJuIG9iamV0aXZvO1xufVxuXG5hc3luYyBjcmVhck9iamV0aXZvVHJpbWVzdHJlKGFyZWFWaWRhLCB0cmltZXN0cmUpe1xuICBkZWJ1Z2dlcjtcbiAgY29uc3QgdGVtcGxhdGVQYXRoID0gYFBsYW50aWxsYXMvJHt0aGlzLnBsdWdpbi5zZXR0aW5nc1tcImZvbGRlcl9PYmpDb21wYXNzQW51YWxcIl19L1BsdCAtIE9iakNvbXBhc3NBbnVhbC5tZGA7XG4gIGNvbnN0IHRlbXBsYXRlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZVBhdGgpO1xuICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIik7XG4gIGxldCBjcmVhck5vdGEgPSB0aGlzLnBsdWdpbi50cC5maWxlLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwiY3JlYXRlX25ld1wiKSBcbiAgbGV0IGZpbGVuYW1lID0gYFRyaW1lc3RyZSAke3RyaW1lc3RyZX0gLSBPYmpldGl2byBwYXJhICR7YXJlYVZpZGF9YDtcbiAgbGV0IG9iamV0aXZvID0gYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpO1xuICByZXR1cm4gb2JqZXRpdm87XG59XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIGludm9jYWRvIGRlc2RlIGNyZWFyUHJveWVjdG9PYmpldGl2byhkdiwgb2JqZXRpdm8pXG5Fc3RcdTAwRTkgbVx1MDBFOXRvZG8gaGFjZSBwYXJ0ZSBkZWwgcHJvY2VzbyBkZSBDb21wYXNzIEFudWFsLlxuRmFjaWxpdGEgbGEgY3JlYWNpXHUwMEYzbiBkZWwgdW4gcHJveWVjdG8gZGUgUSBwYXJhIHVuIG9iamV0aXZvIGFudWFsIGVzdGFibGVjaWRvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBjcmVhclByb3llY3RvUShvYmpldGl2byl7XG4gIGxldCBzdWdnZXN0ZXIgPSB0aGlzLnBsdWdpbi50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1Byb3llY3Rvc1FcIl19L1BsdCAtIFByb3llY3Rvc1EubWRgO1xuICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGVtcGxhdGVQYXRoKTtcbiAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICBsZXQgY3JlYXJOb3RhID0gdGhpcy5wbHVnaW4udHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIikgXG4gIGxldCBmaWxlbmFtZSA9IGBQcm95ZWN0byBwYXJhIE9iamV0aXZvIENvbXBhc3MgQW51YWwgLSAke29iamV0aXZvLmlkfWA7XG4gIGxldCBwcm95ZWN0byA9IGF3YWl0IGNyZWFyTm90YSh0ZW1wbGF0ZSwgZmlsZW5hbWUsIHRydWUsIGZvbGRlcik7XG4gIHJldHVybiBwcm95ZWN0bztcbn1cblxuYXN5bmMgY3JlYXJQcm95ZWN0b0dURChvYmpldGl2byl7XG4gIGRlYnVnZ2VyO1xuICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW1wiZm9sZGVyX1Byb3llY3Rvc0dURFwiXX0vUGx0IC0gUHJveWVjdG9zR1RELm1kYDtcbiAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRlbXBsYXRlUGF0aCk7XG4gIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJJbmJveFwiKTtcbiAgbGV0IGNyZWFyTm90YSA9IHRoaXMucGx1Z2luLnRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpIFxuICBsZXQgZmlsZW5hbWUgPSBgUHJveWVjdG8gcGFyYSBPYmpldGl2byBDb21wYXNzIEFudWFsIC0gJHtvYmpldGl2by5pZH1gO1xuICBsZXQgcHJveWVjdG8gPSBhd2FpdCBjcmVhck5vdGEgKHRlbXBsYXRlLCBmaWxlbmFtZSwgdHJ1ZSwgZm9sZGVyKTtcbiAgcmV0dXJuIHByb3llY3RvO1xufVxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIGludm9jYWRvIGVuIGVsIHByb2Nlc28gZGUgQ29tcGFzcyBBbnVhbCwgY3VhbmRvIGVsaWpvIHZvbHZlclxuYSBjcmVhciB0b2RvcyBsb3MgcHJveWVjdG9zIGRlIHVuIGFyZWEgZGUgdmlkYSBwYXJhIHVuIGFcdTAwRjFvLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi8gXG5hc3luYyBib3JyYXJPYmpldGl2b3Mob2JqZXRpdm9zKXtcbiAgZGVidWdnZXI7XG4gIGZvciAobGV0IG9iamV0aXZvIG9mIG9iamV0aXZvcyl7IFxuICAgIHRyeSB7XG4gICAgICAvLyBJbnRlbnRhIGJvcnJhciBlbCBhcmNoaXZvIGFjdHVhbCBkZWwgYXJyZWdsb1xuICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZShvYmpldGl2by5maWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKGBBcmNoaXZvIGJvcnJhZG86ICR7b2JqZXRpdm8uZmlsZS5wYXRofWApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFsIGJvcnJhciBlbCBhcmNoaXZvICR7b2JqZXRpdm8uZmlsZS5wYXRofTogJHtlcnJvcn1gKTtcbiAgICAgfVxuICB9XG5cbiAgfVxuXG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuTWV0b2RvIHF1ZSBwZXJtaXRlIHBhcmEgY3VhbHF1aWVyIGNhc28gZW4gZWwgcXVlIHNlIHJlcXVpZXJhIGVsZWdpciBcbnVuIHRyaW1lc3RyZSBwYXJhIGNvbnRpbnVhciB1biBwcm9jZXNvLCBoYWNlciBsYSB2ZXJpZmljYWNpXHUwMEYzbiBzb2JyZSBsb3NcbnRyaW1lc3RyZXMgcXVlIGVzdGVuIGNyZWFkb3MgYSBwYXJ0aXIgZGUgbGEgbm90YSBUUS4gIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuKi9cbiAgYXN5bmMgZXN0YWJsZWNlclRyaW1lc3RyZSh0ZW1hVHJpbWVzdHJlKXtcbiAgICAvLyBPYnRlbmVyIFFzIHBhcmEgcHJlZ3VudGFyIGVsIFEgcGFyYSBlbCBxdWUgZGVzZWEgY3JlYXIgbGFzIFx1MDBFMXJlYXMgZGUgdmlkYS5cbiAgICBjb25zdCBmb2xkZXJRID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfVHJpbWVzdHJhbFwiXTtcbiAgICBjb25zdCBmaWxlc1EgPSBhcHAudmF1bHRcbiAgICAgIC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIChmaWxlKSA9PlxuICAgICAgICAgIGZpbGUucGF0aC5pbmNsdWRlcyhmb2xkZXJRKSAmJlxuICAgICAgICAgICFmaWxlLnBhdGguaW5jbHVkZXMoXCJQbGFudGlsbGFzXCIpICYmXG4gICAgICAgICAgIWZpbGUucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIilcbiAgICAgICk7XG4gICAgbGV0IHFDcmVhZG9zID0gW107XG5cbiAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzUSkge1xuICAgICAgbGV0IG1ldGFkYXRhID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcblxuICAgICAgaWYgKG1ldGFkYXRhPy50eXBlID09PSBcIlRRXCIgJiYgbWV0YWRhdGE/LnRyaW1lc3RyZSkge1xuICAgICAgICBsZXQgcUFjdGl2byA9IHsgZmlsZSB9OyAvLyBBc3VtaWVuZG8gcXVlIHF1aWVyZXMgZ3VhcmRhciBlbCBwYXRoIGRlbCBhcmNoaXZvXG4gICAgICAgIE9iamVjdC5hc3NpZ24ocUFjdGl2bywgbWV0YWRhdGEpOyAvLyBBZ3JlZ2EgZWwgbWV0YWRhdGEgYWwgb2JqZXRvIHFBY3Rpdm9cbiAgICAgICAgcUNyZWFkb3MucHVzaChxQWN0aXZvKTsgLy8gQVx1MDBGMWFkZSBlbCByZWdpc3RybyBhY3Rpdm8gYWwgYXJyYXlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgc3VnZ2VzdGVyID0gdGhpcy5wbHVnaW4udHAuc3lzdGVtLnN0YXRpY19mdW5jdGlvbnMuZ2V0KFwic3VnZ2VzdGVyXCIpO1xuICAgIHRyeSB7XG4gICAgICBsZXQgcSA9IGF3YWl0IHN1Z2dlc3RlcihcbiAgICAgICAgcUNyZWFkb3MubWFwKChiKSA9PiBiLnRyaW1lc3RyZSksXG4gICAgICAgIHFDcmVhZG9zLm1hcCgoYikgPT4gYiksXG4gICAgICAgIHRydWUsXG4gICAgICAgIGBEZSBxdWUgdHJpbWVzdHJlIHZhbW9zIGEgcHJvY2VzYXIgdHVzICR7dGVtYVRyaW1lc3RyZX1gXG4gICAgICApO1xuICBcbiAgICAgIC8vIEFxdVx1MDBFRCBhc3VtaW1vcyBxdWUgc2kgcSBlcyB1bmRlZmluZWQsIGVsIHVzdWFyaW8gY2FuY2VsXHUwMEYzIGxhIG9wZXJhY2lcdTAwRjNuLlxuICAgICAgaWYgKHEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT3BlcmFjaVx1MDBGM24gY2FuY2VsYWRhIHBvciBlbCB1c3VhcmlvLlwiKTtcbiAgICAgICAgICAvLyBNYW5lamEgZWwgZXNjYXBlIG8gY2FuY2VsYWNpXHUwMEYzbiBhcXVcdTAwRUQuIFBvciBlamVtcGxvLCBwb2RyXHUwMEVEYXMgc2FsaXIgZGUgbGEgZnVuY2lcdTAwRjNuIGFjdHVhbCBvIGhhY2VyIG90cmEgY29zYS5cbiAgICAgICAgICByZXR1cm47IC8vIFNhbGUgZGUgbGEgZnVuY2lcdTAwRjNuIHNpIGVsIHVzdWFyaW8gY2FuY2VsYS5cbiAgICAgIH1cbiAgXG4gICAgICAvLyBDb250aW51YXIgY29uIGxhIGxcdTAwRjNnaWNhIGRlc3B1XHUwMEU5cyBkZSBxdWUgZWwgdXN1YXJpbyBoYSBzZWxlY2Npb25hZG8gdW5hIG9wY2lcdTAwRjNuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRWwgdXN1YXJpbyBzZWxlY2Npb25cdTAwRjM6XCIsIHEpO1xuICAgICAgICByZXR1cm4gcTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIGVsIHN1Z2dlc3RlcjpcIiwgZXJyb3IpO1xuICAgICAgfVxuICB9XG5cbi8qIFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQ29uIGVzdGUgbVx1MDBFOXRvZG8gcHVlZG8gYWN0dWFsaXphciB2YWxvcmVzIGVuIGxhcyBub3RhcyB5YSBleGlzdGVudGVzLlxuTG8gdXRpbGl6byBlbiBlc3RhIGNsYXNlLCBwYXJhIGFjdHVhbGl6YXIgZWwgdHJpbWVzdHJlLlxuRXN0YSBmdW5jaVx1MDBGM24gc29sbyBhY3R1YWxpemEsIG5vIGNyZWEgZWwgY2FtcG9zIHNpIG5vIGV4aXN0ZS4gXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4qL1xuICBhc3luYyBhY3R1YWxpemFyWUFNTHMoY2FtcG9zLCBydXRhKSB7XG4gICAgICAgIFxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHJ1dGEpO1xuICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250bWF0dGVyID0+IHtcbiAgICAgICAgICAgIC8vIEl0ZXJhciBzb2JyZSBjYWRhIHByb3BpZWRhZCBkZWwgb2JqZXRvICdub3RhJ1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW1wbyBpbiBjYW1wb3MpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZnJvbnRtYXR0ZXIuaGFzT3duUHJvcGVydHkoY2FtcG8pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgZWwgY2FtcG8gZW4gZWwgZnJvbnRtYXR0ZXIgY29uIGVsIHZhbG9yIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICBmcm9udG1hdHRlcltjYW1wb10gPSBjYW1wb3NbY2FtcG9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRnJvbnRtYXR0ZXIgYWN0dWFsaXphZG8gY29uIFx1MDBFOXhpdG9cIik7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGZyb250bWF0dGVyXCIsIGVycik7XG4gICAgfVxufVxuXG59XG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBEYXRlVGltZSwgRHVyYXRpb24gfSBmcm9tICdsdXhvbic7XG5pbXBvcnQgeyByZWdpc3Ryb1RpZW1wb0FQSSB9IGZyb20gXCIuLi8uLi9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUEkvcmVnaXN0cm9UaWVtcG9BUElcIjtcblxuZXhwb3J0IGNsYXNzIFZpc3RhUmVnaXN0cm9EaWFyaW8gZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgaW50ZXJ2YWxJZDogbnVtYmVyO1xuIFxuXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcHVibGljIHBsdWdpbjogYW55KSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSSA9IG5ldyByZWdpc3Ryb1RpZW1wb0FQSSh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInZpc3RhLXJlZ2lzdHJvLWRpYXJpb1wiO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gXCJSZWdpc3RybyBEaWFyaW9cIjtcbiAgICB9XG5cbiAgICBnZXRJY29uKCkge1xuICAgICAgICByZXR1cm4gXCJmaWxlLWNsb2NrXCI7IC8vIEVzdGUgZXMgdW4gZWplbXBsbywgY2FtYmlhIFwiZG9jdW1lbnRvXCIgcG9yIGVsIG5vbWJyZSBkZWwgXHUwMEVEY29ubyBxdWUgZGVzZWVzIHVzYXJcbiAgICB9XG5cbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLnNldFRleHQoXCJObyBoYXkgdW4gYXJjaGl2byBhY3Rpdm8uXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoYWN0aXZlRmlsZSk7IC8vIFB1ZWRlcyB1c2FyIHRoaXMuZmlsZSBkZW50cm8gZGUgYWN0dWFsaXphclZpc3RhXG4gICAgXG4gICAgICAgIC8vYXdhaXQgdGhpcy5hY3R1YWxpemFyVmlzdGEoKTsgLy8gQWN0dWFsaXphIGxhIHZpc3RhIGlubWVkaWF0YW1lbnRlIGFsIGFicmlyXG5cbiAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gd2luZG93LnNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0dWFsaXphclZpc3RhKGFjdGl2ZUZpbGUpOyAvLyBBY3R1YWxpemEgbGEgdmlzdGEgY2FkYSAxMCBzZWd1bmRvc1xuICAgICAgICB9LCA1MDAwKTtcbiAgICB9XG4gICAgXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpOyAvLyBMaW1waWEgZWwgaW50ZXJ2YWxvIGFsIGNlcnJhciBsYSB2aXN0YVxuICAgIH1cblxuICAgIGFzeW5jIGFjdHVhbGl6YXJWaXN0YShhY3RpdmVGaWxlKSB7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7IC8vIExpbXBpYSBlbCBjb250ZW5pZG8gZXhpc3RlbnRlIGFudGVzIGRlIGFjdHVhbGl6YXJcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZlY2hhSG95ID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhY3RpdmVGaWxlLmJhc2VuYW1lLnNwbGl0KFwiIFwiKVswXSwgJ3l5eXktTU0tZGQnLCB7IGxvY2FsZTogJ2VzJyB9KTtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1JlZ2lzdHJvVGllbXBvO1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguaW5jbHVkZXMoZm9sZGVyKSk7XG5cbiAgICAgICAgbGV0IHRvdGFsRGlhID0gMDtcbiAgICAgICAgbGV0IHJlZ2lzdHJvc0hveSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICAgIGxldCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8uaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgIGxldCBob3JhSW5pY2lvID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChtZXRhZGF0YS5ob3JhSW5pY2lvLCAneXl5eS1NTS1kZCBFRUVFIEhIOm1tJywgeyBsb2NhbGU6ICdlcycgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGhvcmFJbmljaW8uc3RhcnRPZignZGF5JykudHMgPT09IGZlY2hhSG95LnN0YXJ0T2YoJ2RheScpLnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdHJvc0hveS5wdXNoKHsgcGF0aDogZmlsZS5wYXRoLCBmcm9udG1hdHRlcjogbWV0YWRhdGEgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRGlhICs9IHBhcnNlSW50KG1ldGFkYXRhLnRpZW1wb1RyYWJhamFkbyB8fCAnMCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdHJvc0hveS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBsZXQgZmVjaGFBID0gRGF0ZVRpbWUuZnJvbUZvcm1hdChhLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50cztcbiAgICAgICAgICAgIGxldCBmZWNoYUIgPSBEYXRlVGltZS5mcm9tRm9ybWF0KGIuZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRzO1xuICAgICAgICAgICAgcmV0dXJuIGZlY2hhQSAtIGZlY2hhQjtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHRpdHVsbyA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogYFJlZ2lzdHJvcyBkZSB0aWVtcG8gZGVsICR7ZmVjaGFIb3kudG9Gb3JtYXQoJ0VFRUUsIEREJyl9LmB9KTtcbiAgICAgICAgdGl0dWxvLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYWNpXHUwMEYzbiBkZSBlbGVtZW50b3MgSFRNTCBkaXJlY3RhbWVudGVcbiAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgndGFibGUnLCB7IGNsczogJ3RhYmxlLXJlc3VtZW5TZW1hbmFsJyB9KTtcbiAgICAgICAgY29uc3QgdGhlYWQgPSB0YWJsZS5jcmVhdGVFbCgndGhlYWQnKTtcbiAgICAgICAgY29uc3QgaGVhZGVyUm93ID0gdGhlYWQuY3JlYXRlRWwoJ3RyJyk7XG4gICAgICAgIFsnUmVnaXN0cm8nLCAnRGVzY3JpcGNpXHUwMEYzbicsICdQZXJpb2RvJywgJ1RpZW1wbycsICdFc3RhZG8nLCAnSWQnLCAnQWNjaVx1MDBGM24nXS5mb3JFYWNoKGhlYWRlciA9PiB7XG4gICAgICAgICAgICBoZWFkZXJSb3cuY3JlYXRlRWwoJ3RoJywgeyB0ZXh0OiBoZWFkZXIgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRib2R5ID0gdGFibGUuY3JlYXRlRWwoJ3Rib2R5Jyk7XG4gICAgICAgIHJlZ2lzdHJvc0hveS5mb3JFYWNoKHJlZ2lzdHJvID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJvdyA9IHRib2R5LmNyZWF0ZUVsKCd0cicpO1xuICAgICAgICAgICAgLy8gQXF1XHUwMEVEIHJlbGxlbmFzIGxhcyBjZWxkYXMgZGUgbGEgZmlsYVxuICAgICAgICAgICAgdGhpcy5maWxsUm93V2l0aERhdGEocm93LCByZWdpc3Rybyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgICB9XG5cbiAgICBmaWxsUm93V2l0aERhdGEocm93LCByZWdpc3Rybykge1xuICAgICAgICBjb25zdCB0ZEFyY2hpdm8gPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGNvbnN0IGxpbmtFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGlua0VsLnRleHRDb250ZW50ID0gcmVnaXN0cm8uZnJvbnRtYXR0ZXIuYWxpYXNlc1swXTsgIC8vIFVzYSBlbCBhbGlhcyBjb21vIHRleHRvIGRlbCBlbmxhY2VcbiAgICAgICAgbGlua0VsLmhyZWYgPSAnIyc7XG4gICAgICAgIGxpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldikgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgLy8gRXZpdGEgbGEgbmF2ZWdhY2lcdTAwRjNuIHByZWRldGVybWluYWRhIGRlbCBlbmxhY2VcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocmVnaXN0cm8ucGF0aCk7XG4gICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gQWJyZSBlbCBhcmNoaXZvIGVuIHVuYSBudWV2YSBob2phIGRlIGVzcGFjaW8gZGUgdHJhYmFqb1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpLm9wZW5GaWxlKGZpbGUsIHsgZm9jdXM6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0ZEFyY2hpdm8uYXBwZW5kQ2hpbGQobGlua0VsKTtcbiAgICAgICAgXG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlZ2lzdHJvLmZyb250bWF0dGVyLmRlc2NyaXBjaW9uIH0pO1xuICAgICAgICByb3cuY3JlYXRlRWwoJ3RkJywgeyB0ZXh0OiBgJHtEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFJbmljaW8sICd5eXl5LU1NLWRkIEVFRUUgSEg6bW0nLCB7IGxvY2FsZTogJ2VzJyB9KS50b0Zvcm1hdCgnaDptbSBhJyl9IC8gJHtEYXRlVGltZS5mcm9tRm9ybWF0KHJlZ2lzdHJvLmZyb250bWF0dGVyLmhvcmFGaW5hbCwgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pLnRvRm9ybWF0KCdoOm1tIGEnKX1gfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhIHkgbXVlc3RyYSBlbCB0aWVtcG8gZW4gZm9ybWF0byBkZSBkXHUwMEVEYXMsIGhvcmFzIHkgbWludXRvc1xuICAgICAgICBjb25zdCB0ZFBlcmlvZG8gPSByb3cuY3JlYXRlRWwoJ3RkJyk7XG4gICAgICAgIGlmIChyZWdpc3Ryby5mcm9udG1hdHRlci5lc3RhZG8gPT09IFwiXHVEODNEXHVERkUyXCIpIHtcbiAgICAgICAgICAgIC8vIENhbGN1bGEgZWwgdGllbXBvIGRlc2RlIGFob3JhIGhhc3RhIGxhIGhvcmEgZGUgaW5pY2lvXG4gICAgICAgICAgICBsZXQgYWhvcmEgPSBEYXRlVGltZS5sb2NhbCgpO1xuICAgICAgICAgICAgbGV0IGluaWNpbyA9IERhdGVUaW1lLmZyb21Gb3JtYXQocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaG9yYUluaWNpbywgJ3l5eXktTU0tZGQgRUVFRSBISDptbScsIHsgbG9jYWxlOiAnZXMnIH0pO1xuICAgICAgICAgICAgbGV0IGR1cmFjaW9uID0gYWhvcmEuZGlmZihpbmljaW8sIFsnZGF5cycsICdob3VycycsICdtaW51dGVzJ10pO1xuICAgICAgICAgICAgdGRQZXJpb2RvLnRleHRDb250ZW50ID0gdGhpcy5mb3JtYXREdXJhdGlvbihkdXJhY2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBNdWVzdHJhIGVsIHRpZW1wbyB0cmFiYWphZG8gZW4gbWlsaXNlZ3VuZG9zIGNvbnZlcnRpZG8gYSBmb3JtYXRvIGxlZ2libGVcbiAgICAgICAgICAgIGxldCB0aWVtcG9UcmFiYWphZG8gPSB0aGlzLmZvcm1hdER1cmF0aW9uKHJlZ2lzdHJvLmZyb250bWF0dGVyLnRpZW1wb1RyYWJhamFkbyk7XG4gICAgICAgICAgICB0ZFBlcmlvZG8udGV4dENvbnRlbnQgPSB0aWVtcG9UcmFiYWphZG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJvdy5jcmVhdGVFbCgndGQnLCB7IHRleHQ6IHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyB9KTtcbiAgICAgICAgcm93LmNyZWF0ZUVsKCd0ZCcsIHsgdGV4dDogcmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aW9uQ2VsbCA9IHJvdy5jcmVhdGVFbCgndGQnKTtcbiAgICAgICAgaWYgKHJlZ2lzdHJvLmZyb250bWF0dGVyLmVzdGFkbyA9PT0gXCJcdUQ4M0RcdURGRTJcIikge1xuICAgICAgICAgICAgYWN0aW9uQ2VsbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUJ1dHRvblRhYmxlKCdDZXJyYXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWdpc3Ryb1RpZW1wb0FQSS5jZXJyYXJSZWdpc3RybyhyZWdpc3Ryby5mcm9udG1hdHRlci5pZCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhY3Rpb25DZWxsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQnV0dG9uVGFibGUoJ1JldG9tYXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXRvbWFyVGFyZWEocmVnaXN0cm8uZnJvbnRtYXR0ZXIuaWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRnVuY2lcdTAwRjNuIGF1eGlsaWFyIHBhcmEgZm9ybWF0ZWFyIGxhIGR1cmFjaVx1MDBGM24gZGUgTHV4b24gYSB1biBmb3JtYXRvIGxlZ2libGVcbiAgICBmb3JtYXREdXJhdGlvbihtcykge1xuICAgICAgICAgICAgaWYgKG1zID09PSBudWxsIHx8IG1zID09PSB1bmRlZmluZWQgfHwgaXNOYU4obXMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiTm8gZGVmaW5pZG9cIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQ29udmVydGlyIG1pbGlzZWd1bmRvcyBhIG1pbnV0b3MsIGhvcmFzIHkgZFx1MDBFRGFzXG4gICAgICAgICAgICAgICAgbGV0IG1pbnV0b3MgPSBNYXRoLmZsb29yKG1zIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgIGxldCBob3JhcyA9IE1hdGguZmxvb3IobWludXRvcyAvIDYwKTtcbiAgICAgICAgICAgICAgICBtaW51dG9zID0gbWludXRvcyAlIDYwOyAvLyBSZXN0byBkZSBsYSBkaXZpc2lcdTAwRjNuIHBhcmEgb2J0ZW5lciBsb3MgbWludXRvcyBzb2JyYW50ZXNcbiAgICAgICAgICAgICAgICBsZXQgZGlhcyA9IE1hdGguZmxvb3IoaG9yYXMgLyAyNCk7XG4gICAgICAgICAgICAgICAgaG9yYXMgPSBob3JhcyAlIDI0OyAvLyBSZXN0byBkZSBsYSBkaXZpc2lcdTAwRjNuIHBhcmEgb2J0ZW5lciBsYXMgaG9yYXMgc29icmFudGVzXG4gICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEZvcm1hdGVhciBlbCBzdHJpbmcgZGUgc2FsaWRhXG4gICAgICAgICAgICAgICAgaWYgKGRpYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtkaWFzfSBkICR7aG9yYXN9IGggJHttaW51dG9zfSBtaW5gO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaG9yYXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgJHtob3Jhc30gaCAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke21pbnV0b3N9IG1pbmA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgIH1cblxuICAgIGNyZWF0ZUJ1dHRvblRhYmxlKGJ1dHRvblRleHQsIG9uQ2xpY2tDYWxsYmFjaykge1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcbiAgICAgICAgYnV0dG9uLnR5cGUgPSAnYnV0dG9uJztcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3lvdXItYnV0dG9uLWNsYXNzJyk7XG5cbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DbGlja0NhbGxiYWNrKTtcblxuICAgICAgICByZXR1cm4gYnV0dG9uO1xuICAgIH1cbiAgICBcbiAgICBhc3luYyByZXRvbWFyVGFyZWEoaWQpIHsgXG4gICAgICAgIC8vIEFzZWdcdTAwRkFyYXRlIGRlIHJlZW1wbGF6YXIgJ3J1dGEvYWwvYXJjaGl2by5tZCcgY29uIGxhIHJ1dGEgZXhhY3RhIGRlbCBhcmNoaXZvIHF1ZSBkZXNlYXMgb2J0ZW5lclxuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgUGxhbnRpbGxhcy8ke3RoaXMucGx1Z2luLnNldHRpbmdzW2Bmb2xkZXJfUmVnaXN0cm9UaWVtcG9gXX0vUGx0IC0gUmVnaXN0cm9UaWVtcG8ubWRgO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgIGlmICh0ZW1wbGF0ZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAvLyBBaG9yYSAnZmlsZScgZXMgdHUgYXJjaGl2byBkZXNlYWRvLCB5IHB1ZWRlcyB0cmFiYWphciBjb24gXHUwMEU5bCBjb21vIG5lY2VzaXRlc1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIGVuY29udHJhZG86XCIsIHRlbXBsYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpIGVsIGFyY2hpdm8gbm8gc2UgZW5jb250clx1MDBGMywgJ2ZpbGUnIHNlclx1MDBFMSBudWxsXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFyY2hpdm8gbm8gZW5jb250cmFkby5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBcIlJldG9tYXIgXCIgKyBpZDtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkluYm94XCIpO1xuICAgICAgICBjb25zdCB0cCA9IHRoaXMuZ2V0VHAoKTtcbiAgICAgICAgbGV0IGNyZWFyTm90YSA9IHRwLmZpbGUuc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJjcmVhdGVfbmV3XCIpXG4gICAgICAgIGF3YWl0IGNyZWFyTm90YSAodGVtcGxhdGUsIGZpbGVuYW1lLCBmYWxzZSwgZm9sZGVyKS5iYXNlbmFtZTtcbiAgICAgIH1cblxuICAgIGdldFRwKCl7XG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4gfHwgIXRoaXMucGx1Z2luLmFwcC5wbHVnaW5zLmVuYWJsZWRQbHVnaW5zLmhhcygndGVtcGxhdGVyLW9ic2lkaWFuJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VsIHBsdWdpbiBUZW1wbGF0ZXIgbm8gZXN0XHUwMEUxIGhhYmlsaXRhZG8uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gICBcbiAgICAgICAgbGV0IHRwR2VuID0gdGhpcy5wbHVnaW4uYXBwLnBsdWdpbnMucGx1Z2luc1tcInRlbXBsYXRlci1vYnNpZGlhblwiXS50ZW1wbGF0ZXI7XG4gICAgICAgIHRwR2VuID0gdHBHZW4uZnVuY3Rpb25zX2dlbmVyYXRvci5pbnRlcm5hbF9mdW5jdGlvbnMubW9kdWxlc19hcnJheTtcbiAgICAgICAgbGV0IHRwID0ge31cbiAgICAgICAgLy8gZ2V0IGFuIGluc3RhbmNlIG9mIG1vZHVsZXNcbiAgICAgICAgdHAuZmlsZSA9IHRwR2VuLmZpbmQobSA9PiBtLm5hbWUgPT0gXCJmaWxlXCIpO1xuICAgICAgICB0cC5zeXN0ZW0gPSB0cEdlbi5maW5kKG0gPT4gbS5uYW1lID09IFwic3lzdGVtXCIpO1xuXG4gICAgICAgIGlmICghdHAuZmlsZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiTm8gc2UgcHVkbyBhY2NlZGVyIGFsIG9iamV0byBkZSBmdW5jaW9uZXMgYWN0dWFsZXMgZGUgVGVtcGxhdGVyLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKCd0cCBjb24gcHJvcGllZGFkZXMgXCJmaWxlXCIgc2UgaGEgY2FyZ2FkbyBzYXRpc2ZhY3RvcmlhbWVudGUnKTtcbiAgICAgICAgcmV0dXJuIHRwO1xuICAgIH1cbiAgICBcblxuXG4gICAgLy8gT3BjaW9uYWw6IEltcGxlbWVudGEgb25DbG9zZSBzaSBuZWNlc2l0YXMgbGltcGllemEgYWwgY2VycmFyIGxhIHZpc3RhLlxufSIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHUFRob3JhIHtcbiAgICBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgIH1cblxuICAgIG9ubG9hZCgpIHtcbiAgICAgICAgdGhpcy5hcHAuY29tbWFuZHMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3Nob3ctbG9jYWwtdGltZScsXG4gICAgICAgICAgICBuYW1lOiAnTW9zdHJhciBIb3JhIExvY2FsJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnNob3dMb2NhbFRpbWVNb2RhbCgpXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNob3dMb2NhbFRpbWVNb2RhbCgpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTG9jYWxUaW1lTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxufVxuXG5jbGFzcyBMb2NhbFRpbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IGhvdXJzID0gbm93LmdldEhvdXJzKCkgJSAxMiB8fCAxMjtcbiAgICAgICAgY29uc3QgbWludXRlcyA9IG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBjb25zdCBhbXBtID0gbm93LmdldEhvdXJzKCkgPj0gMTIgPyAnUE0nIDogJ0FNJztcbiAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IGAke2hvdXJzfToke21pbnV0ZXN9ICR7YW1wbX1gO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdIb3JhIExvY2FsJyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aW1lU3RyaW5nIH0pO1xuXG4gICAgICAgIC8vIEVzdGlsbyBkZWwgbW9kYWxcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMkUzNDQwJztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmNvbG9yID0gJyNEOERFRTknO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUucGFkZGluZyA9ICcyMHB4JztcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59IiwgImltcG9ydCB7IFRGaWxlLCBOb3RpY2UsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0RhdGVUaW1lICwgRHVyYXRpb259IGZyb20gJ2x1eG9uJztcblxuZXhwb3J0IGNsYXNzIGxpYnJvc0FQSSB7XG4gICAgLy9wcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgICAgcHJpdmF0ZSB0cDogb2JqZWN0O1xuICAgIHByaXZhdGUgbm90YTogb2JqZWN0O1xuICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgLy8gSW5pY2lhbGl6YSBmb2xkZXIgZSBpbmRpY2UgZ2V0Y29uIHZhbG9yZXMgcHJlZGV0ZXJtaW5hZG9zIG8gbFx1MDBGM2dpY2EgZXNwZWNcdTAwRURmaWNhLlxuICAgICAgICB0aGlzLnRwID0gdGhpcy5wbHVnaW4udHA7XG4gICAgfVxuXG4gICAgICBhc3luYyBraW5kbGUoZHYpIHtcbiAgICBsZXQgZm9sZGVyUHJpbmNpcGFsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfS2luZGxlTm90ZXNcIl07XG4gICAgY29uc3QgbGlicmFyeUZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUHJpbmNpcGFsKTtcblxuICAgIGlmICghKGxpYnJhcnlGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgbmV3IE5vdGljZShgTGEgY2FycGV0YSAke2ZvbGRlclByaW5jaXBhbH0gbm8gZXhpc3RlLmApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBhcmNoaXZvQWN0aXZvID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgaWYgKCFhcmNoaXZvQWN0aXZvKSB7XG4gICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IHVuYSBub3RhIGFjdGl2YS5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLnBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2b0FjdGl2byk7XG4gICAgY29uc3QgeWFtbERhdGEgPSBtZXRhZGF0YT8uZnJvbnRtYXR0ZXIgfHwge307XG5cbiAgICBpZiAoeWFtbERhdGEua2luZGxlTm90ZSkge1xuICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICAgIGxpbmtFbGVtZW50LmhyZWYgPSB5YW1sRGF0YS5raW5kbGVOb3RlO1xuICAgICAgbGlua0VsZW1lbnQudGV4dENvbnRlbnQgPSBcIlZlciBlbiBLaW5kbGVcIjtcbiAgICAgIGR2LmNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiOyAvLyBMaW1waWFyIGVsIGNvbnRlbmVkb3JcbiAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1vc3RyYXIgc3VnZ2VzdGVyIHBhcmEgZWxlZ2lyIGxhIG5vdGEgS2luZGxlIGNvcnJlc3BvbmRpZW50ZVxuICAgICAgY29uc3Qgbm90ZXNMaXN0ID0gYXdhaXQgdGhpcy5nZXROb3Rlc0Zyb21Gb2xkZXIoZm9sZGVyUHJpbmNpcGFsKTtcblxuICAgICAgaWYgKG5vdGVzTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgbmV3IE5vdGljZShcIk5vIGhheSBub3RhcyBlbiBlbCBmb2xkZXIgZGUgS2luZGxlLlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzdWdnZXN0b3JDb25maWc6IFN1Z2dlc3RlckNvbmZpZzxURmlsZT4gPSB7XG4gICAgICAgIG9uQ2hvb3NlSXRlbTogYXN5bmMgKHNlbGVjdGVkTm90ZSwgZXZ0KTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gICAgICAgICAgeWFtbERhdGEua2luZGxlTm90ZSA9IHNlbGVjdGVkTm90ZS5wYXRoO1xuICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoYXJjaGl2b0FjdGl2bywgYC0tLVxcbiR7eWFtbERhdGF9XFxuLi4uYCk7XG4gICAgICAgICAgbmV3IE5vdGljZShcIlNlIGhhIGd1YXJkYWRvIGVsIGxpbmsgZGUgbGEgbm90YSBLaW5kbGUgZW4gZWwgYXJjaGl2byBhY3R1YWwuXCIpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRJdGVtczogKCkgPT4gbm90ZXNMaXN0LFxuICAgICAgICByZW5kZXJTdWdnZXN0aW9uOiAoaXRlbTogVEZpbGUsIGVsOiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICAgIGVsLnRleHRDb250ZW50ID0gaXRlbS5iYXNlbmFtZTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgbmV3IFN1Z2dlc3Rlcih0aGlzLnBsdWdpbiwgc3VnZ2VzdG9yQ29uZmlnKS5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG5hc3luYyBnZXROb3Rlc0Zyb21Gb2xkZXIoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxURmlsZVtdPiB7XG4gIGNvbnN0IGZvbGRlckZpbGVzID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFsbExvYWRlZEZpbGVzKCk7XG4gIHJldHVybiBmb2xkZXJGaWxlcy5maWx0ZXIoZmlsZSA9PiBmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZm9sZGVyUGF0aCkpO1xufVxuXG5cblxuICAgICAgLy8gRnVuY2lcdTAwRjNuIHBhcmEgY3JlYXIgeSBtb3N0cmFyIGVsIGJvdFx1MDBGM24gaW5pY2lhbCBcIk1lblx1MDBGQSBob3lcIlxuICAgICAgYXN5bmMgbW9zdHJhckJvdG9uQ3JlYXJMaWJybyhkdikge1xuICAgICAgICBsZXQgZm9sZGVyUHJpbmNpcGFsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbXCJmb2xkZXJfQmlibGlvdGVjYVwiXTtcbiAgICAgICAgY29uc3QgbGlicmFyeUZvbGRlciA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUHJpbmNpcGFsKTtcbiAgICBcbiAgICAgICAgaWYgKCEobGlicmFyeUZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgTGEgY2FycGV0YSAke2ZvbGRlclByaW5jaXBhbH0gbm8gZXhpc3RlLmApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBsZXQgYXJjaGl2b0FjdGl2byA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBpZiAoIWFyY2hpdm9BY3Rpdm8pIHtcbiAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gaGF5IHVuYSBub3RhIGFjdGl2YS5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIGNvbnN0IGJvb2tFeGlzdHMgPSBhd2FpdCB0aGlzLmJvb2tFeGlzdHNJbkxpYnJhcnkoZm9sZGVyUHJpbmNpcGFsLCBhcmNoaXZvQWN0aXZvKTtcbiAgICBcbiAgICAgICAgaWYgKGJvb2tFeGlzdHMpIHtcbiAgICAgICAgICBjb25zdCBhbGlhcyA9IGF3YWl0IHRoaXMuZ2V0QWxpYXMoYm9va0V4aXN0cyk7XG4gICAgICAgICAgY29uc3QgdGV4dG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgICAgICAgbGluay5ocmVmID0gYm9va0V4aXN0cy5wYXRoO1xuICAgICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSBhbGlhcztcbiAgICAgICAgICBsaW5rLmRhdGFzZXQuaHJlZiA9IGJvb2tFeGlzdHMucGF0aDtcbiAgICAgICAgICBsaW5rLmNsYXNzTmFtZSA9IFwiaW50ZXJuYWwtbGlua1wiO1xuICAgICAgICAgIFxuICAgICAgICAgIHRleHRvLnRleHRDb250ZW50ID0gYEVsIGxpYnJvIHlhIGVzdFx1MDBFMSBlbiBsYSBiaWJsaW90ZWNhOiBgO1xuICAgICAgICAgIHRleHRvLmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgICAgIGR2LmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0byk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHYuY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7IC8vIExpbXBpYXIgZWwgY29udGVuZWRvclxuICAgIFxuICAgICAgICAgIGNvbnN0IGJvdG9uQ3JlYXJMaWJybyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICAgICAgYm90b25DcmVhckxpYnJvLnRleHRDb250ZW50ID0gXCJJbmdyZXNhciBhIG1pIEJpYmxpb3RlY2FcIjtcbiAgICAgICAgICBkdi5jb250YWluZXIuYXBwZW5kQ2hpbGQoYm90b25DcmVhckxpYnJvKTtcbiAgICBcbiAgICAgICAgICBib3RvbkNyZWFyTGlicm8ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5ncmVzYXJMaWJyb0JpYmxpb3RlY2EoKTsgLy8gTW9zdHJhciBsb3MgYm90b25lcyBhZGljaW9uYWxlcyBhbCBoYWNlciBjbGljXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIFxuICAgICAgYXN5bmMgYm9va0V4aXN0c0luTGlicmFyeShmb2xkZXJQcmluY2lwYWwsIGFyY2hpdm9BY3Rpdm8pIHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZU5hbWUgPSBhcmNoaXZvQWN0aXZvLmJhc2VuYW1lO1xuICAgIFxuICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKGZvbGRlclByaW5jaXBhbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmcm9udG1hdHRlciAmJiBmcm9udG1hdHRlci5hc3VudG8pIHtcbiAgICAgICAgICAgICAgY29uc3QgYXN1bnRvID0gZnJvbnRtYXR0ZXIuYXN1bnRvO1xuICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhc3VudG8pKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZW50cnkgb2YgYXN1bnRvKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaW5jbHVkZXMoYFtbJHthY3RpdmVGaWxlTmFtZX1dXWApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWxlO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgYXN1bnRvID09PSAnc3RyaW5nJyAmJiBhc3VudG8uaW5jbHVkZXMoYFtbJHthY3RpdmVGaWxlTmFtZX1dXWApKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBhc3luYyBnZXRBbGlhcyhmaWxlKSB7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICAgICAgcmV0dXJuIGZyb250bWF0dGVyICYmIGZyb250bWF0dGVyLmFsaWFzZXMgJiYgZnJvbnRtYXR0ZXIuYWxpYXNlc1swXSA/IGZyb250bWF0dGVyLmFsaWFzZXNbMF0gOiBmaWxlLmJhc2VuYW1lO1xuICAgICAgfVxuXG5cblxuXG4gIGFzeW5jIGluZ3Jlc2FyTGlicm9CaWJsaW90ZWNhKCl7XG4gICAgZGVidWdnZXI7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiUGxhbnRpbGxhcy9TdWJzaXN0ZW1hcy9MaWJyb3MvQmlibGlvdGVjYS9QbHQgLSBMaWJybyBhIEJpYmxpb3RlY2EubWRcIik7ICAvL09idGVuZXIgZWwgVEZpbGUgZGVsIHRlbXBsYXRlXG4gICAgY29uc3QgZmlsZW5hbWUgPSBcIk51ZXZvIExpYnJvXCJcbiAgICBjb25zdCBmb2xkZXIgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiSW5ib3hcIilcbiAgICBpZiAodGVtcGxhdGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgLy8gQWhvcmEgJ2ZpbGUnIGVzIHR1IGFyY2hpdm8gZGVzZWFkbywgeSBwdWVkZXMgdHJhYmFqYXIgY29uIFx1MDBFOWwgY29tbyBuZWNlc2l0ZXNcbiAgICAgIGNvbnNvbGUubG9nKFwiQXJjaGl2byBlbmNvbnRyYWRvOlwiLCB0ZW1wbGF0ZSk7XG4gICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaSBlbCBhcmNoaXZvIG5vIHNlIGVuY29udHJcdTAwRjMsICdmaWxlJyBzZXJcdTAwRTEgbnVsbFxuICAgICAgY29uc29sZS5sb2coXCJBcmNoaXZvIG5vIGVuY29udHJhZG8uXCIpO1xuICAgICB9XG4gICAgbGV0IGNyZWFyTm90YSA9IHRoaXMudHAuZmlsZS5zdGF0aWNfZnVuY3Rpb25zLmdldChcImNyZWF0ZV9uZXdcIik7XG4gICAgYXdhaXQgY3JlYXJOb3RhICh0ZW1wbGF0ZSwgZmlsZW5hbWUsIGZhbHNlLCBmb2xkZXIpLmJhc2VuYW1lO1xufVxuXG5cblxuXG4gXG5cbn0iLCAiLypcbiAqIEZpbGVuYW1lOiAvc3JjL21vZHVsZXMvbW9kdWxvUmVnaXN0cm9UaWVtcG8vQVBJL3VwZGF0ZVNlc2lvbkxlY3R1cmEudHNcbiAqIFBhdGg6IC9zcmMvbW9kdWxlcy9tb2R1bG9SZWdpc3Ryb1RpZW1wby9BUElcbiAqIENyZWF0ZWQgRGF0ZTogMjAyNS0wMi0yMyAxNTo1Nzo0MFxuICogQXV0aG9yOiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIExhc3QgTW9kaWZpZWQ6IDIwMjUtMDItMjMgMTc6NDM6NDdcbiAqIE1vZGlmaWVkIEJ5OiBBbmRyXHUwMEU5cyBKdWxpXHUwMEUxbiBCb3JiXHUwMEYzblxuICogLS0tLS1cbiAqIENvcHlyaWdodCAoYykgMjAyNSAtIEFuZHJcdTAwRTlzIEp1bGlcdTAwRTFuIEJvcmJcdTAwRjNuXG4gKi9cblxuXG5pbXBvcnQge3V0aWxzQVBJfSBmcm9tICcuL3V0aWxzQVBJJ1xuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBVcGRhdGVTTCB9IGZyb20gJy4uL0ludGVyZmFjZXMvVXBkYXRlU0wnO1xuaW1wb3J0IHsgWUFNTFVwZGF0ZXJBUEkgfSBmcm9tICcuLi8uLi9ub3RlTGlmZWN5Y2xlTWFuYWdlci9BUEkvWUFNTFVwZGF0ZXJBUEknXG5pbXBvcnQge0RhdGVUaW1lfSBmcm9tICdsdXhvbic7XG5cbmV4cG9ydCBjbGFzcyB1cGRhdGVTZXNpb25MZWN0dXJhIGV4dGVuZHMgWUFNTFVwZGF0ZXJBUEkgaW1wbGVtZW50cyBVcGRhdGVTTHtcbiAgICBwcml2YXRlIHV0aWxzQXBpOiB1dGlsc0FQSTtcbiAgICBwcm90ZWN0ZWQgbm90YTogb2JqZWN0O1xuICAgIHByb3RlY3RlZCBpbmZvU3Vic2lzdGVtYTogYW55OyBcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBQbHVnaW4pIHtcbiAgICAgIHN1cGVyKHBsdWdpbik7XG4gICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgIHRoaXMudXRpbHNBcGkgPSBuZXcgdXRpbHNBUEkocGx1Z2luKTtcbiAgICAgIHRoaXMudHAgPSBwbHVnaW4udHA7XG4gICAgICB0aGlzLm5vdGEgPSB7fTtcbiAgICAgIHRoaXMuaW5mb05vdGEgPSB7fTtcbiAgICB9XG5cblxuICAgIC8vYWN0dWFsaXphck5vdGEoaW5mb05vdGE6IGFueSwgY2FtcG9zOiBhbnkpOiBQcm9taXNlPGFueT47XG4gICAgLy9nZXRGZWNoYSgpOiBQcm9taXNlPHN0cmluZz47XG4gICAgLy9nZXRIb3JhRmluYWwoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAgIFxuXG4gICAgLy9nZXRUaWVtcG9MZWlkbygpOiBQcm9taXNlPHN0cmluZz47XG4gICAgXG4gICAgYXN5bmMgZ2V0VGllbXBvTGVpZG8ocGFyYW1ldHJvLCBhY3R1YWwpeyAgXG4gICAgICAgIGRlYnVnZ2VyOyAgICAgIFxuICAgICAgICBsZXQgaG9yYUluaWNpb1N0ciA9IHRoaXMuaW5mb05vdGEuaG9yYUluaWNpbztcbiAgICAgICAgbGV0IGNpZXJyZTtcbiAgICAgICAgLy8gU3Vwb25pZW5kbyBxdWUgZWwgZm9ybWF0byBlcyBcIllZWVktTU0tREQgZGRkZCBISDptbVwiIHkgcXVpZXJlcyBjb252ZXJ0aXJsbyBhIHVuIGZvcm1hdG8gcmVjb25vY2lkbyBwb3IgRGF0ZVxuICAgICAgICAvLyBQcmltZXJvLCBlbGltaW5hIGxhIHBhcnRlIGRlbCBkXHUwMEVEYSBkZSBsYSBzZW1hbmEsIHlhIHF1ZSBEYXRlKCkgbm8gbGEgbmVjZXNpdGFcbiAgICAgICAgbGV0IFtmZWNoYSwgLCBob3JhXSA9IGhvcmFJbmljaW9TdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgbGV0IGZlY2hhSG9yYUlTTyA9IGAke2ZlY2hhfVQke2hvcmF9YDtcbiAgICAgICAgLy8gQ3JlYXIgb2JqZXRvcyBEYXRlXG4gICAgICAgIGxldCBob3JhSW5pY2lvID0gbmV3IERhdGUoZmVjaGFIb3JhSVNPKTtcbiAgICAgICAgaWYgKHBhcmFtZXRybyA9PSB1bmRlZmluZWQpeyAgICBcbiAgICAgICAgY2llcnJlID0gbmV3IERhdGUoKTtcblxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGxldCBbZmVjaGFDaWVycmUsICxob3JhQ2llcnJlXSA9IHBhcmFtZXRyby5zcGxpdCgnICcpOyAgIFxuICAgICAgICAgICAgbGV0IGZlY2hhSG9yYUNpZXJyZUlTTyA9IGAke2ZlY2hhQ2llcnJlfVQke2hvcmFDaWVycmV9YDtcbiAgICAgICAgICAgIGNpZXJyZSA9IG5ldyBEYXRlKGZlY2hhSG9yYUNpZXJyZUlTTyk7XG4gICAgICAgIH0gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhciBsYSBkaWZlcmVuY2lhIGVuIG1pbGlzZWd1bmRvc1xuICAgICAgICBsZXQgZGlmZXJlbmNpYUVuTWlsaXNlZ3VuZG9zID0gY2llcnJlIC0gaG9yYUluaWNpbztcbiAgICAgICAgcmV0dXJuIGRpZmVyZW5jaWFFbk1pbGlzZWd1bmRvcztcbiAgICB9XG5cbiAgICBhc3luYyBnZXRFc3RhZG8ocGFyYW1ldHJvLCBhY3R1YWwpe1xuICAgICAgICBsZXQgY2FtcG87XG4gICAgICAgIGlmIChwYXJhbWV0cm8gPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgLy9sZXQgc3VnZ2VzdGVyID0gdGhpcy50cC5zeXN0ZW0uc3RhdGljX2Z1bmN0aW9ucy5nZXQoXCJzdWdnZXN0ZXJcIik7XG5cdCAgICAvL2NhbXBvID0gYXdhaXQgc3VnZ2VzdGVyKFtcIlx1RDgzRFx1REQzNSAtPiBDb21wbGV0YWRvIC0gSW5mb3JtYWNpXHUwMEYzblwiLCBcIlx1RDgzRFx1REZFMiAtPiBGaW5hbGl6YWRvXCIsXCJcdUQ4M0RcdURGRTEgLT4gRW4gZWplY3VjaVx1MDBGM25cIiwgXCJcdUQ4M0RcdUREMzQgLT4gRGV0ZW5pZG9cIl0sW1wiXHVEODNEXHVERDM1XCIsIFwiXHVEODNEXHVERkUyXCIsXCJcdUQ4M0RcdURGRTFcIiwgXCJcdUQ4M0RcdUREMzRcIl0sIGZhbHNlLCBcIlNlbGVjY2lvbmUgZWwgbnVldm8gZXN0YWRvOlwiKTtcbiAgICAgICAgY2FtcG8gPSBcIlx1RDgzRFx1REQzNVwiO1xuICAgICAgICAvLyBWZXJpZmljYXIgc2kgZWwgdXN1YXJpbyBwcmVzaW9uXHUwMEYzIEVzYy5cbiAgICAgICAgaWYgKGNhbXBvID09PSBudWxsKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoXCJNb2RpZmljYWNpXHUwMEYzbiBkZSBub3RhIGNhbmNlbGFkYSBwb3IgZWwgdXN1YXJpby5cIik7XG4gICAgICAgIHJldHVybjsgLy8gVGVybWluYSBsYSBlamVjdWNpXHUwMEYzbiBkZSBsYSBmdW5jaVx1MDBGM24gYXF1XHUwMEVELlxuXHQgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNhbXBvID0gcGFyYW1ldHJvO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ub3RhLmVzdGFkbyA9IGNhbXBvO1xuICAgICAgICByZXR1cm4gY2FtcG87XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UFBNKCk6IFByb21pc2U8YW55PntcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBwYWxhYnJhc1BvckhvamEgPSBwYXJzZUludCh0aGlzLmluZm9Ob3RhLnBhbGFicmFzUG9ySG9qYSk7XG4gICAgICAgIGxldCBwYWdpbmFzTGVpZGFzID0gcGFyc2VJbnQodGhpcy5ub3RhLnBhZ0xlaWRhcyk7XG4gICAgICAgIGxldCB0aWVtcG9MZWlkbyA9IHBhcnNlSW50KHRoaXMubm90YS50aWVtcG9MZWlkbyk7XG4gICAgICAgIGxldCBQUE0gPSAocGFsYWJyYXNQb3JIb2phICogcGFnaW5hc0xlaWRhcykvKHRpZW1wb0xlaWRvLzYwMDAwKTtcbiAgICAgICAgcmV0dXJuIFBQTTtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRQYWdMZWlkYXMoKTogUHJvbWlzZTxhbnk+e1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgbGV0IHBhZ0ZpbiA9IHBhcnNlSW50KHRoaXMubm90YS5wYWdGaW4pO1xuXHQgICAgIGxldCBwYWdpbmFzTGVpZGFzID0gcGFnRmluIC0gcGFyc2VJbnQodGhpcy5pbmZvTm90YS5wYWdJbmljaW8pO1xuICAgICAgICAgLy90aGlzLm5vdGEucGFnTGVpZGFzID0gcGFyc2VJbnQocGFnaW5hc0xlaWRhcyk7XG4gICAgICAgICByZXR1cm4gcGFyc2VJbnQocGFnaW5hc0xlaWRhcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UGFnRmluKCk6IFByb21pc2U8YW55PntcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIGxldCBwcm9tcHQgPSB0aGlzLnRwLnN5c3RlbS5zdGF0aWNfZnVuY3Rpb25zLmdldChcInByb21wdFwiKTtcbiAgICAgICAgbGV0IHBhZ0ZpbiA9IGF3YWl0IHByb21wdChgXHUwMEJGSGFzdGEgcXVlIHBcdTAwRTFnaW5hIGxlXHUwMEVEc3RlP2AsIGAke3RoaXMuaW5mb05vdGEucGFnSW5pY2lvfWAsIHRydWUpXG4gICAgICAgIC8vdGhpcy5ub3RhLnBhZ0ZpbiA9IHBhcnNlSW50KHBhZ0ZpbilcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHBhZ0Zpbik7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0UG9yTGVlcigpOiBQcm9taXNlPG51bWJlcj57XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICBsZXQgcG9yTGVlciA9IHBhcnNlSW50KHRoaXMuaW5mb05vdGEucGFnaW5hcykgLSBwYXJzZUludCh0aGlzLm5vdGEucGFnRmluKTtcbiAgICAgICAgLy90aGlzLm5vdGEucG9yTGVlciA9IHBvckxlZXI7XG4gICAgICAgIHJldHVybiBwb3JMZWVyO1xuICAgIH1cblxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTWFuYWdlci9hcGkvdGFyZWFzQVBJLnRzXG5cbmltcG9ydCB7IFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBUYXNrLCBFc3RhZG9UYXJlYSB9IGZyb20gJy4uL2ludGVyZmFjZXMvdGFza0ludGVyZmFjZXMnO1xuaW1wb3J0IHsgVGFza1V0aWxzIH0gZnJvbSAnLi4vdXRpbHMvdGFza1V0aWxzJztcbmltcG9ydCB7IFRhc2tXZWlnaHRDYWxjdWxhdG9yIH0gZnJvbSAnLi4vdXRpbHMvdGFza1dlaWdodENhbGN1bGF0b3InO1xuXG5leHBvcnQgY2xhc3MgVGFyZWFzQVBJIHtcbiAgICBwcml2YXRlIHRhc2tVdGlsczogVGFza1V0aWxzO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBwbHVnaW46IE15UGx1Z2luKSB7XG4gICAgICAgIHRoaXMudGFza1V0aWxzID0gbmV3IFRhc2tVdGlscyhwbHVnaW4pO1xuICAgICAgICBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zZXRUYXNrVXRpbHModGhpcy50YXNrVXRpbHMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGViZUV4Y2x1aXJBcmNoaXZvKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIEV4Y2x1aXIgbGEgY2FycGV0YSBQbGFudGlsbGFzIHkgc3VzIHN1YmNhcnBldGFzXG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnUGxhbnRpbGxhcy8nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFeGNsdWlyIGxhIGNhcnBldGEgZGVsIHNpc3RlbWEgR1REIHkgc3VzIHN1YmNhcnBldGFzXG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aChgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vYCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXhjbHVpciBjYXJwZXRhIGRlIGFyY2hpdm9zIChzaSBleGlzdGUpXG4gICAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnQXJjaGl2by8nKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNhclRhcmVhcyhcbiAgICAgICAgZmlsZXM6IFRGaWxlW10sIFxuICAgICAgICBmaWx0cm86ICh0YXNrOiBUYXNrKSA9PiBib29sZWFuIHwgUHJvbWlzZTxib29sZWFuPixcbiAgICAgICAgYnVzY2FyRW5FamVjdWNpb246IGJvb2xlYW4gPSBmYWxzZVxuICAgICk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIGNvbnN0IHRhcmVhczogVGFza1tdID0gW107XG4gICAgICAgIGNvbnN0IGVycm9yZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmlsZXNQYXJhUHJvY2VzYXIgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiAhdGhpcy5kZWJlRXhjbHVpckFyY2hpdm8oZmlsZSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFxcbj09PSBJTklDSUFORE8gUFJPQ0VTQU1JRU5UTyBERSBUQVJFQVMgPT09YCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvY2VzYW5kbyAke2ZpbGVzUGFyYVByb2Nlc2FyLmxlbmd0aH0gYXJjaGl2b3MgZGUgJHtmaWxlcy5sZW5ndGh9IHRvdGFsZXNgKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzUGFyYVByb2Nlc2FyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdHVsb05vdGEgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyVGl0dWxvTm90YShmaWxlKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgXFxuUHJvY2VzYW5kbyBhcmNoaXZvOiAke2ZpbGUucGF0aH1gKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmVhIG9mIGxpbmVhcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZWN0YXIgZWwgdGlwbyBkZSB0YXJlYSBiYXNhZG8gZW4gZWwgY2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzRW5FamVjdWNpb24gPSBsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbL10nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzQWJpZXJ0YSA9IGxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFsgXScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXNDb21wbGV0YWRhID0gbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gW3hdJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhbHRhciBsXHUwMEVEbmVhcyBxdWUgbm8gc29uIHRhcmVhc1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5lYS50cmltKCkuc3RhcnRzV2l0aCgnLSBbJykpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJbXBsZW1lbnRhciBsXHUwMEYzZ2ljYSBzZXBhcmFkYSBwYXJhIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1c2NhckVuRWplY3VjaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlc0VuRWplY3VjaW9uKSBjb250aW51ZTsgLy8gU29sbyBwcm9jZXNhciB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGFyYSBvdHJhcyBiXHUwMEZBc3F1ZWRhcywgaWdub3JhciB0YXJlYXMgY29tcGxldGFkYXMgeSBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlc0NvbXBsZXRhZGEgfHwgZXNFbkVqZWN1Y2lvbikgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlc0FiaWVydGEpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWVyIGVsIHRleHRvIGxpbXBpbyBkZSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dG9MaW1waW8gPSB0aGlzLnRhc2tVdGlscy5saW1waWFyVGV4dG9UYXJlYShsaW5lYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b09yaWdpbmFsID0gbGluZWEudHJpbSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWVyIG1ldGFkYXRvc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFzWUhvcmFzID0gdGhpcy50YXNrVXRpbHMuZXh0cmFlckZlY2hhc1lIb3JhcyhsaW5lYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldGlxdWV0YXNFeHRyYWlkYXMgPSB0aGlzLnRhc2tVdGlscy5leHRyYWVyRXRpcXVldGFzKGxpbmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV0aXF1ZXRhc0NhdGVnb3JpemFkYXMgPSB0aGlzLnRhc2tVdGlscy5jYXRlZ29yaXphckV0aXF1ZXRhcyhldGlxdWV0YXNFeHRyYWlkYXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyB0YXNrSWQsIGRlcGVuZGVuY3lJZCB9ID0gdGhpcy50YXNrVXRpbHMuZXh0cmFlckRlcGVuZGVuY2lhc1lJZHMobGluZWEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhciBvYmpldG8gZGUgdGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhOiBUYXNrID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRvOiB0ZXh0b0xpbXBpbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b09yaWdpbmFsOiB0ZXh0b09yaWdpbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1dGFBcmNoaXZvOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9tYnJlQXJjaGl2bzogZmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXR1bG86IHRpdHVsb05vdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXN0YWRvOiBlc0VuRWplY3VjaW9uID8gRXN0YWRvVGFyZWEuRW5FamVjdWNpb24gOiBFc3RhZG9UYXJlYS5BYmllcnRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZlY2hhc1lIb3JhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldGlxdWV0YXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9kYXM6IGV0aXF1ZXRhc0V4dHJhaWRhcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uZXRpcXVldGFzQ2F0ZWdvcml6YWRhc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFza0lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcGVuZGVuY3lJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXIgcGVzbyB5IHZlcmlmaWNhciBkZXBlbmRlbmNpYXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLndlaWdodCA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLmNhbGN1bGF0ZVdlaWdodCh0YXJlYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVwZW5kZW5jeUlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0YWRvRGVwZW5kZW5jaWEgPSBhd2FpdCB0aGlzLnRhc2tVdGlscy52ZXJpZmljYXJFc3RhZG9UYXJlYShkZXBlbmRlbmN5SWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmlzQmxvY2tlZCA9ICFlc3RhZG9EZXBlbmRlbmNpYS5jb21wbGV0YWRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmRlcGVuZGVuY3lMb2NhdGlvbiA9IGVzdGFkb0RlcGVuZGVuY2lhLnJ1dGFBcmNoaXZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLmRlcGVuZGVuY3lUaXRsZSA9IGVzdGFkb0RlcGVuZGVuY2lhLnRpdHVsb0FyY2hpdm87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEuZGVwZW5kZW5jeVRleHRvID0gZXN0YWRvRGVwZW5kZW5jaWEudGV4dG9UYXJlYTsgLy8gQWdyZWdhciBlbCB0ZXh0byBkZSBsYSB0YXJlYSBkZXBlbmRpZW50ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcGxpY2FyIGZpbHRyb1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VtcGxlRmlsdHJvID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKGZpbHRybyh0YXJlYSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1bXBsZUZpbHRybykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAtPiBUYXJlYSBhZ3JlZ2FkYTogJHt0ZXh0b0xpbXBpby5zdWJzdHJpbmcoMCwgNTApfS4uLmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhcy5wdXNoKHRhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGZpbGVFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcmVzLnB1c2goYEVycm9yIHByb2Nlc2FuZG8gYXJjaGl2byAke2ZpbGUucGF0aH06ICR7ZmlsZUVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGVuIGFyY2hpdm8gJHtmaWxlLnBhdGh9OmAsIGZpbGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhbCBwcm9jZXNhbmRvIHRhcmVhczonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBwcm9jZXNhbmRvIHRhcmVhcy4gUmV2aXNhIGxhIGNvbnNvbGEgcGFyYSBtXHUwMEUxcyBkZXRhbGxlcy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvcmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignXFxuRXJyb3JlcyBlbmNvbnRyYWRvcyBkdXJhbnRlIGVsIHByb2Nlc2FtaWVudG86JywgZXJyb3Jlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhgXFxuPT09IFBST0NFU0FNSUVOVE8gQ09NUExFVEFETyA9PT1gKTtcbiAgICAgICAgY29uc29sZS5sb2coYFRvdGFsIGRlIHRhcmVhcyBlbmNvbnRyYWRhczogJHt0YXJlYXMubGVuZ3RofWApO1xuICAgICAgICBcbiAgICAgICAgLy8gT3JkZW5hciBsYXMgdGFyZWFzIHNlZ1x1MDBGQW4gY29ycmVzcG9uZGFcbiAgICAgICAgcmV0dXJuIGJ1c2NhckVuRWplY3VjaW9uID8gXG4gICAgICAgICAgICB0aGlzLm9yZ2FuaXphclRhcmVhc0VuRWplY3VjaW9uKHRhcmVhcykgOiBcbiAgICAgICAgICAgIFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNvcnRUYXNrcyh0YXJlYXMpO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgIG5vbWJyZUFyY2hpdm86IHN0cmluZywgXG4gICAgICAgIGNvbnRlbmlkbzogc3RyaW5nXG4gICAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEFzZWd1cmFyc2UgZGUgcXVlIGV4aXN0ZSBsYSBjYXJwZXRhIGRlbCBzaXN0ZW1hIEdURFxuICAgICAgICAgICAgICAgIGNvbnN0IGNhcnBldGFHVEQgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCFjYXJwZXRhR1REKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGFyY2hpdm9FeGlzdGVudGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG5vbWJyZUFyY2hpdm8pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChhcmNoaXZvRXhpc3RlbnRlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShhcmNoaXZvRXhpc3RlbnRlLCBjb250ZW5pZG8pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShhcmNoaXZvRXhpc3RlbnRlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBudWV2b0FyY2hpdm8gPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKG5vbWJyZUFyY2hpdm8sIGNvbnRlbmlkbyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKG51ZXZvQXJjaGl2byk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGd1YXJkYXIvYWJyaXIgYXJjaGl2bzpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvcyBwcmluY2lwYWxlcyBkZSBiXHUwMEZBc3F1ZWRhIGRlIHRhcmVhc1xuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNWZW5jaWRhc0FiaWVydGFzKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4gVGFza1dlaWdodENhbGN1bGF0b3Iuc2hvdWxkSW5jbHVkZVRhc2sodGFyZWEsICd2ZW5jaWRhcycsIHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCkpXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc0hveSgpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNob3VsZEluY2x1ZGVUYXNrKHRhcmVhLCAnaG95JywgdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzUHJveGltYXMoZGlhc1Byb3hpbW9zOiBudW1iZXIgPSA3KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zaG91bGRJbmNsdWRlVGFzayh0YXJlYSwgJ3Byb3hpbWFzJywgdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzU3RhcnRWZW5jaWRhcygpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNob3VsZEluY2x1ZGVUYXNrKHRhcmVhLCAnc3RhcnRfdmVuY2lkYXMnLCB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNTdGFydFByb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGNvbnN0IGxpbWl0ZUZ1dHVybyA9IG5ldyBEYXRlKGhveSk7XG4gICAgICAgIGxpbWl0ZUZ1dHVyby5zZXREYXRlKGxpbWl0ZUZ1dHVyby5nZXREYXRlKCkgKyBkaWFzUHJveGltb3MpO1xuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZmVjaGFTdGFydCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU3RhcnQgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVN0YXJ0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFTdGFydCAmJiBmZWNoYVN0YXJ0IDw9IGxpbWl0ZUZ1dHVybyAmJiBmZWNoYVN0YXJ0ID49IGhveTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kb3MgZGUgcmVuZGVyaXphZG8geSB2aXN1YWxpemFjaVx1MDBGM25cbiAgICBwcml2YXRlIGdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24obWV0b2RvOiBzdHJpbmcsIHBhcmFtZXRyb3M/OiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYFxcYFxcYFxcYGRhdGF2aWV3anNcbmNvbnN0IGdwID0gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddO1xuaWYgKCFncCkge1xuICAgIGR2LnBhcmFncmFwaChcIlx1MjZBMFx1RkUwRiBQbHVnaW4gZGUgR2VzdGlcdTAwRjNuIFBlcnNvbmFsIG5vIGVuY29udHJhZG9cIik7XG4gICAgcmV0dXJuO1xufVxuXG5jb25zdCBidG4gPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge3RleHQ6ICdcdUQ4M0RcdUREMDQgQWN0dWFsaXphciBWaXN0YSd9KTtcbmJ0bi5zdHlsZS5jc3NUZXh0ID0gJ3BhZGRpbmc6IDVweCAxNXB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTFlOyBjb2xvcjogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgIzRhNGE0YTsgYm9yZGVyLXJhZGl1czogNHB4OyBjdXJzb3I6IHBvaW50ZXI7IG1hcmdpbi1ib3R0b206IDEwcHg7JztcblxuYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiBidG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMyZTJlMmUnKTtcbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4gYnRuLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMWUxZTFlJyk7XG5cbmJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBuZXcgTm90aWNlKCdBY3R1YWxpemFuZG8gdmlzdGEuLi4nKTtcbiAgICAgICAgYXdhaXQgZ3AudGFyZWFzQVBJLiR7bWV0b2RvfSgke3BhcmFtZXRyb3MgfHwgJyd9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIGFsIGFjdHVhbGl6YXIgdGFyZWFzJyk7XG4gICAgfVxufSk7XG5cXGBcXGBcXGBcXG5cXG5gO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvcyBwXHUwMEZBYmxpY29zIGRlIHZpc3VhbGl6YWNpXHUwMEYzbiBjb3JyZXNwb25kaWVudGVzIGEgbG9zIGNvbWFuZG9zXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNWZW5jaWRhcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzVmVuY2lkYXNBYmllcnRhcygpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHZlbmNpZGFzIGFiaWVydGFzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgVmVuY2lkYXNcIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNWZW5jaWRhc1wiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgVmVuY2lkYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHZlbmNpZGFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc1ZlbmNpZGFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzUHJveGltYXMoZGlhc1Byb3hpbW9zKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBwclx1MDBGM3hpbWFzLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgUHJcdTAwRjN4aW1hc1wiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1Byb3hpbWFzXCIsXG4gICAgICAgICAgICAgICAgZGlhc1Byb3hpbW9zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgUHJcdTAwRjN4aW1hcy5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgcHJcdTAwRjN4aW1hc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNQcm94aW1hczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzSG95KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNIb3koKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBwcm9ncmFtYWRhcyBwYXJhIGhveS4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIFwiVGFyZWFzIHBhcmEgSG95XCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzSG95XCJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBwYXJhIEhveS5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgcGFyYSBob3lgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzSG95OlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNTdGFydFZlbmNpZGFzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNTdGFydFZlbmNpZGFzKCk7XG4gICAgICAgICAgICBpZiAodGFyZWFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGhheSB0YXJlYXMgY29uIGluaWNpbyB2ZW5jaWRvLicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gdGhpcy5nZW5lcmFyVmlzdGFDb21wbGV0YShcbiAgICAgICAgICAgICAgICB0YXJlYXMsXG4gICAgICAgICAgICAgICAgXCJUYXJlYXMgY29uIEluaWNpbyBWZW5jaWRvXCIsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzU3RhcnRWZW5jaWRhc1wiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgY29uIEluaWNpbyBWZW5jaWRvLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBjb24gaW5pY2lvIHZlbmNpZG9gKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzU3RhcnRWZW5jaWRhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzU3RhcnRQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzU3RhcnRQcm94aW1hcyhkaWFzUHJveGltb3MpO1xuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBoYXkgdGFyZWFzIHBvciBpbmljaWFyIGVuIGVsIHBlclx1MDBFRG9kbyBlc3BlY2lmaWNhZG8uJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBwb3IgSW5pY2lhclwiLFxuICAgICAgICAgICAgICAgIFwibW9zdHJhclRhcmVhc1N0YXJ0UHJveGltYXNcIixcbiAgICAgICAgICAgICAgICBkaWFzUHJveGltb3NcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBwb3IgSW5pY2lhci5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0YXJlYXMubGVuZ3RofSB0YXJlYXMgcG9yIGluaWNpYXJgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzU3RhcnRQcm94aW1hczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvcyBkZSB1dGlsaWRhZCBwcml2YWRvc1xuICAgIHByaXZhdGUgdGllbmVGZWNoYXNWYWxpZGFzKGZlY2hhc1lIb3JhczogYW55KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHsgZmVjaGFWZW5jaW1pZW50bywgZmVjaGFTY2hlZHVsZWQsIGZlY2hhU3RhcnQgfSA9IGZlY2hhc1lIb3JhcztcbiAgICAgICAgcmV0dXJuIGZlY2hhVmVuY2ltaWVudG8gfHwgZmVjaGFTY2hlZHVsZWQgfHwgZmVjaGFTdGFydDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICB0YXJlYXM6IFRhc2tbXSxcbiAgICAgICAgdGl0dWxvOiBzdHJpbmcsXG4gICAgICAgIG1ldG9kb0FjdHVhbGl6YWNpb246IHN0cmluZyxcbiAgICAgICAgZGlhc1Byb3hpbW9zPzogbnVtYmVyXG4gICAgKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjICR7dGl0dWxvfVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKG1ldG9kb0FjdHVhbGl6YWNpb24sIGRpYXNQcm94aW1vcyk7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgIGlmIChkaWFzUHJveGltb3MpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBNb3N0cmFuZG8gdGFyZWFzIHBhcmEgbG9zIHByXHUwMEYzeGltb3MgJHtkaWFzUHJveGltb3N9IGRcdTAwRURhc1xcbmA7XG4gICAgICAgIH1cbiAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBlbmNvbnRyYWRhczogJHt0YXJlYXMubGVuZ3RofVxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFzQWdydXBhZGFzKHRhcmVhcyk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhc0FncnVwYWRhcyh0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRhcmVhc1BvckFyY2hpdm8gPSB0aGlzLmFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhcyk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSAnJztcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgW3J1dGFBcmNoaXZvLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyh0YXJlYXNQb3JBcmNoaXZvKSkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyMgW1ske3J1dGFBcmNoaXZvfXwke2luZm8udGl0dWxvfV1dXFxuXFxuYDtcbiAgICAgICAgICAgIGluZm8udGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYSh0YXJlYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgIFxuICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhKHRhcmVhOiBUYXNrKTogc3RyaW5nIHtcbiAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICBcbiAgICAvLyBBZ3J1cGFyIGxhcyBmZWNoYXMgcGFyYSBtZWpvciB2aXN1YWxpemFjaVx1MDBGM25cbiAgICBjb25zdCBmZWNoYXMgPSBbXTtcbiAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1gKTtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgIGZlY2hhcy5wdXNoKGBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQsICdzY2hlZHVsZWQnKX1gKTtcbiAgICB9XG4gICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0LCAnc3RhcnQnKX1gKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGZlY2hhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gRmVjaGFzOlxcbiAgICAgICAgJHtmZWNoYXMuam9pbignXFxuICAgICAgICAnKX1cXG5gO1xuICAgIH1cblxuICAgICAgICAvLyBIb3Jhcmlvc1xuICAgICAgICBpZiAodGFyZWEuaG9yYUluaWNpbyB8fCB0YXJlYS5ob3JhRmluKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMCBIb3JhcmlvOiAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXRpcXVldGFzXG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RERDMlx1RkUwRiBDb250ZXh0b3M6ICR7dGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQzY0IDogJHt0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuam9pbignIHwgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnRvZG9pc3Q/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQ0YyIDogJHt0YXJlYS5ldGlxdWV0YXMudG9kb2lzdC5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLm90cmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzQ1x1REZGN1x1RkUwRiBPdHJhczogJHt0YXJlYS5ldGlxdWV0YXMub3RyYXMuam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmlvcmlkYWRcbiAgICAgICAgY29uc3QgcHJpb3JpZGFkID0gdGhpcy5vYnRlbmVyUHJpb3JpZGFkVGFyZWEodGFyZWEudGV4dG8pO1xuICAgICAgICBpZiAocHJpb3JpZGFkKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtICR7cHJpb3JpZGFkLmVtb2ppfSBQcmlvcmlkYWQ6ICR7cHJpb3JpZGFkLm5vbWJyZX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICBwcml2YXRlIG9idGVuZXJQcmlvcmlkYWRUYXJlYSh0ZXh0bzogc3RyaW5nKTogeyBlbW9qaTogc3RyaW5nOyBub21icmU6IHN0cmluZyB9IHwgbnVsbCB7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNBJykpIHJldHVybiB7IGVtb2ppOiAnXHVEODNEXHVERDNBJywgbm9tYnJlOiAnTXV5IEFsdGEnIH07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VCJykpIHJldHVybiB7IGVtb2ppOiAnXHUyM0VCJywgbm9tYnJlOiAnQWx0YScgfTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0MnKSkgcmV0dXJuIHsgZW1vamk6ICdcdUQ4M0RcdUREM0MnLCBub21icmU6ICdNZWRpYScgfTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0QnKSkgcmV0dXJuIHsgZW1vamk6ICdcdUQ4M0RcdUREM0QnLCBub21icmU6ICdCYWphJyB9O1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQycpKSByZXR1cm4geyBlbW9qaTogJ1x1MjNFQycsIG5vbWJyZTogJ011eSBCYWphJyB9O1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhczogVGFza1tdKTogeyBba2V5OiBzdHJpbmddOiB7IHRpdHVsbzogc3RyaW5nOyB0YXJlYXM6IFRhc2tbXSB9IH0ge1xuICAgICAgICByZXR1cm4gdGFyZWFzLnJlZHVjZSgoYWNjLCB0YXJlYSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFhY2NbdGFyZWEucnV0YUFyY2hpdm9dKSB7XG4gICAgICAgICAgICAgICAgYWNjW3RhcmVhLnJ1dGFBcmNoaXZvXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0dWxvOiB0YXJlYS50aXR1bG8sXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhczogW11cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWNjW3RhcmVhLnJ1dGFBcmNoaXZvXS50YXJlYXMucHVzaCh0YXJlYSk7XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSBhcyB7IFtrZXk6IHN0cmluZ106IHsgdGl0dWxvOiBzdHJpbmc7IHRhcmVhczogVGFza1tdIH0gfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKGZlY2hhOiBzdHJpbmcsIHRpcG86ICdkdWUnIHwgJ3NjaGVkdWxlZCcgfCAnc3RhcnQnKTogc3RyaW5nIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGEpO1xuICAgICAgICAgICAgaWYgKCFmZWNoYU9iaikgcmV0dXJuIGZlY2hhO1xuXG4gICAgICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICAgICAgY29uc3QgZGlmZXJlbmNpYURpYXMgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgKGZlY2hhT2JqLmdldFRpbWUoKSAtIGhveS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBsZXQgdGV4dG9CYXNlID0gJyc7XG4gICAgICAgICAgICBzd2l0Y2ggKHRpcG8pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdkdWUnOlxuICAgICAgICAgICAgICAgICAgICB0ZXh0b0Jhc2UgPSBkaWZlcmVuY2lhRGlhcyA8IDAgPyAnVmVuY2lcdTAwRjMnIDogJ1ZlbmNlJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2NoZWR1bGVkJzpcbiAgICAgICAgICAgICAgICAgICAgdGV4dG9CYXNlID0gJ1Byb2dyYW1hZGEnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgICAgICAgICAgICAgIHRleHRvQmFzZSA9IGRpZmVyZW5jaWFEaWFzIDwgMCA/ICdEZWJpXHUwMEYzIGluaWNpYXInIDogJ0luaWNpYSc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY29udGV4dG8gPSAnJztcbiAgICAgICAgICAgIGlmIChkaWZlcmVuY2lhRGlhcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHRvID0gJ2hveSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dG8gPSAnbWFcdTAwRjFhbmEnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaWZlcmVuY2lhRGlhcyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0byA9ICdheWVyJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZXJlbmNpYURpYXMgPCAwKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dG8gPSBgaGFjZSAke01hdGguYWJzKGRpZmVyZW5jaWFEaWFzKX0gZFx1MDBFRGFzYDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGV4dG8gPSBgZW4gJHtkaWZlcmVuY2lhRGlhc30gZFx1MDBFRGFzYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGAke3RleHRvQmFzZX0gJHtmZWNoYX0gKCR7Y29udGV4dG99KWA7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmb3JtYXRlYW5kbyBmZWNoYTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmVjaGE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBXHUwMEYxYWRpciBudWV2byBtXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgdGFyZWFzIGZ1dHVyYXNcbiAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzRnV0dXJhcyhkaWFzRnV0dXJvczogbnVtYmVyID0gNyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICBjb25zdCBsaW1pdGVGdXR1cm8gPSBuZXcgRGF0ZShob3kpO1xuICAgIGxpbWl0ZUZ1dHVyby5zZXREYXRlKGxpbWl0ZUZ1dHVyby5nZXREYXRlKCkgKyBkaWFzRnV0dXJvcyk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmZWNoYXNSZWxldmFudGVzID0gW1xuICAgICAgICAgICAgICAgIHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sXG4gICAgICAgICAgICAgICAgdGFyZWEuZmVjaGFTY2hlZHVsZWQsXG4gICAgICAgICAgICAgICAgdGFyZWEuZmVjaGFTdGFydFxuICAgICAgICAgICAgXS5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICAgICAgICAgIHJldHVybiBmZWNoYXNSZWxldmFudGVzLnNvbWUoZmVjaGEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhT2JqID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGEhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFPYmogJiYgZmVjaGFPYmogPiBob3kgJiYgZmVjaGFPYmogPD0gbGltaXRlRnV0dXJvO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICApO1xuICAgIH1cblxuICAgIC8vIEFcdTAwRjFhZGlyIG1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciB0YXJlYXMgZnV0dXJhc1xuICAgIHB1YmxpYyBhc3luYyBtb3N0cmFyVGFyZWFzRnV0dXJhcyhkaWFzRnV0dXJvczogbnVtYmVyID0gNyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdGFyZWFzID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNGdXR1cmFzKGRpYXNGdXR1cm9zKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgTm8gaGF5IHRhcmVhcyBwcm9ncmFtYWRhcyBwYXJhIGxvcyBwclx1MDBGM3hpbW9zICR7ZGlhc0Z1dHVyb3N9IGRcdTAwRURhcy5gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIGBUYXJlYXMgUHJvZ3JhbWFkYXMgKFByXHUwMEYzeGltb3MgJHtkaWFzRnV0dXJvc30gZFx1MDBFRGFzKWAsXG4gICAgICAgICAgICAgICAgXCJtb3N0cmFyVGFyZWFzRnV0dXJhc1wiLFxuICAgICAgICAgICAgICAgIGRpYXNGdXR1cm9zXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgUHJvZ3JhbWFkYXMubWRgLFxuICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlIGVuY29udHJhcm9uICR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzIHByb2dyYW1hZGFzIHBhcmEgbG9zIHByXHUwMEYzeGltb3MgJHtkaWFzRnV0dXJvc30gZFx1MDBFRGFzYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0Z1dHVyYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBXHUwMEYxYWRpciBudWV2byBtXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc0VuRWplY3VjaW9uKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIE1vZGlmaWNhciBlbCBwcm9jZXNhbWllbnRvIGRlIHRhcmVhcyBwYXJhIGRldGVjdGFyIGVzdGFkbyBbL11cbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrTGluZSA9IHRhcmVhLnRleHRvLnRyaW0oKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFza0xpbmUuc3RhcnRzV2l0aCgnLSBbL10nKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIHRydWUgLy8gbnVldm8gcGFyXHUwMEUxbWV0cm8gcGFyYSBpbmRpY2FyIHF1ZSBidXNjYW1vcyB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM25cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBXHUwMEYxYWRpciBtXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNFbkVqZWN1Y2lvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE9idGVuZXIgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAgICAgKHRhcmVhKSA9PiB0cnVlLCAvLyBObyBhcGxpY2Ftb3MgZmlsdHJvIGFkaWNpb25hbCBwb3JxdWUgeWEgZmlsdHJhbW9zIHBvciBlc3RhZG8gZW4gcHJvY2VzYXJUYXJlYXNcbiAgICAgICAgICAgICAgICB0cnVlIC8vIEluZGljYXIgcXVlIGJ1c2NhbW9zIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKHRhcmVhcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdlbmVyYXIgdmlzdGEgeSBndWFyZGFyIGFyY2hpdm9cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhRW5FamVjdWNpb24odGFyZWFzKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ3VhcmRhcllBYnJpckFyY2hpdm8oXG4gICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBlbiBFamVjdWNpXHUwMEYzbi5tZGAsXG4gICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzbmApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNFbkVqZWN1Y2lvbjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgZ2VuZXJhclZpc3RhRW5FamVjdWNpb24odGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gYCMgVGFyZWFzIGVuIEVqZWN1Y2lcdTAwRjNuXFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIGJvdFx1MDBGM24gZGUgYWN0dWFsaXphY2lcdTAwRjNuXG4gICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24oXCJtb3N0cmFyVGFyZWFzRW5FamVjdWNpb25cIik7XG4gICAgICAgIFxuICAgICAgICAvLyBBXHUwMEYxYWRpciBpbmZvcm1hY2lcdTAwRjNuIGdlbmVyYWxcbiAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzbjogJHt0YXJlYXMubGVuZ3RofVxcblxcbmA7XG5cbiAgICAgICAgLy8gU2VwYXJhciB0YXJlYXMgcG9yIGNhdGVnb3JcdTAwRURhc1xuICAgICAgICBjb25zdCB0YXJlYXNDb25WZW5jaW1pZW50byA9IHRhcmVhcy5maWx0ZXIodCA9PiB0LmZlY2hhVmVuY2ltaWVudG8pO1xuICAgICAgICBjb25zdCB0YXJlYXNQcm9ncmFtYWRhcyA9IHRhcmVhcy5maWx0ZXIodCA9PiAhdC5mZWNoYVZlbmNpbWllbnRvICYmIHQuZmVjaGFTY2hlZHVsZWQpO1xuICAgICAgICBjb25zdCB0YXJlYXNDb25JbmljaW8gPSB0YXJlYXMuZmlsdGVyKHQgPT4gIXQuZmVjaGFWZW5jaW1pZW50byAmJiAhdC5mZWNoYVNjaGVkdWxlZCAmJiB0LmZlY2hhU3RhcnQpO1xuICAgICAgICBjb25zdCB0YXJlYXNTaW5GZWNoYSA9IHRhcmVhcy5maWx0ZXIodCA9PiAhdC5mZWNoYVZlbmNpbWllbnRvICYmICF0LmZlY2hhU2NoZWR1bGVkICYmICF0LmZlY2hhU3RhcnQpO1xuXG4gICAgICAgICAgIC8vIFJlbmRlcml6YXIgY2FkYSBzZWNjaVx1MDBGM25cbiAgICAgICAgaWYgKHRhcmVhc0NvblZlbmNpbWllbnRvLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgQ29uIGZlY2hhIGRlIHZlbmNpbWllbnRvICgke3RhcmVhc0NvblZlbmNpbWllbnRvLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc0VuRWplY3VjaW9uKHRhcmVhc0NvblZlbmNpbWllbnRvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJlYXNQcm9ncmFtYWRhcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFByb2dyYW1hZGFzICgke3RhcmVhc1Byb2dyYW1hZGFzLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc0VuRWplY3VjaW9uKHRhcmVhc1Byb2dyYW1hZGFzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJlYXNDb25JbmljaW8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBDb24gZmVjaGEgZGUgaW5pY2lvICgke3RhcmVhc0NvbkluaWNpby5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNFbkVqZWN1Y2lvbih0YXJlYXNDb25JbmljaW8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmVhc1NpbkZlY2hhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgU2luIGZlY2hhIGFzaWduYWRhICgke3RhcmVhc1NpbkZlY2hhLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc0VuRWplY3VjaW9uKHRhcmVhc1NpbkZlY2hhKTtcblxuICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH1cbn1cblxuXG4gICAgICAgIC8vIEFcdTAwRjFhZGlyIG1cdTAwRTl0b2RvIGVzcGVjXHUwMEVEZmljbyBwYXJhIHJlbmRlcml6YXIgZ3J1cG9zIGRlIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgIHByaXZhdGUgcmVuZGVyaXphckdydXBvVGFyZWFzRW5FamVjdWNpb24odGFyZWFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0YXJlYXNQb3JBcmNoaXZvID0gdGhpcy5hZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXMpO1xuICAgICAgICBsZXQgY29udGVuaWRvID0gJyc7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IFtydXRhQXJjaGl2bywgaW5mb10gb2YgT2JqZWN0LmVudHJpZXModGFyZWFzUG9yQXJjaGl2bykpIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMjIFtbJHtydXRhQXJjaGl2b318JHtpbmZvLnRpdHVsb31dXVxcblxcbmA7XG4gICAgICAgICAgICBpbmZvLnRhcmVhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFFbkVqZWN1Y2lvbih0YXJlYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlcml6YXJHcnVwb1RhcmVhcyh0YXJlYXM6IFRhc2tbXSk6IHN0cmluZyB7XG4gICAgY29uc3QgdGFyZWFzUG9yQXJjaGl2byA9IHRoaXMuYWdydXBhclRhcmVhc1BvckFyY2hpdm8odGFyZWFzKTtcbiAgICBsZXQgY29udGVuaWRvID0gJyc7XG4gICAgXG4gICAgZm9yIChjb25zdCBbcnV0YUFyY2hpdm8sIGluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHRhcmVhc1BvckFyY2hpdm8pKSB7XG4gICAgICAgIGNvbnRlbmlkbyArPSBgIyMjIFtbJHtydXRhQXJjaGl2b318JHtpbmZvLnRpdHVsb31dXVxcblxcbmA7XG4gICAgICAgIGluZm8udGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphclRhcmVhRW5FamVjdWNpb24odGFyZWEpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVuaWRvO1xuICAgIH0gICBcblxuICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhRW5FamVjdWNpb24odGFyZWE6IFRhc2spOiBzdHJpbmcge1xuICAgICAgICBsZXQgY29udGVuaWRvID0gYCR7dGFyZWEudGV4dG99XFxuYDtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbmRlcml6YXIgZmVjaGFzIHNpIGV4aXN0ZW5cbiAgICAgICAgaWYgKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8gfHwgdGFyZWEuZmVjaGFTY2hlZHVsZWQgfHwgdGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBGZWNoYXM6XFxuYDtcbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgICAgIC0gXHVEODNEXHVEQ0M1IDogJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAgICAgLSBcdTIzRjMgOiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgICAgICAtIFx1RDgzRFx1REVFQjogJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlcml6YXIgaG9yYXJpb3Mgc2kgZXhpc3RlblxuICAgICAgICBpZiAodGFyZWEuaG9yYUluaWNpbyB8fCB0YXJlYS5ob3JhRmluKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1MjNGMCBIb3JhcmlvOiAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRXRpcXVldGFzXG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RERDMlx1RkUwRiBDb250ZXh0b3M6ICR7dGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQzY0IFBlcnNvbmFzOiAke3RhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMudG9kb2lzdD8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDRjIgVG9kb2lzdDogJHt0YXJlYS5ldGlxdWV0YXMudG9kb2lzdC5qb2luKCcgJyl9XFxuYDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLm90cmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzQ1x1REZGN1x1RkUwRiBPdHJhczogJHt0YXJlYS5ldGlxdWV0YXMub3RyYXMuam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmlvcmlkYWRcbiAgICAgICAgY29uc3QgcHJpb3JpZGFkID0gdGhpcy5vYnRlbmVyUHJpb3JpZGFkVGFyZWEodGFyZWEudGV4dG8pO1xuICAgICAgICBpZiAocHJpb3JpZGFkKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtICR7cHJpb3JpZGFkLmVtb2ppfSBQcmlvcmlkYWQ6ICR7cHJpb3JpZGFkLm5vbWJyZX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICBwcml2YXRlIG9yZ2FuaXphclRhcmVhc0VuRWplY3VjaW9uKHRhcmVhczogVGFza1tdKTogVGFza1tdIHtcbiAgICAgICAgcmV0dXJuIHRhcmVhcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmZWNoYUEgPSBhLmZlY2hhVmVuY2ltaWVudG8gfHwgYS5mZWNoYVNjaGVkdWxlZCB8fCBhLmZlY2hhU3RhcnQ7XG4gICAgICAgICAgICBjb25zdCBmZWNoYUIgPSBiLmZlY2hhVmVuY2ltaWVudG8gfHwgYi5mZWNoYVNjaGVkdWxlZCB8fCBiLmZlY2hhU3RhcnQ7XG5cbiAgICAgICAgICAgIGlmIChmZWNoYUEgJiYgZmVjaGFCKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFPYmpBID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFBKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU9iakIgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYUIpO1xuICAgICAgICAgICAgICAgIGlmIChmZWNoYU9iakEgJiYgZmVjaGFPYmpCKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYU9iakEuZ2V0VGltZSgpIC0gZmVjaGFPYmpCLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNpIHVuYSB0YXJlYSB0aWVuZSBmZWNoYSB5IGxhIG90cmEgbm8sIGxhIHF1ZSB0aWVuZSBmZWNoYSB2YSBwcmltZXJvXG4gICAgICAgICAgICBpZiAoZmVjaGFBKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoZmVjaGFCKSByZXR1cm4gMTtcblxuICAgICAgICAgICAgLy8gU2kgbmluZ3VuYSB0aWVuZSBmZWNoYSwgbWFudGVuZXIgZWwgb3JkZW4gcG9yIHBlc29cbiAgICAgICAgICAgIHJldHVybiAoYi53ZWlnaHQ/LnRvdGFsV2VpZ2h0IHx8IDApIC0gKGEud2VpZ2h0Py50b3RhbFdlaWdodCB8fCAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgIC8vIE51ZXZvIG1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciB0YXJlYXMgc2NoZWR1bGVkIHZlbmNpZGFzXG4gICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNTY2hlZHVsZWRWZW5jaWRhcygpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpLFxuICAgICAgICAgICAgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5mZWNoYVNjaGVkdWxlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhU2NoZWR1bGVkID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFTY2hlZHVsZWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYVNjaGVkdWxlZCAhPT0gbnVsbCAmJiBmZWNoYVNjaGVkdWxlZCA8IGhveTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBOdWV2byBtXHUwMEU5dG9kbyBwYXJhIG9idGVuZXIgdGFyZWFzIHNjaGVkdWxlZCBwclx1MDBGM3hpbWFzXG4gICAgcHVibGljIGFzeW5jIGdldFRhcmVhc1NjaGVkdWxlZFByb3hpbWFzKGRpYXNQcm94aW1vczogbnVtYmVyID0gNyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGNvbnN0IGxpbWl0ZUZ1dHVybyA9IG5ldyBEYXRlKGhveSk7XG4gICAgICAgIGxpbWl0ZUZ1dHVyby5zZXREYXRlKGxpbWl0ZUZ1dHVyby5nZXREYXRlKCkgKyBkaWFzUHJveGltb3MpO1xuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICh0YXJlYSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGFyZWEuZmVjaGFTY2hlZHVsZWQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVNjaGVkdWxlZCA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFTY2hlZHVsZWQgIT09IG51bGwgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgIGZlY2hhU2NoZWR1bGVkID49IGhveSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgZmVjaGFTY2hlZHVsZWQgPD0gbGltaXRlRnV0dXJvO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbW9zdHJhciB0YXJlYXMgc2NoZWR1bGVkIHZlbmNpZGFzXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNTY2hlZHVsZWRWZW5jaWRhcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzU2NoZWR1bGVkVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXMuJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YUNvbXBsZXRhKFxuICAgICAgICAgICAgICAgIHRhcmVhcyxcbiAgICAgICAgICAgICAgICBcIlRhcmVhcyBTY2hlZHVsZWQgVmVuY2lkYXNcIixcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNTY2hlZHVsZWRWZW5jaWRhc1wiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9UYXJlYXMgU2NoZWR1bGVkIFZlbmNpZGFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXNgKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBlbiBtb3N0cmFyVGFyZWFzU2NoZWR1bGVkVmVuY2lkYXM6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHNjaGVkdWxlZCBwclx1MDBGM3hpbWFzXG4gICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNTY2hlZHVsZWRQcm94aW1hcyhkaWFzUHJveGltb3M6IG51bWJlciA9IDcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzU2NoZWR1bGVkUHJveGltYXMoZGlhc1Byb3hpbW9zKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyBzY2hlZHVsZWQgcHJcdTAwRjN4aW1hcy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29tcGxldGEoXG4gICAgICAgICAgICAgICAgdGFyZWFzLFxuICAgICAgICAgICAgICAgIGBUYXJlYXMgU2NoZWR1bGVkIFByXHUwMEYzeGltYXMgKCR7ZGlhc1Byb3hpbW9zfSBkXHUwMEVEYXMpYCxcbiAgICAgICAgICAgICAgICBcIm1vc3RyYXJUYXJlYXNTY2hlZHVsZWRQcm94aW1hc1wiLFxuICAgICAgICAgICAgICAgIGRpYXNQcm94aW1vc1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIFNjaGVkdWxlZCBQclx1MDBGM3hpbWFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyBzY2hlZHVsZWQgcHJcdTAwRjN4aW1hc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNTY2hlZHVsZWRQcm94aW1hczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICAgIC8vIE1cdTAwRTl0b2RvIGF1eGlsaWFyIHBhcmEgbGEgdmlzdWFsaXphY2lcdTAwRjNuIGRlIGZlY2hhcyBzY2hlZHVsZWRcbiAgICBwcml2YXRlIGZvcm1hdGVhckZlY2hhU2NoZWR1bGVkKGZlY2hhOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBmZWNoYU9iaiA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhKTtcbiAgICAgICAgaWYgKCFmZWNoYU9iaikgcmV0dXJuIGZlY2hhO1xuXG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIGNvbnN0IGRpZmVyZW5jaWFEaWFzID0gTWF0aC5jZWlsKFxuICAgICAgICAgICAgKGZlY2hhT2JqLmdldFRpbWUoKSAtIGhveS5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGNvbnRleHRvID0gJyc7XG4gICAgICAgIGlmIChkaWZlcmVuY2lhRGlhcyA8IDApIHtcbiAgICAgICAgICAgIGNvbnRleHRvID0gYChyZXRyYXNhZGEgJHtNYXRoLmFicyhkaWZlcmVuY2lhRGlhcyl9IGRcdTAwRURhcylgO1xuICAgICAgICB9IGVsc2UgaWYgKGRpZmVyZW5jaWFEaWFzID09PSAwKSB7XG4gICAgICAgICAgICBjb250ZXh0byA9ICcoaG95KSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZXJlbmNpYURpYXMgPT09IDEpIHtcbiAgICAgICAgICAgIGNvbnRleHRvID0gJyhtYVx1MDBGMWFuYSknO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dG8gPSBgKGVuICR7ZGlmZXJlbmNpYURpYXN9IGRcdTAwRURhcylgO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGAke2ZlY2hhfSAke2NvbnRleHRvfWA7XG4gICAgfVxuXG4gICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgb2J0ZW5lciB0b2RhcyBsYXMgdGFyZWFzIHZlbmNpZGFzXG4gICAgIHB1YmxpYyBhc3luYyBnZXRUb2Rhc1RhcmVhc1ZlbmNpZGFzKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgICAgIGNvbnN0IGhveSA9IHRoaXMudGFza1V0aWxzLm9idGVuZXJGZWNoYUxvY2FsKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm9jZXNhclRhcmVhcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZXN0YVZlbmNpZGEgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBWZXJpZmljYXIgZmVjaGEgZGUgdmVuY2ltaWVudG8gKGR1ZSlcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVZlbmMgPSB0aGlzLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlY2hhVmVuYyAmJiBmZWNoYVZlbmMgPCBob3kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhLnRpcG9WZW5jaW1pZW50byA9IFsnZHVlJ107XG4gICAgICAgICAgICAgICAgICAgICAgICBlc3RhVmVuY2lkYSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIHNjaGVkdWxlZFxuICAgICAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVNjaGVkdWxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVNjaGVkID0gdGhpcy50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8odGFyZWEuZmVjaGFTY2hlZHVsZWQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVjaGFTY2hlZCAmJiBmZWNoYVNjaGVkIDwgaG95KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS50aXBvVmVuY2ltaWVudG8gPSB0YXJlYS50aXBvVmVuY2ltaWVudG8gfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS50aXBvVmVuY2ltaWVudG8ucHVzaCgnc2NoZWR1bGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlc3RhVmVuY2lkYSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIGZlY2hhIGRlIGluaWNpbyAoc3RhcnQpXG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTdGFydCA9IHRoaXMudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKHRhcmVhLmZlY2hhU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVjaGFTdGFydCAmJiBmZWNoYVN0YXJ0IDwgaG95KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS50aXBvVmVuY2ltaWVudG8gPSB0YXJlYS50aXBvVmVuY2ltaWVudG8gfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS50aXBvVmVuY2ltaWVudG8ucHVzaCgnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVzdGFWZW5jaWRhID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gZXN0YVZlbmNpZGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBtb3N0cmFyIHRvZGFzIGxhcyB0YXJlYXMgdmVuY2lkYXNcbiAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLmdldFRvZGFzVGFyZWFzVmVuY2lkYXMoKTtcbiAgICAgICAgICAgIGlmICh0YXJlYXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gaGF5IHRhcmVhcyB2ZW5jaWRhcy4nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhVG9kYXNWZW5jaWRhcyh0YXJlYXMpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlcl9TaXN0ZW1hR1REfS9Ub2RhcyBsYXMgVGFyZWFzIFZlbmNpZGFzLm1kYCxcbiAgICAgICAgICAgICAgICBjb250ZW5pZG9cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke3RhcmVhcy5sZW5ndGh9IHRhcmVhcyB2ZW5jaWRhc2ApO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUb2Rhc1RhcmVhc1ZlbmNpZGFzOlwiLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gZXNwZWNcdTAwRURmaWNvIHBhcmEgZ2VuZXJhciBsYSB2aXN0YSBkZSB0b2RhcyBsYXMgdGFyZWFzIHZlbmNpZGFzXG4gICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFUb2Rhc1ZlbmNpZGFzKHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRvZGFzIGxhcyBUYXJlYXMgVmVuY2lkYXNcXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgY29udGVuaWRvICs9IHRoaXMuZ2VuZXJhckJvdG9uQWN0dWFsaXphY2lvbihcIm1vc3RyYXJUb2Rhc1RhcmVhc1ZlbmNpZGFzXCIpO1xuICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgdGFyZWFzIHZlbmNpZGFzOiAke3RhcmVhcy5sZW5ndGh9XFxuXFxuYDtcblxuICAgICAgICAvLyBPcmdhbml6YXIgdGFyZWFzIHBvciB0aXBvIGRlIHZlbmNpbWllbnRvXG4gICAgICAgIGNvbnN0IHRhcmVhc1ZlbmNEdWUgPSB0YXJlYXMuZmlsdGVyKHQgPT4gdC50aXBvVmVuY2ltaWVudG8/LmluY2x1ZGVzKCdkdWUnKSk7XG4gICAgICAgIGNvbnN0IHRhcmVhc1ZlbmNTY2hlZHVsZWQgPSB0YXJlYXMuZmlsdGVyKHQgPT4gdC50aXBvVmVuY2ltaWVudG8/LmluY2x1ZGVzKCdzY2hlZHVsZWQnKSk7XG4gICAgICAgIGNvbnN0IHRhcmVhc1ZlbmNTdGFydCA9IHRhcmVhcy5maWx0ZXIodCA9PiB0LnRpcG9WZW5jaW1pZW50bz8uaW5jbHVkZXMoJ3N0YXJ0JykpO1xuXG4gICAgICAgIC8vIFNlY2NpXHUwMEYzbiBkZSB0YXJlYXMgY29uIGZlY2hhIGRlIHZlbmNpbWllbnRvIChkdWUpXG4gICAgICAgIGlmICh0YXJlYXNWZW5jRHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIGNvbiBGZWNoYSBkZSBWZW5jaW1pZW50byBQYXNhZGEgKCR7dGFyZWFzVmVuY0R1ZS5sZW5ndGh9KVxcblxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9UYXJlYXNWZW5jaWRhcyh0YXJlYXNWZW5jRHVlLCAnZHVlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZWNjaVx1MDBGM24gZGUgdGFyZWFzIHNjaGVkdWxlZCB2ZW5jaWRhc1xuICAgICAgICBpZiAodGFyZWFzVmVuY1NjaGVkdWxlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBTY2hlZHVsZWQgUmV0cmFzYWRhcyAoJHt0YXJlYXNWZW5jU2NoZWR1bGVkLmxlbmd0aH0pXFxuXFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJHcnVwb1RhcmVhc1ZlbmNpZGFzKHRhcmVhc1ZlbmNTY2hlZHVsZWQsICdzY2hlZHVsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlY2NpXHUwMEYzbiBkZSB0YXJlYXMgc3RhcnQgdmVuY2lkYXNcbiAgICAgICAgaWYgKHRhcmVhc1ZlbmNTdGFydC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBjb24gSW5pY2lvIFJldHJhc2FkbyAoJHt0YXJlYXNWZW5jU3RhcnQubGVuZ3RofSlcXG5cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IHRoaXMucmVuZGVyaXphckdydXBvVGFyZWFzVmVuY2lkYXModGFyZWFzVmVuY1N0YXJ0LCAnc3RhcnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gYXV4aWxpYXIgcGFyYSByZW5kZXJpemFyIGdydXBvcyBkZSB0YXJlYXMgdmVuY2lkYXNcbiAgICBwcml2YXRlIHJlbmRlcml6YXJHcnVwb1RhcmVhc1ZlbmNpZGFzKHRhcmVhczogVGFza1tdLCB0aXBvOiAnZHVlJyB8ICdzY2hlZHVsZWQnIHwgJ3N0YXJ0Jyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRhcmVhc1BvckFyY2hpdm8gPSB0aGlzLmFncnVwYXJUYXJlYXNQb3JBcmNoaXZvKHRhcmVhcyk7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSAnJztcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgW3J1dGFBcmNoaXZvLCBpbmZvXSBvZiBPYmplY3QuZW50cmllcyh0YXJlYXNQb3JBcmNoaXZvKSkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyMgW1ske3J1dGFBcmNoaXZvfXwke2luZm8udGl0dWxvfV1dXFxuXFxuYDtcbiAgICAgICAgICAgIGluZm8udGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYVZlbmNpZGEodGFyZWEsIHRpcG8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgfVxuXG4gICAgLy8gTVx1MDBFOXRvZG8gYXV4aWxpYXIgcGFyYSByZW5kZXJpemFyIHVuYSB0YXJlYSB2ZW5jaWRhXG4gICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFWZW5jaWRhKHRhcmVhOiBUYXNrLCB0aXBvOiAnZHVlJyB8ICdzY2hlZHVsZWQnIHwgJ3N0YXJ0Jyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgICAgICBcbiAgICAgICAgLy8gTW9zdHJhciBpbmZvcm1hY2lcdTAwRjNuIGRlIGZlY2hhcyByZWxldmFudGUgc2VnXHUwMEZBbiBlbCB0aXBvXG4gICAgICAgIHN3aXRjaCAodGlwbykge1xuICAgICAgICAgICAgY2FzZSAnZHVlJzpcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvISwgJ2R1ZScpfVxcbmA7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgJ3NjaGVkdWxlZCc6XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjMgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTY2hlZHVsZWQhLCAnc2NoZWR1bGVkJyl9XFxuYDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1REVFQiAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVN0YXJ0ISwgJ3N0YXJ0Jyl9XFxuYDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW5kZXJpemFyIGhvcmFyaW9zIHNpIGV4aXN0ZW5cbiAgICAgICAgaWYgKHRhcmVhLmhvcmFJbmljaW8gfHwgdGFyZWEuaG9yYUZpbikge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdTIzRjAgSG9yYXJpbzogJHt0YXJlYS5ob3JhSW5pY2lvIHx8ICctLTotLSd9IC0gJHt0YXJlYS5ob3JhRmluIHx8ICctLTotLSd9XFxuYDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlcml6YXIgZXRpcXVldGFzXG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAtIFx1RDgzRFx1RERDMlx1RkUwRiBDb250ZXh0b3M6ICR7dGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMucGVyc29uYXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIC0gXHVEODNEXHVEQzY0OiAke3RhcmVhLmV0aXF1ZXRhcy5wZXJzb25hcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YXJlYS5ldGlxdWV0YXMudG9kb2lzdD8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0RcdURDRjI6ICR7dGFyZWEuZXRpcXVldGFzLnRvZG9pc3Quam9pbignICcpfVxcbmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5vdHJhcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgLSBcdUQ4M0NcdURGRjdcdUZFMEYgT3RyYXM6ICR7dGFyZWEuZXRpcXVldGFzLm90cmFzLmpvaW4oJyAnKX1cXG5gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICB9XG5cbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcHJpbmNpcGFsIHBhcmEgb2J0ZW5lciB0YXJlYXMgY29uIGRlcGVuZGVuY2lhc1xuICAgICAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzRGVwZW5kaWVudGVzKCk6IFByb21pc2U8e1xuICAgICAgICAgICAgZWplY3V0YWJsZXM6IFRhc2tbXSxcbiAgICAgICAgICAgIGJsb3F1ZWFkYXM6IFRhc2tbXVxuICAgICAgICB9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIj09PSBJbmljaWFuZG8gYlx1MDBGQXNxdWVkYSBkZSB0YXJlYXMgY29uIGRlcGVuZGVuY2lhcyA9PT1cIik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICAgICBhc3luYyAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG5BbmFsaXphbmRvIHRhcmVhOlwiLCB0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGVwZW5kZW5jeUlkOlwiLCB0YXJlYS5kZXBlbmRlbmN5SWQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5kZXBlbmRlbmN5SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiLT4gSWdub3JhZGE6IE5vIHRpZW5lIGRlcGVuZGVuY2lhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRhZG8gPSBhd2FpdCB0aGlzLnRhc2tVdGlscy52ZXJpZmljYXJFc3RhZG9UYXJlYSh0YXJlYS5kZXBlbmRlbmN5SWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgLT4gRGVwZW5kZW5jaWEgJHt0YXJlYS5kZXBlbmRlbmN5SWR9IGNvbXBsZXRhZGE6YCwgcmVzdWx0YWRvLmNvbXBsZXRhZGEpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEuaXNCbG9ja2VkID0gIXJlc3VsdGFkby5jb21wbGV0YWRhO1xuICAgICAgICAgICAgICAgICAgICAvLyBBZ3JlZ2FyIGluZm9ybWFjaVx1MDBGM24gZGUgbGEgdWJpY2FjaVx1MDBGM24gZGUgbGEgdGFyZWEgZGVwZW5kaWVudGVcbiAgICAgICAgICAgICAgICAgICAgdGFyZWEuZGVwZW5kZW5jeUxvY2F0aW9uID0gcmVzdWx0YWRvLnJ1dGFBcmNoaXZvO1xuICAgICAgICAgICAgICAgICAgICB0YXJlYS5kZXBlbmRlbmN5VGl0bGUgPSByZXN1bHRhZG8udGl0dWxvQXJjaGl2bztcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBlamVjdXRhYmxlczogdGFyZWFzLmZpbHRlcih0ID0+ICF0LmlzQmxvY2tlZCksXG4gICAgICAgICAgICAgICAgYmxvcXVlYWRhczogdGFyZWFzLmZpbHRlcih0ID0+IHQuaXNCbG9ja2VkKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIG1vc3RyYXIgbGFzIHRhcmVhcyBkZXBlbmRpZW50ZXNcbiAgICAgICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNEZXBlbmRpZW50ZXMoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgZWplY3V0YWJsZXMsIGJsb3F1ZWFkYXMgfSA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzRGVwZW5kaWVudGVzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGVqZWN1dGFibGVzLmxlbmd0aCA9PT0gMCAmJiBibG9xdWVhZGFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgY29uIGRlcGVuZGVuY2lhcy4nKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW5pZG8gPSB0aGlzLmdlbmVyYXJWaXN0YURlcGVuZGVuY2lhcyhlamVjdXRhYmxlcywgYmxvcXVlYWRhcyk7XG4gICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBjb24gRGVwZW5kZW5jaWFzLm1kYCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBTZSBlbmNvbnRyYXJvbiAke2VqZWN1dGFibGVzLmxlbmd0aCArIGJsb3F1ZWFkYXMubGVuZ3RofSB0YXJlYXMgY29uIGRlcGVuZGVuY2lhc2ApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0RlcGVuZGllbnRlczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gTVx1MDBFOXRvZG8gcGFyYSBnZW5lcmFyIGxhIHZpc3RhIGRlIGRlcGVuZGVuY2lhc1xuICAgICAgICBwcml2YXRlIGdlbmVyYXJWaXN0YURlcGVuZGVuY2lhcyhlamVjdXRhYmxlczogVGFza1tdLCBibG9xdWVhZGFzOiBUYXNrW10pOiBzdHJpbmcge1xuICAgICAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyBUYXJlYXMgY29uIERlcGVuZGVuY2lhc1xcblxcbmA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24oXCJtb3N0cmFyVGFyZWFzRGVwZW5kaWVudGVzXCIpO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFshaW5mb10gQWN0dWFsaXphZG86ICR7aG95LnRvTG9jYWxlRGF0ZVN0cmluZygpfSAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgY29uIGRlcGVuZGVuY2lhczogJHtlamVjdXRhYmxlcy5sZW5ndGggKyBibG9xdWVhZGFzLmxlbmd0aH1cXG5cXG5gO1xuICAgIFxuICAgICAgICAgICAgaWYgKGVqZWN1dGFibGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFRhcmVhcyBFamVjdXRhYmxlcyAoJHtlamVjdXRhYmxlcy5sZW5ndGh9KVxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFshc3VjY2Vzc10gRXN0YXMgdGFyZWFzIHlhIHB1ZWRlbiBzZXIgZWplY3V0YWRhcyBwb3JxdWUgc3VzIGRlcGVuZGVuY2lhcyBlc3RcdTAwRTFuIGNvbXBsZXRhZGFzXFxuXFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9EZXBlbmRlbmNpYXMoZWplY3V0YWJsZXMsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgaWYgKGJsb3F1ZWFkYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgXFxuIyMgVGFyZWFzIEJsb3F1ZWFkYXMgKCR7YmxvcXVlYWRhcy5sZW5ndGh9KVxcbmA7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFshd2FybmluZ10gRXN0YXMgdGFyZWFzIGVzdFx1MDBFMW4gZXNwZXJhbmRvIHF1ZSBzZSBjb21wbGV0ZW4gb3RyYXMgdGFyZWFzXFxuXFxuYDtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyR3J1cG9EZXBlbmRlbmNpYXMoYmxvcXVlYWRhcywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIHJlbmRlcml6YXIgZ3J1cG9zIGRlIHRhcmVhcyBjb24gZGVwZW5kZW5jaWFzXG4gICAgICAgIHByaXZhdGUgcmVuZGVyaXphckdydXBvRGVwZW5kZW5jaWFzKHRhcmVhczogVGFza1tdLCBlamVjdXRhYmxlczogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCB0YXJlYXNQb3JBcmNoaXZvID0gdGhpcy5hZ3J1cGFyVGFyZWFzUG9yQXJjaGl2byh0YXJlYXMpO1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9ICcnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtydXRhQXJjaGl2bywgaW5mb10gb2YgT2JqZWN0LmVudHJpZXModGFyZWFzUG9yQXJjaGl2bykpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIyBbWyR7cnV0YUFyY2hpdm99fCR7aW5mby50aXR1bG99XV1cXG5cXG5gO1xuICAgICAgICAgICAgICAgIGluZm8udGFyZWFzLmZvckVhY2godGFyZWEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5yZW5kZXJpemFyVGFyZWFDb25EZXBlbmRlbmNpYSh0YXJlYSwgZWplY3V0YWJsZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSAnXFxuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBNXHUwMEU5dG9kbyBwYXJhIHJlbmRlcml6YXIgdW5hIHRhcmVhIGluZGl2aWR1YWwgY29uIGRlcGVuZGVuY2lhXG4gICAgICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhQ29uRGVwZW5kZW5jaWEodGFyZWE6IFRhc2ssIGVzRWplY3V0YWJsZTogYm9vbGVhbik6IHN0cmluZyB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcblJlbmRlcml6YW5kbyB0YXJlYTpcIiwgdGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcyBlamVjdXRhYmxlOlwiLCBlc0VqZWN1dGFibGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9zdHJhciBJRCBkZSBsYSB0YXJlYSBzaSBleGlzdGVcbiAgICAgICAgICAgIGlmICh0YXJlYS50YXNrSWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0NcdUREOTQgJHt0YXJlYS50YXNrSWR9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICBcbiAgICAgICAgICAgIC8vIE1vc3RyYXIgZGV0YWxsZXMgZGUgbGEgZGVwZW5kZW5jaWFcbiAgICAgICAgICAgIGlmICh0YXJlYS5kZXBlbmRlbmN5SWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIxQjMgRGVwZW5kZSBkZTogJHt0YXJlYS5kZXBlbmRlbmN5VGl0bGUgPyBgW1ske3RhcmVhLmRlcGVuZGVuY3lMb2NhdGlvbn18JHt0YXJlYS5kZXBlbmRlbmN5VGl0bGV9XV1gIDogJ05vIGVuY29udHJhZGEnfWA7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmVhLmRlcGVuZGVuY3lUZXh0bykge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYDogXCIke3RhcmVhLmRlcGVuZGVuY3lUZXh0b31cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBlc0VqZWN1dGFibGUgPyAnIFx1MjcwNScgOiAnIFx1MjNGMyc7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3RvIGRlbCBjb250ZW5pZG8uLi5cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEQ0M1ICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhVmVuY2ltaWVudG8sICdkdWUnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3M/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdUREQzJcdUZFMEYgJHt0YXJlYS5ldGlxdWV0YXMuY29udGV4dG9zLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEQzY0ICR7dGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHVibGljIGFzeW5jIG1vc3RyYXJUYXJlYXNQZXJzb25hcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBwZXJzb25hc0NvblRhcmVhcywgdG90YWxQZXJzb25hcywgdG90YWxUYXJlYXMgfSA9IGF3YWl0IHRoaXMuZ2V0VGFyZWFzUGVyc29uYXMoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodG90YWxQZXJzb25hcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgYXNpZ25hZGFzIGEgcGVyc29uYXMuJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhUGVyc29uYXMocGVyc29uYXNDb25UYXJlYXMsIHRvdGFsUGVyc29uYXMsIHRvdGFsVGFyZWFzKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5ndWFyZGFyWUFicmlyQXJjaGl2byhcbiAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L1RhcmVhcyBwb3IgUGVyc29uYS5tZGAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0b3RhbFRhcmVhc30gdGFyZWFzIGFzaWduYWRhcyBhICR7dG90YWxQZXJzb25hc30gcGVyc29uYXNgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGVuIG1vc3RyYXJUYXJlYXNQZXJzb25hczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdlbmVyYXJWaXN0YVBlcnNvbmFzKFxuICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT4sXG4gICAgICAgICAgICB0b3RhbFBlcnNvbmFzOiBudW1iZXIsXG4gICAgICAgICAgICB0b3RhbFRhcmVhczogbnVtYmVyXG4gICAgICAgICk6IHN0cmluZyB7XG4gICAgICAgICAgICBjb25zdCBob3kgPSB0aGlzLnRhc2tVdGlscy5vYnRlbmVyRmVjaGFMb2NhbCgpO1xuICAgICAgICAgICAgbGV0IGNvbnRlbmlkbyA9IGAjIFRhcmVhcyBBc2lnbmFkYXMgcG9yIFBlcnNvbmFcXG5cXG5gO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWJlY2VyYSB5IHJlc3VtZW5cbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLmdlbmVyYXJCb3RvbkFjdHVhbGl6YWNpb24oXCJtb3N0cmFyVGFyZWFzUGVyc29uYXNcIik7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gWyFpbmZvXSBBY3R1YWxpemFkbzogJHtob3kudG9Mb2NhbGVEYXRlU3RyaW5nKCl9ICR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHBlcnNvbmFzIGNvbiB0YXJlYXM6ICR7dG90YWxQZXJzb25hc31cXG5gO1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGA+IFRvdGFsIGRlIHRhcmVhcyBhc2lnbmFkYXM6ICR7dG90YWxUYXJlYXN9XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXN1bWVuIGRlIGFzaWduYWNpb25lc1xuICAgICAgICAgICAgY29udGVuaWRvICs9IGAjIyBSZXN1bWVuIGRlIEFzaWduYWNpb25lc1xcbmA7XG4gICAgICAgICAgICBBcnJheS5mcm9tKHBlcnNvbmFzQ29uVGFyZWFzLmVudHJpZXMoKSlcbiAgICAgICAgICAgICAgICAuc29ydCgoWywgdGFyZWFzQV0sIFssIHRhcmVhc0JdKSA9PiB0YXJlYXNCLmxlbmd0aCAtIHRhcmVhc0EubGVuZ3RoKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChbcGVyc29uYSwgdGFyZWFzXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub21icmVGb3JtYXRlYWRvID0gdGhpcy5mb3JtYXRlYXJOb21icmVQZXJzb25hKHBlcnNvbmEpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYC0gW1sjJHtub21icmVGb3JtYXRlYWRvfXwke25vbWJyZUZvcm1hdGVhZG99XV0gKCR7dGFyZWFzLmxlbmd0aH0gdGFyZWFzKVxcbmA7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gRGV0YWxsZSBkZSB0YXJlYXMgcG9yIHBlcnNvbmFcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIHBvciBQZXJzb25hXFxuXFxuYDtcbiAgICAgICAgICAgIEFycmF5LmZyb20ocGVyc29uYXNDb25UYXJlYXMuZW50cmllcygpKVxuICAgICAgICAgICAgICAgIC5zb3J0KChbLCB0YXJlYXNBXSwgWywgdGFyZWFzQl0pID0+IHRhcmVhc0IubGVuZ3RoIC0gdGFyZWFzQS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKFtwZXJzb25hLCB0YXJlYXNdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMjICR7dGhpcy5mb3JtYXRlYXJOb21icmVQZXJzb25hKHBlcnNvbmEpfVxcbltbI1Jlc3VtZW4gZGUgQXNpZ25hY2lvbmVzfFx1MkIwNlx1RkUwRl1dXFxuYDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIE9yZGVuYXIgdGFyZWFzIHBvciBwZXNvIHkgbW9zdHJhcmxhcyBkaXJlY3RhbWVudGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZWFzT3JkZW5hZGFzID0gVGFza1dlaWdodENhbGN1bGF0b3Iuc29ydFRhc2tzKHRhcmVhcyk7XG4gICAgICAgICAgICAgICAgICAgIHRhcmVhc09yZGVuYWRhcy5mb3JFYWNoKHRhcmVhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSB0aGlzLnJlbmRlcml6YXJUYXJlYVBlcnNvbmEodGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjb250ZW5pZG87XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHByaXZhdGUgcmVuZGVyaXphclRhcmVhUGVyc29uYSh0YXJlYTogVGFzayk6IHN0cmluZyB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgLSBbIF0gJHt0YXJlYS50ZXh0b31cXG5gO1xuICAgICAgICBcbiAgICAgICAgICAgIC8vIEFcdTAwRjFhZGlyIHViaWNhY2lcdTAwRjNuIGRlIGxhIHRhcmVhIGNvbiBuXHUwMEZBbWVybyBkZSBsXHUwMEVEbmVhIHNpIGVzdFx1MDBFMSBkaXNwb25pYmxlXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdUQ4M0RcdURDQ0QgW1ske3RhcmVhLnJ1dGFBcmNoaXZvfXwke3RhcmVhLnRpdHVsb31dXWA7XG4gICAgICAgICAgICBpZiAodGFyZWEubGluZUluZm8/Lm51bWVybykge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIChsXHUwMEVEbmVhICR7dGFyZWEubGluZUluZm8ubnVtZXJvfSlgO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGVuaWRvICs9ICdcXG4nOyBcbiAgICAgICAgICAgIC8vIEZlY2hhc1xuICAgICAgICAgICAgY29uc3QgZmVjaGFzID0gW107XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFWZW5jaW1pZW50bykge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURDQzUgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFWZW5jaW1pZW50bywgJ2R1ZScpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU2NoZWR1bGVkKSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1MjNGMyAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVNjaGVkdWxlZCwgJ3NjaGVkdWxlZCcpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmVhLmZlY2hhU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHVEODNEXHVERUVCICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU3RhcnQsICdzdGFydCcpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmVjaGFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIzRjAgRmVjaGFzOlxcbiAgICAgICAgJHtmZWNoYXMuam9pbignXFxuICAgICAgICAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIEhvcmFyaW9zXG4gICAgICAgICAgICBpZiAodGFyZWEuaG9yYUluaWNpbyB8fCB0YXJlYS5ob3JhRmluKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHUyMzFBIEhvcmFyaW86ICR7dGFyZWEuaG9yYUluaWNpbyB8fCAnLS06LS0nfSAtICR7dGFyZWEuaG9yYUZpbiB8fCAnLS06LS0nfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgLy8gQ29udGV4dG9zXG4gICAgICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1RERDMlx1RkUwRiBDb250ZXh0b3M6ICR7dGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5qb2luKCcgfCAnKX1cXG5gO1xuICAgICAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgICAgIC8vIFBlc28geSBwcmlvcmlkYWRcbiAgICAgICAgICAgIGlmICh0YXJlYS53ZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmlvcmlkYWQgPSB0aGlzLm9idGVuZXJQcmlvcmlkYWRUYXJlYSh0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaWRhZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICAke3ByaW9yaWRhZC5lbW9qaX0gUHJpb3JpZGFkOiAke3ByaW9yaWRhZC5ub21icmV9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbmlkbztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSBmb3JtYXRlYXJOb21icmVQZXJzb25hKHRhZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgICAgIHJldHVybiB0YWcucmVwbGFjZSgnI3B4LScsICcnKVxuICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL18vZywgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCcgJylcbiAgICAgICAgICAgICAgICAgICAgIC5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcbiAgICAgICAgfVxuXG4gICAgXG4gICAgICAgIHByaXZhdGUgbm9ybWFsaXphckNvbnRleHRvKGNvbnRleHRvOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAgICAgLy8gTm9ybWFsaXphciB0YW50byBmb3JtYXRvcyAjY3gtY29udGV4dG8gY29tbyAjY3gvY29udGV4dG9cbiAgICAgICAgICAgIHJldHVybiBjb250ZXh0by5yZXBsYWNlKC9bLy1dL2csICcgXHUyMTkyICcpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwdWJsaWMgYXN5bmMgbW9zdHJhclRhcmVhc0NvbnRleHRvcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBjb250ZXh0b3NDb25UYXJlYXMsIHRvdGFsQ29udGV4dG9zLCB0b3RhbFRhcmVhcyB9ID0gYXdhaXQgdGhpcy5nZXRUYXJlYXNDb250ZXh0b3MoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAodG90YWxDb250ZXh0b3MgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gc2UgZW5jb250cmFyb24gdGFyZWFzIGNvbiBjb250ZXh0b3MgYXNpZ25hZG9zLicpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IHRoaXMuZ2VuZXJhclZpc3RhQ29udGV4dG9zKGNvbnRleHRvc0NvblRhcmVhcywgdG90YWxDb250ZXh0b3MsIHRvdGFsVGFyZWFzKTtcbiAgICBcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmd1YXJkYXJZQWJyaXJBcmNoaXZvKFxuICAgICAgICAgICAgICAgICAgICBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJfU2lzdGVtYUdURH0vVGFyZWFzIHBvciBDb250ZXh0by5tZGAsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkb1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU2UgZW5jb250cmFyb24gJHt0b3RhbFRhcmVhc30gdGFyZWFzIGVuICR7dG90YWxDb250ZXh0b3N9IGNvbnRleHRvc2ApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbW9zdHJhclRhcmVhc0NvbnRleHRvczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHJpdmF0ZSBnZW5lcmFyVmlzdGFDb250ZXh0b3MoXG4gICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT4sXG4gICAgICAgICAgICB0b3RhbENvbnRleHRvczogbnVtYmVyLFxuICAgICAgICAgICAgdG90YWxUYXJlYXM6IG51bWJlclxuICAgICAgICApOiBzdHJpbmcge1xuICAgICAgICAgICAgY29uc3QgaG95ID0gdGhpcy50YXNrVXRpbHMub2J0ZW5lckZlY2hhTG9jYWwoKTtcbiAgICAgICAgICAgIGxldCBjb250ZW5pZG8gPSBgIyBUYXJlYXMgcG9yIENvbnRleHRvXFxuXFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FiZWNlcmEgeSByZXN1bWVuXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gdGhpcy5nZW5lcmFyQm90b25BY3R1YWxpemFjaW9uKFwibW9zdHJhclRhcmVhc0NvbnRleHRvc1wiKTtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBbIWluZm9dIEFjdHVhbGl6YWRvOiAke2hveS50b0xvY2FsZURhdGVTdHJpbmcoKX0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpfVxcbmA7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYD4gVG90YWwgZGUgY29udGV4dG9zIGNvbiB0YXJlYXM6ICR7dG90YWxDb250ZXh0b3N9XFxuYDtcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgPiBUb3RhbCBkZSB0YXJlYXMgZW5jb250cmFkYXM6ICR7dG90YWxUYXJlYXN9XFxuXFxuYDtcbiAgICBcbiAgICAgICAgICAgIC8vIENvbnN0cnVpciBcdTAwRTFyYm9sIGRlIGNvbnRleHRvc1xuICAgICAgICAgICAgY29uc3QgYXJib2xDb250ZXh0b3MgPSB0aGlzLmNvbnN0cnVpckFyYm9sQ29udGV4dG9zKGNvbnRleHRvc0NvblRhcmVhcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3VtZW4gZGUgY29udGV4dG9zXG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gYCMjIFJlc3VtZW4gZGUgQ29udGV4dG9zXFxuYDtcbiAgICAgICAgICAgIHRoaXMuZ2VuZXJhclJlc3VtZW5Db250ZXh0b3MoYXJib2xDb250ZXh0b3MsIDApLmZvckVhY2gobGluZWEgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBsaW5lYSArICdcXG4nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgXG4gICAgICAgICAgICAvLyBEZXRhbGxlIGRlIHRhcmVhcyBwb3IgY29udGV4dG9cbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgIyMgVGFyZWFzIHBvciBDb250ZXh0b1xcblxcbmA7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXJEZXRhbGxlQ29udGV4dG9zKGFyYm9sQ29udGV4dG9zLCBjb250ZXh0b3NDb25UYXJlYXMpLmZvckVhY2goYmxvcXVlID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYmxvcXVlO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIHByaXZhdGUgY29uc3RydWlyQXJib2xDb250ZXh0b3MoY29udGV4dG9zQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+KTogTWFwPHN0cmluZywgYW55PiB7XG4gICAgICAgICAgICBjb25zdCBhcmJvbCA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgXG4gICAgICAgICAgICBBcnJheS5mcm9tKGNvbnRleHRvc0NvblRhcmVhcy5rZXlzKCkpLmZvckVhY2goY29udGV4dG8gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5pdmVsZXMgPSBjb250ZXh0by5zcGxpdCgnIFx1MjE5MiAnKTtcbiAgICAgICAgICAgICAgICBsZXQgbm9kb0FjdHVhbCA9IGFyYm9sO1xuICAgIFxuICAgICAgICAgICAgICAgIG5pdmVsZXMuZm9yRWFjaCgobml2ZWwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbm9kb0FjdHVhbC5oYXMobml2ZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RvQWN0dWFsLnNldChuaXZlbCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmVhczogaW5kZXggPT09IG5pdmVsZXMubGVuZ3RoIC0gMSA/IGNvbnRleHRvc0NvblRhcmVhcy5nZXQoY29udGV4dG8pIDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViY29udGV4dG9zOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnV0YUNvbXBsZXRhOiBuaXZlbGVzLnNsaWNlKDAsIGluZGV4ICsgMSkuam9pbignIFx1MjE5MiAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kb0FjdHVhbCA9IG5vZG9BY3R1YWwuZ2V0KG5pdmVsKS5zdWJjb250ZXh0b3M7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiBhcmJvbDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwcml2YXRlIGdlbmVyYXJSZXN1bWVuQ29udGV4dG9zKGFyYm9sOiBNYXA8c3RyaW5nLCBhbnk+LCBuaXZlbDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgICAgICAgICAgY29uc3QgbGluZWFzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBhcmJvbC5mb3JFYWNoKChub2RvLCBjb250ZXh0bykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluZGVudGFjaW9uID0gJyAgJy5yZXBlYXQobml2ZWwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJ1dGFDb250ZXh0byA9IG5vZG8ucnV0YUNvbXBsZXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnRpZGFkVGFyZWFzID0gbm9kby50YXJlYXMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjYW50aWRhZFRhcmVhcyA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGluZWFzLnB1c2goYCR7aW5kZW50YWNpb259LSBbWyMke3J1dGFDb250ZXh0b318JHtjb250ZXh0b31dXSAoJHtjYW50aWRhZFRhcmVhc30gdGFyZWFzKWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVhcy5wdXNoKGAke2luZGVudGFjaW9ufS0gJHtjb250ZXh0b31gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzYXIgc3ViY29udGV4dG9zXG4gICAgICAgICAgICAgICAgaWYgKG5vZG8uc3ViY29udGV4dG9zLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVhcy5wdXNoKC4uLnRoaXMuZ2VuZXJhclJlc3VtZW5Db250ZXh0b3Mobm9kby5zdWJjb250ZXh0b3MsIG5pdmVsICsgMSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICAgICAgcmV0dXJuIGxpbmVhcztcbiAgICAgICAgfVxuICAgIFxuXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhckJsb3F1ZUNvbnRleHRvKGNvbnRleHRvOiBzdHJpbmcsIHRhcmVhczogVGFza1tdKTogc3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBibG9xdWUgPSBgIyMjICR7Y29udGV4dG99XFxuW1sjUmVzdW1lbiBkZSBDb250ZXh0b3N8XHUyQjA2XHVGRTBGXV1cXG5gO1xuICAgIFxuICAgICAgICAgICAgLy8gVXNhciBkaXJlY3RhbWVudGUgbGFzIHRhcmVhcyBvcmRlbmFkYXMgcG9yIGVsIFRhc2tXZWlnaHRDYWxjdWxhdG9yXG4gICAgICAgICAgICB0YXJlYXMuZm9yRWFjaCh0YXJlYSA9PiB7XG4gICAgICAgICAgICAgICAgYmxvcXVlICs9IHRoaXMucmVuZGVyaXphclRhcmVhQ29udGV4dG8odGFyZWEpO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gYmxvcXVlICsgJ1xcbic7XG4gICAgICAgIH1cbiAgICBcblxuICAgICAgICBwdWJsaWMgYXN5bmMgZ2V0VGFyZWFzUGVyc29uYXMoKTogUHJvbWlzZTx7XG4gICAgICAgICAgICBwZXJzb25hc0NvblRhcmVhczogTWFwPHN0cmluZywgVGFza1tdPixcbiAgICAgICAgICAgIHRvdGFsUGVyc29uYXM6IG51bWJlcixcbiAgICAgICAgICAgIHRvdGFsVGFyZWFzOiBudW1iZXJcbiAgICAgICAgfT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJcXG49PT0gSU5JQ0lBTkRPIEJcdTAwREFTUVVFREEgREUgVEFSRUFTIEFTSUdOQURBUyBBIFBFUlNPTkFTID09PVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcGVyc29uYXNDb25UYXJlYXMgPSBuZXcgTWFwPHN0cmluZywgVGFza1tdPigpO1xuICAgICAgICAgICAgY29uc3QgbGluZWFzUG9yQXJjaGl2byA9IG5ldyBNYXA8c3RyaW5nLCBNYXA8c3RyaW5nLCBMaW5lSW5mbz4+KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRhcmVhcyA9IGF3YWl0IHRoaXMucHJvY2VzYXJUYXJlYXMoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKSxcbiAgICAgICAgICAgICAgICBhc3luYyAodGFyZWEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMgfHwgdGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBPYnRlbmVyIGluZm9ybWFjaVx1MDBGM24gZGUgbFx1MDBFRG5lYXMgc29sbyBjdWFuZG8gc2VhIG5lY2VzYXJpb1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVhc1BvckFyY2hpdm8uaGFzKHRhcmVhLnJ1dGFBcmNoaXZvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZWFzUG9yQXJjaGl2by5zZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrVXRpbHMuZW5jb250cmFyTGluZWFzVGFyZWEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGFyZWEucnV0YUFyY2hpdm8pIGFzIFRGaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQWdyZWdhciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWEgYSBsYSB0YXJlYVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXNBcmNoaXZvID0gbGluZWFzUG9yQXJjaGl2by5nZXQodGFyZWEucnV0YUFyY2hpdm8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGluZWFzQXJjaGl2bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZUluZm8gPSBsaW5lYXNBcmNoaXZvLmdldCh0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGluZUluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJlYS5saW5lSW5mbyA9IGxpbmVJbmZvO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB0YXJlYS5ldGlxdWV0YXMucGVyc29uYXMuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGVyc29uYVRhZyA9IGAjcHgtJHt0YWd9YDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGVyc29uYXNDb25UYXJlYXMuaGFzKHBlcnNvbmFUYWcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc29uYXNDb25UYXJlYXMuc2V0KHBlcnNvbmFUYWcsIFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzLmdldChwZXJzb25hVGFnKSEucHVzaCh0YXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICBcbiAgICAgICAgICAgIC8vIE9yZGVuYXIgbGFzIHRhcmVhcyBkZSBjYWRhIHBlcnNvbmFcbiAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzLmZvckVhY2goKHRhcmVhcywgcGVyc29uYSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc09yZGVuYWRhcyA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNvcnRUYXNrcyh0YXJlYXMpO1xuICAgICAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzLnNldChwZXJzb25hLCB0YXJlYXNPcmRlbmFkYXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBlcnNvbmFzQ29uVGFyZWFzLFxuICAgICAgICAgICAgICAgIHRvdGFsUGVyc29uYXM6IHBlcnNvbmFzQ29uVGFyZWFzLnNpemUsXG4gICAgICAgICAgICAgICAgdG90YWxUYXJlYXM6IEFycmF5LmZyb20ocGVyc29uYXNDb25UYXJlYXMudmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgdGFyZWFzKSA9PiBzdW0gKyB0YXJlYXMubGVuZ3RoLCAwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBhc3luYyBnZXRUYXJlYXNDb250ZXh0b3MoKTogUHJvbWlzZTx7XG4gICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXM6IE1hcDxzdHJpbmcsIFRhc2tbXT4sXG4gICAgICAgICAgICB0b3RhbENvbnRleHRvczogbnVtYmVyLFxuICAgICAgICAgICAgdG90YWxUYXJlYXM6IG51bWJlclxuICAgICAgICB9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlxcbj09PSBJTklDSUFORE8gQlx1MDBEQVNRVUVEQSBERSBUQVJFQVMgUE9SIENPTlRFWFRPID09PVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgY29udGV4dG9zQ29uVGFyZWFzID0gbmV3IE1hcDxzdHJpbmcsIFRhc2tbXT4oKTtcbiAgICAgICAgICAgIGNvbnN0IGxpbmVhc1BvckFyY2hpdm8gPSBuZXcgTWFwPHN0cmluZywgTWFwPHN0cmluZywgTGluZUluZm8+PigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJlYXMgPSBhd2FpdCB0aGlzLnByb2Nlc2FyVGFyZWFzKFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCksXG4gICAgICAgICAgICAgICAgYXN5bmMgKHRhcmVhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXFxuQW5hbGl6YW5kbyB0YXJlYTpcIiwgdGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3MgfHwgdGFyZWEuZXRpcXVldGFzLmNvbnRleHRvcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gT2J0ZW5lciBpbmZvcm1hY2lcdTAwRjNuIGRlIGxcdTAwRURuZWFzIG1hbnRlbmllbmRvIGxhIGxcdTAwRjNnaWNhIGV4aXN0ZW50ZVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWxpbmVhc1BvckFyY2hpdm8uaGFzKHRhcmVhLnJ1dGFBcmNoaXZvKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGluZWFzUG9yQXJjaGl2by5zZXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEucnV0YUFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50YXNrVXRpbHMuZW5jb250cmFyTGluZWFzVGFyZWEoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgodGFyZWEucnV0YUFyY2hpdm8pIGFzIFRGaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZWFzQXJjaGl2byA9IGxpbmVhc1BvckFyY2hpdm8uZ2V0KHRhcmVhLnJ1dGFBcmNoaXZvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhc0FyY2hpdm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVJbmZvID0gbGluZWFzQXJjaGl2by5nZXQodGFyZWEudGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZWEubGluZUluZm8gPSBsaW5lSW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFudGVuZXIgbGEgbFx1MDBGM2dpY2EgZXhpc3RlbnRlIGRlIHByb2Nlc2FtaWVudG8gZGUgY29udGV4dG9zXG4gICAgICAgICAgICAgICAgICAgIHRhcmVhLmV0aXF1ZXRhcy5jb250ZXh0b3MuZm9yRWFjaChjb250ZXh0byA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0b05vcm1hbGl6YWRvID0gdGhpcy5ub3JtYWxpemFyQ29udGV4dG8oY29udGV4dG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0b3NDb25UYXJlYXMuaGFzKGNvbnRleHRvTm9ybWFsaXphZG8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzLnNldChjb250ZXh0b05vcm1hbGl6YWRvLCBbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0b3NDb25UYXJlYXMuZ2V0KGNvbnRleHRvTm9ybWFsaXphZG8pIS5wdXNoKHRhcmVhKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgIFxuICAgICAgICAgICAgLy8gTWFudGVuZXIgbGEgb3JnYW5pemFjaVx1MDBGM24geSBwZXNvIGV4aXN0ZW50ZXNcbiAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhcy5mb3JFYWNoKCh0YXJlYXMsIGNvbnRleHRvKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gVXNhciBlbCBzaXN0ZW1hIGRlIHBlc29zIGV4aXN0ZW50ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmVhc09yZGVuYWRhcyA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnNvcnRUYXNrcyh0YXJlYXMpO1xuICAgICAgICAgICAgICAgIGNvbnRleHRvc0NvblRhcmVhcy5zZXQoY29udGV4dG8sIHRhcmVhc09yZGVuYWRhcyk7XG4gICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzLFxuICAgICAgICAgICAgICAgIHRvdGFsQ29udGV4dG9zOiBjb250ZXh0b3NDb25UYXJlYXMuc2l6ZSxcbiAgICAgICAgICAgICAgICB0b3RhbFRhcmVhczogQXJyYXkuZnJvbShjb250ZXh0b3NDb25UYXJlYXMudmFsdWVzKCkpXG4gICAgICAgICAgICAgICAgICAgIC5yZWR1Y2UoKHN1bSwgdGFyZWFzKSA9PiBzdW0gKyB0YXJlYXMubGVuZ3RoLCAwKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBwcml2YXRlIGdlbmVyYXJEZXRhbGxlQ29udGV4dG9zKFxuICAgICAgICAgICAgYXJib2w6IE1hcDxzdHJpbmcsIGFueT4sIFxuICAgICAgICAgICAgY29udGV4dG9zQ29uVGFyZWFzOiBNYXA8c3RyaW5nLCBUYXNrW10+XG4gICAgICAgICk6IHN0cmluZ1tdIHtcbiAgICAgICAgICAgIGNvbnN0IGJsb3F1ZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcHJvY2VzYXJOb2RvID0gKG5vZG86IE1hcDxzdHJpbmcsIGFueT4sIHJ1dGFBY3R1YWw6IHN0cmluZ1tdID0gW10pID0+IHtcbiAgICAgICAgICAgICAgICBub2RvLmZvckVhY2goKGluZm8sIGNvbnRleHRvKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJ1dGFDb21wbGV0YSA9IGluZm8ucnV0YUNvbXBsZXRhO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZm8udGFyZWFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBsYXMgdGFyZWFzIGVzdFx1MDBFOW4gb3JkZW5hZGFzIHBvciBlbCBzaXN0ZW1hIGRlIHBlc29zXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJlYXNPcmRlbmFkYXMgPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci5zb3J0VGFza3MoaW5mby50YXJlYXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvcXVlcy5wdXNoKHRoaXMuZ2VuZXJhckJsb3F1ZUNvbnRleHRvKHJ1dGFDb21wbGV0YSwgdGFyZWFzT3JkZW5hZGFzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmZvLnN1YmNvbnRleHRvcy5zaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VzYXJOb2RvKGluZm8uc3ViY29udGV4dG9zLCBbLi4ucnV0YUFjdHVhbCwgY29udGV4dG9dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgICAgICBwcm9jZXNhck5vZG8oYXJib2wpO1xuICAgICAgICAgICAgcmV0dXJuIGJsb3F1ZXM7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJpemFyVGFyZWFDb250ZXh0byh0YXJlYTogVGFzayk6IHN0cmluZyB7XG4gICAgICAgICAgICBsZXQgY29udGVuaWRvID0gYC0gWyBdICR7dGFyZWEudGV4dG99XFxuYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQVx1MDBGMWFkaXIgdWJpY2FjaVx1MDBGM24gY29uIG5cdTAwRkFtZXJvIGRlIGxcdTAwRURuZWFcbiAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1RDgzRFx1RENDRCBbWyR7dGFyZWEucnV0YUFyY2hpdm99fCR7dGFyZWEudGl0dWxvfV1dYDtcbiAgICAgICAgICAgIGlmICh0YXJlYS5saW5lSW5mbz8ubnVtZXJvKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgKGxcdTAwRURuZWEgJHt0YXJlYS5saW5lSW5mby5udW1lcm99KWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgXG4gICAgICAgICAgICAvLyBNb3N0cmFyIGVsIHBlc28geSBwcmlvcmlkYWQgcHJpbWVybyAobWFudGVuaWVuZG8gZWwgc2lzdGVtYSBleGlzdGVudGUpXG4gICAgICAgICAgICBjb25zdCBwcmlvcmlkYWQgPSB0aGlzLm9idGVuZXJQcmlvcmlkYWRUYXJlYSh0YXJlYS50ZXh0byk7XG4gICAgICAgICAgICBpZiAocHJpb3JpZGFkKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgJHtwcmlvcmlkYWQuZW1vaml9IFByaW9yaWRhZDogJHtwcmlvcmlkYWQubm9tYnJlfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEud2VpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBiYXNlV2VpZ2h0LCB0aW1lV2VpZ2h0LCBwcmlvcml0eVdlaWdodCB9ID0gdGFyZWEud2VpZ2h0O1xuICAgICAgICAgICAgICAgIGlmIChiYXNlV2VpZ2h0ICsgdGltZVdlaWdodCArIHByaW9yaXR5V2VpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTI2OTZcdUZFMEYgUGVzbyB0b3RhbDogJHt0YXJlYS53ZWlnaHQudG90YWxXZWlnaHR9XFxuYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZlY2hhcyAobWFudGVuaWVuZG8gZWwgZm9ybWF0byBleGlzdGVudGUpXG4gICAgICAgICAgICBjb25zdCBmZWNoYXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0YXJlYS5mZWNoYVZlbmNpbWllbnRvKSB7XG4gICAgICAgICAgICAgICAgZmVjaGFzLnB1c2goYFx1RDgzRFx1RENDNSAke3RoaXMuZm9ybWF0ZWFyRmVjaGFDb25Db250ZXh0byh0YXJlYS5mZWNoYVZlbmNpbWllbnRvLCAnZHVlJyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTY2hlZHVsZWQpIHtcbiAgICAgICAgICAgICAgICBmZWNoYXMucHVzaChgXHUyM0YzICR7dGhpcy5mb3JtYXRlYXJGZWNoYUNvbkNvbnRleHRvKHRhcmVhLmZlY2hhU2NoZWR1bGVkLCAnc2NoZWR1bGVkJyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZWEuZmVjaGFTdGFydCkge1xuICAgICAgICAgICAgICAgIGZlY2hhcy5wdXNoKGBcdUQ4M0RcdURFRUIgJHt0aGlzLmZvcm1hdGVhckZlY2hhQ29uQ29udGV4dG8odGFyZWEuZmVjaGFTdGFydCwgJ3N0YXJ0Jyl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChmZWNoYXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjNGMCBGZWNoYXM6XFxuICAgICAgICAke2ZlY2hhcy5qb2luKCdcXG4gICAgICAgICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBIb3Jhcmlvc1xuICAgICAgICAgICAgaWYgKHRhcmVhLmhvcmFJbmljaW8gfHwgdGFyZWEuaG9yYUZpbikge1xuICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgICAgIFx1MjMxQSBIb3JhcmlvOiAke3RhcmVhLmhvcmFJbmljaW8gfHwgJy0tOi0tJ30gLSAke3RhcmVhLmhvcmFGaW4gfHwgJy0tOi0tJ31cXG5gO1xuICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgLy8gUGVyc29uYXMgYXNpZ25hZGFzXG4gICAgICAgICAgICBpZiAodGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IGAgICAgXHVEODNEXHVEQzY0IEFzaWduYWRvIGE6ICR7dGFyZWEuZXRpcXVldGFzLnBlcnNvbmFzLm1hcChwID0+IFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdGVhck5vbWJyZVBlcnNvbmEoYCNweC0ke3B9YClcbiAgICAgICAgICAgICAgICApLmpvaW4oJyB8ICcpfVxcbmA7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAvLyBEZXBlbmRlbmNpYXNcbiAgICAgICAgICAgIGlmICh0YXJlYS5kZXBlbmRlbmN5SWQpIHtcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYCAgICBcdTIxQjMgRGVwZW5kZSBkZTogYDtcbiAgICAgICAgICAgICAgICBpZiAodGFyZWEuZGVwZW5kZW5jeVRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbmlkbyArPSBgW1ske3RhcmVhLmRlcGVuZGVuY3lMb2NhdGlvbn18JHt0YXJlYS5kZXBlbmRlbmN5VGl0bGV9XV1gO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZWEuZGVwZW5kZW5jeVRleHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gYDogXCIke3RhcmVhLmRlcGVuZGVuY3lUZXh0b31cImA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGVuaWRvICs9IHRhcmVhLmlzQmxvY2tlZCA/ICcgXHUyM0YzJyA6ICcgXHUyNzA1JztcbiAgICAgICAgICAgICAgICBjb250ZW5pZG8gKz0gJ1xcbic7XG4gICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICByZXR1cm4gY29udGVuaWRvO1xuICAgICAgICB9XG4gICAgIFxufSIsICIvLyBzcmMvbW9kdWxlcy90YXNrTWFuYWdlci91dGlscy90YXNrVXRpbHMudHNcblxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vLi4vLi4vbWFpbic7XG5cbmV4cG9ydCBjbGFzcyBUYXNrVXRpbHMge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luOiBNeVBsdWdpbikge31cbiAgICBcbiAgICBwdWJsaWMgY29tcGFyYXJGZWNoYXMoZmVjaGExOiBEYXRlIHwgbnVsbCwgZmVjaGEyOiBEYXRlIHwgbnVsbCk6IG51bWJlciB7XG4gICAgICAgIGlmICghZmVjaGExICYmICFmZWNoYTIpIHJldHVybiAwO1xuICAgICAgICBpZiAoIWZlY2hhMSkgcmV0dXJuIDE7ICAvLyBudWxsIHNlIGNvbnNpZGVyYSBtYXlvclxuICAgICAgICBpZiAoIWZlY2hhMikgcmV0dXJuIC0xOyAvLyBudWxsIHNlIGNvbnNpZGVyYSBtYXlvclxuICAgICAgICByZXR1cm4gZmVjaGExLmdldFRpbWUoKSAtIGZlY2hhMi5nZXRUaW1lKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBub3JtYWxpemFySG9yYShob3JhOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgcGF0cm9uZXMgPSBbXG4gICAgICAgICAgICAvXihcXGR7MSwyfSkoPzo6KFxcZHsyfSkpP1xccyooYW18cG0pPyQvaSxcbiAgICAgICAgICAgIC9eKFxcZHsxLDJ9KTooXFxkezJ9KVxccyooYW18cG0pPyQvaSxcbiAgICAgICAgICAgIC9eKFxcZHsxLDJ9KTooXFxkezJ9KSQvXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yIChjb25zdCBwYXRyb24gb2YgcGF0cm9uZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gaG9yYS50b0xvd2VyQ2FzZSgpLm1hdGNoKHBhdHJvbik7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBsZXQgaG9yYXMgPSBwYXJzZUludChtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWludXRvcyA9IG1hdGNoWzJdID8gbWF0Y2hbMl0gOiAnMDAnO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcmlvZG8gPSBtYXRjaFszXTtcblxuICAgICAgICAgICAgICAgIGlmIChwZXJpb2RvID09PSAncG0nICYmIGhvcmFzIDwgMTIpIGhvcmFzICs9IDEyO1xuICAgICAgICAgICAgICAgIGlmIChwZXJpb2RvID09PSAnYW0nICYmIGhvcmFzID09PSAxMikgaG9yYXMgPSAwO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke2hvcmFzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHttaW51dG9zfWA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHVibGljIGV4dHJhZXJGZWNoYXNZSG9yYXMobGluZWE6IHN0cmluZyk6IHtcbiAgICAgICAgZmVjaGFDcmVhY2lvbj86IHN0cmluZztcbiAgICAgICAgZmVjaGFTY2hlZHVsZWQ/OiBzdHJpbmc7XG4gICAgICAgIGZlY2hhU3RhcnQ/OiBzdHJpbmc7XG4gICAgICAgIGZlY2hhVmVuY2ltaWVudG8/OiBzdHJpbmc7XG4gICAgICAgIGhvcmFJbmljaW8/OiBzdHJpbmc7XG4gICAgICAgIGhvcmFGaW4/OiBzdHJpbmc7XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IGhvcmFJbmljaW9NYXRjaCA9IGxpbmVhLm1hdGNoKC9cXFtoSTpcXHMqKFteXFxdXSspXFxdLyk7XG4gICAgICAgIGNvbnN0IGhvcmFGaW5NYXRjaCA9IGxpbmVhLm1hdGNoKC9cXFtoRjpcXHMqKFteXFxdXSspXFxdLyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZlY2hhQ3JlYWNpb246IGxpbmVhLm1hdGNoKC9cdTI3OTUgKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pPy5bMV0sXG4gICAgICAgICAgICBmZWNoYVNjaGVkdWxlZDogbGluZWEubWF0Y2goL1x1MjNGMyAoXFxkezR9LVxcZHsyfS1cXGR7Mn0pLyk/LlsxXSxcbiAgICAgICAgICAgIGZlY2hhU3RhcnQ6IGxpbmVhLm1hdGNoKC9cdUQ4M0RcdURFRUIgKFxcZHs0fS1cXGR7Mn0tXFxkezJ9KS8pPy5bMV0sXG4gICAgICAgICAgICBmZWNoYVZlbmNpbWllbnRvOiBsaW5lYS5tYXRjaCgvXHVEODNEXHVEQ0M1IChcXGR7NH0tXFxkezJ9LVxcZHsyfSkvKT8uWzFdLFxuICAgICAgICAgICAgaG9yYUluaWNpbzogaG9yYUluaWNpb01hdGNoID8gdGhpcy5ub3JtYWxpemFySG9yYShob3JhSW5pY2lvTWF0Y2hbMV0udHJpbSgpKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGhvcmFGaW46IGhvcmFGaW5NYXRjaCA/IHRoaXMubm9ybWFsaXphckhvcmEoaG9yYUZpbk1hdGNoWzFdLnRyaW0oKSkgOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb2J0ZW5lclRpdHVsb05vdGEoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMucGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIFxuICAgICAgICBpZiAobWV0YWRhdGE/LmFsaWFzZXMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG1ldGFkYXRhLmFsaWFzZXMpKSByZXR1cm4gbWV0YWRhdGEuYWxpYXNlc1swXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWV0YWRhdGEuYWxpYXNlcyA9PT0gJ3N0cmluZycpIHJldHVybiBtZXRhZGF0YS5hbGlhc2VzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAobWV0YWRhdGE/LnRpdHVsbykgcmV0dXJuIG1ldGFkYXRhLnRpdHVsbztcblxuICAgICAgICBjb25zdCBjb2luY2lkZW5jaWEgPSBmaWxlLmJhc2VuYW1lLm1hdGNoKC8oPzpQR1REfFBRfEFJfEFWfEF4fFJSfERKfE9DQXxDQUMpIC0gKC4rKS8pO1xuICAgICAgICBpZiAoY29pbmNpZGVuY2lhICYmIGNvaW5jaWRlbmNpYVsxXSkgcmV0dXJuIGNvaW5jaWRlbmNpYVsxXTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBmaWxlLmJhc2VuYW1lO1xuICAgIH1cbiBcblxuXG4gICAgcHVibGljIGNhdGVnb3JpemFyRXRpcXVldGFzKGV0aXF1ZXRhczogc3RyaW5nW10pOiB7XG4gICAgICAgIHRvZG9pc3Q6IHN0cmluZ1tdLFxuICAgICAgICBjb250ZXh0b3M6IHN0cmluZ1tdLFxuICAgICAgICBwZXJzb25hczogc3RyaW5nW10sXG4gICAgICAgIG90cmFzOiBzdHJpbmdbXVxuICAgIH0ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9kb2lzdDogZXRpcXVldGFzLmZpbHRlcihlID0+IGUuc3RhcnRzV2l0aCgnI3RvZG9pc3QnKSksXG4gICAgICAgICAgICBjb250ZXh0b3M6IGV0aXF1ZXRhc1xuICAgICAgICAgICAgICAgIC5maWx0ZXIoZSA9PiBlLm1hdGNoKC8jY3goPzpbLy1dLispJC8pKVxuICAgICAgICAgICAgICAgIC5tYXAoZSA9PiB0aGlzLmxpbXBpYXJQcmVmaWpvKGUsICdjeCcpKSxcbiAgICAgICAgICAgIHBlcnNvbmFzOiBldGlxdWV0YXNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGUgPT4gZS5zdGFydHNXaXRoKCcjcHgtJykpXG4gICAgICAgICAgICAgICAgLm1hcChlID0+IHRoaXMuZm9ybWF0ZWFyRXRpcXVldGFQZXJzb25hKGUpKSxcbiAgICAgICAgICAgIG90cmFzOiBldGlxdWV0YXMuZmlsdGVyKGUgPT4gXG4gICAgICAgICAgICAgICAgIWUuc3RhcnRzV2l0aCgnI3RvZG9pc3QnKSAmJiBcbiAgICAgICAgICAgICAgICAhZS5tYXRjaCgvI2N4KD86Wy8tXXwkKS8pICYmIFxuICAgICAgICAgICAgICAgICFlLnN0YXJ0c1dpdGgoJyNweC0nKVxuICAgICAgICAgICAgKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIE51ZXZvIG1cdTAwRTl0b2RvIHBhcmEgZm9ybWF0ZWFyIGV0aXF1ZXRhcyBkZSBwZXJzb25hc1xuICAgIHByaXZhdGUgZm9ybWF0ZWFyRXRpcXVldGFQZXJzb25hKGV0aXF1ZXRhOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBFbGltaW5hciBlbCBwcmVmaWpvICNweC1cbiAgICAgICAgY29uc3Qgbm9tYnJlID0gZXRpcXVldGEucmVwbGFjZSgnI3B4LScsICcnKTtcbiAgICAgICAgLy8gUmVlbXBsYXphciBndWlvbmVzIGJham9zIGNvbiBlc3BhY2lvcyBwYXJhIG1lam9yIGxlZ2liaWxpZGFkXG4gICAgICAgIHJldHVybiBub21icmUucmVwbGFjZSgvXy9nLCAnICcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbGltcGlhclByZWZpam8oZXRpcXVldGE6IHN0cmluZywgcHJlZmlqbzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3Qgc2luUHJlZmlqbyA9IGV0aXF1ZXRhLnJlcGxhY2UobmV3IFJlZ0V4cChgIyR7cHJlZmlqb31bLy1dYCksICcnKTtcbiAgICAgICAgcmV0dXJuIHNpblByZWZpam9cbiAgICAgICAgICAgIC5yZXBsYWNlKC8tL2csICcgXHUyMTkyICcpXG4gICAgICAgICAgICAucmVwbGFjZSgvXFwvL2csICcgXHUyMTkyICcpO1xuICAgIH1cblxuXG5cblxuICAgIHB1YmxpYyBsaW1waWFyVGV4dG9UYXJlYShsaW5lYTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHRleHRvTGltcGlvID0gbGluZWFcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIGVsIGNoZWNrYm94IGRlIGxhIHRhcmVhXG4gICAgICAgICAgICAucmVwbGFjZSgvXi0gXFxbIFxcXS8sICcnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciBmZWNoYXMgY29uIGVtb2ppc1xuICAgICAgICAgICAgLnJlcGxhY2UoL1tcdTI3OTVcdUQ4M0RcdURDQzVcdTIzRjNcdUQ4M0RcdURFRUJdIFxcZHs0fS1cXGR7Mn0tXFxkezJ9L2csICcnKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbGltaW5hciBob3JhcyBkZSBpbmljaW8geSBmaW5cbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtoSTpbXlxcXV0rXFxdL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoL1xcW2hGOlteXFxdXStcXF0vZywgJycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIGVubGFjZXNcbiAgICAgICAgICAgIC5yZXBsYWNlKC9cXFtsaW5rXFxdXFwoW15cXCldK1xcKS9nLCAnJylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRWxpbWluYXIgSURzIGRlIHRvZG9pc3RcbiAgICAgICAgICAgIC5yZXBsYWNlKC8lJVxcW3RvZG9pc3RfaWQ6OiBcXGQrXFxdJSUvZywgJycpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIHRvZGFzIGxhcyBldGlxdWV0YXMgKGNvbnNpZGVyYW5kbyBsb3MgbnVldm9zIGZvcm1hdG9zKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyNbXFx3LV0rKD86XFwvW1xcdy1dKykqXFxiL2csICcnKVxuICAgICAgICAgICAgLnJlcGxhY2UoLyNbXFx3LV0rKD86LVtcXHctXSspKlxcYi9nLCAnJyk7XG5cbiAgICAgICAgLy8gRWxpbWluYXIgbVx1MDBGQWx0aXBsZXMgZXNwYWNpb3MgeSBlc3BhY2lvcyBhbCBpbmljaW8vZmluYWxcbiAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpb1xuICAgICAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgICAgICAgICAgLnRyaW0oKTtcblxuICAgICAgICByZXR1cm4gdGV4dG9MaW1waW87XG4gICAgfVxuXG4gICBcbiAgICAvLyBNXHUwMEU5dG9kbyBkZSB1dGlsaWRhZCBwYXJhIG9idGVuZXIgdW5hIHJlcHJlc2VudGFjaVx1MDBGM24gamVyXHUwMEUxcnF1aWNhIGRlIGxhcyBldGlxdWV0YXNcbiAgICBwdWJsaWMgb2J0ZW5lckplcmFycXVpYUV0aXF1ZXRhcyhldGlxdWV0YXM6IHN0cmluZ1tdKTogTWFwPHN0cmluZywgU2V0PHN0cmluZz4+IHtcbiAgICAgICAgY29uc3QgamVyYXJxdWlhID0gbmV3IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PigpO1xuXG4gICAgICAgIGV0aXF1ZXRhcy5mb3JFYWNoKGV0aXF1ZXRhID0+IHtcbiAgICAgICAgICAgIC8vIEVsaW1pbmFyIGVsICMgaW5pY2lhbFxuICAgICAgICAgICAgY29uc3QgcGFydGVzID0gZXRpcXVldGEuc2xpY2UoMSkuc3BsaXQoL1svLV0vKTtcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3JpYSA9IHBhcnRlc1swXTtcblxuICAgICAgICAgICAgaWYgKCFqZXJhcnF1aWEuaGFzKGNhdGVnb3JpYSkpIHtcbiAgICAgICAgICAgICAgICBqZXJhcnF1aWEuc2V0KGNhdGVnb3JpYSwgbmV3IFNldCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBhcnRlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViZXRpcXVldGFzID0gcGFydGVzLnNsaWNlKDEpLmpvaW4oJy8nKTtcbiAgICAgICAgICAgICAgICBqZXJhcnF1aWEuZ2V0KGNhdGVnb3JpYSk/LmFkZChzdWJldGlxdWV0YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gamVyYXJxdWlhO1xuICAgIH1cblxuXG4gICAgcHVibGljIG9idGVuZXJGZWNoYUxvY2FsKCk6IERhdGUge1xuICAgICAgICBjb25zdCBhaG9yYSA9IG5ldyBEYXRlKCk7XG5cbiAgICAgICAgLy8gQXNlZ3VyYXIgcXVlIGVzdGFtb3MgdHJhYmFqYW5kbyBjb24gbGEgZmVjaGEgbG9jYWxcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKFxuICAgICAgICAgICAgYWhvcmEuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgICAgIGFob3JhLmdldE1vbnRoKCksXG4gICAgICAgICAgICBhaG9yYS5nZXREYXRlKCksXG4gICAgICAgICAgICAwLCAwLCAwXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhU3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogRGF0ZSB8IG51bGwge1xuICAgICAgICBpZiAoIWZlY2hhU3RyKSByZXR1cm4gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEFzZWd1cmFyIHF1ZSBpbnRlcnByZXRhbW9zIGxhIGZlY2hhIGVuIGxhIHpvbmEgaG9yYXJpYSBsb2NhbFxuICAgICAgICAgICAgY29uc3QgW2FcdTAwRjFvLCBtZXMsIGRpYV0gPSBmZWNoYVN0ci5zcGxpdCgnLScpLm1hcChudW0gPT4gcGFyc2VJbnQobnVtKSk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oYVx1MDBGMW8pIHx8IGlzTmFOKG1lcykgfHwgaXNOYU4oZGlhKSkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENyZWFyIGxhIGZlY2hhIGVuIGxhIHpvbmEgaG9yYXJpYSBsb2NhbFxuICAgICAgICAgICAgY29uc3QgZmVjaGEgPSBuZXcgRGF0ZShhXHUwMEYxbywgbWVzIC0gMSwgZGlhLCAwLCAwLCAwKTtcbiAgICAgICAgICAgIHJldHVybiBmZWNoYTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNlYW5kbyBmZWNoYTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBub3JtYWxpemFyRmVjaGFBU3RyaW5nKGZlY2hhOiBEYXRlKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgYVx1MDBGMW8gPSBmZWNoYS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zdCBtZXMgPSBTdHJpbmcoZmVjaGEuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIGNvbnN0IGRpYSA9IFN0cmluZyhmZWNoYS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgIHJldHVybiBgJHthXHUwMEYxb30tJHttZXN9LSR7ZGlhfWA7XG4gICAgfVxuXG4gICAgcHVibGljIGV4dHJhZXJEZXBlbmRlbmNpYXNZSWRzKGxpbmVhOiBzdHJpbmcpOiB7IHRhc2tJZD86IHN0cmluZzsgZGVwZW5kZW5jeUlkPzogc3RyaW5nIH0ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkFuYWxpemFuZG8gbFx1MDBFRG5lYSBwYXJhIElEczpcIiwgbGluZWEpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzdWx0YWRvID0ge1xuICAgICAgICAgICAgdGFza0lkOiB1bmRlZmluZWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGVwZW5kZW5jeUlkOiB1bmRlZmluZWQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIC8vIEV4dHJhZXIgSUQgcHJvcGlvIGRlIGxhIHRhcmVhXG4gICAgICAgIGNvbnN0IHRhc2tJZE1hdGNoID0gbGluZWEubWF0Y2goL1x1RDgzQ1x1REQ5NFxccyooW2EtejAtOV17NSw3fSkvKTtcbiAgICAgICAgaWYgKHRhc2tJZE1hdGNoKSB7XG4gICAgICAgICAgICByZXN1bHRhZG8udGFza0lkID0gdGFza0lkTWF0Y2hbMV07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIklEIGVuY29udHJhZG86XCIsIHJlc3VsdGFkby50YXNrSWQpO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEV4dHJhZXIgSUQgZGUgZGVwZW5kZW5jaWFcbiAgICAgICAgY29uc3QgZGVwZW5kZW5jeU1hdGNoID0gbGluZWEubWF0Y2goL1x1MjZENFxccyooW2EtejAtOV17NSw3fSkvKTtcbiAgICAgICAgaWYgKGRlcGVuZGVuY3lNYXRjaCkge1xuICAgICAgICAgICAgcmVzdWx0YWRvLmRlcGVuZGVuY3lJZCA9IGRlcGVuZGVuY3lNYXRjaFsxXTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGVwZW5kZW5jaWEgZW5jb250cmFkYTpcIiwgcmVzdWx0YWRvLmRlcGVuZGVuY3lJZCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdGFkbztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGFzeW5jIHZlcmlmaWNhckVzdGFkb1RhcmVhKHRhc2tJZDogc3RyaW5nKTogUHJvbWlzZTx7XG4gICAgICAgIGNvbXBsZXRhZGE6IGJvb2xlYW47XG4gICAgICAgIHJ1dGFBcmNoaXZvPzogc3RyaW5nO1xuICAgICAgICB0aXR1bG9BcmNoaXZvPzogc3RyaW5nO1xuICAgICAgICB0ZXh0b1RhcmVhPzogc3RyaW5nO1xuICAgIH0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJcXG5WZXJpZmljYW5kbyBlc3RhZG8gZGUgdGFyZWE6XCIsIHRhc2tJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBPYnRlbmVyIHRvZG9zIGxvcyBhcmNoaXZvcyB5IGZpbHRyYXIgbG9zIGV4Y2x1aWRvc1xuICAgICAgICBjb25zdCB0b2Rvc0xvc0FyY2hpdm9zID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgY29uc3QgZmlsZXNQYXJhUHJvY2VzYXIgPSB0b2Rvc0xvc0FyY2hpdm9zLmZpbHRlcihmaWxlID0+ICF0aGlzLmRlYmVFeGNsdWlyQXJjaGl2byhmaWxlKSk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgQnVzY2FuZG8gZW4gJHtmaWxlc1BhcmFQcm9jZXNhci5sZW5ndGh9IGFyY2hpdm9zIChleGNsdWlkb3M6ICR7dG9kb3NMb3NBcmNoaXZvcy5sZW5ndGggLSBmaWxlc1BhcmFQcm9jZXNhci5sZW5ndGh9KWApO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzUGFyYVByb2Nlc2FyKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVhcyA9IGNvbnRlbmlkby5zcGxpdCgnXFxuJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lYSBvZiBsaW5lYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhLmluY2x1ZGVzKGBcdUQ4M0NcdUREOTQgJHt0YXNrSWR9YCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVzdGFDb21wbGV0YWRhID0gbGluZWEudHJpbSgpLnN0YXJ0c1dpdGgoJy0gW3hdJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXR1bG9BcmNoaXZvID0gdGhpcy5vYnRlbmVyVGl0dWxvTm90YShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRvVGFyZWEgPSB0aGlzLmxpbXBpYXJUZXh0b1RhcmVhKGxpbmVhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGFyZWEgZW5jb250cmFkYSBlbjpcIiwgZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXN0YWRvIGNvbXBsZXRhZGE6XCIsIGVzdGFDb21wbGV0YWRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGV4dG8gZGUgbGEgdGFyZWE6XCIsIHRleHRvVGFyZWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRhZGE6IGVzdGFDb21wbGV0YWRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1dGFBcmNoaXZvOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0dWxvQXJjaGl2bzogdGl0dWxvQXJjaGl2byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0b1RhcmVhOiB0ZXh0b1RhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNhbmRvIGFyY2hpdm8gJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coXCJUYXJlYSBubyBlbmNvbnRyYWRhIGVuIGxvcyBhcmNoaXZvcyBwZXJtaXRpZG9zXCIpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGxldGFkYTogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgIC8vIEVuIGxhIGNsYXNlIFRhc2tVdGlsc1xuXG5wdWJsaWMgZXh0cmFlckV0aXF1ZXRhcyhsaW5lYTogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGV0aXF1ZXRhczogc3RyaW5nW10gPSBbXTtcbiAgICBcbiAgICAvLyBQYXRyb25lcyBwYXJhIGlkZW50aWZpY2FyIGRpZmVyZW50ZXMgZm9ybWF0b3MgZGUgZXRpcXVldGFzXG4gICAgY29uc3QgcGF0cm9uZXNFdGlxdWV0YXMgPSBbXG4gICAgICAgIC8vIEV0aXF1ZXRhcyBkZSBwZXJzb25hcyBjb24gZm9ybWF0byAjcHgtTm9tYnJlX0FwZWxsaWRvIFxuICAgICAgICAvI3B4LVtBLVphLXpdKyg/Ol9bQS1aYS16XSspKig/Ol9bQS1aYS16XSspP1xcYi9nLFxuICAgICAgICBcbiAgICAgICAgLy8gRXRpcXVldGFzIHNpbXBsZXM6ICN0b2RvaXN0XG4gICAgICAgIC8jW1xcdy1dK1xcYi9nLFxuICAgICAgICBcbiAgICAgICAgLy8gRXRpcXVldGFzIGNvbiBqZXJhcnF1XHUwMEVEYSB1c2FuZG8gXCIvXCI6ICNjeC9hbGd1bmEvY29zYVxuICAgICAgICAvI1tcXHctXSsoPzpcXC9bXFx3LV0rKStcXGIvZyxcbiAgICAgICAgXG4gICAgICAgIC8vIEV0aXF1ZXRhcyBjb24gamVyYXJxdVx1MDBFRGEgdXNhbmRvIFwiLVwiOiAjY3gtYWxndW5hLWNvc2FcbiAgICAgICAgLyNbXFx3LV0rKD86LVtcXHctXSspK1xcYi9nXG4gICAgXTtcblxuICAgIC8vIFByb2Nlc2FyIGNhZGEgcGF0clx1MDBGM25cbiAgICBwYXRyb25lc0V0aXF1ZXRhcy5mb3JFYWNoKHBhdHJvbiA9PiB7XG4gICAgICAgIGNvbnN0IGNvaW5jaWRlbmNpYXMgPSBsaW5lYS5tYXRjaChwYXRyb24pO1xuICAgICAgICBpZiAoY29pbmNpZGVuY2lhcykge1xuICAgICAgICAgICAgY29pbmNpZGVuY2lhcy5mb3JFYWNoKGV0aXF1ZXRhID0+IHtcbiAgICAgICAgICAgICAgICAvLyBFdml0YXIgZHVwbGljYWRvcyB5IGFzZWd1cmFyIHF1ZSBzZWEgdW5hIGV0aXF1ZXRhIHZcdTAwRTFsaWRhXG4gICAgICAgICAgICAgICAgaWYgKCFldGlxdWV0YXMuaW5jbHVkZXMoZXRpcXVldGEpICYmIHRoaXMuZXNFdGlxdWV0YVZhbGlkYShldGlxdWV0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXRpcXVldGFzLnB1c2goZXRpcXVldGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5vcmdhbml6YXJFdGlxdWV0YXMoZXRpcXVldGFzKTtcbn1cblxucHJpdmF0ZSBlc0V0aXF1ZXRhVmFsaWRhKGV0aXF1ZXRhOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBWZXJpZmljYXIgcXVlIGxhIGV0aXF1ZXRhIGN1bXBsYSBjb24gZWwgZm9ybWF0byBiXHUwMEUxc2ljb1xuICAgIGlmICghZXRpcXVldGEuc3RhcnRzV2l0aCgnIycpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBWYWxpZGFjaVx1MDBGM24gZXNwZWNcdTAwRURmaWNhIHBhcmEgZXRpcXVldGFzIGRlIHBlcnNvbmFzXG4gICAgaWYgKGV0aXF1ZXRhLnN0YXJ0c1dpdGgoJyNweC0nKSkge1xuICAgICAgICBjb25zdCBub21icmVDb21wbGV0byA9IGV0aXF1ZXRhLnNsaWNlKDQpOyAvLyBSZW1vdmVyICcjcHgtJ1xuICAgICAgICAvLyBWZXJpZmljYXIgZm9ybWF0byBOb21icmVfQXBlbGxpZG8oX0VtcHJlc2EpP1xuICAgICAgICByZXR1cm4gL15bQS1aYS16XSsoPzpfW0EtWmEtel0rKSokLy50ZXN0KG5vbWJyZUNvbXBsZXRvKTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgcXVlIG5vIGNvbnRlbmdhIGNhcmFjdGVyZXMgaW52XHUwMEUxbGlkb3NcbiAgICBjb25zdCBjYXJhY3RlcmVzSW52YWxpZG9zID0gL1shQCQlXiYqKCkrPXt9XFxbXFxdOjtcIic8PiwuP35cXFxcfF0vO1xuICAgIGlmIChjYXJhY3RlcmVzSW52YWxpZG9zLnRlc3QoZXRpcXVldGEpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBWZXJpZmljYXIgZXN0cnVjdHVyYSBwYXJhIGV0aXF1ZXRhcyBjb24gamVyYXJxdVx1MDBFRGFcbiAgICBjb25zdCBwYXJ0ZXNFdGlxdWV0YSA9IGV0aXF1ZXRhLnNsaWNlKDEpLnNwbGl0KC9bLy1dLyk7XG4gICAgcmV0dXJuIHBhcnRlc0V0aXF1ZXRhLmV2ZXJ5KHBhcnRlID0+IHBhcnRlLmxlbmd0aCA+IDApO1xufVxuXG5wcml2YXRlIG9yZ2FuaXphckV0aXF1ZXRhcyhldGlxdWV0YXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIC8vIE9yZGVuYXIgZXRpcXVldGFzIHBvciBjYXRlZ29yXHUwMEVEYXMgY29ub2NpZGFzIHkgbHVlZ28gYWxmYWJcdTAwRTl0aWNhbWVudGVcbiAgICBjb25zdCBjYXRlZ29yaWFzQ29ub2NpZGFzID0ge1xuICAgICAgICB0b2RvaXN0OiBbXSBhcyBzdHJpbmdbXSxcbiAgICAgICAgY3g6IFtdIGFzIHN0cmluZ1tdLFxuICAgICAgICBweDogW10gYXMgc3RyaW5nW10sXG4gICAgICAgIG90cmFzOiBbXSBhcyBzdHJpbmdbXVxuICAgIH07XG5cbiAgICBldGlxdWV0YXMuZm9yRWFjaChldGlxdWV0YSA9PiB7XG4gICAgICAgIGlmIChldGlxdWV0YS5zdGFydHNXaXRoKCcjcHgtJykpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpYXNDb25vY2lkYXMucHgucHVzaChldGlxdWV0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXRpcXVldGEuc3RhcnRzV2l0aCgnI3RvZG9pc3QnKSkge1xuICAgICAgICAgICAgY2F0ZWdvcmlhc0Nvbm9jaWRhcy50b2RvaXN0LnB1c2goZXRpcXVldGEpO1xuICAgICAgICB9IGVsc2UgaWYgKGV0aXF1ZXRhLm1hdGNoKC8jY3goPzpbLy1dfCQpLykpIHtcbiAgICAgICAgICAgIGNhdGVnb3JpYXNDb25vY2lkYXMuY3gucHVzaChldGlxdWV0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYXRlZ29yaWFzQ29ub2NpZGFzLm90cmFzLnB1c2goZXRpcXVldGEpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBPcmRlbmFyIGNhZGEgY2F0ZWdvclx1MDBFRGEgYWxmYWJcdTAwRTl0aWNhbWVudGVcbiAgICBPYmplY3QudmFsdWVzKGNhdGVnb3JpYXNDb25vY2lkYXMpLmZvckVhY2goY2F0ZWdvcmlhID0+IHtcbiAgICAgICAgY2F0ZWdvcmlhLnNvcnQoKGEsIGIpID0+IGEubG9jYWxlQ29tcGFyZShiKSk7XG4gICAgfSk7XG5cbiAgICAvLyBDb21iaW5hciB0b2RhcyBsYXMgY2F0ZWdvclx1MDBFRGFzIGVuIGVsIG9yZGVuIGRlc2VhZG9cbiAgICByZXR1cm4gW1xuICAgICAgICAuLi5jYXRlZ29yaWFzQ29ub2NpZGFzLnRvZG9pc3QsXG4gICAgICAgIC4uLmNhdGVnb3JpYXNDb25vY2lkYXMuY3gsXG4gICAgICAgIC4uLmNhdGVnb3JpYXNDb25vY2lkYXMucHgsXG4gICAgICAgIC4uLmNhdGVnb3JpYXNDb25vY2lkYXMub3RyYXNcbiAgICBdO1xufVxuXG4vLyBBZ3JlZ2FyIG1cdTAwRTl0b2RvIHBhcmEgdmVyaWZpY2FyIGV4Y2x1c2lvbmVzXG5wcml2YXRlIGRlYmVFeGNsdWlyQXJjaGl2byhmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgIC8vIEV4Y2x1aXIgbGEgY2FycGV0YSBQbGFudGlsbGFzIHkgc3VzIHN1YmNhcnBldGFzXG4gICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKCdQbGFudGlsbGFzLycpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEV4Y2x1aXIgbGEgY2FycGV0YSBkZWwgc2lzdGVtYSBHVEQgeSBzdXMgc3ViY2FycGV0YXNcbiAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgoYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyX1Npc3RlbWFHVER9L2ApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEV4Y2x1aXIgY2FycGV0YSBkZSBhcmNoaXZvcyAoc2kgZXhpc3RlKVxuICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCgnQXJjaGl2by8nKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnB1YmxpYyBhc3luYyBlbmNvbnRyYXJMaW5lYXNUYXJlYShmaWxlOiBURmlsZSk6IFByb21pc2U8TWFwPHN0cmluZywgTGluZUluZm8+PiB7XG4gICAgY29uc3QgbGluZWFzVGFyZWFzID0gbmV3IE1hcDxzdHJpbmcsIExpbmVJbmZvPigpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRlbmlkbyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xuICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoJ1xcbicpO1xuICAgICAgICBcbiAgICAgICAgbGluZWFzLmZvckVhY2goKGxpbmVhLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgLy8gQ3JlYXIgdW5hIGNsYXZlIFx1MDBGQW5pY2EgYmFzYWRhIGVuIGVsIHRleHRvIGRlIGxhIHRhcmVhXG4gICAgICAgICAgICBjb25zdCB0ZXh0b0xpbXBpbyA9IHRoaXMubGltcGlhclRleHRvVGFyZWEobGluZWEpO1xuICAgICAgICAgICAgaWYgKHRleHRvTGltcGlvICYmIGxpbmVhLnRyaW0oKS5zdGFydHNXaXRoKCctIFsnKSkge1xuICAgICAgICAgICAgICAgIGxpbmVhc1RhcmVhcy5zZXQodGV4dG9MaW1waW8sIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtZXJvOiBpbmRleCArIDEsXG4gICAgICAgICAgICAgICAgICAgIHRleHRvOiBsaW5lYS50cmltKClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2VzYW5kbyBsXHUwMEVEbmVhcyBlbiAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFzVGFyZWFzO1xufVxuXG59IiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL3V0aWxzL3Rhc2tXZWlnaHRDYWxjdWxhdG9yLnRzXG5cbmltcG9ydCB7IFRhc2ssIEVzdGFkb1RhcmVhIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy90YXNrSW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBUYXNrVXRpbHMgfSBmcm9tICcuL3Rhc2tVdGlscyc7XG5cbmV4cG9ydCBjbGFzcyBUYXNrV2VpZ2h0Q2FsY3VsYXRvciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgdGFza1V0aWxzOiBUYXNrVXRpbHM7XG4gICAgXG4gICAgcHJpdmF0ZSBzdGF0aWMgcmVhZG9ubHkgV0VJR0hUUyA9IHtcbiAgICAgICAgSE9SQV9GSU46IDUsXG4gICAgICAgIEhPUkFfSU5JQ0lPOiA1LFxuICAgICAgICBEVUVfREFURTogNSxcbiAgICAgICAgU0NIRURVTEVEOiA0LFxuICAgICAgICBTVEFSVDogMyxcbiAgICAgICAgUFJJT1JJVFk6IHtcbiAgICAgICAgICAgIEhJR0hFU1Q6IDQsXG4gICAgICAgICAgICBISUdIOiAzLFxuICAgICAgICAgICAgTUVESVVNOiAyLFxuICAgICAgICAgICAgTE9XOiAtMSxcbiAgICAgICAgICAgIExPV0VTVDogLTJcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIHNldFRhc2tVdGlscyh1dGlsczogVGFza1V0aWxzKSB7XG4gICAgICAgIFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscyA9IHV0aWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmVjaGFQcmlvcml0YXJpYSh0YXNrOiBUYXNrLCB0aXBvRmVjaGE6ICdzdGFydCcgfCAnZHVlJyB8ICdzY2hlZHVsZWQnIHwgJ2FueScgPSAnYW55Jyk6IHN0cmluZyB8IG51bGwge1xuICAgICAgICBpZiAoIXRhc2spIHJldHVybiBudWxsO1xuXG4gICAgICAgIHN3aXRjaCAodGlwb0ZlY2hhKSB7XG4gICAgICAgICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suZmVjaGFTdGFydCB8fCBudWxsO1xuICAgICAgICAgICAgY2FzZSAnZHVlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5mZWNoYVZlbmNpbWllbnRvIHx8IG51bGw7XG4gICAgICAgICAgICBjYXNlICdzY2hlZHVsZWQnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLmZlY2hhU2NoZWR1bGVkIHx8IG51bGw7XG4gICAgICAgICAgICBjYXNlICdhbnknOlxuICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLmZlY2hhVmVuY2ltaWVudG8gfHwgdGFzay5mZWNoYVNjaGVkdWxlZCB8fCB0YXNrLmZlY2hhU3RhcnQgfHwgbnVsbDtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIHNob3VsZEluY2x1ZGVUYXNrKHRhc2s6IFRhc2ssIHNlYXJjaFR5cGU6IHN0cmluZywgY3VycmVudERhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Rhc2tVdGlscyBubyBpbmljaWFsaXphZG8gZW4gVGFza1dlaWdodENhbGN1bGF0b3InKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHNlYXJjaFR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdzdGFydF92ZW5jaWRhcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVjaGFTdGFydCA9IHRhc2suZmVjaGFTdGFydDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWNoYVN0YXJ0KSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVN0YXJ0T2JqID0gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVjaGFTdGFydE9iaiAhPT0gbnVsbCAmJiBmZWNoYVN0YXJ0T2JqIDwgY3VycmVudERhdGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FzZSAndmVuY2lkYXMnOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhVmVuY2ltaWVudG8gPSB0YXNrLmZlY2hhVmVuY2ltaWVudG87XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVjaGFWZW5jaW1pZW50bykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhVmVuY09iaiA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYVZlbmNpbWllbnRvKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhVmVuY09iaiAhPT0gbnVsbCAmJiBmZWNoYVZlbmNPYmogPCBjdXJyZW50RGF0ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjYXNlICdob3knOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZlY2hhcyA9IFt0YXNrLmZlY2hhVmVuY2ltaWVudG8sIHRhc2suZmVjaGFTY2hlZHVsZWQsIHRhc2suZmVjaGFTdGFydF0uZmlsdGVyKGYgPT4gZik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWNoYXMuc29tZShmZWNoYSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYU9iaiA9IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYSEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlY2hhT2JqPy50b0RhdGVTdHJpbmcoKSA9PT0gY3VycmVudERhdGUudG9EYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb3hpbWFzJzoge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVZlbmNpbWllbnRvID0gdGFzay5mZWNoYVZlbmNpbWllbnRvO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlY2hhVmVuY2ltaWVudG8pIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmZWNoYVZlbmNPYmogPSBUYXNrV2VpZ2h0Q2FsY3VsYXRvci50YXNrVXRpbHMucGFyc2VhckZlY2hhVmVuY2ltaWVudG8oZmVjaGFWZW5jaW1pZW50byk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVjaGFWZW5jT2JqKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlhc0RpZmVyZW5jaWEgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZmVjaGFWZW5jT2JqLmdldFRpbWUoKSAtIGN1cnJlbnREYXRlLmdldFRpbWUoKSkgLyAoMTAwMCAqIDYwICogNjAgKiAyNClcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpYXNEaWZlcmVuY2lhID49IDAgJiYgZGlhc0RpZmVyZW5jaWEgPD0gNztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBzaG91bGRJbmNsdWRlVGFzazonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNhbGN1bGF0ZVdlaWdodCh0YXNrOiBUYXNrKTogeyBiYXNlV2VpZ2h0OiBudW1iZXI7IHRpbWVXZWlnaHQ6IG51bWJlcjsgcHJpb3JpdHlXZWlnaHQ6IG51bWJlcjsgdG90YWxXZWlnaHQ6IG51bWJlciB9IHtcbiAgICAgICAgbGV0IGJhc2VXZWlnaHQgPSAwO1xuICAgICAgICBsZXQgdGltZVdlaWdodCA9IDA7XG4gICAgICAgIGxldCBwcmlvcml0eVdlaWdodCA9IDA7XG5cbiAgICAgICAgLy8gUGVzb3MgcG9yIGZlY2hhc1xuICAgICAgICBpZiAodGFzay5mZWNoYVZlbmNpbWllbnRvKSBiYXNlV2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5EVUVfREFURTtcbiAgICAgICAgaWYgKHRhc2suZmVjaGFTY2hlZHVsZWQpIGJhc2VXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlNDSEVEVUxFRDtcbiAgICAgICAgaWYgKHRhc2suZmVjaGFTdGFydCkgYmFzZVdlaWdodCArPSB0aGlzLldFSUdIVFMuU1RBUlQ7XG5cbiAgICAgICAgLy8gUGVzb3MgcG9yIGhvcmFzXG4gICAgICAgIGlmICh0YXNrLmhvcmFGaW4pIHRpbWVXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLkhPUkFfRklOO1xuICAgICAgICBpZiAodGFzay5ob3JhSW5pY2lvKSB0aW1lV2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5IT1JBX0lOSUNJTztcblxuICAgICAgICAvLyBQZXNvIHBvciBwcmlvcmlkYWRcbiAgICAgICAgY29uc3QgdGV4dG8gPSB0YXNrLnRleHRvLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNBJykpIHByaW9yaXR5V2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5QUklPUklUWS5ISUdIRVNUO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQicpKSBwcmlvcml0eVdlaWdodCArPSB0aGlzLldFSUdIVFMuUFJJT1JJVFkuSElHSDtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0MnKSkgcHJpb3JpdHlXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLk1FRElVTTtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0QnKSkgcHJpb3JpdHlXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkxPVztcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdTIzRUMnKSkgcHJpb3JpdHlXZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkxPV0VTVDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmFzZVdlaWdodCxcbiAgICAgICAgICAgIHRpbWVXZWlnaHQsXG4gICAgICAgICAgICBwcmlvcml0eVdlaWdodCxcbiAgICAgICAgICAgIHRvdGFsV2VpZ2h0OiBiYXNlV2VpZ2h0ICsgdGltZVdlaWdodCArIHByaW9yaXR5V2VpZ2h0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBzb3J0VGFza3ModGFza3M6IFRhc2tbXSk6IFRhc2tbXSB7XG4gICAgICAgIGlmICghVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUYXNrVXRpbHMgbm8gaW5pY2lhbGl6YWRvIGVuIFRhc2tXZWlnaHRDYWxjdWxhdG9yJyk7XG4gICAgICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFza3Muc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBQcmltZXJvIG9yZGVuYXIgcG9yIGZlY2hhXG4gICAgICAgICAgICAgICAgY29uc3QgZmVjaGFBID0gdGhpcy5nZXRGZWNoYVByaW9yaXRhcmlhKGEsICdhbnknKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmZWNoYUIgPSB0aGlzLmdldEZlY2hhUHJpb3JpdGFyaWEoYiwgJ2FueScpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGZlY2hhQSAhPT0gZmVjaGFCKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gZmVjaGFBID8gVGFza1dlaWdodENhbGN1bGF0b3IudGFza1V0aWxzLnBhcnNlYXJGZWNoYVZlbmNpbWllbnRvKGZlY2hhQSkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQiA9IGZlY2hhQiA/IFRhc2tXZWlnaHRDYWxjdWxhdG9yLnRhc2tVdGlscy5wYXJzZWFyRmVjaGFWZW5jaW1pZW50byhmZWNoYUIpIDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRlQSAmJiBkYXRlQikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGVBLmdldFRpbWUoKSAtIGRhdGVCLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTaSBsYXMgZmVjaGFzIHNvbiBpZ3VhbGVzLCBvcmRlbmFyIHBvciBob3JhXG4gICAgICAgICAgICAgICAgaWYgKGEuaG9yYUluaWNpbyAmJiBiLmhvcmFJbmljaW8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEuaG9yYUluaWNpbyAhPT0gYi5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYS5ob3JhSW5pY2lvLmxvY2FsZUNvbXBhcmUoYi5ob3JhSW5pY2lvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYS5ob3JhSW5pY2lvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGIuaG9yYUluaWNpbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTaSBsYXMgaG9yYXMgc29uIGlndWFsZXMgbyBubyBleGlzdGVuLCBvcmRlbmFyIHBvciBwZXNvXG4gICAgICAgICAgICAgICAgY29uc3Qgd2VpZ2h0QSA9IGEud2VpZ2h0Py50b3RhbFdlaWdodCA/PyAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHdlaWdodEIgPSBiLndlaWdodD8udG90YWxXZWlnaHQgPz8gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2VpZ2h0QiAtIHdlaWdodEE7XG5cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb3JkZW5hbmRvIHRhcmVhczonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZUJhc2VXZWlnaHQodGFzazogVGFzayk6IG51bWJlciB7XG4gICAgICAgIGxldCB3ZWlnaHQgPSAwO1xuXG4gICAgICAgIC8vIFBlc29zIHBvciBmZWNoYXNcbiAgICAgICAgaWYgKHRhc2suZmVjaGFWZW5jaW1pZW50bykgd2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5EVUVfREFURTtcbiAgICAgICAgaWYgKHRhc2suZmVjaGFTY2hlZHVsZWQpIHdlaWdodCArPSB0aGlzLldFSUdIVFMuU0NIRURVTEVEO1xuICAgICAgICBpZiAodGFzay5mZWNoYVN0YXJ0KSB3ZWlnaHQgKz0gdGhpcy5XRUlHSFRTLlNUQVJUO1xuXG4gICAgICAgIHJldHVybiB3ZWlnaHQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2FsY3VsYXRlVGltZVdlaWdodCh0YXNrOiBUYXNrKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IHdlaWdodCA9IDA7XG5cbiAgICAgICAgaWYgKHRhc2suaG9yYUZpbikgd2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5IT1JBX0ZJTjtcbiAgICAgICAgaWYgKHRhc2suaG9yYUluaWNpbykgd2VpZ2h0ICs9IHRoaXMuV0VJR0hUUy5IT1JBX0lOSUNJTztcblxuICAgICAgICByZXR1cm4gd2VpZ2h0O1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNhbGN1bGF0ZVByaW9yaXR5V2VpZ2h0KHRhc2s6IFRhc2spOiBudW1iZXIge1xuICAgICAgICBjb25zdCB0ZXh0byA9IHRhc2sudGV4dG8udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1RDgzRFx1REQzQScpKSByZXR1cm4gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkhJR0hFU1Q7XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHUyM0VCJykpIHJldHVybiB0aGlzLldFSUdIVFMuUFJJT1JJVFkuSElHSDtcbiAgICAgICAgaWYgKHRleHRvLmluY2x1ZGVzKCdcdUQ4M0RcdUREM0MnKSkgcmV0dXJuIHRoaXMuV0VJR0hUUy5QUklPUklUWS5NRURJVU07XG4gICAgICAgIGlmICh0ZXh0by5pbmNsdWRlcygnXHVEODNEXHVERDNEJykpIHJldHVybiB0aGlzLldFSUdIVFMuUFJJT1JJVFkuTE9XO1xuICAgICAgICBpZiAodGV4dG8uaW5jbHVkZXMoJ1x1MjNFQycpKSByZXR1cm4gdGhpcy5XRUlHSFRTLlBSSU9SSVRZLkxPV0VTVDtcblxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG5cblxuICAgIHByaXZhdGUgc3RhdGljIGVzRmVjaGFWYWxpZGEoZmVjaGE6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZmVjaGFPYmogPSBuZXcgRGF0ZShmZWNoYSk7XG4gICAgICAgICAgICByZXR1cm4gZmVjaGFPYmoudG9TdHJpbmcoKSAhPT0gJ0ludmFsaWQgRGF0ZSc7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvaW5kZXgudHNcblxuaW1wb3J0IHsgUGx1Z2luLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMgfSBmcm9tICcuL2NvbW1hbmRzJztcbmltcG9ydCB7IFRhYlRpdGxlTWFuYWdlciB9IGZyb20gJy4vVGFiVGl0bGVNYW5hZ2VyJztcbmltcG9ydCB7IFRhYlRpdGxlU2V0dGluZ3MgfSBmcm9tICcuL2ludGVyZmFjZXMvVGFiVGl0bGVTZXR0aW5ncyc7XG5pbXBvcnQgeyBERUZBVUxUX1RBQl9TRVRUSU5HUyB9IGZyb20gJy4vZGVmYXVsdHMvZGVmYXVsdFNldHRpbmdzJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGNsYXNzIE1vZHVsb1RhYlRpdGxlIHtcbiAgICBwcml2YXRlIHBsdWdpbjogUGx1Z2luO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IFRhYlRpdGxlU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSB0YWJNYW5hZ2VyOiBUYWJUaXRsZU1hbmFnZXIgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IERFRkFVTFRfVEFCX1NFVFRJTkdTO1xuICAgIH1cblxuICAgIGFzeW5jIGFjdGl2YXRlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gQ2FyZ2FyIGNvbmZpZ3VyYWNpXHUwMEYzblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQXNlZ3VyYXJzZSBkZSBxdWUgdGl0bGVEaXNwbGF5TW9kZSBlc3RcdTAwRTEgY29uZmlndXJhZG9cbiAgICAgICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy50aXRsZURpc3BsYXlNb2RlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50aXRsZURpc3BsYXlNb2RlID0gJ2FsaWFzJztcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBJbmljaWFsaXphciBlbCBtYW5lamFkb3IgZGUgdFx1MDBFRHR1bG9zXG4gICAgICAgICAgICB0aGlzLnRhYk1hbmFnZXIgPSBuZXcgVGFiVGl0bGVNYW5hZ2VyKHRoaXMucGx1Z2luLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVnaXN0cmFyIGxvcyBjb21hbmRvc1xuICAgICAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhciBldmVudG9zIHBhcmEgY2FtYmlvcyBkZSBsYXlvdXRcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlcj8udXBkYXRlQWxsVGFicygpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciB1cGRhdGluZyB0YWJzIG9uIGxheW91dCBjaGFuZ2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFJlZ2lzdHJhciBldmVudG8gcGFyYSBjdWFuZG8gc2UgYWJyYSB1biBhcmNoaXZvXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIChmaWxlOiBURmlsZSB8IG51bGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWxlICYmIHRoaXMudGFiTWFuYWdlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlci51cGRhdGVUYWJGb3JGaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciB1cGRhdGluZyB0YWIgb24gZmlsZSBvcGVuOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBBY3R1YWxpemFjaVx1MDBGM24gaW5pY2lhbCBkZXNwdVx1MDBFOXMgZGUgdW4gYnJldmUgcmV0cmFzb1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy50YWJNYW5hZ2VyPy51cGRhdGVBbGxUYWJzKCk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgTG9nZ2VyLmVycm9yKCdFcnJvciBhY3RpdmF0aW5nIFRhYlRpdGxlIG1vZHVsZTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFiTWFuYWdlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlci5yZXN0b3JlRGVmYXVsdFRpdGxlcygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFiTWFuYWdlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIGRlYWN0aXZhdGluZyBUYWJUaXRsZSBtb2R1bGU6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBsb2FkZWREYXRhID0gYXdhaXQgdGhpcy5wbHVnaW4ubG9hZERhdGEoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1RBQl9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgVGFiVGl0bGUgc2V0dGluZ3M6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IERFRkFVTFRfVEFCX1NFVFRJTkdTO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIExvZ2dlci5lcnJvcignRXJyb3Igc2F2aW5nIFRhYlRpdGxlIHNldHRpbmdzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvY29tbWFuZHMudHNcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRhYlRpdGxlU2V0dGluZ3MgfSBmcm9tICcuL2ludGVyZmFjZXMvVGFiVGl0bGVTZXR0aW5ncyc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luLCBzZXR0aW5nczogVGFiVGl0bGVTZXR0aW5ncykge1xuICAgIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdzZXQtdGFiLXRpdGxlLWFsaWFzJyxcbiAgICAgICAgbmFtZTogJ01vc3RyYXIgYWxpYXMgZW4gcGVzdGFcdTAwRjFhcycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBzZXR0aW5ncy50aXRsZURpc3BsYXlNb2RlID0gJ2FsaWFzJztcbiAgICAgICAgICAgIHBsdWdpbi5zYXZlRGF0YShzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdzZXQtdGFiLXRpdGxlLXRpdGxlJyxcbiAgICAgICAgbmFtZTogJ01vc3RyYXIgdFx1MDBFRHR1bG8gZW4gcGVzdGFcdTAwRjFhcycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBzZXR0aW5ncy50aXRsZURpc3BsYXlNb2RlID0gJ3RpdGxlJztcbiAgICAgICAgICAgIHBsdWdpbi5zYXZlRGF0YShzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdzZXQtdGFiLXRpdGxlLWZpbGVuYW1lJyxcbiAgICAgICAgbmFtZTogJ01vc3RyYXIgbm9tYnJlIGRlIGFyY2hpdm8gZW4gcGVzdGFcdTAwRjFhcycsXG4gICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICBzZXR0aW5ncy50aXRsZURpc3BsYXlNb2RlID0gJ2ZpbGVuYW1lJztcbiAgICAgICAgICAgIHBsdWdpbi5zYXZlRGF0YShzZXR0aW5ncyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvVGFiVGl0bGVNYW5hZ2VyLnRzXG5pbXBvcnQgeyBURmlsZSwgV29ya3NwYWNlTGVhZiwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQ3VzdG9tTWFya2Rvd25WaWV3IH0gZnJvbSAnLi92aWV3cy9DdXN0b21NYXJrZG93blZpZXcnO1xuaW1wb3J0IHsgVGFiVGl0bGVTZXR0aW5ncyB9IGZyb20gJy4vaW50ZXJmYWNlcy9UYWJUaXRsZVNldHRpbmdzJztcbmltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vdXRpbHMvbG9nZ2VyJztcblxuZXhwb3J0IGNsYXNzIFRhYlRpdGxlTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBUYWJUaXRsZVNldHRpbmdzO1xuICAgIHByaXZhdGUgY3VzdG9tVmlld3M6IE1hcDxzdHJpbmcsIEN1c3RvbU1hcmtkb3duVmlldz47XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbiwgc2V0dGluZ3M6IFRhYlRpdGxlU2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5jdXN0b21WaWV3cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgTG9nZ2VyLmluZm8oJ1RhYlRpdGxlTWFuYWdlciBpbml0aWFsaXplZCcpO1xuICAgIH1cblxuICAgIHVwZGF0ZUFsbFRhYnMoKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWIobGVhZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVUYWJGb3JGaWxlKGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdtYXJrZG93bicpO1xuICAgICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIGxlYWYudmlldy5maWxlPy5wYXRoID09PSBmaWxlLnBhdGgpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVRhYihsZWFmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICBhc3luYyBnZXRQcmVmZXJyZWRUaXRsZVdpdGhTb3VyY2UoZmlsZTogVEZpbGUpOiBQcm9taXNlPHsgZGlzcGxheVRpdGxlOiBzdHJpbmcgfCBudWxsOyBzb3VyY2U6IHN0cmluZyB9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBtZXRhZGF0YSA9IGF3YWl0IHRoaXMud2FpdEZvck1ldGFkYXRhKGZpbGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBWZXJpZmljYXIgc2kgdGllbmUgYWxpYXNlc1xuICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5hbGlhc2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2FzbyBlc3BlY2lhbDogMyBvIG1cdTAwRTFzIGFsaWFzZXMgLSBtb3N0cmFyIGFsaWFzZXNbMl0gLyBhbGlhc2VzWzBdXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWV0YWRhdGEuYWxpYXNlcykgJiYgbWV0YWRhdGEuYWxpYXNlcy5sZW5ndGggPj0gMykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogYCR7bWV0YWRhdGEuYWxpYXNlc1syXX0gLyAke21ldGFkYXRhLmFsaWFzZXNbMF19YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogJ2FsaWFzZXMtc3BlY2lhbCdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gQ29tcG9ydGFtaWVudG8gbm9ybWFsIHBhcmEgbWVub3MgZGUgMyBhbGlhc2VzXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXRhZGF0YS5hbGlhc2VzKSAmJiBtZXRhZGF0YS5hbGlhc2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG1ldGFkYXRhLmFsaWFzZXNbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdhbGlhc2VzJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWV0YWRhdGEuYWxpYXNlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG1ldGFkYXRhLmFsaWFzZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICdhbGlhc2VzJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgbm8gaGF5IGFsaWFzLCBpbnRlbnRhIG9idGVuZXIgZWwgdFx1MDBFRHR1bG9cbiAgICAgICAgICAgIGlmIChtZXRhZGF0YT8udGl0dWxvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogbWV0YWRhdGEudGl0dWxvLFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6ICd0aXR1bG8nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2kgbm8gaGF5IGFsaWFzIG5pIHRcdTAwRUR0dWxvLCB1c2Egc29sbyBlbCBub21icmUgZGVsIGFyY2hpdm9cbiAgICAgICAgICAgIHJldHVybiB7IFxuICAgICAgICAgICAgICAgIGRpc3BsYXlUaXRsZTogbnVsbCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6ICdiYXNlbmFtZSdcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBMb2dnZXIuZXJyb3IoYEVycm9yIGdldHRpbmcgdGl0bGUgZm9yICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICAgICAgICBkaXNwbGF5VGl0bGU6IG51bGwsXG4gICAgICAgICAgICAgICAgc291cmNlOiAnZXJyb3InXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyB3YWl0Rm9yTWV0YWRhdGEoZmlsZTogVEZpbGUpOiBQcm9taXNlPGFueT4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1heEF0dGVtcHRzID0gMTA7XG4gICAgICAgICAgICBsZXQgYXR0ZW1wdHMgPSAwO1xuXG4gICAgICAgICAgICBjb25zdCBjaGVja01ldGFkYXRhID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5wbHVnaW4uYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZT8uZnJvbnRtYXR0ZXIgfHwgYXR0ZW1wdHMgPj0gbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShjYWNoZT8uZnJvbnRtYXR0ZXIgfHwge30pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRzKys7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoY2hlY2tNZXRhZGF0YSwgMTAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjaGVja01ldGFkYXRhKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gIC8vIE1cdTAwRTl0b2RvIHBhcmEgYXBsaWNhciBzY3JvbGwgaG9yaXpvbnRhbCBhIHVuIGVsZW1lbnRvIGRlIHRcdTAwRUR0dWxvIGRlIHBlc3RhXHUwMEYxYVxuICBwcml2YXRlIGFwcGx5SG9yaXpvbnRhbFNjcm9sbFRvVGFiKHRhYkVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgLy8gQXNlZ3VyYXIgcXVlIHNvbG8gYXBsaWNhbW9zIHVuYSB2ZXpcbiAgICBpZiAodGFiRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWVuYWJsZWQnKSA9PT0gJ3RydWUnKSByZXR1cm47XG4gICAgXG4gICAgLy8gQWxtYWNlbmFyIGVzdGlsb3Mgb3JpZ2luYWxlcyBwYXJhIHJlc3RhdXJhcmxvcyBhbCBkZXNhY3RpdmFyXG4gICAgY29uc3Qgb3JpZ2luYWxTdHlsZXMgPSB7XG4gICAgICAgIG92ZXJmbG93OiB0YWJFbGVtZW50LnN0eWxlLm92ZXJmbG93LFxuICAgICAgICB0ZXh0T3ZlcmZsb3c6IHRhYkVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93LFxuICAgICAgICB3aGl0ZVNwYWNlOiB0YWJFbGVtZW50LnN0eWxlLndoaXRlU3BhY2UsXG4gICAgICAgIG1heFdpZHRoOiB0YWJFbGVtZW50LnN0eWxlLm1heFdpZHRoLFxuICAgICAgICB0cmFuc2l0aW9uOiB0YWJFbGVtZW50LnN0eWxlLnRyYW5zaXRpb25cbiAgICB9O1xuICAgIFxuICAgIC8vIEVzdGFibGVjZXIgZXN0aWxvcyBiYXNlXG4gICAgdGFiRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG4gICAgdGFiRWxlbWVudC5zdHlsZS50ZXh0T3ZlcmZsb3cgPSBcImVsbGlwc2lzXCI7XG4gICAgdGFiRWxlbWVudC5zdHlsZS53aGl0ZVNwYWNlID0gXCJub3dyYXBcIjtcbiAgICB0YWJFbGVtZW50LnN0eWxlLm1heFdpZHRoID0gXCIxNTBweFwiOyAvLyBBanVzdGFibGUgc2VnXHUwMEZBbiBuZWNlc2lkYWRlc1xuICAgIHRhYkVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IFwibWF4LXdpZHRoIDAuM3MgZWFzZS1pbi1vdXRcIjtcbiAgICBcbiAgICAvLyBDcmVhciBoYW5kbGVyIHBhcmEgbW91c2VlbnRlclxuICAgIGNvbnN0IG1vdXNlRW50ZXJIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBmdWxsV2lkdGggPSB0YWJFbGVtZW50LnNjcm9sbFdpZHRoO1xuICAgICAgICB0YWJFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJhdXRvXCI7XG4gICAgICAgIHRhYkVsZW1lbnQuc3R5bGUudGV4dE92ZXJmbG93ID0gXCJjbGlwXCI7XG4gICAgICAgIHRhYkVsZW1lbnQuc3R5bGUubWF4V2lkdGggPSBNYXRoLm1pbihmdWxsV2lkdGgsIDMwMCkgKyBcInB4XCI7IC8vIExpbWl0YXIgZXhwYW5zaVx1MDBGM25cbiAgICB9O1xuICAgIFxuICAgIC8vIENyZWFyIGhhbmRsZXIgcGFyYSBtb3VzZWxlYXZlXG4gICAgY29uc3QgbW91c2VMZWF2ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICAgIHRhYkVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuICAgICAgICB0YWJFbGVtZW50LnN0eWxlLnRleHRPdmVyZmxvdyA9IFwiZWxsaXBzaXNcIjtcbiAgICAgICAgdGFiRWxlbWVudC5zdHlsZS5tYXhXaWR0aCA9IFwiMTUwcHhcIjtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRhYkVsZW1lbnQuc2Nyb2xsTGVmdCA9IDA7IH0sIDMwMCk7IC8vIFJldHJhc2FyIHBhcmEgYW5pbWFjaVx1MDBGM25cbiAgICB9O1xuICAgIFxuICAgIC8vIEFzaWduYXIgZXZlbnQgbGlzdGVuZXJzXG4gICAgdGFiRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCBtb3VzZUVudGVySGFuZGxlcik7XG4gICAgdGFiRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBtb3VzZUxlYXZlSGFuZGxlcik7XG4gICAgXG4gICAgLy8gTWFyY2FyIGVsZW1lbnRvIGNvbW8gY29uZmlndXJhZG9cbiAgICB0YWJFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGwtZW5hYmxlZCcsICd0cnVlJyk7XG4gICAgXG4gICAgLy8gQWxtYWNlbmFyIHJlZmVyZW5jaWFzIHBhcmEgbGltcGllemFcbiAgICBpZiAoIXRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzKSB0aGlzLnNjcm9sbEVuYWJsZWRFbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLnNjcm9sbEVuYWJsZWRFbGVtZW50cy5zZXQodGFiRWxlbWVudCwge1xuICAgICAgICBtb3VzZUVudGVySGFuZGxlcixcbiAgICAgICAgbW91c2VMZWF2ZUhhbmRsZXIsXG4gICAgICAgIG9yaWdpbmFsU3R5bGVzXG4gICAgfSk7XG59XG5cbi8vIE1cdTAwRTl0b2RvIHBhcmEgbGltcGlhciBlbCBzY3JvbGwgZGUgdW4gZWxlbWVudG9cbnByaXZhdGUgcmVtb3ZlSG9yaXpvbnRhbFNjcm9sbEZyb21UYWIodGFiRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICBpZiAoIXRhYkVsZW1lbnQgfHwgIXRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzKSByZXR1cm47XG4gICAgXG4gICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLnNjcm9sbEVuYWJsZWRFbGVtZW50cy5nZXQodGFiRWxlbWVudCk7XG4gICAgaWYgKCFoYW5kbGVycykgcmV0dXJuO1xuICAgIFxuICAgIC8vIEVsaW1pbmFyIGV2ZW50IGxpc3RlbmVyc1xuICAgIHRhYkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgaGFuZGxlcnMubW91c2VFbnRlckhhbmRsZXIpO1xuICAgIHRhYkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgaGFuZGxlcnMubW91c2VMZWF2ZUhhbmRsZXIpO1xuICAgIFxuICAgIC8vIFJlc3RhdXJhciBlc3RpbG9zIG9yaWdpbmFsZXNcbiAgICBPYmplY3QuYXNzaWduKHRhYkVsZW1lbnQuc3R5bGUsIGhhbmRsZXJzLm9yaWdpbmFsU3R5bGVzKTtcbiAgICBcbiAgICAvLyBMaW1waWFyIG1hcmNhXG4gICAgdGFiRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtc2Nyb2xsLWVuYWJsZWQnKTtcbiAgICBcbiAgICAvLyBFbGltaW5hciBkZSBsYSBjb2xlY2NpXHUwMEYzblxuICAgIHRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzLmRlbGV0ZSh0YWJFbGVtZW50KTtcbn1cblxuLy8gU29icmVzY3JpdHVyYSBkZWwgbVx1MDBFOXRvZG8gdXBkYXRlVGFiXG5hc3luYyB1cGRhdGVUYWIobGVhZjogV29ya3NwYWNlTGVhZikge1xuICAgIGlmICghKGxlYWYudmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykgfHwgIWxlYWYudmlldy5maWxlKSByZXR1cm47XG5cbiAgICBjb25zdCB7IGRpc3BsYXlUaXRsZSwgc291cmNlIH0gPSBhd2FpdCB0aGlzLmdldFByZWZlcnJlZFRpdGxlV2l0aFNvdXJjZShsZWFmLnZpZXcuZmlsZSk7XG4gICAgaWYgKGRpc3BsYXlUaXRsZSkge1xuICAgICAgICAvLyBEZXRlcm1pbmFyIGVsIGZvcm1hdG8gZGVsIHRcdTAwRUR0dWxvIHNlZ1x1MDBGQW4gbGEgbFx1MDBGM2dpY2EgZXhpc3RlbnRlXG4gICAgICAgIGxldCBmb3JtYXR0ZWRUaXRsZTtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gJ2FsaWFzZXMtc3BlY2lhbCcgfHwgc291cmNlID09PSAnYWxpYXNlcy10d28nKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRUaXRsZSA9IGRpc3BsYXlUaXRsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZFRpdGxlID0gYCR7bGVhZi52aWV3LmZpbGUuYmFzZW5hbWV9IC8gJHtkaXNwbGF5VGl0bGV9YDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRXN0YWJsZWNlciBlbCB0XHUwMEVEdHVsb1xuICAgICAgICBsZWFmLnZpZXcudGl0bGVFbC5pbm5lclRleHQgPSBmb3JtYXR0ZWRUaXRsZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbCkge1xuICAgICAgICAgICAgbGVhZi50YWJIZWFkZXJJbm5lclRpdGxlRWwuaW5uZXJUZXh0ID0gZm9ybWF0dGVkVGl0bGU7XG4gICAgICAgICAgICAvLyBBcGxpY2FyIGNvbXBvcnRhbWllbnRvIGRlIHNjcm9sbCBob3Jpem9udGFsXG4gICAgICAgICAgICB0aGlzLmFwcGx5SG9yaXpvbnRhbFNjcm9sbFRvVGFiKGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gTVx1MDBFOXRvZG8gcGFyYSBsaW1waWFyIHJlY3Vyc29zIGFsIGRlc2FjdGl2YXJcbmNsZWFudXBTY3JvbGxIYW5kbGVycygpIHtcbiAgICBpZiAoIXRoaXMuc2Nyb2xsRW5hYmxlZEVsZW1lbnRzKSByZXR1cm47XG4gICAgXG4gICAgdGhpcy5zY3JvbGxFbmFibGVkRWxlbWVudHMuZm9yRWFjaCgoaGFuZGxlcnMsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmVIb3Jpem9udGFsU2Nyb2xsRnJvbVRhYihlbGVtZW50KTtcbiAgICB9KTtcbiAgICBcbiAgICB0aGlzLnNjcm9sbEVuYWJsZWRFbGVtZW50cy5jbGVhcigpO1xufVxuXG4vLyBTb2JyZXNjcmliaXIgcmVzdG9yZURlZmF1bHRUaXRsZXMgcGFyYSBpbmNsdWlyIGxhIGxpbXBpZXphXG5yZXN0b3JlRGVmYXVsdFRpdGxlcygpIHtcbiAgICAvLyBMaW1waWFyIG1hbmVqYWRvcmVzIGRlIHNjcm9sbFxuICAgIHRoaXMuY2xlYW51cFNjcm9sbEhhbmRsZXJzKCk7XG4gICAgXG4gICAgLy8gUmVzdGF1cmFyIHRcdTAwRUR0dWxvcyBjb21vIGFudGVzXG4gICAgY29uc3QgbGVhdmVzID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XG4gICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3ICYmIGxlYWYudmlldy5maWxlKSB7XG4gICAgICAgICAgICBsZWFmLnZpZXcudGl0bGVFbC5pbm5lclRleHQgPSBsZWFmLnZpZXcuZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgICAgIGlmIChsZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbCkge1xuICAgICAgICAgICAgICAgIGxlYWYudGFiSGVhZGVySW5uZXJUaXRsZUVsLmlubmVyVGV4dCA9IGxlYWYudmlldy5maWxlLmJhc2VuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuICAgIFxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS92aWV3cy9DdXN0b21NYXJrZG93blZpZXcudHNcbmltcG9ydCB7IE1hcmtkb3duVmlldywgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIEN1c3RvbU1hcmtkb3duVmlldyBleHRlbmRzIE1hcmtkb3duVmlldyB7XG4gICAgcHJpdmF0ZSBjdXN0b21UaXRsZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21UaXRsZSB8fCBzdXBlci5nZXREaXNwbGF5VGV4dCgpO1xuICAgIH1cblxuICAgIHNldEN1c3RvbVRpdGxlKHRpdGxlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tVGl0bGUgPSB0aXRsZTtcbiAgICAgICAgdGhpcy5sZWFmLnRhYkhlYWRlcklubmVyVGl0bGVFbC50ZXh0Q29udGVudCA9IHRpdGxlIHx8IHRoaXMuZmlsZT8uYmFzZW5hbWUgfHwgJyc7XG4gICAgfVxufSIsICIvLyBzcmMvbW9kdWxlcy9tb2R1bG9UYWJUaXRsZS91dGlscy9sb2dnZXIudHNcbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICAgIHByaXZhdGUgc3RhdGljIHJlYWRvbmx5IFBSRUZJWCA9ICdcdUQ4M0NcdURGRjdcdUZFMEYgW1RhYlRpdGxlXSc7XG4gICAgXG4gICAgc3RhdGljIGRlYnVnKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt0aGlzLlBSRUZJWH0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhgJHt0aGlzLlBSRUZJWH0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgZXJyb3IobWVzc2FnZTogc3RyaW5nLCBlcnJvcj86IGFueSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGAke3RoaXMuUFJFRklYfSAke21lc3NhZ2V9YCwgZXJyb3IgfHwgJycpO1xuICAgIH1cbiAgICBcbiAgICBzdGF0aWMgd2FybihtZXNzYWdlOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgJHt0aGlzLlBSRUZJWH0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvbW9kdWxvVGFiVGl0bGUvZGVmYXVsdHMvZGVmYXVsdFNldHRpbmdzLnRzXG5pbXBvcnQgeyBUYWJUaXRsZVNldHRpbmdzIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9UYWJUaXRsZVNldHRpbmdzJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfVEFCX1NFVFRJTkdTOiBUYWJUaXRsZVNldHRpbmdzID0ge1xuICAgIHRpdGxlRGlzcGxheU1vZGU6ICdmaWxlbmFtZSdcbn07IiwgIi8vIHNyYy9tb2R1bGVzL3Rhc2tNYW5hZ2VyL2luZGV4LnRzXG5cbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHJlZ2lzdGVyVGFza01hbmFnZXJDb21tYW5kcywgZGVhY3RpdmF0ZVRhc2tNYW5hZ2VyQ29tbWFuZHMgfSBmcm9tICcuL2NvbW1hbmRzJztcblxuZXhwb3J0IGNsYXNzIE1vZHVsb1Rhc2tNYW5hZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHBsdWdpbjogUGx1Z2luKSB7fVxuXG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIHJlZ2lzdGVyVGFza01hbmFnZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVRhc2tNYW5hZ2VyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvdGFza01hbmFnZXIvY29tbWFuZHMudHNcblxuaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UsIE1vZGFsLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xuXG5jbGFzcyBUYXNrRGF5c01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZGlhczogbnVtYmVyID0gNztcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgcGx1Z2luSW5zdGFuY2U6IE15UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbkluc3RhbmNlLmFwcCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTW9zdHJhciB0YXJlYXMgcHJcdTAwRjN4aW1hcycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05cdTAwRkFtZXJvIGRlIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW9zdHJhciB0YXJlYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyBYIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoJzcnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhcyA9IHBhcnNlSW50KHZhbHVlKSB8fCA3O1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTW9zdHJhciB0YXJlYXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luSW5zdGFuY2UudGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNQcm94aW1hcyh0aGlzLmRpYXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIEFcdTAwRjFhZGlyIG51ZXZhIGNsYXNlIG1vZGFsIHBhcmEgY29uZmlndXJhciBkXHUwMEVEYXMgZnV0dXJvc1xuY2xhc3MgRnV0dXJlVGFza3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGRpYXM6IG51bWJlciA9IDc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4sXG4gICAgICAgIHByaXZhdGUgZGVmYXVsdERheXM6IG51bWJlciA9IDdcbiAgICApIHtcbiAgICAgICAgc3VwZXIocGx1Z2luSW5zdGFuY2UuYXBwKTtcbiAgICAgICAgdGhpcy5kaWFzID0gZGVmYXVsdERheXM7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTW9zdHJhciB0YXJlYXMgZnV0dXJhcycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ05cdTAwRkFtZXJvIGRlIGRcdTAwRURhcyBoYWNpYSBhZGVsYW50ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW9zdHJhciB0YXJlYXMgcHJvZ3JhbWFkYXMgcGFyYSBsb3MgcHJcdTAwRjN4aW1vcyBYIGRcdTAwRURhcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5kZWZhdWx0RGF5cy50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhcyA9IHBhcnNlSW50KHZhbHVlKSB8fCA3O1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiBidG5cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTW9zdHJhciB0YXJlYXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW5JbnN0YW5jZS50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luSW5zdGFuY2UudGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNGdXR1cmFzKHRoaXMuZGlhcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgIH1cbn1cblxuY2xhc3MgU2NoZWR1bGVkVGFza0RheXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGRpYXM6IG51bWJlciA9IDc7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4sIFxuICAgICAgICBwcml2YXRlIGRlZmF1bHREYXlzOiBudW1iZXIgPSA3XG4gICAgKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbkluc3RhbmNlLmFwcCk7XG4gICAgICAgIHRoaXMuZGlhcyA9IGRlZmF1bHREYXlzO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01vc3RyYXIgdGFyZWFzIHByb2dyYW1hZGFzIHByXHUwMEYzeGltYXMnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdOXHUwMEZBbWVybyBkZSBkXHUwMEVEYXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ01vc3RyYXIgdGFyZWFzIHByb2dyYW1hZGFzIHBhcmEgbG9zIHByXHUwMEYzeGltb3MgWCBkXHUwMEVEYXMnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuZGVmYXVsdERheXMudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYXMgPSBwYXJzZUludCh2YWx1ZSkgfHwgNztcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidG4gPT4gYnRuXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ01vc3RyYXIgdGFyZWFzJylcbiAgICAgICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luSW5zdGFuY2UudGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbkluc3RhbmNlLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzU2NoZWR1bGVkUHJveGltYXModGhpcy5kaWFzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJUYXNrTWFuYWdlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgY29uc3QgbWFuYWdlbWVudFBsdWdpbiA9IHBsdWdpbiBhcyBNeVBsdWdpbjtcbiAgICBjb25zdCBjb21tYW5kSWRzOiBzdHJpbmdbXSA9IFtdO1xuXG5cbiAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgdmVuY2lkYXNcbiAgICBjb25zdCB0YXJlYXNWZW5jaWRhc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXZlbmNpZGFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgVmVuY2lkYXNcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNWZW5jaWRhcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNWZW5jaWRhc0NvbW1hbmQuaWQpO1xuXG4gICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIHByXHUwMEYzeGltYXNcbiAgICBjb25zdCB0YXJlYXNQcm94aW1hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXByb3hpbWFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgUHJcdTAwRjN4aW1hc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1Byb3hpbWFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1Byb3hpbWFzQ29tbWFuZC5pZCk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgbW9zdHJhciB0YXJlYXMgcHJcdTAwRjN4aW1hcyBjb24gZFx1MDBFRGFzIHBlcnNvbmFsaXphZG9zXG4gICAgY29uc3QgdGFyZWFzUHJveGltYXNDdXN0b21Db21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1wcm94aW1hcy1jdXN0b21cIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBQclx1MDBGM3hpbWFzIChFc3BlY2lmaWNhciBkXHUwMEVEYXMpXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBUYXNrRGF5c01vZGFsKG1hbmFnZW1lbnRQbHVnaW4pO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzUHJveGltYXNDdXN0b21Db21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBkZSBob3lcbiAgICBjb25zdCB0YXJlYXNIb3lDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1ob3lcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBwYXJhIEhveVwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0hveSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNIb3lDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBjb24gaW5pY2lvIHZlbmNpZG9cbiAgICBjb25zdCB0YXJlYXNTdGFydFZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10YXJlYXMtc3RhcnQtdmVuY2lkYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBQZW5kaWVudGVzIGRlIEluaWNpYXJcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNTdGFydFZlbmNpZGFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1N0YXJ0VmVuY2lkYXNDb21tYW5kLmlkKTtcblxuICAgIC8vIENvbWFuZG8gcGFyYSBtb3N0cmFyIHRhcmVhcyBwb3IgaW5pY2lhclxuICAgIGNvbnN0IHRhcmVhc1N0YXJ0UHJveGltYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1zdGFydC1wcm94aW1hc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIHBvciBJbmljaWFyIChWZW5jaWRhcyB5IFByXHUwMEYzeGltYXMpXCIsXG4gICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzU3RhcnRQcm94aW1hcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNTdGFydFByb3hpbWFzQ29tbWFuZC5pZCk7XG5cbiAgICAgLy8gQVx1MDBGMWFkaXIgbnVldm8gY29tYW5kbyBwYXJhIHRhcmVhcyBmdXR1cmFzXG4gICAgIGNvbnN0IHRhcmVhc0Z1dHVyYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1mdXR1cmFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgRnV0dXJhcyBQcm9ncmFtYWRhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgRnV0dXJlVGFza3NNb2RhbChtYW5hZ2VtZW50UGx1Z2luKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc0Z1dHVyYXNDb21tYW5kLmlkKTtcblxuICAgICAgICAvLyBBXHUwMEYxYWRpciBudWV2byBjb21hbmRvIHBhcmEgdGFyZWFzIGVuIGVqZWN1Y2lcdTAwRjNuXG4gICAgICAgIGNvbnN0IHRhcmVhc0VuRWplY3VjaW9uQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWVuLWVqZWN1Y2lvblwiLFxuICAgICAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBlbiBFamVjdWNpXHUwMEYzblwiLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc0VuRWplY3VjaW9uKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc0VuRWplY3VjaW9uQ29tbWFuZC5pZCk7XG5cbiAgICAgICAgLy8gQ29tYW5kbyBwYXJhIHRhcmVhcyBzY2hlZHVsZWQgdmVuY2lkYXNcbiAgICBjb25zdCB0YXJlYXNTY2hlZHVsZWRWZW5jaWRhc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXNjaGVkdWxlZC12ZW5jaWRhc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIFNjaGVkdWxlZCBWZW5jaWRhc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgbWFuYWdlbWVudFBsdWdpbi50YXJlYXNBUEkubW9zdHJhclRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1NjaGVkdWxlZFZlbmNpZGFzQ29tbWFuZC5pZCk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgdGFyZWFzIHNjaGVkdWxlZCBwclx1MDBGM3hpbWFzXG4gICAgY29uc3QgdGFyZWFzU2NoZWR1bGVkUHJveGltYXNDb21tYW5kID0gcGx1Z2luLmFkZENvbW1hbmQoe1xuICAgICAgICBpZDogXCJtb3N0cmFyLXRhcmVhcy1zY2hlZHVsZWQtcHJveGltYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBTY2hlZHVsZWQgUHJcdTAwRjN4aW1hc1wiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgU2NoZWR1bGVkVGFza0RheXNNb2RhbChtYW5hZ2VtZW50UGx1Z2luKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRhcmVhc1NjaGVkdWxlZFByb3hpbWFzQ29tbWFuZC5pZCk7XG5cbiAgICAgIC8vIENvbWFuZG8gcGFyYSB0b2RhcyBsYXMgdGFyZWFzIHZlbmNpZGFzXG4gICAgICBjb25zdCB0b2Rhc1RhcmVhc1ZlbmNpZGFzQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6IFwibW9zdHJhci10b2Rhcy10YXJlYXMtdmVuY2lkYXNcIixcbiAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRvZGFzIGxhcyBUYXJlYXMgVmVuY2lkYXMgKER1ZSwgU2NoZWR1bGVkLCBTdGFydClcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUb2Rhc1RhcmVhc1ZlbmNpZGFzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFbCBtXHUwMEYzZHVsbyBkZSB0YXJlYXMgbm8gZXN0XHUwMEUxIGRpc3BvbmlibGUuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgY29tbWFuZElkcy5wdXNoKHRvZGFzVGFyZWFzVmVuY2lkYXNDb21tYW5kLmlkKTtcblxuICAgICAgLy8gQ29tYW5kbyBwYXJhIG1vc3RyYXIgdGFyZWFzIGNvbiBkZXBlbmRlbmNpYXNcbiAgICAgIGNvbnN0IHRhcmVhc0RlcGVuZGllbnRlc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWRlcGVuZGllbnRlc1wiLFxuICAgICAgICBuYW1lOiBcIk1vc3RyYXIgVGFyZWFzIGNvbiBEZXBlbmRlbmNpYXNcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNEZXBlbmRpZW50ZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkVsIG1cdTAwRjNkdWxvIGRlIHRhcmVhcyBubyBlc3RcdTAwRTEgZGlzcG9uaWJsZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzRGVwZW5kaWVudGVzQ29tbWFuZC5pZCk7XG5cbiAgICBjb25zdCB0YXJlYXNQZXJzb25hc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLXBlcnNvbmFzXCIsXG4gICAgICAgIG5hbWU6IFwiTW9zdHJhciBUYXJlYXMgcG9yIFBlcnNvbmFcIixcbiAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmIChtYW5hZ2VtZW50UGx1Z2luLnRhcmVhc0FQSSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNQZXJzb25hcygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGNvbW1hbmRJZHMucHVzaCh0YXJlYXNQZXJzb25hc0NvbW1hbmQuaWQpO1xuXG5cbiAgICAgICAgLy8gQVx1MDBGMWFkaXIgbnVldm8gY29tYW5kbyBwYXJhIHRhcmVhcyBwb3IgY29udGV4dG9cbiAgICAgICAgY29uc3QgdGFyZWFzQ29udGV4dG9zQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiBcIm1vc3RyYXItdGFyZWFzLWNvbnRleHRvc1wiLFxuICAgICAgICAgICAgbmFtZTogXCJNb3N0cmFyIFRhcmVhcyBwb3IgQ29udGV4dG9cIixcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1hbmFnZW1lbnRQbHVnaW4udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNDb250ZXh0b3MoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRWwgbVx1MDBGM2R1bG8gZGUgdGFyZWFzIG5vIGVzdFx1MDBFMSBkaXNwb25pYmxlLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb21tYW5kSWRzLnB1c2godGFyZWFzQ29udGV4dG9zQ29tbWFuZC5pZCk7XG5cbiAgICAvLyBHdWFyZGFyIGxvcyBJRHMgZGUgbG9zIGNvbWFuZG9zIGVuIGVsIHBsdWdpblxuICAgIChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkVGFza01hbmFnZXJDb21tYW5kSWRzID0gY29tbWFuZElkcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVUYXNrTWFuYWdlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZElkcyA9IChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkVGFza01hbmFnZXJDb21tYW5kSWRzO1xuICAgIGlmICghY29tbWFuZElkcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbW1hbmRJZHMuZm9yRWFjaChjb21tYW5kSWQgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBpZiAoY29tbWFuZCkge1xuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1waWFyIGVsIGFycmF5IGRlIGNvbWFuZG9zIHJlZ2lzdHJhZG9zXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWRUYXNrTWFuYWdlckNvbW1hbmRJZHMgPSBbXTtcbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL2luZGV4LnRzXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEYXRhdmlld1F1ZXJ5TWFuYWdlciB9IGZyb20gJy4vRGF0YXZpZXdRdWVyeU1hbmFnZXInO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcywgZGVhY3RpdmF0ZUNvbW1hbmRzIH0gZnJvbSAnLi9jb21tYW5kcyc7XG5pbXBvcnQgeyBRdWVyeVJlbmRlcmVyIH0gZnJvbSAnLi9RdWVyeVJlbmRlcmVyJztcblxuZXhwb3J0IGNsYXNzIE1vZHVsb0RhdGF2aWV3UXVlcmllcyB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcbiAgICBwcml2YXRlIHF1ZXJ5TWFuYWdlcjogRGF0YXZpZXdRdWVyeU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBxdWVyeVJlbmRlcmVyOiBRdWVyeVJlbmRlcmVyO1xuICAgIHByaXZhdGUgX2lzQWN0aXZlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBJbmljaWFsaXphbmRvLi4uJyk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnF1ZXJ5TWFuYWdlciA9IG5ldyBEYXRhdmlld1F1ZXJ5TWFuYWdlcihwbHVnaW4pO1xuICAgICAgICB0aGlzLnF1ZXJ5UmVuZGVyZXIgPSBuZXcgUXVlcnlSZW5kZXJlcigpO1xuICAgIH1cblxuICAgIGFjdGl2YXRlKCk6IHZvaWQge1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBJbmljaWFuZG8gYWN0aXZhY2lcdTAwRjNuLi4uJyk7XG4gICAgICAgIGlmICh0aGlzLl9pc0FjdGl2ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogWWEgZXN0XHUwMEUxIGFjdGl2bycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlZ2lzdGVyQ29tbWFuZHModGhpcy5wbHVnaW4pO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckRhdGF2aWV3RXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgdGhpcy5faXNBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogQWN0aXZhY2lcdTAwRjNuIGV4aXRvc2EnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01vZHVsb0RhdGF2aWV3UXVlcmllczogRXJyb3IgZW4gYWN0aXZhY2lcdTAwRjNuOicsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRlYWN0aXZhdGUoKTogdm9pZCB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEluaWNpYW5kbyBkZXNhY3RpdmFjaVx1MDBGM24uLi4nKTtcbiAgICAgICAgaWYgKCF0aGlzLl9pc0FjdGl2ZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ01vZHVsb0RhdGF2aWV3UXVlcmllczogWWEgZXN0XHUwMEUxIGluYWN0aXZvJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGVhY3RpdmF0ZUNvbW1hbmRzKHRoaXMucGx1Z2luKTtcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckRhdGF2aWV3RXh0ZW5zaW9ucygpO1xuICAgICAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IERlc2FjdGl2YWNpXHUwMEYzbiBleGl0b3NhJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEVycm9yIGVuIGRlc2FjdGl2YWNpXHUwMEYzbjonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faXNBY3RpdmU7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyUXVlcnkocXVlcnlUeXBlOiBzdHJpbmcsIHBhcmFtczoge1xuICAgICAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgICAgICBkdjogYW55LFxuICAgICAgICBvcHRpb25zPzogYW55XG4gICAgfSkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VsIG1cdTAwRjNkdWxvIG5vIGVzdFx1MDBFMSBhY3Rpdm8nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAocXVlcnlUeXBlKSB7XG4gICAgICAgICAgICBjYXNlICd0YXNrQnV0dG9ucyc6XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5xdWVyeVJlbmRlcmVyLnJlbmRlclRhc2tCdXR0b25zKHBhcmFtcy5jb250YWluZXIsIHBhcmFtcy5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaXBvIGRlIGNvbnN1bHRhIG5vIHNvcG9ydGFkbzogJHtxdWVyeVR5cGV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCkge1xuICAgICAgICAvLyBDcmVhciBvYmpldG8gZGUgZnVuY2lvbmVzIGFudGVzIGRlIHJlZ2lzdHJhcmxhc1xuICAgICAgICBjb25zdCBib3VuZEZ1bmN0aW9ucyA9IHtcbiAgICAgICAgICAgIHJlbmRlclRhc2tCdXR0b25zOiAoZHY6IGFueSwgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgb3B0aW9uczogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnlSZW5kZXJlci5yZW5kZXJUYXNrQnV0dG9ucyhjb250YWluZXIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbmRlclByb2plY3RIaWVyYXJjaHk6IChkdjogYW55LCBjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeVJlbmRlcmVyLnJlbmRlclByb2plY3RIaWVyYXJjaHkoY29udGFpbmVyLCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBSZWdpc3RyYXIgbGFzIGZ1bmNpb25lcyBlbiBlbCBlc3BhY2lvIGdsb2JhbFxuICAgICAgICAod2luZG93IGFzIGFueSkuY3VzdG9tUXVlcmllcyA9IGJvdW5kRnVuY3Rpb25zO1xuICAgICAgICBjb25zb2xlLmxvZygnTW9kdWxvRGF0YXZpZXdRdWVyaWVzOiBFeHRlbnNpb25zIHJlZ2lzdHJhZGFzJyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1bnJlZ2lzdGVyRGF0YXZpZXdFeHRlbnNpb25zKCkge1xuICAgICAgICBkZWxldGUgKHdpbmRvdyBhcyBhbnkpLmN1c3RvbVF1ZXJpZXM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNb2R1bG9EYXRhdmlld1F1ZXJpZXM6IEV4dGVuc2lvbnMgZWxpbWluYWRhcycpO1xuICAgIH1cbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL0RhdGF2aWV3UXVlcnlNYW5hZ2VyLnRzXG5pbXBvcnQgeyBQbHVnaW4sIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIERhdGF2aWV3UXVlcnlNYW5hZ2VyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IFBsdWdpbikge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICAvLyBDYWNoZSBwYXJhIGFsbWFjZW5hciByZXN1bHRhZG9zIGRlIGNvbnN1bHRhcyBmcmVjdWVudGVzXG4gICAgcHJpdmF0ZSBxdWVyeUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHtcbiAgICAgICAgZGF0YTogYW55O1xuICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICAgICAgdHRsOiBudW1iZXI7XG4gICAgfT4oKTtcblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgZWplY3V0YXIgY29uc3VsdGFzIGNvbiBjYWNoXHUwMEU5XG4gICAgYXN5bmMgZXhlY3V0ZVF1ZXJ5KHF1ZXJ5S2V5OiBzdHJpbmcsIHF1ZXJ5Rm46ICgpID0+IFByb21pc2U8YW55PiwgdHRsID0gNjAwMDApIHtcbiAgICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy5xdWVyeUNhY2hlLmdldChxdWVyeUtleSk7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAgICAgaWYgKGNhY2hlZCAmJiBub3cgLSBjYWNoZWQudGltZXN0YW1wIDwgY2FjaGVkLnR0bCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZC5kYXRhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnlGbigpO1xuICAgICAgICB0aGlzLnF1ZXJ5Q2FjaGUuc2V0KHF1ZXJ5S2V5LCB7XG4gICAgICAgICAgICBkYXRhOiByZXN1bHQsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5vdyxcbiAgICAgICAgICAgIHR0bFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIE1cdTAwRTl0b2RvIHBhcmEgbGltcGlhciBjYWNoXHUwMEU5XG4gICAgY2xlYXJDYWNoZShxdWVyeUtleT86IHN0cmluZykge1xuICAgICAgICBpZiAocXVlcnlLZXkpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlDYWNoZS5kZWxldGUocXVlcnlLZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWVyeUNhY2hlLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIHNyYy9tb2R1bGVzL2RhdGF2aWV3UXVlcmllcy9jb21tYW5kcy50c1xuaW1wb3J0IHsgUGx1Z2luLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgLy8gQ29tYW5kbyBwYXJhIGxpbXBpYXIgZWwgY2FjaFx1MDBFOSBkZSBjb25zdWx0YXNcbiAgICBjb25zdCBjbGVhckNhY2hlQ29tbWFuZCA9IHBsdWdpbi5hZGRDb21tYW5kKHtcbiAgICAgICAgaWQ6ICdjbGVhci1kYXRhdmlldy1xdWVyaWVzLWNhY2hlJyxcbiAgICAgICAgbmFtZTogJ0xpbXBpYXIgY2FjaFx1MDBFOSBkZSBjb25zdWx0YXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJbnN0YW5jZSA9IChwbHVnaW4gYXMgYW55KS5tb2R1bG9EYXRhdmlld1F1ZXJpZXM7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZUluc3RhbmNlPy5xdWVyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlSW5zdGFuY2UucXVlcnlNYW5hZ2VyLmNsZWFyQ2FjaGUoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ2FjaFx1MDBFOSBkZSBjb25zdWx0YXMgbGltcGlhZG8nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGxpbXBpYXIgY2FjaFx1MDBFOTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgbGltcGlhciBjYWNoXHUwMEU5IGRlIGNvbnN1bHRhcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDb21hbmRvIHBhcmEgcmVjYXJnYXIgdG9kYXMgbGFzIGNvbnN1bHRhcyBhY3RpdmFzXG4gICAgY29uc3QgcmVsb2FkUXVlcmllc0NvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiAncmVsb2FkLWRhdGF2aWV3LXF1ZXJpZXMnLFxuICAgICAgICBuYW1lOiAnUmVjYXJnYXIgY29uc3VsdGFzIGFjdGl2YXMnLFxuICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtb2R1bGVJbnN0YW5jZSA9IChwbHVnaW4gYXMgYW55KS5tb2R1bG9EYXRhdmlld1F1ZXJpZXM7XG4gICAgICAgICAgICAgICAgaWYgKG1vZHVsZUluc3RhbmNlPy5xdWVyeU1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlSW5zdGFuY2UuY2xlYXJDYWNoZSgpO1xuICAgICAgICAgICAgICAgICAgICBhcHAud29ya3NwYWNlLnRyaWdnZXIoJ2RhdGF2aWV3OnJlZnJlc2gtdmlld3MnKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29uc3VsdGFzIHJlY2FyZ2FkYXMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHJlY2FyZ2FyIGNvbnN1bHRhczonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgYWwgcmVjYXJnYXIgY29uc3VsdGFzJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlZ2lzdHJhciBsb3MgSURzIGRlIGxvcyBjb21hbmRvcyBwYXJhIHBvZGVyIGRlc2FjdGl2YXJsb3MgZGVzcHVcdTAwRTlzXG4gICAgKHBsdWdpbiBhcyBhbnkpLnJlZ2lzdGVyZWREYXRhdmlld1F1ZXJ5Q29tbWFuZElkcyA9IFtcbiAgICAgICAgY2xlYXJDYWNoZUNvbW1hbmQuaWQsXG4gICAgICAgIHJlbG9hZFF1ZXJpZXNDb21tYW5kLmlkXG4gICAgXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYWN0aXZhdGVDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmRJZHMgPSAocGx1Z2luIGFzIGFueSkucmVnaXN0ZXJlZERhdGF2aWV3UXVlcnlDb21tYW5kSWRzO1xuICAgIGlmICghY29tbWFuZElkcykgcmV0dXJuO1xuICAgIFxuICAgIGNvbW1hbmRJZHMuZm9yRWFjaCgoY29tbWFuZElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHBsdWdpbi5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIGNvbW1hbmQuY2FsbGJhY2sgPSAoKSA9PiBuZXcgTm90aWNlKFwiRXN0ZSBjb21hbmRvIGhhIHNpZG8gZGVzYWN0aXZhZG8uXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gTGltcGlhciBlbCBhcnJheSBkZSBjb21hbmRvcyByZWdpc3RyYWRvc1xuICAgIChwbHVnaW4gYXMgYW55KS5yZWdpc3RlcmVkRGF0YXZpZXdRdWVyeUNvbW1hbmRJZHMgPSBbXTtcbn0iLCAiLy8gc3JjL21vZHVsZXMvZGF0YXZpZXdRdWVyaWVzL1F1ZXJ5UmVuZGVyZXIudHNcbmV4cG9ydCBjbGFzcyBRdWVyeVJlbmRlcmVyIHtcbiAgICBhc3luYyByZW5kZXJUYXNrQnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBhbnkgPSB7fSkge1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ3Rhc2stYnV0dG9ucy1jb250YWluZXInLFxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ2Rpc3BsYXk6IGdyaWQ7IGdyaWQtZ2FwOiA4cHg7IHBhZGRpbmc6IDE2cHg7IGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTsgYm9yZGVyLXJhZGl1czogOHB4OycgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAob3B0aW9ucy5zaG93VGl0bGUgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2g0Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdUQ4M0RcdURDQ0IgR2VzdGlcdTAwRjNuIGRlIFRhcmVhcycsXG4gICAgICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbjogMCAwIDEycHggMDsnIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IFtcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICd0b2RheScsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUYXJlYXMgZGUgSG95JywgXG4gICAgICAgICAgICAgICAgaWNvbjogJ1x1RDgzRFx1RENDNScsIFxuICAgICAgICAgICAgICAgIGNvbG9yOiAnIzRDQUY1MCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAoKSA9PiBhcHAucGx1Z2lucy5wbHVnaW5zWydvYnNpZGlhbi1wZXJzb25hbC1tYW5hZ2VtZW50J10udGFyZWFzQVBJLm1vc3RyYXJUYXJlYXNIb3koKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICdvdmVyZHVlJywgXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RhcmVhcyBWZW5jaWRhcycsIFxuICAgICAgICAgICAgICAgIGljb246ICdcdTI2QTBcdUZFMEYnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyNmNDQzMzYnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzVmVuY2lkYXMoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICd1cGNvbWluZycsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUYXJlYXMgUHJcdTAwRjN4aW1hcycsIFxuICAgICAgICAgICAgICAgIGljb246ICdcdUQ4M0NcdURGQUYnLCBcbiAgICAgICAgICAgICAgICBjb2xvcjogJyMyMTk2RjMnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gYXBwLnBsdWdpbnMucGx1Z2luc1snb2JzaWRpYW4tcGVyc29uYWwtbWFuYWdlbWVudCddLnRhcmVhc0FQSS5tb3N0cmFyVGFyZWFzUHJveGltYXMoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgaWQ6ICdzdGFydCcsIFxuICAgICAgICAgICAgICAgIHRleHQ6ICdUb2RhcyBsYXMgVmVuY2lkYXMnLCBcbiAgICAgICAgICAgICAgICBpY29uOiAnXHVEODNDXHVERjEzJywgXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRkY5ODAwJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IGFwcC5wbHVnaW5zLnBsdWdpbnNbJ29ic2lkaWFuLXBlcnNvbmFsLW1hbmFnZW1lbnQnXS50YXJlYXNBUEkubW9zdHJhclRvZGFzVGFyZWFzVmVuY2lkYXMoKVxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkdyaWQgPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGF0dHI6IHsgc3R5bGU6ICdkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdChhdXRvLWZpdCwgbWlubWF4KDIwMHB4LCAxZnIpKTsgZ2FwOiA4cHg7JyB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gYnV0dG9uR3JpZC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtidG4uY29sb3J9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuMnMgZWFzZTtcbiAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBidXR0b24uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGJ0bi5pY29uIH0pO1xuICAgICAgICAgICAgYnV0dG9uLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBidG4udGV4dCB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRXZlbnRvcyBkZSBob3ZlclxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDEuMSknO1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWSgtMXB4KSc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmZpbHRlciA9ICdicmlnaHRuZXNzKDEpJztcbiAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZVkoMCknO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEV2ZW50byBkZSBjbGljayBjb24gZmVlZGJhY2sgdmlzdWFsXG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWN0dWFsaXphbmRvIHZpc3RhLi4uJyk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGJ0bi5hY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBlbiBhY2NpXHUwMEYzbiAke2J0bi5pZH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZ3JlZ2FyIHRpbWVzdGFtcCBzaSBlc3RcdTAwRTEgaGFiaWxpdGFkb1xuICAgICAgICBpZiAob3B0aW9ucy5zaG93VGltZXN0YW1wKSB7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHUwMERBbHRpbWEgYWN0dWFsaXphY2lcdTAwRjNuOiAke25ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCl9YCxcbiAgICAgICAgICAgICAgICBhdHRyOiB7IFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogJ21hcmdpbi10b3A6IDhweDsgdGV4dC1hbGlnbjogcmlnaHQ7IGZvbnQtc2l6ZTogMC44ZW07IGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTsnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZW5kZXJQcm9qZWN0SGllcmFyY2h5KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIG9wdGlvbnM6IGFueSA9IHt9KSB7XG4gICAgICAgIC8vIEltcGxlbWVudGFyIGN1YW5kbyBzZWEgbmVjZXNhcmlvXG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL2luZGV4LnRzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjZcbiAqIEF1dGhvcjogTW9kdWxlIENyZWF0b3JcbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4gfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IHJlZ2lzdGVyQ29tbWFuZHMsIGRlYWN0aXZhdGVDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5cbmV4cG9ydCBjbGFzcyBUYXNrTmF2aWdhdG9yTW9kdWxlIHtcbiAgICBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YSBlbCBtXHUwMEYzZHVsbyByZWdpc3RyYW5kbyBsb3MgY29tYW5kb3NcbiAgICAgKi9cbiAgICBhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmVnaXN0ZXJDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzYWN0aXZhIGVsIG1cdTAwRjNkdWxvLCBhc2VndXJcdTAwRTFuZG9zZSBkZSBsaW1waWFyIHRvZG9zIGxvcyBjb21hbmRvcyByZWdpc3RyYWRvc1xuICAgICAqL1xuICAgIGRlYWN0aXZhdGUoKSB7XG4gICAgICAgIGRlYWN0aXZhdGVDb21tYW5kcyh0aGlzLnBsdWdpbik7XG4gICAgfVxufSIsICIvKlxuICogRmlsZW5hbWU6IC9zcmMvbW9kdWxlcy90YXNrTmF2aWdhdG9yL2NvbW1hbmRzLnRzXG4gKiBDcmVhdGVkIERhdGU6IDIwMjUtMDItMjZcbiAqIEF1dGhvcjogTW9kdWxlIENyZWF0b3JcbiAqIC0tLS0tXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjVcbiAqL1xuXG5pbXBvcnQgeyBQbHVnaW4sIE5vdGljZSwgRWRpdG9yLCBNYXJrZG93blZpZXcgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRhc2tOYXZpZ2F0b3IgfSBmcm9tIFwiLi90YXNrTmF2aWdhdG9yXCI7XG5cbi8qKlxuICogUmVnaXN0cmEgbG9zIGNvbWFuZG9zIHJlbGFjaW9uYWRvcyBjb24gbGEgbmF2ZWdhY2lcdTAwRjNuIGRlIHRhcmVhc1xuICogQHBhcmFtIHBsdWdpbiBJbnN0YW5jaWEgZGVsIHBsdWdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJDb21tYW5kcyhwbHVnaW46IFBsdWdpbik6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tOYXZpZ2F0b3IgPSBuZXcgVGFza05hdmlnYXRvcihwbHVnaW4pO1xuICAgIFxuICAgIC8vIENvbWFuZG8gcHJpbmNpcGFsIHBhcmEgbmF2ZWdhciBhIHRhcmVhc1xuICAgIGNvbnN0IG5hdmlnYXRvckNvbW1hbmQgPSBwbHVnaW4uYWRkQ29tbWFuZCh7XG4gICAgICAgIGlkOiBcIm5hdmlnYXRlLXRvLXRhc2tzXCIsXG4gICAgICAgIG5hbWU6IFwiTmF2ZWdhciBhIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblwiLFxuICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0YXNrTmF2aWdhdG9yLm5hdmlnYXRlVG9UYXNrKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhbCBuYXZlZ2FyIGEgbGEgdGFyZWE6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gc2UgcHVkbyBuYXZlZ2FyIGEgbGEgdGFyZWEgc2VsZWNjaW9uYWRhLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQWxtYWNlbmFyIGVsIElEIGRlbCBjb21hbmRvIGVuIGVsIHBsdWdpbiBwYXJhIHBvZGVyIGRlc2FjdGl2YXJsbyBkZXNwdVx1MDBFOXNcbiAgICBpZiAoIXBsdWdpbi5yZWdpc3RlcmVkVGFza05hdmlnYXRvcklEcykge1xuICAgICAgICBwbHVnaW4ucmVnaXN0ZXJlZFRhc2tOYXZpZ2F0b3JJRHMgPSBbXTtcbiAgICB9XG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRUYXNrTmF2aWdhdG9ySURzLnB1c2gobmF2aWdhdG9yQ29tbWFuZC5pZCk7XG59XG5cbi8qKlxuICogRGVzYWN0aXZhIGxvcyBjb21hbmRvcyByZWdpc3RyYWRvc1xuICogQHBhcmFtIHBsdWdpbiBJbnN0YW5jaWEgZGVsIHBsdWdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVhY3RpdmF0ZUNvbW1hbmRzKHBsdWdpbjogUGx1Z2luKTogdm9pZCB7XG4gICAgaWYgKCFwbHVnaW4ucmVnaXN0ZXJlZFRhc2tOYXZpZ2F0b3JJRHMpIHJldHVybjtcbiAgICBcbiAgICBwbHVnaW4ucmVnaXN0ZXJlZFRhc2tOYXZpZ2F0b3JJRHMuZm9yRWFjaChjb21tYW5kSWQgPT4ge1xuICAgICAgICBjb25zdCBjb21tYW5kID0gcGx1Z2luLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGNvbW1hbmQpIHtcbiAgICAgICAgICAgIC8vIFNvYnJlc2NyaWJlIGVsIGNhbGxiYWNrIGRlbCBjb21hbmRvIHBhcmEgcXVlIG5vIGhhZ2EgbmFkYVxuICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayA9ICgpID0+IG5ldyBOb3RpY2UoXCJFc3RlIGNvbWFuZG8gaGEgc2lkbyBkZXNhY3RpdmFkby5cIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBMaW1waWEgZWwgYXJyYXkgZGUgSURzIHJlZ2lzdHJhZG9zXG4gICAgcGx1Z2luLnJlZ2lzdGVyZWRUYXNrTmF2aWdhdG9ySURzID0gW107XG59IiwgIi8qXG4gKiBGaWxlbmFtZTogL3NyYy9tb2R1bGVzL3Rhc2tOYXZpZ2F0b3IvdGFza05hdmlnYXRvci50c1xuICogQ3JlYXRlZCBEYXRlOiAyMDI1LTAyLTI2XG4gKiBBdXRob3I6IE1vZHVsZSBDcmVhdG9yXG4gKiAtLS0tLVxuICogQ29weXJpZ2h0IChjKSAyMDI1XG4gKi9cblxuaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFRGaWxlLCBOb3RpY2UsIEVkaXRvciwgTWFya2Rvd25WaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTZWxlY2Npb25Nb2RhbFRhcmVhcyB9IGZyb20gXCIuLi9tb2RhbGVzL3NlbGVjY2lvbk1vZGFsVGFyZWFzXCI7XG5cbi8qKlxuICogSW50ZXJmYXogcGFyYSByZXByZXNlbnRhciB1bmEgdGFyZWEgY29uIHN1IGluZm9ybWFjaVx1MDBGM24gZGUgdWJpY2FjaVx1MDBGM25cbiAqL1xuaW50ZXJmYWNlIFRhc2tJbmZvIHtcbiAgICB0ZXh0OiBzdHJpbmc7ICAgICAgICAgICAvLyBUZXh0byBkZSBsYSB0YXJlYVxuICAgIGZpbGU6IFRGaWxlOyAgICAgICAgICAgIC8vIEFyY2hpdm8gZG9uZGUgc2UgZW5jdWVudHJhIGxhIHRhcmVhXG4gICAgbGluZU51bWJlcjogbnVtYmVyOyAgICAgLy8gTlx1MDBGQW1lcm8gZGUgbFx1MDBFRG5lYSBkb25kZSBzZSBlbmN1ZW50cmEgbGEgdGFyZWFcbiAgICBkaXNwbGF5VGV4dDogc3RyaW5nOyAgICAvLyBUZXh0byBmb3JtYXRlYWRvIHBhcmEgbW9zdHJhciAoYWxpYXMgKyB0ZXh0byBkZSBsYSB0YXJlYSlcbn1cblxuZXhwb3J0IGNsYXNzIFRhc2tOYXZpZ2F0b3Ige1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG4gICAgcHJpdmF0ZSBwbHVnaW46IFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmFwcCA9IHBsdWdpbi5hcHA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTmF2ZWdhIGEgbGEgdGFyZWEgc2VsZWNjaW9uYWRhIHBvciBlbCB1c3VhcmlvXG4gICAgICovXG4gICAgYXN5bmMgbmF2aWdhdGVUb1Rhc2soKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyAxLiBFbmN1ZW50cmEgdG9kYXMgbGFzIHRhcmVhcyBlbiBlamVjdWNpXHUwMEYzblxuICAgICAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmZpbmRQZW5kaW5nVGFza3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyBzZSBlbmNvbnRyYXJvbiB0YXJlYXMgZW4gZWplY3VjaVx1MDBGM24uXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gMi4gUHJlcGFyYSBsYXMgb3BjaW9uZXMgcGFyYSBlbCBtb2RhbFxuICAgICAgICAgICAgY29uc3QgZGlzcGxheU9wdGlvbnMgPSB0YXNrcy5tYXAodGFzayA9PiB0YXNrLmRpc3BsYXlUZXh0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMy4gTXVlc3RyYSBlbCBtb2RhbCBwYXJhIHNlbGVjY2lvbmFyIHVuYSB0YXJlYVxuICAgICAgICAgICAgY29uc3QgcGxhY2Vob2xkZXIgPSBcIlNlbGVjY2lvbmEgdW5hIHRhcmVhIHBhcmEgbmF2ZWdhclwiO1xuICAgICAgICAgICAgY29uc3QgbW9kYWxNZW51ID0gbmV3IFNlbGVjY2lvbk1vZGFsVGFyZWFzKFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLCBcbiAgICAgICAgICAgICAgICBkaXNwbGF5T3B0aW9ucywgXG4gICAgICAgICAgICAgICAgdGFza3MubWFwKChfLCBpbmRleCkgPT4gaW5kZXgudG9TdHJpbmcoKSksXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRJbmRleCA9IHBhcnNlSW50KGF3YWl0IG1vZGFsTWVudS5vcGVuQW5kQXdhaXRTZWxlY3Rpb24oKSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUYXNrID0gdGFza3Nbc2VsZWN0ZWRJbmRleF07XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gNC4gTmF2ZWdhIGFsIGFyY2hpdm8geSBsXHUwMEVEbmVhIHNlbGVjY2lvbmFkYVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3BlbkZpbGVBdExpbmUoc2VsZWN0ZWRUYXNrLmZpbGUsIHNlbGVjdGVkVGFzay5saW5lTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBOYXZlZ2FuZG8gYSBsYSB0YXJlYSBlbiAke3NlbGVjdGVkVGFzay5maWxlLmJhc2VuYW1lfWApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBVc3VhcmlvIGNlcnJcdTAwRjMgZWwgbW9kYWwgc2luIHNlbGVjY2lvbmFyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJTZWxlY2NpXHUwMEYzbiBkZSB0YXJlYSBjYW5jZWxhZGEgcG9yIGVsIHVzdWFyaW9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZW4gbmF2ZWdhY2lcdTAwRjNuIGRlIHRhcmVhczpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmN1ZW50cmEgdG9kYXMgbGFzIHRhcmVhcyBwZW5kaWVudGVzIChjb24gZXN0YWRvIFsvXSkgZW4gbG9zIGFyY2hpdm9zXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBmaW5kUGVuZGluZ1Rhc2tzKCk6IFByb21pc2U8VGFza0luZm9bXT4ge1xuICAgICAgICBjb25zdCB0YXNrczogVGFza0luZm9bXSA9IFtdO1xuICAgICAgICBjb25zdCBhcmNoaXZvcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEV4Y2x1aXIgYXJjaGl2b3MgZW4gY2FycGV0YXMgZXNwZWNcdTAwRURmaWNhc1xuICAgICAgICBjb25zdCBhcmNoaXZvc1JlbGV2YW50ZXMgPSBhcmNoaXZvcy5maWx0ZXIoYXJjaGl2byA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIlBsYW50aWxsYXNcIikgJiYgXG4gICAgICAgICAgICAgICAgICAgIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIkVzdHJ1Y3R1cmEvR1REL1Npc3RlbWEgR1REL1Npc3RlbWFcIikgJiYgXG4gICAgICAgICAgICAgICAgICAgIWFyY2hpdm8ucGF0aC5pbmNsdWRlcyhcIkFyY2hpdm9cIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAoY29uc3QgYXJjaGl2byBvZiBhcmNoaXZvc1JlbGV2YW50ZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVuaWRvID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChhcmNoaXZvKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lYXMgPSBjb250ZW5pZG8uc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT2J0aWVuZSBsb3MgYWxpYXMgZGVsIGFyY2hpdm8gcGFyYSBtb3N0cmFybG9zIGp1bnRvIGNvbiBsYSB0YXJlYVxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYXJjaGl2byk7XG4gICAgICAgICAgICAgICAgbGV0IGFsaWFzRGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uYWxpYXNlcykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgYWxpYXNlcyA9IG1ldGFkYXRhLmZyb250bWF0dGVyLmFsaWFzZXM7XG4gICAgICAgICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShhbGlhc2VzKSkgYWxpYXNlcyA9IFthbGlhc2VzXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsaWFzZXMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzRGlzcGxheSA9IGFsaWFzZXNbMV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYWxpYXNlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxpYXNEaXNwbGF5ID0gYWxpYXNlc1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTaSBubyBzZSBlbmNvbnRyXHUwMEYzIGFsaWFzLCB1c2FyIGVsIG5vbWJyZSBkZWwgYXJjaGl2b1xuICAgICAgICAgICAgICAgIGlmICghYWxpYXNEaXNwbGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGFsaWFzRGlzcGxheSA9IGFyY2hpdm8uYmFzZW5hbWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQnVzY2FyIHRhcmVhcyBwZW5kaWVudGVzIFsvXSBlbiBjYWRhIGxcdTAwRURuZWFcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVhcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaW5lYSA9IGxpbmVhc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmVhLm1hdGNoKC9eICotIFxcW1xcL1xcXSAuKi8pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW1waWFyIGVsIHRleHRvIGRlIGxhIHRhcmVhXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0b1RhcmVhID0gYXdhaXQgdGhpcy5saW1waWFyVGV4dG9UYXJlYShsaW5lYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWFyIGVsIHRleHRvIGRlIHZpc3VhbGl6YWNpXHUwMEYzbiBjb21iaW5hbmRvIGVsIGFsaWFzIHkgbGEgdGFyZWFcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gYCR7YWxpYXNEaXNwbGF5fSAvICR7dGV4dG9UYXJlYX1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0ZXh0b1RhcmVhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGU6IGFyY2hpdm8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlcjogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogZGlzcGxheVRleHRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBhbCBwcm9jZXNhciBlbCBhcmNoaXZvICR7YXJjaGl2by5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGltcGlhIGVsIHRleHRvIGRlIHVuYSB0YXJlYSBwYXJhIG1vc3RyYXJsYSBkZSBmb3JtYSBsZWdpYmxlXG4gICAgICogQHBhcmFtIHRpdHVsbyBUZXh0byBjb21wbGV0byBkZSBsYSBsXHUwMEVEbmVhIGRlIGxhIHRhcmVhXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBsaW1waWFyVGV4dG9UYXJlYSh0aXR1bG86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICAgIC8vIFNlIHRvbWEgc29sbyBsYSBwcmltZXJhIGxcdTAwRURuZWFcbiAgICAgICAgICAgIGxldCB0ZXh0b0xpbXBpbyA9IHRpdHVsby5zcGxpdChcIlxcblwiKVswXTtcblxuICAgICAgICAgICAgLy8gVHJhbnNmb3JtYSBsYXMgc2VjY2lvbmVzIHF1ZSBlbXBpZXphbiBwb3IgXCIjXCI6XG4gICAgICAgICAgICAvLyBQb3IgZWplbXBsbzogXCIjY3gvR2VzdGlcdTAwRjNuUGVyc29uYWwvUGxhblNlbWFuYWxcIiBzZSB0cmFuc2Zvcm1hIGVuIFwiY3hfR2VzdGlvblBlcnNvbmFsX1BsYW5TZW1hbmFsXCJcbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvIyhbXFx3LS9dKykvZywgKG1hdGNoLCBwMSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm1hZG8gPSBwMS5yZXBsYWNlKC9cXC8vZywgXCJfXCIpO1xuICAgICAgICAgICAgICAgIC8vIEVsaW1pbmEgYWNlbnRvcyB1c2FuZG8gbm9ybWFsaXphY2lcdTAwRjNuIFVuaWNvZGVcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1hZG8gPSB0cmFuc2Zvcm1hZG8ubm9ybWFsaXplKFwiTkZEXCIpLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csIFwiXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2Zvcm1hZG87XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRWxpbWluYSBsb3MgY2FtcG9zIGRlIGVzdGlsbyBEYXRhdmlldywgcG9yIGVqZW1wbG8gW2NhbXBvOjp2YWxvcl1cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZSgvXFxbXFx3Kzo6W15cXF1dK1xcXS9nLCBcIlwiKTtcblxuICAgICAgICAgICAgLy8gRWxpbWluYSBlbCBwYXRyXHUwMEYzbiBcIiAtIFsvXVwiIGFsIGluaWNpbyBkZSBsYSBjYWRlbmEsIGNvbiBwb3NpYmxlcyBlc3BhY2lvc1xuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9eXFxzKi1cXHMqXFxbXFwvXFxdXFxzKi8sIFwiXCIpO1xuXG4gICAgICAgICAgICAvLyBFbGltaW5hIGxvcyBlbW9qaXMgZGUgVGFza3MganVudG8gY29uIGxhIGZlY2hhIHF1ZSB2aWVuZSBpbm1lZGlhdGFtZW50ZSBkZXNwdVx1MDBFOXMuXG4gICAgICAgICAgICAvLyBTZSBhc3VtZSBxdWUgbGEgZmVjaGEgdGllbmUgZm9ybWF0byBZWVlZLU1NLURELCBvcGNpb25hbG1lbnRlIHNlZ3VpZGEgZGUgaG9yYS5cbiAgICAgICAgICAgIHRleHRvTGltcGlvID0gdGV4dG9MaW1waW8ucmVwbGFjZShcbiAgICAgICAgICAgICAgICAvXFxwe0V4dGVuZGVkX1BpY3RvZ3JhcGhpY31cXHMqXFxkezR9LVxcZHsyfS1cXGR7Mn0oPzpcXHMqXFxkezJ9OlxcZHsyfSg/OjpcXGR7Mn0pPyk/L2d1LFxuICAgICAgICAgICAgICAgIFwiXCJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIEVsaW1pbmEgY3VhbHF1aWVyIG90cm8gZW1vamkgcXVlIHF1ZWRlXG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoL1xccHtFeHRlbmRlZF9QaWN0b2dyYXBoaWN9L2d1LCBcIlwiKTtcblxuICAgICAgICAgICAgLy8gRWxpbWluYSBjdWFscXVpZXIgY29udGVuaWRvIHF1ZSBlc3RcdTAwRTkgZW50cmUgY29yY2hldGVzIGN1YWRyYWRvcyAoaW5jbHV5ZW5kbyBsb3MgY29yY2hldGVzKVxuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXFtbXlxcXV0qXFxdL2csIFwiXCIpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgY2FyYWN0ZXJlcyBubyBwZXJtaXRpZG9zIGVuIG5vbWJyZXMgZGUgYXJjaGl2byBjb24gdW4gZ3Vpb24gYmFqb1xuICAgICAgICAgICAgY29uc3QgY2FyYWN0ZXJlc05vUGVybWl0aWRvcyA9IC9bPD46XCJcXC9cXFxcfD8qXFx4MDAtXFx4MUZdL2c7XG4gICAgICAgICAgICB0ZXh0b0xpbXBpbyA9IHRleHRvTGltcGlvLnJlcGxhY2UoY2FyYWN0ZXJlc05vUGVybWl0aWRvcywgXCJfXCIpO1xuXG4gICAgICAgICAgICAvLyBSZWVtcGxhemEgZXNwYWNpb3MgbVx1MDBGQWx0aXBsZXMgcG9yIHVuIFx1MDBGQW5pY28gZXNwYWNpb1xuICAgICAgICAgICAgdGV4dG9MaW1waW8gPSB0ZXh0b0xpbXBpby5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcblxuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0b0xpbXBpby50cmltKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBYnJlIHVuIGFyY2hpdm8geSBuYXZlZ2EgYSB1bmEgbFx1MDBFRG5lYSBlc3BlY1x1MDBFRGZpY2FcbiAgICAgKiBAcGFyYW0gZmlsZSBBcmNoaXZvIGEgYWJyaXJcbiAgICAgKiBAcGFyYW0gbGluZSBOXHUwMEZBbWVybyBkZSBsXHUwMEVEbmVhIGEgbGEgcXVlIG5hdmVnYXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIG9wZW5GaWxlQXRMaW5lKGZpbGU6IFRGaWxlLCBsaW5lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gQWJyZSBlbCBhcmNoaXZvIGVuIHVuYSBudWV2YSBwZXN0YVx1MDBGMWFcbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgICBhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gQnVzY2EgbGEgdmlzdGEgZGVsIGVkaXRvciB5IG5hdmVnYSBhIGxhIGxcdTAwRURuZWEgZXNwZWNcdTAwRURmaWNhXG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gdmlldy5lZGl0b3I7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFBvc2ljaW9uYSBlbCBjdXJzb3IgZW4gbGEgbFx1MDBFRG5lYSBkZXNlYWRhXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHsgbGluZTogbGluZSwgY2g6IDAgfTtcbiAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3IocG9zaXRpb24pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYWNlIHNjcm9sbCBhIGxhIGxcdTAwRURuZWEgeSBsYSByZXNhbHRhXG4gICAgICAgICAgICBlZGl0b3Iuc2Nyb2xsSW50b1ZpZXcoeyBmcm9tOiBwb3NpdGlvbiwgdG86IHBvc2l0aW9uIH0sIHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZWxlY2Npb25hIHRvZGEgbGEgbFx1MDBFRG5lYSBwYXJhIGRlc3RhY2FybGEgdmlzdWFsbWVudGVcbiAgICAgICAgICAgIGNvbnN0IGxpbmVMZW5ndGggPSBlZGl0b3IuZ2V0TGluZShsaW5lKS5sZW5ndGg7XG4gICAgICAgICAgICBlZGl0b3Iuc2V0U2VsZWN0aW9uKFxuICAgICAgICAgICAgICAgIHsgbGluZTogbGluZSwgY2g6IDAgfSxcbiAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmUsIGNoOiBsaW5lTGVuZ3RoIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFzZWd1cmEgcXVlIGVsIGVkaXRvciB0aWVuZSBlbCBmb2NvXG4gICAgICAgICAgICBlZGl0b3IuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUNBQSxtQkFHYTtBQUpiO0FBQUE7QUFBQTtBQUNBLElBQUFBLG9CQUErQztBQUd4QyxJQUFNLGlCQUFOLGNBQTZCLG9DQUEwQjtBQUFBO0FBQUE7QUFBQSxNQU8xRCxZQUFZQyxNQUFVLFFBQWtCLFFBQWtCLGFBQXFCO0FBQzNFLGNBQU1BLElBQUc7QUFKYjtBQUFBLGFBQVEsaUJBQTBCO0FBSzlCLGFBQUssU0FBUztBQUNkLGFBQUssU0FBUztBQUVkLGFBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxLQUFLLE9BQU8sVUFBVTtBQUNqRCxjQUFJLEtBQUssSUFBSSxPQUFPLEtBQUs7QUFDekIsaUJBQU87QUFBQSxRQUNYLEdBQUcsQ0FBQyxDQUFDO0FBQ0wsYUFBSyxlQUFlLFdBQVc7QUFBQSxNQUNuQztBQUFBO0FBQUEsTUFHQSxXQUFxQjtBQUNqQixlQUFPLEtBQUs7QUFBQSxNQUNoQjtBQUFBO0FBQUEsTUFHQSxZQUFZLE1BQXNCO0FBQzlCLGVBQU87QUFBQSxNQUNYO0FBQUE7QUFBQSxNQUdBLFVBQWdCO0FBRVosWUFBSSxDQUFDLEtBQUssZ0JBQWdCO0FBQ3RCLGVBQUssT0FBTyxJQUFJLE1BQU0sZ0NBQTZCLENBQUM7QUFBQSxRQUN4RDtBQUFBLE1BQ0o7QUFBQTtB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QUssc0JBQXNCLFdBQVc7QUFBQSxJQUMxQztBQUVJLFFBQUksS0FBSyxxQkFBcUI7QUFDNUIsV0FBSyxvQkFBb0IsV0FBVztBQUFBLElBQ3hDO0FBQ0EsV0FBUSxLQUFLLElBQVk7QUFDekIsV0FBTyxRQUFRLFFBQVE7QUFBQSxFQUN6QjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBRW5CLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFFM0U7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUVuQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFHakMsU0FBSyxtQkFBbUI7QUFBQSxFQUUxQjtBQUFBLEVBRUEsUUFBUTtBQUNOLFFBQ0UsQ0FBQyxLQUFLLE9BQ04sQ0FBQyxLQUFLLElBQUksUUFBUSxlQUFlLElBQUksb0JBQW9CLEdBQ3pEO0FBQ0EsY0FBUSxNQUFNLDRDQUF5QztBQUN2RDtBQUFBLElBQ0Y7QUFLQSxRQUFJLFFBQVEsS0FBSyxJQUFJLFFBQVEsUUFBUSxvQkFBb0IsRUFBRTtBQUMzRCxZQUFRLE1BQU0sb0JBQW9CLG1CQUFtQjtBQUNyRCxRQUFJLEtBQUssQ0FBQztBQUVWLE9BQUcsT0FBTyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxNQUFNO0FBQzVDLE9BQUcsU0FBUyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsUUFBUSxRQUFRO0FBRWhELFFBQUksQ0FBQyxHQUFHLFFBQVE7QUFDZCxjQUFRO0FBQUEsUUFDTjtBQUFBLE1BQ0Y7QUFDQTtBQUFBLElBQ0Y7QUFDQSxZQUFRLElBQUksc0RBQXNEO0FBQ2xFLFdBQU87QUFBQSxFQUNUO0FBQ0Y7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm1lbnVPdHJvIiwgInRpcG8iLCAidHlwZSIsICJzIiwgInNpbmdsZXRvbiIsICJvZmZzZXQiLCAicyIsICJkZWZhdWx0Wm9uZSIsICJvZmZzZXQiLCAibiIsICJuIiwgIm9mZnNldCIsICJzIiwgIm4iLCAiZm9ybWF0T2Zmc2V0IiwgInMiLCAibWF0Y2giLCAib2Zmc2V0IiwgImwiLCAibiIsICJzIiwgIklOVkFMSUQiLCAicyIsICJlIiwgInMiLCAidHlwZSIsICJjbG9uZSIsICJvZmZzZXQiLCAib3JkZXJlZFVuaXRzIiwgIklOVkFMSUQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJhbGlhcyIsICJmb2xkZXIiLCAic2FtZU5hbWUiLCAibmFtZUZpbGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJvZmZzZXQiLCAibWF0Y2giLCAiaW1wb3J0X29ic2lkaWFuIiwgImluaXRfU2VzaW9uTGVjdHVyYSIsICJfYSIsICJfYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2VzaW9uTGVjdHVyYSIsICJyZWdpc3RybyIsICJpbXBvcnRfb2JzaWRpYW4iLCAicXVpdGFyRG9ibGVDb3JjaGV0ZSIsICJub3JtYWxpemFyQXJyYXkiLCAicmVnaXN0cm8iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgIm9mZnNldCIsICJyZWdpc3RlclJpYmJvbk1lbnUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAicmVnaXN0ZXJDb21tYW5kcyIsICJkZWFjdGl2YXRlQ29tbWFuZHMiLCAicmVnaXN0ZXJSaWJib25NZW51IiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJuaXZlbCIsICJpbXBvcnRfb2JzaWRpYW4iLCAibml2ZWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImNsYXNpZmljYWNpb24iLCAidGFnQ2xhc2lmaWNhY2lvbiIsICJudWV2YUNsYXNpZmljYWNpb24iLCAiZnJvbnRtYXR0ZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgImltcG9ydF9vYnNpZGlhbiIsICJhcHAiLCAiYWN0aXZlUmVzb3VyY2VzIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiWUFNTFVwZGF0ZXJBUEkiLCAib2Zmc2V0IiwgImNsYXNpZmljYWNpb24iLCAidGFnQ2xhc2lmaWNhY2lvbiIsICJudWV2YUNsYXNpZmljYWNpb24iLCAiZnJvbnRtYXR0ZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidGl0dWxvIiwgIm1hdGNoIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJtYXRjaCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiYXBwIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImFwcCIsICJub3ciLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJZQU1MVXBkYXRlckFQSSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm1hdGNoIiwgInRhcmVhcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJyZWdpc3RlckNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJub3ciLCAiaW1wb3J0X29ic2lkaWFuIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIm1hdGNoIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgInJlZ2lzdGVyQ29tbWFuZHMiLCAiZGVhY3RpdmF0ZUNvbW1hbmRzIiwgIllBTUxVcGRhdGVyQVBJIl0KfQo=
